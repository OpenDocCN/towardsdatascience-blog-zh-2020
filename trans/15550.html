<html>
<head>
<title>Top 10 dplyr Functions — Data Analysis Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">十大dplyr函数—简化数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-10-dplyr-functions-data-analysis-made-easy-23fc67f158d5?source=collection_archive---------40-----------------------#2020-10-26">https://towardsdatascience.com/top-10-dplyr-functions-data-analysis-made-easy-23fc67f158d5?source=collection_archive---------40-----------------------#2020-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a446" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Dplyr比熊猫更轻松，更干净。你敢换吗？</h2></div><p id="a5a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在过去的几年里，我一直是Python的粉丝。这种语言对于数据科学来说非常优秀，作为一种通用的语言使得数据科学的非数据科学部分变得更加容易。但是在数据探索和准备领域，R的<code class="fe lf lg lh li b">dplyr</code>能打败Python的<code class="fe lf lg lh li b">pandas</code>吗？是的，可以。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/011cfc2c6c9c2e73509a368d9d597dd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ggugH1b5luDVDLoZ-WFfrw.jpeg"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">照片由<a class="ae lz" href="https://unsplash.com/@sctgrhm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae lz" href="https://unsplash.com/s/photos/analysis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2af7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">今天我们来看看如何使用10个最常见的<code class="fe lf lg lh li b">dplyr</code>功能。这还不是该软件包所能提供的全部，请参考<a class="ae lz" href="https://dplyr.tidyverse.org/reference/index.html" rel="noopener ugc nofollow" target="_blank">此链接</a>获取完整列表。我们将使用<a class="ae lz" href="https://cran.r-project.org/web/packages/gapminder/README.html" rel="noopener ugc nofollow" target="_blank"> Gapminder </a>数据集进行整个分析，该数据集可直接在r</p><p id="1c8d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是如何导入我们今天需要的所有包:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="1434" class="me mf it li b gy mg mh l mi mj">library(dplyr)<br/>library(gapminder)</span></pre><p id="3bbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从下一节开始探索。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="7b90" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">挑选</h1><p id="daf7" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">当我们想要选择一列或多列时，使用select命令。可以把它想象成SQL中的一个<code class="fe lf lg lh li b">SELECT</code>语句，在这里我们可以只挑选感兴趣的列，而不去碰其他的列。</p><p id="6c01" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是使用<code class="fe lf lg lh li b">select</code>的第一种方法——列出我们想要保留的所有列:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="5547" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  select(country, year, lifeExp)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e77d72617e5c1edd9d86b4f144cb74c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/0*Ou-dtzVzPRKpxrld.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="ab35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种方法是通过指定我们想要删除的列——用<code class="fe lf lg lh li b">-</code>前缀完成:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="03f3" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  select(-continent)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/21f2ffd6368cd7afda998493d695869d.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/0*betQFwgBl4BHwEnn.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="3956" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">过滤器</h1><p id="1d27" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">filter命令相当于SQL中的<code class="fe lf lg lh li b">WHERE</code>关键字，因为我们只能获取感兴趣的子集。使用该命令有多种方式，如下所示。</p><p id="63e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们只保留1952年的那些行:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="a622" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  filter(year == 1952)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi np"><img src="../Images/a1ea108e85c75d1ca75500d2ec8ba3e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/0*w8pCvsjTk1tTtf84.png"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="852a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们添加另一个过滤器—年份仍然是1952年，但我们只需要克罗地亚的数据:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="699f" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;%<br/>  filter(year == 1952, country == 'Croatia')</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/273bf41323f0ace29bc98a479d3969a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/0*XUzwsF7dOQYfwgS7.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="eaa8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那太好了，但是我们如何通过多年来过滤。这里<code class="fe lf lg lh li b">%in%</code>操作符派上了用场:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="e9e5" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;%<br/>  filter(year %in% c(1952, 1957), country == 'Croatia')</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/7df87a4071f67763fb27b9510087a34a.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/0*xABshmtWZXwQX61m.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="2e81" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">安排</h1><p id="26a4" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated"><code class="fe lf lg lh li b">arrange</code>运算符用于按单个列对数据进行排序，可以是升序，也可以是降序。默认情况下，升序排序。它相当于SQL中的<code class="fe lf lg lh li b">ORDER BY</code>关键字。</p><p id="bdf7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们按人口升序对Gapminder数据集进行排序:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="c834" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  arrange(pop)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/f67e3966c972c357fd3c112bcaa60f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/0*TAEicD03WrtNxjyC.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="b56c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们按照降序来做同样的事情:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="eb27" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  arrange(desc(pop))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1758ed586208f196d42f9097deb7ce02.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/0*cyqMKUclU5xmMtlJ.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="3c29" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">明显的</h1><p id="3386" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">该运算符用于查找给定属性的唯一元素。它不需要任何进一步的澄清，所以让我们直接进入代码。</p><p id="d183" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我们如何在数据集中看到独特的大陆:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="e221" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  distinct(continent)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi nt"><img src="../Images/d69477e6f02f2b23ae8317a1d4c9fd05.png" data-original-src="https://miro.medium.com/v2/resize:fit:174/format:webp/0*RRyjHKTO96hmUhLj.png"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="4bf7" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使突变</h1><p id="41bf" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated"><code class="fe lf lg lh li b">mutate</code>操作符用于创建新列。在此操作过程中，所有其他列保持不变。</p><p id="ca4d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们用人口乘以人均GDP来计算一个国家的GDP:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="a393" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;%<br/>  mutate(totalGdp = pop * gdpPercap)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/89549c61e33380a4ea2e367830a49eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/0*5rszmqpb_arzFw2f.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="84ea" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">使变形</h1><p id="49a3" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">这个操作符与<code class="fe lf lg lh li b">mutate</code>几乎相同，唯一的区别是<code class="fe lf lg lh li b">transmute</code>不保留其他属性——只保留新的属性。</p><p id="5fc1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将再次使用它来计算总GDP，然后将结果与<code class="fe lf lg lh li b">mutate</code>运算符进行比较:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="bd7a" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;%<br/>  transmute(totalGdp = pop * gdpPercap)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/df70d290fec7b72c8af0871675af72ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/0*6AJ4z54WDBiMNV4a.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="378d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如所承诺的，只显示了新的<code class="fe lf lg lh li b">totalGdp</code>列。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="8d18" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">重新命名</h1><p id="8172" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">顾名思义，这个操作符用于重命名。注意语法，因为我们必须首先指定新名称。</p><p id="df2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们重新命名几个列——life exp到<em class="le">寿命预期</em>和<em class="le"> pop </em>到<em class="le">人口</em>:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="ec0e" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  rename(lifeExpectancy = lifeExp, population = pop)</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/19f982c64550a4465053a56f2fdd2d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/0*htgrukCOmWi_1Wvw.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="8dfe" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">总结</h1><p id="f37f" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated"><code class="fe lf lg lh li b">summarize</code>或<code class="fe lf lg lh li b">summarise</code>操作符对于在数据集上创建汇总统计非常有用。如果不执行分组操作，结果将是单个值。</p><p id="6ece" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，假设我们想要找出总体平均预期寿命:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="e7d9" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  summarize(meanLifeExp = mean(lifeExp))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/fe784626ef417648f170f7c875e757a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:214/format:webp/0*iEL-rxRimXCh6zV7.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="9c99" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们想的话，我们可以联系其他运营商，比如说在2007年找到平均预期寿命:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="7117" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  filter(year == 2007) %&gt;% <br/>  summarize(meanLifeExp = mean(lifeExp))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/cf1dadf0534e44dbf266a0d2c55eab6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:202/format:webp/0*fg-wBUS30KO-Gzmz.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="c233" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很好，但是<code class="fe lf lg lh li b">summarize</code>在用于分组操作时最有用。接下来我们来讨论这些。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="88f5" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">group_by</h1><p id="d0c8" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">我们可以使用分组操作符来充分利用前面讨论过的操作符的潜力，比如<code class="fe lf lg lh li b">summarize</code>。这个相当于SQL中的<code class="fe lf lg lh li b">GROUP_BY</code>关键字，所以您可能已经很熟悉了。</p><p id="6b27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们想要找出每个大陆的平均预期寿命，如果没有分组运算符，这是不可能的:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="7dd7" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  group_by(continent) %&gt;% <br/>  summarize(meanLifeExp = mean(lifeExp))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/a5e37d2e4ba569a15e4bcaaaab5429bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/0*hVhIra8pNPE5dSf6.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure><p id="6fd1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将多个操作符链接在一起，并在多个列上执行分组。例如，让我们看看如何找到每个洲的平均预期寿命，并进一步按年份分组(仅2002年和2007年):</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="4caf" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  filter(year %in% c(2002, 2007)) %&gt;% <br/>  group_by(continent, year) %&gt;% <br/>  summarize(meanLifeExp = mean(lifeExp))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/33cf43bbc731a699243b6702c9c1e7c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/0*GqIG4swov7EATgSK.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="9a1d" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">if_else</h1><p id="fc1f" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">这不是你的传统操作符，因为我们在其他操作符中使用它，比如<code class="fe lf lg lh li b">mutate</code>。它让我们无需编写多行代码就可以执行矢量化的if-else语句。</p><p id="23d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看如何按洲和年份(仅2002年和2007年)分组并计算平均预期寿命，然后创建另一个列，如果平均预期寿命大于70，则该列的值为“Y ”,否则为“N ”:</p><pre class="lk ll lm ln gt ma li mb mc aw md bi"><span id="decd" class="me mf it li b gy mg mh l mi mj">gapminder %&gt;% <br/>  filter(year %in% c(2002, 2007)) %&gt;% <br/>  group_by(continent, year) %&gt;% <br/>  summarize(meanLifeExp = mean(lifeExp)) %&gt;% <br/>  mutate(meanLifeExpOver70 = if_else(meanLifeExp &gt; 70, 'Y', 'N'))</span></pre><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/0c31682103313450f0f8c8a4df063756.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/0*SgjF--V2XZ-X7jOL.png"/></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="c709" class="mr mf it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">离别赠言</h1><p id="d946" class="pw-post-body-paragraph ki kj it kk b kl ni ju kn ko nj jx kq kr nk kt ku kv nl kx ky kz nm lb lc ld im bi translated">一天下来，在<code class="fe lf lg lh li b">dplyr</code>完成的任何事情都可以在<code class="fe lf lg lh li b">pandas</code>完成。但是你不得不承认—<code class="fe lf lg lh li b">dplyr</code>做起来如此轻松，而且用了一种更简单、更干净的方式。两者之间的比较是另一个时间的潜在主题，所以让我知道你是否对此感兴趣。</p><p id="7161" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，让我知道你更喜欢哪一个，为什么——尽量保持你的观点不偏不倚。</p><p id="2b6f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lz" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">加入我的私人邮件列表，获取更多有用的见解。</strong> </a></p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="d5ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">喜欢这篇文章吗？成为 <a class="ae lz" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="le">中等会员</em> </a> <em class="le">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oc od gp gr oe of"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot lt of"/></div></div></a></div></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="7c40" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">原载于2020年10月26日</em><a class="ae lz" href="https://www.betterdatascience.com/top-10-dplyr-functions-data-analysis-made-easy/" rel="noopener ugc nofollow" target="_blank"><em class="le">https://www.betterdatascience.com</em></a><em class="le">。</em></p></div></div>    
</body>
</html>