<html>
<head>
<title>Data Science in a Serverless World</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无服务器世界中的数据科学</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-in-a-serverless-world-d04632e07a67?source=collection_archive---------31-----------------------#2020-11-09">https://towardsdatascience.com/data-science-in-a-serverless-world-d04632e07a67?source=collection_archive---------31-----------------------#2020-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2adc94041031438ed7903b5d5537ef80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlyinvuFCcEfd608M-sFyQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://pxhere.com/en/photo/1596860" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><div class=""/><div class=""><h2 id="3ae6" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">利用托管服务构建数据产品</h2></div><p id="0b06" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在大公司中，通常有单独的团队来训练机器学习模型，并将这些模型投入生产。数据科学团队可能负责特征工程、模型选择和超参数调整，而机器学习工程团队负责构建和维护服务于训练模型所需的基础设施。随着云平台提供越来越多的托管服务，这种关注点的分离不再必要，数据科学家现在可以构建生产系统。处于数据科学和机器学习工程交汇点的数据科学家通常被称为应用科学家，这是一个可以为公司提供重要价值的角色。</p><p id="0a7d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">谷歌云平台(GCP)和其他云提供商现在为数据库、消息传递、监控、容器、流处理和许多其他任务提供无服务器和完全托管的解决方案。这意味着团队可以快速构建端到端的机器学习管道，同时减少供应和监控基础设施所需的时间。In使数据科学家能够构建生产级的数据产品，其中设置了监控，并且系统可以从故障中恢复。除了只关注模型训练，应用科学家还可以构建服务于ML模型的生产系统。</p><p id="3c9b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为什么单个团队能够利用托管服务构建端到端的机器学习管道非常有用？</p><ul class=""><li id="c2ce" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx jh">快速开发:</strong>让一个团队负责模型构建和模型部署通常会导致项目更快的迭代，从而在扩展系统之前产生更多的原型和测试。使用托管服务，如GCP Redis上的Memorystore，使团队能够用应用程序数据库制作数据产品的原型，而不必担心启动和监控基础架构。</li><li id="3881" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh">简化翻译:</strong>当不同的团队执行模型构建和模型部署时，通常会使用不同的工具集，并且可能需要将使用Python训练的模型翻译成不同的编程语言，例如Go。当团队同时负责这两项任务时，通常会使用相似的工具来完成这两项任务，比如使用Python来进行模型训练和模型服务。这种翻译的减少对于构建实时系统特别有用。</li><li id="05de" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh">发展专业知识:</strong>构建端到端系统意味着数据科学家将获得使用标准工具之外的工具的实践经验，例如使用NoSQL工具和Kubernetes。</li></ul><p id="fd67" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然让单个团队使用托管服务构建数据产品有几个优点，但也有一些缺点:</p><ul class=""><li id="d8d4" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx jh">成本:</strong>当您达到一定规模时，托管服务通常比托管解决方案更昂贵。例如，无服务器功能非常适合原型开发，但是对于大容量管道来说成本太高。</li><li id="1f83" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh">缺失功能:</strong>云提供商可能没有针对您需要使用的服务的完全托管产品，或者该产品可能无法提供应用所需的性能要求。例如，一些组织使用Kafka代替PubSub进行消息传递，因为延迟要求较低。</li><li id="e23c" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh"> DevOps: </strong>让一个数据科学团队构建和部署机器学习管道意味着该团队现在需要数据产品，这可能不是该角色的期望。对于关键应用程序，与工程或云运营团队合作非常有用。</li></ul><p id="2b96" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">数据科学团队使用托管服务构建端到端数据产品会是什么样子？我们将概述在GCP上为移动应用程序服务的实时模型。</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mf"><img src="../Images/dab19dd5e03801c6620523544be6624f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2HrhKFUjN2D9A4dFF7ydA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">数据收集管道</p></figure><h2 id="86fc" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">数据收集</h2><p id="3d0e" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">为这个数据产品设置的第一个组件是从移动应用程序收集事件的管道。我们需要将数据从移动设备传输到BigQuery，以便为训练模型提供历史数据。对于模型应用，我们将使用Redis来执行实时特征工程。我们需要为这个管道创建两个组件:一个web服务将HTTP post事件转换成JSON消息并将事件传递给PubSub，一个数据流作业将PubSub设置为数据源，将BigQuery设置为数据接收器。web服务可以使用Python中的Flask或Java中的Undertow编写，而数据流作业可以使用Python或Java编写。我们可以使用以下服务通过GCP上的托管服务来构建收集管道:</p><ul class=""><li id="1c6c" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx jh">负载平衡:</strong>该服务提供第7层负载平衡，以提供一个端点，移动设备可以调用该端点来发送跟踪事件。要设置负载平衡器，我们首先需要在Kubernetes上部署跟踪服务，并使用节点端口公开该服务。</li><li id="2911" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh"> Google Kubernetes引擎(GKE): </strong>我们可以使用Docker将web服务容器化，并使用托管的Kubernetes托管服务。该服务接收HTTP posts形式的跟踪事件，并将post有效负载转换为JSON字符串，然后传递给PubSub。</li><li id="152d" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh"> PubSub: </strong>我们可以使用PubSub作为消息代理，在管道中的不同服务之间传递数据。对于收集管道，消息从web服务传递到数据流作业。</li><li id="f8ae" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh">云数据流:</strong>数据流作业定义了一组要在数据管道上执行的操作。对于这个管道，作业将执行以下操作:使用来自PubSub的消息，将JSON事件转换为BigQuery记录，并将记录传输到BigQuery。</li><li id="872b" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx jh"> BigQuery: </strong>我们可以使用BigQuery作为托管数据库来存储来自移动应用程序的跟踪事件。</li></ul><p id="be6c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦这些组件建立起来，我们就有了一个收集跟踪事件的管道，可以用来建立机器学习模型。在下面列出的帖子中，我提供了类似管道的代码示例。</p><div class="ip iq gp gr ir ni"><a rel="noopener follow" target="_blank" href="/a-simple-and-scalable-analytics-pipeline-53720b1dbd35"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd jh gy z fp nn fr fs no fu fw jf bi translated">简单且可扩展的分析管道</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">收集关于应用程序使用和用户行为的数据，如玩家在游戏中的进度，对于产品来说是无价的…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">towardsdatascience.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ix ni"/></div></div></a></div><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/2bd0260cc0b5de1b1ce6d10a8e776b33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*YKVy2RpM6E-iAjUgfwYLig.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">模型培训渠道</p></figure><h2 id="15fe" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">模特培训</h2><p id="1e0b" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">有了GCP，我们可以使用Google Colab作为托管笔记本环境，通过scikit-learn等库来训练模型。我们可以使用Python notebook环境来训练和评估不同的预测模型，然后将性能最佳的模型保存到Redis中，供模型应用程序服务使用。如果应用服务不是用Python编写的，那么使用诸如<a class="ae jd" href="https://github.com/onnx/onnx" rel="noopener ugc nofollow" target="_blank"> ONNX </a>这样的可移植模型格式是很有用的。下面的帖子介绍了Google Colab平台。</p><div class="ip iq gp gr ir ni"><a rel="noopener follow" target="_blank" href="/getting-started-with-google-colab-f2fff97f594c"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd jh gy z fp nn fr fs no fu fw jf bi translated">Google Colab入门</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">沮丧和困惑的基本教程</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">towardsdatascience.com</p></div></div><div class="nr l"><div class="ny l nt nu nv nr nw ix ni"/></div></div></a></div><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/5dae32db0f17de2d2ee37e93872e6d1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*xtlrmTq2iIUUXNU81MNliQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">模型服务管道</p></figure><h2 id="549d" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">特征工程和建模服务</h2><p id="d027" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">一旦我们有了一个我们想要服务的训练好的模型，我们将需要构建一个应用程序，该应用程序将基于跟踪事件实时更新每个用户的特征向量，并且还实时服务于模型预测。为了将编码跟踪事件的特征向量存储到用户配置文件中，我们可以使用Redis作为一个低延迟的数据库，在这里我们检索和更新这些值，如下面列出的博客文章中所述。对于模型服务，我们需要构建一个web服务，该服务从Redis获取用户配置文件，应用存储在Redis中的模型，该模型是使用Google Colab训练的，并将模型预测返回给模型应用程序，在模型应用程序中，模型预测可用于个性化应用程序。与跟踪管道类似，通过将这些应用程序容器化，web服务可以托管在托管的Kubernetes上。</p><div class="ip iq gp gr ir ni"><a rel="noopener follow" target="_blank" href="/nosql-for-real-time-feature-engineering-and-ml-models-93d057c0a7b8"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd jh gy z fp nn fr fs no fu fw jf bi translated">实时特征工程和ML模型的NoSQL</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">使用流式数据构建用户配置文件</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">towardsdatascience.com</p></div></div><div class="nr l"><div class="oa l nt nu nv nr nw ix ni"/></div></div></a></div><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/1230e4d477902660212eff1e858c8c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*ebqB8P4q4rL_SvSU5L0MLw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">监控组件</p></figure><h2 id="6f67" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">监视</h2><p id="c853" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">为了监控应用程序，我们可以使用通过Stackdriver提供的GCP中的日志和监控托管服务。我们可以记录来自GKE上托管的服务的事件，以及从数据流作业到堆栈驱动程序日志的事件。我们还可以将这些服务的自定义指标发送到Stackdriver monitoring，在那里可以根据阈值设置警报。通过设置这些数据流，可以设置对管道的监控，其中触发警报并将其转发给Slack、SMS或PagerDuty，并且可以使用Stackdriver查看应用程序日志。下面的帖子中提供了使用Stackdriver进行监控和日志记录的代码示例。</p><div class="ip iq gp gr ir ni"><a rel="noopener follow" target="_blank" href="/devops-for-data-science-with-gcp-3e6b5c3dd4f6"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd jh gy z fp nn fr fs no fu fw jf bi translated">与GCP合作开发数据科学</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">为模型服务部署生产级容器</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">towardsdatascience.com</p></div></div><div class="nr l"><div class="oc l nt nu nv nr nw ix ni"/></div></div></a></div><h2 id="1062" class="mk ml jg bd mm mn mo dn mp mq mr dp ms le mt mu mv li mw mx my lm mz na nb nc bi translated">结论</h2><p id="7b3f" class="pw-post-body-paragraph kv kw jg kx b ky nd kh la lb ne kk ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">使用托管服务可以减少设置和监控基础架构所需的开发运维工作量，从而使数据科学团队能够着手将模型投入生产。虽然支持数据科学团队构建端到端管道可以加快数据产品的开发，但过度依赖托管服务可能会大规模推高成本。在本帖中，我们讨论了一些在GCP可用的托管服务，数据科学家可以利用这些服务来构建实时ML模型。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="3f6f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本·韦伯是Zynga的一名杰出的数据科学家。我们正在<a class="ae jd" href="https://www.zynga.com/job-listing-category/data-analytics-user-research/" rel="noopener ugc nofollow" target="_blank">招聘</a>！</p></div></div>    
</body>
</html>