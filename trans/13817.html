<html>
<head>
<title>Optimize DraftKings NBA Lineups using Data Manipulation Skills</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用数据操作技巧优化选秀王NBA阵容</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/optimize-draftkings-nba-lineups-using-data-manipulation-skills-fdf47b2a27e5?source=collection_archive---------37-----------------------#2020-09-22">https://towardsdatascience.com/optimize-draftkings-nba-lineups-using-data-manipulation-skills-fdf47b2a27e5?source=collection_archive---------37-----------------------#2020-09-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="dbb5" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="5990" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">R中数据操作的实用指南</h2></div><p id="c5aa" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln">免责声明</em> </strong> <em class="ln">本帖唯一目的是展示R中的数据操作技巧；它不应作为任何形式的投资建议或认可。投资伴随着风险！</em></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/bb996f455fa09e30cd01b71baec31b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4k1YMEahAYzVF2q-6ux60g.jpeg"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">迪安·贝内特在<a class="ae me" href="https://unsplash.com/s/photos/nba?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="a2c9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">终于，运动回来了！</p><p id="0920" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> NBA </a>、<a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> NFL </a>、<a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> MLB </a>回来了！</p><p id="781e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">所以像<a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> DraftKings </a>这样的在线博彩网站。一边看着你最喜欢的球员赢得比赛，一边和朋友一起存点钱，这才是正确的做法！</p><p id="7f92" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我的阵容策略是分析玩家最近的表现，挑一个手热的下注。然而，不可能只选择最热门的球员，像勒布朗詹姆斯，安东尼·戴维斯，尼古拉·约基奇等。，谁来工资高。作为一个限制，<a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> DraftKings </a>有5万美元的工资帽。如果你选择了三名顶级球员，而让其他人都坐冷板凳，薪水不低，却没有上场时间，这不会是一个胜利的阵容策略。</p><p id="a86e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了找到手热工资合理的球员，我随手找到了R中的<strong class="kt jd"> <em class="ln"> dplyr </em> </strong>库。在这篇文章中，我们学习了一些数据分析和阵容建设的技巧。</p><blockquote class="mf"><p id="493a" class="mg mh it bd mi mj mk ml mm mn mo lm dk translated">学习编程的推荐方法是通过实践！</p><p id="dead" class="mg mh it bd mi mj mk ml mm mn mo lm dk translated">有趣的编码方式就是从中赚几个钱！</p></blockquote><figure class="mq mr ms mt mu lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi mp"><img src="../Images/412066d98a488c8df7375e059e561554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JxDIBOa2yb-w3DSlnmxPYw.jpeg"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">照片由<a class="ae me" href="https://unsplash.com/@echaparro?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">埃德加·恰帕罗</a>在<a class="ae me" href="https://unsplash.com/s/photos/nba?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="43aa" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们开始吧。我们将在分析9月18日洛杉矶湖人队对丹佛掘金队的比赛中球员的表现后，提出第二场比赛的阵容，并与9月20日的实际表现进行交叉检查。</p><h2 id="62c0" class="mv mw it bd mx my mz dn na nb nc dp nd la ne nf ng le nh ni nj li nk nl nm iz bi translated">数据集</h2><p id="8acc" class="pw-post-body-paragraph kr ks it kt b ku nn kd kw kx no kg kz la np lc ld le nq lg lh li nr lk ll lm im bi translated">有两个数据集:<a class="ae me" href="https://github.com/LeihuaYe/DraftKings_Data_Manipulation" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ln">Basic _ Infor _ Game _ 1</em></strong></a>和<a class="ae me" href="https://github.com/LeihuaYe/DraftKings_Data_Manipulation" rel="noopener ugc nofollow" target="_blank"><strong class="kt jd"><em class="ln">Actual _ point _ Game _ 1</em></strong></a>)。我强烈建议下载这两个数据集，并随着我们的继续复制代码。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="0926" class="mv mw it nt b gy nx ny l nz oa">#1 data preparation </span><span id="117f" class="mv mw it nt b gy ob ny l nz oa"># load the dataset 1<br/>Basic_Infor_Game_1 &lt;- read.csv('Basic_Infor_Game_1.csv')</span><span id="6e4e" class="mv mw it nt b gy ob ny l nz oa"># load the dataset 2<br/>Actual_point_Game_1 &lt;- read.csv('Actual_point_Game_1.csv')</span><span id="5d5b" class="mv mw it nt b gy ob ny l nz oa"># merge the two datasets according to players' names<br/>game_one_9.18 &lt;- merge(Basic_Infor_Game_1,Actual_point_Game_1,by.x= 'Name', by.y ="Player")</span><span id="9200" class="mv mw it nt b gy ob ny l nz oa">head(game_one_9.18)</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi oc"><img src="../Images/6ce1c75a96e4b16113817c89f294be1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F1eBcGay1fUXjf-YQegxyw.png"/></div></div></figure><p id="e546" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">注意事项</strong></p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="7e34" class="mv mw it nt b gy nx ny l nz oa">Name: players’ names </span><span id="a213" class="mv mw it nt b gy ob ny l nz oa">Position: what position they play</span><span id="ae60" class="mv mw it nt b gy ob ny l nz oa">Salary: the salary assigned to the player</span><span id="2261" class="mv mw it nt b gy ob ny l nz oa">APPG: average points per game </span><span id="b5aa" class="mv mw it nt b gy ob ny l nz oa">Drafted_perc: the percentage of users drafted this player</span><span id="d5b9" class="mv mw it nt b gy ob ny l nz oa">Actual: the actual points scored for Game 1</span></pre><p id="ad3b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">正如你在上面看到的，有太多我们不需要的还原剂变量。首先，我们只能选择关键变量。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="0a80" class="mv mw it nt b gy nx ny l nz oa">#2 load the library: dplyr<br/>library(dplyr)</span><span id="eb6d" class="mv mw it nt b gy ob ny l nz oa">merged_9.18 %&gt;% <br/>  select(Name, APPG, Actual)</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi od"><img src="../Images/666672bea1d9f8568131de2217c8e96d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4nFb6Bf8Ik-qk7jqczDTQ.png"/></div></div></figure><p id="3094" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">好多了，干净多了！</p><p id="f565" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">球员越优秀，薪水越高，得分也越高。问题是如何对照他们的工资来评估他们的表现？换句话说，顶级球员提供的积分工资值和替补球员一样吗？</p><p id="3331" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了回答这些问题，我们创建一个名为<strong class="kt jd"><em class="ln">Actual _ predicted _ ratio</em></strong>的新变量，通过实际得分(<strong class="kt jd"><em class="ln"/></strong>实际得分)和预测得分(<strong class="kt jd"><em class="ln"/></strong>)的平均值之间的除法来计算。这个比率是一个很好的指标，表明球员的表现或与平均表现的偏差。</p><p id="c7de" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">以降序方式重新排列结果，仅显示前10个案例。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="f072" class="mv mw it nt b gy nx ny l nz oa">merged_9.18 %&gt;% <br/>  select(Name, APPG, Actual) %&gt;% <br/>  mutate(actual_predicted_ratio = Actual/APPG) %&gt;%<br/>  arrange(desc(actual_predicted_ratio)) %&gt;% <br/>  head(10)</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi oe"><img src="../Images/6a9a0e049614561d7b8f777323417efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6mB_K01xV25JVnbj5_Fsyg.png"/></div></div></figure><p id="995a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最后一列<strong class="kt jd"> <em class="ln">实际_预测_比率</em> </strong>，按降序排列。在上面，迈克尔·波特是得分率最高的球员，为1.808456，这意味着MP的得分几乎是他场均得分的1.8倍。</p><p id="0762" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">太棒了。</p><p id="e3b0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">肯塔维奥斯·卡德维尔·波普和拉简·朗多分别位居第二和第三。</p><p id="f95f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然而，这不是超级有用的，因为<a class="ae me" href="https://www.draftkings.com/r/bull_ye" rel="noopener ugc nofollow" target="_blank"> DraftKings </a>只允许6个玩家玩他们的showtime游戏。如果我们根据实际预测的比例来选择前6名球员，我们将无法选择像安东尼·戴维斯和詹姆斯这样的球员。</p><p id="69fc" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们根据分数对玩家进行排名，选出第一场比赛的前10名。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="fefd" class="mv mw it nt b gy nx ny l nz oa">## Top 10 players who scored the most<br/>top_10_scored_players &lt;- game_one_9.18 %&gt;% <br/>  select(Name,Salary, APPG, Actual) %&gt;% <br/>  arrange(desc(Actual)) %&gt;% <br/>  head(10)<br/>top_10_scored_players</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi of"><img src="../Images/32cd63e262076b506d0c7dcb904ad972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYWupDWfB9ulj9I1DN0Hfw.png"/></div></div></figure><p id="b80b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">安东尼·戴维斯和勒布朗詹姆斯高居榜首！</p><p id="38f1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">同样的，我也在想谁是选秀最多的球员。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="9de5" class="mv mw it nt b gy nx ny l nz oa">## Top 10 most drafted players<br/>game_one_9.18 %&gt;% <br/>  select(Name,Salary, APPG, Drafted_perc) %&gt;% <br/>  arrange(desc(Drafted_perc)) %&gt;% <br/>  head(10)</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi of"><img src="../Images/1f916c896874d6abc3b0f23ff1aec808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4WwqDGQCy2NdbJs__f_PhQ.png"/></div></div></figure><p id="215f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">雄心勃勃的球员薪水更高，这限制了我们阵容中顶级球员的数量。所以，我们可以使用<strong class="kt jd"> <em class="ln">过滤器</em> </strong>选择各个薪资区间的球员。</p><p id="bb63" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我把顶级玩家定义为那些薪水在8000美元或以上，但仍超出预期的人。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="6d58" class="mv mw it nt b gy nx ny l nz oa">## Top players with high salary cap (&gt;=8k) and still beat expectation </span><span id="20e0" class="mv mw it nt b gy ob ny l nz oa">game_one_9.18 %&gt;% <br/>  select(Name,Salary, APPG, Actual, Drafted_perc) %&gt;% <br/>  mutate(actual_predicted_ratio = Actual/APPG) %&gt;% <br/>  filter(actual_predicted_ratio&gt;=1 &amp; Salary&gt;=8000) %&gt;% <br/>  arrange(desc(actual_predicted_ratio))</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi of"><img src="../Images/6273fa4b1b6e630bfceebe7b6b8944d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cCAW0FuMpY2q0fdvByp1rg.png"/></div></div></figure><p id="ae52" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">只有迈克尔波特和安东尼·戴维斯在第一场比赛中有这样的表现。特别是，戴维斯有10800美元的高薪，仍然能够以超过平均得分1.1倍的成绩超出预期。这显示了他的出色表现，使他成为一个明确的选择。</p><p id="5a9f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">尽管波特有显著的优异表现，但他在最后一节用大量的垃圾时间得到了他的大部分得分。数据告诉你，如果比赛很紧张，他可能是一个可疑的选择。</p><p id="7d68" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对于我们的价值型打法，让我们看看$3，000到$8，000范围内的玩家。</p><pre class="lp lq lr ls gt ns nt nu nv aw nw bi"><span id="c895" class="mv mw it nt b gy nx ny l nz oa">## Good value players (3k-8k) and still beat expectation</span><span id="4822" class="mv mw it nt b gy ob ny l nz oa">game_one_9.18 %&gt;% <br/>  select(Name,Salary, APPG, Actual, Drafted_perc) %&gt;% <br/>  mutate(actual_predicted_ratio = Actual/APPG) %&gt;%# new variable: actual_predicted_ratio<br/>  filter(actual_predicted_ratio&gt;=1 &amp; Salary&gt;=3000 &amp; Salary&lt;8000) %&gt;% <br/>  arrange(desc(actual_predicted_ratio))</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi og"><img src="../Images/7baea230a61dbc37383b28fe6a07f1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DnJwNEQSWFeiE_GFqcVc-w.png"/></div></div></figure><p id="1258" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这五名球员有很好的价值，我们可能会考虑在第二场比赛中再次选中他们。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h2 id="ca5c" class="mv mw it bd mx my mz dn na nb nc dp nd la ne nf ng le nh ni nj li nk nl nm iz bi translated">阵容建设</h2><p id="a5ed" class="pw-post-body-paragraph kr ks it kt b ku nn kd kw kx no kg kz la np lc ld le nq lg lh li nr lk ll lm im bi translated">核心球员:安东尼·戴维斯→勒布朗詹姆斯→尼古拉·约基奇→贾马尔·穆雷</p><p id="1177" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">价值球员:肯塔维奥斯·卡德维尔·波普→拉简·朗多→丹尼·格伦→德怀特-霍华德→阿莱克斯-卡鲁索</p><p id="d9db" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我会包括两个核心球员(戴维斯是我的最爱)和两个或三个价值球员，最后一个位置来自其他廉价球员。</p><p id="e8b3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">NBA季后赛竞争激烈，球员往往会在一场比赛和另一场比赛之间波动。不确定是不可避免的。我的应对策略是通过混合和匹配核心与价值参与者来整合不确定性和风险。</p><p id="c3cc" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">事实证明，这些玩家在第二场比赛中获胜。</p><p id="f4b7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">(我保证在写这篇文章的时候，我没有挑选任何提到他们在第二场比赛中表现的球员)。</p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><p id="33ef" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> <em class="ln">免责声明</em> </strong> <em class="ln">本帖唯一目的是展示R中的数据操作技巧；它不应作为任何形式的投资建议或认可。投资伴随着风险！</em></p></div><div class="ab cl oh oi hx oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="im in io ip iq"><h1 id="cef9" class="oo mw it bd mx op oq or na os ot ou nd ki ov kj ng kl ow km nj ko ox kp nm oy bi translated">喜欢读这本书吗？</h1><blockquote class="oz pa pb"><p id="99b8" class="kr ks ln kt b ku kv kd kw kx ky kg kz pc lb lc ld pd lf lg lh pe lj lk ll lm im bi translated">请在<a class="ae me" href="https://www.linkedin.com/in/leihuaye/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae me" href="https://www.youtube.com/channel/UCBBu2nqs6iZPyNSgMjXUGPg" rel="noopener ugc nofollow" target="_blank"> Youtube </a>上找到我。</p><p id="83cd" class="kr ks ln kt b ku kv kd kw kx ky kg kz pc lb lc ld pd lf lg lh pe lj lk ll lm im bi translated">还有，看看我其他关于人工智能和机器学习的帖子。</p></blockquote></div></div>    
</body>
</html>