<html>
<head>
<title>Interactive COVID-19 report with RMarkdown, Plotly, Leaflet and Shiny</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交互式新冠肺炎报告，包含RMarkdown、Plotly、传单和Shiny</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-covid19-report-with-rmarkdown-plotly-leaflet-and-shiny-c6a716af7d9b?source=collection_archive---------20-----------------------#2020-11-07">https://towardsdatascience.com/interactive-covid19-report-with-rmarkdown-plotly-leaflet-and-shiny-c6a716af7d9b?source=collection_archive---------20-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1560" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何制作适用于新冠肺炎及其他地区的交互式报告！</h2></div><p id="3ad9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">本帖是</em> <strong class="kh ir"> <em class="lb">第三部分</em> </strong> <em class="lb">一系列</em> <strong class="kh ir"> <em class="lb">第四部分</em> </strong> <em class="lb">。请参考</em> <a class="ae lc" rel="noopener" target="_blank" href="/create-an-interactive-covid-19-report-using-r-host-it-for-free-and-automate-its-update-41a5bdd46e9d"> <strong class="kh ir"> <em class="lb">第1部分</em> </strong> </a> <em class="lb">了解系列概述，</em> <a class="ae lc" href="https://rpubs.com/lucha6/covid-cleaning-owid-data" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="lb">第2部分</em> </strong> </a> <em class="lb">了解数据源和次要数据清理，</em> <strong class="kh ir"> <em class="lb">第3部分</em> </strong> <em class="lb">了解可视化的创建、报告的构建以及将文档部署到ShinyApps.io和</em><em class="lb"/> <a class="ae lc" href="https://github.com/lc5415/COVID19" rel="noopener ugc nofollow" target="_blank">【项目回购】</a></p><p id="bec8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该系列的每篇文章都是独立的，也就是说你不需要阅读整个系列来充分利用它。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/f57244fd477be16e807761a5b147b1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4tW_-49XIPeo21VuqEGkuA.png"/></div></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="b3b2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">目录</h1><p id="974b" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated"><a class="ae lc" href="#40b8" rel="noopener ugc nofollow">目标</a> <br/> ∘ <a class="ae lc" href="#b27b" rel="noopener ugc nofollow">要求</a> <br/> <a class="ae lc" href="#2ed4" rel="noopener ugc nofollow">数据输入</a> <br/> <a class="ae lc" href="#ebaa" rel="noopener ugc nofollow">地块</a> <br/> ∘ <a class="ae lc" href="#3a35" rel="noopener ugc nofollow">树状图</a> <br/> ∘ <a class="ae lc" href="#d6a4" rel="noopener ugc nofollow">折线图</a> <br/> ∘ <a class="ae lc" href="#024b" rel="noopener ugc nofollow">地图图</a> <br/> ∘ <a class="ae lc" href="#2e61" rel="noopener ugc nofollow">够了！</a> <br/> <a class="ae lc" href="#d647" rel="noopener ugc nofollow">制作闪亮的报告</a> <br/> ∘ <a class="ae lc" href="#0748" rel="noopener ugc nofollow">撰写报告</a> <br/> ∘ <a class="ae lc" href="#02e7" rel="noopener ugc nofollow">上传你的文档到云端</a> <br/> ∘ <a class="ae lc" href="#ae3b" rel="noopener ugc nofollow">发布你的app </a> <br/> <a class="ae lc" href="#df79" rel="noopener ugc nofollow">结论</a></p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="40b8" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">目标</h1><p id="b384" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">在本教程中，我们将学习如何制作7种图表来说明COVID19在各国的进展。然后，我们会将这些整合到一个RMarkdown文档中，并免费发布一个交互式副本！—使用RStudio场所。</p><h2 id="b27b" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">要求</h2><p id="92cc" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">使用<code class="fe nf ng nh ni b">R</code>、<code class="fe nf ng nh ni b">dplyr</code>和<code class="fe nf ng nh ni b">ggplot</code>的经验是有用的，但不是必需的。在我所有的写作/编码过程中，我试图让脚本尽可能的易读。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="2ed4" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">数据输入</h1><p id="9610" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">首先，今天我们将使用两个数据集:</p><ul class=""><li id="737c" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated"><strong class="kh ir">每日</strong>按国家统计的确诊COVID病例和COVID死亡人数(从现在开始我们称之为COVID事件)。要了解这个数据集的样子，请查找下面的截断表:</li></ul><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">10月25日欧洲COVID19事件每日统计</p></figure><ul class=""><li id="f6f9" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated"><strong class="kh ir">累计</strong>按国家统计的确诊COVID病例和COVID死亡数。再次找到下表的删节版本:</li></ul><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">截至10月25日，欧洲COVID19事件的累计计数</p></figure><p id="8669" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lb">注:</em> </strong> <em class="lb">以上表格出于可视化目的被截断，实际表格包含从2019年12月31日起以及全球大多数国家/地区的数据。</em></p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="ebaa" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">情节</h1><p id="576f" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我将带您浏览我们将要制作的7张图表。每个地块的过程都是一样的:</p><ol class=""><li id="a171" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la ny np nq nr bi translated">检查绘图功能的输入格式</li><li id="3ee6" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la ny np nq nr bi translated">操作输入数据以获得正确的格式</li><li id="6755" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la ny np nq nr bi translated">设计情节</li></ol><p id="4954" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不同地块之间的数据可能会有一些重叠，但这没关系。我在这里的目的是展示每个情节是如何独立完成的。</p><h2 id="3a35" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">树形图</h2><p id="3cc8" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">树形图非常适合表示层次结构和“父”中每个“子”元素的大小。在这里，我们按国家绘制COVID事件，这些事件可以进一步按洲分组，而洲又可以按世界的一部分分组。下面我们来看看如何用Plotly做出下面的剧情。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="oe nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">10月30日COVID死亡的树形图示例</p></figure><p id="5264" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的树形图中，每个方框的大小将与每个国家最近日期的事件数量成比例，因此我们将使用<strong class="kh ir">累积</strong>表。</p><p id="b606" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在仔细阅读了<a class="ae lc" href="https://plotly.com/r/treemaps/" rel="noopener ugc nofollow" target="_blank"> Plotly R Treemap文档</a>之后，两件事情变得很清楚。首先，我们需要树形图中的所有元素(国家、大洲、世界)都有相应的值，目前我们只有国家级的汇总数据，我们需要汇总每个大洲的数据，并在全球范围内进行汇总。其次，我们需要一个<em class="lb">新列</em>来指示每个元素的父元素:<em class="lb">例如，西班牙、欧洲；对欧洲，对世界，对世界，什么都不是。另外，我们将把每个元素称为<em class="lb">标签</em>，因为国家、大陆和“世界”都需要在同一列中。</em></p><p id="7fb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是注释脚本，用于将数据转换为正确的规格:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="abd3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了正确格式的数据，绘制图表就非常容易了:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="12fe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nf ng nh ni b">hoverinfo</code>参数负责当鼠标悬停在任何特定元素上时显示的数据。这里的规范是说:</p><ul class=""><li id="5aec" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated"><code class="fe nf ng nh ni b">value</code>显示特定元素的值(即死亡人数/病例数)。</li><li id="ad62" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated"><code class="fe nf ng nh ni b">percent parent</code>:显示当前子值占父值的百分比(如西班牙死亡人数/欧洲死亡人数)。</li><li id="a253" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated"><code class="fe nf ng nh ni b">percent root</code>:显示当前子值占根值的百分比(如西班牙死亡人数/世界死亡人数)。</li></ul><p id="93d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在<a class="ae lc" href="https://plotly.com/r/reference/#treemap-hoverinfo" rel="noopener ugc nofollow" target="_blank">文档部分</a>阅读更多关于悬停选项的信息。</p><p id="6e49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们希望实际上将这些图存储为RDS对象，以便在我们闪亮的应用程序加载时加载它们，而不是在运行时计算它们。为此，我们使用以下代码:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2095" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lb">注意:</em> </strong> <em class="lb"> </em>你可能会发现简单地保存<code class="fe nf ng nh ni b">plot_ly(...)</code>函数的输出就成功了。当我第一次开始做这个项目时，我发现它不起作用。对我来说，使用<code class="fe nf ng nh ni b">plotly_build()</code>功能修复它。</p><h2 id="d6a4" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">折线图</h2><p id="3daa" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">在这里，我们将制作经典的线形图，描述一段时间内各个国家或大洲的事件数量。在这种情况下，我们不会直接制作<code class="fe nf ng nh ni b">plotly</code>图。相反，我们将使用<code class="fe nf ng nh ni b">ggplot2</code>和<code class="fe nf ng nh ni b">ggplotly</code>函数来将它们转换成交互式图形。我们将制作如下图:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="oe nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">是的，这很荒谬，<strong class="ak">截至2020年11月，大洋洲大约有3万例确诊病例</strong></p></figure><p id="e0ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，让我们用<strong class="kh ir">累积</strong>表制作我们的<code class="fe nf ng nh ni b">ggplot</code>:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="6369" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不熟悉<code class="fe nf ng nh ni b">ggplot2</code>，一个情节的所有这些台词可能看起来很多。虽然看起来是这样，但我相信这有助于构建情节，并使代码可读性更高。<em class="lb">此外，</em><code class="fe nf ng nh ni b">group</code>美学(在<code class="fe nf ng nh ni b">aes()</code>功能内)在初学者<code class="fe nf ng nh ni b">ggplot</code>教程中不常介绍。在我们的特殊情况下，这是非常重要的。<em class="lb">如果我们不指定它，</em> <code class="fe nf ng nh ni b">ggplot</code> <em class="lb">会认为我们线状图的分组变量是</em> <code class="fe nf ng nh ni b"><em class="lb">continent</em></code> <em class="lb">，会做出一个非常混乱的图</em>，比较见下图:</p><div class="le lf lg lh gt ab cb"><figure class="of li og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/14c64cd9ecd9b5451854507eb34ab8ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*N9Sucq67eMjz2V9JJD2bFA.png"/></div></figure><figure class="of li og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/2418ed05f64bec67c3c239fcb4213e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*TlHwYLinDkbmlCu2coLE1A.png"/></div><p class="nu nv gj gh gi nw nx bd b be z dk ol di om on translated"><strong class="bd oo">左:</strong>使用群组美学修正剧情<strong class="bd oo">。<strong class="bd oo">右:</strong>绘图不正确，<strong class="bd oo">未使用</strong> <strong class="bd oo">分组</strong>，<strong class="bd oo"> </strong> ggplot2认为分组变量是洲</strong></p></figure></div><p id="847a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，现在我们已经做好了<code class="fe nf ng nh ni b">ggplot</code>，我们可以用<code class="fe nf ng nh ni b">ggplotly()</code>把它变成一行<code class="fe nf ng nh ni b">plotly</code>图。此外，假设我们已经将<code class="fe nf ng nh ni b">ggplot</code>存储为变量，我们可以进一步修改它，例如以log10标度显示y轴。最后，我们将通过<code class="fe nf ng nh ni b">plotly_build()</code>函数传递新的情节，以便能够存储它。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="c003" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我从这个项目的<a class="ae lc" href="https://github.com/lc5415/COVID19" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中可以看到的<strong class="kh ir">累积</strong>数据集制作了另外6个线图(包括按洲划分的事件曲线，有和没有log10标度)。所有这些图的代码遵循相同的结构。</p><p id="3f28" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再次遵循相同的原则和几乎相同的代码，我从<strong class="kh ir">每日</strong>数据集中制作了另外6幅图，如下图所示。仓库中也有相关的代码。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="oe nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">看到这里，我们可以清楚地看到为什么新闻媒体使用均线！此外，欧洲表现糟糕。</p></figure><h2 id="024b" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">地图图表</h2><p id="76b1" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">信不信由你，我不会在这里使用<code class="fe nf ng nh ni b">plotly</code>地图功能。我以前用它们创建过地图，但是我不推荐使用它们。我偶然发现了几个bug(<a class="ae lc" href="https://community.plotly.com/t/animated-map-not-showing-countries-with-na-values/42965" rel="noopener ugc nofollow" target="_blank">【1】</a><a class="ae lc" href="https://community.plotly.com/t/slider-and-play-pause-buttons/7288" rel="noopener ugc nofollow" target="_blank">【2】</a>)而<a class="ae lc" href="https://community.plotly.com/" rel="noopener ugc nofollow" target="_blank"> plotly社区</a>一直很没反应。因此这里我们将使用<a class="ae lc" href="https://leafletjs.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">传单</strong> </a>。与Plotly不同，fleet只关注地图，因此他们是制作地图的更好的工具。</p><p id="32b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由RStudio团队自己构建的<a class="ae lc" href="https://rstudio.github.io/leaflet/" rel="noopener ugc nofollow" target="_blank"> R传单包</a>有R的感觉，更特别的是有<code class="fe nf ng nh ni b">dplyr</code>和<code class="fe nf ng nh ni b">ggplot</code>的感觉，地图可以通过图层构建。让我们跳到代码。我将介绍如何制作一个简单的静态地图。制作一个有时间表的要复杂得多，因此我将在以后的独立文章中专门讨论这个问题。</p><p id="74f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要一个带有国家边界的GeoJSON文件。GeoJSON文件是一种用于存储地理边界的标准(尽管还有更多，如shapefiles)。我从<a class="ae lc" href="https://datahub.io/core/geo-countries#data" rel="noopener ugc nofollow" target="_blank"> datahub.io </a>下载了国家GeoJSON文件。幸运的是，现在国家的边界没有太大的变化，因此我们只需要下载并处理这个文件一次。对于我们的使用来说，这是一个相当大的文件(23MB)，因此我们将使用一个小技巧来减小它的大小。这将大大改善我们闪亮文档的加载时间(我们很聪明，我们提前考虑)。由于边界中的所有细节(例如海岸线的分辨率)，文件的大小非常大。我们可以使用<code class="fe nf ng nh ni b"><a class="ae lc" href="https://cran.r-project.org/web/packages/rmapshaper/vignettes/rmapshaper.html" rel="noopener ugc nofollow" target="_blank">rmapshaper</a></code> <a class="ae lc" href="https://cran.r-project.org/web/packages/rmapshaper/vignettes/rmapshaper.html" rel="noopener ugc nofollow" target="_blank">包</a>和更广泛的<code class="fe nf ng nh ni b">mapshaper</code>工具来使我们的地图更粗糙，文件更小。下面的<em class="lb"/>是在r内部完成所有这些工作的脚本。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="15de" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nf ng nh ni b">world_geojson</code>对象包含两个感兴趣的主要元素:<em class="lb">数据</em>和<em class="lb">多边形</em>。在这个阶段，<em class="lb">数据</em>元素只包含两列，ISO代码和相应的地区名称。polygons元素包含为每个区域绘制多边形所需的信息。我们将首先合并<em class="lb">数据</em>元素和累积数据集。接下来，我们将手动移除累积数据集中没有可用数据的多边形。这最后一步是必要的，因为数据和多边形是通过位置而不是某种标识符匹配的，如果我们不执行这最后一步，美国将出现在欧洲，法国将出现在非洲或亚洲，等等。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">将地理文件与普通数据框合并</p></figure><p id="71a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">注意:</em>我们只绘制了每个地区的最新可用数据(第6-9行)</p><p id="668b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们要做的就是使用<code class="fe nf ng nh ni b">leaflet</code>绘图。正如我之前所说，R中的传单支持分层构建，使用<code class="fe nf ng nh ni b">magrittr</code>管道操作符(<code class="fe nf ng nh ni b">%&gt;%</code>)。首先，我们要定义一个合适的调色板，我选择了<strong class="kh ir">蓝色</strong>，它用白色代表低值，随着值的增加使用越来越浓的蓝色。然后，我们将使用<code class="fe nf ng nh ni b">leaflet()</code>初始化主地图，就像我们经常使用<code class="fe nf ng nh ni b">ggplot()</code>一样，并添加<em class="lb">图块</em>，这是地图格式的传单行话(海洋和陆地的颜色……—在本演示中探索不同的图块<a class="ae lc" href="http://leaflet-extras.github.io/leaflet-providers/preview/" rel="noopener ugc nofollow" target="_blank"/>)。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">初始化传单地图并绘制图块</p></figure><p id="9472" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们终于要看看地图上方的数据了。我们将添加多边形，并根据截至10月底每个国家的病例数按比例给它们上色。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">向传单地图添加多边形</p></figure><p id="564f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我已经按照它们的对数10的情况按比例给这些区域着色，否则，差异是如此之大，以至于色标是没有用的。我们还使用了<code class="fe nf ng nh ni b"><a class="ae lc" href="https://github.com/wkostelecki/ezplot" rel="noopener ugc nofollow" target="_blank">ezplot</a></code> <a class="ae lc" href="https://github.com/wkostelecki/ezplot" rel="noopener ugc nofollow" target="_blank">包</a>中的<code class="fe nf ng nh ni b">ez_labels()</code>函数，该函数将大数转换成可读格式(例如86453625到86.4M)。</p><p id="7da8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们将在地图上添加一个图例并保存文件，以便以后加载。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">添加图例并将地图另存为HTML微件</p></figure><p id="7a31" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这之后，我们的地图看起来如下。它也是交互式的，你可以通过悬停在地图上获得更多的细节(虽然这在Medium中不起作用，但当我们在Shiny服务器上发布文档时它会起作用)。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi op"><img src="../Images/91bf25084a9cdfcca47041bd1b4ea5f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpL_Q5Dp90UYdNwmjimmug.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">传单地图</p></figure><h2 id="2e61" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">够了阴谋！</h2><p id="83aa" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">绘图是伟大的，但也是无止境的，而且非常依赖于上下文。上面我已经展示了如何绘制常见和不常见的图来说明COVID事件随时间的变化，但是您可以想象出更多的方法来做到这一点！</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="d647" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">做一份精彩的报告</h1><p id="05b2" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">RMarkdown文档(<code class="fe nf ng nh ni b">.Rmd</code>)是超级通用的文件，允许你在一个地方编写直观的Markdown文本和可执行的R代码块。它们类似于Jupyter笔记本，但存储为纯文本文档，而不是JSON语法。RMarkdown文档支持一系列输出格式，包括PDF、HTML、Word和beamer幻灯片。它们还支持Latex和HTML，后者由文档编译器<a class="ae lc" href="https://pandoc.org/" rel="noopener ugc nofollow" target="_blank"> pandoc </a>提供支持。所有RMarkdown文档都以这样的标题开始:</p><pre class="le lf lg lh gt oq ni or os aw ot bi"><span id="f41d" class="mt lx iq ni b gy ou ov l ow ox">---<br/>title: "Title of my document"<br/>author: "&lt;Name-of-Author"<br/>date: "&lt;Today's date&gt;"<br/>output: html_document<br/>---</span></pre><p id="3db0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您使用RStudio，您可以通过<strong class="kh ir">文件&gt;新建文件&gt; RMarkdown… </strong>创建RMarkdown模板</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi oy"><img src="../Images/4f157b41974f070b653b7f61273c1c5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FR7Wd_T6VUDiRiS1h3Siyw.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">RStudio中的默认RMarkdown模板</p></figure><p id="beb5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以通过点击<strong class="kh ir">编织</strong>选项来可视化呈现的文档，此外，您还可以为单个<code class="fe nf ng nh ni b">.Rmd</code>文档设置多种输出格式(如<code class="fe nf ng nh ni b">html_document</code>、<code class="fe nf ng nh ni b">pdf_document</code>、<code class="fe nf ng nh ni b"> word_document</code>)。我喜欢的输出格式是<code class="fe nf ng nh ni b">html_document</code>，它允许与Plotly和传单对象以及可搜索的表格进行交互。HTML不支持的一点是实际的用户界面，用户在前端修改一些东西，这会触发后端的变化，并导致前端的更新。</p><p id="b53c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在现代网络中，JavaScript支持这一点，但是作为一名R程序员，你可能不想或者没有时间去学习它，这就是为什么<strong class="kh ir">我们要使用Shiny！</strong>这篇文章不是初学Shiny的教程，但希望它能激励你认真学习Shiny。你可以在RStudio的网站找到<a class="ae lc" href="https://shiny.rstudio.com/tutorial/" rel="noopener ugc nofollow" target="_blank">初学者资料。</a></p><p id="306f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Shiny结合RMarkdown的神奇之处在于，您只需将这一行添加到RMarkdown标题中，您的文档就会像一个闪亮的UI一样工作:</p><pre class="le lf lg lh gt oq ni or os aw ot bi"><span id="4ce2" class="mt lx iq ni b gy ou ov l ow ox">runtime: shiny</span></pre><p id="69aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">就是这样！现在让我们写我们的文档。</strong></p><h2 id="0748" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">写报告</h2><p id="3f00" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我们将首先加载我们以前制作的所有情节，然后设计非常基本的用户界面。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="4319" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">既然我们已经加载了绘图，我们只需要设计闪亮的UI，它由输入元素和对输入变化做出反应的呈现函数组成。</p><p id="beb1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入块看起来像这样:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">闪亮输入功能示例</p></figure><p id="6a8f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是输入ID，<strong class="kh ir"> Shiny </strong>将用它来引用这个输入处理程序。接下来是这个输入句柄的标签(<code class="fe nf ng nh ni b">label</code>)，它将出现在文档中句柄的正上方，然后是可能的选择(<code class="fe nf ng nh ni b">choices</code>)，最后是默认选择(<code class="fe nf ng nh ni b">selected</code>)。还有其他输入处理功能，如:<code class="fe nf ng nh ni b">fileInput()</code>、<code class="fe nf ng nh ni b">dateInput()</code>、<code class="fe nf ng nh ni b">sliderInput()</code>、<code class="fe nf ng nh ni b">checkboxInput()</code>等。</p><p id="6848" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们准备好了输入处理函数，我们只需要一个处理输入的<code class="fe nf ng nh ni b">render*()</code>函数，比如<code class="fe nf ng nh ni b">renderPlotly()</code>、<code class="fe nf ng nh ni b">renderImage()</code>、<code class="fe nf ng nh ni b">renderText()</code>或者其他。如下图所示，布局和逻辑非常简单直观:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">Shiny中的渲染函数示例</p></figure><p id="f1a8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我可以就此打住，但我将给出最后一个例子来说明如何用几行代码轻松处理更复杂的逻辑。如果您不感兴趣，请跳到<em class="lb">最后一节，我们将把闪亮的文档部署到云中。</em></p><p id="c80f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们之前制作的线图为构建更复杂的逻辑提供了一个很好的例子。我们可以处理图的模式(每日/累积)，另一个用于地理(国家/大陆)，另一个用于事件类型(死亡/病例)，最后一个用于在选择大陆地理时启用log10比例:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">处理多种情况的逻辑稍微复杂一些</p></figure><p id="f3f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我们将利用我们的图形名称是标准化的这一事实，使逻辑更加简洁(见下文)。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">表格显示了我们的线图名称是如何标准化的</p></figure><p id="85ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据输入，我们将使用<code class="fe nf ng nh ni b">ifelse()</code>函数构建一个对应于其中一个图名的字符串。地理位置选择的逻辑更加特殊，因为如果选择了<strong class="kh ir">“大陆”</strong>，我们将创建一个复选框来启用log10比例。为了做到这一点，我们使用了所谓的<em class="lb">条件面板</em>，如下一个代码块中所示，此外，我们将把所有的输入处理程序包装在一个<code class="fe nf ng nh ni b">inputPanel()</code>中，这将使它们看起来非常整洁:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">只有在选择了洲视图的情况下，才会显示条件面板</p></figure><p id="65e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这产生了如下所示整齐的面板:</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi oz"><img src="../Images/2b0f0b4af6930c8e812440e65b05b92c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0fvrWC-bexvCa14L-wi-w.png"/></div></div></figure><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi oz"><img src="../Images/c0e9743232f9cf5a757147044704aca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z8mO1i4ceMmaiIckzLDySg.png"/></div></div><p class="nu nv gj gh gi nw nx bd b be z dk translated">请注意，log10比例复选框仅在地理位置设置为“大陆”时才可用</p></figure><p id="21aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是根据用户选择的输入获取正确图形的逻辑:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="1090" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我再次邀请您访问云中的<a class="ae lc" href="https://lucha6.shinyapps.io/covideda/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> live文档</strong>，因为这将是了解UI体验的最佳方式。你也可以在GitHub </a>中找到<a class="ae lc" href="https://github.com/lc5415/COVID19/blob/master/COVIDEDA.Rmd" rel="noopener ugc nofollow" target="_blank"/><code class="fe nf ng nh ni b"><a class="ae lc" href="https://github.com/lc5415/COVID19/blob/master/COVIDEDA.Rmd" rel="noopener ugc nofollow" target="_blank">.Rmd</a></code><a class="ae lc" href="https://github.com/lc5415/COVID19/blob/master/COVIDEDA.Rmd" rel="noopener ugc nofollow" target="_blank">文档的源代码。</a></p><h2 id="02e7" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated"><strong class="ak">将您的文档上传到云端</strong></h2><p id="1e5b" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated"><strong class="kh ir">设置shinyapps.io账户</strong></p><p id="a22c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您已经做到了这一步，我希望您已经从这篇文章中获得了一些有用的知识。剩下要做的就是将我们的文档上传到RStudio服务器。如果是第一次这样做，您需要先<a class="ae lc" href="https://www.shinyapps.io/admin/#/signup" rel="noopener ugc nofollow" target="_blank">创建一个帐户</a>。</p><p id="e0df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置完成后，您需要将闪亮的证书添加到RStudio或R会话中。您可以通过RStudio或终端来完成此操作:</p><p id="0397" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">通过RStudio连接到Shiny</strong></p><ul class=""><li id="0598" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated">打开顶部边栏上的RStudio &gt;偏好设置。</li><li id="9ed7" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated">转到<strong class="kh ir">发布</strong>，面板应该如下图所示</li></ul><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi pa"><img src="../Images/f09e260290fd55e88f1ab37fbf60110f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tYHzbw9k6BNnD-BA9YdGOA.png"/></div></div></figure><ul class=""><li id="ce0b" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated">然后点击<strong class="kh ir">连接… </strong>并点击<strong class="kh ir"> ShinyApps.io </strong>。RStudio将从那里指导您。您基本上需要从您的帐户中检索一个令牌，并将其粘贴到RStudio中。</li></ul><p id="3bb6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">通过端子</strong>连接到闪亮</p><ul class=""><li id="4802" class="nj nk iq kh b ki kj kl km ko nl ks nm kw nn la no np nq nr bi translated">登录shinyapps.io</li><li id="ff88" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated">点击工具条上的<strong class="kh ir">账户&gt;代币</strong></li><li id="bf43" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated">点击<strong class="kh ir">+添加令牌</strong>，然后<strong class="kh ir">显示</strong></li><li id="0e11" class="nj nk iq kh b ki nz kl oa ko ob ks oc kw od la no np nq nr bi translated">最后，复制shinyapps.io页面显示的代码块，看起来应该是这样的:</li></ul><pre class="le lf lg lh gt oq ni or os aw ot bi"><span id="a78c" class="mt lx iq ni b gy ou ov l ow ox">rsconnect::setAccountInfo(name=&lt;user-name&gt;,<br/>			  token=&lt;token&gt;,<br/>			  secret=&lt;SECRET&gt;)</span></pre><h2 id="ae3b" class="mt lx iq bd ly mu mv dn mc mw mx dp mg ko my mz mi ks na nb mk kw nc nd mm ne bi translated">发布您的应用</h2><p id="5bc9" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated"><strong class="kh ir">来自RStudio </strong></p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi pb"><img src="../Images/1a4dc983f9aa34d2e05c611ed52b84ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8lpHknyLmTKCx29gpTfLw.png"/></div></div></figure><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi pc"><img src="../Images/a838fc318de3f4fcbfa8d37db22f367c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeyO5mho345liTLxc-YtVg.png"/></div></div></figure><p id="a91a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1 —单击蓝色的发布按钮，如图所示。</p><p id="9cd2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像这样的一个窗口应该会打开，你可以给你的ShinyApp取任何你想要的名字，这里是<em class="lb"> COVIDEDA </em>。在左侧，您可以看到将要上传到服务器的文件和目录。</p><p id="62e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3 —点击<strong class="kh ir">发布</strong></p><p id="2e04" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">来自端子</strong></p><p id="7c1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也可以使用以下命令从R控制台上传应用程序:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="ee26" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从你的文档(或应用程序)首次发布的那一刻起，一个名为<code class="fe nf ng nh ni b">rsconnect/</code>的文件夹将在你的项目目录中创建。每次您再次遵循这些步骤，您将能够更新您的文档！你可以点击这个链接访问我的报道:【https://lucha6.shinyapps.io/COVIDEDA/<a class="ae lc" href="https://lucha6.shinyapps.io/COVIDEDA/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="df79" class="lw lx iq bd ly lz pd mb mc md pe mf mg jw pf jx mi jz pg ka mk kc ph kd mm mn bi translated">结论</h1><p id="83ab" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">在本文中，我展示了如何创建一个交互式报告来研究COVID19数据。我们用<code class="fe nf ng nh ni b">ggplot</code>、<code class="fe nf ng nh ni b">plotly</code>和<code class="fe nf ng nh ni b">leaflet</code>制作了一些很酷的剧情。我们还学习了如何在RMarkdown和Shiny的帮助下部署100%交互式文档。下一篇文章将介绍如何自动更新数据集、绘图和部署文档，而无需我们打开电脑！😮🙃</p></div></div>    
</body>
</html>