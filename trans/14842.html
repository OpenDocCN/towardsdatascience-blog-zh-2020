<html>
<head>
<title>Deployment Using Streamlit and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit和Heroku进行部署</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/end-to-end-deployed-project-machine-learning-part-2-43ddb1bc43d0?source=collection_archive---------74-----------------------#2020-10-12">https://towardsdatascience.com/end-to-end-deployed-project-machine-learning-part-2-43ddb1bc43d0?source=collection_archive---------74-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d424" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">每一个渴望进入数据科学领域的新手，都有一大堆项目放在自己的桌面上，无人触及。我们把它们放到网上怎么样？？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fa34f193bf780a6989a56a8fbf43ab0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rn_w8Wb-2uUS_boU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@minhphamdesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Minh Pham </a>拍摄的照片</p></figure><p id="fbfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文中使用的所有代码和截图都来自我今年早些时候参与的一个个人项目。GitHub回购的代码在这里<a class="ae kv" href="https://github.com/SandeepRam31/ReSaleCars" rel="noopener ugc nofollow" target="_blank">被链接</a>，部署的模型在这里<a class="ae kv" href="https://resalecars.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">被链接</a></p><h1 id="10f8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用STREAMLIT构建UI:</h1><p id="7938" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，您需要将streamlit安装在您的系统上，或者您正在进行这个项目的虚拟环境中。</p><p id="cb56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您没有安装streamlit，请打开命令提示符并键入:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7de2" class="mu lt iq mq b gy mv mw l mx my"> pip install streamlit</span></pre><p id="426b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦安装了streamlit，您应该查看streamlit的官方文档，以熟悉其python库提供的各种小部件。我将从以下我认为最有用的小部件开始:</p><ol class=""><li id="62b8" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated">要输入纯文本</li></ol><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d01b" class="mu lt iq mq b gy mv mw l mx my">streamlit.write('Text data')</span></pre><p id="e268" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.创建下拉列表</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="778d" class="mu lt iq mq b gy mv mw l mx my">choices = ['1', '2', '3']<br/>selected_ch = streamlit.selectbox('Pick a number', choices)</span></pre><p id="ac26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.要创建滑块</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="189c" class="mu lt iq mq b gy mv mw l mx my">num = streamlit.slider('Enter num', min_val, max_val, step)</span></pre><p id="3173" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">4.接受输入</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c5b7" class="mu lt iq mq b gy mv mw l mx my">inp = streamlit.text_input('Enter some text here', default)<br/>num = streamlit.number_input('Number', default)</span></pre><p id="8f4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用上面的小部件，我们可以为我们的应用程序创建一个简单的UI。当我第一次尝试这样做时，我用了不到15分钟就完成了整个UI！这真的没有那么难！</p><p id="0a54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您对此有任何疑问，请查看streamlit的<a class="ae kv" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><p id="c80a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将它保存在一个. py文件中(比如“stream.py”)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/2388e52d93050b7b2ce9e7c57a830b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JkOopeRyWPOk30zgmbgGeg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用streamlit构建的UI示例[图片由作者提供]</p></figure><h1 id="eae2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">部署到Heroku:</h1><p id="002f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果这是你第一次部署到Heroku，这可能会有点混乱。我将带你完成这最后一步，之后你的网站将在互联网上直播！这难道不令人兴奋吗？？？我们开始吧！</p><p id="ce60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有很多方法可以做到这一点。然而，我将用最简单的方法开始</p><ul class=""><li id="3a44" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">第一步:创建一个Heroku账户，如果你还没有的话</li></ul><p id="6f38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这很简单。转到<a class="ae kv" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku注册页面</a>并填写那里给出的表格。</p><ul class=""><li id="3793" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">第二步:创建一个新的应用程序，并给它一个合适的名字。</li></ul><p id="eca5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击仪表板上的“新建”选项。您将被重定向到此页面</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/a7f6cf0889f0db20d6f76c6635ecc8e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BF-i9KbE8PdfUeji6WkxQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><ul class=""><li id="c5ef" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">步骤3:转到存储stream.py文件的文件夹</li></ul><p id="682c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个名为' Procfile '的文件，这是一个文件类型，因此，没有任何扩展名，如'。txt '或'。xlsx。在Procfile中键入以下内容</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="af26" class="mu lt iq mq b gy mv mw l mx my">web: sh setup.sh &amp;&amp; streamlit run stream.py</span></pre><ul class=""><li id="46d4" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">第4步:在同一个目录中创建一个名为requirements.txt的文件，并列出到目前为止您在项目中使用的所有模块。</li><li id="7d67" class="mz na iq ky b kz nl lc nm lf nn lj no ln np lr nj nf ng nh bi translated">步骤5:创建一个名为“setup.sh”的文件，并用以下内容填充它:</li></ul><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="6590" class="mu lt iq mq b gy mv mw l mx my">mkdir -p ~/.streamlit/ <br/>echo "\<br/>[server]\n\<br/>headless = true\n\<br/>port = $PORT\n\<br/>enableCORS = false\n\<br/>\n\<br/>" &gt; ~/.streamlit/config.toml</span></pre><ul class=""><li id="6d4b" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">步骤6:将整个文件夹上传到GitHub repo中，比如<a class="ae kv" href="https://github.com/SandeepRam31/ReSaleCars" rel="noopener ugc nofollow" target="_blank"> this repo </a>。</li><li id="6b13" class="mz na iq ky b kz nl lc nm lf nn lj no ln np lr nj nf ng nh bi translated">第七步:打开你在Heroku上创建的新应用，点击“连接到GitHub”图标</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/0540c2933834e4db527125ab47f3a04b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwEn6ZVR3WuoCdGeIfGW5Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">单击突出显示的图标[作者图片]</p></figure><ul class=""><li id="6dc9" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr nj nf ng nh bi translated">第8步:输入你的GitHub库名并点击连接</li><li id="3a23" class="mz na iq ky b kz nl lc nm lf nn lj no ln np lr nj nf ng nh bi translated">步骤9:单击部署分支</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/59ee0b3c5b86e84cc52ab48c1e208548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvPB0CW7LOcG35X-UCUl6A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">[图片由作者提供]</p></figure><p id="1f0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊。！你的网站现在必须是活的！如果你已经做到这一步，请与我联系或留下评论，让我知道这篇文章是否对你有帮助。祝你未来的项目一切顺利。</p></div></div>    
</body>
</html>