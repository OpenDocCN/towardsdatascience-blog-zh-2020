<html>
<head>
<title>End-to-end Data Science Project: Predicting used car prices using Regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">端到端数据科学项目:使用回归预测二手车价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/end-to-end-data-science-project-predicting-used-car-prices-using-regression-1b12386c69c8?source=collection_archive---------14-----------------------#2020-10-14">https://towardsdatascience.com/end-to-end-data-science-project-predicting-used-car-prices-using-regression-1b12386c69c8?source=collection_archive---------14-----------------------#2020-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/96108f17fede326a5e33c64bebf6333c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2ivh3kPT2KBpA-EsnngXA.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">图片来自<a class="ae kc" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2755908" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kc" href="https://pixabay.com/es/users/joerg-design-524252/" rel="noopener ugc nofollow" target="_blank"> JOERG-DESIGN </a></p></figure><h1 id="5af1" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><blockquote class="lb lc ld"><p id="5adf" class="le lf lg lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">大约<a class="ae kc" href="https://static.ed.edmunds-media.com/unversioned/img/industry-center/insights/2019-used-vehicle-outlook-report-final.pdf" rel="noopener ugc nofollow" target="_blank">每年售出4000万辆二手车</a>。有效的定价策略可以帮助任何公司在竞争激烈的市场中高效地销售其产品并获取利润。</p></blockquote><p id="03f0" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在汽车行业，定价分析对于公司和个人在出售或购买汽车之前评估汽车的市场价格起着至关重要的作用。</p><p id="1945" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">我想通过这个数据科学项目实现两个主要目标。首先，根据历史数据，通过考虑一组特征来估计二手车的价格。第二，更好地了解有助于确定二手车价格的最相关特征。</p><h1 id="2517" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">数据</h1><p id="8525" class="pw-post-body-paragraph le lf iq lh b li mg lk ll lm mh lo lp md mi ls lt me mj lw lx mf mk ma mb mc ij bi translated">将用于该项目的数据可在<a class="ae kc" href="https://www.kaggle.com/austinreese/craigslist-carstrucks-data" rel="noopener ugc nofollow" target="_blank"> <em class="lg"> Kaggle </em> </a> <em class="lg"> </em>和<em class="lg"> </em>获得，这些数据来自Craigslist，这是世界上最大的二手车销售网站。</p><p id="d17a" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">该数据库由423，857行和25个特征组成，其中一个特征将是我们要预测的连续因变量(“价格”)。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/f3b8be79d318c777981c75726ade6ac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*tauUZDHu6tAoQch9vUkjxQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">数据库概述</p></figure><h1 id="64dc" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">方法学</h1><p id="fac0" class="pw-post-body-paragraph le lf iq lh b li mg lk ll lm mh lo lp md mi ls lt me mj lw lx mf mk ma mb mc ij bi translated"><strong class="lh ir"> EDA </strong></p><p id="235c" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">数字特征在这个回归模型中起着很大的作用，所以很好地理解它们在数据库中的分布是很重要的。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/a3e2fbc0ef93eaa615a2d4b1dcadb7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*IrXbjPyp3Hx998dHCNMS1g.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">数字特征的统计数据</p></figure><p id="b725" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">我们的重点将是“价格”、“年份”和“里程表”。如上图所示，这三个特征的最大值/最小值和百分位数之间有很大的差异。这是异常值存在的一个指标，异常值会极大地阻碍我们模型的性能。它们将在以后处理。</p><p id="77fc" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><strong class="lh ir">缺失值&amp;重复值</strong></p><p id="40a8" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在了解了我们将要使用的数据库之后，务必检查是否有任何缺失值(NaN)。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/7601e145bc2cd80e41a146f0edf1e02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*ZxxmPXQtbD_qBJWCDioWfQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">数据库中某些要素的值缺失</p></figure><p id="8318" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">大多数特性都有大量的缺失值，但是仅仅删除所有具有NaN值的行是不实际的，因为这样会使数据库变得过于稀疏。</p><p id="45f2" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">现在，我将把它留在那里，只去掉一些不会带来任何附加值的功能。保留它们只会让模型更难解释数据库。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/583cc95ae4bcdd744e96d2fdc4b21076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*id76dNsPOqQbgmaegayElQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">从数据库中删除的一组要素</p></figure><p id="bde0" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">最后，还需要检查数据库中是否有重复值。</p><p id="7398" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在这种情况下，数据库中有几个副本。它们将通过删除现有的重复行来处理，但第一行除外，第一行将被保留。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/98f9bf2459062db3368781eb22a91b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*eo7G0db2hHln8J22fW3rUQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">处理数据库中的重复项</p></figure><p id="beb9" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><strong class="lh ir">特色工程</strong></p><p id="fac6" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">首先，我将在“描述”列上使用<strong class="lh ir">正则表达式</strong>。此功能包含每辆二手车的广告文本。</p><p id="ef74" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">目标是从那里获得关键信息，以便填充数据库中其他列的NaN值。我们要填充的列是那些具有分类值但没有太多唯一值的列:</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="mu mv l"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">使用正则表达式的模式匹配</p></figure><p id="65d9" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">完成此操作后，有值被不一致地添加。例如，我们在同一列中有这些类型的值:“awd”和“awd”。为了统一字符串，将使用strip()方法。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/ffb03714335739ea96cb2c31248c2fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*bfEK3rhpZOIKPv2SElD96w.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">处理不一致的数据输入</p></figure><p id="f29a" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">通过这个Regex步骤，数据库获得了成千上万的新条目，用一致的数据填充了大量缺失的值。由于我们不再需要“描述”功能，我将删除它。</p><p id="1448" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">下一步，是时候让<strong class="lh ir">处理数据库中的离群值</strong>了。将被处理的三列是:“里程表”、“价格”和“年份”。</p><p id="0847" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">让我们从想象前两个开始:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/25a901c85e59aa3f373cbe97cfdfac1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*EnaUL14ZOjvx7NkOcL9gdw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">价格和里程表值的分布</p></figure><p id="ccfe" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">由于“价格”在最小值和25%百分位之间以及在最大值和75%百分位之间有如此大的差异，我将在两端省去10%的值。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0c0118ce469fe16303747b7e3eac4e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*s48Fz7PxRY8foX7zDEYEPQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">价格两端的价值下降10%</p></figure><p id="6e2a" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">接下来，是时候关注“里程表”了。这个特性有NaN值，所以处理起来比较棘手。让我们用散点图来显示异常值。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/e64b12eca9e375cec893bd0938bea162.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*hsjriW5ALHAtzqN6d0UnPw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">显示里程表上的异常值</p></figure><p id="9d4c" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">因为离群值开始于大约3，000，000；我将放弃超过这个值的值。此外，去掉最小值(0)也是一个好主意，因为它与25%的百分位数有很大不同。这样,“里程表”功能也已成功调整。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/abd4e2c87ef11e1c0dcd0561e63387ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*7HP7cC0Vp99SHu2oxV6J1w.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">调整后的里程表功能</p></figure><p id="4544" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">为了结束这一步，特征“年份”的异常值将以与“里程表”中相同的方式进行处理。</p><p id="6705" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">接下来，我想通过使用数据库中其他现有列的<strong class="lh ir">来处理另外两个相关特性。它们是:“条件”和“标题_状态”。它们非常相似，基本上告诉我们二手车的状态(干净、脏、新、好、坏……)。</strong></p><p id="eb02" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">为此，我将使用“里程表”值。“里程表”功能是一个连续的功能，因此最好将其值分组到几个箱中作为参考。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9ae1e8ef0129316b8d69fedffecdac91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*KddYX6C5o2F2T_ktsMvItw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">标题_状态与里程表</p></figure><p id="3fe9" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">“title_status”的大部分值都是干净的，所以我将把“干净”添加到该列的所有NaN值中。接下来，是时候检查“状况”了:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/edb08a02f7a8e4f82e56fe0311fec070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*7RvkG6jnXMABXO6N2fAD3A.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">状况与里程表</p></figure><p id="b824" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在这种情况下，值的差异更大。使用上面的图表作为指导，我将填写“条件”的NaN值。最后，因为“condition”和“title_status”是相互关联的，所以将它们合并到一个特性中是一个好主意。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/844cbdb8d6170d581c91f12d701b383d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*15ZvCHgUFfx1BZ-nP6SowA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">填充NaN值和连接要素</p></figure><p id="0841" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">最后，现在是时候再次查看缺失值图表了。我会应用<strong class="lh ir">其他方法</strong>来处理它们。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/15597565724e4559d8df8a00f30d3c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*VkkPeEoXhh3RGtgLYuowGQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">数据库中缺少值</p></figure><p id="0bb7" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">考虑到丢失值的数量，我将把特性分成三个不同的组，并删除具有最多NaN值的“size”。</p><p id="3f98" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">首先，NaN值少于5%的行将删除缺少值的行。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c9c2d58e2d274a774688a69fa4ef5344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*XmsnU-W-N-Otbop90zVdtg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">删除具有NaN值的行</p></figure><p id="66c4" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">第二，NaN值小于20%的那些将通过使用fillna()函数填充。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/129f91e0064f44103e6ca0ba8307adc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*WhtIlhMPjbR8WHvxx5xvPQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">在具有缺失值的要素中使用fillna()</p></figure><p id="a776" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">最后，最后一个特性“cylinders”将通过使用另一个列(“drive”)来处理，以推断它的值，因为我觉得它是模型的一个相关特性。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/f7902b4dbc62be513eb6c90a87c0e637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*K6cGqNirYWD-4ewEVB4XPQ.png"/></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f68cd37be09639e48a3003a0fa2e0f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*ykOPlb1bj29m37tS9GOCZg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">利用另一列填写NaN值</p></figure><p id="edf9" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在本特性工程部分的结尾，将“区域”和“州”合并成一个特性是一个好主意，因为它们是紧密相关的。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/85c27ee2e195bf5dca57bb29b500692e.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*JyoEWv5YibTsXaegJ5l7yg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">将区域和州连接成一个特征</p></figure><p id="2799" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><strong class="lh ir">分类变量编码</strong></p><p id="6c71" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在数据库中，既有数字变量，也有分类变量。但是，为了继续下面的步骤，需要将这些分类值编码成数字数据。这将在标签编码的帮助下完成。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/f82c5cd71cc760d0c929c494428ed963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*9syvTaAbymH8OtacctyXBg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">分类变量编码</p></figure><p id="49e7" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><strong class="lh ir">相关性</strong></p><p id="da2b" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">当两个变量高度相关时，它们对我们要预测的因变量的影响是一样的。在这种情况下，建议删除其中一个。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4dd96a5d23e6f79712f6303da16fdece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*EJobrGt-5bdylefRVAjdqw.png"/></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8be11e7cc6bde4979b3ba0b9858f993e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*JaPN9onipQ3Vo5yd4ApGFg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">相关矩阵</p></figure><p id="6d7c" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在这种情况下，没有一个特性是高度相关的，所以我们让它们保持原样。</p><p id="dc2d" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated"><strong class="lh ir">造型</strong></p><p id="0fef" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">是时候开始这个项目的建模了。这一次，我将只使用<strong class="lh ir">随机森林回归</strong>模型来获得“价格”预测。</p><blockquote class="lb lc ld"><p id="eb0e" class="le lf lg lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">随机森林算法是决策树的集合。对于我们的项目来说，它肯定会派上用场，因为它有能力处理具有更高维度的大型数据集，并且不允许在模型中过度拟合树。</p></blockquote><p id="64f2" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">为了开始建模，我们希望将数据库分为训练集和测试集。这项工作将以80:20的比例完成。像往常一样，我们将首先重新索引数据库，并将因变量“价格”作为最后一列，以便进行更简单的拆分。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/8aa2cdd1fdff6f086aabb2bfeef75e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g67dc-n4EXRSXWDXdzQwsQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">重新索引并拆分成训练/测试集</p></figure><p id="3b93" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">在分割之后，由于独立特征的值存在很大的差异，因此有必要实现特征缩放。务必在拆分数据库后进行，以避免数据泄漏到机器学习模型中。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/55004a2da8be8ff07b1953337f42cc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*KntnVDzRa-6NJdBaO8WtQQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">将特征缩放应用于X_train和X_test</p></figure><p id="974c" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">然后，我们使用交叉验证方法在训练集中拟合模型，以便更精确地估计模型的准确性。我将利用R (R平方)指标来评估模型的性能。</p><blockquote class="lb lc ld"><p id="123c" class="le lf lg lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">R <!-- -->是一个无标度分数，这意味着值太大或太小都没有关系，R将总是小于或等于1。越接近1越好。</p></blockquote><p id="ad54" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">顺便提一下，由于百分比在评估结果时更有洞察力，我将把我们从R得到的值转换成百分比。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/32278fe77274af3d955781c5b4113435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*diCgCv84cwSDt_YGKlmFkw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">基于R度量评估模型</p></figure><p id="6eda" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">我们一开始就获得了超过85.48%的分数。一点也不差。但是我们可以通过调整超参数来进一步改善它。</p><p id="e6de" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">一旦模型的超参数得到优化，就应该再次训练它(使用交叉验证)并再次检查它在训练集上的性能。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/a7e568529999dbeba8aa2b998d4b3873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*LnLXes4WnDX1G8Rw2O-2yg.png"/></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/57657afc0bd98a7991da2f18ae4aa5d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*mlYC87nGmV-D8kcglUMfHQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">随机森林回归模型的超参数调整</p></figure><p id="193f" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">从上面的图片中我们可以看到，在优化了超参数之后，分数变得更好了。</p><p id="6da3" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">最后，一旦训练完成，模型已经从训练数据中学习，剩下的就是检查它在测试集中的表现如何。这将是我们模型的关键时刻。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/12a29710b6f3e785e1bc9b540d57df43.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*gMscjHg0HR1iX7xp25N_VQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">对测试集的预测</p></figure><p id="c923" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">我们的模型在训练集和测试集中的良好表现表明，结果似乎相当可靠。事实上，它在测试集中的预测更加准确(87.03%)，这一点尤其值得注意。</p><h1 id="77d1" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结果</h1><p id="57a7" class="pw-post-body-paragraph le lf iq lh b li mg lk ll lm mh lo lp md mi ls lt me mj lw lx mf mk ma mb mc ij bi translated">对于这个项目，为了预测二手车的价格，我只使用了一个模型:随机森林回归变量。</p><p id="dd50" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">它在如此大的数据集上表现出了出色的性能，并且在整个训练和测试过程中表现一致。更重要的是，测试集的结果优于训练集，其预测准确率为87.03%。</p><p id="e5f7" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">该项目的目标之一是创建一个能够估计二手车价格的模型，我们已经实现了这个目标。</p><p id="e2f2" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">第二个目标是在估计因变量“价格”时，找出哪些特性是最相关的:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/98733bb6e4cf044c3edcafe5521dd1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*Gg_amleOcaOVEhHws1vRIQ.png"/></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/3036e0fb7ca89d83c0e56acb3f80246e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lcyy-s4yKJ_QIrISVeJk6A.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">随机森林模型中每个特征的重要性</p></figure><h1 id="e5d1" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="b2c0" class="pw-post-body-paragraph le lf iq lh b li mg lk ll lm mh lo lp md mi ls lt me mj lw lx mf mk ma mb mc ij bi translated">通过这个项目，我们建立了一个模型，在给定一组特征的情况下，该模型可以以87.03%的准确率预测二手车的价格。当公司和个人试图了解如何估计一辆汽车的价值时，这些信息可能具有巨大的价值，更重要的是，了解决定其定价的关键因素。</p><p id="060e" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">正如所料，到目前为止，在计算价格时，车辆的年份是主要因素，几乎占43%，其次是里程表。有趣的是，我期望汽车的状态和里程表有很深的关联，但是在这两个指标之间的相关性差异上有很大的差距。</p><p id="72f1" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">也就是说，这个地区似乎也起了作用，这完全有道理。可能会有更多的通用汽车在任何地方都受欢迎，但像跑车或敞篷车这样的专业汽车更适合温暖的地区，而大型卡车和SUV在寒冷的地方会发挥更好的作用。</p><p id="ad98" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">掌握定价的艺术不是一件容易的事情，但是通过对历史数据的研究，有可能找到导致准确结果的模式。在出售或在市场上购买汽车之前，获得这些知识可以为你提供一个比较优势。</p></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><p id="ca12" class="pw-post-body-paragraph le lf iq lh b li lj lk ll lm ln lo lp md lr ls lt me lv lw lx mf lz ma mb mc ij bi translated">关于这个项目内核的更多信息，请访问:<a class="ae kc" href="https://github.com/josem-gp" rel="noopener ugc nofollow" target="_blank">https://github.com/josem-gp</a></p></div></div>    
</body>
</html>