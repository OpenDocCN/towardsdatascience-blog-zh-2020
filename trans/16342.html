<html>
<head>
<title>Getting Started with Cron Job in the Linux Server: A Complete Tutorial for Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux服务器中的Cron作业入门:初学者完全教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-your-first-cronjob-on-the-linux-server-74e2fdc76e78?source=collection_archive---------4-----------------------#2020-11-11">https://towardsdatascience.com/create-your-first-cronjob-on-the-linux-server-74e2fdc76e78?source=collection_archive---------4-----------------------#2020-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/06b66b616053d254812de2773e888059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Guf1vmihL4s2vOUF"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@_imkiran?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sai Kiran Anagani </a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="fb61" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">动手教程</a></h2><div class=""/><div class=""><h2 id="755c" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用cron自动化您的日常工作</h2></div><h2 id="ef86" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">目录(仅适用于web)</h2><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="d743" class="lh li jj mh b gy ml mm l mn mo">1 <a class="ae jg" href="#bed8" rel="noopener ugc nofollow">What are cron, cron job, and crontab?</a><br/>2 <a class="ae jg" href="#4a20" rel="noopener ugc nofollow">Understand a cron job syntax</a><br/>3 <a class="ae jg" href="#f0c2" rel="noopener ugc nofollow">How to handle an error on your cron job</a><br/>  • <a class="ae jg" href="#5f39" rel="noopener ugc nofollow">Send output to a specific file</a><br/>  • <a class="ae jg" href="#99b9" rel="noopener ugc nofollow">Use /dev/null</a><br/>4 <a class="ae jg" href="#d7e8" rel="noopener ugc nofollow">Write a simple cron automation script</a><br/>5 <a class="ae jg" href="#2c02" rel="noopener ugc nofollow">Conclusion</a><br/>6 <a class="ae jg" href="#62e2" rel="noopener ugc nofollow">References</a></span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="bed8" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">什么是cron、cron job和crontab？</h2><p id="43b4" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">Cron是一个帮助Linux用户安排任何任务的系统。然而，cron作业是在给定时间段内运行的任何定义的任务。它可以是一个shell脚本或一个简单的bash命令。Cron job帮助我们自动化我们的日常任务，它可以是每小时，每天，每月等。</p><blockquote class="np nq nr"><p id="9272" class="mw mx ns my b mz nt kt nb nc nu kw ne nv nw ng nh nx ny nj nk nz oa nm nn no im bi translated"><strong class="my jt">注意:</strong>在大多数Linux系统中，我们必须获得系统管理员的许可，才能定义<code class="fe ob oc od mh b"><strong class="my jt">crontab</strong></code>中列出的特定cron作业</p></blockquote><p id="6562" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">同时，crontab代表cron表。这是一个包含cron作业列表的Linux系统文件。我们在crontab中定义我们的任务——bash命令、shell脚本、Python脚本等等。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6c91" class="lh li jj mh b gy ml mm l mn mo"><strong class="mh jt"># Check cron service on Linux system</strong><br/>sudo systemctl status cron.service</span></pre><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/c8cec26724dd969a684f724bc206ef88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6rp0JBPi7P6UW9x0AxaLAQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">检查Linux系统上的cron服务(图片由作者提供)</p></figure><h2 id="4a20" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">理解cron作业语法</h2><p id="5ab6" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">是时候在<code class="fe ob oc od mh b"><strong class="my jt">crontab</strong></code>上学习cron作业语法了。</p><ul class=""><li id="1a86" class="of og jj my b mz nt nc nu lq oh lu oi ly oj no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">crontab -a &lt;filename&gt;</strong></code>:新建一个<code class="fe ob oc od mh b"><strong class="my jt">&lt;filename&gt;</strong></code>作为crontab文件</li><li id="1dcf" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">crontab -e</strong></code>:编辑我们的crontab文件，或者创建一个不存在的文件</li><li id="247d" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">crontab -l</strong></code>:显示我们的crontab文件</li><li id="bc57" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">crontab -r</strong></code>:删除我们的crontab文件</li><li id="82ae" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated">显示我们上次编辑crontab文件的时间</li></ul><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="eec5" class="lh li jj mh b gy ml mm l mn mo"><strong class="mh jt">minute(s) hour(s) day(s) month(s) weekday(s) command(s)</strong></span></pre><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/7bf29dc9af6d53ff7c12c9619001fa18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAtNr4Crf-TmeMo2YRCr1g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">crontab文件中六列的描述(图片由作者提供)</p></figure><blockquote class="np nq nr"><p id="ab5e" class="mw mx ns my b mz nt kt nb nc nu kw ne nv nw ng nh nx ny nj nk nz oa nm nn no im bi translated"><strong class="my jt">注意:</strong>日名0–6以星期日开始。我们可以很容易地确定我们在https://crontab.guru/的行程</p></blockquote><h2 id="f0c2" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">如何处理cron作业中的错误</h2><p id="4977" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">如果cron作业遇到错误，默认情况下，它会向系统管理员发送一封电子邮件。相反，当我们遇到错误时，我们将找出两种常见的方法。</p><h2 id="5f39" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated"><strong class="ak"> 1将输出发送到特定文件</strong></h2><p id="624b" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">这是一种常见的方式，我总是在我的cron工作中使用它。很简单。我们只需要创建一个文件来保存我们的cron作业日志。它将打印出输出，以防作业正确完成，或者如果失败，打印出一个错误。</p><p id="e4be" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">在本教程中，它只是创建了一个<code class="fe ob oc od mh b"><strong class="my jt">log.out</strong></code>文件。输出将被重定向到<code class="fe ob oc od mh b"><strong class="my jt">log.out</strong></code>。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f8f9" class="lh li jj mh b gy ml mm l mn mo">* * * * * <!-- -->cd /home/audhi &amp;&amp; /bin/bash shell-script.sh &gt;&gt; log.out</span></pre><p id="482f" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">crontab文件中上述语法的描述如下。</p><ul class=""><li id="5c2d" class="of og jj my b mz nt nc nu lq oh lu oi ly oj no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">* * * * *</strong></code>意味着一个任务将在一周的每一天、每月的每一天、每小时的每一分钟被执行</li><li id="9deb" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated">目录将切换到shell-script.sh所在的<code class="fe ob oc od mh b"><strong class="my jt">/home/audhi</strong></code></li><li id="c557" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">/bin/bash</strong></code>是<em class="ns"> Bash shell </em>的路径和可执行文件</li><li id="d2b5" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">&gt;&gt;</strong></code> <strong class="my jt"> </strong>符号<strong class="my jt"> </strong>将把输出附加到一个现有文件中(<code class="fe ob oc od mh b"><strong class="my jt">log.out</strong></code>)，而单个<code class="fe ob oc od mh b"><strong class="my jt">&gt;</strong></code>符号将覆盖该文件</li><li id="7488" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">shell-script.sh</strong></code>是某个shell脚本</li></ul><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/be958a3905bcf6bd99cc21d1c3cba4e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nf2KKNBbMNSAyJ16rnzPjQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Linux系统上的crontab文件(图片由作者提供)</p></figure><blockquote class="np nq nr"><p id="263b" class="mw mx ns my b mz nt kt nb nc nu kw ne nv nw ng nh nx ny nj nk nz oa nm nn no im bi translated">注意:我们需要在crontab中编写完整清晰的命令。需要使用<code class="fe ob oc od mh b"><strong class="my jt">cd</strong></code>指定文件位置</p></blockquote><h2 id="99b9" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">2使用/dev/null</h2><p id="27db" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">我们可以轻松地将cron作业日志和错误发送到<code class="fe ob oc od mh b"><strong class="my jt">dev/null</strong></code>，而不是通过电子邮件发送警报。无论我们向<code class="fe ob oc od mh b"><strong class="my jt">dev/null</strong></code>发送或写入什么，都将被丢弃。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="e5ac" class="lh li jj mh b gy ml mm l mn mo">* * * * * <!-- -->cd /home/audhi &amp;&amp; /bin/bash shell-script.sh &gt; /dev/null 2&gt;&amp;1</span></pre><p id="e653" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">命令的简短描述:</p><ul class=""><li id="15b6" class="of og jj my b mz nt nc nu lq oh lu oi ly oj no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">&gt; /dev/null</strong></code>告诉cron将输出(STDOUT)重定向到<code class="fe ob oc od mh b"><strong class="my jt">/dev/null</strong></code></li><li id="e527" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">2</strong></code>是<em class="ns">标准错误</em> (STDERR)的文件描述符</li><li id="eabc" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">&amp;</strong></code>是文件描述符的符号(没有它，后面的<code class="fe ob oc od mh b"><strong class="my jt">1</strong></code>将是文件名)</li><li id="f373" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">1</strong></code>是<em class="ns">标准输出</em> (STDOUT)的文件描述符</li></ul><blockquote class="np nq nr"><p id="f0ca" class="mw mx ns my b mz nt kt nb nc nu kw ne nv nw ng nh nx ny nj nk nz oa nm nn no im bi translated"><strong class="my jt">注意:</strong>2&gt;&amp;1告诉cron将所有错误(STDERR)重定向到与标准输出(STDOUT)相同的位置</p></blockquote><h2 id="d7e8" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">编写一个简单的cron自动化脚本</h2><p id="6305" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">为了完成本文，我创建了一个Python脚本来演示如何使用cron作业。这个Python脚本将从印度尼西亚最大的在线新闻之一<a class="ae jg" href="https://www.kompas.com/covid-19" rel="noopener ugc nofollow" target="_blank"> <em class="ns"> Kompas News </em> </a>中收集新冠肺炎数据。你可以在我的<a class="ae jg" href="https://github.com/audhiaprilliant/Web-Scraping-Covid19-Kompas-News" rel="noopener ugc nofollow" target="_blank"> <strong class="my jt"> GitHub repo </strong> </a>找到我的新冠肺炎数据网页抓取的Python脚本。它的文件名是<code class="fe ob oc od mh b"><strong class="my jt">Web Scraping Covid-19 Kompas News.py</strong></code>。</p><p id="b0ce" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">打开我们的终端，键入<code class="fe ob oc od mh b"><strong class="my jt">crontab -e</strong></code>打开一个crontab文件。然后，向下滚动并键入以下命令。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f4bd" class="lh li jj mh b gy ml mm l mn mo">5 16 * * * cd 'covid19 data' &amp;&amp; /usr/bin/python3 'Web Scraping Covid-19 Kompas News.py' &gt;&gt; test.out</span></pre><p id="8837" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">crontab文件中上述语法的描述如下。</p><ul class=""><li id="63bd" class="of og jj my b mz nt nc nu lq oh lu oi ly oj no ok ol om on bi translated">crontab位于<code class="fe ob oc od mh b"><strong class="my jt"><em class="ns">/home</em></strong></code> <strong class="my jt"> </strong>而我的脚本在<code class="fe ob oc od mh b"><strong class="my jt"><em class="ns">/home/covid19 data</em></strong></code><strong class="my jt"/><strong class="my jt"/>所以我们需要先切换到<code class="fe ob oc od mh b"><strong class="my jt"><em class="ns">/home/covid19 data</em></strong></code> <strong class="my jt"> <em class="ns"> </em> </strong></li><li id="ff9a" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated"><code class="fe ob oc od mh b"><strong class="my jt">python3</strong></code>解释器位于<code class="fe ob oc od mh b"><strong class="my jt">/usr/bin/python3</strong></code></li><li id="a5ec" class="of og jj my b mz oo nc op lq oq lu or ly os no ok ol om on bi translated">输出将被重定向到<code class="fe ob oc od mh b"><strong class="my jt"><em class="ns">/home/covid19 data</em></strong></code>中的<code class="fe ob oc od mh b"><strong class="my jt">test.out</strong></code>文件</li></ul><blockquote class="np nq nr"><p id="414f" class="mw mx ns my b mz nt kt nb nc nu kw ne nv nw ng nh nx ny nj nk nz oa nm nn no im bi translated">注意: cron使用本地时间</p></blockquote><p id="7cac" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">还可以学习<strong class="my jt"><em class="ns">Apache air flow</em></strong>作为作业编排来自动化常规任务！</p><div class="is it gp gr iu ov"><a href="https://medium.com/analytics-vidhya/apache-airflow-as-job-orchestration-e207ba5b4ac5" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jt gy z fp pa fr fs pb fu fw js bi translated">Apache Airflow作为新冠肺炎数据的作业编排(通过电子邮件和电报发送通知)</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">印度尼西亚新冠肺炎数据的网络采集</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">medium.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ja ov"/></div></div></a></div><h2 id="2c02" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">结论</h2><p id="da9b" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">cron作业在Linux系统上运行，以运行和执行我们的常规任务(终端命令)。关于cron作业，要学习的最重要的事情是终端上的bash命令，如何设置我们的任务调度，并确保在我们的脚本在生产环境中运行时捕捉到所有的可能性，以便我们可以防止错误。</p><h2 id="62e2" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">参考</h2><p id="4cc2" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">[1] Schkn。<a class="ae jg" href="https://devconnected.com/cron-jobs-and-crontab-on-linux-explained/" rel="noopener ugc nofollow" target="_blank"><em class="ns">Linux上的Cron Jobs和Crontab讲解</em></a>(2019)<a class="ae jg" href="https://devconnected.com/cron-jobs-and-crontab-on-linux-explained/" rel="noopener ugc nofollow" target="_blank">https://dev connected . com/Cron-Jobs-and-Crontab-on-Linux-Explained/</a>。</p><p id="553d" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">[2] C .默里。<a class="ae jg" href="https://linuxhandbook.com/crontab/#quick-introduction-to-key-cron-concepts" rel="noopener ugc nofollow" target="_blank"> <em class="ns">用实例了解Linux中的Crontab</em></a>(2019)<a class="ae jg" href="https://linuxhandbook.com/crontab/#quick-introduction-to-key-cron-concepts" rel="noopener ugc nofollow" target="_blank">https://Linux handbook . com/Crontab/# quick-introduction-to-key-cron-concepts</a>。</p><p id="32e3" class="pw-post-body-paragraph mw mx jj my b mz nt kt nb nc nu kw ne lq nw ng nh lu ny nj nk ly oa nm nn no im bi translated">[3]阿加莎。克龙约伯:<a class="ae jg" href="https://www.hostinger.co.id/tutorial/cron-job/" rel="noopener ugc nofollow" target="_blank"> <em class="ns">潘端冷卡普untuk佩穆拉2020</em></a>(2020)<a class="ae jg" href="https://www.hostinger.co.id/tutorial/cron-job/" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>