<html>
<head>
<title>Synthetic Data Vault (SDV): A Python Library for Dataset Modeling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">合成数据仓库(SDV):用于数据集建模的Python库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/synthetic-data-vault-sdv-a-python-library-for-dataset-modeling-b48c406e7398?source=collection_archive---------12-----------------------#2020-11-10">https://towardsdatascience.com/synthetic-data-vault-sdv-a-python-library-for-dataset-modeling-b48c406e7398?source=collection_archive---------12-----------------------#2020-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="96e3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python库</h2><div class=""/><div class=""><h2 id="8113" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用统计和机器学习模型生成复杂数据集的工具</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4ae1232c383d4d2c43050a825eb9f097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ng_MBNieZU6uODj-X3YdVw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者图片</p></figure><p id="fbaa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在数据科学中，你通常需要一个真实的数据集来测试你的概念证明。创建捕捉实际数据行为的假数据有时可能是一项相当棘手的任务。几个python包试图完成这项任务。很少流行的python包是<a class="ae md" href="https://github.com/joke2k/faker/" rel="noopener ugc nofollow" target="_blank"><strong class="lj jd">Faker</strong></a><a class="ae md" href="https://github.com/lk-geimfari/mimesis" rel="noopener ugc nofollow" target="_blank"><strong class="lj jd">拟态</strong> </a>。然而，主要是生成简单的数据，如生成姓名、地址、电子邮件、<em class="me">等</em>。</p><p id="de62" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要创建捕捉复杂数据集属性的数据，比如以某种方式捕捉实际数据的统计属性的时间序列，我们将需要一个使用不同方法生成数据的工具。<a class="ae md" href="https://sdv.dev/" rel="noopener ugc nofollow" target="_blank">Synthetic Data Vault(SDV)</a>python库是一个使用统计和机器学习模型对复杂数据集进行建模的工具。这个工具可以成为任何从事数据和建模工作的人的工具箱中的一个很好的新工具。</p><h1 id="a63c" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">为什么是这个图书馆？</h1><p id="fe07" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">我对这个工具感兴趣的主要原因是为了<em class="me">系统测试</em>:拥有从相同的实际底层过程生成的数据集要好得多。这样我们可以在现实的场景中测试我们的工作/模型，而不是有不现实的案例。我们需要合成数据还有其他原因，如<em class="me">数据理解、数据压缩、数据扩充</em>和<em class="me">数据隐私</em>【1】。</p><p id="a7e3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在论文“<a class="ae md" href="https://dai.lids.mit.edu/wp-content/uploads/2018/03/SDV.pdf" rel="noopener ugc nofollow" target="_blank"> The Synthetic data vault </a>”中首次介绍了<a class="ae md" href="https://sdv.dev/" rel="noopener ugc nofollow" target="_blank">Synthetic Data Vault(SDV)】</a>，然后在Neha Patki的硕士论文“<a class="ae md" href="https://dspace.mit.edu/handle/1721.1/109616" rel="noopener ugc nofollow" target="_blank">The Synthetic Data Vault:Generative Modeling for Relational Databases</a>”中将其用于生成建模的上下文中。最后，SDV图书馆是作为Andrew Montanez的硕士论文“<a class="ae md" href="https://dai.lids.mit.edu/wp-content/uploads/2018/12/Andrew_MEng.pdf" rel="noopener ugc nofollow" target="_blank"> SDV:用于合成数据生成的开源图书馆</a>”的一部分开发的。另一篇给SDV增加新功能的硕士论文是由徐磊完成的(<a class="ae md" href="https://dai.lids.mit.edu/wp-content/uploads/2020/02/Lei_SMThesis_neo.pdf" rel="noopener ugc nofollow" target="_blank">使用条件GAN </a>合成表格数据)。</p><p id="2e11" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所有这些工作和研究都是在麻省理工学院信息与决策系统实验室(LIDS，MIT)首席研究科学家Kalyan Veeramachaneni的监督下在麻省理工学院数据到人工智能实验室完成的。</p><p id="0a11" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我带来SDV历史的原因是为了欣赏这座图书馆背后的大量工作和研究。一篇关于使用这个工具的潜力的有趣文章，特别是在数据隐私方面，可以在<a class="ae md" href="https://news.mit.edu/2020/real-promise-synthetic-data-1016" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="5e5e" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">SDV图书馆</h1><p id="c34c" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">该库的工作流程如下所示。用户提供数据和模式，然后使模型适合数据。最后，从拟合的模型中获得新的合成数据[2]。此外，SDV图书馆允许用户保存适合的模型(<code class="fe nc nd ne nf b">model.save("model.pkl")</code>)以备将来使用。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/797802c51372065e457c384228adea68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*89jUrcv3p_XEM6oA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">SDV工作流程(转载自[2])</p></figure><h1 id="80e9" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">基于PAR的时间序列数据建模</h1><p id="fff4" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">概率自回归(PAR)模型用于对多类型多元时间序列数据建模。SDV图书馆在<code class="fe nc nd ne nf b">PAR</code>类中实现了这个模型(来自时序模块)。</p><p id="6258" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们设计一个例子来解释<code class="fe nc nd ne nf b">PAR</code>类的不同论点。我们将研究多个城市的温度时间序列。数据集将有以下几列:<em class="me">日期</em>，<em class="me">城市</em>，<em class="me">测量装置</em>，<em class="me">地点，噪音</em>。</p><p id="5d14" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在<code class="fe nc nd ne nf b">PAR</code>中，数据集中考虑了四种类型的列。</p><ol class=""><li id="1b26" class="nh ni it lj b lk ll ln lo lq nj lu nk ly nl mc nm nn no np bi translated"><strong class="lj jd">序列索引</strong>:这是具有行相关性的数据列(应该像日期时间或数值那样排序)。在时间序列中，这通常是时间轴。在我们的例子中，序列索引将是日期<em class="me">列。</em></li><li id="c912" class="nh ni it lj b lk nq ln nr lq ns lu nt ly nu mc nm nn no np bi translated"><strong class="lj jd">实体列</strong>:这些列是形成测量组的抽象实体，其中每个组是一个时间序列(因此每个组中的行应该被排序)。但是，不同实体的行是相互独立的。在我们的示例中，实体列将只是城市列。顺便说一下，我们可以有更多的列，因为参数类型应该是一个列表。</li><li id="ed87" class="nh ni it lj b lk nq ln nr lq ns lu nt ly nu mc nm nn no np bi translated"><strong class="lj jd">上下文栏</strong>:这些栏提供关于时间序列实体的信息，不会随时间而改变。换句话说，上下文列在组中应该是恒定的。在我们的示例中，<em class="me">测量设备</em>和<em class="me">，其中</em>是上下文列。</li><li id="8f97" class="nh ni it lj b lk nq ln nr lq ns lu nt ly nu mc nm nn no np bi translated"><strong class="lj jd">数据列</strong>:不属于上述类别的任何其他列都将被视为数据列。PAR类没有用于分配数据列的参数。因此，未列在前面三个类别中的其余列将自动被视为数据列。在我们的例子中，<em class="me">噪声</em>列是数据列。</li></ol><h1 id="51f0" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">示例代码</h1><h2 id="ca15" class="nv mg it bd mh nw nx dn ml ny nz dp mp lq oa ob mr lu oc od mt ly oe of mv iz bi translated">示例1:单一时间序列(一个实体)</h2><p id="a65f" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">时序的PAR模型在<code class="fe nc nd ne nf b">sdv.timeseries</code>模块的<code class="fe nc nd ne nf b">PAR()</code>类中实现。如果我们想要对单个时间序列数据建模，那么我们只需要将<code class="fe nc nd ne nf b">PAR()</code>类的<code class="fe nc nd ne nf b">sequence_index</code>参数设置为datetime列(说明时间序列顺序的列)。神奇发生在第8-16行！</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c9f88b6433c87b82514a9a351394aa56.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/0*j9jv2ytVO_NHLJIf.png"/></div></figure><h2 id="de9d" class="nv mg it bd mh nw nx dn ml ny nz dp mp lq oa ob mr lu oc od mt ly oe of mv iz bi translated">示例2:具有多个实体的时间序列</h2><p id="3da8" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">SDV能够拥有多个实体，即多个时间序列。在我们的例子中，我们有多个城市的温度测量值。换句话说，每个城市都有一组将被独立处理的测量值。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="og oh l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oj"><img src="../Images/1b181a4bfd4f8e4b67c24a8f46523e24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HxiXROcavYRqzipj.png"/></div></div></figure><p id="39aa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用PAR模型的时间序列建模的详细示例可在<a class="ae md" href="https://sdv.dev/SDV/user_guides/timeseries/par.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="edd5" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">关系数据</h1><p id="7944" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">在您使用<code class="fe nc nd ne nf b">sdv.Metadata()</code>指定数据模式之后，SDV可以通过生成数据来对关系数据集建模。此外，您可以使用库内置函数绘制<a class="ae md" href="https://www.guru99.com/er-diagram-tutorial-dbms.html" rel="noopener ugc nofollow" target="_blank">实体关系(er)图</a>。元数据准备就绪后，可以使用分层建模算法生成新数据。你可以在这里找到更多信息<a class="ae md" href="https://sdv.dev/SDV/user_guides/relational/index.html" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="fc2e" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">单表数据</h1><p id="6b21" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">SDV还可以对单个表数据集进行建模。它使用的统计和深度学习模型是:</p><ul class=""><li id="c6d4" class="nh ni it lj b lk ll ln lo lq nj lu nk ly nl mc ok nn no np bi translated">一个<a class="ae md" href="https://sdv.dev/SDV/user_guides/single_table/gaussian_copula.html#gaussian-copula" rel="noopener ugc nofollow" target="_blank">高斯连接函数</a>用于模拟多元分布，以及</li><li id="4efb" class="nh ni it lj b lk nq ln nr lq ns lu nt ly nu mc ok nn no np bi translated">生成式对抗网络(GAN)对表格数据进行建模(基于论文<a class="ae md" href="https://arxiv.org/abs/1907.00503" rel="noopener ugc nofollow" target="_blank">“使用条件GAN对表格数据进行建模”</a>更多信息请参见<a class="ae md" href="https://sdv.dev/SDV/user_guides/single_table/index.html" rel="noopener ugc nofollow" target="_blank">此处</a>。</li></ul><h1 id="6574" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">基准数据</h1><p id="a6a0" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">SDV库提供了使用<a class="ae md" href="https://github.com/sdv-dev/SDGym" rel="noopener ugc nofollow" target="_blank"> SDGym库</a>对合成数据发生器进行基准测试的能力，以评估合成器的性能。你可以在这里找到更多<a class="ae md" href="https://sdv.dev/SDV/user_guides/benchmarking/single_table.html" rel="noopener ugc nofollow" target="_blank">的信息。</a></p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><h1 id="c852" class="mf mg it bd mh mi os mk ml mm ot mo mp ki ou kj mr kl ov km mt ko ow kp mv mw bi translated">结论</h1><p id="c77a" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">在这篇文章中，我们回顾了SDV图书馆的主要功能，以及它在基于真实数据生成匿名数据集方面的作用。主要特点是建模单表数据，时间序列，关系数据集，以及数据基准。这里要提到的一点是，您需要为SDV模型提供一个大型数据集来进行训练。这样，模型可以生成一个有意义的数据集，真正捕捉真实的过程。试试这个库，让我知道你的想法。</p><p id="a40a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">你可以在这里</em>  <em class="me">找到这篇文章的笔记本</em> <a class="ae md" href="https://github.com/e-alizadeh/medium/blob/master/notebooks/SDV/SDV.ipynb" rel="noopener ugc nofollow" target="_blank"> <em class="me">。</em></a></p><p id="82c7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">感谢阅读！</p><p id="ce09" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">如果你喜欢这个帖子，你可以</em> <a class="ae md" href="https://www.ealizadeh.com/subscribe/" rel="noopener ugc nofollow" target="_blank"> <em class="me">在这里加入我的邮件列表</em> </a> <em class="me">来接收更多关于数据科学、机器学习、统计以及有趣的Python库和技巧&amp;技巧的帖子。也可以在我的</em> <a class="ae md" href="https://ealizadeh.com/" rel="noopener ugc nofollow" target="_blank"> <em class="me">网站</em> </a> <em class="me">、</em> <a class="ae md" href="https://medium.com/@ealizadeh" rel="noopener"> <em class="me">中</em> </a> <em class="me">，或者</em><a class="ae md" href="https://www.linkedin.com/in/alizadehesmaeil/" rel="noopener ugc nofollow" target="_blank"><em class="me">LinkedIn</em></a><em class="me">关注我。</em></p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><h1 id="048d" class="mf mg it bd mh mi os mk ml mm ot mo mp ki ou kj mr kl ov km mt ko ow kp mv mw bi translated">参考</h1><p id="65c1" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">[1]徐磊，<a class="ae md" href="https://dai.lids.mit.edu/wp-content/uploads/2020/02/Lei_SMThesis_neo.pdf" rel="noopener ugc nofollow" target="_blank">利用条件GAN综合表格数据</a>，(2020)，麻省理工学院硕士论文</p><p id="c037" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">[2] N. Patki <em class="me">等人</em>，<a class="ae md" href="https://dai.lids.mit.edu/wp-content/uploads/2018/03/SDV.pdf" rel="noopener ugc nofollow" target="_blank">合成数据仓库</a> (2016)，数据科学和高级分析国际会议(DSAA-16)</p><p id="be03" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">[3]麻省理工学院新闻，<a class="ae md" href="https://news.mit.edu/2020/real-promise-synthetic-data-1016" rel="noopener ugc nofollow" target="_blank">合成数据的真正前景</a> (Ocotber 16，2020)</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="e143" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="me">最初发表于</em><a class="ae md" href="https://www.ealizadeh.com/blog/sdv-library-for-modeling-datasets/" rel="noopener ugc nofollow" target="_blank"><em class="me">https://www.ealizadeh.com</em></a></p></div></div>    
</body>
</html>