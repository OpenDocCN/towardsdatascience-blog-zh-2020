<html>
<head>
<title>10 Pandas Tricks to Make My Data Analyzing Process More Efficient: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我的数据分析过程更高效的10个熊猫窍门:第二部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/10-pandas-tricks-to-make-my-data-analyzing-process-more-efficient-part-2-b72ea43a0bb5?source=collection_archive---------13-----------------------#2020-10-05">https://towardsdatascience.com/10-pandas-tricks-to-make-my-data-analyzing-process-more-efficient-part-2-b72ea43a0bb5?source=collection_archive---------13-----------------------#2020-10-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e6ff" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我希望我早点知道的技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/023ca0a65771855579e079980f6d3503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SRtpLdtozsjsrG37"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@max_duz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2c4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Pandas </strong>可能是Python中最重要的数据分析库，它就像Python中的Excel。在这篇文章中，我想分享10个熊猫的技巧，我希望我作为一个初学者早点知道。你可以在这里查看文章的第一部分:</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/10-pandas-tricks-to-make-my-data-analyzing-process-more-efficient-part-1-78a0cc1636f3"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">让我的数据分析过程更高效的10个熊猫窍门:第1部分</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">我希望我早点知道的技巧</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="72c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将用我以前的文章作为例子，它探讨了新冠肺炎期间的空中交通。数据集包含7个独立的cvs文件，包含7个月的飞行数据。每个文件大约有200万行数据。你可以在这里查看原始数据集<a class="ae ky" href="https://traffic-viz.github.io/scenarios/covid19.html" rel="noopener ugc nofollow" target="_blank">。</a></p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/visualization-of-air-traffic-during-covid-19-pandemic-c5941b049401"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">新冠肺炎疫情期间空中交通的可视化</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">2020年全球航班数据的探索性数据分析</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><h1 id="2cb6" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">地图</h1><p id="0883" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe nl nm nn no b">map()</code>是一个有用的函数，可以用其他值替换序列中的值。</p><p id="69d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们有一系列机场代码名称，并且我们希望用全名来替换它们，我们可以使用<code class="fe nl nm nn no b">map</code>来完成这项工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/0bd385dca7460fc5c99a0dc36b47734b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q94mbw4Py3qJJZ52tVsLzA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/8f5c3c391c62992d4d9a7a048011a12a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-LF-FdWCb2PoTX1VNq4hQ.png"/></div></div></figure><p id="9339" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nl nm nn no b">replace()</code>也是做这项工作的一个选择。</p><p id="eafe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nl nm nn no b">map()</code>也可以拿功能举例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/c16217fdd5837f0562b796d5693fa20a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pGEGUqM0l3SfwXXkIQIMg.png"/></div></div></figure><h1 id="d59b" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">应用</h1><p id="f6b5" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe nl nm nn no b">apply()</code>是一个将函数应用于数据帧或序列的函数。</p><p id="a19f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们有一个数据框架:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/9a9a1b9eaa38e663d4b374b092f30a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKv7UuVJV7VH-aRDZSNGJw.png"/></div></div></figure><p id="36cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以对数据帧应用一个函数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/bf6ac39fe8c0962924ba349e3c86cd67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLo-9hD8jZ7FJ9orVtVPwQ.png"/></div></div></figure><p id="5ab8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以通过设置<code class="fe nl nm nn no b">axis=0</code>来进行列方式的计算</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/a746488d33a2cc78fa59ba3d6da4887f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Y9Nrkr2ouwuu73hNDFZyQ.png"/></div></div></figure><p id="0886" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并按<code class="fe nl nm nn no b">axis=1</code>行</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/a1b3a4807da846ce884c64e4f59518c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oNL_7Qkf6IgUlxCzbICdbA.png"/></div></div></figure><p id="d207" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以按不同的列进行计算</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/444272361caa30cda05134c31baab578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0LPk4HY4wjeHFr674roJw.png"/></div></div></figure><h1 id="0936" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">询问</h1><p id="2749" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe nl nm nn no b">query()</code>用于搜索和过滤符合您想要的特定条件的行。</p><p id="fe9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们有一个包含航班信息的数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/67ff6d29d470595d6205f355a661e7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L-MNn0RadM6oc0aIHVJrAA.png"/></div></div></figure><p id="6f9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们只想查看来自阿姆斯特丹的航班，可以使用<code class="fe nl nm nn no b">query()</code>进行搜索。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/daff2f8b082ae31c24bffa1d8f8e719e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3vqt2w2S_ygdPvzMcPpUg.png"/></div></div></figure><p id="6d13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要搜索多个机场，您可以将它们放在一个列表中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/ee668a19a41df15c976a6a23a9d6b82e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFeYlZEOz4iYlL7OKaTJjw.png"/></div></div></figure><p id="544b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可能有多个条件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/7ef5aa8e8ebce79b5e23e340fe395bfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cznR-XLTPfFmSAAy8CTYNg.png"/></div></div></figure><h1 id="13cd" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">分组依据</h1><p id="f081" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe nl nm nn no b">groupby()</code>是通过对数据分组来探索数据集的强大工具。</p><p id="360b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再以飞行数据帧为例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/fc1df1373f66e220ffe6ac7c674eb94d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUSRY46p3vzSeSSa7iTfTg.png"/></div></div></figure><p id="4f7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nl nm nn no b">groupby</code>来查看每天的航班数量</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/503655123bb8824adfeecb63165dbc4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zc1GfFJewSAthpY386kgpA.png"/></div></div></figure><p id="9f93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以对数字列进行一些计算，例如<code class="fe nl nm nn no b">mean()</code>(这里没有意义)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/c8e7f674c33dd6befd70d910a69ef938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2-GmYjHJc80X5SPRfEFTw.png"/></div></div></figure><p id="39b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nl nm nn no b">agg()</code>对不同的列进行不同的操作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/184f26bc2f95f57e0848fba352dbf561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G-LUK0qX71zzz-S7uOLOiw.png"/></div></div></figure><p id="d90b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以按多个组进行分组:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/18dd83f824eb9a8114ebbcb3f60170d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*omDW2nuAxDaYQ7yqVKxwJg.png"/></div></div></figure><p id="6469" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结合<code class="fe nl nm nn no b">concat()</code>、<code class="fe nl nm nn no b">query()</code>和<code class="fe nl nm nn no b">groupby()</code>，很容易看到不同机场每天的航班数量:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/42d3de3f39b1752d056b496347ee0c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6yeSsNHzhtUmhsf8UwQfAw.png"/></div></div></figure><h1 id="c17c" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">切割()</h1><p id="ddcf" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe nl nm nn no b">cut()</code>用于bin连续值。例如，如果我有一个包含几个数字的列表。</p><pre class="kj kk kl km gt oh no oi oj aw ok bi"><span id="fd84" class="ol mp it no b gy om on l oo op">df=pd.DataFrame({'A':[1,2,4,6,7,2,9,2,1,6,8,9,3,4,6,9,6,3,1,2,4,6,8]})</span></pre><p id="5d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe nl nm nn no b">cut()</code>来绑定这些值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/373784b80afa2e01ee14dfaa4694118b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4rxvk1Hp5a-bB6OPg4Tz8Q.png"/></div></div></figure><p id="47a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以给箱子分配标签:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/2b4380da045095512215336dd4164fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sxi-CflZS5QPdL7QGyliNQ.png"/></div></div></figure><p id="7b35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用<code class="fe nl nm nn no b">qcut()</code>将变量离散成大小相等的桶</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/3706d9a3fadbfb7f1a220614f33ca898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xzf4zb-L_RJLwy9vqgKV-g.png"/></div></div></figure></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="563e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样。感谢阅读。欢迎评论和建议。</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="dffa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有兴趣可以看看我关于Python和Numpy的文章。</p><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/7-python-tricks-to-make-my-code-better-and-smarter-60dfde0b6c49"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">让我的代码更好更聪明的7个Python技巧。</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">我希望我能早点知道的技巧。</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="oz l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a rel="noopener follow" target="_blank" href="/7-numpy-tricks-to-make-my-code-better-and-smarter-9e8a4ccf43d1"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">让我的代码更好更聪明的7个小技巧</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">我希望我早点知道的技巧</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">towardsdatascience.com</p></div></div><div class="mh l"><div class="pa l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>