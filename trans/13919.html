<html>
<head>
<title>Cloud APIs For a Rainy Day</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">未雨绸缪的云API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/cloud-apis-for-a-rainy-day-f4f06468346?source=collection_archive---------41-----------------------#2020-09-24">https://towardsdatascience.com/cloud-apis-for-a-rainy-day-f4f06468346?source=collection_archive---------41-----------------------#2020-09-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f132" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Wolfram语言编写、部署和共享计算从未如此简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/29c1e701532f32c8fcc67ec53c65fd41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yPtsPGbUN7b4PdNxbhIgYw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼克·舍尔巴特在<a class="ae ky" href="https://unsplash.com/s/photos/rain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ab5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很久以前，我有幸徒步旅行到爱尔兰西部，靠近戈尔韦，穿过康尼马拉国家公园。景色非常壮观，但真正吸引我注意的是不断变化的天气模式。在一天的徒步旅行中，出现多次晴雨循环并不罕见，很多天还会出现午后彩虹。</p><p id="4432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">位于大西洋附近，一股来自墨西哥湾和加勒比海的暖流。这使得爱尔兰的气候比基于纬度的预期要温和，也限制了全年的极端温度波动。但是爱尔兰经常下雨。</p><p id="4af0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了了解爱尔兰的降雨量，我访问了爱尔兰气象局的网站。他们提供当前的天气信息和历史数据。从历史数据页面，我下载了一个包含1850年至2010年时间序列数据的<a class="ae ky" href="https://www.met.ie/climate/available-data/long-term-data-sets" rel="noopener ugc nofollow" target="_blank">数据集。该数据集包括爱尔兰全国25个气象站的降雨量。</a></p><p id="7bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个故事中，我将讨论如何使用这些数据并创建一个可调用的API来可视化这些数据。</p><p id="6d5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个工作站都有自己的CSV文件。这是戈尔韦大学学院电视台的一个样本:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/f8ff7c52988ab62fd9251a66afff49a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umcsxqbIHwOxwjoiUKWaHA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="9beb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个原始数据最好用Wolfram语言中的一个<a class="ae ky" href="https://reference.wolfram.com/language/ref/TimeSeries.html" rel="noopener ugc nofollow" target="_blank"> TimeSeries </a>对象来表示。我们从<strong class="lb iu"> cvs </strong>表达式中获取数据字段，用<strong class="lb iu"> DateRange </strong>生成每月日期，并构造<strong class="lb iu">时间序列</strong>(快速注意:在本文结尾提供了一个包含完整代码的笔记本):</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="2c13" class="mb mc it lx b gy md me l mf mg">rain = Flatten[csv[[4 ;;, 2 ;;]]];</span><span id="f096" class="mb mc it lx b gy mh me l mf mg">dates = DateRange[<br/> DateObject[{1850, 1}, "Month"],<br/> DateObject[{2010, 12}, "Month"]];</span><span id="d177" class="mb mc it lx b gy mh me l mf mg">ts = TimeSeries[Thread[{dates, rain}]]</span></pre><p id="aede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这个时间序列对象，我们可以创建一个可视化函数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/1385c5e1aadd61307daae995b61878b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZygLvbbSpYY2bu285vuig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="788b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得我们可以绘制任何时间范围的图，例如，20世纪50年代:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/b7be71c2840ffc9d942bb0a953d257a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_nDBG1oGO7qUksPjM5BkJg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="d9f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，将该功能部署为API是非常容易的。我们定义了一个<a class="ae ky" href="https://reference.wolfram.com/language/ref/APIFunction.html" rel="noopener ugc nofollow" target="_blank"> APIFunction </a>，它定义了URL参数和函数参数之间的联系:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="4a41" class="mb mc it lx b gy md me l mf mg">api = APIFunction[{<br/> "y1" -&gt; "Integer", "m1" -&gt; "Integer", <br/> "y2" -&gt; "Integer", "m2" -&gt; "Integer"},<br/> ExportForm[GalwayRainPlot[{#y1, #m1}, {#y2, #m2}], "PNG"] &amp;<br/>];</span></pre><p id="a296" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们使用<a class="ae ky" href="https://reference.wolfram.com/language/ref/CloudDeploy.html" rel="noopener ugc nofollow" target="_blank"> CloudDeploy </a>将这个APIFunction部署到一个CloudObject:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="9f2a" class="mb mc it lx b gy md me l mf mg">CloudDeploy[api, CloudObject["GalwayRainPlot.api"], Permissions -&gt; "Public"]</span></pre><p id="ea33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，API是公开可用的。您可以更改权限设置，使您的API更加私密。这里有一个<a class="ae ky" href="https://www.wolframcloud.com/obj/arnoudb/GalwayRainPlot.api?y1=1950&amp;m1=1&amp;y2=1959&amp;m2=12" rel="noopener ugc nofollow" target="_blank">的例子，称之为20世纪60年代高威降雨量的API</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/1e14cf89a5510cd898fff9337d81ba84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mSfxPd7rcvJv6Rw4hi_LkA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="3630" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，你可以按照这个工作流程，与云中的其他人共享任何计算。只用几行代码就可以将任何计算部署到Wolfram云的概念非常强大。有关更多信息，请查看以下指南页面:</p><div class="ml mm gp gr mn mo"><a href="https://reference.wolfram.com/language/guide/CreatingAnInstantAPI.html" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">创建即时API-Wolfram语言文档</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">Wolfram语言具有在web和其他地方创建和部署API的内置功能…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">reference.wolfram.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ks mo"/></div></div></a></div><p id="e093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至于在爱尔兰徒步旅行，我希望有一天能再去一次。但是如果你打算去，一定要带一件雨衣和多一双干袜子！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/422cd4a91e6ae7d277e383b8f9565a66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2KVcDUKckzIqi9O1oe_16Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由康纳无法无天——【https://www.flickr.com/photos/conchur/28657824895/】T4，CC由2.0，<a class="ae ky" href="https://commons.wikimedia.org/w/index.php?curid=86922866" rel="noopener ugc nofollow" target="_blank">https://commons.wikimedia.org/w/index.php?curid=86922866</a></p></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="d313" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这款笔记本的完整代码可从以下网址获得:</p><div class="ml mm gp gr mn mo"><a href="https://www.wolframcloud.com/obj/arnoudb/Published/GalwayRainPlot-01.nb" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">戈尔韦雨图</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">用Wolfram语言进行计算思维</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">www.wolframcloud.com</p></div></div><div class="mx l"><div class="nl l mz na nb mx nc ks mo"/></div></div></a></div></div></div>    
</body>
</html>