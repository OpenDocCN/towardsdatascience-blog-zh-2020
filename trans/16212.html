<html>
<head>
<title>Using ObservableHQ in JavaScript with your own data.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中使用ObservableHQ处理您自己的数据。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5?source=collection_archive---------13-----------------------#2020-11-08">https://towardsdatascience.com/using-an-observablehq-plot-in-javascript-with-your-own-data-5eabeb6224f5?source=collection_archive---------13-----------------------#2020-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2313" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用自定义数据和极少的编码知识定制数据可视化。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e857a170e23dd9ad3628f6d96283c109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SDVLjDHMezdqp4dVQC48w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">World Delaunay —代码输出示例:D. Ellis</p></figure><h1 id="a0d7" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">介绍</h1><p id="ec2b" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">大多数人都在努力学习一门新的编程语言并立即使用它。那么，当你看到一个很酷的网络可视化，并想为它改编代码时会发生什么呢——提示:这就是<a class="ae mm" href="https://observablehq.com/explore" rel="noopener ugc nofollow" target="_blank"> ObservableHQ </a>的用武之地。</p><p id="741f" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">Observable notebooks允许用户使用现有代码，只调整他们感兴趣的参数，并根据他们的特定需求定制可视化。这篇文章旨在描述一个过程，在这个过程中，你可以从众多可观察到的可视化中选择一个，应用你自己的数据，并把它们放在你自己的网站上。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="24fb" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">可视化代码</h1><p id="618b" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在本教程中，我们将使用一个改编版本的迈克Bostocks世界机场德劳内图；</p><div class="ne nf gp gr ng nh"><a href="https://observablehq.com/@wolfiex/pyobservable-example" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">p可观察的示例</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">可观察的示例Fork:世界机场Delaunay Ref。@fil/geo-delaunay Ref。jasondavies.com/maps/voronoi/airports</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">observablehq.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ks nh"/></div></div></a></div><p id="d1b6" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">并将其加载到网页中。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="afd7" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">可观察的API</h2><p id="b80a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">方便的是，ObservableHQ的优秀人员提供了一个用户友好的API，我们可以利用它——让我们不必手动复制任何代码。首先，我们可以使用以下脚本替换相关的可观察用户和笔记本名称。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="91bb" class="nw kz it oj b gy on oo l op oq">&lt;!DOCTYPE html&gt;<br/>&lt;body&gt;<br/>&lt;script type="module"&gt;</span><span id="7d46" class="nw kz it oj b gy or oo l op oq">var user = '<strong class="oj iu">wolfiex</strong>' // our username<br/>var nbk = '<strong class="oj iu">pyobservable-example</strong>' // our notebook name</span><span id="5ace" class="nw kz it oj b gy or oo l op oq">async function run(){</span><span id="9ad2" class="nw kz it oj b gy or oo l op oq">const apistr = `<a class="ae mm" href="https://api.observablehq.com/@${user}/${nbk}.js?v=3`" rel="noopener ugc nofollow" target="_blank">https://api.observablehq.com/@${user}/${nbk}.js?v=3`</a><br/>    const notebook = await import(apistr);<br/>    const define = notebook.default}</span><span id="5b8d" class="nw kz it oj b gy or oo l op oq">run()</span><span id="e220" class="nw kz it oj b gy or oo l op oq">&lt;/script&gt;</span></pre><p id="7155" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="os">注意:可以用</em> <code class="fe ot ou ov oj b"><em class="os">import define from 'https://api.observablehq.com/@wolfiex/pyobservable-example.js?v=3'</em></code> <em class="os">一步完成，或者下载笔记本和</em> <code class="fe ot ou ov oj b"><em class="os">'./mynotebook.js'</em></code> <em class="os">代替网址。</em></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="886a" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">可观察运行时模块</h2><p id="cf55" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们需要做的最后一件事是导入运行时模块，它将用于运行我们的可观察脚本。这里我们补充一下</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="91f4" class="nw kz it oj b gy on oo l op oq">import {Runtime, Inspector} from "<a class="ae mm" href="https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js</a>";</span></pre><p id="764e" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">到脚本的顶部</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="a374" class="nw kz it oj b gy on oo l op oq">new Runtime().module(define, Inspector.into(document.body))</span></pre><p id="6027" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">在我们定义了<code class="fe ot ou ov oj b">define</code>之后，在run函数内。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="3cf3" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">显示输出</h2><p id="ccfe" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">要查看输出，我们可以将代码上传到在线平台(例如<a class="ae mm" href="https://pages.github.com" rel="noopener ugc nofollow" target="_blank"> github.io </a>)或运行本地服务器。后者可以通过使用node、electron或python(如果你安装了的话)来完成。</p><p id="a6a1" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">如果使用python，您可以启动一个简单的服务器并导航到本地主机URL地址<code class="fe ot ou ov oj b">127.0.0.1:8000</code>。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="2717" class="nw kz it oj b gy on oo l op oq">python -m SimpleHTTPServer 8000</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="eb02" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">选择我们希望显示的内容</h1><p id="92de" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">到目前为止，我们已经嵌入了可观察笔记本的所有单元，产生了下面这个笨拙的例子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/f6d0760cf2d2f1299e719c1d7db1f2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xOyfc_Qm3EG43T6zvUeeWA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">整本笔记本的杂乱进口</p></figure><p id="25e2" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><a class="ae mm" href="https://wolfiex.github.io/ObservableTutorial/base_import.html" rel="noopener ugc nofollow" target="_blank"><em class="os">https://wolfiex . github . io/observable tutorial/base _ import . html</em></a></p><p id="f0ee" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">这里为了便于展示，我们只希望显示图像<code class="fe ot ou ov oj b">"chart"</code>和滑块<code class="fe ot ou ov oj b">"rotate"</code>。为此，我们在运行函数中修改了<code class="fe ot ou ov oj b">new Runtime</code>命令。</p><h2 id="94ee" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">仅嵌入图表</h2><p id="b05d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们首先只显示“图表”本身。这是通过用下面的代码片段替换运行时代码来实现的。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="c26c" class="nw kz it oj b gy on oo l op oq">new Runtime().module(define, name =&gt; {<br/>    if (name === "chart"){return Inspector.into(document.body)()}<br/>  });</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="e707" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">将元素添加到特定位置</h2><p id="354c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">工业中可视化的许多应用依赖于仪表板的创建。在这里，一个页面被分成许多部分，每个部分代表不同的信息。在本例中，我们首先创建一个新的div元素，并将其放在<code class="fe ot ou ov oj b">&lt;body&gt;</code>标签下面(脚本中是<strong class="ls iu">而不是</strong>)。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="7c61" class="nw kz it oj b gy on oo l op oq">&lt;div id='<strong class="oj iu">topmost</strong>' style='position:absolute;display:block'&gt;&lt;/div&gt;</span></pre><p id="765d" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">这里的样式告诉它，它可以占据整个屏幕，并坐在其他DOM元素的前面。默认情况下，这将在左侧。</p><p id="dddd" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">我们现在更新运行时代码，以包括旋转滑块<code class="fe ot ou ov oj b">(viewof rotate)</code>。为了可读性，我们用一个<code class="fe ot ou ov oj b">switch</code>语句代替多个<code class="fe ot ou ov oj b">if</code>语句。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="bd7b" class="nw kz it oj b gy on oo l op oq">new Runtime().module(define, name =&gt; {<br/>    switch(name){<br/>      case "chart": return Inspector.into(document.body)();<br/>      case "viewof rotate": return Inspector.into(<strong class="oj iu">document.getElementById('topmost')</strong>)();<br/>    }<br/>  });</span></pre><p id="e6f8" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">这里<code class="fe ot ou ov oj b">viewof rotate</code>被放置在带有<code class="fe ot ou ov oj b">id = 'topmost'</code>的元素内，而不是主体内。这会产生下面的输出，其中我们的滑块不再显示在图表下方。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/4d449464369a423287dbfa337850733a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*AcvnysQUrYBUAMaIDoAIag.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对象选择输出</p></figure><p id="1c24" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><a class="ae mm" href="https://wolfiex.github.io/ObservableTutorial/selected_display.html" rel="noopener ugc nofollow" target="_blank"><em class="os">https://wolfiex . github . io/observable tutorial/selected _ display . html</em></a></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ddd2" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">更改单元格值和数据</h1><p id="d7be" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们已经获得了一组可视化效果，并将它们放在我们的网页上——但是我们如何改变它们的输入来匹配我们自己的数据呢？</p><p id="084d" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">在分叉笔记本时，我们最初在准备本教程时做了一些更改。其中之一是引入一个<code class="fe ot ou ov oj b">fillcolour</code>单元来确定每个圆圈的颜色。我们从探索如何改变这一点开始，然后继续提供额外的数据。</p><h2 id="c52f" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">改变变量值(如颜色)</h2><p id="fed4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们首先将新的运行时命令分配给一个变量名—我们将把它命名为<code class="fe ot ou ov oj b">main</code>:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="db8e" class="nw kz it oj b gy on oo l op oq"><strong class="oj iu">const main =</strong> new Runtime().module(define, name =&gt; {<br/>        switch(name){<br/>          case "chart": return Inspector.into(document.body)();<br/>          case "viewof rotate": return Inspector.into(document.getElementById('topmost'))();<br/>        }<br/>      });</span></pre><p id="3131" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">我们现在可以使用以下代码更改<code class="fe ot ou ov oj b">fillcolour</code>变量的值:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b95d" class="nw kz it oj b gy on oo l op oq">main.redefine("<strong class="oj iu">fillcolour</strong>", 'red');</span></pre></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="956d" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">为绘图提供新数据</h2><p id="0b90" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">目前，用于绘图的数据已经上传到ObservableHQ服务器。相反，我们可能希望在观想中使用我们自己的数据。在下面的示例中，我们已经在本地下载了<code class="fe ot ou ov oj b">airports.csv</code>文件(参见points单元格中的URL ),并将在更新图表输出之前读入并编辑它。</p><p id="cc74" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">为了简单起见，我们使用<a class="ae mm" href="https://d3js.org" rel="noopener ugc nofollow" target="_blank">数据驱动文档(d3) </a>库来读取CSV文件。</p><p id="34b0" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><em class="os">这已经在笔记本中使用，因此可以在代码的运行时段中提取。或者，可以用下面的脚本导入:</em></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="1e1b" class="nw kz it oj b gy on oo l op oq">&lt;script src="https://d3js.org/d3.v6.min.js"&gt;&lt;/script&gt;</span></pre><p id="c679" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">我们现在能够加载文件并更新笔记本的点单元。为此，我们定义了一个“解析”函数来处理从CSV读取的数据。</p><p id="0dcf" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">为了区分数据集，我们还向经度添加了一个随机分量，并在使用<code class="fe ot ou ov oj b">main.redefine</code>函数将处理后的数据推入<code class="fe ot ou ov oj b">points</code>之前取70%的纬度值。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="fab1" class="nw kz it oj b gy on oo l op oq">function <strong class="oj iu">parsedata</strong>(data){</span><span id="c498" class="nw kz it oj b gy or oo l op oq">        //convert to numerical and add randomness<br/>        data = data.map(({ longitude, latitude })=&gt;<br/>        [+longitude<strong class="oj iu">+Math.random()</strong>, +<strong class="oj iu">latitude*.7</strong>])<br/>        <br/>        // update points cell<br/>        <strong class="oj iu">main.redefine("points", data );</strong><br/>    }</span></pre><p id="6e39" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">和任何好的代码一样，我们实际上需要运行它。这可以通过以下方式实现:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="635c" class="nw kz it oj b gy on oo l op oq">d3.csv("./airports.csv").then(<strong class="oj iu">parsedata</strong>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/d104fb12256a662594956e8113311e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*t47JEKZeM3QEgBnx3RS9eg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">编辑/自定义单元格值和数据</p></figure><p id="2d9b" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated"><a class="ae mm" href="https://wolfiex.github.io/ObservableTutorial/local_data.html" rel="noopener ugc nofollow" target="_blank"><em class="os">https://wolf iex . github . io/observable tutorial/local _ data . html</em></a></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ae3e" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">读取变量</h1><p id="fe4c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">有时，我们感兴趣的只是在计算/模拟过程中，每次可变变量发生变化时提取它的值。在这里，我们可以返回一些函数，而不是返回一个元素进行显示:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="80d3" class="nw kz it oj b gy on oo l op oq">case 'my_mutable_varname':<br/>return {<br/>    <strong class="oj iu">fulfilled</strong>(value) { console.log(name, value); },<br/>    <strong class="oj iu">rejected</strong>(error) { console.error(error); }<br/>  };</span></pre><p id="f464" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">其中，上述每个功能的定义如下:</p><ul class=""><li id="b872" class="oz pa it ls b lt mn lw mo lz pb md pc mh pd ml pe pf pg ph bi translated"><em class="os">观察者</em>。<strong class="ls iu">完成</strong> ( <em class="os">值</em>)，其中值是每次执行后的结果</li><li id="9fb3" class="oz pa it ls b lt pi lw pj lz pk md pl mh pm ml pe pf pg ph bi translated"><em class="os">观察者</em>。<strong class="ls iu">如果评估失败，则拒绝</strong> ( <em class="os">错误</em>)返回<em class="os">错误</em>。</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="e6d1" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">添加新的样式或变化</h1><p id="fc63" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在本节中，我们希望应用尚未在可观察笔记本中定义的样式。例如，如果想要将旋转滑块移动到右侧，我可以从在HTML页面中定义一个CSS部分开始:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="bc33" class="nw kz it oj b gy on oo l op oq">&lt;style&gt;<br/>    .right{<br/>        float:right<br/>    }<br/>&lt;/style&gt;</span></pre><p id="e5e0" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">接下来，我们需要告诉导入的元素它属于这个类。为此，我们将开关中的Inspector语句更改如下。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b00b" class="nw kz it oj b gy on oo l op oq"><em class="os">const main = new Runtime().module(define, name =&gt; {<br/>        switch(name){<br/>          case "chart": return Inspector.into(document.body)();</em></span><span id="2d86" class="nw kz it oj b gy or oo l op oq"><em class="os">          case "viewof rotate": </em></span><span id="b153" class="nw kz it oj b gy or oo l op oq">              var <strong class="oj iu">item</strong> = Inspector.into( document.getElementById('topmost'))();<em class="os"><br/>              </em><strong class="oj iu">item._node.className += ' right';<br/></strong>              return <strong class="oj iu">item</strong>;<em class="os"><br/>        }<br/>      });</em></span></pre><p id="a27a" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">在这里，我们分解了inspector返回的元素，并且可以完全访问它的所有属性。虽然我们可以通过<code class="fe ot ou ov oj b">item._node.style</code>直接访问样式组件，如果我们有多个变更，或者希望将相同的变更应用于许多项目，但是定义一个类通常更容易。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="24e5" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">结论</h1><p id="50d2" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这是一个完全实时的可观察笔记本，我们把它改编成了我们自己的网页。</p><p id="2a92" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">在本教程中，我们制作了一个我们感兴趣的可视化副本，然后将其嵌入到个人网站中，并更改了其中的变量/数据。</p><p id="af6d" class="pw-post-body-paragraph lq lr it ls b lt mn ju lv lw mo jx ly lz mp mb mc md mq mf mg mh mr mj mk ml im bi translated">有关observable notebooks或javascript的更多信息，请查看文档中的信息部分:</p><div class="ne nf gp gr ng nh"><a href="https://observablehq.com/collection/@observablehq/observable-documentation" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">证明文件</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">浏览和可视化数据。分享和发表你的见解。发现并获得灵感。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">observablehq.com</p></div></div><div class="nq l"><div class="pn l ns nt nu nq nv ks nh"/></div></div></a></div></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ca2d" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">代码库</h1><p id="6659" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">每个示例使用的代码可以在下面的链接中找到。这可以使用node(如果安装的话)使用<code class="fe ot ou ov oj b">npm i;npm start</code>运行，或者使用本文中的GitHub链接查看。</p><div class="ne nf gp gr ng nh"><a href="https://github.com/wolfiex/ObservableTutorial/blob/main/base_import.html" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">wolf iex/observable教程</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">描述如何将一个可观察的笔记本嵌入到网页中的medium文章的材料/ …</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="po l ns nt nu nq nv ks nh"/></div></div></a></div><h2 id="9423" class="nw kz it bd la nx ny dn le nz oa dp li lz ob oc lk md od oe lm mh of og lo oh bi translated">资源:</h2><div class="ne nf gp gr ng nh"><a href="https://observablehq.com/@observablehq/downloading-and-embedding-notebooks" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">高级嵌入和下载</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">笔记本是一个可移植的模块，可以集成应用程序的数据和用户界面。插图:剪贴画等…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">observablehq.com</p></div></div><div class="nq l"><div class="pp l ns nt nu nq nv ks nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://github.com/observablehq/runtime" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">可观察总部/运行时间</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">Observable runtime让您可以在任何JavaScript环境中运行Observable notebooks作为真正的反应式程序</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="pq l ns nt nu nq nv ks nh"/></div></div></a></div></div></div>    
</body>
</html>