<html>
<head>
<title>Tensorflow Best Practises: Named Inputs and Outputs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Tensorflow最佳实践:命名输入和输出</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tensorflow-best-practises-named-inputs-and-outputs-ed80c45eebd4?source=collection_archive---------21-----------------------#2020-09-25">https://towardsdatascience.com/tensorflow-best-practises-named-inputs-and-outputs-ed80c45eebd4?source=collection_archive---------21-----------------------#2020-09-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0453" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">根据位置索引和输入值排序退出。开始依赖指定的输入和输出。避免数据布线错误</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bdb142ba393c094a311886a8502438f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*reQ1p_RujtcjHVcheeCuAQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://pixabay.com/photos/fiber-cable-wire-connection-4814456/" rel="noopener ugc nofollow" target="_blank">图片来自Pixabay </a></p></figure><blockquote class="kz"><p id="408e" class="la lb it bd lc ld le lf lg lh li lj dk translated"><strong class="ak">命名输入和输出本质上是带有字符串关键字和张量值的字典</strong>。</p></blockquote><h1 id="0eea" class="lk ll it bd lm ln lo lp lq lr ls lt lu jz lv ka lw kc lx kd ly kf lz kg ma mb bi translated">利益</h1><ol class=""><li id="6e8e" class="mc md it me b mf mg mh mi mj mk ml mm mn mo lj mp mq mr ms bi translated">防止特征重新排序</li><li id="0a3f" class="mc md it me b mf mt mh mu mj mv ml mw mn mx lj mp mq mr ms bi translated">提供签名和元数据的自给自足模型</li><li id="a550" class="mc md it me b mf mt mh mu mj mv ml mw mn mx lj mp mq mr ms bi translated">重命名和缺少功能保护</li></ol></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="b511" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated">大多数机器学习管道从结构化源(数据库、CSV文件/ Pandas数据帧、TF记录)读取数据，执行特征选择、清理(以及可能的)预处理，将原始多维数组(张量)与表示每个输入样本的正确预测的另一个张量一起传递给模型。</p><p id="dc8a" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated"><em class="nu">在生产中重新排序或重命名输入特征？</em> → <strong class="me iu">无效结果或客户端生产中断</strong></p><p id="c77a" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated"><em class="nu">缺项特征？缺失数据？产值解读不好？误混整数索引？</em> → <strong class="me iu">无效结果或客户端生产中断</strong></p><p id="f6b8" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated"><em class="nu">想知道训练时使用了哪些特征列，以便为推理提供相同的特征列？</em> → <strong class="me iu">你不能——曲解错误</strong></p><p id="e8d8" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated"><em class="nu">想知道输出值代表什么值？</em> → <strong class="me iu">你不能——曲解错误</strong></p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="1011" class="lk ll it bd lm ln nv lp lq lr nw lt lu jz nx ka lw kc ny kd ly kf nz kg ma mb bi translated">不要在模型输入层上删除列名。</h1><p id="1b9c" class="pw-post-body-paragraph nf ng it me b mf mg ju ni mh mi jx nk mj oa nm nn ml ob np nq mn oc ns nt lj im bi translated">默认情况下，<code class="fe od oe of og b">tf.data.Dataset</code>已经允许您这样做，将输入视为一个字典。</p><p id="2b41" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated">这些年来，上述问题变得更容易处理了。以下是Tensorflow <code class="fe od oe of og b">2.x</code>生态系统中可用解决方案的简要概述。</p><ul class=""><li id="1855" class="mc md it me b mf nh mh nj mj oh ml oi mn oj lj ok mq mr ms bi translated"><a class="ae ky" href="https://www.tensorflow.org/tutorials/load_data/tfrecord" rel="noopener ugc nofollow" target="_blank"> tfRecords和TF。示例</a>无疑是用于任何规模深度学习项目的最佳数据格式。默认情况下，每个功能都以<strong class="me iu">命名。</strong></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><ul class=""><li id="5757" class="mc md it me b mf nh mh nj mj oh ml oi mn oj lj ok mq mr ms bi translated"><a class="ae ky" href="https://www.tensorflow.org/tfx/tutorials/transform/simple" rel="noopener ugc nofollow" target="_blank"> Tensorflow Transform </a>使用指定的输入并产生指定的输出，鼓励你对你的模型做同样的事情。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><ul class=""><li id="2b28" class="mc md it me b mf nh mh nj mj oh ml oi mn oj lj ok mq mr ms bi translated">Keras支持图层字典作为输入*和*输出</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">添加多种尺寸的特征很简单:只需为window_size添加另一个参数，或者将特征形状与特征名称一起传递。</p></figure><ul class=""><li id="6298" class="mc md it me b mf nh mh nj mj oh ml oi mn oj lj ok mq mr ms bi translated"><a class="ae ky" href="https://datascience.stackexchange.com/questions/71724/what-is-a-tensorspec-tensorflow-2-0" rel="noopener ugc nofollow" target="_blank"> TensorSpec </a>和服务签名定义默认支持命名IOs。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="5c90" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated">通过使用这个<code class="fe od oe of og b">serving_raw</code>签名定义，您可以通过JSON有效负载直接调用<a class="ae ky" href="https://www.tensorflow.org/tfx/serving/serving_basic" rel="noopener ugc nofollow" target="_blank"> Tensorflow服务端点，而无需序列化到<code class="fe od oe of og b">tf.Example</code>。</a></p><p id="a463" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated">看看TF服务上的<code class="fe od oe of og b">metadata</code>签名，我目前正在做一个比特币预测模式的例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><blockquote class="kz"><p id="c6e1" class="la lb it bd lc ld le lf lg lh li lj dk translated">最后，如果您正在使用TFX或获得了用于输入的协议缓冲模式，您应该使用它来发送用于推断的数据，因为这样会更有效率，并且错误会更快地出现在客户端，而不是服务器端。<em class="on">即使在这种情况下，也要为您的模型使用命名的输入和输出。</em></p></blockquote></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="4b08" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated"><strong class="me iu">感谢一路看完！</strong></p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="ed8e" class="pw-post-body-paragraph nf ng it me b mf nh ju ni mh nj jx nk mj nl nm nn ml no np nq mn nr ns nt lj im bi translated">还想学习如何正确构建您的下一个机器学习项目吗？</p><ul class=""><li id="5044" class="mc md it me b mf nh mh nj mj oh ml oi mn oj lj ok mq mr ms bi translated">查看我的<strong class="me iu"> </strong> <a class="ae ky" href="http://Want to create" rel="noopener ugc nofollow" target="_blank"> <strong class="me iu">结构化ML管道项目文章</strong> </a> <strong class="me iu">。</strong></li></ul></div></div>    
</body>
</html>