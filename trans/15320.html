<html>
<head>
<title>Highlighting Click Data on Plotly Choropleth Map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">高亮显示Plotly Choropleth地图上的点击数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/highlighting-click-data-on-plotly-choropleth-map-377e721c5893?source=collection_archive---------28-----------------------#2020-10-21">https://towardsdatascience.com/highlighting-click-data-on-plotly-choropleth-map-377e721c5893?source=collection_archive---------28-----------------------#2020-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/eca147723f6c49f41225c4395dc97135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eb3JyAXTY1lh8x8sMY001A.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="10ca" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在最近的一个项目中，我做了一个<a class="ae la" href="https://ukhouseprice.project-ds.net/" rel="noopener ugc nofollow" target="_blank">英国房价Plotly应用程序</a>。一个挑战是突出显示choropleth地图中被点击的部分。在撰写本文时，这样的功能还不容易获得，所以这里有一个方法来解决它。</p><p id="8227" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了便于说明，我将修改<a class="ae la" href="https://plotly.com/python/mapbox-county-choropleth/" rel="noopener ugc nofollow" target="_blank"> plotly文档</a>中的election-choropleth示例。完整的代码可以在<a class="ae la" href="https://colab.research.google.com/drive/1NtoBgYEH-StOGwWu6cJ-d8XCQxbrZzHE?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>的谷歌可乐实验室笔记本上找到。</p><p id="fae7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">基本思想是添加第二个图层，其中仅包含相应geojson中的选定区域，并跟踪在状态变量中被单击或取消单击的区域。</p><p id="d2b1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">GeoJSON是一种开放标准地理空间数据交换格式。对于我们的geojson文件，我们希望选择包含所选地区的geojson['features']元素。为了加快查找过程，我们将首先获得一个district_lookup字典:</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="8335" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，我们编写一个函数来获取所选地区的geojson文件:</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="2edb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">给定一个选择列表，现在我们可以在图的第二层使用函数<em class="lh"> get_highlights() </em>来获得高亮效果，我们将选择的不透明度从0.5增加到1.0。我们还可以用其他方式高亮显示被点击的区域——只需为第二层指定所需的格式。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="1bbc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们准备运行应用程序。dash_core_components.graph组件有一个属性“click data”——当地图上有点击时，事件会触发回调函数，更新集合“selections”和图。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/3e911e9ac66c82a9d1a2d16ff7ae1b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5FdAISQSd-l74ZWbbHCL8w.gif"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="516f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">希望这个小技巧对你有所帮助，祝你的项目好运！</p></div></div>    
</body>
</html>