<html>
<head>
<title>Understand Pandas Indexes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解熊猫指数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understand-pandas-indexes-1b94f5c078c6?source=collection_archive---------28-----------------------#2020-09-29">https://towardsdatascience.com/understand-pandas-indexes-1b94f5c078c6?source=collection_archive---------28-----------------------#2020-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b1e6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为了有效地使用Pandas，请忽略它的文档并了解索引的真相</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/00f4bdd4f3c514b8dc0f67480f27520a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Di-YKBc5Ya_X0Y-N"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Damian Patkowski 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7c97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python Pandas库是一个很好的数据操作工具。然而，只有当你理解熊猫索引时，它才是有效的。Pandas索引是在几秒钟而不是几分钟或几小时内访问和连接行的关键。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3f64" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">指数</h1><p id="632d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">像Python字典(或关系数据库的索引)一样，Pandas索引提供了一种将键转化为值的快速方法。例如，我们可以创建一个索引为<code class="fe mw mx my mz b">alpha</code>的数据帧:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/35bd2bd69a0f24ca976be92802856420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5xKRFdyq1hKv-WncfnPdw.png"/></div></div></figure><p id="e932" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将键<code class="fe mw mx my mz b">b</code>转到感兴趣的行。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/2a8ed1b53ce0810a7b6fe34fcfdc750b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LbY-k4aEW555mD4r1qRTXA.png"/></div></div></figure><p id="6d5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是熊猫指数是一个什么样的东西呢？文档说索引是一个</p><blockquote class="ne nf ng"><p id="7aff" class="kw kx nh ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated">不可变n数组实现一个有序的、可切片的<strong class="ky ir">集合</strong>(增加了<em class="iq">重点</em>)</p></blockquote><p id="682b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，一种数学集合。回想一下，数学集合有两个重要属性:</p><ul class=""><li id="4ec3" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">没有重复的元素</li><li id="b6fa" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">元素是无序的</li></ul><p id="5c14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是现在，看第二个例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/03a922f6259b14644f5654d3ec7fcf67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuzXEmWbx8xM2s_MwzrVrw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/ef974c44a71675509b7345f1cc5161e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bcf07vU7KOsCUYGybme_bw.png"/></div></div></figure><p id="9112" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们又把<code class="fe mw mx my mz b">alpha </code>栏目变成了索引。然而，元素<code class="fe mw mx my mz b">x</code>出现了两次，检索到的行遵循两个<code class="fe mw mx my mz b">x</code>的顺序。</p><ul class=""><li id="aa03" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">元素可以重复</li><li id="9851" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">元素是有序的</li></ul><p id="e84f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，与熊猫文献相反，熊猫指数不是一个数学集合。取而代之的是一种<strong class="ky ir">列表</strong>。具体来说，熊猫指数是</p><ul class=""><li id="9808" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">可散列元素的(一种)列表，其中</li><li id="a671" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">可以快速找到元素的位置。</li></ul><p id="e26b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些知识，我们可以很容易地理解索引的基础，从它们的创建、删除和操作开始。</p><h1 id="3280" class="lz ma iq bd mb mc oa me mf mg ob mi mj jw oc jx ml jz od ka mn kc oe kd mp mq bi translated">操纵索引</h1><p id="3daf" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">上面的例子展示了如何用<code class="fe mw mx my mz b">.set_index()</code>将一个列转换成索引。我们可以用<code class="fe mw mx my mz b">.reset_index()</code>将索引变回列:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/7d0d857a528265768db3943a2ee95b40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_VrLjtGMRYlnQvXAosOv1g.png"/></div></div></figure><p id="8877" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把索引放回去，然后看看索引中的所有元素。属性为<code class="fe mw mx my mz b">.index.values</code>。正如所料，元素是一种列表，具体来说，是一个NumPy数组。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/b13eb454ba3ba330eb03fcd704170e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tTXJK7WPcc6s4ZCGq3_mQ.png"/></div></div></figure><p id="d19a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还希望能够快速找到对应于任何索引元素的行号。方法是<code class="fe mw mx my mz b">.index.get_loc()</code>。结果将是一个整数或布尔数组，具体取决于行数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/168853d244dafda4db4f97d8d3186d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tS2tKSUiY-0TvmMM2n-mlw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/c8a4e8a3746f3036e423fa0e2b559e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qw0FxBRnPrabXGAgWPXrUw.png"/></div></div></figure><h1 id="0cd8" class="lz ma iq bd mb mc oa me mf mg ob mi mj jw oc jx ml jz od ka mn kc oe kd mp mq bi translated">行访问</h1><p id="1361" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">访问带有索引元素的行的主要方法是<code class="fe mw mx my mz b">.loc[…]</code>(注意方括号)，其中的输入可以是:</p><ul class=""><li id="1b23" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">单一元素</li><li id="2062" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">元素列表</li><li id="8f67" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">元素切片</li></ul><p id="a9a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">行将按照它们在输入中出现的顺序输出。这个例子展示了每一种输入。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/bba11b4997161ed91d8b7a550a6a0cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mS9GR-_QAYP6jQ__fknG0g.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/b22d16fd1f9a2b9156e069cf0e45de66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9DkcsrfrpUlJ0R2NM_5LPw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/50b678c473f789d384067db2adf17431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QGnOKMl_mihYRHdDf-9ACw.png"/></div></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/d5b176c7c568975ee9e8e50ad7ae2d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X0hfzEAE9eTfdktu9J4QQg.png"/></div></div></figure><p id="b046" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，与Python的其他部分不同，<em class="nh"> start:stop </em>片段包含了<em class="nh"> stop </em>值。</p><h1 id="58a1" class="lz ma iq bd mb mc oa me mf mg ob mi mj jw oc jx ml jz od ka mn kc oe kd mp mq bi translated">连接行</h1><p id="4f60" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">最后，让我们看看连接两个数据框架。规则是:</p><ul class=""><li id="cabb" class="nl nm iq ky b kz la lc ld lf nn lj no ln np lr nq nr ns nt bi translated">左边的数据帧不需要索引，但是右边的需要。</li><li id="1b9a" class="nl nm iq ky b kz nu lc nv lf nw lj nx ln ny lr nq nr ns nt bi translated">在连接的<code class="fe mw mx my mz b">on</code>输入中给出感兴趣的左列。</li></ul><p id="5a70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我们将使用<code class="fe mw mx my mz b">join</code>向dataframe添加一个“score”列。这是左边的数据框。它没有索引。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/71690e1d27677f46eeb2da119e8fe230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDqMI2k_nwmvY9yYsbrPcQ.png"/></div></div></figure><p id="21d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正确的数据帧需要一个索引，但它可以被命名为任何名称。在这里我们称之为<code class="fe mw mx my mz b">alpha2</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/e5aff43da7dcdc84687f8ba325abf29a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JILf7SYslBC6jhvSyNXog.png"/></div></div></figure><p id="5364" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用左连接将两个数据帧结合起来。我们使用第一个数据帧中的列<code class="fe mw mx my mz b">alpha</code>和第二个数据帧中的索引。结果是一个带有分数列的新数据帧。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/950e3429c132018669169ccb585c16a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WvdFrHk8DnDY78y7p63RaA.png"/></div></div></figure><h1 id="5b42" class="lz ma iq bd mb mc oa me mf mg ob mi mj jw oc jx ml jz od ka mn kc oe kd mp mq bi translated">结论</h1><p id="72a0" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们已经看到，与文献相反，熊猫指数不是一个数学集合。相反，它是一种可以快速找到任何元素位置的列表。</p><p id="2e27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理解了这一点，就很容易理解如何创建、删除和操作索引。然后，我们可以使用索引来快速访问和连接行。</p><p id="64ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是什么？有了这个基础，接下来您应该学习从多个列创建索引，对索引应用类似集合的操作符，以及有效地删除行。(令人惊讶的是，熊猫分组排序不需要也不使用索引。)</p></div></div>    
</body>
</html>