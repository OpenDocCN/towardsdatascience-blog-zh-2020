<html>
<head>
<title>Extracting shift handover data from paper forms in a hospital environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在医院环境中从纸质表格中提取交接班数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extracting-shift-handover-data-from-paper-forms-in-a-hospital-environment-b2fbb23fe585?source=collection_archive---------61-----------------------#2020-10-26">https://towardsdatascience.com/extracting-shift-handover-data-from-paper-forms-in-a-hospital-environment-b2fbb23fe585?source=collection_archive---------61-----------------------#2020-10-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3c8afb92c734ad00443db9c274505e28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tWE-LLcmbs3vMFRqtyt9hw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">图片作者。</p></figure><h1 id="2585" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">背景</h1><p id="a5d2" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在大多数医院的交接班时，会填写一份纸质表格来总结上一次交接班，并强调即将到来的交接班的关键方面。例如，一个完整的表单可能如下所示。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/8f77c94651d1e7f39814fbbc10433c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Le5gsf2vDOs9BPnvFLMfA.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">填好的表格样本。图片作者。</p></figure><p id="81fb" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">这些完成的表格在以后被收集在一起，一个人将仔细检查每一个表格并在计算机上手动输入数据。然后，记录的数据可以输入到分析系统中，以生成见解。</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="352e" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated">项目的目标</h1><p id="2631" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><strong class="lc ir">该项目的主要目标</strong>是通过构建一个工具来简化数据收集流程，</p><ul class=""><li id="cfc2" class="mu mv iq lc b ld md lh me ll mw lp mx lt my lx mz na nb nc bi translated">用户可以使用他们的智能手机给完成的表格拍照，</li><li id="0666" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi translated">然后，该工具自动提取数据并预填充表单，并且</li><li id="5567" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi translated">用户可以查看和保存数据。</li></ul><p id="09af" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">用户可以选择在完成表单后立即拍照并上传，或者在稍后拍摄多个完成的表单。</p><p id="29d1" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">其他一些功能包括:</p><ul class=""><li id="9c02" class="mu mv iq lc b ld md lh me ll mw lp mx lt my lx mz na nb nc bi translated">提供表格的数字版本，用户可以直接在他们的电话/平板电脑上填写，</li><li id="e271" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi translated">保存原始图像和提取的数据，</li><li id="676e" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi translated">链接数据，如单位、用户等。到系统中的现有实体。</li></ul></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="9111" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated">演示</h1><p id="3c3b" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在<a class="ae ni" href="https://riberry.health/" rel="noopener ugc nofollow" target="_blank">里贝里</a>，我们建立了一个平台，用于在医院环境中收集数据和生成见解，以及提供临床改进计划。本文只关注使用OCR从纸质表单中提取数据——这是数据收集方面的一个特性。</p><p id="f6ce" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">下面是如何从纸质表格中提取数据并输入系统的演示。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/2b63bd8f75fd071d58ffd1870a377fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VTvCX2Vk0p2aP0uRKWC01A.gif"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">OCR演示。图片作者。</p></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="7213" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated">架构概述</h1><p id="aa41" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们使用微软的<a class="ae ni" href="https://azure.microsoft.com/en-au/services/cognitive-services/form-recognizer/" rel="noopener ugc nofollow" target="_blank">表单识别器</a>服务从表单中提取数据。更具体地说，我们已经训练了一个定制模型，而不是使用预先构建的模型，来更好地处理我们的客户使用的表单的结构。</p><p id="a77a" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">在非常高的水平上，我们将首先训练一个模型。然后，用户可以通过前端(又名Riberry)将填写好的表格的照片上传到名为Rumble的API。然后，Rumble使用经过训练的模型从表单中提取数据，并在将提取的数据发送回用户之前对其进行转换和清理。下图对此过程有更详细的解释。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/a04e52e30ba008a68e67b122cc5554be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8qIYtQCAEPPekK3ie18kGA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">架构概述。图片作者。</p></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="912a" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated">训练模型</h1><blockquote class="nl nm nn"><p id="6eee" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated"><strong class="lc ir">注意</strong>:本文的重点是展示最终产品，并反思在添加OCR支持方面学到的经验，而不是如何使用Azure Form Recognizer服务的分步指南。写指南也没有意义；你不可能真的打败他们的<a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/?branch=release-build-cogserv-forms-recognizer" rel="noopener ugc nofollow" target="_blank">文档和例子</a>。</p><p id="d072" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated">如果您想学习如何使用表单识别器服务，我强烈推荐您通读他们的文档—这确实是最有效的方法。</p></blockquote><p id="7815" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">表单识别器服务的核心是一组<a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">REST API</a>，允许您通过使用监督/非监督机器学习来训练模型，管理(例如，列出、删除、复制)模型，以及使用定制/预构建的模型提取数据。</p><p id="ee66" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">此外，它还提供了一个开源工具(OCR-Form-Tools) ，它可以与这些REST APIs进行交互，并提供一个直观的UI来标记您的数据，训练模型并通过预测测试文档来验证模型。</p><blockquote class="nl nm nn"><p id="dd12" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated"><strong class="lc ir">提示</strong>:在<a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/quickstarts/label-tool?tabs=v2-0#set-up-the-sample-labeling-tool" rel="noopener ugc nofollow" target="_blank">他们关于设置样品贴标工具的指南</a>中，他们谈到了通过Docker运行该工具。</p><p id="ea5b" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated">比起使用Docker，我发现从<a class="ae ni" href="https://github.com/microsoft/OCR-Form-Tools" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中取出一份工具并从源代码中构建/运行它要容易得多。</p></blockquote><p id="9e10" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">在工具启动并运行之后，我能够轻松地标记我们的样本数据、训练模型和测试模型。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/2861991e6d4e0ce0a1ccd06bb15385db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBKyn5TvM5WHsZHyOzZxFA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">标记训练数据。图片作者。</p></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/714238922e0e72fb04d0ab68d0e39395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTw46AsyUUwHXW0Oa8pYaQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">训练一个模特。图片作者。</p></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/254f74dd71840538bc0fa9ce5a14154a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqZFKJpsWSPy-GP3IzlSqQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">验证训练好的模型。图片作者。</p></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="a04f" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated">杂项反思</h1><p id="7797" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">现在项目已经部署到生产中，这是一个很好的时间来回顾它，反思我从做这件事中学到的各种事情/教训。</p><h2 id="035d" class="nv kd iq bd ke nw nx dn ki ny nz dp km ll oa ob kq lp oc od ku lt oe of ky og bi translated">1.培训过程</h2><p id="da47" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">使用监督学习方法预测表单内容应该有三个主要阶段，</p><ol class=""><li id="6c76" class="mu mv iq lc b ld md lh me ll mw lp mx lt my lx oh na nb nc bi translated">检测表单上的文本元素(打印的或手写的)并计算它们的预期大小和位置，</li><li id="0a5f" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx oh na nb nc bi translated">从每个元素中提取实际的文本内容，</li><li id="d7d9" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx oh na nb nc bi translated">使用步骤1中获得的元素大小和位置信息，将元素分类到指定的不同标签中。</li></ol><blockquote class="nl nm nn"><p id="2f42" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated"><strong class="lc ir">提示</strong>:通过监督学习，我们正在拟合一个模型，根据页面上元素的位置信息将页面上的元素分类到不同的标签中。</p><p id="85b7" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated">我们<strong class="lc ir"> <em class="iq">不是</em> </strong>训练任何NLP模型从页面上识别的元素中提取文本。这一部分由表单识别器服务在内部处理。</p></blockquote><p id="c3ec" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">每个文本元素的位置和大小由其由8个数字组成的边界框来表示。并且这8个数字应该是每个训练实例即每个文本元素的主要特征。</p><p id="abca" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">还可能有许多数据论证和特征操作技术应用于训练数据，以人工扩展数据集，从而提高模型的准确性。例如，他们可能会使用一些保留标签的变换技术，如去噪/锐化、弹性变形、仿射变换、降维等。</p><p id="ea4e" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">但总的来说，成本函数应该相对简单，只有几个变量。对于<a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/overview#custom-models" rel="noopener ugc nofollow" target="_blank">只需要5个文档</a>就可以开始使用，我并不感到惊讶。</p><h2 id="8dc6" class="nv kd iq bd ke nw nx dn ki ny nz dp km ll oa ob kq lp oc od ku lt oe of ky og bi translated">2.添加对复选框/单选问题的支持</h2><p id="6655" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">表单识别器服务<a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/overview#input-requirements" rel="noopener ugc nofollow" target="_blank">并不正式支持复选框或单选按钮</a>，但是我已经能够很容易地绕过它，</p><ul class=""><li id="8ada" class="mu mv iq lc b ld md lh me ll mw lp mx lt my lx mz na nb nc bi translated">为复选框或单选问题中的每个选项应用标签，以及</li><li id="239e" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi translated">在预测时，将这些带有值的标签视为用户选择的选项。</li></ul><p id="868e" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">例如，医院使用的表单包含一个带有两个选项的复选框问题— AM或PM。在训练过程中，我分别为AM和PM选项设置了标签<code class="fe oi oj ok ol b">_Shift.9:00</code>和<code class="fe oi oj ok ol b">_Shift.17:00</code>(见下文)。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/f4d68e86f3effec1672bc99948a4b6d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eO_z8UVitzytzZBHZpyrNA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">添加对复选框/单选问题的支持。图片作者。</p></figure><p id="7cf8" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">假设，如果我们将上面的表单输入到训练好的模型中，将为<code class="fe oi oj ok ol b">_Shift.9:00</code>和<code class="fe oi oj ok ol b">_Shift.17:00</code>提取一个字符串‘x’。如果这是一个复选框问题，我会认为两个选项都被选中，如果这是一个单选问题，我会认为第一个选项被选中。</p><h2 id="4195" class="nv kd iq bd ke nw nx dn ki ny nz dp km ll oa ob kq lp oc od ku lt oe of ky og bi translated">3.异步提取数据，并在结果就绪时通知用户</h2><p id="c3b0" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在<strong class="lc ir">向其端点发送</strong>表单并从中提取数据之后，您将获得一个<code class="fe oi oj ok ol b">Operation-Location</code>、<a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">，这是一个包含</a>、<code class="fe oi oj ok ol b"><a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">resultId</a></code>、<a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">的URL，用于跟踪进度并获得分析操作</a>的结果。我们要反复检查这个结果数据的URL。</p><blockquote class="nl nm nn"><p id="d29f" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated"><strong class="lc ir">提示</strong>:我将检查结果的频率设置为每秒一次。这似乎与他们的OCR工具用于检查结果的频率相同。</p><p id="7242" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated"><strong class="lc ir">提示</strong>:如果您的用户必须等待结果才能采取下一步行动，请在发布图像进行分析之前对其进行压缩，以缩短等待时间。</p><p id="19d4" class="la lb no lc b ld md lf lg lh me lj lk np mf ln lo nq mg lr ls nr mh lv lw lx ij bi translated">如今智能手机上拍摄的图像相当大，我将它们压缩到4.1背景</p></blockquote><p id="6e4c" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">纸质表单上的字段与数字表单上的字段并不完全匹配——纸质表单上的一些数据被忽略，而网络表单上有一些额外的字段。此外，虽然纸质表格很少改变，但我们会通过添加/删除问题或围绕现有问题移动来稍微更新数字表格。</p><p id="b537" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><strong class="lc ir"> 4.2我们如何设计它</strong></p><h2 id="8580" class="nv kd iq bd ke nw nx dn ki ny nz dp km ll oa ob kq lp oc od ku lt oe of ky og bi translated">web表单上的问题及其布局是使用JSON文件定义的。不涉及细节，在下面的截图中，JSON结构(右)定义了表单的<strong class="lc ir">团队</strong>部分(左)。</h2><p id="694b" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在JSON中定义问题。图片作者。</p><p id="36d5" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">但是，我们也使用JSON文件中问题的名称来自动构造该问题的标签(在OCR中使用)。例如，在下面的截图中，标签— <strong class="lc ir">团队..护士简写</strong>——“护士简写”问题是通过用一个点连接其所有祖先和自身的名字而创建的。</p><p id="9791" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">来自问题名称的标签。图片作者。</p><p id="5f83" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><strong class="lc ir"> 4.3设计问题</strong></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/3737ec0d75d27114ce67786b08b6622e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4IXooldzq-NRb_u0zMle3g.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">这意味着，每当我们更改表格的数字版本时(例如，添加/删除问题或重新排列表格上的字段)，都会生成一组新的标签。我们必须重新命名表单识别器中使用的标签，重新训练模型，将其复制到生产环境中等等。这是一个非常耗时的过程。</p></figure><p id="0b4b" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><strong class="lc ir"> 4.4我们应该做什么而不是做什么</strong></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/d26c0f44634d0ea9f706741455560a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZDsdYaSpejPcLs5IIU83g.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">我们应该将标签生成从form.gggg的JSON定义中分离出来</p></figure><p id="bd60" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">假设纸质表单很少改变，我们应该硬编码一组标签用于表单识别器服务。然后，我们可以扩展JSON定义以包含一个<code class="fe oi oj ok ol b">label</code>属性，该属性指定每个问题所使用的标签(如果适用的话)。</p><p id="13f6" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">这不仅简化了绑定数据的代码(即，将提取的数据转换为域对象)，还意味着我们可以自由地重新排列表单上的问题，而不必在表单识别器中重新训练模型。</p><p id="7243" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated">参考</p><p id="f0e5" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">表单识别器API (v2.0) </a></p><p id="d9c9" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/?branch=release-build-cogserv-forms-recognizer" rel="noopener ugc nofollow" target="_blank">表单识别器文档</a></p><p id="c463" class="pw-post-body-paragraph la lb iq lc b ld md lf lg lh me lj lk ll mf ln lo lp mg lr ls lt mh lv lw lx ij bi translated"><a class="ae ni" href="https://github.com/microsoft/OCR-Form-Tools" rel="noopener ugc nofollow" target="_blank"> OCR表单工具</a></p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="ed3f" class="kc kd iq bd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz bi translated"><a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/quickstarts/label-tool?tabs=v2-0#set-up-the-sample-labeling-tool" rel="noopener ugc nofollow" target="_blank">设置样品标签工具</a></h1><ul class=""><li id="f058" class="mu mv iq lc b ld le lh li ll op lp oq lt or lx mz na nb nc bi"><a class="ae ni" href="https://westus2.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2/operations/AnalyzeWithCustomForm" rel="noopener ugc nofollow" target="_blank">Form Recognizer API (v2.0)</a></li><li id="1973" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi"><a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/?branch=release-build-cogserv-forms-recognizer" rel="noopener ugc nofollow" target="_blank">Form Recognizer documentation</a></li><li id="996a" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi"><a class="ae ni" href="https://github.com/microsoft/OCR-Form-Tools" rel="noopener ugc nofollow" target="_blank">OCR-Form-Tools</a></li><li id="635e" class="mu mv iq lc b ld nd lh ne ll nf lp ng lt nh lx mz na nb nc bi"><a class="ae ni" href="https://docs.microsoft.com/en-us/azure/cognitive-services/form-recognizer/quickstarts/label-tool?tabs=v2-0#set-up-the-sample-labeling-tool" rel="noopener ugc nofollow" target="_blank">Set up the sample labelling tool</a></li></ul></div></div>    
</body>
</html>