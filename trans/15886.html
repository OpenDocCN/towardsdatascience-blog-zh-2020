<html>
<head>
<title>Delivering Immediate Business Value With NLP &amp; R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过NLP &amp; R提供即时商业价值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/delivering-immediate-business-value-with-nlp-r-c51020d72ce4?source=collection_archive---------44-----------------------#2020-11-01">https://towardsdatascience.com/delivering-immediate-business-value-with-nlp-r-c51020d72ce4?source=collection_archive---------44-----------------------#2020-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1a8a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们面对现实吧——我们不能整天坐在那里训练神经网络</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f9ba201940fc8680745096129296d384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PpG8g77JBsQOnHyf"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd kv">照片:</strong> <a class="ae kw" href="https://unsplash.com/@florenciaviadana" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kv">弗洛伦西亚Viadana </strong> </a> <strong class="bd kv">，Unsplash </strong></p></figure><p id="1e58" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">作为数据科学家，我们的工作是为企业提供切实的底线结果。虽然我喜欢整天训练神经网络，但关键是我们要与业务部门建立稳固的关系，并找到交付易于理解和量化的价值的方法。</p><p id="1f42" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">除非你在一家大型科技公司工作，否则你的团队很可能有大量的分析用例。在这个简短的教程中，我将为您提供代码，并概述如何利用基本的自然语言处理(NLP)来交付真实、可沟通、有价值的分析。</p><p id="3b4c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">关于从互联网上收集必要的文本数据的教程(和一些警告),请查看我关于web爬行的文章:</p><p id="7a74" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">完全初学者的第1部分可以在这里找到<a class="ae kw" href="https://medium.com/analytics-vidhya/automated-browsers-scraping-and-crawling-easier-than-it-looks-af37bd765bca" rel="noopener"><strong class="kz ir"/></a><strong class="kz ir"/>和第2部分，在那里我们采取了一种更加面向对象和可重用的方法，可以在这里找到<a class="ae kw" href="https://medium.com/analytics-vidhya/automated-browsers-scraping-and-crawling-part-2-cc9e2149a64" rel="noopener"><strong class="kz ir"/></a>。</p><h1 id="a781" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">TL；博士-给我密码</h1><p id="a639" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">数据集可以在这里找到<a class="ae kw" href="https://archive.ics.uci.edu/ml/datasets/Drug+Review+Dataset+%28Druglib.com%29" rel="noopener ugc nofollow" target="_blank"><strong class="kz ir"/></a><strong class="kz ir"/>(代码中也有链接)。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="ab8e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">让我们来分解一下:语料库</h1><p id="46ba" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">语料库是我们将用于NLP的核心数据结构。因为我们将一个字符向量传递给Corpus()函数，所以我们需要指定源是一个向量源。使用inspect()方法将允许您查看新创建的语料库。</p><p id="f064" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在语料库创建之后，我们使用一些常用的方法清理文本数据。我们的cleaner()函数做了一些基本的操作，比如删除数字，但是它也删除了所有的停用词，这些词本身没有什么意义。流行的停用词是“the”和“a”</p><p id="a7e1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">请注意，删除停用字词时可能会丢失一些信息。这就是分析变得更像艺术而不是科学的地方。你可以选择只删除基本术语，也可以决定删除特定行业术语，等等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/e8f165c3c930021dff9ca26632541552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AzAd8vO479j55m99gJOB2w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">产品的原始评论(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/450c8177be3b5cff330fd1af4a494527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*HaJXWaSd-R5qhWZf-ixfew.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">去掉了停用词。请注意，“它没有”不再出现在句子中(图片由作者提供)</p></figure><h1 id="06c5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">TDM和词云</h1><p id="3b9d" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">当我们创建语料库时，R基本上将每篇评论编码为一个单独的文本文档。术语文档矩阵(TDM)采用语料库，并对每个单词制作一个<strong class="kz ir">的矢量化频率表。下面是一个TDM中包含3个虚拟评论的示例:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/4b689c3c4735320c4f007ab83ff5645a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TmfqN-zzAo2YmUfTUeVgfg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">TDM是如何制作的示例(图片由作者提供)</p></figure><p id="a485" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">从这个TDM中，我们可以创建一个矩阵，按行和(词频)排序，然后使用词云可视化结果。这是我们分析的第一部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/205e910bd9379bc04551aeaf68cbc4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9umT3pStqFQ8H3Ikp5ceQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">药品评论的文字云(图片由作者提供)</p></figure><h1 id="4d4b" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">单词相关性</h1><p id="cd72" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">云这个词是一个很好的开始，但却是一个很基础的起点。我们可以通过评估单词之间的相关性来增强我们的分析。单词相关性利用R的base cor()函数使用的相同方法，Pearson相关性是默认的。这是皮尔逊相关公式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/85ecce621221748f286be781b5d7d9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*Mniw00slTXxxC71WXFa0IA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">皮尔逊相关系数(r)公式，</p></figure><p id="9d69" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因为我们的TDM是矢量化的，所以R可以有效地执行这些比较。在我们的主代码中，我们需要输入一个感兴趣的项和一个相关下限。如果你看到大多数单词的相关度都在15%以下，不要惊讶。事实上，由于我们数据集的庞大规模，15%可能是一个显著的相关性。即使我们的数据集很小(按ML标准)，我们的TDM也非常大(2300万个元素——3107条评论x 750个单词)。</p><p id="abb5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">让我们看一下单词“Pain”和我们的TDM的其余部分之间的相关图，施加18%的相关下限:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/9073cad504fe936525e39f07e1ef41f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iIeLwBTguU97wp4T2fJMqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">TDM和“疼痛”之间的关联图，18%关联下限(图片由作者提供)</p></figure><p id="3b55" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这张图表立刻向我们展示了一些见解。例如，我们看到“神经”与疼痛有很高的相关性，相关性为22%。这可以产生直接、即时的业务影响；我们有效地总结了3000多篇评论，并找出了一个常见的问题。</p><h1 id="9301" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">情感分析</h1><p id="91cc" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">虽然有许多复杂的方法来执行情感分析，但在本文中，我们将重点关注合理执行的开箱即用的方法。对于情感分析的详细概述，请查看这个<a class="ae kw" href="https://en.wikipedia.org/wiki/Sentiment_analysis" rel="noopener ugc nofollow" target="_blank">维基百科页面</a>。对于快速启动，我们基本上利用了微软情感词典中大量预先标记的消极/积极词汇。我们用我们的单词列表加入词典，然后只计算正面和负面单词的比率。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/4d5f3aa8f8cf1c6874679df9e02d199c.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*1bKsZS-_DyqEIDymLMTe_Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来自我们合并列表的片段(图片由作者提供)</p></figure><h1 id="4108" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">N-Grams</h1><p id="b0ff" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">但是等等，还有呢！虽然我们可以更仔细地观察单个词频，但这表面上是我们在词云中可视化的条形图/表格形式。单个单词也有信息缺失的问题。类似于我们在讨论停用词时看到的，我们可能会用这种方法丢失句子中的重要修饰语。例如，我们可以将“粉丝”作为我们的首选词之一，但可能有一半的句子也包括“我不是一个…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/5a734e1db8adf82892a8fb764eb2a01e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0to5YzYNY3aoyWebng8Ug.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0198" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们可以用N-gram分析来应对这种信息丢失。一个N-gram基本上是在我们的数据集中同现的“N”个单词。在这个代码模板中，我们需要做的就是将方法中的“n”改为我们想要的大小。以下是运行二元和三元模型分析并清理数据集后的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/0f7d2a3547cfbe08d10644ae196991ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*JNBIZDVk4SIdhYrcImRQvQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">几乎是瞬间，我们对热门话题有了一个很好的了解(图片由作者提供)</p></figure><h1 id="6833" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">太好了，我怎么卖？</h1><p id="62b9" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">这个代码模板有几个很大的技术和非技术优势:</p><ol class=""><li id="efcf" class="nb nc iq kz b la lb ld le lg nd lk ne lo nf ls ng nh ni nj bi translated"><strong class="kz ir">战斗偏见&amp;显著性:</strong>采用程序化方法的最重要优势之一是消除了人为因素。对于公司来说，让一个关键人员审查报告的药物副作用、内部调查等是很常见的。这是一个问题。人都是有偏见的，不管自己知不知道。潜意识偏见会导致一种类型的评论保持突出或直接影响结果的交付。像这样的程序可以很容易地扩展和大规模共享(见#4)，消除了孤立的偏见/突出的影响。</li><li id="3dd8" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated"><strong class="kz ir">谁不喜欢字云？</strong>由此产生的视觉效果易于理解，看起来很漂亮，是建立业务方对您的分析的信心的好方法。</li><li id="516e" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls ng nh ni nj bi translated"><strong class="kz ir">速度:</strong>当然，不是完全优化，但是这个代码是<em class="np">快</em>。从开始到结束，这个程序在我的电脑上运行6.25秒。诚然，我的电脑比大多数工作机器快一点，但也没快多少。一个人仔细梳理这3100条评论可能需要几天时间。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/366ae050110aff60841e6bd171b084a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/1*gM9OSwzD9ZjKNH-iZHfN4A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">脚本计时(图片由作者提供)</p></figure><p id="fc6a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">4.<strong class="kz ir">没有分析基础设施？没问题！该模板可以回收用于任何文本分析，几乎不需要用户交互。基础设施有所帮助，但并不是真正必要的。如果我们想对此类代码进行“软部署”:</strong></p><ul class=""><li id="ac63" class="nb nc iq kz b la lb ld le lg nd lk ne lo nf ls nr nh ni nj bi translated">添加您想要查看的任何导出条件(图表、n-gram等。)</li><li id="c962" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls nr nh ni nj bi translated">创建引用此脚本的. bat文件</li><li id="f192" class="nb nc iq kz b la nk ld nl lg nm lk nn lo no ls nr nh ni nj bi translated">安排一个windows进程在数据更新时每“X”天运行一次可执行文件，或者只需单击。蝙蝠</li></ul></div></div>    
</body>
</html>