<html>
<head>
<title>Mounting &amp; accessing ADLS Gen2 in Azure Databricks using Service Principal and Secret Scopes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用服务主体和秘密范围在Azure数据块中挂载和访问ADLS Gen2</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mounting-accessing-adls-gen2-in-azure-databricks-using-service-principal-and-secret-scopes-96e5c3d6008b?source=collection_archive---------0-----------------------#2020-09-25">https://towardsdatascience.com/mounting-accessing-adls-gen2-in-azure-databricks-using-service-principal-and-secret-scopes-96e5c3d6008b?source=collection_archive---------0-----------------------#2020-09-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76bf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于使用Azure密钥库支持的秘密范围和服务主体从Python中的数据块访问Azure数据湖存储Gen2的指南。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/df7c4abe5f1588bce9da69de6ff5dda6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mjylfbv44hXngyJ0cC8CNw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·温克勒在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5855" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Azure数据湖存储和Azure数据块无疑是Azure基于云的数据分析系统的支柱。Azure数据湖存储提供了可扩展且经济高效的存储，而Azure Databricks提供了在该存储上构建分析的方法。</p><p id="a225" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分析过程从将存储装载到Databricks分布式文件系统(DBFS)开始。有几种方法可以将Azure数据湖存储Gen2挂载到Databricks。也许最安全的方法之一是将身份和访问管理任务委托给Azure AD。</p><p id="cc7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文着眼于如何将Azure数据湖存储挂载到由服务主体和OAuth 2.0使用Azure Key Vault支持的秘密范围认证的数据块。</p><p id="eeb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">警告:</strong> <em class="lv"> Microsoft Azure是一项付费服务，遵循本文可能会导致您或您的组织承担财务责任。</em></p><blockquote class="lw lx ly"><p id="a0e9" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">在撰写本文时，Azure Key Vault支持的Secret Scopes处于“公开预览”状态建议不要在生产或关键系统中使用任何“预览”功能。</p></blockquote><p id="a9b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">在继续阅读本文之前，请阅读我们的使用条款:</em><a class="ae ky" href="https://dhyanintech.medium.com/disclaimer-disclosure-terms-of-use-fb3bfbd1e0e5" rel="noopener"><em class="lv">https://dhyanintech . medium . com/disclaimer-disclosure-disclosure-terms-of-use-fb3 BF BD 1e 0e 5</em></a></p><h1 id="1ecf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">先决条件</h1><ol class=""><li id="fe2a" class="mu mv it lb b lc mw lf mx li my lm mz lq na lu nb nc nd ne bi translated">有效的Microsoft Azure订阅</li><li id="bd09" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">Azure数据湖存储第二代客户</li><li id="25f2" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">Azure Databricks工作区(高级定价层)</li><li id="8785" class="mu mv it lb b lc nf lf ng li nh lm ni lq nj lu nb nc nd ne bi translated">蓝色钥匙保险库</li></ol><p id="7d7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如果您还没有设置先决条件，请参考我们之前的文章开始:</em></p><div class="nk nl gp gr nm nn"><a href="https://medium.com/@dhyanintech/a-definitive-guide-to-turn-csv-files-into-power-bi-visuals-using-azure-4483cf406eab" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">使用Azure将CSV文件转换为Power BI视觉效果的权威指南</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">使用Microsoft Azure产品将新冠肺炎数据转化为惊人的Power BI视觉效果的分步指南。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ks nn"/></div></div></a></div></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="4a9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要访问由Azure AD租户保护的资源(例如，存储帐户)，安全主体必须代表需要访问的实体。安全主体为Azure AD租户中的用户或应用程序定义访问策略和权限。<strong class="lb iu">当应用被允许访问租户中的资源时(例如，在注册时)，服务主体对象被自动创建。</strong></p><p id="59f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">关于服务原则的进一步阅读:</em></p><div class="nk nl gp gr nm nn"><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/app-objects-and-service-principals" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">Azure AD中的应用和服务原则—微软身份平台</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">本文描述了Azure Active Directory中的应用程序注册、应用程序对象和服务主体…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">docs.microsoft.com</p></div></div><div class="nw l"><div class="oj l ny nz oa nw ob ks nn"/></div></div></a></div><p id="9635" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先注册一个Azure AD应用程序来创建一个服务主体，并将我们的应用程序身份验证密钥存储在Azure Key Vault实例中。</p><h1 id="3d71" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">注册Azure广告应用程序</h1><p id="a549" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">在Azure门户主页上找到并选择<strong class="lb iu"> Azure Active Directory </strong>。选择<strong class="lb iu">应用注册</strong>，点击<strong class="lb iu"> +新注册</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/332f70139238d6092ea86b47354b04f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PHJArUC33zJDL4Qykx8R_A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure活动目录:注册一个新的应用程序(图片由作者提供)</p></figure><p id="18ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu">注册应用</strong>页面，输入名称<em class="lv">ADL access</em>，表示应用的用途，点击<strong class="lb iu">注册</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/e8818a19d7f5691e75daa6cfcb9eab14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ji-5ICRCfIel1wYyQ0IB1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure活动目录:命名和注册应用程序(图片由作者提供)</p></figure><p id="b72b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb iu">ADL access</strong>屏幕中，将<strong class="lb iu">应用(客户端)ID </strong>和<strong class="lb iu">目录(租户)ID </strong>复制到记事本中。应用ID是指我们刚刚注册的app(即ADL access)，我们的app ADLSAccess注册到的Azure AD租户是目录ID。</p><p id="5f0f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要生成一个认证密钥(也称为应用程序密码或客户端密码或应用程序密码)来认证ADLSAccess应用程序。点击<strong class="lb iu">证书和密码</strong>，然后点击<strong class="lb iu"> +新客户端密码</strong>。在<strong class="lb iu">上添加一个客户端秘密</strong>刀片，输入描述，一年期满，完成后点击<strong class="lb iu">添加</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/da82a9c7efc04dc8ee0f68ff89e5556c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ew70aKi0yx8YwYtyjYOmg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Active Directory:创建客户端机密(图片由作者提供)</p></figure><p id="99fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您点击<strong class="lb iu">添加</strong>时，将出现客户端密码(认证密钥)，如下图所示。您只有一次机会将这个键值复制到记事本中。<strong class="lb iu">如果您执行另一个操作或离开此刀片</strong>，您将无法取回它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/328f18078dbf0fd60a66248f6abe85ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0anA3ynXTsCQ2CHwl4AbzQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure活动目录:客户端机密(图片由作者提供)</p></figure><h1 id="be5f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">授予服务主体对ADLS帐户的访问权限</h1><p id="743e" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">接下来，我们需要为我们的服务主体分配一个访问角色(回想一下，服务主体是在注册应用程序时自动创建的)，以访问我们的存储帐户中的数据。转到Azure门户主页，打开您的存储帐户所在的资源组。点击<strong class="lb iu">访问控制(IAM) </strong>，在<strong class="lb iu">访问控制(IAM) </strong>页面，选择<strong class="lb iu"> +添加</strong>，点击<strong class="lb iu">添加角色分配</strong>。在<strong class="lb iu">添加角色分配</strong>刀片上，将<strong class="lb iu">存储Blob数据贡献者</strong>角色分配给我们的服务主体(即ADLSAccess)，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/47ca166272245442e05846bfd5f910de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04t76GPfZwTUa1flKaoH9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资源组:将角色分配给服务主体(按作者排序的图像)</p></figure><h1 id="c5c4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">将应用程序机密添加到Azure密钥库</h1><p id="3c98" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">转到Azure门户主页并打开您的密钥库。点击<strong class="lb iu">秘密</strong>添加新的秘密；选择<strong class="lb iu"> +生成/导入</strong>。在<strong class="lb iu">上创造一个秘密</strong>刃；给定一个<strong class="lb iu">名称，</strong>输入客户端机密(即，我们在上一步中复制的<strong class="lb iu"> ADLS访问密钥</strong>)作为<strong class="lb iu">值</strong>和<strong class="lb iu">内容类型</strong>，以便于以后阅读和识别机密。重复前面复制的<strong class="lb iu">应用程序(客户机)ID </strong>和<strong class="lb iu">目录(租户)ID </strong>的创建过程。你的金库现在应该有三个秘密了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/30e8906517cde26832f956e98d5f5031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFJxTULVjg44DbD4q_sstg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/b73ee327b2815d7db64b228804496602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVWZdGlaecssUTwr3ZGmuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Key Vault:添加新秘密(图片由作者提供)</p></figure><p id="36dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择<strong class="lb iu">属性</strong>，将<strong class="lb iu">金库URI </strong>和<strong class="lb iu">资源ID </strong>复制到记事本中；下一步我们将需要它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/2b15881a6ea79b0d30a162e5d444fc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vApMIoPGsh-N26UnnSHD1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure密钥库:属性(图片由作者提供)</p></figure><h1 id="2bb3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在Azure Databricks中创建Azure密钥库支持的机密范围</h1><p id="0e5e" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated"><em class="lv">如果你已经阅读了我们的另一篇关于为Azure SQL Server凭证创建秘密范围的文章，只要你的密钥库和数据块实例保持不变，你就不必执行这个步骤。</em></p><p id="2678" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe ov ow ox oy b">https://&lt;DATABRICKS-INSTANCE&gt;#secrets/createScope</code>，用您实际的数据块实例URL替换&lt;数据块实例&gt;。创建一个秘密范围，如下所示。</p><blockquote class="lw lx ly"><p id="e6b3" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">此URL区分大小写。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/1533ab3078b4169991be083f6b045118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*BLcAkUJCQpTsTMI8ukhLCw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Databricks:创建一个秘密范围(图片由作者提供)</p></figure><h1 id="003c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用秘密范围将ADLS安装到数据块</h1><p id="1512" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">最后，是时候将我们的存储帐户安装到我们的Databricks集群上了。回到您的Databricks集群，打开我们之前创建的笔记本(或者任何笔记本，如果您没有遵循我们的整个系列)。</p><p id="e14a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将定义一些变量来生成我们的连接字符串，并使用Databricks实用程序获取秘密。您可以将下面的代码复制粘贴到您的笔记本上，或者自己键入。我们在这个笔记本上使用Python。使用单元格右上角给出的控件运行代码。不要忘记用你的存储细节和秘密名称<strong class="lb iu">替换变量赋值</strong>。</p><p id="6d3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">关于数据块工具(dbutils)和访问机密的进一步阅读:</em></p><div class="nk nl gp gr nm nn"><a href="https://docs.databricks.com/dev-tools/databricks-utils.html#secrets-utilities" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">数据块工具</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">Databricks实用程序(DBUtils)使执行强大的任务组合变得容易。您可以使用这些实用程序来…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">docs.databricks.com</p></div></div></div></a></div><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa pb l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/6c89d255bfbf1442af6bdeb0e554420e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZ0LJPnHgzWJSjmqpyI2eQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Databricks:在Python中安装ADLS Gen2(图片由作者提供)</p></figure><p id="1fa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">如何高效使用笔记本的进一步阅读:</em></p><div class="nk nl gp gr nm nn"><a href="https://docs.databricks.com/notebooks/notebooks-use.html" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">使用笔记本</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">笔记本是可运行单元(命令)的集合。当您使用笔记本电脑时，您主要是在开发和…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">docs.databricks.com</p></div></div></div></a></div><p id="2749" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过在单元格的开头指定language magic命令来覆盖笔记本的默认语言。支持的魔法命令有<code class="fe ov ow ox oy b">%python</code>、<code class="fe ov ow ox oy b">%r</code>、<code class="fe ov ow ox oy b">%scala</code>和<code class="fe ov ow ox oy b">%sql</code>。笔记本也支持一些额外的魔法命令，如<code class="fe ov ow ox oy b">%fs</code>、<code class="fe ov ow ox oy b">%sh</code>和<code class="fe ov ow ox oy b">%md</code>。我们可以使用<code class="fe ov ow ox oy b">%fs ls</code>来列出我们挂载的存储的内容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/6db061d74e59480c51d26e30c9786c67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywzVc7d-cckz8-LBIm7qIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Databricks:魔法命令(图片由作者提供)</p></figure><p id="855b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您不再需要存储时，不要忘记卸载它。</p><pre class="kj kk kl km gt pe oy pf pg aw ph bi"><span id="cb08" class="pi md it oy b gy pj pk l pl pm"># Unmount only if directory is mounted<br/>if any(mount.mountPoint == mountPoint for mount in dbutils.fs.mounts()):<br/>  dbutils.fs.unmount(mountPoint)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/96fba9b49e9307add726310dc931b4aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*LiFEpWxyK_rD6whaNIjFCg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure Databricks:卸载Python中的ADLS Gen2(图片由作者提供)</p></figure><p id="413c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！您已经成功地将您的存储帐户安装到Databricks，而没有泄露和存储您的应用程序机密和访问密钥。</p><h1 id="7c3e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">结论</h1><p id="50b8" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">我们看了如何注册一个新的Azure AD应用程序来创建一个服务主体，为服务主体分配访问角色，并将我们的秘密存储到Azure Key Vault。我们在Azure Dataricks中创建了一个Azure Key Vault支持的Secret范围，并在Dataricks中安全地挂载和列出了存储在我们的ADLS Gen2帐户中的文件。</p><h1 id="cf72" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">后续步骤</h1><p id="4744" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">如果你想知道我们是如何在存储中获得这些CSV文件的，请阅读我们的另一篇文章，建立一个创新的Azure数据工厂管道，通过HTTP从GitHub存储库中复制文件。</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/@dhyanintech/using-azure-data-factory-to-incrementally-copy-files-based-on-url-pattern-over-http-569476b625fc" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">使用Azure Data Factory基于HTTP上的URL模式增量复制文件</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">一个创新的Azure数据工厂管道，通过HTTP从第三方网站增量复制多个文件…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="po l ny nz oa nw ob ks nn"/></div></div></a></div><p id="f260" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还有另一篇关于连接和访问来自Datarbricks的Azure Synapse分析数据仓库的激动人心的文章。看一看:</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/@dhyanintech/a-credential-safe-way-to-connect-and-access-azure-synapse-analytics-in-azure-databricks-1b008839590a" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">在Azure Databricks中连接和访问Azure Synapse Analytics的凭据安全方式</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">关于如何在PySpark中使用秘密作用域设置SQL Server防火墙和从数据块连接的指南</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="pp l ny nz oa nw ob ks nn"/></div></div></a></div></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><h2 id="21a8" class="pi md it bd me pq pr dn mi ps pt dp mm li pu pv mo lm pw px mq lq py pz ms qa bi translated">喜欢这个帖子？与Dhyan联系</h2><p id="4bb0" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li ok lk ll lm ol lo lp lq om ls lt lu im bi translated">让我们做朋友吧！你可以在<a class="ae ky" href="https://www.linkedin.com/in/dhyans/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上找到我或者在<a class="ae ky" href="https://dhyanintech.medium.com/membership" rel="noopener"> Medium </a>上<strong class="lb iu">加入</strong>我。</p></div></div>    
</body>
</html>