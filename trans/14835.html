<html>
<head>
<title>ABC of EDA with Haberman’s Survival Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于哈伯曼生存数据集的EDA基础知识</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/abc-of-eda-with-habermans-survival-dataset-faa23dba9c68?source=collection_archive---------67-----------------------#2020-10-12">https://towardsdatascience.com/abc-of-eda-with-habermans-survival-dataset-faa23dba9c68?source=collection_archive---------67-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/69a41afd558cfbb06ddaba395958cc7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3QgWTL2y9lXZ5_TM"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@nci?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">国家癌症研究所</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="dffb" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">简介</strong></h1><p id="55cf" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">探索性数据分析听起来是一个非常酷的术语，直到你真正了解它是什么。通常被称为“你好，世界！”在机器学习领域，当一个人决定深入分析时，他可能会首先遇到EDA。</p><p id="af93" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">假设我给你30分钟时间来做一个人今天可以做出的最重要的人生决定之一——决定你想买哪部智能手机。在做出最终裁决之前的半个小时里，无论你沉迷于什么程序——无论是查看在线评论、比较规格，还是观看拆箱视频——都是我们所说的“探索性数据分析”。</p><p id="ccba" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">EDA不完全是一种科学工具，而更像是一种哲学，它相信以开放的心态不带偏见地分析数据。这一标准程序有助于人们在对数据进行复杂的机器学习算法之前获得对数据的见解。为了让这次对话更直观，我决定加入我对Kaggle上最基本的数据集之一——哈伯曼癌症生存数据集所做的分析。所以让我们开始吧。</p><h1 id="2452" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">数据集</strong></h1><p id="7732" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">哈伯曼的数据集包含了芝加哥大学比林斯医院在1958年至1970年间对接受乳腺癌手术的患者进行的一项研究的数据。对于数据集。我在分析中使用了Python及其精彩的库(Pandas、Numpy、Matplotlib、Seaborn等)。重要的一点——本文不是编码教程，而是一种机制的概述(<strong class="ld ir">机器学习！=用Python </strong>编码)，所以如果你对一些代码片段感到不知所措——忽略它们，试着专注于我们试图通过它们实现的目标。</p><p id="b753" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">目标</strong>——永远在你的脑海中保持以下口头禅——<em class="me">通过随机运算进行随机分析，会给你随机结果</em>。我们应该非常清楚我们分析的目标，我们执行的每一个操作都应该理想地让我们一点点接近它。例如，这种特殊分析背后的动机是<strong class="ld ir">预测癌症患者的存活几率。</strong></p><p id="0b02" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">首先，我们需要从。csv文件放到我们的数据框中。</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="3b5f" class="mo ke iq mk b gy mp mq l mr ms">import pandas as pd import numpy as np import matplotlib.pyplot as plt import seaborn as sns haberman=pd.read_csv(“haberman.csv”,header=None) <br/>column_names=[“age”,”year”,”axillary_nodes”,”survival_status”] haberman.columns=column_names haberman.survival_status=haberman.survival_status.map({1:”yes”,2:”no”})</span></pre><p id="0f30" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们的数据框实际上是左边的那个，但稍加修改，它看起来就像右边的那个，更容易理解-</p><div class="mf mg mh mi gt ab cb"><figure class="mt jr mu mv mw mx my paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/bcdab8465ba9df6716bee77f17ba89b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*Ug8opTdOegxhmCBQtZU7iw.png"/></div></figure><figure class="mt jr mz mv mw mx my paragraph-image"><img src="../Images/62130c397d3387b9bfeeb561be981f80.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*8oZmYccCV-o0MkKO9oiw8w.png"/></figure></div><p id="2a80" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在继续分析之前，让我让你熟悉一些与我将从这里开始使用的数据集相关的关键词。任何数据集都有以下特征-</p><ol class=""><li id="2f74" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated"><strong class="ld ir">数据点/矢量/观测值</strong> -数据框中的每一行都是一个数据点或一个观测值。它是被记录的<em class="me">实例</em>之一。如果一个数据点有n个特征，我们称之为n维向量。</li><li id="935a" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">特征/输入变量/独立变量</strong> -它是作为预测指标的数据点的组成部分。我们的数据集有3个特征——患者年龄、手术年份和体内腋窝/淋巴结数量。</li><li id="9274" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">标签/类/输出变量/因变量</strong>——我们准备进入这一团乱麻的一件事——做完一切后需要预测的值/结果。标签是在特征的基础上预测的，因此被命名为因变量。在这里，我们需要预测癌症患者的生存机会，这在我们的案例中充当了一个标签。</li></ol><p id="e674" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">为了确定每个类有多少数据点，我们运行一个简单的命令-</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="a2db" class="mo ke iq mk b gy mp mq l mr ms">g=haberman.groupby(“survival_status”).size() g</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/0842e214a4a824010798e6351e8f61e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/format:webp/1*cLMNrRRQPLvaeUa_1vbBYw.png"/></div></figure><p id="fc90" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们可以观察到，在我们的数据集中，有225例患者存活，81例患者死于该疾病。我们可以得出结论，我们的数据集是一个<strong class="ld ir">不平衡数据集</strong>，这是病历案例中常见的观察结果。</p><p id="3999" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">注意，可以用这个简单的命令找出当前的全部观察值(<strong class="ld ir"> 306 </strong>)</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="35ff" class="mo ke iq mk b gy mp mq l mr ms">haberman.shape</span></pre><p id="80fa" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在，我们已经熟悉了我们的数据，让我们前进到真正的东西。</p><h1 id="7a51" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">多元分析-三维散点图</strong></h1><p id="bb8b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">既然我们的数据集有3个要素，为什么不快速查看相同要素的3-d散点图看起来是什么样的-也许我们在这一步就能解决我们的问题？</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="a883" class="mo ke iq mk b gy mp mq l mr ms">import plotly.express as px fig=px.scatter_3d(data_frame=haberman,x=”age”,y=”year”,z=”axillary_nodes”,color=”survival_status”)<br/> fig.show()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/efc2c222c1b8e78364f6f24f8561869e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ERq9AWo2uAbrK7m5E2haw.png"/></div></div></figure><p id="6764" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">正如你自己所看到的，没有任何由人类定义的程序可以帮助我们从混乱中理出头绪。所以回答前面的问题-不，我们不会在第一步就解决我们的问题！</p><h1 id="ef8a" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">双变量分析</strong></h1><p id="913d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">它指的是找到2个特征变量之间的关系，并用它来找到感兴趣的目标变量。双变量分析中最常用的技术是<strong class="ld ir">二维散点图</strong>。配对图是所有可能配对的二维散点图的集合，可从我们的特征中生成。</p><p id="81b1" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">使用配对图背后的动机是识别那些导致2类标签之间最佳区别的特征-生存状态:是和生存状态:否。我使用seaborn来绘制配对图-</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="72e6" class="mo ke iq mk b gy mp mq l mr ms">sns.set_style(“whitegrid”) sns.pairplot(haberman,hue=”survival_status”,size=3) <br/>plt.show()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/0bb352fe504f92e47ab8db1a24a81460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXoEzyXmxubewKoS1poaJA.png"/></div></div></figure><p id="b192" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">注:</strong>仅考虑对角线上方的图形，因为其下方的图形是相同的图形，只是轴颠倒，不会影响我们的观察。</p><p id="5d53" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">注意:</strong>处理配对图的一般工作流程是选择各类别之间重叠最小的图，然后选择这些图中涉及的特征进行进一步分类，以获得最佳结果。</p><p id="5c34" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">来自配对图的观察结果</strong></p><ol class=""><li id="690e" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">年龄与运营年份——高度重叠，因此被丢弃。</li><li id="e18e" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">手术年份与腋窝淋巴结数目-高度重叠，因此被丢弃。</li><li id="8ecb" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">年龄与腋窝淋巴结数目-重叠但优于上述情况。因此，我们将选择这两个特征进行单变量分析。</li></ol><p id="e2d3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">配对图的限制</strong> -当特征的数量达到一个非常大的值时，不可能以一种有效的方式使用配对图进行分类，因为我们将不得不通过大量的图来识别我们的最佳特征。在这种情况下，我们使用特定的数学技术，如PCA和t-SNE ( <em class="me">，这将是下一篇文章讨论的主题！</em>)进行降维。</p><p id="a112" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">结论</strong>——患者年龄和腋窝淋巴结数目是预测生存几率的最佳特征。</p><h1 id="ebb9" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">单变量分析</strong></h1><p id="1ff5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">单变量分析也许是最简单的统计分析形式。关键事实是只涉及一个变量。</p><p id="3a24" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在当今世界，一个变得极为重要的事情是外交的概念，这也是全球所有数据科学家的身体和头脑中根深蒂固的概念。我们总是喜欢谈论机会，而不是预测将会发生什么。)。当我们开始谈论机会的时候，概率就开始起作用了。</p><p id="3720" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">概率密度函数</strong> -它代表连续范围内数据点的密度，帮助我们确定特定结果的可能性。它是通过平滑直方图的边缘形成的。</p><p id="efe5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">患者年龄的PDF</strong></p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="23c5" class="mo ke iq mk b gy mp mq l mr ms">sns.FacetGrid(haberman,hue=”survival_status”,size=5)\ .map(sns.distplot,”age”)\.add_legend();<br/>plt.title(“pdf for survival status labelling on the basis of age”) plt.show();</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/cbca8fe1faac7c9d3705347a30b0ceca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*yFNc9oOstf1jUanhjdUxFg.png"/></div></figure><p id="4341" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">观察-</p><ol class=""><li id="943c" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">我们可以看到，基于年龄的生存状态的PDF在40至65岁之间的两个阶层高度重叠(曲线下的面积几乎相等)。</li><li id="5f1d" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">因此，在40至65岁之间，存活状态为“是”的患者的百分比和存活状态为“否”的患者的百分比几乎相同——因此该特征不适合分类。</li></ol><p id="f16a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">运营年度PDF</strong></p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="f030" class="mo ke iq mk b gy mp mq l mr ms">sns.FacetGrid(haberman,hue="survival_status",size=5)\     .map(sns.distplot,"year")\.add_legend();\<br/>plt.title("pdf for survival status labelling on the basis of year of operation")<br/>plt.show();</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c28c5265c356f938b899f0a3de32a8fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*Fct4LmN0ig6sLFUFvzxt1Q.png"/></div></figure><p id="cc33" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">观察-</p><ol class=""><li id="190b" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">我们可以看到，在1958年和1968年之间，基于运行年份的生存状态pdf再次与两个类别高度重叠。</li><li id="5ebd" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">因此，在1958年和1968年之间，存活状态为“是”的患者的百分比和存活状态为“否”的患者的百分比几乎相同——因此该特征也不适合分类。</li></ol><p id="c80e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">腋窝淋巴结数量的PDF</strong></p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="3433" class="mo ke iq mk b gy mp mq l mr ms">sns.FacetGrid(haberman,hue="survival_status",size=5)\     .map(sns.distplot,"axillary_nodes")\.add_legend();<br/>plt.title("pdf for survival status labelling on the basis of number of axillary nodes")<br/>plt.show();</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c3f595dd4a2bff4b3364ef1ac7e74089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*mxpF-2zZnXO0mZ4T0Ncatw.png"/></div></figure><p id="f018" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">观察-</p><ol class=""><li id="8149" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">基于腋窝淋巴结数量的生存状态的PDF对于2个标记类别具有最小的重叠，并且是我们在进行最佳可能分类方面的最佳尝试。</li><li id="2bf1" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">因此，我们可以利用下面的if-else条件来获得相当准确的结果</li></ol><blockquote class="nu nv nw"><p id="a62b" class="lb lc me ld b le lz lg lh li ma lk ll nx mb lo lp ny mc ls lt nz md lw lx ly ij bi translated"><em class="iq">如果腋窝淋巴结数&gt; =0且&lt;= 3→生存状态=高</em></p><p id="674b" class="lb lc me ld b le lz lg lh li ma lk ll nx mb lo lp ny mc ls lt nz md lw lx ly ij bi translated"><em class="iq">如果腋窝淋巴结数目&gt;= 3→生存状态→低</em></p></blockquote><h1 id="f176" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">基于腋窝淋巴结数量的详细单变量分析</h1><p id="aace" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在知道了我们分类的最佳特征，我们就有机会进行更详细的分析，以获得一些具体的结果。</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="a064" class="mo ke iq mk b gy mp mq l mr ms">y=haberman.survival_status=="yes"<br/>n=haberman.survival_status=="no"<br/>haberman[y]<br/>haberman[n]</span></pre><div class="mf mg mh mi gt ab cb"><figure class="mt jr oa mv mw mx my paragraph-image"><img src="../Images/f7f77fc58e2ac30620e0d479639cae27.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*NhJZU_SpsG8jlrWq51ibow.png"/></figure><figure class="mt jr ob mv mw mx my paragraph-image"><img src="../Images/b0f9f4303d121d768519a11bfa7c03be.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*GXGP95F25nNcPHkHl9QLCw.png"/></figure></div><h2 id="6dbc" class="mo ke iq bd kf oc od dn kj oe of dp kn lm og oh kr lq oi oj kv lu ok ol kz om bi translated"><strong class="ak">对于存活的患者(存活状态:是)</strong></h2><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="e693" class="mo ke iq mk b gy mp mq l mr ms">count,bin_edges=np.histogram(haberman[y].axillary_nodes,bins=20,density=True)<br/>print(count) <br/>print(bin_edges) <br/>pdf=count/sum(count) cdf=np.cumsum(pdf) plt.plot(bin_edges[1:],pdf,’g’,label=”PDF FOR SURVIVAL STATUS YES”) plt.plot(bin_edges[1:],cdf,’b’,label=”CDF FOR SURVUVAL STATUS YES”) plt.xlabel(“NUMBER OF AXILLARY NODES”) <br/>plt.title(“pdf and cdf number of axillary nodes-survival status:YES”) plt.legend() plt.show()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/309df8ba7beabd606ce0a7ced0f1a5f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*8tx8GBS_jaMTsWfSnImr8w.png"/></div></figure><p id="07fb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">观察- </strong></p><ol class=""><li id="e103" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">蓝线显示了所有存活患者的CDF(除了PDF值的累积和之外什么都没有)。</li><li id="58cb" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">从蓝线中，我们可以清楚地看到，大约85%的幸存患者体内的腋窝淋巴结少于5个。</li><li id="f1e2" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">如果腋窝淋巴结&gt; =0、&lt; =5 →生存状态=高→这个说法有85%的几率是正确的。</strong></li><li id="e45c" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">我们还可以从CDF中看到，当腋窝病例的数量达到10个时，存活的机会变得非常低，因为存活的总患者只有10%具有超过10个淋巴结。</li></ol><h2 id="54a2" class="mo ke iq bd kf oc od dn kj oe of dp kn lm og oh kr lq oi oj kv lu ok ol kz om bi translated"><strong class="ak">对于未存活的患者(存活状态:否)</strong></h2><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="36fa" class="mo ke iq mk b gy mp mq l mr ms">count,bin_edges=np.histogram(haberman[n].axillary_nodes,bins=20,density=True)<br/>print(count)<br/>print(bin_edges)<br/>pdf=count/sum(count)<br/>cdf=np.cumsum(pdf)<br/>plt.plot(bin_edges[1:],pdf,'g',label="PDF FOR SURVIVAL STATUS NO")<br/>plt.plot(bin_edges[1:],cdf,'b',label="CDF FOR SURVIVAL STATUS NO")<br/>plt.xlabel("NUMBER OF AXILLARY NODES")<br/>plt.title("pdf and cdf for number of axillary nodes-survival status:NO")<br/>plt.legend()<br/>plt.plot()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/edeeb08c541bf4b58a1ed7d709edf6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*Sdim6EhhljQuR4CTnc802Q.png"/></div></figure><p id="1726" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">观察- </strong></p><ol class=""><li id="8993" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">我们可以从CDF中看到，在所有未存活的患者中，超过60%的患者体内存在3个以上的腋窝淋巴结。</li><li id="c324" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">如果腋窝淋巴结&gt;= 3→生存状态=低→这个说法有60%的几率是正确的。</strong></li></ol><h2 id="dfe6" class="mo ke iq bd kf oc od dn kj oe of dp kn lm og oh kr lq oi oj kv lu ok ol kz om bi translated">结合以上两个图</h2><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="5f30" class="mo ke iq mk b gy mp mq l mr ms">count,bin_edges=np.histogram(haberman[y].axillary_nodes,bins=20,density=True)<br/>pdf=count/sum(count) <br/>cdf=np.cumsum(pdf) <br/>plt.plot(bin_edges[1:],pdf,’g’,label=”PDF FOR SURVIVAL STATUS YES”) plt.plot(bin_edges[1:],cdf,’b’,label=”CDF FOR SURVUVAL STATUS YES”) count,bin_edges=np.histogram(haberman[n].axillary_nodes,bins=20,density=True) <br/>pdf=count/sum(count) cdf=np.cumsum(pdf) plt.plot(bin_edges[1:],pdf,’r’,label=”PDF FOR SURVIVAL STATUS NO”) plt.plot(bin_edges[1:],cdf,’y’,label=”CDF FOR SURVIVAL STATUS NO”) plt.xlabel(“NUMBER OF AXILLARY NODES”) <br/>plt.title(“pdf and cdf for number of axillary nodes for both survival status”) <br/>plt.legend() <br/>plt.plot()<br/></span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/cba6c6644236a2ba3423a5087a1ecb2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*CU8M8atJXYDc0EwGivBKxg.png"/></div></figure><h2 id="97d8" class="mo ke iq bd kf oc od dn kj oe of dp kn lm og oh kr lq oi oj kv lu ok ol kz om bi translated"><strong class="ak">单变量分析的最终观察结果- </strong></h2><p id="b056" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们可以使用下面的if-else条件，通过单变量分析来预测生存的机会-</p><ol class=""><li id="fa73" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated"><strong class="ld ir">如果腋窝淋巴结数&gt; =0，腋窝淋巴结数&lt;= 3→存活几率=高</strong>→这种说法大约有75%的准确性，因为在存活的所有患者中，75%的患者腋窝淋巴结少于3个，25%的患者腋窝淋巴结多于3个。</li><li id="2831" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">如果腋窝淋巴结数目&gt;= 3→存活几率=低</strong>→这种说法大约有60%的准确性，因为在所有未存活的患者中，60%有3个以上的腋窝淋巴结，40%有3个以下的腋窝淋巴结。</li></ol><h1 id="c35a" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">基本统计</strong></h1><ol class=""><li id="18eb" class="na nb iq ld b le lf li lj lm oq lq or lu os ly nf ng nh ni bi translated"><strong class="ld ir">表示</strong> -所有数据点的平均值。整个数据围绕这个中心值展开。</li><li id="7098" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">标准差</strong> -数据围绕中心值扩散的度量。</li><li id="2166" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir"/>-当所有数据点从最少到最多排列时的中间值(集中趋势的另一种度量)。中位数优于平均值，原因很简单，它受数据集中异常值或极值的影响最小。在一半的数据点被破坏之前，中值不会受到太大影响。</li></ol><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="058d" class="mo ke iq mk b gy mp mq l mr ms">print(“for all the patients who survived: \n”) <br/>#to check the central value <br/>print(“mean number of axillary nodes: {} \n”.format(np.mean(haberman[y].axillary_nodes))) </span><span id="bff4" class="mo ke iq mk b gy ot mq l mr ms">#to check the spread about the central value<strong class="mk ir"> </strong><br/>print(“standard deviation from the mean number of axillary nodes: {} \n”.format(np.std(haberman[y].axillary_nodes))) </span><span id="f989" class="mo ke iq mk b gy ot mq l mr ms">#to check the central value which is least affected by outliers print(“the middle value or the median number of axillary nodes: {} \n”.format(np.median(haberman[y].axillary_nodes)))</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ou"><img src="../Images/d054cd91eecb6faa861425f37413874e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qi14JJ2mn2NcvToOVOvC_Q.png"/></div></div></figure><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="4e3e" class="mo ke iq mk b gy mp mq l mr ms">print(“for all the patients who did not survive: \n”) <br/>#to check the central value <br/>print(“mean number of axillary nodes: {} \n”.format(np.mean(haberman[n].axillary_nodes))) </span><span id="349e" class="mo ke iq mk b gy ot mq l mr ms">#to check the spread about the central value <br/>print(“standard deviation from the mean number of axillary nodes: {} \n”.format(np.std(haberman[n].axillary_nodes))) </span><span id="ba92" class="mo ke iq mk b gy ot mq l mr ms">#to check the central value which is least affected by outliers print(“the middle value or the median number of axillary nodes: {} \n”.format(np.median(haberman[y].axillary_nodes)))</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ov"><img src="../Images/b0adf7bff530304e393690437b651927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sk8fQ4bFL5PYawupsjMNBQ.png"/></div></div></figure><h2 id="097b" class="mo ke iq bd kf oc od dn kj oe of dp kn lm og oh kr lq oi oj kv lu ok ol kz om bi translated"><strong class="ak">观察- </strong></h2><ol class=""><li id="4115" class="na nb iq ld b le lf li lj lm oq lq or lu os ly nf ng nh ni bi translated">所有存活的患者平均有2.8个腋窝淋巴结，偏差为5.8。</li><li id="9817" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">所有未存活的患者平均有7.5个腋窝淋巴结，偏差为9.1。</li></ol><h1 id="af07" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">高级统计</strong></h1><ol class=""><li id="fa80" class="na nb iq ld b le lf li lj lm oq lq or lu os ly nf ng nh ni bi translated"><strong class="ld ir">百分位数- </strong>通常以低于数据集中特定值的总值的百分比来表示。例如，如果我说45分代表一次测试中的85 %,那么这意味着参加测试的学生中有85%的人得分低于45分。</li><li id="6db9" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">分位数- </strong>一个有趣的术语，用来表示第25、50、75和100百分位。第50百分位不过是中值。</li><li id="0c8e" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">分位数范围(IQR) </strong> -第25个百分位和第75个百分位之间的差值。有些人也用它作为标准偏差的代表来分析价差，因为50%的总值都在这个范围内。</li></ol><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="c01c" class="mo ke iq mk b gy mp mq l mr ms">print(“for all the patients who survived: \n”) </span><span id="abad" class="mo ke iq mk b gy ot mq l mr ms">print(“number of axillary nodes at 75th percentile: {} \n”.format(np.percentile(haberman[y].axillary_nodes,75))) </span><span id="cf30" class="mo ke iq mk b gy ot mq l mr ms">print(“the quantiles are nothing but the values at 0th,25th,50th,75th percentile”) </span><span id="0db6" class="mo ke iq mk b gy ot mq l mr ms">print(“the quantiles for the number of axillary nodes:”) print(np.percentile(haberman[y].axillary_nodes,np.arange(0,100,25))) </span><span id="5098" class="mo ke iq mk b gy ot mq l mr ms">print(“the inter quantile range is the difference of the value at the 75th and the 25th percentile”) <br/>print(“the inter quantile range for number of axillary nodes in patients who survived is:”) x=np.percentile(haberman[y].axillary_nodes,75) y=np.percentile(haberman[y].axillary_nodes,25) <br/>print(x-y)</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ow"><img src="../Images/a9ea91a6bfa1c4f4b53c6698a69aa41d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiqrd8gc0GmshihjrkY27Q.png"/></div></div></figure><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="feea" class="mo ke iq mk b gy mp mq l mr ms">print(“for all the patients who did not survive: \n”) </span><span id="478d" class="mo ke iq mk b gy ot mq l mr ms">print(“number of axillary nodes at 75th percentile: {} \n”.format(np.percentile(haberman[n].axillary_nodes,75))) <br/>print(“the quantiles are nothing but the values at 0th,25th,50th,75th percentile”)<br/> <br/>print(“the quantiles for the number of axillary nodes:”) print(np.percentile(haberman[n].axillary_nodes,np.arange(0,100,25))) </span><span id="e45e" class="mo ke iq mk b gy ot mq l mr ms">print(“the inter quantile range is the difference of the value at the 75th and the 25th percentile”) <br/>print(“the inter quantile range for number of axillary nodes in patients who did not survive is:”) x=np.percentile(haberman[n].axillary_nodes,75) y=np.percentile(haberman[n].axillary_nodes,25) <br/>print(x-y)</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/04c86f112a6acf708d73666217ff14d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uaDjM-neKfuiaVfgPKgfXw.png"/></div></div></figure><h1 id="df1b" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">箱形图-分位数的特殊图</h1><p id="8a27" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">直方图和pdf的一个主要问题是，它只能告诉我们特定事件发生的可能性。它没有给我们任何关于在某一点之前发生的可能性的线索。</p><p id="479b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">CDF在一定程度上解决了这个问题，但是如果我们想要更多的直觉呢？这就是箱形图的用武之地，它是专门用来处理分位数的。</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="6c6e" class="mo ke iq mk b gy mp mq l mr ms">sns.boxplot(x=”survival_status”,y=”axillary_nodes”,data=haberman) plt.title(“box plot for number of axillary nodes”) <br/>plt.show()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/5fbce483192615817ee4e33a4b2f0399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*7MYt44aWP3bwv4ZwqiktuA.png"/></div></figure><p id="e1ce" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">考虑橙色的方框图-</p><ol class=""><li id="c372" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">下面的线代表第25百分位。</li><li id="5675" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">中间的线代表第50(中间)百分位数。</li><li id="abfd" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">上面的线代表第75百分位。</li><li id="052f" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">方框的高度代表分位数区间。</li><li id="8d65" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">延伸的垂直线被称为胡须，其长度是分位数间距的1.5倍。</li></ol><h1 id="a325" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">小提琴情节-两全其美！</h1><p id="791c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">到目前为止，我们已经讨论了用于讨论数据密度的直方图/pdf和用于讨论分位数的箱线图。如果我告诉你，有另一种情节把两者结合在一起呢？</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="d380" class="mo ke iq mk b gy mp mq l mr ms">sns.violinplot(x="survival_status",y="axillary_nodes",data=haberman)<br/>plt.title("violin plot for number of axillary nodes")<br/>plt.show()</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/4ea85369dd9ac2d8b8fb013ac64de3db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*9y9r2N7DWHet1kpqQzVcJQ.png"/></div></figure><ol class=""><li id="addf" class="na nb iq ld b le lz li ma lm nc lq nd lu ne ly nf ng nh ni bi translated">小提琴内部的盒子充当盒子情节。</li><li id="af71" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">具有不同密度的外部小提琴充当PDF。如果观察有倾斜头部的小提琴——它看起来就像讨论概率密度函数时观察到的钟形曲线！</li></ol><h1 id="ac09" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">总结分析</h1><ol class=""><li id="2caa" class="na nb iq ld b le lf li lj lm oq lq or lu os ly nf ng nh ni bi translated">永远不要忘记任何分析背后的动机，因为EDA的性能与其目标是一致的。</li><li id="97ed" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">一个好的做法是在完成后用简单明了的英语记下每种调查方法的结果，以便任何人都能理解。</li></ol><h1 id="8c4f" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="6e91" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">利用本文中讨论的各种分析工具和技术，我们通过从中得出结论性的结果，成功地探索了Haberman的癌症生存数据集。</p></div><div class="ab cl pa pb hu pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="ij ik il im in"><p id="2379" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><em class="me">原载于2020年10月12日</em><a class="ae kc" href="https://mahavirdabasmd.wixsite.com/blog/post/abc-of-eda-with-haberman-s-survival-dataset" rel="noopener ugc nofollow" target="_blank"><em class="me">【https://mahavirdabasmd.wixsite.com】</em></a><em class="me">。</em></p></div></div>    
</body>
</html>