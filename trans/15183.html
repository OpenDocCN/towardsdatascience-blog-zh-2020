<html>
<head>
<title>Bollinger Bands for stock trading — Theory and practice in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">股票交易的布林线Python中的理论与实践</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bollinger-bands-for-stock-trading-theory-and-practice-in-python-7d3e79d30e02?source=collection_archive---------13-----------------------#2020-10-19">https://towardsdatascience.com/bollinger-bands-for-stock-trading-theory-and-practice-in-python-7d3e79d30e02?source=collection_archive---------13-----------------------#2020-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e39f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们看看Python中一个简单但有效的交易工具</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ead19259fd6853982b1cd5aff951f572.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0_mULrNKiU8Y5pOG"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9771" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">量化交易者经常寻找能发现趋势或反转的交易工具。这类工具应该能够自我适应市场条件，并试图以最准确的方式描述当前形势。</p><p id="a038" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将讨论布林线以及如何在Python中使用它们。</p><p id="9d01" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="lu">注来自《走向数据科学》的编辑:</em> </strong> <em class="lu">虽然我们允许独立作者根据我们的</em> <a class="ae lv" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="lu">规则和指导方针</em> </a> <em class="lu">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae lv" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="lu">读者术语</em> </a> <em class="lu">。</em></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3350" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">布林线有哪些？</h1><p id="e69e" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">布林线是量化交易者约翰·布林格在20世纪80年代推出的工具。它们由两条线组成，以与波动性相关的方式包裹价格时间序列。波动性越高，波动幅度越大。</p><p id="f920" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它们通常以这种方式绘制:</p><ul class=""><li id="c13b" class="na nb it la b lb lc le lf lh nc ll nd lp ne lt nf ng nh ni bi translated">高波段:20周期简单移动平均线加上2倍的20周期滚动标准差，两者都是基于收盘价计算的</li><li id="6734" class="na nb it la b lb nj le nk lh nl ll nm lp nn lt nf ng nh ni bi translated">较低波段:20期简单移动平均线减去2倍20期滚动标准差，两者都是根据收盘价计算的</li></ul><p id="d8c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是应用于标准普尔500指数的SPX ETF的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ead19259fd6853982b1cd5aff951f572.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0_mULrNKiU8Y5pOG"/></div></div></figure><p id="4be1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你所看到的，波段试图包裹价格，但当价格突破它们时，会发生一些特殊的事件，我们可以利用这些事件来建立许多交易策略。</p><h1 id="0d5a" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">布林线策略</h1><p id="5643" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">让我们看看一些可以用布林线发现的交易设置。</p><h2 id="552e" class="nt me it bd mf nu nv dn mj nw nx dp mn lh ny nz mp ll oa ob mr lp oc od mt oe bi translated">拒绝</h2><p id="8b53" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">二元期权交易者最常用的方法是将布林线视为动态支撑和阻力。一旦价格打破了一个波段，一般认为它可能会回到均线。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/902541eb0c100ca1e5023c895a5a5e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lDG-qCJTvcHrXbRW"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">突破和拒绝模式。图片由作者提供。</p></figure><p id="f938" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，虽然这种方法看起来不错，但布林格自己通常建议将波段与另一个指标结合使用，例如，振荡指标。我们将看到打破波段通常不是一个反向信号。</p><h2 id="68f6" class="nt me it bd mf nu nv dn mj nw nx dp mn lh ny nz mp ll oa ob mr lp oc od mt oe bi translated">骑着乐队</h2><p id="67c1" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">如果趋势强劲，一些蜡烛的价格可能会接近一个区间。这是因为强劲的趋势意味着高波动性，所以波段扩大，价格跟随他们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c55a0d300ef90a41d1514270e9b34e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5bn_hWozIDXjXOQI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">价格波动很大。图片由作者提供。</p></figure><h2 id="5fed" class="nt me it bd mf nu nv dn mj nw nx dp mn lh ny nz mp ll oa ob mr lp oc od mt oe bi translated">w和M模式</h2><p id="be58" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">一组非常常用的模式是W-M模式。前者与后者相反。当价格打破下波段，然后上涨，然后再次下跌，最后上涨而没有再次打破波段时，出现w形态。真的好像画了个W字母。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5966e988f6e197b05f02d544c74b2ad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MwJXOsMzyB49YTnn"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">w模式示例。图片由作者提供。</p></figure><p id="eb98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当价格突破上带时，出现M型形态，然后在没有再次突破上带的情况下形成新的最大值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b5f5018a66e961a1fcb259e09ed0b5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2Tp0wtFsA3fZBxOf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">m模式示例。图片由作者提供。</p></figure><p id="b65a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些模式通常被认为是动量的减少，所以它们以相反的方式使用。w形态看涨，M形态看跌。</p><h2 id="edd9" class="nt me it bd mf nu nv dn mj nw nx dp mn lh ny nz mp ll oa ob mr lp oc od mt oe bi translated">挤压和破裂</h2><p id="4acc" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">不要忘记，市场波动会随着时间的推移而变化，有些低波动期会引发市场的大规模定向爆发。布林线可以很容易发现这种情况。你必须寻找一个市场条件，其中波段是平坦的，其宽度是恒定的。这被称为“挤压”，因为波动性正在降低。然后，你必须寻找一个巨大的蜡烛突破。这是价格定向爆发的前奏，你可以沿着突破的方向交易。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5736614344f594e1326c515bc707792e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FzrrsSJWn25bTVTT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">挤例子。图片由作者提供。</p></figure><h1 id="c6a5" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">布林线参数</h1><p id="cf11" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">布林线有两个参数:均线和标准差的周期(相同)以及标准差的乘数。</p><p id="de5f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">20周期的SMA经常被用来捕捉中期运动，所以20周期的值是根据经验选择的。</p><p id="03d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们来谈谈标准差的乘数。根据正态分布，一个正态变量的值有接近95%的概率远离均值2个标准差以上。这就是2这个数字的由来。</p><p id="f27e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，我们知道价格不遵循正态分布。根据几何布朗运动模型，对数正态分布是价格分布的一个很好的近似。而且根据<a class="ae lv" href="https://en.wikipedia.org/wiki/Chebyshev%27s_inequality" rel="noopener ugc nofollow" target="_blank">切比雪夫不等式</a>，任何一个有限方差的随机变量，其值远离均值超过2个标准差的概率小于25%。所以，这相当高，与正常情况下的5%有很大不同。</p><p id="65be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">约翰·布林格本人建议使用一组略有不同的参数，根据某些特定情况改变乘数和周期。</p><p id="ea2a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，20-2组合被广泛认为几乎是交易的标准。</p><h1 id="9c75" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">Python中的一个例子</h1><p id="525b" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">用Python计算布林线非常容易。我们将利用标准普尔500的历史数据来看看如何做到这一点。完整的代码可以在我的GitHub知识库中找到:<a class="ae lv" href="https://github.com/gianlucamalato/machinelearning/blob/master/Bollinger_Bands.ipynb" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/gianlucamalato/machine learning/blob/master/Bollinger _ bands . ipynb</a></p><p id="abc8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们安装yfinance:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="8df3" class="nt me it og b gy ok ol l om on">!pip install yfinance</span></pre><p id="02b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后让我们导入一些库:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="2c8f" class="nt me it og b gy ok ol l om on">import yfinance<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span></pre><p id="296d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们从标准普尔500指数中导入一些数据:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="65aa" class="nt me it og b gy ok ol l om on">name = "SPY"</span><span id="388e" class="nt me it og b gy oo ol l om on">ticker = yfinance.Ticker(name)</span><span id="385c" class="nt me it og b gy oo ol l om on">df = ticker.history(interval="1d",start="2020-01-15",end="2020-07-15")</span></pre><p id="1e42" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以定义周期和乘数:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="c65c" class="nt me it og b gy ok ol l om on">period = 20<br/>multiplier = 2</span></pre><p id="058f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以最终计算波段:</p><pre class="kj kk kl km gt of og oh oi aw oj bi"><span id="a0d1" class="nt me it og b gy ok ol l om on">df['UpperBand'] = df['Close'].rolling(period).mean() + df['Close'].rolling(period).std() * multiplier</span><span id="1c5d" class="nt me it og b gy oo ol l om on">df['LowerBand'] = df['Close'].rolling(period).mean() - df['Close'].rolling(period).std() * multiplier</span></pre><p id="8f6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后的图表是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/79d734df6121f236747a60d10cd6e2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YC2iuZ84jAWR3moyS5u8Fg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="9208" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你看到的，波段包装的价格就像预期的一样。</p><h1 id="96c1" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">结论</h1><p id="9966" class="pw-post-body-paragraph ky kz it la b lb mv ju ld le mw jx lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">布林线在交易中非常有用，计算也非常简单。使用这种动态工具的不同策略会导致不同的结果，因此应该对交易策略进行良好的回溯测试，以微调指标的参数。</p></div></div>    
</body>
</html>