<html>
<head>
<title>How to Get Market Data from the NYSE in Less than 3 Lines (Python).</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从纽交所获取不到3行的市场数据(Python)。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-get-market-data-from-the-nyse-in-less-than-3-lines-python-41791212709c?source=collection_archive---------5-----------------------#2020-09-19">https://towardsdatascience.com/how-to-get-market-data-from-the-nyse-in-less-than-3-lines-python-41791212709c?source=collection_archive---------5-----------------------#2020-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d30e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本文中，您将学习使用Python包获取股票市场数据，如价格、交易量和基本面数据。(<em class="ki">不到3行代码</em>)</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/12db3d1f39576d0b4d22ae74c2216d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*my_5OnxqbuLzMIXy"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@aditya1702?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aditya Vyas </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6cb8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> <em class="lw">来自《走向数据科学》编辑的提示:</em> </strong> <em class="lw">虽然我们允许独立作者根据我们的</em> <a class="ae kz" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="lw">规则和指南</em> </a> <em class="lw">发表文章，但我们并不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae kz" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="lw">读者术语</em> </a> <em class="lw">。</em></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="ef27" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，您将学习使用Python包获取股票市场数据，如价格、交易量和基本面数据。(<em class="lw">中不到3行代码</em>)</p><p id="1848" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">首先，在开始之前，您需要安装Python 3版本和以下软件包:</p><ul class=""><li id="0a92" class="me mf it lc b ld le lg lh lj mg ln mh lr mi lv mj mk ml mm bi translated">熊猫</li><li id="98e0" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated">熊猫_datareader</li><li id="38ea" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated">日期时间</li></ul><p id="276d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果这些软件包中的任何一个尚未安装，您可以使用如下所示的pip命令。</p><pre class="kk kl km kn gt ms mt mu mv aw mw bi"><span id="b9a4" class="mx my it mt b gy mz na l nb nc">pip install pandas-datareader<br/>pip install DateTime</span></pre><p id="2f43" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一旦您确保安装了以下软件包，我们就可以开始了。</p><blockquote class="nd ne nf"><p id="44b9" class="la lb lw lc b ld le ju lf lg lh jx li ng lk ll lm nh lo lp lq ni ls lt lu lv im bi translated">如果你已经有了使用Python的经验，你可以跳到第三步。第一步和第二步包括导入数据并转换为日期格式。</p></blockquote><h2 id="3e1e" class="mx my it bd nj nk nl dn nm nn no dp np lj nq nr ns ln nt nu nv lr nw nx ny nz bi translated">一、进口包装</h2><p id="ad50" class="pw-post-body-paragraph la lb it lc b ld oa ju lf lg ob jx li lj oc ll lm ln od lp lq lr oe lt lu lv im bi translated">第一步将包括导入必要的包。</p><p id="b187" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">首先，您将使用以下代码行导入先前安装的软件包:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="of og l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">上面的代码行用于导入python库。</p></figure><p id="f5b1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="lw">从pandas_datareader库中，我准备只导入数据和wb模块</em><strong class="lc iu"><em class="lw"/></strong><em class="lw">。</em></p><p id="0ec9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一旦我们设置好了，让我们进行下一步。</p><p id="6408" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在库已经导入，第二步<strong class="lc iu">将由<strong class="lc iu">将</strong>日期转换成<strong class="lc iu">日期时间格式</strong>组成。</strong></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h2 id="4dd3" class="mx my it bd nj nk nl dn nm nn no dp np lj nq nr ns ln nt nu nv lr nw nx ny nz bi translated">二。将日期转换为日期时间格式</h2><p id="5b8d" class="pw-post-body-paragraph la lb it lc b ld oa ju lf lg ob jx li lj oc ll lm ln od lp lq lr oe lt lu lv im bi translated">如果您之前已经转换过日期，则此步骤不是强制性的。但是，如果您没有，我建议您使用下面的代码行:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="of og l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">在上面的代码行中，Python将日期从字符串格式转换为日期时间格式。</p></figure><p id="0cad" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你会注意到，关于结束日期，我故意用今天作为结束日期。这是DateTime模块的优点之一。它将不断地让你的笔记本保持最新的日期。</p><blockquote class="nd ne nf"><p id="ffc8" class="la lb lw lc b ld le ju lf lg lh jx li ng lk ll lm nh lo lp lq ni ls lt lu lv im bi translated">例如，如果您在3个月后重新运行您的内核，您的数据框架和图表将会用最新的市场数据进行更新。</p></blockquote><p id="3508" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">设置好开始和结束日期后，我们现在可以导入市场数据。</p><h2 id="6d03" class="mx my it bd nj nk nl dn nm nn no dp np lj nq nr ns ln nt nu nv lr nw nx ny nz bi translated">三。使用Yahoo Finance或Alpha Vantage API导入数据</h2><p id="f363" class="pw-post-body-paragraph la lb it lc b ld oa ju lf lg ob jx li lj oc ll lm ln od lp lq lr oe lt lu lv im bi translated">既然我们已经以正确的格式转换了开始和结束日期。我们将使用<strong class="lc iu"> Tesla </strong>作为例子来设置我们的导入。</p><p id="e94a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Pandas DataReader API将需要4个强制参数，顺序如下:</p><ul class=""><li id="f585" class="me mf it lc b ld le lg lh lj mg ln mh lr mi lv mj mk ml mm bi translated">心脏</li><li id="934f" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated">特定的API(雅虎、AlphaVantage、sooq……)</li><li id="6990" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated">开始日期</li><li id="c6aa" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated">结束日期</li><li id="722e" class="me mf it lc b ld mn lg mo lj mp ln mq lr mr lv mj mk ml mm bi translated"><em class="lw">和潜在的API密钥</em></li></ul><p id="2633" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于我们的例子，股票代码将是<strong class="lc iu"> TSLA </strong>，API将是<strong class="lc iu">雅虎</strong>，开始和结束日期已经在上面定义了(从2020年2月4日<strong class="lc iu">到今天</strong>)。快速提醒一下，特斯拉的股票代码是<strong class="lc iu"> TSLA </strong>。</p><p id="bf22" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">因此，让我们通过使用下面的代码行来尝试这种组合:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="e4bf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们检查一下输出…</p><h1 id="eac2" class="oh my it bd nj oi oj ok nm ol om on np jz oo ka ns kc op kd nv kf oq kg ny or bi translated">输出:</h1><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi os"><img src="../Images/29f87e0a90f067aa6145e300fd706222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*Bl3rjn1qPA_uml_qOJgKmA.png"/></div></figure><p id="50a1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">嘣！！！</p><p id="556d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你得到的市场数据包括成交量、最高价、最低价、开盘价和调整收盘价。</p><p id="7cee" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我希望你喜欢这篇文章，如果你有任何问题或使用不同的方式，评论如下。</p><p id="5c7c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">赛义德·莱萨尼</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h1 id="8724" class="oh my it bd nj oi ot ok nm ol ou on np jz ov ka ns kc ow kd nv kf ox kg ny or bi translated">完整的Python代码:</h1><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="of og l"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><h2 id="7445" class="mx my it bd nj nk nl dn nm nn no dp np lj nq nr ns ln nt nu nv lr nw nx ny nz bi translated">来源:</h2><p id="e37a" class="pw-post-body-paragraph la lb it lc b ld oa ju lf lg ob jx li lj oc ll lm ln od lp lq lr oe lt lu lv im bi translated">(1)一天学会算法交易:</p><div class="oy oz gp gr pa pb"><a href="https://www.udemy.com/course/learn-algorithmic-trading-in-one-day/?couponCode=TOWARDSCIENCE" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd iu gy z fp pg fr fs ph fu fw is bi translated">一天学会算法交易(美国大选更新)</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">交易707是数据科学家和交易员的结合。我们都在伦敦工作和生活。我们觉得累了…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">www.udemy.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp kt pb"/></div></div></a></div></div></div>    
</body>
</html>