<html>
<head>
<title>7 Points to Use Matplotlib More Efficiently</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更有效地使用Matplotlib的7个要点</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-points-to-use-matplotlib-more-efficiently-53a1b318b8b1?source=collection_archive---------41-----------------------#2020-10-19">https://towardsdatascience.com/7-points-to-use-matplotlib-more-efficiently-53a1b318b8b1?source=collection_archive---------41-----------------------#2020-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3aed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解结构，美化你的情节</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/aa778d130456b8cca7012bef6c6a8e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PwSPD0vizMYiNa4JGI0c8w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢卡斯·本杰明在<a class="ae ky" href="https://unsplash.com/s/photos/paint?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4b02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib是一个广泛使用的Python数据可视化库。在某些情况下，它的语法可能很乏味，但它提供了对情节的大量控制。</p><p id="2cbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中解释的七点都与matplotlib的结构和对绘图做小调整的语法有关。</p><p id="a470" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重要的是要很好地了解结构，以便我们理解如何创建和渲染复杂的情节。因此，我们将从结构概述开始。然后，我们会看到几个有助于创造高级剧情的招数。</p><h2 id="0997" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak"> 1。脚本层</strong></h2><p id="34c4" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Matplotlib由三层组成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl mt"><img src="../Images/5d838c348cb472179305f469dbc11681.png" data-original-src="https://miro.medium.com/v2/format:webp/0*PiofEUipH5AbgbM7.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="7771" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">脚本层是matplotlib.pyplot接口。当我们在下面的命令后使用“plt”创建图时，脚本层就是我们所使用的。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="05b5" class="lv lw it mv b gy mz na l nb nc">import matplotlib.pyplot as plt</span></pre><p id="357e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">脚本层使得创建情节相对容易，因为它自动化了将所有东西放在一起的过程。因此，它是数据科学家使用最广泛的图层。</p><h2 id="3f61" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">2.后端层</h2><p id="9d15" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">除非你是开发人员，否则不要太担心这一层。后端层由三个抽象类组成，分别是FigureCanvas、Renderer和Event。下面的类比将为后端层如何工作提供一些见解。</p><p id="364c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设你想画一幅画。你得到一张白纸(图画布)和一个画笔(渲染器)。你问你朋友画什么(事件)。</p><h2 id="5211" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">3.艺术家层</h2><p id="e2f8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这一层由艺术家对象组成。它是Matplotlib的核心对象。我们在图上看到的一切都是artist对象的一个实例。</p><p id="881b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有两种类型的艺术家对象:</p><ul class=""><li id="712e" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated">复合:图形，轴</li><li id="3e68" class="nd ne it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">图元:直线、圆、文本</li></ul><h2 id="b464" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">4.图形和轴</h2><p id="ab48" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">人物是艺术家的主要对象，它将一切联系在一起。假设你为晚餐准备了4种不同的开胃菜。你不能用手端给他们。上菜的好方法是把它们放在盘子里。盘子是图形对象，开胃菜是绘图的组成部分，如线条、刻度、标签等。</p><p id="943b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用脚本层创建一个图形。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="7477" class="lv lw it mv b gy mz na l nb nc">import matplotlib.pyplot as plt</span><span id="25ca" class="lv lw it mv b gy nr na l nb nc">plt.figure()<br/>&lt;Figure size 432x288 with 0 Axes&gt;</span></pre><p id="4a35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们创建了一个图形，但上面没有任何内容可以构成一个情节。我们需要向Figure添加一个Axes对象来创建一个实际的绘图。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="87f1" class="lv lw it mv b gy mz na l nb nc">plt.figure(figsize=(8,5)).add_subplot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/0602e99c2eea7a95af37a14ed3a7e747.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*DBvTt1ttXjHPVuhM0j1ccA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="5778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为没有数据，所以还是一个空图。绘图功能可用于将数据传递给轴。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="8235" class="lv lw it mv b gy mz na l nb nc">arr = np.random.random(100)<br/>plt.figure(figsize=(8,5)).add_subplot().plot(arr)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/aff3a711af7bb291a80ad0f02a754d22.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*uLTdVNdYAj5WKVaH3uk3XA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="6d56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经看到了Matplotlib结构的概述。下一个技巧将是关于如何在图上做小的调整。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h2 id="0425" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak"> 5。Xticks和Yticks </strong></h2><p id="8e22" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这些功能用于调整x轴和y轴上的刻度标签和位置。默认设置通常是合适的，但在某些情况下可能需要进行细微的调整。</p><p id="13a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是xticks和yticks用于修改绘图的示例。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="0ac5" class="lv lw it mv b gy mz na l nb nc">plt.figure(figsize=(10,6))<br/>plt.bar(x=[1,2,3,4], height=[3,5,1,6])</span><span id="bd11" class="lv lw it mv b gy nr na l nb nc">plt.xticks(ticks=[1,2,3,4],<br/>labels=['Sunday','Monday','Tuesday','Wednesday'], rotation="45", fontsize=12)</span><span id="1f0c" class="lv lw it mv b gy nr na l nb nc">plt.yticks(ticks=np.arange(10), fontsize=12)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/be76b563ae043c76af10aa8c134798d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*NZY_RbuabH08NA02LAetaw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="4c23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">旋转参数旋转标注，这在长标注的情况下非常有用。它们甚至可能重叠，这绝对不是所希望的。</p><p id="b808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们不调整，y轴上的范围将是0-6。我认为如果顶部有一个空间会更好看。我有时会利用这个空间添加文本或注释。</p><h2 id="f444" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak"> 6。添加文本</strong></h2><p id="1f50" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">文字可以用来指出某事或给情节增加额外的信息。text函数提供了一种灵活的方式，可以调整文本的位置、字体大小和样式。我们甚至可以把文本放在一个盒子里。</p><p id="9bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码将在前面的绘图中添加一个文本框。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="c0cc" class="lv lw it mv b gy mz na l nb nc">plt.text(1, 8, '2020 Averages', style='oblique', fontsize=15,<br/>bbox={'facecolor': 'grey', 'alpha': 0.5, 'pad': 5})</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/63e1b31d7f15784fcff86c0b2a27d8c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*uXm4NNZwYaatoZx67Z2kNg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="17bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本功能可应用于pyplot (plt)界面或Axes对象。</p><h2 id="f1e8" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated"><strong class="ak"> 7。创建一个有支线剧情的人物</strong></h2><p id="74b8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在某些情况下，我们需要在同一个图形上有多个图。Matplotlib提供了不同的方法来生成这样的图。subplots函数创建一个具有一组subplots的图形。</p><p id="e6c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们指定行数和列数，然后创建一个绘图网格。支线剧情的数量是行数和列数的乘积。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="34ba" class="lv lw it mv b gy mz na l nb nc">fig, (ax1, ax2) = plt.subplots(nrows=1, ncols=2,<br/>                               sharey=True, figsize=(8,5))</span><span id="e515" class="lv lw it mv b gy nr na l nb nc">ax1.plot(np.random.random(30))<br/>ax2.plot(np.random.random(30)*5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/1d5bdab490158bec3733279e32b66279.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*DGmmTrcd2ni5SGsK8ztfYg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure><p id="1289" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为每个子情节都被分配给一个axes对象，所以我们可以完全控制它们。下面的代码将分别编辑ax1和ax2。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="29ab" class="lv lw it mv b gy mz na l nb nc">ax1.set_title("Measurement1", fontsize=14)<br/>ax1.text(1,4, "Before Noon", fontsize=12)</span><span id="b7ac" class="lv lw it mv b gy nr na l nb nc">ax2.set_title("Measurement2", fontsize=14)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/94ad46e3a71c3eeb20fffb3a3f09c317.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*_umXh60flX3zEmTmat6qcg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</p></figure></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><blockquote class="od oe of"><p id="b1d4" class="kz la og lb b lc ld ju le lf lg jx lh oh lj lk ll oi ln lo lp oj lr ls lt lu im bi translated">注:除非另有说明，所有图片均由作者创作。</p></blockquote><h1 id="5805" class="ok lw it bd lx ol om on ma oo op oq md jz or ka mg kc os kd mj kf ot kg mm ou bi translated"><strong class="ak">结论</strong></h1><p id="b76f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们在这篇文章中介绍的只是Matplotlib功能的一小部分。我分享的一些信息可以被认为是细节，而其中一些是非常基本的。然而，它们都有助于充分利用Matplotlib。</p><p id="8080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和其他学科一样，掌握Matplotlib的最好方法是实践。一旦您熟悉了基本功能，就可以继续使用更高级的功能。</p><p id="4a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>