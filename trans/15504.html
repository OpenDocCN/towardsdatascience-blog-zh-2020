<html>
<head>
<title>Start using Linux commands to quick analyze structured Data, not Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始使用Linux命令快速分析结构化数据，而不是熊猫</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/start-using-linux-commands-to-quick-analyze-structured-data-not-pandas-f63065842269?source=collection_archive---------29-----------------------#2020-10-25">https://towardsdatascience.com/start-using-linux-commands-to-quick-analyze-structured-data-not-pandas-f63065842269?source=collection_archive---------29-----------------------#2020-10-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/dcb549ad6b5686cb9ccdcd3d29e82d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LC7PxS91ZeB7gI4U1jHb-A.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@garri?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">弗拉季斯拉夫</a>在<a class="ae kf" href="https://unsplash.com/s/photos/choose?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f11f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时我们需要快速分析或验证我们的结构化数据。一般来说，人们倾向于使用熊猫，因为它看起来简单而且视觉效果好。熊猫的问题是，如果你有大量数据，它可能会超级慢。</p><p id="6ce4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还有另一个选择，那就是Linux命令。Linux命令运行速度非常快(即使是在海量数据上)，你甚至不需要IDE/笔记本来运行它。你可以在你的终端上执行它们。</p><p id="36f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我准备用本教程中著名的<a class="ae kf" href="https://www.kaggle.com/c/titanic/data" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">泰坦尼克</strong> </a>数据作为例子。此外，为了更好地显示，我将在Jupyter笔记本中编写这些Linux命令(仅针对本教程)。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="957f" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">我们开始吧</h2><p id="1ef0" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我们在某个位置有一个名为<code class="fe mj mk ml mm b">titanic.csv</code>的CSV文件。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/6785c9358adaaa2560bc5133d4b938be.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*5q6W4XBh7Z1zuf07pAO_sQ.png"/></div></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="d5fa" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">行数</h2><p id="98e4" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我们先检查一下行数。我们可以使用<a class="ae kf" href="https://linux.die.net/man/1/wc" rel="noopener ugc nofollow" target="_blank"> WC </a> <strong class="ki iu"> </strong>命令来完成。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="96b5" class="ll lm it mm b gy mw mx l my mz">wc -&lt;option&gt; &lt;file&gt;</span></pre><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/4b96deb3be2ed6bdbc557df6f074574f.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*ZGgDUYNY0NCPev4KlWJa-A.png"/></div></div></figure><p id="a199" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">WC代表字数。它可以读取一个文件的行数(<code class="fe mj mk ml mm b">-l</code>)、字数(<code class="fe mj mk ml mm b">-w</code>)和字符数。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="08ce" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">先睹为快</h2><p id="0cab" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">通过做<a class="ae kf" href="https://linux.die.net/man/1/head" rel="noopener ugc nofollow" target="_blank">头</a>我们可以轻松地瞥一眼数据。我们可以检查列名和样本值。这和我们在熊猫身上做的一样。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="7b4d" class="ll lm it mm b gy mw mx l my mz">head &lt;file&gt;</span></pre><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/c920b6da79daa70c85f749c83f494efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*vZ9MixbA2Xt1fyXpF6IPcQ.png"/></div></figure><p id="83bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想看到一个具体的行数，然后做</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="ba98" class="ll lm it mm b gy mw mx l my mz">head -n &lt;num_lines&gt; &lt;file&gt;</span></pre><p id="8f90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，您可以看到数据的<code class="fe mj mk ml mm b">tail</code>，它显示了数据的最后一部分。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="e0c2" class="ll lm it mm b gy mw mx l my mz">tail -n &lt;num_lines&gt; &lt;file&gt;</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="35a7" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">逐列分析</h2><p id="bc23" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">列在结构化数据中很重要，您可以从数据中剪切/提取特定的列并对其进行分析。</p><p id="2119" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<a class="ae kf" href="https://linux.die.net/man/1/cut" rel="noopener ugc nofollow" target="_blank"> CUT </a>命令来提取特定的列。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="f1a2" class="ll lm it mm b gy mw mx l my mz">cut -d'&lt;delim&gt;' -f&lt;col_num&gt; &lt;file&gt;</span></pre><p id="8567" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我删除了第5栏和第6栏(性别和年龄),而忽略了这两栏。您还可以提供列范围。例如，<code class="fe mj mk ml mm b">f1–3</code>将提取第1、2和3列。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/78d3c81fad9d97ea74a001d2eb6553ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*ZeBMtv0qg6BxVjAYurK11Q.png"/></div></figure><p id="6592" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Linux中管道(<code class="fe mj mk ml mm b">|</code>)是一个非常有用的操作符。我们可以使用管道在其他命令的输出上运行一个命令，就像我上面做的那样。首先，我提取了2列，然后做了标题。我们现在会经常看到管道的使用。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="21cd" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">检查列的最小值-最大值</h2><p id="0500" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">很多时候我们需要知道列的值域。这里我们可以使用<a class="ae kf" href="https://linux.die.net/man/1/sort" rel="noopener ugc nofollow" target="_blank">排序</a>命令来完成任务。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="7577" class="ll lm it mm b gy mw mx l my mz">sort &lt;option&gt; &lt;file&gt;</span></pre><p id="9fe0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们检查年龄列中的最大值。基本上是泰坦尼克号上年纪最大的人。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/55157f998449f0c0caf243945d37d844.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*GPxDBA45Yp6IwFLVyq_j7g.png"/></div></figure><p id="661c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们看到它是80。首先，我们剪切年龄列，然后以逆序(<code class="fe mj mk ml mm b">-nr</code>)对该列进行排序，然后跳过它。</p><p id="491d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过提供标志<code class="fe mj mk ml mm b">-n</code>以数字顺序对列进行排序，通过提供标志<code class="fe mj mk ml mm b">-nr</code>以相反的数字顺序对列进行排序。如果我们不提供<code class="fe mj mk ml mm b">-n</code>标志，那么一列按字典顺序排序。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="1bef" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">检查列中的唯一值</h2><p id="8623" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">在这个数据中，我们有一个名为cabin的列，它告诉乘客所在的客舱ID。让我们看看泰坦尼克号上总共有多少个船舱。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/14d2d43d4f5a83aeed3bdc72b3083e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*5tzEiV_l_x7WCaa0vRROQA.png"/></div></figure><p id="cd2d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们看到总共有149个船舱。首先我剪切了cabin列，然后通过传递<code class="fe mj mk ml mm b">-u</code>标志对该列进行排序，该标志只给出唯一的值。然后计算这些唯一值的数量。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="c637" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">在数据中搜索</h2><p id="57b1" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">很多时候，我们需要在数据中搜索文本。我们可以使用<a class="ae kf" href="https://linux.die.net/man/1/grep" rel="noopener ugc nofollow" target="_blank"> GREP </a>命令来完成。我假设你已经熟悉了<a class="ae kf" href="https://docs.python.org/3/howto/regex.html" rel="noopener ugc nofollow" target="_blank"> regex </a>(正则表达式)。</p><pre class="mo mp mq mr gt ms mm mt mu aw mv bi"><span id="fb4b" class="ll lm it mm b gy mw mx l my mz">grep &lt;option&gt; "&lt;regex&gt;" &lt;file&gt;</span></pre><p id="2244" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们想要查看乘客姓名以<code class="fe mj mk ml mm b">john</code>开头的所有记录。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/0fb486cb47a329fbf257953ace1d5cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*Czgsg1KKDky6Sj7GoCClSQ.png"/></div></figure><p id="bf1a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mj mk ml mm b">grep</code>命令搜索所有行中的文本<code class="fe mj mk ml mm b">john</code>并打印匹配的行。参数<code class="fe mj mk ml mm b">-i</code>在匹配时忽略大小写。我们在执行grep时提供了一个正则表达式。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="6afd" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">检查列中的空值</h2><p id="533f" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">让我们检查年龄列中空值的数量。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/24a1ed5f80d863f1ed4daef596c6c182.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*cjlMnmgFPHc2aGrn0_I-SA.png"/></div></figure><p id="5265" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们删除年龄列，然后使用<code class="fe mj mk ml mm b">^$</code> regex清空空行。数一数这样的线。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="1ba2" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">检查范围内的值</h2><p id="c2a5" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">让我们查一下有多少乘客年龄在10岁以下。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/6056a9dfa96c1cdff0e86971d2db6d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*HsS7k89iyLXEpH-wNifQTg.png"/></div></figure><p id="b9a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有62名这样的乘客。基本上，如果你知道如何使用正则表达式，你可以在一个命令中做很多这样强大的事情。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h2 id="2fb4" class="ll lm it bd ln lo lp dn lq lr ls dp lt kr lu lv lw kv lx ly lz kz ma mb mc md bi translated">最后一个例子:)</h2><p id="5963" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">假设我们想要检查在车祸中幸存的男性人数。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/af18b7a52d5066f6ef5ae43b22c1ad17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*7a3SIAM4z5X0HIvquNnIhg.png"/></div></figure><p id="f2b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我选择包含<code class="fe mj mk ml mm b">male</code>单词的行。然后剪切第2(幸存)列，然后重新标记其中值为1的行(其中1幸存，0未幸存)。然后最后计算行数。所以我们有161个。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="2eb6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只需使用一个简单的Linux命令就可以完成几乎所有的基本分析，这个命令即使在处理大量数据时也运行得非常快。一旦你开始使用这些命令，你会发现你可以用它做更多的事情。</p><p id="d5c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇博客对你有所帮助。请让我知道你的想法。感谢阅读。</p></div></div>    
</body>
</html>