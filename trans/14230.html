<html>
<head>
<title>How To Build And Deploy Your Dashboard With Python, Google Sheets, and Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python、Google Sheets和Vue.js构建和部署您的仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-and-deploy-your-dashboard-with-python-google-sheet-and-vue-js-c34140c1afc8?source=collection_archive---------5-----------------------#2020-10-01">https://towardsdatascience.com/how-to-build-and-deploy-your-dashboard-with-python-google-sheet-and-vue-js-c34140c1afc8?source=collection_archive---------5-----------------------#2020-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4335" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="861c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">部署仪表板的实用指南，无需服务器。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/cb68993e41ce5e3924bdb1397613de09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XF0UAQyUV1bW7VN5"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Stephen Dawson 在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="fc04" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">数据的可视化让我们能够快速洞察。但是，部署数据可视化解决方案可能会很困难，因为大多数时间都需要购买许可证或服务器。</p><p id="aa96" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在本文中，我们将看到如何使用免费工具构建一个仪表板来呈现一些虚假销售，您可以下载数据<a class="ae lh" href="https://drive.google.com/file/d/1fuQXmQkYx3t8QIjBcLTZCeINjlV5zwoU/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>以便遵循教程。</p><p id="802d" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">首先，我们将使用Python来填充一个Google sheet。然后，我们将使用Vue.js创建一个使用<a class="ae lh" href="https://echarts.apache.org/en/" rel="noopener ugc nofollow" target="_blank"> apache Echart </a>和<a class="ae lh" href="https://vuetifyjs.com/en/" rel="noopener ugc nofollow" target="_blank"> Vuetify </a>的仪表板。最后，我们将使用Github action在GitHub页面上部署这个仪表板。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="2c2c" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">要求</h2><p id="2bb4" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">要遵循本指南，您需要具备以下条件:</p><ul class=""><li id="8a48" class="ni nj it lr b ls lt lv lw ly nk mc nl mg nm mk nn no np nq bi translated">一个谷歌账户</li><li id="554c" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">gcloud命令行工具</li><li id="3dcb" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">Python 3.7或更高版本</li><li id="136f" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">Github账户</li></ul></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="8c40" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">设置Google cloud帐户</h2><p id="cf2d" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">我将使用google cloud命令行工具来设置google cloud帐户。如果你不熟悉google cloud SDK，你可以在这里找到适合你平台的快速入门。</p><p id="cd75" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">让我们来配置我们的谷歌云项目:</p><ol class=""><li id="904e" class="ni nj it lr b ls lt lv lw ly nk mc nl mg nm mk nw no np nq bi translated">使用<code class="fe nx ny nz oa b">gcloud create project &lt;project_id&gt;</code>创建新项目</li><li id="6884" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nw no np nq bi translated">将新创建的项目设置为其他命令的默认项目:<code class="fe nx ny nz oa b">gcloud config set project &lt;project_id&gt;</code></li><li id="2083" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nw no np nq bi translated">启用google sheet API和Drive API:<br/><code class="fe nx ny nz oa b">gcloud services enable sheets.googleapis.com</code><br/>T3】</li><li id="1bd3" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nw no np nq bi translated">为python脚本创建一个服务帐户:<code class="fe nx ny nz oa b">gcloud iam service-accounts &lt;name_of_service_account&gt;</code></li><li id="aded" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nw no np nq bi translated">从服务帐户:<br/> <code class="fe nx ny nz oa b">gcloud iam service-accounts keys create &lt;local_path_to_download.json&gt; --iam-account &lt;name_of_service_account&gt;@&lt;project_id&gt;.iam.gserviceaccount.com</code>创建并下载凭证</li><li id="8920" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nw no np nq bi translated">为Vue.js应用程序创建API密钥:</li></ol><ul class=""><li id="eb54" class="ni nj it lr b ls lt lv lw ly nk mc nl mg nm mk nn no np nq bi translated">导航到云控制台中的<a class="ae lh" href="https://console.cloud.google.com/apis/credentials" rel="noopener ugc nofollow" target="_blank">API&amp;服务→凭证</a>面板</li><li id="6441" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">选择<strong class="lr jd">创建凭证</strong>，然后从下拉菜单中选择<strong class="lr jd"> API key </strong>。</li><li id="965e" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated"><strong class="lr jd"> API密钥创建</strong>对话框显示您新创建的密钥，<strong class="lr jd">保存它以备后用。</strong></li><li id="2f05" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">然后点击“编辑”,在“限制API”部分选中“限制关键字”选项，选择“Google工作表API ”,然后点击“保存”。</li></ul><p id="46b0" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">接下来，我们将创建一个脚本，使用Python将仪表板数据推送到Google sheets。</p><h2 id="ca0c" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">将数据框架推送到Google sheets</h2><p id="79e6" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">Python脚本将需要一些依赖关系，以便将数据推送到Google。用:<code class="fe nx ny nz oa b">pip install pandas pygsheets</code>安装它们，然后创建一个目录和一个Python文件，并复制下面的脚本。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ob oc l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将数据框上传到新的谷歌工作表来源:作者</p></figure><p id="233f" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这个脚本中，我们首先用前面创建的凭证文件初始化Google sheets客户机。然后，我们创建一个全新的谷歌表，我们与我们的谷歌帐户共享它，这样我们就可以在谷歌驱动可视化它。我们还公开了我们的工作表，以便Vue应用程序可以访问它。接下来，我们创建3个工作表，并为每个工作表上传一个熊猫数据框。最后，我们打印<strong class="lr jd">工作表id，保存它</strong>，因为我们将在下一部分中需要它来构建Vue.app。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="bb15" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">构建仪表板</h2><p id="1cc2" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">为了简单起见，我们将使用Vue.js构建仪表板，不使用任何构建工具。首先，在根目录下创建一个<code class="fe nx ny nz oa b">dist</code>文件夹，在里面创建一个<strong class="lr jd">index.html</strong>文件，内容如下。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ob oc l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">仪表板代码来源:作者</p></figure><p id="3cd4" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们来破个码，Vue app是从161行到245行定义的。首先，有一个数据部分，其中我们声明了包含来自Google sheet的数据的对象，以及一个包含与Google sheet数据匹配的指标的数组。</p><p id="1b87" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">接下来，我们有一个允许我们通过Google sheets API恢复数据的函数。这个方法使用从第80行到第160行定义的类。这个类是在mounted部分初始化的，它在参数中接受工作表的id和您的API键，<strong class="lr jd">，所以请确保用您自己的</strong>替换这些值。</p><p id="1d46" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">然后在计算部分，我们声明我们的图表变量。如你所见，它们都遵循相同的模式。我们首先引用数据所在的工作表，然后为每个图表声明列、行和不同的设置。</p><p id="6ef7" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">最后，我们使用HTML格式的数据可视化库<a class="ae lh" href="https://echarts.apache.org/en/" rel="noopener ugc nofollow" target="_blank">电子图表</a>,从第26行到第45行，根据我们声明的变量来呈现我们的图表。现在，如果你打开你的<strong class="lr jd">index.html</strong>文件，你应该会看到这样一个仪表板:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/7ad8ce740a71e3347cc0a33fb2f24864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXpSSU-3D_Bdpf4FGp1MzQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">index.html仪表板来源:作者</p></figure></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="86e9" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">在GitHub页面上部署</h2><p id="ca27" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">我们现在将使用Github操作在GitHub页面上部署我们的仪表板。为此，您必须在您的GitHub帐户上创建一个新目录。然后，您将需要创建一个<strong class="lr jd"> GitHub个人访问令牌</strong>以便能够使用GitHub操作，点击<a class="ae lh" href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">此处</strong> </a>查看如何生成一个。</p><p id="5457" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">您需要选择您想要授予这个令牌的作用域，确保选择<code class="fe nx ny nz oa b">repo</code>复选框以便能够在GitHub页面上部署。</p><p id="f0e2" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">现在，您需要在GitHub存储库中创建一个秘密，以便部署操作可以使用您创建的令牌。查看官方文档<a class="ae lh" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets" rel="noopener ugc nofollow" target="_blank">此处</a>了解如何继续。命名秘密访问令牌。</p><p id="6bf1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">一旦你配置好了，你就可以在你的项目的根文件夹中创建一个目录树<code class="fe nx ny nz oa b">.github/worflows</code>，它将包含下面的<code class="fe nx ny nz oa b">main.yml</code>文件。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ob oc l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">GitHub工作流来源:作者</p></figure><p id="b93d" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">现在您已经定义了您的工作流，在您的GitHub远程repo上推送您的项目。如果一切正常，你可以在以下网址看到仪表盘:<br/>https:/&lt;<strong class="lr jd">your-github-username</strong>&gt;. github . io/&lt;<strong class="lr jd">repo-name</strong>&gt;/。</p><p id="e239" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">最后，转到<a class="ae lh" href="https://console.cloud.google.com/apis/credentials" rel="noopener ugc nofollow" target="_blank">您在谷歌云控制台上的凭证</a>点击编辑您的API密钥，并在应用程序限制部分:</p><ul class=""><li id="1183" class="ni nj it lr b ls lt lv lw ly nk mc nl mg nm mk nn no np nq bi translated">选中选项:HTTP推荐人(网站)</li><li id="b0aa" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">点击添加一个项目</li><li id="0627" class="ni nj it lr b ls nr lv ns ly nt mc nu mg nv mk nn no np nq bi translated">在输入表单中输入你的Github页面的URL:<br/>https:/&lt;<strong class="lr jd">your-Github-username</strong>&gt;. Github . io/&lt;<strong class="lr jd">repo-name</strong>&gt;/。</li></ul></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="746b" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">缺点和限制</h2><p id="c5a1" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">API密钥在这里被用作调用Google APIs的认证方法。这个方法只允许你读取公开的工作表，所以不要使用本教程来部署敏感数据。</p><p id="9691" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">对于这种用法，您必须通过本指南 中的 <a class="ae lh" href="https://developers.google.com/sheets/api/guides/authorizing" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">所示的<strong class="lr jd"> oauth2认证协议。</strong></strong></a></p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h2 id="28e4" class="ml mm it bd mn mo mp dn mq mr ms dp mt ly mu mv mw mc mx my mz mg na nb nc iz bi translated">结论</h2><p id="8152" class="pw-post-body-paragraph lp lq it lr b ls nd kd lu lv ne kg lx ly nf ma mb mc ng me mf mg nh mi mj mk im bi translated">在本文中，我们看到了如何部署一个由Google sheet支持的简单仪表板。该仪表板读取引用工作表中的数据。如果您想更新数据，您只需更新Google sheet工作簿，单击刷新按钮，它就会反映在仪表板上。最后，由于GitHub action，仪表板的部署是自动化的。</p><p id="6ffa" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">如果您有兴趣通过电子邮件发送您的仪表板或报告，请查看这篇文章。</p><div class="oe of gp gr og oh"><a href="https://medium.com/swlh/automate-your-reporting-with-python-and-vue-js-15ef130fff8" rel="noopener follow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd jd gy z fp om fr fs on fu fw jc bi translated">使用Python、Vue.js和Gmail自动化您的报告流程</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">一个具体的一步一步的例子，自动化您的报告，而不需要服务器。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">medium.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov lb oh"/></div></div></a></div></div></div>    
</body>
</html>