<html>
<head>
<title>Predicting Retention Curve with MCMC Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用MCMC方法预测保留曲线</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predicting-retention-curve-with-mcmc-method-311b36a3cf5b?source=collection_archive---------19-----------------------#2020-09-20">https://towardsdatascience.com/predicting-retention-curve-with-mcmc-method-311b36a3cf5b?source=collection_archive---------19-----------------------#2020-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7c4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">贝叶斯方法预测给定群组的保留曲线，以估计未来的回报率</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7c2f625eb56b4d4953c3296dd8cb038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MS1pzDQF1uGi5wuR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@jjrocha?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">赫苏斯·罗查</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ffe8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嘿伙计们，</p><p id="27d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，我将介绍我最近开发的一个解决方案，用于预测给定群组的保留曲线。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a966" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">定义</h1><p id="2dd1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">总的来说，留存是一个衡量你给应用带来的用户粘性的指标。例如，7天后的高保留率表明你为应用程序带来的用户会停留很长一段时间，从而给你一个他们是优质用户的指示。</p><p id="e443" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保留曲线看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/493d3ed2578104210682acead8844e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*7lX9FUv8BDPn2_zbxLuPxA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保留曲线</p></figure><p id="8abf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，正如我们所料，它从一个非常高的位置开始，在一个群体的早期，用户倾向于坚持更多。我们看到保留曲线的指数衰减，这也高度表征了应用程序中用户的行为。</p><p id="2c9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这篇文章中的目的是<strong class="lb iu">预测给定群组</strong>的精确曲线，以估计这些用户对应用程序的忠诚度，我们预测这个给定群组会有多少活跃用户，等等。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4059" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">预测保留率的3种方法</strong></h1><p id="691c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">因此，在理解了保持意味着什么之后，我们可以继续思考手头问题的可能解决方案。</p><ol class=""><li id="34d4" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><strong class="lb iu">平均保留曲线<br/> </strong>这个解决方案可能是最直观的。我们只是选取许多群组，观察他们的行为，然后对他们的行为进行平均，形成平均保留曲线。有了这条保持曲线，我们将通过假设新的群组接近平均行为来估计它们。</li><li id="529c" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><strong class="lb iu">仅基于现有数据拟合曲线<br/> </strong>通过这种方法，我们将收集给定群组的相关信息，即我们已经拥有的其保留曲线的现有点(例如，对于5岁的群组，我们已经可以使用该群组保留曲线的前4天来估计其完整的30天保留曲线)，并尝试基于观察到的数据拟合曲线。</li><li id="8608" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><strong class="lb iu">同时考虑1和2的MCMC方法<br/> </strong>当我们可以从两种方法中获益时，为什么只使用一种方法？在这种贝叶斯方法中，我们使用队列曲线上的先验知识，以及迄今为止我们获得的实际数据。</li></ol><p id="6169" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在整篇文章中介绍这三种方法，并对它们进行比较，以获得估计保留曲线的最佳方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d884" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">制定保留曲线</h1><p id="8b40" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们旅程的下一步是以参数的方式制定保留曲线。</p><p id="2596" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们已经讨论过的，保留曲线类似于指数衰减。由于这个原因，我们可以用公式表示这条曲线:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/3b21614a25bf92a9f8056b641fbc048f.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/0*gVbsmRuu6kv4hVI0"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">保留曲线公式</p></figure><p id="83dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个方程中我们有两个参数:<strong class="lb iu"> b(截距)和c(斜率)。<br/> </strong>我们可以看到，当使用这种估计来描述我们之前看到的保留曲线的行为时，我们可以很好地描述保留曲线:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/a25a323eecade038c142ed2414d1333f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*oag9WmjK22cEOiPgkGJHSw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">实际行为与公式化行为</p></figure><p id="9a2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们在上面建议的3种方法中的目的是估计参数b和c，以便使曲线尽可能接近。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="129b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">方法评价和比较</h1><p id="6a18" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">方法1:平均保留曲线<br/> </strong>在这一节中，我们将寻求找到我们的保留曲线的平均行为。<br/>正如我们在上一节中看到的，由于曲线可以用参数方式定义，我们可以找到我们群组分布的平均值b和c。这些平均值将作为平均保留曲线。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/07f97fb4950a9f7af2d76a9189577087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*r6YAK4JmFcAYk0c2MpJBMw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">平均保留曲线性能</p></figure><p id="a03d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们从上面的图中看到的，平均曲线显示了不错的结果，平均误差接近0，误差条在实际保留曲线的+-2.5%左右徘徊。</p><p id="bac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">方法2:平均保留曲线</strong></p><p id="e38d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这一部分，我们将展示的性能实际上取决于我们实际拥有的数据量。从逻辑上讲，我们拥有的数据越多，我们就越准确。<br/>例如，基于5天的数据，我们得到相当糟糕的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/87ade77ac158a614692ba1458a6d587e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*LfaTIZeg6k7t3ze8utB3xA.png"/></div></figure><p id="d967" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，与方法1相比，我们不再处于0%误差线上，因为我们看到向下移动。然而，标准偏差确实降低了。这是由于我们对每个群体的个人待遇。</p><p id="0801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，如果我们等待更多的数据，我们可以获得比方法1好得多的结果。例如，以下是基于18天而非5天数据的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4790c5a0d392425c3a275ac46041977a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*xBFrXjoho5rZEMlgM16Gfw.png"/></div></figure><p id="0630" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哇！这是一个很大的进步。与方法1相比，我们实现了非常低的误差和低得多的可变性。</p><p id="21c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后两张图可以作为第三种方法的介绍。<br/>我们已经看到，在不同的情况下，我们从两种方法中获得了优势。<br/>当缺乏数据时，我们可能更喜欢坚持平均曲线，但当我们有足够多的数据时，我们将不再需要平均行为，因为我们已经可以依赖我们从特定群体中看到的。</p><p id="7c07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种思维方式完全符合方法3中的贝叶斯方法。<br/>在贝叶斯方法中，我们将有一个<strong class="lb iu">先验</strong>(在这种情况下，将由平均保留曲线参数表示)、一个<strong class="lb iu">似然函数</strong>(将由我们到目前为止看到的实际数据表示)，从这两个部分，我们将形成一个<strong class="lb iu">后验、</strong>，它将包含从两个部分收集的信息并形成一个统一的度量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/8bce8f367cba217a4617f1011f958461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LCQlbCeeOzAbWgp7"/></div></div></figure><p id="69ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于我们没有归一化常数，我们将使用<strong class="lb iu"> MCMC </strong>算法来克服这个障碍。</p><p id="f03d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">方法3:基于MCMC的保留曲线<br/> </strong>使用所解释的方法，我们将在5天的数据后获得这些结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/af6609d68fce1b5ef8b215005abe786a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*VTZ2skuSCLhQF9VA1Sz60A.png"/></div></figure><p id="1dba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，当证据不足时，新的(绿色)方法停留在先前的数据上。实际数据有一定的权重，但它并没有对基于后验的模型产生很大影响。</p><p id="b030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，基于18天的数据:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6b5426c27830a8d5b701a2c803ed45cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*g3qI68eehq-rMIwC0ufk0w.png"/></div></figure><p id="5acb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在看到后验是如何向实际数据转移的，而把先验知识留在后面。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8b5c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">摘要</h1><p id="3cc2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们通过三种方法来估计保留曲线。<br/>一种是基于平均行为，一种是基于实际数据，表现最好的是MCMC方法，它同时考虑了实际数据和先前数据。</p><p id="4b5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这些信息对你有用，也能帮助你形成公司的保留曲线！</p></div></div>    
</body>
</html>