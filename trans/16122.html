<html>
<head>
<title>Explore your activity on Google with R: How to Analyze and Visualize Your Search History</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用R探索你在Google上的活动:如何分析和可视化你的搜索历史</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/explore-your-activity-on-google-with-r-how-to-analyze-and-visualize-your-search-history-1fb74e5fb2b6?source=collection_archive---------21-----------------------#2020-11-06">https://towardsdatascience.com/explore-your-activity-on-google-with-r-how-to-analyze-and-visualize-your-search-history-1fb74e5fb2b6?source=collection_archive---------21-----------------------#2020-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ade0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用一份你的个人资料，找出你是如何使用这个世界上最流行的搜索引擎的，以及使用了多少。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9267e8814e3ee03b3d364fefe455340f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SgaJFUmkApZeaBeu1JnX8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">仪表板，以查看您的谷歌搜索活动历史。文末的链接。</p></figure><p id="f96e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你能想象一个没有世界上最流行的搜索引擎的世界吗？亲爱的读者，我敢打赌，如果你年龄在18至25岁之间，接触字典或百科全书对你来说不是日常生活的一部分，就像我们许多人在年轻时那样。</p><p id="e326" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如今，任何人都可以点击鼠标找到答案、知识、信息(和错误信息)。这就是为什么我觉得能够看看我们的个人消费习惯是如何变化的很有趣，特别是如果你有很长的历史，因为你打开了谷歌的大门，找到了关于你的一切。</p><h1 id="41f7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">我在哪里可以获得我的数据的副本？</h1><p id="c143" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">多亏了<strong class="la iu">谷歌外卖</strong>，谷歌提供了一个工具来查阅你使用过的任何产品中存储的数据，你可以查阅你的搜索历史。你必须输入https://takeout.google.com/settings/takeout<a class="ae mr" href="https://takeout.google.com/settings/takeout" rel="noopener ugc nofollow" target="_blank">的网址</a>才能登录你的个人账户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/1e5093419e7b80a2d054fbbfb63a341d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIfJuFO_u1kV84Usc3K4Qw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:谷歌外卖网站</p></figure><p id="e9f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以要求您的数据或副产品的完整副本，或者只选择单个产品的某些特征。对于我们来说，为了本文的目的，选择<strong class="la iu">“我的活动”</strong>就足够了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/6168d018817fb06f4c7f95857cc661c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*8d5JOm47bC_g-K0ojxqOfQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:我在谷歌外卖的活动选择</p></figure><p id="9781" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还建议您确保取消选中它包含的其余选项，只保留<strong class="la iu">“Search”</strong>选项，以减少它将生成的文件的重量和交付时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/25b67af2051462674a870702fb02a7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*SLIJK6uTS0Y0Dm5qnNVSEQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:搜索选择，在我在谷歌外卖的活动中</p></figure><p id="ee61" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完成后，您必须选择<strong class="la iu">“导出一次”</strong>并选择<strong class="la iu">。zip </strong>交付格式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/9f947d00d47b7e56a4c1cefbb7d3f3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzbOwJ_aa1JxI941Guko4g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:生成。压缩谷歌外卖</p></figure><p id="f417" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">瞧，现在你只需要耐心等待你选择的内容的副本生成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/0791f16959d4eafc54c4f7c6c046188b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v451lkZjgStdQufusC8_tA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:确认谷歌外卖生成的文件</p></figure><p id="0fb0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">文件生成后，您将会收到一封通知电子邮件，邀请您下载该文件，出于安全原因，该文件的截止日期会在指定日期之前。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/a0d28b0fb2a9317af087dc25375f84a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gqo2he4fJUHKMioaInZDRg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:谷歌外卖的数据下载通知邮件</p></figure><p id="3f8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当你打开。在您下载的zip文件中，您会发现一个名为<strong class="la iu">“my activity . html”</strong>的文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/090df8596b5f33f14f9c5d4283626fcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*_36XGK6080mBVK0flB1WKQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:解压后的文件夹结构。活力</p></figure><p id="45e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个HTML文件包含您在Google中搜索历史的完整数据，从您第一次使用搜索引擎开始，直到您使用Google外卖生成这个数据副本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/6bb34de50bdc926229d0891f80a90e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrGOxp8PXzn9tv4VYC0_Ig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图:谷歌搜索历史HTML文件</p></figure><h1 id="cbfa" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">读取导出的数据</h1><p id="1402" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">现在，您可以继续处理在新的R脚本中获得的信息。首先，您必须包含您将使用的所有软件包，并建立对您的搜索历史记录的读取，这些记录包含在“我的活动”文件夹中的“搜索”文件夹内的文件<strong class="la iu">“My Activity . html”</strong>中。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="fe26" class="ne lv it na b gy nf ng l nh ni"># REQUIRED LIBRARIES<br/>library(wordcloud)<br/>library(lubridate)<br/>library(rvest)<br/>library(tm)<br/>library(tidyverse)</span><span id="716f" class="ne lv it na b gy nj ng l nh ni"># READ DATA<br/>fileHTML &lt;- "Takeout/My Activity/Search/MyActivity.html"<br/>mySearchFile &lt;- read_html(fileHTML, encoding = "UTF-8")</span></pre><p id="7047" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您将提取您感兴趣的数据，并使用<strong class="la iu">“rvest”</strong>包对HTML进行web清理。这样，使用正则表达式，您可以提取搜索的日期和时间、搜索的文本以及您在Google上进行的搜索类型，从而创建包含所有这些信息的数据框。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="06b1" class="ne lv it na b gy nf ng l nh ni"># SCRAPPING SEARCH DATE AND TIME<br/>dateSearch &lt;- mySearchFile %&gt;% <br/>  html_nodes(xpath = '//div[<a class="ae mr" href="http://twitter.com/class" rel="noopener ugc nofollow" target="_blank">@class</a>="mdl-grid"]/div/div') %&gt;% <br/>  str_extract(pattern = "(?&lt;=&lt;br&gt;)(.*)(?&lt;=PM|AM)") %&gt;%<br/>  mdy_hms()<br/>dateSearch[1:5]</span><span id="54c7" class="ne lv it na b gy nj ng l nh ni"># SCRAPING SEARCH TEXT<br/>textSearch &lt;- mySearchFile %&gt;% <br/>  html_nodes(xpath = '//div[<a class="ae mr" href="http://twitter.com/class" rel="noopener ugc nofollow" target="_blank">@class</a>="mdl-grid"]/div/div') %&gt;%<br/>  str_extract(pattern = '(?&lt;=&lt;a)(.*)(?=&lt;/a&gt;)') %&gt;% <br/>  str_extract(pattern = '(?&lt;=\"&gt;)(.*)')<br/>textSearch[1:5]</span><span id="dea1" class="ne lv it na b gy nj ng l nh ni"># SCRAPING SEARCH TYPE<br/>searchType &lt;- mySearchFile %&gt;% <br/>  html_nodes(xpath = '//div[<a class="ae mr" href="http://twitter.com/class" rel="noopener ugc nofollow" target="_blank">@class</a>="mdl-grid"]/div/div') %&gt;% <br/>  str_extract(pattern = "(?&lt;=mdl-typography--body-1\"&gt;)(.*)(?=&lt;a)") %&gt;% <br/>  str_extract(pattern = "(\\w+)(?=\\s)")<br/>searchType[1:5]</span><span id="6469" class="ne lv it na b gy nj ng l nh ni"># CREATE DATA FRAME USING SCRAPED DATA<br/>searchedData &lt;- tibble(timestamp = dateSearch,<br/>                      date = as_date(dateSearch),<br/>                      year = year(dateSearch),<br/>                      month = month(dateSearch, label = TRUE),<br/>                      day = weekdays(dateSearch),<br/>                      hour = hour(dateSearch),<br/>                      type = searchType,<br/>                      search = textSearch)</span><span id="23ad" class="ne lv it na b gy nj ng l nh ni">searchedData$day &lt;- factor(searchedData$day, levels = c("Sunday", "Monday", "Tuesday", "Wednesday","Thursday", "Friday", "Saturday"))</span><span id="977b" class="ne lv it na b gy nj ng l nh ni">searchedData &lt;- na.omit(searchedData)<br/>head(searchedData)</span></pre><p id="66d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，您将获得一个包含8个变量的新数据框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/ba3c39d5ffcef91a24e8f37ebe75856a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*WzOHKln1ahCBEQWWb2ZMDQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">屏幕截图:从HTML创建的数据框的控制台预览</p></figure><h1 id="5265" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">随着时间的推移，你在谷歌上搜索的频率发生了多大的变化？</h1><p id="317c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这可能是你可以回答的第一个问题。根据获得的信息，您可以查看与您的历史年份相关的搜索次数。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="f1b0" class="ne lv it na b gy nf ng l nh ni"># PLOT SEARCHED BY YEAR<br/>searchByYear &lt;- ggplot(searchedData, aes(year, fill=..count..)) +<br/>  scale_fill_gradient(low = "yellow", high = "red")+<br/>  geom_bar(width=0.7)+<br/>  labs(x= "Year", y= "Count") + <br/>  ggtitle("How much your search frequency has changed over time", "Search activity by year")<br/>searchByYear<br/>ggplotly()</span></pre><p id="b7d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以我为例，我的历史从2007年延续到2020年的今天。也就是说，13年的搜索量表示如下。与2014年之前的几年相比，有非常显著的增长，在2014年之前，我主要继续使用雅虎搜索引擎，而且在我看来，必须考虑到越来越快的互联网连接也促进了向谷歌进行越来越多查询的可能性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/da9e4eca86f0ec2a1d0c9886eec3dbbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bs7j4ywv0A0BNMDZPFT0uQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化您的个人数据搜索历史——每年搜索次数的图表</p></figure><h1 id="1643" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">随着时间的推移，你在谷歌上搜索的频率发生了多大的变化？(按月详细查看)</h1><p id="74c5" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">你可以对之前获得的结果进行更深入的挖掘，现在可视化你在谷歌上搜索的频率发生了多大的变化，按你的历史记录中的月份进行详细描述。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="77b5" class="ne lv it na b gy nf ng l nh ni"># PLOT SEARCH BY MONTH<br/>searchByMonth &lt;- searchedData[(searchedData$year &gt; 2007 &amp; searchedData$year&lt; 2021), ]<br/>ggplot(searchByMonth, aes(year, fill=..count..)) + <br/>  scale_fill_gradient(low = "yellow", high = "red")+<br/>  geom_bar(aes(x = month, group = year)) +<br/>  theme(axis.text.x = element_text(angle=90)) +<br/>  facet_grid(.~year, scales="free") + <br/>  labs(x= "Year / Month", y= "Count") + <br/>  ggtitle("How much your search frequency has changed over time", "Month activity on detail")</span></pre><p id="3760" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">亲爱的读者，我几乎可以肯定，像我一样，如果你仔细观察，很多事情都与搜索次数的增加有关，这些搜索是关于贵国疫情新冠肺炎迫使你更多地呆在家里的最糟糕的几个月，因此也与你的手机、平板电脑和可以上网的电脑等设备有关。例如，就我而言，我认为2020年的最高纪录与我居住的国家(墨西哥)的红灯(关闭所有非必要的设施和在家远程工作)重合并非巧合。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/f0a204cd18e9c751efd9372b41226446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbbZWAyK6ZHazWzd78e1fA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化您的个人数据搜索历史——每年/每月搜索次数的图表</p></figure><h1 id="553c" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">你一天中什么时候最常谷歌？</h1><p id="14d8" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">您也可以获得这些信息，因为您有使用流行的Google引擎进行搜索的准确时间的记录。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2569" class="ne lv it na b gy nf ng l nh ni"># PLOT SEARCH BY HOUR<br/>searchByHour &lt;- ggplot(searchedData, aes(hour, fill=..count..)) +<br/>  scale_fill_gradient(low = "yellow", high = "red") +<br/>  geom_bar() + <br/>  labs(x= "Hour", y= "Count") + <br/>  ggtitle("What time of day do you have the highest frequency of searches?", "Hour activity on detail")<br/>searchByHour</span></pre><p id="a7f3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果你会得到下面的图，例如，在我的例子中，值得注意的是，我在dawn基本上不是谷歌用户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/980e16445e7f4bb9d5ceaf59ca45a553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mtqeZki2nP9D8rJDqwqIw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化你的个人数据搜索历史——你最常搜索的时间图</p></figure><h1 id="e2ac" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">一周中的哪一天你最常谷歌？</h1><p id="adcc" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">按照前面的示例，您还可以直观地看到一周中哪一天您执行的搜索次数最多。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="2199" class="ne lv it na b gy nf ng l nh ni"># PLOT SEARCH BY WEEKDAY<br/>seearchByWeekD &lt;- ggplot(searchedData, aes(day, fill=..count..)) + <br/>  scale_fill_gradient(low = "yellow", high = "red") +<br/>  geom_bar() +<br/>  labs(x= "Day", y= "Count") + <br/>  ggtitle("What day of the week do you have the highest frequency of searches?", "Weekday activity on detail")<br/>seearchByWeekD</span></pre><p id="c51e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以预料，如果你像我一样，利用周末稍微远离上网，比如去看朋友，那么搜索量的下降将会非常明显。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/6e21b5d9db2ff5be82f490ef5d1a83c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jzDGPDPCaOy2rexcu9lZRA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化你的个人数据搜索历史——一周中你在谷歌上搜索最多的日子</p></figure><h1 id="9d80" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">一周中的某一天和你经常搜索的时间之间关系的数据可视化</h1><p id="aa65" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在最后两个图中，您可以看到一周中您在Google中注册最多搜索的时间和日期，您可以创建一个新的图来详细查看这两者之间的关系。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="8705" class="ne lv it na b gy nf ng l nh ni"># PLOT SEARCH BY WEEKDAY AND TIME <br/>searchWdayTime &lt;- ggplot(searchedData) + <br/>  scale_fill_gradient(low = "yellow", high = "red")+<br/>  geom_bar(aes(x = hour, group = day, fill=..count..) ) +<br/>  labs(x= "Hour / Day", y= "Count") + <br/>  ggtitle("Relationship between day / time you have a higher frequency of searches", "Weekday/Time activity on detail") +<br/>  facet_grid(.~day, scales = "free")<br/>searchWdayTime</span></pre><p id="3816" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这样，你就会得到如下这样的情节。您还可以将数据与您已经使用的其他变量(如月和年)进行交叉。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/5219ecec5f157400b8551339569c2792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*45RJ4eLeS__tFYZX9BNJwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化您的个人数据搜索历史——一周中的日期和时间之间的关系图，您通常在其中进行搜索</p></figure><h1 id="6bab" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">在过去的两年里，谷歌搜索次数最多的术语是什么？</h1><p id="4f36" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这是另一个有趣的问题，你可以通过使用<strong class="la iu">“word cloud”</strong>包查看数据来回答。首先，您必须提取术语，以便以后清理它们，从而能够创建一个文本语料库。你也应该删除不提供相关信息的词，如冠词和代词。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="58ed" class="ne lv it na b gy nf ng l nh ni"># CLEAN AND EXTRACT TEXT TO CREATE A TEXT CORPUS<br/>lastTwoYears &lt;- searchedData[(searchedData$year &gt; 2007 &amp; searchedData$year&lt; 2010), ]</span><span id="c914" class="ne lv it na b gy nj ng l nh ni">search &lt;- tolower(lastTwoYears$search)<br/>search &lt;- gsub('(http|https)\\S+\\s*|(#|@)\\S+\\s*|\\n|\\"', " ", search)<br/>search &lt;- gsub("(.*.)\\.com(.*.)\\S+\\s|[^[:alnum:]]", " ", search)<br/>search &lt;- trimws(search)</span><span id="5c46" class="ne lv it na b gy nj ng l nh ni">textCorpus &lt;-  Corpus(VectorSource(search))<br/>textCorpus &lt;- tm_map(textCorpus, content_transformer(removePunctuation))<br/>textCorpus &lt;- tm_map(textCorpus, content_transformer(removeNumbers))<br/>stopwords &lt;- c(stopwords("english"), "que", "com", "cómo", "como", "para", "con", "qué", "las", "los", "del", "can")<br/>textCorpus &lt;- tm_map(textCorpus, removeWords, stopwords)</span><span id="4975" class="ne lv it na b gy nj ng l nh ni">searchTDM &lt;- TermDocumentMatrix(textCorpus)<br/>searchMatrix &lt;- as.matrix(searchTDM)</span></pre><p id="84be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，您可以创建一个新的数据框，以便能够可视化最近两年在Google中搜索次数最多的术语。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4014" class="ne lv it na b gy nf ng l nh ni"># CREATE DATA FRAME WITH WORDS<br/>arrange &lt;- sort(rowSums(searchMatrix), decreasing = TRUE)<br/>twNames &lt;- names(arrange)<br/>dataCloud &lt;- data.frame(word = twNames, freq = arrange)</span><span id="24a1" class="ne lv it na b gy nj ng l nh ni">wordcloud(dataCloud$word, dataCloud$freq, min.freq = 40, scale = c(2 , 0.5), max.words = 100, colors=brewer.pal(9, "Paired"))</span></pre><p id="8883" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后你应该得到你搜索了至少40次或更多的词。这是我从2018年到2020年搜索次数最多的词条云。不要评价我搜索了这么多“洪流”请呵呵。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/323ca882697ed1b0a39955d6b85af88e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVfe7q-yH2Lg62ak7pbeOA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化你的个人数据搜索历史——过去两年谷歌搜索次数最多的词</p></figure><p id="5479" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为奖励，你可以重复这个练习，找出在你允许谷歌进入你的生活以了解你的一切的头两年里，搜索次数最多的术语是什么。你只需要修改<strong class="la iu"> lastTwoYears </strong>变量中包含的年份范围。以我为例，从2008年到2010年(这几年有很多Flash和论坛，在那里可以找到关于web开发的答案)，这是我的wordcloud。显然，与之前生成的wordcloud相比，搜索量要低得多。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/66aa769a2f84ba7653227611177397a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KmewfLr0Mfbhnem4wf5uFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如何分析和可视化你的个人数据搜索历史——谷歌搜索历史前两年的最热门词汇</p></figure><p id="62b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">非常感谢您的善意阅读。和我的大多数文章一样，我在一个<strong class="la iu"> flexdashboard </strong>中分享了用<strong class="la iu"> plotly </strong>生成的情节，我把它们放在一起更美观一些:<a class="ae mr" href="https://rpubs.com/cosmoduende/google-search-history-analysis" rel="noopener ugc nofollow" target="_blank">https://rpubs . com/cosmoduende/Google-search-history-analysis</a></p><p id="2d92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里可以找到完整的代码:<a class="ae mr" href="https://github.com/cosmoduende/r-google-search-history-analysis" rel="noopener ugc nofollow" target="_blank">https://github . com/cosmoduende/r-Google-search-history-analysis</a></p><p id="abfd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢你坚持到最后，祝你分析非常愉快，可以把一切都付诸实践，对结果感到惊讶，和我一样开心！</p></div></div>    
</body>
</html>