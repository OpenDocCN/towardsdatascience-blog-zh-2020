<html>
<head>
<title>How to read an Excel/CSV file in bubble.io using AWS S3/Lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AWS S3/Lambda在bubble.io中读取Excel/CSV文件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-read-excel-csv-file-in-bubble-io-using-aws-s3-lambda-a9af89153d2a?source=collection_archive---------29-----------------------#2020-10-08">https://towardsdatascience.com/how-to-read-excel-csv-file-in-bubble-io-using-aws-s3-lambda-a9af89153d2a?source=collection_archive---------29-----------------------#2020-10-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="0052" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/getting-started" rel="noopener" target="_blank">入门</a></h2><div class=""/><div class=""><h2 id="b5ce" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">代码少的数据ETL管道；)</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/148f03ace9841db37c0be96b47e9ceb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tltd7bbpeRK-F7HC"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@etaplus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> ETA+ </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="a28a" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi mi translated"><span class="l mj mk ml bm mm mn mo mp mq di">嗨</span>大家好，今天我将在<a class="ae le" href="http://bubble.io" rel="noopener ugc nofollow" target="_blank"> bubble.io </a>中演示一个非常简单的方法来实现从Excel/csv文件到SQL数据库的数据提取。</p><p id="1b9a" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">此工作流使用AWS S3/Lambda函数作为连接桥梁，与手动输入相比，它既节省时间，如果您使用AWS自由层服务，也节省成本。</p><p id="5ead" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">唯一的成本是在bubble中安装一个名为<a class="ae le" href="https://zeroqode.com/plugin/aws-file-uploader-1533465056312x784389392881156100" rel="noopener ugc nofollow" target="_blank"> AWS文件上传器</a>的插件(35美元)，仅此而已。很神奇，对吧？</p><p id="24e2" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">现在让我们深入研究一下，看看它是如何工作的。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="d343" class="mr ms iq bd mt mu mv dn mw mx my dp mz lv na nb nc lz nd ne nf md ng nh ni iw bi translated"><strong class="ak">第一步:确认您输入的数据，并据此建立数据库</strong></h2><p id="6b46" class="pw-post-body-paragraph lm ln iq lo b lp nj ka lr ls nk kd lu lv nl lx ly lz nm mb mc md nn mf mg mh ij bi translated">这其实是一个蛋和鸡的问题。通常，当您发现Excel/Access不再能满足您快速管理和检索数据的目的时，就会发生这种情况，这时您就开始构建关系型(和/或)非关系型数据库。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/9226338ae468ea262c9e6720f48f67c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0G8RadVou8QdmBdC"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">迪伦·吉利斯在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="88e6" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">例如，作为一名负责全球或地区市场的高级项目经理，使用Excel作为分发和提取数据的标准模板将非常有用，特别是当您的项目经理遍布世界各地，并且您希望集中项目信息并从整体角度监控进度时。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="2131" class="mr ms iq bd mt mu mv dn mw mx my dp mz lv na nb nc lz nd ne nf md ng nh ni iw bi translated"><strong class="ak">第二步:创建你的泡泡页面来反映项目信息</strong></h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/dd7cf8be9baa15313751f874f60b66d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdbu8THKfXEktxf8PrMn8g.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">测试用项目数据库</p></figure><p id="b1d3" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">假设我想更新这个项目信息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/62bb6ef57d9845a0e09996db1976264a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*DuDlLFVGQOvJozNR4NRJYw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">演示项目信息的气泡页</p></figure><p id="5b6d" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">我知道这个页面看起来很丑，但它只是所列信息的一个非常基本的演示。您可以在此基础上开发许多变体。</p><p id="052e" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">这里有一些额外的注释:</p><ol class=""><li id="0a5e" class="nr ns iq lo b lp lq ls lt lv nt lz nu md nv mh nw nx ny nz bi translated">允许用户下载excel模板，确保所有用户将输入统一的数据，并易于更新；</li><li id="d404" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">您可以为文件添加前缀，这样我们就不会被各种不同的文件名所困扰，也可以从文件名中提取关键信息作为关键标识符；</li><li id="f99d" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">我建议选择<em class="of"> uuid_filename </em>作为文件结构，因为这样更容易看到每个上传的文件。</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi og"><img src="../Images/3038e03d0fc486e9002b5cc1859cbbbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*Dk6jwhqydU6QWsDzimLF9w.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">文件上传功能调整</p></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="f62d" class="mr ms iq bd mt mu mv dn mw mx my dp mz lv na nb nc lz nd ne nf md ng nh ni iw bi translated"><strong class="ak">第三步:部署bubble插件——AWS工作流程</strong></h2><p id="9ac6" class="pw-post-body-paragraph lm ln iq lo b lp nj ka lr ls nk kd lu lv nl lx ly lz nm mb mc md nn mf mg mh ij bi translated"><em class="of"> AWS文件上传插件👉S3水桶👉希腊字母的第11个👉SQL数据库</em></p><p id="749d" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">S3桶和Lambda之间的微妙联系是通过触发器实现的，所以一旦任何东西上传到S3桶，就会有一个事件生成，你的代码将从这里开始。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oh"><img src="../Images/cf567a40dce2ba5dff57ed69178f2e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PucAuCyB-96xc-Xs3mTAdw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">新Excel文件信息</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/29c3b1bb4d0d4e088e22a33191c0e2ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*zBW6EuLqmLxuAEnoFcc0fA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">已将文件上传到uuid为的S3桶中</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="49a3" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">在我的方法中，我使用两层来提取数据。</p><p id="e0f3" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">第一层，“文件上传”S3存储桶触发“提取功能”Lambda功能，该功能在“csv接收器”S3存储桶中输出新的CSV文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/2cddc0d5be606c9d7003b8e56a438480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oz4iX2la8-0lGbk89N_VQw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">为加载生成的CSV</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/f890593637aedf09b6518ec0d78da54b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlMduDrQ6YKeOKe575QcGg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">λ接口</p></figure><p id="16b9" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">第二层，“csv接收器”S3存储桶触发“CSV到RDS”Lambda函数，该函数从CSV中提取数据并将其输入到SQL数据库中。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="66f5" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">这背后的原因:</p><ol class=""><li id="07d2" class="nr ns iq lo b lp lq ls lt lv nt lz nu md nv mh nw nx ny nz bi translated">这个中间步骤允许用户检查是否有不规则的数据；</li><li id="a11f" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">如果它是非常大的excel文件，它转移了1 lambda函数的计算压力；</li><li id="1f2a" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">如果需要，你可以在第一个lambda函数中写一些简单的代码来创建一个文件上传日志，跟踪所有用户的上传历史；</li></ol><p id="e5ac" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">成功上传文件并刷新页面后，项目信息就成功更新了！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/748cada4d7b215db5a04ed66a33958e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*zEZavWN31LSLpxp1h008zQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">更新的项目信息页面</p></figure><p id="8897" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">实际上，AWS生态系统中有许多有趣的部分，围绕Lambda也有许多有用的工具，但由于文章的长度，我将只提到几个:</p><ol class=""><li id="b1bd" class="nr ns iq lo b lp lq ls lt lv nt lz nu md nv mh nw nx ny nz bi translated">如果你正在使用<strong class="lo ja"> pandas </strong>或<strong class="lo ja"> pymysql </strong>库，在Lambda中部署一个层；</li><li id="a2e1" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">CloudWatch 非常非常有用，可以记录你所有的lambda活动；</li><li id="a561" class="nr ns iq lo b lp oa ls ob lv oc lz od md oe mh nw nx ny nz bi translated">如果你在bubble中使用AWS文件上传插件，请确保调整你的S3存储桶权限策略，否则它将无法工作。</li></ol><p id="8549" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">参考:<a class="ae le" href="https://docs.zeroqode.com/plugins/aws-file-uploader-plugin" rel="noopener ugc nofollow" target="_blank">https://docs.zeroqode.com/plugins/aws-file-uploader-plugin</a></p><p id="db36" class="pw-post-body-paragraph lm ln iq lo b lp lq ka lr ls lt kd lu lv lw lx ly lz ma mb mc md me mf mg mh ij bi translated">感谢大家阅读这篇文章，我将继续在bubble.io中分享有用的工具和技巧。</p></div></div>    
</body>
</html>