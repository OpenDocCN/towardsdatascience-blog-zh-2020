<html>
<head>
<title>Statistical Significance with the help of Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助Python的统计意义</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/statistical-significance-with-the-help-of-python-1fbb318ce216?source=collection_archive---------9-----------------------#2020-10-04">https://towardsdatascience.com/statistical-significance-with-the-help-of-python-1fbb318ce216?source=collection_archive---------9-----------------------#2020-10-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/64352b454458f341bd6bca47f5b3a6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMrqK86h9YEY5xmrxDKRiQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">奥占·阿克多安在<a class="ae jg" href="https://unsplash.com/collections/1671222/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="42ea" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">使用Python检查一个结果是否纯粹是由于偶然。</h2></div><p id="a05c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“使用广告为我们的产品创造更多收入”。"减肥药比服用安慰剂的人减轻了更多的体重.""电池' A '的寿命是其竞争对手的十倍."这些类型的语句经常出现。当查看数据时，很容易做出一个快速的假设，即某个变量导致了某个结果。对这些结论过于草率会导致很多问题。在数据科学中，能够确定一个结果是否是由于偶然可以帮助选择一个模型以及检查<a class="ae jg" href="https://en.wikipedia.org/wiki/Sampling_error" rel="noopener ugc nofollow" target="_blank">采样误差</a>的方法。</p><p id="c2d3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确定统计显著性是建立一个结果不完全是由于偶然的信心的方法之一。我们来看看什么统计显著性是如何用<em class="lu"> p值</em>来确定的。</p><p id="dc56" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个例子将使用Python来展示如何在你的code/ jupyter笔记本中表示统计意义。建议您了解一些Python基础知识。我们还将使用以下Python库<a class="ae jg" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>、<a class="ae jg" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>和<a class="ae jg" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>。如果你对它们都不熟悉，我建议你使用提供的链接。</p><h1 id="5d37" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">数据</h1><p id="bb4b" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将查看来自kaggle.com的"<a class="ae jg" href="https://www.kaggle.com/jmmvutu/summer-products-and-sales-in-ecommerce-wish" rel="noopener ugc nofollow" target="_blank">电子商务愿望中的夏装销售</a>"数据集。如果你不熟悉<a class="ae jg" href="http://wish.com/" rel="noopener ugc nofollow" target="_blank">Wish.com</a>，它是一个在线电子商务平台。这些数据是在2020年8月通过抓取网站上所有列在“夏季”类别下的项目收集的。您可以通过单击上面的链接，了解有关数据获取方式以及每一列/变量的更多信息。数据集显示，公司有个人资料图片的项目比公司没有个人资料图片的项目具有更大的总销售额(以欧元计)。我们将尝试确定这一结果是否有统计学意义。</p><h1 id="2adf" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">关键概念</h1><ol class=""><li id="5aa4" class="ms mt jj la b lb mn le mo lh mu ll mv lp mw lt mx my mz na bi translated">通过确定零假设和替代假设进行假设检验</li><li id="4870" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">p值和p值阈值</li><li id="4f42" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">检验统计量</li><li id="a14b" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">排列测试</li><li id="5760" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">使用p值来确认或拒绝零假设</li></ol><h1 id="35c0" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">假设检验</h1><p id="6bb5" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">为了建立统计显著性，我们必须提出一个<em class="lu">零假设</em>和一个<em class="lu">替代假设</em>。零假设是指变量对我们的最终结果没有影响。另一个假设是变量对最终结果有影响。</p><p id="f854" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于这个例子，我们的无效和替代假设将是:</p><ul class=""><li id="b868" class="ms mt jj la b lb lc le lf lh ng ll nh lp ni lt nj my mz na bi translated"><strong class="la jk">零假设</strong>:平均而言，当一家公司有简介照片时，一件商品的总销售额(以欧元计)与一家公司没有简介照片时的总销售额(以欧元计)相同<strong class="la jk">。</strong></li><li id="18db" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt nj my mz na bi translated"><strong class="la jk">另一种假设</strong>:平均来说，如果一家公司有个人资料图片，一件商品的总销售额(欧元)会比没有个人资料图片的商品的总销售额(欧元)高<strong class="la jk"/>。</li></ul><h1 id="8527" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">P值阈值</h1><p id="b67d" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">p值将在后面进行深入解释，但我们现在将简要介绍一下。在开始测试之前，确定我们的p值阈值总是很重要的。在确定零假设是否为真时，p值是我们量化结果稀有程度的一种方法。<strong class="la jk"><em class="lu">p值越低，结果就越不像是纯粹由于偶然。</em>T15】</strong></p><p id="ba82" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu"> p值阈值</em>是我们将选择的一个数字，如果超过这个数字，我们就可以断定我们的零假设为真。我们选择多高或多低，我们希望这是基于我们的测试。如果我们要测试某个需要非常精确的东西的统计显著性，我们可能会选择一个非常低的阈值，比如0.001。对于不需要太多精确度的测试，比如销售额或网站参与度，我们会更高。标准阈值是0.05，即5 %。由于我们着眼于销售，我们将采用标准门槛。如果我们的p值低于0.05，我们将拒绝零假设。</p><h1 id="e6b8" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">准备我们的数据</h1><p id="8340" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">一旦我们从Kaggle下载了数据集，我们就可以使用pandas将它读入数据帧。</p><figure class="nk nl nm nn gt iv"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="ae41" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们感兴趣的有3列“价格”、“单位_售出”和“商家_个人资料_图片”。在继续之前，我们将采取以下步骤。</p><ol class=""><li id="3597" class="ms mt jj la b lb lc le lf lh ng ll nh lp ni lt mx my mz na bi translated">除了上面提到的三列之外，我们将删除所有其他列。</li><li id="c3d4" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">检查是否有任何丢失的值。</li><li id="7af7" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">使用df.describe()来确定是否有任何值看起来不准确并且可能给出意外的结果。</li><li id="3103" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">删除或更正我们认为可能包含不正确信息的任何行</li><li id="e388" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">通过将“price”列乘以“units_sold”列，计算每件商品产生的欧元总额。</li></ol><p id="4959" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是用于获取上述集合的python代码。</p><p id="2a6f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">* *<em class="lu">*使用多行注释语法来表示输出*** </em></p><figure class="nk nl nm nn gt iv"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="0e3d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">准备好数据集后，让我们将数据集分成两组。一个将包含公司有个人资料图片的项目(<strong class="la jk">a组</strong>)，另一个将包含公司没有个人资料图片的项目(<strong class="la jk">b组</strong>)。</p><p id="9210" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦分成两组，我们将找到每组总销售额的平均值。我们还将查看每个组中有多少行，因为这将有助于我们稍后确定如何构建我们的随机组。</p><figure class="nk nl nm nn gt iv"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="d7c0" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">检验统计量</h1><p id="41ac" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在我们有了两组总销售额的平均值，我们可以用它来确定我们的<em class="lu">测试统计</em>。检验统计量是一个数值，我们将使用它来确定两组之间的差异是否是随机的。在这种情况下，测试统计将是使用个人资料图片和不使用个人资料图片的总销售额的平均差异。我们的测试统计大约是33，184欧元。</p><h1 id="8376" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated"><strong class="ak">排列测试</strong></h1><p id="fdf1" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们现在的目标是多次重新创建我们的两组，以查看我们的测试统计偶然发生的可能性。一个<em class="lu">排列测试</em>是我们将如何完成这个目标。</p><p id="38c8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将在Python中采取以下步骤:</p><ol class=""><li id="bdd6" class="ms mt jj la b lb lc le lf lh ng ll nh lp ni lt mx my mz na bi translated">创建一个空列表来保存1000个平均差异。这将是我们生成的采样分布。</li><li id="b85d" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">初始化“总销售额”的一个<a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html" rel="noopener ugc nofollow" target="_blank">系列</a>。</li><li id="229d" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">做一个将迭代1000次的for循环。</li><li id="b7df" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">对于For循环的每次迭代，我们将把每次总销售额随机放入“a”组或“b”组。为了重新创建这两个组中的大小差异，我们将给出14.4%的机会将值归入“a”组，85.6%的机会将值归入“b”组。这个百分比是基于我们之前确定的行数。</li><li id="aebd" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">一旦我们的随机组“a”和随机组“b”形成，我们将找到每组的平均值。</li><li id="11eb" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">然后，我们将从随机组“a”中减去随机组“b”的平均值，并将其添加到步骤1中初始化的列表中。</li><li id="9dfa" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">最后，我们将创建一个直方图来可视化这个采样分布的频率。</li></ol><figure class="nk nl nm nn gt iv"><div class="bz fp l di"><div class="no np l"/></div></figure><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/4cbc5168a4cca8e22cc1a54bfd7b1733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*_bC-n1ouQoGjhKhB0prf9w.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">随机化平均差异的直方图</p></figure><p id="99be" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从直方图中，我们可以看到均值中最常见的差异大约为0。这与我们的测试统计非常不同。事实上，甚至没有显示测试统计值。p值将为我们提供一种方法来量化均值差异的随机样本分布中检验统计值的次数。</p><h1 id="4933" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">p值</h1><p id="5152" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在我们生成的抽样分布中，大部分值都以平均差0为中心。如果纯粹是偶然的话，这两个组更有可能产生相同的总销售额(零假设)。但是，由于观察到的测试统计量不接近0，因此有可能是拥有一张剖面图导致了数据集中的平均差异。</p><p id="6e68" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看抽样分布，以确定33，184或更高的值出现的次数。然后我们可以将频率除以1000。这将给我们33，184或更高的平均差异纯粹是由于随机机会的概率。</p><p id="3ee9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个概率被称为<em class="lu"> p值</em>。如果该值很高，这意味着测试统计很可能是随机发生的，并且配置文件图片可能不起作用。另一方面，低p值意味着我们观察到的平均差异是由随机机会引起的概率很小。</p><p id="2ace" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们创建一个for循环，它将检查我们的测试统计在我们随机生成的均值差异组中出现了多少次。然后我们将得到这个计数，并除以我们的总迭代次数(1000)。我们的输出将是p值。</p><figure class="nk nl nm nn gt iv"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="0115" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">结果</h1><p id="e91d" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">之前我们决定p值阈值为0.05。0小于0.05，这意味着我们可以排除我们的测试统计是随机的结果。我们现在可以拒绝我们的零假设，并确认我们的替代假设。</p><h1 id="ad8c" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">最后的想法</h1><p id="bb1d" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">统计显著性是检查数据和确定变量是否对最终结果有影响的一种很好的方法。在这个例子中，我们在Python的帮助下采取了一些步骤来确定拥有一张个人资料图片对一个商品的总销售额结果的统计意义。</p><p id="2cc3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然我们能够在p值的帮助下量化这种显著性，但我们仍然应该回过头来看看数据集。在做出任何重要结论之前，有几个问题需要解决。</p><ol class=""><li id="abe9" class="ms mt jj la b lb lc le lf lh ng ll nh lp ni lt mx my mz na bi translated">我们来自Wish.com的样本数据集非常有限。它只包含夏季服装项目。最好能获得更多的数据，涵盖更长的时间段和更多种类的项目</li><li id="ee2b" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">售出物品数量不准确。在网站上，出售的项目计数列在范围，即1000+，2500+等。收集数据时，加号肯定已经被删除了。最好能得到实际的数字。</li><li id="9c80" class="ms mt jj la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">虽然我们很快找到了异常值，但我们没有彻底检查这些项目，以确定是否有任何其他原因导致了简介图片组中的总销售额较高。可能还有一些我们没有考虑到的其他关联。</li></ol><p id="85f4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然可能需要更多的信息来决定是否有一个个人资料图片会导致更多的销售，但我们已经通过确定p值在正确的方向上迈出了一步。我们可以说，根据这个测试，拥有一张个人资料照片对Wish.com上一件商品的总销售额有着统计上的显著影响。</p><p id="22ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">统计显著性是数据科学中的一个有用工具，当您需要知道一个结果是显著的还是偶然发生的时，应该理解并使用它来帮助做出决策。</p></div></div>    
</body>
</html>