<html>
<head>
<title>Master a third of Seaborn: Statistical plotting with relplot()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握Seaborn的三分之一:用relplot()统计绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/master-a-third-of-seaborn-statistical-plotting-with-relplot-df8642718f0f?source=collection_archive---------7-----------------------#2020-09-26">https://towardsdatascience.com/master-a-third-of-seaborn-statistical-plotting-with-relplot-df8642718f0f?source=collection_archive---------7-----------------------#2020-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="334f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果你能在锡伯恩做到，就在锡伯恩做吧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6f1d2a8dd02142c0af9e88c3908c48f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bqi-h8HLXnIyFd6KLmWtbQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由来自<a class="ae ky" href="https://www.pexels.com/photo/black-blue-and-red-graph-illustration-186461/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>的<a class="ae ky" href="https://www.pexels.com/@weekendplayer?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">布拉克·K</a>拍摄</p></figure><h2 id="e923" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><blockquote class="lv"><p id="ab01" class="lw lx it bd ly lz ma mb mc md me mf dk translated">本文的目标是让你对使用Seaborn的<code class="fe mg mh mi mj b">relplot()</code>函数绘制任何类型的定量变量统计图表有一个很好的了解。</p></blockquote><p id="7527" class="pw-post-body-paragraph mk ml it mm b mn mo ju mp mq mr jx ms li mt mu mv lm mw mx my lq mz na nb mf im bi translated">当我开始学习数据可视化时，我第一次接触到Matplotlib。这是一个如此巨大和深刻的图书馆，你可以想象几乎任何与数据相关的东西。正是这种辽阔，使人们能够以多种方式创造一个单一的情节。</p><p id="aa79" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">虽然它的灵活性对于有经验的科学家来说是理想的，但作为初学者，区分这些方法之间的代码对我来说是一场噩梦。我甚至考虑过使用Tableau的无代码界面，作为一名程序员，我很惭愧地承认这一点。我想要一些易于使用的东西，同时，使我能够创建其他人正在制作的那些很酷的情节(用代码)。</p><p id="d641" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">我在Udacity攻读纳米学位时了解了Seaborn，并最终找到了我的选择。这就是为什么我的数据可视化的黄金法则是“如果你能在Seaborn做，就在Seaborn做”。与Matplotlib相比，它提供了许多优势。</p><p id="fe71" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">首先，它非常容易使用。您可以只用几行代码创建复杂的情节，并且仍然通过内置的样式使它看起来很漂亮。其次，它与熊猫数据框架配合得非常好，这正是你作为一名数据科学家所需要的。</p><p id="714e" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">最后但同样重要的是，它是建立在Matplotlib本身之上的。这意味着您将享受Mpl提供的大部分灵活性，并且仍然保持代码语法最少。</p><p id="9c32" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">是的，我在标题中说的是真的。Seaborn将其所有API分为三类:绘制统计关系、可视化数据分布和分类数据绘制。Seaborn提供了三个高级功能，涵盖了它的大部分特性，其中之一是<code class="fe mg mh mi mj b">relplot()</code>。</p><p id="a14a" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated"><code class="fe mg mh mi mj b">reltplot()</code>可以可视化定量变量之间的任何统计关系。在这篇文章中，我们将涵盖这个功能的几乎所有特性，包括如何创建支线剧情等等。</p><div class="nh ni gp gr nj nk"><a href="https://ibexorigin.medium.com/membership" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">通过我的推荐链接加入Medium-BEXGBoost</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">获得独家访问我的所有⚡premium⚡内容和所有媒体没有限制。支持我的工作，给我买一个…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">ibexorigin.medium.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ks nk"/></div></div></a></div><p id="317f" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">获得由强大的AI-Alpha信号选择和总结的最佳和最新的ML和AI论文:</p><div class="nh ni gp gr nj nk"><a href="https://alphasignal.ai/?referrer=Bex" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">阿尔法信号|机器学习的极品。艾总结的。</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">留在循环中，不用花无数时间浏览下一个突破；我们的算法识别…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">alphasignal.ai</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny ks nk"/></div></div></a></div></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="4ab1" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">概观</h2><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="a1c6" class="kz la it mj b gy ol om l on oo">  I. Introduction</span><span id="c3c1" class="kz la it mj b gy op om l on oo"> II. Setup</span><span id="e5ee" class="kz la it mj b gy op om l on oo">III. Scatter plots with relplot()<br/>     1. Scatter plot point size<br/>     2. Scatter plot point hue<br/>     3. Scatter plot point style<br/>     4. Scatter plot point transparency<br/>     5. Scatter plot in subplots</span><span id="1b1f" class="kz la it mj b gy op om l on oo"> IV. Seaborn lineplots<br/>     1. Lineplot multiple lines<br/>     2. Lineplot line styling<br/>     3. Lineplot point markers<br/>     4. Lineplot confidence intervals<br/>  V. Conclusion</span></pre><blockquote class="oq or os"><p id="437a" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated">获取关于<a class="ae ky" href="https://github.com/BexTuychiev/medium_stories/tree/master/learn_one_third_of_seaborn_relplot" rel="noopener ugc nofollow" target="_blank"> this </a> GitHub repo文章的笔记本和样本数据。</p></blockquote><h2 id="ff2f" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">设置</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="ee75" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">我们导入Seaborn作为<code class="fe mg mh mi mj b">sns</code>。你可能想知道为什么它不像任何正常人一样别名为<code class="fe mg mh mi mj b">sb</code>。好吧，听听这个:它的别名来自电视剧《白宫风云》中的一个虚构人物塞缪尔·诺曼·西本。这是一个开玩笑的缩写。</p><p id="720d" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">对于样本数据，我将使用Seaborn的一个内置数据集和一个从Kaggle下载的数据集。你可以使用<a class="ae ky" href="https://www.kaggle.com/dgawlik/nyse/download" rel="noopener ugc nofollow" target="_blank">这个</a>链接得到它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure><p id="6834" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">第一个数据集是关于汽车的，包含关于它们的引擎、型号等的数据。第二个数据集提供了500多家公司的纽约股票价格信息。</p><h2 id="5a8b" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">基础探索</h2><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="89ac" class="kz la it mj b gy ol om l on oo">cars.head()<br/>cars.info()<br/>cars.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/f52c95dba69f7c783d50dad38697360e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*t4_v61eTIGJRWjbVR5-mqQ.png"/></div></figure><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="4986" class="kz la it mj b gy ol om l on oo">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 398 entries, 0 to 397<br/>Data columns (total 9 columns):<br/> #   Column        Non-Null Count  Dtype  <br/>---  ------        --------------  -----  <br/> 0   mpg           398 non-null    float64<br/> 1   cylinders     398 non-null    int64  <br/> 2   displacement  398 non-null    float64<br/> 3   horsepower    392 non-null    float64<br/> 4   weight        398 non-null    int64  <br/> 5   acceleration  398 non-null    float64<br/> 6   model_year    398 non-null    int64  <br/> 7   origin        398 non-null    object <br/> 8   name          398 non-null    object <br/>dtypes: float64(4), int64(3), object(2)<br/>memory usage: 28.1+ KB</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/f3fe531b1399836642297f940fdab985.png" data-original-src="https://miro.medium.com/v2/format:webp/1*BUGu2BuVMVhQbUkQTJY-KA.png"/></div></figure><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="7c24" class="kz la it mj b gy ol om l on oo">stocks.head()<br/>stocks.info()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/be90d12487d0cd8209dfbd1039ebdf51.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9C3aJ4u8P4TFgsQtFzQH-A.png"/></div></figure><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="a7ae" class="kz la it mj b gy ol om l on oo">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>DatetimeIndex: 851264 entries, 2016-01-05 to 2016-12-30<br/>Data columns (total 6 columns):<br/> #   Column  Non-Null Count   Dtype  <br/>---  ------  --------------   -----  <br/> 0   symbol  851264 non-null  object <br/> 1   open    851264 non-null  float64<br/> 2   close   851264 non-null  float64<br/> 3   low     851264 non-null  float64<br/> 4   high    851264 non-null  float64<br/> 5   volume  851264 non-null  float64<br/>dtypes: float64(5), object(1)<br/>memory usage: 45.5+ MB</span></pre><p id="262e" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">两个数据集中有一些空值。由于我们没有进行任何认真的分析，我们可以放心地放弃它们。</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="79b7" class="kz la it mj b gy ol om l on oo">cars.dropna(inplace=True)<br/>stocks.dropna(inplace=True)</span></pre><blockquote class="oq or os"><p id="e850" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated"><strong class="mm iu">专业提示</strong>:让你的数据集尽可能的整洁，这样Seaborn才能有好的表现。确保每行是一个观察值，每列是一个变量。</p></blockquote></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="518c" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">用<code class="fe mg mh mi mj b">relplot</code>散点图</h2><p id="3ec7" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">让我们从散点图开始。散点图是找出变量之间的模式和关系的最好和最广泛使用的图之一。</p><p id="d1e2" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">这些变量通常是定量的，如测量值、一天中的温度或任何数值。散点图将x和y值的每个元组可视化为单个点，并且该图将形成点云。这些类型的图非常适合人眼检测模式和关系。</p><p id="4bbd" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">你可以用SB的(我从现在开始缩写)内置<code class="fe mg mh mi mj b">scatterplot()</code>函数来创建散点图。但是这个功能缺乏<code class="fe mg mh mi mj b">relplot()</code>版本所提供的灵活性。让我们看一个使用<code class="fe mg mh mi mj b">relplot()</code>的例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/a79d80fd6230b3540361ec1b05b6968a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5BcaCmoX0xT752MED_17w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@mikebirdy?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">麦克</a>从<a class="ae ky" href="https://www.pexels.com/photo/greyscale-photography-of-car-engine-190574/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>拍摄</p></figure><p id="b92a" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">使用<code class="fe mg mh mi mj b">cars</code>数据集，我们想找出是否更重的汽车往往有更大的马力。由于这两个特征都是数字，我们可以使用散点图:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="4de0" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight', y='horsepower', <br/>            data=cars, kind='scatter');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/ea4fe9f42550ff28905ef774e94a7c9b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*xtM-kv9lY5L8OkRKAZlprQ.png"/></div></figure><p id="624a" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated"><code class="fe mg mh mi mj b">relplot()</code>函数有自变量<code class="fe mg mh mi mj b">x</code>、<code class="fe mg mh mi mj b">y</code>和<code class="fe mg mh mi mj b">data</code>参数，分别指定要绘制在<code class="fe mg mh mi mj b">XAxis</code>、<code class="fe mg mh mi mj b">YAxis</code>上的值及其应使用的数据。我们使用<code class="fe mg mh mi mj b">kind</code>参数来指定它应该使用散点图。其实默认设置为<code class="fe mg mh mi mj b">scatter</code>。</p><p id="a9ec" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">从剧情可以解读出，更重的车确实马力更大。同样清楚的是，有更多的汽车重量在1500到3000之间，马力在50到110之间。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="ca88" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">散点图点大小</h2><p id="8551" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">基于我们之前的绘图，现在我们还想添加一个新的变量。我们来看看更重的车是不是排量更大(能储多少油)。理想情况下，我们希望将该变量绘制为磅值:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="efc0" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/4b48cb2b894a0234a0b7b78dd1903e3c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9aDMLGnoeJFGgyMQy2TUuA.png"/></div></figure><p id="d604" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">使用<code class="fe mg mh mi mj b">size</code>参数改变第三个变量的点大小。只需将列名作为字符串传递，就可以设置好了，就像我们的例子一样。该图显示了重量和发动机尺寸之间的明确关系。然而，你可以在中间看到一些不符合趋势的点。</p><p id="7d13" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">重要的是，您要传递一个“值周期”较少的数值变量。在我们的例子中，位移为5(0–80，80–160等)。如果这些时间变得太多，将很难解释你的情节，因为人眼不善于判断事物。如果我们以重量作为第三个变量来创建上面的图，您可以看到这一点:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="bb46" class="kz la it mj b gy ol om l on oo">sns.relplot(x='displacement',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='weight');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/1d68baa58ea79f1387f89b3f00774179.png" data-original-src="https://miro.medium.com/v2/format:webp/1*cv3lc0wZrRqUDGWgosyfvw.png"/></div></figure><p id="00a1" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">正如你所看到的，趋势不明显，很难区分大小。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="250d" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">散点图点色调</h2><p id="1552" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">散点图中的第三个变量也可以使用彩色标记。它也非常简单，就像磅值一样。假设我们还想将加速度(汽车达到60英里/小时所需的时间，以秒为单位)编码为点颜色:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="1118" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/88a8af85aa3c1bebb6a38988acc44a95.png" data-original-src="https://miro.medium.com/v2/format:webp/1*6XqEKAB0UcHnWvI-TNt7iw.png"/></div></figure><p id="2ab3" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">从图中，我们可以看到数据集中一些最快的汽车(暗点)马力较低，但重量也较轻。注意，我们使用了<code class="fe mg mh mi mj b">hue</code>参数对颜色进行编码。颜色根据传递给该参数的变量类型而变化。如果我们已经通过了<code class="fe mg mh mi mj b">origin</code>列，这是一个分类变量，它将有三个颜色标记，而不是一个连续的(从亮到暗)调色板:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="e714" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/e705b8654ad41953a6b0488e189dc9de.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2A76HUj6x80RaTp4sPnCwQ.png"/></div></figure><blockquote class="oq or os"><p id="8ef5" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated"><strong class="mm iu">专业提示</strong>:注意您输入到<code class="fe mg mh mi mj b">hue</code>参数的变量类型。类型可以完全改变结果。</p></blockquote><p id="0166" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">如果您不喜欢默认的调色板(默认情况下非常好)，您可以轻松地自定义:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="7bde" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration',<br/>            palette='crest');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/56b899257f4448aa01863820f3e87b84.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eddBbeoBBzy0HGqUKr5oBQ.png"/></div></figure><p id="9f86" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">将<code class="fe mg mh mi mj b">palette</code>参数设置为您自己的颜色映射。可用调色板列表可在<a class="ae ky" href="http://seaborn.pydata.org/tutorial/color_palettes.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="faa3" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">散点图点样式</h2><p id="994e" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">让我们回到第一个情节。我们绘制了重量与马力的散点图。现在，让我们添加原点列作为第三个变量:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="2c96" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight', y='horsepower', <br/>            data=cars, hue='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/b000b8131d2bd25a89724d87faf5969d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ta6mgSFNcFgTif28CFB_Aw.png"/></div></figure><p id="38ff" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">虽然颜色在该图中增加了额外的信息层，但在更大的数据集中，可能很难区分点群中的颜色。为了更加清晰起见，让我们在图中添加一个点样式:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="eb33" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            hue='origin',<br/>            style='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/c134f4544292f429271d983ca216c5e2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eK1qs8hmgnyeSalC1uLD7g.png"/></div></figure><p id="ed68" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">现在，好一点了。改变点的样式和颜色是非常有效的。如果我们仅使用点样式来指定原点，看看会发生什么:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="c77c" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight', y='horsepower', <br/>            data=cars, style='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/d9b964ba335b01e339032b510f04024b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Be6XupcCJsJnlKjM5mexVg.png"/></div></figure><blockquote class="oq or os"><p id="8722" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated"><strong class="mm iu">专业提示</strong>:结合使用<code class="fe mg mh mi mj b">hue</code>和<code class="fe mg mh mi mj b">style</code>参数，让你的绘图更加清晰。</p></blockquote><p id="621d" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">我们删除了<code class="fe mg mh mi mj b">hue</code>参数，这使得我们的情节更加难以理解。如果您不喜欢默认颜色，您可以更改它:</p><p id="c511" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">首先，您应该创建一个字典，将各个颜色映射到每个类别。请注意，该字典的键应该与图例中的名称相同。</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="6478" class="kz la it mj b gy ol om l on oo">hue_colors = {'usa': 'red', <br/>              'japan': 'orange', <br/>              'europe': 'green'}<br/>sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            hue='origin',<br/>            style='origin',<br/>            palette=hue_colors);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/bab21785d91ba24e82c622cb5d9bb32e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uHseAXPpHSF59R5CAwjdPA.png"/></div></figure><p id="c9b6" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">从图中，我们可以看到数据集中的大多数汽车来自美国。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="dda3" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">散点图点透明度</h2><p id="c1d1" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">让我们再次回到我们的第一个例子。让我们再画一次，但是给点增加一点透明度:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="7181" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight', y='horsepower', <br/>            data=cars, alpha=0.6);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/4feff672364abf9a2697383a837afcee.png" data-original-src="https://miro.medium.com/v2/format:webp/1*SHUfkiPiEiOqHZaAoJGSVw.png"/></div></figure><p id="3e10" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">我们使用<code class="fe mg mh mi mj b">alpha</code>参数来设置点的透明度。它接受0到1之间的值。0表示完全透明，1表示完全不透明。当您有一个大的数据集，并且您想要找出图中的聚类或组时，这是一个非常有用的功能。当你降低透明度时，有很多点的部分会变暗。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="4efe" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">支线剧情中的散点图</h2><p id="d911" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">在《海波恩》中也可以使用支线剧情网格。我之所以一直用<code class="fe mg mh mi mj b">relplot()</code>而不是能做以上所有事情的<code class="fe mg mh mi mj b">scatterplot()</code>，是因为它不能创建支线剧情网格。</p><p id="c851" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">由于<code class="fe mg mh mi mj b">relplot</code>是一个图形级别的函数，它产生一个<code class="fe mg mh mi mj b">FacetGrid</code>(许多情节的网格)对象，而<code class="fe mg mh mi mj b">scatterplot()</code>绘制到一个<code class="fe mg mh mi mj b">matplotlib.pyplot.Axes</code>(单个情节)对象上，该对象不能变成子情节:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="6268" class="kz la it mj b gy ol om l on oo">fg = sns.relplot()<br/>print(type(fg))<br/>plot = sns.scatterplot()<br/>print(type(plot))</span><span id="f6b2" class="kz la it mj b gy op om l on oo">&lt;class 'seaborn.axisgrid.FacetGrid'&gt;<br/>&lt;class 'matplotlib.axes._subplots.AxesSubplot'&gt;</span></pre><p id="2a26" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">让我们看一个我们想要使用支线剧情的例子。在上面的一个图中，我们将4个变量编码到一个图中(重量与马力，用位移和加速度编码)。现在，我们还想加入汽车的起源。为了使信息更容易理解，我们应该把它分成支线剧情:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="70fe" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration',<br/>            palette='crest',<br/>            col='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/fbebe7cea2eef030be7451b1de1439da.png" data-original-src="https://miro.medium.com/v2/format:webp/1*eLj-8Rdz3eVSKZNFfusmfw.png"/></div></figure><p id="94fb" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">这一次在最后，我们添加了一个新的参数，<code class="fe mg mh mi mj b">col</code>来指出我们想要在列中创建支线剧情。这些类型的支线剧情非常有用，因为现在很容易看到第五个变量的趋势。顺便说一下，传递给<code class="fe mg mh mi mj b">col</code>的变量应该是明确的，这样才能工作。此外，SB在一行中显示列。如果要绘制多个类别，我们不希望出现这种情况。让我们使用我们的数据来看一个用例，尽管它的类别较少:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="a113" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration',<br/>            palette='crest',<br/>            col='origin',<br/>            col_wrap=2);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/dbb3590e8f922588bc1671761004fc32.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tWx9FqaC0K0s0LosSLgXog.png"/></div></figure><p id="b312" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated"><code class="fe mg mh mi mj b">col_wrap</code> argument告诉某人我们想要一行中有多少列。</p><p id="3f53" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">还可以指定列中类别的顺序:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="34fd" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration',<br/>            palette='crest',<br/>            col='origin',<br/>            col_order=['japan', 'europe', 'usa']);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/b4444e0fe5827dffed5ae076fa041257.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9sioOsz4Cb5PEQcN1DqgyQ.png"/></div></figure><p id="a9fb" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">也可以按行显示相同的信息:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="318f" class="kz la it mj b gy ol om l on oo">sns.relplot(x='weight',<br/>            y='horsepower',<br/>            data=cars,<br/>            kind='scatter',<br/>            size='displacement',<br/>            hue='acceleration',<br/>            palette='crest',<br/>            row='origin');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/b083190d0f578f3da6f860306cb62a32.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oVKvSU66_717lvL0kuaCkg.png"/></div></figure><p id="1b5d" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">如果你有很多类别，使用行不是很有用，最好坚持使用列。您可以再次使用<code class="fe mg mh mi mj b">row_order</code>来指定行的顺序。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="03c0" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Seaborn线图</h2><p id="a47f" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">另一种常见的关系图是线形图。在散点图中，每个点都是独立的观察值，而在线图中，我们将一个变量与一些连续变量一起绘制，通常是一段时间。我们的第二个样本数据集包含2010年至2016年跟踪的501家公司的纽约证券交易所数据。</p><p id="eeeb" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">为了便于说明，我们来观察给定时间段内所有公司的<code class="fe mg mh mi mj b">close</code>价格。由于涉及到日期，折线图是此任务的最佳视觉类型:</p><blockquote class="oq or os"><p id="3b13" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated"><strong class="mm iu"> Pro提示</strong>:如果你的数据集中有一个日期列，将其设置为datetype，并使用<code class="fe mg mh mi mj b">set_index()</code>函数将其设置为索引。或者用<code class="fe mg mh mi mj b">pd.read_csv(parse_dates=['date_column'], index_col='date_column')</code>。它将允许您绘制线图，并使日期的子集设置更容易。</p></blockquote><p id="2672" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">对于线图，我们再次使用<code class="fe mg mh mi mj b">relplot()</code>并将<code class="fe mg mh mi mj b">kind</code>设置为<code class="fe mg mh mi mj b">line</code>。该图描绘了跟踪第二个连续变量(通常是时间)的单个变量。</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="b030" class="kz la it mj b gy ol om l on oo">sns.relplot(x=stocks.index, y='close', <br/>            data=stocks, kind='line');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/bf8da794f36198b367f56ce5d449cd47.png" data-original-src="https://miro.medium.com/v2/format:webp/1*o7PaPDsbE46qsH0XWUm86g.png"/></div></figure><p id="0fc6" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">它花了相当长的时间来绘制，但我们可以看到明显的趋势。所有公司的股票在给定的时间内都保持增长。蓝色较暗的线代表6年来跟踪的所有公司收盘价的平均值。</p><p id="4624" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">SB会自动添加一个置信区间，即线周围的阴影区域，如果一个点有多个观察值，稍后会详细介绍。现在，让我们将数据细分为3家公司:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="61c9" class="kz la it mj b gy ol om l on oo">am_ap_go = stocks[stocks['symbol'].isin(['AMZN', 'AAPL', 'GOOGL'])]<br/>am_ap_go.shape</span><span id="9d6c" class="kz la it mj b gy op om l on oo">(5286, 6)</span></pre></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="5378" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">线条绘制多条线</h2><p id="d64d" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">现在，让我们通过将数据分组到三个公司来重新创建上面的线图。这将在同一个图中创建不是一条而是三条线:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="420b" class="kz la it mj b gy ol om l on oo">sns.relplot(x=am_ap_go.index,<br/>            y='close',<br/>            data=am_ap_go,<br/>            kind='line',<br/>            hue='symbol');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/a4f0101e3fc698ddc3c8a6f9abc26418.png" data-original-src="https://miro.medium.com/v2/format:webp/1*dygh8pgR3F2J87Z9ZPcJfw.png"/></div></figure><p id="9341" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">正如我们在散点图示例中所做的那样，我们使用<code class="fe mg mh mi mj b">hue</code>参数在数据中创建子组。同样，您必须将一个分类变量传递给<code class="fe mg mh mi mj b">hue</code>。在这个图中，我们可以看到，在2016年之后，亚马逊和谷歌的股票非常接近，而苹果在整个时期都处于底部。现在，让我们看看除了颜色之外，如何设计每条线的风格:</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="d42a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">线地块线样式</h2><p id="774d" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">我们使用<code class="fe mg mh mi mj b">style</code>参数来指定我们想要不同的线条样式:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="da35" class="kz la it mj b gy ol om l on oo">sns.relplot(x=am_ap_go.index,<br/>            y='close',<br/>            data=am_ap_go,<br/>            kind='line',<br/>            hue='symbol',<br/>            style='symbol');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/cb099f17977ef27d1a2ff3fa3eaa38bd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*03AaHoiAa6azwO3aJZ5poA.png"/></div></figure><p id="acc0" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">好吧，这可能不是不同线条样式的最佳示例，因为观察是针对每天的，并且非常紧凑。让我们仅针对2015年至2016年期间划分子集，并绘制相同的线图:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="53d8" class="kz la it mj b gy ol om l on oo">am_ap_go_subset = am_ap_go.loc['2015-01-01':'2015-12-31']</span><span id="57f7" class="kz la it mj b gy op om l on oo">sns.relplot(x=am_ap_go_subset.index,<br/>            y='close',<br/>            data=am_ap_go_subset,<br/>            kind='line',<br/>            hue='symbol',<br/>            style='symbol');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/ba3b781c17703ea3b9d94328f2d85492.png" data-original-src="https://miro.medium.com/v2/format:webp/1*VZBYicOgZKwmzI6KjEVKqw.png"/></div></figure><p id="e634" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">现在线条样式更清晰了。您可能会说，对这些行进行样式化并不会比前一个添加更多的信息。但是当你有一个情节，它的线条非常接近时，这将对解释有很大的帮助。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="8d2b" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">线形图点标记</h2><p id="df1b" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">当您有一个较小的数据集并且想要创建一个折线图时，用一个标记来标记每个数据点可能会很有用。对于我们较小的数据，股票价格的分布仍然非常紧密。因此，让我们选择一个更小的时间段，看看如何使用点标记:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="3cd8" class="kz la it mj b gy ol om l on oo">smaller_subset = am_ap_go_subset.loc["2015-01-01":"2015-03-01"]<br/><br/>sns.relplot(x=smaller_subset.index,<br/>            y='close',<br/>            data=smaller_subset,<br/>            kind='line',<br/>            hue='symbol',<br/>            style='symbol',<br/>            markers=True)<br/>plt.xticks(rotation=60);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/2d22c0937a530128d1dc6f2dc435494b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*McHYhF5Fc5OZgtG3E-ZDFQ.png"/></div></figure><p id="d0b5" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">现在我们每条线都有不同的标记。我们将<code class="fe mg mh mi mj b">markers</code>参数设置为<code class="fe mg mh mi mj b">True</code>来激活该功能。</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="6397" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">线图置信区间</h2><p id="480a" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">接下来，我们将探讨在SB中为线图计算的置信区间。如果一个点有多个观察值，置信区间会自动添加。</p><p id="96d1" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">在这三家公司的数据中，对于这一时期的每一天，我们都有三个观察值:一个是亚马逊，一个是谷歌，一个是苹果。当我们创建一个没有分组的线图时(没有<code class="fe mg mh mi mj b">hue</code>参数)，SB默认取这三个的平均值:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="ecdf" class="kz la it mj b gy ol om l on oo">sns.relplot(x=am_ap_go.index, y='close', <br/>            data=am_ap_go, kind='line');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/abef7bbef813708630769686584e2ce8.png" data-original-src="https://miro.medium.com/v2/format:webp/1*E99k837kOs2SMvC6_Kpd8g.png"/></div></figure><p id="34f8" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">深色线表示三家公司股价的平均值。阴影区域是95%的置信区间。这是非常巨大的，因为我们的样本数据只有三家公司。阴影区域表示有95%的把握总体平均值在此区间内。它表明了我们数据中的不确定性。</p><p id="f670" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">例如，对于2017年，人口的平均值可以在100和800之间。置信区间的范围很大，因为我们只选择了三家公司。抱歉，我不得不添加统计术语，但这对理解置信区间很重要。您可以关闭置信区间，将<code class="fe mg mh mi mj b">ci</code>参数设置为<code class="fe mg mh mi mj b">None</code>:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="0626" class="kz la it mj b gy ol om l on oo">sns.relplot(x=am_ap_go.index,  <br/>            y='close', <br/>            data=am_ap_go,  <br/>            kind='line', ci=None);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/d50890f7f1a4a2b97616a3623af58f6f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*LOkm5hBz6IYTJtbiD3PYJw.png"/></div></figure><p id="1655" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">或者如果你愿意，你可以显示标准差而不是置信区间。将<code class="fe mg mh mi mj b">ci</code>参数设置为<code class="fe mg mh mi mj b">sd</code>:</p><pre class="kj kk kl km gt oh mj oi oj aw ok bi"><span id="3cfe" class="kz la it mj b gy ol om l on oo">sns.relplot(x=am_ap_go.index, <br/>            y='close', <br/>            data=am_ap_go, <br/>            kind='line', <br/>            ci='sd');</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oz"><img src="../Images/d8e96a96d60950f2ff6251ecd4c3c606.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Veg6MkQRMNznAC-MjLJsqQ.png"/></div></figure><p id="60f0" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">也许这些参数对我们的样本数据不是很有用，但当您处理大量真实数据时，它们将非常重要。</p><blockquote class="oq or os"><p id="7ff4" class="mk ml ot mm b mn nc ju mp mq nd jx ms ou ne mu mv ov nf mx my ow ng na nb mf im bi translated">最后注意:如果你想为你的线图创建支线图，你可以使用相同的<code class="fe mg mh mi mj b">col</code>和<code class="fe mg mh mi mj b">row</code>参数。</p></blockquote></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="709a" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h2><p id="359c" class="pw-post-body-paragraph mk ml it mm b mn pa ju mp mq pb jx ms li pc mu mv lm pd mx my lq pe na nb mf im bi translated">最后，我们完成了Seaborn的关系图。线图和散点图是在数据海洋中发现见解和趋势的非常重要的视觉辅助工具。因此，掌握它们是很重要的。并尽可能使用Seaborn来创建它们。你看到了使用图书馆是多么容易。</p><p id="77db" class="pw-post-body-paragraph mk ml it mm b mn nc ju mp mq nd jx ms li ne mu mv lm nf mx my lq ng na nb mf im bi translated">查看我关于数据可视化的其他文章:</p><div class="nh ni gp gr nj nk"><a rel="noopener follow" target="_blank" href="/mastering-catplot-in-seaborn-categorical-data-visualization-guide-abab7b2067af"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">掌握Seaborn中的catplot():分类数据可视化指南。</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">如果你能在锡伯恩做到，那就在锡伯恩做吧，#2</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="pg l nv nw nx nt ny ks nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener follow" target="_blank" href="/clearing-the-confusion-once-and-for-all-fig-ax-plt-subplots-b122bb7783ca"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">一劳永逸地澄清困惑:fig，ax = plt.subplots()</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">了解Matplotlib中的图形和轴对象</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">towardsdatascience.com</p></div></div><div class="nt l"><div class="ph l nv nw nx nt ny ks nk"/></div></div></a></div></div></div>    
</body>
</html>