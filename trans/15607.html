<html>
<head>
<title>Pandas DataFrame Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫数据框架基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pandas-dataframe-basics-3c16eb35c4f3?source=collection_archive---------27-----------------------#2020-10-27">https://towardsdatascience.com/pandas-dataframe-basics-3c16eb35c4f3?source=collection_archive---------27-----------------------#2020-10-27</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="79a4" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">开始使用这种非常有用的数据结构</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e1a8d36cbc00db5d7d3946435be6a501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AIgSjY_CeMINi-joTZWzmg.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">丹尼尔·麦金尼斯在<a class="ae kz" href="https://unsplash.com/s/photos/start?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="85b4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在使用Python处理和分析数据时，Pandas通常是数据科学家、分析师和工程师的默认选择。使用该库时使用的基本数据结构是DataFrame。Pandas DataFrame是由行和列数据组成的二维结构，与Excel电子表格或SQL数据库表没有什么不同。</p><p id="7530" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">一旦数据在这个数据结构中可用，您就可以执行各种操作来准备您的数据进行分析。在下面的文章中，我将向你介绍一些使用熊猫数据框架的基本概念。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="c819" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">创建数据框架</h1><p id="f0f0" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated"><code class="fe na nb nc nd b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame()</a></code>函数可用于将序列、数组、常量或列表形式的数据转换成数据帧。</p><p id="4e03" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码接受一个整数列表，并将它们转换成熊猫数据帧。我们传入一个列名列表，并使用<code class="fe na nb nc nd b">pandas.head()</code>函数显示前几行数据。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ng"><img src="../Images/b5d9506925137f74ff70081fd9c3f3f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*bIsuTxcnb3fs_WQUBF-3Lw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="03b9" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">导入数据</h1><p id="4447" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在本教程的剩余部分，我们将使用来自UCI机器学习知识库的开源数据集。该数据集包括一个成年人的许多特征，如年龄、教育水平和婚姻状况，以及一个表明他们年收入是否超过5万美元的目标。</p><p id="8037" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以使用<code class="fe na nb nc nd b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html" rel="noopener ugc nofollow" target="_blank">pandas.reas_csv()</a></code>函数直接从URL下载这个数据集。这个函数以熊猫数据帧的形式返回数据。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="a6b2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Pandas支持多种导入数据的方法，包括:</p><ul class=""><li id="44bb" class="nh ni iu lc b ld le lg lh lj nj ln nk lr nl lv nm nn no np bi translated">用<code class="fe na nb nc nd b">pandas.read_excel()</code>从Excel电子表格中读取。</li><li id="9155" class="nh ni iu lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated">用<code class="fe na nb nc nd b">pandas.read_sql()</code>从SQL表中读取。</li><li id="ec53" class="nh ni iu lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated">来自一个带<code class="fe na nb nc nd b">pandas.read_json</code>的JSON文件。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="139b" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">添加新的列和行</h1><p id="5309" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">需要向数据帧中添加新列以方便对数据的进一步分析是很常见的。有很多方法可以让你做到这一点。</p><p id="9d33" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，您可能希望根据条件添加新列。在下面的代码中，我们使用<code class="fe na nb nc nd b">numpy.where()</code>函数创建一个名为“兼职时间”的列，如果“每周小时数”小于35，则该列的值为1。我还调用了<code class="fe na nb nc nd b">pandas.value_counts()</code>来快速查看这个新列中每个值的成人数量。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nv"><img src="../Images/ad52e7b2a0d8cf63dea5254082847c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*_wqZE_00i-wU7CVrLfKYMg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure><p id="058b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我们使用的数据集中，有一列包含每个人的年龄。更好地分析这种数据类型的常用方法是将年龄分组或分类。我们可以使用<code class="fe na nb nc nd b">pandas.cut()</code>函数创建一个新的列来完成这项工作。我已经使用pandas <a class="ae kz" href="https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.DataFrame.plot.html" rel="noopener ugc nofollow" target="_blank">绘图功能</a>结合<code class="fe na nb nc nd b">value_counts()</code>创建了一个简单的分布可视化表示。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/35b83f6cbf9d151db28fa0e544487401.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJLJlQqNJc8FgFcK81-27g.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="0538" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">索引和选择数据</h1><p id="dd46" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在数据分析期间，通常执行的任务是从数据集中选择行和列的子集。Pandas提供了许多方法来执行这种类型的操作。</p><p id="e050" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如上所示，我们可以根据条件选择数据子集。假设我们想要选择年龄超过65岁的人所在的所有行和列。我们可以使用下面的代码做到这一点。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><p id="8b90" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">熊猫数据帧被索引，因此也可以根据索引选择数据。您可以使用索引来选择数据，或者通过标签(在这种情况下，您将使用<code class="fe na nb nc nd b">DataFrame.loc()</code>函数)或者通过基于整数的位置(使用<code class="fe na nb nc nd b">DataFrame.iloc()</code>)。</p><p id="5cc5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下代码选择标签为“occupation”的列的所有行。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nx"><img src="../Images/8adbbeaf6f68373a9f7770475c2d2aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*F98Q_hYIxNOPwwuWENNzdw.png"/></div></figure><p id="af46" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个代码片段使用列的整数位置执行完全相同的操作。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ne nf l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="d917" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">清理数据</h1><p id="14ab" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">真实世界的数据通常包含需要清除的缺失值或错误值。Pandas有清除所有数据类型(包括整数、浮点数和对象)中缺失数据的方法。</p><p id="b140" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为了用合适的值填充缺失的值，我们可以使用<code class="fe na nb nc nd b">DataFrame.fillna()</code>。在fill参数中，我们可以指定一个值，比如0，或者指定一个字典，为每一行和/或每一列指定不同的值。</p><p id="c9a6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，我们可以选择使用<code class="fe na nb nc nd b">DatFrame.dropna()</code>删除包含缺失值的行。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="fbac" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">导出数据</h1><p id="97a7" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">一旦你完成了你的数据帧，你可以把它导出回一个文件或数据库。Pandas支持多种数据导出方法，包括:</p><ul class=""><li id="c51d" class="nh ni iu lc b ld le lg lh lj nj ln nk lr nl lv nm nn no np bi translated">用<code class="fe na nb nc nd b">pandas.to_csv()</code>导出到CSV文件。</li><li id="8e08" class="nh ni iu lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated">使用<code class="fe na nb nc nd b">pandas.to_excel()</code>导出到Excel电子表格。</li><li id="01d0" class="nh ni iu lc b ld nq lg nr lj ns ln nt lr nu lv nm nn no np bi translated">用<code class="fe na nb nc nd b">pandas.to_sql()</code>写回SQL数据库。</li></ul></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="46e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">熊猫图书馆包含大量有用的数据分析功能和工具。DataFrame不仅为组织数据提供了一种清晰有序的方法，还为您提供了这些丰富的数据分析工具。本教程提供了基本数据框架功能的简单介绍，但是一旦数据以这种结构组织起来，就有更多的使用范围。如果你想更深入地探索我在这篇文章中概述的一些功能，我邀请你看看我以前的一些熊猫教程。</p><div class="ny nz gq gs oa ob"><a rel="noopener follow" target="_blank" href="/10-things-you-didnt-know-about-pandas-d20f06d1bf6b"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">关于熊猫你不知道的10件事</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">直到现在…</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">towardsdatascience.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a rel="noopener follow" target="_blank" href="/plotting-in-pandas-just-got-prettier-289d0e0fe5c0"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">熊猫里的情节越来越漂亮了</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">创建丰富的可视化和仪表板与熊猫绘图后端为Plotly和Bokeh</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">towardsdatascience.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op kt ob"/></div></div></a></div><div class="ny nz gq gs oa ob"><a rel="noopener follow" target="_blank" href="/5-minute-guide-to-plotting-with-pandas-e8c0f40a1df4"><div class="oc ab fp"><div class="od ab oe cl cj of"><h2 class="bd iv gz z fq og fs ft oh fv fx it bi translated">熊猫绘图5分钟指南</h2><div class="oi l"><h3 class="bd b gz z fq og fs ft oh fv fx dk translated">了解如何使用这个流行的python工具快速可视化数据</h3></div><div class="oj l"><p class="bd b dl z fq og fs ft oh fv fx dk translated">towardsdatascience.com</p></div></div><div class="ok l"><div class="or l om on oo ok op kt ob"/></div></div></a></div><p id="8187" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！</p><p id="ed59" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><a class="ae kz" href="https://mailchi.mp/ce8ccd91d6d5/datacademy-signup" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">我每月都会发一份简讯，如果你想加入，请点击此链接注册。期待成为您学习旅程的一部分！</strong> </a></p></div></div>    
</body>
</html>