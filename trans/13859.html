<html>
<head>
<title>Playing chrome’s dino game by physically jumping and crouching</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过身体上的跳跃和蹲下来玩chrome的恐龙游戏</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/playing-chromes-dino-game-by-physically-jumping-and-crouching-a3d319234727?source=collection_archive---------32-----------------------#2020-09-23">https://towardsdatascience.com/playing-chromes-dino-game-by-physically-jumping-and-crouching-a3d319234727?source=collection_archive---------32-----------------------#2020-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6dd8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个有创意的PoseNet应用程序，它运行在你的浏览器上，并试图预测你是在跳跃、蹲伏还是静止不动</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7788ea76014df6d06944d859e996f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*UoyyI91juQgWn2eLBKjSQQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">截图来自chromedino.com<a class="ae ky" href="https://chromedino.com/" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="b9de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你们都知道这个游戏的内容。这是世界上最好的离线道歉服务页面。人们制作了简单的机器人，在恐龙跳起来打败游戏的时候，用CNN状态编码器强化学习代理。</p><p id="5725" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是个游戏，我们应该玩得开心。今天，我将带你了解如何编写一些JavaScript代码，通过在房间里跳来跳去来玩这个游戏。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e8e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lx">这个东西很难玩。</em></p><blockquote class="ly lz ma"><p id="7b3c" class="kz la lx lb b lc ld ju le lf lg jx lh mb lj lk ll mc ln lo lp md lr ls lt lu im bi translated">你可以试试游戏<a class="ae ky" href="https://ntakour.is/posenet-dino-game/" rel="noopener ugc nofollow" target="_blank">这里</a>查看完整源代码<a class="ae ky" href="https://github.com/ntakouris/posenet-dino-game" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="cb15" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">克服技术壁垒</h1><p id="dfe5" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">对于经验丰富的开发人员来说，建立一个具有基本javascript支持的小网页来获得网络摄像头提要和dino游戏容器是微不足道的。你所需要的只是最新的chrome，一个<code class="fe ni nj nk nl b">&lt;video&gt;</code>标签，<a class="ae ky" href="https://stackoverflow.com/questions/48049285/webcam-video-stream-not-showing-in-html5-video-tag" rel="noopener ugc nofollow" target="_blank">一些从stack overflow</a>和<a class="ae ky" href="https://github.com/wayou/t-rex-runner/" rel="noopener ugc nofollow" target="_blank">抓取的t-rex游戏</a>加载网络摄像头的JavaScript片段。</p><p id="69a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是有趣的部分。运动/动作检测。</p><p id="196d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Tensorflow Lite开源了许多针对网络或移动应用的微调模型。我决定使用完整的(下半身和上半身)姿势探测器。通过在您的<code class="fe ni nj nk nl b">&lt;head&gt;</code>中添加这两行代码，您可以导入tensorflow lite for javascript以及我在这里使用的模型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure><p id="d796" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载并准备好每个依赖项后，我们可以开始处理相机元素的<code class="fe ni nj nk nl b">loadeddata</code>事件。</p><p id="e000" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦网络摄像头准备就绪，加载模型并开始姿势预测循环。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure><p id="3c6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还通过在video feed容器上添加一个点击事件，加入了一个小的录制播放/暂停功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8070" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">检测动作</h1><p id="025b" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">Posenet输出每个预测骨骼位置的列表，以及一个<em class="lx">得分</em>值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/7fc3ebb80c2ad057871fe7f5947ca18a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*zlLbpslnXIlgp_Xoc_rhUA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.tensorflow.org/lite/models/pose_estimation/overview" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/lite/models/pose _ estimation/overview</a></p></figure><p id="c7b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了简单起见，我们的算法非常简单。</p><ol class=""><li id="09d0" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated">挑出左右髋骨</li><li id="d39f" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">选择最有把握(得分)的髋骨</li><li id="c5d3" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">如果分数不是<code class="fe ni nj nk nl b">&gt; 0.6</code>(比随机猜测好)，则转到下一帧</li><li id="4089" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated">否则，在<code class="fe ni nj nk nl b">y</code>轴上执行简单的阈值处理来检测动作</li></ol><p id="f49b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是目前为止我们算法的第一部分:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure><p id="e614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">继续进行<strong class="lb iu">阈值处理。</strong></p><p id="72de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">亲亲。</p><ul class=""><li id="a40a" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu oc nu nv nw bi translated">如果臀部位于摄像头进给的下部(底部<code class="fe ni nj nk nl b">20%</code>),则将其视为下蹲。</li><li id="8ab1" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu oc nu nv nw bi translated">如果臀部在进给的中间(在摄像机进给高度的<code class="fe ni nj nk nl b">20%</code>和<code class="fe ni nj nk nl b">70%</code>之间)，则视为空转。</li><li id="9a45" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu oc nu nv nw bi translated">否则，将此视为跳转</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure><blockquote class="od"><p id="fb32" class="oe of it bd og oh oi oj ok ol om lu dk translated">当然，这是假设玩家站在摄像机前的正确位置。这很容易做到。只要确保你离得很远，让你的臀部在视口的中间，有足够的空间让你可以蹲下和跳跃。</p></blockquote><p id="d66e" class="pw-post-body-paragraph kz la it lb b lc on ju le lf oo jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">最后一部分，实现<code class="fe ni nj nk nl b">toggleAction</code>非常简单。我们只是要模拟按键事件。键码<code class="fe ni nj nk nl b">32</code>表示空格键，键码<code class="fe ni nj nk nl b">40</code>表示下箭头。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm lw l"/></div></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><blockquote class="ly lz ma"><p id="8c7f" class="kz la lx lb b lc ld ju le lf lg jx lh mb lj lk ll mc ln lo lp md lr ls lt lu im bi translated">你可以在这里试玩游戏<a class="ae ky" href="https://ntakour.is/posenet-dino-game/" rel="noopener ugc nofollow" target="_blank">，在这里</a>查看完整源代码<a class="ae ky" href="https://github.com/ntakouris/posenet-dino-game" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="b477" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样。感谢阅读！</p></div></div>    
</body>
</html>