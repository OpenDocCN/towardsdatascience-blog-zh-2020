<html>
<head>
<title>Boosting Sales Through Customer Segmentation Analysis: Knowing the Market Better</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过客户细分分析促进销售:更好地了解市场</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/boosting-sales-through-customer-segmentation-analysis-knowing-the-market-better-8c7feebd3479?source=collection_archive---------25-----------------------#2020-10-01">https://towardsdatascience.com/boosting-sales-through-customer-segmentation-analysis-knowing-the-market-better-8c7feebd3479?source=collection_archive---------25-----------------------#2020-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aadf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">应用客户细分来洞察营销活动</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b397a5191a849e6070372a5ed30c2fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EfENKUhSC7hqO1d45Qni9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a8d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">客户细分是一个基于某些特征(年龄、性别、收入等)将公司的客户分成不同群体的过程。)，而有效的分析可以帮助一个公司做出更好的营销决策。在这篇文章中，我将分享一个基于Arvato公司提供的数据的客户细分分析。Arvato是一家供应链解决方案公司，我用于分析的数据集包含一家客户公司的客户人口统计数据。我还建立了一个模型来预测邮寄广告的回复率。</p><p id="5fc6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面，我将向您详细介绍我使用无监督和有监督学习方法进行的分析。我们分析了两个数据集，即来自Arvato客户公司的客户数据和来自德国的一般人口统计数据，以回答以下问题:</p><blockquote class="lu lv lw"><p id="3607" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">1.谁是客户公司的忠实客户，随着营销策略的改变以扩大客户群体，谁是潜在的目标客户？</p><p id="a2a0" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">2.当客户公司发出邮件报价时，我们能预测回复率吗？</p></blockquote></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="4f58" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">第一部分.客户细分</h1><p id="c54e" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">谁是客户公司的忠实客户，随着营销策略的改变以扩大客户群体，谁是目标潜在客户？</p><p id="1f7d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">聚类分割有助于将客户公司现有客户的人口统计数据映射到德国的一般人群。在这里，我应用无监督学习来识别普通人群中的哪个部分代表客户公司的忠实客户，哪个部分代表他们可能瞄准的潜在新客户群。</p><h2 id="34c8" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated">数据探索</h2><p id="a693" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated"><em class="lx">数据科学家花80%的时间清理数据。</em></p><p id="b876" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个项目过程中，我90%的时间都花在了数据探索和预处理上。我在客户细分中使用的以下数据集包含大量原始数据:</p><ul class=""><li id="65be" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu"> Azdias </strong> —德国普通人口的人口统计数据(891211 x 366)。</li><li id="09d3" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><strong class="la iu">客户</strong> —客户公司的人口统计数据(191652 x 369)。</li></ul><p id="48df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在总体数据中，有273列包含缺失值。我决定删除缺失值率超过30%的列(用红色表示)，因为大量的缺失值对于分析统计数据和构建模型是有害的(例如ALTER_KIND1和EXTSEL992)。对于剩余的列(蓝色)，我会用最频繁的值来估算缺失的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/e6041dc2eb0162b2268da485b501619b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OjcUtxJ110B-Ihy630wc3Q.png"/></div></div></figure><p id="eafc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有890919行包含缺失值。通过检查缺失率的分布，大多数行的缺失值少于10%，因此，我将删除阈值设为50%。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/6ec6208ae45fd4f0baadf87b2057e1b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*Hckfhsas9bD8bPFlU2Hf3g.png"/></div></figure><h2 id="5121" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak">数据预处理</strong></h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/c8c134fb7d01f512dd328606a60de063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*06NqIxoIrittaubijJJ91A.png"/></div></div></figure><p id="7700" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据预处理包括以下六个步骤:</p><ul class=""><li id="e250" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu">重新编码缺失值</strong>:<em class="lx">T3】我手工创建了特征描述文件feature_summary.csv，包含属性名、特征类型、缺失值或未知值。根据功能描述文件，许多功能中的缺失值由–1和0值表示(例如，在功能“AGER_TYP”中)。在这里，我根据特性描述文件将每个属性中所有缺失的值重新编码到NaN中(见下文)。</em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5c182b943083d184c70ef3ba202a1cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C-NWqn9uQKAX_pvhZH_gHA.png"/></div></div></figure><ul class=""><li id="c9ce" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu">丢弃缺失值:</strong>注意缺失值重新编码后，各列缺失率的分布向百分比较高的区域偏移。丢失值超过30%的所有列和丢失值超过50%的所有行都从两个数据库中删除。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/67a27b9f31c8479d673102da40c998b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5cfggltVJO7om07GLLmaw.png"/></div></div></figure><ul class=""><li id="fb89" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu">丢弃高度相关的特征:</strong>计算每个特征的皮尔逊相关系数。相关性可以是正的，也可以是负的，因此，我存储了相关性的绝对值。特征被阈值&gt; 0.95去除，比如KBA13_BAUMAX，KBA13_FAB_SONSTIGE，LP_FAMILIE_GROB。</li></ul><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="7316" class="nf mj it ol b gy op oq l or os"># Calculate Pearson's correlation matrix<br/>corr_df = azdias_drop_missing.corr().abs()</span><span id="7d1b" class="nf mj it ol b gy ot oq l or os"># Create and apply mask<br/>mask = np.triu(np.ones_like(corr_df,dtype=bool))<br/>tri_df = corr_df.mask(mask)</span><span id="28b7" class="nf mj it ol b gy ot oq l or os"># Find the features that meet threshold<br/>to_drop = [c for c in tri_df.columns if any(tri_df[c] &gt; 0.95)]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/ab819aff68ccbc276423e0ffab745a49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MmtLi3uu1LZl5em7YlP5-A.png"/></div></div></figure><ul class=""><li id="dc65" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu">一次性编码分类特征:</strong>根据特征描述文件识别多级分类特征，每个分类特征都被一次性编码为虚拟变量。</li><li id="5c70" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><strong class="la iu">平移变换混合型变量:</strong> <em class="lx"> </em>一些特征包含多个属性，被拆分成新的独立特征。例如，“CAMEO_INTL_2015”被拆分为“财富”和“人生阶段”属性。</li><li id="a27e" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><strong class="la iu">估算和缩放数据:</strong>用<em class="lx">模式</em>方法估算剩余缺失值，用StandardScaler缩放数据。</li></ul><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="d9d9" class="nf mj it ol b gy op oq l or os">imputer = SimpleImputer(strategy='most_frequent')<br/>scaler = StandardScaler()</span></pre><blockquote class="lu lv lw"><p id="9c18" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">经过数据预处理后，<strong class="la iu"> Azdias </strong>数据库的矩阵为791244 x 395，<strong class="la iu">客户</strong>数据库的矩阵为140866 x 395。</p></blockquote><h2 id="b094" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak">主成分分析</strong></h2><p id="ebcf" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">具有多个特征会使数据分析的过程变得复杂，并且有必要在聚类分割之前降低数据的维度。在这个项目中，我进行了主成分分析(PCA ),将原始数据分解成几个不相关的主成分，仅保留395个成分中的200个，这解释了原始数据集约88%的累积可变性。</p><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="6a51" class="nf mj it ol b gy op oq l or os">n_components=200<br/>pca = PCA(n_components=n_components,random_state=42)<br/>azdias_pca = pca.fit_transform(azdias_scaled)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/430f6b5dacfef5cca7b174ce11bf05a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsKHExKw8VeFgRbkQnEAag.png"/></div></div></figure><h2 id="18d3" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated">聚类和特征分解</h2><p id="6d8f" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">我应用了<em class="lx"> k </em> -means算法来将数据集分组到各个集群中，并使用了<em class="lx">肘</em>方法来找到正确数量的集群。<em class="lx">肘</em>方法的思想是运行<em class="lx">k</em>——意思是在数据集上对范围<em class="lx"> k </em>进行聚类，并对<em class="lx"> k </em>的每个值计算误差平方和(即<em class="lx">k</em>——意思是得分)。在<em class="lx"> k </em>值和<em class="lx">k</em>-均值得分的图中，曲线上的“肘”是数据集的最佳聚类数。基于下面的<em class="lx">肘</em>方法结果，我使用<em class="lx"> k </em>均值算法将数据集分成八个聚类。</p><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="26ef" class="nf mj it ol b gy op oq l or os"># Number of different cluster counts<br/>n_clusters = np.arange(2,21)</span><span id="267b" class="nf mj it ol b gy ot oq l or os"># Run k-means clustering on the data and compute the average within-cluster distances.<br/>scores = [MiniBatchKMeans(i).fit(azdias_pca).score(azdias_pca) for i in n_clusters]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/02b3d551d7be876481c896f83e18d69c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y9MdpLxVlFT_cLXWWJGIAg.png"/></div></div></figure><p id="4cc0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将客户数据映射到人口统计聚类后，现在我们能够比较普通人群和客户公司的客户群之间的聚类分布。结果表明，集群7是该公司的主要客户群，因为它在其他客户中拥有最高的客户比例。这个集群可以被认为是“忠诚的客户”相比之下，聚类2显示出最低的客户百分比，并展示出一般人群和客户比例之间的最高负差。这表明，考虑到当前的营销策略，集群2中的一小部分人可能会成为客户公司的客户。对于客户公司来说，这里的机会是，针对集群2的人口定制营销策略将有可能吸引新的客户群。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/7fb5109f95e84339a22e287e3ea81d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmp7DRzqfwYWQokz5rrJqA.png"/></div></div></figure><p id="ddde" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">聚类信息的分解揭示了什么类型的个体构成聚类2和聚类7。首先确定哪些主成分对聚类更有意义，然后评估哪些特征可以解释特定主成分中的更多方差，同时通过逆PCA变换和数据缩放收集原始特征值。总之，我能够找出哪些类型的个人属于第2类和第7类。</p><p id="0b50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lx">忠诚客户:集群7(中产阶级)</em></p><p id="3ab3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面，我列出了十个最正相关的特征(红色)，以及十个最负相关的特征(蓝色)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/d03d31952a1940136999f4839fc3c44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q52PRn2plgQ8aY4jlSeuvQ.png"/></div></div></figure><p id="bdb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">客户公司的忠实客户大多年龄在46-60岁之间，属于中产阶级，有小规模的家庭。这些客户生活稳定，对金融投资兴趣不大，热衷于网上购物。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/101029f65de397446a15db9449bb12fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LP9PmSyaXwb7M57MDiERNA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">聚类7正相关特征</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/420414b49b8af7500f4d7e129ab3fb53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gvAtsy52CWVV7meDGpu3BA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">聚类7负相关特征</p></figure><p id="4405" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lx">潜在客户:集群2(富裕的上层阶级)</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/da418e24727b5e6e8fe3c19590aaf87f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vslZMMJgAQg323jx5_VvaQ.png"/></div></div></figure><p id="9e0a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“车，车，车！”当我们看集群2的主要特征时，我们看到的都是豪华车。第二组中的人是昂贵的德国汽车的爱好者，除此之外，他们中的大多数人的祖先追溯到旧时代的西德。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/f6d696a15ef991d215e7ba29c05a9fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57zw7U2aPTyfqyubqznEZw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">聚类2正相关特征</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/615caa2eb777ec164e8f92042aedc4bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvn7Uj-p2138ItScOlptTQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">聚类2负相关特征</p></figure><blockquote class="lu lv lw"><p id="72d8" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">外卖:家庭小、网购习惯活泼的中产个人，是客户公司的核心客户。如果客户公司想要扩大他们的客户群体，对德国豪华车感兴趣的来自西德的上流社会人士是潜在的营销目标。</p></blockquote></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="5eb2" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">第二部分。监督学习</h1><p id="6406" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated"><strong class="la iu">当客户公司发出邮件报价时，我们能预测回复率吗？</strong></p><p id="6845" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个典型的分类问题，建立一个有监督的机器学习模型是一个很好的解决方法。这部分的主要焦点是使用训练数据集来训练模型，并使用训练的模型来预测“响应”属性，即，确定测试<strong class="la iu"> </strong>数据集中的个体是否会响应邮寄要约。</p><h2 id="d36e" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak">数据探索</strong></h2><p id="f397" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">Arvato提供的培训数据和测试数据包括以下内容:</p><ul class=""><li id="1ea4" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><strong class="la iu"> Mailout_train </strong> —作为营销活动目标的个人的人口统计数据(42 982 x 367)。</li><li id="b7f0" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><strong class="la iu"> Mailout_test </strong> —作为营销活动目标的个人的人口统计数据(42 833 x 366)。</li></ul><p id="f1c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下图响应分布图所示，目标属性“response”在<strong class="la iu"> Mailout_train </strong>数据集中高度不平衡，有42430个否定响应，只有532个肯定响应，响应率仅为1.2%。这种高度的不平衡会影响分类模型的训练，也会使常用的度量标准变得具有误导性(如准确性)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/cc370557ade0276615145089d8e3d311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVjCerRTMgLNyme8JOJMEg.png"/></div></div></figure><h2 id="b18e" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak">数据预处理</strong></h2><p id="6ae3" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">第一部分的数据预处理过程已经实现为<em class="lx"> clean </em>函数，可以在我的<a class="ae pf" href="https://github.com/giantseaturtle/Capstone_Arvato-Project/blob/master/clean.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中找到。这里，我只是复制了相同的步骤来预处理<strong class="la iu"> Mailout_train </strong>和<strong class="la iu"> Mailout_test中的数据。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/df553bd5df01cd45f12ed20388294deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1j19aCikzxClj7DG-TZSwg.png"/></div></div></figure><h2 id="01bf" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak">实施和细化</strong></h2><p id="6dd2" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">由于“回应”中的数据高度不平衡，这里我采用的方法是计算个人对要约做出回应的概率，并分析做出回应的个人的集体特征，并使用这些信息来建议具有高回应概率的个人。ROC曲线下的计算面积(假阳性率对真阳性率)用于评估机器学习模型的性能。</p><p id="15bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我考虑了以下五种分类算法:</p><ul class=""><li id="82c7" class="nr ns it la b lb lc le lf lh nt ll nu lp nv lt nw nx ny nz bi translated"><em class="lx"> AB: AdaBoostClassifier </em></li><li id="7404" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><em class="lx">GB:GradientBoostingClassifier</em></li><li id="8280" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><em class="lx"> LR:物流回收</em></li><li id="ccf7" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><em class="lx">RF:RandomForestClassifier</em></li><li id="7472" class="nr ns it la b lb oa le ob lh oc ll od lp oe lt nw nx ny nz bi translated"><em class="lx"> XGB: XGBClassifier </em></li></ul><p id="6f40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了评估这五种算法的性能，我创建了一个函数，当指定算法和参数时，它可以计算ROC得分。</p><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="a68b" class="nf mj it ol b gy op oq l or os">def grid_search(estimator, param_grid, X=X, y=y):<br/>    """<br/>    Grid search a classifier by ROC score, using cross-  validation.<br/>    <br/>    INPUT:<br/>    - estimator (classifier): name of classifier<br/>    - param_grid (dict): parameters used with GridSearchCV<br/>    - X (DataFrame): features from cleaned mailout_train dataframe<br/>    - y (DataFrame): 'RESPONSE' from cleaned mailout_train dataframe<br/>            <br/>    OUTPUT:<br/>    - classifier: fitted classifier<br/>    - prints elapsed time and ROX AUC<br/>    """<br/>    <br/>    grid = GridSearchCV(estimator=estimator, param_grid=param_grid, scoring='roc_auc', cv=5)<br/>    grid.fit(X, y)<br/>    best_estimator = grid.best_estimator_<br/>    best_score = grid.best_score_<br/>    return best_estimator, best_score</span></pre><p id="d7d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于高度不平衡的响应属性，我通过5重交叉验证将<strong class="la iu"> Mailout_train </strong>数据集分成训练集和验证集，然后用默认超参数将数据拟合到五个算法中。</p><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="ed1c" class="nf mj it ol b gy op oq l or os"># Choose five classifiers, LR, RF, AB, XGB, and GB<br/>models = []<br/>models.append(('LR', LogisticRegression()))<br/>models.append(('RF', RandomForestClassifier()))<br/>models.append(('AB', AdaBoostClassifier()))<br/>models.append(('XGB', XGBClassifier()))<br/>models.append(('GB', GradientBoostingClassifier()))</span><span id="3095" class="nf mj it ol b gy ot oq l or os"># Evaluate ROC AUC score of five classifiers with default parameter<br/>for i in range(len(models)):<br/>    score = grid_search(models[i][1], {})[1]<br/>    print('ROC AUC score for {}: {}'.format(models[i][0], score))</span></pre><p id="be7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">AdaBoostClassifier (AB)和GradientBoostClassifier (GB)是表现最好的模型，ROC AUC得分分别为0.7172和0.7564。从这一点开始，我使用网格搜索来调整AB和GB模型的超参数，将它们的ROC AUC分数分别增加到0.7531和0.7570(见下面的红色柱)。</p><pre class="kj kk kl km gt ok ol om on aw oo bi"><span id="9777" class="nf mj it ol b gy op oq l or os"># Tune the hyperparameters of AB model<br/>param_AB = {<br/>          "learning_rate"     : [0.1,0.2],<br/>          "n_estimators"      : [100,200,500]}<br/>AB_tuned = grid_search(AdaBoostClassifier(), param_AB)</span><span id="c6e3" class="nf mj it ol b gy ot oq l or os"># Tune the hyperparameters of GB model<br/>param_GB = {<br/>          "learning_rate"     : [0.1,0.2],<br/>          "max_depth"         : [3,4],<br/>          "n_estimators"      : [100,200],<br/>          "min_samples_split" : [2,4]}<br/>GB_tuned = grid_search(GradientBoostingClassifier(), param_GB)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/ed3f9f99c48a515b5b18f9419382bd18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uLhQQQQu1wjeyITgfgjrxA.png"/></div></div></figure><p id="1448" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我研究了AB和GB模型的特征，看它们是否验证了我在第二部分的客户细分分析中得出的结论。不幸的是，两种型号中唯一突出的功能是“D19_SOZIALES”，该功能不包含描述，并且在第二部分中没有被确定为忠诚客户的相关功能。对“D19_SOZIALES”特征含义的大胆猜测是，它可能与交易历史有关，因此暗示着社会经济地位。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/74adeebc1335814140c91f4c46bab482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sAIaFkiAvtkDtw7CltkXyQ.png"/></div></div></figure><h2 id="faf2" class="nf mj it bd mk ng nh dn mo ni nj dp ms lh nk nl mu ll nm nn mw lp no np my nq bi translated"><strong class="ak"> Kaggle比赛</strong></h2><p id="6fc9" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">AB和GB模型被用于预测<strong class="la iu"> Mailout_test </strong>数据集中的“响应”。AB机型取得了0.781的成绩，GB机型取得了0.777的成绩。这些结果被提交给了Kaggle。</p><blockquote class="lu lv lw"><p id="cf0e" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">要点:建立机器学习模型是解决分类问题的最有效方法。我使用AB和GB算法构建了两个模型，两个模型都能够预测邮寄要约的回复率，得分约为0.78。</p></blockquote></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="9a63" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">结论</strong></h1><p id="167e" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">有人说80–85%的数据科学项目在完成前失败，我感到幸运的是这个项目属于15–20%。在这个项目中，我练习并应用了不同类型的数据科学技能来解决一个现实生活中的问题——找到忠诚和潜在新客户的特征，并预测个人是否会对邮件发送活动做出回应。</p><p id="3a34" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有改进的余地。主成分分析(PCA)受要素比例差异的影响很大，在这方面，使用MinMaxScaler等替代方法缩放数据可能会获得更好的性能。在监督学习部分，合成少数过采样技术(SMOTE)可能是解决不平衡分类问题的更好选择，因为这种方法允许人工合成数据以获得更平衡的数据集。</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><h1 id="baec" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">资信证明</strong></h1><p id="ca6d" class="pw-post-body-paragraph ky kz it la b lb na ju ld le nb jx lg lh nc lj lk ll nd ln lo lp ne lr ls lt im bi translated">本文使用的所有代码都可以在我的<a class="ae pf" href="https://github.com/giantseaturtle/Capstone_Arvato-Project" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae pf" href="https://public.tableau.com/profile/zhili.wen#!/?newProfile=&amp;activeTab=0" rel="noopener ugc nofollow" target="_blank"> Tableau </a>上找到。</p><p id="853d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据和资源由Udacity和Bertelsmann&amp;Arvato提供。</p></div></div>    
</body>
</html>