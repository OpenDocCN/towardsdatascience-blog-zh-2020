<html>
<head>
<title>Statistical Simulation in R with Code — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带代码的R中的统计模拟—第一部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/statistical-simulation-in-r-part-1-d9cb4dc393c9?source=collection_archive---------13-----------------------#2020-10-02">https://towardsdatascience.com/statistical-simulation-in-r-part-1-d9cb4dc393c9?source=collection_archive---------13-----------------------#2020-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3043" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">破解数据科学面试</h2><div class=""/><div class=""><h2 id="5e99" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">Ace数据科学访谈</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/6f32476808167a6332d5d930bf856dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*290JvIRsE4AE_SLCfnWqvw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://www.flickr.com/photos/86689809@N00/157763181/" rel="noopener ugc nofollow" target="_blank">https://www.flickr.com/photos/86689809@N00/157763181/</a></p></figure></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="04f2" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><em class="ml">这是关于统计模拟的两篇文章的第一部分。如果您还没有看过第2部分，请点击这里:</em></p><div class="mm mn gp gr mo mp"><a rel="noopener follow" target="_blank" href="/statistical-simulation-in-python-part-2-91f71f474f77"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">Python中的统计模拟，第2部分</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">任何数据科学面试最重要的部分！</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">towardsdatascience.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd lb mp"/></div></div></a></div></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="b379" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">介绍</h1><p id="bddc" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">在过去的几个月里，我收到了一些顶级科技公司的数据科学面试。几乎所有的面试官都要求我对一个真实的商业场景进行统计模拟，但我没能给他们留下深刻印象。</p><p id="d5b2" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">你知道，这些都是合理的问题，如果我以前接触过这个话题，并不难回答。</p><p id="810c" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">直到今天，我已经花了数百个小时学习模拟，准备接下来的技术面试。</p><p id="b9ff" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">统计模拟是一个相当广泛的领域，不可能在一篇文章中涵盖所有细节。作为一个初学者，我计划通过一系列的帖子来展示模拟的细微差别和应用。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="8c4b" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">定义</h1><p id="2e71" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">现实世界中，事情是随机发生的，有无限多种可能。我们可能只能观察到一部分，而不是全部的可能性。</p><p id="34c2" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr jd">模拟</strong>派上了用场，并提供了与现实世界结果相匹配的可能性分布的快速概览。通过研究模拟结果，我们可以洞察真实世界。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/e06bfac20f219092783b34b11bf9693f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqM88XiHeNR-IACxRRBFHg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@photoshobby?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">照片爱好</a>在<a class="ae lh" href="https://unsplash.com/s/photos/cyber-punk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="497a" class="ne nf it bd ng nh oc nj nk nl od nn no ki oe kj nq kl of km ns ko og kp nu nv bi translated"><strong class="ak">生成随机数</strong></h1><p id="8f89" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">让我们从最简单的代码开始，然后进入更复杂的场景。</p><p id="4b62" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">命令<strong class="lr jd"> <em class="ml"> runif(x，min=a，max=b) </em> </strong>在a和b之间的范围内生成x个值。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="1445" class="om nf it oi b gy on oo l op oq">library(dplyr)</span><span id="c401" class="om nf it oi b gy or oo l op oq">set.seed(2)<br/>runif(25,min=0,max=10)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/8039df27ac80b51a9e761436c9397c95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_c_l1N-t-htLDJ0tf1asA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">随机值</p></figure><p id="f073" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr jd"> <em class="ml"> set.seed() </em> </strong>函数为R的随机数生成器设置一个种子，这样我们每次运行代码时都会得到一致的相同值。否则，我们会得到不同的结果。自己试试。</p><p id="74aa" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">为了得到整数，我们使用<strong class="lr jd"> <em class="ml">圆整</em> </strong>函数，如下:</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="bd49" class="om nf it oi b gy on oo l op oq">runif(25,min=0,max=10) %&gt;% <br/>  round(.,digits = 0)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ot"><img src="../Images/4a751a4db3bc004a5cbc4437b1a5f4c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FnNyB39RcMymVY6nOahcQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">围捕它</p></figure><p id="96a6" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这里的管道，<strong class="lr jd"> <em class="ml"> % &gt; % </em> </strong>，来自<strong class="lr jd"><em class="ml">magritter</em></strong>包，可以让你写出更干净易懂的代码。它可以用简单的英语翻译成‘那么’</p><p id="8329" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在英语中，上面两行代码的意思是:</p><ol class=""><li id="8b89" class="ou ov it lr b ls lt lv lw ly ow mc ox mg oy mk oz pa pb pc bi translated">生成25个介于0和10之间的数字</li><li id="3ac9" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk oz pa pb pc bi translated"><strong class="lr jd"> <em class="ml">然后</em> </strong> ( <strong class="lr jd"> <em class="ml"> % &gt; % </em> </strong>)，将数字向上舍入到最接近的整数。</li></ol><p id="0593" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">试试如果你把数字调整为1会发生什么。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="bd43" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">生成随机数的另一种方式是通过的<strong class="lr jd"> <em class="ml">样本</em> </strong>函数生成<em class="ml">:</em></p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="9c36" class="om nf it oi b gy on oo l op oq">&gt; sample(x, size, replace=TRUE, prob=NULL)</span></pre><ul class=""><li id="812e" class="ou ov it lr b ls lt lv lw ly ow mc ox mg oy mk pi pa pb pc bi translated">x:一个向量或正整数</li><li id="19d6" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk pi pa pb pc bi translated">size:一个非负整数，给出可供选择的项目数</li><li id="8dee" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk pi pa pb pc bi translated">替换:有替换的样本，还是没有？</li><li id="8a1b" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk pi pa pb pc bi translated">prob:概率权重向量，用于获取被采样向量的元素</li></ul><p id="7f6b" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">(更多信息请参考R文档，<a class="ae lh" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/sample" rel="noopener ugc nofollow" target="_blank">链接</a>)</p><p id="bd40" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">一个简单的例子。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="ec2e" class="om nf it oi b gy on oo l op oq">set.seed(24)<br/>sample(seq(1,10),8)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pj"><img src="../Images/1366684dc16ac19150855ece252dcd28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3JAUoko_LNB-MBGi1tmzg.png"/></div></div></figure><p id="a316" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr jd"> <em class="ml"> set.seed() </em> </strong>函数使结果可重现。</p><p id="5e24" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">上面的代码从序列[1，10]中生成8个数字的随机样本。正如你所看到的，我们没有为替换和选择的概率设定规则。</p><p id="f655" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">默认情况下，R将替换设置为FALSE，并采用相等的选择概率。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="71a3" class="om nf it oi b gy on oo l op oq">x = 1:10<br/>sample(x,replace=TRUE)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/b9054d2fa45d6f59a3843e526c4aa62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*d7dhvQqbTvareqM-rXpwWA.png"/></div></figure><p id="8da4" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">替换重采样的过程被称为<strong class="lr jd"> <em class="ml">引导</em> </strong>，这是一个更高级的主题，将在下一章讨论。</p><p id="181e" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">除了数字，我们还可以对单词进行采样，如下所示:</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="c7da" class="om nf it oi b gy on oo l op oq">set.seed(1)<br/>sample(letters,18)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pl"><img src="../Images/a860bb0ed23aeac31261481bdf2b7b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HrFmbZtK2pjGmUeNnSii9w.png"/></div></div></figure><h1 id="74b7" class="ne nf it bd ng nh oc nj nk nl od nn no ki oe kj nq kl of km ns ko og kp nu nv bi translated">相等和不相等的选择概率</h1><h2 id="d22a" class="om nf it bd ng pm pn dn nk po pp dp no ly pq pr nq mc ps pt ns mg pu pv nu iz bi translated"><strong class="ak">#场景1等概率</strong></h2><p id="e3d5" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">我们以相等的概率从序列[1，5]中生成大小为10的随机样本。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="96cc" class="om nf it oi b gy on oo l op oq">equal_prob_dist = sample(5,10000,<strong class="oi jd"><em class="ml">prob=rep(0.1,5)</em></strong>,replace=T)<br/>hist(equal_prob_dist)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pw"><img src="../Images/a09008f5d0975b23783f9cce1ae01cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcU-DtMOUk4rJD3oHQ6mOA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">同等概率</p></figure><p id="bebc" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">如果我们设置<strong class="lr jd"> <em class="ml"> prob=rep(0.1，5) </em>，</strong>，那么数字1到5将被平均采样，如上面的直方图所示。</p><h2 id="c3c8" class="om nf it bd ng pm pn dn nk po pp dp no ly pq pr nq mc ps pt ns mg pu pv nu iz bi translated"><strong class="ak">#场景二不等概率</strong></h2><p id="8d08" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">如果选择的概率不相等(例如，一个装载的骰子)，分布看起来像什么？</p><p id="5e6f" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们从概率不等的序列[1，5]中生成大小为10的随机样本</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="adc5" class="om nf it oi b gy on oo l op oq">unequal_prob_dist = sample(5,10000,<strong class="oi jd"><em class="ml">prob =c(0.1,0.25,0.4,0.25,0.1)</em></strong>, replace=T)<br/>hist(unequal_prob_dist)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi px"><img src="../Images/fc09c41aad5fe4833ac0ed2447c5c026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aj8pdU-MY7CG_5CufauhKQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">不平等的概率</p></figure><p id="ebd6" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我们为序列设置以下选择概率规则:</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="3f55" class="om nf it oi b gy on oo l op oq">1 &amp; 5: 0.1</span><span id="030e" class="om nf it oi b gy or oo l op oq">2 &amp; 4: 0.25 </span><span id="3ce0" class="om nf it oi b gy or oo l op oq">3: 0.4</span></pre><p id="4cb4" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">事实证明，数字3是选择最多的，1 &amp; 5是选择最少的。</p><p id="df2d" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">如果感兴趣的问题需要对选择概率进行不同的处理，这些相等/不相等的场景会非常有帮助。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="e0d9" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">数据框中的样本观测值</h1><p id="9db2" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">为了对数据框或列表中的观察值(行)进行采样，我们不直接对行进行采样，而是对对象中的索引进行采样。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="a30a" class="om nf it oi b gy on oo l op oq">head(mtcars)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi py"><img src="../Images/8f99efe842c2138b69d996893a9d14d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iukk3mhzijFEIghDCOG_w.png"/></div></div></figure><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="297c" class="om nf it oi b gy on oo l op oq"># step 1: create an index vector for the elements/rows <br/>index &lt;- seq_len(nrow(mtcars))<br/> <br/># step 2: sample the index vector<br/>set.seed(12)</span><span id="82ab" class="om nf it oi b gy or oo l op oq">#to obtain a random sample of 10<br/>sample_index &lt;- sample(index,10)</span><span id="8b02" class="om nf it oi b gy or oo l op oq"># step 3: to show the sampled elements/rows <br/>mtcars[sample_index,]</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pz"><img src="../Images/f5b368193566d543bf7a01e0044a321f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m3F56_FyDU0Pl-jedYJTIg.png"/></div></div></figure><h1 id="5e0c" class="ne nf it bd ng nh oc nj nk nl od nn no ki oe kj nq kl of km ns ko og kp nu nv bi translated"><strong class="ak">应用</strong></h1><p id="0e72" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">在这一节中，让我们进行一些实践，并解决现实生活中的业务场景。</p><h1 id="2348" class="ne nf it bd ng nh oc nj nk nl od nn no ki oe kj nq kl of km ns ko og kp nu nv bi translated">问题1:有两个六面骰子。如果把它们一起掷出，掷出7的概率是多少？</h1><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="73ea" class="om nf it oi b gy on oo l op oq">set.seed(1)<br/>die = 1:6</span><span id="5de1" class="om nf it oi b gy or oo l op oq"># sample 10000 times with replacements for dice 1<br/>die1 = sample(die,10000,replace = TRUE,prob=NULL)</span><span id="14b1" class="om nf it oi b gy or oo l op oq"># sample 10000 times with replacements for dice 2<br/>die2= sample(die,10000,replace=TRUE,prob = NULL)</span><span id="4591" class="om nf it oi b gy or oo l op oq"># the combined value of die_1 and die_2 <br/>outcomes = die1+die2</span><span id="7419" class="om nf it oi b gy or oo l op oq"># the probability of getting a 7<br/>mean(outcomes == 7)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qa"><img src="../Images/f1fa36ea1bd3042001dbd9b43cac50b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*LDgf_hUAFG7luEI-A6sI0Q.png"/></div></figure><p id="cb71" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">同样，我们可以用一个<strong class="lr jd"> <em class="ml">来代替</em> </strong>循环来达到同样的目的。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="ec86" class="om nf it oi b gy on oo l op oq">set.seed(1)<br/>for (i in 10000){<br/> die_1 = sample(die,prob=NULL,replace=TRUE)<br/> die_2 = sample(die,prob=NULL,replace=TRUE)<br/> die_sum = die_1+die_2<br/> print(mean(die_sum==7))<br/>}</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/511d188db5308ca377c48281907e2cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*nFgQ1jVrM6qsmWDuDTCA_Q.png"/></div></figure><p id="8821" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这两种结局几乎一样。</p><h1 id="1fd0" class="ne nf it bd ng nh oc nj nk nl od nn no ki oe kj nq kl of km ns ko og kp nu nv bi translated">问题2:你有两个骰子。掷出2，3，4，5，6，7，8，9，10，11，12，13的概率是多少？</h1><p id="80f2" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated">除了模拟每一种结果，还有一种更简单的方法来获得我们需要的东西，那就是使用<em class="ml">sappy</em>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="b66d" class="om nf it oi b gy on oo l op oq">sapply(2:13,function(x) mean(outcomes==x))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qc"><img src="../Images/bd47fdb0b8f3ce1e98e567ca6070650a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCXOWJBTAq5CXbyVkLLokQ.png"/></div></div></figure><p id="6fba" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">根据R文档，<code class="fe qd qe qf oi b">sapply</code>()函数是一个“用户友好的版本和默认情况下的<code class="fe qd qe qf oi b">lapply</code>包装器，通过应用<code class="fe qd qe qf oi b">simplify2array()</code>返回一个向量、矩阵或者如果<code class="fe qd qe qf oi b">simplify = "array"</code>的话，一个数组。<code class="fe qd qe qf oi b">sapply(x, f, simplify = FALSE, USE.NAMES = FALSE)</code>与<code class="fe qd qe qf oi b">lapply(x, f)</code>相同</p><p id="134a" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">简言之，该函数将函数<em class="ml"> mean(outcomes) </em>应用于序列【2，13】。</p><blockquote class="qg"><p id="5be8" class="qh qi it bd qj qk ql qm qn qo qp mk dk translated">问你一个问题:如果你有3个骰子，掷出7的概率是多少？</p></blockquote></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="2d1d" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">问题3:生成10000个值的随机样本，其中包含多少个独特的观察值？不包括多少？</h1><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="22ad" class="om nf it oi b gy on oo l op oq">set.seed(1)<br/>n=10000</span><span id="9cd2" class="om nf it oi b gy or oo l op oq">included_obs = length(unique(sample(1:n, replace = TRUE)))<br/>included_obs</span><span id="e54c" class="om nf it oi b gy or oo l op oq">missing_obs = n-included_obs<br/>missing_obs</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qq"><img src="../Images/6dbdc87ce509a394280845654828b85a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNamnc_E3nYG-V1yUc7VxQ.png"/></div></div></figure><p id="f4fa" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">采样后，我们用<strong class="lr jd"><em class="ml">【unique()】</em></strong>来寻找有区别的观测值，用<strong class="lr jd"><em class="ml">【length()</em></strong>来计数。在10k样本中，对6316个不同的案例进行采样，而对3684个(10k-6316)案例不进行采样。</p><p id="0285" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">进一步注意，我们在10k中只得到6316的原因是我们用替换进行采样，因此一些数字被重复采样。换句话说，一些数字被多次采样。</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="5d3a" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated"><strong class="ak">问题4:用随机分配的0和1生成一个m*n矩阵。</strong></h1><p id="614d" class="pw-post-body-paragraph lp lq it lr b ls nw kd lu lv nx kg lx ly ny ma mb mc nz me mf mg oa mi mj mk im bi translated"><strong class="lr jd">(鸣谢R-bloggers上的讨论，</strong> <a class="ae lh" href="https://www.r-bloggers.com/2012/08/m-x-n-matrix-with-randomly-assigned-01/" rel="noopener ugc nofollow" target="_blank"> <strong class="lr jd">此处</strong> </a> <strong class="lr jd"> ) </strong></p><p id="ead1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在最初的帖子中，作者介绍了多种方法，我在这里重点介绍第一种方法。</p><p id="f87f" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">首先，我们可以使用for循环。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="cfc0" class="om nf it oi b gy on oo l op oq">m &lt;- 10<br/>n &lt;- 10</span><span id="0ad8" class="om nf it oi b gy or oo l op oq"># create an empty matrix<br/>m00 &lt;- matrix(0,m,n)</span><span id="9fc6" class="om nf it oi b gy or oo l op oq">for (i in 1:m) {<br/>   for (j in 1:n) {<br/>     m00[i,j] &lt;- sample(c(0,1),1)<br/> }<br/>}</span><span id="99f6" class="om nf it oi b gy or oo l op oq">m00</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qr"><img src="../Images/82e4c1d3e4cebec96a2af9567793c1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6pZIjdDG5PUZhFPH1ADlJA.png"/></div></div></figure><p id="30fd" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这里，<strong class="lr jd"> <em class="ml"> matrix(0，m，n) </em> </strong>通过m*n创建一个空矩阵，两个for循环规定了每个单元格的值。</p><p id="5dbe" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">大多数时候，R中的 循环的<strong class="lr jd"> <em class="ml">可能不是最有效的解决方案，如果样本量足够大，我们将使用其他选项。</em></strong></p><p id="9e06" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">考虑到这一点，作者贡献了使用<strong class="lr jd"> <em class="ml"> apply() </em> </strong>函数的第二种方法。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="83a3" class="om nf it oi b gy on oo l op oq">m &lt;-10<br/>n&lt;-10</span><span id="6d4c" class="om nf it oi b gy or oo l op oq">m0 &lt;- matrix(0,m,n)</span><span id="9c5c" class="om nf it oi b gy or oo l op oq">apply(m0,c(1,2),function(x) sample(c(0,1),1))</span></pre><p id="5faa" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">到目前为止，除了<strong class="lr jd"> <em class="ml"> apply() </em> </strong>函数之外，其他的应该都很熟悉了。它返回“通过将函数应用于数组或矩阵的边距而获得的向量/数组/值列表”(原始定义，<a class="ae lh" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/apply" rel="noopener ugc nofollow" target="_blank">链接</a>)。</p><p id="ed3a" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">它具有以下形式:</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="aa9a" class="om nf it oi b gy on oo l op oq">&gt; apply(x, margin, fun,…) </span></pre><ul class=""><li id="2c9c" class="ou ov it lr b ls lt lv lw ly ow mc ox mg oy mk pi pa pb pc bi translated"><em class="ml"> x:一个数组或矩阵</em></li><li id="0e57" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk pi pa pb pc bi translated">margin:一个向量，给出函数将要应用的下标。对于矩阵，1表示行，2表示列。 <strong class="lr jd"> <em class="ml"> c(1，2) </em> </strong> <em class="ml">表示行和列，其中x已命名dimnames，可以是选择维名的字符向量</em></li><li id="67f0" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk pi pa pb pc bi translated"><em class="ml">乐趣:要应用的功能</em></li></ul></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="4168" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">问题5:抛硬币10次，模拟过程10000次。显示抬头数量的分布。</h1><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="aaa1" class="om nf it oi b gy on oo l op oq"># create an empty list <br/>total_heads = c()</span><span id="e8dd" class="om nf it oi b gy or oo l op oq"># use a for loop to simulate coin-flipping 10 times <br/># repeat it for 10,000 times</span><span id="daff" class="om nf it oi b gy or oo l op oq">for (i in 1:10000){<br/> sum_heads = sum(round(runif(10,0,1)))<br/> total_heads = c(total_heads, sum_heads)<br/> }</span><span id="04d8" class="om nf it oi b gy or oo l op oq">hist(total_heads)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qs"><img src="../Images/1b2c8ee1a9b54f7ecf6d2cbda57e8011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUniaDUEfLM_kEC4p1qxcA.png"/></div></div></figure><p id="db8c" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这里，我将解释三行代码，其余的就不言自明了。</p><ol class=""><li id="1280" class="ou ov it lr b ls lt lv lw ly ow mc ox mg oy mk oz pa pb pc bi translated"><strong class="lr jd"> <em class="ml">为(1:1000中的1)。</em> </strong>不像其他编程语言，你要把范围指定为1:10000。</li><li id="c91b" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk oz pa pb pc bi translated"><strong class="lr jd"> <em class="ml"> sum(round(runif(10，0，1))) </em> </strong>。这是一种结构化的编码方式，有三个独立的功能:runif() → round() → sum()。它首先运行runif()函数，最后运行sum()。基本上，代码行生成10个介于0和1之间的随机数，将其四舍五入为最接近的整数(0或1)，最后求和。</li><li id="7cd3" class="ou ov it lr b ls pd lv pe ly pf mc pg mg ph mk oz pa pb pc bi translated"><strong class="lr jd"><em class="ml">total _ heads = c(total _ heads，sum_heads)。</em> </strong>由于total_heads开头是一个空列表，我们用这行代码把sum_heads的值赋给total_heads。</li></ol></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="f1a4" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">感谢您的阅读！</p><p id="08e3" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这是一篇关于统计模拟的介绍文章，我们将在接下来的文章中探讨更高级的话题。</p><p id="2536" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">敬请期待！</p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="0036" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><em class="ml"> Medium最近进化出了它的</em> <a class="ae lh" href="https://blog.medium.com/evolving-the-partner-program-2613708f9f3c" rel="noopener"> <em class="ml">作家伙伴计划</em> </a> <em class="ml">，支持像我这样的普通作家。如果你还不是订户，通过下面的链接注册，我会收到一部分会员费。</em></p><div class="mm mn gp gr mo mp"><a href="https://leihua-ye.medium.com/membership" rel="noopener follow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">阅读叶雷华博士研究员(以及其他成千上万的媒体作家)的每一个故事</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">leihua-ye.medium.com</p></div></div><div class="my l"><div class="qt l na nb nc my nd lb mp"/></div></div></a></div></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><h1 id="3dd9" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">喜欢读这本书吗？</h1><blockquote class="qu qv qw"><p id="99b8" class="lp lq ml lr b ls lt kd lu lv lw kg lx qx lz ma mb qy md me mf qz mh mi mj mk im bi translated">请在<a class="ae lh" href="https://www.linkedin.com/in/leihuaye/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae lh" href="https://www.youtube.com/channel/UCBBu2nqs6iZPyNSgMjXUGPg" rel="noopener ugc nofollow" target="_blank"> Youtube </a>上找到我。</p><p id="83cd" class="lp lq ml lr b ls lt kd lu lv lw kg lx qx lz ma mb qy md me mf qz mh mi mj mk im bi translated">还有，看看我其他关于人工智能和机器学习的帖子。</p></blockquote></div></div>    
</body>
</html>