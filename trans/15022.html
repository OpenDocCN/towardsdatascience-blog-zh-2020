<html>
<head>
<title>Creating a data scientists tool belt.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建数据科学家工具带。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-turn-your-python-scripts-into-an-executable-data-scientists-utility-belt-e2a68889909e?source=collection_archive---------50-----------------------#2020-10-15">https://towardsdatascience.com/how-to-turn-your-python-scripts-into-an-executable-data-scientists-utility-belt-e2a68889909e?source=collection_archive---------50-----------------------#2020-10-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="14d0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何将Python程序从IDE中取出并放入命令行</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e0a47c2d0356b2f00471b6770286bdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZd6Db-fGyvBhU7GP4ZXfA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@jessedo81?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杰西·奥里科</a>在<a class="ae kv" href="https://unsplash.com/s/photos/tool-belt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="edca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">TL；所有必要的步骤都在底部的代码片段中。</em></p><p id="712a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名学生，我看到我的许多同学创造了令人印象深刻的工具，我想把它们整合到我的工作流程中。但是这些功能要么归入Jupyter笔记本，要么归入Slack上共享的代码片段集合。</p><p id="3753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这篇文章的目标是给你一个实用的知识，如何在你的mac上的任何地方创建一个可执行的脚本。本教程将涉及许多不同的主题。为了简短起见，我将不详细介绍任何步骤。我将为那些好奇的人提供进一步阅读的链接。</strong></p><p id="e64c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外，我用的是<a class="ae kv" href="https://en.wikipedia.org/wiki/Z_shell" rel="noopener ugc nofollow" target="_blank"> z-shell </a>和一台mac。如果你使用z-shell或者bash <strong class="ky ir">(将</strong> <code class="fe lt lu lv lw b"><strong class="ky ir">zshrc</strong></code> <strong class="ky ir">替换为</strong> <code class="fe lt lu lv lw b"><strong class="ky ir">bashrc</strong></code> <strong class="ky ir"> ) </strong>，所有这些步骤都可以工作。</p><h1 id="232a" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">教程大纲:</h1><h2 id="fc5d" class="mp ly iq bd lz mq mr dn md ms mt dp mh lf mu mv mj lj mw mx ml ln my mz mn na bi translated">1)检查您是否有python3，并且它是最新的</h2><h2 id="ba17" class="mp ly iq bd lz mq mr dn md ms mt dp mh lf mu mv mj lj mw mx ml ln my mz mn na bi translated">2)创建一个简单的示例程序来打印到stdout</h2><h2 id="dd90" class="mp ly iq bd lz mq mr dn md ms mt dp mh lf mu mv mj lj mw mx ml ln my mz mn na bi translated">3)学习如何使你的脚本可执行</h2><h2 id="916d" class="mp ly iq bd lz mq mr dn md ms mt dp mh lf mu mv mj lj mw mx ml ln my mz mn na bi translated">4)将脚本添加到新的源路径，以便在任何目录下都可以调用</h2><h1 id="8185" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">1)检查您是否有python3，并且它是最新的</h1><p id="416a" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">如果你像我一样是计算机科学的新手，你可能不知道你在哪里安装了Python3，或者你是否安装了它。让我们确保您将它放在正确的目录中。这篇<a class="ae kv" href="https://www.techjunkie.com/macos-uninstall-python3/" rel="noopener ugc nofollow" target="_blank">文章</a>概述了如果你犹豫不决，我们将要做的事情。</p><p id="7f4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下所有步骤都将发生在您的终端内部。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/3f5fe1277bd2de13f96b537a82aff968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W6dnwAXpFqQcHET8icmSGw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">打开你的终端，让我们开始编码吧！</p></figure><p id="4c2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们检查一下你是否安装了python3。为此，我们将调用<code class="fe lt lu lv lw b">which</code>函数。<code class="fe lt lu lv lw b">which</code>将在你的路径变量中搜索python3的位置。</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="83a0" class="mp ly iq lw b gy nl nm l nn no">which python3</span></pre><p id="1606" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如果你看到类似于:</strong></p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="2f30" class="mp ly iq lw b gy nl nm l nn no">something/something/python3</span></pre><p id="8042" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以跳过这一步，继续制作你的第一个命令行工具。</p><p id="0534" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果您看到<code class="fe lt lu lv lw b">python3 not found</code>，您需要遵循这里概述的<a class="ae kv" href="https://realpython.com/installing-python/" rel="noopener ugc nofollow" target="_blank">步骤。</a>我推荐做一个<code class="fe lt lu lv lw b">brew install python3 </code>，但是如果你不太习惯自制软件，你也可以在这里下载安装程序<a class="ae kv" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="0b0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装python3后，重复上述步骤，python3应该已经安装，PATH变量现在将指向正确的目录。</p><p id="31a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们继续吧。</p><h1 id="05c5" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">2)创建一个简单的程序来打印到标准输出</h1><p id="5c0a" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">使用您喜欢的文本编辑器或IDE <a class="ae kv" href="https://formulae.brew.sh/formula/vim" rel="noopener ugc nofollow" target="_blank">(我将使用VIM) </a>创建一个简单的“script.py”。对我们美国人来说，2020年的情况尤其糟糕。为了振作起来，我将编写一个简单的命令行程序来鼓励用户！让我们称它为鼓励。py。它将1个参数，用户的名字和打印出一个个性化的笔记。</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="87bc" class="mp ly iq lw b gy nl nm l nn no">vim encourage.py</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">sys.argv允许您为CLI提供命令行参数。</p></figure><p id="97f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，这是一个Python脚本，我们只能使用函数python3来运行它。</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="f931" class="mp ly iq lw b gy nl nm l nn no">python3 encourage.py tim<br/>You're doing great, Tim!</span></pre><p id="3db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能已经知道了shell中的<a class="ae kv" href="https://scriptingosx.com/2019/07/moving-to-zsh-part-4-aliases-and-functions/" rel="noopener ugc nofollow" target="_blank">别名</a>，我们可以通过将alias命令附加到shell资源文件(zshrc)中来实现。注意，如果你没有<a class="ae kv" href="https://www.sitepoint.com/zsh-tips-tricks/" rel="noopener ugc nofollow" target="_blank"> ~/。zshrc </a>文件，这将为您创建一个:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="abf7" class="mp ly iq lw b gy nl nm l nn no">echo "alias py='python3'" &gt;&gt; ~/.zshrc</span></pre><p id="2d7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很好，现在我们可以简单地调用:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="622c" class="mp ly iq lw b gy nl nm l nn no">py encourage.py tim<br/>You're doing great, Tim!</span></pre><p id="6865" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，这不是我们想要的。我们可以做得更好，并删除”。我们文件里的py。的”。py”只对文本编辑器或IDE中的语法突出显示很重要。它不需要文件扩展名，因为您给函数Python3的是纯文本文件。这个你可以自己测试！</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="ec27" class="mp ly iq lw b gy nl nm l nn no"># rename your function<br/>mv encourage.py encourage<br/>py encourage tim<br/>You're doing great, Tim!</span></pre><p id="dbf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了！现在我们要完全放弃“Python3”函数，制作一个完整的命令行程序。</p><h1 id="4901" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">3)让你的脚本可执行</h1><p id="5837" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在上一节中，我们了解到当我们调用Python3函数时，脚本的名称充当命令行参数。函数Python3不关心你的脚本是否有. py，因为它会接受你给它的任何纯文本文件。然而，如果我们想完全放弃调用Python，那么我们必须在脚本的顶部插入<a class="ae kv" href="https://en.wikipedia.org/wiki/Shebang_(Unix)" rel="noopener ugc nofollow" target="_blank"> shebang命令</a> <code class="fe lt lu lv lw b">#!/usr/bin/env python3</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="74c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这告诉您的shell在读取该文件时将它解释为Python代码。默认情况下，您的shell不允许您执行文件，因此您必须为<a class="ae kv" href="https://en.wikipedia.org/wiki/Chmod" rel="noopener ugc nofollow" target="_blank">设置一个权限标志</a>。在您的shell中运行这个命令，它将更改文件的权限，以便它是可执行的。</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="d630" class="mp ly iq lw b gy nl nm l nn no">chmod +x encourage</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/7d8b50b8b1cfea9f37d8b9bb7c411d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4bo3vKdXKNxGcGIreMd4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在运行chmod +x鼓励我们的文件现在应该预览如下</p></figure><p id="2656" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以运行我们的程序，只需:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="7546" class="mp ly iq lw b gy nl nm l nn no">./encourage tim<br/>You're doing great, Tim!</span></pre><p id="d3f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有多简单？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/b67e8bad58a105ed5b5b758bad76dd79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBtgSkrZJBPkyON7kgBi-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@sincerelymedia?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">真诚媒体</a>在<a class="ae kv" href="https://unsplash.com/s/photos/thumb-up?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="0451" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">4)将脚本添加到我们的PATH变量中，这样它在任何目录中都是可调用的</h1><blockquote class="nt"><p id="22c5" class="nu nv iq bd nw nx ny nz oa ob oc lr dk translated">cp、touch、ls和mkdir的目录都存储在PATH变量中</p></blockquote><p id="530c" class="pw-post-body-paragraph kw kx iq ky b kz od jr lb lc oe ju le lf of lh li lj og ll lm ln oh lp lq lr ij bi translated">你会注意到，为了调用它，你必须和函数在同一个目录中，但是我们希望能够从任何地方调用我们的函数。<strong class="ky ir">为了实现这一点，我们必须更新我们的</strong> <a class="ae kv" href="https://en.wikipedia.org/wiki/PATH_(variable)" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">路径变量。</strong></a>PATH变量加载到你的shell中，告诉shell在哪里寻找命令行函数。git、cd、ls和mkdir目录的位置都存储在PATH变量中。我们有一个全新的功能<strong class="ky ir">鼓励</strong>我们需要添加到路径中。让我们首先在我们的用户目录中创建一个名为<strong class="ky ir"> bin </strong>的新目录，并将我们程序的副本放在那里:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="6869" class="mp ly iq lw b gy nl nm l nn no">mkdir ~/.local/bin<br/>cp encourage ~/.local/bin/encourage</span></pre><p id="d157" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们需要在shell资源文件中添加一个命令来更新我们的路径变量:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="0d17" class="mp ly iq lw b gy nl nm l nn no">echo “PATH=$PATH:~/.local/bin/” &gt;&gt; ~/.zshrc</span></pre><p id="309c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在要么重启你的终端，要么运行<code class="fe lt lu lv lw b">source ~/.zshrc</code></p><p id="436a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您已经准备好测试您的程序了！切换到除您一直工作的目录之外的任何目录，并运行您的代码:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="bcc9" class="mp ly iq lw b gy nl nm l nn no">encourage tim<br/>You're doing great, Tim!</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/8e623343d6e0cec7859c37a43792b118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fgnhccmGqCeytJxolmduAw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@erwanhesry?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">二万·赫斯里</a>在<a class="ae kv" href="https://unsplash.com/s/photos/celebration?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="a61a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你！你完了。所有代码都在一个地方:</p><pre class="kg kh ki kj gt nh lw ni nj aw nk bi"><span id="9d80" class="mp ly iq lw b gy nl nm l nn no"># Remove old version of python and do a fresh brew install</span><span id="8009" class="mp ly iq lw b gy oj nm l nn no">sudo rm -rf /Library/Frameworks/Python.framework/Versions/3.6<br/>sudo rm -rf “/Applications/Python 3.7”<br/>brew install python3</span><span id="fb55" class="mp ly iq lw b gy oj nm l nn no"># Shebang command to add to the top of your script (include the "#")</span><span id="bc05" class="mp ly iq lw b gy oj nm l nn no">#!/usr/bin/env python3</span><span id="0712" class="mp ly iq lw b gy oj nm l nn no"># Make the script executable by running this in your terminal</span><span id="650a" class="mp ly iq lw b gy oj nm l nn no">chmod +x script</span><span id="8a2c" class="mp ly iq lw b gy oj nm l nn no"># Create a local bin and add it to your shell PATH variable</span><span id="4d54" class="mp ly iq lw b gy oj nm l nn no">mkdir ~/.local/bin<br/>echo "PATH=$PATH:~/.local/bin/" &gt;&gt; ~/zshrc</span><span id="577e" class="mp ly iq lw b gy oj nm l nn no"># move a copy of your script to the ./local/bin<br/>cp script ~/.local/bin/script</span><span id="91c8" class="mp ly iq lw b gy oj nm l nn no"># Restart your terminal or shell<br/>source ~/.zshrc</span></pre></div></div>    
</body>
</html>