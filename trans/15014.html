<html>
<head>
<title>Analyzing the War in Ukraine Using R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用R .分析乌克兰战争</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-the-war-in-ukraine-using-r-39d0c3379938?source=collection_archive---------42-----------------------#2020-10-15">https://towardsdatascience.com/analyzing-the-war-in-ukraine-using-r-39d0c3379938?source=collection_archive---------42-----------------------#2020-10-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b4f5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用tidyverse和地图对冲突进行探索性分析！</h2></div><p id="72f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2014年，乌克兰顿涅茨克州和卢甘斯克州的俄罗斯分裂分子宣布独立。自行宣布成立的顿涅茨克和卢甘斯克人民共和国与乌克兰政府之间爆发了冲突。这一冲突非常复杂，涉及无数变数。人们写了关于这场冲突的书籍、文章和各种观点。我很好奇数据显示了什么。</p><p id="1093" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">经过一番努力，我偶然发现了人道主义数据交换:<a class="ae lb" href="https://data.humdata.org/" rel="noopener ugc nofollow" target="_blank">https://data.humdata.org/</a>。那里有很多非常有趣的数据。对我来说幸运的是，有一个关于乌克兰冲突的非常好而且相当精细的数据集。数据集中的每一行代表一个动力学事件。数据跨度从2014年的亲欧盟示威革命到2018年。我将数据读入R中，并通过删除一些我不感兴趣的列(我在下面的代码中省略了这一部分)对其进行了修改。我们将从检查na的数据开始(确保您加载了tidyverse！):</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="9acf" class="ll lm iq lh b gy ln lo l lp lq"># read in the data <br/>conflict &lt;- read_csv('conflict_data_ukr - Raw.csv')</span><span id="e752" class="ll lm iq lh b gy lr lo l lp lq"># make.names on the columns<br/>colnames(conflict) &lt;- make.names(colnames(conflict))</span><span id="b80b" class="ll lm iq lh b gy lr lo l lp lq"># check for NA's in the column adm_1<br/>sum(is.na(conflict$adm_1))#119<br/>conflict[is.na(conflict$adm_1),]</span><span id="d905" class="ll lm iq lh b gy lr lo l lp lq">#   all of the NAs in adm_1 are for the donets basin area which <br/>#   isn't contained in one oblast.</span><span id="4114" class="ll lm iq lh b gy lr lo l lp lq"># replace NA's in adm_1 w/ 'Donets Basin Area'<br/>conflict$adm_1 &lt;- conflict$adm_1 %&gt;% replace_na('Donets Basin Area')<br/>any(is.na(conflict)) # FALSE</span></pre><p id="3d09" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“adm_1”变量包含事件发生在哪个州的信息(想象一个像美国大县一样的州)。我担心的是那一栏中的na。第一行代码告诉我那里有119个na。我能够对第二行代码中的数据进行子集划分，并根据“where_coordinates”列中的信息了解到所有na都是“Donets Basin Area”中的事件。我将adm_1列中的na替换为“Donets Basin Area ”,然后重命名了一些列:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="01a7" class="ll lm iq lh b gy ln lo l lp lq"># rename some columns <br/>conflict &lt;- conflict %&gt;% rename(gov.forces = side_a<br/>                                , op.forces = side_b<br/>                                , kia = deaths_a<br/>                                , ekia = deaths_b<br/>                                , civcas = deaths_civilians<br/>                                , region = adm_1)</span></pre><p id="6b3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出于本分析的目的，KIA =乌克兰军队被杀，EKIA =分离势力被杀。其余的变量非常简单。我首先想探究乌克兰在一个事件中损失最多的是什么:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="d009" class="ll lm iq lh b gy ln lo l lp lq"># what was the maximum number of KIA in an event<br/>max(conflict$kia)<br/>[1] 366</span></pre><p id="7f22" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哇哦。在一次事件中，政府军损失了366名军人。让我们进一步探讨这个问题。</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="b16b" class="ll lm iq lh b gy ln lo l lp lq"># subset for the information regarding the mass casualty event<br/>conflict[conflict$kia == 366,]</span></pre><p id="6325" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这行代码为我提供了该特定事件的所有数据。事情发生在2014年9月2日，顿涅茨克州的伊洛瓦伊斯克。伊洛瓦伊斯克战役意义重大，因为据称这是俄罗斯正规军首次越过边境参与冲突。继续，我们来看看起亚的分布。</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="a478" class="ll lm iq lh b gy ln lo l lp lq">hist(conflict$kia, breaks = 100<br/>     , xlab = "KIA"<br/>     , main = "Ukrainian KIA\n2014-2018")</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/bb264d8e6fe7dffa39748720d2519d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*_qX__I9ynVPgndqGGeiD5Q.jpeg"/></div></figure><p id="0ada" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据分布非常不对称。像伊洛瓦伊斯克战役这种大量死亡的事件正在创造一条向右的长尾。让我们把数据标准化。</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="f9eb" class="ll lm iq lh b gy ln lo l lp lq"># histogram of KIA normalized<br/>hist(log10(conflict$kia)<br/>     , xlab = "Number of KIA (Normalized)"<br/>     , main = "Ukrainian KIA\n2014-2018")</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lw"><img src="../Images/da42bcebb863e85e1c59a64a97dab449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*imYs57MisPxACvsAOmb22w.jpeg"/></div></div></figure><p id="5584" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我决定采用这个概念，为起亚和EKIA绘制密度图:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="5045" class="ll lm iq lh b gy ln lo l lp lq"># initialize the plot space<br/>par(mfrow = c(2,1))<br/>par(bty = 'n')</span><span id="0779" class="ll lm iq lh b gy lr lo l lp lq"># density plot for kia (Ukrainian Government Forces)<br/>a &lt;- density(log10(conflict$kia))<br/>plot(a<br/>     , xlab = 'Number of Deaths (normalized)'<br/>     , ylab = 'Frequency'<br/>     , main = "Distribution of Ukranian Forces Killed-In-Action per Engagement\n<br/>     2014-2018")<br/>polygon(a, col = '#7E8777', border = "black")</span><span id="deb1" class="ll lm iq lh b gy lr lo l lp lq"># density plot for ekia (Russian Separatist Forces)<br/>b &lt;- density(log10(conflict$ekia))<br/>plot(b<br/>     , xlab = 'Number of Deaths (normalized)'<br/>     , ylab = 'Frequency'<br/>     , main = "Disribution of Enemy Forces Killed-In-Action per Engagement\n<br/>     2014-2018")<br/>polygon(b, col = '#DA291C', border = 'black')</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mb"><img src="../Images/aef545ed4a949979a9237d090d4c15db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYTPoB2xt6uYhnSn_Bqhnw.jpeg"/></div></div></figure><p id="f0ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些图表明的是，大多数事件的双方都有一个或更少的伤亡。然而，也有一些导致重大损失的重大交战。这就是为什么我们有长尾巴。</p><p id="2083" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来的问题是，战斗集中在哪里？让我们创建一个柱状图来提供一些背景信息:</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="6187" class="ll lm iq lh b gy ln lo l lp lq">#----------------------------------------------------------<br/># barplot for deaths by region<br/>#----------------------------------------------------------<br/>df &lt;- aggregate(conflict$best, list(conflict$region), sum)<br/>df &lt;- as_tibble(df) <br/>df &lt;- df %&gt;% rename(Region = Group.1<br/>                    , no.ofDeaths = x) <br/>df &lt;- df %&gt;% arrange(no.ofDeaths)</span><span id="1cd0" class="ll lm iq lh b gy lr lo l lp lq">par(mar = c(5,13,5,1), bty = 'n')</span><span id="3b0a" class="ll lm iq lh b gy lr lo l lp lq">barplot(df$no.ofDeaths <br/>        , names.arg = df$Region<br/>        , horiz = T<br/>        , las = 1 <br/>        , col = '#DA291C'<br/>        , border = NA<br/>        , xlab = "Total Number of Deaths"<br/>        , main = 'Deaths by Region in the Ukrainian Conflict\nNote: "Donets Basin Area" includes both Luhansk and Donetsk Oblasts\nYears: 2014-2018')</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mc"><img src="../Images/962717459bec790f2d22c3d78c3b2c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7lBh1cutXbiGOHeXXem1vw.jpeg"/></div></div></figure><p id="7766" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来顿涅茨克州是战斗最激烈的地方。然而，目前还不清楚有多少打着“顿涅茨克盆地地区”标签的战斗实际上发生在顿涅茨克州或卢甘斯克州。我认为理解这些数据的更好的方法是用R！</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="e1b6" class="ll lm iq lh b gy ln lo l lp lq"># load some packages<br/>library(pacman)<br/>p_load(maps, mapproj, rnaturalearth, scales, ggplot2)</span><span id="ee39" class="ll lm iq lh b gy lr lo l lp lq"># load the data<br/>ukr &lt;- read_csv('conflict_data_ukr - Raw.csv')</span><span id="3a7f" class="ll lm iq lh b gy lr lo l lp lq"># Calculate area of a circle based on deaths per event<br/>radius &lt;- sqrt( ukr$best/pi )</span><span id="1eee" class="ll lm iq lh b gy lr lo l lp lq"># Plot the map<br/>ykr &lt;- raster::getData('GADM', country = "UKR", level = 1)</span><span id="b663" class="ll lm iq lh b gy lr lo l lp lq">map(ykr)</span><span id="9884" class="ll lm iq lh b gy lr lo l lp lq"># add the points<br/>points(ukr$longitude, ukr$latitude<br/>       , cex = rescale(radius, c(0, 12))<br/>       , col = 'red'<br/>       , pch = 21)</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi md"><img src="../Images/01655f8175e67effa31dca4063e8c78e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZ7xpnxRNB3yuYmAsu9DCQ.jpeg"/></div></div></figure><p id="9e79" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样更好，不是吗？圆圈区域表示每个事件的死亡人数(包括KIA、EKIA和平民死亡人数)。你可以看到在交战双方多次交战的区域周围形成了同心圆。地图中心附近环绕基辅的圆圈代表亲欧盟示威运动革命。底部附近还有一个小圆圈，代表亲欧盟示威运动革命期间发生在敖德萨的事件。让我们仔细看看顿涅茨克州和卢甘斯克州(俗称顿巴斯)。</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="5676" class="ll lm iq lh b gy ln lo l lp lq"># plot the Donbass<br/>map(ykr, namefield = 'NAME_1', region = c("Donets'k", "Luhans'k"))</span><span id="4fbe" class="ll lm iq lh b gy lr lo l lp lq"># add the points<br/>points(ukr$longitude, ukr$latitude<br/>       , cex = rescale(radius, c(0, 12))<br/>       , col = 'red'<br/>       , pch = 21)</span></pre><figure class="lc ld le lf gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi me"><img src="../Images/13d2102a4f7e11a4195343c5f91deba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjS03puC9VVWghSU_Et1Kw.jpeg"/></div></div></figure><p id="6ec3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上图中，顿涅茨克州在左边，卢甘斯克州在右边。如你所见，大部分战斗发生在顿涅茨克或边境。地图上最大的圆圈表示伊洛瓦伊斯克战役，前面提到过。</p><p id="b7b4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">冲突是社会中令人讨厌的现实，但它产生了一些有趣的数据供探索。希望这篇文章能帮助你找到一些代码，或者对你理解东欧地缘政治有所启发。我很喜欢这篇文章的一些反馈，所以如果你愿意，请留下评论！</p></div></div>    
</body>
</html>