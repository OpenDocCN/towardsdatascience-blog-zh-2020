<html>
<head>
<title>Build Dynamic Visualizations and Dashboards with Kibana for Data Analysis using Twitter Feeds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Kibana构建动态可视化和仪表板，以便使用Twitter Feeds进行数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-dynamic-visualizations-and-dashboards-with-kibana-for-data-analysis-using-twitter-feeds-6f516bf803a3?source=collection_archive---------31-----------------------#2020-10-09">https://towardsdatascience.com/build-dynamic-visualizations-and-dashboards-with-kibana-for-data-analysis-using-twitter-feeds-6f516bf803a3?source=collection_archive---------31-----------------------#2020-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2c0b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python和ELKstack的OSINT第2a部分]</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dd157916f6c55848a12de7d2aa8f2888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4a4V7NVtCiIQr30ZJyxQGQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片:使用<a class="ae kv" href="https://www.wordclouds.com/" rel="noopener ugc nofollow" target="_blank">https://www.wordclouds.com/</a>生成</p></figure><h2 id="95e1" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">获得同步</h2><p id="847c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">&lt; <a class="ae kv" href="https://medium.com/swlh/open-source-intelligence-with-elasticsearch-analyzing-twitter-feeds-part-1-of-3-21a8b65dde03" rel="noopener">上一个故事</a>|【x】当前</p><p id="fd20" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在<a class="ae kv" href="https://medium.com/swlh/open-source-intelligence-with-elasticsearch-analyzing-twitter-feeds-part-1-of-3-21a8b65dde03" rel="noopener">第1部分</a>我们:</p><ol class=""><li id="4cc2" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk mv mw mx my bi translated">使用ELKSTACK (Elasticsearch，Logstash，Kibana)的容器化版本构建我们的基础设施</li><li id="4ee8" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">探索并构建了一个使用API访问Twitter的python脚本</li><li id="eff9" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">将收集的数据转移到Elasticsearch进行分析</li></ol><p id="9373" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在第2部分中，我们将使用Kibana探索我们摄入到Elasticsearch中的数据。</p><p id="2a10" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在写这部分的时候，我意识到这将是一个巨大的话题。在浏览EDA的时候，我发现了许多有用的工具和技术，可以用来加速这个过程。我将把第2部分分成多个小节。这一小节将重点介绍初始EDA和用Kibana构建简单的可视化。接下来的部分将重点关注使用机器学习清理数据，并利用其他API来帮助我们回答一些问题。在这个过程中，我们可能会遇到更多的问题。</p><p id="925c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">从第1部分<a class="ae kv" href="https://medium.com/swlh/open-source-intelligence-with-elasticsearch-analyzing-twitter-feeds-part-1-of-3-21a8b65dde03" rel="noopener">开始，我扩展了搜索标准，包括了每条推文的所有元数据。这样，我就可以回过头来回答围绕我正在探索的数据可能出现的新问题。我需要再清理一下。<strong class="lu ir">注意</strong>我需要围绕KeyError代码创建TRY异常(有些字段没有数据，但我仍然想收集那个字段)。</a></p><p id="5ac0" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">因为代码变得比我预期的要大。我取出了一些不必要的东西。我把馈电简化为弹性函数:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="7844" class="kw kx iq nf b gy nj nk l nl nm"><strong class="nf ir">while</strong> count <strong class="nf ir">&lt;</strong> len(feed):<br/>        doc <strong class="nf ir">=</strong> {<br/>            '@timestamp': dt.now(),<br/>            'created_at': str(feed[count]['created_at']),<br/>            'twitter_id' : int(feed[count]['id']),<br/>            'id_str' : int(feed[count]['id_str']),<br/>            'full_text' : str(feed[count]['full_text']),<br/>            'truncated' : str(feed[count]['truncated']),<br/>            'display_text_range' : str(feed[count]['display_text_range']),<br/>            'entities' : str(feed[count]['entities']), <em class="nn"># Already split the dictionary, no longer needed </em><br/>            'metadata' : str(feed[count]['metadata']),<br/>            'source' : str(feed[count]['source']),<br/>            'in_reply_to_status_id' : str(feed[count]['in_reply_to_status_id']),<br/>            'in_reply_to_status_id_str' : str(feed[count]['in_reply_to_status_id_str']),<br/>            'in_reply_to_user_id' : str(feed[count]['in_reply_to_user_id']),<br/>            'in_reply_to_user_id_str' : str(feed[count]['in_reply_to_user_id_str']),<br/>            'in_reply_to_screen_name' : str(feed[count]['in_reply_to_screen_name']),<br/>            'user' : str(feed[count]['user']), <em class="nn"># Already split the dictionary, no longer needed</em><br/>            'geo' : str(feed[count]['geo']),<br/>            <strong class="nf ir">...</strong> [truncated]</span></pre><p id="ec83" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这次清理相当有趣。我是手动操作的，但是花了很长时间。[ <strong class="lu ir">非常</strong> tedius]我不得不打开字典，提取关键字，格式化文本，这样它就会创建变量，然后调用这些变量。所以，我转而求助于python。我必须想办法不断遍历字典和子字典来提取每个键的条目。我想要一本简单的字典，我可以用它来做统计。<strong class="lu ir">注意</strong>清理收集功能:</p><p id="acf2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我移动了一些代码块，并把它包装在一个函数中，我可以用它来调用。我这样做是因为它在执行try/exceptions时提供了更好的灵活性。</p><p id="d637" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">这个代码块导入模块，设置服务器和API配置，以及对象</strong></p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4a20" class="kw kx iq nf b gy nj nk l nl nm"># Import tweepy as tw<br/>import tweepy as tw<br/>import sys<br/>from datetime import datetime as dt<br/>from elasticsearch import Elasticsearch</span><span id="8b25" class="kw kx iq nf b gy no nk l nl nm"># Initializing objects<br/>twitter_cred = dict()<br/>api = ''<br/>es = ''</span><span id="7fc1" class="kw kx iq nf b gy no nk l nl nm">def setConfig(server):<br/>    # Import keys from a saved file instead of inputting it directly into the script.  <br/>    # Strip whitespaces and split on = as I only want the key values<br/>    # Server argument is the elasticsearch node<br/>    <br/>    key_location = 'twitter.keys'<br/>    apikeys = []</span><span id="0125" class="kw kx iq nf b gy no nk l nl nm">global api<br/>    global es</span><span id="e855" class="kw kx iq nf b gy no nk l nl nm">with open(key_location) as keys:<br/>        for i in keys:<br/>            apikeys.append(i.split("=")[1].strip(" ").strip("\n"))<br/>    keys.close()</span><span id="5025" class="kw kx iq nf b gy no nk l nl nm"># Initialize dictionary<br/>    #twitter_cred = dict()</span><span id="1dc2" class="kw kx iq nf b gy no nk l nl nm"># Enter API keys<br/>    twitter_cred["CONSUMER_KEY"] = apikeys[0]<br/>    twitter_cred["CONSUMER_SECRET"] = apikeys[1]</span><span id="e2f9" class="kw kx iq nf b gy no nk l nl nm"># Access Tokens<br/>    twitter_cred["ACCESS_KEY"] = apikeys[2]<br/>    twitter_cred["ACCESS_SECRET"] = apikeys[3]</span><span id="3d33" class="kw kx iq nf b gy no nk l nl nm"># Set authentication object<br/>    auth = tw.OAuthHandler(twitter_cred["CONSUMER_KEY"], twitter_cred["CONSUMER_SECRET"])<br/>    auth.set_access_token(twitter_cred["ACCESS_KEY"], twitter_cred["ACCESS_SECRET"])</span><span id="c8d0" class="kw kx iq nf b gy no nk l nl nm"># Create api object with authentication<br/>    api = tw.API(auth, wait_on_rate_limit=True)</span><span id="905a" class="kw kx iq nf b gy no nk l nl nm"># Set Elasticsearch Server<br/>    es = Elasticsearch(server, port=9200)</span><span id="b59d" class="kw kx iq nf b gy no nk l nl nm"># Execute function with the elasticsearch ip address<br/>setConfig('127.0.0.1')</span></pre><p id="0c29" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">拉一条推特，这样我们就可以玩唱片了</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="c40c" class="kw kx iq nf b gy nj nk l nl nm">feed = {}</span><span id="38dd" class="kw kx iq nf b gy no nk l nl nm">for tweet in tw.Cursor(api.search, q='palantir OR pltr', tweet_mode='extended').items(1):<br/>    feed.update(tweet._json)</span></pre><p id="9c62" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">迭代字典和子字典，生成我需要的代码行</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="aeec" class="kw kx iq nf b gy nj nk l nl nm"># What keys are used<br/>parentList = []<br/>subList = []</span><span id="613c" class="kw kx iq nf b gy no nk l nl nm"># Add dictionaries to sub process list<br/>def subProcess(dictionary):<br/>    subList.append(dictionary)<br/>    <br/>for item in feed.keys():<br/>    parentList.append(item)</span><span id="33c4" class="kw kx iq nf b gy no nk l nl nm">for i in parentList:<br/>    if type(feed[i]) is not dict:<br/>        print(f"{i} = feed['{i}']")<br/>        <br/>    else:<br/>        subProcess(i)</span><span id="bff7" class="kw kx iq nf b gy no nk l nl nm">----- output -----</span><span id="64c1" class="kw kx iq nf b gy no nk l nl nm">created_at = feed['created_at']<br/>id = feed['id']<br/>id_str = feed['id_str']<br/>full_text = feed['full_text']<br/>truncated = feed['truncated']<br/>display_text_range = feed['display_text_range']<br/>source = feed['source']<br/>in_reply_to_status_id = feed['in_reply_to_status_id']<br/>in_reply_to_status_id_str = feed['in_reply_to_status_id_str']<br/>in_reply_to_user_id = feed['in_reply_to_user_id']<br/>in_reply_to_user_id_str = feed['in_reply_to_user_id_str']<br/>in_reply_to_screen_name = feed['in_reply_to_screen_name']<br/>geo = feed['geo']<br/>coordinates = feed['coordinates']<br/>place = feed['place']<br/>contributors = feed['contributors']<br/>is_quote_status = feed['is_quote_status']<br/>retweet_count = feed['retweet_count']<br/>favorite_count = feed['favorite_count']<br/>favorited = feed['favorited']<br/>retweeted = feed['retweeted']<br/>possibly_sensitive = feed['possibly_sensitive']<br/>lang = feed['lang']</span></pre><h2 id="3132" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用Kibana进行探索性数据分析</h2><h2 id="7b01" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">入门指南</h2><p id="21f8" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated"><strong class="lu ir">探索性数据分析(EDA) </strong>是对数据进行初步调查的过程。目标是发现模式、异常值和发展假设。可以创建可视化来帮助简化这个过程。</p><blockquote class="np nq nr"><p id="1e5d" class="ls lt nn lu b lv ml jr lx ly mm ju ma ns mn mc md nt mo mf mg nu mp mi mj mk ij bi translated"><a class="ae kv" href="https://www.elastic.co/kibana" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir"><em class="iq">" Kibana</em></strong></a><em class="iq">是一个免费的开源用户界面，让你可视化你的Elasticsearch数据并导航Elastic Stack。做任何事情，从跟踪查询负载到了解请求通过应用程序的方式。”</em></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/5aad45a56b0f9bbe4fb7d1ef7dc622a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2iu8wwayuVRJGzgMmIO7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源于elastic.co</p></figure><p id="efb3" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我使用Kibana专门用于EDA和创建可视化，以便尝试和理解数据。随着我的进步，我想我会更多地使用python pandas和matplotlib来快速筛选数据。现在，我会坚持使用基巴纳。</p><p id="575b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><a class="ae kv" href="https://github.com/andreweng/elkstack/tree/master/projects/twitter_osint" rel="noopener ugc nofollow" target="_blank">访问笔记本</a></p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="6cc4" class="kw kx iq nf b gy nj nk l nl nm"># Code snippet will not be included in the blog to reduce the read time.  This will be a supplement in my github repository</span><span id="70d0" class="kw kx iq nf b gy no nk l nl nm">import tweepy as tw<br/>import sys<br/>from datetime import datetime as dt<br/>from elasticsearch import Elasticsearch</span><span id="2f5b" class="kw kx iq nf b gy no nk l nl nm"># Initializing objects<br/>twitter_cred = dict()<br/>api = ''<br/>es = ''</span><span id="488b" class="kw kx iq nf b gy no nk l nl nm">def acqData(search, acq):</span><span id="086a" class="kw kx iq nf b gy no nk l nl nm">index_name = idx + dt.today().strftime('%Y-%m-%d')<br/>    feed = []<br/>    <br/>...[Truncated]<br/>Get the source code at: <a class="ae kv" href="https://github.com/andreweng/elkstack/blob/master/projects/twitter_osint/grabTweets.py" rel="noopener ugc nofollow" target="_blank">github</a></span></pre><p id="550e" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">对于这个笔记本来说，下面的单元格是一个修改过的版本，允许我只执行函数。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="44bc" class="kw kx iq nf b gy nj nk l nl nm">try:<br/> idx = ‘default-’<br/> tweet_count = 100<br/> search = ‘palantir OR PLTR’</span><span id="eb2d" class="kw kx iq nf b gy no nk l nl nm">setConfig(‘127.0.0.1’)<br/> acqData(str(search), int(tweet_count))<br/> <br/>except:<br/> pass</span><span id="c65f" class="kw kx iq nf b gy no nk l nl nm">---- output ----</span><span id="19ff" class="kw kx iq nf b gy no nk l nl nm">: :Acquiring Data::<br/>: :Transferring to Elasticsearch Search::</span></pre><h2 id="fe1f" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置基巴纳索引</h2><p id="a1fa" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">太好了！我们把数据输入弹性搜索。现在，让我们为它创建一个基巴纳索引:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c58b08b85c27907a6f6f978c3589eb01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TYd9tle3RK47F3UjsLgCJA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="2d1c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">1.浏览至<a class="ae kv" href="http://127.0.0.1:5601/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5601</a>&gt;点击“自行探索”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/dad87c027304c546a9223f66d4a6883c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WnQrNUrt2gWn-E31hPhPcw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="0fec" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">2.点击“堆栈管理”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/4939bc85ffceda602c20a011cb154e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c9mvQ0KzEF10cIEe06crvQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="44ec" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">3.创建索引</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/368cc6f353717e5d47aec9ba20aea092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yoIvP43kM6l7QVj0syWW_Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="718b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">4.匹配索引模式</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/778a302e371e0c40c5153ca27827a43c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DiUQvL6fzI6ZVSnQjKy0ZA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1e06" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">5.键入“默认*”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c39a3c1b9fd14906ead46f134128819a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbmgAbwDhn7lvePOocFpIw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="36ad" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">6.按“@时间戳”排序</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/4b02c1ef8b8220a3ce425b60b1c5c82c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zI_-MP4DG-5pfSKPxXYbTw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="1a1b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">鳍状物</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/554dbd6ef068e53fb293a9b200c6e866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lwfMZj9-UMUGaMNSkhbrA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="c138" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">单击发现</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c56d22493661010f71c4a7448cf9a14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSaWG_CH4slnVFAw7xoV4Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="f6f7" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">选择“本周”</p><p id="14f2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我们试图回答的最初问题是:</p><ul class=""><li id="a9fe" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk nx mw mx my bi translated">特定搜索词被转发最多的是哪些？(追踪话题热度)</li><li id="5c68" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">有多少独立用户在推特上谈论一个给定的搜索词？(是趋势吗？)</li><li id="7308" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">他们还发布了哪些关于搜索词的推文？(他们是巨魔/机器人吗？)</li><li id="cb40" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">这个人在搜索词上有多少个赞？(趋势/感悟)？</li></ul><p id="fe37" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">浏览“可用字段”时，以下字段似乎很有趣:</p><ul class=""><li id="4729" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk nx mw mx my bi translated">全文_文本</li><li id="1200" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">语言</li><li id="6487" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">转发次数</li><li id="3f4f" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户创建于</li><li id="9bf8" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户屏幕名称</li><li id="042d" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户_关注者_计数</li><li id="81ae" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户_朋友_计数</li><li id="ca8b" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户_状态_计数</li><li id="1c6b" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk nx mw mx my bi translated">用户创建于</li></ul><p id="09cb" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我添加了lang字段，这样我可以在以后计算出每种“语言”的情感比率。目前，我正在过滤非英语。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/a2fdd1d87e1b56fe0ba421a9638a41ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGo-Uhav09wGoBEpOYR5Fg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片:仅过滤英语</p></figure><p id="b6f9" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">仅过滤英语将我的样本从400个减少到262个。</p><p id="b13c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">浏览全文，我看到有一堆转发，我想把它们聚合成1条。统计数据显示，前5个值是转发量，占262条推文的X%。我们看到转发量最高的占19.1%。让我们来探索一下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c80cf64dc54d826790700817d9a1822e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1U-VHJMa7BwrGFDpLwgDWg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="4a1f" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我变得超级兴奋，因为我认为这是那么容易，并找到了所有的机器人。然而，仔细一看。retweet_count不是user_screen_name转发的次数。而是全文被转发的次数。</p><div class="kg kh ki kj gt ab cb"><figure class="ny kk nz oa ob oc od paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/87465da3dcd964ec984fe8e02d58176c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*Z91U4gID5YiTTnMnPLfuQw.png"/></div></figure><figure class="ny kk oe oa ob oc od paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/979598a9097d873e79db30aa37ee8d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*LOgclgZPHy2Ml3OFh5UTew.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk of di og oh translated">作者提供的图片</p></figure></div><h2 id="c8cb" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">特定搜索词被转发最多的是哪些？(追踪话题热度)</h2><p id="891c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">浏览默认字段列表，我们看到:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/60e64faf3fac9c8a1aba7730583ea0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LOgclgZPHy2Ml3OFh5UTew.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="323d" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">现在，让我们创建一个可视化:</p><p id="31e3" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">点击:</p><p id="66af" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir"/>&gt;【创建可视化】&gt;选择“数据表”&gt;选择要在“默认*”中查找的索引&gt;单击“添加桶”&gt;【拆分行】&gt;选择聚合&gt;术语:<br/> -字段:full_text.keyword <br/> -将大小从5更改为25</p><p id="7da6" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">点击"&gt;更新"</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/e4020ad828a528524caa39040cbc98ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ll5_aaLmLQ-kl8MwDpD40g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="7418" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">问题的答案是:“RT</strong><a class="ae kv" href="http://twitter.com/_whitneywebb" rel="noopener ugc nofollow" target="_blank"><strong class="lu ir">@ _ Whitney Webb</strong></a><strong class="lu ir">:新文章:一个由Palantir驱动的秘密人工智能平台将很快从一个新的国家“智能下水道”网络获得数据，在收集期间有50次转发。</strong></p><h2 id="f7d8" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">有多少独立用户在推特上谈论一个给定的搜索词？(是趋势吗？)</h2><p id="ecec" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们将通过一个饼图和一个计数器来深入研究这个问题:</p><p id="b450" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">可视化</strong> &gt;创建新的可视化&gt;指标&gt;默认* &gt;指标&gt;聚合:唯一计数&gt;字段:用户屏幕名称.关键字&gt;保存可视化</p><p id="1019" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">可视化</strong> &gt;创建新的可视化&gt;饼图&gt;桶:拆分切片&gt;聚合:术语&gt;字段:user_screen_name.keyword &gt;大小10</p><p id="5b75" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">可视化</strong> &gt;创建新的可视化&gt;行&gt;指标(Y轴):计数<br/>桶(X轴):聚合:术语&gt;字段:user_screen_name.keyword &gt;大小10</p><p id="1784" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">现在我们有了可视化效果，我们可以创建一个仪表板:</p><p id="456f" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">创建新仪表板:<br/> -添加所有可视化效果</p><p id="7cea" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">搜索“一个由Palantir驱动的秘密人工智能平台将很快从一个新的国家获得数据”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/e30c9abcbb978f2edef7539592a26981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnFeb4hGVmpqC_50PmG5Og.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="33c2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">答案是在这段时间内，有14个不同的用户转发了同一条消息。他们发微博的次数一样多(4)，也许他们是机器人？</p><h1 id="45b1" class="oj kx iq bd ky ok ol om lb on oo op le jw oq jx li jz or ka lm kc os kd lq ot bi translated">他们还发布了哪些关于搜索词的推文？(他们是巨魔/机器人吗？)</h1><p id="f2cb" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">因为我们已经有了可视化和仪表板设置，所以我们只需将搜索标准修改为:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="47b0" class="kw kx iq nf b gy nj nk l nl nm">"purofierro666" OR "pennys_shevy" OR "nevrsurrendr" OR "eustache_luigy" OR "eric_davao" OR "Inanna432" OR "LisaMP925" OR "SultryRobin" OR "UsernameNAB" OR "WarmongerExpose"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/2329a4d6a9a8cbeed4e77913ea9b8a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKRvFBf6Z8Ql8iORFjku2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="bac4" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">都是一样的转发。但是有几件事我们必须记住:</p><ol class=""><li id="f36c" class="mq mr iq lu b lv ml ly mm lf ms lj mt ln mu mk mv mw mx my bi translated">我们的收集脚本只获取搜索关键字，没有其他的，如果用户没有关于搜索关键字的tweet，我们不会拿起它。</li><li id="7f21" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">我的搜索时间范围很窄，我只收集了相隔几分钟的100条推文。</li><li id="c7bc" class="mq mr iq lu b lv mz ly na lf nb lj nc ln nd mk mv mw mx my bi translated">我不得不摆弄#tweet计数。据报道，用户发了4条微博，但我似乎找不到它。</li></ol><p id="211b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><strong class="lu ir">我仍然会将此列为未回答，因为我们收集脚本的限制以及我们处理的方式</strong></p><h1 id="2f8d" class="oj kx iq bd ky ok ol om lb on oo op le jw oq jx li jz or ka lm kc os kd lq ot bi translated">这个人在搜索词上有多少个赞？(趋势/感悟)？</h1><p id="a3ff" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">查看这些数据，看起来我必须调整脚本来接受额外的元数据。这个问题仍然没有答案。这甚至可能不相关。我添加这个问题是为了检测潜在的僵尸工具，并对僵尸网络进行链分析。但我不知道这是否会如我所愿。</p><h1 id="579d" class="oj kx iq bd ky ok ol om lb on oo op le jw oq jx li jz or ka lm kc os kd lq ot bi translated">离别的思绪</h1><p id="570e" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在我最初的问题中，我能够明确地回答我所在时间段的4个问题中的2个。我发现我遗漏了一些我可能需要的字段，并且一些问题可能不相关。一旦我建立了可视化和仪表板，我可以修改搜索参数，所有的可视化将更新。Kibana可以快速有效地可视化数据。</p><p id="2afa" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">第2b部分将回到脚本，看看我们可以修改和调整哪些内容，以获取更多信息并进一步丰富记录。</p></div></div>    
</body>
</html>