<html>
<head>
<title>Generating Image Segmentation Masks — The Easy Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生成图像分割蒙版——简单的方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-image-segmentation-masks-the-easy-way-dd4d3656dbd1?source=collection_archive---------1-----------------------#2020-10-01">https://towardsdatascience.com/generating-image-segmentation-masks-the-easy-way-dd4d3656dbd1?source=collection_archive---------1-----------------------#2020-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1cd7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">…不到5分钟</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c70be592c6f390892920767904edad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-1_NRRIGlHKdjvb5RO24FA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">米歇尔·胡贝尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的图片。作者编辑</p></figure><p id="501c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在读这篇文章，那么你可能知道你在寻找什么🤷。所以我就开门见山了，假设你熟悉图像分割是什么意思，语义分割和实例分割的区别，以及U-Net、Mask R-CNN等不同的分割模型。如果没有，我<strong class="lb iu">强烈</strong>推荐阅读<a class="ae ky" href="https://www.analyticsvidhya.com/blog/2019/07/computer-vision-implementing-mask-r-cnn-image-segmentation/" rel="noopener ugc nofollow" target="_blank">这篇</a>关于分析的优秀文章Vidhya，全面介绍这个主题，最后用一个例子完成使用Mask R-CNN。</p><p id="25a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大多数在线图像分割教程使用预处理和标记的数据集，并生成地面真实图像和掩膜。在实际项目中，当您想要处理类似的任务时，几乎不会出现这种情况。我也面临过同样的问题，在一个实例分割项目中，我花了无数个小时试图找到一个足够简单和完整的例子。我不能，因此决定写自己的:)</p><p id="6ddd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们将在本文中做的事情的一个简单的可视化:)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/29b384666b69d3ca48242de27f60180e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oXGfRTnpDsRKek4fWgYu1w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="23f5" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">VGG图像注释器(VIA)</h1><p id="0fb0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">VIA是一个非常轻量级的注释器，支持图像和视频。可以通过<a class="ae ky" href="http://www.robots.ox.ac.uk/~vgg/software/via/" rel="noopener ugc nofollow" target="_blank">项目首页</a>了解更多。使用VIA时，您有两种选择:V2或V3。我会试着解释下面的区别:</p><ol class=""><li id="ae06" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">V2要老得多，但足以完成基本任务，而且界面简单</li><li id="12b0" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">与V2不同，V3支持视频和音频注释器</li><li id="4751" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">如果您的目标是使用JSON和CSV等多种导出选项进行图像分割，那么V2是更好的选择</li><li id="2809" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">V2项目与V3项目不兼容</li></ol><p id="aca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将使用V2。你可以在这里下载需要的文件<a class="ae ky" href="http://www.robots.ox.ac.uk/~vgg/software/via/downloads/via-2.0.10.zip" rel="noopener ugc nofollow" target="_blank">。或者，如果您想通过在线试用，您可以在这里</a>进行<a class="ae ky" href="https://www.robots.ox.ac.uk/~vgg/software/via/via_demo.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="2155" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">操作方法</h1><p id="5502" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我将使用ka ggle<a class="ae ky" href="https://www.kaggle.com/paultimothymooney/identification-and-segmentation-of-nuclei-in-cells/" rel="noopener ugc nofollow" target="_blank">nucleus数据集</a>并注释其中一幅测试图像，以生成分割蒙版。充分披露，我是<strong class="lb iu">而不是</strong>认证的医学专家，我做的注释只是为了这篇文章。您也可以快速调整该过程以适应其他类型的对象。</p><p id="596d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根文件夹树如下所示。<code class="fe nt nu nv nw b">via.html</code>是我们将用来注释图像的文件。它位于上面提供的VIA V2 ZIP下载链接中。将所有要添加注释的图片放在<code class="fe nt nu nv nw b">images</code>文件夹中。<code class="fe nt nu nv nw b">maskGen.py</code>是一个将注释转换成遮罩的脚本。</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="12f7" class="ob me it nw b gy oc od l oe of">├── images<br/>│   └── test_image.png<br/>├── maskGen.py<br/>└── via.html</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/a3b7b253e646f6545a81dc447660caf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsApszt1XZ1gfDqmMNlZpw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。作者图片</p></figure><p id="01eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.<strong class="lb iu">打开</strong> <code class="fe nt nu nv nw b">via.html</code>:会在你默认的浏览器中打开。在<strong class="lb iu">区域形状</strong>下，选择折线工具(最后一个选项)并给你的项目命名。然后点击<strong class="lb iu">添加文件</strong>并选择您想要添加注释的所有图像。此时，您的屏幕应该如图1所示。</p><p id="3f12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.<strong class="lb iu">开始标注</strong>:点击一个对象的边框，在对象周围画一个多边形。你可以通过按<em class="oh">回车</em>来完成多边形，或者如果你犯了一个错误，按<em class="oh">退格键</em>。对所有对象重复此操作。完成后，您的屏幕应该如图2所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/91cd679387e1e7bbd3186207705b0e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8nQSAd4xQqsZX7bA1AMUwg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。作者图片</p></figure><p id="8229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.<strong class="lb iu">导出注释</strong>:完成后，点击顶部的<strong class="lb iu">注释</strong>选项卡，选择<em class="oh">导出注释(作为JSON)。</em>一个JSON文件将被保存到您的设备中。按照上面给出的树，找到这个文件并将其转移到根文件夹。</p><p id="f68e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.生成遮罩:现在，你的根文件夹应该看起来像这样。</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="f86c" class="ob me it nw b gy oc od l oe of">├── images<br/>│   └── test_image.png<br/>├── maskGen_json.json<br/>├── maskGen.py<br/>└── via.html</span></pre><p id="f3e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">maskGen.py</code>给出了下面的大意。它读取JSON文件，记住每个遮罩对象的多边形坐标，生成遮罩，并将其保存在<em class="oh">中。png </em>格式。对于<code class="fe nt nu nv nw b">images</code>文件夹中的每个图像，脚本会以该图像的名称创建一个新文件夹，该文件夹包含原始图像和生成的遮罩文件的子文件夹。确保将<em class="oh"> json_path </em>变量更新为您的json文件名，并设置遮罩高度和宽度。几个生成的掩码显示在要点之后。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="6414" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你做的一切都是正确的，你的根文件夹树应该看起来像这样。每个<code class="fe nt nu nv nw b">mask</code>文件夹中的文件数量对应于你在地面真实图像中标注的对象数量。</p><pre class="kj kk kl km gt nx nw ny nz aw oa bi"><span id="b1d3" class="ob me it nw b gy oc od l oe of">├── images<br/>│   └── test_image<br/>│       ├── images<br/>│       │   └── test_image.png<br/>│       └── masks<br/>│           ├── test_image_10.png<br/>│           ├── test_image_11.png<br/>│           ├── test_image_12.png<br/>│           ├── test_image_13.png<br/>│           ├── test_image_14.png<br/>│           ├── test_image_15.png<br/>│           ├── test_image_1.png<br/>│           ├── test_image_2.png<br/>│           ├── test_image_3.png<br/>│           ├── test_image_4.png<br/>│           ├── test_image_5.png<br/>│           ├── test_image_6.png<br/>│           ├── test_image_7.png<br/>│           ├── test_image_8.png<br/>│           └── test_image_9.png<br/>├── maskGen_json.json<br/>├── maskGen.py<br/>└── via.html<br/></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/30ea9dc840d263c59637beeb96badf6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_K5phsTRSoI1B1VsyCVleA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一些最终的分割蒙版。作者图片</p></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="8b50" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="79c3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我希望这篇文章对你的项目有所帮助。请联系我们寻求任何建议/澄清:)</p><p id="80ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过以下方式联系我:<a class="ae ky" href="mailto:abhiroop.talasila@gmail.com" rel="noopener ugc nofollow" target="_blank">邮箱</a>、<a class="ae ky" href="https://www.linkedin.com/in/abhiroop1999/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae ky" href="https://github.com/abhirooptalasila" rel="noopener ugc nofollow" target="_blank"> GitHub </a></p><div class="om on gp gr oo op"><a rel="noopener follow" target="_blank" href="/automatic-speech-recognition-for-the-indian-accent-91bb011ad169"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">印度口音的自动语音识别</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">谷歌语音识别API的最佳开源替代方案——现在是第二大英语国家……</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">towardsdatascience.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><div class="om on gp gr oo op"><a rel="noopener follow" target="_blank" href="/generating-subtitles-automatically-using-mozilla-deepspeech-562c633936a7"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd iu gy z fp ou fr fs ov fu fw is bi translated">使用Mozilla DeepSpeech自动生成字幕</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">对于那些嘴里薯条的噪音让你无法看电影的时候:)</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">towardsdatascience.com</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd ks op"/></div></div></a></div></div></div>    
</body>
</html>