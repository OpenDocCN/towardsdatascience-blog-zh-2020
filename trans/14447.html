<html>
<head>
<title>7 Rules for Bulletproof, Reproducible Machine Learning R&amp;D</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">防弹、可复制机器学习的7条规则R&amp;D</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-rules-for-bulletproof-reproducible-machine-learning-r-d-45ceb71e3322?source=collection_archive---------26-----------------------#2020-10-05">https://towardsdatascience.com/7-rules-for-bulletproof-reproducible-machine-learning-r-d-45ceb71e3322?source=collection_archive---------26-----------------------#2020-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="617b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我精心挑选的明星级研发最佳实践。确保不要错过第三条！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/03e1a8450b5ade4412cf670c618f1bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dH6B1f9KxWcQaKhp"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lb" href="https://unsplash.com/@mina_fc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米娜FC </a>拍摄</p></figure><p id="6ac4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，如果你是一个精通键盘的开发人员，这个类比很有可能超出了你的舒适区…请原谅我。</p><p id="1118" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想象一下，两个奥运会级别的花样滑冰运动员日复一日地在冰上一起工作，发展和完善赢得奖牌的表演。每个人都有他或她的角色，他们同步工作以合并他们的行动并微调结果。每一个微小的变化都会影响到对方的动作——有望改善他们的舞蹈，但往往会毁了它。随着时间的推移，他们建立了一个持续的沟通渠道，以确保每个人都知道对方在做什么，从而获得一致的、不断改进的结果。</p><p id="d531" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">机器学习代表了一种奇怪的相似动态，其中你的模型和代码加入训练数据，协同工作，产生预期的结果。优化之路——就像溜冰者的路——由小的调整驱动，这些调整需要<em class="lc">系统地</em>反复尝试(反复尝试),小心翼翼地。但是每一次变化、每一次调整和每一个新的攻击角度也为错误、混乱和不一致的推论打开了大门。简而言之，缺乏有纪律的结构和计划导致可重复性的不足，很快限制了ML的发展。</p><p id="d159" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">即使上面的比喻对你来说太老套，在任何业务用例中处理ML都应该让你点头。下面是我避免这些陷阱和优化再现性的7条指导方针:</p><h1 id="6ed2" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">0.你的代码不是“自我记录的”</h1><p id="c8d6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">除非您使用非常高级的解决方案，否则产生ML模型需要编写代码。专业代码库的基础是适当的结构和可靠的文档。</p><p id="b443" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管如此，任何浏览过GitHub上开源作品的人都可以证明，我们总是不能很好地做到这一点。我的“第零准则”不是简单地遵守<a class="ae lb" rel="noopener" target="_blank" href="/best-python-practices-for-data-scientists-11056edda8c7"> PEP8 </a>(请遵守！)或者适当的函数命名(你介意吗？).</p><p id="125b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们必须认识到，由于我们开发的流程依赖于大量的配置，因此应该强制执行它们的文档和适当的内务管理。</strong></p><p id="03f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，在由于“过早工程化”造成的生产力损失和进一步研究代码的可用性之间的平衡是有价值的。</p><h1 id="c1ad" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">1.保持跟踪并继续下去</h1><p id="3ad9" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">任何成功的数据科学团队的第一条家规是<em class="lc">有效的版本控制</em>。</p><p id="5e0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">机器学习比其他开发学科更依赖于版本控制，因为我们在过程的两个组成部分中利用它:代码和数据。ML开发的流动性要求数据科学家频繁地修改和优化模型，以及用来训练这些模型的底层数据。</p><p id="1833" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数据科学家和软件<em class="lc">本身</em>都必须从每次迭代中学习，然后调整模型以适应预期的数据集。因此，每个迭代都必须被记录和存储，最好使用自动机制来减少手工日志记录的开销。</p><p id="4165" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ML开发的这个关键方面并不止于此；当作为一个团队工作时，开发人员共享他们的模型和数据以节省时间，互相学习，并避免重复的、多余的工作。</p><p id="0789" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">没有有效的、持续的版本控制，可复制性的动态过程往好里说是复杂的，往坏里说是不可能的。</strong></p><h1 id="53bc" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">2.苹果对苹果</h1><p id="de67" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">再现性是ML模型开发的核心因素，取决于可比性。如果不能比较模型A和模型B的培训结果，就无法知道哪些变化导致了结果的改善或下降</p><p id="1240" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据定义，研究迭代需要在两轮之间进行变更。然而，在实验时，模型之间的架构和逻辑差异是有实际限制的。如果模型的结构不相似，由相同的核心逻辑驱动，但只有细微的差异，就没有办法知道在实验中需要关注什么因素来改进。</p><p id="cd31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的管道设计应该公开您的更改，并且实际上便于将它们与性能更改联系起来。</p><h1 id="a39c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">3.没有“U”和“I ”,就不能拼出Production</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/bb13b806218b93a37b55847e0944c81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qKQUFtw3G8QCvPyX"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">cloudvisual.co.uk在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae lb" href="https://unsplash.com/@cloudvisual?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍照</a></p></figure><p id="e15b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前一个准则还扩展到R&amp;D和生产之间的接口。如果培训和服务(生产)环境不匹配，即使是最精心设计和仔细审查的模型也可能失败或返回意想不到的结果。</p><p id="6c5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管如此，模型还是有严格的性能要求，以及与其余业务逻辑集成的必要性。这些通常会导致最终的实现与研究代码完全不同</p><p id="6f25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当这种情况发生时，模型的创建者很难找到故障，甚至是常见的基本问题。除非有足够的理由这样做，否则生产环境应该完美地模仿孕育模型的环境。</p><p id="9eab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是不幸的是，由于这种情况很少发生，<strong class="jp ir">数据科学团队应该在移交过程中尽可能地与DevOps合作。</strong>在项目生命周期的早期开始这种协作。</p><h1 id="811c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">4.针对数据源中的不一致性制定计划</h1><p id="5d10" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">研究和开发是在真实世界数据的子集上完成的。您的用例越依赖时态数据，您就越需要处理模型不匹配的常见问题。</p><p id="a5b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管如此，还是要注意<strong class="jp ir">【管道债务】</strong>的存在:用于提取和格式化数据的机制会随着时间而改变。在这个过程中，即使是一个很小的特性依赖，也足以改变数据，从而改变结果，打破逻辑…由此，您可以根据模型的成功或失败做出推论。</p><p id="1b14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，再现性真的<em class="lc">始于源头。一个经验丰富的ML数据科学家从来不会想当然地认为他或她的数据是“纯净的”和一致的，并检查(经常！)在数据的获取和格式化中没有关键的依赖性发生变化。</em></p><p id="1de2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然模型性能的突然失败是一个幸运的指标，但通常数据的变化只会引发结果中令人困惑、分散注意力且可避免的异常，必须进行调查。</p><p id="5152" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在代码中清楚地指出所有的依赖关系有助于防止这种情况；还建议<strong class="jp ir">进行管道测试。</strong></p><h1 id="d5f9" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">5.测试不仅仅是“度量”</h1><p id="d3ea" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">虽然我们的第零指导方针提到了软件开发的最佳实践，但是我们只是讨论了子组件的测试，而不是曲线下面积的意义。这是软件R&amp;D的另一个基本方面，在ML中通常会避开，但实际上不应该。</p><p id="9f86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">粗略地解释，在ML开发的每一个阶段，</strong>你必须能够确保你对代码库或数据的更改没有引发需要进一步解决的问题。</p><p id="b9fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">重要的是要记住，这种测试心态适用于你工作的两个方面。首先是对单个独立组件(单元)的持续审查，以确保对特定构建模块的更改不会产生意外结果。用于预处理的代码就是一个很好的例子，因为这个问题会产生瀑布效应。</p><p id="414e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样重要的是，(贵！)在真实世界模拟中测试<em class="lc">整个</em>代码库——模型及其数据和配置——有助于防止各种因素的组合产生次优结果</p><h1 id="e515" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">6.追踪，再追踪</h1><p id="b782" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">模型的再训练和改进很大程度上依赖于结果的跟踪、记录和比较。手动日志记录的缺陷有很多——它会导致人为错误、结果的本地化存储(因此不可访问)、数据格式或帧的变化，以及最糟糕的是，完全或根本无法做到这一点。</p><p id="e828" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用自动化管道在后台提供持续的结果收集，无需研究人员或开发人员的努力。</p><p id="a2c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了保持一致性，这些元数据是标准化的，并且经常可以使用图形图表工具自动进行比较，以快速明确一组结果与另一组结果的不同之处。</p><p id="d296" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，这些结果是集中的，因此，连同它们的标准化格式，它们可以被团队中的其他人利用。</p><h1 id="62cc" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">7.使用一个平台来真正地将它们联系在一起</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mh"><img src="../Images/74801bff632725fd49b7fd8a492ff4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f45Xi1GrSlzXjf8L"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae lb" href="https://unsplash.com/@marvelous?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马文·迈耶</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3931" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们已经讨论了版本控制和跟踪的许多重要方面(除了测试之外)。遵循以前的指导方针所需的基础设施组件现在已经可以作为开源解决方案获得。</p><p id="71eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，将单个组件组装到一个平台上进行合作研究并不是一件容易的事情，还取决于你的团队的职业道德。</p><p id="6981" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据经验，选择一个现成的实验平台来自动完成遵守这些准则所需的大部分工作是一个不错的选择:你面临着难以置信的挑战，推动你的创造力和技术技能来构建一些独特、强大、值得他们支付给你的钱的东西。</p><h2 id="c5d5" class="mi le iq bd lf mj mk dn lj ml mm dp ln jy mn mo lr kc mp mq lv kg mr ms lz mt bi translated">当您可以部署一个包含最佳实践和简化流程的解决方案时，就没有理由失去重点、牺牲质量和重新发明轮子。</h2><h1 id="1bff" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">关闭</h1><p id="2917" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这些是我的7条(实际上是8条)机器学习研发的黄金准则。<strong class="jp ir">最后一条实际上是结论:使用一个为你保留准则的平台。</strong></p><p id="a4b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，在实际部署模型时，需要考虑更多的方面，尤其是监控和日志记录。</p><p id="05d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个项目和每个开发人员都是独一无二的，所以我很想听听你的经验，什么是最重要的…留下评论吧！</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="f8fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">原载于2020年10月5日</em><a class="ae lb" href="https://allegro.ai/blog/the-7-rules-for-bulletproof-reproducible-machine-learning-rd/" rel="noopener ugc nofollow" target="_blank"><em class="lc">https://allegro . ai</em></a><em class="lc">。</em></p></div></div>    
</body>
</html>