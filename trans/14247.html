<html>
<head>
<title>5 Wrong Ways to Do Covid-19 Data Smoothing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎数据平滑的5种错误方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/five-wrong-ways-to-do-covid-19-data-smoothing-1538db6ff182?source=collection_archive---------22-----------------------#2020-10-01">https://towardsdatascience.com/five-wrong-ways-to-do-covid-19-data-smoothing-1538db6ff182?source=collection_archive---------22-----------------------#2020-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8369" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">新冠肺炎的大部分数据分析是基于有缺陷的平滑技术</h2></div><p id="716c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能认为原始数据比平滑数据更准确。但在新冠肺炎疫情的情况下，平滑数据减少了报告异常，比原始数据更准确地表示了时间。但前提是平滑处理正确。</p><h1 id="2bd6" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">错误方法1:不使用平滑数据来揭示趋势</h1><p id="481f" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">原始的州级数据是嘈杂的，很难看出原始数据的趋势。以下示例显示了来自夏威夷的当前原始数据报告。浅蓝色的线代表阳性测试，红色的线代表死亡。</p><p id="c874" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试是上升还是下降？从这种数据描述中几乎无法判断。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/304c780f8c3033dcaf27faeb846250f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uKIw9kzPKQurgubaa51RlQ.png"/></div></div></figure><p id="f3a9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相比之下，下图告诉你阳性测试目前是上升还是下降了？从视觉上看，很明显，大约一周以来，阳性测试一直持平或略有增加。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/993a56ebf9337c6c6c1fb576fea0dc3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQvbCyZhzhH1B089nYyQcQ.png"/></div></div></figure><h1 id="c60c" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">错误方式2:不使用平滑数据来减少州数据校正的影响</h1><p id="e938" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">大多数州已经在疫情过程中对其数据进行了校正，并且在许多情况下，州在一天之内将数周或数月的校正值全部转储到数据库中。</p><p id="98e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">纽约的数据(下图)包括了他们对5月初死亡数据的一个修正(高红线)。如果你从字面上理解这个数据，一天内有1000人死亡。但是1000个人并没有真的在一天内死去；纽约刚刚报道了一天内如此大规模的调整。这种峰值极大地破坏了对包含峰值的时间段的分析。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/c4b86232cefe321cb3888ab60444a8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rj_vbZBx7CgZGHfFcZDQtg.png"/></div></div></figure><p id="538a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">平滑后的数据(如下)仍然会受到这种校正的影响-您可以从1000死亡校正中看到5月份的驼峰-但是平滑后的数据受峰值的影响较小。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/9dc6dbc05df17983062075ed7b5f24be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPRd6CDbdIm4Sso39VWzPQ.png"/></div></div></figure><h1 id="769c" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">错误方式#3:使用7天以外的平滑周期</h1><p id="d0a5" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">许多州并不每天报告结果。许多国家显示出在某些日子少报而在其他日子多报的周循环。例如，我所在的州(华盛顿)在周日少报，然后在接下来的几天多报。你可以在下图中看到华盛顿每周少报和多报的节奏。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/26d493d01f33438ca65087b3f533e5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aESGBaBXsU_epeBWeFhoyw.png"/></div></div></figure><p id="e134" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">短于7天或长于7天的平滑期会对少报或多报结果的天数造成不成比例的影响。以下是全国范围内工作日与趋势的典型偏差:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/2bea96989e97a991d451489d641ff171.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*494lh13fdsbHIiMWs0dkiQ.png"/></div></figure><p id="694e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为为什么需要7天周期的一个例子，假设对死亡数据的平滑是在周六到周一的3天基础上完成的。在这种情况下，5天期间将是趋势的71%,因为周日和周一的典型漏报。</p><p id="9d15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似地，如果对从星期二到星期四的3天进行死亡平滑，那么这3天将是趋势的124%。需要包括整整7天，以获得该周数据的准确情况。</p><p id="119b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从视觉上看，这表现为平滑后的数据看起来不太平滑。以下是最近美国7天的平滑数据，看起来相当平滑:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ml"><img src="../Images/0cefff1d9a2fe77e3507b58104f5d0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*rl71p4VrT8lT66XKyKPG2Q.png"/></div></div></figure><p id="a811" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是在5天基础上平滑的相同数据，看起来不是很平滑:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ml"><img src="../Images/294606894efd23b0b6875777d79a03c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*HBYPZmrtPnztN78H6nQoUw.png"/></div></div></figure><p id="5d7c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能会认为7天平滑比5天平滑更平滑的原因是因为它的周期更长。这是不正确的。长于7天的周期具有与短于7天的周期相同的问题:它们重复计算低于平均值或高于平均值的天数，因此降低了准确性。以下是9天平滑后的相同数据:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ml"><img src="../Images/d618c1300214bd0358b1d9ac86643fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*JYLaqMQEnfuvdkgt9wbctA.png"/></div></div></figure><p id="f524" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">9天平滑比5天平滑，但比7天粗糙。平滑问题是每周周期，而不是纯粹的天数本身。</p><p id="508a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">7天的倍数的平滑周期没有这个问题。7、14和21天的平滑周期都可以是精确的。</p><h1 id="d747" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">错误方法#4:使用滞后平滑周期</h1><p id="3d5e" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">一些平滑技术使用7天平滑期，但是它们在滞后的基础上计算7天平均值。换句话说，他们通过平均天数<em class="mm"> n </em>、<em class="mm"> n-1 </em>、<em class="mm"> n-2 </em>、<em class="mm"> n-3 </em>、<em class="mm"> n-4 </em>、<em class="mm"> n-5 </em>和<em class="mm"> n-6 </em>来计算天数<em class="mm"> n </em>的值。</p><p id="3c94" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在回顾的基础上进行平滑意味着数据的平均值基于3.5天前的中点。声称显示第<em class="mm"> n </em>天的数据实际上显示的是第<em class="mm"> n-3.5 </em>天的数据。</p><p id="d4bd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在显示原始数据和平滑数据的图表上很容易发现这种现象，如下图所示:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mn"><img src="../Images/9857dfe51bad34f1672e352e5a0a4d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*4xn5icoMfq8AwSWfOyzT6Q.png"/></div></div></figure><p id="51f2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你研究一下图表，你会发现平滑线滞后于原始数据线。波峰和波谷有3-4天的时差。如果平滑处理得当，平滑线将位于原始数据行的正上方，如下所示:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi mn"><img src="../Images/745db34be7ddb119c9b6dcf60efa5672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*vSVTGDfiW22bm_iAft9LQw.png"/></div></div></figure><p id="2dfb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">7天平滑需要基于记录日期前3天、记录日期、记录日期后3天，例如基于天数<em class="mm"> n-3 </em>、<em class="mm"> n-2 </em>、<em class="mm"> n-1 </em>、<em class="mm"> n </em>、<em class="mm"> n+1 </em>、<em class="mm"> n+2 </em>、<em class="mm"> n+3 </em>。</p><h1 id="6d34" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">错误方式5:没有有意识地处理最近3天的事情</h1><p id="ad74" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">如果记录的日期是今天，这意味着第<em class="mm"> n+1 </em>、<em class="mm"> n+2 </em>和<em class="mm"> n+3 </em>天还没有发生。我们丢失了3天的前瞻性数据。</p><p id="b01b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样的问题也适用于昨天，它丢失了2天的前瞻数据，以及前天，它丢失了1天的数据。</p><p id="e55e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们需要一个平滑最近3天的计划，因为只有部分平滑数据可用。有几个选项可用:</p><ul class=""><li id="4931" class="mo mp iq kh b ki kj kl km ko mq ks mr kw ms la mt mu mv mw bi translated">将今天的数据预测到未来3天，并根据预测进行平滑处理。</li><li id="1d8f" class="mo mp iq kh b ki mx kl my ko mz ks na kw nb la mt mu mv mw bi translated">当你没有展望未来的日子时，换成回顾过去。今天使用最近7天。昨天使用今天加上最近6天。前天使用今天、昨天和最近5天。之前的天数使用正常的7天平滑。</li><li id="2ee4" class="mo mp iq kh b ki mx kl my ko mz ks na kw nb la mt mu mv mw bi translated">最近几天基于部分时段而非7天时段的平滑。今天是根据今天加上之前的3天进行平滑的，总共4天。昨天是基于5天平滑的。前天是按6天平滑的。之前的所有日子都可以用正常的7天来平滑。</li><li id="c17f" class="mo mp iq kh b ki mx kl my ko mz ks na kw nb la mt mu mv mw bi translated">不要提供最近3天的平滑数据。</li></ul><p id="3b0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一种方法是最正确的，但是它限制了利用最近几天的能力。</p><p id="5257" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前三种方法有可能在最近几天的平滑中引入误差。但是，这些错误是暂时的，随着完整数据的出现，它们将在接下来的3天内得到纠正。</p><p id="393b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这方面的失败模式不是有意识地选择最适合这种情况的方法。制定一个计划，并仔细考虑当你的前瞻时间用完时，转向向前预测、向后看或使用不完整数据的影响。</p><h1 id="91cf" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">摘要</h1><p id="3b2d" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">平滑处理得好可以提高新冠肺炎数据的准确性和可用性。平滑处理得不好会给数据带来误差。</p><p id="36fa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不正确的平滑技术可能是新冠肺炎数据分析的盲点。幸运的是，这个特殊的盲点很容易纠正。</p><h1 id="d943" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">更多详情请访问新冠肺炎信息网站</h1><p id="7619" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我领导的团队将<em class="mm"> CovidComplete </em>的预测数据输入疾病预防控制中心的<a class="ae nc" href="https://www.cdc.gov/coronavirus/2019-ncov/covid-data/forecasting-us.html" rel="noopener ugc nofollow" target="_blank">集合模型</a>。对于这些图表的更新，更多的图表，美国和州级的预测，以及预测评估，请查看我的新冠肺炎信息<a class="ae nc" href="https://stevemcconnell.com/covid" rel="noopener ugc nofollow" target="_blank">网站</a>。</p><h1 id="bfd3" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">我的背景</h1><p id="c7f7" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">在过去的20年里，我专注于理解软件开发的数据分析，包括质量、生产率和评估。我从处理噪音数据、坏数据、不确定性和预测中学到的技术都适用于新冠肺炎。</p></div></div>    
</body>
</html>