<html>
<head>
<title>R Studio Server on Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云上的R Studio服务器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/r-studio-server-on-google-cloud-dd69b8bff80b?source=collection_archive---------6-----------------------#2020-09-20">https://towardsdatascience.com/r-studio-server-on-google-cloud-dd69b8bff80b?source=collection_archive---------6-----------------------#2020-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f7ac396a12469bbc62fee3a9b4322558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fERvvfweUZSsTilD"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">萨法尔·萨法罗夫在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="aedd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">目标:</strong>在Google云计算引擎的虚拟机实例上建立一个完全可运行的机器学习服务器。</p><p id="2b57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在现实世界中，云计算和机器学习携手构建、转变和扩展预测建模项目。作为一个Linux服务器应用程序，R Studio server是最好的解决方案之一，可以托管在Google Cloud(或者Amazon Web Service或Azure)上，以集中的方式自动处理SQL/ R/ Python中的大量数据。以下是如何在Google Cloud上配置全功能R Studio服务器的一步一步的方法:</p><ol class=""><li id="9bdc" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">在Google Cloud上配置一个虚拟机实例(Ubuntu OS)。</li><li id="f950" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">在虚拟机上安装R and R工作室服务器。</li><li id="3c31" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">创建用户和组。</li><li id="5cf9" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">使用cronR包调度和运行R脚本。</li></ol><p id="c7fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第一步。在Google Cloud上配置一个虚拟机实例(Ubuntu OS):</strong></p><p id="02dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">步骤1.1。创建Google Cloud项目:登录<a class="ae kf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> Google Cloud控制台</strong> </a> <strong class="ki iu"> </strong>创建项目。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ls"><img src="../Images/96b1b2237a7a1a364265cc86695cdde8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6uvvy9N6ftWohGw7EqIEg.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">创建谷歌云项目(图片由作者提供)</p></figure><p id="d816" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第1.2步。创建防火墙规则:通过导航到“菜单”&gt;“网络”下的“防火墙规则”，在Google云计算引擎中创建防火墙规则。配置以下设置:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/bf318987e1d2c3f502f86ed422c60a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*4tOG_CcW3GJ-rk9Io2JUfw.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">创建防火墙规则(图片由作者提供)</p></figure><p id="e4b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第1.3步。创建虚拟机实例:通过导航到“菜单”&gt;“计算引擎”下的“虚拟机实例”，在Google Cloud上设置一个新的虚拟机。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ly"><img src="../Images/d825f93f6e8c732e63f993d00a9f684d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b2uJzHa0iIkwA1iGQdpxHw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">创建一个虚拟机实例(图片由作者提供)</p></figure><p id="5ae9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第1.4步。虚拟机配置:为新的虚拟机实例命名(例如:“rstudio”)，并选择一个靠近操作区域的区域，以减少网络延迟。因为R将所有的工作数据集存储在内存中，所以尽量给VM实例提供尽可能多的内存。在“操作系统映像”下，选择一个支持OpenSSL 1.0的最新版本的Ubuntu。R Studio Server总是通过不安全的HTTP连接进行连接。因此，在防火墙下，“允许HTTP流量”。最后，单击“Create”启动实例。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lz"><img src="../Images/54b4e545b0b81a74b7bfc1a3106e959a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCKEjLrFtc9XHtxRSl7Muw.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">虚拟机配置(图片由作者提供)</p></figure><p id="fe3a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第二步。在虚拟机上安装R and R工作室服务器:</strong></p><p id="ba30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第2.1步。SSH连接:在Google Compute Engine的VM instances窗口中，单击新实例旁边的“SSH”。这将启动命令提示符。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/ed55e52e65f359b951e4a7c1508ad79b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*tcCiVK-D8VAjn-uvixWBhg.png"/></div></figure><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/288538b3ae5b15eef7f6c9c691676ae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*xrEfgXaQ8y6w-nTYwbWz6g.jpeg"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">SSH连接(作者图片)</p></figure><p id="30df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">步骤2.2。更新apt:更新apt以确保我们有最新的软件包可以和Ubuntu一起使用。</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="f444" class="mh mi it md b gy mj mk l ml mm">sudo apt-get update<br/>sudo apt-get upgrade</span></pre><p id="c6c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第2.3步。安装R and R工作室服务器:</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="89d1" class="mh mi it md b gy mj mk l ml mm">sudo apt-get install r-base r-base-dev</span></pre><p id="65ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在运行下面几行代码之前，检查一下最新版本的<a class="ae kf" href="https://rstudio.com/products/rstudio/download-server/debian-ubuntu/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> RStudio服务器</strong> </a>。安装所有支持包:</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="8712" class="mh mi it md b gy mj mk l ml mm">sudo apt-get install gdebi-core<br/>wget <a class="ae kf" href="https://download2.rstudio.org/server/bionic/amd64/rstudio-server-1.2.5019-amd64.deb" rel="noopener ugc nofollow" target="_blank">https://download2.rstudio.org/server/bionic/amd64/rstudio-server-1.2.5019-amd64.deb</a><br/>sudo gdebi rstudio-server-1.2.5019-amd64.deb<br/>sudo apt-get install libcurl4-openssl-dev libssl-dev libxml2-dev</span></pre><p id="25b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第三步。创建用户和群组</strong></p><p id="ceb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用R studio server的最大好处之一是，它为我们提供了一个在集中式云框架中与同行协作的窗口。向虚拟机实例添加用户，以便其他人可以同时使用R Studio服务器。</p><p id="7aea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第3.1步。创建一个组:创建一个组(例如:“marketing”)将使管理团队共享的文件夹和文件变得更加容易。</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="ab93" class="mh mi it md b gy mj mk l ml mm">sudo addgroup marketing</span></pre><p id="cbe8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第3.2步。创建主用户:创建主用户背后的整个想法是，当同事和同事加入或离开我们时，“主用户”将仍然拥有所有的共享文件。</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="f565" class="mh mi it md b gy mj mk l ml mm">sudo adduser master</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/c49df78f765ccf5561ebda87dc63182a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*OAkyKBO5bZX-jbr3B11RYw.jpeg"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">创建一个主用户(图片由作者提供)</p></figure><p id="4915" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第3.3步。创建共享文件夹:</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="7670" class="mh mi it md b gy mj mk l ml mm">cd /home/master<br/>sudo mkdir shared_folder<br/>sudo chown -R master:marketing shared_folder/<br/>sudo chmod -R 770 shared_folder/</span></pre><p id="0eaa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第3.4步。添加用户并将他们链接到一个共享文件夹:这里我将Steve作为一个例子添加到最近创建的“marketing”组中。Steve的个人文件夹已链接到“主用户的共享文件夹”。</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="7ac3" class="mh mi it md b gy mj mk l ml mm">sudo adduser steve<br/>sudo gpasswd -a steve marketing<br/>su - steve<br/>ln -s /home/master/shared_folder /home/steve/shared_folder<br/>exit</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mo"><img src="../Images/79ba1395a06c29db2e93d34eab19646b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QMG5j9lJd7iDPQSaI8NEqQ.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">添加用户并将他们链接到共享文件夹(图片由作者提供)</p></figure><p id="d2d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！我们在Google Cloud上使用R Studio服务器很好。为了在浏览器上打开R studio服务器，遵循URL语法:<a class="ae kf" rel="noopener ugc nofollow" target="_blank" href="/[External"> <em class="mp"> http://【外部</em></a><em class="mp">IP】:8787</em>。例如，如果新配置的虚拟机实例的外部IP是35.185.161.49，那么我们的R Studio服务器URL将是:<a class="ae kf" href="http://35.199.10.210:8787/" rel="noopener ugc nofollow" target="_blank"><em class="mp">http://35.199.10.210:8787/</em></a></p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mq"><img src="../Images/4b7d8d21d862a8af4bdeeb51763a7267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ht75aSCOu8Vj8LhgrYHx2Q.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">R Studio服务器(图片由作者提供)</p></figure><p id="8b29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第四步。使用cronR包调度和运行R脚本:</strong></p><p id="24fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装cronR包以在R Studio服务器中生成任务调度器。使用该插件自动化虚拟机实例中的任何脚本。</p><pre class="lt lu lv lw gt mc md me mf aw mg bi"><span id="590d" class="mh mi it md b gy mj mk l ml mm">install.packages("cronR")<br/>install.packages("shinyFiles")</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/88876b3975dd801a9ed9ba7e59bba32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WyoQftCvLJ66rYrzv8scig.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">cronR包(图片由作者提供)</p></figure><p id="b837" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第五步:下一步是什么？</p><p id="1be8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们刚刚在云中完成了机器学习框架的设置。以下是一些建议，说明我们可以做些什么来扩展这种数据建模和预测分析工作流:</p><p id="c884" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1)从内部(CRM数据库)或外部数据源(第三方供应商，如尼尔森评级或脸书和谷歌广告集)提取、转换和加载数据集到谷歌云计算引擎。</p><p id="94ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2)用SQL、R或Python构建数据模型(使用Reticulate和sqldf包将python/SQL脚本源化到R studio服务器中)。</p><p id="8b9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3)在源自云的数据模型上构建监督的或无监督的或强化的机器学习算法。使用cronR包实现端到端工作流的生产化。将数据集存储在云数据库中。</p><p id="6bf1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4)最后，构建一个BI仪表板，可视化预测模型(可以是从预测下个月的销售额或流失率到使用无监督聚类模型对客户数据库进行分类的任何内容)。如果感兴趣，可以通过REST API将这个实时预测BI模型作为一个小部件嵌入到web/移动应用程序中。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="06c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">关于作者</strong></p><div class="mz na gp gr nb nc"><a href="https://srees.org/about" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">Sreejith Sreedharan - Sree</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">数据爱好者。不多不少！你好！我是Sreejith Sreedharan，又名Sree一个永远好奇的数据驱动的…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">srees.org</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jz nc"/></div></div></a></div><p id="8d35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您在理解上述配置方面需要任何帮助，请随时联系我。乐于分享我所知道的！希望这有所帮助:)</p></div></div>    
</body>
</html>