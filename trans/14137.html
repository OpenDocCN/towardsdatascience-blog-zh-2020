<html>
<head>
<title>Plotting charts with Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Seaborn绘制图表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotting-charts-with-seaborn-e843c7de2287?source=collection_archive---------29-----------------------#2020-09-29">https://towardsdatascience.com/plotting-charts-with-seaborn-e843c7de2287?source=collection_archive---------29-----------------------#2020-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ba40" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python库创建吸引人的图表。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/66b2c092adc113f14434840d471abb3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kTkd7b7cUsexf4L8Q17QA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a>上的<a class="ae ky" href="https://www.pexels.com/@pixabay" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><p id="bb19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Seaborn </strong> </a>是一个强大的Python库，旨在增强数据可视化。它为Matplotlib提供了大量的高级接口。Seaborn可以很好地处理数据帧，而Matplotlib不行。它能让你以更简单的方式绘制出引人注目的图表。</p><p id="374a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了更好地理解这篇文章，你需要了解熊猫和matplotlib的基础知识。如果没有，你可以参考以下关于同一的文章:</p><ol class=""><li id="bf3f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/pandas-for-data-analysis-142be71f63dc">用于数据分析的熊猫</a></li><li id="8138" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">【Matplotlib可视化</li></ol><p id="c213" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保您的系统中安装了必要的库:</p><p id="76e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用conda:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="d993" class="mo mp it mk b gy mq mr l ms mt">conda install pandas<br/>conda install matplotlib<br/>conda install seaborn</span></pre><p id="50e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用画中画:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="b76e" class="mo mp it mk b gy mq mr l ms mt">pip install pandas<br/>pip install matplotlib<br/>pip install seaborn</span></pre><p id="dafc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先导入所需的Python库和数据集。</p><p id="2dfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里找到这个教程<a class="ae ky" href="https://github.com/jendcruz22/Medium-articles/tree/master/Plotting%20charts%20with%20Seaborn" rel="noopener ugc nofollow" target="_blank">的CSV文件。</a></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="477e" class="mo mp it mk b gy mq mr l ms mt">import pandas as pd<br/>from matplotlib import pyplot as plt<br/>import seaborn as sns</span><span id="0bbd" class="mo mp it mk b gy mu mr l ms mt">df = pd.read_csv('Pokemon.csv', index_col = 0, encoding='unicode-escape')<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/2a404118d04339edb2866157a923ea52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4sy6sdriTwwr4zts40ioug.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1e67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，我们将index_col设置为0，这表示我们将第一列视为索引。</p><p id="88b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用seaborn和口袋妖怪数据集的属性，我们将创建一些非常有趣的可视化效果。我们首先要看的是散点图。</p><h2 id="ee9c" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">散点图</h2><p id="e14f" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">散点图使用点来表示不同数值变量的值。水平轴和垂直轴上每个点的位置表示单个数据点的值。它们用于观察变量之间的关系。使用“lmplot”函数在seaborn中制作散点图只需要一行代码。为此，我们将dataframe传递给data参数，然后传递x轴和y轴的列名。</p><p id="09d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，散点图还会显示一条回归线，这是一条最符合数据的直线。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="1bdb" class="mo mp it mk b gy mq mr l ms mt">sns.lmplot(x=’Attack’, y=’Defense’, data=df)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/d9b7fb1349d0fd2ac804043a8c01df0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*11igFlYoh08azGCYgFCfew.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="97a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，您可以看到我们的散点图，它显示了攻击得分与防御得分的对比。</p><p id="72e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回归线基本上向我们展示了两个轴之间的相关性。在这种情况下，它向上倾斜。这意味着当攻击得分变高时，防御得分也变高。要删除回归线，我们可以将' fitreg '参数设置为false。</p><p id="4ca4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以设置色调参数，根据口袋妖怪的进化阶段给各个情节着色。这个色调参数非常有用，因为它允许您用颜色表达第三维信息。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="4e4b" class="mo mp it mk b gy mq mr l ms mt">sns.lmplot(x=’Attack’, y=’Defense’, data=df, fit_reg=False, hue=’Stage’)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/e866c80712243bf98980c6bb48cd3ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*ybdlXFi_bdSKYdJcW9FMAg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="bed1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">散点图看起来与之前的一样，只是现在它的中间没有回归线，而且每个点的颜色也不同。这些颜色只是显示了每个口袋妖怪的阶段。阶段只是我们之前看到的数据中的另一个属性。</p><p id="efec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看这个情节，我们可以得出结论，第一阶段的口袋妖怪或者蓝点通常比更高阶段的口袋妖怪得分低。</p><h2 id="8999" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">箱线图</h2><p id="054b" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">箱线图是常用于显示数据分布的重要图之一。在seaborn中，使用boxplot函数显示一个boxplot只需要一行代码。在本例中，我们将使用整个数据帧，除了total、stage和legendary属性。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="1c15" class="mo mp it mk b gy mq mr l ms mt">df_copy = df.drop([‘Total’, ‘Stage’, ‘Legendary’], axis=1)<br/>sns.boxplot(data=df_copy)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/392bcdbc2fca9e55635cbe7c492c5b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*Wl50n6GKX3b2v-pOJpSFEg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="99df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们可以看到每个属性都有自己的箱线图。</p><p id="f6f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">箱线图基于5个数字的汇总，每个数字显示为不同的线条。中间的线是中间值，是数据集中的点。朝向箱线图末端的最下面和最上面的线是四分位数1和4的中间值，其基本上显示了分布的最小值和最大值。中间的另外两条线是四分位数2和3的中间值，显示了这些值与中间值的差异。超出此范围的单点表示数据中的任何异常值。</p><h2 id="618d" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">小提琴情节</h2><p id="5c97" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">小提琴图类似于箱线图。小提琴图是箱线图非常有用的替代品。他们显示了小提琴厚度的分布，而不仅仅是汇总统计数据。众所周知，Violin plots在分析和可视化数据集中不同属性的分布时非常方便。</p><p id="8610" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本例中，我们将使用与上例相同的数据帧拷贝。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="8cb5" class="mo mp it mk b gy mq mr l ms mt">sns.violinplot(data=df_copy)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/268f75389820603b4f8cbbf698ac6fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*mwsl5ZUvwQb0jZqFqvKfrw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="f8df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以观察口袋妖怪的每个属性的值的分布。小提琴较厚的区域意味着价值密度较高。小提琴图的中间通常较粗，这意味着那里有高密度的值。接下来，我们将可视化的攻击分数的分布比较口袋妖怪主要类型。要做到这一点，让我们使用相同的小提琴绘图方法。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="acc0" class="mo mp it mk b gy mq mr l ms mt">plt.figure(figsize=(10,6))\sns.violinplot(x='Type 1', y='Attack', data=df)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/fb86fdb8900a3f777b6468c48902f5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*rreLDRECCPmuA5VvSxNaTQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d904" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该图显示了每个口袋妖怪主要类型的攻击得分分布。正如你所看到的,“龙”型口袋妖怪有最高的攻击分数，但他们也有较高的方差，这意味着他们也有攻击分数很低。“重影”主要类型具有非常低的方差，这意味着它们的大部分数据值都集中在中心。</p><h2 id="bbe5" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">热图</h2><p id="8f0e" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">热图帮助您可视化矩阵类型的数据。例如，我们可以将口袋妖怪的不同属性之间的所有相关性可视化。</p><p id="7bb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过调用“corr”函数来计算数据帧的相关性，并使用“热图”函数绘制热图。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="e16b" class="mo mp it mk b gy mq mr l ms mt">corr = df_copy.corr()<br/>sns.heatmap(corr)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c90f5637c8dd700436759a8995d1e691.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*7akuZ_lZXfXmK_QKtQUWKw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a573" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的热图显示了我们的数据框架的相关性。</p><p id="a6be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">方框的颜色越浅，这两个属性之间的相关性越高。比如一个口袋妖怪的HP和整体速度的相关性很低。因此，黑色的盒子。血量和防御速度之间的相关性相当高，因此我们可以在热图中看到红色块。我们可以看到，当一个属性变得更高时，其他属性也变得更高，例如防守速度。</p><h2 id="0424" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">直方图</h2><p id="926d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">直方图允许您绘制数值的分布。如果我们使用matplotlib来创建直方图，与使用seaborn创建直方图相比，需要更多的工作。使用seaborn，只需要一行代码就可以创建一个发行版。</p><p id="fbab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以创建一个直方图来绘制攻击属性的分布值。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="c577" class="mo mp it mk b gy mq mr l ms mt">sns.distplot(df.Attack, color=’blue’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/5b0c394286cb79054402e159047f2a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*tTj-dKjcw_mH7PscJ5RaYQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="a7e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到大多数口袋妖怪都在50-100的范围内。这里我们看到的攻击值大于100或者小于50的口袋妖怪少多了。</p><h2 id="9b52" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">校准图</h2><p id="e704" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">与条形图类似，calplots可以让您直观地看到每个类别变量的分布。我们可以使用calplot来查看每个主要类型中有多少个口袋妖怪。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="8c52" class="mo mp it mk b gy mq mr l ms mt">sns.countplot(x=’Type 1', data=df)<br/>plt.xticks(rotation=-45)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9962a921420e94519aff948f71bfa0e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*45R8nf9rVZ9DC01EmyDmdg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="4bdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到,“水”类的口袋妖怪最多，而“精灵”类和“冰”类的口袋妖怪最少。</p><h2 id="e7f6" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">密度图</h2><p id="324a" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">密度图显示两个变量之间的分布。例如，我们可以使用密度图来比较口袋妖怪的两个属性:攻击值和防御值。我们将使用“jointplot”功能来完成这项工作。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="2089" class="mo mp it mk b gy mq mr l ms mt">sns.jointplot(df.Attack, df.Defense, kind=’kde’, color=’lightblue’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c37c60de2abdf468bedfa1b8e40f71ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*dY5QUK7EhcVQsJwQhSN19w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="82f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“kde”表示我们想要一个密度图。</p><p id="a791" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，绘图区的黑暗程度取决于该区域中有多少个值。黑色区域代表着非常强烈的关系。从这个图中我们可以看到，当攻击值在50到75之间时，防御值在50左右。</p><p id="22c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章大概就是这样。我希望您喜欢使用seaborn可视化数据。</p><blockquote class="nt nu nv"><p id="368b" class="kz la nw lb b lc ld ju le lf lg jx lh nx lj lk ll ny ln lo lp nz lr ls lt lu im bi translated">你可以在这里找到这篇文章的代码和数据集。</p></blockquote><p id="8f88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你阅读它！</p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><h2 id="a661" class="mo mp it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">参考</h2><p id="98a1" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">[1] Seaborn文件:【https://seaborn.pydata.org/ T2】</p></div></div>    
</body>
</html>