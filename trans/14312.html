<html>
<head>
<title>Separate Your Saved Songs on Spotify into Playlists of Similar Songs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您在Spotify上保存的歌曲分成相似歌曲的播放列表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/cluster-your-liked-songs-on-spotify-into-playlists-of-similar-songs-66a244ba297e?source=collection_archive---------36-----------------------#2020-10-02">https://towardsdatascience.com/cluster-your-liked-songs-on-spotify-into-playlists-of-similar-songs-66a244ba297e?source=collection_archive---------36-----------------------#2020-10-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/01150fefd764196835c03a7eb312f676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZBrIrzXBnEOvFabUO4YKw.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@mohammadmetri" rel="noopener ugc nofollow" target="_blank"> <strong class="bd je">默罕默德</strong> </a>上<strong class="bd je"> </strong> <a class="ae jd" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> <strong class="bd je">下</strong> </a></p></figure><div class=""/><div class=""><h2 id="b332" class="pw-subtitle-paragraph ke jg jh bd b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dk translated">探索音频特征，对情绪进行分类，并建立机器学习方法</h2></div><p id="d081" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">答</span>几周前，我偶然看到一篇有趣的文章，题为“使用Spotify API和Python进行音乐品味分析”。在这篇文章中，作者试图分析他和未婚妻的偏好，以确定数据对此有何说明。因此，他同时比较了Spotify的API提供的两种不同的音乐特征。在阅读它的时候，我很好奇，不仅分析了我自己的偏好，还玩了我的Spotify数据。因此，我想将我在Spotify上保存的歌曲集中到单独的播放列表中，这些播放列表将代表我在听这些歌曲时的特定心情。</p><blockquote class="mb mc md"><p id="f479" class="kw kx me ky b kz la ki lb lc ld kl le mf lg lh li mg lk ll lm mh lo lp lq lr ij bi translated">所以为了完成我的任务，我把我的目标分成几个独立的任务:</p></blockquote><ul class=""><li id="a82a" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">获取数据</li><li id="ca1f" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">构建聚类模型</li><li id="2a00" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">找出一个合适的分类器，并根据获得的数据进行训练</li><li id="a0c4" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">对我的歌曲进行分类，并将其分成播放列表</li><li id="ed66" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">将建议分类</li></ul><p id="d905" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，值得一提的是，Twitter、Slack和脸书Spotify也为开发者提供了一个API，用于探索他们的音乐数据库，并深入了解我们的收听习惯。它提供了各种各样的功能；然而，我用了8个特征来描述一首歌。</p><ul class=""><li id="b5ee" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><strong class="ky ji">声学值</strong>:<em class="me">描述一首歌曲的声学程度。</em></li><li id="c6b6" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">可跳舞性</strong> <strong class="ky ji">值:</strong> " <em class="me">描述了一首曲目根据音乐元素(包括速度、节奏稳定性、节拍强度和整体规律性)的组合适合跳舞的程度。"</em>因此，我决定不使用tempo，因为我相信这个特征是从他们那里得到的<em class="me">。</em></li><li id="75a8" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">活跃度值:</strong> <em class="me">“描述歌曲被现场观众录制的概率”。</em></li><li id="0d3e" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">能量值:</strong><em class="me">代表强度和活跃度的感知度量。通常，充满活力的曲目感觉起来又快又吵。</em></li><li id="d7b3" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">乐器性值:</strong>“<em class="me">预测音轨是否不包含人声。”在这种情况下,“Ooh”和“aah”音被视为乐器声。Rap或口语词轨道明显是“有声的”。“乐器度”值越接近1.0，轨道不包含声乐内容的可能性就越大。”</em></li><li id="3b01" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">响度值:</strong>显示音乐的音量有多大。</li><li id="2cd1" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">语音值:</strong> <em class="me">“检测音轨中是否存在语音单词。”</em></li></ul><p id="ab54" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">关于所提供的不同功能的更多信息:</strong> <a class="ae jd" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ji">获取音轨的音频功能| Spotify for Developers </strong> </a></p><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mw"><img src="../Images/7a93ed5bea7aa90497d3afb4cbc7f08b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vu4J3gtJoXVRNONGUsiTA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@sgcreative" rel="noopener ugc nofollow" target="_blank">@<strong class="bd je">sgcdesignco</strong></a><strong class="bd je"/><strong class="bd je"/><a class="ae jd" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"><strong class="bd je">Unsplash</strong></a></p></figure><h2 id="89c9" class="nb nc jh bd nd ne nf dn ng nh ni dp nj lf nk nl nm lj nn no np ln nq nr ns nt bi translated">实验装置</h2><p id="6ab9" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">当我提到每个特征所代表的含义时，我想强调一下我在聚类任务中使用的数据集。聚类将使用KMeans聚类算法导出，该算法在<a class="ae jd" href="https://www.kaggle.com/yamaerenay/spotify-dataset-19212020-160k-tracks" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上找到的Spotify数据集1921–2020上进行了训练。Spotify数据集1921–2020包含从Spotify Web API收集的超过160 000首歌曲，您还可以在数据部分找到按艺术家、年份或流派分组的数据。</p><blockquote class="mb mc md"><p id="200b" class="kw kx me ky b kz la ki lb lc ld kl le mf lg lh li mg lk ll lm mh lo lp lq lr ij bi translated">正常化响度</p></blockquote><p id="21d8" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑到提到的所有其他特征都具有范围为[0，1]的值，重要的是将响度值的范围从0降低到-60 dB。因此，我使用sklearn MinMaxScaler将响度特性标准化，使其值介于0和1之间。</p><pre class="mx my mz na gt nz oa ob oc aw od bi"><span id="365c" class="nb nc jh oa b gy oe of l og oh"><strong class="oa ji">from</strong> <strong class="oa ji">sklearn</strong> <strong class="oa ji">import</strong> preprocessing <br/>scaler=preprocessing.MinMaxScaler() <em class="me">#instantiate a scaler</em><br/><em class="me">#all the feature values are in the range [0,1] ,except of loudnes</em><br/><em class="me">#so let's scale it to fit the exact same range</em></span><span id="8e8a" class="nb nc jh oa b gy oi of l og oh">loudness=X["loudness"].values<br/>loudness_scaled=scaler.fit_transform(loudness.reshape(-1, 1))</span></pre><h1 id="4399" class="oj nc jh bd nd ok ol om ng on oo op nj kn oq ko nm kq or kr np kt os ku ns ot bi translated">调整K-均值聚类算法</h1><p id="b017" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">我最终使用了K-Means聚类算法，该算法用于确定数据的分布。它是一种无监督学习算法，通过计算到质心的距离将相似的数据点分组到<em class="me"> k </em>组。为了达到这个目标，它寻找预定数量(<em class="me"> k </em>)的聚类。</p><p id="d7a9" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了得出一个合适的k值，我用了一个众所周知的方法叫做<strong class="ky ji">肘法。</strong>因此，通过对<em class="me"> k的范围(例如</em>1–20)运行K均值，我们可以得到下图:</p><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/2c89a38534640ae733126e9e6317ddab.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*8Lj_D55JCT6QHSBBlXcyYw.png"/></div></figure><p id="5f92" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们将碎石图视为一座山，我们需要找出一个点，在那里我们的“山”结束，而“碎石”开始，因为直到该点，我添加的每个聚类的方差都有一个实质性的减少，在该点之后，有一个边际减少。因此，对于我的情况来说，值5似乎是最佳的。但也不是完全生动，所以有时候可以由一个人来决定。</p><h1 id="f013" class="oj nc jh bd nd ok ol om ng on oo op nj kn oq ko nm kq or kr np kt os ku ns ot bi translated">使用主成分分析描述和可视化聚类</h1><p id="b37b" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">考虑到我们的聚类任务使用了8种不同的特征，很难将数据可视化。因此，有一些常用的技术来降低数据的维度。我使用了主成分分析(PCA ),它降低了维数，但仍然保留了重要的信息。PCA同样用于加速学习过程；然而，我不打算在这篇文章中深究细节。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/1d61b39e69b3e0bba2b7b748b0a13307.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*n3uBmFl6gw1Gm1Z3-yWu1Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用KMeans获得的聚类</p></figure><p id="9408" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图显示了我们在2维空间中的5个集群。很明显，群集0可能很难与群集2和1区分开。同时，衍生出的其他聚类之间也存在明显的差异。</p><ul class=""><li id="981a" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">因为所有歌曲的平均值是0.87，所以聚类0 在语音方面非常高。如果一首歌曲的语音度高于0.66，它可能是由口语词组成的，0.33到0.66之间的分数是一首可能同时包含音乐和词的歌曲，而低于0.33的分数意味着这首歌曲没有任何语音。此外，它的工具性较低，但舞蹈性相当高。我想大部分是说唱歌曲。</li><li id="e3cb" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">集群1 </strong>的可舞性和能量相对较高，但工具性较低。我期待在那里看到很多充满活力的歌曲。</li><li id="bd6b" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">集群2 </strong>音响性很高，但乐器性和响度较低。此外，它还具有相当高的可跳性。所以，我期待看到更平静，或许悲伤的歌曲。</li><li id="4ee3" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated">第3簇的声音和乐器性最高，但语音最低。</li><li id="cc39" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">第4组</strong>乐器性和能量相当高，可舞性一般。同样，它的语速也相对较低。</li></ul><h2 id="59bc" class="nb nc jh bd nd ne nf dn ng nh ni dp nj lf nk nl nm lj nn no np ln nq nr ns nt bi translated">识别最佳分类器</h2><p id="a801" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">考虑到我们获得了标签作为我们的聚类，我们可以轻松地实现一个分类算法，这将有助于对我们在Spotify上保存的歌曲进行分类。此外，它将允许我们对推荐的歌曲进行分类，并将它们分成不同的播放列表。</p><blockquote class="mb mc md"><p id="cf30" class="kw kx me ky b kz la ki lb lc ld kl le mf lg lh li mg lk ll lm mh lo lp lq lr ij bi translated">重要提示:同样，只有一个响度特征是用相同的定标器归一化的；然而，重要的是要注意，我们需要使我们的定标器只适合于训练集，并对测试集和训练集都应用转换，以避免数据泄漏。在这篇文章中，我不打算深究细节。</p></blockquote><pre class="mx my mz na gt nz oa ob oc aw od bi"><span id="40a2" class="nb nc jh oa b gy oe of l og oh">X_train[:,5]=scaler.fit_transform(X_train[:,5].reshape(-1, 1)).reshape(-1,)<br/>X_test[:,5]=scaler.transform(X_test[:,5].reshape(-1, 1)).reshape(-1,)</span></pre><p id="289d" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据准确率得分比较了四种模型，分别是K近邻分类器、随机森林分类器、支持向量分类器和朴素贝叶斯。支持向量分类器被证明是在准确性分数方面最好的模型，其组成大约为0.998，因此我们将使用它来进行未来的分类。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/5aa40c99cebd59832fdd034031144e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*FNU8VTNv11u8Td4p5nwkEg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">SVC显示的混淆矩阵</p></figure><h1 id="12b4" class="oj nc jh bd nd ok ol om ng on oo op nj kn oq ko nm kq or kr np kt os ku ns ot bi translated">预测我在Spotify上保存的歌曲</h1><p id="0881" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">Spotify的API提供了一套有用的功能。因此，我们能够获得我们保存的所有歌曲的数据集。所以，我会用上面提到的分类器对我喜欢的歌进行分类。最后，我们将我的歌曲分成5个不同的播放列表，并尝试分析它们。</p><pre class="mx my mz na gt nz oa ob oc aw od bi"><span id="20fb" class="nb nc jh oa b gy oe of l og oh">offset = 0<br/>songs = []<br/>names = []<br/>ids = []<br/><strong class="oa ji">while</strong> <strong class="oa ji">True</strong>:<br/>    content = sp.current_user_saved_tracks(limit=50, offset=offset)<br/>    songs += content['items']<br/>    <strong class="oa ji">if</strong> content['next'] <strong class="oa ji">is</strong> <strong class="oa ji">not</strong> <strong class="oa ji">None</strong>:<br/>        offset += 100<br/>    <strong class="oa ji">else</strong>:<br/>        <strong class="oa ji">break</strong><br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> songs:<br/>    names.append(i['track']['name'])<br/>    ids.append(i['track']['id'])<br/>index=0<br/>audio_features=[]<br/><strong class="oa ji">while</strong> index &lt; len(ids):<br/>    audio_features += sp.audio_features(ids[index:index + 50])<br/>    index += 50<br/>features_list = []<br/><strong class="oa ji">for</strong> features <strong class="oa ji">in</strong> audio_features:<br/>    features_list.append([features['acousticness'], features['danceability'],<br/>                          features['liveness'],features['energy'],<br/>                          features['instrumentalness'], features['loudness'],<br/>                          features['speechiness']])<br/><br/>mydf = pd.DataFrame(features_list, columns=["acousticness", "danceability", "liveness","energy", "instrumentalness", "loudness", "speechiness"],index=ids)</span></pre><figure class="mx my mz na gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ox"><img src="../Images/74b4b2afb11755b1955618be090c4e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZGENIfZ3UAKtUbZ3LjeIw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">分类歌曲</p></figure><p id="45d2" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图显示了我喜欢的歌曲使用SVC分类。最后，我听了每个集群的歌曲列表，得出了以下解释:</p><ul class=""><li id="338a" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">正如我所料，绝大多数歌曲都是说唱歌曲。因此，如果我想听一些激进的说唱来振奋我的精神，我会听他们。</li></ul><p id="d0ee" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><ul class=""><li id="f33a" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><strong class="ky ji">集群1 </strong>包含大部分精力充沛且适合跳舞的歌曲。</li></ul><p id="861e" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="d1da" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有趣的是，肖恩·蒙德兹的所有歌曲都属于这一类。</p><ul class=""><li id="143b" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><strong class="ky ji"> Cluster 2 </strong>由很多缓慢而平静的歌曲组成。因此，我给它贴上平静或浪漫音乐的标签。</li></ul><p id="3090" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="183f" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我保存的Joji的歌几乎都属于这一类，在我看来已经足够公平了。</p><ul class=""><li id="cdab" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated"><strong class="ky ji">集群3 </strong>包含了很多通常没有歌词的歌曲。如果我想集思广益或学习，我会听他们。</li></ul><p id="d461" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><ul class=""><li id="fbd0" class="mi mj jh ky b kz la lc ld lf mk lj ml ln mm lr mn mo mp mq bi translated">第四组主要是一些令人放松的歌曲。</li></ul><p id="cc47" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">示例:</p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><blockquote class="mb mc md"><p id="bc56" class="kw kx me ky b kz la ki lb lc ld kl le mf lg lh li mg lk ll lm mh lo lp lq lr ij bi translated">现在让我们分析一下我对Spotify上音乐的偏好。</p></blockquote><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/75a9eb44d5caeedac38cc162ef9afac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*nniEPXkaf_FvNjQsQbPN7Q.png"/></div></figure><p id="8028" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图展示了我喜欢的歌曲数据集中使用的所有特征的平均值。因此，我推断我通常会听一些可舞性和能量都很高的歌曲。我从未想到过那件事，但现在我意识到那确实是真的。然而，我也时不时听听浪漫的，也许是悲伤的歌曲。</p><figure class="mx my mz na gt is gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/1838a16308fa3a98aedd8410c142d9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*iiy1BzTA5cAVWyZTzBdqJg.png"/></div></figure><p id="f2a7" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的饼状图证明了我喜欢的歌曲中有80%属于活力/舞曲类。</p><p id="5571" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我把我的歌分成5个不同的播放列表，代表这些类别。</p><pre class="mx my mz na gt nz oa ob oc aw od bi"><span id="9bba" class="nb nc jh oa b gy oe of l og oh">clustered_songs=list(zip(mydf.index,mydf.iloc[:,-1]))</span><span id="1126" class="nb nc jh oa b gy oi of l og oh">sorted_songs=[[],[],[],[],[]]<br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> range(len(clustered_songs)):<br/>    sorted_songs[clustered_songs[i][1]].append(clustered_songs[i][0])</span><span id="63ad" class="nb nc jh oa b gy oi of l og oh">playlists=[]<br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> range(5):<br/>    playlist_created=sp.user_playlist_create(username, name="Cluster "+str(i), public=<strong class="oa ji">False</strong>,description='')<em class="me">#create playlists for a corresponding cluster</em><br/>    sp.user_playlist_add_tracks(username,playlist_created['id'],sorted_songs[i][:100]) <em class="me">#add new songs</em><br/>    playlists.append(playlist_created)</span></pre><h2 id="4c3f" class="nb nc jh bd nd ne nf dn ng nh ni dp nj lf nk nl nm lj nn no np ln nq nr ns nt bi translated">对推荐歌曲进行分类</h2><p id="5c93" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">作为我们实验的最后一步，我将请求根据我保存的歌曲生成Spotify推荐。</p><pre class="mx my mz na gt nz oa ob oc aw od bi"><span id="9b15" class="nb nc jh oa b gy oe of l og oh">rec_tracks = []<br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> mydf.index.tolist():<br/>    rec_tracks += sp.recommendations(seed_tracks=[i], limit=5)['tracks'] <em class="me">#get recommendations from Spotify</em><br/><br/>rec_track_ids = []<br/>rec_track_names = []<br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> rec_tracks:<br/>    rec_track_ids.append(i['id']) <em class="me">#extract id and name of songs</em><br/>    rec_track_names.append(i['name'])<br/><br/>rec_features = []<br/><strong class="oa ji">for</strong> i <strong class="oa ji">in</strong> range(0,len(rec_track_ids)):<br/>    rec_audio_features = sp.audio_features(rec_track_ids[i]) <em class="me">#extract features</em><br/>    <strong class="oa ji">for</strong> track <strong class="oa ji">in</strong> rec_audio_features:<br/>        rec_features.append(track)<br/>        <br/>rec_playlist_df = pd.DataFrame(rec_features, index = rec_track_ids) <em class="me">#make a dataframe</em></span></pre><p id="d721" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我对我获得的所有歌曲进行分类，并通过添加新的推荐歌曲来更新我创建的播放列表。让我们看看获得的歌曲是否符合我们的播放列表。</p><blockquote class="mb mc md"><p id="edc3" class="kw kx me ky b kz la ki lb lc ld kl le mf lg lh li mg lk ll lm mh lo lp lq lr ij bi translated">新增</p></blockquote><p id="a3da" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">集群0: </strong></p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="b822" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">集群1: </strong></p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="005f" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有趣的是，还增加了几首法国歌曲。我认为那是他的风格。</p><p id="3b56" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">集群2: </strong></p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="b8fb" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管这是一首说唱歌曲，但风格和音乐符合播放列表。</p><p id="82a8" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">集群3: </strong></p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="ef4d" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">集群4: </strong></p><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="mx my mz na gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="e9fa" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:使这个集群不同于上面列出的其他两个集群的特征是它的低速度。</p><h1 id="8110" class="oj nc jh bd nd ok ol om ng on oo op nj kn oq ko nm kq or kr np kt os ku ns ot bi translated">结论</h1><p id="8c02" class="pw-post-body-paragraph kw kx jh ky b kz nu ki lb lc nv kl le lf nw lh li lj nx ll lm ln ny lp lq lr ij bi translated">总而言之，这些推荐是基于我保存的所有曲目的数据集(而不是基于单个播放列表)生成的。因此，我相信一个分类器可以很好地将它们分成5个不同的播放列表。我认为这项工作非常有趣，对于刚刚开始旅程的人来说是很好的实践，因为它同时包括了ML的各个领域。在这项工作中，我在公共Spotify数据集上训练了KMeans聚类算法。此外，我想出了一个分类器，帮助我将喜欢的歌曲分类到播放列表中，每个播放列表代表一种独特的风格/情绪。</p><p id="210a" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">源代码在我的<a class="ae jd" href="https://github.com/chingisooinar/Clustering-my-songs-on-Spotify" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ji"> Github上有。</strong>T3】</a></p><h1 id="d1d2" class="oj nc jh bd nd ok ol om ng on oo op nj kn oq ko nm kq or kr np kt os ku ns ot bi translated">创建了指向我的播放列表的链接</h1><ul class=""><li id="c2fd" class="mi mj jh ky b kz nu lc nv lf pc lj pd ln pe lr mn mo mp mq bi translated">【https://open.spotify.com/playlist/6dL6xOCcema8DUSzYLfx06】集群0(说唱):<a class="ae jd" href="https://open.spotify.com/playlist/6dL6xOCcema8DUSzYLfx06" rel="noopener ugc nofollow" target="_blank"/></li><li id="ded9" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji"> Cluster1(活力/舞蹈):</strong><a class="ae jd" href="https://open.spotify.com/playlist/0LlIHqBd2zOHemZ3c7j6Ov" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/playlist/0LlIHqBd2zOHemZ3c7j6Ov</a></li><li id="6976" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji"> Cluster2(冷静/浪漫):</strong><a class="ae jd" href="https://open.spotify.com/playlist/4mF1KkRP5YITPTf1dakXJP" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/playlist/4mF1KkRP5YITPTf1dakXJP</a></li><li id="34ad" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji">集群3(学习/思考)</strong>:<a class="ae jd" href="https://open.spotify.com/playlist/4xRgEf6Y4iBs3I3WNNofMr" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/playlist/4xRgEf6Y4iBs3I3WNNofMr</a></li><li id="322e" class="mi mj jh ky b kz mr lc ms lf mt lj mu ln mv lr mn mo mp mq bi translated"><strong class="ky ji"> Cluster4(寒气)【https://open.spotify.com/playlist/5FtCtZ5QrpQDlXxIB9DMEi】:<a class="ae jd" href="https://open.spotify.com/playlist/5FtCtZ5QrpQDlXxIB9DMEi" rel="noopener ugc nofollow" target="_blank"/></strong></li></ul><p id="1584" class="pw-post-body-paragraph kw kx jh ky b kz la ki lb lc ld kl le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ji">参考文献:</strong></p><div class="ip iq gp gr ir pf"><a href="https://medium.com/r?url=https%3A%2F%2Ftowardsdatascience.com%2Fa-music-taste-analysis-using-spotify-api-and-python-e52d186db5fc" rel="noopener follow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ji gy z fp pk fr fs pl fu fw jg bi translated">重定向你-媒体</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">编辑描述</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">medium.com</p></div></div></div></a></div><div class="ip iq gp gr ir pf"><a rel="noopener follow" target="_blank" href="/is-my-spotify-music-boring-an-analysis-involving-music-data-and-machine-learning-47550ae931de"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ji gy z fp pk fr fs pl fu fw jg bi translated">我的Spotify音乐很无聊吗？涉及音乐、数据和机器学习的分析</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">使用Spotify的音频功能API、数据和机器学习，我调查了我保存的歌曲有多无聊。</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">towardsdatascience.com</p></div></div><div class="po l"><div class="pp l pq pr ps po pt ix pf"/></div></div></a></div><div class="ip iq gp gr ir pf"><a href="https://medium.com/@RareLoot/extracting-spotify-data-on-your-favourite-artist-via-python-d58bc92a4330" rel="noopener follow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ji gy z fp pk fr fs pl fu fw jg bi translated">通过Python提取您最喜欢的艺术家的Spotify数据</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">Spotify是世界上最受欢迎的流媒体平台之一。他们也有一个API供开发者使用…</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">medium.com</p></div></div><div class="po l"><div class="pu l pq pr ps po pt ix pf"/></div></div></a></div><div class="ip iq gp gr ir pf"><a href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ji gy z fp pk fr fs pl fu fw jg bi translated">获取音轨的音频功能|面向开发者的Spotify</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">需要路径参数授权。来自Spotify帐户服务的有效访问令牌:参见Web API…</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">developer.spotify.com</p></div></div><div class="po l"><div class="pv l pq pr ps po pt ix pf"/></div></div></a></div></div></div>    
</body>
</html>