<html>
<head>
<title>Getting Group Behavior Insights Through Discord Servers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Discord服务器获得群体行为洞察</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-group-behavior-insights-through-discord-servers-732e4941d8f8?source=collection_archive---------27-----------------------#2020-11-07">https://towardsdatascience.com/getting-group-behavior-insights-through-discord-servers-732e4941d8f8?source=collection_archive---------27-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="551a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分析不和谐信息数据如何提供关于社交媒体行为和社交团体的有价值的见解。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/355d94f7179622bab1ec21fdeecb0841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWtsKIW0RXO0yyHtL-vqng.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@chewy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">耐嚼</a>在<a class="ae kv" href="https://unsplash.com/s/photos/friend?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="6c00" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="e17d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在浏览互联网的时候，社交媒体基本上是不可避免的。几乎每个人都因为各种原因使用至少一个社交媒体平台，它们通常代表了一个人社交生活的重要部分。</p><p id="2b8e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">正是因为这个原因，分析社交媒体平台中的行为数据是了解人们，甚至是群体的一种很好的方式。在基于聊天的社交媒体平台上，这种群体洞察变得更加明显。</p><p id="68c3" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">出于这个原因，我将向您展示如何获得Discord、消息传递数据，并为分析做好准备，以及使用一点点。您可以跟随包含本文代码的<a class="ae kv" href="https://colab.research.google.com/gist/ThiagoFPMR/a8403f3ae1ecc8557b136d25e90d475f/discord-analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> google colab。</a></p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="3c21" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">数据</h1><p id="5ea8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在一个基于聊天的平台中，特别是像Discord这样的服务器被分成多个频道的平台，在制作数据集时，我们可以跟踪许多变量。</p><p id="f110" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">对于我将在这里使用的数据，所有消息都来自同一个通道，这意味着我们不需要跟踪消息被发送到哪里。对于我们将要进行的分析来说，所有重要的变量是消息的作者、消息发送的时间以及消息本身的内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们将使用的数据框，总共包含3列。</p></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="4015" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">在开始之前</h1><p id="9c32" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">当处理这样的数据时，如果这些数据包含其他人的姓名(在本例中是用户名)，而这些人不一定允许您公开他们的信息，您应该始终匿名化这些数据，以避免任何不必要的问题，同时也尊重他们的隐私。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="04b2" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">准备数据</h1><p id="7f7b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在我们开始分析之前，我们必须确保我们的数据包含我们需要的一切。</p><p id="145a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">使用Pandas查看文件概述后，您应该会注意到数据集中有丢失的值。其背后的原因是，在这个数据集中，在消息中发送的图像和嵌入被表示为NaN值。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="3b26" class="ni kx iq ne b gy nj nk l nl nm">data.info()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/7283c74f39722bffd49c8ccc9da254a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*SXiOT2PSm8yPkhy4ai4ldA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用<strong class="bd no"> DataFrame.info() </strong>方法获得数据集的概览。</p></figure><p id="6865" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">由于这些消息只代表了数据集的一小部分，对我们没有任何用处，我们可以简单地丢弃它们。我们还应该将time列转换成<em class="np"> DateTime </em>以便更容易地处理日期。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="e752" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一旦我们解决了这个问题，我们就可以专注于做一些更好的工作来分析更多的列。例如消息中包含什么表情或者每条消息有多少单词。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="719f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">除了我们都习惯的常规表情符号，discord还有专属的公会表情符号，可以是动画的，也可以不是。为了表示所有这三种表情，我们将为每一种表情添加一个单独的列，每一列都由包含消息中发送的该类型的所有表情的数组组成。</p><p id="21c6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">要创建这些数组，我们可以使用正则表达式来识别哪些消息包含表情，然后将它们添加到各自的列中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="b918" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我利用python的表情库更容易地从消息中提取表情，因为并非所有表情都符合我使用的正则表达式模式。</p><p id="97ac" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">之后，我们只需将字数统计列添加到数据框中，就可以开始处理数据了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="63ab" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">分析数据</h1><p id="81f0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">有了转换后的数据集，我们可以开始分析，以深入了解我们的消息传递历史数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在经历了所描述的整个过程之后，数据帧的前5行。</p></figure><p id="ad01" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">例如，我们可以进行的一种可能的分析是，观察服务器中的用户活动在整个数据集内的表现，该数据集包含来自该服务器的一年多的信息。</p><p id="1d18" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然而，在这样做的时候，我们遇到了一个问题，即有太多的作者，他们中的许多人缺乏足够的数据来为分析做出任何实质性的贡献。</p><p id="b1a8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是因为数据还包括来自服务器中不活动的机器人和用户的消息，因此不会告诉我们关于整个群体的任何信息。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="c073" class="ni kx iq ne b gy nj nk l nl nm">fig = px.histogram(data, x='author', title='Messages Sent Per Author', labels={'author':'Author'})</span><span id="9b1e" class="ni kx iq ne b gy nq nk l nl nm">fig.update_layout(title_font_size=30, template='plotly_white')</span><span id="e53b" class="ni kx iq ne b gy nq nk l nl nm">fig.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">列出的大多数作者在服务器历史上几乎没有发送过消息。</p></figure><p id="2915" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">通过设置一个最小的消息量作为基线，去掉发送少于这个数量的作者，我们可以过滤掉那些没有贡献足够数据的作者。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="a2dc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">有了更少的作者，他们都贡献了大量的消息，我们最终可以绘制一个图表，更好地表示服务器中用户活动随时间的变化。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="805c" class="ni kx iq ne b gy nj nk l nl nm">fig = px.histogram(data, x='time', color='author', opacity=0.5, title="User Activity Over Time", labels={'time':'Date'})</span><span id="4c39" class="ni kx iq ne b gy nq nk l nl nm">fig.update_layout(barmode='overlay', title_font_size=30, template='plotly_white')</span><span id="f5d8" class="ni kx iq ne b gy nq nk l nl nm">fig.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr nc l"/></div></figure><p id="7347" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">通过缩小时间窗口，您可以深入了解服务器最近的活动情况，甚至可以发现服务器在一天中的哪些时段最活跃。</p><p id="825e" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们还可以画出每个作者发送的消息总量，看看谁是最活跃的，以及服务器成员在频率上如何比较。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="bab8" class="ni kx iq ne b gy nj nk l nl nm">fig = px.bar(x=data.author.value_counts().index, y=data.author.value_counts(), color=data.author.value_counts().index, title='Messages Sent per User', labels={'x': 'Author', 'y': 'Messages Sent'})</span><span id="2a6a" class="ni kx iq ne b gy nq nk l nl nm">fig.update_layout(title_font_size=30)</span><span id="b3d0" class="ni kx iq ne b gy nq nk l nl nm">fig.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr nc l"/></div></figure><p id="c8ff" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">请注意，上图计算了数据帧中包含的所有已发送消息。您还可以限制时间范围以获得更多的最新数据，而不是考虑这么大的时间窗口。</p><p id="aa95" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">并且，通过对数据集进行简单的过滤，您可以用同一个图来表示包含某个字符串但仍被作者划分的消息的数量。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="bfea" class="ni kx iq ne b gy nj nk l nl nm">term = 'LOL'<br/>term_data = data[data.content.str.contains(term)]</span><span id="838b" class="ni kx iq ne b gy nq nk l nl nm"># The exact same plot, but replaced data by term_data</span><span id="aa48" class="ni kx iq ne b gy nq nk l nl nm">fig = px.bar(x=term_data.author.value_counts().index, y=term_data.author.value_counts(), color=term_data.author.value_counts().index, title=f'Messages Containing "{term}" Per User', labels={'x': 'Author', 'y': 'Messages Sent'})</span><span id="ed42" class="ni kx iq ne b gy nq nk l nl nm">fig.update_layout(title_font_size=30, template='plotly_white')</span><span id="7ebd" class="ni kx iq ne b gy nq nk l nl nm">fig.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr nc l"/></div></figure><p id="60b4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">另一种可能的分析是绘制和比较每个用户发送的表情的总量，同时也根据表情的类型对它们进行划分，例如，这可以指示组中谁有nitro，因为只有那些有nitro的用户才能发送动画表情。</p><p id="8016" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然而，对于这个图，首先，我们需要将数据框转换成“整齐”的格式，这就是Pyplot用于条形图的格式，就像我们将要绘制的这样。我们可以通过使用<strong class="lq ir"> <em class="np"> pd.melt() </em> </strong>方法来做到这一点，这是一种非常有用的方法，可以轻松地将数据帧转换为“整齐”的格式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">将emote列从数组转换为整型，并应用<strong class="ak"> <em class="ns"> pd.melt( </em> </strong>)方法。</p></figure><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="5a24" class="ni kx iq ne b gy nj nk l nl nm">fig = px.bar(data_line, x ='author', y='value', color='variable', labels={'value':'Emotes Sent', 'author':'Author'}, title="Emotes Sent per User")</span><span id="b70c" class="ni kx iq ne b gy nq nk l nl nm">fig.update_layout(title_font_size=30, template='plotly_white')</span><span id="012f" class="ni kx iq ne b gy nq nk l nl nm">fig.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr nc l"/></div></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="65a9" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">结论</h1><p id="7e6c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在所有这些例子之后，应该很明显，从聊天数据中可以获得很多潜在的洞察力，比如来自Discord服务器的聊天数据。</p><p id="0bef" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">从洞察某人的日常行为到他们作为更广泛群体的一部分的行为，来自社交媒体的数据是发现人们新事物的最佳方式之一，这就是为什么它值得更多关注</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="d3cd" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">参考</h1><p id="08fa" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">本文的灵感来自以下两个处理类似数据分析的仓库，但分别用于WhatsApp和Telegram:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/kurasaiteja/Whatsapp-Analysis" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">kurasaiteja/Whatsapp-分析</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码、管理项目和构建…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://github.com/expectocode/telegram-analysis" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">预期代码/电报分析</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">一个处理telegram-history-dump Venn _ userlist . py输出的工具:比较聊天之间的用户重叠…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>