<html>
<head>
<title>A Simple Breakout Trading Strategy in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的简单突破交易策略</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-breakout-trading-strategy-in-python-eb043b868d8e?source=collection_archive---------10-----------------------#2020-10-02">https://towardsdatascience.com/a-simple-breakout-trading-strategy-in-python-eb043b868d8e?source=collection_archive---------10-----------------------#2020-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1ab0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对客观的系统突破策略进行编码和回溯测试</h2></div><p id="9d35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">注来自《走向数据科学》的编辑:</em> </strong> <em class="le">虽然我们允许独立作者根据我们的</em> <a class="ae lf" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="le">规则和指导方针</em> </a> <em class="le">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae lf" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="le">读者术语</em> </a> <em class="le">。</em></p><p id="dd8f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我刚刚出版了一本新书《Python中的<strong class="kk iu"><em class="le"/></strong>新技术指标》。它对复杂的交易策略进行了更完整的描述和补充，Github页面致力于不断更新代码。如果你对此感兴趣，请随时访问下面的链接，或者如果你喜欢购买PDF版本，你可以在Linkedin上联系我。</p><div class="lg lh gp gr li lj"><a href="https://www.amazon.com/gp/product/B09919GQ22/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B09919GQ22&amp;linkCode=as2&amp;tag=sofien-20&amp;linkId=bc5df3f6ab0f3af2df79641c56b949ba" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">交易策略之书</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">亚马逊网站:交易策略之书(9798532885707): Kaabar，Sofien:书籍</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">www.amazon.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx ly lj"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="b0aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">交易分为许多不同的策略，依赖于趋势跟踪、均值回归、波动性或其他因素。成功的策略依赖于当前的市场状态，例如，当市场趋势强劲时，均值回归策略往往会失败，因此我们必须相应地调整我们的市场方法。下面是一个突破策略，它使用了一个叫做唐奇安通道的指标。基本的想法是让区间尽可能客观(即可以衡量)，然后在突破时交易(即趋势的开始)。因此，本文的目的是看这个指标是否能增加我们整个交易系统的价值。它能提供好的信号吗？这些触发因素值得认真对待吗？</p><h1 id="aa01" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">唐奇安海峡</h1><p id="7db1" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">理查德·唐奇安创造了这个简单而伟大的指标，用来识别突破和反转。就像布林线一样，它的使用方式也差不多。我们的目标是通过超越或突破任何障碍来客观地确定区间出场。它的形成方法是首先计算最近n个周期高点的最大值和最近n个周期低点的最小值，然后计算它们的平均值。这给了我们三个小节:唐奇安高频带、低频带和中频带。下面是数学公式，随后是用于OHLC数据结构的Python代码。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/523e1dd95c08d3a97a3f84dafa4dc833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*DH4FKqYOB22TlxwMIBhvNw.png"/></div></figure><pre class="ne nf ng nh gt nk nl nm nn aw no bi"><span id="5bad" class="np mh it nl b gy nq nr l ns nt">def donchian(Data, low, high, where_up, where_down, median, period):<br/>    <br/>    for i in range(len(Data)):<br/>        try:<br/>            Data[i, where_up] = max(Data[i - period:i + 1, 1])<br/>        except ValueError:<br/>            pass<br/>    for i in range(len(Data)):<br/>        try:<br/>            Data[i, where_down] = min(Data[i - period:i + 1, 2]) <br/>        except ValueError:<br/>            pass        <br/>    for i in range(len(Data)): <br/>        try:<br/>            Data[i, median] = (Data[i, where_up] + Data[i, where_down]) / 2 <br/>        except ValueError:<br/>            pass</span><span id="7b37" class="np mh it nl b gy nu nr l ns nt">donchian(Data, 2, 1, 4, 5, 6, 20)</span><span id="2d5c" class="np mh it nl b gy nu nr l ns nt">'''<br/>plt.plot(Data[-500:, 3], color = 'black')<br/>plt.plot(Data[-500:, 4])<br/>plt.plot(Data[-500:, 5])<br/>plt.plot(Data[-500:, 6])<br/>plt.grid()</span><span id="5444" class="np mh it nl b gy nu nr l ns nt">'''</span></pre><p id="8142" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从视觉上看，唐奇安通道似乎包围了价格，这是可以理解的，因为它考虑了当前的极端情况，因此市场永远不会位于通道之外。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/ccc4ca71f8a7a5945417c48ef541d1c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rbjMOBpPCv5NyZlwET0xUg.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">欧元兑美元H3时间框架和20期唐奇安通道。</p></figure><h1 id="6fc4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">制定战略</h1><p id="0f6f" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">唐奇安海峡的基本战略是突围战略。它直观而清晰，下面是规则:</p><ul class=""><li id="2ba3" class="oe of it kk b kl km ko kp kr og kv oh kz oi ld oj ok ol om bi translated">当市场超过最后一个上升通道时买入。</li><li id="274a" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated"><strong class="kk iu">每当市场突破最后一个较低通道时，卖出(做空)。</strong></li></ul><pre class="ne nf ng nh gt nk nl nm nn aw no bi"><span id="7c68" class="np mh it nl b gy nq nr l ns nt">def donchian_signals(Data, onwhat, donch_up, donch_down):<br/>    <br/>    for i in range(len(Data)):<br/>        <br/>          if Data[i, where_close] &gt; Data[i - 1, donch_up]:<br/>              Data[i, 6] = 1<br/>         <br/>          elif Data[i, where_close] &lt; Data[i - 1, donch_down]:<br/>              Data[i, 7] = -1 <br/>              <br/>    return Data</span><span id="51a1" class="np mh it nl b gy nu nr l ns nt"># Note: The onwhat variable is the closing price</span></pre><p id="1984" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们选择最后的唐奇安水平，因为我们想知道我们什么时候打破我们最后的高点或低点。请记住，该公式考虑了当前的最高价和最低价，因此当前价格永远不会突破它们。</p><p id="4626" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回测选择的条件更多的是长期突破，因为我们使用的是60天的日线图。这意味着，如果市场超过了过去60天的上唐奇安通道，那么我们买入趋势。我在下面的三个测试货币对中加入了一个简单的100点的止损单。我选择了三个主要的货币对作为这个策略的代理，它们是欧元兑美元，美元兑瑞士法郎和GBPUSD。下面的图表显示了三个后验测试的信号图。</p><div class="ne nf ng nh gt ab cb"><figure class="os ni ot ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/c41ce7b6e239f35eed39210e31cb3337.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*DA40mmbtgsiwMz6Pvmn1hQ.png"/></div></figure><figure class="os ni ot ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/94400d3c67bb4a76931b8d9cc96c5740.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*szlBGIgACcZLNwge659AHw.png"/></div></figure><figure class="os ni ot ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/31db014dc6ea0b95656abd8c99fc9155.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*QA5Yxh8-RBHDNWWBg8onyw.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk oy di oz pa translated">欧元兑美元、美元兑瑞郎和GBPUSD的信号图。绿色箭头表示买入订单，而红色箭头表示卖出订单。</p></figure></div><p id="071b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">出于比较的原因，在10，000美元的手数中，每笔交易0.5点后的净值曲线。初始余额为1000美元，因此杠杆比率为1:100。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/088a9c3d068ac6f6afeaf8fc5a28b51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kg4ZfCYHvtqFGKNEk4qlig.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">遵循唐奇安策略的权益曲线。</p></figure><p id="ae7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你也对更多的技术指标和使用Python创建策略感兴趣，那么我关于技术指标的畅销书可能会让你感兴趣:</p><div class="lg lh gp gr li lj"><a href="https://www.amazon.com/gp/product/B08WZL1PNL/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B08WZL1PNL&amp;linkCode=as2&amp;tag=sofien-20&amp;linkId=e3cb9716bb6a07cf6c8b9fb585412b07" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">Python中的新技术指标</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">亚马逊网站:Python中的新技术指标:9798711128861: Kaabar，Sofien先生:书籍</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">www.amazon.com</p></div></div><div class="ls l"><div class="pb l lu lv lw ls lx ly lj"/></div></div></a></div><p id="06bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显然，它需要一些改进，唐奇安通道应该有另一个指标，以确认信号或增加波动因素，稳定结果。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/6bacbf3ebd9dd4371c2fdd470dec0051.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*8Agj5iaRQTtuqHObWCqozg.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk translated">唐奇安突围战略的绩效表。</p></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="5d2c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里还可以采用另一种策略。它依赖于中间波段。我们可以尝试使用与上述相同的回溯测试条件来开发基于它们的策略。从上面的介绍中我们知道，中间波段只是上下波段的平均值，因此它可以与布林线的移动平均值相比较。如果你有兴趣了解更多关于布林线的信息，你可以查看这篇文章，我提供了更多的回溯测试:</p><div class="lg lh gp gr li lj"><a href="https://medium.com/swlh/creating-a-trading-strategy-using-the-rsi-the-bollinger-bands-new-ideas-using-python-4115e1fdfbba" rel="noopener follow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">使用RSI和布林线创建交易策略。使用Python的新想法。</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">绝大多数交易者使用著名的相对强弱指数来帮助他们做决定，虽然它…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">medium.com</p></div></div><div class="ls l"><div class="pd l lu lv lw ls lx ly lj"/></div></div></a></div><p id="9e34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，中间波段策略的规则是:</p><ul class=""><li id="90cd" class="oe of it kk b kl km ko kp kr og kv oh kz oi ld oj ok ol om bi translated"><strong class="kk iu">当市场超过中间波段时买入。</strong></li><li id="17e2" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">每当市场突破中间波段时，卖出(做空)。</li></ul><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/ade107268f0665bec2f4394bc3844b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbLlkQUmpXmkA1TDg1rxEQ.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">欧元兑美元日时间框架与唐奇安60天中间带。</p></figure><pre class="ne nf ng nh gt nk nl nm nn aw no bi"><span id="361c" class="np mh it nl b gy nq nr l ns nt">def donchian_signals_middle(Data, onwhat, donch_middle, buy, sell):<br/>    <br/>    for i in range(len(Data)):<br/>        <br/>          if Data[i, onwhat] &gt; Data[i, donch_middle] and Data[i - 1, onwhat]  &lt; \<br/>              Data[i, donch_middle]:<br/>              Data[i, buy] = 1<br/>         <br/>          elif Data[i, onwhat] &lt; Data[i, donch_middle] and Data[i - 1, onwhat] &gt; \<br/>              Data[i, donch_middle]:<br/>              Data[i, sell] = -1</span><span id="e327" class="np mh it nl b gy nu nr l ns nt"># Note: The buy and sell variables are the triggers (equivalent to column 6 and 7 in the first strategy code)</span></pre><p id="32e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二种策略的信号图如下:</p><div class="ne nf ng nh gt ab cb"><figure class="os ni pe ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/9b87e50b08a215a44f2c1908e7e5c21d.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*RijynIgkBdRKVtMtDfhgOg.png"/></div></figure><figure class="os ni pe ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/fe5fe684b1c00ae9be87593ba894f042.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*SM1s1DsUCV1L-WU8uMZQyQ.png"/></div></figure><figure class="os ni pf ou ov ow ox paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><img src="../Images/d39a970c0c6aac93b5ceaa8da37d6c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*amHrx404yOln-aSCNS-yUw.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk pg di ph pa translated">欧元兑美元、美元兑瑞郎和GBPUSD的信号图。绿色箭头表示买入订单，而红色箭头表示卖出订单。</p></figure></div><p id="1064" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">股权曲线就没那么令人印象深刻了。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi nv"><img src="../Images/070d8487a52ddc6267f3ad8a16a8b131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lmJAKNadsmakIF5ExcLgvQ.png"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated">遵循唐奇安中带策略的权益曲线。</p></figure><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/f537d06e0a29f7bf7caa937dedbd6937.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*F1qcqq5LEY1k_ZDEBxch6g.png"/></div><p class="oa ob gj gh gi oc od bd b be z dk translated">东中带突破策略表现表。</p></figure><h1 id="b2a6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="4e64" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">虽然第一个策略显示了一些潜力，但第二个策略未能给人留下深刻印象。很明显，唐奇安通道还有很多事情要做，但是很高兴知道我们可以尝试量化范围和交易突破。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nw nx di ny bf nz"><div class="gh gi pj"><img src="../Images/01a84483890ab1045da2149568d84a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mv_5xeBf9KS3LzyBR3Ervw.jpeg"/></div></div><p class="oa ob gj gh gi oc od bd b be z dk translated"><a class="ae lf" href="https://pixabay.com/illustrations/entrepreneur-idea-competence-vision-4313671/" rel="noopener ugc nofollow" target="_blank">https://pix abay . com/illustrations/entrepreneur-idea-competence-vision-4313671/</a></p></figure></div></div>    
</body>
</html>