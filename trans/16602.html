<html>
<head>
<title>Practical Python: Class vs Instance Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实用Python:类与实例变量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/practical-python-class-vs-instance-variables-431fd16430d?source=collection_archive---------3-----------------------#2020-11-16">https://towardsdatascience.com/practical-python-class-vs-instance-variables-431fd16430d?source=collection_archive---------3-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a882" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何定义它们并与之互动</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/439e2978b72125f1ba82b4575b462291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*G7Mxg-Qry4B9twkuUzaATg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">(图片由作者提供)</p></figure><p id="903d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类是Python最基础的部分，因为它是面向对象编程的本质。</p><p id="9403" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Python中的一切都是对象比如整数、列表、字典、函数等等。每个对象都有一个类型，对象类型是使用类创建的。</p><p id="198f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实例是属于一个类的对象。例如，list是Python中的一个类。当我们创建一个列表时，我们有一个list类的实例。</p><p id="9711" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我将重点关注类和实例变量。我假设您对Python中的类有基本的了解。如果没有，您仍然可以理解什么是类和实例变量，但是语法可能看起来有点让人不知所措。</p><p id="316e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想重温基础知识，我还写了一篇关于Python类的介绍性文章。</p><p id="3ab7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从类和实例变量开始。</p><p id="8083" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类变量是在类内部而不是在任何函数外部声明的。实例变量是在构造函数_ _ init _ _方法中声明的。</p><p id="dcd1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">考虑下面的类定义:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="e6bb" class="lw lx it ls b gy ly lz l ma mb">class Book():<br/>   fontsize = 9<br/>   page_width = 15</span><span id="eca2" class="lw lx it ls b gy mc lz l ma mb">   def __init__(self, name, writer, length):<br/>      self.name = name<br/>      self.writer = writer<br/>      self.length = length</span></pre><p id="12bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">假设Book类被一家出版公司使用。fontsize和page_width是类变量。创建的每个book实例的fontsize为9，page_width为15 cm。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi md"><img src="../Images/f3ffbad42d47c258e344789499b723c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EFK9mj7dGV83geKJf33AaQ.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae lq" href="https://unsplash.com/@nmgnetwork?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NMG网</a>在<a class="ae lq" href="https://unsplash.com/s/photos/book-publishing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="49af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">name、writer和length变量是在__init__方法中声明的，因此它们是实例变量。这些变量的值在创建实例时确定。</p><p id="db6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是有意义的，因为fontsize和page_width通常是标准的。但是，名称、作者和长度是特定于每本书的(即实例)。</p><p id="bb32" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将fontsize和page_width声明为类变量节省了我们大量的时间和精力。假设出版公司决定改变书籍中使用的字体大小。如果它是一个实例变量，我们将需要为每个实例(如book)更改它。然而，由于它是一个类变量，一个赋值就可以完成每本书的工作。</p><p id="bb62" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们创建Book类的一个实例:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="2277" class="lw lx it ls b gy ly lz l ma mb">book1 = Book("Intro to Python", "John Doe", 50000)</span><span id="73e1" class="lw lx it ls b gy mc lz l ma mb">print(book1.writer)<br/>"John Doe"</span><span id="dd9e" class="lw lx it ls b gy mc lz l ma mb">print(book1.page_width)<br/>15</span></pre><p id="0c06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽管我们没有显式地将page_width变量分配给我们的实例，但它在默认情况下具有这个属性。</p><p id="9005" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以为任何实例更改类变量的值(即覆盖它们)。假设我们想让book1宽一点，那么我们将改变这个实例的page_width。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="bec9" class="lw lx it ls b gy ly lz l ma mb">book1.page_width = 17</span><span id="38a1" class="lw lx it ls b gy mc lz l ma mb">print(book1.page_width)<br/>17</span><span id="dfcd" class="lw lx it ls b gy mc lz l ma mb">print(Book.page_width)<br/>15</span></pre><p id="f01c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，我们只更改了book1实例的值。类变量的值保持不变。</p><p id="5662" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们定义的方法可以访问类变量，但是我们需要小心。我将在下面的例子中说明原因。</p><p id="7425" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们为Book类定义了一个方法，该方法根据长度(字数)、字体大小和page_width计算页数:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="3717" class="lw lx it ls b gy ly lz l ma mb">def number_of_pages(self):<br/>   pages = (self.length * fontsize) / (page_width * 100)<br/>   return pages</span></pre><p id="c375" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此方法将引发一个NameError，表明未定义“fontsize”。“页面宽度”也是如此。虽然这些是类变量，但我们需要告诉方法从哪里获取它们。</p><p id="3039" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以从实例本身或从类中获取它们。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="8f05" class="lw lx it ls b gy ly lz l ma mb">#Using the instance<br/>def number_of_pages(self):<br/>   pages = (self.length * self.fontsize) / (self.page_width * 100)<br/>   return pages</span><span id="97e0" class="lw lx it ls b gy mc lz l ma mb">#Using the class<br/>def number_of_pages(self):<br/>   pages = (self.length * Book.fontsize) / (Book.page_width * 100)<br/>   return pages</span></pre><p id="63b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这两种方法都行得通。我们来做一个例子:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="17f7" class="lw lx it ls b gy ly lz l ma mb">book1 = Book("Intro to Python", "John Doe", 50000)</span><span id="1c92" class="lw lx it ls b gy mc lz l ma mb">book1_pages = book1.number_of_pages()</span><span id="cdcc" class="lw lx it ls b gy mc lz l ma mb">print(book1_pages)<br/>300</span></pre></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="295c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更新类变量将影响该类的所有实例。这是一个节省我们时间和精力的好功能。然而，我们也需要小心变化的程度。</p><p id="be9d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个例子。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="c9b4" class="lw lx it ls b gy ly lz l ma mb">book1 = Book("Intro to Python", "John Doe", 50000)<br/>book2 = Book("Intro to Pandas", "Jane Doe", 40000)</span><span id="06ab" class="lw lx it ls b gy mc lz l ma mb">print(book1.fontsize, book2.fontsize)<br/>(9, 9)</span><span id="7fc5" class="lw lx it ls b gy mc lz l ma mb">Book.fontsize = 11</span><span id="fc11" class="lw lx it ls b gy mc lz l ma mb">print(book1.fontsize, book2.fontsize)<br/>(11, 11)</span></pre></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="7b45" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实例通过它们所属的类来访问类变量。让我们做一个例子来说明我的意思。</p><p id="1dea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">__dict__方法可用于查看实例或类的属性。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="5a3e" class="lw lx it ls b gy ly lz l ma mb">book1 = Book("Intro to Python", "John Doe", 50000)<br/>print(book1.__dict__)<br/>{'name': 'Intro to Python', 'writer': 'John Doe', 'length': 50000}</span><span id="97c0" class="lw lx it ls b gy mc lz l ma mb">print(book1.fontsize)<br/>9</span></pre><p id="6a8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们打印出book1的数据属性时，我们看不到fontsize或page_width。但是，我们可以通过打印出来看到book1有fontsize属性。</p><p id="6787" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实例(book1)通过类访问类变量。让我们也在Book类上应用__dict__方法。</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="6644" class="lw lx it ls b gy ly lz l ma mb">print(Book.__dict__)</span></pre><p id="5e55" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">__module__': '__main__ '，<strong class="kw iu"> 'fontsize': 9，' page _ width ':15【T1]，' __init__': &lt;功能本。__init__ at 0x7f6cc5f54620 &gt;，' number_of_pages': &lt;函数Book . number _ of _ at 0x 7 F6 cc 5 f 548 c8&gt;，' __dict__': &lt;属性' __dict__' of 'Book '对象&gt;，' __weakref__': &lt;属性' _ _ weak ref _ _ '' Book '对象&gt;，' __doc__': None}</strong></p><p id="5e5f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类变量以及方法和其他一些东西都打印出来了。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h2 id="8a1d" class="lw lx it bd mp mq mr dn ms mt mu dp mv ld mw mx my lh mz na nb ll nc nd ne nf bi translated">结论</h2><p id="07f8" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">类变量影响整个类。因此，当一个类变量被更新时，所有的实例也被更新。这非常方便，但我们也需要小心。如果使用不慎，可能会出现不良后果。</p><p id="cc3b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实例变量为每个实例取唯一的值。我们在创建实例时为它们赋值。</p><p id="dd8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有的实例一开始都为类变量取相同的值，但是我们可以在以后为一个实例更新它们。我们对一个实例所做的更改不会影响其他实例的类变量的值。</p><p id="57b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>