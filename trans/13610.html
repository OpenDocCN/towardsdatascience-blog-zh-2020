<html>
<head>
<title>How to realize geo-visualization with Python during corona pandemic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">corona疫情期间如何用Python实现地理可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-realize-geo-visualization-with-python-during-corona-pandemic-f822d3cbf4fe?source=collection_archive---------28-----------------------#2020-09-18">https://towardsdatascience.com/how-to-realize-geo-visualization-with-python-during-corona-pandemic-f822d3cbf4fe?source=collection_archive---------28-----------------------#2020-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="428e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">基于GeoPandas和Matplotlib的德国web刮削日冕信息的地理演示</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/15db3482c164ae64440a68dffe07c41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gZyJ1F-9dip_pqS9CwGFZw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">乔纳森·博尔巴在<a class="ae kv" href="https://unsplash.com/s/photos/corona-pandemic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e18f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个故事中，我尝试分享我用Python包(Geopandas，pandas，Matplotlib)制作Corona信息地理可视化的经验。电晕信息是通过网刮提取的。由于web抓取并不是我们的目标，而是一种获取信息的方法，所以我不会花太多时间解释这部分代码🌚。</p><p id="1ee7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">编者注:</em><a class="ae kv" href="https://slack-redir.net/link?url=http%3A%2F%2Ftowardsdatascience.com" rel="noopener ugc nofollow" target="_blank"><em class="ls">towardsdatascience.com</em></a><em class="ls">是一家以数据科学和机器学习研究为主的中型刊物。我们不是健康专家或流行病学家。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae kv" href="https://slack-redir.net/link?url=https%3A%2F%2Fwww.who.int%2Femergencies%2Fdiseases%2Fnovel-coronavirus-2019" rel="noopener ugc nofollow" target="_blank"> <em class="ls">这里</em> </a> <em class="ls">。</em></p><h1 id="f4fe" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">社会背景:科罗纳·疫情</h1><blockquote class="ml mm mn"><p id="a146" class="kw kx ls ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated">截至2020年3月13日，当新增病例数超过中国时，<a class="ae kv" href="https://en.wikipedia.org/wiki/World_Health_Organization" rel="noopener ugc nofollow" target="_blank">世界卫生组织</a>(世卫组织)开始认为欧洲是<a class="ae kv" href="https://en.wikipedia.org/wiki/COVID-19_pandemic" rel="noopener ugc nofollow" target="_blank">新冠肺炎疫情</a>的活跃中心。[1][2]</p></blockquote><p id="2ae3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我的父母住在中国，他们目睹了疫情的严重性。在一月、二月和三月，他们不得不总是呆在家里😷。只有我的父亲一周两次去市场购买全家基本生活所需的必需品。后来在欧洲，许多城市也实行了封锁。我住在德国，那些日子太可怕了。在欧洲爆发之前，我呆在家里，做了一个在德国感染的电晕的地理可视化，以消磨时间😇。<a class="ae kv" href="https://github.com/Kopfgeldjaeger/Covid-19_in_germany" rel="noopener ugc nofollow" target="_blank">https://github.com/Kopfgeldjaeger/Covid-19_in_germany</a>，于2020年2月28日提交。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/74530520180a367895c90293c0c5fbfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOdPpT661IFD0Xad5yQiJg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">存储库的简介图像</p></figure><p id="2c04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码上传至今已经半年多了。现在在欧洲，第二波疫情来势凶猛。我将为抗击疫情贡献自己的力量，用可视化的日冕信息警告人们。</p><p id="98b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在疫情开始的时候，关于日冕的视觉信息很少。我和朋友每天打开<a class="ae kv" href="http://www.coronavirus.jetzt/karten/deutschland/" rel="noopener ugc nofollow" target="_blank">网站</a>了解德国16个州有多少感染者。后来，更多的Dash网站被建立来可视化相同的信息，甚至YouTube上的Corona实时计数器。</p><p id="3b20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">今天我打开了每天早些时候访问的www.coronavirus.jetzt/karten/deutschland/<a class="ae kv" href="http://www.coronavirus.jetzt/karten/deutschland/" rel="noopener ugc nofollow" target="_blank">网站。那里关于日冕的信息是以表格的形式呈现的。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/1802e8b039f1513df45fb7a1d67a1eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn3LRHEOTCTuVZEJuiPB2g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">网站截图</p></figure><p id="a6b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它非常清晰和简洁，然而，对于不熟悉德国地理的人来说，很难想象每个州的日冕分布情况。因此，我们需要添加这些地理信息，最好是在图像中与日冕信息一起展示。</p><h1 id="8dc5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">抓取日冕信息的HTML表格</h1><p id="26f4" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">我们目标的第一步是收集所有16个州的感染和死亡人数。这部分作品与另一个媒介故事非常相似[3]。</p><p id="a672" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的代码可以让我们得到信息，我把这些信息保存在一个Numpy数组中，这个数组很容易转换成Pandas数据帧。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="2adf" class="nd lu iq mz b gy ne nf l ng nh">import requests</span><span id="c142" class="nd lu iq mz b gy ni nf l ng nh">import lxml.html as lh</span><span id="0f5d" class="nd lu iq mz b gy ni nf l ng nh">import pandas as pd<br/>import numpy as np</span><span id="9079" class="nd lu iq mz b gy ni nf l ng nh">url='https://www.coronavirus.jetzt/karten/deutschland/'</span><span id="f5f2" class="nd lu iq mz b gy ni nf l ng nh">page = requests.get(url)</span><span id="844f" class="nd lu iq mz b gy ni nf l ng nh">doc = lh.fromstring(page.content)</span><span id="4910" class="nd lu iq mz b gy ni nf l ng nh">tr_elements = doc.xpath('//tr')</span><span id="1ce4" class="nd lu iq mz b gy ni nf l ng nh">tr_elements = doc.xpath('//tr')</span><span id="a66a" class="nd lu iq mz b gy ni nf l ng nh">col=[]</span><span id="64af" class="nd lu iq mz b gy ni nf l ng nh">#For each row of 16 states, store the name of state, the numbers of infected and deaths</span><span id="e29b" class="nd lu iq mz b gy ni nf l ng nh">for n in range(1,len(tr_elements)):</span><span id="8fdd" class="nd lu iq mz b gy ni nf l ng nh">row =[]</span><span id="c77b" class="nd lu iq mz b gy ni nf l ng nh">for t in tr_elements[n]:</span><span id="295f" class="nd lu iq mz b gy ni nf l ng nh">name=t.text_content()</span><span id="bcab" class="nd lu iq mz b gy ni nf l ng nh">row.append((name))</span><span id="3671" class="nd lu iq mz b gy ni nf l ng nh">col.append(row)</span><span id="ea83" class="nd lu iq mz b gy ni nf l ng nh">col= np.array(col)</span><span id="c78d" class="nd lu iq mz b gy ni nf l ng nh">df = pd.DataFrame({'Bundesland': col[:,0], 'Infizierte': col[:,1], 'Todesfälle':col[:,2]})</span><span id="d97d" class="nd lu iq mz b gy ni nf l ng nh">df</span></pre><p id="d02d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据帧(df)看起来像:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/b09878a14b20d1425e4fc54e02b0988a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*xCedD0Mj7U_AbH8fa2LZkA.png"/></div></figure><h1 id="2c63" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">查找德国的shapefile</h1><p id="e245" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">最后一步完成后，我们寻找德国16个州的地理信息🌴🌋🌅。使用地理定位数据时，地图是交流和比较信息的一种很好的方式。如何用Python展示地图？答案是GeoPandas[4],这是一个开源项目，旨在简化python中地理空间数据的处理。它结合了pandas和shapely的功能，在pandas中提供地理空间操作，并为shapely提供多种几何图形的高级接口。</p><p id="aa45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了生成德国地图，我们需要下载必要的<a class="ae kv" href="https://www.arcgis.com/home/item.html?id=ae25571c60d94ce5b7fcbf74e27c00e0" rel="noopener ugc nofollow" target="_blank">形状文件</a>。这个链接并不是唯一为我们提供德国形状文件的链接。不同类别的shapefiles有很多种。我在这里使用的是解压zip文件后的文件名“geomap/vg2500_bld.shp”。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="6724" class="nd lu iq mz b gy ne nf l ng nh">import matplotlib.pyplot as plt</span><span id="c8c8" class="nd lu iq mz b gy ni nf l ng nh">import geopandas as gpd</span><span id="7cf7" class="nd lu iq mz b gy ni nf l ng nh">fp = "geomap/vg2500_bld.shp"</span><span id="27f0" class="nd lu iq mz b gy ni nf l ng nh">map_df = gpd.read_file(fp)</span><span id="f322" class="nd lu iq mz b gy ni nf l ng nh">map_df.head()</span><span id="b93e" class="nd lu iq mz b gy ni nf l ng nh">map_df.plot()</span></pre><p id="ab15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">map_df展示了德国各州的地图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/6d06bffe63124d978f0607a6a64645b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*L8G3--lGXVkW3QVgx6xh2A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">map_df.plot()的结果</p></figure><p id="85d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以用plt.annotate添加州名，代码如下</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="88f7" class="nd lu iq mz b gy ne nf l ng nh">fig, ax = plt.subplots(1, figsize=(10, 6))</span><span id="0d03" class="nd lu iq mz b gy ni nf l ng nh">map_df['coords'] = map_df['geometry'].apply(lambda x: x.representative_point().coords[:])</span><span id="83b1" class="nd lu iq mz b gy ni nf l ng nh">map_df['coords'] = [coords[0] for coords in map_df['coords']]</span><span id="e790" class="nd lu iq mz b gy ni nf l ng nh">map_df.plot(ax=ax)</span><span id="7ac2" class="nd lu iq mz b gy ni nf l ng nh">for idx, row in map_df.iterrows():</span><span id="c75a" class="nd lu iq mz b gy ni nf l ng nh">plt.annotate(s=row['GEN'], xy=row['coords'],</span><span id="8407" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='center')</span><span id="0aaa" class="nd lu iq mz b gy ni nf l ng nh">plt.xticks(np.array([]))</span><span id="bfc0" class="nd lu iq mz b gy ni nf l ng nh">plt.yticks(np.array([]))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/c6680734bdb23271044ec2aba1a5b857.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*wdrhdAuQKPhPimEzD1R6Xw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带注释的德国各州地图</p></figure><p id="97be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后一个插图有一个小问题，柏林和勃兰登堡的注释相互重叠。我们可以对if句使用一个技巧:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="f422" class="nd lu iq mz b gy ne nf l ng nh">fig, ax = plt.subplots(1, figsize=(10, 6))</span><span id="6603" class="nd lu iq mz b gy ni nf l ng nh">map_df.plot(ax=ax)</span><span id="3fa5" class="nd lu iq mz b gy ni nf l ng nh">for idx, row in map_df.iterrows():</span><span id="c0ec" class="nd lu iq mz b gy ni nf l ng nh">if idx ==10:  # the idx of Brandenburg is 10</span><span id="e7da" class="nd lu iq mz b gy ni nf l ng nh">plt.annotate(s=row['GEN'], xy=row['coords'],verticalalignment='top',</span><span id="c304" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='right')</span><span id="d422" class="nd lu iq mz b gy ni nf l ng nh">continue</span><span id="00b3" class="nd lu iq mz b gy ni nf l ng nh">plt.annotate(s=row['GEN'], xy=row['coords'],verticalalignment='bottom',\</span><span id="1a49" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='center')</span><span id="4439" class="nd lu iq mz b gy ni nf l ng nh">plt.xticks(np.array([]))</span><span id="db38" class="nd lu iq mz b gy ni nf l ng nh">plt.yticks(np.array([]))</span></pre><p id="6bae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果注释是针对勃兰登堡或柏林的，我们可以设置它们注释的属性，以使它们不再重叠。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/79f397936ddc881f7288505f28371ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*To2AnEp5sv07cYJ-jeRw1Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有清晰注释的德国各州地图</p></figure><p id="de16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于柏林在地理上被勃兰登堡包围，两个州的注释很容易重叠，所以我们后来又使用了这个技巧。</p><h1 id="e0d0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">信息融合</h1><p id="a696" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">我们既有日冕信息，也有德国各州的地理信息。然而，这两条信息并不相关。我们需要将它们合并成一个表格或数据帧。和熊猫一起🐼连接方法[5]，我们可以将它们合并成一个数据帧。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="8bff" class="nd lu iq mz b gy ne nf l ng nh">merged = map_df.set_index('GEN').join(df.set_index('Bundesland'))</span><span id="3157" class="nd lu iq mz b gy ni nf l ng nh">merged</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/88058ca48a5c3df7d68e985c69d57dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9USm6IzkLKqPlXYJYnvuAQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">结合日冕信息和地理信息的合并数据帧</p></figure><h1 id="1dc0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">用Matplotlib从数据帧到插图</h1><p id="a90a" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">令人兴奋的是，我们已经到了用Matplotlib绘制结果的最后一步。</p><blockquote class="ml mm mn"><p id="d209" class="kw kx ls ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated">Matplotlib是Python编程语言及其数字数学扩展NumPy的绘图库。它提供了一个面向对象的API，使用Tkinter、wxPython、Qt或GTK+等通用GUI工具包将绘图嵌入到应用程序中。还有一个基于状态机(如OpenGL)的过程化“pylab”接口，设计得与MATLAB非常相似，尽管不鼓励使用它。[6]“维基百科”</p></blockquote><p id="10b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的最后一个故事中，也是关于如何利用Matplotlib对研究结果进行可视化[7]。</p><p id="bc2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/how-to-draw-a-bar-graph-for-your-scientific-paper-with-python-a6c2a5e6bcd7">https://towards data science . com/how-to-draw-a-bar-graph-for-your-scientific-python-a 6 C2 a5 E6 BCD 7</a></p><p id="ca4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我们继续利用Matpotlib实现地理可视化，因为数据帧包含所需的地理信息。</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="5252" class="nd lu iq mz b gy ne nf l ng nh">column = df['Infizierte']</span><span id="ea89" class="nd lu iq mz b gy ni nf l ng nh">max_Infizierte = column.max()</span><span id="7c64" class="nd lu iq mz b gy ni nf l ng nh">column = df['Todesfälle']</span><span id="deed" class="nd lu iq mz b gy ni nf l ng nh">max_Todesfälle = column.max()</span><span id="ed6b" class="nd lu iq mz b gy ni nf l ng nh">vmin, vmax = 0, max_Infizierte</span><span id="2012" class="nd lu iq mz b gy ni nf l ng nh">merged['coords'] = merged['geometry'].apply(lambda x: x.representative_point().coords[:])</span><span id="edc2" class="nd lu iq mz b gy ni nf l ng nh">merged['coords'] = [coords[0] for coords in merged['coords']]</span><span id="71c1" class="nd lu iq mz b gy ni nf l ng nh"># create figure and axes for Matplotlib</span><span id="c2b1" class="nd lu iq mz b gy ni nf l ng nh">fig, ax = plt.subplots(1, figsize=(10, 6))</span><span id="6708" class="nd lu iq mz b gy ni nf l ng nh">merged.plot(column='Infizierte', cmap='YlOrRd', linewidth=0.8, ax=ax, edgecolor='0.8')</span><span id="75bf" class="nd lu iq mz b gy ni nf l ng nh">for idx, row in merged.iterrows():</span><span id="e8f1" class="nd lu iq mz b gy ni nf l ng nh">if idx =='Berlin':</span><span id="7908" class="nd lu iq mz b gy ni nf l ng nh">plt.annotate(s=row['Infizierte'], xy=row['coords'],</span><span id="cdfa" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='right',fontsize=8)</span><span id="2604" class="nd lu iq mz b gy ni nf l ng nh">continue</span><span id="887a" class="nd lu iq mz b gy ni nf l ng nh">plt.annotate(s=row['Infizierte'], xy=row['coords'],</span><span id="8387" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='center',fontsize=8)</span><span id="1873" class="nd lu iq mz b gy ni nf l ng nh"># remove the axis</span><span id="6789" class="nd lu iq mz b gy ni nf l ng nh">ax.axis('off')</span><span id="7fa4" class="nd lu iq mz b gy ni nf l ng nh"># add a title</span><span id="6d2a" class="nd lu iq mz b gy ni nf l ng nh">ax.set_title('Coronavirus infected in Germany (18.09.2020)', \</span><span id="fec4" class="nd lu iq mz b gy ni nf l ng nh">fontdict={'fontsize': '18',</span><span id="8664" class="nd lu iq mz b gy ni nf l ng nh">'fontweight' : '3'})</span><span id="2cfc" class="nd lu iq mz b gy ni nf l ng nh">ax.annotate('Source: <a class="ae kv" href="https://www.coronavirus.jetzt/karten/deutschland/'," rel="noopener ugc nofollow" target="_blank">https://www.coronavirus.jetzt/karten/deutschland/',</a></span><span id="eaa4" class="nd lu iq mz b gy ni nf l ng nh">xy=(0.2, .06), xycoords='figure fraction',</span><span id="7a4c" class="nd lu iq mz b gy ni nf l ng nh">horizontalalignment='left', verticalalignment='top',</span><span id="1e11" class="nd lu iq mz b gy ni nf l ng nh">fontsize=10, color='#555555')</span><span id="32bb" class="nd lu iq mz b gy ni nf l ng nh">sm = plt.cm.ScalarMappable(cmap='YlOrRd', norm=plt.Normalize(vmin=vmin, vmax=vmax))</span><span id="ebe9" class="nd lu iq mz b gy ni nf l ng nh">sm._A = []</span><span id="49b4" class="nd lu iq mz b gy ni nf l ng nh">cbar = fig.colorbar(sm)</span><span id="146f" class="nd lu iq mz b gy ni nf l ng nh">fig.savefig('testmap_1.png', dpi=300)</span></pre><p id="9593" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用上面的代码，我们得到如下的图</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/6e16e97d6294213e3dfa57301e2af36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSVMQlQCdfpLJGWnwVWHBw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">截至2020年9月18日，德国最新的冠状病毒感染病例数</p></figure><p id="7cfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，我们也可以绘制德国直到今天2020年9月18日的死亡人数。为了使这个图与上一个不同，我从Matplotlib [8]中选择了另一个调色板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/159d5bddb75cff6801235ed0c3d59593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FnrN553rlT99d4AyJR9X4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">截至2020年9月18日，德国最新的电晕死亡病例数</p></figure><p id="13c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如上图“带有清晰注释的德国各州地图”所示，我们使用相同的技巧为柏林和勃兰登堡的数字设置了不同的注释格式，这样两个注释几乎不会重叠。</p><h1 id="fc73" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">结论</h1><p id="27b4" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">在这个故事中，我介绍了一种制作地理可视化的方法，通过解释我的工作流程，使德国地图中显示的日冕情况直观且易于访问，从web抓取开始，到日冕地图的插图结束。所有相关文件上传到GitHub:<a class="ae kv" href="https://github.com/Kopfgeldjaeger/Medium_blogs_code/tree/master/1_corona_visualization" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/Kopfgeldjaeger/Medium _ blogs _ code/tree/master/1 _ corona _ visualization</a>。</p><p id="3b7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后但同样重要的是，我希望疫情将很快结束。我们可以一起在未来取得进步🚀，不管你现在住在哪里，也不管外面的日冕情况有多糟糕。</p><h1 id="be6c" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">参考</h1><p id="3fab" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">[1]弗雷德里克斯2020年3月13日)。<a class="ae kv" href="https://nypost.com/2020/03/13/who-says-europe-is-new-epicenter-of-coronavirus-pandemic/" rel="noopener ugc nofollow" target="_blank">“世卫组织称欧洲是疫情冠状病毒的新中心”</a>。<a class="ae kv" href="https://en.wikipedia.org/wiki/New_York_Post" rel="noopener ugc nofollow" target="_blank">纽约邮报<em class="ls">纽约邮报</em>T5。2020年5月9日检索。</a></p><p id="0791" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2] <a class="ae kv" href="https://brazilian.report/coronavirus-brazil-live-blog/2020/05/22/who-declares-south-america-as-new-covid-19-epicenter/" rel="noopener ugc nofollow" target="_blank">“世卫组织宣布南美为新新冠肺炎震中”</a>。<em class="ls">巴西报道</em>。2020年5月22日。检索于2020年6月1日。</p><p id="1a47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[3]<a class="ae kv" rel="noopener" target="_blank" href="/web-scraping-html-tables-with-python-c9baba21059">https://towards data science . com/we b-scraping-html-tables-with-python-C9 Baba 21059</a></p><p id="617a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://geopandas.org/" rel="noopener ugc nofollow" target="_blank">https://geopandas.org/</a></p><p id="e39b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://pandas.pydata.org/docs/" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/</a></p><p id="ddba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/</a></p><p id="aa55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[7]<a class="ae kv" rel="noopener" target="_blank" href="/how-to-draw-a-bar-graph-for-your-scientific-paper-with-python-a6c2a5e6bcd7">https://towards data science . com/how-to-draw-a-bar-graph-for-your-science-paper-a 6 C2 a5 E6 BCD 7</a></p><p id="9bf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[8]<a class="ae kv" href="https://matplotlib.org/3.1.1/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib . org/3 . 1 . 1/tutorials/colors/colormaps . html</a></p></div></div>    
</body>
</html>