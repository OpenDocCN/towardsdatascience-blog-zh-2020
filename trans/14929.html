<html>
<head>
<title>The home cloud revolution: how to host your personal cloud from home.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">家庭云革命:如何在家托管您的个人云？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-home-cloud-revolution-how-to-host-your-personal-cloud-from-home-584abf16be4?source=collection_archive---------7-----------------------#2020-10-14">https://towardsdatascience.com/the-home-cloud-revolution-how-to-host-your-personal-cloud-from-home-584abf16be4?source=collection_archive---------7-----------------------#2020-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0875" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">抛弃谷歌和微软，选择Nextcloud</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/138ea35c872ecc3188433996bf34f922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xd52-BVb3VBCSyeG"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">安娜斯塔西娅·杜尔吉尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="5720" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">前提</h1><p id="725d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">谷歌跟踪你。是的，我知道这不是一个令人震惊的阅读，但这是真的。是的，几乎每个大公司都在追踪你，但是你可能不知道谷歌在网络上有多活跃。引用<a class="ae kv" href="https://spreadprivacy.com/followed-by-ads/" rel="noopener ugc nofollow" target="_blank">这篇</a>来自《鸭鸭走》的文章:</p><blockquote class="mk"><p id="94a7" class="ml mm iq bd mn mo mp mq mr ms mt mj dk translated">普林斯顿的WebTAP隐私项目最近发现谷歌的追踪器安装在75%的上百万个互联网网站上。</p></blockquote><p id="5cee" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">我一直在逐渐脱离谷歌的生态系统，虽然不使用谷歌的许多应用程序几乎是不可能的，但在本文中，我将向你展示如何摆脱谷歌最受欢迎的服务之一:谷歌驱动。</p><p id="48e5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">请注意，本文将向您展示如何在家中托管云应用程序，而且这并不便宜。从OEM购买时，这种设置的近似成本是€130或159美元，但显然，您可以通过从第三方购买来降低价格。</p><p id="b3cf" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这里有一个小小的警告:自己托管云不如让别人托管云安全。它的风险更大，因为任何事故，如停电或过载都可能烧毁你的设备，你基本上失去了所有的文件。如果你害怕这一点，使用UPS和raid备份多个驱动器。</p><p id="1717" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">此外，您的网络需要一个公共静态IP，因此如果您打算跟进并安装Nextcloud，请联系您的ISP来申请。</p><h1 id="b158" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">什么是Nextcloud？</h1><p id="d469" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Nextcloud是一个你可以自己托管的云平台。自托管可以让你重新获得对数据的控制，你上传的文档、图片和其他任何东西都不会上传到谷歌或微软的服务器，而是上传到你的个人服务器。</p><p id="bca6" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">此外，它是一个开源项目，这意味着它所依赖的每一行代码都可以被社区检查。当源代码可用时，您可以阅读文件中发生的任何事情。不再不知道您的数据会发生什么。</p><p id="dcf1" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">你可以在<a class="ae kv" href="https://nextcloud.com/" rel="noopener ugc nofollow" target="_blank">官网</a>找到更多信息。</p><h1 id="7076" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">要求</h1><p id="fb6d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将在这些指南中找到的最重要的工具是<strong class="lq ir"> Raspberry Pi </strong>，在我们的情况下，在迭代4B 2GB中，你可以从raspberrypi.org<a class="ae kv" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/" rel="noopener ugc nofollow" target="_blank">购买</a>。该网站不允许您从OEM购买主板，而是将您重定向到您所在国家的合作商店。</p><p id="e2a1" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated"><strong class="lq ir">你必须为这个项目使用专用的RaspberryPi 4B，以避免过热。</strong>我的树莓Pi 3仅仅通过运行Nextcloud和其他几个网络项目就轻松达到了158华氏度或70摄氏度。</p><p id="7d0e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们需要的第二个硬件是树莓派的盒子。我推荐的案例是<a class="ae kv" href="https://www.kickstarter.com/projects/coolermaster/pi-case-40" rel="noopener ugc nofollow" target="_blank"> PiCase 40 </a>，一旦它离开Kickstarter，它将从2020年9月中旬开始在共同市场上市。你可以使用任何兼容的外壳，甚至根本不使用任何外壳，但Cooler Master的这款特殊产品应该可以确保你的设备不会经常过热。</p><p id="7dd8" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们必须把系统刷新到microSD存储器，所以我们需要买一个。我会推荐一款可靠的SD，比如你可以在三星网站上找到的三星EVO 32GB，但实际上任何16GB以上的内存都可以，我们只会将其用于操作系统和Nextcloud的数据库。</p><p id="85de" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你有一台可以读取SD卡的笔记本电脑，你是幸运的，但如果你没有，你就需要购买一个MicroSD转USB适配器。你可以在网上和大多数电子商店找到它。</p><p id="6f19" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">为了存储数据，我建议使用USB驱动器、硬盘或SSD。我认为最适合的是你可以从沃尔玛或大多数在线电子商店买到的高达5tb的希捷Basic。</p><p id="828a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">最后，你需要一个带USB Type-C连接器的5V 3A电源。如果你不确定买什么或去哪里买，这是树莓基金会的官方电源。</p><p id="b06e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">你还需要一根以太网电缆，但是既然我们在讨论网络，我就不应该提这个了。</p><h1 id="2b0e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Raspberry Pi操作系统设置</h1><p id="8935" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你是一个超级用户，或者你已经使用过Raspberry Pi，你可以跳过这一部分。</p><p id="34d6" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你是一个普通用户，并且你从来没有接触过树莓派，那么你将开始一段伟大的旅程！</p><p id="a563" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">首先，你需要把树莓皮放进你的盒子里。如果你已经购买了PiCase 40，你可以观看<a class="ae kv" href="https://www.youtube.com/watch?v=GMDINc3LUao&amp;t=114s" rel="noopener ugc nofollow" target="_blank">这个视频</a>将电路板安装到机箱中，尽管这应该非常简单。</p><p id="96de" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">要将操作系统刷新到MicroSD，您必须将其直接或通过适配器连接到PC，然后下载<a class="ae kv" href="https://www.raspberrypi.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi Imager </a>。如果您在Linux上，您可以通过以下命令安装它:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="37d8" class="nj kx iq nf b gy nk nl l nm nn">sudo apt install rpi-imager</span></pre><p id="1d4f" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">打开成像仪，选择SD并通过<em class="no"> Raspberry Pi OS(其他)——</em>安装<em class="no"> Raspberry Pi OS Lite </em>而非Ubuntu，我们也可以安装Ubuntu并使用<a class="ae kv" href="https://snapcraft.io/nextcloud" rel="noopener ugc nofollow" target="_blank"> snap </a>安装Nextcloud或直接安装<a class="ae kv" href="https://docs.nextcloudpi.com/en/how-to-install-nextcloudpi/" rel="noopener ugc nofollow" target="_blank"> NextCloudPi </a>的系统映像，但在本指南中，我们将使用Raspberry Pi OS。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a3de47fffcb349a8333e93ebfeff2095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*12xeU7YhOyrcD9UAqV0Bmw.png"/></div></figure><p id="0baa" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">要使用Raspberry Pi，您可以通过ssh连接，也可以直接将其连接到USB键盘和HDMI显示器。我将使用SSH，因此，如果您将直接连接它，可以跳过下一步。</p><p id="0ecd" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">闪存完成后，使用您的文件管理器导航至SD卡，并在根目录下创建一个名为ssh的文件——不是ssh.txt，只是ssh，如果您在Windows上，您可以使用顶部栏通过菜单<em class="no">查看&gt;文件扩展名来启用扩展名。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/f50817f1e860de613e6627c739fe74df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0un4ub0bGir_xIVjjLxkPw.png"/></div></div></figure><p id="9e6e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">弹出卡，然后将其插入板上的卡槽。很好，我们的树莓派现在可以启动了。将其插入壁挂支架，并连接到您的路由器。</p><p id="9a4a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在，这有点棘手，你需要进入你的路由器页面来检查树莓派的IP地址。不幸的是，我不能提供更好的细节，因为每个制造商有不同的登录页面。我能做的就是告诉你，通常，路由器的IP是192.168.x.1，192.168.x.254，其中x可以是0，也可以是1。通过运行命令，您可以很容易地找到是否必须通过计算机终端设置0或1</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="93d0" class="nj kx iq nf b gy nk nl l nm nn">ipconfig</span></pre><p id="1894" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你在Windows或</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="fe85" class="nj kx iq nf b gy nk nl l nm nn">ifconfig</span></pre><p id="fb76" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你在Linux上查看你电脑的IP地址。</p><p id="6200" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你运行的是Mac OS，也可以采取类似的步骤，因为Mac OS和Linux一样都是基于Unix的。</p><h1 id="8f5a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">安装Nextcloud</h1><p id="4b8f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在Raspberry Pi已经设置好了，我们需要使用SSH通过命令行连接到它。通常，Windows和Mac都带有SSH客户端，所以只需启动您的终端并运行:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="2fb7" class="nj kx iq nf b gy nk nl l nm nn">ssh pi@ip_address </span></pre><p id="3e1b" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">其中pi是Raspberry Pi的默认用户，ip_address必须替换为您的Raspberry的ip。pi帐户的默认密码是<em class="no"> raspberry </em>，尽管我建议您在使用命令登录后更改它</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="114a" class="nj kx iq nf b gy nk nl l nm nn">sudo passwd</span></pre><p id="6c9a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在，要安装Nextcloud，您只需运行以下命令:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="9a75" class="nj kx iq nf b gy nk nl l nm nn">curl -sSL https://raw.githubusercontent.com/nextcloud/nextcloudpi/master/install.sh | sudo bash</span></pre><p id="afab" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果由于某种原因，你没有自动安装curl，只需运行</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="433f" class="nj kx iq nf b gy nk nl l nm nn">sudo apt install curl</span></pre><h1 id="08fd" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">设置Nextcloud</h1><p id="aba5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下一步，导航到<a class="ae kv" href="http://HTTP://rpi_ip_address," rel="noopener ugc nofollow" target="_blank"> HTTP://rpi-ip-address，</a>其中<em class="no"> rpi-ip-address </em>是您的Raspberry Pi的ip地址，并保存将给您的密码。默认用户是ncp，所以您不需要保存它，因为它不是随机的。点击“激活”，一个新的页面将在你的浏览器中打开，提示你输入用户名和密码。将<strong class="lq ir"> ncp </strong>设置为用户名，将您保存的密码设置为密码。</p><p id="6072" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在有趣的事情开始了，你进入Nextcloud的门户网站，你将被要求启动设置向导:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/d04fafad4586aba1461d828116fca8c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrN8iJmeNeiEeHoq4IuUdA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Nextcloud的设置向导。</p></figure><p id="e20e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">按照简化的向导进行操作，当被问及是否希望能够从屋外访问Nextcloud时，点击<strong class="lq ir"> yes </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/ef4cc1504d8eba725e0a46a192e906ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T5iVRbmGloxp5_8Dz8tmgA.png"/></div></div></figure><p id="9534" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你不确定如何移植应用程序，让Nextcloud来帮你做吧。它将使用UPnP标准来尝试并自动设置端口转发。然而，我们还将在后面介绍如何移植应用程序。</p><p id="dbdd" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">下一步有点棘手。现在，为了让你的服务器在你的房子外面也能使用，你可能需要建立一个域，这意味着不用2.210.123.43进入你的服务器，你只需使用thisismynextcloudserver.com就可以了。现在你真的不需要一个. com，任何域名都可以。你可以用name price买到非常便宜的东西。我的域名(我得到我的大约2美元)。</p><p id="1bf6" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如果你不想购买域名，你可以使用Nextcloud向你推荐的服务，基本上是为每个账户创建一个子域，所以你可能会有类似于yourname.freedns.com的东西。</p><p id="c591" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我建议你自己购买一个域名，这就是我将在本指南中向你展示的。选择跳过并完成您的设置。</p><h1 id="1c02" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">域名和HTTPS。</h1><p id="af2f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在，我们的web服务器运行在HTTP上，这意味着设备和服务器之间交换的数据没有加密。你不希望你的数据在线不加密，所以让我们安装一个证书。为此，你需要购买一个域名。</p><p id="b40a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">去<a class="ae kv" href="http://whatsmyip.org" rel="noopener ugc nofollow" target="_blank">whatsymip.org</a>保存你的IP地址，我们以后会用到。</p><p id="f041" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">在<a class="ae kv" href="https://namecheap.com" rel="noopener ugc nofollow" target="_blank">namecheap.com</a>或任何你信任的域名提供商上创建一个账户，并购买你的域名。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/6df2edb33a5061f23207859205d67c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mB2UUch_Y0UEqkkgCR0b3Q.png"/></div></div></figure><p id="f9a9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">然后，如果你使用过namecheap，进入<a class="ae kv" href="https://ap.www.namecheap.com/domains/list/" rel="noopener ugc nofollow" target="_blank">你的域名</a>，点击你的域名右边的<em class="no">管理</em>，显示高级信息标签。现在点击<em class="no">高级dns — </em>或者直接导航到AP . www . name cheap . com/Domains/domain control panel/your domain/advanced ns—添加一个带有Host @的A记录，并为您的IP赋值。然后添加一个主机为www的CNAME记录，并为您的域赋值。</p><p id="0341" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">最后，您的配置应该包括这两条记录:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/89777e4b822dd07f76049d082886731e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYVRO6WaTw0i6ZxSlBYIWQ.png"/></div></div></figure><p id="07df" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我们所做的是告诉域名，当它被访问时，应该从你的域名和<a class="ae kv" href="http://www.yourdomain." rel="noopener ugc nofollow" target="_blank"> www.yourdomain. </a>指向你的IP地址</p><p id="adb1" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">然后回到您的终端并安装certbot:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="760a" class="nj kx iq nf b gy nk nl l nm nn">sudo apt install certbot python-certbot-apache</span></pre><p id="bc81" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">在这一步中，我们将检索用于加密连接的证书，因此运行:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="b7a5" class="nj kx iq nf b gy nk nl l nm nn">sudo certbot --apache</span></pre><p id="82e5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">您应该这样配置它:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/1da616a5a4b281ecf6ad271a735b2cb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_7vzVFiPZ3BU2Pb-Xc5kg.png"/></div></div></figure><p id="0399" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">最后，回到<a class="ae kv" href="http://HTTP://rpi_ip_address," rel="noopener ugc nofollow" target="_blank">HTTP://rpi-IP-address</a>:1443进入控制面板，将yourdomain和www.yourdomain添加到nc-trusted-domains部分。</p><h1 id="8113" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">更改驱动器目录</h1><p id="4cfd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，我们需要将USB格式化为btrfs，但是不要担心，这并不难。将驱动器连接到raspberry pi，并拔下所有其他驱动器。然后运行:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="cde3" class="nj kx iq nf b gy nk nl l nm nn">sudo ncp-config</span></pre><p id="f1f9" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">然后导航到<em class="no">工具&gt;NC-格式-USB: </em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/fa350656699550950576480d03170704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*PBdeHcsBkJklgTlfI52fFQ.png"/></div></figure><p id="2f0a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">按照屏幕上的步骤格式化USB驱动器，然后按exit返回主页。在这一步之后，记住驱动器的名称或保留默认名称是很重要的。</p><p id="5ebb" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">现在导航到<em class="no">系统&gt;NC-自动安装</em>，遵循设置程序，当在此屏幕上时，用是替换否:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/2bcd13219842476d1b277819f315f445.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*g4X45jV0F-KsCT9yn4inDQ.png"/></div></figure><p id="ddc5" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">最后，导航到<em class="no"> config &gt; nc-datadir </em>并将数据目录更改为/media/yourdevicename，或者，如果您使用了默认名称/media/MyCloudDrive。</p><h1 id="5595" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">设置您的路由器</h1><p id="5a1f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在我们差不多完成了。我们只需要设置端口转发。为此，你需要像第一步那样回到调制解调器的页面，找到一个叫做端口转发或端口映射的部分。端口映射基本上是映射您的调制解调器，使某些端口在您的网络之外可用，这样当您访问您的ip:port时，该服务将在整个互联网上可用。在新的端口映射中，您必须为您的raspberry pi的IP添加一个TCP异常，以及作为内部和外部端口的端口443。对端口80进行同样的操作。</p><p id="c4ba" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">很好，我们基本上完成了。前往您的领域，测试一切是否正常。您应该会看到一个类似的页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/9358781962d289cbdae9cf0e6b469e8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJhN4TuYmbNDdrWQf72F3g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Nextcloud的登录页面。</p></figure><p id="b9d4" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">这意味着您现在可以使用nextcloud了。您可以使用之前保存的密码以用户名ncp登录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/8981d37510a8228a2b0d9f8a29ae13c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4hjDgkVKLkP8MDTcL1vGdg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Nextcloud的文件页面。</p></figure><p id="88f8" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">如你所见，你现在可以通过互联网安全地访问你所有的文件。你也可以下载适用于安卓系统和T2系统的应用程序，并像在谷歌照片中一样设置照片备份。</p></div></div>    
</body>
</html>