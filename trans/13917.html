<html>
<head>
<title>Can I Grade Loans Better Than LendingClub?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我能比LendingClub更好地对贷款进行评级吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/loan-grading-showdown-ba64110c99f2?source=collection_archive---------39-----------------------#2020-09-24">https://towardsdatascience.com/loan-grading-showdown-ba64110c99f2?source=collection_archive---------39-----------------------#2020-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f241" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将我的神经网络与企业基准对比</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/27e0ff8b90f4f651938a46f4e7072357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhgAppUArvvuDGcnk1zOOw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">纽约公共图书馆在<a class="ae kv" href="https://unsplash.com/s/photos/loans?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><ol class=""><li id="c2cb" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated"><a class="ae kv" href="#4041" rel="noopener ugc nofollow"> <strong class="ky ir">简介</strong> </a></li><li id="e7ae" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#2305" rel="noopener ugc nofollow"> <strong class="ky ir">基本规则</strong> </a></li><li id="c641" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#60f3" rel="noopener ugc nofollow"> <strong class="ky ir">测试指标</strong> </a></li><li id="03ba" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#1a0d" rel="noopener ugc nofollow"> <strong class="ky ir">轮到lending club</strong></a></li><li id="6571" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#55bc" rel="noopener ugc nofollow"> <strong class="ky ir">轮到我了</strong> </a></li><li id="c109" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#d2ae" rel="noopener ugc nofollow"> <strong class="ky ir">胜利！</strong> </a></li><li id="d015" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><a class="ae kv" href="#644e" rel="noopener ugc nofollow"> <strong class="ky ir">延伸阅读</strong> </a></li></ol><h1 id="4041" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">介绍</h1><p id="156c" class="pw-post-body-paragraph ml mm iq ky b kz mn jr mo lb mp ju mq ld mr ms mt lf mu mv mw lh mx my mz lj ij bi translated">如果你错过了，我<a class="ae kv" rel="noopener" target="_blank" href="/loan-risk-neural-network-30c8f65f052e">建立了一个神经网络来预测贷款风险</a>使用来自<a class="ae kv" href="https://www.lendingclub.com/" rel="noopener ugc nofollow" target="_blank"> LendingClub </a>的<a class="ae kv" href="https://www.kaggle.com/wordsforthewise/lending-club" rel="noopener ugc nofollow" target="_blank">公共数据集</a>。然后我构建了一个<a class="ae kv" href="https://tywmick.pythonanywhere.com/" rel="noopener ugc nofollow" target="_blank">公共API </a>来服务模型的预测。那很好，但是…我的模型有多好？</p><p id="ff47" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">今天我将对它进行测试，将它与发放这些贷款的机构的风险模型进行对比。没错，LendingClub在数据集中包括了他们自己计算的贷款等级(和子等级)，因此本世纪(或至少本周)最激动人心的风险建模对决的所有部分都已就绪。愿最好的算法胜出！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="08a7" class="nl lu iq nh b gy nm nn l no np">(1110171, 70)<!-- --> </span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="7272" class="nl lu iq nh b gy nm nn l no np">5 rows × 70 columns</span></pre><p id="002a" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">顺便说一下，这篇文章改编自一个Jupyter笔记本，所以如果你想在你自己的笔记本上跟随，继续前进，在Kaggle 上叉我的<a class="ae kv" href="https://www.kaggle.com/tywmick/can-i-grade-loans-better-than-lendingclub" rel="noopener ugc nofollow" target="_blank">！</a></p><h1 id="2305" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">基本规则</h1><p id="03e7" class="pw-post-body-paragraph ml mm iq ky b kz mn jr mo lb mp ju mq ld mr ms mt lf mu mv mw lh mx my mz lj ij bi translated">这将是一场公平的战斗——我的模型不会使用LendingClub在计算贷款等级时无法访问的任何数据(包括等级本身)。</p><p id="980d" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">我将按时间顺序对数据集进行排序(使用<code class="fe nq nr ns nh b">issue_d</code>列，即发放贷款的月份和年份),并将它分成两部分。前80%我将用于训练我的竞争模型，我将比较后20%的表现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="2fff" class="nl lu iq nh b gy nm nn l no np">The test set contains 222,035 loans.</span></pre><p id="6409" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">在测试集的早期，我的模型可能有一点信息优势，因为我接受了一些贷款的培训，这些贷款在LendingClub对这些贷款进行评级时可能还没有结束。另一方面，LendingClub可能在测试集的后期具有轻微的信息优势，因为他们在测试集的早期就已经知道一些贷款的结果。</p><p id="d6a2" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">顺便说一句，我不得不称赞迈克尔·伍伦(Michael Wurm)提出的<a class="ae kv" rel="noopener" target="_blank" href="/intelligent-loan-selection-for-peer-to-peer-lending-575dfa2573cb#fac8">将我的模型的表现与LendingClub的贷款等级进行比较的想法</a>，但我的方法相当不同。我不是在试图模拟一个投资组合的表现；我只是在评估我对简单风险的预测有多好。</p><h1 id="60f3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">测试度量</h1><p id="c292" class="pw-post-body-paragraph ml mm iq ky b kz mn jr mo lb mp ju mq ld mr ms mt lf mu mv mw lh mx my mz lj ij bi translated">测试:谁能挑选出最好的A级贷款，根据我上一个笔记本中的独立变量来判断，即预期借款人将偿还的预期贷款回报的一部分(我将其设计为<code class="fe nq nr ns nh b">fraction_recovered</code>)。</p><p id="64bb" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">LendingClub先拿盘子。我会从测试集中收集他们所有的A级贷款，统计一下，算出他们的平均值<code class="fe nq nr ns nh b">fraction_recovered</code>。这个平均值将是我的模型必须超越的指标。</p><p id="80e8" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">然后，我将使用我在上一个笔记本中选定的相同的<a class="ae kv" rel="noopener" target="_blank" href="/loan-risk-neural-network-30c8f65f052e#b158">管道和参数</a>在训练集上训练我的模型。一旦对它进行了训练，我将使用它在测试集上进行预测，然后收集与LendingClub的A级贷款数量相等的顶级预测数量。最后，我将计算这个子集上<code class="fe nq nr ns nh b">fraction_recovered</code>的平均值，这样我们就有了赢家！</p><h1 id="1a0d" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">轮到LendingClub了</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="cddd" class="nl lu iq nh b gy nm nn l no np">LendingClub gave 38,779 loans in the test set an A grade.</span><span id="e1e0" class="nl lu iq nh b gy nt nn l no np">Average `fraction_recovered` on LendingClub's grade A loans:<br/>0.96021</span></pre><p id="7ec8" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">这个比例相当高。我有点紧张。</p><h1 id="55bc" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">轮到我了</h1><p id="b148" class="pw-post-body-paragraph ml mm iq ky b kz mn jr mo lb mp ju mq ld mr ms mt lf mu mv mw lh mx my mz lj ij bi translated">首先，我将从我以前的笔记本中复制我的<code class="fe nq nr ns nh b">run_pipeline</code>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7366" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">现在是关键时刻了:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="f346" class="nl lu iq nh b gy nm nn l no np">Epoch 1/100<br/>6939/6939 - 11s - loss: 0.0245<br/>Epoch 2/100<br/>6939/6939 - 11s - loss: 0.0204<br/>Epoch 3/100<br/>6939/6939 - 11s - loss: 0.0203<br/>Epoch 4/100<br/>6939/6939 - 12s - loss: 0.0202<br/>Epoch 5/100<br/>6939/6939 - 11s - loss: 0.0202<br/>Epoch 6/100<br/>6939/6939 - 11s - loss: 0.0202<br/>Epoch 7/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 8/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 9/100<br/>6939/6939 - 13s - loss: 0.0201<br/>Epoch 10/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 11/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 12/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 13/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 14/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 15/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 16/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 17/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 18/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 19/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 20/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 21/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 22/100<br/>6939/6939 - 11s - loss: 0.0201<br/>Epoch 23/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 24/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 25/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 26/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 27/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 28/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 29/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 30/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 31/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 32/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 33/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 34/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 35/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 36/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 37/100<br/>6939/6939 - 13s - loss: 0.0200<br/>Epoch 38/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 39/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 40/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 41/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 42/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 43/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 44/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 45/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 46/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 47/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 48/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 49/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 50/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 51/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 52/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 53/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 54/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 55/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 56/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 57/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 58/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 59/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 60/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 61/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 62/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 63/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 64/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 65/100<br/>6939/6939 - 13s - loss: 0.0200<br/>Epoch 66/100<br/>6939/6939 - 13s - loss: 0.0200<br/>Epoch 67/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 68/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 69/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 70/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 71/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 72/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 73/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 74/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 75/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 76/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 77/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 78/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 79/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 80/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 81/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 82/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 83/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 84/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 85/100<br/>6939/6939 - 13s - loss: 0.0200<br/>Epoch 86/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 87/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 88/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 89/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 90/100<br/>6939/6939 - 12s - loss: 0.0200<br/>Epoch 91/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 92/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 93/100<br/>6939/6939 - 13s - loss: 0.0200<br/>Epoch 94/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 95/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 96/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 97/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 98/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 99/100<br/>6939/6939 - 11s - loss: 0.0200<br/>Epoch 100/100<br/>6939/6939 - 12s - loss: 0.0200</span><span id="e342" class="nl lu iq nh b gy nt nn l no np">Average `fraction_recovered` on Ty's grade A loans:<br/>0.96108</span></pre><h1 id="d2ae" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">胜利！</h1><p id="7cf1" class="pw-post-body-paragraph ml mm iq ky b kz mn jr mo lb mp ju mq ld mr ms mt lf mu mv mw lh mx my mz lj ij bi translated">唷，好险！我的胜利可能太小，没有统计学意义，但嘿，看到我能跟上LendingClub最优秀和最聪明的人，这很酷。</p><h1 id="644e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">进一步阅读</h1><ul class=""><li id="4281" class="kw kx iq ky b kz mn lb mp ld nu lf nv lh nw lj nx ll lm ln bi translated"><a class="ae kv" rel="noopener" target="_blank" href="/loan-risk-nlp-d98021613ff3">贷款风险的自然语言处理</a></li></ul></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="923d" class="pw-post-body-paragraph ml mm iq ky b kz la jr mo lb lc ju mq ld nb ms mt lf nc mv mw lh nd my mz lj ij bi translated">我现在真正想知道的是每个贷款俱乐部等级和子等级对应的估计风险的量化范围，但看起来<a class="ae kv" href="https://www.lendingclub.com/foliofn/rateDetail.action" rel="noopener ugc nofollow" target="_blank">是专有的</a>。有没有人知道贷款等级一般是不是和学术类的字母等级一样对应一定的百分比范围？如果没有，有没有更好的基准来评估我的模型的性能？请留下您的回复，加入我们的讨论吧！</p></div></div>    
</body>
</html>