<html>
<head>
<title>Beginner’s guide to pymongo using Spotify Top50 2019 songs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Spotify Top50 2019歌曲的pymongo初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beginners-guide-to-pymongo-using-spotify-top50-2019-songs-6c0eaa80b1af?source=collection_archive---------37-----------------------#2020-10-10">https://towardsdatascience.com/beginners-guide-to-pymongo-using-spotify-top50-2019-songs-6c0eaa80b1af?source=collection_archive---------37-----------------------#2020-10-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="908a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用pymongo编程</h2></div><p id="a9da" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章旨在解释如何使用pymongo与mongoDB接口来执行CRUD操作。为了完成这篇文章，如果你对mongoDB及其内容有基本的工作知识，这是推荐的，但不是强制的。本帖涵盖的主题如下</p><ul class=""><li id="f4b7" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae lk" href="#1902" rel="noopener ugc nofollow">简介</a></li><li id="5ea0" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#5162" rel="noopener ugc nofollow">在pymongo中配置客户端</a></li><li id="9273" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#b9ba" rel="noopener ugc nofollow">创建数据库、收藏、文档</a></li><li id="693a" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#45ea" rel="noopener ugc nofollow">从集合中查询单据</a></li><li id="16f1" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#ce1b" rel="noopener ugc nofollow">更新集合中的文档</a></li><li id="16b4" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#8aee" rel="noopener ugc nofollow">从收藏中删除文档</a></li><li id="7f8c" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#a969" rel="noopener ugc nofollow">从mongo服务器删除数据库、集合</a></li><li id="2782" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="#81ce" rel="noopener ugc nofollow">参考文献</a></li></ul><p id="ee24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您只对特定部分感兴趣，请点击上面的主题直接导航到相应的部分。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/9de251347d156cbf4f2ba4ddfacb36fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C5FMHNk5ghjBK3ZW"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">照片由<a class="ae lk" href="https://unsplash.com/@akshayspaceship?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿克谢·肖汉</a>在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="1902" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">介绍</h1><p id="0a49" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">MongoDB是一个NoSQL(不仅仅是SQL)数据库，是使用最广泛的数据库之一。它是用C++原生编写的，这使得它在执行CRUD应用程序时非常快速有效。</p><p id="30d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">具体来说，MongoDB是一个文档数据库，其中的记录或条目以键值格式存储为文档，与json或python字典非常相似；从而允许使用对象符号从数据库中检索数据。</p><p id="2f05" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用mongoDB的一个好处是，作为一个NoSQL数据库，只要遵循键值对，就不会受到数据库中可以存储的数据类型的限制。在SQL中，有一个非常严格的模式，每个记录都必须遵守，这使得它非常严格，而MongoDB在这方面允许完全的灵活性。在一些应用程序中，我们事先不知道会有什么&amp;多少数据到来，但是需要将它存储到数据库中；mongoDB是解决这种用例的方法。</p><p id="6e1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对mongoDB和SQL中涉及的术语进行比较分析，可以更好地理解用于存储数据的mongoDB服务；内容如下:</p><ul class=""><li id="3dda" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">数据库是存储在服务器上的一组数据；它在mongoDB和SQL中都被称为数据库。</li><li id="5c33" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">数据库是由一些更小的组组成的，在mongoDB中称为集合，在SQL中称为表。</li><li id="5d31" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">SQL中的行由保存某些数据类型的数据的记录或行组成，在mongoDB中也称为文档。</li><li id="6c46" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated">SQL中的列由可以保存特定数据类型的数据的特征组成；这在mongoDB中被称为字段。关键的区别在于，在mongoDB中，文档之间的字段可以不同，而对于SQL表，所有行的列必须相同。</li></ul><p id="129f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">特别是为了更熟悉mongoDB，我建议你查看一下这个GitHub库，它解释了如何开始使用它。</p><p id="6583" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">pymongo是python中的一个包，它帮助我们配置mongoDB数据库并从中检索文档。因为对于任何与数据相关的工作，python都支持处理、建模、争论任何类型的数据，所以将数据存储在像mongoDB这样的数据库中并使用python按需检索是有意义的，pymongo非常容易地简化了这个用例。要在您的系统上安装pymongo，您需要在系统上本地安装python和pip你可以按照<a class="ae lk" href="https://realpython.com/installing-python/" rel="noopener ugc nofollow" target="_blank">这个教程</a>来获取相同的。一旦你安装了它们，只要在你的终端或命令提示符下运行下面的命令，你就可以很好地完成这篇文章的其余部分了。</p><pre class="lr ls lt lu gt nd ne nf ng aw nh bi"><span id="8724" class="ni mh iq ne b gy nj nk l nl nm">pip install pymongo</span></pre><p id="214f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在这里使用的数据包括2019年spotify排名前50的歌曲；数据集中的预览如下:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nn"><img src="../Images/51d5fd1d6ab30f69397f749a39c50bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6SpLpOkWFaM-rk3mPPLp5w.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="5829" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据集包括曲目名称和某些相关字段，如谁演唱了它，它是什么类型，以及其他量化参数，如它有多流行，歌曲有多长等。要深入了解数据集，请访问kaggle了解其他参数，可以使用该数据集执行哪些任务等等。我们将使用这个数据集创建一个简单的场景来演示mongoDB中的CRUD(创建、读取、更新和删除)功能。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="5162" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">在pymongo中配置客户端</h1><p id="566e" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">一旦在系统上安装了python、pymongo和mongoDB，就可以打开python脚本并开始编码了。</p><p id="0846" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您需要做的第一件事是创建一个到mongoDB服务器的连接。安装mongoDB后，大多数系统在本地主机上使用端口27017来托管mongoDB服务器，如果您/您的组织有专用的服务器，请确保获得到您的服务器的链接并创建如下连接。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="0569" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你有了这个连接，你就可以使用客户端对象来执行任何CRUD操作，我们将在下面的章节中看到。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="b9ba" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">创建数据库、集合、文档</h1><p id="7aaa" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">使用上面的集合对象，我们查看现有的数据库、集合和其中包含的文档，并创建新的数据库。让我们首先来看看如何查看现有的数据库和集合。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi oc"><img src="../Images/b386b0d0b0cf8b3fd6f945b6642dd3ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByutA62YOY7xa0twmKWZMA.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="e71f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您最近才安装mongoDB，默认情况下会创建这三个数据库，因为我们还没有创建其他数据库，所以没有其他数据库。让我们创建一个名为spotifyData的数据库，其中有一个名为Top50的集合。我们可以这样做</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="68d5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，这里有一个陷阱。请注意，数据库和集合是在MongoDB中延迟创建的。就像在集合和数据库中一样，只有在第一个文档被插入时才会被创建。到目前为止，我们已经有了指向数据库和集合对象的指针，但是它们还没有被创建。让我们将Spotify 2019年前50首歌曲数据集的文档插入到前50名集合中。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="74d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在mongoDB集合中创建文档有两种主要方法。</p><p id="992d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您有一个文档时，可以使用insert_one方法在集合中创建一个文档。当一系列文档都出现在一个列表中时，可以使用insert_many方法在集合中创建所有这些文档。</p><p id="be87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些文档基本上是python中的字典，以字段作为键，以值作为数据。此示例中的样本文档如下:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/51f80a040508db4f831fe4170be83124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*dRc79p0u50JqlRWt6QG-DA.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="c88a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于mongoDB来说，id字段是一个重要的字段。可以认为它类似于SQL中的主键。它是每个文档的唯一标识符。任何集合都不能有两个具有相同id的文档。如果不显式提供_id字段，mongoDB将自己生成一个，它是一个随机的字符串对象，不匹配任何其他对象的_id。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="45ea" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">从集合中查询文档</h1><p id="111d" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">接下来是从mongoDB集合中读取或查询。一旦我们创建了一个数据库和一个集合来保存我们的前50首歌曲，我们就可以使用它来查找任何记录，方法是对不同的字段施加约束，使我们能够只从我们的集合中过滤所需的数据。</p><p id="3c2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们希望看到所有进入2019年前50名的泰勒·斯威夫特的歌曲，我们可以如下执行我们的查询。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi oe"><img src="../Images/0e4557ed60d0b0e2493d75bf9a2436df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mi3ZeXGks-3Fl4lDvPk3Gw.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="bf00" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到，泰勒·斯威夫特只有一首歌进入了2019年的前50名，那就是《你需要冷静》。</p><p id="3d08" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，上面的代码片段中显示的find方法没有任何约束，将查找并返回集合中所有可用的文档。只有当我们指定一些约束时，它才会返回过滤后的数据。</p><p id="3e33" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们想找出所有流行度在90或以上的歌曲。我们可以用下面的查询来完成。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi of"><img src="../Images/34fb3e3e16080516eeae99cbc33ec568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSVnuwUos3CRS21_OdhQdA.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="da06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们想找出哪些歌曲来自流行音乐流派，并对所有歌曲进行查询。现在，在文件中，我们有许多不同的流行歌曲，用形容词来描述这些子流派。所以我们将使用一个正则表达式来过滤文档，如下所示。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi og"><img src="../Images/cecf5c693190a7b76cfbb1cf0a97b75f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kM6uok1dX6EfgDrSrs61kg.png"/></div></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="4c8e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在本节中，我们看到了如何使用pymongo的find函数从mongoDB中查询数据。正如我们在上面的例子中所看到的，它提供了一些很好的工具来基于数字和字符串相关的约束提取数据。让我们看看如何使用pymongo更新mongo集合中文档的数据。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="ce1b" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">更新集合中的文档</h1><p id="3fc1" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">假设我们的集合中有一些数据，我们想要更新一个或多个文档中的一个或多个字段。在pymongo中使用update_one和update_many函数可以做到这一点。我们将研究update_many函数，因为前者是后者的一个特例。</p><p id="54aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在大多数评论/反馈中，我们看到事物被分为1到5级。然而，在这里，我们看到的是受欢迎程度是按百分比进行评估的。假设我们想更新它，使受欢迎程度限制在1-5之间。这可以通过将每个文档的流行度字段除以20(即乘以0.05)来完成。下面是我们如何使用pymongo来实现它。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="329c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们想要更新所有的文档，所以我们传递了一个空的过滤标准，否则如果我们只想更新一组特定的文档，我们也可以这样做。比方说，我们想把所有艾德·希兰的歌曲都换成泰迪这个名字(他的昵称)。这可以通过添加这样的过滤标准来实现。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/d656c89e22e7802cbc525891ccc65de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*O1OcoF1pJgindXCL9WGvsQ.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="d629" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到，艾德·希兰在2019年有4首歌，老实说，这对一个歌手来说已经很多了；但所有这些都被修改，以反映艺术家的名字泰迪。upsert的观点很有趣。如果过滤条件与任何文档都不匹配，它基本上会创建一个文档，如果upsert设置为True，它会将艺术家姓名设置为teddy。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="8aee" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">从集合中删除文档</h1><p id="b57c" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">假设我们想删除德雷克演唱的2019年前50名歌曲中的歌曲(不是针对他，只是为了演示)，我们可以使用delete_one或delete_many方法。由于我们想要删除所有歌曲，我们可以使用delete_many命令，如下所示。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/dcba9b600caa22f90ab3467549e29080.png" data-original-src="https://miro.medium.com/v2/resize:fit:282/format:webp/1*psjYCoZYkgvEeaJl7vL5ng.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="a5d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来德雷克只有一首歌进入了前50名，所以在这种情况下，delete_one和delete_many会有相同的最终结果。</p><p id="7da9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们尝试删除所有受欢迎度为80或以下(即在新的分级系统中为4或以下)的文档。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9f930f042c98c4bf5fc7d92a046d7a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:220/format:webp/1*5tBnyvjSHnCxhCc_Ft54Qg.png"/></div><p class="mc md gj gh gi me mf bd b be z dk translated">图片由Vinayak提供</p></figure><p id="3355" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有三首歌的流行度低于80或4(在新的范围内)。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="a969" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated">从mongo服务器删除数据库、集合</h1><p id="dff2" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">假设我们不需要mongoDB数据库中的某个特定集合，我们想删除它。它可能在任何时间点发生，因为任何人都不再需要访问数据，数据已经过时，没有任何用途或任何其他原因。因为我们的数据库中只有一个集合，所以现在删除它没有意义，只是为了演示，下面是我们如何做的。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1124" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似地，如果我们想要删除一个数据库，我们可以使用客户端变量来保存到mongo服务器的连接并删除数据库。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="fc39" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了与mongodb服务器交互，显式关闭已经建立的连接总是一个好的做法。您可以简单地通过使用命令来完成</p><pre class="lr ls lt lu gt nd ne nf ng aw nh bi"><span id="d9e1" class="ni mh iq ne b gy nj nk l nl nm">client.close()</span></pre><p id="6d92" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就把我们带到了这篇文章的结尾。我希望您已经有了使用pymongo通过脚本与mongoDB进行编程交互的良好起点。如果你想在一个地方看这篇文章的所有代码，或者更深入地研究，或者更喜欢教程的视频媒体，请查看下面的参考资料部分。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="81ce" class="mg mh iq bd mi mj nv ml mm mn nw mp mq jw nx jx ms jz ny ka mu kc nz kd mw mx bi translated"><strong class="ak">参考文献</strong></h1><ul class=""><li id="6ca1" class="lb lc iq kh b ki my kl mz ko ok ks ol kw om la lg lh li lj bi translated"><a class="ae lk" href="https://www.kaggle.com/leonardopena/top50spotify2019" rel="noopener ugc nofollow" target="_blank">Spotify 2019年数据集前50名歌曲</a></li><li id="b5b0" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="https://www.datacamp.com/community/tutorials/introduction-mongodb-python" rel="noopener ugc nofollow" target="_blank">py mongo上的Datacamp文章</a></li><li id="23d7" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="https://github.com/ElisonSherton/pymongo-basics" rel="noopener ugc nofollow" target="_blank">帖子中代码的Github回购链接</a></li><li id="b838" class="lb lc iq kh b ki ll kl lm ko ln ks lo kw lp la lg lh li lj bi translated"><a class="ae lk" href="https://www.youtube.com/watch?v=rE_bJl2GAY8" rel="noopener ugc nofollow" target="_blank">视频:pymongo基础知识，techwithtim制作</a></li></ul></div></div>    
</body>
</html>