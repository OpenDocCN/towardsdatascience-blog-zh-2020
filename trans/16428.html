<html>
<head>
<title>How to Calculate Feature Importance with SQL — The Essential Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SQL计算特征重要性——基本指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-calculate-feature-importance-with-sql-the-essential-guide-400b5366a88c?source=collection_archive---------33-----------------------#2020-11-12">https://towardsdatascience.com/how-to-calculate-feature-importance-with-sql-the-essential-guide-400b5366a88c?source=collection_archive---------33-----------------------#2020-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b5bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">是的，SQL可以做到这一点。需要5行代码。</h2></div><p id="1def" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">机器学习不再仅仅是<em class="le"> Python </em>和<em class="le"> R </em>的专利。用大家都知道的语言——<em class="le">SQL</em>，可以直接在数据库中做很多事情。今天我们将探索如何用它来计算特性的重要性，大约有五行代码。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/360e2da15999395c17d81823006ed1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y9MBn36r8met30Y4Ev86ag.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae lv" href="https://unsplash.com/@jsweissphoto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Josiah Weiss </a>在<a class="ae lv" href="https://unsplash.com/s/photos/waves?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="978a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不想看书？看看我关于这个主题的视频:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="6a4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将使用<a class="ae lv" href="https://www.oracle.com/index.html" rel="noopener ugc nofollow" target="_blank"> Oracle云</a>。这是免费的，所以请注册并创建一个OLTP数据库实例(版本19c，有0.2TB的存储)。一旦完成，通过<em class="le">SQL Developer Web</em>或任何其他工具建立连接。</p><p id="d75c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至于数据集，我们将使用一个<em class="le">电信行业变动</em>数据集，可从这里下载<a class="ae lv" href="https://www.betterdatascience.com/wp-content/uploads/2020/11/churn.csv" rel="noopener ugc nofollow" target="_blank">。我之所以选择这个数据集，是因为它有许多功能，不需要任何手动准备。</a></p><p id="1775" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章的结构如下:</p><ul class=""><li id="8da5" class="ly lz it kk b kl km ko kp kr ma kv mb kz mc ld md me mf mg bi translated">什么是特征重要性？</li><li id="a61b" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated">数据集加载</li><li id="217d" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated">SQL的特性重要性</li><li id="cd4e" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated">结论</li></ul></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="9e2c" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">什么是特征重要性？</h1><p id="8d86" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">要素重要性是一种根据输入要素(属性)对预测(用于预测目标变量)的有用程度为输入要素(属性)分配分数的技术。</p><p id="e7fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个概念对于预测建模是必不可少的，因为您希望只保留重要的特征，而丢弃其他特征。通过这样做，您可以减少维度和噪声。出于显而易见的原因，它还可以让您更好地理解您的数据。</p><p id="2b3d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，计算特征重要性可以提供对预测模型工作的洞察。通过了解重要性分数，您可以立即知道模型认为什么是最重要的，以及它为什么以这种方式进行预测。</p><p id="ce00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，有一个定量的确认总是好的，不要工作在纯粹的假设上。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="7351" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">数据集加载</h1><p id="e09d" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">如果您正在跟进，您应该已经下载了<a class="ae lv" href="https://www.betterdatascience.com/wp-content/uploads/2020/11/churn.csv" rel="noopener ugc nofollow" target="_blank">数据集</a>。你必须用你选择的工具将它加载到数据库中——我用的是<em class="le"> SQL Developer Web </em>，但是你可以使用几乎任何东西。</p><p id="876c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">加载过程很简单——点击<em class="le">上传</em>按钮，选择数据集，然后点击几次<em class="le">下一步</em>:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nq"><img src="../Images/a88bc99c58f6dee66cc069edb68e3fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lflnjuttVXnDvrjIR51PKQ.gif"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">图1-使用SQL Developer Web加载数据集(图片由作者提供)</p></figure><p id="5006" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的存储在<code class="fe nr ns nt nu b">churn</code>表中。让我们通过执行一条<code class="fe nr ns nt nu b">SELECT * FROM churn</code>语句来看看里面有什么:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nv"><img src="../Images/054dd05b9abcaa2deeef93fdead1df59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKB-k_3ai0HA7IrxhydAhg.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">图片2-流失数据集的前10行(作者图片)</p></figure><p id="c6ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以继续进行要素重要性计算。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="06b4" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">SQL的特性重要性</h1><p id="7542" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">正如所承诺的，这将只需要几行代码。特征重要性通过<code class="fe nr ns nt nu b">DBMS_PREDICTIVE_ANALYTICS</code>包的<code class="fe nr ns nt nu b">EXPLAIN</code>过程获得。它需要三个参数:</p><ul class=""><li id="54a4" class="ly lz it kk b kl km ko kp kr ma kv mb kz mc ld md me mf mg bi translated"><code class="fe nr ns nt nu b">data_table_name</code>–存储源数据的地方</li><li id="6840" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated"><code class="fe nr ns nt nu b">explain_column_name</code>–目标变量的名称</li><li id="c322" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated"><code class="fe nr ns nt nu b">result_table_name</code>–存储特征重要性的新表格</li></ul><p id="0e81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是如何用代码实现它:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nw lx l"/></div></figure><p id="1a3f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！现在，您可以用一个简单的<code class="fe nr ns nt nu b">SELECT</code>语句来看看重要性。下面的表格对功能进行了排序，因此最重要的功能会首先显示:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nw lx l"/></div></figure><p id="4b19" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果如下:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0ce07e36817915e539154380d28405d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*gp5MtDbPrOIcY7iYTTxhag.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">图片3-特征重要性(作者图片)</p></figure><p id="ddac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从前面的图像中，你可以立即看出什么是重要的，什么是不重要的。下一步是将这些信息用于预测模型。这有点超出了本文的范围，但是您可能希望继续进行分类建模。</p><p id="d598" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事实证明，这也只能用SQL来执行！<a class="ae lv" href="https://www.betterdatascience.com/machine-learning-with-sql%E2%80%8A-%E2%80%8Aits-easier-than-you-think/" rel="noopener ugc nofollow" target="_blank">下面是如何</a>。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="d264" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">离别赠言</h1><p id="353f" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">我想你没有想到用SQL计算特性重要性这么容易。但它是，就像数据库中的其他机器学习一样。SQL仍然不是机器学习的语言，但我们可以说，随着这些最近的进步，未来看起来很有希望。</p><p id="468f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要错过SQL系列的其他机器学习:</p><ul class=""><li id="a5a1" class="ly lz it kk b kl km ko kp kr ma kv mb kz mc ld md me mf mg bi translated"><a class="ae lv" href="https://www.betterdatascience.com/sql-regression/" rel="noopener ugc nofollow" target="_blank">使用SQL的机器学习(回归)</a></li><li id="44b5" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated"><a class="ae lv" href="https://www.betterdatascience.com/machine-learning-with-sql%E2%80%8A-%E2%80%8Aits-easier-than-you-think/" rel="noopener ugc nofollow" target="_blank">使用SQL的机器学习(分类)</a></li><li id="d13c" class="ly lz it kk b kl mh ko mi kr mj kv mk kz ml ld md me mf mg bi translated"><a class="ae lv" href="https://www.betterdatascience.com/time-series-forecasting-with-sql%E2%80%8A-%E2%80%8Aits-easier-than-you-think/" rel="noopener ugc nofollow" target="_blank">使用SQL(时间序列)的机器学习</a></li></ul><p id="29d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请在下面的评论区留下你的想法。</p><h2 id="c133" class="ny mu it bd mv nz oa dn mz ob oc dp nd kr od oe nf kv of og nh kz oh oi nj oj bi translated">加入我的私人邮件列表，获取更多有用的见解。</h2></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="c29c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">喜欢这篇文章吗？成为</em> <a class="ae lv" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="le">中等会员</em> </a> <em class="le">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="ok ol gp gr om on"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd iu gy z fp os fr fs ot fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb lp on"/></div></div></a></div></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="bf4d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">原载于2020年11月12日https://betterdatascience.com</em><a class="ae lv" href="https://betterdatascience.com/feature-importance-with-sql/" rel="noopener ugc nofollow" target="_blank"><em class="le"/></a><em class="le">。</em></p></div></div>    
</body>
</html>