<html>
<head>
<title>Create a professional dashboard with Dash and CSS Bootstrap</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Dash和CSS引导创建专业仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5?source=collection_archive---------1-----------------------#2020-11-01">https://towardsdatascience.com/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5?source=collection_archive---------1-----------------------#2020-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="ccfa" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="c02e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在<a class="ae ko" href="https://github.com/gabri-al/corporate-dashboard" rel="noopener ugc nofollow" target="_blank"> Git </a>和<a class="ae ko" href="https://corporate-dash.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上有一个逐步解释的例子</h2></div></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="792f" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">介绍</h1><p id="33d1" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本文中，我将按照我的步骤创建一个交互式仪表板，使用PlotlyDash，一个Python和R的库，并使用CSS Bootstrap增强布局。</p><blockquote class="mk ml mm"><p id="7c8f" class="lo lp mn lq b lr mo ka lt lu mp kd lw mq mr lz ma ms mt md me mu mv mh mi mj ij bi translated">D <!-- --> ash库基于Flask、Plotly.js和React.js编写，允许用纯Python构建数据可视化应用程序，通过web浏览器呈现。</p></blockquote><p id="fc5a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我产生的最终结果可以显示在这里:<a class="ae ko" href="https://corporate-dash.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://corporate-dash.herokuapp.com/</a></p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi mw"><img src="../Images/298d5ec132321d430c5c038b9a03f4a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_EtYl5e8ahSVRI39xavE5A.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="9147" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这是一个多页仪表板，模拟一个业务场景，其中通常有一些布局指南要遵守(公司颜色方案、预定义的字体、可以激励我们的公司网站等)和一些与销售相关的KPI要监控。</p><p id="502c" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">第一页充满了不同类型的图表(散点图、条形图、气泡图、热图)和一个摘要表，带有随机数据；其他页面是空白的，但是对于展示如何构建多页面结构很有用。</p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><p id="5e1a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在本文中，我将介绍:</p><p id="f3a6" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#ab91" rel="noopener"> <strong class="lq ja"> 1。仪表板目标</strong> </a></p><p id="1fd3" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#b13a" rel="noopener">②<strong class="lq ja">。破折号</strong>入门</a></p><p id="a83c" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#059c" rel="noopener"> <strong class="lq ja"> 3。为多页仪表板配置文件夹结构</strong> </a></p><p id="0580" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#4adb" rel="noopener"> <strong class="lq ja"> 4。用CSS引导网格系统概念化布局</strong> </a></p><p id="6dfd" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#469c" rel="noopener"> <em class="mn"> 4.1用CSS Bootstrap构建布局框架</em> </a></p><p id="2f9a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#0767" rel="noopener"> <em class="mn"> 4.2样式破折号组件访问它们的CSS类</em> </a></p><p id="a34a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#f8c5" rel="noopener"> 5。<strong class="lq ja">回调&amp;组件</strong>T3】</a></p><p id="8301" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#b179" rel="noopener"> <em class="mn"> 5.1多下拉筛选:如何拥有“全选”选项</em> </a></p><p id="7836" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#a4a9" rel="noopener"> <em class="mn"> 5.2用热图揭示季节性模式</em> </a></p><p id="7ce4" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#0d77" rel="noopener"> <em class="mn"> 5.3悬停在数据点上时提供附加信息</em> </a></p><p id="52dd" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#fd73" rel="noopener">⑥<strong class="lq ja">⑥。如何部署和共享仪表板</strong> </a></p><p id="d48b" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><a class="ae ko" href="http://medium.com/gabri-albini/create-a-professional-dasbhoard-with-dash-and-css-bootstrap-e1829e238fc5#9a04" rel="noopener"> <strong class="lq ja"> 7。结论</strong> </a></p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="ab91" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">1.仪表板目标</h1><p id="5cb7" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">仪表板旨在提供一些与业务相关的KPI的清晰而准确的视图，使最终用户能够理解所呈现的内容，找到所需的信息，应用一些过滤器，并有希望得出一些结论。</p><p id="8864" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这个仪表板设计得像一个网站，由不同的页面组成，顶部有一个导航条。</p><p id="24bf" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">每个页面内容分为三个部分:</p><ul class=""><li id="f7f5" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">可以应用于页面中显示的所有图表的一些顶级过滤器</li><li id="b5d2" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">摘要表也显示在顶部，使用户能够快速浏览主要KPI。理想情况下，目的是让用户避免浏览页面上的每一个图表，而是通过查看摘要表就能立即发现应该关注的地方。这个摘要表有一些条件颜色格式，就像交通灯一样，突出显示正/负值。</li><li id="0358" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">最后是一个图表网格，显示了主要KPI的不同视图</li></ul><p id="7888" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我有意避免为用户提供任何导出底层数据的方法:由于对数据隐私和数据丢失的担忧日益增加，仪表板只打算使用聚合数据。最终用户无法获得原始数据点。</p><h1 id="b13a" class="kw kx iq bd ky kz oa lb lc ld ob lf lg kf oc kg li ki od kj lk kl oe km lm ln bi translated">2.Dash入门</h1><p id="3a49" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">plotly Dash有大量的用户指南和介绍。</p><p id="196c" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我个人发现浏览这些资料非常有用，这解释了大量的例子:</p><ul class=""><li id="dec4" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">Dash官方网站<a class="ae ko" href="https://dash.plotly.com/" rel="noopener ugc nofollow" target="_blank">https://dash.plotly.com/</a>非常有用，易于阅读和导航，显示所有可用的组件及其主要属性</li><li id="4d52" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">本文从里到外解释了一个非常完整详细的例子:<a class="ae ko" rel="noopener" target="_blank" href="/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f4257c18a7f">https://towardsdatascience . com/how-to-build-a-complex-reporting-dashboard-using-dash-and-plotl-4f 4257 c 18 a 7 f</a></li><li id="9f99" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">我还寻找了大量Youtube视频，展示如何创建和定制基本的Dash布局和回调</li></ul><p id="21ca" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">尽管查阅了所有这些有用的资料，我不得不面对许多挑战，尤其是为了理解如何按照我想要的方式定制Dash组件。</p><p id="9954" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">出于这个原因，我也将在下面的步骤中关注这一方面:增强的功能和布局，最终结果的视觉识别是一个非常重要的方面，可以产生影响。</p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="059c" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">3.为多页仪表板配置文件夹结构</h1><p id="04ac" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">应按照Dash指南(【https://dash.plotly.com/urls】T2)的建议构建应用程序源代码文件，以实现多页面导航。基于这个指南，我使用了以下方法来最小化任何代码更改或改编。</p><p id="d0b9" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我的根文件夹包含:</p><ul class=""><li id="fd16" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated"><em class="mn"> app.py </em>:这个文件很基础，只会定义Flask需要的app变量。我只是简单地遵循Plotly Dash指南来创建这个文件。</li><li id="6566" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">index.py :这是一种导航文件，帮助应用程序管理不同页面的URL。此外，这个文件是非常标准的:我建议遵循Plotly Dash指南，因为我们只需要自定义路径名就可以了。</li><li id="74b3" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated"><em class="mn"> layouts.py </em>:所有页面html布局都将存储在这个文件中。考虑到一些组件(如页眉或导航条)必须在每个页面上重复，我创建了一些函数来返回它们，避免了代码中的重复</li><li id="0236" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated"><em class="mn"> callbacks.py </em>:所有回调(Dash组件背后的函数，定义用户与图形的交互)都将存储在这个文件中</li></ul><p id="7f3e" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在根文件夹中，Dash将查找:</p><ul class=""><li id="8e63" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">“<em class="mn">数据</em>子文件夹:包含仪表板的底层数据</li><li id="b00e" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">一个“<em class="mn">资产</em>”子文件夹:包含附加文件，如:图像；收藏夹图标，供浏览器使用；。css文件</li></ul><p id="3777" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">如果assets子文件夹遵循这种结构，应用程序将自动检测并使用favico.ico文件或。css文件，不需要任何代码！只需将图像命名为“favicon.ico ”,并将其放在root/assets中，Dash就会自动使用它。</p><p id="b829" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">根文件夹中还有一些附加文件(例如。gitgnore，README.md，Procfile，requirements.txt):在Heroku上部署app或者在Git Hub上存储代码都需要这些文件。</p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="4adb" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">4.用CSS引导网格系统概念化布局</h1><p id="ed2b" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">有了应用程序文件夹结构，接下来要配置的是页面的整体布局。谈一个web应用布局不能不提。css文件，集中了几乎所有的布局属性，可以被浏览器读取。</p><p id="89a9" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">用很少的话来说。css文件定义html组件的属性(字体属性、大小、颜色、背景等)，Dash也使用这些属性。</p><p id="8e21" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">应用程序将开始应用布局属性到相应的html组件，从。存储在应用程序的“资产”文件夹中的css文件。</p><p id="31e1" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">需要注意的是:如果同一个html组件的属性(例如H2 html标题字体系列)在多个。css文件，应用程序读取的最后一个文件(让我们忽略！重要的css后缀)。</p><p id="b44f" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">CSS属性也可以通过创建一些自定义的“类”来定义，然后分配给我们想要样式的html组件(如div)。</p><p id="f723" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在我的例子中，我用了3。css文件，我用一些前导数字来命名，以确保应用程序以特定的顺序读取它们:</p><ul class=""><li id="0250" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">自定义字体，定义应用程序使用的新字体系列(你可以从谷歌下载字体系列，复制它们。css内容。请注意，在字体文件中，有一些应用程序将下载的URL。如果您的应用程序将在离线环境中运行，您应该下载这些url的内容，并将其放在一个子文件夹中:root/assets/fonts，在字体中根据该路径名调整URL。css文件)</li><li id="eb91" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">自举。css标准文件，我将在下面描述(我基本上是从Bootstrap <a class="ae ko" href="https://getbootstrap.com/docs/3.4/getting-started/" rel="noopener ugc nofollow" target="_blank">网站</a>下载的官方CSS文件)</li><li id="1371" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">一个“corporate-style.css”包含了我在布局中引入的所有定制</li></ul><p id="fe48" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我已经看到许多精彩的破折号例子使用了基本的。css模板(【https://codepen.io/chriddyp/pen/bWLwgP.css】T2):这不是应用程序的要求，我选择不在我的仪表板上使用它(我已经使用了官方的。而是css引导文件)。</p><h2 id="469c" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">4.1使用CSS Bootstrap构建布局框架</h2><p id="f5d4" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">CSS Boostrap提供了很多预定义的。我们可以重用的css属性、类和布局功能。CSS Bootstrap以著名的“网格系统”而闻名，它可以根据所用设备的大小来帮助缩放网站页面。</p><p id="8611" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">简而言之，我们可以将我们的网页想象成一个由12行和12列组成的表格:我们的html组件可以放在这个网格中，它将根据显示它的设备的屏幕而具有动态的大小。</p><p id="3f80" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我认为这对我获得我心目中的布局帮助很大，如下所示:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oq"><img src="../Images/c1cb2a3a9db39f86ca4f7321fe563ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_J8Jkk69GuPHFmUWs5D7yQ.jpeg"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="8685" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我已经开始从不同的部分(我的页面的“行”)考虑布局，然后在脑海中描绘仪表板的不同列。</p><p id="9150" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我假设，就像在商业场景中一样，一些颜色已经是企业视觉识别的一部分(在这种情况下，是一种带有一些粉色元素的绿色调色板),我选择了一个很好的字体系列，名为Dosis。</p><p id="22e6" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">之后，我一直在创建图片中的方案，用不同的占位符和引导列。我用过的css类。</p><p id="8993" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在CSS引导网格系统中，不同的。div元素是嵌套的，每个元素都有自己的类，从一行开始，然后是一列或多列。CSS Bootstrap有不同的列类，从col-1到col-12，这意味着我们可以拥有我们希望的动态列宽，从最大宽度的1/12开始，直到使用全部可用宽度(12/12)的列。在每一列中，可以嵌套另一个. Div的行列序列。</p><p id="6ee8" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">所有这些类都可以分配给html。Div([])元素，位于它们的className属性中。</p><p id="a8e4" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">该系统有助于保持仪表板的每个部分有序，每个仪表板组件都有一个指定的区域，该区域对所使用的屏幕也是动态的。</p><p id="034a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">例如，下面的结构被用来设计标题、导航条和过滤器的样式。</p><p id="6183" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><strong class="lq ja">割台</strong>包括:</p><ul class=""><li id="1c7e" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">外部html。Div组件，它有一个. CSS“row”类，用背景色进行样式化</li><li id="368f" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">三个html。Div组件，在行内；每个都代表一个“col”。css类(记住这些列宽度的总和必须等于12):一个className="2-col" div(一个宽度为2/12的列)，它将保持为空，只是为了确保标题居中；一个8列的div，包含主页标题，最后是另一个2列的div，包含公司徽标图像</li></ul><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="9bee" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><strong class="lq ja">导航条</strong>，包括:</p><ul class=""><li id="2355" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">在行的两侧有两个空的列3格</li><li id="feb7" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">三个中央col-2 div，每个都包含一个dcc。链接破折号组件，可用于从一个页面切换到另一个页面。dcc。当前页面的链接页面采用不同的样式，突出显示用户所在的页面</li></ul><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="3023" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><strong class="lq ja">过滤器</strong>部分由以下部件组成:</p><p id="d467" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在外部，我们有一个行和列div:</p><ul class=""><li id="bcf5" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">外部html。具有“行粘顶”类的Div。这是一个Bootstrap类，和row一样，但是它会停留在页面的顶部，即使用户向下滚动。</li><li id="73ba" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">在行内，有一个12列的Div，带有一些样式属性</li></ul><p id="1cec" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在12列div列中，我们有另一个“行”Div，包含以下一组列:</p><ul class=""><li id="eac2" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">内部行两侧的两个空col-2 div</li><li id="6e59" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">两个col-4 div，在内部，每个都包含滤波器组件:一个dcc。DatePickerRange和两个dcc。下拉组件</li></ul><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="0767" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">4.2样式化Dash组件访问它们的CSS类</h2><p id="12b0" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">一旦定义了布局，从用户界面的角度来看，下一个挑战是正确地设计每个Dash组件的样式，比如日期范围(dcc。DatePickerRange)、下拉筛选器(dcc。下拉)等。</p><p id="c69e" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">所有这些组件都有一个“样式”属性，在这里我们可以定义想要样式化的css属性，比如字体大小、颜色、空白等等。我们想要实现的大多数布局增强，都可以通过在Dash组件的“样式”中定义正确的css属性来实现。然而，我在对这些组件的一些特性进行样式化时面临着不同的挑战，这似乎无法从它们的“样式”属性中获得。我在网上看过许多不同用户的类似挑战，想知道如何设计这些组件的某些功能或细节。</p><p id="e5bd" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我认为这里的主要挑战是识别Dash使用的CSS属性。事实上，有一种方法可以指向并单击，或者“检查”页面上的每个元素，并揭示定义它的CSS属性。</p><p id="514f" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">事实上，我们可以在浏览器中运行应用程序，右键单击页面并选择“Inspect”:这将在页面右侧弹出一个窗口，我们可以在其中浏览页面的html和css代码。在页面顶部，我们可以点击这个工具</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/5f8dd69e4c0913bde144e3c7e5864bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:84/format:webp/1*PSXfVJoksw5wmxWhrf7aKA.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="6247" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们最终可以将鼠标悬停在想要设置样式的元素上，并获取其所有CSS类和属性，以了解要更改/重定义什么。</p><h2 id="e7b5" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">4.2.1示例:设置DatePickerRange元素的样式</h2><p id="8554" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">默认情况下，DatePickerRange如下所示:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ou"><img src="../Images/26e2dc0ca1822f323b74e9dae5d1d00d.png" data-original-src="https://miro.medium.com/v2/resize:fit:390/format:webp/1*EJtXWdEe3Q83YAbnDClZ6Q.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="017f" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们可以从“样式”属性中改变组件布局，定义字体大小，添加一些颜色的边框，等等。但是如何修改分隔开始日期和结束日期箭头呢？如何更改突出显示所选日期或助手图标周围的绿色？</p><p id="a79b" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">这些元素似乎无法从“样式”属性中获得，我们必须使用不同的方法来更改它们的布局属性。在浏览器中，如果我们检查并选择箭头，我们会看到类似这样的内容:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ov"><img src="../Images/787eb8759eadfea4741dd096ee075d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkVwJ8M_b5sWxUNwSWLhzA.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="f048" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">该组件使用了一些CSS类，我们可以通过在自定义CSS文件中添加一些代码来修改这些类，从而将箭头强制调整为新的大小:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="7fec" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">同样，我们可以通过检查日历选择来揭示如何更改日历样式:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/2d3ff3ea42377d68e74e4b48d4f7e6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*gYUAd2SRdvb4GHH53wcBCw.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="86f4" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">通过分析这一因素，似乎”。CalendarDay__selected”是所选日期极值的CSS类，而“CalendarDay__selected_span "是用于两个极端之间的所有日子的CSS类。可以使用这些类来改变日历的背景颜色(并在鼠标悬停在不同日期时定义一些布局修改)。我已经将下面的代码添加到自定义CSS文件中:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="0a67" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">("!“important”覆盖同一CSS元素或类的任何其他布局定义)。</p><h2 id="cb36" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">4.2.2示例:样式a dash_table。数据表元素</h2><p id="60a5" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我发现另一个难以设计的元素是我在仪表板顶部的摘要部分使用的数据表。</p><p id="8d64" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">默认情况下，数据表有一个功能，可以选择一个单元格，使它以粉红色/红色背景出现。此外，通过使用默认的CSS引导文件，默认设置会将我们悬停的所有表格行的背景颜色更改为白色。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ox"><img src="../Images/956a5e86fad71e54b207c504672ae119.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*qCnQs6E6uUD0PivkeJYFQQ.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="b376" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我想真正改变这两个与我的整体布局相冲突的默认属性。</p><p id="cec9" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">首先，可选单元格实际上不是一个CSS属性，而是一个可以被禁用的组件属性:在创建DataTable时添加“cell_selectable = False”会删除此功能。</p><p id="7a13" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">为了改变行悬停的颜色，用之前解释过的方法我们可以看到，DataTable行实际上是<tr> </tr> html元素，与特定的CSS类没有关联。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oy"><img src="../Images/cd22b984ea09f34096672ea305a54252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8xNSPx4urI5lgi2Af6-zhA.png"/></div></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="a177" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">为了自定义当鼠标悬停在行上时的背景颜色，我在自定义CSS文件中添加了以下内容:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="f8c5" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">5.回调和组件</h1><p id="56de" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">一旦定义了仪表板布局，并且图表和过滤器组件已经放置在页面上，让我们转到回调。</p><p id="4970" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我将介绍一些回调的例子，重点是我用过的最麻烦的例子。</p><h2 id="b179" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.1多下拉过滤器:如何拥有“全选”选项</h2><p id="f868" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">仪表板通常包括一个或多个下拉过滤器，允许用户同时选择一个或多个值。</p><p id="548a" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在非常简单的情况下，下拉组件“背后”不应该有任何回调:用户选择一个或多个下拉选项；所选的值通常是其他回调函数的“输入”，这些回调函数调整图表上显示的内容。</p><p id="96b0" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">然而，在更复杂的情况下，我们可能希望有一个多下拉选择，其中第二个下拉的选项取决于第一个下拉的选择。在我创建的例子中，我有一个国家下拉列表和一个城市下拉列表:城市下拉列表选项，当然取决于已经选择的国家。</p><p id="f466" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">更复杂的是，我注意到Dash中没有“全选”的现成功能。特别是在下拉选项是长列表的情况下，强烈建议添加一个“全选”的方法，否则我们每次想要分析所有值时都需要逐个输入所有选项。此外，我还想以一种“无选择”(即将下拉列表留空)意味着考虑所有选项。</p><p id="4d47" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">为了实现这里描述的所有特性，我遵循了下面列出的步骤。</p><h2 id="e51f" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">创建选项列表</h2><p id="772b" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，我为每个下拉组件创建了一个选项列表。我随机创建的数据在一列中包含“国家”信息，在另一列中包含“城市”信息。我简单地创建了两个唯一的列表，一个用于所有可能的城市，另一个用于所有可能的国家，我添加了一个“(全选)”条目，我希望它位于选项列表的顶部。</p><p id="b473" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">接下来，我在页面布局中包含了Dropdown组件，只需指定“multi”属性:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="9f02" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.1.2动态管理选项列表</h2><p id="e7dc" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">然后，我定义了一个回调，它将第一个下拉列表中的值(选择)列表作为输入，将第二个下拉列表中的选项列表作为输出返回。</p><p id="4c1e" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">鉴于选项列表取决于值，我生成了一个字典，其中每个键都是第一个下拉列表的可能值，每个值都是第二个下拉列表的所有可能选项的列表。结果如下所示:</p><p id="059f" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><em class="mn">{巴西:[福塔莱萨，里约热内卢，圣保罗]，</em></p><p id="b233" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated"><em class="mn">【米兰、威尼斯】，… } </em></p><p id="ae7d" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">为了完成回拨，一些关键的考虑事项是:</p><ul class=""><li id="6be9" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">第一个下拉列表中的“值”将是一个python列表</li><li id="9365" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">该列表可能包含也可能不包含“全部”选项</li><li id="f241" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">将值列表留空意味着我们将把['']作为回调的输入</li></ul><p id="7ee9" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">作为第一步，我创建了一个变量(isselect_all)，用于确定用户是否将第一个下拉列表留空，或者用户是否选择了“全选”，或者这两种可能性都没有。</p><p id="8c45" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在前两种情况下，回调只是返回所有可能城市的排序列表。否则，用户将分别选择一个或多个国家，因此我将使用之前创建的字典(我将其命名为repo_groups_l1_l2)来计算所有可能城市的排序列表。</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="a4a9" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.2通过热图揭示季节性模式</h2><p id="bf62" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在所有可能的图表中，当我们想要绘制三维图并显示数据的季节性或模式时，热图是理想的。例如，我包含了一个热图来显示全年(在我的例子中是周数)和一周中的某一天的销售趋势，以查看这两个维度上是否有任何季节性。</p><p id="f53f" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">x轴表示工作日，y轴表示日历周数；每个单元格将根据销售量进行着色。热图还需要响应过滤器(基于日期和城市和国家下拉)。</p><h2 id="581f" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.2.1热图:布局</h2><p id="1477" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，让我们在dash布局中包含一个热图占位符。在下面的代码中，headtmap将位于id为“sales-weekly-heatmap”的最后一列:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="70b4" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.2.2热图:回拨概述</h2><p id="f79d" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">然后，让我们转到回调，它将有:</p><ul class=""><li id="e9df" class="nm nn iq lq b lr mo lu mp lx no mb np mf nq mj nr ns nt nu bi translated">输入:不同的过滤器——在我的例子中，这些是日期选择器中的开始和结束日期，以及“国家”和“城市”下拉选择</li><li id="f1ae" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">输出:上面的dcc。图形“数字”元素</li><li id="e446" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">第一部分:数据准备。回调将使用datasource(由单个dataframe组成),并按周nr过滤和聚集数据。和工作日</li><li id="1978" class="nm nn iq lq b lr nv lu nw lx nx mb ny mf nz mj nr ns nt nu bi translated">第二部分:图形准备(使用Plotly: go。热图)。该图表将使用预定义的色标，我通过一个函数自定义创建</li></ul><h2 id="096e" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">热图:数据准备</h2><p id="fcb1" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在数据准备部分，我必须包含一些语句来处理两个下拉选择的“全选”。如果用户已经从下拉列表中选择了该选项，则数据框架不需要按照国家/城市进行过滤；否则，仅考虑用户从初始完整数据帧中选择的值:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="4aec" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">然后，我按开始日期和结束日期过滤数据框架，最后按周数和工作日汇总:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="d4ed" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">热图:图形配置</h2><p id="a79d" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">为了在仪表板上绘制一些漂亮且一致的图表，我创建了一个go。回调文件顶部的Layout()变量(名为corporate_layout)。此布局变量包括许多属性，这些属性在所有仪表板图表中几乎都是相同的(图表透明背景、字体系列、标题字体大小、网格线、零线、总高度、图例、边距等等)。</p><p id="dd74" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在每个图表回调中，一个新的fig = go。图(data=data，layout=corporate_layout)已定义。这允许更新fig布局(通过这个命令:fig.update_layout())以适应corporate_layout并包括图表标题和轴标题。</p><p id="c4ff" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">使用这种方法，图表的主要布局只定义一次:这有助于保持代码的整洁，同时也很灵活；也就是说，为了改变所有图表的高度，我们只需要调整整个代码中的一个变量。</p><p id="e645" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">关于go的“数据”部分。我用了一个go。Heatmap()，包括一个色标，我将在下面描述它。</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="4a03" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.2.5热图:添加自定义色阶</h2><p id="52bc" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Plotly热图包括一些标准色阶，我们可以从中选择，或者我们可以指定一个自定义创建的色阶。</p><p id="ae21" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">Plotly提供了一些指令(<a class="ae ko" href="https://plotly.com/python/reference/heatmap/#heatmap-colorscale" rel="noopener ugc nofollow" target="_blank">此处可用</a>)来创建自定义色标。我使用的色阶是这样的:根据每个数据点的百分比，热图使用的11种颜色的列表。</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="804c" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">为了以某种渐变顺序生成颜色，我创建了一个函数，它将我们需要生成的颜色数量和两种颜色的RGB值作为输入:一种是“起点”，另一种是“目标点”。对于每种颜色，该函数以相同的量递增RGB值，直至达到目标值。这是一个非常简单的方法，但是这个函数可以满足目的:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="fa58" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我们最终可以将色阶添加到热图中，以揭示一些季节性:正如我们所见，销售额似乎在第10周和第20周之间下降；然后他们开始增加，在第25周达到同样的水平。在一周的几天里，我们没有明显的季节性。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/ededa550c62d2aa9512a5a97b21c27b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*1B-BOt-k65v4wtc6QIGjOQ.jpeg"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><h2 id="0d77" class="of kx iq bd ky og oh dn lc oi oj dp lg lx ok ol li mb om on lk mf oo op lm iw bi translated">5.3悬停在数据点上时提供附加信息</h2><p id="a0c5" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在Dash中，可以定义hovertemplates来指定当用户将鼠标悬停在数据点上时，什么数据以什么格式显示。</p><p id="c698" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">除了图表已经使用的数据(例如，x和y值)之外，在hovertemplate中包含附加信息可能很有用。官方文件提供了有用的选择:我将展示我发现最有效的一个。</p><p id="7cc5" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">在下面的图表中，我创建了一个堆积条形图，其中每个国家由每个竖条表示，将销售额显示为每个城市个人销售额的总和。悬停时，我还想显示关于总目标而非销售额的信息:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/e354af967a58016da2093e490321e64f.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*Nf--pZBP-zbLq2DzFuwObQ.png"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="c1ca" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">城市的“目标”是数据源中存在的信息，但它并没有显示在图表中:悬停模板从哪里获取这些信息？</p><p id="d844" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我采用的方法是在图表使用的dataframe中创建一个新列，包含我想在hovertemplate中显示的所有信息:</p><figure class="mx my mz na gt nb"><div class="bz fp l di"><div class="or os l"/></div><p class="ni nj gj gh gi nk nl bd b be z dk translated">作者图片</p></figure><p id="5036" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">Plotly hovertemplate需要一些html格式:“T2””例如，意味着内容将是斜体；<extra> </extra>用于清除数据点的痕迹名称。值使用d3格式的语法进行格式化(如Plotly <a class="ae ko" href="https://plotly.com/python/reference/scatter/#scatter-hovertemplate" rel="noopener ugc nofollow" target="_blank">这里的</a>所解释的):“{:，d}”用于包含千位分隔符(如果您想知道这对于其他值类型如何工作:具有两位小数的百分比可以这样格式化:“{:. 2% }”；日期的格式可以是:“{x|%a，%d-%b-%Y}”。</p><p id="1220" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">一旦数据中有了hovertext，我们就可以在图表中使用它，只需将dataframe列分配给图表hovertemplate。</p><h1 id="fd73" class="kw kx iq bd ky kz oa lb lc ld ob lf lg kf oc kg li ki od kj lk kl oe km lm ln bi translated">6.如何部署和共享仪表板</h1><p id="80ba" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">通过Dash创建的仪表板可以部署为Flask应用程序。Heroku无疑是让应用程序在线可用的最有效的方法之一(而且是免费的)。</p><p id="7b0d" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">我用来部署这个应用程序的指南通过<a class="ae ko" href="https://www.youtube.com/watch?v=b-M2KQ6_bM4" rel="noopener ugc nofollow" target="_blank">这个视频</a>得到了很好的解释，包括一个大约。让这款应用上线的15个步骤。</p></div><div class="ab cl kp kq hu kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ij ik il im in"><h1 id="9a04" class="kw kx iq bd ky kz la lb lc ld le lf lg kf lh kg li ki lj kj lk kl ll km lm ln bi translated">7.结论</h1><p id="c201" class="pw-post-body-paragraph lo lp iq lq b lr ls ka lt lu lv kd lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Plotly Dash绝对是一个有趣且非常强大的Python库:我一直在寻找一种快速的方法来自动进行可重复的分析，并且非常好地呈现出来，这绝对达到了目的！</p><p id="49e0" class="pw-post-body-paragraph lo lp iq lq b lr mo ka lt lu mp kd lw lx mr lz ma mb mt md me mf mv mh mi mj ij bi translated">凭借Python知识、一些html和css经验，我能够在几周的空闲时间里实现这个仪表板:我必须说，将CSS Bootstrap体现到布局中产生了变化，并且肯定允许构建一个底层“网格”,允许以我想要的方式非常容易地控制仪表板的每个部分。</p></div></div>    
</body>
</html>