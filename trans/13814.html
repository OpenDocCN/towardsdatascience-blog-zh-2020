<html>
<head>
<title>Simulating Probabilities | Solving The Classic Monty Hall Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模拟概率|解决经典的蒙蒂霍尔问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simulating-probabilities-solving-the-classic-monty-hall-problem-98454565b9bc?source=collection_archive---------34-----------------------#2020-09-22">https://towardsdatascience.com/simulating-probabilities-solving-the-classic-monty-hall-problem-98454565b9bc?source=collection_archive---------34-----------------------#2020-09-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="be01" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Monty Hall提出了一个概念上令人困惑的问题，使用模拟我们可以实时验证这一现象</h2></div></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/a199506e64c2d513b837e7fc084ceb54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*xWn92_vNJ6Gyho7SNFtZnQ.jpeg"/></div><p class="kx ky gj gh gi kz la bd b be z dk translated">图片来自<a class="ae lb" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1587329" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a></p></figure><h1 id="be35" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">介绍</h1><p id="3b3f" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">在本帖的过程中，我们将学习如何使用模拟来理解概率，我们将使用Monty Hall gameshow问题的经典示例。</p><p id="4ae8" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">Monty Hall有一个游戏展示，他展示了下面的问题。如果你不熟悉他或他们的游戏，它在2008年的21。无论如何，如果你不熟悉这里的问题。</p><h1 id="398e" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">蒙蒂·霍尔问题</h1><p id="528a" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">他会给他的参赛者三扇门来选择。两扇门后是山羊…但其中一扇门后是一辆跑车。</p><p id="ba8c" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">假设节目里的人是你。蒙蒂让你选择一扇门，如果你是正确的，你就可以得到这辆车。</p><p id="9cec" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">现在你问自己，任何一扇门后面有车的可能性有多大？</p><p id="40d7" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">你我都知道，不管你选哪个门，你都有33.3%的几率拿到车。</p><p id="d49e" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">因为没关系，假设你选1号门。但是在他揭示后面是什么之前，他阻止了你，并且揭示了一只山羊坐在剩下的两扇门的后面。(如果他们中的一个真的有车，他总是知道谁有羊)</p><p id="5e93" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">他现在问你，你是坚持原来的选择，还是换到另一扇没打开的门？</p><p id="6160" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">典型的想法是，这仍然无关紧要，因为你现在有50%的机会选择后面有车的门；然而，现实情况是，实际上有66.7%的可能性汽车在另一扇门后。分配给其他两个门的概率现在浓缩为一个门，因为您知道汽车不在其中一个门的后面。</p><p id="6d02" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">从概念上讲，这是一件很难理解的事情，我们不会花更多的时间试图从概念上说服你为什么。从这里开始，我们将模拟这个游戏，观察不同场景下的概率。</p><p id="208c" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">让我们把这个游戏转换成一些代码，我们可以重复运行数千次，以确定可能性。</p><h1 id="b5ae" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">让我们开始编码吧</h1><p id="b494" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">重要的事情先来。让我们考虑一下系统地解决这个问题所需的不同变量或占位符。</p><p id="9113" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们需要包括以下内容:</p><ul class=""><li id="a639" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated">门</li><li id="46b3" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">获胜之门</li><li id="b4f8" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">首选</li><li id="fb38" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">显露的门</li><li id="6478" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">最终选择</li></ul><h2 id="3a41" class="nj ld it bd le nk nl dn li nm nn dp lm md no np lo mh nq nr lq ml ns nt ls nu bi translated">门</h2><p id="64f5" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">好了，让我们开始创建一个矢量来代表门。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="d1c4" class="nj ld it nw b gy oa ob l oc od">doors &lt;- c(1,2,3)</span></pre><p id="d86a" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">很容易..向量有三种不同的选择。</p><h2 id="3914" class="nj ld it bd le nk nl dn li nm nn dp lm md no np lo mh nq nr lq ml ns nt ls nu bi translated">获胜之门</h2><p id="ed16" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">现在让我们随机选择哪个门有车。sample函数将获取你传递给它的任何向量的n(大小)。在这种情况下，它将从doors中提取1、2、3。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="118f" class="nj ld it nw b gy oa ob l oc od">winning_door &lt;- sample(x = doors, size = 1)</span></pre><h2 id="ed7b" class="nj ld it bd le nk nl dn li nm nn dp lm md no np lo mh nq nr lq ml ns nt ls nu bi translated">首选</h2><p id="0ae8" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">正如我刚才提到的，现在是你选择哪扇门的时候了。如果你真的想玩这个游戏，你可以这样设置，问你想要三扇门中的哪一扇门。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="90d5" class="nj ld it nw b gy oa ob l oc od">which_door &lt;- function(){<br/>  door &lt;- readline("1, 2, or 3?")  <br/>  return(as.numeric(door))<br/>}<br/>first_choice &lt;- which_door()</span></pre><p id="89d4" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">但是我们会在for循环中一遍又一遍地重复这些步骤。因此，我们不会每次都强制手动输入，而是将第一选择声明为1号门。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="abcc" class="nj ld it nw b gy oa ob l oc od">first_choice &lt;- 1</span></pre><h2 id="908e" class="nj ld it bd le nk nl dn li nm nn dp lm md no np lo mh nq nr lq ml ns nt ls nu bi translated">显露的门</h2><p id="1caa" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">我们现在需要确定我们的程序将揭示剩下的两扇门中的哪一扇门。我们知道蒙蒂会选择剩下的两扇门中的一扇。</p><p id="ac02" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">让我们想想这些案例:</p><ul class=""><li id="6389" class="mv mw it lw b lx mq ma mr md mx mh my ml mz mp na nb nc nd bi translated">在你选择了汽车的情况下，剩下的两扇门后面都有山羊——所以没关系</li><li id="5e1b" class="mv mw it lw b lx ne ma nf md ng mh nh ml ni mp na nb nc nd bi translated">如果你选择了一只山羊，你只需要确保你选择的门不等于你刚才取样的获胜门。</li></ul><p id="ae6f" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们将把它写成if语句。</p><p id="fd07" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">因此，正如我们刚刚讨论的，如果获胜的门是第一选择，则在移除first_choice后对门向量进行采样。如果不是这样，那么从doors向量中删除winning_door和first_choice，剩下的唯一选项将是剩余的山羊。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="e1f9" class="nj ld it nw b gy oa ob l oc od">if (winning_door == first_choice){<br/>    revealed_door &lt;- sample(x = doors[-c(first_choice)], size = 1)<br/>  } else {<br/>    revealed_door &lt;- doors[-c(first_choice, winning_door)]<br/>  }</span></pre><h2 id="9a01" class="nj ld it bd le nk nl dn li nm nn dp lm md no np lo mh nq nr lq ml ns nt ls nu bi translated">最终选择</h2><p id="a152" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">类似于我们刚刚做的，让我们假设在任何情况下，我们都将固执地坚持我们的门。我们要抵制智慧，追求智慧。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="6b5e" class="nj ld it nw b gy oa ob l oc od">final_choice &lt;- first_choice</span></pre><p id="3a76" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">如果你想在我们采纳明智的建议时看到结果，你可以使用这段代码。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="5277" class="nj ld it nw b gy oa ob l oc od">final_choice &lt;- doors[-c(first_choice, revealed_door)]</span></pre><h1 id="cbba" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">把所有的放在一起</h1><p id="06c7" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">让我们来看看目前为止我们设置的所有内容。</p><p id="e63e" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们会声明刚刚经历过的变量。我包含了final_choice的两个版本，但是注释掉了第一个版本。</p><p id="373a" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我在这里添加的最后一部分是一个条件输出，如果你赢了就说万岁，否则就享受你的山羊。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="57a1" class="nj ld it nw b gy oa ob l oc od">winning_door &lt;- sample(doors,1)<br/>first_choice &lt;- 1<br/>if (winning_door == first_choice){<br/>  revealed_door &lt;- sample(x = doors[-c(first_choice)], size = 1)<br/>} else {<br/>  revealed_door &lt;- doors[-c(first_choice, winning_door)]<br/>}<br/>#final_choice &lt;- doors[-c(first_choice, revealed_door)]<br/>final_choice &lt;- first_choice<br/>if(final_choice == winning_door){<br/>  print('brand new car')<br/>} else {<br/>  print('have a goat')<br/>}</span></pre><h1 id="e37b" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">模拟时间</h1><p id="4775" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">这是一个坚实的开端，但实际上，我们不会一遍又一遍地记录结果。技术上我们可以，但我们肯定没有必要。</p><p id="aadf" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们只需要做一些编辑。</p><p id="4192" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">首先，让我们将代码嵌套在一个for循环中，这样我们就可以按顺序一遍又一遍地运行它。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="4a43" class="nj ld it nw b gy oa ob l oc od">for(i in 1:10000){<br/>}</span></pre><p id="a345" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">这将瞬间重复这个过程10000次，但是我们真的想打印结果吗？我们真正想做的是记录结果，将它们存储在某个地方，以便我们可以收集我们正在创建的信息。</p><p id="b9a0" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们需要一个计数器。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="fb67" class="nj ld it nw b gy oa ob l oc od">wins &lt;- 0</span></pre><p id="bd0a" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">这不会嵌套在for循环中，因为我们不希望计数器在每次运行下一条记录时都回到0。</p><p id="c650" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">我们将在for循环中包含每次运行结束时的考虑，“我们赢了吗？”如果是这样，我们将win计数器加1。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="0525" class="nj ld it nw b gy oa ob l oc od">wins &lt;- wins + 1</span></pre><p id="2053" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">这是全部组装好的。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="792c" class="nj ld it nw b gy oa ob l oc od">wins &lt;- 0</span><span id="924f" class="nj ld it nw b gy oe ob l oc od">for(i in 1:10000){<br/>  winning_door &lt;- sample(doors,1)<br/>  first_choice &lt;- 1<br/>  if (winning_door == first_choice){<br/>    revealed_door &lt;- sample(x = doors[-c(first_choice)], size = 1)<br/>  } else {<br/>    revealed_door &lt;- doors[-c(first_choice, winning_door)]<br/>  }<br/>  # final_choice &lt;- doors[-c(first_choice, revealed_door)]<br/>  final_choice &lt;- first_choice<br/>  if(final_choice == winning_door){<br/>    wins &lt;- wins + 1<br/>  }<br/>}</span></pre><p id="a4dc" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">现在我们已经有了获胜的次数，是时候看看如果你拒绝改变选择，你会赢的几率有多大了。</p><pre class="kq kr ks kt gt nv nw nx ny aw nz bi"><span id="9331" class="nj ld it nw b gy oa ob l oc od">print(round(wins / 10000, 2))</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi of"><img src="../Images/ce7edb8b210139de26e390caf46cd71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/0*NdCgj1q87DDxATZT"/></div></figure><p id="f37a" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">因此，最初分配给三个选项中的一个选项的概率是34%,而不是你最初认为的50%。</p><p id="77b7" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">如果我们再次转换我们的决策，我们可以看到概率是67%，不是50%，不是33%。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi og"><img src="../Images/fba60378c5474b30d93ac0bc3e3e3004.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/0*H8RXyDCccKar6voV"/></div></figure><h1 id="212d" class="lc ld it bd le lf lg lh li lj lk ll lm jz ln ka lo kc lp kd lq kf lr kg ls lt bi translated">结论</h1><p id="1c8b" class="pw-post-body-paragraph lu lv it lw b lx ly ju lz ma mb jx mc md me mf mg mh mi mj mk ml mm mn mo mp im bi translated">我希望你发现这个关于Monty Hall游戏的快速课程很有见地。当我们使用这些原则来为一个游戏建模时，我希望你能识别出可供选择的场景，让你以有意义的方式为概率建模。</p><p id="dffa" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">欢迎访问我的Twitter @ data _ lessons。</p><p id="0282" class="pw-post-body-paragraph lu lv it lw b lx mq ju lz ma mr jx mc md ms mf mg mh mt mj mk ml mu mn mo mp im bi translated">祝数据科学快乐！</p></div></div>    
</body>
</html>