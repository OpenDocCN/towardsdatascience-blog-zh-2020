<html>
<head>
<title>GitHub Action That Automates Portfolio Generation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化项目组合生成的GitHub动作</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/github-action-that-automates-portfolio-generation-bc15835862dc?source=collection_archive---------38-----------------------#2020-10-12">https://towardsdatascience.com/github-action-that-automates-portfolio-generation-bc15835862dc?source=collection_archive---------38-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3cc1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python和基本前端的Dockerized GitHub动作。</h2></div><p id="12d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为任何开发人员，我们都会生成大量代码，并将其推送到Github进行备份、管理软件版本、托管项目和其他许多任务。如果我们谈论有多少库是实际的项目，我们在简历/社交媒体中托管和展示，与创建的库的总数相比，这实在是太少了。这些包括分叉的存储库、一些上传的实践代码或一些参考的附加内容。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/9286f70c376abae220295ee2bad58764.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*92uihNv2iVG0yJfA"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">照片由<a class="ae lr" href="https://unsplash.com/@richygreat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Richy Great </a>在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bcd9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我已经创建了很多，现在当我必须展示我的项目时，我会对应该包括哪一个或我已经做了什么感到困惑！为了解决这一困境，我想出了一个解决方案，开发一个Github动作来自动添加项目，参加黑客马拉松，显示一些Github个人资料统计，并可选地显示在<a class="ae lr" href="https://medium.com/@kaustubhgupta1828" rel="noopener">媒体</a>和我的<a class="ae lr" href="https://www.kaustubhgupta.xyz/" rel="noopener ugc nofollow" target="_blank">网站</a>上写的最新博客，并将其提升到下一个级别，我将该动作分类并免费托管网页！让我们看看我是怎么做到的。</p><p id="8a2c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想看看现在的行动，前往这个市场链接！</p><div class="ls lt gp gr lu lv"><a href="https://github.com/marketplace/actions/portfoliofy" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">PortfolioFy - GitHub市场</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">开发人员创建了数百个存储库，其中几乎没有几个是像样的，并在社交网站上展示…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj ll lv"/></div></div></a></div><h1 id="f08b" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">什么是GitHub Action？</h1><p id="5eaa" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated"><strong class="kh ir"> Github action使您能够自动化和定制软件开发周期</strong>，测试和部署集成到您的存储库中的应用程序。这些操作称为作业，可以通过Cron作业(基于时间的作业调度程序)根据您的需要安排运行。如果你访问GitHub action <a class="ae lr" href="https://docs.github.com/en/free-pro-team@latest/actions" rel="noopener ugc nofollow" target="_blank">文档</a>，你可能会混淆两个术语，动作和工作流。这些都是令人困惑的事情，需要在继续之前澄清:</p><ol class=""><li id="c31a" class="nh ni iq kh b ki kj kl km ko nj ks nk kw nl la nm nn no np bi translated">动作和工作流之间的主要区别是一个是另一个的一部分。<strong class="kh ir">动作是执行特定工作流时触发的事件。</strong></li><li id="b377" class="nh ni iq kh b ki nq kl nr ko ns ks nt kw nu la nm nn no np bi translated">动作是在代码环境中执行的任务，而<strong class="kh ir">工作流管理这些任务将如何执行</strong>，它们的顺序是什么，在运行它们之前要完成的任何依赖/设置，输入，要传递的参数，或定义不同作业之间的依赖关系。</li><li id="918a" class="nh ni iq kh b ki nq kl nr ko ns ks nt kw nu la nm nn no np bi translated">根据分配的配置，一个工作流可能有多个按顺序或并行运行的操作。</li></ol><p id="d32a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你已经对Github的动作有了基本的了解，让我们来编码实际的脚本，它将是这个动作的一部分。</p><h1 id="5973" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">脚本时间！</h1><p id="d2ac" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">对于这个项目，我使用Python，因为它对我来说很容易编码，而且使用Python构建的动作更少。该项目需要访问Github配置文件数据，尽管Github API提供了大部分数据，但对于未经身份验证的用户，它仍被限制为每小时60次请求。因此，你需要一个<strong class="kh ir">个人访问令牌</strong>(设置&gt;开发者设置&gt;个人访问令牌)来认证Github的用户，并允许每小时5000个请求！</p><p id="eb2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，安装PyGithub库，解决所有令人头疼的连接、结果分页以及最终获取数据的问题。接下来，我们需要存储API返回的数据。我选择字典格式，因为它易于管理和访问属性。初始代码如下所示:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="bbf0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来关于存储库，我需要区分项目、黑客马拉松和其他额外的存储库。为了做到这一点，我设置了一个条件，即<strong class="kh ir">在设置这个动作之前，你需要手动分配存储库主题“项目”或“黑客马拉松”</strong>在投资组合中被考虑。如果一个存储库没有被标记，那么它将不会反映在输出中。这种情况将存储库分成不同的两个部分，现在它们被分开存储。</p><h1 id="8012" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">网页建设</h1><p id="ef4e" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">Python脚本提取了所有的信息，但是现在对于这个项目的主要目标，需要一个网页。最初，我想到使用markdown文件来做到这一点，但由于Github的限制，您<strong class="kh ir">不能在markdown </strong>中使用CSS(以避免钓鱼攻击)。这是一个主要问题，因为我不想让用户在看到一个简单的纯文本组合后感到无聊或沮丧。因此，我扩展了当前的脚本，以使用之前收集的信息，并将值注入到HTML模板中，该模板存储为字符串，并使用f字符串进行更改。HTML模板进行了大量的尝试，以获得一个简单的视图，该视图需要为移动视图进行不同的设置。Github的所有基本信息都已获得，但还缺少一样东西，一个统计显示。为了显示统计数据，我使用了由<a class="ae lr" href="https://github.com/anuraghazra/github-readme-stats" rel="noopener ugc nofollow" target="_blank"> Anurag Hazra </a>开发的开源Vercel应用程序，它可以动态更新统计数据。对于博客更新，我使用了<a class="ae lr" href="https://github.com/marketplace/actions/blog-post-workflow" rel="noopener ugc nofollow" target="_blank">高塔姆克里希纳R </a>行动，这是不同的安排，我将在接下来的段落中解释它。动作生成的最终网页是这样的:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/c1a20b1e37a4c75c39ba66c95af70d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*QMKppZdRSZBIJGAcFhgaDQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">图片作者，网页链接:<a class="ae lr" href="https://kaustubhgupta.github.io/" rel="noopener ugc nofollow" target="_blank">https://kaustubhgupta.github.io/</a></p></figure><p id="da87" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在所有的混乱之后，这个动作可以生成一个HTML文件，在<strong class="kh ir"> Github页面的帮助下可以部署</strong>，并且你有了你的<strong class="kh ir">免费托管的自我更新文件夹</strong>！现在，为了自动化添加新条目的整个过程，我想到了Github action。</p><h1 id="78b1" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">归档和创建行动</h1><p id="8a9d" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">我为这个动作选择docker图像，因为当我尝试用Python创建一个动作的不同方法时，我没有得到任何好的结果。Dockers帮助隔离环境并运行代码，因为它应该在本地运行。这个动作的docker文件看起来非常简单:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="90ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我已经从docker hub中提取了一个Python映像，安装了依赖项，并运行了脚本。</p><p id="6050" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是创建动作的时候了。根据Github docs，您需要在公共存储库的根目录中有一个名为<strong class="kh ir"> action.yml </strong>的文件来使动作工作。动作文件包含以下内容:唯一的动作名称、描述、作者姓名、需要从用户处获取的输入，以及要执行哪个文件。在YAML格式中，它非常容易配置，因为它遵循分层系统。对于输入，我采用Github token，对于文件，我提供docker文件。现在您的操作已经可以使用了，您也可以在市场上发布您的操作，但这不是强制性的。</p><h1 id="4f2b" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">使用的最终工作流程</h1><p id="8dbf" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">现在是测试这个动作的时候了。正如我前面提到的，动作只是工作流中触发的事件。<strong class="kh ir">工作流定义了动作的顺序、运行</strong>的系统/环境规范，以及在触发之前或之后需要执行的其他活动。这些文件存储在</p><pre class="lc ld le lf gt ny nz oa ob aw oc bi"><span id="3f13" class="od ml iq nz b gy oe of l og oh">.github/workflows folder.</span></pre><p id="f155" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用此操作的工作流程如下:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="3d99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以根据自己的需求定制工作流程，但是工作中提到的<strong class="kh ir">步骤不能改变。</strong>这个工作流程运行良好，生成了Github pages正在使用的index.html文件，但是又少了一些东西。问题是博客更新动作还没有集成。我把这一步设为可选，因为不是每个人都写博客。要集成博客操作，在同一个工作流文件夹中，创建一个YAML文件，并放入相同的代码:(只需用您的链接更新提要列表)</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="4233" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以检查博客文章工作流动作来定制其他因素，只是<strong class="kh ir">确保不要过多调整模板参数</strong>，因为它可能不会给出好的结果。此操作在每次将内容推送到存储库时运行，由于索引文件将被推送到存储库，此操作将在索引文件生成后立即更新博客部分。</p><h1 id="d653" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">结论</h1><p id="c4eb" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">在本文中，我向您介绍了Github动作的基本概念、工作流、它们之间的区别、动作的一些脚本、动作所需的文件以及最终在工作流中使用它们。我还讨论了我在这个项目中面临的挑战，以及如何在您的存储库中使用我的操作。如需更详细的说明和完整的源代码，请点击此处的资源库链接:</p><div class="ls lt gp gr lu lv"><a href="https://github.com/kaustubhgupta/PortfolioFy" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">kaustubhgupta/PortfolioFy</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">作为一名开发人员，我们创建了数百个存储库，但其中只有不到15-20个能够完成我们部署的最终项目…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="oi l mg mh mi me mj ll lv"/></div></div></a></div><p id="7d60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">支持这一行动，因为它为我提供了制作更多项目的动力，在medium上关注我以获得关于我最新文章的更新，如果你喜欢这一篇，请点击鼓掌按钮！说完了，合十礼！</p><p id="762f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Linkedin:</p><div class="ls lt gp gr lu lv"><a href="https://www.linkedin.com/in/kaustubh-gupta-612767ab/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">Kaustubh Gupta -机器学习导师-MAIT开发者学生俱乐部| LinkedIn</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">嗨，我是一名Python开发人员，能够进行Web抓取、Selenium自动化、数据科学、后端Web开发…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">www.linkedin.com</p></div></div><div class="me l"><div class="oj l mg mh mi me mj ll lv"/></div></div></a></div></div></div>    
</body>
</html>