<html>
<head>
<title>Build an SMS Alert System over the weekend with Rust and Zero-Cost</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Rust和零成本在周末建立一个短信提醒系统</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-an-sms-alert-system-for-canada-covid-19-cases-over-the-weekend-with-rust-and-zero-cost-235bb59ec5d?source=collection_archive---------26-----------------------#2020-10-22">https://towardsdatascience.com/build-an-sms-alert-system-for-canada-covid-19-cases-over-the-weekend-with-rust-and-zero-cost-235bb59ec5d?source=collection_archive---------26-----------------------#2020-10-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="da64" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">周末建设和学习。</h2></div><blockquote class="ki"><p id="5c93" class="kj kk it bd kl km kn ko kp kq kr ks dk translated">加拿大安大略省新冠肺炎新病例短信提醒</p></blockquote><p id="e0f1" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln ks im bi translated">在我们开始这个周末的构建和学习之前，我想花点时间感谢我所有的读者，他们总是支持我，给我提供一些建议和指导。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/cc05ee750dbb8c52ad36eda028013ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JlQzk4_7L8UM-Kni"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">亲教会媒体在<a class="ae me" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="f1ac" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">你是我继续这段旅程最重要的动力。如果你喜欢我的周末构建和学习系列，请在Medium上关注我。</p><div class="mk ml gp gr mm mn"><a href="https://medium.com/@jayhuang75" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">魏黄-中号</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">声明:我在媒体上写的文章仅与我的学习和观点相关。不会代表或…</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">medium.com。</p></div></div><div class="mw l"><div class="mx l my mz na mw nb ly mn"/></div></div></a></div></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="91a5" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">用例</h1><p id="9593" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">新冠肺炎改变了我们的许多日常生活；有了新常态，我们思考和做事都不一样了。</p><p id="ae58" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">每天，我的妻子和儿子都试图从互联网上获得加拿大安大略省新冠肺炎净新增病例增长的最新情况，这已经成为他们的日常生活。</p><p id="9f78" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">这一周，我儿子忙于他的学校作业。所以他错过了他的例行公事。当我妻子问他这个数字时，他突然意识到他忘记了这个重要的日常活动。当他冲到电脑前开始搜索号码时，他的一句话引起了我的注意。</p><blockquote class="ki"><p id="15be" class="kj kk it bd kl km og oh oi oj ok ks dk translated">如果能得到一些关于这些每日号码的推送通知，那就太棒了！</p></blockquote><p id="c231" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln ks im bi translated">“对！你给了我一个新的想法，为我的下个周末，建立和学习系列。谢谢你，儿子。”</p><p id="5a7e" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">这个想法总是来自我们的日常生活。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi ol"><img src="../Images/3f006c4aa612a409fc2ee9dc9c75030a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ww3ux-y1utWdPiFA"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">由<a class="ae me" href="https://unsplash.com/@freegraphictoday?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">绝对视觉</a>在<a class="ae me" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="5462" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">非功能性需求</h1><p id="5bde" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">在把手放在键盘上之前，让我们看看我们想要构建什么，这是重要的一步。</p><ol class=""><li id="669a" class="om on it kv b kw mf kz mg lc oo lg op lk oq ks or os ot ou bi translated">拉斯特·朗。</li><li id="d62f" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">性价比高。</li><li id="d02b" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">对于推送通知，让我们使用SMS作为初始用例，Twilio提供了一些开箱即用的功能。最重要的是，还有免费订阅。</li><li id="3a62" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">能够扩展到不同的用例，比如电子邮件通知，甚至进一步的聊天机器人实现——设计模式。(依赖倒置原则和开放/封闭原则)</li><li id="0cc5" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">及时调度程序— Cron作业。</li><li id="1512" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">易于构建和部署——我最喜欢的Heroku。</li><li id="97b1" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">准确的数据来源——加拿大政府网站提供了一些公开可信的数据来源。</li></ol><div class="mk ml gp gr mm mn"><a href="https://health-infobase.canada.ca/covid-19/epidemiological-summary-covid-19-cases.html" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">加拿大新冠肺炎病例流行病学总结Canada.ca</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">更新:将鼠标悬停在各省和地区上以查看总案例数、活动案例数、已恢复案例数、人数…</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">health-infobase.canada.ca</p></div></div></div></a></div><h1 id="a8f1" class="nj nk it bd nl nm pa no np nq pb ns nt jz pc ka nv kc pd kd nx kf pe kg nz oa bi translated">架构和数据流</h1><p id="c331" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">经过一些第一手的分析:</p><ol class=""><li id="c5fc" class="om on it kv b kw mf kz mg lc oo lg op lk oq ks or os ot ou bi translated">网站上提供的数据是CSV文件。</li><li id="2176" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">数据将在美国东部时间每天下午7点更新。有时会有一个小时的延迟。</li><li id="c888" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">该模式涵盖了我们需要的所有内容，如日期、每个省的新病例总数等。为简单起见，我们只关注整个新病例数和唯一死亡总数。</li><li id="019d" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">当我们完成处理后，我们需要清理tmp文件。减少不必要的空间和运营开销。</li></ol><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/379cc7b8dd4a0da65c5dbf176b6a2681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*7BgZOn2Km_LFa17HQfYP3g.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">简单的数据流——作者截图</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="1749" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">让我们开始编码部分。</h1><blockquote class="ki"><p id="24f9" class="kj kk it bd kl km og oh oi oj ok ks dk translated">手放在键盘上。</p></blockquote><figure class="ph pi pj pk pl lt gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/5d28dcd31e7c734cc9f8b62bdd951d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*Eh7nAV6rULWQEHdUY28WBw.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">代码结构—作者截图</p></figure><h2 id="bea0" class="pm nk it bd nl pn po dn np pp pq dp nt lc pr ps nv lg pt pu nx lk pv pw nz px bi translated">代码结构</h2><p id="c7b1" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">该应用程序中的关键业务逻辑有3个主要部分:</p><ol class=""><li id="3b17" class="om on it kv b kw mf kz mg lc oo lg op lk oq ks or os ot ou bi translated">下载，基于HTTP请求以获取csv文件并返回文件路径以供将来处理。</li><li id="5f15" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">Process — <strong class="kv iu"> MapReduce </strong>，只针对安大略省的数字，似乎这就是我儿子想要的:)，这很容易扩展到不同的用例，如保存到数据库，或生产者到近实时，流等。</li><li id="b037" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">警报组件，因为我们希望它可以基于<strong class="kv iu">打开/关闭原则</strong>进行扩展，打开扩展新的用例，但是，关闭对当前实现的修改。</li></ol><p id="4191" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">此外，Procfile是Heroku调度实现。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h2 id="ddb3" class="pm nk it bd nl pn po dn np pp pq dp nt lc pr ps nv lg pt pu nx lk pv pw nz px bi translated">实际下载</h2><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="py pz l"/></div></figure><p id="961f" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated"><strong class="kv iu">用MapReduce进行防锈处理</strong></p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="py pz l"/></div></figure><h2 id="4106" class="pm nk it bd nl pn po dn np pp pq dp nt lc pr ps nv lg pt pu nx lk pv pw nz px bi translated">警报组件</h2><p id="71df" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">对于alert组件，我们将使用Rust特征，它模拟Golang接口实现。它的好处:我们可以选择一个特定的用例实现，比如SMS、Email或chatbot，而一般的抽象工作流保持不变。(依赖倒置原则和开放/封闭原则)</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="py pz l"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">摘要报告和生产者</p></figure><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="py pz l"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">关闭SMS实施发送到Twilio API</p></figure><p id="ca6c" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">下一次我们需要添加电子邮件用例时，我们只在alert文件夹中创建<strong class="kv iu"> email.rs </strong>，而不在alert组件中创建underline mod.rs。</p><h2 id="0db7" class="pm nk it bd nl pn po dn np pp pq dp nt lc pr ps nv lg pt pu nx lk pv pw nz px bi translated">决赛成绩</h2><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi qa"><img src="../Images/e5924335f944b902e6400e9a9cedaa58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ULSH-c5r52A4_CzxR9wZQ.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">作业执行日志—按作者划分的屏幕截图</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="ef24" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">部署和Cron作业设置</h1><p id="7cc9" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">对于我个人的项目，我通常使用Heroku进行部署；一个重要的方面是定价模式、规模和使用量。</p><p id="a43e" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">我们还可以构建容器来部署到大多数云容器提供商，如AKS、AWS和GKE。我写过一些关于这个话题的文章。</p><div class="mk ml gp gr mm mn"><a href="https://medium.com/dev-genius/processing-14-gb-files-with-rust-part-3-azure-stacks-13dcf9dde014" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">使用Rust处理14 GB文件—第3部分— Azure堆栈</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">周末编码和写作</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">medium.com</p></div></div><div class="mw l"><div class="qb l my mz na mw nb ly mn"/></div></div></a></div><p id="b093" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">然而，最终总是要做出“制造还是购买”的决定。对于一个构建者来说，我真的很喜欢在Heroku上开始开发、部署和设置DevOps功能是多么容易。</p><p id="63a6" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">Heroku，所有必要的插件都是现成的，比如build pack，cron jobs的设置大多简单明了。</p><div class="mk ml gp gr mm mn"><a href="https://devcenter.heroku.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">Heroku发展中心</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">了解如何在Heroku上构建、部署和管理您的应用。</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">devcenter.heroku.com</p></div></div></div></a></div><p id="4478" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">Heroku中的CRON任务非常容易设置。在Procfile中简单添加</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi qa"><img src="../Images/6cc5986b1fd10ac72d13aa672c4fe9ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZC6YBjo6RXOiYh_KsHslHA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">CRON作业设置—按作者分类的屏幕截图</p></figure><p id="f233" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">并根据需要进入Heroku UI配置您的调度程序。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi qc"><img src="../Images/00189e108492367d1b43197c570a71da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cISgY7VgMP8aXBYLIffVrg.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">设置用户界面-按作者截图</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="762e" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">决赛成绩</h1><p id="e8ca" class="pw-post-body-paragraph kt ku it kv b kw ob ju ky kz oc jx lb lc od le lf lg oe li lj lk of lm ln ks im bi translated">最后，为了儿子，每天晚上八点半，短信到了。我还为Heroku和Twilio服务使用了免费层，因此总成本为0美元。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi qd"><img src="../Images/9173516a26531ae8920fd265461fa48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*78DJh08Y_ezQE4FiIzlbPw.jpeg"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">短信-作者截图</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="e6c8" class="nj nk it bd nl nm nn no np nq nr ns nt jz nu ka nv kc nw kd nx kf ny kg nz oa bi translated">结束语</h1><ol class=""><li id="f7d9" class="om on it kv b kw ob kz oc lc qe lg qf lk qg ks or os ot ou bi translated">建筑创意通常来源于现实生活。享受它，倾听它，感受它。</li><li id="34bd" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">当你建造的时候，你需要考虑规模。考虑为您的用例获得最大的好处；这又回到了我们的日常工作中。降低信息技术基础设施成本不是好事；这是必须要有的。你如何建造它的基础。一个很好的例子是为什么我总是跟踪容器构建大小，这是您的运行时足迹的最重要指标，它将影响您的云运行时成本。等等。</li><li id="5ccb" class="om on it kv b kw ov kz ow lc ox lg oy lk oz ks or os ot ou bi translated">正确编码，规模编码，低成本编码。</li></ol><p id="8ca2" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">这就是这周的内容。顺便说一句，我儿子对我做的东西非常兴奋。现在我们将一起开始编写python代码。</p><p id="a7bd" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">再次感谢你花时间阅读我的周末建设和学习。下次见。</p><p id="eb7d" class="pw-post-body-paragraph kt ku it kv b kw mf ju ky kz mg jx lb lc mh le lf lg mi li lj lk mj lm ln ks im bi translated">请看我下面的其他文章，了解更多你可能感兴趣的周末建设和学习。</p><div class="mk ml gp gr mm mn"><a href="https://medium.com/@jayhuang75" rel="noopener follow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">魏黄-中号</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">声明:我在媒体上写的文章仅与我的学习和观点相关。不会代表或…</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">medium.com。</p></div></div><div class="mw l"><div class="qh l my mz na mw nb ly mn"/></div></div></a></div></div></div>    
</body>
</html>