<html>
<head>
<title>Anomaly Detection using Benford’s Law</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用本福德定律的异常检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/anomaly-detection-using-benfords-law-253eaa25e6c5?source=collection_archive---------18-----------------------#2020-10-01">https://towardsdatascience.com/anomaly-detection-using-benfords-law-253eaa25e6c5?source=collection_archive---------18-----------------------#2020-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="48c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">掷骰子得到5的几率有多大？当然是1/6。从1到100之间随机选择的数字是32的几率有多大？1/100.</h2></div><p id="4da5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设你下载了2020年的银行交易。随机交易的金额以3开头的可能性有多大？考虑到有9个可能的数字(省略0作为第一个数字)，逻辑上你会猜测1/9。令人惊讶的是，这是错误的。真实概率其实在12%左右。第一个数字是1的概率惊人地超过了30%。</p><p id="8473" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么这个规律是从哪里来的，我们又该如何运用呢？</p><h1 id="8f03" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">历史</h1><p id="531d" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">虽然通常被称为本福德定律，但和许多著名定律一样，它并不是以第一个发现它的人命名的。实际上，是一位名叫西蒙·纽康的天文学家在19世纪晚期注意到，在对数表中，一些页面比其他页面磨损得更多——尤其是前几页。他的发现后来被弗兰克·本福特重新发现，他继续做更多的实验来验证这一理论。</p><p id="3e7f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，该定律表明“真实”数据集中数字的首位数字不会以一致的概率出现。我们所说的“真实”是什么意思？这里，我们指的是自然出现的数字集合——银行账户交易、街道地址、数学常数。数字以<em class="ly"> d </em> (1，2，3…9)开头的概率由以下公式给出:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/28008f143e1ae3c4c879128c4b100e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/0*pLPPhNX4J1dKVExG"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="2506" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们画出第一位数字的预期频率，我们会得到以下图形:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/977d8d5d0fb8edfe0f29aeaa45ede9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*AsIqm1D9h1EJxpox"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="1027" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以对第二个数字做同样的事情。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/c01e4283cf5964d862e02dc480e43c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*MdB5NmiPcdU_hkTO"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="54b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，我们如何利用新发现的知识呢？它最合乎逻辑的应用是在会计(尤其是审计)领域，但也可以在其他领域找到用途。这部法律被广泛记载，以至于在联邦、州和地方法院案件中经常被用作证据。</p><p id="9a27" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更多示例:</p><ul class=""><li id="4d84" class="mm mn iq kh b ki kj kl km ko mo ks mp kw mq la mr ms mt mu bi translated">如果你看过本·阿弗莱克主演的电影《会计师T2》，你会看到他利用本福德定律揭露欺诈。</li><li id="4697" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">Ciaponia和Mandanici在一篇研究论文中使用该定律来调查意大利大学是否故意使用虚假数据来支持他们的书籍。</li><li id="df8e" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">本福德定律曾被用于检测2009年伊朗选举中的选民欺诈。</li></ul><h1 id="fce6" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">利用法律</h1><p id="c0d3" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">既然你理解了本福特定律的理论，让我们把它付诸实践。在我们的例子中，我们将检查大约2，100笔金融交易，看它们是否符合。如果我们检测到超出预期频率的数据，我们会将这些交易标记为可疑，并让其他人进一步调查。(代码和例子可以在我的<a class="ae na" href="https://github.com/gbushnell/benfords_law" rel="noopener ugc nofollow" target="_blank"> github </a>中找到。)</p><p id="6851" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要创建一个预期频率的列表。出于我们的目的，我们将关注前两位数字，并利用numpy创建一个10×2矩阵。行将代表数字(0–9)。列将表示数字位置(第一或第二)。</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="1e13" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们需要从我们的数据(2，100笔交易)中计算每个位置上不同数字的频率。我们将首先把我们的数据加载到pandas数据框架中。然后，我们将清理数字(删除否定标识、逗号等)。)并提取第一个和第二个数字。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/b44582cc16fd8a1334656e2091929d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/0*nDCtY5NllR-lr1P2"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="be3f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了便于与我们预先计算的预期概率进行比较，我们还将在另一个numpy数组中计算观察数据的概率。</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="9ebc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据Nigrini和Mittermaier在分析程序中使用本福特定律作为辅助手段，我们可以根据给定的α水平计算期望值的置信区间。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f7e7c458f58522b095a4dff02fb3180e.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/0*zZvCZf8eLzzkNrjT"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="b055" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在两个numpy数组中保存我们的上限和下限，然后比较我们的观察结果，看看我们是否落在计算置信区间之外。如果是这样，我们知道我们有可疑的数据。</p><p id="45f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了形象化我们的发现，我们可以绘制第一个和第二个数字的分布，以及置信区间。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/d6658c5efade99e0ea006b2929d73139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*mMGPL4nvqZQu1AF7"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/8df2d0274b45cba61a57229001c528a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*pqbZ5rO7ZuF3GZwp"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">作者图片</p></figure><p id="c21a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所看到的，在第一个数字中，我们看到8出现的频率比本福特定律预测的要高得多。在第二个数字中，我们发现5也出现得更频繁——实际上是第二个数字中出现频率最高的。</p><p id="42a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你学到了一些东西，并能够找到本福特定律的另一个有用的应用。同样，代码在我的<a class="ae na" href="https://github.com/gbushnell/benfords_law" rel="noopener ugc nofollow" target="_blank"> github </a>上。</p><p id="5d60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读。</p><h1 id="52e5" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">关注我的博客</h1><p id="3187" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">将新内容直接发送到您的收件箱。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="12c7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ly">原载于2020年10月1日http://lowhangingfruitanalytics.com</em><a class="ae na" href="https://lowhangingfruitanalytics.com/anomaly-detection-using-benfords-law/" rel="noopener ugc nofollow" target="_blank"><em class="ly"/></a><em class="ly">。</em></p></div></div>    
</body>
</html>