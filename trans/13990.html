<html>
<head>
<title>Probability Sampling Methods Explained with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python解释概率抽样方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/probability-sampling-methods-explained-with-python-4c0a19a59456?source=collection_archive---------18-----------------------#2020-09-26">https://towardsdatascience.com/probability-sampling-methods-explained-with-python-4c0a19a59456?source=collection_archive---------18-----------------------#2020-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6398" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">概率和统计用PYTHON</h2><div class=""/><div class=""><h2 id="6ec4" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">所有数据科学家都必须知道的四种采样方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/dbb016d87d3fd35f73b1d544d9bbea81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKE3lOUNxEtHgN2ocPYEJw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">丘拉斯奎拉·马丁斯在<a class="ae lh" href="https://www.kindpng.com/imgv/ThxTxoh_population-and-sample-clipart-hd-png-download/" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></p></figure><h1 id="93ee" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">为什么我们需要取样？</h1><p id="1afa" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">当我们试图在不知道总体的情况下得出结论时，就会用到抽样。<strong class="mc jd">总体</strong>指我们想要研究的观测值的完整集合，而<strong class="mc jd">样本</strong>是目标总体的子集。这里有一个例子。去年7月15日至31日进行的盖洛普民意调查发现，42%的美国人认可唐纳德·特朗普作为总统处理工作的方式。结果是基于对大约4500个电话的随机抽样的电话采访(假设每个电话有一个成年人)。约4500名成年人)，年龄在18岁及以上，居住在美国。该民意调查是在特朗普的社交媒体评论引发争议期间进行的。对于这项调查，人口是所有18岁以上的美国公民，样本是4500名成年人。</p><p id="e75d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果取样不当，将会导致偏差，影响您的研究/调查结果的准确性。为了避免选择偏差，我们必须仔细选择一个能够代表整个群体的子集<strong class="mc jd"> </strong>。</p><h1 id="b17d" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">概率抽样的类型</h1><h2 id="a1d3" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">简单随机抽样</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/803a92e6f876caa04295dc037899e459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqDfCozoDsN6GRfEcQSJRQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者使用Powerpoint制作的图片</p></figure><p id="d09b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">简单随机抽样是指我们从总体中随机选择样本，其中每个单元被选中的概率相同。</p><p id="ce22" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">优点:</strong>在随机选择群体成员之前，没有必要将群体分成子群体或采取任何其他额外的步骤。</p><p id="e4d9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">缺点:</strong>样本可能不具有代表性，对于大量人群来说，这可能很耗时。</p><p id="9b69" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">用例:</strong>在我们不太了解人群的情况下使用。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="608e" class="nb lj it no b gy ns nt l nu nv">#let's create a dataframe first!<br/>import numpy as np<br/>import pandas as pd<br/>from numpy.random import randn<br/># Define total number of customers<br/>number_of_customers = 10<br/># Create data dictionary<br/>data = {'customer_id':np.arange(1, number_of_customers+1).tolist(),<br/>       'customer_life_time_value':randn(10)}<br/># Transform dictionary into a data frame<br/>df = pd.DataFrame(data)<br/># View data frame<br/>df</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/a0c99ce1a6a79eed8722b39c29da1d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2WoVpDpnU_dg0kLBoZrjg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">创建了数据框(图片由作者提供)</p></figure><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="85ee" class="nb lj it no b gy ns nt l nu nv">#only using random(), we can generate 4 samples from this dataset<br/># Obtain simple random sample</span><span id="8ae2" class="nb lj it no b gy nx nt l nu nv">simple_random_sample = df.sample(n=4).sort_values(by='customer_id')<br/>simple_random_sample</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ny"><img src="../Images/ed0bd113d987c735aa9803802d1c970a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkRkTMJA_cx1PV_DgMUDhA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">随机选择的客户(图片由作者提供)</p></figure><h2 id="4065" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">分层抽样</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/ebaeaddc799e48902ab5ea3bbf2361f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G3J1fBRL4i8vIO6XOT4Kuw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者使用Powerpoint制作的图片</p></figure><p id="d150" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">对于分层抽样，人口被分成若干小组(称为阶层)，然后从每个阶层中随机选择样本。</p><p id="2fa7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">优点:</strong>它捕捉了关键的人口特征，因此样本更能代表人口。</p><p id="8551" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">缺点:</strong>如果不能形成子群，就无效。</p><p id="f781" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">用例:</strong>它通常用于地理采样，其中层可以是州、国家或生态区域。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="e0e4" class="nb lj it no b gy ns nt l nu nv">#Let's add subgroup labels to the dataset</span><span id="565f" class="nb lj it no b gy nx nt l nu nv">df['strata']=[0, 0, 0, 1, 1, 1, 1, 1, 2, 2]</span><span id="4ead" class="nb lj it no b gy nx nt l nu nv">sss = StratifiedShuffleSplit(n_splits=5, test_size=0.5, random_state=0)</span><span id="4a6c" class="nb lj it no b gy nx nt l nu nv">for x, y in sss.split(df, df['strata']):<br/>    stratified_random_sample = df.iloc[y].sort_values(by='customer_id')<br/>stratified_random_sample</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/5e9994d46fb994e645e46cf94f107bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*catu4eStu2WqoPMUg-2sMw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">从每个阶层中随机选择的客户(图片由作者提供)</p></figure><h2 id="4f78" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">巢式抽样法</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/0d849b65a0f3855a7f75fc65809f3497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4PI0rAcanGnfSFY4enBrg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者使用Powerpoint制作的图片</p></figure><p id="9cbd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">对于整群抽样，总体被分成不同的群。然后随机采样固定数量的群，并且每个所选群内的所有单元都包括在样本中。</p><p id="811e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">优点:它减少了可变性，并且易于实施。</p><p id="e8dd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">缺点:</strong>采样时有可能引入偏差。</p><p id="1529" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">用例:</strong>当每个聚类中的所有个体都可以代表总体时使用。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="6627" class="nb lj it no b gy ns nt l nu nv">#create 4 different clusters based on customers' lift time values</span><span id="d09d" class="nb lj it no b gy nx nt l nu nv">df['cluster'] = pd.cut(df['customer_life_time_value'], bins=4, labels=False) +1</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ob"><img src="../Images/5be25727236b60c9b55343847a450d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPTD1J5CgjB_ANk8vPVEKw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">增加了“集群”栏(图片由作者提供)</p></figure><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="1224" class="nb lj it no b gy ns nt l nu nv"># predefine which clusters/groups we want to select samples from</span><span id="4c5e" class="nb lj it no b gy nx nt l nu nv">n=[2,4]</span><span id="df07" class="nb lj it no b gy nx nt l nu nv">def clustering_sampling(df,n):<br/>    df_list=[]<br/>    for i in range(len(n)):<br/>        df1=df[df['cluster']==n[i]]<br/>        df_list.append(df1)<br/>    final_df=pd.concat(df_list, ignore_index=True)<br/>    <br/>    return final_df</span><span id="abf1" class="nb lj it no b gy nx nt l nu nv">clustering_sampling(df,n)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/644da369919ea97200c99000e83aeb79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_nzdBkUf68DyxbeYLR-qhg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">从样本中的聚类2和聚类4中选择所有客户(图片由作者提供)</p></figure><h2 id="ccc5" class="nb lj it bd lk nc nd dn lo ne nf dp ls mj ng nh lu mn ni nj lw mr nk nl ly iz bi translated">系统抽样</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/17b63c6f58570af65b928bef133be9e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTp8AhiOXx6ZeRVCvX57ew.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">从人群中选择每一个人(图片由作者使用Powerpoint制作)</p></figure><p id="4faa" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">通过从样本框架中系统地选择单元来抽取系统样本。(即每隔一个单位包括在样本中)</p><p id="9fb0" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">优点:</strong>可以消除聚类选择，执行起来很简单。</p><p id="8249" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">缺点:我们需要预先确定估计的人口数量。如果人口有一种标准化的模式，那就不好用了。</p><p id="d23d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">用例:</strong>当相关数据不呈现模式时使用。</p><pre class="ks kt ku kv gt nn no np nq aw nr bi"><span id="49df" class="nb lj it no b gy ns nt l nu nv">def systematic_sampling(df, step):<br/>    <br/>    indexes = np.arange(0,len(df),step=step)<br/>    systematic_sample = df.iloc[indexes]<br/>    return systematic_sample<br/>    <br/>systematic_sampling(df, 1)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/3bd952ab21b1d5aa47659dead0697ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIpCMReufsVTyC6qfxBKuw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">示例中包含所有其他customer_id(图片由作者提供)</p></figure><h1 id="9731" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">参考</h1><ol class=""><li id="94de" class="of og it mc b md me mg mh mj oh mn oi mr oj mv ok ol om on bi translated"><a class="ae lh" href="https://news.gallup.com/poll/262694/latest-trump-job-approval-rating.aspx" rel="noopener ugc nofollow" target="_blank">https://news . Gallup . com/poll/262694/latest-trump-job-approval-rating . aspx</a></li><li id="9c21" class="of og it mc b md oo mg op mj oq mn or mr os mv ok ol om on bi translated"><a class="ae lh" href="https://www.investopedia.com/" rel="noopener ugc nofollow" target="_blank">https://www.investopedia.com/</a></li></ol></div></div>    
</body>
</html>