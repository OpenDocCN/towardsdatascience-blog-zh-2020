<html>
<head>
<title>Underrated Combined Functionalities of Tableau — Point, LineString &amp; Polygon Mapping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">低估了Tableau的组合功能—点、线串和多边形映射</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/underrated-combined-functionalities-of-tableau-point-linestring-polygon-mapping-b4c0568a4de2?source=collection_archive---------44-----------------------#2020-10-21">https://towardsdatascience.com/underrated-combined-functionalities-of-tableau-point-linestring-polygon-mapping-b4c0568a4de2?source=collection_archive---------44-----------------------#2020-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1fd8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Tableau中的地理空间分析-无需地理编码/底图服务即可工作+在单一设置中渲染混合几何类型</h2></div><blockquote class="ki kj kk"><p id="914c" class="kl km kn ko b kp kq ju kr ks kt jx ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated">完成了我的一个空间分析项目后，我已经准备好在Tableau中展示我的发现，但是面临着一个非常规的问题，那就是完全没有互联网接入。由于我们大多数人通常认为Tableau中内置的地理编码和底图服务是理所当然的，这比我最初预期的要复杂得多。</p></blockquote><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/0d7a037443ef24e4eec270424d00aeda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kAGWnHy5F65dRJLj47I4Ww.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者提供的图片|由空间数据文件以Tableau形式呈现的地图|按规划区域展示新加坡公民(65岁及以上)的分布情况</p></figure><p id="4125" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">基本上，当互联网不可用时，上面的地图会变成这样</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mb"><img src="../Images/ddea179746b9512dcc29dc9daa2f8f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTRoa-2ZI9CI85PnNblGnQ.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">按作者分类的图像|在没有互联网连接的情况下由空间数据文件以Tableau形式呈现的地图-所有地理编码和底图服务均不可用。</p></figure><p id="a4b5" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">哎呀…显然，这有一些毁灭性的影响。更糟糕的是，在没有内置地图功能的情况下，渲染空间数据的深入教程少得可怜。所以我开始自己做一些探索，主要是，我必须解决一些问题来完成我的项目:</p><ol class=""><li id="1b79" class="mc md it ko b kp kq ks kt ly me lz mf ma mg lh mh mi mj mk bi translated">确保新加坡的地图多边形按比例渲染<em class="kn">和缩放</em>。</li><li id="bde3" class="mc md it ko b kp ml ks mm ly mn lz mo ma mp lh mh mi mj mk bi translated">显示缺失的底图详细信息-高速公路、街道名称等。因为它们不再自动显示在背景中。</li></ol><h1 id="66d1" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated"><strong class="ak">解决问题1 </strong> —绘制地图多边形并渲染其实际比例</h1><p id="9789" class="pw-post-body-paragraph kl km it ko b kp ni ju kr ks nj jx ku ly nk kx ky lz nl lb lc ma nm lf lg lh im bi translated">基于上述背景，我必须处理的只是GeoJSON格式的空间数据文件(出于本教程的考虑，我已将一个示例上传到GitHub的<a class="ae nn" href="https://gist.githubusercontent.com/incubated-geek-cc/a1ab578d20d977f586718be766ab5f03/raw/0ef3acbdf9b2e334bf0341837ccc93395b53c41e/sg_planning_areas_2020_elderly_distribution.geojson" rel="noopener ugc nofollow" target="_blank">SG _ planning _ areas _ 2020 _ eldery _ distribution . geo JSON</a>)并继续研究它。</p><p id="541d" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">从根本上来说，<a class="ae nn" href="https://tools.ietf.org/html/rfc7946#section-3.3" rel="noopener ugc nofollow" target="_blank"> GeoJSON FeatureCollection对象</a>是一个JSON对象，它包含所有必要的坐标(纬度和经度)以将其几何形状渲染到任何地图上。因此，我决定利用这些信息，用“多边形”代替“地图”来制作几何图形。这需要一种Tableau容易理解的数据格式，在这种情况下，我选定的格式是CSV文件:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi no"><img src="../Images/8f57eaa44ad1c9bf8f60f5c99c55ed18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5owHTQNrraXXu27OMZSCXQ.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">Image by Author |要在Tableau中使用“多边形”而不是“地图”渲染几何图形，必须首先将GeoJSON数据转换为CSV格式。</p></figure><p id="11bd" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">幸运的是，我在<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">https://tableau-data-utility.onrender.com/</a>创建了一个工具来加速这个过程。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi np"><img src="../Images/11de7874281e290fa98ccefd2f95c15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDcMyYy6CsNegisTo8cclw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者图片| GeoJSON文件上传到https://tableau-data-utility.onrender.com/<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">生成CSV输出文件|“导出CSV输出”然后选择保存CSV文件</a></p></figure><p id="69c9" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">基本上，这是一个基于浏览器的应用工具，我创建了所有的指令和实施所需的信息。我现在需要做的就是上传上面的GeoJSON文件，通过选择“生成CSV输出”导出转换后的输出，并使用“多边形”在Tableau中渲染它:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nq"><img src="../Images/dd7b94ef8f92f0d847363edb8943142e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E89DZBCpjkeFZRjDMbnx6Q.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">按作者分类的图像CSV文件中生成的字段用于在Tableau中渲染地图多边形-不依赖于任何地理编码服务</p></figure><p id="d6c6" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">然后奇迹发生了！问题1已解决-地图多边形现在以正确的比例渲染，无需地理编码服务。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nr"><img src="../Images/33433f096760260608a428fca2c025bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dbfv8jPil9hiOlXShkELCw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图片作者| ( <strong class="bd ns">左</strong>)用“地图”渲染的地图多边形| ( <strong class="bd ns">右</strong>)用“多边形”渲染的地图多边形</p></figure><p id="126f" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">然而，随着问题1的解决，第二个问题很快取代了它——这就是缺少底图的<strong class="ko iu"/>，<strong class="ko iu"> </strong>将我们直接引向问题2。</p><h1 id="d217" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">解决问题2-绘制在Tableau中渲染的空间数据的底图图层</h1><p id="86a0" class="pw-post-body-paragraph kl km it ko b kp ni ju kr ks nj jx ku ly nk kx ky lz nl lb lc ma nm lf lg lh im bi translated">乍看之下，这似乎不是什么大事，但当我受命调查和优化岛上的各种交通路线时，这很快就成了问题:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nt"><img src="../Images/26465bcbb267c516825b748878dc899e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_NSOiqIMR3sDQ51UzFpIg.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者提供的图片|展示了从出发地到目的地的各种交通路线|以上示例展示了在新加坡驾车从中巴鲁市场到Vivo City的两条可能路线</p></figure><p id="60d2" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">显然，虽然国家/州/省的轮廓可以很容易地从其地图多边形中推断出来，但由<strong class="ko iu">(多)点</strong>和<strong class="ko iu">(多)线串</strong>表示的交通路线在没有如上图所示的详细地图图层的情况下并不明显。用于渲染上述的样本数据可以在我的GitHub上找到:<a class="ae nn" href="https://gist.github.com/incubated-geek-cc/050ac94b838fb0fa220b01c6dc961908/raw/c2a032f3be67fa2b4c267ef6e8dacee7d968dc1b/sg_tiong_bahru_mkt_to_vivo_city.geojson" rel="noopener ugc nofollow" target="_blank">SG _ tiong _ Bahru _ mkt _ to _ vivo _ city . geo JSON</a>。使用相同的工具，GeoJSON文件现已转换为<a class="ae nn" href="https://gist.github.com/incubated-geek-cc/050ac94b838fb0fa220b01c6dc961908/raw/c2a032f3be67fa2b4c267ef6e8dacee7d968dc1b/sg_tiong_bahru_mkt_to_vivo_city.csv" rel="noopener ugc nofollow" target="_blank"> CSV格式(SG _ tiong _ Bahru _ mkt _ to _ vivo _ city . CSV)</a>。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nu"><img src="../Images/569b17069619191fd8d9b8510e2b1a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rchj5qhMA0zXOZVMT1gArQ.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者图片|我在<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">https://tableau-data-utility.onrender.com/</a>部署的工具的截图，该工具用于从用户上传的JSON文件中为Tableau输出CSV文件</p></figure><p id="179c" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">因此，这为我们带来了一个简单但非常有用和方便的应用程序功能——导出Tableau的背景地图图像的能力:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nv"><img src="../Images/2310a41d81478c9483c16704aae35510.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MphBS1k898lJVQz5dXFUDg.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者图片|展示了<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">网络应用</a>将地图导出为背景图片的功能</p></figure><p id="3df5" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">这里需要注意几个特殊的子功能:</p><ol class=""><li id="90f5" class="mc md it ko b kp kq ks kt ly me lz mf ma mg lh mh mi mj mk bi translated"><strong class="ko iu">可更改底图选择</strong>-默认情况下，使用OpenStreetMap (OSM)的底图。但是，用户可以通过输入有效的底图URL来更改底图，如下所示:</li></ol><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nw"><img src="../Images/f51039e887822e10e97031471531e184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDdnMuvPvcO3WL5a7QtWNA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者提供的图片| ( <strong class="bd ns">左</strong>)使用默认底图| ( <strong class="bd ns">右</strong>)使用备选地图服务，即<a class="ae nn" href="https://docs.onemap.sg/maps/index.html" rel="noopener ugc nofollow" target="_blank"> OneMap </a> —请注意，用户的输入必须与小册子兼容— <a class="ae nn" href="https://developers.planet.com/docs/basemaps/tile-services/xyz/" rel="noopener ugc nofollow" target="_blank"> XYZ底图切片服务</a>又称滑动地图</p></figure><p id="efbd" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">2.<strong class="ko iu">地图边界的自动显示和更新</strong> —在地图的正下方，有一个坐标表，当地图被缩放或移动时，它会自动更新。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nx"><img src="../Images/f3cd71097ca3fcc02159f817bf32a2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N0ZuZEWoCtx0Pyq962BbJg.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">按作者分类的图像|将背景图像绘制为底图时，这些坐标对应于Tableau中的精确坐标</p></figure><p id="4f10" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">因此，要为运输路线导出适当的地图图像，必须确保在地图查看端口中捕获的地图的<strong class="ko iu">缩放级别</strong> l和<strong class="ko iu">边界</strong>都包括您的几何形状的所需边界。这最终将我们引向:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ny"><img src="../Images/2f82914c70adc167c402ae99b7e1c306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNnGPA07Mtw3J5sJ0yI3Mw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者图片|导出的地图图像和渲染的坐标直接输入到Tableau中</p></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nz"><img src="../Images/a61655912dc1467536f01881acc70707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UalgzAr7SvSTfhFKEwA2nw.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图片由作者提供| ( <strong class="bd ns">左侧</strong>)不带底图的路线| ( <strong class="bd ns">右侧</strong>)带有导入的地图图像的路线|清楚地显示了地图图层的细节，上面的起点-目的地路线向查看者显示了哪些道路、街道、建筑物、设施等。就在附近，为进一步的空间分析提供了更多的背景</p></figure><p id="3cd2" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">因此，问题2(缺少底图详细信息)现已解决。</p><p id="8d21" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">最后，虽然我可以在这里结束这篇文章，但我也想分享我从这里得到的另一个启示— <strong class="ko iu">通过Tableau中标准功能的组合绘制混合几何类型(“多边形”和“直线”)</strong>。</p><h1 id="3e66" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">额外的发现—从单个CSV文件在Tableau中绘制混合几何图形类型</h1><p id="35ce" class="pw-post-body-paragraph kl km it ko b kp ni ju kr ks nj jx ku ly nk kx ky lz nl lb lc ma nm lf lg lh im bi translated">尽管Tableau声称有局限性</p><blockquote class="ki kj kk"><p id="3384" class="kl km kn ko b kp kq ju kr ks kt jx ku kv kw kx ky kz la lb lc ld le lf lg lh im bi translated"><a class="ae nn" href="https://help.tableau.com/current/pro/desktop/en-us/maps_shapefiles.htm" rel="noopener ugc nofollow" target="_blank">连接到混合几何类型</a></p></blockquote><p id="67b3" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">我对Tableau已经存在的功能的探索表明情况并非如此。Tableau已经具有渲染混合几何类型的固有功能，我将使用这个空间文件来证明这一点，该文件是通过合并之前的两个GeoJSON文件创建的(实际的<a class="ae nn" href="https://gist.github.com/incubated-geek-cc/99af3184e8c43e00aca59f18e583a796/raw/d8ce1ed16e045dba9b1bc62aea2c44879639f3b2/merged.geojson" rel="noopener ugc nofollow" target="_blank">文件</a>在我的GitHub中)。重复相同的步骤— GeoJSON被转换为CSV输出，底图图像通过https://tableau-data-utility.onrender.com/的<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">工具导出，这为我们提供了:</a></p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi oa"><img src="../Images/a163ab99147380eec632c0e182aac02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GmNm1806e1Gzf-3mgWlfcA.png"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">作者提供的图片|展示Tableau中具有“多边形”和“线”功能的混合几何类型的绘图|多边形和交通路线都在同一视图中呈现</p></figure><p id="4216" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">需要注意的是，要仔细查看“标记”面板，因为每个必填字段都有专门的<strong class="ko iu">后缀</strong>，带有“<strong class="ko iu">(点+线)</strong>”或“<strong class="ko iu">(多边形)</strong>”。这是为了区分哪些字段应该由<strong class="ko iu">“线”——即(点+线)</strong>渲染，哪些字段应该由<strong class="ko iu">“多边形”——即(多边形)</strong> <em class="kn">(是的，我部署的工具确实基于几何类型生成字段)</em>。</p><p id="2eb2" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">简而言之，我试图通过其他方式在Tableau中呈现空间数据集，这向我展示了使用现有的多种功能进一步可视化的可能性。希望你们觉得这很有用，可以在https://tableau-data-utility.onrender.com/<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">使用这个工具来生成你们需要的数据集！</a></p><p id="a327" class="pw-post-body-paragraph kl km it ko b kp kq ju kr ks kt jx ku ly kw kx ky lz la lb lc ma le lf lg lh im bi translated">我之前发表的关于渲染网络图数据集的教程使用了部署在<a class="ae nn" href="https://tableau-data-utility.onrender.com/" rel="noopener ugc nofollow" target="_blank">https://tableau-data-utility.onrender.com/</a>的工具。如果你想在Tableau中用最少的努力来绘制网络图，请查看它。感谢阅读！</p><div class="ob oc gp gr od oe"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">geek-cc.medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os ls oe"/></div></div></a></div></div></div>    
</body>
</html>