<html>
<head>
<title>How to Run Jupyter Notebook on Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Docker上运行Jupyter笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-run-jupyter-notebook-on-docker-7c9748ed209f?source=collection_archive---------0-----------------------#2020-10-16">https://towardsdatascience.com/how-to-run-jupyter-notebook-on-docker-7c9748ed209f?source=collection_archive---------0-----------------------#2020-10-16</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3e90" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">不再有Python环境和包更新</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/f26f2d8b09df38b4fc028ad31ed895e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iI5I2-EFW8qI668s1fV-6w.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由来自<a class="ae kz" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4704771" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kz" href="https://pixabay.com/users/kellepics-4893063/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4704771" rel="noopener ugc nofollow" target="_blank">斯蒂芬·凯勒</a>拍摄</p></figure><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="140d" class="lf lg iu lb b gz lh li l lj lk"><strong class="lb iv">Table of Contents</strong></span><span id="5e8f" class="lf lg iu lb b gz ll li l lj lk"><a class="ae kz" href="#093d" rel="noopener ugc nofollow"><strong class="lb iv">Introduction</strong></a></span><span id="7358" class="lf lg iu lb b gz ll li l lj lk"> 1. <a class="ae kz" href="#09a3" rel="noopener ugc nofollow">Installing Docker Desktop</a><br/> 2. <a class="ae kz" href="#4802" rel="noopener ugc nofollow">Docker help</a><br/> 3. <a class="ae kz" href="#9927" rel="noopener ugc nofollow">Running Jupyter Docker Stacks</a><br/> 4. <a class="ae kz" href="#f597" rel="noopener ugc nofollow">Formatting Docker ps</a><br/> 5. <a class="ae kz" href="#b42d" rel="noopener ugc nofollow">Entering the Docker container and using bash</a><br/> 6. <a class="ae kz" href="#256b" rel="noopener ugc nofollow">Stopping and removing containers and images</a><br/> 7. <a class="ae kz" href="#0ba2" rel="noopener ugc nofollow">Connecting the local directory to a Docker container</a><br/> 8. <a class="ae kz" href="#08c1" rel="noopener ugc nofollow">Inspecting a container</a><br/> 9. <a class="ae kz" href="#a6ca" rel="noopener ugc nofollow">Getting started with Docker file</a><br/>10. <a class="ae kz" href="#999d" rel="noopener ugc nofollow">Publishing an image to Docker Hub</a></span><span id="8fc1" class="lf lg iu lb b gz ll li l lj lk"><a class="ae kz" href="#556f" rel="noopener ugc nofollow"><strong class="lb iv">Conclusion</strong></a></span></pre><h1 id="093d" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">介绍</h1><blockquote class="md me mf"><p id="05dd" class="mg mh mi mj b mk ml jv mm mn mo jy mp mq mr ms mt mu mv mw mx my mz na nb nc in bi translated">Docker简化并加速了您的工作流程，同时让开发人员可以自由地为每个项目选择工具、应用程序堆栈和部署环境。—从<a class="ae kz" href="https://www.docker.com/why-docker" rel="noopener ugc nofollow" target="_blank">开始用Docker </a>开发</p></blockquote><p id="5d69" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">Docker为您的开发提供了一个包含的环境。通过使用Docker，您可能不需要在计算机上安装pyenv/pipenv/virtualenv或任何编程语言。你只要用一个Docker容器！在本文中，您将学习如何在Docker上运行Jupyter。</p><h1 id="35a5" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">TL；速度三角形定位法(dead reckoning)</h1><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="88f3" class="lf lg iu lb b gz lh li l lj lk">$ docker run -p 8888:8888 -v $(pwd):/home/jovyan/work jupyter/minimal-notebook<br/>$ docker run -p 8888:8888 -v $(pwd):/home/jovyan/work jupyter/<!-- -->scipy-notebook</span></pre><p id="8fe2" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">上面的第一个命令将运行Jupyter minimal-notebook，将本地目录连接到Docker容器。<br/>第二个命令与第一个命令相同。唯一不同的是运行Jupyter Scipy-notebook。</p><h1 id="09a3" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">安装Docker桌面</h1><p id="1d7d" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">安装Docker桌面，当你启动Docker时，你会在菜单栏中看到一个图标。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nl"><img src="../Images/c40c2509f129d17ea05d24629ec89347.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*gptS1bSmwSFkl5BkkXDe6Q.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Mac上的Docker菜单。作者图片</p></figure><p id="a151" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">Docker <strong class="mj iv">首选项</strong>菜单允许您配置Docker设置，如安装、更新、版本频道、Docker Hub登录等。打开“偏好设置”并转到“资源”来更改CPU、内存和其他设置。默认情况下，Docker Desktop被设置为使用主机上可用处理器数量的一半。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nm"><img src="../Images/30e7f4176a0528aa271edff5a0fe84e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-fmIrTkbOyrHQVS_crzhzQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Docker首选项。作者图片</p></figure><p id="71b8" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">你可以在这个页面上阅读更多关于<a class="ae kz" href="https://docs.docker.com/docker-for-mac/#file-sharing" rel="noopener ugc nofollow" target="_blank"> Mac </a>和<a class="ae kz" href="https://docs.docker.com/docker-for-windows/" rel="noopener ugc nofollow" target="_blank"> Windows </a>的细节。</p><h1 id="4802" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">Docker帮助</h1><p id="7154" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">在您的终端中运行<code class="fe nn no np lb b">docker</code>，您将看到所有命令:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="7424" class="lf lg iu lb b gz lh li l lj lk">$ docker<br/>Usage: docker [OPTIONS] COMMAND<br/>A self-sufficient runtime for containers<br/>Options:<br/>      --config string      Location of client config files (default "/Users/shinokada/.docker")<br/>  -c, --context string     Name of the context to use to connect to the daemon (overrides<br/>                           DOCKER_HOST env var and default context set with "docker context use")<br/>  -D, --debug              Enable debug mode<br/>... MORE LINES</span></pre><p id="47b7" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">Docker将命令逻辑地分组为管理命令。以下是顶级命令。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="1548" class="lf lg iu lb b gz lh li l lj lk">Management Commands:<br/>  builder     Manage builds<br/>  config      Manage Docker configs<br/>  container   Manage containers<br/>  context     Manage contexts<br/>  image       Manage images<br/>  network     Manage networks<br/>  node        Manage Swarm nodes<br/>  plugin      Manage plugins<br/>  secret      Manage Docker secrets<br/>  service     Manage services<br/>  stack       Manage Docker stacks<br/>  swarm       Manage Swarm<br/>  system      Manage Docker<br/>  trust       Manage trust on Docker images<br/>  volume      Manage volumes</span><span id="68d7" class="lf lg iu lb b gz ll li l lj lk">Commands:<br/>  attach      Attach local standard input, output, and error streams to a running container<br/>  ... MORE LINES</span></pre><p id="359d" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以使用<code class="fe nn no np lb b">--help</code>获得更多关于管理命令的信息。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c9a0" class="lf lg iu lb b gz lh li l lj lk">$ docker container --help<br/>$ docker image --help</span></pre><p id="d489" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">让我们开始创建Docker容器。</p><h1 id="9927" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">运行Jupyter Docker堆栈</h1><p id="3278" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated"><a class="ae kz" href="https://github.com/jupyter/docker-stacks" rel="noopener ugc nofollow" target="_blank"> Jupyter Docker Stacks </a>是一组准备运行的Docker映像，包含Jupyter应用程序和交互式计算工具。</p><p id="577c" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">官方Jupyter创建了<a class="ae kz" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html" rel="noopener ugc nofollow" target="_blank">不同的Docker图像</a>，我们将使用<code class="fe nn no np lb b"><a class="ae kz" href="https://hub.docker.com/r/jupyter/minimal-notebook/tags/" rel="noopener ugc nofollow" target="_blank">jupiter/minimal</a></code>来学习如何使用Docker。这个映像基于<code class="fe nn no np lb b"><a class="ae kz" href="https://hub.docker.com/r/jupyter/base-notebook" rel="noopener ugc nofollow" target="_blank">jupyter/base-notebook</a></code>，它有命令行工具、TeX Live、git、emacs、vi、jed等等。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="8858" class="lf lg iu lb b gz lh li l lj lk">$ docker run -p 8888:8888 jupyter/minimal-notebook </span></pre><p id="8ff6" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">在输出的末尾，您可以找到带有标记的URL。你用<code class="fe nn no np lb b">cmd</code> +click在浏览器上打开网址。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/f14a5a41714edc9febca54ffb8e313b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mf-yrgdxE0F5K4FSkVSnbA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">带有令牌的URL的Docker输出。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nr"><img src="../Images/f8a6076e3791d66a80831463886aae2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNTwldKDm36M8ESbidcbMQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">单击URL后，您会看到这一点。作者图片</p></figure><p id="3235" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">打开另一个终端标签并检查容器id号。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="1742" class="lf lg iu lb b gz lh li l lj lk">$ docker container ls<br/># or <br/>$ docker ps</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/c918cad7a34e61bd00050b5535c042e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UOd32PM3vWydwQQyt_K-zw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">docker ps的输出。作者图片</p></figure><h1 id="f597" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">格式化Docker ps</h1><p id="6924" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">阅读上面的输出有点困难。让我们创建一个格式。<br/>将以下内容添加到您的<code class="fe nn no np lb b">~/.zshrc</code>或<code class="fe nn no np lb b">~/.bash_profile</code>中。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="739c" class="lf lg iu lb b gz lh li l lj lk">FORMAT="\nID\t{{.ID}}\nIMAGE\t{{.Image}}\nCOMMAND\t{{.Command}}\nCREATED\t{{.RunningFor}}\nSTATUS\t{{.Status}}\nPORTS\t{{.Ports}}\nNAMES\t{{.Names}}\n"</span></pre><p id="8d24" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以通过将它添加到docker的<code class="fe nn no np lb b">--format</code>选项来使用它:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="d2ff" class="lf lg iu lb b gz lh li l lj lk">$ docker ps --format=$FORMAT<br/># or<br/>$ docker container ls --format=$FORMAT</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/fabbe3e9dde560c74ac7c2c0b467d1dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cCjg8yQ9oxQmNnMZHa6zzA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">docker容器ls的输出— format=$FORMAT。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/381b7192ed7bf62cce909292f0c97e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsvRmcIo2SjF4m37ZkPwfQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">docker ps — format $FORMAT的输出。作者图片</p></figure><p id="8227" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">如上图所示，有无<code class="fe nn no np lb b">=</code>标志都可以使用。</p><h1 id="b42d" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">进入Docker容器并使用bash</h1><p id="7501" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated"><code class="fe nn no np lb b">docker exec</code>在运行容器中运行命令。<code class="fe nn no np lb b">-i</code>选项允许我们交互地使用它，<code class="fe nn no np lb b">-t</code>分配一个伪TTY。我们使用<code class="fe nn no np lb b">/bin/bash</code>来运行bash shell。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="1e54" class="lf lg iu lb b gz lh li l lj lk">$ docker exec -it cb8b /bin/bash</span></pre><p id="d08e" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><code class="fe nn no np lb b">cb8b</code>是我的容器的前4个字母。您有不同的容器id。</p><p id="7939" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">使用<code class="fe nn no np lb b">docker exec --help</code>可以找到更多信息。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="4e4f" class="lf lg iu lb b gz lh li l lj lk">$ docker exec --help<br/>Usage: docker exec [OPTIONS] CONTAINER COMMAND [ARG...]<br/>Run a command in a running container<br/>Options:<br/>  -d, --detach               Detached mode: run command in the background<br/>      --detach-keys string   Override the key sequence for detaching a container<br/>  -e, --env list             Set environment variables<br/>... MORE LINES</span></pre><p id="17d6" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">一旦进入容器，就可以运行普通的bash命令。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nv"><img src="../Images/c75262b8cad5bbddd673cc0394d3fd78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FcYUm1vOabRSzLrxKuBZJg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">在容器中运行ls命令。作者图片</p></figure><p id="f9eb" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">让我们检查一下容器Python和pip版本:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="ca3e" class="lf lg iu lb b gz lh li l lj lk">(base) jovyan@cb8b4579b2a6:~/work$ python -V<br/>Python 3.8.5<br/>(base) jovyan@cb8b4579b2a6:~/work$ pip -V<br/>pip 20.2.3 from /opt/conda/lib/python3.8/site-packages/pip (python 3.8)</span></pre><p id="9828" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">该图像也有<code class="fe nn no np lb b">ipython</code>和<code class="fe nn no np lb b">conda</code>。让我们检查一下:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="e756" class="lf lg iu lb b gz lh li l lj lk">(base) jovyan@cb8b4579b2a6:~$ ipython --version<br/>7.18.1<br/>(base) jovyan@cb8b4579b2a6:~$ conda info -a</span><span id="58a4" class="lf lg iu lb b gz ll li l lj lk">active environment : base<br/>    active env location : /opt/conda<br/>            shell level : 1<br/>       user config file : /home/jovyan/.condarc<br/> populated config files : /opt/conda/.condarc<br/>          conda version : 4.8.5<br/>    conda-build version : not installed<br/>--- MORE LINES</span></pre><p id="b674" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以找到安装了哪些Python包:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="fedd" class="lf lg iu lb b gz lh li l lj lk">(base) jovyan@cb8b4579b2a6:~$ pip list</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nw"><img src="../Images/45026830b170b8a16b516fb4baf53b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXFO-btoeptNE5e0Q03AuQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">运行容器中的运行pip列表。作者图片</p></figure><p id="77b2" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">熊猫，numpy等不装。您可以使用<code class="fe nn no np lb b">pip install pandas numpy</code>安装它们:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="d261" class="lf lg iu lb b gz lh li l lj lk">(base) jovyan@cb8b4579b2a6:~/work$ pip install pandas numpy</span></pre><p id="193c" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以使用<code class="fe nn no np lb b">exit</code>退出bash。CTRL-C退出一个正在运行的容器。</p><h1 id="256b" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">停止和移除容器和图像</h1><p id="e2cd" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">让我们停止一个正在运行的容器:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="63c1" class="lf lg iu lb b gz lh li l lj lk">$ docker container ls<br/>CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS              PORTS                    NAMES<br/>cb8b4579b2a6        jupyter/minimal-notebook   "tini -g -- start-no…"   4 hours ago         Up 4 hours          0.0.0.0:8888-&gt;8888/tcp   suspicious_allen</span></pre><p id="7662" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以使用<code class="fe nn no np lb b">docker container stop &lt;container-id&gt;</code>停止容器:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="20f5" class="lf lg iu lb b gz lh li l lj lk">$ docker container stop cb8b</span></pre><p id="72a5" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以找到包括非活动容器在内的所有容器:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="e202" class="lf lg iu lb b gz lh li l lj lk">$ docker container ls -a<br/># or<br/>$ docker ps -a</span></pre><p id="5525" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以列出docker图像:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="f151" class="lf lg iu lb b gz lh li l lj lk">$ docker images</span></pre><p id="8269" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以使用<code class="fe nn no np lb b">docker rmi &lt;image-id&gt;</code>删除图像。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c774" class="lf lg iu lb b gz lh li l lj lk">$ docker rmi -f &lt;image-id&gt;</span></pre><p id="e61a" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><code class="fe nn no np lb b">-f</code>在不停止容器的情况下强制移走正在运行的容器。</p><p id="f158" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">如果您想要一次移除所有图像:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c9f8" class="lf lg iu lb b gz lh li l lj lk">$ docker rmi $(docker images -a -q)</span></pre><p id="d85c" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><code class="fe nn no np lb b">-a</code>允许我们删除所有图像，删除后<code class="fe nn no np lb b">-q</code>显示数字id。</p><p id="51fa" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以用同样的方式使用“移除所有容器”:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c5d9" class="lf lg iu lb b gz lh li l lj lk">$ docker rm $(docker ps -a -q)</span></pre><p id="b7cc" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><strong class="mj iv">使用</strong> <code class="fe nn no np lb b"><strong class="mj iv">--rm<br/></strong></code>可以用<code class="fe nn no np lb b"><a class="ae kz" href="https://docs.docker.com/engine/reference/run/#clean-up---rm" rel="noopener ugc nofollow" target="_blank">--rm</a></code>运行一个容器，当退出容器时自动清理容器。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="bd0d" class="lf lg iu lb b gz lh li l lj lk">$ docker run --rm jupyter/minimal-notebook</span></pre><p id="bfa1" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">退出容器后，您不需要运行<code class="fe nn no np lb b">docker ps -a</code>和<code class="fe nn no np lb b">docker rm &lt;image-id&gt;</code>。</p><p id="c555" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">您可以将选项与<code class="fe nn no np lb b">-it</code>结合使用。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="3077" class="lf lg iu lb b gz lh li l lj lk">$ docker run -it --rm jupyter/minimal-notebook bash<br/>(base) jovyan@c803e897b718:~$</span></pre><p id="ae47" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">当您运行这个命令时，您可以在容器中使用bash，当您退出时，它将清理容器。</p><h1 id="0ba2" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">将本地目录连接到Docker容器</h1><p id="d1a5" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">Docker卷是默认Docker文件系统之外的目录(或文件),作为普通目录和文件存在于主机文件系统中。卷不会增加使用它的容器的大小，并且卷的内容存在于给定容器的生命周期之外。</p><p id="0327" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">我们可以使用<code class="fe nn no np lb b">-v</code>选项创建一个卷。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="181c" class="lf lg iu lb b gz lh li l lj lk">$ docker run -p 8888:8888 -v /Users/yourname/yourdirectory:/home/jovyan/work jupyter/minimal-notebook</span></pre><p id="96fb" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">如果要使用当前工作目录，使用<code class="fe nn no np lb b">$(pwd)</code>。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="67b9" class="lf lg iu lb b gz lh li l lj lk">$ docker run -p 8888:8888 -v $(pwd):/home/jovyan/work jupyter/minimal-notebook</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/5577693e41a185d380a801d10143620b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kZWVJl3mOVJhMyjPF9VIwQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">使用卷运行docker run。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nx"><img src="../Images/1c426408f593449e2452ef75054a486b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_N5pL0GcPPnVjFj3gFA6g.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">Jupyter笔记本在浏览器上显示本地目录。</p></figure><p id="02b0" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">无论您在Jupyter笔记本中做了什么更改，它也会更改您的本地文件。</p><h1 id="08c1" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">检查集装箱</h1><p id="22e8" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">您可以检查码头集装箱:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="9b9c" class="lf lg iu lb b gz lh li l lj lk">$ docker inspect &lt;container-id or container-name&gt;</span></pre><p id="746d" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">它返回docker对象信息。</p><h1 id="a6ca" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">Docker文件入门</h1><p id="685e" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">让我们在创建容器时安装所有Python包。</p><p id="5798" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">创建一个新目录和一个名为Dockerfile的文件，内容如下:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="8bd5" class="lf lg iu lb b gz lh li l lj lk">ARG BASE_CONTAINER=jupyter/minimal-notebook<br/>FROM $BASE_CONTAINER</span><span id="9d5d" class="lf lg iu lb b gz ll li l lj lk">LABEL author="Shinichi Okada"</span><span id="89db" class="lf lg iu lb b gz ll li l lj lk">USER root</span><span id="7500" class="lf lg iu lb b gz ll li l lj lk">RUN pip install pandas numpy matplotlib plotly</span><span id="8916" class="lf lg iu lb b gz ll li l lj lk"># Switch back to jovyan to avoid accidental container runs as root<br/>USER $NB_UID</span></pre><p id="8aa9" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">然后运行<code class="fe nn no np lb b">docker build</code>:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="ef8d" class="lf lg iu lb b gz lh li l lj lk">$ docker build -t shinokada/jupyter-notebook .<br/>$ docker run -p 8888:8888 -v /Users/shinokada/DataScience:/home/jovyan/work shinokada/jupyter-notebook</span></pre><p id="f7a9" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">打开另一个终端标签:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="ffdf" class="lf lg iu lb b gz lh li l lj lk">$ docker ps<br/>$ docker exec -it &lt;container-id&gt; /bin/bash<br/>(base) jovyan@a56262d7eabc:~$ pip list<br/>...<br/>matplotlib<br/>...<br/>numpy<br/>...<br/>pandas</span></pre><p id="88dd" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">我们使用<code class="fe nn no np lb b">docker exec</code>进入一个正在运行的容器，并列出Python包，看看我们的包是否已安装。</p><h1 id="999d" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">将图像发布到Docker Hub</h1><p id="698a" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated">在<a class="ae kz" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> hub.docker </a>注册，然后在您的终端:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="0266" class="lf lg iu lb b gz lh li l lj lk">$ docker login<br/>Username: your username<br/>Password: your password<br/>...<br/>$ docker push shinokada/jupyter-notebook</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ny"><img src="../Images/94d4c88820d9274915392ff4f95cfce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*SnY7g4dSD0MmzgWLmf4CnQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">我在码头中心的回购。作者图片</p></figure><p id="a7ae" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><strong class="mj iv">更多docker命令</strong></p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="8a18" class="lf lg iu lb b gz lh li l lj lk"># Show the history of image<br/>docker history &lt;image-id&gt;<br/># Display system-wide information<br/>docker info | more</span></pre><h1 id="556f" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">结论</h1><p id="3069" class="pw-post-body-paragraph mg mh iu mj b mk ng jv mm mn nh jy mp nd ni ms mt ne nj mw mx nf nk na nb nc in bi translated"><code class="fe nn no np lb b"><a class="ae kz" href="https://hub.docker.com/r/jupyter/scipy-notebook" rel="noopener ugc nofollow" target="_blank">jupyter/scipy-notebook</a></code>是一个Jupyter笔记本科学Python堆栈，它包含了科学Python生态系统中的流行包。如果你想尝试深度学习，那么<code class="fe nn no np lb b"><a class="ae kz" href="https://hub.docker.com/r/jupyter/tensorflow-notebook" rel="noopener ugc nofollow" target="_blank">jupyter/tensorfolow-notebook</a></code>适合你。它包括流行的Python深度学习库。你可以在<a class="ae kz" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html" rel="noopener ugc nofollow" target="_blank">这些</a> <a class="ae kz" href="https://hub.docker.com/search?q=jupyter&amp;type=image" rel="noopener ugc nofollow" target="_blank">链接</a>找到更多图片。</p><p id="f1f7" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated">你不仅可以把docker用于Jupyter笔记本，也可以用于你的一般开发。Docker Hub上有许多存储库。尝试找到你可以信任的官方网站，或者创建你自己的网站，然后推送至Docker Hub。您将不再需要在您的系统上更新Python包。</p></div><div class="ab cl nz oa hy ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="in io ip iq ir"><p id="f038" class="pw-post-body-paragraph mg mh iu mj b mk ml jv mm mn mo jy mp nd mr ms mt ne mv mw mx nf mz na nb nc in bi translated"><strong class="mj iv">通过</strong> <a class="ae kz" href="https://blog.codewithshin.com/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="mj iv">成为</strong> </a> <strong class="mj iv">会员，获得媒体上所有故事的访问权限。</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj og"><img src="../Images/0be3ee559fee844cb75615290e4a8b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*DjTM9iFtVc2wlcWcOms7VQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://blog.codewithshin.com/subscribe" rel="noopener ugc nofollow" target="_blank">请订阅。</a></p></figure></div></div>    
</body>
</html>