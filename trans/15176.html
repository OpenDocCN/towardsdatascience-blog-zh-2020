<html>
<head>
<title>Three Ways to Create Dockernized LaTeX Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建Dockernized LaTeX环境的三种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/three-ways-to-create-dockernized-latex-environment-2534163ee0c4?source=collection_archive---------6-----------------------#2020-10-19">https://towardsdatascience.com/three-ways-to-create-dockernized-latex-environment-2534163ee0c4?source=collection_archive---------6-----------------------#2020-10-19</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="20ef" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">LeTeX + Docker + VSCode远程容器入门</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/dbe6b6f8c65b7c1097f280161849ba7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJHXwbRmHHDV-QS8KvXcKQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">图片由来自<a class="ae kz" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5312500" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kz" href="https://pixabay.com/users/kellepics-4893063/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5312500" rel="noopener ugc nofollow" target="_blank">斯蒂芬·凯勒</a>拍摄</p></figure><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="b9be" class="lf lg iu lb b gz lh li l lj lk"><strong class="lb iv">Table of Contents</strong></span><span id="bf49" class="lf lg iu lb b gz ll li l lj lk"><a class="ae kz" href="#7f9b" rel="noopener ugc nofollow"><strong class="lb iv">Introduction</strong></a></span><span id="aafc" class="lf lg iu lb b gz ll li l lj lk">1. <a class="ae kz" href="#cdb9" rel="noopener ugc nofollow">Setup</a><br/>2. <a class="ae kz" href="#3fca" rel="noopener ugc nofollow">Method 1: tianon/latex</a><br/>3. <a class="ae kz" href="#7949" rel="noopener ugc nofollow">Method 2: Remote-Containers</a><br/>4. <a class="ae kz" href="#1707" rel="noopener ugc nofollow">Method 3: Creating your container</a><br/>5. <a class="ae kz" href="#2ca1" rel="noopener ugc nofollow">How to switch Remote containers</a><br/>6. <a class="ae kz" href="#9b9a" rel="noopener ugc nofollow">Opening a PDF</a></span><span id="fddd" class="lf lg iu lb b gz ll li l lj lk"><a class="ae kz" href="#95c4" rel="noopener ugc nofollow"><strong class="lb iv">Conclusion</strong></a></span></pre><h1 id="7f9b" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">介绍</h1><p id="4bec" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated">我们可以在任何环境下运行Docker应用程序，Linux、Windows或Mac。Docker为最常用的操作系统和应用程序提供了一组<a class="ae kz" href="https://hub.docker.com/search?q=&amp;type=image&amp;image_filter=official" rel="noopener ugc nofollow" target="_blank">官方</a>基础映像。Docker允许您完全控制您的环境，安装您需要的东西，从Dockerfile删除和安装。</p><p id="af5c" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">在本文中，我将向您展示如何在Docker和<a class="ae kz" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank"> VSCode远程容器扩展</a>上使用LaTeX的三种方式。第一部分使用<a class="ae kz" href="https://hub.docker.com/r/tianon/latex" rel="noopener ugc nofollow" target="_blank"> tianon/latex </a>图像，第二部分使用<a class="ae kz" href="https://hub.docker.com/r/qmcgaw/latexdevcontainer" rel="noopener ugc nofollow" target="_blank">qmc gaw/latexdevcontainer</a>Docker图像。最后，我们基于qmcgaw/latexdevcontainer Docker映像创建我们的映像。</p><h1 id="cdb9" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">设置</h1><p id="b2c2" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated">如果你愿意，你可以从你的电脑上删除LaTeX。</p><p id="7cc8" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">对我来说，我需要跑步:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="898f" class="lf lg iu lb b gz lh li l lj lk">$ brew uninstall mactex</span></pre><p id="aad8" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">请安装<a class="ae kz" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>和<a class="ae kz" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank"> VSCode的远程容器</a>和<a class="ae kz" href="https://marketplace.visualstudio.com/items?itemName=James-Yu.latex-workshop" rel="noopener ugc nofollow" target="_blank"> LaTeX-Workshop VSCode扩展</a>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ne"><img src="../Images/70c2775113c4d8cea2cf1b73fe68401e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*-WBbgZlcoi8c2gRRHuK_MA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">VSCode扩展Microsoft Remote —容器。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nf"><img src="../Images/aab574897836c0d69f0f8b9af7376c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W3f0Totc0U70xbIG72vTmg.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">VSCode扩展LaTeX研讨会。作者图片</p></figure></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu nn"><a rel="noopener follow" target="_blank" href="/how-to-auto-update-pdf-when-working-on-latex-ad9eeabdb7a1"><div class="no ab fp"><div class="np ab nq cl cj nr"><h2 class="bd iv gz z fq ns fs ft nt fv fx it bi translated">使用Latex时如何自动更新PDF</h2><div class="nu l"><h3 class="bd b gz z fq ns fs ft nt fv fx dk translated">使用latexmk和VSCode自动更新PDF的指南</h3></div><div class="nv l"><p class="bd b dl z fq ns fs ft nt fv fx dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kt nn"/></div></div></a></div></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><h1 id="3fca" class="lm lg iu bd ln lo oc lq lr ls od lu lv ka oe kb lx kd of ke lz kg og kh mb mc bi translated">方法1:天农/乳胶</h1><p id="9df5" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated">拉tianon/latex图像:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="fbcf" class="lf lg iu lb b gz lh li l lj lk">$ docker pull tianon/latex</span></pre><p id="fcfc" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">按SHIFT+CMD+P打开settings.json:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oh"><img src="../Images/5365f2ab8d3de57f7f2e81eb73bb6022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xzewrv5f2FBAfv2t1DkoTw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">VSCode SHIFT+CMD+P .图片作者。</p></figure><p id="a029" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">并添加以下内容:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c9ef" class="lf lg iu lb b gz lh li l lj lk">{<br/>    // ... YOUR OTHER SETTINGS ...</span><span id="c090" class="lf lg iu lb b gz ll li l lj lk">    // latex<br/>    "latex-workshop.docker.enabled": true,<br/>    "latex-workshop.latex.outDir": "./out",<br/>    "latex-workshop.synctex.afterBuild.enabled": true,<br/>    "latex-workshop.view.pdf.viewer": "tab",<br/>    "latex-workshop.docker.image.latex": "tianon/latex",<br/>    // End<br/>  }</span></pre><p id="d52a" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">创建一个tex文件，并输入以下内容:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="a3d2" class="lf lg iu lb b gz lh li l lj lk">\documentclass{article}<br/>\begin{document}</span><span id="af13" class="lf lg iu lb b gz ll li l lj lk">An Example for a very \tiny{tiny} \normalsize \LaTeX \ document.</span><span id="05ce" class="lf lg iu lb b gz ll li l lj lk">\end{document}</span></pre><p id="cd70" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">您可以通过单击构建图标或在Mac上使用OPTION+CMD+B来构建LaTeX文件。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/d8c14abd5948befadb1f2138988916af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ok0XaFxkTo7_HHzRXvCatQ.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">单击构建图标。图片作者。</p></figure><p id="78c7" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">此后，每当你保存一个文件，它会自动更新PDF。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj oi"><img src="../Images/fe4d2949936c392fc55db30540a3632b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xP2FXbmlhQ2Gi9PBDV5XCQ.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">保存时，文件将被更新。图片作者。</p></figure><p id="2dc1" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">现在你在Docker上运行LaTeX。</p><h1 id="7949" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">方法2:远程容器</h1><blockquote class="oj"><p id="149d" class="ok ol iu bd om on oo op oq or os my dk translated">Visual Studio Code Remote-Containers扩展允许您使用一个<a class="ae kz" href="https://docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker容器</a>作为全功能开发环境。它允许您打开容器内(或装入容器中)的任何文件夹，并利用Visual Studio代码的完整功能集。项目中的一个<a class="ae kz" href="https://code.visualstudio.com/docs/remote/containers#_create-a-devcontainerjson-file" rel="noopener ugc nofollow" target="_blank"> devcontainer.json文件</a>告诉VS代码如何使用定义良好的工具和运行时堆栈来访问(或创建)开发容器。—来自<a class="ae kz" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank">在容器内展开</a></p></blockquote><p id="dc38" class="pw-post-body-paragraph md me iu mf b mg ot jv mi mj ou jy ml mm ov mo mp mq ow ms mt mu ox mw mx my in bi translated">在您的目录中，创建<code class="fe oy oz pa lb b"><a class="ae kz" href="https://github.com/qdm12/latexdevcontainer/blob/master/.devcontainer/devcontainer.json" rel="noopener ugc nofollow" target="_blank">.devcontainer/devcontainer.json</a></code> <a class="ae kz" href="https://github.com/qdm12/latexdevcontainer/blob/master/.devcontainer/devcontainer.json" rel="noopener ugc nofollow" target="_blank">并添加以下内容:</a></p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="6fb3" class="lf lg iu lb b gz lh li l lj lk">{<br/>    "name": "project-dev",<br/>    "dockerComposeFile": ["docker-compose.yml"],<br/>    "service": "vscode",<br/>    "runServices": ["vscode"],<br/>    "shutdownAction": "stopCompose",<br/>    "workspaceFolder": "/workspace",<br/>    "postCreateCommand": "",<br/>    "extensions": [<br/>        "james-yu.latex-workshop",<br/>        // Git<br/>        "eamodio.gitlens",<br/>        // Other helpers<br/>        "shardulm94.trailing-spaces",<br/>        "stkb.rewrap", // rewrap comments after n characters on one line<br/>        // Other<br/>        "vscode-icons-team.vscode-icons",<br/>    ],<br/>    "settings": {<br/>        // General settings<br/>        "files.eol": "\n",<br/>        // Latex settings<br/>        "latex-workshop.chktex.enabled": true,<br/>        "latex-workshop.latex.clean.subfolder.enabled": true,<br/>        "latex-workshop.latex.autoClean.run": "onBuilt",<br/>        "editor.formatOnSave": true,<br/>        "files.associations": {<br/>            "*.tex": "latex"<br/>        },<br/>        "latex-workshop.latexindent.args": [<br/>            "-c",<br/>            "%DIR%/",<br/>            "%TMPFILE%",<br/>            "-y=\"defaultIndent: '%INDENT%',onlyOneBackUp: 1\"",<br/>        ]<br/>    }<br/>}</span></pre><p id="965d" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">在设置中，我们允许用ChkTeX列出LaTeX，递归地删除子文件夹中的LaTeX辅助文件，并在构建时删除LaTeX辅助文件。</p><p id="81c5" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">如果你愿意，你可以在vs code &gt; Preferences &gt; Settings &gt; Extensions &gt; LaTeX中看到更多设置。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pb"><img src="../Images/3eadcc07227964747f65240d511efb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*oTKXiTlTvE6nbTQz0DDaKw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">LaTeX的VSCode设置。作者图片</p></figure><p id="8f52" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">创建<code class="fe oy oz pa lb b"><a class="ae kz" href="https://github.com/qdm12/latexdevcontainer/blob/master/.devcontainer/docker-compose.yml" rel="noopener ugc nofollow" target="_blank">.devcontainer/docker-compose.yml</a></code> <a class="ae kz" href="https://github.com/qdm12/latexdevcontainer/blob/master/.devcontainer/docker-compose.yml" rel="noopener ugc nofollow" target="_blank">并添加以下内容:</a></p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="3380" class="lf lg iu lb b gz lh li l lj lk">version: "3.7"</span><span id="cab2" class="lf lg iu lb b gz ll li l lj lk">services:<br/>  vscode:<br/>    image: qmcgaw/latexdevcontainer<br/>    volumes:<br/>      - ../:/workspace<br/>      - ~/.ssh:/home/vscode/.ssh:ro<br/>      - ~/.ssh:/root/.ssh:ro<br/>      - /var/run/docker.sock:/var/run/docker.sock<br/>    environment:<br/>      - TZ=<br/>    cap_add:<br/>      - SYS_PTRACE<br/>    security_opt:<br/>      - seccomp:unconfined<br/>    entrypoint: zsh -c "while sleep 1000; do :; done"</span></pre><p id="a48c" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">我们用<code class="fe oy oz pa lb b">qmcgaw/latexdevcontainer</code>作为<code class="fe oy oz pa lb b">image</code>。它使用<a class="ae kz" href="https://www.tug.org/texlive/acquire-netinstall.html" rel="noopener ugc nofollow" target="_blank"> texlive 2020 </a>基本方案和<a class="ae kz" href="https://mg.readthedocs.io/latexmk.html" rel="noopener ugc nofollow" target="_blank"> latexmk </a>将LaTeX编译成PDF。它使用<a class="ae kz" href="https://github.com/cmhughes/latexindent.pl" rel="noopener ugc nofollow" target="_blank">LaTeX ident</a>在保存时格式化，并使用<a class="ae kz" href="https://www.nongnu.org/chktex" rel="noopener ugc nofollow" target="_blank"> chktex </a>用于LaTeX林挺。</p><p id="2818" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">您具有以下结构:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pc"><img src="../Images/14a0cd662893dfa095ffde7e6e0d3175.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*zKaQmA0jp7rjOjsZeYXMNA.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">目录结构。作者图片</p></figure><p id="fbde" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">点击左下方的绿色图标，或者在Visual Studio代码中打开命令调板(CMD/CTRL+SHIFT+P)，选择<code class="fe oy oz pa lb b">Remote-Containers: Open Folder in Container...</code>，选择你的项目。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pd"><img src="../Images/b77885ae0026f2baeecad3fb0c5d2c87.png" data-original-src="https://miro.medium.com/v2/resize:fit:378/format:webp/1*1guuKragpMGA3MtTo70FPQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">绿色远程容器图标。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pe"><img src="../Images/ea4f2ea048b80be59ff63aebaccc4b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5YTdrZhAvSyFUPbNPjAXNA.gif"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">选择远程-容器:打开容器中的文件夹…作者图像</p></figure><p id="5daa" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">它将提取Docker图像，在本例中为<code class="fe oy oz pa lb b">qmcgaw/latexdevcontainer</code>，并在后台运行一个容器。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pf"><img src="../Images/d8294e4c859adba06c53c2a4877e40d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eCQG8ixFwnVpdjNf-nBN0A.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">结果来自docker images，docker PS-a . images by Author</p></figure><p id="61c0" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">一旦完成，你会在VSCode的左下方看到“Dev Container”。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pg"><img src="../Images/c29d22d20f8239913a296b1b57738b9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*YPTBYr0Mf_XCm_DHw5tXqw.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">左下方显示开发容器。作者图片</p></figure><p id="e912" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">如果您需要安装LaTeX包，您可以在VSCode终端中使用<code class="fe oy oz pa lb b">tlmgr</code>:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="62f8" class="lf lg iu lb b gz lh li l lj lk">$/workspace tlmgr update --self<br/>$/workspace sudo apk add xz<br/>$/workspace tlmgr install lastpage<br/>$/workspace texhash</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ph"><img src="../Images/3ff3bb92ee8952f07212e980015ad9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsZ239u9vKiR2ltoSi_2GQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">容器中的终端命令。作者图片</p></figure><p id="b640" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">创建一个简单的tex文件:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="c09e" class="lf lg iu lb b gz lh li l lj lk">\documentclass{article} <br/>\usepackage{lastpage}<br/>\begin{document}<br/>An Example document.<br/>\[<br/> \frac{4}{12}<br/>\]<br/>\end{document}</span></pre><p id="3856" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">当你保存它时，它会创建一个PDF文件。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pi"><img src="../Images/ac40e56b6a1133580b2338dd873f7efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GX3Yb_HCCQereO7hMzUsaw.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">保存tex文件创建PDF文件。作者图片</p></figure><h1 id="1707" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">方法3:创建容器</h1><p id="b022" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated"><a class="ae kz" href="https://github.com/qdm12/latexdevcontainer" rel="noopener ugc nofollow" target="_blank">qmcgaw/latexdevcontainer</a>是创建docker文件并在映像中安装所有包的一个很好的起点。这里有一个例子。</p><p id="7c22" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">创建一个新目录，并在其中创建一个Dockerfile文件:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="fd7c" class="lf lg iu lb b gz lh li l lj lk">FROM qmcgaw/latexdevcontainer<br/>ARG USERNAME=vscode<br/>USER root<br/>RUN tlmgr update --self &amp;&amp; \<br/>    tlmgr install latexindent latexmk &amp;&amp; \<br/>    tlmgr install mathexam setspace adjustbox xkeyval collectbox enumitem lastpage &amp;&amp; \<br/>    texhash<br/>USER ${USERNAME}</span></pre><p id="4795" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">这将更新<code class="fe oy oz pa lb b">tlmgr</code>并安装我需要的所有软件包。我们可以使用<code class="fe oy oz pa lb b">tlmgr install ...</code>添加任何乳胶包。</p><p id="86e5" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">我们从这个Dockerfile文件构建一个图像。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="a68d" class="lf lg iu lb b gz lh li l lj lk">$ docker build -t shinokada/latexexam .</span></pre><p id="2349" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">我从Docker文件所在的目录运行这个命令。</p><p id="2121" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">让我们检查一下我们刚刚创建的图像。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="3d1a" class="lf lg iu lb b gz lh li l lj lk">$ docker images<br/>REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE<br/>shinokada/latexexam        latest              7035f718823c        32 seconds ago      401MB<br/>qmcgaw/latexdevcontainer   latest              85b911aaea3e        3 weeks ago         382MB</span></pre><p id="3db6" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">它比qmcgaw/latexdevcontainer多19 MB。</p><p id="56df" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">可以推送到Docker Hub，这样以后就可以用了，还可以分享给别人。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="2ff3" class="lf lg iu lb b gz lh li l lj lk">$ docker login<br/>...<br/>$ docker push shinokada/latexexam<br/>...</span></pre><p id="8d50" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">我们将更新<code class="fe oy oz pa lb b">.devcontainer/docker-compose.yml</code>文件，以便VSCode使用我们新的Docker映像。</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="8d6e" class="lf lg iu lb b gz lh li l lj lk">version: "3.7"</span><span id="6756" class="lf lg iu lb b gz ll li l lj lk">services:<br/>  vscode:<br/>    image: shinokada/latexexam<br/>    volumes:<br/>      - ../:/workspace<br/>      - ~/.ssh:/home/vscode/.ssh:ro<br/>      - ~/.ssh:/root/.ssh:ro<br/>      - /var/run/docker.sock:/var/run/docker.sock<br/>    environment:<br/>      - TZ=<br/>    cap_add:<br/>      - SYS_PTRACE<br/>    security_opt:<br/>      - seccomp:unconfined<br/>    entrypoint: zsh -c "while sleep 1000; do :; done"</span></pre><p id="eca5" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">唯一不同的是<code class="fe oy oz pa lb b">image: shinokada/latexexam</code>。</p><p id="8ace" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">来更新一下<code class="fe oy oz pa lb b">.devcontainer/devcontainer.json</code>。我们将输出PDF到<code class="fe oy oz pa lb b">/out</code>目录。我们使用和以前一样的文件，并添加一行:</p><pre class="kk kl km kn gu la lb lc ld aw le bi"><span id="3b2e" class="lf lg iu lb b gz lh li l lj lk">...<br/>"settings": {<br/>        // General settings<br/>        "files.eol": "\n",<br/>        // Latex settings<br/>        "latex-workshop.chktex.enabled": true,<br/>        "latex-workshop.latex.outDir": "./out",<br/>        ...</span></pre><p id="31a9" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">让我们创建一个名为<a class="ae kz" href="https://gist.github.com/shinokada/0ffa32ee5bd4f2261f39511619085e9e" rel="noopener ugc nofollow" target="_blank"> percent.tex </a>的样本tex文件。</p><p id="5478" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">您的目录结构如下:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pc"><img src="../Images/cbf4166874d9b901fc74b1c8490620c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*QYYUqdG1TdPooApd_rfK1w.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">目录结构。作者图片</p></figure><p id="9097" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">然后像之前一样选择“打开容器中的文件夹”。它将启动开发容器。</p><p id="4fd7" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">保存percent.tex文件，看到在<code class="fe oy oz pa lb b">out</code>目录下创建了一个PDF。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pj"><img src="../Images/f00ec59c994753b1db1c031daae6842d.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*JnmSAMa6xsDaHtqKSyNAug.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">目录外。作者图片</p></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pk"><img src="../Images/7f425ad286321782ae70e940e2daf9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQTrMnZs8k6HiBMVnUwrOA.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">创建的PDF。作者图片</p></figure><h1 id="2ca1" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">如何切换远程容器</h1><p id="7714" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated">当您更改<code class="fe oy oz pa lb b">.devcontainer</code>目录中的文件时，您需要重建一个容器。选择“远程-容器:重建容器”。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pl"><img src="../Images/60d58c35be0979e1c6ae30a3ad20b413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*R_cngW60oGLLjDwI8vJwUQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">当您切换到另一个容器时，使用Remote-Containers:重建容器。作者图片</p></figure><p id="ad21" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">如果上述方法不起作用，您可能需要先选择“远程容器:本地重新打开”，然后选择“远程容器:打开容器中的文件夹”。</p><h1 id="9b9a" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">打开PDF</h1><p id="26fd" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated">您可以在VSCode选项卡或web浏览器中查看tex文件。请注意，你需要从一个tex文件。如果您尝试从另一种类型的文件中打开它，它将不起作用。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj pm"><img src="../Images/cda8b124a1b9e79ec3791cb1efd1f646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*L62fdYtZBCoRvO-5NXs8Pg.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">乳胶工作坊查看乳胶PDF菜单。作者图片</p></figure><h1 id="95c4" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">结论</h1><p id="6c02" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx my in bi translated"><code class="fe oy oz pa lb b">qmcgaw/latexdevcontainer</code>的大小是382MB，比<code class="fe oy oz pa lb b">tianon/latex</code>小很多。您可以通过创建docker文件并使用<code class="fe oy oz pa lb b">FROM</code>指令指定您正在构建的父映像来定制您的映像。</p><p id="1484" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated">即使<code class="fe oy oz pa lb b">tianon/latex</code>的文件大小很大，但是使用它的好处是不需要安装包。它已经有了大部分的标准包。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pn"><img src="../Images/bb22c5528919921c7f1140125c89bbee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kH6BDS9_zpq0O6LWxdD9QQ.png"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">比较图像大小。作者图片</p></figure></div><div class="ab cl ng nh hy ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="in io ip iq ir"><p id="256d" class="pw-post-body-paragraph md me iu mf b mg mz jv mi mj na jy ml mm nb mo mp mq nc ms mt mu nd mw mx my in bi translated"><strong class="mf iv">通过</strong> <a class="ae kz" href="https://blog.codewithshin.com/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="mf iv">成为</strong> </a> <strong class="mf iv">会员，获得媒体上所有故事的访问权限。</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj po"><img src="../Images/0be3ee559fee844cb75615290e4a8b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*DjTM9iFtVc2wlcWcOms7VQ.png"/></div><p class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://blog.codewithshin.com/subscribe" rel="noopener ugc nofollow" target="_blank">https://blog.codewithshin.com/subscribe</a></p></figure><h1 id="715a" class="lm lg iu bd ln lo lp lq lr ls lt lu lv ka lw kb lx kd ly ke lz kg ma kh mb mc bi translated">参考</h1><ul class=""><li id="b3a9" class="pp pq iu mf b mg mh mj mk mm pr mq ps mu pt my pu pv pw px bi translated"><a class="ae kz" href="https://github.com/qdm12/latexdevcontainer" rel="noopener ugc nofollow" target="_blank">最新集装箱</a></li><li id="448b" class="pp pq iu mf b mg py mj pz mm qa mq qb mu qc my pu pv pw px bi translated"><a class="ae kz" href="https://dev.to/michidk/easy-docker-latex-setup-with-vscode-and-grammarly-4e53" rel="noopener ugc nofollow" target="_blank">带有vscode和语法的简易Docker LaTeX设置</a></li><li id="51a0" class="pp pq iu mf b mg py mj pz mm qa mq qb mu qc my pu pv pw px bi translated"><a class="ae kz" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank">在容器内显影</a></li></ul></div></div>    
</body>
</html>