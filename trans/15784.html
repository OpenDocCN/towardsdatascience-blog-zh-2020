<html>
<head>
<title>Clear Coding with Modules and Packages in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的模块和包进行清晰的编码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/clear-coding-with-overloading-in-python-24df853003d8?source=collection_archive---------29-----------------------#2020-10-30">https://towardsdatascience.com/clear-coding-with-overloading-in-python-24df853003d8?source=collection_archive---------29-----------------------#2020-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6738" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用通俗易懂的例子！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d956d209746746087cefd02b61f6430d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*slrX7oappx5gRx--"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">扎克·卡道夫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b1f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您的Python代码变大时，随着时间的推移，它很可能变得杂乱无章。随着代码的增长，将代码保存在同一个文件中会使代码难以维护。此时，Python <strong class="lb iu">模块</strong>和<strong class="lb iu">包</strong>帮助你通过使用文件和文件夹来组织和分组你的内容。</p><ul class=""><li id="3caa" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">模块</strong>是带有<strong class="lb iu">的文件。py" </strong>包含Python代码的扩展。它们有助于在同一个文件中组织相关的函数、类或任何代码块。</li><li id="ebb4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">将大型Python代码块分割成包含多达300–400行代码的<strong class="lb iu">模块</strong>被认为是最佳实践。</li><li id="cbf0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">包</strong>将相似的模块放在一个单独的目录中。它们是包含相关模块和一个<strong class="lb iu"> __init__的文件夹。py </strong>文件，用于可选的包级初始化。</li><li id="7078" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">根据您的Python应用程序，您可以考虑将您的模块分组到子包中，例如<strong class="lb iu"> doc、core、utils、data、examples、test。</strong></li></ul><p id="36af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们编写一个示例Python3代码来进一步理解模块和包:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="26ec" class="mo mp it mk b gy mq mr l ms mt"><strong class="mk iu">""" cvs_get_module.py<br/>This module displays the summary of the tabular data contained in a CSV file <br/>"""</strong></span><span id="41e7" class="mo mp it mk b gy mu mr l ms mt">import pandas as pd</span><span id="3e73" class="mo mp it mk b gy mu mr l ms mt">print("cvs_get_module is loaded")</span><span id="95b4" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">def</em> <strong class="mk iu">display_file_location(<em class="mv">path, file_name</em>)</strong>:<br/> print("File Location: {}".format(path+filename))</span><span id="06c5" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">class</em> <strong class="mk iu">CSVGetInfo:</strong><br/> <em class="mv">def</em> __init__(<em class="mv">self</em>, <em class="mv">path</em>, <em class="mv">file_name</em>):<br/>  self.path = path<br/>  self.file_name = file_name<br/> <br/> <em class="mv">def</em> <strong class="mk iu">display_summary(<em class="mv">self</em>):</strong><br/>  data = pd.read_csv(self.path + self.file_name)<br/>  print(self.file_name)<br/>  print(data.info())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/1bcfed4d3e40f9fef8e8ec0cd6db78a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hc8zT3SGIV4BHXrB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="63f0" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">导入模块</h1><p id="7d5c" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">为了在外部Python代码块中使用一个模块，我们需要将那个特定的模块导入到我们的代码结构中。为此，使用带有"<strong class="lb iu">import&lt;<em class="mv">module _ name</em>&gt;</strong>"语法的<strong class="lb iu"> import </strong>语句。这里的模块名是指不带<strong class="lb iu">的Python文件名。py" </strong>扩展名。一旦我们导入模块，我们使用点符号，<strong class="lb iu">.”，</strong>访问模块内部的元素。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="86c2" class="mo mp it mk b gy mq mr l ms mt"># <strong class="mk iu">ModulesExample.py<br/># Importing 'csv_get_module' and accessing its elements</strong></span><span id="5319" class="mo mp it mk b gy mu mr l ms mt">import <strong class="mk iu">csv_get_module</strong></span><span id="483d" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">data_by_genres</strong> = <strong class="mk iu">csv_get_module.CSVGetInfo</strong>("/Users/erdemisbilen/<br/>Lessons/", "data_by_genres.csv")</span><span id="cdac" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">csv_get_module.display_file_location</strong>(data_by_genres.<strong class="mk iu">path</strong>, data_by_genres.<strong class="mk iu">file_name</strong>)</span><span id="45d2" class="mo mp it mk b gy mu mr l ms mt">data_by_genres.<strong class="mk iu">display_summary()</strong></span><span id="40b9" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">Output:<br/></strong>cvs_get_module is loaded<br/>File Location: /Users/erdemisbilen/Lessons/data_by_genres.csv<br/>data_by_genres.csv<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 2617 entries, 0 to 2616<br/>Data columns (total 14 columns):</span></pre><h1 id="5b12" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">通过重命名导入模块</h1><p id="2024" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">我们可以用<strong class="lb iu">‘导入&lt; <em class="mv">模块_名称</em> &gt;作为&lt; <em class="mv">替代_名称</em>&gt;’</strong>语法在导入的同时重命名模块。这可能有助于缩短长模块名。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="0706" class="mo mp it mk b gy mq mr l ms mt"># <strong class="mk iu">ModulesExample.py<br/># Importing 'csv_get_module' and accessing its elements</strong></span><span id="1900" class="mo mp it mk b gy mu mr l ms mt">import <strong class="mk iu">csv_get_module</strong> as <strong class="mk iu">cg</strong></span><span id="18a9" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">data_by_genres</strong> = <strong class="mk iu">cg.CSVGetInfo</strong>("/Users/erdemisbilen/Lessons/", "data_by_genres.csv")</span><span id="a6aa" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">cg.display_file_location</strong>(data_by_genres.path, data_by_genres.file_name)</span><span id="887b" class="mo mp it mk b gy mu mr l ms mt">data_by_genres.display_summary()</span><span id="a861" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">Output:<br/></strong>cvs_get_module is loaded<br/>File Location: /Users/erdemisbilen/Lessons/data_by_genres.csv<br/>data_by_genres.csv<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 2617 entries, 0 to 2616<br/>Data columns (total 14 columns):</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/519e8c934ae4cf096ff09f9ca68bdba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U6pmDQbCqVkX6IqI"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@alexblock?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历克斯·布洛克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="7c8d" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">从模块导入特定名称</h1><p id="d91c" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">我们可以导入模块的特定名称，而不是加载模块中包含的所有元素。此外，我们可以通过用逗号分隔名称来导入多个元素。</p><p id="15e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，这里我们不需要使用点符号，因为我们直接从&lt;<em class="mv">module _ name</em>&gt;import&lt;<em class="mv">element _ name</em>&gt;’语法中导入带有<strong class="lb iu">的名称。</strong></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="1876" class="mo mp it mk b gy mq mr l ms mt">from <strong class="mk iu">csv_get_module</strong> import <strong class="mk iu">display_file_location</strong> as <strong class="mk iu">dfl</strong></span><span id="cdf4" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">dfl</strong>("/User/Python/","ModulesExample.py")</span><span id="b6f1" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">Output:<br/></strong>File Location: /UserModulesExample.py</span></pre><h1 id="9f22" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">导入模块内的所有名称</h1><p id="303d" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">我们也可以使用星号(*)直接导入模块的所有名称，尽管这不是一个好的做法。如果导入多个包含同名元素的模块，这可能会导致名称冲突。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="cc34" class="mo mp it mk b gy mq mr l ms mt">from <strong class="mk iu">csv_get_module</strong> import <strong class="mk iu">*</strong></span></pre><h1 id="9af7" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">隐藏模块的元素</h1><p id="6771" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">如果我们想要隐藏模块的一些元素，我们可以用下划线<strong class="lb iu"> "_" </strong>开始命名元素。这种元素不能导入到外部文件中，因为这种命名约定使该元素成为模块本身的私有元素。</p><h1 id="da2d" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">区分独立脚本运行和模块加载</h1><p id="d1d0" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">包含Python代码的文件可以作为独立脚本运行，也可以作为模块加载到另一个代码结构中。</p><p id="0ef4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，考虑到这些用途，需要将Python文件中的代码分开。Python有内置的<strong class="lb iu"> __name__ </strong>属性，当文件作为模块加载时，该属性为我们提供了<strong class="lb iu">模块名称</strong>。当文件作为独立脚本运行时，这次它返回<strong class="lb iu"> __main__ </strong>字符串。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="b820" class="mo mp it mk b gy mq mr l ms mt"><strong class="mk iu">""" cvs_get_module.py<br/>This module displays the summary of the tabular data contained in a CSV file <br/>"""</strong></span><span id="7511" class="mo mp it mk b gy mu mr l ms mt">import pandas as pd</span><span id="0396" class="mo mp it mk b gy mu mr l ms mt">print("cvs_get_module is loaded")</span><span id="1440" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">def</em> <strong class="mk iu">display_file_location(<em class="mv">path, file_name</em>)</strong>:<br/> print("File Location: {}".format(path+filename))</span><span id="254f" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">class</em> <strong class="mk iu">CSVGetInfo:</strong><br/> <em class="mv">def</em> __init__(<em class="mv">self</em>, <em class="mv">path</em>, <em class="mv">file_name</em>):<br/>  self.path = path<br/>  self.file_name = file_name<br/> <br/> <em class="mv">def</em> <strong class="mk iu">display_summary(<em class="mv">self</em>):</strong><br/>  data = pd.read_csv(self.path + self.file_name)<br/>  print(self.file_name)<br/>  print(data.info())</span><span id="80cc" class="mo mp it mk b gy mu mr l ms mt">if <strong class="mk iu">__name__ == '__main__'</strong>:</span><span id="8501" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">data_by_genres</strong> = <strong class="mk iu">CSVGetInfo</strong>("/Users/erdemisbilen/Lessons/", "data_by_genres.csv")</span><span id="ab83" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">display_file_location</strong>(data_by_genres.path, data_by_genres.file_name)<br/>data_by_genres.display_summary()</span></pre><p id="4c97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有当脚本作为独立脚本运行时，上述if语句中的代码才会运行。</p><h1 id="f927" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">Python中的包</h1><p id="4914" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated"><strong class="lb iu">包</strong>将相似的模块放在一个单独的目录中。它们是包含相关模块和一个<strong class="lb iu"> __init__的文件夹。py </strong>文件，用于可选的包级初始化。</p><p id="0916" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> __init__。py </strong>在引用包内模块时执行一次。这个文件可以保留为空，或者可以选择实现包级初始化代码。</p><p id="379f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据您的Python应用程序，您可以考虑将您的模块分组到子包中，例如<strong class="lb iu"> doc、core、utils、data、examples、test。由于相似的模块保存在不同的文件夹中，这使得你的整体结构得到很好的组织和维护。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/967d24c8cfac674cbd4321832dc761e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H71AbVm7eYbIFMGh"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Lynn Kintziger 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="c752" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">从包中导入模块</h1><p id="5b66" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">我们可以使用包名(文件夹名)和点“.”来导入包内的模块接线员。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="01a8" class="mo mp it mk b gy mq mr l ms mt">from <strong class="mk iu">utils.csv_get_module</strong> import <strong class="mk iu">display_file_location</strong> as <strong class="mk iu">dfl</strong></span><span id="2042" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">dfl</strong>("/User/Python/","ModulesExample.py")</span><span id="fab9" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">Output:<br/></strong>File Location: /UserModulesExample.py</span></pre><h1 id="9f2b" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">关键要点</h1><ul class=""><li id="4b1a" class="lv lw it lb b lc no lf np li nv lm nw lq nx lu ma mb mc md bi translated">在Python中，组织大型代码块由<strong class="lb iu">模块</strong>和<strong class="lb iu">包管理。</strong></li><li id="8010" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">这简化了代码结构，增加了代码的可重用性，并简化了维护和测试工作。</li></ul><h1 id="f5f1" class="mx mp it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">结论</h1><p id="8f8b" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">在这篇文章中，我解释了Python中<strong class="lb iu">模块和包</strong>的基础知识。</p><p id="429c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章中的代码可以在我的GitHub库中找到。</p><p id="cda7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用。</p><p id="c31d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>