<html>
<head>
<title>Beginner’s guide to creating a powerful chatbot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建强大聊天机器人的初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beginners-guide-to-creating-a-powerful-chatbot-48fc6b073e55?source=collection_archive---------10-----------------------#2020-11-07">https://towardsdatascience.com/beginners-guide-to-creating-a-powerful-chatbot-48fc6b073e55?source=collection_archive---------10-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7fabea95a3afc0a330a1e26ed47d5914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FqgeT26baoexFMoX"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">安迪·凯利在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="c513" class="je jf jg bd b dl jh ji jj jk jl jm dk jn translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="f473" class="pw-subtitle-paragraph km jp jg bd b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dk translated">有没有想过使用聊天机器人来帮助回答客户的标准问题？</h2></div><p id="4922" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您是否面临着太多来自客户的标准要求和问题，并且难以应对？您是否正在寻找一种方法来扩大您的客户服务，而不会产生太多的成本？</p><p id="734d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在我之前的<a class="ae jd" rel="noopener" target="_blank" href="/report-is-too-long-to-read-use-nlp-to-create-a-summary-6f5f7801d355">故事</a>中，我分享了我如何通过创建一个个人文本摘要器来总结文档，从而解决数据过载的问题。</p><p id="fd17" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这个故事中，我将向您展示如何轻松创建一个强大的聊天机器人来处理您不断增长的客户请求和询问。我还将向您展示如何使用Flask将您的聊天机器人部署到web应用程序。</p><h1 id="46bc" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">首先，为什么聊天机器人在这种时候特别重要，它是什么</h1><p id="1156" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">新冠肺炎疫情重创了世界。由于封锁/移动控制，许多企业遭受了重大损失。为了度过这段艰难时期，许多人被迫将业务转移到网上。</p><p id="e834" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在线企业主面临的一个主要的、常见的问题是必须对来自客户的大量问题和请求做出回应。对于那些人力资源有限的人来说，不可能及时处理所有的请求。</p><p id="a7ff" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了解决这个问题，许多企业主转向使用聊天机器人为他们的客户服务。</p><p id="1375" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">什么是聊天机器人:</em> </strong>聊天机器人是由人工智能驱动的智能软件，能够与人类对话，并执行类似人类的任务。聊天机器人存在于许多智能设备(例如Siri (iOS)、谷歌助手(Android)、Cortana(微软)、Alexa(亚马逊))、网站和应用程序中。</p><p id="76d0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">为什么使用聊天机器人:</em> </strong>根据<a class="ae jd" href="https://www.hubspot.com/stories/chatbot-marketing-future" rel="noopener ugc nofollow" target="_blank"> HubSpot </a>进行的一项研究，71%的用户愿意使用快速响应的聊天应用程序来获得客户帮助，许多人这样做是因为他们希望他们的问题能够得到快速解决<strong class="lg jq">(当然也是高效的)</strong>。如果配置智能，聊天机器人确实可以通过允许人力资源专注于关键业务，同时保持相同水平的客户满意度，为企业释放巨大的价值。</p><h1 id="d876" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">如何创建聊天机器人？</h1><p id="9631" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">我将把它分成三个主要部分，但是您可以直接进入您感兴趣的部分:</p><p id="c87a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae jd" href="#c03d" rel="noopener ugc nofollow"> (a)使用Jupyter notebook构建聊天机器人</a></p><p id="a5c4" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae jd" href="#38b8" rel="noopener ugc nofollow"> (b)在终端运行聊天机器人</a></p><p id="9af7" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><a class="ae jd" href="#9bba" rel="noopener ugc nofollow"> (c)使用Flask将聊天机器人部署为网络应用</a></p><h1 id="c03d" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">(a)使用Jupyter notebook构建聊天机器人</h1><p id="766a" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">多亏了Python中的ChatterBot库，创建一个聊天机器人不再像过去那样是一项令人生畏的机器学习任务。</p><p id="e972" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，让我们把手弄脏…</p><p id="1a26" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> (1)安装聊天机器人库</strong></p><p id="8f83" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将从安装ChatterBot库开始。终端的安装命令如下:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="57b8" class="nh mb jg nd b gy ni nj l nk nl">pip install chatterbot</span></pre><p id="918f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">ChatterBot文本语料库(由大量结构化文本组成的语言资源)是在它自己的Python包中分发的，因此您需要单独安装它:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="7dab" class="nh mb jg nd b gy ni nj l nk nl">pip install chatterbot_corpus</span></pre><p id="63ad" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果您之前没有安装<strong class="lg jq"> spaCy </strong>(一个用于高级自然语言处理的开源库)，那么请现在安装它，因为ChatterBot库需要spaCy库才能工作:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="3a89" class="nh mb jg nd b gy ni nj l nk nl">pip install spacy</span></pre><p id="6651" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">安装完spaCy库后安装spaCy <strong class="lg jq">英文</strong> ('en') <strong class="lg jq"> </strong>型号:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="57db" class="nh mb jg nd b gy ni nj l nk nl">python -m spacy download en</span></pre><p id="7394" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> (2)创建聊天机器人实例</strong></p><p id="f7af" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在我们将整个聊天机器人打包成Python脚本之前，我们将使用<strong class="lg jq"> Jupyter Notebook </strong>开发我们的聊天机器人。让我们从导入我们需要的模块开始:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8be3" class="nh mb jg nd b gy ni nj l nk nl">from chatterbot import ChatBot</span></pre><p id="f043" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将创建一个聊天机器人实例，将我们的机器人命名为<strong class="lg jq"> Buddy </strong>，并将<strong class="lg jq"> read_only </strong>参数指定为<strong class="lg jq"> True </strong>，因为我们只想让我们的聊天机器人从我们的训练数据中学习。</p><p id="1fbb" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">通过创建一个聊天机器人实例，将为您创建一个名为<strong class="lg jq"> db.sqlite3 </strong>的聊天机器人数据库。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="307e" class="nh mb jg nd b gy ni nj l nk nl">bot = ChatBot('Buddy', read_only = True)</span></pre><p id="c42c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> (3)训练聊天机器人</strong></p><p id="7005" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">是时候训练我们的聊天机器人了……(<em class="mx">什么，就这样？是的——这不是开玩笑！)</em></p><p id="b0b0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这种训练仅仅意味着将对话输入聊天机器人数据库。请参见下面的示例:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/b1966168be0bed47e2ba94cc6b4c0422.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*SZrW22_-V3aWziCB_JeJ0Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">对话源(图片由作者提供)</p></figure><p id="9666" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦聊天机器人被输入“对话1”和“对话2”，聊天机器人就会以正确的顺序将这些对话存储在其“知识图”数据库中。</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/71b9b16166457ee79cc23e979e20c061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*dJdv-1lT7XxQeLVhd9W_3w.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">存储在数据库中的知识图表(图片由作者提供)</p></figure><p id="76db" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">之后，你可以用上面的任何一种说法开始对话。</p><p id="dae0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">例如，你可以用陈述6开始对话(“你接受什么付款方式？”)，聊天机器人将以声明7(“我们接受借记卡和主要信用卡”)进行响应。</p><p id="0a3c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">记住这个概念，让我们用“对话1”和“对话2”来训练我们的聊天机器人。</p><p id="a7d0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们通过导入<strong class="lg jq"> ListTrainer </strong>模块来实现，通过传递聊天机器人对象(<strong class="lg jq">好友</strong>)来实例化它，并调用<strong class="lg jq"> train() </strong>方法来传递句子列表。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="b886" class="nh mb jg nd b gy ni nj l nk nl">from chatterbot.trainers import ListTrainer<br/>trainer = ListTrainer(bot)</span><span id="21d5" class="nh mb jg nd b gy no nj l nk nl">trainer.train([<br/>    "Hi, can I help you",<br/>    "Who are you?",<br/>    "I am your virtual assistant. Ask me any questions...",<br/>    "Where do you operate?",<br/>    "We operate from Singapore",<br/>    "What payment methods do you accept?",<br/>    "We accept debit cards and major credit cards",<br/>    "I would like to speak to your customer service agent",<br/>    "please call +65 3333 3333. Our operating hours are from 9am to 5pm, Monday to Friday"<br/>    <br/>])</span><span id="d386" class="nh mb jg nd b gy no nj l nk nl">trainer.train([<br/>    "What payment methods do you offer?",<br/>    "We accept debit cards and major credit cards",<br/>    "How to contact customer service agent",<br/>    "please call +65 3333 3333. Our operating hours are from 9am to 5pm, Monday to Friday"<br/>    <br/>])</span></pre><p id="313b" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">聊天机器人测试</em> </strong></p><p id="8e10" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了检查我们是否已经将我们的对话正确地输入到我们的聊天机器人中，让我们用一个简单的输入语句“支付方式”来测试一下。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="f075" class="nh mb jg nd b gy ni nj l nk nl">response = bot.get_response ('payment method')<br/>print(response)</span></pre><p id="55eb" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">聊天机器人给我们的回复是:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/1229d566fa68aa829b3502b859a5f143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wevURd9k5MdAhmYshXVurA.png"/></div></div></figure><p id="a65e" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这种回应正是我们想要的。</p><p id="ac93" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将创建一个<strong class="lg jq"> while循环</strong>到<strong class="lg jq"> </strong>，使我们的聊天机器人能够连续响应我们的每个查询<strong class="lg jq">。</strong>当我们收到用户的‘拜拜’或‘拜拜’声明时，我们将结束循环并停止程序。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8c76" class="nh mb jg nd b gy ni nj l nk nl">name = input('Enter Your Name: ')</span><span id="d931" class="nh mb jg nd b gy no nj l nk nl">print ('Welcome to Chatbot Service! Let me know how can I help you')</span><span id="711b" class="nh mb jg nd b gy no nj l nk nl">while True:<br/>    <br/>    request = input(name+':')<br/>    <br/>    if request=="Bye" or request=='bye':<br/>        print('Bot: Bye')<br/>        break<br/>    else:<br/>        response=bot.get_response(request)<br/>        print('Bot: ', response)</span></pre><p id="d4c0" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们试一试…</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/e4d4fb52d1c13530eff83809829ac5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*4cloF8NlSCQ1fruguEKidw.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">Jupyter笔记本中的聊天机器人演示(GIF由作者提供)</p></figure><p id="a00a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">恭喜你！您刚刚创建了您的第一个工作聊天机器人！</p><p id="1e0d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">语料数据训练</em> </strong></p><p id="b832" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当然，你会希望你的聊天机器人能够在我们刚刚输入的对话之外进行更多的对话。)—这样的话，我们需要进一步训练我们的聊天机器人。</p><p id="e8c2" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">幸运的是，这个任务对我们来说已经简化了。通过使用包中可用的英语语料库数据，我们可以快速训练我们的聊天机器人以更“像人类”和更智能的方式与我们交流。</p><p id="6069" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">注:</em> </strong> <em class="mx">如果您在运行语料库训练时遇到问题，请将此</em><a class="ae jd" href="https://github.com/gunthercox/chatterbot-corpus/tree/master/chatterbot_corpus" rel="noopener ugc nofollow" target="_blank"><em class="mx">chatterbot _ corpus</em></a><em class="mx">文件夹复制到错误信息中指定的文件目录。</em></p><p id="1b53" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">只要运行下面的代码，你的聊天机器人就会被训练在以下范围内进行对话:<em class="mx"> AI、botprofile、计算机、对话、情感、食物、八卦、问候、健康、历史、幽默、文学、金钱、电影、政治、心理、科学、体育&amp;琐事。</em></p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="70ca" class="nh mb jg nd b gy ni nj l nk nl">from chatterbot.trainers import ChatterBotCorpusTrainer</span><span id="49ca" class="nh mb jg nd b gy no nj l nk nl">trainer = ChatterBotCorpusTrainer(bot)</span><span id="ee24" class="nh mb jg nd b gy no nj l nk nl">trainer.train('chatterbot.corpus.english')</span></pre><p id="3b21" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们测试一下我们的聊天机器人现在是否变得更聪明了…</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/0ef7ade9093a7e3cd60c4f6be84115a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*QtOtvp7LtpyHKa7jmGX1mg.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">语料库数据训练后的聊天机器人测试(GIF作者)</p></figure><p id="71cb" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">是啊！它变得更聪明了——它现在可以给你讲笑话了…</p><p id="f32a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">预处理输入</em> </strong></p><p id="69a5" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">ChatterBot附带了几个内置的预处理器，允许我们在让Bot的逻辑适配器处理语句之前清理输入语句。</p><p id="0d48" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">清理使得我们的输入语句更容易被聊天机器人阅读和分析。它从输入语句中删除了干扰文本分析的“干扰”——例如额外的空格、Unicode字符和转义的html字符。</p><p id="7f47" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，我们将在chatbot实例中包含预处理程序，并使用下面的代码重新运行chatbot实例。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8681" class="nh mb jg nd b gy ni nj l nk nl">bot = ChatBot('Buddy',<br/>             read_only = True,<br/>             preprocessors=['chatterbot.preprocessors.clean_whitespace',                            'chatterbot.preprocessors.unescape_html',                          'chatterbot.preprocessors.convert_to_ascii'])</span></pre><p id="43c6" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，重新运行聊天机器人，你可以看到我们对<strong class="lg jq">你是谁</strong>和<strong class="lg jq">你是谁</strong>得到了相同的回应。</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nr"><img src="../Images/0d925e5a94db3f9b40678132471cb12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jW8J4ksQDC8AcE-5xvdv1g.png"/></div></div></figure><p id="74fa" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">低信心应对</em> </strong></p><p id="18d9" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">除此之外，我们还可以配置我们的聊天机器人，如果用户不理解输入内容，它会给出默认响应:</p><p id="f90d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对不起，我不明白。我还在学习。请联系<a class="ae jd" href="mailto:abc@xxx.com" rel="noopener ugc nofollow" target="_blank"><em class="mx">abc@xxx.com</em></a><em class="mx">寻求进一步帮助</em></p><p id="74ae" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们将低置信度响应包含到我们的聊天机器人实例中，并重新运行聊天机器人实例。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="bdba" class="nh mb jg nd b gy ni nj l nk nl">bot = ChatBot('Buddy',<br/>             logic_adapters = [<br/>                 {<br/><strong class="nd jq">                     'import_path': 'chatterbot.logic.BestMatch',<br/>                     'default_response': 'I am sorry, I do not understand. I am still learning. Please contact </strong><a class="ae jd" href="mailto:abc@xxx.com" rel="noopener ugc nofollow" target="_blank"><strong class="nd jq">abc@xxx.com</strong></a><strong class="nd jq"> for further assistance.',<br/>                     'maximum_similarity_threshold': 0.90</strong><br/>                 }<br/>             ],<br/>             read_only = True,<br/>             preprocessors=['chatterbot.preprocessors.clean_whitespace',<br/>'chatterbot.preprocessors.unescape_html',<br/>'chatterbot.preprocessors.convert_to_ascii'])</span></pre><p id="cdee" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后，重新运行聊天机器人，让我们尝试从一个意外的输入中获得响应——当聊天机器人不理解一个语句时，它会用<strong class="lg jq"> default_response </strong>进行回复。</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ns"><img src="../Images/505e00c2d7b4f8a5795acf5e50d80447.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6KPSbHAW5obFn-as1ky5Q.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">聊天机器人响应意外输入(图片由作者提供)</p></figure><p id="2c8a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">恭喜你！您已经使用Jupyter notebook成功构建了一个聊天机器人。</p><p id="2f6c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq">这里是</strong> <a class="ae jd" href="https://github.com/louisteo9/Chatbot" rel="noopener ugc nofollow" target="_blank"> <strong class="lg jq">的链接，我的Github </strong> </a> <strong class="lg jq">为Jupyter笔记本上的这个。</strong></p><h1 id="38b8" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">(b)在终端运行聊天机器人</h1><p id="a31c" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">注:</em> </strong> <em class="mx">如果您直接来到本节(跳过了</em> <a class="ae jd" href="#c03d" rel="noopener ugc nofollow"> <em class="mx"> (a)使用Jupyter notebook </em> </a> <em class="mx">构建聊天机器人)，那么请确保您已经安装了该节中提到的所有必需的库和包，然后再继续在终端中运行聊天机器人。</em></p><p id="f317" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将使用上面的Jupyter笔记本编写脚本，运行上面的步骤，并根据用户指定的对话文件执行聊天机器人训练，然后查看我们的聊天机器人的运行情况...！</p><h2 id="bf72" class="nh mb jg bd mc nt nu dn mg nv nw dp mk ln nx ny mm lr nz oa mo lv ob oc mq jm bi translated"><strong class="ak">运行……的完整脚本和指令</strong></h2><p id="1db3" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">你可以在这里下载我的完整脚本<a class="ae jd" href="https://github.com/louisteo9/chatbot" rel="noopener ugc nofollow" target="_blank"/>，你可以马上用它来训练和运行你的聊天机器人！</p><ol class=""><li id="ca98" class="od oe jg lg b lh li lk ll ln of lr og lv oh lz oi oj ok ol bi translated">创建一个<strong class="lg jq"> training_data </strong>文件夹，将你想要训练的所有对话保存在文本文件中。chatbot_training.py脚本将读取<strong class="lg jq"> training_data </strong>文件夹中的所有文本文件。</li></ol><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/e810fa7c8d85a462155b54583f4b99af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GY41UJEaYarb4-deaAGB1g.png"/></div></div></figure><p id="8f13" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">文本文件中的对话应该每行输入一句话:</p><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/994243165f5cf361cb46f5ba8ea425be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*553l4O9Eh-h8s4PASJoMog.png"/></div></div></figure><p id="ebba" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">2.运行<strong class="lg jq">聊天机器人_培训. py </strong>。你将被要求选择是否要用英语语料库数据训练聊天机器人——选择<strong class="lg jq"> Y </strong>或<strong class="lg jq"> N </strong>。</p><p id="079a" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">选择<strong class="lg jq">Y</strong>——你的聊天机器人将被训练在以下范围内进行对话:<em class="mx"> AI、机器人简介、计算机、对话、情感、食物、八卦、问候、健康、历史、幽默、文学、金钱、电影、政治、心理学、科学、体育&amp;琐事。</em></p><figure class="my mz na nb gt is"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b1868ca9bceb8e77965468462bf38aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ZIfM_984nSYpPPAuOgab3A.gif"/></div></figure><p id="b093" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">3.然后，运行<strong class="lg jq">聊天机器人. py </strong>到<strong class="lg jq"> </strong>启动聊天机器人。输入一些对话，测试它是否正确响应。</p><figure class="my mz na nb gt is"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="my mz na nb gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/9f3ea0fc53e8a934ff6d19b6d3b57aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*p_jYSwWOtPhiqsHtAcTiWw.gif"/></div></div></figure><p id="4858" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">Tadaa…这就对了！您已经完成了聊天机器人训练，并在终端中运行它。</p><h1 id="9bba" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">(c)使用Flask将聊天机器人部署为网络应用程序</h1><p id="2e4d" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">注意:</em> </strong> <em class="mx">如果您直接进入本节(跳过了</em> <a class="ae jd" href="#c03d" rel="noopener ugc nofollow"> <em class="mx"> (a)使用Jupyter notebook </em> </a> <em class="mx">构建聊天机器人)，那么请确保您已经安装了该节中提到的所有必需的库和包，然后再继续使用Flask将聊天机器人部署到web应用程序。</em></p><p id="091e" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们将我们的聊天机器人部署到一个web应用程序，以便客户可以使用它。</p><p id="432c" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">要在web应用程序上运行我们的聊天机器人，我们需要为我们的应用程序找到一种接收输入数据和返回数据的方法。我们可以用任何我们想要的方式做到这一点——HTTP请求、web套接字等等。</p><p id="e3a9" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在<a class="ae jd" href="https://chatterbot.readthedocs.io/en/stable/faq.html" rel="noopener ugc nofollow" target="_blank">聊天机器人常见问题页面</a>上有一些现有的例子告诉我们如何做。我将向您展示如何使用Flask部署web应用程序。</p><p id="dbde" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">从<a class="ae jd" href="https://github.com/louisteo9/chatbot" rel="noopener ugc nofollow" target="_blank"> my Github </a>下载示例代码，编辑<strong class="lg jq">模板</strong>文件夹<strong class="lg jq"> </strong>中的<em class="mx">index.html</em>文件和<strong class="lg jq">静态</strong>文件夹中的<em class="mx"> style.css </em>文件。如果您只是想在web应用程序上测试聊天机器人，请让文件保持原样。</p><p id="b2b3" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">之后，让我们运行<strong class="lg jq"> web_app.py. </strong></p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/89db39398dd38cd05fb6da47b311deea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*zKNCGy9UyabXdgki2r0F1g.gif"/></div></figure><p id="36a1" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这将我们的聊天机器人部署到位于<a class="ae jd" href="http://127.0.0.1:5000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:5000/ </a>的本地服务器上</p><p id="ab1f" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">启动您的web浏览器，并转到上面的URL来启动您的聊天机器人。</p><figure class="my mz na nb gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/2c661b85d4d0854324c9a3ea353691ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*9VJTzudXcMHizFNuunHdtg.gif"/></div></figure><h1 id="d17e" class="ma mb jg bd mc md me mf mg mh mi mj mk kv ml kw mm ky mn kz mo lb mp lc mq mr bi translated">结论、改进建议…接下来是什么？</h1><p id="67f3" class="pw-post-body-paragraph le lf jg lg b lh ms kq lj lk mt kt lm ln mu lp lq lr mv lt lu lv mw lx ly lz ij bi translated">(再次)祝贺你！您已经成功构建了第一个业务聊天机器人，并使用Flask将其部署到web应用程序中。我希望，聊天机器人在回答你训练过的一些标准商业问题方面做得很好。</p><p id="687d" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">为了进一步提高聊天机器人的性能，你可以做的一件事就是编辑一份你的客户到目前为止发布的常见问题列表，提供常见问题的答案，然后在你的聊天机器人上训练他们。</p><p id="e736" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg jq"> <em class="mx">为什么有些聊天机器人不争气？一些聊天机器人失败了，仅仅是因为对企业提出的标准问题和要求没有得到充分的分析，结果聊天机器人没有得到所需的培训。训练和提高你的聊天机器人是一个持续的过程，就像人类学习新技能和知识一样。一旦学会了这些技能，它们就内置在聊天机器人中，聊天机器人不需要重新培训，除非你的业务增长。</em></strong></p><p id="e6ad" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，您可以考虑将您的聊天机器人部署到您选择的平台即服务(PaaS)上，它可以完全从云中托管和运行您的web应用程序。你可以考虑的一个流行的免费PaaS是<a class="ae jd" href="https://www.heroku.com" rel="noopener ugc nofollow" target="_blank"> Heroku </a>。</p></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><p id="c5a8" class="pw-post-body-paragraph le lf jg lg b lh li kq lj lk ll kt lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">谢谢你读了这个故事！关注我的<a class="ae jd" href="https://louisteo9.medium.com/" rel="noopener"> medium </a>了解更多关于如何使用DIY机器学习来发展业务的技巧。</p></div></div>    
</body>
</html>