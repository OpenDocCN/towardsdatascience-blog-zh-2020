<html>
<head>
<title>Analysing WhatsApp Group Messages using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python分析WhatsApp群组消息</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysing-whatsapp-group-messages-using-python-a17306d3ccad?source=collection_archive---------8-----------------------#2020-10-27">https://towardsdatascience.com/analysing-whatsapp-group-messages-using-python-a17306d3ccad?source=collection_archive---------8-----------------------#2020-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="da8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谁发的信息最多？最常用的词是什么？最常用的表情符号有哪些？人们什么时候最常发信息？如果你曾经想知道你和你的朋友们在WhatsApp上的这些事情，那么这篇文章就是给你的。用一些(相对)简单的Python来了解一下吧！</p><p id="df6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我相对来说是Python的新手，但是这个项目给了我一个很好的Python数据争论入门，因为我必须在这里使用许多不同的技术，并试图探索最好的一种。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a104e5cc983ec446c3e96bc66d6099bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FAwWb5kIjAvj6kno"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="b89d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">获取数据</h1><p id="2b2f" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">比我想象的更简单，我从来没有意识到你可以在WhatsApp上得到这个。在你的手机上，进入WhatsApp群组，点击右上角的点点点。然后进入“更多”和“导出聊天”。然后，您可以选择保存该文件的位置。我选择了Google Drive，并把它放在我将要创建Jupyter笔记本的地方。</p><h2 id="828a" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">设置</h2><p id="9d01" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">只是对我的设置做一点小小的评论。我用了一个Jupyter笔记本来进行这种分析，这种分析是在小部件中完成的，我认为它可以很好地执行每个单元。这里有几个技巧和一些在Jupyter中有用的特殊函数。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="3387" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我已经在评论中解释了它们的作用，但是为了解释为什么:Jupyter限制了每个单元格显示的输出数量。因此，如果您想在一个单元格中输出一些数据的图形以及一个支持表，那么您需要运行第一个命令。后两个我用来控制输出多少。我不喜欢它默认如此少的行数/列数，尤其是当您可以使用像。head()取而代之，所以我没有限制。但是在查看数据的时候一定要小心，当你需要的时候你会限制它。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="35ea" class="lc ld iq bd le lf na lh li lj nb ll lm ln nc lp lq lr nd lt lu lv ne lx ly lz bi translated">争论数据</h1><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="cfec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在这里做了一些笔记。我喜欢有两组数据，留下一组作为原始数据，可以与争论的数据集进行比较，因此有了<em class="nf"> raw_data_csv </em>和<em class="nf"> data </em>。</p><p id="fc57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不幸的是，WhatsApp的这种数据导出并不完美，当一条消息包含多行/换行符时，很难将其归因于正确的消息细节。我尝试了一些方法，但是找不到任何简单的方法。为了这个分析的目的，我已经把它们去掉了，因为没有它们我们仍然可以得到足够好的洞察力。这就是日期时间列上的dropna正在做的事情。</p><p id="aa23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">text_message的第二个缺点是去掉了一些系统消息，比如当人们被添加到组中时。</p><p id="361d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实际上，我在Jupyter的不同单元格中运行了这些部分，并在每个点运行head、tail和info，以了解每个点的数据情况。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="60a9" class="lc ld iq bd le lf na lh li lj nb ll lm ln nc lp lq lr nd lt lu lv ne lx ly lz bi translated">分析数据</h1><h2 id="4894" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">一些WhatsApp群上下文</h2><p id="e645" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">所以接下来的几个部分的一些背景，我用的WhatsApp群是我的(场)曲棍球队，所以主要谈论训练，比赛和我们度过的夜晚。但是你很快就会看到这个！</p><h2 id="4911" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">最受欢迎的消息时间</h2><p id="9c63" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我认为热图可以最好地显示一天中的小时和一周中的天。这是我最感兴趣的，因为其他事情是显而易见的，比如曲棍球赛季开始的月份。因此，我的构建方法是为这两个数据点创建新列，然后用这些维度的分组计数创建一个新的数据框。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/866efcee4a5172a74c59191e9fdb4623.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*RDUz6iXe8rIZxNHFCDZ8vQ.png"/></div><p class="kx ky gj gh gi kz la bd b be z dk translated">作者图片</p></figure><p id="a655" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你能猜出我们在哪个晚上训练吗？周一和周三晚上，是的。这将是消息说，人们是在，外出，或迟到的会议。我们的比赛显然是在周六，这是我们大部分信息的来源，将主要谈论前往比赛，然后是赛后的滑稽动作。</p><h2 id="7d95" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">按发件人排列的邮件</h2><p id="a355" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">接下来是发件人邮件数，我选择用条形图显示，如下所示:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/49519e7ec7e52cd12c95959b82b02421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ZJTEfeQY4fgMGD7VILtDg.png"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">作者图片</p></figure><p id="0f09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显示为条形图可以让您直观地看到数字的差异，而不仅仅是一个数字表。亚历克斯是队长，所以他会发送很多管理信息，而我是社交安全专员，当他们显然不想出去的时候，我会试图组织一群人出去做些有趣的事情。甚至我也很惊讶亚历克斯和我比其他人多发了多少信息，但我们经常得不到任何回应，所以这很有意义。</p><h2 id="fb62" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">最流行的词</h2><p id="a26b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">现在谈谈流行词，这确实需要相当多的操作和运行时间。希望这些评论能解释大部分正在发生的事情。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="0cd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最难的部分，也可能是最大的警告是如何定义<em class="nf">非_词</em>，最终我只是使用了那些我在分析中根本不关心的词，但我可能在这里可以走得更远，因此我们作为一个整体有一些非常无趣的顶级词:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/56bc62677f88401fdb54128e03d71e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/format:webp/1*5W3gqIGg6sAuSaF0uV_q0w.png"/></div><p class="kx ky gj gh gi kz la bd b be z dk translated">作者图片</p></figure><p id="f046" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我想可能更有趣的是挑选单词，看看它们的排名有多高，就像这样:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/fe7f22579afef7ed9f600bd4b6a80d40.png" data-original-src="https://miro.medium.com/v2/resize:fit:302/format:webp/1*9VGiLryHKJUxVGnWVVvNKA.png"/></div><p class="kx ky gj gh gi kz la bd b be z dk translated">健身搭售啤酒是一个有趣的“巧合”…作者图片</p></figure><p id="b76b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我认为另一件有趣的事情是发件人的字数统计。不幸的是，我们没有大量的信息/文字，所以除了Alex S和我之外，对任何人进行细分实际上只能提供很少的数据，但不管怎样，我们还是要这样做:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><div class="km kn ko kp gt ab cb"><figure class="nk kq nl nm nn no np paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><img src="../Images/f7c8d2ef7d890accff9945a635093d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*W8ZapsHO98bO3Kb1ZHIfKw.png"/></div></figure><figure class="nk kq nq nm nn no np paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><img src="../Images/20dd4fd597aae5482376588be4563889.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*-FlXGUKy4B2M8qjOOaYq7w.png"/></div></figure><figure class="nk kq nr nm nn no np paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><img src="../Images/93974e7c05ccf537717144c9acc861c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*rSS6vEOVcYnc7FT5Nm_5Bw.png"/></div><p class="kx ky gj gh gi kz la bd b be z dk ns di nt nu translated">作者图片</p></figure></div><h2 id="edd4" class="mf ld iq bd le mg mh dn li mi mj dp lm jy mk ml lq kc mm mn lu kg mo mp ly mq bi translated">最流行的表情符号</h2><p id="5de1" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我想补充的最后一点是表情符号的使用。现在我们并不是表情符号用户中最疯狂的，所以也没有太多的数据，也很难定义/细分表情符号到底是什么，所以这里有一些奇怪的表情符号，我认为它们对应着与表情符号相关的性别和肤色，但我们开始了:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mr ms l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2ac08087391b9b0683d026b268a77e76.png" data-original-src="https://miro.medium.com/v2/resize:fit:162/format:webp/1*f6R11NpggFldwQHhFqMCRg.png"/></div><p class="kx ky gj gh gi kz la bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="e0b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，那就结束了。对于这个数据集，我想不出更多可以分析的东西，但我很想听到一些建议。此外，如果任何人对代码有任何建议，请告诉我，因为我对Python还很陌生，所以我觉得肯定有更好的方法来完成某些部分。</p><p id="b6f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">享受吧。</p></div></div>    
</body>
</html>