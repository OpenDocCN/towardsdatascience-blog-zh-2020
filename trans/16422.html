<html>
<head>
<title>Is Family Group That Bad? Results Will Shock You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">家庭团体有那么糟糕吗？结果会让你震惊</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/is-family-group-that-bad-results-will-shock-you-573f64e194be?source=collection_archive---------27-----------------------#2020-11-12">https://towardsdatascience.com/is-family-group-that-bad-results-will-shock-you-573f64e194be?source=collection_archive---------27-----------------------#2020-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="3bde" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">文本处理、Plotly图形和Heroku部署</h2><div class=""/><div class=""><h2 id="b543" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">分析WhatsApp群聊&amp;构建网络应用</h2></div><p id="cce3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">谁不知道WhatsApp？它是广泛使用的移动应用程序，与设备操作系统无关。我们都使用这个应用程序在旅途中快速完成工作。我不知道其他国家的情况，但是在印度，<strong class="kq ja">家庭团体因为在团体中分享垃圾/虚假信息而受到很多批评。这也意味着产生了大量数据，WhatsApp给出了导出这些数据的选项！在本文中，我将向您展示如何挖掘这些数据，以<strong class="kq ja">发现隐藏的事实</strong>，并最终制作一个<strong class="kq ja">可部署的web应用</strong>。</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/45f09f26c39fe336e7a0a0e69f4e570a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xlVC77P9asjHNfsJ"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">照片由<a class="ae ma" href="https://unsplash.com/@_giri_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AARN·GIRI</a>在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="810e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在继续之前，让我们看看如何从组中导出这些数据:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mb"><img src="../Images/081bff3340199f9966f9bf6fce1985f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9HcVTB7sIgjNwZnMuFlAVw.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">作者提供的图片(在Google Drawings中创建)</p></figure><h1 id="d225" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">数据预处理</h1><p id="d610" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">文本文件包含消息的时间戳、作者和消息。如果数据被转换成一个<strong class="kq ja"> pandas数据帧</strong>，那么数据处理和操作就很容易，在这里，我们将把这个文本信息转换成这个。该文件中的单个条目如下所示:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="7407" class="ne md iq na b gy nf ng l nh ni">21/04/20, 5:47 pm - Author Name: Message sent</span></pre><p id="5af4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对于每一行，一个简单的正则表达式可以从该条目中提取日期和时间，在该日期拆分该行，分号将给出相同的作者和消息，但这里有几个问题:</p><ol class=""><li id="4bcb" class="nj nk iq kq b kr ks ku kv kx nl lb nm lf nn lj no np nq nr bi translated">多行消息没有新的时间戳，因此需要将继续的消息<strong class="kq ja">添加到主线程</strong>中。</li><li id="f229" class="nj nk iq kq b kr ns ku nt kx nu lb nv lf nw lj no np nq nr bi translated">有一些WhatsApp的默认消息，如:“消息是端到端加密的”或“XYZ将你添加到组中”，这些消息可能有也可能没有时间戳，而且它们都不是多行的。这些可以打破我们的逻辑。此外，它们与我们的分析<strong class="kq ja">无关</strong>，可以跳过<strong class="kq ja"/>。</li></ol><p id="aeaa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">考虑到这些情况，数据帧提取的代码可以引用如下:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="nx ny l"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">将文本文件转换为熊猫数据框的抽象代码</p></figure><p id="d20a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我在这里没有包括整个实现，但是如果你想知道的话，你可以去我的GitHub库:</p><div class="nz oa gp gr ob oc"><a href="https://github.com/kaustubhgupta/WhatsApp-Groups-Analyser" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ja gy z fp oh fr fs oi fu fw iz bi translated">kaustubhgupta/WhatsApp-群组-分析器</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">这个Web应用程序给出了关于WhatsApp群聊的详细报告。解散GitHub是超过5000万人的家园…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq lu oc"/></div></div></a></div><p id="41ea" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">除了将它转换成一个数据框，我也有兴趣知道关于群组中共享的表情符号的信息。这可以通过使用名为emoji的库来实现。对于每条消息，我们将检查它是否包含表情符号，然后为它们的计数创建一个单独的列。出于演示目的，我将分析我的家庭组。让我们看看新数据集是什么样子的:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="6124" class="ne md iq na b gy nf ng l nh ni">df.tail(10)</span></pre><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi or"><img src="../Images/4e2c84cbd743f5842e68963ea822c0a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHgcrC86mclV_VEHBVp2xA.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">作者图片</p></figure><p id="5f77" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是数据帧的尾部，您可以看到大约有9k行的<strong class="kq ja">。日期列具有日期-时间数据类型，以便于操作，正如前面提到的，数据是在没有媒体的情况下提取的，包含媒体的消息被WhatsApp赋予了“媒体省略”的标签。现在我们的数据集已经准备好了，是时候回答一些问题了。</strong></p><h1 id="1c27" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">家庭群只有媒体聊天吗？</h1><p id="a0d1" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">所有包含消息的媒体都被重命名为忽略的消息，这使得对这些消息进行分组、计数并除以消息总数以获得媒体消息的百分比变得容易。代码实现将是:</p><pre class="ll lm ln lo gt mz na nb nc aw nd bi"><span id="eab2" class="ne md iq na b gy nf ng l nh ni">((df[df['Message'] == ' &lt;Media omitted&gt; '].Message.count()) / (df.Message.count()))*100</span></pre><p id="96cb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我在我的<strong class="kq ja">家庭组</strong>数据集上运行这个命令时，它返回了<strong class="kq ja"> 53.6% </strong>这意味着100条消息中有53条是照片、视频或任何GIF。令人惊讶的是，当我在我的<strong class="kq ja">学院组</strong>数据集上运行相同的命令时，它返回了一个<strong class="kq ja"> 3% </strong>的结果！这意味着我们可以说，在某种程度上，这些小组有更多的媒体，但这种说法是很有争议的，因为我的大学小组有更少的媒体，但其他小组可能有更多的媒体。</p><h1 id="fcab" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">家庭群体只使用一种表情符号吗？</h1><p id="8bba" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">表情符号是每个人都喜欢的东西。有时，人们只是在交谈时交换表情符号，以传达他们的情绪，减少交谈。探索表情符号在群体中的分布会很有趣。在继续之前，这里有一件事需要考虑。我的母语是印地语，当我从信息中提取表情符号时，一些语言字符被归类为表情符号。让我们来看看这个群体最常用的10个表情符号:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi os"><img src="../Images/3acc8c6f62f3a05aedb5a6f19b7b5e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*baT8WP7Ed5zLaz84FzdXkw.png"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">(家庭组分布)按作者分类的图像</p></figure><p id="bff9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是一个甜甜圈图，通过观察它，我可以说这个组有很多变化！合十礼表情符号(🙏)占使用表情符号总数的<strong class="kq ja"> 32% </strong>。总共使用了<strong class="kq ja"> 20055 </strong>个<strong class="kq ja">19】表情符号，其中<strong class="kq ja"> 498个</strong>是独一无二的。如果我们看学院组分布，(😂)表情符号领衔排行榜:</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/6aa0dbea0c7e0acafb815aa2519a0ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*ZOVKGxdzLVI0IcbNp-XJGQ.png"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">(学院组分布)按作者分类的图像</p></figure><p id="2849" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">让我们探索更多的统计数据来理解这些组的性质。</p><h1 id="9fc9" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">活跃和懒惰的成员</h1><p id="3f4e" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">我们有该小组成立以来每天的数据。因此，我们可以<strong class="kq ja">分析该组成员</strong>在任何时期的活动。这里我们将考虑从第一天开始的整体活动。为此，我们将按作者对数据进行分组，应用count作为聚合，并将它们绘制成条形图。另一种方法是使用value count函数直接获得每个作者的数量。无论您选择哪种方法，您都可以绘制数据，下面是一个例子:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ou"><img src="../Images/cf326cdc4bff80db0c4c47129ffc9a0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIk_SldRP4AyYEItf8MS0w.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">作者图片</p></figure><p id="7c17" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果你仔细观察，你会发现这个活跃的成员发送了<strong class="kq ja"> 50%的群组信息！</strong>你可以通过将最少的计数作为决定因素，为懒惰的成员绘制相同的图:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ov"><img src="../Images/3588fb3641a4d343fbff278b9d094574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a2Co5_i8ff3kJGM0U2g-QA.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">作者图片</p></figure><p id="f02f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我在我的大学小组中运行相同的命令时，结果几乎是相同的，但我预计这里会有一个凸起。(因为在手机清理过程中，我丢失了很多数据，现在我只有有限的数据对应的组)</p><h1 id="b8b2" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">夜猫子还是早起的鸟儿？</h1><p id="6aea" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">这个问题很简单，哪个成员早上更活跃，哪个成员晚上更活跃。一个家庭团体通常有所有的亲戚和老年人，因为他们通常醒得早，很明显，在家庭团体的情况下，早上会有更多的活动，而在大学团体的情况下，晚上会有更多的活动。在我的分析中，我发现家庭小组的集体活动在上午8点到9点之间，而大学小组的集体活动在上午11点到下午1点之间。大学集体远足是因为这是我们讨论是否应该去实验室的黄金时间！</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ow"><img src="../Images/90c62c4fde1cf9d8c7c0658217683390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gP7uu6NE2g-Z-cEY1oQzg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">家庭小组活动(图片由作者提供)</p></figure><p id="9b74" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在看看其他小组活动:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ox"><img src="../Images/37da3814e0586a122f1d2ab4aacd20de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RD5l7E7phtkSqoO9_cFryg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">大学小组活动(图片由作者提供)</p></figure><h1 id="7d46" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">节假日的组状态</h1><p id="e6eb" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">我进一步分析了在重要节日的集体活动。这里我将考虑印度的国定假日。有一种强烈的观点认为，在假期，家庭团体充满了来自不明来源的信息，在某种程度上这是真的。虽然大学小组在这些天很少或没有活动，但家庭小组在这些天有很大的图表。选择的日期是共和国日、独立日、圣诞节和其他一些节日。我无法捕捉到排灯节或胡里节等更著名的节日的模式，因为这些节日没有任何固定的日期，它们的日期每年都在变化。以下是生成的一些图表:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi oy"><img src="../Images/7d14d9bf896366cc77a35671bcc111be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jn0cNbxqJm-pIGMIPFMDhw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">作者图片</p></figure><h1 id="8c6e" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">把所有的放在一起</h1><p id="4598" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">分析部分已经结束，现在是时候把所有的东西放在一起，形成一个结构化的格式。为了使这种分析对每个用户都是可访问的，在那里他们可以获得他们自己上传的数据的报告，我必须构建一个web应用程序来服务于这个目的。我将整个分析代码分为3个阶段或模块。一个模块帮助处理、清理和创建数据框。一个模块生成我在这里展示的所有统计数据(只有原始数据)，另一个模块生成要在web上呈现的交互式图形。我用Heroku部署了这个应用程序，它是用flask framework构建的，jinja模板帮助将这个后端连接到web前端。这款网络应用名为<a class="ae ma" href="https://whatsapp-analyzing.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> Whatsapp-Analyzing </a>。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi oz"><img src="../Images/bae22fd4f18ac4e7a3b84f13d006394d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wIpJmIT4v-Retkr3h1BMcg.gif"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">演示如何使用这个网络应用程序</p></figure><h1 id="73c3" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">结论</h1><p id="b435" class="pw-post-body-paragraph ko kp iq kq b kr mu ka kt ku mv kd kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">在本文中，我们介绍了如何访问WhatsApp数据、处理信息、回答一些流行的问题，以及最终在could平台上部署应用程序。根据对数据的理解程度，可以发现很多东西。我没有给出图片中显示的Plotly图形的代码实现，因为这会使文章变得混乱。所有代码都可以在我的<a class="ae ma" href="https://github.com/kaustubhgupta/WhatsApp-Groups-Analyser/" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中找到。</p><p id="49ed" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这篇文章提出的问题“家庭团体有那么糟糕吗？”毫无根据。每个群体都有几乎相同的趋势，但是的，有一些因素，其中一个胜过其他人，但不能一概而论。让我知道你的想法，你可以在medium上关注我，以获得更多有见地的故事的通知。说完了，再见！</p><p id="10ee" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您可以通过以下方式与我联系:</p><div class="nz oa gp gr ob oc"><a href="https://www.linkedin.com/in/kaustubh-gupta-612767ab/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ja gy z fp oh fr fs oi fu fw iz bi translated">Kaustubh Gupta -机器学习作家- upGrad | LinkedIn</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">嗨，我是一名Python开发人员，能够进行Web抓取、Selenium自动化、数据科学、后端Web开发…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.linkedin.com</p></div></div><div class="ol l"><div class="pa l on oo op ol oq lu oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://github.com/kaustubhgupta" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ja gy z fp oh fr fs oi fu fw iz bi translated">kaustubhgupta -概述</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">技术爱好者|程序员| Python |数据科学|深度学习| Flask l Django l开源贡献者…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="pb l on oo op ol oq lu oc"/></div></div></a></div></div></div>    
</body>
</html>