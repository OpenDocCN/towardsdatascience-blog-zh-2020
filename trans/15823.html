<html>
<head>
<title>Starbucks Offer Dataset — Udacity Capstone</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">星巴克优惠数据集——uda city顶点</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/starbucks-offer-dataset-udacity-capstone-7b562843ff47?source=collection_archive---------15-----------------------#2020-10-31">https://towardsdatascience.com/starbucks-offer-dataset-udacity-capstone-7b562843ff47?source=collection_archive---------15-----------------------#2020-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="978c" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="4158" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">对“浪费要约”的调查</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d90a7743e2715b43c1be9c59178c6977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TNSdIwu-IWOpb-xh"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@kfred?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡尔·弗雷德里克森</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="7f1f" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">介绍</h2><p id="ee52" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">Starbucks Offer Dataset是学生可以从中选择的数据集之一，以完成他们的Udacity数据科学纳米学位的顶点项目。该数据集包含模拟数据，模拟顾客收到星巴克报价后的行为。这些数据是通过星巴克奖励移动应用程序收集的，优惠每隔几天就会发送给移动应用程序的用户。</p><p id="48dd" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">数据文件包含3个不同的JSON文件。</p><pre class="kp kq kr ks gt my mz na nb aw nc bi"><span id="7271" class="lf lg iq mz b gy nd ne l nf ng">*File descriptions provided by Udacity*</span><span id="0068" class="lf lg iq mz b gy nh ne l nf ng">portfolio.json — containing offer ids and meta data about each offer (duration, type, etc.)</span><span id="10e8" class="lf lg iq mz b gy nh ne l nf ng">profile.json — demographic data for each customer</span><span id="1334" class="lf lg iq mz b gy nh ne l nf ng">transcript.json — records for transactions, offers received, offers viewed, and offers completed</span></pre><p id="f992" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">有3种不同类型的优惠:买一送一(BOGO)，折扣，和信息意味着纯粹的广告。然而，对于每种类型的优惠，优惠期限、困难或促销渠道可能会有所不同。该数据集包含大约300，000+个模拟事务。</p><p id="552a" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">这个项目的目标不是由Udacity定义的。因此，它是开放式的。尽管如此，从为星巴克提供商业价值的角度来看，问题总是要么:我们如何增加销售额，要么我们如何省钱。如何省钱的问题不是不花钱，而是不把钱花在无效的事情上。</p><p id="34a5" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">从这两个角度来看，都有很多值得探索的东西。Udacity给出的一个警告引起了我的注意。它警告我们，一些优惠在用户不知情的情况下被使用，因为用户不会加入这些优惠；报价已经给出。因此，如果一些用户不管有没有优惠都会在星巴克消费，我们还不如保存这些优惠。</p><p id="381b" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我觉得这是个有趣的问题。我决定对此进行调查。我想看看我是否能找出这些用户是谁，我们是否能避免或尽量减少这种情况的发生。在下面的文章中，我将介绍我是如何研究这个问题的。我将遵循CRISP-DM流程。如果你不熟悉这个概念。这是我写给你的一篇文章。</p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/2-crucial-things-that-data-science-online-courses-didnt-teach-you-2da0ae3267bd"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ja gy z fp nq fr fs nr fu fw iz bi translated">数据科学在线课程没有教给你的两件重要事情</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">如果你的数据科学在线课程大纲看起来像…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ky nl"/></div></div></a></div></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h2 id="22bd" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">业务理解和数据理解</h2><p id="69a4" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">我们先来看看数据。从数据集来看，很明显，我们需要组合所有三个数据集，以便执行任何分析。此外，数据集需要大量清理，主要是因为我们有许多分类变量。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="b1de" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">下面是我希望在分析结束时解决的五个业务问题。前三个问题是为了对数据集有一个全面的了解。最后两个问题直接解决了我想调查的关键业务问题。</p><ul class=""><li id="aed9" class="oj ok iq mc b md mt mg mu lo ol ls om lw on ms oo op oq or bi translated">Q1:哪个是最受欢迎的提议？</li><li id="53f7" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">Q2:不同的人群对报价有不同的反应吗？</li><li id="0496" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">问题3:人们通常会查看并使用优惠吗？还是他们在没有注意到的情况下使用了报价？</li><li id="baef" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">Q4:如果存在这样一个群体，那么哪一类人更有可能在没有查看报价的情况下使用报价或进行购买？</li><li id="b938" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">Q5:如果有，哪种类型的优惠更有可能在不被查看的情况下被使用？</li></ul><p id="fb8b" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">在我摆弄了一下数据之后，我还决定在这个分析中只关注BOGO和折扣优惠，主要有两个原因。一是因为我相信BOGO和折扣优惠与信息性优惠/广告有着不同的商业逻辑。对于BOGO和折扣优惠，我们希望找出不知情的人，这样我们就不会白花钱。对于这个广告，我们想确定哪一组人被鼓励花更多的钱。换句话说，一个逻辑是确定损失，而另一个是衡量增长。</p><p id="5acf" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">另一个原因和第一个原因联系在一起，就是关于范围的问题。由于不同的业务逻辑，我想把这个分析的范围限制在只回答这个问题:谁是“浪费”我们的产品的用户，我们如何避免它。因此，我没有分析信息提供类型。</p><h2 id="aa39" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">成功指标及其合理性</h2><p id="3ecd" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">重复一遍，我想要解决的商业问题是调查用户在没有观看我们的产品的情况下使用它的现象。换句话说，优惠没有起到刺激消费的作用，因此被浪费了。因此，关键的成功标准是我是否能识别出这群用户以及这种行为背后的原因。此外，如果我可以建立一个机器学习模型来预测这种情况何时可能发生，这将是有帮助的。在这种情况下，该公司将处于一个更好的位置，不会浪费这个机会。</p><p id="ed16" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">明确地说，关键的成功标准是我是否对上面列出的所有问题都有明确的答案。因为能够回答这些问题意味着我可以清楚地识别出有这种行为的用户群，并对原因进行一些教育猜测。</p><p id="06b0" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">对于机器学习模型，我重点以交叉验证准确率和混淆矩阵作为评价。准确性分数很重要，因为我的模型的目的是帮助公司预测何时要约可能会被浪费。所以精度越高越好。</p><p id="dbc8" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">当然，当数据集高度不平衡时，准确度分数不会是实际准确度的良好指标，精确度分数、f1分数或混淆矩阵会更好。然而，在这种情况下，不平衡的数据集不是一个大问题。两个虚拟模型，其中一个使用随机猜测的方法，另一个使用全部选择多数的方法，一个具有51%的准确度分数，另一个具有57%的准确度分数。这表明数据集不是高度不平衡的。</p><p id="fec0" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我选择混淆矩阵作为第二个评估矩阵，与交叉验证准确性一样重要。原因是与假阳性和假阴性相关的商业成本可能不同。因此，了解模型更容易出现哪种类型的错误将是有益的。有些人喜欢f1的分数。然而，我发现f1的分数有点难以理解。因此，我坚持使用混淆矩阵。为了更好地处理第一类和第二类错误，这里是我之前写的另一篇文章，有更多的细节。</p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/programming-journal-4-why-do-we-have-to-talk-about-type-1-error-and-type-2-error-41b3ae68bb96"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ja gy z fp nq fr fs nr fu fw iz bi translated">为什么一定要说1型错误和2型错误？</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">从模型评估到商业决策…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="ox l nw nx ny nu nz ky nl"/></div></div></a></div><h2 id="15a7" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">数据准备</h2><p id="9621" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">在数据准备阶段，我主要做了两件事。一个是合并3个数据集。另一个是将所有的分类变量转换成数字表示。</p><p id="092b" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">合并3个数据集的一个困难是抄本数据集中的'<em class="oy">值'</em>'列包含报价id和美元金额。此外，该列是一个字典对象。下面是我如何使用'<em class="oy"> offer_id '来分隔列，以便数据集可以与投资组合数据集相结合。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d5f3" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">当把分类变量转换成数值变量时。有两个更复杂的列，一个是“<em class="oy">年”</em>列，另一个是<em class="oy">“通道”</em>列。<em class="oy">‘year’</em>列很棘手，因为数字表示的顺序很重要。举个例子，如果我用:0–2017，1–2018，2–2015，3–2016，4–2013。这违背了我们的直觉。然而，对于其他变量，如“性别”和“事件”，数字的顺序并不重要。因此，我为分类变量编写了一个不需要考虑顺序的函数。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="5004" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated"><em class="oy">‘channel’</em>列比较棘手，因为每个单元格都是一个对象列表。有两种方法可以解决这个问题。一种方法是将每个通道转换成列索引，并用1/0表示该行是否使用了该通道。然而，我使用了另一种方法。我意识到有4种不同的频道组合。我想知道不同的组合对每个优惠有什么不同的影响。所以，我想把物品清单当做1个东西。我是这样处理的。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="00bb" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">EDA和结果:</h2><p id="6ff8" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">Q1:哪个是最受欢迎的提议？</p><div class="kp kq kr ks gt ab cb"><figure class="oz kt pa pb pc pd pe paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><img src="../Images/5207eb960f8be4edf008df999d132404.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*CmNsbONFxttpb5R4EAhjhQ.png"/></div></figure><figure class="oz kt pf pb pc pd pe paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><img src="../Images/1d250220054b65008090bea5648d8f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*UrcCR7w3-kEG8SYodgUKgw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk pg di ph pi translated">左边绝对数字，右边百分比|作者图片</p></figure></div><p id="50da" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">回答:折扣优惠更受欢迎，因为它不仅在绝对值方面“报价完成”的数量略高，而且总体完成/接收率也更高(~7%)。然而，值得注意的是，BOGO优惠有更大的机会被顾客看到。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="9b85" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">Q2:不同的人群对报价有不同的反应吗？</p><p id="5b65" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">在两个图表中，红色的“否”表示未完成(查看或收到)，绿色的“是”表示“报价完成”。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">对于BOGO的提议</p></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">对于折扣优惠</p></figure><p id="0583" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">回答:对于这两种提议，男性完成的几率都要低得多。越是忠诚的客户，加入5-6年的人使用这两种优惠的机会也越低。比较这两种优惠，女性稍微更多地使用BOGO，而男性更多地使用折扣。然而，仅仅从外观上看，这两个报价之间并没有太大/显著的区别。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="47a5" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">问题3:人们通常会查看并使用优惠吗？还是他们在没有注意到的情况下使用了报价？</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="f373" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">答:在实验时间的前5天中，<em class="oy">“要约已完成”</em>的峰值略早于<em class="oy">“要约已查看”</em>。随着时间的推移，它们同步得更好，这表明大多数人有意识地使用了这个提议。随着时间的推移，“已完成报价”和“已查看报价”之间的差距也在缩小。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="17c1" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">Q4:如果存在这样一个群体，那么哪一类人更有可能在没有查看报价的情况下使用报价或进行购买？</p><p id="3e32" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我挑选了客户id，它的第一个要约事件是“offer received ”,随后是第二个事件“offer completed”。他们是跳过“已查看报价”的人。然后，我将他们的人口统计信息与其他人进行了比较。这是项目中最棘手的部分，因为我需要弄清楚如何提取对要约的第二个响应。我是这样做的。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="4e78" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">以下是我的分析结果:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="2251" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">答:正如您所看到的，没有显著的差异，这令人失望。这表明，所有客户都有可能在不看我们的产品的情况下使用我们的产品。那么，这可能与我们设计产品的方式更有关系吗？我们来看下一个问题。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="929d" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">Q5:如果有，哪种类型的优惠更有可能在不被查看的情况下被使用？</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="a2e2" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">如您所见，产品的设计的确与众不同。例如，蓝色部分，即报价以“1d7”结尾，明显大于正态分布(~17%)。以“2a4”结尾的报价也比正态分布高出4–5%。以下是关于这些优惠的信息，按照它们在没有被注意到的情况下被使用的次数排序。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="5d4c" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">回答:我们看到促销渠道和持续时间起着重要的作用。从这个分析中我们可以得出以下结论。</p><ul class=""><li id="7a70" class="oj ok iq mc b md mt mg mu lo ol ls om lw on ms oo op oq or bi translated">如果一份工作是通过网络和电子邮件推广的，那么它被发现的机会就大得多</li><li id="370f" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">在不查看的情况下用于链接到优惠的持续时间。持续时间越长</li><li id="0d87" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">与BOGO相比，折扣优惠类型也有更大的机会不用看就能使用。</li></ul><h2 id="60dd" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">建模和评估</h2><p id="c59c" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">我想调查的主要问题是，谁浪费了这些提议，这个问题已经被之前的数据工程和EDA解决了。建立机器学习模型的目的是预测一项提议被浪费的可能性。如果机会很大，我们可以计算商业成本并重新考虑决定。因此，该模型可以帮助最小化“浪费要约”的情况。</p><p id="3461" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">对于模型选择，我正在决定是使用决策树还是逻辑回归。我将范围缩小到这两个，因为在这种情况下，拥有预测的类别概率也是有用的。我们可以知道我们对一个特定的预测有多有信心。此外，我们可以设定，如果只有70%以上的机会，客户会浪费一个报价，我们将考虑撤回一个报价。对我来说，仅仅因为客户有51%的机会浪费它，就撤销一个报价是没有意义的。</p><p id="499b" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我最终选择了逻辑回归，因为它更稳健。决策树通常需要更多的调整，并且对不平衡数据集等问题更加敏感。我们的数据集与</p><pre class="kp kq kr ks gt my mz na nb aw nc bi"><span id="8570" class="lf lg iq mz b gy nd ne l nf ng">1- ‘wasted offers’: 31723<br/>0- ‘used offers’: 23499</span></pre><p id="c1ce" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">建模前的一个重要步骤是获得正确的标签。在这种情况下，标签“浪费”意味着客户要么根本没有使用该产品，要么使用后没有查看。以下是我如何创建这个标签。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="dfd6" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">然后我丢弃所有其他事件，只保留<em class="oy">‘浪费的’</em>标签。我将这个数据集与profile和portfolio数据集合并，以获得我需要的特性。最终，数据框看起来像这样:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pj oi l"/></div></figure><p id="32f7" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我使用GridSearchCV来调整逻辑回归模型中的<em class="oy">【C】</em>参数。我使用默认的<em class="oy">【L2】</em>作为<em class="oy">惩罚。</em>原因是我们在数据集中没有太多的特征。代码如下:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="a834" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">最佳模型实现了71%的交叉验证准确性，75%的精确度分数。对于混淆矩阵，假阳性的数量(~15%)多于假阴性的数量(~14%)，这意味着该模型更有可能在现实中不会被浪费的报价上出错。</p><p id="c0d9" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">为了改进模型，我对多数标签进行了下采样，并平衡了数据集。我使用下采样而不是上采样或smote等其他方法的原因是:1)即使在下采样后，我们也有足够的数据2)根据我的理解，不平衡数据集不是由于有偏差的数据收集过程，而是由于可用样本较少。在这种情况下，使用SMOTE或上采样会导致数据集过拟合的问题。更多细节，下面是我深入探讨这个问题时的另一篇文章。</p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/from-imbalanced-dataset-to-boosting-algorithms-1-2-798cd6384ecc"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ja gy z fp nq fr fs nr fu fw iz bi translated">从不平衡数据集到助推算法</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">不平衡数据集完整工具包</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">朝向数据科学</p></div></div><div class="nu l"><div class="pk l nw nx ny nu nz ky nl"/></div></div></a></div><p id="f55c" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">在平衡数据集后，最佳模型的交叉验证准确性增加到74%，精确度分数仍为75%。对于混淆矩阵，假阳性减少到11%，假阴性减少到15%。这意味着模型更有可能在现实中想要的报价上出错。通过调整更多的参数或尝试像XGboost这样的树模型，该模型有很大的潜力可以进一步改进。但是，由于个人时间和精力的限制，我就此打住了。</p><h2 id="7374" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">总结/概括</h2><p id="c3c1" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">总之，我已经向您介绍了我如何处理数据来合并3个数据集，以便我可以进行数据分析。我谈到了我如何使用EDA来回答我在文章开始时提出的业务问题。在这个过程中，您可以看到我需要如何进一步处理我的数据以适合我的分析。我还强调了处理数据最困难的地方，以及我是如何处理这个问题的。</p><p id="60e2" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">结果硕果累累。我成功地回答了我提出的所有商业问题。虽然，在调查之后，问这样一个问题似乎是错误的:谁是没有看我们的产品就使用了它的顾客？相反，问题应该是:为什么我们的报价没有被浏览就被使用了？原因是人口统计并不重要，但优惠的设计很重要。</p><p id="d36f" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">最后，我用逻辑回归建立了一个机器学习模型。我解释了为什么选择模型，如何准备模型处理的数据以及模型的结果。我使用了3种不同的指标来衡量模型、交叉验证准确性、精确度分数和混淆矩阵。在这篇文章的最后，我想对商业和潜在的未来研究提出一些建议。</p><h2 id="0590" class="lf lg iq bd lh li lj dn lk ll lm dp ln lo lp lq lr ls lt lu lv lw lx ly lz iw bi translated">最后建议和未来研究</h2><p id="0135" class="pw-post-body-paragraph ma mb iq mc b md me ka mf mg mh kd mi lo mj mk ml ls mm mn mo lw mp mq mr ms ij bi translated">为了避免或改善不经查看就使用报价的情况，我建议如下:</p><ul class=""><li id="a709" class="oj ok iq mc b md mt mg mu lo ol ls om lw on ms oo op oq or bi translated">通过至少3个渠道推广产品，增加曝光率</li><li id="7d74" class="oj ok iq mc b md os mg ot lo ou ls ov lw ow ms oo op oq or bi translated">排除持续10天的报价，最大值。7天。如果一个报价真的很难，20级，客户就不太可能为之努力。与此同时，那些实现这一目标的人很可能会实现这一数额的支出，而不管报价如何。</li></ul><p id="b16f" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">我的另一个建议是，我相信折扣优惠有很大的潜力。在那些浏览过报价的人中，完成率为78%。因此，如果公司能够提高折扣优惠的收视率，就有很大的机会刺激更多的支出。</p><p id="03e5" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated">对于以后的学习，还有很多可以做的。最显而易见的两件事是执行一项分析，合并来自信息提供的数据，并改进我当前模型的性能。观察顾客对信息提供的反应以及广告或信息提供是否也有助于BOGO和折扣的表现将是有趣的。将我的模型准确率提高到85%以上会很有帮助。</p><p id="933d" class="pw-post-body-paragraph ma mb iq mc b md mt ka mf mg mu kd mi lo mv mk ml ls mw mn mo lw mx mq mr ms ij bi translated"><em class="oy">我的全额回购可以在这里进入</em> <a class="ae le" href="https://github.com/wchen928/starbucks_capstone" rel="noopener ugc nofollow" target="_blank"> <em class="oy">。</em> </a></p></div></div>    
</body>
</html>