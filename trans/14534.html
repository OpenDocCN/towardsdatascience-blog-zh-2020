<html>
<head>
<title>Altair vs. Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Altair vs. Matplotlib</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/altair-vs-matplotlib-69ac4979d112?source=collection_archive---------19-----------------------#2020-10-07">https://towardsdatascience.com/altair-vs-matplotlib-69ac4979d112?source=collection_archive---------19-----------------------#2020-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f3a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python可视化库的比较</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/51421158f76901a02db995b2843a2b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgrOydKr3YdJcZjWXHK5lw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@claybanks" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="d838" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你刚刚开始学习Python，你可能听说过Matplotlib。Matplotlib是任何Python初学者的首选可视化库，但它是最好的吗？</p><p id="3dfb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将介绍和讨论Altair和Matplotlib的区别，它们擅长什么，谁应该使用它们？</p><p id="6035" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们来分析一下Matplotlib擅长什么。</p><p id="6695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将使用<a class="ae kv" href="https://datapane.com/" rel="noopener ugc nofollow" target="_blank">数据面板</a>来嵌入来自每个库的可视化，以便图形保留它们的特征。</p><h1 id="d6d3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Matplotlib</h1><p id="a514" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Matplotlib是一个详尽的可视化库，包含许多功能。它的概念是基于MATLAB的绘图API。使用过MATLAB的人会感觉更自在。这很可能是科学家将学习的第一个Python可视化库数据。</p><blockquote class="mp"><p id="b162" class="mq mr iq bd ms mt mu mv mw mx my lr dk translated">Matplotlib让简单的事情变得简单，让困难的事情变得可能。</p><p id="e7a6" class="mq mr iq bd ms mt mu mv mw mx my lr dk translated">— <a class="ae kv" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib文档</a></p></blockquote><p id="17d9" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">上图描述了Matplotlib图形的一般概念。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/34e3f0735eb7c2572ac3c8084edd9938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VgK31kEunVCqYghK.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://matplotlib.org/faq/usage_faq.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib文档</a>。</p></figure><h2 id="0841" class="nf lt iq bd lu ng nh dn ly ni nj dp mc lf nk nl me lj nm nn mg ln no np mi nq bi translated">赞成的意见</h2><ul class=""><li id="ae00" class="nr ns iq ky b kz mk lc ml lf nt lj nu ln nv lr nw nx ny nz bi translated"><strong class="ky ir">可定制</strong></li></ul><p id="2e43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于Matplotlib的底层接口特性，它可以绘制任何东西。如果你只是想要一个快速的实验，几行代码就可以绘制出你想要的任何数学函数。如果你想绘制复杂的观想，稍加修改，你就能做到！甚至支持3D可视化。</p><p id="230f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">先说一个简单的情节。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="a36b" class="nf lt iq ob b gy of og l oh oi">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="03e6" class="nf lt iq ob b gy oj og l oh oi">x = np.linspace(1, 100)<br/>y = 3 * x ** 2</span><span id="4ea3" class="nf lt iq ob b gy oj og l oh oi">fig = plt.figure()<br/>plt.plot(y)<br/>plt.title(r"$y = 3x^2$")</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="e52e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它甚至可以绘制以下文本:</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="96ca" class="nf lt iq ob b gy of og l oh oi"># <a class="ae kv" href="https://gist.github.com/khuyentran1401/d0e7397ecefcb8412a161817d1e23685#file-text-py" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/khuyentran1401/d0e7397ecefcb8412a161817d1e23685#file-text-py</a></span><span id="4772" class="nf lt iq ob b gy oj og l oh oi">fig = plt.figure()</span><span id="7e47" class="nf lt iq ob b gy oj og l oh oi">plt.text(0.6, 0.7, "learning", size=40, rotation=20.,<br/>         ha="center", va="center",<br/>         bbox=dict(boxstyle="round",<br/>                   ec=(1., 0.5, 0.5),<br/>                   fc=(1., 0.8, 0.8),<br/>                   )<br/>         )</span><span id="c64b" class="nf lt iq ob b gy oj og l oh oi">plt.text(0.55, 0.6, "machine", size=40, rotation=-25.,<br/>         ha="right", va="top",<br/>         bbox=dict(boxstyle="square",<br/>                   ec=(1., 0.5, 0.5),<br/>                   fc=(1., 0.8, 0.8),<br/>                   )<br/>         )</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><ul class=""><li id="6680" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated"><strong class="ky ir">动画</strong></li></ul><p id="fc1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Matplotlib还提供了一个实时动画包。它允许你绘制实时数据，如正弦波，甚至纳斯达克股票市场指数！</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="0e9f" class="nf lt iq ob b gy of og l oh oi">"""<br/>==================<br/>Animated line plot<br/>==================<br/>"""<br/># <a class="ae kv" href="https://matplotlib.org/3.1.1/gallery/animation/simple_anim.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/3.1.1/gallery/animation/simple_anim.html</a></span><span id="c357" class="nf lt iq ob b gy oj og l oh oi">import numpy as np<br/>import matplotlib.pyplot as plt<br/>import matplotlib.animation as animation</span><span id="4bb1" class="nf lt iq ob b gy oj og l oh oi">fig, ax = plt.subplots()</span><span id="c101" class="nf lt iq ob b gy oj og l oh oi">x = np.arange(0, 2*np.pi, 0.01)<br/>line, = ax.plot(x, np.sin(x))</span><span id="4245" class="nf lt iq ob b gy oj og l oh oi">def animate(i):<br/>    line.set_ydata(np.sin(x + i / 50))  # update the data.<br/>    return line,</span><span id="0dc9" class="nf lt iq ob b gy oj og l oh oi">ani = animation.FuncAnimation(<br/>    fig, animate, interval=20, blit=True, save_count=50)</span><span id="64cc" class="nf lt iq ob b gy oj og l oh oi"># To save the animation, use e.g.<br/>#<br/># ani.save("movie.mp4")<br/>#<br/># or<br/>#<br/># writer = animation.FFMpegWriter(<br/>#     fps=15, metadata=dict(artist='Me'), bitrate=1800)<br/># ani.save("movie.mp4", writer=writer)</span><span id="be38" class="nf lt iq ob b gy oj og l oh oi">plt.show()</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><h2 id="e4c8" class="nf lt iq bd lu ng nh dn ly ni nj dp mc lf nk nl me lj nm nn mg ln no np mi nq bi translated">骗局</h2><ul class=""><li id="6a9a" class="nr ns iq ky b kz mk lc ml lf nt lj nu ln nv lr nw nx ny nz bi translated"><strong class="ky ir">不灵活</strong></li></ul><p id="c6e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于其低级接口的性质，绘制简单的数据将是容易的。然而，当数据变得非常复杂时，诸如格式化之类的琐碎问题将需要更多的代码行。</p><p id="9b9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将使用本文中的GitHub数据集来演示:</p><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/i-scraped-more-than-1k-top-machine-learning-github-profiles-and-this-is-what-i-found-1ab4fb0c0474"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">我收集了超过1k的顶级机器学习Github配置文件，这就是我的发现</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">从Github上的顶级机器学习档案中获得见解</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg kp os"/></div></div></a></div><p id="eded" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下图显示了当数据变得庞大而复杂时，它看起来是多么杂乱无章。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="f367" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们来了解一下牛郎星。</p><h1 id="9918" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">阿尔泰尔</h1><p id="de3d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Altair采用了与Matplotlib完全不同的方法。这是一个声明性的统计可视化库，最初于2016年发布，基于<a class="ae kv" href="https://vega.github.io/vega/" rel="noopener ugc nofollow" target="_blank"> Vega </a>和<a class="ae kv" href="https://vega.github.io/vega/" rel="noopener ugc nofollow" target="_blank"> Vega-Lite </a>构建。它还使用Pandas Dataframe进行数据表达。他们心中有三种设计方法:</p><ul class=""><li id="c04e" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated">受约束的、简单的和声明性的，以允许关注数据而不是诸如格式化之类的琐碎问题。</li><li id="d554" class="nr ns iq ky b kz ph lc pi lf pj lj pk ln pl lr nw nx ny nz bi translated">发出遵循Vega和Vega-Lite规范的JSON输出</li><li id="6b3f" class="nr ns iq ky b kz ph lc pi lf pj lj pk ln pl lr nw nx ny nz bi translated">使用现有的可视化库呈现规格</li></ul><h2 id="a748" class="nf lt iq bd lu ng nh dn ly ni nj dp mc lf nk nl me lj nm nn mg ln no np mi nq bi translated">赞成的意见</h2><ul class=""><li id="aa86" class="nr ns iq ky b kz mk lc ml lf nt lj nu ln nv lr nw nx ny nz bi translated"><strong class="ky ir">直观且结构化</strong></li></ul><p id="b81c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Altair提供了一种非常直观和结构化的绘图方法。我将使用Matplotlib部分中的简单示例:</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="ddac" class="nf lt iq ob b gy of og l oh oi">import numpy as np<br/>import altair as alt</span><span id="fe7f" class="nf lt iq ob b gy oj og l oh oi">x = np.linspace(1, 100)<br/>y = 3 * x ** 2</span><span id="5493" class="nf lt iq ob b gy oj og l oh oi">df_alt = pd.DataFrame({'x': x, 'y': y})</span><span id="2225" class="nf lt iq ob b gy oj og l oh oi">alt.Chart(df_alt).mark_line().encode(<br/>    x='x',<br/>    y='y'<br/>)</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="0a72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以看到我们如何用Matplotlib做同样的事情，但是代码更少！</p><p id="f413" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">牛郎星的基本特征:</p><ul class=""><li id="932c" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated">马克斯（英格兰人姓氏）</li></ul><p id="0c2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">标记指定数据在图中的表示方式。例如，<code class="fe pm pn po ob b">mark_line()</code>将数据表示为线形图，<code class="fe pm pn po ob b">mark_point()</code>使其成为散点图，<code class="fe pm pn po ob b">mark_circle()</code>创建带有实心圆的散点图。</p><ul class=""><li id="b5f0" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated">编码</li></ul><p id="5ef9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码由<code class="fe pm pn po ob b">encode()</code>调用。它允许将数据映射到不同的通道，如x、y、颜色、形状等。例如，如果我的数据框架中有多列，我可以将x轴和y轴映射到不同的数据列。或者，如果我想用不同的颜色给我的图着色，我可以改变我的编码通道。</p><ul class=""><li id="9d24" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated"><strong class="ky ir">互动</strong></li></ul><p id="c60a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">《牛郎星》最独特的特点之一就是互动剧情。使用<code class="fe pm pn po ob b">interactive()</code>你可以让任何情节互动，允许你放大和缩小，突出情节的某些区域等等。当您有大量复杂的数据时，此功能特别有用。</p><ul class=""><li id="4abc" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated"><strong class="ky ir">灵活</strong></li></ul><p id="8a9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">凭借其声明性，Altair只需几行代码就可以绘制复杂的数据集！这使得数据科学家在数据可视化方面有更好的用户体验，而不必担心琐碎的绘图问题。</p><p id="21e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子展示了Altair的交互性和灵活性。直方图绘制了突出显示的区域。想组合多个剧情？使用<code class="fe pm pn po ob b">&amp;</code>符号即可！您已经可以看到构建这样复杂的东西所需的代码有多少了。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="699d" class="nf lt iq ob b gy of og l oh oi"># <a class="ae kv" href="https://altair-viz.github.io/gallery/selection_histogram.html" rel="noopener ugc nofollow" target="_blank">https://altair-viz.github.io/gallery/selection_histogram.html</a><br/>from vega_datasets import data</span><span id="28b4" class="nf lt iq ob b gy oj og l oh oi">source = data.cars()</span><span id="0e81" class="nf lt iq ob b gy oj og l oh oi">brush = alt.selection(type='interval')</span><span id="528d" class="nf lt iq ob b gy oj og l oh oi">points = alt.Chart(source).mark_point().encode(<br/>    x='Horsepower:Q',<br/>    y='Miles_per_Gallon:Q',<br/>    color=alt.condition(brush, 'Origin:N', alt.value('lightgray'))<br/>).add_selection(<br/>    brush<br/>)</span><span id="8aee" class="nf lt iq ob b gy oj og l oh oi">bars = alt.Chart(source).mark_bar().encode(<br/>    y='Origin:N',<br/>    color='Origin:N',<br/>    x='count(Origin):Q'<br/>).transform_filter(<br/>    brush<br/>)</span><span id="d2e6" class="nf lt iq ob b gy oj og l oh oi">plot = points &amp; bars<br/>plot</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ok ol l"/></div></figure><h2 id="2148" class="nf lt iq bd lu ng nh dn ly ni nj dp mc lf nk nl me lj nm nn mg ln no np mi nq bi translated">骗局</h2><ul class=""><li id="92e4" class="nr ns iq ky b kz mk lc ml lf nt lj nu ln nv lr nw nx ny nz bi translated"><strong class="ky ir">不可定制</strong></li></ul><p id="6970" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过Altair的声明式和高级绘图方法，它使绘制复杂的机器学习模型变得更加困难。在<a class="ae kv" href="https://altair-viz.github.io/user_guide/faq.html" rel="noopener ugc nofollow" target="_blank"> Altair文档</a>中，他们也不建议创建超过5000行的图，这会导致错误。</p><ul class=""><li id="30e6" class="nr ns iq ky b kz la lc ld lf om lj on ln oo lr nw nx ny nz bi translated"><strong class="ky ir">没有三维可视化</strong></li></ul><p id="2aa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">数据科学家通常需要在3D平面上进行可视化，以便更好地解释数据。它的例子包括降维技术，如主成分分析(PCA)，或word2vec等等。在这种情况下，我会默认使用Matplotlib或其他具有更好3D可视化支持的可视化库。</p><h1 id="f3ab" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="a31b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">就是这样！我希望你学到了一些关于Matplotlib和Altair的新知识。现在，你应该在你的项目中实践你所学到的东西。如果您热衷于学习更多关于数据可视化的知识，您应该探索其他库，如Seaborn、Plotly、Bokeh和Folium。</p><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/top-6-python-libraries-for-visualization-which-one-to-use-fe43381cd658"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd ir gy z fp ox fr fs oy fu fw ip bi translated">可视化的6大Python库:使用哪一个？</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">对使用哪种可视化工具感到困惑？我为你分析了每个图书馆的利弊</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pp l pd pe pf pb pg kp os"/></div></div></a></div><p id="b151" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面由Khuyen写的文章包括了6个不同可视化库的概要。</p><p id="b3aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，如果你想和我聊天，请在<a class="ae kv" href="https://www.linkedin.com/in/eugene-teoh/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我！</p></div></div>    
</body>
</html>