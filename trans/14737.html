<html>
<head>
<title>How to Translate PDF with Python (Google vs AWS Translate) — Part 1: extract and translate text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python翻译PDF(Google vs AWS Translate)——第1部分:提取和翻译文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-translate-pdf-with-python-google-vs-aws-translate-part-1-extract-and-translate-text-7946604a48f4?source=collection_archive---------13-----------------------#2020-10-11">https://towardsdatascience.com/how-to-translate-pdf-with-python-google-vs-aws-translate-part-1-extract-and-translate-text-7946604a48f4?source=collection_archive---------13-----------------------#2020-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="ad7e" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="5fb8" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">如何使用谷歌翻译API和AWS翻译API阅读和翻译PDF文件的逐步指南。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/8d97fc16894694123c20c44d559d0401.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Z77u96XtlVcOIMelq4FMbg.jpeg"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">由<a class="ae la" href="https://pixabay.com/users/tessakay-5116088/" rel="noopener ugc nofollow" target="_blank"> Tessakay </a>在<a class="ae la" href="https://pixabay.com/images/id-2317654/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="a275" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">我需要将一个包含英文文本的PDF文件翻译成拉脱维亚文。事实证明，这比我最初想象的稍微更具挑战性，所以我决定写一篇教程来分享我学到的东西，希望能为你节省一些时间。我把我的项目分成两部分。</p><p id="38d1" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">这篇文章是第一部分，重点是如何阅读你的PDF文件，提取文本，并翻译它。它着眼于两种翻译文本的方法——使用谷歌翻译和AWS翻译。</p><p id="59d0" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">第2部分将着眼于如何从获得的翻译创建、格式化和保存一个新的PDF文件。你可以在GitHub中找到我的项目的链接，并在本文末尾找到完整的代码。</p><h1 id="3418" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">这篇文章涵盖了什么？</h1><ul class=""><li id="467a" class="mp mq iq ld b le mr lh ms lk mt lo mu ls mv lw mw mx my mz bi translated">如何使用Python <code class="fe na nb nc nd b">PyPDF2</code>库读取PDF文件并从PDF中提取文本</li><li id="bb64" class="mp mq iq ld b le ne lh nf lk ng lo nh ls ni lw mw mx my mz bi translated">2种翻译文本的方法:python <code class="fe na nb nc nd b">googletrans</code>库和<code class="fe na nb nc nd b">AWS Translate.</code></li></ul><h2 id="bc5a" class="nj ly iq bd lz nk nl dn md nm nn dp mh lk no np mj lo nq nr ml ls ns nt mn iw bi translated">使用Python读取PDF文件</h2><p id="82e2" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">要以编程方式读取PDF文件，您可以使用各种第三方库，本文使用PyPDF2库。</p><p id="c166" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">PyPDF2可以使用pip软件包管理器安装:</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="1ddf" class="nj ly iq nd b gy ob oc l od oe">pip install PyPDF2</span></pre><p id="0ecf" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">要读取该文件，我们首先要以二进制读取模式打开该文件，并创建一个PdfFileReader。</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="b224" class="nj ly iq nd b gy ob oc l od oe">file = open("example.pdf", 'rb')<br/>reader = PdfFileReader(file)</span></pre><h2 id="e7ec" class="nj ly iq bd lz nk nl dn md nm nn dp mh lk no np mj lo nq nr ml ls ns nt mn iw bi translated">从PDF中提取文本</h2><p id="ffa8" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">现在，您可以一次一页地阅读PDF文件。您可以通过调用reader对象上的一个<code class="fe na nb nc nd b">numPages</code>属性来获得文档的页数。然后逐一遍历所有页面，提取文本。要获取页面内容，使用<code class="fe na nb nc nd b">reader.getPage(&lt;page number&gt;</code>，要从页面内容中提取文本，使用<code class="fe na nb nc nd b">extractText</code>方法。</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="64f8" class="nj ly iq nd b gy ob oc l od oe">num_pages = reader.numPages</span><span id="7dd8" class="nj ly iq nd b gy of oc l od oe">for p in range(num_pages):<br/>    page = reader.getPage(p)<br/>    text = page.extractText()</span></pre><h1 id="e5ce" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">翻译文本</h1><p id="61a4" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">一旦文本被提取出来，它就可以被翻译。我很好奇将使用谷歌翻译的python库与AWS翻译器进行比较。<code class="fe na nb nc nd b">googletrans</code>库是开源的，使用它没有额外的费用。AWS Translate使用神经机器学习算法进行翻译，并在翻译时考虑上下文。要使用AWS翻译，您需要有一个AWS帐户。他们提供前12个月的免费等级，在此期间你可以翻译200万个字符。之后，采用现收现付的定价方式，每百万字符的费用为15美元。请注意，免费层是在您首次使用服务时激活的。</p><h2 id="c7c8" class="nj ly iq bd lz nk nl dn md nm nn dp mh lk no np mj lo nq nr ml ls ns nt mn iw bi translated">使用谷歌翻译API翻译文本</h2><p id="4ac4" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">您可以使用pip安装该库:</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="0821" class="nj ly iq nd b gy ob oc l od oe">pip install googletrans</span></pre><p id="753e" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">在幕后，这个库使用<strong class="ld ja"> Google Translate Ajax API </strong>调用Translate方法。您也可以指定Google服务域URL。在下面的例子中，我声明了两个不同服务域的列表:<code class="fe na nb nc nd b">translate.google.com</code>和<code class="fe na nb nc nd b">translate.google.lv.</code></p><p id="42da" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">您需要创建一个翻译器客户端实例，然后调用<code class="fe na nb nc nd b">translate</code>方法来翻译文本。默认的目标语言是英语。可以通过在<code class="fe na nb nc nd b">translate</code>方法中指定<code class="fe na nb nc nd b">dest</code>参数来改变。默认的源语言是自动检测的，但是您可以使用<code class="fe na nb nc nd b">src</code>参数专门定义源语言。在下面复制的例子中，它自动检测源语言并翻译成拉脱维亚语。</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="9da6" class="nj ly iq nd b gy ob oc l od oe">from googletrans import Translator</span><span id="348f" class="nj ly iq nd b gy of oc l od oe">URL_COM = 'translate.google.com'<br/>URL_LV = 'translate.google.lv'<br/>LANG = "lv"</span><span id="d942" class="nj ly iq nd b gy of oc l od oe">translator = Translator(service_urls=[URL_COM, URL_LV])<br/>translation = translator.translate(text, dest=LANG)</span></pre><h2 id="4ff6" class="nj ly iq bd lz nk nl dn md nm nn dp mh lk no np mj lo nq nr ml ls ns nt mn iw bi translated">使用亚马逊AWS翻译工具翻译文本</h2><p id="9f3b" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">您需要有一个AWS帐户才能使用AWS翻译。请注意，如果您使用python以编程方式使用AWS服务，那么最简单的方法就是使用由AWS提供的名为<code class="fe na nb nc nd b">boto3</code>的python SDK。AWS的工作方式是，它向您选择的区域中的AWS翻译端点发送一个HTTP API调用。使用您的访问密钥和秘密访问密钥以及当前时间戳对该请求进行加密签名。您确实需要配置您的<code class="fe na nb nc nd b">aws_access_key_id</code>和<code class="fe na nb nc nd b">aws_secret_access_key.</code>，它使用一种叫做AWS Signature Version 4的协议来签署您的请求。您笔记本电脑上的时钟必须正确，因为该协议考虑了当前时间。它会在签署您的请求时包含时间戳，并且您发送给AWS的请求仅在15分钟内有效。如果在15分钟后收到，那么出于安全原因，AWS将拒绝该请求。</p><p id="4721" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">要安装AWS Python <code class="fe na nb nc nd b">boto3</code> SDK:</p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="ee3d" class="nj ly iq nd b gy ob oc l od oe">pip install boto3</span></pre><p id="d60e" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">如上所述，AWS提供了一个免费的AWS翻译试用层，为期12个月，给你200万字免费翻译。之后是每100万字15美元。<strong class="ld ja">请注意，AWS也将空格算作字符。</strong></p><p id="b9eb" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">为了翻译，我们首先为<code class="fe na nb nc nd b">translate</code>服务创建一个客户端，并指定区域。然后在客户端对象上调用<code class="fe na nb nc nd b">translate_text</code>方法，提供<code class="fe na nb nc nd b">Text</code>参数，这是您想要翻译的文本。<code class="fe na nb nc nd b">SourceLanguageCode</code>允许指定源语言。如果使用值<code class="fe na nb nc nd b">auto</code>，那么将自动检测源语言。<code class="fe na nb nc nd b">TargetLanguageCode</code>允许指定目标语言。一旦从AWS收到结果，还有一个额外的步骤来获取翻译后的文本，那就是调用<code class="fe na nb nc nd b">result.get(‘TranslatedText’).</code></p><pre class="kp kq kr ks gt nx nd ny nz aw oa bi"><span id="0d62" class="nj ly iq nd b gy ob oc l od oe">import boto3</span><span id="ea82" class="nj ly iq nd b gy of oc l od oe">LANG = "lv"<br/>AWS_REGION = 'eu-west-1'</span><span id="f7c6" class="nj ly iq nd b gy of oc l od oe">translate = boto3.client(service_name='translate',<br/>                         region_name=AWS_REGION,<br/>                         use_ssl=True)</span><span id="7f1c" class="nj ly iq nd b gy of oc l od oe">result = translate.translate_text(Text=page.extractText(),<br/>                                  SourceLanguageCode="auto",<br/>                                  TargetLanguageCode=LANG)<br/>translation = result.get('TranslatedText')</span></pre><h1 id="51eb" class="lx ly iq bd lz ma mb mc md me mf mg mh kf mi kg mj ki mk kj ml kl mm km mn mo bi translated">结论</h1><p id="0090" class="pw-post-body-paragraph lb lc iq ld b le mr ka lg lh ms kd lj lk nu lm ln lo nv lq lr ls nw lu lv lw ij bi translated">感谢您抽出时间阅读。我希望这篇文章对你有用。您学习了如何使用python阅读PDF文件，以及如何从PDF文件中提取文本。然后，您看了如何自动翻译这段文本的两种不同方式。</p><p id="6ffc" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">请关注第2部分，它将介绍如何使用python库<code class="fe na nb nc nd b">reportlab</code>将翻译后的文本保存到一个新的PDF文件中。它还将格式化和保存新创建的文件。</p><p id="a822" class="pw-post-body-paragraph lb lc iq ld b le lf ka lg lh li kd lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated">在GitHub中查看该项目的完整代码:<a class="ae la" href="https://github.com/akapne01/translator" rel="noopener ugc nofollow" target="_blank">https://github.com/akapne01/translator</a></p></div></div>    
</body>
</html>