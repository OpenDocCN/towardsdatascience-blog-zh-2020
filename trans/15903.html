<html>
<head>
<title>Build Your Next Project with Wolfram Alpha API and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Wolfram Alpha API和Python构建您的下一个项目</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-next-project-with-wolfram-alpha-api-and-python-51c2c361d8b9?source=collection_archive---------16-----------------------#2020-11-02">https://towardsdatascience.com/build-your-next-project-with-wolfram-alpha-api-and-python-51c2c361d8b9?source=collection_archive---------16-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="042b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="9fba" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">让我们将Wolfram Alpha中的精选数据、自然语言处理、文本到语音转换、绘图渲染等功能应用到您的下一个项目中吧！</h2></div><p id="2b09" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">任何在某一点上与数学斗争的人都知道Wolfram Alpha，并且可能因为它解决任何方程、绘制任何函数或可视化逻辑电路的能力而得救。Wolfram Alpha can然而，做的远不止这些，包括化学、语言学或历史，最重要的是，它可以使用它的公共API给你所有的答案。因此，在这篇文章中，我们将探索如何使用它来回答简单的问题，解决数学问题，渲染情节，甚至描述DNA序列！</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/694b39b8ef44c11d7c7b9aaf73bdbb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*azR7gk4Wl5N7pK3FiU2mtg.jpeg"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">照片由<a class="ae md" href="https://unsplash.com/@vnwayne?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">韦恩·范</a>在<a class="ae md" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="06e5" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">安装</h1><p id="da10" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">Wolfram Alpha API是免费的(用于非商业用途)，但是我们仍然需要获得API key (AppID)来对API端点执行查询。为了获得API密钥，我们将首先在https://account.wolfram.com/login/create的<a class="ae md" href="https://account.wolfram.com/login/create" rel="noopener ugc nofollow" target="_blank">处创建Wolfram ID。创建帐户后，我们可以导航到</a><a class="ae md" href="https://developer.wolframalpha.com/portal/myapps/index.html" rel="noopener ugc nofollow" target="_blank">developer.wolframalpha.com/portal/myapps</a>，点击<em class="nb">注册获得您的第一个AppID </em>按钮，填写<em class="nb">获得新的AppID </em>对话框。之后，我们将看到API键，这里称为<em class="nb"> AppID </em>，我们可以使用下面的示例查询来测试它:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="5841" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">上面的代码使用<em class="nb"> Wolfram|Alpha完整结果API </em>来找出蚊子的寿命。为此，它向<code class="fe ne nf ng nh b">http://api.wolframalpha.com/v2/query</code>发出<code class="fe ne nf ng nh b">GET</code>请求，其中包含指定我们的AppID进行身份验证的参数、<code class="fe ne nf ng nh b">input</code>字段中的问题、格式参数为<code class="fe ne nf ng nh b">plaintext</code>(而不是图像)以及最终的输出类型为JSON(而不是默认的XML)。</p><p id="16ab" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们以字典的形式遍历结果，寻找感兴趣的字段进行打印。返回的JSON(或XML)可能相当复杂，解析它的最简单方法是打印它，并在其中寻找任何有用的字段。上述查询的响应的精简示例如下所示:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="a18e" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">做数学</h1><p id="4590" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">Wolfram Alpha最有用的部分(在我看来)是解决复杂数学问题的能力。因此，让我们尝试使用API来做一些数学计算:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="9875" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">上一节中展示的<em class="nb">完整结果API </em>不仅仅回答一些奇怪的问题，它还做数学(和几乎所有的事情)。为了让API意识到我们想要做数学运算——在本例中——求解方程，我们需要在实际的方程前面加上单词<code class="fe ne nf ng nh b">solve</code>。除了输入本身，该查询看起来与上一节中的查询非常相似。添加到这个参数中的一个额外的东西是<code class="fe ne nf ng nh b">includepodid</code>参数，它告诉API在这种情况下我们只希望在响应中包含<code class="fe ne nf ng nh b">Result</code> pod。“但是，pod是什么？”，你可能会问。</p><p id="c797" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">来自Wolfram Alpha(网站和API)的每个结果通常包括多个类别的数据。例如，这可以是图表、图像、逐步解决方案或表格。其中的每一个都属于它自己的叫做<em class="nb"> pod </em>的部分，而pod 又包括<em class="nb">子pod</em>来保存单独的数据。考虑到每个响应有时甚至可能包括10个左右的pod，描述一下我们希望从API中得到什么是可取的。为此，可以使用<code class="fe ne nf ng nh b">podtitle</code>和更健壮的<code class="fe ne nf ng nh b">includepodid</code>参数，如上所示。</p><p id="1ed7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">因此，上述查询的过滤响应如下所示:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="bc24" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了进行比较，相同的(但图形)结果，但所有的豆荚看起来像这样:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ni"><img src="../Images/87ddab4a2d6508810829b9b5488010f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*plmSDFMQ3WieirCq"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">带有输入、结果、绘图和数字行窗格的结果</p></figure><p id="ba08" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">Wolfram Alpha可以成为很好的学习资源，因为它不仅能够显示结果，而且所有的计算步骤和API都可以做到这一点。为了获得一个查询的逐步解决方案，我们需要包含另一个名为<code class="fe ne nf ng nh b">podstate</code>的参数，它指定pod状态变化。这将使用修改后的版本替换原来的pod，例如，更多位数的十进制数，如圆周率(<code class="fe ne nf ng nh b">DecimalApproximation</code>)、扩展的天气数据(更多天/月/年)或在我们的情况下，方程解的步骤:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="349a" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">渲染数学降价</h1><p id="da98" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">您可以使用Wolfram Alpha API的一个巧妙技巧是呈现MathML。如果你不熟悉MathML，那么这里有一个快速概述——<a class="ae md" href="https://www.w3.org/Math/whatIsMathML.html" rel="noopener ugc nofollow" target="_blank">MathML</a>代表<em class="nb">数学标记语言</em>，它是一种基于XML的格式，用于在web浏览器中呈现类似<em class="nb"> LaTeX </em>的数学表达式。尽管这种格式已经存在很长时间了，但只有Firefox才真正支持它，这可能让它看起来像是一个糟糕的选择，但名为<a class="ae md" href="https://github.com/mathjax/MathJax" rel="noopener ugc nofollow" target="_blank"> MathJax.js </a>的JavaScript显示引擎使得在任何浏览器中呈现MathML成为可能，如果你想在你的web应用程序或博客中以<em class="nb"> LaTeX </em>格式显示非常好看的复杂公式，这是一个不错的选择。说完了，我们来查询一下吧！</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="507f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们再次使用上一节中的例子，通过逐步求解来查询方程，但是用<code class="fe ne nf ng nh b">format=plaintext</code>代替<code class="fe ne nf ng nh b">format=mathml</code>，同样用<code class="fe ne nf ng nh b">mathml</code>代替所有其他出现的<code class="fe ne nf ng nh b">plaintext</code>，例如<code class="fe ne nf ng nh b">result = data[0]["mathml"]</code>。上面你可以看到API给出的一点MathML输出，由于完整的输出非常长，所以它被修剪得很短，但我鼓励你自己尝试运行查询，通过MathJax.js传递它，并享受美丽的<em class="nb"> LaTeX </em>数学表达式。</p><h1 id="dd48" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">求解布尔代数</h1><p id="3b48" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">Wolfram Alpha的另一个常见用例是求解布尔代数。与基本方程一样，我们需要做的就是将公式传递给API，这是我们将得到的结果:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="5a9c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">除了我们选择的特定pod—<code class="fe ne nf ng nh b">Input</code>、<code class="fe ne nf ng nh b">MinimalForms</code>和<code class="fe ne nf ng nh b">TruthDensity</code>之外，上面的查询没有显示任何新内容。在解析这3个pod中的数据后，我们可以看到输出，其中包括提交的输入公式的更好的形式，它的其他计算形式(CNF，DNF...)以及分数和百分比形式的真实密度。</p><h1 id="722f" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">渲染和下载图</h1><p id="f34e" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">我最喜欢用Wolfram Alpha做的事情之一就是渲染复杂的情节。实现这一点甚至不需要太多的代码更改，唯一真正的更改是选择pod及其字段:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b1a8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在这种情况下，我们使用<code class="fe ne nf ng nh b">includepodid</code>参数来选择<code class="fe ne nf ng nh b">3DPlot</code>和<code class="fe ne nf ng nh b">ContourPlot</code>窗格，这些窗格在其<code class="fe ne nf ng nh b">img.src</code>字段中保存相应地块图像的URL。然后可以下载这些图，并以二进制模式写入，生成以下图像:</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/eb1414472068fcf62e49b3fbec290748.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/0*jFhSQMxAbHxLue73"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">三维绘图</p></figure><h1 id="3769" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">不仅仅是数学</h1><p id="8d8c" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">在这一点上，我认为我们已经看到了足够多的Wolfram Alpha和math的应用程序。那么，我们还能做什么？举个简单的例子，让我们探索一些DNA序列:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d017" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们再次使用相同的API端点，但是这次我们提交代表DNA序列的字符串。您可能会注意到，我们不需要像前面的<code class="fe ne nf ng nh b">solve</code>或<code class="fe ne nf ng nh b">plot</code>那样在查询前包含关键字。这次我们没有使用关键字，而是添加了<code class="fe ne nf ng nh b">scanner</code>参数，它指定了搜索查询的主题区域，在本例中是<code class="fe ne nf ng nh b">Genome</code>。要找到哪个扫描仪将为某个查询返回相关数据，最简单的方法是运行不带<code class="fe ne nf ng nh b">scanner</code>参数的查询，并查找每个包含预期数据的pod的<code class="fe ne nf ng nh b">scanner</code>属性。</p><p id="5fcb" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">DNA序列显然不是你可以搜索的唯一酷的东西。其他一些有趣的话题可以是历史、化学、交通或音乐——仅举几例。</p><h1 id="a738" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">自然语言(口语)答案</h1><p id="b6e1" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">如果只是寻找信息，那么前面例子中的例子和API就足够了。然而，如果你想要/需要更自然的回答，那么你可以使用<em class="nb">口语结果API </em>:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="201d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对<code class="fe ne nf ng nh b">v1/spoken</code>端点的查询非常简单。我们需要传入的只是一个AppID和我们在<code class="fe ne nf ng nh b">i</code>参数中的问题。这产生了完整句子形式的反应，而不是简单的事实。这在构建智能聊天机器人时非常有用，或者可以作为文本到语音引擎的输入。</p><h1 id="46e0" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">使用对话API聊天</h1><p id="a35f" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">作为对<em class="nb">口语结果API </em>的一种扩展，Wolfram Alpha还提供了<em class="nb">对话API </em>，允许你提出后续问题，从而与API进行对话。所以，让我们试一试，问Wolfram Alpha一些问题:</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="820c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">考虑到我们要问多个问题，我们也必须进行多个查询。第一个是针对<code class="fe ne nf ng nh b">v1/conversation</code>端点，并在<code class="fe ne nf ng nh b">i</code>参数中包含一个问题。我们还用<code class="fe ne nf ng nh b">geolocation</code>参数指定我们的位置——这是可选值之一(其他的是<code class="fe ne nf ng nh b">ip</code>和<code class="fe ne nf ng nh b">units</code>),可以为问题提供上下文。第一个请求与<em class="nb">口语结果API </em>做的事情差不多，这意味着它以完整句子的形式返回信息。</p><p id="404b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">当我们提出后续问题时，乐趣就开始了。为此，我们进行另一个查询，但是这一次，我们将它发送到作为对第一个查询(<code class="fe ne nf ng nh b">host = r["host"]</code>)的响应的一部分提供的主机。第一个响应还包括<code class="fe ne nf ng nh b">conversationID</code>，我们也必须为API传递它，以了解在它之前说了什么。</p><p id="9539" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">然后，第二个查询返回与第一个相同类型的结果，这允许我们使用提供的<code class="fe ne nf ng nh b">conversationID</code>和<code class="fe ne nf ng nh b">host</code>继续询问更多问题。</p><p id="917d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我想在这里强调的最后一点是，问题和答案是如何很好地流动和使用上下文的。在这个例子中，我们使用了<em class="nb">“离这里有多远？”</em>作为后续问题，没有具体说明<em class="nb">【它】</em>或<em class="nb">【这里】</em>到底是什么。这些信息是从前面的问题和<code class="fe ne nf ng nh b">geolocation</code>参数中自动推断出来的。</p><h1 id="4913" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">结论</h1><p id="be5e" class="pw-post-body-paragraph kr ks it kt b ku mw kd kw kx mx kg kz la my lc ld le mz lg lh li na lk ll lm im bi translated">就Wolfram Alpha提供的信息而言，这篇文章只是冰山一角。这些API不仅仅可以用于数学，我认为它是构建酷机器人、智能设备或基于语音的应用程序的良好起点。即使它不是免费的商业用途，你仍然会每月收到2000个请求，这足以启动一些很酷的项目。我建议查看<a class="ae md" href="https://products.wolframalpha.com/api/" rel="noopener ugc nofollow" target="_blank">https://products.wolframalpha.com/api/</a>获取每个API端点的文档，以及<a class="ae md" href="https://www.wolframalpha.com/" rel="noopener ugc nofollow" target="_blank"> Wolfram Alpha登录页面</a>，它显示了所有不同的主题，可能会给你一些关于可以用它构建什么的想法。😉</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="8645" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="nb">本文最初发布于</em><a class="ae md" href="https://martinheinz.dev/blog/36?utm_source=tds&amp;utm_medium=referral&amp;utm_campaign=blog_post_36" rel="noopener ugc nofollow" target="_blank"><em class="nb">martinheinz . dev</em></a></p><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/writing-more-idiomatic-and-pythonic-code-c22e900eaf83"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd jd gy z fp nz fr fs oa fu fw jc bi translated">编写更加地道和Pythonic化的代码</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">使你的Python代码可读、有效、简洁和可靠的习惯用法和惯例。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oe l of og oh od oi lx nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/build-a-stunning-readme-for-your-github-profile-9b80434fe5d7"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd jd gy z fp nz fr fs oa fu fw jc bi translated">为您的GitHub档案创建一个精彩的自述文件</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">使用GitHub隐藏的新功能— GitHub Profile READMEs，在GitHub上展示您的项目和技能！</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oj l of og oh od oi lx nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/scraping-news-and-articles-from-public-apis-with-python-be84521d85b9"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd jd gy z fp nz fr fs oa fu fw jc bi translated">用Python从公共API抓取新闻和文章</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">让我们探索纽约时报、卫报、黑客新闻和其他API，并为您的下一个项目收集一些新闻数据！</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="ok l of og oh od oi lx nu"/></div></div></a></div></div></div>    
</body>
</html>