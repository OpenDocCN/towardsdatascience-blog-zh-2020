<html>
<head>
<title>Providing and plotting data with free services is easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过免费服务提供和绘制数据非常简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/providing-and-plotting-data-with-free-services-is-easy-c3176f4323f7?source=collection_archive---------58-----------------------#2020-11-16">https://towardsdatascience.com/providing-and-plotting-data-with-free-services-is-easy-c3176f4323f7?source=collection_archive---------58-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7da6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从开放数据提供商那里收集和提取数据，将它们放在一个新的数据集中，通过使用免费服务来发布和可视化数据？这比你想象的要容易。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3c7bd9fa69df423d0170c5b744b698f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q-XjCBgVe71v5PBy"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="a995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于科罗纳疫情提供了大量免费的可访问数据，我有了将我在德国居住的农村地区的7天发病率可视化的想法。<a class="ae ky" href="https://www.rki.de" rel="noopener ugc nofollow" target="_blank">罗伯特-科赫研究所</a> (RKI)提供了一个<a class="ae ky" href="https://opendata.arcgis.com/datasets/917fc37a709542548cc3be077a786c17_0" rel="noopener ugc nofollow" target="_blank">开放数据集</a>，包含德国每个县的所有数字。对于可视化部分，我想尝试一些易于使用的服务。最近，我在德国新闻网站上偶然发现了一些很棒的可视化效果。他们(以及更多人)正在使用德国一家名为<a class="ae ky" href="https://datawrapper.de" rel="noopener ugc nofollow" target="_blank"> Datawrapper </a>的初创公司提供的服务。他们还提供一些免费服务——太好了，让我们使用它们吧！最后，我想使用一个用于发布数据的开放平台<a class="ae ky" href="https://qri.io" rel="noopener ugc nofollow" target="_blank"> Qri </a>来发布我收集的数据。</p><p id="f20c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看这些步骤，直到我可以创建和发布可视化。</p><ol class=""><li id="641c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">定期收集和保存数据</li><li id="3101" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">将数据推送到存储库中</li><li id="50eb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">连接数据并创建可视化效果</li></ol><h2 id="3291" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">定期收集和保存数据</h2><p id="2a77" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">不幸的是，RKI没有公布我想要使用的数字的时间序列数据。只有实际日期的数字。我创建了一些Python脚本来收集实际数据，提取我想要使用的数字，添加并保存到我的CSV文件中。该脚本每天在我的家庭办公室的一个简单的Raspberry Pi上使用cronjob运行。我正在使用熊猫打开远程CSV的内置功能。这个脚本非常小，几乎不言自明。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="1c56" class="mj mk it ni b gy nm nn l no np">import pandas as pd<br/>import os.path<br/><br/># Get Data<br/>df = pd.read_csv("https://opendata.arcgis.com/datasets/917fc37a709542548cc3be077a786c17_0.csv")<br/><br/># Get desired row (128 - Rheingau-Taunus)<br/>rtk = df.loc[[128], ['last_update', 'cases','cases_per_100k', 'cases7_per_100k', 'deaths']]<br/><br/># Update data type<br/>rtk['last_update'] = pd.to_datetime(rtk['last_update'], format="%d.%m.%Y, %H:%M Uhr")<br/><br/># Add row to CSV<br/>use_header = False if os.path.isfile('rtk.csv')  else True<br/>rtk.to_csv('rtk.csv', mode='a', header=use_header, index=False)</span></pre><p id="101c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我算出我的县的ID是128。现在很容易提取数据。由于数据集使用了奇怪的德国日期格式，我用熊猫<code class="fe nq nr ns ni b">to_datetime</code>转换了它们。</p><p id="e5de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我将我的数据添加到CSV中。就是这样！下一步是使用Qri提供数据。</p><h2 id="1d8a" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">将数据推送到存储库中</h2><p id="bb1d" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">Qri是一个开源项目，旨在为数据集同步、版本控制、存储和协作构建软件。有点像数据集的GitHub。它们提供了GUI客户端和CLI工具。我正在使用CLI工具来进行版本控制，并定期将我的数据集推送到他们的(免费)云空间，我可以将我的数据集作为开放的免费资源分享给其他对做酷的事情感兴趣的人。您可以提供一个自述文件，并为您的数据集添加一些元信息(字段描述等)。).关于设置说明，我参考了他们的<a class="ae ky" href="https://qri.io/docs/getting-started/qri-cli-quickstart" rel="noopener ugc nofollow" target="_blank"> CLI快速入门指南</a>。使用CLI工具初始化和发布数据后，您的数据将可在其云空间中访问。<a class="ae ky" href="https://qri.io/docs/getting-started/qri-cli-quickstart" rel="noopener ugc nofollow" target="_blank">我的数据就在这里</a>。</p><p id="04da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我得到我的数据的更新版本时，我只需<em class="nt">保存</em>新版本并<em class="nt">将它推</em>到云中。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="ab8a" class="mj mk it ni b gy nm nn l no np">$ qri save --body ../inzidenz-rtk.csv<br/>$ qri push</span></pre><p id="4f9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个过程仍然是手动的，因为CLI工具不能在Raspberry Pi上工作。我的计划是将这些步骤添加到我的cron作业中，以实现完全自动化的发布。到目前为止，手动就足够了。</p><p id="860c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不会深入Qri的细节，并参考他们的文档来获得更多的见解。上面的过程对我来说有效，但可能不是最好的。如果有什么我可以改进的，请评论！</p><p id="0af9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Qri最棒的是<a class="ae ky" href="https://qri.cloud/casarock/inzidenz-rtk/integration" rel="noopener ugc nofollow" target="_blank">集成部分</a>。您可以获得最新<code class="fe nq nr ns ni b">.csv</code>的链接，以便在您最喜欢的数据分析工具中使用。此外，其他Qri用户可以<em class="nt">派生</em>您的数据集。</p><p id="13df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我使用数据集通过<a class="ae ky" href="https://www.datawrapper.de/" rel="noopener ugc nofollow" target="_blank"> Datawrapper </a>创建一个图。</p><h2 id="8900" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">连接数据并创建可视化效果</h2><p id="4f0d" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">Datawrapper是一个非常棒的可视化工具。它不像Tableau、Mode或Datorama那样用于构建复杂的仪表板。Datawrappers主要关注的是制作干净漂亮的可视化效果本身。您可以使用标准的图表，如条形图、折线图、饼图、圆环图等。他们专注于创建独特的图表。每个情节看起来都棒极了。Datawrapper还提供了几个非常棒的地图绘图。有了免费帐户，你可以使用所有这些，但你在风格上受到限制。但是它们的默认样式和模板已经很棒了，随时可以使用。</p><p id="94db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好的功能是，您可以链接一个外部数据集，为您的数据提供一个URL。当然，我使用的是我的数据集在<a class="ae ky" href="https://qri.cloud/casarock/inzidenz-rtk" rel="noopener ugc nofollow" target="_blank"> Qri </a>的URL。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/09f2aec2cbc42ee553aa3ce37ae62819.png" data-original-src="https://miro.medium.com/v2/format:webp/1*N5C-j_3ndGMiDV3sN58aYg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Datawrapper中使用CSV的URL</p></figure><p id="48fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是检查和描述您的数据集，以便以后在图中使用</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/90d3c866d9a7a13fe13bd3ef2670957f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*NkVnAKQl3Ah25EFv7Y5Hqw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">选择要在可视化中使用的字段</p></figure><p id="9dd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，我使用了两列:<code class="fe nq nr ns ni b">last_update</code>和<code class="fe nq nr ns ni b">cases7_per_100k</code>。现在我们可以创建可视化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/26af81ffcc73f8a31a3692cae16ad984.png" data-original-src="https://miro.medium.com/v2/format:webp/1*4i-V9GJi3n-leP5pfmyvcQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在Datawrapper中设计和注释可视化</p></figure><p id="ac9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以细化、注释和设计可视化。使用免费版本，设计仅限于选择一个布局。您可以为某些部分选择颜色，如线条或注释，但您无法使用您公司的CI创建可视化效果。那是他们付费产品的一部分。对我来说，默认值已经足够了。</p><p id="8d9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Qri(或任何其他服务)连接数据的最大好处是:</p><p id="ac86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的数据已经更新，您只需重新发布您的图表，它就是最新的！</p><p id="b6a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我使用了一些注释，比如日期和突出显示的范围，所以我需要做一些手工工作。其他一切都已经存在了。无需复制新数据、选择字段等。</p><p id="a086" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最终的可视化看起来是这样的(是的，Medium可以嵌入Datawrapper可视化！)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">嵌入媒体的最终可视化</p></figure><h2 id="f94b" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">结论</h2><p id="67b8" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">收集数据、为他人提供数据以及创建可视化效果比看起来容易。你不需要成为数据科学、数据工程或设计师方面的专家。即使不是开发人员，也可以使用许多很棒的工具。你专注于好的视觉化吗？关注<a class="ae ky" href="https://datawrapper.de" rel="noopener ugc nofollow" target="_blank">数据包装器</a>。它能很好地帮助你创建可嵌入的图表，将它们作为图片下载，甚至允许在他们的服务<a class="ae ky" href="https://river.datawrapper.de/" rel="noopener ugc nofollow" target="_blank"> River </a>中重用。有了Qri ，你可以为大量受众提供数据集。使用他们的桌面客户端可以帮助那些不喜欢命令行界面的人。您关注的是结果，而不是创建结果的过程！</p><p id="6164" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">免责声明</strong>:我既没有参与<em class="nt"> Datawrapper </em>也没有参与<em class="nt"> Qri </em>！</p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><p id="0746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[1]: 7天发病率是每100，000名居民在7天内新感染的人数。<br/>【2】:<a class="ae ky" href="https://opendata.arcgis.com/datasets/917fc37a709542548cc3be077a786c17_0" rel="noopener ugc nofollow" target="_blank">数据</a>许可:<a class="ae ky" href="http://www.govdata.de/dl-de/by-2-0" rel="noopener ugc nofollow" target="_blank">数据许可德国—归属—版本2.0/dl-de/by-2–0</a></p></div></div>    
</body>
</html>