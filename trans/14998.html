<html>
<head>
<title>Ultimate Pandas Guide — Inspecting Data Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">终极熊猫指南——像专家一样检查数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ultimate-pandas-guide-inspecting-data-like-a-pro-9b4f13c39c94?source=collection_archive---------26-----------------------#2020-10-15">https://towardsdatascience.com/ultimate-pandas-guide-inspecting-data-like-a-pro-9b4f13c39c94?source=collection_archive---------26-----------------------#2020-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4939e32cf1b9eeb6c6c667c05b0305ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*IGLEfRn43BKzlJ-pmXI1sw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">劳拉·伍德伯里摄于<a class="ae jg" href="https://www.pexels.com/photo/panda-bear-on-green-grass-3608263/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a></p></figure><div class=""/><p id="798d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">无论您正在进行简单的分析还是复杂的机器学习模型，能够快速回答关于数据性质的探索性问题都有很大的价值。</p><p id="7cb3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，熊猫让这变得容易了。在本文中，我将介绍几个DataFrame属性和方法，它们使数据检查变得轻松而高效。</p><h1 id="701e" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">头/尾</h1><p id="aeb0" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>快速浏览我们的数据框架。</p><p id="f3eb" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">默认情况下，head方法返回数据的前5行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1a36" class="mq lf jj mm b gy mr ms l mt mu">#returns the first five rows<br/>df.head()</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/5afd2b9722853f646bddaa5b39b4c115.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*lz7n6bXnVdmYX4FnUiYvDA.png"/></div></figure><p id="8751" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我们也可以指定不同的行数来返回:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="de7a" class="mq lf jj mm b gy mr ms l mt mu">#returns the first six rows <br/>df.head(6)</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/7475b5d880a2663eba81f977b44510ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*gplsaS1jtjj2ZrETQv6aTQ.png"/></div></figure><p id="271d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">tail方法以同样的方式工作，但是从数据帧的底部而不是顶部开始返回行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c224" class="mq lf jj mm b gy mr ms l mt mu">df.tail(2)</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/50f7fa31363cb13499bb40ad8c28dfab.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*MkQnX8Wp07giAThdvK3iPg.png"/></div></figure><h1 id="5391" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">列</h1><p id="0ff9" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>从我们的数据框架中获取列名。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8c82" class="mq lf jj mm b gy mr ms l mt mu">df.columns</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi my"><img src="../Images/d581fdd86a00db81392cf184119df799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IiFDdoqIor6kKblJXYB8Q.png"/></div></div></figure><p id="cd70" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我需要记住列名的确切拼写或者当我发现哪些数据点可用时，我发现这很有用。</p><p id="2795" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这个对象更方便，我们也可以将索引转换为列表:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b06f" class="mq lf jj mm b gy mr ms l mt mu">list(df.columns)</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/4353df7f1bff97d852566ece30801786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*z0YkL6nE3-8T4vYer8iX6w.png"/></div></figure><h1 id="cb4b" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">形状</h1><p id="30ef" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>确定数据帧中的行数和列数。</p><p id="3e1f" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此方法返回一个元组，其第一个值是行数，第二个值是列数:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ab2b" class="mq lf jj mm b gy mr ms l mt mu">df.shape</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/efa45a6281e3d93185eea45603daed64.png" data-original-src="https://miro.medium.com/v2/resize:fit:260/format:webp/1*Rt4G9oUJlbIY0q9kgVoWLg.png"/></div></figure><p id="7fd8" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了只获得行数，我们简单地索引元组以提取第一个元素:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="85d5" class="mq lf jj mm b gy mr ms l mt mu">df.shape[0]</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9368c9e1aba5d19061f3360670a94e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:88/format:webp/1*vpLjnUpXyaJluNDIuPRAUA.png"/></div></figure><p id="d9a4" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我喜欢使用这个属性来查找符合特定条件的数据的百分比。</p><p id="f752" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以筛选数据帧，以获取一列中小于70的值和另一列中小于1000的值的百分比:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d32c" class="mq lf jj mm b gy mr ms l mt mu">df[ (df.ints &lt; 70) &amp; (df.floats &lt; 1000) ].shape[0] / df.shape[0]</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/b2c7f809d7b3368871c0424328f58ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/1*I-wdzIiyNjXRrRkTSnoNTQ.png"/></div></figure><h1 id="c689" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">唯一/值计数</h1><p id="a8de" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>获取DataFrame列中的不同值(即系列对象)。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="910e" class="mq lf jj mm b gy mr ms l mt mu">df[‘strings’].unique()</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/fdb7b7d74f762632522c134c9347825b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7wo3UdCUkh_KtrlYMeIsg.png"/></div></div></figure><p id="8fc5" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Value_counts类似于unique，但它不是返回唯一值的数组，而是返回每个值的频率序列:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="db6c" class="mq lf jj mm b gy mr ms l mt mu">df[‘strings’].value_counts()</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/d23b7d0cdc8c8d22bc61629eeab724ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Wxp3sttdHyWehRP8WpmZFQ.png"/></div></figure><h1 id="a7f0" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">信息</h1><p id="19b3" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>获取关于我们的索引、列和内存使用的汇总信息。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6bb3" class="mq lf jj mm b gy mr ms l mt mu">df.info(verbose = True)</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/9a364df3f785fd235a94cc5aed9625f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*arpjDZCSa6PFAL__L7Pzog.png"/></div></figure><p id="dac3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将“True”传递给“verbose”参数，以确保我们在处理更大的数据集时能够获得完整的列摘要。</p><h1 id="3add" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">形容</h1><p id="99a8" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><strong class="ki jk">用例:</strong>获取数据中列的汇总统计信息。</p><p id="7f0f" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">默认情况下，describe方法只包含数字列:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="633f" class="mq lf jj mm b gy mr ms l mt mu">df.describe()</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/f95847b07f8dca2b5530c62deaff76bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*QC5VbPJw494IASamnaxyPA.png"/></div></figure><p id="ce63" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用几种方式定制我们的输出。</p><p id="3583" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们可以通过向“percentiles”参数传递一组介于0和1之间的值来获得不同的百分点值:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="dfc4" class="mq lf jj mm b gy mr ms l mt mu">df.describe(percentiles = [.1, .99])</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/faf64babd24ddb3c7e18c1e7be4ff984.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*63fFoUe4tayyvLnZ4Tzy-Q.png"/></div></figure><p id="17e1" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以使用“include”和“exclude”参数来指定我们希望在输出中包含哪些类型的列。</p><p id="d310" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们将“all”传递给“include”参数，那么除了数字列之外，我们还将获得非数字列的摘要。</p><p id="ca83" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于非数字列，我们将获得计数、唯一计数、top(最常见值)和freq(最常见值的频率):</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6de5" class="mq lf jj mm b gy mr ms l mt mu">df.describe(include = 'all')</span></pre><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/1bed9056740ecddd4632f3e93341e59b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*ioW6M4lWdnNweqSUabToVA.png"/></div></figure><p id="e086" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，如果我们想在输出中进一步定制列，我们可以将数据类型列表传递给include或exclude参数。</p><h1 id="e331" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">奖金-最大行数和列数</h1><p id="0836" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">默认情况下，pandas将输出中的行数和列数分别限制在60和20。</p><p id="783b" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们试图返回一个70行的数据帧，我们将得到如下结果:</p><figure class="mh mi mj mk gt iv gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/30af78eedf1cffb0e8500f132b621f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*tn2A0XBdM4wHgk5eej1IGA.png"/></div></figure><p id="f9e6" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们想要查看所有数据时，这可能会很烦人。</p><p id="bdb9" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过将“max_rows”或“max_columns”传递给pandas的“set_option”方法并指定一个值来解决这个问题:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e9dd" class="mq lf jj mm b gy mr ms l mt mu">pd.set_option(‘max_rows’, 70)</span></pre><p id="66ee" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我想灵活地查看我的数据的一小部分时，我发现这个技巧非常有用。</p><h1 id="f0c1" class="le lf jj bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结束语</h1><p id="10d7" class="pw-post-body-paragraph kg kh jj ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Pandas通过许多用户友好的方法和属性使数据检查变得相当简单。您还可以编写自己的检查和探索方法来扩展功能。这是使用Python这样的脚本语言进行数据分析的优势之一。</p><p id="97d4" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编码快乐！</p><figure class="mh mi mj mk gt iv"><div class="bz fp l di"><div class="nk nl l"/></div></figure></div></div>    
</body>
</html>