<html>
<head>
<title>Economics for Tech People — Equilibrium (Part 3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">技术人员的经济学——均衡(第三部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/economics-for-tech-people-equilibrium-part-3-74d3126b8c41?source=collection_archive---------42-----------------------#2020-11-03">https://towardsdatascience.com/economics-for-tech-people-equilibrium-part-3-74d3126b8c41?source=collection_archive---------42-----------------------#2020-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1912" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">使用R和ggplot2 </em>了解均衡经济学</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/b8c2944e8a5076c8009bde2915f3331a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fcflAD3p__c-CPgt"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">rupixen.com在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kz" href="https://unsplash.com/@rupixen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">的照片</a></p></figure><p id="89cd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">欢迎来到技术人员经济学系列的第3部分！</p><p id="0ed1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本系列旨在帮助人们更好地理解经济学的基本原理，同时也培养使用R语言的技能。我注意到关于经济学有相当多的误解和完全错误的信息，所以这里的目标是澄清这些模糊的领域。</p><p id="2116" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这篇文章中，我们将探讨这样的问题:什么是均衡？如何找到均衡价格和数量？当数字计算不完美时会发生什么？我能期望获得多少收入？</p><p id="253b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本文假设你已经很好地理解了前面的两个部分，即<a class="ae kz" rel="noopener" target="_blank" href="/economics-for-tech-people-demand-part-1-44a9eb9a576a">技术人员经济学—需求(第一部分)</a>和<a class="ae kz" rel="noopener" target="_blank" href="/economics-for-tech-people-supply-part-2-600fdce12cf2">技术人员经济学—供给(第二部分)</a>。这里的大部分内容都是基于这两篇文章中的代码以及对概念的解释。如果你想要完整的故事，在开始之前先看看这些。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="67bf" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">介绍</h1><p id="e6f1" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">今天，我们将利用我在Excel文件中创建的一些真实数据，使用R编程语言来探索需求和供应数据的交集。</p><p id="bab3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">就像前两篇文章一样，我们使用一个软件即服务(SaaS)应用程序的10个假设的供应商和10个假设的需求者，该应用程序为每个许可证收取月费。这些公司是各种规模的良好组合，并且都有不同的弹性。</p><p id="3353" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里的目标是将曲线相互叠加，找出市场在什么价格和什么数量下会达到均衡</p><p id="be88" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这项工作中，我在Mac电脑上使用RStudio，带有R Markdown (RMD)文件。</p><p id="ce72" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">所有的数据和完成的RMD文件都可以在我的GitHub这里获得。</p><p id="6dd1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">注:如果您使用的是Mac，请不要打开这些带有数字的文件。它会自动改变文件的编码，R会不高兴的。如果发生这种情况，请删除您打开的文件，并下载一份新的Excel文件。</p><p id="2e2b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我还假设您可以设法在本地机器上设置一个R环境。最好将所有文件放在一个文件夹中，以简化工作流程。</p><p id="82f7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们开始吧！</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="28f4" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">代码</h1><h2 id="29df" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">加载库</h2><p id="249c" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">为了完成这个项目，我们需要<a class="ae kz" href="https://readxl.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> <em class="nm"> readxl </em> </a>和<a class="ae kz" href="https://www.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> <em class="nm"> tidyverse </em> </a>包。如果您的R环境中没有安装它们，只需删除代码[1]中“<em class="nm"> install.packages… </em>”行前的“<em class="nm"> # </em>”符号。一旦安装了它们，您就不需要在您的机器上再次安装它们。</p><p id="7f24" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="8d10" class="na me it no b gy ns nt l nu nv"># Load Libraries</span><span id="285c" class="na me it no b gy nw nt l nu nv"># If you do not have readxl or tidyverse installed, uncomment the following lines<br/># install.packages("readxl")<br/># install.packages("tidyverse")</span><span id="0bff" class="na me it no b gy nw nt l nu nv">require(readxl)<br/>require(tidyverse)</span></pre><h2 id="9dc0" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">检查数据导入</h2><p id="df22" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">有时候Excel文件和R交互的时候是有气质的，尤其是RStudio。使用下面的代码导入数据，并检查数据是否正常。</p><p id="9616" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="574e" class="na me it no b gy ns nt l nu nv"># Import Data<br/>Supply_Data &lt;- read_excel("Supply_Data.xlsx")<br/>Demand_Data &lt;- read_excel("Demand_Data.xlsx")</span><span id="0702" class="na me it no b gy nw nt l nu nv"># Check data import<br/>head(Supply_Data)<br/>head(Demand_Data)</span></pre><p id="72c9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nx"><img src="../Images/c66a8da2b18ecfeb6fb19732ea22f22a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oycKs_TEyCezG_ACLMQHbA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中供应数据前六行的屏幕截图</p></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ny"><img src="../Images/91eb678547362e453a08547363501c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXi4QQQnRKA7aqY0maHfAQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中需求数据前六行的屏幕截图</p></figure><p id="b70b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你导入数据，而<em class="nm">价格</em>和<em class="nm"> Qs_# </em>或<em class="nm"> Qd_# </em>不是列标签，是数据的第一行，你大概会看到类似<em class="nm"> X1 X2 X3等。</em>作为列标题。如果发生这种情况，你可以遵循我在上一篇文章<a class="ae kz" rel="noopener" target="_blank" href="/economics-for-tech-people-demand-part-1-44a9eb9a576a">科技人的经济学——需求(第一部分)</a>的“<em class="nm">设置”</em>部分描述的相同过程。这将向您展示如何以不同的方式导入数据，从而跟上本文。</p><h2 id="6de1" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">赶上进度</h2><p id="f60f" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">一旦有了数据，就应该复制/粘贴需求和供应代码的相关部分来完成繁重的工作。请参考这两篇文章，了解以下代码块的作用。</p><p id="ec75" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="a93c" class="na me it no b gy ns nt l nu nv"># Demand first</span><span id="99b5" class="na me it no b gy nw nt l nu nv"># Wrangle the data into a ggplot friendly structure<br/>Wrangled_Data &lt;- data.frame(Price = Demand_Data$Price, stack(Demand_Data[2:11]))<br/>names(Wrangled_Data)[2] &lt;- "Quantity"<br/>names(Wrangled_Data)[3] &lt;- "Qd_num"</span><span id="88a5" class="na me it no b gy nw nt l nu nv"># Create market demand<br/>Market_Demand &lt;- data.frame(Price = Demand_Data$Price, Market_Demand = rowSums(Demand_Data[2:11]))</span><span id="5bd5" class="na me it no b gy nw nt l nu nv"># Add Elasticity zones<br/># 10-6.5 zone 1<br/># 6-4 zone 2<br/># 3.5-2 zone 3<br/># 1.5-0 zone 4<br/>Market_Demand$Elasticity_Zone &lt;- as.character(c(1,1,1,1,1,1,1,1,2,2,2,2,2,3,3,3,3,4,4,4,4))</span><span id="45b7" class="na me it no b gy nw nt l nu nv"># Supply second</span><span id="bade" class="na me it no b gy nw nt l nu nv"># Wrangle the data into a ggplot friendly structure<br/>Wrangled_Supply_Data &lt;- data.frame(Price = Supply_Data$Price, stack(Supply_Data[2:11]))<br/>names(Wrangled_Supply_Data)[2] &lt;- "Quantity"<br/>names(Wrangled_Supply_Data)[3] &lt;- "Qs_num"</span><span id="9e2a" class="na me it no b gy nw nt l nu nv"># Create market supply<br/>Market_Supply &lt;- data.frame(Price = Supply_Data$Price, Market_Supply = rowSums(Supply_Data[2:11]))</span><span id="a226" class="na me it no b gy nw nt l nu nv"># Add Elasticity zones<br/># 10-5.5 zone 1<br/># 5-4 zone 2<br/># 3.5-0 zone 3<br/>Market_Supply$Elasticity_Zone &lt;- as.character(c(1,1,1,1,1,1,1,1,1,1,2,2,2,3,3,3,3,3,3,3,3))</span></pre><h2 id="997a" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">绘制均衡图</h2><p id="1c2a" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">现在我们赶上了，让我们画出均衡图。</p><p id="06e1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为此，我们将再次使用ggplot。这一次有一点不同的是，代码将从第一行开始，然后一次添加一行来构建图形，而不是先将所有内容合并在一起，然后尝试用困难的方式来完成。</p><p id="480d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码的<em class="nm"> geom_line() </em>部分将声明我们使用的数据、美学，并分配几个其他样式参数。为了让它看起来更好，这段代码添加了垂直线和水平线来勾勒出轴的轮廓。我还决定用<em class="nm"> xlim() </em>函数限制数据范围，因为我们实际上不会对太靠右的数据做任何事情。最后，应用一些标签。</p><p id="4612" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="69c8" class="na me it no b gy ns nt l nu nv"># Plot the equilibrium<br/>ggplot() +<br/>  geom_line(data = Market_Supply, aes(x = Market_Supply, y = Price), color = "darkred", size = 1) +<br/>  geom_line(data = Market_Demand, aes(x = Market_Demand, y = Price), color = "steelblue", size = 1) +<br/>  geom_vline(xintercept = 0) +<br/>  geom_hline(yintercept = 0) +<br/>  xlim(0, 1150) +<br/>  ggtitle("Market Equlibrium") +<br/>  theme(plot.title = element_text(hjust = 0.5)) + <br/>  xlab("Quantity") +<br/>  ylab("Price")</span></pre><p id="8e5b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nz"><img src="../Images/8e53f3e0325bb8add23153fb7246caa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MC9i4usqvs_gAHWs8MijUQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中平衡图的屏幕截图</p></figure><p id="2fe2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">嗯，成功了！</p><p id="20f5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在经济学中，运行良好的市场在需求数量等于供给数量的平衡点上运行[2]。这通常也被称为<em class="nm">市场清算价格</em>，因为所有生产的数量都是需求[2]。换句话说，没有短缺，也没有过剩[2]。</p><p id="c48a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">目测一下上面的图，看起来我们有一个大约6美元的市场清算价格和大约200个单位的平衡数量。</p><p id="b060" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们确认一下这些数字，再精确一点。</p><h2 id="62d1" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">找出均衡数量和市场清算价格</h2><p id="4d49" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">首先，我要说的是，我们可能至少有十几种方法可以做到这一点。为了简单起见，并使本文的范围易于理解，我们将避免使用微积分，并采用一种“对谁来说足够好”的方法，这种方法无论如何都会产生几乎相同的答案。</p><blockquote class="oa ob oc"><p id="93ca" class="la lb nm lc b ld le ju lf lg lh jx li od lk ll lm oe lo lp lq of ls lt lu lv im bi translated">无关注意:短语“对谁来说足够好”是引用自一个承包商的话，当我还是个孩子的时候，他为我的房子工作。这是一个小问题，但据我所知，房子仍然是完整的！</p></blockquote><p id="f04d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">无论哪种方式，我们都将采用这种心态。</p><p id="5e89" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们将从将需求和供应数据连接到一个对象开始。我是使用<em class="nm"> inner_join() </em>函数和通过<em class="nm"> Price </em>加入的粉丝，因为它简单。它还能确保一切正常。由于我们在每个数据集中有一个相同行数的公共列，<em class="nm"> inner_join() </em>基本上充当一个“拉链”函数，将数据集组合成一个干净的产品[1]。</p><p id="a915" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="7b5a" class="na me it no b gy ns nt l nu nv"># Join data together<br/>Merged_data &lt;- inner_join(Market_Demand, Market_Supply, by = "Price")<br/>head(Merged_data)</span></pre><p id="699d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi og"><img src="../Images/936032c3909a9e91b57f9121840ec176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9Y4K7n-DkCRRSVx_FuIZw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">在Mac上合并RStudio中的需求和供应数据的<em class="ki"> inner_join()函数的屏幕截图</em></p></figure><p id="7c83" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">接下来，让我们找出供给数量和需求数量之间的差异最小的地方。我们知道它们因为图形而相交，所以对应于最小差异的价格应该是我们的市场出清价格[2]。</p><p id="c7f0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="1a13" class="na me it no b gy ns nt l nu nv"># Find difference between supply and demand<br/>Merged_data$Diff &lt;- Merged_data$Market_Supply - Merged_data$Market_Demand<br/>Merged_data</span></pre><p id="f14e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oh"><img src="../Images/091546b3d34fd5305b3d081570485993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWB0ze0JgYW6acANd3ePXw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中带有数量差异栏的合并数据的屏幕截图</p></figure><p id="860c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">只要看一下图表，我们就可以知道，在6美元的价格下，我们看到的最小差异是8个单位。然而，如果我们有更多的数据，并且很难直观地分辨，会发生什么呢？</p><p id="9f15" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以使用<em class="nm"> which.min() </em>函数的组合来找到我们想要的最小值，在本例中是<em class="nm"> Diff </em>，并使用<em class="nm"> abs() </em>函数来获得<em class="nm">Diff</em>【1】的绝对值。绝对值函数是必要的，因为它不是像我们想要的那样给我们一个最小的差值，而是一个最大的负数，这不是我们想要的。函数末尾的逗号指定我们需要整行[1]。对于加分，试着去掉它，看看有什么不同。</p><p id="f880" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="ef53" class="na me it no b gy ns nt l nu nv"># Find row of minimum difference<br/>min_diff_1 &lt;- Merged_data[which.min(abs(Merged_data$Diff)),]<br/>min_diff_1</span></pre><p id="47c2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi og"><img src="../Images/8aca76a69558e686f8f0e0d2792d634b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5S8bLNQieQjR80wfDH27Q.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中需求和供应差异最小的行的屏幕截图</p></figure><h2 id="8547" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">修改情节</h2><p id="41ad" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">接下来，我们将从几个方面修改前面的情节。首先，让我们更改<em class="nm"> xlim() </em>函数中的值，以便我们可以放大到更接近交叉点的位置。第二，我们可以在市场结算价格和数量上添加一些线，以便更好地可视化我们的数据。为最小差异行创建专用对象的一个优点是，我们可以在这里引用它，而不必手动输入数字或以另一种方式重复计算。</p><p id="b3c8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="6244" class="na me it no b gy ns nt l nu nv"># Add lines to previous graph based on the min_diff_1 numbers</span><span id="9568" class="na me it no b gy nw nt l nu nv"># Plot the equilibrium<br/>ggplot() +<br/>  geom_line(data = Market_Supply, aes(x = Market_Supply, y = Price), color = "darkred", size = 1) +<br/>  geom_line(data = Market_Demand, aes(x = Market_Demand, y = Price), color = "steelblue", size = 1) +<br/>  geom_vline(xintercept = 0) +<br/>  geom_hline(yintercept = 0) +<br/>  xlim(0, 300) + ### ZOOM IN A BIT ###<br/>  ggtitle("Market Equlibrium") +<br/>  theme(plot.title = element_text(hjust = 0.5)) + <br/>  xlab("Quantity") +<br/>  ylab("Price") +<br/>  ### NEW LINES ###<br/>  geom_hline(yintercept = min_diff_1$Price) +<br/>  geom_vline(xintercept = min_diff_1$Market_Demand) + <br/>  geom_vline(xintercept = min_diff_1$Market_Supply)</span></pre><p id="7256" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oi"><img src="../Images/ba17600a119c6867106f00eb9c51f97d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b7tskAmsLn-fV2VIt0q2YQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中带有市场清算价格和近似平衡数量线的平衡图的屏幕截图</p></figure><p id="0f52" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">那么，为什么有两条竖线而不是一条呢？</p><p id="b87e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">事实证明，我们的数据精度导致了一个小问题，我们没有一个完全完美的交集。我选择将两者都放在图表上，以使这一点变得明显。</p><p id="f259" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这就是说，我们应该对市场出清价格为6美元，真正的均衡数量在190年代的某个地方感觉良好[2]。</p><h2 id="7e3f" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">总收入</h2><p id="8d01" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">经济学中最直接的计算方法之一是总收入，因为它就是价格乘以单位总数[2]。当处于均衡时，它是市场清算价格和在该价格下的需求量[2]。</p><p id="b32f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对我们来说，我们将再次引用<em class="nm"> min_diff_1 </em>对象，因为它包含我们的市场清算价格和数量。在计算中，我选择用<em class="nm"> mean() </em>函数对需求和供应数据进行平均，然后乘以价格。这使我们在该市场的总收入达到1，134美元。</p><p id="77a2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="5200" class="na me it no b gy ns nt l nu nv"># Calculate total revenue<br/>total_revenue &lt;- min_diff_1$Price * mean(min_diff_1$Market_Demand, min_diff_1$Market_Supply)<br/>total_revenue</span></pre><p id="a19f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi og"><img src="../Images/dc061eb5e1e67cf963186e32f2be9754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3rKFifbTEj2dEXttMsc5w.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中按市场出清价格计算的市场总收入截图</p></figure><h2 id="a3ad" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">比较和对比结果</h2><p id="2679" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">请记住，在本系列的前两部分中，供应商希望以更高的价格销售更多的产品。</p><p id="b52b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于我们拥有的数据，当以每单位10美元的价格销售时，供应方的最大总收入是9，840美元。</p><p id="d003" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在需求方面，我们的最高总收入为1，850美元，单价为2.50美元。</p><p id="720e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当我们在真实的市场场景中结合我们的数据时，市场的妥协变得很明显。市场出清价格是商品和服务的供需双方在中间相遇的地方[2]。当然，双方都没有达到理想或理论上的最大值，但这就是市场的本质。</p><h2 id="f16f" class="na me it bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">额外材料—用线性模型预测平衡</h2><p id="2b0d" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">我们有非常接近的数据，这当然很好，但是如果我们研究一些更理论化的东西，会发生什么呢？从这篇文章和前两篇文章中我们知道，我们有不同的弹性区域。从图形上看，我们可以看到非常接近6美元的价格是正确的，但如果我们只有几个数据点，并对线的斜率有很好的猜测，会怎么样呢？</p><p id="eea5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们将借用第一篇文章中的一些代码，创建一些线性模型，看看它们在哪里相交。这里重要的是，我们的模型解释了99%以上的因变量，预测能力非常重要，因为我们在以下两个模型中的p值都非常小[1]。</p><p id="807f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">关于R平方值和p值的含义的更完整的讨论，请参考前两篇文章，因为我在这里假设当我引用这些值时，您知道我的意思。</p><p id="8939" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当我们查看我们的<em class="nm"> min_diff_1 </em>对象时，我们可以看到需求在弹性区2下降，而供应在弹性区1。考虑到这一点，我们只需要建立线性模型。</p><p id="47d3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">先说供给。</p><p id="6fd3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="4f19" class="na me it no b gy ns nt l nu nv"># Create Supply linear model</span><span id="43b6" class="na me it no b gy nw nt l nu nv"># Filter Data<br/>supply_lm_data &lt;- Market_Supply %&gt;%<br/>  filter(Elasticity_Zone == 1)</span><span id="58d3" class="na me it no b gy nw nt l nu nv"># Create linear model<br/>Supply_Zone_1_lm &lt;- lm(Market_Supply ~ Price, data = supply_lm_data)</span><span id="3689" class="na me it no b gy nw nt l nu nv"># Create and print summary<br/>summary(Supply_Zone_1_lm)</span></pre><p id="e32f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oj"><img src="../Images/d6331dcf64bededb6b0e350ca32b22c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FdIQm5k24XusVWTbNs589Q.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中1区供应数据线性模型的汇总统计屏幕截图</p></figure><p id="dc8b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">需求是下一个。</p><p id="9eb5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="b9a6" class="na me it no b gy ns nt l nu nv"># Create Demand linear model</span><span id="f0aa" class="na me it no b gy nw nt l nu nv"># Filter Data<br/>demand_lm_data &lt;- Market_Demand %&gt;%<br/>  filter(Elasticity_Zone == 2)</span><span id="fee0" class="na me it no b gy nw nt l nu nv"># Create linear model<br/>Demand_Zone_2_lm &lt;- lm(Market_Demand ~ Price, data = demand_lm_data)</span><span id="bd41" class="na me it no b gy nw nt l nu nv"># Create and print summary<br/>summary(Demand_Zone_2_lm)</span></pre><p id="5e3b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ok"><img src="../Images/b34202da9a5a889509cfbf8c8d887335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y-LHWatkGL044aoIWI0xSA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中2区需求数据线性模型的汇总统计屏幕截图</p></figure><p id="498f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">接下来，我们将创建一个快速的数字序列作为新的价格数据。我将价格从5.50美元调整到6.50美元，因为这个范围正好符合供给和需求数据的弹性区域。我们将它增加0.01美元，这样我们可以得到更精确的结果。</p><p id="b5f3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="cc0b" class="na me it no b gy ns nt l nu nv"># new price data<br/>new_price_data &lt;- data.frame(Price = seq(5.5, 6.5, by = 0.01))</span></pre><p id="0f73" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">之后，我们将使用经典的代数公式<em class="nm"> y=mx + b </em>来整合我们的新数据。这将把我们的线性模型的截距加上斜率乘以价格加到一个大数据框架中。我们也可以用<em class="nm"> round() </em>函数将这个数字四舍五入到小数点后0位，因为如果你考虑一下，出售一小部分SaaS订阅是没有多大意义的。</p><p id="02b2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="b641" class="na me it no b gy ns nt l nu nv"># Use coefficient and intercept data to fill in the blanks</span><span id="5ac4" class="na me it no b gy nw nt l nu nv"># Supply first<br/>new_price_data$supply &lt;- round(Supply_Zone_1_lm$coefficients[1] + (Supply_Zone_1_lm$coefficients[2] * new_price_data$Price), 0)</span><span id="9001" class="na me it no b gy nw nt l nu nv"># Demand next<br/>new_price_data$demand &lt;- round(Demand_Zone_2_lm$coefficients[1] + (Demand_Zone_2_lm$coefficients[2] * new_price_data$Price), 0)</span></pre><p id="99e8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最后，我们将做同样的基本减法，得到需求和供给之间的差异的<em class="nm"> Diff </em>列，就像我们之前做的那样。我们也可以检查数据，以确保它是正确的。</p><p id="add8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="3588" class="na me it no b gy ns nt l nu nv"># Find difference between supply and demand<br/>new_price_data$Diff &lt;- new_price_data$demand - new_price_data$supply</span><span id="5542" class="na me it no b gy nw nt l nu nv"># Check the data<br/>head(new_price_data)</span></pre><p id="acd6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ol"><img src="../Images/5bd6db1bacb23cbe8333a1265f90ae72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o5upY-eWAWqDhjPQItwHxA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中每个新价格的预测供应、需求和差值表的屏幕截图</p></figure><p id="18bb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">总结一下，我们将再次找到最小的绝对值差，以获得价格和数量。</p><p id="ab44" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">代码如下:</p><pre class="kk kl km kn gt nn no np nq aw nr bi"><span id="c4d0" class="na me it no b gy ns nt l nu nv"># Find row of minimum difference<br/>min_diff_2 &lt;- new_price_data[which.min(abs(new_price_data$Diff)),]<br/>min_diff_2</span></pre><p id="a3b0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以下是输出结果:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi om"><img src="../Images/584cbce2b74783c5b50c61c213ef2c3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_aW8Bo8VbK43zTTzCSAIg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Mac上RStudio中预测数据的最小绝对值差异的屏幕截图</p></figure><p id="67b1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这里的结果非常相似。预测值给出了6.02美元的市场清算价格和184或185的均衡数量，这与真实数据非常接近。</p><p id="2e18" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在商业现实中，只要把价格定为6美元，并对结果感到满意，这就是巨大的支持。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="6ee7" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="2d0d" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">读完这三篇文章后，希望你对供给、需求和均衡在经济学意义上的含义有了更好的理解。具体到这里的均衡，我们的工作更多的是图形化的，而不是数学化的，因为我们在以前的文章中做了大量的数字运算。幸运的是，我们已经为6美元的市场出清价格建立了一个坚实的案例，并且很有可能销售不到200单位的SaaS产品。在现实生活中，这些数字可能会在两个方向上有所波动，但对于从个人原始数据开始的均衡分析来说，这肯定是一个现实的结果，一直到了解一项服务的整个有效运营市场。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="579f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">参考</h1><p id="a672" class="pw-post-body-paragraph la lb it lc b ld mv ju lf lg mw jx li lj mx ll lm ln my lp lq lr mz lt lu lv im bi translated">[1] R. Kabacoff，<em class="nm"> R在行动(第二版。)</em> (2015)，纽约州谢尔特岛:曼宁出版公司。</p><p id="fb97" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">[2] F .米什金，<em class="nm">《货币经济学》，银行学，&amp;《金融市场》(第9版。)</em> (2010)，马萨诸塞州波士顿:培生教育有限公司。</p></div></div>    
</body>
</html>