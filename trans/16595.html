<html>
<head>
<title>Do EastEnders fans like Hollyoaks?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">伦敦东区的粉丝喜欢Hollyoaks吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/do-eastenders-fans-like-hollyoaks-analysis-in-r-4eed0fe3b7e?source=collection_archive---------61-----------------------#2020-11-15">https://towardsdatascience.com/do-eastenders-fans-like-hollyoaks-analysis-in-r-4eed0fe3b7e?source=collection_archive---------61-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="436f" class="pw-subtitle-paragraph jo ip iq bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">使用rtweet和VennDiagram进行简单的Twitter追随者重叠分析。</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/d66a6b53d5908c681f8f8c4d3e8b51b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kbtV2jLtVfKCmjW5"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">Joshua Hoehne 在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="91d0" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">想知道你和你最喜欢的名人有多少粉丝吗？没有吗？哦..我也没有。但是，如果你<em class="lt">真的</em>想知道，这里有一个简单的R脚本，使用rtweet和<a class="ae kw" href="https://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf" rel="noopener ugc nofollow" target="_blank"> VennDiagram </a>来找出答案。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="2cb8" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">例如，这是一个很棒的小脚本，可以用来写那些“值得拥有”的分析；分析你的品牌和竞争对手的追随者重叠，或者回答类似<em class="lt">伦敦东区的粉丝喜欢Hollyoaks吗？继续滚动查看大揭秘！</em></p><p id="3071" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">完整的脚本(下面的分步指南):</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="mb mc l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="e573" class="md me iq bd mf mg mh mi mj mk ml mm mn jx mo jy mp ka mq kb mr kd ms ke mt mu bi translated">逐步地</h1><h2 id="9035" class="mv me iq bd mf mw mx dn mj my mz dp mn lg na nb mp lk nc nd mr lo ne nf mt ng bi translated">步骤1 —运行所需的包</h2><p id="d67e" class="pw-post-body-paragraph kx ky iq kz b la nh js lc ld ni jv lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">这个脚本使用了3个包:</p><ul class=""><li id="cb27" class="nm nn iq kz b la lb ld le lg no lk np lo nq ls nr ns nt nu bi translated"><a class="ae kw" href="https://cran.r-project.org/web/packages/rtweet/rtweet.pdf" rel="noopener ugc nofollow" target="_blank"> rtweet </a> —从Twitter API收集所需的数据。</li><li id="c651" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated">Tidyverse —处理数据。</li><li id="f96b" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><a class="ae kw" href="https://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf" rel="noopener ugc nofollow" target="_blank">文迪雅图</a> —可视化数据。</li></ul><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="b85b" class="mv me iq ob b gy of og l oh oi">library(rtweet)<br/>library(tidyverse)<br/>library(VennDiagram)</span></pre><p id="9077" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当您第一次运行<a class="ae kw" href="https://cran.r-project.org/web/packages/rtweet/rtweet.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> rtweet </strong> </a>包时，R会尝试打开您的网络浏览器，以便您登录并允许访问Twitter。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="dd22" class="mv me iq bd mf mw mx dn mj my mz dp mn lg na nb mp lk nc nd mr lo ne nf mt ng bi translated">第2步—设置账户</h2><p id="ed2c" class="pw-post-body-paragraph kx ky iq kz b la nh js lc ld ni jv lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">设置你想要分析的账户，在这个例子中，我们将会看到英国的Soap Twitter账户。在下面的代码片段中，我们陈述的用户名与Twitter上显示的完全一样。我们将存储它，以便在收集数据时在函数中使用，并在稍后命名维恩图的区域时使用，以使脚本可重用。</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="90cf" class="mv me iq ob b gy of og l oh oi">a_name &lt;- “itvcorrie”<br/>b_name &lt;- “bbceastenders”<br/>c_name &lt;- “emmerdale”<br/>d_name &lt;- “Hollyoaks”</span></pre></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="955e" class="mv me iq bd mf mw mx dn mj my mz dp mn lg na nb mp lk nc nd mr lo ne nf mt ng bi translated">步骤3 —收集数据</h2><p id="d329" class="pw-post-body-paragraph kx ky iq kz b la nh js lc ld ni jv lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">接下来，我们将使用<strong class="kz ir"> rtweet </strong>包中的<strong class="kz ir"> get_followers </strong>函数来收集英国肥皂剧关注者的用户id📺推特账户。</p><p id="557e" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">以下代码片段将收集所有用户id的表数据帧，存储为a、b、c和d，供以后在维恩图中使用。</p><p id="e483" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果您正在分析拥有大量追随者的帐户，此步骤可能需要一些时间。首先，我们使用<strong class="kz ir"> lookup_users </strong>函数收集关于帐户的高级数据，并将其存储为X <em class="lt"> _lookup。</em>数据提取包含一个列，其中包含该帐户的关注者总数。</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="d08f" class="mv me iq ob b gy of og l oh oi">a_lookup &lt;- lookup_users(a_name)</span></pre><p id="e680" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，我们获取关注者的数量并存储为<strong class="kz ir"> n </strong>，这将告诉下一个函数何时停止收集，以确保我们有一个完整的数据集。如果您想对数据集进行采样，您可以对该部分应用采样函数。在没有声明<strong class="kz ir"> n </strong>的情况下，<strong class="kz ir"> get_followers </strong>函数会自动抽取一个非常大的数据样本。</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="c363" class="mv me iq ob b gy of og l oh oi">n = a_lookup$followers_count</span></pre><p id="17eb" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在收集用户id。使用<strong class="kz ir"> get_followers </strong>函数，我们可以声明感兴趣的用户名(我们在步骤2中将其存储为一个值)、我们希望收集的关注者数量(n，如上所述)以及设置为<strong class="kz ir"> TRUE的<strong class="kz ir"> retryonratelimit </strong>子句。</strong>这将确保<strong class="kz ir"> get_followers </strong>函数在达到速率限制时继续运行。<em class="lt">注意，</em>速率限制是为您的整个会话设置的，而不是为每个用户名设置的。达到速率限制和重试之间通常需要10-15分钟，所以如果您想处理大型数据集，请记住这一点。</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="b409" class="mv me iq ob b gy of og l oh oi">a &lt;- get_followers(a_name, n = n, retryonratelimit = TRUE)</span></pre><p id="66ef" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们重复这个过程来提取存储在a、b、c、d _ name下的用户名所需的所有数据，以创建4个整洁的数据集。</p><p id="441e" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在你等待这个部分运行的时候，最好把水壶放上。 ☕</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="5d69" class="mv me iq ob b gy of og l oh oi">a_lookup &lt;- lookup_users(a_name)<br/>n = a_lookup$followers_count<br/>a &lt;- get_followers(a_name, n = n, retryonratelimit = TRUE)</span><span id="774b" class="mv me iq ob b gy oj og l oh oi">b_lookup &lt;- lookup_users(b_name)<br/>n = b_lookup$followers_count<br/>b &lt;- get_followers(b_name, n = n, retryonratelimit = TRUE)</span><span id="e9a4" class="mv me iq ob b gy oj og l oh oi">c_lookup &lt;- lookup_users(c_name)<br/>n = c_lookup$followers_count<br/>c &lt;- get_followers(c_name, n = n, retryonratelimit = TRUE)</span><span id="666a" class="mv me iq ob b gy oj og l oh oi">d_lookup &lt;- lookup_users(d_name)<br/>n = d_lookup$followers_count<br/>d &lt;- get_followers(d_name, n = n, retryonratelimit = TRUE)</span></pre></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="6fde" class="mv me iq bd mf mw mx dn mj my mz dp mn lg na nb mp lk nc nd mr lo ne nf mt ng bi translated">步骤4 —可视化数据</h2><p id="8d43" class="pw-post-body-paragraph kx ky iq kz b la nh js lc ld ni jv lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">4天后，我们终于收集到了我们需要的数据😄现在是我们期待已久的时刻，视觉化！</p><p id="37c0" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们将使用<a class="ae kw" href="https://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir">文迪雅图</strong> </a>包来分析结果。</p><p id="0cba" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">下面使用的<strong class="kz ir">文氏图</strong>功能主要关注以下内容:</p><ul class=""><li id="f4ea" class="nm nn iq kz b la lb ld le lg no lk np lo nq ls nr ns nt nu bi translated"><strong class="kz ir"> x </strong> =您想要可视化的数据。这里采取了一个额外的步骤，从每个表数据框中提取用户ID数据并转换为字符值，您可以减少或扩展列表以匹配您想要分析的用户数量。</li><li id="cb37" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> category.names </strong> =步骤2中创建的值，您可以缩小或扩大列表以匹配您想要分析的用户数量。</li><li id="3771" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> filename </strong> =包含矢量输出的png文件的名称，您可以随意重命名。</li><li id="8602" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> col </strong> =每个区域周围的边框，这是灰色的，可以随意更改。</li><li id="3b7e" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir">填充</strong> =你想要的每个区域的颜色，这将遵循与<strong class="kz ir"> x </strong>和<strong class="kz ir">类别名称</strong>相同的顺序，同样，你可以减少或扩展以匹配你想要分析的用户数量。<strong class="kz ir">α</strong>和本节中的0.3，表明颜色将透明到什么程度。</li></ul><p id="6675" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">还有许多其他可用的定制，我建议浏览一下文档以获得更多样式。</p><pre class="kh ki kj kk gt oa ob oc od aw oe bi"><span id="01cf" class="mv me iq ob b gy of og l oh oi">venn.diagram(<br/> x = list(<br/>           a %&gt;% select(user_id) %&gt;% unlist(),<br/>           b %&gt;% select(user_id) %&gt;% unlist(),<br/>           c %&gt;% select(user_id) %&gt;% unlist(),<br/>           d %&gt;% select(user_id) %&gt;% unlist()<br/>          ),<br/> category.names = c(a_name,<br/>                    b_name,<br/>                    c_name,<br/>                    d_name),<br/> filename = ‘output.png’,<br/> output=TRUE,<br/> col = alpha(“#D3D3D3”,0.3),<br/> fill = c(alpha(“#581845”,0.3), <br/>          alpha(‘#FFC300’,0.3), <br/>          alpha(‘#C70039’,0.3),<br/>          alpha(‘#FF5733’,0.3))<br/> )</span></pre><p id="b627" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">完成后，您将在R Studio的文件窗格中看到输出。单击该文件，您应该会看到如下所示的内容:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ok"><img src="../Images/01953ac73d1ae6bef3d78ce9296e41ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QOWbtGzaGxLyHCzX1yXFIA.jpeg"/></div></div></figure><p id="14a2" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">那么，伦敦东区的粉丝喜欢好莱坞吗？</p><p id="4c2b" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">伦敦东区拥有<strong class="kz ir"> 2，491，993 </strong>名推特粉丝，其中:</p><ul class=""><li id="bb32" class="nm nn iq kz b la lb ld le lg no lk np lo nq ls nr ns nt nu bi translated"><strong class="kz ir"> 51.64% </strong>也跟随加冕街、</li><li id="b021" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> 35.62% </strong>也跟着艾默代尔，</li><li id="c46e" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> 7.76% </strong>也跟着和利时，</li><li id="06a8" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> 4.21% </strong>沿着加冕街、埃默代尔和霍利亚克，</li><li id="f032" class="nm nn iq kz b la nv ld nw lg nx lk ny lo nz ls nr ns nt nu bi translated"><strong class="kz ir"> 2.05% </strong>跟随just EastEnders和Hollyoaks。</li></ul><p id="c854" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">分析表明，Hollyoaks在伦敦东区粉丝的肥皂剧排行榜上排名不高……或者他们只是认为自己的推文不有趣。</p><p id="e5f7" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">你会发现什么？</p><h1 id="9c32" class="md me iq bd mf mg ol mi mj mk om mm mn jx on jy mp ka oo kb mr kd op ke mt mu bi translated">快乐分析！</h1><p id="6800" class="pw-post-body-paragraph kx ky iq kz b la nh js lc ld ni jv lf lg nj li lj lk nk lm ln lo nl lq lr ls ij bi translated">克洛伊👩🏽‍💻📈</p><p id="22f9" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Instagram: @the.numerist</p><p id="853f" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Github: chloeanalyst</p></div></div>    
</body>
</html>