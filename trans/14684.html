<html>
<head>
<title>FastAPI has Ruined Flask Forever for Me</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">FastAPI永远毁了我的烧瓶</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fastapi-has-ruined-flask-forever-for-me-73916127da?source=collection_archive---------4-----------------------#2020-10-10">https://towardsdatascience.com/fastapi-has-ruined-flask-forever-for-me-73916127da?source=collection_archive---------4-----------------------#2020-10-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="105c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么我更喜欢使用FastAPI而不是Flask</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1d9f63a1d0109ab759d37530a55a8b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du7p50wS_fIsaC_lR18qsg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">FastAPI标志—<a class="ae ky" href="https://fastapi.tiangolo.com" rel="noopener ugc nofollow" target="_blank">https://fastapi.tiangolo.com</a></p></figure><p id="da53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名数据科学家，你最喜欢的是什么？这肯定是为了获得最佳结果而进行的建模和微调。但是如果一个好的模型从来没有被使用或者从来没有被部署过，那么它又意味着什么呢？</p><p id="e766" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要产生一个机器学习模型，典型的做法是把它包装在一个REST API中，作为一个微服务来使用。创建API最广泛使用的框架之一是<a class="ae ky" href="https://flask.palletsprojects.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Flask </strong> </a>。</p><p id="4bb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Flask被广泛使用的主要原因是它的简单性。一般情况下，我们只使用API对预测进行建模，所以不需要复杂的架构(例如:<a class="ae ky" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Django </strong> </a>)。另一个原因是Flask是用Python写的，Python是一般用来做机器学习建模的语言，所以我们很熟悉。</p><p id="0f55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，如果您想要创建一个带有清晰的、静态的、经过验证的输入的REST API，那么您必须包含几个不同的包，这些包来自几个互不合作的第三方。而且你必须创建定制的代码来运行一切。</p><p id="f062" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这促使我寻找满足需求的替代方案，最终我找到了一个名为<a class="ae ky" href="https://fastapi.tiangolo.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> FastAPI </strong> </a>的框架，它成为了我最喜欢的框架。以下是我喜欢使用FastAPI的原因。</p><h2 id="ecf3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">证明文件</h2><p id="44fe" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我从FastAPI注意到的第一件事是文档。FastAPI有非常广泛的文档和丰富的例子，这使得事情变得更容易。如果你需要找一些关于FastAPI的东西，通常不需要去别的地方找。</p><p id="4fec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，FastAPI将从我们正在运行的程序中自动生成交互式API文档。这样我们就不需要编写自己创建的API文档了。众所周知，编写API文档是很烦人的，不仅因为有很多细节要处理，而且当最终用户在实现但没有匹配文档时，没有什么比这更令人沮丧的了。因此，自动生成API文档将非常有帮助</p><p id="421f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是API文档的显示示例(由<a class="ae ky" href="https://github.com/swagger-api/swagger-ui" rel="noopener ugc nofollow" target="_blank"> Swagger UI </a>提供)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/c1bb196d1ae2158f94b7ca86bdaa2b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtvk6deWUJ3UhQyBy0bdlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/docs</a></p></figure><p id="3205" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还提供了替代的自动文件(由<a class="ae ky" href="https://github.com/Rebilly/ReDoc" rel="noopener ugc nofollow" target="_blank"> ReDoc </a>提供)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/7c6b23e7d4ebb5f02d3c90954e9d0c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfpIu9UI7i2exXMgAiU0OA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://127.0.0.1:8000/redoc" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/redoc</a></p></figure><p id="f02c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了定义创建的模式，它使用了<strong class="lb iu"> Pydantic </strong>，这是另一个很棒的Python库，用于数据验证。它的目的是验证进入FastAPI的输入。如果输入/请求不正确，则将返回相应的错误代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://medium.com/@tiangolo/introducing-fastapi-fdc1206d453f" rel="noopener">https://medium . com/@ tiangolo/introducing-fastapi-FDC 1206d 453 f</a></p></figure><h2 id="90de" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">表演</h2><p id="4ec5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">顾名思义，这确实是FastAPI。根据来自<a class="ae ky" href="https://www.techempower.com/benchmarks/#section=test&amp;runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&amp;hw=ph&amp;test=query&amp;l=zijzen-7" rel="noopener ugc nofollow" target="_blank"> techempower基准</a>的数据，FastAPI在性能方面胜过所有框架。像Flask和Django这样最常用的框架落后了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl mx"><img src="../Images/4d0c383d200c3c3b4a998970072c6593.png" data-original-src="https://miro.medium.com/v2/format:webp/1*NJDSwtMVmyIlvSyYewN3BQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">框架性能— <a class="ae ky" href="https://www.techempower.com/benchmarks/#section=test&amp;runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&amp;hw=ph&amp;test=query&amp;l=zijzen-7" rel="noopener ugc nofollow" target="_blank"> techempower </a></p></figure><p id="73ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是啊，太快了。</p><h2 id="3460" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">异步的</h2><p id="1132" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Flask的缺点之一是缺乏异步I/O支持。异步对于HTTP端点非常重要，因为HTTP端点往往需要等待大量的I/O和网络聊天，这使得它成为使用异步的并发性的一个很好的候选对象。</p><p id="3910" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与Flask不同，FastAPI使用<code class="fe my mz na nb b">async</code> / <code class="fe my mz na nb b">await</code> Python关键字支持开箱即用的异步代码。FastAPI默认支持异步，这意味着我们不需要使用第三方框架来做异步。</p><p id="6013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您所要做的就是用async关键字声明端点，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">异步代码</p></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><p id="9f00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，FastAPI是一个快速的web框架，支持异步代码。此外，它还配有非常完整的文档和集成的验证系统，使其更易于使用。</p><p id="4db2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你对使用FastAPI感兴趣吗？如果你想开始使用FastAPI，这里有一些很好的资源。这里有一些你可以探索。</p><div class="nj nk gp gr nl nm"><a href="https://fastapi.tiangolo.com/tutorial/first-steps/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">第一步- FastAPI</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">最简单的FastAPI文件可能是这样的:将它复制到main.py文件中</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">fastapi.tiangolo.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa ks nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/@tiangolo/introducing-fastapi-fdc1206d453f" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd iu gy z fp nr fr fs ns fu fw is bi translated">FastAPI简介</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">FastAPI是一个现代、快速(高性能)的web框架，用于基于标准Python使用Python 3.6+构建APIs</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa ks nm"/></div></div></a></div></div></div>    
</body>
</html>