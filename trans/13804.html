<html>
<head>
<title>Are the space invaders deterministic or stochastic?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空入侵者是确定的还是随机的？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/are-the-space-invaders-deterministic-or-stochastic-595a30becae2?source=collection_archive---------24-----------------------#2020-09-22">https://towardsdatascience.com/are-the-space-invaders-deterministic-or-stochastic-595a30becae2?source=collection_archive---------24-----------------------#2020-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e3b4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对ALE和开放式人工智能体育馆注入随机性技术的探讨。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8b1af7e79f8c564bce95863e83c28165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fbfx1ZTiy9nRuHfW90evqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><h1 id="e294" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">摘要</strong></h1><p id="cf1c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">谷歌Deepmind使用街机学习环境(ALE)在49款雅达利游戏上取得了人类水平的性能。本文描述了我用来重现这种性能的方法，并讨论了Deepmind和Open AI用来在ALE中注入随机性的机制的效率。</p><h1 id="242e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">简介</strong></h1><p id="5d4f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">作为一个附带项目，我花了一些时间试图在《突围》和《太空入侵者》上实现同样的Deepmind的人类级性能。虽然我知道有许多性能更好的架构，但我的目标是使用与deep mind 2015年《自然》论文中介绍的相同的网络(<a class="ae mj" href="https://www.nature.com/articles/nature14236" rel="noopener ugc nofollow" target="_blank">通过深度强化学习进行人类级别的控制</a>)。我这样做是为了更好地理解Deepmind在童年玩一些标志性游戏时经历的挑战和表现。Deepmind经历的一个挑战是我特别感兴趣的:环境是随机的还是确定的？Deepmind和Open AI对抗过太空入侵者的确定性波吗？在本文中，我们讨论了Deepmind和Open AI在ALE中注入随机性的机制的效率。</p><p id="cb77" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">源代码可以在<a class="ae mj" href="https://github.com/NicMaq/Reinforcement-Learning" rel="noopener ugc nofollow" target="_blank">https://github.com/NicMaq/Reinforcement-Learning</a>访问</p><p id="3efa" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这个存储库包含我用来支持我的结论的代码，以及我的tensorboard运行的数据，以鼓励讨论和促进比较。</p><p id="3d74" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">此外，对于想了解我的算法如何工作的读者，我发表了<a class="ae mj" href="https://colab.research.google.com/drive/1nzH8TZ8zFth0oLwXwIXbn9OuAaJ4mVXG?usp=sharing" rel="noopener ugc nofollow" target="_blank"> Breakout解释了</a>和<a class="ae mj" href="https://colab.research.google.com/drive/1--qFcl5QuTuudC-yYcE1odKx_htui4h6?usp=sharing" rel="noopener ugc nofollow" target="_blank"> e-greedy和softmax解释了</a>。这是两个Google Colab笔记本，我在其中解释了预期的sarsa和两个策略e-greedy和softmax的实现。</p><p id="d0b6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最后，强化学习是一个令人兴奋和有前途的人工智能领域，但要知道它是被诅咒的。阅读我关于RL最佳实践的帖子<a class="ae mj" rel="noopener" target="_blank" href="/best-practices-for-reinforcement-learning-1cf8c2d77b66"/>来加速你的成功之路。</p><h1 id="5066" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">游戏分数</strong></h1><p id="e1ff" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在Deepmind的2015年《自然》论文中，我们发现了两个呈现结果的表格(扩展数据表2和扩展数据表3)。在表2中，Deepmind列出了前5000万帧中报告的最高平均剧集分数，同时对135，000帧中的每250，000帧进行评估。在表3中，他们列出了前1000万帧中报道的最高平均剧集分数。</p><p id="4bf6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我没有Deepmind的计算能力，所以我将我的结果与表3进行了比较。在前1000万帧(用于训练代理人)中，deepmind报告了《越狱》的最高平均分316.8，以及《太空入侵者》的最高平均分1088.9。</p><p id="75a5" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这家名为Open AI的公司开源了baselines，这是他们的内部努力，旨在重现强化学习算法，其性能与公布的结果相当。</p><p id="f2e3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">据我所知，baseline团队并没有在与Deepmind相同的网络上发布结果。我们能找到的最接近的是用双q学习训练的网络，正如它的名字所示，它是对q学习的改进。尽管如此，通读这些报告并检查我的结果是否具有可比性还是很有趣的。因此，如果Open AI使用与Deepmind相同的方法，特别是跳过4帧，他们在前1000万帧中获得的分数在360到410之间(参见<a class="ae mj" href="https://github.com/openai/baselines-results/blob/master/dqn_results.ipynb" rel="noopener ugc nofollow" target="_blank">基线DQN结果</a>)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/5fd40cd9fc0fce55f6a4b1d4756453a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1SMB0g0s71IkbfhU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图自【https://openai.com/blog/openai-baselines-dqn/ T2】</p></figure><p id="ba1d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最后，<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>报道的《太空入侵者》DQN的得分是673。</p><p id="e201" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我使用的方法将在后面的章节中详细讨论。我试图严格遵循Deepmind的方法论。下面是我用几乎相同的评估程序得到的《突围》和《太空入侵者》的结果。我在GitHub中提交了我的Tensorflow运行:</p><p id="036b" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">突围(跑20200902182427)——我的最好成绩是427</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/5fc1c886e620328067cd874763748c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/1*rzD4850AlldAzR5A7FvjcA.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="c3d6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">太空入侵者(Run 20200910151832)——我的最好成绩是1085</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/03db28d21ca10bc56c8e8a26a54b1211.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/1*8V7FhDSln62ay2aOCNTx6w.gif"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="40aa" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">恭喜你，我成功重现了Deepmind在《突围》和《太空入侵者》上的表现。</p><p id="fd38" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">但我真的有吗？</p><p id="d027" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">Deepmind的代码和我的代码之间的一个主要区别是，当我使用OpenAI Gym时，Deepmind直接使用ALE。当然，最大的不同是我们如何在游戏中注入随机性。</p><p id="f834" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">ALE是确定性的，因此OpenAI Gym实现了不同的技术在游戏中注入随机性。我们来讨论一下哪些技术最接近Deepmind的方法论，以及它们的效率。</p><h1 id="9ca6" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">ALE和OpenAI健身房的确定性和随机性。</h1><p id="7aa5" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">虽然在2013年ALE的第一篇论文中没有提到决定论。在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 </a>中写道，ALE的一个主要担忧是“在几乎所有的游戏中，Stella本身的动态是由代理的行为决定的。”</p><p id="254e" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">最初的Atari 2600控制台没有生成随机数的功能。因此，ALE也是完全确定的。因此，通过简单地记住一系列好的行动，而不是学习做出好的决定，是有可能获得高分的。这种方法在ALE之外不太可能成功。环境的随机性是鼓励RL算法的鲁棒性以及它们转移到其他任务的能力的关键因素。</p><p id="4ddb" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">人们已经开发了各种方法来为ALE动力学添加各种形式的随机性(通常是在比Deepmind论文发表日期更晚的日期)。在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>中我们可以发现:</p><ol class=""><li id="d417" class="mr ms iq lp b lq mk lt ml lw mt ma mu me mv mi mw mx my mz bi translated">粘性动作</li><li id="30be" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">随机帧跳过</li><li id="d7ed" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">初始无操作</li><li id="c46d" class="mr ms iq lp b lq na lt nb lw nc ma nd me ne mi mw mx my mz bi translated">随机动作噪声</li></ol><p id="3b53" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">Google deepmind使用固定的4跳帧，最多30次初始无操作，以及随机动作噪声。</p><p id="9ff3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">ALE是决定性的。我们可以在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a> <em class="nf"> </em>中读到<em class="nf"> </em>“给定一个状态s和一个操纵杆输入a存在唯一的下一个状态s0，即p(s0 | s；a) = 1。”所以，如果在游戏的每一步只有一个可能的结果，我们应该总是用相同的网络和相同的初始状态获得相同的分数。</p><p id="6a49" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在下面的段落中，我们将研究我们获得的分数的方差，以评估不同方法增加的随机性水平。我们也将通过观察结果的分布来支持我们的结论。</p><h2 id="03ee" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated"><strong class="ak">粘性动作的随机性</strong></h2><p id="aaf2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>中，Machado，Bellemare &amp; al。，推荐粘性动作来加强随机性。粘性动作增加了代理动作的粘性。在每一步，环境要么执行先前的动作，要么执行新代理的动作。</p><p id="0a5f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">“我们提出的解决方案sticky actions利用了其他方法的一些主要优点，而没有它们的大部分缺点。它不受研究者偏见的影响，不干扰代理人的行为选择，并且不鼓励代理人依赖记忆。新环境在整个事件中是随机的，生成的结果是可重复的。”</p><p id="6c75" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们进行了两个实验来学习如何区分随机环境和确定性环境。我们的确定性环境是BreakoutNoFrameskip-v4。我们可以在Open AI的源代码中读到这种环境:“<em class="nf">无跳帧。(雅达利没有熵源，所以这些是确定性环境)”。</em>我们的随机环境是带粘性动作的breakout noframeskip-v4(breakout noframeskip-v 0)。</p><p id="67ea" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在左下方，我们可以看到确定性环境下的结果分布，在右侧，我们可以看到随机环境下的结果分布。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/a2b611d750e5a6cca730412bbb97b6d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x11juVmho30hhBLDxw4_2A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="5513" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">正如所料，对于决定论者的环境，我们有一个非常窄的结果分布，而对于随机环境，我们有一个更宽的分布。</p><p id="7d07" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">查看两种环境的结果直方图也非常有趣:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/f3421b02fe9d69ce2dca2bf2ad7a5fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_UhOR87rFp09qOx7P_8j0g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="e961" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们可以在左边看到，在评估阶段的100场比赛中，我们都取得了相同的分数。在右边，粘性动作增加的随机性导致代理人获得不同的分数。</p><p id="af6f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">为了测量分布，我们可以计算结果的方差。下面是确定性环境和随机环境的方差比较。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/719ee8eb6cbef8a0071371d3a810a83e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXpB_PgP3BIqbTNLADdY6A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="fa0f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">对于确定性环境，结果的方差始终为零，而对于随机环境，方差大于零。</p><p id="3648" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">让我们将这些初步结果与其他技术的分布和方差进行比较。</p><h2 id="b944" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated"><strong class="ak">跳绳</strong></h2><p id="c951" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">跳帧包括重复由代理决定的最后一个动作，重复次数为随机的n个连续帧。代理在n+1帧中只看到1。</p><p id="7ec3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在Open AI Gym中，跳帧可以跳过任意数量(2、3或4)的帧。跳过固定帧数的环境是{ }确定性v4和{ }确定性v0环境。跳过随机数量的帧的环境是{}-v4和{}-v0环境。</p><p id="9241" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">Deepmind用的是固定跳帧。我们将使用BreakoutDeterministic-v4。</p><p id="7c7c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">下面是左边的BreakoutNoFrameskip-v4和右边的BreakoutDeterministic-v4的结果分布对比。BreakoutDeterministic-v4与BreakoutNoFrameSkipV4(确定性)是相同的环境，但是增加了一个固定的跳帧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/b3f40531db701e55231d1ab3aba44614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ME6ezCnUQr9AanAGDUGmQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="3fd0" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这两种分布非常相似。对于BreakoutDeterministic-v4，我们获得了确定性环境的分布。</p><p id="b5de" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果我们计算两个实验的方差，所有的值都等于零。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/504e90c78c6df9bfeb76777c21cfe289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_rSBVl7bi4Mh-K50MR_PQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="8589" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>中，Bellmare和al关于随机跳帧技术的结论是“除了注入随机性，跳帧导致了更简单的强化学习问题，并加快了执行速度。”</p><p id="0c2d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">根据我们的实验，固定框架技术不会注入随机性，但明显简化了学习问题并加快了收敛速度(见下面的分数)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/f8ebc4ac0b469919d803501af1e8de3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09_vGkqMYT2Y5w2qF5GDSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="b608" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">下面是我的一个breakout-v4实验的分布图，它使用了随机跳帧技术。我们清楚地看到，这种分布类似于我们的随机环境。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/3e9ad9201ab64f1e1691e6dd2f5c908d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bTFnuhhtxhnrFmVt8z8Eg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="7e5e" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">随机跳帧技术增加了随机性，但也增加了复杂性。我们可以在<a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>中读到:“贴现也必须更谨慎地对待，因为这使得有效贴现因子是随机的。”</p><p id="c5e6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我的代码没有考虑时间失真。在时差强化学习方法中扭曲时间肯定是具有挑战性的。</p><p id="e19b" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">因为它简化了学习问题并加快了收敛速度，所以在本文的剩余部分，我们将使用BreakoutDeterministic-v4作为我们的确定性环境。</p><h2 id="40b0" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated"><strong class="ak">初始无操作</strong></h2><p id="c317" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Deepmind使用的另一项技术是通过执行k个无操作动作(k=30)来改变初始状态。这个技术不是Open AI Gym实现的。</p><p id="ead5" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我的无操作突围实现通过在发送“开火”动作之前随机移动飞船来鼓励初始状态的多样性(对于随机数k，我选择“右”或“左”动作)。</p><p id="52c5" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">左边可以看到我们确定性环境的结果分布(BreakoutDeterministic-v4)右边是代理执行k个无操作动作时的结果分布(k &lt; 0).</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/d4946599b8c52a395cbf3199de45deab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6WC8Jrbwio3otEdX-P5zg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Graph by author</p></figure><p id="c640" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">The comparison between the two charts is interesting. While we don’t have the same pattern as a deterministic environment, the spread is definitely narrower than the spread of a deterministic environment.</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/dbc5cf47b4163e5b3eb6b06dd3db1400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfGOuenZ4oU9taNKGl9ZFA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Graph by author</p></figure><p id="9223" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">The number of distinct results is increased but remains lower than in a stochastic environment.</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/04359883e7b59adf3406acc165f15e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OCOLbnTIPF_VwXf2jdAukg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Graph by author</p></figure><p id="fba0" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">When studying the variance, we can notice that the environment presents signs of a deterministic environment. The variance is close to zero for a few evaluation phases and significantly lower than the variance of our deterministic environment. The technique no-ops injects little stochasticity. It is less efficient than other techniques.</p><p id="f886" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">This confirms what Machado et al state in the <a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a>:“环境在起始状态的选择之外保持确定性。”</p><h2 id="444a" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated"><strong class="ak">随机动作噪音</strong></h2><p id="4bff" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">最后，我们将观察随机动作噪声的效率。一个随机动作噪声是保持一个小概率用一个随机动作替换代理的选择动作。Deepmind用的就是这个技术。在评估阶段，他们保持5%的概率来执行随机动作。</p><p id="8b17" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">左边是ε= 0的BreakoutDeterministic-v4，右边是ε= 0.05的BreakoutDeterministic-v4。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/cf9055f99a083b7fe8f0a0e74ff26682.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFqUTdJ04c9wXehbScygaA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="39c9" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们可以观察到，保持ε非nul显然注入了随机性。得到的结果非常接近我们用BreakoutNoFrameskip-v0得到的结果。在下图中，我们还可以看到，在前2000万帧中，方差在增加。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/f2d8f9d2b6d16303270ffc0e10c02e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iInbCdo0Wil8VqFwlaJ3KQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="d8a3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">用随机动作噪声注入随机性显然是有效的。尽管它有一个重要的缺点，因为它会影响策略并降低性能。</p><p id="82ec" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这支持了贝尔马尔和艾尔。在2017年ALE论文中写道:“随机行动噪音可能会显著干扰代理人的政策”。</p><h2 id="0e7b" class="ng kw iq bd kx nh ni dn lb nj nk dp lf lw nl nm lh ma nn no lj me np nq ll nr bi translated"><strong class="ak">太空入侵者</strong></h2><p id="eb62" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">让我们验证一下我们之前关于太空入侵者的结论。</p><p id="a702" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><strong class="lp ir">确定性与随机性</strong></p><p id="32e7" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">首先，让我们验证我们在SpaceInvadersDeterministic-v4(确定性的)和SpaceInvadersDeterministic-v0(随机的)之间有相同的区别。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/5dfbd8a500380fd649ab4b08b1b77b81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oiz0zHosGDDZtomSB5ln8A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/9b6b0cbf3102e0ac6892d2e15710d363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R02rpn_tefOfesVdXXzDkg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="12f4" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们在这两种分布上观察到与突破相同的模式。此外，对于确定性环境，分布的方差为零，而对于随机环境，分布的方差非零。</p><p id="e64d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><strong class="lp ir">初始无操作</strong></p><p id="6a68" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">对于突破来说，最初的不作为并没有注入随机性。</p><p id="d790" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">让我们比较一下SpaceInvadersDeterministic-v4和SpaceInvadersDeterministic-v4与no-ops (k=30)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/25b4e229a1c3b07c40fb9f09fe5f59bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V06qFeKe1nxWBdpKAjPKkQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/9c67b31c3d67d9f56545888d9a78bde9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdeOv6Wd5TP9NOXAKWQvDA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/e9958043640c8aaf770226ffec07bbfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYLgZpgWaeSeug4N27EztQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="9639" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们可以说，不带任何操作的SpaceInvadersDeterministic-v4的行为与Breakout相同。它显示了决定性行为的迹象。我们得到了一个显著低于随机环境的方差。</p><p id="2f87" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><strong class="lp ir">随机动作噪音</strong></p><p id="b3ff" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">让我们比较一下SpaceInvadersDeterministic-v4(左)和带有随机动作噪声的SpaceInvadersDeterministic-v4(右)。</p><p id="828f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">下面的两个分布清楚地证实了将ε保持为非零值会引入随机性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/5337be0f3540249d7dcf8ce27fd3afe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZES7kZ_FoDEn-mrRSSZjrA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><p id="23a2" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">而且，方差几乎和我们随机环境的方差一样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/ab758dfc65d0eb6f65b9aec9e4a4c791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1t8FWCXKmmf8mmwnaZrptw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按作者分类的图表</p></figure><h1 id="b3a2" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">结论</strong></h1><p id="e19d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在本文中，我们证明了在ALE中注入一定程度的随机性有不同的有效方法。然而，有些方法会带来不良的副作用:随机的帧跳跃会扭曲时间；最初的无操作表现出决定论的迹象，有时对游戏没有影响；随机行为噪声惩罚行为策略。</p><p id="48da" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这证实了Machado，Bellemare等人的结论。谁写的:<em class="nf">“</em>我们的建议是使用粘性动作，最终提出粘性动作作为标准的培训和评估协议。”</p><p id="bc57" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">因此，当我在开放式人工智能健身房训练时，我倾向于使用{ }确定性-v0，我们有很好的随机性，没有时间失真。</p><p id="6403" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">重要的是要注意，如果你正在训练一个RL算法，检查你分数的分布是否有决定论的迹象总是令人感兴趣的。</p><p id="969d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">现在，要回答关于Deepmind战胜确定性太空入侵者的问题，我会说他们使用了两种方法来注入随机性(初始无操作和随机动作噪音)。</p><p id="4872" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">使用这两种方法似乎有些过分，因为随机动作噪声足以确保随机性。也许，Deepmind开始了他们的无操作实验，并注意到他们在一些游戏中过度适应。不清楚，只有Deepmind能说。</p><p id="e63b" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">尽管很难理解基线方法，但从<a class="ae mj" href="https://github.com/openai/baselines-results/blob/master/dqn_results.ipynb" rel="noopener ugc nofollow" target="_blank">结果</a>中可以清楚地看出，他们增加了无操作。不清楚他们是否使用了随机动作噪音。使用无操作是否足以在游戏中增加足够的随机性来防止过度拟合？</p><p id="5445" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">当使用随机突破环境时，我与Deepmind处于相同的性能范围。当转换到具有相同超参数的太空入侵者时，我的结果明显更低。也许这与方法论的差异有关，或者仍然需要对超参数进行一些微调，以便在其他游戏中获得良好的性能。</p><p id="5254" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我希望您喜欢看到确定性环境和随机环境之间的差异！并且，我希望这篇文章能加速你的人际网络在其他任务上的转移，帮助你走向成功。</p><h1 id="0549" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">参考文献</strong></h1><p id="710c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><a class="ae mj" href="https://www.nature.com/articles/nature14236" rel="noopener ugc nofollow" target="_blank"> Deepmind的2015年自然论文</a></p><p id="e679" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">Mnih，v .，Kavukcuoglu，k .，Silver，D. <em class="nf">等</em>通过深度强化学习的人级控制。<em class="nf">性质</em> 518，529–533(2015)。</p><p id="5507" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://arxiv.org/abs/1207.4708" rel="noopener ugc nofollow" target="_blank"> 2013年ALE论文</a></p><p id="1333" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">M. G .贝勒马尔、y .纳德夫、j .维内斯和m .鲍林。街机学习环境:通用代理的评估平台，人工智能研究杂志，第47卷，第253-279页，2013年。</p><p id="4f02" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://arxiv.org/abs/1709.06009" rel="noopener ugc nofollow" target="_blank"> 2017 ALE论文</a></p><p id="f69d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">M. C. Machado，M. G. Bellemare，E. Talvitie，J. Veness，M. J. Hausknecht，M. Bowling。重温街机学习环境:通用代理的评估协议和开放问题，人工智能研究杂志，第61卷，第523-562页，2018年。</p><h1 id="206a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated"><strong class="ak">方法和超参数</strong></h1><p id="9f71" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><a class="ae mj" href="https://docs.google.com/document/d/e/2PACX-1vQVP3qsMYCQrchrfmr2zznL_lFt-bHGgbolr40VxdMKab3k3ksDapX7b_XqjZXmnXuZTVOhqR_QJy_n/pub" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir">方法和超参数</strong> </a></p></div></div>    
</body>
</html>