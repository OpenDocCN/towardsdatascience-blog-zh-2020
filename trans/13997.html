<html>
<head>
<title>Data Visualization with Leaflet Using R: Tutorial for the Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R的数据可视化手册:初学者教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-with-leaflet-using-r-eea044c0c328?source=collection_archive---------25-----------------------#2020-09-26">https://towardsdatascience.com/data-visualization-with-leaflet-using-r-eea044c0c328?source=collection_archive---------25-----------------------#2020-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/467a9d9c4c04bb9508c21b733bffa491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kF2JnL_1nzjPDgDW"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@kelsoknight?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯尔西·奈特</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="ee1e" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">动手教程</a></h2><div class=""/><div class=""><h2 id="7c06" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">以更互动的方式创建我们的数据可视化</h2></div><h2 id="67a7" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">目录(仅适用于web)</h2><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="1c1d" class="lh li jj mh b gy ml mm l mn mo">1 <a class="ae jg" rel="noopener" target="_blank" href="/data-visualization-with-leaflet-using-r-eea044c0c328#f65e">What’s leaflet?</a><br/>2 <a class="ae jg" href="#b0ea" rel="noopener ugc nofollow">Interaction Features</a><br/>3 <a class="ae jg" href="#69bd" rel="noopener ugc nofollow">Prerequisites</a><br/>4 <a class="ae jg" href="#7752" rel="noopener ugc nofollow">Let’s Create the Data Viz</a><br/>5 <a class="ae jg" href="#7432" rel="noopener ugc nofollow">Recap</a><br/>6 <a class="ae jg" href="#5cd8" rel="noopener ugc nofollow">Conclusion</a><br/>7 <a class="ae jg" href="#150f" rel="noopener ugc nofollow">References</a></span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="f65e" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">传单是什么？</h2><p id="beb7" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi np translated">he leaflet是一个开源库，可以轻松地实现空间数据可视化。因为它是一个开源库，并集成到任何平台和编程语言中，所以它目前成为世界上最流行的地图库。从历史上看，这份传单是由<strong class="my jt"> Vladimir Agafonkin </strong>于2011年首次开发的。</p><h2 id="b0ea" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">先决条件</h2><p id="f9d7" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">在我们开始构建可视化之前，确保我们满足以下要求。</p><ul class=""><li id="af0f" class="ny nz jj my b mz oa nc ob lq oc lu od ly oe no of og oh oi bi translated">有几个库的R编程语言，如<code class="fe oj ok ol mh b"><strong class="my jt">leaflet</strong></code>、<code class="fe oj ok ol mh b"><strong class="my jt">leaflet.extras</strong></code>、<code class="fe oj ok ol mh b"><strong class="my jt">dplyr</strong></code></li><li id="732e" class="ny nz jj my b mz om nc on lq oo lu op ly oq no of og oh oi bi translated">数据由位置点(纬度和经度)和附加信息组成。您可以在这里 轻松下载样本数据<a class="ae jg" href="https://audhiaprilliant.github.io/assets/docs/Location%20Data.txt" rel="noopener ugc nofollow" target="_blank"> <strong class="my jt"/></a></li><li id="ec30" class="ny nz jj my b mz om nc on lq oo lu op ly oq no of og oh oi bi translated">良好的互联网连接</li></ul><h2 id="7752" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">让我们创建数据，即</h2><p id="0b50" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">用R构建一个脚本来创建传单地图非常简单。但是，如果我们想建立一个交互式的美丽的地图，当然，一些脚本必须添加。下面的脚本将创建我们的简单地图(实际上这很酷)。为什么？因为我们已经给我们的标记添加了一些信息，如<em class="or">地点的名称、地址、经度、纬度、主管、</em>和<em class="or">学生的姓名</em>，而不是只有标记。单击标记后，该信息将通过弹出窗口显示。</p><pre class="mc md me mf gt mg mh os bn ot ou bi"><span id="e48b" class="ov li jj mh b be ow ox l oy mo">leaflet(data.location) %&gt;%<br/>  addProviderTiles(providers$OpenStreetMap) %&gt;%<br/>  addMarkers(lng = ~long,<br/>             lat = ~lat,<br/>             popup = paste(paste('&lt;b&gt;Office:&lt;/b&gt;',<br/>                                 data.location$place),<br/>                           paste('&lt;b&gt;Address:&lt;/b&gt;',<br/>                                 data.location$address),<br/>                           paste('&lt;b&gt;Lat:&lt;/b&gt;',<br/>                                 data.location$lat),<br/>                           paste('&lt;b&gt;Long:&lt;/b&gt;',<br/>                                 data.location$long),<br/>                           paste('&lt;b&gt;Supervisor:&lt;/b&gt;',<br/>                                 data.location$supervisor),<br/>                           data.location$student1,<br/>                           data.location$student2,<br/>                           data.location$student3,<br/>                           sep = '&lt;br/&gt;'),<br/>             label = ~place,<br/>             group = 'data.location')</span></pre><p id="dc9b" class="pw-post-body-paragraph mw mx jj my b mz oa kt nb nc ob kw ne lq oz ng nh lu pa nj nk ly pb nm nn no im bi translated">好的，让我们在地图上添加一些特征。在放大和缩小每个位置后，最好将我们的视图重置为默认值。所以，我们可以添加一个重置地图按钮。此外，我们有一个搜索功能来简化我们的搜索，只需输入我们的位置名称，算法就会根据我们的关键字显示相关的结果。所以，只需在前一个脚本的底部添加以下脚本即可。</p><pre class="mc md me mf gt mg mh os bn ot ou bi"><span id="74ec" class="ov li jj mh b be ow ox l oy mo">addResetMapButton() %&gt;%<br/>addSearchFeatures(<br/>  targetGroups = 'data.location',<br/>  options = searchFeaturesOptions(zoom = 15,<br/>                                  openPopup = TRUE,<br/>                                  firstTipSubmit = TRUE,<br/>                                  autoCollapse = TRUE,<br/>                                  hideMarkerOnCollapse = TRUE))</span></pre><p id="bf26" class="pw-post-body-paragraph mw mx jj my b mz oa kt nb nc ob kw ne lq oz ng nh lu pa nj nk ly pb nm nn no im bi translated">好，然后，我们添加测量按钮，并突出显示它的一般信息或标题。对于measure按钮，正如它的名字一样，它将向我们显示两点或更多点之间的距离。我们可以利用这个特性来估计两个城市之间的距离。如果遇到之字形路线，可以逐点画一条直线。测量单位必须根据我们的需要来设置，例如以米为单位。最后，为了显示我们的一般信息，最好添加一个信息框。</p><pre class="mc md me mf gt mg mh os bn ot ou bi"><span id="ea68" class="ov li jj mh b be ow ox l oy mo">addMeasure(<br/>    position = 'bottomleft',<br/>    primaryLengthUnit = 'meters',<br/>    primaryAreaUnit = 'sqmeters',<br/>    activeColor = '#3D535D',<br/>    completedColor = '#7D4479') %&gt;%<br/>addControl("&lt;P&gt;&lt;b&gt;Masterpiece Statistics 53&lt;/b&gt;<br/>&lt;br/&gt;Search for offices/ industries&lt;br/&gt;in Java by name.&lt;/P&gt;",<br/>           position = 'topright')</span></pre><h2 id="7432" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">概述</h2><p id="e8a6" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">概括一下我们的脚本，我们可以正确地运行下面的脚本，瞧，我们的地图已经准备好解释并开始生产了。</p><figure class="mc md me mf gt iv"><div class="bz fp l di"><div class="pc pd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">完整版本的数据脚本，即使用传单</p></figure><p id="3c8e" class="pw-post-body-paragraph mw mx jj my b mz oa kt nb nc ob kw ne lq oz ng nh lu pa nj nk ly pb nm nn no im bi translated">我们可以看看我们的地图，如下图所示。</p><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/dcbe419d194adc6135af0f7f99b7ceb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*imxJKkNavRs-H7232A0abQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用传单的数据可视化(图片由作者提供)</p></figure><p id="e7c4" class="pw-post-body-paragraph mw mx jj my b mz oa kt nb nc ob kw ne lq oz ng nh lu pa nj nk ly pb nm nn no im bi translated">我们可以试试搜索的功能。例如，根据我们以前的代码，它将从数据中读取任何输入。</p><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pf"><img src="../Images/fc44c1a1143fe6f80a6f009d14cdf62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mcSZO0wAQAEeTr0__fwHAw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">从传单中搜索的特征(图片由作者提供)</p></figure><h2 id="5cd8" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">结论</h2><p id="6b93" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">因此，我们可以很容易地使用传单作为我们的工具来可视化的空间数据。它提供了许多功能，如搜索功能、缩放等。传单也很容易部署到HTML中。</p><h2 id="150f" class="lh li jj bd lj lk ll dn lm ln lo dp lp lq lr ls lt lu lv lw lx ly lz ma mb jp bi translated">参考</h2><p id="f36f" class="pw-post-body-paragraph mw mx jj my b mz na kt nb nc nd kw ne lq nf ng nh lu ni nj nk ly nl nm nn no im bi translated">[1]伍德拉夫，穆林斯，琼斯<a class="ae jg" href="https://maptimeboston.github.io/leaflet-intro/" rel="noopener ugc nofollow" target="_blank"> <em class="or">宣传单:制作网络地图！</em></a><em class="or"/>(2014)<a class="ae jg" href="http://maptimeboston.github.io/leaflet-intro" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="b614" class="pw-post-body-paragraph mw mx jj my b mz oa kt nb nc ob kw ne lq oz ng nh lu pa nj nk ly pb nm nn no im bi translated">[2]诉阿加丰金。<a class="ae jg" href="https://leafletjs.com/index.html" rel="noopener ugc nofollow" target="_blank"> <em class="or">宣传单:一个面向移动友好的交互式地图的开源JavaScript库</em></a>(2019)<a class="ae jg" href="https://leafletjs.com/index.html" rel="noopener ugc nofollow" target="_blank">https://leafletjs.com/index.html</a>。</p></div></div>    
</body>
</html>