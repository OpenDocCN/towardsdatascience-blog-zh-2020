<html>
<head>
<title>A Step-by-Step Introduction to Giraffle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Giraffle的逐步介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-step-by-step-introduction-to-giraffle-b23fd19d4b53?source=collection_archive---------43-----------------------#2020-11-13">https://towardsdatascience.com/a-step-by-step-introduction-to-giraffle-b23fd19d4b53?source=collection_archive---------43-----------------------#2020-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d5c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何以编程方式在TigerGraph上创建图形</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3312f48a645c239bcb37c552fe623e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYwY-UH_k54Tlicyg9LXEg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片来自<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>由<a class="ae kv" href="https://unsplash.com/@charl_durand" rel="noopener ugc nofollow" target="_blank"> Charl Durand </a>拍摄</p></figure><h1 id="4999" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么要用长颈鹿？</h1><p id="b3b3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Giraffle由Joshua Meekhof 创建，是一种在TigerGraph中以编程方式创建图形的方法。当与许多团队成员一起处理一个图表项目时，将我们的图表写在代码中会使协作更容易。此外，在协作空间中，如果有人不小心丢失了全部或部分数据，您的模式和查询都会被保存并可重用。总的来说，通过以编程方式创建图形，Giraffle可以帮助简化与TigerGraph中的图形的协作。</p><h1 id="5aa5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">开始的步骤</h1><p id="8511" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这篇博客中，我们将讨论:</p><ol class=""><li id="1409" class="mm mn iq lq b lr mo lu mp lx mq mb mr mf ms mj mt mu mv mw bi translated">在TigerGraph上创建解决方案</li><li id="6b31" class="mm mn iq lq b lr mx lu my lx mz mb na mf nb mj mt mu mv mw bi translated">设置Giraffle</li><li id="9c12" class="mm mn iq lq b lr mx lu my lx mz mb na mf nb mj mt mu mv mw bi translated">创建模式</li><li id="2afc" class="mm mn iq lq b lr mx lu my lx mz mb na mf nb mj mt mu mv mw bi translated">加载数据</li><li id="e211" class="mm mn iq lq b lr mx lu my lx mz mb na mf nb mj mt mu mv mw bi translated">创建查询</li></ol><p id="662b" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">到这篇博客结束时，你将知道足够用Giraffle创建你自己的项目！如果你遇到困难或困惑，GitHub链接在博客的最后，供你参考。</p><p id="3d50" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">另外，<a class="mk ml ep" href="https://medium.com/u/571f80cc8b69?source=post_page-----b23fd19d4b53--------------------------------" rel="noopener" target="_blank"> Jon Herke </a>创建了一个博客来帮助Giraffle入门，而<a class="mk ml ep" href="https://medium.com/u/b162eedcaf8a?source=post_page-----b23fd19d4b53--------------------------------" rel="noopener" target="_blank"> Ramki Pitchala </a>写了一个关于迁移到Giraffle的博客。我强烈建议你也去看看那些博客！</p><h1 id="2df5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">步骤1:在TigerGraph上创建一个解决方案</h1><p id="486d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，我们需要在TigerGraph上运行一个解决方案。你需要去<a class="ae kv" href="https://tgcloud.io/" rel="noopener ugc nofollow" target="_blank"> TigerGraph Cloud </a>。如果您还没有帐户，请创建一个。另一方面，请访问解决方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/b7b51c91d2c5376c7eb2a2c641dbcf88.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*KW84GJBhF0UO3tWzcPRHfQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">点击我的解决方案(图片由作者提供)</p></figure><p id="6ad8" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，点击右上角的<code class="fe ng nh ni nj b">Create Solution</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/947954d4dc82581a839b84d59ae6e629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*eWJRBVL-ogAjQGKTi6Vk-w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建解决方案</p></figure><p id="10db" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">点击第一部分的空白。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/0a6d618194fc192a59bfeb0b4fb04af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QjkgE5rh__urZWpgWnByXQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><p id="05ff" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">不要更改第二部分的任何内容，只需点击<code class="fe ng nh ni nj b">Next</code>。</p><p id="f9aa" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在第三部分中，您可以对其进行命名、标记、添加密码、创建子域以及添加描述。其中，确保你记得你的密码和子域。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/a099a6ac9dab81e4d73fee9786c39c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSR3Qzw-4gUXTjmfLGt7Dw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">键入名称、解决方案、密码、子域和描述。(图片由作者提供)</p></figure><p id="20ab" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">请注意，每个子域必须是唯一的。因此，你可能会或可能不会得到子域<code class="fe ng nh ni nj b">blog</code>。</p><p id="7499" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">单击下一步，然后提交。接下来你需要等待它，因为它可能需要几分钟来加载。加载后，通过按Solution Operations(蓝框)和start来启动您的解决方案。加载可能需要一段时间</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/1ccab5b0b058a2f42bb2be1e1c706781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqYhw6ngcnCWun4oDLZnCw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按下蓝框，开始。(图片由作者提供)</p></figure><p id="610b" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">恭喜你。现在，您的解决方案已经开始运行了！</p><h1 id="aa2c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">步骤2:设置Giraffle</h1><p id="51e3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先，确保你已经在电脑上安装了gradle。您可以使用命令<code class="fe ng nh ni nj b">gradle</code>检查您是否已经升级。然后，键入以下命令:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="f31e" class="nr kx iq nj b gy ns nt l nu nv">gradle init</span></pre><p id="048f" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在接下来的两个选项中，键入1和2。你可以给这个项目起任何你喜欢的名字。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/c8873cee460f528741e0153c3d6d445f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Ao_lFJo52nlibd5I4BB_A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">键入1(基本)，然后键入2 (Kotlin)(图片由作者提供)</p></figure><p id="6202" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">您将看到您将在目录中获得几个文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/81b362b36a1eeb461681b76ee6b8fcd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*_zFxtvtNsiX9GM1xouBYHw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">创建的文件夹(图片由作者提供)</p></figure><p id="d5ea" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">从这里，去<code class="fe ng nh ni nj b">build.gradle.kts</code>。将其更新为:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="d198" class="nr kx iq nj b gy ns nt l nu nv">import com.optum.giraffle.tasks.*<br/>import com.optum.giraffle.*<br/>plugins {<br/>    id("com.optum.giraffle") version <strong class="nj ir">"1.3.4.1"</strong><br/>    id("net.saliman.properties") version "1.5.1"<br/>}<br/>repositories {<br/>    jcenter()<br/>}</span></pre><p id="c2ae" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">请注意1.3.4.1，因为这是最新版本！没有正确的版本，您的代码可能会生成，也可能不会生成。</p><p id="51d1" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">如果<code class="fe ng nh ni nj b">gradle build</code>跑成功了，你就厉害了！接下来，在您的终端中，记住第一步中的子域，键入:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="0fb2" class="nr kx iq nj b gy ns nt l nu nv">gradle gsqlNewProject --console=plain</span></pre><p id="08a4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">按照步骤，填写子域等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/ec7f681016caf8817aa3bec2aec09213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_YsA8ecXGfAndqfQrftBw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我的图是GiraffleBlog，我的子域是blog.i.tgcloud.io。我使用默认的用户名和密码。最后，我没有使用多种环境，而是使用Kotlin。(图片由作者提供)</p></figure><p id="a742" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，我们需要创建一个证书。要生成一个，请使用以下命令:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="221e" class="nr kx iq nj b gy ns nt l nu nv">openssl s_client -connect SUBDOMAIN.i.tgcloud.io:14240 &lt; /dev/null 2&gt; /dev/null | openssl x509 -text &gt; cert.txt</span></pre><p id="8fc1" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">对我来说，应该是:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="7853" class="nr kx iq nj b gy ns nt l nu nv">openssl s_client -connect blog.i.tgcloud.io:14240 &lt; /dev/null 2&gt; /dev/null | openssl x509 -text &gt; cert.txt</span></pre><p id="1787" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">如果所有运行都没有错误，那么您已经完成了存储库的设置。现在你应该可以开始开发了！</p><h1 id="7713" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">步骤3:创建一个模式</h1><p id="d89d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您首先需要创建一个模式。一个模式就像一个地图，显示了图形将会有什么。在<code class="fe ng nh ni nj b">db_scripts/schema</code>中，创建<code class="fe ng nh ni nj b">schema.gsql</code>。</p><p id="81a5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在该文件中，我将在这里创建一个非常基本的模式:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="6903" class="nr kx iq nj b gy ns nt l nu nv">CREATE VERTEX Blog(primary_id title STRING) WITH primary_id_as_attribute="true"</span><span id="d60b" class="nr kx iq nj b gy nz nt l nu nv">CREATE VERTEX Person(primary_id name STRING) WITH primary_id_as_attribute="true"</span><span id="bc9e" class="nr kx iq nj b gy nz nt l nu nv">CREATE UNDIRECTED EDGE BLOG_CREATOR(FROM Blog, TO Person) </span><span id="f939" class="nr kx iq nj b gy nz nt l nu nv">CREATE GRAPH @graphname@(Blog, Person, BLOG_CREATOR)</span></pre><p id="5355" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">我们有两个顶点叫做Blog和Person，它们通过一条叫做“BLOG_CREATOR”的边连接在一起。</p><p id="06c3" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">将您的<code class="fe ng nh ni nj b">build.gradle.kts</code>更新为:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这是我们将要构建的构建函数的模板。</p></figure><p id="67e4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">我们来破解密码。本文档提供了供您运行的任务。例如:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="73ed" class="nr kx iq nj b gy ns nt l nu nv">register&lt;GsqlTask&gt;("createSchema") {        <br/>     scriptPath = "schema/schema.gsql" // Where the schema is<br/>     useGlobal = true <br/>     group = schemaGroup // The group the task is associated with<br/>     description = "Runs gsql to create a schema" // Description of the task<br/>}</span></pre><p id="2615" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">对于<code class="fe ng nh ni nj b">createSchema</code>，如果您以任何不同的方式命名您的模式文件，您可以更改脚本路径。然后它有一个描述和一个组。它应该可以编译，但是，为了仔细检查，您可以运行<code class="fe ng nh ni nj b">gradle tasks</code>。</p><p id="8cda" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，我们将更新我们的<code class="fe ng nh ni nj b">gradle-local.properties</code>。将文件更新为以下内容(填写您的详细信息):</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="5182" class="nr kx iq nj b gy ns nt l nu nv">gHost=SUBDOMAIN.i.tgcloud.io</span><span id="7ec3" class="nr kx iq nj b gy nz nt l nu nv">gAdminUserName=INSERT_YOUR_ADMIN_USERNAME</span><span id="964b" class="nr kx iq nj b gy nz nt l nu nv">gAdminPassword=INSERT_YOUR_ADMIN_PASSWORD</span><span id="ac1c" class="nr kx iq nj b gy nz nt l nu nv">gUserName=INSERT_YOUR_USERNAME</span><span id="fde2" class="nr kx iq nj b gy nz nt l nu nv">gPassword=INSERT_YOUR_PASSWORD</span><span id="397d" class="nr kx iq nj b gy nz nt l nu nv">gGraphName=GRAPH_NAME</span><span id="50e1" class="nr kx iq nj b gy nz nt l nu nv">gCertPath=cert.txt</span><span id="b993" class="nr kx iq nj b gy nz nt l nu nv">gHostUriType=https</span><span id="60fa" class="nr kx iq nj b gy nz nt l nu nv">gRestPort=9000</span></pre><p id="3454" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">(注意:如果您完全按照说明进行，用户名/密码的默认值是tigergraph。如果您自定义设置了用户名或密码，请将其更改为您的用户名和密码。将第一步中的子域插入gHost。gGraphName是您希望图形使用的名称。)</p><p id="3d69" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，我们将把我们的模式上传到云中。为此，请前往<a class="ae kv" href="https://tgcloud.io/app/solutions" rel="noopener ugc nofollow" target="_blank">https://tgcloud.io/app/solutions</a>。点按“应用程序”(带有四个形状的蓝色按钮)，然后点按“GraphStudio”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/be5f37e9ae747cb97dab8f2c6a25f260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWzk9CRZuzumTW4AQw4hTg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">按下应用程序按钮，然后单击GraphStudio启动它。(图片由作者提供)</p></figure><p id="1973" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">现在，回到您的终端，我们将使用我们添加的createSchema命令。键入:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="fe52" class="nr kx iq nj b gy ns nt l nu nv">gradle createSchema</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/e9004194fa97457bece56e26fc81c29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*503gS-l7aZzlfQXtXxp5sg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">您应该得到一个显示成功的输出。如果出现任何其他错误，可能是出了问题。(图片由作者提供)</p></figure><p id="f257" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">如果它工作，你的输出应该像上面一样。最后，如果您转到GraphStudio并点击Design Schema，您应该能够看到您的模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/bf0a98c96c4605e536efb9985e88c145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wksFe7oMPc227LcmrVs4XQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Graph Studio中的模式(图片由作者提供)</p></figure><p id="6420" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">恭喜你！您已经创建并加载了您的模式！</p><h1 id="82bb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">步骤4:加载数据</h1><p id="a63d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">接下来，我们将把实际数据加载到图表中。我将创建一个充满作者姓名和博客的CSV。</p><p id="9162" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在主目录下创建一个名为<code class="fe ng nh ni nj b">data</code>的文件夹(应该和<code class="fe ng nh ni nj b">db_scripts</code>在同一层，但不在里面。在<code class="fe ng nh ni nj b">data</code>文件夹中，创建<code class="fe ng nh ni nj b">data.csv</code>，并添加以下数据:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="33d9" class="nr kx iq nj b gy ns nt l nu nv">AUTHOR,TITLE</span><span id="a36d" class="nr kx iq nj b gy nz nt l nu nv">"John Smith", "Cool Things to do in Paris"</span><span id="1168" class="nr kx iq nj b gy nz nt l nu nv">"Jack Paul", "101 Best Tourist Spots"</span><span id="794d" class="nr kx iq nj b gy nz nt l nu nv">"Alice Walker", "101 Best Tourist Spots"</span><span id="5648" class="nr kx iq nj b gy nz nt l nu nv">"Blake Coles", "Lessons Learned from a Dog"</span><span id="fa48" class="nr kx iq nj b gy nz nt l nu nv">"Amelia-Rose Kim", "Cool New Places"</span><span id="b8d6" class="nr kx iq nj b gy nz nt l nu nv">"Taha Wardle", "An Awesome Guide to Awesomeness"</span><span id="2f41" class="nr kx iq nj b gy nz nt l nu nv">"Bella Bloom", "Cool Things to do in Paris"</span><span id="eb84" class="nr kx iq nj b gy nz nt l nu nv">"Nakita Talbot", "Why Learn French?"</span><span id="6c0b" class="nr kx iq nj b gy nz nt l nu nv">"Kaison Reilly", "Why Learn Spanish?"</span><span id="96c0" class="nr kx iq nj b gy nz nt l nu nv">"Philippa Palacios", "Five Habits of Successful People"</span><span id="5a80" class="nr kx iq nj b gy nz nt l nu nv">"Pawel Medrano", "101 Best Tourist Spots"</span><span id="1674" class="nr kx iq nj b gy nz nt l nu nv">"Jasper Franklin", "Cool New Places"</span><span id="7615" class="nr kx iq nj b gy nz nt l nu nv">"Abid Little", "How to Love Yourself"</span><span id="6904" class="nr kx iq nj b gy nz nt l nu nv">"John Smith", "Cool Things to do in Lorraine"</span><span id="fd22" class="nr kx iq nj b gy nz nt l nu nv">"Alice Walker", "Five Habits of Successful People"</span></pre><p id="a710" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，在<code class="fe ng nh ni nj b">db_scripts/load</code>中，创建一个名为<code class="fe ng nh ni nj b">loadData.gsql</code>的新文件。在该文件中，添加以下代码:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="d4f0" class="nr kx iq nj b gy ns nt l nu nv">drop job loadData // deletes past load job called loadData</span><span id="0bf8" class="nr kx iq nj b gy nz nt l nu nv">create loading job loadData for graph @graphname@ { // creating a load job called loadData</span><span id="a6e9" class="nr kx iq nj b gy nz nt l nu nv">    define filename f1; // set the file</span><span id="e3d5" class="nr kx iq nj b gy nz nt l nu nv">    load f1 // loads the file</span><span id="747d" class="nr kx iq nj b gy nz nt l nu nv">    to vertex Blog values($1), // loads data from the 2nd column in the CSV to the vertex Blog</span><span id="bbe5" class="nr kx iq nj b gy nz nt l nu nv">    to vertex Person values($0), // loads data from the 1st vertex to vertex Person</span><span id="6833" class="nr kx iq nj b gy nz nt l nu nv">    to edge CREATOR values($1, $0) // connects all data from the 2nd column with the data from the 1st column</span><span id="c00f" class="nr kx iq nj b gy nz nt l nu nv">    using header="false", separator=","; // Comma separator, not using headers</span><span id="9681" class="nr kx iq nj b gy nz nt l nu nv">}</span></pre><p id="0de6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">为此，我们创建了一个名为<code class="fe ng nh ni nj b">loadData</code>的加载作业。如果您想创建更多的加载作业，将其他文件添加到<code class="fe ng nh ni nj b">db_scripts/load</code>，并用您的加载作业名称替换<code class="fe ng nh ni nj b">loadData</code>。</p><p id="0d36" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，在您的<code class="fe ng nh ni nj b">build.gradle.kts</code>中，在<code class="fe ng nh ni nj b">tasks {</code>下，添加</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="ff73" class="nr kx iq nj b gy ns nt l nu nv">register&lt;GsqlTask&gt;("createLoadData"){</span><span id="b850" class="nr kx iq nj b gy nz nt l nu nv">    scriptPath = "load/loadData.gsql" // Call the file you have the load job in.</span><span id="58cf" class="nr kx iq nj b gy nz nt l nu nv">    group = loadingGroup</span><span id="1fbe" class="nr kx iq nj b gy nz nt l nu nv">    description = "Loads our data"</span><span id="69b1" class="nr kx iq nj b gy nz nt l nu nv">}</span><span id="b1b7" class="nr kx iq nj b gy nz nt l nu nv">register&lt;HttpTask&gt;("loadData") {</span><span id="a0f0" class="nr kx iq nj b gy nz nt l nu nv">    group = loadingGroup</span><span id="22b3" class="nr kx iq nj b gy nz nt l nu nv">    description = "Load data via the REST++ endpoint"</span><span id="859a" class="nr kx iq nj b gy nz nt l nu nv">    post { httpConfig -&gt;</span><span id="2052" class="nr kx iq nj b gy nz nt l nu nv">         httpConfig.request.uri.setPath("/ddl/${gGraphName}")</span><span id="d95f" class="nr kx iq nj b gy nz nt l nu nv">         httpConfig.request.uri.setQuery(</span><span id="fa0e" class="nr kx iq nj b gy nz nt l nu nv">         mapOf(</span><span id="621a" class="nr kx iq nj b gy nz nt l nu nv">         "tag" to "loadData",</span><span id="c7d8" class="nr kx iq nj b gy nz nt l nu nv">         "filename" to "f1",</span><span id="ab3f" class="nr kx iq nj b gy nz nt l nu nv">         "sep" to ",",</span><span id="4389" class="nr kx iq nj b gy nz nt l nu nv">         "eol" to "\n"</span><span id="d067" class="nr kx iq nj b gy nz nt l nu nv">        )</span><span id="b440" class="nr kx iq nj b gy nz nt l nu nv">        )</span><span id="8703" class="nr kx iq nj b gy nz nt l nu nv">        httpConfig.request.setContentType("text/csv")</span><span id="da70" class="nr kx iq nj b gy nz nt l nu nv">        val stream = File("data/data.csv").inputStream() // If your data file was called anything else, you can change the File("").</span><span id="94f4" class="nr kx iq nj b gy nz nt l nu nv">        httpConfig.request.setBody(stream)</span><span id="0ecb" class="nr kx iq nj b gy nz nt l nu nv">    }</span><span id="726e" class="nr kx iq nj b gy nz nt l nu nv">}</span></pre><p id="ecc4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">这里，我们创建两个任务:一个创建或“构建”文件，另一个将数据加载到图表中。</p><p id="44cb" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在将我们的更改加载到图表之前，我们需要生成一个秘密。进入GraphStudio并点击右上角的<code class="fe ng nh ni nj b">Admin</code>按钮。点击后，点击左侧栏中的<code class="fe ng nh ni nj b">User Management</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/80185602e8b8eb0e0324a494854eb40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MpoKDsdVrkzQ_ZAw7mMN8w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">你应该在这里结束。(图片由作者提供)</p></figure><p id="6ff0" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">最后，在标有Create Secret的框下，点击橙色的<code class="fe ng nh ni nj b">Create</code>按钮并复制密码。</p><p id="06f4" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">在<code class="fe ng nh ni nj b">gradle-local.properties</code>中，添加一个新字段:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="cecb" class="nr kx iq nj b gy ns nt l nu nv">gSecret=SECRET_YOU_COPIED</span></pre><p id="3630" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">要运行，只需:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="5cbf" class="nr kx iq nj b gy ns nt l nu nv">gradle createLoadData<br/>gradle loadData</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/32c98a7a695166bcd241f46ceb6308c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNSU-ZogJJL2RvscgQQJ_Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">您的终端输出应该如下所示。(图片由作者提供)</p></figure><p id="eb9b" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">最后可以去Graph Studio。转到<code class="fe ng nh ni nj b">Load Data</code>以确保所有东西都已装载。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/8a499c524e5975b322ae20820b1e6071.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96igulShcFcTyglDS-97iw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">注意右边顶点和边的数字。因为它们不全是0，我们的数据加载！(图片由作者提供)</p></figure><p id="9da6" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来去<code class="fe ng nh ni nj b">Explore Graph</code>看看数据。您可以选取几个顶点并双击它们，以探索与其连接的其他顶点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/5bea4d42f643ec1615c577bc6cd09d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C8AoQUNod_PEQ4yk6gHo7w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">探索图表的一些结果(图片由作者提供)</p></figure><h1 id="7b17" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">步骤5:创建查询</h1><p id="76e4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">最后，我们可以使用查询来分析数据。在<code class="fe ng nh ni nj b">db_scripts/queries</code>中，用以下内容创建一个名为<code class="fe ng nh ni nj b">selectAll.gsql</code>的文件:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="f4c2" class="nr kx iq nj b gy ns nt l nu nv">drop query selectAll</span><span id="5c98" class="nr kx iq nj b gy nz nt l nu nv">create query selectAll (STRING auth) for graph @graphname@ {</span><span id="5271" class="nr kx iq nj b gy nz nt l nu nv">     ListAccum&lt;EDGE&gt; @@edgelist;</span><span id="e0d5" class="nr kx iq nj b gy nz nt l nu nv">     People = {Person.*};</span><span id="e9cc" class="nr kx iq nj b gy nz nt l nu nv">     author = select s<br/>              FROM People:s -() -:t<br/>              where s.name == auth;</span><span id="ee0f" class="nr kx iq nj b gy nz nt l nu nv">     blogs = select c<br/>              from People:s -(BLOG_CREATOR:e) -Blog:c<br/>              where s.name == auth</span><span id="a3c5" class="nr kx iq nj b gy nz nt l nu nv">     ACCUM @@edgelist+=e;<br/>     <br/>     print author;</span><span id="c36c" class="nr kx iq nj b gy nz nt l nu nv">     print blogs;</span><span id="b6e0" class="nr kx iq nj b gy nz nt l nu nv">     PRINT @@edgelist;</span><span id="dbae" class="nr kx iq nj b gy nz nt l nu nv">}</span><span id="5090" class="nr kx iq nj b gy nz nt l nu nv">install query selectAll</span></pre><p id="6ed5" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">接下来，在与加载任务相同的区域中，您需要为<code class="fe ng nh ni nj b">build.gradle.kts</code>(在<code class="fe ng nh ni nj b">tasks</code>部分中)中的查询添加一个任务。您应该添加以下内容:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="bdb4" class="nr kx iq nj b gy ns nt l nu nv">register&lt;GsqlTask&gt;("createQuerySelectAll") {</span><span id="43a0" class="nr kx iq nj b gy nz nt l nu nv">     scriptPath = "query/selectAll.gsql"</span><span id="a093" class="nr kx iq nj b gy nz nt l nu nv">     group = queryGroup</span><span id="b7e8" class="nr kx iq nj b gy nz nt l nu nv">     description = "Creates a select all"</span><span id="c043" class="nr kx iq nj b gy nz nt l nu nv">}</span></pre><p id="0029" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">最后，要将查询推送到解决方案，运行:</p><pre class="kg kh ki kj gt nn nj no np aw nq bi"><span id="b9c8" class="nr kx iq nj b gy ns nt l nu nv">gradle createQuerySelectAll</span></pre><p id="39d2" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">转到GraphStudio，转到查询，您应该会找到selectAll。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/a9caab5152bd53f3fe8d0c205740d912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zO8HZbdu8TUmAuiHrA6_9A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">注意左上角附近的selectAll。(图片由作者提供)</p></figure><p id="3039" class="pw-post-body-paragraph lo lp iq lq b lr mo jr lt lu mp ju lw lx nc lz ma mb nd md me mf ne mh mi mj ij bi translated">您可以单击selectAll，按顶部的play按钮，然后它将运行查询并接收参数。现在，您可以运行自己的查询了！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/059fc04af91b1cb2221409da2e15ab0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqawuMvMF3c3ASpRIPoWsg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">接受查询的名称(图片由作者提供)</p></figure><h1 id="30f0" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">第六步:创建你自己的项目！</h1><p id="09f0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">恭喜你！您现在知道了如何用Giraffle以编程方式创建图形。现在，您可以开始为自己的项目建模和查询数据了。祝你好运！</p><h1 id="a6ff" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">额外资源</h1><ul class=""><li id="c08c" class="mm mn iq lq b lr ls lu lv lx of mb og mf oh mj oi mu mv mw bi translated">博客回购:<a class="ae kv" href="https://github.com/GenericP3rson/GiraffleBlog" rel="noopener ugc nofollow" target="_blank">https://github.com/GenericP3rson/GiraffleBlog</a></li><li id="1ddd" class="mm mn iq lq b lr mx lu my lx mz mb na mf nb mj oi mu mv mw bi translated">TigerGraph不和谐(如有问题):<a class="ae kv" href="https://discord.com/invite/F2c9b9v" rel="noopener ugc nofollow" target="_blank">https://discord.com/invite/F2c9b9v</a></li></ul></div></div>    
</body>
</html>