<html>
<head>
<title>Loading 3D City Models in QGIS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在QGIS中加载3D城市模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/loading-3d-city-models-in-qgis-46347a638760?source=collection_archive---------16-----------------------#2020-10-29">https://towardsdatascience.com/loading-3d-city-models-in-qgis-46347a638760?source=collection_archive---------16-----------------------#2020-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aa5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用QGIS开发CityJSON三维城市模型。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c496c970f39c9fb0271204a0f47f2175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BGnFB29YDYZVitkE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">德文·艾弗里在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="12dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在地理空间数据科学中，三维数据模型最近在研究和可视化项目中发挥了重要作用。QGIS是每个GIS极客都知道的最流行的免费开源跨平台桌面GIS应用软件之一。从QGIS的3.0版本开始，单独的界面负责点云和数字高程模型的3D数据可视化。它被称为3D地图视图，可从视图快捷菜单中访问。</p><p id="726b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，建筑物或城市模型在3D GIS项目中可视化的通常方式是通过挤压建筑物覆盖区。这将导致细节级别为-1。2020年，用于在QGIS中加载CityJSON 3D城市模型的QGIS插件已经开发完成[1]。因此，可以在更高的细节层次上可视化建筑模型。本文将通过一些例子介绍如何使用这个插件来加载CityJSON 3D城市模型。</p><h1 id="456c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">CityGML和CityJSON</h1><p id="0b79" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在3D数据世界中，3D城市模型已经用于许多应用领域，例如3D地籍、设施管理和应急响应。用于3D城市模型的最流行的数据模式之一是OGC城市GML，其是用于描述3D地理空间使能的城市模型的全球数据模型；由OGC(开放地理空间联盟)开发。然而，它是基于GML编码的，具有复杂的性质和较差的互操作性。出于这个原因，CityJSON一直被开发为一种易于使用的JavaScript对象表示法(JSON)编码，用于使用CityGML 2.0数据模型的3D城市模型。</p><p id="5daa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以查看<a class="ae ky" rel="noopener" target="_blank" href="/open-source-3d-semantical-building-models-in-2020-f47c91f6cd97">这篇文章</a>以了解可用的开源CityGML数据集。</p><h2 id="87c1" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">从CityGML = &gt;到CityJSON</h2><p id="a6f7" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">任何CityGML数据集都可以使用<strong class="lb iu"> citygml工具转换成CityJSON格式。</strong>它是一个命令行实用程序，捆绑了几个处理CityGML文件的操作。(检查此<a class="ae ky" href="https://github.com/citygml4j/citygml-tools" rel="noopener ugc nofollow" target="_blank">连杆</a>)</p><p id="de20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以使用以下命令转换您的CityGML数据:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="24e3" class="ms lw it nf b gy nj nk l nl nm"><strong class="nf iu">$ citygml-tools to-cityjson /path/to/your/CityGML.gml</strong></span></pre><h1 id="75b9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">正在QGIS中加载CityJSON</h1><h2 id="763a" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">安装QGIS和CityJSON加载器插件。</h2><p id="d6e8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你可以从<a class="ae ky" href="https://qgis.org/en/site/" rel="noopener ugc nofollow" target="_blank">这里</a>下载并安装最新版本的QGIS。然后打开插件窗口(<em class="nn"> Plugins = &gt;管理安装插件</em>)，找到CityJSON加载器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/36d77d17fb88db62096e4c96c6c36d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HG2Nxx6fRFi8j5yIYKGRWw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd np">QGIS软件中的插件窗口。</strong>(作者)</p></figure><h2 id="edc4" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">加载并可视化CityJSON</h2><p id="2c7a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">安装CityJSON加载程序后，您可以使用它来加载CityJSON文件。可以在矢量菜单<em class="nn">下找到(Vector =&gt;city JSON Loader =&gt;Load city JSON…)。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/e7f0c2026ddef577da8e76f06a2bcbec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgKQSulkwLCXESZrVYWcww.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd np">QGIS软件中的CityJSON加载器插件窗口。</strong>(作者)</p></figure><p id="c74e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您可以尝试CityJSON格式的海牙3D城市模型的这个<a class="ae ky" href="https://3d.bk.tudelft.nl/opendata/cityjson/1.0/DenHaag_01.json" rel="noopener ugc nofollow" target="_blank">数据集</a>。加载CityJSON之前，请检查元数据中的EPSG代码，并设置项目坐标参考系统(CRS)以匹配数据集的EPSG代码，从而确保正确加载数据集。</p><p id="7a1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以从QGIS窗口的右下角设置项目CRS，如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/8167a82918f5b9d21283a6307308ab56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LHheZJVymBha-lHxMHBA8g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd np">在QGIS软件中设置项目CRS。</strong>(作者)</p></figure><p id="5d48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将CityJSON加载到QGIS项目后，您可以通过打开新的3D地图视图(<em class="nn">View =&gt;New 3D Map View</em>[Ctrl+Alt+m])以3D方式对其进行可视化。下图是海牙CityJSON <a class="ae ky" href="https://3d.bk.tudelft.nl/opendata/cityjson/1.0/DenHaag_01.json" rel="noopener ugc nofollow" target="_blank">模型</a>的一个例子。[~2.9 Mb]。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/c15d1700e0dc5da8a0fa8f26846ee3c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yWj9PwW3ZWl4syDPbcC2Zg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在QGIS软件中可视化的海牙城市JSON模型。(作者)</p></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h2 id="002d" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">下一步？</h2><p id="0ef0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在探索了3D城市模型之后，将3D城市模型用于现实世界的项目有很多可能性；举个例子，</p><ul class=""><li id="fdaf" class="oa ob it lb b lc ld lf lg li oc lm od lq oe lu of og oh oi bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/web-based-3d-data-visualization-with-ciytgml-city-models-f0796b37e9f5">使用3D城市模型构建3D网络地图应用</a></li><li id="2bda" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/open-source-3d-semantical-building-models-in-2020-f47c91f6cd97">探索更多开源3D城市模型</a>。</li><li id="3fba" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/beginner-guide-to-download-the-openstreetmap-gis-data-24bbbba22a38">使用QGIS &amp; QuickOSM从OSM </a>下载开源数据。</li><li id="3928" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">或者说，你为什么不试着在Unity3D里把它和你的游戏项目融合起来呢？</li><li id="89d2" class="oa ob it lb b lc oj lf ok li ol lm om lq on lu of og oh oi bi translated">而且，多得多！</li></ul><h1 id="bbc7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="bb9a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这篇短文介绍了CityJSON3D城市模型的轻量级3D城市模型编码，展示了如何在开源GIS桌面软件QGIS中可视化这些数据模型。我希望你喜欢这篇文章，并发现它对你的日常工作或项目有用。如果您有任何问题或意见，请随时给我留言。</p><p id="fe8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae ky" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安全<strong class="lb iu">健康</strong>和<strong class="lb iu">健康</strong>！💪</p><p id="e444" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">感谢您的阅读。📚</strong></p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h2 id="4b0b" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">参考</h2><p id="0869" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">[1] Stelios Vitalis，Ken Arroyo Ohori，Jan tien Stoter:<strong class="lb iu">CityJSON in QGIS:开发一个开源插件</strong><a class="ae ky" href="https://doi.org/10.1111/tgis.12657" rel="noopener ugc nofollow" target="_blank">https://doi.org/10.1111/tgis.12657</a>(2020)。</p></div></div>    
</body>
</html>