<html>
<head>
<title>Metrics Matter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">度量很重要</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/metrics-matter-b282c20d5eab?source=collection_archive---------45-----------------------#2020-10-06">https://towardsdatascience.com/metrics-matter-b282c20d5eab?source=collection_archive---------45-----------------------#2020-10-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8b07" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">分类模型的评估标准</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9f2faac7b3a7dfeca797fdf479577567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C-OHZ__xsiJeY7fzXA0OTg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="e36a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在创建分类模型时，评估模型预测或识别实际结果的能力非常重要。对于监督分类模型，有几个标准的模型评估方法来为模型改进提供信息，它们是:</p><ul class=""><li id="812f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">准确(性)</li><li id="262c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">精确</li><li id="1f10" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">回忆</li><li id="cc9e" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">特征</li><li id="7400" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">F1分数</li><li id="a8ea" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">罗马纪元</li></ul><p id="4fd5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面，我描述了每个评估指标，并提供了一个二进制分类示例，以便于理解。</p><h1 id="b6bd" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">混淆矩阵</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/8faa0076896d8578d3031f1e7373d2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*SSVllsTHyXbGWIHJpK1Whg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">注:此矩阵中包含的数字是针对此示例制作的。它们不是基于实际的大学毕业成绩。图片作者。</p></figure><p id="3090" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建混淆矩阵始终是模型评估的第一步。混淆矩阵中包含许多指标，有助于理解模型的表现。</p><p id="4036" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">真阳性</strong>:左上角显示模型做出的正确阳性预测的数量。在本例中，该模型准确预测了3，253名学生将在入学后的六年内从大学毕业。</p><p id="0da4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="my">真阳性率:</em> TP/(TP + FN)</p><p id="8445" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">假阴性</strong>(也称为第二类错误):矩阵的右上角显示了模型做出的错误负面预测的数量。在这个例子中，模型预测这些学生不会在入学后的六年内毕业，但他们确实毕业了。</p><p id="9461" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="my">假阴性率:</em> FN/(FN + TP)</p><p id="8c6d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">假阳性</strong>(也称为I型错误):左下角说明了模型做出的假阳性预测的数量。在这种情况下，该模型错误地预测了674名学生将在入学后的六年内完成大学学业，而实际上他们并没有在六年内毕业。</p><p id="d82f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="my">假阳性率:</em> FP/(FP+TN)</p><p id="c120" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">真阴性</strong>:右下角显示模型做出的正确阴性预测。同样，使用这个例子，该模型准确地预测了296名学生将不会在入学后的六年内完成大学学业。</p><p id="adc4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="my">真阴性率:</em> TN/(TN + FP)</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="88f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于以下每个评估指标，我将继续使用大学毕业作为例子来理解如何评估模型性能。应该注意的是，下面显示的数字和图形是假设的，只是为了便于理解。在下面呈现的每张图片中，我描绘了六年后的大学毕业、大学未完成学业以及模型预测:</p><ul class=""><li id="203b" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">实际毕业</strong>:下图中的暗红色图标描绘的是六年内实际从大学毕业的人。</li><li id="5b02" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">未完成学业</strong>:下图中的浅粉色图标描绘了在大学入学六年内未完成大学学业的人数。</li><li id="bfd8" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">预测毕业</strong>:下图中的毕业帽表示模型预测某个学生将在六年内大学毕业。</li></ul><h1 id="deaa" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">准确(性)</h1><blockquote class="ng nh ni"><p id="7a90" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">在所有正面和负面的预测中，有多少是正确的？</p><p id="2d61" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">(TP + TN) / (TP + FP + TN + FN)</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/9d90da14963d2da82750dd148fe51566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_qEDdRH8aWd0YKL6PIz3Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="64bc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">模型准确性是一个简单的度量标准，它告诉我们对于每个单独的观察，模型做出了多少正确的正面和负面预测。当类别平衡时(即，当每个实现的结果在数据中被同等地表示时)，准确性可能是一个有用的度量。然而，当它们不平衡时，预测模型可以通过简单地预测主导类来容易地获得高准确度分数。在上面的例子中，通过预测所有学生不会在六年内从大学毕业，该模型可以达到80%的准确性。</p><h1 id="a3e5" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">精确</h1><blockquote class="ng nh ni"><p id="251a" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">在所有积极的预测中，有多少是正确的？</p><p id="0f15" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">TP/(TP + FP)</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/9bc1097c6118d66ca28e49ac408cbd7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5X_cQg1E6CrNwPc1sy1XQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="35ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">精度可以作为一种有用的度量，用于了解模型预测正类的能力。然而，精度不能告诉我们有多少积极的结果被错过了。如果模型预测有700名学生将在六年内从大学毕业，并且这些预测的学生中有500名确实毕业了，则模型将显示大约70%的精度分数。然而，我们不能从中看出的是，1000名学生实际上在六年内从大学毕业，而这个模型将这些学生排除在评估之外。为了更好地理解模型识别真实结果的能力，我们来看看下一个指标。</p><h1 id="4b45" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">回忆</h1><blockquote class="ng nh ni"><p id="f900" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">在所有实际的积极结果中，模型预测有多少是积极的？</p><p id="79a1" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">TP / (TP + FP)</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/4199c5ab1781e3a9917b0ce26210bb8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlegaDriEEtaGHM_JL7tSA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="d843" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">召回通常也被称为<em class="my">敏感度</em>或<em class="my">真阳性率</em>。回忆有助于我们更好地理解模型如何有效地识别积极的结果。precision告诉我们有多少预测的六年制毕业生实际毕业，recall告诉我们有多少模型准确预测的毕业生将毕业。例如，如果1000名学生毕业，并且模型正确预测其中450人将毕业，那么它的回忆分数将为45%——比精确分数差得多！因此，在评估模型性能时，精确度和召回率似乎都很重要。</p><h1 id="2ad1" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">特征</h1><blockquote class="ng nh ni"><p id="dd56" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">在所有实际的负面事件中，模型预测有多少是负面的？</p><p id="5eb7" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">TN / (TN + FP)</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/186f01b86133b607437ca101cafa55b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiDy3DCcBoW5H4V9fOvPdw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="47ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">特异性，也被称为<em class="my">真阴性率</em>，与回忆相反。回忆告诉我们模型预测积极结果的程度，而特异性告诉我们模型预测消极结果的程度。假设大约有500名学生没有真正毕业，而模型预测他们中的250人不会毕业。这将返回50%的特异性分数。在这种情况下，特别是，我们实际上可能会优先考虑特异性优化，因为我们可能更关心正确预测那些不会在六年内从大学毕业的学生，以便我们可以更好地瞄准额外的支持，以确保他们毕业。</p><h1 id="d0db" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">f1-分数</h1><blockquote class="ng nh ni"><p id="2c32" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated">精确度和召回率的调和平均值。</p><p id="e9af" class="kv kw my kx b ky kz jr la lb lc ju ld nj lf lg lh nk lj lk ll nl ln lo lp lq ij bi translated"><em class="iq"> 2 * [(召回*精度)/(召回+精度)] </em></p></blockquote><p id="88cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一般来说，F1分数是一个很好的高级指标，因为它包含了精确度和召回率。理想情况下，如果需要精确和召回之间的平衡，可以优化F1分数。例如，在预测大学毕业时，我们希望创建一个模型，该模型能够准确地预测积极的结果，并捕捉如上所述的实际积极结果的总体。当班级严重失衡时，F1分数也是一个很好的衡量标准。在优化F1分数的过程中，人们可以期望提高模型捕捉积极结果的能力。与精确度和召回率一样，F1的分数在接近1时是最优的。</p><h1 id="1cb1" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">ROC(受试者操作特征)/ AUC(曲线下面积)</h1><p id="c49d" class="pw-post-body-paragraph kv kw iq kx b ky nq jr la lb nr ju ld le ns lg lh li nt lk ll lm nu lo lp lq ij bi translated">ROC曲线显示了真阳性率(回忆/灵敏度)与假阳性率(特异性)的比较。最佳ROC曲线是ROC曲线下面积(AUC)接近1的曲线。<em class="my">这个分数可以解释为</em> <em class="my">模型对正面预测的排序高于随机负面预测的概率</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/b1863e4484b909311cdb9081363ef946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lzUL0wYLXltHJ6VFdj0Rw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片作者。</p></figure><p id="65e6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像F1分数一样，AUC作为性能的单一数字分类器是有用的，并且即使当存在高等级不平衡时也是有用的。AUC也是<strong class="kx ir">比例不变的</strong>，这意味着人们不需要缩放他们的数据来评估模型的性能。人们可以将所有特征保持在它们的原始度量中。虽然，如果为了性能而优化，扩展数据是最佳实践。</p><p id="5937" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">AUC也是<strong class="kx ir">分类阈值不变的</strong>，这意味着AUC可以用作性能的有效测量，而不管选择哪个<a class="ae nw" href="https://machinelearningmastery.com/threshold-moving-for-imbalanced-classification/" rel="noopener ugc nofollow" target="_blank">决策阈值</a>。然而，如果理解这个阈值如何影响精确度和召回率对于改进模型是必要的，F1分数可以作为模型评估的更好的度量。</p><h1 id="82c2" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">选择最佳评估指标</h1><p id="b5e1" class="pw-post-body-paragraph kv kw iq kx b ky nq jr la lb nr ju ld le ns lg lh li nt lk ll lm nu lo lp lq ij bi translated">当决定如何评估一个模型时，必须考虑他们试图回答的问题，以及他们是否愿意优先考虑他们的模型如何捕捉积极结果或他们的模型如何捕捉消极结果。在上面的例子中，我可能会基于特异性分数优化模型，因为我有兴趣预测谁<em class="my">不太可能</em>在六年内从大学毕业。或者，如果有人试图预测谁可能处于信用卡违约的风险中，他们可能会根据回忆分数或F1分数来优化他们的模型，以降低错过正面案例的可能性。在这种情况下，如何评估他们的模型取决于模型的用例。</p></div></div>    
</body>
</html>