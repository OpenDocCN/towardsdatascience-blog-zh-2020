<html>
<head>
<title>Build Shiny Dashboard with Elasticsearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Elasticsearch构建闪亮的仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-shiny-dashboard-with-elasticsearch-1723a448016f?source=collection_archive---------21-----------------------#2020-10-18">https://towardsdatascience.com/build-shiny-dashboard-with-elasticsearch-1723a448016f?source=collection_archive---------21-----------------------#2020-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0e79" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用带有弹性搜索功能的闪亮仪表板，让数据变得生动</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d6f602faff038e27fb32b7892a360969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Jb0Yk2xmRO2UfyoU"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卡伦·艾姆斯利在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4967" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在企业中，由于拥有大量的数据，可能需要处理多个数据源。当试图构建一个仪表板来展示商业想法时，通常需要集成来自NoSQL数据库、关系数据库和搜索引擎的数据。因此，像Kibana或Google Data Studio这样的仪表板并不是合适的选择，因为多数据源的灵活性有限。于是人们需要一个同样简单明了替代方案。对于这种情况，我推荐<a class="ae kv" href="https://rstudio.github.io/shinydashboard/" rel="noopener ugc nofollow" target="_blank">闪亮的仪表板</a>来完成任务，因为它满足了要求:灵活、直截了当和美观。然而，在构建仪表板时，连接Amazon Elasticsearch服务有一个直接的实现障碍，这促使我写这篇文章。</p><p id="d0c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">本文展示了如何将Elasticsearch数据集成到一个闪亮的仪表板中。</strong>使用的编程语言主要是R，用Python进行后端连接。同时，对于数据可视化部分，在R中用3个不同的绘图包绘制图形，分别是:<em class="ls"> ggplot2 </em>、<em class="ls"> plotly </em>和<em class="ls"> wordcloud2 </em>。</p><p id="b9f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文章的内容:</p><ol class=""><li id="a727" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">Elasticsearch连接(与<a class="ae kv" href="https://aws.amazon.com/elasticsearch-service/" rel="noopener ugc nofollow" target="_blank">亚马逊Elasticsearch服务</a></li><li id="69ca" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">使用r的数据操作。</li><li id="afc4" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">展示工具<a class="ae kv" href="https://rstudio.github.io/shinydashboard/" rel="noopener ugc nofollow" target="_blank">闪亮的仪表板</a>无需太多的样式定制即可将数据带入生活。</li></ol><p id="d0a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用的环境:</p><ul class=""><li id="8380" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr mh lz ma mb bi translated">r版本3.4.4</li><li id="7314" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mh lz ma mb bi translated">Python 3.7.4</li><li id="ad1f" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr mh lz ma mb bi translated">Ubuntu 18.04</li></ul><p id="d156" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Elasticsearch是企业中流行的搜索引擎。一般来说，在进行汇总统计或及时定位特定批次的大量数据<strong class="ky ir">时，我建议将其添加到数据基础设施中</strong>。对于设置，一个方便的方法是使用Amazon Elasticsearch服务，因为它只需要处理一些高级参数，如碎片数量。此外，还提供了全面的文档和示例代码，当公司已经在AWS中构建了基础设施时，没有理由不使用它。亚马逊提供了<a class="ae kv" href="https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/es-request-signing.html" rel="noopener ugc nofollow" target="_blank">样本代码</a>，这是有据可查的，但支持语言不包含R。虽然R中有各种用于Elasticsearch连接的包，但<strong class="ky ir">将其与亚马逊Web服务版本4认证(AWS4Auth)集成的方法并不直接。</strong>要构建仪表板，最关键的部分是克服这个实施障碍。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/1d5bcb46b929cf640d16961e68d29a19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xmH0XL1wz-mvn689"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@hudsoncrafted?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">王思然·哈德森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="c519" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">连接Amazon Elasticsearch服务和Python后端</h1><p id="744e" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">首先，我们需要定位Python路径。我建议用两种方法来寻找它:</p><ol class=""><li id="3c79" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">在Python环境中显示</li></ol><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="b717" class="nl mk iq nh b gy nm nn l no np">import sys<br/># Python search for libraries at the ordering of the path<br/>print(sys.path[0])</span></pre><p id="2f5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.在命令行中显示，并激活所选的Python环境</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="e199" class="nl mk iq nh b gy nm nn l no np">which python</span></pre><p id="d049" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这两种方法都可以定位Python可执行文件的系统路径。</p><p id="4952" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦知道了python路径，我们就可以开始连接了。我们将在R中使用<em class="ls"> reticulate </em>包，它为Python和R之间的互操作性提供了一套全面的工具。详细内容可以在<a class="ae kv" href="https://github.com/rstudio/reticulate" rel="noopener ugc nofollow" target="_blank">这里找到</a>并且我推荐你阅读这个很棒的<a class="ae kv" href="https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf" rel="noopener ugc nofollow" target="_blank">备忘单</a>！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="7066" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个简单的方法管用！为了避免卡住，同时学习R和Python总是一个好主意。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/2a3ac3f5e45220a7acc7cd51afc20e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Po73sZ6oe8DYmZaR"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@mirkoblicke?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mirko Blicke </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="ca80" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">示范</h1><p id="0a6a" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">因为我们目前没有托管的Elasticsearch实例。出于演示目的，让我们在本地机器上创建一些样本数据。</p><p id="d9ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用本地机器中的样本数据设置Elasticsearch的步骤:</p><ol class=""><li id="0796" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">下载并遵循<a class="ae kv" href="https://www.elastic.co/downloads/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>的说明。</li><li id="9774" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">下载并遵循<a class="ae kv" href="https://www.elastic.co/downloads/kibana" rel="noopener ugc nofollow" target="_blank">基巴纳的指示。</a></li><li id="405d" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">主持Elasticsearch和Kibana。</li><li id="8a80" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">将样本飞行数据加载到基巴纳。Kibana托管在<a class="ae kv" href="http://localhost:5601/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601/ </a>上。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/07ce1ea00eb505317643aa6f9be1538f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hJR5noAKx1yL1UFO.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从Kibana加载样本数据。(图片由作者提供)</p></figure><p id="dabd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">5.连接到Elasticsearch</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="8b5c" class="nl mk iq nh b gy nm nn l no np">elasticsearch &lt;- import("elasticsearch")</span><span id="f959" class="nl mk iq nh b gy nu nn l no np">host &lt;- "localhost:9200"</span><span id="5afc" class="nl mk iq nh b gy nu nn l no np">es &lt;- elasticsearch$Elasticsearch(hosts = host)</span></pre><p id="1695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于没有使用AWS4Auth，因此有多种连接方式。你也可以使用R only方法。</p><p id="09e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">6.安装闪亮仪表板的必要组件，包括<em class="ls">闪亮仪表板</em>和<em class="ls">闪亮仪表板。</em></p><h2 id="c1b6" class="nl mk iq bd ml nv nw dn mp nx ny dp mt lf nz oa mv lj ob oc mx ln od oe mz of bi translated">使用R操作数据并构建闪亮仪表板</h2><p id="72f7" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">连接后，我们现在就可以开始在仪表板中编写功能了。首先让我们从结构开始:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="d681" class="nl mk iq nh b gy nm nn l no np">├── global.R<br/>├── server.R<br/>└── ui.R</span></pre><p id="22d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更好地组织代码，我将文件分成了以上3个部分。</p><p id="346e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe og oh oi nh b">global.R</code></p><p id="0c82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">顾名思义，这个文件存储了在应用程序启动之前运行一次的全局变量和函数。因此，我包含了Elasticsearch连接和查询。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="oj">全局中的连接和查询。R </em></p></figure><p id="5c07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe og oh oi nh b">server.R</code></p><p id="c17e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦dashboard应用程序启动，它就会处理后端任务。例如，文件中应包含关于如何渲染图以及何时重新运行查询的逻辑。</p><p id="b60a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<a class="ae kv" href="https://elasticsearch-py.readthedocs.io/en/master/api.html#elasticsearch.Elasticsearch.search" rel="noopener ugc nofollow" target="_blank"><em class="ls">Elasticsearch . search</em></a><em class="ls"/>从elastic search得到的响应数据是字典格式的，并根据<a class="ae kv" href="https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf" rel="noopener ugc nofollow" target="_blank"><em class="ls"/></a>转换成命名列表。为了便于绘图，最好将所有响应数据转换为R数据帧格式，我们有两种选择:</p><ol class=""><li id="ca28" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">转换r中的数据。</li><li id="7796" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">用Python转换数据，转换<em class="ls">熊猫。r中的数据帧</em>至<em class="ls">数据帧</em>。</li></ol><p id="68fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在演示中，我们将使用r。考虑到命名列表响应数据的复杂性，更有效地编写合适的数据转换函数的方法是使用<a class="ae kv" href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/str" rel="noopener ugc nofollow" target="_blank"> <em class="ls"> str </em> </a> <em class="ls">不断观察对象的结构。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/d9fb60a4e6f07d7952015cdbb5c023c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*FPMxb1r98kNcCc1ODT4wQQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">响应子集数据的示例结构</p></figure><p id="0f5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在R控制台中经过多轮反复试验后，我们提出了两个函数来转换来自单个和两个聚集查询的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="24eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们为图表绘制准备数据框。首先，我们创建数据框架，并使用<em class="ls"> Plotly R </em>绘制航班数量的饼图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">函数来渲染一个plotly图形</p></figure><p id="da44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下形式的转换后的数据帧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/8d7ab86eb4acdff8c4493dd7c469c2c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*ehVqgqABl0lvE-rIdGhVbQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">航班数量的转换数据框架</p></figure><p id="15ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> Plotly </em>是一个流行的图表可视化工具，它允许用户创建具有交互性选项的交互性可视化。使用<em class="ls"> Plotly </em>制作的图形支持放大和缩小以及悬停文本等功能。然而，与<em class="ls"> ggplot </em>相比，在<em class="ls"> Plotly </em>中渲染图表在显示大量数据时会非常慢。</p><p id="c04c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们创建数据框架，并使用<em class="ls"> ggplot绘制航班延误时间序列数据的堆积条形图。</em>我们将在控制面板中制作一个时间滑块，供用户选择图表的时间范围，因此我们必须按选定的时间输入进行过滤。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="be49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下形式的转换后的数据帧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/8f92194ba467c988f836811ff73a77d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*Hc67q8XmX5sMl6NUl-ERrw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">航班延误的转换数据帧</p></figure><p id="85ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls"> ggplot </em>允许用户快速可视化趋势，并在层中添加定制。如果需要更具交互性的图表，您可以通过代码<code class="fe og oh oi nh b">ggplotly(p)</code>将您的图形转换为<em class="ls"> Plotly </em>。</p><p id="1bd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们使用<em class="ls"> wordcloud2为天气数据创建数据框架和单词云。</em>此外，我们将在仪表板中制作一个滑块，供用户调整所需的wordcloud大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="fe88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下形式的转换后的数据帧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/7f64c36a4dbba097d17a24475a5c76b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*BxkiINNAoS14v-KpdgjUuA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">天气的转换数据帧</p></figure><p id="4a06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<em class="ls"> wordcloud2 </em>制作的单词云自动计算单词的大小和位置，当鼠标悬停时，它支持显示原始值。因此，用户可以获得数据的概览，以及针对特定的词进行数据洞察。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/1832a461802a0ef2c22cc7009e79540c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h7sBR3oLW6-Wrs2x"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@lanceanderson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">兰斯·安德森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1684" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe og oh oi nh b">ui.R</code></p><p id="07d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它处理应用程序的前端外观。闪亮的部件和风格的代码应该放在这里。基本上所有想要的仪表板外观都应该在这里。交互式仪表板的基本要素是小部件的使用。有很多资源可以用来创建闪亮的小工具，比如这里的<a class="ae kv" href="http://shinyapps.dreamrs.fr/shinyWidgets/" rel="noopener ugc nofollow" target="_blank"/>。一旦你有了一个想法，你就可以简单地搜索合适的小部件并把它放到<code class="fe og oh oi nh b">ui.R</code>文件中。除此之外，一些闪亮的仪表板元素可以在找到<a class="ae kv" href="https://rstudio.github.io/shinydashboard/structure.html" rel="noopener ugc nofollow" target="_blank">。只要确保每次添加新的小部件时都处理了数据逻辑。</a></p><p id="c4ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为演示的一个例子，对于我们的word cloud框，我们创建一个<em class="ls"> sliderInput </em>来控制它的整体大小。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="fc45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于UI的更多细节，欢迎您阅读我的源代码。</p><p id="1e5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，让我们在R控制台中托管闪亮的应用程序:</p><pre class="kg kh ki kj gt ng nh ni nj aw nk bi"><span id="4c6c" class="nl mk iq nh b gy nm nn l no np">runApp(host="0.0.0.0", port=1234)</span></pre><p id="4355" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">访问<a class="ae kv" href="http://localhost:1234/" rel="noopener ugc nofollow" target="_blank"> http://localhost:1234/ </a>可以查看演示仪表盘。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/6ba1e74933095eb51efbf291635b31e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-Fv9nWcgR1Jkb2MY.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">本次演示中制作的仪表板。(图片由作者提供)</p></figure><h1 id="705c" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">结论</h1><p id="e31e" class="pw-post-body-paragraph kw kx iq ky b kz nb jr lb lc nc ju le lf nd lh li lj ne ll lm ln nf lp lq lr ij bi translated">在本文中，我们已经完成了创建一个闪亮的仪表板的基本步骤，将数据带入生活。特别是，我们有</p><ol class=""><li id="3c64" class="lt lu iq ky b kz la lc ld lf lv lj lw ln lx lr ly lz ma mb bi translated">使用Python后端连接Elasticsearch并将数据转换为R命名列表。</li><li id="0427" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">用r创建多个数据转换函数。</li><li id="e361" class="lt lu iq ky b kz mc lc md lf me lj mf ln mg lr ly lz ma mb bi translated">利用<em class="ls"> Plotly、ggplot </em>和<em class="ls"> wordcloud2 </em>包进行绘图。</li></ol><p id="3f54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！希望这篇文章对你有用。源代码贴在我的<a class="ae kv" href="https://github.com/wfkwan/Shiny-with-Elasticsearch" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>里。请随时给我留言，告诉我你对这篇文章的看法。如果你有更方便的方法，请告诉我:)</p><p id="4772" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">领英:</strong></p><p id="e5c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.linkedin.com/in/andy-k-1b1a44103/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/andy-k-1b1a44103/</a></p></div></div>    
</body>
</html>