<html>
<head>
<title>A Demystifying Introduction to Formal Concept Analysis (FCA)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭开形式概念分析(FCA)的神秘面纱</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-demystifying-introduction-to-formal-context-analysis-fca-ab8ce029782e?source=collection_archive---------26-----------------------#2020-11-15">https://towardsdatascience.com/a-demystifying-introduction-to-formal-context-analysis-fca-ab8ce029782e?source=collection_archive---------26-----------------------#2020-11-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="365b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在复杂数据中寻找结构和规则。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9a531b0c0039d4b96f19382c04e9e84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BJVNbaRyhuGJ79iRPZhRjw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">结构(图片作者提供)。</p></figure><p id="1dfc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种情况多久发生一次？一个新的数据仓库出现了，或者有人给你指出一个不错的新数据集，从中你可以看到可能有一些有趣的事情要做。然后你看着它，嗯…它是一串数字。你可以运行一些统计数据，并四处打探，但这到底意味着什么呢？</p><p id="4fed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也许<a class="ae lu" href="https://en.wikipedia.org/wiki/Formal_concept_analysis" rel="noopener ugc nofollow" target="_blank">形式概念分析</a> (FCA)能有所帮助。这看起来可能很复杂，但它基于一个相当简单的想法:T2概念T3。概念(有点像面向对象编程中的类)表示共享一组属性的一组对象。通常，在FCA中，这些属性是二进制的。</p><p id="449d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，假设我们正在查看关于四个国家的数据，这四个国家可大可小，人们可能会在左侧或右侧驾驶。我们可以用下面的二进制矩阵来表示每个国家的属性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/8ca32ea115806be01c8c58f61d5ceb0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o_owAwTSFi34SSJHqACaEQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个非常简单的数据集的形式上下文。</p></figure><p id="8953" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个矩阵就是所谓的<em class="lv">形式背景</em>，我们可以看到这里有意义的概念包括大国的概念，或者说大国在右侧行驶的概念。包含在第一个对象(称为概念的<em class="lv">范围</em>中的对象(国家)集合是国家1、国家2和国家3 <strong class="la iu">、</strong>，第二个对象仅包含国家1和国家3。每个概念的<em class="lv">意图</em>，即共享的属性集合，对于前者为<em class="lv">【size:big】</em>，对于后者为<em class="lv">【size:big，driving:right】</em>。</p><p id="7717" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一件事我们需要添加到概念的定义中，这是FCA的核心:概念必须是封闭的。这意味着范围中的对象集应该正好是共享意图属性的对象集，<em class="lv">和</em>意图中的属性集应该正好是范围中的对象共享的属性集。</p><p id="d269" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从那个定义来看，<em class="lv">【大小:大】</em><em class="lv">【大小:大，驾驶:右】</em> <strong class="la iu"> </strong>是封闭的，但是<em class="lv">【大小:小】</em>这个概念不是。的确，只有country4有这个属性，但它也有<em class="lv">【驾驶:右】</em>。因此，要使其封闭，必须通过范围元素共享的两个属性来定义概念:<em class="lv">【size:small，driving:right】</em>。同样适用于<em class="lv">【驾驶:左】</em>。这种情况下的封闭概念是<em class="lv">【大小:大，行驶:左】</em>。</p><p id="32f9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，寻找封闭的概念当然很有趣，但是让整个事情变得真正强大的是这些概念是由<em class="lv">包容</em>自然组织起来的。直觉上，一个概念包含另一个更一般的概念。更正式的说法是，它的意图(属性)包含在对方概念的意图中，它的范围(对象)包含对方概念的范围。基本上，<em class="lv">【大小:大】</em>归入<em class="lv">【大小:大，驾驶:左】</em>。</p><p id="1ac2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种包含关系是一种<em class="lv">偏序</em>，这意味着一个概念可能包含另一个概念，被另一个概念包含，或者都不包含。因此，给定数据集(形式背景)的所有封闭概念都自然地组织在一个层次结构中(一个<em class="lv">点阵</em>)，从更一般到更具体。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/45bfdf6035e82a974d987292933d5d91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XG7V8DeQ8NGBILWN4ttE4A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由一个小例子创建的概念格。</p></figure><p id="63ac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，对于这样一个小例子，它实际上并没有多大帮助。那么，让我们看看它在一个更重要的例子上做了什么。</p><h1 id="cc1b" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">乡村的例子，但是真实的</h1><p id="4928" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">为了得到一个更真实的例子，我使用了<a class="ae lu" href="https://www.wikidata.org" rel="noopener ugc nofollow" target="_blank"> Wikidata </a>来检索国家列表以及与它们相关的信息(属性)。跳过细节(用于重新创建数据集的所有代码都可以通过FCA的基本实现以及在<a class="ae lu" href="https://github.com/mdaquin/fca.js" rel="noopener ugc nofollow" target="_blank">github.com/mdaquin/fca.js</a>的示例获得)，数据集包括来自国家/地区的信息，这些国家/地区具有超过90%的国家/地区共享的属性值，并且具有数值或少于5个唯一分类值。对于这些国家，属性值通过以下方式转换为二进制属性:</p><ul class=""><li id="a895" class="mv mw it la b lb lc le lf lh mx ll my lp mz lt na nb nc nd bi translated">对于分类属性，为每个可能的值创建一个属性，例如<em class="lv">驾驶侧:左侧</em>(机器学习从业者称之为<a class="ae lu" href="https://en.wikipedia.org/wiki/One-hot" rel="noopener ugc nofollow" target="_blank"> <em class="lv">一个热编码</em> </a>)。</li><li id="ceb0" class="mv mw it la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">对于数字属性，根据33%和67%的百分点创建低、中和高值的属性，例如<em class="lv">人口:低</em>(一种非常基本的<a class="ae lu" href="https://en.wikipedia.org/wiki/Discretization_of_continuous_features" rel="noopener ugc nofollow" target="_blank">离散化</a>方法)。</li></ul><p id="208b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果是147个对象(国家)和33个二元属性的正式上下文。例如，法国由以下属性表示:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="9240" class="no lz it nk b gy np nq l nr ns">France:[<br/>  "area:high",<br/>  "population:high",<br/>  "mains voltage:medium",<br/>  "driving side:right",<br/>  "inflation rate:low",<br/>  "total fertility rate:low",<br/>  "PPP GDP per capita:high",<br/>  "life expectancy:high",<br/>  "has quality:free country",<br/>  "nominal GDP per capita:high",<br/>  "nominal GDP:high"<br/>]</span></pre><p id="3fdd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看这个正式的上下文感觉有点像看矩阵。一列接一列的x，感觉有点随机，但也有点不随机:这里面有模式，所以让我们试着找到它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/a00a751838e56d50d66ed728c0086b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2DFoZaDhNP4hIoscwm2hfw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">正式的上下文看起来都是矩阵。</p></figure><h1 id="7d49" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">构建概念格</h1><p id="5435" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">构建概念格是一项复杂的任务，但是为了这个例子的目的，我使用了一个基本的方法。首先，我通过添加每个对象的意图以及与现有概念的意图的任何交集来构建所有相近的概念。然后我迭代概念来建立包含关系。最后，我用它们的范围填充每个概念。这远远不是最有效的算法(参见<a class="ae lu" href="http://ceur-ws.org/Vol-42/paper3_kuznetsov.pdf" rel="noopener ugc nofollow" target="_blank">这篇文章</a>中更好的算法列表), javascript也不是最好的语言，但在我的笔记本电脑上，只需要几分钟就可以完成，所以还不算太差。</p><p id="058a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先要注意的是，该算法找到了8，840个概念。这听起来可能很多，但是这远远没有达到我们用这个数量的属性所能找到的最大概念数量！我想这就是为什么大多数关于FCA的教程和例子倾向于只使用非常基本的例子。复杂的不是技术，而是结果。</p><p id="b002" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，即使逐个检查所有这些概念是乏味且毫无意义的工作，这里的关键是它们不是作为属性集的列表，而是通过导航结构来探索它们。事实上，从网格的顶部开始(即没有属性作为意图，所有对象作为范围的概念)，我们可以将注意力集中在下一个级别，例如低预期寿命的国家(<em class="lv">【预期寿命:低】</em>)，发现有20个次级概念，包括人口也低的国家(其中14个)。在第三个层次，我们发现只有5个可能的其他概念，除了低预期寿命和人口之外，还有:</p><ul class=""><li id="78c7" class="mv mw it la b lb lc le lf lh mx ll my lp mz lt na nb nc nd bi translated">低名义GDP，</li><li id="c685" class="mv mw it la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">高总和生育率，</li><li id="aa21" class="mv mw it la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">中等电源电压，</li><li id="5265" class="mv mw it la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">低购买力平价人均国内生产总值，或</li><li id="c27f" class="mv mw it la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated">高通货膨胀率</li></ul><p id="fcb4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可能有许多其他概念，但只有这五个，而且FCA基于封闭的属性集，这意味着这些其他概念根本不存在于数据中。在我们列出的国家中，你不可能预期寿命和人口都很低，也不可能不属于那5个类别之一。网格更深入地细分了这组国家，并提供了一种便捷的方式来探索数据集。但是它能做得更多吗？</p><h1 id="093c" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">提取关联规则</h1><p id="96b2" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">除了提供一个(相当庞大的)导航结构之外，一旦构建好，网格还可以用来识别数据中应用的规则。这里简单的直觉是，如果概念C的意图包括不在其任何父概念的意图中的属性(即包含概念)，那么这些属性暗示了父概念的属性。这也是因为概念是封闭的:如果C自己的属性(其正确的意图)可以在没有父属性的情况下出现，那么它们就已经出现在更高的层次上了。</p><p id="42fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不幸的是，这种情况在我们国家的数据集中没有出现。然而，我们可以看到这种情况何时会发生。一个概念的支撑是其范围内的对象(国家)的数量。比如<em class="lv">【预期寿命:低，人口:低】</em>的支持度是14，如上图。如果一个概念C的支持度几乎与它的一个父概念D的支持度相同，那一定意味着D的意图的属性几乎隐含了C的意图的属性。换句话说，如果C具有意图<em class="lv">【a，b，C】</em>的支持度为9，并且包含概念S具有意图<em class="lv">【a，b】</em>，<em class="lv"> </em>的支持度为10，我们可以说，任何具有属性a和b的对象在90%的情况下也具有C。我们有一个<em class="lv">关联规则</em>说明a和b隐含c，置信度90%(支持度9)。</p><p id="e0c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那个，我们国家数据集有很多。仅关注置信度高于95%且支持度至少为25的规则，我们可以发现例如以下规则:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="608b" class="no lz it nk b gy np nq l nr ns">inflation rate:high,total fertility rate:high -&gt; life expectancy:low s:25 c:0.9615384615384616</span></pre><p id="615a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其中指出，在96.1%的置信度下，高通胀率和高生育率的国家预期寿命也低，这适用于我们数据集中的25个国家。</p><h1 id="154a" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">结论</h1><p id="f478" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">FCA和关联规则提取的应用还有很多，但对我来说，数据集探索和理解是最重要的应用之一。上面的规则和网格的结构可能反映了世界的某种现实，或者可能是数据集构建方式的人工产物。它可能会说明一些国家的情况，或者在数据中显示出一些偏差。无论是哪种情况，在数据过程的可解释性变得越来越重要的时候，一个可以告诉我“这是你的数据所说的东西”或“这是我在你的数据集的一个角落里发现的一个重要模式”的过程，对于理解数据和我们对数据所做的任何事情的结果都是无价的。</p></div></div>    
</body>
</html>