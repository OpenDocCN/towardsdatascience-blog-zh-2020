<html>
<head>
<title>Ultimate Pandas Guide — Creating a DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫终极指南——创建数据框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ultimate-pandas-guide-creating-a-dataframe-9f063e590e78?source=collection_archive---------43-----------------------#2020-09-22">https://towardsdatascience.com/ultimate-pandas-guide-creating-a-dataframe-9f063e590e78?source=collection_archive---------43-----------------------#2020-09-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div class="gh gi ir"><img src="../Images/3a65348dd9b6b5cee8b1d31a7b2514be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*K9anfLfJsX9jaqMRGtQQ_w.png"/></div><p class="iy iz gj gh gi ja jb bd b be z dk translated">劳拉·伍德伯里摄于<a class="ae jc" href="https://www.pexels.com/photo/panda-bear-on-green-grass-3608263/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a></p></figure><div class=""/><div class=""><h2 id="b27f" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">用Python从头开始构建数据</h2></div><p id="6738" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">任何数据分析工作的第一步，或许也是最重要的一步，是获取你的原材料；你的数据。</p><p id="5658" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">根据项目的成熟度，这个阶段可能非常简单——向同事请求csv，查询结构良好的数据库，等等。或者更复杂一些，比如构建一个定制的web scraper。</p><p id="5515" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但并不是所有项目所需的数据都来自外部来源。有时候你需要自己编造。</p><p id="893c" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我将从头开始介绍创建数据帧的过程。</p><h1 id="8c56" class="lq lr jf bd ls lt lu lv lw lx ly lz ma kl mb km mc ko md kp me kr mf ks mg mh bi translated">理解“数据框架”方法</h1><p id="4773" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">创建新数据帧的最简单方法是使用“DataFrame”方法。如果你熟悉面向对象编程，你会注意到这实际上是一个<a class="ae jc" href="https://www.geeksforgeeks.org/constructors-in-python/" rel="noopener ugc nofollow" target="_blank">构造函数</a>调用，它实例化了一个新的DataFrame对象。</p><p id="e546" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有参数都是可选的，这意味着您可以通过传入… nothing来创建一个空的数据帧:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="14af" class="mw lr jf ms b gy mx my l mz na">import pandas as pd<br/>empty_df = pd.DataFrame()</span></pre><p id="0222" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您希望稍后用数据填充一个空的数据帧，这可能会很有帮助。例如，您可以存储几个机器学习模型的汇总结果，方法是从一个空的数据帧开始，然后编写一个循环来填充每个模型的行。</p><p id="c7f7" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，在大多数情况下，您会希望从一开始就用数据填充数据帧。幸运的是，Pandas非常灵活，允许程序员将各种数据结构转换成数据帧。下面是一个综合指南:</p><h2 id="892a" class="mw lr jf bd ls nb nc dn lw nd ne dp ma ld nf ng mc lh nh ni me ll nj nk mg nl bi translated">从列表的列表中创建数据帧</h2><p id="9e23" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">将一个列表列表传递给DataFrame方法的第一个参数，其中每个内部列表都将是未来的一行。您通常还需要包含一个“columns”参数，它是您想要使用的列名的简单列表。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="bed4" class="mw lr jf ms b gy mx my l mz na">data = [[‘panda’, ‘bamboo’, 100], <br/>       [‘koala’, ‘eucalyptus’, 100]]</span><span id="0799" class="mw lr jf ms b gy nm my l mz na">pd.DataFrame(data, columns = [‘animal’, ‘favorite_food’, ‘cuteness_level’])</span></pre><figure class="mn mo mp mq gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e3b72159f4fb6e1ee7d9beec8e967b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*1LFG17zv-2muDBK7qSa9XA.png"/></div></figure><h2 id="90af" class="mw lr jf bd ls nb nc dn lw nd ne dp ma ld nf ng mc lh nh ni me ll nj nk mg nl bi translated">从字典创建数据帧—方法1</h2><p id="8b4e" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">传递一本字典作为第一个参数。字典中的键将成为数据帧中的列。字典中的值应该是将填充列的列表:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="ac35" class="mw lr jf ms b gy mx my l mz na">data = {‘animal’: [‘panda’, ‘koala’],<br/>        ‘favorite_food’: [‘bamboo’, ‘eucalyptus’],<br/>        ‘cuteness_level’: [100, 100]}</span><span id="db0c" class="mw lr jf ms b gy nm my l mz na">pd.DataFrame(data)</span></pre><figure class="mn mo mp mq gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e3b72159f4fb6e1ee7d9beec8e967b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*1LFG17zv-2muDBK7qSa9XA.png"/></div></figure><h2 id="d067" class="mw lr jf bd ls nb nc dn lw nd ne dp ma ld nf ng mc lh nh ni me ll nj nk mg nl bi translated">从字典创建数据帧—方法2</h2><p id="0694" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">还可以使用DataFrame类的<a class="ae jc" href="https://www.programiz.com/python-programming/methods/built-in/classmethod#:~:text=A%20class%20method%20is%20a,and%20a%20class%20method%20is%3A&amp;text=Class%20method%20works%20with%20the,is%20always%20the%20class%20itself." rel="noopener ugc nofollow" target="_blank">类方法</a>中的<strong class="kw jg"> <em class="no"> from_dict </em> </strong>方法从字典中创建DataFrame。</p><p id="399e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这样做的好处是，您可以将“orient”参数设置为“index”，这将改变字典填充数据帧的方式。在这种情况下，字典的键将成为行索引，其值将成为行:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="643d" class="mw lr jf ms b gy mx my l mz na">data = {‘animal’: [‘panda’, ‘koala’],<br/>        ‘favorite_food’: [‘bamboo’, ‘eucalyptus’],<br/>        ‘cuteness_level’: [100, 100]}</span><span id="9f1d" class="mw lr jf ms b gy nm my l mz na">pd.DataFrame.from_dict(data, orient = ‘index’, columns = [‘first_animal’, ‘second_animal’])</span></pre><figure class="mn mo mp mq gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b5e47ef892d64bf7e9b06c8933d55110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*dK9nlIt5MO43BCkwLuN1gg.png"/></div></figure><h2 id="1f09" class="mw lr jf bd ls nb nc dn lw nd ne dp ma ld nf ng mc lh nh ni me ll nj nk mg nl bi translated">从字典列表创建数据帧</h2><p id="3ec0" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">将字典列表传递给第一个参数。对于每个字典，键对应于列名，值对应于数据帧每一行中的值:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="503a" class="mw lr jf ms b gy mx my l mz na">data = [{'animal': 'panda', <br/>         'favorite_food': 'bamboo', <br/>         'cuteness_level': 100},</span><span id="9e0e" class="mw lr jf ms b gy nm my l mz na">         {'animal': 'koala', <br/>          'favorite_food': 'eucalyptus', <br/>           'cuteness_level': 100}]</span><span id="511d" class="mw lr jf ms b gy nm my l mz na">pd.DataFrame(data)</span></pre><figure class="mn mo mp mq gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e3b72159f4fb6e1ee7d9beec8e967b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*1LFG17zv-2muDBK7qSa9XA.png"/></div></figure><h2 id="5db1" class="mw lr jf bd ls nb nc dn lw nd ne dp ma ld nf ng mc lh nh ni me ll nj nk mg nl bi translated">从numpy数组创建数据帧</h2><p id="9452" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">将numpy数组直接传递给DataFrame方法:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="13d1" class="mw lr jf ms b gy mx my l mz na">data = np.array([(‘panda’, ‘bamboo’, 100), <br/>                 (‘koala’, ‘eucalyptus’, 100)],<br/>               dtype=[(‘animal’, ‘U6’), <br/>              (‘favorite_food’, ‘U6’), <br/>               (‘cuteness_level’, int)])</span><span id="34aa" class="mw lr jf ms b gy nm my l mz na">pd.DataFrame(data)</span></pre><figure class="mn mo mp mq gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/e3b72159f4fb6e1ee7d9beec8e967b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*1LFG17zv-2muDBK7qSa9XA.png"/></div></figure><h1 id="1044" class="lq lr jf bd ls lt lu lv lw lx ly lz ma kl mb km mc ko md kp me kr mf ks mg mh bi translated">我的建议</h1><p id="3f57" class="pw-post-body-paragraph ku kv jf kw b kx mi kg kz la mj kj lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">在这篇文章中，我们介绍了创建新数据框架的各种方法。</p><p id="a02d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我从头开始构建一个表时，我更喜欢使用列表列表方法，因为它有最直观的翻译。每个内部列表都是水平呈现的，实际上看起来就像它在数据帧中变成的行。编码快乐！</p><figure class="mn mo mp mq gt iv"><div class="bz fp l di"><div class="nq nr l"/></div></figure></div></div>    
</body>
</html>