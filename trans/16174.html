<html>
<head>
<title>Data Analysis Project — WeRateDogs®</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据分析项目——WeRateDogs</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-analysis-project-weratedogs-16aad3f6c8c2?source=collection_archive---------22-----------------------#2020-11-07">https://towardsdatascience.com/data-analysis-project-weratedogs-16aad3f6c8c2?source=collection_archive---------22-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="12f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多人都在为他们可爱的狗狗运营社交媒体账户。然而，他们中的大多数人通常不会很好地运营他们的社交媒体账户，因为他们不知道观众喜欢什么，也不知道是什么因素影响了他们的喜爱和转发量。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f545fcd79779b5b0bb09132bbd926296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gFjX_XAA21uWkYHx"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">瓦莱丽·埃拉什在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="673d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我试图通过分析著名的狗评级Twitter帐户<a class="ae lb" href="https://twitter.com/dog_rates?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" rel="noopener ugc nofollow" target="_blank"> @weratedog </a>到<strong class="jp ir">来调查以下这2个问题，帮助那些拥有或打算拥有狗宠物社交媒体帐户的人通过选择正确类型的狗来吸引更多观众(我有多无聊)</strong>:</p><blockquote class="lc ld le"><p id="f6a3" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">1.哪个阶段/尺寸的狗获得了最高的转发数和最喜欢的数？</p><p id="0b99" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">2.转发次数最多的前三种狗是什么？</p></blockquote><blockquote class="lj"><p id="71e9" class="lk ll iq bd lm ln lo lp lq lr ls kk dk translated">一个简短的介绍@weratedog是一个推特账户，用一个关于狗的幽默评论给人们的狗打分。该账户由大学生马特·尼尔森于2015年创建。从那以后，这个账户已经吸引了880万以上的关注者。</p></blockquote></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="9ec4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从解释我在这个项目中的整个数据分析步骤开始:</p><blockquote class="lc ld le"><p id="99c2" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第一步:使用Twitter API收集数据(这里是完整代码<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/wrangle_act.ipynb" rel="noopener ugc nofollow" target="_blank"/></p><p id="4337" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第二步:评估和清理数据(<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/wrangle_act.ipynb" rel="noopener ugc nofollow" target="_blank">此处为</a>的完整代码)</p><p id="1765" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第三步:进行探索性数据分析以回答问题并创建可视化效果(<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/act_report%20(1).ipynb" rel="noopener ugc nofollow" target="_blank">完整代码在此处</a>)</p><p id="d95a" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第四步:理解局限性</p><p id="cdbe" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第五步:总结</p><p id="d219" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第六步:可行的见解</p></blockquote></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><blockquote class="lc ld le"><p id="109a" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">步骤1:使用Twitter API收集数据</p></blockquote><p id="4431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个项目中，我使用了<a class="ae lb" href="http://www.tweepy.org/" rel="noopener ugc nofollow" target="_blank"> Tweepy </a>，一个Python库，来查询Twitter的API以获取WeRateDogs Twitter数据。数据将包括转发次数和收藏次数。我将把这两条信息与我在做这个项目时参加的Udacity的数据分析师课程提供的额外数据结合起来。</p><p id="6cf8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而且，因为这篇文章的目的是展示我所做的，所以这不是一篇教程文章，所以如果你是一个初学者并且对如何使用Tweepy感兴趣，<a class="ae lb" rel="noopener" target="_blank" href="/my-first-twitter-app-1115a327349e">这是一篇适合初学者的文章。</a></p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="ac6d" class="mf mg iq mb b gy mh mi l mj mk">Code:</span><span id="3749" class="mf mg iq mb b gy ml mi l mj mk"><strong class="mb ir">import</strong> <strong class="mb ir">pandas</strong> <strong class="mb ir">as</strong> <strong class="mb ir">pd</strong><br/><strong class="mb ir">import</strong> <strong class="mb ir">numpy</strong> <strong class="mb ir">as</strong> <strong class="mb ir">np</strong><br/><strong class="mb ir">import</strong> <strong class="mb ir">os</strong><br/><br/><em class="lf">#load twitter-archive-enhanced.csv into twitter_archive_df(</em>twitter-archive-enhanced.csv is the additional data provided by Udacity's course<em class="lf">)</em><br/>twitter_archive_df = pd.read_csv('twitter-archive-enhanced.csv')</span><span id="fa12" class="mf mg iq mb b gy ml mi l mj mk"><em class="lf">#using Python's Tweepy library and store each tweet's entire set of JSON </em><br/><em class="lf">#data will be in a file called tweet_json.txt file.</em><br/><br/><strong class="mb ir">import</strong> <strong class="mb ir">tweepy</strong></span><span id="455f" class="mf mg iq mb b gy ml mi l mj mk">#for the privacy, I put '...' instead of the real keys heehee<br/>consumer_key = '...'  <br/>consumer_secret = '...'<br/>access_token = '...'<br/>access_secret = '...'<br/><br/>auth = tweepy.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(access_token, access_secret)<br/><br/>api = tweepy.API(auth, wait_on_rate_limit=<strong class="mb ir">True</strong>, wait_on_rate_limit_notify=<strong class="mb ir">True</strong>)<br/><br/><strong class="mb ir">import</strong> <strong class="mb ir">json</strong><br/><br/>page_no_exist = []<br/>retweet_count_and_favorite_count = []</span><span id="705f" class="mf mg iq mb b gy ml mi l mj mk">#Writing and Reading Twitter JSON<br/><strong class="mb ir">with</strong> open('tweet_json.txt', mode="w") <strong class="mb ir">as</strong> file:<br/>    <strong class="mb ir">for</strong> i <strong class="mb ir">in</strong> list(twitter_archive_df.tweet_id):<br/>        <strong class="mb ir">try</strong>:<br/>            tweet = api.get_status(str(i))<br/>            file.write(json.dumps(tweet._json))<br/>            retweet_count_and_favorite_count.append({<br/>                "tweet_id" : str(i),<br/>                "retweet_count" : tweet._json['retweet_count'],<br/>                "favorite_count" : tweet._json['favorite_count']<br/>            })<br/>        <strong class="mb ir">except</strong>:<br/>            page_no_exist.append(i)</span><span id="2477" class="mf mg iq mb b gy ml mi l mj mk">retweet_count_and_favorite_count = pd.DataFrame(retweet_count_and_favorite_count, columns=["tweet_id",'retweet_count', 'favorite_count'])</span></pre><blockquote class="lc ld le"><p id="0e61" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第二步:评估和清理数据(<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/wrangle_act.ipynb" rel="noopener ugc nofollow" target="_blank">这里是完整代码</a></p></blockquote><p id="692f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在评估过程中，我发现了一些问题，并记录在两个部分:<strong class="jp ir">质量问题</strong>和<strong class="jp ir">整洁问题</strong>:</p><p id="9169" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="lf">为质量问题:</em> </strong></p><ul class=""><li id="a6d8" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">冗余转发行</li><li id="1ea7" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">多余的“回复用户推文”行</li><li id="e473" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">tweet_id 883482846933004288，778027034220126208中的rating _分子错误，给出了小数点后的数字而不是整数。</li><li id="ba25" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">没有名字的狗，取了“a”或“an”而不是“None”</li><li id="4651" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">有些rating_denominator不是10</li><li id="d687" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">“时间戳”、“tweet_id”的数据类型错误</li><li id="af30" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">源列中的行有95%以上是重复的。</li></ul><p id="f5be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="lf">为整洁问题</em> </strong></p><ul class=""><li id="2bce" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">同一类别的冗余列，现在分为["doggo "，" flooter "，" pupper "，" puppo"]列，但是我们只需要一个" stage "列</li></ul><p id="c636" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我挑选了下面两个我认为最有趣的清洁来展示，但是如果你想看我为这个项目做的整个清洁过程，请在这里查看清洁过程的完整代码。</p><h2 id="1df0" class="mf mg iq bd na nb nc dn nd ne nf dp ng jy nh ni nj kc nk nl nm kg nn no np nq bi translated">清洁1:没有名字的狗，但被赋予“a”或“an”的名字，而不是“None”</h2><p id="2061" class="pw-post-body-paragraph jn jo iq jp b jq nr js jt ju ns jw jx jy nt ka kb kc nu ke kf kg nv ki kj kk ij bi translated">操作:查找错误名称列表，并使用for循环给出单个名称“无”。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="8ef0" class="mf mg iq mb b gy mh mi l mj mk">Code:</span><span id="15a4" class="mf mg iq mb b gy ml mi l mj mk">wrong_name_list = list(twitter_clean_df.query('name == "a" or name == "an"').index)</span><span id="7644" class="mf mg iq mb b gy ml mi l mj mk"><strong class="mb ir">for</strong> i <strong class="mb ir">in</strong> wrong_name_list:     <br/>    twitter_clean_df.name[i] = "None"</span></pre><p id="8df1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">测试结果:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5525" class="mf mg iq mb b gy mh mi l mj mk"><strong class="mb ir">for</strong> i <strong class="mb ir">in</strong> wrong_name_list:<br/>    <strong class="mb ir">if</strong> twitter_clean_df.name[i] != "None":<br/>        print("wrong name")</span><span id="92ae" class="mf mg iq mb b gy ml mi l mj mk">(nothing is shown.)</span></pre><h2 id="de96" class="mf mg iq bd na nb nc dn nd ne nf dp ng jy nh ni nj kc nk nl nm kg nn no np nq bi translated">清洁2。同一类别的冗余列。原始数据集包含“doggo”、“flooter”、“pupper”和“puppo”列，但我们只需要一个“stage”列来包含它们。</h2><p id="ee75" class="pw-post-body-paragraph jn jo iq jp b jq nr js jt ju ns jw jx jy nt ka kb kc nu ke kf kg nv ki kj kk ij bi translated">动作:将四列(“doggo”、“flooter”、“pupper”、“puppo”)转换为一个“stage”列，然后删除这四列。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="afb0" class="mf mg iq mb b gy mh mi l mj mk">Code:</span><span id="c0c5" class="mf mg iq mb b gy ml mi l mj mk">twitter_clean_df['stage']=<strong class="mb ir">None</strong> </span><span id="2724" class="mf mg iq mb b gy ml mi l mj mk"># I try to add all the values from the four columns together, and then drop the "None" after that.</span><span id="00f9" class="mf mg iq mb b gy ml mi l mj mk">twitter_clean_df['stage'] = twitter_clean_df.doggo + twitter_clean_df.floofer + twitter_clean_df.pupper + twitter_clean_df.puppo</span><span id="66fb" class="mf mg iq mb b gy ml mi l mj mk">twitter_clean_df['stage'].value_counts()</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/da91a666c586d8a06beaa95275f81c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*psrZpiNcDHtGgoSpaNKq4g.png"/></div></figure><p id="84e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，现在我要<strong class="jp ir">去掉每行中所有的【无】</strong>。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="8e97" class="mf mg iq mb b gy mh mi l mj mk">twitter_clean_df['stage'] = twitter_clean_df['stage'].map(<strong class="mb ir">lambda</strong> x: x.replace("None",""))</span><span id="3fa0" class="mf mg iq mb b gy ml mi l mj mk">twitter_clean_df['stage'].value_counts()</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/024b012a7e64b435e2b47f4f17f0a491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*bZfRQfRWb3pw7NeeVvNPrA.png"/></div></figure><p id="2740" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这大概是我想要的，但是我们可以看到一些狗被记录为两个阶段，所以让给他们在两个词之间的“，”符号。</p><p id="c845" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">(以“doggopupper”为例。我们应该把它写成“doggo，pupper”)</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="7eb3" class="mf mg iq mb b gy mh mi l mj mk">Code:<br/>twitter_clean_df.loc[twitter_clean_df.stage == 'doggopupper', 'stage'] = 'doggo, pupper'<br/>twitter_clean_df.loc[twitter_clean_df.stage == 'doggopuppo', 'stage'] = 'doggo, puppo'<br/>twitter_clean_df.loc[twitter_clean_df.stage == 'doggofloofer', 'stage'] = 'doggo, floofer'</span></pre><p id="6da0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">测试结果:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="7777" class="mf mg iq mb b gy mh mi l mj mk">twitter_clean_df.stage.value_counts()</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ny"><img src="../Images/75aa5e7663de44778fcba7c025dd3b0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*V-pSahAu86Ly2vQyIbpUiQ.png"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">搞定了。</p></figure><blockquote class="lc ld le"><p id="d9b0" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第三步:进行探索性数据分析，回答问题并创建可视化(<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/act_report%20(1).ipynb" rel="noopener ugc nofollow" target="_blank">完整代码在此</a>)</p></blockquote><p id="0d16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们通过可视化来进行探索性的数据分析，从问题1、2、3开始！</p><h2 id="6bf4" class="mf mg iq bd na nb nc dn nd ne nf dp ng jy nh ni nj kc nk nl nm kg nn no np nq bi translated">研究问题1:哪种类型的狗获得了最高的转发数和喜爱数？</h2><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="92af" class="mf mg iq mb b gy mh mi l mj mk"># we only need the rows with stages<br/>df_stage = df[df["stage"].isnull()==False]</span><span id="a0fe" class="mf mg iq mb b gy ml mi l mj mk">#visualization 'Average favorite counts by stages of dogs'</span><span id="8675" class="mf mg iq mb b gy ml mi l mj mk">by_stages = df_stage.query('stage=="pupper" or stage=="doggo" or stage=="puppo" or stage=="floofer"')</span><span id="6ec6" class="mf mg iq mb b gy ml mi l mj mk">favorite_counts_by_stages = pd.DataFrame(by_stages.groupby('stage').favorite_count.mean().sort_values())</span><span id="c752" class="mf mg iq mb b gy ml mi l mj mk">favorite_counts_by_stages['stages'] = favorite_counts_by_stages.index</span><span id="3801" class="mf mg iq mb b gy ml mi l mj mk">favorite_counts_by_stages.plot(x="stages",y='favorite_count',kind='barh',title="Average favorite counts by stages of dogs",color='r', alpha=0.6)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nz"><img src="../Images/6843d1dc208a0beaa8f722e14c244fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ugFMuyr2Fj1qe0vQvp7tmw.png"/></div></div></figure><p id="1f5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，就在完成所有的可视化之后，我发现puppo和puppy的意思是一样的XDDD，都是小狗的意思。(我应该事先研究一下那些奇怪的术语...)而弗洛弗的意思是大狗，和人类一样大。doggo是狗的正常尺寸。这里，我应该将阶段的名称改为“大小”,而不是使用阶段。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="ed61" class="mf mg iq mb b gy mh mi l mj mk">favorite_counts_by_stages.rename(columns={'stages':'size'}, inplace=True)</span><span id="3269" class="mf mg iq mb b gy ml mi l mj mk">favorite_counts_by_stages.plot(x="size",y='favorite_count',kind='barh',title="Average favorite counts by size of dogs",color='r', alpha=0.6)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/e399cc662547e9deca1a38c43f8a22e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYOBW6q3L9ZqeAySEyRAyQ.png"/></div></div></figure><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="93ae" class="mf mg iq mb b gy mh mi l mj mk">#visualization 'Average retweet counts by the size of dog</span><span id="5a4d" class="mf mg iq mb b gy ml mi l mj mk">df_size = df[df["size"].isnull()==False]</span><span id="b7cb" class="mf mg iq mb b gy ml mi l mj mk">by_size = df_size.query('size=="pupper" or size=="doggo" or size=="puppo" or size=="floofer"')</span><span id="7d56" class="mf mg iq mb b gy ml mi l mj mk">retweet_count_by_sizes = pd.DataFrame(by_size.groupby('size').retweet_count.mean().sort_values())<br/>retweet_count_by_sizes['size'] = retweet_count_by_sizes.index<br/>retweet_count_by_sizes.plot(x="size",y='retweet_count',kind='barh',title="Average retweetcounts by size of dogs",color='r', alpha=0.6)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/bb7cde65a9cd553e9a2c556291cdb078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wv8F6eoJTH0aK1N4wWBZTQ.png"/></div></div></figure><p id="3b7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:它们看起来都像是小狗的转发数和喜爱数是其他狗的两倍。(既然pupper和puppo应该加在一起。)</p><h2 id="b45f" class="mf mg iq bd na nb nc dn nd ne nf dp ng jy nh ni nj kc nk nl nm kg nn no np nq bi translated">研究问题2:转发次数最多的前三种狗是什么？</h2><p id="a388" class="pw-post-body-paragraph jn jo iq jp b jq nr js jt ju ns jw jx jy nt ka kb kc nu ke kf kg nv ki kj kk ij bi translated">由于Udacity提供的数据集有一个名为预测品种的列，有人使用了一个机器学习模型来预测每个帖子的狗图片。它包含了每个帖子的一些可能的品种的概率。</p><p id="355d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的想法是从每个预测结果中选择最高的概率，看看哪个预测品种的平均转发数最高。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5710" class="mf mg iq mb b gy mh mi l mj mk">#extract data that has retweet_count and save them into variable "retweet_and_favorite_count"</span><span id="77db" class="mf mg iq mb b gy ml mi l mj mk">#get the index of ids with retweet_count<br/>#create a column called 'predicted_breed' for putting the predicted breed later on.</span><span id="66b5" class="mf mg iq mb b gy ml mi l mj mk">retweet_and_favorite_count = df[df["retweet_count"].isnull()==False]<br/>id_with_retweet = list(retweet_and_favorite_count.tweet_id)<br/>retweet_and_favorite_count['predicted_breed'] = None</span><span id="061f" class="mf mg iq mb b gy ml mi l mj mk">retweet_and_favorite_count.head()</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ob"><img src="../Images/01892bd0f3d1a592eefa5fecfbc8d246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGeB23qG_9dqwhylnB1xdw.png"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">好的，你可以看到最后一列叫做“预测品种”,包含“无”,用于以后存储预测品种。</p></figure><p id="99fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用Udacity提供的数据集“df_image”来查找包含预测品种的id。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="fa34" class="mf mg iq mb b gy mh mi l mj mk"># find the ids that are also in the df_image, and save the id in has_data.</span><span id="7eeb" class="mf mg iq mb b gy ml mi l mj mk">has_data = []</span><span id="84ec" class="mf mg iq mb b gy ml mi l mj mk">for i in id_with_retweet:<br/>    if len(list(df_image[df_image['tweet_id']==i].p1_dog.index))!=0:<br/>        has_data.append(i)<br/>    <br/>len(has_data)</span></pre><p id="3c48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出:1643</p><p id="23b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在将使用for循环，通过选择每个预测品种的最高概率来确定它们的预测品种。</p><p id="2d33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一下，Medium中的代码格式很难阅读代码，如果你认为下面的结构有点复杂，请在这里查看原始的<a class="ae lb" href="https://github.com/YuehHanChen/WeRateDogs-Twitter-Analysis/blob/master/act_report%20(1).ipynb" rel="noopener ugc nofollow" target="_blank">代码</a></p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="f824" class="mf mg iq mb b gy mh mi l mj mk">for i in has_data:</span><span id="19a6" class="mf mg iq mb b gy ml mi l mj mk">    index = list(retweet_and_favorite_count[retweet_and_favorite_count['tweet_id']==i].index)[0]<br/>    if list(df_image[df_image['tweet_id']==i].p1_dog.values)[0] == True:<br/>        retweet_and_favorite_count.predicted_breed[index] = list(df_image[df_image['tweet_id']==i].p1.values)[0]<br/>    elif list(df_image[df_image['tweet_id']==i].p2_dog.values)[0] == True:<br/>        retweet_and_favorite_count.predicted_breed[index] = list(df_image[df_image['tweet_id']==i].p2.values)[0]<br/>    elif list(df_image[df_image['tweet_id']==i].p3_dog.values)[0] == True:<br/>        retweet_and_favorite_count.predicted_breed[index] = list(df_image[df_image['tweet_id']==i].p3.values)[0]</span></pre><p id="c460" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">测试结果:</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="fbe6" class="mf mg iq mb b gy mh mi l mj mk">retweet_and_favorite_count[retweet_and_favorite_count["predicted_breed"].isnull()==False].sample(5)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oc"><img src="../Images/4d637a937b6fae5667c2e6a88b56bd88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KiX_vRVXhCPfRS9Yej04dA.png"/></div></div></figure><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="a030" class="mf mg iq mb b gy mh mi l mj mk"><em class="lf"># assess the data</em><br/><br/>retweet_and_favorite_count.retweet_count.describe()</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi od"><img src="../Images/913c28bea819392427d16c7d5f1e7c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wgHj0fefrWoVq6G8B73b2Q.png"/></div></div></figure><p id="f3f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通常，如果有一些数据超过平均值+- 3*std，意味着有一些异常值。在这种情况下，所有的品种都是预测的，所以我想创建一些标准来过滤掉离群值或不准确的数据。</p><p id="9019" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我决定使用不保守的3个标准来提取结果:<br/> 1。品种应该至少有10个计数，因为数据会更稳定。<br/> 2。每个品种的标准差应低于4447(整个数据集的标准差)<br/> 3。其均值大于2534(整个数据集的均值)。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="a690" class="mf mg iq mb b gy mh mi l mj mk">result_df = retweet_and_favorite_count.groupby('predicted_breed').retweet_count.describe()<br/>result_df = result_df.query('count &gt;= 10.0')<br/>result_df = result_df[result_df['std'] &lt; 4447]<br/>result_df = result_df[result_df['mean'] &gt; 2534]<br/>result_df = result_df.sort_values(by=['mean'], ascending=<strong class="mb ir">False</strong>)</span></pre><p id="7336" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">试验</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5f28" class="mf mg iq mb b gy mh mi l mj mk">result_df.head(3)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oe"><img src="../Images/76a34f981194caf2a41ac965132564f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0vBBwZlVv_MJ8682SpSdg.png"/></div></div></figure><p id="f996" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们来形象化一下。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="c17c" class="mf mg iq mb b gy mh mi l mj mk"><em class="lf">#visualization 'Top 3 highest average retweet counts by predicted breeds'</em><br/>locations = [1,2,3]<br/>top3 = result_df.head(3)<br/><br/>mean_retweet_counts = list(top3['mean'])<br/><br/>labels =  list(top3.index)<br/><br/>plt.bar(locations, mean_retweet_counts, tick_label=labels)<br/><br/>plt.title('Top 3 highest average retweet counts by predicted breeds')<br/>plt.xlabel('Breeds of dogs')<br/>plt.ylabel('retweet counts');</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi of"><img src="../Images/6460338c4226ebcb13d93748fb671140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1dBfVW5LRtkIDtcx4Jptrw.png"/></div></div></figure><p id="0571" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lf">注:大Pyenees、羊毛衫和金毛寻回犬是预测品种中平均转发次数最高的前3名。而且，排名第一的品种比排名第二的品种平均多600个计数。</em></p><blockquote class="lc ld le"><p id="f43c" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第四步:理解局限性</p></blockquote><p id="11d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在得出任何结论之前，最好告知局限性，以及其他人为因素是否会影响数据源的参与。在评估数据和进行探索性数据分析的过程中，我发现我收集的数据和Udacity提供的数据集存在一些局限性。</p><h1 id="f6d2" class="og mg iq bd na oh oi oj nd ok ol om ng on oo op nj oq or os nm ot ou ov np ow bi translated">限制:</h1><ul class=""><li id="3ff8" class="mm mn iq jp b jq nr ju ns jy ox kc oy kg oz kk mr ms mt mu bi translated">限制1:只有15%的数据记录大小。然而，我们没有进行置信区间或假设检验来测试我们对规模的结论是否可信，所以观众应该在某种程度上怀疑我们的见解。</li><li id="a6f3" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">限制二:我不确定创造机器学习模型的人是如何预测品种的，所以预测的品种应该会受到观众一定程度的怀疑。我们的结论中没有100%确定的事情。</li></ul><blockquote class="lc ld le"><p id="2a0c" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第五步:总结</p></blockquote><ol class=""><li id="8d13" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk pa ms mt mu bi translated">与doggo和floofer相比，Puppy的转发数和喜爱数是其他尺寸的狗的两倍。(既然pupper和puppo应该加在一起。)</li><li id="f679" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk pa ms mt mu bi translated"><em class="lf">就品种而言，大白熊、羊毛衫和金毛寻回犬是预测品种中平均转发次数最高的前三种。而且，排名第一的品种比排名第二的品种平均多600个计数。</em></li></ol><blockquote class="lc ld le"><p id="0037" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">第六步:可行的见解</p></blockquote><p id="6553" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想经营一个宠物社交媒体账户，并且你还没有决定哪种类型的狗是主角(如果你可以选择…)，或者如果你已经有一个狗宠物账户，并且你想收养或购买更多的狗，这里有一些见解:</p><p id="8fb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.去找小狗:)</p><p id="f19f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.就品种而言，选择<em class="lf">大白熊、卡迪根、金毛比其他狗更容易吸引观众的参与。</em></p><p id="777d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，结合这两个观点:</p><p id="1367" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">大白熊犬是你的首选！</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pb"><img src="../Images/046adb702577c81590dfb45bc4086949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VRPx4oSiguuOpWEB"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">克里斯蒂娜·安妮·科斯特洛在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="69f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您花时间阅读这篇文章。</p><p id="1d93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你是想找数据分析师实习生的雇主，这是我的LinkedIn或者通过我的电子邮件联系我(<a class="ae lb" href="mailto:ychen596@insite.4cd.edu" rel="noopener ugc nofollow" target="_blank">ychen596@insite.4cd.edu</a></p><p id="963b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你也在数据科学/商业分析领域工作，请随时通过IG( <a class="ae lb" href="https://www.instagram.com/jchen_mmm/" rel="noopener ugc nofollow" target="_blank"> @jchen_mmm </a>)、电子邮件或下面的评论给我任何反馈！</p></div></div>    
</body>
</html>