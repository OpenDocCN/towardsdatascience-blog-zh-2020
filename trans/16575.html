<html>
<head>
<title>Swift meets Photos framework and CoreML: tech details behind a smart tidying up app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift符合照片框架和CoreML:智能整理应用背后的技术细节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/swift-meets-photos-framework-and-coreml-tech-details-behind-a-smart-tidying-up-app-38e1d4b9e842?source=collection_archive---------41-----------------------#2020-11-15">https://towardsdatascience.com/swift-meets-photos-framework-and-coreml-tech-details-behind-a-smart-tidying-up-app-38e1d4b9e842?source=collection_archive---------41-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a80b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Photos/Vision framework和CoreML的图像整理应用程序背后的技术分享</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/176c9a72413911815274d9cbbd1642b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oEBUZGOch27CUK_T"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">卡尔·帕夫洛维奇在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的照片</p></figure><p id="3bc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上一篇文章中，我分享了我的应用程序的<a class="ae kv" href="https://medium.com/the-innovation/the-marie-kondo-for-photos-app-introduction-29886fb37101" rel="noopener">产品创意，它使用智能建议来帮助整理手机上的照片，紧密基于</a><a class="ae kv" href="https://konmari.com/" rel="noopener ugc nofollow" target="_blank">KonMarie</a>组织策略。</p><p id="cf2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一部分，我分享了一些我开始iOS开发之旅的技术笔记和思考，重点是AI/ML和图像技术。我还讨论了在设备上构建个性化的ML模型<em class="ls">。希望它能为未来的企业家或开始应用程序开发的人提供一些实用的技巧。</em></p><h1 id="e80a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">开始</h1><h2 id="fd61" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">学习Swift </strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/c303aa51f0d380283e8335bbae673914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ogFDqo2gi53exKz6.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://medium.com/@mindfiresolutions.usa/the-evolution-of-swift-29e7a89f1a0c" rel="noopener">Mindfire Solutions的Swift </a>发展</p></figure><p id="4bde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我是带着这个项目开始第一次学习Swift的。接触一些类似的编程语言确实大大加快了我的学习过程。</p><p id="d8b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对Swift的主要看法是:</p><ul class=""><li id="03f3" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">Swift是一种现代、简洁的编程语言，它拥有来自其他编程语言的许多范例，如委托和生命周期方法(类似于React中的那些)，作为第一类的功能，强类型安全和<a class="ae kv" href="https://brightdigit.com/blog/2018/01/04/understanding-optionals-in-swift/" rel="noopener ugc nofollow" target="_blank">空安全</a>(在安全方面，代码的便利性和可靠性之间有一个权衡)。</li><li id="a24a" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">Swift本身是一个多语种者——覆盖广泛的用例，从前端开发到深度NeuralNets模型的脚本批量训练。我发现它在每个角色中都表现得很好。</li><li id="a78f" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">我发现Swift功能强大，是一种精心设计的语言，但学习曲线有点陡。事后看来，<strong class="ky ir">投资学习基本概念</strong>(如委托、异步处理、异常处理、包装和解包等)确实是值得的，因为随着学习的进展，这将加速后面的阶段。</li></ul><p id="40f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就我个人而言，斯威夫特给人的感觉是一个聪明、老练的角色，这需要时间来熟悉，不像Python或Ruby那样友好、务实。</p><h2 id="7667" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak"> Xcode </strong></h2><p id="dcd6" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">大多数时候，VS代码是我首选的ide。然而，对于iOS开发，我认为使用Xcode是更合适的选择。</p><p id="0909" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Xcode有助于调试、分析、运行模拟、所见即所得编辑器、管理构建和发布应用程序。它对于检查和管理CoreML格式的ML模型也很有用。它与Xcode服务器集成，用于CI/CD管道。</p><p id="3c37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总的来说，良好集成的工具的重要性胜过其他问题，这让我免去了在多种工具之间切换的麻烦。</p><h1 id="dbd8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">更先进的图像处理技术</h1><h2 id="50ec" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">图像处理</strong></h2><p id="0bd9" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">我很兴奋地用我的iPhone尝试一些神奇的照片。我对此并不失望，因为苹果确实提供了很好的库支持，用<a class="ae kv" href="https://developer.apple.com/documentation/photokit" rel="noopener ugc nofollow" target="_blank">照片框架</a>来处理图像。</p><p id="5e77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">最重要的是，使用照片框架确保了iOS用户一致且熟悉的UX</strong>。例如，删除的照片将在“最近删除的”照片中保留30天，与通过默认相册应用程序删除的行为相同。</p><p id="ac54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">照片框架是现代和成熟的。作为另一个例子，它负责对共享照片资源的同步共享访问。这对于保持用户相册的一致状态非常重要，因为可能会有许多应用程序同时访问它们。下面是几行代码的例子。</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="7da9" class="ml lu iq ns b gy nw nx l ny nz">PHPhotoLibrary.shared().performChanges({</span><span id="d403" class="ml lu iq ns b gy oa nx l ny nz">PHAssetChangeRequest.deleteAssets(delShotsAsset)</span><span id="2b67" class="ml lu iq ns b gy oa nx l ny nz">}, completionHandler: {(success, error)</span><span id="40c6" class="ml lu iq ns b gy oa nx l ny nz"><strong class="ns ir">in</strong></span><span id="5b75" class="ml lu iq ns b gy oa nx l ny nz"><strong class="ns ir">var</strong> msg = String()</span><span id="d71f" class="ml lu iq ns b gy oa nx l ny nz"><strong class="ns ir">if</strong> success {</span><span id="fe4e" class="ml lu iq ns b gy oa nx l ny nz">msg = "Successfully deleted."</span></pre><h2 id="c5f9" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">图像缓存</strong></h2><p id="404c" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">照片框架也很好地支持缓存。我错误地了解了这件事。在最初的几次尝试中，如果没有缓存，渲染速度会非常慢。无论图像是来自web服务器还是本地存储，渲染大量照片(每张照片的大小都有几兆字节)都是一个很大的瓶颈。</p><p id="c612" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就清理照片而言，浏览图像是一个核心功能，我希望它是正确的。</p><p id="2ee8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，懒惰装载来拯救。Photos框架支持预取，它可以在用户滚动时预测并缓存传入的图像，并适当地使缓存失效。可以按照下面的代码片段来完成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/ad8c8d1f70820bc415a8336d73a2840a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-NNgPtf6CZ_q-VuuePHbw.png"/></div></div></figure><p id="6aec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是更流畅的渲染体验。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/3f4db48491323d30fa33f29e589a69a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*IwJHkc9bo7AGQUxcCMz6QA.gif"/></div></figure><h1 id="e4c2" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">将机器学习引入iOS应用</h1><h2 id="070a" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">核心毫升</strong></h2><p id="a5d8" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">人工智能/人工智能技术正在迅速成为移动世界的一种规范，尤其是在iOS生态系统中。<a class="ae kv" href="https://en.wikipedia.org/wiki/Apple_A11" rel="noopener ugc nofollow" target="_blank">神经引擎</a>(基本上是神经网络的加速硬件，像Edge TPU)现在默认内置于最新的iPhones中。每个单元每秒能够执行万亿次矩阵运算，而不会损害手机的电池或计算资源。</p><p id="1336" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Core ML提供了一系列选项来将ML模型集成到iOS应用程序中，从面向消费者的“拖放”方式使用<a class="ae kv" href="https://developer.apple.com/documentation/createml" rel="noopener ugc nofollow" target="_blank"> CreateML </a>来训练ML，到使用Swift的脚本方法(完全可定制)来训练定制的ML模型。</p><p id="d903" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下面的例子中，我正在制作一个模型来识别照片中的主体。基于这些信息，应用程序可以了解应该推荐保留什么。</p><h2 id="f1b1" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated">将ML模型添加到iOS应用程序</h2><p id="02e2" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">CoreML提供了许多现成的模型。mlmodel格式。有用于图像识别、语音、声音和文本识别的dnn。还有一些转换器可以将其他DNN模型格式(如Tensorflow或tf-lite)转换成CoreML格式。</p><p id="60e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.apple.com/machine-learning/models/" rel="noopener ugc nofollow" target="_blank">预先构建的模型</a>，如MobileNetV2、YOLO或SqueezeNet，针对移动推理进行了量化，并针对小型移动设备的使用进行了优化。它们可以按原样使用，也可以在分类/预测层进行微调，以用于后续的任务。</p><p id="5880" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在检测照片中的主题的例子中，MobileV2 Net可以通过几行代码来使用</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="1bee" class="ml lu iq ns b gy nw nx l ny nz"><strong class="ns ir">lazy</strong> <strong class="ns ir">var</strong> classificationRequest: VNCoreMLRequest = {</span><span id="3c08" class="ml lu iq ns b gy oa nx l ny nz"><strong class="ns ir">do</strong> {<br/><strong class="ns ir">let</strong> model = <strong class="ns ir">try</strong> VNCoreMLModel(for: MobileNet().model)<br/><strong class="ns ir">let</strong> request = VNCoreMLRequest(model: model, completionHandler: { [<strong class="ns ir">weak</strong> <strong class="ns ir">self</strong>] request, error <strong class="ns ir">in<br/>self</strong>?.processClassifications(for: request, error: error)<br/>})</span><span id="a215" class="ml lu iq ns b gy oa nx l ny nz">request.imageCropAndScaleOption = .centerCrop<br/><strong class="ns ir">return</strong> request<br/>} </span></pre><p id="5996" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Xcode提供了方便的集成工具来检查模型的层，理解它的元数据，或者探测它的预测结果来动态地检测模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/155e139bfbe1081e3dedb8de36924641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UlvN87_39ghjsdgktXSmyQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/7ea0e689b31b76111d7cf765b6142b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wjRfnMomflFFObLPEEGJoQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用MobileNet ML模型识别的主题示例。有些模糊的照片无法分类或接近决策边界。</p></figure><h2 id="49a3" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated">设备上的个性化机器学习模型</h2><p id="e488" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">iOS支持设备上的在线分布式培训，这使得为<em class="ls">的每个</em>用户建立真正个性化的ML成为可能。</p><p id="1a22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(为了澄清，在某种意义上，正常的ML模型也可以被认为是<em class="ls">个性化的</em>，因为它们是用长尾数据训练的，并且在推理时，它们基于个人用户输入进行预测。然而，底层模型仍然在用户之间共享。这一特性不仅如此，还使得在每个设备上定制一个模型成为可能。</p><p id="4108" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑这样一个场景，我想要一个ML模型来建议(二元决策)是否保留一个图像。理想情况下，该应用通过持续使用收集用户通常保留哪些照片的反馈。它是<a class="ae kv" href="https://en.wikipedia.org/wiki/Relevance_feedback" rel="noopener ugc nofollow" target="_blank">相关反馈</a>的一种形式。</p><p id="cd49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我是一名敏捷教练，我可能想保存更多的便利贴照片，或者，如果我是一名家长，我可能想保存更多的孩子照片。</p><p id="c165" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于我的设备上的这种特定数据(这捕获了我的偏好)，CoreML可以通过MLUpdate任务更新“通用”模型。所得到的重新训练的模型可以被保存在设备上，换句话说，每个用户将拥有他们自己的个性化ML。下面是一个<a class="ae kv" href="https://www.raywenderlich.com/7960296-core-ml-and-vision-tutorial-on-device-training-on-ios" rel="noopener ugc nofollow" target="_blank">代码示例</a>:</p><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="23c9" class="ml lu iq ns b gy nw nx l ny nz">do {<br/>    let updateTask = try MLUpdateTask(<br/>      forModelAt: url,<br/>      trainingData: trainingData,<br/>      configuration: nil,<br/>      completionHandler: completionHandler)<br/>    updateTask.resume()<br/>  } catch {<br/>    print("Couldn't create an MLUpdateTask.")<br/>  }</span></pre><p id="0dc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章没有详细讨论CoreML的实现，我将在另一篇文章中讨论。我希望分享更多关于不同CoreML模型的优缺点，Core ML从训练、微调到推理和监控的生命周期。</p><h2 id="8984" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">高价值低挂水果特色</strong></h2><p id="5e91" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">虽然CoreML是构建智能建议的一个强大选项，但有时，非ML替代方案也足够了。有时候，关注问题(不管是什么能解决问题)<em class="ls">比关注解决方案更好。</em></p><p id="2a53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就清理而言，我认为以下问题最适合应用ML:</p><ul class=""><li id="eaa3" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">识别主题或图像类别</li><li id="82b1" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">推荐最佳保留照片</li><li id="1f87" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">预测某种“质量”指标</li><li id="eceb" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">了解用户的偏好</li></ul><p id="f036" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，还有其他一些唾手可得的功能，这些功能易于实现，对日常用户同样有效:</p><ul class=""><li id="0505" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">识别重复项</li><li id="b2b9" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">识别照片中的人脸(最重要的质量指标之一)</li></ul><h2 id="ecde" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">使用哈希值识别重复项</strong></h2><p id="336d" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">这是一个ML解决方案听起来很诱人的例子，但是有一个更简单的算法也可以完成这项工作，而且更快，更容易实现和测试。</p><p id="dcfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个想法很简单——将图像转换成哈希——相似的图像应该产生相似的哈希数，这样就可以比较接近程度。<a class="ae kv" href="https://www.pyimagesearch.com/2017/11/27/image-hashing-opencv-python" rel="noopener ugc nofollow" target="_blank">汉明距离</a>就是为此而存在的。一些散列算法(查看相邻像素中的差异)是合适的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/367126aa952fac2c8c0636339cb85a66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2TPpbV1NXR6AkPpltD7YIQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">资料来源:pyimagesearch.com</p></figure><h2 id="91cb" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">使用苹果iOS的内置人脸检测功能识别人脸</strong></h2><p id="152c" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">我利用的另一个东西是<a class="ae kv" href="https://developer.apple.com/documentation/vision" rel="noopener ugc nofollow" target="_blank">视觉框架</a>，它内置了人脸检测功能，可以异步请求。它像用于FaceID一样工作稳定，并且很容易解决人脸识别的问题。下面是照片中人脸识别的一些例子的截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/16cf40496f8cce87336b9c6706d7fac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*0eEAgT1ezqg5zP94jipVKQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">人脸识别示例</p></figure><p id="0392" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事后看来，拥有有效且准确的ML模型是很好的，但这不是我面临的最困难的挑战，也不是最有影响力的挑战。最大的问题是如何以有用、有价值和直观的方式将这些模型集成到应用程序中。</p><h1 id="90d8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">其他技术说明</strong></h1><h2 id="2e06" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">异步很重要</strong></h2><p id="3d55" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">许多前端开发人员已经证实了处理异步事件和非阻塞I/O的重要性。Swift提供了充分的支持，如DispatchQueue /后台队列，以处理从用户交互到ML推理请求的事件，同时保持应用程序平稳运行。</p><h2 id="8c79" class="ml lu iq bd lv mm mn dn lz mo mp dp md lf mq mr mf lj ms mt mh ln mu mv mj mw bi translated"><strong class="ak">可扩展建筑</strong></h2><p id="f391" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">随着时间的推移，代码库只会变得更加复杂和混乱。我发现对<a class="ae kv" href="https://www.swiftbysundell.com/articles/structuring-swift-code/" rel="noopener ugc nofollow" target="_blank">组织原则</a>进行一些思考是很重要的，以确保项目可以持续迭代。</p><p id="4f26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一些有用的提示包括:</p><ul class=""><li id="9fe4" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">利用扩展分解复杂的Swift类</li><li id="a9a4" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">利用Swift惯例和模式，如生命周期方法</li><li id="5ce1" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">遵循视图/控制器命名模式</li></ul><h1 id="7e05" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">最终反射</strong></h1><p id="92aa" class="pw-post-body-paragraph kw kx iq ky b kz nm jr lb lc nn ju le lf no lh li lj np ll lm ln nq lp lq lr ij bi translated">为了成功启动iOS开发热潮，经过思考，我发现最重要的事情是:</p><ul class=""><li id="9361" class="my mz iq ky b kz la lc ld lf na lj nb ln nc lr nd ne nf ng bi translated">拥抱并尊重Swift的学习曲线——它在开始时感觉有点臃肿，但它是一种强大且得到良好支持的语言。</li><li id="59e1" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">注意关键的移动开发和性能问题，包括处理异步、使用委托和生命周期方法，或者缓存等等。</li><li id="e419" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">从一开始就建立一个可扩展的代码架构。</li><li id="14f2" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">使用CoreML——在构建更复杂的ML模型之前，有一些轻量级的方法可以开始。</li><li id="03fc" class="my mz iq ky b kz nh lc ni lf nj lj nk ln nl lr nd ne nf ng bi translated">最后，利用iOS框架和Xcode集成工具——对ML开发的调试、剖析有很大的支持。</li></ul><p id="c2af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我的博客。我期待着在接下来的帖子中分享更多关于CoreML、产品和设计思维的内容，这些都是我在应用开发中的经验。</p></div></div>    
</body>
</html>