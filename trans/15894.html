<html>
<head>
<title>Detecting Objects in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探测颤动中的物体</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/detecting-objects-in-flutter-4fe8cfccef14?source=collection_archive---------7-----------------------#2020-11-02">https://towardsdatascience.com/detecting-objects-in-flutter-4fe8cfccef14?source=collection_archive---------7-----------------------#2020-11-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="bff6" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a>，全面的指南</h2><div class=""/><div class=""><h2 id="1fe0" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用tflite和SSD-MobileNet</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/52a5e6264bbb047e426bee1c86a47e0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SLhvl0f7RIuPpMO_"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@betteratf8?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">韦斯顿·麦金农</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄|只是一些:D的物品</p></figure><h1 id="0de5" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">介绍</h1><p id="670e" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在本指南中，我们将使用<strong class="lz ja"> <em class="mt"> tflite </em> </strong>包和预训练的SSD-MobileNet模型在Flutter中开发一个应用程序，能够检测图像和实时摄像机流中的对象。这个应用程序能够离线检测对象。我们还将能够从应用程序中拍照，并将其输入到模型中进行检测。</p><div class="mu mv gp gr mw mx"><a href="https://github.com/rupakkarki27/object_detection" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd ja gy z fp nc fr fs nd fu fw iz bi translated">rupakkarki 27/对象检测</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">使用Flutter和TensorFlow Lite的对象检测应用程序。GitHub是超过5000万开发者共同工作的家园…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">github.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl ky mx"/></div></div></a></div><blockquote class="nm nn no"><p id="0ee1" class="lx ly mt lz b ma np ka mc md nq kd mf nr ns mi mj nt nu mm mn nv nw mq mr ms ij bi translated"><em class="iq">请注意，由于我繁忙的日程安排，我不再维护这个项目。最近版本的Flutter和dependencies中引入的突破性变化可能会破坏应用程序。但你可以自由选择回购，按照自己的方式改变事情。谢谢！</em></p></blockquote><h1 id="fb27" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">设置项目</h1><p id="c653" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">如果您还没有安装，安装程序会在您机器上跳动。<a class="ae le" href="https://flutter.dev/docs/get-started/install" rel="noopener ugc nofollow" target="_blank">Flutter网站上的这个</a>指南是一个很好的起点。设置Flutter后，在终端中输入以下命令创建一个新项目。</p><pre class="kp kq kr ks gt nx ny nz oa aw ob bi"><span id="cde9" class="oc lg iq ny b gy od oe l of og">$ flutter create object_detection<br/>$ cd object_detection</span></pre><p id="1803" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">现在，您可以在您喜欢的编辑器中打开您的项目。</p><h2 id="649f" class="oc lg iq bd lh oh oi dn ll oj ok dp lp mg ol om lr mk on oo lt mo op oq lv iw bi translated">安装软件包</h2><p id="6279" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在您的<em class="mt"> pubspec.yaml </em>文件中，在<em class="mt"> dependencies </em>部分下添加以下内容以安装所需的包。</p><pre class="kp kq kr ks gt nx ny nz oa aw ob bi"><span id="3f35" class="oc lg iq ny b gy od oe l of og">image_picker: ^0.6.7<br/>tflite: ^1.1.1<br/>camera: ^0.5.8+7</span></pre><p id="30d1" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">我们使用<em class="mt"> image_picker </em>从图库中选取图像，使用<em class="mt"> tflite </em>运行我们的模型，使用<em class="mt"> camera </em>包控制相机。你可以在<a class="ae le" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank"> pub.dev </a>上读到更多关于他们的信息。</p><p id="5fa0" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">在您的应用程序级别<em class="mt"> build.gradl </em> e文件(/android/app)中，在android块下添加以下行，以确保Flutter不会压缩您的模型或<em class="mt"> tflite </em>包。</p><pre class="kp kq kr ks gt nx ny nz oa aw ob bi"><span id="ec43" class="oc lg iq ny b gy od oe l of og">aaptOptions {<br/>  noCompress 'tflite'<br/>  noCompress 'lite'<br/>}</span></pre><h2 id="b201" class="oc lg iq bd lh oh oi dn ll oj ok dp lp mg ol om lr mk on oo lt mo op oq lv iw bi translated">模型</h2><p id="14be" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">您可以从上面提到的GitHub repo或任何地方下载SSD-MobileNet模型及其标签，并将它们放在您的项目中。然后，在您的<em class="mt"> pubspec.yaml </em>文件中添加您的资产。</p><pre class="kp kq kr ks gt nx ny nz oa aw ob bi"><span id="737c" class="oc lg iq ny b gy od oe l of og">assets:<br/>  - assets/models/ssd_mobilenet.tflite<br/>  - assets/models/labels.txt</span></pre></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="eb92" class="lf lg iq bd lh li oy lk ll lm oz lo lp kf pa kg lr ki pb kj lt kl pc km lv lw bi translated">初始化摄像机</h1><p id="003e" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">该应用程序的主要功能是以这样一种方式创建的，即所有的摄像机在应用程序启动后立即初始化。然后，摄像机描述被传递给所有需要它的类。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">初始化摄像机的主要功能</p></figure><h1 id="d86b" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">图像中的目标检测</h1><p id="9b05" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">为了检测图像中的对象，我们首先需要使用<em class="mt"> tflite </em>包中的<em class="mt"> Tflite.loadModel </em>方法加载模型。然后，我们需要从我们的图库中获取图像，或者通过启动相机从应用程序中拍摄一张图像。<em class="mt">相机</em>包提供了<em class="mt">获取图像</em>的方法，这两种方法都可以使用。</p><p id="4800" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">加载图像后，我们使用<em class="mt">TF lite . detectobjectonimage</em>方法将它输入到我们的模型中。该方法返回检测到的类别、置信度和兴趣点，这将帮助我们在对象周围绘制边界框。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">各种操作的功能</p></figure><h2 id="c285" class="oc lg iq bd lh oh oi dn ll oj ok dp lp mg ol om lr mk on oo lt mo op oq lv iw bi translated">绘制边界框</h2><p id="167f" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">围绕检测到的对象绘制边界框的基本思想是使用来自模型的兴趣点和图像尺寸。</p><p id="f5b2" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">使用堆栈小部件，我们可以将边界框放在图像的顶部。在定位的小部件中，我们放置一个四周有边框的容器。我们还可以通过简单地添加一个文本小部件并将置信度转换为百分比，以百分比的形式显示检测到的类及其准确性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">边界框的代码</p></figure><p id="4a35" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">静态图像检测页面有两个浮动操作按钮。使用其中一个，我们可以直接从图库中挑选图像，并在上面运行我们的模型。使用另一个，一个相机被打开，我们可以拍照，并把它提供给我们的模型。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/f0ded212eca93e3748217c8c2c6b249c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*NplAp6YZ80httYCgfOekQg.jpeg"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">模型检测图像中的对象(图片由作者提供)</p></figure></div><div class="ab cl or os hu ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="ij ik il im in"><h1 id="60c5" class="lf lg iq bd lh li oy lk ll lm oz lo lp kf pa kg lr ki pb kj lt kl pc km lv lw bi translated">实时目标检测</h1><p id="8b90" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">实时检测对象有点类似于检测图像中的对象。视频流中的每一帧都被视为一幅图像，模型在其上运行。该模型每帧输出结果，边界框在图像流上被一遍又一遍地重画。</p><p id="961f" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated"><em class="mt">相机</em>插件中的<em class="mt">相机控制器</em>对象有一个名为<em class="mt"> startImageStream </em>的方法，可用于向我们的模型提供帧。在这个方法中，我们可以调用<em class="mt">TF lite . detectobjectonframe</em>方法，该方法获取相机流并在我们的模型中运行它。该方法的其余部分是相同的，即模型返回detectedClass、confidence和poi，我们使用它们在相机流的顶部绘制边界框。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">实时检测</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/3a09fe6f7230d389336feee0aeae8236.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/1*7ZuHS_XkTn81YwRnk5LPGQ.gif"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">实时检测(GIF由作者提供)</p></figure><h1 id="ddd8" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">结论</h1><p id="f602" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我们开发了一个能够使用Flutter、<em class="mt"> tflite </em>包和一个预训练模型来检测对象的应用程序。该应用程序并不完美，可能无法在所有图像上工作。我们可以通过训练我们自己的模型来改善这一点，该模型可以以更高的准确性检测更多的类，或者使用其他一些强大的模型。</p><p id="610b" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">尽管有这个障碍，该应用程序在图像和视频光照良好的情况下表现非常好。对于那些希望将机器学习和Flutter知识结合起来的人来说，这是一个非常好的项目。我们还可以使用谷歌的<a class="ae le" href="https://teachablemachine.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">可教机器</a>来训练模型对特定类型的图像进行分类或检测。</p><blockquote class="nm nn no"><p id="81e8" class="lx ly mt lz b ma np ka mc md nq kd mf nr ns mi mj nt nu mm mn nv nw mq mr ms ij bi translated"><em class="iq"> tflite </em>插件目前只支持SSD-MobileNet和YOLO进行物体检测。</p></blockquote><p id="1f9b" class="pw-post-body-paragraph lx ly iq lz b ma np ka mc md nq kd mf mg ns mi mj mk nu mm mn mo nw mq mr ms ij bi translated">你可以在这里 查看项目回购<a class="ae le" href="https://github.com/rupakkarki27/object_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="lz ja">。如果有任何问题，请随时打开问题或创建一个公关。欢迎并鼓励任何反馈或建议。</strong></a></p><blockquote class="ph"><p id="9500" class="pi pj iq bd pk pl pm pn po pp pq ms dk translated">你也可以在这里 看看我的作品集<a class="ae le" href="http://www.rupakkarki.com.np" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">。</strong></a></p></blockquote></div></div>    
</body>
</html>