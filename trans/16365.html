<html>
<head>
<title>QuickStart: spaCy on AWS Lambda Up and Running in 10 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速启动:AWS Lambda上的空间在10分钟内启动并运行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/quickstart-spacy-on-aws-lambda-up-and-running-in-10-minutes-e347037a0ef8?source=collection_archive---------27-----------------------#2020-11-11">https://towardsdatascience.com/quickstart-spacy-on-aws-lambda-up-and-running-in-10-minutes-e347037a0ef8?source=collection_archive---------27-----------------------#2020-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="92cd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用spaCy进行无服务器计算的简单方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c3b17552904ad55dcd60d8d5ad16ae4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXIKppNwxsnsxq5h6Ro1og.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/osaka?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@takoyakiboy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> QHUNG TA </a>拍摄的照片</p></figure><p id="224b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们信守承诺，先把事情做好。如果您想进一步阅读，快速入门部分将提供进一步的讨论。我希望这种安排能节省你的时间。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2836" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">快速入门:循序渐进</h1><h2 id="7f2b" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">I .为空间设置Lambda层</h2><ul class=""><li id="28fa" class="ng nh it lb b lc ni lf nj li nk lm nl lq nm lu nn no np nq bi translated">登录AWS帐户。创建新的Lambda函数。选择Python 3.8，并使用默认设置。</li><li id="fc51" class="ng nh it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">进入λ<em class="nw">【配置】【设计器】</em>，点击<em class="nw">图层</em>。然后点击下方面板上的<em class="nw">【添加图层】</em>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/a15ee5154aadf95be4e5893a57065862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vn8abubmtN2tyURVgpPRQA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图一。AWS Lambda设计器(截图)|作者图片</p></figure><ul class=""><li id="acc7" class="ng nh it lb b lc ld lf lg li ny lm nz lq oa lu nn no np nq bi translated">选择<em class="nw">【指定ARN】。</em>使用下面的ARN作为空位，然后点击<em class="nw">【添加】</em></li></ul><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="6306" class="mu md it oc b gy og oh l oi oj">arn:aws:lambda:us-west-1:770693421928:layer:Klayers-python38-spacy:30</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/2f262e09cfaf4a5ec5f79a07ccc8e1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQQfpLK3bregL-KbzJiD1w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图二。Lambda -&gt;添加图层(截图)|作者图片</p></figure><ul class=""><li id="6312" class="ng nh it lb b lc ld lf lg li ny lm nz lq oa lu nn no np nq bi translated">重复上述步骤，并添加语言模型层，使用以下ARN。</li></ul><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="4e25" class="mu md it oc b gy og oh l oi oj">arn:aws:lambda:us-west-1:770693421928:layer:Klayers-python38-spacy_model_en_small:1</span></pre><ul class=""><li id="d40c" class="ng nh it lb b lc ld lf lg li ny lm nz lq oa lu nn no np nq bi translated">图层完成后应该是这样的。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/eb48dedc29e5cc1f2fa85f3a75cb57bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ia7fr3zJna7E1EXq8pKXRw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图三。空间的AWS Lambda图层(截图)|作者图片</p></figure><h2 id="09d3" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">二。调整和运行Lambda</h2><ul class=""><li id="18e7" class="ng nh it lb b lc ni lf nj li nk lm nl lq nm lu nn no np nq bi translated">为Lambda中的空间分配更多内存。为内存选择512 MB，为超时选择10秒。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/5c875ff5924fdd119a711a759f26573c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dj2_MqpM1_TxArAmh_I1MQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图4。AWS Lambda调优(截图)|图片作者</p></figure><ul class=""><li id="f494" class="ng nh it lb b lc ld lf lg li ny lm nz lq oa lu nn no np nq bi translated">将空间导入Lambda。让我们编写一个Hello World函数来测试我们的层是否正常工作。</li></ul><pre class="kj kk kl km gt ob oc od oe aw of bi"><span id="54c7" class="mu md it oc b gy og oh l oi oj">import json<br/><strong class="oc iu">import spacy</strong></span><span id="9e2a" class="mu md it oc b gy om oh l oi oj">def lambda_handler(event, context):<br/>    <strong class="oc iu">nlp = spacy.load("/opt/en_core_web_sm-2.2.5/en_core_web_sm/en_core_web_sm-2.2.5")</strong><br/>    doc = nlp("Hello World from spaCy")</span><span id="5ce5" class="mu md it oc b gy om oh l oi oj">    return {<br/>        'statusCode': 200,<br/>        'body': json.dumps(doc.text)<br/>    }</span></pre><ul class=""><li id="64e3" class="ng nh it lb b lc ld lf lg li ny lm nz lq oa lu nn no np nq bi translated">结果应该是这样的。您可能会注意到，默认的128 MB内存分配是不够的，因为Hello World程序使用了200 MB。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/e96badd07cb4f5f6fbf24f4ac3392435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBWWBmJNEG_a8tjStTk6hg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图五。AWS Lambda执行结果(截图)|图片作者</p></figure><p id="0127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！现在spaCy已经可以使用了。如果你已经得到了你所需要的，请随意回到你忙碌的日子。</p><p id="76c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有时间，我想分享一下我在NLP(自然语言处理)方面的经验。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e34e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">我为什么选择空间</h1><p id="e35f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">其实我第一次用<a class="ae ky" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> TextBlob </a>开始NLP(自然语言处理)，感觉像是在一个阳光明媚的下午也能学到东西。TextBlob有一个方便的名词短语提取器，它可以轻松地进行情感分析。我在一个数据可视化项目中使用了TextBlob，很快就能得到一些结果，这很有趣。</p><p id="eb21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从四月份开始，我开始从事一个计算诗歌项目，它需要对复杂的文学作品进行深入的分析。我发现TextBlob不够复杂，无法处理长而复杂的结构。就在那时，我转到了西班牙。</p><blockquote class="or os ot"><p id="73da" class="kz la nw lb b lc ld ju le lf lg jx lh ou lj lk ll ov ln lo lp ow lr ls lt lu im bi translated">spaCy旨在帮助您做真正的工作——构建真正的产品，或收集真正的见解。图书馆尊重你的时间，并尽量避免浪费时间。它易于安装，其API简单且高效。我们喜欢把spaCy看作是自然语言处理轨道上的Ruby。— spacy.io</p></blockquote><p id="814c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不确定Ruby on Rails的类比是否仍然有意义，但是spaCy对我来说工作得很好。看看太空<a class="ae ky" href="https://spacy.io/universe" rel="noopener ugc nofollow" target="_blank">宇宙</a>，印象相当深刻。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/31d521e2f30464569a2abb3a3eecbd8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r6uQlD93y21oPtxk78x12A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图六。spaCy Universe |图片来自spaCy.io</p></figure><h1 id="64ce" class="mc md it bd me mf oy mh mi mj oz ml mm jz pa ka mo kc pb kd mq kf pc kg ms mt bi translated">AWS Lambda &amp; spaCy</h1><p id="047f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">我的目标是开发一个基于云的应用程序，所以我需要在云上运行spaCy。Lambda是AWS上最具成本效益的选择，因为它只对请求进入的时间计费。AWS上的虚拟机将对其所有正常运行时间收费。作为一个强大的软件包，spaCy非常大，它的默认发行版超过了Lambda要求的250 MB的限制。</p><p id="6aae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们已经付出了额外的努力来减小spaCy的大小，也有DIY说明来将spaCy放入Lambda，但如果你决心要实现它，这需要一些认真的努力。</p><p id="e81c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，<a class="ae ky" href="https://www.keithrozario.com/2019/04/spacy-in-a-lambda-layer.html" rel="noopener ugc nofollow" target="_blank"> Keith Rozario </a>做了一个ARN准备用作AWS层。这是您在本文的快速入门部分看到的内容。如果你真的用秒表计时，你的结果可能会低于10分钟。</p><p id="dba0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干杯！</p></div></div>    
</body>
</html>