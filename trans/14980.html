<html>
<head>
<title>Technical Pattern Recognition for Trading in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中交易的技术模式识别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/technical-pattern-recognition-for-trading-in-python-63770aab422f?source=collection_archive---------8-----------------------#2020-10-15">https://towardsdatascience.com/technical-pattern-recognition-for-trading-in-python-63770aab422f?source=collection_archive---------8-----------------------#2020-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="85d8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">回溯测试一些奇特的技术模式并评估它们的性能</h2></div><p id="9313" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">注来自《走向数据科学》的编辑:</em> </strong> <em class="le">虽然我们允许独立作者根据我们的</em> <a class="ae lf" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="le">规则和指导方针</em> </a> <em class="le">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae lf" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="le">读者术语</em> </a> <em class="le">。</em></p><p id="9003" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我刚刚出版了一本新书《Python中的<strong class="kk iu"><em class="le"/></strong>新技术指标》。它对复杂的交易策略进行了更完整的描述和补充，Github页面致力于不断更新代码。如果你对此感兴趣，请随时访问下面的链接，或者如果你喜欢购买PDF版本，你可以在Linkedin上联系我。</p><div class="lg lh gp gr li lj"><a href="https://www.amazon.com/gp/product/B09919GQ22/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B09919GQ22&amp;linkCode=as2&amp;tag=sofien-20&amp;linkId=bc5df3f6ab0f3af2df79641c56b949ba" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">交易策略之书</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">亚马逊网站:交易策略之书(9798532885707): Kaabar，Sofien:书籍</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">www.amazon.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx ly lj"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="e776" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">模式识别是搜索和识别具有近似相似结果的循环模式。这意味着当我们设法找到一个模式，我们有一个预期的结果，我们希望看到并通过我们的交易采取行动。例如，头肩顶形态是典型的技术形态，预示着趋势即将反转。文献对这一著名构型的预测能力有不同看法。在本文中，我们将讨论一些奇特的<em class="le">目标</em>模式。我说客观是因为它们有清晰的规则，不像经典的模式，如头肩底和双顶底。我们将讨论由Tom Demark创建的三种相关模式:</p><ul class=""><li id="7927" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu"> TD微分。</strong></li><li id="446d" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu"> TD反向差速器。</strong></li><li id="3154" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu"> TD反微分。</strong></li></ul><p id="c852" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于其他技术交易模式的更多信息，请查看下面的文章，这篇文章展示了Waldo配置，并对其中一些进行了回溯测试:</p><div class="lg lh gp gr li lj"><a href="https://medium.com/@kaabar.sofien/wheres-waldo-67f73baa0929" rel="noopener follow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">沃尔多在哪？</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">著名的技术分析师Tom Demark创造了许多成功的指标和模式。在他众多的…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">medium.com</p></div></div><div class="ls l"><div class="mu l lu lv lw ls lx ly lj"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="fedb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">TD差分组已创建(或发现？)以便找到短期反转或延续。他们应该通过给我们一个额外的信念因素来帮助确认我们的偏见。例如，假设你预期美元兑加元在未来几周将会升值。你有自己的交易理由，你发现在更高的时间框架内有一些模式似乎证实了你的想法。这肯定会让你在交易时更舒服。下面是触发三种不同模式的条件汇总表。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/25de28c9ea2939bf87c645613da5f2e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T_r7tFntKNSc4ESD4PWQPA.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">三种价格模式的条件摘要。(图片由作者提供)</p></figure><p id="acab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们开始单独介绍这些模式之前，我们需要从差异群体的角度来理解买卖压力的概念。为了计算购买压力，我们使用以下公式:</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/a64050cb3fc887fe891ec0a1bec68521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*6pq1l_7Xa9PxjO5pkVIxAg.png"/></div></figure><p id="d09f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了计算卖出压力，我们使用以下公式:</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/b8ac137a80de5dc2da094deda5d7a4a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*ucyDRuYluEyWaMXkYPsM0w.png"/></div></figure><p id="c777" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们将逐一介绍它们，首先展示一个真实的例子，然后用python编写一个搜索它们的函数，最后我们将创建基于模式的交易策略。值得注意的是，我们将回测M5棒线的非常短期的范围(从2019年11月开始)，每笔交易的买卖价差为0.1点子(因此，每轮成本为0.2英镑)。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="aba2" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">TD差分模式</h1><p id="aacf" class="pw-post-body-paragraph ki kj it kk b kl oe ju kn ko of jx kq kr og kt ku kv oh kx ky kz oi lb lc ld im bi translated">这种模式试图寻找短期趋势反转；因此，它可以被看作是小幅调整和盘整的预测指标。下面是一个TD差异模式的蜡烛图的例子。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oj"><img src="../Images/c368ec620553d0e97d1b445f0ce9ea60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJloqNbpKIxgwlhbXjIAXA.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">该模式的示例。注意反应的短期趋势。(图片由作者提供)</p></figure><p id="bfe7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们想用Python编写条件代码，我们可以有一个类似于下面的函数:</p><p id="914c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">买入(做多)触发器:</p><ul class=""><li id="14d8" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次收盘各比先前少。</strong></li><li id="190e" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前买入压力&gt;前期买入压力。</strong></li><li id="bdd9" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前卖压&lt;前期卖压。</strong></li></ul><p id="e1f4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卖出(做空)触发器:</p><ul class=""><li id="79d7" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次收盘各大于前一次。</strong></li><li id="3018" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前买入压力&lt;前期买入压力。</strong></li><li id="945e" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前卖压&gt;前期卖压。</strong></li></ul><pre class="mw mx my mz gt ok ol om on aw oo bi"><span id="210f" class="op nn it ol b gy oq or l os ot">def TD_differential(Data, true_low, true_high, buy, sell):<br/>    for i in range(len(Data)):<br/>        <br/>        # True low<br/>        Data[i, true_low] = min(Data[i, 2], Data[i - 1, 3])<br/>        Data[i, true_low] = Data[i, 3] - Data[i, true_low]<br/>            <br/>        # True high  <br/>        Data[i, true_high] = max(Data[i, 1], Data[i - 1, 3])<br/>        Data[i, true_high] = Data[i, 3] - Data[i, true_high]<br/>        <br/>        # TD Differential<br/>        if Data[i, 3] &lt; Data[i - 1, 3] and Data[i - 1, 3] &lt; Data[i - 2, 3] and \<br/>           Data[i, true_low] &gt; Data[i - 1, true_low] and Data[i, true_high] &lt; Data[i - 1, true_high]: <br/>               Data[i, buy] = 1</span><span id="278c" class="op nn it ol b gy ou or l os ot">if Data[i, 3] &gt; Data[i - 1, 3] and Data[i - 1, 3] &gt; Data[i - 2, 3] and \<br/>           Data[i, true_low] &lt; Data[i - 1, true_low] and Data[i, true_high] &gt; Data[i - 1, true_high]: <br/>               Data[i, sell] = -1</span></pre><p id="bdaa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们在尊重风险管理系统的同时回测这个策略，这个系统使用ATR来设置目标止损和止盈订单。我发现，通过使用4倍ATR的止损点和1倍ATR的目标点，算法可以产生最佳的利润(无论是正的还是负的)。很明显，这明显违反了基本的风险回报比规则，然而，请记住，这是一个系统化的策略，以牺牲风险回报比为代价，寻求命中率的最大化。</p><p id="0812" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">提醒:</em> </strong> <em class="le">风险回报比(或回报风险比)衡量平均来说，你愿意承担的每一个风险，你期望得到多少回报。例如，你想以100美元买入一只股票，你的目标是110美元，你的止损单是95美元。你的风险回报比是多少？很明显，你是在拿5美元冒险来获得10美元，因此10/5 = 2.0。因此，你的风险报酬率是2。通常建议比值始终高于1.0，最佳值为2.0。在这种情况下，如果你交易相等的数量(大小),并用你预期收入的一半冒险，你只需要33.33%的命中率就能达到盈亏平衡。一个好的风险回报比将减轻追求高命中率的压力。</em></p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ov"><img src="../Images/c0ec958e14e584e36a43de911ae6d3c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0MxD1RrC7uF101RFy2NjA.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">欧元兑美元-道指差异模式的信号图示例。(图片由作者提供)</p></figure><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ow"><img src="../Images/0b5557d9fe9db2122aff615129c52a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1BCHhi8ka6yYiNO-oqkr8g.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">10种主要货币对的TD差异策略的权益曲线。(图片由作者提供)</p></figure><p id="6df3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来它在澳元和欧元上运行良好，但在一些中期表现不佳。此外，除了澳元兑美元、GBPUSD元和美元兑加元之外，股票曲线的总体趋势是向上的。对于只基于一种模式的策略来说，如果我们添加其他元素，它确实会显示出一些潜力。如果我们看一下荣誉奖，澳元兑加元的表现指标还不错，命中率高达69.72%，预期每笔交易为0.44美元。</p><p id="34cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你也对更多的技术指标和使用Python创建策略感兴趣，那么我关于技术指标的畅销书可能会让你感兴趣:</p><div class="lg lh gp gr li lj"><a href="https://www.amazon.com/gp/product/B08WZL1PNL/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B08WZL1PNL&amp;linkCode=as2&amp;tag=sofien-20&amp;linkId=e3cb9716bb6a07cf6c8b9fb585412b07" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">Python中的新技术指标</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">亚马逊网站:Python中的新技术指标:9798711128861: Kaabar，Sofien先生:书籍</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">www.amazon.com</p></div></div><div class="ls l"><div class="ox l lu lv lw ls lx ly lj"/></div></div></a></div></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="b26e" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">TD反向差分模式</h1><p id="28f5" class="pw-post-body-paragraph ki kj it kk b kl oe ju kn ko of jx kq kr og kt ku kv oh kx ky kz oi lb lc ld im bi translated">这种模式寻求短期趋势的延续；因此，它可以被视为一个趋势何时足够强劲以继续下去的预测器。这是有用的，因为我们知道，趋势是我们的朋友，通过加入另一个朋友，我们可能有更多的机会制定有利可图的策略。让我们检查条件以及如何编码:</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oj"><img src="../Images/6f24fb2363577180b71f3bf99d1c30f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6xHFlFEmFwr0faG9W7ENw.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">该模式的示例。(图片由作者提供)</p></figure><p id="b09c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">买入(做多)触发器:</p><ul class=""><li id="6917" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次收盘各不到前一次。</strong></li><li id="7288" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前买入压力&lt;前期买入压力。</strong></li><li id="2758" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前卖压&gt;之前卖压</strong></li></ul><p id="9afc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卖出(做空)触发器:</p><ul class=""><li id="8983" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次收盘各大于前一次。</strong></li><li id="1d66" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前买入压力&gt;前期买入压力。</strong></li><li id="ab6c" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">当前卖压&lt;之前卖压</strong></li></ul><pre class="mw mx my mz gt ok ol om on aw oo bi"><span id="49b5" class="op nn it ol b gy oq or l os ot">def TD_reverse_differential(Data, true_low, true_high, buy, sell):<br/>    for i in range(len(Data)):<br/>        <br/>        # True low<br/>        Data[i, true_low] = min(Data[i, 2], Data[i - 1, 3])<br/>        Data[i, true_low] = Data[i, 3] - Data[i, true_low]<br/>            <br/>        # True high  <br/>        Data[i, true_high] = max(Data[i, 1], Data[i - 1, 3])<br/>        Data[i, true_high] = Data[i, 3] - Data[i, true_high]<br/>        <br/>        # TD Differential<br/>        if Data[i, 3] &lt; Data[i - 1, 3] and Data[i - 1, 3] &lt; Data[i - 2, 3] and \<br/>           Data[i, true_low] &lt; Data[i - 1, true_low] and Data[i, true_high] &gt; Data[i - 1, true_high]: <br/>               Data[i, buy] = 1</span><span id="19d7" class="op nn it ol b gy ou or l os ot">if Data[i, 3] &gt; Data[i - 1, 3] and Data[i - 1, 3] &gt; Data[i - 2, 3] and \<br/>           Data[i, true_low] &gt; Data[i - 1, true_low] and Data[i, true_high] &lt; Data[i - 1, true_high]: <br/>               Data[i, sell] = -1</span></pre><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ov"><img src="../Images/bf08949c0ebd80279576b16310c1d231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cva8VSatjzfxEUDnEs9nnw.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">欧元兑美元-道指反向差异模式的信号图示例。(图片由作者提供)</p></figure><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ov"><img src="../Images/a209e1bba9caab2310f055f8614de183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4T46cNgXsm5mebaiFFwhUQ.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">TD反向差异策略在10种主要货币对上的权益曲线。(图片由作者提供)</p></figure><p id="6c60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来它在GBPUSD和欧元上运行良好，但在一些中期表现不佳。权益曲线的总体趋势没有第一种模式那么令人印象深刻。如果我们看看一些荣誉提名，GBPUSD的表现指标也不算太差，命中率高达67.28%，预期每笔交易为<strong class="kk iu">0.34美元</strong>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e6e1" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">TD反差分模式</h1><p id="0650" class="pw-post-body-paragraph ki kj it kk b kl oe ju kn ko of jx kq kr og kt ku kv oh kx ky kz oi lb lc ld im bi translated">这种模式也试图寻找短期趋势反转，因此，它可以被视为预测小的修正和巩固。它类似于TD差分模式。以下是Python函数遵循的条件。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oj"><img src="../Images/7a16579d0a8209917eca7d3874859c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHWducsW1EAm8qZTTueCyw.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">该模式的示例。(图片由作者提供)</p></figure><p id="4b97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">买入(做多)触发器:</p><ul class=""><li id="df86" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次关闭，每次都比前一次低，</strong></li><li id="bfb9" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">一个比前一个收盘价更高的收盘价，然后</strong></li><li id="c2d7" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">相对于前一根棒线的收盘价的较低收盘价。</strong></li></ul><p id="371e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卖出(做空)触发器:</p><ul class=""><li id="2734" class="mg mh it kk b kl km ko kp kr mi kv mj kz mk ld ml mm mn mo bi translated"><strong class="kk iu">两次关闭时每一次都比前一次高，</strong></li><li id="42a0" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">比前一个收盘价低的收盘价，</strong></li><li id="fdf7" class="mg mh it kk b kl mp ko mq kr mr kv ms kz mt ld ml mm mn mo bi translated"><strong class="kk iu">相对于前一根棒线的收盘价而言更高的收盘价。</strong></li></ul><pre class="mw mx my mz gt ok ol om on aw oo bi"><span id="9456" class="op nn it ol b gy oq or l os ot">def TD_anti_differential(Data, true_low, true_high, buy, sell):<br/>    for i in range(len(Data)):<br/>        <br/>        if Data[i, 3] &lt; Data[i - 1, 3] and Data[i - 1, 3] &gt; Data[i - 2, 3] and \<br/>           Data[i - 2, 3] &lt; Data[i - 3, 3] and Data[i - 3, 3] &lt; Data[i - 4, 3]: <br/>               Data[i, buy] = 1</span><span id="da71" class="op nn it ol b gy ou or l os ot">if Data[i, 3] &gt; Data[i - 1, 3] and Data[i - 1, 3] &lt; Data[i - 2, 3] and \<br/>           Data[i - 2, 3] &gt; Data[i - 3, 3] and Data[i - 3, 3] &gt; Data[i - 4, 3]: <br/>               Data[i, sell] = -1</span></pre><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ov"><img src="../Images/06e674129b2698209d83ec2c39ebcf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XlW5oFp3BhTux8cOVPa1pA.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">欧元兑美元-道指反差异模式的信号图示例。(图片由作者提供)</p></figure><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ov"><img src="../Images/991ac13729e6057d12e6b54d5d8b8de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Duew8ice4cl5dKBnu9ApRA.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">TD反差异策略对10种主要货币对的权益曲线。(图片由作者提供)</p></figure><p id="5dbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来远不如前两个策略给人的印象深刻。权益曲线的总体趋势是混合的。如果我们看看一些荣誉提名，欧元兑新西兰元的表现指标也不算太差，命中率最高为<strong class="kk iu"> 64.45% </strong>，预期每笔交易为<strong class="kk iu">0.38美元</strong>。</p><p id="bb63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，我们有如此高命中率的原因是我们在回溯测试开始时强加的糟糕的风险回报比。目标在1x ATR，止损在4x ATR，命中率需要足够高，以补偿更大的损失。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="9cd0" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">结论</h1><p id="a0cc" class="pw-post-body-paragraph ki kj it kk b kl oe ju kn ko of jx kq kr og kt ku kv oh kx ky kz oi lb lc ld im bi translated">我总是对模式着迷，因为我相信我们的世界包含一些可预测的结果，尽管从噪音中提取信号极其困难，但我们面对未来所能做的就是做好准备，准备到底是什么？它预测可能发生的情况，以便我们在它们到来时做好准备。在<a class="ae lf" href="https://www.amazon.com/dp/B089CWQWF8" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> <em class="le">《后验之书》</em> </strong> </a>中，我讨论了更多关于烛台的图案，揭开了关于烛台图案的一些主流知识。</p><p id="887a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我总是建议你做适当的回溯测试，了解任何与交易相关的风险。例如，上述结果并不具有很强的指示性，因为我们使用的价差非常具有竞争力，可能被认为很难在零售交易领域持续获得。然而，有了机构买卖价差，就有可能降低成本，比如系统的中频策略开始盈利。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi oy"><img src="../Images/aeb85732fa665c48e37a5227e5a13107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHL7U4AYRhKhIZIjq-tDEw.jpeg"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">图片来自<a class="ae lf" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1181864" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lf" href="https://pixabay.com/users/msandersmusic-1972097/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1181864" rel="noopener ugc nofollow" target="_blank"> msandersmusic </a></p></figure></div></div>    
</body>
</html>