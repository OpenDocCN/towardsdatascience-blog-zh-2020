<html>
<head>
<title>Augment Pneumonia Chest X-ray Diagnosis with Amazon Rekognition Custom Labels</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Amazon Rekognition定制标签增强肺炎胸部x光诊断</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/augment-pneumonia-diagnosis-with-amazon-rekognition-custom-labels-6f2fb79a986d?source=collection_archive---------44-----------------------#2020-11-15">https://towardsdatascience.com/augment-pneumonia-diagnosis-with-amazon-rekognition-custom-labels-6f2fb79a986d?source=collection_archive---------44-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9b208ee6e921a35ecceb0fa13a95bafd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-VvpUKBNxkDjZx4rPtMssA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">亚马逊Rekognition自定义标签胸部x光预测模型测试结果</p></figure><p id="8068" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在尼日利亚读高中的时候，我想成为一名医生——我们都知道结果如何。公平地说，我进入了医学院预科，但在第二年意识到我不是被设计来切割人体的。在那之后，我换了学校学习计算机科学，我们都知道结果如何。然而，我并没有失去对改善医学科学的执着。2013年，我的学士论文重点是使用基于案例的推理来诊断伤寒。如果我从头再来，我将利用自然语言理解方面的进步来利用临床记录，实时预测伤寒病例。保持警惕。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><p id="bc3c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在过去的几周里，我一直在为<a class="ae lh" href="https://aws.amazon.com/rekognition/custom-labels-features/" rel="noopener ugc nofollow" target="_blank">亚马逊识别定制标签</a> ⁵、来自<a class="ae lh" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>的令人惊叹的人工智能服务寻找新的用例——这是继切片面包之后最伟大的事情。在仔细研究了Kaggle之后，我偶然发现了胸部x光图像(肺炎)数据集，这是我的灵光一现。如果医疗从业者可以在没有Google⁴的计算能力和技术专长的情况下利用人工智能诊断肺炎，会怎么样？</p><blockquote class="li"><p id="c830" class="lj lk iq bd ll lm ln lo lp lq lr kz dk translated">假设:如果医疗从业者可以在没有谷歌的计算能力和技术专长的情况下利用人工智能诊断肺炎，会怎么样？</p></blockquote><h1 id="d8c8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">这项工作</h1><h2 id="7b09" class="mq lt iq bd lu mr ms dn ly mt mu dp mc kn mv mw mg kr mx my mk kv mz na mo nb bi translated">准备数据集</h2><p id="0655" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">为了使用Amazon Rekognition自定义Labels⁵训练模型，我需要将数据集保存在本地并通过Amazon Rekognition自定义标签控制台手动上传，或者已经存储在Amazon S3存储桶中。考虑到数据集的大小和要完成的任务，我决定利用云的力量——AWS。我启动了我的亚马逊SageMaker笔记本，安装了<a class="ae lh" href="https://github.com/Kaggle/kaggle-api" rel="noopener ugc nofollow" target="_blank"> Kaggle python库</a>。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/77a97be72d85a5bdf4a8dc99d72ae848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMZXt16epTRRFnU1U0KZzQ.png"/></div></div></figure><p id="a8ec" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下一步是将图像上传到S3的一个地点。然而，我意识到一个小故障。尽管Kaggle数据集页面的信息显示了3类——正常、细菌性肺炎和病毒性肺炎，但文件夹仅分为2类——正常和肺炎。通过对图像的简单浏览，我意识到它们可以根据文件名进一步分成3类，这要感谢数据集管理员。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/2e9d8d1e175bd3e99f6178e8ae0ef7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jyrxFYun077H8Ii-sL-hQ.png"/></div></div></figure><p id="6568" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着3类到位，数据被上传到我的S3桶，并准备进行训练。这是我做过的任何计算机视觉任务中最简单的数据争论，少了11行代码。</p><p id="0bc6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">完成上述步骤后，我必须使数据集对Amazon Rekognition自定义标签可用。我简单地从在亚马逊自定义Labels⁵中创建一个新的数据集开始，在web控制台上点击几下，指向我在S3中的数据集位置。Amazon Rekognition自定义标签为您提供了直接从控制台标注数据集的机会。如果你有一些图片，我会推荐这个。在我的场景中，我有超过3k张图片，并通过文件夹结构将它们分成不同的类别，我必须选中“<em class="nn">,根据图片存储的文件夹自动为图片添加标签。</em>”选项，这样Amazon Rekognition可以自动推断标签。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/88d44fb4249e385afb0f0eedcb765043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eAtkGniSlXhSZfUO7FfdBg.png"/></div></div></figure><p id="1fef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我得到了什么:</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/a0ffee258c087afcf914f37d09f16bdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*djqAFX1lv6QWbRH3iFvBrQ.png"/></div></div></figure><p id="65ee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着数据集导入Amazon Rekognition，是时候训练我的医疗诊断助手了。</p><h2 id="65a9" class="mq lt iq bd lu mr ms dn ly mt mu dp mc kn mv mw mg kr mx my mk kv mz na mo nb bi translated">训练模型</h2><p id="51a0" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">要在Amazon Rekognition自定义标签中训练模型，首先要创建一个项目。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/6290f8fd90749064d17ae24d76c29505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*iDF8q42f5gCFiRu323N8Fw.png"/></div></figure><p id="3fb4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一旦创建了项目，Amazon Rekognition自定义标签就可以训练我的模型了。不到5次点击，我就开始了我的模特训练。为此，我:</p><ol class=""><li id="34fa" class="nr ns iq ke b kf kg kj kk kn nt kr nu kv nv kz nw nx ny nz bi translated">选择了项目，</li><li id="f1f7" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">选择我的训练数据集，</li><li id="fba1" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">指示Amazon Rekognition应该拆分训练数据集，</li><li id="a503" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">点击了“火车”橙色按钮，然后</li><li id="cd34" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">等待(用机器学习模型训练时最需要的属性)。</li></ol><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/24437b35016b8a91aa4fc1c9b15a59be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J-W-NfaRkzCuJ_lE99SBtw.png"/></div></div></figure><h1 id="d1e2" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md og mf mg mh oh mj mk ml oi mn mo mp bi translated">结果呢</h1><p id="3a7e" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">正如我提到的，我开始证明我的假设是错误的，医疗从业者不可能在没有谷歌的情况下使用人工智能对胸部X-rays⁸进行分类。结果证明我错了:<strong class="ke ir">确实有可能</strong>，感谢亚马逊Rekognition定制Labels⁵.让我们从评估我花了多少钱开始。</p><h2 id="874d" class="mq lt iq bd lu mr ms dn ly mt mu dp mc kn mv mw mg kr mx my mk kv mz na mo nb bi translated"><strong class="ak">费用</strong></h2><ol class=""><li id="9463" class="nr ns iq ke b kf nc kj nd kn oj kr ok kv ol kz nw nx ny nz bi translated">数据集在网上很容易找到，这让我几乎不用花钱就能下载。</li><li id="a935" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">我的亚马逊SageMaker笔记本花费了我大约2美元，我也用它来完成其他任务</li><li id="0d43" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">亚马逊S3成本低于0.90美元</li><li id="89e5" class="nr ns iq ke b kf oa kj ob kn oc kr od kv oe kz nw nx ny nz bi translated">亚马逊Rekognition定制标签的模型培训持续1.308小时，每小时1美元；大约2美元。</li></ol><p id="6a57" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">总培训费用约为5美元(4.90美元)。这不需要谷歌的财力。</p><p id="a499" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了用训练好的模型进行预测，亚马逊Rekognition定制标签的费用是4美元/小时。因此，如果我将我的生产用例设计为在一个28天的月中每天4小时进行批量预测，我将花费大约450.00美元/月(包括可扩展性和基础设施管理)。从而帮助全球成千上万的医疗从业者提高肺炎诊断水平，挽救数百万人的生命。看到更好的主意了吗？</p><h2 id="cf69" class="mq lt iq bd lu mr ms dn ly mt mu dp mc kn mv mw mg kr mx my mk kv mz na mo nb bi translated">模型度量</h2><p id="c232" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">我不会去详细定义每个指标，我已经在以前的post⁷和亚马逊Rekognition自定义Labels⁵文件中广泛地这样做了。技术上，模型性能精度为0.946 ~=94.6%。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/d707c82dc4a226cf1b5794dad2557385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRrujKkToVdEbrQsjYPjsw.png"/></div></div></figure><p id="c438" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">总之，在胸部x射线数据集上的Amazon Rekognition自定义标签上训练的肺炎诊断模型能够正确预测患者是否患有细菌性肺炎、病毒性肺炎或零肺炎病例。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/53c400d0d25176ab3be9af32c6eface6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Um0lh1ADsuctPoQsFdR6NA.png"/></div></div></figure><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/b28cb7b3b02e5dd117be690e494f67d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8DQ7EWLQSerkt9rb-Qri8Q.png"/></div></div></figure><h1 id="d756" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md og mf mg mh oh mj mk ml oi mn mo mp bi translated">此外</h1><p id="110a" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">想想这对全世界卫生保健的重要性和规模，即使是在最偏远的地方。想想可以重用这种方法的医疗用例。想想我们可以通过用人工智能增强医疗从业者的X射线诊断来拯救生命。</p></div><div class="ab cl la lb hu lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ij ik il im in"><p id="6c0b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">迫不及待地想知道您将使用亚马逊Rekognition自定义Labels⁵.构建什么你可以通过<a class="ae lh" href="mailto:elesin.olalekan@gmail.com" rel="noopener ugc nofollow" target="_blank">电子邮件</a>联系我，在<a class="ae lh" href="https://twitter.com/elesinOlalekan" rel="noopener ugc nofollow" target="_blank">推特</a>关注我，或者在<a class="ae lh" href="https://www.linkedin.com/in/elesinolalekan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p><h1 id="2872" class="ls lt iq bd lu lv lw lx ly lz ma mb mc md og mf mg mh oh mj mk ml oi mn mo mp bi translated">参考</h1><p id="df73" class="pw-post-body-paragraph kc kd iq ke b kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ng kx ky kz ij bi translated">[1]克曼尼，丹尼尔；张、康；Goldbaum，Michael(2018)，“用于分类的<em class="nn">标记光学相干断层扫描(OCT)和胸部X射线图像</em>”，Mendeley Data，v2<a class="ae lh" href="http://dx.doi.org/10.17632/rscbjbr9sj.2" rel="noopener ugc nofollow" target="_blank">http://dx.doi.org/10.17632/rscbjbr9sj.2</a></p><p id="8d66" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[2]更大的善的意义，维基百科，<a class="ae lh" href="https://en.wiktionary.org/wiki/greater_good" rel="noopener ugc nofollow" target="_blank">https://en.wiktionary.org/wiki/greater_good</a></p><p id="acfb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[3]基于案例的推理，维基百科，<a class="ae lh" href="https://en.wikipedia.org/wiki/Case-based_reasoning" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Case-based_reasoning</a></p><p id="697d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[4]利用已裁定的图像标签开发胸部x光的深度学习模型，<a class="ae lh" href="https://ai.googleblog.com/2019/12/developing-deep-learning-models-for.html" rel="noopener ugc nofollow" target="_blank">https://ai . Google blog . com/2019/12/Developing-Deep-Learning-Models-for . html</a></p><p id="8aea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[5]亚马逊Rekognition定制标签，<a class="ae lh" href="https://aws.amazon.com/rekognition/custom-labels-features/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/rekognition/custom-labels-features/</a></p><p id="2570" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[6]胸部x光影像(肺炎)，<a class="ae lh" href="https://www.kaggle.com/paultimothymooney/chest-xray-pneumonia" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/paultimothymooney/胸部x光-肺炎</a></p><p id="2500" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[7]带亚马逊Rekognition定制标签的AI Powered Video Assistant裁判，<a class="ae lh" href="https://medium.com/@elesin.olalekan/ai-powered-video-assistant-referee-with-amazon-rekognition-custom-labels-5e4902b47ce5" rel="noopener">https://medium . com/@ elesin . olalekan/AI-Powered-Video-Assistant-referend-with-Amazon-Rekognition-Custom-Labels-5e 4902 b 47 ce 5</a></p><p id="bc37" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">[8] Google details AI以人类级别的准确度对胸部X射线进行分类，<a class="ae lh" href="https://venturebeat.com/2019/12/03/google-details-ai-that-classifies-chest-x-rays-with-human-level-accuracy/" rel="noopener ugc nofollow" target="_blank">https://venturebeat . com/2019/12/03/Google-details-AI-that-classified-胸部X射线以人类级别的准确度进行分类/ </a></p></div></div>    
</body>
</html>