<html>
<head>
<title>Setting up TensorFlow (GPU) on Windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows 10上设置TensorFlow (GPU)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setting-up-tensorflow-on-windows-gpu-492d1120414c?source=collection_archive---------2-----------------------#2020-10-08">https://towardsdatascience.com/setting-up-tensorflow-on-windows-gpu-492d1120414c?source=collection_archive---------2-----------------------#2020-10-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fbe2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就我个人而言，我讨厌花费数小时来设置机器学习工具进行培训——尤其是在Windows上。</p><p id="e5fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去几年的多次尝试和错误之后(即Googling和StackOverflow-ing)，我决定分享一个我想出的设置TensorFlow的方法。</p><p id="0850" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将这篇文章献给其他数据科学家，他们一直在查看充满错误消息的命令提示符。</p><p id="c4fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">警告:</strong>你必须有一个<a class="ae kl" href="https://developer.nvidia.com/cuda-gpus" rel="noopener ugc nofollow" target="_blank">支持CUDA的GPU卡</a>。</p><h1 id="b215" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">1)安装所需的软件</h1><h2 id="e0c3" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">概观</h2><p id="967b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">安装(按顺序):</p><ul class=""><li id="d8c8" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated">可视化工作室</li><li id="cb60" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">蟒蛇</li><li id="161a" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">NVIDIA CUDA工具包+ cuDNN</li></ul><h2 id="24a7" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">可视化工作室</h2><p id="37b6" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">首先，在这里安装来自<a class="ae kl" href="http://visualstudio.microsoft.com" rel="noopener ugc nofollow" target="_blank">的Visual Studio</a>。安装社区版，因为专业版和企业版需要订阅。</p><p id="d0a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意:</strong> Visual Studio是<strong class="jp ir">不是</strong>跟VS代码IDE一样！</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/eacfddf0a9dc92a3fcf0618a5c65887c.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*fzZH9es5dqGJg8YzUXaTgA.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">Visual Studio下载页面</p></figure><h2 id="ca48" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">蟒蛇</h2><p id="b606" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">从<a class="ae kl" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">这里</a>下载并安装Anaconda。</p><p id="e59d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您不需要在安装过程中向PATH环境变量添加Anaconda。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/2c0b614937e29ee2a3dd6b734b61b8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*Y1AFZkBgyC2jHcllghyEtQ.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">蟒蛇装置</p></figure><h2 id="a820" class="lk kn iq bd ko ll lm dn ks ln lo dp kw jy lp lq la kc lr ls le kg lt lu li lv bi translated">英伟达软件</h2><p id="d711" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">安装Visual Studio后，安装NVIDIA CUDA Toolkit和cuDNN。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/2ee836e9017baec6f90aa527e092f4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRJl5SPKpn3OwpoJISC0dA.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">来自<a class="ae kl" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank">https://www.tensorflow.org/install/gpu</a>的软件要求</p></figure><p id="c26a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到当前日期(2020年10月)，必须安装CUDA <strong class="jp ir"> 10.1 </strong>和cuDNN SDK <strong class="jp ir"> 7.6 </strong> ( <strong class="jp ir">这个极其重要</strong>)。</p><p id="e3ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">警告:支持的版本可能会改变，因此请务必查看<a class="ae kl" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank">官方TensorFlow文档</a>。</p><p id="a14e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最新的CUDA版本是11——请访问<a class="ae kl" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank"> CUDA档案库</a>和<a class="ae kl" href="https://developer.nvidia.com/rdp/cudnn-archive" rel="noopener ugc nofollow" target="_blank"> cuDNN档案库</a>获取更早的版本。</p><p id="042d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装CUDA只需运行可执行文件。exe)。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/82dcfa1a881b679fedbfabc0d8610f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Is5beTnFXhPdgjMIdnK0LQ.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">CUDA 10.1。可执行程序的扩展名</p></figure><p id="4f0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">解压</strong> cuDNN库，将所有文件移动到CUDA目录下。如果您没有更改安装目录，您的CUDA将位于以下位置:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="6c11" class="lk kn iq nk b gy no np l nq nr">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA</span></pre><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/5eaf32f4c6d8c1e476a1be083456a514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*EgzmoxW_R3QkQR-T-R4CKA.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">解压cuDNN下载并移动文件到CUDA</p></figure><h1 id="9957" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">2)安装张量流</h1><p id="0c11" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">打开Anaconda提示符并检查Python的版本。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nt"><img src="../Images/dfd89f5c17dcb5dbfafc12a2e5832d46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiH3KD_RAlMMccuitaXOJw.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">Anaconda提示</p></figure><p id="0313" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以输入下面的命令来检查您当前运行的Python版本。</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="6eca" class="lk kn iq nk b gy no np l nq nr">python --version</span></pre><p id="3cab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，创建一个新的Anaconda虚拟环境:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="32c2" class="lk kn iq nk b gy no np l nq nr">conda create -n tf python=PYTHON_VERSION</span></pre><ul class=""><li id="c0ad" class="mb mc iq jp b jq jr ju jv jy md kc me kg mf kk mg mh mi mj bi translated"><em class="mp"> tf </em>可以改为任何其他名称(如<em class="mp"> python_tensorflow </em></li><li id="7304" class="mb mc iq jp b jq mk ju ml jy mm kc mn kg mo kk mg mh mi mj bi translated">记得用你的PYTHON版本替换<em class="mp"> PYTHON_VERSION </em>(例如<em class="mp"> 3.8.5 </em>)</li></ul><p id="7ff5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，激活您刚刚创建的环境:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="6fc4" class="lk kn iq nk b gy no np l nq nr">conda activate tf</span></pre><p id="5a10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后安装TensorFlow:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="e9f1" class="lk kn iq nk b gy no np l nq nr">pip install tensorflow</span></pre><p id="aa12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Do <strong class="jp ir"> not </strong> <em class="mp"> pip安装tensorflow</em><strong class="jp ir"><em class="mp">-GPU</em></strong><em class="mp"/>因为它将安装tensor flow的旧版本(YouTube上的<strong class="jp ir"><em class="mp"/></strong>旧教程使用此命令)。</p><h1 id="85f8" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">3)测试张量流(GPU)</h1><p id="c897" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">通过运行以下命令，测试TensorFlow是否已正确安装，以及是否可以检测到CUDA和cuDNN:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="1cb3" class="lk kn iq nk b gy no np l nq nr">python -c "import tensorflow as tf; print(tf.reduce_sum(tf.random.normal([1000, 1000])))"</span></pre><p id="6c5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有错误，那么恭喜您，您已经成功安装了TensorFlow。</p><h1 id="f989" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">4)安装必要的库/包</h1><p id="fc6c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我个人经常使用Jupyter Notebook、Seaborn和Matplotlib，所以我确保通过运行以下命令来安装这些库:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="9cc3" class="lk kn iq nk b gy no np l nq nr">pip install jupyter ipykernel seaborn matplotlib</span></pre><h1 id="6f05" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">5)蟒蛇和朱庇特</h1><p id="d322" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">将您之前创建的Anaconda环境添加到Jupyter Notebook中。</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="66c6" class="lk kn iq nk b gy no np l nq nr">python -m ipykernel install --user --name ENVIRONMENT_NAME --display-name "KERNEL_DISPLAY_NAME"</span></pre><h1 id="3148" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">6)最终测试</h1><p id="f1ed" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">返回到基本conda环境，打开Jupyter笔记本:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="983e" class="lk kn iq nk b gy no np l nq nr">conda activate base<br/>jupyter notebook</span></pre><p id="ad79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个新的Jupyter笔记本并打开它:</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/0a998607772ed32439e423453c7043c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*TyXgYHdumjgzmZcEpTs0Ag.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">Jupyter笔记本上的Anaconda环境</p></figure><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f753f508972d3dd7461efde21247b296.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*Y_smMd8cwoFnNjnV87IZRw.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">新创建的笔记本</p></figure><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nw"><img src="../Images/3b0ecfcb740b392f93827eea3bff9d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t9eyh2vg89GJG0irqtBKQQ.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">Jupyter笔记本</p></figure><p id="87e4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行下面这三行代码:</p><pre class="mr ms mt mu gt nj nk nl nm aw nn bi"><span id="27b5" class="lk kn iq nk b gy no np l nq nr">!python --version</span><span id="c4ac" class="lk kn iq nk b gy nx np l nq nr">import tensorflow as tf</span><span id="8f60" class="lk kn iq nk b gy nx np l nq nr">print("Num GPUs Available", len(tf.config.experimental.list_physical_devices('GPU')))</span></pre><p id="94f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果它能检测到你的Python和你的GPU，你就成功安装了TensorFlow (GPU)和机器学习必备工具！</p></div></div>    
</body>
</html>