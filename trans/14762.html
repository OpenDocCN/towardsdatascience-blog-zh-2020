<html>
<head>
<title>The handling missing values exclusive pythonic guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理缺失值专用pythonic指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/handling-missing-values-the-exclusive-pythonic-guide-9aa883835655?source=collection_archive---------38-----------------------#2020-10-11">https://towardsdatascience.com/handling-missing-values-the-exclusive-pythonic-guide-9aa883835655?source=collection_archive---------38-----------------------#2020-10-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e057" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/getting-started" rel="noopener" target="_blank">入门</a></h2><div class=""/><div class=""><h2 id="0e29" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">处理缺失值的3种最佳方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/1d7d999b72665721d519aa00263e0c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pn98uyPHjwUa0TE_4Fzrpg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@theeastlondonphotographer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Ehimetalor Akhere Unuabona </a>在<a class="ae lh" href="https://unsplash.com/s/photos/missing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e87d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于大多数数据科学项目来说，处理缺失值是探索性数据分析(EDA)的关键步骤，无论是开发机器学习模型还是商业分析。包括scikit-learn在内的大多数库都不会使用带有缺失值的数据来构建模型。由于数据量巨大，找到获得最佳估算值结果的技巧是成为独角兽数据科学家的巨大优势。在本文中，我们将回顾3个最成功的开源短python代码行，它们可以组合起来处理缺失值。</p><p id="0bbc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这篇文章中，我们将分析样本flowers、titanic和house prices Kaggle数据集，您可以在这里找到<a class="ae lh" href="https://www.kaggle.com/philboaz/top-3-methods-for-handling-missing-values-2020" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/7b8534ea7bd8ca1f6ec1a814483e3cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nnsHmNbTnl0rLVQs24rNzg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@jamesoliverbarr?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">詹姆斯·巴尔</a>在<a class="ae lh" href="https://unsplash.com/s/photos/male-model-abs-nature?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="b2b3" class="mm mn it bd mo mp mq mr ms mt mu mv mw ki mx kj my kl mz km na ko nb kp nc nd bi translated"><strong class="ak">简介</strong></h1><p id="a4e2" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">有许多处理丢失值的场景，丢失的数字在python中通常表示为<strong class="lk jd"> nan </strong>，这是“不是数字”的缩写。传统的方法是检测缺少值的单元格，并使用以下命令计算它们在每一列中的数量:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="2609" class="no mn it nk b gy np nq l nr ns">missing_val_count_by_column = (data.isnull().sum())</span><span id="371c" class="no mn it nk b gy nt nq l nr ns">print(missing_val_count_by_column[missing_val_count_by_column &gt; 0</span></pre><p id="ae1e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">大多数Kaggle比赛中都有3种主要方法，让我们来回顾一下:</p><h2 id="a476" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated"><strong class="ak"> 1。</strong> <strong class="ak">效率较低:删除缺少值的列</strong></h2><p id="79ea" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">删除缺少值的列的一种方法是在训练/测试数据帧中删除相同的列，如下所示:</p><p id="e2ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从原始数据帧:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="5d50" class="no mn it nk b gy np nq l nr ns">data_without_missing_values = original_data.dropna(axis=1)</span></pre><p id="f7dd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过训练，测试数据帧:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="b568" class="no mn it nk b gy np nq l nr ns">cols_with_missing = [col for col in original_data.columns</span><span id="858e" class="no mn it nk b gy nt nq l nr ns">if original_data[col].isnull().any()]</span><span id="daf1" class="no mn it nk b gy nt nq l nr ns">reduced_original_data = original_data.drop(cols_with_missing, axis=1)</span><span id="d359" class="no mn it nk b gy nt nq l nr ns">reduced_test_data = test_data.drop(cols_with_missing, axis=1)</span></pre><p id="b9f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">删除丢失的值后，您的模型将无法访问该列，从而导致重要数据的丢失。但是，当列中的大多数值都丢失时，这种策略可能是合适的。</p><h2 id="3ecd" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated">一个更好的选择:插补</h2><p id="54f3" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">比删除数据集列更好的选择是用数据分布平均值填充缺失值，如下所示:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="8d65" class="no mn it nk b gy np nq l nr ns">from sklearn.impute import SimpleImputer</span><span id="b793" class="no mn it nk b gy nt nq l nr ns">my_imputer = SimpleImputer()</span><span id="0a88" class="no mn it nk b gy nt nq l nr ns">data_with_imputed_values = my_imputer.fit_transform(original_data)</span></pre><p id="abe1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该选项通常集成在scikit-learn管道中，使用比平均值更复杂的统计指标。管道是简化模型验证和部署的关键策略。</p><h2 id="8a45" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated"><strong class="ak"> 3)最佳选择</strong></h2><p id="0f43" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">最后一种策略是系统地随机填充缺失值。如果您需要获得最佳结果，您需要考虑您的列统计指标。下面是它可能的样子:</p><p id="b2b5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">#制作副本以避免更改原始数据(输入时)</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="a47c" class="no mn it nk b gy np nq l nr ns">new_data = original_data.copy()</span></pre><p id="ed8c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">#制作新栏，说明将估算的内容</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="debb" class="no mn it nk b gy np nq l nr ns">cols_with_missing = (col for col in new_data.columns</span><span id="2911" class="no mn it nk b gy nt nq l nr ns">if new_data[col].isnull().any())</span><span id="616e" class="no mn it nk b gy nt nq l nr ns">for col in cols_with_missing:</span><span id="5e86" class="no mn it nk b gy nt nq l nr ns">new_data[col + ‘_was_missing’] = new_data[col].isnull()</span></pre><p id="76ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">#插补</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="e942" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="bc91" class="no mn it nk b gy nt nq l nr ns">new_data = pd.DataFrame(my_imputer.fit_transform(new_data))</span><span id="f4ef" class="no mn it nk b gy nt nq l nr ns">new_data.columns = original_data.columns</span></pre><p id="0f95" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在大多数情况下，这种方法会大大改善你的结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/457b7a02f99ab990e4f974d070cba7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lClTE6pk0Ai8Q0xectkBvQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@zeynep_e?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">泽内普</a>在<a class="ae lh" href="https://unsplash.com/s/photos/missing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="3312" class="mm mn it bd mo mp mq mr ms mt mu mv mw ki mx kj my kl mz km na ko nb kp nc nd bi translated"><strong class="ak">案例分析</strong></h1><p id="50dc" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">现在让我们用最著名的Kaggle数据集来练习。我们将回顾泰坦尼克号，花卉，价格住房卡格尔竞争数据集的例子。</p><p id="e93f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了掌握缺失值处理，我建议您使用本<strong class="lk jd"> </strong> <a class="ae lh" href="https://jovian.ml/yeonathan/top-3-methods-for-handling-missing-values-2020" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">笔记本</strong> </a>遵循每个步骤，并对您的数据集重复相同的步骤。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/b160e5f60f5e8aef2542bbdebdb64394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRP42q3z9R2Bbo2A8tiejw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@gambler_94?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">руслангамзалиев</a>在<a class="ae lh" href="https://unsplash.com/s/photos/titanic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="7000" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated">1.泰坦尼克</h2><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="8026" class="no mn it nk b gy np nq l nr ns">data = pd.read_csv(‘../input/titanicdataset-traincsv/train.csv’)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/6e5efc0dfc32ae26556f36107346651c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zP5poKV8tEbZiUda--MmA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">泰坦尼克号数据集(891行× 12列)<strong class="bd oh"> ( </strong>图片由作者提供)</p></figure><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="cd3b" class="no mn it nk b gy np nq l nr ns">from sklearn.ensemble import RandomForestRegressor</span><span id="5f20" class="no mn it nk b gy nt nq l nr ns">from sklearn.metrics import mean_absolute_error</span><span id="43ba" class="no mn it nk b gy nt nq l nr ns">from sklearn.model_selection import train_test_split</span><span id="2586" class="no mn it nk b gy nt nq l nr ns">titanic_target = data.Survived</span><span id="9137" class="no mn it nk b gy nt nq l nr ns">titanic_predictors = data.drop(‘Survived’, axis=1)</span></pre><p id="01b5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了保持例子简单，我们将只使用数字预测器。</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="2732" class="no mn it nk b gy np nq l nr ns">titanic_numeric_predictors = titanic_predictors.select_dtypes(exclude=[‘object’])</span><span id="918a" class="no mn it nk b gy nt nq l nr ns">X = titanic_numeric_predictors.select_dtypes(exclude=[‘object’])</span><span id="43e8" class="no mn it nk b gy nt nq l nr ns">y = titanic_target</span></pre><p id="2fa2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #在训练和测试数据集中划分数据。</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="f7e4" class="no mn it nk b gy np nq l nr ns">X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2)</span></pre><p id="cc3b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法一</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="9b6c" class="no mn it nk b gy np nq l nr ns">cols_with_missing = [col for col in X_train.columns</span><span id="c9ca" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any()]</span><span id="3c76" class="no mn it nk b gy nt nq l nr ns">reduced_X_train = X_train.drop(cols_with_missing, axis=1)</span><span id="92d5" class="no mn it nk b gy nt nq l nr ns">reduced_X_test = X_test.drop(cols_with_missing, axis=1)</span><span id="1556" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from dropping columns with Missing Values:”)</span><span id="0984" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(reduced_X_train, reduced_X_test, y_train, y_test))</span></pre><p id="3da0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">删除缺失值列的平均绝对误差:0.391340782122905 </strong></p><p id="0299" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法二</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="0647" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="ed32" class="no mn it nk b gy nt nq l nr ns">imputed_X_train = my_imputer.fit_transform(X_train)</span><span id="0793" class="no mn it nk b gy nt nq l nr ns">imputed_X_test = my_imputer.transform(X_test)</span><span id="8eae" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation:”)</span><span id="383c" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train, imputed_X_test, y_train, y_test))</span></pre><p id="6350" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">插补的平均绝对误差:0.394525139664804</strong></p><p id="f5d8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法三</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="fa93" class="no mn it nk b gy np nq l nr ns">imputed_X_train_plus = X_train.copy()</span><span id="0637" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = X_test.copy()</span><span id="0e41" class="no mn it nk b gy nt nq l nr ns">cols_with_missing = (col for col in X_train.columns</span><span id="d6db" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any())</span><span id="c720" class="no mn it nk b gy nt nq l nr ns">for col in cols_with_missing:</span><span id="f4df" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus[col + ‘_was_missing’] = imputed_X_train_plus[col].isnull()</span><span id="f423" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus[col + ‘_was_missing’] = imputed_X_test_plus[col].isnull()</span></pre><p id="7f84" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #插补</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="a4f0" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="4102" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus = my_imputer.fit_transform(imputed_X_train_plus)</span><span id="ee65" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = my_imputer.transform(imputed_X_test_plus)</span><span id="3e39" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation while Track What Was Imputed:”)</span><span id="2fea" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train_plus, imputed_X_test_plus, y_train, y_test))</span></pre><p id="5afb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">追踪插补内容时插补的平均绝对误差:0.382178770945</strong></p><p id="5ad1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> = &gt;最好的方法是:方法1 </strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oj"><img src="../Images/6fbbf383b2e1c05f5f4c9afe6561a149.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1GIJIJ4GZgz2DQLKinH2Pw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">瑟奎拉在<a class="ae lh" href="https://unsplash.com/@shotbycerqueira?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的<a class="ae lh" href="https://unsplash.com/@shotbycerqueira?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">照片</a></p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="9f7f" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated">2.花</h2><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="136b" class="no mn it nk b gy np nq l nr ns">data = pd.read_csv(‘../input/flower-type-prediction-machine-hack/Train.csv’)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ok"><img src="../Images/097d96598e0a3a08b8054f3aa254d36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gCQKOICuqYr1ETvrabn56w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">花卉数据集(12666行× 7列)<strong class="bd oh"> ( </strong>图片由作者提供)</p></figure><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="f150" class="no mn it nk b gy np nq l nr ns">from sklearn.ensemble import RandomForestRegressor</span><span id="8941" class="no mn it nk b gy nt nq l nr ns">from sklearn.metrics import mean_absolute_error</span><span id="58d9" class="no mn it nk b gy nt nq l nr ns">from sklearn.model_selection import train_test_split</span><span id="4bd3" class="no mn it nk b gy nt nq l nr ns">flower_target = data.Class</span><span id="43b0" class="no mn it nk b gy nt nq l nr ns">flower_predictors = data.drop(‘Class’, axis=1)</span></pre><p id="0829" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了保持例子简单，我们将只使用数字预测器。</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="3bd9" class="no mn it nk b gy np nq l nr ns">flower_numeric_predictors = flower_predictors.select_dtypes(exclude=[‘object’])</span><span id="dd3c" class="no mn it nk b gy nt nq l nr ns">X = flower_numeric_predictors.select_dtypes(exclude=[‘object’])</span><span id="a4ce" class="no mn it nk b gy nt nq l nr ns">y = flower_target</span></pre><p id="f4fc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #在训练和测试数据集中划分数据。</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="3153" class="no mn it nk b gy np nq l nr ns">X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2)</span></pre><p id="2eae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法1 </strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="c14a" class="no mn it nk b gy np nq l nr ns">cols_with_missing = [col for col in X_train.columns</span><span id="7ac3" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any()]</span><span id="b9e2" class="no mn it nk b gy nt nq l nr ns">reduced_X_train = X_train.drop(cols_with_missing, axis=1)</span><span id="27ec" class="no mn it nk b gy nt nq l nr ns">reduced_X_test = X_test.drop(cols_with_missing, axis=1)</span><span id="0ab9" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from dropping columns with Missing Values:”)</span><span id="8fd5" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(reduced_X_train, reduced_X_test, y_train, y_test))</span></pre><p id="ef27" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">删除缺失值列的平均绝对误差:1.316111627552926 </strong></p><p id="baf5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法二</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="5ee1" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="8c07" class="no mn it nk b gy nt nq l nr ns">imputed_X_train = my_imputer.fit_transform(X_train)</span><span id="4679" class="no mn it nk b gy nt nq l nr ns">imputed_X_test = my_imputer.transform(X_test)</span><span id="c1ea" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation:”)</span><span id="af97" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train, imputed_X_test, y_train, y_test))</span></pre><p id="2c95" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">插补的平均绝对误差:1.337274481525667</strong></p><p id="0f35" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法三</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="5c0c" class="no mn it nk b gy np nq l nr ns">imputed_X_train_plus = X_train.copy()</span><span id="992d" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = X_test.copy()</span><span id="1c7b" class="no mn it nk b gy nt nq l nr ns">cols_with_missing = (col for col in X_train.columns</span><span id="0080" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any())</span><span id="5691" class="no mn it nk b gy nt nq l nr ns">for col in cols_with_missing:</span><span id="78ad" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus[col + ‘_was_missing’] = imputed_X_train_plus[col].isnull()</span><span id="0180" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus[col + ‘_was_missing’] = imputed_X_test_plus[col].isnull()</span></pre><p id="6e94" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #插补</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="90e0" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="e7c4" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus = my_imputer.fit_transform(imputed_X_train_plus)</span><span id="8335" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = my_imputer.transform(imputed_X_test_plus)</span><span id="8017" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation while Track What Was Imputed:”)</span><span id="9748" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train_plus, imputed_X_test_plus, y_train, y_test))</span></pre><p id="1da9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">追踪插补内容时插补的平均绝对误差:1.392727466344</strong></p><p id="184c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> = &gt;最好的方法是:方法1 </strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/09350b0608366d931afd510db9c4bf47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LBulOe3IwD7yUS18IjpxLw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">巴黎歌剧院由阿莱西娅·科考尼在Unsplash演出</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="b864" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated">3.房价</h2><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="be9b" class="no mn it nk b gy np nq l nr ns">data = pd.read_csv(‘../input/house-prices-advanced-regression-techniques/train.csv’)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/b868f59d260c4cef31ade14f86df6648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKKHS3vNJOhKiBGrgdBcqw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">住房数据集(1460行× 81列)<strong class="bd oh"> ( </strong>图片由作者提供)</p></figure><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="e422" class="no mn it nk b gy np nq l nr ns">from sklearn.ensemble import RandomForestRegressor</span><span id="5b1c" class="no mn it nk b gy nt nq l nr ns">from sklearn.metrics import mean_absolute_error</span><span id="d77e" class="no mn it nk b gy nt nq l nr ns">from sklearn.model_selection import train_test_split</span><span id="fd79" class="no mn it nk b gy nt nq l nr ns">house_target = data.SalePrice</span><span id="73e8" class="no mn it nk b gy nt nq l nr ns">house_predictors = data.drop(‘SalePrice’, axis=1)</span></pre><p id="d557" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了保持例子简单，我们将只使用数字预测器。</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="5f93" class="no mn it nk b gy np nq l nr ns">house_numeric_predictors = house_predictors.select_dtypes(exclude=[‘object’])</span><span id="7d12" class="no mn it nk b gy nt nq l nr ns">X = house_numeric_predictors.select_dtypes(exclude=[‘object’])</span><span id="b7ed" class="no mn it nk b gy nt nq l nr ns">y = house_target</span></pre><p id="ab36" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #划分训练和测试数据集中的数据。</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="7525" class="no mn it nk b gy np nq l nr ns">X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.2)</span></pre><p id="7dd2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法1 </strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="10fd" class="no mn it nk b gy np nq l nr ns">cols_with_missing = [col for col in X_train.columns</span><span id="27c0" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any()]</span><span id="a1bc" class="no mn it nk b gy nt nq l nr ns">reduced_X_train = X_train.drop(cols_with_missing, axis=1)</span><span id="6194" class="no mn it nk b gy nt nq l nr ns">reduced_X_test = X_test.drop(cols_with_missing, axis=1)</span><span id="b623" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from dropping columns with Missing Values:”)</span><span id="d6c3" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(reduced_X_train, reduced_X_test, y_train, y_test))</span></pre><p id="300a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">删除有缺失值的列后的平均绝对误差:36860 . 48686863686</p><p id="4242" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法二</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="9f3d" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="020e" class="no mn it nk b gy nt nq l nr ns">imputed_X_train = my_imputer.fit_transform(X_train)</span><span id="b072" class="no mn it nk b gy nt nq l nr ns">imputed_X_test = my_imputer.transform(X_test)</span><span id="7d62" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation:”)</span><span id="5717" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train, imputed_X_test, y_train, y_test))</span></pre><p id="c143" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">插补的平均绝对误差:18960 . 686868686867</strong></p><p id="2b49" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">方法3 </strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="8d95" class="no mn it nk b gy np nq l nr ns">imputed_X_train_plus = X_train.copy()</span><span id="e06b" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = X_test.copy()</span><span id="047a" class="no mn it nk b gy nt nq l nr ns">cols_with_missing = (col for col in X_train.columns</span><span id="1d7a" class="no mn it nk b gy nt nq l nr ns">if X_train[col].isnull().any())</span><span id="e2eb" class="no mn it nk b gy nt nq l nr ns">for col in cols_with_missing:</span><span id="f691" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus[col + ‘_was_missing’] = imputed_X_train_plus[col].isnull()</span><span id="c920" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus[col + ‘_was_missing’] = imputed_X_test_plus[col].isnull()</span></pre><p id="0a63" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oi"> #插补</em></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="f290" class="no mn it nk b gy np nq l nr ns">my_imputer = SimpleImputer()</span><span id="c584" class="no mn it nk b gy nt nq l nr ns">imputed_X_train_plus = my_imputer.fit_transform(imputed_X_train_plus)</span><span id="f7a7" class="no mn it nk b gy nt nq l nr ns">imputed_X_test_plus = my_imputer.transform(imputed_X_test_plus)</span><span id="8b21" class="no mn it nk b gy nt nq l nr ns">print(“Mean Absolute Error from Imputation while Track What Was Imputed:”)</span><span id="0c37" class="no mn it nk b gy nt nq l nr ns">print(score_dataset(imputed_X_train_plus, imputed_X_test_plus, y_train, y_test))</span></pre><p id="ecd5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">追踪插补内容时，插补的平均绝对误差:18941</strong></p><p id="7988" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> = &gt;最好的方法是:方法1 </strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/44e8cef3ff4caecd38549f81c14d9991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-R7xZgbFQBCyUW6YBtFJQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">巴黎喷泉由<a class="ae lh" href="https://unsplash.com/@vdapinto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">熊伟·平托</a>在<a class="ae lh" href="https://unsplash.com/s/photos/paris-hotel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上完成</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="d311" class="mm mn it bd mo mp mq mr ms mt mu mv mw ki mx kj my kl mz km na ko nb kp nc nd bi translated"><strong class="ak">结论</strong></h1><p id="40d0" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">如果你有空闲时间，我建议你读读这篇文章:</p><div class="oo op gp gr oq or"><a href="https://medium.com/@smeshram258/kaggle-5-day-data-cleaning-challenge-for-beginners-day-1-handling-missing-values-ee48b01e69cb" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd jd gy z fp ow fr fs ox fu fw jc bi translated">Kaggle初学者5天数据清理挑战:第1天-处理缺失值</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">最大的数据科学平台Kaggle刚刚为数据初学者发起了为期5天的数据清理挑战…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">medium.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf lb or"/></div></div></a></div><h2 id="a508" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated"><strong class="ak">总结</strong></h2><p id="5540" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">参考此<a class="ae lh" href="https://www.kaggle.com/philboaz/top-3-methods-for-handling-missing-values-2020" rel="noopener ugc nofollow" target="_blank">链接</a>，使用这些方法对这些数据集进行完整的缺失数据分析。</p><p id="d26a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个简单的概述提醒了在数据科学中使用python处理缺失值时使用多种方法的重要性。这篇文章涵盖了3个基本的Python处理缺失值，以创建一个完整的探索工作流，以及有用的文档。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/9983f533ff330d8f02b73857666fa61f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-xLDOvhj9LVQE-b9PuH0w.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">歌剧《巴黎》由<a class="ae lh" href="https://unsplash.com/@lailagebhard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莱拉·格布哈德</a>在<a class="ae lh" href="https://unsplash.com/@lailagebhard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上演</p></figure><h2 id="a41d" class="no mn it bd mo nu nv dn ms nw nx dp mw lr ny nz my lv oa ob na lz oc od nc iz bi translated"><strong class="ak">希望你喜欢，继续探索！！！</strong></h2></div></div>    
</body>
</html>