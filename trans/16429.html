<html>
<head>
<title>Mastering Anonymous Functions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握Python中的匿名函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mastering-anonymous-functions-in-python-75bcd4332dfa?source=collection_archive---------34-----------------------#2020-11-12">https://towardsdatascience.com/mastering-anonymous-functions-in-python-75bcd4332dfa?source=collection_archive---------34-----------------------#2020-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="97d1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解Python Lambda表达式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/421e37a683688a6c540895d00fdfe267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-G3VTHIfp3m_3X8MG7PaA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/photo/apple-coffee-computer-cup-459653/" rel="noopener ugc nofollow" target="_blank">像素</a>上的<a class="ae ky" href="https://www.pexels.com/@pixabay" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><p id="14ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数定义是软件编程的重要组成部分。在python中，lambda表达式可以用来匿名定义简单的函数。例如，计算乘法的函数可以替换为lambda表达式。在这篇文章中，我们将讨论如何使用lambda表达式在python中定义匿名函数。</p><p id="12fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个单行函数，它返回两个输入整数值的乘积:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="634c" class="ma mb it lw b gy mc md l me mf">def product(x, y):<br/>    return x*y</span></pre><p id="24b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们用整数5和10调用这个函数，并打印我们得到的返回值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b165" class="ma mb it lw b gy mc md l me mf">print("Product:",product(5, 10))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/ae419c253c3f01c96f12984eb30dd4f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:336/format:webp/1*dEyIlV1Adtd8SpbIRfwEPg.png"/></div></figure><p id="14b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这是一个简单的函数，它只对单个表达式“x*y”求值，因此可以用lambda表达式替换它:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4234" class="ma mb it lw b gy mc md l me mf">product_value = lambda x, y: x*y</span></pre><p id="703b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">lambda表达式包含关键字“lambda”、输入x和y、一个冒号以及我们想要计算的表达式。如果我们回头看看我们最初的函数定义:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b357" class="ma mb it lw b gy mc md l me mf">def product(x, y):<br/>    return x*y</span></pre><p id="a210" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到这些表达看起来非常相似。最大的区别是在我们的lambda表达式中没有“def”关键字、“return”关键字和函数名。</p><p id="2255" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用x = 5和y = 10作为输入来打印这个函数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="abab" class="ma mb it lw b gy mc md l me mf">print("Product w/ Lambda Expression:",product_value(5,10))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f8547dce3cd3bc034abe15b06bb978c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*UfykGx9HUn8iTzMamK3Cug.png"/></div></figure><p id="183a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">lambda表达式的另一个有趣的应用是在熊猫的数据框中。对于这个例子，我们将使用网飞、Prime Video、Hulu和Disney Plus 数据集上的<em class="mi">电影，可以在这里找到<a class="ae ky" href="https://www.kaggle.com/ruchi798/movies-on-netflix-prime-video-hulu-and-disney" rel="noopener ugc nofollow" target="_blank">。</a></em></p><p id="9d78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将数据读入熊猫数据框:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5ac1" class="ma mb it lw b gy mc md l me mf">import pandas as pd <br/>pd.set_option('display.max_columns', None)<br/>pd.set_option('display.max_rows', None)<br/>df = pd.read_csv("MoviesOnStreamingPlatforms_updated.csv")</span></pre><p id="c140" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将打印该数据中可用的列:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="63d1" class="ma mb it lw b gy mc md l me mf">print(df.columns)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/83a732e211d5284d7fdae86379927680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nT3ETJPpEXnJg3nMY5o_ww.png"/></div></div></figure><p id="03ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们删除“未修改:0”列，并打印前五行数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c83a" class="ma mb it lw b gy mc md l me mf">del df['Unnamed: 0’]<br/>print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/0e10208c73a97fb1fcbd58cf023c8a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MaYmMwJ3WXJJ2xMxtG6QEg.png"/></div></div></figure><p id="97ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用“assign()”方法将lambda表达式应用于单个列。假设我们想创建一个新列，从“烂番茄”列的值中删除“%”符号。我们可以用lambda表达式来实现。我们将把我们的新专栏命名为“rt_ratings”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f939" class="ma mb it lw b gy mc md l me mf">df = df.assign(rt_ratings = lambda x: x['Rotten Tomatoes'].str.rstrip('%') )<br/>print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/c82e283481096500be69b901629cedd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R592VPjhXRwO9OQBdHx0SA.png"/></div></div></figure><p id="fc43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个例子是，如果我们想将“IMDb”评级四舍五入到最接近的整数。我们将我们的新列命名为“round_imdb”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d501" class="ma mb it lw b gy mc md l me mf">df = df.fillna(0)<br/>df = df.assign(round_imdb = lambda x: x['IMDb'].astype(int))<br/>print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/54b0d7b63cdbccc82f4cfba74a1447ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5c3HhNU2i1TLRbdw8b532Q.png"/></div></div></figure><p id="dca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是我鼓励你自己动手处理数据和编写代码。</p><h2 id="4738" class="ma mb it bd mn mo mp dn mq mr ms dp mt li mu mv mw lm mx my mz lq na nb nc nd bi translated">结论</h2><p id="2b14" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">总之，在这篇文章中，我们讨论了如何在python中使用lambda表达式定义匿名函数。首先，我们展示了如何定义一个匿名函数来返回两个整数的乘积。接下来，我们讨论了如何将lambda表达式应用于Pandas的数据框，以删除列字符串值中的字符，以及如何将浮点值四舍五入为最接近的整数。如果你有兴趣学习更多关于熊猫的数据操作、机器学习甚至只是python编程的一些基础知识，请查看<a class="ae ky" href="https://www.amazon.com/dp/B08N38XW2Q/ref=sr_1_1?dchild=1&amp;keywords=sadrach+python&amp;qid=1604966500&amp;s=books&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><em class="mi">Python for Data Science and Machine Learning:Python编程、熊猫和Scikit-初学者学习教程</em> </a> <em class="mi">。我希望你觉得这篇文章有用/有趣。这篇文章的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/basic_python/mastering_anonymous_functions.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</em></p></div></div>    
</body>
</html>