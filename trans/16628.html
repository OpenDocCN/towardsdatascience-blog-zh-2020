<html>
<head>
<title>Top 3 Lesser-Known Pandas Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">三大鲜为人知的熊猫功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-lesser-known-pandas-function-9cab7d490702?source=collection_archive---------29-----------------------#2020-11-16">https://towardsdatascience.com/top-3-lesser-known-pandas-function-9cab7d490702?source=collection_archive---------29-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0dfa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">作为一名现代数据科学家，您需要了解熊猫的功能</h2></div><p id="3e82" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">说到Python中的数据科学库，<code class="fe le lf lg lh b">Pandas</code>可能是最有用的一个。它已经存在了相当长的一段时间，包含了很多节省时间的功能。本文以实用的方式介绍了三个鲜为人知的<code class="fe le lf lg lh b">Pandas</code>函数。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/ac856ba4aa0c5c6ed8c5811c44c2e8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0soH_QccP_bwpKEKEJLkw.jpeg"/></div></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">照片由<a class="ae ly" href="https://unsplash.com/@xps?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> XPS </a>在<a class="ae ly" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="ae40" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不想看书？看看我关于这个主题的视频:</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="90d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你需要一个房价数据集来跟进，所以请从<a class="ae ly" href="https://www.betterdatascience.com/wp-content/uploads/2020/11/HousingPrices.csv" rel="noopener ugc nofollow" target="_blank">这个链接</a>下载。让我们把熊猫装进去:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="6c8d" class="mf mg it lh b gy mh mi l mj mk">import pandas as pd </span><span id="2d79" class="mf mg it lh b gy ml mi l mj mk">df = pd.read_csv('HousingPrices.csv') <br/>df.head()</span></pre><p id="56fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是数据集的外观:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/32009cc3dfd05d450e3ddd5a53a35a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*V_L25lpNPiS8yqTccAR3tw.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图片1-房价数据集标题(图片由作者提供)</p></figure><p id="7473" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事不宜迟，让我们直接进入第一个函数。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="cc2a" class="mu mg it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">select_dtypes()</h1><p id="9df8" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated"><code class="fe le lf lg lh b">select_dtypes</code>函数用于只选择特定数据类型的列。假设您想对字符串做一些工作——您可以使用上面提到的函数来创建非数字列的子集，并从那里执行操作。</p><p id="4df6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的数据集不包含字符串列，如下图所示:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/77ca0d04ed722d6a506d69bf68f717db.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*5WRphZpsoGMHyT1mbrrNQg.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图2 —每列的数据类型(作者图片)</p></figure><p id="0099" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用<code class="fe le lf lg lh b">select_dtypes</code>函数只保留整数列。根据之前的图像，应该只保留<code class="fe le lf lg lh b">TransactionDate</code>和<code class="fe le lf lg lh b">NumStores</code>列:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="10d2" class="mf mg it lh b gy mh mi l mj mk">df.select_dtypes('int64').head()</span></pre><p id="f3ce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果如下:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/2c6adcbfc6d1e943229c5239d2a66885.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*cR6wjr9jktzXpweocYJLkQ.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图3-整数列(作者图片)</p></figure><p id="cb1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们进行下一个功能。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="7e7c" class="mu mg it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">内存使用量()</h1><p id="833e" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated"><code class="fe le lf lg lh b">memory_usage</code>函数顾名思义就是报告内存使用情况。默认情况下，报告是以列和字节为单位进行的，但是我们稍后将看到如何更改它。</p><p id="4887" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对整个数据集调用该函数:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="2847" class="mf mg it lh b gy mh mi l mj mk">df.memory_usage()</span></pre><p id="2f8b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该调用为我们的数据集产生了以下系列:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/963c961a1fa68b64d7168f6e98f3c404.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*pJFb-lDgT41avIQWXi-6oQ.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图4 —以每列字节为单位的内存使用情况(图片由作者提供)</p></figure><p id="60d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想得到总数，您可以对结果集调用<code class="fe le lf lg lh b">sum()</code>函数:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="8174" class="mf mg it lh b gy mh mi l mj mk">df.memory_usage().sum()</span></pre><p id="069a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将产生<code class="fe le lf lg lh b">23312</code>字节。由于字节不像兆字节那样容易理解，我们接下来进行转换:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="b59a" class="mf mg it lh b gy mh mi l mj mk">df.memory_usage().sum() / 1e+6</span></pre><p id="dff4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码在执行时输出<code class="fe le lf lg lh b">0.023312</code>，代表住房数据集占用多少兆字节的内存。</p><p id="9d65" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以进一步使用<a class="ae ly" rel="noopener" target="_blank" href="/logging-explained-in-5-minutes-walkthrough-with-python-8bd7d8c2cf3a">日志</a>来监控生产应用程序中的内存使用情况，但这超出了本文的范围。</p><p id="4789" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们复习一下最后一个功能。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="25a8" class="mu mg it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">查询()</h1><p id="fe2a" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated"><code class="fe le lf lg lh b">query</code>函数用于过滤数据集并获取感兴趣的记录。过滤格式是它的特别之处。如果您按多个条件进行过滤，则不需要管理几十个括号，因为该函数使您能够将过滤条件作为字符串传递。</p><p id="d488" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们先看一个简单的例子，我们对20到30年的房子感兴趣:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="78c8" class="mf mg it lh b gy mh mi l mj mk">df.query('20 &lt; HouseAge &lt;= 30').head()</span></pre><p id="6f04" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果如下:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/755046adcae22f09f691c48316f8a105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*9WDPQXJfqguS8XIYJFpCVw.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图片5—20至30年楼龄的房屋(图片由作者提供)</p></figure><p id="0380" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是如果我们想测试多种情况呢？只需在中间插入<code class="fe le lf lg lh b">and</code>或<code class="fe le lf lg lh b">or</code>关键词:</p><pre class="lj lk ll lm gt mb lh mc md aw me bi"><span id="52bc" class="mf mg it lh b gy mh mi l mj mk">df.query('20 &lt; HouseAge &lt;= 30 and NumStores == 6').head()</span></pre><p id="9566" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是产生的子集:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8ac8c2aa4d8917fcc0d0dd672281aa0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*Xg0ztatC3THkMQ7T9YeYtA.png"/></div><p class="lu lv gj gh gi lw lx bd b be z dk translated">图片6-20至30年的房屋，附近有6家商店(图片由作者提供)</p></figure><p id="dbc8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你只需要知道这些。让我们在下一部分总结一下。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="9d0b" class="mu mg it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">离别赠言</h1><p id="f949" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated"><code class="fe le lf lg lh b">Pandas</code>是Python中顶尖的数据科学库之一，这是有原因的——没有什么是你不能简单直观地完成的。复杂的过滤会让事情变得混乱，但是新学到的<code class="fe le lf lg lh b">query</code>函数会让事情变得更简单。</p><p id="d242" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你最喜欢的鲜为人知的<code class="fe le lf lg lh b">Pandas</code>功能有哪些？请在下面的评论区告诉我。</p><p id="9ee1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p><h2 id="5705" class="mf mg it bd mv nv nw dn mz nx ny dp nd kr nz oa nf kv ob oc nh kz od oe nj of bi translated">加入我的私人邮件列表，获取更多有用的见解。</h2></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="ad7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="og">喜欢这篇文章吗？成为</em> <a class="ae ly" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="og">中等会员</em> </a> <em class="og">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oh oi gp gr oj ok"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ls ok"/></div></div></a></div></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="6ffb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="og">原载于2020年11月16日https://www.betterdatascience.com</em><em class="og">T21</em><a class="ae ly" href="https://www.betterdatascience.com/top-3-pandas-functions/" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>