<html>
<head>
<title>Modin — Speed up your Pandas Notebooks, Scripts, and Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">摩丁-加速你的熊猫笔记本，脚本和图书馆</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/modin-speed-up-your-pandas-notebooks-scripts-and-libraries-c2ac7de45b75?source=collection_archive---------31-----------------------#2020-09-19">https://towardsdatascience.com/modin-speed-up-your-pandas-notebooks-scripts-and-libraries-c2ac7de45b75?source=collection_archive---------31-----------------------#2020-09-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="33b7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Modin扩展Pandas工作流，只需更改一行代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee8b421c381fc561085b499892e17998.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g5bM4CN3TQyW4qgL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼古拉斯·霍伊泽在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="4e47" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">熊猫简介:</h2><p id="5c59" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated"><strong class="lx iu"> Pandas </strong>是一个开源库，为Python语言提供了高性能、易于使用的数据结构和数据分析工具。Pandas是用Python进行真实世界数据分析的基本高级构建块。它有一个更广泛的目标，那就是成为最强大、最灵活的开源数据分析和操作工具。</p><p id="200a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">熊猫库有40多个API，其中一些最常用的是熊猫数据帧、熊猫系列、熊猫绘图、熊猫输入/输出。熊猫图书馆的重要亮点是:</p><ul class=""><li id="a6c1" class="mt mu it lx b ly mo mb mp li mv lm mw lq mx mn my mz na nb bi translated">一个快速高效的<strong class="lx iu"> DataFrame </strong>对象，用于集成索引的数据操作</li><li id="7840" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated"><strong class="lx iu">读写数据的工具</strong></li><li id="5f69" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated">智能<strong class="lx iu">数据对齐</strong>和集成处理<strong class="lx iu">缺失数据</strong></li><li id="d703" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated">大数据集的基于智能标签的<strong class="lx iu">切片</strong>、<strong class="lx iu">花式索引</strong>和<strong class="lx iu">子集</strong></li><li id="9300" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated">通过引擎与强大的<strong class="lx iu">组聚合或转换数据。</strong></li><li id="1a36" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated">数据集的高性能<strong class="lx iu">合并和连接</strong></li><li id="375f" class="mt mu it lx b ly nc mb nd li ne lm nf lq ng mn my mz na nb bi translated"><strong class="lx iu">时间序列</strong>-功能</li></ul><p id="80cf" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">熊猫图书馆在学术和商业领域被广泛使用，包括金融、神经科学、经济学、统计学、广告、网络分析等等。</p><p id="2c49" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">Pandas是一个非常棒的库，可以让数据科学家/数据分析师与数据进行交互。但是与大数据交互需要时间。熊猫主要使用1核CPU处理指令并返回结果。这里，摩丁出现了，他使用分布式计算来加速熊猫的工作流程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/07bc07842b455ccadf30c8d7af515102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lesZyv9LGdUoEO_1StvHIw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://github.com/modin-project/modin" rel="noopener ugc nofollow" target="_blank">来源</a>)，摩丁logo</p></figure><h1 id="4e48" class="ni la it bd lb nj nk nl le nm nn no lh jz np ka ll kc nq kd lp kf nr kg lt ns bi translated">如何加快熊猫的工作流程:</h1><p id="2b7a" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Modin是一个早期访问的多处理数据帧库，具有与pandas相同的API，弥补了数据分析和大数据之间的差距。它提供了一种轻松的方式来加速pandas笔记本、脚本和库，并管理数据分区和洗牌，以便数据科学家/数据分析师可以有效地与数据进行交互。</p><blockquote class="nt"><p id="97c4" class="nu nv it bd nw nx ny nz oa ob oc mn dk translated">四核笔记本电脑的摩丁速度提升了4倍。</p></blockquote><p id="eeef" class="pw-post-body-paragraph lv lw it lx b ly od ju ma mb oe jx md li of mf mg lm og mi mj lq oh ml mm mn im bi translated">Modin <strong class="lx iu"> </strong>加速了熊猫的查询，只需要用户在笔记本上修改一行代码。熊猫只使用一个CPU核心来处理指令，其余的核心没有被利用。然而，Modin利用系统中所有可用的内核来加速Pandas的工作流程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/e951c27dc9e0e0a884afa59c70828b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XULwkSGj0IMjXo_GtuHf2A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://github.com/modin-project/modin" rel="noopener ugc nofollow" target="_blank">来源</a>)，比较熊猫与摩丁读取CSV文件的时间利用率的图表，(图1)</p></figure><h1 id="5350" class="ni la it bd lb nj nk nl le nm nn no lh jz np ka ll kc nq kd lp kf nr kg lt ns bi translated">引擎盖下的摩丁作品:</h1><p id="c27a" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如上所述，Modin通过分布式计算加速了Pandas查询。它利用了系统的所有核心。对于4核系统，下图比较了Pandas和Modin库的利用率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/bebe4e05fa3477ea4ecd64fce296e1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*cG-hojCp2w8i0B0VHwUXkw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://www.youtube.com/watch?v=-HjLd_3ahCw" rel="noopener ugc nofollow" target="_blank">来源</a>)，熊猫和摩丁的CPU核心利用率，(图2)</p></figure><p id="ebb7" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">与标准笔记本电脑相比，在拥有更多内核的大型服务器上，Modin的性能会呈指数级增长。从(图1)可以看出，加载18gb的CSV文件只需几秒钟。</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h2 id="6387" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">安装:</h2><p id="2418" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Modin是开源的，你可以在这里找到GitHub库<a class="ae ky" href="https://github.com/modin-project/modin" rel="noopener ugc nofollow" target="_blank"/>。从PyPI安装Modin:</p><pre class="kj kk kl km gt or os ot ou aw ov bi"><span id="4b9a" class="kz la it os b gy ow ox l oy oz"><strong class="os iu">pip install modin</strong></span></pre><p id="2c10" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果您没有安装<a class="ae ky" href="https://github.com/ray-project/ray" rel="noopener ugc nofollow" target="_blank"> Ray </a>或<a class="ae ky" href="https://github.com/dask/dask" rel="noopener ugc nofollow" target="_blank"> Dask </a>，您将需要安装带有其中一个目标的摩丁:</p><pre class="kj kk kl km gt or os ot ou aw ov bi"><span id="6f07" class="kz la it os b gy ow ox l oy oz"># Install Modin dependencies and Ray to run on Ray<br/><strong class="os iu">pip install modin[ray]</strong></span><span id="c367" class="kz la it os b gy pa ox l oy oz"># Install Modin dependencies and Dask to run on Dask<br/><strong class="os iu">pip install modin[dask]</strong></span><span id="1ddb" class="kz la it os b gy pa ox l oy oz"># Install all of the above<br/><strong class="os iu">pip install modin[all]</strong></span></pre><p id="ff36" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">Modin将自动检测您安装了哪个引擎，并用于调度计算。</p><h2 id="82e7" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">实施:</h2><p id="5da7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">使用Modin来加速你的熊猫查询，只需要一行代码，只需要导入Modin库。</p><pre class="kj kk kl km gt or os ot ou aw ov bi"><span id="76c8" class="kz la it os b gy ow ox l oy oz"><strong class="os iu">import modin.pandas as pd</strong></span></pre><h1 id="6f72" class="ni la it bd lb nj nk nl le nm nn no lh jz np ka ll kc nq kd lp kf nr kg lt ns bi translated">摩丁与熊猫的比较:</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/95882537eac9d0cb98f198e1e0972203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V82tUDMjuHCXO8U56iT8wg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，<strong class="bd pb">左</strong> : Pandas，<strong class="bd pb">右</strong> : Modin，在Pandas和Modin中读取150 MB CSV文件的编译时间比较</p></figure><h1 id="2fb5" class="ni la it bd lb nj nk nl le nm nn no lh jz np ka ll kc nq kd lp kf nr kg lt ns bi translated">一些限制:</h1><p id="4c6b" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Pandas是一个拥有大量API的大型库，其中一些著名的API是DataFrame、Series等。Pandas DataFrame和系列各有280多种功能。摩丁并不支持熊猫的所有功能，但它支持最著名的功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/2f1553ddf012ccf79843788140687c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*mrskOKj7p5MXVMBGalGMCA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://github.com/modin-project/modin" rel="noopener ugc nofollow" target="_blank">来源</a>)，熊猫API报道，(图3)</p></figure><p id="774f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">摩丁的开发者想出了在Kaggle比赛中最受欢迎的熊猫方法。图4中列出了前20名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/d232d13b105b51d7e5875d9c7b632141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*pIva-qGK_IM1KDGSKF_zkg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://www.youtube.com/watch?v=-HjLd_3ahCw" rel="noopener ugc nofollow" target="_blank">来源</a>)，Kaggle最常用的20种熊猫方法，(图4)</p></figure><p id="af59" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">他们开始按照流行程度实现分布式计算的功能。</p><p id="ab80" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">没有在Modin中实现的功能，默认为pandas。如果您尝试使用未在Modin中发布的函数，库将使用Pandas中该函数的默认实现，方法是将Modin数据框转换为Pandas数据框，执行操作，然后再转换为Modin数据框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/421fe165af12e3e6a02f13f0699d0a42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-kEf1NINQ6XmP0VK_D4urg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(<a class="ae ky" href="https://www.youtube.com/watch?v=-HjLd_3ahCw" rel="noopener ugc nofollow" target="_blank">来源</a>)，默认为熊猫在摩丁不支持的功能，(图5)</p></figure></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h1 id="a0da" class="ni la it bd lb nj pf nl le nm pg no lh jz ph ka ll kc pi kd lp kf pj kg lt ns bi translated">结论:</h1><p id="81f0" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">您可以使用Modin代替pandas，因为它可以并行化实现并减少计算时间，即使某些pandas API没有并行化，它仍然默认为Pandas。</p><p id="2a3a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">摩丁使用<a class="ae ky" href="https://github.com/ray-project/ray/" rel="noopener ugc nofollow" target="_blank">雷</a>或<a class="ae ky" href="https://dask.org/" rel="noopener ugc nofollow" target="_blank">达斯克</a>来尽可能地并行化熊猫API。它旨在作为熊猫的替代物。从长远来看，Modin计划成为一个支持流行API(SQL，pandas等)的数据框架库。)并在各种计算引擎和后端上运行。</p><h1 id="7e37" class="ni la it bd lb nj nk nl le nm nn no lh jz np ka ll kc nq kd lp kf nr kg lt ns bi translated">参考资料:</h1><p id="4f10" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">[1]熊猫文件，(2020年9月8日):<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/</a></p><p id="a262" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">[2]摩丁文献:<a class="ae ky" href="https://modin.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">https://modin.readthedocs.io/en/latest/</a></p><p id="2ffd" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">[3] PyData <a class="ae ky" href="https://www.youtube.com/watch?v=-HjLd_3ahCw" rel="noopener ugc nofollow" target="_blank"> YouTube视频</a>“利用摩丁-德文·彼得森扩展互动熊猫工作流程”，(2019年2月1日)</p><blockquote class="nt"><p id="309d" class="nu nv it bd nw nx ny nz oa ob oc mn dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>