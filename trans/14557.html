<html>
<head>
<title>Introduction to Regular Expression with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python正则表达式简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/regex-with-python-b4c5ca7c1eba?source=collection_archive---------42-----------------------#2020-10-07">https://towardsdatascience.com/regex-with-python-b4c5ca7c1eba?source=collection_archive---------42-----------------------#2020-10-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e3a2b4992df60a02463321229504593b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsWcuCc55rQ2DoBxWfEk9A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">罗曼·维涅斯在<a class="ae jg" href="https://unsplash.com/s/photos/focus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="9952" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">从概念到应用</h2></div><p id="d28e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设您想基于给定的查询搜索某样东西。如果只靠一根弦，是得不到想要的。那么，如何在海量信息中寻找你需要的东西呢？</p><p id="3e31" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，你需要一个能识别你想找的字符串的模式。为此，我们可以使用正则表达式(Regex)。</p><p id="4384" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将向您展示它的概念和应用，以解决数据科学中的问题，特别是使用Python预处理文本。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="9397" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">概述</h1><p id="d034" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我将这篇文章分为两个部分:</p><ul class=""><li id="7f64" class="my mz jj la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated"><strong class="la jk">正则表达式的概念</strong></li><li id="c2d1" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated"><strong class="la jk">正则表达式的应用</strong></li></ul></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="d895" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">正则表达式的概念</h1><p id="9509" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">正则表达式是一种特殊类型的字符串，可以用来匹配字符串中的术语或单词。</p><p id="8a5a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它由特殊字符序列组成，因此我们可以根据需要使用它来匹配任何术语。这里有几个您可以使用的特殊字符，</p><ul class=""><li id="d77a" class="my mz jj la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">点号(。)匹配字符串中的任何字符，</li><li id="3241" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">脱字符号(^)匹配字符串的开头，</li><li id="c924" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">美元符号($)匹配字符串的结尾，</li><li id="e584" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">星号(*)匹配零个或多个重复的前一个字符的模式，</li><li id="f8a1" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">加号(+)匹配前一个字符的一次或多次重复，</li><li id="0370" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">问号(？)匹配前一个字符的0次或1次重复，</li><li id="6892" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">花括号{m，n}将匹配前一个字符的m或n个重复，</li><li id="9df9" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">如果要使用标点符号，将使用反斜杠(\)，但它也是一个特殊字符。例如，要匹配$，您应该在字符前添加一个反斜杠，如“\$ ”,</li><li id="47b9" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">方括号([ ])可用于仅包含与字符串匹配的某些字符。假设你想找到包含a、I和r的单词，你可以使用像[air]这样的模式。</li></ul><p id="ea46" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回想一下反斜杠有几个特殊的序列。如果你想包含所有的单词或数字，而不是把它们都写在方括号内，这是非常有用的。你可以使用这些序列，例如，</p><ul class=""><li id="be5d" class="my mz jj la b lb lc le lf lh na ll nb lp nc lt nd ne nf ng bi translated">\d将匹配任何数字</li><li id="6967" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">\s将匹配空白字符</li><li id="51b4" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">\w将匹配任何字符</li><li id="ea7e" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">\D将匹配除数字以外的内容</li><li id="2e5c" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">\S将匹配除空白以外的内容</li><li id="4be3" class="my mz jj la b lb nh le ni lh nj ll nk lp nl lt nd ne nf ng bi translated">\W将匹配除字符以外的内容</li></ul><p id="9bfd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于这些特殊字符，您可以根据想要提取的术语来组合它们。例如，您想要从tweets列表中检索标签，您可以使用类似“#\w+”的模式。</p><p id="0609" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">组合模式是可能的，因为有一条规则说，</p><blockquote class="nm nn no"><p id="f20f" class="ky kz np la b lb lc kk ld le lf kn lg nq li lj lk nr lm ln lo ns lq lr ls lt im bi translated">如果一个模式与另一个模式结合，就会产生另一个模式。</p></blockquote></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="51a6" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">正则表达式的应用</h1><p id="cf3a" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">在您了解了正则表达式的概念之后，现在让我们看看如何应用它来操作文本。</p><p id="3236" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一个是删除我们不用于处理文本的术语。假设您想要对tweets集合进行文本挖掘。因此，在挖掘推文之前，你必须首先对它们进行预处理，因为我们希望高效地进行计算，并避免其中任何无意义的信息。例如，你有一条这样的推文，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="08f6" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk">#Nasional Wapres: Jumlah Orang Miskin Bertambah Gara-Gara Pandemi Covid-19 https://t.co/sJvig4w7LL</strong></span></pre><p id="8707" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有几个术语你想删除，如提及，标签，链接等。在Python中，我们可以使用re库中的一个名为sub的方法来删除它们。</p><p id="01dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以在函数中设置参数，比如正则表达式格式的模式，用来替换术语的字符串，以及我们想要处理的最后一个字符串。这是关于这个功能的一瞥，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="5e8a" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk">re.sub(pattern, replacement, data)</strong> <br/><strong class="ny jk">- pattern: the pattern on regex format <br/>- replacement: the replacement string for terms that suits the pattern <br/>- data: a variable or a string that want to process</strong></span></pre><p id="785e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过使用这个函数，我们可以像这样使用它，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="fb4b" class="oc mc jj ny b gy od oe l of og">import re</span><span id="f19e" class="oc mc jj ny b gy oh oe l of og"><strong class="ny jk"># The raw tweet</strong><br/>tweet = "#Nasional Wapres: Jumlah Orang Miskin Bertambah Gara-Gara Pandemi Covid-19 <a class="ae jg" href="https://t.co/sJvig4w7LL" rel="noopener ugc nofollow" target="_blank">https://t.co/sJvig4w7LL</a>"</span><span id="7f6f" class="oc mc jj ny b gy oh oe l of og"><strong class="ny jk"># Preprocessing using Regex</strong><br/>tweet = re.sub("#\w+", "", tweet)<br/>tweet = re.sub("https*.+", "", tweet)</span><span id="7f1e" class="oc mc jj ny b gy oh oe l of og">print(tweet)<br/><strong class="ny jk"># Here is the result,<br/>#  Wapres: Jumlah Orang Miskin Bertambah Gara-Gara Pandemi Covid-19</strong></span></pre><p id="2280" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想展示的另一个例子是在string中搜索和检索一个子串。在这种情况下，我将从数据科学中被称为“hello world”的数据集中选取一个示例。这是泰坦尼克号数据集。</p><p id="0c0f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于那些不知道的人来说，这是一个用作Kaggle比赛介绍的数据集。这个竞赛的目标是根据与一名乘客相对应的数据来预测该乘客是否幸存。数据集看起来像这样，</p><figure class="nt nu nv nw gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oi"><img src="../Images/fe218700aeac8d94f78021d7be1118f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCmxR-HyK__hZoNLL2WKXg.jpeg"/></div></div></figure><p id="d117" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它由几列组成，描述乘客的人口统计数据、票价、姓名，还有“幸存”列，描述乘客是否幸存。在这种情况下，让我们关注“名称”列。让我们来看几个例子，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="2ec0" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk">0                               Braund, Mr. Owen Harris<br/>1     Cumings, Mrs. John Bradley (Florence Briggs Th...<br/>2                                Heikkinen, Miss. Laina<br/>3          Futrelle, Mrs. Jacques Heath (Lily May Peel)<br/>4                              Allen, Mr. William Henry<br/>5                                      Moran, Mr. James<br/>6                               McCarthy, Mr. Timothy J<br/>7                        Palsson, Master. Gosta Leonard<br/>8     Johnson, Mrs. Oscar W (Elisabeth Vilhelmina Berg)<br/>9                   Nasser, Mrs. Nicholas (Adele Achem)<br/>10                      Sandstrom, Miss. Marguerite Rut<br/>11                             Bonnell, Miss. Elizabeth<br/>12                       Saundercock, Mr. William Henry<br/>13                          Andersson, Mr. Anders Johan<br/>14                 Vestrom, Miss. Hulda Amanda Adolfina<br/>15                     Hewlett, Mrs. (Mary D Kingcome) <br/>16                                 Rice, Master. Eugene<br/>17                         Williams, Mr. Charles Eugene<br/>18    Vander Planke, Mrs. Julius (Emelia Maria Vande...<br/>19                              Masselmani, Mrs. Fatima<br/>Name: Name, dtype: object</strong></span></pre><p id="d6cc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据上面的样品，你发现了什么规律吗？如果细看，每个名字都有自己的称谓，比如先生、太太、小姐。，师傅。等。我们可以提取这些作为一个新的特征，称为“标题”。这个标题与其他术语的不同之处在于，它包含了点标点符号。因此，我们可以使用模式提取它。</p><p id="bf8b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们如何从每个名字中提取标题？我们可以使用re库中一个名为search的函数。使用该函数，我们可以根据给定的模式提取术语。它需要模式和字符串列表。代码看起来像这样，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="a0f0" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk">def get_title(x):<br/>  # Searching matched patterns<br/>  x = re.search('\w*\.', x).group()<br/>  # Removing dot punctuation to ease the analysis process<br/>  x = re.sub('\.', '', x)<br/>  return x</strong></span><span id="7b43" class="oc mc jj ny b gy oh oe l of og"><strong class="ny jk">train['Title'] = train['Name'].apply(get_title)<br/>train = train.drop('Name', axis=1)<br/>train.head()</strong></span></pre><p id="3120" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保在字符串中搜索完一个术语后，用一个名为group的方法将函数链接起来。或者看起来像这样，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="d1a2" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk"># If you don't use group method, it will show this</strong><br/>&lt;_sre.SRE_Match object; span=(8, 11), match='Mr.'&gt;</span></pre><p id="d717" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你做的正确，结果会是这样的，</p><figure class="nt nu nv nw gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/2c463da371519ed31f49d9c18f1ed3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sw6F_QIBjqUfdDA1hWIOrg.jpeg"/></div></div></figure><p id="ff09" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是搜索功能及其方法的摘要，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="d053" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk">re.search(pattern, data)<br/>parameters:<br/> - pattern: The pattern that suits what we want to find<br/> - data: The data that we used. It could be string or list of strings<br/>methods:<br/> - group: it returns a string or more.</strong></span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e852" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">结论</h1><p id="d06d" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">这就是我们如何使用Python使用正则表达式来处理文本，因此我们可以通过删除无意义的信息来获得更有意义的见解。我也向你展示了它的概念和一些应用。我希望这篇文章对你有用，如果你有任何意见，请写在下面的评论区。</p><p id="bafc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有一件事，回想一下我上面的代码，我写的模式就像一个普通的字符串。但是为了确保您已经编写了一个正则表达式模式，请在引用的模式前添加“r”字符，就像这样，</p><pre class="nt nu nv nw gt nx ny nz oa aw ob bi"><span id="c8a7" class="oc mc jj ny b gy od oe l of og"><strong class="ny jk"># You can write like this<br/>re.sub("#\w+", "", tweet)</strong></span><span id="0276" class="oc mc jj ny b gy oh oe l of og"><strong class="ny jk"># Or like this (Focus on the r)<br/>re.sub(r"#\w+", "", tweet)</strong></span></pre><p id="d01b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就这样，谢谢你。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h2 id="12a3" class="oc mc jj bd md ok ol dn mh om on dp ml lh oo op mn ll oq or mp lp os ot mr ou bi translated">参考</h2><p id="cd8e" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">[1]<a class="ae jg" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/re.html</a><br/>【2】<a class="ae jg" href="https://www.kaggle.com/c/titanic" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/c/titanic</a></p></div></div>    
</body>
</html>