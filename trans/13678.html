<html>
<head>
<title>Make Your Pandas DataFrame Output Report-Ready</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让你的熊猫数据帧输出报告准备就绪</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/make-your-pandas-dataframe-output-report-ready-a9440f6045c6?source=collection_archive---------5-----------------------#2020-09-20">https://towardsdatascience.com/make-your-pandas-dataframe-output-report-ready-a9440f6045c6?source=collection_archive---------5-----------------------#2020-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4a8f156965c27e836c0f1942147bb13d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_38xjLBFZdxqPEXqqAY3g.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/12019-12019/" rel="noopener ugc nofollow" target="_blank"> 12019 </a>在<a class="ae jg" href="https://pixabay.com/photos/bunson-peak-yellowstone-landscape-1589003/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="65ff" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">熊猫风格和迷你图片库说明</h2></div><p id="5299" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一名使用Python作为主要编程语言的数据科学家或分析师，我相信您一定经常使用Pandas。我们经常在笔记本上输出熊猫数据帧。</p><p id="44bb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，你有没有想过我们实际上可以让数据框架自己可视化？换句话说，对于一些简单的可视化目的，我们不需要Matplotlib或其他可视化库。Pandas数据框输出可以像Excel电子表格一样可视化，具有复杂的样式和非常简单的代码定义。</p><p id="7fc3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将介绍Pandas库中的样式包，相对于它的数据处理方法，知道它的人相对较少。此外，还有一些有趣的库支持熊猫数据框的更多内联可视化。在最后一节中，我还将介绍其中的一种——迷你图。</p><h1 id="3695" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">关于熊猫风格套餐</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/7d5424945b22e4a2f31f745056c3890c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_alqAyAlpccyMWeOuvI0A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/photos/roses-colored-tinted-colorful-828945/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae jg" href="https://pixabay.com/users/Free-Photos-242387/" rel="noopener ugc nofollow" target="_blank">自由照片</a>拍摄的照片</p></figure><p id="5bc9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">众所周知，熊猫数据帧可以在iPython/Jupyter notebook中输出，该notebook以HTML格式自动呈现CSS样式。这绝对是一个惊人的特性，因为即使我们只是简单地打印它，演示也非常好。</p><p id="b84d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等等，它使用了“HTML + CSS”。是的，熊猫也允许我们定制CSS样式，使它看起来更漂亮。这是通过“样式”API实现的。</p><div class="is it gp gr iu mq"><a href="https://pandas.pydata.org/docs/reference/style.html" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jk gy z fp mv fr fs mw fu fw ji bi translated">风格-熊猫1.1.2文档</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">编辑描述</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">pandas.pydata.org</p></div></div></div></a></div><p id="6429" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以简单地调用<code class="fe mz na nb nc b">df.style</code>来获取一个数据框的<code class="fe mz na nb nc b">Styler</code>对象，然后添加我们想要的样式。现在，让我们看看我们能做些什么。</p><h1 id="5075" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">格式化输出</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cfae48181a373c76032f800377021748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGIzX1YkTLBRZdWhsRc4Fg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/geralt-9301/" rel="noopener ugc nofollow" target="_blank"> geralt </a>在<a class="ae jg" href="https://pixabay.com/photos/pi-board-school-district-diameter-3653435/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="4dda" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，我们总是可以格式化数据本身，比如<code class="fe mz na nb nc b">df.round(2)</code>，用两位小数来舍入所有的数值。然而，使用熊猫风格有一些好处。例如，我们实际上并不改变值，而只是改变表示，这样我们就不会失去精度。</p><p id="043b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们先创建一个随机数据框。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="419e" class="nh lv jj nc b gy ni nj l nk nl">import numpy as np<br/>import pandas as pd</span><span id="231e" class="nh lv jj nc b gy nm nj l nk nl">df = pd.DataFrame(np.random.randn(10, 2)*100)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/c1a9543b850031e39eab14a25248eb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*WdKW47aFx7q6Z-IgQwfqow.png"/></div></figure><p id="980d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，让我们输出特定格式的数据帧。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="c945" class="nh lv jj nc b gy ni nj l nk nl">df.style.format("{:.2f}")</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/067e045f0a68a6aa1761754bc1869c4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*8BcM_sSGr6OHbioK1CIR1A.png"/></div></figure><p id="113b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">顺便说一句，如果你不太熟悉Python格式规范Mini-Language，这是我使用的表达式<code class="fe mz na nb nc b">{:.2f}</code>，你可以在这里查看官方文档(强烈推荐)。</p><div class="is it gp gr iu mq"><a href="https://docs.python.org/3/library/string.html#formatspec" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jk gy z fp mv fr fs mw fu fw ji bi translated">格式规范迷你语言- Python文档</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">内置的string类提供了通过方法…进行复杂的变量替换和值格式化的能力</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">docs.python.org</p></div></div></div></a></div><h1 id="2fce" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">用背景和文本颜色突出显示单元格</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/99f3fd53352046c31fe33e44f30eb32e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hedcH9abqX5NhzsAd_LLrQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://pixabay.com/users/YeriLee-1801917/" rel="noopener ugc nofollow" target="_blank"> YeriLee </a>在<a class="ae jg" href="https://pixabay.com/photos/highlighter-coloring-fluorescent-1103715/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="c22a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我知道，格式化不够酷。使用CSS我们可以很容易地做很多事情，比如改变背景颜色和文本颜色。</p><p id="59c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，对于上图所示的同一数据框，我们希望分别突出显示正数和自然数。如果你有一些关于CSS的基本知识，或者只是简单地谷歌一下，你会知道下面的属性来设置HTML表格单元格的背景颜色和文本颜色。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="5eb8" class="nh lv jj nc b gy ni nj l nk nl">background-color: red; color: white</span></pre><p id="4c9e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们写一个函数来给表格单元格着色。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="8609" class="nh lv jj nc b gy ni nj l nk nl">def highlight_number(row):<br/>    return [<br/>        'background-color: red; color: white' if cell &lt;= 0 <br/>        else 'background-color: green; color: white'<br/>        for cell in row<br/>    ]</span></pre><p id="2556" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果单元格的值是负数，我们使用红色作为背景，否则使用绿色，如果它是正数。因为颜色可能有点暗，我们也想把文本颜色改为白色。</p><p id="107a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以将该函数应用于数据框。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="d166" class="nh lv jj nc b gy ni nj l nk nl">df.style.apply(highlight_number)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/48c3facf957d3fd0b8ec87bf6c0cd18c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*0UnYDW8cODeL-XfrdjyPAQ.png"/></div></figure><p id="f9df" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">超级爽！现在很明显，我们得到了负数和正数，它们是很好区分的。</p><h1 id="5658" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">链接样式功能</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/47c9a2efa066e4a6fff6511a42b4126a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uviXnFglwrxecRgsK2b8Ng.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由Pixabay上的<a class="ae jg" href="https://pixabay.com/users/TanteTati-77004/" rel="noopener ugc nofollow" target="_blank"> TanteTati </a>拍摄</p></figure><p id="1409" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到目前为止，我们每次只添加一种类型的样式。事实上，一旦我们调用了<code class="fe mz na nb nc b">df.style</code>，它就会返回数据帧的<code class="fe mz na nb nc b">Styler</code>对象。<code class="fe mz na nb nc b">Styler</code>对象支持链接样式函数。让我们看看另一个更复杂的例子。</p><p id="9ca4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">比方说，我们想在原始数据框中添加以下样式。</p><ol class=""><li id="aa06" class="nq nr jj la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated">用红色突出显示负数，用绿色突出显示正数。</li><li id="88f6" class="nq nr jj la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated">将数字格式化为货币。</li><li id="a111" class="nq nr jj la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated">使用<code class="fe mz na nb nc b">set_caption()</code>为表格添加标题。</li><li id="6381" class="nq nr jj la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated">增大单元格边距，使其看起来不那么拥挤。</li><li id="0582" class="nq nr jj la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated">在单元格之间添加白色边框以改善显示效果。</li></ol><p id="7fda" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，我们可以一次完成所有这些，通过使用链式表达式。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="0b8f" class="nh lv jj nc b gy ni nj l nk nl">df.style \<br/>  .apply(highlight_number) \<br/>  .format('${0:,.2f}') \<br/>  .set_caption('A Sample Table') \<br/>  .set_properties(padding="20px", border='2px solid white')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f3e6a9eba07aa49facf22af2fd507623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*fZgdbAJnDk2dykQ2zlT_tg.png"/></div></figure><p id="5b5c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感觉表格可以直接用在一些业务报表上:)</p><h1 id="1cf4" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">内置高亮显示功能</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0c0218e8c029d53a8891d9e27334f3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwPvI5vpah3li2J3UVqh2w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/PublicDomainPictures-14/" rel="noopener ugc nofollow" target="_blank"> PublicDomainPictures </a>在<a class="ae jg" href="https://pixabay.com/photos/bright-close-up-color-colorful-2796/" rel="noopener ugc nofollow" target="_blank"> Pixbay </a>上拍摄的照片</p></figure><p id="7e96" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不懂CSS，还想显摆？可以，熊猫style还提供了一些内置功能，很酷但是非常好用。</p><h2 id="fb6d" class="nh lv jj bd lw of og dn ma oh oi dp me lh oj ok mg ll ol om mi lp on oo mk op bi translated">突出显示功能</h2><p id="be59" class="pw-post-body-paragraph ky kz jj la b lb oq kk ld le or kn lg lh os lj lk ll ot ln lo lp ou lr ls lt im bi translated">让我们使用相同的数据框进行演示。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="8644" class="nh lv jj nc b gy ni nj l nk nl"># Make a nan value for demo purposes<br/>df.at[1, 1] = None</span><span id="0ea5" class="nh lv jj nc b gy nm nj l nk nl"># Add styles<br/>df.style \<br/>  .highlight_null('lightgray') \<br/>  .highlight_max(color='lightgreen') \<br/>  .highlight_min(color='pink')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/f485249791572d03c25f5f23db74921e.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*7_CkTqtDzZwzVPwByenrPQ.png"/></div></figure><p id="cfd5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你看，用你喜欢的颜色来突出显示空值、最小值和最大值是非常容易的。我建议使用浅色，因为文本颜色总是黑色。</p><h2 id="6c36" class="nh lv jj bd lw of og dn ma oh oi dp me lh oj ok mg ll ol om mi lp on oo mk op bi translated">渐变彩色背景</h2><p id="ca6d" class="pw-post-body-paragraph ky kz jj la b lb oq kk ld le or kn lg lh os lj lk ll ot ln lo lp ou lr ls lt im bi translated">熊猫风格也支持使用<code class="fe mz na nb nc b"><strong class="la jk">cmap</strong></code>给单元格背景涂上渐变颜色。当我们想要可视化刻度中的数字数据时，这非常有用。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="b559" class="nh lv jj nc b gy ni nj l nk nl">df = pd.DataFrame(np.random.randn(10, 2))<br/>df.style \<br/>  .background_gradient(cmap='Blues')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/c3244f3088f9de237736cfe3fb368b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*3yCCxa3ibn_zvAfOf8BX2g.png"/></div></figure><p id="d098" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，背景颜色是渐变的，取决于值。请注意，“蓝调”是熊猫支持的<code class="fe mz na nb nc b">cmap</code>之一。如果您想知道还有哪些支持，下面的Matplotlib文档是一个很好的参考。</p><div class="is it gp gr iu mq"><a href="https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html#sequential" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jk gy z fp mv fr fs mw fu fw ji bi translated">在Matplotlib - Matplotlib 3.1.0文档中选择色彩映射表</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">Matplotlib有许多内置的色彩映射表，可以通过。还有外部库，如[palettable]和…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">matplotlib.org</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ja mq"/></div></div></a></div><h2 id="943e" class="nh lv jj bd lw of og dn ma oh oi dp me lh oj ok mg ll ol om mi lp on oo mk op bi translated">内嵌条形图</h2><p id="3260" class="pw-post-body-paragraph ky kz jj la b lb oq kk ld le or kn lg lh os lj lk ll ot ln lo lp ou lr ls lt im bi translated">这是另一个内置的超酷功能。它可以在每个单元格的背景中生成条形来指示它们的值。我们用上面的数据框。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="aabf" class="nh lv jj nc b gy ni nj l nk nl">df.style.bar()</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/e98a7042522def80c800b90e830cd512.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*msmMHsR3Ibg0ifNRz8-fww.png"/></div></figure><p id="4f52" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，我们对条形图的默认样式并不满意。让我们改进演示文稿。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="f2d0" class="nh lv jj nc b gy ni nj l nk nl">df.style \<br/>  .format('{:.2f}') \<br/>  .bar(align='mid', color=['#FCC0CB', '#90EE90']) \<br/>  .set_caption('A Sample Table with Bar Chart') \<br/>  .set_properties(padding="15px", border='2px solid white', width='300px')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/bf247c91409ffafec68c5350837a7e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*__RA_eSRjmweJwst1rdidg.png"/></div></div></figure><p id="415c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你能相信这还是你曾经非常熟悉的“熊猫数据框”吗？:)</p><p id="9b56" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我简单解释一下<code class="fe mz na nb nc b">bar()</code>方法中的参数。<code class="fe mz na nb nc b">color</code>参数支持单个字符串或一个元组，当它是一个元组时，第一种颜色将用于着色负值，第二种颜色用于着色正值。因为我们使用了两种颜色，所以我们需要将滚动条设置为在单元格的中间对齐。</p><h1 id="b7d8" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">迷你图-内嵌直方图</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/6e9ef2e7cf1e59b5871202c499bae00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRWFaQIOA_mr3ELF6l_VZA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/Myriams-Fotos-1627417/" rel="noopener ugc nofollow" target="_blank"> Myriams-Fotos </a>在<a class="ae jg" href="https://pixabay.com/photos/sparkler-light-bulb-injection-candle-4629347/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="684c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我可以停在这里，但我想展示一下我发现的另一个非常有趣的库，叫做迷你图。我不会说它很好看，但这个想法真的很酷。</p><p id="51b7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以使用<code class="fe mz na nb nc b">pip</code>来安装这个库。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="2429" class="nh lv jj nc b gy ni nj l nk nl">pip install sparklines</span></pre><p id="26e5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，让我们导入库并创建另一个示例数据框用于演示目的。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="0fe9" class="nh lv jj nc b gy ni nj l nk nl">from sparklines import sparklines</span><span id="c8ea" class="nh lv jj nc b gy nm nj l nk nl">df = pd.DataFrame({<br/>    'a': np.random.normal(0, 1, 100),<br/>    'b': np.random.normal(1, 1, 100),<br/>    'c': np.random.normal(0, 3, 100)<br/>})</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/4d03deebc610249cd00b68085a640ead.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*pd2nD2Tic2XXrUVBQs-6CQ.png"/></div></figure><p id="8ec2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">库迷你图的功能很简单。它可以使用Unicode字符串生成条形图，比如▁、▂、▃，直到█.为了确保条形的顺序正确，并且作为直方图有意义，我们需要首先使用NumPy准备值以生成直方图值。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="60e5" class="nh lv jj nc b gy ni nj l nk nl">def sparkline_dist(data):<br/>    hist = np.histogram(data, bins=10)[0]<br/>    dist_strings = ''.join(sparklines(hist))<br/>    return dist_strings</span></pre><p id="a5c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于每一列，我们可以使用迷你图生成直方图。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="3272" class="nh lv jj nc b gy ni nj l nk nl">[sparkline_dist(df[col]) for col in df.columns]</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/7487b3f23b6a7b6d394a6b71e30bd8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*ZZMe1mhFF_Uj5Z0PlHGZtQ.png"/></div></figure><p id="f6dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我们可以将字符串与其他统计数据放在一起，以生成更好的报告。</p><pre class="mm mn mo mp gt nd nc ne nf aw ng bi"><span id="9b26" class="nh lv jj nc b gy ni nj l nk nl">df_stats = df.agg(['mean', 'std']).transpose()<br/>df_stats['histogram'] = sl_list<br/>df_stats.style \<br/>  .format('{:.2f}', subset=['mean', 'std']) \<br/>  .set_caption('A Sample Table with Sparklines Distributions') \<br/>  .set_properties(padding="15px", border='2px solid white')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/2f3811c3fe3ffe13e91e7d73f285cd40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*q6cqdMOY6f_-DLx8hv1bLQ.png"/></div></figure><p id="0fd9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">搞定了。</p><h1 id="f46e" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">摘要</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ad367e8f37f1dc69ad511a7cb192b103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PqXgLVy4hjpbM0s9xJO3vw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/photos/autumn-leaf-collapse-bokeh-season-3707549/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae jg" href="https://pixabay.com/users/pasja1000-6355831/" rel="noopener ugc nofollow" target="_blank"> pasja1000 </a>拍摄</p></figure><p id="aa65" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我向您展示了熊猫风格包中的所有主要方法。我们可以设置值的格式，给背景上色，用定制的CSS属性来改善表现。还有许多内置函数可用于创建“报表就绪”数据框输出。</p><div class="is it gp gr iu mq"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jk gy z fp mv fr fs mw fu fw ji bi translated">通过我的推荐链接加入Medium克里斯托弗·陶</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pi l oz pa pb ox pc ja mq"/></div></div></a></div><p id="9b80" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">如果你觉得我的文章有帮助，请考虑加入灵媒会员来支持我和成千上万的其他作家！(点击上面的链接)</strong></p></div></div>    
</body>
</html>