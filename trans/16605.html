<html>
<head>
<title>Benchmarking Language Detection for NLP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">è‡ªç„¶è¯­è¨€å¤„ç†çš„åŸºå‡†è¯­è¨€æ£€æµ‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/benchmarking-language-detection-for-nlp-8250ea8b67c?source=collection_archive---------6-----------------------#2020-11-16">https://towardsdatascience.com/benchmarking-language-detection-for-nlp-8250ea8b67c?source=collection_archive---------6-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b711" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/getting-started" rel="noopener" target="_blank">å…¥é—¨</a></h2><div class=""/><div class=""><h2 id="3ab5" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">ç”¨äºè¯†åˆ«æ–‡æœ¬è¯­è¨€çš„å››ä¸ªPythonå·¥å…·ï¼Œä»¥åŠé€Ÿåº¦å’Œå‡†ç¡®æ€§æµ‹è¯•</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/247febcb5c95276665382aa9351072eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWL9ILJlQQQT7N90PlMjRw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">æ°å¥ç³Â·å¸ƒå…°å¾·éŸ¦æ©åœ¨<a class="ae lh" href="https://unsplash.com/s/photos/languages?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</p></figure><p id="6234" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¤§å¤šæ•°NLPåº”ç”¨ç¨‹åºå¾€å¾€æ˜¯ç‰¹å®šäºè¯­è¨€çš„ï¼Œå› æ­¤éœ€è¦å•è¯­æ•°æ®ã€‚ä¸ºäº†ç”¨ç›®æ ‡è¯­è¨€æ„å»ºåº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½éœ€è¦åº”ç”¨ä¸€ç§é¢„å¤„ç†æŠ€æœ¯ï¼Œè¿‡æ»¤æ‰ç”¨éç›®æ ‡è¯­è¨€ç¼–å†™çš„æ–‡æœ¬ã€‚è¿™éœ€è¦æ­£ç¡®è¯†åˆ«æ¯ä¸ªè¾“å…¥ç¤ºä¾‹çš„è¯­è¨€ã€‚ä¸‹é¢æˆ‘åˆ—å‡ºäº†ä¸€äº›å·¥å…·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬ä½œä¸ºPythonæ¨¡å—æ¥æ»¡è¶³è¿™ä¸ªé¢„å¤„ç†éœ€æ±‚ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªæ€§èƒ½åŸºå‡†æ¥è¯„ä¼°æ¯ä¸€ä¸ªå·¥å…·çš„é€Ÿåº¦å’Œå‡†ç¡®æ€§ã€‚</p><h1 id="aabb" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">1)è¯­è¨€æ£€æµ‹</h1><div class="mw mx gp gr my mz"><a href="https://pypi.org/project/langdetect/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jd gy z fp ne fr fs nf fu fw jc bi translated">langdetect</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Nakatani Shuyoçš„è¯­è¨€æ£€æµ‹åº“(ç‰ˆæœ¬ä»03/03/2014)åˆ°Pythonçš„ç§»æ¤ã€‚$ pipå®‰è£…è¯­è¨€æ£€æµ‹â€¦</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">pypi.org</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn lb mz"/></div></div></a></div><p id="6c44" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe no np nq nr b">langdetect</code>æ˜¯Googleçš„<a class="ae lh" href="https://github.com/shuyo/language-detection" rel="noopener ugc nofollow" target="_blank">è¯­è¨€æ£€æµ‹</a>åº“ä»Javaåˆ°Pythonçš„é‡æ–°å®ç°ã€‚åªéœ€å°†æ‚¨çš„æ–‡æœ¬ä¼ é€’ç»™å¯¼å…¥çš„<code class="fe no np nq nr b">detect</code>å‡½æ•°ï¼Œå®ƒå°†è¾“å‡ºæ¨¡å‹ç»™å‡ºæœ€é«˜ç½®ä¿¡åº¦å¾—åˆ†çš„è¯­è¨€çš„ä¸¤ä¸ªå­—æ¯çš„ISO 693ä»£ç ã€‚(å‚è§<a class="ae lh" href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" rel="noopener ugc nofollow" target="_blank">æœ¬é¡µ</a>äº†è§£693ä¸ªä»£ç åŠå…¶å„è‡ªè¯­è¨€çš„å®Œæ•´åˆ—è¡¨ã€‚)å¦‚æœä½ ä½¿ç”¨<code class="fe no np nq nr b">detect_langs</code>æ¥ä»£æ›¿ï¼Œå®ƒå°†è¾“å‡ºä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—å‡ºæ¨¡å‹å·²ç»é¢„æµ‹åˆ°çš„é¡¶çº§è¯­è¨€ï¼Œä»¥åŠå®ƒä»¬çš„æ¦‚ç‡ã€‚</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="0b9d" class="nw mf it nr b gy nx ny l nz oa">from langdetect import DetectorFactory, detect, detect_langs</span><span id="247c" class="nw mf it nr b gy ob ny l nz oa">text = "My lubimy mleko i chleb."</span><span id="5b6a" class="nw mf it nr b gy ob ny l nz oa">detect(text) #  'cs'<br/>detect_langs(text)  # [cs:0.7142840957132709, pl:0.14285810606233737, sk:0.14285779665739756]</span></pre><p id="a0ca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å‡ ä¸ªç‚¹ç¼€ç‚¹:</p><ol class=""><li id="b42a" class="oc od it lk b ll lm lo lp lr oe lv of lz og md oh oi oj ok bi translated">åº“åˆ¶ä½œè€…å»ºè®®æ‚¨å°†<code class="fe no np nq nr b">DetectorFactory</code>ç§å­è®¾ç½®ä¸ºæŸä¸ªæ•°å­—ã€‚è¿™æ˜¯å› ä¸ºlangdetectçš„ç®—æ³•æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ è¯•å›¾åœ¨å¤ªçŸ­æˆ–å¤ªæ¨¡ç³Šçš„æ–‡æœ¬ä¸Šè¿è¡Œå®ƒï¼Œä½ å¯èƒ½æ¯æ¬¡è¿è¡Œå®ƒéƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚è®¾å®šç§å­åœ¨å¼€å‘/è¯„ä¼°æœŸé—´å¼ºåˆ¶æ‰§è¡Œä¸€è‡´çš„ç»“æœã€‚</li><li id="e398" class="oc od it lk b ll ol lo om lr on lv oo lz op md oh oi oj ok bi translated">æ‚¨å¯èƒ½è¿˜æƒ³åœ¨try/exceptå—ä¸­ç”¨<code class="fe no np nq nr b">LanguageDetectException</code>åŒ…å›´<code class="fe no np nq nr b">detect</code>è°ƒç”¨ï¼Œå¦åˆ™æ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ª<a class="ae lh" href="https://github.com/Mimino666/langdetect/issues/44" rel="noopener ugc nofollow" target="_blank">â€œæ–‡æœ¬ä¸­æ²¡æœ‰ç‰¹æ€§â€é”™è¯¯</a>ï¼Œå½“ç»™å®šè¾“å…¥çš„è¯­è¨€ä¸èƒ½è¢«è¯„ä¼°æ—¶ï¼Œä¾‹å¦‚å½“å®ƒåŒ…å«URLã€æ•°å­—ã€å…¬å¼ç­‰å­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ã€‚</li></ol><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="b48f" class="nw mf it nr b gy nx ny l nz oa">from langdetect import DetectorFactory, detect<br/>from langdetect.lang_detect_exception import LangDetectException</span><span id="4b63" class="nw mf it nr b gy ob ny l nz oa">DetectorFactory.seed = 0</span><span id="56a2" class="nw mf it nr b gy ob ny l nz oa">def is_english(text):<br/>    try:<br/>        if detect(text) != "en":<br/>            return False<br/>    except LangDetectException:<br/>        return False<br/>    return True</span></pre><h1 id="56a3" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">2)ç©ºé—´è¯­è¨€æ£€æµ‹å™¨</h1><div class="mw mx gp gr my mz"><a href="https://spacy.io/universe/project/spacy-langdetect" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jd gy z fp ne fr fs nf fu fw jc bi translated">ç©ºé—´æ¢æµ‹ç©ºé—´å®‡å®™</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">ä¸€ä¸ªå®Œå…¨å¯å®šåˆ¶çš„è¯­è¨€æ£€æµ‹ç®¡é“ï¼Œç”¨äºç©ºé—´å®‰è£…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">ç©ºé—´. io</p></div></div><div class="ni l"><div class="oq l nk nl nm ni nn lb mz"/></div></div></a></div><p id="0509" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚æœæ‚¨ä½¿ç”¨spaCyæ¥æ»¡è¶³æ‚¨çš„NLPéœ€æ±‚ï¼Œæ‚¨å¯ä»¥å‘æ‚¨ç°æœ‰çš„spaCyç®¡é“æ·»åŠ ä¸€ä¸ªå®šåˆ¶çš„è¯­è¨€æ£€æµ‹ç»„ä»¶ï¼Œè¿™å°†ä½¿æ‚¨èƒ½å¤Ÿåœ¨<code class="fe no np nq nr b">Doc</code>å¯¹è±¡ä¸Šè®¾ç½®ä¸€ä¸ªåä¸º<code class="fe no np nq nr b">.language</code>çš„æ‰©å±•å±æ€§ã€‚ç„¶åå¯ä»¥é€šè¿‡<code class="fe no np nq nr b">Doc._.language</code>è®¿é—®è¯¥å±æ€§ï¼Œå®ƒå°†è¿”å›é¢„æµ‹çš„è¯­è¨€åŠå…¶æ¦‚ç‡ã€‚</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="3262" class="nw mf it nr b gy nx ny l nz oa">import spacy<br/>from spacy_langdetect import LanguageDetector</span><span id="e6b0" class="nw mf it nr b gy ob ny l nz oa">text2 = 'In 1793, Alexander Hamilton recruited Webster to move to New York City and become an editor for a Federalist Party newspaper.'</span><span id="6110" class="nw mf it nr b gy ob ny l nz oa">nlp = spacy.load('en_core_web_sm')<br/>nlp.add_pipe(LanguageDetector(), name='language_detector', last=True)</span><span id="0d56" class="nw mf it nr b gy ob ny l nz oa">doc = nlp(text)<br/>doc._.language  # {'language': 'en', 'score': 0.9999978351575265}</span></pre><h1 id="a1c9" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">3) langid</h1><p id="54ef" class="pw-post-body-paragraph li lj it lk b ll or kd ln lo os kg lq lr ot lt lu lv ou lx ly lz ov mb mc md im bi translated">langidç‰¹åˆ«å¹å˜˜å®ƒçš„é€Ÿåº¦(ä¸‹é¢ä¼šè¯¦ç»†ä»‹ç»)ã€‚å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºä¸Šé¢çš„å·¥å…·ï¼Œä½†æ˜¯å®ƒè¿˜å¯ä»¥é€šè¿‡è¿è¡Œ<code class="fe no np nq nr b">python langid.py</code>ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ã€‚æŸ¥çœ‹ä»–ä»¬çš„å›è´­åè®®ï¼Œäº†è§£æ›´å¤šç»†èŠ‚å’Œå…¶ä»–é€‰æ‹©ã€‚</p><div class="mw mx gp gr my mz"><a href="https://github.com/saffsd/langid.py" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jd gy z fp ne fr fs nf fu fw jc bi translated">saffsd/langid.py</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">pyæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¯­è¨€è¯†åˆ«(langid)å·¥å…·ã€‚è®¾è®¡åŸåˆ™å¦‚ä¸‹:å¿«é€Ÿé¢„è®­ç»ƒâ€¦</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">github.com</p></div></div><div class="ni l"><div class="ow l nk nl nm ni nn lb mz"/></div></div></a></div><p id="ffbb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¦å°†langidç”¨ä½œPythonåº“ï¼Œè¯·ä½¿ç”¨<code class="fe no np nq nr b">classify</code>å‡½æ•°:</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="38bc" class="nw mf it nr b gy nx ny l nz oa">import langid</span><span id="9c2a" class="nw mf it nr b gy ob ny l nz oa">langid.classify(text2)  # ('en', -127.75649309158325)</span></pre><p id="2652" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ‚¨å¯ä»¥å°†æœ€åˆåœ¨å¯¹æ•°æ¦‚ç‡ç©ºé—´ä¸­è®¡ç®—çš„æ¦‚ç‡é¢„æµ‹æ ¡å‡†ä¸ºå¯ä»¥è§£é‡Šä¸º0åˆ°1èŒƒå›´å†…çš„ç½®ä¿¡åº¦å¾—åˆ†:</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="29d4" class="nw mf it nr b gy nx ny l nz oa">from langid.langid import LanguageIdentifier, model</span><span id="fb23" class="nw mf it nr b gy ob ny l nz oa">lang_identifier = LanguageIdentifier.from_modelstring(model, norm_probs=True)<br/>lang_identifier.classify(text2) # ('en', 0.999999999999998)</span></pre><h1 id="8558" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">4)å¿«é€Ÿæ–‡æœ¬</h1><p id="1f1a" class="pw-post-body-paragraph li lj it lk b ll or kd ln lo os kg lq lr ot lt lu lv ou lx ly lz ov mb mc md im bi translated">fasttextæŒ‡å‡ºï¼Œå…¶é¢„è®­ç»ƒçš„è¯­è¨€è¯†åˆ«æ¨¡å‹å ç”¨çš„å†…å­˜ä¸åˆ°1MBï¼Œä½†æ¯ç§’é’Ÿèƒ½å¤Ÿåˆ†ç±»æ•°åƒä»½æ–‡ä»¶ã€‚</p><p id="1c57" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸‹è½½æ‚¨é€‰æ‹©çš„å‹å·:</p><ul class=""><li id="c3de" class="oc od it lk b ll lm lo lp lr oe lv of lz og md ox oi oj ok bi translated"><a class="ae lh" href="https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.bin" rel="noopener ugc nofollow" target="_blank"> lid.176.bin </a>:é€Ÿåº¦æ›´å¿«ï¼Œç²¾åº¦ç•¥é«˜(æ–‡ä»¶å¤§å°=126MB)ã€‚</li><li id="3299" class="oc od it lk b ll ol lo om lr on lv oo lz op md ox oi oj ok bi translated"><a class="ae lh" href="https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.ftz" rel="noopener ugc nofollow" target="_blank"> lid.176.ftz </a>:æ¨¡å‹çš„å‹ç¼©ç‰ˆæœ¬(æ–‡ä»¶å¤§å°=917kB)ã€‚</li></ul><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="ff2c" class="nw mf it nr b gy nx ny l nz oa">import fasttext<br/><br/>path_to_pretrained_model = '/tmp/lid.176.bin'<br/>fmodel = fasttext.load_model(path_to_pretrained_model)<br/>fmodel.predict([text2])  # ([['__label__en']], [array([0.9331119], dtype=float32)]</span></pre><h1 id="6832" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">é€Ÿåº¦ğŸš…</h1><p id="fbe5" class="pw-post-body-paragraph li lj it lk b ll or kd ln lo os kg lq lr ot lt lu lv ou lx ly lz ov mb mc md im bi translated">å¦‚æœæ‚¨è®¡åˆ’åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨éœ€è¦è¯­è¨€è¯†åˆ«çš„åº”ç”¨ç¨‹åºï¼Œé€Ÿåº¦å¯èƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„è€ƒè™‘å› ç´ ã€‚ä¸‹é¢æ˜¯ä¸Šè¿°å››ç§å·¥å…·çš„å¿«é€ŸåŸºå‡†æµ‹è¯•ã€‚</p><p id="8399" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»Kaggleä¸‹è½½äº†ä¸€ä¸ªåŒ…å«10ï¼Œ502æ¡æ¨æ–‡çš„æ•°æ®é›†ï¼Œè¿™äº›æ¨æ–‡æ˜¯ä»æ¥è‡ª130ä¸ªä¸åŒå›½å®¶çš„å…¬å¼€å‘å¸ƒçš„å¸¦åœ°ç†æ ‡è®°çš„Twitteræ¶ˆæ¯ä¸­éšæœºæŠ½å–çš„ã€‚é™¤äº†å…¶ä»–ç‰¹å¾ä¹‹å¤–ï¼Œå®ƒä»¬è¿˜è¢«æ ‡æ³¨ä¸ºè‹±è¯­æˆ–éè‹±è¯­ã€‚</p><p id="ded5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ•°æ®æ¥æº:<a class="ae lh" href="https://www.kaggle.com/rtatman/the-umass-global-english-on-twitter-dataset" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/rtatman/the-umass-global-English-on-Twitter-dataset</a>ã€‚</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="f5fb" class="nw mf it nr b gy nx ny l nz oa">import pandas as pd</span><span id="64bd" class="nw mf it nr b gy ob ny l nz oa">df = pd.read_csv('all_annotated.tsv', sep='\t')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oy"><img src="../Images/252b3cac74cecf1fb5bb8d2e28ca7178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2G2H_FtdkJXtpR-_lAbL_w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Kaggleæ•°æ®é›†å‰å…­è¡Œ</p></figure><p id="0f6a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">é€Ÿåº¦æµ‹è¯•çš„ç»“æœï¼</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oz"><img src="../Images/142b47fe90bf242555d3698fcc4eb3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlV94gjDIpvYJqScMzjIAQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">é€Ÿåº¦æµ‹è¯•ç»“æœ</p></figure><p id="8fa5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">fasttextåªç”¨äº†129æ¯«ç§’å°±å¯¹10ï¼Œ000å¤šä¸ªæ•°æ®ç‚¹è¿›è¡Œäº†é¢„æµ‹ã€‚å…°å‰å¾·ååˆ—ç¬¬äºŒï¼Œå…¶ä»–ç«äº‰è€…æ…¢äº†è®¸å¤šæ•°é‡çº§ã€‚</p><h1 id="6de3" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">å‡†ç¡®(æ€§)ğŸ”¬</h1><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="4282" class="nw mf it nr b gy nx ny l nz oa">from sklearn.metrics import accuracy_score</span><span id="c746" class="nw mf it nr b gy ob ny l nz oa">ytrue = df['Definitely English'].to_list()<br/>tweets = df['Tweet'].to_list()</span><span id="9d4a" class="nw mf it nr b gy ob ny l nz oa"># get the predictions of each detector</span><span id="145c" class="nw mf it nr b gy ob ny l nz oa">langdetect_preds = [lang_detect(t) for t in tweets]<br/>spacy_preds = [nlp(t)._.language['language'] for t in tweets]<br/>langid_preds = [lang_identifier.classify(text)[0] for t in tweets]<br/>fasttext_preds = [p[0].replace('__label__', '') for p in fmodel.predict(tweets)[0]]</span><span id="27d2" class="nw mf it nr b gy ob ny l nz oa"># binarize the labels</span><span id="e670" class="nw mf it nr b gy ob ny l nz oa">langdetect_preds_binary = [1 if p == 'en' else 0 for p in langdetect_preds]<br/>spacy_preds_binary = [1 if p == 'en' else 0 for p in spacy_preds]<br/>langid_preds_binary = [1 if p == 'en' else 0 for p in langid_preds]<br/>fasttext_preds_binary = [1 if p == 'en' else 0 for p in fasttext_preds]</span><span id="e74e" class="nw mf it nr b gy ob ny l nz oa"># evaluate accuracy against the true labels (1 for English, 0 otherwise)</span><span id="7953" class="nw mf it nr b gy ob ny l nz oa">accuracy_score(ytrue, langdetect_preds_binary)  # 0.8448866882498571 <br/>accuracy_score(ytrue, spacy_preds_binary)  # 0.8448866882498571<br/>accuracy_score(ytrue, langid_preds_binary)  # 0.8268901161683488<br/>accuracy_score(ytrue, fasttext_preds_binary)  #<strong class="nr jd"> 0.8598362216720624</strong></span></pre><p id="0e79" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">fasttextçš„å‡†ç¡®ç‡æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯langdetectå’Œspacy-langdetectã€‚ç›´è§‰å‘Šè¯‰æˆ‘spacy-langdetectåªæ˜¯å¼•æ“ç›–ä¸‹çš„langdetectã€‚ï¼›)(å®ƒä»¬æœ‰å®Œå…¨ç›¸åŒçš„å‡†ç¡®ç‡â€¦â€¦è¿™ä¹Ÿè§£é‡Šäº†ç›¸ä¼¼çš„åº“åã€‚)</p><p id="84fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºäº†æ›´å¥½åœ°è¡¡é‡ï¼Œè¿™é‡Œæ˜¯æ¯ä¸ªæ¨¡å‹çš„ç²¾ç¡®åº¦ã€å¬å›ç‡å’Œf1å€¼ã€‚</p><pre class="ks kt ku kv gt ns nr nt nu aw nv bi"><span id="d6bb" class="nw mf it nr b gy nx ny l nz oa">from sklearn.metrics import classification_report</span><span id="f465" class="nw mf it nr b gy ob ny l nz oa">print(classification_report(ytrue, langdetect_preds_binary))<br/>print(classification_report(ytrue, spacy_preds_binary))<br/>print(classification_report(ytrue, langid_preds_binary))<br/>print(classification_report(ytrue, fasttext_preds_binary))</span><span id="4d66" class="nw mf it nr b gy ob ny l nz oa"># langdetect<br/>              precision    recall  f1-score   support<br/><br/>           0       0.80      0.94      0.86      5416<br/>           1       0.92      0.75      0.82      5086<br/><br/>    accuracy                           0.84     10502<br/>   macro avg       0.86      0.84      0.84     10502<br/>weighted avg       0.86      0.84      0.84     10502</span><span id="9f28" class="nw mf it nr b gy ob ny l nz oa"># spacy-langdetect<br/>              precision    recall  f1-score   support<br/><br/>           0       0.80      0.94      0.86      5416<br/>           1       0.92      0.75      0.82      5086<br/><br/>    accuracy                           0.84     10502<br/>   macro avg       0.86      0.84      0.84     10502<br/>weighted avg       0.86      0.84      0.84     10502<br/></span><span id="4762" class="nw mf it nr b gy ob ny l nz oa"># langid<br/>              precision    recall  f1-score   support<br/><br/>           0       0.79      0.90      0.84      5416<br/>           1       0.88      0.74      0.81      5086<br/><br/>    accuracy                           0.83     10502<br/>   macro avg       0.83      0.82      0.82     10502<br/>weighted avg       0.83      0.83      0.83     10502</span><span id="cdde" class="nw mf it nr b gy ob ny l nz oa"># fasttext<br/>              precision    recall  f1-score   support<br/><br/>           0       0.91      0.80      0.86      5416<br/>           1       0.82      0.92      0.86      5086<br/><br/>    accuracy                           0.86     10502<br/>   macro avg       0.86      0.86      0.86     10502<br/>weighted avg       0.87      0.86      0.86     10502</span></pre><h1 id="c98d" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">å¤–å–é£Ÿå“</h1><p id="9a1d" class="pw-post-body-paragraph li lj it lk b ll or kd ln lo os kg lq lr ot lt lu lv ou lx ly lz ov mb mc md im bi translated">å¦‚æœä½ è¦å¤„ç†ä¸€ä¸ªéå¸¸å¤§çš„æ•°æ®é›†ï¼Œæˆ‘ä¼šé€‰æ‹©fasttextã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pa"><img src="../Images/4b734e79ed2a457b32f4c1a898fdb26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7T47jGZTFFTtTBhU6ZvGuA.png"/></div></div></figure></div></div>    
</body>
</html>