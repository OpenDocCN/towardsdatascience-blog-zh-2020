<html>
<head>
<title>How to Build a Serverless Application using AWS SAM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用AWS SAM构建无服务器应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f?source=collection_archive---------8-----------------------#2020-10-19">https://towardsdatascience.com/how-to-build-a-serverless-application-using-aws-sam-b4d595fe689f?source=collection_archive---------8-----------------------#2020-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="5c96" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">动手教程</a>，云计算系列</h2><div class=""/><div class=""><h2 id="2827" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">立即构建和部署基于Java的无服务器REST API</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d7c5f0c500ac3e9b1b34e8d7f527edda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvNkly---_BCf0yklbsm2g.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片作者。原始图像由<a class="ae le" href="https://www.canva.com/p/pixabay/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>通过<a class="ae le" href="https://www.canva.com/media/MADQ4_ajPZc" rel="noopener ugc nofollow" target="_blank"> Canva </a></p></figure><p id="e853" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在我之前的<a class="ae le" rel="noopener" target="_blank" href="/how-to-build-a-serverless-application-using-aws-chalice-91024416d84f">文章</a>中，我谈到了AWS Chalice，以及我们如何快速构建一个基于Python的无服务器应用程序，并在几分钟内将其部署到AWS上。</p><p id="9dcd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">虽然Python是一个快速而有趣的原型，但在运行大规模生产应用程序时，它可能不是许多人的首选语言。许多组织使用Java作为他们的主要开发语言，许多开发人员也在转向更新的语言，如Go。</p><p id="c7e5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本文中，我将带您了解构建和部署从Google News获取最新新闻的无服务器应用程序所需的步骤。但这一次，我们将使用AWS无服务器应用程序模型(SAM)和Java进行开发。像Chalice一样，AWS SAM CLI提供了一组丰富的工具，使开发人员能够快速构建无服务器应用程序。</p><h1 id="04e0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">先决条件</h1><p id="d031" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">本教程需要一个AWS帐户。如果你还没有，那么<a class="ae le" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" rel="noopener ugc nofollow" target="_blank">创建一个</a>。我们的应用程序将只使用自由层资源，因此成本应该不是问题。</p><p id="3e94" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您还需要配置安全性，并为您的访问创建用户和角色。</p><h1 id="3549" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何配置AWS凭据</h1><p id="ac28" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">SAM在幕后使用AWS命令行界面(CLI)来部署项目。如果你以前没有使用过AWS的CLI来使用AWS资源，你可以按照这里的指南<a class="ae le" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank">来安装它。</a></p><p id="5bb0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">安装完成后，您需要<a class="ae le" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html" rel="noopener ugc nofollow" target="_blank">配置</a>您的AWS CLI，以使用来自您的AWS帐户的凭证。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/1d028650323410b20ab9267817849e16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QoXkHAioHvxpZbQJ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="e70e" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何安装SAM</h1><p id="2e84" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">接下来，您需要安装SAM。我们将在本教程中使用Java，但是您可以使用AWS Lambda支持的任何语言运行时。</p><h2 id="8ec3" class="mz mc iq bd md na nb dn mh nc nd dp ml lo ne nf mn ls ng nh mp lw ni nj mr iw bi translated">验证Java安装</h2><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="b415" class="mz mc iq nl b gy np nq l nr ns">$ java --version</span><span id="9f21" class="mz mc iq nl b gy nt nq l nr ns">openjdk 11.0.8 2020-07-14<br/>OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.8+10)<br/>OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.8+10, mixed mode)</span></pre><h2 id="485d" class="mz mc iq bd md na nb dn mh nc nd dp ml lo ne nf mn ls ng nh mp lw ni nj mr iw bi translated">安装SAM CLI</h2><p id="1293" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">根据您的操作系统，SAM CLI的安装说明会有所不同。本文介绍了在MacOS上安装它的说明。</p><p id="8232" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在macOS上安装SAM CLI的推荐方法是使用Homebrew软件包管理器。</p><p id="7695" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">确认你是否安装了自制软件。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="e351" class="mz mc iq nl b gy np nq l nr ns">$ brew --version</span><span id="4045" class="mz mc iq nl b gy nt nq l nr ns">Homebrew/homebrew-core (git revision fe68a; last commit 2020-10-15)<br/>Homebrew/homebrew-cask (git revision 4a2c25; last commit 2020-10-15)</span></pre><p id="a964" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果没有，您可以使用以下命令安装Homebrew。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="2a92" class="mz mc iq nl b gy np nq l nr ns">$ /bin/bash -c "$(curl -fsSL <a class="ae le" href="https://raw.githubusercontent.com/Homebrew/install/master/install.sh" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/Homebrew/install/master/install.sh</a>)"</span></pre><p id="313e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来，使用以下命令安装SAM。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="53e3" class="mz mc iq nl b gy np nq l nr ns">brew tap aws/tap<br/>brew install aws-sam-cli</span></pre><h2 id="d267" class="mz mc iq bd md na nb dn mh nc nd dp ml lo ne nf mn ls ng nh mp lw ni nj mr iw bi translated">验证SAM安装</h2><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="0de3" class="mz mc iq nl b gy np nq l nr ns">$ sam --version</span><span id="6e02" class="mz mc iq nl b gy nt nq l nr ns">SAM CLI, version 1.6.2</span></pre><h1 id="7f09" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何创建项目</h1><p id="cf7b" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">接下来，运行<code class="fe nu nv nw nl b">sam-init</code>命令创建一个新项目。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="018b" class="mz mc iq nl b gy np nq l nr ns">sam init -r java11 -d maven --app-template hello-world -n daily-news-java</span></pre><p id="f21a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">默认情况下，SAM会创建一个Python项目。因为我们想要创建一个Java项目，所以我们需要传递一些额外的参数。</p><p id="1149" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">参数:</strong></p><ul class=""><li id="fa9b" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated"><code class="fe nu nv nw nl b">-r java11</code>:使用Java 11运行时</li><li id="4dca" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated"><code class="fe nu nv nw nl b">-d maven</code>:使用maven作为依赖管理器</li><li id="59d3" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated"><code class="fe nu nv nw nl b">--app-template hello-world</code>:使用HelloWorld快速入门模板</li><li id="968f" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated"><code class="fe nu nv nw nl b">-n daily-news-java</code>:我们项目的名称</li></ul><p id="6628" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将在当前目录下创建一个<code class="fe nu nv nw nl b">daily-news-java</code>文件夹。您可以看到SAM在这个文件夹中创建了几个文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/90623c0775c06257a6671be520586b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-MqHn1UKugzbiup1P5xCQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="68c5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们来看看<code class="fe nu nv nw nl b">App.java</code>文件。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="d299" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe nu nv nw nl b">sam-init</code>命令创建了一个简单的Lambda函数，该函数在被调用时返回JSON主体<code class="fe nu nv nw nl b">{"message": "hello world"}</code>和机器的IP地址。我们现在可以更改这个模板并添加更多代码来阅读来自Google的新闻。</p><p id="2963" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们来看看<code class="fe nu nv nw nl b">template.yml</code>文件。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="1047" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这包含了创建我们的Amazon API网关和AWS Lambda资源的CloudFormation模板。</p><p id="8e27" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Lambda配置指定我们有一个运行在<code class="fe nu nv nw nl b">Java 11</code>和<code class="fe nu nv nw nl b">512 MB</code>内存上的<code class="fe nu nv nw nl b">HelloWorldFunction</code> lambda。</p><p id="2fe9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">API网关配置定义了一个带有<code class="fe nu nv nw nl b">/hello</code>路径的<code class="fe nu nv nw nl b">GET</code>方法，我们将使用它来调用API。</p><p id="c4dd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们将使用Java的内部HTTP和XML解析库，所以我们不需要向我们的<code class="fe nu nv nw nl b">pom.xml</code>文件添加任何依赖项。请注意，作为样板代码的一部分提供的默认<code class="fe nu nv nw nl b">pom.xml</code>带有设置为<code class="fe nu nv nw nl b">1.8.</code>的编译器源代码，我们需要将其更新为<code class="fe nu nv nw nl b">11</code>，这样我们就可以使用Java 11中的新HTTP库。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="0dd0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">按照Java面向对象的方式，让我们也创建一个包含新闻标题和出版日期的<code class="fe nu nv nw nl b">NewsItem</code>类。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="86b0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">注意，我们已经覆盖了<code class="fe nu nv nw nl b">toString</code>方法。这是为了创建对象的JSON表示，避免使用任何JSON解析库。</p><p id="a1c6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">接下来，您需要添加一个方法来从Google获取RSS提要，解析它以提取新闻标题和发布日期，并创建一个新闻条目列表。为此，将以下代码添加到您的<code class="fe nu nv nw nl b">App.java</code></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="e21e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在让我们更新<code class="fe nu nv nw nl b">App.java</code>中的<code class="fe nu nv nw nl b">handleRequest</code>方法来调用这个方法并返回新闻条目列表作为结果。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7fe4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">不要忘记更新单元测试。编写它们是为了测试响应中是否存在“hello world ”,它们将在我们更改后开始失败。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="om on l"/></div></figure><h1 id="9bd1" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何构建</h1><p id="416c" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">从<code class="fe nu nv nw nl b">daily-news-java</code>文件夹中，运行<code class="fe nu nv nw nl b">sam build</code>命令。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/74114e7e91f972d677d18e9478a16d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCdNXlPUxCk5iHJEpmHNpQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="d1cd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将编译您的源代码并构建您在应用程序中拥有的任何依赖项。然后，它将所有文件移动到<code class="fe nu nv nw nl b">.aws-sam/build</code>文件夹中，这样它们就可以打包和部署了。它也会相应地更新<code class="fe nu nv nw nl b">template.yml</code>文件。</p><h1 id="3516" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何在本地测试</h1><p id="1ff0" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">这是萨姆最精彩的部分。您可以在本地部署和测试您的应用程序！！在开发阶段，当您想测试代码而不必将它部署到AWS时，这非常有用。</p><p id="5a16" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">SAM CLI提供了<code class="fe nu nv nw nl b">sam local</code>命令来本地运行您的应用程序。这在内部使用Docker来模拟Lambda的执行环境。如果没有安装Docker，可以从<a class="ae le" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank">这里</a>获取。</p><p id="edeb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以用两种方式在本地测试我们的应用程序:</p><ul class=""><li id="511e" class="nx ny iq lh b li lj ll lm lo nz ls oa lw ob ma oc od oe of bi translated">本地托管API</li><li id="aae3" class="nx ny iq lh b li og ll oh lo oi ls oj lw ok ma oc od oe of bi translated">直接调用Lambda函数</li></ul><p id="d94b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们来看看这两个选项。</p><h2 id="3f2c" class="mz mc iq bd md na nb dn mh nc nd dp ml lo ne nf mn ls ng nh mp lw ni nj mr iw bi translated">本地托管</h2><p id="7aef" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">使用以下命令在本地启动API。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="cb73" class="mz mc iq nl b gy np nq l nr ns">sam local start-api</span></pre><p id="4539" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这在内部创建了一个本地服务器，并公开了一个复制REST API的本地端点。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/ec163322c0e79dba518cdd319856f0b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j8QGblZ8Pw-rW0akOd8cGA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="ef76" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">一旦Docker容器被加载，您就可以访问<code class="fe nu nv nw nl b">localhost</code>上的api。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="0316" class="mz mc iq nl b gy np nq l nr ns">curl <a class="ae le" href="http://127.0.0.1:3000/hello" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:3000/hello</a></span></pre><h2 id="31e7" class="mz mc iq bd md na nb dn mh nc nd dp ml lo ne nf mn ls ng nh mp lw ni nj mr iw bi translated">直接调用</h2><p id="0f9e" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">使用以下命令调用Lambda函数。</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="c0aa" class="mz mc iq nl b gy np nq l nr ns">sam local invoke "HelloWorldFunction" -e events/event.json</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/b63222fd56f6dbecf3640dc34ee70366.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ij2F_XTr2sbj_WJmgSMBjw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="f061" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这直接调用Lambda函数(就像我们调用<code class="fe nu nv nw nl b">main</code>方法一样)并将<code class="fe nu nv nw nl b">event.json</code>文件作为有效载荷传递。</p><h1 id="5cdc" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何部署项目</h1><p id="7499" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">让我们部署应用程序。从<code class="fe nu nv nw nl b">daily-news-java</code>文件夹中，运行<code class="fe nu nv nw nl b">sam deploy --guided</code>命令。遵循提示并提供所需的输入(或按Enter键接受默认值)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oq"><img src="../Images/88103a78b97a7cdda8a46be3fd1c92d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ds7bkokPsSfUzAwd9wlSJQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><p id="56c1" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将使用Amazon API Gateway和AWS Lambda在AWS上部署我们的应用程序。它采用我们用<code class="fe nu nv nw nl b">sam build</code>命令构建的部署工件，打包并上传到由AWS SAM CLI创建的亚马逊S3桶，并使用AWS CloudFormation部署应用程序。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/2b8ad964e0be372f90447e09161a5b08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mrug0HxqpZnaip-gK9OBFw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi or"><img src="../Images/53f2cab74b610bdc4c98523c0f72b3c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mSOtS3I399MPVj0GCpTKjQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">API网关中的每日新闻API(图片由作者提供)</p></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi os"><img src="../Images/2ebe0529c56ba0ea35b68e7b4bec8774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DSBXrZGFGZFlcGdNjGiGjA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">每日新闻Lambda函数(图片由作者提供)</p></figure><p id="54e6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们现在可以尝试使用上面提供的端点URL来访问API。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/bbf668ee010014557f7c8e296144449e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpUXr7jOOf4b3ZyhSQGoIA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="11f0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何清理资源</h1><p id="77d6" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">我们可以使用<code class="fe nu nv nw nl b">aws cloudformation delete-stack</code> <strong class="lh ja"> </strong>命令<strong class="lh ja"> </strong>删除AWS CloudFormation堆栈以及我们运行<code class="fe nu nv nw nl b">sam deploy</code>命令时创建的所有资源。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ot"><img src="../Images/f8efa5f9593d93f03011f6ee8439727a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FdyP38-TmeU_sCNN-rWCeA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</p></figure><h1 id="87ba" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">结论</h1><p id="6a74" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">恭喜你！！您刚刚使用AWS SAM在AWS上部署了一个无服务器应用程序。它确实比之前的多做了一点工作，但也不太难。</p><p id="fd89" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在，您可以继续对您的<code class="fe nu nv nw nl b">App.java</code>文件进行任何修改，并重新运行<code class="fe nu nv nw nl b">sam deploy</code>来重新部署您的更改。</p><p id="05ad" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">本教程的完整源代码可以在<a class="ae le" href="https://github.com/theawesomenayak/daily-news-java" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div></div>    
</body>
</html>