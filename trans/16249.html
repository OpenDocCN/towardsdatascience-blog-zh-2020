<html>
<head>
<title>Building Web Applications with Streamlit for NLP Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit为NLP项目构建Web应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-web-applications-with-streamlit-for-nlp-projects-cdc1cf0b38db?source=collection_archive---------25-----------------------#2020-11-09">https://towardsdatascience.com/building-web-applications-with-streamlit-for-nlp-projects-cdc1cf0b38db?source=collection_archive---------25-----------------------#2020-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ace3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="1b9d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在解决NLP任务(如情感分析、NER和文本摘要)时，Streamlit基础知识的代码演示和解释。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/46b70b6cac05f4707b79264cf5cc6156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YTeSIjiYirbk4CZavQXCqg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片来自<a class="ae lh" href="https://unsplash.com/photos/hpjSkU2UYSU" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="fc0e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据科学家面临的最常见的任务之一是以一种用户交互的格式呈现他们的模型/项目。如果模型不能在某种类型的应用程序中呈现，那么它对任何外部用户都没有多大用处。这介绍了web/app开发的广阔领域，然后引出了更多的语言和工具，如HTML、CSS、ReactJS、Dash、Flask等，它们可以帮助您创建一个前端界面，供用户与您的模型进行交互并从中获得结果。这个广阔的领域起初可能会令人生畏，并且与传统的数据科学技能集格格不入。</p><p id="f7ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个简单的Python API，它提供了一种方式来<strong class="lk jd">缩短这个学习曲线</strong>，并消除数据科学家了解这些工具的需要。一般的全栈库应该是大规模项目的首选，但是如果您的数据科学项目需要一个<strong class="lk jd">快速前端</strong>，Streamlit不仅仅是为了这个目的。在本文中，我想演示Streamlit的基础知识，同时构建一个web应用程序，允许用户使用模型解决常见的NLP任务，如情感分析、命名实体识别和文本摘要。</p><p id="64b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">注意</strong>:虽然我们可以为这些任务中的每一项构建定制模型，但我还是使用了Python库中预先训练好的模型，因为本文更侧重于构建一个web应用程序来通过Streamlit显示您的ML/NLP项目。</p><h1 id="810e" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">目录</h1><ol class=""><li id="c623" class="mw mx it lk b ll my lo mz lr na lv nb lz nc md nd ne nf ng bi translated">Web应用程序设置</li><li id="a9a5" class="mw mx it lk b ll nh lo ni lr nj lv nk lz nl md nd ne nf ng bi translated">数据</li><li id="d280" class="mw mx it lk b ll nh lo ni lr nj lv nk lz nl md nd ne nf ng bi translated">情感分析</li><li id="5296" class="mw mx it lk b ll nh lo ni lr nj lv nk lz nl md nd ne nf ng bi translated">命名实体识别(NER)</li><li id="d56b" class="mw mx it lk b ll nh lo ni lr nj lv nk lz nl md nd ne nf ng bi translated">文本摘要</li><li id="420f" class="mw mx it lk b ll nh lo ni lr nj lv nk lz nl md nd ne nf ng bi translated">整个代码和结论</li></ol><h1 id="aff8" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">1.Web应用程序设置</h1><p id="ce3e" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">在构建任何模型之前，我们需要一个应用程序外观的模板。让我们先导入streamlit(为了<strong class="lk jd">安装</strong>使用pip3为Python3安装streamlit)。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">导入streamlit</p></figure><p id="8a17" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了解释我们的应用程序是什么，让我们添加一个标题<strong class="lk jd">和一个小标题</strong>，询问用户希望从我们的三个选项中选择哪一个NLP服务。<strong class="lk jd"> Streamlit.title() </strong>、<strong class="lk jd"> Streamlit.header() </strong>和<strong class="lk jd"> Streamlit.subheader() </strong>是按<strong class="lk jd">降序</strong>排列的不同<strong class="lk jd">标题级别</strong>。对于纯非标题文本数据，您可以使用<strong class="lk jd"> Streamlit.text() </strong>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于创建应用程序标题的代码</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/967946bb310acc44900be370fdf394d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDcs4V7gjVOHzZrvtmGa1w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Streamlit的航向代码结果</p></figure><p id="e5a7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们有了应用程序的主要问题，我们可以构建一个<strong class="lk jd">下拉菜单</strong>，让用户从我们的模型可以完成的三个任务中进行选择。这可以使用<strong class="lk jd"> Streamlit.selectbox() </strong>调用来完成。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于创建带有选项的下拉菜单的代码</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/84fb34b880b57efca6ca2d073597ccd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9dlmzJNJFycPZOD6s0axMg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">NLP服务使用的下拉菜单</p></figure><p id="878d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从三个选项中选择的服务作为字符串存储在<strong class="lk jd">选项变量</strong>中。需要输入的下一条信息是用户想要输入的文本<strong class="lk jd">文本</strong>，以便我们的模型处理/执行所选择的任务。为此我们可以使用<strong class="lk jd"> Streamlit.text_input() </strong>调用，它类似于HTML中的textarea标签。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于输入文本进行分析的代码</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nt"><img src="../Images/5b88417fe168e238f14e79d9fa15e81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2fwkWp0U-oDB8zMDl-EO8A.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">供用户输入模型的文本区域</p></figure><p id="2571" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，文本输入被存储在<strong class="lk jd">文本变量</strong>中。现在我们有了包含所有需要处理的信息的选项和文本变量，我们需要创建一个区域来显示结果。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="3d2d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们的模板设置，我们有一些东西看起来像下面的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nu"><img src="../Images/f63d1bb969365187fe31d26284264d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMed8CAwJhbziqRsKlc1CQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用Streamlit制作的整体模板</p></figure><p id="48a3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">只用了大约10行Python代码，就创建了一个非常简单而有效的模板。现在我们有了前端，我们可以处理/向我们的模型提供这些信息，并将结果返回给用户。</p><h1 id="60d1" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">2.数据</h1><p id="99e8" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于NLP任务，我们将使用以下一篇名为“<a class="ae lh" href="https://analyticsindiamag.com/microsoft-launches-intelligent-cloud-hub-to-upskill-students-in-ai-cloud-technologies/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">微软推出智能云中心以提升人工智能&amp;云技术</strong></a><strong class="lk jd"/>的学生的文本数据。文章/正文是通过<a class="ae lh" rel="noopener" target="_blank" href="/understand-text-summarization-and-create-your-own-summarizer-in-python-b26a9f09fc70">中的文章</a>找到链接的。我们将使用下面的<strong class="lk jd">文本块</strong>作为所有三个NLP任务的<strong class="lk jd">输入</strong>文本。</p><pre class="ks kt ku kv gt nv nw nx ny aw nz bi"><span id="6ff5" class="oa mf it nw b gy ob oc l od oe">In an attempt to build an AI-ready workforce, Microsoft announced Intelligent Cloud Hub which has been launched to empower the next generation of students with AI-ready skills. Envisioned as a three-year collaborative program, Intelligent Cloud Hub will support around 100 institutions with AI infrastructure, course content and curriculum, developer support, development tools and give students access to cloud and AI services. As part of the program, the Redmond giant which wants to expand its reach and is planning to build a strong developer ecosystem in India with the program will set up the core AI infrastructure and IoT Hub for the selected campuses. The company will provide AI development tools and Azure AI services such as Microsoft Cognitive Services, Bot Services and Azure Machine Learning.According to Manish Prakash, Country General Manager-PS, Health and Education, Microsoft India, said, "With AI being the defining technology of our time, it is transforming lives and industry and the jobs of tomorrow will require a different skillset. This will require more collaborations and training and working with AI. That’s why it has become more critical than ever for educational institutions to integrate new cloud and AI technologies. The program is an attempt to ramp up the institutional set-up and build capabilities among the educators to educate the workforce of tomorrow." The program aims to build up the cognitive skills and in-depth understanding of developing intelligent cloud connected solutions for applications across industry. Earlier in April this year, the company announced Microsoft Professional Program In AI as a learning track open to the public. The program was developed to provide job ready skills to programmers who wanted to hone their skills in AI and data science with a series of online courses which featured hands-on labs and expert instructors as well. This program also included developer-focused AI school that provided a bunch of assets to help build AI skills.</span></pre><h1 id="32fb" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">3.情感分析</h1><p id="7a93" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于情感分析，我们将使用<a class="ae lh" href="https://textblob.readthedocs.io/en/dev/quickstart.html" rel="noopener ugc nofollow" target="_blank"> textblob </a>库来生成输入文本的极性和主观性。(使用pip3 <strong class="lk jd">为Python3安装</strong> textblob)</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="15c4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了标记数据，我们使用<a class="ae lh" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank"> NLTK </a>库将文本分割成句子，这样我们就可以将较大的文本分割成较小的部分进行可视化分析。使用textblob库，我们得到了每句话的<strong class="lk jd">情感</strong>来创建贯穿文本的情感的可视情节。<strong class="lk jd">注</strong>:对于图书馆，情绪用-1到1表示，1表示最积极，-1表示最消极。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">策划每句话的情绪</p></figure><p id="7759" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<strong class="lk jd"> Streamlit.line_chart() </strong>中的另一个简洁的Streamlit特性，我们可以用线图绘制每个句子的情感，以便用户直观地分析第二部分中显示的文本数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/c9ca8615e37364ac015f2b174dd3095a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZGHQ2SH4yz-AAPrSu2vMWA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">文本中每句话的情感得分图</p></figure><p id="625e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们想要对文本有一个总体的看法，我们可以对整个数据字符串使用TextBlob API调用。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">整篇文章的整体情绪</p></figure><p id="5a60" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<strong class="lk jd"> st.write() </strong>调用，我们可以显示从textblob返回的情感。返回的两个特征是<strong class="lk jd">极性</strong>和<strong class="lk jd">主观性</strong>。极性在[-1，1]之间，主观性在[0，1]之间，0.0为客观，1.0为主观。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/e265696be9a6e680feef929b23b5346b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*ZFYPt56LJX0AVFFMjj5VNg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">输入文本的总体情感</p></figure><h1 id="bc40" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">4.命名实体识别(NER)</h1><p id="4da6" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于NER，我们将在<a class="ae lh" href="https://spacy.io/api/doc" rel="noopener ugc nofollow" target="_blank">空间</a>中使用另一个流行的NLP库。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="fa06" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Spacy有一个很好的特性，它提供了<strong class="lk jd">类型的实体</strong>以及它所识别的实体。这方面的例子包括:人、组织、日期、金钱等等。为了提取实体及其标签，我们可以遍历找到的实体的整个列表，并将它们加入到一个字典中。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用空间提取实体和实体类型</p></figure><p id="e7f1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了让我们的用户获得每种类型实体的直观表示，我们可以创建一个助手函数，列出每种类型的所有实体。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">提取每种类型的实体的辅助函数</p></figure><p id="5cef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用这个函数，我们可以提取每种类型的实体，并将结果写出来让用户清楚地看到。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将函数应用于编写每种类型的实体</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/16d6c4b960ea6fb42966951b6f93e901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4YYG-2WrqiV3DGSiKPTlg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">文本数据中每种类型的实体</p></figure><h1 id="0b97" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">5.文本摘要</h1><p id="550b" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于文本摘要，我们将使用<a class="ae lh" href="https://pypi.org/project/gensim/" rel="noopener ugc nofollow" target="_blank"> gensim </a>库，它有一个简单的<strong class="lk jd">摘要调用</strong>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Gensim进口</p></figure><p id="2ec3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用summary调用，我们可以轻松地生成输入文本的摘要。<strong class="lk jd">注意</strong>:总结电话需要不止一句话来配合gensim。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用gensim的文本摘要</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oi"><img src="../Images/dd7644549e6b06598bec84fc377c469a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IpzOmD39yS-hs0rYG24I1w.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">输入的摘要文本</p></figure><h1 id="5560" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">6.整个代码和结论</h1><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="np nq l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">完整代码</p></figure><div class="oj ok gp gr ol om"><a href="https://github.com/RamVegiraju/NLPStreamlit" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">RamVegiraju/NLPStreamlit</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">一个Streamlit应用程序，可以执行NLP任务，如情感分析、命名实体识别(NER)和文本…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa lb om"/></div></div></a></div><p id="51d4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Streamlit允许您无缝集成流行的数据科学/ML库，以在简单而简洁的web应用程序/仪表板上显示您的项目。虽然更常见的全栈技能组合将更好地服务于大规模项目，但使用Streamlit所需的短时间和简单性大大有助于数据科学家和ML工程师展示他们的项目。</p><p id="8d69" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望这篇文章对那些试图在ML/NLP项目中使用Streamlit的人有用。如果你对谈论ML &amp;数据科学感兴趣，请随时在评论中留下任何反馈或通过<a class="ae lh" href="https://www.linkedin.com/in/ram-vegiraju-81272b162/" rel="noopener ugc nofollow" target="_blank"> Linkedln </a>与我联系。感谢您的阅读！</p></div></div>    
</body>
</html>