<html>
<head>
<title>Differences in variance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方差差异</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/differences-in-variance-an-unappreciated-source-of-insight-in-our-data-f9cb0de520c0?source=collection_archive---------49-----------------------#2020-10-09">https://towardsdatascience.com/differences-in-variance-an-unappreciated-source-of-insight-in-our-data-f9cb0de520c0?source=collection_archive---------49-----------------------#2020-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5ec1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们数据中一个不受重视的洞察力来源</h2></div><p id="3aaf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据人喜欢平均值。他们喜欢平均值，他们喜欢中间值。平均而言，哪些国家最幸福？患有罕见疾病的人的平均寿命是多少？一个国家的收入中位数是多少？订婚戒指的平均价格是多少？</p><p id="25a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">均值和中位数很棒，因为它们告诉我们数据的总体情况。如果你的数据是正态分布的(通常不是正态分布的)，那么平均值会告诉你大部分你需要知道的东西。因此，我们的大多数统计测试，如t-test、ANOVA等，都是为了查看平均值，以及它们在不同组之间的差异。但是还有另一个变量，就在我们面前，却没有得到同样多的爱:<strong class="kh ir">方差</strong>。它有很多东西可以教给我们！</p><h1 id="b5f6" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">群体差异的两种方式</h1><p id="d894" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">这里有两组人，给定一些虚构的测试。我绘制了它们的分布图:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/923f2d42e4cea35fc0f43bdc95df4d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*mkZ4bkOGHul0w4KNF0qH-g.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">我只是在R中生成了一些随机的、虚假的数据，并用ggplot包绘制出来(图片由作者提供)</p></figure><p id="5ef5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们看到各组的均值不同。这种差异可以通过t检验或回归分析清楚地发现。但是还有另一种方式可以区分不同的群体:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/ae29e60a67bb09d9bae485f04f018dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*uSrPW3YWFufemGk5FetiVQ.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="4633" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，组1比组2具有更宽的分布。它有更大的<strong class="kh ir">方差</strong>。t-检验或回归不能捕捉到这一点；他们只会告诉你平均而言，这些群体没有什么不同<em class="mk">。但是正如你所看到的，这并不意味着这些群体没有什么不同！下面我将向您展示如何测试这一点。</em></p><p id="85eb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能认为你以前没有遇到过这个概念。但是你可能听说过<a class="ae ml" href="https://en.wikipedia.org/wiki/Gini_coefficient" rel="noopener ugc nofollow" target="_blank"> GINI系数，对吧？它衡量一个社会的财富不平等。概念大致相同:一些社会可能拥有相同的平均财富，但在一个社会中，财富可能分配不均。一个所有人工资完全相同的社会，其方差终究是0！</a></p><h1 id="036f" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated"><strong class="ak">真实数据的含义:性别和智商的例子</strong></h1><p id="1cda" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">对方差差异进行研究的少数领域之一是智商领域。研究普遍发现，虽然男女之间的智商差异很小或不存在，但男性的智商差异始终高于女性。下面我用数据来说明这一点，这些数据是我用一项超过80，000名苏格兰青少年的研究的真实方差模拟的(多么大的数据集啊！).我还给出了R代码，这样你就可以自己做了:</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="9052" class="mr lc iq mn b gy ms mt l mu mv">set.seed(140293)</span><span id="5b31" class="mr lc iq mn b gy mw mt l mu mv">male = rnorm(5000,100,14.9)<br/>female = rnorm(5000,100,14.1)</span></pre><p id="fcb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置了一个特定的种子，这样你就能得到和我一样的随机数，结果也能得到相同的随机生成的数据。然后，我创建了两组智商数据，5000名男性和5000名女性，均以100为均值呈正态分布。男性数据的标准偏差为14.9，女性为14.1。记住标准差是方差的平方根。</p><p id="7c86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将数据放入一个<a class="ae ml" href="https://r4ds.had.co.nz/tibbles.html" rel="noopener ugc nofollow" target="_blank">tible</a>中，并对其进行重新格式化，以便于使用，使用tidyverse R包很容易做到这一点:</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="3dd6" class="mr lc iq mn b gy ms mt l mu mv">install.packages('tidyverse')<br/>library(tidyverse)</span><span id="025b" class="mr lc iq mn b gy mw mt l mu mv">IQ_data = tibble(male, female) %&gt;% <br/>  pivot_longer(cols = c(male, female), <br/>               names_to = 'sex',<br/>               values_to = 'IQ') %&gt;%<br/>  mutate(sex = factor(sex))</span></pre><p id="0fbf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们做一个频率多边形来比较男性和女性的分布:</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="8ffe" class="mr lc iq mn b gy ms mt l mu mv">IQ_data %&gt;% ggplot( aes(x = IQ, colour = sex) )+<br/>  geom_freqpoly(size = 1)</span></pre><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/b7b01e153e5da61de2c9c9c3bfe1d7ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*hKkUPCHo4MIpHMuQ005lwA.png"/></div><p class="mg mh gj gh gi mi mj bd b be z dk translated">作者图片</p></figure><p id="fd91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">女性分布的峰值高于男性，表明接近100分的女性较多。男性分布在尾部略高，表明有更多的男性智商得分极高和极低。但是差别似乎很小。</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="0a68" class="mr lc iq mn b gy ms mt l mu mv">t.test(IQ ~ sex, IQ_data)</span></pre><p id="29e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进行t检验，平均智商没有性别差异(<em class="mk"> p </em> = 0.38)。然而，这些组可能在尾部有所不同。我们来调查一下。</p><h1 id="5f66" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated"><strong class="ak">尾比</strong></h1><p id="52ae" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们可以通过取高于或低于某个阈值的雄性与雌性的比例来计算出一个<strong class="kh ir">尾比</strong>。我们将所有智商为130或更高(一般认为非常聪明)的个体，统计男女数量。对于智商70或更低的人(一般认为不聪明)，我们也是这样做的。</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="6d22" class="mr lc iq mn b gy ms mt l mu mv">IQ_data %&gt;% filter(IQ &gt;= 130) %&gt;% group_by(sex) %&gt;% count</span><span id="1f8e" class="mr lc iq mn b gy mw mt l mu mv">IQ_data %&gt;% filter(IQ &lt;= 70) %&gt;% group_by(sex) %&gt;% count</span></pre><p id="4e43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行代码，你会看到在我们的数据集中有95个非常聪明的男性和66个非常聪明的女性(59%是男性)。这使得男女比例为1.44:1。<br/>同样，我们的数据中有104名非常不聪明的男性和84名女性(55%为男性)，男女比例为1.24。因此，尽管男性和女性平均来说没有什么不同，但在最聪明和最不聪明的群体中，男性更多。</p><h1 id="1f9b" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">更进一步:Levene的测试</h1><p id="7d03" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">比率都很好，但我们可能想知道差异是否有统计学意义。对此有一些测试，但最常见的是方差相等的Levene测试，这是我从car R包中得到的:</p><pre class="lz ma mb mc gt mm mn mo mp aw mq bi"><span id="8f4d" class="mr lc iq mn b gy ms mt l mu mv">install.packages('car')<br/>library(car)<br/>leveneTest( IQ ~ sex, IQ_data)</span></pre><p id="a946" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到的F值为5.54，显著性p值为0.02，证实了我们的结果，即男性的智商比女性高。</p><h1 id="305d" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">含义</h1><p id="dfde" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">通过比较方差，我们还能回答哪些问题？</p><ul class=""><li id="e2fd" class="mx my iq kh b ki kj kl km ko mz ks na kw nb la nc nd ne nf bi translated">如果一种药物增加了患者的平均健康水平，但也增加了服药者之间的健康差异，这可能表明该药物对一些人有帮助，但对另一些人没有帮助。</li><li id="1874" class="mx my iq kh b ki ng kl nh ko ni ks nj kw nk la nc nd ne nf bi translated">也许你有两种产品在许多商店出售。平均而言，每家商店销售的产品数量可能相同，但一种产品的销售数量差异可能更大，这表明一些商店销售很多，而其他商店销售很少。这可能对理解你的客户和在哪里销售你的产品有所暗示。</li><li id="7392" class="mx my iq kh b ki ng kl nh ko ni ks nj kw nk la nc nd ne nf bi translated">不影响一个国家人民平均幸福的政策，如果能减少幸福的方差，可能对社会仍然是好的，我们可以称之为“<a class="ae ml" href="https://ourworldindata.org/happiness-and-income-inequality" rel="noopener ugc nofollow" target="_blank">幸福不平等</a>”。</li><li id="6897" class="mx my iq kh b ki ng kl nh ko ni ks nj kw nk la nc nd ne nf bi translated">通常，特别低的方差可能是好产品的标志。<a class="ae ml" href="https://www.youtube.com/watch?v=iueVZJVEmEs" rel="noopener ugc nofollow" target="_blank">罗里·萨瑟兰</a>喜欢争辩说，最好的卫星导航是最小化旅行时间差异的卫星导航，不一定是能找到最短平均旅行时间的卫星导航。当你去机场赶飞机时，你不想要一条可能需要30分钟到2小时的路线，即使它是平均最快的路线。</li><li id="ddf8" class="mx my iq kh b ki ng kl nh ko ni ks nj kw nk la nc nd ne nf bi translated">在调查妇女和少数民族的代表性时。例如，在所有公司中，女性在高层管理职位中的平均比例可能是50%，有些人会将其解释为实现了性别平等。然而，如果公司之间的这一比例差异非常大，这可能表明许多公司的女性经理远远超过50%，而其他公司的女性经理可能会少得多。</li></ul><h1 id="8ae0" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">结论</h1><p id="0efe" class="pw-post-body-paragraph kf kg iq kh b ki lt jr kk kl lu ju kn ko lv kq kr ks lw ku kv kw lx ky kz la ij bi translated">我们在这里已经看到，不同的组可以有不同的方差和均值，这可以在我们的数据中产生新的见解。根据我的经验，这确实是一个被忽视的领域，所以很酷的结果可能相对容易找到。它也不需要比你已经有的更多的数据，这很好。如果你发现任何有趣的方差差异，请务必<a class="ae ml" href="https://twitter.com/Richie_Research" rel="noopener ugc nofollow" target="_blank">在Twitter上给我加标签，</a>这样我就可以看到它们了。我很期待你的发现！</p></div></div>    
</body>
</html>