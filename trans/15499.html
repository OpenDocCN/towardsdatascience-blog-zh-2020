<html>
<head>
<title>Linear Regressions for the New Survey of Consumer Finances</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">消费者金融新调查的线性回归</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/linear-regressions-for-the-survey-of-consumer-finances-ed2c10b2670c?source=collection_archive---------24-----------------------#2020-10-25">https://towardsdatascience.com/linear-regressions-for-the-survey-of-consumer-finances-ed2c10b2670c?source=collection_archive---------24-----------------------#2020-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0fa0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何处理SCF的多个数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eec7de69957aeaa34a1e0aa1f6860772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VXrOFTWbrp-xPvsk"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">致谢:<a class="ae kv" href="https://unsplash.com/@f7photo" rel="noopener ugc nofollow" target="_blank">迈克尔·朗米尔</a></p></figure><p id="5e72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上个月，美联储发布了2019年美国家庭财务状况三年一度的调查:消费者财务调查(SCF)。尽管他们对2016年以来发生的变化做了很好的<a class="ae kv" href="https://www.federalreserve.gov/publications/files/scf20.pdf" rel="noopener ugc nofollow" target="_blank">总结</a>，但现在每个人都在想新冠肺炎对经济的影响，而美联储的总结只是一个脚注。</p><p id="1b1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管如此，SCF可以为未来分析COVID对我们财务状况的影响提供一个良好的前期基线。为2019年SCF进行的调查中，超过90%发生在今年2月之前。任何分析中唯一真正的难题是理解如何准确地分析SCF最独特的特性之一:它有五个完整的数据集可以用于分析。</p><h2 id="91c1" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">SCF中的插补</strong></h2><p id="29b8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">为什么SCF会提供五个数据集？这主要是因为当人们接受调查采访时，他们没有提供完整的答案。</p><p id="42cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了处理这些缺失的值，SCF不是简单地根据一个家庭对其他问题的回答来猜测值，而是对他们的答案进行五次猜测。通过这种方式，研究人员可以更好地了解可能答案的分布情况。</p><p id="8631" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管这种解决方案有助于解决丢失值的问题，但在对数据进行统计测试时，它会引入一个难题。这就好比你的新宜家书桌少了一个零件，而不是收到一个替换零件，而是收到了五套相同的新书桌。你会如何处理所有这些大公司？</p><p id="7e9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您试图对这些数据进行回归时，也会出现同样的问题。你只是用一套，用所有的，把它们叠起来吗？即使是训练有素的研究人员在试图分析数据时也会遇到问题。对SAS和Stata之类的统计包进行一些更新后，事情变得更容易了，但是Python需要做一些工作。让我们快速看一下SCF显示了什么。</p><h2 id="e6a7" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">检查数据</h2><p id="04c5" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在这一部分的底部，您可以看到我用来将SCF数据下载到Pandas数据框中的代码要点。为了举例，让我们看看一个家庭的一些收入数据和股票所有权的市场价值及其所有的影响。</p><p id="a768" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是gist中定义的函数如何工作及其输出的一个例子。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="883f" class="ls lt iq mr b gy mv mw l mx my">import pandas as pd<br/>import dataloading as dl</span><span id="2ad0" class="ls lt iq mr b gy mz mw l mx my">targetdir = “data/extracted/”</span><span id="6316" class="ls lt iq mr b gy mz mw l mx my">df = dl.SCF_load_data(targetdir, <br/>year=2019, <br/>series=[‘yy1’, ‘y1’, ‘x3915’, ‘x5729’, ‘x42001’]<br/>)</span><span id="5a65" class="ls lt iq mr b gy mz mw l mx my">df.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/7214f91402b0e07fa64694eba25529c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blfRRdpCZ_QKujO5b1LWQQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输出</p></figure><p id="563d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你所看到的，2019年数据集的前五行是第一个家庭的五个含义。看来这个家庭肯定没有任何股票，其收入以五种不同的方式估算。</p><p id="e272" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里需要注意的另一件事是<a class="ae kv" href="https://www.federalreserve.gov/econres/files/codebk2019.txt" rel="noopener ugc nofollow" target="_blank">权重</a>。对于每一个牵连因素，权重代表该家庭在总人口中所代表的家庭数量。所以，如果你把五个数据集中的一个的所有家庭的权重加起来，你会得到一个接近1.286亿的数字，这是美国家庭的大概数量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h2 id="6f21" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">做出推论</h2><p id="7a92" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">有了这些数据，仍然有可能做出推论，但是你可能不得不偏离传统的方法。SCF <a class="ae kv" href="https://www.federalreserve.gov/econres/files/codebk2019.txt" rel="noopener ugc nofollow" target="_blank">密码本</a>指出<a class="ae kv" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2466498" rel="noopener ugc nofollow" target="_blank">蒙塔尔托和宋</a> (1996)提供了一个用户友好的介绍，介绍了如何利用具有多重含义的数据集进行推理。</p><p id="92d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在这种情况发生之前，需要进行一些运算，以便进行我们的重复插补推断(RII)。需要做的一件事是创建一个新列来标识每一行属于哪个数据集。值得庆幸的是，估算数据的id是从家庭id构建的，并且可以成为一个新的列。此外，权重需要除以5，以说明我们在所有数据集上为美国人口创建推断的事实。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="be36" class="ls lt iq mr b gy mv mw l mx my"># Add Implicate Number</span><span id="d930" class="ls lt iq mr b gy mz mw l mx my">df[‘implicate’] = [x — y*10 for x, y in zip(df[‘imputed_hh_id’], df[‘household_id’])]</span><span id="8b54" class="ls lt iq mr b gy mz mw l mx my"># weighting dividing by 5 since data implicates being combined for  regression</span><span id="1012" class="ls lt iq mr b gy mz mw l mx my">df[‘across_imp_weighting’] = [x/5 for x in df[‘weighting’]]</span></pre><p id="4d5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是基于蒙塔尔托和宋(2006)描述的方法实现的代码示例。本质上，它采用系数和方差-协方差矩阵对每个影响进行回归，并生成独立变量的p值。举例来说，一个基于家庭所有股票资产的市场价值预测家庭总收入的模型显示p值接近于零，这是可以预料的。另一方面，过大的具有统计显著性的截距需要进一步研究。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="7cde" class="ls lt iq mr b gy mv mw l mx my">dl.RII(df,<br/> Xseries=[‘stock_mkt_value’],<br/> y=’total_income’)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/3100758d43305bc1010589f983151b33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vdrBBIVPtSQvFpa1sSl0Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">输出</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h2 id="1151" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">进一步阅读</h2><p id="3751" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这篇文章将帮助你对SCF数据进行回归，但是如果你想进行一些其他类型的计算，我建议你阅读一下那里的学术文献。蒙塔尔托和宋(2006)肯定会提供一个很好的基础，在此基础上你可以建立更多的统计工具，以你需要的方式分析SCF。</p></div></div>    
</body>
</html>