<html>
<head>
<title>Algorithmic Color Palettes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">算法调色板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/algorithmic-color-palettes-a110d6448b5d?source=collection_archive---------29-----------------------#2020-10-13">https://towardsdatascience.com/algorithmic-color-palettes-a110d6448b5d?source=collection_archive---------29-----------------------#2020-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b390" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用机器学习从图像生成调色板</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4b6349e6890c66906c51a32731098937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v1SaXJcgphtGrNKF811Zuw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://www.flickr.com/photos/stuckincustoms/" rel="noopener ugc nofollow" target="_blank">特雷·拉特克利夫</a> ( <a class="ae kv" href="https://www.flickr.com/photos/stuckincustoms/8837173497/" rel="noopener ugc nofollow" target="_blank">来源</a>)用我生成的调色板拍摄的照片。</p></figure><p id="b886" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近在做一个项目，在这个项目中，我希望能够比较图像的外观和感觉，这促使我寻找一种使用机器学习来创建调色板的方法。</p><p id="56ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">生成调色板可以被认为是一个伪装的聚类问题。我们希望将一幅图像的所有像素划分成最能代表该图像的k个不同的组。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/f9fffae9c8d6221ca6d981e2f6c2d55c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOPWqVGl84oTgC1n5zTaTQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://en.wikipedia.org/wiki/File:RGB_Cube_Show_lowgamma_cutout_b.png" rel="noopener ugc nofollow" target="_blank">维基百科–RGB色彩空间</a></p></figure><p id="f187" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以把我们的图像看作是在3D色彩空间<a class="ae kv" href="https://en.wikipedia.org/wiki/RGB_color_space" rel="noopener ugc nofollow" target="_blank">中绘制的点的阵列，而不是把我们的图像看作是像素的网格——每个像素都有一个红色、绿色和蓝色的值。红色有一个维度，绿色有一个维度，蓝色有一个维度，在每个维度中，一个点可以位于<code class="fe lu lv lw lx b">0</code>和<code class="fe lu lv lw lx b">255</code>之间的任何位置。</a></p><p id="5174" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设我们希望创建一个由8种颜色组成的调色板来代表每张图片。这意味着我们想要找到8个能够给出每幅图像的最佳可能表示的聚类或分区。</p><p id="5303" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有许多不同的聚类算法可供选择——每种算法都有自己的优缺点——但是为了这个项目的目的，我尝试了K-Means聚类和凝聚聚类。</p><p id="b296" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我从电影<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">只有上帝宽恕(2013) </a>(使用网站<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>)中挑选了5张样本剧照，因为它有丰富的调色板。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/e676d379942eda95dfee89841487f06b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXsK92Ek-VCghR28bFaYLw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仍然来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">只有上帝宽恕(2013) </a>，由<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>提供，使用k-means生成调色板。</p></figure><p id="bfaf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面是一个使用K-Means生成的电影静止图像和调色板的例子。正如你所看到的，该算法做了一个相当好的工作，没有太多的超参数调整，使一个很好的代表性调色板。此外，它允许您指定调色板的大小——这是其他一些聚类算法(例如DBSCAN)所不具备的。</p><p id="c350" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在我的<a class="ae kv" href="https://nbviewer.jupyter.org/github/a-poor/color-palettes/blob/main/color-palettes.ipynb#" rel="noopener ugc nofollow" target="_blank">笔记本</a>中看到更多生成调色板的例子。</p><h1 id="2b74" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">算法挑战</h1><p id="2294" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">事实证明，像K-Means这样的算法更喜欢高容量的颜色，而不是稀疏但突出的颜色。例如，参见下面的静止图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/fcf6c17aa03f6fef56b8b0c729730711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ozirSG8py0mf_O5oEMTXw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仍然来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">《只有上帝宽恕》(2013) </a>，由<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>提供，使用k-means生成调色板。</p></figure><p id="a2a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">K-Means调色板可以很好地近似大多数颜色，但在查看图像时，您可能会期望它包含一些蓝色(如摔倒的拳击手的垫子或短裤上)或红色(如绳子上，或站立的拳击手的手套/服装等)。</p><p id="4adf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回想一下K-Means是如何工作的，该算法试图将图像中的颜色划分为<em class="ls"> k </em>组，由颜色空间中的<em class="ls"> k </em>个平均点表示。在这种情况下，图像中没有足够的蓝色或红色被算法提取出来，所以它们被其他类似的、更丰富的颜色洗掉了。</p><p id="dbb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了解决这个问题，我们可以尝试一些方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/36182c5a9c8db4e6daf93424d16602bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-aSim53H8k_HfE60aKEOQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仍然来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">《只有上帝宽恕》(2013) </a>，由<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>提供，使用K-Means和聚合生成的调色板。</p></figure><p id="aaa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图显示了使用K-Means和凝聚聚类生成的调色板。凝聚聚类选择在调色板中包括蓝色，尽管它失去了柔和的黄色，仍然没有包括任何红色。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/3debfd1f162c9e8c74babedd2d9b4d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-Rpa9xCFmuTE5U0bqH0cw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仍然来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">Only God forgible(2013)</a>，由<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>提供，带有k-means RGB和HSV生成的调色板。</p></figure><p id="84fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是将图像的颜色从<code class="fe lu lv lw lx b">RGB</code>转换为<code class="fe lu lv lw lx b">HSV</code>。<code class="fe lu lv lw lx b">RGB</code>将颜色表示为红色、绿色和蓝色通道强度的组合，而<code class="fe lu lv lw lx b">HSV</code>将颜色表示为色调(基色的光谱)、饱和度(颜色的强度)和值(颜色的相对亮度或暗度)——你可以在这里了解更多关于<a class="ae kv" href="https://en.wikipedia.org/wiki/HSL_and_HSV" rel="noopener ugc nofollow" target="_blank">的信息。上图显示了使用K-Means聚类和<code class="fe lu lv lw lx b">RGB</code>颜色和<code class="fe lu lv lw lx b">HSV</code>颜色为同一幅图像生成的调色板。正如你所看到的，HSV方法包括蓝色和黄色(尽管仍然没有红色)。</a></p><p id="268e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了进一步改善结果，一些选项包括组合技术(即凝聚聚类+ HSV颜色)，超参数调整，使用不同的算法(如DBSCAN)，以及调整颜色距离度量(如果你感兴趣，可以在这里阅读更多关于颜色差异的信息<a class="ae kv" href="https://en.wikipedia.org/wiki/Color_difference" rel="noopener ugc nofollow" target="_blank">)。</a></p><h1 id="7ef3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">烧瓶应用程序</h1><p id="bf48" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">作为最后的奖励，我决定创建一个简单的概念验证API，用于从图像生成调色板。API将图像URL作为参数，并使用K-Means生成调色板。</p><p id="b4ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我发现网站<a class="ae kv" href="https://coolors.co/" rel="noopener ugc nofollow" target="_blank"> Coolors </a>使得创建调色板URL变得很容易，因此API可以将调色板作为颜色的2D数组或Coolors调色板的URL返回。</p><p id="55f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，使用此图像…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ly"><img src="../Images/eae7b8d7c37de39e7d00da55fd755f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-tMxmKSU7nbX_zs0wb8GA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">还是出自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">只有上帝会原谅(2013) </a>，承蒙<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a></p></figure><p id="7a34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">API将产生以下链接…</p><div class="my mz gp gr na nb"><a href="https://coolors.co/3c030b-050002-3967cd-152f63-760102-7e504c-110c33-b4d1df" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">Coolors.co</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">在Coolors.co上查看和编辑调色板或创建自己的配色方案。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">coolors.co</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kp nb"/></div></div></a></div><p id="69e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一起看，你会得到…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/f4579cefb754a23024995f33816219a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKs163EFUBXdnuqkRT_eWg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仍然来自<a class="ae kv" href="https://en.wikipedia.org/wiki/Only_God_Forgives" rel="noopener ugc nofollow" target="_blank">《只有上帝宽恕》(2013) </a>，由<a class="ae kv" href="http://film-grab.com/" rel="noopener ugc nofollow" target="_blank"> FILMGRAB </a>提供，k-means生成调色板由<a class="ae kv" href="https://coolors.co/3c030b-050002-3967cd-152f63-760102-7e504c-110c33-b4d1df" rel="noopener ugc nofollow" target="_blank"> Coolors </a>提供。</p></figure><p id="ddb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在我的GitHub repo里查看Flask app，<a class="ae kv" href="https://github.com/a-poor/color-palettes" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="a3cb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="a103" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这是一个很短但很有趣的副业，这里肯定还有很多值得探索的地方。如果你认为你可能会感兴趣，一定要去看看<a class="ae kv" href="https://film-grab.com/" rel="noopener ugc nofollow" target="_blank">电影抓取</a>和<a class="ae kv" href="https://coolors.co/" rel="noopener ugc nofollow" target="_blank">酷人</a>。</p><p id="f915" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在<a class="ae kv" href="https://github.com/a-poor/color-palettes" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到我的代码，或者用<a class="ae kv" href="https://nbviewer.jupyter.org/github/a-poor/color-palettes/blob/main/color-palettes.ipynb#" rel="noopener ugc nofollow" target="_blank"> nbviewer </a>或<a class="ae kv" href="https://mybinder.org/v2/gh/a-poor/color-palettes/main?filepath=color-palettes.ipynb" rel="noopener ugc nofollow" target="_blank"> Binder </a>查看笔记本。</p><p id="bd2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我很想听听你的想法。请在下面发表评论，或者在LinkedIn或Twitter上联系我。</p></div></div>    
</body>
</html>