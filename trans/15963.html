<html>
<head>
<title>How to Generate Data Accessing API Endpoints Without Even Coding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何生成访问API端点的数据，甚至无需编码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-generate-data-accessing-api-endpoints-without-even-coding-3d0f5b705a32?source=collection_archive---------18-----------------------#2020-11-03">https://towardsdatascience.com/how-to-generate-data-accessing-api-endpoints-without-even-coding-3d0f5b705a32?source=collection_archive---------18-----------------------#2020-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/83ab452b89484ec1af235ed300a56080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8HYWXC5NM0ZONhRixgNAA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/free-photos-242387/" rel="noopener ugc nofollow" target="_blank">免费拍摄的照片</a>在<a class="ae jg" href="https://pixabay.com/photos/monument-valley-utah-landscape-1081996/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上</p></figure><h2 id="b263" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/hands-on-tutorials" rel="noopener" target="_blank">实践教程</a></h2><div class=""/><div class=""><h2 id="36cc" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">Python库——sandman 2简介</h2></div><p id="ca50" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">作为任何Web或移动应用最常见的架构，数据库+后端API +前端是非常典型和经典的。虽然不同的应用程序肯定会有自己的前端设计，但后端API通常非常相似。也就是说，他们必须能够访问数据库中的数据。换句话说，后端API的主要职责是充当中间件，接收来自前端的请求并根据请求检索数据库，然后将结果返回给前端，以便用户可以使用。</p><p id="71db" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当然，对于大多数应用程序，后端API也需要一定程度的定制，尤其是安全需求，如JWT等。然而，当没有太多安全问题时，有一种方法可以“生成”您的后端API，它甚至不需要编码就可以访问您的数据库。</p><p id="ba02" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本文中，我将介绍一个Python库可以帮你做到这一点。假设你是一个前端开发人员，你只想在你的测试环境中测试一些前端特性，不想浪费太多时间去写自己的后端API。在这种情况下，Python库<strong class="lj jt"> sandman2 </strong>是最好的选择之一！</p><h1 id="c3bc" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">样本数据库的准备</h1><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a00dd3d6c3acf8d82006bd595508160c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zyaaz6wBtNFiPymvjy9uFw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/manniguttenberger-17756982/" rel="noopener ugc nofollow" target="_blank"> manniguttenberger </a>在<a class="ae jg" href="https://pixabay.com/photos/monument-valley-desert-road-highway-5499156/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="e6f7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">sandman2库支持许多数据库管理系统，例如:</p><ul class=""><li id="a58d" class="mz na jj lj b lk ll ln lo lq nb lu nc ly nd mc ne nf ng nh bi translated">SQLite</li><li id="d562" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">关系型数据库</li><li id="4864" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">一种数据库系统</li><li id="ffd8" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">神谕</li><li id="69e3" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">MS SQL Server</li><li id="5d68" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">赛贝斯</li><li id="af5d" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">下毛毛雨</li><li id="a823" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">火鸟</li></ul><p id="935b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">sandman2库支持它们作为不同的SQL“方言”，这意味着我们不需要担心我们正在使用哪个数据库，只需告诉sandman2是哪个数据库，它就可以开箱即用。</p><p id="64d7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本文中，我将使用SQLite作为例子，因为它是最简单的，我不需要下载、安装和配置任何东西。</p><p id="4f91" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在我以前的一篇文章中，我介绍了一个Python内置库sqlite3，它可以非常容易地生成sqlite数据库。我将跳过Python中SQLite库的介绍。你可以看看我下面的文章了解详情。</p><div class="is it gp gr iu nn"><a rel="noopener follow" target="_blank" href="/do-you-know-python-has-a-built-in-database-d553989c87bd"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd jt gy z fp ns fr fs nt fu fw js bi translated">你知道Python有内置数据库吗？</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">Python内置库sqlite3简介</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob ja nn"/></div></div></a></div><p id="7c23" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们创建一个名为“我的测试”的数据库。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="0d54" class="oh me jj od b gy oi oj l ok ol">import sqlite3 as sl</span><span id="3bc1" class="oh me jj od b gy om oj l ok ol">con = sl.connect('sandman2/my-test.db')</span></pre><p id="d864" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，出于演示目的，创建一个名为<code class="fe on oo op od b">USER</code>的表。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="a08a" class="oh me jj od b gy oi oj l ok ol">with con:<br/>    con.execute("""<br/>        CREATE TABLE USER (<br/>            id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,<br/>            name TEXT,<br/>            age INTEGER<br/>        );<br/>    """)</span></pre><p id="05a1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">之后，让我们插入一些示例行。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="7b54" class="oh me jj od b gy oi oj l ok ol">sql = 'INSERT INTO USER (id, name, age) values(?, ?, ?)'<br/>data = [<br/>    (1, 'Alice', 21),<br/>    (2, 'Bob', 22),<br/>    (3, 'Chris', 23)<br/>]</span><span id="5c08" class="oh me jj od b gy om oj l ok ol">with con:<br/>    con.executemany(sql, data)</span></pre><p id="03e0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">好的。现在，我们可以查询该表。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="ec10" class="oh me jj od b gy oi oj l ok ol">with con:<br/>    data = con.execute("SELECT * FROM USER")<br/>    for row in data:<br/>        print(row)</span><span id="8a76" class="oh me jj od b gy om oj l ok ol"># Output:<br/># (1, 'Alice', 21)<br/># (2, 'Bob', 22)<br/># (3, 'Chris', 23)</span></pre><p id="b16b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们现在已经有了一个填充了表的数据库。让我们在下一节开始演示sandman2库。</p><h1 id="64e7" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">基于Web的SQL客户端</h1><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1e068daf0fbc4b27a8d93d9311d0cd6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IV-3G7qSGOJV1VHcZK14Xg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/photos/desert-sand-dry-dune-barren-3832488/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的<a class="ae jg" href="https://pixabay.com/users/jbauer-fotographie-7755156/" rel="noopener ugc nofollow" target="_blank">鲍尔摄影</a>拍摄</p></figure><p id="436a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在一切之前，我们需要安装sandman2库。只用<code class="fe on oo op od b">pip</code>。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="4cc0" class="oh me jj od b gy oi oj l ok ol">pip install sandman2</span></pre><p id="04b2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，正如我在标题中所说的，我们不需要编写任何代码，只需要使用命令行界面。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="282b" class="oh me jj od b gy oi oj l ok ol">$ sandman2ctl sqlite+pysqlite:///sandman2/my-test.db</span></pre><p id="8020" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下图显示了连接字符串的构造方式。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/69862c734e452bd2d82a58d66abc2d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIedYdX63TjToDRToxIxWA.png"/></div></div></figure><p id="34ef" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请注意，DB驱动程序是可选的。如果我们保持它为空，SQLAlchemy (sandman2构建在SQLAlchemy之上)将尝试使用默认驱动程序。但是，如果驱动程序不存在，它可能会抱怨。别担心，我们可以得到默认驱动库的名称，这样我们就可以使用<code class="fe on oo op od b">pip</code>来安装它。</p><p id="2ce2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">运行该命令后，web服务启动。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/f64a708d1395f137aabc86e44600d06b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ocd-G840xHu4nmVBS41V8w.png"/></div></div></figure><p id="3a6c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们尝试使用任何浏览器访问管理控制台的web客户端。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="440d" class="oh me jj od b gy oi oj l ok ol"><a class="ae jg" href="http://localhost:5000/admin/" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/admin/</a></span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi os"><img src="../Images/b7d94bf50babf249ca141ee51ea5ae68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*BHGNOWUyhpCLGp0SYjThAw.png"/></div></figure><p id="ab75" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以看到页面上已经有一个对象<code class="fe on oo op od b">USER</code>。这是因为我们创建了这个表。如果我们点击<code class="fe on oo op od b">USER</code>，我们可以看到我们之前插入的三行显示在数据表中。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/8413096f36d0da70c3aa0915eaedf791.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLTU3JW4a2mQRWNAXsEYRA.png"/></div></div></figure><p id="d3c7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在此页面上，我们可以单击“创建”按钮来插入新行、更新现有行或批量删除行。您将能够很容易地找到这些特性，所以让我跳过这些内容，在下一节中向您展示最重要的特性。</p><h1 id="c307" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">数据访问RESTful API</h1><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/521087c1d493add75aa7362f77157a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1rGbRsu_WKS2CgCq-9Kww.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/walkerssk-1409366/" rel="noopener ugc nofollow" target="_blank">walker sk</a>在<a class="ae jg" href="https://pixabay.com/photos/morocco-city-historic-village-clay-2349647/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="5b1b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">sandman2最酷的功能一定是我们已经连接的数据库自动生成的RESTful API端点。</p><p id="c456" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在上面的部分中，保持web服务运行，那么API已经在那里供我们使用。您可能更喜欢Postman或失眠症等API测试工具，但在本文中，我将只使用“curl”命令来保持简单，因此如果您只想测试API端点，您不必下载任何东西。</p><h2 id="6db6" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">1.获取表格中的数据条目列表</h2><p id="8cc1" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">还记得我们有一张桌子叫<code class="fe on oo op od b">USER</code>吗？现在，我们可以简单地向下面的URL发送GET请求来获取条目列表。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="309f" class="oh me jj od b gy oi oj l ok ol">http://localhost:5000/user/</span></pre><p id="cb58" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请注意</p><ol class=""><li id="ec51" class="mz na jj lj b lk ll ln lo lq nb lu nc ly nd mc pj nf ng nh bi translated">大多数DBMS如SQLite和MySQL不区分大小写，所以我们可以安全地使用小写的表名。</li><li id="c092" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc pj nf ng nh bi translated">URL末尾的正斜杠<code class="fe on oo op od b">/</code>一定不能错过。</li></ol><p id="da1f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，让我们使用<code class="fe on oo op od b">curl</code>测试GET API。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="c0e9" class="oh me jj od b gy oi oj l ok ol">curl <a class="ae jg" href="http://localhost:5000/user/" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/user/</a></span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pk"><img src="../Images/ffe1c42174ae89abf7348193d52c6dd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mrgs1YiZkG057ct1ioVEBQ.png"/></div></div></figure><p id="731b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它返回表中的所有记录。但是，如果我们在一个表中有太多的条目，并且想要进行分页，该怎么办呢？是的，睡魔2支持开箱即用！</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="9e16" class="oh me jj od b gy oi oj l ok ol">curl "<a class="ae jg" href="http://localhost:5000/user/?page=1&amp;limit=2" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/user/?page=1&amp;limit=2</a>"<br/>curl "<a class="ae jg" href="http://localhost:5000/user/?page=2&amp;limit=2" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/user/?page=2&amp;limit=2</a>"</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pl"><img src="../Images/804ba61c7ae6b6e926d13f98f1e09da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*elOnRMTRHMOa7KKDdJG1pw.png"/></div></div></figure><p id="a371" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个例子中，我们使用<code class="fe on oo op od b">page</code>参数来指定页码，使用<code class="fe on oo op od b">limit</code>参数来指定页面大小。在第1页中，我们得到了前两个用户Alice和Bob。然后，在第2页，我们得到了Chris的第三行，由于没有其他行，所以只返回了1行。</p><h2 id="f2ed" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">2.按键获取行</h2><p id="1cef" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">既然我们定义了主键，我们也可以通过它来查询表。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="c3a4" class="oh me jj od b gy oi oj l ok ol">curl <a class="ae jg" href="http://localhost:5000/user/" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/user/</a>3</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/41c46b2b121cc98885804ea335572fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*Dc23oH6wICVQe-pSrNJALQ.png"/></div></figure><h2 id="5175" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">3.按任意字段筛选行</h2><p id="d53b" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">我们也可以按任何字段过滤行。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="7e13" class="oh me jj od b gy oi oj l ok ol">curl "http://localhost:5000/user/?name=Chris"</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pn"><img src="../Images/932893ace10a8b18aabea05b45df4e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWu93gvPsqS4vAIZiPw0MA.png"/></div></div></figure><p id="005e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">目前，有一个限制，即不支持对比较<code class="fe on oo op od b">&gt;, &lt;, &gt;=, &lt;=</code>进行过滤。</p><h2 id="342f" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">4.插入新行</h2><p id="b506" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">要插入新行，我们需要使用POST方法。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="2138" class="oh me jj od b gy oi oj l ok ol">curl -X POST -d "{\"age\":24, \"name\":\"David\"}" -H "Content-Type: application/json" http://localhost:5000/user/</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi po"><img src="../Images/13541f679175809f6db6d22738c0bd04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OnKCeg5IYLcYmwk79hbC4w.png"/></div></div></figure><p id="27d8" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请注意，我使用的是Windows，所以单引号在cmd中不起作用，我必须使用反斜线来转义双引号。如果你使用Linux或Mac OS，你可能不需要这些。</p><p id="4aa4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">此外，当我们创建<code class="fe on oo op od b">USER</code>表时，我们已经将“id”字段设置为自动递增，所以我们不需要传入“id”值。</p><p id="ea40" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们无法使用基于Web的SQL客户端来查看该表。新用户David已成功插入。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pp"><img src="../Images/89c86679b488eb24197b2368a2288085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EXeUaifEF7UVAcNN_iPv3A.png"/></div></div></figure><h2 id="2c0e" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">5.更新行</h2><p id="d009" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">我们可以使用PATCH方法来更新一行。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="34aa" class="oh me jj od b gy oi oj l ok ol">curl -X PATCH -d "{\"age\":30}" -H "Content-Type: application/json" http://localhost:5000/user/3</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pq"><img src="../Images/2db31bba76285eb68ab58f356e75b183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2t97a4O_M17QCXOLuEbVg.png"/></div></div></figure><p id="fa9f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如示例所示，在URL中传递当前主键“id”很重要，在我们的示例中是“3”。Sandman2依靠主键找到要更新的记录。</p><p id="af07" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果我们回到网络客户端，可以看到克里斯的年龄已经更新。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pr"><img src="../Images/1cb98e62271de03944f72c2685fb31e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_MJjEDgCuZPlAXsTXvkNA.png"/></div></div></figure><h2 id="e259" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">6.删除一行</h2><p id="f24c" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">我们可以使用DELETE方法删除一行。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="e76c" class="oh me jj od b gy oi oj l ok ol">curl -X DELETE -H "Content-Type: application/json" http://localhost:5000/user/3</span></pre><p id="06a5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">运行上面的CURL命令后，id=3的用户被删除了。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pp"><img src="../Images/07090981181ba7264235ad06f6573ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vUx38yv9bXHhn7h_Auk8A.png"/></div></div></figure><h2 id="4899" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">7.表的定义</h2><p id="12c7" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">sandman2库不仅支持一般的数据访问API，还支持其他一些高级API，比如获取表的元数据。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="3d27" class="oh me jj od b gy oi oj l ok ol">curl http://localhost:5000/user/meta</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ps"><img src="../Images/43dd7fa2675ace9d65c2a57eadae8058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*au13i37CIyaP3nwGV8uVTA.png"/></div></div></figure><h2 id="e915" class="oh me jj bd mf ou ov dn mj ow ox dp mn lq oy oz mp lu pa pb mr ly pc pd mt jp bi translated">8.将表格导出到CSV文件</h2><p id="ba3e" class="pw-post-body-paragraph lh li jj lj b lk pe kt lm ln pf kw lp lq pg ls lt lu ph lw lx ly pi ma mb mc im bi translated">最后，它还支持将数据导出到CSV文件。</p><pre class="mv mw mx my gt oc od oe of aw og bi"><span id="53ce" class="oh me jj od b gy oi oj l ok ol">curl -o user.csv "http://localhost:5000/user/?export"</span></pre><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pt"><img src="../Images/9c767d9782490401ad071941fd5c3c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfSaRFWe1xxP2IBo3jrIYA.png"/></div></div></figure><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pu"><img src="../Images/c414a49d4a174dc53f3158f0075be283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cj6quMvOeuRysFfCPxEtnA.png"/></div></div></figure><h1 id="5eb6" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">摘要</h1><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5098b3f0c70c5cab89f2c36b235f829b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtUV8sQbQI5KSgfZBHm-qg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/jplenio-7645255/" rel="noopener ugc nofollow" target="_blank"> jplenio </a>在<a class="ae jg" href="https://pixabay.com/photos/road-sky-desert-landscape-nature-3133502/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="af5f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本文中，我介绍了一个令人惊叹的Python库，名为sandman2。它是用Python写的，但是你不需要写任何Python代码来使用它。只需用有效的数据库连接字符串运行它，您将获得</p><ul class=""><li id="5ccb" class="mz na jj lj b lk ll ln lo lq nb lu nc ly nd mc ne nf ng nh bi translated">基于Web的SQL客户端</li><li id="0324" class="mz na jj lj b lk ni ln nj lq nk lu nl ly nm mc ne nf ng nh bi translated">一整套访问RESTful API的数据</li></ul><p id="1557" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">原来《睡魔2》并没有太多的安全实现，所以请千万不要在生产中使用。然而，安全问题通常意味着定制实现，这几乎不可能在开箱即用的工具集中通用。因此，sandmand2是一个优秀的库，可以节省我们大量的测试和实验时间。</p><div class="is it gp gr iu nn"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd jt gy z fp ns fr fs nt fu fw js bi translated">通过我的推荐链接加入Medium克里斯托弗·陶</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="pv l ny nz oa nw ob ja nn"/></div></div></a></div><p id="f086" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你觉得我的文章有帮助，请考虑加入Medium会员来支持我和成千上万的其他作者！(点击上面的链接)</p></div></div>    
</body>
</html>