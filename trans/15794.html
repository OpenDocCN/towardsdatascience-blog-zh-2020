<html>
<head>
<title>Space Science with Python — Asteroid Project (Part 4)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python进行空间科学——小行星计划(四)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/space-science-with-python-asteroid-project-part-4-ea1361540033?source=collection_archive---------39-----------------------#2020-10-30">https://towardsdatascience.com/space-science-with-python-asteroid-project-part-4-ea1361540033?source=collection_archive---------39-----------------------#2020-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="66e3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/space-science-with-python" rel="noopener" target="_blank">用Python进行空间科学</a></h2><div class=""/><div class=""><h2 id="7180" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated"><a class="ae kr" href="https://towardsdatascience.com/tagged/space-science-with-python" rel="noopener" target="_blank">系列教程的第24部分</a>提供了当前科学项目状态的概述。我们为我们的项目创建了一个开源Python库，该库对于未来的科学工作应该是可持续和可扩展的。</h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/b14088390a7eb8d97adc9956c154a996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVTujsz6X9ATGFChi39THw.jpeg"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">C2PU(【https://www.oca.eu/fr/c2pu-accueil】)的两台望远镜之一。C2PU是法国尼斯附近的一个望远镜站点，与蓝色海岸大学有关联。每个望远镜的直径为1米，有几个CCD相机，过滤器等。1米的望远镜绝对足以进行近地天体调查和观测。作者图片(T. Albin)。</p></figure><h1 id="cbad" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">前言</h1><p id="a321" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><em class="mw">这是我的Python教程系列“用Python进行空间科学”的第24部分。教程会话中显示的所有代码都上传到</em><a class="ae kr" href="https://github.com/ThomasAlbin/SpaceScienceTutorial" rel="noopener ugc nofollow" target="_blank"><em class="mw">GitHub</em></a><em class="mw">上。所示的Python库SolarY也可以在</em><a class="ae kr" href="https://github.com/ThomasAlbin/SolarY" rel="noopener ugc nofollow" target="_blank"><em class="mw">GitHub</em></a><em class="mw">上找到。尽情享受吧！</em></p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="46d6" class="li lj it bd lk ll ne ln lo lp nf lr ls ki ng kj lu kl nh km lw ko ni kp ly lz bi translated">项目回顾和目的</h1><p id="df83" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">上一次，我们讨论了如何开发可持续的和(相对)准确且测试良好的代码:例如，通过使用测试驱动开发(TDD)方法。</p><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/asteroid-project-part-2-test-driven-development-ed7af6c1820e"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd jd gy z fp nr fr fs ns fu fw jc bi translated">小行星计划(第二部分)——测试驱动开发</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">教程系列的第22部分继续我们科学项目的第二部分。在我们深入研究Python之前…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa lc nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a rel="noopener follow" target="_blank" href="/space-science-with-python-asteroid-project-part-3-d7dc0941a717"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd jd gy z fp nr fr fs ns fu fw jc bi translated">Python的空间科学——小行星计划(三)</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">教程系列的第23部分继续我们科学项目的第三部分。今天我们将详细介绍…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdatascience.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa lc nm"/></div></div></a></div><p id="fde1" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">让我们简单回顾一下我们的项目理念和目的:</p><ul class=""><li id="d1d0" class="oh oi it mc b md oc mg od mj oj mn ok mr ol mv om on oo op bi translated">近地物体接近太阳的距离至少为1.3个天文单位。这条边界是人为设定的。</li><li id="f230" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">因此，近地天体的某一亚群体非常接近我们的地球；可能会穿越我们地球的轨道；甚至像1908年的通古斯事件或2013年的车里雅宾斯克流星那样与之相撞。</li><li id="039b" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">持续的天空调查已经发现并分类了24，000多个近地天体！</li><li id="2730" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">最近的近地天体群体模型表明，还有成千上万的天体有待发现。</li><li id="8f65" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">由此产生的科学问题和项目理念:<em class="mw">我们能否优化我们望远镜的观测策略？我们应该把望远镜对准哪里？对于一次成功的观测活动，什么是理想的望远镜和照相机设置？</em></li></ul></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="a75c" class="li lj it bd lk ll ne ln lo lp nf lr ls ki ng kj lu kl nh km lw ko ni kp ly lz bi translated">模拟工作流程</h1><p id="0326" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">我们如何回答这个科学/技术问题？</p><h2 id="1672" class="ov lj it bd lk ow ox dn lo oy oz dp ls mj pa pb lu mn pc pd lw mr pe pf ly iz bi translated">合成近地天体</h2><p id="3eb1" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">首先，我们需要一个最新的近地天体群体模型，提供大小和轨道元素的公正分布。Granvik等人(2018年)提供了一个很好的数据集，在他们的论文中进行了描述(可在<a class="ae kr" href="https://arxiv.org/abs/1804.10265" rel="noopener ugc nofollow" target="_blank"> arXiv </a>上免费获得):</p><div class="nj nk gp gr nl nm"><a href="https://www.sciencedirect.com/science/article/pii/S0019103517307017" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd jd gy z fp nr fr fs ns fu fw jc bi translated">近地天体的去偏轨道和绝对星等分布</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">我们提供了近地天体的四维去偏轨道和绝对星等分布。*型号…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">www.sciencedirect.com</p></div></div><div class="nv l"><div class="pg l nx ny nz nv oa lc nm"/></div></div></a></div><p id="d82a" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">格兰维克在自己的网站上免费提供了80多万个人工合成的近地天体…</p><div class="nj nk gp gr nl nm"><a href="https://www.mv.helsinki.fi/home/mgranvik/data/Granvik+_2018_Icarus/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd jd gy z fp nr fr fs ns fu fw jc bi translated">/home/mgranvik/data/Granvik+_ 2018 _ Icarus的索引</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">编辑描述</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">www.mv.helsinki.fi</p></div></div></div></a></div><p id="8702" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">…这将是我们模拟任务的数据基础。</p><h2 id="0096" class="ov lj it bd lk ow ox dn lo oy oz dp ls mj pa pb lu mn pc pd lw mr pe pf ly iz bi translated">模拟观察/检测过程</h2><p id="da26" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">根据近地天体数据，我们需要模拟整个物体探测流程。挑选一个NEO，管道必须包含:</p><ul class=""><li id="cfcd" class="oh oi it mc b md oc mg od mj oj mn ok mr ol mv om on oo op bi translated">计算近地天体和地球的位置</li><li id="6a18" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">根据近地天体的大小、反照率和到地球的距离:计算其视星等</li><li id="f36a" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">(可选:考虑望远镜在地球上的位置和大气衰减)</li><li id="5cf0" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">将视在星等转换为相应的辐照度(瓦特/平方米)</li><li id="e58e" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">模拟望远镜的光学系统，并考虑其CCD设置，如:焦距，孔径，像素大小，芯片的量子效率，曝光时间等。</li><li id="7df4" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">基于以下因素计算信号和噪声:热量、统计散射、热/坏像素、过度曝光等。</li><li id="e2cc" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated">最后确定近地天体的信噪比，并检查它是否可以被探测到。针对不同的时间戳重新进行模拟。</li></ul><p id="15d9" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">这一建模将得出结论，即在某一特定(模拟)观测夜晚是否发现了近地天体。近地天体的可探测性因视星等、其在CCD芯片上的移动和许多其他影响而异。最后，我们可能会得到一个多维问题的二元结果:<em class="mw">近地天体被探测到了吗？</em></p><p id="d2eb" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">在对探测管道建模后，可以模拟各种望远镜设置、CCD操作模式等，以确定在特定时间框架内可以探测到多少物体。毕竟，这个项目导致了一个模拟工具，但一个复杂问题的明确答案。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="b604" class="li lj it bd lk ll ne ln lo lp nf lr ls ki ng kj lu kl nh km lw ko ni kp ly lz bi translated">考虑产品，而不是用例或原型…</h1><p id="7a14" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">无论是在私人编码项目中，在科学和学术界，还是在工业界…一些开发人员和自由时间编码人员喜欢看到快速的结果。他们开发和部署他们称之为“速战速决”的原型。由此产生的仪表板、模拟或数据科学见解乍一看可能会给人留下深刻印象…但是由此产生的技术债务和缺少文档会导致一个“死胡同项目”,其可维护性和可扩展性很低甚至没有。</p><p id="51a3" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">让我们避免这种<strong class="mc jd">用例/原型</strong>思维，让我们创建一个长期的<strong class="mc jd">产品</strong>，它可能会帮助我们，开源爱好者和空间科学家在未来重用通用和常用的功能。</p><p id="ccee" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">结果:我们的小行星项目将导致一个新的Python库，它将成为这个和未来空间科学相关项目的主干，称为<strong class="mc jd"> SolarY </strong>。</p><p id="650f" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">在过去的几天里，我已经开始建立一个仓库，一些结构元素和模块。这里显示的状态可能只在新的git-commits扩展库之前的几天内有效。第一个版本将于今年发布，这将有助于我们实现我们的科学目标。</p><div class="nj nk gp gr nl nm"><a href="https://github.com/ThomasAlbin/SolarY" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd jd gy z fp nr fr fs ns fu fw jc bi translated">托马斯·阿尔宾/索拉瑞</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">github.com</p></div></div><div class="nv l"><div class="ph l nx ny nz nv oa lc nm"/></div></div></a></div><p id="b2cc" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">为了避免对第三方的依赖，本库应该尽可能多地使用Python 3标准库。到目前为止，只有<a class="ae kr" href="https://docs.pytest.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> <em class="mw"> pytest </em> </a>目前被用于TDD方法。</p><p id="ec6b" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">SolarY的当前结构:</p><pre class="kt ku kv kw gt pi pj pk pl aw pm bi"><span id="f0eb" class="ov lj it pj b gy pn po l pp pq">SolarY<br/>+-- solary<br/>|   +-- _config<br/>|   |   +-- __init__.py<br/>|   |   +-- constants.ini<br/>|   +-- asteroid<br/>|   |   +-- __init__.py<br/>|   |   +-- physp.py<br/>|   +-- general<br/>|   |   +-- __init__.py<br/>|   |   +-- astrodyn.py<br/>|   |   +-- photometry.py<br/>|   |   +-- vec.py<br/>|   +-- neo<br/>|   |   +-- _data<br/>|   |   |   +-- __init__.py<br/>|   |   +-- _databases<br/>|   |   |   +-- __init__.py<br/>|   |   +-- __init__.py<br/>|   |   +-- data.py<br/>|   +-- tests<br/>|   |   +-- _temp<br/>|   |   |   +-- __init__.py<br/>|   |   +-- test_SUBMODULE_PY.py<br/>|   |   +-- __init__.py<br/>|   +-- __init__.py<br/>+-- MISC</span></pre><ul class=""><li id="5147" class="oh oi it mc b md oc mg od mj oj mn ok mr ol mv om on oo op bi translated"><strong class="mc jd"><em class="mw">SolarY</em></strong>GitHub上的主存储文件夹。它包含未来的Python模块<strong class="mc jd"> <em class="mw"> solary </em> </strong>和杂项(<strong class="mc jd"> <em class="mw"> MISC </em> </strong>)辅助文件，如license、MANIFEST.in或setup.py</li><li id="1fdc" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"> <em class="mw"> solary </em> </strong>主Python库文件夹</li><li id="157a" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"> <em class="mw"> _config </em> </strong>该文件夹包含存储常数(如引力常数、星等参考等)等信息的配置文件。)</li><li id="02c2" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"> <em class="mw">小行星</em> </strong>该文件夹包含与小行星相关的Python脚本。到目前为止，已经创建了一个Python脚本，其中包含了推导这些对象的内在物理参数的公式</li><li id="c37b" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"/></li><li id="0146" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"> <em class="mw"> neo </em> </strong>到目前为止，该文件夹包含下载<a class="ae kr" href="https://newton.spacedys.com/" rel="noopener ugc nofollow" target="_blank"> NEODyS-2 </a>数据的功能，还应包含下载和验证模型数据的功能。数据可以存储在任何本地文件夹或库本身内(<strong class="mc jd"> <em class="mw"> _data </em> </strong>)。基于这些数据，可以创建一个SQLite数据库用于进一步的数据分析目的(<strong class="mc jd"> <em class="mw"> _databases </em> </strong>)</li><li id="be84" class="oh oi it mc b md oq mg or mj os mn ot mr ou mv om on oo op bi translated"><strong class="mc jd"> <em class="mw">测试</em> </strong>该文件夹包含所有基于TDD的脚本。每个Python脚本的结构:<strong class="mc jd"><em class="mw">test _ SUBMODULE _ py . py</em></strong>(例如:test_general_vec.py)。数据下载测试暂时存储在<strong class="mc jd"> <em class="mw"> _temp </em> </strong>中</li></ul><p id="a029" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">未来可以为<strong class="mc jd"> <em class="mw">彗星</em> </strong> s、<strong class="mc jd"> <em class="mw">流星体</em> </strong> s、<strong class="mc jd"> <em class="mw">流星</em> </strong> s、宇宙<strong class="mc jd"> <em class="mw">尘埃</em> </strong>或者也可以为原位<strong class="mc jd"> <em class="mw">航天器</em> </strong>任务和数据添加子模块。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><h1 id="8b4f" class="li lj it bd lk ll ne ln lo lp nf lr ls ki ng kj lu kl nh km lw ko ni kp ly lz bi translated">后续步骤</h1><p id="0731" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在接下来的几天和几周内，安慰期将会延长。将增加近地天体、小行星和望远镜的类别，其中包含所有相关的设置和信息。模拟管道将基于太阳能子模块。</p><p id="a55a" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">近地天体模型数据包含轨道要素。然而，为了计算这些天体的视星等，需要太阳和我们的地球的状态向量。正如在<em class="mw">空间科学与Python </em>的第一期教程中所描述的，NASA工具包SPICE和相应的Python包装器<em class="mw"> spiceypy </em>是计算这些数据的最佳解决方案。应该避免添加SPICE依赖，因此，添加一个小的辅助项目来外包SolarY之外的SPICE例程。这个“SPICE外包”的更多细节将在下一个教程中介绍。</p><p id="2cf6" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">托马斯</p><p id="65ed" class="pw-post-body-paragraph ma mb it mc b md oc kd mf mg od kg mi mj oe ml mm mn of mp mq mr og mt mu mv im bi translated">推特:<a class="ae kr" href="https://twitter.com/MrAstroThomas" rel="noopener ugc nofollow" target="_blank"> MrAstroThomas </a></p></div></div>    
</body>
</html>