<html>
<head>
<title>3 Ways To Compute A Weighted Average in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中计算加权平均值的3种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-ways-to-compute-a-weighted-average-in-python-4e066de7a719?source=collection_archive---------1-----------------------#2020-11-03">https://towardsdatascience.com/3-ways-to-compute-a-weighted-average-in-python-4e066de7a719?source=collection_archive---------1-----------------------#2020-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="24e8" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/programming" rel="noopener" target="_blank">编程</a> | <a class="ae ep" href="https://towardsdatascience.com/tagged/interviewing" rel="noopener" target="_blank">面试</a> | <a class="ae ep" href="https://towardsdatascience.com/tagged/office-hours" rel="noopener" target="_blank">办公时间</a></h2><div class=""/><div class=""><h2 id="482f" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在这篇简短的教程中，我将展示如何在Python中定义自己的函数或使用NumPy来计算加权平均值</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/b460a09f7ee3fd5461c76f8b55356397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c8Ge5r25gsbztm_OtvhfTg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片来自<strong class="bd li"> </strong> <a class="ae lh" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a></p></figure><p id="b985" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">更新:你们中的许多人联系我，要求提供宝贵的资源，以便使用Python </em>  <em class="mf">自动化Excel任务，或者使用Python</em><strong class="ll jd"><em class="mf">应用流行的统计概念</em> </strong> <em class="mf">。下面我分享我推荐的四门课程:</em></p><ul class=""><li id="69d8" class="mg mh it ll b lm ln lp lq ls mi lw mj ma mk me ml mm mn mo bi translated"><a class="ae lh" href="https://imp.i115008.net/2rrmW7" rel="noopener ugc nofollow" target="_blank"><strong class="ll jd">Python中的数据科学编程(纳米级)</strong> </a></li><li id="c40a" class="mg mh it ll b lm mp lp mq ls mr lw ms ma mt me ml mm mn mo bi translated"><a class="ae lh" href="https://datacamp.pxf.io/jWm44P" rel="noopener ugc nofollow" target="_blank"><strong class="ll jd">Python中练习统计面试题</strong> </a></li></ul><p id="122c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">希望你也会发现它们有用！现在欣赏:D的文章</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="721e" class="nb nc it bd nd ne nf ng nh ni nj nk nl ki nm kj nn kl no km np ko nq kp nr ns bi translated">何时使用加权平均值？</h1><p id="dd56" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated">假设您必须分析下表，该表显示了一家小公司员工的年薪，这些员工分为五组(从<em class="mf">低</em>到<em class="mf">高</em>工资):</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/ac7f1e0767d190e0829e62217653b9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*ojF5XheVQHECdiCaci3PtQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">作者在Tableau中创建的图像。使用了模拟数据。</p></figure><p id="e805" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果您计算<code class="fe nz oa ob oc b">Salary Per Year</code>列的简单平均值，您将获得:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/d48be9943f4b84bd4356c6282eebc314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oJVrUSGkpk1m7ewf008m_w.png"/></div></div></figure><p id="c7d9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">但是62000英镑能准确代表所有群体的平均工资吗？因为数据已经汇总，每个组有不同的<code class="fe nz oa ob oc b">Employees Number</code>，每个组的平均<code class="fe nz oa ob oc b">Salary Per Year</code>在总平均值中的权重不同。在计算简单平均值时，每组的权重相同，导致结果有偏差。</p><p id="ba3e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在这种情况下，解决方案是通过计算<strong class="ll jd">加权平均值</strong>来考虑每组的权重，加权平均值可以用以下公式用代数表示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/8563d3e574ac4b8923771c0364f2f4c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*P4xuejxSkP3vUTQQM0z4-w.png"/></div></figure><p id="9d46" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">其中<code class="fe nz oa ob oc b">x</code>代表分配(<code class="fe nz oa ob oc b">Salary Per Year</code>),<code class="fe nz oa ob oc b">w</code>代表待分配的权重(<code class="fe nz oa ob oc b">Employees Number</code>)。假设该表包括五个组，则上述公式变为:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi of"><img src="../Images/99988f1e165c59371fe88d07c577aad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*Wf7MA9CqzKyTy-g8aktj7Q.png"/></div></figure><p id="0cef" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">用实际数字代替<code class="fe nz oa ob oc b">x</code>和<code class="fe nz oa ob oc b">w</code>，你应该得到下面的结果:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/e9a6fde4c0cc97bd025f1d2aac1815ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wafureOi4-7SPYK7H0glw.png"/></div></div></figure><p id="3d95" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">请注意，考虑到权重因素，各组的平均值<code class="fe nz oa ob oc b">Salary Per Year</code>几乎比简单平均法计算出的值低18，000，这是描述数据集的一种准确方式，因为每组都有一定数量的员工。</p><p id="d8d0" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">既然已经介绍了理论，让我们看看如何使用3种不同的方法在Python中获得加权平均值。为此，第一步是导入包和<code class="fe nz oa ob oc b">employees_salary</code>表本身:</p><pre class="ks kt ku kv gt oh oc oi oj aw ok bi"><span id="008e" class="ol nc it oc b gy om on l oo op">import pandas as pd<br/>from numpy import average</span><span id="09b0" class="ol nc it oc b gy oq on l oo op">df = pd.read_csv(‘C:/Users/anbento/Desktop/employee_salary.csv’)</span><span id="410d" class="ol nc it oc b gy oq on l oo op">df.head()<br/>distribution = df[‘salary_p_year’]<br/>weights = df[‘employees_number’]</span></pre><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/3-nanodegrees-you-should-consider-to-advance-your-data-engineering-career-in-2021-baf597debc72"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">3纳米学位你应该考虑在2021年推进你的数据工程职业</h2><div class="pb l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph lb ou"/></div></div></a></div><h1 id="b156" class="nb nc it bd nd ne pi ng nh ni pj nk nl ki pk kj nn kl pl km np ko pm kp nr ns bi translated">方法1:使用列表理解的功能</h1><p id="d2cd" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated">如果您希望编写自己的算法，计算加权平均值的第一个非常简单的方法是使用列表理解来获得每个<code class="fe nz oa ob oc b">Salary Per Year</code>与相应的<code class="fe nz oa ob oc b">Employee Number</code> ( <code class="fe nz oa ob oc b">numerator</code>)的乘积，然后除以权重之和(<code class="fe nz oa ob oc b">denominator</code>)。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><pre class="ks kt ku kv gt oh oc oi oj aw ok bi"><span id="4d04" class="ol nc it oc b gy om on l oo op">Output:<br/>44225.35</span></pre><p id="cd67" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上面的函数可以很容易地重写为一行代码:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><pre class="ks kt ku kv gt oh oc oi oj aw ok bi"><span id="9312" class="ol nc it oc b gy om on l oo op">Output:<br/>44225.35</span></pre><h1 id="3b1e" class="nb nc it bd nd ne pi ng nh ni pj nk nl ki pk kj nn kl pl km np ko pm kp nr ns bi translated">方法2:使用Zip()函数</h1><p id="c044" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated">除了使用列表理解，您可以简单地从空列表(<code class="fe nz oa ob oc b">weighted_sum</code>)开始，并通过其<code class="fe nz oa ob oc b">weight</code>附加每个组的平均值<code class="fe nz oa ob oc b">salary</code>的乘积。<code class="fe nz oa ob oc b">zip()</code>函数非常方便，因为它生成一个元组迭代器，帮助将每个<code class="fe nz oa ob oc b">salary</code>与对应的<code class="fe nz oa ob oc b">weight</code>配对。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><pre class="ks kt ku kv gt oh oc oi oj aw ok bi"><span id="0f1f" class="ol nc it oc b gy om on l oo op">Output:<br/>44225.35</span></pre><h1 id="f9f7" class="nb nc it bd nd ne pi ng nh ni pj nk nl ki pk kj nn kl pl km np ko pm kp nr ns bi translated">方法3:使用Numpy Average()函数</h1><p id="ce90" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated"><code class="fe nz oa ob oc b">numpy</code>包包括一个<code class="fe nz oa ob oc b">average()</code>函数(<em class="mf">已经在</em>上导入)，您可以在其中指定一个权重列表来计算加权平均值。这是迄今为止在生产中执行此类计算最简单、最灵活的方法:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><pre class="ks kt ku kv gt oh oc oi oj aw ok bi"><span id="ba91" class="ol nc it oc b gy om on l oo op">Output:<br/>44225.35</span></pre><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/10-algorithms-to-solve-before-your-python-coding-interview-feb74fb9bc27"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">Python编码面试前要解决的10个算法</h2><div class="pp l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">在这篇文章中，我介绍并分享了FAANG中经常出现的一些基本算法的解决方案</h3></div><div class="pb l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pq l pe pf pg pc ph lb ou"/></div></div></a></div><h1 id="0776" class="nb nc it bd nd ne pi ng nh ni pj nk nl ki pk kj nn kl pl km np ko pm kp nr ns bi translated"><strong class="ak">结论</strong></h1><p id="7cd8" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated">在这个简短的教程中，我们了解了每次以汇总或分组的方式呈现数据时，加权平均值应该是首选选项，其中可以确定一些数量或频率。我们还发现了至少3种使用Python计算加权平均值的方法，要么使用自定义函数，要么使用内置函数。我很想知道你是否使用其他算法或软件包来计算加权平均值，所以请留下你的评论！</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="1a96" class="nb nc it bd nd ne nf ng nh ni nj nk nl ki nm kj nn kl no km np ko nq kp nr ns bi translated">给我的读者一个提示</h1><p id="66cf" class="pw-post-body-paragraph lj lk it ll b lm nt kd lo lp nu kg lr ls nv lu lv lw nw ly lz ma nx mc md me im bi translated">这篇文章包括附属链接，如果你购买的话，我可以免费给你一点佣金。</p><h1 id="c6bf" class="nb nc it bd nd ne pi ng nh ni pj nk nl ki pk kj nn kl pl km np ko pm kp nr ns bi translated">你可能也喜欢</h1><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/7-fundamental-sql-concepts-you-will-be-challenged-with-in-faang-interviews-d26097a8d867"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">下一次编码面试前要掌握的7个基本SQL概念</h2><div class="pp l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">通过从真实面试中解决问题来练习，最终得到你应得的工作。</h3></div><div class="pb l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pr l pe pf pg pc ph lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/connect-to-databases-using-python-and-hide-secret-keys-with-env-variables-a-brief-tutorial-4f68e33a6dc6"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">使用环境变量隐藏您的密码</h2><div class="pp l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">关于如何在使用Python连接到数据库时使用环境变量隐藏密钥的教程</h3></div><div class="pb l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="ps l pe pf pg pc ph lb ou"/></div></div></a></div><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/15-git-commands-you-should-learn-before-your-very-first-project-f8eebb8dc6e9"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd jd gy z fp oz fr fs pa fu fw jc bi translated">在你开始第一个项目之前，要掌握15个Git命令</h2><div class="pp l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">您需要掌握的最后一个Git教程是命令行版本控制。</h3></div><div class="pb l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pt l pe pf pg pc ph lb ou"/></div></div></a></div></div></div>    
</body>
</html>