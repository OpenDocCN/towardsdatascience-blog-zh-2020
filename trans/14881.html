<html>
<head>
<title>Diabetes Prediction Application using Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Streamlit的糖尿病预测应用</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/diabetes-prediction-application-using-streamlit-fed6120124a5?source=collection_archive---------34-----------------------#2020-10-13">https://towardsdatascience.com/diabetes-prediction-application-using-streamlit-fed6120124a5?source=collection_archive---------34-----------------------#2020-10-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aab9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用PIMA印度糖尿病数据集创建机器学习应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/88498ec7ebf2e30e3d08904673e8be80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z53fLL3IzWaRoP9d"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·温克勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1a9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Streamlit </strong>是一个开源的Python库，其速度快得惊人，可以轻松地为机器学习和数据科学构建漂亮的定制网络应用。这是一个非常棒的工具，只需要一些python知识就可以创建高度交互式的仪表板。</p><p id="7025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用streamlit创建应用程序会对最终用户产生影响，因为它有一个良好的用户界面，并支持许多用户友好的小部件。在streamlit中创建应用程序也很容易。我们将使用streamlit创建一个应用程序，它将预测用户是否患有糖尿病。我们将使用的数据集是<a class="ae ky" href="https://www.kaggle.com/uciml/pima-indians-diabetes-database" rel="noopener ugc nofollow" target="_blank"> PIMA Indian糖尿病数据集</a>，它包含8个预测变量和1个目标变量。</p><p id="9c28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看数据集中有哪些不同的属性。预测变量被命名为结果，其被编码为0和1，其中0代表非糖尿病，1代表糖尿病。其他属性信息如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/aa3d5ec8c88cdc997a54ed9b15d48576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f_byCxM531gOkQPAbnskww.png"/></div></div></figure><h1 id="2c7a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">探索数据集</h1><p id="4247" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">让我们从探索我们将使用的数据集开始。为了探索数据集，我们将使用jupyter笔记本通过pandas加载数据集并执行探索性数据分析。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8ecb" class="my lx it mu b gy mz na l nb nc">import pandas as pd<br/>df = pd.read_csv('Diabetes.csv')<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/b56c3f4ae43790a0da08f6b65c0e2b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PkWp4damguy0tM5w1L5jXw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">糖尿病数据集</p></figure><h1 id="e4d8" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">可视化不同的属性:</h1><ol class=""><li id="7292" class="ne nf it lb b lc mo lf mp li ng lm nh lq ni lu nj nk nl nm bi translated">热图</li></ol><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="ad42" class="my lx it mu b gy mz na l nb nc">sns.heatmap(df.corr(),annot=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/1ae443c460bfbaa901ae36e16dfb31e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*0n50p5eFHsuoVxyezuzo5w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">热图显示不同属性之间的关联。</p></figure><p id="3b8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.配对图</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8c62" class="my lx it mu b gy mz na l nb nc">sns.pairplot(df,hue='Outcome')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/1c3c38e7fea220f053a505cc28e9d9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p8NO-OW5fE2dkAarTAOGuA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">配对图用于显示糖尿病患者和非糖尿病患者之间的相似性和差异。</p></figure><p id="d9f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似地，我们可以为EDA过程创建更多的图，并探索所有属性的不同特性。</p><p id="5759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在jupyter笔记本中创建逻辑回归模型并保存它，以便在我们的streamlit应用程序中调用它进行预测。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="065d" class="my lx it mu b gy mz na l nb nc">from sklearn.model_selection import train_test_split<br/>from sklearn.linear_model import LogisticRegression<br/>import pickle</span><span id="25a8" class="my lx it mu b gy np na l nb nc"># Split dataset into training set and test set<br/>X_train, X_test, y_train, y_test = train_test_split(df[['Pregnancies', 'Glucose','BloodPressure','SkinThickness','Insulin','BMI','DiabetesPedigreeFunction','Age']], df['Outcome'], test_size=0.3, random_state=109)</span><span id="1819" class="my lx it mu b gy np na l nb nc">#Creating the model<br/>logisticRegr = LogisticRegression(C=1)<br/>logisticRegr.fit(X_train, y_train)<br/>y_pred = logisticRegr.predict(X_test)</span><span id="da1d" class="my lx it mu b gy np na l nb nc">#Saving the Model<br/>pickle_out = open("logisticRegr.pkl", "wb") <br/>pickle.dump(logisticRegr, pickle_out) <br/>pickle_out.close()</span></pre><p id="5128" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们开始创建应用程序。为了创建应用程序，我们需要用python创建一个脚本，为此，我们需要在系统中安装一个代码编辑器。你可以使用任何代码编辑器，但是我个人使用Atom是因为它的特性。我们将使用逻辑回归来创建预测模型。让我们从导入所需的库开始。</p><h1 id="e39e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">加载所需的库</h1><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="3524" class="my lx it mu b gy mz na l nb nc">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly.express as px<br/>from plotly.subplots import make_subplots<br/>import plotly.graph_objects as go<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import pickle</span></pre><h1 id="0d8b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">调用我们在上面保存的模型:</h1><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="6a00" class="my lx it mu b gy mz na l nb nc">pickle_in = open('logisticRegr.pkl', 'rb')<br/>classifier = pickle.load(pickle_in)</span></pre><h1 id="a1df" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">为应用程序创建用户界面:</h1><p id="2426" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Streamlit为其界面预定义了UI。我们将使用不同的小部件来显示信息，并接受用户输入进行预测。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d16b" class="my lx it mu b gy mz na l nb nc">st.sidebar.header('Diabetes Prediction')<br/>select = st.sidebar.selectbox('Select Form', ['Form 1'], key='1')<br/>if not st.sidebar.checkbox("Hide", True, key='1'):<br/>    st.title('Diabetes Prediction(Only for females above 21years of    Age)')<br/>    name = st.text_input("Name:")<br/>    pregnancy = st.number_input("No. of times pregnant:")<br/>    glucose = st.number_input("Plasma Glucose Concentration :")<br/>    bp =  st.number_input("Diastolic blood pressure (mm Hg):")<br/>    skin = st.number_input("Triceps skin fold thickness (mm):")<br/>    insulin = st.number_input("2-Hour serum insulin (mu U/ml):")<br/>    bmi = st.number_input("Body mass index (weight in kg/(height in m)^2):")<br/>    dpf = st.number_input("Diabetes Pedigree Function:")<br/>    age = st.number_input("Age:")</span><span id="ba8f" class="my lx it mu b gy np na l nb nc">submit = st.button('Predict')</span><span id="347a" class="my lx it mu b gy np na l nb nc">if submit:<br/>        prediction = classifier.predict([[pregnancy, glucose, bp, skin, insulin, bmi, dpf, age]])<br/>        if prediction == 0:<br/>            st.write('Congratulation',name,'You are not diabetic')<br/>        else:<br/>            st.write(name," we are really sorry to say but it seems like you are Diabetic.")</span></pre><p id="ee03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建应用程序，现在我们需要使用。py”扩展名。例如，如果您需要将应用程序保存为“predict ”,那么您需要将其保存为“predict.py”。为了启动该应用程序，我们将打开Anaconda命令提示符并键入下面给出的命令。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="e39f" class="my lx it mu b gy mz na l nb nc">streamlit run predict.py</span></pre><p id="b8ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将启动我们的应用程序，现在我们可以使用不同的用户输入来创建一个人是否患有糖尿病。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/196abcb34da55f67e3b148f679f2f539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4O9FhWSYrqbYDRQpS1A0w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序的主页</p></figure><p id="8014" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过输入不同用户的信息，我们可以产生不同的结果，并看到我们的模型有多好和准确。</p><p id="388b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是streamlit所能做的一个例子。您可以探索更多信息，了解streamlit为创建网络应用和仪表盘提供的无限功能。创建您的应用程序，并在本文的回复中分享您的经验。</p><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/exploratory-data-analysis-using-dora-ac596e5a32a6"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">使用Dora进行探索性数据分析</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">自动化探索性数据分析和数据建模</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/technical-analysis-of-stocks-using-ta-lib-305614165051"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">使用TA-Lib对股票进行技术分析</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">技术分析python库</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oj l of og oh od oi ks nu"/></div></div></a></div><h1 id="d7ca" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">在你走之前</h1><p id="c5ee" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><strong class="lb iu"> <em class="ok">感谢</em> </strong> <em class="ok">的阅读！如果你想与我取得联系，请随时通过hmix13@gmail.com联系我或我的</em> <a class="ae ky" href="http://www.linkedin.com/in/himanshusharmads" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ok"> LinkedIn个人资料</em> </strong> </a> <em class="ok">。也可以在我的</em><a class="ae ky" href="https://github.com/hmix13/DiabetesApplication" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="ok">Github</em></strong><em class="ok">中查看我在这里使用过的代码和数据集。</em> </a> <em class="ok">还有，随意探索</em> <a class="ae ky" href="https://medium.com/@hmix13" rel="noopener"> <strong class="lb iu"> <em class="ok">我的简介</em> </strong> </a> <em class="ok">阅读我写过的与数据科学相关的不同文章。</em></p></div></div>    
</body>
</html>