<html>
<head>
<title>The Dos and Don’ts of Imputation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">归纳法的该做与不该做</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-dos-and-donts-of-imputation-d89d72a26a58?source=collection_archive---------22-----------------------#2020-11-01">https://towardsdatascience.com/the-dos-and-donts-of-imputation-d89d72a26a58?source=collection_archive---------22-----------------------#2020-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/727a177aec8fa5f268843c5dba349f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*98djKcPdzfx6urbX"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">来源:<a class="ae jd" href="https://unsplash.com/@jonasjacobsson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔纳斯·雅各布松</a></p></figure><div class=""/><div class=""><h2 id="2f51" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">处理缺失数据的好方法</h2></div></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="7973" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">缺少数据是一个问题，在用于教程的数据集中通常不存在，但在现实生活中几乎总是存在。在现实生活中，数据被认为是杂乱的，有错误，并呈现缺失的信息。这可能是因为字段不适用于该记录，例如用户没有备用电话号码，或者是因为数据收集过程中的问题。通常的情况是，特别是在调查中，人们没有完成所有的字段，导致数据不一致。</p><h1 id="e7fa" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">何必呢？</h1><p id="9f31" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">缺失会导致问题，不仅因为数据不能代表实际人口的信息，还因为许多算法不能处理缺失数据。例如，<a class="ae jd" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> Sklearn </a>中的大多数算法仍然无法处理包含空值的数据。</p><h1 id="c767" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">怎么办？</h1><h2 id="0143" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">改进数据收集过程</h2><p id="a274" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">很多时候这是不可能的，但是如果可以的话，确保你有一个可靠的数据收集过程。例如，当处理表单时，这意味着发送带有<strong class="le jh">必填字段</strong>而不是普通字段的谷歌表单，以及下拉项目而不是自由文本框。</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/bb6bff71e7fe5655e9a1a8740d733f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HIgHk96wUZnOSmv-UmfByA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用“自由文本”框获取用户答案的表单示例。在这种情况下，由于不需要答案，用户可以在此过程中创建空值。</p></figure><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/ed6dd4969542a0efa713cdd4902be22b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ED-aBFuf7vEji1iEfHl9Dg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">与上述选项相同，但标记为“必需”。这样做(几乎)消除了空值的可能性。此外，通过“自由文本”选项，用户获得了更高程度的灵活性，但可以输入任何可能的值。聚集诸如“黑色”、“黑色”和相同答案的拼写错误版本的值变得困难。</p></figure><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nn"><img src="../Images/da58de208f2c22f4317a1ec598190772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfe5SLq5KK1pNK3-dxJFRg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用“多项选择”输入用户输入的“必需”表单示例。在这种情况下，用户需要输入一个值，并且只限于几个选项，一旦收集到调查结果，这些选项很容易分析。</p></figure><h2 id="0cda" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">使用插补</h2><p id="d319" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">插补是用特定值填充特征缺失条目的过程。例如，这可以是使用机器学习算法的列的平均值、其中值、零或更复杂的方法。</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/140c4eb42f2e0cff9d0b99ea3e3eac99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hD8WuTuXO-60Kh8bcBherw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">插补对数据影响的一个简单例子。</p></figure><p id="cf3e" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在深入研究插补的最佳实践之前，让我们先关注一下不要做什么。</p><h1 id="bacb" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">不要做什么？</h1><p id="bb51" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">有些被吹捧为良好做法的做法并不完全如此。</p><h2 id="4f77" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">平均插补</h2><p id="716b" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">例如，一种方法是使用均值插补或任何其他插补方法，即用固定值填充数据。这是一个快速简单的解决方案，在“让模型运行”方面很有效。然而，通过这样做，我们极大地修改了数据集的方差，改变了数据的底层分布。让我们看一个例子:</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/9042b3a2a0abaca6450bbdeaf64ff5f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FSbm_6RgXTtd4n4qQUL6Rg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">应用于特征2的均值插补改变了数据的基本分布，从而改变了数据集的可变性(标准差从234到206)。</p></figure><p id="bd9b" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">此外，均值插补不考虑特征之间的相关性。事实上，该算法在要素级别工作，只考虑属于该列的信息，而不是整个数据集。</p><h2 id="df2f" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">零插补</h2><p id="12e7" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">零插补是另一种解决方案，通常用于简单地允许模型运行，但实际上是一种要避免的解决方案。这种技术有许多缺点。首先，它会使总体向0倾斜，从而改变底层数据集的分布。此外，它还突出了均值插补的问题，包括缺乏对特征相关性的深入了解。</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/d748e7698de4e6329114f695c03be220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YsodxcVjFrbRAzw-ACLLSA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">用零输入特征2使特征的平均值更接近于零(平均值从513到403)。</p></figure><p id="1946" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">最后，对于某些变量来说，缺失和零意味着截然不同的两件事。例如，当考虑以米为单位的特征“高度”时，输入缺失值可能会产生误导，因为高度值等于零可能意味着缺失和条目高度小于一米。</p><h2 id="0694" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">删除缺少值的行</h2><p id="6432" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">另一个通常非常容易执行的解决方案是删除所有受缺失值影响的行。这包括删除至少有一个单元格包含空值的每一行。尽管在使算法工作方面是有效的，但是这种解决方案倾向于大大减少观察的数量。</p><figure class="ni nj nk nl gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/0157df892eff2b1a0aed31b3e072859f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnwanLK_vk9XPIQP--kjbQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">删除特性2中的空值条目会导致很大一部分行被删除。</p></figure><p id="ce14" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在大多数情况下，具有缺失值的观察值的数量非常大，以至于将它们全部移除会导致观察值的数量相对较少。此外，这种方法会引起偏见方面的问题。由于固有的数据特征，移除至少具有缺失值的所有观测值会引入偏差。例如，删除电话号码特征为空的所有条目可能导致删除由买不起电话的人组成的所有条目。</p><h1 id="f2c0" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">归罪</h1><h2 id="24a2" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">回归插补</h2><p id="aaa0" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">这种类型的插补旨在使用其余数据填补特定列的缺失值。特别是，它使用回归模型来使用除要估算的特征之外的所有数据来推断该特定列的缺失值。使用在目标列中具有值的特征来执行模型的训练。然后，通过每个特征重复该方法，直到数据被完全估算。</p><h2 id="bb39" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">KNN插补</h2><p id="de52" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">KNN插补是一种使用K-最近邻算法在记录间寻找相似性的技术。它的工作原理是在一个<em class="nq"> n </em>维空间上绘制代表每个记录的向量，其中<em class="nq"> n </em>是特征的数量。使用预定义的距离度量，两个向量越接近，样本就越相似。KNN插补使用关于<em class="nq"> K </em>个相邻样本的信息来填充我们正在考虑的样本的缺失信息。</p><p id="b8b3" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这项技术对于大多数现实生活中的应用程序来说都是一个很好的解决方案，并且是一种相对可靠的方法。</p><h2 id="98b6" class="mv lz jg bd ma mw mx dn me my mz dp mi ll na nb mk lp nc nd mm lt ne nf mo ng bi translated">链式方程多元插补(小鼠)</h2><p id="af32" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">MICE的工作方式是迭代回归每个特征，使用其余特征推断缺失值，并多次重复这一过程。特别是，MICE算法的工作原理如下:</p><ol class=""><li id="25be" class="nr ns jg le b lf lg li lj ll nt lp nu lt nv lx nw nx ny nz bi translated">对所有特征执行简单类型的插补，例如均值插补</li><li id="9bd9" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx nw nx ny nz bi translated">要素的值被重新设置为缺失。</li><li id="27a4" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx nw nx ny nz bi translated">使用插补模型中的其他变量对步骤2中目标变量的观察值进行回归。</li><li id="d780" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx nw nx ny nz bi translated">此栏中缺失的值将由回归模型中的预测值(插补值)替换。</li><li id="bb7f" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx nw nx ny nz bi translated">对每个丢失数据的变量重复步骤2到4。</li><li id="98e7" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx nw nx ny nz bi translated">重复步骤2到4若干个周期，在每个周期更新估算值。</li></ol><h1 id="b70f" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">摘要</h1><p id="160b" class="pw-post-body-paragraph lc ld jg le b lf mq kh lh li mr kk lk ll ms ln lo lp mt lr ls lt mu lv lw lx ij bi translated">总的来说，我们讨论了丢失数据的注意事项。<br/> <strong class="le jh">尽量避免</strong>:</p><ul class=""><li id="5022" class="nr ns jg le b lf lg li lj ll nt lp nu lt nv lx of nx ny nz bi translated">平均插补</li><li id="1d03" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx of nx ny nz bi translated">零插补</li><li id="9848" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx of nx ny nz bi translated">删除丢失的值</li></ul><p id="e23a" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><strong class="le jh">试使用</strong>:</p><ul class=""><li id="ce9f" class="nr ns jg le b lf lg li lj ll nt lp nu lt nv lx of nx ny nz bi translated">回归插补</li><li id="ba8a" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx of nx ny nz bi translated">KNN插补</li><li id="f723" class="nr ns jg le b lf oa li ob ll oc lp od lt oe lx of nx ny nz bi translated">老鼠归罪</li></ul><p id="d1d9" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">如果您可以访问数据收集流程，也要确保开发足够健壮的流程，以阻止用户生成缺失值。</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="f12c" class="pw-post-body-paragraph lc ld jg le b lf lg kh lh li lj kk lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><em class="nq">想看更多这样的文章，关注我的</em><a class="ae jd" href="https://twitter.com/jayzuccarelli" rel="noopener ugc nofollow" target="_blank"><em class="nq">Twitter</em></a><em class="nq">，</em><a class="ae jd" href="https://www.linkedin.com/in/ezuccarelli" rel="noopener ugc nofollow" target="_blank"><em class="nq">LinkedIn</em></a><em class="nq">或者我的</em> <a class="ae jd" href="https://eugeniozuccarelli.com/" rel="noopener ugc nofollow" target="_blank"> <em class="nq">网站</em> </a> <em class="nq">。</em></p></div></div>    
</body>
</html>