<html>
<head>
<title>Data Anti-Patterns — The Import Macro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据反模式—导入宏</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-anti-patterns-the-import-macro-9c678bc272a8?source=collection_archive---------57-----------------------#2020-10-27">https://towardsdatascience.com/data-anti-patterns-the-import-macro-9c678bc272a8?source=collection_archive---------57-----------------------#2020-10-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/98b76220e21e4f571ec3f827a2b330a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zmRVqHHcY8QBGqRmCwsMQ.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">作者照片</p></figure><p id="05f3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">大多数反模式都是从堆栈溢出或者更好的Github开始的。假设我需要将数据导入到我的分析中，并且我想要获得数据的最快方法。代码片段和电子表格的世界让我可以毫不费力地导入数据和生产数据产品。</p><p id="9dc1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">什么是数据反模式？它们是看起来合理的解决方案，但是可能不可伸缩、不安全、引入了质量问题，或者对良好的数据治理有所冒犯。</p><p id="5000" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">没有人打算实现反模式。说选举快到了；确实是！我需要一些数据来分析。</p><p id="b4fc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">与其麻烦数据工程师加载我需要的数据，为什么不在Github上找到一个电子表格宏，自己把它导入到我的模型中呢？</p><p id="f7dd" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我使用著名的数据源FiveThirtyEight，并将我需要的投票数据嵌入到我的电子表格中。</p><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="853b" class="lm ln it li b gy lo lp l lq lr">=ImportCSV("<a class="ae ls" href="https://projects.fivethirtyeight.com/polls-page/senate_polls.csv" rel="noopener ugc nofollow" target="_blank">https://projects.fivethirtyeight.com/polls-page/senate_polls.csv</a>")</span></pre><p id="78a2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">反模式已实现。我有数据。它很小，所以加载很快，我可以开始我的分析。以下是一些问题:我阻止了别人检查或监控我的数据。我也排除了自己跟踪这些数据的演变。</p><p id="5493" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">怎么修？首先，中转位置应该是共享的、可靠的和安全的。在AWS中，暂存S3的数据。在Azure中，它将是blob存储。在谷歌上，它将是一个云存储桶。</p><p id="6ea1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">电子表格不能代替数据库。确定数据库是否足够好的关键语句是，“它支持COPY语句吗？”Postgres将扩展到万亿字节级别，而像雪花这样的数据库允许您将数据处理与数据存储分开。</p><p id="6c92" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">遵循以下最佳实践:</p><ol class=""><li id="76ea" class="lt lu it kh b ki kj km kn kq lv ku lw ky lx lc ly lz ma mb bi translated">创造一个舞台</li><li id="358c" class="lt lu it kh b ki mc km md kq me ku mf ky mg lc ly lz ma mb bi translated">将数据复制到Stage表中，表名为第行的唯一性，并且<strong class="kh iu">不要</strong>删除或覆盖该数据</li></ol><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="e413" class="lm ln it li b gy lo lp l lq lr">copy into OWLMTN.STAGE.SENATE_POLLS (FILENAME, <br/>                                     FILE_ROW_VARCHAR,<br/>                                     question_id, ...        <br/>                                     candidate_party, <br/>                                     pct<br/>    )<br/>    from (<br/>        select METADATA$FILENAME        filedate,<br/>               METADATA$FILE_ROW_NUMBER filename,<br/>               t.$1, ...<br/>               t.$37,<br/>               t.$38<br/>        from @owlmtn.stage.FIVE_THIRTY_EIGHT_POLLS t<br/>    )<br/>    pattern = 'stage/fivethirtyeight/polls/SENATE_POLLS_.*\.csv'<br/>    on_error = continue<br/>    force = false<br/>    file_format = (field_optionally_enclosed_by = '"'<br/>        type = 'csv'<br/>        field_delimiter = ','<br/>        skip_header = 1<br/>        encoding = 'utf-8');</span></pre><h1 id="fcbd" class="mh ln it bd mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd bi translated">结论</h1><p id="de64" class="pw-post-body-paragraph kf kg it kh b ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky ni la lb lc im bi translated">反模式通常只有在大范围内才变得可见。来自Stack Overflow或Github的解决方案会给数据基础设施带来严重的操作问题。在解决数据问题时，利用您的组织基础设施。如果没有，就从一个支持COPY的可靠的SQL数据库开始。</p><p id="d839" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在FiveThirtyEight选举数据的情况下，反模式会将选举数据带入我的电子表格，但是这些数据很快就没用了。通过将数据存储在关系存储中并保留所有数据，我可以在11月3日之后使用历史数据来验证模型。</p></div></div>    
</body>
</html>