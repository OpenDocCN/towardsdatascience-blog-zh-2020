<html>
<head>
<title>Customer Engagement in A Highly Competitive Business Environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">竞争激烈的商业环境中的客户参与</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/customer-engagement-in-a-highly-competitive-business-environment-942b855efdf5?source=collection_archive---------65-----------------------#2020-10-12">https://towardsdatascience.com/customer-engagement-in-a-highly-competitive-business-environment-942b855efdf5?source=collection_archive---------65-----------------------#2020-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4fef" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">赢得客户的忠诚度并降低流失率</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a668cb7e6d2a740b6da2bd1a43f2810c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hjim3ov8njMlD81W_H9QGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">了解你的客户——作者图片</p></figure><p id="3a98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇文章强调了中小型企业如何使用预测方法来预测客户行为。企业必须赢得客户的忠诚度，降低流失率。</p><p id="0d35" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">目的是帮助线下商家(特别是中小企业)更好地了解他们的客户，降低他们的流失率，增加客户对品牌的忠诚度。通过忠诚度和接送选项等多种产品选项，商家可以识别他们的最佳客户，并知道如何最好地吸引他们。</p><p id="bb98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇文章需要结合机器学习、数据分析和编程。将审查关于客户及其订单的信息，并确定任何不同的细分市场或趋势。</p><h1 id="90f7" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">概述</strong></h1><p id="ce6e" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">客户忠诚度和保留率对任何业务的发展都至关重要。线下商家(特别是中小商店)努力为他们的顾客提供个性化服务。同样，顾客希望得到与网飞、亚马逊等主要品牌相同的参与度。有无数的选择供客户选择，这些企业必须发展，否则就有被甩在后面的风险。</p><p id="d1a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">小型企业面临的个性化挑战是什么？</em> </strong></p><p id="7b84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">中小型商家没有足够的资源来收集和解释客户数据。他们面临的一些挑战包括:</p><ul class=""><li id="add8" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">数据不足</li><li id="a387" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">无法获得可靠的数据</li><li id="6796" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">无法解释数据</li></ul><p id="5f72" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">客户为什么会离开(客户流失)？</em>T9】</strong></p><p id="a163" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">客户流失是指客户不再光顾某个品牌或企业的趋势。各种原因可能会影响客户的决定，如果在同一时期有太多的客户放弃某个品牌，该业务就有彻底关闭的风险。以下是客户流失的常见原因；</p><ul class=""><li id="3632" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">企业主无法与大客户建立关系</li><li id="14a6" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">企业主不能向客户提供任何形式的个性化服务/互动</li><li id="1fce" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">企业主缺乏与大企业竞争的资源</li></ul><p id="e722" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了实现这一点，店主了解顾客行为并根据购买行为和人口统计数据对顾客进行分类至关重要。这将有助于建立一种能带来客户忠诚度的关系。</p><h2 id="2e82" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated"><strong class="ak">案例分析</strong></h2><p id="ca9c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><strong class="la iu">星巴克</strong>是一个利用顾客数据的优秀品牌范例。他们在一周的特定时间向特定的客户发送特定的报价。</p><ul class=""><li id="4a7d" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">他们向最有可能改变购买习惯的顾客提供最好的交易</li><li id="b329" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">他们只为客户提供投资回报率最高的交易</li><li id="1558" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">他们试图把不常光顾的顾客变成常客</li></ul><h1 id="6747" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">假设和假设</strong></h1><p id="7b8c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们应该思考“应该问什么类型的问题？数据应该怎么审核？”</p><p id="5773" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的假设是:</p><ul class=""><li id="980c" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">忠诚的顾客可能会比新顾客花费更多</li><li id="e8ae" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">获得新客户的成本可能高于留住客户的成本</li><li id="6f33" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">上午的交易量高于晚上</li><li id="9a91" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">甜点和其他产品受到的影响更大</li><li id="741c" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">如果能提供个性化的体验，顾客更有可能做生意</li><li id="fac9" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">奖励会让顾客再次光顾</li></ul><p id="bbc1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用Nugttah数据集(忠诚度应用程序)的子集来测试我们的假设</p><h1 id="498a" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">风险和限制</strong></h1><p id="86fb" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这些是本项目中可能预期的潜在限制。但是，在数据分析过程中会适当考虑这些因素:</p><ul class=""><li id="e304" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">缺乏足够和准确的数据是这个项目的最大限制。分析的结果只会和用来执行分析的数据一样好。</li><li id="2dce" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">另一个限制是商店不会记录他们交易的每一个方面。因此，根据分析需要，可能必须做出一些假设。</li><li id="1934" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">还存在用错误的模型分析数据的风险。</li><li id="d53d" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">由于广泛的新冠肺炎疫情引起的顾客行为的改变可能导致错误的销售预测。</li></ul><h1 id="1e42" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">进场和流程</strong></h1><p id="fa18" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">机器学习和数据科学项目的一个优秀方法如下:</p><ul class=""><li id="2f06" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">加载和预处理数据</li><li id="fbfa" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">干净的数据</li><li id="6d70" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">对数据进行数据可视化和探索性数据分析(EDA)</li><li id="0124" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">最后，分析所有模型，找出最有效的模型。</li></ul><h2 id="f33f" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated"><strong class="ak"> <em class="ns">加载&amp;数据的预处理</em> </strong></h2><p id="350a" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在此步骤中，我们将导入数据集并将其签出</p><p id="fef7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，数据集将被导入和检查。<strong class="la iu"> <em class="mr"> read_csv </em> </strong>功能将用于读取工作表</p><p id="44b6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"><em class="mr">% matplotlib inline</em></strong>将用于在笔记本中生成内联图。<strong class="la iu"> <em class="mr"> sns.set() </em> </strong>将被添加到代码中，以将可视化样式修改为基本Seaborn样式:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="12f3" class="ng lv it nu b gy ny nz l oa ob">import pandas as pd # data processing, CSV file I/O (e.g. pd.read_csv)<br/>import numpy as np  # linear algebra<br/>import seaborn as sns  # data visualization library  <br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import datetime<br/>import datetime as dt<br/>from matplotlib.ticker import FuncFormatter<br/>import matplotlib.ticker as ticker<br/>import json</span><span id="3101" class="ng lv it nu b gy oc nz l oa ob"># Figures inline and set visualization style<br/>%matplotlib inline<br/>sns.set()</span><span id="d5c5" class="ng lv it nu b gy oc nz l oa ob">plt.rcParams[‘figure.dpi’] = 150<br/>np.set_printoptions(suppress=True)<br/>np.set_printoptions(precision=3)</span><span id="1b5c" class="ng lv it nu b gy oc nz l oa ob">orders_df = pd.read_csv('data/orders.csv')</span></pre><p id="dbdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用<strong class="la iu"> <em class="mr"> head() </em> </strong>函数来显示数据集的前5个观察值，并使用<strong class="la iu"> <em class="mr"> shape </em> </strong>特性来找出数据帧中有多少列和多少行。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="20a3" class="ng lv it nu b gy ny nz l oa ob">orders_df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/b1e3ad8feaf3c237c206ddbde8a81ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dQdwViGsBuFV4Ky3zEmLkg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">orders_df.head()</p></figure><p id="79e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用<strong class="la iu">形状</strong>的数据集中的行和列的总数</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="702a" class="ng lv it nu b gy ny nz l oa ob">orders_df.shape</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/32424ed0ca29222b0b66cc8ef7ddd089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9tw08LsfVn-PfqS6eiW5w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">orders_df.shape</p></figure><p id="c377" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据由104850个观察值和29个特征组成。</p><p id="de3f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此时，可以使用<strong class="la iu"> describe() </strong>返回平均值、计数、最小值和最大值、标准偏差和数据质量来确定汇总统计数据。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="d2be" class="ng lv it nu b gy ny nz l oa ob">orders_df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/5c7bfca493ac34217a678ed72b5e443b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*APNSn9R3TezvyHB4ajdRSg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">orders_df.describe() —作者照片</p></figure><h2 id="3914" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated"><strong class="ak">清除数据</strong></h2><p id="f991" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">数据在被分析之前必须经过清理过程。一些数据清理过程包括:</p><ul class=""><li id="83de" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">缺少值</li><li id="e642" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">空值</li><li id="2b8d" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">重复值</li><li id="ae12" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">噪声值</li><li id="37f5" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">格式化数据</li><li id="a1ff" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">极端值</li><li id="994c" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">将数据分成单列和多列</li><li id="5f80" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">转换数据类型</li><li id="2650" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">其他数据完整性问题</li></ul><p id="1c61" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">已加载下列数据文件:</p><ul class=""><li id="affd" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">订单数据</li><li id="9019" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">客户数据</li><li id="2f69" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">商业数据</li><li id="0745" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">产品数据</li><li id="300d" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">奖励数据</li><li id="4abe" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">最终_单项_订单</li></ul><p id="4e24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:原始数据最初在各种数据表中被打乱。必须使用<strong class="la iu"> <em class="mr"> pd.merge </em> </strong>来收集和合并数据帧。</p><p id="8480" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">删除有重复数据的数据字段</em> </strong></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="3967" class="ng lv it nu b gy ny nz l oa ob"># Redundant data exist in the dataset so we need to delete columns that are all same to reduce complexity<br/>def is_unique(s):<br/>    a = s.to_numpy()<br/>    return (a[0] == a[1:]).all()</span><span id="66cf" class="ng lv it nu b gy oc nz l oa ob">for col in orders_df:<br/>    if is_unique(orders_df[col]):<br/>        del orders_df[col]<br/>        print("{} is deleted because it's redundant".format(col))</span></pre><p id="55ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">使每一笔采购成为一个单行</em> </strong></p><p id="43fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据是从MongoDB中提取的，有些列是JSON数据格式，整个数据类型将显示为字符串。为了改变这一点，使用<strong class="la iu"> json.loads </strong>将其转换为json，作为字典数据结构进行访问。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="5950" class="ng lv it nu b gy ny nz l oa ob">new_df = pd.DataFrame(columns=['_id', 'earned_points', 'visits_count', <br/>                               'business', 'brand', 'branch',<br/>       'customer', 'cashier', 'reference', 'products', 'payment_amount',<br/>       'price', 'final_price', 'transaction_type', 'purchased_at',<br/>       'created_at', 'updated_at'])<br/>new_list = []<br/>def get_product(row):<br/>    prod_js = json.loads(row['products'])<br/>    for p in prod_js:<br/>        row['products'] = p<br/>        vals = list(row.to_numpy())<br/>        new_list.append(vals)<br/>_ = orders_df.apply(lambda row: get_product(row), axis=1)</span><span id="edda" class="ng lv it nu b gy oc nz l oa ob">keys = ['_id', 'earned_points', 'visits_count', 'business', 'brand', 'branch',<br/>       'customer', 'cashier', 'reference', 'products', 'payment_amount',<br/>       'price', 'final_price', 'transaction_type', 'purchased_at',<br/>       'created_at', 'updated_at']  <br/>new_df = pd.DataFrame(new_list, columns=keys)</span><span id="8ce2" class="ng lv it nu b gy oc nz l oa ob">prod_id = new_df.apply(lambda row: row['products']['product']["$oid"], axis=1)<br/>quantity = new_df.apply(lambda row: row['products']['quantity'], axis=1)<br/>original_price = new_df.apply(lambda row: row['products']['original_price'], axis=1)<br/>final_price = new_df.apply(lambda row: row['products']['final_price'], axis=1)</span><span id="c0d0" class="ng lv it nu b gy oc nz l oa ob"># insert these product information to dataset<br/>new_df.insert(1, 'prod_final_price', final_price)<br/>new_df.insert(1, 'prod_original_price', original_price)<br/>new_df.insert(1, 'prod_quantity', quantity)<br/>new_df.insert(1, 'prod_id', prod_id)<br/>del new_df['products']<br/>del new_df['payment_amount']<br/>del new_df['price']</span></pre><p id="14d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">检查空值</em> </strong></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="c79f" class="ng lv it nu b gy ny nz l oa ob">final_df = pd.read_csv('data/final_with_new_unified_names.csv')</span><span id="17f5" class="ng lv it nu b gy oc nz l oa ob">pd.isna(final_df).any()</span></pre><p id="e8f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果有空值，要么删除它，要么替换它</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="f139" class="ng lv it nu b gy ny nz l oa ob">final_df[‘city_text’] = final_df[‘city_text’].fillna(‘unknown’)<br/>cities = [city.strip() for city in list(final_df[‘city_text’])]<br/>final_df[‘city_text’] = cities<br/>#final_df.to_csv(‘data/final_merged_single_item_orders.csv’,index=False)<br/># final_df.head()</span><span id="0879" class="ng lv it nu b gy oc nz l oa ob"># fill business - brand - cashier with 'unknown'<br/>final_df[['brand', 'business', 'cashier']] = final_df[['brand', 'business', 'cashier']].fillna(value="unknown")</span><span id="f902" class="ng lv it nu b gy oc nz l oa ob">final_df.columns</span></pre><p id="fb32" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更改任何没有意义的值</p><p id="6bb6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">删除异常值的功能</strong></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="a191" class="ng lv it nu b gy ny nz l oa ob"># def drop_outliers(df, field_name):<br/>#     distance = 6.0 * (np.percentile(df[field_name], 75) - np.percentile(df[field_name], 25))<br/>#     df.drop(df[df[field_name] &gt; distance + np.percentile(df[field_name], 75)].index, inplace=True)<br/>#     df.drop(df[df[field_name] &lt; np.percentile(df[field_name], 25) - distance].index, inplace=True)</span><span id="ed6f" class="ng lv it nu b gy oc nz l oa ob">def drop_outliers(df, field_name):<br/>    df_copy = df.copy()<br/>    Q1 = np.percentile(df[field_name].values,25)<br/>    Q2 = np.percentile(df[field_name].values,50)<br/>    Q3 = np.percentile(df[field_name].values,75)<br/>    IQR = Q3 - Q1    <br/>    lower_fence = Q1 - 1.5 * (IQR)<br/>    upper_fence = Q3 + 1.5 * (IQR)</span><span id="9c6f" class="ng lv it nu b gy oc nz l oa ob">print("lower_fence: ",lower_fence)<br/>    print("upper_fence: ",upper_fence)<br/>    <br/>    df_copy = df_copy[~((df_copy[field_name] &lt; lower_fence)|(df_copy[field_name]  &gt; upper_fence))]</span><span id="204b" class="ng lv it nu b gy oc nz l oa ob">return df_copy</span></pre><p id="6b9d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，商店数据、忠诚度数据、客户数据和其他可用数据集都有了很好的描述。</p><h2 id="83d1" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated"><strong class="ak"> EDA &amp;数据可视化</strong></h2><p id="bc0b" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">数据清理过程完成后，将对数据进行数据可视化和统计分析。通过单独的数据集来可视化分类数据是一个很好的做法。</p><p id="876a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在将从分析的数据中得出模式和见解。</p><p id="3a85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">客户分析| </em> </strong> <em class="mr">性别分布</em></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="fd6f" class="ng lv it nu b gy ny nz l oa ob">customers_data = final_df.drop_duplicates(['customer'])</span><span id="db75" class="ng lv it nu b gy oc nz l oa ob"># See the distribution of gender to recognize different distributions<br/>print(customers_data.groupby('gender')['gender'].count())<br/>chart = sns.countplot(x='gender', data=customers_data)<br/>chart.set_xlabel("Gender")<br/>chart.set_ylabel("Counts (Number of Orders)")<br/>plt.title('Distribution of Gender')</span></pre><p id="20d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这表明我们的数据集中有1711名女性和5094名男性</p><p id="c6f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直方图是发现每个属性分布的好方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/45d774cd9a8318979ace3e347df47cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ljw6KBg1bsOtbreOMiS4Xg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表1 —作者提供的照片</p></figure><p id="ddd7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">图表显示，男性顾客的比例略高于女性顾客。</p><p id="e553" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了获得更多信息，我们将根据注册年份对他们进行划分</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="0391" class="ng lv it nu b gy ny nz l oa ob">plt.figure(figsize=(9, 5))<br/>chart = sns.countplot(data = customers_data, x = 'year', hue = 'gender')<br/>chart.set_title('Membership Since Year Distibution By Gender', fontsize = 15, y = 1.02)<br/>chart.set_ylabel("Counts (Number of Orders)")<br/>chart.set_xlabel("Year")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/5c46ead03e27b3a75e72ceca77e2f470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b4hR107upjq_sTFmVGLvMg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表2 —作者照片</p></figure><p id="58ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">客户分析| </em> </strong>年龄分析</p><p id="ec61" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在年龄分析中，我们首先检查的是异常值<strong class="la iu">和</strong>，并发现了一些异常值，因此任何发现的异常值都从数据集中删除。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="6706" class="ng lv it nu b gy ny nz l oa ob">chart = sns.boxplot(x=final_df[‘cust_age’])<br/>chart.set_xlabel(“Customer Age”)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/39769a990fb6a28a6e6ee58b82e1286d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ayshkwsv7wR8YQtzyR2eFQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表3 —作者照片</p></figure><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="9748" class="ng lv it nu b gy ny nz l oa ob"># drop outliers<br/>final_df_without_outliers = drop_outliers(final_df, 'cust_age')</span><span id="35b8" class="ng lv it nu b gy oc nz l oa ob">chart = sns.boxplot(x=final_df_without_outliers.cust_age)<br/>chart.set_xlabel("Customer Age")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/9e3ed4d125c769620e528797c94e8b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IoDAjZJBOt_iukyRSo-__A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表4 —作者照片</p></figure><p id="eccb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下图所示，年龄范围在20到40岁之间。突出显示<strong class="la iu"> describe() </strong>调用结果的有效性。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="5511" class="ng lv it nu b gy ny nz l oa ob">feature = final_df_without_outliers['cust_age']<br/>sns.distplot(feature)<br/>plt.title('Normal Distribution of Customer Age', fontsize=15);<br/>plt.xlabel('Customer Age',fontsize=15)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/0691f89f8c97348583e7ec50ea48ab90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2ea3RES0_oE9XGmSKD68Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表5 —作者照片</p></figure><p id="7571" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">平均年龄为26岁。这表明，与其他群体相比，年轻人更喜欢咖啡。较长的右尾表明这种分布是右偏的。</p><p id="a9ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">统计与客户年龄相关的客户</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/019b85c06c4520cff65d082e951b51fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVBpY4hnL2hBu0AmhlzLXw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表6 —作者照片</p></figure><p id="038b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">消费习惯</em> </strong></p><p id="c84e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该图描述了女性比男性花费更多，尽管我们的女性用户较少。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/af112ba1c08ef200126bdf93f103e623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qifHthOxc-RFb1hOi3HlA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表7</p></figure><p id="2ed3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">【引用分析】| </em> </strong>按用户居住地排名前20的城市</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/f520ece739bfe258b6cba91ad51b2237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-fs66zuST0VQv-rBnHc3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表8 —作者照片</p></figure><p id="9ef7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">达曼</strong>的人咖啡消费量最高。</p><p id="2ad5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">引用分析| </em> </strong> <em class="mr">前20名活跃客户所在城市(最频繁最大订单数)</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/eef403d205b802b013cf06538b768590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AIgb37ABJRV5w8RyySBEJg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表9 —作者照片</p></figure><p id="12b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">可视化成对关系</em> </strong></p><p id="b7d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="mr">活跃客户重要变量之间的相关矩阵图</em></p><p id="18e0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相关性描述了两个变量之间的相似变化。当这种变化发生在同一个方向时，就被认为是正相关。如果变化发生在不同的方向，它被认为是负相关。</p><p id="b629" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简单来说，相关矩阵就是每一对属性之间的相关性。它可以绘制在图表上，以辨别几个变量之间的相关程度。</p><p id="5ab2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">了解这种计算是很有用的，因为如果数据中存在高度相关的输入变量，一些机器学习算法(如线性和逻辑回归)的性能可能会很差</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/ab5135a4ae523c4db83758081d7f4938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fUbCuBjZnfDIGzXYnUjhxQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">相关矩阵</p></figure><p id="815b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面，矩阵可以被看作是对称的，即矩阵的左下和右上是相同的。此外，它在一个图中显示相同数据的6个不同视图。还可以推断出，最强的相关变量在最终价格(总支出)和积分之间。这是一种正相关关系，客户在该数据集中获得的最终价格越高，他们的盈利点就越高。然而，其他变量没有这种相同的相关性。然而，它们提供了有用的信息，并且基于相同的基本原理工作。</p><p id="89a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">业务和产品分析</em> </strong></p><p id="127a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当审查平均价格的偏斜度时，可以推断出有少数昂贵的项目，但一般来说，价格属于一组。此外，负偏度意味着中位数低于平均值——这通常是由低价产品引起的。</p><p id="6b21" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">十大热门类别</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/39cdbfa22d28adbb7f6d5a8607ad3722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a-XGjE5jGZ_-akVtS4jolQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">产品描述—作者照片</p></figure><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="fba8" class="ng lv it nu b gy ny nz l oa ob">p_desc = product_desc.loc[product_desc['total_revenue'] &gt;= sorted(product_desc.total_revenue, reverse=True)[10]]<br/>sns.set_style('whitegrid')<br/>plt.rcParams['figure.dpi'] = 250<br/>chart = sns.scatterplot('counts', # Horizontal axis<br/>           'average_price', # Vertical axis<br/>           data=p_desc, # Data source<br/>           size = 10,<br/>           legend=False)</span><span id="55f8" class="ng lv it nu b gy oc nz l oa ob">chart.set_xlabel("Counts (Number of Orders)")<br/>chart.set_ylabel("Avg. Price")<br/>plt.title("Most Revenue Production 10 items")</span><span id="e231" class="ng lv it nu b gy oc nz l oa ob">for line in range(0, p_desc.shape[0]):<br/>    chart.text(p_desc.counts[line]+300, p_desc.average_price[line], <br/>             p_desc.index[line], verticalalignment='top', horizontalalignment='left', <br/>             size=5, color='black', weight='normal')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/6ba4eee5ff8731ef9bc1673da34cde1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdMFcWOyI1eOV9yRqT0otQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">十大产品—作者照片</p></figure><p id="7f09" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">订单分析</em> </strong></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="b15d" class="ng lv it nu b gy ny nz l oa ob">total_data = final_df.drop_duplicates(['_id'])</span><span id="08cf" class="ng lv it nu b gy oc nz l oa ob">import calendar<br/>calendar.setfirstweekday(calendar.SATURDAY)<br/>months_names = {i:calendar.month_name[i] for i in range(1,13)}<br/>total_data['month'] = total_data['month'].map(months_names)<br/>total_data.groupby(['month', 'year'])['customer'].count()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/2c9b6d7c8cc2485fe943bb71a15637f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7bqf8eb2hJrVnzQDR1BzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">每月分析-作者照片</p></figure><p id="a66a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如图所示，2020年4月记录了264笔销售，可以归类为2018年数据中的单一异常值。</p><p id="787a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">订单分析|年度</em> </strong></p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="5796" class="ng lv it nu b gy ny nz l oa ob">plt.figure(figsize=(13,8))<br/>chart = sns.countplot(x='year', hue='month', data=total_data)<br/>chart.set_xlabel("Year")<br/>chart.set_ylabel("Counts (Number of Orders)")<br/>plt.title('Distribution of Orders over Years with Months')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/5217eb1a763beb2cba0dab7e26e960ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXaubdpWUNo0uRz8btI9Sg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表11 —作者照片</p></figure><p id="17fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有，2019年5月销量大幅下滑。这种由疫情引起的下降从2020年初开始，到2020年4月急剧下降。</p><p id="d189" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">订单分析|月度</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/3da999fc1d5d6c2fc47235199ad0c80e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IU_f1dS5YYipdBe9TcPC-w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">订单_月刊—作者照片</p></figure><p id="81c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">订单分析|每周</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/ca6ca70862a4190363c02729749cf22a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZbQbA1nSs6-Z9DMXm_oVQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">订单_周刊—作者照片</p></figure><p id="9ccd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在沙特阿拉伯，周四和周五被视为周末。然而，星期五比星期四低得多。</p><p id="a270" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="mr">新冠肺炎·疫情对顾客行为(POS)的改变:</em></p><p id="cac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在分析了过去3个月沙特阿拉伯所有食品和饮料的统计数据并将其与我们的数据集输出进行比较后，我们发现了以下结果</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="9861" class="ng lv it nu b gy ny nz l oa ob">last_3_months_orders = total_data[(total_data['month'].isin(['January','February','March'])) &amp; \<br/>                                  (total_data['year'].isin(['2020']))]</span><span id="a338" class="ng lv it nu b gy oc nz l oa ob">last_3_months_orders_month_group = last_3_months_orders.groupby(['month', 'year']).agg({<br/>                    '_id': ['count'],<br/>                    'final_price':['sum']})</span><span id="7686" class="ng lv it nu b gy oc nz l oa ob">last_3_months_orders_month_group.columns = ['number_of_transactions', 'total_sales']<br/>last_3_months_orders_month_group = last_3_months_orders_month_group.reset_index()<br/>last_3_months_orders_month_group.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/29fe108b89dc8d90c98e90ac8c2e5cfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dhcCTfwtmfTWB3hMDPA5Bg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">过去3个月订单输出-作者提供的照片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/90a39f2e0893d4c5f3174bd3ca10b5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7In8Z_qDPl-Svz0m_Uc9Dw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SAMA统计—作者照片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/07f8144c26d5b7820b38e4a941414994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HUCtPvMltMfobdtQULtAMw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">stats _统计_输出—作者提供的照片</p></figure><p id="9d39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr"> RFM分析</em> </strong></p><p id="a3ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，我们将执行以下操作:</p><ul class=""><li id="04a1" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">对于最近，计算当前日期和每个客户的最后订单日期之间的天数。</li><li id="520b" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">对于频率，计算每个客户的订单数量。</li><li id="3187" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">对于货币，计算每个客户的购买价格的总和。</li></ul><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="9686" class="ng lv it nu b gy ny nz l oa ob"># Filter on Dammam city (the most active city)<br/>Dammam_orders_df = final_df[final_df['city_text']=='Dammam']</span><span id="cdd7" class="ng lv it nu b gy oc nz l oa ob"># present date<br/>PRESENT = dt.datetime.utcnow()<br/># print(PRESENT)<br/># print(Dammam_orders_df['created_at'].iloc[0])</span><span id="41f3" class="ng lv it nu b gy oc nz l oa ob">Dammam_orders_df['created_at'] = pd.DatetimeIndex(Dammam_orders_df['created_at']).tz_convert(None)</span><span id="2a3c" class="ng lv it nu b gy oc nz l oa ob"># drop duplicates<br/>Dammam_orders_df = Dammam_orders_df.drop_duplicates()</span><span id="5870" class="ng lv it nu b gy oc nz l oa ob"># Transform to proper datetime<br/>Dammam_orders_df['created_at'] = pd.to_datetime(Dammam_orders_df['created_at'])</span><span id="721e" class="ng lv it nu b gy oc nz l oa ob"># Remove records with no CustomerID<br/>Dammam_orders_df = Dammam_orders_df[~Dammam_orders_df['customer'].isna()]</span><span id="ae17" class="ng lv it nu b gy oc nz l oa ob"># Remove negative/0 prices<br/>Dammam_orders_df = Dammam_orders_df[Dammam_orders_df['final_price'] &gt; 0]</span><span id="997b" class="ng lv it nu b gy oc nz l oa ob">Dammam_rfm = Dammam_orders_df.groupby('customer').agg({<br/>                    'created_at': lambda date: (PRESENT - date.max()).days,<br/>                    '_id': lambda num: len(num),<br/>                    'final_price': lambda price: price.sum()})</span><span id="a1f1" class="ng lv it nu b gy oc nz l oa ob">Dammam_rfm.columns = ['Recency (days)','Frequency (times)','Monetary (CLV)']<br/>Dammam_rfm['Recency (days)'] = Dammam_rfm['Recency (days)'].astype(int)</span><span id="dad8" class="ng lv it nu b gy oc nz l oa ob">Dammam_rfm.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/029273abc5ea0d2cb189042f71aff9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSqP7rVyytXcx66D94T5Gg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">RFM _输出—作者提供的照片</p></figure><p id="8cc4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr"> RFM分析| </em> </strong>计算RFM值的分位数</p><p id="3bf9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">新近发生率、频率和金额最低的客户被视为顶级客户。</p><p id="91a4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> qcut() </strong>是基于分位数的离散化函数。qcut根据样本分位数对数据进行分类。例如，4个分位数的1000个值将产生一个分类对象，指示每个客户的分位数成员资格。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="c596" class="ng lv it nu b gy ny nz l oa ob">Dammam_rfm['r_quartile'] = Dammam_rfm['Recency (days)'].apply(lambda x: r_score(x))<br/>Dammam_rfm['f_quartile'] = Dammam_rfm['Frequency (times)'].apply(lambda x: fm_score(x, 'Frequency (times)'))<br/>Dammam_rfm['m_quartile'] = Dammam_rfm['Monetary (CLV)'].apply(lambda x: fm_score(x, 'Monetary (CLV)'))</span><span id="31f2" class="ng lv it nu b gy oc nz l oa ob">Dammam_rfm.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/98d3983253a41873286ab888dac585eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnTXHu4pcEk9mWIzPvlzzA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">qcut_output —作者提供的照片</p></figure><p id="2d72" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr"> RFM分析| </em> </strong> RFM结果解释<br/>将所有三个四分位数(r_quartile，f_quartile，m_quartile)组合在一列中，此排名将帮助您对客户进行细分。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="49d6" class="ng lv it nu b gy ny nz l oa ob">Dammam_rfm['RFM_Score'] = Dammam_rfm.r_quartile.map(str) + Dammam_rfm.f_quartile.map(str) + Dammam_rfm.m_quartile.map(str)</span><span id="4c39" class="ng lv it nu b gy oc nz l oa ob">Dammam_rfm.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/8bdfa0d79887fd39086d90418dcc3094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NI_pbMWMBsqCSdFX3U2AUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">combine _ output作者提供的照片</p></figure><p id="f0ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"><em class="mr">【RFM分析】| </em> </strong>筛选出顶级/最佳客户</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/292f7b29338f7954cabcf74d27a0e294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sXPRPhZ7LBkrdRQP4v2Bxw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">top5 —作者照片</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/c0952ac60cfeed95a791455951aed83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kRv0YVzm8QzAVW7zFXYahQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">top5_output —作者提供的照片</p></figure><p id="0cbf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">装置类型</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/467d051699d38b1a4bda41be9ddab378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qaKYuSdEmpFI7-NWdvBgTA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图表13 —作者照片</p></figure><p id="5cc7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Nuggtah似乎更受IOS用户的欢迎，尽管它分布在沙特阿拉伯</p><h2 id="ac4c" class="ng lv it bd lw nh ni dn ma nj nk dp me lh nl nm mg ll nn no mi lp np nq mk nr bi translated"><strong class="ak">解决方案</strong></h2><p id="fd77" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">机器学习主要建立在进行预测和分类的概念上。然而，要理解的最重要的事情是，它不是关于一个方法有多奇特，而是它与测试数据的兼容性。</p><p id="e47f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">预测时，只选择预测结果所需的最重要的属性是至关重要的。此外，必须选择适当的ML方法。关于客户讨论，建议以下建议:</p><p id="17e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">推荐</strong>和<strong class="la iu">客户细分</strong> of <strong class="la iu"> </strong>忠诚度活动，如奖金奖励、积分充值、免费等级升级，以及专门优化的奖励计划，以提高收入和投资回报率。因此，对客户进行了细分，以发现最佳群体。</p><p id="6698" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">细分</strong>对于大规模个性化至关重要。此外，该系统应该分析与其他用户没有直接关联但在搜索和购买模式中共享相同标准的<strong class="la iu">志同道合的</strong>用户的数据(借助于ML算法来提供更多细节并显示用户简档之间的相似性)。</p><p id="3ba1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">销售预测</strong>可以用来预测未来的销售量。通过进一步分析，可以推导出单店销售额、品类销售额、产品销售额等数据。</p><p id="62f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">终身价值预测</strong>可用于根据细分客户和行为模式识别最合适的客户。</p><p id="bf69" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">流失预测</strong>可用于确定特定时期内的流失量。</p><p id="7282" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">最后一步:设计预测模型</em> </strong></p><ul class=""><li id="666f" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">估计系数</li><li id="1d0f" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">设计模型</li><li id="1528" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">进行预测并存储结果。</li><li id="eb16" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">分析模型</li><li id="0f67" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><em class="mr">初始化随机数发生器</em></li></ul><p id="f99c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">继续将随机数发生器初始化为固定值(7)。</p><p id="9470" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这一步对于保证这个模型的结果可以再次被复制是至关重要的。它还确保训练神经网络模型的随机过程可以被复制。</p><h1 id="94a0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated"><strong class="ak">结论</strong></h1><p id="18ba" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">有了正确的数据，个性化是可以实现的。今天，中小型企业不需要一个大型的分析师或营销人员团队来预测客户行为和趋势。</p><p id="b8b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">细分可以帮助企业识别正确的客户，并在正确的时间向他们发送正确的信息。</p></div><div class="ab cl ou ov hx ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="im in io ip iq"><h1 id="68b6" class="lu lv it bd lw lx pb lz ma mb pc md me jz pd ka mg kc pe kd mi kf pf kg mk ml bi translated"><strong class="ak">资源</strong></h1><p id="7bee" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">名称:作为商业模式的推荐系统</em> </strong></p><ul class=""><li id="7530" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">角色:进行订单/交易的用户。</li><li id="d5a1" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">描述:提供建议并捕捉用户之间的关系。</li><li id="a273" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">利用显性和隐性特征/模式以及用户之间的关系来构建一个好的推荐系统的最佳方法之一是<a class="ae pg" href="https://drive.google.com/file/d/1nmYa2ZY9wcFcw6IUMs4X56-8SJC5MAaw/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">多方面的协作过滤模型</a>，本演示对此进行了清晰的描述。</li><li id="33b6" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">演示文稿包含所有需要的信息(问题、愿景、技术、使用的<a class="ae pg" href="https://www.kaggle.com/netflix-inc/netflix-prize-data" rel="noopener ugc nofollow" target="_blank">数据集</a>和评估)。</li></ul><p id="461a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">名称:采购预测模型</em> </strong></p><ul class=""><li id="2919" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">角色:店主。</li><li id="abb1" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">描述:预测用户下一个订单中的下一个购买产品</li><li id="8b04" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">数据集:关于“<a class="ae pg" href="https://www.kaggle.com/c/instacart-market-basket-analysis/" rel="noopener ugc nofollow" target="_blank">如何赢得数据科学竞赛</a>”的Kaggle期末项目</li></ul><p id="ff8e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">名称:未来销售预测模型</em> </strong></p><ul class=""><li id="3ee6" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated">角色:店主。</li><li id="faca" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">描述:预测特定商店的未来销售额。</li><li id="2945" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated">数据集:一个叫做(<a class="ae pg" href="https://www.kaggle.com/c/competitive-data-science-predict-future-sales" rel="noopener ugc nofollow" target="_blank"> Instacart市场篮子分析</a>)的Kaggle竞赛</li></ul><p id="c5be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="mr">走向数据科学篇</em> </strong></p><ul class=""><li id="f172" class="ms mt it la b lb lc le lf lh mu ll mv lp mw lt mx my mz na bi translated"><a class="ae pg" rel="noopener" target="_blank" href="/clustering-algorithms-for-customer-segmentation-af637c6830ac">客户细分的聚类算法</a></li><li id="4567" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><a class="ae pg" rel="noopener" target="_blank" href="/find-your-best-customers-with-customer-segmentation-in-python-61d602f9eee6">利用Python中的客户细分找到您的最佳客户</a></li><li id="e110" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><a class="ae pg" rel="noopener" target="_blank" href="/customer-segmentation-analysis-with-python-6afa16a38d9e">使用Python进行客户细分分析</a></li><li id="4c58" class="ms mt it la b lb nb le nc lh nd ll ne lp nf lt mx my mz na bi translated"><a class="ae pg" rel="noopener" target="_blank" href="/data-driven-growth-with-python-part-2-customer-segmentation-5c019d150444">客户细分</a></li></ul></div></div>    
</body>
</html>