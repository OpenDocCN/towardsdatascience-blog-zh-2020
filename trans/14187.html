<html>
<head>
<title>Tracking Dyson’s Public Image Using 46,166 Tweets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用46，166条推文追踪戴森的公众形象</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tracking-dysons-public-image-using-46-166-tweets-68af509923a6?source=collection_archive---------23-----------------------#2020-09-30">https://towardsdatascience.com/tracking-dysons-public-image-using-46-166-tweets-68af509923a6?source=collection_archive---------23-----------------------#2020-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cabd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Google自然语言API和BigQuery的一课</h2></div><p id="1962" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">*这项工作是个人项目，与戴森没有任何关系*</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/97fb8ba749d462947d6e8df2e7b594c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1b-Zvsd54sg1YwjfptQbw.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">作者图片</p></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="99e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个项目开始于新冠肺炎，就像现在所有的事情一样。鉴于我天赋的空闲时间，我决定唯一合理的方式就是编程。作为戴森学院的一名本科生，我认为看看公众如何看待更广泛的公司会很有趣。因此，带着价值300英镑的免费谷歌云积分，我决定尝试一下。</p><p id="30c9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">碰巧的是，我让我完成的代码运行的那一周是公司历史上裁员最多的一周。这并不意味着要轻视成百上千失去工作的人，它最终成为了这个项目的完美测试环境，并产生了一些非常有趣的结果。如果你不关心我是如何完成这项工作的，请跳到最后查看结果的分类。</p><p id="7adf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我，以我无穷的智慧，决定将这个项目命名为“戴森-泰蒙特”。</p><h2 id="a1e4" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">项目概述</h2><p id="92e8" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">我在这里的目标是建立一个谷歌云项目，捕获所有包含“Dyson”一词的推文，进行一些基本的情感分析，并最终将其放入BigQuery数据库。主要的Python应用程序将是一个Docker容器，可以轻松可靠地部署到虚拟机上。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/e3371f0f502cd4755b9bbbae8786f32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*QCZwRnjzHQ5TU7_X1TNJbw.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">Dyson-timent的逻辑架构(图片由作者提供)</p></figure><p id="30c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如你所看到的，即使是这样一个小项目，也有很多活动的部分。该图还遗漏了Google Secret Manager，我用它来存储我所有的Twitter API密钥。</p><p id="bcda" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从VM实例到BigQuery数据库获取Tweet数据的管道是使用数据流模板建立的。Python应用程序将Tweet数据(作为JSON)发布到Pub/Sub主题，然后数据流为我处理导入到BigQuery的操作。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi my"><img src="../Images/b26a89e4e035065cd1a5d78d3956d5dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XOUTHT4qWfioA3Ea7uuBPg.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">使用数据流模板抽象出数据处理任务(图片由作者提供)</p></figure><p id="5f7e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用这样的模板大大降低了我这边的复杂性，使我能够专注于项目的其余部分。这是使用IAAS提供商的众多卖点之一——他们带走了大量无聊的任务并进行设置。</p><p id="ad11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谷歌主机说够了，我们来说代码。</p><h1 id="85ef" class="mz ma iq bd mb na nb nc me nd ne nf mh jw ng jx mk jz nh ka mn kc ni kd mq nj bi translated">代码</h1><p id="2393" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">对于项目的复杂性来说，代码本身实际上并不复杂，因为大部分繁重的工作都是由Google的API处理的。我们所要做的就是调用它们，这是在Python中使用各种Google Cloud包完成的，这些包都是使用pip简单安装的。</p><h2 id="25db" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">谷歌云凭据</h2><p id="c586" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">因为我希望在云中的Docker容器中运行之前能够在本地运行，所以我需要一种方法来处理两种不同的获取云凭证的方法。当应用程序启动时，它会寻找一个环境变量<code class="fe nk nl nm nn b">AM_I_IN_A_DOCKER_CONTAINER</code> <em class="no">。</em>这个变量是在docker文件中设置的，所以如果Python找到了它，应用程序肯定知道它正在云中运行，并相应地设置自己。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="np nq l"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">检测代码是否正在云中运行的策略</p></figure><p id="2ba0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在云中运行时，所有凭证都由VM实例自动处理。在本地运行时，我使用从Google Cloud IAM下载的服务帐户凭证文件(上面的第16行),并将其传递给我所有的云服务。</p><h2 id="63fb" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">Twitter流媒体</h2><p id="1761" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">设置Twitter流非常简单，因为<a class="ae ly" href="http://docs.tweepy.org/en/latest/streaming_how_to.html#:~:text=Tweepy%20makes%20it%20easier%20to%20use%20the%20twitter,with%20Tweepy%20by%20offering%20a%20first%20walk%20through." rel="noopener ugc nofollow" target="_blank">文档</a>非常棒。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="np nq l"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">与Twitter流相关的代码</p></figure><p id="ce27" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我简单地建立了一个<code class="fe nk nl nm nn b">StreamListener</code>-继承类，如图所示，给了<code class="fe nk nl nm nn b">OAuthHandler</code>我的API密钥和令牌，并把它们全部传递给了一个<code class="fe nk nl nm nn b">Stream</code> <em class="no">。</em>然后通过向流传递一个<code class="fe nk nl nm nn b">tracklist</code>来过滤流，它只是一个搜索字符串列表——在我们的例子中是<em class="no"> </em> <code class="fe nk nl nm nn b">[‘#Dyson’, ‘Dyson’]</code>。</p><p id="fbab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这不是一个完美的解决方案，因为搜索不够智能，无法排除任何与詹姆斯·戴森或该公司无关的“戴森”的提及。然而，我的假设是，大多数包含“戴森”的推文将与我们相关。</p><p id="bbfc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，任何包含单词“Dyson”的Tweets都出现在<code class="fe nk nl nm nn b">Listener</code> <em class="no"> </em>类的<em class="no"> </em> <code class="fe nk nl nm nn b">on_data()</code> <em class="no"> </em>方法中，在这里我们可以对它们做一些有趣的事情。</p><p id="884d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是传入的Tweets从字符串解析成JSON后的样子。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/f34bc1a8d3271382d6beb532ef5c3b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*LhCiqEc0WDzrmmyqwqCHog.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">Python应用程序在调试中捕获的推文(作者截图)</p></figure><p id="542b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如你所见，仅仅一条推文就包含了大量的数据。我最终提取的字段只有<code class="fe nk nl nm nn b">created_at</code>、<code class="fe nk nl nm nn b">id_str</code>、<code class="fe nk nl nm nn b">text</code>、<code class="fe nk nl nm nn b">user<em class="no">.</em>location </code>和<code class="fe nk nl nm nn b">lang</code>。这些给了我大量有价值的信息。</p><h2 id="2ad6" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">自然语言API</h2><p id="933c" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">在这个阶段，我们有来自Tweet的相关字段。现在开始处理。我写了一个小函数，<code class="fe nk nl nm nn b">analyse_sentiment</code>使用他们的<a class="ae ly" href="https://pypi.org/project/google-cloud-natural-language/" rel="noopener ugc nofollow" target="_blank"> Python包</a>将Tweet文本和语言代码发送给<a class="ae ly" href="https://cloud.google.com/natural-language/#natural-language-api-demo" rel="noopener ugc nofollow" target="_blank">云自然语言API </a>。</p><p id="c599" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为来自Twitter的语言代码包含在我对自然语言API的调用中，它可以分析世界上几乎任何语言的推文！我们不局限于简单的古英语。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="np nq l"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">从自然语言API中获取文本并计算和返回情感的函数</p></figure><p id="5366" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我喜欢现代云技术的另一个原因；你可以在一行代码(第7行)中完成非常复杂的事情，比如语言处理，只需要进入Google预先训练好的ML模型。</p><p id="a69a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我使用的API端点最终返回两个值:情绪和信心。情绪从-1到+1排列，其中+1表示非常积极，而-1表示非常消极。置信度从0到1排序，并表示ML模型对情感分数正确的“确信”程度。</p><p id="c56d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我做了一个(无可否认是武断的)决定，丢弃任何置信度低于0.1的推文，希望提高最终数据的质量。</p><h2 id="dbeb" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">谷歌地图API</h2><p id="e57a" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">我从推文中提取的另一个非常有价值的数据是用户的位置。现在我必须承认，做这一切感觉非常老大哥。但是我做这些事是为了一个好的理由——我自己的好奇心。</p><p id="3880" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nk nl nm nn b">user.location</code>字段似乎由Twitter用户的输入填充，因为它的格式不一致。推文无所不包，从胡言乱语到“美国”到“苏格兰东海岸”。因此，这使得很难转换到适合分析的特定GPS坐标。</p><p id="1c39" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我又一次被谷歌API的魔力所拯救。Google Maps API本质上允许您在API调用中进行Google Maps搜索。这是非常有用的，因为G-Maps擅长于获取模糊的地名，并给它们分配一个精确的GPS坐标。</p><p id="b4c3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与<code class="fe nk nl nm nn b">analyse_sentiment</code>方法类似，我创建了一个<code class="fe nk nl nm nn b">place_search</code> <em class="no"> </em>函数，它获取用户模糊的地名，将其提供给Google Maps，并将返回的纬度/经度数据转换为BigQuery理解为位置数据的形式(我们并没有忘记这些数据最终会出现在哪里！).</p><p id="00ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种格式就是“<a class="ae ly" href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" rel="noopener ugc nofollow" target="_blank">众所周知的文本表示</a>”(由此而来的<code class="fe nk nl nm nn b">wkt_loc</code>)。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="c9bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样一来，剩下唯一要做的事情就是发送一个包含所有情绪和位置数据的JSON字符串到Pub/Sub主题！</p><p id="9221" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这显然不是全部代码，但是这篇文章越来越长了。完整的代码，请查看我的GitHub repo。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="e339" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从细节上退一步。</p><p id="623a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在有代码可以通过关键字/短语来传输和过滤推文，确定推文的情绪是积极还是消极，确定推文来源的一组合理的GPS坐标，然后将其发送并存储在数据库中。</p><p id="b32a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我觉得这太酷了。</p><h1 id="a2e9" class="mz ma iq bd mb na nb nc me nd ne nf mh jw ng jx mk jz nh ka mn kc ni kd mq nj bi translated">完成了！</h1><p id="01ec" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">代码完成后，就可以部署到容器优化的计算引擎上了。因为我只做了一次，所以我使用云控制台用我的项目的最新Docker构建来启动一个VM实例。于是，在2020年7月18日，它开始运行。</p><p id="16d7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对我的工作感到满意，我让它大部分时间在后台运行，时不时地回来检查错误，以确保我没有太快用完我的谷歌云积分(我就是这样)。</p><p id="9c07" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在7月23日，<a class="ae ly" href="https://www.bbc.co.uk/news/business-53517243" rel="noopener ugc nofollow" target="_blank">戴森宣布，由于新冠肺炎</a>的影响，它将裁员900多人。这个项目通过Twitter捕捉到了所有这些。</p><p id="ba40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">经过整整8天的监控，以及BigQuery中处理和呈现的超过46，000条推文，当我只剩下最后50个信用点时，我终于决定拔掉插头。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ns"><img src="../Images/16f674fcbc5faf172112dc3053d26a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mf46mkcCtA_zZXn8Xq9ttA.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">46166条推文(作者截图)</p></figure><p id="e299" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是时候通过开放数据来看看这一切是否值得了。</p><h2 id="82f8" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">数据</h2><p id="d953" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">啊，我们期待已久的时刻。如果你是从上往下跳的，请再打个招呼。</p><p id="8aef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着数千条推文在我的BigQuery数据库中烧出一个洞，我开始分析数据。为此，我做了一个Google Data Studio项目，因为它非常容易与BigQuery交互，并且可以生成非常好看的web报告。</p><p id="e0c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先要做的是查看平均情绪和一段时间内推文数量的图表。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nt"><img src="../Images/e5c3d43675195b65e4c3532612a68966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-fq5Zhhyo_np2yEyHTBSBw.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">数据！请看相关的<a class="ae ly" href="https://datastudio.google.com/reporting/a813866d-8df3-4691-a89b-b3e1e8386b50" rel="noopener ugc nofollow" target="_blank">数据工作室项目</a>(图片由作者提供)</p></figure><p id="03eb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你能看看那个吗？在大多数日子里，平均情绪徘徊在0.1至0.3之间，我们可以将其解释为总体积极的情绪。</p><p id="4edb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，在裁员的那天(23日),人气大幅下滑至-0.2！这清楚地表明代码正在工作！</p><p id="5ef4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不过，从24日开始，我们看到未来两天将出现大幅反弹，创下新高。推文数量也出现了大幅增长。这是为什么？？我想不通。</p><p id="36c7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我拥有的最后一点数据是每条推文的来源位置。我在我的Data Studio项目中设置了一个Google Maps visualiser，用于查询数据库中的所有内容。点的颜色基于情感，其中-1是深红色，0是灰色，+1是绿色。让我们来看看。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nu"><img src="../Images/ad3bc54a3487acdfdf2e301b6c3b2973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeaAhn7_SZSemw-MY55aHA.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">每条推文的位置。红色是阴性，灰色是中性，绿色是阳性(图片由作者提供)</p></figure><p id="6cdc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们来剖析一下这个。大多数推文来自英国、美国和日本。戴森在所有这些国家都有很强的影响力，所以这是意料之中的。</p><p id="27d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">日本有着压倒性的积极情绪，整个国家都是绿色的。相比之下，英国似乎大多是红色和中性。典型的英国人，总是消极的。</p><p id="576b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这显示了每天的所有数据，所以让我们在这里按日期深入查看。下面的gif循环显示每天的信息。顶部的滑块告诉你它在7月的哪一天上映。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nv"><img src="../Images/c5f6244e6c288468ae97af0bdc373ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EsH-k72Fl_N5pCv9p1fP_g.gif"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">按日期分类的推文(按作者分类的图片)</p></figure><p id="36e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很酷吧。</p><p id="1b0f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了23号——宣布裁员的那一天，英国每天的情况都很复杂。全球似乎也普遍存在负面影响。</p><p id="c658" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看看日本的反应，我们得到了24日和25日积极反弹的线索。日本总是非常绿色，但在那些日子里，它明显更密集的推文。</p><blockquote class="nw"><p id="f53e" class="nx ny iq bd nz oa ob oc od oe of la dk translated">24日日本发生了什么让大家这么积极？！</p></blockquote><p id="bef5" class="pw-post-body-paragraph kf kg iq kh b ki og jr kk kl oh ju kn ko oi kq kr ks oj ku kv kw ok ky kz la ij bi translated">我在Twitter上搜索7月24日包含“Dyson”一词的日文推文。你瞧，我发现了下面的推文。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/03462d520610d3e6b8f0c215651c5d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*vkjAvzpiGTptnlRmKJhGMQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">导致推文数量激增的推文(作者截图)</p></figure><p id="0a0d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">21800条转发？！这几乎是我收集的所有推文的一半！推特上说了什么？我用谷歌翻译了一下。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi om"><img src="../Images/14e724598248222195b707bd67118e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*Ey2u3mkw3Lh7vAhDCSqZYg.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">(作者截图)</p></figure><p id="4d50" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谜团解开了！日本大型家用电器公司山田电机(Yamada Denki)向一名转发并关注其Twitter账户的幸运儿赠送了一台新的戴森吸尘器。该项目一定收集了每一条转发，以及由此引发的所有其他推文。</p><p id="6905" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事实上，让我们找到更多的证据。我会在地图上搜索24号和25号之间的“yamada”这个词。根据推特，有21800人转发了这条微博。我们的数据库里应该有类似的数字。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi on"><img src="../Images/f880dfa5b29bb2b7bbd0b14f29a67fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*natDuyZrJsnl_zQiigStBQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">在互动地图中搜索山田(图片由作者提供)</p></figure><p id="5f70" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">20700条推文，还不错！在这一点上，这似乎是非常确凿的，你不同意吗？</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h2 id="6528" class="lz ma iq bd mb mc md dn me mf mg dp mh ko mi mj mk ks ml mm mn kw mo mp mq mr bi translated">总之…</h2><p id="c732" class="pw-post-body-paragraph kf kg iq kh b ki ms jr kk kl mt ju kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">对于基于云的项目来说，Google Cloud是一个非常有价值的工具。易于访问的API和tick-box环境设置极大地减少了您需要做的(从根本上)非常复杂的工作，如情感分析。即使对我这样的初学者来说。</p><p id="80d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你觉得这很有趣，甚至可能启发你做一个类似的项目！</p><blockquote class="oo op oq"><p id="31cf" class="kf kg no kh b ki kj jr kk kl km ju kn or kp kq kr os kt ku kv ot kx ky kz la ij bi translated">如果你想玩交互式地图，请查看我的<a class="ae ly" href="https://datastudio.google.com/reporting/a813866d-8df3-4691-a89b-b3e1e8386b50" rel="noopener ugc nofollow" target="_blank">数据工作室项目</a></p><p id="b0e9" class="kf kg no kh b ki kj jr kk kl km ju kn or kp kq kr os kt ku kv ot kx ky kz la ij bi translated">完整代码见<a class="ae ly" href="https://github.com/ethanr-2000/dysontiment" rel="noopener ugc nofollow" target="_blank">我的GitHub repo </a>。</p></blockquote></div></div>    
</body>
</html>