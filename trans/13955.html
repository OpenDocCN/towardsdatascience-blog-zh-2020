<html>
<head>
<title>Virtual steering wheel with JavaScript and PoseNet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript和PoseNet的虚拟方向盘</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/virtual-steering-wheel-with-javascript-and-posenet-12439712a68?source=collection_archive---------34-----------------------#2020-09-25">https://towardsdatascience.com/virtual-steering-wheel-with-javascript-and-posenet-12439712a68?source=collection_archive---------34-----------------------#2020-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e8b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl"/><strong class="jp ir"><em class="kl">的力量深度学习</em> </strong> <em class="kl">架构和方便的</em><strong class="jp ir"><em class="kl">tensor flow . js</em></strong><em class="kl">库允许我们创建有趣的应用程序，改变我们与计算机的交互方式。在这种情况下，我们使用姿势估计神经网络来基于手腕的位置创建一个</em> <strong class="jp ir"> <em class="kl">虚拟方向盘</em> </strong> <em class="kl">。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/f5c3e413225b7da0953e231ddf4c9d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5loaiHCQ5dj3HqGj"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">XR Expo 在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="3071" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">介绍</h1><p id="5cd8" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在这个项目中，我将展示一个web应用程序和深度学习模型之间的集成示例，以将应用程序控制从鼠标和键盘转移到人体。</p><p id="b892" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，我创建了一个虚拟方向盘来在高速公路上驾驶车辆。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/60268fdf8be4f150cd41250003bf522c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*uTgeDNtKFSEUc73BKyMQ4A.gif"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">视频截图来自<a class="ae lc" href="https://github.com/MCarlomagno/CarDrivingResNet/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> Github自述</a> |作者gif</p></figure><h1 id="1602" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">它是如何工作的</h1><h2 id="4d8f" class="mh le iq bd lf mi mj dn lj mk ml dp ln jy mm mn lr kc mo mp lv kg mq mr lz ms bi translated">摘要</h2><p id="b5b0" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">利用手腕的坐标，我们可以计算它们之间的线段，然后计算它与水平轴形成的角度，如果这个角度大于25°或小于-25°，那么车辆将分别向左或向右转弯。</p><h2 id="4272" class="mh le iq bd lf mi mj dn lj mk ml dp ln jy mm mn lr kc mo mp lv kg mq mr lz ms bi translated">利用PoseNet CNN检测手的位置</h2><p id="c016" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">PoseNet包包含一个独立的机器学习模型，用于使用<strong class="jp ir"> TensorFlow.js </strong>在浏览器中运行<strong class="jp ir">实时姿态估计</strong>。</p><p id="4bb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PoseNet可以用于估计<strong class="jp ir">单个姿态</strong>或<strong class="jp ir">多个姿态</strong>，这意味着有一个版本的算法只能检测图像/视频中的<strong class="jp ir">一个人</strong>，还有一个版本可以检测图像/视频中的<strong class="jp ir">多人</strong>。在这种情况下，我们将使用单人算法。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mt"><img src="../Images/c2c7480d1e353a761bf14262a8f391a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hUD9dpf-U9U5nAUk3wgk0A.gif"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">图片由<a class="ae lc" href="https://www.danioved.com/" rel="noopener ugc nofollow" target="_blank"> Dan在浏览器中用TensorFlow.js </a>从<a class="ae lc" href="https://medium.com/tensorflow/real-time-human-pose-estimation-in-the-browser-with-tensorflow-js-7dd0bc881cd5" rel="noopener">实时人体姿态估计中移除</a></p></figure><p id="443f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该模型接收来自摄像机的图像，并因此返回身体每个部分的位置及其坐标的数组。</p><p id="0f9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的例子中，我们只需要手腕的位置来驾驶汽车和绘制“方向盘”。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="df98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们在代码中看到的，结果给了我们坐标与手在<strong class="jp ir"><em class="kl">【x，y】</em></strong>变量中的位置。</p><p id="dfa2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lc" href="https://github.com/tensorflow/tfjs-models/tree/master/posenet" rel="noopener ugc nofollow" target="_blank">更多关于波森特</a>的信息。</p><h2 id="0689" class="mh le iq bd lf mi mj dn lj mk ml dp ln jy mm mn lr kc mo mp lv kg mq mr lz ms bi translated">用代数来模拟方向盘</h2><p id="9909" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">让我们开始思考，如果车辆应该向左、<strong class="jp ir">向右</strong>转向<strong class="jp ir">或保持直线行驶</strong>，需要考虑哪些条件。</p><p id="d28d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们想到方向盘时，很容易想象在每种情况下方向盘的位置是什么样子。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mw"><img src="../Images/d406f9833b795a864f41b198f05e4efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RdOr7mfN17sIUpwvODK9sg.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">三种可能状态的表示|作者图片</p></figure><p id="05c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们看到图像，我们可以看到手与水平轴之间的线段所形成的<strong class="jp ir">角度是检测实际状态的一个很好的方法，例如，如果右手在左手上方(形成一个正角度)，那么车辆应该左转。</strong></p><p id="6117" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也可以使用垂直距离，但这不是最通用的，因为它与人相对于摄像机的位置成比例。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mx"><img src="../Images/37c33f9cdefc090535cfe6b75f102f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEL4GyM0bHJd5nVNv8-lyA.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">其中α (alpha)是作者用手形成的线段和横轴|图像之间的角度</p></figure><h2 id="9e02" class="mh le iq bd lf mi mj dn lj mk ml dp ln jy mm mn lr kc mo mp lv kg mq mr lz ms bi translated">改变状态的角度限制</h2><p id="365c" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">一旦我们确定改变状态的条件是基于角度，我们必须确定从一个状态改变到另一个状态的极限。</p><p id="97e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过一些实验后，我发现(-25，25)是一个很好的范围，可以确定车辆是左转、右转还是保持直线行驶。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi my"><img src="../Images/d61178aeb8c07762b9751ae320bafe81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N1raCW3om7GeyzueQL0Ggw.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">状态变化的角度限制，avobe 25左转，25°以下右转，在[-25，25 ]范围内保持直线|图片由作者提供</p></figure><h2 id="e04e" class="mh le iq bd lf mi mj dn lj mk ml dp ln jy mm mn lr kc mo mp lv kg mq mr lz ms bi translated">计算角度</h2><p id="dc6f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">使用一些代数，我们可以很容易地获得手形成的线段和横轴之间的角度，如下所示。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="b0dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们有了角度，我们就可以更新应用程序状态来改变汽车控制的方向。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mu mv l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">这段代码可能不是最理想的，但是这里的想法是展示它是如何工作的</p></figure><h1 id="759e" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="646d" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这只是一个简单的例子，说明我们可以在浏览器中使用这些机器学习库做什么，但它增加了各种各样新的酷功能和与网页交互的方式。</p><p id="72d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您对这项技术的其他好的用途有想法，我邀请您开发并展示它们。</p><p id="741c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们建造的一切我们认为有价值的东西都值得展示😉</p><blockquote class="mz na nb"><p id="25e0" class="jn jo kl jp b jq jr js jt ju jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj kk ij bi translated"><strong class="jp ir"> Github回购:</strong><a class="ae lc" href="https://github.com/MCarlomagno/CarDrivingResNet" rel="noopener ugc nofollow" target="_blank">https://github.com/MCarlomagno/CarDrivingResNet</a></p></blockquote></div></div>    
</body>
</html>