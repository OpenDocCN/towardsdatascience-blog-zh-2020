<html>
<head>
<title>A Data Warehouse Implementation on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的数据仓库实现</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-data-warehouse-implementation-on-aws-a96d0e251abd?source=collection_archive---------8-----------------------#2020-09-21">https://towardsdatascience.com/a-data-warehouse-implementation-on-aws-a96d0e251abd?source=collection_archive---------8-----------------------#2020-09-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="48a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用AWS S3、AWS胶水、DBT和AWS红移的实现</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/87e58ce2ae176c4e2b3bc4c2bc359f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lr0L5188AWyrq7JE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚历克斯·库利科夫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e0c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的帖子中，我一直在谈论数据仓库，它们的基本架构，以及一些可以帮助您构建数据仓库的基本原则。今天，我想向您展示<strong class="lb iu">基于几个月前进行的案例研究<strong class="lb iu">在AWS </strong>上实现数据仓库。</strong></p><p id="f390" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个实现使用AWS S3作为数据湖(DL)。AWS粘合为数据目录。以及AWS红移和红移谱作为数据仓库(DW)。</p><blockquote class="lv lw lx"><p id="45a5" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">注意:如果你不熟悉我在这里使用的一些术语和概念，这篇文章可能会令人困惑。关于这些术语和概念的更多信息，我建议你看一看其他涉及这些主题的帖子。</p></blockquote><div class="mc md gp gr me mf"><a rel="noopener follow" target="_blank" href="/what-is-a-data-warehouse-basic-architecture-ea2cd12c9bb0"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">什么是数据仓库:基本架构</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">数据仓库主要概念介绍</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">towardsdatascience.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt ks mf"/></div></div></a></div><div class="mc md gp gr me mf"><a rel="noopener follow" target="_blank" href="/building-a-data-warehouse-basic-architectural-principles-66bd7059ffd0"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">构建数据仓库:基本架构原则</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">一种简化数据仓库的方法</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">towardsdatascience.com</p></div></div><div class="mo l"><div class="mu l mq mr ms mo mt ks mf"/></div></div></a></div><div class="mc md gp gr me mf"><a rel="noopener follow" target="_blank" href="/building-a-data-warehouse-pipeline-basic-concepts-roadmap-d14032890ab6"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">构建数据仓库管道:基本概念和路线图</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">提高数据管道可操作性和性能的五个过程</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">towardsdatascience.com</p></div></div><div class="mo l"><div class="mv l mq mr ms mo mt ks mf"/></div></div></a></div></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="ad9e" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">体系结构</h1><p id="1a38" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">该实施中遵循的架构基于ELT流程。首先，从数据源中提取数据，然后加载到数据湖中，最后在数据仓库中进行转换。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/ad16973e7f78a6fa7655e54e28c766fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6i-Ss3VkvUhhkBvx.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个数据仓库体系结构的抽象——作者举例说明</p></figure><p id="c9ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章中提到的实现是基于几个月前的一个案例研究——更多信息请查看这篇<a class="ae ky" rel="noopener" target="_blank" href="/building-a-data-warehouse-basic-architectural-principles-66bd7059ffd0">文章</a>。架构看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/ceae876b23055b61ee7b5e885ddac70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mIDaizbhJBAAos5xkuGnQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">自动气象站中的数据仓库架构——作者举例说明</p></figure><p id="527d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它使用AWS S3作为DL。AWS粘合为数据目录。而AWS的红移和红移谱作为DW。</p><p id="a221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，它使用Apache Spark进行数据提取，使用Airflow作为编排器，使用Metabase作为BI工具。但是，特别是对于这个职位，范围仅限于<strong class="lb iu">DL和DW </strong>的实施。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="cd65" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">数据湖</h1><p id="459a" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">这个案例研究的第一部分是数据湖。</p><blockquote class="ob"><p id="0ed1" class="oc od it bd oe of og oh oi oj ok lu dk translated">数据湖是存储来自多个来源的数据的存储库。它允许处理结构化和非结构化数据。</p></blockquote><p id="d1d4" class="pw-post-body-paragraph kz la it lb b lc ol ju le lf om jx lh li on lk ll lm oo lo lp lq op ls lt lu im bi translated">在这个案例研究中，数据湖被用作允许集中所有不同数据源的临时区域。</p><p id="e353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">来自这些来源的数据以其原始格式存储。在将数据加载到数据湖之前，不涉及任何转换过程。所以，可以认为是一个<strong class="lb iu">不可改变的集结地</strong>。</p><h2 id="de0f" class="oq ne it bd nf or os dn nj ot ou dp nn li ov ow np lm ox oy nr lq oz pa nt pb bi translated">数据湖架构</h2><p id="163b" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">数据湖架构可能会根据您的需求而有所不同。在这个案例研究中，使用了一个简单的架构。它由两个区域组成:T4原始区域和沙盒区域。</p><p id="399c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在处理具有复杂格式的数据，<em class="ly">例如，</em>，某个创意开发人员决定编写的一些复杂嵌套的JSON，<strong class="lb iu">您可能需要在将数据加载到数据仓库之前对其进行处理</strong>。因此，您可能需要实现另一个数据湖区域。这就是Ben Sharma在他的书<a class="ae ky" href="https://www.oreilly.com/library/view/architecting-data-lakes/9781492033004/" rel="noopener ugc nofollow" target="_blank">中所说的数据湖</a>精炼区。</p><p id="28d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，现在，我会保持简单。</p><ul class=""><li id="9d7d" class="pc pd it lb b lc ld lf lg li pe lm pf lq pg lu ph pi pj pk bi translated"><strong class="lb iu">原始区</strong>是以原始格式存储数据的地方。然后，通过在<a class="ae ky" href="https://www.getdbt.com/" rel="noopener ugc nofollow" target="_blank"> DBT </a>上运行一些转换过程，将其加载到数据仓库中</li><li id="78de" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">沙盒区是数据分析师、数据工程师或数据科学家可以做一些疯狂实验的地方</li></ul><p id="fb53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在原始区域中，数据根据其来源和加载日期进行分区，<em class="ly">例如</em>，2020年9月15日加载的名为“source”的源中的文件存储在/source/2020/09/15中。</p><blockquote class="lv lw lx"><p id="66f5" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">值得一提的是，您在数据湖中构建分区的方式应该根据您的特定需求。有关S3分区的信息，请参见本<a class="ae ky" href="https://docs.aws.amazon.com/glue/latest/dg/aws-glue-programming-etl-partitions.html" rel="noopener ugc nofollow" target="_blank">帖子</a>和本<a class="ae ky" href="https://docs.aws.amazon.com/athena/latest/ug/partitions.html" rel="noopener ugc nofollow" target="_blank">帖子</a>。</p></blockquote><p id="ee06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在下图中找到数据湖的建议体系结构的图形表示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/93479603f0cb9f289ee79cdd5ac21d94.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*5VF4g84rJqH_iR0Atmwm4Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖体系结构——作者制作的插图</p></figure><p id="d287" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是它在AWS S3的实现方式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/93aad7b221aac60352ff01265e6903be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4vgNh1xRzTIB8K6bYXRHQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖—0级—作者制作的插图</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/3ea82cd7107f144d3b8dc253b2cd2af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUqH6SMXdig1iH5hXlXISw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖—1级—作者制作的插图</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pt"><img src="../Images/ef52a09aed49c0d368b948dc8747427e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jC4UBepQdvi5TyXF4ONllQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖—2级—作者制作的插图</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/b89e0f0af4e2a4134b987eb024c65188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHN31VXS9o4QB4Z91bz_DA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖—级别3 —作者制作的插图</p></figure><p id="a965" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，在最后一层，使用parquet文件存储数据。我使用了一个开源数据集来举例说明这个案例研究。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/947260c85958c353c25b97e597d8d620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJ7WWrGnwOwDo4IIDz3Vvg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据湖—级别4 —作者制作的插图</p></figure><h2 id="a96a" class="oq ne it bd nf or os dn nj ot ou dp nn li ov ow np lm ox oy nr lq oz pa nt pb bi translated">数据目录</h2><p id="3318" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">现在我们已经将数据存储在数据湖中，我们需要能够使用SQL查询数据。因此，我们可以使用DBT执行一些数据转换。</p><p id="e0e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用AWS Glue数据目录数据库和爬虫来允许我们在DL之上运行SQL查询。</p><p id="e1d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步是<a class="ae ky" href="https://docs.aws.amazon.com/glue/latest/dg/console-databases.html" rel="noopener ugc nofollow" target="_blank">在AWS Glue中创建一个数据库</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/03486336a3882caa5b1002943dbcd8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*DPHyc3az5NITPkCoMWLZMQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS胶水数据目录中的数据库—作者制作的插图</p></figure><p id="1379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，可以使用AWS Glue爬虫填充数据库。更多信息请看这个<a class="ae ky" href="https://docs.aws.amazon.com/glue/latest/dg/console-crawlers.html" rel="noopener ugc nofollow" target="_blank">帖子</a>。</p><p id="680c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建并运行爬虫后的最终结果可能如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pw"><img src="../Images/09c6a802f086da42c96a09b87f4f53e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gk5rzdoMNcp08K0zW3WqdA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS胶水目录中的一个表格—第一部分—作者制作的插图</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/7d8e2596c41a93fcb052ea8ba82b67de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MM-HQW7cnHLu_iOaCnkmew.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AWS胶水目录中的表格—第二部分—作者制作的插图</p></figure><p id="4c47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以开始工作了。有了数据目录中映射的表，现在我们可以使用AWS红移光谱从DW中访问它们。因此，我们最终可以在数据仓库中具体化数据。</p><h1 id="d69f" class="nd ne it bd nf ng py ni nj nk pz nm nn jz qa ka np kc qb kd nr kf qc kg nt nu bi translated">数据仓库</h1><p id="e043" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">如前所述，DW是使用AWS红移、红移光谱和DBT构建的。</p><p id="c0cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://docs.aws.amazon.com/redshift/latest/mgmt/welcome.html" rel="noopener ugc nofollow" target="_blank"> AWS红移</a>是AWS提供的数据仓库服务。<a class="ae ky" href="https://docs.aws.amazon.com/redshift/latest/dg/c-getting-started-using-spectrum.html" rel="noopener ugc nofollow" target="_blank">红移光谱</a> <strong class="lb iu"> </strong>是一项服务，可以在红移集群内部使用，直接从亚马逊S3上的文件中查询数据。并且，<a class="ae ky" href="https://www.getdbt.com/" rel="noopener ugc nofollow" target="_blank"> DBT </a>是一个允许您使用SQL在数据仓库内部执行转换的工具。</p><p id="826f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DW的关键组件之一是红移光谱，因为它允许您将粘合数据目录与红移联系起来。因此，您可以使用DBT查询红移星团中的DL数据。<strong class="lb iu">这很重要，因为DBT不会移动数据。它只是转换数据仓库中的数据。</strong></p><p id="c494" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将红移光谱与之前在AWS粘合目录中映射的数据连接起来的方法是通过在外部模式中创建<strong class="lb iu">外部表。更多信息见<a class="ae ky" href="https://docs.aws.amazon.com/redshift/latest/dg/c-getting-started-using-spectrum-create-external-table.html" rel="noopener ugc nofollow" target="_blank">本</a>。</strong></p><p id="cea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样做之后，外部模式应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/dc2ba0959d4adcec54f07b870a6c4820.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*DIzs7RaOJSfgq5dcK0wTNg.png"/></div></figure><p id="ce35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，如果您使用的是我在本案例研究中使用的相同的数据集，您的元数据应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/21d76e5da449f3e2087c3932a9c45c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7E3Fz-GI8sAGkGFZA5L4eg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在DBeaver中可视化的源表—作者制作的插图</p></figure><h2 id="a9cb" class="oq ne it bd nf or os dn nj ot ou dp nn li ov ow np lm ox oy nr lq oz pa nt pb bi translated">数据实体化</h2><p id="c697" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在用红移光谱映射数据之后，我们可以继续进行AWS红移中的数据具体化。</p><p id="da97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种具体化允许您将数据放入红移表中。一个关键的区别是，当您查询红移表中的数据时，您不需要为查询付费，因为您已经为红移集群付费了。<strong class="lb iu">而如果你查询外部表中的数据，<em class="ly">即</em>红移光谱，你将按查询中处理的数据</strong>收费。更多信息见<a class="ae ky" href="https://aws.amazon.com/redshift/pricing/" rel="noopener ugc nofollow" target="_blank">本</a>。</p><p id="a9ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个关键区别是<strong class="lb iu"> AWS红移在处理海量数据</strong>时表现优于红移频谱。更多信息见<a class="ae ky" href="https://www.concurrencylabs.com/blog/starburst-presto-vs-aws-redshift/" rel="noopener ugc nofollow" target="_blank">本</a>。</p><p id="65a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果我们想对前面给出的表进行一些转换，我们可以编写一个DBT模型，并用红移来具体化数据。</p><p id="fe4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是本案例研究的一个简单的DBT模型:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/f1b64ec8ec7337ca77296097705b1f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*tr3nJHP-TikQ2ckQTDXgOg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">DBT模型——作者创作的插图</p></figure><p id="a04d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是这个模型在红移表中的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/ca05ca8dfa63e139812d1b8c5e9bb77d.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*Qlm0f2wNimdT7kY2U7goqw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">红移表——作者制作的插图</p></figure></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="2e8b" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">结论</h1><p id="92d4" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在本文中，我们为AWS中的数据湖和数据仓库实现了一个简单的架构。</p><p id="7adf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们还讨论了这样做所必需的一些关键步骤。一些要点如下:</p><ul class=""><li id="5de0" class="pc pd it lb b lc ld lf lg li pe lm pf lq pg lu ph pi pj pk bi translated">该架构遵循ELT方法。因此，在将数据加载到数据湖之前，不涉及任何转换过程</li><li id="a219" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">数据湖被用作不可变的暂存区，用于将数据直接加载到数据仓库中</li><li id="1e48" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">数据湖由两个区域组成:原始区域和沙盒区域。如果您需要在加载到数据仓库之前处理数据，您应该为数据湖设置另一个区域:精化区域</li><li id="6fe1" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">数据湖中的分区应该根据您的用例来定义</li><li id="71aa" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">AWS红移光谱是一项服务，可以在红移集群中直接从亚马逊S3上的文件中查询数据。这是对AWS红移的额外服务</li><li id="5a63" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">AWS红移光谱允许你连接胶水数据目录与红移</li><li id="1b51" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">转换逻辑使用DBT模型</li><li id="ea56" class="pc pd it lb b lc pl lf pm li pn lm po lq pp lu ph pi pj pk bi translated">DBT不移动数据。它只是转换数据仓库中的数据</li></ul><p id="e50b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这些信息对你有用。</p><p id="4920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读到最后。</p><p id="4227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下期帖子再见！</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="04dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ly">如果您想随时更新我的作品，</em> <strong class="lb iu"> <em class="ly">请加入我的</em> </strong> <a class="ae ky" href="https://metadatacommunity.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="ly">简讯</em> </strong> </a> <strong class="lb iu"> <em class="ly">！偶尔，我会和我的读者分享一些东西。如果你加入我会很感激的:)</em></strong></p><div class="mc md gp gr me mf"><a href="https://ajhenaor.medium.com/interested-in-data-warehousing-424b49ec97e4" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">对数据仓库感兴趣？</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">我已经写了几篇关于它的文章。这就是如何阅读它们！</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">ajhenaor.medium.com</p></div></div><div class="mo l"><div class="qh l mq mr ms mo mt ks mf"/></div></div></a></div></div></div>    
</body>
</html>