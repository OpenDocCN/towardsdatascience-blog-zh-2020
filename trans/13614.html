<html>
<head>
<title>How to Render 3D Football Pass Networks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何渲染3D足球传球网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-render-3d-football-pass-networks-bf889f5ab1b0?source=collection_archive---------32-----------------------#2020-09-18">https://towardsdatascience.com/how-to-render-3d-football-pass-networks-bf889f5ab1b0?source=collection_archive---------32-----------------------#2020-09-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ab1ea24abe77ca8e6496de98ac4206ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UX-zT_ZEtlco7iR_9tkxgA.png"/></div></div></figure><div class=""/><div class=""><h2 id="99c3" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">用Python和Cinema4D实现体育数据可视化</h2></div><p id="e1cb" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">传球网络分析长期以来一直是足球分析师中流行的可视化方法。那么，为什么又有一篇关于它的文章呢？嗯，一个下雨的周日，我认为在我的电脑上运行别人的全面Python脚本来提升我的科学自尊是一个好主意，并为自己是一名多么伟大的数据科学家而沾沾自喜。毫不奇怪，该脚本在第一次尝试时成功执行——显然不是因为我的编程天才，而是因为我使用的脚本的优秀质量，即用于使用Matplotlib构建可定制的传球网络的<a class="ae lp" href="https://github.com/Friends-of-Tracking-Data-FoTD/passing-networks-in-python" rel="noopener ugc nofollow" target="_blank"> Sergio Llana的GitHub库</a>。所以在一键按下<em class="lq">【运行脚本】</em>后，我骄傲地盯着我的第一个“自编程序”的pass网络:</p><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lr"><img src="../Images/5397e7087c92c3c3fa4710a766b1430f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1SSJBhB4RdWg9tpzTr2Cw.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">2D通行证网络。图片作者。科迪由<a class="ae lp" href="https://github.com/Friends-of-Tracking-Data-FoTD/passing-networks-in-python" rel="noopener ugc nofollow" target="_blank">塞尔吉奥利亚纳</a>。</p></figure><p id="680c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">但随后一个念头涌上心头:“<em class="lq">如果我能沉浸在网络中，看看到底打了多少个低传球或高传球，那不是很好吗？”。就在那时，我开始尝试Cinema4D的内置Python模块。令我自己惊讶的是，我能够不费吹灰之力就实现我的想法。在这篇文章中，我想分享我的(可能是非传统的)可视化方法。</em></p><blockquote class="ma mb mc"><p id="66e9" class="kt ku lq kv b kw kx kf ky kz la ki lb md ld le lf me lh li lj mf ll lm ln lo im bi translated">免责声明:如果你是来寻求分析见解的，恐怕你会失望。这篇文章是关于如何将传统的2D传球网络转换成3D的。</p></blockquote></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="c8b4" class="mn mo je bd mp mq mr ms mt mu mv mw mx kk my kl mz kn na ko nb kq nc kr nd ne bi translated">如何开始</h1><p id="d4f0" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">如前所述，我之所以能够取得我的成果，是因为有人慷慨地分享了他/她的代码。我用于数据准备的许多代码段直接取自<a class="ae lp" href="https://github.com/Friends-of-Tracking-Data-FoTD/passing-networks-in-python" rel="noopener ugc nofollow" target="_blank"> Sergio Llana的GitHub页面</a>(特别是<a class="ae lp" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank">statspamb的</a>开放数据仓库的导入和处理)。人们毕竟是懒惰的，所以复制粘贴代码没有什么可耻的！<em class="lq">…对吗？</em>也就是说，你可以在我的<a class="ae lp" href="https://github.com/dmlinke/c4d_pass_networks" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到我的Python脚本和C4D项目文件。</p><h2 id="0e79" class="nk mo je bd mp nl nm dn mt nn no dp mx lc np nq mz lg nr ns nb lk nt nu nd nv bi translated">数据采集</h2><p id="16f0" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">我很惊讶现在有这么多的球探数据是公开的。对于这个项目，我使用了发生在2018年世界杯小组赛期间的比赛<strong class="kv jf">葡萄牙vs西班牙(3:3) </strong>，<strong class="kv jf"> </strong>。你可以在<a class="ae lp" href="https://github.com/statsbomb/open-data" rel="noopener ugc nofollow" target="_blank"> StatsBomb </a>找到2018年世界杯所有比赛的赛事数据。另一个值得一提的重要来源是最近在《自然》杂志上发表的一篇文章，其中附有时空匹配事件的公共数据集。</p><h2 id="374b" class="nk mo je bd mp nl nm dn mt nn no dp mx lc np nq mz lg nr ns nb lk nt nu nd nv bi translated">网络基础</h2><p id="e83b" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">足球传球网络由一组通过“边”(即传球)连接的圆形“<strong class="kv jf">节点</strong>”(即球员)组成。从现在开始，我将使用术语“<strong class="kv jf">样条线</strong>”来代替“边缘”。以后你就明白为什么了。节点的大小通常代表玩家在游戏中完成的传球总数。每个球员的场地位置(也称为战术阵容)可以通过以下方法获得:(a)根据每个球员的时空跟踪数据(如果可用)计算平均XY坐标，或者(b)根据每个球员的侦察事件(即传球)计算平均XY坐标。传统上，边的重量(厚度)代表两个球员之间完成传球的次数。</p><h2 id="9c78" class="nk mo je bd mp nl nm dn mt nn no dp mx lc np nq mz lg nr ns nb lk nt nu nd nv bi translated">准备数据</h2><p id="58b7" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">我将跳过如何解析StatsBomb的JSON文件并将完整的pass连接提取到单独的数据帧中的部分。塞尔吉奥的剧本非常管用，所以我只做了些小调整。我事先知道我要渲染每个节点，一个一个的通过。这就是为什么我创建了两个数据帧，可以保存为文本文件，并使用内置的Python连接器导入Cinema4D:</p><ul class=""><li id="2cd2" class="nw nx je kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated">对于<strong class="kv jf">玩家节点，</strong>我们需要每个玩家的<strong class="kv jf">名字</strong>，平均场<strong class="kv jf">坐标</strong>，以及<strong class="kv jf">完成的总遍数</strong>:</li></ul><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div class="gh gi of"><img src="../Images/bf364b23d2eed9ab1f9f8274425d20f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*mUeWIVelQIpk0CRiMpdKNg.png"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">玩家节点表。图片作者。</p></figure><ul class=""><li id="96e1" class="nw nx je kv b kw kx kz la lc ny lg nz lk oa lo ob oc od oe bi translated">对于<strong class="kv jf">传球样条</strong>，我们需要一个列表，包含(a)所有<strong class="kv jf">球员配对</strong><em class="lq">【pair _ key】，</em> (b)每个球员配对完成的<strong class="kv jf">低传球和高传球</strong>的数量，以及(c)传球和接球球员的平均场地<strong class="kv jf">坐标</strong>:</li></ul><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/6b4307e5223d91178e578606bde2b25e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Okne-UmpMnoY0u5WqFi8jg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">传递值表的一部分。图片作者。</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="a689" class="mn mo je bd mp mq mr ms mt mu mv mw mx kk my kl mz kn na ko nb kq nc kr nd ne bi translated">使用Cinema4D进行网络渲染</h1><p id="5f53" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated"><a class="ae lp" href="https://www.maxon.net/en-gb/products/cinema-4d/overview/" rel="noopener ugc nofollow" target="_blank"> Cinema4D </a> (C4D)是一款3D设计、动画和渲染软件，主要用于运动图形、建模和纹理；但是，它附带了一个全面的Python模块。也就是说，几乎每个用户操作都可以通过Python命令来执行，从而允许设计过程的自动化。下面是一个我自定义的用户界面的例子，显示了三维视口(左上)，对象管理器(右上)，和材质管理器(右中)。介于两者之间的是Python脚本管理器，允许以编程方式创建单个对象以及整个场景。接下来的两段将展示只用几行代码创建任何3D对象是多么容易。</p><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/e3cd9c63f4eab1019c5a60155fd6d56e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUFq6duugVqY_NSQItPCug.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">Cinema4D Python接口。图片作者。</p></figure><h2 id="d3ec" class="nk mo je bd mp nl nm dn mt nn no dp mx lc np nq mz lg nr ns nb lk nt nu nd nv bi translated">生成玩家节点</h2><p id="23cb" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">我将用一个简单的<strong class="kv jf">圆盘</strong>来代表一个玩家的节点。在C4D，通过Python命令创建一个磁盘并更改其属性非常简单。下面的代码示例在原点(0，0，0)生成一个外径为100厘米的圆盘:</p><figure class="ls lt lu lv gt iv"><div class="bz fp l di"><div class="oi oj l"/></div></figure><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/a656814d90814f241ca76688f06d251c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8NuQkAEQJEXDX2MU6MBc6A.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">Cinema4D磁盘示例。图片作者。</p></figure><h2 id="a0b7" class="nk mo je bd mp nl nm dn mt nn no dp mx lc np nq mz lg nr ns nb lk nt nu nd nv bi translated">生成刀路轨迹</h2><p id="c8a3" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">我不想显示球员之间的单个加权边(代表传球次数)，而是想单独渲染每个传球。为了达到这种效果，我们必须引入一些随机性…</p><p id="cab1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我发现渲染两个球员之间传球轨迹最简单的方法是创建一个<strong class="kv jf">样条</strong>对象。最初，我认为每个样条应该只包括起点(传球手)和终点(接球手)，但这将导致完美的直线——正如我们从传统传球网络中所知的那样。相反，我想创造这样一种印象:( a)每个通道轨迹都略有不同,( b)高通被渲染为一个弧形。这就是为什么我最终为每个通道轨迹使用三个样条点，这使我有可能向高通添加飞行曲线，并向中心样条点引入一些随机偏移(创建每个通道单独显示的假象)。下面的代码示例在两点之间生成十个随机样条线对象。</p><figure class="ls lt lu lv gt iv"><div class="bz fp l di"><div class="oi oj l"/></div></figure><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/a434dbf871a145b61003d636a65bf9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mT0TPyeFGcR24uIsg7WUKA.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">Cinema4D随机通过轨迹示例。图片作者。</p></figure><h1 id="7f53" class="mn mo je bd mp mq om ms mt mu on mw mx kk oo kl mz kn op ko nb kq oq kr nd ne bi translated">运行循环</h1><p id="a249" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">既然我们知道了如何生成球员节点和传球轨迹，那么是时候用我们球员特有的值替换默认值了。这最适合使用一个循环来遍历<strong class="kv jf">播放器节点文件</strong>，并为每个播放器创建一个名称和磁盘。第二个循环通过<strong class="kv jf">传球值文件</strong>进行迭代，并在球员配对之间生成随机传球轨迹——取决于他们之间完成的传球次数。</p><h1 id="e65f" class="mn mo je bd mp mq om ms mt mu on mw mx kk oo kl mz kn op ko nb kq oq kr nd ne bi translated">收尾</h1><p id="1a40" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">现在剩下要做的就是添加场线，选择你最喜欢的颜色(又名材料)，添加一些信息文本，找到一个合适的相机角度，根据你的喜好调整渲染设置——然后点击<em class="lq">【渲染】</em>按钮:</p><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/def1282c56eb36cab89eb6ea4a180817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CjlY7oyDYp3JrbgGrpuurw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">图片作者。</p></figure><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/a14bfbe3b0c35499250adc66d55766d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOah9YlyyAEWxKn8fsIzfg.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">图片作者。</p></figure><figure class="ls lt lu lv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/3dbe2fc53261b2db9dd30db868d25fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Tpexa4YjtZ11aqxwIwzTA.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">图片作者。</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="4929" class="mn mo je bd mp mq mr ms mt mu mv mw mx kk my kl mz kn na ko nb kq nc kr nd ne bi translated">关键外卖？</h1><p id="07f7" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated">对于典型的足球分析师来说，可以说很少。但是如果你像我一样，你的兴趣介于数据科学和图形设计之间，你会惊讶于编程语言(Python)和3D设计软件(C4D)的结合所能实现的东西。</p><p id="856b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">诚然，C4D不一定被认为是数据科学家的标准工具，你也需要投入一些时间来学习基础知识。与传统的2D网络相比，3D pass网络是否提供了任何附加值，这仍然是一个有争议的问题。尽管如此，我还是很喜欢在C4D尝试Python，并且我将来肯定会更频繁地集成它。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="7fab" class="mn mo je bd mp mq mr ms mt mu mv mw mx kk my kl mz kn na ko nb kq nc kr nd ne bi translated">接下来是什么？</h1><p id="297a" class="pw-post-body-paragraph kt ku je kv b kw nf kf ky kz ng ki lb lc nh le lf lg ni li lj lk nj lm ln lo im bi translated"><strong class="kv jf">动画！</strong> C4D展示了它在动画方面的真正实力，这很棒，因为有些人可能会认为静态通行证网络提供了对游戏相当肤浅的洞察。相反，展示一个团队的网络动态如何随时间变化(以及它如何对对手的网络做出反应)可以提供更深入的见解。让我们看看有什么可能。我会随时通知你的！</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="2819" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><em class="lq">感谢您阅读我的文章！如果您有任何问题或反馈，或者您只是想联系我，请不要犹豫，请联系我。</em></p></div></div>    
</body>
</html>