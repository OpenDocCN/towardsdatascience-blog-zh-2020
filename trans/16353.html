<html>
<head>
<title>@Decorators in Python 🍃(Advanced)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">@ Python中的Decorators🍃(高级)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/decorators-in-python-advanced-8e6d3e509ffe?source=collection_archive---------15-----------------------#2020-11-11">https://towardsdatascience.com/decorators-in-python-advanced-8e6d3e509ffe?source=collection_archive---------15-----------------------#2020-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1cc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">提升你的Python编程水平(<strong class="jp ir">奖励</strong> : <code class="fe kl km kn ko b">*args</code> <code class="fe kl km kn ko b">**kwargs</code> )…..🔥</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/e3dba94e35dbe57d5e0e6dd9737ac485.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HpvwSCayX7b1vJp4"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">由<a class="ae lf" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><blockquote class="lg"><p id="604f" class="lh li iq bd lj lk ll lm ln lo lp kk dk translated">B <!-- -->自己比赛吧，它确实包含了很多代码。✌</p></blockquote><p id="b498" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">这些为什么难以理解，不用我解释，就是你在这里的原因<strong class="jp ir">(不要指望理论只有代码)</strong>。但是你真的需要写装饰者吗？</p><blockquote class="lv lw lx"><p id="ac45" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">编写Python代码的乐趣应该在于看到短小、简洁、易读的类，这些类用少量清晰的代码表达了大量的动作——而不是让读者厌烦得要死的大量琐碎代码。古迪奥·范·罗森。(python的创造者)</p></blockquote><p id="2528" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目录:(可点击)</p><ol class=""><li id="05e7" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated"><a class="ae lf" href="#9a40" rel="noopener ugc nofollow">什么是装修工？</a></li><li id="d70e" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">操纵Python函数。<br/> <strong class="jp ir"> 1 </strong>。<a class="ae lf" href="#d84a" rel="noopener ugc nofollow">给多个变量分配一个函数。</a><br/>T23】2。<a class="ae lf" href="#75aa" rel="noopener ugc nofollow">在函数</a>中创建函数。<br/> <strong class="jp ir"> 3 </strong>。<a class="ae lf" href="#67be" rel="noopener ugc nofollow">将一个函数作为参数传递给其他函数。</a><br/>T33】4。<a class="ae lf" href="#73dd" rel="noopener ugc nofollow">函数可以返回其他函数。</a></li><li id="b206" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">如何表示和使用装饰者。</li><li id="44c2" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">装饰者的真实例子。<br/> 1。<a class="ae lf" href="http://6f42" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"/></a>=&gt;<em class="ly">获取某个功能的执行时间。</em>2<br/>。<a class="ae lf" href="#643e" rel="noopener ugc nofollow"><strong class="jp ir">Deco</strong></a><strong class="jp ir"/>=&gt;<em class="ly">并行运行python函数。</em> <br/> 3。<a class="ae lf" href="#c584" rel="noopener ugc nofollow"><strong class="jp ir">ShowMe</strong></a>=&gt;<em class="ly">获取CPU时间文件等一个python函数。</em></li><li id="e940" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">Python内置的类装饰器。<br/> 1。<a class="ae lf" href="#3539" rel="noopener ugc nofollow"><strong class="jp ir">@ class method</strong></a><br/>2。<a class="ae lf" href="#c788" rel="noopener ugc nofollow"> @staticmethod </a> <br/> 3。<a class="ae lf" href="#5fb0" rel="noopener ugc nofollow"><strong class="jp ir">@属性</strong> </a></li></ol><p id="8832" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">加成:</strong>学习如何使用<code class="fe kl km kn ko b">*args</code> &amp; <code class="fe kl km kn ko b">**kwargs</code></p><blockquote class="lv lw lx"><p id="9a40" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated"><strong class="jp ir">decorator只不过是在不改变现有方法的情况下向现有方法添加新功能的函数。</strong></p></blockquote><p id="361c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要理解Decorators，你需要理解Python中的函数，函数是一级对象，也就是说，我们可以给同一个函数分配多个变量，或者我们甚至可以将它们作为参数发送给其他函数。</p><p id="2b02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ly">让我们看看用python函数可以做的一些很酷的事情。</em></p><h2 id="d84a" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">1.将一个函数赋给多个变量。</h2><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="5738" class="mq mr iq ko b gy nn no l np nq">&gt;&gt;&gt; <strong class="ko ir">def</strong> func(x):<br/>...     return x.upper()<br/>&gt;&gt;&gt; func("roar")<br/>'ROAR'</span><span id="73b8" class="mq mr iq ko b gy nr no l np nq">&gt;&gt;&gt; new_func = func  <strong class="ko ir"><em class="ly"># Assign func to a variable.</em></strong></span><span id="4224" class="mq mr iq ko b gy nr no l np nq">&gt;&gt;&gt; new_func("meow")<br/>'MEOW'</span><span id="3d6c" class="mq mr iq ko b gy nr no l np nq">&gt;&gt;&gt; <strong class="ko ir">del</strong> func<br/># We can call the new_func even after deleting the func<br/>&gt;&gt;&gt; new_func("meow "*2)<br/>'MEOW MEOW '</span></pre><h2 id="75aa" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">2.在函数中创建函数。(对<code class="fe kl km kn ko b">C/C++</code>程序员来说是新的。)</h2><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="5954" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">def</strong> factorial(n):<br/>    <em class="ly">""" <br/>    Calculates the factorial of n, <br/>    n =&gt; integer and n &gt;= 0.<br/>    """</em><br/>    <strong class="ko ir">if</strong> type(n) == int <strong class="ko ir">and</strong> n &gt;= 0:<br/>        <strong class="ko ir">if</strong> n == 0:<br/>            <strong class="ko ir">return</strong> 1<br/>        <strong class="ko ir">else</strong>:<br/>            <strong class="ko ir">return</strong> n * factorial(n-1) <strong class="ko ir"><em class="ly">#</em></strong> <strong class="ko ir"><em class="ly">Recursive Call</em></strong><br/>    <strong class="ko ir">else</strong>:<br/>        <strong class="ko ir">raise</strong> <strong class="ko ir">TypeError</strong>("n should be an integer and n &gt;= 0")</span></pre><p id="0f67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ly">上面的代码有什么缺陷？</em>T15】</strong></p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="7f19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">factorial(10)</code>递归检查10，9，8，7…的类型，这是不必要的。我们可以通过使用内部函数很好地解决这个问题。</p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="7907" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">def</strong> factorial(n):<br/>    <em class="ly">""" <br/>    Calculates the factorial of n, <br/>    n =&gt; integer and n &gt;= 0.<br/>    """</em><br/>    <strong class="ko ir">def</strong> inner_factorial(n):<br/>        <strong class="ko ir">if</strong> n == 0:<br/>            <strong class="ko ir">return</strong> 1<br/>        <strong class="ko ir">else</strong>:<br/>            <strong class="ko ir">return</strong> n * inner_factorial(n-1)<br/>    <strong class="ko ir">if</strong> type(n) == int <strong class="ko ir">and</strong> n &gt;=0:<br/>        <strong class="ko ir">return</strong> inner_factorial(n)<br/>    <strong class="ko ir">else</strong>:<br/>        <strong class="ko ir">raise</strong> <strong class="ko ir">TypeError</strong>("n should be an integer and n &gt;= 0")</span></pre><p id="e816" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嘿，你可以用一个室内设计师。好的，让我们等等。</p><h2 id="67be" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">3.将函数作为参数传递给其他函数。</h2><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="8925" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">import math<br/>def</strong> sin_cos(func, var):<br/>    print("Call this" + <strong class="ko ir">func.__name__</strong> +"function")<br/>    print(func(var))</span><span id="9762" class="mq mr iq ko b gy nr no l np nq">sin_cos(<strong class="ko ir">math.sin</strong>, 60) # -0.3048106211022167<br/>sin_cos(<strong class="ko ir">math.cos</strong>, 45) # 0.5253219888177297</span></pre><h2 id="73dd" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">4.函数可以返回其他函数。</h2><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="cd3d" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">def</strong> sound(range):    <br/>    """ <br/>    Args: range (Type of sound). (&lt;class 'str'&gt;)<br/>    Return: function object of the sound (&lt;class 'function'&gt;)<br/>    """ <br/>    <strong class="ko ir">def</strong> loud(x):<br/>        print(x.upper() + '🐯')<br/>    <strong class="ko ir">def</strong> low(x):<br/>        print(x.lower() + '🐱')<br/>    <strong class="ko ir">if</strong> range == 'loud':<br/>        <strong class="ko ir">return</strong> loud<br/>    <strong class="ko ir">else</strong>:<br/>        <strong class="ko ir">return</strong> low</span><span id="42cb" class="mq mr iq ko b gy nr no l np nq">tiger = sound("loud") <strong class="ko ir"><em class="ly"># you can use this as a functions.</em></strong><br/>tiger("roar..") <strong class="ko ir"># ROAR..🐯</strong></span><span id="8cbd" class="mq mr iq ko b gy nr no l np nq">cat = sound("low")<br/>cat("MEOW..") <strong class="ko ir"># meow..🐱</strong></span></pre><p id="3e65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我第一次看到这个的时候，我也有点困惑。对于每个范围，<code class="fe kl km kn ko b">sound</code>返回其各自的函数。一个更有用的例子是创建一个n次多项式。</p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="50b4" class="mq mr iq ko b gy nn no l np nq"><em class="ly">Ref:</em> <a class="ae lf" href="https://www.python-course.eu/python3_decorators.php#Functions-returning-Functions" rel="noopener ugc nofollow" target="_blank">https://www.python-course.eu/python3_decorators.php#Functions-returning-Functions</a></span><span id="262b" class="mq mr iq ko b gy nr no l np nq"><strong class="ko ir">def</strong> polynomial_creator(a, b, c):<br/>    """<br/>    <strong class="ko ir">Creates 2nd degree polynomial functions</strong><br/>    """<br/>    <strong class="ko ir">def</strong> polynomial(x):<br/>        <strong class="ko ir">return</strong> a * x**2 + b * x + c<br/>    <strong class="ko ir">return</strong> polynomial<br/>    <br/>p1 = polynomial_creator(2, 3, -1)<br/>p2 = polynomial_creator(-1, 2, 1)</span><span id="ba86" class="mq mr iq ko b gy nr no l np nq">x = -2<br/>print(x, p1(x), p2(x)) # -2 1 -7</span></pre><p id="9457" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ly">简短练习:</em> </strong>试写一个以次数和参数为自变量，返回一个n次多项式的函数。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nz"><img src="../Images/a9cd6cc50e21839d42e44cefa3d7f515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9RBTl3cj0az91a_v"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">查尔斯·德鲁维奥在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="77de" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">完成了基础工作，接下来就很棘手了。（👀)</h2><p id="0684" class="pw-post-body-paragraph jn jo iq jp b jq oa js jt ju ob jw jx jy oc ka kb kc od ke kf kg oe ki kj kk ij bi translated">让我们从一个简单的装饰器开始，它在函数运行之前打印出它的名字。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">🦋用你自己的例子来试试吧🦋</p></figure><p id="4a91" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🔥<strong class="jp ir"> Pro提示:</strong>通过使用<strong class="jp ir"> </strong> <code class="fe kl km kn ko b">*args</code>你可以给一个函数发送不同长度的变量。<code class="fe kl km kn ko b">*args</code>将其作为元组接受。<a class="ae lf" href="https://realpython.com/python-kwargs-and-args/" rel="noopener ugc nofollow" target="_blank">了解更多</a> <code class="fe kl km kn ko b"><a class="ae lf" href="https://realpython.com/python-kwargs-and-args/" rel="noopener ugc nofollow" target="_blank">*args</a></code> <a class="ae lf" href="https://realpython.com/python-kwargs-and-args/" rel="noopener ugc nofollow" target="_blank">和</a> <code class="fe kl km kn ko b"><a class="ae lf" href="https://realpython.com/python-kwargs-and-args/" rel="noopener ugc nofollow" target="_blank">*kwargs</a></code></p><p id="0778" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">decorators的语法与我们在上面的例子中表达的不同。通常用<code class="fe kl km kn ko b"><strong class="jp ir">@</strong></code> ( <em class="ly">美化你的代码</em>)来表示。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">🦋用你自己的例子来试试吧🦋</p></figure><p id="bb4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🔥<strong class="jp ir"> ProTip: </strong>通过使用<a class="ae lf" href="https://github.com/Maluen/code-medium" rel="noopener ugc nofollow" target="_blank"> Code-Medium </a>你可以直接从你的Medium文章中<strong class="jp ir"> <em class="ly">创建</em> </strong> &amp; <strong class="jp ir"> <em class="ly">编辑</em> </strong> GitHub Gists。(如上图)。</p><blockquote class="lg"><p id="f611" class="lh li iq bd lj lk oh oi oj ok ol kk dk translated">注意:使用decorator包装函数时，原始函数的属性，如__doc__ (docstring)、__name__(函数名)、__module__(定义函数的模块)将会丢失。</p></blockquote><p id="42f5" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">尽管可以在decorator函数中覆盖它们，但python有一个内置的decorator @ wraps来做这件事。</p><p id="4ed9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你仔细看，我会打印每个函数的输出，如果你想返回一个输出的话。您需要在包装函数中添加一个额外的return。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">使用decorators时<strong class="ak">返回</strong>的用法。</p></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi om"><img src="../Images/99dfdbab57f034adf0ef554fd3442002.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kh-OoUsyXSEAfxr0"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://unsplash.com/@danmakesgames?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹</a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h2 id="3982" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">为了更好地理解，让我们看一些装饰者的真实例子。</h2><ol class=""><li id="6f42" class="mc md iq jp b jq oa ju ob jy on kc oo kg op kk mh mi mj mk bi translated"><strong class="jp ir">定时器:</strong> <em class="ly">跟踪一个函数运行所用的时间。</em></li></ol><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">🏄‍♂️理解*args和*kwargs复制代码并通过传递不同的变量来运行它🏄‍♂️</p></figure><p id="127e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🔥<strong class="jp ir"> Pro提示:</strong>您可以通过使用<code class="fe kl km kn ko b">original_looper = looper.__wrapped__</code> ( <em class="ly">假设您已经使用了</em> <code class="fe kl km kn ko b"><em class="ly">@wraps</em></code>)解包来访问原始函数</p><p id="643e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir"> Deco: </strong> <em class="ly">一个自动并行化python程序的库</em><a class="ae lf" href="https://github.com/alex-sherman/deco" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ly">Link</em></strong></a><strong class="jp ir"><em class="ly">。</em>T41】</strong></p><p id="6452" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lf" href="https://github.com/alex-sherman" rel="noopener ugc nofollow" target="_blank"> Alex Sherman </a>创建了这个简单的库，名为deco，它允许python函数并行运行，只需添加一个装饰器<em class="ly">很酷吧..！。</em></p><p id="153b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ly">你要并行运行的函数用</em> @concurrent <br/> <em class="ly">修饰，调用并行函数的函数用</em> @synchronized修饰</p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="a19c" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">@concurrent</strong> # We add this for the concurrent function<br/><strong class="ko ir">def</strong> process_lat_lon(lat, lon, data):<br/>  #Does some work which takes a while<br/>  <strong class="ko ir">return</strong> result<br/><br/># And we add this for the function which calls the concurrent function<br/><strong class="ko ir">@synchronized<br/>def</strong> process_data_set(data):<br/>  results = <strong class="ko ir">defaultdict</strong>(dict)<br/>  <strong class="ko ir">for</strong> lat <strong class="ko ir">in</strong> range(...):<br/>    <strong class="ko ir">for</strong> lon <strong class="ko ir">in</strong> range(...):<br/>      results[lat][lon] = process_lat_lon(lat, lon, data)<br/>  <strong class="ko ir">return</strong> results</span></pre><p id="c0ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">亲提示🔥:</strong>更快运行python代码的类似但先进的科学计算库是<a class="ae lf" href="https://numba.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> numba </strong> </a> <strong class="jp ir">。</strong></p><p id="c584" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir"> Showme </strong> : <em class="ly"> ShowMe是一组简单的非常有用的Python函数装饰器。它允许您查看跟踪信息、执行时间、cputime和函数文档。</em> <a class="ae lf" href="https://github.com/navdeep-G/showme" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ly">链接</em> </strong> </a> <strong class="jp ir"> <em class="ly">。</em> </strong></p><p id="8d63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">打印传入的参数和函数调用。</strong></p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="6ed8" class="mq mr iq ko b gy nn no l np nq"><strong class="ko ir">ref: </strong><a class="ae lf" href="https://github.com/navdeep-G/showme" rel="noopener ugc nofollow" target="_blank">https://github.com/navdeep-G/showme</a></span><span id="6fb8" class="mq mr iq ko b gy nr no l np nq">@showme.trace<br/>def complex_function(a, b, c, **kwargs):<br/>    ...<br/><br/><br/>&gt;&gt;&gt; complex_function('alpha', 'beta', False, debug=True)<br/>calling haystack.submodule.complex_function with<br/>   args: ({'a': 'alpha', 'b': 'beta', 'c': False},)<br/>   kwargs: {'debug': True}</span></pre><p id="cb3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">打印功能执行时间。</strong></p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="feeb" class="mq mr iq ko b gy nn no l np nq">@showme.time<br/>def some_function(a):<br/>    ...<br/><br/>&gt;&gt;&gt; some_function()<br/>Execution speed of __main__.some_function:<br/>0.000688076019287 seconds</span></pre><p id="8a3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">打印功能CPU-执行时间。</strong></p><pre class="kq kr ks kt gt nj ko nk nl aw nm bi"><span id="5976" class="mq mr iq ko b gy nn no l np nq">@showme.cputime<br/> def complex_function(a, b, c):<br/>     ...<br/><br/> &gt;&gt;&gt; complex_function()<br/> CPU time for __main__.complex_function:<br/>      3 function calls in 0.013 CPU seconds<br/><br/>ncalls  tottime  percall  cumtime  percall filename:lineno(function)<br/>     1    0.013    0.013    0.013    0.013 test_time.py:6(test)<br/>     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}<br/>     1    0.000    0.000    0.000    0.000 {range}</span></pre><p id="78a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考资料部分提供了更多示例的链接。 </p><p id="7cca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止，您已经了解了装饰人员是如何工作的，并且创建了自己的装饰人员。让我们看看一些内置的Python装饰器。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oq"><img src="../Images/124b3205be844285a2695ed8b6845309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*auKvNKGCgL1PpSji"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated"><a class="ae lf" href="https://unsplash.com/@leen_and_pretty_thoughts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">岳翎</a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="ac97" class="mq mr iq bd ms mt mu dn mv mw mx dp my jy mz na nb kc nc nd ne kg nf ng nh ni bi translated">流行的内置Python装饰器</h2><p id="3539" class="pw-post-body-paragraph jn jo iq jp b jq oa js jt ju ob jw jx jy oc ka kb kc od ke kf kg oe ki kj kk ij bi translated"><code class="fe kl km kn ko b"><strong class="jp ir">@classmethod:</strong></code> <em class="ly">创建类的一个实例。(通</em> <code class="fe kl km kn ko b"><em class="ly">cls</em></code> <em class="ly">非</em> <code class="fe kl km kn ko b"><em class="ly">self</em></code> <em class="ly"> ) </em></p><p id="c263" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ly">示例:</em>假设你从不同的数据类型中获取数据，而不是创建多个类，我们可以使用@classmethod来处理它。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div><p class="lb lc gj gh gi ld le bd b be z dk translated">Python中@classmethod的用法。</p></figure><p id="c788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b"><strong class="jp ir">@staticmethod:</strong></code> <strong class="jp ir"> </strong> <em class="ly">你可以在不创建类实例的情况下使用这个装饰器的方法。(无需通过</em> <code class="fe kl km kn ko b"><em class="ly">self</em></code> <em class="ly"> ) </em></p><p id="e0cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ly">举例</em> </strong> <em class="ly"> : </em>假设你想为一个包含一些逻辑但却是该类的not属性的类创建一些helper函数。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="5fb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b"><strong class="jp ir">@Property</strong></code>:OOPs中使用<code class="fe kl km kn ko b">get</code> &amp; <code class="fe kl km kn ko b">set</code>命令的一种方式。</p><p id="036e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"/></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8ed3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每次你调用<code class="fe kl km kn ko b">set</code>或<code class="fe kl km kn ko b">get</code>到盒子的<code class="fe kl km kn ko b">maxlimit</code>值，它会通过<code class="fe kl km kn ko b">@property</code>和<code class="fe kl km kn ko b">@maxlimit.setter.</code></p><p id="d67d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ly">参考文献:<br/> - </em> <a class="ae lf" href="https://www.python-course.eu/advanced_python.php" rel="noopener ugc nofollow" target="_blank"> <em class="ly">高级Python </em> </a> <em class="ly">作者Brend Klein。<br/> -如果你喜欢python你会爱上</em> <a class="ae lf" href="https://realpython.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ly">真正的Python </em> </a> <em class="ly">。<br/> -详细介绍</em><a class="ae lf" href="https://www.programiz.com/python-programming/property" rel="noopener ugc nofollow" target="_blank"><em class="ly">@ property</em></a><em class="ly">如何工作。<br/>——牛逼巨蟒</em> <a class="ae lf" href="https://github.com/lord63/awesome-python-decorator" rel="noopener ugc nofollow" target="_blank"> <em class="ly">装修工</em> </a> <em class="ly">。</em></p><blockquote class="lg"><p id="39c5" class="lh li iq bd lj lk oh oi oj ok ol kk dk translated">我知道这很长，但是如果你到了这里👏敬你。不断学习，不断成长。</p></blockquote><p id="be72" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">在<a class="ae lf" href="https://www.linkedin.com/in/prudhvi-vajja-22079610b/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或<a class="ae lf" href="https://github.com/PrudhviVajja" rel="noopener ugc nofollow" target="_blank"> Github </a>上与我联系。</p></div></div>    
</body>
</html>