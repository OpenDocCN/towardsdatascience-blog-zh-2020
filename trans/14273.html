<html>
<head>
<title>Data visualization: How NAFTA countries are doing in the pandemic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化:北美自由贸易区国家在疫情的表现</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-how-nafta-countries-are-doing-in-the-pandemic-a5ef8216e418?source=collection_archive---------48-----------------------#2020-10-01">https://towardsdatascience.com/data-visualization-how-nafta-countries-are-doing-in-the-pandemic-a5ef8216e418?source=collection_archive---------48-----------------------#2020-10-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="de13" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">在家的时间和疫情期间的总病例数</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c28cfc0fafd4632bed7cce6b0739191a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nkRxW-7AINWSJBjN"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@bonniekdesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">邦妮·凯特</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="534f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="428a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">北美自由贸易协定是由美国、加拿大和墨西哥组成的经济集团。该组织成立于1994年1月1日，旨在加强这些国家之间的贸易关系。其目标之一是与欧洲和中国市场展开正面竞争，这两个市场近年来发展迅猛。</p><p id="525f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">北美自由贸易区本质上是经济区，与其他经济区相比，没有机构或政府来管理该区。由于欧盟以其社会和经济差异而闻名，分析其社会孤立图和疫情期间Covid19的总病例以更好地了解每个国家及其在这种新情况下的差异是很有趣的。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="4acd" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">数据库ˌ资料库</h1><p id="f04f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">所有的数据都来自谷歌移动报告网站，在那里你可以看到社区移动报告，这些报告是关于面对新冠肺炎的政策所带来的变化。这些图表显示了不同地区和不同类别的流离失所趋势。最后，病例总数的数据被从网站<a class="ae kv" href="https://ourworldindata.org/coronavirus" rel="noopener ugc nofollow" target="_blank">我们的世界的数据</a>中删除。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="a4e0" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">预处理和清洗</h1><p id="15c0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><strong class="lq ir">程序的重要库</strong></p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="6f41" class="ng kx iq nc b gy nh ni l nj nk">import pandas as pd<br/>import matplotlib.pyplot as plt</span></pre><p id="83eb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">读取数据</strong></p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="511f" class="ng kx iq nc b gy nh ni l nj nk">link='https://www.gstatic.com/covid19/mobility/Global_Mobility_Report.csv'</span><span id="156d" class="ng kx iq nc b gy nl ni l nj nk">data = pd.read_csv(link)<br/>data.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/e99169e62161bc5b43f8f5b92cccea53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zkgXBnRX42BCH_pj9d--UA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">列太多了</p></figure><p id="45c0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">分隔主列</strong></p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="bc5d" class="ng kx iq nc b gy nh ni l nj nk">data_country = data.iloc[:,[1,7,8,9,10,11,12,13]].copy()</span><span id="8bd4" class="ng kx iq nc b gy nl ni l nj nk">data_country.columns = ['country','date', 'retail', 'grocery', 'parks', 'transit', 'workplaces', 'residential']</span><span id="717d" class="ng kx iq nc b gy nl ni l nj nk">data_country.date = pd.to_datetime(data_country.date)</span><span id="1117" class="ng kx iq nc b gy nl ni l nj nk">data_country.index = data_country.date</span><span id="e3ea" class="ng kx iq nc b gy nl ni l nj nk">data_country.drop(labels = 'date', axis=1, inplace=True)</span><span id="ed34" class="ng kx iq nc b gy nl ni l nj nk">data_country.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/5061b5e8bf5e7f5faa2c46250d289899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*gcQeUXJU9uYHNFXz0PjXOA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">所有国家</p></figure><p id="0800" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><strong class="lq ir">使用“groupby”方法，对“住宅”列的经济集团国家进行分组。</strong></p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="1f9e" class="ng kx iq nc b gy nh ni l nj nk">data_country.groupby(by[data_country.index,"country"])<br/>.mean().unstack()["residential"][['United States','Canada','Mexico']]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/c4c1914b435684c9594bc5ae7a5c2a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*FUwtiRVtrf5DJbu7FHQx2g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仅限北美自由贸易区国家</p></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="7de2" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">数据可视化</h1><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="9695" class="ng kx iq nc b gy nh ni l nj nk">fig, ax = plt.subplots(nrows=1,ncols=3,figsize=(20,4))</span><span id="142a" class="ng kx iq nc b gy nl ni l nj nk">item = "residential" #grocery, parks, transit, workplaces, retailcountrys = ['United States','Canada','Mexico']</span><span id="66d6" class="ng kx iq nc b gy nl ni l nj nk">for i,country in enumerate(countrys):</span><span id="6308" class="ng kx iq nc b gy nl ni l nj nk">data_country.groupby(by=[data_country.index,"country"]).mean().unstack()[item].rolling(window=7).mean().plot(legend=False,color="grey",linewidth=1, alpha=0.4, ax=ax[i])</span><span id="8f1b" class="ng kx iq nc b gy nl ni l nj nk">data_country.groupby(by=[data_country.index,"country"]).mean().unstack()[item][country].rolling(window=7).mean().plot(legend=False,color="blue",linewidth=7, alpha=0.6, ax=ax[i])</span><span id="8281" class="ng kx iq nc b gy nl ni l nj nk">ax[i].set_title(country,fontsize=12,ha='right')</span><span id="5c64" class="ng kx iq nc b gy nl ni l nj nk">ax[i].xaxis.grid(False)</span><span id="3bb5" class="ng kx iq nc b gy nl ni l nj nk">ax[i].set_xlabel("")</span><span id="4381" class="ng kx iq nc b gy nl ni l nj nk">ax[i].set_xticklabels(["","Mar","Apr","May","Jun","Jul","Aug","Sep"])</span><span id="28f0" class="ng kx iq nc b gy nl ni l nj nk">ax[i].xaxis.set_tick_params(labelsize=12)</span><span id="ca40" class="ng kx iq nc b gy nl ni l nj nk">ax[i].yaxis.set_tick_params(labelsize=12)</span><span id="2324" class="ng kx iq nc b gy nl ni l nj nk">if (i==0) or (i==2):</span><span id="4df9" class="ng kx iq nc b gy nl ni l nj nk">ax[i].yaxis.tick_right()</span><span id="993f" class="ng kx iq nc b gy nl ni l nj nk">else:</span><span id="9ab7" class="ng kx iq nc b gy nl ni l nj nk">ax[i].set_yticklabels([])</span><span id="6b06" class="ng kx iq nc b gy nl ni l nj nk">#plt.savefig("nafta.png",dpi=300)</span><span id="6fed" class="ng kx iq nc b gy nl ni l nj nk">plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/2cdfa6c14fb1bdfe4ec400b54e6f009d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mlR8YGZAtYSSOwRLVRAXwQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">整个疫情的社会隔离图</p></figure><p id="d442" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这个图表中，我们用蓝色和灰色突出显示了国家的值，我们有世界上其他国家的值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/1e46bcee52c47919417fd00403e85741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2J3YP_8OAWiyoNACKz_PwQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">每个国家相对于世界的病例总数图表</p></figure><p id="0889" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在第二张图中，我们可以看到，尽管美国有一个指数，并且倾向于拥有与加拿大相似的病例数，但Covid的病例数比加拿大和墨西哥多许多倍，这向我们揭示了与加拿大相比，该病毒尚未得到控制，加拿大有类似的隔离图。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="74d9" class="kw kx iq bd ky kz mw lb lc ld mx lf lg jw my jx li jz mz ka lk kc na kd lm ln bi translated">结论</h1><p id="7fe7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">值得注意的是，这两个图表是不同的，例如，加拿大像墨西哥一样有很高的社会隔离水平，今天它已经有一个低得多的数字，这可能意味着政府和疾病人口有更大的控制。所以，即使美国和加拿大有相似的社会隔离图表，案例数量的图表显示了美国非常大的差异，在集团的所有国家都有非常高价值的参与。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="1031" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为了更好地理解这里观察到的代码和数据，可以链接到<a class="ae kv" href="https://github.com/thyall/Nafta-Pandemic" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上的知识库，以及更深入的北美自由贸易协定<a class="ae kv" href="https://www.infoescola.com/geografia/nafta/" rel="noopener ugc nofollow" target="_blank">内容</a>。</p></div></div>    
</body>
</html>