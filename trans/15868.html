<html>
<head>
<title>Data Science in Production: Quickly Build Interactive UIs for your Data Science projects with Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">生产中的数据科学:使用Dash为您的数据科学项目快速构建交互式用户界面</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-in-production-quickly-build-interactive-uis-for-your-data-science-projects-with-dash-6568e7df5528?source=collection_archive---------26-----------------------#2020-11-01">https://towardsdatascience.com/data-science-in-production-quickly-build-interactive-uis-for-your-data-science-projects-with-dash-6568e7df5528?source=collection_archive---------26-----------------------#2020-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f410" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">这篇博客讲述了如何使用机器学习创建dash应用程序，以及如何将您的数据科学项目部署到云中。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/df6a07844c9f9efa2392281ed4fc02e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHpnDm8eLIZD8ivS-BaIyg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">封面由Jay Kachhadia和Canva共同设计</p></figure><p id="cd3e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我之前的一篇关于<a class="ae lu" rel="noopener" target="_blank" href="/full-stack-data-science-the-next-gen-of-data-scientists-cohort-82842399646e">全栈数据科学:下一代数据科学家群体</a>的博客获得大量关注后，我决定开始一个关于生产中的数据科学的博客系列。本系列将介绍技术栈和技术的基础，您可以熟悉这些技术，以面对真正的数据科学行业，例如机器学习、数据工程和ML基础设施。这将是一个如何通过部署你的模型和用行业中使用的最佳实践创建ml管道来把你的学术项目带到下一个层次的演练。这是本系列的第二部分，你可以在这里看一下第一部分:<a class="ae lu" rel="noopener" target="_blank" href="/data-science-in-production-building-flask-apis-to-serve-ml-models-with-best-practices-997faca692b9">生产中的数据科学:构建Flask APIs来服务具有最佳实践的ML模型</a></p><p id="4151" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇博客将讲述如何快速构建使用机器学习的交互式web应用程序，以及如何将这些应用程序部署到Heroku cloud中。简历上任何可以展示的东西都比仅仅是文本的东西增加了10倍的价值。</p><h1 id="3fe1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Dash:构建数据科学应用的web框架</h1><p id="7383" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><a class="ae lu" href="https://dash.plotly.com" rel="noopener ugc nofollow" target="_blank"> Dash </a>是由Plotly专门为数据科学和人工智能应用而构建的开源web框架。通常需要前端、后端和DevOps团队的全栈应用程序可以由数据科学家使用Dash在几个小时内完成构建和部署。是啊！你可以用Python做任何事情，这就是beautiful❤.</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/8e92e161a78502a983f212705302e0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tHHrtie4fIpL6-KCuTKVZA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们将从头开始建造这整个东西(用Canva创建)</p></figure><p id="aee3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Dash构建在Flask、Plotly.js、React和React Js之上，但在本练习中，我们将用python编写大部分代码，并嵌入一些html和css元素。</p><h1 id="009f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">设置您的环境</h1><p id="b708" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">第一步通常是建立您自己的项目环境，这样您就可以将您的项目库及其版本与本地python环境隔离开来。有两种方法可以专门为您的项目设置python环境:<strong class="la iu"> Virtualenv </strong>和<strong class="la iu"> Conda </strong>。只是为了保持一致，我将在整个项目中使用Python 3.7.3，但你可以使用任何版本，这应该没问题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用pip和virtualenv创建虚拟环境</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用Conda创建虚拟环境</p></figure><p id="2749" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的终端中执行上述任何命令后。您将处于项目自己的虚拟环境中。如果你想在虚拟环境中安装任何东西，它就像普通的pip安装一样简单。在您从事任何项目时，创建虚拟环境始终是业内的标准做法。</p><p id="92eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">进入虚拟环境后，使用app文件夹中github repo的requirements . txt:<a class="ae lu" href="https://github.com/jkachhadia/ipl-prediction/tree/master/app" rel="noopener ugc nofollow" target="_blank">https://github . com/jkachhadia/IPL-prediction/tree/master/app</a></p><div class="mv mw gp gr mx my"><a href="https://github.com/jkachhadia/ipl-prediction/tree/master/app" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">jkachhadia/IPL-预测</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm ks my"/></div></div></a></div><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="e45e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，一切都准备好了！</p><h1 id="b32e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">预处理和构建模型</h1><p id="9f99" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">让我们让这变得更有趣一点，所以我们将为板球比赛建立预测模型，我们将使用来自https://www.kaggle.com/nowke9/ipldata超级联赛(IPL)上的Kaggle:<a class="ae lu" href="https://www.kaggle.com/nowke9/ipldata" rel="noopener ugc nofollow" target="_blank"/>的数据集。IPL时钟达到4.62亿，第12季电视观看时间为3380亿分钟。</p><div class="mv mw gp gr mx my"><a href="https://www.kaggle.com/nowke9/ipldata" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd iu gy z fp nd fr fs ne fu fw is bi translated">2008-2019印度超级联赛</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">逐球印度超级联赛(IPL)板球数据集</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">www.kaggle.com</p></div></div><div class="nh l"><div class="nn l nj nk nl nh nm ks my"/></div></div></a></div><p id="8789" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你已经克隆了上面分享的repo，这里有一个ipython笔记本，向你展示如何预处理一个球接一个球的数据和匹配数据。这有点复杂，所以我不会在这里解释预处理步骤，因为这不是我们的主要目的。该笔记本产生6个预处理数据集，我们稍后将在Dash应用程序中使用这些数据集。我们将以这样一种方式构建应用程序，任何用户都可以调整模型参数来获得所需的预测。我们将建立3个模型:分数预测器，第一局后的获胜概率预测器，以及还剩10局时的获胜概率预测器。</p><h1 id="8ade" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">构建我们的Dash应用程序</h1><p id="59d4" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们现在将开始处理一些代码来构建我们的dash应用程序。让我们创建一个名为app.py的新文件，并从导入我们需要的库开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1dda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们声明我们将在多个函数中使用的所有全局变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0c12" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将导入所有预处理的训练数据，以节省我们的应用程序在预处理上的时间。所有的预处理步骤都在ipython笔记本中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b9a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们用一个外部css样式表启动我们的dash应用程序(样式表部分不是必需的)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h2 id="6885" class="no lw it bd lx np nq dn mb nr ns dp mf lh nt nu mh ll nv nw mj lp nx ny ml nz bi translated">设计应用布局</h2><p id="8fdc" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们现在将使用dash的内部html组件定义来设计web应用程序的外观。有一些html和css知识是很好的，但不是必要的，因为它并不太复杂。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/2351a86a46a66a2409f0e2900ff70dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PX7TbyaIuYvgFOYlqz3MxA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们想要设计的布局</p></figure><p id="aa37" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我们想要设计的webapp的布局，在UI设计方面非常简单。我们必须在dash布局中定义UI中的每一个元素。我们必须指定每个元素的id和样式，以便能够控制和获取数据，并在后端进行处理。理解的一个好方法是阅读和编写下面的代码，并与上面的UI进行比较。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="6566" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们想让它完全动态，这样当随机森林或神经网络被选中时，我们就可以选择调整模型参数，否则看不到它们。因此，当下拉选项改变时，我们将使用回调来动态地改变UI。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1be5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这六个回调将使参数设置的可见性完全动态化，并且非常容易，因为当算法的下拉列表发生变化时，只需要一些条件语句来检查值和设置属性。</p><h2 id="b57c" class="no lw it bd lx np nq dn mb nr ns dp mf lh nt nu mh ll nv nw mj lp nx ny ml nz bi translated">为ML添加逻辑</h2><p id="ab9e" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在，我们将进行有趣的部分，即制作动态ML组件，当我们更新特征或模型参数时，该组件将快速更新预测。当特性或参数组件发生变化时，我们将再次使用dash回调来更新页面的预测组件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="eeb3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你在上面看到的，我们增加了3个回调来更新预测。现在您需要的只是一些运行服务器的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1154" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是啊！我们差不多完成了我们的第一次迷你演出。让我们在本地运行这个。打开您的终端并运行app.py(确保您位于app.py所在的项目文件夹中，并且您位于我们之前创建的虚拟环境中)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8257" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Wohoo！您的应用应该在<a class="ae lu" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8050/ </a>上启动并运行！</p><h1 id="85fb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在Heroku上部署IPL预测应用</h1><p id="24a2" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Heroku是一个云平台，帮助你在他们的云上部署后端应用。是的，我们将在云中部署我们的dash应用程序。</p><p id="efec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始吧。在heroku.com的<a class="ae lu" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank">上创建您的账户。一旦你这样做，并前往仪表板，你将不得不创建一个新的应用程序。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/4e4ad3015b57ecbee0a1e2978c396ebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*myXeqoqxbVn2oQ3bDab41A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Heroku仪表板上部</p></figure><p id="c0e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你点击创建新的应用程序，并相应地命名为我的命名为“iplpredict”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/b289086306a3f64f90f0d1a369c7241a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SzugBrRmc2wuIQmkZR5gHw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的不可用，因为我已经创建了它:p</p></figure><p id="c925" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">厉害！现在，你可以点击你的应用程序，进入设置，将python添加到你的buildpack部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/2cf5136c7e3540ead49f89de7e076adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbJdjz4Rx738rVUVomeoBg.png"/></div></div></figure><p id="20a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你也可以通过安装<a class="ae lu" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"> Heroku CLI </a>来实现这一点，我们最终将不得不这样做来部署我们的应用。</p><p id="211a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安装CLI后，您还可以从命令行创建一个应用程序，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="660d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我喜欢CLI方式，因为我已经是一个Ubuntu/Mac用户5年了。</p><p id="3fbe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们将把两个文件Procfile和runtime.txt添加到app文件夹中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Procfile</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">runtime.txt</p></figure><p id="55b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Procfile基本上会用gunicorn运行你的应用。确保您的虚拟环境中安装了该软件。现在，我们将介绍如何创建自己的requirements.txt文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="1b80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这基本上会将您的所有应用程序/虚拟环境的依赖项转储到requirements.txt文件中。</p><p id="5705" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果你去heroku的部署部分，他们有关于如何部署的非常清楚的说明，但我会把它们放在下面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="7994" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些命令会将您的代码推送到heroku cloud，并使用依赖项构建您的flask应用程序。恭喜你！您已经将dash应用部署到云/生产环境中。</p><p id="9232" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在你可以进入https:// <your-app-name> .herokuapp.com/。还有，你可以在这里查看我的app版本:<a class="ae lu" href="http://iplpredict.herokuapp.com" rel="noopener ugc nofollow" target="_blank">http://iplpredict.herokuapp.com</a></your-app-name></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/214cf98d3876015f69413b7aa25bece7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvRmuj6Tbcu1QDLFb7_kJQ.png"/></div></div></figure><p id="d804" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果它正在运行。你都准备好了！呜哇！</p><h1 id="f927" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="eb65" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">因此，我们构建了我们自己的dash web应用程序，这可以用于您的其他项目，或者您可以在您的简历中展示它，而不仅仅是像以前一样填写您所做的内容。这是真实的，互动的，证明你真的建立了一些东西。Dash还提供许多其他功能，比如构建实时可视化和仪表盘。</p><p id="34fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在gmail dot com的[myLastName][myFirstName]上提问，或者在LinkedIn的<a class="ae lu" href="https://www.linkedin.com/in/jkachhadia" rel="noopener ugc nofollow" target="_blank">上联系我们</a>。</p></div></div>    
</body>
</html>