<html>
<head>
<title>Analyzing Music Video Trends on Youtube Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python分析Youtube上的音乐视频趋势</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-music-video-trends-in-youtube-using-python-11e5750709bd?source=collection_archive---------27-----------------------#2020-11-15">https://towardsdatascience.com/analyzing-music-video-trends-in-youtube-using-python-11e5750709bd?source=collection_archive---------27-----------------------#2020-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="99f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">根据Youtube搜索趋势找出最受欢迎的音乐视频。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4072acf7a5fe1140861615f8ded03fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KTMlu-vv7GeRgc4c"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雅各布·欧文斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1db4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">音乐视频在音乐产业中有着巨大的作用。不仅仅是为了宣传的目的，音乐视频也是为了表现艺术家的形象和形象化的诠释歌曲而制作的。</p><p id="45f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个数字时代，Youtube已经成为全球最主要的流媒体平台。Youtube上有很多不同风格的音乐视频。不可否认，了解音乐行业受欢迎程度的方法之一是查看Youtube上的音乐视频趋势。</p><p id="078a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">你有没有好奇过Youtube上搜索次数最多的音乐视频是什么？</em>因为我一直。这就是为什么我试图通过Pytrends找出Youtube的搜索趋势。Pytrends是Google Trends的API，允许你在Google搜索引擎上检索趋势，包括Youtube。在本教程中，我将向您展示如何深入了解Python中的Youtube搜索趋势。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="80f5" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">项目设置</h1><p id="fbdc" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">您需要做的第一件事是通过<a class="ae kv" href="https://pip.pypa.io/en/stable/installing/" rel="noopener ugc nofollow" target="_blank"> pip </a>安装Pytrends和leav包。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="fb60" class="nc mb iq my b gy nd ne l nf ng">pip install pytrends<br/>pip install folium</span></pre><p id="5178" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装API后，打开Jupyter笔记本，然后导入必要的库，包括:</p><ol class=""><li id="e64e" class="nh ni iq ky b kz la lc ld lf nj lj nk ln nl lr nm nn no np bi translated">熊猫来处理数据帧，</li><li id="d5b6" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated">Seaborn和Matplotlib来制作图表，</li><li id="fe36" class="nh ni iq ky b kz nq lc nr lf ns lj nt ln nu lr nm nn no np bi translated"><a class="ae kv" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">叶子</a>创建可视化的地图。</li></ol><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="8e47" class="nc mb iq my b gy nd ne l nf ng">from pytrends.request import TrendReq<br/>import pandas as pd<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>import folium</span></pre><p id="91ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来的步骤是连接到Google，并确定我们想从Pytrends获得什么样的数据。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="382d" class="nc mb iq my b gy nd ne l nf ng">pytrends = TrendReq(hl='en-US', tz=360)</span><span id="c217" class="nc mb iq my b gy nv ne l nf ng">kw_list = ["music video", "mv"]<br/>pytrends.build_payload(kw_list, cat=0, timeframe='today 5-y', geo='', gprop='youtube')</span></pre><p id="cf0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这种情况下，我使用了<strong class="ky ir">【音乐视频】</strong>和<strong class="ky ir">【MV】</strong>作为主要关键字。此外，我用它作为一个时间框架来检索过去5年的数据。要查看参数选项，可以在这里查看Pytrends <a class="ae kv" href="https://pypi.org/project/pytrends/" rel="noopener ugc nofollow" target="_blank">的文档。</a></p><h1 id="9dfa" class="ma mb iq bd mc md nw mf mg mh nx mj mk jw ny jx mm jz nz ka mo kc oa kd mq mr bi translated">相关查询</h1><p id="126b" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">要查看大多数人感兴趣的术语—与音乐视频相关，我们可以使用相关查询。在Pytrends中，有一个功能可以找到其他用户搜索过的关键字的相关术语。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="156a" class="nc mb iq my b gy nd ne l nf ng">df_queries = pytrends.related_queries()</span></pre><p id="5cc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有两种度量结果，<strong class="ky ir"> Top </strong>和<strong class="ky ir"> Rising </strong>。</p><p id="f430" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">热门</strong>—<strong class="ky ir">最受欢迎的</strong>搜索查询，按谷歌趋势分值(0-100)排序</p><p id="d5e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">上升— </strong>具有最大<strong class="ky ir">的查询在一段时间内增加</strong>搜索频率。如果您想查看最近的命中查询，您可以查看此指标。</p><p id="f357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我结合了音乐视频或MV的最高结果，并用下面的代码选择了5个最高值。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="a5d0" class="nc mb iq my b gy nd ne l nf ng">top_music_video = df_queries.get("music video").get("top")<br/>top_mv = df_queries.get("mv").get("top")<br/>df_top = pd.concat([top_music_video, top_mv] )</span><span id="3b48" class="nc mb iq my b gy nv ne l nf ng">df_top.sort_values(['value'], ascending = False).head(5).reset_index(drop = True)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/37212c04a70d0c34c69b78441bc96d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*jNJUJBh2vBKpU-Wx0oe5hg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">音乐视频热门查询</p></figure><p id="b92f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我用下面的代码选择了上升结果的前5名。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="0bd9" class="nc mb iq my b gy nd ne l nf ng">rising_music_video = df_queries.get("music video").get("rising")<br/>rising_mv = df_queries.get("mv").get("rising")<br/>df_rising = pd.concat([rising_music_video, rising_mv] )</span><span id="2475" class="nc mb iq my b gy nv ne l nf ng">df_rising.sort_values(['value'], ascending = False).head(5)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/3fa75d6bc0fb4fa8b94329a8ce8e8c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*j6QDAyKg_JnJ4ZmkYkIj6A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不断上升的对音乐视频的质疑</p></figure><h2 id="61fa" class="nc mb iq bd mc od oe dn mg of og dp mk lf oh oi mm lj oj ok mo ln ol om mq on bi translated">分析</h2><p id="4e1d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">从上面的结果，我们可以看到，在过去的5年里，音乐视频的趋势是由韩国流行音乐行业主导的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/6102ff8eb1e158b2ae2e54fa880af0e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oKIUaRVLC679HT5U"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">乔尔·穆尼斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c4af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Blackpink </strong>(一个K-pop女子乐队)和<strong class="ky ir"> BTS </strong>(一个K-pop男子乐队)是其音乐视频在Youtube上被搜索次数最多的艺术家。从上升的结果，我们发现有一个BTS的音乐视频叫做<strong class="ky ir">炸药</strong>成为一个巨大的打击和搜索了许多互联网用户。</p><p id="0ff0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有<strong class="ky ir"> Gacha Life </strong>，这是一个促进孩子创造力和讲故事的游戏。Gacha Life的用户喜欢根据Gacha动画制作音乐视频，许多Youtube用户对此感兴趣。</p><h1 id="0a9b" class="ma mb iq bd mc md nw mf mg mh nx mj mk jw ny jx mm jz nz ka mo kc oa kd mq mr bi translated">长期利息</h1><p id="d69b" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">从相关查询的结果中，我们发现了4个与音乐视频或MV相关的主要术语，它们是BTS、Blackpink、Gacha Life和Dynamite。</p><p id="8413" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了了解这些术语在Youtube上的受欢迎程度，我们可以使用<code class="fe op oq or my b">Interest Over Time</code>。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="1f00" class="nc mb iq my b gy nd ne l nf ng">kw_list = ["Gacha Life", "Dynamite", "Blackpink", "BTS"]</span><span id="c985" class="nc mb iq my b gy nv ne l nf ng">pytrends.build_payload(kw_list, cat=0, timeframe='today 5-y', geo='', gprop='youtube')</span><span id="e01c" class="nc mb iq my b gy nv ne l nf ng">df_interest = pytrends.interest_over_time().drop(columns='isPartial')<br/></span></pre><p id="607f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">得到DataFrame形式的数据后，我们可以使用Seaborn和Matplotlib来可视化，如下图所示。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="1571" class="nc mb iq my b gy nd ne l nf ng">plt.figure(figsize=(16, 8))<br/>plt.xticks(rotation=45)<br/>sns.set(style="darkgrid", palette = 'rocket')<br/>ax = sns.lineplot(data=df_interest)<br/>ax.set_title('Music Video Trends Over Time', fontsize=20)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/def3b4bc53436345e704a6e3a7dc881f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PuOknH5BDX4reh59zgSQZQ.png"/></div></div></figure><h2 id="c5b5" class="nc mb iq bd mc od oe dn mg of og dp mk lf oh oi mm lj oj ok mo ln ol om mq on bi translated"><strong class="ak">分析</strong></h2><p id="d6da" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">在这四个词之间，“BTS”从2016年开始流行。人气一直持续到现在，排在第二位的是《Blackpink》。“炸药”本身在2020年中期开始蓬勃发展。与此同时，“嘎查生活”在2018年底开始流行。</p><h1 id="f27d" class="ma mb iq bd mc md nw mf mg mh nx mj mk jw ny jx mm jz nz ka mo kc oa kd mq mr bi translated">按地区划分的利息</h1><p id="9cc6" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">从上面的结果来看，我个人对BTS更感兴趣，因为他们的音乐视频在其他人中占主导地位。所以在这种情况下，我想知道全球范围内BTS观众在Youtube上的传播情况。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="30ba" class="nc mb iq my b gy nd ne l nf ng">kw_list = ["BTS"]</span><span id="468d" class="nc mb iq my b gy nv ne l nf ng">pytrends.build_payload(kw_list, cat=0, timeframe='today 5-y', geo='', gprop='youtube')</span><span id="dacb" class="nc mb iq my b gy nv ne l nf ng">df_interest_region = pytrends.interest_by_region(resolution='COUNTRY', inc_low_vol=False)</span><span id="48de" class="nc mb iq my b gy nv ne l nf ng">df = df_interest_region.sort_values(by='BTS', ascending=False).head(10).reset_index()</span></pre><p id="7cc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我试图创建一个对BTS音乐视频最感兴趣的10个国家的图表。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="a45f" class="nc mb iq my b gy nd ne l nf ng">fig = plt.figure(figsize=(15,5))<br/>plt.bar( df['geoName'],<br/>         df['BTS'],<br/>         color = ['#fa9d96','#fa928a','#ff828a','#ff728a','#ff628a','#ff528a','#ff428a',<br/>                  '#ff328a','#ff228a','#ff028a'])</span><span id="1109" class="nc mb iq my b gy nv ne l nf ng">plt.xticks(rotation=45,ha='right')<br/>plt.title('Countries Which Most Interested in BTS Music Video',y=1.1,fontsize=20)<br/>plt.xlabel('Country')<br/>plt.ylabel('Value')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/27606227060e185c910b0808e6da144f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCkpzU0bLld0usgz4zX1KA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">条形图</p></figure><p id="b55b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您有兴趣查看地图可视化，可以尝试创建由leav提供的Choropleth地图。Choropleth图以阴影颜色显示区间数据，其中较浅的阴影代表较低的数字，较深的阴影代表较高的数字。尝试下面的代码。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="3226" class="nc mb iq my b gy nd ne l nf ng">url = '<a class="ae kv" href="https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/python-visualization/folium/master/examples/data'</a><br/>country_shapes = f'{url}/world-countries.json'</span><span id="ea73" class="nc mb iq my b gy nv ne l nf ng">the_map = folium.Map(tiles="cartodbpositron")<br/>the_map.choropleth(<br/>    geo_data=country_shapes,<br/>    name='choropleth',<br/>    data=df_interest_region,<br/>    columns=['geoName', 'BTS'],<br/>    key_on='properties.name',<br/>    fill_color='Purples',<br/>    nan_fill_color='white',<br/>    fill_opacity=0.8,<br/>    line_opacity=0.5,<br/>)</span><span id="3bfa" class="nc mb iq my b gy nv ne l nf ng">the_map</span></pre><p id="6579" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们来看结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/2b9731e2e52f032b8c41eaa4c1ec9427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V0ERVU2hmoBTKdqzSPM-JA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">等值区域图</p></figure><h2 id="3120" class="nc mb iq bd mc od oe dn mg of og dp mk lf oh oi mm lj oj ok mo ln ol om mq on bi translated">分析</h2><p id="cf48" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">从上面的柱状图我们可以看出，BTS最大的观众来自文莱，其次是另一个亚洲国家，如菲律宾、蒙古、马来西亚和缅甸。这一点得到了地图的支持，地图显示亚洲出现了较暗的阴影。美国和澳大利亚等其他大陆也成为BTS观众的一部分，尽管不像亚洲国家那样大胆。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="9a6d" class="ma mb iq bd mc md me mf mg mh mi mj mk jw ml jx mm jz mn ka mo kc mp kd mq mr bi translated">结论</h1><p id="79b7" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">作为最受欢迎的视频搜索引擎平台之一，Youtube可以让我们了解到世界各地的人们最好奇的是什么样的音乐视频。Pytrends可以利用这些数据，甚至通过使用Seaborn、Folium和Matplotlib来创建这些数据的可视化效果。因为这些工具，现在我们知道在过去的5年里，K-pop在世界音乐产业中占据了主导地位。这种趋势会持续下去吗？我们走着瞧。</p></div></div>    
</body>
</html>