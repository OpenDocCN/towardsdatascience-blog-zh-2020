<html>
<head>
<title>What’s Your Car Worth? — Now With Linear Regression and Correlation!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的车值多少钱？—现在有了线性回归和相关！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-your-car-worth-part-2-ee0500d5c997?source=collection_archive---------23-----------------------#2020-02-29">https://towardsdatascience.com/whats-your-car-worth-part-2-ee0500d5c997?source=collection_archive---------23-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/f6c4381ee27c7fb1a8bd0aec9cbfabea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*12fncbLKhBhhv9nwC0zUzA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">埃里克·麦克林在<a class="ae jg" href="https://unsplash.com/collections/10468659/car-dealership?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="2603" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">你的车值多少钱？</h2><div class=""/><div class=""><h2 id="550a" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">相关和线性回归时间！</h2></div><p id="08c7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你好你好，欢迎回到我的线性回归价格预测。<a class="ae jg" rel="noopener" target="_blank" href="/whats-your-car-worth-a-simple-tour-of-used-car-prices-using-linear-regression-eda-section-e98f89804dd6?source=friends_link&amp;sk=29ca1dc16949f0bde30f258f50459ae6">上周</a>我们检查了一些汽车的EDA，发现玛莎拉蒂的转售价值非常糟糕。简单回顾一下，我们从Cars.com搜集了数据，将我们的车型年份限制在2014年至2018年，清理了我们的数据，去掉了我们认为对我们的车型没有用的东西，并拍了一些品牌及其转售价值的快照。</p><p id="512e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下一步，建立我们的线性回归！对于那些想跳到最后看看模型运行的人，我已经把它上传到heroku，点击<a class="ae jg" href="https://usedcarpricepredictor.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="79bf" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">初始步骤</h1><p id="5cb5" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">因此，在进行线性回归时，你需要做的第一件事就是确定是否有任何显而易见的关系可以用来确定你的最终结果。我们这个模型的目标变量是价格，幸好它是一个连续变量，所以我们不必转换它或做任何疯狂的事情。那么什么可能和价格有很好的关系呢？马上，我可以说我们的years_old列可能有很好的相关性，mileage也是一个很好的相关性。</p><p id="5b44" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所以我们有一些理论，但是当然熊猫和matplotlib帮助我们简化了这个过程。一个简单的df.corr()为我们提供了以下内容:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/53031b8767dd761429f64c7f6a5bb49d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8Cwd6ry6LtSzeUYB33yww.png"/></div></div></figure><p id="35c9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于那些更倾向于视觉的人来说，sns.heatmap()也会给我们带来一些不错的结果:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/3ca8d5f9e3962b7c8a9f0716aae484ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*yGVdQC9pjkOABqY2evqYtA.png"/></div></figure><p id="6b76" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">鉴于我们正在与二手车价值市场合作，看到负相关性是有意义的。例如，汽车行驶的里程越多，价格就越低。这是有道理的。有趣的是，城市英里数和公路英里数之间有很强的负相关性。人们会认为一辆mpg更大的车会有更好的转售价值，但事实显然不是这样。我对此的理论是，那个时期的汽车是在人们仍受经济衰退影响的时候生产的，而且汽油更贵。但现在汽油价格下降了，人们更关心其他汽车功能，高mpg对2019年的买家来说没有那么有价值了。我想对话是这样的“哦，看，这是一辆很酷的车，低里程，而且不太旧。哦，它有一个高城市英里？我想这很酷。”请注意，city_mpg中的相关性比highway_mpg中的稍弱。或许这与优步在纽约为优步出租车融资的浪潮有关？</p><p id="1b52" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">热图很酷，但我发现sns.pairplot在确定相关性方面更有帮助，如下所示:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/53ac411a2eec70d5059db732b553dce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbUU8HayMRNhHcPzjSVc7g.png"/></div></div></figure><p id="9ca9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在这绝对酷多了。我们实际上可以看到相关性的强度……它们并没有那么大。但是！他们肯定给了我们一个开始寻找的地方！让我们仔细看看。</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/329f1b4a6d4e3fe2394a227592adbfdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOfSl8FBXzlLGsszdlgvZA.png"/></div></div></figure><p id="d910" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们最初的相关性属于茄子、辣椒和花的标准模式。开玩笑，那些并不是真正的标准模式，事实上，它们并不擅长帮助我们建立模型。有趣的是，我们看到了一些异常值，一些价格最高的汽车，例如city_mpg和highway_mpg，分别在20和30 mpg线之后。里程(或花)到处都是，但你可以看到50，000英里线后面的高度集中。</p><p id="ddb1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对这些数据进行线性回归并不能真正帮助我们开发模型。看看我们用OLS得到了什么:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ni"><img src="../Images/1324bf16e9894c4f77fce0b586b1bb1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stpFYqA7CpPDta9adVRCuQ.png"/></div></div></figure><p id="cdd6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">不是很有希望，我们的R值，或者解释数据差异的统计数据，非常低，我想看到更高的数据。更能说明问题的是，欧</p><h1 id="d29f" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">肖恩·阿布·威尔逊方法</h1><p id="bb6a" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">那么，当我们的数据对我们不利时，我们该怎么办呢？数据科学家、统计学家等使用各种方法来转换他们的数据，以找到隐藏的关系。但是我们肯定要做的第一件事是我的教练肖恩·阿布·威尔逊说的“让我们把他们放在一起，看看会发生什么！”</p><p id="08b2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面是我们的OLS总结的假人汽车品牌，以及城市_英里，公路_英里，里程和年龄_旧:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nj"><img src="../Images/83bde31bbe98fc07bb9a916aa7bbb21f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_S_RWileAbWbATOJ5UJVg.png"/></div></div></figure><p id="6c31" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">不错吧？我们将R值提高到了0.709，这意味着我们数据中几乎71%的差异可以在我们的模型中得到解释。这很酷，但如果我们检查我们的残差，我们得到的不是超级棒。r是一个很大的数字，但它不是决定我们的模型是否合适的全部。查看我们的残差散点图:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/5a802c8f4116d7df21d555df6b4bdaf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*RkIw7_Ym0cM0XLm6qpV5mw.png"/></div></figure><p id="ba49" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以为我们的模型画一条线，但它不会很漂亮。我们能从这些数据中学到什么呢？</p><p id="2d4f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">值得注意的是，一旦我们纳入品牌，我们的模型有多少是可以解释的。这很有道理，宝马很可能会先获得更高的转售价格，因为车主花了这么多钱购买新车。此外，它们在市场上很受欢迎，很容易就有很强的需求，因此有一个强大而现成的转售市场。</p><p id="b5cf" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">同样有趣的是，现代汽车在转售市场上表现很差。我爸爸会说他们也是蹩脚的车，但我从来没有真正开过，所以我不能在这个小事实上权衡。</p><p id="6791" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">大众汽车在转售市场上也非常糟糕，但有趣的是，在我们的数据集中，它们的数量要少得多。在我们的数据集中，与现代的144个条目相比，只有41个大众。也许我们没有看到他们价值的恰当体现，也许大众是守护者。我很想知道他们在汽车市场上占据了多大的份额，以及我的数据是否真实地反映了这一点。通过这种方式，我可以对某个特定品牌的真正价值得出更多结论。</p><h1 id="3b78" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">奢侈品的价格是多少？</h1><p id="a9e1" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">我和我的搭档注意到的一件事是，在转售市场上，豪华车似乎拥有特殊的溢价。如前所述，这似乎是显而易见的，但我们很好奇奢侈品类别对我们的模型和转售市场有多大影响，所以我们将我们的奢侈品品牌包装成自己的类别。该奢侈品类别由以下品牌组成:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/7430b6d2dd2fcd13856bebc8394ab9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fD_p-BbONHknDm7tFATyzw.png"/></div></div></figure><p id="7f6b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这产生了一些有趣的结果。看看下面的OLS:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/3cb4e178373ffbe9dab2eab3c9294753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33qlv11HY_d02x9a0I1evA.png"/></div></div></figure><p id="dfb3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里系数是我特别感兴趣的数字。对于豪华车类别，我们查看特定的汽车是否在我们的豪华车类别中，价格向上移动$8208.03。对于奢侈品来说，这是一个显著的提升，有趣的是，我在心里把这个数字贴上了“奢侈品价格”的标签。</p><p id="a629" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们看看这个新模型的残差，好吗？</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/93f6513a4b036d550e27424bb93a802a.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*f88fzT95cKfJd5KhjAFbMg.png"/></div></figure><p id="d9fb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">有趣的是，我们已经设法平滑了我们的散点图，这有一点意义，因为我们没有太多的噪音，多个类别将我们的点拉向各处。</p><p id="0002" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们小小的转移似乎已经获得了一些有希望的结果，以及我们在追求适当的预测模型时可以采取的新方向。</p><h1 id="fa8c" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">直到下一次…</h1><p id="7b45" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">我就此打住。我想我还有5分钟的材料要读，这将使这个博客被阅读15分钟，我知道这要求很多我亲爱的读者。</p><p id="40c6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这次会议中，我们学到了很多很酷很有趣的东西，识别相关性，混合和匹配类别来构建我们的模型。我们还学习了奢侈品的价格，我认为这是俏皮的，但你可能认为是显而易见的。最重要的是，我们的系数使我们能够准确量化汽车的每个部件在总价中所占的比重。下周我会把事情分解得更多，所以期待看到更多的OLS和更多的残差图！</p><p id="3a7f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">续在<a class="ae jg" rel="noopener" target="_blank" href="/building-a-linear-regression-model-for-predicting-the-price-of-a-used-car-now-with-logs-54a478438d1">你的车值多少钱第三部分！</a></p></div></div>    
</body>
</html>