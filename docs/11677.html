<html>
<head>
<title>Introduction to GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub 操作简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-github-actions-7fcb30d0f959?source=collection_archive---------14-----------------------#2020-08-13">https://towardsdatascience.com/introduction-to-github-actions-7fcb30d0f959?source=collection_archive---------14-----------------------#2020-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="646c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于数据科学家来说</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e7a83483a9d76bbb4a9d56ea06905c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e2eE4tHIgABdCpFrSY42OA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">看到那些绿色的扁虱真是太好了</p></figure><p id="c17d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您是 DevOps 和 CI/CD 世界的新手，GitHub 操作可能会有点混乱，所以在本文中，我们将探索一些特性，看看我们可以使用该工具做些什么。</p><p id="fd22" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从 CI/CD 的角度来看，GitHub 动作和工作流的主要目标是<strong class="kx ir">在每次有变化的时候测试我们的软件</strong>。这样我们可以发现错误，并在错误出现时立即纠正。</p><p id="d3d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天我们将学习更多关于 GitHub 动作的知识，并学习如何使用 Bash 脚本和 Python 来使用它们。很好，我们开始吧！</p><h1 id="35a1" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">GitHub 操作与工作流</h1><p id="db32" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">首先，最好说明一下 GitHub 动作和工作流之间的区别。正如 GitHub Actions <a class="ae mo" href="https://docs.github.com/en/actions" rel="noopener ugc nofollow" target="_blank">文档</a>所述，Actions 是“<strong class="kx ir">单个任务</strong>，您可以组合它们来创建工作并定制您的工作流”。另一方面，<a class="ae mo" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow#about-workflows" rel="noopener ugc nofollow" target="_blank">工作流</a>是“<strong class="kx ir">定制的自动化流程</strong>，您可以在您的存储库中设置这些流程，以便在 GitHub 上构建、测试、打包、发布或部署任何项目”。换句话说:</p><ul class=""><li id="03ed" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><strong class="kx ir">工作流</strong>:在您的存储库上运行的自动化流程；工作流可以有许多 GitHub 动作</li><li id="51c8" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx ir"> GitHub 动作</strong>:单个任务；它们可以用 Docker、JavaScript 编写，现在也可以用新的<a class="ae mo" href="https://github.blog/changelog/2020-08-07-github-actions-composite-run-steps/" rel="noopener ugc nofollow" target="_blank">复合运行步骤</a>编写 shell 脚本；您可以编写自己的动作或使用其他人创建的动作</li></ul><h1 id="9ab1" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">编写我们的第一个工作流</h1><p id="925d" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们首先创建一个没有动作的工作流，以便理解它是如何工作的。工作流是使用 YAML 文件定义的，您必须将它们存储在存储库根目录下的<code class="fe nd ne nf ng b">.github/workflows</code>目录中。</p><p id="7c20" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要创建工作流，我们需要定义以下内容:</p><ul class=""><li id="bba7" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><strong class="kx ir"> <em class="nh">事件</em> </strong> <em class="nh">触发工作流</em></li><li id="1059" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx ir"> <em class="nh">机床</em> </strong> <em class="nh">每项工作都要运行</em></li><li id="bcaa" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx ir"> <em class="nh">构成工作流的作业</em> </strong> <em class="nh">(作业包含一组执行单个任务的步骤，默认情况下并行运行)</em></li><li id="73c4" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><strong class="kx ir"> <em class="nh">步骤</em> </strong> <em class="nh">每项工作都要运行</em></li></ul><p id="13b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">工作流的<strong class="kx ir">基本语法</strong>是:</p><ul class=""><li id="b849" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">on</code> —触发工作流的事件</li><li id="7c2d" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">runs-on</code>—<strong class="kx ir">机床</strong>每项工作应该运行</li><li id="c14a" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">jobs</code> —构成<strong class="kx ir">工作流</strong>的作业</li><li id="3c8a" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">steps</code>—<strong class="kx ir">任务</strong>每个作业应该运行的任务</li><li id="f27f" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">run</code>—<strong class="kx ir">命令</strong>该步骤应该运行</li></ul><p id="aaec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们需要定义<strong class="kx ir">触发</strong>工作流的事件。在这个例子中，我们想在每次有人推送到存储库时说声问候。</p><p id="0d81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个工作流<strong class="kx ir">运行</strong>由一个或多个<strong class="kx ir">作业</strong>组成。每项工作都在<code class="fe nd ne nf ng b">runs-on</code>指定的机器上运行。该机器可以是 GitHub 托管的运行程序，也可以是自托管的运行程序。我们将使用 GitHub 托管的 runner。</p><p id="9a93" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个作业包含一系列被称为<strong class="kx ir">步骤</strong>的任务。步骤可以运行命令、运行安装任务或运行操作。每个步骤都可以有一个使用操作系统外壳的<strong class="kx ir"> run </strong>命令。这里我们要回显一个信息。</p><p id="30cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">迷惑？让我们看看它是如何工作的。继续在 repo 上的<code class="fe nd ne nf ng b">.github/workflows</code>中创建一个<code class="fe nd ne nf ng b">first_workflow.yml</code>文件，然后粘贴以下代码:</p><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="ea20" class="nm ls iq ng b gy nn no l np nq"># your-repo-name/.github/workflows/first_workflow.yml</span><span id="d06c" class="nm ls iq ng b gy nr no l np nq">name: First Workflow                                               </span><span id="1761" class="nm ls iq ng b gy nr no l np nq"><strong class="ng ir">on:</strong> push                                                  </span><span id="28e0" class="nm ls iq ng b gy nr no l np nq"><strong class="ng ir">jobs:</strong>                         <br/>  first-job:                           <br/>    name: Say hi                           <br/>    <strong class="ng ir">runs-on</strong>: ubuntu-latest                           <br/>   <strong class="ng ir"> steps</strong>:                           <br/>    - name: Print a greeting                             <br/>      <strong class="ng ir">run</strong>: echo Hi from our first workflow!</span></pre><p id="9da8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，如果您将此文件提交到您的存储库，点击它并转到 GitHub 网站上的 Actions 选项卡，您可以看到新的工作流，检查所有运行并查看输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e7a83483a9d76bbb4a9d56ea06905c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e2eE4tHIgABdCpFrSY42OA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们第一个工作流程的输出</p></figure><h2 id="2c7b" class="nm ls iq bd lt ns nt dn lx nu nv dp mb le nw nx md li ny nz mf lm oa ob mh oc bi translated">在我们的第一个工作流中使用动作</h2><p id="1b38" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">行动是单独的任务，我们可以从三个来源使用它们:</p><ul class=""><li id="caa7" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">在与工作流相同的存储库中定义的动作</li><li id="e50e" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">在<strong class="kx ir">公共存储库中定义的动作</strong></li><li id="c264" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">在<strong class="kx ir">发布的 Docker 容器图像</strong>中定义的动作</li></ul><p id="6507" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它们在我们的工作流程中作为<strong class="kx ir">步骤</strong>运行。为了调用它们，我们使用了<code class="fe nd ne nf ng b">uses</code>语法。在本例中，我们将使用由<a class="ae mo" href="https://github.com/mscoutermarsh" rel="noopener ugc nofollow" target="_blank"> Mike Coutermarsh </a>编写的<a class="ae mo" href="https://github.com/mscoutermarsh/ascii-art-action" rel="noopener ugc nofollow" target="_blank">打印 ASCII 艺术文本</a>的动作。因为它是在公共存储库中定义的，所以我们只需要传递它的名称:</p><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="fed2" class="nm ls iq ng b gy nn no l np nq"># your-repo-name/.github/workflows/first_workflow.yml</span><span id="20a3" class="nm ls iq ng b gy nr no l np nq">name: First Workflow</span><span id="635a" class="nm ls iq ng b gy nr no l np nq">on: push                                                  </span><span id="40d3" class="nm ls iq ng b gy nr no l np nq">jobs:                         <br/>  first-job:                           <br/>    name: Say hi                           <br/>    runs-on: ubuntu-latest                           <br/>    steps:                           <br/>      - name: Print a greeting                             <br/>        run: echo Hi from our first workflow!   <br/>     <br/>      - name: Show ASCII greeting                             <br/>        <strong class="ng ir">uses: mscoutermarsh/ascii-art-action@master</strong>   <br/>        <strong class="ng ir">with:</strong>                               <br/>          text: 'HELLO!'</span></pre><p id="7e33" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nd ne nf ng b">with</code>语法是由动作定义的输入参数的映射。结果如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/78a5d8194175625b034f14666e44179c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2j4gjJMnEXEOgWZ1o0x95Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ASCII 艺术动作的结果</p></figure><h1 id="63b8" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">将 Python 与工作流结合使用</h1><p id="573e" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">作为数据科学家，我们在日常生活中会使用大量的 Python，所以学习如何在我们的工作流程中使用它是一个好主意。<strong class="kx ir">设置特定版本的 Python 或 PyPy </strong>是将 Python 与 GitHub 操作结合使用的推荐方式，因为它“确保不同运行者和不同版本 Python 之间的一致行为”。为此，我们将使用一个动作:<code class="fe nd ne nf ng b">setup-python</code>。</p><p id="f215" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，我们可以像通常在机器上一样运行命令。在这里，我们将安装 Scrapy 并运行一个脚本来获取一些关于 GitHub 操作的 TDS 帖子，看看它是如何工作的。因为我们想从我们自己的库中运行一个脚本，所以我们也需要使用<code class="fe nd ne nf ng b">checkout</code>动作来访问它。让我们创建一个新作业来运行脚本:</p><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="bd2d" class="nm ls iq ng b gy nn no l np nq"># your-repo-name/.github/workflows/first_workflow.yml</span><span id="870c" class="nm ls iq ng b gy nr no l np nq">name: First Workflow</span><span id="499f" class="nm ls iq ng b gy nr no l np nq">on: push                                                  </span><span id="bdb3" class="nm ls iq ng b gy nr no l np nq">jobs:                         <br/>  first-job:                           <br/>    name: Say hi                           <br/>    runs-on: ubuntu-latest                           </span><span id="1b99" class="nm ls iq ng b gy nr no l np nq">    steps:                           <br/>      - name: Print a greeting                             <br/>        run: echo Hi from our first workflow!  <br/>                                                     <br/>      - name: Show ASCII greeting                             <br/>        uses: mscoutermarsh/ascii-art-action@master    <br/>        with:                               <br/>          text: 'HELLO!'                                                           </span><span id="2f7f" class="nm ls iq ng b gy nr no l np nq"><strong class="ng ir">  get-posts-job: </strong>                           <br/><strong class="ng ir">    name: Get TDS posts </strong>                           <br/>    runs-on: ubuntu-latest     </span><span id="c488" class="nm ls iq ng b gy nr no l np nq">    steps:                             <br/>      - name: Check-out the repo under $GITHUB_WORKSPACE                               <br/>        <strong class="ng ir">uses: actions/checkout@v2  </strong>       <br/>                                                  <br/>      - name: Set up Python 3.8                               <br/>        <strong class="ng ir">uses: actions/setup-python@v2    </strong>                           <br/>        with:                                 <br/>          python-version: '3.8'          <br/>                                                  <br/>      - name: Install Scrapy                               <br/>        <strong class="ng ir">run: pip install scrapy  </strong>       <br/> <br/>      - name: Get TDS posts about GitHub Actions                                 <br/>        <strong class="ng ir">run: scrapy runspider posts_spider.py -o posts.json</strong></span></pre><p id="2bc3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我想把刮下来的帖子保存到一个文件里，所以我们来学习一下怎么做。</p><h2 id="6ea9" class="nm ls iq bd lt ns nt dn lx nu nv dp mb le nw nx md li ny nz mf lm oa ob mh oc bi translated">持续工作流数据</h2><p id="9821" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">一个<strong class="kx ir">工件</strong>是在工作流运行期间产生的一个文件或文件集合。我们可以将工件传递给同一个工作流中的另一个作业，或者使用 GitHub UI 下载它。</p><p id="30c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们下载文章中的 JSON 文件，看看它是如何工作的。为了处理工件，我们使用了<code class="fe nd ne nf ng b">upload-artifact</code>和<code class="fe nd ne nf ng b">download-artifact</code>动作。要上传工件，我们需要指定文件或目录的路径以及工件的名称:</p><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="1a2f" class="nm ls iq ng b gy nn no l np nq"># your-repo-name/.github/workflows/first_workflow.yml</span><span id="0a4d" class="nm ls iq ng b gy nr no l np nq"># [...]</span><span id="45ae" class="nm ls iq ng b gy nr no l np nq">get-posts-job:                            <br/>    name: Get TDS posts                            <br/>    runs-on: ubuntu-latest</span><span id="fb69" class="nm ls iq ng b gy nr no l np nq">    steps:                             <br/>      - name: Check-out the repo under $GITHUB_WORKSPACE                               <br/><strong class="ng ir">       </strong> uses: actions/checkout@v2 <strong class="ng ir"> </strong>       <br/>                                                  <br/>      - name: Set up Python 3.8                               <br/>        uses: actions/setup-python@v2   <strong class="ng ir"> </strong>                           <br/>        with:                                 <br/>          python-version: '3.8'          <br/>                                                  <br/>      - name: Install Scrapy                               <br/>        run: pip install scrapy         <br/> <br/>      - name: Get TDS posts about GitHub Actions                                 <br/>        run: scrapy runspider posts_spider.py -o posts.json</span><span id="1111" class="nm ls iq ng b gy nr no l np nq">     <strong class="ng ir"> - name: Upload artifact                      <br/>        uses: actions/upload-artifact@v2                        <br/>        with:                                 <br/>          name: posts                                 <br/>          path: posts.json</strong></span></pre><p id="fab4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们可以使用 GitHub UI 下载该文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/2ed81afb3dc566a3d6c4abb3f151c5f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NAtP4ADh8SMhh_Zr4d19Lg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">下载藏物</p></figure><h1 id="3302" class="lr ls iq bd lt lu lv lw lx ly lz ma mb jw mc jx md jz me ka mf kc mg kd mh mi bi translated">创建您的第一个动作</h1><p id="f8c3" class="pw-post-body-paragraph kv kw iq kx b ky mj jr la lb mk ju ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">可以使用 Docker 容器、JavaScript 创建动作，也可以使用 shell 脚本创建动作(复合运行步骤动作)。<a class="ae mo" href="https://github.blog/changelog/2020-08-07-github-actions-composite-run-steps/" rel="noopener ugc nofollow" target="_blank">复合运行步骤动作</a>的主要用例是当您有许多 shell 脚本来自动化任务，并且编写一个 shell 脚本来组合它们比 JavaScript 或 Docker 更容易时。</p><p id="6051" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个动作的三个主要组成部分是<code class="fe nd ne nf ng b">runs</code>、<code class="fe nd ne nf ng b">inputs</code>和<code class="fe nd ne nf ng b">outputs</code>。</p><ul class=""><li id="c289" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">runs</code> — <em class="nh"> </em> <strong class="kx ir"> <em class="nh">(必需)</em> </strong>配置动作代码的路径和用于执行代码的应用程序。</li><li id="df31" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">inputs</code> — <em class="nh"> </em> <strong class="kx ir"> <em class="nh">(可选)</em> </strong>输入参数允许您指定操作在运行时期望使用的数据</li><li id="c054" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><code class="fe nd ne nf ng b">outputs</code> — <em class="nh"> </em> <strong class="kx ir"> <em class="nh">(可选)</em> </strong>输出参数允许你声明一个动作设置的数据</li></ul><p id="3195" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">动作的文件名必须是<code class="fe nd ne nf ng b">action.yml</code>或<code class="fe nd ne nf ng b">action.yaml</code>。让我们使用 GitHub Docs 中的例子，创建一个打印“嘿[用户]”消息的动作。因为这是一个复合动作，我们将使用<code class="fe nd ne nf ng b">using: "composite"</code>语法:</p><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="e775" class="nm ls iq ng b gy nn no l np nq"># <!-- -->action.yml</span><span id="5b16" class="nm ls iq ng b gy nr no l np nq">name: 'Hey From a GitHub Action'</span><span id="b530" class="nm ls iq ng b gy nr no l np nq">description: 'Greet someone'</span><span id="b257" class="nm ls iq ng b gy nr no l np nq"><strong class="ng ir">inputs:<br/>  user:</strong>  # id of input<br/>    description: 'Who to greet'<br/>    required: true<br/>    default: 'You'</span><span id="bbd4" class="nm ls iq ng b gy nr no l np nq">runs:<br/>  <strong class="ng ir">using: "composite"</strong><br/>  steps: <br/>    - run: echo Hey ${{ inputs.user }}.<br/>      shell: bash</span></pre><p id="b107" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果在与工作流相同的存储库中定义了一个动作，我们可以使用<code class="fe nd ne nf ng b">./path-to-action-file</code>来引用它。在这种情况下，我们需要访问存储库中的文件，所以我们也需要使用<code class="fe nd ne nf ng b">checkout</code>动作。</p><p id="d681" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果动作是在公共存储库中定义的，我们可以使用特定的提交、发布版本或分支来引用它。</p><h2 id="f897" class="nm ls iq bd lt ns nt dn lx nu nv dp mb le nw nx md li ny nz mf lm oa ob mh oc bi translated">从同一个存储库中运行操作</h2><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="7786" class="nm ls iq ng b gy nn no l np nq"># .github/workflows/use-action-same-repo.yml</span><span id="7da2" class="nm ls iq ng b gy nr no l np nq">name: Action from the same repo</span><span id="5e5a" class="nm ls iq ng b gy nr no l np nq">on: push <br/>                                                                        jobs:                                 <br/>  use-your-own-action:                           <br/>    name: Say Hi using your own action                           <br/>    runs-on: ubuntu-latest                           <br/>    steps:                             <br/>      <strong class="ng ir">- uses: actions/checkout@v2</strong><br/>                                                            <br/>      <strong class="ng ir">- uses: ./ </strong># the action.yml file is in the root folder <strong class="ng ir">   </strong>                          <br/>        with:                                <br/>         user: 'Déborah'</span></pre><h2 id="dcb5" class="nm ls iq bd lt ns nt dn lx nu nv dp mb le nw nx md li ny nz mf lm oa ob mh oc bi translated">从公共存储库中运行操作</h2><pre class="kg kh ki kj gt ni ng nj nk aw nl bi"><span id="c7e5" class="nm ls iq ng b gy nn no l np nq"># .github/workflows/use-action-public-repo.yml</span><span id="0d19" class="nm ls iq ng b gy nr no l np nq">name: Action from a public repository</span><span id="a1d3" class="nm ls iq ng b gy nr no l np nq">on: push <br/>                                                                        jobs:                                 <br/>  use-your-own-action:                           <br/>    name: Say Hi using your own action                           <br/>    runs-on: ubuntu-latest                           <br/>    steps:                                               <br/>      <strong class="ng ir">- uses: dmesquita/github-actions-tutorial@master  </strong>                          <br/>        with:                                <br/>         user: 'Déborah'</span></pre><p id="a0b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是为了我们的巡演。您还可以在工作流中使用<a class="ae mo" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/using-variables-and-secrets-in-a-workflow" rel="noopener ugc nofollow" target="_blank">变量和秘密</a>，<a class="ae mo" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/caching-dependencies-to-speed-up-workflows" rel="noopener ugc nofollow" target="_blank">缓存依赖关系</a>来加速它们，以及<a class="ae mo" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/using-databases-and-service-containers" rel="noopener ugc nofollow" target="_blank">连接数据库和服务容器</a>来管理工作流工具。</p><p id="0582" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本指南中，我们没有使用 CI 最酷的功能之一，即<strong class="kx ir">经常测试</strong>，这样我们就可以在流程的早期发现 bug。但是我认为在做之前理解动作和工作流程是很好的。我希望现在开始使用 CI 工具会更容易，我计划在接下来的教程中这样做。</p><p id="945d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以看到我们在这里使用的所有代码:<a class="ae mo" href="https://github.com/dmesquita/github-actions-tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/dmesquita/github-actions-tutorial</a></p><p id="946c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天就到这里，感谢阅读！</p></div></div>    
</body>
</html>