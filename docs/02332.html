<html>
<head>
<title>A Thousand Gadgets: My Thoughts on the R Tidyverse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一千个小玩意:我对 R Tidyverse 的看法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-thousand-gadgets-my-thoughts-on-the-r-tidyverse-2441d8504433?source=collection_archive---------13-----------------------#2020-03-05">https://towardsdatascience.com/a-thousand-gadgets-my-thoughts-on-the-r-tidyverse-2441d8504433?source=collection_archive---------13-----------------------#2020-03-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ee73c8d192ccbb19c6b73974bfa40604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NDyFRLQ9di6SoWJSu4Oj3A.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://foto.wuestenigel.com/zoodle-spiraliser-with-yellow-squash/?utm_source=45330253855&amp;utm_campaign=FlickrDescription&amp;utm_medium=link" rel="noopener ugc nofollow" target="_blank">照片</a>由<a class="ae kf" href="https://www.flickr.com/photos/30478819@N08/" rel="noopener ugc nofollow" target="_blank">马可·韦尔奇</a>，<a class="ae kf" href="https://creativecommons.org/licenses/by/2.0/" rel="noopener ugc nofollow" target="_blank"> CC 2.0 </a></p></figure><p id="212f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在有一种 R 的主要方言，被大声宣扬，而且显然方兴未艾:Tidyverse，由 RStudio 颁布，主要是一个人 Hadley Wickham 的努力。我们应该采用它吗？学生该不该学？有 R 方言是个好主意吗？</p><p id="97a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为一个在学术和专业领域广泛使用 R 的人——从科学研究和模拟建模到定制可视化和预测建模——我对此有一些强烈的看法，并且现在教一门 R 课程。</p><p id="810d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">大体上，我对这种“整洁”的时尚持怀疑态度:它不适合我。</p><h2 id="1558" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">我不是没有同情心</h2><p id="575c" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">很容易同情 tidyverse 最初的动力和动机:让 R 变得更容易，特别是对于非程序员。</p><p id="0fc6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Base R 并不容易:它是一种语言的混血儿，有许多不一致之处，是在“数据科学”成为职业之前设计的。在过去糟糕的日子里，我的许多 R 工作既痛苦又乏味，从将数据帧拼成不同的形状，到在它们之上连接和聚合。通常更容易的方法是将数据放入本地 SQL 数据库，对其进行处理，然后将其传输回 R. Ugh。我也看到很多人非常努力地学习 R，尤其是当他们是编程新手的时候——尽管 R 的核心市场是科学家和统计学家，而不是专业程序员。</p><p id="d28a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以这很糟糕，我们需要有所改变。</p><p id="ee57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是让我们客观地看待这些困难。任何人的第一门编程语言都会很难，尤其是当他们试图同时探索机器学习的时候——让一只乌龟在屏幕上移动可能天生就更容易。在研究生院，学习的人经常被强迫学习，而不是因为他们决定对编程本身感兴趣。让我们也考虑一下，仅仅因为我们需要<em class="mc">某些东西</em>去改变，并不意味着 R 的新方言是唯一的答案；事实上，它仍然不是(见下文)。</p><h2 id="59e4" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">批评零分</h2><p id="1fa6" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">这是我对 tidyverse 的第一次不好的感觉。这是一次翻拍 R 的尝试，基本上是按照哈德利·韦翰的形象。我的意思是，以一种对一个人有意义的方式完全改变 R 的界面。现在我被告知哈德利是一个非常好的人，相当谦虚，但我们不能忽视这个目标中的傲慢。为什么要由一个人来决定我们的编码风格，尤其是在开源语言中，不管他的意图有多好？也很难不把这看作是 RStudio 对整个 R 生态系统的土地掠夺——都是为了他们的利益。</p><p id="1c6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我是一个多疑的人，怀疑人群和狂热者——tidyverse 似乎有很多这样的人——所以你可以半信半疑地接受这第零个批评:它根本没有提到 tidy verse 的<em class="mc">有用性</em>,或者它的单个包装的有用性。所以我们继续吧。</p><h2 id="a7d2" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">批评一</h2><p id="5ebd" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">比喻:你(数据科学家)是一个有抱负的厨师，试图将原料变成食物。tidyverse 试图让烹饪变得更简单，给你一个拥有三到四个 T2 千件 T3 小器具的厨房。每个小工具只做一件事，而且非常容易使用——基本上不需要什么技能。</p><p id="bef2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开始做汤时，你把胡萝卜放进洗菜机；然后你把它们移到剥皮机上；然后进入去头机；然后放进切丝机。最后，你的胡萝卜就可以放进锅里了。可能也有一个该死的机器。如果你想要一个不同的切法，比如说，或者磨碎胡萝卜，你会使用完全不同的小工具。</p><p id="7079" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">换句话说，tidyverse 中的每一步都很简单，但是有很多步骤——也就是说，有很多功能。您必须了解每一种方法的作用、名称、参数、假设和局限性。从审美的角度来看，我讨厌这种方式。我喜欢紧凑、简洁的语法，无论我去哪里都一样。我喜欢简单、概括的解决方案——用概括的工具——而不是巴洛克式的解决方案；不管它们有多容易使用。</p><h2 id="7b3a" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">批评二</h2><p id="c4fe" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">不过，这不仅仅是个人编码偏好的问题。tidyverse 似乎被设计成允许非程序员在根本没有学习过编程的情况下用 R 将命令串在一起。您可以过滤()和变异()数据帧，而无需学习如何索引数组；而无需部署环路；无需编写匿名函数。人们很容易编写冗长、杂乱的代码脚本，将一千个众多的函数链接在一起，却丝毫不知道它们内部到底发生了什么。</p><p id="e2b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">公平地说，早在 tidyverse 之前，我们就有科学家程序员的意大利面条式代码了。我没有资格说 tidyverse 在这方面真的有帮助还是有伤害。但是，当我们避免用编程语言编程时，当我们试图简化操作，因此不需要理解 R 时，我很怀疑。毕竟，这是 R 存在和我们使用它的原因:我们从实际编写代码中获得灵活性和能力。如果我们需要的是一些重塑工具的最简单的接口，也许 R 不是合适的平台？毕竟，他们为此制作图形用户界面。</p><h2 id="1323" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">批评三</h2><p id="fbbb" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我讨厌管子。它们在 unix 命令行中有意义，但在 R 中没有意义——尤其是对于难看的%&gt;%符号。当我浏览一个函数时，我想知道有什么数据被传入其中——而不仅仅是有什么东西传入。我希望对象的名字和它们的参数是显式的，这样我就不必每次浏览时都要重新记住整个步骤序列。</p><p id="a7b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们记住，代码是为人类编写的:编写长序列的命令是忘记正在发生的事情和犯错误的秘诀。这也是调试困难的原因，因为中间步骤是隐藏的，并且没有命名。</p><p id="7c56" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您真正需要知道的是，在包开发中不推荐使用管道。</p><h2 id="15fd" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">但是我们能做什么呢？</h2><p id="b542" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">如果这些问题是不采用 tidyverse 的好理由，那么应该做些什么呢？我在开头说过 tidyverse 解决了一些令人难以置信的恼人问题，这些问题需要解决。的确如此。但是这并不是采用整个 she bang——或者随之而来的编码风格的理由。例如，我使用 stringr，它是“韵文”的一个成员，对此我并不觉得有什么不好。但是我越是怀疑我的基本方法论。因此，让我们抛开管道和“tibbles”，以及我们需要一千个小函数而不是用我们选择的语言的构建模块自己编程的感觉。</p><p id="22aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于数据帧的争论，我们在<strong class="ki iu">数据表</strong>中有一个非常明确的替代方案。它的功能和样式是对 base R 中括号符号的适度扩展，对于 SQL 用户来说也是高度合乎逻辑的。它也有其奇怪之处，可能更像是一个高级特性——但这样更好:先学习 base R，准备好了再学习 data.table。Data.table 不会试图降低 R，也不会试图避免编码。它给了你一把价值 1000 美元的厨师刀，而不是满厨房的小玩意，并希望你好好使用它——以免你切掉自己的指尖。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="0461" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这只是风格的问题吗？是的。但是风格很重要。你可以从你的代码中删除所有的空白，这就是“风格”，但是没有人会感谢你的决定。代码也不仅仅是给人们看的，它也是给人们写的时候用来推理的。你的代码风格告诉我们你是如何思考的；它也会限制你的思维:如果你的整个世界是一系列管道和黑盒(tidverse 方式),那么有很多问题你无法解决——或者只能通过脆弱的 Rube Goldberg 装置来解决。</p><p id="6671" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">学习索引。学习控制结构。学习这门语言的基础知识，并用它来编写自己的工具。这就是你开始编程的原因，不是吗？</p><p id="a766" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，放下螺旋器，拿起你的削皮刀，开始练习吧。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="2df5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mc"> Jasper McChesney 是一名高级数据分析师，拥有自然科学和数据可视化方面的背景。他曾在非营利组织、人力资源和高等教育部门工作过。他目前在麻省大学教授 R 课程，在 Udemy 上:</em> <a class="ae kf" href="https://www.udemy.com/course/so-you-need-to-learn-r/?referralCode=ABFCCAD1953B9E7FECCA" rel="noopener ugc nofollow" target="_blank"> <em class="mc">所以你需要学习 R </em> </a> <em class="mc">。</em></p></div></div>    
</body>
</html>