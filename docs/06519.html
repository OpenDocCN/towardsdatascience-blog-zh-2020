<html>
<head>
<title>[EN] Visualising Tree Data with ETE Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ETE工具包可视化树数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualising-tree-data-with-ete-toolkit-bceb1ed12776?source=collection_archive---------52-----------------------#2020-05-23">https://towardsdatascience.com/visualising-tree-data-with-ete-toolkit-bceb1ed12776?source=collection_archive---------52-----------------------#2020-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3cf7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">交给我来帮你拓展业务</h2></div><p id="6aae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个世界很复杂。事物以各种不同的方式联系在一起——有些关系是直观的，有些不是。因此，我们收集并用来描述世界的数据有各种各样的形状和大小。</p><p id="8359" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，数据可视化是数据分析过程中最重要的方面之一。良好的可视化对于帮助客户和利益相关者理解数据至关重要。</p><p id="9412" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结合起来，这两点意味着处理数据的人需要准备好用<em class="lb">最好地说明数据点之间的关系</em>—<em class="lb">对行动可能意味着什么</em>的方式来表示数据。今天，我们来看一个这样的表示和一个你可以用来创建它的工具。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/f8e5d12e9d8299dc4b93c2b86b99752f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kw8mG6Lvk0t4wvvzz5cxhQ.jpeg"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Todd Quackenbush 在<a class="ae ls" href="https://unsplash.com/s/photos/tree?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="9c06" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated"><strong class="ak">作为数据结构的树</strong></h2><p id="3e73" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">工作中，最近接触到了<em class="lb">树</em>。<em class="lb">树</em>是一种表示一组分层数据的方式。树中实例之间的关系很容易理解，这要归功于与我们都熟悉的植物学树的类比。当我们谈论数据结构而不是多年生植物时，根、叶和分支的概念转移得很好。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi my"><img src="../Images/6c0727f8021fbf5cd3ed6d382b14cf84.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*G5CnbEVkpio8vsrQyJYtlw.png"/></div></figure><p id="ac77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">树和层次结构无处不在——常见的现实世界的例子是公司结构和进化树。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mz"><img src="../Images/b03a688bf1659d036fbd39a8115fd7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*huUiBjqTZ_J8FxwZApKhxQ.png"/></div></div></figure><p id="7eab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如您所见，为一组给定的层次链接数据绘制一个树相对容易。但是，当您拥有大量数据，或者您的数据在不断发展时，该怎么办呢？手动重新绘制整个过程既费时又费力…</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="2a6d" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated"><strong class="ak"> ETE工具包</strong></h2><p id="d748" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">…这就是ETE工具包的用武之地。这是一个用于分析和可视化树木的Python库。它最初是由西班牙巴伦西亚Principe Felipe研究中心的生物信息学部门开发的，因此它能够进行各种科学分析。这也是自动化任何树数据结构可视化的一种便捷方式，我将在这里描述它的基础。查看<a class="ae ls" href="http://etetoolkit.org/gallery/" rel="noopener ugc nofollow" target="_blank"> ETE工具包的图库</a>以了解该软件包的一些更高级的特性。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="b355" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated"><strong class="ak">可视化客户转介系统</strong></h2><p id="362a" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">让我们以客户推荐系统为例。您可能很熟悉这种工作方式——购买产品的客户会获得一个唯一的代码，他们可以与朋友分享该代码。如果他们的一个朋友决定也购买该产品，并在购买时引用这个独特的代码，双方都会获得奖励。这是一个双赢的场景——销售产品的公司能够通过激励他们传播信息，鼓励更多的人成为客户，将客户的利益与自己的利益结合起来——当然，客户自己也享受到了折扣。</p><p id="bacf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设每个客户最多可以推荐5个人。也就是说，我们目前有此数据的表格表示，如下所示:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi na"><img src="../Images/efe6da50496bfbc0172e822fc9781094.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*b__CGfObxVVuGonKLxL4ag.png"/></div></figure><p id="392e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有大量购买数据，包括:</p><ul class=""><li id="9752" class="nb nc iq kh b ki kj kl km ko nd ks ne kw nf la ng nh ni nj bi translated">交易日期；</li><li id="b418" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated">客户名称；</li><li id="a553" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated">谁推荐了客户；和</li><li id="9e2e" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated">他们花了多少钱。</li></ul><p id="17b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些数据形成了一个层次结构——每个客户可以表示为树形图中的一个<em class="lb">节点</em>,推荐他们的人在树形图中位于他们之上，而他们继续推荐的人则位于他们之下。我们还可以看到，Alice是“原始”客户，她启动了这个特定的推荐链，也就是说，Alice是唯一没有被其他人推荐的客户。这使她成为了<em class="lb">的根</em>客户。</p><p id="44fd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑到这一点，我们可以手动绘制一个树形图——依次遍历每个客户，找出谁应该在树中与他们相关联，并添加适当的作为<em class="lb">子代，</em>在他们下面分支。但是，当我们乐意为我们做艰苦的工作时，为什么要这样做呢？</p><p id="52e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ETE以<em class="lb"> Newick格式— </em>接受输入，这是一种在数学和科学中简洁描述树形结构布局的相对标准的方式。这里有几个例子:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi np"><img src="../Images/fb96b9c351a9fdc9ac81723a75be6faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGGF1NShsfIpmAocj8oPfQ.png"/></div></div></figure><p id="cdfa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能会注意到，一组分支由一对括号表示。给定节点的分支数由括号中的逗号决定。当然，成对的括号可以嵌套起来，产生越来越复杂的结构。</p><p id="7edb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不打算在Newick格式的细节上花太多时间——只要知道我们可以通过将数据转换成这种格式来告诉ETE我们想要可视化的内容就足够了。我已经为我们写了一些代码来做到这一点，我不会在这里描述——如果你感兴趣，可以看看GitHub上的Jupyter笔记本来了解更多信息。</p><p id="28e1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们的客户数据可以用Newick格式编写如下:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nq"><img src="../Images/15704ef740896817af14fcab13837f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLn8LL3fxk1d7ZEhiFo2GA.png"/></div></div></figure><p id="3205" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看当我们把它输入ETE时会得到什么:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nr"><img src="../Images/092c65d4dc364012018b34e9de1f85d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPZ97WpydbWk4VIMR73TUw.png"/></div></div></figure><p id="43dc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不算太差！目前看起来很基本——但是ETE已经将视觉化过程中的许多复杂性去掉了。更重要的是，每当我们得到更新的数据时，我们可以简单地重新运行我们的代码！</p><p id="0757" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ETE的另一个优点是我们可以很容易地调整树的外观。让我们看看是否可以让它看起来更时髦一点…</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/7ebab16eea9a5aa227c61d02b3bb2f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*cyZSq9yrgXGN1-kIsgO7ng.png"/></div></figure><p id="bcae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那更好。我们仍然只是触及了ETE工具包的表面，但是作为一个快速的例子，这足以让我们理解一些关键的思想。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h2 id="89c2" class="ma mb iq bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated"><strong class="ak">结论</strong></h2><p id="1886" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">人类的大脑喜欢吸取视觉信息。树有一个现成的现实世界的类比，使它们直观且易于理解。这使得它们成为向非专业人士解释数据的一个很好的工具。最后总结一下——大脑有许多天生的优势和弱点。当数据以某种方式呈现给我们时，我们总是更容易消化这些数据，这种方式是<em class="lb">与</em>这些特性相适应，而不是<em class="lb">与</em>相反。</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="450a" class="nt mb iq bd mc nu nv nw mf nx ny nz mi jw oa jx ml jz ob ka mo kc oc kd mr od bi translated">更多信息和积分</h1><p id="266c" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">Andrew Hetherington 是英国伦敦的一名见习精算师和数据爱好者。</p><ul class=""><li id="5a23" class="nb nc iq kh b ki kj kl km ko nd ks ne kw nf la ng nh ni nj bi translated">在<a class="ae ls" href="https://www.linkedin.com/in/andrewmhetherington/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</li><li id="4837" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated">看看我在<a class="ae ls" href="https://github.com/andrewhetherington/python-projects" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上鼓捣什么。</li><li id="f913" class="nb nc iq kh b ki nk kl nl ko nm ks nn kw no la ng nh ni nj bi translated">用来制作本文情节的笔记本可以在<a class="ae ls" href="https://github.com/andrewhetherington/python-projects/blob/master/Blog%E2%80%94Visualising%20Tree%20Data/Visualising%20Tree%20Data.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</li></ul><p id="6b77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Todd Quackenbush 在<a class="ae ls" href="https://unsplash.com/s/photos/tree?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的树照片。</p><p id="d9dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb"> ETE 3:系统发育学数据的重建、分析和可视化。</em></p><p id="c51b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">海梅·韦尔塔-塞帕斯、弗朗索瓦·塞拉和皮尔·博克。</p><p id="e8e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Mol Biol Evol 2016<a class="ae ls" href="http://mbe.oxfordjournals.org/content/early/2016/03/21/molbev.msw046" rel="noopener ugc nofollow" target="_blank">doi:10.1093/mol bev/MSW 046</a></p></div></div>    
</body>
</html>