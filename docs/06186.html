<html>
<head>
<title>#NLPrimaries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">#原色</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/nlprimaries-1a97c61b223c?source=collection_archive---------90-----------------------#2020-05-18">https://towardsdatascience.com/nlprimaries-1a97c61b223c?source=collection_archive---------90-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7254" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">使用自然语言处理分析提及 2020 年民主党总统候选人的推文</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bea1cccfe0a5bab4d77490da78174ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9NsWCOIGGSGIsu070YzLQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@freestocks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">自由股</a>在<a class="ae ky" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5788" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv"> * </em> <strong class="lb iu"> <em class="lv">该分析在二月中旬进行</em> </strong></p><p id="3749" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然今年早些时候民主党初选激烈激烈，但我和我的合作伙伴<a class="ae ky" href="https://medium.com/@juliaychong" rel="noopener"> Julia </a>认为，在我们的数据科学训练营期间，对政治推特进行自然语言处理(NLP)项目是一个好主意。由于 Twitter 是一个非常受欢迎的新闻和人们分享观点的论坛，我们想看看我们是否可以根据 Twitter 的活动发现关于这场比赛将如何进行的任何见解。</p><p id="1450" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们是这样做的:</p><h1 id="565c" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">数据</h1><p id="efaf" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了获得推文，我们使用了一个名为<a class="ae ky" href="https://github.com/twintproject/twint" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Twint </strong> </a>的高级 Twitter 抓取工具，它允许您在不使用 Twitter API 的情况下抓取推文。为了避免明显的偏见，我们专注于<em class="lv">提到</em>候选人的推文，而不是候选人自己写的推文<em class="lv">。</em></p><ol class=""><li id="a341" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">每条推特只包含一个候选人的名字和/或推特账号</li><li id="a061" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">使用来自<em class="lv">验证过的账户的推文，只使用</em>来限制推文的数量，因为推文太多了</li><li id="a9ba" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">从推文中移除了<em class="lv">链接</em>和<em class="lv">图片</em>，并使用<a class="ae ky" href="https://pypi.org/project/langdetect/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">语言检测</strong> </a>移除了<em class="lv">非英语</em></li></ol><h1 id="8176" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">情感分析</h1><p id="0f72" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">为了运行情感分析——从文本中提取感觉/情感——我们使用了<a class="ae ky" href="http://VADER" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> VADER 情感分析</strong> </a>(价感知词典和情感推理机)。正如其文档所述，VADER 是“一个词汇和基于规则的情绪分析工具，专门适应社交媒体中表达的情绪。”</p><ol class=""><li id="3388" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">获得每位候选人推文的正面、负面、中性和复合得分:</li></ol><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="3fb7" class="nm lx it ni b gy nn no l np nq"># Create sentiment analysis functions</span><span id="e665" class="nm lx it ni b gy nr no l np nq"><br/>analyzer = SentimentIntensityAnalyzer()</span><span id="ef87" class="nm lx it ni b gy nr no l np nq">def positive_sentiment(row):<br/>    scores = analyzer.polarity_scores(row['tweet'])<br/>    positive_sentiment = scores['pos']<br/>    return positive_sentiment</span><span id="75eb" class="nm lx it ni b gy nr no l np nq">def neutral_sentiment(row):<br/>    scores = analyzer.polarity_scores(row['tweet'])<br/>    neutral_sentiment = scores['neu']<br/>    return neutral_sentiment</span><span id="f862" class="nm lx it ni b gy nr no l np nq">def negative_sentiment(row):<br/>    scores = analyzer.polarity_scores(row['tweet'])<br/>    negative_sentiment = scores['neg']<br/>    return negative_sentiment</span><span id="7167" class="nm lx it ni b gy nr no l np nq">def compound_sentiment(row):<br/>    scores = analyzer.polarity_scores(row['tweet'])<br/>    compound_sentiment = scores['compound']<br/>    return compound_sentiment</span></pre><p id="3149" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.获得每个候选人在每个类别中的平均极性得分</p><p id="d478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.根据哪个分数更高，将每条推文标记为正面或负面</p><p id="becc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.为每位候选人创建了一个包含正面和负面推文平均数量的字典，用于可视化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/29cbef5e53f2c1c02c1f1e3a6cd46409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*XZs8Oz2Y1cRs8dKl_1RWxQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(将特朗普总统纳入分析进行比较)</p></figure><p id="3b70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到，总体而言，大多数关于每位候选人的推文都被认为是“积极的”，围绕更具争议性的候选人的“消极”情绪有所上升。</p><h1 id="d298" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">主观性分析</h1><p id="36b1" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">对于我们的主观性分析——提取个人意见/观点/信念——我们求助于<a class="ae ky" href="https://textblob.readthedocs.io/en/dev/quickstart.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> TextBlob </strong> </a>，这是一个用于处理文本数据的 Python 库。“TextBlob”提供了一个一致的 API，用于处理常见的自然语言。</p><ol class=""><li id="0b7d" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">获得每条推文的情感</li><li id="0c12" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">使用<a class="ae ky" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">正则表达式</strong> </a>捕获浮点值，然后将字符串转换为浮点值</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/b27c335c11effca2eddd8189e093e701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*U7KByrMYc5tTFhrzcE6OgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="nu">主观性是在[0.0，1.0]范围内的浮动，其中 0.0 非常客观，1.0 非常主观</em></p></figure><p id="5c0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，大多数关于伯尼·桑德斯的推文似乎都非常<em class="lv">客观</em>，而其余的主观性得分呈正态分布。</p><h1 id="fd8f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">TF–IDF</h1><p id="a158" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">TF–IDF</strong></a>(词频–逆文档频率)，在这种情况下，反映了一个词在整个推文中对一条推文有多重要。“TF–IDF 值随着一个词在[Tweet]中出现的次数成比例增加，并被包含该词的[Tweet 集合]中的[Tweet]数量抵消。”对于我们的 TF–IDF 分析，我们使用 Scikit-Learn 的<a class="ae ky" href="https://scikit-learn.org/stable/modules/feature_extraction.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">特征提取</strong> </a>方法。</p><ol class=""><li id="7f11" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated"><a class="ae ky" href="https://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">将</strong></a><a class="ae ky" href="https://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatization-1.html" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">符号化</strong> </a>所有的 Tweets 使用<a class="ae ky" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> NLTK </strong> </a>函数，并将所有的符号小写</li><li id="ba25" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">删除了 NLTK 的<a class="ae ky" href="https://www.geeksforgeeks.org/removing-stop-words-nltk-python/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">停用词</strong> </a> <strong class="lb iu"> </strong>列表中的词</li><li id="dfa1" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">将我们的推文集合转换为令牌计数矩阵</li><li id="0581" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">使用 TfidfVectorizer()、TfidfTransformer()、CountVectorizer()、fit_transform()和 fit()函数获得每个候选人推文的 TF–IDF 向量</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/991e8b32f85659b1347e64ed4303f6c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*x8lcobiOg6Y-KLB0VV7bCA.png"/></div></figure><p id="ada2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过 TF–IDF 分析，我们可以深入了解我们收集的推文中的重要词汇。</p><h1 id="8588" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">单词云</h1><p id="ca3f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">单词云是很好的可视化工具，可以看到候选人的每条推文中哪些单词出现的频率最高。我们利用 NLTK 的<a class="ae ky" href="http://www.nltk.org/api/nltk.html?highlight=freqdist" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> FreqDist() </strong> </a>函数来制作我们的单词云:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="885b" class="nm lx it ni b gy nn no l np nq">word_freqdist = FreqDist(biden_bank)<br/>most_common_biden = word_freqdist.most_common(100)<br/>biden_common_df = pd.DataFrame(most_common_biden, columns=['word', 'count'])<br/>biden_common_df.set_index('word').to_dict()<br/>biden_common_df = pd.DataFrame({biden_common_df['word']:biden_common_df['count']})</span><span id="00da" class="nm lx it ni b gy nr no l np nq"><br/># Create the Word Cloud:</span><span id="0599" class="nm lx it ni b gy nr no l np nq">from wordcloud import WordCloud</span><span id="6692" class="nm lx it ni b gy nr no l np nq">wordcloud = WordCloud(colormap='Spectral').generate_from_frequencies(biden_dictionary)<br/></span><span id="e06a" class="nm lx it ni b gy nr no l np nq"><br/># Display the generated image w/ Matplotlib:</span><span id="151c" class="nm lx it ni b gy nr no l np nq">plt.figure(figsize=(10,10), facecolor='k')<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.tight_layout(pad=0)</span></pre><p id="9571" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个词在“云端”出现得越大，它在推特上的使用频率就越高:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/463e344056e896eeb6b9ae363d93017c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcNecwIb8jAoikOynF6HHw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/0cb0a6820be781712195ddb3646001e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UccpqOF-Wa42R214bvwkwg.png"/></div></div></figure><p id="ace4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与 TF–IDF 类似，我们从每位候选人的推文中反复出现的词语中获得了洞察力。</p><h1 id="71f2" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">基于 LDA 的主题建模</h1><p id="bdec" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Latent_Dirichlet_allocation" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> LDA </strong> </a>或潜在的狄利克雷分配，根据潜在的、未被观察到的相似主题来分离推文中的标记，以帮助用户解释它们。对于我们的 LDA，我们使用了<a class="ae ky" href="https://pyldavis.readthedocs.io/en/latest/readme.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> pyLDAvis </strong> </a>，这是一个用于主题建模可视化的 Python 库。</p><ol class=""><li id="b3c3" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">创建了一个候选人所有推文的列表，并删除了给定和选择的停用词</li><li id="783d" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">对 Tweets 运行 CountVectorizer()和 TfidfVectorizer()函数，然后运行 LatentDirichletAllocation()函数</li><li id="0e25" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">尝试使用 TF 或 TF–IDF 创建七个不同主题的主题模型(民主党初选候选人各一个，特朗普总统一个):</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">每个泡泡代表一个不同的主题，由算法决定</p></figure></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="3d82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总体而言，提到候选人的推文都非常相似，因此很难区分彼此。Twitter 经常是一个非常两极分化的平台，意见从光谱的两端传达，可能导致整体中立。朱莉娅和我觉得，将这一分析与 2016 年总统选举期间大约同一时间的推文进行比较，或者建立一个分类模型，试图区分候选人的推文，这将是有趣的未来工作。然而，就目前而言，看看提到拜登和特朗普的推文可能会很有趣，因为他们是 2020 年总统大选的最后两个人。</p><h2 id="ece6" class="nm lx it bd ly oh oi dn mc oj ok dp mg li ol om mi lm on oo mk lq op oq mm or bi translated">如果你有兴趣看我们项目的完整代码，请查看我的 GitHub！</h2></div></div>    
</body>
</html>