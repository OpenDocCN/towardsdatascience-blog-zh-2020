<html>
<head>
<title>3 Awesome Pandas Tricks for Memory Efficiency</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3 个神奇的熊猫提高记忆效率的窍门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/these-3-tricks-will-make-pandas-more-memory-efficient-455f9b672e00?source=collection_archive---------46-----------------------#2020-08-25">https://towardsdatascience.com/these-3-tricks-will-make-pandas-more-memory-efficient-455f9b672e00?source=collection_archive---------46-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="acd8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你应该马上开始使用这三个技巧，停止使用不必要的工具。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8e2478244b56c3ef9878da0e9e96ed40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XhTA8Pe-loBdG7dY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aaronburden?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="6c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> M </span>任何数据分析任务仍然在笔记本电脑上执行。这加快了分析的速度，因为您已经准备好了熟悉的工作环境和所有的工具。但是你的笔记本电脑很可能不是拥有 x-GB 主内存的“最新野兽”。</p><p id="c9de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后一个记忆错误让你大吃一惊！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/ab7d254f6ef0f54d72db3a8e7e0efccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*BBgUCcbJiw-V8z92.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif 来自<a class="ae ky" href="https://giphy.com/gifs/wwe-reaction-wrestling-h3u7w8BR07IHDsnzQw" rel="noopener ugc nofollow" target="_blank"> Giphy </a></p></figure><p id="20b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你该怎么办？用 Dask？你从来不使用它，这些工具通常有一些怪癖。你应该要求一个火花集群吗？或者说火花在这一点上是不是有点夸张的选择？</p><p id="df88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冷静…呼吸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/fbbeae1bcf0639b70d38dc9b1b9a6d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*Joj_D6oD1MjBU_rl.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif 来自<a class="ae ky" href="https://giphy.com/gifs/cbc-funny-comedy-l1J9NRpOeS7i54xnW" rel="noopener ugc nofollow" target="_blank"> Giphy </a></p></figure><p id="3ad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在考虑使用另一种工具之前，问自己以下问题:</p><blockquote class="mf"><p id="f33c" class="mg mh it bd mi mj mk ml mm mn mo lu dk translated">我需要所有的行和列来执行分析吗？</p></blockquote><p id="64a3" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated"><strong class="lb iu">在您开始之前，这里有几个您可能感兴趣的链接:</strong></p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="36b0" class="mz na it mv b gy nb nc l nd ne">- <a class="ae ky" href="https://www.humanfirst.ai/" rel="noopener ugc nofollow" target="_blank">Labeling and Data Engineering for Conversational AI and Analytics</a></span><span id="4cac" class="mz na it mv b gy nf nc l nd ne">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/880006/11298" rel="noopener ugc nofollow" target="_blank">Data Science for Business Leaders</a> [Course]</span><span id="dff9" class="mz na it mv b gy nf nc l nd ne">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/788201/11298" rel="noopener ugc nofollow" target="_blank">Intro to Machine Learning with PyTorch</a> [Course]</span><span id="2a1c" class="mz na it mv b gy nf nc l nd ne">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/803127/11298" rel="noopener ugc nofollow" target="_blank">Become a Growth Product Manager</a> [Course]</span><span id="cf8c" class="mz na it mv b gy nf nc l nd ne">- <a class="ae ky" href="https://amzn.to/3ncTG7D" rel="noopener ugc nofollow" target="_blank">Deep Learning (Adaptive Computation and ML series)</a> [Ebook]</span><span id="c588" class="mz na it mv b gy nf nc l nd ne">- <a class="ae ky" href="https://aigents.co/skills" rel="noopener ugc nofollow" target="_blank">Free skill tests for Data Scientists &amp; Machine Learning Engineers</a></span></pre><p id="3897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ng">上面的一些链接是附属链接，如果你通过它们购买，我会赚取佣金。请记住，我链接课程是因为它们的质量，而不是因为我从你的购买中获得的佣金。</em></p><h1 id="8fa8" class="nh na it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">技巧 1:阅读时过滤行</h1><p id="94fe" class="pw-post-body-paragraph kz la it lb b lc ny ju le lf nz jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在一种情况下，您不需要所有行，您可以分块读取数据集并过滤不必要的行以减少内存使用:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="72cd" class="mz na it mv b gy nb nc l nd ne">iter_csv = pd.read_csv('dataset.csv', iterator=True, chunksize=1000)<br/>df = pd.concat([chunk[chunk['field'] &gt; constant] for chunk in iter_csv])</span></pre><blockquote class="mf"><p id="29f7" class="mg mh it bd mi mj od oe of og oh lu dk translated">分块读取数据集比一次全部读取要慢。我建议只对大于内存的数据集使用这种方法。</p></blockquote><h1 id="8ddc" class="nh na it bd ni nj nk nl nm nn no np nq jz oi ka ns kc oj kd nu kf ok kg nw nx bi translated">技巧 2:阅读时过滤列</h1><p id="54c7" class="pw-post-body-paragraph kz la it lb b lc ny ju le lf nz jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在一种情况下，您不需要所有的列，您可以在读取数据集时使用“usecols”参数指定必需的列:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="e927" class="mz na it mv b gy nb nc l nd ne">df = pd.read_csv<!-- -->('file.csv', u<em class="ng">secols=['col1', 'col2'])</em></span></pre><blockquote class="mf"><p id="56ca" class="mg mh it bd mi mj od oe of og oh lu dk translated">这种方法通常会加快读取速度并减少内存消耗。因此，我建议对每个数据集使用。</p></blockquote><h1 id="321c" class="nh na it bd ni nj nk nl nm nn no np nq jz oi ka ns kc oj kd nu kf ok kg nw nx bi translated">技巧 3:结合两种方法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/cbea6908d2b63d421f898f21dfe7325e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*tELuwNs6lnPlg4tw.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif 来自<a class="ae ky" href="https://giphy.com/gifs/loop-play-colors-xUA7b0Klw8Wfor7FWo" rel="noopener ugc nofollow" target="_blank"> Giphy </a></p></figure><p id="54a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种方法的伟大之处在于，您可以将它们结合起来。因此过滤要读取的行并限制列数。</p><p id="55b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">要升级你的熊猫游戏，看看我的熊猫系列:</strong></p><div class="ol om gp gr on oo"><a href="https://medium.com/@romanorac/pandas-data-analysis-series-b8cec5b38b22" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">熊猫数据分析系列</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">从提示和技巧，如何不指南到与大数据分析相关的提示，熊猫文章的精选列表。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div><h1 id="ad9b" class="nh na it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">但是我需要所有的列和行来进行分析！</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/68a1f9e1f89186e56b8651a6dd48c26a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*3VF6pVQCo7GCr4qC.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif 来自<a class="ae ky" href="https://giphy.com/gifs/pbs-data-its-okay-to-be-smart-big-xT0BKi1TLjmKiu1HGg" rel="noopener ugc nofollow" target="_blank"> Giphy </a></p></figure><p id="447d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那你应该试试<a class="ae ky" rel="noopener" target="_blank" href="/how-to-process-a-dataframe-with-billions-of-rows-in-seconds-c8212580f447"> Vaex </a>！</p><p id="5bcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Vaex 是一个高性能的 Python 库，用于懒惰的核外数据帧(类似于 Pandas)，以可视化和探索大型表格数据集。它每秒可以计算超过 10 亿行的基本统计数据。它支持多种可视化，允许对大数据进行交互式探索。</p><div class="ol om gp gr on oo"><a rel="noopener follow" target="_blank" href="/how-to-process-a-dataframe-with-billions-of-rows-in-seconds-c8212580f447"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">如何在几秒钟内处理数十亿行的数据帧</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">您应该知道的另一个用于数据分析的 Python 库——不，我不是在说 Spark 或 Dask。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">towardsdatascience.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc ks oo"/></div></div></a></div><h1 id="af25" class="nh na it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">在你走之前</h1><p id="dea3" class="pw-post-body-paragraph kz la it lb b lc ny ju le lf nz jx lh li oa lk ll lm ob lo lp lq oc ls lt lu im bi translated">在<a class="ae ky" href="https://twitter.com/romanorac" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我，在那里我定期<a class="ae ky" href="https://twitter.com/romanorac/status/1328952374447267843" rel="noopener ugc nofollow" target="_blank">发关于数据科学和机器学习的</a>推特。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/b5d426b68cc5a21b1a35d0a157ebc4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*69rP1pwjJi9mLSFE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@cmhedger?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Courtney hedge</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div></div>    
</body>
</html>