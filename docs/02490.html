<html>
<head>
<title>What’s a container and why should I care?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是容器，我为什么要关心？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-a-container-and-why-should-i-care-8410666e3da2?source=collection_archive---------37-----------------------#2020-03-09">https://towardsdatascience.com/whats-a-container-and-why-should-i-care-8410666e3da2?source=collection_archive---------37-----------------------#2020-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2791" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">消除容器的神秘和困惑，以及为什么今天应该使用它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f14fd6a12c2f7909c0e2019058b31361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FXKBSsbgvS-sGX1v"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">托德·克雷文在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e54d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">啊，集装箱，科技界的勒布朗·詹姆斯。如果你以任何身份关注美国体育，你可能对勒布朗·詹姆斯有足够的了解，可以和别人就他进行一次有意义的谈话。然而，如果你不关注任何体育运动，鉴于他在娱乐和新闻媒体上无处不在的形象，你可能至少还知道他的名字，但可能会发现自己处于一种尴尬的境地，有人提到“国王”，并希望你简单地跳进去，知道最近发生了什么以及他昨晚掉了多少分。</p><p id="3f69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">技术世界中的容器也是如此。无论我们在哪里看到，都有人在编写另一个关于容器化他们的小发明的故事，或者容器编排对您的业务至关重要，或者您需要转向为您部署和维护容器的云提供商。如果您已经对容器有所了解，那么这些文章很有价值，可以帮助您了解如何进一步利用该技术来获得更多价值。然而，如果你不属于这一类，你可能知道的关于容器的唯一事情就是你应该知道更多关于容器的事情。这篇文章旨在回答一些关于什么是容器以及在工作中应该如何和为什么使用容器的基本问题。我将使用一个愚蠢的类比从基础开始，最终进展到容器实际如何工作的更多技术描述。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/b469bdeb536afd8c6631cdf17bed8af3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VyJXKtA6dBLrDZj9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">容器和纸杯蛋糕有什么共同点？照片由<a class="ae ky" href="https://unsplash.com/@candidlyrae?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">雷伊·戈德曼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="606f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">集装箱纸杯蛋糕</h1><p id="cfa0" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在我深入研究这项技术之前，让我们先用一个简单的类比来解释容器的用途以及它们为什么有用。举个例子，假设我拥有一家个人纸杯蛋糕公司，在家里烘焙并出售纸杯蛋糕。我知道厨房里的所有东西都在哪里，我知道如何使用我的烤箱和搅拌器，我有我需要的烤盘，知道糖在我当地杂货店的哪个通道，哪个品牌的蛋糕适合我的完美蛋糕。每样东西都完全符合我的需求，我能够做出完全一样的美味纸杯蛋糕，并且可以在家里轻松出售。</p><p id="77a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，假设我的纸杯蛋糕在中欧迅速走红，潜在顾客会求我在阿尔卑斯山开店。什么会出错？有明显的需求，而且我是做纸杯蛋糕的专家，所以为什么不开一家新店来增加我的收入呢？在搬到瑞士并为我的生意租了一个新的面包店后，我很快遇到了一些问题。杂货店在哪里，我用什么牌子的糖？为什么我找不到和我习惯的尺寸差不多的烤盘？为什么烤箱的测量单位是摄氏度，我如何打开计时器？我习惯的每次都能持续搅拌面糊的电动搅拌器在哪里？我甚至不得不担心在不同的海拔和温度下烹饪会改变食物的烘烤方式。最重要的是，我不会说瑞士德语，无法寻求帮助。</p><p id="479f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在努力做好我的第一批蛋糕后，蛋糕沉了下去，尝起来又苦又有点焦。我的失望是无法估量的，我的一天就这样毁了。哪里出了问题，怎么会更好？进入神奇的集装箱。</p><p id="8a5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从头开始，但是这次做一些改变。让我们想象一下，我把一个神奇的海运集装箱放在我家前面的草坪上，并在那里工作，而不是直接在我家外面经营我最初的生意。现在，我提到这是一个神奇的集装箱，因为我可以将我需要的一切无限量地放入这个结构中，并且它有足够的内部空间。我完全按照我喜欢的方式设计容器，有我最喜欢的烤箱、搅拌器和平底锅，足够的柜台空间，以及我制作美味纸杯蛋糕所需的所有配料。我甚至把容器设置到完美的温度、压力和湿度，这样一切都是一样的。由于我的配料永远不会用完，我可以专门在这个容器中工作，并通过我在单元前面制作的窗口出售纸杯蛋糕(我也没有其他爱好、义务或其他人类需求来将我从工作中抽离)。</p><p id="8d9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当这一次纸杯蛋糕像病毒一样传播开来时，我没有放下一切，试图在瑞士重新开始，而是把我的神奇海运集装箱送到海外，在山里重新打开。这一次，我的容器里的所有东西都是我想要的样子。我有我需要的所有材料，并且可以复制我的纸杯蛋糕，所以它们看起来和尝起来都和在家里一样，尽管在一个完全不同的环境中。</p><p id="2939" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个容器，当我的纸杯蛋糕毫无疑问地在北京、约翰内斯堡、里约热内卢，甚至在月球上变得受欢迎时，我可以移动我的容器，或者更好的是，简单地创建一个副本，并立即开始与当地的客户分享我的精彩纸杯蛋糕。多亏了我的神奇容器，我再也不用担心我将要工作的底层环境，而是可以愉快地专注于手头的任务。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/77968c9fcfccb08d7ac3d91b08fd97c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1WGCm4gn7cfwbaVR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Giu Vicente 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="5689" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">回到现实</h1><p id="d708" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">尽管我们都爱纸杯蛋糕和神奇的海运集装箱，但让我们跳回现实，看看这与现实世界有何关联，以及是什么让集装箱变得有用。</p><p id="fc39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很有可能，你在生活中的某个时候听过或说过“奇怪，它对我有用”这句话。如果你像世界上绝大多数人一样(包括我自己)，你讨厌听到这句话，但是当你是说这句话的人时，把它当作一个安全网。在技术世界中，这种小情况发生得比大多数人愿意承认的要多，因为硬件、网络、软件环境，甚至文档实践都因人而异，因机器而异，将过多的随机变量扔进混合物中，阻止应用程序或用例被可靠地复制。</p><p id="947d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使依赖项、设置和其他工具都被精确地记录下来，复制一个工作设置也需要很长时间，并且仍然有可能其中一个步骤执行不正确。回到纸杯蛋糕的比喻，即使我知道如何找到我的纸杯蛋糕所需的所有工具和配料，我也要花很长时间才能在一个新的地方得到我需要的一切，而不是把我的容器带到我已经拥有一切的地方。有了我的集装箱，我可以立即开始烘烤，而不是浪费几天、几周甚至几个月来准备一切。</p><p id="94bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于有了容器，可以消除许多随机性和浪费的时间，因为可以创建一个只包含必要的包、设置和实用程序的标准化映像，以确保一个通用的操作环境，而不管应用程序在哪里运行。也就是说，到底什么是容器，它是如何工作的？</p><h2 id="94a9" class="mu lx it bd ly mv mw dn mc mx my dp mg li mz na mi lm nb nc mk lq nd ne mm nf bi translated">集装箱仅供参考</h2><p id="f4b3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">对容器的标准描述通常是称其为“轻量级虚拟机(VM)”或“名称空间隔离器”虽然这些都是准确的描述，但它们并不是所有用户都能完全理解的，也不能可靠地解释它们做什么和如何工作。为了更好地理解，让我们进一步分解它们。</p><p id="6f0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些不知道的人来说，顾名思义，虚拟机是在主机上运行的虚拟化计算机。换句话说，它是一个共享物理资源(内存、CPU、存储等)的仿真计算机系统。)与运行VM的机器。虚拟机允许您在物理设备上运行不同的操作系统(OS ),而无需双重引导至不同的OS。虚拟机被称为“来宾”，每个虚拟机都在所谓的虚拟机管理程序(我们不会在这里讨论)之上运行唯一的来宾操作系统。随着单台机器上虚拟机数量的增加，运行所有来宾操作系统所需的空间和资源也会随之增加，主机可能会因为所有的限制而陷入困境。</p><p id="e82f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，容器运行在主机操作系统之上，不需要第二个客户操作系统来运行。每个容器共享主机的内核，并有可能在必要时共享库和二进制文件。因为这些容器不需要它们自己的独立资源，所以它们最终比基于VM的容器小得多，因此被称为“轻量级VM”任何特定的虚拟机都可能有几千兆字节大小，启动需要几分钟，而几乎相同的容器占用几兆字节，可以在几秒钟内启动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/1c6b915fd825007293e5485e6934ca06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5q59qbJjRrJRe2rXwYvFnQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">唯一主机和容器命名空间的可视化表示</p></figure><h2 id="d633" class="mu lx it bd ly mv mw dn mc mx my dp mg li mz na mi lm nb nc mk lq nd ne mm nf bi translated">名称空间隔离</h2><p id="19d5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Linux有一个被称为名称空间的特殊特性，它是在不同资源之间划分或“隔离”的一种方式。这些名称空间包括用户列表、进程id和网络资源。任何使用与宿主不同的命名空间的进程都与宿主的资源隔离。例如，具有不同用户名称空间的应用程序将拥有一组唯一的用户ID，所有用户ID都拥有特定应用程序所需的权限。如果您希望某个特定用户拥有某个应用程序的特权，而不是更大的主机的特权，这是很有用的。</p><p id="079c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">隔离名称空间的过程是容器的基础，因为默认情况下，除了主机之外，所有容器都使用自己唯一的名称空间。这允许对容器内运行的所有应用程序进行更好的控制和更具体的控制。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/2f29b9ecef5518855cc3e0ce7c49db17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4sE4nypT_sQ_1jZTkJbXzw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">共享网络和IPC命名空间的容器和主机的可视化表示</p></figure><p id="731b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，请注意，容器不需要与它们的主机完全隔离。上图显示了一个与主机共享IPC和网络名称空间的容器，允许容器使用与主机相同的网络接口以及共享内存。共享命名空间只有在应用程序需要时才有用，例如在为web应用程序共享网络命名空间时，使用与主机相同的主机名、网络接口和IP地址。</p><p id="90ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为什么所有这些都很重要？给定这些名称空间的划分，容器变得可复制，并且更能避免各种依赖性、配置或资源问题，这些问题会阻止应用程序在不同的机器上可靠地运行。因此，容器可以很容易地在完全不同的系统上复制，并按预期运行，因为没有其他进程、包和设置妨碍。这还有一个额外的好处，即更复杂的操作可以在容器内完成，而不会干扰主机。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/48c4cea93c334635904f64bbc788cf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cC9ljxde1C1GezV0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尼克·吉奥在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="d9c3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">最终蜂鸣器</h1><p id="f73c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在，您有望对什么是容器以及一些关键原则有一个相当好的理解。利用容器是证明您的应用程序是快速、轻量级的，最重要的是，是可再现的一个很好的实践。即使在容器中运行简单的应用程序也能给软件的开发和部署带来巨大的好处。</p><p id="4b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然您可能仍然不知道“国王”下一个追逐的记录是什么，但您现在已经准备好成为您工作的容器的国王或女王，并了解它们如何在实现您的软件梦想中发挥关键作用。请继续关注未来关于如何在实践中构建、运行和部署容器的文章，这样您就可以真正开始统治您的容器王国了。</p></div></div>    
</body>
</html>