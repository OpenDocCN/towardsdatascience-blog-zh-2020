<html>
<head>
<title>Automate python scripts with AWS Lightsail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 AWS Lightsail 自动化 python 脚本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-python-scripts-with-aws-lightsail-b8dfdd5b0a2f?source=collection_archive---------11-----------------------#2020-02-10">https://towardsdatascience.com/automate-python-scripts-with-aws-lightsail-b8dfdd5b0a2f?source=collection_archive---------11-----------------------#2020-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ac5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">请跟随我在 AWS Lightsail Ubuntu 实例上自动化 python 脚本的过程。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9d85cfaea3a6c5f6151b79a661f98b43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9yXunrNxP3V27CqWhhrmg.png"/></div></div></figure><p id="d924" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我作为一名数据科学家的工作中，我逐渐意识到自动化工作流的每个方面是多么必要。当大多数人听到数据科学这些词时，他们往往会想到机器学习和 AI，但实际上数据科学家的大部分时间都花在了各种工作上。在这篇博客中，我将关注使用 AWS Lightsail 的数据收集自动化。</p><p id="ee73" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面概述的项目都托管在我的<a class="ae lq" href="https://github.com/Landstein/AWS-Lightsail" rel="noopener ugc nofollow" target="_blank"> github </a>上</p><p id="c829" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">1.创建一个 AWS Lightsail Ubuntu 实例</p><p id="53dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.将专用 IP 地址应用于实例</p><p id="a93a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.在 Ubuntu 实例上安装 Python3.7 和 PIP</p><p id="24d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.将 python 存储库克隆到实例</p><ul class=""><li id="228e" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">python 脚本将调用 reddit 的 api，并将来自 reddit.com/r/learnpython 的所有提交内容存储到一个 csv 文件中</li></ul><p id="a703" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">5.创建每小时运行一次的 cron 作业</p><p id="c3d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在亚马逊网络服务上创建一个 Ubuntu LightSail 实例</strong></p><p id="482d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你是个人开发者或个人项目爱好者，Lightsail 可以帮助你部署和管理基本的云资源。如果你只是需要虚拟专用服务器，亚马逊 Lightsail 是最容易上手 AWS 的方法。Lightsail 包括快速启动项目所需的一切——虚拟机、基于固态硬盘的存储、数据传输、DNS 管理和静态 IP。创建实例后，您可以轻松地连接到它。您可以使用 Lightsail 控制台、Lightsail API 或 Lightsail 命令行界面(CLI)来管理实例。(【https://lightsail.aws.amazon.com/】T4)</p><p id="0cf6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，你需要在<a class="ae lq" href="https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Flightsail.aws.amazon.com%2Fls%2Fwebapp%3Fstate%3DhashArgs%2523%26isauthcode%3Dtrue&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fparksidewebapp&amp;forceMobileApp=0" rel="noopener ugc nofollow" target="_blank">亚马逊 LightSail </a>注册。第一个月是免费的，这将给你足够的时间来决定这项服务是否是你所需要的。</p><p id="5064" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">登录后，您应该会看到 Lightsail 仪表盘。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ma"><img src="../Images/96ff8209059387c2b4d652859d15a2c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZ5y6WCB9pUrwuCcjnoAeA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">Lightsail 仪表板</p></figure><p id="2199" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">创建一个 Ubuntu 实例</strong></p><p id="94b8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">1.单击“创建实例”按钮(上面圈出的)。</p><p id="db1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.在 pick your instance image 下，选择<strong class="kw iu"> Linux/Unix </strong></p><p id="2c45" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.仅选择操作系统</p><p id="4ea6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.选择 Ubuntu 18.04</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/23c7de7338893b64c4d3566af1e92bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuDmb58EaguR7T8vdtFnOQ.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">创建 ubuntu 实例</p></figure><p id="e565" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">5.选择您的实例计划:对于这个项目，我将使用最便宜的选项($3.50)，因为它足以运行大多数 python 脚本。还有，别忘了第一个月是免费的！</p><p id="3f42" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">6.命名实例:对于这个项目，我将实例命名为“Ubuntu-Automation”</p><p id="9634" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">7.选择创建实例</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/80cfdcb21888bcc2b28082e1cde9fb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xdmwp81o4Wm50z6iC38McQ.png"/></div></div></figure><p id="5a2a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">选择创建实例后，您将返回到 AWS LightSail 仪表板。创建 Ubuntu 实例需要几分钟时间。创建实例时，状态将为“待定”,如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/3c50395be9472d3747bc65dfeab08361.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*yf4HDGfJ5Hs_fFvO9oLymA.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">待定创建</p></figure><p id="5f1f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建实例后，状态将变为“正在运行”。您还将看到分配给该实例的 IP 地址，对于我的实例，IP 地址是 3.227.241.208。此 IP 地址是动态的，每次重新启动实例时都会改变。根据您计划托管的项目，可能有必要设置一个静态 IP 地址。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/b98ce1c3c132fdd65d2279481cfbca67.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*-yrDmLcBmIlTs1_AbLi0Og.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">Ubuntu 实例已创建并正在运行</p></figure><p id="c117" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">创建一个静态 IP 地址</strong></p><p id="4d7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建静态 IP 是可选的，只有在项目需要时才是必需的。我将创建一个静态 IP 地址，因为出于安全原因，我只向这个 IP 地址打开我的 SQL server。在初始设置之后，我更喜欢从我的本地机器 SSH 到 Ubuntu 实例，拥有一个静态 IP 使这个过程更容易。</p><p id="1624" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">1.在 Lightsail 仪表板中选择“网络”选项卡</p><p id="a5e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">2.点击“创建静态 IP”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/0040c4b282a7bb90d6864dcaf3d10c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ENv1D6c4gvIJRrlJpWSeA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">网络仪表板</p></figure><p id="85b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.在“附加到实例”下选择您的 Ubuntu 实例服务器</p><p id="1466" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.给静态 IP 一个名称</p><p id="49ac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">5.点击“创建”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/22f13b3f57943fb3063f7727e85ed50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mV3OwV-59A2Z8Nl_Z02qOw.png"/></div></div></figure><p id="613a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，您应该会看到新的静态 IP 地址。此 IP 地址不会改变。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/77b98058faaeb06cf87d58325e1b9525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uWO4TXh99AVqnRGlAfKorw.png"/></div></div></figure><p id="9d93" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">向前迈进，我的静态 IP 地址将是 18.213.119.58，这是我将在这个项目的其余部分使用。</p><p id="10cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> Python 自动化</strong></p><p id="9a3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这个项目，我将创建一个调用 Reddit API 的 python 脚本，并收集来自 reddit.com/r/learnpython.的所有新提交内容。对于本文的范围，我不会回顾这个特定的脚本是如何工作的，但是，你可以在<a class="ae lq" href="https://github.com/Landstein/AWS-Lightsail" rel="noopener ugc nofollow" target="_blank"> GitHubLink </a>查看所有代码。</p><p id="a919" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">使用 SSH 连接到 Ubuntu 实例</strong></p><p id="20af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从 Lightsail dashboard 中，您可以使用基于 web 的 SSH 工具连接到您的 Ubuntu 实例。在初始设置之后，我更喜欢使用 SSH，因为它更简单，但是我确实发现使用基于 web 的工具更容易与我在这篇博客中回顾的设置进行交互。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/c51a11cc3c1702f9edddae20b734bbb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*_P70UyTvHqJhVLRc5gnCSA.png"/></div></figure><p id="e536" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">终端 SSH 连接</strong></p><p id="c241" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在右上角选择帐户&gt;帐户。这将带您到帐户仪表板，您可以在那里下载您的 SSH 密钥。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/67b6f3b13d02c1da138f17ab0ac56f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*IPee9ge2JNlCmZ6S21NMEg.png"/></div></figure><p id="2830" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在 Lightsail 帐户面板中，选择“SSH 密钥”,然后下载。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/925e5ebda4353c01c976efae5caf5509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ef9dAbHxAkgH6-M_LG1alw.png"/></div></div></figure><ul class=""><li id="8eb8" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">在本地计算机上，导航到~/。通过运行命令 cd ~/来运行 ssh。嘘</li></ul><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="f39d" class="ms mt it mo b gy mu mv l mw mx">cd ~/.ssh</span></pre><ul class=""><li id="3c5e" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">将下载的密钥复制到此位置</li><li id="b5ab" class="lr ls it kw b kx my la mz ld na lh nb ll nc lp lw lx ly lz bi translated">要检查密钥是否已复制到该位置，请运行命令 ls 列出所有文件。(请注意，此方法仅适用于基于 Unix 的操作系统。)</li></ul><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="cd5e" class="ms mt it mo b gy mu mv l mw mx"> ls</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/1e6c6aaf841e64dd785c8a660b56ec58.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*cqTDVI4PLT4tgQIjRX6SnA.png"/></div></figure><p id="d76e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要通过 SSH 连接，请运行以下命令</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="80db" class="ms mt it mo b gy mu mv l mw mx">ssh -i ~/.ssh/lightsail.pem -T ubuntu@{your_lightsail_IP_address}</span></pre><p id="d811" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我的 Ubuntu 服务器的 IP 地址是 18.213.119.58。为了连接，我将使用以下命令</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/4cd72a5822937a91dd4dcbf6234670b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZPFdHgeytVd-FjUziZ_8Q.png"/></div></div></figure><p id="868b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一次连接时，您会看到以下消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/901f020f0a30aacd9de19b238f3f8547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BE13RXxuQLTxm9GWMY9Mzg.png"/></div></div></figure><p id="1cbd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">选择“是”连接到您的 Ubuntu 实例。</p><p id="a3f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">连接后，您将看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/ccae78ca9ee5b09b4ac7676b659d5711.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*sQ6qCET4gHe5VrXdXoDVvA.png"/></div></div></figure><p id="cb3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">基于 web 的 SSH 连接和本地终端 SSH 连接都是有效的并且可以工作。我只是更喜欢通过终端连接。</p><p id="458d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在 Ubuntu 实例上获取 python 脚本</strong></p><p id="6139" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我将 python 脚本下载到 Ubuntu 实例的首选方法是通过 Git。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="00ef" class="ms mt it mo b gy mu mv l mw mx">git clone <a class="ae lq" href="https://github.com/Landstein/AWS-Lightsail.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Landstein/AWS-Lightsail.git</a></span></pre><p id="bf9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">(如果你的 ubuntu 实例上有你需要的配置文件，而你又不想让它托管在 github 上，你可以使用亚马逊的 S3 来传输)</p><p id="c42f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">安装 Python3.7 和 PIP </strong></p><p id="9a1c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于安装 Python 和 PIP，我建议通过 Lightsail 仪表板使用基于 web 的 SSH。</p><p id="523a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在存储库文件夹中运行以下命令，该命令将运行以下代码并安装 Python3.7 和 PIP。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="992a" class="ms mt it mo b gy mu mv l mw mx">bash install_python.sh</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="279e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">安装 Python 库</strong></p><p id="e521" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来安装 python 库 praw 和 pandas。运行批处理文件 python_libraries.sh。</p><p id="02a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Praw: Python reddit aPI 包装器</p><p id="0249" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">熊猫:数据处理和分析</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="f432" class="ms mt it mo b gy mu mv l mw mx">bash python_libraries.sh</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7721" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">设置 Cron 作业</strong></p><p id="3c70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">cron 软件实用程序是一个基于时间的作业调度程序，在类似 unix 的计算机操作系统中。设置和维护软件环境的用户使用 cron 来安排作业(命令或 shell 脚本)在固定的时间、日期或间隔定期运行。它通常会自动进行系统维护或管理——尽管它的通用性质使它在从互联网下载文件和定期下载电子邮件等方面非常有用(wikipeida.com)。</p><p id="d96a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了完全自动化这个过程，最后一步是让 cron 作业定期运行。</p><p id="64ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这个项目，我打算让我的脚本每小时运行 15 分钟。cron 命令将如下所示:</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="5786" class="ms mt it mo b gy mu mv l mw mx">15 * * * * /usr/bin/python3 /home/ubuntu/AWS-Lightsail/learnpython_to_csv.py &gt;&gt; ~/cron.log 2&gt;&amp;1</span></pre><p id="1ce2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想尝试为你的 cron 任务设置不同的时间间隔，我建议你先看看<a class="ae lq" href="https://crontab.guru/" rel="noopener ugc nofollow" target="_blank">https://crontab.guru/</a>。</p><p id="36a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">创建 Cron 作业</strong></p><p id="0c28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用以下命令将编辑器设置为 vim</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="71eb" class="ms mt it mo b gy mu mv l mw mx">export EDIOTR=vim</span></pre><p id="39a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">进入 vim 并编辑 cron 作业</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="0dd3" class="ms mt it mo b gy mu mv l mw mx">crontab -e</span></pre><p id="31dc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此时，VIM 将启动，您将能够编辑您的 cron 作业。</p><ol class=""><li id="6aef" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp nj lx ly lz bi translated">按 I 键进入插入模式</li><li id="4a12" class="lr ls it kw b kx my la mz ld na lh nb ll nc lp nj lx ly lz bi translated">进入插入模式后，将 cron 作业复制并粘贴到编辑器中</li><li id="5c94" class="lr ls it kw b kx my la mz ld na lh nb ll nc lp nj lx ly lz bi translated">按退出键</li><li id="859f" class="lr ls it kw b kx my la mz ld na lh nb ll nc lp nj lx ly lz bi translated">按:(冒号)、w(写)、q(退出)保存并退出 vim</li></ol><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="f25b" class="ms mt it mo b gy mu mv l mw mx">:wq</span></pre><p id="d61e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在您已经完成了，您的脚本将按照 cron 作业中给定的时间间隔运行。</p><p id="bdb9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要检查您的 cron 作业，您可以运行命令 crontab -l 来查看所有当前的 cron 作业。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="f53a" class="ms mt it mo b gy mu mv l mw mx">crontab -l</span></pre><p id="fc77" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">出于日志记录的目的，打印语句和错误将存储在 cron.log 文件中。</p><pre class="kj kk kl km gt mn mo mp mq aw mr bi"><span id="ce3b" class="ms mt it mo b gy mu mv l mw mx">cat cron.log</span></pre><p id="c147" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您看到类似的输出，这意味着一切都在工作！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/c6db9f6a1f758ad1056b617b7bd8d217.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*TFsIeHIbkPEuKDZSMCFnsg.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">cron.log</p></figure><p id="98ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">设置视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl ni l"/></div></figure></div></div>    
</body>
</html>