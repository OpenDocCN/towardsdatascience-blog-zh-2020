<html>
<head>
<title>Stars Charts in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的星图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/stars-charts-in-python-9c20d02fb6c0?source=collection_archive---------35-----------------------#2020-08-18">https://towardsdatascience.com/stars-charts-in-python-9c20d02fb6c0?source=collection_archive---------35-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b6d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Diamonds 和 Matplotlib 创建星图的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d4d1d9a8897c7faee9283a43312a93dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oBoOAz2f3niInZ6d"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">戴夫·赫林在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="35d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钻石是数据科学家最好的朋友。更具体地说，在 Kaggle 上发现的钻石数据集<a class="ae ky" href="https://www.kaggle.com/shivam2503/diamonds" rel="noopener ugc nofollow" target="_blank">。在本文中，我将通过一个简单的工作流程来创建一个星图(又名蜘蛛图或雷达图)。本教程改编自</a><a class="ae ky" href="https://www.pythoncharts.com/2019/04/16/radar-charts/" rel="noopener ugc nofollow" target="_blank"> Alex 在 Python Charts </a>的精彩工作流程。本文中的所有代码和所需的数据集都可以在 GitHub 的<a class="ae ky" href="https://github.com/Datadolittle/Diamond_Star_Chart" rel="noopener ugc nofollow" target="_blank">中找到。</a></p><h2 id="7e5e" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">钻石是数据科学家最好的朋友</h2><p id="15ff" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，您需要几个库。我正在运行 Python 3。我使用 Jupyter 笔记本、pandas、matplotlib 和 numpy 创建了这个工作流。如果您的系统中没有这些软件包，可以通过 pip 或 conda 安装它们。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="e150" class="lv lw it mu b gy my mz l na nb">pip install jupyterlab<br/>pip install pandas<br/>pip install matplotlib <br/>pip install numpy</span></pre><p id="e754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集可以从<a class="ae ky" href="https://www.kaggle.com/shivam2503/diamonds" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>下载，大小应该在 3.2 MB 左右。我已经在 Github 上包含了数据集的副本。我在数据文件夹里有数据集。用熊猫加载数据集，删除额外的索引列，我们就可以开始了！</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2784" class="lv lw it mu b gy my mz l na nb">df = pd.read_csv("data/diamonds.csv")<br/>df.drop("Unnamed: 0", axis=1, inplace=True)</span></pre><h2 id="623c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">3 C 的水平</h2><p id="8102" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">钻石的 4 C 标准是切割、颜色、净度和克拉。切割、颜色和净度被定义为钻石行业中使用的分类变量。克拉是代表宝石重量的数字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/3cdb37f1711e284848c3ad09d2709ef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tniqWNvNJ1_eQPZm"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@haozlife?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张浩</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="077e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了创建星形图，我们需要用数字来表示钻石行业术语。为此，我们需要收集数据集中的级别信息。Cut 由五个级别组成，其中<strong class="lb iu">理想</strong>为最高级别【4】，<strong class="lb iu">一般</strong>为最低级别【0】。在颜色的七个等级中，<strong class="lb iu"> D </strong>为最高等级【6】，而<strong class="lb iu"> J </strong>为最低等级【0】。最后，净度由八个级别组成，其中<strong class="lb iu"> IF、</strong>表示内部无瑕疵为最高级别【7】，而<strong class="lb iu"> I1 </strong>、内含物级别 1 为最低级别【0】。</p><h2 id="c2db" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">显示切割和抛光数据</h2><p id="c7a9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在我们的数据集中，我们剔除了 3 个偏离下游色谱柱刻度的异常值。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="c3ec" class="lv lw it mu b gy my mz l na nb">## Cut diamonds that skew carat range<br/>indicies_to_remove = [27415, 27630, 27130]<br/>df = df.drop(indicies_to_remove)</span></pre><p id="f9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们在数据帧中创建新的列来存放通过将字典映射到 C 的列而创建的排名。下面是一个映射示例。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="619d" class="lv lw it mu b gy my mz l na nb">cut={'Ideal':4,'Premium':3,'Very Good':2,'Good': 1,'Fair':0}<br/>df['Cut'] = df['cut'].map(cut) #Note: 'Cut' is a different column</span></pre><p id="dc31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们需要缩放我们将在星形图中使用的列，以公平地表示数据。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="5ce7" class="lv lw it mu b gy my mz l na nb">## Convert all rankings and contiguous data to scale between 0-100<br/>factors = ['Cut', 'Color', "Clarity", "carat", "price"]</span><span id="b142" class="lv lw it mu b gy nd mz l na nb">new_max = 100<br/>new_min = 0<br/>new_range = new_max - new_min</span><span id="bc26" class="lv lw it mu b gy nd mz l na nb">## Create Scaled Columns<br/>for factor in factors:<br/>    max_val = df[factor].max()<br/>    min_val = df[factor].min()<br/>    val_range = max_val - min_val<br/>    df[factor + '_Adj'] = df[factor].apply(lambda x: (((x - min_val) * new_range) / val_range) + new_min)</span></pre><p id="b030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将缩放后的列划分为子集，用于下游绘图。<strong class="lb iu">请注意，我们正在创建一个新的数据框架(df2 ),其中仅包含我们打算在星形图中使用的列。</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1288" class="lv lw it mu b gy my mz l na nb">## Subset scaled columns <br/>df2 = df[['Cut_Adj', "Color_Adj", "Clarity_Adj", "carat_Adj", "price_Adj"]]<br/>df2.columns = ['Cut', "Color", "Clarity", "Carat", "Price"]</span></pre><h1 id="199d" class="ne lw it bd lx nf ng nh ma ni nj nk md jz nl ka mg kc nm kd mj kf nn kg mm no bi translated">演出的明星</h1><p id="a37b" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">要创建星形图表，我们必须指定要使用的列，并使用 numpy 创建圆形绘图对象。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="71f0" class="lv lw it mu b gy my mz l na nb">labels = ['Cut', "Color", "Clarity", "Carat", "Price"]<br/>points = len(labels)</span><span id="57e4" class="lv lw it mu b gy nd mz l na nb">angles = np.linspace(0, 2 * np.pi, points, endpoint=False).tolist()<br/>angles += angles[:1]</span></pre><p id="2dbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们创建一个助手函数，仅通过索引号绘制一个菱形。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1b81" class="lv lw it mu b gy my mz l na nb">def add_to_star(diamond, color, label=None):<br/>    values = df2.loc[diamond].tolist()<br/>    values += values[:1]<br/>    if label != None:<br/>        ax.plot(angles, values, color=color, linewidth=1, label=label)<br/>    else:<br/>        ax.plot(angles, values, color=color, linewidth=1, label=diamond)<br/>    ax.fill(angles, values, color=color, alpha=0.25)</span></pre><p id="7722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在魔法开始了！我们可以开始用我们想要的钻石填充我们的星图。最贵的和两个最便宜的怎么样:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="022c" class="lv lw it mu b gy my mz l na nb">## Create plot object   <br/>fig, ax = plt.subplots(figsize=(6, 6), subplot_kw=dict(polar=True))</span><span id="b5a2" class="lv lw it mu b gy nd mz l na nb">## Plot a new diamond with the add_to_star function<br/>add_to_star(27749, '#1aaf6c', "Most Expensive Diamond")<br/>add_to_star(0, '#429bf4', "Least Expensive A")<br/>add_to_star(1, '#d42cea', "Least Expensive B")</span></pre><p id="7e86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个数量足以创建一个星图，但是，没有 x 标签，没有方向，也没有自定义风格。让我们改变这一切！</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="dd6a" class="lv lw it mu b gy my mz l na nb">## Fix axis to star from top<br/>ax.set_theta_offset(np.pi / 2)<br/>ax.set_theta_direction(-1)</span><span id="b8c8" class="lv lw it mu b gy nd mz l na nb">## Edit x axis labels<br/>for label, angle in zip(ax.get_xticklabels(), angles):<br/>    if angle in (0, np.pi):<br/>        label.set_horizontalalignment('center')<br/>    elif 0 &lt; angle &lt; np.pi:<br/>        label.set_horizontalalignment('left')<br/>    else:<br/>        label.set_horizontalalignment('right')</span><span id="d77d" class="lv lw it mu b gy nd mz l na nb">## Customize your graphic</span><span id="5b95" class="lv lw it mu b gy nd mz l na nb"># Change the location of the gridlines or remove them<br/>ax.set_rgrids([20, 40, 60 ,80])<br/>#ax.set_rgrids([]) # This removes grid lines</span><span id="9f72" class="lv lw it mu b gy nd mz l na nb"># Change the color of the ticks<br/>ax.tick_params(colors='#222222')<br/># Make the y-axis labels larger, smaller, or remove by setting fontsize<br/>ax.tick_params(axis='y', labelsize=0)<br/># Make the x-axis labels larger or smaller.<br/>ax.tick_params(axis='x', labelsize=13)</span><span id="6930" class="lv lw it mu b gy nd mz l na nb"># Change the color of the circular gridlines.<br/>ax.grid(color='#AAAAAA')<br/># Change the color of the outer circle<br/>ax.spines['polar'].set_color('#222222')<br/># Change the circle background color<br/>ax.set_facecolor('#FAFAFA')</span><span id="ba18" class="lv lw it mu b gy nd mz l na nb"># Add title and legend<br/>ax.set_title('Comparing Diamonds Across Dimensions', y=1.08)<br/>ax.legend(loc='upper right', bbox_to_anchor=(1.3, 1.1))</span><span id="be40" class="lv lw it mu b gy nd mz l na nb"># Draw axis lines for each angle and label.<br/>ax.set_thetagrids(np.degrees(angles), labels)</span></pre><p id="9d48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么产量是多少呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/7d309065d90873cfea8ceb3a621c0710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSsigCBg9SlHK_ffwBtHbg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最贵和最便宜的两颗钻石的星图。Carets 似乎是价格的一大驱动因素。</p></figure><h1 id="6d7d" class="ne lw it bd lx nf ng nh ma ni nj nk md jz nl ka mg kc nm kd mj kf nn kg mm no bi translated">最物有所值的珠宝</h1><p id="8d30" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">4 C 系列中价格最低、评级最高的钻石是什么？要找出答案，我们必须得到 4 个 C 的总价值，然后除以原始(未缩放)价格。这个部分对包含所有原始列的原始数据帧进行操作。为了计算总数，我们对四个缩放的列求和。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="52a7" class="lv lw it mu b gy my mz l na nb">df['Total'] = df['Cut_Adj'] + df['Color_Adj'] + df['Clarity_Adj'] + df['carat_Adj']</span><span id="da68" class="lv lw it mu b gy nd mz l na nb">## Divide Value total by Price<br/>df['4C_by_Price'] = df['Total']/df['price']<br/>df = df.sort_values(by="4C_by_Price", ascending=False)</span></pre><p id="35e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对我们来说最闪亮的钻石是#31597，最不闪亮的钻石是#26320。这些钻石在星图上如何比较？下面我们来探讨一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/5ab255810c13a8afb4bb1a0cf230a123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DNuE61oAXnm_CaoSuIeObA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一个是交易中的钻石，另一个是一大块碳。</p></figure><h2 id="733a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论:</h2><p id="0d67" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">感谢您使用 matplotlib 探索星形图表格式中的一些钻石特征。如果你有任何问题，请在下面或者完整代码的位置<a class="ae ky" href="https://github.com/Datadolittle/Diamond_Star_Chart" rel="noopener ugc nofollow" target="_blank"> GitHub 库</a>发表。我的名字是<a class="ae ky" href="https://codyglickman.com/" rel="noopener ugc nofollow" target="_blank">科迪·格利克曼</a>，我可以在<a class="ae ky" href="https://www.linkedin.com/in/codyglickman/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> LinkedIn </strong> </a> <strong class="lb iu">上找到。</strong>一定要看看其他一些关于有趣的数据科学项目的文章！</p><div class="nq nr gp gr ns nt"><a rel="noopener follow" target="_blank" href="/creating-photo-mosaics-using-python-49100e87efc"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">使用 Python 创建照片镶嵌</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">一步一步的教程，让你自己的美丽的图像</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ks nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a rel="noopener follow" target="_blank" href="/to-beard-or-not-to-beard-that-is-the-question-b46864d7e003"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">刮胡子，还是不刮胡子，这是个问题</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">使用深度学习对有胡须和无胡须的照片进行年龄分类</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh ks nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a rel="noopener follow" target="_blank" href="/dashing-through-christmas-songs-using-dash-and-sql-34ef2eb4d0cb"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">使用 Dash 和 SQL 快速浏览圣诞歌曲</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">使用 SQL 数据库创建 Dash 仪表板的简单项目</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oj l oe of og oc oh ks nt"/></div></div></a></div></div></div>    
</body>
</html>