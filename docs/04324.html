<html>
<head>
<title>Evaluating Image Segmentation Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">评估图像分割模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/evaluating-image-segmentation-models-1e9bb89a001b?source=collection_archive---------15-----------------------#2020-04-19">https://towardsdatascience.com/evaluating-image-segmentation-models-1e9bb89a001b?source=collection_archive---------15-----------------------#2020-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8cd8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不同评价方法的比较和对比</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e08db2cbd1e7a6e41ae1d430bf03acb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DcXTowYav7LpWo79ue5IMw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯托夫·高尔在<a class="ae ky" href="https://unsplash.com/s/photos/software-coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="81dd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是图像分割？</h1><p id="8e40" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">图像分割是将数字图像划分成不同图像类别或对象的过程。这是自动驾驶汽车非常重要的一部分，因为正确检测汽车前方的物体以及它们的位置是自动驾驶算法的关键输入。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/d3d929af018118f6c703a0de320fe373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lj0Rbpj1MdA3UoYiDGwNlg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图像分割程序的输出示例。</p></figure><p id="a27b" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">图像分割模型是通过一个接受给定事实的神经网络创建的。基础事实是正确标记的图像，它告诉神经网络预期的输出是什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/65679a3ef5f53cb8c4fad9e964344266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRaMm5yHyEnTOgRidmfvag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">地面真实 vs .人物形象类的预测[ <a class="ae ky" href="https://www.jeremyjordan.me/evaluating-image-segmentation-models/" rel="noopener ugc nofollow" target="_blank">站点</a></p></figure><p id="ae6f" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在图像分割被训练并输出预测之后，我们需要评估该模型执行得有多好。这通常是通过两种方式完成的，<strong class="lt iu">像素精度</strong>和<strong class="lt iu">交集超过并集</strong> <strong class="lt iu">(或 IoU) </strong>。</p><h1 id="0728" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">像素精度</h1><p id="c1cb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是评估图像分割模型性能的最简单方法。为此，我们必须首先计算真正值、真负值、假正值和假负值。要了解这些术语的更多含义，你可以阅读这篇文章。</p><p id="8fc7" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在这种情况下，对于给定的类 X:</p><ul class=""><li id="2956" class="mu mv it lt b lu mo lx mp ma mw me mx mi my mm mz na nb nc bi translated"><strong class="lt iu">真阳性(TP): </strong>像素被正确分类为 X</li><li id="82eb" class="mu mv it lt b lu nd lx ne ma nf me ng mi nh mm mz na nb nc bi translated"><strong class="lt iu">假阳性(FP): </strong>像素被错误分类为 X</li><li id="dc72" class="mu mv it lt b lu nd lx ne ma nf me ng mi nh mm mz na nb nc bi translated"><strong class="lt iu">真阴性(TN): </strong>像素被正确分类为非 X</li><li id="561d" class="mu mv it lt b lu nd lx ne ma nf me ng mi nh mm mz na nb nc bi translated"><strong class="lt iu">假阴性(FN): </strong>像素被错误分类为非 X</li></ul><p id="454e" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">计算像素精度的公式为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/b2cfc3575a8ae4f3810ef6e61ebb8538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBbNyohcD0ctm1Ita2TZJg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">像素精度公式。</p></figure><p id="06cc" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">假设我们正在尝试计算以下 3x3 图像的像素精度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/541a513bca9ee66c7adfcc2eedaaffcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2E4f-cheYPwHm8OWrFeVw.png"/></div></div></figure><p id="3e5d" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在这种情况下，<strong class="lt iu"> R </strong>表示对应于<strong class="lt iu">道路</strong>等级的像素，而<strong class="lt iu"> S </strong>对应于<strong class="lt iu">人行道</strong>等级。根据地面实况，我们在地面实况中有 3 个道路像素，所以<strong class="lt iu"> TP = 3 </strong>。没有任何人行道像素被标记为道路，因此<strong class="lt iu"> FP = 0 </strong>。对于顶部的两个角，模型将像素标记为人行道，而它应该是道路，因此<strong class="lt iu"> FN = 2 </strong>。最后，地面真相底部的 4 个人行道像素都被正确标记，因此<strong class="lt iu"> TN = 4 </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/27c2be6a08285b0d936977e7e5dcfaa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vo3UX8Db4WAxMguN8NT3Uw.png"/></div></div></figure><p id="b106" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">这种方法也可以在评估每一类的像素精度时全局使用。</p><h2 id="3ab2" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">出现了一个问题</h2><p id="1787" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">像素精度存在问题，下图可以说明这一点:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/ea2d1ed1059870293b736e85cc0e3729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*L-9nqDSAqpH8Zw9rv7VfIQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@insolitus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Rowan Heuvel </a>在<a class="ae ky" href="https://unsplash.com/s/photos/bird?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="1dbb" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">如果我们想要计算鸟类的像素精度，即使我们完全错误地预测了鸟类的像素，因为我们图像中的大多数像素是天空，我们的 TN 值会非常高，从而使我们的像素精度非常高。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/0cb6a7a26887f141f9c760fda0c958c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foT6flIfT9VJ-KFHQVCHNA.png"/></div></div></figure><h1 id="f241" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">并集上的交集</h1><p id="3352" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是评估来自图像分割模型的预测的另一种方法。该方法通过计算基础事实和预测之间的交集和并集来计算性能。</p><p id="3c02" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">例如，让我们使用之前的图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/65679a3ef5f53cb8c4fad9e964344266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IRaMm5yHyEnTOgRidmfvag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">事实与预测[ <a class="ae ky" href="https://www.jeremyjordan.me/evaluating-image-segmentation-models/" rel="noopener ugc nofollow" target="_blank">地点</a></p></figure><p id="b1de" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">因此，现在我们要确定基本事实和预测之间的交集和联合，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/1afcfe91f5915fc27479efd5a1287fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rxpd7iT-puY8N3V209IaFw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">交叉点对联合[ <a class="ae ky" href="https://www.jeremyjordan.me/evaluating-image-segmentation-models/" rel="noopener ugc nofollow" target="_blank">站点</a></p></figure><p id="a947" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">然后，我们可以通过以下公式计算 IoU 值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/129a8e7cb0136905af3510d0da93c8e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dg0Ln_h2GbJ5duHQHafRjQ.png"/></div></div></figure><p id="5bf9" class="pw-post-body-paragraph lr ls it lt b lu mo ju lw lx mp jx lz ma mq mc md me mr mg mh mi ms mk ml mm im bi translated">在实践中，如果我们想找到一个特定类的 IoU，我们必须首先计算所有正在验证的图像的#TP、#FP、#FN 的总和，然后用总和计算 IoU。</p><h2 id="e392" class="nl la it bd lb nm nn dn lf no np dp lj ma nq nr ll me ns nt ln mi nu nv lp nw bi translated">平均欠条(百万)</h2><p id="8578" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这也是一个度量标准，它采用所有类别的 IoU，并取其平均值。这是图像分割模型在该模型想要检测的所有类别上表现如何的良好指标。</p><h1 id="44b3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="4692" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">像素精度和 mIoU 是用于评估图像分割模型性能的最常见的两种方法。虽然像素精度是一种非常简单的编码方法，但它也会受到占用大部分图像的类的严重影响。mIoU 解决了这个问题，但在某些情况下，mIoU 的运行成本更高，或者编码更复杂。</p></div></div>    
</body>
</html>