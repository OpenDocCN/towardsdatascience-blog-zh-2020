<html>
<head>
<title>An Introduction to Logistic Regression for Categorical Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类数据分析的逻辑回归导论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-introduction-to-logistic-regression-for-categorical-data-analysis-7cabc551546c?source=collection_archive---------8-----------------------#2020-05-26">https://towardsdatascience.com/an-introduction-to-logistic-regression-for-categorical-data-analysis-7cabc551546c?source=collection_archive---------8-----------------------#2020-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="38a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从逻辑回归的推导到解释</h2></div><h1 id="7365" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">导出分类数据的模型</h1><p id="5c70" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">通常，当我们有一个连续变量y(响应变量)和一个连续变量x(解释变量)时，我们假设关系E(Y|X) = β₀ +β₁X.这个等式对您来说应该很熟悉，因为它代表了简单线性回归的模型。这里，E(Y|X)是一个随机变量。</p><p id="4a90" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">另一方面，如果Y是一个取值为0或1的二元变量，那么E(Y|X)是一个概率。这意味着0 &lt; β₀ +β₁X &lt; 1，这是一个不总是成立的假设。但是，如果我们考虑log(E(Y|X))，我们将得到-∞ &lt; β₀ +β₁X &lt; 0。这又是一个受限空间，但比最初的情况好得多。如果你熟悉简单的逻辑回归模型，你会注意到我们正在接近它的实际形式。让我们考虑一个比值比，它被定义为ω=π/(1-π)其中0 </p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mb"><img src="../Images/829c5bfd5365ab2c5bea52daf37d03e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fN2CBZgtt8pXSoSulU-C2A.png"/></div></div></figure><p id="26c6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">所以我们有范围(-∞，∞)。最后一个方程是普通逻辑回归方程。</p><h1 id="f2ee" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">理解范畴分析中的第三变量</h1><p id="96ed" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在试图建立我们的模型或解释逻辑回归参数的意义之前，我们必须首先考虑可能影响我们实际建立和分析模型的额外变量。在处理分类数据分析时，通常会有被称为第三个变量的东西，它会对您将要尝试构建的模型产生一定的影响。根据你正在处理的第三个变量的类型，应该采取不同的措施来避免错误的结论。</p><h2 id="d2d6" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">混淆术语</h2><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mz"><img src="../Images/7be8168d6135fffd643098bea7141bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXPzQGj71FkxRIyeUF4RpA.png"/></div></div><p class="na nb gj gh gi nc nd bd b be z dk translated">与混杂变量Z的关系</p></figure><p id="d32c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">当从Z到X和Z到Y存在直接关系，而Y依赖于X时，第三分类变量Z(具有k个分类)是混杂变量。换句话说，混杂变量影响因变量和自变量，并且经常“隐藏”关联。后一种现象被称为虚假关系，这是一种两个或两个以上变量相关联，但由于第三个变量的存在而没有因果关系的关系。</p><h2 id="e76f" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">相互作用项</h2><p id="50ba" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一个相互作用的术语，通常意味着第三个变量改变了比如说一个暴露对结果的影响。也就是说，如果两个感兴趣的变量相互作用，那么它们和因变量之间的关系取决于另一个相互作用项的值。</p><h1 id="6e8a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">解释逻辑回归</h1><p id="85d2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">首先考虑简单的线性回归，其中Y是连续的，X是二进制的。当X = 0时，E(Y|X=0) = β₀，当X = 1时，E(Y|X=1) = β₀ + β₁.因此，当解释β₁的含义时，我们说它代表两组之间的平均差异，即X = 0时(参考组)和X = 1时(比较组)的平均差异。</p><p id="c77c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在，让我们假设一个简单的例子，Y和X是取值为0或1的二元变量。说到逻辑回归，β₁differs的解释就像我们不再看的意思。回想一下，逻辑回归的模型log(E(Y|X)/(1-E(Y|X)) = β₀ + β₁X，或者为了简化起见，log(π/(1-π)) = β₀ + β₁X.，这都是基于优势比。当我们考虑X的所有可能值时，</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ne"><img src="../Images/e08f18a35e3d7f27969d101ab1816762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1WcoSFgE3Nj2kXv36dQiw.png"/></div></div></figure><p id="8aa2" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果我们希望从上述两个例子中解释β₁，我们将把它当作一个简单的线性回归来分析。也就是说，β₁是从X = 1时的结果减去X = 0时的结果得到的:</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nf"><img src="../Images/72bf1b511d354cf20288e0691d194094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfQnJzhpZKhmw-gjIYroSQ.png"/></div></div></figure><p id="c43a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这表明β₁是一个对数比值比，而exp(β₁是一个比值比。</p><h2 id="854c" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">混杂解释</h2><p id="92b9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果逻辑模型考虑了第三个变量，无论它是混杂项还是交互项，都可能有不同的方式来解释模型参数。</p><p id="84bf" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">设Y和X如前所述，Z是第三个变量，取值为0或1。调整混杂因素的模型是log(E(Y|X，Z)/(1-E(Y|X，Z))) = log(π/(1-π)) = β₀ + β₁X + β₂Z.。再次，让我们看看独立变量的每个值会得到什么:</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ne"><img src="../Images/79c4ebbb61270bffd9647a3ce15707d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0o5FGnDrAuWwTtFX1Tiqhw.png"/></div></div></figure><p id="4bf5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">类似地，我们会发现，对于每个z，β₁是X = 1和X = 0之间的对数(比值)，而exp(β₁是比值比。</p><h2 id="a124" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">带交互项的解释</h2><p id="31d3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当第三个变量是交互项时，为其进行调整的模型是log(E(Y|X，Z)/(1-E(Y|X，z))= log(π/(1-π))=β₀+β₁x+β₂z+β₁₂xz.这里，我们说β₁、β₂是主要效应，β₁₂是交互效应。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ne"><img src="../Images/7d8bc9bf5fd548e348926c741570c148.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2T9yjngujFbzOhBSiDkqnw.png"/></div></div></figure><p id="2263" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">所以我们注意到，当Z = 0时，exp( β₁)又是一个优势比，当Z = 1时，exp( β₁ + β₁₂)又是一个优势比。那么，β₁₂一个人呢？事实上，exp(β₁₂)被解释为比值比根据z的水平变化多少。这被称为“比值比的比率”或“差异中的差异”。</p><h1 id="f165" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">示例和解释</h1><p id="adc1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们考虑R中一个大型内置数据集的随机子集，称为美国国家健康和营养检查研究(NHANES)。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ng"><img src="../Images/49bce967313528b12fbe0156a28f5b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sn9_m3KRYNW7yifqWQFJvg.png"/></div></div></figure><p id="2880" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">上面显示的数据是原始数据的子集，只包括原始数据集中的几个变量。如果您想了解关于数据集的更多信息，您可以在此阅读更多信息<a class="ae nh" href="https://cran.r-project.org/web/packages/NHANES/NHANES.pdf" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="d38e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">然后，我们将对数据拟合逻辑回归模型，因为我们希望预测受试者是否是吸烟者(SmokeNow)。拟合的模型汇总如下所示。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ni"><img src="../Images/ef57ce7f6928bf7d7422b65e014a3f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1rjgsuGQKZ43WWEs8qizw.png"/></div></div></figure><p id="283b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">对于这一特定模型，显著变量是那些p值小于0.05的变量。你会注意到它们旁边都有*、**、**，或者它们是否接近那个显著性水平。注意，这只是R中的特性，帮助用户直观地识别重要的协变量。</p><h2 id="af7b" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">婚姻状况</h2><p id="2694" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">MaritalStatus变量是一个有六个类别的分类变量。请注意，这比上面的回归总结中列出的类别数多了一个。这意味着未列出的类别是参考类别。如果我们查看这个变量的所有级别，我们会发现类别是离婚(参照组)、同居伴侣、已婚、未婚、分居和丧偶。在这种情况下，已婚群体是显著的，其β估计值为-0.8162。这个数字到底是什么意思？回想一下，我们之前已经确定exp(β)通常是两组之间的优势比。这里，这两个组是已婚组和离婚组(即参照组)。那么，exp(-0.8162) = 0.4421。因此，当控制所有其他变量时，已婚组吸烟的几率是离婚组吸烟的0.4421倍。</p><h2 id="14e2" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">年龄</h2><p id="cd80" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">年龄变量是一个连续变量，因此不需要考虑类别/级别。这个的β = -0.0363，所以exp(β) = 0.9644。我们将此解释为，在其他条件不变的情况下，年龄每变化一个单位，优势比就会变化0.9644个单位，因为该模型适用于log(odds) = log( π/(1-π))。</p><h2 id="2c63" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">家庭收入</h2><p id="ff67" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">与MaritalStatus类似，这是一个分类变量，我们会发现它有12个级别:0–4999(参考组)、5000–9999、10000–14999、15000–19999、20000–24999、25000–34999、35000–44999、45000–54999、55000–64999、55000–64999综上所述，55000–64999组具有显著性，估计值为β = 1.9478。那么，当控制所有其他变量时，在55000-64999收入组中吸烟的几率是在0-4999收入组中吸烟的几率的7.0132倍。</p><h2 id="fe47" class="mn kj it bd kk mo mp dn ko mq mr dp ks lj ms mt ku ln mu mv kw lr mw mx ky my bi translated">教育</h2><p id="e672" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果需要，可以对最高教育水平得出类似的解释。</p></div></div>    
</body>
</html>