<html>
<head>
<title>5 Tips for MLflow Experiment Tracking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MLflow实验跟踪的5个技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-tips-for-mlflow-experiment-tracking-c70ae117b03f?source=collection_archive---------10-----------------------#2020-05-11">https://towardsdatascience.com/5-tips-for-mlflow-experiment-tracking-c70ae117b03f?source=collection_archive---------10-----------------------#2020-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2d91" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将MLflow推向极限:可视化、组织、更改和纠正您的mlflow运行</h2></div><p id="6811" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章是关于<a class="ae lb" href="https://github.com/mlflow/mlflow" rel="noopener ugc nofollow" target="_blank"> MLflow </a>的——一个开源<a class="ae lb" href="https://en.wikipedia.org/wiki/MLOps" rel="noopener ugc nofollow" target="_blank"> MLOps </a>工具。如果你从未听说过，<a class="ae lb" href="https://www.mlflow.org/docs/latest/tutorials-and-examples/tutorial.html" rel="noopener ugc nofollow" target="_blank">这里有一个教程</a>。</p><p id="d3cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我关注的是<em class="lc">ml flow Tracking</em>——允许记录和查看您的每个模型/实验的参数、度量和工件(文件)的功能。</p><p id="279b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您记录您试验的模型时，您可以在MLflow UI(以及其他)中总结和分析您的运行。您可以了解它们中哪一个性能最好，排除故障，并选择部署的最佳候选。我每天都在使用这个工具，并且发现了许多让我的生活变得更加轻松的特性。尽情享受吧！</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/f719f82ce63a5a4773180e2593c29345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BX_5736S3s0TmKRs"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">由<a class="ae lb" href="https://unsplash.com/@seabas?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sebastian Staines </a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="ea48" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">1.交互式工件— HTML、GeoJSON和其他</h1><p id="52e6" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">工件查看器是一个很棒的特性，它被设计用来深入到您记录的模型中。您可以用任何格式保存文件，并且可以下载这些文件，但是只有部分文件可以在工件查看器窗口中预览或呈现。目前分别是(来源:<a class="ae lb" href="https://raw.githubusercontent.com/mlflow/mlflow/master/mlflow/server/js/src/common/utils/FileUtils.js" rel="noopener ugc nofollow" target="_blank"> FileUtils.js </a>):</p><blockquote class="mq mr ms"><p id="011c" class="kf kg lc kh b ki kj jr kk kl km ju kn mt kp kq kr mu kt ku kv mv kx ky kz la ij bi translated"><strong class="kh ir">正文</strong>:。txt，。日志，。py，。js，。yaml，。yml，。json，。csv，。tsv，。md，。rst，。jsonnet<br/>T17】图片:。jpg，。bmp，。jpeg，。png，。gif，。svg <br/> <strong class="kh ir">互动</strong>:。html，。杰奥森</p></blockquote><p id="219c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是保存其中一些文件的示例片段:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="mw mx l"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">测试MLflow工件查看器的全部功能—代码</p></figure><p id="f403" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是这次运行的UI外观，在工件查看器窗口中呈现得非常好:</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi my"><img src="../Images/ac1bd2d8d51760f4b726ca9db2b1ad31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/1*T76Jg5YE9FqZdG0RSI-OYg.gif"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">测试MLflow工件查看器的全部功能—演示</p></figure><p id="7c7b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最重要的是，因为它可以在HTML中呈现iframe，你实际上可以使用这个片段嵌入一个网站(比如一个仪表板)。如果你的仪表板通过URI参数化，这可以很好地利用。</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi mz"><img src="../Images/0e9bad6956398a718ffbae87bf149f25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgBJEuAG4V7V3S2apLK5Dw.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">嵌入在工件查看器中的维基百科页面(作为一个例子)。</p></figure><p id="3e2f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">限制:如果您的嵌入式网站需要外部环境或一些认证，它可能不会工作。你可以在本期中了解更多信息。</p><p id="0cc4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个用例真的将工具推到了极限，看起来有点不靠谱，但这是可能的。我无法想象会有很多用户嵌入这样的网站。</p><h1 id="e8c3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">2.用文件夹组织的工件</h1><p id="6365" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">当您在运行中有许多工件时，您可能想要将它们组织在文件夹中。方法如下:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="mw mx l"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">在文件夹中记录工件—代码</p></figure><p id="796e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果是:</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi na"><img src="../Images/487062450ea39ca75b571983af923580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e0mXOsjgYdzQQlP8nSOH1g.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">在文件夹中记录工件—演示</p></figure><h1 id="b237" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">3.使用nested=True按部分组织的运行</h1><p id="0f45" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">有时，您的跑步有许多部分，每个部分都有自己的一套参数和指标。您可以使用嵌套管路来分隔它们。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="mw mx l"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">嵌套运行—代码</p></figure><p id="1f73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看看这个分离得很好的运行树:</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi nb"><img src="../Images/04203c56cd9064f2e78b96f151395f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*i0KMm30k8cPbu-eTVBmUZQ.gif"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">嵌套运行—演示</p></figure><p id="0158" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">限制:正如您在上面看到的，UI只显示了第一级嵌套的树结构，但是,“父运行”属性对于任何嵌套运行都是正确的。我希望在MLflow的下一个版本中，UI能够反映一个完整的嵌套树。</p><h1 id="5ad1" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">4.使用pandas以编程方式运行查询</h1><p id="9194" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">因此，您运行了您的实验，进行了您的批量分析，MLflow自动图很棒，但您可能想要更多。您可以将您的运行和实验以及所有参数、指标和工件导出到pandas df中！</p><pre class="le lf lg lh gt nc nd ne nf aw ng bi"><span id="283f" class="nh lu iq nd b gy ni nj l nk nl">mlflow.search_runs(experiment_ids=["your_exprmnt_id"])</span></pre><p id="208b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这会给你一个漂亮的熊猫数据框，里面有你需要的所有信息！</p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi nm"><img src="../Images/094c09dd61244c4b181af302ef191c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9ybtLuAXu_tUduXza8v2Iw.gif"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">作为熊猫DF获得所有跑步记录</p></figure><h1 id="e542" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">5.纠正运行</h1><p id="331a" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">假设您前段时间运行了您的实验，但是您在代码中发现了一个乏味的bug。例如，你忘了用秒除以3600得到小时。以下是纠正的方法:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="mw mx l"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">更正MLflow运行</p></figure><p id="1892" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，您可以随时更正、添加或删除任何MLflow运行。从UI或者通过使用上面解释的<a class="ae lb" href="https://www.mlflow.org/docs/latest/python_api/mlflow.html#mlflow.search_runs" rel="noopener ugc nofollow" target="_blank"> search_runs </a> API获得run_id。</p><h1 id="def7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">6.MLflow不仅仅是为了ML</h1><p id="170e" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">(与其说是提示，不如说是观察)</p><blockquote class="nn"><p id="cea8" class="no np iq bd nq nr ns nt nu nv nw la dk translated">我们所有的程序员都在做实验:调整输入参数以优化输出指标。</p></blockquote><p id="6f9a" class="pw-post-body-paragraph kf kg iq kh b ki nx jr kk kl ny ju kn ko nz kq kr ks oa ku kv kw ob ky kz la ij bi translated">我发现<em class="lc">ML flow Tracking</em>&amp;<em class="lc">UI</em>在许多非ML实验中非常有用，例如剖析算法或更通用的AI。由于自动化绘图和总结，它的用途超出了机器学习。这主要归功于API的易用性和简单但实用的UI。MLflow的日志记录功能几乎是无限的，自动绘图简单但信息量大！</p></div></div>    
</body>
</html>