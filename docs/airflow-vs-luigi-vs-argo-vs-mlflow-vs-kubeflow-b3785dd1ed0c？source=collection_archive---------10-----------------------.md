# 气流 vs .路易吉 vs .阿尔戈 vs. MLFlow vs .库伯流

> 原文：<https://towardsdatascience.com/airflow-vs-luigi-vs-argo-vs-mlflow-vs-kubeflow-b3785dd1ed0c?source=collection_archive---------10----------------------->

## 选择任务编排工具

![](img/12ea5bb0a7c92635667cd8b201d48b76.png)

来源:作者

# 任务协调工具和工作流

最近，用于编排任务和数据工作流的新工具激增[(有时被称为“MLOps”)。这些工具的数量会使我们很难选择使用哪些工具，也很难理解它们是如何重叠的，所以我们决定直接比较一些最流行的工具。](https://huyenchip.com/2020/06/22/mlops.html)

![](img/ed8522c08eb8a5d0722154950b43ee32.png)

气流是最受欢迎的解决方案，其次是 Luigi。也有新的竞争者，他们都在快速成长。(来源:作者)

总的来说，Apache Airflow 是最受欢迎的工具，也是功能最广泛的工具，但是 Luigi 是一个类似的工具，更容易上手。当他们已经在使用 Kubernetes 时，Argo 是他们经常求助的一个团队，Kubeflow 和 MLFlow 服务于更多与部署机器学习模型和跟踪实验相关的利基需求。

在我们深入进行详细的比较之前，理解一些与任务编排相关的更广泛的概念是有用的。

# 什么是任务编排，为什么它有用？

较小的团队通常从手动管理任务开始，例如清理数据、训练机器学习模型、跟踪结果以及将模型部署到生产服务器。随着团队和解决方案规模的增长，重复步骤的数量也在增长。可靠地执行这些任务也变得更加重要。

这些任务相互依赖的复杂方式也在增加。当您开始时，您可能有一个需要每周或每月运行一次的**任务流水线**。这些任务需要以特定的顺序运行。随着你的成长，这条管道变成了一个拥有动态分支的**网络**。在某些情况下，一些任务会引发其他任务，而这些任务可能依赖于其他几个先运行的任务。

这个网络可以被建模为 DAG——一个有向无环图，它对每个任务以及它们之间的依赖关系进行建模。

![](img/42954efcd1c01dd206134dbf018a1086.png)

流水线是一个有限的 DAG，其中每个任务最多有一个上游和一个下游依赖。(来源:作者)

工作流编排工具允许您通过指定所有任务以及它们如何相互依赖来定义 Dag。然后，该工具按计划以正确的顺序执行这些任务，在运行下一个任务之前重试任何失败的任务。它还监控进度，并在出现故障时通知您的团队。

像 Jenkins 这样的 CI/CD 工具通常用于自动测试和部署代码，这些工具和任务编排工具之间有很强的相似性——但也有重要的区别。尽管理论上[你可以使用这些 CI/CD 工具来编排动态的、相互关联的任务](http://blog.paracode.com/2017/10/08/airflow/)，但是在一定的复杂程度上，你会发现使用更通用的工具比如 Apache Airflow 会更容易。

【想要更多这样的文章？[注册我们的简讯](https://datarevenue.com/signup)。我们每周最多分享一篇文章，从不发送任何形式的推广邮件】。

总体而言，任何编排工具的重点都是确保**集中化、可重复、可再现、**和**高效的**工作流:所有自动化任务的虚拟指挥中心。记住这一点，让我们看看一些最流行的工作流工具是如何组合起来的。

# 告诉我用哪一个

您可能应该使用:

*   [**Apache air flow**](https://airflow.apache.org/)**如果你想要功能最全、最成熟的工具，你可以花时间去学习它的工作原理、设置和维护它。**
*   **[**Luigi**](https://github.com/spotify/luigi)**如果你需要比气流更容易学习曲线的东西。它的功能更少，但更容易起飞。****
*   ****如果你已经深深地投入到 Kubernetes 生态系统中，并且想要以 pods 的形式管理你的所有任务，那么就用 YAML 而不是 Python 来定义它们。****
*   ****[**kube flow**](https://www.kubeflow.org/)**如果你想使用 Kubernetes 但仍然用 Python 而不是 YAML 来定义你的任务。******
*   ******[**MLFlow**](https://mlflow.org/) 如果你更关心跟踪实验或者使用 MLFlow 的预定义模式跟踪和部署模型，而不是寻找一个可以适应你现有定制工作流的工具。******

# ****对照表****

****![](img/758c260f48683ca327c989df484b90fe.png)****

****(来源:作者)-获得更多机器学习技巧— [获取我们的每周简讯](https://www.datarevenue.com/signup)****

****为了快速概述，我们在以下方面对这些库进行了比较:****

*   ******成熟度:**基于项目的年龄以及修复和提交的数量；****
*   ******人气:**基于领养和 GitHub 明星；****
*   ******简单:**基于易于入职和采用；****
*   ******广度:**基于每个项目的专业化程度和适应性；****
*   ******语言:**基于您与工具交互的主要方式。****

****这些不是严格或科学的基准，但它们旨在让您快速了解这些工具是如何重叠的，以及它们彼此之间有何不同。更多细节，请看下面的头对头对比。****

# ****路易吉与气流****

****Luigi 和 Airflow 解决类似的问题，但 Luigi 要简单得多。它包含在单个组件中，而 Airflow 有多个模块，可以以不同的方式进行配置。Airflow 拥有更大的社区和一些额外的功能，但是学习曲线要陡峭得多。具体来说，Airflow 在调度方面要强大得多，它提供了一个日历 UI 来帮助您设置任务应该何时运行。使用 Luigi，您需要编写更多自定义代码来按计划运行任务。****

****这两个工具都使用 Python 和 Dag 来定义任务和依赖关系。如果你有一个小团队，需要快速上手，就用 Luigi。如果你有一个更大的团队，可以使用气流，一旦你度过了学习曲线，可以用最初的生产力打击来换取更多的权力。****

# ****路易吉对阿尔戈****

****Argo 建立在 Kubernetes 之上，每个任务作为一个独立的 Kubernetes pod 运行。如果您已经将 Kubernetes 用于您的大部分基础设施，这可能很方便，但是如果您没有，这将增加复杂性。Luigi 是一个 Python 库，可以和 Python 包管理工具一起安装，比如 pip 和 conda。Argo 是 Kubernetes 的扩展，使用 Kubernetes 安装。虽然这两个工具都允许你将任务定义为 Dag，但使用 Luigi，你将使用 Python 来编写这些定义，而使用 Argo，你将使用 YAML。****

****如果你已经投资了 Kubernetes，并且知道你所有的任务都是 pods，那么就使用 Argo。如果编写 DAG 定义的开发人员对 YAML 比对 Python 更熟悉，您也应该考虑这一点。如果您没有在 Kubernetes 上运行，并且团队中有 Python 专家，请使用 Luigi。****

# ****路易吉对库伯弗洛****

****Luigi 是一个基于 Python 的库，用于一般的任务编排，而 Kubeflow 是一个基于 Kubernetes 的工具，专门用于机器学习工作流。Luigi 是为编排一般任务而构建的，而 Kubeflow 则为实验跟踪、超参数优化和 Jupyter 笔记本服务提供了预构建的模式。Kubeflow 由两个不同的组件组成:Kubeflow 和 Kubeflow 管道。后者侧重于模型部署和 CI/CD，它可以独立于主要的 Kubeflow 特性使用。****

****如果您需要编排各种不同的任务，从数据清理到模型部署，请使用 Luigi。如果您已经使用了 Kubernetes，并且想要协调常见的机器学习任务，如实验跟踪和模型训练，请使用 Kubeflow。****

# ****Luigi vs. MLFlow****

****Luigi 是一个通用的任务编排系统，而 MLFlow 是一个更专业的工具，可以帮助管理和跟踪你的机器学习生命周期和实验。您可以使用 Luigi 来定义一般的任务和依赖项(例如训练和部署模型)，但是您可以将 MLFlow 直接导入到您的机器学习代码中，并使用它的帮助器函数来记录信息(例如您正在使用的参数)和工件(例如经过训练的模型)。还可以使用 MLFlow 作为命令行工具，为用常用工具(如 scikit-learn)构建的模型提供服务，或者将它们部署到常用平台(如 AzureML 或 Amazon SageMaker)。****

# ****气流与阿尔戈****

****Argo 和 Airflow 都允许你将任务定义为 Dag，但是在 Airflow 中你用 Python 来完成，而在 Argo 中你用 YAML。Argo 作为一个 Kubernetes pod 运行每个任务，而 Airflow 生活在 Python 生态系统中。Canva 在选择 Argo 之前评估了这两个选项，您可以[观看这个演讲，了解他们的详细比较和评估](https://www.youtube.com/watch?v=oXPgX7G_eow)。****

****如果你想要一个更成熟的工具，不在乎 Kubernetes，就用气流。如果您已经投资了 Kubernetes，并且想要运行在不同堆栈中编写的各种各样的任务，请使用 Argo。****

# ****气流与库伯流****

****Airflow 是一个通用的任务编排平台，而 Kubeflow 则专门专注于机器学习任务，如实验跟踪。这两个工具都允许使用 Python 定义任务，但是 Kubeflow 在 Kubernetes 上运行任务。Kubeflow 分为 Kubeflow 和 Kubeflow 管道:后一个组件允许您指定 Dag，但它更侧重于部署和模型服务，而不是一般任务。****

****如果您需要一个能够运行各种不同任务的成熟、广阔的生态系统，请使用 Airflow。如果您已经使用了 Kubernetes，并希望机器学习解决方案有更多现成的模式，请使用 Kubeflow。****

# ****空气流量与毫升流量****

****Airflow 是一个通用的任务编排平台，而 MLFlow 是专门为优化机器学习生命周期而构建的。这意味着 MLFlow 具有运行和跟踪实验、训练和部署机器学习模型的功能，而 Airflow 具有更广泛的用例，你可以使用它来运行任何一组任务。Airflow 是一组用于管理和调度任务的组件和插件。MLFlow 是一个 Python 库，可以导入到现有的机器学习代码中，也是一个命令行工具，可以用来训练和部署用 scikit-learn 编写的机器学习模型到 Amazon SageMaker 或 AzureML。****

****如果您想要一种有见解的、开箱即用的方式来管理您的机器学习实验和部署，请使用 MLFlow。如果您有更复杂的需求，并且希望更多地控制如何管理机器学习生命周期，请使用 Airflow。****

# ****阿尔戈对库伯弗洛****

****Kubeflow 的部分(如 Kubeflow 管道)是建立在 Argo 之上的，但 Argo 是为了编排任何任务而建立的，而 Kubeflow 专注于那些特定于机器学习的任务——如实验跟踪、超参数调整和模型部署。 [Kubeflow Pipelines](https://www.kubeflow.org/docs/pipelines/overview/pipelines-overview/) 是 Kubeflow 的一个独立组件，专注于模型部署和 CI/CD，可以独立于 Kubeflow 的其他功能使用。这两个工具都依赖于 Kubernetes，如果你已经采用了它，你可能会更感兴趣。有了 Argo，你可以使用 YAML 定义你的任务，而 Kubeflow 允许你使用 Python 接口。****

****如果您需要管理作为 Kubernetes pods 运行的一般任务的 DAG，请使用 Argo。如果你想要一个专注于机器学习解决方案的更有主见的工具，请使用 Kubeflow。****

# ****Argo vs. MLFlow****

****Argo 是一个任务编排工具，允许您将任务定义为 Kubernetes pods，并将其作为 YAML 定义的 DAG 运行。MLFlow 是一个更加专业化的工具，它不允许您定义任意的任务或它们之间的依赖关系。相反，您可以将 MLFlow 作为 Python 库导入到现有的(Python)机器学习代码库中，并使用其助手函数来记录工件和参数，以帮助进行分析和实验跟踪。您还可以使用 MLFlow 的命令行工具来训练 scikit-learn 模型，并将它们部署到 Amazon Sagemaker 或 Azure ML，以及管理您的 Jupyter 笔记本。****

****如果您需要管理一般的任务，并希望在 Kubernetes 上运行它们，请使用 Argo。如果您想要一种自以为是的方式来管理托管云平台的机器学习生命周期，请使用 MLFlow。****

# ****Kubeflow 与 MLFlow****

****Kubeflow 和 MLFlow 都是比通用任务编排平台(如 Airflow 或 Luigi)更小、更专业的工具。Kubeflow 依赖于 Kubernetes，而 MLFlow 是一个 Python 库，可以帮助你在现有的机器学习代码中添加实验跟踪。Kubeflow 允许您构建一个完整的 DAG，其中每个步骤都是一个 Kubernetes pod，但 MLFlow 具有内置功能，可以将您的 scikit-learn 模型部署到 Amazon Sagemaker 或 Azure ML。****

****如果你想跟踪你的机器学习实验，并在 Kubernetes 的支持下以更加定制的方式部署你的解决方案，请使用 Kubeflow。如果您想要一种更简单的方法来进行实验跟踪，并希望部署到 Amazon Sagemaker 等托管平台，请使用 MLFlow。****

# ****没有银弹****

****虽然所有这些工具都有不同的关注点和不同的优势，但是没有一个工具能够让您一劳永逸。在为选择哪种工具伤脑筋之前，通常重要的是确保你有好的过程，包括好的团队文化、无过失回顾和长期目标。如果你正在努力解决任何机器学习问题，请联系我们。我们喜欢谈论商店，您可以安排与我们的首席执行官进行[免费通话。](https://datarevenue.com/en-contact)****