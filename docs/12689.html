<html>
<head>
<title>Creating a Machine Learning Based Web Application Using Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Django 创建基于机器学习的 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-a-machine-learning-based-web-application-using-django-5444e0053a09?source=collection_archive---------2-----------------------#2020-09-01">https://towardsdatascience.com/creating-a-machine-learning-based-web-application-using-django-5444e0053a09?source=collection_archive---------2-----------------------#2020-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bd29" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python 著名的 Django 框架在 web 上部署您的机器学习模型，并增加其可见性。</h2></div><p id="7387" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文面向那些希望使用 Python 的 Django 框架将其机器学习模型部署为 Web 应用程序的读者。对于许多数据科学和机器学习爱好者来说，这可能是转换他们的简单。py 模型文件转换成更加动态和强大的 web 应用程序，该应用程序可以接受用户的输入并生成预测。</p><p id="74d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了文章的简单起见，我们将更多地关注如何创建一个基于 ML 的 web 应用程序，而不是花费大部分时间来解决一个棘手的机器学习问题。此外，这不是一个完整的 django 教程，而是成为 AI/ML 开发者的一步。</p><p id="d332" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们将使用著名的 titanic 数据集创建一个简单的 ML 模型，然后将它转换成一个全功能的、基于 web 的动态应用程序。</p><h1 id="c926" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">开发机器学习模型</h1><p id="cdac" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">如上所述，我们将研究著名的泰坦尼克号数据集，该数据集用于根据乘客的不同属性(乘客级别、性别、年龄、票价等)预测乘客的存活率。).由于这是一个二元分类问题，我们将使用逻辑回归算法(一个强大而简单的机器学习算法)来创建我们的模型。</p><p id="2f0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以参考下面的代码来创建分类模型。</p><blockquote class="mb mc md"><p id="9833" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated">注意:创建机器学习模型本身是一个完整的详细任务，包含多个步骤(如数据预处理、EDA、特征工程、模型开发、模型验证、调整超参数)。这里我们跳过所有这些步骤，因为我们更感兴趣的是使用这个模型来驱动我们基于 web 的应用程序。</p></blockquote><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mn mo l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">泰坦尼克号生存预测模型</p></figure><p id="20a1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们创建了我们的最终模型，我们简单地将这个模型存储为一个<strong class="kk iu"> <em class="me"> model.sav </em> </strong>文件(使用 pickle)。此外，请注意，我们将 scaler 对象存储为一个<strong class="kk iu"> <em class="me"> scaler.sav </em> </strong>文件(因为在将用户输入提供给模型之前，我们将使用相同的缩放对象将用户输入转换为与训练数据相同的级别)。</p><h1 id="49e0" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated"><strong class="ak">创建我们自己的 Django 项目</strong></h1><p id="d4a6" class="pw-post-body-paragraph ki kj it kk b kl lw ju kn ko lx jx kq kr ly kt ku kv lz kx ky kz ma lb lc ld im bi translated">在创建 django 项目之前，首先我们需要使用下面的命令将 django 安装到我们的开发机器上。</p><blockquote class="mb mc md"><p id="def0" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated"><strong class="kk iu"> pip 安装 django </strong></p></blockquote><p id="7c61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将自动安装 django 框架正常运行所需的所有依赖项。如果此命令对您不起作用，请参考下面的链接-</p><div class="mt mu gp gr mv mw"><a href="https://docs.djangoproject.com/en/3.1/topics/install/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">如何安装 Django | Django 文档| Django</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">这份文件会让你和 Django 一起工作。如果你只是想尝试一下 Django，请直接跳到…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">docs.djangoproject.com</p></div></div></div></a></div><p id="970d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你安装了 django，你需要在你的机器上打开命令提示符(Ubuntu 或 Mac 上的终端),然后按照以下步骤操作</p><ol class=""><li id="cf73" class="nf ng it kk b kl km ko kp kr nh kv ni kz nj ld nk nl nm nn bi translated"><strong class="kk iu"> cd 桌面</strong>(你可以移动到任何你想创建项目文件夹的位置)</li><li id="4cd4" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated"><strong class="kk iu">mkdir Titanic _ Survial _ Prediction</strong>(你可以为你的网络应用选择任何你想要的名字)</li><li id="79c7" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated"><strong class="kk iu">cd Titanic _ Survial _ Prediction</strong>(将 CD 放入您在上一步刚刚创建的文件夹中)</li><li id="1d80" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated"><strong class="kk iu">django-admin start project Titanic _ Survial _ Prediction _ Web</strong>(该命令将在主项目文件夹中自动创建一个名为<em class="me">Titanic _ Survial _ Prediction _ Web</em>的 django 项目)</li><li id="6475" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated"><strong class="kk iu">CD Titanic _ Survial _ Prediction _ Web</strong>(CD 到上一步创建的 django 项目中)</li><li id="438d" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated">现在，如果您正确遵循了上述步骤，只需在命令提示符屏幕中键入<strong class="kk iu">python manage . py runserver</strong>，然后将命令提示符上出现的链接(<a class="ae nt" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000/ </a>)复制到 web 浏览器中。一旦你按下回车键，你就会看到下面的屏幕</li></ol><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/dfbac66e8587d9129be4305d77621c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fH8bfS0HW1-weF5B4TxFTg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">Django 默认主页视图</p></figure><p id="b015" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果上面的网页也出现了，那么您已经成功地完成了创建您自己的 django web 应用程序的第一步。</p><p id="de4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果对某些人来说这个网页没有出现，请再次参考上述步骤，看看你是否错过了什么。</p><p id="4f21" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在使用任何 IDE (PyCharm，Atom 等。)打开你的 django 项目(<strong class="kk iu">Titanic _ Survial _ Prediction _ Web</strong></p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/fb2312935b4d8e7a706fdcc8a1504582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*thVRCcuKungkn1jq7Ho1mQ.png"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">默认 Django 项目结构</p></figure><p id="1de9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，在 urls.py 所在的同一个文件夹中，创建一个名为<strong class="kk iu"><em class="me">‘views . py’的新 python 文件。</em> </strong>这个视图文件将负责从使用网页的任何用户那里获得输入，使用相同的输入来生成预测，然后使用网页向用户显示这个预测。</p><blockquote class="mb mc md"><p id="bd2d" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated">此外，我们需要将我们的“model.sav”和“scaler.sav”文件移到与 urls.py 相同的文件夹中。</p></blockquote><p id="a93a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在继续之前，让我们先完成 django 项目的配置。在我们的主项目文件夹中，创建一个名为<strong class="kk iu"><em class="me">【templates】</em></strong>的空文件夹(您可以使用任何名称，但建议遵循已定义的框架命名约定)。这个文件夹将保存我们将在项目中使用的所有 html 文件。</p><p id="e058" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在打开 setting.py 文件，把“模板”(或者你给你的 html 文件夹起的名字)添加到“模板”列表中高亮显示的“DIRS”列表中。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi oc"><img src="../Images/d7e870eb702d0ffa700d0faa2869fefb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nr_xO3AeOiWGVdK84zMKeg.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">最终项目结构</p></figure><p id="31b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在在 urls.py 文件中添加下面的代码来配置我们网站的 URL(不同的网页有不同的 URL)。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mn mo l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">urls.py 配置</p></figure><p id="1c73" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们首先在 urls.py 文件中导入了视图文件，然后在 urlpatterns 列表中添加了主页(打开 web 应用程序时的默认页面，而不是 django 默认视图)和结果页面(用于向用户显示结果)的路径，以及它们各自的名称(使用这些名称可以在我们的 html 文件中引用它们)。</p><p id="e6e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们需要在 views.py 文件中定义这两个函数。除了这两个，我们还将创建一个 getPredictions 函数，它能够通过加载我们预先训练好的模型来生成预测。</p><p id="27d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以参考下面的代码来完成这项任务。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mn mo l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">views.py 文件</p></figure><p id="4ed5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">result 方法负责收集用户输入的所有信息，然后以键值对的形式返回结果。</p><blockquote class="mb mc md"><p id="f90b" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated">注意:总是建议在单独的 python 文件中创建 getPredictions 方法，然后将其导入到 views.py 文件中。这里为了保持简单明了，我们将函数放在 views.py 文件中。</p></blockquote><p id="5cc5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经完成了后端逻辑，让我们创建网页，通过表单接受用户的输入并显示结果。</p><p id="a25f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在“<strong class="kk iu"><em class="me">”</em></strong>模板文件夹内，创建一个 index.html 文件。这个 index.html 将是我们的主页，并将有我们的形式，我们将使用从我们的用户输入。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mn mo l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">index.html</p></figure><p id="af73" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在继续之前，我们需要了解一些事情。</p><ol class=""><li id="5fc7" class="nf ng it kk b kl km ko kp kr nh kv ni kz nj ld nk nl nm nn bi translated">表单操作参数→收集表单数据的视图，使用此数据生成预测，然后重定向到包含结果的网页。对于 django，我们有一种特殊的方法-<strong class="kk iu"><em class="me">action = " { % URLs ' name _ of _ URL ' % } "</em></strong>。在我们的例子中，url 的名称是 result(因为我们已经在 urls.py 文件中提供了这个名称)。</li><li id="d4e0" class="nf ng it kk b kl no ko np kr nq kv nr kz ns ld nk nl nm nn bi translated">此外，我们还需要提供一个<strong class="kk iu"> <em class="me"> {% csrf_token %} </em> </strong>(即跨站点引用伪造令牌)，这使得 django 中的数据处理更加安全。这部分是必须的，因此它应该总是在你的表单标签的第一行。</li></ol><blockquote class="mb mc md"><p id="f383" class="ki kj me kk b kl km ju kn ko kp jx kq mf ks kt ku mg kw kx ky mh la lb lc ld im bi translated">注:<strong class="kk iu"> {%..%} </strong>都叫做脚本标签。</p></blockquote><p id="bbf1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们创建了 index.html 文件，我们就需要创建向用户显示预测的 result.html。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mn mo l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">result.html</p></figure><p id="5cca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在“<strong class="kk iu"> {{ }} </strong>”标记中，我们指定了包含结果的键的名称(在我们的例子中是 result)。</p><p id="391a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成所有这些步骤后，在命令提示符下按 CTRL + C 停止服务器，然后使用“python manage.py runserver”命令重新启动它。现在在浏览器中重新打开链接。这一次，默认页面将是我们的输入表单的 index.html 网页。</p><p id="1884" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">填写相应的数据并提交表单后，您将被重定向到 result.html 页面，该页面将显示您输入数据的预测。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="f4d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是我们如何创建一个简单而强大的基于 ML 的 django web 应用程序，它本质上是动态的(接受用户的输入),并基于机器学习模型进行预测。</p><p id="942a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想了解更多关于 django 的知识，请参考 django 文档(下面的链接)。</p><div class="mt mu gp gr mv mw"><a href="https://www.djangoproject.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">姜戈</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Django 是一个高级 Python Web 框架，它鼓励快速开发和干净、实用的设计。建造者…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.djangoproject.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op nz mw"/></div></div></a></div></div></div>    
</body>
</html>