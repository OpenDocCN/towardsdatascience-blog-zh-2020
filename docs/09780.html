<html>
<head>
<title>F# Azure Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">F# Azure 函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/f-azure-functions-a5cce33dce58?source=collection_archive---------31-----------------------#2020-07-11">https://towardsdatascience.com/f-azure-functions-a5cce33dce58?source=collection_archive---------31-----------------------#2020-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7333" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在 F#中创建 Azure 函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7b7466232cdbca461e43f2fcb32d49a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qYc6UbDekaeVOsrPdyvy8Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">F#中的 Azure 函数</p></figure><p id="6d9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">F#是一种很棒的语言，也是为你的 Azure 函数编程的好选择。不幸的是，微软并没有让实现它们变得容易。这当然比以前容易，但在开始时需要做一些准备工作。但是我认为这种努力是值得的！</p><h2 id="44eb" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">Azure CLI</h2><p id="1534" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">要开始，您需要在计算机上安装 Azure CLI。如果您还不知道，请点击下面的链接:</p><p id="2ddf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae ms" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/CLI/azure/install-azure-CLI？view=azure-cli-latest </a></p><p id="b516" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将使您能够从 Windows 命令行或 PowerShell 提示符使用 Azure CLI。我更喜欢 PowerShell 提示符，因为这也能让您完成制表符。</p><p id="df15" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 PowerShell 提示符下，键入以下内容以获取当前为 F#安装的 Azure 模板列表:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="82d5" class="lu lv it mu b gy my mz l na nb">dotnet new --list -lang F#</span></pre><p id="7d56" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/c73b8140600c0933eec982b03d2c24f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jpHNBN7BCfB_foX7ZSRsrw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">F#的 Azure 模板</p></figure><h2 id="68b5" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">创建项目模板</h2><p id="0662" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">首先，我们将根据提示为 Azure 函数创建项目模板:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="c049" class="lu lv it mu b gy my mz l na nb">dotnet new func -lang F# --name AzureFunctionFSharp</span></pre><p id="2b85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将创建 4 个文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/488ff3bc9f202060e4e41b13d431cbb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*xEJiBzSTs4YSB_Vy5A8C9w.png"/></div></figure><h2 id="8c4d" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">创建功能</h2><p id="d65d" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在所有可用的 Azure 函数模板中，最容易使用的是<strong class="la iu"> HttpTrigger </strong>。要在提示符下创建它:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="88ab" class="lu lv it mu b gy my mz l na nb">dotnet new http -lang F# --name HttpTrigger</span></pre><p id="e8cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将创建 HttpTrigger.fs</p><h2 id="f52e" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">创建解决方案</h2><p id="00b5" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">完成所有这些后，下一步是在 Visual Studio 2019 中创建解决方案文件。如果你打开项目文件<strong class="la iu">azurefunctionfsharp . fsproj</strong>，你应该会发现几乎所有你已经添加的东西:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/152c161c542999d9e339fb7fde4411e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*1nx0PNBYXTENcXnmT7qYJg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">VS2019 中的初始项目</p></figure><p id="01f9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，您会注意到它没有我们的<strong class="la iu"> HttpTrigger.fs </strong>文件！只需将该文件添加到项目中。还需要添加<strong class="la iu"> hosts.json </strong>和<strong class="la iu">localhost . settings . JSON</strong>。对于这最后两个文件，您必须确保它们的构建动作是<em class="nf"> None </em>并且它们被复制到输出目录(如果较新的话):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/e8604b5fe66befe849ba3d588041f316.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*Q1fpefKel16C2OZmUzjgmA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">为 JSON 文件构建属性</p></figure><p id="48e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你完成了，构建项目并保存解决方案。</p><h2 id="f48a" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">附加 NuGet 包</h2><p id="e508" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我找到了<a class="ae ms" href="http://fsharp.github.io/FSharp.Data/" rel="noopener ugc nofollow" target="_blank"> FSharp。Data </a> NuGet 包在处理 F#项目时非常有用。您可以通过项目的<strong class="la iu">管理包</strong>选项来添加它。</p><h2 id="faf8" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">创建自定义模板</h2><p id="e8c8" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">完成所有这些后，您可以将整个项目保存为自定义模板，供将来的项目使用。这将使你不必再次经历这一切。如果您在<strong class="la iu">解决方案浏览器</strong>选项卡中选择您的项目，然后从项目菜单中选择<strong class="la iu">导出模板</strong>，您可以将该项目导出为未来模板:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/f0d46945795491ea009da2ab1dddf951.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*EUu8XoouPg47WI8SQFoWVA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">导出模板</p></figure><p id="e5ac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下次你想创建一个 F# Azure Function 项目时，你可以使用你已经创建的自定义模板:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/42778b8f9e7491db0fd056de8d0a44ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ROW9uLuc7wBSGwJdpSeZoQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建一个新的 F# Azure 函数项目</p></figure><h2 id="adba" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">调试你的 F# Azure 函数</h2><p id="86b9" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">如果一切设置正确，您现在应该能够按 F5 键并调试您的项目。您应该会看到类似这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/dd581cf1aa191b29c18147dbe31773e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uk4OtnC6Ey1n1b3egjNLVQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Azure 功能在本地运行</p></figure><p id="06f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，您可以使用类似于<a class="ae ms" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>的东西向 REST API 发送请求，并查看您的输出。</p><h2 id="5593" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">结论</h2><p id="b528" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">正如我在开头所说，这不像在 C#中创建 Azure 函数那样简单，但肯定值得付出努力。希望微软会继续改进他们对 F# Azure 函数的支持，并在 Visual Studio 2019 或未来版本中放置一个合适的模板。与此同时，这是你自己可以做到的。</p></div></div>    
</body>
</html>