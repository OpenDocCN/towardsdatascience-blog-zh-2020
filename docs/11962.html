<html>
<head>
<title>SQL for data scientists: learning it easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向数据科学家的 SQL:轻松学习</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sql-for-data-scientists-learning-it-easy-way-798122c6d4e6?source=collection_archive---------38-----------------------#2020-08-18">https://towardsdatascience.com/sql-for-data-scientists-learning-it-easy-way-798122c6d4e6?source=collection_archive---------38-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fbc9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用于数据准备、过滤、连接等的 SQL 语句</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/036c494aae503f0e27b88361cdef7098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C9GH_Twzx-YubNo-"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">乔安娜·科辛斯卡在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="282c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不会拿起锤子去找钉子——那是解决问题的不寻常的方式。通常做生意的方式是先确定问题，然后寻找合适的工具。</p><p id="6333" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我一次又一次地看到人们通过选择 SQL 语句来学习 SQL，然后学习如何使用它。在我看来，这种基于工具的心态是一种低效的学习方式，另一方面，翻转这种心态可以产生巨大的差异。先有问题，后有工具！</p><p id="ee91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对数据科学感兴趣，你会知道<code class="fe lv lw lx ly b">pandas</code>和<code class="fe lv lw lx ly b">tidyverset</code>在过滤、排序、分组、合并等各种数据处理操作中的能力。使用 SQL，您可以做类似的事情，但是是在数据库环境中，并且使用不同的语言。</p><p id="19a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文的目的是演示如何采用数据科学家在编程环境中通常遵循的类似方法来解决 SQL 中的数据处理问题。在 SQL 上你不会学到所有的东西，相反，目标是展示“如何”学习。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="54a5" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">适合您实践的 SQL 编辑器</h2><p id="bcf1" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果您的计算机上安装了关系数据库管理系统，启动它。如果没有，<a class="ae ky" href="https://www.w3schools.com/sql/trysql.asp?filename=trysql_op_in" rel="noopener ugc nofollow" target="_blank"> w3schools </a>有一个在线 SQL 编辑器，你可以马上在你的浏览器上使用。</p><p id="08a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还会注意到，屏幕右侧有相当多的数据集，您可以一起使用和练习。</p><p id="9b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们进入“如何”使用 SQL 解决实际的数据处理问题。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="44c1" class="ne mh it bd mi nf ng nh ml ni nj nk mo jz nl ka mr kc nm kd mu kf nn kg mx no bi translated">理解数据</h1><p id="13fd" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">就像你用你最喜欢的编程库如<code class="fe lv lw lx ly b">pandas</code>所做的一样，你需要做的第一件事就是在 SQL 环境中加载数据集。</p><p id="a3d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像典型数据科学项目中的基本探索性数据分析(EDA)一样，您可以检查前几行，计算总行数，查看列名、数据类型等。下面是一些命令。</p><pre class="kj kk kl km gt np ly nq nr aw ns bi"><span id="2f02" class="mg mh it ly b gy nt nu l nv nw"># import data into editor<br/>SELECT * # import all columns with *, else specify column name<br/>FROM table_name<br/>LIMIT 10 #to show 10 rows</span><span id="ced7" class="mg mh it ly b gy nx nu l nv nw"># import and save data as a separate table<br/>SELECT *<br/>INTO new_table_name<br/>FROM table_name</span><span id="ee6e" class="mg mh it ly b gy nx nu l nv nw"># count number of rows in the dataset<br/>SELECT <br/>COUNT(*)<br/>FROM table_name</span><span id="c248" class="mg mh it ly b gy nx nu l nv nw"># count unique values of a single column<br/>SELECT <br/>COUNT(DISTINCT column_name) <br/>FROM table_name</span></pre><h1 id="b360" class="ne mh it bd mi nf ny nh ml ni nz nk mo jz oa ka mr kc ob kd mu kf oc kg mx no bi translated">使用列</h1><p id="eb34" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">数据库通常很大，运行查询需要很长时间。因此，如果您知道您感兴趣的具体列，您可以通过选择这些列来创建数据的子集。</p><p id="3e76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能还想执行列操作，如重命名、创建新列等。</p><pre class="kj kk kl km gt np ly nq nr aw ns bi"><span id="55f2" class="mg mh it ly b gy nt nu l nv nw"># select two columns from a multi-column dataset<br/>SELECT column1, column2<br/>FROM tableName</span><span id="ae27" class="mg mh it ly b gy nx nu l nv nw"># rename a column<br/>SELECT<br/>ProductName AS name<br/>FROM productTable</span><span id="c232" class="mg mh it ly b gy nx nu l nv nw"># new conditional column (similar to if statment)<br/>SELECT ProductName, Price,</span><span id="5ebe" class="mg mh it ly b gy nx nu l nv nw">(CASE<br/>WHEN Price &gt; 20 AND Price &lt;41 THEN 'medium '<br/>WHEN Price &gt;40 THEN 'high'<br/>ELSE 'low'<br/>END) AS newColName</span><span id="fa58" class="mg mh it ly b gy nx nu l nv nw">FROM Products</span></pre><h1 id="7240" class="ne mh it bd mi nf ny nh ml ni nz nk mo jz oa ka mr kc ob kd mu kf oc kg mx no bi translated">筛选行</h1><p id="d97d" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">过滤行可能是您经常使用 SQL 执行的最重要的任务。从大型数据集中，您通常会根据产品类型、值的范围等来过滤行。</p><p id="49c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在学习 SQL，你应该花大量的时间学习过滤数据的不同方法和你需要的 SQL 语句。</p><pre class="kj kk kl km gt np ly nq nr aw ns bi"><span id="4313" class="mg mh it ly b gy nt nu l nv nw"># select all records that starts with the letter "S"<br/>SELECT * FROM Products<br/>WHERE ProductName like 'S%'</span><span id="6592" class="mg mh it ly b gy nx nu l nv nw"># select all records that end at "S"<br/>SELECT * FROM Products<br/>WHERE ProductName like '%S'</span><span id="3d65" class="mg mh it ly b gy nx nu l nv nw"># select all records that does NOT start at "S"<br/>SELECT * FROM Products<br/>WHERE ProductName like '[^S]%'</span><span id="0fbf" class="mg mh it ly b gy nx nu l nv nw"># filter rows with specific value<br/>SELECT * FROM table_name</span><span id="78ad" class="mg mh it ly b gy nx nu l nv nw">WHERE firstName = 'Pilu'<br/>OR lastName != 'Milu'<br/>AND income &lt;= 100<br/>AND city IN ('Arlington', 'Burlington', 'Fairfax')</span><span id="98fa" class="mg mh it ly b gy nx nu l nv nw"># filter rows within a range of numbers<br/>SELECT *<br/>FROM tableName<br/>WHERE income BETWEEN 100 AND 200 </span><span id="9c9b" class="mg mh it ly b gy nx nu l nv nw"># filter null values<br/>SELECT * FROM tableName<br/>WHERE columnName IS NULL # opposite "IS NOT NULL"</span></pre><h1 id="034d" class="ne mh it bd mi nf ny nh ml ni nz nk mo jz oa ka mr kc ob kd mu kf oc kg mx no bi translated">连接数据集</h1><p id="69c3" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">您在关系数据库管理系统(RDBMS)中使用 SQL，这意味着您将同时处理多个表，因此在您能够进行高级建模之前，需要将它们连接起来。</p><p id="bdcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上有四种连接数据的方法——左连接、右连接、内连接、全外连接——您需要稍微搜索一下，看看每种方法是如何工作的，但是我在下面给出了执行这些连接的所有代码。</p><pre class="kj kk kl km gt np ly nq nr aw ns bi"><span id="5c07" class="mg mh it ly b gy nt nu l nv nw"># inner join (for matching records only)<br/>SELECT * FROM<br/>table1 INNER JOIN table2<br/>ON table1.ID = tbale2.ID</span><span id="fa40" class="mg mh it ly b gy nx nu l nv nw"># full outer join (all left + all right)<br/>SELECT * FROM<br/>table1 FULL OUTER JOIN table2<br/>ON table1.ID = tbale2.ID</span><span id="8796" class="mg mh it ly b gy nx nu l nv nw"># left join (all records from left + matching records from right)<br/>SELECT * FROM<br/>table1 LEFT JOIN table2<br/>ON table1.ID = tbale2.ID</span><span id="f678" class="mg mh it ly b gy nx nu l nv nw"># left join (matching records from left + all records from right)<br/>SELECT * FROM<br/>table1 RIGHT JOIN table2<br/>ON table1.ID = tbale2.ID</span></pre><h1 id="c1ec" class="ne mh it bd mi nf ny nh ml ni nz nk mo jz oa ka mr kc ob kd mu kf oc kg mx no bi translated">做计算</h1><p id="dcd5" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">创建汇总统计数据、数学运算和构建模型是数据科学家每天要做的事情。SQL 并不是一个合适的工具，但是，如果你需要创建一个快速的汇总统计数据，你可以使用聚合函数来计算列的平均值、总数、最小值/最大值等。</p><pre class="kj kk kl km gt np ly nq nr aw ns bi"><span id="c5a7" class="mg mh it ly b gy nt nu l nv nw"># new calculated column<br/>SELECT Price,<br/>(Price * 2) AS NewCol<br/>FROM Products</span><span id="a3d7" class="mg mh it ly b gy nx nu l nv nw"># aggregation by group<br/>SELECT CategoryID, SUM(Price) <br/>FROM Products<br/>GROUP BY CategoryID</span><span id="ed97" class="mg mh it ly b gy nx nu l nv nw"># min/max values of a column<br/>SELECT ProductName, MIN(Price)<br/>FROM Products</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="e400" class="mg mh it bd mi mj mk dn ml mm mn dp mo li mp mq mr lm ms mt mu lq mv mw mx my bi translated">最终注释</h2><p id="b604" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">本文的目的是介绍一些基本的 SQL 概念和语句，用于从关系数据库管理系统中查询数据。但主要目的是展示如何作为一名数据科学家学习 SQL，以解决特定的问题，而不是专注于 SQL 语句。</p></div></div>    
</body>
</html>