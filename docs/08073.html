<html>
<head>
<title>Twitter US Airline Sentiment Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitter美国航空公司情绪分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/twitter-us-airline-sentiment-analysis-91caa7a22a93?source=collection_archive---------38-----------------------#2020-06-14">https://towardsdatascience.com/twitter-us-airline-sentiment-analysis-91caa7a22a93?source=collection_archive---------38-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d833" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Lightgbm分类器进行反馈分析。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2700e77261e92a8d02dd382f57996178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYIi0eRAVJZDtpFljw2A5g.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Szabo Viktor在Unsplash上拍摄的照片</p></figure><p id="f2c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里的目标是分析旅行者如何在2015年2月在Twitter上提及他们的感受。对于航空公司来说，利用这些免费数据为客户提供更好的服务将是非常有趣的。这个数据集可以从<a class="ae lr" href="https://www.kaggle.com/crowdflower/twitter-airline-sentiment" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><p id="58ac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">怎么分析呢？</p><p id="db8d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我已经用Python上传了保存在本地目录中的数据:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="cddc" class="lx ly iq lt b gy lz ma l mb mc">tweets = pd.read_csv('Tweets.csv')</span></pre><p id="abd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们看看数据集中包含的要素:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="e6d6" class="lx ly iq lt b gy lz ma l mb mc">tweets.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi md"><img src="../Images/56ac279dfe1317a327ed04aa221a556b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxhh1smTbQ53d4oLfOhVrA.jpeg"/></div></div></figure><p id="6688" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们在这里寻找的是名为“航空公司情绪”的列，以及我们如何根据旅行者的推文预测它。这叫做情感分析。</p><p id="fab4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了更好地了解观察结果和特征，我们可以运行以下命令，它将为我们提供每个特征的特征。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="6539" class="lx ly iq lt b gy lz ma l mb mc">tweets.info()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi me"><img src="../Images/02568cfb0f46912f9d1cfe3f726326c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*-x_PVLaoOPIK93RRsI1yJw.jpeg"/></div></figure><p id="6e31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们把表达出来的感觉想象成消极的、中性的和积极的。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="f3b6" class="lx ly iq lt b gy lz ma l mb mc">plt.figure(figsize=(3,5))<br/>sns.countplot(tweets['airline_sentiment'], order =tweets.airline_sentiment.value_counts().index,palette= 'plasma')<br/>plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/da69e2b7a8b0c4c358bf33e9e8c88b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*uzR5sJIAYo2wgQO6tN9fQQ.jpeg"/></div></figure><p id="f9de" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">大多数人持否定态度，如果航空公司能提供适当的回应，这将是一个很好的/免费的反馈。我们还可以展示对每家航空公司的看法。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="7016" class="lx ly iq lt b gy lz ma l mb mc">g = sns.FacetGrid(tweets, col=”airline”, col_wrap=3, height=5, aspect =0.7) g = g.map(sns.countplot, “airline_sentiment”,order =tweets.airline_sentiment.value_counts().index, palette=’plasma’) plt.show()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/b482c1c0f3e1998dd4c2ddf9a04db410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnWj3VS142AW-OqNClNoWQ.jpeg"/></div></div></figure><p id="d1fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了进行情感分析，我们需要导入一些库。由于这是一个分类问题，所以我使用LGBMClassifier。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="295a" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">from</strong> <strong class="lt ir">lightgbm</strong> <strong class="lt ir">import</strong> LGBMClassifier</span></pre><p id="753e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要将这些推文(文本)转换成令牌计数矩阵。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="737f" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">from</strong> <strong class="lt ir">sklearn.feature_extraction.text</strong> <strong class="lt ir">import</strong> CountVectorizer</span></pre><p id="60f7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一步是使用tf-idf表示来规范化计数矩阵。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="dff3" class="lx ly iq lt b gy lz ma l mb mc"><strong class="lt ir">from</strong> <strong class="lt ir">sklearn.feature_extraction.text</strong> <strong class="lt ir">import</strong> TfidfTransformer</span></pre><p id="90ff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我使用管道功能来完成所有步骤。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="e813" class="lx ly iq lt b gy lz ma l mb mc">twitter_sentiment = Pipeline([('CVec', CountVectorizer(CountVectorizer(stop_words='english'))),<br/>                     ('Tfidf', TfidfTransformer()),<br/>                      ('norm', Normalizer()),<br/>                    ('tSVD', TruncatedSVD(n_components=100)),<br/>                     ('lgb', LGBMClassifier(n_jobs=-1))])</span></pre><p id="ab57" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，CROSS_VALIDATE与ROC_AUC指标一起使用。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="4f41" class="lx ly iq lt b gy lz ma l mb mc">%%time <br/>cv_pred = cross_validate(twitter_sentiment, <br/>tweets[‘text’], <br/>tweets[‘airline_sentiment’], <br/>cv=5, <br/>scoring=(‘roc_auc_ovr’))</span></pre><p id="f6c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们使用ROC_AUS测量的结果如下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/678b0b7bf49264ac866c824519de0ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8k5PFzy9zGeSr3xTNDXQKA.jpeg"/></div></div></figure><p id="dc29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完整的代码可以通过这个<a class="ae lr" href="https://github.com/shosseini811/Twitter-US-Airline-Sentiment-Analysis/blob/master/Twitter%20US%20Airline%20Sentiment.ipynb" rel="noopener ugc nofollow" target="_blank">链接</a>访问。</p></div></div>    
</body>
</html>