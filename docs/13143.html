<html>
<head>
<title>Building a multi-functionality Voice Assistant in 10 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10 分钟打造多功能语音助手</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-multi-functionality-voice-assistant-in-10-minutes-3e5d87e164f0?source=collection_archive---------33-----------------------#2020-09-09">https://towardsdatascience.com/building-a-multi-functionality-voice-assistant-in-10-minutes-3e5d87e164f0?source=collection_archive---------33-----------------------#2020-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9c1b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一步一步的初学者指南，建立您的第一个语音助手，执行 8 个基本和引人注目的功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/108aeac5154fe27c6803377b64e6925c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AqTxUNoGZxZdH7PoE44dQw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图像取自— <a class="ae ky" href="https://pngarchive.com/public/uploads/preview/man-talking-bubble-11560022724ipfasdgubi.png" rel="noopener ugc nofollow" target="_blank">图像 1 </a>、<a class="ae ky" href="https://static.botsrv.com/website/img/quriobot_favicon.1727b193.png" rel="noopener ugc nofollow" target="_blank">图像 2 </a>、<a class="ae ky" href="https://www.pinclipart.com/picdir/big/11-116901_images-for-cartoon-quote-bubble-saying-balloon-clipart.png" rel="noopener ugc nofollow" target="_blank">图像 3 </a>、<a class="ae ky" href="https://www.plumbingwebmasters.com/site/wp-content/uploads/web-design-coding-and-programming-for-plumbers.png" rel="noopener ugc nofollow" target="_blank">图像 4 </a></p></figure><p id="7bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如今，人们没有时间手动在互联网上搜索信息或问题的答案，而是希望有人为他们做这件事，就像个人助理一样，听取提供的命令并据此采取行动。由于人工智能，这种个人助理现在可以以语音助理的形式提供给每个人，比人类快得多，也可靠得多。一个甚至能够完成困难任务的助手，比如在线下单、播放音乐、开灯等。仅仅通过听用户的命令</p><p id="f0e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何构建一个语音助手来响应基本的用户查询。读完这篇文章后，你会对什么是网络抓取以及如何用它来构建一个语音助手有一个基本的概念。</p><p id="063b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:要阅读本文，您需要对 Python 语言有一个基本的了解。</p><h1 id="7b96" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">目录</strong></h1><ol class=""><li id="cbfb" class="mn mo it lb b lc mp lf mq li mr lm ms lq mt lu mu mv mw mx bi translated">语音助手</li></ol><p id="2251" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.网页抓取</p><p id="f2e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.履行</p><h1 id="8fbc" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">语音助手</h1><p id="e604" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Virtual_assistant" rel="noopener ugc nofollow" target="_blank">语音助手</a>是一个软件代理，可以根据命令或问题为个人执行任务或服务。一般来说，语音助手对语音命令做出反应，并向用户提供关于他/她的查询的相关信息。</p><p id="7834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该助手可以理解用户发出的特定命令并做出反应，如在 YouTube 上播放歌曲或了解天气。它将搜索和/或抓取网页以找到对命令的响应，从而满足用户。</p><p id="81d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，语音助手已经能够处理产品订单，回答问题，执行播放音乐或与朋友打电话等操作。</p><p id="3377" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实现的语音助手可以执行以下任务:</p><ol class=""><li id="43ab" class="mn mo it lb b lc ld lf lg li nb lm nc lq nd lu mu mv mw mx bi translated">提供天气详情</li><li id="708c" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">提供电晕更新</li><li id="4a8f" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">提供最新消息</li><li id="aa24" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">搜索一个词的意思</li><li id="3f8b" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">做笔记</li><li id="f7ac" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">播放 YouTube 视频</li><li id="882b" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">在谷歌地图上显示位置</li><li id="a877" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">在谷歌浏览器上打开网站</li></ol><p id="1b2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在构建语音助手时，有两个重要的库是你应该考虑的。Python 的<strong class="lb iu"> SpeechRecognition </strong>包帮助语音助手理解用户。它可以按如下方式实现:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="8a3f" class="no lw it nk b gy np nq l nr ns">import speech_recognition as sr</span><span id="ca90" class="no lw it nk b gy nt nq l nr ns">#initalises the recognizer<br/>r1 = sr.Recognizer()</span><span id="d76b" class="no lw it nk b gy nt nq l nr ns">#uses microphone to take the input<br/>with sr.Microphone() as source:<br/>    print('Listening..')</span><span id="7cb3" class="no lw it nk b gy nt nq l nr ns">    #listens to the user<br/>    audio = r1.listen(source)</span><span id="fbb1" class="no lw it nk b gy nt nq l nr ns">    #recognises the audio and converts it to text<br/>    audio = r1.recognize_google(audio)</span></pre><p id="0952" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 的<strong class="lb iu"> pyttsx3 </strong>包通过将文本转换成音频来帮助语音助手响应用户。它可以按如下方式实现:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="38a4" class="no lw it nk b gy np nq l nr ns">import pyttsx3</span><span id="2707" class="no lw it nk b gy nt nq l nr ns">#initialises pyttsx3<br/>engine = pyttsx3.init('sapi5')</span><span id="84c8" class="no lw it nk b gy nt nq l nr ns">#converts the text to audio<br/>engine.say('Hello World')<br/>engine.runAndWait()</span></pre><h1 id="263d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">网页抓取</strong></h1><p id="c2e9" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Web_scraping" rel="noopener ugc nofollow" target="_blank">网页抓取</a>是指从网站中提取数据。网站上的数据是非结构化的。Web 抓取有助于收集这些非结构化数据，并以结构化形式存储。</p><p id="b452" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网页抓取的一些应用包括:</p><p id="a4f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">搜集社交媒体</strong>如 Twitter，以收集推文和评论来进行情感分析。</p><p id="0686" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">抓取亚马逊等电子商务网站</strong>提取产品信息进行数据分析，预测市场趋势。</p><p id="b767" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">收集电子邮件地址</strong>以收集电子邮件 id，然后发送大量电子邮件用于营销和广告目的。</p><p id="e0b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">抓取谷歌图片</strong>以创建数据集，用于训练机器学习或深度学习模型。</p><p id="7491" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然可以手动完成，但是 Python 的库<strong class="lb iu">美汤</strong>让抓取数据变得更加简单快捷。</p><p id="5864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要通过 python 使用 web 抓取来提取数据，您需要遵循以下基本步骤:</p><ol class=""><li id="876b" class="mn mo it lb b lc ld lf lg li nb lm nc lq nd lu mu mv mw mx bi translated">找到您想要抓取的网站的 URL</li><li id="a130" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">提取网站的全部代码</li><li id="07f7" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">检查网站并找到您想要提取的数据</li><li id="ce54" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">使用 html 标签过滤代码以获得所需的数据</li><li id="7d3c" class="mn mo it lb b lc ne lf nf li ng lm nh lq ni lu mu mv mw mx bi translated">以要求的格式存储数据</li></ol><h1 id="12e5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">履行</h1><p id="cf1b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">让我们首先在您的 python 笔记本中导入以下库，如下所示:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="e0ab" class="no lw it nk b gy np nq l nr ns">import requests <br/>from bs4 import BeautifulSoup <br/>import re<br/>import speech_recognition as sr <br/>from datetime import date<br/>import webbrowser<br/>import pyttsx3</span></pre><p id="0c25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们创建我们的主函数，它由一系列 if-else 语句组成，告诉助手在特定条件下如何响应。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="c667" class="no lw it nk b gy np nq l nr ns">engine = pyttsx3.init('sapi5')</span><span id="a4a9" class="no lw it nk b gy nt nq l nr ns">r1 = sr.Recognizer()<br/>with sr.Microphone() as source:<br/>    print('Listening..')<br/>    engine.say('Listening')<br/>    engine.runAndWait()<br/>    audio = r1.listen(source)<br/>    audio = r1.recognize_google(audio)</span><span id="c78b" class="no lw it nk b gy nt nq l nr ns">    if 'weather' in audio:<br/>        print('..')<br/>        words = audio.split(' ')<br/>        print(words[-1])<br/>        scrape_weather(words[-1])</span><span id="4141" class="no lw it nk b gy nt nq l nr ns">    elif 'covid' in audio:<br/>        print('..')<br/>        words = audio.split(' ')<br/>        corona_updates(words[-1])</span><span id="cbf8" class="no lw it nk b gy nt nq l nr ns">    elif 'meaning' in audio:<br/>        print('..')<br/>        words = audio.split(' ')<br/>        print(words[-1])<br/>        scrape_meaning(words[-1])<br/>        <br/>    elif 'take notes' in audio:<br/>        print('..')<br/>        take_notes()<br/>        print('Noted!!')<br/>        <br/>    elif 'show notes' in audio:<br/>        print('..')<br/>        show_notes()<br/>        print('Done')<br/>        <br/>    elif 'news' in audio:<br/>        print('..')<br/>        scrape_news()<br/>        <br/>    elif 'play' in audio:<br/>        print('..')<br/>        words = audio.split(' ')<br/>        print(words[-1])<br/>        play_youtube(audio)<br/>        <br/>    elif 'open' in audio:<br/>        print('..')<br/>        words = audio.split('open')<br/>        print(words[-1])<br/>        link = str(words[-1])<br/>        link = re.sub(' ', '', link)<br/>        engine.say('Opening')<br/>        engine.say(link)<br/>        engine.runAndWait()<br/>        link = f'<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/{link}.com'">https://{link}.com'</a><br/>        print(link)<br/>        webbrowser.open(link)<br/>        <br/>    elif 'where is' in audio:<br/>        print('..')<br/>        words = audio.split('where is')<br/>        print(words[-1])<br/>        link = str(words[-1])<br/>        link = re.sub(' ', '', link)<br/>        engine.say('Locating')<br/>        engine.say(link)<br/>        engine.runAndWait()<br/>        link = f'<a class="ae ky" href="https://www.google.co.in/maps/place/{link}'" rel="noopener ugc nofollow" target="_blank">https://www.google.co.in/maps/place/{link}'</a><br/>        print(link)<br/>        webbrowser.open(link)<br/>        <br/>            <br/>    else:<br/>        print(audio)<br/>        print('Sorry, I do not understand that!')<br/>        engine.say('Sorry, I do not understand that!')<br/>        engine.runAndWait()</span></pre><p id="b7f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">案例一:</strong>如果用户想了解<strong class="lb iu">天气</strong>，他/她可以问助手<em class="nu">“嘿！孟买今天的天气怎么样？”</em></p><p id="feca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于音频中出现了单词<em class="nu"> "weather" </em>，函数<strong class="lb iu">scrape _ weather(words[-1])</strong>将被调用，参数为<em class="nu"> "Mumbai "。</em></p><p id="9700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个函数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="71c1" class="no lw it nk b gy np nq l nr ns">def scrape_weather(city):<br/>    url = '<a class="ae ky" href="https://www.google.com/search?q=accuweather+'" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?q=accuweather+'</a> + city<br/>    page = requests.get(url)</span><span id="8299" class="no lw it nk b gy nt nq l nr ns">soup = BeautifulSoup(page.text, 'lxml')</span><span id="dfa3" class="no lw it nk b gy nt nq l nr ns">links = [a['href']for a in soup.findAll('a')]<br/>    link = str(links[16])<br/>    link = link.split('=')<br/>    link = str(link[1]).split('&amp;')<br/>    link = link[0]<br/>    <br/>    page = requests.get(link, headers={'User-Agent': 'Mozilla/5.0'})</span><span id="51e4" class="no lw it nk b gy nt nq l nr ns">soup = BeautifulSoup(page.content, 'lxml') <br/>    <br/>    time = soup.find('p', attrs = {'class': 'cur-con-weather-card__subtitle'})<br/>    time = re.sub('\n', '', time.text)<br/>    time = re.sub('\t', '', time)<br/>    time = 'Time: ' + time</span><span id="5b02" class="no lw it nk b gy nt nq l nr ns">temperature = soup.find('div', attrs = {'class':'temp'})<br/>    temperature = 'Temperature: ' + temperature.text<br/>    <br/>    realfeel = soup.find('div', attrs = {'class': 'real-feel'})<br/>    realfeel = re.sub('\n', '',realfeel.text)<br/>    realfeel = re.sub('\t', '',realfeel)<br/>    realfeel = 'RealFeel: ' + realfeel[-3:] + 'C'</span><span id="cc4d" class="no lw it nk b gy nt nq l nr ns">climate = soup.find('span', attrs = {'class':'phrase'})<br/>    climate = "Climate: " + climate.text<br/>    <br/>    info = 'For more information visit: ' + link <br/>    <br/>    print('The weather for today is: ')<br/>    print(time)<br/>    print(temperature)<br/>    print(realfeel)<br/>    print(climate)<br/>    print(info)<br/>    engine.say('The weather for today is: ')<br/>    engine.say(time)<br/>    engine.say(temperature)<br/>    engine.say(realfeel)<br/>    engine.say(climate)<br/>    engine.say('For more information visit accuweather.com' )<br/>    engine.runAndWait()</span></pre><p id="70ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用“<em class="nu">accuweather.com”</em>网站搜集所有与天气相关的信息。函数<strong class="lb iu"> request.get(url) </strong>向使用<strong class="lb iu"> BeautifulSoup(page.text，' lxml') </strong>提取完整 HTML 代码的 url 发送 get 请求</p><p id="cf90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦提取了代码，我们将检查代码以找到感兴趣的数据。例如，温度的数值以下列格式表示</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="d136" class="no lw it nk b gy np nq l nr ns">&lt;div class = "temp"&gt;26°&lt;/div&gt;</span></pre><p id="eb3c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用提取</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="0a88" class="no lw it nk b gy np nq l nr ns">soup.find('div', attrs = {'class':'temp'})</span></pre><p id="cbf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似地，我们提取时间、真实感觉和气候，并使用 engine.say()让助手对用户做出响应。</p><p id="8d30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">案例二:</strong>如果用户想要当前<strong class="lb iu">新冠肺炎</strong>的更新，他/她可以问助手<em class="nu">嘿！你能给我印度的 COVID 更新吗？”</em>或<em class="nu">“嘿！你能给我世界的 COVID 更新吗？”</em></p><p id="9716" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于单词<em class="nu">“covid”</em>出现在音频中，函数<strong class="lb iu">corona _ updates(words[-1])</strong>将被调用，参数为<em class="nu">“印度”或“世界”</em></p><p id="2a43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个函数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="2f22" class="no lw it nk b gy np nq l nr ns">def corona_updates(audio):<br/>    <br/>    audio = audio</span><span id="1a7d" class="no lw it nk b gy nt nq l nr ns">url = '<a class="ae ky" href="https://www.worldometers.info/coronavirus/'" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/'</a><br/>    page = requests.get(url)</span><span id="c4c6" class="no lw it nk b gy nt nq l nr ns">soup = BeautifulSoup(page.content, 'lxml')</span><span id="dae8" class="no lw it nk b gy nt nq l nr ns">totalcases = soup.findAll('div', attrs =  {'class': 'maincounter-number'})<br/>    total_cases = []<br/>    for total in totalcases:<br/>        total_cases.append(total.find('span').text)</span><span id="de85" class="no lw it nk b gy nt nq l nr ns">world_total = 'Total Coronavirus Cases: ' + total_cases[0]<br/>    world_deaths = 'Total Deaths: ' + total_cases[1]<br/>    world_recovered = 'Total Recovered: ' + total_cases[2]<br/>    <br/>    info = 'For more information visit: ' + '<a class="ae ky" href="https://www.worldometers.info/coronavirus/#countries'" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/#countries'</a></span><span id="dc6b" class="no lw it nk b gy nt nq l nr ns">if 'world' in audio:<br/>        print('World Updates: ')<br/>        print(world_total)<br/>        print(world_deaths)<br/>        print(world_recovered)<br/>        print(info)</span><span id="d06c" class="no lw it nk b gy nt nq l nr ns">else:<br/>        country = audio</span><span id="5a35" class="no lw it nk b gy nt nq l nr ns">url = '<a class="ae ky" href="https://www.worldometers.info/coronavirus/country/'" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/country/'</a> + country.lower() + '/'<br/>        page = requests.get(url)</span><span id="376c" class="no lw it nk b gy nt nq l nr ns">soup = BeautifulSoup(page.content, 'lxml')</span><span id="4e14" class="no lw it nk b gy nt nq l nr ns">totalcases = soup.findAll('div', attrs =  {'class': 'maincounter-number'})<br/>        total_cases = []<br/>        for total in totalcases:<br/>            total_cases.append(total.find('span').text)</span><span id="22fe" class="no lw it nk b gy nt nq l nr ns">total = 'Total Coronavirus Cases: ' + total_cases[0]<br/>        deaths = 'Total Deaths: ' + total_cases[1]<br/>        recovered = 'Total Recovered: ' + total_cases[2]</span><span id="adc7" class="no lw it nk b gy nt nq l nr ns">info = 'For more information visit: ' + url</span><span id="712a" class="no lw it nk b gy nt nq l nr ns">updates = country + ' Updates: '</span><span id="49e3" class="no lw it nk b gy nt nq l nr ns">print(updates)<br/>        print(total)<br/>        print(deaths)<br/>        print(recovered)<br/>        print(info)<br/>        <br/>        engine.say(updates)<br/>        engine.say(total)<br/>        engine.say(deaths)<br/>        engine.say(recovered)<br/>        engine.say('For more information visit: worldometers.info')<br/>        engine.runAndWait()</span></pre><p id="4370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用网站“<a class="ae ky" href="https://www.worldometers.info/coronavirus/country/'" rel="noopener ugc nofollow" target="_blank">world ometers . info</a><em class="nu">”</em>搜集所有与日冕相关的信息。函数<strong class="lb iu"> request.get(url) </strong>向使用<strong class="lb iu"> BeautifulSoup(page.text，' lxml') </strong>提取完整 HTML 代码的 url 发送 get 请求</p><p id="77b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦提取了代码，我们将检查代码以找到总电晕情况、总恢复和总死亡的数值。</p><p id="364c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些值存在于具有类“maincounter-number”的 div 范围内，如下所示。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="a954" class="no lw it nk b gy np nq l nr ns">&lt;div id="maincounter-wrap" style="margin-top:15px"&gt;<br/>&lt;h1&gt;Coronavirus Cases:&lt;/h1&gt;<br/>&lt;div class="maincounter-number"&gt;<br/>&lt;span style="color:#aaa"&gt;25,091,068 &lt;/span&gt;<br/>&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="12cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些可以提取如下。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="1e11" class="no lw it nk b gy np nq l nr ns">totalcases = soup.findAll('div', attrs =  {'class': 'maincounter-number'})<br/>    total_cases = []<br/>    for total in totalcases:<br/>        total_cases.append(total.find('span').text)</span></pre><p id="b514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先找到所有具有类“maincounter-number”的 div 元素。然后我们遍历每个 div 以获得包含数值的跨度。</p><p id="a6fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">案例三:如果用户想了解<strong class="lb iu">新闻</strong>，可以问助理<em class="nu">“嘿！你能告诉我最新的消息吗？”</em></p><p id="f018" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于音频中出现了单词<em class="nu">“news”</em>，因此将调用函数<strong class="lb iu"> scrape_news() </strong>。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="02ff" class="no lw it nk b gy np nq l nr ns">def scrape_news():<br/>    url = '<a class="ae ky" href="https://news.google.com/topstories?hl=en-IN&amp;gl=IN&amp;ceid=IN:en" rel="noopener ugc nofollow" target="_blank">https://news.google.com/topstories?hl=en-IN&amp;gl=IN&amp;ceid=IN:en</a> '<br/>    page = requests.get(url)<br/>    soup = BeautifulSoup(page.content, 'html.parser')<br/>    news = soup.findAll('h3', attrs = {'class':'ipQwMb ekueJc RD0gLb'})<br/>    for n in news:<br/>        print(n.text)<br/>        print('\n')<br/>        engine.say(n.text)<br/>    print('For more information visit: ', url)<br/>    engine.say('For more information visit google news')<br/>    engine.runAndWait()</span></pre><p id="800c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用“<a class="ae ky" href="https://news.google.com/topstories?hl=en-IN&amp;gl=IN&amp;ceid=IN:en" rel="noopener ugc nofollow" target="_blank">谷歌新闻</a>”来抓取新闻标题。函数<strong class="lb iu"> request.get(url) </strong>向使用<strong class="lb iu"> BeautifulSoup(page.text，' lxml') </strong>提取完整 HTML 代码的 url 发送 get 请求</p><p id="ab60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦提取了代码，我们将检查代码以找到最新新闻的标题。</p><p id="1fe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些标题出现在 h3 标记的 href 属性中，具有如下所示的类“ipQwMb ekueJc RD0gLb”。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="e575" class="no lw it nk b gy np nq l nr ns">&lt;h3 class="ipQwMb ekueJc RD0gLb"&gt;&lt;a href="./articles/CAIiEA0DEuHOMc9oauy44TAAZmAqFggEKg4IACoGCAoww7k_MMevCDDW4AE?hl=en-IN&amp;amp;gl=IN&amp;amp;ceid=IN%3Aen" class="DY5T1d"&gt;Rhea Chakraborty arrest: Kubbra Sait reminds ‘still not a murderer’, Rhea Kapoor says ‘we settled on...&lt;/a&gt;&lt;/h3&gt;</span></pre><p id="f019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先找到所有具有类“ipQwMb ekueJc RD0gLb”的 h3 元素。然后，我们遍历每个元素以获取 href 属性中的文本(新闻标题)。</p><p id="49a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">案例四:如果用户想知道任意单词的<strong class="lb iu">含义</strong>，可以问助手<em class="nu">“嘿！刮是什么意思？”</em></p><p id="4efe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于音频中出现了单词<em class="nu">，意思是</em>，函数 scrape_meaning(单词[-1])将被调用，参数为<em class="nu">“scraping”</em></p><p id="7e85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个函数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="c0bd" class="no lw it nk b gy np nq l nr ns">def scrape_meaning(audio):<br/>    word = audio<br/>    url = '<a class="ae ky" href="https://www.dictionary.com/browse/'" rel="noopener ugc nofollow" target="_blank">https://www.dictionary.com/browse/'</a> + word<br/>    page = requests.get(url)<br/>    soup = BeautifulSoup(page.content, 'html.parser')<br/>    soup<br/>    meanings = soup.findAll('div', attrs =  {'class': 'css-1o58fj8 e1hk9ate4'})<br/>    meaning = [x.text for x in meanings]<br/>    first_meaning = meaning[0]<br/>    for x in meaning:<br/>        print(x)<br/>        print('\n')<br/>    engine.say(first_meaning)<br/>    engine.runAndWait()</span></pre><p id="0edf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用网站“<a class="ae ky" href="https://www.dictionary.com/browse/" rel="noopener ugc nofollow" target="_blank"><em class="nu">”</em></a><em class="nu">”</em>来刮取意思。函数<strong class="lb iu"> request.get(url) </strong>向使用<strong class="lb iu"> BeautifulSoup(page.text，' lxml') </strong>提取完整 HTML 代码的 url 发送 get 请求</p><p id="946a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦提取了代码，我们将检查代码，找到所有包含作为参数传递的单词含义的 html 标签。</p><p id="3fbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些值存在于具有类“css-1o58fj8 e1hk9ate4”的 div 中，如下所示。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="72dd" class="no lw it nk b gy np nq l nr ns">&lt;div value="1" class="css-kg6o37 e1q3nk1v3"&gt;&lt;span class="one-click-content css-1p89gle e1q3nk1v4" data-term="that" data-linkid="nn1ov4"&gt;the act of a person or thing that &lt;a href="/browse/scrape" class="luna-xref" data-linkid="nn1ov4"&gt;scrapes&lt;/a&gt;. &lt;/span&gt;&lt;/div&gt;</span></pre><p id="71c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先找到所有具有类“css-1o58fj8 e1hk9ate4”的 div 元素。然后，我们遍历每个元素以获取 div 中的文本(单词的含义)。</p><p id="e339" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">情况 5:如果用户想让助手<strong class="lb iu">做笔记，</strong>他/她可以问助手<em class="nu">“嘿！你能帮我记笔记吗？”</em></p><p id="cae5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于单词<em class="nu">“做笔记”</em>出现在音频中，将调用函数 take_notes() <em class="nu"> </em>。</p><p id="070d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个函数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="537d" class="no lw it nk b gy np nq l nr ns">def take_notes():</span><span id="1de6" class="no lw it nk b gy nt nq l nr ns">r5 = sr.Recognizer()  <br/>    with sr.Microphone() as source:<br/>        print('What is your "TO DO LIST" for today')<br/>        engine.say('What is your "TO DO LIST" for today')<br/>        engine.runAndWait()<br/>        audio = r5.listen(source)<br/>        audio = r5.recognize_google(audio)<br/>        print(audio)<br/>        today = date.today()<br/>        today = str(today)<br/>        with open('MyNotes.txt','a') as f:<br/>            f.write('\n')<br/>            f.write(today)<br/>            f.write('\n')<br/>            f.write(audio)<br/>            f.write('\n')<br/>            f.write('......')<br/>            f.write('\n')<br/>            f.close() <br/>        engine.say('Notes Taken')<br/>        engine.runAndWait()</span></pre><p id="0e45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先初始化识别器，向用户询问他们的“任务清单”。然后我们听用户说话，并使用<em class="nu"> recognize_google 来识别音频。现在我们将打开一个名为“MyNotes.txt”的记事本，记下用户给出的笔记和日期。</em></p><p id="6266" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将创建另一个名为 show_notes()的函数，它将从名为“MyNotes.txt”的记事本中读出今天的笔记/待办事项列表。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="32c4" class="no lw it nk b gy np nq l nr ns">def show_notes():<br/>    with open('MyNotes.txt', 'r') as f:<br/>        task = f.read()<br/>        task = task.split('......')<br/>    engine.say(task[-2])<br/>    engine.runAndWait()<br/>    </span></pre><p id="1bbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">案例六:如果用户想<strong class="lb iu">播放 YouTube 视频，</strong>他/她可以问助手<em class="nu">“嘿！能不能玩催眠？”</em></p><p id="5cb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于音频中出现了单词<em class="nu">“play”</em>，因此将调用函数 play _ YouTube(words[-1])<em class="nu"/>，并传递“催眠”作为参数。</p><p id="7fab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这个函数。</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="4514" class="no lw it nk b gy np nq l nr ns">def play_youtube(audio):</span><span id="579d" class="no lw it nk b gy nt nq l nr ns">url = '<a class="ae ky" href="https://www.google.com/search?q=youtube+'" rel="noopener ugc nofollow" target="_blank">https://www.google.com/search?q=youtube+'</a> + audio<br/>    headers = {<br/>    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36'<br/>    }<br/>    engine.say('Playing')<br/>    engine.say(audio)<br/>    engine.runAndWait()<br/>    page = requests.get(url, headers=headers)<br/>    soup = BeautifulSoup(page.content, 'html.parser')<br/>    link = soup.findAll('div', attrs = {'class':'r'})<br/>    link = link[0]<br/>    link = link.find('a')<br/>    link = str(link)<br/>    link = link.split('"')<br/>    link = link[1]</span><span id="1364" class="no lw it nk b gy nt nq l nr ns">webbrowser.open(link)</span></pre><p id="b245" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用 G <a class="ae ky" href="https://www.google.com/search?q=youtube+" rel="noopener ugc nofollow" target="_blank"> oogle Videos </a>来搜索视频标题，并打开第一个链接来播放 YouTube 视频，该视频出现在具有类“r”的 div 元素中。</p><p id="cf50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">情况 7:如果用户想要<strong class="lb iu">搜索位置，</strong>他/她可以问助手<em class="nu">“嘿！IIT 孟买在哪里？”</em></p><p id="27d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于单词<em class="nu">“where is”</em>出现在音频中，下面的代码将被执行。</p><p id="f16a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(这段代码出现在主函数的 if-else 循环中)</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="9f55" class="no lw it nk b gy np nq l nr ns">elif 'where is' in audio:<br/>        print('..')<br/>        words = audio.split('where is')<br/>        print(words[-1])<br/>        link = str(words[-1])<br/>        link = re.sub(' ', '', link)<br/>        engine.say('Locating')<br/>        engine.say(link)<br/>        engine.runAndWait()<br/>        link = f'<a class="ae ky" href="https://www.google.co.in/maps/place/{link}'" rel="noopener ugc nofollow" target="_blank">https://www.google.co.in/maps/place/{link}'</a><br/>        print(link)<br/>        webbrowser.open(link)</span></pre><p id="fdd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将加入谷歌地图链接用户提供的位置，并使用 webbrowser.open(链接)打开链接定位'<em class="nu"> IIT 孟买'。</em></p><p id="6897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">案例 8:如果用户想<strong class="lb iu">打开一个网站，</strong>他/她可以问助手<em class="nu">嘿！能不能向数据科学开放？”</em></p><p id="bede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于单词<em class="nu">“打开”</em>出现在音频中，下面的代码将被执行。</p><p id="7456" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(这段代码出现在主函数的 if-else 循环中)</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="1995" class="no lw it nk b gy np nq l nr ns">elif 'open' in audio:<br/>        print('..')<br/>        words = audio.split('open')<br/>        print(words[-1])<br/>        link = str(words[-1])<br/>        link = re.sub(' ', '', link)<br/>        engine.say('Opening')<br/>        engine.say(link)<br/>        engine.runAndWait()<br/>        link = f'<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/{link}.com'">https://{link}.com'</a><br/>        print(link)<br/>        webbrowser.open(link)</span></pre><p id="47d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将把用户提供的网站名称与任何 URL 的标准格式连接起来，即<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/{link}.com'">https://{网站名称}。com </a>打开网站。</p><p id="2237" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们如何创建一个简单的语音助手。您可以修改代码以添加更多功能，如执行基本的数学计算、讲笑话、创建提醒、更改桌面壁纸等。</p><p id="830c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在下面链接的我的 GitHub 资源库中找到完整的代码。</p><div class="nv nw gp gr nx ny"><a href="https://github.com/sakshibutala/VoiceAssistant" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">sakshibutala/语音助手</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">在这个笔记本中，我建立了一个语音助手，可以回答基本的询问。“VoiceAssistant.ipynb”包含…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">github.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om ks ny"/></div></div></a></div><h1 id="8764" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">参考文献</strong></h1><div class="nv nw gp gr nx ny"><a href="https://www.parsehub.com/blog/what-is-web-scraping/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">什么是网页抓取，它是用来做什么的？ParseHub</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">一些网站可能包含大量宝贵的数据。股票价格，产品详情，体育统计，公司…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">www.parsehub.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om ks ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a href="https://www.edureka.co/blog/web-scraping-with-python/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">使用 Python 进行 Web 抓取-初学者指南| Edureka</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">使用 Python 进行 Web 抓取想象一下，您必须从网站中提取大量数据，并且您希望尽可能快地完成这些工作…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">www.edureka.co</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om ks ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a href="https://onlim.com/en/what-are-voice-assistants-and-how-do-they-work/" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">什么是语音助手，它们是如何工作的？Onlim</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">科幻电影中的场景，我们回到家，开始对着我们的个人家用电脑说话…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">onlim.com</p></div></div><div class="oh l"><div class="op l oj ok ol oh om ks ny"/></div></div></a></div></div></div>    
</body>
</html>