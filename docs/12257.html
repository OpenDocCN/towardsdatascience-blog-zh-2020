<html>
<head>
<title>How to Efficiently Remove Punctuations from a String</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何有效地从字符串中删除标点符号</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-efficiently-remove-punctuations-from-a-string-899ad4a059fb?source=collection_archive---------12-----------------------#2020-08-24">https://towardsdatascience.com/how-to-efficiently-remove-punctuations-from-a-string-899ad4a059fb?source=collection_archive---------12-----------------------#2020-08-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="db5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python 中清理字符串的 8 种不同方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8bd2268d433099036dd83af32ff6f3f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hxTXTXqn3kMldpkS"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@muratodr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Murat Onder </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="6d54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近，我发现自己花了很多时间试图弄懂杂乱的文本数据，并决定回顾一些相关的预处理。有许多不同的方法来实现简单的清洁步骤。今天，我将回顾几种不同的方法来删除字符串中的标点符号，并比较它们的性能。</p><h1 id="45f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用翻译</h1><p id="5a44" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">string <strong class="lb iu"> translate </strong>方法是一次性将多个字符更改为不同值的便捷方法。<strong class="lb iu"> Translate </strong>需要一个表作为字典来映射字符串。maketrans 为您完成这项工作。</p><p id="4cd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> maketrans </strong>语法的工作方式类似于<code class="fe ms mt mu mv b">str.maketrans('abcd', '0123', 'xyz')</code>。它将创建一个表格，告诉<strong class="lb iu"> translate </strong>将所有<em class="mw"> a </em>更改为 0，<em class="mw"> b </em>更改为 1，<em class="mw"> c </em>更改为 2，以此类推。，并移除<em class="mw"> x、</em>y、<em class="mw"> z、</em></p><p id="0178" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu">翻译</strong>删除标点符号和数字的完整语法如下。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="fb82" class="nb lw it mv b gy nc nd l ne nf"># importing a string of punctuation and digits to remove<br/><strong class="mv iu">import </strong>string<br/>exclist = <strong class="mv iu">string</strong>.punctuation + <strong class="mv iu">string</strong>.digits</span><span id="2cf5" class="nb lw it mv b gy ng nd l ne nf"># remove punctuations and digits from oldtext<br/>table_ = <strong class="mv iu">str.maketrans</strong>('', '', exclist)<br/>newtext = oldtext.translate(table_)</span></pre><p id="5277" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法将完全删除字符串<strong class="lb iu">中的任何字符。标点符号</strong>和<strong class="lb iu"> </strong>字符串<strong class="lb iu"> .digits. </strong>包括<em class="mw">！" #$% &amp; \'()*+，-。/:;&lt; = &gt;？@[\\]^_`{|}~' </em>和所有数字。</p><h1 id="d8c8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用翻译+连接</h1><p id="ceef" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">但有时，我们可能希望添加一个空格来代替这些特殊字符，而不是完全删除它们。我们可以通过告诉一个表将特殊字符改为空格而不是排除它们来做到这一点。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="2227" class="nb lw it mv b gy nc nd l ne nf">table_ = <strong class="mv iu">str.maketrans</strong>(exclist, ' '*len(exclist))</span></pre><p id="2451" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以简单地用<strong class="lb iu">分割</strong>和<strong class="lb iu">连接</strong>来确保这个操作不会导致单词之间出现多个空格。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="c6af" class="nb lw it mv b gy nc nd l ne nf">newtext = ' '.<strong class="mv iu">join</strong>(oldtext.<strong class="mv iu">translate</strong>(table_).<strong class="mv iu">split</strong>())</span></pre><h1 id="1346" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用连接+字符串</h1><p id="9e0c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们也可以只使用<strong class="lb iu"> join </strong>而不是<strong class="lb iu"> translate，</strong>从我们上面制作的字符串包中取出相同的排除列表。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="e77c" class="nb lw it mv b gy nc nd l ne nf"># using exclist from above<br/>newtext = ''.<strong class="mv iu">join</strong>(x <strong class="mv iu">for</strong> x <strong class="mv iu">in</strong> oldtext <strong class="mv iu">if</strong> x <strong class="mv iu">not in</strong> exclist)</span></pre><h1 id="a197" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用 Join + isalpha</h1><p id="4ef2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们可以放弃排除列表，只使用字符串方法来调用字母。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="574d" class="nb lw it mv b gy nc nd l ne nf">newtext = ''.<strong class="mv iu">join</strong>(x <strong class="mv iu">for</strong> x <strong class="mv iu">in</strong> oldtext <strong class="mv iu">if</strong> x.<strong class="mv iu">isalpha</strong>())</span></pre><p id="8732" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法只会保留字母表。因此，它还会消除单词之间的空格。</p><h1 id="379c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用联接+过滤器</h1><p id="33a1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">代替列表理解，我们可以使用<strong class="lb iu">过滤器</strong>做同样的事情。这比使用列表理解稍微更有效，但是以相同的方式输出新的文本。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="48a8" class="nb lw it mv b gy nc nd l ne nf">newtext = ''.<strong class="mv iu">join</strong>(<strong class="mv iu">filter</strong>(str.<strong class="mv iu">isalpha</strong>, oldtext))</span></pre><h1 id="ccfb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用替换</h1><p id="5134" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">另一种删除标点符号(或任何选定字符)的方法是遍历每个特殊字符，一次删除一个。我们可以通过使用<strong class="lb iu">替换</strong>的方法来做到这一点。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="bbbb" class="nb lw it mv b gy nc nd l ne nf"># using exclist from above<br/><strong class="mv iu">for</strong> s <strong class="mv iu">in</strong> exclist:<br/>     text = text.<strong class="mv iu">replace</strong>(s, '')</span></pre><h1 id="3136" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用正则表达式</h1><p id="cff8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">根据确切的目标，使用 regex 有许多方法可以完成类似的事情。一种方法是用空格替换不是字母的字符。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="cba9" class="nb lw it mv b gy nc nd l ne nf"><strong class="mv iu">import</strong> re<br/>newtext = re.<strong class="mv iu">sub</strong>(r'[^A-Za-z]+', ' ', oldtext)</span></pre><p id="8ec8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">【^a-za-z]+】</strong>选择符合方括号(<strong class="lb iu"> [] </strong>)内规则的任意字符，即<strong class="lb iu"> </strong>而非<strong class="lb iu"> </strong> ( <strong class="lb iu"> ^ </strong>)在大写字母(<strong class="lb iu"> A-Z </strong>)或小写字母(<strong class="lb iu"> a-z </strong>)中至少有一个字母(<strong class="lb iu"> + </strong>)。然后 regex <strong class="lb iu"> sub </strong>用空格替换旧文本中的这些字符。</p><p id="b96c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种方法是使用元字符<strong class="lb iu"> \W. </strong>选择所有非单词。该元字符不包括下划线(-)和数字。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="d329" class="nb lw it mv b gy nc nd l ne nf">newtext = re.<strong class="mv iu">sub</strong>(r'\W+', ' ', oldtext)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/c78fa8eb4d74ee827742d3bf9c5b1218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sRdRz3HoSLAWb3OX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@gcalebjones?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯勒·琼斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="2be9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">表演</h1><p id="64aa" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们回顾了一些方法，但是哪一个是最好的呢？我使用了<a class="ae ky" href="https://docs.python.org/2/library/timeit.html" rel="noopener ugc nofollow" target="_blank"> timeit </a>模块来测量每种方法处理大约 1kb 的字符串数据 10000 次需要多长时间。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="3557" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试表明，与其他方法相比，使用翻译花费的时间要少得多！另一方面，在列表理解中使用<strong class="lb iu">连接</strong>似乎是清理选择字符最低效的方式。<strong class="lb iu"> Translate </strong>是当今所有评测中最通用、最快速的选项。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="1752" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有任何其他方法，请留下评论，我会将测试结果添加到帖子中！</p></div></div>    
</body>
</html>