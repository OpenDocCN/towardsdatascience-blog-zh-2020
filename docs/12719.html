<html>
<head>
<title>Different ways of Importing Data into R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将数据导入 R 的不同方式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/different-ways-of-importing-data-into-r-2d234e8e0dec?source=collection_archive---------32-----------------------#2020-09-01">https://towardsdatascience.com/different-ways-of-importing-data-into-r-2d234e8e0dec?source=collection_archive---------32-----------------------#2020-09-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="32ad" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在 R 中处理不同类型的数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6073a6c2a1de164859adc56418d91e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NPR2IabfrEQ2HPpT"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e13b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在 DataCamp 完成了两门课程，这两门课程向我介绍了将数据导入 r 的概念。我想详细讨论一下我在课程中学到的一些方法。让我们开始吧。</p><p id="699b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可以来自许多来源。一些最常见的是</p><ul class=""><li id="e689" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">平面文件— CSV、txt、tsv 等</li><li id="8f18" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">来自 Excel 的数据</li><li id="ba0b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">数据库— Postgresql、Mysql 等</li><li id="0c70" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">网</li><li id="c24f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">统计软件——SAS、SPSS、STATA</li></ul><h1 id="7485" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">平面文件</h1><p id="4181" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">什么是平面文件？</p><p id="99d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据维基百科,<strong class="lb iu">平面文件数据库</strong>是存储在一个名为<strong class="lb iu">平面文件</strong>的文件中的数据库。记录遵循统一的格式，并且没有用于索引或识别记录之间关系的结构。文件很简单。平面文件可以是纯文本文件或二进制文件。</p><p id="f37b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面列出的一些包将帮助您在 r 中处理平面文件。</p><p id="8dc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">实用工具</strong></p><p id="3b84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，当您加载 r。</p><ul class=""><li id="b1c6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read.table()</code>:主功能。读取表格格式的文件并从中创建数据框。它提供了许多参数来对输入的数据进行分类。</li><li id="be7c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read.csv()</code>:read . table()的包装函数。用于读取逗号分隔(CSV)文件。</li><li id="9f1d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read.delim()</code>:用于读取制表符分隔文件的包装函数。如果文件中的数字使用句点(。)作为小数。</li><li id="e083" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read.csv2()</code> : read.csv()和 read.csv2()是相同的。唯一的区别是，它们是根据您在数字中使用句点还是逗号作为小数点来设置的。</li><li id="6de6" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read.delim2()</code>:当文件中的数字使用逗号(，)作为小数时，使用 read.delim2。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/114ed96196953e86a0a2e9124347d12b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*0oZipWKLi4lK9b3gkeGxmQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> read.csv() </strong>功能的输出</p></figure><p id="d866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">专业包</strong></p><p id="42e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> readr </strong></p><p id="33b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包让我们的生活更轻松。它比 utils 包更快、更方便、更高效。我总是倾向于使用这个。</p><p id="b353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">read_r 支持七种文件格式，具有七种功能:</p><ul class=""><li id="4bb8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_delim.html" rel="noopener ugc nofollow" target="_blank">read_csv()</a></code>:逗号分隔(CSV)文件</li><li id="6f0a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_delim.html" rel="noopener ugc nofollow" target="_blank">read_tsv()</a></code>:制表符分隔的文件</li><li id="f750" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_delim.html" rel="noopener ugc nofollow" target="_blank">read_delim()</a></code>:通用分隔文件</li><li id="749a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_fwf.html" rel="noopener ugc nofollow" target="_blank">read_fwf()</a></code>:定宽文件</li><li id="d333" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_table.html" rel="noopener ugc nofollow" target="_blank">read_table()</a></code>:表格文件，其中各列由空格分隔。</li><li id="ce53" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><a class="ae ky" href="https://readr.tidyverse.org/reference/read_log.html" rel="noopener ugc nofollow" target="_blank">read_log()</a></code>:网络日志文件</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/7a42e53105e3969dd3acc1be601a1021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*aR9dcxxdyWcFwiBHWyUgkA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> read_csv() </strong>功能的输出</p></figure><p id="161e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Tibbles 的 readr 包工作。根据文档，Tibbles <em class="nm">是</em>数据帧，但是它们调整了一些旧的行为以使生活变得更简单。打印输出还显示了 read.csv 输出中缺少的列类。</p><p id="d1c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">数据表</strong></p><p id="0a18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作者 Matt Dowle &amp; Arun Srinivasan 的 data.table 的关键指标是速度。这个包主要是关于数据操作的，但是它还有一个非常强大的功能，可以将数据读入 R: fread()。</p><p id="f297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有很大的文件要导入到 R 中，你可以使用 data.table 包。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b562de342794b98fc50b8178bc5f5ddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*chzNf_sIoyKy0W6kL7sSsQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> fread() </strong>功能的输出</p></figure><p id="844f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Fread()可以自动处理名称。它还可以推断列类型和字段分隔符，而不必指定这些。它是 read.table()的改进版本，速度非常快，更加方便，并增加了更多功能。</p><h1 id="7a81" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">擅长</h1><p id="c1f4" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">数据分析中最常用的工具是 Microsoft Excel。excel 文件的典型结构包含带有表格数据的不同工作表。</p><p id="ba9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要浏览这些文件，然后从中导入一些数据。r 提供了两个函数来处理这个问题。</p><ul class=""><li id="60da" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><strong class="lb iu">excel_sheets()</strong></code> <strong class="lb iu"> : </strong>探索不同的工作表</li></ul><p id="ad2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是一个简单的字符向量，它返回 excel 文件中工作表的名称。</p><ul class=""><li id="33fa" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><strong class="lb iu">read_excel()</strong></code>:将数据导入 R</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/717970b5b75321626f3a9178adf0e759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UGMbjiLJ2lctcm9wE8HWkA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">read_excel()函数的输出</p></figure><p id="bdaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，第一个工作表作为 tibble 导入。我们可以通过使用索引或设置工作表参数来显式指定要导入的工作表。下面的两个调用做同样的工作。</p><p id="3f8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，手动加载每一个工作表，然后将它们合并到一个列表中会非常繁琐。幸运的是，您可以使用<code class="fe ng nh ni nj b"><a class="ae ky" href="http://www.rdocumentation.org/packages/base/functions/lapply" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">lapply()</strong></a></code> <strong class="lb iu"> </strong>来自动执行这个操作。这个函数返回一个相同长度的列表。</p><p id="30ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> XL 连接</strong></p><p id="067d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由马丁·斯图德开发。它充当了 R 和 Excel 之间的桥梁。它允许用户执行任何活动，如编辑工作表、格式化数据等。在 R 内部的 Excel 上，它可以处理 XLS 和 XLSX 文件。XLConnect 工作在 Java 之上。确保您已经安装了所有的依赖项，如 Java 开发工具包(JDK ),并在 r</p><p id="478f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在使用软件包之前安装它，下面的命令将为您完成这项工作:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/e7c659a0363cdf5f3b783487d4a13c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*j0SLEb5b4zk9-nGX1uGQkg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">将<strong class="bd nl"> XLConnect </strong>载入工作区</p></figure><p id="0093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ng nh ni nj b"><strong class="lb iu">loadWorkbook()</strong></code>:该函数将一个 Microsoft Excel 文件加载到 R 中，可以对其进行进一步操作。将<strong class="lb iu"> create </strong>参数设置为<strong class="lb iu"> True </strong>将确保在文件尚不存在时创建该文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/5fd50e9d493396a60a79ba790152642c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*wHD72urUqIwaux3KjgQ6Sg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> loadWorkbook() </strong>函数的结构</p></figure><p id="7c90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个对象实际上是 R 和 Excel 之间的桥梁。在 R 中构建工作簿后，您可以使用它来获取它所链接的 Excel 文件的信息。一些基本功能是</p><ul class=""><li id="4edf" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu"> get_Sheets() </strong>:蒂耶函数从 excel 文件中以列表形式返回工作表。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/cbcddd9d9726298be16068418d95c232.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*zNxxHecQ0kz7ecGfUwS0XA.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> getSheets() </strong>的输出</p></figure><ul class=""><li id="7971" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu"> readWorksheet() </strong>:允许用户从指定的工作表中读取数据，只需在函数的工作表参数中给出工作表的名称。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/009f799d4468e795aae1df18f827bec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*7gQ-K_8o0n3eAWcRn0Mw5w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> readWorksheet() </strong>的输出</p></figure><p id="b9cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个函数最好的部分是你可以指定从哪一行和哪一列开始读取信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c35ef791ed92ff7ec6e32d83bdeadec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*f6CH2dJlRTQtmK0b7x6aJQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd nl"> readWorksheet() </strong>的输出</p></figure><p id="3a64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PS:在对数据集执行任何操作之前，确保数据集被导入到工作目录中。</p><h1 id="fb90" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">关系数据库</h1><p id="49cf" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">关系数据库是数据项之间具有预定义关系的集合。这些项目被组织成一组具有列和行的表格。表用于保存关于要在数据库中表示的对象的信息。</p><p id="34fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">开源</strong> : MySQL，PostgreSQL，SQLite</p><p id="9cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">专有</strong> : Oracle 数据库，微软 SQL Server</p><p id="5bc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据您想要连接的数据库类型，您必须在 r 中使用不同的包。</p><p id="1502" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">MySQL: RMySQL</p><p id="e5a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PostgreSQL: RPostgreSQL</p><p id="48a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Oracle 数据库:ROracle</p><p id="d9c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DBI 为 R 和关系数据库管理系统之间的通信定义了一个接口。这个包中的所有类都是虚拟的，需要通过各种 R/DBMS 实现来扩展。</p><p id="7e00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用更专业的术语来说，DBI 是一个接口，RMySQL 是实现。</p><p id="b754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像往常一样，让我们先安装包并导入库 DBI。安装 RMySQL 将自动安装 DBI。</p><p id="031e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步是创建到远程 MySQL 数据库的连接。你可以这样做</p><p id="aec1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经连接到数据库，可以访问其中的内容了。以下函数帮助我们读取、列出、查询和执行数据库上的其他操作。</p><ul class=""><li id="e2ff" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu"> dbListTables </strong>:这个函数让用户列出数据库中的表格。这个函数需要连接对象作为输入，并输出一个带有表名的字符向量。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/a4d0a976eea47940b504c7eb74e15853.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*tewW4NoYCPSwVayIrz0EcA.png"/></div></figure><ul class=""><li id="8641" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu"> dbReadTable </strong>:读取所需的表格，并将结果显示为数据帧。</li></ul><p id="cacf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">选择性导入</strong></p><p id="3306" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用两种方法做到这一点</p><ul class=""><li id="9b33" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">读取整个表并使用 subsetting 函数对数据进行子集化。</li><li id="b401" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe ng nh ni nj b"><strong class="lb iu">dbGetQuery()</strong></code>:这个函数发送一个查询，检索结果，然后清除结果集。这里的字符串是一个常见的 SQL 查询。</li><li id="90dc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">dbFetch() :这个函数有助于从以前执行的查询中获取记录，并允许我们指定每次获取的最大记录数。</li></ul><p id="845c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:dbSendQuery() </strong>将查询发送到数据库，要获取它，我们应该使用 dbFetch()。它的工作与 dbGetQuery()相同。当您想要逐块加载大量记录时，这可能会很有用。</p><p id="4f44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不要忘记断开它。</p><h1 id="881c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">网</h1><p id="df79" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">从互联网上下载文件意味着发送一个 GET 请求并接收你所请求的文件。</p><p id="f6d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">读取 CSV、TSV 或文本文件时，我们可以在函数中以如下方式将 URL 指定为字符串。</p><p id="e220" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Excel 文件</strong></p><p id="9d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">r 不知道如何处理直接来自网络的 excel 文件，所以我们需要在导入之前下载它。文件下载后，我们可以使用<code class="fe ng nh ni nj b">read_excel</code>功能读取和导入文件。</p><p id="0ed2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> JSON 数据</strong></p><p id="a6b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript Object Notation (JSON)是一种非常简单、简洁且结构良好的数据形式。此外，它是人类可读的，也很容易为机器解释和生成。这就是为什么 JSON 被用于与 API(应用程序编程接口)通信。</p><p id="1dae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> jsonlite 包</strong></p><p id="15f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它是一个健壮的、高性能的 JSON 解析器和生成器。</p><p id="4dc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们先安装软件包。成功安装后，我们将使用<code class="fe ng nh ni nj b">fromJSON</code>函数从 URL 获取数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a79523142b92323d2ed115f7bb180ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*ns31ZbZVASwux3FGGQOvlQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含 JSON 数据的 r 列表</p></figure><p id="1e24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">软件包的另一个有趣的功能是美化和缩小。它们主要用于格式化 JSON 数据。</p><ul class=""><li id="ccd0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">美化/缩小</strong>:美化给 JSON 字符串增加缩进；minify 删除所有缩进/空白。</li></ul><h1 id="d5fc" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">统计软件包</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/cbb5076e82869b2bd339882eaedc663b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3303FtajnHxPzi_14gcRaw.png"/></div></div></figure><ul class=""><li id="1fce" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">避风港</strong></li></ul><p id="2f28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包用来读取 SAS，STATA，SPSS 数据文件。它通过包装 Evan Miller 的 ReadStat C 库来实现这一点。这个软件包使用起来非常简单。</p><p id="1b80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们先安装包并加载库。</p><ul class=""><li id="cb0c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe ng nh ni nj b">read_sas</code>:该函数读取 SAS 文件。</li></ul><p id="1569" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，对于其他类型的文件，我们可以使用<code class="fe ng nh ni nj b">read_stata()</code>、<code class="fe ng nh ni nj b">read_dta()</code>、<code class="fe ng nh ni nj b">read_por()</code>和<code class="fe ng nh ni nj b">read_sav()</code>。</p><ul class=""><li id="e81d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">国外</strong></li></ul><p id="e54e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由 R 核心团队编写。它在命名和使用上不太一致，但它支持许多外来数据格式，如 Systat、Weka 等。我们还可以将数据导出为各种格式。</p><p id="8c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们安装软件包并加载库。</p><p id="375d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> SAS </strong></p><p id="df48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包的缺点是<strong class="lb iu">不能导入. sas7bdat </strong>。它只能导入 SAS 库(。xport)</p><p id="2b5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> STATA </strong></p><p id="0f93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个包裹可以阅读。STATA 版本 5 到 12 的 dta 文件。</p><p id="573f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> convert.factors </strong>:将带标签的 STATA 值转换为 R 因子。</p><p id="c106" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> convert.dates </strong>:将 STATA 日期和时间转换为 Date 和 POSIXct。</p><p id="4599" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">缺失类型</strong>:</p><p id="4645" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果为 FALSE，则将所有类型的缺失值转换为 NA。</p><p id="82b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果为真，存储属性中值是如何丢失的。</p><p id="6d50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> SPSS </strong></p><p id="46e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> use.value.labels </strong>:将带标签的 STATA 值转换为 R 因子。</p><p id="7214" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> to.data.frame </strong>:返回 dataframe 而不是 list。</p><h1 id="9fcb" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="cf75" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">这是关于将基本数据导入 r 的。加载数据是任何过程的第一步，比如分析、可视化和操作。</p><p id="bbc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多方法可以将数据导入 r。</p><p id="b098" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我主要使用 read_excel 和 read_csv。</p><p id="1f25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你用什么？评论下来。</p><p id="828c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>