<html>
<head>
<title>Analysing Pharmaceutical Sales Data in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 分析药品销售数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysing-pharmaceutical-sales-data-in-python-6ce74da818ab?source=collection_archive---------23-----------------------#2020-09-06">https://towardsdatascience.com/analysing-pharmaceutical-sales-data-in-python-6ce74da818ab?source=collection_archive---------23-----------------------#2020-09-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6eb6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 Python、Pandas、Matplotlib 和回归模型分析药品销售数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/60076075aa3ca3ac5199720a9cc7451d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X8QgupiDcyZWNUzp"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="3d56" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="522a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个项目的目的是分析药品销售数据。分析销售数据并根据历史数据预测未来销售是一项非常常见的数据科学任务。这是开始研究数据科学的好方法。</p><h1 id="3b73" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">你会学到什么？</h1><p id="9908" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本项目中，您将学习将数据集从文本文件加载到 Pandas，这是最流行的数据操作和数据分析 Python 库，并在不同的销售数据集中查找特定信息，如特定药物最常何时销售。除此之外，我们还将根据现有数据，使用线性回归、多项式回归和简单向量回归来预测未来的销售额。我们将做一些数据预处理和标准化。为了获得更好的结果，我们还将学习一种重要而有用的数据科学技术——集成学习。</p><p id="f477" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您还将学习如何使用 Matplotlib 测试模型和绘制结果。</p><p id="7c58" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们开始吧。</p><h1 id="d8a7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">问题定义</h1><p id="79e1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">以下是我们将在本练习中回答的具体问题:</p><ol class=""><li id="25da" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">第二种药物(M01AE)最常在一周的哪一天售出？</li><li id="067a" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">2015 年 1 月，2016 年 7 月，2017 年 9 月哪三种药销量最高？</li><li id="4d8c" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">2017 年周一哪种药卖得最多？</li><li id="d0da" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">2020 年 1 月可能有哪些药品销售？(我们的数据集仅包含 2014 年 1 月至 2019 年 10 月的销售信息)</li></ol><h1 id="3d1b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">逐步解决方案</h1><h2 id="a389" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">创建项目文件夹</strong></h2><p id="cd61" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在电脑上为一个名为“分析-制药-销售-数据”的项目创建一个文件夹</p><h2 id="9704" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">从这个 Kaggle 项目下载数据集:</strong></h2><p id="3f8f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://www.kaggle.com/milanzdravkovic/pharma-sales-data" rel="noopener ugc nofollow" target="_blank">https://www.kaggle.com/milanzdravkovic/pharma-sales-data</a></p><p id="b5f3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将这些数据集放在项目文件夹中名为“data”的文件夹中。</p><blockquote class="ns nt nu"><p id="7763" class="lr ls nv lt b lu mn ju lw lx mo jx lz nw mp mc md nx mq mg mh ny mr mk ml mm im bi translated">如果你从未在电脑上使用过 Python 或 Jupyter Notebook，请阅读我的文章<a class="ae ky" href="https://medium.com/@pjarz/how-to-set-up-your-computer-for-data-science-9b880118ead" rel="noopener">如何为数据科学设置你的电脑</a>以检查你是否拥有在电脑上运行以下分析所需的一切。</p></blockquote><h2 id="4549" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">开始新的笔记本</strong></h2><p id="10f1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在终端/命令提示符下键入命令，启动 Jupyter Notebook:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="ddbf" class="ng la it oa b gy oe of l og oh">$ jupyter notebook</span></pre><p id="42db" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">点击右上角的新建，选择 Python 3。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/b7402a8c566d96d631df86df44e61cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q7vMPYoFRRb5sUHB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="0f0e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这将在您的浏览器中打开一个新的 Jupyter 笔记本。将未命名的项目名称重命名为您的项目名称，您就可以开始了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/31a24a471769de8a1bb6b1490f0f908c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Rr9QMH4VbW-EOpY"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="be43" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您的计算机上安装了 Anaconda，那么您的计算机上已经安装了这个项目所需的所有库。</p><p id="0884" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你用的是 Google Colab，打开一个新的笔记本。</p><h2 id="8495" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">加载库和设置</strong></h2><p id="6e89" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在新笔记本中，我们通常做的第一件事是添加我们在项目中需要使用的不同库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="e97f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们准备解决我们的第一个问题。</p><h1 id="6e7f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">第二种药物(M01AE)最常于一周的哪一天售出？</strong></h1><p id="2f70" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一旦我们加载了所有的库，通常我们下一步要做的就是加载数据集。因为我们需要找出一周中的哪一天是第二种最常销售的药物，所以我们需要加载每日数据。我们正在加载此数据集，以便进一步探索熊猫数据框。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="293b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是我们数据的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c4ceb698c18dbaac20ce27684932a557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EpYbr4zOoiy6nGuM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="e9da" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这将显示数据集中的前几行，这样我们就可以看到数据的结构和内容。</p><p id="edb5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了找出第二种药物(M01AE)在一周中的哪一天最常被卖出，我们需要将所有结果相加</p><p id="3ac0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为 Python Pandas 非常强大，我们可以使用一行代码来完成这些事情中的大部分。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="6248" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的命令将按工作日名称对所有销售额求和，然后进行排序，因此药品销售最多的那一天将出现在第一行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/d0a9ce21d2234557069a2b4037316765.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/0*b1Ls9Qq8bTOsbvNd"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="568b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们只需要从第一行中获取工作日的名称和值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="26c1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们现在需要做的就是打印结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="cc4a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您正确完成了任务，屏幕上的结果应该是这样的。</p><p id="d6c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="nv">第二种药物 M01AE 在周日的销量最高，为 1384.94 英镑</em></p><p id="297f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们鼓励您也找出其他药物在一周中的哪一天最常出售。</p><p id="9de3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们来看第二个问题。</p><h1 id="b1a5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">【2015 年 1 月、2016 年 7 月、2017 年 9 月哪三种药销量最高</h1><p id="4ed9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于这个任务，我们需要将每月的销售数据加载到 Pandas 数据框架中，让我们看看我们的数据是什么样子的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/0530fe3295cf15615f88acdc079edc9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1a7aG3sZUudHS9Q4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="d8b3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为我们将对不同的年份和月份重复计算，所以最好定义一个将月份和年份作为参数的函数。</p><p id="1013" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该函数将如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="de1c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦定义了函数，我们就可以对一个月和一年的不同整数值运行该函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="344e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您正确完成了任务，您应该会收到以下结果。</p><p id="e46c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">【2015 年 1 月销售额排名前三的药物</p><ul class=""><li id="7683" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm op my mz na bi translated">产品:N02BE，销量:1044.24</li><li id="a436" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品编号:N05B，销量:463.0</li><li id="f34e" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品:R03，销量:177.25</li></ul><p id="7fbb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">2016 年 7 月销售额排名前三的药物</strong></p><ul class=""><li id="1d23" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm op my mz na bi translated">产品:N02BE，销量:652.36</li><li id="53e0" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品编号:N05B，销量:240.0</li><li id="6d61" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品:M01AB，销量:203.97</li></ul><p id="a879" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">2017 年 9 月销量前三的药品</strong></p><ul class=""><li id="65cd" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm op my mz na bi translated">产品:N02BE，销量:863.75</li><li id="8cab" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品:N05B，销量:223.0</li><li id="4365" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">产品:R03，销量:139.0</li></ul><p id="48ef" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是我们完成的第二项任务。让我们看看第三项任务。</p><h1 id="ce05" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">2017 年周一哪种药卖得最多？</strong></h1><p id="b18b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了回答这个问题，我们需要加载一个每日销售数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="3760" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这就是我们熊猫数据框的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/8018a49ee49d44cc108bb9afaac4e370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pWwDmnRF9RXJDErz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c64e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们需要过滤销售额，以便只获得 2017 年星期一的销售额。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="f452" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们现在需要按照工作日名称和总和值对结果进行分组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="6461" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们需要对这些值进行水平排序，以获得左边的最大值。水平排序类似于更常用的垂直排序，但水平滚动不是按列排序，而是按行排序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="688c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们将在左起第一列中获得 2017 年周一销售最频繁的药物。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/72d1e6ba7c03f3a7d05755b7ca9a538c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vs-eRhJLwF3Wr_yL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c296" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们唯一需要做的就是获取这个值并打印出结果。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="a7d6" class="ng la it oa b gy oe of l og oh">The drug most often sold on Mondays in 2017 is N02BE<br/>with the volume of 1160.56</span></pre><p id="06c9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上述练习中，我们将数据集加载到 Pandas 数据框中，并使用分组、排序和汇总等功能寻找特定信息。这些是练习这些类型的数据操作的很好的练习，我们将在接下来的练习中经常使用它们。</p><h1 id="2175" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">【2020 年 1 月可能有哪些药品销售？</h1><p id="b841" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们现在来看看回归，这是一项非常常见的数据科学任务。回归的思想是根据一个或多个自变量的值来预测因变量的值。使用不同的回归方法和过去的数据，我们可以尝试预测未来的值。</p><p id="7b33" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本练习中，我们将针对 2014 年至 2019 年间记录的数据，尝试预测未来几个月的销量。</p><h2 id="2399" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">预处理</strong></h2><p id="a900" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">查看数据集，我们可以看到数据质量良好，但有些记录中至少有一组药物的销售额为 0。这通常是我们在运行任何机器学习模型之前需要注意的事情。在这种情况下，我们有几个选择；我们可以删除至少一组药物的记录销售值为 0 的行，或者我们也可以用该组的平均值或中值替换 0 值。为简单起见，我们将删除至少一组药物的记录销售额为 0 的所有记录，但我们建议您再次重复此练习，并用该组的平均值或中值替换 0 值，以查看您是否会获得更好的结果。</p><p id="4a92" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">数据的另一个重要特征是，它包含了 2019 年不完整的销售数据。记录的最后一天是 10 月 8 日，这意味着 10 月份的销售数据不完整。因为对于本练习中的回归方法，我们仅使用月度销售数据，所以我们从分析中排除了 2019 年 10 月的数据。</p><h2 id="0f34" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">车型和技术</strong></h2><p id="c39f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将使用 Pandas 来读取 CSV 数据文件和数据预处理，并使用 Scikit-learn Python 库来学习回归模型。</p><p id="79cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于数据可视化，我们将使用 Matplotlib Python 库。</p><p id="312d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使用以下回归模型:</p><ul class=""><li id="afc1" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm op my mz na bi translated">线性回归</li><li id="cd0b" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">多项式回归</li><li id="2ba8" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm op my mz na bi translated">简单向量回归</li></ul><p id="b565" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Scikit-learn 库包括所有上述模型的实现。</p><p id="7a9a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们已经在笔记本的开头加载了所有需要的 Scikit-learn 库。</p><p id="4cd1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将分割数据，我们将使用 70%的数据训练模型，30%的数据进行测试。</p><p id="282e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使用投票回归器来组合不同的机器学习回归器，并返回平均预测值。我们这样做是为了平衡个体回归者的弱点。</p><h2 id="1745" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">计算和绘图</strong></h2><p id="744e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将显示所有回归和投票回归变量的单个结果，并将所有回归绘制在图表上，以直观地评估数据如何分散以及回归如何在数据集值之间绘制。</p><p id="1ccc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为我们正在处理一个相对较大的项目，所以使用函数来组织代码是一个好主意。</p><p id="7477" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们从将我们的训练和测试数据分散在图表上的函数开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="bd68" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们将创建线性回归、多项式回归和 SVR 预测函数。这些函数将训练和测试值作为参数，计算回归并显示 2020 年 1 月的预测值以及计算的精度和误差值，以便我们可以看到模型的有效性。</p><p id="f1c2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">线性回归预测函数。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="f3a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">多项式回归预测函数。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="a052" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">简单向量回归(SVR)预测函数。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="7de4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在下一个 Jupyter 笔记本单元中，我们可以编写使用上述函数的代码，显示预测值，并使用 Matplotlib 可视化我们的训练和测试数据以及不同的回归模型。</p><p id="7546" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于计算，我们将再次使用第二个产品(M01AE)，但我们鼓励您也对其他产品进行类似的计算。</p><p id="674a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们需要用产品名定义我们的产品变量，我们将为其计算回归。接下来，我们将定义 Pandas 数据框，我们将在其中存储我们的回归结果。然后我们将定义<em class="nv"> predictFor </em>变量，它是值序列中的一个月的数字，用于预测相关销售额。因为我们有 2019 年 10 月之前的数据，而不是 2019 年 12 月，我们预测未来 3 个月。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/5396439f0b249b97cc0bc1fa3b5017a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*dK9Ug_A17lFRiL7nRR1Cog.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/e5b261a193b8744ee30b69fdcb5d73df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*c-CNDwf89f3rQuvoncFoAQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="26a1" class="ng la it oa b gy oe of l og oh">Predictions for the product N02BA sales in January 2020</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="941f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">执行并保存线性回归的结果。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/8e951a397d1eefe48256c43b80f175f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYAHn6RBi_-PhWSvBct2sQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="52db" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">执行并保存多项式回归的结果。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/77394b1b6bd3f71ed2548b2e24e63d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VIdRVv2XYdkp-H004yPwUQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="2d60" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">执行并保存简单向量回归(SVR)的结果。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><p id="7502" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了获得更好的结果，我们将使用投票回归器，这是一种集成技术，它使用几个模型，然后对单个预测进行平均，并返回最终预测。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok ol l"/></div></figure><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="f8bd" class="ng la it oa b gy oe of l og oh">Voting Regressor January 2020 predicted value: 98.0</span></pre><p id="3247" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">显示所有结果</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="1ffe" class="ng la it oa b gy oe of l og oh">regResults</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/7ed33215533c5b168d5800245082cad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*fiubQlJ550fM1te5lqNrWg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h2 id="e7a1" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated"><strong class="ak">总结</strong></h2><p id="a158" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本练习中，我们学习了使用 Python Pandas，这是数据科学中最流行的数据操作和分析库。对于初学数据科学家来说，使用 Pandas 加载数据集并执行统计分析是最重要的元素之一。</p><p id="dc51" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们看了回归，这是数据科学的另一个非常重要的元素。线性回归、多项式回归和支持向量回归是回归的基本模型。</p><p id="2da1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了巩固你的知识，考虑从头开始完成任务，不要看书中的代码示例，看看你会得到什么结果。这是巩固你的知识的一件极好的事情。</p><p id="59a0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Jupyter 笔记本的完整 Python 代码可在 GitHub 上获得:<br/><a class="ae ky" href="https://github.com/pjonline/Basic-Data-Science-Projects/tree/master/1-Analysing-Pharmaceutical-Sales-Data" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/pj online/Basic-Data-Science-Projects/tree/master/1-analyzing-Pharmaceutical-Sales-Data</a></p><p id="50cf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">编码快乐！</p></div><div class="ab cl ow ox hx oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="im in io ip iq"><p id="3b4a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">还没有订阅媒体？考虑<a class="ae ky" href="https://pjwebdev.medium.com/membership" rel="noopener">报名</a>成为中等会员。每月只需 5 美元，你就可以无限制地阅读媒体上的所有报道。<a class="ae ky" href="https://pjwebdev.medium.com/membership" rel="noopener">订阅 Medium </a>支持我和其他作家在 Medium 上。</p></div></div>    
</body>
</html>