<html>
<head>
<title>How we launched a data product in 60 days with AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何利用AWS在60天内推出数据产品</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/launching-beta-data-product-within-two-month-with-aws-6ac6b55a9b5d?source=collection_archive---------11-----------------------#2020-04-10">https://towardsdatascience.com/launching-beta-data-product-within-two-month-with-aws-6ac6b55a9b5d?source=collection_archive---------11-----------------------#2020-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7ad6" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">新闻捕手</h2><div class=""/><div class=""><h2 id="eae0" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">两个人的团队在不到两个月的时间里为200名用户计划并发布了一个测试版，并且没有放弃他们的全职工作。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/c9fe8f56ac48d4b04650854381b4692a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WaXidHbR7f44pX2hlCfkuA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">测试版newscatcherapi.com解决方案架构</p></figure><p id="605f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">60天内，我们:</p><ul class=""><li id="441a" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">迭代我们的架构设计3次</li><li id="d4f2" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">发布的<a class="ae mr" href="https://github.com/kotartemiy/newscatcher" rel="noopener ugc nofollow" target="_blank"> Python包</a>在GitHub上获得了800多颗星</li><li id="8514" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">收到了200多个测试版的注册</li><li id="bf17" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">交付了我们的<a class="ae mr" href="https://newscatcherapi.com/docs" rel="noopener ugc nofollow" target="_blank">最小可行产品</a></li></ul><p id="c19e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae mr" href="https://newscatcherapi.com/" rel="noopener ugc nofollow" target="_blank">这篇文章中我将要谈到的产品的官方网站</a>。</p><p id="16ca" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在本文中:</p><ul class=""><li id="a203" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">第一部分<strong class="lj jd">产品</strong></li><li id="6288" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">第二部分。<strong class="lj jd">计划&amp;要求</strong></li><li id="2469" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">第三部分。<strong class="lj jd">解决方案架构</strong></li><li id="1b21" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">第四部分。<strong class="lj jd">发布测试版</strong></li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="93ca" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们是由两名数据工程师组成的团队。在2020年2月和3月，我们将大部分空闲时间用于构建一个API，让你可以搜索新闻文章的数据。</p><blockquote class="mz"><p id="309c" class="na nb it bd nc nd ne nf ng nh ni mc dk translated">这就像用一行代码查询谷歌新闻档案。</p></blockquote><p id="da6b" class="pw-post-body-paragraph lh li it lj b lk nj kd lm ln nk kg lp lq nl ls lt lu nm lw lx ly nn ma mb mc im bi translated">我们之前几乎没有使用AWS或交付<strong class="lj jd">成功的端到端解决方案的经验</strong>。尽管如此，正确的规划、寻求帮助和投入一些时间来寻找正确的工具使之成为可能。</p><blockquote class="mz"><p id="1826" class="na nb it bd nc nd ne nf ng nh ni mc dk translated">尽管这是一个测试版。</p></blockquote><h2 id="8f27" class="no np it bd nq nr ns dn nt nu nv dp nw lq nx ny nz lu oa ob oc ly od oe of iz bi translated">我们遵循的原则</h2><p id="c4aa" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">在业务方面:</p><ol class=""><li id="5643" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc ol mj mk ml bi translated">尽可能多地使用外部工具</li><li id="09a2" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">尽可能快地交付，以便尽快获得用户的反馈</li><li id="3fcc" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">用户至上。他们应该决定什么重要，什么不重要</li></ol><p id="29ef" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在技术方面:</p><ol class=""><li id="9405" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc ol mj mk ml bi translated">尽量减少使用您必须自己运行的服务器</li><li id="a617" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">如果已经编写了代码，就不要再编写了</li><li id="f08e" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">只有当客户无法使用您的解决方案时，性能才是重要的</li><li id="75d5" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">请求帮助</li></ol></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="1d7c" class="om np it bd nq on oo op nt oq or os nw ki ot kj nz kl ou km oc ko ov kp of ow bi translated">第一部分.产品</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/b80ed8b8261a6354238ba37aa5987548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pNuRCRuOynEfdfeN"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">何塞·马丁·拉米雷斯C 在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="ed58" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">问题</h2><p id="d869" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">我们大多数人阅读新闻。当我们为了个人兴趣消费新闻时，很容易跟随我们感兴趣的事情。</p><p id="03ed" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">许多企业还必须不断了解全球的最新动态。典型的例子是金融机构。他们使用替代数据来识别非金融活动产生的风险。</p><p id="1d3e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">政治、文化和社会事件可能引发另一系列事件，重塑某些金融市场。</p><p id="7cbe" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当然，你可以谷歌任何关键词或话题，找到最相关的新闻结果。但是，假设你是一个交易者，想要了解投资组合中每家公司的最新消息。每小时一次。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pd pe l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae mr" href="https://www.gifbay.com/gif/newspaper_press-130154/" rel="noopener ugc nofollow" target="_blank">https://www.gifbay.com/gif/newspaper_press-130154/</a></p></figure><p id="9eda" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者，你必须分析一个人/公司/事件在过去的一个月中被提及了多少次。</p><p id="17fe" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">或者，您希望向服务的用户显示特定主题的最新新闻。</p><p id="6359" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">从某种意义上来说，<strong class="lj jd">手工劳动要么变得不可能，要么变得过于昂贵。</strong>成千上万的新闻文章需要分析。如果你想扩大规模，你必须自动化这个过程。</p><h2 id="57b2" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">解决办法</h2><p id="bef5" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated"><a class="ae mr" href="https://newscatcherapi.com/" rel="noopener ugc nofollow" target="_blank"> Newscatcher AP </a> I是一个JSON API，可以让你搜索新闻数据。例如，您想获得在过去一天发表的关于苹果公司的所有文章的列表。</p><p id="ff48" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于每个数据记录，您将获得:</p><ul class=""><li id="f4a7" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">相关性分数(文章与搜索标准的匹配程度)</li><li id="a20b" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">统一资源定位器</li><li id="ba26" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">发布日期和时间</li><li id="144c" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">标题</li><li id="e9d8" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">摘要</li><li id="959a" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">文章语言</li><li id="3b8f" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">网站的全球排名</li></ul><p id="2c16" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们从数以千计的新闻网站收集新闻文章数据，更重要的是，将这些数据标准化。</p><h2 id="09fb" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">是数据即服务吗？</h2><p id="2abe" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated"><a class="ae mr" href="https://www.safegraph.com/blog/data-as-a-service-bible-everything-you-wanted-to-know-about-running-daas-companies?source=search_post---------0" rel="noopener ugc nofollow" target="_blank"> Auren Hoffman的《数据即服务圣经》</a>是任何想要了解什么是数据业务的人的必读之作。</p><p id="6328" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">根据Auren的愿景，数据业务有<strong class="lj jd"> 3大支柱</strong>:</p><ol class=""><li id="ad17" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc ol mj mk ml bi translated"><strong class="lj jd">数据采集</strong> —我们必须从数千家不同的在线新闻发布商那里收集新闻</li><li id="3192" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated"><strong class="lj jd">数据转换</strong> —我们必须规范化我们的数据并存储它，以便它可以被数据交付流程使用</li><li id="5b07" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated"><strong class="lj jd">数据交付</strong> —我们必须让客户能够消费我们的数据(例如，API)</li></ol><p id="2681" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">DaaS卖给你的是材料，而不是解决方案本身。<strong class="lj jd">你必须根据自己的需求调整数据以提取价值。</strong>因此，潜在客户池减少到那些拥有数据团队作为资源的人。但是，那些拥有开发人员的客户可以根据需要精确地调整数据产品。</p><h2 id="514a" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">DaaS对SaaS</h2><p id="0cb3" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">当你饿的时候，你有两个主要的选择。</p><p id="7e61" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一个是从餐馆点一些食物/去餐馆。例如，你订了20美元的比萨饼。</p><p id="fd14" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">另一个选择是去杂货店，花8美元买下所有的食材，然后自己做饭。</p><p id="0dff" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">自己做披萨的缺点就是要花时间。另外，你需要掌握一些技能。但是，它更便宜(如果你不为你的时间收费的话)，而且<strong class="lj jd">你可以随心所欲地定制</strong>。</p><p id="67b0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">餐馆的比萨饼通常不能定制。</p><p id="dbb4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">比萨饼店是SaaS的一个例子，因为它给你的是最终产品。杂货店是DaaS的一个例子，因为它给你资源来烘烤你自己的比萨饼。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h2 id="d0d0" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">什么是贝塔？</h2><p id="9a29" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">贝塔是你如何能:</p><ul class=""><li id="bd12" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">验证你的想法，</li><li id="cd64" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">揭示主要技术问题</li><li id="0c68" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">收集关于用户需要的最重要功能的反馈</li></ul><p id="613d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你不收费，所以它不需要完美。</p><h2 id="3b9c" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">为什么发布测试版而不是最终版？</h2><p id="c069" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">嗯，你必须非常擅长你正在做的事情，并且完全了解你的受众，这样才能在第一次尝试时就发布“有价值的东西”。所以多花一点时间最终会有回报。</p><p id="2958" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对我们来说，这也是为了验证我们的架构。我们必须看到不同的部件是如何粘在一起的。</p><h2 id="61a0" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">β=最小可行产品</h2><p id="c826" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">我不确定这是否总是正确的，但在大多数情况下应该是这样。你只留下产品无法生存的功能。</p><p id="75fd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所有不必要的都放在MVP后的第一栏。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="8e93" class="om np it bd nq on oo op nt oq or os nw ki ot kj nz kl ou km oc ko ov kp of ow bi translated">第二部分。计划和要求</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pg"><img src="../Images/05979a17c1a6b4ea87019a5d91f980d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HravotLQxKXIwCwQ"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae mr" href="https://unsplash.com/@lenjons?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伦纳特·约翰逊</a>在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="315d" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">测试版要求</h2><p id="997f" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">用户传递单词/短语，API返回一堆关于搜索主题的文章。就这么简单。</p><p id="f26d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">从API收到响应应该不会超过3-5秒。</p><p id="36ee" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们还添加了一些过滤器，因为这很容易做到。</p><p id="17e8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">任何需要一个多小时开发的功能都被抛弃了。</p><p id="4f80" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们的文档页面很好地展示了我们所取得的成就。</p><h2 id="f654" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">如何构建新闻API？</h2><p id="4dc6" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">简单来说，我们必须从新闻网站获取文章，比如nytimes.com的<a class="ae mr" href="https://www.nytimes.com/" rel="noopener ugc nofollow" target="_blank">、</a><a class="ae mr" href="https://www.theverge.com/" rel="noopener ugc nofollow" target="_blank">和theverge.com的</a>等。最终目标是从任何现有的新闻网站上获取。</p><p id="15b5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，<strong class="lj jd">数据规范化&amp;重复数据删除——最重要的部分</strong>。每篇文章都是一个数据点——它有一组变量，如标题、出版日期、作者等。</p><p id="6063" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">例如，一篇文章发表的日期和时间应该是我们最终数据源中的一个时区。否则按时间查询数据就没有任何意义了。</p><p id="bc36" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，在我们收集和标准化之后，我们应该<strong class="lj jd">将数据</strong>存储在某个地方。更重要的是，检索数据应该很容易。在我们的例子中，我们很大程度上依赖于搜索功能。</p><h2 id="8ba7" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">去拿文章。数据收集</h2><p id="b89e" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">在我开始解释架构设计之前，我应该解释一下我们将如何收集新闻文章的数据。</p><p id="d7ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一个想法可能是为每个网站设置网页抓取器。Web抓取已经很发达了——有很多开源库使得web抓取变得很容易。</p><p id="6e5b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是，<strong class="lj jd">每个网站都有自己的结构</strong>。即使有一些令人惊奇的库可以帮助你从新闻文章中构建数据(比如<a class="ae mr" href="https://github.com/codelucas/newspaper" rel="noopener ugc nofollow" target="_blank">报纸</a>)，它也不能100%适用于这些来源。</p><p id="7306" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">制作成千上万个可以避免被禁的网络爬虫既昂贵又耗时</strong>。</p><p id="9795" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在理想的情况下，我应该有一个API来从每个新闻数据提供者那里检索最新的新闻。另外，每个API都是相同的设计。</p><p id="ceb7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是没有这样的API。然而，另一种获取新闻数据的方法是存在的。并且，它已经被规范化了。它被称为RSS。</p><blockquote class="mz"><p id="4d96" class="na nb it bd nc nd ne nf ng nh ni mc dk translated">根据<a class="ae mr" href="https://en.wikipedia.org/wiki/RSS" rel="noopener ugc nofollow" target="_blank">维基百科</a>，<strong class="ak"> RSS是一种网络提要，允许用户和应用程序以标准化的、计算机可读的格式访问网站的更新。</strong></p></blockquote><p id="4fd9" class="pw-post-body-paragraph lh li it lj b lk nj kd lm ln nk kg lp lq nl ls lt lu nm lw lx ly nn ma mb mc im bi translated">对于新闻网站来说，<em class="pf">网站更新</em>是新的新闻文章。几乎每个新闻网站都有。</p><p id="d95a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">RSS已经标准化了。算是吧。您需要做一些额外的工作来从中提取主要字段。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ph"><img src="../Images/1ff0c5f123280dd449fe2460a7568f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1ZOvRl81lft8OYioMURhA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">nytimes.com的主要RSS</p></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="cc3a" class="om np it bd nq on oo op nt oq or os nw ki ot kj nz kl ou km oc ko ov kp of ow bi translated">第三部分。解决方案架构</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/c9fe8f56ac48d4b04650854381b4692a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WaXidHbR7f44pX2hlCfkuA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">newscatcherapi.com AWS架构图测试版</p></figure><p id="0746" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">将收集到的标准化数据传送到我们的最终数据存储需要7个步骤——弹性搜索:</p><ol class=""><li id="6936" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc ol mj mk ml bi translated">CloudWatch事件触发λ</li><li id="548c" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">Lambda从DynamoDB获取RSS提要URL</li><li id="c61a" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">同一个Lambda将所有这些RSS URLs发送到SQS</li><li id="2422" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">Lambda获取来自SQS的每个RSS端点，并读取和规范化提要</li><li id="f0b2" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">新闻文章数据被插入DynamoDB</li><li id="fb57" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">DDB流收集多达X条新插入的记录，并将其发送给Lambda</li><li id="b453" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">Lambda在Elasticseearch中插入新记录</li></ol><p id="d9d8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第一步。</strong> CloudWatch事件触发了“编排”lambda</p><blockquote class="pi pj pk"><p id="4dcd" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">AWS Lambda是一个无服务器的功能即服务工具，它运行您的代码来响应事件。您不必维护服务器。您只需为执行该功能的时间付费。</p><p id="b391" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">CloudWatch事件是一个<a class="ae mr" href="https://en.wikipedia.org/wiki/Cron" rel="noopener ugc nofollow" target="_blank"> cron作业</a>的AWS实现。</p></blockquote><p id="6129" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以设置CloudWatch事件，每隔X分钟、小时、天等触发你的Lambda。</p><p id="3c4b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第二步。</strong>“编排”lambda从DynamoDB获取RSS提要URL</p><p id="2ebd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">DynamoDB表包含了我们用来更新新闻数据库的所有RSS提要</p><blockquote class="pi pj pk"><p id="0a29" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">DynamoDB是AWS的一个完全托管的非SQL数据库。与AWS Lambda一样，您不必管理其背后的硬件或软件。您可以将它作为存储数据的现成解决方案。</p></blockquote><p id="633b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第三步。</strong>“编排”lambda将所有这些RSS URLs发送到SQS</p><p id="ac84" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在您有了一个必须处理的所有RSS提要的列表。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="po pe l"/></div></figure><p id="94e3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它们有数千个，所以循环处理每一个不是一个选项。</p><p id="481b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们假设我们有另一个Lambda函数可以读取和规范化RSS。AWS Lambda允许您进行数百个并行调用。因此，你可以考虑从你当前的Lambda调用许多其他的Lambda。</p><p id="82c2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这种方法应该是可行的，但是，它会使您的过程变得复杂并且容易失败。</p><p id="0a68" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所以你需要中间的东西。</p><blockquote class="pi pj pk"><p id="99c4" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">简单队列服务是由AWS完全管理的队列服务。</p></blockquote><p id="8b27" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将把所有的RSS端点作为消息发送给SQS，而不是从我们的“编排”Lambda中触发RSS处理。然后，来自SQS的新消息可以触发RSS处理Lambda。</p><p id="ebdb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">通过添加SQS层，我们使得检查每个RSS端点处理的成功变得更加容易。如果其中一个lambda失败，它不会中断处理其他RSS提要的任何其他lambda。</p><p id="c68d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第四步。</strong>Lambda从SQS获取每个RSS端点，并读取和规范化提要</p><p id="60f3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我最喜欢的AWS Lambda特性是，你不用为同时执行多个Lambda而多花钱。当您不知道未来的工作负载，或者想要确保系统在接收更多负载时不会崩溃时，它使Lambda成为一个有用的工具。</p><p id="5936" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这个Lambda是一个Python函数，它将RSS URL作为输入，并返回结构化数据(标题、发布日期、作者、文章URL等。)</p><p id="f46f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，当我们从每个RSS提要中提取并规范化新闻文章的数据时，必须存储这些数据。</p><p id="a9fa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第五步。</strong>新闻文章数据被插入DynamoDB</p><p id="6a12" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在将数据发送到Elasticsearch集群之前，我们将其放入DynamoDB。主要原因是Elasticsearch确实失败了。Elasticsearch在很多方面都很棒(我们将在后面讨论)，但是<strong class="lj jd"> Elasticsearch不能成为你的主要数据存储</strong>。</p><p id="1936" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">重复数据删除。每个RSS提要偶尔会更新一次。它向提要添加了更多的文章。例如，新闻网站X的RSS提要总是包含100篇文章。提要每小时更新一次。如果在这一小时内有10篇新文章，那么它们将出现在顶部。而最早的10篇文章将被删除。其他90篇文章会和一个小时前一样。因此，所有这90篇文章在我们的数据库中都是重复的。</p><p id="97a7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们有成千上万的这样的反馈。</p><p id="d32e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，如果我们能够验证每个ID(不管它是什么)是否已经存在于我们的数据库中，那就太好了。</p><p id="aae3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我从Reddit上得到了很好的建议:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pp"><img src="../Images/a7392e48fbef9578aa6ffb595f574b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOY0ZdtGXD4N8HVBw8gaoQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">感谢来自AWS的Vladimir Budilov的帮助</p></figure><p id="47b4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">诀窍是确保我们对每篇新闻文章都有一个一致的ID键。我们是每篇文章的标题+网址。然后，当我们将这些数据插入DynamoDB时，只允许新的id(检查DynamoDB的<em class="pf"> attribute_not_exists </em>设置)。</p><p id="93cf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，我们不必自己消除重复数据。</p><p id="2d78" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第六步。</strong> DDB流收集多达X条新插入的记录，并将其发送给Lambda</p><p id="10e0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，我们必须从DynamoDB向Elascticsearch集群发送新数据。</p><p id="835e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们在DynamoDB插件上做了一个触发器。每次任何数据被插入DynamoDB时，它都会被Lambda拾取，然后将这些新数据发送到Elasticsearch集群。</p><p id="c33d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">将数据加载到DynamoDB中我们显著降低了ES的负载，因为它将接收更少的新数据。另外，DynamoDB是我们的主要数据来源。</p><p id="fb96" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第七步。</strong> Lambda在Elasticsearch中插入新记录</p><p id="2d43" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">DynamoDB承担了确保数据库中没有重复项的所有繁重工作。只有新插入的记录才会进入Elasticsearch集群。</p><p id="83a4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您可以将Lambda设置为等待新的X记录或Y分钟，然后一次获取多个记录。这样你的交易会更少，而且你可以利用Elasticsearch批量插入。</p><h2 id="ebd7" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">为什么选择Elasticsearch？</h2><p id="dba2" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">因为这是使用全文搜索的最佳方式。</p><p id="6f7b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Elasticsearch很复杂，你几乎可以调整任何东西。充分了解数据的用途和用途可以让您优化集群以获得最佳性能。</p><p id="de33" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然而，出于测试目的，我们几乎在所有地方都使用默认设置。</p><h2 id="77d8" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">数据交付/API</h2><p id="893b" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">到目前为止，我们确保我们的Elasticsearch集群得到了新数据的更新。现在，我们必须为用户提供一个工具来与我们的数据进行交互。我们选择让它成为一个RESTful API。</p><p id="de28" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我最喜欢的组合是用API Gateway + Lambda来做。</p><p id="eca3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">来自<a class="ae mr" href="https://aws.amazon.com/api-gateway/?nc1=h_ls" rel="noopener ugc nofollow" target="_blank"> AWS页面</a>:</p><blockquote class="pi pj pk"><p id="9b38" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">API Gateway处理接受和处理多达数十万个并发API调用所涉及的所有任务，包括流量管理、CORS支持、授权和访问控制、节流、监控和API版本管理。</p></blockquote><p id="ab90" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此API网关负责管理API请求。我们还是要实现逻辑层。Lambda函数将处理每个API调用。</p><p id="09c0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Lambda本身是用一个叫Flask的微型web框架编写的。</p><p id="46ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这个Lambda的任务是解析用户传递的参数(比如他们想要查找文章的短语)。然后，它查询我们的Elasticsearch集群。最后，它组成一个干净的JSON响应对象，发送给用户。</p><p id="a686" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">除了Flask，我们还使用了<a class="ae mr" href="https://github.com/elastic/elasticsearch-dsl-py" rel="noopener ugc nofollow" target="_blank"><strong class="lj jd"><em class="pf">elasticsearch-DSL-py</em></strong></a>包来帮助编写和运行针对elastic search的查询。</p><p id="bb85" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我建议使用<a class="ae mr" href="https://github.com/Miserlou/Zappa" rel="noopener ugc nofollow" target="_blank"> Zappa </a>部署API Lambdas:</p><blockquote class="pi pj pk"><p id="7a12" class="lh li pf lj b lk ll kd lm ln lo kg lp pl lr ls lt pm lv lw lx pn lz ma mb mc im bi translated">Zappa使得在AWS Lambda + API Gateway上构建和部署无服务器、事件驱动的Python应用程序(包括但不限于WSGI web应用程序)变得非常容易。可以把它想象成Python应用程序的“无服务器”网络托管。这意味着无限扩展、零停机、零维护，而成本只是您当前部署的一小部分！</p></blockquote><p id="2bb1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当你不确定你要服务多少个调用时，用Lambda部署你的API是最方便的。</p><p id="1169" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">更重要的是，如果你有0个电话，你支付0。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="74a8" class="om np it bd nq on oo op nt oq or os nw ki ot kj nz kl ou km oc ko ov kp of ow bi translated">第四部分。后期测试</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pq"><img src="../Images/a862cc63154b7cc0dc98e34ef681ab06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j-ny7Nn7dXXw-bvk"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae mr" href="https://unsplash.com/@bluehouseskis?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">蓝屋滑雪板</a>在<a class="ae mr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="0fa8" class="no np it bd nq nr oy dn nt nu oz dp nw lq pa ny nz lu pb ob oc ly pc oe of iz bi translated">初始(beta后)发布计划</h2><p id="7dcd" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">除了我们在测试版中取得的所有成就之外:</p><ul class=""><li id="002f" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">按语言过滤</li><li id="71c6" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">适用于6-10种最常见语言的正确文本分析器</li><li id="aa9f" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">精确匹配搜索</li><li id="ab5b" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">必须包含/排除一个短语</li><li id="feeb" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">按国家过滤</li><li id="79a3" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">每个国家/地区端点的头条新闻</li><li id="7b1d" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">按主题过滤(体育、商业、娱乐等。)</li><li id="6afd" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">页码</li></ul><p id="912b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将有大量的工作来优化我们的弹性搜索集群。最大的变化是正确的<strong class="lj jd">根据语言</strong>分析文本字段。</p><p id="f07d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">重点是让搜索知道用户想要的语言。例如，默认的Elasticsearch文本分析器不知道“got”是“go”的基本形式。而英语分析器使用词干来跟踪这些东西。</p><p id="f4b6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，知道你希望你的文章被搜索到哪种语言将极大地提高找到的文章的相关性分数。</p><p id="85be" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">日志记录是我们想要实现的另一件重要的事情。最有可能的是，我们将使用Elasticsearch进行日志记录。</p><p id="e601" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">还应实施弹性搜索恢复计划。至少，我们应该知道集群何时关闭(目前情况并非如此)。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="fae9" class="om np it bd nq on oo op nt oq or os nw ki ot kj nz kl ou km oc ko ov kp of ow bi translated">结论</h1><p id="b0d6" class="pw-post-body-paragraph lh li it lj b lk og kd lm ln oh kg lp lq oi ls lt lu oj lw lx ly ok ma mb mc im bi translated">它只是工作。你还需要从测试版中得到什么？</p><p id="b99f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">帮助我们进行测试的两个主要因素是:</p><ol class=""><li id="6761" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc ol mj mk ml bi translated">请Reddit帮助我们设计建筑</li><li id="5c4f" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc ol mj mk ml bi translated">投资一些时间来发布我们的<a class="ae mr" href="https://github.com/kotartemiy/newscatcher" rel="noopener ugc nofollow" target="_blank"> Python包</a> →获得beta注册</li></ol><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pr pe l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae mr" href="https://www.youtube.com/watch?v=r13riaRKGo0" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=r13riaRKGo0</a></p></figure><p id="212d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">感谢你一路阅读到这里。</p><p id="d1cf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">支持我们的最好方式是参加我们的<a class="ae mr" href="https://newscatcherapi.com/docs" rel="noopener ugc nofollow" target="_blank">封闭测试</a>。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><pre class="ks kt ku kv gt ps pt pu pv aw pw bi"><span id="d9bc" class="no np it pt b gy px py l pz qa">About me</span><span id="5270" class="no np it pt b gy qb py l pz qa">My name is Artem, I build <a class="ae mr" href="https://newscatcherapi.com/" rel="noopener ugc nofollow" target="_blank">newscatcherapi.com</a> - ultra-fast API to find news articles by any topic, country, language, website, or keyword.</span><span id="5709" class="no np it pt b gy qb py l pz qa">I write about Python, cloud architecture, elasticsearch, data engineering, and entrepreneurship.</span></pre></div></div>    
</body>
</html>