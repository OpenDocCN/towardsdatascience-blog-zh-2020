<html>
<head>
<title>Creating and Automating an Interactive Dashboard using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 创建和自动化交互式仪表盘</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-and-automating-an-interactive-dashboard-using-python-5d9dfa170206?source=collection_archive---------9-----------------------#2020-08-11">https://towardsdatascience.com/creating-and-automating-an-interactive-dashboard-using-python-5d9dfa170206?source=collection_archive---------9-----------------------#2020-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/550ac575419f53fe100a5b01179abbeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9vBFubP3r9OTk4OoGf1FFA.gif"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Gif 由你真诚地</p></figure><p id="e2e1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本教程中，我将在 selenium、pandas、dash 和 plotly 的帮助下，使用 python 创建一个自动的、交互式的得克萨斯州新冠肺炎县案例统计仪表板。我假设读者对 python、pandas 和 selenium 有所了解。阅读完本教程后，这就是你创建令人惊叹的交互式仪表盘所需的全部内容！</p><p id="a12f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些步骤的概述以及您将学到的内容如下:</p><ol class=""><li id="9439" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">使用 selenium 从 web 下载每日更新的数据</li><li id="4bcf" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">使用 shutil、glob 和 os python 库更新数据目录</li><li id="6a97" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">用熊猫简单清理 excel 文件</li><li id="cb11" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">格式化要输入到 plotly 图形中的时间序列数据帧</li><li id="8980" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">使用 dash 为您的仪表板创建本地网页</li></ol><p id="18a9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我们开始之前，您需要下载将在本教程中使用的 python 库。这可以在您的终端上使用以下命令来完成:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="a7da" class="lx ly iq lt b gy lz ma l mb mc">pip install &lt;package name&gt;</span><span id="b47d" class="lx ly iq lt b gy md ma l mb mc"># package names: selenium, pandas, webdriver_manager, shutil, glob, plotly,and dash</span></pre><p id="5894" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">需要注意的一点是，我在步骤 1-4 中使用了 Jupyter 笔记本，然后在步骤 5 中使用了 Spyder。当我解释一个代码块做什么的时候，它通常就在文本的正上方。我在本教程中的所有代码都可以在我的 GitHub 中的 Automate collecting of data notebooks 文件下找到。</p><p id="176c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">好，我们开始吧！</p><p id="97c8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第一步:使用 selenium 从网上下载每日更新的数据</strong></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="962c" class="lx ly iq lt b gy lz ma l mb mc"># import packages<br/>from selenium import webdriver<br/>from webdriver_manager.chrome import ChromeDriverManager<br/>from selenium.webdriver.chrome.options import Options<br/>import shutil<br/>import glob<br/>import os<br/>from unicodedata import *<br/>import time</span><span id="82fe" class="lx ly iq lt b gy md ma l mb mc"># open a chrome browser using selenium <br/>driver = webdriver.Chrome(ChromeDriverManager().install())</span><span id="6f1c" class="lx ly iq lt b gy md ma l mb mc"># got to web page where excel file links are located<br/>driver.get("<a class="ae me" href="https://www.dshs.texas.gov/coronavirus/additionaldata/" rel="noopener ugc nofollow" target="_blank">https://www.dshs.texas.gov/coronavirus/additionaldata/</a>")</span><span id="603c" class="lx ly iq lt b gy md ma l mb mc"># these options allow selenium to download files <br/>options = Options()<br/>options.add_experimental_option("browser.download.folderList",2)<br/>options.add_experimental_option("browser.download.manager.showWhenStarting", False)<br/>options.add_experimental_option("browser.helperApps.neverAsk.saveToDisk", "application/octet-stream,application/vnd.ms-excel")</span></pre><p id="f486" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，第一个代码块非常简单明了，但是需要注意一些事情。我正在安装一个 selenium chrome web 驱动程序，这样我就不必在新的 chrome 驱动程序更新时重新下载了。这个驱动是用来在线下载我要的 excel 文件的。它会在你的电脑上打开一个新的谷歌 chrome 窗口，然后进入<a class="ae me" href="https://www.dshs.texas.gov/coronavirus/additionaldata/" rel="noopener ugc nofollow" target="_blank">网页</a>，提供每天更新的德克萨斯新冠肺炎各县的案件数量。selenium 的标准选项不允许从 web 下载文件，因此需要修改这些选项以允许这样做。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="708e" class="lx ly iq lt b gy lz ma l mb mc"># initialize an object to the location on the web page and click on it to download<br/>link = driver.find_element_by_xpath('/html/body/form/div[4]/div/div[3]/div[2]/div/div/ul[1]/li[1]/a')<br/>link.click()</span><span id="052b" class="lx ly iq lt b gy md ma l mb mc"># Wait for 15 seconds to allow chrome to download file<br/>time.sleep(15)</span></pre><p id="c89e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这段代码使用完整的 Xpath 单击 excel 文件的链接。这可以通过右键单击页面、检查页面、右键单击想要单击的链接并复制完整的 Xpath 来找到。然后驱动程序点击链接，等待 15 秒下载，这对于下一个代码块不出错是至关重要的。</p><p id="4006" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir"> 2。使用 shutil、glob 和 os python 库更新数据目录</strong></p><p id="4024" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">在继续阅读之前</strong>:如果你在家学习，你需要改变我从/Users/tsbloxsom/Downloads/*下载目录的路径。xlsx ' to '/Users/&lt;your _ username&gt;/Downloads/*。xlsx '</p><p id="13d9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您还需要从我使用的目录中更改要存储数据和 python 笔记本的目录:'/Users/tsbloxsom/Documents/GitHub/Texas-census-county-data-project/Automate collection of data notebooks/*。xlsx' to '/Users/ <your_username> /bla/bla/*。xlsx '</your_username></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="1781" class="lx ly iq lt b gy lz ma l mb mc"># locating most recent .xlsx downloaded file <br/>list_of_files = glob.glob('/Users/tsbloxsom/Downloads/*.xlsx') <br/>latest_file = max(list_of_files, key=os.path.getmtime)</span><span id="a272" class="lx ly iq lt b gy md ma l mb mc"># replace "\" with "/" so file path can be located by python<br/>latest_file = latest_file.replace("\\", "/")<br/>latest_file</span><span id="e1bf" class="lx ly iq lt b gy md ma l mb mc"># we need to locate the old .xlsx file(s) in the dir we want to store the new xlsx file in<br/>list_of_files = glob.glob('/Users/tsbloxsom/Documents/GitHub/Texas-census-county-data-project/Automate collecting of data notebooks/*.xlsx') </span><span id="d7f1" class="lx ly iq lt b gy md ma l mb mc"># need to delete old xlsx file(s) so if we download new xlsx file with same name we do not get an error while moving it<br/>for file in list_of_files:<br/>    print("deleting old xlsx file:", file)<br/>    os.remove(file)</span><span id="b0fc" class="lx ly iq lt b gy md ma l mb mc"># Move the new file from the download dir to the github dir <br/>shutil.move(latest_file,'/Users/tsbloxsom/Documents/GitHub/Texas-census-county-data-project/Automate collecting of data notebooks/')</span></pre><p id="8116" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这个代码块是大量自动化发生的地方。它使用 glob 和 os.path.getmtime 函数找到我刚刚下载的 excel 文件，删除我想要存储新 excel 文件的目录中的任何旧 excel 文件(可能是前一天的)，然后将新 excel 文件移动到 GitHub 目录中。os.path.getmtime()函数返回路径的最后修改时间，因此使用 max()函数，可以找到最近下载的 excel 文件。</p><p id="b6ef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第三步:用熊猫简单清理 excel 文件</strong></p><p id="6198" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们已经在我们想要的目录中有了最新的新冠肺炎数据，在绘制之前我们需要做一些清理工作。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="abb1" class="lx ly iq lt b gy lz ma l mb mc">import pandas as pd<br/>import re</span><span id="b96c" class="lx ly iq lt b gy md ma l mb mc">pd.set_option('display.max_rows', 500)<br/>pd.options.display.max_colwidth = 150</span><span id="950e" class="lx ly iq lt b gy md ma l mb mc"># again we need to locate the .xlsx file <br/>list_of_files = glob.glob('/Users/tsbloxsom/Documents/GitHub/Texas-census-county-data-project/Automate collecting of data notebooks/*.xlsx') <br/>latest_file = max(list_of_files, key=os.path.getctime)<br/>print(latest_file.split("\\")[-1])</span><span id="d8af" class="lx ly iq lt b gy md ma l mb mc">df = pd.read_excel("{}".format(latest_file),header=None)</span><span id="ac4e" class="lx ly iq lt b gy md ma l mb mc">df.head()</span></pre><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/ee19b05bdc6bbc47eedfe34e391a1d9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTODSr4H0zIIi2qSYck4aA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><p id="3d7a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因此，我们读取 excel 文件，并将其转换为熊猫数据框(df)…我们有一些清理工作要做。让我们处理文件的第一行和最后几行。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="2477" class="lx ly iq lt b gy lz ma l mb mc"># print out latest COVID data datetime and notes<br/>date = re.findall("- [0-9]+/[0-9]+/[0-9]+ .+", df.iloc[0, 0])<br/>print("COVID cases latest update:", date[0][2:])<br/>print(df.iloc[1, 0])<br/>print(str(df.iloc[262:266, 0]).lstrip().rstrip())</span><span id="5b9a" class="lx ly iq lt b gy md ma l mb mc">#drop non-data rows<br/>df2 = df.drop([0, 1, 258, 260, 261, 262, 263, 264, 265, 266, 267])</span></pre><p id="6afb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">首先，我想打印出前两行和最后几行数据的相关信息，然后我想从 df 中删除这些行。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="7948" class="lx ly iq lt b gy lz ma l mb mc"># clean column names<br/>df2.iloc[0,:] = df2.iloc[0,:].apply(lambda x: x.replace("\r", ""))<br/>df2.iloc[0,:] = df2.iloc[0,:].apply(lambda x: x.replace("\n", ""))<br/>df2.columns = df2.iloc[0]<br/>clean_df = df2.drop(df2.index[0])<br/>clean_df = clean_df.set_index("County Name")</span><span id="27c4" class="lx ly iq lt b gy md ma l mb mc"># convert clean_df to a .csv file<br/>clean_df.to_csv("Texas county COVID cases data clean.csv")</span></pre><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/5467f0d8f4fffd691585e9bde8c8b9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xsz3-gycqfYloW-uEI9Ofg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><p id="01e9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的代码块中，我清除了每个日期的行，其中许多日期在单元格中有新行、和回车、字符。然后，我将日期行作为列名，并删除原来的日期行。我们最终得到了一个清晰的 df，其中的行是德克萨斯州的每个县，每列代表每个日期的案例数。最后，我想为下一步将 df 转换成. csv 文件。</p><p id="4cd0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第四步:将输入的时间序列数据帧格式化成 plotly 图形</strong></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="fd3a" class="lx ly iq lt b gy lz ma l mb mc">import plotly.express as px</span><span id="bc3d" class="lx ly iq lt b gy md ma l mb mc">list_of_files = glob.glob('/Users/tsbloxsom/Documents/GitHub/Texas-census-county-data-project/Automate collecting of data notebooks/*.csv') <br/>latest_file = max(list_of_files, key=os.path.getmtime)<br/>latest_file.split("\\")[-1]</span><span id="9f12" class="lx ly iq lt b gy md ma l mb mc">df = pd.read_csv(latest_file.split("\\")[-1])</span></pre><p id="b59e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们再次使用 glob 和 os.path.getmtime 函数来查找最新的。csv 文件，即我们的“德州县 COVID 病例数据 clean.csv”。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="e988" class="lx ly iq lt b gy lz ma l mb mc"># convert df into time series where rows are each date and clean up<br/>df_t = df.T<br/>df_t.columns = df_t.iloc[0]<br/>df_t = df_t.iloc[1:]<br/>df_t = df_t.iloc[:,:-2]</span><span id="5c25" class="lx ly iq lt b gy md ma l mb mc"># next lets convert the index to a date time, must clean up dates first<br/>def clean_index(s):<br/>    s = s.replace("*","")<br/>    s = s[-5:]<br/>    s = s + "-2020"<br/>    #print(s)<br/>    return s</span><span id="c2fc" class="lx ly iq lt b gy md ma l mb mc">df_t.index = df_t.index.map(clean_index)</span><span id="bd23" class="lx ly iq lt b gy md ma l mb mc">df_t.index = pd.to_datetime(df_t.index)</span></pre><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/3310468d6f2bbb5c55e9d9e6fb3dea71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66bY8qRtk_EYeEtR6Q7wEw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><p id="ee0a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的代码块中，我将数据帧转换为时间序列 df，其中行现在是日期，列是县。我还删除了几个列，其中包含病例总数和报告病例的县数。最后，我将日期列转换成一种可用的格式，这种格式可以转换成 pandas date_time 对象，对此我使用了函数 clean_index。但是我们还没有完成。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="8989" class="lx ly iq lt b gy lz ma l mb mc"># initalize df with three columns: Date, Case Count, and County<br/>anderson = df_t.T.iloc[0,:]</span><span id="5657" class="lx ly iq lt b gy md ma l mb mc">ts = anderson.to_frame().reset_index()</span><span id="b085" class="lx ly iq lt b gy md ma l mb mc">ts["County"] = "Anderson"<br/>ts = ts.rename(columns = {"Anderson": "Case Count", "index": "Date"})</span></pre><p id="9ec5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们的 plotly 函数将接受 3 列作为输入:日期、案例数和县。所以我们需要把宽 df 转换成长 df。为此，我首先初始化一个包含三列的长 df:一个日期列、安德森县的案例数和一个包含县名的县列。看起来像这样:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/5688b1518c2ee4847b0ac4c266a4bdf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*-0rz_5giAo_JyJJ59Mwdfw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="19fb" class="lx ly iq lt b gy lz ma l mb mc"># This while loop adds all counties to the above ts so we can input it into plotly<br/>x = 1<br/>while x &lt; 254:<br/>    new_ts = df_t.T.iloc[x,:]<br/>    new_ts = new_ts.to_frame().reset_index()<br/>    new_ts["County"] = new_ts.columns[1]<br/>    new_ts = new_ts.rename(columns = {new_ts.columns[1]: "Case Count", "index": "Date"})<br/>    ts = pd.concat([ts, new_ts])<br/>    x += 1</span><span id="8e50" class="lx ly iq lt b gy md ma l mb mc">#save long form df for dash app<br/>ts.to_csv("time_series_plotly.csv")</span></pre><p id="c2e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">上面代码块的注释说明了一切，但我们现在只是循环遍历整个 wide df 并为每个县创建 new_ts long df，看起来像 Anderson 的 df。然后，我们将每个长 df 连接在一起，wallah 我们自己有了可以输入到 plotly 中的长 df，稍后我们的 dash 应用程序显示如下！</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/d9c407500b4c0f3ca906c461171ba6c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*kZKNdFN0v5qqsz7UdAXVUQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="c03f" class="lx ly iq lt b gy lz ma l mb mc">fig = px.scatter(ts, x='Date', y='Case Count', color='County')<br/>fig.update_traces(mode='markers+lines')<br/>#fig.update_traces(mode='lines')<br/>fig.show()</span></pre><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/401f55346217d13b1fdb9a8308936f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLoiITeYUrJ6rrbx98rvHA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">真实的你的形象</p></figure><p id="4fc1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们最终可以使用简单的三行代码将数据绘制成散点图！我使用了“标记+线条”选项，我认为它看起来比线条更令人愉快，也更容易交互。我已经爱上了 plotly，因为与 seaborn 或 matplotlib 不同，它的图形是交互式的，而且编码非常简单。Plotly 也有出色的文档，可在此处找到<a class="ae me" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="341c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第五步:使用 dash 为你的仪表板创建一个本地网页</strong></p><p id="6e08" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于没有任何软件开发经验的人来说，这一步可能会变得棘手。大约一个月前我还没有，所以我会慢慢地走完这一步，尽可能保持简单。首先，我们希望在笔记本/数据目录中创建一个虚拟环境。要做到这一点，我们必须进入命令行或 Anaconda 提示符，并使用 cd 进入该目录。大概是这样的:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="fe61" class="lx ly iq lt b gy lz ma l mb mc">C:\Users\tsbloxsom&gt;cd C:\Users\tsbloxsom\Documents\GitHub\Texas-census-county-data-project\Automate collecting of data notebooks</span></pre><p id="0c47" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后我们创建虚拟环境:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="9c9e" class="lx ly iq lt b gy lz ma l mb mc">python3 -m venv venv</span></pre><p id="bc59" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后我们激活虚拟环境:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="5a91" class="lx ly iq lt b gy lz ma l mb mc">venv\Scripts\activate</span></pre><p id="1dcb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在让我们进入短跑项目。这里有一个<a class="ae me" href="https://dash.plotly.com/introduction" rel="noopener ugc nofollow" target="_blank">链接</a>，供新手使用。Dash 是由 plotly 的人制作的，所以你可以得到很棒的文档和产品。我学会了如何在不到两个小时的时间内为时间序列仪表板制作这个应用程序，不是想吹牛，就是这么简单。下面是应用程序的代码。我使用了 dash 网站上<a class="ae me" href="https://dash.plotly.com/installation" rel="noopener ugc nofollow" target="_blank">本</a>教程中的基础应用模板组合。因此，打开您最喜欢的代码编辑器，如 Spyder，将下面的代码作为 app.py 保存在与您的新 venv 文件夹相同的目录中。csv 文件。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="107d" class="lx ly iq lt b gy lz ma l mb mc">import dash<br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/>import plotly.express as px<br/>import pandas as pd</span><span id="b52f" class="lx ly iq lt b gy md ma l mb mc">external_stylesheets = ['<a class="ae me" href="https://codepen.io/chriddyp/pen/bWLwgP.css'" rel="noopener ugc nofollow" target="_blank">https://codepen.io/chriddyp/pen/bWLwgP.css'</a>]</span><span id="4253" class="lx ly iq lt b gy md ma l mb mc">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><span id="a5e2" class="lx ly iq lt b gy md ma l mb mc">colors = {<br/>    'background': '#F0F8FF',<br/>    'text': '#00008B'<br/>}</span><span id="640b" class="lx ly iq lt b gy md ma l mb mc"># assume you have a "long-form" data frame<br/># see <a class="ae me" href="https://plotly.com/python/px-arguments/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/python/px-arguments/</a> for more options<br/>df = pd.read_csv("time_series_plotly.csv")</span><span id="3565" class="lx ly iq lt b gy md ma l mb mc">fig = px.scatter(df, x='Date', y='Case Count', color='County')</span><span id="d9f3" class="lx ly iq lt b gy md ma l mb mc">fig.update_layout(<br/>    plot_bgcolor=colors['background'],<br/>    paper_bgcolor=colors['background'],<br/>    font_color=colors['text']<br/>)</span><span id="eda9" class="lx ly iq lt b gy md ma l mb mc">markdown_text = '''<br/>### Texas COVID-19 Dashboard</span><span id="a6f9" class="lx ly iq lt b gy md ma l mb mc">Creator: Truett Bloxsom, [LinkedIn](<a class="ae me" href="https://www.linkedin.com/in/truett-bloxsom/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/truett-bloxsom/</a>), [github](<a class="ae me" href="https://github.com/tsbloxsom" rel="noopener ugc nofollow" target="_blank">https://github.com/tsbloxsom</a>)</span><span id="942e" class="lx ly iq lt b gy md ma l mb mc">This is my first interactive dashboard using Dash! Hope you like it!</span><span id="f222" class="lx ly iq lt b gy md ma l mb mc">This first plot is Texas COVID-19 accumulated cases by county over time</span><span id="0685" class="lx ly iq lt b gy md ma l mb mc">Source for data: [dshs.texas.gov](<a class="ae me" href="https://www.dshs.texas.gov/coronavirus/additionaldata/" rel="noopener ugc nofollow" target="_blank">https://www.dshs.texas.gov/coronavirus/additionaldata/</a>)</span><span id="1678" class="lx ly iq lt b gy md ma l mb mc">'''</span><span id="563e" class="lx ly iq lt b gy md ma l mb mc">app.layout = html.Div([<br/>    dcc.Markdown(children=markdown_text,<br/>        style={<br/>            'backgroundColor': colors['background'],<br/>            'textAlign': 'center',<br/>            'color': colors['text']<br/>        }),<br/>    <br/>    dcc.Graph(<br/>        id='example-graph',<br/>        figure=fig<br/>    )<br/>])</span><span id="cd5e" class="lx ly iq lt b gy md ma l mb mc">if __name__ == '__main__':<br/>    app.run_server(debug=True)</span></pre><p id="f1f5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在回到激活的环境，下载 dash、plotly 和 pandas:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="d735" class="lx ly iq lt b gy lz ma l mb mc">pip install &lt;package_name&gt;</span></pre><p id="9a06" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，您可以通过运行以下命令运行您的应用程序:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="e223" class="lx ly iq lt b gy lz ma l mb mc">python3 app.py</span></pre><p id="18d9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它应该是这样的:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/2555ee1b3dbfc24024f594d641c653c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NWXQnHkJrThuM0WJYMLyQ.png"/></div></div></figure><p id="c7b0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在只需复制 http 链接，粘贴到 chrome 和 boom 中即可！它应该是这样的:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/c461da81bae84d1ae122badaab821fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YEWR7rSM6PFTZJEFmujuhA.png"/></div></div></figure><p id="d343" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我更进一步，跟随 Elsa Scola 关于如何免费部署 dash 应用程序的教程。如果你只是想玩我的交互式仪表盘，你可以<a class="ae me" href="http://tsbloxsom.pythonanywhere.com/" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><p id="1584" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢您关注我的教程，并随时通过<a class="ae me" href="https://www.linkedin.com/in/truett-bloxsom/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>联系我。我总是试图获得反馈并加强我的数据科学技能，所以如果有什么我可以改进编码方式或更详细地解释一些东西，请在评论中告诉我。</p></div></div>    
</body>
</html>