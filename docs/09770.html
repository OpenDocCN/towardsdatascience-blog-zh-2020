<html>
<head>
<title>Weird &amp; Unusual SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">奇怪而不寻常的 SQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/weird-unusual-sql-627b3cc895bf?source=collection_archive---------21-----------------------#2020-07-11">https://towardsdatascience.com/weird-unusual-sql-627b3cc895bf?source=collection_archive---------21-----------------------#2020-07-11</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/e00200f6dc4ea32bcb33726d85b54fe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l8sgNI7FjXbejvo1OK2PYQ.jpeg"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">照片由<a class="ae jh" href="https://unsplash.com/@mcarsience_photography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Meagan car science</a>在<a class="ae jh" href="https://unsplash.com/s/photos/weird?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="c92a" class="ji jj jk bd b dl jl jm jn jo jp jq dk jr translated" aria-label="kicker paragraph">数据工程</h2><div class=""/><div class=""><h2 id="9c4f" class="pw-subtitle-paragraph kq jt jk bd b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dk translated">使用异常的 SQL 查询探索数据库行为</h2></div><p id="81fe" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">答</span>虽然阅读数据库理论和数据库文档是最重要的，但是<a class="ae jh" href="https://linktr.ee/kovid" rel="noopener ugc nofollow" target="_blank">通过尝试来习惯一个系统也是非常重要的</a>。为了更好地掌握 SQL，从实验开始，无止境地编写愚蠢的查询，使用查询解决数学难题，使用查询创建一个随机的国际象棋游戏等等。当然，你可能没有机会在工作中做这些事情，所以抽出时间，尤其是如果你是一名数据人员的职业生涯的早期阶段。很明显，在你自己的机器上做。</p><p id="aa90" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">了解 where 子句如何求值、子查询如何工作、排序如何工作以及空值在数据库中的行为，如果您进行实验，将会对这些内容有更深的理解。这样做也能为面试中被问到的任何棘手问题做好准备。然而，现在在面试中问一些刁钻的问题已经不太流行了。</p><div class="it iu gq gs iv mn"><a rel="noopener follow" target="_blank" href="/easy-fixes-for-sql-queries-ff9d8867a617"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd ju gz z fq ms fs ft mt fv fx jt bi translated">SQL 查询的简单修复</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">查询任何传统关系数据库的经验法则</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb jb mn"/></div></div></a></div><p id="01ef" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">首先，看看这个例子——所有的 SQL 都归结于对<code class="fe nc nd ne nf b">WHERE</code>子句的有效使用。理解它的行为是很重要的。</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nk nl l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">SQL 中整数是如何求值的！</p></figure><p id="7bac" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">当您在<code class="fe nc nd ne nf b">WHERE</code>子句中使用整数时，它表示整数，但是当您在<code class="fe nc nd ne nf b">GROUP BY</code>和<code class="fe nc nd ne nf b">ORDER BY</code>子句中使用整数时，整数表示列在结果集中的位置号(不在表中)。这是另一个让查询写得更快的懒惰伎俩。但是，建议您不要使用<code class="fe nc nd ne nf b">GROUP BY 1, 3 ORDER BY 1 DESC</code>,因为它为将来其他人编辑查询时导致错误留下了空间，特别是如果它是一个复杂的查询。一些零怎么样？</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nk nl l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">空值的行为方式！</p></figure><p id="4831" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">对于大多数数据库，您会发现一篇专门的文档讨论如何处理空值。这里有一段来自 MySQL 的官方文档，讲述了使用空值的<a class="ae jh" href="https://dev.mysql.com/doc/refman/8.0/en/working-with-null.html" rel="noopener ugc nofollow" target="_blank">，还有一段是关于空值</a>的<a class="ae jh" href="https://dev.mysql.com/doc/refman/8.0/en/problems-with-null.html" rel="noopener ugc nofollow" target="_blank">问题的信息。阅读这些内容，您会发现不能对空值使用等式或比较运算符。</a></p><div class="it iu gq gs iv mn"><a rel="noopener follow" target="_blank" href="/how-to-avoid-writing-sloppy-sql-43647a160025"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd ju gz z fq ms fs ft mt fv fx jt bi translated">如何避免编写草率的 SQL</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">让您的 SQL 代码更易读、更容易理解</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="nm l my mz na mw nb jb mn"/></div></div></a></div><p id="9170" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">继续前进。理解逻辑运算符对于编写 SQL 查询非常重要。大多数 SQL 引擎支持所有主要的局部运算符，如 AND、or、NOT、XOR。尽管我们在 where 子句中没有看到它们的替代项，但我们绝对可以编写这样的查询——</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nk nl l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">逻辑运算符&amp;波浪号的使用</p></figure><p id="6478" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我在这里有了一些有趣的发现。对整数使用波浪号将从数据库中可能的最大整数中减去该数字，并返回结果。但是如果单独选择<code class="fe nc nd ne nf b">~</code>，会给你一个错误。关于 and 和&amp; &amp;的可互换性，建议您在整个代码库中使用 AND 而不是&amp; &amp;或反之亦然，以便具有良好的可读性。否则会很混乱。还有，大家最喜欢的工具搜索&amp;替换不会正常工作。</p><p id="3952" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">关于逻辑运算符的另一点是，它们支持所有附带的逻辑数学。例如，<code class="fe nc nd ne nf b">SELECT NOT NOT 1</code>会给我们 1。当我们做<code class="fe nc nd ne nf b">SELECT NOT NOT 'Nice'</code>时会发生什么。这里有几个例子来演示。</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nk nl l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">以串行方式使用多个逻辑运算符</p></figure><p id="8663" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">当与数学运算符一起使用时，逻辑运算符应该用括号分隔，否则数据库引擎将无法识别逻辑运算符，并将其视为字符串，从而引发错误。</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nk nl l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">结合使用逻辑和算术运算符</p></figure><p id="7e95" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我发现这种探索数据库行为的方法非常迷人。大多数已编写的查询都使用了内置于数据库引擎中的上述原则，大多数数据库都处理空值，但是我们了解数据库实际上是如何读取和解释我们的查询的吗？我认为，为了更深入地理解数据库，人们必须经历这样的随机查询。它们就像数学难题，但显然非常简单。</p><p id="6cb0" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">几乎所有支持 SQL 的数据库都是如此。我已经在这里写下了—</p><div class="it iu gq gs iv mn"><a rel="noopener follow" target="_blank" href="/the-many-flavours-of-sql-7b7da5d56c1e"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd ju gz z fq ms fs ft mt fv fx jt bi translated">SQL 的多种风格</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">2020 年的 SQL 前景会是怎样的？它的未来会是怎样的？</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="nn l my mz na mw nb jb mn"/></div></div></a></div></div></div>    
</body>
</html>