<html>
<head>
<title>Ranking Categories with Power BI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Power BI 对类别进行排名</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ranking-categories-with-power-bi-846fbe88ced0?source=collection_archive---------5-----------------------#2020-08-18">https://towardsdatascience.com/ranking-categories-with-power-bi-846fbe88ced0?source=collection_archive---------5-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="03c7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 MS Power BI 可视化前 n 个类别和其他类别</h2></div><p id="e8de" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我最近开始更频繁地使用 Power BI，并且我已经从这个工具中学到了很多东西。</p><p id="39ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我原以为从一个更加面向代码的角度出发会让我更容易处理像 Power BI 这样的工具，但是无论如何，改变总是令人不舒服的。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/9418e9e99004817269e573592c0b2aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*92NquDcvlTwQGlsA.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated"><a class="ae lu" href="https://pixabay.com/illustrations/brain-heart-balance-emotion-3017071/" rel="noopener ugc nofollow" target="_blank">插图</a>来自<a class="ae lu" href="https://pixabay.com/users/DamianNiolet-7379422/" rel="noopener ugc nofollow" target="_blank">达米安尼奥莱</a></p></figure><p id="5a50" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你习惯于面向业务的解决方案，那么学习如何编码以及必须对你的可视化的几乎每个方面负责将是一件痛苦的事情。如果您来自代码领域，您将不得不习惯新工具的局限性，不得不适应最初的想法，并创建变通方法。</p><p id="d8dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我将分享我最近面临的一个挑战，以及我找到的表示分组和排序数据的解决方案。</p><p id="bc6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是 Power BI 的新手，我希望你能从我这里学到一些东西，如果你是这个工具的专家，也许你可以嘲笑我的错误，并为我的下一个项目提供一些指导。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="00e7" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">请求</h2><p id="8d12" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">最初的任务听起来很简单。客户希望按类别查看计数。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi na"><img src="../Images/36f0e3f15c4fc57c0600b24c2b9109de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewS_TO4_4NVUietnvHDLYg.png"/></div></div></figure><p id="fe41" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">问题是，他们有太多的类别，他们只想看到 n 个类，所有其他的值都归在一个类别中。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="58cd" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">计算排名</h2><p id="26e4" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">对于这个例子，我将使用来自 Kaggle 的<a class="ae lu" href="https://www.kaggle.com/jeffreybraun/chipotle-locations" rel="noopener ugc nofollow" target="_blank"> Chipotle 位置数据集</a>。由于它与我处理的数据集有相似的字段，我想我可以用它来说明我所面临的问题。</p><p id="005f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">加载数据集后，我做的第一件事是获取计数，我将使用位置作为我们想要可视化的类别。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="eea7" class="mc md it nc b gy ng nh l ni nj">Count = COUNT(chipotle_stores[location])</span></pre><p id="62d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用我的领域和措施，我得到了类似的东西。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nk"><img src="../Images/032041b561cddfbb009de955cb7f802e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARwNiE0JrD314XY303TUnQ.png"/></div></div></figure><p id="8f09" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，太多的类别在我们的数据集中只有一个外观。</p><p id="ddbc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我添加了一个对值进行排序的度量。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="0afe" class="mc md it nc b gy ng nh l ni nj">rank = RANKX(ALLSELECTED(chipotle_stores[location]),[Count],,DESC)</span></pre><p id="dcef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我将新的度量作为工具提示添加到图表中，并能够控制使用过滤器显示多少类别。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/0148821a19a17c9ca7a06933b591d629.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*YO7Dxc_IUBbUIGzNE5nayA.png"/></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/00f9fcf79f9a746c5787c5cc122625b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zp02jpChmBiI0-nxmwBwnw.png"/></div></figure><p id="84df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太好了，我们可以可视化排名值，并在我们的 viz 中选择我们想要的前 n 个类别。</p><p id="43ef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">剩下要做的就是找出一种方法，将列表之外的所有内容进行分组，并显示为另一个条形。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8098" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">情况</h2><p id="284a" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">一旦我们有了排名的计算，我们可以添加一个条件。</p><p id="ae4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我创建了下面的方法，想法是如果等级低于 n，它应该返回各自的名称，否则它应该带标题“其他类别”</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="4546" class="mc md it nc b gy ng nh l ni nj">top_n_others =</span><span id="1a37" class="mc md it nc b gy nn nh l ni nj">var ranked = RANKX(ALLSELECTED(chipotle_stores[location]),[Count],,DESC)</span><span id="d06d" class="mc md it nc b gy nn nh l ni nj">return if(ranked &lt;= 10, SELECTEDVALUE(chipotle_stores[location]), "Other Categories")</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9afba37a49e0216a3ebc5327e921da11.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*RQ84h1TEAr-MaeSsk_D2wg.png"/></div></figure><p id="58ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">厉害！问题是。</p><p id="9dd4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们不能用度量作为条形图的轴——所以，是的——那是一种浪费。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8996" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们使用计算列而不是度量值会怎么样？</p><p id="6987" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那是我的下一次尝试。我创建了一个维度来保存该位置的不同值，并应用了与之前相同的计算。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="6ad3" class="mc md it nc b gy ng nh l ni nj">top_n_others =</span><span id="4b75" class="mc md it nc b gy nn nh l ni nj">var ranked = RANKX(ALL(location[location]),[Count],,DESC)</span><span id="b25c" class="mc md it nc b gy nn nh l ni nj">return if(ranked &lt;= 10, location[location], "Other Categories")</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi np"><img src="../Images/2f937689b06f263210c928dfa0a7e244.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*KTfZxMyN-UQ2L_jmpYm_gQ.png"/></div></figure><p id="e970" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它起作用了，我们可以把它用在条形图上。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nq"><img src="../Images/3168c17c30888a783c9a1e592a2117ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_Yem2cf1PbcbG6iRIOMQQ.png"/></div></div></figure><p id="8e4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太好了，还有一件事。</p><p id="332b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不得不添加更多的过滤器到我的可视化中；让我们看看当我们挑选一些州来测试它时会发生什么。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/32f76449ece58d042154c1fef3f69391.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*kQ24e99sESeTzfh1b6FNWw.png"/></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ns"><img src="../Images/6bcee5730dec624286dd36af1a7a26f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mv53XN1RKVvVpshu4_gs-g.png"/></div></div></figure><p id="59ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它不起作用。如果我们用过滤器移除一个状态，该状态中的顶部位置将会消失并且不会被替换。</p><p id="449c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里发生的情况是，计算不再是动态的，因为我们直接以列的形式计算排名，所以结果对于整个列表是静态的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="ea04" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">无关表</h2><p id="dd9c" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">好吧，我们需要重新考虑解决方案。</p><p id="61ba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们尝试调整位置维度，这一次，我们将构建一个表，不仅保存位置的不同值，还保存“其他类别”的一行。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="0d5c" class="mc md it nc b gy ng nh l ni nj">Unrelated location =<br/>UNION(<br/>    VALUES('chipotle_stores'[location]),<br/>    ROW("location","Other Categories"))</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/7ca1e33b1089f32f75a290c4f6da10ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:264/format:webp/1*Y3kDMH23QD6ikqUFkLZ9gA.png"/></div></figure><p id="8374" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们创建一个参数，这样我们就能够选择动态显示的类别数量。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/1a74049e3e716ac999a5b97886891593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*8zDem8Y5HgbTpNfuTrh7VA.png"/></div></figure><p id="7cff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们参数的度量应该是这样的。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="495b" class="mc md it nc b gy ng nh l ni nj">Top Value = SELECTEDVALUE('Top'[Top], 1)</span></pre><p id="be3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们将创建一个对类别进行排名和分组的方法。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="28dc" class="mc md it nc b gy ng nh l ni nj">topn_others =</span><span id="7c1f" class="mc md it nc b gy nn nh l ni nj">var n = CALCULATETABLE(TOPN([Top Value],VALUES(chipotle_stores[location]),CALCULATE( [Count] )))</span><span id="53a3" class="mc md it nc b gy nn nh l ni nj">var other = ROW("location", "Other Categories")</span><span id="2697" class="mc md it nc b gy nn nh l ni nj">var other_val = CALCULATE([Count], EXCEPT(VALUES(chipotle_stores[location]),n))</span><span id="11b7" class="mc md it nc b gy nn nh l ni nj">var myUnion = UNION(n,other)</span><span id="becf" class="mc md it nc b gy nn nh l ni nj">return</span><span id="45e1" class="mc md it nc b gy nn nh l ni nj">SUMX( INTERSECT('Unrelated location',myUnion),<br/>      var currentIterator = 'Unrelated location'[location]<br/>      return <br/>        IF('Unrelated location'[location] &lt;&gt; "Other Categories",<br/>        CALCULATE([Count], <br/>        chipotle_stores[location] = currentIterator)<br/>      ,other_val)<br/>)</span></pre><p id="bef9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，那上面的魔法会让我们的图表活起来。</p><p id="37f3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个想法是有一个“不相关”的表，它将使用主表中的值来填充它自己并计算它的度量。但是在其他表中没有创建实际的关系。</p><p id="2ea1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我发现并改编了这个解决方案，从<a class="ae lu" href="https://community.powerbi.com/t5/Desktop/Top-N-and-others-at-the-same-time/td-p/493040" rel="noopener ugc nofollow" target="_blank"> Power BI 社区</a>、【大喊】到<a class="ae lu" href="https://community.powerbi.com/t5/user/viewprofilepage/user-id/31" rel="noopener ugc nofollow" target="_blank"> TomMartens </a>来解决这个问题。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="5978" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看它在图表中的样子。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2aa83964a75e54df1b249b21ecb90ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*k-yjX9f3osO9WkojILe52A.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">条形图</p></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/d6ec8c3f13c58b200c40f69f7acd792d.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*FkvOmsipe9qHlfGZMxuP8g.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">斯莱伊萨</p></figure><p id="e66a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用“无关位置”作为轴，“topn_values”作为值，然后我们可以为刚刚构建的参数创建一个切片器。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nx"><img src="../Images/87a086d80bee176774359703a0656186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DCmxegOf2dS08G7i42JOxQ.png"/></div></div></figure><p id="9523" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哒哒！我们有图表。</p><p id="e925" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以更改标题、x 和 y 标签，为“其他”赋予不同的颜色，并修正我们的情节的所有细节。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ny"><img src="../Images/6a0d03316f7ec8c549ac0ea6de1498a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XU0eCdXFK0mcJcknwWSlA.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">华盛顿州排名前五的位置</p></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="32a0" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">探索其他解决方案</h2><p id="4214" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">很酷，在一些工具中可能很容易解决的问题在其他工具中可能很有挑战性。</p><p id="5028" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，这个问题有很多解决方案，这只是其中之一。</p><p id="ca27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，这将取决于你如何带来数据，你的模型是如何设计的，你能在多大程度上转换它，以及你在哪里这样做更舒服。</p><p id="88e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一位朋友发给我的另一个解决方案也是从创建一个包含所有类别的表格和一个包含其他类别的行开始的。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="71ed" class="mc md it nc b gy ng nh l ni nj">mylocation =</span><span id="9e58" class="mc md it nc b gy nn nh l ni nj">UNION(</span><span id="66ef" class="mc md it nc b gy nn nh l ni nj">VALUES('chipotle_stores'[location]),</span><span id="dc26" class="mc md it nc b gy nn nh l ni nj">ROW("location","Other Categories"))</span></pre><p id="ae6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种方法的不同之处在于创建了一个关系。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6deca63b54d490ad1433735c951c7387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*4kQwmjKTTm53SQyu31zrsw.png"/></div></figure><p id="044f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还需要一个衡量排名的标准，就像这样。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="e52e" class="mc md it nc b gy ng nh l ni nj">rank = RANKX(ALL(chipotle_stores[location]),[Count],,DESC)</span></pre><p id="17a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以及用于计算顶级类别和其他类别的度量。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="fccc" class="mc md it nc b gy ng nh l ni nj">top with others =</span><span id="e0a1" class="mc md it nc b gy nn nh l ni nj">IF( [rank] &lt;= 10,</span><span id="1d2d" class="mc md it nc b gy nn nh l ni nj">[Count],</span><span id="d2e7" class="mc md it nc b gy nn nh l ni nj">IF( SELECTEDVALUE(mylocation[location]) = "Others",</span><span id="6d8a" class="mc md it nc b gy nn nh l ni nj">SUMX( FILTER( ALL(mylocation[location]), [rank] &gt; 10), [Count])))</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="f5d6" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">结论</h2><p id="9d92" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">尽管这可能需要大量的工作，但是对类别进行分组可以让我们使用许多可视化工具，而这些工具在早期会有太多的干扰，在很多情况下是值得的。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oa"><img src="../Images/f879195ec6c7a72b2710a2855f68b0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3WXzN6tQt9l-Yl8RRiBLg.png"/></div></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/03e3cd64e2a3f77ba57e922521280df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qeKGuXJxDMKCILQQgXWfdg.png"/></div></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="ad27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读我的文章。我希望你喜欢它。</p></div></div>    
</body>
</html>