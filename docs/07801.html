<html>
<head>
<title>Analyzing lyrics from different music genres with universal sentence encoding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用通用句子编码分析不同音乐类型的歌词</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-sentence-embeddings-to-explore-the-similarities-and-differences-in-song-lyrics-1820ac713f00?source=collection_archive---------24-----------------------#2020-06-10">https://towardsdatascience.com/using-sentence-embeddings-to-explore-the-similarities-and-differences-in-song-lyrics-1820ac713f00?source=collection_archive---------24-----------------------#2020-06-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e427" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">应用谷歌的通用句子编码器和主成分分析来识别不同音乐流派的异同</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/60a8f3ba87fe309909cfff9162db7269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*laYRStNslkeZUoYt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@annietheby?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Annie Theby </a>拍摄的照片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TLDR:使用谷歌的通用句子编码器/ PCA 和 Plotly 在 3d 空间中表示歌词。点击这里玩:【https://plotly.com/~kitsamho/238/ T4】</p></figure><p id="a8b4" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi lx translated">我对音乐的持久热爱始于 1992 年，在我 12 岁的圣诞节，溺爱我的父母掏钱给我买了一台 Alba HiFi。</p><p id="2edd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">皮带传动转盘？检查！<br/>双卡带播放器？检查！<br/>带<strong class="ld iu">低音增强</strong>的图形均衡器？当然啦！</p><p id="b657" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">从那以后，我一直在听各种各样的音乐。</p><p id="a0be" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我现在快 40 岁了，在这 28 年的音乐生涯中，我加深了与音乐的关系。我是一名<a class="ae ky" href="https://youtu.be/OlCw5WQvffI?t=1881" rel="noopener ugc nofollow" target="_blank">吉他手</a>，一名 DJ，一名<a class="ae ky" href="https://soundcloud.com/honanofficial" rel="noopener ugc nofollow" target="_blank">舞曲制作人</a>。音乐以多种快乐的方式打断了我的生活——我想对你们许多人来说也是如此。</p><p id="9dfe" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">因此，尽管我觉得我(相当)有资格谈论音乐流派，但我发现很难定义它们和/或区分它们。</p><h1 id="d801" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">流派不断演变，流派是主观的</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/6dadd238d9946e59251b647423461fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kED3cWpQp4CLa5vw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jithotw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> IJ 波特温</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2574" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">划分流派的界限是模糊的，随着时间的推移，这种界限更加模糊。滚石乐队和甲壳虫乐队最初被一些人指责为魔鬼的作品，但如今却像平板家具一样成为主流。</p><p id="5ebd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><em class="mz"> * </em> <a class="ae ky" href="https://i2.wp.com/metalinjection.s3.amazonaws.com/wp-content/uploads/2013/01/Slayer-headbang.gif?resize=470%2C353" rel="noopener ugc nofollow" target="_blank"> <em class="mz">杀戮者</em> </a> <em class="mz">在位至尊为恶魔的作品仅供参考。\m/ </em></p><h1 id="414b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">流派被操纵</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/06abc6ac8cfbefceb008f8601fc4d3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oicKYtVWfCXcIeSy"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@huntersrace?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">猎人赛跑</a>的照片</p></figure><p id="f084" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当商业利益盖过真实性时(几乎总是令人难过)，就可以制造“类型”。这些人为的标签被唱片公司用来锁定客户群以获得商业优势，有时以某种方式反映出<a class="ae ky" href="https://www.rollingstone.com/music/music-features/labels-ditch-urban-1011593/" rel="noopener ugc nofollow" target="_blank">社会中更深层次的缺陷。</a></p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="a77a" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">那么我们有什么方法可以衡量流派呢？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/a85f1f3cbed7ee07cb73c464297249b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T9vbOo6Rr2e6YGrk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">威廉·沃比在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a404" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">很明显，流派分类可能是主观的、有争议的，甚至可能是徒劳的——毕竟，好音乐就是好音乐，对吗？</p><p id="47fc" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">然而，我想说至少有两种有效的方法来区分不同的流派:一首歌的音乐性和歌词。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="fe84" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">这音乐听起来像什么？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/94b4cf4e2004bfde4fafde3f5020427d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qvLCiYBY7xzxEjEA"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@www_erzetich_com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Blaz Erzetic </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="961c" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">是不是…</p><ul class=""><li id="7708" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw nu nv nw nx bi translated">直播还是测序？(摇滚 vs. Techno？)</li><li id="a38e" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">大声还是安静？(Dubstep vs. Chillout？)</li><li id="f39d" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">不协和还是有旋律？(痛击金属 vs 灵魂？)</li><li id="eac2" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">可预见还是不可预见？(流行与爵士？)</li></ul><h1 id="a646" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">音乐在说什么，它是如何被表达的？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/ee6b2c91cf05e0275a2c740d743290c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cPVvkQByRk_KVg4h"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@vidarnm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">维达尔·诺德里-马西森</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><ul class=""><li id="85f6" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw nu nv nw nx bi translated">歌词是否基于某种情绪(如悲伤、快乐、愤怒)？</li><li id="7882" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">歌词是在说<strong class="ld iu">话题</strong>(爱情、失去、战争、不公、压迫、死亡)吗？</li></ul><p id="f392" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">对于这个项目，我想特别关注歌曲作者在歌曲中使用的歌词和语言。</p><p id="e6f5" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们都觉得抒情的内容因流派而异。但是有没有一种方法可以定量地测量这个呢？</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="1cd0" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">项目目标</h1><blockquote class="oe"><p id="360f" class="of og it bd oh oi oj ok ol om on lw dk translated">不同流派的歌词之间存在差异，我们可以量化和衡量这一点！</p></blockquote><h1 id="a3f6" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz oo ka ms kc op kd mu kf oq kg mw mx bi translated">挑战和方法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/8fe70b2d6b1c59133d0cef11f76e8913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mU7u19x1CSDtaC3f"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@pperkins?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕特里克·帕金斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h2 id="3248" class="or mh it bd mi os ot dn mm ou ov dp mq lk ow ox ms lo oy oz mu ls pa pb mw pc bi translated">我们从哪里获得数据？</h2><ul class=""><li id="d561" class="np nq it ld b le pd lh pe lk pf lo pg ls ph lw nu nv nw nx bi translated">我们将从<strong class="ld iu">Musixmatch.com</strong>搜集歌词，这是一个免费网站，拥有大量准确的歌词内容</li></ul><h2 id="8444" class="or mh it bd mi os ot dn mm ou ov dp mq lk ow ox ms lo oy oz mu ls pa pb mw pc bi translated">什么样的方法/度量将允许我们以直观的方式量化抒情多样性？</h2><ul class=""><li id="ae4f" class="np nq it ld b le pd lh pe lk pf lo pg ls ph lw nu nv nw nx bi translated">我们将使用来自<strong class="ld iu">谷歌通用句子编码器</strong>的高维向量来表示歌词</li><li id="972d" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">我们将应用<strong class="ld iu">主成分分析(PCA) </strong>将这些高维表示降低到 n=1，2，3 维</li></ul><h2 id="f9cf" class="or mh it bd mi os ot dn mm ou ov dp mq lk ow ox ms lo oy oz mu ls pa pb mw pc bi translated">我们如何以一种有意义的方式将它可视化？</h2><ul class=""><li id="8779" class="np nq it ld b le pd lh pe lk pf lo pg ls ph lw nu nv nw nx bi translated">我们将使用<strong class="ld iu"> Plotly </strong>并建立一个简单的情节和更复杂的 2d 和 3d 散点图的组合，以查看歌词的相似之处和不同之处</li></ul><p id="97cb" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">我的 GitHub </strong> <a class="ae ky" href="https://github.com/kitsamho/songlyrics_univeral_sentence_encoder" rel="noopener ugc nofollow" target="_blank"> <strong class="ld iu">这里</strong> </a>有所有笔记本和全部原始数据</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="53e1" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">获取数据</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/6d8af7c33304379d07d55c99cdaf0291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGf2udFBWod4C_585gwEYw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.musixmatch.com/" rel="noopener ugc nofollow" target="_blank">https://www.musixmatch.com/</a></p></figure><p id="84bb" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了准备这个项目，我发现很难在网上找到准确的歌词来源。歌曲要么不完整，要么可用的音量不够全面。</p><p id="cc95" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Musixmatch.com 似乎是少数几个遗址之一:</p><ol class=""><li id="fb54" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw pj nv nw nx bi translated">有很多内容。</li><li id="2e5a" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw pj nv nw nx bi translated">相当准确。</li></ol><p id="db56" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">所以让我们把它作为我们的数据源。</p><p id="063d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Musixmatch 有一个开发者 API，我们可以用它来获取歌词数据，但他们只允许你一天打 2k 个电话，而且你只能玩每首歌 30%的歌词。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/0791a791a9262ec085bf496b334cbbf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*4fZDaJeR1MNB9bugAAqJ8A.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资料来源:Giphy</p></figure><p id="ae5b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们通过结合使用<strong class="ld iu">请求</strong>和<strong class="ld iu"> HTML 解析</strong>来解决这个问题。这是一个“浏览器外”的过程，因此我们可以轻松实现多线程来加快进程。这意味着我们可以在更短的时间内获得更多的内容。</p><p id="3981" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我在下面写了一个 Python 类，它包含了为艺术家提取歌词内容的所有方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Musixmatch.com 的 Python scraper 类</p></figure><h2 id="4549" class="or mh it bd mi os ot dn mm ou ov dp mq lk ow ox ms lo oy oz mu ls pa pb mw pc bi translated">运行铲运机</h2><p id="d833" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">你所需要做的就是用一个 Musixmatch 艺术家 URL 和一个流派标签来实例化这个类…</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="5809" class="or mh it pq b gy pu pv l pw px">scraper = MusixmatchScraper('<a class="ae ky" href="https://www.musixmatch.com/artist/Jack-Johnson'" rel="noopener ugc nofollow" target="_blank">https://www.musixmatch.com/artist/Jack-Johnson'</a>,'folk')</span></pre><p id="a5dd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">..然后调用<code class="fe py pz qa pq b">self.Run()</code>方法启动刮刀。</p><p id="b63a" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu"> <em class="mz">告诫</em> </strong> <em class="mz"> —如果你想刮很多歌词，在可能的情况下，你应该轮换你的 IP 地址。如果你向 Musixmatch.com 发出太多请求，你的 IP 地址将会被屏蔽，尽管只是暂时的。我发现在这种情况发生之前，你可以删除 c.250 歌曲。</em></p><h1 id="2651" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">刮多个艺术家</h1><p id="b13c" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated"><code class="fe py pz qa pq b">MusixmatchScraper()</code>的编码方式允许你抓取<strong class="ld iu">一个</strong>艺术家的内容。如果你想得到多个艺术家，你可以像这样创建一个循环:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">抓取多位艺术家的歌词</p></figure><p id="6ef3" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">该类返回一个熊猫数据帧，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qb"><img src="../Images/0b04bc5f8f43d446fe5c28eaabb71221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyeDxfymTHccTb9c_gzB7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例数据帧输出</p></figure><p id="5b1e" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">太好了，现在我们有数据了。让我们研究一下数据，看看我们有什么。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="7ffa" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">探索性数据分析</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qc"><img src="../Images/86ecfc7be2eefca8156a8ac343cbafeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JR8Dz0sAXwklk6hQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·切瑟</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e134" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在我们开始看句子嵌入之前，让我们用 Plotly 来激发一些简单的情节。</p><h1 id="a497" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">熊猫&amp; Plotly</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qd"><img src="../Images/0800cb33a8cdb658d9076f3a4b8c680d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_nmMH3FexAnHJdYWpxP7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资料来源:www.plotly.com</p></figure><p id="1bd4" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">比起其他任何东西，我通常更喜欢视觉化的情节。它们看起来更好，具有交互性，你可以使用<a class="ae ky" href="https://plotly.com/chart-studio/" rel="noopener ugc nofollow" target="_blank"> Plotly Chart Studio </a>轻松管理和分享它们。唯一的缺点是它需要相当多的代码(和许多嵌套的字典！)从 Plotly 中获得有用的东西，当你只想快速浏览数据时，这很烦人。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/a77f3516f5c62b843a29cf4d3d3e29d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/1*863QBXPBBMWumi416-emPA.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">资料来源:Giphy</p></figure><p id="1530" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我推荐的一件事是<strong class="ld iu">将 Plotly 更新到至少 4.8 </strong>，因为熊猫现在可以使用<strong class="ld iu"> Plotly 作为后端绘图的库</strong>，而不是“审美受损”的 Matplotlib。</p><p id="858f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在下面的代码块中——我们可以通过将<code class="fe py pz qa pq b">.plot.bar()</code>添加到 DataFrame 对象中，从 Pandas DataFrame <strong class="ld iu">中生成一个简单的条形图。</strong></p><p id="58c2" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">简单如 123，abc！</p><p id="0fb0" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><code class="fe py pz qa pq b">pd.DataFrame([1,2,3],['a','b','c']).plot.bar()</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qf"><img src="../Images/d5c6029e28cdfd4a46b937e87d5b2745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auoDqt6cOFipFZlEdz_9kg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Plotly 后端输出示例</p></figure><p id="c475" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果你想的话，你可以调整你的图形的外观和感觉，通过使用你通常用在<strong class="ld iu"> Plotly Graph Objects </strong>上的相同参数，这样就有了额外的熟悉的灵活性。</p><p id="1f7b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">好了，回到这个项目...</p><h1 id="4478" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我们有哪些流派和艺术家？</h1><p id="39f6" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">我决定从一系列流派中挑选歌词，有些流派比其他流派更极端，以便看看我们是否能看到差异，但我也选择了非常重叠的流派，看看是否有共性。</p><p id="7d60" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们看看每个流派有多少首歌曲。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="8ce2" class="or mh it pq b gy pu pv l pw px">#plot genres<br/>fig_genre = pd.DataFrame(df.genre.value_counts()).plot.bar(template='ggplot2')</span><span id="da27" class="or mh it pq b gy qg pv l pw px">#title parameters<br/>title_param = dict(text='&lt;b&gt;Count of Genre&lt;/b&gt;&lt;br&gt;&lt;/b&gt;', <br/>                        font=dict(size=20))</span><span id="c0b1" class="or mh it pq b gy qg pv l pw px">#update layout<br/>fig_genre.update_layout(title=title_param,<br/>                  width=1000,<br/>                  height=500,        <br/>                  xaxis = dict(title='Genre'),<br/>                  yaxis = dict(title='Count'))</span><span id="81cb" class="or mh it pq b gy qg pv l pw px">#change the colour<br/>fig_genre.update_traces(marker_color='rgb(148, 103, 189)')</span><span id="6e36" class="or mh it pq b gy qg pv l pw px">#show plot<br/>fig_genre.show()</span></pre><p id="f3a4" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">每一种类型都有相当好的表现——至少足以进行有意义的比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qh"><img src="../Images/d9aafc67137bd0d4154792c44c727c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*1MetqmAJPjAr8L5WcMiMcQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这里的原剧情:<a class="ae ky" href="https://chart-studio.plotly.com/~kitsamho/240/#/" rel="noopener ugc nofollow" target="_blank">https://chart-studio.plotly.com/~kitsamho/240/#/</a></p></figure><p id="e779" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">按流派划分的艺术家呢？</p><p id="3252" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们带着一些视觉化的东西进城，创建一个流派和艺术家的旭日图。如果想和剧情互动，原剧情的链接在脚注里。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/965c2cf0ecf846f56994b8bca7bd9562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GKJhko_-uAz6zNrEO0vdTg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这里互动剧情:【https://plotly.com/~kitsamho/254/ T2】</p></figure><p id="dfa2" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我有一系列的乐队和艺术家，我觉得他们代表了这些流派。你可能不同意我的观点。没关系，流派的定义可能会有争议。</p><h1 id="84ff" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">歌词长度有区别吗？</h1><p id="a3fd" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">让我们按体裁来探讨歌词长度。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="c510" class="or mh it pq b gy pu pv l pw px">#get lyric frequencies for each song<br/>df['lyric_count'] = df['lyrics'].map(lambda x: len(x.split()))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qj"><img src="../Images/d37f305f2ee39417ff45f16c18e1ae1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Us7JiWXWDEQky_V5Ldqn0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">此处原创剧情:【https://chart-studio.plotly.com/~kitsamho/244】T4</p></figure><p id="f557" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Hip-hop 是一个非常抒情的流派——许多描述 hip-hop 歌词数量的关键描述性指标都不同于所有其他流派。</p><p id="fa26" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当我们分析那些歌词的内容时，看看那些歌词的<em class="mz">内容</em>是否也不同，这将是很有趣的。这很方便地把我带到了 EDA 的下一部分——词性(PoS)分析。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="da33" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">词性分析</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/19e36e3f9c94eb4e63d073bdfb382d10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3Tsxt8Eh0__2IgG4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="4181" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">所以下一件有趣的事情是理解这些歌词的内容。为了做到这一点，我将使用空间模型将歌词内容分类到其相关的词类中，即分类歌词中的哪些词是名词、动词、形容词等等。这将使我们对不同体裁的抒情内容的差异有更多的了解，并可能暗示相似和不同之处。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="8cc4" class="or mh it pq b gy pu pv l pw px">import spacy</span><span id="2b60" class="or mh it pq b gy qg pv l pw px">#load spacy model<br/>nlp = spacy.load('en_core_web_sm')</span><span id="d495" class="or mh it pq b gy qg pv l pw px">def pos(string,pos):<br/>    <br/>    """Returns any token that qualifies as a specific part of speech"""<br/>    <br/>    doc = nlp(string) #fit model<br/>    <br/>    return ' '.join(list(set([i.text for i in doc if i.pos_ == pos]))) #return any tokens that qualify</span></pre><p id="b78b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们在一个循环中调用上面的函数，并获得包含所有有用词类的新列。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="0e02" class="or mh it pq b gy pu pv l pw px">#get nouns<br/>pos_of_interest = ['NOUNS','VERBS','ADJ','ADV]</span><span id="5314" class="or mh it pq b gy qg pv l pw px">#loop through each PoS<br/>for pos in pos_of_interest:<br/>      df[pos] = df.lyrics.map(lambda x: pos(x,pos))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qk"><img src="../Images/e2152657ccc074b0cdf6de36c959f4fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aprODhxOzp3j_6pUtyls9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PoS 的示例数据帧输出</p></figure><h1 id="47c4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">最常见的单词</h1><p id="c6d7" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">下面是一个计算字符串中最常见标记的函数。我们可以用它来分析一首歌中最常见的词，包括我们刚刚制作的词表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计算字符串中最常见单词的函数</p></figure><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="e639" class="or mh it pq b gy pu pv l pw px">#call the function on one gram<br/>musixmatch_mostcommon(df.lyrics,token=1).head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ql"><img src="../Images/679d0cda0aa8268d8efbdfaa18b962e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*3M9aLshTokYHHhD0W05Zcw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例数据帧输出</p></figure><p id="52b1" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">更有用的是找到一种方法，在所有的体裁和不同的词类中使用这种功能。一种有效的方法是使用树形图可视化。Plotly 对此有一个很好的模板，所以我构建了一个函数来完成这项工作。</p><h1 id="8e9c" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">树形图可视化</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在 Plotly 中创建树形图可视化的函数</p></figure><p id="8f17" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们调用该函数并查看输出</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="b48c" class="or mh it pq b gy pu pv l pw px">noun_treemap = musixmatch_genremap(df,pos='nouns')</span></pre><p id="2e6b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">警告</strong>——其中一些歌词很露骨</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qj"><img src="../Images/9692b3c823c57d38f2c16e9846916a6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYxWc_eDN1TjhvKe_TF3SA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这里互动剧情:【https://plotly.com/~kitsamho/246/ T2】</p></figure><p id="98ad" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果你使用的是台式机，我强烈建议你访问树状图脚注中的链接(如上),以便与之互动。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="a4a7" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">通用句子编码</h1><p id="ec11" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">现在我们开始真正有趣的部分——使用<strong class="ld iu">向量</strong>来代表我们的歌词。然后，我们可以使用各种技术来显示哪些向量/歌词是相似的或不同的。</p><h1 id="ebc0" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">什么是向量表示？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/f663fd45082a8408df4e956dda56a9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QyixZ9Y-SsFeX2iR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="48ca" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">单词的向量表示对于自然语言处理来说是一个重大的进步。试图“理解”语言的早期方法通常涉及计数单词(例如单词袋模型或加权模型/ TFIDF 方法)。这些方法的局限性在于它们没能抓住语言的语境。毕竟，<em class="mz">‘孩子弄坏滑板’</em>这句话和<em class="mz">‘滑板弄坏孩子’的意思很不一样……</em>尽管有相同的类型和字数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/b36b133d141ea8d43dc2198c66e8ffb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*C8ATouZA1OreMnnPTVZz8g.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:Giphy——孩子玩滑板</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qn"><img src="../Images/c4bd349ecd6f2426350fac6b7553cf46.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/1*iRbJijG5Q8nZmymfLHUOUQ.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:Giphy——滑板断了孩子</p></figure><p id="1454" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Tomas Mikolov 等人的 Word2vec 是游戏规则的改变者，因为单词不再基本上表示为计数，而是表示为高维向量。这些向量，或者说<strong class="ld iu">嵌入</strong>，是通过在文本语料库上训练一个简单的神经网络而产生的。这些单词嵌入表示一个单词与相邻单词的<strong class="ld iu">关系，因此也表示其上下文。因此，单词“walking”和“walked”的向量将比单词“swimming”和“swam”更相似。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qo"><img src="../Images/d3c67f3b236f9033acfa39dbbc849644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OEmWDt4eztOcm5pr2QbxfA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://developers.google.com/machine-learning/crash-course/embeddings/translating-to-a-lower-dimensional-space" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/machine-learning/crash-course/embeddings/translating-to-a-lower dimension-space</a></p></figure><p id="006e" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果你想了解这方面的更多信息，我建议你阅读<a class="ae ky" href="https://papers.nips.cc/paper/5021-distributed-representations-of-words-and-phrases-and-their-compositionality.pdf" rel="noopener ugc nofollow" target="_blank">原始白皮书</a>或<a class="ae ky" href="https://kitsamho.github.io/trustpilot-nlp-explore-content/#" rel="noopener ugc nofollow" target="_blank">我与 ASOS 评论在 TrustPilot 上做的一个项目</a>。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="2903" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">谷歌的通用句子编码器</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qp"><img src="../Images/5f83fd7330e339eb885bcd905d80eed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cBLomt7la5i2yREwVH9_kw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:https://tfhub.dev/google/universal-sentence-encoder/ 4</p></figure><p id="ba85" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在这个项目中，我们将使用<strong class="ld iu">谷歌的通用句子编码器</strong>，这是一种经过数百万(可能数十亿)人训练的最先进的编码器？)的文档。</p><p id="9a1a" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">它就像 word2vec，但使用了类固醇。</p><blockquote class="qq qr qs"><p id="d56e" class="lb lc mz ld b le lf ju lg lh li jx lj qt ll lm ln qu lp lq lr qv lt lu lv lw im bi translated">通用语句编码器将文本编码成高维向量，这些向量可用于文本分类、语义相似性、聚类和其他自然语言任务。</p><p id="7582" class="lb lc mz ld b le lf ju lg lh li jx lj qt ll lm ln qu lp lq lr qv lt lu lv lw im bi translated">该模型针对大于单词长度的文本进行训练和优化，例如句子、短语或短段落。它在各种数据源和各种任务上接受训练，目的是动态适应各种各样的自然语言理解任务。</p></blockquote><p id="0451" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">来源:【https://tfhub.dev/google/universal-sentence-encoder/】T44</p><p id="6c42" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果你想了解更多关于这个模型的信息，我强烈建议你阅读关于<a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/1" rel="noopener ugc nofollow" target="_blank"> TensorFlow hub </a>的文档，因为它涵盖了更多的细节。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="c18c" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">在我们的歌词数据上使用谷歌通用句子编码器</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qw"><img src="../Images/b429a5d694452c34b69805c3d5e2ff2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*QLvZzPvNge4ivYabLXis7w.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/1" rel="noopener ugc nofollow" target="_blank">https://tfhub.dev/google/universal-sentence-encoder/</a>4</p></figure><p id="3549" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们使用 Tensorflow Hub 加载模型..</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="f3c9" class="or mh it pq b gy pu pv l pw px">#get universal sentence encoder<br/>USE = hub.load("<a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/4" rel="noopener ugc nofollow" target="_blank">https://tfhub.dev/google/universal-sentence-encoder/4</a>")</span></pre><p id="2d24" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们写一个简短的函数，它可以使用这个模型获得任何字符串输入的高维向量。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="d65c" class="or mh it pq b gy pu pv l pw px">def getUSEEmbed(_string,USE = USE):<br/>    <br/>    """Function takes a string argument and returns its high dimensional vector from USE"""<br/>    <br/>    return np.array(USE([_string])[0])</span></pre><p id="431a" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们得到一个简单句子的向量…</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="f044" class="or mh it pq b gy pu pv l pw px">example = getUSEEmbed('Hello how are you?')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qx"><img src="../Images/1e0e0616f3817fd42f1fd0606d10e0a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uZlbZYW2ficYpK3zx7EqjA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">高维向量表示“你好吗？”</p></figure><p id="47f9" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如你所见，一个简单的句子现在已经被编码成一个形状为(512，)的高维向量</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="ff87" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">评估向量之间的相似性和差异</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qy"><img src="../Images/975959b1fbeb9ffe2d34b35aea38933e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UQp0S6Pz2_JGR_9l"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗兰克·麦肯纳在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6740" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这个项目的基石是想办法<strong class="ld iu">找到歌词的异同</strong>。当我们将歌词编码成向量表示时，我们需要使用一些技术来让我们<strong class="ld iu">找到向量的相似性和差异性</strong></p><p id="6085" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们可以通过以下方式做到这一点:</p><ol class=""><li id="c0d6" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw pj nv nw nx bi translated">使用<strong class="ld iu">余弦相似度</strong></li><li id="843c" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw pj nv nw nx bi translated">维度<strong class="ld iu">缩减和可视化</strong>(使用类似主成分分析的东西)</li></ol></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="de6f" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">余弦相似性</h1><p id="a1d3" class="pw-post-body-paragraph lb lc it ld b le pd ju lg lh pe jx lj lk pm lm ln lo pn lq lr ls po lu lv lw im bi translated">通常，当我们拥有连续的低维数据时，我们会使用类似欧几里德距离的东西来衡量相似性/差异。我们将把这个距离度量用于类似 KNN 分类器的东西，或者甚至在聚类维数减少的向量时，例如在 PCA 之后。</p><p id="d2d1" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">然而，因为我们来自句子编码器的向量具有非常高的维度，那么使用<strong class="ld iu">余弦相似度</strong>是一个比欧几里德距离更好的接近度度量，至少开始是这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qz"><img src="../Images/f3eba044465cf1595925bfe0cecb42c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/0*T8voFy16oUOVeK-P.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">余弦相似度将相似度计算为两个向量的归一化点积/来源:【https://en.wikipedia.org/wiki/Cosine_similarity T4】</p></figure><p id="9e8f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">余弦相似度越接近 1，意味着两个向量之间的差异最小(输入字符串<strong class="ld iu">相似</strong>)，而余弦相似度越接近 0，意味着两个向量非常不同(输入字符串<strong class="ld iu">不同</strong>)</p><p id="b3ef" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我给你看一个有四个句子的例子。</p><p id="14f7" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">其中两个是关于<strong class="ld iu">天气的..</strong></p><ul class=""><li id="f50e" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw nu nv nw nx bi translated"><em class="mz">“今天天气会很暖和”</em></li><li id="1d13" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated"><em class="mz">“今天将是一年中阳光最充足的一天”</em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/42a786a0380adb5308b6925db75852e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PCIV-bJqjn6EKj7c"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@shimikumi32?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">清水久美子</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="2d01" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">另外两个是关于<strong class="ld iu">早餐</strong></p><ul class=""><li id="e672" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw nu nv nw nx bi translated"><em class="mz">“我喜欢我的鸡蛋单面煎”</em></li><li id="c8a3" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated"><em class="mz">“早餐是我最喜欢的一餐”</em></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ra"><img src="../Images/50ddf74c7060b289088f7210e6f89a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mO5p5TsvDe2bxHa0"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@wilhelmgunkel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·冈克尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="53bd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我特别选择了一些例子，在这些例子中，单词“sunny”/“sunniest”被用作隐喻和形容词。让我们看看编码是否能捕捉到这种差异。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="73a3" class="or mh it pq b gy pu pv l pw px">#some example sentences<br/>example_sentences = ["The weather is going to be really warm today",<br/>                     <br/>                     "Today is going to be the sunniest day of the year",<br/>                     <br/>                     "I like my eggs sunny side up",<br/>                     <br/>                     "Breakfast is my favourite meal"]</span><span id="df23" class="or mh it pq b gy qg pv l pw px">#get embeddings for each example sentence<br/>embed = [getUSEEmbed(i) for i in example_sentences]</span><span id="2545" class="or mh it pq b gy qg pv l pw px">#set up a dictionary where each sentece is a key and its value is its 512 vector embedding<br/>dic_ = dict(zip(example_sentences,embed))</span><span id="71ad" class="or mh it pq b gy qg pv l pw px">#let's find all the unique pairwise sentence combinations<br/>combo = [list(i) for i in itertools.combinations(example_sentences, 2)]</span></pre><p id="3ae1" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在我们需要一个函数来计算相似度。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="d211" class="or mh it pq b gy pu pv l pw px">def cosineSimilarity(vec_x,vec_y):<br/>    <br/>    """Function returns pairwise cosine similarity of two vector arguments"""<br/>    <br/>    return cosine_similarity([vec_x],[vec_y])[0][0]</span></pre><p id="9b3b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们制作一个数据框架，映射每个独特句子对的余弦相似度。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="c2d5" class="or mh it pq b gy pu pv l pw px">#empty list for data<br/>cs = []</span><span id="e9f2" class="or mh it pq b gy qg pv l pw px">#lop through each unique sentence pairing<br/>for i in range(len(combo)):<br/>    <br/>    #get cosine similarity for each<br/>    cs_ = cosineSimilarity(dic_[combo[i][0]],dic_[combo[i][1]])<br/>    <br/>    #append data to list<br/>    cs.append((combo[i][0],combo[i][1],cs_))</span><span id="13e3" class="or mh it pq b gy qg pv l pw px">#construct DataFrame<br/>cs_df = pd.DataFrame(cs,columns['sent_1','sent_2','cosine_similarity']).\<br/>                    sort_values(by='cosine_similarity',ascending=False)</span></pre><p id="7f86" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们检查数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rb"><img src="../Images/40ccb6e56a06c388246abc40dec6ba5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VjkhCWvIzGIVa7UV97ycA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">比较四个句子的余弦相似度</p></figure><p id="f3f7" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这太酷了。<strong class="ld iu">最相似的句子有更多的相似向量</strong>(余弦相似度 0.41 / 0.51)。即使使用一个作为隐喻和形容词的词有歧义，编码也是足够不同的。让我们看看是否可以将这一点应用到我们的歌词中。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="9605" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">获取每首歌曲的嵌入</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rc"><img src="../Images/40ecabbe776da73189616fd07a3ed2fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lwKH5fdg1s17Bbqk"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@nosoycesar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">塞萨尔·马丁内斯·阿吉拉尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="770b" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">首先，我们需要得到每首歌的向量。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="806d" class="or mh it pq b gy pu pv l pw px">#get USE embeddings for each song<br/>df_embed = pd.DataFrame([getUSEEmbed(df.lyrics[i]) for i in range(df.shape[0])],\<br/>                        index=[df.song[i] for i in range(df.shape[0])])</span></pre><p id="6679" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">用<code class="fe py pz qa pq b">df_embed.head(5)</code>检查数据帧</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rd"><img src="../Images/537cfe6ffdb5fcb097a3205363d440f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLlVlmRwpmKmgek4PIXPag.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">每首歌曲的向量—高维度/列</p></figure><p id="a839" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们使用另一种数据简化技术— <strong class="ld iu">主成分分析</strong>，来减少这些嵌入的维度，同时保留尽可能多的方差。</p><p id="d4ed" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我构建了一个全面的函数来完成这项工作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PCA 函数将维数减少到 n=1，2，3 个分量</p></figure><p id="d30f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们调用这个函数并获得三个新的数据帧。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="b383" class="or mh it pq b gy pu pv l pw px">pc_1 = musixmatch_PCA(df,df_embed,n_components=1)<br/>pc_2 = musixmatch_PCA(df,df_embed,n_components=2)<br/>pc_3 = musixmatch_PCA(df,df_embed,n_components=3)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi re"><img src="../Images/a9d8927a7cc19937cbbf08bd917b088a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXa9Wg4wARvsFHhA3Pe8cQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例数据帧输出</p></figure><p id="fb61" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们来做一些分组，探讨一下哪些艺人的歌词彼此最相似。</p><p id="7fea" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">正如我们所看到的——即使只有一个组成部分，不同流派的艺术家也倾向于聚集在一起。死亡金属、重金属和摇滚彼此略有不同，但与流行音乐和灵魂乐有很大不同。这是有道理的。</p><p id="ec34" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果你熟悉这些乐队，当你向下滚动时，你会对流派如何演变有强烈的感觉，我们可以在主成分 1 的变化中看到这一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/cbc193a9b8a0f3879ddfb24ca0ac1a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CNouCnbDklt7QpW-FjPxYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">此处原创剧情:<a class="ae ky" href="https://chart-studio.plotly.com/~kitsamho/248" rel="noopener ugc nofollow" target="_blank">https://chart-studio.plotly.com/~kitsamho/248</a></p></figure><p id="19c3" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们看看同样的分析，但是<strong class="ld iu">是按流派分组的。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/c64a28c927439f945a3d302bd4d0ebdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CX9fNaCasIgZqZK0A0arNg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">此处原创剧情:<a class="ae ky" href="https://chart-studio.plotly.com/~kitsamho/248" rel="noopener ugc nofollow" target="_blank">https://chart-studio.plotly.com/~kitsamho/248</a></p></figure><p id="6bb5" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这个平均视图证实了我们上面的怀疑。</p><p id="458e" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们做一个更复杂的可视化，使用散点图来显示这些数据。</p><p id="1599" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们可以在二维空间(PC1、PC2)中观察，也可以在三维空间(PC1、PC2、PC3)中观察</p><p id="0318" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">下面的函数将上面的一些函数与一些更复杂的 Plotly 函数结合起来，生成二维(PC1 / PC2)或三维(PC1 / PC2 / PC3)散点图</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pl la l"/></div></figure><p id="ab19" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们调用函数，看看情节是什么样的。同样，我强烈建议你点击页脚处的剧情链接，如果你想和所有类型互动，以及它们在剧情中的位置。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="5f40" class="or mh it pq b gy pu pv l pw px">scatPlot_2 = musixmatch_scatplot(df,df_embed,n_components=2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/6a0e91cdbb8dd79b2f7656efd6ea58dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XqVETsAFFYcmhFU57pv6pQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">互动剧情点击这里:<a class="ae ky" href="https://plotly.com/~kitsamho/236/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/~kitsamho/236/</a></p></figure><p id="a2ef" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们也可以创建一个类似的图，但是利用 PCA 的 3 个维度。</p><pre class="kj kk kl km gt pp pq pr ps aw pt bi"><span id="c5c3" class="or mh it pq b gy pu pv l pw px">scatPlot_3 = musixmatch_scatplot(df,df_embed,n_components=3)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/1e2b6a85db065743f2be925855b97b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0ZECpsXZURdKbfpxT0ibA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">互动剧情点击这里:<a class="ae ky" href="https://plotly.com/~kitsamho/238/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/~kitsamho/238/</a></p></figure></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="4e5d" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">结论</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rf"><img src="../Images/03290d5a9309c595d1d35cd0a904a44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1avlqIjtJw36w-7B"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@alx_andru?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历克斯</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="f404" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们已经表明，不同音乐流派的歌词确实有所不同，尽管有趣的是，当我们以逐步的方式从一种流派转移到另一种流派时，歌词内容之间有着非常明显的关系。我认为下面的形象化很清楚地将这一点带到了生活中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/c64a28c927439f945a3d302bd4d0ebdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CX9fNaCasIgZqZK0A0arNg.png"/></div></div></figure><p id="28cc" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">不同流派的<strong class="ld iu">歌词并不完全相互排斥</strong>——除非你比较两个极端。也就是说，死亡金属和灵魂乐之间有很大的区别，但区别流行音乐和流行摇滚的方式却很少。</p><p id="f2b6" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这些发现反映了音乐的真实本质，因为音乐类型是不固定的，对于每一种类型，都可能有一种“邻近的”类型在抒情内容上是相似的。</p><p id="80d5" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">毕竟很多 r&amp;b/soul 的粉丝也会喜欢 pop…..但也许不是朋克和/或金属？</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="5aa3" class="mg mh it bd mi mj ni ml mm mn nj mp mq jz nk ka ms kc nl kd mu kf nm kg mw mx bi translated">应用程序</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi rg"><img src="../Images/903b6dcbeb47ebec3c76a7896adeee84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9q3cMB2g6PJkEm2j"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="bb2f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们已经表明，通用句子编码/迁移学习是一种非常强大和非常简单的技术，可以用来找出不同流派歌词的差异和相似之处。</p><p id="51a6" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">它在其他问题上的应用有很多:</p><ul class=""><li id="c8ad" class="np nq it ld b le lf lh li lk nr lo ns ls nt lw nu nv nw nx bi translated"><strong class="ld iu">歌曲/歌词推荐系统</strong> —使用相似性度量来查找具有相似歌词的歌曲</li><li id="7f03" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated"><strong class="ld iu">通过查找相似的文档(如电子邮件、客户反馈/评论)对大量文本进行分段</strong></li><li id="9729" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">识别<strong class="ld iu">抄袭</strong></li><li id="a766" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">用作<strong class="ld iu">分类任务</strong>的特征</li></ul><p id="7993" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">感谢您的阅读，如果您想进一步交流，请联系我们！我把笔记本保存在 GitHub 上，所有代码都准备好了，可以在其他项目中使用。如果有，请告诉我，我很想看。</p><p id="df2d" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">萨姆（男子名）</p><h1 id="1681" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">参考和链接</h1><ul class=""><li id="6a24" class="np nq it ld b le pd lh pe lk pf lo pg ls ph lw nu nv nw nx bi translated">[1] GitHub(含 Jupyter 笔记本):<a class="ae ky" href="https://github.com/kitsamho/songlyrics_univeral_sentence_encoder" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/kitsamho/song lyrics _ univeral _ sentence _ encoder</a></li><li id="1cd2" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">【2】美汤:<a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></li><li id="39e3" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">[3]谷歌通用句子编码器:<a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/4" rel="noopener ugc nofollow" target="_blank">https://tfhub.dev/google/universal-sentence-encoder/4</a></li><li id="4335" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">[4]阴谋地:<a class="ae ky" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank">https://plot.ly/python/</a></li><li id="91cc" class="np nq it ld b le ny lh nz lk oa lo ob ls oc lw nu nv nw nx bi translated">[5]musix match . com:【https://www.musixmatch.com/ T2】</li></ul></div></div>    
</body>
</html>