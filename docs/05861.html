<html>
<head>
<title>Forecasting in a Spare Parts Business</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">备件业务中的预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/forecasting-in-a-spare-parts-business-45437cadf195?source=collection_archive---------23-----------------------#2020-05-14">https://towardsdatascience.com/forecasting-in-a-spare-parts-business-45437cadf195?source=collection_archive---------23-----------------------#2020-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="92c2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">有句话说，未来就在我们眼前一寸。永远在附近，但永远在前方。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/162d8a9931a67cf3a764e0d24c181ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2BgYIK_ARzwZeXOA"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·塞勒在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9f0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，一个<strong class="lb iu"> R预测</strong>管道用几种统计方法创建，每天为每个零件运行，以支持自动补货系统。像<strong class="lb iu">加法霍尔特-温特斯</strong>、<strong class="lb iu">指数平滑</strong>、<strong class="lb iu">克罗斯顿</strong>和<strong class="lb iu">脸书预言家</strong>这样的方法被组合起来，以输出每个零件和下一个需求周期的需求预测。作为未来的工作，其他方法，如LSTM，可以实施和分析，以改善预测，如果适用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="20cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">业务背景和现状</h1><p id="ad77" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">备件业务有其自身的挑战:</p><ol class=""><li id="0ad8" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">客户非常迫切，要求立即供货(他们的客户大多是车主，还记得你上次去汽车修理厂吗？这通常不是一件愉快的事。)</li><li id="0ecb" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">大多数零件在单位时间内销量很小(甚至没有销量)——间歇性需求</li><li id="88cd" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">该企业拥有庞大的产品组合(在多品牌零件批发商中甚至更多)，每个品牌拥有超过200，000种不同的零件</li></ol><p id="e3f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这三个问题增加了<strong class="lb iu">库存积压</strong>和<strong class="lb iu">低库存周转率</strong>的问题，并且与批发商规模成反比:小型零件企业更容易受到这些问题的影响。</p><p id="e8d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了这些挑战之外，其他挑战也确实存在，但对其他企业来说更为普遍:</p><ol class=""><li id="cedd" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><strong class="lb iu">需求可变性</strong>:更好或更便宜或两者兼而有之的替代产品，客户偏好的变化(如配件市场备件份额的增加)或季节性(保险杠和其他车身部件在冬季的销量增加，而不是在夏季之前的过滤器和其他维护)</li><li id="33c3" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">上游供应链的变化和<strong class="lb iu">中断</strong> : <strong class="lb iu"> </strong> PSA整合了批发商的数量，并收购/合资了其他品牌，如欧宝和菲亚特集团，采购集团整合，非欧盟基金收购大型欧洲公司，黑天鹅事件，如COVID global issue</li><li id="f103" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">电子商务和市场:永久的“沉睡的巨人”一直潜伏在一个迄今为止仍然是传统的市场中，对于一个迫切需要整合的市场来说，参与者的数量仍然太多</li></ol></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c8fa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">预测简介</h1><p id="5775" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我先讲一个关于未来的故事:它不会完全是你预测的那样！你越想在粒度的基础上预测，你能得到的误差就越大。</p><p id="56af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在商业方面，这并不意味着你应该忽略它。平均而言，你只需要比竞争对手做得<strong class="lb iu">好一点，从长远来看，你将拥有<strong class="lb iu">的竞争优势</strong>。</strong></p><p id="6aac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个业务问题，我使用了4种方法:</p><ul class=""><li id="79a0" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nn nf ng nh bi translated">指数平滑法</li><li id="6c8a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">加法霍尔特-温特斯</li><li id="8297" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">克罗斯顿</li><li id="14a2" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">脸书先知</li></ul><p id="fb34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他城市(ARIMA、LSTM)也可以加入进来，但为了简洁明了，我们选择从这些城市开始。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3c5d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">预测方法</h1><h2 id="da88" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">指数平滑法</h2><p id="6737" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">指数平滑法是由Charles C. Holt在20世纪50年代末引入的。基本概念是在移动平均窗口的<strong class="lb iu">序列中构建时间序列，然后将最近的窗口置于旧窗口之上</strong>。加权方法是指数产生良好的预测。</p><blockquote class="oa ob oc"><p id="94eb" class="kz la od lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated">指数平滑是一种使用指数窗口函数平滑时间序列数据的经验法则。在简单移动平均中，过去的观察值被同等地加权，而指数函数被用于分配随时间按指数递减的权重。</p><p id="dd47" class="kz la od lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/Exponential_smoothing" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Exponential_smoothing</a></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/a38c89e7ac468f0810ccd849ab4dd6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*YeBOh7P1iODWkZEtG-BoSA.png"/></div></figure><h2 id="0cf1" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">加法霍尔特-温特斯</h2><p id="5936" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这种方法是对霍尔特之前工作的改进。它是由Peter R. Winters <strong class="lb iu">加上季节性</strong>开发的，也被称为三重指数平滑法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/d8e34d20afe4ecb02a431092d3e67226.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*DhcagTFnwxNG13fg-3IOaw.png"/></div></figure><h2 id="281d" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">克罗斯顿</h2><p id="ed35" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">该书于1972年出版，书名为“间歇需求的预测和库存控制”，它解决了指数平滑积压的问题，方法是仅在发生的时间段内对发生的情况进行平均，然后乘以发生的概率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/f7eea51f7b0515fb21a741b3fb7a42bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*zLHxr6cP_xmv3jYMYrH8Xw.png"/></div></figure><p id="dfea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的是，它不能处理负销售额(如果总额为负，则向客户进行发票贷记)。在预测特定备件时，您必须意识到这一点。</p><h2 id="d025" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">脸书先知</h2><blockquote class="oa ob oc"><p id="b022" class="kz la od lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated">Prophet是一种基于加法模型预测时间序列数据的过程，在该模型中，非线性趋势与每年、每周和每天的季节性以及假日影响相适应。它最适用于具有强烈季节效应的时间序列和几个季节的历史数据。Prophet对缺失数据和趋势变化非常稳健，通常能够很好地处理异常值。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/50522baa7f17fafde03f3b7af2242e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*bSzr9CHX2cCeW5xBKG0lGQ.png"/></div></figure><p id="195d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法发表于2017年(比我们使用的前三种方法更近)，我们研究它的原因是，除了完全自动化的<strong class="lb iu"/>之外，它<strong class="lb iu">还考虑了日历效应</strong>(像假期)。</p><p id="4eeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不利的一面是，数据接收与前三种不同，迫使开发另一种数据提取过程。此外，对于我们的业务案例，它比其他的要慢得多<strong class="lb iu">，迫使我们重建/升级一些服务器软件组件。它在生产中的实现有更大的障碍。</strong></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c984" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">预测的准备工作</h1><h2 id="461a" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">替代</h2><p id="82df" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">备件业务有很多替代品。一个零件从sku A开始，变化到B，到C(或回到A)…对任何想要一个干净方法的人来说都是一团糟。</p><p id="db59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代用于:</p><ul class=""><li id="7be3" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nn nf ng nh bi translated">用一部分代替另一部分</li><li id="98e6" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">由于工程变更，需要用新版本替换的过时零件</li></ul><p id="1d86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要一个函数，它可以为一个零件获取它的替代链。由于使用了<a class="ae ky" href="https://mariadb.com/kb/en/recursive-common-table-expressions-overview/" rel="noopener ugc nofollow" target="_blank">递归公共表表达式</a>，它可以获得链中的所有部分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ee961b0192d1b21231318eeedde7eb67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*5OTioj9yKywKpc_EUlfXUQ.png"/></div></figure><p id="ca33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从替代的表格视图中，我们可以得到一个列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/d56cb194b72e69a3c0f2758d89e38a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*Rsa0igmZ2KFy-MFaL4Et5Q.png"/></div></figure><h2 id="154a" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">提前期和预测期</h2><p id="8040" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这也许是一个更难解决的问题。对于由多个供应商供应(具有不同的交付周期)的每个零件，有必要评估主要供应商(如果存在多个供应商)并相应地进行预测。</p><p id="0ebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设供应商A的补货提前期为1周(从订单到进货后的库存可用性)，我们可以预测n个周期，每个周期1周。另一方面，如果供应商B的零件需要一个月才能交货，那么它的预测期也应该是一个月。</p><p id="d019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了本文的简洁，所做的分析将假设1个月的时间(生产方法在每个供应商/品牌的基础上有可变的交付周期)。</p><h2 id="ae97" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">将表格销售数据转换为时间序列</h2><p id="8e21" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">几乎每个销售数据源都以表格的形式出现。你会得到这样的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/e956f3c55dd93895e47ad28d3278124d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*dvMwsAswkFpnj5rIqsUJUw.png"/></div></figure><p id="66e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于预测目的，有必要将此结构更改为时间序列(例如，使用月度时段的单个sku注意2018年9月出现的负值):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/34bd1e5cb3ba797ca744cffef8751af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*LNutqrBWgKqP8QvkyLXSVA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/cffea8c56c5083ff43b0419777b29be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*qQqjzSMQsrc-FQ-x8v2heg.png"/></div></figure><p id="0650" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要从表格转换为序列，只需在数据库中“分组”时间段:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/6701e21c5b5699c67de7ec2c04b15925.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*9qJIeH_zVxf_P7nDUV_X1w.png"/></div></figure><h2 id="c652" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">用于预测的最低可行产品</h2><p id="546d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，使用数据，我们需要设置它的预测方面。为此我们使用了R(感谢非凡的库<a class="ae ky" href="https://github.com/robjhyndman/forecast" rel="noopener ugc nofollow" target="_blank"> forecast </a>)，但是你也可以使用Python或者其他解决方案。</p><p id="cf36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加所需的库并连接到数据库:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b1f74f7b7d9d5c8e318857ac86528e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*hJT5b0sHEhqOTv4tS7h8_g.png"/></div></figure><p id="c6c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从数据库中获取数据:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/faf35c4dc26e61ecdfa0c32d7bdc3ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RHOe7hs1UzLtyuerboXcVw.png"/></div></div></figure><p id="bbcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据数据创建时间序列:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/bb2be116a6aaafd3783f6d53846c169c.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*IhwpG2kX64e9N3_FDVo8Yw.png"/></div></div></figure><p id="eebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尝试第一次预测(仅在没有负面事件发生时适用于克罗斯顿):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/1078801ea4daf1dc5c4c57adb69c1cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*TjkJre-h0gNUj4fvvuvT0A.png"/></div></figure><p id="5e83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使如此，如果您选择使用Croston，您可以将负面事件归零(请在比较预测方法时考虑，因为您正在更改其中一种方法的数据):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/0f41b40ad5f15a37e71b87125a2e6e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:324/format:webp/1*tTRKgigACbxCkLfaUeOlEg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/2a97dbea7fbed6f0a92cfb869221bf12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Q3Tu1EoEUFroavedgA7Rg.png"/></div></div></figure><p id="e8c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看着图表，我们倾向于选择前面的霍尔特-温特斯(其他的似乎“太平”)。但是，对于这个用例，只有对“下一个时期”的预测是重要的，因为我们将重复地做它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/a380c8a10062cff2a09e2eebb8aef67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*DJ0jNfGw-G0blfxN9ovu5g.png"/></div></figure><p id="8ec1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有方法都导致类似的结果，2020年1月平均售出4或5台，并且“Hi 95”区间达到18或13。</p><p id="3168" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先知呢？</p><p id="f20a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我提到的，Prophet数据摄入有点不同。首先，它需要每日数据，头必须是'<strong class="lb iu"> ds </strong>和'<strong class="lb iu"> y 【T3 ':</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/bc23b0231a923d4973d29e377c48a829.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/1*y8JQKVilzaPzHkMNV0bu7w.png"/></div></figure><p id="08ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要改变我们的数据源SQL。类似这样的事情会发生:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/ec8d8344f894cd0b53a36ff807c6a30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*Gvi1AaTtxffucYEW-fI-LA.png"/></div></figure><p id="0616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(如果你注意到了，我们正在将负面事件归零。模型中还有一个我们可以使用的特性，叫做“饱和最小值”。)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/da66e342c8a118debea2b163fb898bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*V-Oc-VN4KXWAZM4d6xaKBA.png"/></div></figure><p id="b8ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">获得下一期的预测只是跟踪预测:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/f9ca90fb0276279d312658ebabe66593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*rVMHW5DcymaWHBGVNtdrrQ.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c03e" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">解决生产预测问题</h1><p id="76c7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在我们有了一个工作的MVP，是时候把它投入生产了。对于那些仍在内部使用IT基础设施的人来说，计算相对便宜。服务器已经在那里了，大部分时间都在闲置，乞求做一些有用的事情。</p><p id="b3cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于我们的数据集(+50.000 sku)，对每个sku进行4次预测很容易就需要一整天以上的时间。我给你一个提示:先知应该为此负责😊</p><p id="c05b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是有一些策略可以用来减少花费的时间:</p><h2 id="3c77" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">1.并行计算</h2><p id="fc87" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是减少时间的最佳选择。按照仓库、品牌或任何其他标准来划分工人。请注意，组的基数相等通常意味着它运行得更快(结束得更快),因为它避免了一个延迟的组拥有比其他组更多的SKU。</p><p id="5863" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以使用的另一种方法是将Prophet与其他人分开。这样，由于数据采集是不同的，其他的将会很快结束。请注意，一些Prophet预测是长期运行的，数据库连接/事务可能会在数据库端关闭。</p><p id="86a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，并行计算有两个问题需要解决:</p><ul class=""><li id="7174" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu nn nf ng nh bi translated">如果您的方法是让工作器在没有任何顺序的情况下获取数据块，那么有必要强制执行一些数据库锁。</li><li id="0017" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu nn nf ng nh bi translated">当最后一名选手结束时，你需要给这个项目的合奏部分发信号(下一章会有更多的介绍)。</li></ul><h2 id="5579" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">2.仅对前一天销售或购买的零件进行每日计算</h2><p id="234d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">该选项是另一种快捷方式😊。如果您的补货订单每天都有，前一天未售出/未购买的零件“可能”会减少他们的库存预测(请对此持保留态度，因为当季节性等其他问题生效时，这在数学上是不正确的)。</p><p id="eb17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种解决方案的优点是还减少了与每天售出的不同零件(平均)数量相关的因素所做的计算。如果你有50，000个SKU，而你平均每天只卖出/买入5，000个，那么你就减少了90%的计算量。</p><p id="6a71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你选择使用这种策略，我建议每周/每月进行一次全面跑步。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3e9b" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">对于给定日期的给定备件，使用哪种预测方法</h1><p id="b4a7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，我们有一个渠道在每个零件上运行4个不同的预测，我们应该选择哪一个？</p><p id="8ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几个概念可以帮助你选择(我不能在这里说得太详细):</p><ol class=""><li id="455a" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">库存不足比库存过多更贵吗？也就是说，利益相关者更重视缺失的部分还是过多库存的成本？这个问题的答案有助于你选择更保守的方法。在这一点上，克罗斯顿往往做得很好。</li><li id="65ab" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">选择返回较低MAPE(平均绝对百分比误差)或MSE(均方误差)的方法。平均而言，ETS表现最差。</li><li id="7f08" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">通过使用MAPE对库存不足进行+20%的惩罚(如果实际值减去预测值为负)来综合前两种方法。</li></ol><p id="e8d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这也许是这个项目更商业的一面。这实际上取决于你试图预测的潜在原因是什么:是数学准确性还是商业优势。👍</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f860" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">总结</h1><p id="7e34" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">从所做的工作来看，克罗斯顿和霍尔特-温特斯都做得很好。ETS是表现最差的模型，而Prophet的计算强度更大，没有为7天、15天或30天的预报提供足够的优势。</p><p id="012c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在自动订单管道上完成工作后，预测方将估计的销售额反馈给它，并允许一个完整的自动化库存管理。</p><p id="5087" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！全部完成！新的挑战在别处等待着我们！！！👏</p></div></div>    
</body>
</html>