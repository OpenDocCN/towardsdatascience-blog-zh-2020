<html>
<head>
<title>Manage your Python Virtual Environment with Conda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Conda管理您的Python虚拟环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/manage-your-python-virtual-environment-with-conda-a0d2934d5195?source=collection_archive---------2-----------------------#2020-02-04">https://towardsdatascience.com/manage-your-python-virtual-environment-with-conda-a0d2934d5195?source=collection_archive---------2-----------------------#2020-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b8c2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">轻松在Python 2和Python 3环境之间切换</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f13945b060d5b7c6daee9409186aa5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTjYJjQtPjptnQK10KUvIQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼斯·帕夫洛维奇在<a class="ae ky" href="https://unsplash.com/s/photos/python-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>的照片</p></figure><p id="2d9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然Python 2正式弃用(Python 3，你的时代就是现在！)，我相信在将这些项目完全移植到Python 3之前，我们中的一些人仍然必须维护现有的Python 2项目。</p><p id="0c96" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将向您展示如何使用<a class="ae ky" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Conda </a>来管理您的Python虚拟环境。Conda是一个包和环境管理系统，它允许我们在本地机器上轻松地创建和切换环境。</p><h1 id="8993" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用Conda环境</h1><p id="d1a6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我将使用macOS中的iTerm终端。如果您从未将Conda环境路径添加到您的Windows环境变量中，windows用户将不得不使用<code class="fe ms mt mu mv b">Anaconda Prompt</code>。</p><h2 id="cace" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated"><strong class="ak"> 1。显示康达环境信息</strong></h2><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="023a" class="mw lw it mv b gy nm nn l no np">% conda info</span></pre><p id="998a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显示当前Conda安装的信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/28e7fca8da4e69363a38c7f776397d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3laoxveTV1npR3CG0PJhQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">macOS上的iTerm终端显示conda信息</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/1113db125da2d37dde6995be7357cf65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOCwh0Ltb_DObjeYC-1MIA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">窗口上显示conda信息的Anaconda提示符</p></figure><h2 id="538c" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">2.列出所有现有环境</h2><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="5297" class="mw lw it mv b gy nm nn l no np">(base) username % conda env list</span><span id="b3e0" class="mw lw it mv b gy ns nn l no np"># conda environments:<br/>#<br/>base                  *  /Users/username/opt/anaconda3<br/>py2                      /Users/username/opt/anaconda3/envs/py2</span></pre><p id="7612" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe ms mt mu mv b">conda env list</code>列出所有现有的Python环境。<code class="fe ms mt mu mv b">*</code>将指向当前的活动环境。<code class="fe ms mt mu mv b">base</code>始终是您打开终端时的默认活动环境。<code class="fe ms mt mu mv b">py2</code>是我的Python 2项目的另一个虚拟环境。</p><h2 id="b906" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">3.创造新环境</h2><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="df83" class="mw lw it mv b gy nm nn l no np">(base) username % conda create --name project-env python=3.7</span></pre><p id="3fc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您想要为您的新项目创建一个虚拟环境，我们可以使用<code class="fe ms mt mu mv b">conda create</code>来创建一个名为<code class="fe ms mt mu mv b">project-env</code>的新环境。我们还可以在创建环境时指定Python版本。</p><p id="52fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建新环境后，您可以运行<code class="fe ms mt mu mv b">conda env list</code>来检查您的新环境。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="98c3" class="mw lw it mv b gy nm nn l no np">(base) username % conda env list</span><span id="25ca" class="mw lw it mv b gy ns nn l no np"># conda environments:<br/>#<br/>base                  *  /Users/username/opt/anaconda3<br/>project-env              /Users/username/opt/anaconda3/envs/project-env<br/>py2                      /Users/username/opt/anaconda3/envs/py2</span></pre><p id="aa85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">康达创造的环境总是位于<code class="fe ms mt mu mv b">/Users/.../anaconda3/envs/</code>。您可以使用以下命令更改默认位置，但不鼓励这样做。Conda不能再通过你的环境名找到你的环境，你必须指定环境的完整路径才能每次激活它。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="9e98" class="mw lw it mv b gy nm nn l no np">(base) username % conda create --prefix /path/project-env</span></pre><h2 id="ddb0" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">4.激活你的新环境</h2><p id="87df" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如您所见，您已经成功地创建了新Python环境。现在我们必须激活并使用它。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="518c" class="mw lw it mv b gy nm nn l no np">(base) username % conda activate project-env</span><span id="192e" class="mw lw it mv b gy ns nn l no np">(project-env) username %</span></pre><p id="3aeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">(project-env)</code>表示当前的活动环境。</p><p id="d00c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<code class="fe ms mt mu mv b">conda list</code>来显示这个环境中的所有包。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="aefd" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda list</span><span id="e75a" class="mw lw it mv b gy ns nn l no np"># packages in environment at /Users/username/opt/anaconda3/envs/project-env:<br/>#<br/># Name                    Version                   Build  Channel<br/>ca-certificates           2020.1.1                      0<br/>pip                       20.0.2                   py37_1<br/>python                    3.7.6                h359304d_2<br/>readline                  7.0                  h1de35cc_5<br/>setuptools                45.1.0                   py37_0<br/>...<br/>...</span></pre><p id="dfef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">conda list</code>还支持修订历史。在环境中管理您的包是一个非常有用的特性。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="c2d3" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda list --revision</span><span id="2c88" class="mw lw it mv b gy ns nn l no np">2020-02-03 00:01:32  (rev 0)       # new environment<br/>    +ca-certificates-2020.1.1<br/>    +pip-20.0.2<br/>    +python-3.7.6<br/>    +readline-7.0<br/>    +setuptools-45.1.0<br/>...</span><span id="47cf" class="mw lw it mv b gy ns nn l no np">2020-02-03 00:24:55  (rev 1)       # installed numpy<br/>    +blas-1.0<br/>    +intel-openmp-2019.4<br/>    +libgfortran-3.0.1<br/>    +mkl-2019.4<br/>    +mkl-service-2.3.0<br/>    +mkl_fft-1.0.15<br/>    +mkl_random-1.1.0<br/>    +numpy-1.18.1<br/>    +numpy-base-1.18.1<br/>    +six-1.14.0</span><span id="0748" class="mw lw it mv b gy ns nn l no np">2020-02-03 22:14:24  (rev 2)      # installed configparser<br/>    +configparser-3.5.0</span></pre><p id="f99d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，仅仅因为你更新/安装了一个新的包，你就不小心搞砸了你的依赖关系。修订历史允许您将环境回滚到以前的版本。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="cdcd" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda install --revision 1</span><span id="0aee" class="mw lw it mv b gy ns nn l no np">## Package Plan ##</span><span id="83ab" class="mw lw it mv b gy ns nn l no np">environment location: /Users/username/opt/anaconda3/envs/project-env</span><span id="e76f" class="mw lw it mv b gy ns nn l no np">added / updated specs:<br/>    - configparser<br/>    - numpy<br/>    - python=3.7</span><span id="7b79" class="mw lw it mv b gy ns nn l no np">The following packages will be REMOVED:</span><span id="c6d8" class="mw lw it mv b gy ns nn l no np">configparser-3.5.0-py37_0</span></pre><p id="16cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">configparser</code>已被成功移除。可以用<code class="fe ms mt mu mv b">conda list — revision</code>再检查一遍。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="17d7" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda list --revision</span><span id="33d3" class="mw lw it mv b gy ns nn l no np">2020-02-03 00:01:32  (rev 0)       # new environment<br/>    +ca-certificates-2020.1.1<br/>    +pip-20.0.2<br/>    +python-3.7.6<br/>    +readline-7.0<br/>    +setuptools-45.1.0<br/>...</span><span id="c825" class="mw lw it mv b gy ns nn l no np">2020-02-03 00:24:55  (rev 1)       # installed numpy<br/>    +blas-1.0<br/>    +intel-openmp-2019.4<br/>    +libgfortran-3.0.1<br/>    +mkl-2019.4<br/>    +mkl-service-2.3.0<br/>    +mkl_fft-1.0.15<br/>    +mkl_random-1.1.0<br/>    +numpy-1.18.1<br/>    +numpy-base-1.18.1<br/>    +six-1.14.0</span><span id="83df" class="mw lw it mv b gy ns nn l no np">2020-02-03 22:14:24  (rev 2)     # installed configparser<br/>    +configparser-3.5.0</span><span id="3b21" class="mw lw it mv b gy ns nn l no np">2020-02-03 22:17:02  (rev 3)     # reverted to rev 1<br/>    -configparser-3.5.0</span></pre><h2 id="feff" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">4.停用/更改您的活动环境</h2><p id="12ab" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">您可以随时使用<code class="fe ms mt mu mv b">conda activate</code>或<code class="fe ms mt mu mv b">conda deactivate</code>在您的环境之间切换。您可以使用<code class="fe ms mt mu mv b">conda activate</code>直接激活您想要使用的环境。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="f74a" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda activate base<br/>(base) username ~ %</span></pre><p id="7536" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">conda deactivate</code>将停用您当前的活动环境，并更改为默认环境，即<code class="fe ms mt mu mv b">base</code>环境。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="64bd" class="mw lw it mv b gy nm nn l no np">(project-env) username ~ % conda deactivate<br/>(base) username ~ %</span></pre><h2 id="7227" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">5.移除您的环境</h2><p id="0cb0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当您使用完该环境并希望删除它时。可以使用<code class="fe ms mt mu mv b">conda env remove</code>移除环境。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="053f" class="mw lw it mv b gy nm nn l no np">(base) username ~ % conda env list</span><span id="116b" class="mw lw it mv b gy ns nn l no np"># conda environments:<br/>#<br/>base                  *  /Users/username/opt/anaconda3<br/>project-env              /Users/username/opt/anaconda3/envs/project-env<br/>py2                      /Users/username/opt/anaconda3/envs/py2</span></pre><p id="20e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与create一样，您必须使用<code class="fe ms mt mu mv b">--name</code>指定您希望删除的环境的名称。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="4a67" class="mw lw it mv b gy nm nn l no np">(base) username ~ % conda env remove --name project-env</span><span id="6656" class="mw lw it mv b gy ns nn l no np">Remove all packages in environment /Users/junetao/opt/anaconda3/envs/project-env:</span></pre><p id="91f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ms mt mu mv b">project-env</code>已从您的环境中成功删除。</p><pre class="kj kk kl km gt ni mv nj nk aw nl bi"><span id="9baa" class="mw lw it mv b gy nm nn l no np">(base) username ~ % conda env list<br/># conda environments:<br/>#<br/>base                  *  /Users/junetao/opt/anaconda3<br/>py2                      /Users/junetao/opt/anaconda3/envs/py2</span></pre><h2 id="66a8" class="mw lw it bd lx mx my dn mb mz na dp mf li nb nc mh lm nd ne mj lq nf ng ml nh bi translated">6.奖金！在VS代码中改变你的环境。</h2><p id="fb33" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你和我一样是Visual Studio代码爱好者，你可以在没有任何命令行的情况下更改你创建的Python环境。</p><ul class=""><li id="7053" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated">点击VS代码左下角的<code class="fe ms mt mu mv b">Python 3.7.4</code>。</li><li id="4f57" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">选择首选环境。</li><li id="59fe" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">搞定了。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/4f7c90ab375450e2dbeb10640065b8c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9i5nKUeQQrb7epqSNG-3Pg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在VS代码中更改Python环境</p></figure><p id="e45f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经学会了如何用Conda管理你的Python环境。如果我犯了任何错误或打字错误，请给我留言。干杯！</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><p id="d3d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如果你喜欢读这篇文章，你可能也会喜欢这些:</strong></p><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/how-to-send-email-with-attachments-by-using-python-41a9d1a3860b"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">如何使用Python发送带附件的电子邮件</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">作为一名数据分析师，我经常会收到这样的请求:“你能每周给我发一份报告吗？”或者…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div><div class="op oq gp gr or os"><a rel="noopener follow" target="_blank" href="/best-spyder-alternative-vs-code-de0d9a01c8b5"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">最佳Spyder替代方案— VS代码</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">如果你是Spyder或R Studio的粉丝，你一定会喜欢Visual Studio代码。</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg ks os"/></div></div></a></div><p id="1031" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">你可以在Medium上找到我其他作品的链接，关注我</strong> <a class="ae ky" href="https://medium.com/@chingjunetao" rel="noopener"> <strong class="lb iu">这里</strong> </a> <strong class="lb iu">。感谢阅读！</strong></p></div></div>    
</body>
</html>