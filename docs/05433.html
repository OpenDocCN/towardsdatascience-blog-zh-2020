<html>
<head>
<title>Amazon Forecast: Predicting Monthly Rainfall Patterns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">亚马逊预报:预测月降雨模式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/amazon-forecast-predicting-monthly-rainfall-patterns-ebbb172b1182?source=collection_archive---------35-----------------------#2020-05-07">https://towardsdatascience.com/amazon-forecast-predicting-monthly-rainfall-patterns-ebbb172b1182?source=collection_archive---------35-----------------------#2020-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b4c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">亚马逊预测使用机器学习工具来提供时间序列预测。如果使用得当，这个平台可以非常有效地做出明智的时间序列预测。</h2></div><p id="7861" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个例子中，我们来看看如何使用亚马逊预测来预测降雨数据。</p><p id="9762" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正在讨论的数据集包括 722 个月的降雨数据。爱尔兰新港的降雨量数据来源于英国气象局网站。</p><h1 id="cc2f" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">数据处理</h1><p id="3267" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">要用 Amazon Forecast 建立预测模型，首先需要对时间序列数据进行如下配置:<em class="mc"> metric_name，timestamp，metric_value </em>。</p><h2 id="2f3f" class="md lg it bd lh me mf dn ll mg mh dp lp kr mi mj lr kv mk ml lt kz mm mn lv mo bi translated">格式化</h2><p id="95a3" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">这是原始的时间序列:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/1c102cbe56c862182592ecdc21370a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/0*fRon-_th1BTHYXGK.png"/></div></figure><p id="2688" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如上格式化后，以下是新的时间序列:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/110ab387fd93a6fe5275f824828eda29.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/0*NQZNuTdh6fG-uN1c.png"/></div></figure><h2 id="af10" class="md lg it bd lh me mf dn ll mg mh dp lp kr mi mj lr kv mk ml lt kz mm mn lv mo bi translated">创建 IAM 角色</h2><p id="88a5" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">要将这些数据从 S3 加载到 Amazon Forecast 中，请确保创建一个具有必要权限的 IAM 角色:</p><p id="e2ef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦 S3 系统中的数据格式正确，就可以上传数据集:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/98cff671f2233eb00e67b30bd4e61977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FKIlvoi-NVq0c6Xe.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><p id="ef0b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上传后，仪表板会将目标时间序列数据显示为活动状态:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nh"><img src="../Images/3df9cf2e14a0be00cf681ac9600e961b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i7jDQZjhbMAMcW8p.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><h2 id="e3bb" class="md lg it bd lh me mf dn ll mg mh dp lp kr mi mj lr kv mk ml lt kz mm mn lv mo bi translated">创建预测器</h2><p id="8767" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">既然数据已经上传，就可以创建预测器了。Amazon Forecast 提供了两个预测选项:</p><ul class=""><li id="2915" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated"><strong class="kk iu">自动(AutoML): </strong>在这个选项下，Amazon Forecast 分析数据，然后选择一个合适的模型进行预测。</li><li id="0b16" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated"><strong class="kk iu">手动:</strong>用户手动选择他/她选择的算法进行预测。</li></ul><p id="0f34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本例中，我们使用自动选项。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/9554c488484df7eab19e4bb6694dfca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/0*FViqqU36Ez2-pIXP.png"/></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><p id="a823" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">预测范围设置为<strong class="kk iu"> 24 </strong>(即预测两年的月降雨量数据)，节假日的预测维度和国家保留默认设置。</p><p id="9a17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您应该会看到一个<strong class="kk iu">“正在创建…”</strong>培训状态:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nx"><img src="../Images/ba28ffc33d51dd4997638d7ffa45e44d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*efmtr-NuEn1N7sz1.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><h1 id="2331" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">结果</h1><p id="9e4a" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">获得了以下预测:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ny"><img src="../Images/165542704093d135f2769ca54bf73a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2NTV5F1fN_4GHU5K.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><p id="791e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">报告了 10%、50%和 90%分位数的预测分位数。</p><p id="618a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">据报告，预测值与实际值的偏差在 10%分位数处最低，偏差为<strong class="kk iu"> 9.8% </strong>，而在 50%分位数附近最高，偏差超过<strong class="kk iu"> 24% </strong>。这意味着预测是向下偏的，这在这种情况下似乎是有意义的。</p><p id="7b07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，下面是 Excel 中一段时间内降雨量数据的简单图表:</p><p id="6c33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，该系列的特点是临时峰值，降雨量特别高于正常水平。这些异常使序列的总体平均值向上倾斜，因此对较高分位数的预测不太准确也就不足为奇了。</p><p id="2871" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个例子中，Amazon Forecast 已经完成了合理的预测工作，但是可以对时间序列模型进行进一步的调查，以更好地捕捉这个数据集中的波动性。在这方面，我们不能排除 LSTM 或 GARCH 等非预定义算法实际上可能更适合这类数据。</p><p id="e374" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于分位数测量的更多信息可以在亚马逊预测的<a class="ae le" href="https://docs.aws.amazon.com/forecast/latest/dg/metrics.html" rel="noopener ugc nofollow" target="_blank">文档中找到。</a></p><p id="25fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在已经获得了预测，如果数据集组不在使用中，最好将其关闭。</p><h1 id="ac21" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">删除数据集组</h1><p id="49ec" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">为此，必须先删除数据集和预测值，然后才能彻底删除数据集组。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nz"><img src="../Images/ed235ee639ebe61a3d489eac0a363688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KbtXFdjmak0W4akO.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi oa"><img src="../Images/51a5472441528860b16c315c478440be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xeWMLoXxi9wTt0mZ.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><p id="60e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除上述内容后，可以删除数据集组本身:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ob"><img src="../Images/6c61d22cbfe1a8d6eea9d248c4853b3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1dN0conP82-hUSac.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">来源:亚马逊网络服务</p></figure><h1 id="6d3c" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">结论</h1><p id="530c" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">这是对 Amazon Forecast 以及如何配置该平台来进行时间序列预测的介绍。文章探讨了:</p><ul class=""><li id="d610" class="ni nj it kk b kl km ko kp kr nk kv nl kz nm ld nn no np nq bi translated">如何修改时间序列数据集以用于 Amazon Forecast</li><li id="6c59" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">时间序列预测的可用选项</li><li id="2217" class="ni nj it kk b kl nr ko ns kr nt kv nu kz nv ld nn no np nq bi translated">如何解读预测结果</li></ul><p id="d6bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望你觉得这篇文章有用，非常感谢你的时间。</p><p id="6d97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mc">免责声明:本文“按原样”呈现，仅作为亚马逊预测的介绍性教程——根据 AWS 客户协议，使用亚马逊预测是用户自己的责任。与其他 AWS 服务一样，Amazon Forecast 也有自己的定价结构，用户有责任熟悉这些结构。关于亚马逊预测定价结构的更多信息可以在</em> <a class="ae le" href="https://aws.amazon.com/forecast/pricing/" rel="noopener ugc nofollow" target="_blank"> <em class="mc">定价文档</em> </a> <em class="mc">下找到。本文中的发现和解释是作者的，不以任何方式得到 Metéire ann 的认可或隶属于 Metéire ann。</em></p></div></div>    
</body>
</html>