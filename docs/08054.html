<html>
<head>
<title>A Data Science/Big Data Laboratory — part 1 of 4: Raspberry Pi or VMs cluster — OS and communication</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学/大数据实验室—第1部分，共4部分:Raspberry Pi或VMs集群—操作系统和通信</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-ff37759cb2ec?source=collection_archive---------19-----------------------#2020-06-14">https://towardsdatascience.com/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-ff37759cb2ec?source=collection_archive---------19-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d5fa" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">实验室数据</h2><div class=""/><div class=""><h2 id="1207" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用Hadoop、Spark、Hive、Kafka、Zookeeper和PostgreSQL在Raspberry Pi 4或VMs集群中组建数据科学/大数据实验室</h2></div><p id="4405" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">这段文字可以用来支持在任何Ubuntu 20.04服务器集群中的安装，这就是设计良好的分层软件的妙处。此外，如果您有更多的节点，您可以随意分发软件。本文假设您知道Linux命令行，包括ssh、vim和nano。</em></p><p id="3c69" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">我不建议从少于三个树莓开始，因为你需要设置通信，并且Zookeeper和Kafka都需要奇数个节点。如果您尝试使用单个节点，可以使用本指南。尽管如此，性能可能会令人失望——对于单节点，我建议虚拟机具有合理数量的RAM和处理器。</em></p><p id="8684" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">由于篇幅原因，我不得不将教程分成四部分</em></p><ul class=""><li id="6c7b" class="ll lm iq kq b kr ks ku kv kx ln lb lo lf lp lj lq lr ls lt bi translated"><strong class="kq ja"> <em class="lk">第一部分:简介、操作系统和联网</em> </strong></li><li id="554b" class="ll lm iq kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated"><a class="ae lz" rel="noopener" target="_blank" href="/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-e4c5a0473025?source=friends_link&amp;sk=d9588dd1597ee9c0811e82666b002e43"> <strong class="kq ja"> <em class="lk">第二部分:Hadoop与Spark </em> </strong> </a></li><li id="b476" class="ll lm iq kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated"><a class="ae lz" rel="noopener" target="_blank" href="/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-8a1da8d49b48?source=friends_link&amp;sk=4a481ee4e3778d6c9d4e5a305a407bb6"> <strong class="kq ja"> <em class="lk">第三部分:PostgreSQL和Hive </em> </strong> </a></li><li id="7e0d" class="ll lm iq kq b kr lu ku lv kx lw lb lx lf ly lj lq lr ls lt bi translated"><a class="ae lz" rel="noopener" target="_blank" href="/kafka-and-zookeeper-over-ubuntu-in-a-3-node-cluster-a-data-science-big-data-laboratory-part-4-of-4-47631730d240?source=friends_link&amp;sk=955731d942d6f83e7f00d731e830ba30"> <strong class="kq ja"> <em class="lk">第四部分:卡夫卡、动物园管理员和结论</em> </strong> </a></li></ul><p id="9a97" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">所有配置文件均可在【1】:</em>获得</p><div class="ma mb gp gr mc md"><a href="https://github.com/ptaranti/RaspberryPiCluster" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">ptaranti/RaspberryPiCluster</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">Hadoop+Spark+Hive+Kafka+Postgresql集群(ubuntu 20.04)的配置文件</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">github.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr ms md"/></div></div></a></div><p id="b822" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">免责声明</em> : <em class="lk">此文免费提供给大家使用，风险自担。我小心地引用了我所有的资料来源，但是如果你觉得遗漏了什么，请给我发个短信。由于不同的软件版本可能会因其依赖性而表现出不同的行为，我建议使用我在第一次尝试中使用的相同版本。</em></p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="ae25" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">1.介绍</h1><p id="5fc3" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">培训或学习数据科学或商业智能通常是一项孤独的任务。你可以去读MBA或者在网上诅咒，但是巩固知识需要实践和尝试。</p><p id="eddc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对于某些技术来说，这很简单。Python和R可以很容易的安装在一般的电脑上。然而，一个完整的实验需要集成几个工具，从数据采集到报告/可视化。</p><p id="93df" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些工具…我能说什么呢…我不喜欢不理解我正在使用的工具。我是一个1987年和12yo一起学习Basic语言的老家伙。我用Z80从磁带播放器加载程序，在90年代，我管理Novell networks，在Minix之后几年才使用Linux不，我不是博物馆馆长。我学了Fortran，Pascal，C，Java…现在又学了R和Python。我想在接近真实的环境中训练管道和分析——这让我回到了工具上。我觉得不仅需要有训练的环境，还需要真正了解这个环境。</p><p id="2284" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">关于环境，我说的是Apache支持的解决方案(和一些朋友):Hadoop，Spark，Hive，Postgres，Kafka等等，安装在一个集群上。在你的桌面上，你很可能使用Anaconda和Rstudio(抱歉Anaconda，但我更喜欢单机Rstudio)。</p><p id="de3d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是我梦寐以求的实验室，我去了。</p><p id="182d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">大数据环境需要现实世界中的分布式解决方案，可扩展性是首要要求。因此，学习如何配置环境对我来说很重要。我没有选择基于云的解决方案——我想要完全的控制，对“个人实验室”没有任何限制。</p><p id="ebfd" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">首先，我已经在我的笔记本上安装了完整的解决方案，使用了三台虚拟机(在VirtualBox上安装了Ubuntu 20.04)。它工作了，但是有一些缺点——性能和网络。最糟糕的是——我把我的笔记本电脑从家搬到工作的地方，在那里使用这种“虚拟网络”是不可接受的。</p><p id="cc2e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我决定尝试Raspberry时，我打算为我的实验室购买一个强大的工作站来虚拟化集群。新的Raspberry Pi 4最高可配4GB内存。这不是一辆法拉利，但我只需要一辆小型车就能拥有范并完成工作。我读了一些关于如何用Raspberry组装集群的文本，用于Hadoop + Spark解决方案——他们用PI 3取得了成功。</p><p id="783a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">然后我决定用三个树莓派组装自己的集群。</p><p id="a61e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我对结果很满意；它起作用了，它的性能允许我进行实验。我会向学生推荐这个。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="35f0" class="na nb iq bd nc nd ne nf ng nh ni nj nk kf nl kg nm ki nn kj no kl np km nq nr bi translated">2.组装集群</h1><p id="fb5e" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">第一部分将引导您组装物理集群，安装Ubuntu server 20.04，并为集群设置环境</p><h1 id="4523" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.1你需要什么？</h1><blockquote class="oc od oe"><p id="f661" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">3个或更多覆盆子Pi 4 4GB</p><p id="d77f" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">1个千兆交换机(10/100/1000)</p><p id="b1ef" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">用于给Pi供电的USB-C电缆</p><p id="9e16" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">你的覆盆子的微型SD卡</p><p id="2afe" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">网络用以太网电缆</p><p id="b582" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">电源(我使用带3个USB 3A端口的充电器)</p><p id="6c27" class="ko kp lk kq b kr ks ka kt ku kv kd kw of ky kz la og lc ld le oh lg lh li lj ij bi translated">集群的丙烯酸底座</p></blockquote><figure class="oj ok ol om gt on gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/6ab0914b360072c922abd02cbc593b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*OI71Wv0nPY_Vtr_4ix_-0A.png"/></div><p class="op oq gj gh gi or os bd b be z dk translated">集群装载1</p></figure><figure class="oj ok ol om gt on gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/332047b20b1f96fb6d027a0bda0fb8c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*3YdZpjMhD0VFnv5DY-d-YQ.png"/></div><p class="op oq gj gh gi or os bd b be z dk translated">集群装载2</p></figure><h1 id="3cab" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.1.1关于材料的一些说明:</h1><p id="14bb" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">树莓Pi 4有wifi和千兆以太网。我选择了使用千兆交换机的有线网络进行集群通信。我还使用无线网络进行远程访问。因此，您应该使用cat 6电缆。</p><p id="6f10" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">因为想玩数据，所以买了128GB的SD卡。然而，其中一张卡没有交付，我开始为第二个覆盆子(节点pi2)使用16GB的卡，它工作了。购买高读写速度的优质SD卡对集群性能至关重要。树莓有一些扩展板，可以让你使用2.5 HD，SSD SATA或NVME。我没有安装它，但你可以很容易地安装一个NAS或数据存储区。</p><p id="2f8a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我花了很多时间配置集群，发现问题和归零几乎花了三周时间。我不是一个寻求让别人遭受同样痛苦的虐待狂，所以我决定出版这个指南，希望你喜欢。</p><p id="ec67" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我用了这些优秀的指南作为参考，重点在第[2，3，4]:</p><div class="ma mb gp gr mc md"><a href="https://dev.to/awwsmm/building-a-raspberry-pi-hadoop-spark-cluster-8b2" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">构建Raspberry Pi Hadoop / Spark集群</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">专业提示:如果您只是在寻找如何配置Hadoop和Spark在集群上运行，请从这里开始。动机和…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">开发到</p></div></div><div class="mm l"><div class="ou l mo mp mq mm mr ms md"/></div></div></a></div><div class="ma mb gp gr mc md"><a href="https://medium.com/analytics-vidhya/build-raspberry-pi-hadoop-spark-cluster-from-scratch-c2fa056138e0" rel="noopener follow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">从头开始构建Raspberry Pi Hadoop/Spark集群</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">本文将带领您从头开始使用Raspberry Pi构建Hadoop集群的漫长过程。</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">medium.com</p></div></div><div class="mm l"><div class="ov l mo mp mq mm mr ms md"/></div></div></a></div><div class="ma mb gp gr mc md"><a href="https://developer.ibm.com/recipes/tutorials/building-a-hadoop-cluster-with-raspberry-pi/" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">使用Raspberry Pi构建Hadoop集群——IBM开发人员食谱</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">简介Hadoop潜力巨大，是最知名的大数据项目之一。在本教程中，我们将…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">developer.ibm.com</p></div></div><div class="mm l"><div class="ow l mo mp mq mm mr ms md"/></div></div></a></div><p id="6d43" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">然而，即使按照教程，我发现了许多问题和陷阱。有些问题可能与不同的软件版本有关。</p><p id="469d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了在阅读本文时帮助您，也为了在我需要重新安装时帮助我自己，我将所有的配置文件保存在一个与raspberries中存在的文件夹结构相似的文件夹结构中——小心使用(IP、服务器名称等可能会因您而异)。所有文件都是最终版本，有Hadoop、Hive、Zookeeper、Kafka的分布式版本(Spark和Postgres安装在单节点)。</p><h1 id="8f40" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.2安装操作系统</h1><p id="ecae" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">首先，您应该在集群支持中组装物理设备，而不是SD卡。不要急于从桌子上摆满零件开始；这样容易短路，你会丢失你的素材。</p><p id="2aba" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我的笔记本运行Windows 10——我没有忘记黑暗面(Linux)——我有一些Linux虚拟机可供选择和使用。但是我在描述教程的时候会参考Windows支持软件。如果你是一个只懂Linux的极客，我相信你知道如何用你的工具完成工作(在Linux中通常更容易)。</p><h1 id="45c3" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.2.1下载并安装Raspberry Pi成像仪</h1><p id="7388" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">使用Ubuntu服务器创建微型SD卡的最佳工具是Raspberry Pi Imager [5]。该工具适用于Windows、Ubuntu和Mac，可从以下网站下载:</p><div class="ma mb gp gr mc md"><a href="https://www.raspberrypi.org/downloads/" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">树莓Pi下载-树莓Pi的软件</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">Raspberry Pi OS(以前称为Raspbian)是我们所有型号的Raspberry Pi的官方操作系统。使用…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">www.raspberrypi.org</p></div></div><div class="mm l"><div class="ox l mo mp mq mm mr ms md"/></div></div></a></div><p id="518f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">此实用程序将刻录原始版本的初始操作系统。</p><p id="ac75" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">建议:我尝试使用廉价的microSD转SD适配器，通常与笔记本SD插槽中的micro SD卡一起提供。速度非常慢，我换了一个micro-SD转USB适配器，用在USB 3.0端口。好多了。</p><p id="3f56" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Raspberry Pi 4有AMR64架构——之前的版本是AMR32。因此，任何Linux 32/64都可以很好地安装。在我的第一次尝试中，我使用了Raspbian(只有32位版本)，但我在Hadoop安装上遇到了问题。之后我决定用Ubuntu 64bit版本(Ubuntu推荐Pi 4)。</p><p id="b7a7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">插入您的SD，启动Raspberry Pi Imager并格式化它(我总是在安装任何操作系统之前格式化)。安装Ubuntu server 20.04 64位。对你所有的PI Micro SD卡做同样的事情。</p><p id="2f25" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Ubuntu 20.04服务器是最小版本，设置为通过DHCP连接以太网。</p><p id="3c0f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—如果您在将micro SD卡安装到Raspberry之前将其重新插入笔记本电脑读卡器，您将可以访问安装配置文件。理论上，你可以设置你的初始用户和网络配置。网络配置文件遵循<em class="lk"> yaml </em>文件的网络计划标准。然而，我试了几次，都不能正常工作，于是我决定像往常一样，通过ssh连接或者使用键盘和显示器。</p><p id="75ed" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意——Ubuntu安装了vim和nano编辑器。我已经习惯了vim，但是颜色的高亮模式使得阅读变得困难——即使戴着眼镜！我用了纳米。快捷方式显示在nano界面的底部。</p><h1 id="afd1" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">连接到网络</h1><p id="a600" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">这是一个集群——网络至关重要。本教程假设您有一个带路由器/网关的家庭网络。</p><p id="b9d4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您需要访问操作系统来配置您的网络。你可以通过两种不同的方式来实现:更简单的一种是购买一个从micro-HDMI到HDMI的适配器，有线键盘，然后逐一插入你的覆盆子。您可以使用初始用户名/密码直接访问。</p><p id="c73b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">默认用户/密码是ubuntu/ubuntu，首次登录时会要求您更改密码。我把密码改成了“覆盆子”。这是一个实验，避免在集群中使用真实密码。</p><p id="0be1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">最初连接树莓的第二种方法是依靠您的DHCP并连接有线网络(以太网)上的Pi，同样是一个接一个。</p><p id="c79d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当访问您的路由器管理页面时，您将可以访问连接的设备，树莓将显示为“ubuntu”。记下远程连接的IP地址。</p><p id="88c1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">因为我的有线键盘没有准时到达，所以我用<em class="lk">宋承宪</em>做到了。一次只启动一个Raspberry，配置它的网络、主机名、主机和用户，然后关闭它。这将有助于识别ssh初始连接的动态IP。</p><p id="dbc5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当您给Pi 4加电时，您会看到micro SD附近的红色和绿色led闪烁。红色led表示电源，绿色表示它正在访问您的辅助内存(micro SD)。</p><p id="a9af" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我的所有Pi都有相同的用户/密码和文件位置配置。这使得管理集群变得更加容易。</p><h1 id="60c7" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.2.3第一项任务是建立您的网络。</h1><p id="0aac" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">就像我之前写的，我决定设置以太网和wifi。我这样做是因为我的集群没有直接链接到我的路由器。我有一个wifi网络扩展器，TP-Link RE200，它提供一个以太网端口10/100，但提供2.4GHz + 5.0GHz的无线传输。因此，我的解决方案是让千兆交换机仅用于集群内通信和我使用wifi的远程访问。无论如何，我将扩展器(RE200)的以太网连接到交换机，以确保到集群的第二条路由—以防万一。</p><p id="9180" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Ubuntu server 20.04使用<em class="lk"> netplan </em>进行网络配置。作为一份简历，你制作一个格式良好的文本文件，并要求系统解析和处理/etc/netplan文件夹中带有<em class="lk"> yaml </em>后缀的文件。然后，Netplan会相应地更改您的网络设置。</p><p id="3fea" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">重要—缩进必须有4个空格。在意识到这一点之前，我在编辑时很挣扎。</p><p id="32ac" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您将找到以下要编辑的文件:</p><p id="aad4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk">/etc/net plan/50-cloud-init . YAML</em></p><p id="d666" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我很懒，只编辑了它，但是你可以通过改变它的后缀来避免<em class="lk"> netplan </em>读取它并创建一个新的。</p><p id="2467" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意——在一些安装中与我的Pi失去连接后，这迫使我重新安装系统(我没有USB键盘)，我选择首先配置wifi并重新启动。在确保wifi正常后，我将以太网从DHCP改为静态IP。</p><p id="90b0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您可以复制我的文件并进行相应的编辑:</p><p id="d3fa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/etc/netplan/50-cloud-init-yalm" rel="noopener ugc nofollow" target="_blank">/etc/net plan 50-cloud-init . YAML</a></p><figure class="oj ok ol om gt on"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="9439" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">编辑文件后，您需要确认更改:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="c327" class="pf nb iq pb b gy pg ph l pi pj">ubuntu@ubuntu:/etc/netplan$ sudo netplan apply</span></pre><p id="80f6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您需要使该文件适应您的环境。通常，您只需决定集群的IP，更改路由器IP(网关)并配置wifi(名称和密码)。我有2个wifi网络(2.4G + 5G)。</p><p id="550c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了让我的生活更轻松，我保持简单:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="f0f2" class="pf nb iq pb b gy pg ph l pi pj">Hostname   IP (Ethernet)     IP(wifi)  <br/>pi1        192.168.1.11      192.162.1.21<br/>pi2        192.168.1.12      192.162.1.22<br/>pi3        192.168.1.13      192.162.1.23</span></pre><p id="dc31" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—确保从路由器可用于DHCP连接的范围中删除您选择的范围。</p><p id="aa25" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一旦有了稳定的网络连接，就可以开始真正的配置了。请记住，集群使用网络连接，树莓之间的访问权限必须正常，否则您的分布式服务将会失败。</p><p id="c9a0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我的集群架构如图所示:</p><figure class="oj ok ol om gt on gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/f3b1b2b5b3cbe12353fe8a23dec53e90.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*cvobj0yW9XVefRY3qneIzw.png"/></div></figure><h1 id="9763" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.3创建您的用户</h1><p id="eca3" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">您将在所有节点中创建相同的用户，使用<em class="lk"> sudo </em>访问:</p><p id="b3c5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—不要使用低级的<em class="lk"> useradd </em>命令！</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="3a6b" class="pf nb iq pb b gy pg ph l pi pj">sudo adduser pi  <br/>sudo passwd pi<br/>New password:<br/>Retype new password:<br/>passwd: password updated successfully</span><span id="b732" class="pf nb iq pb b gy pl ph l pi pj">sudo usermod -aG sudo pi <br/>sudo usermod -aG admin pi</span></pre><p id="e47a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="lk"> usermod </em>命令<em class="lk">确保</em>sudo访问。</p><p id="488e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">作为pi登录，并更新您的系统！</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="4917" class="pf nb iq pb b gy pg ph l pi pj">sudo apt update<br/>sudo apt upgrade</span></pre><p id="0773" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你会发现安装net-tools包很有用！它附带了<em class="lk"> netstat </em>，我们将使用它来检查节点中的活动服务(端口):</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="47cc" class="pf nb iq pb b gy pg ph l pi pj">sudo apt-get install net-tools</span></pre><h1 id="b54f" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.4远程桌面访问</h1><p id="517a" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">我安装了一个带有网络浏览器(chromium)和远程桌面访问(xrdp)的轻量级图形界面(xfce4)。然而，这不是真的需要，我正在考虑删除它。但是如果你是一个GUI爱好者，你可能会喜欢它:</p><p id="22aa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为了启用远程桌面访问，您需要:</p><p id="1796" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">安装xfce4和xrdp:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="2708" class="pf nb iq pb b gy pg ph l pi pj">Sudo apt-get install xfce4<br/>sudo apt-get install xrdp</span></pre><p id="687a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">并创建文件</p><p id="d85b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">创建文件<a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.xsession" rel="noopener ugc nofollow" target="_blank"> /home/pi/。x会话</a></p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="9e53" class="pf nb iq pb b gy pg ph l pi pj">echo xfce4-session &gt; /home/pi/.xsession</span></pre><p id="6f7a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">并编辑该文件</p><p id="6518" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/etc/xrdp/startwm.sh" rel="noopener ugc nofollow" target="_blank"> /etc/xrdp/startwm.sh </a></p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="596f" class="pf nb iq pb b gy pg ph l pi pj">sudo nano /etc/xrdp/startwm.sh</span></pre><p id="df1b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在最后一行之后增加以下内容:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="17c0" class="pf nb iq pb b gy pg ph l pi pj">startxfce4</span></pre><p id="53e7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">重新启动服务:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="0f22" class="pf nb iq pb b gy pg ph l pi pj">sudo service xrdp restart</span></pre><p id="7107" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">xcfe4网页浏览器坏了。我安装了铬合金:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="e4a6" class="pf nb iq pb b gy pg ph l pi pj">sudo apt-get install chromium-browser</span></pre><p id="981a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">以防万一，安装extFat支持(这可能有助于笔驱动程序):</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="389f" class="pf nb iq pb b gy pg ph l pi pj">sudo apt install exfat-fuse</span></pre><p id="6665" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">重新启动后，您应该能够使用远程桌面从任何windows机器远程连接。</p><h1 id="3feb" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.5配置主机名和主机</h1><p id="9e52" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">您需要更新主机名以及/etc中的主机文件。参见GitHub中的例子。</p><p id="e4d7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—从<em class="lk">主机</em>文件中删除对本地主机127.0.01的引用。</p><p id="59ed" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/etc/hosts" rel="noopener ugc nofollow" target="_blank"> /etc/hosts </a></p><figure class="oj ok ol om gt on"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="6438" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">关于主机名，我建议您使用pi1、pi2、pi3、… piX。这是因为我所有的配置文件都考虑这些主机名。否则，您将需要非常小心地编辑它。</p><p id="1289" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/etc/hostname" rel="noopener ugc nofollow" target="_blank"> /etc/hostname </a></p><figure class="oj ok ol om gt on"><div class="bz fp l di"><div class="oy oz l"/></div></figure><h1 id="fbbf" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.6安装Java</h1><p id="bea2" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">这是一个致命的弱点:</p><p id="ad89" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Hadoop经过编译，在Java8上运行良好。我已经寻找过了，但是我没有找到来自Java Hotspot 8或Oracle Java 8的AMR64架构版本。经过一些实验后，我决定支持OpenJDK8，它已经在Ubuntu仓库中可用，并且维护得很好(我希望如此)。</p><p id="a603" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您可以在[6]中找到关于Hadoop和Java支持的信息:</p><div class="ma mb gp gr mc md"><a href="https://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">阿帕奇软件基金会</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">Apache Hadoop 3.x现在只支持Java 8 Apache Hadoop从2.7.x到2.x支持Java 7和8 Java 11支持现在…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">cwiki.apache.org</p></div></div></div></a></div><p id="0b63" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">要安装java:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="68e9" class="pf nb iq pb b gy pg ph l pi pj">sudo apt-get install openjdk-8-jdk</span></pre><p id="ddf8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这是我的版本:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="343f" class="pf nb iq pb b gy pg ph l pi pj">pi@p2:~$ java -version<br/>openjdk version "1.8.0_252"<br/>OpenJDK Runtime Environment (build 1.8.0_252-8u252-b09-1ubuntu1-b09)<br/>OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)</span></pre><h1 id="b595" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.7配置SSH</h1><p id="be9d" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">编辑文件(参见GitHub):</p><p id="55f5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.ssh/config" rel="noopener ugc nofollow" target="_blank"> /home/pi/。ssh/config </a></p><p id="2bde" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为ssh创建快捷方式</p><figure class="oj ok ol om gt on"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="5130" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">为所有群集节点中的用户pi生成公钥/私钥对:</p><p id="1009" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">命令和输出，您应该期望:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="55b4" class="pf nb iq pb b gy pg ph l pi pj">pi@pi1:~$ ssh-keygen -t rsa<br/>Generating public/private rsa key pair.<br/>Enter file in which to save the key (/home/pi/.ssh/id_rsa):<br/>Enter passphrase (empty for no passphrase):<br/>Enter same passphrase again:<br/>Your identification has been saved in /home/pi/.ssh/id_rsa<br/>Your public key has been saved in /home/pi/.ssh/id_rsa.pub<br/>The key fingerprint is:<br/>SHA256:mKDvp5u/AsK5CxUUYdkFNSM+rSI4S4aQJR7Wd1AcPZU pi@pi1<br/>The key's randomart image is:<br/>+---[RSA 3072]----+<br/>|.oB=o=Ooo ...    |<br/>|o*oo.+ = o E     |<br/>|o.. = o   .      |<br/>|+  o + o         |<br/>|*o= . o S        |<br/>|+B.o             |<br/>|o....            |<br/>|.. ....          |<br/>| .. =*o.         |</span></pre><p id="55a0" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">将公钥复制到授权密钥列表:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="066a" class="pf nb iq pb b gy pg ph l pi pj">cat .ssh/id_rsa.pub  &gt;&gt; .ssh/authorized_keys</span></pre><p id="b688" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">并复制到所有节点:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="9758" class="pf nb iq pb b gy pg ph l pi pj">cat ~/.ssh/id_rsa.pub | ssh pi2 'cat &gt;&gt; .ssh/authorized_keys'<br/>cat ~/.ssh/id_rsa.pub | ssh pi3 'cat &gt;&gt; .ssh/authorized_keys'</span></pre><p id="5f61" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—您应该在每个群集节点中执行此过程。最后，所有节点的列表中都会有所有的公钥。这一点很重要——没有密钥会阻止以后的机器间通信。</p><p id="0b02" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意——作为一个例子，我在GitHub中包含了我的<a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.ssh/authorized_keys" rel="noopener ugc nofollow" target="_blank"> ssh/authorized_keys </a>。显然，你不能使用它，因为它不会工作。你需要做你的钥匙圈。</p><h1 id="b4d5" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">基于密码的身份验证</h1><p id="b1ab" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">参考教程建议禁用基于密码的身份验证，主要是因为安全问题。我决定不采纳他们的建议，因为我想使用传统的基于密码的访问来轻松访问节点。</p><p id="2987" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果您想探索这个选项，请查看本文开头引用的前两个教程。如果你想探索这个选项，请查看本文开头提到的两个教程。</p><h1 id="108d" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.8管理集群的脚本</h1><p id="a755" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">通过在以下文件中添加以下内容，创建函数来帮助您进行集群管理:</p><p id="7821" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster/blob/master/pi1/home/pi/.bashrc" rel="noopener ugc nofollow" target="_blank"> /home/pi/。巴沙尔</a></p><figure class="oj ok ol om gt on"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="8013" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">运行命令:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="9b63" class="pf nb iq pb b gy pg ph l pi pj">source /home/pi/.bashrc</span></pre><p id="8888" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">您必须在所有节点中执行此操作。如果您愿意，可以使用<em class="lk"> scp </em>在节点之间复制。如果使用<em class="lk"> WinSCP </em>远程访问，您将能够复制和粘贴——但是在命令行中使用<em class="lk"> scp </em>更快，您应该学会这样做。</p><p id="7e3b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—原始教程没有<em class="lk"> clustercmd-sudo </em>。我把它包括进来，因为我试验了需要超级用户访问的命令问题。</p><p id="2590" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意—这些函数假设节点的主机名是pi1、pi2、pi3、pi4…，并且所有节点都有一个用户/密码pi/pi。这些假设也是在Hadoop/Spark/Zookeeper/Kafka/Postgres配置下做出的。如果您选择了不同的名称，那么您需要仔细检查每一行。</p><h1 id="bb6f" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">2.9时间同步</h1><p id="3224" class="pw-post-body-paragraph ko kp iq kq b kr ns ka kt ku nt kd kw kx nu kz la lb nv ld le lf nw lh li lj ij bi translated">通常，我用UTC时间服务器同步我所有的机器。在集群中，这一点更加重要。</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="9215" class="pf nb iq pb b gy pg ph l pi pj">pi@p2:~$ clustercmd date<br/>Fri May 29 21:09:59 UTC 2020<br/>Fri May 29 21:09:57 UTC 2020<br/>Fri May 29 21:10:02 UTC 2020</span></pre><p id="b767" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">好吧，我作弊了。我的集群已经同步了，我插入了时差编辑。但是你的集群可能有差异。</p><p id="0ef6" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">运行以下命令:</p><pre class="oj ok ol om gt pa pb pc pd aw pe bi"><span id="5255" class="pf nb iq pb b gy pg ph l pi pj">clustercmd-sudo apt install htpdate -y</span><span id="10af" class="pf nb iq pb b gy pl ph l pi pj">clustercmd-sudo htpdate -a -l <a class="ae lz" href="http://www.pool.ntp.org" rel="noopener ugc nofollow" target="_blank">www.pool.ntp.org</a></span></pre><p id="8baa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">后一个命令使用<em class="lk"> htpdate </em>将节点时钟与<a class="ae lz" href="http://www.pool.ntp.org." rel="noopener ugc nofollow" target="_blank">www.pool.ntp.org同步。</a></p><h1 id="06d7" class="na nb iq bd nc nd nx nf ng nh ny nj nk kf nz kg nm ki oa kj no kl ob km nq nr bi translated">然后</h1><div class="ma mb gp gr mc md"><a rel="noopener follow" target="_blank" href="/assembling-a-personal-data-science-big-data-laboratory-in-a-raspberry-pi-4-or-vms-cluster-e4c5a0473025"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ja gy z fp mi fr fs mj fu fw iz bi translated">数据科学/大数据实验室—第2部分，共4部分:3节点集群中的Hadoop和Spark over Ubuntu</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">使用Hadoop、Spark、Hive、Kafka在Raspberry Pi 4或VMs集群中组建数据科学/大数据实验室…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">towardsdatascience.com</p></div></div><div class="mm l"><div class="pm l mo mp mq mm mr ms md"/></div></div></a></div><p id="8bd4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[1] P. G .塔兰蒂。<a class="ae lz" href="https://github.com/ptaranti/RaspberryPiCluster" rel="noopener ugc nofollow" target="_blank">https://github.com/ptaranti/RaspberryPiCluster</a></p><p id="400a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[2]华生。<a class="ae lz" href="https://dev.to/awwsmm/building-a-raspberry-pi-hadoop-spark-cluster-8b2" rel="noopener ugc nofollow" target="_blank">构建一个Raspberry Pi Hadoop / Spark集群</a> (2019)</p><p id="9421" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[3]梁伟雄。<a class="ae lz" href="https://medium.com/analytics-vidhya/build-raspberry-pi-hadoop-spark-cluster-from-scratch-c2fa056138e0" rel="noopener">从零开始构建Raspberry Pi Hadoop/Spark集群</a> (2019)</p><p id="f1b5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[4]弗杜戈。<a class="ae lz" href="https://developer.ibm.com/recipes/tutorials/building-a-hadoop-cluster-with-raspberry-pi/" rel="noopener ugc nofollow" target="_blank">使用Raspberry Pi构建Hadoop集群:<em class="lk">使用单板计算机安装、配置和测试分布式存储和处理集群</em> </a> (2017)</p><p id="fcb3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[5] G .霍林沃思。<a class="ae lz" href="https://www.raspberrypi.org/blog/raspberry-pi-imager-imaging-utility/" rel="noopener ugc nofollow" target="_blank">介绍Raspberry Pi成像仪，我们的新型成像工具</a> (2020)</p><p id="f3a1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">[6] A. Ajisaka。<a class="ae lz" href="https://cwiki.apache.org/confluence/display/HADOOP/Hadoop+Java+Versions" rel="noopener ugc nofollow" target="_blank"> Hadoop Java版本</a> (2020)</p></div></div>    
</body>
</html>