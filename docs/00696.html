<html>
<head>
<title>Display Customizations for pandas Power Users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为熊猫超级用户显示自定义</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/become-a-pandas-power-user-with-these-display-customizations-6d3a5a5885c1?source=collection_archive---------16-----------------------#2020-01-20">https://towardsdatascience.com/become-a-pandas-power-user-with-these-display-customizations-6d3a5a5885c1?source=collection_archive---------16-----------------------#2020-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5e51" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">熊猫展示定制是熊猫经常被忽视的一部分。许多用户不知道他们可以自定义与显示相关的选项。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4eaf5d25e8a5ba45c3139d2778fc1246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*De4BcslMHcSP42k622FLaA.png"/></div></div></figure><p id="86a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">pandas有一个选项系统，可以让你定制它行为的某些方面，与显示相关的选项是用户最有可能调整的。</p><p id="75f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">熊猫展示定制是熊猫经常被忽视的一部分。对于大多数用户来说，缺省值已经足够好了，但是许多用户不知道显示定制，他们会找到一些替代的麻烦方法来克服它们。要成为熊猫专家，你至少应该知道显示器定制选项。</p><p id="37e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">这里有几个你可能会感兴趣的链接:</strong></p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="36b0" class="lv lw it lr b gy lx ly l lz ma">- <a class="ae mb" href="https://www.humanfirst.ai/" rel="noopener ugc nofollow" target="_blank">Labeling and Data Engineering for Conversational AI and Analytics</a></span><span id="4cac" class="lv lw it lr b gy mc ly l lz ma">- <a class="ae mb" href="https://imp.i115008.net/c/2402645/880006/11298" rel="noopener ugc nofollow" target="_blank">Data Science for Business Leaders</a> [Course]</span><span id="dff9" class="lv lw it lr b gy mc ly l lz ma">- <a class="ae mb" href="https://imp.i115008.net/c/2402645/788201/11298" rel="noopener ugc nofollow" target="_blank">Intro to Machine Learning with PyTorch</a> [Course]</span><span id="2a1c" class="lv lw it lr b gy mc ly l lz ma">- <a class="ae mb" href="https://imp.i115008.net/c/2402645/803127/11298" rel="noopener ugc nofollow" target="_blank">Become a Growth Product Manager</a> [Course]</span><span id="cf8c" class="lv lw it lr b gy mc ly l lz ma">- <a class="ae mb" href="https://amzn.to/3ncTG7D" rel="noopener ugc nofollow" target="_blank">Deep Learning (Adaptive Computation and ML series)</a> [Ebook]</span><span id="c588" class="lv lw it lr b gy mc ly l lz ma">- <a class="ae mb" href="https://aigents.co/skills" rel="noopener ugc nofollow" target="_blank">Free skill tests for Data Scientists &amp; Machine Learning Engineers</a></span></pre><p id="3897" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="md">上面的一些链接是附属链接，如果你通过它们进行购买，我会赚取佣金。请记住，我链接课程是因为它们的质量，而不是因为我从你的购买中获得的佣金。</em></p><p id="42ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">要升级你的熊猫游戏，请阅读:</strong></p><div class="me mf gp gr mg mh"><a href="https://medium.com/@romanorac/pandas-data-analysis-series-b8cec5b38b22" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">熊猫数据分析系列</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">从提示和技巧，如何不指南到与大数据分析相关的提示，熊猫文章的精选列表。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ks mh"/></div></div></a></div><h1 id="4cd9" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">设置</h1><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="4933" class="lv lw it lr b gy lx ly l lz ma">import os<br/>import platform<br/>from platform import python_version</span><span id="b29a" class="lv lw it lr b gy mc ly l lz ma">import jupyterlab<br/>import pandas <strong class="lr iu">as</strong> pd<br/>import random</span><span id="3ba2" class="lv lw it lr b gy mc ly l lz ma"><strong class="lr iu">print</strong>("System")<br/><strong class="lr iu">print</strong>("os name: %s" <strong class="lr iu">%</strong> os<strong class="lr iu">.</strong>name)<br/><strong class="lr iu">print</strong>("system: %s" <strong class="lr iu">%</strong> platform<strong class="lr iu">.</strong>system())<br/><strong class="lr iu">print</strong>("release: %s" <strong class="lr iu">%</strong> platform<strong class="lr iu">.</strong>release())<br/><strong class="lr iu">print</strong>()<br/><strong class="lr iu">print</strong>("Python")<br/><strong class="lr iu">print</strong>("version: %s" <strong class="lr iu">%</strong> python_version())<br/><strong class="lr iu">print</strong>()<br/><strong class="lr iu">print</strong>("Python Packages")<br/><strong class="lr iu">print</strong>("jupterlab==%s" <strong class="lr iu">%</strong> jupyterlab<strong class="lr iu">.</strong>__version__)<br/><strong class="lr iu">print</strong>("pandas==%s" <strong class="lr iu">%</strong> pd<strong class="lr iu">.</strong>__version__)</span><span id="87e4" class="lv lw it lr b gy mc ly l lz ma">seed <strong class="lr iu">=</strong> 42<br/>random<strong class="lr iu">.</strong>seed(seed)<br/>pd<strong class="lr iu">.</strong>np<strong class="lr iu">.</strong>random<strong class="lr iu">.</strong>seed(seed)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/8bfb61a41e10c8d9bcd3dffb92f097c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jI-6BCA9kCtRBGnx9Uxuvg.png"/></div></div></figure><p id="d15e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们定义数据集。它有100行和2列:</p><ul class=""><li id="7ac2" class="no np it kw b kx ky la lb ld nq lh nr ll ns lp nt nu nv nw bi translated">col1具有0和1之间的随机数，</li><li id="c71d" class="no np it kw b kx nx la ny ld nz lh oa ll ob lp nt nu nv nw bi translated">col2有由200个字符组成的随机句子。</li></ul><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="2ead" class="lv lw it lr b gy lx ly l lz ma"><strong class="lr iu">def</strong> <strong class="lr iu">generate_sentence</strong>(n_chars<strong class="lr iu">=</strong>200):<br/>    <strong class="lr iu">return</strong> ''<strong class="lr iu">.</strong>join(random<strong class="lr iu">.</strong>choice('abcdefg ') <strong class="lr iu">for</strong> _ <strong class="lr iu">in</strong> range(n_chars))</span><span id="e4a3" class="lv lw it lr b gy mc ly l lz ma">n <strong class="lr iu">=</strong> 100<br/>df <strong class="lr iu">=</strong> pd<strong class="lr iu">.</strong>DataFrame(<br/>    {<br/>        "col1": pd<strong class="lr iu">.</strong>np<strong class="lr iu">.</strong>random<strong class="lr iu">.</strong>random_sample(n),<br/>        "text": [generate_sentence() <strong class="lr iu">for</strong> _ <strong class="lr iu">in</strong> range(n)]<br/>    }<br/>)<br/>df<strong class="lr iu">.</strong>shape</span><span id="3e5e" class="lv lw it lr b gy mc ly l lz ma">(100, 2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/09735963647e994c0d981d13356f7a19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_I8s5NAJi-BPsh5F_Sbcpg.png"/></div></div></figure><h1 id="15bb" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">压制科学符号</h1><p id="d1f2" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">默认情况下，pandas用科学(指数)记数法显示小数字和大数字。如果科学记数法不是您的首选格式，您可以用一个命令禁用它。</p><p id="dc18" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们用一个小数字替换col1中的第一个值。熊猫被迫用科学记数法显示col1，因为数字很小。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="2ed3" class="lv lw it lr b gy lx ly l lz ma">df<strong class="lr iu">.</strong>iloc[0, 0] <strong class="lr iu">=</strong> 1e-10</span><span id="ef90" class="lv lw it lr b gy mc ly l lz ma">df<strong class="lr iu">.</strong>head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/37b8da61b46c195f501e8632b60f24b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3IIGwiwbIA79WlvtgHoIIQ.png"/></div></div></figure><p id="0db7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用float_format，我们可以设置想要显示的小数位数(在下面的例子中是10)。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="7edf" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>options<strong class="lr iu">.</strong>display<strong class="lr iu">.</strong>float_format <strong class="lr iu">=</strong> '{:,.10f}'<strong class="lr iu">.</strong>format</span><span id="ec20" class="lv lw it lr b gy mc ly l lz ma">df<strong class="lr iu">.</strong>head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/8448a1ac45148ee562ffb53f7c73f678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAK1H6KxJ39NWfXnu-ukrw.png"/></div></div></figure><p id="47d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用reset_option命令，我们将其重置回科学记数法。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="e837" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>reset_option('display.float_format')</span></pre><h1 id="1792" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">要显示的最大列数/行数</h1><p id="b2d2" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">当处理更大的数据集时，我们注意到pandas并不显示所有的列或行。显然，这是出于性能原因。虽然我不介意隐藏行，但是看不到所有的列(默认限制是20列)会令人沮丧。</p><p id="6159" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将行转换为列，以便直观地了解问题。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="bc2b" class="lv lw it lr b gy lx ly l lz ma">df<strong class="lr iu">.</strong>T</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/776d25b345fec429acc1f2c1c1957b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNRCIOLA7Dp2jMYGNtiteA.png"/></div></div></figure><p id="cf13" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，让我们将最大列数设置为100。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="0892" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>set_option("display.max_columns", 100)</span><span id="1924" class="lv lw it lr b gy mc ly l lz ma">df<strong class="lr iu">.</strong>T</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/571c4b6d34da33fb27df7a95bb7e20e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GE86_gmJQ5rbLRRHsakQA.png"/></div></div></figure><p id="8eb8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要重置最大列数显示，我们可以将其设置回20。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="74d4" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>set_option("display.max_columns", 20)</span></pre><p id="607c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Pandas还有一个get选项可以查看，这个值是当前设置的。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="36a0" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>get_option('display.max_columns')</span><span id="b700" class="lv lw it lr b gy mc ly l lz ma">20</span></pre><p id="dbde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于行，我们可以用display.max_rows做同样的事情。</p><h1 id="48b6" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">扩展列宽</h1><p id="71f1" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">通常，在处理文本数据时，由于字符串的长度，字符串只能部分可见。Pandas使我们能够用max_colwidth选项增加列宽。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="f8d9" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>set_option('max_colwidth', 500)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/5ff33a3db6b8c85bca7d0d96e4976153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JNojDsw-G5kB_txsRQgOlQ.png"/></div></div></figure><h1 id="7b59" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">数据帧信息</h1><p id="c01f" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">我相信您熟悉describe函数，它输出数据帧中每一列的汇总统计数据。info选项类似于meta describe函数，因为它输出数据帧的元数据，如数据类型、非空对象和内存使用情况。</p><p id="09cc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这在处理大型数据集时非常有用。</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="ac69" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>set_option('large_repr', 'info')</span><span id="3a76" class="lv lw it lr b gy mc ly l lz ma">df</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/a5344f3dd83261bde0c7d14e2235ba31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gnMI-2fFNZoXu9SPMcVLfQ.png"/></div></div></figure><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="fb92" class="lv lw it lr b gy lx ly l lz ma">pd<strong class="lr iu">.</strong>reset_option('large_repr') # reset it</span></pre><h1 id="d1c8" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结论</h1><p id="b668" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">这些是最常用的熊猫显示定制。如果你想了解更多关于显示定制的信息，请阅读pandas文档的<a class="ae mb" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html" rel="noopener ugc nofollow" target="_blank">选项和设置</a>部分。</p><h1 id="a428" class="mw lw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">在你走之前</h1><p id="dea3" class="pw-post-body-paragraph ku kv it kw b kx od ju kz la oe jx lc ld of lf lg lh og lj lk ll oh ln lo lp im bi translated">在<a class="ae mb" href="https://twitter.com/romanorac" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我，在那里我定期<a class="ae mb" href="https://twitter.com/romanorac/status/1328952374447267843" rel="noopener ugc nofollow" target="_blank">发关于数据科学和机器学习的推特</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/b5d426b68cc5a21b1a35d0a157ebc4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*69rP1pwjJi9mLSFE"/></div></div><p class="op oq gj gh gi or os bd b be z dk translated">照片由<a class="ae mb" href="https://unsplash.com/@cmhedger?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Courtney hedge</a>在<a class="ae mb" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div></div>    
</body>
</html>