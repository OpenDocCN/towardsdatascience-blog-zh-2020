<html>
<head>
<title>How to collect comments from any New York Times Article to a Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从《纽约时报》的任何一篇文章中收集对熊猫数据框架的评论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-collect-comments-from-any-new-york-times-article-to-a-pandas-dataframe-a595ec6a1ddf?source=collection_archive---------53-----------------------#2020-05-27">https://towardsdatascience.com/how-to-collect-comments-from-any-new-york-times-article-to-a-pandas-dataframe-a595ec6a1ddf?source=collection_archive---------53-----------------------#2020-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/8b5baa8dd0bf907f9a3713917e190de6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6AUb8TUW3RWaMrYg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae jd" href="https://unsplash.com/@visuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">视觉</a>的照片</p></figure><div class=""/><div class=""><h2 id="12ca" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">《纽约时报》( NYT)最精彩的部分是他们对文章积极且高度节制的评论部分。</h2></div><p id="7e75" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这确实是一个奇妙的社区，来自世界各地的读者都做出了高质量的贡献。24 小时开放评论，由人类高度管理，因此不存在巨魔评论。一个我在其他出版物上看不到复制的社区。</p><p id="6e08" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">我喜欢 NYT 评论区的是它目前的组织方式。</strong></p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lr"><img src="../Images/12267b611ccdc4996b79b7e2162587d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBACuBJ1LChlsCnvUC9P-A.png"/></div></div></figure><p id="fd24" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有三个标签，NYT 选择，读者选择，和所有。</p><ul class=""><li id="237a" class="lw lx jg kx b ky kz lb lc le ly li lz lm ma lq mb mc md me bi translated">在<em class="mf"> NYT 选择</em>下，NYT 将突出代表一系列观点的评论，并被认为是关于文章主题的最有趣或最有用的评论。</li><li id="0e4b" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">读者选择</em>，通常按最高社区投票排序。NYT 上的向上投票被视为“推荐”。</li><li id="676c" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated">使用<em class="mf"> All </em>选项卡，允许您按最新或最早的评论进行排序。</li></ul><p id="3b1b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我最近发现纽约时报发布了一个新的 API，目前处于测试阶段，它可以帮助我们轻松地查询这些精彩的评论。</p><h2 id="6563" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">步骤 1:创建一个 NYT 开发者网络帐户来获得你的 API 密匙</h2><ol class=""><li id="23f9" class="lw lx jg kx b ky ne lb nf le ng li nh lm ni lq nj mc md me bi translated">转到<a class="ae jd" href="https://developer.nytimes.com/" rel="noopener ugc nofollow" target="_blank">https://developer.nytimes.com/</a></li><li id="0406" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated">登录或创建一个帐户</li><li id="72fd" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated">将鼠标悬停在您的帐户名称上，即可进入应用程序。</li><li id="56d5" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated">创建新应用程序</li><li id="65eb" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated">提供名称和描述</li><li id="a546" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated">激活社区 API ( <em class="mf">目前处于测试阶段</em>)</li><li id="00a0" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq nj mc md me bi translated"><strong class="kx jh">将您的 API 密钥复制到剪贴板以备将来使用</strong></li></ol><h2 id="fdaf" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">步骤 2:在 Python 中进行设置</h2><p id="e1e0" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le nk lg lh li nl lk ll lm nm lo lp lq ij bi translated"><em class="mf">注意:我们每天只限 4000 个请求，每分钟 10 个请求。</em></p><p id="e698" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mf">注意:我们需要指定偏移量，因为每次我们请求 API 时，它一次只会得到 25 条注释。因此，从 25 到 49 的注释需要我们将偏移量设置为 25。</em></p><p id="45f4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mf">注:对于本教程，我将使用这篇</em> <a class="ae jd" href="https://www.nytimes.com/2020/05/24/opinion/biden-trump-coronavirus.html" rel="noopener ugc nofollow" target="_blank"> <em class="mf"> NYT 文章</em> </a> <em class="mf">。</em></p><figure class="ls lt lu lv gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c798" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦获得了数据，这些数据将看起来像这样。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/e539366a2d5ff2433e5df6d239feacd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AcLhFtvMfwXYbfq4Ivjg4g.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">您从 NYT 社区 API 中收集的 JSON 数据示例</p></figure><p id="5743" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">仅从屏幕截图来看，我们可以很容易地看出，如果我们要制作一个数据集，我们可以尝试一些有趣的功能。</p><p id="fc37" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">有趣的功能:</strong></p><ul class=""><li id="3fd0" class="lw lx jg kx b ky kz lb lc le ly li lz lm ma lq mb mc md me bi translated"><em class="mf">备注</em></li><li id="9a65" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">用户显示名称</em></li><li id="db45" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">用户位置</em></li><li id="a901" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">评论主体</em></li><li id="e8c2" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">建议</em></li><li id="6dec" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">回复计数</em></li><li id="cdcd" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">回复</em></li><li id="3e93" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">编辑选择</em></li><li id="4e7a" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">推荐标志</em></li><li id="854c" class="lw lx jg kx b ky mg lb mh le mi li mj lm mk lq mb mc md me bi translated"><em class="mf">匿名</em></li></ul><h2 id="bfb4" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">步骤 3:提取我们想要的数据到熊猫数据框架中</h2><p id="0911" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le nk lg lh li nl lk ll lm nm lo lp lq ij bi translated"><em class="mf">注意:注释位于我们数据的“结果”键中。</em></p><figure class="ls lt lu lv gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="adc9" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">第 4 步:简单直观的功能来检索一篇文章的所有评论，包括评论回复。</h2><p id="970a" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le nk lg lh li nl lk ll lm nm lo lp lq ij bi translated"><em class="mf">注意:每次您提交请求时，建议让您的功能等待 6 秒钟，因为我们每分钟仅限 10 个请求。</em></p><figure class="ls lt lu lv gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="8874" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">最终的数据帧将如下所示。</h2><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/d10afa2c6835b49116f2700930a018b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yj7V0br-5t-Pp4AYUYWAuA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">质疑 NYT 文章的评论。</p></figure><h2 id="267d" class="ml mm jg bd mn mo mp dn mq mr ms dp mt le mu mv mw li mx my mz lm na nb nc nd bi translated">但是，NYT 社区 API 有一个单独的请求链接，用于回复特定意见的评论。下面是你如何设置它。</h2><p id="6770" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le nk lg lh li nl lk ll lm nm lo lp lq ij bi translated"><em class="mf">注意:每个请求仍然被限制为一次 25 个评论回复，我们必须指定我们想要从哪个评论中提取回复。为了指定哪个注释，我们需要输入 commentSequence，它与 commentID 相同，这是我目前所了解的。</em></p><figure class="ls lt lu lv gt is"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="017f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，你将会浪费你当天的请求配额，并且你已经从先前的函数中提取了那些回复，并且那些对你的评论的回复不受父评论限制。</p><p id="4f0b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就对了。现在你知道如何从《纽约时报》的一篇文章中提取所有评论了！</p></div></div>    
</body>
</html>