# 最佳样本量的确定

> 原文：<https://towardsdatascience.com/optimal-sample-size-determination-43c5dca1f720?source=collection_archive---------30----------------------->

## 如何从统计上找到所需的样本量，以做出准确和高度可信的概括。(附实例！)

![](img/5be1fbbf1ffaaf04f837ca23fcde4702.png)

[晨酿](https://unsplash.com/@morningbrew)在 [Unsplash](https://unsplash.com/) 上拍摄的照片。

# 介绍

从收集选举中的投票意向到评估公司机器的质量，寻找最佳样本量在许多不同的情况下都很重要。找到最能代表总体的样本有助于减少成本和时间，同时还能提供适用于总体的结论。

帮助理解这一点的方法来自乔治·盖洛普，他是调查抽样技术的先驱。

> “如果你煮了一大锅汤，你不需要把它都吃完，然后再看是否需要更多的调料。你可以尝一勺，只要你把它搅拌好”，乔治·盖洛普。

为了选择样本量，可以使用统计学方法。这可以让*量化*我们对样本的信心。

这篇文章将首先给出样本大小选择的数学证明，然后用 Python 做一个计算证明，展示如何在一些模拟数据上工作。

# 战略

本节将讨论如何在二元情况下找到最佳样本量——这是指有两种结果的情况。一个例子可以是带有“是”或“否”问题的投票，或者是对机器的好或坏的评级。

首先，这篇文章将讨论这个方法所基于的置信区间，然后最后讨论如何从置信区间计算最优样本量。

## 设置

在统计学中，*样本*是一组对象或测量值，是通过统计抽样技术获得的整个总体的子集。我们把二元问题的两个结果叫做*结果 1* 和*结果 2* 。

定义 *p* 为*结果 1* 发生的概率，给出*结果 2* 的概率为 *1-p.*

问题是，我们需要多大的样本量才能高精度地计算 p ？

## 置信区间

为了回答这个问题，我们需要一个 *p.* 的置信区间

**定义**:一个 *p* 的 *95%* *置信区间*是这样一个区间，如果我们计算区间 *100 次*其中 *95 次*将包含给定样本量 *n* 的 *p* 的真值。

对于一般情况，其公式为:

其中 p hat 是我们对 *p 的估计值(我们试图寻找的值)，z* 表示正态分布的 z 得分(例如，1.96 表示 95%的 z 得分)。

## 最佳样本量

现在，为了计算最佳样本量，我们可以从另一个角度来看这个问题，并重新排列这个公式以找到 n。首先，让我们扩大置信区间:

因为我们想要找到高精度的 *p* ，我们将想要使这个置信区间小于某个宽度(你选择的)，让我们称这个宽度为 *W* 。将这些放在一起，我们得到:

这给出了:

现在继续重新排列直到 *n* 在一边是*T9:*

这是一个通用公式，如果你已经对 *p* 有了一个很好的估计，就可以使用这个公式，但是如果没有的话，还可以通过一个假设进一步使用这个公式。让我们看看二项分布的方差公式:

为了编码我们的不确定性，我们可以最大化这个方差，在 *n* 保持不变的情况下，这是通过假设 *p* 值为 0.5 来实现的。这给了我们:

可以简化为:

现在，让我们输入一些值。对于 95%的置信水平，我们想设置 *z = 1.96* (来自标准正态分布)，让 *W = 0.02* 。 *W* 是置信区间的宽度，这意味着 *W/2* 是*误差幅度*，因此在这个例子中，我的误差幅度为 0.01。

将所有这些放在一起:

> 对于这个例子，我们现在可以说，**样本量大于 9604 的样本中，95%的样本将包含准确度在 1%以内的真实比例**。

# 例子

现在，数学证明已经完成，我将生成一些数据来给出一个动手的例子。

# 进一步阅读

*   这篇文章假设总人口是未知的和无限的。如果总人口是已知的，有几种方法可以解释这一点:[https://byjus.com/sample-size-formula/](https://byjus.com/sample-size-formula/)
*   更多关于置信区间这里有一个很好的介绍[https://towards data science . com/understanding-confidence-interval-d 7 b5 aa 68 e3b](/understanding-confidence-interval-d7b5aa68e3b)
*   关于样本量重要性的更多信息，请查看:[https://medium . com/swlh/is-the-sample-size-of-a-poll-important-2b 25 b5 bfe 64d](https://medium.com/swlh/is-the-sample-size-of-a-poll-important-2b25b5bfe64d)

# 结论

这篇文章介绍了一种在给定的置信水平和允许的误差范围内寻找好的样本量的方法，但是这里只讨论了二进制方法。为了将这里计算的结果扩展到多类场景(其中有两个以上的选项)，该问题可以简单地视为几个二元问题。这就留给读者了。

有关相关的公式笔记本和示例笔记本，请访问我的 [Github](https://github.com/henriwoodcock/blog-post-codes/tree/master/optimal_sample_size) 。