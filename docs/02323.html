<html>
<head>
<title>How to use Residual Plots for regression model validation?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用残差图进行回归模型验证？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-residual-plots-for-regression-model-validation-c3c70e8ab378?source=collection_archive---------4-----------------------#2020-03-05">https://towardsdatascience.com/how-to-use-residual-plots-for-regression-model-validation-c3c70e8ab378?source=collection_archive---------4-----------------------#2020-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="18d0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用残差图验证您的回归模型</h2></div><h1 id="b042" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated"><strong class="ak">概述</strong></h1><p id="0383" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">任何数据科学/ML项目最重要的部分之一是模型验证。这和你之前的工作一样重要。这是欢呼之前的最后一个障碍！</p><p id="b543" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">对于回归，有许多方法可以评估你的拟合度，即模型与数据的拟合程度。r值就是这样一种度量。但它们并不总是最能让我们对自己的模型充满信心。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/f85696c84b45ba6dfe4dbbc1f28efc0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oTXSfcDuNswemdqn6i1GhA.jpeg"/></div></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图片来自U<a class="ae mo" href="https://unsplash.com/photos/6EnTPvPPL6I" rel="noopener ugc nofollow" target="_blank">n flash</a></p></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><blockquote class="mw"><p id="c1cc" class="mx my iq bd mz na nb nc nd ne nf ls dk translated">犯错是人之常情，随机犯错在统计学上是神圣的</p></blockquote><p id="8f48" class="pw-post-body-paragraph kx ky iq kz b la ng jr lc ld nh ju lf lg ni li lj lk nj lm ln lo nk lq lr ls ij bi translated">这就是剩余图出现的原因。我们来谈谈什么是剩余图，以及你如何分析它们来解释你的结果。</p><h2 id="5b36" class="nl kg iq bd kh nm nn dn kl no np dp kp lg nq nr kr lk ns nt kt lo nu nv kv nw bi translated">残差</h2><p id="a6e6" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">残差是一个点与回归线垂直距离的度量。简单来说就是预测值和观察到的实际值之间的误差。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/ee9d8c53ab78a797e9c777cf874f51ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*GFodFXNaa_LV9ytpcyji0Q.png"/></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">残差方程</p></figure><p id="6321" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">图1是如何根据最佳拟合线可视化残差的示例。垂直线是残差。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/0794f40b9d56335afdf3eaa6f6b51daa.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*137-_vGGaEPEMgzDRxPO9Q.png"/></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图1 [ <a class="ae mo" href="https://stackoverflow.com/questions/51220918/python-plot-residuals-on-a-fitted-model" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a></p></figure><p id="3fed" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated"><strong class="kz ir">残差图</strong></p><p id="c923" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">典型的残差图在Y轴上有残差值，在x轴上有独立变量。下面的图2是典型残差图的一个很好的例子。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi nz"><img src="../Images/d57a147582a7b7db1c95123cc63ec878.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*rtuiEMWO4o38QZoI6zKP4Q.png"/></div></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图2 [ <a class="ae mo" href="https://www.qualtrics.com/support/stats-iq/analyses/regression-guides/interpreting-residual-plots-improve-regression/" rel="noopener ugc nofollow" target="_blank">信用</a></p></figure><p id="8793" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated"><strong class="kz ir">剩余剧情分析</strong></p><p id="fc69" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">线性回归模型最重要的假设是<strong class="kz ir"> <em class="oa">误差是独立且正态分布的。</em>T15】</strong></p><p id="b222" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">让我们来看看这个假设意味着什么。</p><p id="608f" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">每个回归模型本质上都有一定程度的误差，因为你永远不可能100%准确地预测某件事。更重要的是，随机性和不可预测性总是回归模型的一部分。因此，回归模型可以解释为:</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/eed1f62299f07034b2297cca9d86779c.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*loDBYbBaAmWWZVXKTfxUWA.png"/></div></figure><p id="4a95" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">模型中确定性的部分是我们试图用回归模型捕捉的。理想情况下，我们的线性方程模型应该准确地捕捉预测信息。本质上，这意味着如果我们获得了所有的预测信息，那么剩下的所有信息(残差)应该是完全随机的&amp;不可预测的，即随机的。因此，我们希望残差服从正态分布。这正是我们在剩余图中寻找的。那么一个好坏残积的特点是什么呢？</p><p id="9f6b" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated"><strong class="kz ir">良好残差图的特征</strong></p><p id="7f50" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">一个好的残差图的几个特征如下:</p><ol class=""><li id="d09c" class="oc od iq kz b la lt ld lu lg oe lk of lo og ls oh oi oj ok bi translated">靠近原点的点密度高，远离原点的点密度低</li><li id="f151" class="oc od iq kz b la ol ld om lg on lk oo lo op ls oh oi oj ok bi translated">它关于原点是对称的</li></ol><p id="9f8d" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">为了解释为什么图3是基于上述特征的良好残差图，我们将所有残差投影到y轴上。如图3b所示，我们最终得到一条正态分布的曲线；满足残差正态性的假设。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/663734ba7cf5babf69af163040c0870f.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*-BwXVW9WMmVUY4NYmNFCag.png"/></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图3:良好的残差图</p></figure><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi or"><img src="../Images/f300ac4a50cc2256028d06978117a224.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*40E7lY7o39jddXBKQypeTA.png"/></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图3b:投影到y轴上</p></figure><p id="16ae" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">最后，这是一个好的残差图的另一个原因是，独立于自变量(x轴)的值，残差以相同的方式近似分布。换句话说，当我们沿着x轴移动时，我们<strong class="kz ir">看不到</strong>残差值的任何模式。</p><p id="5db8" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">因此，这满足了我们早先的假设，即回归模型<strong class="kz ir">残差是独立的，并且是正态分布的。</strong></p><p id="ec34" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">利用上述特征，我们可以看出为什么图4是一个差的残差图。这个图远离原点密度高，靠近原点密度低。此外，当我们将残差投影到y轴上时，我们可以看到分布曲线不是正态的。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi os"><img src="../Images/91e7f64cf01973e83113c0cdbfd824b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*8X4bEu5Xc4ehA27j_4vhew.png"/></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图4:不良残差图示例</p></figure><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ot"><img src="../Images/3bd1b398ada38c7dcf1c00f911a430ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*IyUclnw1S9uT_t8gHhH7BA.png"/></div></div><p class="mk ml gj gh gi mm mn bd b be z dk translated">图4b:投影到y轴上</p></figure><p id="20d2" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">重要的是要理解，这些图表明我们还没有完全捕捉到模型中数据的预测信息，这就是为什么“<em class="oa">会渗入到我们的残差中。一个好的模型在使用预测信息后应该总是只剩下随机误差(回想一下确定性的&amp;随机成分)</em></p><p id="1c94" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated"><strong class="kz ir">总结</strong></p><p id="c1d6" class="pw-post-body-paragraph kx ky iq kz b la lt jr lc ld lu ju lf lg lv li lj lk lw lm ln lo lx lq lr ls ij bi translated">要验证回归模型，必须使用残差图来直观地确认模型的有效性。绘制所有自变量的所有残差值可能有点复杂，在这种情况下，您可以生成单独的图，也可以使用其他验证统计数据，如调整后的R或MAPE分数。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="4917" class="kf kg iq bd kh ki ou kk kl km ov ko kp jw ow jx kr jz ox ka kt kc oy kd kv kw bi translated"><strong class="ak">关于作者</strong></h1><p id="3f7b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">Usman Gohar是一名数据科学家，明尼阿波利斯数据科学的共同组织者，也是一名技术演讲人。他非常热衷于最新的数据科学研究，机器学习，并通过帮助和赋权年轻人在数据科学领域取得成功而蓬勃发展，特别是女性。您可以在<a class="ae mo" href="https://www.linkedin.com/in/usman-gohar/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae mo" href="https://twitter.com/UsmanGohar" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae mo" href="https://medium.com/@usman.gohar" rel="noopener">Medium</a>&amp;follow on<a class="ae mo" href="https://github.com/UsmanGohar" rel="noopener ugc nofollow" target="_blank">Github</a>上与Usman联系。</p></div></div>    
</body>
</html>