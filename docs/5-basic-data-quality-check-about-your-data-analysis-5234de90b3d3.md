# 5 关于数据分析的基本数据质量检查

> 原文：<https://towardsdatascience.com/5-basic-data-quality-check-about-your-data-analysis-5234de90b3d3?source=collection_archive---------20----------------------->

## 数据清理

## 一份全面的清单，这样你就不会错过任何重要的东西

![](img/77248bffd106b04bb406bba1f7698158.png)

照片由[阿德利·瓦希德](https://unsplash.com/@adliwahid?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

在数据驱动的一代中，我们决定具体的数据分析报告。

> ***这个决定的后果可能不值一百万美元。***

在采取任何大的行动之前，数据总是让你感到自信和舒适。然而，如果你的分析是错误的呢？那会是什么呢…

事实上，数据验证是从报告、仪表板到建模的任何数据操作的关键过程。如果你处理有缺陷的数据，你不能指望它会有任何正确的行动。如果有人用它来做决定，你也会感到痛苦。

> 我曾在工作期间犯过一次分析错误。幸运的是，我有机会修复它

但是也许你没有我幸运。

这就是为什么我总结了我自己以前在这些数据质量问题上所面临的情况，以指导你们进行任何分析。在你错过它之前记住它。

# **分析单位**

![](img/1defb99d43d09cd94160b0d593ecc68d.png)

照片由[安德鲁·尼尔](https://unsplash.com/@andrewtneel?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

一旦获得数据，您就可以从一个简单的业务问题开始任何分析。之后，您可以根据需要对数据进行探索性的数据分析。当你只有一个数据集的时候，这就容易多了。

> 但是，如果您必须将几个数据集连接在一起，该怎么办呢？分析单位在这里起着重要的作用。

让我们从简单的例子开始；您有客户数据，每行代表一个客户。您想知道每个客户持有多少张信用卡。您需要将客户数据(每个客户一行)与会员信用卡数据(每张卡一行)连接起来。

需要记住的一点是，1 个客户可以持有多张信用卡。当我们将两个数据集连接在一起时，您需要小心地跟踪行号。因为您的数据集将不再停留在客户级别，而是在信用卡级别。无论是左连接、右连接、内连接还是外连接。这将导致你的分析结论。

这个例子看起来没什么好担心的，只要你能跟踪每个数据集的级别并知道你在做什么。如果您有足够的时间来理解每个数据集的分析单位，这可能不是问题。

> 但是，如果您必须在 3 小时内完成临时分析，并向高级经理汇报。此外，你从来没有看一眼数据集。

这时候问题就出现了，随时可能发生在你身上。相信我；我必须在有限的时间内完成许多意想不到的临时任务。

如今，当我对数据进行切片和切块时，这是我必须记住的第一件事。许多人在这一点上犯了一个错误，这是每个人在向其他人展示你的分析之前都必须知道的事情。

# **缺失值**

![](img/5ee7abdaffc9f22725b9a0486a1c4d97.png)

由[迈克尔·泽兹奇](https://unsplash.com/@lazycreekimages?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

缺失值可以是从空白、非空格、NULL、NaN 等范围内的任何值。基于你的数据集和工具(pandas，spark，excel 等),可能性是无限的。)你用于数据分析。有时它已经用一个数值编码了，比如-999，999999 等等。

如果你不熟悉你处理的数据集或系统，这会让你很头疼。在某些情况下，您可以简单地假设这些空白值就是缺失值。但是，对于编码，您可以猜测它应该是什么，或者询问数据源人员这些奇怪值的含义。

> 最糟糕的情况是你没有人可以求助。有时候，甚至没有人知道这件事。

此外，如果您通过了缺失值验证的第一步，缺失值仍然会导致您得出错误的结论。

例如，如果你使用熊猫图书馆来处理数据，有一个“值计数”方法，我通常在分析过程中使用很多。此方法的默认行为不考虑缺少的值。

这是你在彻底使用任何工具之前需要了解的。您可能报告了每个不同值的数量，但是您忘记报告在该列中大约有 80 %丢失了。

> 这导致了最后不同的结论。

此外，对于建模任务，您需要选择在中做什么，因为许多实现的算法不支持数据集中的缺失值。而且，你对它的处理在某些情况下会导致预测偏差。

我写了一篇关于[过去那种缺失数据](https://padpathairush.medium.com/feature-engineering-recap-1-24968887355e)的文章。请随意看一看。解决这个问题没有简单的答案。如果你能通过询问和与他人确认来让事情变得更清楚，那将是最好的。分析团队和用户可以就该主题达成共识。

# **重复记录**

![](img/24c8b825afbb841082466b4482090075.png)

切斯特·韦德在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

数据采集可以根据业务操作过程而变化。

> 源系统捕获数据的方式可能会导致重复。

假设您在不使用 count distinct 方法的情况下处理数据。你永远也不会知道。重复可以发生在不同的层次上。复制级别取决于您有多少列以及您想要做的分析单位。

假设您想要检查信用卡级别的重复。如果您删除 customer_id 和 credit_card_number 上的重复项，效果会更好。但是如果你只对 customer_id 感兴趣，就没有必要把 credit_card_number 带进来。

最近刚自己面对数据重复。我收到了在我工作的大楼里停车的数据集。由于源系统的原因，原始数据将被入口和出口交易捕获。

> 然而，入场交易似乎是一个模型。这里介绍了复制。

没有关于入口交易的有用信息，并且它可以导致建筑物中真实交易的数量翻倍。我很幸运有运营团队过去用来对比的基准数据。删除这些行后，我可以得到类似的结果。

不幸的是，当我收到数据时，没有人告诉我其中有这样的重复。我不得不自己重新检查，这种情况下我是幸运的。

想象一下，我在不知道数据中存在重复的情况下报告了数字。在我的职业生涯中，这将是一件非常可怕的事情。

> 好奇心是这里重要的一部分。在分析过程中，你应该经常问自己。根据其他数字，这个数字对你有意义吗？

例如，您有一个大约 2000 个空位的停车位，但是您有大约 4000 个客户的会员。有可能吗？可能会，也可能不会。你是那个必须找到答案的人。

# **数据有意义吗？**

![](img/6098a1ec110a951a7efd654bc7c47c93.png)

加里·巴特菲尔德在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

数据分析是你不得不在几方来回奔波的任务。每一方都有自己对数据的理解。他们从不同的角度看待它。大多数时候，他们头脑中有一个熟悉的数据数字。你的责任是把这些数字联系起来。把每一条信息做成一幅大图。

困难的是你可能不熟悉通常的数据数量。这就是为什么我在这里提出数据对你有意义吗？

我建议你要一直怀疑数字是否正确。从前面的数据复制示例中，您可以看到，即使乍一看这个数字对您来说似乎是正确的，它也可能不是 100 %正确。除非你问自己一个问题，否则你永远不会知道这个值是对还是错。

> 我发现这个数字对你来说可能有些意义，但对其他人来说却没有意义。

业务团队是与运营紧密合作的团队。他们必须每天或每周跟踪度量值。

> 我建议您先与运营团队核对每个结论的数量，然后再最终确定给管理团队进行每个数据分析。

我曾经信任这些数据，并进一步分析它们，直到有机会与业务团队讨论。然后，事实给了我很大的打击，我的结论是不可能的。这种场景在真实的操作过程中应该不会发生。因此，我花了更多的时间来调查数据发生了什么。

> 甚至最后一切似乎都是对的。但是，它可能从一开始就错了。

经常问自己一个关于数字的问题，不要自己假设什么大的事情。你的好奇心和与他人的交流在这里是必要的。

# 真理随着时间而改变。

![](img/eabe953e1cb86546f73cb3142259c718.png)

由 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的 [Vlad Sarge](https://unsplash.com/@vladsargu?utm_source=medium&utm_medium=referral) 拍摄的照片

我曾经把分析提交给我的领导。两个星期后，他回来问我目前的分析结果。我重新运行了分析并报告了更新后的数字。但是，我得到了问题。

> 为什么这个数字在两周内变化这么大？

这个简单的问题花了我好几天才解决。问题是那天之后，我提交了分析。数据工程团队已经修补了数据湖中的表。这导致了一些行中的数字变化，这导致了我的更新的不同数量。

但是这个分析的正确数字是多少呢？答案是取决于你查询数据的日期。这些数据在两周前的那个时候是有效的，但是现在有了更多的有效数据。

> 数据的真实性会随着时间而改变

你是唯一一个遭受这个问题的人，因为你必须保证你的分析的有效性。如果您单独保存查询数据，您可以复制结果来证明您的可信度。有时候，业务团队不会理解这一点，导致对你未来分析的信任度降低。

> 那么，如何解决这个问题呢？

基于这个问题，有一个设计数据湖的最佳实践。你可以在 Robert Chang 写的[数据工程初学者指南—第二部分](https://medium.com/@rchang/a-beginners-guide-to-data-engineering-part-ii-47c4e7cbda71)中找到它。这叫做**强制等幂**。我真的建议你看看这篇文章。它在高超的解释水平上，解决了我们前面谈到的那些问题。

但是如果你没有一个数据工程团队来处理这个问题。我可能会建议您备份您的数据源。这只是为了确保你能重现过去的数字。有时候，它会挽救你的信誉。

# 最后

我们已经讨论了许多话题。在每一部分里，我都分享我过去做错了什么。有一个坚实的方法来解决一些问题，但你需要记住，并自己评论一些。数据分析是一项非常需要你关注的任务。

> 代码中的一个错误会导致可怕的结果。

当你与他人打交道时，信誉是一个重要的因素。如果你保持高水平的信用，会让其他人基于你的报告做出决定。

> 但是，如果你犯了错误，你需要勇于承认并修正自己。

这是你如何成长为职业生涯中的高管或更高职位的一部分。**你要为自己的所作所为负责！我们可以通过摔倒来学习。每个人都是从自己的错误中成长起来的，就像历史上那句名言。**

> 唯一不犯错误的人是从不做事的人。——罗斯福总统。

不要害怕去做！