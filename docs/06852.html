<html>
<head>
<title>Scraping Amazon Stores to Generate Price Alerts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抓取亚马逊商店以生成价格警报</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scraping-multiple-amazon-stores-with-python-5eab811453a8?source=collection_archive---------3-----------------------#2020-05-28">https://towardsdatascience.com/scraping-multiple-amazon-stores-with-python-5eab811453a8?source=collection_archive---------3-----------------------#2020-05-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6cb5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只需几行Python代码，您就可以构建自己的web抓取工具来监控多个商店，这样您就不会错过很多东西了！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5fd8d628a4e27d20c584088c73b78704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AyzuPdMs8CpuO8jK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对那些亚马逊交易保持警惕！(照片由<a class="ae ky" href="https://unsplash.com/@kris_ricepees?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">加里·本迪格</a>拍摄)</p></figure><h1 id="8644" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">我怎么会在这里？</h1><p id="f415" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我认为有一点是公平的，我们都有一个来自亚马逊的书签产品页面，我们疯狂地刷新它，希望价格能下降。</p><p id="e1d6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">好吧，也许不是<em class="ms">疯狂地</em>，但肯定是一天几次。</p><p id="651d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我将向您展示如何编写一个简单的Python脚本，它可以<strong class="lt iu">从他们的任何商店抓取亚马逊产品页面，并检查价格</strong>，等等。我努力使它保持简单，如果你已经知道基本的东西，你应该能够顺利地跟上。以下是我们将在这个项目中做的事情:</p><ul class=""><li id="c0d5" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm my mz na nb bi translated">创建一个<strong class="lt iu"> csv文件，其中包含我们想要的产品</strong>的链接，以及我们愿意购买的价格</li><li id="bb70" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">用<strong class="lt iu"> Beautiful Soup </strong>编写一个函数，该函数将<strong class="lt iu">循环遍历csv文件中的链接</strong>并检索关于它们的信息</li><li id="b109" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated"><strong class="lt iu">将所有东西</strong>存储在一个“数据库”中，并随时跟踪产品价格，这样我们就可以看到历史趋势</li><li id="80ae" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated"><strong class="lt iu">安排脚本在一天中的特定时间运行</strong></li><li id="a960" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated"><em class="ms"> Extra </em> —当价格低于你的限额时，创建电子邮件提醒</li></ul><blockquote class="nh ni nj"><p id="2715" class="lr ls ms lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">我还在编写一个脚本，它采用搜索词而不是产品链接，并返回所有商店中最相关的产品。如果你觉得这可能有用，请在评论中告诉我，我会写另一篇关于它的文章！</p><p id="e4c1" class="lr ls ms lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated"><strong class="lt iu">更新</strong>:我刚刚制作了一个全程视频！检查一下，让我知道你节省了多少:)</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="8fe5" class="kz la it bd lb lc nw le lf lg nx li lj jz ny ka ll kc nz kd ln kf oa kg lp lq bi translated">永恒的愿望清单…</h1><p id="01c7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">将你的爱好扩展到更专业的领域，最悲哀的事情通常是需要购买更好的设备。以摄影为例。购买一台新相机是一个可以显著影响你睡眠时间的决定。众所周知，购买新镜头也会产生类似的效果——至少我是这么认为的！不仅技术方面非常相关，需要一些研究，而且你也希望得到尽可能好的价格。</p><p id="3455" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">研究完成后，就该在我们知道的每一个网店里搜索选中的型号了。</p><p id="1fca" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将你知道的商店数量乘以选择的型号数量，你就会得到我的浏览器上打开的标签的大概数量。大多数情况下，我最终会再次访问亚马逊……就我而言，因为我在欧洲，这通常涉及到搜索意大利、法国、英国、西班牙和德国等国家的亚马逊商店。我发现同样的产品有非常不同的价格，但更重要的是，每个市场都有特定的偶尔交易。我们不想错过这个机会…</p><blockquote class="ob"><p id="824f" class="oc od it bd oe of og oh oi oj ok mm dk translated">这就是了解一点Python可以为您省钱的地方。字面意思！</p></blockquote><p id="7513" class="pw-post-body-paragraph lr ls it lt b lu ol ju lw lx om jx lz ma on mc md me oo mg mh mi op mk ml mm im bi translated">我开始测试一些网页抓取来帮助我自动完成这项任务，结果发现每个商店的HTML结构都差不多。这样我们就可以<strong class="lt iu">在所有的</strong>中使用我们的脚本来快速获得所有商店的所有价格。</p><p id="6e56" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="ms">如果你想访问我的其他网络抓取文章——以及媒体上的几乎所有内容——你考虑过订阅吗？你会大力支持我的工作！</em></p><div class="oq or gp gr os ot"><a href="https://medium.com/@fneves/membership" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">阅读媒体上的每一个故事！</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">medium.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="66cb" class="kz la it bd lb lc nw le lf lg nx li lj jz ny ka ll kc nz kd ln kf oa kg lp lq bi translated">入门指南</h1><p id="3cf3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我以前写过几篇关于网络抓取的文章，解释了漂亮的汤是如何工作的。这个python包非常容易使用，你可以查看<a class="ae ky" rel="noopener" target="_blank" href="/looking-for-a-house-build-a-web-scraper-to-help-you-5ab25badc83e?source=---------11------------------"> <strong class="lt iu"> <em class="ms">我写的这篇文章</em> </strong> </a>是为了从房屋列表中收集价格。简而言之，Beautiful Soup是一个工具，您可以使用它从HTML页面中访问特定的标签。即使你以前没有听说过它，我打赌你一看到代码就能明白它在做什么。</p><p id="1ef1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您需要一个名为TRACKER_PRODUCTS.csv的文件，其中包含您想要跟踪的产品的链接。本  <strong class="lt iu"> </strong> Github库中提供了一个模板。每次运行后，scraper将结果保存在一个名为“search _ history _[随便什么日期]”的不同文件中。xlsx”。这些是<em class="ms"> search_history </em>文件夹中的文件。您也可以在存储库中找到它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/948a141576fc4ca50b9d079c410e5059.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*zzGJB08Cd_uHOwi7g9lGoQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是我们需要的文件夹和文件结构</p></figure><p id="a16f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于我不想让事情变得过于复杂，我将首先使用Jupyter笔记本向您展示代码输出。但是最后，我们会给这段代码一些类固醇，并在一个<strong class="lt iu"> Amazon_Scraper.py </strong>文件中把它变成一个不错的函数。最重要的是，我们将创建一个计划任务来不时地运行它！</p><h2 id="dda3" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">我们需要的就是汤</h2><p id="231a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们从笔记本视图开始。在你的Jupyter笔记本上使用下面的代码片段，这样你就可以看到代码的每一部分是做什么的。</p><p id="b2cb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里最不为人知的包大概就是<em class="ms"> glob </em>了。这是一个很好的包，它允许你在一个文件夹中获得文件名列表之类的东西。请求将负责获取我们在跟踪列表中设置的URL。美丽的汤是我们这次挑战的网络抓取工具。如果你需要安装它们中的任何一个，简单的pip/conda安装就可以了。有很多资源可以帮助你，但通常情况下，<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> Python包索引</a>页面会有。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pv no l"/></div></figure><p id="0083" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">需要HEADERS变量来传递<em class="ms"> get </em>方法。我在上面提到的其他文章中也讨论了它，但是当使用<em class="ms">请求</em>包访问URL时，您可以将它视为您的身份证。它告诉服务器你正在使用哪种浏览器。你可以在这里阅读更多关于这个<a class="ae ky" href="http://www.networkinghowtos.com/howto/common-user-agent-list/" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="f70a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在可以从<a class="ae ky" href="https://github.com/fnneves/amazon_webscraper" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">存储库</strong> </a>中获取名为TRACKER_PRODUCTS.csv的csv文件，并将其放在文件夹“trackers”中。</p><p id="2fa4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后我们把它放进美味的汤里。这将使HTML变得更加“容易理解”，(巧妙地)命名为<strong class="lt iu"> <em class="ms">汤</em> </strong> <em class="ms">。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新鲜的王子回归让你开心！</p></figure><h2 id="5bd1" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">应该挑哪些食材？</h2><p id="6294" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们从简单的东西开始，比如产品的名称。虽然这几乎是多余的，但是一旦我们检查了excel文件，给出一些关于产品的细节是一件好事。</p><p id="6ac7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我添加了其他字段，如评论分数/计数和可用性，不是因为它们与购买决策相关，而是因为我对这些东西有点强迫症，我更喜欢有“有一天会有用”的变量……看到特定产品的评论分数的变化可能会很有趣。也许不会，但无论如何我们会保留它！</p><p id="906c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">每当你看到<strong class="lt iu"> <em class="ms"> soup.find </em> </strong>的时候，就意味着我们正在试图使用页面的HTML标签(比如div，或者span等等)来寻找页面的元素。)和/或属性(名称、id、类别等。).与<strong class="lt iu"> <em class="ms"> soup.select </em> </strong>一样，我们使用的是CSS选择器。你可以在浏览器上使用Inspect功能并导航页面代码，但我最近发现了一个非常方便的Chrome扩展，名为<strong class="lt iu"> SelectorGadget </strong>，我强烈推荐它。这使得找到正确的代码更加容易。</p><blockquote class="ob"><p id="d26c" class="oc od it bd oe of og oh oi oj ok mm dk translated">在这一点上，如果你觉得很难理解选择器是如何工作的，我鼓励你<strong class="ak">阅读这篇</strong> <a class="ae ky" rel="noopener" target="_blank" href="/looking-for-a-house-build-a-web-scraper-to-help-you-5ab25badc83e?source=---------11------------------"> <strong class="ak">文章</strong> </a> <strong class="ak">，在那里我会更详细地解释一下</strong>。</p></blockquote><figure class="px py pz qa qb kn"><div class="bz fp l di"><div class="pv no l"/></div></figure><p id="37ee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面你可以看到每个部分返回的内容。如果您刚开始使用web抓取，但仍然不完全理解它是如何工作的，我建议您将代码分成几部分，慢慢弄清楚每个变量在做什么。</p><p id="4128" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我总是在网络抓取文章中写这个<strong class="lt iu">免责声明</strong>，但是如果你几个月后阅读这篇文章，这里的代码可能不再正确工作了——例如，如果亚马逊改变页面的HTML结构，这可能会发生。</p><p id="abaa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果发生这种情况，我会鼓励你去解决它！一旦<strong class="lt iu">你分解代码，使用我的例子</strong>这真的没什么大不了的。只需要修复你的代码正在获取的选择器/标签。你可以在下面留言，我会尽力帮你。</p><h2 id="0b98" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">(反)构汤</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qc"><img src="../Images/3c7065543c6e0fad2cc0024bfb292ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0iv6GjNknUI1_3V6bT8Bw.png"/></div></div></figure><p id="e4d4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">获得我们产品的名称应该是小菜一碟。价格部分更具挑战性，最后，我不得不添加几行代码来纠正它，但是在这个例子中，这部分就足够了。</p><p id="8988" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您将在脚本的最终版本中看到，我还为在美国商店购物的读者添加了获取美元价格的功能！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qd"><img src="../Images/fb75f7c1688acc3b4b6c9bbca2c890eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LcgXhUVL_YKawpLfgD5SHw.png"/></div></div></figure><p id="fc9d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这导致了try/except控件的增加，以确保我每次都得到正确的字段。在编写和测试web scraper时，我们迟早会面临同样的选择。</p><p id="f2e9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们可能会浪费2个小时来获取每次都能得到页面正确部分的HTML片段，而不能保证这是可能的！或者我们可以简单地即兴创作一些错误处理条件，这将<strong class="lt iu">让我们更快地使用工作工具</strong>。</p><p id="a181" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我并不总是这样或那样做，但是当我写代码的时候，我确实学到了更多的注释。这真的有助于提高代码的质量，甚至当你想回去重新开始以前的项目时。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/17f17230b3af418e791b34e216b7f9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lo1tVJgB07weLNrRNjXboQ.png"/></div></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/eb151073f4cc5ab8f9246b2cf5d4fb93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/1*rr-FFN01yrd0FfhT8WbVGg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是运行中的脚本</p></figure><h1 id="1468" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">奇迹发生的地方</h1><p id="400c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如你所看到的，获得单独的成分是非常容易的。测试完成后，是时候编写一个合适的脚本了，它将:</p><ol class=""><li id="af2d" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm qg mz na nb bi translated">从csv文件中获取URL</li><li id="425a" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm qg mz na nb bi translated">使用while循环抓取每个产品并存储信息</li><li id="344f" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm qg mz na nb bi translated">在excel文件中保存所有结果，包括以前的搜索</li></ol><p id="3caa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要编写这个，您需要您最喜欢的代码编辑器(我使用Spyder，它随Anaconda安装一起提供— <em class="ms">旁注:版本4非常好</em>)并创建一个新文件。我们就叫它<strong class="lt iu"> Amazon_Scraper.py </strong>。</p><p id="b294" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对我们在上面看到的零碎内容有一些补充，但我希望评论有助于使它变得清楚。这个文件也在<a class="ae ky" href="https://github.com/fnneves/amazon_webscraper" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">资源库</strong> </a>中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pv no l"/></div></figure><h2 id="ea7a" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">跟踪产品</h2><p id="57ad" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">关于文件TRACKER_PRODUCTS.csv的几点说明，这是一个非常<a class="ae ky" href="https://github.com/fnneves/amazon_webscraper/tree/master/trackers" rel="noopener ugc nofollow" target="_blank">简单的文件</a>，有三列(“url”、“code”、“buy_below”)。<strong class="lt iu">您可以在这里添加想要监控的产品URLs】。</strong></p><blockquote class="nh ni nj"><p id="99b9" class="lr ls ms lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">你甚至可以把这个文件放在你同步的Dropbox文件夹的某个部分(之后用新的文件路径更新脚本)，这样你就可以用你的手机随时更新它。如果您将脚本设置为在服务器或您家中的笔记本电脑上运行，它将在下次运行时从文件中选择新产品链接。</p></blockquote><h2 id="96ca" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">搜索历史</h2><p id="24eb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">SEARCH_HISTORY文件也是如此。第一次运行时，您需要将一个空文件(在<a class="ae ky" href="https://github.com/fnneves/amazon_webscraper" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">存储库</strong> </a>中找到)添加到文件夹“search_history”中。在上面脚本的第116行中，当定义<em class="ms"> last_search </em>变量时，我们试图在搜索历史文件夹中找到<strong class="lt iu">最后一个文件</strong>。<strong class="lt iu">这就是为什么你也需要在这里映射你自己的文件夹</strong>。只需将文本替换为运行这个项目的文件夹(在我的例子中是“Amazon Scraper”)。</p><h2 id="1ae0" class="pj la it bd lb pk pl dn lf pm pn dp lj ma po pp ll me pq pr ln mi ps pt lp pu bi translated">价格预警</h2><p id="ca91" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在上面的脚本中，第97行有一个区域，如果价格低于你的限制，你可以用它来发送一封带有某种警告的电子邮件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="qh no l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">每当你的价格达到目标时，就会发生这种情况。</p></figure><p id="7f35" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它出现在try命令中的原因是，并不是每次我们从产品页面获得实际价格时，逻辑比较都会返回一个错误——例如，如果产品不可用。</p><p id="6463" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我不想让脚本变得太复杂，所以我把它从最终代码中去掉了。然而，你可以在<a class="ae ky" rel="noopener" target="_blank" href="/if-you-like-to-travel-let-python-help-you-scrape-the-best-fares-5a1f26213086"> <strong class="lt iu">这篇文章</strong> </a>中拥有来自一个非常相似项目的代码。</p><p id="1934" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我在脚本中留下了一个带有购买警告的打印指令，所以您只需要用电子邮件部分替换它。就当是你的作业吧！</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="8d08" class="kz la it bd lb lc nw le lf lg nx li lj jz ny ka ll kc nz kd ln kf oa kg lp lq bi translated">设置运行脚本的计划任务</h1><p id="6870" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">亲爱的Mac/Linux读者，这部分将只讨论Windows中的调度程序，因为这是我使用的系统。对不起Mac/Linux用户！我100%肯定这些系统也有替代方案。如果你能在评论里让我知道，<strong class="lt iu">我会在这里加上</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qi"><img src="../Images/b09945568b7b5bbe5a53a8ec827b6b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gA-qKnGInSApPVVQjtiZUw.png"/></div></div></figure><p id="44d3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">设置一个自动化任务来执行我们的小脚本并不困难:</p><p id="8e97" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> 1 </strong> —首先打开“任务计划程序”(只需按下windows键并输入)。然后选择“创建任务”并选择“触发器”选项卡。我每天10点和19点30分跑步。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/2da92c0acb8ca88a512afe2b8e90c7f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*G1o98xt3mViApP7KQUcmBw.png"/></div></figure><p id="92d3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> 2 </strong> —接下来你移动到动作选项卡。在这里，您将添加一个操作，并为“程序/脚本”框选择Python文件夹位置。我的位于程序文件目录中，正如你在图片中看到的。</p><p id="6531" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> 3 </strong> —在arguments框中，您要键入我们的函数文件名。</p><p id="c975" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> 4 </strong> —我们将告诉系统在我们的文件Amazon_Scraper.py所在的文件夹中启动这个命令<strong class="lt iu">。</strong></p><p id="f3d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从这里开始，任务就可以运行了。您可以探索更多的选项，并进行测试以确保它的工作。这是用Windows任务计划程序安排脚本自动运行的基本方法！</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="768b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我认为<strong class="lt iu">我们涵盖了许多有趣的特性</strong>你现在可以用它们来探索其他网站或者构建更复杂的东西。感谢您的阅读，如果您有任何问题或建议，我会尽量回复所有邮件！如果我在下面看到一些请求，我可能会考虑做一个<strong class="lt iu">视频教程</strong>，所以让我知道你是否愿意把它和文章放在一起。</p><p id="4c67" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想看我的其他网页抓取例子，这里有两个不同的项目:</p><div class="oq or gp gr os ot"><a rel="noopener follow" target="_blank" href="/looking-for-a-house-build-a-web-scraper-to-help-you-5ab25badc83e"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">我在找房子，所以我用Python做了一个web scraper！</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">几个月后，我将不得不离开我租的公寓，去找一个新的。尽管这种经历很痛苦…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="qk l pe pf pg pc ph ks ot"/></div></div></a></div><div class="oq or gp gr os ot"><a rel="noopener follow" target="_blank" href="/increase-your-instagram-followers-with-a-simple-python-bot-fde048dce20d"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">用一个简单的Python机器人增加你的Instagram粉丝</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">我在4天内有了500个真正的追随者！</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="ql l pe pf pg pc ph ks ot"/></div></div></a></div><blockquote class="nh ni nj"><p id="e3a5" class="lr ls ms lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">如果你读到这里，你可能已经意识到我喜欢摄影，所以为了表达我的谢意，我将留给你一张我的照片！</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/070c1f8f69578fa25e3207b8c51afc5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*homd10YksD3I0B9Z2gAReg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">夜晚的卢浮宫金字塔，还有一个<a class="ae ky" href="https://fnevesphotography.pixieset.com/?utm_source=tdsfamz" rel="noopener ugc nofollow" target="_blank">不要脸的塞给展柜</a>我的一个爱好！</p></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="53d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="ms">感谢您的阅读！一如既往，我欢迎反馈和建设性的批评。如果你想取得联系，可以在这里联系我</em><a class="ae ky" href="https://www.linkedin.com/in/fabioneves/" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu"><em class="ms"/></strong></a><strong class="lt iu"><em class="ms"/></strong><em class="ms">或者直接回复下面的文章。</em></p></div></div>    
</body>
</html>