<html>
<head>
<title>How I Coded Technical Indicators for Bitcoin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何为比特币的技术指标编码的</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/technical-indicators-on-bitcoin-using-python-c392b4a33810?source=collection_archive---------10-----------------------#2020-03-13">https://towardsdatascience.com/technical-indicators-on-bitcoin-using-python-c392b4a33810?source=collection_archive---------10-----------------------#2020-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d140" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python创建比特币技术指标</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5e81c28a5d77e54323be380106f67ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fij2MbM4m1VAqlUq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿列克西·里斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="82ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">谈到交易，有很多种技术可以用来寻找最佳投资时机。有些人可以看看财务状况，看看幕后是否有价值。其他人可能会看每日新闻，观察它如何影响当前价格。另一组可能实际上观察过去的价格变动，并试图辨别可能的模式来确定未来的价格变动。</p><p id="3677" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">技术分析</strong>关注观察过去价格和运动来预测未来价格的群体。通过利用技术分析，我们可以从一个元素的价格历史中得出许多不同的模式。过去半个世纪发展起来的数学公式已经被用来从股票的价格和交易量历史中推导出新的价值。这些公式的返回值就是我们所说的<em class="me">技术指标</em>。</p><p id="9c40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在交易比特币这种资源的时候，除了它的价格历史和成交量，没有太多可以分析的。如果你看一下它的<a class="ae ky" href="https://finance.yahoo.com/quote/BTC-USD/" rel="noopener ugc nofollow" target="_blank"> <em class="me">雅虎财经页面</em> </a>并与任何一只<a class="ae ky" href="https://finance.yahoo.com/quote/AAPL?p=AAPL" rel="noopener ugc nofollow" target="_blank"> <em class="me">随机股票的页面</em> </a>进行比较，你会发现它少了一些财务信息。这是因为比特币不是公司而是货币。比特币没有<em class="me">资产负债表</em>、<em class="me">损益表</em>、<em class="me">等等</em>。</p><p id="a232" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在没有基本面信息的情况下，我们可以在交易比特币时利用技术指标。如果我们想要向交易算法或机器学习预测模型添加更多变量，那么我们可以向数据集引入更多特征(<em class="me">技术指标</em>)，而不是通常的价格和交易量历史。当利用机器学习模型时，这种策略可能有助于预测未来价格。</p><p id="3297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将利用Python的多个库，用Python编写这些技术指标。</p><blockquote class="mf mg mh"><p id="520e" class="kz la me lb b lc ld ju le lf lg jx lh mi lj lk ll mj ln lo lp mk lr ls lt lu im bi translated">在这里注册一个中级会员，可以无限制地访问和支持像我这样的内容！在你的支持下，我赚了一小部分会费。谢谢！</p></blockquote></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="444c" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">技术指标</h1><p id="19d5" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">我们将尝试的技术指标有:</p><ul class=""><li id="275f" class="np nq it lb b lc ld lf lg li nr lm ns lq nt lu nu nv nw nx bi translated"><a class="ae ky" href="https://school.stockcharts.com/doku.php?id=technical_indicators:relative_strength_index_rsi" rel="noopener ugc nofollow" target="_blank">相对强度指数</a></li><li id="78de" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.investopedia.com/terms/s/stochasticoscillator.asp" rel="noopener ugc nofollow" target="_blank">随机振荡器</a></li><li id="e91d" class="np nq it lb b lc ny lf nz li oa lm ob lq oc lu nu nv nw nx bi translated"><a class="ae ky" href="https://www.investopedia.com/terms/s/sma.asp" rel="noopener ugc nofollow" target="_blank">简单移动平均线</a></li></ul><p id="d223" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些指标看起来很简单，我们可以开发一个函数来创建新的值和特性，并将其引入到我们的数据集中。</p><p id="263b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了开发这些功能，让我们首先导入必要的库，同时<a class="ae ky" href="https://finance.yahoo.com/quote/BTC-USD/history?p=BTC-USD" rel="noopener ugc nofollow" target="_blank">下载比特币</a>的最新价格历史。价格历史的另一个选项是使用金融数据API，如<a class="ae ky" href="https://eodhistoricaldata.com/r/?ref=31CX3ILN" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> EOD历史数据</strong> </a>。注册是免费的，你可以获得大量的金融数据。<em class="me">披露:我通过上面的链接从任何购买中赚取一小笔佣金。</em></p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="981d" class="oi mt it oe b gy oj ok l ol om">import pandas as pd<br/>import _pickle as pickle<br/>import numpy as np<br/>import matplotlib as plt<br/>plt.style.use('bmh')</span><span id="de4a" class="oi mt it oe b gy on ok l ol om">df = pd.read_csv('BTC-USD.csv')</span></pre><p id="44f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行这段代码时，请看一下熊猫数据帧:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/5bacbce9140f4f8d4a3943ba47a9b015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GgIjDZmwbF2IXzga-5l0Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示BTC价格和交易量历史的数据框架</p></figure><p id="d98f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后的另一个步骤是将索引转换成日期时间格式。这是一个简单的过程，只需要几行代码:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="373f" class="oi mt it oe b gy oj ok l ol om"># Datetime conversion<br/>df['Date'] = pd.to_datetime(df.Date)</span><span id="265b" class="oi mt it oe b gy on ok l ol om"># Setting the index<br/>df.set_index('Date', inplace=True)</span></pre><p id="49e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过运行这些代码行，可视化该数据集中的任何列或要素将变得更加容易。</p><h2 id="a082" class="oi mt it bd mu op oq dn my or os dp nc li ot ou ne lm ov ow ng lq ox oy ni oz bi translated">为指标编码</h2><p id="5612" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">有了可供我们操作的数据，让我们从编写一些简单的函数开始，这些函数将给出我们需要的技术指标值。(<em class="me">这些指标的公式可以在技术指标</em>的链接中找到)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa pb l"/></div></figure><p id="c8f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们在适当的列上运行这些函数，我们将从这些技术指标中获得一组新的特性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/c1a7434b1d54b5e7a38337576c4bdc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBq6bcl3W5yjxAe-5DrEQA.png"/></div></div></figure><p id="bc63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不错！我们能够成功地进行特征工程，并将这些新数据引入到我们的数据集中。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="a176" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">检查我们的数据或值</h1><p id="2b8e" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">但是，我们如何验证这些值呢？嗯，有在线查看的选项，例如带有指标的股票图表，它会向我们显示特定时间的正确值。一种选择是将我们的价值观与雅虎财务图表进行比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/5803a789960ebfb86141477e90a796ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WU98tsrYDIiZ7OxX3yotKg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">雅虎财经为BTC制作的图表</p></figure><p id="a7ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们将我们的技术指标值与图表进行比较时，我们可以看到并不匹配。可能是函数有问题，或者我们漏了一些计算。不管怎样，我们的功能并没有像我们希望的那样运行。</p><p id="4bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将何去何从？我们可以回去试着修改我们的代码，或者我们可以尝试一种更实际的方法。这种方法将使用已经为我们编写和提供的技术分析库。大多数时候，使用Python库进行这类计算比我们自己编写函数要好。</p><p id="e64f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用的库简单地称为— <strong class="lb iu"> <em class="me"> ta </em> </strong>。您可以单击下面的链接，了解如何开始使用该库的说明:</p><div class="pe pf gp gr pg ph"><a href="https://technical-analysis-library-in-python.readthedocs.io/en/latest/" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">欢迎来到Python文档中的技术分析库！-技术分析库在…</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">这是一个金融时间序列数据集(开盘、收盘、盘高、盘低、成交量)的技术分析库。你可以用它…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">python.readthedocs.io中的技术分析库</p></div></div></div></a></div><p id="36c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里提供的函数比我们创建的函数更加通用，所以让我们使用它们。</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="ab72" class="oi mt it oe b gy oj ok l ol om"># Importing Library<br/>import ta</span><span id="fdb1" class="oi mt it oe b gy on ok l ol om"># TA's RSI<br/>df['ta_rsi'] = ta.momentum.rsi(df.Close)</span><span id="aadc" class="oi mt it oe b gy on ok l ol om"># TA's Stochastic Oscillator<br/>df['ta_stoch_k'] = ta.momentum.stoch(df.High, df.Low, df.Close)<br/>df['ta_stoch_d'] = ta.momentum.stoch_signal(df.High, df.Low, df.Close)</span></pre><p id="2567" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行上述代码后，我们将得到下面的数据框架:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/c454404a4f230173898121c9a5ef1d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3fIh_4v2Ma_0cYxKnBdCA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的价值观与助教图书馆的价值观相比</p></figure><p id="8687" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，我们创造的价值与TA的价值有很大的不同。我们还可以用雅虎财经的图表再次检查这些值的有效性，并看到它们确实匹配。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="b781" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="de0c" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">在尝试创建我们自己的技术指标函数之后，我们发现了一个更好的方法，那就是导入一个技术分析库。一般来说，最好使用Python库，而不是你自己编写的函数，因为它们通常比我们可能编码的任何东西都要优化得多。该库还为我们提供了添加更多指示器的选项，而不是试图自己编码。最后，我们能够练习编码出一些简单的算法和函数，尽管它们没有我们希望的那么精确。</p><p id="9458" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦我们构建了这个充满新功能和价值的新数据框架，我们现在就可以将这些额外的数据输入到机器学习模型中。这些数据是易于理解的熊猫格式，可用于潜在的时间序列预测模型。希望我们可以通过使用这些额外的技术指标来改善预测结果。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="5f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://twitter.com/_Marco_Santos_" rel="noopener ugc nofollow" target="_blank"> <em class="me">在Twitter上关注我:@_Marco_Santos_ </em> </a></p><h1 id="7467" class="ms mt it bd mu mv pr mx my mz ps nb nc jz pt ka ne kc pu kd ng kf pv kg ni nj bi translated">资源</h1><div class="pe pf gp gr pg ph"><a href="https://github.com/marcosan93/BTC-Forecaster" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">马克桑93/BTC-预报员</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">使用机器和深度学习模型预测BTC的未来价格-Marcos an 93/BTC-预测者</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">github.com</p></div></div><div class="pw l"><div class="px l py pz qa pw qb ks ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a href="https://technical-analysis-library-in-python.readthedocs.io/en/latest/" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">欢迎来到Python文档中的技术分析库！-技术分析库在…</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">这是一个金融时间序列数据集(开盘、收盘、盘高、盘低、成交量)的技术分析库。你可以用它…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">python.readthedocs.io中的技术分析库</p></div></div></div></a></div></div></div>    
</body>
</html>