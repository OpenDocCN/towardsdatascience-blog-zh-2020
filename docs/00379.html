<html>
<head>
<title>How to Scrape Tweets From Twitter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Twitter上抓取推文</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-scrape-tweets-from-twitter-59287e20f0f1?source=collection_archive---------1-----------------------#2020-01-12">https://towardsdatascience.com/how-to-scrape-tweets-from-twitter-59287e20f0f1?source=collection_archive---------1-----------------------#2020-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="9139" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">一个基本的Twitter抓取教程</h2><div class=""/><div class=""><h2 id="16d6" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Python从Twitter抓取推文的快速介绍</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/714a038a20fb4230fb82710655b906e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sDHp0R3cYVgCNToYNE79Vg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片来自P <a class="ae lh" href="https://www.pexels.com/photo/apple-applications-apps-cell-phone-607812/" rel="noopener ugc nofollow" target="_blank"> exels </a></p></figure><h1 id="0fc9" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">概观</h1><p id="ac2d" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">社交媒体可以成为消费者情绪方面的数据金矿。Twitter等平台有助于保存有用的信息，因为用户可能会发布未经过滤的意见，这些意见很容易被检索到。将这些信息与其他公司内部信息相结合，有助于洞察人们对公司、产品等的总体看法。</p><p id="9220" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">本教程旨在简单快速地介绍如何使用Tweepy的Twitter API或Dmitry Mottl的GetOldTweets3从Python中抓取tweets。为了给本教程提供指导，我决定集中在两个方面:抓取特定用户的推文和从一般文本搜索中抓取推文。</p><p id="e9c3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd"> <em class="nb">由于对抓取推文的非编码解决方案感兴趣，我的团队正在创建一个应用程序来满足这一需求。是的，这意味着你不必编写代码来收集数据！我们目前正在对我们的应用Socialscrapr进行Alpha测试。如果您想参与或在下一个测试阶段开放时被联系，请注册我们下面的邮件列表！</em> </strong></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="a6a8" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">Tweepy vs GetOldTweets3</h1><h2 id="312e" class="ne lj it bd lk nf ng dn lo nh ni dp ls mj nj nk lu mn nl nm lw mr nn no ly iz bi translated">十二岁</h2><p id="68e9" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">在我们开始实际的抓取之前，了解这两个库都提供了什么是很重要的，所以让我们来分析一下这两个库之间的区别，以帮助您决定使用哪一个。</p><p id="4bff" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">Tweepy是一个用于访问Twitter API的Python库。Tweepy提供了几种不同类型和级别的API访问，如这里的<a class="ae lh" href="https://developer.twitter.com/en/products/products-overview" rel="noopener ugc nofollow" target="_blank">所示</a>，但这些都是针对非常具体的用例。Tweepy能够完成各种任务，不仅仅是查询tweets，如下图所示。出于相关性的考虑，我们将只关注使用这个API来抓取tweets。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi np"><img src="../Images/62649faad69da719be3c3f3a18f19373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6XaGx86kzaXS_XVpPXx6Q.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">通过Tweepy的标准API提供的各种功能列表。</p></figure><p id="c97d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用Tweepy抓取推文有局限性。标准API仅允许您检索7天前的推文，并且仅限于在15分钟的窗口内抓取18，000条推文。但是，可以增加该限制，如这里的<a class="ae lh" href="https://bhaskarvk.github.io/2015/01/how-to-use-twitters-search-rest-api-most-effectively./" rel="noopener ugc nofollow" target="_blank">所示</a>。此外，使用Tweepy，你最多只能返回3200条用户最近的推文。使用Tweepy对于那些试图利用Twitter的其他功能、进行复杂查询或者希望为每条推文提供最广泛信息的人来说非常有用。</p><h2 id="e5dc" class="ne lj it bd lk nf ng dn lo nh ni dp ls mj nj nk lu mn nl nm lw mr nn no ly iz bi translated">GetOldTweets3</h2><p id="745c" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><strong class="mc jd"> <em class="nb">更新:由于TWITTER的API发生变化，GETOLDTWEETS3不再运行。SNSCRAPE已经成为一个免费库的替代品，你可以使用它来清除TWEEPY的免费限制。我的文章在这里可用为</em></strong><a class="ae lh" href="https://medium.com/better-programming/how-to-scrape-tweets-with-snscrape-90124ed006af" rel="noopener"><strong class="mc jd"><em class="nb">SNSCRAPE</em></strong></a><strong class="mc jd"><em class="nb">。</em>T13】</strong></p><p id="9b87" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">GetOldTweets3由Dmitry Mottl创建，是Jefferson Henrqiue的GetOldTweets-python的改进分支。它不提供Tweepy拥有的任何其他功能，而是只专注于查询Tweepy，并且没有Tweepy相同的搜索限制。这个包允许你检索大量的推文和一周前的推文。但是，它没有提供Tweepy拥有的信息量。下图显示了使用这个包可以从tweets中检索到的所有信息。同样值得注意的是，到目前为止，使用GetOldTweets3从tweet访问地理数据还有一个未解决的问题。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nq"><img src="../Images/990d21b6f7a6214d9e8fbdc8661cacef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JAoc1ZIPw7kuQm96S-zwew.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">GetOldTweet3的Tweet对象中可检索的信息列表。</p></figure><p id="4e7c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用GetOldTweets3是一个很好的选择，对于那些正在寻找一种快速简洁的抓取方式的人来说，或者想要解决标准Tweepy API搜索限制的人来说，可以抓取大量的Tweepy或超过一周的tweet。</p><p id="13ce" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">虽然他们关注的是非常不同的事情，但这两种选择很可能足以满足大多数人通常的大部分需求。直到你有了明确的目标，你才真正需要选择使用哪一个选项。</p><p id="0c5e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">好了，解释够了。这是一个刮擦教程，所以让我们进入编码。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/d3bf26e8e5f345bfc67f921635629d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4rMivDDauz8sM-KiJuCEA.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片来自<a class="ae lh" href="https://www.pexels.com/photo/man-in-grey-sweater-holding-yellow-sticky-note-879109/" rel="noopener ugc nofollow" target="_blank">像素</a></p></figure><p id="f44a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd"> <em class="nb">更新:我写了一篇后续文章，更深入地探讨了如何从推文中提取更多信息，比如用户信息，以及细化对推文的查询，比如按位置搜索推文。如果你读了这一节，并决定你需要更多，我的后续文章可用</em> </strong> <a class="ae lh" rel="noopener" target="_blank" href="/how-to-scrape-more-information-from-tweets-on-twitter-44fd540b8a1f"> <strong class="mc jd"> <em class="nb">在这里</em> </strong> </a> <strong class="mc jd"> <em class="nb">。</em> </strong></p><p id="1290" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><em class="nb">以下章节的Jupyter笔记本在我的GitHub </em> <a class="ae lh" href="https://github.com/MartinKBeck/TwitterScraper/tree/master/BasicScraper" rel="noopener ugc nofollow" target="_blank"> <em class="nb">这里</em> </a> <em class="nb">都有。我创建了从这些示例查询中导出CSV文件的函数。</em></p><h1 id="cb70" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">用Tweepy刮</h1><p id="3a86" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">Tweepy的抓取分为两个部分，因为它需要Twitter开发人员证书。如果您已经从以前的项目证书，那么你可以忽略这一部分。</p><h2 id="3a32" class="ne lj it bd lk nf ng dn lo nh ni dp ls mj nj nk lu mn nl nm lw mr nn no ly iz bi translated">获取Tweepy的凭据</h2><p id="de15" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">为了获得证书，你必须在这里申请成为Twitter开发者。这需要你有一个Twitter账户。申请会问各种各样关于你想做什么样的工作的问题。不要苦恼，这些细节不必涉及广泛，过程也相对容易。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/f6d8d36d015fec93ba2264bca698c016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QsXTPFep9f5XTWslzlJq3g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Twitter开发者登陆页面。</p></figure><p id="05ac" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">完成申请后，审批过程相对较快，应该不会超过几天。获得批准后，您需要登录并在开发人员仪表板中设置开发环境，然后查看该应用程序的详细信息，以检索您的开发人员凭据，如下图所示。除非您特别请求访问其他提供的API，否则您现在将能够使用标准的Tweepy API。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nt"><img src="../Images/a4a4e101cb621c0450081cace2f2394f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xyMtrMZypxhYgmWW5sHsyg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Tweepy开发人员凭据。</p></figure><h2 id="f151" class="ne lj it bd lk nf ng dn lo nh ni dp ls mj nj nk lu mn nl nm lw mr nn no ly iz bi translated">使用Tweepy刮擦</h2><p id="8f80" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">太好了，你有了Twitter开发者证书，终于可以开始抓取一些推文了。</p><p id="debd" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">设置Tweepy授权:</strong></p><p id="dfb9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">在开始之前，Tweepy必须授权你有资格使用它的API。下面的代码片段是一个人如何授权自己。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="5cbc" class="ne lj it nv b gy nz oa l ob oc">consumer_key = "XXXXXXXXX"<br/>consumer_secret = "XXXXXXXXX"<br/>access_token = "XXXXXXXXX"<br/>access_token_secret = "XXXXXXXXX"</span><span id="8ce5" class="ne lj it nv b gy od oa l ob oc">auth = tweepy.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(access_token, access_token_secret)<br/>api = tweepy.API(auth,wait_on_rate_limit=True)</span></pre><p id="a778" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">抓取特定Twitter用户的推文:</strong></p><p id="9e2a" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我关注的搜索参数是id和count。Id是特定Twitter用户的@ username，count是您想要从特定用户的时间表中抓取的最近推文的最大数量。在这个例子中，我使用Twitter首席执行官的@jack用户名，选择抓取他最近的100条推文。大部分的刮码都比较快，比较直接。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="187a" class="ne lj it nv b gy nz oa l ob oc">username = 'jack'<br/>count = 150</span><span id="3c94" class="ne lj it nv b gy od oa l ob oc">try:     <br/> # Creation of query method using parameters<br/> tweets = tweepy.Cursor(api.user_timeline,id=username).items(count)<br/> <br/> # Pulling information from tweets iterable object<br/> tweets_list = [[tweet.created_at, tweet.id, tweet.text] for tweet in tweets]<br/> <br/> # Creation of dataframe from tweets list<br/> # Add or remove columns as you remove tweet information<br/> tweets_df = pd.DataFrame(tweets_list)</span><span id="5abe" class="ne lj it nv b gy od oa l ob oc">except BaseException as e:<br/>      print('failed on_status,',str(e))<br/>      time.sleep(3)</span></pre><p id="ce37" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果您想进一步定制您的搜索，您可以在这里查看api.user_timeline方法<a class="ae lh" href="https://tweepy.readthedocs.io/en/latest/api.html#API.user_timeline" rel="noopener ugc nofollow" target="_blank">中可用的其余搜索参数</a>。</p><p id="b729" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">从文本搜索查询中抓取推文:</strong></p><p id="0e4c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我重点关注的搜索参数是q和count。q应该是你想要搜索的文本搜索查询，count也是你想要从这个特定的搜索查询中抓取的最近的tweets的最大数量。在这个例子中，我收集了与2020年美国大选相关的100条最新推文。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="df36" class="ne lj it nv b gy nz oa l ob oc">text_query = '2020 US Election'<br/>count = 150</span><span id="cf0c" class="ne lj it nv b gy od oa l ob oc">try:<br/> # Creation of query method using parameters<br/> tweets = tweepy.Cursor(api.search,q=text_query).items(count)<br/> <br/> # Pulling information from tweets iterable object<br/> tweets_list = [[tweet.created_at, tweet.id, tweet.text] for tweet in tweets]<br/> <br/> # Creation of dataframe from tweets list<br/> # Add or remove columns as you remove tweet information<br/> tweets_df = pd.DataFrame(tweets_list)<br/> <br/>except BaseException as e:<br/>    print('failed on_status,',str(e))<br/>    time.sleep(3)</span></pre><p id="5c89" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果您想进一步定制您的搜索，您可以在此处查看api.search方法<a class="ae lh" href="https://tweepy.readthedocs.io/en/latest/api.html#API.search" rel="noopener ugc nofollow" target="_blank">中可用的其余搜索参数。</a></p><p id="c385" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><em class="nb">推文中还有哪些信息是可以获取的？</em></p><p id="99a6" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用Tweepy进行查询的优势之一是tweet对象中包含的信息量。如果你对获取我在本教程中选择的信息以外的其他信息感兴趣，你可以在Tweepy的tweet对象<a class="ae lh" href="https://developer.twitter.com/en/docs/tweets/data-dictionary/overview/tweet-object" rel="noopener ugc nofollow" target="_blank">这里</a>查看完整的信息列表。为了展示获取更多信息是多么容易，在下面的例子中，我创建了一个包含以下信息的tweet列表:创建时间、tweet id、tweet文本、与tweet相关联的用户，以及在检索tweet时有多少收藏夹。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="d1fa" class="ne lj it nv b gy nz oa l ob oc">tweets = tweepy.Cursor(api.search, q=text_query).items(count)</span><span id="b5ad" class="ne lj it nv b gy od oa l ob oc"># Pulling information from tweets iterable <br/>tweets_list = [[tweet.created_at, tweet.id, tweet.text, tweet.user, tweet.favorite_count] for tweet in tweets]</span><span id="24a9" class="ne lj it nv b gy od oa l ob oc"># Creation of dataframe from tweets list<br/>tweets_df = pd.DataFrame(tweets_list)</span></pre><h1 id="63a1" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">用GetOldTweets3抓取</h1><p id="9804" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated"><strong class="mc jd"> <em class="nb">更新:由于TWITTER的API发生变化，GETOLDTWEETS3不再运行。SNSCRAPE已经成为一个免费库的替代品，你可以使用它来清除TWEEPY的免费限制。我的文章在这里可用为</em></strong><a class="ae lh" href="https://medium.com/better-programming/how-to-scrape-tweets-with-snscrape-90124ed006af" rel="noopener"><strong class="mc jd"><em class="nb">SNSCRAPE</em></strong></a><strong class="mc jd"><em class="nb">。</em>T15】</strong></p><p id="5d0b" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">使用GetOldTweets3不像Tweepy那样需要任何授权，只需要pip安装库就可以马上上手。</p><p id="f609" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">抓取特定Twitter用户的推文:</strong></p><p id="d55c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我关注的两个变量是用户名和计数。在这个例子中，我们使用setUsername方法从特定用户那里抓取tweets，并使用setMaxTweets设置要查看的最近tweets的数量。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="80bf" class="ne lj it nv b gy nz oa l ob oc">username = 'jack'<br/>count = 2000</span><span id="16b7" class="ne lj it nv b gy od oa l ob oc"># Creation of query object<br/>tweetCriteria = got.manager.TweetCriteria().setUsername(username)\<br/>                                        .setMaxTweets(count)<br/># Creation of list that contains all tweets<br/>tweets = got.manager.TweetManager.getTweets(tweetCriteria)</span><span id="4a3b" class="ne lj it nv b gy od oa l ob oc"># Creating list of chosen tweet data<br/>user_tweets = [[tweet.date, tweet.text] for tweet in tweets]</span><span id="121a" class="ne lj it nv b gy od oa l ob oc"># Creation of dataframe from tweets list<br/>tweets_df = pd.DataFrame(user_tweets)</span></pre><p id="e687" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">从文本搜索查询中抓取推文:</strong></p><p id="38dc" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我关注的两个变量是text_query和count。在这个例子中，我们使用setQuerySearch方法从文本查询中抓取tweets。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="5ef7" class="ne lj it nv b gy nz oa l ob oc">text_query = 'USA Election 2020'<br/>count = 2000</span><span id="14ad" class="ne lj it nv b gy od oa l ob oc"># Creation of query object<br/>tweetCriteria = got.manager.TweetCriteria().setQuerySearch(text_query)\<br/>                                            .setMaxTweets(count)<br/># Creation of list that contains all tweets<br/>tweets = got.manager.TweetManager.getTweets(tweetCriteria)</span><span id="6c6a" class="ne lj it nv b gy od oa l ob oc"># Creating list of chosen tweet data<br/>text_tweets = [[tweet.date, tweet.text] for tweet in tweets]</span><span id="aca8" class="ne lj it nv b gy od oa l ob oc"># Creation of dataframe from tweets list<br/>tweets_df = pd.DataFrame(text_tweets)</span></pre><p id="9dca" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">通过组合TweetCriteria搜索参数，可以进一步定制查询。所有当前可用的搜索参数如下所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/fd764096c373ee5f2e7714d6089be443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVu-oaDRWW4yWF7yZ8W4Xw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">当前TweetCriteria搜索参数。</p></figure><p id="09e5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated"><strong class="mc jd">使用多个搜索参数的查询示例:</strong></p><p id="e137" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">以下堆叠查询将返回2019年1月1日至2019年10月31日之间发布的2000条与2020年美国大选相关的推文。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="616b" class="ne lj it nv b gy nz oa l ob oc">text_query = 'USA Election 2020'<br/>since_date = '2019-01-01'<br/>until_date = '2019-10-31'<br/>count = 2000</span><span id="bf0e" class="ne lj it nv b gy od oa l ob oc"># Creation of query object<br/>tweetCriteria = got.manager.TweetCriteria().setQuerySearch(text_query)<br/>.setSince(since_date).setUntil(until_date).setMaxTweets(count)</span><span id="9018" class="ne lj it nv b gy od oa l ob oc"># Creation of list that contains all tweets<br/>tweets = got.manager.TweetManager.getTweets(tweetCriteria)</span><span id="0ab0" class="ne lj it nv b gy od oa l ob oc"># Creating list of chosen tweet data<br/>text_tweets = [[tweet.date, tweet.text] for tweet in tweets]</span><span id="e2a0" class="ne lj it nv b gy od oa l ob oc"># Creation of dataframe from tweets list<br/>tweets_df = pd.DataFrame(text_tweets)</span></pre><p id="415e" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果你想联系我，不要害怕在LinkedIn上联系我</p><h1 id="384c" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">参考</h1><p id="947a" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">如果你感兴趣，注册我们的Socialscrapr邮件列表:<a class="ae lh" href="https://upscri.be/3kcmqx" rel="noopener ugc nofollow" target="_blank">https://upscri.be/3kcmqx</a></p><p id="d788" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我的后续文章深入研究了这两个包:<a class="ae lh" rel="noopener" target="_blank" href="/how-to-scrape-more-information-from-tweets-on-twitter-44fd540b8a1f">https://towards data science . com/how-to-scrape-more-information-from-tweets-on-Twitter-44fd 540 b8 a1f</a></p><p id="f088" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">帮助设置并提供几个示例查询的snscrape文章:<a class="ae lh" href="https://medium.com/better-programming/how-to-scrape-tweets-with-snscrape-90124ed006af" rel="noopener">https://medium . com/better-programming/how-to-scrape-tweets-with-snscrape-90124 ed 006 af</a></p><p id="b3a7" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">包含本教程的Twitter抓取器的GitHub:<a class="ae lh" href="https://github.com/MartinKBeck/TwitterScraper/tree/master/BasicScraper" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/martink beck/TwitterScraper/tree/master/basics craper</a></p><p id="6e13" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">增加Tweepy的标准API搜索限制:<a class="ae lh" href="https://bhaskarvk.github.io/2015/01/how-to-use-twitters-search-rest-api-most-effectively./" rel="noopener ugc nofollow" target="_blank">https://bhaskarvk . github . io/2015/01/how-to-use-twitters-search-rest-API-most-effectively。/ </a></p><p id="3c77" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">tweepy GitHub:<a class="ae lh" href="https://github.com/tweepy/tweepy" rel="noopener ugc nofollow" target="_blank">https://github.com/tweepy/tweepy</a></p><p id="99bf" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">getoldtweets 3 GitHub:<a class="ae lh" href="https://github.com/Mottl/GetOldTweets3" rel="noopener ugc nofollow" target="_blank">https://github.com/Mottl/GetOldTweets3</a></p></div></div>    
</body>
</html>