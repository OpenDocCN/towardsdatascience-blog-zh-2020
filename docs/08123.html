<html>
<head>
<title>Timestamp Vs Timedelta Vs Time Period</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间戳与时间增量与时间段</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/timestamp-vs-timedelta-vs-time-period-afad0a48a7d1?source=collection_archive---------32-----------------------#2020-06-15">https://towardsdatascience.com/timestamp-vs-timedelta-vs-time-period-afad0a48a7d1?source=collection_archive---------32-----------------------#2020-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c3b7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解熊猫时间序列数据结构</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/481a0c34e7f2b062de89a6d6c0d4af4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*goF0VXkYxghil5Zt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nate_dumlao?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">内森·杜姆劳</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="27dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">数据！不仅仅是数据科学，软件行业的所有其他领域都在处理数据。从系统软件到应用软件，以高效的方式处理和存储数据始终是一项挑战。一种常见且最有效的战斗策略是利用<strong class="lb iu"> <em class="lv">数据结构。</em>T13】</strong></strong></p><p id="8f63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如计算机科学家弗雷德·布鲁克斯所说，</p><blockquote class="lw lx ly"><p id="20ae" class="kz la lv lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">在与缓慢的系统进行的永无止境的战斗中，程序员的主要武器是改变内部模块结构。我们的第一反应应该是重组模块的数据结构。</p></blockquote><p id="f06c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论怎样强调数据结构都不为过——您可以拥有完美的代码、完美的逻辑、零错误，但是以笨拙的方式存储数据可能会导致应用程序的崩溃。</p><p id="1eda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas 本质上是为分析金融时间序列数据的<a class="ae ky" href="https://en.wikipedia.org/wiki/Pandas_(software)" rel="noopener ugc nofollow" target="_blank">目的</a>而开发的。它包含了大量的工具来处理日期和时间相关的数据。在本文中，我将解释基本的 pandas 时间序列数据结构、它们可以接受的输入类型以及它们的功能。</p><p id="da86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理时序数据的一些基本数据结构是:</p><ul class=""><li id="566d" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">工时戳记</li><li id="9f48" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">时间差</li><li id="25ac" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">时间段</li></ul></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="96ab" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated">1)时间戳:</h2><p id="56d9" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">Python 在包含三种不同类型的<code class="fe nv nw nx ny b"><a class="ae ky" href="https://docs.python.org/3/library/datetime.html" rel="noopener ugc nofollow" target="_blank">datetime</a></code>模块中提供了日期和时间功能，</p><ul class=""><li id="217f" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">日期—日、月、年</li><li id="2533" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">时间—小时、分钟、秒、微秒</li><li id="5c4c" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">日期时间—日期和时间的组成部分</li></ul><p id="da56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">python 中的<code class="fe nv nw nx ny b">datetime</code>由日期和时间组成，pandas 的替代方案是将日期和时间封装在一起的<code class="fe nv nw nx ny b">Timestamp</code>对象。它是 python 的<code class="fe nv nw nx ny b">datetime</code>的对等物，但基于更有效的 numpy.datetime64 数据类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/dbf2d5c5ab9c84d122a3b4974b787e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8uf_T4BqN0s5gbwWaPmXFg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">时间戳插图</p></figure><p id="cb9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">熊猫</em> <a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Timestamp.html" rel="noopener ugc nofollow" target="_blank"> <em class="lv">时间戳</em> </a> <em class="lv">引用具有纳秒精度(十亿分之一秒)的特定时刻。</em></p><p id="8cef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是最基本的时间序列数据类型，它将值与特定时刻相关联。时间戳构造函数非常灵活，可以处理各种输入，比如字符串、浮点、整型。下面是它可以接受的不同类型的输入的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用各种输入创建时间戳对象</p></figure><p id="32da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的示例中，[7]和[8]包含一个标量值。诸如整数或浮点数之类的单个值也可以传递给时间戳构造函数，它返回的日期和时间相当于 UNIX 纪元(1970 年 1 月 1 日)之后的秒数。此外，它允许人类可理解的日期对象与 UNIX 纪元相互转换，以便于计算。当一个 nan 值像[9]中那样被传递时，它返回一个 NaT(不是时间)值，这是 pandas 对于时间戳数据的 null 值。</p><p id="02b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间戳构造函数理解时区转换。默认情况下，它不知道时区，但是可以通过在创建对象时将时区传递给参数<code class="fe nv nw nx ny b">tz</code>来使<em class="lv">知道时区</em>。这个对象在内部存储了一个<a class="ae ky" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time" rel="noopener ugc nofollow" target="_blank"> UTC </a>时间戳值，使得时区之间的转换变得简单。</p><p id="050f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">注意</em> </strong> <em class="lv">:如果您的列/索引/对象不支持时区，您将会得到如下错误</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/bf416842b01a2d6e2a36c21495324aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ldkpy1ANQVpsQRf59KDgFA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">时区转换错误</p></figure><p id="e054" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">您可以通过本地化(使其具有时区意识)然后转换来克服这个问题。</em></p><p id="6365" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，时间戳可以存储频率信息，具有大量对数据操作有用的属性和方法。时间戳的索引结构是<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" rel="noopener ugc nofollow" target="_blank"> DatetimeIndex </a>，其类型为 datetime64，包含时间序列特定方法，便于处理。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="5f4a" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated">2)时间差:</h2><p id="7e56" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><a class="ae ky" href="https://www.google.com/search?rlz=1C1CHZL_enIN707IN707&amp;sxsrf=ALeKk038CgpGyIw-ZTMsIwEuF0GYDUq1-A%3A1591970785866&amp;ei=4YvjXoHHNKOa4-EP1uKuqAQ&amp;q=what+is+delta&amp;oq=what+is+delta&amp;gs_lcp=CgZwc3ktYWIQAzIKCAAQsQMQFBCHAjICCAAyBwgAEBQQhwIyAggAMgIIADICCAAyAggAMgIIADICCAAyAggAOgQIABBHOgQIIxAnOgcIABCxAxBDOgQIABBDOgUIABCxAzoFCAAQgwFQ4g1YxyVg2SloAHABeACAAd4CiAG_F5IBBzAuNS42LjKYAQCgAQGqAQdnd3Mtd2l6&amp;sclient=psy-ab&amp;ved=0ahUKEwjBu7ypufzpAhUjzTgGHVaxC0UQ4dUDCAw&amp;uact=5" rel="noopener ugc nofollow" target="_blank"> delta </a>的定义之一是它是两个事物或值之间的差异。<code class="fe nv nw nx ny b">Timedelta</code>只不过是时间上的差异，可以指两个间隔之间的时间量或确切的时间长度，并且基于 numpy.timedelta64。</p><p id="38cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与时间戳构造函数类似，Timedelta 也倾向于接受可变数量的输入。有趣的是，它既可以取正值，也可以取负值。下面是一些例子，让你一窥究竟。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="1592" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Timedeltas 是 python 和 pandas 的一部分。他们可以</p><ul class=""><li id="bee3" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">彼此相加或相减</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="5389" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">彼此相除以返回浮点值</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="1e63" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">添加到<code class="fe nv nw nx ny b">timestamp</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="9f0a" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">添加到<code class="fe nv nw nx ny b">datetime</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="0383" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">添加到<code class="fe nv nw nx ny b">date</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ul class=""><li id="5440" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">无法添加到<code class="fe nv nw nx ny b">time</code></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="96e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe nv nw nx ny b">Timestamp</code>类似，<code class="fe nv nw nx ny b">Timedelta</code>也有大量用于操作数据的属性和方法，相关的索引结构是类型为 int64 的<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.TimedeltaIndex.html" rel="noopener ugc nofollow" target="_blank"> TimedeltaIndex </a>。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="eea0" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated">3)时间段:</h2><p id="a412" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">时间<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Period.html" rel="noopener ugc nofollow" target="_blank">周期</a>指开始和结束时间戳之间的特定时间长度，该时间长度不变且不重叠。<code class="fe nv nw nx ny b">Period</code>类采用<code class="fe nv nw nx ny b">Period</code>类型，该类型采用一个字符串或整数，并基于 numpy.datetime64 对固定频率进行编码。</p><p id="2a20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，一个值和一个频率参数被传递给<code class="fe nv nw nx ny b">Period()</code>构造函数，被指定为<code class="fe nv nw nx ny b">freq</code>的频率参数接受一组预定义的字符串。考虑下面的例子，</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">时间段示例</p></figure><p id="2854" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在[1] <code class="fe nv nw nx ny b">freq='A-OCT'</code>中，表示频率为每年一次，固定在十月底，而在[3] <code class="fe nv nw nx ny b">freq='M'</code>中，表示频率为每月一次。您还可以指定每季度、每周的频率。要了解更多信息，请点击查看<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/version/0.12/timeseries.html" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/87b810d12ba6bf69b5d632157304f60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J1WOPRKuctCC_eAgQ-RwTw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">时间周期图示</p></figure><p id="986e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用带有<code class="fe nv nw nx ny b">start</code>、<code class="fe nv nw nx ny b">end</code>和频率参数的<code class="fe nv nw nx ny b">period_range()</code>函数生成一系列<code class="fe nv nw nx ny b">Period</code>对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">生成一系列期间</p></figure><p id="0212" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">频率之间的转换是一项经常需要处理的任务。这可以通过<code class="fe nv nw nx ny b"><a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.asfreq.html" rel="noopener ugc nofollow" target="_blank">asfreq</a></code>方法完成。让我们考虑一个将月频率转换为周频率的例子，</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">频率之间的转换</p></figure><p id="ac80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，<code class="fe nv nw nx ny b">Periods</code>可以转换成<code class="fe nv nw nx ny b">Timestamps</code>，反之亦然。与<code class="fe nv nw nx ny b">Period</code>对象相关联的索引结构是<code class="fe nv nw nx ny b">PeriodIndex</code>。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="36ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你一路阅读到这里。如果你有任何问题、反馈或批评，请在评论区告诉我。祝你今天开心！玩的开心！</p></div></div>    
</body>
</html>