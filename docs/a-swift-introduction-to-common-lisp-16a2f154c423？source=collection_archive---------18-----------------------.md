# Common Lisp 快速入门

> 原文：<https://towardsdatascience.com/a-swift-introduction-to-common-lisp-16a2f154c423?source=collection_archive---------18----------------------->

## 熟悉有史以来第二种高级编程语言。

![](img/f626963b5edf148e8152c5bc34f93f8f.png)

在 1958 年，一个新成员以第二高级和第一函数式编程语言 Lisp 的形式出现了。Lisp 是一种伟大的开源语言，尽管它已经存在了很长时间，但这些年来一直在不断地发展。此外，Lisp 已经发展成许多更小的方言，这些方言通常允许在 Lisp 内部更容易地完成特定的任务。Lisp 是一种很棒的语言，因为它得到了很好的支持，有很好的文档记录，并且非常受人尊敬。最流行的现代 Lisp 方言有 Common Lisp、闭包、Scheme、Machine Lisp、Arc，当然还有 Emacs Lisp。

如果你来自任何一种不是基于 Lisp 本身的语言，Lisp 是一种非常不同的语言。Lisp 编程非常具有功能性，它围绕着使用宏来断言数据的功能。这是一件需要注意的重要事情，因为语法一点都不相似。

# 获取 CLisp

Common Lisp (CLisp)实际上是可爱的 GNU 基金会的产品，并且是完全免费和开源的。要在非 Unix 系统上安装 Common Lisp，您需要从 SourceForge 或其他地方找到的镜像下载二进制文件。由于我不知道如何在 Windows 上安装应用程序，我就不讲我不知道如何做的东西了。至于 Linux，你当然可以使用你的包管理器，在我的例子中是 dnf。

```
sudo dnf install clisp
```

至于 MacOS，你也可以通过你的软件包管理器来安装它:

```
brew install clisp
```

> [(这里是公式化)](https://formulae.brew.sh/formula/clisp)

要测试您的 CLisp 安装，只需在终端中输入以下命令就可以进入 REPL

```
clisp
```

变成巴什。

# 基本语法

![](img/404190d9d05beb25988543a1ea181d50.png)

今天，我将专门在 REPL 工作。这是为了确保文本编辑保持编译器、编辑器和语法高亮之间的一致性，而且我们不必保存文件。因此，首先，我将像之前一样使用命令进入 CLisp REPL

```
clisp
```

关于 Lisp 首先需要了解的是语法。Lisp 的语法当然很漂亮，也很酷，但最重要的是它是独一无二的。在 Lisp 中，几乎所有的命令都包含在括号中，并且使用空格作为语法，所有的命令都不区分大小写(所有的命令都是大写的)。)在我开始解释 Lisp 之前，我认为需要解释 Lisp 的范例，函数式编程范例。这对于学习 Lisp 非常重要，尤其是在学习非函数式语言的时候。

> [阅读更多关于函数式编程的内容(由我！)](/functional-programming-is-awesome-c94bcd150ae6)

首先，构造类型只能保存数据，不能保存函数。Lisp 的独特之处在于数据可以作为代码使用，甚至可以在后台编写代码。构造类型被称为构造函数，与面向对象的类不同，尽管它们填补了同样的空白。换句话说，如果不使用多态，我们就不能将函数作为构造函数的属性来应用。例如，在 Python 中，我们可以有一个名为 cl 的类，该类可以有一个子类，并有可以用 cl.function 或 cl.subclass 调用的子方法。

换句话说，Lisp 函数调用总是以方法开头，而不是以变量开头。这也可以和另外两种函数式语言相提并论，它们是我一生的挚爱，

> 朱莉娅

另一个很酷，

> 稀有

所以很可能来自这两种语言会让你更接近。所以让我们从定义一个变量开始。当我们命名一个变量时，注意语法的结构是很重要的。在下面的例子中，我使用 setq，它将生成一个全局变量。我们使用 setq 的方式与使用 Lisp 中任何其他函数的方式基本相同。

```
 v-method   vvv-Variable Value
(setq x '(5 4 8 4))
      ^-Variable Name
```

这将创建一个我们可以用列表类型的 x 调用的变量，它是通过在括号前放一个'来定义的。下面是 Lisp 中的简单加法:

```
 vvv Parameters
(+ 5 5)
 ^ Method (addition)
```

这里有一个类似的例子，打印一个字符串:

```
(prin1 "Hello World!")
```

要记住的最重要的事情是方法和变量是如何对齐的，因为这将使你更习惯于在 Lisp 中调用函数的方式。

# 函数和 For 循环

Lisp 中的函数是用 defunc 定义的。我们可以定义一个函数，它有一个名字，和一组参数，参数之间用空格分开，放在一组单独的括号中。

```
(defunc add (x y)
; (We'll add logic later)
)
```

这个函数定义非常典型，就好像我们把它与 Python、Julia 和 R 相比，R 是唯一一个显著不同的。

## 计算机编程语言

```
def add(x, y):
```

## 朱莉娅

```
function add(x, y)
```

## 稀有

```
add <- function(x, y){}
```

因此，给定我前面展示的添加 5 + 5 的代码，很容易猜到我们在这里需要做什么，特别是有了其他语言的经验之后。

```
(defunc add (x y) (+ x y))
```

> 是的，真的就这么简单。

当我学习一门新语言时，我总是喜欢写一个函数，它是一个均值函数。虽然这是非常基本的，但是尝试写一个需要 sigma(总和)和 n(样本大小)。)求和以及样本大小对于很多编程都是必不可少的，尤其是统计编程，这也是我特别使用 Lisp 的原因。

如上所述，我们需要两个东西，n 和σx。幸运的是，Lisp 有一个长度函数，可以这样使用:

```
(length x)
```

很简单，对吧？唯一的问题是求和没那么简单。为了对数组求和，我们需要使用 reduce。我们可以通过简单的操作做到这一点:

```
(defun sum  (x) (reduce '+ y)
)
```

Lisp 中的 Reduce 是一种简单的说法，即从开始处开始，到列表的末尾。为了进行这样的操作，因为它是基于数组的，我们需要使用'+操作数，而不是+操作数。现在，我们可以用我们的函数来总结一个数组:

```
(sum x)
```

现在我们已经有了求和的方法，我们需要决定如何来设计这个函数。以最简洁的方式，不定义任何变量，并通过计算建立回报。这当然是编写这个函数的最佳方式，但是以这种方式思考公式可能会特别令人困惑——所以在这种情况下，我每次都会使用它，而且在大多数情况下我都会这样做。然而，当有大量的数学运算时，这可能会很困难，有时会导致使用更多的编译能力和内存。)

但是首先，让我们写出我们的平均函数。

```
(defunc mean (x) (/ (sum x) (length x))
```

为了更好地理解这一点，我们首先在括号中进一步计算数学(运算顺序)，然后对 sigma 和 n 执行除法运算。

为了使用我们的函数，记住‘是指数组，所以在 Lisp 中创建一个数组，我们使用:

```
(setq x '(5 8 4 6 8))
```

所有的暗都被空间隔开。

至于 for 循环，想象一下 Python、Julia 或 R 中典型的简明 for 循环:

```
x = [u = u * 5 for u in x]
```

在 Lisp 中，我们将完全遵循这种循环风格，除了一个例外，我们将首先在括号中使用 loop，并且逻辑将需要翻转，使用单词“do”来代替，就像这样:

```
(loop for w in array do (+ w 1))
```

这当然只是给每个元素加一。另一个需要记住的重要事情是，do 后面的括号之外的任何逻辑都不会包含在循环中，这意味着层次结构中的所有内容都将期待一个返回，类似于我们的 mean 函数，操作的顺序决定了先做什么。

# 再用力一点…

最后一部分，我们要写一个函数来计算标准差。为了计算一个数组的标准差，我们需要μ。幸运的是，我们刚刚创建了一个函数，它将为我们提供 mu。使用 mean 函数和 setq，我前面谈到的全局变量定义(这会使 dims 公开，这并不总是一个好主意，但我认为知道如何使用全局变量比私有变量更好。)我们可以将平均值定义为μ，并使用一个简单的 for 循环来计算。在 for 循环内部，我们有(x 减去 mu)，我们可以通过将这个数乘以它本身来执行。

正如我前面讨论的，这个选项可能不总是优于 setq，为了看起来更简洁，可能不值得这样做。无论如何，在我们将这个 for 循环应用到我们的列表之后，我们将能够求平均值的平方根并返回标准偏差。

```
(defun std (x) (setq μ (mean x)) (loop for y in x do
  (* (- x μ) (- x μ)))) (sqrt (mean x)
)
```

# 总结一下…

我喜欢编写 Lisp，我真的希望这篇文章能为有兴趣学习它的人提供很多信息。我有可能在未来做类似的工作。在我看来，Lisp 是一种美丽的语言，它在我心中占有一席之地。虽然 Lisp 肯定不同于许多其他语言，但我认为它的语法看起来很酷也很漂亮。在相关新闻中，[我的 Julia 模块，用于机器学习、统计和数据处理的车床](http://lathe.ai)即将进入 Lisp、Python 和 R，Python 和 R 在 Julia 中本地运行包，Lisp 从包的 Lisp 端口本地运行包。此外，这让我对 Lisp 感到兴奋和激动。