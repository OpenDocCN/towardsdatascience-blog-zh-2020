<html>
<head>
<title>With an AWS Copilot, Give Kubernetes a Second Thought — Life With Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有了 AWS 副驾驶，让 Kubernetes 重新思考一下——数据生活</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/with-an-aws-copilot-give-kubernetes-a-second-thought-life-with-data-95d11761c27e?source=collection_archive---------31-----------------------#2020-08-22">https://towardsdatascience.com/with-an-aws-copilot-give-kubernetes-a-second-thought-life-with-data-95d11761c27e?source=collection_archive---------31-----------------------#2020-08-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4405" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">新的 ECS CLI 便利性使部署容器变得更加容易，而无需管理基础架构。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1d0551bea973bb844686e328dfffe19c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eiPtVlm3QWuOf_bm"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">奥斯卡·萨顿在<a class="ae ky" href="https://unsplash.com/s/photos/copilot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="6d12" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">谁在乎呢。</h1><p id="ca76" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Kubernetes 是一个非常棒的容器编排工具，用于可伸缩的云计算应用程序。经过多年的开发和内部使用，谷歌在 2014 年开源了该工具，导致小型企业和企业的采用量激增。也就是说，我们并不总是需要它的所有电池。虽然它通过 YAML 配置文件提供了一个相对方便的<a class="ae ky" href="https://medium.com/@zach.gollwitzer/imperative-vs-declarative-programming-procedural-functional-and-oop-b03a53ba745c" rel="noopener">声明性</a>接口，但是一个单独的开发人员或小团队仍然需要担心部署的许多细节，例如:</p><ul class=""><li id="c813" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">虚拟专用云(VPC)</li><li id="f8a2" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">SSL 证书</li><li id="6020" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">负载平衡器</li><li id="99c6" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">集装箱登记处</li></ul><p id="9159" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">所有这些细节对于管理云解决方案都至关重要，有些人将这一领域作为他们的主要工作。然而，其他人希望专注于应用程序本身。</p><p id="c149" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">在许多小项目中，你不会有一个复杂的 80 亿容器的庞然大物需要 Kubernetes 进行编排。我没有这方面的统计数据，但我打赌大多数概念验证项目都包含 1-4 个容器(除此之外:解析 Github/Docker Hub 似乎是一个有趣的项目)。对于这些项目，有一种相当直接的方式告诉您的云提供商“嘿，这是一个容器映像。把它挂在天上，并向我收取它所消耗的费用”就足够了。</p><p id="772e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">使用方便的新 CLI <code class="fe ng nh ni nj b"><a class="ae ky" href="https://github.com/aws/copilot-cli/wiki" rel="noopener ugc nofollow" target="_blank">copilot</a></code>进入 ECS。</p><h1 id="fded" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">从应用到部署，速度非常快</h1><p id="0a24" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我制作了一个演示应用程序来驱动这个过程，并允许您快速查看它的运行情况。对于实干家，你可以在下面的<a class="ae ky" href="https://www.lifewithdata.org/blog/aws-ecs-copilot-cli#resources" rel="noopener ugc nofollow" target="_blank">资源</a>部分找到链接。让我们从 NLTK 库中取出一个现成的情感分析器，并使用我最喜欢的 python API 库 FastAPI 为文本输入提供情感评分。我完全没有必要对 FastAPI 进行概述，因为下面的一个例子符合您的情况:</p><ol class=""><li id="fcfa" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm nk mv mw mx bi translated">你已经知道并喜欢它了</li><li id="3be5" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm nk mv mw mx bi translated">你将通过它的<a class="ae ky" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank">伟大的文档</a></li></ol><p id="3e87" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">记住，应用程序开发人员主要关心 1)应用程序代码和 2)它所在的容器。嗯，他们在这里。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="d258" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">也有一些便利的好东西，但我不会把它们扔到你脸上。如果你好奇，请点击这里查看<a class="ae ky" href="https://github.com/aagnone3/fastapi-sentiment/blob/master/Makefile" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2ed2" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">现在我们有了自己的应用程序，部署序列就像下面这样简单。</p><pre class="kj kk kl km gt nn nj no np aw nq bi"><span id="9a44" class="nr la it nj b gy ns nt l nu nv">make build test<br/>copilot init<br/>copilot env init \<br/>    --name prod \<br/>    --profile default \<br/>    --app fastapi-sentiment<br/>copilot svc deploy \<br/>    --name fastapi-sentiment \<br/>    --env prod</span></pre><p id="df66" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">对于那些对上面的<code class="fe ng nh ni nj b">copilot</code>命令的内部流程感兴趣的人，可以看看下面的展示，它摘自 Efe Karakus 在 AWS 博客上的文章。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/32dc865d1671a044b2ff6c6815cd647c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cvA5AZiGJ56hiN3qwzgBfA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">初始化副驾驶员部署的示例终端流程[ <a class="ae ky" href="https://aws.amazon.com/blogs/containers/aws-copilot-an-application-first-cli-for-containers-on-aws/?nc1=b_rp" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="bd8b" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">您可能想知道这与规范的“kube apply -f deployment.yml”相比如何，认为它需要更多的命令来实现同样的事情。请记住，上面的命令将设置您的基础设施和应用程序。因此，Kubernetes 应用程序的等效比较是将所有基础设施即代码(IaC)设置与 Kubernetes 配置文件结合起来。那……是更多的工作。</p><h1 id="1b00" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">我们在直播</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/94a55b9eab9f0c1b45294fb105601274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UM-kvM-EZxrbn0Hf9Ju49A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Wil Stewart 在<a class="ae ky" href="https://unsplash.com/s/photos/cheer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c0fa" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">有了这几条命令，我们的应用程序现在可以在黄金时间公开使用(如果您愿意的话)。不差几行好。所有这些节省下来的时间现在可以用于更多的原型制作、测试或与您的猫玩耍。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/678c07591a99d62fb76b9f333300173d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_Lcw1_T5cOxZQbxcpdVuIA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">一些简单的命令演示了对已部署 API 的访问</p></figure><p id="2683" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">这个演示只是触及了 ECS 和<code class="fe ng nh ni nj b">copilot</code>能够和将要做的事情的表面。有管道资源、与<code class="fe ng nh ni nj b">docker-compose</code>的计划集成以及 CI/CD 集成的简单选项。更多阅读，请查看下面的参考资料。</p><p id="687e" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated">帮我帮你:<a class="ae ky" href="https://docs.google.com/forms/d/e/1FAIpQLSfmUcJrw1MR0e7rVgEXGVh6qK6OSVm7uXFBrfmqnpsN7p-ZWA/viewform?usp=sf_link" rel="noopener ugc nofollow" target="_blank">告诉我下一步该怎么做</a>。</p><h1 id="d6bc" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">资源</h1><ul class=""><li id="e480" class="mn mo it lt b lu lv lx ly ma nz me oa mi ob mm mu mv mw mx bi translated"><a class="ae ky" href="https://github.com/aws/copilot-cli/wiki" rel="noopener ugc nofollow" target="_blank">副驾驶维基</a></li><li id="057b" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated"><a class="ae ky" href="https://aws.amazon.com/blogs/containers/introducing-aws-copilot/" rel="noopener ugc nofollow" target="_blank">副驾驶公告文章</a></li><li id="0e05" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated"><a class="ae ky" href="https://github.com/aagnone3/fastapi-sentiment" rel="noopener ugc nofollow" target="_blank">我的演示代码</a></li></ul><h1 id="282c" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">保持最新状态</h1><p id="9ee0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这一个就到此为止。然而，在学术界和工业界，事情发生得很快！用<a class="ae ky" href="https://lifewithdata.org/" rel="noopener ugc nofollow" target="_blank"> LifeWithData </a>博客、<a class="ae ky" href="https://medium.com/@anthonyagnone" rel="noopener">Medium</a>上的文章和我的<a class="ae ky" href="https://twitter.com/@anthonyagnone" rel="noopener ugc nofollow" target="_blank"> Twitter </a>让自己保持最新状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="http://eepurl.com/gOe01T"><div class="gh gi oc"><img src="../Images/5a3a5f698c75076ddf9758376d3c16a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Wbc5jI0bxLvNRDOIwvecg.png"/></div></a></figure></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="2ad1" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma nd mc md me ne mg mh mi nf mk ml mm im bi translated"><em class="ok">原载于 2020 年 8 月 22 日 https://www.lifewithdata.org</em><em class="ok">的</em> <a class="ae ky" href="https://www.lifewithdata.org/blog/aws-ecs-copilot-cli" rel="noopener ugc nofollow" target="_blank"> <em class="ok">。</em></a></p></div></div>    
</body>
</html>