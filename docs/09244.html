<html>
<head>
<title>Take Full Control of Your Python Plots with Jinja</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Jinja 完全控制你的 Python 情节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/take-full-control-of-your-python-plots-with-jinja-15496a7ebf1d?source=collection_archive---------26-----------------------#2020-07-02">https://towardsdatascience.com/take-full-control-of-your-python-plots-with-jinja-15496a7ebf1d?source=collection_archive---------26-----------------------#2020-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b028" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 SVG 和 Jinja 在 Python 中创建完全自定义的绘图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bbfaf83e2a328f90553a68de9c668137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nz76xcGqCDLOdfZR"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾萨克·史密斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3585" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你是否曾经花了太多的时间挖掘文档，试图让你的图看起来像你想要的那样？下一次，考虑放弃 matplotlib 或 seaborn，使用<code class="fe ls lt lu lv b">Jinja</code>创建一个自定义的绘图。</p><p id="7273" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Jinja 是一种 Python 模板语言，基于 Django 模板，你可能从 Flask 或 Airflow 等其他包中熟悉它。它有很多有用的功能，但你只需要一些基础知识就可以开始了。</p><p id="7c3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在 Jupyter 中，您可以使用 Jinja 将您的视图制作成 SVG(工作流程与 D3 非常相似)并显示它们。</p><h1 id="eac2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">一些基本的 SVG</h1><p id="28c6" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">在我们进入正题之前，让我先介绍一些基础知识。SVG 代表<em class="mt">可缩放矢量图形</em>，这意味着所有图像数据都存储为矢量空间中的点，因此可以在不进行像素化的情况下调整大小(不像<em class="mt">光栅</em>图像)。</p><p id="9459" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SVG 是基于 XML 的，有许多不同的标签，代表不同的路径和形状。一些关键标签是:</p><ul class=""><li id="77d6" class="mu mv iq ky b kz la lc ld lf mw lj mx ln my lr mz na nb nc bi translated"><code class="fe ls lt lu lv b">circle</code>:使用<em class="mt"> xy </em>坐标和半径画一个圆</li><li id="2fa6" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe ls lt lu lv b">rect</code>:使用左上角的<em class="mt"> xy </em>坐标加上<em class="mt">宽度</em>和<em class="mt">高度</em>绘制矩形</li><li id="1bd4" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe ls lt lu lv b">polyline</code>:画一条连接<em class="mt"> xy </em>点的路径</li><li id="4c14" class="mu mv iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><code class="fe ls lt lu lv b">text</code>:绘制文本</li></ul><p id="69dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个 SVG 元素都有自己可以更改的属性，但是大多数元素都有共同的属性来控制<em class="mt">填充</em>和<em class="mt">笔画。</em></p><p id="1743" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建 SVG 时要记住的另一个关键点是，<em class="mt"> xy </em>坐标从<em class="mt">左上角</em>的<em class="mt"> (0，0) </em>开始，随着向<em class="mt">右下角</em>移动而增加。</p><p id="a024" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于使用 SVG 的更多信息，请查看 Mozilla 的参考资料<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Introduction" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="4b5d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在到金贾…</p><h1 id="59f1" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">Jinja 模板的(迷你)介绍</h1><p id="c716" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">Jinja 的模板有很好的特性，比如循环、条件和模板继承，这只是皮毛；有大量的功能。</p><p id="9f3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是一个 Jinja 模板的基本示例:</p><pre class="kg kh ki kj gt ni lv nj nk aw nl bi"><span id="f10e" class="nm lx iq lv b gy nn no l np nq">{% for name in names %}<br/>  Hello, {{ name }}, welcome to {{ place }}!<br/>{% endfor %}</span></pre><p id="8e5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你用<code class="fe ls lt lu lv b">names = ["tim", "sue", "tom", "sally"]</code>和<code class="fe ls lt lu lv b">place = "my party"</code>渲染模板，你会得到…</p><pre class="kg kh ki kj gt ni lv nj nk aw nl bi"><span id="3d15" class="nm lx iq lv b gy nn no l np nq">Hello, tim, welcome to my party!<br/>Hello, sue, welcome to my party!<br/>Hello, tom, welcome to my party!<br/>Hello, sally, welcome to my party!</span></pre><p id="8879" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多关于 Jinja 模板的信息，请查看<a class="ae kv" href="https://jinja.palletsprojects.com/en/2.11.x/templates/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="0f85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们继续建立一个金贾的阴谋。</p><h1 id="5de7" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">与金佳密谋</h1><p id="079c" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">让我们使用 Jinja 用一些示例数据制作一个简单的演示散点图。</p><p id="b40f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，这里是我将在模板中使用的数据和一些基本布局信息:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于绘图的数据和布局信息。</p></figure><p id="0ac2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们制作模板，它将是 SVG 的 XML 风格标记和特殊 Jinja 命令的混合:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="dcd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们假设我们的模板作为一个字符串存储在变量<code class="fe ls lt lu lv b">plot_template</code>中。</p><p id="f3e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以使用我们的<em class="mt"> plot </em>和<em class="mt"> layout </em>数据渲染模板，代码如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="62e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是作为 svg 的渲染图:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="2afb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是作为参考的 png:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/1828bd60cc2e9104be05452564a8c910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8aZvpbKT7gCgOGO56z3Lqw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用 Jinja 在 Python 中创建的 SVG 演示图</p></figure><p id="8eff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于完整的代码，检查要点<a class="ae kv" href="https://gist.github.com/a-poor/173f0d190634065bfd7ad73eb882e637" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><h1 id="d685" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="2b61" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">如果你只是做 EDA 调用<code class="fe ls lt lu lv b">plt.scatter(x,y)</code>仍然是一条路要走，但如果你想能够完全定制你的情节，尝试使用 Jinja。启动可能需要更多时间，但您的模板很容易重复使用，并且您不会受限于您的绘图库所支持的绘图。</p><p id="61d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SVG 的另一个巨大好处是能够从另一个 SVG 复制路径，并将其合并到您自己的路径中。例如，如果您想将散点图中的点更改为您公司和竞争对手的徽标，您只需下载 SVG 徽标，并用徽标路径替换模板中的圆圈。</p><p id="ddb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mt">感谢阅读！我很想知道你对这项技术的看法——如果你有任何意见或建议，请告诉我！</em></p></div></div>    
</body>
</html>