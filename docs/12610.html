<html>
<head>
<title>Python programming concepts that made my code efficient!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我的代码高效的 Python 编程概念！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-programming-concepts-that-made-my-code-efficient-68f92f8a39d0?source=collection_archive---------6-----------------------#2020-08-31">https://towardsdatascience.com/python-programming-concepts-that-made-my-code-efficient-68f92f8a39d0?source=collection_archive---------6-----------------------#2020-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e13c598a190b88770a11737baa1e1b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yRhQ28Nd53cTSCR6"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">沙哈达特·拉赫曼在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="ca33" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">使用这些神奇的命令来增强您的 Python 类！</h2></div><p id="c2d0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Python 是广泛使用和采用的语言之一，尤其是在机器学习领域。毫无疑问，Python 是最通用的语言。它不仅可以用来处理后端数据，还可以用来做前端 UI。Python 拥有可以施展魔法的工具。然而，他们中许多人的目标总是实现目标，而不考虑最佳实践和效率。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="50af" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了实现这个目标，我们最终编写了<strong class="la jk"> <em class="ma"> n </em> </strong>个将被调用并完成工作的函数。其中一些相互关联的功能可以使用一个<em class="ma">类</em>来定义。幸运的是，Python 是面向对象编程(OOP)，可以通过创建对象来解决问题。因为 Python 是 OOP，使用可复用的代码，避免冗余是最大的优势。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">写 Python 代码时的口头禅</p></figure><h2 id="24fc" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">班级</h2><p id="8b02" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">从真正使其面向对象的最重要的组件开始，定义 c<em class="ma">class</em>。c <em class="ma"> lass </em>基本上就是一个创建对象的模板。想一个披萨类，会告诉食材，种类，大小等等。一个简单的类应该是这样的:</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/423a81c635fde62931130b37cbfbd56f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUrY8m-CoroFC-DNB7r8BQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><h2 id="8073" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__init__</h2><p id="cb29" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma"> __init__ </em>是初始化方法，我们一调用这个类，它就会运行。这里，类一初始化，type_ variable 就被赋值为“veggie”。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nb"><img src="../Images/0411a3035952909a8dab9291c52e5062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*klqSWl0tDEvMIhX2LO7YgQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="852d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们创建了一个打印所请求的比萨饼的方法。这被称为实例方法，因为它们在实例对象<em class="ma"> obj </em>上被调用。最佳实践是在该方法下定义一个变量，这样就可以在类内的任何地方访问它。Python 并不<em class="ma">要求</em>应该在类中的什么位置定义实例属性。</p><h2 id="fcff" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__ 呼叫 _ _</h2><p id="f536" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma"> __call__ </em>一调用方法就运行。一旦对象被初始化，它就采取行动。<em class="ma"> __call__ </em>在一个实例需要经常改变状态的时候很有用。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c59481f6852b125436ba37c2fff3aeca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*SV8JmLP7uXq7Wkvd5aA-8Q.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="65e0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到 shape 的默认值是‘圆形’。然而，我可以在初始化后通过向对象传递一个值来改变形状。尝试传递空括号并检查输出！</p><h2 id="93ee" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__repr__</h2><p id="c188" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma"> __repr__ </em>主要用于查看赋给我们变量的值。它可以定义如下:</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/4f613d6b2dc0766db0787a6d5d503b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*xy5WFy-_hJFp1tKyE7CdVw.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="86f2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管 __repr__ 被认为是对象的“正式”字符串表示，但它主要用于调试，主要由开发人员使用。</p><h2 id="be8d" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__str__</h2><p id="0263" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma"> __str__ </em>与上面的<em class="ma"> __repr__ </em>颇为相似。<em class="ma"> __str__ </em>可以被覆盖，并允许更多的定制，除非像 repr 不能。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/c5a2ebbfbe60fbed4a40d7ab5888c83b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*WgUoXADLl9Da0Xft7d_KPg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="12e4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如上图，除非像<em class="ma"> __repr__ </em>一样，需要将对象传递给<em class="ma"> print </em>函数来显示变量。<em class="ma"> __str__ </em>与<em class="ma"> __repr__ </em>相反，被认为是对象的“非正式”字符串表示。它主要用于为普通用户创建输出。</p><h2 id="8cf6" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__ 词典 _ _</h2><p id="4b58" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">Python 有一个名为<em class="ma"> __dict__ </em>的内部字典，保存所有的内部变量。这是检查变量内部细节的简单方法。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nf"><img src="../Images/8160fa46f5ffdd34baba2925f00608d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQAif1ZISOYQNRU3qUg0zg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="9706" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也可以使用<em class="ma"> __dict__ </em>属性直接更改变量，如下所示:</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/0780f61cdfb632111df164f97a9af215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vl8dw4NL_yaocnsKksrIRg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><h2 id="2cbe" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">__ 插槽 _ _</h2><p id="353c" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma"> __slots__ </em>和上图的<em class="ma"> __dict__ </em>很像。这是<strong class="la jk">最好的特性之一，</strong>通常不被 Python 社区使用。如果数据被传递给<em class="ma"> __init__ </em>并且主要用于存储数据，<em class="ma"> __slots__ </em>可以帮助优化类的性能。下面是如何使用它:</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><p id="a44d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">再深入一点细节，<em class="ma"> __dict__ </em>浪费了很多 RAM。这是告诉 Python 不要使用<em class="ma"> __dict__ </em>而只使用一组固定属性的好方法。对于繁重的 RAM 工作，有些人已经看到通过使用<em class="ma"> __slots__ </em>减少了 40–50%的 RAM 使用[2]。</p><h2 id="bd89" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">静态方法:</h2><p id="d167" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">我们简要地看到了如何创建方法来完成特定的任务。有些方法，不一定需要修改或传递任何类参数，就可以使用。他们成为类的一部分而不是类的对象是有意义的。换句话说，他们对<em class="ma">类</em>状态一无所知。这种方法被称为<em class="ma">静态方法</em>。下面是一个小例子:</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4885a6af86e9a68e6d62b03bafbf39bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*y2aaU7nOaFEC6qqKjjpIPQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="4bb7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们上面看到的，我们可以直接使用<em class="ma">静态方法</em>，甚至不用初始化类。我们使用@staticmethod 定义这样的方法。我们主要用来创建效用函数。</p><h2 id="acd6" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">类方法:</h2><p id="d307" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><em class="ma">类方法</em>不同于<em class="ma">静态方法</em>。这里，<em class="ma">类方法</em>可以访问或修改<em class="ma">类</em>的状态。当调用方法时，我们将<em class="ma"> cls </em>作为指向类而不是对象实例的参数传递。</p><figure class="lu lv lw lx gt iv"><div class="bz fp l di"><div class="mb lz l"/></div></figure><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/cc3e10910b7bec82984417389668d6a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*iPZnTLUQp7qq1KvXPURdXA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上面代码的输出</p></figure><p id="8103" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们在上面看到的，一个人可以单独使用这个方法，但是它需要它所属的类所期望的所有参数。根据输入的数字，大小被确定为“中等”。我们使用@classmethod 定义它们。</p><h2 id="cbb0" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">结论:</h2><p id="e179" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这些是我在一段时间里学到的一些重要的方面。如果想真正写出更好的 Python 代码，理解并实现这些“最佳实践”是很重要的。一开始可能很难理解，但是你越是编码和尝试使用它们，你就会越清楚地理解它们的重要性。最佳实践有助于代码库的长期可维护性。集成良好设计原则的良好基础不仅会使未来的开发更容易，还会帮助其他用户/团队成员使用相同的代码进行重用或改进。</p><h2 id="f48b" class="mc md jj bd me mf mg dn mh mi mj dp mk lh ml mm mn ll mo mp mq lp mr ms mt mu bi translated">参考资料:</h2><ol class=""><li id="67e8" class="nj nk jj la b lb mv le mw lh nl ll nm lp nn lt no np nq nr bi translated"><a class="ae jg" href="https://www.programiz.com/python-programming/object-oriented-programming" rel="noopener ugc nofollow" target="_blank">www.programiz.com</a></li></ol><p id="b805" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://book.pythontips.com/en/latest/__slots__magic.html" rel="noopener ugc nofollow" target="_blank"> 2。https://book.pythontips.com/en/latest/__slots__magic.html</a></p><blockquote class="ns nt nu"><p id="3ef2" class="ky kz ma la b lb lc kk ld le lf kn lg nv li lj lk nw lm ln lo nx lq lr ls lt im bi translated">如果你认为我遗漏了什么概念，应该补充，请随时评论！欢迎评论！</p></blockquote></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="6fa6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="ma">想成为</em> <a class="ae jg" href="https://pratikkgandhi.medium.com/membership" rel="noopener"> <em class="ma">中等会员</em> </a> <em class="ma">享受无限制阅读文章的乐趣，请注册成为会员。Medium 将与我分享一部分给使用以上链接注册的成员！谢了。</em></p></div></div>    
</body>
</html>