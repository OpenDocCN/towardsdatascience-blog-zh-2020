<html>
<head>
<title>Using Browser Cookies and Voyager API to Scrape LinkedIn via Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用浏览器Cookies和Voyager API通过Python抓取LinkedIn</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-browser-cookies-and-voyager-api-to-scrape-linkedin-via-python-25e4ae98d2a8?source=collection_archive---------18-----------------------#2020-06-03">https://towardsdatascience.com/using-browser-cookies-and-voyager-api-to-scrape-linkedin-via-python-25e4ae98d2a8?source=collection_archive---------18-----------------------#2020-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="bb23" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我们将使用requests的Sessions方法、浏览器cookies和LinkedIn的voyager API从LinkedIn收集数据。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/8c008973db5ce980fcccc5c30a0a2c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kZ31rT7GNAMNz0FmFXnHQ.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">格雷格·布拉在<a class="ae le" href="https://unsplash.com/s/photos/linkedin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1d77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">抓取LinkedIn每天都变得越来越困难，尤其是如果你使用像UiPath，Selenium等开放软件的话。LinkedIn软屏蔽你，并在登录时添加一个reCAPTCHA，这变得很难绕过。LinkedIn的voyager API可能是从LinkedIn提取信息的最佳方式。</p><p id="3a88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">LinkedIn的数据可以用于许多目的，从线索生成开始，搜索工作，如果你是一名招聘人员，你可以为你的组织找到合适的候选人，如果你想为你的公司找到投资者，底线是你可以使用LinkedIn获得数据以满足你的需求。最重要的是你必须知道你在寻找什么。</p><h1 id="5edc" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">我们开始吧</h1><p id="2137" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们将使用LinkedIn的voyager API来抓取一家公司的about页面。<br/>见/找<em class="mi">航海家API的完整文档阅读</em> <a class="ae le" href="https://linkedin.api-docs.io/v1.0" rel="noopener ugc nofollow" target="_blank"> <em class="mi">此处</em> </a> <em class="mi">。</em></p><p id="0ea5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，最重要的部分是获取浏览器cookies，我们将在该过程的后期阶段使用它们。在深入研究不同类型的Linkedin Cookies之前，您将需要来自您的LinkedIn登录会话的两个主要cookie，让我们看看如何访问我们的cookie，只需遵循这些简单的步骤。点击谷歌浏览器中的选项(右上角有3个垂直点)。<br/> 2。在这之后，点击更多工具，然后是开发人员工具(你也可以通过使用键盘组合-ctrl+shift+I来达到这里)。</p><p id="0d48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，一旦您获得了开发人员工具的访问权限，您将看到名为Elements、console等选项卡。导航到Application选项卡，从这里复制两个cookies的值，分别命名为li_at和JSESSIONID。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mj"><img src="../Images/c9b4649d39123d2c79a0beb73a2cdd68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YBmyBIh5i6YRrQgFw_UGew.png"/></div></div></figure><p id="a9d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">记下这两个cookies的值，并将其存储在某个我们稍后会用到的地方。我已经模糊了值，以防止我的帐户可能被滥用。</p><p id="63a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们已经完成了最初的部分，让我们进入有趣的部分——你猜对了——编码。</p><p id="7cb4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是完整的代码，我们一步步来看。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="76c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">variables headers是一个包含用户代理的字典，你也可以通过运行简单的Google搜索“我的用户代理”来使用自己的代理，你会得到类似这样的结果，只需粘贴你的结果并继续前进。</p><p id="77ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，LinkedIn给每个公司页面分配一个唯一的id，你可以很容易地找到它。一旦你有了那个，就用代码中的一来代替那个数字。</p><p id="3442" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mi">https://www . LinkedIn . com/voyager/API/entities/companies/{公司id} </em></p><p id="8e12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们将使用最初从浏览器中提取的cookies创建一个会话。</p><p id="cd3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mm mn mo mp b">s.cookies['li_at'] = "your li_at cookie"<br/>s.cookies['JSESSIONID'] = "your JSESSIONID"</code></p><p id="33f3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我们需要csrf-token身份验证，并在我们的头中设置它。为此，我们需要修改JSESSIONID键，您的JSESSIONID将如下所示:</p><p id="8ec2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mm mn mo mp b">"ajax:7454514581611861831542146"</code></p><p id="4b69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将需要从JSESSIONID中剥离<code class="fe mm mn mo mp b">"</code>，然后将其添加到标题中:</p><p id="4c32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mm mn mo mp b">s.headers["csrf-token"] = s.cookies["JSESSIONID"].strip('"')</code></p><p id="5e90" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后一部分非常简单，向voyager API发送get请求，并将响应转换为字典。</p><p id="a530" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这之后，你会看到关于该公司的所有信息。</p><h1 id="bc7a" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">脚注</h1><p id="d88d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">有许多工具(我个人使用的一个工具是<a class="ae le" href="https://phantombuster.com/" rel="noopener ugc nofollow" target="_blank"> PhantomBuster </a>)可以做完全相同的事情，但是在规模上，它们本质上做的是在两个请求之间放置一个等待时间以及一些其他技巧。</p><p id="f814" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个脚本只是为了提取公司的详细信息，如果你试图在一个循环中运行它来一次获得成千上万Linkedin公司页面的详细信息，Linkedin会阻止你，还可能永久禁止你的帐户，这可能非常非常难以恢复。</p><p id="a3b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这只是我们用voyager API构建的一个工作流，你可以用它做很多很酷的事情，从获取一个人的个人资料开始，回复对话，发送连接请求或回复它们，用高级过滤器进行工作搜索，喜欢或评论帖子。简而言之，你可以做任何你在LinkedIn上做的事情，但是有它的API，没有UI。如果你还想看另一篇关于其他事情的文章，请在下面评论。</p></div></div>    
</body>
</html>