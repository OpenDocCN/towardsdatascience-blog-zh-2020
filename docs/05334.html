<html>
<head>
<title>How to Be Awesome And Save Time With Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过自动化变得更棒并节省时间</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/laziness-saved-my-friends-sanity-6683dcec2383?source=collection_archive---------56-----------------------#2020-05-05">https://towardsdatascience.com/laziness-saved-my-friends-sanity-6683dcec2383?source=collection_archive---------56-----------------------#2020-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="89e9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我写Python字数统计脚本时的一个实际用例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b9d6c884f42d850bf2d2b32afd60e436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3N4C1SGMAIyYljax"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@evik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃维·卡莱米</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="7acf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和很多开发者一样，我很懒。我珍惜自己的时间，也珍惜亲人的时间。</p><p id="87cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我看到一个朋友一遍又一遍地重复一项乏味的任务时，我感到沮丧，就好像这是我的负担一样。因为我讨厌重复的任务，所以我想找到一种自动化它们的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="02e2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">拥抱懒惰</h1><p id="a8ed" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">自动化包括给机器一套指令，让它替你做所有的重活。都是关于<strong class="lb iu">效率</strong>。我跟你说实话:我是一名专门从事移动开发的程序员。我对脚本语言没有特别的了解。</p><p id="ae7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不久前，我看到一篇文章，这篇文章启发了我如何以及为什么我们可以让生活变得更轻松。</p><div class="mz na gp gr nb nc"><a href="https://automatetheboringstuff.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">用Python自动化枯燥的东西</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">“编程最好的部分是看到机器做一些有用的事情的胜利。用…自动化枯燥的工作</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">automatetheboringstuff.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4eb7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">这值得痛苦吗？</h1><p id="1498" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">记住，大多数开发人员都很懒。写剧本对我来说听起来很痛苦。对你来说也一样。问自己这些问题:你介意重复同样的任务吗？你觉得手工做有价值吗？如果你在这些问题上犹豫不决，考虑投资一些时间在自动化上。</p><p id="d43c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我想和你分享一个故事，这个故事让我为我的朋友写了一个小剧本。我决定选择Python，因为这是一个发现这种语言的绝佳机会。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5bc9" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">字数问题</h1><p id="3ba7" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">有一天，女朋友带着任务来找我。她是一名专业内容作家。有时，她碰巧做翻译工作。有一次，一家公司给她发了一个剧本来翻译。以下是一个示例:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="bf74" class="nw md it ns b gy nx ny l nz oa">Joey and Phoebe meets in a bar<br/>Joey(smiling): [&lt;How're you doing?&gt;]<br/>Phoebe welcomes him with open arms<br/>Phoebe(cheerful): [&lt;Oh! I'm feeling great!&gt;]</span></pre><p id="3662" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意到文本中的分隔符了吗？该公司突出显示了要翻译的区域。其余的作为额外的信息——对从上下文中选择正确的语气至关重要。工作完成后，她需要将发票寄给公司。因为我的朋友是按单词收费的，她需要计算她翻译了多少单词。</p><p id="ad3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何文字处理软件都可以帮你统计字数。然而，她不能对整篇文章收费——并不是说她不介意账单。她必须首先排除括号外的内容。可惜公司没有给她提供这样的工具。</p><p id="3047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当她开始用手数单词时——我们谈论的是50000个单词！——我必须在她失去理智之前进行干预。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b8e7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">分析需求</h1><p id="67bb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">任务很明确:在一个定义的分隔符内计算所有单词。我开始把它分解成更小的步骤:</p><ol class=""><li id="a136" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">对于所有输入行，提取<code class="fe ok ol om ns b">[&lt;</code>和<code class="fe ok ol om ns b">&gt;]</code>之间的文本。</li><li id="e474" class="ob oc it lb b lc on lf oo li op lm oq lq or lu og oh oi oj bi translated">将所有带格式的行合并成一个文本块。</li><li id="b7fd" class="ob oc it lb b lc on lf oo li op lm oq lq or lu og oh oi oj bi translated">把这个模块分成一个单词列表</li><li id="1c9d" class="ob oc it lb b lc on lf oo li op lm oq lq or lu og oh oi oj bi translated">计算列表的长度</li></ol><p id="94df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到这一点，我准备开始下一阶段。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5a27" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">用脚本自动化</h1><p id="c337" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我最终写了这个剧本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="os ot l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">word_counter.py</p></figure><p id="b402" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！我承认我花了两个小时才把它放下。但这两个小时花得很值。我很自豪地看到几行代码可以为我的朋友节省这么多时间！她的理智也是！</p><p id="c9a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">她只需要将文本插入到<code class="fe ok ol om ns b">inputString</code>变量中，然后运行脚本来获得字数。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="c363" class="nw md it ns b gy nx ny l nz oa">$ python word_counter.py<br/>7 // there are seven words in the example above</span></pre><p id="6302" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于没有入门的Python开发人员，我们来分解一下这段代码。</p><h2 id="0578" class="nw md it bd me ou ov dn mi ow ox dp mm li oy oz mo lm pa pb mq lq pc pd ms pe bi translated">提取分隔符中的文本</h2><p id="cb6c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第一步要求我使用正则表达式(Regex)。它们允许我提取符合特定模式的所有行。我以这个结尾:</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="1bad" class="nw md it ns b gy nx ny l nz oa">import re</span><span id="3478" class="nw md it ns b gy pf ny l nz oa">list = re.findall(r'\[\&lt;(.+?)\&gt;\]', inputString)<br/>// ['How're you doing?', 'Oh! I'm feeling great!']</span></pre><p id="703f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们必须导入Regex库。然后，我们通过从<code class="fe ok ol om ns b">inputString</code>中找到所有以<code class="fe ok ol om ns b">[&lt;</code>开头、以<code class="fe ok ol om ns b">&gt;]</code>结尾的句子来创建一个<code class="fe ok ol om ns b">list</code>。最后，括号声明我们想要排除分隔符。作为注释，我展示了从本文开头的示例中获得的结果。</p><h2 id="0644" class="nw md it bd me ou ov dn mi ow ox dp mm li oy oz mo lm pa pb mq lq pc pd ms pe bi translated">从提取的文本创建一个句子</h2><p id="1b15" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们要把<code class="fe ok ol om ns b">list</code>展平成一句话。我们需要将前面的列表加入到一个空字符串中。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="f404" class="nw md it ns b gy nx ny l nz oa">subString = " ".join(list).replace('\xc2\xa0', ' ')<br/>// "How're you doing?, Oh! I'm feeling great!"</span></pre><p id="1851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意到<code class="fe ok ol om ns b">replace</code>方法了吗？由于UTF-8编码，当复制粘贴你的文本时，一些<a class="ae ky" href="https://en.wikipedia.org/wiki/Non-breaking_space" rel="noopener ugc nofollow" target="_blank">不间断空格</a>会出现。我们可以用一个规则的空格代替它们来计算两个单词而不是一个。当我的朋友要开发票时，省略单词不会让她高兴！</p><h2 id="735e" class="nw md it bd me ou ov dn mi ow ox dp mm li oy oz mo lm pa pb mq lq pc pd ms pe bi translated">将句子拆分成单词</h2><p id="e93e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于这一步，一个简单的<code class="fe ok ol om ns b">split</code>就可以了。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="7e50" class="nw md it ns b gy nx ny l nz oa">words = subString.split()<br/>// ['How're', 'you', 'doing?', 'Oh!', 'I'm', 'feeling', 'great!']</span></pre><p id="7b8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在继续之前，我必须检查结果是否正确。例如，你可能会惊讶于“怎么样”也算一个单词。我也很好奇。然而，任何在线工具都会证实这一点。</p><h2 id="873d" class="nw md it bd me ou ov dn mi ow ox dp mm li oy oz mo lm pa pb mq lq pc pd ms pe bi translated">计数和打印</h2><p id="02cf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">最后，计算并打印我们的<code class="fe ok ol om ns b">words</code>列表的大小。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="107d" class="nw md it ns b gy nx ny l nz oa">count = len(subStr.split())<br/>print count<br/>// 7</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f8b7" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">如何理解它？</h1><p id="0900" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我知道这个剧本一点也不特别。有改进的余地。例如，我可以提取分隔符或输入文本等参数。</p><p id="0158" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但它完成了任务。这就是我所关心的！</p><p id="19bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">痛苦吗？不完全是。在不了解Python的情况下，我设法在几个小时内编写了一个小脚本。我甚至觉得写它很有趣！</p><p id="41ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得吗？问我女朋友。到目前为止，她似乎很感谢有这个工具。</p></div></div>    
</body>
</html>