<html>
<head>
<title>Sometimes, I want answers, not constraints.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有时候，我想要答案，而不是约束。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sometimes-i-want-answers-not-constraints-cb4b978c4f35?source=collection_archive---------71-----------------------#2020-07-24">https://towardsdatascience.com/sometimes-i-want-answers-not-constraints-cb4b978c4f35?source=collection_archive---------71-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f2c9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在数据科学世界中创造挑战</h2></div><p id="61ec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我喜欢参与代码挑战。网上有很多，每个都有自己的优点和缺点。他们大多关注数据结构，关心速度和内存的<a class="ae lb" href="https://en.wikipedia.org/wiki/Big_O_notation" rel="noopener ugc nofollow" target="_blank"><em class="lc"/></a>。但是，我的主要职业是数据科学和 AI，不是软件工程。</p><p id="a37d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，到处都有<a class="ae lb" href="https://kaggle.com" rel="noopener ugc nofollow" target="_blank">和数据以及问题，但这并没有提供我非常喜欢的关于软件工程挑战的快速“一个问题的挑战”格式。</a></p><p id="5e5b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总之，我决定自己做点东西。</p><h1 id="c51e" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">数据游乐场</h1><p id="8a22" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">这是一个想法:一个单键数据集生成器，伴随着一个问题；即，对于给定的 y，X 中的最高预测值是什么？</p><p id="0054" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我拼凑了一些代码，你可以在这里找到:<a class="ae lb" href="https://github.com/sijmenw/data-playground" rel="noopener ugc nofollow" target="_blank"> data-playground </a>。下面是一段抓住了这个想法的代码:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="bac2" class="mj le iq mf b gy mk ml l mm mn">def generate_data(size=100, n_vars=5):<br/>    data = np.zeros((size, n_vars))<br/><br/>    # insights<br/>    data = add_insights(data)<br/><br/>    # return as X, y<br/>    X = data[:, :-1]<br/>    y = data[:, -1]<br/><br/>    return X, y, answer</span></pre><h1 id="20bf" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">试运转</h1><p id="72ca" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">让我们看看我们是否能解决我们给自己制造的一个挑战。让我们来回答这个问题:X 中的哪一个特征对 y 的预测能力最强？</p><p id="83c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获取数据:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="9023" class="mj le iq mf b gy mk ml l mm mn">import data_playground<br/>X, y, answer = data_playground.generate_data()</span></pre><p id="2745" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看使用 pandas boxplot 函数得到的数据:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="de43" class="mj le iq mf b gy mk ml l mm mn">import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="8294" class="mj le iq mf b gy mo ml l mm mn">df = pd.DataFrame(X)<br/>df[‘y’] = y</span><span id="7eed" class="mj le iq mf b gy mo ml l mm mn">fig = plt.figure(figsize=(16,10)) # show large in Jupyter lab<br/>df.boxplot()</span></pre><figure class="ma mb mc md gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mp"><img src="../Images/d2b326dc407a04d361e1641e44795937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nz6YGmpmwiDe7ryGcPskkQ.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">箱线图显示 X 中的四个特征变量和目标变量 y</p></figure><p id="863a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好的，很棒的东西。现在，让我们分别检查每个特征与目标的散点图。</p><figure class="ma mb mc md gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mp"><img src="../Images/c324bdfc1c6691254661eb3b939cb894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RZmJNjm4_PrSYZ0TIgGmuw.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">每个特征变量(x 轴)与目标变量(y 轴)的散点图</p></figure><p id="5f2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗯……看来我们的预测者已经找到了。由于噪声(还)不是数据生成器的一部分，所以预测变量和目标变量之间的相关性为 1 是合乎逻辑的。</p><p id="6238" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用找到的预测值和目标变量拟合一条线</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="5712" class="mj le iq mf b gy mk ml l mm mn">from numpy.polynomial.polynomial import polyfit</span><span id="8666" class="mj le iq mf b gy mo ml l mm mn">x = X[:, 2] # select the predictor as x</span><span id="f8f1" class="mj le iq mf b gy mo ml l mm mn"># Fit with polyfit<br/>b, m = polyfit(x, y, 1)</span></pre><p id="7c7d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哦不！我们得到一个错误:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="b69f" class="mj le iq mf b gy mk ml l mm mn">LinAlgError: SVD did not converge in Linear Least Squares</span></pre><p id="a527" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看看我们的预测数据:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="ad72" class="mj le iq mf b gy mk ml l mm mn">array([ 804.47413666,  842.97551303,  748.1380677 , 1215.17156503,<br/>       1276.81035949,  584.42126573, 1234.71707604,  882.6102377 ,<br/>        706.84325884, 1199.374478  , 1004.41162981, 1057.4067627 ,<br/>        659.40211494, 1087.62207358,  956.11178348,  823.99392245,<br/>       1143.45258157,           nan, 1431.19129368, 1437.55897016,<br/>       1230.64007   ,  617.81872218, 1062.12360521, 1201.80237097,<br/>       1206.63668203,  882.78966205,  853.57276331, 1308.64976626,<br/>       1097.63082906,  786.40660024, 1162.29695854,  674.5633299 ,<br/>        624.71361214, 1389.87441326, 1104.76126325, 1200.38449289,<br/>       1431.31478774,  591.59451421, 1398.08042032,  686.02957951,<br/>       1201.50246581,  674.86646811,  919.48563472, 1155.23023783,<br/>        914.36359672,  640.30226409, 1332.67749091,  740.15844807,<br/>        829.20419027,           nan, 1003.42401407, 1410.10634418,<br/>       1413.14987011,  772.21443592, 1118.37010464,  657.38659094,<br/>        969.84855077,  926.63859525,  840.08468061, 1127.08928725,<br/>       1235.22602886,  806.12183971, 1321.99606412,  867.78834899,<br/>       1153.57274271,  667.14093202,  763.41042449,  953.45037745,<br/>        670.57004238, 1125.52558347,  733.96942094, 1124.68968026,<br/>        629.2784078 ,  614.83884103, 1112.5953336 , 1274.8264045 ,<br/>       1094.69476358, 1382.11932072,  644.08898909, 1239.15631856,<br/>       1070.14816499, 1224.89101018,  733.14740355, 1374.17210495,<br/>       1054.74359293,  818.35508666, 1123.32875169,  934.47218873,<br/>       1057.92690666, 1331.08625474,  814.7746755 ,  680.6920455 ,<br/>       1024.99541524,  801.86090882, 1339.60803444, 1305.60718156,<br/>        981.19456372, 1346.10765152,  777.84669881, 1154.19337888])</span></pre><p id="38cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你发现了吗？</p><p id="e823" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的集合中有 nan 值，这是数据生成器中实现的一个技巧，目的是让您保持警觉。</p><p id="4fbe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用特征的平均值替换 nan 值，然后再试一次。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="49e1" class="mj le iq mf b gy mk ml l mm mn">import numpy as np<br/>from numpy.polynomial.polynomial import polyfit</span><span id="f3d7" class="mj le iq mf b gy mo ml l mm mn">x = X[:, 2]</span><span id="7855" class="mj le iq mf b gy mo ml l mm mn"># set the nan values to the mean of the non-nan values<br/>x[np.isnan(x)] = x[~np.isnan(x)].mean()</span><span id="f7cd" class="mj le iq mf b gy mo ml l mm mn"># Fit with polyfit<br/>b, m = polyfit(x, y, 1)</span></pre><p id="b223" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是的，这次成功了！</p><figure class="ma mb mc md gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mp"><img src="../Images/568eab3f138d2634e7b67c9966fabdaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKwyIVyu2VikdRLPfJsHdA.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">预测变量与目标变量的散点图有一条最佳拟合线，被平均值取代的两个 nan 值清楚地显示在该线之外。</p></figure><p id="baf3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查 b 和 m 变量显示:<em class="lc"> b= -48.40 </em>和<em class="lc"> m = 0.888。</em></p><p id="9afd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们来看看给出的答案:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="60b3" class="mj le iq mf b gy mk ml l mm mn">&gt;&gt;&gt; answer.reveal()<br/>Answers: Col 2 adds linearly to target with factor 0.8882422214069292</span></pre><p id="deeb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这似乎是正确的！</p><h1 id="bfc8" class="ld le iq bd lf lg lh li lj lk ll lm ln jw lo jx lp jz lq ka lr kc ls kd lt lu bi translated">总结</h1><p id="8154" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">使用它肯定很有趣，但是在它成为一个有用的练习之前，还需要做一些工作。需要实现更复杂的关系和噪声，以及离群值和数据科学家必须处理的其他讨厌的事情。</p><p id="3229" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我很乐意在未来继续这方面的工作(非常欢迎合并请求！)，我们来看看它去哪了！</p></div></div>    
</body>
</html>