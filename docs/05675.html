<html>
<head>
<title>COVID19 Voice Assistant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">COVID19 语音助手</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/covid19-voice-assistant-63c37b1f02f9?source=collection_archive---------58-----------------------#2020-05-11">https://towardsdatascience.com/covid19-voice-assistant-63c37b1f02f9?source=collection_archive---------58-----------------------#2020-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bf55" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们听听这种病毒对我们世界的影响</h2></div><p id="f0db" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">冠状病毒已经在全球范围内造成了巨大的破坏。数百万人被感染，数千人死亡。疫情仍在上升，因为世界上所有国家都实行了封锁。每个人都有权知道这种病毒是如何影响我们的生活的，因为我们仍在继续与它作战。所以，我写了这篇关于我的项目的文章，用一种声音来表达世界的现状。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/274a9fae2ce56af1ad665a343a7e9bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8lzhxyx4NOhS15op"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">格伦·卡丽在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b997" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">语音助手项目</h1><p id="906f" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">在这个项目中，您将学习如何使用 Python 构建一个 COVID19 语音助手。该项目主要涵盖了 python 中<strong class="kh ir">网页抓取</strong>、<strong class="kh ir">语音辅助</strong>和<strong class="kh ir">多线程</strong>的基础知识。</p><h2 id="9448" class="mw ma iq bd mb mx my dn mf mz na dp mj ko nb nc ml ks nd ne mn kw nf ng mp nh bi translated">网页抓取</h2><p id="affe" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">该项目使用了一个名为<a class="ae lr" href="https://www.parsehub.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">的工具。ParseHub 是免费的 web scraper，功能非常强大，并且易于使用。这个工具允许你仅仅通过点击你想从那个网站得到的元素来抓取网页。所以，第一步是下载<a class="ae lr" href="https://www.parsehub.com/quickstart" rel="noopener ugc nofollow" target="_blank"> ParseHub </a>。</strong></a></p><p id="0f6c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将从非常著名的统计网站<a class="ae lr" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> Worldometers </strong> </a>上搜集定期更新的冠状病毒信息。打开 ParseHub - &gt;开始新项目- &gt;粘贴链接到 worldometers。</p><p id="660c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击您想要从页面中抓取的元素，并为它们分配唯一的标签。使用相关工具将页面上的“冠状病毒病例”与其编号联系起来。ParseHub 显然非常高效，它使用人工智能来理解您想要哪些元素。要尝试这种方法，将“美国”与“总病例数”联系起来，列表中的其他国家就会显示出来。太神奇了！这在幕后所做的是为上面链接的内容构建一个 JSON 格式。</p><p id="4c60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成链接后，点击“获取数据”，这可能需要一段时间。然后确保在下一个屏幕上记下 API 密钥、项目令牌和运行令牌。</p><h2 id="1886" class="mw ma iq bd mb mx my dn mf mz na dp mj ko nb nc ml ks nd ne mn kw nf ng mp nh bi translated">语音助手</h2><p id="cc72" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">复制粘贴<a class="ae lr" href="https://github.com/K-G-PRAJWAL/Python-Projects/blob/master/Coronavirus%20Voice%20Assistant/Part1.py" rel="noopener ugc nofollow" target="_blank"> Part1.py </a>中给出的代码，我会带你了解到底发生了什么。</p><p id="1154" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下几点解释了 Part1.py 文件:</p><ul class=""><li id="b5e8" class="ni nj iq kh b ki kj kl km ko nk ks nl kw nm la nn no np nq bi translated">这部分项目的需求是以下 python 包:<strong class="kh ir"> requests </strong>，<strong class="kh ir"> json </strong>，<strong class="kh ir"> pyttsx3 </strong>，<strong class="kh ir">speecher recognition</strong>，<strong class="kh ir"> re </strong>。因此，pip 安装了所有这些包。</li><li id="6f78" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">在各自的变量中使用 API 密钥、项目令牌和运行令牌。</li><li id="5770" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">类<strong class="kh ir">数据</strong>有以下方法:</li></ul><ol class=""><li id="203c" class="ni nj iq kh b ki kj kl km ko nk ks nl kw nm la nw no np nq bi translated"><strong class="kh ir"> get_data() </strong>:使用您最近在他们的服务器上运行的项目从 parsehub 获取数据，并将其返回。</li><li id="b2a0" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nw no np nq bi translated"><strong class="kh ir"> get_total_cases() </strong>:获取新冠肺炎在全球的总病例数。</li><li id="effd" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nw no np nq bi translated"><strong class="kh ir"> get_country_deaths() </strong>:获取全球新冠肺炎死亡总人数。</li><li id="7520" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nw no np nq bi translated"><strong class="kh ir"> get_country_data() </strong>:获取任何特定国家的新冠肺炎病例和死亡人数。</li><li id="021b" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nw no np nq bi translated">get_list_of_countries() :获取所有国家的列表。</li></ol><ul class=""><li id="52ec" class="ni nj iq kh b ki kj kl km ko nk ks nl kw nm la nn no np nq bi translated"><strong class="kh ir"> speak() </strong>方法初始化 pyttsx3 引擎，说出作为参数传递给它的文本。</li><li id="227b" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated"><strong class="kh ir"> get_audio() </strong>方法使用 google 的<strong class="kh ir"> recognize_google() </strong>方法监听用户通过麦克风输入的语音，并返回输入的文本。</li><li id="c734" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">最后，main()函数负责使用正则表达式模式识别输入语音，并将它们分类为世界上的病例和死亡或任何国家的病例和死亡的模式。</li><li id="ea09" class="ni nj iq kh b ki nr kl ns ko nt ks nu kw nv la nn no np nq bi translated">匹配的模式调用特定的函数并大声说出数字。</li></ul><h2 id="3f02" class="mw ma iq bd mb mx my dn mf mz na dp mj ko nb nc ml ks nd ne mn kw nf ng mp nh bi translated">多线程</h2><p id="f9dc" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">到目前为止，您的助手只说出您最初获取的数据。保持数据更新是很重要的，因为这个全球疫情仍在进行，当你的助手说数字正在下降时，这将是令人欣慰的。</p><p id="7b57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">删除 Part1.py 并将<a class="ae lr" href="https://github.com/K-G-PRAJWAL/Python-Projects/blob/master/Coronavirus%20Voice%20Assistant/main.py" rel="noopener ugc nofollow" target="_blank"> Part2.py </a>复制到您的应用程序中。</p><p id="a1b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了 Part1.py 之外，Part2.py 还有一个额外的函数和一个处理程序。这个函数就是<strong class="kh ir"> update() </strong>函数。该函数不从 parsehub 上的最后一次运行中获取数据，而是在 parsehub 服务器上为您的项目初始化一次新的运行。这将需要一段时间，所以请在更新时给它一些时间。</p><p id="4a44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最有趣的部分是减少这个时间。因此，我们使用 python 中的<strong class="kh ir">多线程</strong>库来利用多线程。通过这样做，我们可以确保语音助手在一个线程上运行，而数据更新在另一个线程上并行进行。</p><h2 id="bc2e" class="mw ma iq bd mb mx my dn mf mz na dp mj ko nb nc ml ks nd ne mn kw nf ng mp nh bi translated">结果</h2><p id="648b" class="pw-post-body-paragraph kf kg iq kh b ki mr jr kk kl ms ju kn ko mt kq kr ks mu ku kv kw mv ky kz la ij bi translated">这个项目最有趣的部分是它的结果。</p><p id="9721" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行 Part2.py 文件，当控制台显示“Listening…”时，说“number of total cases ”,助手将回复全世界的 COVID19 病例数。现在说，“印度总死亡人数”，助手会回复这个数字。</p><p id="0ccd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以说，“更新”，助手将为您更新这些值，这可能需要一些时间。请耐心等待。</p><p id="5f3b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你必须说“停止”才能退出正在运行的应用程序。</p><p id="1e43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">😲耶！！！你做到了！你刚刚建立了一个语音助手，只需使用你的声音就可以更新关于冠状病毒的信息。你可以进一步把这个项目发展成惊人的东西。要获得完整的见解，请查看我的 GitHub。</p><p id="0f7c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有任何错误，请随时通过我的<a class="ae lr" href="https://www.linkedin.com/in/k-g-prajwal-a6b3b517a/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p><p id="c081" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望你喜欢并理解这个项目。</p><p id="e51c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谢谢你。</p></div></div>    
</body>
</html>