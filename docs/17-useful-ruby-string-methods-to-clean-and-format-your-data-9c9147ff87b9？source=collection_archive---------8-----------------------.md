# æ¸…ç†å’Œæ ¼å¼åŒ–æ•°æ®çš„ 17 ä¸ªæœ‰ç”¨çš„ Ruby å­—ç¬¦ä¸²æ–¹æ³•

> åŸæ–‡ï¼š<https://towardsdatascience.com/17-useful-ruby-string-methods-to-clean-and-format-your-data-9c9147ff87b9?source=collection_archive---------8----------------------->

## ä½ ä¸å†™çš„æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯ä½ ä¸éœ€è¦ç»´æŠ¤çš„ä¸€è¡Œä»£ç 

![](img/1e61ae1c710a26b0ad16fb818431a034.png)

å‡¯æ–‡Â·Ku æ‘„äº [Pexels](https://www.pexels.com/photo/coding-computer-data-depth-of-field-577585/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)

å¤§çº¦ä¸¤å¹´å‰ï¼Œå½“æˆ‘å¼€å§‹ä½¿ç”¨ Ruby æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çŸ¥é“äº†è¿™ä¸ªæ–¹æ³•ï¼Œè‡ªä»æˆ‘å‘ç°äº†å®ƒï¼Œæˆ‘æ¯å¤©éƒ½ç”¨å®ƒæ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚ä»é‚£ä»¥åï¼Œæˆ‘é‡åˆ°äº†å…¶ä»–å‡ ç§æ–¹æ³•ã€‚æˆ‘æƒ³åœ¨è¿™é‡Œç¼–è¯‘æˆ‘æœ€å–œæ¬¢çš„â€”â€”è¿™äº›æ˜¯æœ€é€‚åˆç®€åŒ–ä»£ç çš„ã€‚

å­—ç¬¦ä¸²æ“ä½œæ˜¯ç¨‹åºå‘˜æ¯å¤©éƒ½è¦åšçš„å·¥ä½œã€‚ä»æ¸…ç†åˆ°æ ¼å¼åŒ–æ•°æ®ï¼Œå†åˆ°åˆ†æå­—ç¬¦ä¸²ï¼Œå„ä¸ç›¸åŒã€‚æ ¹æ®æ‚¨çš„éœ€è¦ï¼Œæ‚¨æœ€ç»ˆå¯èƒ½ä¼šé‡‡ç”¨ä»¥ä¸‹ä¸€ç§ã€å¤šç§æˆ–æ‰€æœ‰æ–¹æ³•ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è®¨è®ºç”± [Ruby String ç±»](https://ruby-doc.org/core-2.7.1/String.html)æä¾›çš„ 17 ç§æœ‰æ•ˆçš„å­—ç¬¦ä¸²æ–¹æ³•ï¼Œå®ƒä»¬å°†é€šè¿‡èŠ‚çœå®è´µçš„æ—¶é—´ä½¿ä½ çš„ç”Ÿæ´»å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

## 1.è¿­ä»£å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦

æˆ‘ä»¬ç»å¸¸éœ€è¦éå†å­—ç¬¦ä¸²æ¥å¤„ç†å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³è¦æ‰“å°æ‰€æœ‰å…ƒéŸ³ã€‚

```
str = "abcdeU"
temp = ""
str.each_char do |char|
 puts char if ['a','e','i','o','u'].include? char.downcase
end
# a
# e
# U
```

æˆ‘ä»¬å¯ä»¥åŠ ä¸Š`with_index`å¾—åˆ°å­—ç¬¦çš„ä½ç½®ã€‚

```
str = "abcdeU"
temp = ""
str.each_char.with_index do |char, i|
 puts "#{i} #{char}" if ['a','e','i','o','u'].include? char.downcase
end
# 0 a
# 4 e
# 5 U
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œç´¢å¼•ä»é›¶å¼€å§‹ï¼Œä½†æ˜¯æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰å®ƒã€‚

```
str = "abcdeU"
temp = ""
str.each_char.with_index(100) do |char, i|
 puts "#{i} #{char}" if ['a','e','i','o','u'].include? char.downcase
end
# 100 a
# 104 e
# 105 U
```

å¦ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•æ˜¯`str.each_byte`æ¥è·å–å•ä¸ªå­—èŠ‚ã€‚å½“ä½ å¤„ç† ASCII ç çš„æ—¶å€™ï¼Œè¿™å¾ˆæœ‰å¸®åŠ©ã€‚

```
str = "abcdeABCDE"
str.each_byte do |char|
 puts char
end
# 97
# 98
# 99
# 100
# 101
# 65
# 66
# 67
# 68
# 69
```

## 2.å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„

è¦å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`str.chars`ï¼Œå®ƒæ˜¯`str.each_char.to_a`çš„ç®€å†™ã€‚

```
char_array = "abcdeABCDE".chars
# ["a", "b", "c", "d", "e", "A", "B", "C", "D", "E"]
```

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»ä½•[æ•°ç»„](https://ruby-doc.org/core-2.7.1/Array.html)æ–¹æ³•ï¼å¤šé…·å•Šï¼ä¾‹å¦‚ï¼Œ`join`æ–¹æ³•å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±ç»™å®šçš„åˆ†éš”ç¬¦åˆ†éš”ã€‚é€šè¿‡å…¬å¼€æ•°ç»„æ–¹æ³•ï¼Œæˆ‘ä»¬æœ‰æ›´å¤šçš„é€‰é¡¹æ¥æ“ä½œå­—ç¬¦ä¸²ã€‚

```
char_array.map { |c| c.downcase }.join(', ')
# "a, b, c, d, e, a, b, c, d, e"
```

## 3.è·å–å­—ç¬¦ä¸²çš„é•¿åº¦

æˆ‘è®¤ä¸ºè¿™æ˜¯æœ‰å²ä»¥æ¥æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚å½“æ‚¨æƒ³åœ¨å°†å­—ç¬¦ä¸²æ’å…¥æ•°æ®åº“è¡¨ä¹‹å‰æ£€æŸ¥å­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨`size`ï¼Œæ˜¯åŒä¹‰è¯ã€‚æ ¹æ®ä½ çš„å–œå¥½ï¼Œä½ å¯ä»¥é€‰æ‹©å…¶ä¸­ä»»ä½•ä¸€ä¸ªğŸ‘ã€‚æˆ‘æ›´å–œæ¬¢ç”¨`length`çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“ç†è§£ã€‚

```
"HELLO World".length 
# 11
"HELLO World".size
# 11
```

## 4.è·å–å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°

`str.count`å°†ä¸€ç»„æˆ–å¤šç»„å­—ç¬¦ä½œä¸ºå‚æ•°ã€‚ä¹‹åï¼Œæˆ‘ä»¬å–è¿™äº›é›†åˆçš„äº¤é›†æ¥å¾—åˆ°æœ€ç»ˆçš„å­—ç¬¦é›†ã€‚æœ€åï¼Œè¿™å¥—ç”¨æ¥ç»Ÿè®¡`str`ä¸­çš„äººç‰©ã€‚

```
"look up!".count("o")
# 2
"look up!".count("m")
# 0
"abcdef".count("a-c", "c-f")
# 1
```

æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ç»Ÿè®¡å¤šä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ç»Ÿè®¡ä¸€ä¸‹å…ƒéŸ³çš„ä¸ªæ•°ã€‚

```
"abcdeUUU".downcase.count("aeiou")
# 5
```

è¾…éŸ³æ€ä¹ˆæ ·ï¼Ÿéœ²æ¯”æ©æŠ¤ä½ ã€‚`^`ç¬¦å·æ˜¯ç”¨æ¥å¦å®šäººç‰©çš„ã€‚

```
"abcdeUUU".downcase.count("^aeiou")
# 3
```

ä»¥ä¸Šä¸¤ä¸ªä¾‹å­å¹¶æ²¡æœ‰æ¶µç›–æ¯ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚å«æœ‰æ•°å­—æˆ–ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚

```
"^-12#abcdeUUU".downcase.count("^aeiou")
# 8
```

å¦‚æœæˆ‘ä»¬æƒ³æ›´æ¸…æ¥šåœ°äº†è§£å…è®¸çš„å­—ç¬¦é›†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä¾‹å­ã€‚è¿™é‡Œçš„`a-z`è¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦ã€‚ä¹‹åï¼Œæˆ‘ä»¬æ’é™¤å…ƒéŸ³ã€‚å¦‚æœæˆ‘ä»¬å–ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå­—ç¬¦é›†çš„äº¤é›†ï¼Œæˆ‘ä»¬å°±æœ‰äº†æœ‰æ•ˆå¸¸é‡é›†ã€‚

```
"^-12#abcdeUUU".downcase.count("a-z", "^aeiou")
# 3
```

å¦‚æœæˆ‘ä»¬æƒ³åœ¨æˆ‘ä»¬çš„å­—ç¬¦é›†ä¸­åŒ…å«`^`æˆ–`-`ç¬¦å·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åæ–œæ å­—ç¬¦å¯¹å®ƒä»¬è¿›è¡Œè½¬ä¹‰ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ç”¨åæ–œæ å­—ç¬¦å¯¹ç¬¦å·è¿›è¡Œè½¬ä¹‰æ¥åŒ…å«ç¬¦å·`^`æˆ–`-`ã€‚å› æ­¤ï¼Œæœ€ç»ˆçš„å­—ç¬¦é›†å°†æœ‰`^`ã€`-`å’Œ`0 to 9`ã€‚

```
"^-1234#".downcase.count("\\^\\-0-9")
# 6
```

## 5.åè½¬ä¸€æ ¹ç»³å­

åè½¬å­—ç¬¦ä¸²ä¼šå¾ˆæ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼Œå½“ä½ æƒ³æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡æ—¶ã€‚

```
str = "Anna"
str.reverse 
# "annA"

puts "palindrome" if str.downcase == str.downcase.reverse
# palindrome

# eql? is a synonym for ==
puts "palindrome" if str.downcase.eql?(str.downcase.reverse)
# palindrome
```

## 6 æœç´¢å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦

å¦‚æœå­—ç¬¦ä¸²æˆ–å­—ç¬¦å­˜åœ¨ï¼Œåˆ™`str.include?`è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

```
"hEllo wOrlD".include?("w") 
# true
"hEllo wOrlD".include?("1") 
# false
```

## 7.æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦

**æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦æ˜¯æ¸…ç†æˆ–æ ¼å¼åŒ–æ•°æ®çš„å¥½æ–¹æ³•ã€‚`str.gsub`æˆ–å…¨å±€æ›¿æ¢ç”¨æä¾›çš„å­—ç¬¦ä¸²æ›¿æ¢æ‰€æœ‰å‡ºç°çš„å†…å®¹ã€‚è¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æ›¿æ¢çš„å­—ç¬¦é›†ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢å­—ç¬¦é›†ã€‚**

```
"Red, Red and Blue".gsub("Red", "Orange") 
"Orange, Orange and Blue"
```

**å¦‚æœæ‚¨æƒ³æ›¿æ¢ç¬¬ä¸€æ¬¡å‡ºç°çš„ï¼Œä½¿ç”¨`str.sub`ã€‚**

```
"Red, Red and Blue".sub("Red", "Orange") 
"Orange, Red and Blue"
```

**`str.gsub`ä¹Ÿæ¥å—æ•£åˆ—æˆ–å—ã€‚**

```
"organization".gsub("z", 'z' => 's') 
# "organisation"
```

**è¿™é‡Œæˆ‘ä»¬å¯»æ‰¾æ•°å­—ï¼Œå¹¶åœ¨å¼€å¤´æ·»åŠ ä¸€ä¸ª`$`ç¬¦å·ã€‚**

```
"Price of the phone is 1000 AUD".gsub(/\d+/) { |s| '$'+s } 
# "Price of the phone is $1000 AUD"
```

## **8.æ‹†å¼€ä¸€æ ¹ç»³å­**

**æ ¹æ®åˆ†éš”ç¬¦(é»˜è®¤ä¸ºç©ºæ ¼)æˆ–æ¨¡å¼åˆ†å‰²å­—ç¬¦ä¸²ã€‚**

```
sentence = "There Is No Spoon"
words = sentence.split
# ["There", "Is", "No", "Spoon"]
sentence = "There_Is_No_Spoon"
words = sentence.split("_")
# ["There", "Is", "No", "Spoon"]
```

**`?=`ç”¨äºæ­£å‘é¢„æµ‹ä»¥æŸ¥æ‰¾å¤§å†™å­—æ¯ã€‚**

```
sentence = "ThereIsNoSpoon"
words = sentence.split(/(?=[A-Z])/)
# ["There", "Is", "No", "Spoon"]
sentence = "a111b222c333"
words = sentence.split(/(?=[a-z])/)
# ["a111", "b222", "c333"]
```

**æ‚¨å¯ä»¥é€šè¿‡æä¾›ç¬¬äºŒä¸ªå‚æ•°æ¥é™åˆ¶æ‹†åˆ†çš„æ•°é‡ã€‚**

```
sentence = "June 27,June 26,June 25"
words = sentence.split(/,/, 2)
# ["June 27", "June 26,June 25"]
```

## **9.ä¿®å‰ªç»³å­**

**`str.trim`å°†åˆ é™¤ä»¥ä¸‹ä»»ä½•å‰å¯¼å’Œå°¾éšå­—ç¬¦:`null("\x00")`ã€æ¨ªçº¿`tab("\t")`ã€`line feed(\n)`ã€`vertical tab("\v")`ã€`form feed(f)`ã€`carriage return(\r)`ã€`space(" ")`ã€‚**

```
" hEllo WOrlD \n\t\v\r ".strip 
# "hEllo WOrlD"
```

## **10.ä¿®å‰ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦**

**å½“ç»™å®šè®°å½•åˆ†éš”ç¬¦æˆ–å›è½¦ç¬¦(`\n`ã€`\r`å’Œ`\r\n`)æ—¶ï¼Œ`str.chomp`åˆ é™¤å°¾éšå­—ç¬¦ã€‚**

```
"...hello...world...".chomp(".")
# "...hello...world.."
"...hello...world".chomp(".")
"...hello...world"
"...hello...world...\n".chomp(".")
# "...hello...world...\n"
"...hello...world...\n".chomp
# "...hello...world..."
"...hello...world...\r".chomp
# "...hello...world..."
"...hello...world...\r\n".chomp
# "...hello...world..."
"...hello...world...\n\r".chomp
"...hello...world...\n"
```

## **11.åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¹‹å‰æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²**

**å°†ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦è¿½åŠ åˆ°å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚**

```
a = "world" 
a.prepend("hello ") 
# "hello world"
```

## **12.æ’å…¥å­—ç¬¦ä¸²**

**å‘å­—ç¬¦ä¸²çš„ç‰¹å®šä½ç½®æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚**

```
a = "hello" 
a.insert(a.length, " world") 
# "hello world"
```

## **13.æ›´æ”¹å­—ç¬¦ä¸²å¤§å°å†™çš„æ–¹æ³•**

**`str.downcase`ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦è½¬æ¢æˆå°å†™ã€‚**

```
"HELLO World".downcase 
# "hello world"
```

**`str.upcase`ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦è½¬æ¢æˆå¤§å†™ã€‚**

```
"hello worlD".upcase 
# "HELLO WORLD"
```

**`str.capitalize`å°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆå¤§å†™ï¼Œå…¶ä½™çš„è½¬æ¢æˆå°å†™ã€‚**

```
"hEllo wOrlD".capitalize 
# "Hello world"
```

**`str.swapcase`ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„å¤§å†™å­—ç¬¦è½¬æ¢æˆå°å†™å­—ç¬¦ï¼Œå¹¶å°†å°å†™å­—ç¬¦è½¬æ¢æˆå¤§å†™å­—ç¬¦ã€‚**

```
"hEllo WOrlD".swapcase 
# "HeLLO woRLd"
```

## ****14ã€‚æ·»åŠ å­—ç¬¦ä¸²****

**ä¸€ç§å¸¸è§çš„å­—ç¬¦ä¸²æ“ä½œæ˜¯ä¸²è”ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`str.concat`æˆ–`<<`ã€‚**

```
str1 = "hello"
str2 = "world"
str1.concat(" ").concat(str2)
puts "#{str1}"
# "hello world"

# << is same as concat
str1 = "hello"
str2 = "world"
str1 << " " << str2
puts "#{str1}"
# "hello world"
```

## **15.è·å–å­å­—ç¬¦ä¸²**

**å½“æ‚¨æƒ³è¦å­—ç¬¦ä¸²çš„ç‰¹å®šéƒ¨åˆ†æ—¶,`str.slice`æ–¹æ³•æ˜¯å®Œç¾çš„ï¼›å®ƒè¿”å›ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯åŒ…å«æ€§çš„ï¼Œç¬¬äºŒä¸ªç´¢å¼•æ˜¯æ’ä»–æ€§çš„ã€‚**

```
str = "hello world"
puts "#{str.slice(0, 5)}"
# hello
```

## **16.æŸ¥æ‰¾å¸¦æœ‰ç»™å®šå‰ç¼€å’Œåç¼€çš„å­—ç¬¦ä¸²**

**æˆ‘ä»¬å¯ä»¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²å¼€å§‹è¿˜æ˜¯ç»“æŸã€‚**

```
str = "Mr. Leonardo"
str.start_with?("Mr.")
# true
str = "The quick brown fox jumps over the lazy dog."
str.end_with?(".")
# true
```

## **17.ç©ºå­—ç¬¦ä¸²æ£€æŸ¥**

**å¤§æ¦‚å¦ä¸€ä¸ªæœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯`str.empty`ï¼Œå¯ä»¥ç”¨äºæ•°æ®éªŒè¯ã€‚**

```
output = ""
output.empty?
# true
output = " "
output.empty?
# false
```

# **åŒ…è£¹**

**åƒå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒRuby æœ‰è‡ªå·±çš„æ ‡å‡†åº“æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•é’ˆå¯¹æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä½¿ç”¨è¿™ 17 ç§æ–¹æ³•ï¼Œä½ å¯ä»¥ç›´æ¥è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯èŠ±æ—¶é—´å®ç°å¤§é‡çš„å¸®åŠ©æ–¹æ³•ã€‚æ°¸è¿œè®°ä½ï¼Œæ²¡æœ‰å†™çš„ä¸€è¡Œä»£ç æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„ä»£ç ã€‚å¦‚æœä½ æœ‰å…´è¶£å­¦ä¹ æ›´å¤šå…³äº Ruby çš„çŸ¥è¯†ï¼Œè¯·é˜…è¯»ä¸‹é¢çš„åˆå­¦è€…æŒ‡å—ã€‚ç¼–ç å¿«ä¹ï¼**

**[](https://medium.com/swlh/a-beginners-guide-to-ruby-810f230c53da) [## Ruby åˆå­¦è€…æŒ‡å—

### ç¦»å†™ä¸‹ä½ çš„ä¸‹ä¸€ä»¶å¤§äº‹åˆè¿‘äº†ä¸€æ­¥

medium.com](https://medium.com/swlh/a-beginners-guide-to-ruby-810f230c53da)**