<html>
<head>
<title>Airbnb Pricing Recommender</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Airbnb价格推荐器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/airbnb-pricing-recommender-19225d0f5d1?source=collection_archive---------25-----------------------#2020-02-18">https://towardsdatascience.com/airbnb-pricing-recommender-19225d0f5d1?source=collection_archive---------25-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="107f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用机器学习来识别最优列表价格</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9981cedf999dce1ef4c714ad81d6099e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GwHZtWGRNxBH5VsqohKHlg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚历山大·帕萨里克(<a class="ae ky" href="https://www.pexels.com/photo/street-under-cloudy-sky-1344537/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>)的照片</p></figure><p id="369b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为我的数据科学项目Metis的一部分，我试图为Airbnb主机设计一个更好的定价系统，以优化它们的上市价格。通过这篇文章，我希望解释促使我设计这个模型的原因，以及我用来训练最优回归模型的方法。</p><h1 id="2861" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">背景</h1><p id="5552" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你是一名主持人，你可能已经听说过AirBnB的智能定价(smart pricing)，这是一种帮助主持人根据需求和其他各种因素自动控制价格的定价工具。但是，尽管智能定价能够考虑到预订历史等因素，但它旨在最大限度地提高入住率，并可以提出比东道主希望的价格更低的价格。</p><p id="7d94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我想设计一个工具来训练活跃的列表，以建议最佳价格，同时也允许主机将推荐价格与类似列表的价格进行比较。</p><p id="9f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">定价本身是非常个人化的，因为一些主人寻求提供负担得起和预算友好的体验，而其他人可能更奢侈，并寻求提供超级奢侈的体验。我不只是向主机建议价格，而是希望主机能够将建议价格与他们的直接竞争对手进行比较，以便更好地帮助他们对其列表价格做出决定。</p><h2 id="341b" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">目标</h2><ul class=""><li id="aa1d" class="ne nf it lb b lc mn lf mo li ng lm nh lq ni lu nj nk nl nm bi translated">确定主持人可以用来提高可销售性的可操作特征</li><li id="047e" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">探索活跃列表的地理位置</li><li id="4ad0" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">创建一个可解释的回归模型，让主办方了解其建议价格背后的因素</li></ul><h2 id="88ea" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">我的方法</h2><ol class=""><li id="e962" class="ne nf it lb b lc mn lf mo li ng lm nh lq ni lu ns nk nl nm bi translated">从InsideAirBnB收集数据</li><li id="4fec" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">预处理数据并确定最佳列表</li><li id="83ad" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">特征工程/探索性数据分析</li><li id="e812" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">回归建模和评估</li><li id="0c88" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">使用最近邻居识别相似的列表</li></ol><h2 id="68eb" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">数据</h2><p id="e373" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">不幸的是，AirBnB没有任何开放的数据集，但InsideAirBnB是一个独立的实体，它在网上搜集世界各大城市AirBnB房源的公开信息。对于这个项目的范围，我选择把重点放在日本东京的上市。</p><p id="3c7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据有一些限制，因为我只使用了2019年9月刮的房源。此外，虽然我想用时间序列来模拟季节性，但InsideAirBnB没有东京一年的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/691bfaf9df31db28e3e3690e3e673b14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ndjoc9PDzB3lxxUgvAB2A.png"/></div></div></figure><h1 id="1447" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据处理</h1><p id="e098" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">需要记住的是，在所有搜索到的列表上建模价格没有多大意义。这些上市公司中的许多可能定价很低或不活跃，在它们的基础上训练一个模型不一定会建议最佳价格。因此，定义什么是“好”列表并过滤掉次优列表是数据清理过程的第一步。要跟踪的一个关键要素是占用率，这不是数据集中包含的要素。</p><h2 id="103f" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated"><strong class="ak">三藩市模式</strong></h2><p id="0656" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">旧金山模型是InsideAirBnB的入住模型，旨在估计AirBnB房源出租的频率。简而言之，它执行以下操作:</p><ul class=""><li id="76b3" class="ne nf it lb b lc ld lf lg li nu lm nv lq nw lu nj nk nl nm bi translated">通过假设50%的审核率来估计预订数量</li><li id="baa9" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">定义每个城市的平均停留时间(大多数城市为3天)</li><li id="8fdc" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">将<em class="nx">的预计预订量</em>和<em class="nx">的平均入住时间</em>相乘，得出入住率</li></ul><p id="9478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以点击阅读更多关于这种入住模式的信息<a class="ae ky" href="http://insideairbnb.com/about.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="d4c3" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">那么，我们如何识别活跃的、可销售的房源呢？</h2><ul class=""><li id="100c" class="ne nf it lb b lc mn lf mo li ng lm nh lq ni lu nj nk nl nm bi translated">在过去6个月中，已对列表进行了审核</li><li id="5116" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">列表在过去12个月中有超过5条评论</li><li id="069a" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">每月预定天数估计超过7天</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/f5fc4e827178bf3ad77f63798ca6f298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBqYt66cLxuKwffwwvAOHw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加工后分配</p></figure><h2 id="d57c" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">价格分布</h2><p id="fba4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">看一下我们的目标变量price的分布，发现76.69%的列表价格低于150美元。这确实在后来发挥了作用，因为我发现使用150美元的阈值并创建两个模型，一个用于高于该阈值的列表，另一个用于低于该阈值的列表，提高了模型性能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/91f18c504b6245c35b8f8eded66387e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEnU_XYvuZ6L1yBFbLp3sg.png"/></div></div></figure><h2 id="5448" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">搬运便利设施</h2><p id="e000" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">房源提供的便利设施的数量肯定会影响价格。InsideAirBnB的数据集有一个便利设施功能，它列出了一个列表提供的所有便利设施，但这种格式的便利设施对回归建模没有用处。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/7dd4dd66666e1700d46cf471b3d47f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-tHVXrKWPOz1HyXT_onUqw.png"/></div></div></figure><p id="7281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我解析了每个列表的便利设施字符串，并为每个可能的便利设施创建了一个新的特性列，用一个布尔值来表示一个列表是否提供该便利设施。这样做的一个问题是，它大大增加了数据集的维度，但我们可以通过查看p值和使用lasso正则化来消除信息量较少的便利条件。</p><h2 id="5cf4" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">热门旅游景点</h2><p id="180c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">另一个起作用的因素是靠近旅游景点。虽然东京有一个优秀的公共交通系统，但我想探索一下，到某些旅游景点的距离是否会影响列表的定价。我选择的5个旅游景点是:</p><ol class=""><li id="b2f3" class="ne nf it lb b lc ld lf lg li nu lm nv lq nw lu ns nk nl nm bi translated">东京皇宫</li><li id="8a7e" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">银座购物区</li><li id="037f" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">浅草寺</li><li id="e36e" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">上野公园</li><li id="e7e4" class="ne nf it lb b lc nn lf no li np lm nq lq nr lu ns nk nl nm bi translated">东京晴空塔</li></ol><p id="870d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实上，绘制预处理后数据集中剩余的最理想列表的位置显示，这些列表中的大多数都相对靠近这些旅游地点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/00580116129bd876c7a3fa566da2a4d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IcaGm3YoqZwOiCHn0Hlxbw.png"/></div></div></figure><h1 id="e5dd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">建模和评估</h1><h2 id="dad1" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">线性回归</h2><p id="5817" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在建模阶段，由于OLS中的高p值或多重共线性，许多不相关的要素被丢弃。为了让主持人容易理解推动价格预测的因素，我选择了线性回归模型，以便于解释。平均绝对误差(MAE)约为18美元。我还使用了岭和套索回归来防止过度拟合，但是这两种方法对最终的MAE分数都没有明显的影响。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/8957ce841a0a64513be56a2c662c9e41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lVNsD_Z4ELWD3TYfyOsFFA.png"/></div></div></figure><p id="78b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们看看对模型预测有影响的可操作特征。正如你在下面看到的，成为一个超级主持人，为顾客提供餐具和银器，对提高一个列表的可销售性以及抬高价格有很大的帮助。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/68e69e0691b369322e928d9786aa2bf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mbOo0trjFnCz2pVjLk7jmg.png"/></div></div></figure><h2 id="53f8" class="ms lw it bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">XGBoost</h2><p id="95cf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">除了线性回归，我还使用了XGBoost，因为它能够为数据找到更非线性的拟合。正如预期的那样，XGBoost的表现优于线性回归，平均绝对误差约为<strong class="lb iu"> $14.23。虽然XGBoost优于线性回归，但它的可解释性较差。可以使用SHAP等算法来增加XGBoost模型的可解释性，但从主持人的角度来看，理解线性回归权重仍然比理解SHAP图更容易。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/234665b14589b8ec49794bda94d52e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfpVPCWgUz_BucMrfTMbVw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SHAP力图(单次观测)</p></figure><h1 id="056d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">寻找相似的物品</h1><p id="b2a0" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我在这个项目中的最初目标之一是给用户一些类似的列表，以比较诸如便利设施、价格等。在项目的这一部分，我使用NearestNeighbors算法简单地在特征空间中查找最近的列表。由于原始数据集具有<em class="nx">列表url </em>特征，因此为最接近的列表索引数据集也为主机提供了列表url以转到这些列表的AirBnB页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/1bdc6a0c2533451a7deecca3debb529d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M89MUAFkLLfSM9rODb4lYw.png"/></div></div></figure><h1 id="05eb" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="c183" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总的来说，这个项目是探索东京热门AirBnB房源特征的一个有趣的练习。不过要注意的是，在考虑价格时，肯定还有其他因素要考虑，如季节性、需求和一周中的某一天。虽然我使用的数据集没有很好的方法来纳入这些因素，但改进这个项目的下一步将是使用时间序列模型来解决季节性问题，并找出一种对需求建模的方法。</p><p id="9dcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">感谢您的阅读！</strong></p><p id="6847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目存储库可以在这里找到<a class="ae ky" href="https://github.com/AbishekGollapudi/DataProjects/tree/master/AirBnB%20Pricing" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>