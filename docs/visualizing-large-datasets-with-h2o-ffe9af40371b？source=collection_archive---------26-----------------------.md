# ä½¿ç”¨ H2O å¯è§†åŒ–å¤§å‹æ•°æ®é›†

> åŸæ–‡ï¼š<https://towardsdatascience.com/visualizing-large-datasets-with-h2o-ffe9af40371b?source=collection_archive---------26----------------------->

## äº†è§£å¦‚ä½•ä½¿ç”¨ H2O èšåˆå™¨å‡½æ•°æœ‰æ•ˆåœ°å‡å°‘æ•°æ®é‡ã€‚

![](img/2d7aaf2351a2453e5290289d19d5e8cb.png)

æ¢…å°”Â·æ™®å°”åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

æ¢ç´¢æ€§æ•°æ®åˆ†ææ˜¯ä»»ä½•æ•°æ®å¤„ç†ç®¡é“çš„åŸºæœ¬éƒ¨åˆ†ä¹‹ä¸€ã€‚ç„¶è€Œï¼Œå½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œè¿™äº›å¯è§†åŒ–å°±å˜å¾—æ¨¡ç³Šäº†ã€‚å¦‚æœæˆ‘ä»¬è¦ç»˜åˆ¶æ•°ç™¾ä¸‡ä¸ªæ•°æ®ç‚¹ï¼Œå°±ä¸å¯èƒ½åŒºåˆ†å„ä¸ªæ•°æ®ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯è§†åŒ–çš„è¾“å‡ºçœ‹èµ·æ¥å¾ˆèˆ’æœï¼Œä½†æ˜¯å¯¹åˆ†æäººå‘˜æ¥è¯´æ²¡æœ‰ç»Ÿè®¡ä¸Šçš„å¥½å¤„ã€‚ç ”ç©¶äººå‘˜è®¾è®¡äº†å‡ ç§æ–¹æ³•æ¥é©¯æœæµ·é‡æ•°æ®é›†ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¿›è¡Œåˆ†æã€‚è¿™ç¯‡çŸ­æ–‡å°†ç€çœ¼äº **H2O å›¾ä¹¦é¦†**å¦‚ä½•èšé›†å¤§è§„æ¨¡æ•°æ®é›†ï¼Œç„¶åå¯ä»¥è½»æ¾åœ°å¯è§†åŒ–ã€‚

# ç›®æ ‡

[**H2O**](https://www.h2o.ai/products/h2o/) æ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„ã€åˆ†å¸ƒå¼å†…å­˜æœºå™¨å­¦ä¹ å¹³å°ï¼Œå…·æœ‰çº¿æ€§å¯æ‰©å±•æ€§ã€‚é€šè¿‡ä½¿ç”¨ Python å’Œ R ç¤¾åŒºï¼ŒH2O æ”¯æŒå¤§å¤šæ•°é¢†å…ˆçš„å’Œå¹¿æ³›ä½¿ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå…¬å¼€å¯ç”¨çš„ [**èˆªç©ºå…¬å¸æ•°æ®é›†**](https://s3.amazonaws.com/h2o-public-test-data/bigdata/laptop/airlines_all.05p.csv) æ¥è¯æ˜æˆ‘ä»¬çš„è§‚ç‚¹ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«è¶…è¿‡ 500 ä¸‡æ¡è®°å½•çš„åºå¤§æ•°æ®é›†ï¼Œéå¸¸é€‚åˆè¿™ç§æƒ…å†µã€‚

# å…ˆå†³æ¡ä»¶

åœ¨ç»§ç»­æ“ä½œä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿä¸Šå®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„ H2Oã€‚æˆ‘ä»¬å°†ä½¿ç”¨ H2O 3.32â€”â€”H2O çš„[æœ€æ–°ç‰ˆæœ¬](https://www.h2o.ai/blog/h2o-release-3-32-zermelo/)ä»¥[æ©æ–¯ç‰¹Â·ç­–æ¢…æ´›](https://en.wikipedia.org/wiki/Ernst_Zermelo)å‘½åã€‚å…³äºå®‰è£…åº“çš„è¯¦ç»†è¯´æ˜å¯ä»¥åœ¨æ–‡æ¡£çš„ [**ä¸‹è½½&å®‰è£…**](http://docs.h2o.ai/h2o/latest-stable/h2o-docs/downloading.html#downloading-installing-h2o) éƒ¨åˆ†æ‰¾åˆ°ã€‚

# å¯è§†åŒ–å¤§æ•°æ®

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ H2O æ¥å¯è§†åŒ–ä¸€ä¸ªå¤§å‹æ•°æ®é›†ã€‚

## 1ï¸âƒ£.åˆå§‹åŒ– H2O é›†ç¾¤

H2O æœ‰ä¸€ä¸ª R å’Œ Python æ¥å£ä»¥åŠä¸€ä¸ªåä¸º Flow çš„ web GUIã€‚ç„¶è€Œï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ H2O çš„ Python æ¥å£ã€‚æ¯ä¸ªæ–°ä¼šè¯éƒ½ä»åˆå§‹åŒ– python å®¢æˆ·ç«¯å’Œ H2O é›†ç¾¤ä¹‹é—´çš„è¿æ¥å¼€å§‹ã€‚

> ä¸€ä¸ª[é›†ç¾¤](http://docs.h2o.ai/h2o/latest-stable/h2o-docs/glossary.html)æ˜¯ä¸€ç»„ååŒå·¥ä½œçš„ H2O èŠ‚ç‚¹ï¼›å½“ä½œä¸šæäº¤åˆ°é›†ç¾¤æ—¶ï¼Œé›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤„ç†ä½œä¸šçš„ä¸€éƒ¨åˆ†ã€‚

è¦æ£€æŸ¥æ˜¯å¦ä¸€åˆ‡å°±ç»ªï¼Œè¯·æ‰“å¼€ Jupyter ç¬”è®°æœ¬ï¼Œé”®å…¥ä»¥ä¸‹å†…å®¹:

```
% matplotlib inline
import matplotlib.pyplot as plt
plt.style.use('fivethirtyeight')import h2o
h2o.init()
```

è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°çš„ H2O é›†ç¾¤ã€‚åœ¨æ‰§è¡Œå•å…ƒæ—¶ï¼Œä¸€äº›ä¿¡æ¯å°†ä»¥è¡¨æ ¼å½¢å¼æ‰“å°åœ¨å±å¹•ä¸Šï¼Œæ˜¾ç¤ºèŠ‚ç‚¹æ•°é‡ã€æ€»å†…å­˜ã€Python ç‰ˆæœ¬ç­‰ã€‚

![](img/fea6c12cc6dc51b86932bb8188a2ff82.png)

ç”¨æˆ·è¿è¡Œ H2O . init()(Python ä¸­)| Image

## 2ï¸âƒ£.ç¬¬ä¸€æ¬¡çœ‹æ•°æ®ğŸ‘€

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¯¼å…¥èˆªç©ºå…¬å¸æ•°æ®é›†å¹¶è¿›è¡Œå¿«é€Ÿæµè§ˆã€‚

```
path = "https://s3.amazonaws.com/h2o-public-test-data/bigdata/laptop/airlines_all.05p.csv" airlines = h2o.import_file(path=path)
```

*   è®©æˆ‘ä»¬æ£€æŸ¥æ•°æ®é›†çš„å‰åè¡Œã€‚

```
airlines.head()
```

![](img/6252ccc9760a98f03ec4f5f09e6ff304.png)

æŒ‰ä½œè€…æ’åˆ—çš„æ•°æ®å¸§|å›¾åƒçš„å‰åè¡Œ

æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„å«åš H2O æ¡†æ¶ã€‚ç±»ä¼¼äº`Pandasâ€™ dataframe` æˆ–è€…`Râ€™s data.frame`ã€‚ä¸€ä¸ªå…³é”®çš„åŒºåˆ«æ˜¯
æ•°æ®é€šå¸¸ä¸ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ç›¸åï¼Œå®ƒä½äºä¸€ä¸ª(å¯èƒ½æ˜¯è¿œç¨‹çš„)H2O é›†ç¾¤ä¸Šï¼Œå› æ­¤ H2OFrame ä»…ä»…ä»£è¡¨è¯¥æ•°æ®çš„ä¸€ä¸ªå¥æŸ„ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„`.describe()`å‘½ä»¤æŸ¥çœ‹æ•°æ®é›†çš„å¿«é€Ÿç»Ÿè®¡æ‘˜è¦

```
airlines.describe
```

![](img/b47af2c88b38dbcfed5382bf24c0174f.png)

æŒ‰ä½œè€…ç»Ÿè®¡çš„æ•°æ®å¸§|å›¾åƒæ‘˜è¦

## 3ï¸âƒ£.å¯è§†åŒ–æ•°æ®

æ•°æ®é›†å¤§çº¦æœ‰ 500 ä¸‡è¡Œå’Œ 31 åˆ—ã€‚ç°åœ¨è®©æˆ‘ä»¬å¿«é€Ÿç»˜åˆ¶ä¸€ä¸ª`Year`åˆ—çš„ç›´æ–¹å›¾ï¼Œçœ‹çœ‹æ•°æ®ä¸­æ˜¯å¦æœ‰æŸç§æ¨¡å¼ã€‚

```
%matplotlib inline
airlines["Year"].hist()
```

![](img/4e00e1b48a542d39c19da1788bd589c2.png)

èˆªç­é¢‘ç‡|ä½œè€…å›¾ç‰‡

æœ‰è¶£çš„æ˜¯ï¼Œç›´æ–¹å›¾æ˜¾ç¤ºæˆ‘ä»¬æ²¡æœ‰æŸäº›å¹´ä»½çš„æ•°æ®ã€‚è¿™å°±æ˜¯ EDA å¸¦ç»™åˆ†æçš„åŠ›é‡ã€‚å®ƒæœ‰åŠ©äºå¿«é€ŸæŸ¥æ˜æ•°æ®é›†ä¸­çš„å¼‚å¸¸ï¼Œå¦‚ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ç­‰ã€‚

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ç”»å‡º`Departure`å’Œ`Arrival time`çš„å¯¹æ¯”å›¾ï¼Œçœ‹çœ‹ä¸¤è€…ä¹‹é—´æ˜¯å¦æœ‰å…³ç³»ã€‚è¿™æ¬¡æˆ‘ä»¬å°†ç»˜åˆ¶ä¸€ä¸ª**æ•£ç‚¹å›¾**ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å„ä¸ªç‚¹ã€‚

```
# Convert H2O Frame into Pandas dataframe for plotting with matplotlibairlines_pd = airlines.as_data_frame(use_pandas = True)plt.scatter(airlines_pd.DepTime, airlines_pd.ArrTime)
plt.xlabel("Departure Time")
plt.ylabel("Arrival Time") 
```

![](img/c8615b5ac2dbee99d115c76ae230453d.png)

`Scatterplot of Departure`å¯¹`Arrival time | Image by Author`

å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ç¡®å®å¾—åˆ°äº†ä¸€ä¸ªæ•£ç‚¹å›¾ï¼Œä½†æ˜¯å¾ˆéš¾è¾¨åˆ«å‡ºå„ä¸ªç‚¹ã€‚å¤§é‡çš„é‡å ç‚¹ä½¿å¾—å¾ˆéš¾çœ‹å‡ºæ•°æ®ä¸­çš„æ€»ä½“è¶‹åŠ¿ã€‚

# H2O 3 å·çš„èšåˆå™¨æ•‘æ´æ–¹æ³•

ä»…ä»…æŸ¥çœ‹æ•´ä¸ªæ•°æ®æ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ç ”ç©¶ä¸€éƒ¨åˆ†æ•°æ®ï¼Œåªè¦å®ƒåæ˜ äº†æ•´ä¸ªæ•°æ®é›†çš„å±æ€§ã€‚è¿™å°±æ˜¯ [**H2O-3 çš„èšåˆå™¨**](http://docs.h2o.ai/h2o/latest-stable/h2o-docs/data-science/aggregator.html) æ–¹æ³•çš„ç”¨æ­¦ä¹‹åœ°ã€‚H2O èšåˆå™¨æ–¹æ³•æ˜¯ä¸€ç§åŸºäºèšç±»çš„æ–¹æ³•ï¼Œç”¨äºå°†æ•°å€¼/åˆ†ç±»æ•°æ®é›†ç¼©å‡ä¸ºè¡Œæ•°è¾ƒå°‘çš„æ•°æ®é›†ã€‚

> â€œèšåˆå™¨æ–¹æ³•çš„è¡Œä¸ºå°±åƒä»»ä½•å…¶ä»–æ— ç›‘ç£æ¨¡å‹ä¸€æ ·ã€‚æ‚¨å¯ä»¥å¿½ç•¥åˆ—ï¼Œè¿™äº›åˆ—å°†åœ¨è·ç¦»è®¡ç®—æ—¶è¢«åˆ é™¤ã€‚

èšåˆçš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ–°çš„èšåˆæ¡†æ¶ï¼Œå¯ä»¥åœ¨ R å’Œ Python ä¸­è®¿é—®ã€‚

## ä¸ºä»€ä¹ˆä¸èƒ½ç”¨éšæœºæŠ½æ ·æ¥ä»£æ›¿ï¼Ÿ

è¿™ç§æ–¹æ³•ä¼˜äºéšæœºæŠ½æ ·ï¼Œå› ä¸ºèšåˆå™¨å°†ä¿æŒæ•°æ®çš„å½¢çŠ¶ã€‚éšæœºæŠ½æ ·ç»å¸¸ä¼šå¯¼è‡´å¼‚å¸¸å€¼è¢«æ„å¤–åˆ é™¤ã€‚

## ä½¿ç”¨ H2O-3 çš„èšåˆå™¨å‡å°‘æ•°æ®é‡

ç°åœ¨è®©æˆ‘ä»¬å°†æ•°æ®çš„å¤§å°å‡å°‘åˆ° 1000 ä¸ªæ•°æ®ç‚¹ã€‚æˆ‘ä»¬å°†é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ…å«å¤§çº¦ 1000 æ¡è®°å½•çš„èšåˆæ¡†æ¶ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªèšåˆæ¡†æ¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®æ¡†æ¶ã€‚

```
from h2o.estimators.aggregator import H2OAggregatorEstimator# Build an aggregated frame with around 1000 records
agg_frame = H2OAggregatorEstimator(target_num_exemplars = 1000)
agg_frame.train(training_frame=airlines)# Use the aggregated model to create a new dataframe using aggregated_frame
small_airlines_data = agg_frame.aggregated_frame
```

è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ–°æ•°æ®å¸§çš„å°ºå¯¸

```
small_airlines_data.dim[979, 32]
```

äº‹å®ä¸Šï¼Œæˆ‘ä»¬ç°åœ¨æœ‰å¤§çº¦ 1000 ä¸ªæ•°æ®ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæœ‰ä¸€ä¸ªé¢å¤–çš„åˆ—ã€‚å¦‚æœæ‚¨æ³¨æ„åˆ°ï¼Œåˆ—æ•°å¢åŠ äº†ä¸€ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æ–°æ•°æ®å¸§çš„æ‰€æœ‰åˆ—ã€‚

```
small_airlines.head()
```

![](img/b00a0560c2276c393edbda7a54710b8b.png)

ä½œè€…æ–°åˆ›å»ºçš„èšåˆæ•°æ®å¸§|å›¾åƒ

å¦‚ä¸Šæ‰€è¿°ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„**è®¡æ•°**åˆ—ã€‚[èšåˆå™¨å°†å¼‚å¸¸å€¼ä¿æŒä¸ºå¼‚å¸¸å€¼ï¼Œä½†æ˜¯å°†å¯†é›†çš„èšç±»èšé›†åˆ°æ ·æœ¬ä¸­ï¼Œå¹¶é™„å¸¦æ˜¾ç¤ºæˆå‘˜ç‚¹çš„è®¡æ•°åˆ—ã€‚](http://docs.h2o.ai/h2o/latest-stable/h2o-docs/data-science/aggregator.html)

## å¯è§†åŒ–ç®€åŒ–çš„æ•°æ®å¸§

ç°åœ¨è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹æ–°çš„æ•°æ®å¸§ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸ä¸Šé¢ç›¸åŒçš„æ•£ç‚¹å›¾æ¥æ¯”è¾ƒä¸¤è€…ã€‚

```
small_airlines_pd = small_airlines.as_data_frame(use_pandas = True)
plt.scatter(small_airlines_pd.DepTime, small_airlines_pd.ArrTime)
plt.xlabel("DepTime")
plt.ylabel("ArrTime") 
```

![](img/4da49121e5313bfdd2e01e1416590c86.png)

`Scatterplot of Departure`å¯¹`Arrival time â€” Reduced dataframe| Image by Author`

æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œè¿™ä¸€æ­¥èŠ±è´¹çš„æ—¶é—´è¦å°‘å¾—å¤šï¼Œè€Œä¸”è¾“å‡ºçš„æ•°æ®ç‚¹æ¸…æ™°æ˜“è¾¨ã€‚

## æ­£åœ¨å…³é—­é›†ç¾¤

å®Œæˆå®éªŒåï¼Œè®°å¾—ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å…³é—­é›†ç¾¤ã€‚

```
h2o.cluster().shutdown()
```

# ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†ä¸€ç§ä½¿ç”¨ H2O èšåˆå™¨æ–¹æ³•å°†æ•°å€¼/åˆ†ç±»æ•°æ®é›†ç¼©å‡ä¸ºè¡Œæ•°æ›´å°‘çš„æ•°æ®é›†çš„æ–¹æ³•ã€‚åœ¨å¦‚ä¸Šæ‰€è¿°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯è§†åŒ–å¤§æ•°æ®é›†ï¼Œè¿™ç§ç”¨é€”æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚å¦‚æœä½ æœ‰å…´è¶£æ·±å…¥æŒ–æ˜ï¼Œè®ºæ–‡â€” [**å¨å°”é‡‘æ£®ï¼Œåˆ©å…°ã€‚â€œå¯è§†åŒ–ç¦»ç¾¤å€¼ã€‚â€(2016)**](https://www.cs.uic.edu/~wilkinson/Publications/outliers.pdf)â€”â€”ä¸€å®šä¼šå¼•èµ·ä½ çš„å…´è¶£ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„æ£€æµ‹å¤šç»´å¼‚å¸¸å€¼çš„ç®—æ³•ï¼Œå°†å¸®åŠ©æ‚¨ç†è§£èšåˆå™¨æ–¹æ³•çš„åŠŸèƒ½ã€‚

# æ‰¿è®¤

æ„Ÿè°¢ H2O.ai çš„é«˜çº§å®¢æˆ·æ•°æ®ç§‘å­¦å®¶ [Megan Kurka](https://www.linkedin.com/in/megan-kurka-36336569/) ï¼Œä¸ºæœ¬æ–‡ç¼–å†™ä»£ç ã€‚ä»£ç å·²ç»ä¸ H2O 3 åº“çš„å…¶ä»–å®ç°ä¸€èµ·å…¬å¼€å‘å¸ƒã€‚