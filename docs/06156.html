<html>
<head>
<title>Linkedin Network Visualisation using Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Plotly 实现 Linkedin 网络可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/linkedin-network-visualisation-using-plotly-9e1962247859?source=collection_archive---------60-----------------------#2020-05-18">https://towardsdatascience.com/linkedin-network-visualisation-using-plotly-9e1962247859?source=collection_archive---------60-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0fa6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们想象一下我们的 Linkedin 联系，了解一下树形图。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/68aa7afa7cade2fce0207c92f5bb0060.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNbWx9rW4K-bbrmcTQDRNg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用 Canva 设计。</p></figure><p id="4f93" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">多年来，Linkedin 一直是建立人际网络和高端求职的首选平台。人们通过在这个平台上建立联系来获得他们梦想的工作和实习机会。我们大多数人在 Linkedin 上都有很多人脉。让我们试着想象这些联系。</p><p id="0b86" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还认为 Linkedin 连接可视化是说明树形图用法的最佳案例。我们将使用 Pandas 库进行数据提取，使用 Plotly 库进行数据可视化。我发现 Plotly 是 Python 中最有用和最具交互性的绘图库之一。此外，Plotly 与 Dash Framework(用于构建网络应用)的集成能力使其更加独特。我们甚至可以在网上分享情节。</p><blockquote class="lu lv lw"><p id="3b38" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated"><strong class="la iu">注意:本文中的树状图是交互式的。请查看 GIPHY 以了解交互性。</strong></p></blockquote><h1 id="c195" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">导入数据</strong></h1><p id="63d1" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">Linkedin 连接数据的提取有两种方式。一个是 Linkedin API，它需要多个权限来访问数据，并且它的使用并不简单。另一种是直接下载。Linkedin 设置页面中的 csv 文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/a8866c130b4508b1940f455c399ab65b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0t5huCo0J0uTiVPGUO2TKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">转到设置/隐私</p></figure><p id="8e7e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们先来导入熊猫和 Plotly 库。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="c76e" class="ne mc it na b gy nf ng l nh ni">import pandas as pd<br/>import plotly.express as px<br/>import plotly.graph_objects as go</span></pre><p id="9b83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们阅读从 LinkedIn 下载的连接文件，并尝试理解它的结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/de594b51bab0f5f9ce2da378aa5b5046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7oRM_343iC-NnM5xlfHuA.jpeg"/></div></div></figure><p id="a7f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如上图所示，每一行都列出了名字、姓氏、电子邮件地址、公司、职位和入职日期。您还可以注意到总共有 335 行，这表明我有 335 个连接。可以注意到的一个异常是连接在列上的<strong class="la iu">的类型是一个对象，而不是类型日期。数据的排列方式也是最近的连接放在最前面，依此类推。</strong></p><p id="a1cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们试着画一个曲线图来说明连接数的增长。时间。但是我们需要将数据框按日期升序排序，并绘制一个线图。</p><p id="d433" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们将连接在列上的<strong class="la iu">转换为日期类型，并通过按日期排序数据框来绘制一个线图。</strong></p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6379" class="ne mc it na b gy nf ng l nh ni">import datetime</span><span id="d16d" class="ne mc it na b gy nk ng l nh ni">def convert(date):<br/>return datetime.datetime.strptime(date, "%d %b %Y").strftime("%Y-%m-%d")</span><span id="5f7f" class="ne mc it na b gy nk ng l nh ni">df["Connected On"] = df["Connected On"].apply(convert)</span></pre><p id="a0df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">apply 函数对列上连接的<strong class="la iu">中的每个日期值应用函数<strong class="la iu"> convert </strong>。</strong></p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="390c" class="ne mc it na b gy nf ng l nh ni">df=df.sort_values(by="Connected On")</span></pre><p id="b31a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们使用 Plotly 库绘制线图。</p><p id="e4fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">注意——在绘制图之前，需要对数据框进行一些修改。一定要检查我的 GitHub 代码。本文末尾给出了链接。</strong></p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="d8bd" class="ne mc it na b gy nf ng l nh ni">connections_line = px.line(df, x="Connected On", y="number", title='My Connections')</span><span id="8083" class="ne mc it na b gy nk ng l nh ni">connections_line.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/9bafee03892957cc32a7c8ffa80584e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7oqCxFCTHSoBz5s1KNZ-kQ.png"/></div></div></figure><p id="75bb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我提到的，Plotly 以其交互特性而闻名，我们可以在上面的图中看到，当我们悬停在线上时，可以看到当天的确切日期和连接数。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h1 id="35f4" class="mb mc it bd md me nt mg mh mi nu mk ml jz nv ka mn kc nw kd mp kf nx kg mr ms bi translated">公司和职位分析</h1><p id="f665" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在，我们将从两个方面分析我们的联系。一个是描绘按公司分离的联系细节的公司方面的分析，另一个是描绘按职位分离的联系细节的职位方面的分析。</p><p id="d2c5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们绘制直方图来说明我们的关系在公司和职位方面的分布。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="7b4f" class="ne mc it na b gy nf ng l nh ni"># Company wise histogram<br/>fig = go.Figure()<br/>fig.add_trace(go.Histogram(histfunc="count",  x=df["Company"]))<br/>fig.show()</span><span id="d0d3" class="ne mc it na b gy nk ng l nh ni"># Position wise histogram<br/>fig = go.Figure()<br/>fig.add_trace(go.Histogram(histfunc="count",  x=df["Position"]))<br/>fig.show()</span></pre><p id="34a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe ny nz oa na b">histfunc</code>参数将聚合函数作为参数。这里我们将<code class="fe ny nz oa na b">count</code>作为参数来计算 wrt 的行数。每个公司(确定每个独特价值的频率)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/accf2dc812f2aeb95a78727e736a18ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6R3xjSfBdJ_HHsh6MW1AyQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/1351adc959c6d953f7208d75b62496a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gMrzjeeNhnNASZjQ2VfXvA.png"/></div></div></figure><p id="de57" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当悬停在条形上时，我们可以注意到公司/职位名称及其相应的值被提及。</p><p id="b2af" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">直方图的一个缺点是，我们无法在一个图中获得公司和职位的完整信息。因此，树状图出现了。</p><h2 id="acf0" class="ne mc it bd md oc od dn mh oe of dp ml lh og oh mn ll oi oj mp lp ok ol mr om bi translated">什么是树形图？</h2><p id="88cd" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">树形图用于描述层次结构。树形图由矩形组成，矩形的大小和顺序由一个量化变量决定。</p><p id="8709" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个类别被分配一个矩形，该类别中的子类别被表示为嵌套的矩形。每个矩形的大小与数量成正比。数量越多，矩形越大。例如，在上面的直方图中，我们看到 Cotiviti 在公司直方图中占据第一位，而 Intern 在职位直方图中占据第一位。因此，我们可以预期这两个值在树形图中具有最大的矩形。这里有另一个例子来清楚地理解一个树形图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/83f286046143552b1b939d5d79f56770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*14EYe2p1gY3G8g4_zTZnFg.png"/></div></div></figure><p id="e080" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们根据公司和位置绘制一个树形图。由于 Plotly 是一个交互式库，我们也可以放大树状图的某些部分。</p><h2 id="b477" class="ne mc it bd md oc od dn mh oe of dp ml lh og oh mn ll oi oj mp lp ok ol mr om bi translated"><strong class="ak">公司树形图</strong></h2><p id="019e" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们将树层次传递给<code class="fe ny nz oa na b">px.treemap()</code>函数中的路径参数。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="64b1" class="ne mc it na b gy nf ng l nh ni">company_tree_map = px.treemap(df, path=['My Network', 'Company', 'Position'], width=1000, height=1000)</span><span id="5d7f" class="ne mc it na b gy nk ng l nh ni">company_tree_map.show()</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="07ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以注意到公司<strong class="la iu"> Cotiviti </strong>在树形图中占据了最大的面积(Cotiviti 在直方图中也有最高的值！).Plotly 中的 TreeMaps 的特点是，我们可以放大到某个子树，以便清楚地看到子矩形。在这个树形图中，子矩形是每个公司中的各种角色(仅在我的连接中)。我们还可以注意到，每当我们悬停时，我们可以看到两个属性。<br/> 1。<code class="fe ny nz oa na b">Parent</code> —表示相应矩形<br/> 2 的父矩形。<code class="fe ny nz oa na b">Id</code>——表示该矩形的层次结构。</p><h2 id="16d5" class="ne mc it bd md oc od dn mh oe of dp ml lh og oh mn ll oi oj mp lp ok ol mr om bi translated">位置树形图</h2><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="6b5e" class="ne mc it na b gy nf ng l nh ni">position_tree_map = px.treemap(df, path=['My Network', 'Position', 'Company'], width=1000, height=1000)</span><span id="6e5d" class="ne mc it na b gy nk ng l nh ni">position_tree_map.show()</span></pre><p id="77d7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以注意到<strong class="la iu">实习生</strong>的位置在树形图中占据了最大的面积(实习生在直方图中也有最高的值！).这里的子矩形代表与每个职位相对应的各个公司。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oq op l"/></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="e2d1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完整的代码可以在 Github <a class="ae or" href="https://github.com/kurasaiteja/LinkedIn-Visualisaion-using-Plotly" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="1e7c" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">结论</h1><p id="fbe6" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我使用 Plotly 库可视化了 Linkedin 网络，也觉得这是说明树形图用法的最佳用例。我希望你今天带回家一些概念。请随时分享反馈。呆在家里，注意安全！</p></div></div>    
</body>
</html>