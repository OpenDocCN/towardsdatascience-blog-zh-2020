<html>
<head>
<title>The 6 Steps of a SQL Select Statement Process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL Select 语句过程的 6 个步骤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-6-steps-of-a-sql-select-statement-process-b3696a49a642?source=collection_archive---------5-----------------------#2020-06-18">https://towardsdatascience.com/the-6-steps-of-a-sql-select-statement-process-b3696a49a642?source=collection_archive---------5-----------------------#2020-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7905" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用简单示例详细解释查询执行顺序<strong class="ak"/></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e62dd3c484b0fe4a449221edcdaec1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M9MCStk-8UDUji2XJgQlkA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://pixabay.com/service/terms/#license" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>授权</p></figure><h1 id="6d23" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="ded3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在本文中，我将一步一步地描述对关系数据库执行查询的逻辑过程。为此，我将使用两个简单的非标准化表格:<em class="mk">公民</em>和<em class="mk">城市。</em>它们描述如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/49f68a44ab345cc6238d51e92eeee23f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*2cZBqcbucfJzw_ZcYuksxA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">表格描述</p></figure><p id="f599" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated"><em class="mk">市民</em>表<em class="mk"> </em>包含杰出市民的数据和他们居住的城市的识别号，<em class="mk">城市</em>是包含城市名称和他们各自的识别号的表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/9594419a78ef354f086db413dca0f012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*hvzKUe8RnLOHKt2Tu6mlnA.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据</p></figure><p id="e174" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">假设我们只想知道两个城市的名称，除了圣布鲁诺，那里有两个或更多的居民。我们也希望结果按字母顺序排序。</p><p id="cb2a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">这是获取所需信息的查询。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="c83e" class="mx kx iq mt b gy my mz l na nb">SELECT city.city_name AS "City"<br/>FROM citizen<br/>JOIN city <br/>ON citizen.city_id = city.city_id <br/>WHERE city.city_name != 'San Bruno'<br/>GROUP BY city.city_name<br/>HAVING COUNT(*) &gt;= 2<br/>ORDER BY city.city_name ASC<br/>LIMIT 2</span></pre><h1 id="2c34" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">查询流程步骤</h1><p id="8561" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">1.获取数据(<em class="mk">从，加入</em> ) <br/> 2。行过滤器(<em class="mk"> Where </em> ) <br/> 3。分组(<em class="mk">分组由</em> ) <br/> 4。组过滤器(<em class="mk">有</em> ) <br/> 5。返回表达式(<em class="mk">选择</em> ) <br/> 6。指令&amp;分页(<em class="mk">指令由&amp;限制/偏移</em>)</p><h2 id="0d0c" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated"><strong class="ak">第一步:获取数据(<em class="nn"> From，Join </em> ) </strong></h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="091d" class="mx kx iq mt b gy my mz l na nb">FROM citizen<br/>JOIN city </span></pre><p id="742a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">该过程的第一步是执行来自子句的<em class="mk">中的语句，随后是<em class="mk"> Join </em>子句。这些操作的结果是得到两个表的笛卡尔乘积。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/76f64085e8fd4e8df3f30987e4cee9a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*wzmDktCA-5bnd7mouSSiCA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">笛卡尔乘积</p></figure><p id="611d" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">一旦来自的<em class="mk">和<em class="mk">连接</em>被执行，处理器将根据条件<em class="mk">得到符合条件的行。</em></em></p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e5b9" class="mx kx iq mt b gy my mz l na nb">ON citizen.city_id = city.city_id</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/e1fe916be394db04a7eec3ec8c1f7da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*hU2TFah3N2E8sNQjDg69PQ.jpeg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">合格的行</p></figure><h2 id="7b60" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated"><strong class="ak">第二步:行过滤器(Where) </strong></h2><p id="12d2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在获得合格的行之后，它被传递给<em class="mk"> Where </em>子句。这使用条件表达式评估每一行。当行的计算结果不为 true 时，它们将从集合中移除。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ff17" class="mx kx iq mt b gy my mz l na nb">WHERE city.city_name != 'San Bruno'</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/5e7d3672364ccce334331d6c7ea77de3.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*c8_cOotuVtiY7Yn7VBdwvg.png"/></div></figure><h2 id="ed3a" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated"><strong class="ak">第三步:分组(分组依据)</strong></h2><p id="f68a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下一步是执行<em class="mk"> Group by </em>子句<em class="mk">，</em>它会将具有相同值的行分组到汇总行中。此后，所有的<em class="mk">选择</em>表达式将按组计算，而不是按行计算。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="15e6" class="mx kx iq mt b gy my mz l na nb">GROUP BY city.city_name</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/8deb9183e878e2d1f84ecff6556429fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*CPBcJE-Bdu98wH23s7izwg.png"/></div></figure><h2 id="4b18" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated"><strong class="ak">第四步:分组过滤(Having) </strong></h2><p id="065b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Having 子句的<em class="mk">由一个逻辑谓词组成，它由</em>在<em class="mk">组之后处理，并且它不再引用单个行，只能引用行组。</em></p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="63ac" class="mx kx iq mt b gy my mz l na nb">HAVING COUNT(*) &gt;= 2</span></pre><p id="6391" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">执行该操作的结果将保持如上图所示的设置。这是因为每个组中都有两个或更多的元素。</p><h2 id="96af" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">第 5 步:返回表达式(选择)</h2><p id="a0d3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在这个步骤中，处理器评估查询结果将被打印的内容，以及是否有一些函数要在数据上运行，如<em class="mk"> Distinct </em>、<em class="mk"> Max </em>、<em class="mk"> Sqrt </em>、<em class="mk"> Date、Lower、</em>等。在这种情况下，select 子句只打印城市名称，并用标识符“city”作为 city_name 列的别名。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="b286" class="mx kx iq mt b gy my mz l na nb">SELECT city.city_name AS "City"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/e66a7cfa3f38cf78088314871cbd6f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:280/format:webp/1*q6bnaQojv60vpsY-Wvo8ag.png"/></div></figure><h2 id="5ac1" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">步骤 6:排序(Order by)和分页(Limit / Offset)</h2><p id="c1d9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">查询的最后处理步骤处理显示顺序和限制结果集大小的能力。在我们的例子中，要求最多显示两个按字母顺序排序的记录。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="fc2a" class="mx kx iq mt b gy my mz l na nb">ORDER BY city.city_name ASC<br/>LIMIT 2</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/8e947226a8a60600508b493dc2df218d.png" data-original-src="https://miro.medium.com/v2/resize:fit:274/format:webp/1*moyQ7l6HKo9DtJSWMjhpAw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">结果集</p></figure><h2 id="a21f" class="mx kx iq bd ky nc nd dn lc ne nf dp lg lx ng nh li mb ni nj lk mf nk nl lm nm bi translated">结论</h2><p id="b92b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">更好地理解事物是如何工作的，就能获得更好的结果。对如何执行一个<em class="mk"> Select </em>语句有了基本的理解，就更容易得到预期的结果集。</p><p id="c72a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx mo lz ma mb mp md me mf mq mh mi mj ij bi translated">希望这篇文章对你也有帮助。</p></div></div>    
</body>
</html>