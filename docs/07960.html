<html>
<head>
<title>Determine a Safe Withdrawal Rate for your Investment Portfolio with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python为您的投资组合确定安全的提款率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/determine-a-safe-withdrawal-rate-for-your-investment-portfolio-with-python-cf2df9185f73?source=collection_archive---------54-----------------------#2020-06-12">https://towardsdatascience.com/determine-a-safe-withdrawal-rate-for-your-investment-portfolio-with-python-cf2df9185f73?source=collection_archive---------54-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e328" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在钱不用完的情况下能取多少？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d538f1f790ae83ec63a56974c356a446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AVvtL1osOFk7ISrF"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">蒂埃拉·马洛卡在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c00a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1999年，一项<a class="ae kv" href="https://www.researchgate.net/publication/228707593_Sustainable_withdrawal_rates_from_your_retirement_portfolio" rel="noopener ugc nofollow" target="_blank">研究</a>发表，详细说明了一系列名义和通胀调整提款率对投资组合的影响，最长支付期为30年。在金融、投资咨询和退休规划领域，这项研究被非正式地称为<strong class="ky ir">三位一体研究</strong>。</p><p id="e1aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该研究表明，至少75%股票的投资组合提供了4%至5%的通胀调整后提款。换句话说，如果你有一个100万美元的投资组合，你可以每年提取40，000至50，000美元(经通胀调整)，至少在未来30年内没有资金耗尽的风险。</p><p id="2455" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在阅读了这项研究后，我受到启发，扩展了本文的工作。因此，我编写了一个python脚本，遵循本研究中描述的方法来确定任何投资组合的可持续提款率(假设有足够的历史数据)。</p><p id="2449" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章由以下部分组成，首先，我将解释数据和方法。其次，我将详细阐述Python实现并解释如何使用它。最后，给出了一个关于确定安全撤出率的结论。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="7ea6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">数据和方法</h1><p id="631e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了确定一个可持续的退出率，该研究使用了一个比率，称为投资组合成功率。该比率用于比较具有不同提款率和支付期的所有投资组合。投资组合成功率被定义为投资组合成功的次数除以模拟的次数。如果投资组合在支付期结束时的期末值大于或等于零，则该投资组合被视为成功。</p><p id="55bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">研究中使用的数据是标准普尔500指数的总月回报率和所罗门兄弟长期高等级公司债券指数。总月回报是给定期间投资的实际回报，包括利息、资本收益、股息和分配。</p><p id="f9c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这些历史月总回报，通过使用不同支付期的重叠年方法来进行模拟。下图详细说明了这种方法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/aa20d1ce13d3b2bd555b88c694b28549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N91RFOWOyT4ODoNAj_XlAQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">此图中的三个点(<strong class="bd mx"> … </strong>)指的是两年和/或模拟之间的年份和/或模拟。</p></figure><p id="61a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了确定投资组合的成功率，需要计算月末投资组合的价值。该研究区分了具有名义提款率的投资组合和经通胀调整后提款的投资组合。这些月末投资组合价值确定如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/7b103f683503a3f5fb93a0a079b47d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dPudg5NFQm-l7E_qqMSFEA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">通货膨胀调整是根据消费者价格指数(CPI)确定的。</p></figure><p id="6216" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在继续python实现之前，我还想进一步阐述两个项目。这些是投资组合回报(<em class="mz"> Rₜ </em>)和每月提取金额(<em class="mz"> Wₜ </em>)的确定。请参考下图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/89b6472ae2209d6a6412d801e14f3007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ihC3kPp7vNumCCT2jZdSg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">投资组合回报的计算隐含地假设<strong class="bd mx">每月对投资组合进行再平衡</strong>以达到期望的投资组合权重。请注意，研究或实施中未考虑交易佣金和费用。</p></figure><p id="0b69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，由于数据限制，python实现的范围仅限于确定<strong class="ky ir">名义提款率</strong>。此外，我只能找到历史月回报，而不是总月回报。因此，不考虑股息或其他分配，这可能会影响投资组合的实际成功率。不过，我相信这个影响不会很大。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="21ac" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">Python实现</h1><p id="7e1b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，我用于这个实现的库是<a class="ae kv" href="https://github.com/ranaroussi/yfinance" rel="noopener ugc nofollow" target="_blank"> yfinance </a>和<a class="ae kv" href="https://plotly.com/python/getting-started/" rel="noopener ugc nofollow" target="_blank"> plotly </a>。要使用这个python实现，您需要安装这些库。您可以使用<code class="fe nb nc nd ne b">pip</code>来安装这些库。</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="a4cf" class="nj ma iq ne b gy nk nl l nm nn">pip install yfinance --upgrade --no-cache-dir<br/>pip install plotly</span></pre><p id="ac30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在安装了必要的库之后，我们可以将注意力转向python实现。考虑到不同的投资组合构成、支付周期和提款率的数量，我发现创建一个名为<code class="fe nb nc nd ne b">sustainable_withdrawal_rate</code>的python类是合适的。</p><p id="ab34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在加载这个类之前，如果你在<a class="ae kv" href="https://finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank"> Yahoo Finance </a>上查找你选择的符号会有所帮助，因为你将需要它作为python类的输入。例如，我想确定包含英国、德国和法国指数的投资组合的(名义)可持续提款率。雅虎财经上这些指数的符号是:</p><ul class=""><li id="53a0" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">英国富时指数:^FTSE</li><li id="4cf1" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">德国DAX指数:^GDAXI</li><li id="ffb5" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">法国CAC 40指数:^FCHI</li></ul><p id="1ed4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">加载python类后，需要实例化它。对于实例化，需要符号作为输入。以下是使用上述符号的示例:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="4828" class="nj ma iq ne b gy nk nl l nm nn">symbols = "^FTSE ^GDAXI ^FCHI"<br/>port = sustainable_withdrawal_rate(symbols)</span></pre><p id="dce5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">观察到以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c0ad9de9474d85f6c7ad4473c81af905.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*4r6BMky87WktI_lVu95CUw.png"/></div></figure><p id="06e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出表明所有三个指数的历史(月度)数据范围从1991年到2020年，这是可用于分析的30年历史数据。这是有用的，因为它表明，对于这种投资组合，没有足够的历史数据来确定30年支付期的可持续提款率。</p><p id="5da3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基于该投资组合的历史数据量(30年)，我们可以使用10年的支付期。如果您想要确定给定投资组合组合和10年支付期的成功率，您可以使用以下代码:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="47bf" class="nj ma iq ne b gy nk nl l nm nn">portfolio_composition = {"^FTSE":0.4, "^GDAXI":0.4, "^FCHI":0.3}<br/>payout_period = 10<br/>port.portfolio_success_rate(payout_period, portfolio_composition)</span></pre><p id="55d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码显示，该投资组合的权重包括40%的富时指数、40%的DAX指数和30%的CAC 40指数。运行此代码会产生以下输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ffa69d92b158f00f545e08e55b0dd721.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*ZpxuwuBXXf0VUfzA5DDPNw.png"/></div></figure><p id="72eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">输出是一个表格，其中包含不同的年度提款率及其相应的成功率。换句话说，由40%的富时、40%的DAX和30%的CAC 40组成的投资组合可以在10年的支付期内维持高达7%的年提款率而不会被耗尽。</p><p id="d6d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想调整投资组合的组成和/或支付期，看看这些变化如何影响成功率。通过调整<code class="fe nb nc nd ne b">portfolio_composition</code>和/或<code class="fe nb nc nd ne b">payout_period</code>，并运行代码<code class="fe nb nc nd ne b">port.portfolio_success_rate(payout_period, portfolio_composition)</code>，你可以很容易地做到这一点。</p><p id="c8b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，您还可以绘制特定年提款率的投资组合模拟图。让我们根据上面描述的投资组合构成和支付期，模拟8%的年提款率。您可以使用以下代码来绘制模拟:</p><pre class="kg kh ki kj gt nf ne ng nh aw ni bi"><span id="3311" class="nj ma iq ne b gy nk nl l nm nn">annual_withdrawal = 0.08<br/>port.plotsimulations(annual_withdrawal)</span></pre><p id="fd37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行此代码应该会在您的webbrowser中产生以下图形:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/13817c0238ffa9add234766213463c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*afpwpcSZizH4hbB-5DrUHA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">该研究和实施的基本假设是，本金在支付期间也被消耗。因此，提款率越低，在支付期后剩余大量资金的可能性就越大。</p></figure><p id="de3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该图显示了年提款率为8%，支付期为10年(120个月)的不同投资组合模拟。投资组合模拟是根据方法一节中讨论的重叠年方法确定的。此外，该图显示了初始投资组合价值1，以及对于不同的模拟，月末投资组合价值如何在整个月份中变化。</p><p id="053b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">图中的绿线是被认为是成功的投资组合模拟，因为期末值大于零。相反，图中的红线是失败的投资组合模拟，因为它们的期末价值是负的。</p><p id="4f0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想绘制不同年提款率的投资组合模拟图，只需调整<code class="fe nb nc nd ne b">annual_withdrawal</code>并运行代码<code class="fe nb nc nd ne b">port.plotsimulations(annual_withdrawal)</code>。</p><p id="a2a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">python类<code class="fe nb nc nd ne b">sustainable_withdrawal_rate</code>的完整代码如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">三位一体研究的Python实现</p></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5426" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="4987" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在本文中，我扩展了三一研究的工作，假设有足够的数据，任何投资组合的(名义)可持续提款率都可以确定。</p><p id="e873" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过使用python类<code class="fe nb nc nd ne b">sustainable_withdrawal_rate</code>，您可以为您的投资组合确定一个可持续的提款率。选择一个可持续的退出率是主观的，不存在全局最优的退出率。</p><p id="e271" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可持续的提款率取决于许多个人偏好，如当前消费、可变金融需求以及个人是否希望将初始退休投资组合的大部分留给其继承人。因此，这一分析的结果应被视为一种输入，以确定您的可持续戒断率。</p><p id="42ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这项研究中没有考虑的一个重要因素是个体的预期寿命。对于那些感兴趣的人，我写了一篇文章详细说明了预期寿命对提前退休人数的影响，这里是<a class="ae kv" href="https://medium.com/makingofamillionaire/a-critical-look-at-the-multiply-by-25-rule-to-early-retirement-8535ef48cba1" rel="noopener">链接</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="16d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="mz">来自《走向数据科学》编辑的提示:</em> </strong> <em class="mz">虽然我们允许独立作者根据我们的</em> <a class="ae kv" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="mz">规则和指南</em> </a> <em class="mz">发表文章，但我们并不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae kv" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="mz">读者术语</em> </a> <em class="mz">。</em></p><h1 id="ebd7" class="lz ma iq bd mb mc oh me mf mg oi mi mj jw oj jx ml jz ok ka mn kc ol kd mp mq bi translated">参考</h1><p id="963f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">[1] Phillip L. Cooley、Carl M. Hubbard和Daniel T. Walz,《投资组合的可持续提款率》( 1999年),《财务咨询和规划》第10卷第1期。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="bc2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文表达的金融观点来自作者的个人研究和经验。本文仅供参考。不应将其视为财务或法律建议。</p></div></div>    
</body>
</html>