<html>
<head>
<title>Elasticsearch for Data Science just got way easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学的弹性研究变得更加容易</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/elasticsearch-for-data-science-just-got-way-easier-95912d724636?source=collection_archive---------18-----------------------#2020-07-13">https://towardsdatascience.com/elasticsearch-for-data-science-just-got-way-easier-95912d724636?source=collection_archive---------18-----------------------#2020-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2bb0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">弹性搜索功能与熊猫的便利</h2><div class=""/><div class=""><h2 id="17de" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated"><em class="kr"> Eland </em>是一个全新的 python 包，它在 Elasticsearch 和数据科学生态系统之间架起了一座桥梁。</h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/36d0127c356ac4dc0910a3729842535b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2h5rYBcZ7B_oNXn8PKJ_ug.jpeg"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://unsplash.com/@ztpphotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">扎克里·佩里</a>在<a class="ae li" href="https://unsplash.com/s/photos/moose?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3426" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><a class="ae li" href="https://www.elastic.co/elastic-stack" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>是一个功能丰富的开源<strong class="ll jd">搜索引擎</strong>构建在<strong class="ll jd"> Apache Lucene 之上，</strong>Apache Lucene 是市场上最重要的全文搜索引擎之一。</p><p id="9e30" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">Elasticsearch 最为人所知的是它提供的丰富多样的 REST API 体验，包括用于全文搜索、排序和聚合任务的高效包装器，这使得在现有后端中实现这些功能变得更加容易，而无需复杂的重新设计。</p><p id="a8b0" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">自从 2010 年推出以来，Elasticsearch 在软件工程领域获得了很大的吸引力，到 2016 年，根据 DBMS 知识库 DB-engines ，它成为最受欢迎的企业搜索引擎软件栈<a class="ae li" href="https://db-engines.com/en/blog_post/55" rel="noopener ugc nofollow" target="_blank">，超过了行业标准<strong class="ll jd"> Apache Solr </strong>(也是基于 Lucene 构建的)。</a></p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/7aeae87ca5f6186c405c954de0990dee.png" data-original-src="https://miro.medium.com/v2/format:webp/1*q_PLLBkqLV2DFhkBNfeF1g.png"/></div><p class="le lf gj gh gi lg lh bd b be z dk translated">自 2010 年发布以来，弹性搜索的谷歌趋势数据</p></figure><p id="d402" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">Elasticsearch 如此受欢迎的原因之一是它所积累的生态系统。世界各地的工程师开发了开源的 Elasticsearch 集成和扩展，其中许多项目被 Elastic(Elastic search 项目背后的公司)吸收为其堆栈的一部分。</p><p id="694a" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">其中一些项目是<strong class="ll jd"> Logstash </strong>(数据处理管道，通常用于解析基于文本的文件)和<strong class="ll jd"> Kibana </strong>(构建在 Elasticsearch 之上的可视化层)，导致了现在广泛采用的 ELK (Elasticsearch，Logstash，Kibana)堆栈。</p><p id="9f3d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">ELK stack 很快获得了恶名，因为它在新兴和巩固的技术领域中有一系列令人印象深刻的可能应用，如<em class="mg"> DevOps、站点可靠性工程、</em>以及最近的<em class="mg">数据分析。</em></p><h2 id="ca6d" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">但是数据科学呢？</h2><p id="793a" class="pw-post-body-paragraph lj lk it ll b lm mz kd lo lp na kg lr ls nb lu lv lw nc ly lz ma nd mc md me im bi translated">如果你是一名数据科学家，正在阅读这篇文章，并且拥有 Elasticsearch 作为你雇主的技术堆栈的一部分，你可能会在尝试使用 Elasticsearch 为数据分析甚至简单的机器学习任务提供的所有功能时遇到一些问题。</p><p id="a6ca" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">数据科学家通常不习惯将 NoSQL 数据库引擎用于日常任务，甚至不习惯依赖复杂的 REST APIs 进行分析。例如，使用 Elasticsearch 的低级 python 客户端处理大量数据也不是那么直观，对于来自与 SWE 不同领域的人来说，学习曲线有些陡峭。</p><p id="d317" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">尽管 Elastic 在增强 ELK 堆栈以用于分析和数据科学用例方面做出了巨大努力，但它仍然缺乏与现有数据科学生态系统(pandas、NumPy、scikit-learn、PyTorch 和其他流行库)的简单接口。</p><p id="caf7" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">2017 年，Elastic 向数据科学领域迈出了第一步，作为对软件行业日益流行的<em class="mg">机器学习</em>和预测技术的回答，它为 ELK stack 发布了第一个<a class="ae li" href="https://www.elastic.co/blog/introducing-machine-learning-for-the-elastic-stack" rel="noopener ugc nofollow" target="_blank"> ML 功能的 X-pack </a>(扩展包)，在其功能中添加了<em class="mg">异常检测</em>和其他无人监管的 ML 任务。之后没多久，<a class="ae li" href="https://www.elastic.co/guide/en/machine-learning/current/ml-dfanalytics.html" rel="noopener ugc nofollow" target="_blank">回归和分类模型</a><strong class="ll jd">(</strong><a class="ae li" href="#fn1" rel="noopener ugc nofollow"><strong class="ll jd">1</strong></a><strong class="ll jd">)</strong>也被加入到麋鹿栈可用的 ML 任务集合中。</p><p id="e7c5" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上周，Elasticsearch 在数据科学行业获得广泛采用的另一个步骤是发布了<a class="ae li" href="https://eland.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Eland </a>，这是一个全新的 Python Elasticsearch 客户端和工具包，具有强大的(和熟悉的)类似熊猫的 API，用于分析、ETL 和机器学习。</p><h2 id="f8ee" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">Eland:弹性和数据</h2><p id="8b3a" class="pw-post-body-paragraph lj lk it ll b lm mz kd lo lp na kg lr ls nb lu lv lw nc ly lz ma nd mc md me im bi translated">Eland 使数据科学家能够有效地使用已经很强大的 Elasticsearch 分析和 ML 功能，而不需要深入了解 Elasticsearch 及其许多复杂性。</p><p id="640d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">Elasticsearch 的功能和概念被转化成一个更容易识别的环境。例如，一个包含文档、映射和字段的 Elasticsearch 索引变成了一个包含行和列的数据框架，就像我们在使用 pandas 时看到的那样。</p><pre class="kt ku kv kw gt ne nf ng nh aw ni bi"><span id="64ba" class="mh mi it nf b gy nj nk l nl nm"># Importing Eland and low-level Elasticsearch clients for comparison<br/>import eland as ed<br/>from eland.conftest import *<br/>from elasticsearch import Elasticsearch<br/>from elasticsearch_dsl import Search, Q<br/><br/># Import pandas and numpy for data wrangling<br/>import pandas as pd<br/>import numpy as np<br/><br/># For pretty-printing<br/>import json</span></pre><p id="3d2c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">典型的数据科学用例，例如将整个弹性搜索索引读入 pandas 数据框架进行探索性数据分析或训练 ML 模型，通常需要一些效率不高的快捷方式。</p><pre class="kt ku kv kw gt ne nf ng nh aw ni bi"><span id="1fc6" class="mh mi it nf b gy nj nk l nl nm"># name of the index we want to query<br/>index_name = 'kibana_sample_data_ecommerce' <br/><br/># instantiating client connect to localhost by default<br/>es = Elasticsearch()<br/><br/># defining the search statement to get all records in an index<br/>search = Search(using=es, index=index_name).query("match_all") <br/><br/># retrieving the documents from the search<br/>documents = [hit.to_dict() for hit in search.scan()] <br/><br/># converting the list of hit dictionaries into a pandas dataframe:<br/>df_ecommerce = pd.DataFrame.from_records(documents)</span><span id="0059" class="mh mi it nf b gy nn nk l nl nm"># visualizing the dataframe with the results:<br/>df_ecommerce.head()['geoip']</span><span id="7b76" class="mh mi it nf b gy nn nk l nl nm">0    {'country_iso_code': 'EG', 'location': {'lon':...<br/>1    {'country_iso_code': 'AE', 'location': {'lon':...<br/>2    {'country_iso_code': 'US', 'location': {'lon':...<br/>3    {'country_iso_code': 'GB', 'location': {'lon':...<br/>4    {'country_iso_code': 'EG', 'location': {'lon':...<br/>Name: geoip, dtype: object</span><span id="7b7d" class="mh mi it nf b gy nn nk l nl nm"># retrieving a summary of the columns in the dataset:<br/>df_ecommerce.info()</span><span id="e133" class="mh mi it nf b gy nn nk l nl nm">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 4675 entries, 0 to 4674<br/>Data columns (total 23 columns):<br/> #   Column                 Non-Null Count  Dtype  <br/>---  ------                 --------------  -----  <br/> 0   category               4675 non-null   object <br/> 1   currency               4675 non-null   object <br/> 2   customer_first_name    4675 non-null   object <br/> 3   customer_full_name     4675 non-null   object <br/> 4   customer_gender        4675 non-null   object <br/> 5   customer_id            4675 non-null   int64  <br/> 6   customer_last_name     4675 non-null   object <br/> 7   customer_phone         4675 non-null   object <br/> 8   day_of_week            4675 non-null   object <br/> 9   day_of_week_i          4675 non-null   int64  <br/> 10  email                  4675 non-null   object <br/> 11  manufacturer           4675 non-null   object <br/> 12  order_date             4675 non-null   object <br/> 13  order_id               4675 non-null   int64  <br/> 14  products               4675 non-null   object <br/> 15  sku                    4675 non-null   object <br/> 16  taxful_total_price     4675 non-null   float64<br/> 17  taxless_total_price    4675 non-null   float64<br/> 18  total_quantity         4675 non-null   int64  <br/> 19  total_unique_products  4675 non-null   int64  <br/> 20  type                   4675 non-null   object <br/> 21  user                   4675 non-null   object <br/> 22  geoip                  4675 non-null   object <br/>dtypes: float64(2), int64(5), object(16)<br/>memory usage: 840.2+ KB</span><span id="b3ac" class="mh mi it nf b gy nn nk l nl nm"># getting descriptive statistics from the dataframe<br/>df_ecommerce.describe()</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/e4d46aea20ca847a65f62d57c3cd44df.png" data-original-src="https://miro.medium.com/v2/format:webp/1*sEfUAKPQHf5jt7avHN47KA.png"/></div></figure><p id="3e3d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上面描述的过程将引导我们以字典列表的形式获取索引中的所有文档，然后将它们加载到 pandas 数据框架中。这意味着在进程中的某个时刻，在内存中同时拥有文档本身和结果数据帧<strong class="ll jd">(</strong><a class="ae li" href="#fn2" rel="noopener ugc nofollow"><strong class="ll jd">2</strong></a><strong class="ll jd">)</strong>。对于大数据应用程序来说，这一过程并不总是可行的，在 Jupyter 笔记本环境中探索数据集可能会变得非常复杂和快速。</p><blockquote class="no"><p id="8fc7" class="np nq it bd nr ns nt nu nv nw nx me dk translated">Eland 使我们能够执行与上面描述的操作非常相似的操作，而没有任何涉及使它们适应 Elasticsearch 上下文的摩擦，同时仍然使用 elastic search 聚合速度和搜索功能。</p></blockquote><pre class="ny nz oa ob oc ne nf ng nh aw ni bi"><span id="f725" class="mh mi it nf b gy nj nk l nl nm"># loading the data from the Sample Ecommerce data from Kibana into Eland dataframe:<br/>ed_ecommerce = ed.read_es('localhost', index_name)</span><span id="7c01" class="mh mi it nf b gy nn nk l nl nm"># visualizing the results:<br/>ed_ecommerce.head()</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/0f7c6858421628bdc3470076be01f0d5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*H6kJnbduaUeve36DuWxGMA.png"/></div></figure><p id="b823" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">作为一个额外的特性，pandas 方面需要更多的争论，字段<code class="fe od oe of nf b">geoip</code>(它是索引中的一个嵌套 JSON 对象)被无缝地解析成我们的数据帧中的列。我们可以通过调用 Eland dataframe 上的<code class="fe od oe of nf b">.info()</code>方法看到这一点。</p><pre class="kt ku kv kw gt ne nf ng nh aw ni bi"><span id="931c" class="mh mi it nf b gy nj nk l nl nm"># retrieving a summary of the columns in the dataframe:<br/>ed_ecommerce.info()</span><span id="cc94" class="mh mi it nf b gy nn nk l nl nm">&lt;class 'eland.dataframe.DataFrame'&gt;<br/>Index: 4675 entries, jyzpQ3MBG9Z35ZT1wBWt to 0SzpQ3MBG9Z35ZT1yyej<br/>Data columns (total 45 columns):<br/> #   Column                         Non-Null Count  Dtype         <br/>---  ------                         --------------  -----         <br/> 0   category                       4675 non-null   object        <br/> 1   currency                       4675 non-null   object        <br/> 2   customer_birth_date            0 non-null      datetime64[ns]<br/> 3   customer_first_name            4675 non-null   object        <br/> 4   customer_full_name             4675 non-null   object        <br/> 5   customer_gender                4675 non-null   object        <br/> 6   customer_id                    4675 non-null   object        <br/> 7   customer_last_name             4675 non-null   object        <br/> 8   customer_phone                 4675 non-null   object        <br/> 9   day_of_week                    4675 non-null   object        <br/> 10  day_of_week_i                  4675 non-null   int64         <br/> 11  email                          4675 non-null   object        <br/> 12  geoip.city_name                4094 non-null   object        <br/> 13  geoip.continent_name           4675 non-null   object        <br/> 14  geoip.country_iso_code         4675 non-null   object        <br/> 15  geoip.location                 4675 non-null   object        <br/> 16  geoip.region_name              3924 non-null   object        <br/> 17  manufacturer                   4675 non-null   object        <br/> 18  order_date                     4675 non-null   datetime64[ns]<br/> 19  order_id                       4675 non-null   object        <br/> 20  products._id                   4675 non-null   object        <br/> 21  products.base_price            4675 non-null   float64       <br/> 22  products.base_unit_price       4675 non-null   float64       <br/> 23  products.category              4675 non-null   object        <br/> 24  products.created_on            4675 non-null   datetime64[ns]<br/> 25  products.discount_amount       4675 non-null   float64       <br/> 26  products.discount_percentage   4675 non-null   float64       <br/> 27  products.manufacturer          4675 non-null   object        <br/> 28  products.min_price             4675 non-null   float64       <br/> 29  products.price                 4675 non-null   float64       <br/> 30  products.product_id            4675 non-null   int64         <br/> 31  products.product_name          4675 non-null   object        <br/> 32  products.quantity              4675 non-null   int64         <br/> 33  products.sku                   4675 non-null   object        <br/> 34  products.tax_amount            4675 non-null   float64       <br/> 35  products.taxful_price          4675 non-null   float64       <br/> 36  products.taxless_price         4675 non-null   float64       <br/> 37  products.unit_discount_amount  4675 non-null   float64       <br/> 38  sku                            4675 non-null   object        <br/> 39  taxful_total_price             4675 non-null   float64       <br/> 40  taxless_total_price            4675 non-null   float64       <br/> 41  total_quantity                 4675 non-null   int64         <br/> 42  total_unique_products          4675 non-null   int64         <br/> 43  type                           4675 non-null   object        <br/> 44  user                           4675 non-null   object        <br/>dtypes: datetime64[ns](3), float64(12), int64(5), object(25)<br/>memory usage: 96.0 bytes</span><span id="24da" class="mh mi it nf b gy nn nk l nl nm"># calculating descriptive statistics from the Eland dataframe:<br/>ed_ecommerce.describe()</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/fe9959983fec1d0f3ff40d26dd3221df.png" data-original-src="https://miro.medium.com/v2/format:webp/1*30t6qWsGBUgJL_7nwggctw.png"/></div></figure><p id="ce70" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们还可以注意到，内存使用从 pandas 数据帧中的大约 840 Kbs 变成了 Eland 数据帧中的仅 96 字节。我们不需要将整个数据集保存在内存中来从索引中检索我们需要的信息。大部分工作负载<a class="ae li" href="https://www.youtube.com/watch?v=U8fnkzp_sfo" rel="noopener ugc nofollow" target="_blank">留在弹性搜索集群</a><strong class="ll jd">(</strong><a class="ae li" href="#fn3" rel="noopener ugc nofollow"><strong class="ll jd">3</strong></a><strong class="ll jd">)</strong>中作为聚合或特定查询。</p><p id="b318" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">对于如此小的数据集，这并不重要。尽管如此，当我们扩展到千兆字节的数据时，不把所有东西都保存在内存中进行简单计算和分析的好处更加明显。</p><h2 id="d129" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">数据框架的弹性搜索功能</h2><p id="675f" class="pw-post-body-paragraph lj lk it ll b lm mz kd lo lp na kg lr ls nb lu lv lw nc ly lz ma nd mc md me im bi translated">Eland 抽象了 Elasticsearch 中许多已经存在的 API，数据科学家不需要学习 Elasticsearch 的特定语法。例如，可以获得索引的映射(相当于检索熊猫数据帧的<code class="fe od oe of nf b">dtypes</code>属性)。尽管如此，目前还不清楚该如何做。使用 Eland DataFrame 对象，我们可以像在常规 pandas DataFrame 上一样检索<code class="fe od oe of nf b">dtypes</code>属性。</p><pre class="kt ku kv kw gt ne nf ng nh aw ni bi"><span id="621e" class="mh mi it nf b gy nj nk l nl nm"># getting the dtypes from pandas dataframe:<br/>df_ecommerce.dtypes</span><span id="bda9" class="mh mi it nf b gy nn nk l nl nm">category                 object<br/>currency                 object<br/>customer_first_name      object<br/>customer_full_name       object<br/>customer_gender          object<br/>                          ...  <br/>total_quantity            int64<br/>total_unique_products     int64<br/>type                     object<br/>user                     object<br/>geoip                    object<br/>Length: 23, dtype: object</span><span id="7e9b" class="mh mi it nf b gy nn nk l nl nm"># retrieving the Data types for the index normally would require us to perform the following Elasticsearch query:<br/>mapping = es.indices.get_mapping(index_name) <br/><br/># which by itself is an abstraction of the GET request for mapping retrieval<br/>print(json.dumps(mapping, indent=2, sort_keys=True))</span><span id="810d" class="mh mi it nf b gy nn nk l nl nm">{<br/>  "kibana_sample_data_ecommerce": {<br/>    "mappings": {<br/>      "properties": {<br/>        "category": {<br/>          "fields": {<br/>            "keyword": {<br/>              "type": "keyword"<br/>            }<br/>          },<br/>          "type": "text"<br/>        },<br/>        "currency": {<br/>          "type": "keyword"<br/>        },<br/>        "customer_birth_date": {<br/>          "type": "date"<br/>        },<br/>        "customer_first_name": {<br/>          "fields": {<br/>            "keyword": {<br/>              "ignore_above": 256,<br/>              "type": "keyword"<br/>            }<br/>          },<br/>          "type": "text"<br/>        },<br/>        "customer_full_name": {<br/>          "fields": {<br/>            "keyword": {<br/>              "ignore_above": 256,<br/>              "type": "keyword"<br/>            }<br/>          },<br/>          "type": "text"<br/>        }<br/>...</span><span id="ea62" class="mh mi it nf b gy nn nk l nl nm"># Eland abstracts this procedure into the same pandas api:<br/>ed_ecommerce.dtypes</span><span id="1cd4" class="mh mi it nf b gy nn nk l nl nm">category                         object<br/>currency                         object<br/>customer_birth_date      datetime64[ns]<br/>customer_first_name              object<br/>customer_full_name               object<br/>                              ...      <br/>taxless_total_price             float64<br/>total_quantity                    int64<br/>total_unique_products             int64<br/>type                             object<br/>user                             object<br/>Length: 45, dtype: object</span></pre><p id="40cb" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">有了这些抽象，Eland 允许我们使用核心的 Elasticsearch 特性，这些特性不是 pandas 的一部分(或者至少不是那么高效)，比如全文搜索，Elasticsearch 最突出的用例。</p><pre class="kt ku kv kw gt ne nf ng nh aw ni bi"><span id="7254" class="mh mi it nf b gy nj nk l nl nm"># defining the full-text query we need: Retrieving records for either Elitelligence or Primemaster manufacturer<br/>query = {<br/>        "query_string" : {<br/>            "fields" : ["manufacturer"],<br/>            "query" : "Elitelligence OR Primemaster"<br/>        }<br/>    }</span><span id="7450" class="mh mi it nf b gy nn nk l nl nm"># using full-text search capabilities with Eland:<br/>text_search_df = ed_ecommerce.es_query(query)<br/><br/># visualizing price of products for each manufacturer using pandas column syntax:<br/>text_search_df[['manufacturer','products.price']]</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/b0c7d80d089212379b2139eb7c15b213.png" data-original-src="https://miro.medium.com/v2/format:webp/1*R1VjUeFL1Xllowjw5OgbIA.png"/></div></figure><h2 id="687c" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">更多集成的可能性</h2><p id="f649" class="pw-post-body-paragraph lj lk it ll b lm mz kd lo lp na kg lr ls nb lu lv lw nc ly lz ma nd mc md me im bi translated">本文只是触及了 Eland 为数据科学家和其他数据专业人员在日常操作中使用 Elasticsearch 所带来的可能性的表面。</p><p id="e8b9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">特别是在 DevOps 和 AIOps 环境中，基于 ML 的工具还不是很成熟，数据专业人员可以从 Python 现有的机器学习生态系统中受益，以分析大量的可观测性和度量数据，这将是另一篇文章的主题。</p><p id="395f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">Eland 无疑是向 Elasticsearch 迈出的一大步，我期待 ELK stack 的未来版本会带来什么。</p><h2 id="3d50" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">如果你喜欢这篇文章</h2><p id="0933" class="pw-post-body-paragraph lj lk it ll b lm mz kd lo lp na kg lr ls nb lu lv lw nc ly lz ma nd mc md me im bi translated">查看<a class="ae li" href="https://www.youtube.com/watch?time_continue=2470&amp;v=U8fnkzp_sfo&amp;feature=emb_title" rel="noopener ugc nofollow" target="_blank">本次网络研讨会</a>，其中<a class="ae li" href="https://github.com/sethmlarson" rel="noopener ugc nofollow" target="_blank">塞斯·迈克尔·拉森</a>(Eland 的主要贡献者之一)介绍了 Eland 的主要功能。</p><p id="0401" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果你想看到更多关于弹性搜索、数据科学、信息检索、可观察性背景下的 NLP 的内容，请随时在 LinkedIn 上<a class="ae li" href="https://www.linkedin.com/in/mateuspicanco/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll jd"> <em class="mg">与我联系</em> </strong> </a>和<a class="ae li" href="https://medium.com/@mateuspicanco" rel="noopener"> <strong class="ll jd"> <em class="mg">阅读我关于这些主题的其他文章</em> </strong> </a> <strong class="ll jd"> <em class="mg">。</em>T19】</strong></p><h2 id="b166" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">脚注:</h2><ol class=""><li id="7ed5" class="og oh it ll b lm mz lp na ls oi lw oj ma ok me ol om on oo bi translated">截至 ELK stack 7.8 版本，回归和分类机器学习作业仍处于试验阶段。</li><li id="4b86" class="og oh it ll b lm op lp oq ls or lw os ma ot me ol om on oo bi translated">对于这些任务，可以使用更熟悉的类似 SQL 的查询界面，比如 Elasticsearch 的 JDBC 驱动程序。然而，这仍然需要对弹性搜索概念(例如，索引模式和分页)有一定的了解。</li><li id="aa62" class="og oh it ll b lm op lp oq ls or lw os ma ot me ol om on oo bi translated">这类似于其他分布式计算模块，如 Dask。Eland 的 case 本质上在内部维护了一个查询构建器和任务图，只有在请求数据时才运行这些延迟的任务。</li></ol><h2 id="c8ce" class="mh mi it bd mj mk ml dn mm mn mo dp mp ls mq mr ms lw mt mu mv ma mw mx my iz bi translated">参考资料:</h2><ul class=""><li id="4b92" class="og oh it ll b lm mz lp na ls oi lw oj ma ok me ou om on oo bi translated">页（page 的缩写）Andlinger，<a class="ae li" href="https://db-engines.com/en/blog_post/55" rel="noopener ugc nofollow" target="_blank"> Elasticsearch 取代 Solr 成为最受欢迎的搜索引擎</a> <em class="mg"> </em> (2016)，DB-engines 上博文的<a class="ae li" href="https://db-engines.com/en/blog_post/55" rel="noopener ugc nofollow" target="_blank">URL</a>。</li><li id="f5f3" class="og oh it ll b lm op lp oq ls or lw os ma ot me ou om on oo bi translated">Elastic.co，【Eland 官方文档 (2020)，<a class="ae li" href="https://eland.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">网址为</a>。</li><li id="9c1d" class="og oh it ll b lm op lp oq ls or lw os ma ot me ou om on oo bi translated"><em class="mg"> Seth Michael Larson，</em><a class="ae li" href="https://www.youtube.com/watch?v=U8fnkzp_sfo" rel="noopener ugc nofollow" target="_blank">Eland 简介 Elasticsearch 支持的数据框架和机器学习</a> (2020)，网上研讨会的 URL。</li></ul></div></div>    
</body>
</html>