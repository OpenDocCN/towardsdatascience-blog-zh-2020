<html>
<head>
<title>Why are GPUs So Powerful?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么GPU这么强大？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-ai-illustrated-guide-why-are-gpus-so-powerful-99f4ae85a5c3?source=collection_archive---------41-----------------------#2020-05-26">https://towardsdatascience.com/the-ai-illustrated-guide-why-are-gpus-so-powerful-99f4ae85a5c3?source=collection_archive---------41-----------------------#2020-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6970" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/the-ai-illustrated-guide" rel="noopener" target="_blank">人工智能图解指南</a></h2><div class=""/><div class=""><h2 id="1ead" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">了解延迟与吞吐量之间的权衡，以及驱动现代GPU的架构变化</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/194e9f8e2c4c361689e9e6bdd887c912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nr_3kLjr79ikOR4d2exWvA.png"/></div></div></figure><p id="1a3c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在《人工智能图解指南》的这一期中，我概述了为什么GPU对人工智能来说如此之快，以及其速度背后的解释。核心思想是优化吞吐量而不是延迟。为了理解这个概念，我用离线和在线教学进行了类比，然后概述了CPU和GPU是如何设计来支持延迟或吞吐量的。</p><p id="f808" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最后，我将为您提供一个简单的过程来计算常见CPU和GPU的吞吐量和延迟，并简要概述如何在训练神经网络时利用这一巨大的吞吐量。</p><p id="4036" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">事不宜迟，我们来看一些插图:)</p><h1 id="ac69" class="lz ma it bd mb mc md me mf mg mh mi mj ki mk kj ml kl mm km mn ko mo kp mp mq bi translated">最快的学习方法是什么？</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mr"><img src="../Images/ef84898c91a9f61dff1c212c2708e8e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-vpckyBEbLPmOfllqbtKfg.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">哪种学习方法最好？</p></figure><p id="36a8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">聘请私人教师可以说是最快的学习方法，但也是最昂贵的。进入教室通常更便宜，同时仍然保留许多好处，例如可以直接提问。</p><p id="d940" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">然而，最实惠的选择是参加在线课程。这些缺乏教学的物理和个人方面，但所有内容都以视频格式提供给你，这允许你一遍又一遍地观看，直到你明白为止。然而，你被限制在拍摄的范围内。所有其他的，你必须自己搜索或在论坛上询问。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mw"><img src="../Images/d4a8b2fed328ce778546690a10790dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RPGa98gAyoUJMBJ5_Z-mug.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">每种选择的利弊</p></figure><p id="d944" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">尽管您可能有自己的偏好，但没有一个比其他的更好。<em class="mx">他们都工作，他们都满足特定的需求</em>。如果你很着急，请尽快聘请一位老师。如果你是为了好玩，网上课程可能就足够了。否则，选择传统的教室环境。</p><p id="05f6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最重要的是，<em class="mx">它们都可以一起使用</em>来达到最佳效果。假设你不擅长语言，但是你需要学习西班牙语来获得一份工作。你可以注册一门西班牙语课程进行全面学习，聘请一名私人教师来跟上技术术语的速度，并在Duolingo周围进行一些额外的练习。</p><p id="dd3d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这一切都归结于您的<em class="mx">用例场景</em>。</p><h2 id="bab3" class="my ma it bd mb mz na dn mf nb nc dp mj lm nd ne ml lq nf ng mn lu nh ni mp iz bi translated">延迟与吞吐量</h2><ul class=""><li id="9335" class="nj nk it lf b lg nl lj nm lm nn lq no lu np ly nq nr ns nt bi translated">等待时间:完成一个给定的任务需要多长时间</li><li id="acb6" class="nj nk it lf b lg nu lj nv lm nw lq nx lu ny ly nq nr ns nt bi translated"><strong class="lf jd">吞吐量:</strong>一段时间内你能完成多少次任务</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nz"><img src="../Images/6d01a26aa41dae4c81f2aec09f911a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h44IBBuBQhQybwUSuOsqag.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">一个老师可以教一个人，也可以向整个大陆广播。</p></figure><p id="34bb" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">私人教师可以在一个月左右让你达到基本的中文水平，而在线课程可能需要五个月。这就是<em class="mx">延迟</em>。</p><p id="5689" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在五个月内，私人教师只能教五个学生基础汉语，一个月一个。然而，在线课程可以在同一时期为数百万非中文使用者做同样的事情。这就是<em class="mx">吞吐量</em>。</p><p id="ce8f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">这是CPU和GPU的核心区别:</strong>CPU针对延迟进行了优化:以最快的速度完成一项任务；GPU针对吞吐量进行了优化:它们速度较慢，但可以同时处理大量数据。</p><p id="a3ed" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">另一个类比是乘公交车<em class="mx">和</em>开车。在跑车里，你可以开得更快，更早到达目的地。但是，该车只能乘坐2至5人左右。这辆公共汽车虽然速度较慢，但最多可以载80人。在一天中，小汽车可以往返两次，载大约10个人，而公共汽车只能往返一次，但要载80个人。</p><h1 id="f35e" class="lz ma it bd mb mc md me mf mg mh mi mj ki mk kj ml kl mm km mn ko mo kp mp mq bi translated">为什么这对AI很重要？</h1><p id="f265" class="pw-post-body-paragraph ld le it lf b lg nl kd li lj nm kg ll lm oa lo lp lq ob ls lt lu oc lw lx ly im bi translated">机器学习是人工智能的一个子领域，其基本原理是提出一种具有若干输入和输出的学习算法，并让该算法找出输入与输出之间的关系。</p><p id="e6bf" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">例如，我们可以获得以前在线课程的每个学生的大量数据，并根据这些数据尝试了解一个人是否会完成课程。以后，这可以用来指导一个为未来班级提供奖学金的系统，支持那些有可能完成学业的学生。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/040501079ebeaef2381c37902fed512a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jM-54pTE0A2TFFa7Jbs_3g.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">机器学习的基本思想</p></figure><p id="5cff" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">该算法必须看到每个配置文件(及其结果)才能学习。<em class="mx">算法每秒可以查看的档案越多，它学习的速度就越快。这就是GPU发挥作用的地方。CPU可以非常快地研究一个概要文件，但它每分钟只能做几百个。另一方面，GPU要慢得多，但一次可以评估几百个，每秒钟可以快速检查一千多个条目。这就是它训练更快的原因。</em></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/a6c8a31b9f970a7dde9ee9ded188bffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMAvsbR9z1VPXFJ0OcdT0A.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">使用GPU，我们可以一次提供几个训练实例</p></figure><p id="0249" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这也解释了<em class="mx">为什么GPU经过训练</em>后被认为是无效的。在现实世界中，这种算法可能每天只运行几次来处理收到的建议。因此，CPU可以更快地处理这种负载。<em class="mx">GPU只有在有大量数据要处理时才会表现出色。</em></p><h1 id="e7eb" class="lz ma it bd mb mc md me mf mg mh mi mj ki mk kj ml kl mm km mn ko mo kp mp mq bi translated">GPU是如何工作的？</h1><p id="4d47" class="pw-post-body-paragraph ld le it lf b lg nl kd li lj nm kg ll lm oa lo lp lq ob ls lt lu oc lw lx ly im bi translated">剩下要解释的一件事是，与CPU相比，GPU如何能够获得如此高的吞吐量。答案在于它的<em class="mx">架构</em>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/14bc1879ed72eb9e81f207d03188b97c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yr40gGk11nKHEguOtlOjjQ.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">每个现代处理器的底层架构</p></figure><p id="1038" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">大多数现代处理器都遵循“<a class="ae og" href="https://en.wikipedia.org/wiki/Von_Neumann_architecture" rel="noopener ugc nofollow" target="_blank">冯·诺依曼架构</a>”其基本原理是将处理器分成三个相互连接的部分:</p><ul class=""><li id="750b" class="nj nk it lf b lg lh lj lk lm oh lq oi lu oj ly nq nr ns nt bi translated"><strong class="lf jd">控制单元</strong>，完成大部分工作，如决定下一步做什么操作，从内存中取出下一条指令等。</li><li id="accc" class="nj nk it lf b lg nu lj nv lm nw lq nx lu ny ly nq nr ns nt bi translated"><strong class="lf jd">算术/逻辑单元(ALU) </strong>，实现加、减、乘等运算。</li><li id="4ae2" class="nj nk it lf b lg nu lj nv lm nw lq nx lu ny ly nq nr ns nt bi translated"><strong class="lf jd">存储单元</strong>，存储芯片处理的数据，如输入、输出和任何中间数据。</li></ul><p id="321f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">当前的CPU将这一概念发展为“多核”架构，在这种架构中，一个处理器有更小的“子处理器”，称为核心，负责实际工作。更大的处理器反过来使它们保持同步，管理共享内存，并处理与外界的通信。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ok"><img src="../Images/ffc3f7f9070041f786e74dac912e868a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWbmdRYRS9hqDIcSo0ADOg.png"/></div></div></figure><p id="68d8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">GPU背后的主要思想是控制单元大而昂贵，而算术单元则更简单、更便宜。因此，如果同一个控制单元可以命令几个alu，它就可以操作更大的数据块，但所有alu必须服从相同的命令。换句话说，他们必须做同样的事情。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/194e9f8e2c4c361689e9e6bdd887c912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nr_3kLjr79ikOR4d2exWvA.png"/></div></div></figure><p id="9901" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这张图展示了GPU如何用“控制”换取“运算能力”每个16个alu的块被限制为在16对操作数上处理相同的指令。它们不像CPU内核那样功能多样，但可以批量处理大量数据。</p><p id="08f2" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">此外，GPU并不是完全没有灵活性。还有中央控制单元，它同步所有的子处理器，每个子处理器可以执行不同的任务。不可能的是同一组alu并行做多件事。例如,“if”语句对于GPU来说成本很高。</p><p id="34b6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这张图还显示了一个显著的区别:<em class="mx">GPU是巨大的芯片</em>。几十年来，CPU都被限制在相同的外形规格上。最好的英特尔或AMD芯片和最差的一样大。GPU就不是这样了。低端GPU明显比高端GPU更小、更弱。理论上，我们可以通过加大图形处理器的尺寸来制造更快的图形处理器。</p><h1 id="5174" class="lz ma it bd mb mc md me mf mg mh mi mj ki mk kj ml kl mm km mn ko mo kp mp mq bi translated">计算延迟和吞吐量</h1><p id="bd60" class="pw-post-body-paragraph ld le it lf b lg nl kd li lj nm kg ll lm oa lo lp lq ob ls lt lu oc lw lx ly im bi translated">让我们做一个简单的比较:最好的消费级锐龙处理器与最好的英伟达游戏GPU相比表现如何？</p><p id="0aca" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">据我所知，最好的锐龙CPU是Threadripper 2990X，它支持32个内核，每个内核能够运行两个独立的线程，时钟频率为3 GHz，最高可达4.2 GHz。</p><p id="6b12" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">与此同时，英伟达RTX 2080 TI GPU拥有令人印象深刻的4352个alu和1.350 GHz的基础时钟，可以提升到1.545 GHz。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/25d15301edc4cfc4ffd2da9335646452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-zzJ2qXbV6uAKTMGGSsLOw.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">两位勇敢的芯片设计冠军</p></figure><p id="c189" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">为了比较这两款设备，我们使用了它们每秒可以处理的浮点运算的最大理论数量。此指标衡量设备的最大可能性能。</p><p id="777c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">对于CPU，我们将假设所有64个线程的完美使用，每个线程同时处理8个浮点值(使用AVX指令)，并且每个时钟周期以其最高的时钟速率处理两个指令。GPU也是如此。它有4352个内核，每个内核都能够进行一次浮点计算，以峰值时钟速率在每个时钟周期进行两次运算。</p><p id="cebf" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这就引出了下面的数学公式:时钟乘以效率乘以ALUs:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/889482869dcd153a2c12e00672132d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gXu3HfJ293vMxbNprUbVUQ.png"/></div></div></figure><p id="a37d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">因此，2080TI GPU理论上大约是锐龙CPU速度的三倍。然而，实际上，它要快得多。使用CPU达到峰值利用率是一场噩梦，而在GPU上，这相对更简单。</p><p id="be10" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">或者，每个器件的延迟主要由它的速度决定，也就是它的时钟频率。CPU的时钟频率为4.2 GHz，而GPU仅落后约1.5 GHz，几乎比<em class="mx">慢三倍</em>。</p><p id="ec75" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">所以，一个不比另一个好；它们<em class="mx">服务于不同的目的</em>。</p><h1 id="2f25" class="lz ma it bd mb mc md me mf mg mh mi mj ki mk kj ml kl mm km mn ko mo kp mp mq bi translated">在深度学习中使用</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/c47c6252d4f619b51ccfb584d3ce218b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DVHjmRLWFsqA9gqaYWcSig.png"/></div></div><p class="ms mt gj gh gi mu mv bd b be z dk translated">末端带有密集分类器的典型卷积神经网络</p></figure><p id="116a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">深度学习都是处理张量:<em class="mx">多维数组</em>。例如，256×256分辨率的一组8个RGB图像可以表示为8×256×256×3形状的张量。要应用64个大小为3x3的过滤器，我们需要计算大约905，969，664次浮点运算，而这只是我们网络的第一层。</p><p id="88af" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">难怪GPU擅长训练深度神经网络。它有大量的数据要处理，而且处理相当有规律。因此，它充分利用了巨大的运算能力，同时几乎不需要控制，这是GPU的薄弱环节。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="9754" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi ov translated">在本系列的下一期文章中，我计划概述ROC曲线和正则化的概念。到目前为止，这是该系列的第二篇文章，是第一篇关于<a class="ae og" rel="noopener" target="_blank" href="/the-illustrated-guide-to-classification-metrics-the-basics-cf3c2e9b89b2?source=your_stories_page---------------------------">分类指标</a>的文章，即准确性、敏感性、特异性、精确度和召回率。如果你喜欢这个系列，并希望看到一个特定的主题，请在评论中告诉我。</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="321c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果您对本文有任何问题，请随时发表评论或与我联系。如果你刚接触媒体，我强烈推荐<a class="ae og" href="https://ygorserpa.medium.com/membership" rel="noopener">订阅</a>。对于数据和IT专业人士来说，中型文章是<a class="ae og" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>的完美搭档，对于新手来说更是如此。注册时请考虑使用<a class="ae og" href="https://ygorserpa.medium.com/membership" rel="noopener">我的会员链接。</a></p><p id="5308" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">感谢阅读:)</p></div></div>    
</body>
</html>