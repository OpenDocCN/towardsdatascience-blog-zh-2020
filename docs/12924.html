<html>
<head>
<title>Tell me a joke— How to add Small Talk support to your Power Virtual Agents Chatbot.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给我讲个笑话——如何给你的 Power 虚拟代理聊天机器人添加闲聊支持。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tell-me-a-joke-how-to-add-small-talk-support-to-your-power-virtual-agents-chatbot-6a0eba974de2?source=collection_archive---------19-----------------------#2020-09-05">https://towardsdatascience.com/tell-me-a-joke-how-to-add-small-talk-support-to-your-power-virtual-agents-chatbot-6a0eba974de2?source=collection_archive---------19-----------------------#2020-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="fb9d" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">微软 POWER 平台解决方案</h2><div class=""/><div class=""><h2 id="afdd" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">闲聊是每个聊天机器人的基本特征。在 QnA Maker 和 Power Automate 的帮助下，我们将这一功能添加到任何使用微软 Power 虚拟代理构建的聊天机器人中</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/18a1c17c5f2ce79a0082a9d23918f121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bstvgm7HEdM5epJM"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@ninjason?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">梁杰森</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e617" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">不管你的聊天机器人是为了什么而设计的，也不管它的目的有多清晰或简单，你的用户总是会首先尝试聊天。</p><p id="16a2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">了解了这一点，即使是最简单的聊天机器人也必须具备得体的聊天技巧。但是这可能是一个挑战——特别是当您使用像 Power Virtual Agents (Power VA)这样的低代码产品时，因为这样的产品可能没有开箱即用的良好聊天功能。</p><p id="5b94" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在本指南中，我将向您展示如何使用 QnA Maker 作为 Azure 认知服务套件的一部分，向任何 Power VA 聊天机器人添加聊天功能，并在 Power Automate 的帮助下将这两种产品结合起来。</p><p id="583c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你是 Power VA 的新手，我在 Medium 上为你提供了一个简单的分步介绍<a class="ae le" rel="noopener" target="_blank" href="/meet-lena-a-simple-ai-no-code-chatbot-8ac006c92a45">这里</a>。</p><p id="e7f7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们开始吧。</p><h2 id="618a" class="mb mc iq bd md me mf dn mg mh mi dp mj lo mk ml mm ls mn mo mp lw mq mr ms iw bi translated">创建 QnA Maker 闲聊知识库</h2><p id="75c3" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">在微软<strong class="lh ja"> QnA Maker </strong>的帮助下，我们可以为我们的聊天机器人创建一个知识库，其中包含大约 100 个聊天场景的预填充数据集，包括响应和样本查询。我们可以选择 5 种不同的性格和 9 种语言。你可以在<a class="ae le" href="https://github.com/microsoft/BotBuilder-PersonalityChat" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上了解更多。</p><p id="c41d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要创建我们的闲聊知识库，请转到<a class="ae le" href="https://www.qnamaker.ai/" rel="noopener ugc nofollow" target="_blank">https://www.qnamaker.ai/</a>，登录并点击<strong class="lh ja">创建知识库</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/6f262b0428b784e2ad74def9cbcc2d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfOpGjAjBHtg7zeKZ9Dpsw.png"/></div></div></figure><p id="1039" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">点击<strong class="lh ja">创建 QnA 服务</strong>按钮，重定向到 Azure 门户，创建您自己的 QnA Maker 实例。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/01567760dad349f061279bc3c5cdad21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jmu-SiuhWEWvQQpQCvnfxw.png"/></div></div></figure><p id="3c09" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在 Azure 门户中，你必须命名一些资源。为创建的每个服务选择适当的名称和位置。</p><blockquote class="mz na nb"><p id="86ba" class="lf lg nc lh b li lj ka lk ll lm kd ln nd lp lq lr ne lt lu lv nf lx ly lz ma ij bi translated">如果你没有 Azure 订阅，先注册一个<a class="ae le" href="https://azure.microsoft.com/en-us/free/cognitive-services/" rel="noopener ugc nofollow" target="_blank"> Azure 免费试用</a>。</p><p id="48f6" class="lf lg nc lh b li lj ka lk ll lm kd ln nd lp lq lr ne lt lu lv nf lx ly lz ma ij bi translated">此外，如果你不是 Azure 专家，这可能会有点混乱。别担心，使用和我一样的设置。只需将<strong class="lh ja">西欧</strong>替换为您最近的位置，将<strong class="lh ja"> MyBot </strong>替换为您聊天机器人的名称。其余部分遵循一些命名和简单部署的最佳实践。</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/6df3e76cbf562a183df9730fbdadecf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HvEL0TfiisaDF_H_ShtUdA.png"/></div></div></figure><p id="d317" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在向导的最后点击，最后一次验证你的设置，然后点击<strong class="lh ja">创建</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/cd8944145d66e3d8c2a5c14ff80f8cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMq4bWsBrmWBzJZkrAz7Bw.png"/></div></div></figure><p id="c0c7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">等待<strong class="lh ja">您的部署已完成</strong>消息，并在浏览器中跳转回 QnA Maker 门户。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/b927dfe7b6318f7d632cf6757e8b97f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AKoaCxeLu14vtFlGWomBGw.png"/></div></div></figure><p id="9931" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">返回 QnA Maker 门户，单击<strong class="lh ja">刷新</strong>按钮，并从下拉列表中选择之前创建的 Azure QnA 服务实例。请注意，这可能需要您刷新(F5)多次，或者再等几分钟，实例才会出现。</p><p id="6319" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">像我一样，给你的 QnA Maker 知识库起一个响亮的名字。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/48bcde5d03056075dbb4f9dc15fdf744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BE9sRt7ZhrQYUxg47GSUhQ.png"/></div></div></figure><p id="efe4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们可以添加一些闲聊的场景，并在 5 种不同的性格中进行选择。</p><p id="a052" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">准备好后，点击<strong class="lh ja">创建您的知识库</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/45f62090644c52fb98bf4b7405e18fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tj9frj9VMwcjWAPAcTKT1w.png"/></div></div></figure><p id="30c8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当你的知识库准备好了，我们可以有选择地稍微调整一下。例如，你可以搜索“<em class="nc">你是谁？”</em>并更改其响应，以包含来自您的聊天机器人的个性化欢迎消息。</p><p id="4a64" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">还可以添加新的 QnA 对，就像您企业的基本常见问题一样。玩玩它，当你觉得准备好的时候点击<strong class="lh ja">保存和训练</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/20c4ef1b50a8481a2c67bf2aca246ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQvm6bxSKYDgSK8CLewxNw.png"/></div></div></figure><p id="7c34" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们可以转到<strong class="lh ja">发布</strong>选项卡并点击<strong class="lh ja">发布</strong>按钮。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/ccbc41aae9e9e1ea8a1280ecedb7c84f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSCWbuDoNiv8sqAfi3s_lQ.png"/></div></div></figure><p id="1ed6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">发布成功后，门户向我们提供了必要的详细信息，如<strong class="lh ja">知识库 id </strong>、<strong class="lh ja">主机、</strong>和<strong class="lh ja">端点密钥</strong>。保持此页面打开，因为我们稍后需要此信息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/34470f24a53aba2db5358a037f65371d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frN4znOJfC8VT2e47kgUfg.png"/></div></div></figure><h2 id="f3ac" class="mb mc iq bd md me mf dn mg mh mi dp mj lo mk ml mm ls mn mo mp lw mq mr ms iw bi translated">将聊天添加到您的 Power VA 聊天机器人</h2><p id="dd70" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">在 Power VA 管理门户，打开你的聊天机器人，点击<strong class="lh ja">齿轮</strong>图标，选择<strong class="lh ja">系统回退</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/bf7cdc0f63ab600e684b13f7b6d34525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s86CK_NM-l2hduA7Pf_OKQ.png"/></div></div></figure><p id="d6b7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过点击<strong class="lh ja">添加</strong>按钮，我们启用回退系统主题。这取代了自动提示信息的默认行为，并允许我们挂接自定义逻辑。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/1f7cff959b05f2de4cb922e0e02167e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uw93KfqWe88RDQK1Zk6Xug.png"/></div></div></figure><p id="0656" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">添加回退系统主题后，点击<strong class="lh ja">转到回退主题</strong>打开设计器。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/2fcf14ec6f2c4e3a0a57499feb11d214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1VwpQFphsQEb_EIQXnrE0Q.png"/></div></div></figure><p id="af18" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们使用每个画布上的三个点删除默认消息和升级重定向。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/7e34eff71b71feab9034b2538ce5ec72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZMpC8dfZyROBNbVRbwidXA.png"/></div></div></figure><p id="1d60" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">点击连接器末端的<strong class="lh ja"> + </strong>图标，选择<strong class="lh ja">调用动作</strong>，点击<strong class="lh ja">创建流程</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/e08803a90fec01fc65196a0fe7a60585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TriQPj95qH7ZYRvPy0T54Q.png"/></div></div></figure><p id="9da8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将启动 Power Automate 管理门户，为 Power VA 提供一个触发器和输出操作。</p><p id="e076" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们点击<strong class="lh ja">+Add a Input</strong>，为我们的触发器添加一个新的输入。选择一个文本输入并将其命名为<code class="fe ng nh ni nj b">Question</code>。</p><p id="cce4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">同样，我们使用<strong class="lh ja"> + </strong>图标添加了<strong class="lh ja">生成答案(预览)</strong>动作。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/61ab6206194a3649d43cb586ceff72a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcF2Px-rU5MdmBZ2TKEHBg.png"/></div></div></figure><p id="d6da" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在下一步中，我们必须配置到 QnA Maker 实例的连接。我们需要您之前在 QnA Maker 中发布知识库时显示的连接详细信息(请参考上面的截图)。</p><p id="e745" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">根据需要输入一个<strong class="lh ja">连接名</strong>—将<strong class="lh ja"> API 键</strong>映射到<strong class="lh ja">端点键</strong>并将<strong class="lh ja">站点 URL </strong>映射到<strong class="lh ja">主机</strong>。再次验证您的设置并点击<strong class="lh ja">创建</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/739fd7319299a7d2da64845310e82d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SG95acamHnOZr-ApBewbA.png"/></div></div></figure><p id="5fa4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在下一步中，<strong class="lh ja">生成</strong> <strong class="lh ja">应答</strong>动作再次要求相同的参数。我们还需要<strong class="lh ja">知识库 Id </strong>，它只是 QnA Maker 门户中部署细节的<em class="nc"> GUID </em>部分。</p><p id="a02b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，我们将<strong class="lh ja">问题</strong>字段映射到上面触发器的新<strong class="lh ja">问题</strong>输入。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/e6bcd4b4c5c89c34792536548705b5d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6nHpK-C5r9ZK6Ah4iowKw.png"/></div></div></figure><p id="fa8f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">QnA Maker 可能会对一个问题给出多个答案。这就是为什么我们用接下来的两步从回答中“挑选”最佳答案。</p><p id="7929" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们添加一个<strong class="lh ja">初始化变量</strong>的步骤，并创建一个名为<code class="fe ng nh ni nj b">BestAnswer</code>的新对象。我们用从<strong class="lh ja">生成答案</strong>动作获得的第一个答案条目初始化对象。为此，我们使用下面的简单表达式。</p><pre class="kp kq kr ks gt nk nj nl nm aw nn bi"><span id="e16d" class="mb mc iq nj b gy no np l nq nr">first(outputs('Generate_answer')?['body/answers'])</span></pre><p id="ec33" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这个表达式选择上面的第一个答案。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/8ffb4a3c0d4a28924ef0fe635f77ee75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zH_S-6Qjs-wRQ44L00X7wQ.png"/></div></div></figure><p id="fe2c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们有了这个答案，我们添加一个<strong class="lh ja">解析 JSON </strong>动作来从我们的<strong class="lh ja">最佳答案</strong>构造一个对象。为此，我们使用下面的 JSON 模式，您可以将它复制并粘贴到动作的模式字段中。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/dc050406a004dcf89d3e50bc8abdceb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ev-HUcgxO_OfdjRZPfspzg.png"/></div></div></figure><p id="3287" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">作为流程的最后一步，我们添加了两个输出。</p><p id="e468" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">首先，我们添加一个名为<strong class="lh ja">答案</strong>的<em class="nc">文本</em>输出，并将其映射到最佳答案的<strong class="lh ja">答案</strong>属性。</p><p id="56d4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其次，我们添加一个名为<strong class="lh ja"> Score </strong>的<em class="nc">数字</em>输出，并分别将其映射到<strong class="lh ja"> score </strong>属性。分数是一个置信度值，表示 QnA Maker 对响应的确信程度。我们将在稍后使用这个值。</p><p id="7e27" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在点击保存之前，给你的流起一个更好的名字。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/6da755838643f648c9b9202f0e9dbaab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uxf7sGo6BaRhHeSKkZwJjQ.png"/></div></div></figure><p id="b7f5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">回到 Power VA 中的回退系统主题，我们现在可以添加新的流并将<code class="fe ng nh ni nj b">UnrecognizedTriggerPhase</code>变量链接到流的<strong class="lh ja">问题</strong>输入。这样，我们只需将用户所说的传递给我们的流。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/1af1a66170e9dd3114a6493759113aac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33v1R2lS3UkRgjz_aNrITg.png"/></div></div></figure><p id="8535" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">之后，我们使用连接器末端的<strong class="lh ja"> + </strong>图标添加一个新条件。</p><p id="395f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们测试<strong class="lh ja">分数</strong>变量是否大于<strong class="lh ja"> 0 </strong>。在这种情况下，我们确保我们从 QnA Maker 收到了一个正确的答案，这个答案值得向用户显示，我们用一个使用<strong class="lh ja"> Answer </strong>变量的简单消息来完成。</p><p id="46d8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于任何其他情况，我们用静态消息进行响应，表明即使我们的 QnA Small Talk 数据库也完全不知道用户说了什么。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/b798987f81613f2acc1f29274a5b0a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dow3Hq6xQ1IRP8EHP7A_zA.png"/></div></div></figure><p id="3468" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">最后，点击<strong class="lh ja">保存</strong>按钮，我们就可以测试我们聊天机器人的聊天技能了。只需抛出一堆愚蠢的问题，然后看看聊天机器人的反应。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nu"><img src="../Images/4ab8feccd464cd6a8248e8668c7c000f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T1zjX9-1y9vpiIW8Y1HLnA.png"/></div></div></figure><p id="137d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">就是这样。我们的聊天机器人表现得非常自然，可以回答许多最常见的问题。即使是一个不完美的答案也能带来令人捧腹的幽默对话。你的聊天机器人肯定会经受住你的第一次用户交互，并且总是有机会通过添加新的 QnA 对来改善结果。</p><p id="0545" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">👉，<br/>塞巴斯蒂安</p></div></div>    
</body>
</html>