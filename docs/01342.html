<html>
<head>
<title>Upgrading Python lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">升级 Python 列表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/upgrading-python-lists-35440096ec36?source=collection_archive---------15-----------------------#2020-02-06">https://towardsdatascience.com/upgrading-python-lists-35440096ec36?source=collection_archive---------15-----------------------#2020-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4bd4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">向 Python 列表添加有用的功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/05e39daf52db761684f1e54430975f83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUhxMtCGKD34OdsYamURCw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来源:JoeyBLS 摄影</p></figure><h2 id="ae77" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">介绍</h2><p id="1383" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">Python 列表很好。但他们并不伟大。有如此多的功能，可以很容易地添加到他们，但仍然缺乏。用布尔进行索引，轻松地用它们创建字典，一次追加多个元素，等等。嗯，不再是了。</p><p id="4307" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated"><strong class="lt ir"> <em class="mp"> Fastai </em> </strong>已经拿出了自己的数据结构叫做<code class="fe mq mr ms mt b">L</code>。它能做 Python 列表能做的一切，甚至更多。</p><p id="5676" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">本文的目的是向您展示自己编写这样有用的功能是多么容易。尤其是如果你是一个初学者，试着创建一个迷你版本的库。试着写一些你希望存在的功能。这将是一次很好的学习经历。</p><p id="90d5" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">现在，让我们来了解一下<strong class="lt ir"> L </strong>。这是 Colab 的链接。在您的 Colab ( <strong class="lt ir">文件- &gt;驱动器</strong>中保存一份副本)上制作一份副本，并且只运行第一个单元格一次。你的笔记本会崩溃。但是你马上就可以使用图书馆了。</p><p id="3917" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated"><a class="ae mu" href="https://colab.research.google.com/drive/1sv_q6X8XUOKz-254diVTEYsjo3nfiNgz" rel="noopener ugc nofollow" target="_blank">谷歌联合实验室链接</a>。</p><h2 id="34c4" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我是什么？</h2><p id="85f4" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">就像我之前提到的，它类似于 Python 列表，但是可以实现更多。让我们从导入库并创建<code class="fe mq mr ms mt b">L.</code>的实例开始</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/f433204ae63cd255fac9fffcb93311d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*leCqh7-oj8NVTCMl7NVUrw.png"/></div></div></figure><p id="d923" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">我们看到它打印了列表的长度，然后是内容。再也不用一直单独打印长度了。</p><p id="5152" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">如果你和我一样，不喜欢用方括号。移除它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/7f65288cf18b8f124b7db3b00a8a30ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zCxSL0Piiwo95WKoyjJNVQ.png"/></div></div></figure><p id="8e4e" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">编写<code class="fe mq mr ms mt b">.append()</code>来追加元素又是如此乏味。此外，一次只能追加一个元素。咩。移除移除。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/9bc284b20d30c6005df70bdfc87ad71f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oag7Aqnl1iJCTLBwrvla6g.png"/></div></div></figure><p id="28d5" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">请注意，这些东西非常容易编码。我们只是在幕后定义了一个<code class="fe mq mr ms mt b">__add__</code>魔法方法来决定<code class="fe mq mr ms mt b">+</code>操作员将做什么。如果你想学习更多关于魔法方法的知识，你可以阅读我的文章<a class="ae mu" rel="noopener" target="_blank" href="/how-to-be-fancy-with-python-part-2-70fab0a3e492">如何在 Python 中熟练使用 OOP</a>。</p><p id="79c8" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">我们来考察一下<code class="fe mq mr ms mt b">__add__</code>的方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/8393b56d3f46731bc21542f195882c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTO2yiWwQ62xYOmvUMZb2A.png"/></div></div></figure><p id="6125" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">它用当前元素和新元素创建 L 的新实例。很简单，对吧？</p><p id="0d96" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">我们也试试<code class="fe mq mr ms mt b">__mul__</code>吧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/32f3f604ef93672838726720e35d5868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRSy5Zi1CtlYB4fKJkpS6g.png"/></div></div></figure><p id="ac3b" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">它将列表复制两次。另外，请注意，它只打印前 10 个元素，然后显示<code class="fe mq mr ms mt b">...</code>这比显示所有元素的 Python 列表要干净得多。</p><p id="e8c9" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">你可以在 l 中找到独特的元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/3cc9411aee7b8905514aa2b9662f4706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x0Il7TcO1pZOy4gIh90IJg.png"/></div></div></figure><p id="bfc8" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">你可以很容易地把它转换成一本字典。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/a145e45e30730acfd96667e28444a83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OM9Wr1oITnuZypgvKiqbKw.png"/></div></div></figure><p id="f983" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">然而，L 的真正强大之处在于它的索引功能。</p><ol class=""><li id="f8ab" class="nc nd iq lt b lu mk lx ml le ne li nf lm ng mj nh ni nj nk bi translated">使用索引列表进行索引</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/bddc749e5c9df43ac2f474af9050b5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Iyr28dxSBx2-BJKUNQUBA.png"/></div></div></figure><p id="90e0" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">2.使用布尔进行索引</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/8d3d4e84e6792a580c8ab62b6f6d18a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DxzoDBFXfAl6HLOWnvDxw.png"/></div></div></figure><p id="4398" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">3.多重赋值</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/ae4097b89c07179dcce2aa87aa517f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N0DTcq3S7xsDui3ssmNv_Q.png"/></div></div></figure><p id="dc88" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">4.处理无问题的连接</p><p id="58b0" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">很多时候，我们用 Python 返回一系列列表。我们需要 if 语句来检查其中是否有一个是空的，否则它们会抛出一个错误。不是和 l。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/b643139f8daf3474712a220c1f96a5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqtxT0gM_Ohz2SnFewGLvA.png"/></div></div></figure><h2 id="820e" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论:</h2><p id="3b2d" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated">总而言之，这是一个很好的数据结构，可以很容易地用来代替列表。试试笔记本。探索它。这就是本文的全部内容。</p><p id="0b21" class="pw-post-body-paragraph lr ls iq lt b lu mk jr lw lx ml ju lz le mm mb mc li mn me mf lm mo mh mi mj ij bi translated">~快乐学习</p><h2 id="7266" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">参考资料:</h2><p id="2dc1" class="pw-post-body-paragraph lr ls iq lt b lu lv jr lw lx ly ju lz le ma mb mc li md me mf lm mg mh mi mj ij bi translated"><a class="ae mu" href="https://github.com/fastai/fastai_dev/blob/master/dev/01_core_foundation.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/fastai/fastai _ dev/blob/master/dev/01 _ core _ foundation . ipynb</a></p></div></div>    
</body>
</html>