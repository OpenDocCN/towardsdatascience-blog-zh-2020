<html>
<head>
<title>COVID-19, Bayes’ theorem and taking probabilistic decisions.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎，贝叶斯定理和概率决策。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/covid-19-bayes-theorem-and-taking-data-driven-decisions-part-1-b61e2c2b3bea?source=collection_archive---------49-----------------------#2020-05-18">https://towardsdatascience.com/covid-19-bayes-theorem-and-taking-data-driven-decisions-part-1-b61e2c2b3bea?source=collection_archive---------49-----------------------#2020-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7c13fd77363a2b0361410bde2cc0e6c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qIi7K6Z8q7wy4qixVNqKMw.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">来源:<a class="ae kc" href="https://pixabay.com/illustrations/coronavirus-virus-mask-stamp-china-4817450/" rel="noopener ugc nofollow" target="_blank"> geralt </a>，via <a class="ae kc" href="https://pixabay.com/service/terms/#license" rel="noopener ugc nofollow" target="_blank"> Pixabay 许可</a></p></figure><p id="d11f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="lb">编者按:</em> </strong> <em class="lb"> </em> <a class="ae kc" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="lb">走向数据科学</em> </a> <em class="lb">是一份以数据科学和机器学习研究为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae kc" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="lb">这里</em> </a> <em class="lb">。</em></p><p id="16a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有一种测试能百分之百准确地检测出新型冠状病毒！然而，当我们被告知这些测试在检测 COVID 感染方面有 98.5%的准确性时，我们感到满意。但是这种准确性实际上意味着什么呢？</p><p id="9e89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在回答这个问题之前，我们先来复习一些基本概念。</p><ol class=""><li id="6f92" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated"><strong class="kf ir">真阳性:</strong>一个人<em class="lb">同</em>新冠肺炎检测<em class="lb">阳性</em>为新冠肺炎</li><li id="01e8" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated"><strong class="kf ir">假阳性:</strong>一个人<em class="lb">没有</em>新冠肺炎检测<em class="lb">阳性</em>为新冠肺炎</li><li id="a317" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated"><strong class="kf ir">假阴性:</strong>一个人<em class="lb">同</em>新冠肺炎检测<em class="lb">阴性</em>为新冠肺炎</li><li id="d669" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated"><strong class="kf ir">真阴性:</strong>一个人<em class="lb">没有</em>新冠肺炎检测<em class="lb">阴性</em>为新冠肺炎</li></ol><p id="de9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们回顾一下准确度、精密度、灵敏度和特异性的含义。</p><blockquote class="lq lr ls"><p id="aa6b" class="kd ke lb kf b kg kh ki kj kk kl km kn lt kp kq kr lu kt ku kv lv kx ky kz la ij bi translated"><strong class="kf ir">准确度</strong> =(真阳性+真阴性)/所有结果</p><p id="c0bf" class="kd ke lb kf b kg kh ki kj kk kl km kn lt kp kq kr lu kt ku kv lv kx ky kz la ij bi translated"><strong class="kf ir">精度</strong> =真阳性/(真阳性+假阳性)</p><p id="8f28" class="kd ke lb kf b kg kh ki kj kk kl km kn lt kp kq kr lu kt ku kv lv kx ky kz la ij bi translated"><strong class="kf ir">灵敏度</strong> =真阳性/(真阳性+假阴性)</p><p id="91b2" class="kd ke lb kf b kg kh ki kj kk kl km kn lt kp kq kr lu kt ku kv lv kx ky kz la ij bi translated"><strong class="kf ir">特异性</strong> =真阴性/(真阴性+假阳性)</p></blockquote></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="762e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在假设有 200 个病人。假设 100 名患者被感染，100 名患者未被感染。假设 100 个被感染的患者中有 99 个被检测为阳性，并且 2 个健康的患者也被检测为阳性。也就是说，99 人是<em class="lb">真阳性</em>，2 人是<em class="lb">假阳性</em>。1 名感染者<em class="lb">假阴性，98 名未感染者<em class="lb">真阴性</em>。现在我们来计算一下刚刚学的内容。</em></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="b611" class="mm mn iq mi b gy mo mp l mq mr"><strong class="mi ir">Accuracy</strong> = (99 + 98) / 200 = 0.985</span><span id="7312" class="mm mn iq mi b gy ms mp l mq mr"><strong class="mi ir">Precision</strong> = 99 / (99 + 2) = 0.98</span><span id="eaa9" class="mm mn iq mi b gy ms mp l mq mr"><strong class="mi ir">Sensitivity</strong> = 99 / (99 + 1) = 0.99</span><span id="3ca9" class="mm mn iq mi b gy ms mp l mq mr"><strong class="mi ir">Specificity</strong> = 98 / (98 + 2) = 0.98</span></pre><p id="147e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来不错，对吧？现在让我们试着了解更多关于特异性的知识。这意味着，在 100 名未感染新冠肺炎病毒的患者中，只有 98 人检测结果呈阴性。所以，假设一个人没有携带病毒，他检测结果为阴性的概率是 0.98。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="ec3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们潜得更深！概率，即给定一个人已经有了 covid，测试阳性将由条件概率给出，<br/><strong class="kf ir">【p(+|c⁺)=灵敏度= 0.99。<br/> </strong>同样，健康患者检测阴性的概率将为<br/><strong class="kf ir">【p(-|c⁻)=特异性= 0.98。</strong></p><p id="0ec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了条件概率，但这有什么用呢？现在假设我们从人群中随机挑选一个人并对他进行测试。他检测呈阳性，但他真的感染了新型冠状病毒的概率有多大。换句话说，在这里我们有兴趣找到<strong class="kf ir"> P(C⁺|+) </strong>。</p><blockquote class="lq lr ls"><p id="8d3a" class="kd ke lb kf b kg kh ki kj kk kl km kn lt kp kq kr lu kt ku kv lv kx ky kz la ij bi translated">现在根据贝叶斯定理，<br/>P(A | B)= P(A)P(B | A)/(P(A)P(B | A)+P(非 A)P(B |非 A))</p></blockquote><p id="553f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果我们知道<strong class="kf ir"> P(C⁺) </strong>，我们可以通过代入上式中的值来轻松计算<strong class="kf ir"> P(C⁺|+) </strong>。所以，为了计算<strong class="kf ir">p(c⁺】</strong>，你可以用你所在国家的病例数除以总人口数。在我的例子中，它小于 0.0001，这是非常罕见的。让我们来计算一下 P(C⁺|+).</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/53f397b5f7e97b3b344bcdcc0e522f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bF958LmScnh8BtG1hB6mcg.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd mu">p(c⁺|+)——贝叶斯定理在起作用。</strong></p></figure><p id="713b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0.005!你猜到了吗？我打赌不会！这意味着，即使一个随机的人被检测为阳性，也有不到 0.5%的几率他真的感染了病毒。</p><p id="faba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们说，你生活在一个更容易发生的地区，现在你感染冠状病毒的机会增加了 10 倍。即使这样，<strong class="kf ir"> P(C⁺|+) </strong> = 0.047，也就是说，如果<em class="lb">检测结果为阳性</em>，那么你实际被感染的几率小于 5%。</p><p id="c569" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是所有罕见病的问题。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="264d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，我们明白了为什么随机测试新冠肺炎是个愚蠢的想法。此外，如果你生活在一个更容易感染病毒的地区，检测结果仍然呈阳性意味着你被感染的几率低于 5%。但是等等，混合测试呢？</p><p id="cab5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设住在红区的人有新冠肺炎的概率是 0.001 到 0.005。最近有消息称，在新病例开始出现后，武汉正计划对所有 1100 万居民进行检测。根据<a class="ae kc" href="https://www.thehindu.com/sci-tech/science/a-protocol-for-pooled-rt-pcr-testing-of-covid-19/article31489428.ece" rel="noopener ugc nofollow" target="_blank">当前方案</a>，16 次 RT-PCR 检测可检测 40 个样本(最多 3 个阳性)。这可以在 93 个 RT-PCR 测试中测试多达 961 个样本(最多 10 个阳性)。</p><p id="651e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设我们收集了 x 个样本，一个人拥有 Covid 的概率为 p。那么，至少一个人拥有 Covid 的概率由下式给出</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="3b8b" class="mm mn iq mi b gy mo mp l mq mr">P =  1 - (1-p)^x  </span></pre><p id="9cb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们制定一些规则。我们希望选择 x，这样如果一个 x 样本池被检测为阳性，我们希望至少有一个人患有新冠肺炎的概率大于 90%。我会用 R 作为编程工具。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/5593709567de2dba9b7a8eac8360c36b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/0*3RBvInaZSC6UH-T8.jpeg"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">我们应该选择多少样品进行混合测试</p></figure><p id="d922" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，<em class="lb"> pc </em>表示 x 个样本中至少一个被感染的概率。<br/> <em class="lb"> prob </em>是<strong class="kf ir"> P(C⁺|+，</strong>利用贝叶斯定理计算得出。现在，我们绘制 x(样本数量)对 p(一个人拥有 covid 的概率)。</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/5813de217f5b36c8e8a80d320d06c904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IOM4nwltEpr7JQ1fpRfSnw.png"/></div></div></figure><p id="f196" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在调查了一个地方的确诊病例数后，如果我们想测试整个人群的新冠肺炎，我们可以使用这个模型来选择样本数进行混合测试。</p><p id="91b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，这有助于我们采取概率决策来选择样本数量。我选择了 90%的 p 值，这可能会让医生们更有信心。另一方面，增加样本数量会引发其他问题。因此，专家在做出最终决定之前可以调整参数。感谢阅读！</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="cfed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">.</p></div></div>    
</body>
</html>