<html>
<head>
<title>A Guide to Everything String Formatting in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中所有字符串格式的指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-guide-to-everything-string-formatting-in-python-e724f101eac5?source=collection_archive---------18-----------------------#2020-08-07">https://towardsdatascience.com/a-guide-to-everything-string-formatting-in-python-e724f101eac5?source=collection_archive---------18-----------------------#2020-08-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc0a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你需要知道的关于 Python 中格式化字符串的五个方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/18877e298bbec7741adad3867d3c439b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZiKW3fHk4S9jDfNq"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法尔萨法罗夫</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="594d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">字符串是编程中最基本和最常用的数据类型之一。它允许计算机与世界进行交互和通信，例如打印指令或读取用户的输入。操纵和合成字符串的能力赋予程序员处理和操纵文本的能力，例如，从网站表单中提取用户输入，从处理的文本中提取数据，并使用这些数据执行情感分析等活动。情感分析是自然语言处理的一个子领域，它允许计算机根据一段文本对情绪进行分类——消极、积极或中性。</p><blockquote class="me"><p id="5da0" class="mf mg it bd mh mi mj mk ml mm mn lu dk translated">“所有的情绪是正确的；因为感情除了它自己之外，没有别的意义，只要一个人意识到它，它总是真实的。”—大卫·休谟</p></blockquote><p id="e350" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Python 是仅次于 r 的用于分析和操作数据的主要编程语言之一。Python 用于数据分析，以帮助访问数据库并与之通信。它在使用不同的 web 抓取技术导入和导出数据时也很有用。一旦获得这些数据，Python 就被用来清理和准备数据集，然后将它们输入到机器学习算法中。</p><p id="7e46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 Python 格式化字符串有五种方式:使用<em class="mt">模</em>操作符格式化字符串，使用 Python 内置的<em class="mt"> format </em>函数格式化，使用 Python 3.7 <em class="mt"> f-strings </em>格式化，手动<em class="mt">格式化</em>，最后使用<em class="mt">模板</em>字符串。我们将介绍这些方法中的每一种，以及何时使用它们。</p><p id="0f42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开门见山吧…</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="76cb" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">使用模运算符</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/ec86969bb97bf009285e9accebbce22d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8LS9Ns3S6g10cpYg7Fe4bw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供(使用<a class="ae ky" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作)</p></figure><p id="09af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您以前使用 C 或 C++编写过代码，您会觉得非常熟悉。在 Python 中，我们可以使用模运算符(%)来执行简单的位置格式化。我在这里称之为<em class="mt">占位符</em>，它代表了格式化和转换字符串的控制规范。%告诉解释器下面的字符是转换字符串的规则。转换规则包括关于结果格式化字符串的期望宽度、结果的类型和精度的信息——在浮点的情况下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/1a54d46383eca34b437852430a79f078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwnM0NzGXnWU4OtMMfWZ5g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供(使用<a class="ae ky" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作)</p></figure><p id="6a6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种类型的字符串格式有时被称为“旧样式”格式。<em class="mt">占位符</em>可以直接引用值，也可以使用关键字参数指定。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="3ca4" class="oa nc it nw b gy ob oc l od oe">formatted_str = 'Yesterday I bought %d %s for only %.2f$!' % (10, 2'bananas',2.6743)</span></pre><p id="189d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们试图打印这个字符串，我们将得到<code class="fe of og oh nw b">Yesterday I bought 10 bananas for only 2.67$!</code>。</p><p id="dba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你在这里看到的，我有三个<em class="mt">占位符</em>用于三个值，第一个<em class="mt">整数</em>，第<em class="mt">字符串</em> —香蕉，以及香蕉的价格，这是一个<em class="mt">浮点数</em>。当提到浮点数时，我认为精度为 2 是我所需要的；这就是为什么小数点后只显示 67 的原因。</p><p id="f2a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前面的例子中，我们直接用值替换了<em class="mt">占位符</em>。还有另一种方法可以实现这种映射，那就是使用关键字参数或者传递一个字典。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="6c34" class="oa nc it nw b gy ob oc l od oe">name = 'John'<br/>balance = 235765<br/>formatted_str = 'Hello %(name)s, your current balance is %(balance)6.0f dollars.' % {"name":name, "balance":balance}</span></pre><p id="9bfb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用这种方法，我们需要使用<code class="fe of og oh nw b">{}</code>而不是<code class="fe of og oh nw b">()</code>。正因为如此，我们也可以直接使用字典来填充<em class="mt">占位符</em>。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="b40c" class="oa nc it nw b gy ob oc l od oe">dictionary = {'quantity': 10, 'name': 'bananas', 'price': 2.6743}<br/>formatted_str = 'I got %(quantity)d %(name)s for $%(price).2f$' % dictionary</span></pre><p id="5154" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本节的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="04b3" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">使用格式方法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/e562abd8d9c51ae8683cfd2526e5a359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oFh_7MtlAXT2FtkR3SBvDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供(使用<a class="ae ky" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作)</p></figure><p id="07b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 Python 3 中，该语言引入了一种新的方法来规范%操作符语法。这是使用内置的格式方法完成的，也称为“新样式”格式。使用 format 方法与使用%运算符有许多共同点。让我们考虑重写以前的一些例子:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="2d86" class="oa nc it nw b gy ob oc l od oe">name = 'John'<br/>balance = 235765<br/>formatted_str = 'Hello %(name)s, your current balance is %(balance)6.0f dollars.' % {"name":name, "balance":balance}</span></pre><p id="8a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">会变成:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="d65f" class="oa nc it nw b gy ob oc l od oe">name = 'John'<br/>balance = 235765<br/>formatted_str = 'Hello {name:s}, your current balance is {balance:6.0f} dollars.'.format("name":name, "balance":balance)</span></pre><p id="e9f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以将%运算符语法和 format 方法之间的差异总结如下:</p><ol class=""><li id="5ce5" class="ol om it lb b lc ld lf lg li on lm oo lq op lu oq or os ot bi translated">通过%操作符，我们在字符串中使用了<code class="fe of og oh nw b">()</code>，而对于格式方法，我们使用了<code class="fe of og oh nw b">{}</code>。</li><li id="9f2a" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">为了定义%运算符中的转换类型，我们将其设置在%之后，而在 format 函数中，我们将转换设置在<code class="fe of og oh nw b">:</code>之后的<code class="fe of og oh nw b">{}</code>中。</li></ol><p id="6bad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果我们想将字典传递给格式字符串，我们需要稍微修改一下重新造林。我们需要传递一个指向字典的指针，而不是传递字典的名称，例如:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="06e7" class="oa nc it nw b gy ob oc l od oe">dictionary = {'quantity': 10, 'name': 'bananas', 'price': 2.6743}<br/>formatted_str = 'I got {quantity:d} {name:s} for {price:.2f}$'.format(**dictionary)</span></pre><p id="e689" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以使用与 format 方法中使用的%运算符相同的转换规则。在 Python 3 和 3.6 版本中，format 方法比%运算符方法更受欢迎。format 方法提供了一种格式化字符串的强大方法；它没有使简单的情况变得复杂——比如上面的例子——但是，同时为我们如何格式化字符串提供了新的层次。</p><p id="a6c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本节的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="7107" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">使用 f 弦</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/2d4de843d521c73ad006557a306852c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AfecL-QTL0NyY1m5pJZjDw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供(使用<a class="ae ky" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作)</p></figure><p id="2252" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，这是格式化字符串最有趣、最优雅的方法。f-string 在 Python 3.8 中作为一种更直接的字符串格式化方法出现。在我们进入 f-strings 之前，让我们快速了解一下 Python 3.8 及更高版本中的三种类型的字符串。</p><ol class=""><li id="2c44" class="ol om it lb b lc ld lf lg li on lm oo lq op lu oq or os ot bi translated"><strong class="lb iu">正常/标准字符串:</strong>包含在“”或“”之间，例如<code class="fe of og oh nw b">“Hello, world!”</code>。这些是最常用的字符串类型。</li><li id="998a" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated"><strong class="lb iu">原始字符串</strong>:由 r”引导，例如<code class="fe of og oh nw b">r’hello\nworld’</code>。在这种类型的字符串中，不对字符串进行任何处理。也就是说，转义字符在这些字符串中不起作用。相反，它们将不经过任何处理就被打印出来。这种类型的字符串主要用在正则表达式中。</li><li id="dc7b" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated"><strong class="lb iu"> f 弦:</strong>由 f 引”，例如<code class="fe of og oh nw b">f’hello John!’</code>。F-strings 用作格式化字符串的替代方法。</li></ol><div class="oz pa gp gr pb pc"><a rel="noopener follow" target="_blank" href="/programmers-guide-to-master-regular-expression-f892c814f878"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">程序员指南掌握正则表达式</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">了解语言类比</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">towardsdatascience.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq ks pc"/></div></div></a></div><p id="2761" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">string 提供了一种简单的方法，通过直接将表达式嵌入到字符串中来格式化字符串。让我们再看一遍之前的例子。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="0376" class="oa nc it nw b gy ob oc l od oe">name = 'John'<br/>balance = 235765<br/>formatted_str = 'Hello {name:s}, your current balance is {balance:6.0f} dollars.'.format("name":name, "balance":balance)</span></pre><p id="1614" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们想使用 f 字符串重写这种格式，它将看起来像:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="483f" class="oa nc it nw b gy ob oc l od oe">name = 'John'<br/>balance = 235765<br/>formatted_str = f'Hello {name}, your current balance is {balance} dollars.'</span></pre><p id="acc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f-string 简化字符串格式的一种方法是，我们可以直接传递 iterables——字典、列表等。—字符串，如下所示:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="032b" class="oa nc it nw b gy ob oc l od oe">dictionary = {'quantity': 10, 'name': 'bananas', 'price': 2.6743}<br/>formatted_str = f'I got dictionary[quantity] dictionary[name] for dictionary[price]$'</span><span id="3d99" class="oa nc it nw b gy pr oc l od oe">#f-string with lists<br/>myList = [1,2,3,4]<br/>formatted_str = f'The last item of the list is myList[-1]'</span></pre><p id="1e83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以直接在 f 字符串中执行简单的算术或逻辑运算。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="76f4" class="oa nc it nw b gy ob oc l od oe">#Arithmetic<br/>myList = [1,2,3,4]<br/>formatted_str = f'The sum of the last and first items of the list is myList[0] + myList[-1]'<br/>#Logic<br/>formatted_str = f'myList[0] == myList[-1]'</span></pre><p id="16b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">string 为我们在想要格式化的字符串中使用的选项提供了更多的自由，例如列表索引、调用列表或字典方法，或者通用的 iterables 函数——例如，<code class="fe of og oh nw b">len</code>、<code class="fe of og oh nw b">sum</code>、<code class="fe of og oh nw b">min</code>和<code class="fe of og oh nw b">max</code>。我们还可以在 f 字符串中使用条件语句:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="ccff" class="oa nc it nw b gy ob oc l od oe">age = 21<br/>formatted_str = f'You <!-- -->{"can't" if age &lt; 21 else "can"} drink!<!-- -->'</span></pre><p id="3e6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本节的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="fbba" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">手动格式化</h1><p id="8461" class="pw-post-body-paragraph kz la it lb b lc ps ju le lf pt jx lh li pu lk ll lm pv lo lp lq pw ls lt lu im bi translated">手动格式化是指使用标准的<a class="ae ky" href="https://docs.python.org/2.5/lib/string-methods.html" rel="noopener ugc nofollow" target="_blank">字符串方法</a>来格式化字符串。大多数情况下，我们使用<code class="fe of og oh nw b">rjust</code>、<code class="fe of og oh nw b"> ljust</code>和<code class="fe of og oh nw b">center</code>来调整字符串。<code class="fe of og oh nw b">rjust</code>方法通过在左边填充空格来右对齐给定宽度的字符串。<code class="fe of og oh nw b">ljust</code>在右边添加填充，<code class="fe of og oh nw b">center </code>方法在字符串两边添加填充。这些方法不修改原始字符串；而是返回一个新的修改过的字符串。还有另一种字符串方法可以用来格式化字符串，那就是<code class="fe of og oh nw b">zfill </code>方法。此方法用一个左边带零的数值填充字符串。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="73bf" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">使用模板字符串</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/2d341c26a2ccf3a1e58642b400e1e695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T7-plitVlXNNlsq5PR2jPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供(使用<a class="ae ky" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>制作)</p></figure><p id="0ac4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://docs.python.org/3.4/library/string.html#template-strings" rel="noopener ugc nofollow" target="_blank">模板字符串</a>是%操作符的替代物，但是模板字符串使用$符号代替%。这两种方法都提供了我们所说的替换格式。Python 中没有内置模板字符串，因此要使用它们，我们需要首先导入<code class="fe of og oh nw b">string</code>模块。模板字符串有三个规则:</p><ol class=""><li id="bd00" class="ol om it lb b lc ld lf lg li on lm oo lq op lu oq or os ot bi translated"><code class="fe of og oh nw b">$$</code>是转义字符。</li><li id="0241" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">直接跟在<code class="fe of og oh nw b">$</code>符号后面的是模板的<em class="mt">占位符</em>。默认情况下，这些<em class="mt">占位符</em>被限制为任何不区分大小写的字母数字字符串。$符号后的第一个非占位符字符终止了这个<em class="mt">占位符</em>规格，例如，一个空白字符。</li></ol><p id="2d23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些规则和更多的规则已经在 string 模块中定义了，所以一旦导入，您就可以继续使用它们，而不需要定义它们。</p><p id="a5bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">模板字符串有两个主要方法:<code class="fe of og oh nw b">substitute</code>方法和<code class="fe of og oh nw b">safe_substitute</code>方法。这两种方法采用相同的参数，即替代映射。此外，两种方法都返回一个新的格式化字符串，您可以将模板对象视为未来字符串格式化的蓝图。例如:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="73db" class="oa nc it nw b gy ob oc l od oe"><strong class="nw iu">from </strong>string <strong class="nw iu">import </strong>Template<br/>formatted_str = Template('Hello $who, your current balance is $how dollars.')<br/>formatted_str.substitute(who='John', how=235765)</span></pre><p id="6aa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解 substitute 和 safe_substitute 方法之间的区别，让我们尝试使用一个字典作为我们的替换映射。</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="899d" class="oa nc it nw b gy ob oc l od oe"><strong class="nw iu">from </strong>string <strong class="nw iu">import </strong>Template<br/>mapping = dict(who='John', how=235765)<br/>formatted_str = Template('Hello $who, your current balance is $how dollars.')<br/>Returned_str = formatted_str.substitute(mapping)</span></pre><p id="c162" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们的字典没有映射所需的所有键，使用<code class="fe of og oh nw b">substitute</code>方法将给出一个<strong class="lb iu"> keyError </strong>。这里是<code class="fe of og oh nw b">safe_substitute</code>提供帮助的地方，如果这个方法没有找到正确的键，它将返回一个带有<em class="mt">占位符</em>的字符串来表示错误的键。例如，这段代码:</p><pre class="kj kk kl km gt nv nw nx ny aw nz bi"><span id="6592" class="oa nc it nw b gy ob oc l od oe"><strong class="nw iu">from </strong>string <strong class="nw iu">import </strong>Template<br/>mapping = dict(who='John')<br/>formatted_str = Template('Hello $who, your current balance is $how dollars.')<br/>Returned_str = formatted_str.safe_substitute(mapping)</span></pre><p id="e27a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将返回<code class="fe of og oh nw b">Hello John, your current balance is $how dollars.</code>，如果我使用了<code class="fe of og oh nw b">substitute</code>方法，我会得到一个错误。</p><p id="6159" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本节的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h2 id="4a64" class="oa nc it bd nd px py dn nh pz qa dp nl li qb qc nn lm qd qe np lq qf qg nr qh bi translated">结论</h2><p id="ef2b" class="pw-post-body-paragraph kz la it lb b lc ps ju le lf pt jx lh li pu lk ll lm pv lo lp lq pw ls lt lu im bi translated">在本文中，我们介绍了在 Python 中格式化字符串的五种不同方法:</p><ol class=""><li id="a6c1" class="ol om it lb b lc ld lf lg li on lm oo lq op lu oq or os ot bi translated">模运算符。</li><li id="9dad" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">格式功能。</li><li id="615f" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">f 弦。</li><li id="b69a" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">手动格式化。</li><li id="7583" class="ol om it lb b lc ou lf ov li ow lm ox lq oy lu oq or os ot bi translated">模板字符串。</li></ol><p id="baf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每种方法都有其使用优点和缺点。Dan Badar 提出了一个通用的经验法则，如果你格式化的字符串是用户获得的，那么模板字符串是一个不错的选择。否则，如果您使用 Python 3.7 或其他地方的 format 函数，请使用 f 字符串。</p></div></div>    
</body>
</html>