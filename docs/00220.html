<html>
<head>
<title>AWS and Python: The Boto3 Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS和Python:boto 3包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/aws-and-python-the-boto3-package-df495bb29cb3?source=collection_archive---------20-----------------------#2020-01-07">https://towardsdatascience.com/aws-and-python-the-boto3-package-df495bb29cb3?source=collection_archive---------20-----------------------#2020-01-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/756188ce1c0b9101235d6d55167a3103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UphzLGdhfnai2pYZP-SGBA.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="0420" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">Domo Arigato，AWS Boto</h2></div><p id="cbdd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在是2020年，云存储和计算世界很可能是未来几十年大多数企业的发展方向。拥有可扩展的存储和计算能力而无需购买物理设备的前景非常诱人。云的三大巨头是亚马逊网络服务(AWS)、微软Azure和谷歌云服务。</p><p id="7d5a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">由于Python是最受欢迎的语言之一(在撰写本文时)，所以无论您选择哪种服务，查看允许使用Python的工作数据工程师、数据科学家和机器学习科学家利用云的能力的包都是有意义的。微软azure有Azure包，谷歌有谷歌云包，AWS有boto3。本文将重点介绍boto3。</p><p id="0315" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><strong class="kv jf">设置它</strong></p><p id="8ef7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">首先，我们需要设置一些东西。AWS确实提供免费服务，你可以免费注册。你需要一个用户名和令牌来通过后台登录boto3，所以去https://aws.amazon.com注册一个免费账户吧。您还需要在您的IDE、笔记本电脑等中安装boto3。只需使用pip或conda安装boto3即可。</p><p id="bff5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">接下来，您需要通过Amazon的身份和访问管理控制台(<a class="ae lp" href="https://console.aws.amazon.com/iam" rel="noopener ugc nofollow" target="_blank"> IAM </a>)创建一个用户。在这里，您可以添加用户、组和任何与访问相关的内容。您需要为自己创建一个角色，这样您就可以拥有一个用于凭证目的的永久授权令牌。</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lq"><img src="../Images/3b7613b0987c7624da38533e8e770eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AG4lF0-Z32jpXYIZ9rIblQ.png"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">步骤1:设置用户名和访问类型</p></figure><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lz"><img src="../Images/b629f8bbc4603e4661f7a63862f4c812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUi7YIwdWZMnjQylw9o1wA.png"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">第二步:设置权限(对于这篇文章，你只需要SNS，S3，理解和Rekognition)。确保为每个选项选择完全访问权限。如果这是一个个人帐户，你可以给自己所有亚马逊服务的完全访问权限，只需在搜索中输入FullAccess并选中all。</p></figure><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ma"><img src="../Images/67c10bed0657381bbc16e9f3821ed3cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiNibu0-4pWFoJ1U_yZ3oA.png"/></div></div><p class="lv lw gj gh gi lx ly bd b be z dk translated">步骤3:添加标记(可选)—这些是键:值对，它们是用于更好控制的附加标识符</p></figure><p id="70e5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">完成上述步骤后，只需确认设置，用户就会收到访问密钥id和秘密访问密钥。在您的本地计算机上启动AWS会话将需要这些。</p><p id="35e2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><strong class="kv jf">开始会话</strong></p><p id="c2fb" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是你节省时间的地方。启动会话就像打开您的IDE或笔记本一样简单，只需使用以下命令:</p><pre class="lr ls lt lu gt mb mc md me aw mf bi"><span id="cac2" class="mg mh je mc b gy mi mj l mk ml">import boto3<br/><br/>s3 = boto3.client(‘service_name’, region_name=’region_name’,<br/>                   aws_access_key_id=key,<br/>                   aws_secret_access_key=password)</span></pre><p id="bf1b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于上下文:“服务名称”是您正在连接的AWS服务(S3、SNS、理解、Rekognition等)，区域是您正在连接的计算服务的区域。该地区很重要，因为这将决定成本。请访问AWS网站获取服务列表，并访问<a class="ae lp" href="https://howto.lintel.in/list-of-aws-regions-and-availability-zones/" rel="noopener ugc nofollow" target="_blank">https://how to . lintel . in/list-of-AWS-regions-and-avail ability-zones/</a>获取地区列表。只有用户拥有权限的服务才可以访问。抱歉，到目前为止，它不需要服务列表，所以你需要一次加载一个。</p><p id="91f2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><strong class="kv jf">服务和功能示例</strong>。</p><p id="c5a0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><em class="mm"> S3 </em>。AWS的简单存储解决方案。这是创建和存储文件夹和文件的地方。这是一个非关系型的存储空间，所以它需要许多不同类型的文件。AWS对文件夹的术语是“桶”,文件被称为“对象”。以下是S3的几个函数:</p><pre class="lr ls lt lu gt mb mc md me aw mf bi"><span id="02c5" class="mg mh je mc b gy mi mj l mk ml">import boto3, login into ‘s3’ via boto.client</span><span id="8e26" class="mg mh je mc b gy mn mj l mk ml">#### create bucket</span><span id="4ef4" class="mg mh je mc b gy mn mj l mk ml">bucket = s3.create_bucket(Bucket=’bucket_name’)<br/>        <br/>#### list bucket</span><span id="cd5f" class="mg mh je mc b gy mn mj l mk ml">bucket_response=s3.list_buckets() #requests a list of buckets<br/>buckets = bucket_response[‘Buckets’] #sets bucket list from Buckets key<br/>print(buckets) <br/>        <br/>#### delete bucket</span><span id="b4e2" class="mg mh je mc b gy mn mj l mk ml">response = s3.delete_bucket(Bucket=‘bucket_to_be_deleted’)<br/>    <br/>#### upload object</span><span id="d300" class="mg mh je mc b gy mn mj l mk ml">s3.upload_file(Filename=’local_file_path’,<br/>               Bucket = ‘bucket_name’,<br/>               Key = ‘object_name’,<br/>               ExtraArgs={‘ACL’:’acl_type’, #sets access control limit type<br/>               ‘ContentType’:’content_type’} #to specify type of content (html, jpg, etc.)<br/>             <br/>#### list objects</span><span id="b9c5" class="mg mh je mc b gy mn mj l mk ml">#obtain many files<br/>response =s3.list_objects(Bucket=’bucket_name’,<br/>                          MaxKeys=2 #maximum number of files to list<br/>                          Prefix=’prefix_of_file_for_search’)<br/>print(response)<br/>#obtain single file<br/>response =s3.head_object(Bucket=’bucket_name’, Key=’file_name’)<br/>        print(response)</span><span id="d0b5" class="mg mh je mc b gy mn mj l mk ml">#### download files</span><span id="d51b" class="mg mh je mc b gy mn mj l mk ml">s3.download_file(Filename=’local_path_to_save_file’,Bucket=’bucket_name’,Key=’file_name’)<br/>        <br/>#### delete file<br/><br/>s3.delete_object(Bucket=’bucket_name’,Key=’file_name’)</span></pre><p id="8783" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">SNS。AWS的简单通知系统。该服务将根据管理员设置的条件向组和用户发送通知。以下是社交网络的一些功能:</p><pre class="lr ls lt lu gt mb mc md me aw mf bi"><span id="0548" class="mg mh je mc b gy mi mj l mk ml">import boto3, login into ‘sns’ via boto.client</span><span id="d566" class="mg mh je mc b gy mn mj l mk ml">#### create topic</span><span id="82cc" class="mg mh je mc b gy mn mj l mk ml">response=sns.create_topic(Name=’topic_name’)[‘TopicArn’] #sets topic and grabs response<br/>        <br/>#### list topics</span><span id="3abf" class="mg mh je mc b gy mn mj l mk ml">response=sns.list_topics()<br/>        <br/>#### delete topics</span><span id="f33b" class="mg mh je mc b gy mn mj l mk ml">sns.delete_topic(TopicArn=’full_topic_arn_value’)<br/>        <br/>#### create subscription</span><span id="3f41" class="mg mh je mc b gy mn mj l mk ml">resp_sms = sns.subscribe(TopicArn = topic_name,  <br/>                         Protocol='delivery_method,<br/>                         Endpoint=’phone_email_etc’)<br/>                            <br/>#### list subscriptions</span><span id="a2ce" class="mg mh je mc b gy mn mj l mk ml">response = sns.list_subscriptions_by_topic(TopicArn = topic_name)<br/>    subs = pd.DataFrame(response['Subscriptions']) #converts list to a df</span><span id="ea0b" class="mg mh je mc b gy mn mj l mk ml">#### delete subscription</span><span id="dee1" class="mg mh je mc b gy mn mj l mk ml">sns.unsubscribe(SubscriptionArn=’full_sub_arn’)<br/>    <br/>#### send messages</span><span id="3515" class="mg mh je mc b gy mn mj l mk ml">##### publish to a topic</span><span id="475d" class="mg mh je mc b gy mn mj l mk ml">response = sns.publish(TopicArn = topic_arn, <br/>                        Message = ‘body of message’ #can use string formatting,<br/>                        Subject = ‘Subject line’)<br/>                        <br/>##### sending single sms</span><span id="dbb5" class="mg mh je mc b gy mn mj l mk ml">response = sns.publish(PhoneNumber = ‘phone_number’,Message = ‘body of message’) #can use string formatting</span></pre><p id="13fd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><em class="mm">领悟</em>。理解是AWS的自然语言处理服务。它可以确定文件是用什么语言编写、翻译和执行情感分析。这些功能如下:</p><pre class="lr ls lt lu gt mb mc md me aw mf bi"><span id="15fd" class="mg mh je mc b gy mi mj l mk ml"><br/>#### text translate</span><span id="bb89" class="mg mh je mc b gy mn mj l mk ml">translate = ‘translate’ via boto.client<br/>response=translate.translate_text(Text=variable,’string’,etc.,<br/>                                  SourceLanguageCode = ‘auto’,<br/>                                  TargetLanguageCode = ’language_to_translate_to’)<br/>                             <br/>#### detecting language</span><span id="a87a" class="mg mh je mc b gy mn mj l mk ml">comprehend = ‘comprehend’ via boto.client<br/>  response=comprehend.detect_dominant_language(Text=variable,’string’,etc.,)<br/>        <br/>#### sentiment analysis</span><span id="b7ae" class="mg mh je mc b gy mn mj l mk ml">comprehend = ‘comprehend’ via boto.client    <br/>    response=comprehend.detect_sentiment(Text=variable,’string’,etc.,LanguageCode=’language’)</span></pre><p id="b156" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">重新认识。这是AWS的图像识别服务。它实际上在检测物体和从图像中提取文本方面做得非常好。以下是一些函数:</p><pre class="lr ls lt lu gt mb mc md me aw mf bi"><span id="6659" class="mg mh je mc b gy mi mj l mk ml">#### object detection</span><span id="4fde" class="mg mh je mc b gy mn mj l mk ml">import boto3, login into ‘s3’ via boto.client<br/>#upload file where images are located<br/>rekog = ‘rekognition’ via boto.client<br/>  response=rekog.detect_labels(Image=’image_name’:<br/>                              {‘Bucket: ’bucket_name’, ’Name’: ’file_name’},<br/>                              MaxLabels = maximum # of objects to detect<br/>                              MinConfidence = set confidence level of classification)<br/>              <br/>#### text detection</span><span id="7c24" class="mg mh je mc b gy mn mj l mk ml">import boto3, login into ‘s3’ via boto.client<br/>#upload file where images are located</span><span id="6781" class="mg mh je mc b gy mn mj l mk ml">rekog = ‘rekognition’ via boto.client</span><span id="df52" class="mg mh je mc b gy mn mj l mk ml">response = rekog.detect_text(Image=’image_name’:<br/>                           {‘Bucket: ’bucket_name’, ’Name’: ’file_name’},<br/>                            MinConfidence = set confidence level of classification)</span></pre><p id="03d8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">显然，有许多服务和更多的功能需要花相当长的时间来总结。这将给您一个良好的开端，并让您有机会通过Python探索AWS服务。像往常一样，这些项目的回购可以通过我的Github在<a class="ae lp" href="https://github.com/Jason-M-Richards/Data-Science-Toolkit" rel="noopener ugc nofollow" target="_blank">https://github.com/Jason-M-Richards/Data-Science-Toolkit</a>获得。</p></div></div>    
</body>
</html>