<html>
<head>
<title>Bye-Bye Beautiful Soup! How I scraped COVID-19 data using Python and ParseHub?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">再见，美丽的汤！我如何使用 Python 和 ParseHub 抓取新冠肺炎数据？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bye-bye-beautiful-soup-how-i-scraped-covid-19-data-using-python-4dd06f930dc0?source=collection_archive---------57-----------------------#2020-06-02">https://towardsdatascience.com/bye-bye-beautiful-soup-how-i-scraped-covid-19-data-using-python-4dd06f930dc0?source=collection_archive---------57-----------------------#2020-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="8634" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">意见</h2><div class=""/><div class=""><h2 id="d6a2" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用美汤刮数据繁琐！</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/bbb653ef61cff0293d2152317b7c6c59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1Je5iQmWUBYYu4w_9prcA.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@kdghantous" rel="noopener ugc nofollow" target="_blank">卡里姆·甘图斯</a>——<a class="ae le" href="http://unsplash.com" rel="noopener ugc nofollow" target="_blank">Unsplash</a>拍摄的照片</p></figure><p id="fd6c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi mb translated"><span class="l mc md me bm mf mg mh mi mj di">在使用 Python 抓取网页时，美汤被认为是语言的最佳伴侣。但是，编写数百行代码来抓取一个表格或一个 web 元素会耗费您所有的精力和时间。</span></p><p id="b549" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这就是为什么我在报废过程中切换到 ParseHub。而且，我在几分钟内就做到了。</p><p id="4fa4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">使用 ParseHub </strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mk"><img src="../Images/f45242f463ef31d3b8d1c731724acdab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_JzVHOcdTLOMQNPH4zmKNQ.png"/></div></div></figure><p id="ebe5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">从 ParseHub 中选择 web 元素需要 5 分钟。在底层，这个工具开始制作 JSON、CSV 文件供我们提取。此外，我们可以使用他们的 API 来访问数据。这种无代码的交互界面使得捕捉 web 元素和提取所需数据变得更加容易。</p><p id="e9a7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">获取所有数据后，您可以转到“获取数据”并运行工作流和提取数据。然后，您会发现将文件保存为 CSV、JSON 或使用 API 访问数据的选项。</p><p id="4496" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> Python </strong></p><p id="de44" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我已经使用 API 访问了来自 ParseHub 的数据。然后用“json”库加载它来读取数据。</p><pre class="kp kq kr ks gt ml mm mn mo aw mp bi"><span id="91d8" class="mq mr iq mm b gy ms mt l mu mv">import json<br/>import requests as rq<br/><br/>class Covid:<br/>    def __init__(self, api_key, project_token) :<br/>        self.api_key = api_key<br/>        self.project_token = project_token<br/><br/>        self.data = self.get_data()<br/><br/><br/>    def get_data(self) :<br/>        response = rq.get(f'https://www.parsehub.com/api/v2/projects/{self.project_token}/last_ready_run/data', params={<br/>            "api_key" : self.api_key })<br/>        data = json.loads(response.text)<br/>        return data</span></pre><p id="e6c6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">加载后，您可以轻松访问所有数据。获取关于冠状病毒的所有信息，如全球总病例数、任何国家的总病例数等。我有构建函数来获得世界上发生的总病例数、总死亡数和总恢复数。除此之外，我还创建了一个函数，返回与每个国家的病例和死亡人数相对应的数据。</p><pre class="kp kq kr ks gt ml mm mn mo aw mp bi"><span id="30dd" class="mq mr iq mm b gy ms mt l mu mv">def get_total_case(self):<br/>    return self.data['total'][0]['value']<br/><br/>def get_total_deaths(self) :<br/>    return self.data['total'][1]['value']<br/><br/>def get_total_recovered(self) :<br/>    return self.data['total'][2]['value']<br/><br/>def country_data(self,country_name):<br/>    data=self.data['country']<br/>    for country in data:<br/>        if country['name'].lower()==country_name.lower():<br/>            return country</span></pre><p id="5561" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您也可以在类中添加其他函数。我只和这些人呆在一起。然后，我创建了该类的一个对象，并调用驻留在其中的方法。</p><pre class="kp kq kr ks gt ml mm mn mo aw mp bi"><span id="49b9" class="mq mr iq mm b gy ms mt l mu mv">data=Covid('Your API Key','Project Token')<br/>data.get_data()<br/>print("Total Cases:",data.get_total_case())<br/>print("Total Deaths:",data.get_total_deaths())<br/>print("Total recoveries:",data.get_total_recovered())<br/><br/>print(data.country_data("India"))</span></pre><p id="b25a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我试着查了印度的 19 个病例和死亡人数。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mw"><img src="../Images/3dbd5b178809ddd2b936a0c1455b71e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7lY5HstNhm0VxoXIy2wwQ.png"/></div></div></figure><p id="bf87" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果我不得不使用美丽的汤，这个任务可能会杀了我一两个小时。但是，这个工具节省了我大量的时间和精力。你也应该用这个工具来尝试你的网络抓取实验。</p><p id="8685" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">注意安全！讨论和反馈，在<a class="ae le" href="https://www.linkedin.com/in/vishal-sharma-239965140/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上找我！</p></div></div>    
</body>
</html>