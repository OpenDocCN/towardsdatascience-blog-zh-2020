<html>
<head>
<title>Build a highly scalable dashboard that runs on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个在Kubernetes上运行的高度可伸缩的仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-highly-scalable-dashboard-that-runs-on-kubernetes-fa2bc6271f1d?source=collection_archive---------7-----------------------#2020-01-18">https://towardsdatascience.com/build-a-highly-scalable-dashboard-that-runs-on-kubernetes-fa2bc6271f1d?source=collection_archive---------7-----------------------#2020-01-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4889" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python，Docker和Google云平台</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/199803a9a5dd63bf577026903d69d07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QcVCl5i1otQE4dNA.jpg"/></div></div></figure><p id="1741" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">目前，一些出版物中提到了许多技术发展。这些关键词通常包括<strong class="kw iu">云</strong>、<strong class="kw iu">开源</strong>、<strong class="kw iu">自动化部署</strong>、<strong class="kw iu">高度可扩展</strong>、<strong class="kw iu">容器化应用</strong>。</p><p id="449c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种背景下，具体的技术如<a class="ae lq" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"> Python </a>、<a class="ae lq" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>、<a class="ae lq" href="https://en.wikipedia.org/wiki/Category:Cloud_platforms" rel="noopener ugc nofollow" target="_blank">云平台</a>和类似<a class="ae lq" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>的容器编排平台<em class="lr"> s </em>经常被命名。</p><p id="51b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了更好地理解提到的技术，我决定基于<a class="ae lq" href="https://www.palletsprojects.com/p/flask/" rel="noopener ugc nofollow" target="_blank"> Flask </a>和<a class="ae lq" href="https://plot.ly/dash/" rel="noopener ugc nofollow" target="_blank"> Dash by Plotly </a>构建一个仪表板，它运行在Google云平台上的Kubernetes集群上，因此具有高度的可伸缩性。</p><p id="88dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你会在GitHub 上的我的资源库中找到完整的代码和相关文件。</p><p id="8dac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章是一个更大项目的一部分。如果你也对可扩展的web抓取感兴趣，或者对我们如何基于Spark用自然语言处理准备数据，在Docker中打包代码并通过Kubernetes部署感兴趣，你会在文章末尾找到相应的链接。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="78ad" class="lz ma it bd mb mc md dn me mf mg dp mh ld mi mj mk lh ml mm mn ll mo mp mq mr bi translated">架构概述</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/5f0fa8be86f831dbc22b4d7bf6606dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SrBnI4AFFB_FtFAW3JH5DA.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">Kubernetes上可扩展仪表板的架构</p></figure><p id="429e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">数据存储在BigQuery表中，由python脚本读取，该脚本在Docker容器中执行。Kubernetes集群由一个节点组成，该节点包含3个执行应用程序逻辑(dashboard-app)的pod。为了能够从web访问dashboard-app，我们创建了一个公开部署的服务对象。我们在当前集群中提供一个负载平衡器，并为服务分配一个固定的外部IP地址。因此，最终用户可以通过互联网浏览器使用仪表板。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="a9ed" class="lz ma it bd mb mc md dn me mf mg dp mh ld mi mj mk lh ml mm mn ll mo mp mq mr bi translated"><strong class="ak">仪表板的实施</strong></h2><p id="b83a" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">在我描述Kubernetes中仪表板的部署过程之前，我想向您简要介绍一下仪表板的实现。如果您对应用程序本身不感兴趣，可以跳过这一部分，专注于Kubernetes中的部署过程。</p><p id="362e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仪表板本身是在Flask和Dash by Plotly的基础上构建的。</p><p id="1d5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Flask是用Python编写的web框架，它提供了<a class="ae lq" href="https://jinja.palletsprojects.com/en/2.10.x/" rel="noopener ugc nofollow" target="_blank"> Jinja2 </a>、模板引擎和<a class="ae lq" href="https://pypi.org/project/Werkzeug/" rel="noopener ugc nofollow" target="_blank"> Werkzeug </a>作为构建Web服务器网关接口(WSGI)应用程序的库。Flask的核心功能保持简单，优点是易于集成额外的库。</p><p id="e585" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Dash是一个开源Python框架，允许您创建最先进的仪表板。他们提供了许多<a class="ae lq" href="https://dash-gallery.plotly.host/Portal/" rel="noopener ugc nofollow" target="_blank">演示应用</a>，你可以用它们作为自己实现的灵感。</p><p id="9765" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">他们提供了许多鼓舞人心的想法来实现它们。</p><p id="0fc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Dash为<a class="ae lq" href="https://dash.plot.ly/integrating-dash" rel="noopener ugc nofollow" target="_blank">后端</a>使用了Flask web框架。这使得在现有Flask应用程序的特定路径上嵌入Dash应用程序变得相当简单。在这个仪表盘中，Dash app挂载在Flask app的“/dash”路由(<a class="ae lq" href="http://localhost:8080/dash" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/Dash</a>)下。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h2 id="4608" class="lz ma it bd mb mc md dn me mf mg dp mh ld mi mj mk lh ml mm mn ll mo mp mq mr bi translated"><strong class="ak">Kubernetes中的部署流程</strong></h2><p id="244b" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">因为这是我在这个环境中的第一次实现，所以我将一步步地向您介绍我所做的事情。我希望这些解释能帮助你在这个话题上有一个好的开始！开始了…:):</p><ol class=""><li id="7575" class="nc nd it kw b kx ky la lb ld ne lh nf ll ng lp nh ni nj nk bi translated">首先，<strong class="kw iu">我向Google云平台</strong>申请了免费试用订阅。(也可以使用运行Kubernetes的任何其他平台)</li><li id="e72e" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated"><strong class="kw iu">创建一个Kubernetes集群</strong> <br/>进入“Kubernetes引擎”→“创建集群”→选择“您的第一个集群”</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/2f3e8e2879e59ecc6b1539b67b2a5eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pq1P9EOEHTXgvlmsy_Z_iw.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">创建一个Kubernetes集群</p></figure><p id="23f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将参数中的<strong class="kw iu">名称</strong>更改为<strong class="kw iu"> dashboard-web </strong>，可以应用其余设置。然后点击<strong class="kw iu">创建</strong>来构建名为<strong class="kw iu"> dashboard-web </strong>的Kubernetes集群。</p><p id="7ae0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在创建了一个具有一个<a class="ae lq" href="https://kubernetes.io/docs/concepts/architecture/nodes/" rel="noopener ugc nofollow" target="_blank">节点</a>的集群，在其上可以创建多达110个<a class="ae lq" href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" rel="noopener ugc nofollow" target="_blank">pod</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/69ce6193ea489dad78ecce41cd942789.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*3UfUzX1O5W_dmxp9Y2TWZQ.png"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">通过REST或命令行创建Kubernetes集群</p></figure><p id="7958" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">提示:</strong>您所做的集群配置以脚本的形式存储和提供，可以通过REST-API或命令行来执行。因此，可以自动创建集群。下面是一个可以在云Shell中使用的命令行代码示例:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="48ba" class="lz ma it nt b gy nx ny l nz oa">gcloud beta container --project "&lt;YOUR-PROJECT&gt;" clusters create "dashboard-web" --zone "us-central1-a" --no-enable-basic-auth --cluster-version "1.15.4-gke.22" --machine-type "g1-small" --image-type "COS" --disk-type "pd-standard" --disk-size "30" --scopes "https://www.googleapis.com/auth/devstorage.read_only","https://www.googleapis.com/auth/logging.write","https://www.googleapis.com/auth/monitoring","https://www.googleapis.com/auth/servicecontrol","https://www.googleapis.com/auth/service.management.readonly","https://www.googleapis.com/auth/trace.append" --num-nodes "1" --no-enable-cloud-logging --no-enable-cloud-monitoring --enable-ip-alias --network "projects/&lt;YOUR-PROJECT&gt;/global/networks/default" --subnetwork "projects/&lt;YOUR-PROJECT&gt;/regions/us-central1/subnetworks/default" --default-max-pods-per-node "110" --addons HorizontalPodAutoscaling,HttpLoadBalancing --enable-autoupgrade --enable-autorepair</span></pre><p id="5b8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">3.<strong class="kw iu">容器化一个Python应用</strong> <br/>要获得dashboard——它是用Python开发的——在docker容器中运行，需要3个文件:</p><ul class=""><li id="e7e6" class="nc nd it kw b kx ky la lb ld ne lh nf ll ng lp ob ni nj nk bi translated"><a class="ae lq" href="https://github.com/ArnoldLutsch/master/blob/master/dashboard/index.py" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> index.py </strong> </a>(包含仪表盘python代码的文件)</li><li id="d62f" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp ob ni nj nk bi translated"><a class="ae lq" href="https://github.com/ArnoldLutsch/master/blob/master/dashboard/Dockerfile" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">docker file</strong></a><em class="lr">(</em>通过读取该文件中的指令自动构建图像)</li><li id="070d" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp ob ni nj nk bi translated"><a class="ae lq" href="https://github.com/ArnoldLutsch/master/blob/master/dashboard/requirements.txt" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">requirements . txt</strong></a><strong class="kw iu"><em class="lr"/></strong>(包含应用需要运行的依赖项列表)</li></ul><p id="f4bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">4.<strong class="kw iu">创建一个Docker镜像，推送到google容器注册表<br/> </strong>启动云壳，然后启动编辑器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/a50f053595d23af00f98f8b8c737e01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*V9ZeoeLxW-5cOeblguZDxQ.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">云壳编辑器</p></figure><p id="ba6f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我已经在云外壳提供的浏览器中创建了我的仪表板结构。你会在我的<a class="ae lq" href="https://github.com/ArnoldLutsch/master/tree/master/dashboard" rel="noopener ugc nofollow" target="_blank"> git库</a>中找到完整的代码。</p><p id="60cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将文件复制到云外壳编辑器后，可以创建Docker映像。为此，您必须转到<strong class="kw iu">仪表板</strong>目录。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="f5c9" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">cd dashboard</strong></span></pre><p id="498f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从这个目录中，您可以运行bash脚本<a class="ae lq" href="https://github.com/ArnoldLutsch/master/blob/master/dashboard/BuildPushDockerImage.sh" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">buildpushdockerimage . sh</strong></a>，</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="84d0" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">bash BuildPushDockerImage.sh</strong></span></pre><p id="2eaf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它依次执行以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">构建Docker映像并将其推送到Google容器注册表</p></figure><p id="1ba6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Docker映像现在是基于3个文件(index.py、Dockerfile、requirements.txt)构建的，可以在Google容器注册表中找到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/3ad3647ede7523917ba8dbb46e81afb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-whyloKSuWfm4OqndyyWw.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">谷歌容器注册</p></figure><p id="baa3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">5.<strong class="kw iu">创建一个部署，该部署创建一个复制集以显示三个“dashboard-app”窗格</strong></p><p id="2bbb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要开始部署，可以执行以下bash脚本:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="7ea1" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">bash DeployDashboardPod.sh</strong></span></pre><p id="2d74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它依次执行以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">部署三个吊舱</p></figure><p id="8750" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一步是确保我们被允许为我们的项目运行<a class="ae lq" href="https://kubernetes.io/docs/reference/kubectl/overview/" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">ku bectl</strong></a><strong class="kw iu"/>。Kubectl是一个命令行界面，用于对我们的Kubernetes集群运行命令。</p><p id="e160" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">之后，我们使用<strong class="kw iu"> DashboardPod.yaml </strong>模板创建我们的“dashboard-app”窗格。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">部署仪表板应用程序以调出3个窗格</p></figure><p id="7517" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">创建窗格后，我们可以使用以下命令详细检查它们:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="32b7" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">kubectl get pods -o wide</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/3674d96a5b7b08be5155cf6195292710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLQpa4GBXfRap5FnEHdjxA.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">命令的输出</p></figure><p id="8a89" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">部署中有3个pod(Status = container creating)，所以让我们再等几秒钟，然后再次执行命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/68461bd9eef614dea05c705f98b2fcb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_AUIECl-pSYegqG3r4U6A.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">再次执行该命令后的输出</p></figure><p id="196d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们看到容器现在处于就绪状态(1/1)和状态=正在运行。此外，它们都被分配了一个内部IP地址。如上所述，我们可以在这个节点上运行的最大pod数量是110，这意味着如果仪表板上的负载增加，我们可以在这个节点上再创建107个容器。如果我们需要更多的容器，我们可以订购一个包含更多节点的更大的集群，每个集群运行110个容器。这种方法使我们有可能实现一个高度可伸缩的环境。</p><p id="3d89" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">6.<strong class="kw iu">创建一个暴露外部IP地址的服务对象，以允许通过互联网浏览器访问仪表板</strong></p><p id="972e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了能够从web访问dashboard-app，我们创建了一个公开部署的服务对象。“type=LoadBalancer”在当前集群中创建一个负载平衡器，并为该服务分配一个固定的外部IP地址。该服务在端口80上运行，并连接到端口8080上的容器。</p><p id="3efc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要公开部署，可以执行以下bash脚本:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="53a1" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">CreateExtWebService.sh</strong></span></pre><p id="f744" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它执行以下命令:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="ae27" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">显示有关仪表板应用程序服务的信息:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="35c1" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">kubectl get service dashboard-app</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/1eb1a56b04baceb5b6d397362bf26d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*AS3lygQHIrTj4zSTKoNqFg.png"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">命令的输出</p></figure><p id="3fc6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在可以通过外部IP地址访问“dashboard-app”服务。</p><p id="cc92" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要获得更多服务信息，您可以执行以下命令:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="9971" class="lz ma it nt b gy nx ny l nz oa"><strong class="nt iu">kubectl describe services dashboard-app</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/21ae7726e0ba030f9c894bc35646052e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*XK2eETS4trP5NjOfB3Ry7g.png"/></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">命令的输出</p></figure><p id="9b59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">记下dashboard-app服务公开的外部IP地址(<code class="fe ok ol om nt b">LoadBalancer Ingress</code>)。在本例中，外部IP地址是35.202.15.18。此外，您可以看到该服务有几个端点:10.44.0.10:8080，10.44.0.11:8080，10.44.0.12:8080。这些是运行<strong class="kw iu">仪表板应用</strong>的pod的内部地址。</p><p id="85b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以使用外部IP地址(<code class="fe ok ol om nt b">LoadBalancer Ingress</code>)访问<strong class="kw iu"> dashboard-app </strong>应用。由于应用程序运行在“/dash”目录中，因此这种情况下的调用如下:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="4a5c" class="lz ma it nt b gy nx ny l nz oa">http://&lt;LoadBalancer Ingress IP&gt;/dash/</span></pre><p id="72d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仪表板现在显示在互联网浏览器中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/933de21978c2cb7a4257b79c4267cdd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMb6XK96hTHJ0mhqLR9Cfg.png"/></div></div><p class="mt mu gj gh gi mv mw bd b be z dk translated">仪表板-通过外部IP调用的应用程序</p></figure><p id="0a56" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仪表板分为四个区域:</p><ul class=""><li id="dfc4" class="nc nd it kw b kx ky la lb ld ne lh nf ll ng lp ob ni nj nk bi translated"><strong class="kw iu">热门词汇(文章):</strong>对应<a class="ae lq" href="https://towardsdatascience.com/" rel="noopener" target="_blank">到数据科学</a>文章的“前10”或“前100”词汇显示为词云。</li><li id="bd3f" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp ob ni nj nk bi translated"><strong class="kw iu">作者:</strong>提供了一个包含所有已爬网作者的下拉列表。</li><li id="e05f" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp ob ni nj nk bi translated"><strong class="kw iu">来自…的热门文章:</strong>根据所选作者，将显示热门文章及其元数据(点击次数、阅读时间等)。如果没有选择作者，则显示所有作者的“前10篇”文章。</li><li id="af26" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp ob ni nj nk bi translated"><strong class="kw iu">数据科学趋势(标签):</strong>显示文章中使用的标签，以便您可以随着时间的推移分析哪些术语在何时被频繁使用，以及是否可以从中得出趋势。</li></ul></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="9107" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">提示:</strong>云的优势在于，只要你使用它，你就只需要为基础设施付费。在一次成功的测试运行之后，为了节省成本，我删除了我的“dashboard-web”集群；)</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="8254" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">结论:</strong> <br/>这样一来，我们现在就有了一个在云平台上运行的仪表盘，它是用Python (Flask &amp; Dash)开发的，打包在Docker中，部署在Kubernetes上。整个过程已经公开，可以通过网络浏览器浏览。</p><p id="c370" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我觉得很棒，希望你也是:)！</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="5155" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">相关文章:</strong></p><blockquote class="oo op oq"><p id="7c6e" class="ku kv lr kw b kx ky ju kz la lb jx lc or le lf lg os li lj lk ot lm ln lo lp im bi translated">如果你想知道我们如何从<a class="ae lq" href="https://towardsdatascience.com/" rel="noopener" target="_blank">向数据科学</a>爬取数据，那么查看Philipp Postels的文章:<a class="ae lq" href="https://medium.com/@Postiii/9c0c23e3ebe5" rel="noopener">通过使用python </a>用Selenium为向数据科学爬取构建一个可伸缩的网络爬虫</p><p id="67e4" class="ku kv lr kw b kx ky ju kz la lb jx lc or le lf lg os li lj lk ot lm ln lo lp im bi translated">如果你想知道我们如何使用基于Spark的自然语言处理来准备数据，如何在Docker中打包代码，如何通过Kubernetes部署它，请查看Jürgen Schmidl的文章:<a class="ae lq" href="https://medium.com/@js.schmidl/9dd6ef47c31e" rel="noopener">Spark in Docker in Kubernetes:A practical approach for scalable NLP</a></p></blockquote></div></div>    
</body>
</html>