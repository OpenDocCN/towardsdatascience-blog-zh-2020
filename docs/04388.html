<html>
<head>
<title>Web-based 3D Data Visualization with CityGML City Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用CityGML城市模型实现基于Web的三维数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-based-3d-data-visualization-with-ciytgml-city-models-f0796b37e9f5?source=collection_archive---------26-----------------------#2020-04-20">https://towardsdatascience.com/web-based-3d-data-visualization-with-ciytgml-city-models-f0796b37e9f5?source=collection_archive---------26-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2cb0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">3D数据可视化基本指南</h2><div class=""/><div class=""><h2 id="c7b8" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">分步指南-可视化纽约市曼哈顿的3D城市模型</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/559378e0a31644f5db61a6df03be3761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WpnvF1Td2hYc6vMSnTIU8g.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">插图作者:金彩云</p></figure><p id="7d4e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">在</span>这篇文章中，我将向您展示一种在基于web的应用程序上使用<strong class="lk jd"> Node.js </strong>和<strong class="lk jd">铯. js </strong> web globe库可视化<strong class="lk jd"> CityGML </strong> 3D城市模型的简单方法，并以<strong class="lk jd">曼哈顿</strong>、<strong class="lk jd">纽约市区域</strong>为例。在本简短教程结束时，您将能够构建一个看起来或多或少像这样的web应用程序:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mn"><img src="../Images/14d8842a745e540a9a93ce8b2943024d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wpBNefX1A7GFiko12SRibw.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">关于铯应用的纽约曼哈顿3D城市模型(现场演示:<a class="ae lh" href="https://demos.cesium.com/NewYork/" rel="noopener ugc nofollow" target="_blank">铯</a></p></figure><h1 id="60aa" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">CityGML简介</h1><p id="6e90" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">在我们开始之前，我想向您介绍一下<strong class="lk jd"> CityGML </strong> 3D城市模型。<strong class="lk jd"> CityGML </strong>是一种开放的标准化数据模型和交换格式，用于存储OGC(开放地理空间联盟)推出的城市和景观的数字3D模型。CityGML 的特殊之处在于它是一个语义城市模型，包含属性和几何数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/da8a4ff374dd71aab22f7c928991a78e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/1*3oobViHtf8EUFZ_DLQyhkA.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">CityGML德国慕尼黑带有属性数据的语义3D城市模型。(现场演示:<a class="ae lh" href="https://deutschland.virtualcitymap.de/" rel="noopener ugc nofollow" target="_blank">3D德国</a></p></figure><p id="4a66" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">CityGML模型的几何形状和属性允许各种模拟建筑能源需求、光伏潜力等等。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/2d7fc49163f1150956e06fedba05fd64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m3ghZ-oQvbs-ov63.jpg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用CityGML对德国路德维希堡—格伦布尔的建筑能源需求进行建模的示例(能源建模使用<a class="ae lh" href="http://www.simstadt.eu/en/examples.jsp" rel="noopener ugc nofollow" target="_blank"> SimStadt2 </a>软件进行计算)</p></figure><p id="cb0c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">好消息！！世界上有几个城市有自己的CityGML，其中许多城市都以开源数据集的形式提供了它们的CityGML。</p><h1 id="731a" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">从CityGML构建基于网络的3D应用程序</h1><h2 id="937f" class="nn mp it bd mq no np dn mu nq nr dp my lr ns nt na lv nu nv nc lz nw nx ne iz bi translated">1.准备3D数据集</h2><p id="3878" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">纽约市DoITT以CityGML格式发布了纽约市的语义3D城市模型，包括纽约市的每一栋建筑。在这里随意下载<a class="ae lh" href="https://www1.nyc.gov/site/doitt/initiatives/3d-building.page" rel="noopener ugc nofollow" target="_blank">。从这个数据集中，我们将只关注曼哈顿地区(<em class="ny">DA12 _ 3D _ Buildings _ merged . GML</em>~ 48，000栋建筑)，并使用它来创建3D web应用程序。</a></p><p id="f277" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然CityGML适合交换和存储3D建筑模型，但它不能直接在web上可视化。因为我们将在我们的web应用程序中使用铯，所以我们需要将CityGML转换为3D Tiles格式。FME工作台是我所知道的最好的工具，对学生和开源研究项目也是免费的。</p><p id="62f8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">或者，你可以跳过这一步，从下面我的GitHub项目中下载已经转换好的3D图片。</p><h2 id="6096" class="nn mp it bd mq no np dn mu nq nr dp my lr ns nt na lv nu nv nc lz nw nx ne iz bi translated">2.设置Web服务器</h2><p id="013b" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">对于web服务器，使用以下依赖项创建一个项目文件夹和Node.js项目:</p><pre class="ks kt ku kv gt nz oa ob oc aw od bi"><span id="8dde" class="nn mp it oa b gy oe of l og oh">$ <strong class="oa jd">npm init</strong> #initiate node project<br/>$ <strong class="oa jd">npm install express </strong>#install express framework<br/>$ <strong class="oa jd">npm install compression </strong>#install compression </span></pre><p id="652c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，用Express为Node.js创建一个简单的<em class="ny"> server.js </em>文件。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有Express Framework的简单Node.js示例</p></figure><p id="97f0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您可以通过<code class="fe ok ol om oa b">$ node server.js</code>命令来试运行您的服务器。</p><h2 id="1169" class="nn mp it bd mq no np dn mu nq nr dp my lr ns nt na lv nu nv nc lz nw nx ne iz bi translated">3.使用CesiumJS的3D应用程序</h2><p id="6d44" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">我们将使用CesiumJS来渲染我们的3D建筑模型。这是一个开源的JavaScript库，用于web浏览器中的3D地球仪和2D地图。</p><p id="6446" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们在<code class="fe ok ol om oa b">public</code>文件夹中创建一个<em class="ny">index.html</em>文件，并放置以下代码:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">index.html(用于铯3D纽约应用)</p></figure><p id="9530" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个HTML基本上从cesium.com加载铯依赖项，并创建一个铯容器。变量<code class="fe ok ol om oa b">tileset</code>通常指的是3D瓦片数据集。只需在此处用您的本地零件替换<code class="fe ok ol om oa b">url</code>值即可转换为3D图块。搞定了。</p><p id="4dbc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从这里，当你运行<code class="fe ok ol om oa b">$ node server.js</code>并前往<code class="fe ok ol om oa b">http://localhost:3000</code>，你已经可以看到曼哈顿的3D模型了。如果你想要一些建筑模型的颜色/样式，可以通过tileset样式添加。下面的示例脚本显示了如何基于建筑高度设置建筑模型的样式。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oi oj l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">colorbyHeight.js(按建筑高度设置3D图块样式)</p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/da2646cfaab377b9251bdc43c016ec7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/1*0eb6bOVWzVr2LNu8pwOcMg.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">耶！我们对纽约城市模型的最终应用</p></figure><p id="b81d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">差不多就是这样！我为挑选功能添加了一些代码，如果你感兴趣，可以从我的GitHub这里查看全部代码:</p><div class="on oo gp gr op oq"><a href="https://github.com/JoeThunyathep/NYC3D_CesiumJS" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">JoeThunyathep/NYC3D_CesiumJS</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">纽约市三维城市模型。在…上创建一个帐户，为JoeThunyathep/NYC3D_CesiumJS的发展做出贡献</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">github.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe lb oq"/></div></div></a></div></div><div class="ab cl pf pg hx ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="im in io ip iq"><h1 id="790b" class="mo mp it bd mq mr pm mt mu mv pn mx my ki po kj na kl pp km nc ko pq kp ne nf bi translated"><strong class="ak">奖金</strong></h1><p id="8512" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">如果你想继续开发这个应用程序，你可以用铯和3D城市模型做更多很酷的事情。请在此查看一些资源:</p><ul class=""><li id="cbdd" class="pr ps it lk b ll lm lo lp lr pt lv pu lz pv md pw px py pz bi translated"><strong class="lk jd"> CesiumJS </strong> API文档:<a class="ae lh" href="https://cesium.com/docs/cesiumjs-ref-doc/" rel="noopener ugc nofollow" target="_blank">链接</a> /一些好看的展示:<a class="ae lh" href="https://www.cesium.com/blog/categories/userstories/" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="fac5" class="pr ps it lk b ll qa lo qb lr qc lv qd lz qe md pw px py pz bi translated">掌握你的<strong class="lk jd">铯式表情</strong>文档:<a class="ae lh" href="https://github.com/CesiumGS/3d-tiles/tree/master/specification/Styling" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="4ff5" class="pr ps it lk b ll qa lo qb lr qc lv qd lz qe md pw px py pz bi translated"><strong class="lk jd">开放CityGML数据</strong> <br/> -美国纽约市所有建筑的CityGML【LOD 2】(<a class="ae lh" href="https://www1.nyc.gov/site/doitt/initiatives/3d-building.page" rel="noopener ugc nofollow" target="_blank">链接</a> ) <br/> -美国所有建筑的City GML！！！！【LOD 1】(<a class="ae lh" href="https://github.com/opencitymodel/opencitymodel" rel="noopener ugc nofollow" target="_blank">链接</a> ) <br/> -德国北莱茵-威斯特伐利亚州所有建筑的CityGML【LOD 1，2】(<a class="ae lh" href="https://www.opengeodata.nrw.de/produkte/geobasis/3dg/" rel="noopener ugc nofollow" target="_blank">链接</a>)<br/>-TU-Delft多个城市开放CityGML数据列表(<a class="ae lh" href="https://3d.bk.tudelft.nl/opendata/opencities/" rel="noopener ugc nofollow" target="_blank">链接</a> ) <br/>)【无city GML，无忧。查看FME的《城市地图指南》</li><li id="9b31" class="pr ps it lk b ll qa lo qb lr qc lv qd lz qe md pw px py pz bi translated"><strong class="lk jd"> 3DCityDB </strong>:开源地理数据库，用于存储、表示和管理虚拟3D城市模型:(<a class="ae lh" href="https://www.3dcitydb.org/3dcitydb/" rel="noopener ugc nofollow" target="_blank">链接</a>)</li><li id="ee6f" class="pr ps it lk b ll qa lo qb lr qc lv qd lz qe md pw px py pz bi translated">更多关于OGC<strong class="lk jd">city GML</strong>的信息(<a class="ae lh" href="https://www.ogc.org/standards/citygml" rel="noopener ugc nofollow" target="_blank">链接</a>)</li><li id="ed06" class="pr ps it lk b ll qa lo qb lr qc lv qd lz qe md pw px py pz bi translated"><strong class="lk jd">真实世界应用</strong>:请查看VCS公司提供的使用铯+ CityGML( <a class="ae lh" href="https://www.virtualcitysystems.de/en/" rel="noopener ugc nofollow" target="_blank">链接</a>)的智能Cites解决方案</li></ul></div><div class="ab cl pf pg hx ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="im in io ip iq"><h1 id="7e2d" class="mo mp it bd mq mr pm mt mu mv pn mx my ki po kj na kl pp km nc ko pq kp ne nf bi translated">作者消息:</h1><p id="2fad" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">总的来说，本教程涵盖了使用铯. js和3D城市模型创建3D基于web的应用程序的基础。我希望你喜欢这篇文章，并发现它对你的日常工作或项目有用。</p><p id="fe8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae lh" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">安全<strong class="lk jd">健康</strong>健康<strong class="lk jd">！💪</strong></p><p id="2645" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读。📚</strong></p></div></div>    
</body>
</html>