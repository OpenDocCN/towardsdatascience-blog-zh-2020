<html>
<head>
<title>Statistical techniques for anomaly detection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常检测的统计技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/statistical-techniques-for-anomaly-detection-6ac89e32d17a?source=collection_archive---------11-----------------------#2020-09-15">https://towardsdatascience.com/statistical-techniques-for-anomaly-detection-6ac89e32d17a?source=collection_archive---------11-----------------------#2020-09-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/60a1ebaa48e346d8e510eb1d8ca67dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CXh2jvPV0Y75ZDmQ"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">克莱门斯·弗兰卡在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="f561" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">快速评估异常和异常值的五种统计工具</h2></div></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="4c2d" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">异常和欺诈检测是一个价值数十亿美元的行业。根据<a class="ae jg" href="https://nilsonreport.com/upload/content_promo/The_Nilson_Report_10-17-2016.pdf" rel="noopener ugc nofollow" target="_blank">尼尔森报告</a>，仅 2010 年全球信用卡欺诈金额就高达 76 亿美元。在英国，2018 年欺诈性信用卡交易损失估计超过 10 亿美元。为了应对这些类型的财务损失，我们使用了大量资源来识别每个行业中的欺诈和异常情况。</p><p id="932b" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在数据科学中，“离群值”、“异常”和“欺诈”通常是同义词，但也有细微的区别。“异常值”通常指的是从人群中脱颖而出的数据点。然而，当这种异常值完全出乎意料且无法解释时，它就成了异常值。也就是说，所有异常都是异常值，但不一定所有异常值都是异常值。然而，在本文中，我将这些术语互换使用。</p><p id="8f84" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">理解和检测异常值之所以重要，原因有很多。作为一名数据科学家，当我们准备数据时，我们会非常小心地了解是否有任何数据点无法解释，这些数据点可能输入错误。有时，我们会过滤完全合法的异常数据点，并删除它们以确保更好的模型性能。</p><p id="46d0" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">异常检测也有巨大的工业应用。信用卡欺诈检测是引用最多的一种，但在许多其他情况下，异常检测是开展业务的重要组成部分，如检测网络入侵、识别仪器故障、检测肿瘤细胞等。</p><p id="222b" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">从简单的统计技术到复杂的机器学习算法，一系列工具和技术被用于检测异常值和异常值，这取决于数据的复杂性和所需的复杂度。本文的目的是总结一些简单而强大的统计技术，可以很容易地用于异常值的初步筛选。虽然复杂的算法是不可避免的，但有时简单的技术就足够了。</p><p id="92c7" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">下面是五种统计技术的入门。</p></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><h1 id="e5c3" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">1) Z 分数</h1><p id="9671" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">Z-score 可能是最简单的一种，但对于异常检测却是一种有用的统计方法。在统计分布中，Z 得分告诉您给定数据点与人群中其他数据点的距离。从技术上来说，Z-score 衡量一个给定的观察值距离平均值有多少标准差。Z 值为 2 意味着数据点距离平均值有 2 个标准偏差。</p><p id="853f" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">要计算 Z 得分，您只需要两个参数:均值和标准差，它们在任何编程语言中都很容易获得(例如在 Python 中，您只需将函数<code class="fe my mz na nb b">describe()</code>应用于数据框)。</p><p id="4982" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">一旦获得这两个参数，任何给定数据点的 Z 得分都可以使用以下简单公式计算:</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/96f69d9aee3ede9718a7d554cd1e1312.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*lkJrkq8kgyVMXGodHLo-cg.png"/></div></figure><h1 id="52cb" class="mb mc jj bd md me nh mg mh mi ni mk ml kp nj kq mn ks nk kt mp kv nl kw mr ms bi translated">2)修改的 Z 分数</h1><p id="bad9" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">使用均值和标准差很容易计算 z 得分，但它有自己的局限性。在一些情况下，这不是一种理想的技术，例如:</p><ul class=""><li id="fe97" class="nm nn jj lh b li lj ll lm lo no ls np lw nq ma nr ns nt nu bi translated">数据不是正态分布的</li><li id="5533" class="nm nn jj lh b li nv ll nw lo nx ls ny lw nz ma nr ns nt nu bi translated">数据/样本量小</li></ul><p id="4e0b" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">除此之外，Z-score 对极值也很敏感(因为它的一个参数-均值-本身对极值也很敏感)，因此它可能无法适当地筛选异常值。</p><p id="663c" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">为了克服这些缺点，对标准 Z 分数进行了一些修改:</p><ul class=""><li id="5c7d" class="nm nn jj lh b li lj ll lm lo no ls np lw nq ma nr ns nt nu bi translated">使用中值代替平均值作为参数，因为中值对异常值不太敏感</li><li id="27c8" class="nm nn jj lh b li nv ll nw lo nx ls ny lw nz ma nr ns nt nu bi translated">中位数绝对偏差(MAD)用于代替标准偏差</li><li id="6584" class="nm nn jj lh b li nv ll nw lo nx ls ny lw nz ma nr ns nt nu bi translated">这些值乘以一个常数，使其约等于 SD(对于正态分布数据，MAD 约等于 0.6745*SD)</li></ul><p id="12a1" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">将它们放在一起，等式如下所示:</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/9c174743509f61ce88c5514b8052cbfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*eYq1LesvqlLuzMUpPoIRCA.png"/></div></figure><h1 id="e76e" class="mb mc jj bd md me nh mg mh mi ni mk ml kp nj kq mn ks nk kt mp kv nl kw mr ms bi translated">3)四分位距(IQR)</h1><p id="10b7" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">如果你从小到大排列数据，中点称为<em class="ob">中位数</em>。中位数将数据分成两半。这两半的中点被称为四分位数<em class="ob">T4。</em></p><p id="bb98" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">换句话说，你可以将数据分成三个四分位数——第一、第二和第三(第二个四分位数有一个名字——中位数<em class="ob">)</em>。所以四分位数间距是第一和第三个四分位数之间的距离。使用 IQR 的异常检测背后的理论是，如果一个数据点离第一和第三四分位数太远，它可能是一个异常值。</p><p id="887d" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">IQR 可以单独用于异常值检测，但下面的箱线图使用相同的算法理论，可能比 IQR 更直观。</p><h1 id="c3c9" class="mb mc jj bd md me nh mg mh mi ni mk ml kp nj kq mn ks nk kt mp kv nl kw mr ms bi translated">4)箱线图</h1><p id="75de" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">箱线图更好地展示了 IQR，但也提供了额外的信息。</p><p id="d36d" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在下面的盒状图中，盒子的长度是 IQR，最小和最大值由胡须表示。胡须通常延伸到盒子两侧的 1.5*IQR 距离。因此，这些 1.5*IQR 值之外的所有数据点都被标记为异常值。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/8bb59f779c9ec1a06b1628169f678a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jOdKxJY8MhFTL4bX.png"/></div></div></figure><p id="d113" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我在<a class="ae jg" rel="noopener" target="_blank" href="/boxplot-for-anomaly-detection-9eac783382fd"> boxplot 上写了一篇关于离群点检测的独立文章</a>，其中有一个例子和一小段 Python 代码，你可能想看看。</p><h1 id="2310" class="mb mc jj bd md me nh mg mh mi ni mk ml kp nj kq mn ks nk kt mp kv nl kw mr ms bi translated">5)直方图</h1><p id="2df4" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">异常值检测的最后一个统计工具是分布图或直方图。这是另一种以可视化和程序化的方式跟踪异常值的方法。例如，请看下图:</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/055a6c49d8efe095e6c6225fc211ec0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*iNlNHm5wjQn15LpbYPTPhw.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">分布数据以检测潜在的异常值</p></figure><p id="94b9" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">仅从这个分布图就可以很清楚地看出，虽然数据集中的大多数值都被分组在一起，但仍有相当多的值似乎与众不同。因此，您可以过滤这些值，并检查这些值是否异常。</p><p id="0cf4" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">但是，如果数据的分布是倾斜的，有时您可能需要应用数据转换技术(如对数或平方根)。例如，如果我们将对数应用于上述相同的数据，数据就变成近似正态分布，并讲述关于异常值的不同故事。</p><figure class="nd ne nf ng gt iv gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/c5a614952ab2a79433437d95da014561.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*zQpoHkBUjysHMJO_ngPtJQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">记录转换后的数据以过滤潜在的异常值</p></figure><h2 id="6907" class="of mc jj bd md og oh dn mh oi oj dp ml lo ok ol mn ls om on mp lw oo op mr oq bi translated">摘要</h2><p id="4a67" class="pw-post-body-paragraph lf lg jj lh b li mt kk lk ll mu kn ln lo mv lq lr ls mw lu lv lw mx ly lz ma im bi translated">本文的目的是介绍五种简单的统计技术——z 得分、修正的 z 得分、IQR、箱线图和直方图，它们通常在数据科学中用作异常值/异常检测的粗过滤器。有时这些简单的技术对于异常检测来说已经足够好了，但有时我们需要转向更复杂的机器学习算法——kNN、SVM、DBSCAN 等。—我以后文章的一个主题(敬请关注！).</p><p id="9954" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">如果你喜欢我的文章，欢迎在<a class="ae jg" href="https://twitter.com/DataEnthus" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</p></div></div>    
</body>
</html>