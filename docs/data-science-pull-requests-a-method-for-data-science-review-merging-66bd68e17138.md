# 数据科学拉请求—一种数据科学审查和合并的方法

> 原文：<https://towardsdatascience.com/data-science-pull-requests-a-method-for-data-science-review-merging-66bd68e17138?source=collection_archive---------57----------------------->

![](img/d0e6146f6085eb5ada40fdfb1e220009.png)

马库斯·温克勒在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

## MLOps 和开放源代码数据科学向前迈进了一步

![](img/ab7f48aecc46f8d00374c2bc6598d147.png)

数据科学拉请求。资料来源: [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr)

今天，我很高兴在 [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr) 上介绍数据科学拉请求(DS PRs)，这是为数据科学(DS)工作流重新设计的拉请求(PRs)。这项新功能开启了数据科学团队的标准审查流程，使他们能够跨不同分支合并数据，并接受跨分支的数据贡献。这为数据科学组织中的团队提供了更好的协作体验，并实现了真正的开源数据科学(OSDS)项目。

更多详情，请继续阅读…

# 介绍

当我们创建 DAGsHub 时，我们专注于使数据科学协作成为可能。具体来说，我们深深地*关心*和*依赖*开源软件(OSS)，我们开始着手一项使命，让 OSDS 像今天的 OSS 一样普及。

这意味着我们关心数据科学项目和实验的 ***可发现性*** 、实验环境的*、实验结果的*，最后，代码、数据和模型的 ***贡献性*** 被改回原始项目。**

**回顾这些流程和现有解决方案时，有些事情变得很清楚:**

*   *****可发现性*** 表示能够回答问题*下一步该怎么做？*“—找到一个要做的项目，并在该项目中找到哪些实验可能是有趣的或重要的。它主要通过**实验跟踪**系统来解决，其中许多系统使用难以理解和移植的专有或黑盒格式。DAGsHub 通过创建一个依赖于简单开放格式(`YAML`和`CSV`)的实验跟踪系统超越了这一点。这意味着您不需要添加晦涩的代码行——一切都是通过自动扫描和分析推入平台的 git 提交来工作的。**
*   *****可理解性*** 意思是能够回答问题“*我应该怎么做我想做的事？*“—这通常包括回顾为什么、如何以及在一个项目或实验中已经做了什么。这一步的解决方案大部分是手动的，依赖于自我记录自己的工作和与合作者的讨论。DAGsHub 在这方面有所改进，它为项目的代码、数据、模型和管道提供了一个方便的接口，为用户提供了一个了解项目组件以及它们如何相互交互的窗口。**
*   *****再现性*** 指的是建立一个你想要进行的实验的精确副本。很多时候，这个过程被简化为 Git 提交和实验参数(记录在实验跟踪系统中)。然而，再现性的真正标准包括 ***轻松地*** 检索相同版本的数据、模型和其他工件。最好通过使用 Git 和一些专用的数据版本控制解决方案来解决这个问题。DAGsHub 通过依赖 Git 和 DVC 等开源工具来解决这个问题，提供上面讨论的标准——用一个(或两个)命令完成项目(代码、数据、模型、参数和其他工件)的完整副本。**
*   *****贡献性*** 是指你可以拿一个新的实验或结果，把它们重新整合到你开始的项目中，这样你就不需要单独维护你的结果了。今天，这是完全手动的，充满摩擦，从根本上**不存在**。**

**我们还有更多的东西要构建，但是很明显有一个方面需要首先被覆盖——一个 ***贡献*** 机制。**

# **贡献—数据科学拉取请求**

**合作过程的最后一步可以说是最重要的一步。没有它，工作流是片面的，独白，这意味着协作不会发生。实际上， ***投稿*** 可以分解为两个任务——**审阅**和**合并**投稿。**

**在软件中，审查和合并都是**拉请求**过程的一部分，但是他们的焦点仅仅在代码上。**

> ***数据科学拉取请求让你* ***审核实验，*** ***代码，数据，模型，*** *和你的* ***管道*** *，以及* ***自动将它们全部合并修改。*****

# **数据科学评论**

**如果您曾经与其他人一起从事过数据科学项目，或者尝试过审查其他人的数据科学工作，您就会知道获得理解其他人的工作或解释自己的工作所需的信息有多难，这样审查过程才有意义。这个过程是缓慢的和手工的，因为系统不是为审查而构建的。**

**自动审查过程意味着可以更快地讨论变更和更新，并将其集成到您的项目中。你需要迅速看到发生了什么变化，在上下文中讨论它，并决定如何前进。**

**这在实践中意味着什么:**

*   **在上下文中对实验进行评论——您可以查看作为 DS PR 的一部分提供的新实验，并将它们与原始项目中的基础实验进行比较。查看所有可视化内容和信息，并在公关讨论中添加评论，并提供相关比较/可视化内容的链接。**

**![](img/323b6dc5794e819e7b3a9a450a059eeb.png)**

**评论 DS PRs 中的实验。来源: [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr)**

*   **查看哪些数据和模型发生了变化(不仅仅是代码)—查看添加、删除或修改了哪些数据、模型和工件文件。这意味着您可以轻松地找出变化，并将讨论集中在重要的方面。**

**![](img/876175f8027dd3a7562242065618b182.png)**

**数据对比示例。来源: [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr)**

*   **并排比较和区分笔记本电脑-笔记本电脑是许多数据科学项目的重要组成部分。然而，在很长一段时间里，他们在审查过程中没有得到足够的处理，依赖于原始`JSON`文件的差异，而这些差异大多是不可读的。作为 DS PR 的一部分，您现在可以在直观的 UI 中查看这些更改。这样做的另一个好处是，如果您需要一个特殊的可视化，您可以提交一个具有该可视化的笔记本，并方便地查看更改。**

**![](img/eed0b1113b670e44bb5f88348c512dda.png)**

**笔记本不同的例子。来源: [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr)**

**在回顾了合作者的工作之后，我们需要一种方法来自动地合并那些变更。这就是我们建立数据科学融合的原因。**

# **数据科学融合**

**使用 Git 合并代码是可能的，但是正如我们已经讨论过的，这并不是数据科学项目的全貌。使用 DS PRs，您也可以合并您的数据和其他工件。**

## **数据合并**

**每个人都知道代码中的错误，但是你也可能有你没有意识到的数据错误。例子包括数据不是最新的，有偏见的，或贴错标签的。假设您发现了这样一个 bug，并且想要修复它——这通常意味着您需要同意并执行一些手动操作来更新或添加新数据。有了数据合并，一旦你接受了一个 DS PR，新的数据将会在一个完全自动化的过程中被自动复制到你的项目中。**

## **伪像合并**

**这不仅限于*原始数据—* 数据合并允许您合并模型和数据管道中的任何其他工件(例如，预处理数据或 3d 模型)。举一个例子，管道中的一个步骤需要 2 周的时间来运行，并产生一些经过训练的模型或经过处理的数据集。如果只有原始数据被合并，您将不得不再次运行那个痛苦的 2 周过程。工件合并意味着在一个 DS PR 被合并之后，产生的项目和最初的贡献一样是可复制的。**

**在接受 DS PR 之后，你处于 DS 项目的相同状态，就像你在软件项目中接受 PR 之后一样。**

**![](img/f0fb74bb569c1677b18baebdb0427be9.png)**

**数据科学合并—请注意，在接受此 DS PR 时，将复制 171 MB 的数据。来源: [DAGsHub](https://dagshub.com/?utm_source=medium&utm_medium=blog&utm_campaign=data-science-pr)**

**数据合并意味着您可以轻松地接受来自贡献者的数据和模型，而不必让每个人都完全访问您的数据存储。这可以减少摩擦，加快团队努力。**

**最后一种能力对 OSDS 特别有用。**

# **这对 OSDS 意味着什么？**

**开源数据科学(OSDS)有潜力对世界产生类似的影响，就像开源软件(OSS)一样。这是 DAGsHub 的既定目标，以促进 OSDS 和建立技术，使它尽可能容易。OSDS 必须排在第一位，行业工作流程将反映 OSDS 项目中的工作流程，就像他们对开放源码软件所做的那样。**

**但是让我们面对现实吧——OSDS 还没有真正的 T2 T3。如果你维护着某个 OSDS 项目，你想接受人们的贡献(就像你对 OSS 所做的那样)，你必须完全手动完成，或者**求助于只接受代码变更**(没有办法接受数据错误修复——我们都知道有很多)。**

**从个人贡献者的角度来看，如果你想通过为一些 OSDS 项目做贡献来提高你的 ML 投资组合，你也会被卡住。您必须要么放弃项目，不贡献您的更改(这意味着它们的质量永远不会被审查——您不会学到太多),要么经历艰苦的手工努力。**

> ***DS PRs 通过提供标准界面和工作流程来审核和接受来自任何人、任何地点、任何类型的数据科学组件的贡献，使 OSDS 成为可能。***

****我们非常乐意支持希望接受社区数据科学贡献的开源数据科学项目。如果这与您相关，请致电 osds@dagshub.com**[**联系我们**](mailto:osds@dagshub.com) **。****

# **谢谢大家！**

**感谢所有在我们建立 DS PRs 之前和期间给我们反馈的人。我们也很乐意收到您关于如何为社区改进 DS PRs 的反馈——最好的方法是加入我们的 [Discord channel](https://discord.com/invite/9gU36Y6) 。期待听到您的想法，并看到人们用开源数据科学构建了什么。**