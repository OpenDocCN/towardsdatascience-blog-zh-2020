<html>
<head>
<title>Are Stock Returns Normally Distributed?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">股票收益是正态分布吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/are-stock-returns-normally-distributed-e0388d71267e?source=collection_archive---------4-----------------------#2020-03-29">https://towardsdatascience.com/are-stock-returns-normally-distributed-e0388d71267e?source=collection_archive---------4-----------------------#2020-03-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/7633e4f8abaf74bb64151104a30388e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Deo2vvKJ7atAgVIQ"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@m_b_m?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> M. B. M. </a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="2e4b" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">从概率分布中得出的预期与真实世界的股票回报匹配吗？</h2></div><p id="4c2b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di">虽然痛苦，但最近金融市场的混乱给我们提供了一个质疑自己假设的好机会。在投资行业中，用正态分布来模拟投资未来回报的潜在范围<a class="ae jg" rel="noopener" target="_blank" href="/understanding-the-normal-distribution-with-python-e70bb855b027">是很常见的。任何时候我们都可以用正态分布来建模一些东西，这使得生活变得容易多了。例如，由许多投资组成的投资组合(每个投资的回报都是正态分布的)的回报也是正态分布的。为了描述一项投资，我们只需要两个值:平均值(也就是投资的预期回报)和标准差(也就是投资的风险)。如果我们想彻底，我们还应该记录投资与我们整体投资组合的相关性。</a></span></p><p id="b373" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我之前写过金融业如何对投资风险进行建模。钟形曲线峰值的X轴位置是预期收益，钟形曲线的宽度代表其风险:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/debdac9f2736c336c1b0b4c38b5594df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ScnGaqZ3-7qhXRga.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">投资钟形曲线</p></figure><p id="3c58" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是用这些假设做出的风险估计真的有意义吗？股票收益实际上正常吗？常态假设是否低估、恰当表述或夸大了市场灾难的频率(就像我们在过去几周经历的那样)？</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="4c2a" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">股票收益正常吗？</h1><p id="36d2" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">自1950年以来，标准普尔500的平均年回报率约为8%，回报率的标准差为12%。我想看看月度回报，所以让我们把它们转换成月度回报:</p><pre class="me mf mg mh gt nm nn no np aw nq bi"><span id="a5d1" class="nr mq jj nn b gy ns nt l nu nv">Monthly Expected Return = 8%/12 = 0.66%<br/>Monthly Standard Deviation = 12%/(12^0.5) = 3.50%</span></pre><p id="02b8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们将实际回报叠加在理论正态分布之上，平均值为0.66%，标准差为3.5%:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/b0625830925fc57234fce0876ea4d04a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7nrltX4x51aanCQqAdwt6Q.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">实际分布与正态分布</p></figure><p id="3aff" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它看起来近似正常，但如果我们看分布的左边，我们可以看到著名的厚尾。厚尾意味着现实中极端事件发生的频率比正态分布预测的要高。更多的证据表明，标准普尔500指数月度回报率的实际分布在中心比正态分布更薄。瘦的中间和胖的尾部意味着正态分布可能不是股票收益的最佳描述。相反，似乎有两种制度——一种平静的制度，在这种制度下，我们大部分时间都处于正态分布状态(但波动性低于12%),另一种制度则具有高波动性和可怕的回报。</p><p id="7b42" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/what-in-the-world-are-qq-plots-20d0e41dece1">另一种检查正常性的方法是QQ图(我也写了一篇博客详细介绍QQ图是如何工作的)。</a>让我们来看看每月S &amp; P 500回报的QQ图:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/a9900b5824cd9972dae704a33e2a21e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epJgKWyM1IyoCBasstIwiw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">每月标准普尔500回报的QQ图</p></figure><p id="8cbd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与红色45度线的偏差代表与正态分布的差异。虽然大多数观察值都或多或少落在红线上，但我们可以在左尾巴上看到明显的偏差，在右尾巴上看到较小的偏差。X轴上的值(理论分位数)告诉我们期望在正态分布上看到该量级的观察值的频率(它们是Z分数，也称为远离平均值的标准偏差，这意味着概率)。Y轴上的值(样本分位数，也是Z分数)告诉我们实际上看到它的频率。</p><p id="5bf9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，左边的2个点是明显的异常值。这两者都代表着标准普尔500的回报率低于-20%。在数据集中，总共有843个月的观测值。因此，这两个异常点仅占我们观察值的0.237%。我们可以使用下面的代码行来找到正态分布中0.237%的观察值位于左侧的点:</p><pre class="me mf mg mh gt nm nn no np aw nq bi"><span id="3b48" class="nr mq jj nn b gy ns nt l nu nv"><strong class="nn jk">In:</strong></span><span id="0a63" class="nr mq jj nn b gy nx nt l nu nv">from scipy.stats import norm</span><span id="55dd" class="nr mq jj nn b gy nx nt l nu nv"># Multiply by 2 to account for probabilities in right tail also<br/>theoretical_z_score = norm.interval(1-(0.00237*2))[0]<br/>print('Theoretical Z = ' + str(round(theoretical_z_score, 2)))</span><span id="5655" class="nr mq jj nn b gy nx nt l nu nv"><strong class="nn jk">Out:</strong></span><span id="8481" class="nr mq jj nn b gy nx nt l nu nv">Theoretical Z = -2.82</span></pre><p id="ed0d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这意味着在正态分布中(均值=0，标准差=1)，我们预计0.237%的观察值位于-2.82的左侧(该值是Z得分的一个示例)。我们刚刚计算的Z分数是QQ图上第二差回报的X轴位置。</p><p id="3039" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以通过累积密度函数(CDF方法)来证实这一点，它告诉我们，对于给定的分布，位于Z得分左侧的概率之和:</p><pre class="me mf mg mh gt nm nn no np aw nq bi"><span id="a255" class="nr mq jj nn b gy ns nt l nu nv"><strong class="nn jk">In:</strong></span><span id="15dc" class="nr mq jj nn b gy nx nt l nu nv">prob_left = norm.cdf(theoretical_z_score)<br/>print('Probability to left = ' + str(round(prob_left, 5)))</span><span id="c472" class="nr mq jj nn b gy nx nt l nu nv"><strong class="nn jk">Out:<br/></strong>Probability to left = 0.00237</span></pre><h2 id="f061" class="nr mq jj bd mr ny nz dn mv oa ob dp mz lh oc od nb ll oe of nd lp og oh nf oi bi translated">Z分数</h2><p id="4390" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">Z得分是一种将数量与概率联系起来的度量。它的公式是:</p><pre class="me mf mg mh gt nm nn no np aw nq bi"><span id="20f9" class="nr mq jj nn b gy ns nt l nu nv">Z-score = (observed - mean)/standard_deviation</span></pre><p id="095b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Z值为-2.82意味着观察值比平均值低-2.82个标准偏差(在任一方向上离平均值越远，观察的可能性越小)。-2.82是一个理论上的Z值，也称为Z值。低于该值时，我们预计0.237%的观察值将服从正态分布。</p><p id="2255" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们来计算实际数据的Z值。2个异常点代表了灾难性的月回报率-20.4% (2008年金融危机)和-22.5%(过去一个月)。因此，我们可以使用-20.4%来计算我们的Z得分(因为842个观察值中有2个是-20.4%或更低)，以及标准普尔500月度回报的均值和标准差:</p><pre class="me mf mg mh gt nm nn no np aw nq bi"><span id="b07d" class="nr mq jj nn b gy ns nt l nu nv"><strong class="nn jk">In:</strong></span><span id="6f15" class="nr mq jj nn b gy nx nt l nu nv">actual_z_score = (-0.204 - 0.0066)/0.035<br/>print('Actual Z = ' + str(round(actual_z_score, 2)))</span><span id="86d4" class="nr mq jj nn b gy nx nt l nu nv"><strong class="nn jk">Out:</strong></span><span id="18fb" class="nr mq jj nn b gy nx nt l nu nv">Actual Z = -6.02</span></pre><p id="fed9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">哇，月收益率-20%是6 sigma事件</strong>(均值以下6个标准差)！让我们用更容易理解的概率来描述这一点:</p><ul class=""><li id="c50a" class="oj ok jj la b lb lc le lf lh ol ll om lp on lt oo op oq or bi translated">发生-2.82 sigma(或更差)事件的频率为0.237%。这意味着我们预计每1/0.00237个月会发生一次。所以我们预计它每422个月发生一次，或者每35年发生一次。</li><li id="7294" class="oj ok jj la b lb os le ot lh ou ll ov lp ow lt oo op oq or bi translated">8.87*10^-8%频率出现-6.02西格玛(或更差)事件。是的，这个数字对我来说也没有意义，所以我们换个说法。就年份而言，如果股票回报确实正常，那么我们预计像这样的6 sigma事件每93，884，861年发生一次！</li></ul><p id="22df" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是为什么QQ图特别突出了这2点(其中-6.02 sigma是QQ图上第二差回报的Y轴值)。<strong class="la jk">据说我们在数据中观察到6 sigma事件(大规模不可能发生的事件)的频率远高于预期(大约3 sigma频率)。</strong>它试图告诉我们:</p><p id="fc47" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这意味着我们在数据中观察到6 sigma事件(大规模不可能发生的事件)的频率远远高于预期(大约3 sigma频率)。它试图告诉我们:</p><blockquote class="ox"><p id="0de3" class="oy oz jj bd pa pb pc pd pe pf pg lt dk translated">“嘿，根据我们数据的平均值和标准差，以及最关键的假设，我们的数据是正态分布的，我们在这里观察到的是超级不正常的！”</p></blockquote><p id="0668" class="pw-post-body-paragraph ky kz jj la b lb ph kk ld le pi kn lg lh pj lj lk ll pk ln lo lp pl lr ls lt im bi translated">我们观察到2个回报率低于-20%！这是一个只有70年历史的数据集中的两个六西格玛事件(9000万年一次的事件)。所以我们可以非常自信地说(不需要假设检验！)认为没有股票回报是不正常的。此外，假设它们导致我们低估了灾难性市场回报的可能性。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="d4e8" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">那现在怎么办？</h1><p id="50f1" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">我们是不是要废弃所有的模型，然后从头开始？我不认为我们需要一路走到那里。毕竟，股票回报大致是正常的，即使在股票回报低于正常水平、存在厚尾的世界(或许更是如此)，投资理论(如多样化)的许多好处也是成立的。</p><p id="a19d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，当我们对我们的投资组合进行压力测试时(以及我们自己对未来可能发生的事情的心理预期)，我们绝对应该认识到假设的4、5和6 sigma事件实际上似乎在每个商业周期都会发生一次。</p><p id="4414" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以具体反思一下我们估算灾难性市场回报频率的方式。一个问题是金融市场存在的时间还不够长。因此，我们没有足够的观测数据来确信我们对均值、标准差等的估计。真正代表了真实的分布。因此，我们应该承认，我们做出的推论(使用我们确实拥有的市场数据)有时可能会非常不正确。这让我想起了地震预测，科学家们试图利用一个以中小地震为主的数据集来预测大地震的震级和频率(类似的地震可能以前从未记录过)。或许金融业可以向他们借一两页纸。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="31f7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="pm">本文引用的往期帖子:</em> </strong></p><p id="b01a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/understanding-investment-risk-3882c58e00e0"> <em class="pm">了解投资风险</em> </a></p><p id="c17c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/understanding-the-normal-distribution-with-python-e70bb855b027"> <em class="pm">理解正态分布</em> </a></p><p id="1d2f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" rel="noopener" target="_blank" href="/what-in-the-world-are-qq-plots-20d0e41dece1"><em class="pm">QQ剧情到底是什么？</em>T15】</a></p></div></div>    
</body>
</html>