<html>
<head>
<title>How to query and calculate GA4 event data in BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在BigQuery中查询和计算GA4事件数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-query-and-calculate-ga-app-web-event-data-in-bigquery-a77931176d3?source=collection_archive---------5-----------------------#2020-03-11">https://towardsdatascience.com/how-to-query-and-calculate-ga-app-web-event-data-in-bigquery-a77931176d3?source=collection_archive---------5-----------------------#2020-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b868" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Google Analytics 4基于事件的报告示例(之前为App + Web)</h2></div><p id="1743" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">应用程序和网络分析的未来就在这里:谷歌在谷歌分析中宣布了一种<a class="ae ln" href="https://www.blog.google/products/marketingplatform/analytics/new-way-unify-app-and-website-measurement-google-analytics/" rel="noopener ugc nofollow" target="_blank">新的衡量方式</a>。虽然仍处于测试阶段，但这是网络和应用分析的一次小革命。</p><p id="c2ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最重要的是:所有(甚至非360)谷歌分析账户都有一个原始数据BigQuery导出。让我们开始吧！</p><p id="6d02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lo">注:你喜欢这篇文章吗？那么你也会喜欢我的新网站</em><a class="ae ln" href="https://www.ga4bigquery.com/" rel="noopener ugc nofollow" target="_blank"><em class="lo">GA4BigQuery.com</em></a><em class="lo">:一个关于如何在BigQuery &amp;摇滚你的数字营销分析中查询谷歌分析数据的数字指南🤘</em></p><p id="4fde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可能也会对我与Mari和Simo Ahava共同设计的<a class="ae ln" href="https://www.teamsimmer.com/checkout/ga4-google-bigquery/bq-course-page/" rel="noopener ugc nofollow" target="_blank">数字课程</a>感兴趣，该课程面向希望深入查询世界的营销专业人士，以及需要掌握GA4特定知识的数据专业人士:</p><div class="lp lq gp gr lr ls"><a href="https://www.teamsimmer.com/checkout/ga4-google-bigquery/bq-course-page/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">在Google BigQuery中查询GA4数据</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">关于如何使用Google BigQuery访问Google Analytics 4生成的原始数据的在线课程。一门必学的课程…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.teamsimmer.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg mh ls"/></div></div></a></div><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/1335756cd3e63197145c37c43e4325d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*apCS6sQRKXxABjLIOhwWYQ.png"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">图片由<a class="mt mu ep" href="https://medium.com/u/7bf0b2ba1c23?source=post_page-----a77931176d3--------------------------------" rel="noopener" target="_blank">柏柏尔人Bijlsma </a></p></figure><p id="4438" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我将只关注web数据。我将向您展示如何计算新的GA4参与度指标，以及如何复制在GA4用户界面中再也找不到的“经典”Google Analytics维度和指标。但是要小心…</p><blockquote class="mv mw mx"><p id="be64" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">这不是万能分析。尝试将新的测量模型视为超越Universal Analytics所能做到的机会，而不仅仅是填充GA古老数据模型的另一种方式。(<a class="ae ln" href="https://www.simoahava.com/analytics/getting-started-with-google-analytics-app-web/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/6cfe98ec26d00271c65fa436b15a1ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hDwOOsD4JZjZLWrqWmLauQ.gif"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">App和web统一(<a class="ae ln" href="https://www.blog.google/products/marketingplatform/analytics/new-way-unify-app-and-website-measurement-google-analytics/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></figure><p id="9af8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是BigQuery的新手，我推荐你阅读我之前关于如何在BigQuery 中查询Google Analytics(通用分析)数据的文章的第一部分。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="45b8" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">目录</h1><p id="7a1b" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">–<a class="ae ln" href="#bee4" rel="noopener ugc nofollow">这是怎么回事？</a><br/>–<a class="ae ln" href="#1b2d" rel="noopener ugc nofollow">文档</a><br/>–<a class="ae ln" href="#8f8e" rel="noopener ugc nofollow">新参与度指标</a><br/>–<a class="ae ln" href="#c925" rel="noopener ugc nofollow">Google Analytics 4 big query导出模式</a><br/>–<a class="ae ln" href="#2e49" rel="noopener ugc nofollow">嵌套字段</a><br/>–<a class="ae ln" href="#9160" rel="noopener ugc nofollow">获取所有唯一事件和参数</a><br/>–<a class="ae ln" href="#4cd2" rel="noopener ugc nofollow">示例查询:“标准”维度&amp;指标</a><br/>–<a class="ae ln" href="#2461" rel="noopener ugc nofollow">示例查询:计算维度&amp;指标</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="bee4" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">这是怎么回事？</h1><p id="81a8" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">谷歌前分析倡导者克里斯塔·塞登在一系列博客中解释了为什么新的谷歌分析4属性是一大进步:</p><blockquote class="mv mw mx"><p id="019a" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">目前，如果你同时拥有应用程序和网站数据，你需要分别收集和分析这些数据，在Google Analytics for web和Google Analytics for Firebase for apps中。虽然平台不同，但在理解数据和报告方面，许多KPI和业务需求是相同的，因此是时候将这些数据整合到一个分析属性中了！(<a class="ae ln" href="https://www.kristaseiden.com/new-app-web-properties-in-google-analytics/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/b8611557430e07e1fa02a108b9ab8d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xh4KclDfPj4EEBS-Y4lSsA.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">谷歌分析4报告用户界面</p></figure><p id="0bdc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一发展对收集和分析数据的方式有着严重的影响。</p><blockquote class="mv mw mx"><p id="7a4c" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">这种新的测量类型使用与Google Analytics for Firebase(GA4F)相同的数据模式(……)关于这种新的数据模式，最重要的是它脱离了传统的会话+页面视图方法，传统的Google Analytics已经使用了15年以上。相反，它使用事件+参数模型。这是不同的，但它打开了一个全新的可能性世界，就您可以跟踪的内容以及您可以通过相关参数添加到每个事件操作的所有附加细节而言。(<a class="ae ln" href="https://www.kristaseiden.com/new-app-web-properties-in-google-analytics/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><p id="8614" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="1b2d" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">证明文件</h1><p id="b661" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">如果所有这些对您来说都是新的，请在继续查询之前阅读所有关于GA4属性的内容。</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/best-resources-on-google-analytics-4-ga4-properties/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">关于Google Analytics 4 (GA4)属性的最佳资源</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">GA4BigQuery将主要关注如何在BigQuery中利用你的谷歌分析数据。由于GA4对…来说相当新</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="ok l md me mf mb mg mh ls"/></div></div></a></div></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="8f8e" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">新的参与度指标</h1><p id="f468" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">在Google Analytics 4属性中，我们看到了一些以前没有的新指标:</p><h2 id="f6f1" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">参与会议</h2><blockquote class="mv mw mx"><p id="4316" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">持续时间超过10秒、有转换事件、有2个或更多屏幕或页面视图的会话数。(来源:GA4 UI中的定义)</p></blockquote><p id="fa9e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是克里斯塔·塞登的一些背景资料:</p><blockquote class="mv mw mx"><p id="c378" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">参与式会话的概念源于希望从会话计数中删除反弹，因此，只有在用户在网站上停留10秒钟后，参与式会话才会被计数。如果他们在此之前离开，这将被视为反弹，而不是参与会议。(<a class="ae ln" href="https://www.kristaseiden.com/analyzing-reports-in-the-new-app-web-property/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><p id="ba55" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">弗洛里安·佩尔补充道:</p><blockquote class="mv mw mx"><p id="2e00" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">这或多或少与通用分析反弹相反。参与式会话是指至少有两次浏览量，或一次浏览量+一次互动，或一次持续时间为10秒的浏览量。目前，10秒超时不能更改。(<a class="ae ln" href="https://www.florianperl.com/ga-appweb-session-scope-reporting/" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ox"><img src="../Images/ee3277f3637ccf69d35599848d4e6f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2CZ9e4W4tQnD_44T6pEy_g.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">参与度指标</p></figure><h2 id="941e" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">每个用户参与的会话数</h2><blockquote class="mv mw mx"><p id="d66f" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">每个用户参与的会话数，因此，如果我们看到相同的用户ID返回多次，则每个用户可能有3、4或5个会话，然后在您的总用户数中取平均值，得出平均值大于1，实际数量取决于您的内容有多少新用户与返回用户(或删除的cookies)。(<a class="ae ln" href="https://www.kristaseiden.com/analyzing-reports-in-the-new-app-web-property/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><h2 id="1248" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">订婚时间</h2><blockquote class="mv mw mx"><p id="44d7" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">这可能是我最喜欢的新指标。为什么？多年来，我一直在谈论为什么我讨厌通用谷歌分析中的“跳出率”和“页面时间”这两个指标。这种不喜欢有很好的理由:这些指标在计算方式上有缺陷，因为自15年前这些指标问世以来，网络的使用发生了变化。(…)在Firebase的谷歌分析中，有一个指标叫做“参与时间”，我更喜欢这个指标，因为它是作为应用程序在前台的实际时间计算的，比通用谷歌分析中的“页面时间”可靠得多。</p><p id="d8d4" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">对于A+W，我们想引入类似的逻辑，但由于浏览器和标签的工作方式，这要困难得多。我们的小团队花了相当多的时间来讨论计算对分析有意义的指标的最佳方法，最终得出了“web参与时间”,这意味着它是如何在应用程序中计算的同义词，使用一些新的处理程序来密切关注前台标签、屏幕睡眠时间等。本质上，一个更好的计算时间的页面。(<a class="ae ln" href="https://www.kristaseiden.com/analyzing-reports-in-the-new-app-web-property/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><h2 id="7903" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">订婚率</h2><blockquote class="mv mw mx"><p id="1552" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">参与会话的百分比(参与会话数除以会话数)。(来源:GA4 UI中的定义)</p></blockquote><h2 id="b943" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">转换策略</h2><blockquote class="mv mw mx"><p id="90d2" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">如果我们打算在App+Web中复制Universal Analytics报告，这些不会立即有用:转换是标记为转换的事件计数，而不是在会话级别进行重复数据删除(因此它不是真正的会话范围指标)。更重要的是，现在没有办法指定我们想要查看哪个转换——它们都被扔进了同一个锅里。最有可能的用例是当我们只跟踪单个转换事件时，那么报告将更有意义。(<a class="ae ln" href="https://www.florianperl.com/ga-appweb-session-scope-reporting/" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><p id="ec0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="c925" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">GA4大查询导出模式</h1><p id="b8e6" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">由于没有谷歌分析4属性的样本数据集(还没有？)，我将使用一个来自<a class="ae ln" href="https://orangevalley.nl" rel="noopener ugc nofollow" target="_blank"> OrangeValley </a>的出口数据集(仅限网络)，这是我在撰写本文时工作的数字营销机构。除了通过'<a class="ae ln" href="https://support.google.com/analytics/answer/9216061?hl=en&amp;ref_topic=9228654" rel="noopener ugc nofollow" target="_blank"> enhanced measurement </a>收集的标准事件之外，您可能会在我们的数据集中看到一些自定义事件参数，如事件' page_view '中的' wordCount '。这不会以任何方式影响我们的模式。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ox"><img src="../Images/52e6cd437807e273caa4f656f0504b1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxFmyf852qf9WMES5WUC6A.png"/></div></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">GA4在BigQuery中导出数据</p></figure><p id="0b81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来看看GA4 BigQuery <a class="ae ln" href="https://support.google.com/analytics/answer/7029846?hl=en&amp;ref_topic=9359001" rel="noopener ugc nofollow" target="_blank">导出模式</a>:</p><figure class="mj mk ml mm gt mn"><div class="bz fp l di"><div class="oy oz l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">GA4大查询导出模式</p></figure><p id="86b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你会注意到，数据集主要围绕事件和用户数据组织，并辅以一些设备、地理、应用和交通来源数据。</p><p id="e2d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据不同的定义，您可以预期Google Analytics 4用户界面和BigQuery导出数据查询的结果之间存在一些相对较小的差异。了解用户计数或<a class="ae ln" href="https://support.google.com/analytics/answer/9143382?hl=en&amp;ref_topic=9303476" rel="noopener ugc nofollow" target="_blank">维度&amp;度量定义</a>的<a class="ae ln" href="https://support.google.com/analytics/answer/9408920?hl=en&amp;ref_topic=9303476" rel="noopener ugc nofollow" target="_blank">差异。</a></p><p id="11ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="2e49" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">嵌套字段</h1><p id="aae5" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">在<a class="ae ln" rel="noopener" target="_blank" href="/how-to-query-and-calculate-google-analytics-data-in-bigquery-cab8fc4f396">通用分析导出模式</a>中，数据集中的每一行代表一个会话。因为GA4属性是基于事件的，所以数据集中的每一行都代表一个事件。每个事件又可以包含多个事件参数和相应的值。为了向您展示这在BigQuery中是如何工作的，我们查询我们的嵌套样本集:</p><pre class="mj mk ml mm gt pa pb pc pd aw pe bi"><span id="4143" class="ol no it pb b gy pf pg l ph pi">SELECT<br/>  *<br/>FROM<br/>  `ga4.analytics_1234567890.events_*`<br/>LIMIT<br/>  3</span></pre><p id="b071" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这给了我们3行，表示为平面表，如下所示:</p><figure class="mj mk ml mm gt mn"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="ad28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住，在这个例子中，只有第2、9和15行是我们表中真正的行。其他“行”实际上是嵌套字段，大多数情况下是<code class="fe pj pk pl pb b">NULL</code>值。只有<code class="fe pj pk pl pb b">event.params</code>列填充了值。</p><p id="59f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了处理这些字段，并能够查询我们的表以满足我们的需求，我们需要<code class="fe pj pk pl pb b">UNNEST</code>函数。</p><blockquote class="mv mw mx"><p id="058a" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">这里的问题是它本质上是一个数组(实际上在BigQuery中它是一个“重复的记录”，但是你可以把它看作一个数组)。(…)这就是<code class="fe pj pk pl pb b"><em class="it">UNNEST</em></code>函数的用武之地。它基本上允许你在一个数组中获取元素，然后展开每一个单独的元素。然后，可以将原始行与每个未嵌套的元素连接起来，将它们添加到表中。(<a class="ae ln" href="https://medium.com/firebase-developers/using-the-unnest-function-in-bigquery-to-analyze-event-parameters-in-analytics-fb828f890b42" rel="noopener">来源</a>)</p></blockquote><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/40548298260482c6b8e3b736a1778109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Ligazuy6guS0wZnAzebvfA.gif"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">取消嵌套事件_参数(<a class="ae ln" href="https://medium.com/firebase-developers/using-the-unnest-function-in-bigquery-to-analyze-event-parameters-in-analytics-fb828f890b42" rel="noopener">来源</a>)</p></figure><p id="a330" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我强烈推荐阅读<a class="ae ln" href="https://medium.com/firebase-developers/using-the-unnest-function-in-bigquery-to-analyze-event-parameters-in-analytics-fb828f890b42" rel="noopener">这篇文章</a>，它以Firebase Analytics样本数据集为例详细解释了<code class="fe pj pk pl pb b">UNNEST</code>概念。</p><p id="9c6f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您只需<code class="fe pj pk pl pb b">UNNEST</code>包含“重复字段”的记录。对于我们的Google Analytics 4数据集，这些可能涉及:</p><ul class=""><li id="b182" class="pn po it kk b kl km ko kp kr pp kv pq kz pr ld ps pt pu pv bi translated">事件参数</li><li id="b681" class="pn po it kk b kl pw ko px kr py kv pz kz qa ld ps pt pu pv bi translated">用户属性</li><li id="df56" class="pn po it kk b kl pw ko px kr py kv pz kz qa ld ps pt pu pv bi translated">项目</li></ul><p id="f37e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="9160" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">获取所有唯一的事件和参数</h1><p id="3ab9" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">因为每个数据集都可能包含不同数据类型的不同事件和事件参数，所以查询实际的表来找出答案是非常有帮助的。尤其是当您缺少关于数据收集方式的文档时。要获得所有唯一的事件和参数，您可以使用如下查询:</p><figure class="mj mk ml mm gt mn"><div class="bz fp l di"><div class="oy oz l"/></div><p class="mp mq gj gh gi mr ms bd b be z dk translated">受<a class="ae ln" href="https://robertsahlin.com/get-all-unique-firebase-analytics-events-in-bigquery/" rel="noopener ugc nofollow" target="_blank">罗伯特·萨赫林</a>启发的疑问</p></figure><p id="8378" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的数据集的情况下，这导致<a class="ae ln" href="https://gist.github.com/jhnvdw/b1786ece8e7a90ef49babebb7054efad" rel="noopener ugc nofollow" target="_blank">所有唯一事件和参数的列表</a>及其相应的数据类型。这些重复的字段包含大量数据，我们将使用这些数据来计算维度和指标。</p><p id="7edf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="4cd2" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">“标准”维度和指标</h1><p id="9b6c" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">许多数据可以直接从表中导出，而不需要对数据进行计算。借助<code class="fe pj pk pl pb b">UNNEST</code>和<code class="fe pj pk pl pb b">PARSE</code>获取日期或时间戳，我们可以做到这一点。</p><p id="9029" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看示例查询中的<code class="fe pj pk pl pb b">-- comments</code>的名称和定义，并从<code class="fe pj pk pl pb b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(即<code class="fe pj pk pl pb b">WITH</code>、<code class="fe pj pk pl pb b">FROM</code>、<code class="fe pj pk pl pb b">WHERE</code>、<code class="fe pj pk pl pb b">GROUP BY</code>、<code class="fe pj pk pl pb b">HAVING</code>和<code class="fe pj pk pl pb b">ORDER BY</code>)。</p><p id="33d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="1d66" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">用户维度</h2><p id="e7ad" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">user _ id<br/>user _ pseudo _ id<br/>user _ first _ touch _ timestamp<br/>user _ string _ value<br/>user _ set _ timestamp _ micros<br/>user _ ltv _ revenue货币</p><h2 id="d195" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">用户指标</h2><p id="7653" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">用户整数值<br/>用户浮点值<br/>用户双精度值</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/user-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">用户:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qb l md me mf mb mg mh ls"/></div></div></a></div><p id="00e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="db17" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">设备尺寸</h2><p id="65b3" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">device . category<br/>device . mobile _ brand _ name<br/>device . mobile _ model _ name<br/>device . mobile _ marketing _ name<br/>device . mobile _ OS _ hardware _ model<br/>device . operating _ system<br/>device . operating _ system _ version<br/>device . vendor _ id<br/>device . advertising _ id<br/>device . language<br/>device . is _ limited _ tracking<br/>device . time _ zone _ offset _ seconds<br/>device . browser</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/device-app-web-stream-platform-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">设备、应用、网络、流和平台:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qc l md me mf mb mg mh ls"/></div></div></a></div><p id="1947" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="83c4" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">地理维度</h2><p id="0740" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">地理大陆<br/>地理亚大陆<br/>地理国家<br/>地理区域<br/>地理城市<br/>地理地铁</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/geo-location-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">地理位置:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qd l md me mf mb mg mh ls"/></div></div></a></div><p id="6508" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="12bc" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">应用程序维度</h2><p id="69b1" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">app _ info . id<br/>app _ info . version<br/>app _ info . install _ store<br/>app _ info . firebase _ app _ id<br/>app _ info . install _ source</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/device-app-web-stream-platform-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">设备、应用、网络、流和平台:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qc l md me mf mb mg mh ls"/></div></div></a></div><p id="b5fa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="f89e" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">流量来源维度</h2><p id="449a" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">traffic_source.name(用户)<br/> traffic_source.medium(用户)<br/> traffic_source.source(用户)</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/traffic-source-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">流量来源:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qe l md me mf mb mg mh ls"/></div></div></a></div><p id="6039" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="8ed8" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">事件维度</h2><p id="df45" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">event _ date<br/>event _ timestamp<br/>event _ name<br/>event _ key<br/>event _ previous _ timestamp<br/>event _ bundle _ sequence _ id<br/>event _ server _ timestamp _ offset<br/>stream _ id<br/>平台<br/> event_dimensions.hostname</p><h2 id="80d8" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">事件度量</h2><p id="18ba" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">事件_int_value <br/>事件_float_value <br/>事件_double_value <br/>事件_value_in_usd</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/events-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">事件:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qf l md me mf mb mg mh ls"/></div></div></a></div><p id="9ccb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="6c99" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">电子商务维度</h2><p id="7721" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">commerce.transaction_id</p><h2 id="ccd1" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">电子商务指标</h2><p id="c06e" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">ecommerce . total _ item _ quantity<br/>ecommerce . purchase _ revenue _ in _ USD<br/>ecommerce . purchase _ revenue _ value _ in _ USD<br/>ecommerce . refund _ value _ in _ USD<br/>ecommerce . shipping _ value _ in _ USD<br/>ecommerce . shipping _ value<br/>ecommerce . tax _ value _ in _ USD<br/>ecommerce . tax _ value<br/>ecommerce . unique _ items</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/ecommerce-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">电子商务:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qg l md me mf mb mg mh ls"/></div></div></a></div><p id="0db0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="c3dd" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">项目尺寸</h2><p id="3741" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">items . item _ id<br/>items . item _ name<br/>items . item _ brand<br/>items . item _ variant<br/>items . item _ category 2<br/>items . item _ category 3<br/>items . item _ category 4<br/>items . item _ category 5<br/>items . coupon<br/>items . affiliation<br/>items . location _ id<br/>items . item _ list _ id<br/></p><h2 id="76fa" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">项目度量</h2><p id="f374" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">items . price _ in _ USD<br/>items . price<br/>items . quantity<br/>items . item _ revenue _ in _ USD<br/>items . item _ revenue<br/>items . item _ refund _ in _ USD</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/items-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">项目:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qh l md me mf mb mg mh ls"/></div></div></a></div><p id="7fc5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="2461" class="nn no it bd np nq nr ns nt nu nv nw nx jz ny ka nz kc oa kd ob kf oc kg od oe bi translated">计算维度和指标</h1><p id="ba1e" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">你在谷歌分析分析和报告中习惯的其他维度和指标有点难以获取。您必须使用自己的查询来计算它们。</p><p id="e847" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于我已经尝试整理出了最常用的维度和指标，我希望我能对下面的示例查询有所帮助。有很多其他的，甚至可能更好的方法来实现这些结果，但这里是我的两美分。</p><p id="9f37" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些示例查询(按类别排序)包含以下所有Google Analytics维度和指标。如果您只需要一个维度或度量，请查看示例查询中的<code class="fe pj pk pl pb b">-- comments</code>的名称和定义，并从<code class="fe pj pk pl pb b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(即<code class="fe pj pk pl pb b">WITH</code>、<code class="fe pj pk pl pb b">FROM</code>、<code class="fe pj pk pl pb b">WHERE</code>、<code class="fe pj pk pl pb b">GROUP BY</code>、<code class="fe pj pk pl pb b">HAVING</code>和<code class="fe pj pk pl pb b">ORDER BY</code>)。</p><p id="96f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="b37e" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">用户维度</h2><p id="a43c" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">用户类型<br/>会话计数</p><h2 id="467f" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">用户指标</h2><p id="3be9" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">用户<br/>新用户<br/> %新会话<br/>每个用户的会话数量<br/>每个用户的事件计数</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/user-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">用户:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qb l md me mf mb mg mh ls"/></div></div></a></div><p id="c1b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="75e9" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">会话指标</h2><p id="2a95" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">会话<br/>参与会话<br/>参与率<br/>参与时间<br/>反弹<br/>反弹率<br/>每次会话的事件计数</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/sessions-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">会议:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qi l md me mf mb mg mh ls"/></div></div></a></div><p id="3690" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="0f37" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">高级:定制您参与的会议</h2><p id="8775" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">上述参与会话的计算基于事件“user_engagement”。更具体地说:当参数' session_engaged' = '1 '时。根据GA4用户界面，参与会话的定义是:</p><blockquote class="mv mw mx"><p id="3802" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">持续时间超过10秒、有转换事件、有2个或更多屏幕或页面视图的会话数。</p></blockquote><p id="9fbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以在UI中设置转换事件，但如果您使用事件“user_engagement ”,则不能更改会话长度或页面浏览量的定义。但是，如果我们想要自定义参与式会话的定义，该怎么办呢？您可以使用<a class="ae ln" href="https://www.ga4bigquery.com/tutorial-how-to-customise-the-default-engaged-session-definition-ga4/" rel="noopener ugc nofollow" target="_blank">这个高级查询</a>(的变体)。</p><p id="7946" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="cef7" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">时间维度</h2><p id="2ec6" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">日期<br/>年份<br/> ISO年份<br/>年份月份<br/>年份月份<br/>年份星期<br/>年份星期<br/> ISO年份星期<br/> ISO年份星期<br/>月份日期<br/>星期日期<br/>星期名称<br/>小时<br/>分钟<br/>日期小时和分钟</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/date-and-time-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">日期和时间:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qj l md me mf mb mg mh ls"/></div></div></a></div><h2 id="e308" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">备注:时区格式</h2><blockquote class="mv mw mx"><p id="db9e" class="ki kj lo kk b kl km ju kn ko kp jx kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">BigQuery通常以UTC显示数据。这在使用日期格式化函数时会导致问题，因为日期和时间可能会不一致。将日期时间格式转换为正确的时区可以解决这些问题。<br/> ( <a class="ae ln" href="https://www.pascallandau.com/bigquery-snippets/convert-timestamp-date-datetime-to-different-timezone/" rel="noopener ugc nofollow" target="_blank">出处&amp;如何</a>)</p></blockquote><p id="6031" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="1ccf" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">交通来源维度</h2><p id="e05f" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">默认频道分组(用户或会话)<br/>源/媒体(用户或会话)<br/>活动(用户或会话)<br/>完整推荐人</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/traffic-source-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">流量来源:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qe l md me mf mb mg mh ls"/></div></div></a></div><p id="b9b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="b56c" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">页面跟踪尺寸</h2><p id="3ef8" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">主机名<br/>页面<br/>上一页路径<br/>页面路径一级<br/>页面路径二级<br/>页面路径三级<br/>页面路径四级<br/>页面标题<br/>登陆页面<br/>第二页<br/>退出页面</p><h2 id="efc7" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">页面跟踪指标</h2><p id="6e02" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">入口<br/>浏览量<br/>独特浏览量<br/>页面/会话<br/>出口<br/> %出口</p><div class="lp lq gp gr lr ls"><a href="https://www.ga4bigquery.com/page-tracking-dimensions-metrics-ga4/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd iu gy z fp lx fr fs ly fu fw is bi translated">页面跟踪:维度和指标(GA4)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">许多Google Analytics 4数据可以直接从表格中导出，而无需对数据进行计算…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="mb l"><div class="qk l md me mf mb mg mh ls"/></div></div></a></div><p id="186e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">—</p><h2 id="e014" class="ol no it bd np om on dn nt oo op dp nx kr oq or nz kv os ot ob kz ou ov od ow bi translated">电子商务维度和指标</h2><p id="3dae" class="pw-post-body-paragraph ki kj it kk b kl of ju kn ko og jx kq kr oh kt ku kv oi kx ky kz oj lb lc ld im bi translated">由于到目前为止我还没有访问过GA4的任何电子商务数据集，我建议看看Bounteous查询GA4数据指南中的电子商务<a class="ae ln" href="https://www.bounteous.com/insights/2020/09/18/querying-app-web-or-firebase-data-bigquery/#sample-query-5-ecommerce-in-bigquery" rel="noopener ugc nofollow" target="_blank">交易</a>和<a class="ae ln" href="https://www.bounteous.com/insights/2020/09/18/querying-app-web-or-firebase-data-bigquery/#sample-query-6-the-items-array-in-bigquery" rel="noopener ugc nofollow" target="_blank">产品</a>的查询示例。</p><p id="7a2b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ln" href="#45b8" rel="noopener ugc nofollow">返回目录</a></p></div></div>    
</body>
</html>