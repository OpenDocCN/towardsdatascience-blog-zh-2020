<html>
<head>
<title>Plot Legends in MATLAB/Octave</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MATLAB/Octave 中的绘图图例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plot-legends-in-matlab-e992650f245e?source=collection_archive---------17-----------------------#2020-07-05">https://towardsdatascience.com/plot-legends-in-matlab-e992650f245e?source=collection_archive---------17-----------------------#2020-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/98e4168f22bffd1157bfff2b4ed016f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xv05xGMev3Zq7oiH6g1Bvg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><div class=""/><div class=""><h2 id="0ee5" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">让你的情节成为传奇</h2></div><p id="e117" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">地块图例对于正确注释图形至关重要。幸运的是，MATLAB/Octave 包含了<em class="lq"> legend() </em>函数，它为生成图例提供了一些灵活易用的选项。在本文中，我将介绍<em class="lq"> legend() </em>函数的基本用法，以及一些我经常使用的特殊情况。</p><p id="f8e0" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">包含示例的源代码可以在<a class="ae lr" href="https://github.com/ThinkData-science/CodingTips" rel="noopener ugc nofollow" target="_blank"> GitHub 库</a>中找到。</p><h1 id="11cc" class="ls lt jf bd lu lv lw lx ly lz ma mb mc kl md km me ko mf kp mg kr mh ks mi mj bi translated">情节图例的基本用法</h1><p id="d3ce" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">MATLAB/Octave 中的<em class="lq"> legend() </em>函数允许您向绘图添加描述性标签。使用该函数最简单的方法是为绘图上的每一行传递一个字符串。基本语法是:<em class="lq">图例('描述 1 '，'描述 2 '，… ) </em>。</p><p id="2612" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">对于本节中的示例，我们将使用以下代码生成一个样例图形。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="563a" class="my lt jf mu b gy mz na l nb nc">x = 0 : 0.1 : ( 2pi ); <br/>plot( x, sin( x ), 'rx', 'linewidth', 2 ); <br/>hold on; <br/>plot( x, cos( x/3 ) - 0.25, 'bs', 'linewidth', 2 ); <br/>plot( x, cos( 4x )/3, '^g', 'linewidth', 2 );<br/>hold off;<br/>xlim( [ 0, 2*pi ] );<br/>grid on;<br/>title( 'Sample Plot' );<br/>set( gca, 'fontsize', 16 );</span></pre><p id="b1d1" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">可以使用以下命令添加图例。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="edda" class="my lt jf mu b gy mz na l nb nc">legend( 'Line 1', 'Line 2', 'Line 3' );</span></pre><p id="dd6a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">除了将标签指定为单独的字符串之外，通常将字符串收集在单元数组中也很方便。这在以编程方式创建图例字符串时最有用。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4c34" class="my lt jf mu b gy mz na l nb nc">legStr = { 'Line 1', 'Line 2', 'Line 3' };<br/>legend( legStr );</span></pre><p id="fba9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">为了方便起见，这个方法将用于其余的例子。得到的数字如下所示。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/1780a781b1330550879c3bb7543fba8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UpATAu3B1TBFK79n5zyhcQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="95b8" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">默认情况下，图例位于右上角。但是，可以使用“位置”关键字来调整它的显示位置。使用基于基本方向的约定来选择位置。可以使用以下关键词:北、南、东、西、东北、西北、东南、西南。以下代码片段会将图例放在绘图的顶部中间。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="80d9" class="my lt jf mu b gy mz na l nb nc">legend( legStr, 'location', 'north' );</span></pre><p id="7695" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">类似地，所有其他关键字都可以用于在绘图周围放置图例。下面的动画演示了所有不同的关键字。</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/9b4df94e828ab61a8810b7b4d172b49c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*N0QHzF_WBqzymCRGe7DQmQ.gif"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="de26" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">关键字“outside”也可以附加到所有位置，以将图例放置在绘图之外。下图显示了图例位于外部东侧的示例。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="93bd" class="my lt jf mu b gy mz na l nb nc">legend( legStr, 'location', 'eastoutside' );</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/94708650db7c49986b68edbed2a7343f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BhQFlcXdlPST6_lMsDSpyw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="174b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">除了设置位置，<em class="lq"> legend() </em>功能还允许您将图例的方向设置为“垂直”(默认)或“水平”。以下示例将图例定位在底部，在绘图之外，水平方向。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="2d02" class="my lt jf mu b gy mz na l nb nc">legend( legStr, 'orientation', 'horizontal', ...<br/>  'location', 'southoutside' );</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a015e6a7ecab8c3a619124fd3c7e0d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1vJjNKUsignLXf73TmI8A.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h1 id="d691" class="ls lt jf bd lu lv lw lx ly lz ma mb mc kl md km me ko mf kp mg kr mh ks mi mj bi translated">使用“显示名称”属性</h1><p id="75e1" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">添加图例标注的另一种简便方法是在绘制线条时设置线条的“显示名称”属性。这可以在<em class="lq"> plot() </em>调用期间或使用手柄上的<em class="lq"> set() </em>完成。在这两种情况下，设置完属性后，您需要不带任何参数的所有<em class="lq"> legend() </em>来打开图例。</p><p id="a6fe" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="lq"> plot() </em>的语法应该如下所示。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="7194" class="my lt jf mu b gy mz na l nb nc">plot( x, sin( x ), 'rx', 'linewidth', 2, 'DisplayName', 'Line1' );<br/>hold on;<br/>plot( x, cos( x/3 ) - 0.25, 'bs', 'linewidth', 2, 'DisplayName', 'Line2' );<br/>plot( x, cos( 4*x )/3, '^g', 'linewidth', 2, 'DisplayName', <br/>'Line3' );<br/>hold off;</span></pre><p id="6d8a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="lq"> set() </em>的语法应该是这样的。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="5c0b" class="my lt jf mu b gy mz na l nb nc">% Plot the lines<br/>h1 = plot( x, sin( x ), 'rx', 'linewidth', 2, 'DisplayName', 'Line1' );<br/>hold on;<br/>h2 = plot( x, cos( x/3 ) - 0.25, 'bs', 'linewidth', 2, 'DisplayName', 'Line2' );<br/>h3 = plot( x, cos( 4*x )/3, '^g', 'linewidth', 2, 'DisplayName', 'Line3' );<br/>hold off;</span><span id="3f63" class="my lt jf mu b gy ne na l nb nc">% Update the display names<br/>set( h1, 'DisplayName', 'Line1' );<br/>set( h2, 'DisplayName', 'Line2' );<br/>set( h3, 'DisplayName', 'Line3' )</span></pre><p id="b112" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然后，在没有任何输入参数的情况下，通过调用 legend()来打开图例。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="46e9" class="my lt jf mu b gy mz na l nb nc">legend();</span></pre><p id="4191" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">结果图将与本教程前面显示的第一个示例相同。</p><h1 id="048f" class="ls lt jf bd lu lv lw lx ly lz ma mb mc kl md km me ko mf kp mg kr mh ks mi mj bi translated">使用图例手柄</h1><p id="8007" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">与所有其他图形对象类似，图例属性可以使用<em class="lq"> set() </em>和<em class="lq"> get() </em>函数进行调整。下面的代码将捕获图例句柄，然后设置一些图例属性。在这个特定的例子中，位置被设置为东北，方向被设置为垂直，字体大小被设置为 16，并且框轮廓被移除。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b7a0" class="my lt jf mu b gy mz na l nb nc">hl = legend( legStr );     % save the legend handle<br/>set( hl, 'orientation', 'vertical' );     % set the orientation<br/>set( hl, 'location', 'northeast' );     % set the location<br/>set( hl, 'fontsize', 16 );     % set the font size<br/>set( hl, 'box', 'off' );    % turn off the box lines</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/fe81131d7a85092f50883b2fa269344f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVOTl8yh4NUTOZpOlV0GZg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="a843" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在 legend 对象上还可以设置许多其他属性。只需在命令窗口中调用<em class="lq"> get(hl) </em>来显示它们。这些属性中最方便的一个是“位置”属性。position 属性允许我们通过指定图例的水平原点(h0)、垂直原点(v0)、宽度(w)和高度(h)来设置图例的确切位置。如果你不熟悉在图形对象上设置 position 属性，你可以在这里看到<a class="ae lr" href="https://thinkdata.science/?p=145" rel="noopener ugc nofollow" target="_blank">的简要描述。</a></p><p id="a77a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">每当你使用支线剧情或图形用户界面时，通常需要为图例指定一个准确的位置。这可以确保您的图例不会与其他元素重叠或产生奇怪的间距。在前一个示例的基础上，我们可以模拟一个示例 GUI，其中包括我们的绘图、几个按钮和一个手工放置在图上的图例。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="7246" class="my lt jf mu b gy mz na l nb nc">% Set up the subplot<br/>set( f, 'units', 'normalized' );<br/>a = subplot( 'position', [ 0.1, 0.1, 0.5, 0.8 ] );</span><span id="485f" class="my lt jf mu b gy ne na l nb nc">% Build our sample plot<br/>x = 0 : 0.1 : ( 2*pi );<br/>plot( x, sin( x ), 'rx', 'linewidth', 2 );<br/>hold on;<br/>plot( x, cos( x/3 ) - 0.25, 'bs', 'linewidth', 2 );<br/>plot( x, cos( 4*x )/3, '^g', 'linewidth', 2 );<br/>hold off;<br/>xlim( [ 0, 2*pi ] );<br/>grid on;<br/>title( 'Sample Plot' );<br/>set( a, 'fontsize', 16 );</span><span id="97ae" class="my lt jf mu b gy ne na l nb nc">% Add some buttons<br/>a = uicontrol( f, 'units', 'normalized', 'position', [ 0.7, 0.7, 0.2, 0.1 ], ...<br/>  'style', 'pushbutton', 'string', 'Press Me' );<br/>a = uicontrol( f, 'units', 'normalized', 'position', [ 0.7, 0.5, 0.2, 0.1 ], ...<br/>  'style', 'pushbutton', 'string', 'Click Here' );</span><span id="95b0" class="my lt jf mu b gy ne na l nb nc">% Add a legend manually<br/>hl = legend( legStr );<br/>set( hl, 'fontsize', 16 );<br/>set( hl, 'position', [ 0.74   0.25   0.12721   0.14310 ] );</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/cd49c01baaba3bc39bb5fe159771e091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*6cmMd_BUXuBpEr_2IRdddQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><h1 id="2196" class="ls lt jf bd lu lv lw lx ly lz ma mb mc kl md km me ko mf kp mg kr mh ks mi mj bi translated">向图例添加特定线条</h1><p id="4666" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">不需要为绘图上的所有线条提供字符串，可以指定应包含在图例中的特定线条对象的数组。我发现这对于你只需要注意图上几行的情况特别有用。当我绘制大量的例子或某种实现，并且想要覆盖和突出一些统计数据或度量时，我倾向于使用这个特性。</p><p id="bf86" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下示例创建了一些随机数据，并从中计算了一些统计数据。所有实现都绘制为细灰色线，统计数据叠加为更粗的彩色线。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="3834" class="my lt jf mu b gy mz na l nb nc">% Generate some random data and calculate a few statistics<br/>t = sqrt( 0.5 ) * randn( 100, 500 );<br/>ts = sort( t, 2 );<br/>t10 = ts( :, floor( 0.10 * size( t, 2 ) ) );<br/>t90 = ts( :, floor( 0.90 * size( t, 2 ) ) );</span><span id="a80f" class="my lt jf mu b gy ne na l nb nc">% Plot realizations as thin gray lines and statistics as thicker, colored lines<br/>plot( t, 'linewidth', 0.2, 'color', [0.5 0.5 0.5] );<br/>hold on;<br/>l1 = plot( mean( t, 2 ), 'linewidth', 4, 'color', [0, 1, 0] );<br/>l2 = plot( t10, 'linewidth', 4, 'color', [1, 0, 0] );<br/>l3 = plot( t90, 'linewidth', 4, 'color', [0, 0, 1] );<br/>hold off;<br/>grid on;<br/>ylim( [-3, 3] );<br/>title( 'Statistics' );<br/>set( gca, 'fontsize', 16 );</span><span id="0370" class="my lt jf mu b gy ne na l nb nc">% Add a legend to just the statistics<br/>hl = legend( [ l1, l2, l3 ], 'Mean', '10th Prct', '90th Prct', ...<br/>  'orientation', 'horizontal', 'location', 'north' );<br/>set( hl, 'fontsize', 16 );</span></pre><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2479d76831b5d7b1f38193fdb3be9111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FErL7t0J37UeIWuxvVbB8A.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">作者图片</p></figure><p id="094d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">结果是一个非常好的情节(在我看来)。如果我们没有传入行句柄，那么<em class="lq"> legend() </em>函数会尝试为每个实现添加一个图例标签。当然还有其他的用例；然而，这是我经常画的一种类型的图。</p><h1 id="0f84" class="ls lt jf bd lu lv lw lx ly lz ma mb mc kl md km me ko mf kp mg kr mh ks mi mj bi translated">摘要</h1><p id="716d" class="pw-post-body-paragraph ku kv jf kw b kx mk kg kz la ml kj lc ld mm lf lg lh mn lj lk ll mo ln lo lp ij bi translated">在本文中，我介绍了在 MATLAB/Octave 中使用<em class="lq"> legend() </em>函数的几种方法。这里有一些需要记住的关键事情。</p><ul class=""><li id="b987" class="ng nh jf kw b kx ky la lb ld ni lh nj ll nk lp nl nm nn no bi translated">图例标签可以作为单个字符串或单元格数组传入。</li><li id="7dec" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">有许多位置和方向选项可用于将图例放置在图形的某些部分。</li><li id="a6a3" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">图例图形句柄可用于直接设置任何图例属性，包括手动设置图中任何位置。</li><li id="4abd" class="ng nh jf kw b kx np la nq ld nr lh ns ll nt lp nl nm nn no bi translated">线图形手柄可用于指定将在图例中标注的线的子集。</li></ul><p id="6991" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">编码快乐！</p></div></div>    
</body>
</html>