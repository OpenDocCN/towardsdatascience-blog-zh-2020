<html>
<head>
<title>Data Viz with Python: Apps &amp; Dashboards</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据即 Python:应用和仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-viz-with-python-apps-dashboards-6693f46f5e6a?source=collection_archive---------17-----------------------#2020-05-20">https://towardsdatascience.com/data-viz-with-python-apps-dashboards-6693f46f5e6a?source=collection_archive---------17-----------------------#2020-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d1db77ebd7d88948b13f4b5d33236dad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IiovDLX4Owq6Z0owynRr1A.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Markus Spiske 摄于 Pexels</p></figure><div class=""/><div class=""><h2 id="b224" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated"><strong class="ak"> <em class="kx">探索 Python 中最流行的开源数据可视化工具</em> </strong></h2></div><p id="27f1" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一名顾问数据科学家，我非常清楚将我的工作总结到仪表板和应用程序中的重要性。<br/>这让我能够推广我的算法和工作，并将它们放入直觉图形中，以便更好、更快地理解。在本文中，我们将介绍设计<code class="fe lu lv lw lx b">dashboards</code>和<code class="fe lu lv lw lx b">applications</code>时使用的最著名的工具和<code class="fe lu lv lw lx b">python</code>库。</p><h1 id="e3ed" class="ly lz ji bd ma mb mc md me mf mg mh mi ko mj kp mk kr ml ks mm ku mn kv mo mp bi translated">目录</h1><p id="ed8f" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">摘要如下:</p><ol class=""><li id="2f62" class="mv mw ji la b lb lc le lf lh mx ll my lp mz lt na nb nc nd bi translated"><strong class="la jj">阴谋地破折号</strong></li><li id="0c52" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated"><strong class="la jj">流线</strong></li><li id="8b7c" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated"><strong class="la jj">散景</strong></li><li id="a794" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated"><strong class="la jj">基巴纳</strong></li><li id="1973" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt na nb nc nd bi translated"><strong class="la jj"> Heroku 部署</strong></li></ol></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="9915" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">神秘地闪过</h1><p id="f2c6" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated"><a class="ae nv" href="https://plotly.com/dash/" rel="noopener ugc nofollow" target="_blank"> Dash </a>是 Plotly 开发的开源工具。它允许插入多种类型的小部件，可以选择布局和样式，因为 dash 的布局是基于 HTML 的，并允许 CSS 样式。<br/>通过运行以下命令行完成设置:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="ef80" class="oe lz ji lx b gy of og l oh oi">pip install dash<br/>pip install dash_core_components<br/>pip install dash_html_components</span></pre><p id="9e39" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">dash 应用程序的<strong class="la jj">布局</strong>是组件的层次树，是 HTML 元素和图形的混合，使用:</p><ul class=""><li id="8f0a" class="mv mw ji la b lb lc le lf lh mx ll my lp mz lt oj nb nc nd bi translated"><strong class="la jj"> dash_html_components </strong>库提供了所有 html 标签的类，关键字参数描述了 HTML 属性，如样式、类名和 id。使用这个库，我们可以添加 HTML 元素，比如<code class="fe lu lv lw lx b">Div, H1, P,... etc</code>。更多细节，我建议你查看它的<a class="ae nv" href="https://dash.plotly.com/dash-html-components" rel="noopener ugc nofollow" target="_blank">文档</a>。</li><li id="b793" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt oj nb nc nd bi translated"><strong class="la jj"> dash_core_components </strong>库生成更高级别的组件，如控件和图形，并使用<em class="ok"> Plotly </em>的语法。例如，我们可以插入一个<code class="fe lu lv lw lx b">Button, Dropdown, Slider,DatePickerRange, ... etc.</code>。更多详情请访问官方<a class="ae nv" href="https://dash.plotly.com/dash-core-components" rel="noopener ugc nofollow" target="_blank">网站</a>。</li></ul><p id="0098" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以使用以下 python 代码开发一个简单的 Dash 应用程序:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="4b4d" class="oe lz ji lx b gy of og l oh oi">import dash <br/>import dash_core_components as dcc<br/>import dash_html_components as html<br/><br/>app = dash.Dash(__name__)<br/>app.title='Hello World'<br/>app.layout = html.Div(children=[<br/><br/>	html.H1(children='Hello Dash!', style={'textAlign':<br/>		'center', 'color': '#7FDBFF'}),<br/>	<br/>	html.Div(children='''<br/>		Dash: A web application framework for Python.<br/>		'''),<br/>	<br/>	dcc.Graph(<br/>		id='example-graph',<br/>		figure={<br/>			'data': [<br/>				{'x': [1, 2, 3], 'y': [4, 1, 2], 'type': 'bar',<br/>					'name': 'SF'},<br/>				{'x': [1, 2, 3], 'y': [2, 4, 5], 'type': 'bar',<br/>				'name': u'Montréal'},<br/>			],<br/>			'layout': {<br/>				'title': 'Dash Data Visualization'<br/>				}<br/>			}<br/>	),<br/>])</span><span id="a7c9" class="oe lz ji lx b gy ol og l oh oi">if __name__ == '__main__':<br/>	app.run_server(debug=True)</span></pre><p id="f7b3" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选项<code class="fe lu lv lw lx b">debug=True</code>允许考虑最近的修改，而无需重新运行应用程序。<br/>要运行应用程序，我们使用以下命令行:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="58cd" class="oe lz ji lx b gy of og l oh oi">python app_file.py</span></pre><p id="6e70" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在<a class="ae nv" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8050/ </a>上运行以下应用程序:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/2470d9e0b6f78ef3948610d187dd88d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wgQxWMWEGPuQowbO_CWD_Q.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><h2 id="feec" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">式样</h2><p id="3c3e" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">可以添加一个覆盖应用程序基本样式的 CSS 文件，允许您自定义图形和 HTML 元素。为此，文件夹的结构应该如下所示:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="83d4" class="oe lz ji lx b gy of og l oh oi">app.py <br/>assets/ <br/>   |-- style.css <br/>   |-- custom-script.js <br/>   |-- img.png <br/>   |-- background.jpg <br/>   |-- favicon.ico</span></pre><p id="1559" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">必须将 CSS 文件和所有其他插入的图像放在一个名为<code class="fe lu lv lw lx b">assets</code>的文件夹中，以便 Dash 读取。一旦完成，我们所要做的就是使用以下 python 行指定样式表:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="8e06" class="oe lz ji lx b gy of og l oh oi">external_stylesheets=["assets/style.css"]<br/>app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span></pre><h2 id="40b4" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">引导程序</h2><p id="dcf2" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">当构建 dash-app 时，我个人更喜欢使用 Bootstrap。这是一个用于 Plotly Dash 的 python 库，包含样式化和高级元素。<br/>使用以下命令行完成设置:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="f540" class="oe lz ji lx b gy of og l oh oi">pip install dash-bootstrap-components</span></pre><p id="7721" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将 bootstrap 主题作为样式表之一包括进来是很重要的:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="d504" class="oe lz ji lx b gy of og l oh oi">external_stylesheets=["assets/style.css", dbc.themes.BOOTSTRAP]<br/>app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span></pre><p id="3be1" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Boostrap 包含了<code class="fe lu lv lw lx b">DropDownMenu, Navbar, Progress, Button, ... etc</code>等很多元素。最有用的元素之一是<code class="fe lu lv lw lx b">Layout</code>，它允许使用<em class="ok">行</em>和<em class="ok">列</em>来构建仪表板，这对应用程序的结构非常有用。<br/>欲了解更多详情，请随时访问官方<a class="ae nv" href="https://dash-bootstrap-components.opensource.faculty.ai/docs/components/alert/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="3671" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">复试</h2><p id="d6b6" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">像任何其他应用程序一样，支持图形之间的交互性是很重要的，这可以通过回调函数来实现。<br/>每个插入元素都有两个重要特征</p><ul class=""><li id="462a" class="mv mw ji la b lb lc le lf lh mx ll my lp mz lt oj nb nc nd bi translated"><strong class="la jj"> id </strong>:元素的唯一称谓</li><li id="22f2" class="mv mw ji la b lb ne le nf lh ng ll nh lp ni lt oj nb nc nd bi translated"><strong class="la jj">属性</strong>:元素与元素不同</li></ul><p id="21e4" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">链接应用程序中的两个元素的方式如下:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/80f2622b27e0219775d5438434f642a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTSJz3n44nnL_0T4SRc6jw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="875c" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种特殊情况下，第一个元素影响第二个元素:通过其<em class="ok"> id_1 </em>选择的第一个元素的<em class="ok"> property_1 </em>影响通过其<em class="ok"> id_2 </em>访问的第二个元素的<em class="ok"> property_2 </em>。</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="13cd" class="oe lz ji lx b gy of og l oh oi">from dash.dependencies import Input, Output<br/>@app.callback(<br/>    Output(component_id='id_2', component_property='property_2'),<br/>    [Input(component_id='id_1', component_property='property_1')]<br/>)<br/>def callback_function(input_value):<br/>    """<br/>    What to do<br/>    """</span></pre><p id="c988" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jj"> NB </strong>:在回调函数中可以接受多个输入。</p><h2 id="fa1f" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">隐藏物</h2><p id="aaaa" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">当开发一个应用程序时，在缓存中保存元素是非常重要的，这样可以减轻加载的负担，提高交互性，缓存允许这样做。<br/> Dash 不支持特定的缓存特性，但是克服这个问题的一个方法是在 python 中使用<code class="fe lu lv lw lx b">global variables</code>。</p><h2 id="105a" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">制表符</h2><p id="b3a3" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Dash 中的选项卡可以使用<code class="fe lu lv lw lx b">dcc.Tab</code>组件插入，其中其子项是组成选项卡的元素。</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="b274" class="oe lz ji lx b gy of og l oh oi">import dash<br/>import dash_html_components as html<br/>import dash_core_components as dcc<br/><br/>external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']<br/><br/>app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/><br/>app.layout = html.Div([<br/>    dcc.Tabs([<br/>        dcc.Tab(label='1st Tab', children=[<br/>            dcc.Graph(),<br/>            ###<br/>        ]),<br/>        dcc.Tab(label='2nd Tab', children=[<br/>            dcc.Graph(),<br/>            ###<br/>        ]),<br/>        dcc.Tab(label='3rd Tab', children=[<br/>            dcc.Graph(),<br/>            ###<br/>        ]),<br/>    ])<br/>])</span></pre><h2 id="6978" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">走廊</h2><p id="1bf0" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Dash 有一个<a class="ae nv" href="https://dash-gallery.plotly.host/Portal/" rel="noopener ugc nofollow" target="_blank">图库</a>，你可以在那里浏览和发现其他仪表盘，这是一个很好的基线和灵感来源。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="3599" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">细流</h1><p id="ba05" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Streamlit 是一个开源应用程序框架，主要用于使用 python 以快速高效的方式创建 ML 仪表盘。设置非常简单，可以使用以下命令行来执行:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="86ee" class="oe lz ji lx b gy of og l oh oi">pip install streamlit</span></pre><p id="d5ee" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与 Dash 相比，Streamlit 具有更好的缓存处理能力，这将在接下来的章节中进行介绍，因此可以使用以下流程实现更快的开发迭代:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oz"><img src="../Images/a35fb19b541a908ed3db47f189e8abff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuZwzncBnU45wgaLZR6VTg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">streamlit.io</p></figure><p id="9e09" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦创建了您的文件，您可以键入这个命令行，它将在<a class="ae nv" href="http://localhost:8501" rel="noopener ugc nofollow" target="_blank"> http://localhost:8501 </a>上运行您的应用程序</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="fe6f" class="oe lz ji lx b gy of og l oh oi">streamlit run file.py</span></pre><p id="546c" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">和 Dash 一样，可以选择模式<code class="fe lu lv lw lx b">Always re-run</code>来实时修改。</p><p id="80a2" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Streamlit 的 widgets gallery 包含多个条目，它们都可以使用一行代码插入:<code class="fe lu lv lw lx b">Markdown</code>、<code class="fe lu lv lw lx b">SelectBox</code>、<code class="fe lu lv lw lx b">Slider</code>、<code class="fe lu lv lw lx b">Plot</code>等...注意，小部件可以插入到<code class="fe lu lv lw lx b">one-page area</code>或<code class="fe lu lv lw lx b">sidebar</code>中，插入是在<code class="fe lu lv lw lx b">vertical stacking</code>之后完成的:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="7c7a" class="oe lz ji lx b gy of og l oh oi">import streamlit as st<br/>import matplotlib.image as mpimg<br/>import matplotlib.pyplot as plt<br/>from mpl_toolkits.mplot3d import Axes3D<br/>from sklearn import datasets<br/>from sklearn.decomposition import PCA<br/>import pandas as pd<br/><br/>img=mpimg.imread('imgs/streamlite_funct.png')<br/>iris = datasets.load_iris()<br/>feature_names=['sepal length (cm)',<br/>  'sepal width (cm)',<br/>  'petal length (cm)',<br/>  'petal width (cm)']<br/>database=pd.DataFrame(iris.data, columns=feature_names)<br/>database["class"]=iris.target<br/><br/># plot the first three PCA dimensions<br/>fig = plt.figure(1, figsize=(8, 6))<br/>ax = Axes3D(fig, elev=-150, azim=110)<br/>X_reduced = PCA(n_components=3).fit_transform(iris.data)<br/>ax.scatter(X_reduced[:, 0], X_reduced[:, 1], X_reduced[:, 2], c=iris.target,<br/>           cmap=plt.cm.Set1, edgecolor='k', s=40)<br/>ax.set_title("First three PCA directions")<br/>ax.set_xlabel("1st eigenvector")<br/>ax.w_xaxis.set_ticklabels([])<br/>ax.set_ylabel("2nd eigenvector")<br/>ax.w_yaxis.set_ticklabels([])<br/>ax.set_zlabel("3rd eigenvector")<br/>ax.w_zaxis.set_ticklabels([])<br/><br/>def main():<br/>    ########### Sidebar ##############################<br/>    <br/>    st.sidebar.markdown("# Hello World")<br/>    st.sidebar.selectbox('Select a tool', ["Dash", "Kibana", "Streamlit", "Bokeh"])<br/>    <br/>    st.markdown("## Multiselection")<br/>    st.multiselect('Select a tool', ["Dash", "Kibana", "Streamlit", "Bokeh"])<br/><br/>    st.markdown("## Radio buttons")<br/>    st.radio('Select a tool', ["Dash", "Kibana", "Streamlit", "Bokeh"])<br/>    <br/>    st.markdown("## Slider") <br/>    st.slider('Select a Number', min_value=1, max_value=4, value=1)<br/><br/>    st.markdown("## Image")<br/>    st.image(img, width=500)<br/><br/>    st.markdown("## DataBase")<br/>    st.dataframe(database)<br/><br/>    st.markdown("## Plot")<br/>    st.write(fig)<br/><br/>if __name__ == "__main__":<br/>    main()</span></pre><p id="3043" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们得到以下应用程序:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pa"><img src="../Images/9da13b228649b865c7beae493cbfefde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uveKgzeZq0RyVliUpjDEDQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="b47d" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">函数<code class="fe lu lv lw lx b">st.write</code>非常重要，可以用来插入很多 python 元素。要了解更多细节，我建议您阅读 streamlit 的<a class="ae nv" href="https://docs.streamlit.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="01ee" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jj">交互性</strong>:每个元素都可以被赋予一个代表其当前值的变量，接下来，它可以被用来更新另一个元素，从而更新交互性。</p><h2 id="d629" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">隐藏物</h2><p id="d3b7" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">缓存通常用于存储恒定的数据，无论在应用程序上做出何种选择，这些数据都不会改变。我们可能经常在应用程序中定义函数，但每次刷新应用程序时都不需要重新运行这些函数，我们可以使用以下 python 代码缓存这些函数:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="749b" class="oe lz ji lx b gy of og l oh oi">@st.cache  <br/>def function_1():<br/>	####</span></pre><h2 id="de12" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">制表符</h2><p id="47b8" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在许多应用程序中，选项卡可能非常重要:在 Streamlit 中实现这一点的一种方法是在侧边栏中添加一个<code class="fe lu lv lw lx b">selectbox</code>，它的选择将影响仪表板的结构，并在框的值上使用 if 语句。</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="2fdd" class="oe lz ji lx b gy of og l oh oi">st.sidebar.markdown("Tabs")<br/>tab=st.sidebar.selectbox('Select a Tab', ["Home", "Documentation", "Partners", "Contact"])<br/>if tab=="Home":<br/>	#Develop the one_pager<br/>	##<br/>elif tab=="Documentation":<br/>	###<br/>elif tab=="Partners":<br/>	###<br/>elif tab=="Contact":<br/>	###</span></pre><h2 id="3611" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">健康应用——Streamlit</h2><p id="247a" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">当我开始发现 Streamlit 时，我决定通过开发一个简单的健康应用程序来投入使用。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/1a24b3b06b420b8a84718da2eac11e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNoB1sTsG59uVMVQissR9w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="57e3" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以使用这个<a class="ae nv" href="https://agile-crag-69946.herokuapp.com" rel="noopener ugc nofollow" target="_blank"> url </a>访问应用程序，脚本托管在这个 git <a class="ae nv" href="https://github.com/ismail-mebsout/Streamlit_app" rel="noopener ugc nofollow" target="_blank">存储库</a>中。更多 app 可以访问官方<a class="ae nv" href="https://www.streamlit.io/gallery" rel="noopener ugc nofollow" target="_blank">图库</a>。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="b15d" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">散景</h1><p id="02eb" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Bokeh 是一个 python 库，允许创建一个交互式仪表板。可以使用以下命令行安装它:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="0c7d" class="oe lz ji lx b gy of og l oh oi">pip install bokeh</span></pre><p id="b14e" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，可以使用以下 python 脚本创建以下应用程序:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/908e9c3e7d38e353cd2f8b11d1e234ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fr2w1Ubb_fr8NTyalfCCiA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="9c6c" class="oe lz ji lx b gy of og l oh oi">from bokeh.io import show, curdoc<br/>from bokeh.plotting import figure, ColumnDataSource<br/>from bokeh.layouts import row, column<br/>from bokeh.models.widgets import Tabs, Panel<br/>from bokeh.models import Slider, CheckboxGroup, RadioGroup, Button, CustomJS<br/><br/><br/>#data source<br/>x = [x*0.005 for x in range(0, 200)]<br/>y = x<br/>source = ColumnDataSource(data=dict(x=x, y=y))<br/><br/>#Plots<br/>plot_1 = figure(plot_width=400, plot_height=400)<br/>plot_1.line('x', 'y', source=source, line_width=3, line_alpha=0.6)<br/><br/>plot_2=figure(tools='box_zoom, lasso_select')<br/>plot_2.circle(x=[1,2,3,4,5], y=[2,3,1,1,2])<br/>plot_2.background_fill_color = 'black'<br/><br/>plot_3=figure(tools='box_zoom, lasso_select')<br/>plot_3.circle(x=[1,2,3,4,5], y=[2,3,1,1,2])<br/><br/>#widgets<br/>slider = Slider(start=0.1, end=4, value=1, step=.1, title="power")<br/>button = Button(label='Click')<br/>checkbox = CheckboxGroup(labels=['Kibana', 'Bokeh', 'Streamlit', 'Dash']) <br/>radio = RadioGroup(labels=['Kibana', 'Bokeh', 'Streamlit', 'Dash'])<br/><br/>#Interactivity<br/>callback = CustomJS(args=dict(source=source), code="""<br/>        var data = source.data;<br/>        var f = cb_obj.value<br/>        var x = data['x']<br/>        var y = data['y']<br/>        for (var i = 0; i &lt; x.length; i++) {<br/>            y[i] = Math.pow(x[i], f)<br/>        }<br/>        source.change.emit();<br/>    """)<br/>slider.js_on_change('value', callback)<br/><br/>#Plots zoom-linking<br/>plot_2.x_range=plot_3.x_range<br/>plot_2.y_range=plot_3.y_range<br/><br/>#Tabs<br/>first=Panel(child=row(column(slider, button, checkbox, radio), plot_1), title='first')<br/>second=Panel(child=row(plot_2,plot_3), title='second')<br/>tabs=Tabs(tabs=[first, second])<br/><br/>#App<br/>curdoc().add_root(tabs)<br/>show(tabs)</span></pre><p id="136d" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意，一旦我们定义了图形<code class="fe lu lv lw lx b">plot</code>，我们就使用语法<code class="fe lu lv lw lx b">plot.graph</code>来为它分配想要的图形。使用<code class="fe lu lv lw lx b">ColumnDataSource</code>处理数据，使用<code class="fe lu lv lw lx b">row, column</code>布局。我们定制添加的小部件<code class="fe lu lv lw lx b">Slider, CheckboxGroup, RadioGroup, Button</code>，并使用 JS 回调<code class="fe lu lv lw lx b">CustomJS</code>将它们链接到图形。要在<a class="ae nv" href="http://localhost:5006/myapp" rel="noopener ugc nofollow" target="_blank">http://localhost:5006/myapp</a>上运行您的应用程序，您可以使用以下命令行:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="b4c7" class="oe lz ji lx b gy of og l oh oi">bokeh serve --show myapp.py</span></pre><h2 id="a5c2" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">走廊</h2><p id="cff2" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">和所有其他工具一样，散景一开始就有非常丰富的图库。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="fd33" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">弹性堆叠</h1><h2 id="3e8f" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">弹性搜索</h2><p id="f5a1" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Elasticsearch 是一种特殊类型的表格索引，它提供了一个更快的搜索引擎。我们可以将 pandas 数据库转换成一个<code class="fe lu lv lw lx b">Elasticbase</code>，然后使用 Kibana 可视化它，Kibana 是 stack Elastic 的可视化工具。首先，你需要根据你的操作系统下载<a class="ae nv" href="https://www.elastic.co/fr/downloads/kibana" rel="noopener ugc nofollow" target="_blank">Kibana</a>&amp;<a class="ae nv" href="https://www.elastic.co/fr/downloads/elasticsearch" rel="noopener ugc nofollow" target="_blank">elastic search</a>。安装后，我们将使用 elasticsearch 正确地索引我们的熊猫数据框架。为此，我们首先需要使用命令行启动服务 elasticsearch 和 kibana:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="5cbf" class="oe lz ji lx b gy of og l oh oi">./elasticsearch-7.6.1/bin/elasticsearch<br/>./kibana-7.6.1/bin/kibana</span></pre><p id="2146" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦 Kibana 启动，我们就可以使用这个 python 脚本向 Elasticsearch 服务发送数据</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="ed6e" class="oe lz ji lx b gy of og l oh oi">import pandas as pd<br/>from elasticsearch import Elasticsearch<br/><br/># Database loading and service openning<br/>database=pd.read_excel("data/test_db.xlsx")<br/>es_client = Elasticsearch(http_compress=True)<br/><br/>#Elasticsearch does not accept NAN values<br/>print(database.isna().sum().sum())<br/><br/>df=database.copy()<br/>INDEX="laposte" #Its name in Elasticsearch (laposte for example)<br/>TYPE= "record"<br/><br/>def rec_to_actions(df):<br/>    import json<br/>    for record in df.to_dict(orient="records"):<br/>        yield ('{ "index" : { "_index" : "%s", "_type" : "%s" }}'% (INDEX, TYPE))<br/>        yield (json.dumps(record, default=int))<br/><br/>e = Elasticsearch() <br/>r = e.bulk(rec_to_actions(df))<br/><br/>#Verify if everything went fine<br/>print(not r["errors"])</span></pre><h2 id="70e7" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">基巴纳</h2><p id="bd25" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">servie kibana 在本地主机的端口<code class="fe lu lv lw lx b">5601</code>上启动，我们可以使用地址<code class="fe lu lv lw lx b">localhost:5601</code>在浏览器中访问它。一旦进入主页面，我们可以点击<code class="fe lu lv lw lx b">Dashboard</code>和<code class="fe lu lv lw lx b">Create dashboard</code>，如下所示:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pa"><img src="../Images/e4f90a9d33e6e6d26d5da9c5daed06ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4as1_Y4pUNVcbIIzLPiMg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="5538" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们现在可以通过以下步骤添加小部件:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/818246e9723355c0d621a35e17d2767c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsQQw4SVBQR2guEvnYh2_w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="b808" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以使用光标定位插入的图形，这使得布局易于定制。请注意搜索栏的存在，其中的数据是使用 Elasticsearch 索引的，这使得查询耗时更少，并增加了仪表板的交互性，尤其是在处理大型数据库时。<strong class="la jj">交互</strong>在 kibana 中自动处理。</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/9c0cb93e5fb09d654783ae543faa8cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJhVZlwYHwfU_pke5MyE3g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><h2 id="69a3" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">制表符</h2><p id="7cfb" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">Kibana 中的选项卡可以使用 markdowns 小部件中的嵌入式链接来创建。您首先在不同的仪表板中创建所有选项卡，然后在每个选项卡中添加到其他选项卡的嵌入链接。</p><h2 id="1f68" class="oe lz ji bd ma on oo dn me op oq dp mi lh or os mk ll ot ou mm lp ov ow mo ox bi translated">走廊</h2><p id="138d" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">不要犹豫去参观基巴纳的官方<a class="ae nv" href="https://www.elastic.co/fr/demos" rel="noopener ugc nofollow" target="_blank">画廊</a>。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="15b5" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">Heroku 部署</h1><p id="266e" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">应用程序开发完成后，您可以在线托管它，这样任何人都可以使用 Url 访问它。一种方法是使用 Heroku，它提供这种有一些限制的免费服务。你首先需要注册，然后在线创建一个 heroku 应用程序，它将链接到你的 git 库。回购应具有以下结构:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="e6a8" class="oe lz ji lx b gy of og l oh oi">. <br/>├── app.py <br/>├── requirements.txt <br/>├── setup.sh <br/>└── Procfile</span></pre><p id="81c3" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以查看我的 git <a class="ae nv" href="https://github.com/ismail-mebsout/Streamlit_app" rel="noopener ugc nofollow" target="_blank">存储库</a>了解更多信息。在本地 git 文件夹上运行以下命令行:</p><pre class="nw nx ny nz gt oa lx ob oc aw od bi"><span id="5917" class="oe lz ji lx b gy of og l oh oi">heroku create<br/>git push heroku master<br/>heroku ps:scale web=1<br/>heroku open</span></pre><p id="6f6f" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你的应用程序会一直等待你在 git 中的每一次推送，以便考虑最新的变化。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="fd49" class="ly lz ji bd ma mb nq md me mf nr mh mi ko ns kp mk kr nt ks mm ku nu kv mo mp bi translated">结论</h1><p id="6ffd" class="pw-post-body-paragraph ky kz ji la b lb mq kj ld le mr km lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">应用程序和仪表板是每个项目非常重要和决定性的阶段，它们允许总结我们的工作，并通过一个本能的界面让用户更容易访问。每种技术的使用主要取决于您的交付和截止日期:一些工具允许更大的灵活性，另一些工具开发起来更快:</p><figure class="nw nx ny nz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/9ec20a5ef7be777f63b0adcdd5a136ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7D22HFHr6tp3xmwqImzbrQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="8cc0" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我个人看来，如果所有条件都满足，<code class="fe lu lv lw lx b">Dash</code>可以是最佳的搭配选项。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="5011" class="pw-post-body-paragraph ky kz ji la b lb lc kj ld le lf km lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="ok">原载于 2020 年 5 月 20 日 https://www.ismailmebsout.com</em><a class="ae nv" href="https://www.ismailmebsout.com/data-viz/" rel="noopener ugc nofollow" target="_blank"><em class="ok"/></a><em class="ok">。</em></p></div></div>    
</body>
</html>