<html>
<head>
<title>World Population from 1955 to 2020 Bar Chart Race</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从 1955 年到 2020 年的世界人口条形图竞赛</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/world-population-from-1955-to-2020-bar-chart-race-166ff307c48e?source=collection_archive---------34-----------------------#2020-08-19">https://towardsdatascience.com/world-population-from-1955-to-2020-bar-chart-race-166ff307c48e?source=collection_archive---------34-----------------------#2020-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c84a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据科学 100 天的第 6 天</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/80b5beb8092514b9fa009a05260585cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zNgvxsbKzNK5R0sKDoBiXA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ky kz ep" href="https://medium.com/u/9cd373b50e1b?source=post_page-----166ff307c48e--------------------------------" rel="noopener" target="_blank"> Durgesh Samariya </a>创作。</p></figure><p id="476f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">欢迎回到我的 100 天数据科学挑战之旅。第六天，我用 Python 制作了条形图比赛动画。对于今天的任务，我将使用从 1955 年到 2020 年的国家人口数据。</p><p id="a18a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你可以在这里阅读我以前的故事:</p><div class="lx ly gp gr lz ma"><a rel="noopener follow" target="_blank" href="/analysing-and-visualising-the-country-wise-population-from-1955-to-2020-with-pandas-matplotlib-70b3614eed6b"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd iu gy z fp mf fr fs mg fu fw is bi translated">用熊猫分析和可视化 1955 年至 2020 年的乡村人口</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">100 天数据科学的第 1、2、3 天。</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">towardsdatascience.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo ks ma"/></div></div></a></div><p id="a423" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最近，我看到了一篇关于 Ted Petrou 发布的<a class="ae lw" href="https://medium.com/dunder-data/bar-chart-race-python-package-official-release-78a420e182a2" rel="noopener">官方发布 bar_chart_race </a>的帖子。在他的文章中，他提供了一个关于如何使用 bar_chart_race 包创建条形图比赛的优秀教程。点击查看官方文件<a class="ae lw" href="https://pypi.org/project/bar-chart-race/" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="931c" class="mw mx it bd my mz na dn nb nc nd dp ne lj nf ng nh ln ni nj nk lr nl nm nn no bi translated">内容</h2><ul class=""><li id="aca1" class="np nq it lc b ld nr lg ns lj nt ln nu lr nv lv nw nx ny nz bi translated">条形图比赛包的安装</li><li id="e5b7" class="np nq it lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">导入所需的库</li><li id="6b3f" class="np nq it lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">加载数据</li><li id="a741" class="np nq it lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">创建条形图竞赛</li></ul></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="8e53" class="of mx it bd my og oh oi nb oj ok ol ne jz om ka nh kc on kd nk kf oo kg nn op bi translated">条形图比赛包的安装</h1><p id="d44f" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">使用 pip 安装:</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="9bb0" class="mw mx it ou b gy oy oz l pa pb">pip3 install bar_chart_race</span></pre><p id="ab67" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">或者使用 anaconda:</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="9c1d" class="mw mx it ou b gy oy oz l pa pb">conda install -c conda-forge bar_chart_race</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="99af" class="of mx it bd my og oh oi nb oj ok ol ne jz om ka nh kc on kd nk kf oo kg nn op bi translated">导入所需的库</h1><p id="1adf" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">对于这个项目，我们只需要熊猫，条形图种族库。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="ad02" class="mw mx it ou b gy oy oz l pa pb"># to load data<br/>import pandas as pd</span><span id="55db" class="mw mx it ou b gy pc oz l pa pb">#bar chart race<br/>import bar_chart_race as bcr</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="143c" class="of mx it bd my og oh oi nb oj ok ol ne jz om ka nh kc on kd nk kf oo kg nn op bi translated">正在加载数据集</h1><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="a4d3" class="mw mx it ou b gy oy oz l pa pb">%time population = pd.read_csv('./data/Countries Population from 1995 to 2020.csv')</span></pre><p id="518f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在条形图比赛中，您的数据必须采用特定的格式:</p><ul class=""><li id="d04d" class="np nq it lc b ld le lg lh lj pd ln pe lr pf lv nw nx ny nz bi translated">每个条目代表一个时间</li><li id="bc98" class="np nq it lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">每个特征都有某个特定值</li><li id="3843" class="np nq it lc b ld oa lg ob lj oc ln od lr oe lv nw nx ny nz bi translated">时间应该设置为。指数</li></ul><p id="42ec" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">让我们看看我们的数据是什么样子的。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="dca8" class="mw mx it ou b gy oy oz l pa pb">population.head()</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pg ph l"/></div></figure><p id="db82" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">所以很明显，我们的数据格式不适合输入 bar_chart_race。首先，对数据进行相关修改。</p><p id="4ecc" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu">步骤 1 </strong> —删除除年份、国家和人口之外的所有列。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="1caf" class="mw mx it ou b gy oy oz l pa pb">pop = population.drop(['Yearly % Change', 'Yearly Change', 'Migrants (net)', 'Median Age', 'Fertility Rate', 'Density (P/Km²)', 'Urban Pop %', 'Urban Population', 'Country<strong class="ou iu">\'</strong>s Share of World Pop %', 'World Population', 'Country Global Rank' ], axis = 1)</span></pre><p id="cca2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu">第二步</strong> —从 pop 数据帧创建 pivot_table，其中<code class="fe pi pj pk ou b">Year</code>为索引；每个国家作为列，人口作为值。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="05d6" class="mw mx it ou b gy oy oz l pa pb">df = pop.pivot_table('Population',['Year'], 'Country')</span></pre><p id="dd50" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时候你的数据是不有序的，所以一定要把时间列排序。在我们的例子中，它是<code class="fe pi pj pk ou b">Year</code>。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="6884" class="mw mx it ou b gy oy oz l pa pb">df.sort_values(list(df.columns),inplace=True)<br/>df = df.sort_index()<br/>df</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pg ph l"/></div></figure><p id="a012" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在我们的数据已经准备好了，所以让我们创建一个条形图比赛。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="c430" class="of mx it bd my og oh oi nb oj ok ol ne jz om ka nh kc on kd nk kf oo kg nn op bi translated">创建条形图竞赛</h1><p id="3707" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">你可以简单地使用<code class="fe pi pj pk ou b">bcr</code>中的<code class="fe pi pj pk ou b">.bar_chart_race()</code>方法。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="16e8" class="mw mx it ou b gy oy oz l pa pb">bcr.bar_chart_race(df)</span></pre><p id="0419" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">上面给的步骤很简单，没有我想要的那么吸引人。所以还是定制吧。让我们看看最终的代码。您可以在<a class="ae lw" href="https://www.dexplo.org/bar_chart_race/" rel="noopener ugc nofollow" target="_blank"> bar_chart_plot 文档</a>中找到所有功能和不同的可能性。</p><pre class="kj kk kl km gt ot ou ov ow aw ox bi"><span id="9460" class="mw mx it ou b gy oy oz l pa pb">bcr.bar_chart_race(<br/>    df=df,<br/>    filename=None,<br/>    orientation='h',<br/>    sort='desc',<br/>    n_bars=10,<br/>    fixed_order=False,<br/>    fixed_max=True,<br/>    steps_per_period=10,<br/>    interpolate_period=False,<br/>    label_bars=True,<br/>    bar_size=.90,<br/>    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va':'center'},<br/>    period_summary_func=lambda v, r: {'x': .99, 'y': .18,<br/>             's': f'Population<strong class="ou iu">{</strong>v.nlargest(39).sum()<strong class="ou iu">:</strong>,.0f<strong class="ou iu">}</strong>',<br/>             'ha': 'right', 'size': 8, 'family': 'Courier New'},<br/>    period_length=500,<br/>    figsize=(6.5,5),<br/>    dpi=144,<br/>    cmap='dark12',<br/>    title='Population by Country',<br/>    title_size='',<br/>    bar_label_size=7,<br/>    tick_label_size=5,<br/>    shared_fontdict={'family' : 'Helvetica','color' : '.1'},<br/>    scale='linear',<br/>    writer=None,<br/>    fig=None,<br/>    bar_kwargs={'alpha': .7},<br/>    filter_column_colors=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/80b5beb8092514b9fa009a05260585cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zNgvxsbKzNK5R0sKDoBiXA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">最终输出。由<a class="ky kz ep" href="https://medium.com/u/9cd373b50e1b?source=post_page-----166ff307c48e--------------------------------" rel="noopener" target="_blank"> Durgesh Samariya </a>创作。</p></figure><p id="ee21" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我要感谢<a class="ky kz ep" href="https://medium.com/u/cf7f60f2eeb3?source=post_page-----166ff307c48e--------------------------------" rel="noopener" target="_blank"> Ted Petrou </a>创建了这么棒的库和教程。除此之外，还要感谢 Vinay Shaw——这个<a class="ae lw" href="https://www.kaggle.com/vinayshaw/india-s-covid-19-recovery-bar-chart-race" rel="noopener ugc nofollow" target="_blank">内核</a>的作者，他向我介绍了这个美丽的库。</p><h1 id="1dad" class="of mx it bd my og pl oi nb oj pm ol ne jz pn ka nh kc po kd nk kf pp kg nn op bi translated">最后的话</h1><p id="11bf" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">今天到此为止。今天，我学习并创建了我的第一个条形图比赛可视化。未来期待从中创造一些有趣的东西。我希望这篇文章对你有帮助。所有数据分析和可视化的代码都可以在这个<a class="ae lw" href="https://github.com/themlphdstudent/100DaysofDataScience" rel="noopener ugc nofollow" target="_blank"> GitHub 库</a>或者<a class="ae lw" href="https://www.kaggle.com/themlphdstudent/country-wise-population-bar-chart-race" rel="noopener ugc nofollow" target="_blank"> Kaggle 内核</a>中找到。</p><p id="5fd5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu">感谢阅读。</strong></p><p id="82b5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我感谢任何反馈。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="ce42" class="of mx it bd my og oh oi nb oj ok ol ne jz om ka nh kc on kd nk kf oo kg nn op bi translated">100 天的数据科学进步</h1><div class="lx ly gp gr lz ma"><a rel="noopener follow" target="_blank" href="/analysing-and-visualising-the-country-wise-population-from-1955-to-2020-with-pandas-matplotlib-70b3614eed6b"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd iu gy z fp mf fr fs mg fu fw is bi translated">用熊猫分析和可视化 1955 年至 2020 年的乡村人口</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">100 天数据科学的第 1、2、3 天。</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">towardsdatascience.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo ks ma"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="2642" class="mw mx it bd my mz na dn nb nc nd dp ne lj nf ng nh ln ni nj nk lr nl nm nn no bi translated">关于我</h2><p id="696d" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">我是<a class="ae lw" href="https://durgeshsamariya.github.io" rel="noopener ugc nofollow" target="_blank"> Durgesh Samariya </a>，澳大利亚费杜尼大学机器学习博士三年级学生。</p><h2 id="683b" class="mw mx it bd my mz na dn nb nc nd dp ne lj nf ng nh ln ni nj nk lr nl nm nn no bi translated">在互联网上:</h2><p id="590b" class="pw-post-body-paragraph la lb it lc b ld nr ju lf lg ns jx li lj oq ll lm ln or lp lq lr os lt lu lv im bi translated">在<a class="ae lw" href="https://www.linkedin.com/in/durgeshsamariya/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lw" href="https://www.instagram.com/themlphdstudent/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>、<a class="ae lw" href="https://www.kaggle.com/themlphdstudent" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>、<a class="ae lw" href="https://github.com/themlphdstudent" rel="noopener ugc nofollow" target="_blank"> GitHub </a>、<a class="ae lw" href="https://pub.towardsai.net/@themlphdstudent" rel="noopener ugc nofollow" target="_blank"> Medium </a>上关注我。</p><p id="c5d4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你喜欢阅读这样的故事，并希望支持我的写作，可以考虑成为一名<a class="ae lw" href="https://medium.com/@themlphdstudent/membership" rel="noopener">灵媒</a>。每月支付 5 美元，你就可以无限制地阅读媒体上的故事。如果你使用我的注册链接，我会收到一小笔佣金。</p><p id="c5e5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu">已经是会员了</strong>？<a class="ae lw" href="https://medium.com/subscribe/@themlphdstudent" rel="noopener">订阅</a>在我发布时得到通知。</p></div></div>    
</body>
</html>