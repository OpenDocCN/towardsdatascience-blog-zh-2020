<html>
<head>
<title>Building a Twitter Bot with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 构建一个 Twitter 机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-twitter-bot-with-python-89959ef2607f?source=collection_archive---------12-----------------------#2020-02-02">https://towardsdatascience.com/building-a-twitter-bot-with-python-89959ef2607f?source=collection_archive---------12-----------------------#2020-02-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="85b9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何一步一步地构建机器人</h2></div><p id="75cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你能想象拥有一个根据一周中的不同日子发布不同推文的推特机器人吗？这在 Python 和<a class="ae lb" href="http://docs.tweepy.org/en/latest/index.html" rel="noopener ugc nofollow" target="_blank"> Tweepy </a>中是可能的。继续阅读这个故事，你会发现如何用 Python 构建一个<strong class="kh ir"> Twitter 机器人。</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/def834398c57acfa3872c83fb2527f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qxaX9u8ITf48iwnw"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@stereophototyp?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莎拉·库菲</a>在<a class="ae lb" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="6264" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">建立一个 Twitter 开发账户和 Tweepy</h1><p id="c37a" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">首先，我们需要安装<em class="mp"> tweepy </em>。我们可以使用 pip 命令轻松地在终端中安装它:</p><pre class="ld le lf lg gt mq mr ms mt aw mu bi"><span id="3efd" class="mv lt iq mr b gy mw mx l my mz">pip install tweepy</span></pre><p id="1b2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了，现在我们已经安装了<em class="mp"> Python </em>库<em class="mp"> Tweepy </em>。接下来，我们需要创建一个<a class="ae lb" href="https://developer.twitter.com/en.html" rel="noopener ugc nofollow" target="_blank"> Twitter 开发者账户</a>。</p><p id="56f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Twitter 提供了一个开发者平台，该平台提供了一个 API 来管理和执行我们的 Twitter 帐户中的某些活动。可以看一下<a class="ae lb" href="https://developer.twitter.com/en/docs" rel="noopener ugc nofollow" target="_blank"> Twitter API 文档</a>。我们可以通过这个 API 执行多项任务。请看下面其中的一些:</p><ul class=""><li id="ba5a" class="na nb iq kh b ki kj kl km ko nc ks nd kw ne la nf ng nh ni bi translated"><strong class="kh ir">发布</strong>和<strong class="kh ir">检索</strong>的推文</li><li id="55cd" class="na nb iq kh b ki nj kl nk ko nl ks nm kw nn la nf ng nh ni bi translated"><strong class="kh ir">关注</strong>和<strong class="kh ir">不关注</strong>用户</li><li id="ff54" class="na nb iq kh b ki nj kl nk ko nl ks nm kw nn la nf ng nh ni bi translated">发布<strong class="kh ir">直接消息</strong></li></ul><p id="fd4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，在我们能够使用 Twitter API 端点之前，我们需要创建一个开发人员帐户并生成我们的 API 密钥。可以在这里直接<a class="ae lb" href="https://developer.twitter.com/en/application/use-case" rel="noopener ugc nofollow" target="_blank">申请开发者账号。在回答了几个关于您计划如何使用 API 和接受<em class="mp"> Twitter 开发者协议</em>的问题后，您将被授予访问开发者仪表板的权限。</a></p><p id="1de0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您被授权访问仪表板，登录<a class="ae lb" href="https://developer.twitter.com/" rel="noopener ugc nofollow" target="_blank">开发人员网站</a>并创建您的第一个应用程序。这一步将自动生成您的消费者 API 密钥和您应该保密的访问令牌:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/9153a7ca98b4da4f1580b9ad1cfc460c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QFtxblcvwVQHLcBj"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Twitter API 键</p></figure><p id="e20a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从 Twitter 开发平台，我们能够编辑应用程序权限。我已经授予我的应用程序读取、写入和发送直接消息的权限。</p><p id="e80c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，开发者帐户应该链接到您想要激活 bot 的 Twitter 帐户。例如，我使用我的<a class="ae lb" href="https://twitter.com/cryptonewsandp1" rel="noopener ugc nofollow" target="_blank"> Crypto News </a> Twitter 账户，在那里我创建了我在本文中描述的 Twitter bot。</p><h1 id="b92c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">用 Python 和 Tweepy 构建一个 Twitter 机器人</h1><p id="4f09" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">好了，让我们开始构建我们的 Twitter 机器人。如前所述，我们将使用<a class="ae lb" href="http://docs.tweepy.org/en/latest/install.html" rel="noopener ugc nofollow" target="_blank"> Tweepy 库</a>，这将使我们的工作更加容易。</p><p id="8471" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们进口<em class="mp"> tweepy </em>。Tweepy 将通过我们的秘密密钥为我们管理 API 的认证。</p><p id="ae4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如下面的代码摘录所示，我们通过创建一个<strong class="kh ir"> <em class="mp"> OAuthHandler </em> </strong>实例来处理我们的登录<strong class="kh ir"> <em class="mp">，通过传递消费者密钥和消费者秘密作为参数。</em></strong></p><p id="4105" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，为了能够向 API 发出请求，我们应该发回一个访问令牌。出于这个原因，我们使用<em class="mp"> auth.set_access_token </em>方法在会话期间存储访问请求令牌。</p><p id="99c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，<strong class="kh ir">我们准备好通过 Python </strong>管理我们的 Twitter 账户。请注意，我已经包含了<em class="mp"> XXX </em>而不是我真正的密钥。用你的秘密密钥替换掉<em class="mp"> XXX </em>，你可以从你的<em class="mp"> Twitter 开发者仪表板</em>中获得。</p><pre class="ld le lf lg gt mq mr ms mt aw mu bi"><span id="b54d" class="mv lt iq mr b gy mw mx l my mz">import tweepy <br/>import datetime </span><span id="01e7" class="mv lt iq mr b gy no mx l my mz">consumer_key = 'XXXX' <br/>consumer_secret = 'XXXX' <br/>access_token = 'XXX' <br/>access_token_secret = 'XXXX' </span><span id="065b" class="mv lt iq mr b gy no mx l my mz">auth = tweepy.OAuthHandler(consumer_key, consumer_secret) </span><span id="7bde" class="mv lt iq mr b gy no mx l my mz">auth.set_access_token(access_token, access_token_secret)</span><span id="fd31" class="mv lt iq mr b gy no mx l my mz">api = tweepy.API(auth)</span></pre><p id="8c43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的变量<em class="mp"> api </em>是我们存储认证设置的地方。我们将使用它向 Twitter API 发出所有请求。</p><p id="eafa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经完成了工作的一半。接下来，我们可以使用<em class="mp"/><strong class="kh ir"><em class="mp">update _ status 方法</em>来发布推文。</strong></p><p id="bc37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个 twitter 机器人的想法是根据一周中的日期发布不同的推文。这可以通过使用<em class="mp"> if 语句</em>来存储 tweet 以根据当天发布来轻松完成。让我们在代码中构建逻辑。</p><pre class="ld le lf lg gt mq mr ms mt aw mu bi"><span id="ecc3" class="mv lt iq mr b gy mw mx l my mz">import datetime</span><span id="230e" class="mv lt iq mr b gy no mx l my mz">def publictweet():<br/>    if datetime.date.today().weekday() == 0:<br/>        tweettopublish = 'Hi everyone, today is Monday.   #Monday '<br/>    if datetime.date.today().weekday() == 1:<br/>        tweettopublish = 'Enjoy your Tuesday.  #Tuesday'<br/>    if datetime.date.today().weekday() == 2:<br/>        tweettopublish = 'Third week of the Week. #Wednesday'<br/>    if datetime.date.today().weekday() == 3:<br/>        tweettopublish = 'Thursday. I cannot wait for the Weekend'<br/>    if datetime.date.today().weekday() == 4:<br/>        tweettopublish = 'Friday...Finally'<br/>    if datetime.date.today().weekday() == 5:<br/>        tweettopublish = 'Great it is Saturday #weekend #Saturday'<br/>    if datetime.date.today().weekday() == 6:<br/>        tweettopublish = 'Sunday morning...#Weekend #enjoy '</span><span id="3faa" class="mv lt iq mr b gy no mx l my mz">   api.update_status(tweettopublish)<br/>   print(tweettopublish)</span></pre><p id="f2c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<em class="mp">datetime</em>library 和<em class="mp"> weekday </em>方法来知道今天是星期几。例如，如果今天是<em class="mp">星期日</em>，我们运行下面的代码，我们将得到<em class="mp"> 6 </em>作为结果:</p><pre class="ld le lf lg gt mq mr ms mt aw mu bi"><span id="3fb5" class="mv lt iq mr b gy mw mx l my mz">print(datetime.date.today().weekday())</span><span id="9582" class="mv lt iq mr b gy no mx l my mz"># above code will print 6 if today was Sunday, 0 if today was Monday, 1 if today was Tuesday and so on.</span></pre><p id="6b44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，<em class="mp"> if 语句中只有一个</em>将为真。因此，这将是我们将保存在变量<em class="mp"> tweettoppublish </em>中的 Tweet。</p><p id="2c32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，通过方法<em class="mp">update _ status(tweettopublish)</em>，我们能够在我们的 Twitter 时间轴中发布推文。正如你在下面看到的，今天是星期天，因此，通过运行<em class="mp"> publictweet </em>函数，API 正在定位星期天的 tweet。</p><pre class="ld le lf lg gt mq mr ms mt aw mu bi"><span id="b6e0" class="mv lt iq mr b gy mw mx l my mz">publictweet()</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/4928d939e1b7c14054a43cbf6d46d18e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1HjnW9BZd62OI3rl"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">用 Python 构建一个 Twitter 机器人</p></figure><h1 id="2ba9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Python Twitter Bot 中包含的其他功能</h1><p id="7514" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">除了发布推文，我们还可以使用 Python Twitter Bot 执行一些其他很酷的任务。例如，我们可以:</p><ul class=""><li id="fccd" class="na nb iq kh b ki kj kl km ko nc ks nd kw ne la nf ng nh ni bi translated">使用<a class="ae lb" href="http://docs.tweepy.org/en/latest/api.html#user-methods" rel="noopener ugc nofollow" target="_blank">用户方法</a>检索特定 Twitter 用户的信息</li><li id="1bf0" class="na nb iq kh b ki nj kl nk ko nl ks nm kw nn la nf ng nh ni bi translated">通过<a class="ae lb" href="http://docs.tweepy.org/en/latest/api.html#direct-message-methods" rel="noopener ugc nofollow" target="_blank">直邮方式</a>向用户发送直邮信息</li><li id="679e" class="na nb iq kh b ki nj kl nk ko nl ks nm kw nn la nf ng nh ni bi translated">使用<a class="ae lb" href="http://docs.tweepy.org/en/latest/api.html#friendship-methods" rel="noopener ugc nofollow" target="_blank">交友方式</a>关注和取消关注用户</li><li id="bf15" class="na nb iq kh b ki nj kl nk ko nl ks nm kw nn la nf ng nh ni bi translated">使用<a class="ae lb" href="http://docs.tweepy.org/en/latest/api.html#block-methods" rel="noopener ugc nofollow" target="_blank">封锁方法</a>封锁和解除封锁用户</li></ul><h1 id="526e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">包扎</h1><p id="f86b" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">只用了几行代码，我们就成功地构建了一个令人惊叹的 Twitter 机器人，并且现在已经在我们的 Twitter 账户上运行了！</p><p id="c06b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">享受你的新机器人，并随时扩展它的新功能！感谢您的阅读！</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="7713" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mp">原载于 2020 年 2 月 2 日 https://codingandfun.com</em><em class="mp">的</em> <a class="ae lb" href="https://codingandfun.com/building-a-twitter-bot-with-python/" rel="noopener ugc nofollow" target="_blank"> <em class="mp">。</em></a></p></div></div>    
</body>
</html>