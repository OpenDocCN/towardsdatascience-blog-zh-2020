<html>
<head>
<title>Kaggle Twitter Sentiment Analysis: NLP &amp; Text Analytics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kaggle Twitter 情感分析:自然语言处理和文本分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/twitter-sentiment-analysis-nlp-text-analytics-b7b296d71fce?source=collection_archive---------36-----------------------#2020-05-18">https://towardsdatascience.com/twitter-sentiment-analysis-nlp-text-analytics-b7b296d71fce?source=collection_archive---------36-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0605" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python 中的计数向量器和支持向量分类器对微博是否与仇恨相关进行分类</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/21efe719691cd359c76c2f73c803ec31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FoRvsEjXPg4N_Sn5sEc0tQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@yucelmoran?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">于切尔·莫兰</a>在<a class="ae ky" href="https://unsplash.com/s/photos/twitter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a8fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你好 Medium 和 TDS 家族！</p><p id="a19a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将谈论如何使用 Python 中的 CountVectorizer 来分类推文是否是种族主义/性别歧视相关的推文。在本教程中，我将使用 Google Colab 进行编程。</p><p id="2917" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看<strong class="lb iu">视频版</strong>这里:<a class="ae ky" href="https://youtu.be/DgTG2Qg-x0k" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">https://youtu.be/DgTG2Qg-x0k</strong></a></p><p id="b6f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里找到我的<strong class="lb iu">完整代码</strong>:<a class="ae ky" href="https://github.com/importdata/Twitter-Sentiment-Analysis" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">https://github.com/importdata/Twitter-Sentiment-Analysis</strong></a></p><h1 id="c45f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据收集</h1><p id="a091" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们将使用 Kaggle.com 来查找数据集。使用下面的链接访问 Kaggle 上的数据集。</p><div class="ms mt gp gr mu mv"><a href="https://www.kaggle.com/arkhoshghalb/twitter-sentiment-analysis-hatred-speech" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">推特情感分析</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">检测仇恨推文，由分析 Vidhya 提供</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">www.kaggle.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj ks mv"/></div></div></a></div><h2 id="8b74" class="nk lw it bd lx nl nm dn mb nn no dp mf li np nq mh lm nr ns mj lq nt nu ml nv bi translated"><em class="nw"> 1。了解数据集</em></h2><p id="6471" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们阅读数据集的上下文来理解问题陈述。</p><p id="f5d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在训练数据中，如果推文与种族主义或性别歧视情绪相关联，则推文被标记为“1”。否则，推文将被标记为“0”。</p><h2 id="ee7a" class="nk lw it bd lx nl nm dn mb nn no dp mf li np nq mh lm nr ns mj lq nt nu ml nv bi translated">2.下载数据集</h2><p id="b394" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在您已经了解了数据集，接下来下载两个 csv 文件——训练和测试数据。只需点击“下载(5MB)”</p><p id="5202" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载数据集后，确保解压文件。</p><p id="b45a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们转到 Google Colab！</p><h1 id="9841" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据探索(探索性数据分析)</h1><p id="245b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们看看训练和测试数据是什么样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/676c0f1a50662a104defbe4d9dcacf62.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*NKxzN8XAQPpOG8HK1rFi-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查训练和测试数据</p></figure><p id="4696" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意这里有一些特殊的字符，比如@、#、！，等等。我们将在稍后的数据清理步骤中删除这些字符。</p><p id="54d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查是否有任何缺失值。训练和测试数据都没有缺失值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2097237a0e19450997171662f550e1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*KpKwouzkeaD9Q28JQE5rxg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查训练数据的缺失值</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/1d6b12fbe8588c829ee401bf2c7e0282.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*EfhWZ-nVsPkKYCtQnVq0QA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检查测试数据的缺失值</p></figure><h1 id="a3c2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据清理</h1><p id="3b58" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们将使用 tweet 预处理器库清理数据。下面是链接:<a class="ae ky" href="https://pypi.org/project/tweet-preprocessor/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/tweet-preprocessor/</a></p><p id="6b9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个库删除网址，标签，提及，保留字(RT，FAV)，表情符号和表情符号。</p><p id="66fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还将使用正则表达式库来删除 tweet-preprocessor 库没有的其他特殊情况。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据清理功能</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/fb05c127bd202b2dd0d4e70165a03652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f98Ks3u20kpbOu53FY8SgA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">比较原始推文和清理过的推文</p></figure><h1 id="2a4b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">测试和训练分离</h1><p id="2a88" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们已经清理了数据，我们将使用 train_test_split 函数进行测试和训练分割。</p><p id="fa95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用 70%的数据作为训练数据，剩余的 30%作为测试数据。</p><h1 id="a4ae" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用 CountVectorizer 对推文进行矢量化</h1><p id="a5e5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在，我们将把文本转换成数字形式，因为我们的模型不能理解人类语言。我们将使用 CountVectorizer 对推文进行矢量化。CountVectorizer 提供了一种简单的方法来标记一组文本文档并构建已知单词的词汇表。</p><p id="de59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，假设我们有一个如下所示的文本文档列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计数矢量器示例</p></figure><p id="20b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CountVectorizer 组合所有文档并对它们进行标记。然后计算每个文档中出现的次数。结果如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/33df2b6e25a27794ba906288dead90d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5BDAiZvEiEVkmUsPwmK2uQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计数矢量器示例结果</p></figure><h1 id="c177" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">模型结构</h1><p id="6cfb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们已经对所有的推文进行了矢量化，我们将建立一个模型来对测试数据进行分类。</p><p id="be2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用监督学习算法，支持向量分类器(SVC)。它广泛用于二元分类和多类分类。</p><p id="c7d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在 scikit-learn 文档页面上找到更多解释:<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html" rel="noopener ugc nofollow" target="_blank">https://sci kit-learn . org/stable/modules/generated/sk learn . SVM . SVC . html</a></p><h1 id="2259" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">准确(性)</h1><p id="64bd" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">开始了。准确率竟然是 95%！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/ac177d38ace591d348d030827bc5ed00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*PLCmbMDKF3Uw50b2fh5KBA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">SVC 准确度分数</p></figure></div></div>    
</body>
</html>