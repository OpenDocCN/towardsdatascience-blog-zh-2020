<html>
<head>
<title>Pass Arguments to Selenium Test Functions in Pytest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将参数传递给Pytest中的Selenium测试函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pass-arguments-to-selenium-test-functions-in-pytest-b6c76a320ecd?source=collection_archive---------25-----------------------#2020-04-26">https://towardsdatascience.com/pass-arguments-to-selenium-test-functions-in-pytest-b6c76a320ecd?source=collection_archive---------25-----------------------#2020-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1118" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从命令行传递用户名和密码进行Selenium测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33b6f84fa24f244e47cc2105bb713cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5bdlKkcy4jY76veELXPyg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@neonbrand?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae ky" href="https://unsplash.com/s/photos/automation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="b783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试硒的功能并不容易。尤其是当我们必须传递参数时，比如用户名和密码。我解决这些问题有些困难。所以我写了这篇文章，希望能节省你的时间。</p><h1 id="9cef" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用pytest fixture传递参数</h1><p id="e338" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">下面是一个简单的例子来说明如何传递参数。首先，我们需要编写一个<code class="fe ms mt mu mv b">conftest.py</code>文件来允许pytest在执行命令行时接受参数。延伸阅读:<a class="ae ky" href="https://stackoverflow.com/questions/34466027/in-pytest-what-is-the-use-of-conftest-py-files" rel="noopener ugc nofollow" target="_blank">conftest . py文件有什么用？</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="32a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="17a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的，输出看起来没问题。我们重写了<code class="fe ms mt mu mv b">play.py</code>并在下面展示了两个硒的例子。</p><h1 id="da22" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">一个简单的硒的例子</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2768" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们添加硒:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="95cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="5d53" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">一个复杂的硒的例子</h1><p id="ffa9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们在向TestCase类传递参数时会出错(原因在<strong class="lb iu">失败尝试</strong>部分)，所以我使用一个<code class="fe ms mt mu mv b">test_ftse_links()</code>函数来测试<code class="fe ms mt mu mv b">ftse_links()</code>中的所有函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ccb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5ddd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在<code class="fe ms mt mu mv b">conftest.py</code>中使用了<code class="fe ms mt mu mv b">pytest.skip()</code>。如果我们没有传递参数，相关的测试将被跳过。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="8691" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">失败的尝试</h1><p id="bd44" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">以下是一些失败的尝试。如果你知道为什么和如何解决它们，请留下评论，我会更新帖子。</p><h2 id="da58" class="my lw it bd lx mz na dn mb nb nc dp mf li nd ne mh lm nf ng mj lq nh ni ml nj bi translated">无法将pytest fixture传递给TestCase类</h2><p id="72b2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">下面是一些错误案例，我试图将参数传递给TestCase类，但失败了。</p><p id="ba7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">错误案例1:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="58ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="682e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">错误情况2:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="cd8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="b441" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><code class="fe ms mt mu mv b">sys.argv</code>不支持pytest</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6224" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用Python运行这个文件没有错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7de7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是使用Pytest会导致一个问题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2b42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7cc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">查看我的其他帖子上</strong> <a class="ae ky" href="https://medium.com/@bramblexu" rel="noopener"> <strong class="lb iu">中</strong> </a> <strong class="lb iu">与</strong> <a class="ae ky" href="https://bramblexu.com/posts/eb7bd472/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">一个分类查看</strong> </a> <strong class="lb iu">！<br/> GitHub: </strong> <a class="ae ky" href="https://github.com/BrambleXu" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">荆棘徐</strong> </a> <strong class="lb iu"> <br/>领英:</strong> <a class="ae ky" href="https://www.linkedin.com/in/xu-liang-99356891/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">徐亮</strong> </a> <strong class="lb iu"> <br/>博客:</strong><a class="ae ky" href="https://bramblexu.com" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a></p><h1 id="ea70" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">参考</h1><ul class=""><li id="bed1" class="nk nl it lb b lc mn lf mo li nm lm nn lq no lu np nq nr ns bi translated">pytest注释行:<a class="ae ky" href="https://docs.pytest.org/en/latest/example/simple.html#pass-different-values-to-a-test-function-depending-on-command-line-options" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/latest/example/simple . html # pass-different-values-to-a-test-function-depending-on-command-line-options</a></li><li id="5a3b" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated">py test skip:<a class="ae ky" href="https://docs.pytest.org/en/latest/example/simple.html#control-skipping-of-tests-according-to-command-line-option" rel="noopener ugc nofollow" target="_blank">https://docs . py test . org/en/latest/example/simple . html # control-skip-of-tests-by-command-line-option</a></li><li id="bf7f" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated">pytest命令行:<a class="ae ky" href="https://stackoverflow.com/questions/40880259/how-to-pass-arguments-in-pytest-by-command-line/42145604" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/40880259/how-to-pass-arguments-in-pytest-by-command-line/42145604</a></li><li id="4376" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated">conf test . py:<a class="ae ky" href="https://stackoverflow.com/questions/34466027/in-pytest-what-is-the-use-of-conftest-py-files" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/34466027/in-py test-what-the-use-of-conf test-py-files</a></li></ul></div></div>    
</body>
</html>