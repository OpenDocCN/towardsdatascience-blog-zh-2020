# å»ºæ¨¡å›å½’æ ‘

> åŸæ–‡ï¼š<https://towardsdatascience.com/modelling-regression-trees-b376e959d02e?source=collection_archive---------11----------------------->

## å¦‚ä½•ç¼–å†™è¿™ä¸ªç»å…¸çš„æœºå™¨å­¦ä¹ ç®—æ³•(Python)

![](img/9382c6265dbc0bca78dd4c76573d8159.png)

ğŸ‡¨ğŸ‡­Â·å…‹åŠ³è¿ªå¥¥Â·æ–½ç“¦èŒ¨| @purzlbaum åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

å†³ç­–æ ‘å¯èƒ½æ˜¯æœ€æµè¡Œçš„æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ä¸€ã€‚åœ¨æˆ‘çš„å¸–å­ *"* [*å†³ç­–æ ‘å®Œå…¨æŒ‡å—*](/the-complete-guide-to-decision-trees-28a4e3c7be14) *s"* ä¸­ï¼Œæˆ‘è¯¦ç»†æè¿°äº† DT:å®ƒä»¬åœ¨ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ï¼Œä¸åŒçš„ DT ç±»å‹å’Œç®—æ³•ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚æˆ‘å·²ç»è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ç¼–å†™åˆ†ç±»æ ‘ï¼Œç°åœ¨è½®åˆ°å›å½’æ ‘äº†ã€‚

**å›å½’æ ‘ä½¿ç”¨æ•°å­—ç›®æ ‡å˜é‡**ã€‚ä¸ç›®æ ‡å˜é‡æ˜¯å®šæ€§çš„åˆ†ç±»æ ‘ä¸åŒï¼Œå›å½’æ ‘ç”¨äºé¢„æµ‹è¿ç»­è¾“å‡ºå˜é‡ã€‚å¦‚æœæ‚¨æƒ³è¦é¢„æµ‹è¯¸å¦‚åŒ»ç–—æˆåŠŸçš„æ¦‚ç‡ã€é‡‘èè‚¡ç¥¨çš„æœªæ¥ä»·æ ¼æˆ–ç»™å®šäººç¾¤çš„å·¥èµ„ç­‰äº‹æƒ…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤ç®—æ³•ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç”¨ Python å®ç°çš„ä¾‹å­ã€‚

# é—®é¢˜æ˜¯

æ³¢å£«é¡¿ä½æˆ¿æ•°æ®é›†ç”±ç¾å›½æ³¢å£«é¡¿ä¸åŒåœ°æ–¹çš„æˆ¿ä»·ç»„æˆã€‚é™¤äº†ä»·æ ¼ä¹‹å¤–ï¼Œè¯¥æ•°æ®é›†è¿˜æä¾›äº†çŠ¯ç½ªæ°´å¹³ã€åŸé•‡éé›¶å”®å•†ä¸šåŒºã€æˆ¿å±‹æ‰€æœ‰è€…çš„å¹´é¾„ä»¥åŠå…¶ä»–å±æ€§ç­‰ä¿¡æ¯ã€‚

åä¸ºâ€œMEDVâ€çš„å˜é‡è¡¨ç¤ºæˆ¿ä»·ï¼Œæ˜¯ç›®æ ‡å˜é‡ã€‚å…¶ä½™çš„å˜é‡æ˜¯æˆ‘ä»¬é¢„æµ‹æˆ¿å­ä»·å€¼çš„é¢„æµ‹å› ç´ ã€‚

# å°é˜¶

æ‚¨å¯ä»¥é€šè¿‡å¤„ç†æ›´ç®€å•çš„å­æ­¥éª¤æ¥é™ä½æ„å»º DTs çš„å¤æ‚æ€§:DT ä¸­çš„æ¯ä¸ªå•ç‹¬çš„å­ä¾‹ç¨‹éƒ½å°†è¿æ¥åˆ°å…¶ä»–å­ä¾‹ç¨‹ä»¥å¢åŠ å¤æ‚æ€§ï¼Œè¿™ç§æ„é€ å°†è®©æ‚¨è·å¾—æ›´å¥å£®çš„æ¨¡å‹ï¼Œæ›´æ˜“äºç»´æŠ¤å’Œæ”¹è¿›ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨ Python æ„å»ºä¸€æ£µå›å½’æ ‘(ç‰¹æ®Šç±»å‹çš„ DT)ã€‚

## åŠ è½½æ•°æ®å¹¶æè¿°æ•°æ®é›†

åŠ è½½æ•°æ®æ–‡ä»¶æ˜¯æœ€ç®€å•çš„éƒ¨åˆ†ã€‚é—®é¢˜(ä¹Ÿæ˜¯æœ€è€—æ—¶çš„éƒ¨åˆ†)é€šå¸¸æ˜¯æŒ‡æ•°æ®å‡†å¤‡è¿‡ç¨‹:è®¾ç½®æ­£ç¡®çš„æ•°æ®æ ¼å¼ã€å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼ã€æ¶ˆé™¤é‡å¤å€¼ç­‰ã€‚

åœ¨åŠ è½½æ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬å°†å¯¼å…¥å¿…è¦çš„åº“:

```
import pandas as pd
from pandas_datareader import data
import numpy as np
from sklearn.tree import DecisionTreeRegressor
from sklearn.model_selection import train_test_split
from sklearn import metrics
from sklearn.metrics import r2_score
```

ç°åœ¨ï¼Œæˆ‘ä»¬åŠ è½½æ•°æ®é›†å¹¶å°†å…¶è½¬æ¢ä¸ºç†ŠçŒ«æ•°æ®å¸§:

```
boston = datasets.load_boston()
df = pd.DataFrame(boston.data)
```

å¹¶å°†åˆ—å‘½åä¸º:

```
df.columns = boston.feature_names
df[â€˜MEDVâ€™] = boston.target
```

é¦–å…ˆç†è§£æ•°æ®é›†å¹¶æè¿°å®ƒ:

```
print(boston.DESCR)df.info()
```

![](img/f06bd4f4003dded4dc9c250d4e6ec984.png)

ä¸é”™:506 æ¡è®°å½•ï¼Œ14 ä¸ªæ•°å­—å˜é‡ï¼Œæ²¡æœ‰ç¼ºå¤±å€¼ã€‚æˆ‘ä»¬ä¸éœ€è¦é¢„å¤„ç†æ•°æ®ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å»ºæ¨¡ã€‚

## é€‰æ‹©ç‰¹å¾å’Œç›®æ ‡å˜é‡

æ‚¨éœ€è¦å°†ç»™å®šçš„åˆ—åˆ†æˆä¸¤ç§ç±»å‹çš„å˜é‡:å› å˜é‡(æˆ–ç›®æ ‡å˜é‡)å’Œè‡ªå˜é‡(æˆ–ç‰¹å¾å˜é‡)ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå˜é‡â€œMEDVâ€(è‡ªæœ‰ä½æˆ¿çš„ä¸­å€¼)æ˜¯æˆ‘ä»¬è¯•å›¾é¢„æµ‹çš„ã€‚

```
X = df.iloc[:,0:13].copy()
y = df.iloc[:,13].copy()
```

## åˆ†å‰²æ•°æ®é›†

è¦äº†è§£æ¨¡å‹æ€§èƒ½ï¼Œå°†æ•°æ®é›†åˆ†ä¸ºå®šå‹é›†å’Œæµ‹è¯•é›†æ˜¯ä¸€ä¸ªå¥½ç­–ç•¥ã€‚é€šè¿‡å°†æ•°æ®é›†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé›†åˆè¿›è¡Œè®­ç»ƒï¼Œä½¿ç”¨å¦ä¸€ä¸ªé›†åˆè¿›è¡Œæµ‹è¯•ã€‚

*   **è®­ç»ƒé›†:**è¿™äº›æ•°æ®ç”¨æ¥å»ºç«‹ä½ çš„æ¨¡å‹ã€‚ä¾‹å¦‚ä½¿ç”¨ CART ç®—æ³•æ¥åˆ›å»ºå†³ç­–æ ‘ã€‚
*   **æµ‹è¯•é›†:**è¯¥æ•°æ®ç”¨äºæŸ¥çœ‹æ¨¡å‹åœ¨çœ‹ä¸è§çš„æ•°æ®ä¸Šçš„è¡¨ç°ï¼Œå°±åƒåœ¨ç°å®ä¸–ç•Œä¸­ä¸€æ ·ã€‚åœ¨æ‚¨æƒ³è¦æµ‹è¯•æ‚¨çš„æ¨¡å‹ä»¥è¯„ä¼°æ€§èƒ½ä¹‹å‰ï¼Œè¿™äº›æ•°æ®åº”è¯¥æ˜¯å®Œå…¨ä¸å¯è§çš„ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ•°æ®é›†åˆ†æˆ 70%è®­ç»ƒå’Œ 30%æµ‹è¯•ã€‚

```
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)
```

## å»ºç«‹ DT æ¨¡å‹å¹¶å¾®è°ƒ

æ„å»º DT å°±åƒè¿™æ ·ç®€å•:

```
rt = DecisionTreeRegressor(criterion = â€˜mseâ€™, max_depth=5)
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªå®šä¹‰äº†åˆ†è£‚æ ‡å‡†(é€‰æ‹©å‡æ–¹è¯¯å·®)å’Œä¸€ä¸ªè¶…å‚æ•°(æ ‘çš„æœ€å¤§æ·±åº¦)ã€‚å®šä¹‰æ¨¡å‹æ¶æ„çš„å‚æ•°è¢«ç§°ä¸º**è¶…å‚æ•°**ï¼Œå› æ­¤ï¼Œæœç´¢ç†æƒ³æ¨¡å‹æ¶æ„(æœ€å¤§åŒ–æ¨¡å‹æ€§èƒ½çš„æ¶æ„)çš„è¿‡ç¨‹è¢«ç§°ä¸ºè¶…å‚æ•°è°ƒæ•´*ã€‚* A **è¶…å‚æ•°**æ˜¯åœ¨å­¦ä¹ è¿‡ç¨‹å¼€å§‹å‰å°±è®¾å®šå¥½å€¼çš„å‚æ•°ï¼Œå®ƒä»¬ä¸èƒ½ç›´æ¥ä»æ•°æ®ä¸­è®­ç»ƒå‡ºæ¥ã€‚

æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨æ¨¡å‹æ¥æŸ¥çœ‹å¯ä»¥ä¼˜åŒ–çš„å…¶ä½™è¶…å‚æ•°:

```
rt
```

![](img/b560ce2d4ae94907ca26548e04d4380d.png)

æ¨¡å‹å¯ä»¥æœ‰è®¸å¤šè¶…å‚æ•°ï¼Œå¹¶ä¸”æœ‰ä¸åŒçš„ç­–ç•¥æ¥å¯»æ‰¾å‚æ•°çš„æœ€ä½³ç»„åˆã€‚ä½ å¯ä»¥åœ¨[è¿™ä¸ªé“¾æ¥](/hyperparameter-tuning-explained-d0ebb2ba1d35)ä¸Šçœ‹çœ‹å…¶ä¸­çš„ä¸€äº›ã€‚

## åˆ—è½¦ DT æ¨¡å‹

å°†æ¨¡å‹æ‹Ÿåˆåˆ°è®­ç»ƒæ•°æ®ä»£è¡¨äº†å»ºæ¨¡è¿‡ç¨‹çš„è®­ç»ƒéƒ¨åˆ†ã€‚åœ¨æ¨¡å‹å®šå‹åï¼Œå¯ä»¥ä½¿ç”¨é¢„æµ‹æ–¹æ³•è°ƒç”¨æ¥è¿›è¡Œé¢„æµ‹:

```
model_r = rt.fit(X_train, y_train)
```

## æµ‹è¯• DT æ¨¡å‹

æµ‹è¯•æ•°æ®é›†æ˜¯ç‹¬ç«‹äºè®­ç»ƒæ•°æ®é›†çš„æ•°æ®é›†ã€‚è¯¥æµ‹è¯•æ•°æ®é›†æ˜¯æ‚¨çš„æ¨¡å‹çš„æœªçŸ¥æ•°æ®é›†ï¼Œæœ‰åŠ©äºæ‚¨å¯¹å…¶è¿›è¡Œæ¦‚åŒ–:

```
y_pred = model_r.predict(X_test)
```

## è®¾æƒ³

DTs æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒä»¬çš„å¯è§£é‡Šæ€§ã€‚å¯è§†åŒ– DTs ä¸ä»…æ˜¯ç†è§£æ¨¡å‹çš„æœ‰æ•ˆæ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¼ è¾¾æ¨¡å‹å·¥ä½œåŸç†çš„æœ‰æ•ˆæ–¹æ³•:

```
from sklearn import tree
import graphviz
dot_data = tree.export_graphviz(rt, feature_names=list(X), class_names=sorted(y.unique()), filled=True)
graphviz.Source(dot_data)
```

![](img/5bbeffc73696d17e5f78cf70be22d571.png)

å˜é‡â€œLSTATâ€ä¼¼ä¹å¯¹å®šä¹‰å›å½’æ ‘çš„åˆ’åˆ†è‡³å…³é‡è¦ã€‚æˆ‘ä»¬å°†åœ¨è®¡ç®—è¦ç´ é‡è¦æ€§åæ£€æŸ¥è¿™ä¸€ç‚¹ã€‚

## è¯„ä¼°ç»©æ•ˆ

æ¨¡å‹çš„è´¨é‡ä¸å…¶é¢„æµ‹å€¼ä¸å®é™…å€¼çš„åŒ¹é…ç¨‹åº¦æœ‰å…³ã€‚è¯„ä¼°ä½ çš„æœºå™¨å­¦ä¹ ç®—æ³•æ˜¯ä»»ä½•é¡¹ç›®å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†:ä½ å¦‚ä½•è¡¡é‡å®ƒçš„æˆåŠŸï¼Œä½ ä»€ä¹ˆæ—¶å€™çŸ¥é“å®ƒä¸åº”è¯¥å†æ”¹è¿›äº†ï¼Ÿä¸åŒçš„æœºå™¨å­¦ä¹ ç®—æ³•æœ‰ä¸åŒçš„è¯„ä¼°æŒ‡æ ‡ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æåˆ°ä¸€äº›å›å½’é—®é¢˜çš„ä¸»è¦è¯„ä¼°æŒ‡æ ‡:

> **å¹³å‡ç»å¯¹è¯¯å·®(MAE)**

æ˜¯æµ‹è¯•é›†ä¸­æ‰€æœ‰å®ä¾‹çš„å•ä¸ªé¢„æµ‹è¯¯å·®ç»å¯¹å€¼çš„å¹³å‡å€¼**ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬å¹³å‡é¢„æœŸè¯¯å·®æœ‰å¤šå¤§ã€‚**

```
print(â€˜Mean Absolute Error:â€™, metrics.mean_absolute_error(y_test, y_pred))
```

![](img/ff1c0317421098f72b3917b26afe624e.png)

> **å‡æ–¹è¯¯å·®**

æ˜¯æµ‹è¯•é›†ä¸­æ‰€æœ‰å®ä¾‹çš„é¢„æµ‹è¯¯å·®å¹³æ–¹çš„å¹³å‡å€¼ã€‚å› ä¸º MSE æ˜¯å¹³æ–¹çš„ï¼Œæ‰€ä»¥å®ƒçš„å•ä½ä¸åŸå§‹è¾“å‡ºçš„å•ä½ä¸åŒ¹é…ï¼Œè€Œä¸”å› ä¸ºæˆ‘ä»¬æ­£åœ¨å¹³æ–¹å·®å€¼ï¼Œæ‰€ä»¥ MSE å‡ ä¹æ€»æ˜¯å¤§äº MAE:å› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ¯”è¾ƒ MAE å’Œ MSEã€‚

```
print(â€˜Mean Squared Error:â€™, metrics.mean_squared_error(y_test, y_pred))
```

![](img/83e04c746a733cc484853749da9cc0d3.png)

MSE æ–¹ç¨‹ä¸­å¹³æ–¹é¡¹çš„å½±å“åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­å­˜åœ¨å¼‚å¸¸å€¼æ—¶æœ€ä¸ºæ˜æ˜¾:è™½ç„¶ MAE ä¸­çš„æ¯ä¸ªæ®‹å·®æŒ‰æ¯”ä¾‹**è´¡çŒ®ç»™æ€»è¯¯å·®**ï¼Œä½† MSE ä¸­çš„è¯¯å·®ä»¥äºŒæ¬¡æ–¹çš„æ–¹å¼**å¢é•¿ã€‚è¿™æœ€ç»ˆæ„å‘³ç€ï¼Œæˆ‘ä»¬æ•°æ®ä¸­çš„å¼‚å¸¸å€¼å°†å¯¼è‡´ MSE ä¸­æ¯” MAE ä¸­æ›´é«˜çš„æ€»è¯¯å·®ï¼Œå¹¶ä¸”è¯¥æ¨¡å‹å°†å› åšå‡ºä¸ç›¸åº”å®é™…å€¼ç›¸å·®å¾ˆå¤§çš„é¢„æµ‹è€Œå—åˆ°æ›´å¤šæƒ©ç½šã€‚**

> **å‡æ–¹æ ¹è¯¯å·®(RMSE)**

æ˜¯æ‰€æœ‰è¯¯å·®çš„å¹³æ–¹çš„å¹³å‡å€¼çš„å¹³æ–¹æ ¹ã€‚é€šè¿‡åœ¨è®¡ç®—å¹³å‡å€¼ä¹‹å‰å¯¹è¯¯å·®æ±‚å¹³æ–¹ï¼Œç„¶åå–å¹³å‡å€¼çš„å¹³æ–¹æ ¹ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªè¯¯å·®å¤§å°çš„åº¦é‡ï¼Œè¯¥åº¦é‡å¯¹è¾ƒå¤§ä½†ä¸å¸¸è§çš„è¯¯å·®ç»™äºˆäº†æ¯”å¹³å‡å€¼æ›´å¤§çš„æƒé‡ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æ¯”è¾ƒ RMSE å’Œæ¢…ï¼Œä»¥ç¡®å®šé¢„æµ‹æ˜¯å¦åŒ…å«å¤§é‡ä½†ä¸å¸¸è§çš„è¯¯å·®:RMSE å’Œæ¢…ä¹‹é—´çš„å·®å¼‚è¶Šå¤§ï¼Œè¯¯å·®å¤§å°è¶Šä¸ä¸€è‡´ã€‚

```
print(â€˜Root Mean Squared Error:â€™, np.sqrt(metrics.mean_squared_error(y_test, y_pred)))
```

![](img/edbc42c4aa3debbe61d2a0aa70302c07.png)

> **R å¹³æ–¹å¾—åˆ†(R2)**

ç”¨ç™¾åˆ†æ¯”è§£é‡Šç”±äºç‰¹å¾å˜é‡çš„å˜åŒ–è€Œå¼•èµ·çš„å“åº”å˜é‡çš„å˜åŒ–é‡ã€‚ **R çš„å¹³æ–¹**å¯ä»¥å– 0 åˆ° 1 ä¹‹é—´çš„ä»»ä½•å€¼ï¼Œå°½ç®¡å®ƒæä¾›äº†ä¸€äº›å…³äºå›å½’æ¨¡å‹çš„æœ‰ç”¨è§è§£ï¼Œä½†æ˜¯æ‚¨ä¸åº”è¯¥åªä¾èµ–è¿™ä¸ªåº¦é‡æ¥è¯„ä¼°æ‚¨çš„æ¨¡å‹ã€‚

```
print(â€˜R Squared Score is:â€™, r2_score(y_test, y_pred))
```

![](img/f53a52b04b7cf97efe871f21424405d7.png)

å¯¹ R å¹³æ–¹æœ€å¸¸è§çš„è§£é‡Šæ˜¯å›å½’æ¨¡å‹ä¸è§‚å¯Ÿæ•°æ®çš„æ‹Ÿåˆç¨‹åº¦ã€‚å°±åƒæˆ‘ä»¬çš„ä¾‹å­ä¸€æ ·ï¼ŒR çš„å¹³æ–¹ä¸º 0.74 è¡¨æ˜ 74%çš„æ•°æ®ç¬¦åˆå›å½’æ¨¡å‹ã€‚è™½ç„¶è¾ƒé«˜çš„ R å¹³æ–¹è¡¨ç¤ºæ¨¡å‹æ›´é€‚åˆï¼Œä½†é«˜åº¦é‡å€¼å¹¶ä¸æ€»æ˜¯é€‚åˆå›å½’æ¨¡å‹:ç»Ÿè®¡åº¦é‡å€¼çš„è´¨é‡å–å†³äºè®¸å¤šå› ç´ ï¼Œä¾‹å¦‚æ¨¡å‹ä¸­ä½¿ç”¨çš„å˜é‡çš„æ€§è´¨ã€å˜é‡çš„åº¦é‡å•ä½ä»¥åŠåº”ç”¨çš„æ•°æ®è½¬æ¢ã€‚

> ***ç‰¹å¾é‡è¦æ€§***

å¦ä¸€ä¸ªå…³é”®æŒ‡æ ‡åŒ…æ‹¬ä¸ºé¢„æµ‹æ¨¡å‹çš„è¾“å…¥ç‰¹å¾åˆ†é…åˆ†æ•°ï¼Œè¡¨æ˜æ¯ä¸ªç‰¹å¾åœ¨è¿›è¡Œé¢„æµ‹æ—¶çš„ç›¸å¯¹é‡è¦æ€§ã€‚**ç‰¹å¾é‡è¦æ€§**æä¾›å¯¹æ•°æ®ã€æ¨¡å‹çš„æ´å¯Ÿï¼Œå¹¶ä»£è¡¨é™ç»´å’Œç‰¹å¾é€‰æ‹©çš„åŸºç¡€ï¼Œè¿™å¯ä»¥æé«˜é¢„æµ‹æ¨¡å‹çš„æ€§èƒ½ã€‚è¶Šå¤šçš„å±æ€§ç”¨äº DT çš„å…³é”®å†³ç­–ï¼Œå…¶ç›¸å¯¹é‡è¦æ€§å°±è¶Šé«˜ã€‚

```
for importance, name in sorted(zip(rt.feature_importances_, X_train.columns),reverse=True):
 print (name, importance)
```

![](img/3266ae6eb001afa26be50d5739169c92.png)

å¦‚å¯è§†åŒ–ä¸­çªå‡ºæ˜¾ç¤ºçš„ï¼Œå˜é‡â€œLSTATâ€ç›¸å¯¹äºå…¶ä»–å˜é‡å…·æœ‰æ›´é«˜çš„é‡è¦æ€§(æ˜¯æ¨¡å‹çš„ä¸»è¦ç‰¹å¾)ã€‚è®©æˆ‘ä»¬åœ¨å›¾ä¸Šçœ‹ä¸€ä¸‹:

![](img/bd07fe5ea44b8ad382dd8a17cda0a514.png)

ç‰¹å¾â€œLSTATâ€å’Œâ€œRMâ€å è¿›è¡Œé¢„æµ‹çš„é‡è¦æ€§çš„ 80%ä»¥ä¸Šã€‚

æˆ‘ä»¬åªèƒ½å°†æˆ‘ä»¬æ¨¡å‹çš„è¯¯å·®æŒ‡æ ‡ä¸**ç«äº‰**æ¨¡å‹çš„è¯¯å·®æŒ‡æ ‡è¿›è¡Œæ¯”è¾ƒ(ä¾‹å¦‚ï¼Œ2 ä¸ªä¸åŒæ¨¡å‹çš„ R å¹³æ–¹å¾—åˆ†)ï¼Œå°½ç®¡è¿™äº›æŒ‡æ ‡æä¾›äº†å…³äºæ¨¡å‹æ€§èƒ½çš„å®è´µè§è§£ï¼Œä½†è¯·å§‹ç»ˆè®°ä½:

> ä»…ä»…å› ä¸ºä¸€ä¸ªé¢„æµ‹åœ¨è¿‡å»æ˜¯å‡†ç¡®çš„ï¼Œå¹¶ä¸æ„å‘³ç€å®ƒåœ¨æœªæ¥ä¹Ÿæ˜¯å‡†ç¡®çš„ã€‚

# æœ€åçš„æƒ³æ³•

æˆ‘ä»¬åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­å·²ç»æ¶µç›–äº†å‡ ä¸ªæ­¥éª¤ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªéƒ½æ˜¯ç‹¬ç«‹çš„å­¦ç§‘:æ¢ç´¢æ€§æ•°æ®åˆ†æã€ç‰¹å¾å·¥ç¨‹æˆ–è¶…å‚æ•°è°ƒæ•´éƒ½æ˜¯ä»»ä½•æœºå™¨å­¦ä¹ æ¨¡å‹çš„å¹¿æ³›è€Œå¤æ‚çš„æ–¹é¢ã€‚ä½ åº”è¯¥è€ƒè™‘æ›´æ·±å…¥åœ°ç ”ç©¶é‚£äº›å­¦ç§‘ã€‚

ä¸å…¶ä»–ç®—æ³•ç›¸æ¯”ï¼Œå†³ç­–æ ‘çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯å®ƒåˆ’åˆ†æ•°æ®ç©ºé—´çš„æ–¹å¼ã€‚å¦‚æœæ‚¨é€‰æ‹©ç”¨**çº¿æ€§å›å½’**æ¥æ±‚è§£æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹ï¼Œæ‚¨ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾è¡¨:

![](img/e27aba73603bfff5994fff1aed6b4acb.png)

çº¿æ€§å›å½’å°†æœç´¢ç›®æ ‡ä¸å…¶é¢„æµ‹å€¼ä¹‹é—´çš„çº¿æ€§å…³ç³»ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå˜é‡(â€œMEDVâ€å’Œâ€œRMâ€)ä¼¼ä¹æ˜¯çº¿æ€§ç›¸å…³çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•å¯èƒ½å·¥ä½œå¾—ç›¸å¯¹è¾ƒå¥½ï¼Œä½†ç°å®å¾€å¾€æ˜¾ç¤ºéçº¿æ€§å…³ç³»ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å›å½’æ ‘å¦‚ä½•æ˜ å°„ç›®æ ‡å’Œé¢„æµ‹å€¼ä¹‹é—´çš„ç›¸åŒå…³ç³»:

![](img/fa5e38fd367506d9d3f50ccaec13aada.png)

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ MSE ä½œä¸ºåˆ†åŒºæ ‡å‡†ä¸” max_depth ä¸º 5 çš„å›å½’æ ‘ä»¥å®Œå…¨ä¸åŒçš„æ–¹å¼åˆ’åˆ†æ•°æ®ç©ºé—´ï¼Œä»è€Œç¡®å®šçº¿æ€§å›å½’æ— æ³•æ‹Ÿåˆçš„å…³ç³»ã€‚

å†³ç­–æ ‘åˆ’åˆ†æ•°æ®ç©ºé—´ä»¥ä¼˜åŒ–ç»™å®šæ ‡å‡†çš„æ–¹å¼ä¸ä»…å–å†³äºæ ‡å‡†æœ¬èº«(ä¾‹å¦‚ MSE æˆ– MAE ä½œä¸ºåˆ’åˆ†æ ‡å‡†)ï¼Œè¿˜å–å†³äºæ‰€æœ‰è¶…å‚æ•°çš„è®¾ç½®ã€‚è¶…å‚æ•°ä¼˜åŒ–å®šä¹‰äº†å†³ç­–æ ‘çš„å·¥ä½œæ–¹å¼ï¼Œå¹¶æœ€ç»ˆå†³å®šäº†å®ƒçš„æ€§èƒ½ã€‚ä¸€äº›è¶…å‚æ•°ä¼šä¸¥é‡å½±å“æ¨¡å‹çš„æ€§èƒ½ï¼Œæ‰¾åˆ°å®ƒä»¬çš„æ­£ç¡®çº§åˆ«å¯¹äºè¾¾åˆ°æœ€ä½³æ€§èƒ½è‡³å…³é‡è¦ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°è¶…å‚æ•° max_depth åœ¨è®¾ç½®ä¸º 0 åˆ° 10 ä¹‹é—´æ—¶å¦‚ä½•å¯¹å›å½’æ ‘çš„ R å¹³æ–¹å¾—åˆ†äº§ç”Ÿå·¨å¤§å½±å“ï¼Œä½†åœ¨ 10 ä»¥ä¸Šï¼Œæ‚¨é€‰æ‹©çš„ä»»ä½•çº§åˆ«éƒ½ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“:

![](img/aeb30e0b75f30b052aa56234e276bd3b.png)

ä¸ºäº†å…‹æœä½ è¯•å›¾ä¸ºä½ çš„ DT æ‰¾åˆ°â€œå®Œç¾çš„â€è¶…å‚æ•°æ°´å¹³è€Œä½¿ä½ çš„æ¨¡å‹è¿‡åº¦æ‹Ÿåˆçš„äº‹å®ï¼Œä½ åº”è¯¥è€ƒè™‘æ¢ç´¢é›†åˆæ–¹æ³•ã€‚**é›†æˆæ–¹æ³•**å°†å‡ ä¸ª DTs ç»“åˆèµ·æ¥ï¼Œäº§ç”Ÿæ¯”å•ä¸ª DTs æ›´å¥½çš„é¢„æµ‹æ€§èƒ½ã€‚**ç³»ç»¼**æ¨¡å‹èƒŒåçš„ä¸»è¦åŸç†æ˜¯ä¸€ç¾¤å¼±å­¦ä¹ è€…èšé›†åœ¨ä¸€èµ·å½¢æˆå¼ºå­¦ä¹ è€…ï¼Œæ˜¾è‘—æé«˜å•ä¸ª DT çš„æ€§èƒ½ã€‚å®ƒä»¬ç”¨äºå‡å°‘æ¨¡å‹çš„æ–¹å·®å’Œåå·®ï¼Œå¹¶æ”¹è¿›é¢„æµ‹ã€‚æ—¢ç„¶ä½ å·²ç»çœ‹åˆ°äº†å†³ç­–æ ‘æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘å»ºè®®ä½ ç»§ç»­ä½¿ç”¨é›†åˆæ–¹æ³•ï¼Œæ¯”å¦‚[æ‰“åŒ…æˆ–æ¨è¿›](/ensemble-methods-bagging-boosting-and-stacking-c9214a10a205)ã€‚

> *å¯¹è¿™äº›è¯é¢˜æ„Ÿå…´è¶£ï¼Ÿåœ¨*[*Linkedin*](https://www.linkedin.com/in/lopezyse/)*æˆ–* [*Twitter*](https://twitter.com/lopezyse) ä¸Šå…³æ³¨æˆ‘