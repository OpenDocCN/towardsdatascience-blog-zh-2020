<html>
<head>
<title>Python Risk Management: Monte Carlo Simulations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python风险管理:蒙特卡罗模拟</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-risk-management-monte-carlo-simulations-7d41c891cb5?source=collection_archive---------7-----------------------#2020-01-27">https://towardsdatascience.com/python-risk-management-monte-carlo-simulations-7d41c891cb5?source=collection_archive---------7-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c1f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看到更多可能性的介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/599158551fb750cba7cc33d20501b87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Z9jf4g5rJbEFkCf"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">特别感谢<a class="ae ky" href="https://www.pexels.com/photo/slot-machines-3021120/" rel="noopener ugc nofollow" target="_blank"> Daria Sannikova </a>。</p></figure><p id="fa24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将回顾蒙特卡罗模拟，它可以用来提供对未来事件建模的见解。这篇文章的全部思想来自两个因素的结合。第一个是我正在进行的期权交易实验，旅程可以在<a class="ae ky" href="https://medium.com/gradient-growth/options-100k-challenge-6-months-to-6-figures-part-2-2cbc03a48864" rel="noopener">这里</a>找到。第二是另一篇关于Kelly Criterion <strong class="lb iu"> </strong>的Python风险管理文章非常受欢迎，所以我想扩展一下这个话题，这篇文章的原文可以在<a class="ae ky" rel="noopener" target="_blank" href="/python-risk-management-kelly-criterion-526e8fb6d6fd">这里</a>找到。事不宜迟，让我们开始讨论资产定价的蒙特卡罗模拟吧！</p><h1 id="6de3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">蒙特卡罗模拟概述</h1><p id="a3cf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">教授蒙特卡罗模拟的一个常见方法是思考任何形式的机会，因此有了老虎机的形象。在任何给定时间，基于一个动作的下一个时间步中可能发生多个事件。现在，我相信先学习简单的例子来理解复杂的例子，所以让我们来考虑扔一个公平的六面骰子。我们都知道骰子从1到6有6种可能的机会。但是，为了通过实验计算出多少，我们必须滚动几次骰子并记录结果。有了蒙特卡罗模拟，我们可以在模拟中进行任意数量的试验。</p><p id="293d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在更专业的定义中，蒙特卡洛取自概率分布，以提供风险的多元模型或呈现多个假设事件[1]。蒙特卡洛的基本公式可以归结为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/021794bf2d7faf6567a6e2ada6229763.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*Pb9RPtFXZi1Fyg4k7qwkew.jpeg"/></div></figure><p id="7626" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本上，该配方由3个主要成分组成。首先，是我们所关注的资产在一段时间内的数据。在我们的文章中，它将是加密货币Tezos和股票代码AMD。下一部分是漂移，这是资产在过去移动的方向。第三个分量是从分布中抽取的随机分量。在我们的例子中，我们将使用正态分布来模拟资产波动。波动性通常被视为一只股票在通常情况下的疯狂运动，看起来有点随机。</p><h1 id="2cab" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">投资者/交易者如何应用蒙特卡罗</h1><p id="7dab" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如前所述，蒙特卡罗是一个很好的方法来规划一个有多种可能结果的问题。在金融领域，尤其是金融市场，一项资产在未来可能会有多个不同的价格水平。除了资产定价，蒙特卡罗模拟还可以应用于预测财务项目，如现金流[2]。</p><h1 id="21a5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">蒙特卡洛的加密货币——Tezos</h1><p id="2518" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Tezos是另一种应用类似Etherium [3]的智能合约的加密货币。我只是对它感到好奇，因为它有一个有趣的特性。至少在我持有的比特币基地Tezos股票中，它实际上为持有它支付了大约5%的回报(Tezos奖励)，这类似于股票的股息收益率——如下图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f11a9f26378ab62fc35c0b41dd73246f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*64CHIgab8kgIFtXi"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在完成了比特币基地的介绍和一些Tezos奖励后，我的Tezos钱包。</p></figure><p id="8cc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只是提醒一下，我在比特币基地了解到Tezos是免费的，注册这个<a class="ae ky" href="https://www.coinbase.com/join/leong_o5" rel="noopener ugc nofollow" target="_blank">附属链接</a>你可以得到10美元。要获得Tezos的收入，您必须向下滚动您的仪表板，应该会看到一个收入页面。只要完成教程，你应该会看到奖励。加密EOS的一个例子可以在这个<a class="ae ky" href="https://coinbase.com/earn/eos/invite/t9c17ndk" rel="noopener ugc nofollow" target="_blank">附属链接</a>中找到。关于Tezos蒙特卡洛模拟的例子，每日数据取自investing.com<a class="ae ky" href="https://www.investing.com/crypto/tezos/xtz-usd-historical-data?cid=1150186" rel="noopener ugc nofollow" target="_blank"/>:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="af54" class="my lw it mu b gy mz na l nb nc">#Import Libraries<br/>import numpy as np  <br/>import pandas as pd  <br/>import pandas_datareader as wb  <br/>import matplotlib.pyplot as plt  <br/>from scipy.stats import norm<br/>%matplotlib inline<br/>﻿<br/>#Settings for Monte Carlo asset data, how long, and how many forecasts <br/>ticker = 'XTZ_USD' # ticker<br/>t_intervals = 30 # time steps forecasted into future<br/>iterations = 25 # amount of simulations</span><span id="2f5c" class="my lw it mu b gy nd na l nb nc">#Acquiring data<br/>data = pd.read_csv('XTZ_USD Huobi Historical Data.csv',index_col=0,usecols=['Date', 'Price'])<br/>data = data.rename(columns={"Price": ticker})</span><span id="de12" class="my lw it mu b gy nd na l nb nc">#Preparing log returns from data<br/>log_returns = np.log(1 + data.pct_change())</span><span id="a798" class="my lw it mu b gy nd na l nb nc">#Plot of asset historical closing price<br/>data.plot(figsize=(10, 6));</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f73e3c52754e58b56c71a0c338793e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/0*w_XX_MmpZZkYwZlT"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">2019年8月至2020年1月Tezos对美元的收盘价。</p></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2df5" class="my lw it mu b gy mz na l nb nc">#Plot of log returns<br/>log_returns.plot(figsize = (10, 6))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/30512f574d2e2bfa85c890584dfbb380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/0*8ssWn4jtZvM-CWUj"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">记录Tezos对美元的正常回报。</p></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="5f1e" class="my lw it mu b gy mz na l nb nc">#Setting up drift and random component in relation to asset data<br/>u = log_returns.mean()<br/>var = log_returns.var()<br/>drift = u - (0.5 * var)<br/>stdev = log_returns.std()</span><span id="3b13" class="my lw it mu b gy nd na l nb nc">daily_returns = np.exp(drift.values + stdev.values * norm.ppf(np.random.rand(t_intervals, iterations)))</span><span id="e384" class="my lw it mu b gy nd na l nb nc">#Takes last data point as startpoint point for simulation<br/>S0 = data.iloc[-1]<br/>price_list = np.zeros_like(daily_returns)<br/>price_list[0] = S0</span><span id="8172" class="my lw it mu b gy nd na l nb nc">#Applies Monte Carlo simulation in asset<br/>for t in range(1, t_intervals):<br/>    price_list[t] = price_list[t - 1] * daily_returns[t]<br/>﻿<br/>﻿﻿#Plot simulations<br/>plt.figure(figsize=(10,6))<br/>plt.plot(price_list);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/146430c1c9e696425b53d850d772dab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/0*rNqlc2IpoRJ0uUZj"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">25个Tezos回报的蒙特卡罗模拟，最长30天。</p></figure><p id="d001" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要注意的一点是这些模拟中的巨大波动性。从今天的1.50美元的价格来看，Tezos可能会从1.00美元波动到2.75美元！从这些少量的模拟中，我可以看出为什么有些人喜欢在比特币和类似的密码上冒险，因为它们有略微有利的上行潜力。</p><h1 id="cbf5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">AMD上的蒙特卡洛</h1><p id="4cdf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我刚刚决定做AMD，由于我的其他职位交易AMD期权发现<a class="ae ky" href="https://medium.com/gradient-growth/options-100k-challenge-6-months-to-6-figures-part-2-2cbc03a48864" rel="noopener">这里</a>。现在，让我们来看看高级微器件蒙特卡罗模拟。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0bc9" class="my lw it mu b gy mz na l nb nc">#Import Libraries<br/>import numpy as np  <br/>import pandas as pd  <br/>import pandas_datareader as wb  <br/>import matplotlib.pyplot as plt  <br/>from scipy.stats import norm<br/>%matplotlib inline<br/>﻿<br/>﻿﻿#Settings for Monte Carlo asset data, how long, and how many forecasts <br/>ticker = 'AMD' # stock ticker<br/>t_intervals = 30 # time steps forecasted into future<br/>iterations = 25 # amount of simulations</span><span id="e627" class="my lw it mu b gy nd na l nb nc">#Acquiring data<br/>data = pd.DataFrame()<br/>data[ticker] = wb.DataReader(ticker, data_source='yahoo', start='2018-1-1')['Adj Close']</span><span id="c880" class="my lw it mu b gy nd na l nb nc">#Preparing log returns from data<br/>log_returns = np.log(1 + data.pct_change())</span><span id="6661" class="my lw it mu b gy nd na l nb nc">#Plot of asset historical closing price<br/>data.plot(figsize=(10, 6));</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d6ecd863343601c19315adef0dfb68d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/0*ezsABGWh8ItKb_P2"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">AMD 2018-2020年收盘价。</p></figure><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="3a05" class="my lw it mu b gy mz na l nb nc">#Plot of log returns<br/>log_returns.plot(figsize = (10, 6))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/a13d52f5a72f5a5f37664229866cc334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/0*dJxhbo4SY-AJC_xt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">记录AMD从2018年到2020年的正常回报。</p></figure><p id="67e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的收盘价来看，对数回报看起来相当不错。现在开始设置漂移和随机成分。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="f475" class="my lw it mu b gy mz na l nb nc">#Setting up drift and random component in relatoin to asset data<br/>u = log_returns.mean()<br/>var = log_returns.var()<br/>drift = u - (0.5 * var)<br/>stdev = log_returns.std()</span><span id="3161" class="my lw it mu b gy nd na l nb nc">daily_returns = np.exp(drift.values + stdev.values * norm.ppf(np.random.rand(t_intervals, iterations)))</span><span id="293a" class="my lw it mu b gy nd na l nb nc">#Takes last data point as startpoint point for simulation<br/>S0 = data.iloc[-1]<br/>price_list = np.zeros_like(daily_returns)<br/>price_list[0] = S0</span><span id="7355" class="my lw it mu b gy nd na l nb nc">#Applies Monte Carlo simulation in asset<br/>for t in range(1, t_intervals):<br/>    price_list[t] = price_list[t - 1] * daily_returns[t]<br/>﻿<br/>﻿﻿#Plot simulations<br/>plt.figure(figsize=(10,6))<br/>plt.plot(price_list);</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2765c971dbf17c2d532aa8d98ce24027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/0*m_AvTbXb3T1LQgOF"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">未来30天AMD的25次蒙特卡洛模拟</p></figure><p id="defc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从蒙特卡洛模拟来看，AMD的整体趋势是上升的，这是一个好迹象，因为我在挑战时持有看涨的头寸！</p><h1 id="c105" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="6d35" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">蒙特卡洛模拟允许投资者和交易者将投资可能性转化为决策。蒙特卡洛的优势在于它能够将不同可能事件的质量范围考虑在内。同样，这也是它最值得注意的缺点，即它有时无法准确衡量极端事件。例如，在大熊危机期间，多次蒙特卡洛模拟失败。因此，这个模型和其他模型一样，受到所应用的数据和设置的限制。针对这一弱点的一个可能的解决方案是对模拟的随机分量采用非正态概率分布。</p><p id="f35f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">— — — — — — — — — — — — — — — — — — — — — — — — — —</p><p id="d389" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">参考文献</strong></p><p id="53ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[1]斯坦默斯，R. (2020年1月3日)。如何使用蒙特卡罗分析来估计风险？检索自<a class="ae ky" href="https://www.investopedia.com/articles/financial-theory/08/monte-carlo-multivariate-model.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/articles/financial-theory/08/Monte-Carlo-variable-model . ASP</a></p><p id="32c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]阿加瓦尔，K. (2019，11月18日)。蒙特卡洛模拟能为你的投资组合带来什么？检索自<a class="ae ky" href="https://www.investopedia.com/articles/investing/112514/monte-carlo-simulation-basics.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/articles/investing/112514/Monte-Carlo-simulation-basics . ASP</a></p><p id="8ce4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[3]比特币基地。(2019).赚Tezos。从https://www.coinbase.com/earn/tezos<a class="ae ky" href="https://www.coinbase.com/earn/tezos" rel="noopener ugc nofollow" target="_blank">取回</a></p><p id="8e76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">— — — — — — — — — — — — — — — — — — — — — — — — — —</p><p id="2c5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要进入比特币基地，点击这个<a class="ae ky" href="https://www.coinbase.com/join/leong_o5" rel="noopener ugc nofollow" target="_blank">附属链接</a>，这样我们都可以得到10美元。</p><p id="9ca4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章是由于<a class="ae ky" href="https://medium.com/gradient-growth/options-100k-challenge-6-months-to-6-figures-part-2-2cbc03a48864" rel="noopener"> Options $100k Challenge </a>而创作的。</p><p id="12ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ni">免责声明:本文陈述的所有内容均为我个人观点，不代表任何雇主。投资有很大的风险，所有投资决定都要咨询你的投资顾问。我可能会积极交易本文中提到的资产。这篇文章包含附属链接。</em></p></div></div>    
</body>
</html>