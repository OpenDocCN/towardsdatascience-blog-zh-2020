<html>
<head>
<title>Deploy Machine Learning App built using Streamlit and PyCaret on Google Kubernetes Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google Kubernetes引擎上部署使用Streamlit和PyCaret构建的机器学习应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-machine-learning-app-built-using-streamlit-and-pycaret-on-google-kubernetes-engine-fd7e393d99cb?source=collection_archive---------15-----------------------#2020-06-24">https://towardsdatascience.com/deploy-machine-learning-app-built-using-streamlit-and-pycaret-on-google-kubernetes-engine-fd7e393d99cb?source=collection_archive---------15-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f892" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Google Kubernetes引擎上封装和部署Streamlit应用程序的循序渐进的初学者指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bb9f1fc56bf994b68978d918814c98e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q-xQMoYByRdI7OOfM1qFXg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在Google Kubernetes引擎上封装和部署streamlit应用程序的循序渐进的初学者指南</p></figure><h1 id="6e32" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">概述</h1><p id="4eff" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我们关于在云中部署机器学习管道的<a class="ae mj" rel="noopener" target="_blank" href="/build-and-deploy-machine-learning-web-app-using-pycaret-and-streamlit-28883a569104">上一篇文章</a>中，我们展示了如何在PyCaret中开发机器学习管道，并在Heroku PaaS上部署一个训练有素的模型，作为使用Streamlit开源框架构建的web应用程序。如果你以前没有听说过PyCaret，你可以阅读这个<a class="ae mj" rel="noopener" target="_blank" href="/announcing-pycaret-an-open-source-low-code-machine-learning-library-in-python-4a1f1aad8d46">公告</a>来了解更多。</p><p id="b8f3" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在本教程中，我们将使用相同的机器学习管道和Streamlit应用程序，并演示如何将它们封装和部署到Google Kubernetes引擎上。</p><p id="ac4a" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在本教程结束时，您将能够在Google Kubernetes引擎上构建和托管一个全功能的容器化web应用程序。该web应用程序可用于使用经过训练的机器学习模型生成在线预测(逐个)和批量预测(通过上传csv文件)。最终的应用程序如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/2131b6f88763abdd4ac8ddc94bd76d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GxVKpxijk0tlqk-bO5Q3JQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终应用程序(第1页，共2页)</p></figure><h1 id="2f3c" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">👉您将在本教程中学到什么</h1><ul class=""><li id="f0a2" class="mq mr iq lp b lq lr lt lu lw ms ma mt me mu mi mv mw mx my bi translated">什么是容器，什么是Docker，什么是Kubernetes，什么是Google Kubernetes引擎？</li><li id="4689" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">建立一个Docker图像，并上传到谷歌容器注册(GCR)。</li><li id="67d4" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">在GCP上创建一个集群，并以web服务的形式部署一个机器学习应用。</li><li id="fd1a" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">看看一个使用训练有素的机器学习管道来实时预测新数据点的web应用程序。</li></ul><p id="1bf6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">过去，我们讨论过使用docker的容器化以及在Azure、GCP和AWS等云平台上的部署。如果您有兴趣了解更多相关信息，可以阅读以下教程:</p><ul class=""><li id="64ec" class="mq mr iq lp b lq mk lt ml lw ne ma nf me ng mi mv mw mx my bi translated"><a class="ae mj" rel="noopener" target="_blank" href="/build-and-deploy-machine-learning-web-app-using-pycaret-and-streamlit-28883a569104">使用PyCaret和Streamlit构建和部署机器学习web应用</a></li><li id="b1f2" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated"><a class="ae mj" rel="noopener" target="_blank" href="/deploy-machine-learning-pipeline-on-aws-fargate-eb6e1c50507">在AWS Fargate上部署机器学习管道</a></li><li id="53c7" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated"><a class="ae mj" rel="noopener" target="_blank" href="/deploy-machine-learning-model-on-google-kubernetes-engine-94daac85108b">在Google Kubernetes引擎上部署机器学习管道</a></li><li id="4e9c" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated"><a class="ae mj" rel="noopener" target="_blank" href="/deploy-machine-learning-pipeline-on-cloud-using-docker-container-bec64458dc01">在AWS Web服务上部署机器学习管道</a></li><li id="b358" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated"><a class="ae mj" rel="noopener" target="_blank" href="/build-and-deploy-your-first-machine-learning-web-app-e020db344a99">在Heroku PaaS上构建和部署您的第一个机器学习web应用</a></li></ul><h1 id="6ca5" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">💻本教程的工具箱</h1><h1 id="6441" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">PyCaret</h1><p id="1374" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">PyCaret 是Python中的一个开源、低代码机器学习库，用于训练和部署机器学习管道和模型到生产中。PyCaret可以使用pip轻松安装。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="ece5" class="nm kw iq ni b gy nn no l np nq">pip install <strong class="ni ir">pycaret</strong></span></pre><h1 id="a71e" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">细流</h1><p id="e0d2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated"><a class="ae mj" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>是一个开源的Python库，可以轻松地为机器学习和数据科学构建漂亮的定制web应用。使用pip可以轻松安装Streamlit。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="14bf" class="nm kw iq ni b gy nn no l np nq">pip install <strong class="ni ir">streamlit</strong></span></pre><h1 id="c92b" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">谷歌云平台</h1><p id="e900" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">由谷歌提供的谷歌云平台(GCP)是一套云计算服务，运行在谷歌内部用于其最终用户产品(如谷歌搜索、Gmail和YouTube)的相同基础设施上。如果你没有GCP的账户，你可以在这里注册<a class="ae mj" href="https://console.cloud.google.com/getting-started" rel="noopener ugc nofollow" target="_blank"/>。如果你是第一次注册，你将获得1年的免费学分。</p><h1 id="38b4" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">让我们开始吧。</h1><p id="b411" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">在我们进入Kubernetes之前，让我们了解一下什么是容器，为什么我们需要一个容器？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/de136ffefe9f778acb5c2d8d14641d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*SlzsvRhA71oFOhAjE1Hs0A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mj" href="https://www.freepik.com/free-photos-vectors/cargo-ship" rel="noopener ugc nofollow" target="_blank">https://www.freepik.com/free-photos-vectors/cargo-ship</a></p></figure><p id="a927" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">您是否遇到过这样的问题:您的代码在您的计算机上运行得很好，但是当一个朋友试图运行完全相同的代码时，却无法运行？如果你的朋友重复完全相同的步骤，他或她应该得到相同的结果，对不对？一个词的答案是<strong class="lp ir"> <em class="ns">环境</em>。</strong>你朋友的环境和你不一样。</p><p id="dc15" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">环境包括什么？Python等编程语言以及所有库和依赖项，以及构建和测试应用程序时使用的确切版本。</p><p id="8af1" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果我们可以创建一个可以转移到其他机器上的环境(例如:你朋友的电脑或者谷歌云平台这样的云服务提供商)，我们就可以在任何地方重现结果。因此，<strong class="lp ir"><em class="ns"/></strong><em class="ns"/><strong class="lp ir"><em class="ns">容器</em> </strong>是一种将应用程序及其所有依赖项打包的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境。</p><blockquote class="nt nu nv"><p id="3a3a" class="ln lo ns lp b lq mk jr ls lt ml ju lv nw mm ly lz nx mn mc md ny mo mg mh mi ij bi translated"><strong class="lp ir"> <em class="iq">那Docker是什么？</em>T25】</strong></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/4f2f499e4bea87156b17080c49e81550.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*EJx9QN4ENSPKZuz51rC39w.png"/></div></figure><p id="9cd0" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><strong class="lp ir"> Docker </strong>是一家提供允许用户构建、运行和管理容器的软件(也叫Docker)的公司。虽然Docker的集装箱是最常见的，但还有其他不太出名的<em class="ns">替代品</em>，如<a class="ae mj" href="https://linuxcontainers.org/lxd/introduction/" rel="noopener ugc nofollow" target="_blank"> LXD </a>和<a class="ae mj" href="https://linuxcontainers.org/" rel="noopener ugc nofollow" target="_blank"> LXC </a>也提供集装箱解决方案。</p><p id="5438" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">现在您已经具体了解了容器和docker，让我们了解Kubernetes是什么。</p><h1 id="1207" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是Kubernetes？</h1><p id="0b73" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Kubernetes是Google在2014年开发的一个强大的开源系统，用于管理容器化的应用程序。简而言之，Kubernetes <strong class="lp ir"> </strong>是一个跨机器集群运行和协调容器化应用的系统。这是一个旨在完全管理容器化应用程序生命周期的平台。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/0731d640d1dad4e214cc6968fb4c5723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*49CVX837ZpkbRblC"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mj" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丘特尔斯纳普</a>在<a class="ae mj" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="ec11" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">特征</h1><p id="860d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">✔️ <strong class="lp ir">负载平衡:</strong>自动在集装箱之间分配负载。</p><p id="6aac" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">✔️ <strong class="lp ir">缩放:</strong>当需求发生变化时，如高峰时间、周末和节假日，通过添加或移除容器来自动放大或缩小。</p><p id="55b1" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">✔️ <strong class="lp ir">存储:</strong>保持存储与应用程序的多个实例一致。</p><p id="5454" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">✔️ <strong class="lp ir">自我修复</strong>自动重启失败的容器，并杀死不响应用户定义的健康检查的容器。</p><p id="4700" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">✔️ <strong class="lp ir">自动化部署</strong>你可以自动化Kubernetes为你的部署创建新的容器，移除现有的容器，并把它们的所有资源都移植到新的容器中。</p><h1 id="2384" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">有Docker为什么还要Kubernetes？</h1><p id="496c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">想象一下这样一个场景，您必须在多台机器上运行多个docker容器来支持一个企业级ML应用程序，无论白天还是晚上都有不同的工作负载。虽然听起来很简单，但手动完成的工作量很大。</p><p id="a395" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">您需要在正确的时间启动正确的容器，弄清楚它们如何相互通信，处理存储问题，以及处理失败的容器或硬件。这就是Kubernetes正在解决的问题，它允许大量的容器和谐地一起工作，减少了操作负担。</p><h1 id="5550" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">什么是Google Kubernetes引擎？</h1><p id="610b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">Google Kubernetes引擎是Google开源的Kubernetes 在Google云平台上的一个实现。简单！</p><p id="f0bd" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">其他受欢迎的GKE替代品是亚马逊ECS和T2微软Azure Kubernetes服务。</p><h1 id="8430" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">最后一次，你明白吗？</h1><ul class=""><li id="bf7b" class="mq mr iq lp b lq lr lt lu lw ms ma mt me mu mi mv mw mx my bi translated"><strong class="lp ir">容器</strong>是一种打包应用程序及其所有依赖项的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境。</li><li id="e737" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">Docker 是一个用于构建和管理容器的软件。</li><li id="e936" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">Kubernetes是一个开源系统，用于在集群环境中管理容器化的应用程序。</li><li id="2a3f" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated"><strong class="lp ir"> Google Kubernetes引擎</strong>是开源的Kubernetes框架在Google云平台上的实现。</li></ul><p id="cc6c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在本教程中，我们将使用谷歌Kubernetes引擎。为了跟进，你必须有一个谷歌云平台账户。<a class="ae mj" href="https://console.cloud.google.com/getting-started" rel="noopener ugc nofollow" target="_blank">点击此处</a>免费报名。</p><h1 id="a9f5" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">设置业务环境</h1><p id="bc06" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">一家保险公司希望通过使用住院时的人口统计和基本患者健康风险指标来更好地预测患者费用，从而改善其现金流预测。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/0d35a8d2ddf1693e80660f604ba756ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qM1HiWZ_uigwdcZ0_ZL6yA.png"/></div></div></figure><p id="0fa1" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><em class="ns"> ( </em> <a class="ae mj" href="https://www.kaggle.com/mirichoi0218/insurance#insurance.csv" rel="noopener ugc nofollow" target="_blank"> <em class="ns">数据来源</em> </a> <em class="ns"> ) </em></p><h1 id="1e4a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">目标</h1><p id="6e38" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">使用训练有素的机器学习模型和管道，构建支持在线(逐个)以及批量预测的web应用程序。</p><h1 id="e215" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">任务</h1><ul class=""><li id="c888" class="mq mr iq lp b lq lr lt lu lw ms ma mt me mu mi mv mw mx my bi translated">使用PyCaret训练、验证和开发机器学习管道。</li><li id="d0f7" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">构建一个前端web应用程序，具有两个功能:(一)在线预测和(二)批量预测。</li><li id="3089" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">创建Dockerfile文件</li><li id="a2eb" class="mq mr iq lp b lq mz lt na lw nb ma nc me nd mi mv mw mx my bi translated">在Google Kubernetes引擎上部署web应用程序。一旦部署，它将成为公开可用的，并可以通过网址访问。</li></ul><h1 id="58cc" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">👉任务1 —模型训练和验证</h1><p id="6f37" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">培训和模型验证是在集成开发环境(IDE)或笔记本电脑中进行的，可以在本地机器上进行，也可以在云上进行。如果您以前没有使用过PyCaret，<a class="ae mj" rel="noopener" target="_blank" href="/announcing-pycaret-an-open-source-low-code-machine-learning-library-in-python-4a1f1aad8d46">单击此处</a>了解更多关于PyCaret的信息，或者在我们的<a class="ae mj" href="https://www.pycaret.org/" rel="noopener ugc nofollow" target="_blank">网站</a>上查看<a class="ae mj" href="https://www.pycaret.org/tutorial" rel="noopener ugc nofollow" target="_blank">入门教程</a>。</p><p id="9440" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在本教程中，我们进行了两个实验。第一个实验是使用PyCaret中的默认预处理设置进行的。第二个实验具有一些额外的预处理任务，例如<strong class="lp ir">缩放和归一化、自动特征工程和将宁滨连续数据分成区间</strong>。参见第二个实验的设置代码:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="7864" class="nm kw iq ni b gy nn no l np nq"><strong class="ni ir"># Experiment No. 2</strong></span><span id="49dc" class="nm kw iq ni b gy oc no l np nq">from <strong class="ni ir">pycaret.regression</strong> import <strong class="ni ir">*</strong></span><span id="bb26" class="nm kw iq ni b gy oc no l np nq">r2 = <strong class="ni ir">setup</strong>(data, target = 'charges', session_id = 123,<br/>           normalize = True,<br/>           polynomial_features = True, trigonometry_features = True,<br/>           feature_interaction=True, <br/>           bin_numeric_features= ['age', 'bmi'])</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/576adbbb6043bab32612ed897bed69e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TeqcOM-jBpkdeQu84c4Onw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">两个实验的信息网格比较</p></figure><p id="93ea" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">神奇的事情只发生在几行代码中。请注意，在<strong class="lp ir">实验2 </strong>中，转换后的数据集有62个用于训练的特征，这些特征仅来自原始数据集中的6个特征。所有的新特性都是PyCaret中的转换和自动特性工程的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/1f307638b2bcd2bf363251d406b5a72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ju5RFYKGkAVEOvVjeoM5nQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">转换后数据集中的列</p></figure><p id="f666" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">PyCaret中模型定型的示例代码:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="40d4" class="nm kw iq ni b gy nn no l np nq"># Model Training and Validation <br/>lr = <strong class="ni ir">create_model</strong>('lr')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/debb9c17202bd18daaa7764cadbc89b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TX-IzWHBekZBRSQi2T_JTQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">线性回归模型的10倍交叉验证</p></figure><p id="450a" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">注意转换和自动特征工程的影响。R2不费吹灰之力就增加了10%。我们可以比较两个实验的线性回归模型的<strong class="lp ir">残差图</strong>，并观察转换和特征工程对模型的<strong class="lp ir">异方差</strong>的影响。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="be89" class="nm kw iq ni b gy nn no l np nq"># plot residuals of trained model<strong class="ni ir"><br/>plot_model</strong>(lr, plot = 'residuals')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/35ceeddb5dd2f45d5d8bb0f95b0710e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LxVMcK4hNvBvEj1tyqxfWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">线性回归模型的残差图</p></figure><p id="8cc0" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">机器学习是一个迭代的过程。迭代的次数和其中使用的技术取决于任务的关键程度，以及预测错误时的影响。在医院的ICU中实时预测患者结果的机器学习模型的严重性和影响远远超过为预测客户流失而建立的模型。</p><p id="0691" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在本教程中，我们只执行了两次迭代，第二次实验中的线性回归模型将用于部署。然而，在这个阶段，模型仍然只是笔记本/ IDE中的一个对象。要将其保存为可以传输到其他应用程序并由其他应用程序使用的文件，请执行以下代码:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="b517" class="nm kw iq ni b gy nn no l np nq"># save transformation pipeline and model <br/><strong class="ni ir">save_model</strong>(lr, model_name = 'deployment_28042020')</span></pre><p id="9ec4" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">当您在PyCaret中保存一个模型时，基于在<strong class="lp ir"> setup() </strong>函数中定义的配置的整个转换管道被创建。所有的相互依赖都是自动编排的。查看存储在“deployment_28042020”变量中的管道和模型:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/524e5330b5b9b3c4a67fd19db109609a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NWoHVWJzO7i7gIvrlBnIiQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用PyCaret创建的管道</p></figure><p id="2439" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们已经完成了培训和模型选择。最终的机器学习管道和线性回归模型现在保存为pickle文件(deployment_28042020.pkl ),该文件将在web应用程序中用于生成对新数据点的预测。</p><h1 id="85f4" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">👉任务2 —构建前端web应用程序</h1><p id="8121" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在，我们的机器学习管道和模型已经准备好开始构建一个前端web应用程序，它可以在新的数据点上生成预测。该应用程序将通过csv文件上传支持“在线”以及“批量”预测。让我们将应用程序代码分成三个主要部分:</p><h1 id="4005" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">页眉/布局</h1><p id="d5b6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">该部分导入库，加载训练模型，并创建一个基本布局，顶部有一个徽标，一个jpg图像，边栏上有一个下拉菜单，用于在“在线”和“批量”预测之间切换。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/a0a3fb317ae6bc377163799607f0afb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAnCZ1N_BNoPW7FoA-NXrA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">app.py —代码片段第1部分</p></figure><h1 id="9595" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">在线预测</h1><p id="90d8" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">本节处理初始app功能，在线逐一预测。我们使用streamlit小部件，如<em class="ns">数字输入、文本输入、下拉菜单和复选框</em>来收集用于训练模型的数据点，如年龄、性别、身体质量指数、儿童、吸烟者、地区。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/4cf119b32a91f815e163a73f613006a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFeq1wINsUUnvLJfuL-GOA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">app.py —代码片段第2部分</p></figure><h1 id="0018" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">批量预测</h1><p id="4ffe" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">批量预测是该应用的第二层功能。streamlit中的<strong class="lp ir"> file_uploader </strong>小部件用于上传csv文件，然后从PyCaret调用原生的<strong class="lp ir"> predict_model() </strong>函数来生成预测，使用streamlit的write()函数显示这些预测。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/aec59199125171120d49ba7ca4b1ded9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-g2iLy_gV7hom71PM3CEA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">app.py —代码片段第3部分</p></figure><p id="ff05" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果您还记得上面的任务1，我们最终确定了一个线性回归模型，该模型根据从6个原始特征中提取的62个特征进行了训练。web应用程序的前端有一个输入表单，只收集六个特征，即年龄、性别、bmi、儿童、吸烟者、地区。</p><p id="0f26" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">我们如何将新数据点的这6个特征转换成用于训练模型的62个特征？我们不需要担心这一部分，因为PyCaret通过编排转换管道自动处理这一部分。当您在使用PyCaret定型的模型上调用predict函数时，在从定型模型生成预测之前，会自动(按顺序)应用所有转换。</p><p id="0d60" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在Heroku上发布应用程序之前的最后一步是在本地测试web应用程序。打开Anaconda提示符，导航到您的项目文件夹并执行以下代码:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="d93f" class="nm kw iq ni b gy nn no l np nq"><strong class="ni ir">streamlit</strong> run app.py</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/2131b6f88763abdd4ac8ddc94bd76d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GxVKpxijk0tlqk-bO5Q3JQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简化应用测试—在线预测</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/3c0879590415f6775c42f550140759d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5tit2pMf5qiQqU_wjQMVg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">简化应用测试—批量预测</p></figure><p id="a910" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">现在我们有了一个全功能的web应用程序，我们可以开始在Google Kubernetes引擎上封装和部署应用程序了。</p><h1 id="5e1a" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">👉任务3 —创建Dockerfile文件</h1><p id="9ab6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">为了将我们的应用程序进行容器化部署，我们需要一个docker映像，它在运行时成为一个容器。使用docker文件创建docker映像。Dockerfile只是一个包含一组指令的文件。该项目的docker文件如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Dockerfile文件</p></figure><p id="0005" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">这个Dockerfile文件的最后一部分(从第23行开始)是特定于Streamlit的，通常不需要。Dockerfile区分大小写，必须与其他项目文件位于项目文件夹中。</p><h1 id="e571" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">👉任务4 —在GKE部署洗钱渠道:</h1><p id="de4f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">如果你想继续，你必须从GitHub中派生出这个<a class="ae mj" href="https://github.com/pycaret/pycaret-streamlit-google" rel="noopener ugc nofollow" target="_blank">库</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/466179b43b4e6ff28bee7d9d9a815d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5WvNEM3U59hHoAjFtE_EQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae mj" href="https://github.com/pycaret/pycaret-streamlit-google" rel="noopener ugc nofollow" target="_blank">https://github.com/pycaret/pycaret-streamlit-google</a></p></figure><p id="0c34" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">按照以下简单的10个步骤在GKE集群上部署应用程序。</p><h2 id="715b" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤1 —在GCP控制台中创建新项目</h2><p id="4c37" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">登录您的GCP控制台，然后转到“管理资源”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/0112c5b48190c841bc603369a8274243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OS16COUUns7uBnpyUxH9-w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌云平台控制台→管理资源</p></figure><p id="9b23" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">点击<strong class="lp ir">创建新项目</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/b82b71b71e0f6195d07c5686b5e03da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mI3sxfCPrUbt8OtLpa6ViQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Google云平台控制台→管理资源→创建新项目</p></figure><h2 id="2fe2" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤2 —导入项目代码</h2><p id="21a2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">点击控制台窗口右上角的<strong class="lp ir">激活云壳</strong>按钮，打开云壳。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/a5fc749c32719a6094ae4e6b968c7c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSlqCD2VMDvQo4Oft7nqaA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌云平台(项目信息页面)</p></figure><p id="4d0e" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">在Cloud Shell中执行以下代码来克隆本教程中使用的GitHub存储库。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="ee3c" class="nm kw iq ni b gy nn no l np nq">git clone <a class="ae mj" href="https://github.com/pycaret/pycaret-streamlit-google.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pycaret/pycaret-streamlit-google.git</a></span></pre><h2 id="0596" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤3-设置项目ID环境变量</h2><p id="cca2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">执行以下代码来设置PROJECT_ID环境变量。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="5b8d" class="nm kw iq ni b gy nn no l np nq">export PROJECT_ID=<strong class="ni ir">pycaret-streamlit-gcp</strong></span></pre><p id="14b6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">pycaret-streamlit-gcp 是我们在上面的步骤1中选择的项目的名称。</p><h2 id="4bac" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤4 —构建docker映像</h2><p id="5a1b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">通过执行以下代码，构建应用程序的docker映像并标记它以便上传:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="503c" class="nm kw iq ni b gy nn no l np nq">docker build -t gcr.io/${PROJECT_ID}/insurance-streamlit:v1 .</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/0747eae1c54af34e444bc77c39bcf2f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5HY6RQRrRzDjsmQEZK_Qbg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">docker构建成功时返回的消息</p></figure><p id="52b5" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">您可以通过运行以下代码来检查可用的图像:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="6c30" class="nm kw iq ni b gy nn no l np nq"><strong class="ni ir">docker </strong>images</span></pre><h2 id="fd94" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤5 —上传容器图像</h2><ol class=""><li id="b858" class="mq mr iq lp b lq lr lt lu lw ms ma mt me mu mi pd mw mx my bi translated">认证到<a class="ae mj" href="https://cloud.google.com/container-registry" rel="noopener ugc nofollow" target="_blank">容器注册表</a>(您只需要运行一次):</li></ol><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="97b8" class="nm kw iq ni b gy nn no l np nq">gcloud auth configure-docker</span></pre><p id="c2fd" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">2.执行以下代码将docker图像上传到Google容器注册表:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="7daa" class="nm kw iq ni b gy nn no l np nq">docker push gcr.io/${PROJECT_ID}/insurance-streamlit:v1</span></pre><h2 id="71fa" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤6 —创建集群</h2><p id="ab4f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">现在容器已经上传，您需要一个集群来运行容器。一个集群由一个运行Kubernetes的计算引擎VM实例池组成。</p><ol class=""><li id="2400" class="mq mr iq lp b lq mk lt ml lw ne ma nf me ng mi pd mw mx my bi translated">为gcloud工具设置项目ID和计算引擎区域选项:</li></ol><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="1050" class="nm kw iq ni b gy nn no l np nq">gcloud config set project $PROJECT_ID <br/>gcloud config set compute/zone <strong class="ni ir">us-central1</strong></span></pre><p id="5c12" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">2.通过执行以下代码创建一个集群:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="ccc5" class="nm kw iq ni b gy nn no l np nq">gcloud container clusters create <strong class="ni ir">streamlit-cluster</strong> --num-nodes=2</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/57696f12917a6b1d7f6aaa4848da4fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNX145tbVPjtTFOSLvjXnw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">谷歌云平台→ Kubernetes引擎→集群</p></figure><h2 id="b5a2" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤7 —部署应用程序</h2><p id="c165" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">要在GKE集群上部署和管理应用程序，您必须与Kubernetes集群管理系统通信。执行以下命令来部署应用程序:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="b03a" class="nm kw iq ni b gy nn no l np nq">kubectl create deployment insurance-streamlit --image=gcr.io/${PROJECT_ID}/insurance-streamlit:v1</span></pre><h2 id="5768" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤8 —将您的应用程序公开到互联网上</h2><p id="adcc" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">默认情况下，您在GKE上运行的容器不能从互联网上访问，因为它们没有外部IP地址。执行以下代码，将应用程序公开给internet:</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="3e7e" class="nm kw iq ni b gy nn no l np nq">kubectl expose deployment insurance-streamlit --type=LoadBalancer --port 80 --target-port <strong class="ni ir">8501</strong></span></pre><h2 id="58b6" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">步骤9 —检查服务</h2><p id="7807" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">执行下面的代码来获取服务的状态。<strong class="lp ir"> EXTERNAL-IP </strong>是您可以在浏览器中查看已发布应用的网址。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="3deb" class="nm kw iq ni b gy nn no l np nq">kubectl get service</span></pre><h2 id="42f4" class="nm kw iq bd kx op oq dn lb or os dp lf lw ot ou lh ma ov ow lj me ox oy ll oz bi translated">第10步—在网址上查看应用程序的运行情况</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/7c3ac3ea4704b56f7318148c364b9cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHRwykiazKdjL32SE_Uj8g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">发布于<a class="ae mj" href="https://34.70.49.248" rel="noopener ugc nofollow" target="_blank">https://34.70.49.248</a>的应用程序—第1页</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pf"><img src="../Images/570946996f9389ab0b2ab163374c5a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YhRqNABfQOIcMq2owc0pmw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">发布于<a class="ae mj" href="https://34.70.49.248" rel="noopener ugc nofollow" target="_blank">https://34.70.49.248</a>的应用程序—第2页</p></figure><p id="b76f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><strong class="lp ir">注意:</strong>在这篇文章发表时，该应用程序将从公共地址中删除，以限制资源消耗。</p><p id="2757" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://github.com/pycaret/pycaret-streamlit-google" rel="noopener ugc nofollow" target="_blank">链接到本教程的GitHub库</a></p><p id="1df6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://www.github.com/pycaret/pycaret-azure-deployment" rel="noopener ugc nofollow" target="_blank">微软Azure部署GitHub知识库链接</a></p><p id="182f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://www.github.com/pycaret/deployment-heroku" rel="noopener ugc nofollow" target="_blank">链接到Heroku部署的GitHub库</a></p></div><div class="ab cl pg ph hu pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="ij ik il im in"><h1 id="3e09" class="kv kw iq bd kx ky pn la lb lc po le lf jw pp jx lh jz pq ka lj kc pr kd ll lm bi translated">PyCaret 2.0.0来了！</h1><p id="32ac" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">我们收到了来自社区的大力支持和反馈。我们正在积极改进PyCaret，并准备我们的下一个版本。<strong class="lp ir"> PyCaret 2.0.0会更大更好</strong>。如果您想分享您的反馈并帮助我们进一步改进，您可以<a class="ae mj" href="https://www.pycaret.org/feedback" rel="noopener ugc nofollow" target="_blank">在网站上填写此表格</a>或者在我们的<a class="ae mj" href="https://www.github.com/pycaret/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>或<a class="ae mj" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>页面上发表评论。</p><p id="2812" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">关注我们的<a class="ae mj" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>并订阅我们的<a class="ae mj" href="https://www.youtube.com/channel/UCxA1YTYJ9BEeo50lxyI_B3g" rel="noopener ugc nofollow" target="_blank"> YouTube </a>频道，了解更多关于PyCaret的信息。</p><h1 id="0895" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">想了解某个特定模块？</h1><p id="16e7" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">从第一个版本1.0.0开始，PyCaret有以下模块可供使用。点击下面的链接，查看Python中的文档和工作示例。</p><p id="8eaa" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://www.pycaret.org/classification" rel="noopener ugc nofollow" target="_blank">分类</a> <br/> <a class="ae mj" href="https://www.pycaret.org/regression" rel="noopener ugc nofollow" target="_blank">回归<br/> </a> <a class="ae mj" href="https://www.pycaret.org/clustering" rel="noopener ugc nofollow" target="_blank">聚类</a><br/>T29】异常检测<br/>  <a class="ae mj" href="https://www.pycaret.org/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> <br/> <a class="ae mj" href="https://www.pycaret.org/association-rules" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a></p><h1 id="15a3" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">另请参见:</h1><p id="bb46" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">笔记本中的PyCaret入门教程:</p><p id="991e" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated"><a class="ae mj" href="https://www.pycaret.org/clf101" rel="noopener ugc nofollow" target="_blank">分类</a><br/>T3】回归T5】T6】聚类 <br/> <a class="ae mj" href="https://www.pycaret.org/anom101" rel="noopener ugc nofollow" target="_blank">异常检测</a> <br/> <a class="ae mj" href="https://www.pycaret.org/nlp101" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> <br/> <a class="ae mj" href="https://www.pycaret.org/arul101" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a></p><h1 id="ad96" class="kv kw iq bd kx ky kz la lb lc ld le lf jw lg jx lh jz li ka lj kc lk kd ll lm bi translated">你愿意投稿吗？</h1><p id="cec4" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv lw lx ly lz ma mb mc md me mf mg mh mi ij bi translated">PyCaret是一个开源项目。欢迎每个人都来投稿。如果您愿意投稿，请随意处理<a class="ae mj" href="https://github.com/pycaret/pycaret/issues" rel="noopener ugc nofollow" target="_blank">未决问题</a>。dev-1.0.1分支上的单元测试接受拉请求。</p><p id="0d3a" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">如果你喜欢PyCaret，请给我们GitHub回购的⭐️。</p><p id="4f5f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">中:【https://medium.com/@moez_62905/ T21】</p><p id="d10b" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">领英:<a class="ae mj" href="https://www.linkedin.com/in/profile-moez/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/profile-moez/</a></p><p id="0a09" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv lw mm ly lz ma mn mc md me mo mg mh mi ij bi translated">推特:<a class="ae mj" href="https://twitter.com/moezpycaretorg1" rel="noopener ugc nofollow" target="_blank">https://twitter.com/moezpycaretorg1</a></p></div></div>    
</body>
</html>