<html>
<head>
<title>Making a Stock Screener with Python!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python制作股票筛选程序！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/making-a-stock-screener-with-python-4f591b198261?source=collection_archive---------2-----------------------#2020-04-19">https://towardsdatascience.com/making-a-stock-screener-with-python-4f591b198261?source=collection_archive---------2-----------------------#2020-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1b8d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习如何用Python制作一个基于Mark Minervini的趋势模板的强大的股票筛选工具。</h2></div><p id="4c51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">免责声明:本文内容基于</em> <a class="ae lf" href="https://m.youtube.com/channel/UCYqMAKiU3tFijWnyqAxG4Cg" rel="noopener ugc nofollow" target="_blank"> <em class="le">理查德·莫格伦的Youtube频道</em> </a> <em class="le">纯属教育目的，不应视为专业投资建议。自行决定投资。</em></p><p id="ff2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">股票筛选是为你的特定交易策略寻找完美股票的好方法。然而，当我试图使用Python寻找股票筛选工具时，我几乎找不到任何功能性的自动化代码。所以我创建了这篇文章，帮助其他人根据马克·米纳尔维尼的趋势模板(选择最佳股票的8条原则)制作一个简单易懂的股票筛选Python程序。特别是在当前市场波动的情况下，我希望这个代码能帮助你做交易。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/809e6ceae6804131ff4f3be27612e9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TH_9fB-1WuWMuZlAIyt2sA.jpeg"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">图片来自<a class="ae lf" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1853262" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lf" href="https://pixabay.com/users/Pexels-2286921/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1853262" rel="noopener ugc nofollow" target="_blank">像素</a></p></figure><p id="7c5b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我进入代码之前，我想谈谈股票筛选标准。</p><ol class=""><li id="0ede" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld mb mc md me bi translated">证券的当前价格必须高于150和200天的简单移动平均线。</li><li id="34d0" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">150天简单移动平均线必须大于200天简单移动平均线。</li><li id="71ea" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">200天简单移动平均线必须至少有1个月的上升趋势。</li><li id="e551" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">50天简单移动平均线必须大于150简单移动平均线和200简单移动平均线。</li><li id="d2cc" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">当前价格必须大于50天简单移动平均线。</li><li id="95e5" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">当前价格必须比52周低点高出至少30%。</li><li id="aab4" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">当前价格必须在52周高点的25%以内。</li><li id="6f52" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">IBD RS评级必须大于70(越高越好)。RS评级是衡量一只股票在过去一年中相对于所有其他股票和整体市场的价格表现的指标。查看这篇<a class="ae lf" href="https://www.investopedia.com/terms/r/relativestrength.asp" rel="noopener ugc nofollow" target="_blank">文章</a>了解更多信息。</li></ol><p id="f5ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以在Mark Minervini的博客文章中读到更多关于这个模板的内容。</p><p id="9745" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你已经熟悉了标准，我们可以进入代码了。首先，导入以下依赖项。如果您的机器上没有安装以下模块之一，请在您的终端中使用“pip install (module name)”下载它们。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="mk ml l"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">导入这些依赖项，并使用<code class="fe mm mn mo mp b">yf.pdr_override.</code>覆盖弃用警告</p></figure><p id="f5ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们必须导入我们将在程序中使用的依赖项，如yahoo_fin(获取报价机列表)和pandas_datareader.data(获取历史股票数据)。</p><p id="9b4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们必须为程序的其余部分设置变量。我在下面概述了每个变量的含义。</p><ul class=""><li id="6dc3" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld mq mc md me bi translated">票贩子:标准普尔500所有的票贩子</li><li id="10a8" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mq mc md me bi translated">index_name:标准普尔500雅虎财经符号</li><li id="b230" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mq mc md me bi translated">start_date:历史数据的开始日期(正好一年前)</li><li id="1025" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mq mc md me bi translated">end_date:历史数据的结束日期(今天)</li><li id="0d5e" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mq mc md me bi translated">exportList:我们将为每只股票收集的值</li><li id="28c7" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mq mc md me bi translated">returns _ multiples:查看每只股票相对于市场表现的列表(将用于计算RS评级)</li></ul><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="mk ml l"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">for循环的开始。</p></figure><p id="7069" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以计算过去一年标准普尔500指数的累计回报，并将该值与同期标准普尔500每只股票的累计回报进行比较。IBD相对强弱指标本质上是计算一只股票在特定时间段内相对于市场和其他股票的表现。由于该指标仅在IBD服务中使用，我们可以通过将每只股票的累计回报率除以指数的累计回报率来估计IBD RS，然后为每只股票创建一个百分制排名。例如，如果AAPL在特定时期内的表现优于MSFT，那么它的RS就会更高。在Mark Minervini的趋势模板中，他寻找RS值为70或更高的股票(市场中表现最好的30%的股票)。</p><p id="679b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为在这个程序中，RS度量是用相对于给定列表中其他股票的百分比值来计算的，所以最好有一个更大数量股票的列表，以使RS值更准确。在这个程序中，我们选择了标准普尔500指数中的500只股票，这样就有了足够大的样本量。</p><p id="c217" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了加快这个过程，我们可以下载每只股票过去一年的历史数据，而不是不断地向雅虎财经发出请求(这可能会导致错误)。for循环末尾的time.sleep(1)也有助于抑制请求涌入时的潜在错误。最后，在使用分位数进行数据处理之后，我们得到了一个数据框架，其中包含给定列表中表现最好的30%的股票以及它们各自的RS值。</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="9648" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以只包括通过Minervini趋势模板条件8(RS值大于70)的前30%的股票，而不是计算每只股票的指标。从这里，我们可以计算出创造条件所需的指标。当前收盘价通过采用最后一天的调整收盘价来使用。过去一年的高点和低点是通过找出过去260个交易日(大约一年)数据框架中的最大值和最小值得到的。移动平均值是通过计算相应天数的滚动平均值来使用的。其余的代码实际上是按照前面提到的原则执行screener。如果一只股票通过了每一个条件，我们可以将它添加到我们的通过Minervini趋势模板的股票导出列表中！</p><p id="fedc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，为了方便起见，这段代码将打印出所有符合要求的股票的数据帧，并将股票下载到excel文件中。现在你知道如何创建一个有史以来最好的交易者使用的股票筛选工具了！</p><p id="28a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的GitHub要点包含了该程序的所有代码。我希望这个算法将来对你有用。非常感谢您的阅读！</p><figure class="lh li lj lk gt ll"><div class="bz fp l di"><div class="mk ml l"/></div></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="33a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢这篇文章，可以看看下面我写的其他一些Python for Finance文章！</p><div class="my mz gp gr na nb"><a rel="noopener follow" target="_blank" href="/parse-thousands-of-stock-recommendations-in-minutes-with-python-6e3e562f156d"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">使用Python在几分钟内解析数千份股票推荐！</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">了解如何在不到3分钟的时间内解析顶级分析师的数千条建议！</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np lq nb"/></div></div></a></div><div class="my mz gp gr na nb"><a rel="noopener follow" target="_blank" href="/stock-news-sentiment-analysis-with-python-193d4b4378d4"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">用Python进行股票新闻情绪分析！</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">对财经新闻进行秒级情感分析！</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="nq l nm nn no nk np lq nb"/></div></div></a></div><div class="my mz gp gr na nb"><a rel="noopener follow" target="_blank" href="/creating-a-finance-web-app-in-3-minutes-8273d56a39f8"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd iu gy z fp ng fr fs nh fu fw is bi translated">在3分钟内创建一个财务Web应用程序！</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">了解如何使用Python中的Streamlit创建技术分析应用程序！</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="nr l nm nn no nk np lq nb"/></div></div></a></div></div></div>    
</body>
</html>