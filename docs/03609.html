<html>
<head>
<title>Co-variance: An intuitive explanation!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">协变:直观的解释！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/co-variance-an-intuitive-explanation-a67f6c80674d?source=collection_archive---------26-----------------------#2020-04-05">https://towardsdatascience.com/co-variance-an-intuitive-explanation-a67f6c80674d?source=collection_archive---------26-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2406" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">一个全面而简单的指南，更侧重于公式背后的思想，而不是数学本身——开始用期望值、均值、方差构建模块，最终理解大图，即协方差</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0ef3b3edcd2766e8508f238d5cc026bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/1*-IPqWOcHcL7mb2HXWNaCMw.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">共方差计算的所有荣耀！</p></figure><h2 id="6412" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h2><p id="e142" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">与普遍的看法相反，公式不仅仅是数学符号。它试图表达一种想法，这种想法隐藏在数学之下，除非你真正去寻找，否则是不明显的。这种表述的主要问题(正如我经常遇到的那样)是，过一段时间后，你会忘记这个公式。因此，这里是我试图解释一个话题，使它坚持与观众。在深入讨论之前，我将尝试解释一些先决话题。如果您已经熟悉它们，请随意跳过。如果没有，一起骑:)</p><h2 id="1094" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">期望和均值</h2><p id="55bd" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">让我们从一个相对简单的主题开始，这是理解协方差所需的一个基本块。概率论中，期望代表<em class="mj">“一个</em> <a class="ae mk" href="https://en.wikipedia.org/wiki/Discrete_random_variable" rel="noopener ugc nofollow" target="_blank"> <em class="mj">离散随机变量</em> </a> <em class="mj">的期望值，它是其所有可能值的</em><a class="ae mk" href="https://en.wikipedia.org/wiki/Weighted_average" rel="noopener ugc nofollow" target="_blank"><em class="mj"/></a><em class="mj"/>的概率加权平均值，并形式化为，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/9672bd0fcc57e0217567ab306df0d446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*jBI01BwgGZD8Ju3luRHtQg.png"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">对 X 的所有值及其概率 p_i 的期望</p></figure><p id="faeb" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">这里的“X”是一个变量，它可以有多种形式——“X _ I”，每种形式都有自己的出现概率“p_i”。请注意，期望值是一个变量在考虑概率时可以取的所有值的单一数字表示。要记住的一个特例是当所有‘p _ I’相等时，即所有值出现的概率相等。在这种情况下，期望值转换为平均值。举个例子，假设一个变量模拟一个无偏骰子的滚动，那么它可能取的值可以是 1 到 6。这些数字出现的概率也是相等的。回到概括上来，下面展示了期望值到平均值的转换，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/196010c58a275316b6f33866e182d639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRwD4bFqo7DnHz3zMbzYCg@2x.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">期望意味着——如何使概率常数成为可能</p></figure><p id="9208" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">请注意，由于所有变量值的权重相等，平均值与值本身成比例，因此它倾向于更密集的点。请参见下面的点(蓝点)分布模拟，以及它们位置的变化如何导致平均值(红点)本身的变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mw"><img src="../Images/7d1b3addb7bb2b6f9db7f66bf084e027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7umK2k3ZpYE3h4WuaU8saA.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">换分追贱！</p></figure><p id="2136" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">也有各种各样的实际模拟，因为大多数时候它们不同于理论模拟。考虑掷骰子的例子，我们很容易地说它们有相等的概率，但是编程模拟可能显示一些变化。下面，我模拟了一万次不偏不倚的掷骰子。看骰子面的出现分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mx"><img src="../Images/d170aa47c84fedaa6ce7d34b5e026b54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mojiicmL6BjvrRUel-W0cw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">模拟一个无偏的骰子滚动一万次！</p></figure><p id="3300" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">现在比较一下理论计算和实际计算的平均通知是有差别的，尽管很小，但在实际情况下这就行了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi my"><img src="../Images/def4d5c5c7f41f107c2f94366d1a26b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNonftFOviuMU5OaZvZpFw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">比较理论和实际平均值计算</p></figure><h2 id="871c" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">差异</h2><p id="f4ed" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">观察下面的情节，你能发现其中的共同点吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mw"><img src="../Images/9b205f6146ef5b4ad39d7326b2473e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eZ1H2VwHY2O_T7FhV9i0wg.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">换点然后…等一下！？</p></figure><p id="595f" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">答案是——所有的都是一样的意思！但是他们看起来很不一样，对吧？它们之间有什么不同呢？似乎他们有不同的“传播”或“宽度”。方差基本上是对数据分布或宽度的度量。在统计学中，<em class="mj">方差是</em> <a class="ae mk" href="https://en.wikipedia.org/wiki/Expected_value" rel="noopener ugc nofollow" target="_blank"> <em class="mj">期望</em> </a> <em class="mj">的平方</em> <a class="ae mk" href="https://en.wikipedia.org/wiki/Deviation_(statistics)" rel="noopener ugc nofollow" target="_blank"> <em class="mj">偏差</em> </a> <em class="mj">中的一个</em><a class="ae mk" href="https://en.wikipedia.org/wiki/Random_variable" rel="noopener ugc nofollow" target="_blank"><em class="mj"/></a><em class="mj"/><a class="ae mk" href="https://en.wikipedia.org/wiki/Expected_value" rel="noopener ugc nofollow" target="_blank"><em class="mj">的意思是</em> </a> <em class="mj">让我们试着用这个定义来解释我们对期望的理解，</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/d3c35226e47fb2dbebb3d44403e680b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFGkiwrkIZPBP4wjXAwwLA@2x.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">差异-公式的定义</p></figure><p id="92e6" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">就这样，我们有了方差公式！请注意，我们首先计算所有“X”值的平均值。然后我们找到分子，它是每个值与平均值之差的平方。需要正方形部分，因为我们不关心传播的方向，因此我们不希望相反方向的传播，即具有不同的极性，彼此抵消。有人可能会说，如果我们求平方来求分子，为什么不后来求平方根呢？而这种想法恰恰是用标准差来表示的。换句话说，方差是标准差的平方。考虑到这一点，让我们来看看与之前相同的图(现在是分离的和静态的)，但是现在计算了方差和标准差。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mz"><img src="../Images/048168bcdb25d979dbd8359cef856a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_leSnE5uihUkCpUmAvnITQ.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">变点，静态均值但是变方差和标准差！</p></figure><p id="f5d8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">现在我们已经准备好讨论主要话题，但在此之前，还有一个更有趣的方差推导。这不是理解协变所必需的，但好奇的读者可能无论如何都想看到它。它代表了一种思想，<em class="mj">“变量的方差是变量的期望的平方减去期望本身的平方”。</em>是下面推导出来的，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/8052d7a9095a03608b1418e5090444dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cyb2nwRxUpYFiI-jxIHN2g@2x.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">又一个有趣的方差推导！</p></figure><p id="dedc" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">现在，让我们计算之前掷骰子模拟的方差。同样，让我们用三种不同的方法计算相同的方差，一种方法代表懒惰 python 方法，剩下的两种方法代表我们讨论过的公式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi na"><img src="../Images/ab49f683ad7d6a82329714cbfd5e5647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*128CqtomAkGqWjMWww6DFw.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">用 python 计算方差——很抱歉我的 python 一线性代码:)</p></figure><p id="7d36" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">请注意，方差与某个十进制值相同，微小的差异是由于浮点误差造成的。此外，在 Python 偏好方式 1 中，我编写了方式 2 和方式 3，只是为了展示我们讨论过的公式。</p><h2 id="727b" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">协方差</h2><p id="2c5d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">到目前为止，我们一次只研究一个变量，即我们的数据是 1D 或一维的。共方差是为高维数据定义的。因此，顾名思义，它不是只考虑一个变量，而是考虑多个(正好 2 个)变量并计算方差。在进一步讨论之前，我们先讨论一下数据。当我说 2D 时，我的意思是每个数据实例都由两个数字表示。在基本的平面几何中，我们知道两个数字可以与一个点相关联，因此每个实例由一个点表示。具有 10 个实例的样本数据及其在 2D 平面上的可视化如下所示，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nb"><img src="../Images/b954903c5621edae838fa9fc6ae9977c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-vLYdgW9--6vUm8r284niA.png"/></div></div></figure><p id="5314" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">现在回到它，更正式的协变是<em class="mj">“两个</em> <a class="ae mk" href="https://en.wikipedia.org/wiki/Random_variable" rel="noopener ugc nofollow" target="_blank"> <em class="mj">随机变量</em> </a> <em class="mj">的联合变异性的度量”。这个想法是，如果两个变量遵循相同的增长行为，我们有很高的协方差。我的意思是，如果一个变量增加，另一个也会增加。在所有其他情况下，比如一个增加(或减少)而另一个减少(或增加)，我们会有负的协方差。作为方差的扩展，我们可以将方差公式表示为:</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/e38348faa7dc0d096fadb4552abea08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWWGOuhPIxH2Ah5ntAH99w@2x.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">方差到共方差</p></figure><p id="4dcf" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">请注意微妙的第二行，它说同一个变量的协方差等于该变量的方差。后来我们所做的就是把分子第二部分中与 x 相关的项替换为 y，这样我们就有了协方差公式！还要注意,‘UX’和‘uy’分别是变量‘X’和‘Y’的平均值。</p><p id="49a6" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">如果我们仔细观察分子，就会发现一个有趣的直觉。但是为了概括这一点，假设我们计算两个变量的平均值(‘UX’和‘uy’)，并从 dateset 中选取任意一个点(‘x _ I’和‘y _ I’)，并将它们都绘制为 2D 平面中的点。然后，我们可以用这两个位置完全相反的点形成一个矩形。朝这个方向走会导致，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/bdf798305716e179c0767b8edbf62f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lcv40gZCb62xjMmfhv6W7g@2x.jpeg"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">协方差是所有矩形区域的平均和</p></figure><p id="1531" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">所以，它基本上代表了一个矩形的面积，绘制在平均值和数据点之间。因此，数据集的每个点将构成一个具有平均点的矩形。但是当我们为整个数据集绘制矩形并使用上面的公式找到它们的面积时，我们观察到一些矩形有负的面积！没什么好担心的，因为它只是展示了这个数据点(我们得到-ve 区域)的变量有不同的行为，即一个是高的，而另一个是低的，这违背了协变的思想。现在，当我们对所有数据点的矩形面积求和时，我们要做的是加上+ve 面积，减去-ve 面积。最后，平均后的结果值表示协方差的大小。下面显示了一个样本数据集的例子，其中我们展示了数据集的不同点以及由它们的面积形成的矩形。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nc"><img src="../Images/ce7498d53891bdd6cd7852d9355cb4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JaJuvswEpH2eNC-ol7IVZw.gif"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">由中点和其余点形成的矩形。负区域用红色表示，正区域用绿色表示。</p></figure><p id="d3e3" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">让我们看看不同的数据集和形成的矩形。另请注意，图 1 代表面积最大的情况，因此协方差也最大(我们讨论了它们是如何成比例的)。如前所述，此处显示的行为是理想的，即当一个变量增加时，另一个变量也会增加。随着点开始偏离该直线行为，如随后的图中所示，红色矩形的数量增加，因此协变的幅度减小。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nd"><img src="../Images/fdabdf1ab0c9ffd76c24f2a2e7cbdcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUagBYPBekw6tniKEKTA9A.png"/></div></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">从图 1 到图 4 的面积减少，因为“两个变量应该显示相似的行为”的预期发生了变化</p></figure><h2 id="0c8e" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h2><p id="d988" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">当我们以一种易于理解的形式，如图表或绘图来表示公式时，它变得更容易理解，也更容易抓住隐藏的洞察力。例如，如果我们以矩形及其面积的形式表示协方差，我们可以快速回答这样的问题:哪个协方差更高，是指数衰减图还是增长图？或者说如果均值附近有很多+ve 点，但是远离均值有一个-ve 点会怎么样？(阅读，离群值)。试着用矩形和面积的形式来思考这些问题，答案很快就会出来。希望如此:)</p><h2 id="9494" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考</h2><p id="c827" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">[1]<a class="ae mk" href="https://en.wikipedia.org/wiki/Expected_value" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Expected_value</a></p><p id="18d2" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">[2]<a class="ae mk" href="https://en.wikipedia.org/wiki/Standard_deviation" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Standard_deviation</a></p><p id="5a6e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">[3]https://en.wikipedia.org/wiki/Variance<a class="ae mk" href="https://en.wikipedia.org/wiki/Variance" rel="noopener ugc nofollow" target="_blank"/></p><p id="8fa1" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">[4]https://en.wikipedia.org/wiki/Covariance<a class="ae mk" href="https://en.wikipedia.org/wiki/Covariance" rel="noopener ugc nofollow" target="_blank"/></p><p id="cdef" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">[5]<a class="ae mk" href="https://stats.stackexchange.com/questions/18058/how-would-you-explain-covariance-to-someone-who-understands-only-the-mean" rel="noopener ugc nofollow" target="_blank">https://stats . stack exchange . com/questions/18058/how-would-you-explain-co variance-to-someone-who-only-understand-the-mean</a></p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="fcb5" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">如有任何问题，请随时在 LinkedIn<a class="ae mk" href="https://www.linkedin.com/in/imohitmayank/" rel="noopener ugc nofollow" target="_blank">上与我联系，或者在我的网站 T10 上访问更多类似的文章。</a></p><p id="10c1" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly ld mo ma mb lh mp md me ll mq mg mh mi im bi translated">干杯。</p></div></div>    
</body>
</html>