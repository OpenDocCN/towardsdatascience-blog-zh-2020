<html>
<head>
<title>A Simple Way to Analyze Student Performance Data with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python分析学生成绩数据的简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-simple-way-to-analyze-student-performance-data-with-python-cc09c7508c4c?source=collection_archive---------26-----------------------#2020-06-11">https://towardsdatascience.com/a-simple-way-to-analyze-student-performance-data-with-python-cc09c7508c4c?source=collection_archive---------26-----------------------#2020-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b795bda16c9f48587eab4990d005e7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*se48tZ2_-MgTQN3ETD7Arw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">斯蒂芬·道森在Unsplash上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="4b4a" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">探索如何使用Python和Dremio以高效的方式分析数据和构建信息图表</h2></div><h1 id="78e5" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">介绍</h1><p id="6e9a" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">数据分析和数据可视化是数据科学的重要组成部分。实际上，在机器学习时代之前，所有的数据科学都是关于用不同的工具解释和可视化数据，并对数据的本质做出结论。如今，这些任务仍然存在。他们只是众多杂项数据科学工作中的一个。通常，所谓的EDA(探索性数据分析)是机器学习管道中的一个必需部分。它允许更好地理解数据、其分布、纯度、特征等。此外，建议可视化，以向不同的利益相关者呈现机器学习工作的结果。他们可能不熟悉复杂的数据科学原理，但查看图形和图表对他们来说很方便。此外，如果不需要深入挖掘数据，数据分析和可视化可以作为独立的任务来完成。无论如何，一个好的数据科学家应该知道如何分析和可视化数据。</p><p id="e65b" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在本教程中，我们将展示如何分析数据，以及如何构建美观且信息丰富的图表。我们将使用流行的Python库进行可视化，即matplotlib和seaborn。此外，我们将使用Pandas作为操纵数据帧的工具。我们将使用的数据集是<a class="ae mq" href="https://archive.ics.uci.edu/ml/datasets/Student+Performance" rel="noopener ugc nofollow" target="_blank">学生表现数据集</a>。我们将演示如何将数据加载到AWS S3，以及如何通过Dremio将数据导入Python。Dremio也是数据管理和预处理的完美工具。这就是为什么我们会在Dremio中立即对数据做一些事情，然后再将它放入Python的手中。</p><h1 id="829e" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">假设</h1><p id="d744" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">本文假设您拥有对Dremio的访问权限，并且拥有一个T2 AWS账户。我们将使用<a class="ae mq" href="https://www.python.org/downloads/release/python-360/" rel="noopener ugc nofollow" target="_blank"> Python 3.6 </a>和<a class="ae mq" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>、<a class="ae mq" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>和<a class="ae mq" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>包。要将Dremio连接到Python，还需要Dremio的<a class="ae mq" href="https://www.dremio.com/drivers/" rel="noopener ugc nofollow" target="_blank"> ODBC </a>驱动。所有Python代码都是在<a class="ae mq" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter Notebook </a>环境下编写的。</p><p id="71b5" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">将数据加载到AWS S3有两种方式，通过AWS web控制台或以编程方式。在本教程中，我们将展示如何直接从Python代码向S3发送数据。为了能够从Python管理S3，我们需要创建一个用户，您将代表该用户从代码中执行操作。为此，从AWS控制台的服务列表中选择，单击，然后按按钮:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/3c79b6525a98b9a79ba26b4c2b90b50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BqhI9srV8G03YIqU.jpg"/></div></div></figure><p id="8805" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">给新用户起一个名字(在我们的例子中，我们选择了<em class="mw"> test_user </em>)并为这个用户启用编程访问:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mx"><img src="../Images/045772fb82cbf2e19f6a9ef824115384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CNzIuWDojEhYyK2I.jpg"/></div></div></figure><p id="28cc" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">下一步，您必须设置权限。在大多数情况下，这是一个重要的阶段，您可以为不同的用户调整权限。您甚至可以在这里创建自己的访问策略。但是在本教程中，为了简单起见，只给用户对AWS S3的完全访问权:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi my"><img src="../Images/ea8a2e0bbf0ecb4be5ae65bd800f1358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0a-UulW23xjD39nX.jpg"/></div></div></figure><p id="374d" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">创建用户后，您应该复制所需的凭证(访问密钥ID和秘密访问密钥)。您将在后面的代码中使用它们向AWS S3发出请求。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mz"><img src="../Images/d6bf8275ed50d0b6177ec442d2471f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fDqltAltE7nfCUiE.jpg"/></div></div></figure><p id="29c5" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在配置文件中，设置要为其创建存储桶的区域，等等。在S3:</p><p id="d21f" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在一切都为编码做好了准备！先做点简单的吧。例如，显示S3的现有时段:</p><p id="0331" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在上面的代码中，我们导入库<em class="mw"> boto3 </em>，然后创建<em class="mw">客户端</em>对象。作为一个参数，我们指定“<em class="mw"> s3 </em>”来表明我们想要使用这个AWS服务。之后，我们使用创建的对象的<em class="mw"> list_buckets() </em>方法来检查可用的桶。下面是我们在响应变量中得到的结果(一个带有桶的空列表):</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/4c45bfc6f02d54ca02d9171a65ddadb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MvVYPadhytFQ8BRC.jpg"/></div></div></figure><p id="0839" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在让我们创建一个桶。为此，使用客户端对象的<em class="mw"> create_bucket() </em>方法:</p><p id="4312" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">下面是创建存储桶后，<em class="mw"> list_buckets() </em>方法的输出:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nb"><img src="../Images/0bc46e68bd3b78605d0eaed3ec2e85cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NeGUndKbjP7VWayx.png"/></div></div></figure><p id="323d" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">您还可以在AWS web控制台中看到创建的存储桶:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nc"><img src="../Images/c3e84d1be8afcad786e3b9dd474a3adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E-_F-PSNItrtvEng.jpg"/></div></div></figure><p id="b99f" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我们有两个文件需要加载到亚马逊S3，<em class="mw"> student-por.csv </em>和<em class="mw"> student-mat.csv </em>。为了加载这些文件，我们使用客户端对象的<em class="mw"> upload_file() </em>方法:</p><p id="2068" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">最后，您应该能够在AWS web控制台中看到这些文件(在前面创建的存储桶中):</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/d6e2f3891d8d072e9085e6945e589a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cCWkfX28FoQXWurD.jpg"/></div></div></figure><h1 id="0d22" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">连接到您的AWS S3数据源</h1><p id="5e5d" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">要连接Dremio和AWS S3，首先转到服务列表中的部分，选择<strong class="lr jj"> <em class="mw">删除根访问密钥</em> </strong>选项卡，然后按下<strong class="lr jj"> <em class="mw">管理安全凭证</em> </strong>按钮。然后选择<strong class="lr jj"> <em class="mw">访问键</em> </strong>选项卡然后点击<strong class="lr jj"> <em class="mw">新建访问键</em> </strong>按钮。按下<strong class="lr jj"> <em class="mw">显示访问键</em> </strong>后，复制<em class="mw"> AWS访问键</em>和*AWS访问密码*:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/49a5bd9adc0ffc240c29ba4582fb2529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wgf-N7qveIM1VAGx.jpg"/></div></div></figure><p id="b44f" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在Dremio GUI中，单击按钮添加新源。然后选择<strong class="lr jj"> <em class="mw">亚马逊S3 </em> </strong>。应该会出现以下窗口:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nf"><img src="../Images/c29208df4878ee9058f8ddcc525fe1bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s_7guQNenVeakLtK.jpg"/></div></div></figure><p id="34ea" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在上面的窗口中，您应该指定源的名称(<em class="mw"> student_performance </em>)以及您在上一步中生成的凭证。</p><h1 id="5a49" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">准备您的数据</h1><p id="f084" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这部分教程中，我们将展示如何处理关于学生在葡萄牙语课上表现的数据框架。然而，需要同样的行动来管理其他数据框架(关于数学课的表现)。</p><p id="96e2" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">首先，打开<em class="mw"> student_performance </em>源文件中的<em class="mw"> student-por.csv </em>文件。请务必更改字段分隔符的类型(“；”)，行分隔符(" \n ")，并勾选<strong class="lr jj"> <em class="mw">提取字段名</em> </strong>复选框，如下图所示:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/facedecd54f75272e2d2aac54410a3d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fAhG-IUxGVst0vQm.jpg"/></div></div></figure><p id="62d1" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我们不需要<em class="mw"> G1 </em>和<em class="mw"> G2 </em>列，我们把它们去掉吧。单击每列名称旁边的箭头，调出上下文菜单。然后从菜单中选择选项:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/e925a5abd4d7cd273e68753f8bb0a857.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/0*8abgI3eXAhR6_On6.jpg"/></div></figure><p id="f229" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">通过同一个下拉菜单，我们可以将<em class="mw"> G3 </em>列重命名为<em class="mw"> final_target </em>列:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/2ac5c2a5fa1b3b7fc48d003cbfff9f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/0*lEiF3WNUlYqTibZ2.jpg"/></div></figure><p id="3fc2" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">接下来，我们注意到所有的数值都是字符串数据类型。我们想把它们转换成整数。为此，单击列名附近的小<strong class="lr jj"> <em class="mw"> Abc </em> </strong>按钮，然后选择所需的数据类型:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/808a2207465a7967595021203eda9755.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/0*iu3dsd4KBQL55m2k.jpg"/></div></figure><p id="faa3" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">结果中将出现以下窗口:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/6a1f2445476521b2a7865289b02ede3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/0*DJLGIIlWaOYnGmy8.jpg"/></div></figure><p id="4722" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在这个窗口中，我们需要指定新列的名称(具有新数据类型的列)，还需要设置一些其他参数。准备好后，按下按钮。我们应该对所有数字列进行类型转换，这些数字列是字符串:<em class="mw"> age、Medu、Fedu、traveltime、studytime、failures、famrel、freetime、goout、Dalc、Walc、health、absenties</em>。</p><p id="9f2a" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在对数据执行上述所有操作后，我们将数据帧保存在名为<em class="mw">端口1 </em>的<em class="mw">学生性能空间</em>中。</p><p id="108d" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在Dremio中，您所做的一切都会在SQL代码中得到反映。例如，我们上面描述的所有操作都生成了下面的SQL代码(您可以通过点击<strong class="lr jj"> <em class="mw"> SQL编辑器</em> </strong>按钮来检查):</p><p id="0528" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">此外，您可以编写自己的SQL查询。假设我们想要创建新的列<em class="mw"> famsize_bin_int </em>。该列应为二进制。当来自列<em class="mw"> famsize </em>的给定行中的值等于“GT3”时，它应该包含“1”；当famsize列中的相应值等于“LE3”时，它应该包含“0”。下面是实现这一想法的SQL代码:</p><p id="f911" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在下图中，您可以看到在单击按钮后，列<em class="mw"> famsize_int_bin </em>出现在dataframe中:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/49971149670e062420d4047a109f3981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r2n-r2Oowr6oZcYz.jpg"/></div></div></figure><p id="e119" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">最后，我们希望根据<em class="mw"> final_target </em>列对dataframe中的值进行排序。我们希望在表格顶部看到分数最低的学生，因此我们从下拉菜单中选择<strong class="lr jj"> <em class="mw">升序</em> </strong>选项:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/28ae52789f1d0bf45501d17c8a27d31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/0*XEkFw02A5IyH2z0w.jpg"/></div></figure><p id="5efe" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">最后，我们在<em class="mw">student _ performance _ space</em>中以<em class="mw"> port_final </em>的名字保存策划的数据帧。数学数据集也是如此(我们将其保存为<em class="mw"> mat_final </em>表)。</p><h1 id="fc6f" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">连接到Python</h1><p id="2924" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">要连接Dremio和Python脚本，我们需要使用PyODBC包。下面的代码用于将<em class="mw"> port_final </em>和<em class="mw"> mat_final </em>表作为pandas dataframes导入Python。</p><p id="b7dd" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">如您所见，我们需要指定主机、端口、dremio凭证和Dremio ODBC驱动程序的路径。然后我们使用PyODBC对象的方法connect()建立连接。Pandas使用read_sql()方法从远程数据源获取数据。在创建SQL查询时，我们使用了表的完整路径(name _ of _ the _ space . name _ of _ the _ data frame)。</p><h1 id="8783" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">Python中的数据分析和可视化</h1><p id="17a1" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">探索性数据分析的主要目标是理解数据。它可以作为一项独立的任务，也可以作为机器学习过程中的准备步骤。EDA有助于确定您的数据具有哪些特征，分布情况如何，是否需要进行数据清理和预处理等。</p><p id="4494" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">可能每个EDA都是从探索数据集的形状和浏览数据开始的。为了显示dataframe中的前5条记录，可以在Pandas dataframe上调用<em class="mw"> head() </em>方法。您还可以将行数指定为该方法的参数。换句话说，5是该方法显示的默认行数，但是您可以将其更改为10，例如。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/2f946bebf78e8959bd3d2f5f5f558011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vVNjJ_Zln_26bJ9f.png"/></div></div></figure><p id="ff91" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">要检查数据的形状，使用数据帧的<em class="mw">形状</em>属性:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/8a2cab088a63e613b5d9f00e0dfb2680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*u0Z0nDnKGLfdhjv5.png"/></div></figure><p id="bc53" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">你可以看到葡萄牙语数据框中的行数远远多于数学数据框中的行数。此外，在本教程中，我们将只使用葡萄牙语数据帧，以避免文本过载。但是这些数据框架是完全相同的，如果你愿意，你可以用数学数据框架做同样的操作，并比较结果。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/cf11eed93c7183f37b7abbc8a88438bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/0*aCrG0NY-WIqYj6v9.png"/></div></figure><p id="5296" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在我们只想看看来自市区的学生。为此，我们只提取那些在地址<em class="mw">列</em>中包含值“U”的行:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/46c2a9dd8c0556dc941fb3c12b7ed201.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/0*tQR6q6uxnHbCMF9c.png"/></div></figure><p id="4a0f" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">从上面的输出，我们可以说来自城市地区的学生比来自农村地区的学生多。例如，如果我们继续进一步研究机器学习模型，我们可能会发现这些信息对一些特征工程很有用。</p><p id="92ae" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">除了head()函数，还有另外两个Pandas方法允许查看数据帧的子样本。<em class="mw"> tail() </em>方法从表的末尾返回行。<em class="mw"> sample() </em>方法从dataframe返回随机的<em class="mw"> N </em>行。如果您不仅想查看表的开头或结尾，还想显示数据帧不同部分的不同行，这可能会很有帮助:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/ab9c0649b048cb0c3e0ccdf1aa17c2fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OvmfZy0rrpzAdErc.png"/></div></div></figure><p id="648d" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">为了检查你的数据框架有哪些列，你可以使用<em class="mw">列</em>属性:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/3750f5664f519270382011ca47648e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*34adxSZBiAMjcUUp.png"/></div></div></figure><p id="2171" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">如果需要编写代码来处理列名，可以使用Python的原生列表轻松完成。</p><p id="c06b" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">任何EDA中的一个重要步骤是检查数据帧是否包含空值。对于熊猫，这不需要任何复杂的代码就可以完成。只需在数据帧上调用<em class="mw"> isnull() </em>方法，然后使用<em class="mw"> sum() </em>方法聚合值:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/cc18b0c6c6e927f71d551ece77c4d759.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/0*4ZB4MMIr1Vc6Pm4k.png"/></div></figure><p id="2ea9" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">正如我们所看到的，我们的数据帧经过了很好的预处理，它不包含丢失的值。</p><p id="5c6d" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">同样，您可能希望查看不同列的数据类型。数据类型可通过dataframe的<em class="mw"> dtypes </em>属性访问:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3f6bdd1ff301fda39251a850c86329dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/0*lyHqvT71PMDhpIg4.png"/></div></figure><p id="d855" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我们数据集中的所有列要么是数字型(整数)，要么是分类型(对象)。</p><p id="7490" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">了解数据集的基本统计数据通常很有用。在Pandas中，您可以通过调用<em class="mw"> describe() </em>方法来实现这一点:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/d8f672ac7685e6338edc5c1355bb7e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TyeRX45JGLiFEGK9.png"/></div></div></figure><p id="835c" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">此方法返回统计数据(计数、平均值、标准偏差、最小值、最大值等)。)关于数据帧的每个数字列。要查看关于分类特性的一些信息，您应该指定<em class="mw"> describe() </em>方法的<em class="mw"> include </em>参数，并将其设置为<em class="mw"> ['O'] </em>(见下图)。但是对于分类列，该方法只返回计数、唯一值的数量、最频繁的值及其频率。我们的大多数分类列都是二元的:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/66e11104d519e1d403d718daf0734c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nxt2A6hEu-b_sn0l.png"/></div></div></figure><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/2f3d920febf3ad2def694678817e8667.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/0*E_lxQEmV4853V99j.png"/></div></figure><p id="f19c" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在我们要用Matplotlib和Seaborn构建可视化。但是首先，我们需要导入这些包:</p><pre class="ms mt mu mv gt nx ny nz oa aw ob bi"><span id="09a8" class="oc ky ji ny b gy od oe l of og">import matplotlib.pyplot as plt import seaborn as sns</span></pre><p id="b912" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">让我们看看数据集中男性和女性的比例。为此，我们选择列<em class="mw">性别</em>，然后使用<em class="mw"> value_counts() </em>方法，其中normalize参数等于<em class="mw"> True </em>。然后我们调用<em class="mw"> plot() </em>方法。这将使用Matplotlib来构建一个图形。我们可以看到数据集中的女生(大约60%)比男生(大约40%)多。相应的代码和可视化你可以在下面找到。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/d9027f3ae2c1612e7649c660ab6e5fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/0*AbB8iQthJRQPxXER.png"/></div></figure><p id="9a34" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我们已经看到了性别特征在数据集中的分布。但是通常，最有趣的列是目标列。在我们的例子中，这个列叫做<em class="mw"> final_target </em>(它代表一个学生的最终成绩)。这次我们将使用Seaborn制作一个图表。Seaborn包有用于此目的的<em class="mw"> distplot() </em>方法。我们指定的参数是<em class="mw">颜色</em>(绿色)和<em class="mw">箱数</em> (10)。代码和图像如下:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c80ada98778d25990f977007f1c76d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/0*Li07ZPqu3J2TB4Fa.png"/></div></figure><p id="2dc3" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">从上面的直方图中，我们可以说最频繁的等级在10–12左右，但是从左侧开始有一个尾部(接近零)。也许在未来，在建立模型之前，值得对目标变量的分布进行转换，使其更接近正态分布。</p><p id="0552" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">Seaborn包有很多方便的比较图形的函数。其中一个函数是<em class="mw"> pairplot() </em>。您可以选择要分析的列，Seaborn将在对角线上构建这些列的分布，并在所有其他位置构建散点图。每个散点图显示两个指定列之间的相互关系。在我们的例子中，这种可视化可能没有它应有的用处。它更适合连续的特征，而不是整数。但是，您可以理解这种可视化的要点:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/20b4cd783b3358b2257fe353501501e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q-1zY29C6YqGEXiH.png"/></div></div></figure><p id="ba66" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">让我们使用Matplotlib来看看数据集中所有数字列的分布。首先，我们创建一个只有数字列的data frame(<em class="mw">df _ num</em>)。为此，我们使用select_dtypes() Pandas方法。我们指定只接受<em class="mw"> float64 </em>和<em class="mw"> int64 </em>数据类型，但是对于这个数据集，只接受整数列就足够了(没有浮点值)。此外，我们删除了<em class="mw"> famsize_bin_int </em>列，因为它最初不是数字。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/a15aa87aa5ac482d859bb6cb43d76efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5AUgs1-tENZuLt9O.png"/></div></div></figure><p id="a490" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">现在，我们在<em class="mw"> df_num </em> dataframe上使用<em class="mw"> hist() </em>方法来构建一个图:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/0cadfd034206b3e4c203f6d21269b254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YPlEy2ZSVkxx9vVV.png"/></div></div></figure><p id="a892" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在<em class="mw"> hist() </em>方法的参数中，我们已经指定了绘图的大小、标签的大小和容器的数量。</p><p id="a9fb" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">或许，分析不同列和特定条件下的值的范围是很有趣的。这是如何工作的。我们想看看<em class="mw"> final_target </em>列的范围如何根据学生父母的工作而变化。为此，我们使用Seaborn的函数<em class="mw"> boxplot() </em>。在此之前，我们使用Matplotlib调整绘图的大小。父亲工作的图表如下所示:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/521fa59b72bc3f95d98034b799b2f6a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EG9mI2T180kXd6aa.png"/></div></div></figure><p id="6df7" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">这是母亲工作的图表:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi on"><img src="../Images/d5cb16a07ba4c33ba3b90fad576b698c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vjeUNH1-rUkMDiTX.png"/></div></div></figure><p id="ebb0" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">箱线图允许查看平均值以及数据的高低四分位数。胡须显示了分布的其余部分。胡须外的点代表异常值。</p><p id="d87e" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">从上面的图表中你可以得到一个有趣的认识，那就是如果学生的父亲或母亲是老师，那么这个学生很有可能获得高分。</p><p id="c70e" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">同样的，我们可以看到女生在学业上比男生更成功:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/5dc10204dfe3aaa71ad16bfacfe9af43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/0*mzGLqeNAfE-yOohg.png"/></div></figure><p id="9622" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">EDA最有趣的一点是探索变量之间的相关性。我们可以分析相关性，然后使用Seaborn将其可视化。这里我们只看数字列。在为机器学习模型训练做真正的准备时，科学家应该对分类变量进行编码，并像处理数字列一样处理它们。但是这超出了我们教程的主题。</p><p id="313f" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">下面代码的第一行使用方法<em class="mw"> corr() </em>来计算不同列和<em class="mw"> final_target </em>特性之间的相关性。我们丢弃最后一条记录，因为它是<em class="mw"> final_target </em>(我们对<em class="mw"> final_target </em>与自身具有完美相关性这一事实不感兴趣)。</p><p id="c7de" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">代码的第二行过滤掉所有弱相关性。在我们的例子中，我们只想看相关性，它大于0.12(绝对值)。我们还想对列表进行降序排序。</p><p id="44a3" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">第三行只是打印出结果。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/6968fcf9fa9b386ad80199807df73fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iczJ-XeGNy0EBQ41.png"/></div></div></figure><p id="9dfa" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">我们可以看到，有8个特征与目标变量密切相关。有些是正相关，有些是负相关。例如，最强的负相关性与<em class="mw">故障</em>特征相关。如果学生过去成绩不好，他/她将来也可能继续学习不好，这是合理的。</p><p id="63b6" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">此外，学生在周末或工作日饮酒越多，他/她的最终成绩越低。在<em class="mw">空闲时间</em>和<em class="mw">行程时间</em>变量之间也存在负相关性。学生的空闲时间越多，他/她的表现就越差。旅行越多的学生成绩也越差。</p><p id="c5a0" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">同时，我们有3个与目标变量正相关:studytime，Medu，Fedu。很明显，你花在学习上的时间越多，你的学习成绩就越好。有趣的事实是，父母的教育程度也与孩子的表现密切相关。</p><p id="467e" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">在热图上，您不仅可以看到与目标变量的相关性，还可以看到变量之间的相关性。例如，父亲和母亲的教育程度、学生外出的时间和饮酒量、失败次数和学生年龄等之间有很强的相关性。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/22264447aea5b6cc06ad69c3447ee0bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b5tjQ_FAwWq3-i7b.png"/></div></div></figure><p id="8834" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated">探索相关性是EDA中最重要的步骤之一。它允许理解哪些功能可能是有用的，哪些是多余的，以及哪些新功能可以人工创建。</p><h1 id="0038" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">结论</h1><p id="e3ed" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在本文中，我们介绍了如何以编程方式将数据加载到AWS S3，如何使用Dremio准备存储在AWS S3中的数据，以及如何在Python中分析和可视化这些数据。我们还展示了如何使用Dremio以及Dremio和Python代码连接到您的数据湖。在工作过程中，我们使用了Matplotlib和Seaborn包。</p></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><p id="9afd" class="pw-post-body-paragraph lp lq ji lr b ls ml kj lu lv mm km lx ly mn ma mb mc mo me mf mg mp mi mj mk im bi translated"><em class="mw">最初发表于</em><a class="ae mq" href="https://www.dremio.com/tutorials/analyzing-student-performance-with-dremio-python/" rel="noopener ugc nofollow" target="_blank"><em class="mw">【https://www.dremio.com】</em></a><em class="mw">。</em></p></div></div>    
</body>
</html>