<html>
<head>
<title>Matrix Computation With NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NumPy矩阵计算</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/matrix-computation-with-numpy-a865ebaf2005?source=collection_archive---------60-----------------------#2020-05-17">https://towardsdatascience.com/matrix-computation-with-numpy-a865ebaf2005?source=collection_archive---------60-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0845586edb398fc7846624d72d51bcc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9RyxgIKrlsFM959OdSerVg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来自我在<a class="ae jg" href="https://www.figma.com/file/a2u5vu9ub0TBsS9bpmU3Mv/Untitled?node-id=0%3A3" rel="noopener ugc nofollow" target="_blank"> Figma </a>上的设计</p></figure><div class=""/><div class=""><h2 id="4aa6" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">NumPy如何简化您的代码，同时提高其性能。广播和SIMD来救援了！</h2></div><h1 id="f823" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated"><strong class="ak">简介</strong></h1><p id="a721" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">当我们使用机器学习，尤其是深度学习来解决问题时，性能确实是一个重要的方面。使用神经网络来计算事物可能会成为复杂的计算，因为它涉及矩阵和向量。</p><p id="791f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">假设我们想计算一个乘以5的25 x 25的矩阵。第一次向您介绍编程时，您将会计算这样的向量或矩阵，</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="ce09" class="na kz jj mw b gy nb nc l nd ne">for i in range(25):<br/>    for j in range(25):<br/>        x[i][j] *= 5</span></pre><p id="03a4" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果我们使用这种方法，它将使我们的计算时间更长，我们将不会在我们期望的时间得到结果。谢天谢地，在Python中，我们有NumPy库来解决这个矩阵和向量计算。</p><p id="af08" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">通过使用NumPy库，我们可以将3行代码变成1行代码，如下所示，</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="a5ad" class="na kz jj mw b gy nb nc l nd ne">import numpy as np</span><span id="5807" class="na kz jj mw b gy nf nc l nd ne"><strong class="mw jk"># Make it as NumPy array first<br/></strong>x = np.array(x)</span><span id="2a9f" class="na kz jj mw b gy nf nc l nd ne">x = x * 5</span></pre><p id="3e79" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果我们比较时间，在这种情况下，传统方法大约需要0.000224，而NumPy方法只需要0.000076。NumPy比传统的快3倍，但同时也简化了你的代码！</p><p id="c16b" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">想象一下，当你想计算一个比这个例子更大的矩阵时，你会节省多少时间。这种计算被分类为矢量化，其中计算发生在矩阵或矢量表示上。因此，用这种计算方法，同样的结果会节省你的时间。</p><p id="d53d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这是怎么回事？NumPy有什么魔力让它可以更简单更快速的计算矩阵？本文将向您介绍单指令多数据(SIMD)和广播的概念。没有进一步的，让我们开始吧。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="44b9" class="ky kz jj bd la lb nn ld le lf no lh li kp np kq lk ks nq kt lm kv nr kw lo lp bi translated">单指令多数据(SIMD)</h1><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/bccf9e4121a66c96063be8af1bf28048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*SU8C5bXnPT-KNdZnh0adAg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来自我在<a class="ae jg" href="https://www.figma.com/file/a2u5vu9ub0TBsS9bpmU3Mv/Untitled?node-id=0%3A3" rel="noopener ugc nofollow" target="_blank"> Figma </a>上的设计</p></figure><p id="1acf" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">什么是单指令多数据(SIMD)？基本上，SIMD(读作“sim-dee”而不是用字母表拼写它)是一种并行计算方法，使计算机内部的数据可以由硬件同时(并发地)计算。</p><p id="3dc7" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">例如，我们有两个输入向量，我们想用算术方法计算每个元素的向量。硬件会，因此每个数据将被分配到硬件的不同组件(即，GPU核心)并同时计算两个向量的每个元素。正因为如此，向量可以计算得更快。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="c8dc" class="ky kz jj bd la lb nn ld le lf no lh li kp np kq lk ks nq kt lm kv nr kw lo lp bi translated">广播</h1><p id="d2e7" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">在NumPy中，当满足这些要求时，计算会起作用，它们是:</p><ol class=""><li id="6d63" class="nt nu jj ls b lt mm lw mn lz nv md nw mh nx ml ny nz oa ob bi translated">两个对象的尺寸相同，或者</li><li id="408e" class="nt nu jj ls b lt oc lw od lz oe md of mh og ml ny nz oa ob bi translated">其中一个维度的值为1</li></ol><p id="963a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果对象不符合上述要求，则不能计算。如果有一些对象满足第二个要求，那么该对象将被广播。</p><p id="0f48" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">广播基本上是用在形状不同的向量上。回想一下上面矩阵和标量元素(5)之间的计算，标量将被广播，因此标量将具有与矩阵相同的形状。例如，当你有了这些东西，</p><ul class=""><li id="0d42" class="nt nu jj ls b lt mm lw mn lz nv md nw mh nx ml oh nz oa ob bi translated">例2中的5×1个矢量[1 2 3 4 5]</li><li id="2d47" class="nt nu jj ls b lt oc lw od lz oe md of mh og ml oh nz oa ob bi translated">示例中的1 x 1标量为5</li></ul><p id="01c2" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">为了实现这一点，标量将具有与向量相同的形状，并且该值将在新向量中传播。所以我们可以得到[5 5 5 5 5]向量。有了这个矩阵，我们就可以利用SIMD原理，计算出要转换成矢量的矢量和标量。因此，结果将是如下所示的[5 10 15 20 25]，</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/f9d8bebc3d8f8e2f4f39a4cc3b9d8cab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*KJtXf8Npptda_FfmUxKeIA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来自我在<a class="ae jg" href="https://www.figma.com/file/a2u5vu9ub0TBsS9bpmU3Mv/Untitled?node-id=0%3A3" rel="noopener ugc nofollow" target="_blank"> Figma </a>上的设计</p></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="cf25" class="ky kz jj bd la lb nn ld le lf no lh li kp np kq lk ks nq kt lm kv nr kw lo lp bi translated">结论</h1><p id="7d2c" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">总之，机器学习的计算没有从向量和矩阵中分离出来。如果你想从头开发一些机器学习模型，特别是在矢量化部分，理解线性代数将是有用的。通过这样做，由于SIMD和广播的概念，我们可以使我们的计算更加有效和简单。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="e217" class="na kz jj bd la oi oj dn le ok ol dp li lz om on lk md oo op lm mh oq or lo os bi translated">参考</h2><p id="c258" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">[1]若昂M.P卡多佐，何塞·加布里埃尔·f·库蒂尼奥和佩德罗·c·迪尼茨，<a class="ae jg" href="https://www.sciencedirect.com/book/9780128041895/embedded-computing-for-high-performance#book-info" rel="noopener ugc nofollow" target="_blank">面向高性能的嵌入式计算(2017) </a>，爱思唯尔公司<br/>【2】斯特芬·范德沃特，s·克里斯·科尔伯特和加尔·瓦洛夸。<a class="ae jg" href="http://dx.doi.org/10.1109/MCSE.2011.37" rel="noopener ugc nofollow" target="_blank">NumPy数组:高效数值计算的结构</a> (2011)，《科学计算&amp;工程》，第13卷，第2期，第22–30页。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="e084" class="na kz jj bd la oi oj dn le ok ol dp li lz om on lk md oo op lm mh oq or lo os bi translated">感谢您阅读我的文章，您也可以在下面查看我以前的文章:</h2><div class="is it gp gr iu ot"><a rel="noopener follow" target="_blank" href="/introduction-to-time-series-analysis-with-r-a2f97650baa3"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jk gy z fp oy fr fs oz fu fw ji bi translated">R时间序列分析导论</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">从探索，到预测。使用印度尼西亚2002年12月至2020年4月的消费者价格指数(CPI)数据</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ja ot"/></div></div></a></div><div class="is it gp gr iu ot"><a rel="noopener follow" target="_blank" href="/do-this-additional-step-you-have-made-a-generalize-machine-learning-model-9d85b7e09313"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jk gy z fp oy fr fs oz fu fw ji bi translated">做这个额外的步骤，你就做了一个一般化的机器学习模型</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">只是一个额外的步骤，它可以增加我们对预测未知数据的模型的信心。</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pi l pe pf pg pc ph ja ot"/></div></div></a></div><div class="is it gp gr iu ot"><a rel="noopener follow" target="_blank" href="/greater-accuracy-does-not-mean-greater-machine-learning-model-performance-771222345e61"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jk gy z fp oy fr fs oz fu fw ji bi translated">更高的准确性并不意味着更好的机器学习模型性能</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">我们可以定量地衡量机器学习模型的性能，但不仅仅是准确性，还有很多…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">towardsdatascience.com</p></div></div><div class="pc l"><div class="pj l pe pf pg pc ph ja ot"/></div></div></a></div></div></div>    
</body>
</html>