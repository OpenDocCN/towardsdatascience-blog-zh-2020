<html>
<head>
<title>How To Open-Source Your First Python Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何开源你的第一个 Python 包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-open-source-your-first-python-package-e717444e1da0?source=collection_archive---------16-----------------------#2020-08-29">https://towardsdatascience.com/how-to-open-source-your-first-python-package-e717444e1da0?source=collection_archive---------16-----------------------#2020-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8107" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python 打包的初学者友好分步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bc4697827f678e83790dd8dfde99f22a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8Qj0Vm9LWqgni92h"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">开源软件的世界很棒！照片由<a class="ae kv" href="https://unsplash.com/@clarktibbs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克拉克·蒂布斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="6b32" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">为什么是 Python 包？</h1><p id="ad39" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Python 是一种直观的通用语言，具有易于理解的语法。它使得原型开发、web 开发、数据科学等等比其他任何编程语言都要简单得多。这要归功于它庞大的支持性社区和众多的软件库。</p><p id="4a7f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你有没有发现自己在不同的项目中多次编写相同的代码行？或者，您可能已经编写了一些有用的库，希望其他人也能使用？或者，你只是对<a class="ae kv" href="https://packaging.python.org/" rel="noopener ugc nofollow" target="_blank"> Python 打包</a>或者对 Python 社区有贡献感兴趣？</p><p id="f458" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本文中，我们将创建一个小的包，然后将其上传到<a class="ae kv" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> Python 包索引(PyPi) </a>，这样任何人都可以使用<code class="fe mp mq mr ms b">pip install</code>下载并使用您的代码作为软件库。</p><p id="88db" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当我用 Python 构建我的第一个包时，我发现这个过程有些乏味。这促使我写了这篇文章，这篇文章将带你了解如何构建一个 Python 包的基础知识，并与世界其他地方分享。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="a7fb" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">要求</h1><p id="b808" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你有一个 GitHub 帐户并且安装了 Python，你可以跳到项目概述。</p><h2 id="a928" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">Git 储存库</h2><p id="ee96" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">要成为开源社区的一员，您必须在版本控制托管服务上公开托管一个项目。最常见的选择是使用 Git 存储库主机，它保存项目的虚拟存储。它允许您协调程序员之间的工作，并保存您的代码版本，您可以在需要时访问这些版本。使用最多的托管服务是<a class="ae kv" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>。如果您还没有帐户，第一步是在这里创建一个权限<a class="ae kv" href="https://github.com/join" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="94dc" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">计算机编程语言</h2><p id="f924" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将使用 Python 3。Python 3.5 的任何版本都可以用于该项目。如果你没有 Python，可以从 python.org 的<a class="ae kv" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">下载页面</a>下载。我将在 Windows 上使用 Python 3.7，但这个项目使用什么版本或操作系统并不重要。如果你是 Python 的新手，我可以建议你做一些<a class="ae kv" href="https://www.learnpython.org/en/Hello%2C_World%21" rel="noopener ugc nofollow" target="_blank">教程</a>的练习。</p><h2 id="ee2c" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">集成驱动电子设备</h2><p id="5608" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">集成开发环境(IDE)是一个源代码编辑器，为您提供调试和自动化工具。只要你喜欢，用什么代码编辑器或者 IDE 都没关系。我将亲自使用一个叫做<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Code </a>的轻便而强大的代码编辑器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/f8ce9359563a8d39556b5e53db11209c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ocFhgR6Gi3oShgO-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">准备深潜！由<a class="ae kv" href="https://unsplash.com/@max_duz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="b4c2" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">项目概述</h1><p id="5758" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在让我们构建一个简单的处理质数<a class="ae kv" href="https://en.wikipedia.org/wiki/Prime_number" rel="noopener ugc nofollow" target="_blank">的包。如果您已经有了一些代码想要使用，在将您的代码组织成与项目相似之后，可以随意跳过这一部分。</a></p><p id="37db" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">你要做的第一件事是为你的库取一个合适的名字。因为我们的图书馆处理质数，所以我选了<code class="fe mp mq mr ms b">primelib</code>。</p><p id="cbc7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">下面是项目结构的样子。你可以和我一起创建文件，或者直接下载 GitHub 上的整个<a class="ae kv" href="https://github.com/clement-bonnet/medium-first-package" rel="noopener ugc nofollow" target="_blank">库。</a></p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="c67b" class="nf kx iq ms b gy nw nx l ny nz">primelib/<br/>    primelib/<br/>        __init__.py<br/>        prime_numbers.py<br/>    tests/<br/>        test_prime.py<br/>    .gitignore<br/>    LICENSE<br/>    README.md<br/>    setup.py</span></pre><p id="66a9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这可能看起来像很多文件，但不要担心，我们将一个接一个地制作和解释它们。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="4267" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">逐步构建项目</h1><h2 id="83b6" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">启动并克隆 GitHub 存储库</h2><p id="90a2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">首先要做的是在 GitHub 中启动一个存储库。登录 GitHub，点击绿色的“<em class="oa">新建</em>”<em class="oa"/>按钮。您应该会看到一个标题为“<em class="oa">创建新存储库</em>”的页面。选择自述文件 Python 时，请填写下面的空白处。gitignore 文件和 MIT 许可证。当你准备好了，点击<em class="oa">创建库</em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/51dd990d3f1861cbfbd3b35f722af1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaH0prVaYYOJKwLsNVw-8g.png"/></div></div></figure><p id="44eb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">一旦在 GitHub 上创建了存储库，就必须在本地计算机上克隆它。为此，你应该在你的机器上安装 Git 和终端。在 Windows 中，我推荐使用新的<a class="ae kv" href="https://www.microsoft.com/en-us/p/windows-terminal/9n0dx20hk701?activetab=pivot:overviewtab" rel="noopener ugc nofollow" target="_blank"> Windows 终端</a>,尽管你肯定可以使用命令提示符。打开一个终端，通过运行<code class="fe mp mq mr ms b">git --version</code>确保 git 安装正确。然后使用<code class="fe mp mq mr ms b">cd</code>将你的项目存储到你想存储的地方。终于可以跑<code class="fe mp mq mr ms b">git clone https://github.com/YOUR-USERNAME/primelib.git</code>了。点击绿色的“<em class="oa">代码</em>”按钮时提供链接。</p><p id="3de6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在，您应该已经将项目复制到您的计算机上了。在您喜欢的代码编辑器中随意打开<code class="fe mp mq mr ms b">primelib</code>文件夹。您应该具有以下结构。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="626c" class="nf kx iq ms b gy nw nx l ny nz">.gitignore<br/>LICENSE<br/>README.md</span></pre><ul class=""><li id="a52a" class="oc od iq lq b lr mk lu ml lx oe mb of mf og mj oh oi oj ok bi translated">的。gitignore file 使您能够在跟踪和上传代码到存储库时忽略一些文件。</li><li id="205e" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">许可证文件只是一个包含项目许可证的. txt 文件。您可以在这里找到您的需求<a class="ae kv" href="https://choosealicense.com/" rel="noopener ugc nofollow" target="_blank"/>，尽管 MIT 许可证对于几个项目来说是一个很好的默认选择。</li><li id="de2f" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">README.md 文件是一个包含项目描述的 Markdown 格式文件。您可以为您的库将提供的模块和函数编写文档。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/dbfdccd12000eeb31e5e586a72dba347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lagy8Ivnt9QygGov"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">我们都爱 Python。克里斯·里德在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><h2 id="acb3" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">Python 代码</h2><p id="0eca" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在<code class="fe mp mq mr ms b">primelib/</code>文件夹中，你现在可以添加一个名为<code class="fe mp mq mr ms b">primelib</code>的新文件夹，它将包含你所有的代码。在这个新文件夹中，创建两个名为<code class="fe mp mq mr ms b">prime_numbers.py</code>和<code class="fe mp mq mr ms b">__init__.py</code>的 Python 文件(带有两个前导下划线和两个尾随下划线)。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="ebc5" class="nf kx iq ms b gy nw nx l ny nz">primelib/<br/>    __init__.py<br/>    prime_numbers.py<br/>.gitignore<br/>LICENSE<br/>README.md</span></pre><p id="b586" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我们从包含我们将使用的 Python 代码的<code class="fe mp mq mr ms b">prime_numbers.py</code>开始。您可以将这段代码复制并粘贴到您的<code class="fe mp mq mr ms b">prime_numbers.py</code>文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="74af" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">Python 代码包含两个函数:</p><ul class=""><li id="75e4" class="oc od iq lq b lr mk lu ml lx oe mb of mf og mj oh oi oj ok bi translated"><code class="fe mp mq mr ms b">_divides</code>是私有函数，因此以前导下划线开头。它被下一个函数<code class="fe mp mq mr ms b">is_prime</code>使用，当且仅当<code class="fe mp mq mr ms b">div</code>除以<code class="fe mp mq mr ms b">n</code>时返回<code class="fe mp mq mr ms b">True</code>。</li><li id="ec47" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated"><code class="fe mp mq mr ms b">is_prime</code>检查一个数<code class="fe mp mq mr ms b">n</code>是否有一个不同于 1 和它自身的除数，如果有，它返回<code class="fe mp mq mr ms b">True</code>。</li></ul><p id="8cb3" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><code class="fe mp mq mr ms b">__init__.py</code>文件是将 primelib 转换成一个包所必需的。它将是您的 Python 解释器在运行<code class="fe mp mq mr ms b">import primelib</code>或<code class="fe mp mq mr ms b">from primelib import ...</code>时执行的文件。要使用命令<code class="fe mp mq mr ms b">primelib.is_prime(n)</code>从库中直接访问函数<code class="fe mp mq mr ms b">is_prime</code>，必须在<code class="fe mp mq mr ms b">__init__.py</code>文件中写入以下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><h2 id="6fff" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">试验</h2><p id="739a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">好了，现在是时候创建一些测试来确保我们的函数按预期工作了。现在，您可以在项目目录中创建一个<code class="fe mp mq mr ms b">tests</code>文件夹，并在其中添加一个<code class="fe mp mq mr ms b">test_prime.py</code>文件。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="2cf6" class="nf kx iq ms b gy nw nx l ny nz">primelib/<br/>    __init__.py<br/>    prime_numbers.py<br/>tests/<br/>    test_prime.py<br/>.gitignore<br/>LICENSE<br/>README.md</span></pre><p id="170c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您可以简单地复制以下测试。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="e64d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后就可以用 Python 标准库的一部分<a class="ae kv" href="https://docs.pytest.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> <em class="oa"> Pytest </em>库</a>了，所以 Python 自带的，不用安装。Pytest 会自动检查你在任何<code class="fe mp mq mr ms b">test_*.py</code>文件中的断言语句。在您的终端中，您可以运行以下命令。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="f35e" class="nf kx iq ms b gy nw nx l ny nz">python -m pytest</span></pre><p id="9fb2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在您应该看到您的两个测试成功通过了。这意味着您已经准备好构建包并与社区共享您的库。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/ebce93ed41a8eb4ac2c1014c25f571cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YbGaNN08N3b9HgIO"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">是时候建造你的图书馆了。照片由<a class="ae kv" href="https://unsplash.com/@mattartz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马特·阿特兹</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="acf5" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">建造图书馆</h2><p id="9a5c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们将使用三个库<code class="fe mp mq mr ms b">setuptools</code>、<code class="fe mp mq mr ms b">wheel</code>和<code class="fe mp mq mr ms b">twine</code>。确保它们在您的环境中可用。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="c7bd" class="nf kx iq ms b gy nw nx l ny nz">pip install --upgrade setuptools wheel twine</span></pre><p id="ab6a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">构建包需要最后一个文件。您必须在目录的根目录下添加一个<code class="fe mp mq mr ms b">setup.py</code>文件。这告诉<code class="fe mp mq mr ms b">setuptools</code>如何实际构建这个包。让我们添加最后一个文件来获得最终的树结构。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="3922" class="nf kx iq ms b gy nw nx l ny nz">primelib/<br/>    primelib/<br/>        __init__.py<br/>        prime_numbers.py<br/>    tests/<br/>        test_prime.py<br/>    .gitignore<br/>    LICENSE<br/>    README.md<br/>    setup.py</span></pre><p id="d1f4" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里是<code class="fe mp mq mr ms b">setup.py</code>文件。您可以复制并粘贴它，同时用您的名字替换您的-USERNAME 以使库名唯一。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="bd8d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">三个强制参数是<em class="oa">名称</em>、<em class="oa">版本</em>和<em class="oa">包</em>。您现在可以用下面的代码构建这个库。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="2edf" class="nf kx iq ms b gy nw nx l ny nz">python setup.py sdist bdist_wheel</span></pre><p id="52b6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这将在<code class="fe mp mq mr ms b">dist/</code>目录中生成分发档案。现在你可以在你的本地环境中安装这个库，执行<code class="fe mp mq mr ms b">python setup.py install</code>。可以尝试在 Python shell 中导入<code class="fe mp mq mr ms b">primelib</code>。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="47f9" class="nf kx iq ms b gy nw nx l ny nz">python<br/>&gt;&gt;&gt; import primelib<br/>&gt;&gt;&gt; primelib.is_prime(13)<br/>True</span></pre></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="d2a4" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">上传到 PyPi</h1><p id="cc8d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在您有了一个工作库，您可以将它上传到 Python 包索引(PyPi)上，以便与 Python 社区共享。出于本教程的目的，我们将使用<a class="ae kv" href="http://test.pypi.org" rel="noopener ugc nofollow" target="_blank"> <em class="oa"> TestPyPi </em> </a>，它的工作方式与<em class="oa"> PyPi </em>完全一样，但它是为测试包而设计的，以便尽可能保持真实服务器的干净。</p><p id="8920" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">首先你必须在<em class="oa"> TestPypi </em>上<a class="ae kv" href="https://test.pypi.org/account/register/" rel="noopener ugc nofollow" target="_blank">注册一个账户</a>并验证你的电子邮件。最后，您可以使用下面的代码将您的包作为归档文件上传。</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="8e10" class="nf kx iq ms b gy nw nx l ny nz">python -m twine upload <strong class="ms ir">--</strong>repository<strong class="ms ir">-</strong>url https:<strong class="ms ir">//</strong>test<strong class="ms ir">.</strong>pypi<strong class="ms ir">.</strong>org<strong class="ms ir">/</strong>legacy<strong class="ms ir">/</strong> dist<strong class="ms ir">/*</strong></span></pre><p id="f4a0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">就这么定了！您的包现在可供社区使用。如果它被上传到<em class="oa"> PyPi </em>上，你可以直接用<code class="fe mp mq mr ms b">pip install primelib</code>安装包，但是因为它现在在<em class="oa"> TestPyPi </em>上，你可以用下面的代码安装包:</p><pre class="kg kh ki kj gt ns ms nt nu aw nv bi"><span id="5fc4" class="nf kx iq ms b gy nw nx l ny nz">pip install <strong class="ms ir">--</strong>index<strong class="ms ir">-</strong>url https:<strong class="ms ir">//</strong>test<strong class="ms ir">.</strong>pypi<strong class="ms ir">.</strong>org<strong class="ms ir">/</strong>simple<strong class="ms ir">/</strong> primelib-YOUR-USERNAME</span></pre><p id="7a02" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你遇到任何关于打包的问题，请参考<a class="ae kv" href="https://packaging.python.org/tutorials/packaging-projects/#generating-distribution-archives" rel="noopener ugc nofollow" target="_blank"> Python 打包教程</a>。</p><p id="77ee" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您的库现在可以在 Python 环境中使用了。我强烈推荐使用<code class="fe mp mq mr ms b">virtualenv</code>来管理不同的环境。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><h1 id="46ce" class="kw kx iq bd ky kz na lb lc ld nb lf lg jw nc jx li jz nd ka lk kc ne kd lm ln bi translated">结论</h1><p id="e737" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">恭喜你。你已经学会了如何创建一个 Python 包来包装你的一些代码，然后如何与社区共享你的库，这样任何人都可以使用你的作品。</p><p id="03c2" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我希望您现在已经准备好为 Python 社区做出贡献，并与世界其他地方分享您的伟大代码！</p><p id="0bd6" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">如果你有兴趣继续深入，我推荐这些重要但更高级的主题:</p><ul class=""><li id="46bb" class="oc od iq lq b lr mk lu ml lx oe mb of mf og mj oh oi oj ok bi translated">使用虚拟环境</li><li id="097e" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">使用持续集成工具(<a class="ae kv" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> Travis CI </a>)</li><li id="d70a" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">版本管理工具(<a class="ae kv" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank"> SemVer </a>)</li><li id="a869" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">自动测试氮氧化物(<a class="ae kv" href="https://nox.thea.codes/en/stable/" rel="noopener ugc nofollow" target="_blank">氮氧化物</a>)</li><li id="560b" class="oc od iq lq b lr ol lu om lx on mb oo mf op mj oh oi oj ok bi translated">自动化 HTML 文档(<a class="ae kv" href="https://www.sphinx-doc.org/en/master/" rel="noopener ugc nofollow" target="_blank"> Sphinx </a>)</li></ul></div></div>    
</body>
</html>