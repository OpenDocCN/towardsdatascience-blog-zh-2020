<html>
<head>
<title>Importing Data to Google Colab — the CLEAN Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将数据导入 Google Colab——干净利落的方式</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/importing-data-to-google-colab-the-clean-way-5ceef9e9e3c8?source=collection_archive---------0-----------------------#2020-02-09">https://towardsdatascience.com/importing-data-to-google-colab-the-clean-way-5ceef9e9e3c8?source=collection_archive---------0-----------------------#2020-02-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3797" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">因为干净的代码很重要！</h2></div><p id="3707" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">在这篇文章中，我将介绍:</strong></p><ul class=""><li id="af79" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated"><strong class="kk iu">Google Colab 简介</strong></li><li id="3618" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="kk iu"> 2 种常用的“快速而肮脏”的方法将数据上传到 Colab </strong></li><li id="d129" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="kk iu"> 2 种自动化的“干净”方法将数据上传到 Colab </strong></li></ul><h1 id="fbf4" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">Google Colab 是什么？</h1><p id="95da" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">现在还很难相信，但这是真的。我们可以在 Google Colab 上免费运行重型数据科学笔记本<strong class="kk iu"/>。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/5431a94491d684babf2ad8db4c0c4b12.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*zNcjWYiZcJgreZAs.png"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">Google Colabs</p></figure><p id="b6e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Colab 是一项云服务，这意味着谷歌的服务器将运行笔记本电脑，而不是你自己的本地电脑。</p><p id="f9e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也许更令人惊讶的是，<strong class="kk iu"/><strong class="kk iu">它背后的硬件</strong>相当不错！</p><h1 id="320c" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">Colab 是完美的新笔记本解决方案吗？</h1><p id="ca3b" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">Google Colab 有一个大问题，以前经常讨论，那就是你数据的存储。笔记本电脑，例如 Jupyter 笔记本电脑，通常使用存储在本地计算机上的数据文件。这通常使用简单的 read_csv 语句或类似语句来完成。</p><blockquote class="nb"><p id="d21e" class="nc nd it bd ne nf ng nh ni nj nk ld dk translated">云的本地不是你的本地。</p></blockquote><p id="5ddd" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">但是谷歌合作实验室正在云中运行。云的本地不是你的本地。因此 read_csv 语句将在 Google 端搜索文件，而不是在您端。然后它就找不到了。</p><h1 id="7ecd" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">如何将您的数据输入 Colab——手动方式？</h1><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nq"><img src="../Images/5d27796024a929e01d63bab0b1c1254d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*apG2zMT-vvrb2iYU"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">乌云因为手动上传不是最好的做法！由<a class="ae nv" href="https://unsplash.com/@lobostudiohamburg?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> LoboStudio Hamburg </a>在<a class="ae nv" href="https://unsplash.com/s/photos/dark-cloud?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="c42a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了将您的数据输入到您的 Colab 笔记本中，我首先讨论两种最常见的方法，以及它们的优缺点。之后，我讨论了两个备选解决方案，它们可能更合适，尤其是当您的代码必须易于工业化时。</p><h2 id="d32e" class="nw lt it bd lu nx ny dn ly nz oa dp mc kr ob oc me kv od oe mg kz of og mi oh bi translated">手动方法 1 —使用 files.upload()将数据上传到 Colab</h2><ol class=""><li id="851f" class="le lf it kk b kl mk ko ml kr oi kv oj kz ok ld ol lk ll lm bi translated">直接在 Colab 笔记本中使用<strong class="kk iu"> files.upload() </strong>会给你一个传统的上传按钮，允许你将文件从你的计算机移动到 Colab 环境中。</li></ol><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi om"><img src="../Images/4a52927af150eb89bb94c4ea40c80ffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*SKFQV5IRBKxsjst2UdfdKQ.png"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">直接在 Colab 笔记本中使用 files.upload()会给您一个传统的上传按钮，允许您将文件移动到 Colab 环境中</p></figure><p id="faad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.然后你用木卫一。StringIO()和 pd.read_csv 一起将上传的文件读入数据帧</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi on"><img src="../Images/01251d6ef8d508b130f342f60ccf3ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dr2NgdHwEv6Hu0SxW6ORNw.png"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">然后你用木卫一。StringIO 与 pd.read_csv 一起将上传的文件读入数据帧</p></figure><p id="2081" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">使用 files.upload()将数据上传到 Colab 的优势:<br/> </strong>这是所有方法中最简单的方法，尽管它需要几行代码。</p><p id="1171" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">使用 files.upload()上传数据到 Colab 的缺点:<br/> </strong>对于大文件，上传可能需要一段时间。然后每当笔记本电脑重新启动时(例如，如果它失败或其他原因…)，必须手动<strong class="kk iu">重新上传。</strong>这不是最好的解决方案，因为首先我们的代码在重启时不会自动重新执行，其次在笔记本出现故障的情况下<strong class="kk iu">需要繁琐的手动操作</strong>。</p><h2 id="a595" class="nw lt it bd lu nx ny dn ly nz oa dp mc kr ob oc me kv od oe mg kz of og mi oh bi translated">手动方法 2——将 Google Drive 安装到 Colab 上</h2><p id="8691" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">在开始使用笔记本电脑之前，请将您的数据上传到 Google Drive。然后将 Google Drive 安装到 Colab 环境中:这意味着 Colab 笔记本现在可以访问 Google Drive 中的文件。</p><ol class=""><li id="8cb0" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld ol lk ll lm bi translated">使用 drive.mount()挂载您的驱动器</li></ol><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/43308e6624f94b3c4fc7fc46c502aa46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*q288yiyvmBD0jTuuZ9WW8g.png"/></div></figure><p id="b66d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.直接访问 Google Drive 中的任何内容</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi op"><img src="../Images/692807c3f628f8104abf440b14cf06f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*VN63LKulzooWnxfvmU5MHg.png"/></div></figure><p id="9890" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">把你的 Google Drive 挂载到 Colab 上的优势:<br/> </strong>这也是相当容易的。Google Drive 非常用户友好，对大多数人来说，将你的数据上传到 Google Drive 没有问题。此外，上传完成后，重启笔记本时不需要手动重新加载。所以比方法 1 好。</p><p id="e06e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">将你的 Google Drive 挂载到 Colab 上的缺点:<br/> </strong>我从这种方法中看到的主要缺点主要是公司/工业使用。只要您在从事相对较小的项目，这种方法就很棒。但是如果<strong class="kk iu">访问管理和安全</strong>处于危险之中，你会发现这种方法<strong class="kk iu">很难产业化。</strong></p><p id="0aca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，您可能不希望处于 100%谷歌的环境中，因为多云解决方案让您更加独立于不同的云供应商。</p><h1 id="f8aa" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">干净利落的方式—使用外部数据存储</h1><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nq"><img src="../Images/7ff65f2017aa301b1573ed41716d7296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4GWvEd1MFlfi0VXf"/></div></div><p class="mx my gj gh gi mz na bd b be z dk translated">干净的数据存储是最佳实践！Em bé khóc nhè 在<a class="ae nv" href="https://unsplash.com/s/photos/light--cloud?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9d81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您的项目很小，并且您知道它将永远只是一个笔记本，那么以前的方法是可以接受的。但是对于任何未来可能会变得更大的项目，将数据存储从您的笔记本电脑中分离出来是朝着更好的架构迈出的良好一步。</p><p id="9043" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想在你的 Google Colab 笔记本上建立一个更干净的数据存储架构，尝试一个合适的数据存储解决方案。</p><p id="bace" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python 中有许多与数据存储连接的可能性。我在这里提出两个解决方案:<strong class="kk iu"> AWS S3 用于文件存储</strong>和<strong class="kk iu"> SQL 用于关系数据库存储</strong>:</p><h2 id="8114" class="nw lt it bd lu nx ny dn ly nz oa dp mc kr ob oc me kv od oe mg kz of og mi oh bi translated">清洁方法 1 —连接一个 AWS S3 桶</h2><p id="4783" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">S3 是 AWS 的文件存储，其优势在于与之前描述的向 Google Colab 输入数据的方式非常相似。如果你不熟悉 AWS S3，<a class="ae nv" rel="noopener" target="_blank" href="/how-to-publish-a-jupyter-notebook-online-using-aws-in-10-minutes-7f87f2b0cc50">不要犹豫，看看这里</a>。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/c8f01cbaef7fc3440cfd4d2e200ca1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/0*UPIdADcwZ4WhDSc-.png"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">亚马逊 S3 是 AWS 简单存储服务——一种易于使用的云中文件存储</p></figure><p id="b4fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从 Python 访问 S3 文件存储是非常干净的代码，并且非常高效。添加认证是可能的。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b7be136cb5bec9e0d4ae9e408e396127.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*umZ_Q73vdjREx1y-wD1CGw.png"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">Pandas 允许使用 s3fs 直接从 s3 读取数据</p></figure><p id="dd0e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">配合 Colab 使用 S3 的优势:</strong> <br/> S3 作为一种数据存储解决方案受到软件社区的重视，而 Google Drive 虽然更受个人用户的青睐，但被许多开发者青睐只是为了与其他 Google 服务的集成。</p><p id="20e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">因此，这种方法改善了你的代码和架构！</strong></p><p id="9e3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">将 S3 与 Colab 一起使用的缺点:<br/> </strong>要应用这种方法，您将需要使用 AWS。这很容易，但在某些情况下(如公司政策)，这可能仍然是一个缺点。此外，每次加载数据都需要时间。这可能比从 Google Drive 加载要长，因为数据源是独立的。</p><h2 id="6062" class="nw lt it bd lu nx ny dn ly nz oa dp mc kr ob oc me kv od oe mg kz of og mi oh bi translated">清理方法 2 —将 SQL 数据库连接到 Colab</h2><p id="bf98" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">如果您的数据已经存在于 MySQL 或其他关系数据库中，那么将您的 Colab 笔记本直接插入数据库也是一个不错的解决方案。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi os"><img src="../Images/10b290ce506f4062133f2370ad0bee88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XrJ7EDQ0R7zff4SV.png"/></div></div></figure><p id="4648" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SQLAlchemy 是一个包，它允许您将 SQL 查询发送到您的关系数据库，这将允许在这个单独的 SQL 环境中拥有组织良好的数据，同时仅将您的 Python 操作保存在您的 Colab 笔记本中。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/888810361b5f7609cb13c80f96d0a15e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*a3cBK5oCAe_OItn-A7QrYg.png"/></div></figure><p id="9336" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">将 SQL 数据库连接到 Colab 的优点:<br/> </strong>当您开始使用更重要的应用程序，并且希望在开发过程中已经有了良好的数据存储时，这是一个好主意。</p><p id="b3ad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">将 SQL 数据库连接到 Colab 的缺点:</strong> <br/>将关系型数据存储用于非结构化数据是不可能的，但是非关系型数据库可能是这种情况下的答案。在数据量非常大的情况下，更严重的问题可能是查询执行时间。管理数据库也是一种负担(如果您没有数据库或者如果您不能轻松地共享访问权限)。</p><h1 id="f75e" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">结论</h1><p id="79b7" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">谷歌 Colab 笔记本电脑很棒，但要将数据输入和输出可能是一场真正的斗争。</p><blockquote class="nb"><p id="4a28" class="nc nd it bd ne nf ng nh ni nj nk ld dk translated">谷歌 Colab 笔记本电脑很棒，但要将数据输入和输出可能是一场真正的斗争。</p></blockquote><p id="c1be" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">手动上传导入数据或者挂载 Google Drive 都是<strong class="kk iu">好用但是产业化难度大</strong>。像 AWS S3 或关系数据库这样的选择会让你的系统更少手工操作，因此更好。</p><p id="3010" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2 个<strong class="kk iu">手动方法非常适合小型短期项目</strong>，当项目需要一个干净的数据存储时，应该使用带有<strong class="kk iu">外部存储的两个方法。</strong></p><blockquote class="nb"><p id="3b0e" class="nc nd it bd ne nf ng nh ni nj nk ld dk translated"><strong class="ak">在为时已晚之前，仔细考虑你的架构！</strong></p></blockquote><p id="736d" class="pw-post-body-paragraph ki kj it kk b kl nl ju kn ko nm jx kq kr nn kt ku kv no kx ky kz np lb lc ld im bi translated">每种方法都有其优点和缺点，只有您才能决定哪种方法适合您的使用情况。无论您使用何种存储，但<strong class="kk iu">请务必在为时已晚之前全面考虑您的架构！</strong></p><p id="8471" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ou">我希望这篇文章能帮助你构建你的项目。敬请期待更多内容，感谢您的阅读！</em></p></div></div>    
</body>
</html>