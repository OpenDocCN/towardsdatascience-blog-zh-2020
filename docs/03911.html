<html>
<head>
<title>Are you still not using Version Control for Data?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你仍然没有对数据使用版本控制吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/are-you-still-not-using-version-control-for-data-d79a8b004c18?source=collection_archive---------24-----------------------#2020-04-11">https://towardsdatascience.com/are-you-still-not-using-version-control-for-data-d79a8b004c18?source=collection_archive---------24-----------------------#2020-04-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2bfb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">什么是数据的版本控制？该不该用？你可以去哪里试试？我做了调查所以你不用做了。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6e34b78901c6710adc22590492b0557c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O2POIP4ctNuer7aE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com/s/photos/backup?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="07cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">最近，在一次公司会议上，我的一个同事问道:我们对数据使用某种版本控制吗？我惊讶地看了他一眼。你是指代码的版本控制吗？我的同事坚持说，不要数据。我从来没有听说过或想过数据的版本控制，但它让我思考，所以我就这个主题做了一些研究。在帖子的最后，我也分享一下我的看法。</p><p id="9b51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">这里有几个你可能会感兴趣的链接:</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="36b0" class="mj mk it mf b gy ml mm l mn mo">- <a class="ae ky" href="https://www.humanfirst.ai/" rel="noopener ugc nofollow" target="_blank">Labeling and Data Engineering for Conversational AI and Analytics</a></span><span id="4cac" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/880006/11298" rel="noopener ugc nofollow" target="_blank">Data Science for Business Leaders</a> [Course]</span><span id="dff9" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/788201/11298" rel="noopener ugc nofollow" target="_blank">Intro to Machine Learning with PyTorch</a> [Course]</span><span id="2a1c" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae ky" href="https://imp.i115008.net/c/2402645/803127/11298" rel="noopener ugc nofollow" target="_blank">Become a Growth Product Manager</a> [Course]</span><span id="cf8c" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae ky" href="https://amzn.to/3ncTG7D" rel="noopener ugc nofollow" target="_blank">Deep Learning (Adaptive Computation and ML series)</a> [Ebook]</span><span id="c588" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae ky" href="https://aigents.co/skills" rel="noopener ugc nofollow" target="_blank">Free skill tests for Data Scientists &amp; Machine Learning Engineers</a></span></pre><p id="3897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mq">上面的一些链接是附属链接，如果你通过它们购买，我会赚取佣金。请记住，我链接课程是因为它们的质量，而不是因为我从你的购买中获得的佣金。</em></p><blockquote class="mr"><p id="7171" class="ms mt it bd mu mv mw mx my mz na lu dk translated">有没有产品提供数据的版本控制？有必要吗？让我们找出答案。</p></blockquote><p id="d498" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我在谷歌上输入任何改变游戏规则的产品想法，市场上已经有十个成熟的产品了——这是一个充满活力的时代。在谷歌上搜索数据的版本控制没有区别。引起我注意的产品是<a class="ae ky" href="https://www.dolthub.com/" rel="noopener ugc nofollow" target="_blank"> dolt </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0bafa77a1ec8a818290709d3660782f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/0*jPp0yc-_oF07XJ4h.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Gif 来自<a class="ae ky" href="https://giphy.com/gifs/earth-mindblown-kepler-Um3ljJl8jrnHy" rel="noopener ugc nofollow" target="_blank"> giphy </a></p></figure><h1 id="6653" class="nh mk it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">dolt 是什么？</h1><blockquote class="ny nz oa"><p id="31eb" class="kz la mq lb b lc ld ju le lf lg jx lh ob lj lk ll oc ln lo lp od lr ls lt lu im bi translated">Dolt 是 SQL 数据库中数据体验的真正 Git，为模式提供版本控制，为数据提供单元级控制，所有这些都针对协作进行了优化。使用 Dolt，您可以查看上次收到的数据与这次收到的数据之间的人类可读差异。在部署新数据之前，您可以很容易地看到意料之外的更新并解决问题。</p></blockquote><p id="b398" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作者说，它就像 Git，但不是数据。它是一个具有 Git 风格版本的开源 SQL 数据库。在从事数据科学项目时，我们自己对数据集进行版本化。很多时候我们不记得 v5 和 v6 有什么区别。当我们将代码提交到存储库时，Dolt 会存储提交日志，这样更容易返回并查看更改。</p><h2 id="9f0c" class="mj mk it bd ni oe of dn nm og oh dp nq li oi oj ns lm ok ol nu lq om on nw oo bi translated">存储库托管在哪里？</h2><p id="e8a8" class="pw-post-body-paragraph kz la it lb b lc op ju le lf oq jx lh li or lk ll lm os lo lp lq ot ls lt lu im bi translated">就像 Github 之于 Git，DoltHub 之于 Dolt。<strong class="lb iu"> DoltHub 只对在 DoltHub 上公开的数据集免费。</strong>价格为每月 50 美元，用于托管私人存储库。</p><h2 id="9144" class="mj mk it bd ni oe of dn nm og oh dp nq li oi oj ns lm ok ol nu lq om on nw oo bi translated">数据的版本控制有哪些用例？</h2><p id="cdc4" class="pw-post-body-paragraph kz la it lb b lc op ju le lf oq jx lh li or lk ll lm os lo lp lq ot ls lt lu im bi translated">这是一个百万美元的问题，我一直在问自己。作者声称，指导性用例是在互联网上共享数据。Dolt 允许您共享数据库，包括模式和视图，允许您删除所有用于传输数据的代码。</p><blockquote class="ny nz oa"><p id="1908" class="kz la mq lb b lc ld ju le lf lg jx lh ob lj lk ll oc ln lo lp od lr ls lt lu im bi translated">DoltHub 允许你“先试后买”数据。您可以在 web 上运行 SQL 查询来查看数据是否符合您的需求。数据提供者甚至可以构建示例查询来指导消费者的探索。通过提交日志，您可以看到数据更新的频率。您可以看到谁更改了数据以及更改的原因。</p></blockquote><h1 id="fab8" class="nh mk it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">怎么才能试试？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/ea01006407ac593dbeedff088e988212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X3D30nrsarph610HL9Zh3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.dolthub.com/" rel="noopener ugc nofollow" target="_blank">https://www.dolthub.com/</a></p></figure><p id="d2a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">DoltHub 对公共数据集是免费的。您可以使用 Google 帐户登录。我创建了一个新的公共存储库，名为 iris(数据科学家知道我所说的数据集)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/60b18154ffbd4ebf189acde1c18246d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-jmam7cF8w8RyVHcZu4cg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">带虹膜数据集的 Dolthub</p></figure><p id="1e4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以像 wit Git 一样克隆存储库——这一切感觉如此熟悉。但是，在克隆 repo 之前，您需要安装 dolt CLI。开发人员考虑到这一点，所以他们将 install 命令放在 clone 旁边。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="dc38" class="mj mk it mf b gy ml mm l mn mo">sudo curl -L https://github.com/liquidat</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/e73ef92805e24db2ee35f2c2a28a4c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wmfet0IL1Ht6zKNHPgXFA.png"/></div></div></figure><p id="0afd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装 dolt 后，您需要使用 CLI 工具登录，将密钥与您的帐户相关联。这将在 web 浏览器中打开页面。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="f5ef" class="mj mk it mf b gy ml mm l mn mo">dolt login</span></pre><p id="19c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以克隆存储库了。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="cece" class="mj mk it mf b gy ml mm l mn mo">dolt clone romanorac/iris</span></pre><p id="9ab2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们放一些数据进去。我从 sklearn 上获取了虹膜数据集，将其转换为 pandas DataFrame 并保存为 CSV 格式。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="ec8c" class="mj mk it mf b gy ml mm l mn mo">import numpy as np<br/>import pandas as pd<br/>from sklearn import datasets</span><span id="4c4d" class="mj mk it mf b gy mp mm l mn mo">iris = datasets.load_iris()<br/>df = pd.DataFrame(data=np.c_[iris['data'], iris['target']],<br/>                  columns=iris['feature_names'] + ['target'])<br/>df.target = df.target.astype(int)<br/>df = df.reset_index()</span><span id="b208" class="mj mk it mf b gy mp mm l mn mo">df = df.rename(<br/>    columns={<br/>        'index': 'identifier',<br/>        'sepal length (cm)': 'sepal_length',<br/>        'sepal width (cm)': 'sepal_width',<br/>        'petal length (cm)': 'petal_length',<br/>        'petal width (cm)': 'petal_width'<br/>    })<br/>df.to_csv('~/Downloads/iris/iris.csv', index=False)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/3890a61c64a87c856ee318be8bcabf40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lxOhUFcdHodWP2J2E5tU1g.png"/></div></div></figure><p id="1423" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将 CSV 文件放入 Dolt，您需要创建 SQL 表。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="598b" class="mj mk it mf b gy ml mm l mn mo">dolt sql -q "create table iris ( identifier int, sepal_length float, sepal_width float,petal_length float ,petal_width float, target int, primary key (identifier) )"</span></pre><p id="9723" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您只需导入该表。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="4a27" class="mj mk it mf b gy ml mm l mn mo">dolt table import -u -pk=identifier iris iris.csv</span></pre><p id="f6c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">导入表后，您需要添加文件，编写提交消息并将其推送到存储库——就像使用 Git 一样。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="7354" class="mj mk it mf b gy ml mm l mn mo">git add .<br/>dolt commit -m "Initial commit"<br/>dolt remote add origin romanorac/iris<br/>dolt push origin master</span></pre><p id="8f27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看数据在 DoltHub 中的样子。我们看到了熟悉的虹膜数据集。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/d5f198a9cbd301729a50c4129d17af54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqp9arI9hh91hJwJ-spRUg.png"/></div></div></figure><p id="cf3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们改变一个虹膜样本，看看不同的行动。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="4fad" class="mj mk it mf b gy ml mm l mn mo">dolt sql --query 'UPDATE iris SET target=0 where identifier = 100'</span><span id="000c" class="mj mk it mf b gy mp mm l mn mo">git add .<br/>dolt commit -m "Change sample 100"<br/>dolt push origin master</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/ddba9639bebea1d72d49965490b4b2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYk8IjxM55N7crZiiForAQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们换了 100 排的班级。DoltHub 很好地将它可视化。</p></figure><h1 id="967f" class="nh mk it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">我的看法</h1><p id="d4b5" class="pw-post-body-paragraph kz la it lb b lc op ju le lf oq jx lh li or lk ll lm os lo lp lq ot ls lt lu im bi translated">作为一名数据科学家，我知道管理多个版本的数据集可能会很麻烦。尤其是对于已经在生产中的模型和多个数据科学家正在研究的模型。在这里我看到了 Dolt 的潜力。diff 功能看起来对较小的数据集很有用，但我不确定它对较大的数据集有什么帮助，因为在较大的数据集里，每一行都是变化的。我还必须用更大的数据集(几千兆字节的数据)对 Dolt 进行压力测试。它会随着时间变慢吗？</p><p id="ee34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我认为 Dolt 和 DoltHub 的真实用例是共享数据。出售数据的公司可以记录每一个变化，因此客户可以透明地观察变化。DoltHub 还在冠状病毒流行期间展示了它的可用性，因为您可以使用分支管理具有相同模式的不同质量的提要。</p><h1 id="02f0" class="nh mk it bd ni nj nk nl nm nn no np nq jz nr ka ns kc nt kd nu kf nv kg nw nx bi translated">在你走之前</h1><p id="dea3" class="pw-post-body-paragraph kz la it lb b lc op ju le lf oq jx lh li or lk ll lm os lo lp lq ot ls lt lu im bi translated">在<a class="ae ky" href="https://twitter.com/romanorac" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，在那里我定期<a class="ae ky" href="https://twitter.com/romanorac/status/1328952374447267843" rel="noopener ugc nofollow" target="_blank">发布关于数据科学和机器学习的</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/b5d426b68cc5a21b1a35d0a157ebc4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*69rP1pwjJi9mLSFE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@cmhedger?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">考特尼·海杰</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure></div></div>    
</body>
</html>