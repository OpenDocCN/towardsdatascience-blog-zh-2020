<html>
<head>
<title>The ultimate guide to building maintainable Machine Learning pipelines using DVC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 DVC 构建可维护机器学习管道的最终指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-ultimate-guide-to-building-maintainable-machine-learning-pipelines-using-dvc-a976907b2a1b?source=collection_archive---------13-----------------------#2020-07-06">https://towardsdatascience.com/the-ultimate-guide-to-building-maintainable-machine-learning-pipelines-using-dvc-a976907b2a1b?source=collection_archive---------13-----------------------#2020-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="bdcb" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/video-tutorial" rel="noopener" target="_blank">视频教程</a></h2><div class=""/><div class=""><h2 id="cb80" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">学习使用 DVC 构建可维护的机器学习管道的原则</h2></div><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kt ku l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">视频教程</p></figure><p id="db1e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">当我的 ML 项目开始发展时，我通常会感到焦虑，因为:<strong class="lb ja">一切都开始变得混乱</strong>、<strong class="lb ja">和<em class="lv">我知道它变得一团糟</em>、</strong>但是<strong class="lb ja">我不知道如何改进它</strong>。我喜欢使用开源工具和框架，因为随着项目的发展，贡献者的知识会“嵌入”其中。对我来说，这意味着如果我在构建可复制的机器学习管道方面没有太多经验，如果<strong class="lb ja">我使用一个由拥有丰富构建经验的人创造的工具</strong>，我实际上是在我的项目中使用他们的原则<strong class="lb ja">(以及学习)。</strong></p><p id="20b0" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><a class="ae lw" href="https://dvc.org/" rel="noopener ugc nofollow" target="_blank"> DVC </a>是一个<strong class="lb ja">机器学习项目</strong>的开源版本控制系统。起初，我以为它只是一个大文件的 Git，但是这个系统实际上满足了我对实验和管道管理的所有需求。他们最近发布了<a class="ae lw" href="https://dvc.org/blog/dvc-1-0-release" rel="noopener ugc nofollow" target="_blank"> DVC 1.0 </a>以及新的<a class="ae lw" href="https://github.com/iterative/example-get-started" rel="noopener ugc nofollow" target="_blank">入门指南</a>，我用它作为本教程的起点。</p><p id="9153" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">今天我将向你展示如何使用 DVC 构建可复制的机器学习管道。你可以在这里查看最终代码<a class="ae lw" href="https://github.com/dmesquita/dvc_pipelines_and_experiments_tutorial" rel="noopener ugc nofollow" target="_blank">。说够了，我们开始吧！</a></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/3be9870d3e2b5e09124d27e05fa32755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwVTHTw7QzNRj8f7HyqtiA.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">感谢<a class="ae lw" href="https://unsplash.com/@realaxer" rel="noopener ugc nofollow" target="_blank"> @realaxer </a>这张<a class="ae lw" href="https://unsplash.com/photos/9AxFJaNySB8" rel="noopener ugc nofollow" target="_blank">酷图</a>！；)</p></figure><h1 id="0492" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">我们将要建造的东西</h1><p id="229c" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">让我们<strong class="lb ja">建立一个模型来</strong> <strong class="lb ja">对 20 个新闻组数据集</strong>进行分类。为了简化评估阶段，我们将只使用两个类别。这是完成该任务的主要脚本:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="nb ku l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">训练分类器的主脚本</p></figure><p id="aee5" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">编写干净且可维护的代码的一个好的工作流程是<strong class="lb ja">总是不断提高代码的质量</strong>。可以做实验看看是否有效(就像我们在上面<code class="fe nc nd ne nf b">main.py</code>做的那样)。既然我们知道我们要构建什么，我们可以采取下一步，让代码更易于维护。</p><h1 id="afe6" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">💡利用 DVC 建造管道的原理</h1><p id="079b" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">如果我们仔细看看<code class="fe nc nd ne nf b">main.py</code>，我们可以将脚本分解成那些著名的机器学习步骤:</p><blockquote class="ng nh ni"><p id="fb91" class="kz la lv lb b lc ld ka le lf lg kd lh nj lj lk ll nk ln lo lp nl lr ls lt lu ij bi translated">1-收集数据</p><p id="8494" class="kz la lv lb b lc ld ka le lf lg kd lh nj lj lk ll nk ln lo lp nl lr ls lt lu ij bi translated">2-生成特征</p><p id="ad50" class="kz la lv lb b lc ld ka le lf lg kd lh nj lj lk ll nk ln lo lp nl lr ls lt lu ij bi translated">3-训练模型</p><p id="0bbb" class="kz la lv lb b lc ld ka le lf lg kd lh nj lj lk ll nk ln lo lp nl lr ls lt lu ij bi translated">4 —评估模型</p></blockquote><p id="0b6d" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">现在我们有了步骤，<strong class="lb ja">这些是使用 DVC </strong>构建可维护管道的原则:</p><ul class=""><li id="8ad4" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">为每个步骤编写一个 python 脚本</strong></li><li id="070f" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">将每个脚本使用的参数</strong>保存在<code class="fe nc nd ne nf b">yaml</code>文件中</li><li id="bf43" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定每个脚本<strong class="lb ja">依赖的文件</strong></li><li id="1c8d" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定文件<strong class="lb ja"> </strong>每个脚本<strong class="lb ja">生成</strong></li></ul><p id="4f5f" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">让我们安装 DVC，看看如何实现这些步骤。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="6cfd" class="me mf iq bd mg mh oh mj mk ml oi mn mo kf oj kg mq ki ok kj ms kl ol km mu mv bi translated">🔨安装 DVC</h1><p id="184a" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">我使用的是 Linux，我们将<strong class="lb ja">安装 DVC 作为 Python 库</strong>。为了跟进，您应该在您的环境中安装<strong class="lb ja"> Python 3、pip </strong>和<strong class="lb ja"> Git </strong>。我们将为项目创建一个虚拟环境(提示:如果你关心管理你的项目，你应该总是这样做)。DVC 在 Git 存储库中工作得最好，所以我们将在启动 DVC 项目之前初始化一个:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="3e0b" class="oq mf iq nf b gy or os l ot ou">$ mkdir dvc_tutorial<br/>$ cd dvc_tutorial</span><span id="541f" class="oq mf iq nf b gy ov os l ot ou">$ python3 -m venv .env<br/>$ source .env/bin/activate<br/>(.env)$ pip3 install dvc<br/>(.env)$ <strong class="nf ja">git init</strong><br/>(.env)$ <strong class="nf ja">dvc init</strong></span></pre><p id="7042" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们准备好出发了。现在让我们实现每一步。</p><h1 id="56b4" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">📍1—“收集数据”步骤</h1><p id="6cd5" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">我们使用 Scikit 的<code class="fe nc nd ne nf b">fetch_20newsgroups()</code>方法将数据加载到内存中，但是我想将它保存到一个文件中，这样我就可以将它作为管道下一步的依赖项。因此，在这个脚本中，我将<strong class="lb ja">收集数据并将其保存到 csv 文件</strong>。</p><p id="a64b" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们将此阶段的名称设为<strong class="lb ja">准备</strong>。</p><p id="5381" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">一开始我使用了三个类别(<code class="fe nc nd ne nf b">['comp.graphics', 'sci.space', 'rec.sport.basecball']</code>)，但是当我到了评估阶段，我想如果我只使用两个类别，这个教程会更简单。然后我不得不<strong class="lb ja">再次构建数据集</strong>，<strong class="lb ja">用这些类别指定新列表</strong>。这向我展示了使用<strong class="lb ja">类别</strong>作为这个脚本的参数是一个好主意。DVC 使用一个<code class="fe nc nd ne nf b">params.yam</code>文件作为默认参数文件，所以让我们创建一个并在那里定义类别:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="4d52" class="oq mf iq nf b gy or os l ot ou"># file params.yaml</span><span id="60c5" class="oq mf iq nf b gy ov os l ot ou"><strong class="nf ja">prepare:</strong><br/><strong class="nf ja">    categories:</strong><br/>        - comp.graphics<br/>        - sci.space</span></pre><p id="4744" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><code class="fe nc nd ne nf b">prepare</code>是阶段的名称，<code class="fe nc nd ne nf b">categories</code>是参数的名称，为了使用<code class="fe nc nd ne nf b">yaml</code>创建一个列表，我们在每个项目前添加一个<code class="fe nc nd ne nf b">-</code>。</p><p id="e86c" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我想把数据保存到一个<code class="fe nc nd ne nf b">data/prepared</code>文件夹中，所以我们将使用脚本来完成这个任务。下面是最终的<code class="fe nc nd ne nf b">prepare.py</code>文件:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="nb ku l"/></div></figure><p id="7f11" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">为了执行这一阶段的管道，我们只依赖于<strong class="lb ja">脚本代码文件</strong>，我们将<strong class="lb ja">将脚本生成的文件</strong>保存在<code class="fe nc nd ne nf b">data/prepared</code>文件夹中。现在我们有了构建这一步的所有组件:</p><ul class=""><li id="5dff" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">写一个 python 脚本:</strong> <code class="fe nc nd ne nf b">prepare.py</code></li><li id="30e0" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">保存参数:<code class="fe nc nd ne nf b">params.yaml</code>内的</strong> <code class="fe nc nd ne nf b">categories</code></li><li id="88fd" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">依赖的文件:</strong>T10】</li><li id="e11e" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">生成的文件<strong class="lb ja"/>:</strong>文件夹<code class="fe nc nd ne nf b">data/prepared</code></li></ul><p id="2001" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">为了保持有序，我们将脚本保存在一个<code class="fe nc nd ne nf b">src</code>文件夹中，所以让我们创建一个:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="dd7f" class="oq mf iq nf b gy or os l ot ou">(.env)$ mkdir src<br/>(.env)$ cd src <strong class="nf ja"># now save the prepare.py file here</strong></span></pre><p id="7049" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">您的<code class="fe nc nd ne nf b">dvc_tutorial</code>文件夹的内容应该如下所示:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="a9bf" class="oq mf iq nf b gy or os l ot ou">├── params.yaml<br/>└── src<br/>    └── prepare.py</span></pre><p id="dadd" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">所有设置，现在让我们学习如何使用 DVC 建立这个阶段。</p><h2 id="9d6d" class="oq mf iq bd mg ow ox dn mk oy oz dp mo li pa pb mq lm pc pd ms lq pe pf mu iw bi translated">⏺ dvc 运行——使用 dvc 构建阶段</h2><p id="2a43" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">DVC 将管道阶段保存在一个<code class="fe nc nd ne nf b">dvc.yaml</code>文件(人类可读)和一个<code class="fe nc nd ne nf b">dvc.lock</code>(这仅用于 DVC)。我们使用<code class="fe nc nd ne nf b"><strong class="lb ja">dvc run</strong></code>命令创建一个流水线阶段。这些是主要选项:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="137e" class="oq mf iq nf b gy or os l ot ou"><strong class="nf ja">-n &lt;stage&gt;</strong>: <!-- -->specify a name for the stage generated by this command</span><span id="3f04" class="oq mf iq nf b gy ov os l ot ou"><strong class="nf ja">-p [&lt;path&gt;:]&lt;params_list&gt;</strong>: <!-- -->specify a set of <a class="ae lw" href="https://dvc.org/doc/command-reference/params" rel="noopener ugc nofollow" target="_blank">parameter dependencies</a> the stage depends on</span><span id="ff94" class="oq mf iq nf b gy ov os l ot ou"><strong class="nf ja">-d &lt;path&gt;</strong>: <!-- -->specify a file or a directory the stage depends on</span><span id="09ef" class="oq mf iq nf b gy ov os l ot ou"><strong class="nf ja">-o &lt;path&gt;</strong>: <!-- -->specify a file or directory that is the result of running the <!-- -->command</span></pre><p id="5b50" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">设置完这些选项后，我们添加一个命令参数，指定<strong class="lb ja">如何实际运行管道</strong>的这一步。在该步骤中，命令将是<code class="fe nc nd ne nf b">python3 src/prepare.py</code>。让我们首先安装<code class="fe nc nd ne nf b">prepare.py</code>需要的依赖项:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="b409" class="oq mf iq nf b gy or os l ot ou">(.env)$ pip install pyyaml scikit-learn pandas</span></pre><p id="4ea4" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">现在让我们运行<code class="fe nc nd ne nf b"><strong class="lb ja">dvc run</strong></code>命令来生成阶段:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="f911" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc run -n prepare -p prepare.categories -d src/prepare.py -o data/prepared python3 src/prepare.py</strong></span><span id="68b2" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Running stage 'prepare' with command:                                           <br/>        python3 src/prepare.py<br/>Creating 'dvc.yaml'                                                                                                                                <br/>Adding stage 'prepare' in 'dvc.yaml'<br/>Generating lock file 'dvc.lock'</em></span><span id="7e56" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">To track the changes with git, run:</em></span><span id="09b6" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">git add dvc.yaml data/.gitignore dvc.lock</em></span></pre><p id="1f7a" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">现在你的文件夹显示如下:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="d95a" class="oq mf iq nf b gy or os l ot ou"><strong class="nf ja">├── data<br/>│   └── prepared<br/>│       ├── test.csv<br/>│       └── train.csv</strong><br/><strong class="nf ja">├── dvc.lock<br/>├── dvc.yaml</strong><br/>├── params.yaml<br/>└── src<br/>    └── prepare.py</span></pre><p id="c2f3" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">以下是 DVC 自动生成的<code class="fe nc nd ne nf b">dvc.yaml</code>文件的内容:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="a802" class="oq mf iq nf b gy or os l ot ou"><strong class="nf ja">stages:</strong><br/><strong class="nf ja">  prepare:</strong><br/><strong class="nf ja">    cmd:</strong> python3 src/prepare.py<br/><strong class="nf ja">    deps:</strong><br/>    - src/prepare.py<br/><strong class="nf ja">    params:</strong><br/>    - prepare.categories<br/><strong class="nf ja">    outs:</strong><br/>    - data/prepared</span></pre><p id="1d5e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">很简单，对吧？</p><h2 id="62bb" class="oq mf iq bd mg ow ox dn mk oy oz dp mo li pa pb mq lm pc pd ms lq pe pf mu iw bi translated">🔬dvc dag 使用 dvc 可视化管道</h2><p id="5db5" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated"><strong class="lb ja"> </strong> <code class="fe nc nd ne nf b"><strong class="lb ja">dvc dag</strong></code>命令显示流水线的阶段。到目前为止，我们只有一个阶段，但让我们看看:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="21ec" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc dag<br/></strong><em class="lv">+---------+  <br/>| prepare |  <br/>+---------+  <br/>~<br/>~<br/>/tmp/tmpixsrsfo0 (END)</em></span></pre><p id="6231" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">您可以点击<code class="fe nc nd ne nf b"><strong class="lb ja">q</strong></code>隐藏可视化效果。</p><h2 id="2321" class="oq mf iq bd mg ow ox dn mk oy oz dp mo li pa pb mq lm pc pd ms lq pe pf mu iw bi translated">⏯dvc 再现——使用 DVC 再现管道</h2><p id="6634" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated"><strong class="lb ja"> </strong> <code class="fe nc nd ne nf b"><strong class="lb ja">dvc repro</strong></code>命令通过执行在<a class="ae lw" href="https://dvc.org/doc/command-reference/run" rel="noopener ugc nofollow" target="_blank">阶段</a>中定义的命令来复制全部或部分<a class="ae lw" href="https://dvc.org/doc/command-reference/dag" rel="noopener ugc nofollow" target="_blank">管道</a>。正如医生所说:</p><blockquote class="ng nh ni"><p id="0278" class="kz la lv lb b lc ld ka le lf lg kd lh nj lj lk ll nk ln lo lp nl lr ls lt lu ij bi translated">DVC <strong class="lb ja">高速缓存沿途的相关数据工件</strong>并在流水线阶段递归搜索以<strong class="lb ja">确定哪些已经改变</strong>。然后它执行相应的命令。在执行生成输出的 stages 命令之前，输出会从工作区中删除。— <a class="ae lw" href="https://dvc.org/doc/command-reference/repro" rel="noopener ugc nofollow" target="_blank">再现文件</a></p></blockquote><p id="66e0" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">酷，那我们测试一下吧(我还没做什么改动):</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="0198" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc repro</strong></span><span id="ad78" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Stage 'prepare' didn't change, skipping                                         <br/>Data and pipelines are up to date.</em></span></pre><p id="5eca" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">如果我更改了类别的名称会怎样？</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="bbc9" class="oq mf iq nf b gy or os l ot ou"># file params.yaml</span><span id="4f8e" class="oq mf iq nf b gy ov os l ot ou">prepare:<br/>    categories:<br/>        - comp.graphics<br/><strong class="nf ja">        - rec.sport.baseball</strong> # it was 'sci.space'</span></pre><p id="3576" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">然后再次运行该命令？</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="735f" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc repro</strong></span><span id="5b53" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Running stage 'prepare' with command:                                           <br/>        python3 src/prepare.py<br/>Updating lock file 'dvc.lock'</em></span><span id="64b9" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">To track the changes with git, run:</em></span><span id="bdab" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">git add dvc.lock</em></span></pre><p id="4234" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><strong class="lb ja">它再次运行阶段</strong>，因为我们添加了<code class="fe nc nd ne nf b"><strong class="lb ja">-p prepare.categories</strong></code> <strong class="lb ja"> </strong>作为这个阶段的参数。DVC 然后看到<strong class="lb ja">我们改变了这个参数</strong>和<strong class="lb ja">再次跑台</strong>。<code class="fe nc nd ne nf b">dvc.yaml</code>文件仍然是一样的，但是如果你检查<code class="fe nc nd ne nf b">dvc.lock</code>文件，你会看到那里的参数改变了。很神奇吧？</p><p id="3341" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">这些是<strong class="lb ja">创建、运行和可视化</strong>管道阶段的基础:</p><ul class=""><li id="6603" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc run</strong></code></li><li id="39f4" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc dag</strong></code></li><li id="92ae" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc repro</strong></code></li></ul><p id="9dc4" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">现在让我们进入下一个管道步骤。</p><h1 id="0982" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">📍2-“生成要素”步骤</h1><p id="b308" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">我们将这个阶段的名称设置为<strong class="lb ja">特征</strong>。</p><p id="db60" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">在这一步，我们将使用 Scikit 的<code class="fe nc nd ne nf b">TfidfVectorizer</code>并将转换后的矩阵保存到<code class="fe nc nd ne nf b">data/features</code>文件夹中的 pickle 文件中。我们将依赖脚本文件和<code class="fe nc nd ne nf b">data/prepared</code>文件夹，所以这是我们的配方:</p><ul class=""><li id="2230" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">写一个 python 脚本:</strong> <code class="fe nc nd ne nf b">featurize.py</code></li><li id="8ea8" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">保存参数:</strong> <em class="lv">【我们不需要任何】</em></li><li id="d37b" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">依赖的文件:</strong> <code class="fe nc nd ne nf b">featurize.py</code>和<code class="fe nc nd ne nf b">data/prepared</code></li><li id="fa1d" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">生成的文件<strong class="lb ja"/>:</strong>文件夹<code class="fe nc nd ne nf b">data/features</code></li></ul><p id="333c" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">这是最终的<code class="fe nc nd ne nf b">featurize.py</code>文件:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="nb ku l"/></div></figure><p id="ffce" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">你应该把它保存在<code class="fe nc nd ne nf b">/src</code>文件夹中，然后像这样用 DVC 创建舞台:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="0eab" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc run </strong>-n featurize -d src/featurize.py -d data/prepared -o data/features python3 src/featurize.py data/prepared data/features</span></pre><p id="ae7b" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">继续运行<strong class="lb ja"> </strong> <code class="fe nc nd ne nf b"><strong class="lb ja">dvc dag</strong></code>命令来检查管道的新步骤。</p><h1 id="04b7" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">📍3 —“训练模型”步骤</h1><p id="ee8a" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">在这一阶段，我们将最终训练模型并将其保存到 pickle 文件中。我们将使用朴素贝叶斯分类器，并且只设置 alpha 参数。这是食谱:</p><ul class=""><li id="8df3" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">写一个 python 脚本:</strong> <code class="fe nc nd ne nf b">train.py</code></li><li id="052f" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">保存参数:<code class="fe nc nd ne nf b">params.yaml</code>内的</strong> <code class="fe nc nd ne nf b">alpha</code></li><li id="7053" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">依赖的文件:</strong> <code class="fe nc nd ne nf b">train.py</code>和<code class="fe nc nd ne nf b">data/features</code></li><li id="c8ba" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">生成的文件<strong class="lb ja"/>:</strong>文件<code class="fe nc nd ne nf b">model.pkl</code></li></ul><p id="d085" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">首先，让我们添加新的<code class="fe nc nd ne nf b">alpha</code>参数:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="8bd4" class="oq mf iq nf b gy or os l ot ou"># file params.yaml</span><span id="9ee6" class="oq mf iq nf b gy ov os l ot ou">prepare:<br/>    categories:<br/>        - comp.graphics<br/>        - sci.space<br/><strong class="nf ja">train:<br/>    alpha: 0.1</strong></span></pre><p id="1c9d" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">然后将<code class="fe nc nd ne nf b">train.py</code>脚本保存在<code class="fe nc nd ne nf b">/src</code>中:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="nb ku l"/></div></figure><p id="6cb0" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">最后，用 DVC 创造舞台:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="dd6f" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc run </strong>-n train -p train.alpha -d src/train.py -d data/features -o model.pkl python3 src/train.py data/features model.pkl</span></pre><h1 id="0f4c" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">📍4 —“评估模型”步骤</h1><p id="5629" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">在这一步中，我们将了解两个新的<code class="fe nc nd ne nf b"><strong class="lb ja">dvc run</strong></code>参数:<code class="fe nc nd ne nf b">--metrics</code>和<code class="fe nc nd ne nf b">--plots</code>:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="12e4" class="oq mf iq nf b gy or os l ot ou"><strong class="nf ja">-m &lt;path&gt;</strong><strong class="nf ja">:</strong> specify a metrics file produced by this stage. This option behaves like <!-- -->-o<!-- --> but registers the file in a <!-- -->metrics<!-- --> field inside the <!-- -->dvc.yaml<!-- --> stage</span><span id="3141" class="oq mf iq nf b gy ov os l ot ou"><strong class="nf ja">--plots &lt;path&gt;:</strong> <!-- -->specify a plot metrics file produces by this stage. This option behaves like <!-- -->-o<!-- --> but registers the file in a <!-- -->plots<!-- --> field inside the <!-- -->dvc.yaml<!-- --> stage</span></pre><p id="2158" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们将使用曲线下的<strong class="lb ja">面积(AUC) </strong>度量，并计算不同概率阈值的<strong class="lb ja">精确召回对</strong>来绘制图形。为此，我们将创建一个脚本来保存带有 AUC 分数的<code class="fe nc nd ne nf b">scores.json</code>文件和带有精度/召回/阈值对的<code class="fe nc nd ne nf b">plots.json</code>文件:</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="nb ku l"/></div></figure><p id="cd6f" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">继续将这个<code class="fe nc nd ne nf b">evaluate.py</code>脚本保存在<code class="fe nc nd ne nf b">/src</code>文件夹中。</p><p id="1e4e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">关于度量和绘图文件，我们有两个选项:</p><ul class=""><li id="0ac9" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">让 DVC 跟踪度量/图表</strong>文件或</li><li id="3257" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">使用 Git </strong>跟踪指标/图表文件</li></ul><p id="9101" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">由于在本教程中我们没有看到如何使用 DVC 来跟踪文件，我们将使用第二个选项，并使用 Git 来跟踪文件。为此，我们将使用<code class="fe nc nd ne nf b">--metrics-no-cache</code>和<code class="fe nc nd ne nf b">--plots-no-cache</code>命令。这是这个阶段的秘诀:</p><ul class=""><li id="4857" class="nm nn iq lb b lc ld lf lg li no lm np lq nq lu nr ns nt nu bi translated"><strong class="lb ja">写一个 python 脚本:</strong>T0】</li><li id="9c94" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">保存参数:</strong> <em class="lv">(我们不需要任何)</em></li><li id="1a60" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定<strong class="lb ja">脚本依赖的文件:</strong> <code class="fe nc nd ne nf b">evaluate.py</code>、<code class="fe nc nd ne nf b">model.pkl</code>和<code class="fe nc nd ne nf b">data/features</code></li><li id="5eea" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated">指定脚本<strong class="lb ja">生成的文件:</strong> <em class="lv">(无)</em></li><li id="900f" class="nm nn iq lb b lc nv lf nw li nx lm ny lq nz lu nr ns nt nu bi translated"><strong class="lb ja">(新)</strong>指定度量和绘图文件:<code class="fe nc nd ne nf b">scores.json</code>和<code class="fe nc nd ne nf b">plots.json</code></li></ul><p id="4d8e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">好了，现在让我们创建最后一步:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="6701" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc run </strong>-n evaluate -d src/evaluate.py -d model.pkl -d data/features <strong class="nf ja">--metrics-no-cache</strong> scores.json <strong class="nf ja">--plots-no-cache</strong> plots.json python3 src/evaluate.py model.pkl data/features scores.json plots.json</span></pre><h2 id="c632" class="oq mf iq bd mg ow ox dn mk oy oz dp mo li pa pb mq lm pc pd ms lq pe pf mu iw bi translated">🏋🏿dvc 指标—使用 DVC 比较指标</h2><p id="30ae" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics</strong></code>命令让我们显示和比较指标。<code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics show</strong></code>打印度量值，而<code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics diff</strong></code>显示度量文件发生变化时度量值之间的差异(在用 Git 提交之前)。让我们来看看实际情况。</p><p id="a6df" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics show</strong></code>允许我们查看当前得分:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="335a" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc metrics show</strong></span><span id="f2d6" class="oq mf iq nf b gy ov os l ot ou">scores.json:                                                            <br/>        auc: 0.9993366236676577</span></pre><p id="9e38" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">(☕️嗯，那股过度拟合的味道……但那不是今天的重点，所以我们继续😜)</p><p id="c54f" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">让我们检查一下我们目前使用的参数:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="7fa3" class="oq mf iq nf b gy or os l ot ou"># file params.yaml</span><span id="0a28" class="oq mf iq nf b gy ov os l ot ou">prepare:<br/>    categories:<br/>        - comp.graphics<br/>        - rec.sport.baseball<br/>train:<br/>    alpha: 0.1</span></pre><p id="c604" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics diff</strong></code>命令是在前一次提交和当前状态之间计算的，所以让我们首先提交这个实验:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="c6d5" class="oq mf iq nf b gy or os l ot ou">(.env)$ git add src/ params.yaml dvc.yaml dvc.lock scores.json plots.json<br/>(.env)$ git commit -m "exp: alpha=0.1"</span></pre><p id="af33" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">现在，让我们首先更改 alpha 参数:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="6da8" class="oq mf iq nf b gy or os l ot ou"># file params.yaml</span><span id="864e" class="oq mf iq nf b gy ov os l ot ou">prepare:<br/>    categories:<br/>        - comp.graphics<br/>        - rec.sport.baseball<br/>train:<br/>    <strong class="nf ja">alpha: 0.9</strong></span></pre><p id="42bf" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">然后再次运行所有操作:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="6f86" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc repro</strong></span><span id="370f" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Stage 'prepare' didn't change, skipping                                         <br/>Stage 'featurize' didn't change, skipping<br/>Restored stage 'train' from run-cache<br/>Skipping run, checking out outputs<br/>Updating lock file 'dvc.lock'</em></span><span id="e9dc" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Restored stage 'evaluate' from run-cache<br/>Skipping run, checking out outputs<br/>Updating lock file 'dvc.lock'</em></span><span id="27b1" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">To track the changes with git, run:</em></span><span id="c7df" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">git add dvc.lock</em></span></pre><p id="83c1" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们可以通过<code class="fe nc nd ne nf b"><strong class="lb ja">dvc params diff</strong></code>看到参数差异:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="4cec" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc params diff</strong></span><span id="5eb1" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Path         Param        Old    New                                            <br/>params.yaml  train.alpha  0.1    0.9</em></span></pre><p id="2a4e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">最后，看看分数如何随<code class="fe nc nd ne nf b"><strong class="lb ja">dvc metrics diff</strong></code>变化:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="b1b1" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc metrics diff</strong></span><span id="b260" class="oq mf iq nf b gy ov os l ot ou"><em class="lv">Path         Metric    Value    Change                                          <br/>scores.json  auc       0.99869  -0.00064</em></span></pre><h2 id="4b8b" class="oq mf iq bd mg ow ox dn mk oy oz dp mo li pa pb mq lm pc pd ms lq pe pf mu iw bi translated">📊dvc 图—使用 DVC 可视化并比较<em class="pg">指标</em></h2><p id="e7f1" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated"><code class="fe nc nd ne nf b"><strong class="lb ja">dvc plots</strong></code>命令将图形生成为 HTML 文件，可通过网络浏览器打开。这些 HTML 文件使用的是<a class="ae lw" href="https://vega.github.io/vega-lite/" rel="noopener ugc nofollow" target="_blank"> Vega-Lite </a>。让我们画一条精确回忆曲线。<code class="fe nc nd ne nf b">plots.json</code>文件如下所示:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="6731" class="oq mf iq nf b gy or os l ot ou"># file plots.json</span><span id="9f44" class="oq mf iq nf b gy ov os l ot ou">{<br/>  "proc": [<br/>    {<br/>      "precision": 0.927570093457944,<br/>      "recall": 1.0,<br/>      "threshold": 0.4513363759032511<br/>    },<br/>    {<br/>      "precision": 0.927400468384075,<br/>      "recall": 0.9974811083123426,<br/>      "threshold": 0.45201756623495926<br/>    },<br/>    # [...]<br/>  ]<br/>}</span></pre><p id="2593" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们想要一个在 y 轴上有精度，在 y 轴上有回忆的图，所以让我们建立一个:</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="cdca" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc plots show</strong> -y precision -x recall plots.json</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/7f0dc3645de9f6ce90d30a17173dc67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*bdcNLNBdemrVhcA-1NOrZw.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">精确回忆曲线</p></figure><p id="d66e" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们甚至可以画出 alpha=0.1 和 alpha=0.9 的精度分数之间的差异</p><pre class="ko kp kq kr gt om nf on oo aw op bi"><span id="54d5" class="oq mf iq nf b gy or os l ot ou">(.env)$ <strong class="nf ja">dvc plots diff</strong> --targets plots.json -y precision</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/439ddf58096b1020a2a3bb3cc9db66a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*zIM05AQAHUGdIAikWIapzw.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">不同的 alpha 值有不同的精度分数</p></figure><p id="bf32" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们的旅行到此结束。你可以在这里查看更多剧情选项和配置:【https://dvc.org/doc/command-reference/plots<a class="ae lw" href="https://dvc.org/doc/command-reference/plots" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="f05a" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">本教程的最终代码是<a class="ae lw" href="https://github.com/dmesquita/dvc_pipelines_and_experiments_tutorial" rel="noopener ugc nofollow" target="_blank">这里</a></p><h1 id="615b" class="me mf iq bd mg mh mi mj mk ml mm mn mo kf mp kg mq ki mr kj ms kl mt km mu mv bi translated">结束语</h1><p id="70ff" class="pw-post-body-paragraph kz la iq lb b lc mw ka le lf mx kd lh li my lk ll lm mz lo lp lq na ls lt lu ij bi translated">使用 DVC 跟踪实验和管理机器学习管道真的可以让我们的项目更上一层楼。让你的 ML 项目可复制的关键是<strong class="lb ja">为每个步骤<strong class="lb ja"> </strong>和<strong class="lb ja">创建单个 Python 脚本</strong>指定每个脚本使用的参数、输入</strong>和输出<strong class="lb ja"/>。您可以通过一个简单的<code class="fe nc nd ne nf b"><strong class="lb ja">dvc run</strong></code>命令来实现，并使用<code class="fe nc nd ne nf b"><strong class="lb ja">dvc repro</strong></code>来运行您喜欢的管道。</p><p id="99a8" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">除了实验和管道管理，DVC 还提供<strong class="lb ja">版本控制和</strong>部署和协作功能。你可以在这里和<a class="ae lw" href="https://dvc.org/doc/use-cases/sharing-data-and-model-files" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多。</p><p id="5771" class="pw-post-body-paragraph kz la iq lb b lc ld ka le lf lg kd lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">今天就到这里，感谢阅读！😁</p></div></div>    
</body>
</html>