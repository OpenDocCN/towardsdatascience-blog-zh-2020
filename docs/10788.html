<html>
<head>
<title>African Influencers: Twitter Users’ Segmentation Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">非洲影响者:使用 Python 对 Twitter 用户进行细分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/african-influencers-twitter-users-segmentation-40753ee0a0bd?source=collection_archive---------78-----------------------#2020-07-27">https://towardsdatascience.com/african-influencers-twitter-users-segmentation-40753ee0a0bd?source=collection_archive---------78-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d34b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Twitter 数据确定非洲最有影响力的人，以推动营销战略。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7b573420e5c4066c4ed505e3fba691f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GBseSZyQ8LTZsr7S"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢克·切瑟在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e41f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">简介</strong></p><p id="8e7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Twitter 是最受欢迎的社交媒体平台之一。这是一个不断更新的信息流池，在这里可以研究趋势、喜好、爱好、社区和新闻。在数百万用户中，有政治和社会影响力的人只占一小部分。这些小群体可以被确定、研究并用于各种活动和营销策略。这项研究的目的是使用 Python 来确定和排列非洲最有影响力的人和政府官员。</p><p id="3fb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这一点，我们将使用 3 个指标得分:</p><ul class=""><li id="1ede" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">人气评分-喜欢和转发</li><li id="604f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">影响程度得分</li><li id="5d84" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">相关性分数-提及和回复计数</li></ul><h1 id="aadd" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">数据采集</strong></h1><p id="bd20" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们从收集 twitter 句柄开始</p><ul class=""><li id="1845" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><a class="ae ky" href="https://africafreak.com/100-most-influential-twitter-users-in-africa" rel="noopener ugc nofollow" target="_blank">https://Africa freak . com/100-非洲最具影响力的推特用户</a></li><li id="d199" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://enitiate.solutions/top-18-african-heads-of-states-on-twitter/" rel="noopener ugc nofollow" target="_blank">https://e nitiate . solutions/top-18-African-s-heads-on-Twitter/</a>。</li></ul><p id="c120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 web 抓取技术来获取所需的 twitter 句柄。然后使用 Tweepy 提取分析所需的用户信息。</p><h1 id="76d4" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> Python 库</strong></h1><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e49c" class="nl mk it nh b gy nm nn l no np">from requests import get<br/>from requests.exceptions import RequestException<br/>from contextlib import closing<br/>from bs4 import BeautifulSoup<br/>import pandas as pd<br/>import re<br/>import numpy as np<br/>import os, sys<br/>import fire<br/>import tweepy</span></pre><h1 id="ee1b" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">卷筒纸报废</strong></h1><p id="5ef5" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们搜索列出的网站，以获得非洲高层人士和政府官员的 twitter 账号。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="50cb" class="nl mk it nh b gy nm nn l no np">def simple_get(url):<br/>    """<br/>    Attempts to get the content at `url` by making an HTTP GET request.<br/>    If the content-type of response is some kind of HTML/XML, return the<br/>    text content, otherwise return None.<br/>    """<br/>    try:<br/>        with closing(get(url, stream=True)) as resp:<br/>            if is_good_response(resp):<br/>                return resp.content  #.encode(BeautifulSoup.original_encoding)<br/>            else:<br/>                return None<br/> <br/>    except RequestException as e:<br/>        log_error('Error during requests to {0} : {1}'.format(url, str(e)))<br/>        return None<br/> <br/> <br/>def is_good_response(resp):<br/>    """<br/>    Returns True if the response seems to be HTML, False otherwise.<br/>    """<br/>    content_type = resp.headers['Content-Type'].lower()<br/>    return (resp.status_code == 200 <br/>            and content_type is not None <br/>            and content_type.find('html') &gt; -1)<br/> <br/> <br/>def log_error(e):<br/>    """<br/>    It is always a good idea to log errors. <br/>    This function just prints them, but you can<br/>    make it do anything.<br/>    """<br/>    print(e)<br/>    <br/>def get_elements(url, tag='',search={}, fname=None):<br/>    """<br/>    Downloads a page specified by the url parameter<br/>    and returns a list of strings, one per tag element<br/>    """<br/>    <br/>    if isinstance(url,str):<br/>        response = simple_get(url)<br/>    else:<br/>        #if already it is a loaded html page<br/>        response = url<br/> <br/>    if response is not None:<br/>        html = BeautifulSoup(response, 'html.parser')<br/>        <br/>        res = []<br/>        if tag:    <br/>            for li in html.select(tag):<br/>                for name in li.text.split('\n'):<br/>                    if len(name) &gt; 0:<br/>                        res.append(name.strip())<br/>                       <br/>                <br/>        if search:<br/>            soup = html            <br/>            <br/>            <br/>            r = ''<br/>            if 'find' in search.keys():<br/>                print('findaing',search['find'])<br/>                soup = soup.find(**search['find'])<br/>                r = soup<br/>if get_ipython().__class__.__name__ == '__main__':<br/>    fire(get_tag_elements)</span></pre><p id="c794" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是通过其中一个列出的网站后的输出示例:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="643a" class="nl mk it nh b gy nm nn l no np">['@EswatiniGovern1',<br/> '@MalawiGovt',<br/> '@hagegeingob',<br/> '@FinanceSC',<br/> '@PresidencyZA',<br/> '@mohzambia',<br/> '@edmnangagwa',<br/> '@MinSantedj',<br/> '@hawelti',<br/> '@StateHouseKenya',<br/> '@PaulKagame',<br/> '@M_Farmaajo',<br/> '@SouthSudanGov',<br/> '@SudanPMHamdok',<br/> '@TZSpokesperson',<br/> '@KagutaMuseveni']</span></pre><p id="f3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 tweepy APIs，我们可以传递从废弃网站获取的列表来废弃 twitter 中的用户信息。对于我们的例子，我们需要每个帐户的用户的屏幕名称、tweets 数量、关注、追随者、喜欢、转发、标签和提及。</p><p id="6419" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个示例代码:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="9e24" class="nl mk it nh b gy nm nn l no np">df = pd.DataFrame(columns=['screen_name','description','number_of_tweets','following', 'followers',<br/>                          'likes', 'retweets', 'hashtags', 'mentions'])<br/>def get_data(account_list):<br/>    for target in account_list: <br/>        item = api.get_user(target)<br/>        name = item.name<br/>        screen_name = item.screen_name<br/>        description = item.description<br/>        number_of_tweets = item.statuses_count<br/>        following = item.friends_count<br/>        followers = item.followers_count<br/>        # age of account<br/>        account_created_date = item.created_at<br/>        delta = datetime.utcnow() - account_created_date<br/>        account_age_days = delta.days<br/>        if account_age_days &gt; 0:<br/>            avg_tweets_per_day = float(number_of_tweets)/float(account_age_days)<br/>        # tweets (hashtags and mentions)<br/>        global hashtags, mentions, replies, comments  # making them global in order to intergrate them to the df later<br/>        hashtags = []<br/>        mentions = []<br/>        comments = []<br/>        retweet_count = []<br/>        likes_count = []<br/>        replies = []<br/>        tweet_count = 0<br/>        end_date = datetime.utcnow() - timedelta(days=180)<br/>        for status in Cursor(api.user_timeline, id=target, include_rts=False).items():                <br/>            tweet_count += 1<br/>            if hasattr(status, "entities"):<br/>                entities = status.entities<br/>        process_status(status)<br/>            #hashtags<br/>            if "hashtags" in entities:<br/>                for ent in entities["hashtags"]:<br/>                    if ent is not None:<br/>                        if "text" in ent:<br/>                            hashtag = ent["text"]<br/>                            if hashtag is not None:<br/>                                  hashtags.append(hashtag)<br/>            #mentions  (will fetch other users but will later use to do mention counts between the involved users)                   <br/>            if "user_mentions" in entities:<br/>                for ent in entities["user_mentions"]:<br/>                    if ent is not None:<br/>                        if "screen_name" in ent:<br/>                            name = ent["screen_name"]<br/>                            if name == target:<br/>                                if name is not None:<br/>                                    mentions.append(name)</span></pre><p id="ac11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧作为输出返回。下面是输出的一个示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/1f80bf9ddac1274564323aebb25ea69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*947S1q0QNIYKXHktQ1ZzsQ.png"/></div></div></figure><h1 id="7b2d" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">分析</strong></h1><p id="f593" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">根据这些指标进行分析，以确定非洲最具影响力的人物。Matplotlib 用于绘制图形和可视化分析的数据。下面是非洲政府高级官员受欢迎程度得分的柱状图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/39a04e0f499fe67bb93356a1fd475fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*Dnt2N_h5Ifj97-x9KSfebw.png"/></div></figure><p id="ce7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于 in-degree 影响力的非洲顶级人物条形图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/8fcb80e1e0bf32d89e7606f9410517a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*aAJofGn_0LnA6sqXftMm2w.png"/></div></figure><h1 id="9927" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">结论</strong></h1><p id="2d5c" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">根据上述图表所示的分析，非洲最有影响力的人物是:</p><ul class=""><li id="af7b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">特雷弗·诺亚</li><li id="3eee" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">朱利叶斯·马莱马</li></ul><p id="f735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据分析，非洲最有影响力的政府官员是:</p><ul class=""><li id="324b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">布哈里先生</li><li id="d1bd" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">卡古塔·穆塞韦尼</li></ul><p id="3a95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数字营销是营销策略的新标准。与合适的影响者合作，在商品和合适的市场之间架起一座桥梁。数据科学可以在企业中用于推动关键的营销决策。</p><p id="c1ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参考</p><p id="65e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[1] Cha，m .，Haddadi，h .，Benevenuto，f .，和 Gummadi，K. (2010 年)。测量 Twitter 中的用户影响力:百万追随者谬误。从 http://twitter.mpi-sws.org/icwsm2010_fallacy.pdf<a class="ae ky" href="http://twitter.mpi-sws.org/icwsm2010_fallacy.pdf" rel="noopener ugc nofollow" target="_blank">取回</a></p><p id="91f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://github.com/johnlotome/NIKE-CAMPAIGN-" rel="noopener ugc nofollow" target="_blank"> GitHub 库可以获得全部代码。</a></p></div></div>    
</body>
</html>