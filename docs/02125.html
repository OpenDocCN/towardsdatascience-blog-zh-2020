<html>
<head>
<title>Google Trends API for Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于 Python 的 Google 趋势 API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/google-trends-api-for-python-a84bc25db88f?source=collection_archive---------2-----------------------#2020-02-29">https://towardsdatascience.com/google-trends-api-for-python-a84bc25db88f?source=collection_archive---------2-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d1c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本教程中，我将演示如何使用 Google Trends API 来获取互联网上的最新热门话题。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ed70e3e5dee25f0e6358477ef0bc5064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fi6masemXJT3Q8YWekQCDQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fknowyourmeme.com%2Fmemes%2Fsites%2Fgoogle-trends&amp;psig=AOvVaw1rYwrfu1pNYm4zn8XcLH-u&amp;ust=1582997539252000&amp;source=images&amp;cd=vfe&amp;ved=0CA0QjhxqFwoTCPjAz8Pj9OcCFQAAAAAdAAAAABAD" rel="noopener ugc nofollow" target="_blank">谷歌趋势</a></p></figure><h1 id="46ee" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="47ff" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://trends.google.com/trends/" rel="noopener ugc nofollow" target="_blank"> Google trends </a>是一个基于各种地区和语言，分析并列出 Google search 上热门搜索结果的网站。Google Trends 是 Google 的网站(很明显)。在本教程的帮助下，您可以使用 Python 从 Google trends 网站获得趋势分析结果(以及更多)。您不需要手动搜索和复制趋势分析结果，名为<code class="fe mn mo mp mq b">pytrends</code>的 Python API 会为您完成这项工作。在开始之前，我希望你们所有人浏览一下<code class="fe mn mo mp mq b">pytrends</code> API 的官方文档。</p><div class="mr ms gp gr mt mu"><a href="https://pypi.org/project/pytrends/" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">pytrends</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">谷歌趋势的非官方 API 允许从谷歌趋势自动下载报告的简单界面。主…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">pypi.org</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni ks mu"/></div></div></a></div></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="a581" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">在开始之前，本教程的全部代码可以在我的下面给出的<a class="ae ky" href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Google_Trends_API.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> <em class="nv"> GitHub 资源库</em> </strong> </a>中找到。请随意探索。</p><div class="mr ms gp gr mt mu"><a href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Google_Trends_API.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">塔努-北帕布/Python</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">permalink dissolve GitHub 是 4000 多万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">github.com</p></div></div><div class="nd l"><div class="nw l nf ng nh nd ni ks mu"/></div></div></a></div></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="9a59" class="kz la it bd lb lc nx le lf lg ny li lj jz nz ka ll kc oa kd ln kf ob kg lp lq bi translated">装置</h1><p id="e599" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">第一步是手动安装库。所以，打开你最喜欢的 IDE 或者笔记本开始输入下面的代码。我将使用<a class="ae ky" href="https://colab.research.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>，因为这是我最喜欢的笔记本。</p><blockquote class="oc od oe"><p id="6b5d" class="lr ls nv lt b lu nq ju lw lx nr jx lz of ns mc md og nt mg mh oh nu mk ml mm im bi translated"><strong class="lt iu">如果你用的是 jupyter notebook，就按原样输入代码(确保你有“！”</strong>开头)</p></blockquote><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="eae9" class="om la it mq b gy on oo l op oq">!pip install pytrends</span></pre><p id="5094" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">或者，如果您使用的是 IDE，只需键入以下代码</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="cf30" class="om la it mq b gy on oo l op oq">pip install pytrends</span></pre><p id="b85a" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">执行上述代码后，您应该会得到如下所示的成功消息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/787a97acfb5fe95cc5f24884f71247c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOd060VbYzxwA8mlJcV5kQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd os">库成功安装</strong></p></figure></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="85f8" class="kz la it bd lb lc nx le lf lg ny li lj jz nz ka ll kc oa kd ln kf ob kg lp lq bi translated">履行</h1><h2 id="5680" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">连接到 Google</h2><p id="3dc0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您必须首先连接到 Google，因为毕竟我们是从 Google Trends 请求 Google Trends 主题。为此，我们需要从<code class="fe mn mo mp mq b">pytrends.request</code>库中导入名为<code class="fe mn mo mp mq b">TrendReq</code>的方法。此外，我将导入 pandas 库来存储和可视化数据，您将在后面的教程中看到这些数据。</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="5326" class="om la it mq b gy on oo l op oq">import pandas as pd                        <br/>from pytrends.request import TrendReq</span><span id="2273" class="om la it mq b gy pe oo l op oq">pytrend = TrendReq()</span></pre></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="744e" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">按地区划分的利息</h2><p id="50ce" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看世界范围内该地区流行的术语。我会选择，要搜索的词为“<strong class="lt iu"> <em class="nv">泰勒斯威夫特</em> </strong>”(我好喜欢她……).</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="6e47" class="om la it mq b gy on oo l op oq">pytrend.build_payload(kw_list=[‘Taylor Swift’])</span><span id="e72b" class="om la it mq b gy pe oo l op oq"># Interest by Region<br/>df = pytrend.interest_by_region()<br/>df.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/05752328387705bd2064ae799e6be789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoRLGu959iLUH8xveHhIeg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按地区划分的利息</p></figure><p id="fc99" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">现在你可能在想什么是价值观，它们代表什么？这些值是按 0 到 100 的范围计算的，其中 100 是最受欢迎的位置，作为该位置中总搜索数的一部分，值 50 表示该位置受欢迎程度为一半。值为 0 表示没有足够的数据用于此项的位置。<strong class="lt iu">来源</strong> → <a class="ae ky" href="https://support.google.com/trends/answer/4355212" rel="noopener ugc nofollow" target="_blank">谷歌趋势</a>。</p><p id="9a50" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">让我们把结果绘制在柱状图上，因为有时视觉表现能给出一个清晰的图像。</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="cadc" class="om la it mq b gy on oo l op oq">df.reset_index().plot(x=’geoName’, y=’Taylor Swift’, figsize=(120, 10), kind =’bar’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/cd6f56699e3881355d3dbf08f3789caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XLnjFzWxSy93d46F9w_bPg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">条形图</p></figure></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="e043" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">同样，您使用参数<code class="fe mn mo mp mq b">resolution = 'COUNTRY_NAME'</code>来过滤结果。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="d940" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">每日搜索趋势</h2><p id="f1a4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，让我们来了解一下全球每日热门搜索趋势。为此，我们必须使用<code class="fe mn mo mp mq b">trending_searches()</code>方法。如果你想在全球范围内搜索，不要传递任何参数。</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="21dd" class="om la it mq b gy on oo l op oq"># Get Google Hot Trends data<br/>df = pytrend.trending_searches(pn=’united_states’)<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/77745735cb318adb20c036b893611b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CRugES8usF9WqtyL6QfJ1Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">趋势搜索</p></figure><p id="edeb" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">确保您输入小写的国家名称<code class="fe mn mo mp mq b">pn = "canada"</code>。另外，你可以将上述结果与<a class="ae ky" href="https://trends.google.com/trends/trendingsearches/daily?geo=US" rel="noopener ugc nofollow" target="_blank"> google trend 的结果</a>进行比较。要了解今天的热门话题，只需使用:</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="2989" class="om la it mq b gy on oo l op oq">df = pytrend.today_searches(pn=’US’)</span></pre></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="054d" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">排行榜</h2><p id="d792" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看 2019 年的趋势。在<code class="fe mn mo mp mq b">top_charts</code>方法的帮助下，我们可以得到每年的热门搜索。</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="29e2" class="om la it mq b gy on oo l op oq"># Get Google Top Charts<br/>df = pytrend.top_charts(2019, hl='en-US', tz=300, geo='GLOBAL')<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/a8ea960151b6fcf4197442905ae21139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mka7KPePMHb_CJZAGkDc8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">去年的热门标题(2019)</p></figure><p id="cd6a" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">要比较结果，只需访问<a class="ae ky" href="https://trends.google.com/trends/yis/2019/GLOBAL/" rel="noopener ugc nofollow" target="_blank">谷歌趋势</a>。我们可以指定想要查看趋势搜索的年份和国家。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="f37a" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">谷歌关键词建议</h2><p id="9703" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看如何才能获得谷歌的关键词建议。如果你不知道我在说什么？下图更清楚地解释了事情。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/9091ba0606dfbfa5725dff769f14b043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRpWWBS1SHXBr71Jp1NwQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">关键词建议</p></figure><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="d327" class="om la it mq b gy on oo l op oq"># Get Google Keyword Suggestions</span><span id="7f1d" class="om la it mq b gy pe oo l op oq">keywords = pytrend.suggestions(keyword='Mercedes Benz')<br/>df = pd.DataFrame(keywords)<br/>df.drop(columns= 'mid')   # This column makes no sense</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/ce3035d1ca773fbe220ad40337e5ac7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Ic5bLiElNzGx6gGVuv46Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">关键词建议</p></figure></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h2 id="72ee" class="om la it bd lb ot ou dn lf ov ow dp lj ma ox oy ll me oz pa ln mi pb pc lp pd bi translated">相关查询</h2><p id="3974" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当用户搜索一个主题时，他们也会搜索一些相关的东西，这是很常见的事情。这些被称为相关查询。让我们看看题目“<strong class="lt iu"> <em class="nv">冠状病毒</em> </strong>”的相关查询有哪些。请记住，当您想要更改主题名称时，只需使用新名称作为参数再次运行下面的代码。</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="264e" class="om la it mq b gy on oo l op oq">pytrend.build_payload(kw_list=['Coronavirus'])</span></pre><p id="64e8" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">现在让我们运行方法<code class="fe mn mo mp mq b">related_queries</code>，该方法返回一个字典，其中包含与主题“<strong class="lt iu"> <em class="nv">冠状病毒</em> </strong>”相关的所有查询</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="358c" class="om la it mq b gy on oo l op oq"># Related Queries, returns a dictionary of dataframes</span><span id="0460" class="om la it mq b gy pe oo l op oq">related_queries = pytrend.related_queries()<br/>related_queries.values()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pl"><img src="../Images/293570045a9a6436d01e38a7d966f9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSrxWvqpIec-Ykfmh0M48Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对冠状病毒的相关疑问</p></figure><p id="1491" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">同样，您也可以搜索相关主题，只需运行以下代码即可:</p><pre class="kj kk kl km gt oi mq oj ok aw ol bi"><span id="0548" class="om la it mq b gy on oo l op oq"># Related Topics, returns a dictionary of dataframes</span><span id="2dd1" class="om la it mq b gy pe oo l op oq">related_topic = pytrend.related_topics()<br/>related_topic.values()</span></pre></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="3910" class="pw-post-body-paragraph lr ls it lt b lu nq ju lw lx nr jx lz ma ns mc md me nt mg mh mi nu mk ml mm im bi translated">本教程到此结束，我希望你们已经学到了一些东西。如果你们对教程有任何疑问，请在评论区告诉我。虽然这是一个简短的教程，但有很多东西需要学习。好的，下节课再见，祝你有美好的一天！！！</p></div></div>    
</body>
</html>