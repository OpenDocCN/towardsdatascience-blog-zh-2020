<html>
<head>
<title>Scraping Table Data From Websites— using a single line in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从网站抓取表格数据—使用 Python 中的一行代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scraping-table-data-from-websites-using-a-single-line-in-python-ba898d54e2bc?source=collection_archive---------12-----------------------#2020-07-02">https://towardsdatascience.com/scraping-table-data-from-websites-using-a-single-line-in-python-ba898d54e2bc?source=collection_archive---------12-----------------------#2020-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6087" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本文将教您使用 python 中的一行代码从网站中抓取表格数据的最佳方式。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/32afc50825d868d313c1a9edfc9a85fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6jO8_PLZBYGS100X"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">米卡·鲍梅斯特在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="2329" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="692e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di"> D </span>如今，ata 已经成为最有价值的货币和珍贵商品，你使用它的方式将使你与普通人有所不同。您需要足够聪明来获取这些数据，这些数据在您身边随处可见，在本文中，您将能够学习一种简单的方法，使用 python 中的一行代码从任何网站获取表格数据。</p><blockquote class="mw"><p id="19ab" class="mx my it bd mz na nb nc nd ne nf mm dk translated">对于数据收集，“越快越好”永远是最好的答案——玛丽莎·梅耶尔(雅虎前首席执行官！)</p></blockquote><p id="292d" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">每天都有大量公开生成的数据，最常见的数据类型之一是 HTML 表格，有许多方法可以将这些数据放入笔记本，如使用<strong class="lt iu"> urllib </strong>和<strong class="lt iu"> BeautifulSoup </strong>但这是一个漫长而耗时的过程，您可以在一行代码中使用<strong class="lt iu"> pandas </strong>库来完成相同的任务。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="cbc7" class="kz la it bd lb lc ns le lf lg nt li lj jz nu ka ll kc nv kd ln kf nw kg lp lq bi translated">我们开始吧</h1><p id="5e80" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Pandas 库中的 read_html() 方法是一个 web 抓取工具，只需将所需的 URL 作为参数提供给该方法，就可以提取网站上的所有表格。</p><p id="75f3" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated"><strong class="lt iu">先决条件:导入熊猫库</strong></p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="c6bf" class="oh la it od b gy oi oj l ok ol">import pandas as pd</span></pre><h2 id="3a5f" class="oh la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated"><strong class="ak"> 1。获取网站上的所有表格</strong></h2><p id="856f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">只需给出一个 URL 作为参数，就可以获得该特定网站上的所有表格。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="f09b" class="oh la it od b gy oi oj l ok ol">pandas.<strong class="od iu">read_html</strong>(URL)</span></pre><p id="efc6" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated"><strong class="lt iu">例子</strong>:从维基百科中读取数据</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="2077" class="oh la it od b gy oi oj l ok ol">#Data about Cricket World cup</span><span id="b6b5" class="oh la it od b gy ox oj l ok ol">URL = <a class="ae ky" href="https://en.wikipedia.org/wiki/Cricket_World_Cup" rel="noopener ugc nofollow" target="_blank">"https://en.wikipedia.org/wiki/Cricket_World_Cup</a>"</span><span id="ae66" class="oh la it od b gy ox oj l ok ol">tables = pd.read_html(URL)</span><span id="7b60" class="oh la it od b gy ox oj l ok ol">print("There are : ",len(tables)," tables")<br/>print("Take look at table 0")<br/>print(tables[0])</span></pre><h2 id="9962" class="oh la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated">2.从网站上读取特定的表格</h2><p id="ca35" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果一个网站上有很多表格，找到你要找的表格将会是一项繁琐的任务，你不能只手动搜索一个表格。为此，我们需要在<strong class="lt iu"> read_html() </strong>方法中添加一个额外的参数(<strong class="lt iu"> match) </strong>来自动搜索所需的表。</p><p id="ca42" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated">match 属性可以将一个<strong class="lt iu">字符串</strong>或一个<strong class="lt iu">编译的正则表达式</strong>作为它的值</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="6d3e" class="oh la it od b gy oi oj l ok ol">pandas.<strong class="od iu">read_html</strong>(URL,match = ".+")</span></pre><p id="e4fe" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated"><strong class="lt iu">示例</strong>:使用 match 作为参数来抓取特定的表格</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="a69a" class="oh la it od b gy oi oj l ok ol">URL = "https://en.wikipedia.org/wiki/Cricket_World_Cup"</span><span id="d6fe" class="oh la it od b gy ox oj l ok ol">tables = pd.read_html(URL,match="Performance details")</span><span id="aa6f" class="oh la it od b gy ox oj l ok ol">print("There are : ",len(tables)," tables")</span><span id="9ca7" class="oh la it od b gy ox oj l ok ol">print("Take look at table 0")</span><span id="6d20" class="oh la it od b gy ox oj l ok ol">tables[0]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/96a50b0f2e60dc3ade41ae579a746845.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*X1JpKfTHqcF4rlaMHGMCYQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由萨特雅·加内什创作</p></figure><p id="7e3a" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated"><strong class="lt iu">注意:</strong>搜索空间缩小，这可能有助于您快速搜索所需的表</p><h2 id="f00a" class="oh la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated">3.格式化输出</h2><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="ee68" class="oh la it od b gy oi oj l ok ol">Useful attributes  <br/>1. header    : The row to use to make as the column header.<br/>2. index_col : The column to use to create the index<br/>3. skiprows  : Number of rows to skip after parsing column integer</span></pre><h2 id="488e" class="oh la it bd lb om on dn lf oo op dp lj ma oq or ll me os ot ln mi ou ov lp ow bi translated"><strong class="ak"> 4。您也可以通过另一种方式瞄准特定的表格</strong></h2><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="1116" class="oh la it od b gy oi oj l ok ol">pandas.<strong class="od iu">read_html</strong>(URL,attrs = {'html_tag' : 'value'})</span></pre><p id="0fcf" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated">我们可以通过检查表格来直接定位对应于所需表格的 HTML 标签。</p><p id="a2df" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated"><strong class="lt iu">如何检查表格？</strong></p><p id="0286" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated">左键点击工作台并选择<strong class="lt iu">检查</strong>选项</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/c2f9a0f3b9d4acdc539f21f6f5aa9794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yS_M3ExsLhThGbMBF2LzqA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由 Satya Ganesh 提供</p></figure><p id="fdbc" class="pw-post-body-paragraph lr ls it lt b lu nx ju lw lx ny jx lz ma nz mc md me oa mg mh mi ob mk ml mm im bi translated">在检查了查找该表专用的相关标签后，我们可以看到<code class="fe pa pb pc od b">class:'wikitable'</code>是一个标识该表的标签。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/83128a5a03f01e0c14dde65bd1576756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xA6Nfi7r4_m0-LBMf-xsmg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由 Satya Ganesh 提供</p></figure><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="51fb" class="oh la it od b gy oi oj l ok ol">#By using this line of code we can hit the target table directly<br/>pandas.<strong class="od iu">read_html</strong>(URL,attrs = {'class' : 'wikitable'})</span></pre><h1 id="4312" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="7bb7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">读完这篇文章后，你将能够很快从任何网站上收集表格数据。</p><h1 id="677a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">参考</strong></h1><div class="pe pf gp gr pg ph"><a href="https://www.wikipedia.org/" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">维基百科(一个基于 wiki 技术的多语言的百科全书协作计划ˌ也是一部用不同语言写成的网络百科全书ˌ 其目标及宗旨是为全人类提供自由的百科全书)ˌ开放性的百科全书</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">维基百科是一个免费的在线百科全书，由世界各地的志愿者创建和编辑，由维基媒体托管…</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">www.wikipedia.org</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv ks ph"/></div></div></a></div><div class="pe pf gp gr pg ph"><a href="https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.read_html.html" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">pandas.read_html - pandas 0.23.4 文档</h2><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">pandas.pydata.org</p></div></div></div></a></div><h1 id="9101" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">你可以在这里找到它的应用…</h1><div class="pe pf gp gr pg ph"><a rel="noopener follow" target="_blank" href="/impact-of-covid-19-data-visualization-using-python-6f8e3bdc860b"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">新冠肺炎的影响-使用 Python 进行数据可视化</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">使用 python 在印度地图上可视化冠状病毒爆发的初级方法。当你到达…的终点时</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">towardsdatascience.com</p></div></div><div class="pq l"><div class="pw l ps pt pu pq pv ks ph"/></div></div></a></div><h1 id="eb47" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">感谢阅读😃过得愉快</h1></div></div>    
</body>
</html>