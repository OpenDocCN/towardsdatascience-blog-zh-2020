<html>
<head>
<title>Installing Apache Pig 0.17.0 on Windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Windows 10 上安装 Apache Pig 0.17.0</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/installing-apache-pig-0-17-0-on-windows-10-7b19ce61900d?source=collection_archive---------11-----------------------#2020-05-05">https://towardsdatascience.com/installing-apache-pig-0-17-0-on-windows-10-7b19ce61900d?source=collection_archive---------11-----------------------#2020-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2090" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文是我们在 TowardsDataScience.com 上发布的系列文章的一部分，旨在说明如何在 Windows 操作系统上安装大数据技术。</p><p id="979f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">之前发布:</strong></p><ul class=""><li id="bdb0" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener" target="_blank" href="/installing-hadoop-3-2-1-single-node-cluster-on-windows-10-ac258dd48aef">在 Windows 10 上安装 Hadoop 3.2.1 单节点集群</a></li><li id="798c" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk kq kr ks kt bi translated"><a class="ae ku" rel="noopener" target="_blank" href="/installing-apache-hive-3-1-2-on-windows-10-70669ce79c79">在 Windows 10 上安装 Apache Hive 3 . 1 . 2</a></li></ul><p id="b834" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将提供在 Windows 10 上安装 Apache Pig 0.17.0 的分步指南。</p><h1 id="7990" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">1.先决条件</h1><h2 id="9687" class="ly lb iq bd lc lz ma dn lg mb mc dp lk jy md me lo kc mf mg ls kg mh mi lw mj bi translated">1.1.Hadoop 集群安装</h2><p id="f1d6" class="pw-post-body-paragraph jn jo iq jp b jq mk js jt ju ml jw jx jy mm ka kb kc mn ke kf kg mo ki kj kk ij bi translated">Apache Pig 是基于 Hadoop 构建的平台。可以参考我们之前发表的文章，在 Windows 10 上安装 Hadoop 单节点集群。</p><blockquote class="mp mq mr"><p id="55ae" class="jn jo ms jp b jq jr js jt ju jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj kk ij bi translated">注意 Apache Pig 最新版本 0.17.0 <a class="ae ku" href="https://pig.apache.org/releases.html#Download" rel="noopener ugc nofollow" target="_blank">支持 Hadoop 2.x 版本</a>和<a class="ae ku" href="https://issues.apache.org/jira/browse/PIG-5253" rel="noopener ugc nofollow" target="_blank">仍然面临一些与 Hadoop 3.x </a>的兼容性问题。在本文中，我们将只说明安装，因为我们使用的是 Hadoop 3.2.1</p></blockquote><h2 id="e68f" class="ly lb iq bd lc lz ma dn lg mb mc dp lk jy md me lo kc mf mg ls kg mh mi lw mj bi translated">1.2.7zip</h2><p id="4684" class="pw-post-body-paragraph jn jo iq jp b jq mk js jt ju ml jw jx jy mm ka kb kc mn ke kf kg mo ki kj kk ij bi translated">7 需要 zip 来解压缩我们将在本指南中下载的. tar.gz 归档文件。</p><h1 id="2437" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">2.下载阿帕奇猪</h1><p id="81e5" class="pw-post-body-paragraph jn jo iq jp b jq mk js jt ju ml jw jx jy mm ka kb kc mn ke kf kg mo ki kj kk ij bi translated">要下载 Apache Pig，您应该访问以下链接:</p><ul class=""><li id="b1cf" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated"><a class="ae ku" href="https://downloads.apache.org/pig/" rel="noopener ugc nofollow" target="_blank">https://downloads.apache.org/pig/</a></li></ul><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9c499fd074d8a736c91ad980926fc6aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*pb3pyEBM-vgjXeb0vkW8mA.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 1 — Apache Pig 发布目录</p></figure><p id="b15f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你正在寻找最新版本，导航到“最新”目录，然后下载 pig-x.xx.x.tar.gz 文件。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/6824be525a25c9f69394a350f4bae6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*vAyoqKiAQ4LxqkZjgigQsw.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 2 —下载 Apache Pig 二进制文件</p></figure><p id="857a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件下载后，我们应该用 7zip <em class="ms">解压两次(用 7zip:第一次解压. tar.gz 文件，第二次解压。tar 文件)。</em>我们将把 Pig 文件夹提取到“E:\hadoop-env”目录中，就像在以前的文章中使用的那样。</p><h1 id="22d4" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">3.设置环境变量</h1><p id="a73d" class="pw-post-body-paragraph jn jo iq jp b jq mk js jt ju ml jw jx jy mm ka kb kc mn ke kf kg mo ki kj kk ij bi translated">提取 Derby 和 Hive 档案后，我们应该进入控制面板&gt;系统和安全&gt;系统。然后点击“高级系统设置”。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi nj"><img src="../Images/24eb934ebd13ba98aebc58ccfd27577a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FSVFHZNsU6o2B9ReMywe1Q.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 3-高级系统设置</p></figure><p id="2511" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在高级系统设置对话框中，点击“环境变量”按钮。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi no"><img src="../Images/f7481ca50e4945d2ba982da291590555.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*m5gMwhlfmakHOUCBQeggzQ.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 4 —打开环境变量编辑器</p></figure><p id="5849" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们应该添加以下用户变量:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi np"><img src="../Images/acd7b9eb41d0a1fa963006c2506e213d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*blWGC2Tj5l3R5Tcb6bdVyA.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 5 —添加用户变量</p></figure><ul class=""><li id="38fc" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">PIG _ HOME:" E:\ Hadoop-env \ PIG-0 . 17 . 0 "</li></ul><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/15d56d854488418de11c3266b7cc7b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*B3DoL0H1WYff1-fWUBK8MA.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 6 —添加 PIG_HOME 变量</p></figure><p id="7242" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们应该编辑 Path 用户变量以添加以下路径:</p><ul class=""><li id="639a" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">%PIG_HOME%\bin</li></ul><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/588ace1d6586a25c345af75896983ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*ZoXoknTO6tMP9A0CNyywbA.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 7 —编辑路径变量</p></figure><h1 id="4062" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">4.启动阿帕奇猪</h1><p id="6bc7" class="pw-post-body-paragraph jn jo iq jp b jq mk js jt ju ml jw jx jy mm ka kb kc mn ke kf kg mo ki kj kk ij bi translated">设置完环境变量后，我们来试着运行 Apache Pig。</p><blockquote class="mp mq mr"><p id="e782" class="jn jo ms jp b jq jr js jt ju jv jw jx mt jz ka kb mu kd ke kf mv kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong> : Hadoop 服务必须正在运行</p></blockquote><p id="de8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以管理员身份打开命令提示符，并执行以下命令</p><pre class="mx my mz na gt ns nt nu nv aw nw bi"><span id="aa6b" class="ly lb iq nt b gy nx ny l nz oa">pig -version</span></pre><p id="507b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将收到以下异常:</p><pre class="mx my mz na gt ns nt nu nv aw nw bi"><span id="93ec" class="ly lb iq nt b gy nx ny l nz oa">'E:\hadoop-env\hadoop-3.2.1\bin\hadoop-config.cmd' is not recognized as an internal or external command,<br/>operable program or batch file.<br/>'-Xmx1000M' is not recognized as an internal or external command,<br/>operable program or batch file.</span></pre><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi ob"><img src="../Images/2e8ca7d2d095a724c4c0e8e281d7ac0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zFUaMDFADy06wQqOUGydYw.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 8-清管器异常</p></figure><p id="f1c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要修复此错误，我们应该编辑位于“pig-0.17.0\bin”目录中的 pig.cmd 文件，方法是将 HADOOP_BIN_PATH 值从“%HADOOP_HOME%\bin”更改为“%HADOOP_HOME%\libexec”。</p><p id="335c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们再次尝试运行“pig -version”命令:</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/207c053dca048df04c2d25d37ddfae6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*eQIW_Xb-w7fCZiKQSaDH4A.png"/></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 9-清管器安装已验证</p></figure><p id="e48c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编写 PigLatin 语句最简单的方法是使用 Grunt shell，这是一个交互式工具，我们可以在其中编写语句并获得所需的输出。有两种模式涉及 Grunt Shell:</p><ol class=""><li id="2939" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk od kr ks kt bi translated">本地:所有脚本都在一台机器上执行，不需要 Hadoop。(命令:pig -x local)</li><li id="9d83" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk od kr ks kt bi translated">MapReduce:在 Hadoop 集群上执行脚本(命令:pig -x MapReduce)</li></ol><p id="5744" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于我们安装了与 Pig 0.17.0 不兼容的 Apache Hadoop 3.2.1，我们将尝试使用本地模式运行 Pig。</p><figure class="mx my mz na gt nb gh gi paragraph-image"><div role="button" tabindex="0" class="nk nl di nm bf nn"><div class="gh gi oe"><img src="../Images/be3225d4a66e545fe8a991491d4aacc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8V90JYeHyB6gnkLQATkzvg.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">图 10 —在本地模式下启动 Grunt Shell</p></figure><h1 id="1e35" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">5.参考</h1><ol class=""><li id="a42a" class="kl km iq jp b jq mk ju ml jy of kc og kg oh kk od kr ks kt bi translated">Stackoverflow.com 问答网站</li><li id="4468" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk od kr ks kt bi translated">阿帕奇猪官网</li><li id="6255" class="kl km iq jp b jq kv ju kw jy kx kc ky kg kz kk od kr ks kt bi translated">解决方案 Mandi: <a class="ae ku" href="https://www.solutionmandi.com/2018/11/pig-installation-on-windows-10.html" rel="noopener ugc nofollow" target="_blank">在 Windows 10 上安装 Pig</a></li></ol></div></div>    
</body>
</html>