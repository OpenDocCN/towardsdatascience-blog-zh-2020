<html>
<head>
<title>How I turned my older laptop into a Machine Learning Superstar with an eGPU</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何用eGPU将我的旧笔记本电脑变成机器学习超级明星的</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-i-turned-my-older-laptop-into-a-machine-learning-superstar-with-an-egpu-66679aa27a7c?source=collection_archive---------6-----------------------#2020-04-13">https://towardsdatascience.com/how-i-turned-my-older-laptop-into-a-machine-learning-superstar-with-an-egpu-66679aa27a7c?source=collection_archive---------6-----------------------#2020-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2aaf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以新电脑的零头成本改造超极本的惊人简单之旅</h2></div><p id="fbfb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几年前的2016年初，在佐治亚理工学院(Georgia Institute of Technology)读本科的过程中，我试图用一台使用了5年的笔记本电脑获得计算机科学学位，这台电脑的硬盘出现了故障。我需要升级。新的英特尔Skylake处理器和Dell XPS 15 9550让我惊叹于超极本的外形和功能，所有这一切，加上专用的NVIDIA移动GPU，我想我会准备好多年。</p><p id="1dce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我准备好了。事实上，我正在同一台笔记本电脑上写这个故事，从我拿到它的那天起，它就没有慢过一点。直到年，我开始攻读人工智能和机器学习的硕士课程。我被分配了一个经典的深度学习任务，这个任务现在已经解决了，但在计算机视觉方面证明是一个很好的学习机会，训练一个CNN解决<a class="ae le" href="https://en.wikipedia.org/wiki/CIFAR-10" rel="noopener ugc nofollow" target="_blank"> CIFAR-10。</a> CIFAR-10是由10类低分辨率(32×32)图像组成的数据集，任务是训练一个模型，将新图像正确分类到这10类中的一类。它被广泛用作教材，因为低分辨率允许快速训练。至少我是这么认为的。一个多层的CNN开始需要几个小时甚至一个晚上来训练，而这本来应该是一个简单的任务。突然，可靠的Skylake I7(现在已经有3代以上的历史了)和2gb的专用GPU RAM开始显示出磨损的迹象。</p><p id="721f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我知道我需要一个解决方案，所以我头脑风暴从头开始构建一个桌面PC。要获得一台中高档的当前一代机器学习台式机，至少需要花费1100美元(配备i5 6内核CPU和RTX 3070)，此外，作为一名喜欢在校园工作的研究生，1100美元的PC将我限制在一个单独的位置，或者需要许多同步措施才能在两个位置工作。我可以买一台当前一代的超极本，它配备的GPU有时和3050-Ti一样好，但这些型号很容易就超过2000美元，并且不具备台式机用于培训的能力。</p><p id="45eb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这促使我对像我这样的人的最佳解决方案进行了大量的研究。我有一台可靠但较旧的计算机，忙碌的生活让我忙个不停，需要更多的处理能力，并且希望在不倾家荡产的情况下将所有这些都放在一个地方。我知道，我的要求很多，但我确实找到了一个解决方案eGPU。</p><p id="cbeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">外部GPU是一种允许您使用thunderbolt 3端口将显卡连接到现有电脑的设备。如果你有一台超极本PC 2017或更高版本(像我一样)，或者MacBook Pro 2016或更高版本，你可能已经有了，因此可以使用eGPU来彻底改造你的笔记本电脑。一个eGPU在设计上也相对简单，在其核心，它所包含的只是一个连接GPU的PCIe端口，一个连接计算机的thunderbolt 3端口，一个电源(GPU需要的功率远远超过你的计算机所能提供的)，以及为你的GPU散热。你可以一起DIY所有这些组件，或者你可以像我一样采取更简单的方法，找到一个包含端口和电源的<a class="ae le" href="https://egpu.io/best-egpu-buyers-guide/" rel="noopener ugc nofollow" target="_blank"> GPU外壳</a>，将搜索减少到2个部分，一个GPU和一个外壳。</p><p id="3fcc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我决定了我的行动路线，尝试eGPU，是时候我去网上搜索，尝试找到最好的交易了。巧合的是，我的两笔交易都来自一个叫做Letgo的买家卖家应用。我以260美元的价格买到了一台英伟达GTX 1080 8GB(我能在网上找到的最便宜的价格是375美元)，作为一个附件，我能找到有人以280美元的价格出售Razer Core v2(在易贝的售价约为400美元)，这使我的总构建成本为540美元，从而获得了完全增强的笔记本电脑体验。</p><p id="7350" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不是每个人都像我一样想要交易hunt，所以我也评估了创建一个ML eGPU的最佳选项，价格约为500美元，完全在线，订购所有零件不超过10分钟。我会推荐一个NVIDIA 1660-Ti 6GB，给出类似的GPU能力(稍微降级)，280美元，还有一个翻新的Razer Core X，270美元就可以从Razer那里买到。如果你愿意多花一点钱买一个更好、更新的GPU，RTX 3060 8GB会更经得起未来考验，但价格也要400美元。如果您正在考虑改造Macbook，可能值得考虑AMD处理器，因为它们在苹果生态系统中的支持水平有所提高。</p><p id="3a8d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我造好了机器，我就开始量化我的经验。GTX 1080比我以前的移动GPU有多大的改进？为了解决这个任务，我使用了<a class="ae le" href="https://pypi.org/project/ai-benchmark/" rel="noopener ugc nofollow" target="_blank"> AI-benchmark </a>，这是一个Python库，它利用Tensorflow在19个不同的部分上运行<a class="ae le" href="http://ai-benchmark.com/alpha" rel="noopener ugc nofollow" target="_blank"> 42个测试，为GPU提供了一个很好的广义AI分数。我将AI-Benchmark与Jupyter笔记本、pandas和一个名为Seaborn的可视化工具相结合，以量化我的结果。代码可以在Github </a><a class="ae le" href="https://github.com/jeremydiba/GPU-benchmark" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="3b7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个结果是关于单个测试及其运行时间(毫秒)。我只包括了19个测试中的第1到第9个，因为大量的结果会让人眼花缭乱。我的GTX 960m GPU(XPS自带的GPU)也遇到了一个大问题。因为它只有2GB的显卡，它没有通过大量的测试，因为张量太大了，不适合2GB的卡。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/69f7974e9c635bc9ff2c990852ed0e8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*zKduTnQZimMkCKsleIM9yQ.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">测试1至9</p></figure><p id="f189" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个测试的结果非常清楚。集成显卡绝不适合机器学习，即使它比移动GPU更稳定。这些测试运行的时间都要长得多，甚至会导致简单的任务运行得非常慢。当谈到任务的速度时，GTX 960M实际上保持了自己的。然而，它的不足之处在于可靠性。只有2GB的内存是一个巨大的障碍，将导致您不得不牺牲模型的大小，以便能够适应这样一个严重的限制。出于这个原因，GTX 960M远不适合现代深度学习。然而，8GB内存的GTX 1080完美地运行了所有任务，并在实际运行的任务中提供了比GTX 960M大约3倍的速度升级。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/ef7458f01fb0cbea75c1b2909bc455da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*UQUomxWaVKq95E4BLEi88w.png"/></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">3项测试的总结</p></figure><p id="d42d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">AI-benchmark还会在测试结束后创建一个综合分数(越高越好)。请注意，GTX 960米基准是推断出来的。由于测试无法完成，因此无法获得总分。正因为如此，我从<a class="ae le" href="http://ai-benchmark.com/ranking_deeplearning.html" rel="noopener ugc nofollow" target="_blank"> AI-Benchmark的结果</a>测试的类似GPU中推断出分数。替代的GPU使用相同的架构，在成功运行的测试中，性能相差不到百分之几。显而易见，GTX 1080击败了所有自动化测试，并在可靠性和速度方面取得了可观的进步。基于这一结果，很明显eGPU是其昂贵替代品的绝佳替代品，的确如此，但我对此有一个警告。</p><p id="b780" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尽管与XPS本身相比，结果令人震惊，但与集成GPU相比，使用eGPU可能会带来速度损失。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/84ce75530a4025fda6fa6d778c73db6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVOGehANdEX3zuZ8y7l4zQ.png"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">带有基准的摘要</p></figure><p id="2145" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当将我得到的基准与AI基准达到的顶级基准<a class="ae le" href="http://ai-benchmark.com/ranking_deeplearning.html" rel="noopener ugc nofollow" target="_blank">进行比较时，它还有很多需要改进的地方。我预计雷电3端口的带宽会导致10%到15%的性能损失，但是这些测试显示分数明显下降了30%,我有一个关于原因的假设。</a></p><p id="edc2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">XPS 15 9550和9650型号虽然声称完全支持thunderbolt 3，但硬件上限为2通道，而不是宣传的4通道(戴尔后来解决了这一问题)。我的假设是，这是在雷电港造成了瓶颈。在未来的版本中，我可能会用MacBook(有4个通道可用)来运行这些测试，以证实我的怀疑。如果我是正确的，我应该在MacBook上看到AI得分超过1400。<a class="ae le" rel="noopener" target="_blank" href="/why-is-thunderbolt-3-such-a-huge-deal-and-why-apple-loves-them-614542d32dc2">这篇文章也印证了我的怀疑！</a></p><p id="639a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这让我想到了我的一般建议——这是一个可行且经济的选择吗？</p><p id="d39c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我会说绝对的。即使分数没有达到基准，这台540美元的电脑升级到曾经1500美元的电脑已经延长了它的生存能力。仅仅是拥有2GB GPU和8GB GPU之间的差异就足以让这件事值得去做。如果你的笔记本电脑只有集成显卡，如果你想用它进行深度学习，我甚至会说这种升级是必须的。</p><p id="2156" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不建议这种升级的唯一方式是，如果你的笔记本电脑已经有4GB的GPU RAM和至少一个GTX 1050-Ti GPU。如果是这样的话，您不太可能看到性能的巨大提高，并且只有当您发现自己需要更多的RAM来处理更重的任务时，eGPU才真正值得您花钱。</p><h2 id="bba4" class="lx ly it bd lz ma mb dn mc md me dp mf kr mg mh mi kv mj mk ml kz mm mn mo mp bi translated">结论和后续行动</h2><p id="46f9" class="pw-post-body-paragraph ki kj it kk b kl mq ju kn ko mr jx kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">如果你喜欢这篇文章，我<a class="ae le" href="https://medium.com/@jeremydibattista_28827/deep-learning-on-a-budget-450-egpu-vs-google-colab-494f9a2ff0db" rel="noopener">写了另外一篇文章</a>比较这个eGPU和Google Colab！如果你喜欢这篇文章，它值得一读，在<a class="ae le" href="https://jerdibattista.medium.com/why-is-thunderbolt-3-such-a-huge-deal-and-why-apple-loves-them-614542d32dc2" rel="noopener">这篇文章</a>的另一篇后续文章中，我测试了当连接速度提高到40 Gbps时会发生什么。如果你喜欢这个内容，请用我<a class="ae le" href="https://jerdibattista.medium.com/membership" rel="noopener">作为推荐人</a>，这样我就可以继续发布我喜欢的内容。</p></div></div>    
</body>
</html>