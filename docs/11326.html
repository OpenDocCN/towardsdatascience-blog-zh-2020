<html>
<head>
<title>How to Obtain and Analyse Fitbit Sleep Scores</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何获取和分析 Fitbit 睡眠评分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-obtain-and-analyse-fitbit-sleep-scores-a739d7c8df85?source=collection_archive---------7-----------------------#2020-08-06">https://towardsdatascience.com/how-to-obtain-and-analyse-fitbit-sleep-scores-a739d7c8df85?source=collection_archive---------7-----------------------#2020-08-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a5b678e980ac28715558a084682c7eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*swHm9yr2dO890DBS"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">凯利·西克玛在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="bf5e" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">准备用于机器学习模型的 Fitbit 睡眠数据并了解睡眠评分的工作原理</h2></div><p id="db23" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">智能手表和其他可穿戴设备在过去几年里越来越受欢迎，并催生了“量化自我”的文化现象。Apple Watch 或 Fitbit 等设备让任何人都有可能轻松地自我跟踪，从而以某种方式量化他们的生活。流行的自我量化包括消耗的卡路里，白天走的步数或睡眠质量。</p><p id="bd46" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将使用使用 Fitbit 大约一年的真实生活数据，重点关注后者，即睡眠质量。Fitbit 为用户提供了一个睡眠评分，这应该是衡量睡眠质量的一个指标。我将使用 Python 训练和测试不同的机器学习模型，试图尽可能准确地预测 Fitbit 睡眠分数，同时解释不同的指标，如 REM 睡眠分钟数，如何影响分数。</p><p id="164e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这篇文章的结构如下:</p><ol class=""><li id="6c37" class="lu lv jj la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">Fitbit 睡眠评分简介</li><li id="b099" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">从 Fitbit 获取睡眠数据</li><li id="5e2b" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">数据清理和准备</li><li id="255e" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">探索性数据分析</li><li id="8ea6" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">将数据分为训练集、验证集和测试集</li><li id="cf68" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">扩展功能和定义性能指标</li><li id="ae2f" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">使用套索回归的特征选择</li><li id="72c8" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">多元线性回归</li><li id="5c5b" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">随机森林回归量</li><li id="3043" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">极端梯度推进回归器</li><li id="2f48" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">交叉验证</li><li id="5989" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">超参数调谐</li><li id="4791" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">最终模型评估</li><li id="35aa" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt lz ma mb mc bi translated">结论意见</li></ol><p id="67be" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为涉及的内容很多，所以我把这篇文章分成三部分。第 1 部分包括第 1 点到第 4 点，重点是获取睡眠数据、预处理和可视化。<a class="ae jg" href="https://medium.com/@bennerjonas10/using-machine-learning-to-predict-fitbit-sleep-scores-496a7d9ec48" rel="noopener">第 2 部分</a>涵盖了第 5 点至第 10 点，即基于第 1 部分的预处理数据实际构建机器学习模型。<a class="ae jg" href="https://medium.com/@bennerjonas10/cross-validation-and-hyperparameter-tuning-how-to-optimise-your-machine-learning-model-13f005af9d7d" rel="noopener">第 3 部分</a>涵盖了剩下的部分，全部是关于改进第 2 部分的模型，以获得最准确的预测。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="7af0" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">Fitbit 睡眠评分到底是多少？</h1><p id="451c" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">Fitbit 睡眠评分最好通过一个例子来描述，所以这里有两个应用程序提供给用户的截图:</p><div class="nm nn no np gt ab cb"><figure class="nq iv nr ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/802e6f3a433a1d21654411945b967a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*kFC4zJFbrLzadJnY4se5ow.jpeg"/></div></figure><figure class="nq iv nr ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/95e8161406caf15e5398845a60ffe3a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*qbEfJN40kjBDnHvIwa9a6A.jpeg"/></div><p class="jc jd gj gh gi je jf bd b be z dk nw di nx ny translated">Fitbit 提供的睡眠统计数据</p></figure></div><p id="4799" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 Fitbit 应用程序中，用户会得到一个睡眠分数，在这种情况下为 78 分，这是一个睡眠窗口中睡眠阶段的图形表示，这些睡眠阶段的具体细分为分钟和百分比，以及估计的氧气变化。</p><p id="2c31" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这本身似乎相当简单明了。Fitbit 只是有一些算法，他们插入相关的睡眠统计数据，如快速眼动睡眠的分钟数，并给出睡眠分数。</p><p id="8802" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于任何一个有 Fitbit 的人来说，如果他曾经试图理解他们睡眠分数的模式，很明显这远非一目了然。下面的截图会让你明白困惑是从哪里来的:</p><div class="nm nn no np gt ab cb"><figure class="nq iv nr ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/20b3e8e416a2e0ec36f643ec561c450a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*0FkygQwBEqEj0RApTFoFVw.jpeg"/></div></figure><figure class="nq iv nr ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/00b7b56ebe6e1b46f37dcd5bb98d3091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*yDmEmM2TDn-Q2Jv-YChmQw.jpeg"/></div><p class="jc jd gj gh gi je jf bd b be z dk nw di nx ny translated">Fitbit 提供更多睡眠统计数据</p></figure></div><p id="d373" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将这些睡眠统计数据与最初的数据进行比较，我们可以得出以下结论:</p><ul class=""><li id="e65a" class="lu lv jj la b lb lc le lf lh lw ll lx lp ly lt nz ma mb mc bi translated">睡眠时间比一小时长</li><li id="d9c1" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt nz ma mb mc bi translated">快速眼动睡眠的时间几乎是一样的</li><li id="9a62" class="lu lv jj la b lb md le me lh mf ll mg lp mh lt nz ma mb mc bi translated">深度睡眠的时间更长</li></ul><p id="c9a9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">基于这些观察，人们会认为第二次睡眠得分会比第一次高，但实际上是一样的。这是怎么回事？不同的统计数据在睡眠分数的计算中起什么作用？只看提供的睡眠统计数据，有可能自己预测睡眠分数吗？</p><p id="38ce" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文回答了所有这些问题，并详细介绍了一个机器学习项目。我希望你喜欢它！</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="b7b2" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">从 Fitbit 获取睡眠数据</h1><p id="0398" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">Fitbit 允许用户通过他们的在线仪表盘导出 CSV 文件形式的睡眠数据。这个过程需要一些手工劳动，因为 Fitbit 一次最多只能导出 31 天的数据。几分钟后，我得到了所有的数据，并迅速将它们合并成一个 CSV 文件。</p><p id="5f4e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一个问题。手动导出的 CSV 文件包括所有睡眠统计数据(睡眠分钟数、清醒分钟数、自由睡眠分钟数等)。)但不包括实际的睡眠分数。搞什么鬼？！</p><p id="e1f9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">经过一番挖掘，我发现还有另一个名为“终身导出”的导出选项，它可以导出 Fitbit 从你开始佩戴他们的手表以来收集到的所有数据。在下载之前，你必须从 Fitbit 请求这个导出，一旦获得批准，你就可以下载一个包含各种不同文件的 zip 文件夹。该 zip 文件夹中包含一个 CSV 文件，其中包含额外的睡眠统计数据，包括睡眠评分。</p><p id="d5a7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将包含睡眠统计数据的 csv 文件保存为 sleep_stats.csv，将包含睡眠分数的 CSV 文件保存为 sleep_score.csv。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="7532" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">数据清理和准备</h1><p id="8f7a" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">本节解释了如何从 CSV 文件获取可用于机器学习模型的数据帧。在这个过程中，我遇到了一些将数据导入 Python 时可能出现的常见问题，我解释了如何处理这些问题，以便最终得到一个经过整齐预处理的数据集。</p><p id="3df6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导入所有相关的库后(参见<a class="ae jg" href="https://github.com/JoBe10/Fitbit-Sleep-Score/blob/master/Sleep_Scores/Fitbit_Sleep_Score_Prediction.ipynb" rel="noopener ugc nofollow" target="_blank">完整笔记本</a>中的库),第一步是使用 pd.read_csv()函数将 CSV 文件中的睡眠数据导入 Python:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="a826" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我只导入 sleep_score.csv 的前两列，因为它们包含日期和实际睡眠分数，所有其他相关数据都可以在 sleep_stats.csv 中找到。让我们来看看 sleep_stats_data 中的前五行:</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/c97410f88b92c06bf632776c155875ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EY0qHkyV5ZzF5YqDn38LYQ.png"/></div></div></figure><p id="91ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是第一个常见问题:由于 CSV 文件的结构方式，列名位于第一行。有一种方法可以解决这个问题:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="9ac5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用。info()函数我们可以获得数据帧中数据的高级摘要，在我们的例子中，它看起来像这样:</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/a164de0cadd4c88f79ffb968bf6ab30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*EsQG69bxB6pfPy8kkUi_iQ.png"/></div></figure><p id="100e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里，我们遇到了第二个常见问题:最后三列中有 NaN 值(缺失数据)。上面的信息摘要告诉我们有 322 个条目(行),但是最后三行的非空计数是 287，这表明了这一点。让我们使用下面的代码来看看包含缺失数据的行:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/594fba79468e161043cd35b37358fc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbLtufT3w8dr0_lH21K-6w.png"/></div></div></figure><p id="f5a3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们查看“入睡时间”或“开始和结束时间”一栏，就会清楚地看到这些行指的是 Fitbit 记录的午睡。小睡时间太短，Fitbit 无法可靠地测量重要的睡眠统计数据，因此我们将从数据集中删除所有这些行:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="3bc2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的数据摘要中，我们还遇到了第三个常见问题，它与第一个问题相关:所有列的数据类型都是“object ”,但索引为 2 到 8 的列显然应该是数值型的，即数据类型要么是“int ”,要么是“float”。这些列的数据类型为“object”的原因很可能是因为列标题最初放在第一行，从而导致整个列被归类为“object”。让我们将这些列转换为数据类型“float”:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="5178" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在让我们看看前几行和 sleep_score_data 的摘要:</p><div class="nm nn no np gt ab cb"><figure class="nq iv of ns nt nu nv paragraph-image"><img src="../Images/4e5559abb393a83fc03f6215ffc51600.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/format:webp/1*O0PiwIi2ZcbSODD1XWWQvQ.png"/></figure><figure class="nq iv og ns nt nu nv paragraph-image"><img src="../Images/612e0853b9740b84310876e99c80893f.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*wMkxrVIsDDT6NZCrA1AvHw.png"/></figure></div><p id="853b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个数据框架看起来好多了，列标题被自动识别，没有丢失值。</p><p id="2961" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">出于进一步分析的目的，我想将两个数据帧合并成一个，这意味着我想将它们合并。为了确保睡眠分数最终出现在对应睡眠统计数据的行中，我需要一个在两个数据帧中都相同的列，它将被用作合并的列。</p><p id="65dc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的例子中，两个数据帧都有一个带有某种时间戳的列。睡眠统计数据帧具有开始和结束时间，睡眠分数数据帧具有时间戳。因为睡眠分数总是在醒来后提供，所以睡眠统计数据帧中相关的日期是结束时间，我们可以去掉开始时间。但是还有一个问题:睡眠统计数据帧中结束时间的格式不同于睡眠分数数据帧中时间戳的格式。如果我们试图合并这些列上的数据帧，这些行将不会匹配。我的解决方案是在两个数据帧中创建一个只包含日期的“Date”列，合并这些列上的数据帧，删除多余的列，并在合并后删除一个包含缺失值的行。以下代码实现了这一点:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="7900" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">生成的组合数据帧如下所示:</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/b6990772a0a439d04f5cc7d72f74622b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhrluAr9Qfi9J2V2qncVOg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">合并和预处理的数据</p></figure><p id="8138" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我删除了所有与日期相关的列，因为这不是时间序列分析，我们不需要未来的日期。Fitbit 应用程序没有提供醒来的次数，因为我想只使用应用程序中提供的数据来预测睡眠分数，所以我也放弃了它。</p><p id="a215" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有了经过组合和预处理的数据框架，我们可以继续进行一些探索性的数据分析。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="7951" class="mp mq jj bd mr ms mt mu mv mw mx my mz kp na kq nb ks nc kt nd kv ne kw nf ng bi translated">探索性数据分析</h1><p id="c30a" class="pw-post-body-paragraph ky kz jj la b lb nh kk ld le ni kn lg lh nj lj lk ll nk ln lo lp nl lr ls lt im bi translated">在这一节中，我将使用可视化来提供对底层数据的更好理解。这些初步的见解将成为以后分析的基础。</p><p id="48a1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先让我们来看看睡眠分数的分布:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oi"><img src="../Images/17ef6fc30899087920ecaf5e9dea51f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_9Kf7vrsJ1opEutj1dkTA.png"/></div></div></figure><p id="45fb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">睡眠得分的分布向左倾斜，这是有道理的，因为由于多种原因，如熬夜或不得不早起，晚上睡不好比晚上睡得特别好更容易发生。此外，平均睡眠分数已经相对较高，为 82 分(满分为 100 分)，因此不太可能(基本上不可能)出现许多远高于平均值的异常值。</p><p id="c6bd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们也来看看每个特征与睡眠分数的关系，以了解哪些特征可能是重要的，以及它们与睡眠分数的关系。我已经定义了一个函数，它将一个数据帧作为输入，该数据帧包含最后一列中的目标变量以及整个绘图中包含的列数。列的数量决定了每行有多少支线剧情。下面是函数:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="b5ab" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用 sleep_data 数据帧和 num_cols=3 作为输入来调用此函数会产生以下图形:</p><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/8a6889f8d95bfa57bde4d1d3557f2716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMkSJXufdlvhxYZlqwJVeA.png"/></div></div></figure><p id="5f39" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单独来看，睡眠分钟数和快速眼动睡眠分钟数似乎与睡眠得分有最强的正相关。一般来说，这是有道理的，因为当考虑睡眠质量和睡眠分数时，更多的睡眠时间应该是一件积极的事情。快速眼动睡眠时间延长也是如此。</p><p id="7709" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了完整地描述不同特征和睡眠评分之间的关系，我们来看看相关矩阵:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/ec5d0ece036ce989141d302017b1d61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*UjNDGmd1HsP_Ye4QmGvOBw.png"/></div></figure><p id="5cd1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，睡眠分数与快速眼动睡眠分钟数相关性最高，紧随其后的是睡眠分钟数。另一个需要注意的重要事情是，许多特性是高度相关的。这是有道理的，因为更多的睡眠时间应该导致更多的时间花在睡眠的各个阶段，并且这些特征将会一起移动。虽然这可能是此处包含的要素的性质不可避免的副产品，但它可能会导致多重共线性问题。稍后将详细介绍。</p><p id="8cc7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二部分基于预处理数据和探索性数据分析的见解，建立了两个不同的预测睡眠分数的机器学习模型。第 2 部分可以在这里找到:</p><div class="is it gp gr iu ol"><a href="https://medium.com/@bennerjonas10/using-machine-learning-to-predict-fitbit-sleep-scores-496a7d9ec48" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd jk gy z fp oq fr fs or fu fw ji bi translated">使用机器学习来预测 Fitbit 睡眠分数</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">随机森林、极端梯度推进以及它们在预测 Fitbit 睡眠分数时的表现</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ja ol"/></div></div></a></div></div></div>    
</body>
</html>