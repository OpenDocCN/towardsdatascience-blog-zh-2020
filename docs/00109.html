<html>
<head>
<title>Top 3 Methods for Handling Skewed Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理倾斜数据的三大方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-methods-for-handling-skewed-data-1334e0debf45?source=collection_archive---------1-----------------------#2020-01-04">https://towardsdatascience.com/top-3-methods-for-handling-skewed-data-1334e0debf45?source=collection_archive---------1-----------------------#2020-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4864" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">真实世界的数据可能会很混乱。甚至一些学习数据集包含的属性在用于预测建模之前需要进行严格的修改。</p><p id="4590" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这很好。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9219f52b7e1181c575fe99f9fbb09f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IbRY6w6uR9jRQwCn"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@ninjason?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">梁杰森</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1875" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们以线性回归模型为例。你可能已经知道了这一点，但是模型对你提供的数据做了大量的<strong class="js iu">假设</strong>，例如:</p><ol class=""><li id="9045" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated"><strong class="js iu">线性</strong>:假设预测值和目标变量之间的关系是线性的</li><li id="ad8f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">无噪声:例如，数据中没有异常值</li><li id="078f" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><strong class="js iu">无共线性</strong>:如果您有高度相关的预测值，那么您的模型很可能会过拟合</li><li id="97fb" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><strong class="js iu">正态分布</strong>:如果预测值和目标变量呈正态分布，则预测更可靠</li><li id="380b" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated"><strong class="js iu">缩放</strong>:这是一种基于距离的算法，所以预测器应该被缩放——就像标准缩放器一样</li></ol><p id="8c14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于一个简单的模型来说，这已经很多了。今天我想重点谈谈第四点，那就是预测值和目标变量应该遵循高斯分布。</p><p id="a459" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这并不总是可能做到的，因此你不能将任何分布转换成完美的正态分布，但这并不意味着你不应该尝试。</p><p id="9a04" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，让我们加载一个简单的数据集并施展魔法。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="dd9f" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">数据集</h1><p id="f3b1" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">我将使用熟悉的<strong class="js iu">波士顿房价</strong>数据集来探索一些处理扭曲数据的技巧。</p><p id="3919" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">没有必要下载它，因为你可以直接从<em class="nd"> Scikit-learn </em>导入它。下面是所有导入和数据集加载的代码:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/b1453efdadb51c5ab465173c5617d4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*hGqUqAU3yxO-hltpH00BuA.png"/></div></figure><p id="ff4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在执行时，将显示前几行，您应该得到和我一样的输出:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/91c1e8e0bbfd06e08d7bdd4106a8c4ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*rVdRECHzkOgfTqEPo6HmHg.png"/></div></figure><p id="af3f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不想探究所有的变量，因为我之前已经做过一些测试，并得出了变量<code class="fe ng nh ni nj b">CRIM</code>具有最高偏斜的结论。下面是验证我的声明的代码:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/ea0872ca031b6667289b06e122e4e209.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*tIAvK-QyxQAcZlaXljKxHA.png"/></div></div></figure><p id="5dff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">酷毙了。现在你可以使用<em class="nd"> Seaborn </em>库制作一个柱状图，旁边是 KDE 图，看看我们在处理什么:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/825af7fa38cb1d6be1bbbd69f272319f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ce4k66_AGRgmia_8eLq-TA.png"/></div></div></figure><p id="8d45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这当然不符合正态分布。是的，如果你想知道我是如何从糟糕的默认可视化中摆脱出来的，这里有一篇文章你应该看看:</p><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/the-last-matplotlib-tweaking-guide-youll-ever-need-dbd4374a1c1e"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">您需要的最后一个 Matplotlib 调整指南</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">默认的 Matplotlib 样式已经过时了——但是我们可以做些什么</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ky no"/></div></div></a></div><p id="53a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好了，现在我们已经讨论过了，让我们来探索一些处理偏斜数据的方法。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="6c1d" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">1.对数变换</h1><p id="d2c6" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">对数变换很可能是您应该做的第一件事，以消除预测器的偏斜。</p><p id="f84a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可以通过<em class="nd"> Numpy </em>轻松完成，只需调用所需列上的<code class="fe ng nh ni nj b">log()</code>函数。然后，您可以轻松地检查偏斜:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/62ba7d560426ace244d0c91016084ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*8RK_Q3HnxUWMnkoiQ5Pf6g.png"/></div></figure><p id="6e1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这样，我们的偏斜系数从 5.2 降到了 0.4。但在下结论之前，我们还应该快速想象一下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi od"><img src="../Images/6fbf289c66814e76429a432f05d31053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbA7BzA5r1JejquSQXagJg.png"/></div></div></figure><p id="bfa6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">嗯，它肯定不是正态分布的，但比我们以前拥有的要好得多！</p><p id="655b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所料，对数转换不是您可以使用的唯一方法。让我们探索更多的选择。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="5761" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">2.平方根变换</h1><p id="5eab" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">平方根有时很有效，但有时并不是最好的选择。在这种情况下，我仍然希望转换后的分布看起来有点指数，但是由于取平方根，变量的范围会更小。</p><p id="8166" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过调用<code class="fe ng nh ni nj b">sqrt()</code>函数，使用<em class="nd"> Numpy </em>应用平方根变换。代码如下:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ed17422a1fb47b9d885e581d06b006c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*PgW7ginusblagmSIknMjGA.png"/></div></figure><p id="284d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">偏斜系数从 5.2 变为 2，这仍然是一个显著的差异。然而，日志转换最终得到了更好的结果。</p><p id="eccf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，让我们想象一下现在的一切:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oe"><img src="../Images/87ea99397c0873473d8d7d257d3f013c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLZNd2bJ26PDunDcunabJA.png"/></div></div></figure><p id="36e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">分布基本相同，但是范围比预期的要小。</p><p id="839b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在宣布 log 转换为赢家之前，让我们再探索一个。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="fc69" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">3.博克斯-考克斯变换</h1><p id="570f" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">这是我今天要探讨的最后一个转化方法。由于我不想深究背后的数学，这里有一篇<a class="ae le" href="https://www.statisticshowto.datasciencecentral.com/box-cox-transformation/" rel="noopener ugc nofollow" target="_blank">短文</a>给对那部分感兴趣的人。</p><p id="31fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你只需要知道这只是另一种处理扭曲数据的方式。要使用它，<strong class="js iu">你的数据必须是正的</strong>——所以有时会令人失望。</p><p id="f520" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以从<em class="nd"> Scipy </em>库导入它，但是检查倾斜需要将结果 Numpy 数组转换成 Pandas 系列:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/a4f8ef26b3d4ad7cecedabb1cd969b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*TwclaZVxI_KGmqGBB5yC4g.png"/></div></figure><p id="ac07" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">哇！偏斜仅从 5.2 下降到 0.09。不过，让我们看看转换后的变量是什么样子的:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi of"><img src="../Images/3301555b79e84fb7f87d63778b13dce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjgyRtY3sPpjpmp6t2U9Xg.png"/></div></div></figure><p id="31c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种分布与对数变换产生的分布非常相似，但我想说的是双峰分布稍微少了一点。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="7b7a" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">在你走之前</h1><p id="7c06" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">如果处理不当，扭曲的数据会破坏预测模型的能力。</p><p id="3da5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这应该是不言而喻的，但是你应该记住你对哪个属性执行了什么转换，因为在做预测的时候你必须<strong class="js iu">反转</strong>一次，所以要记住这一点。</p><p id="9d83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽管如此，这三种方法应该很适合你。</p><p id="0618" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nd">你在用什么转化方法？请告诉我。</em></strong></p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><p id="9ebe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢这篇文章吗？成为 <a class="ae le" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="nd">中等会员</em> </a> <em class="nd">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="nl nm gp gr nn no"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd iu gy z fp nt fr fs nu fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">medium.com</p></div></div><div class="nx l"><div class="og l nz oa ob nx oc ky no"/></div></div></a></div></div></div>    
</body>
</html>