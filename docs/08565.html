<html>
<head>
<title>How to send Python App Crash Notifications automatically via Email</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过电子邮件自动发送 Python 应用程序崩溃通知</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-send-python-app-crash-notifications-via-email-6fd5c156b49d?source=collection_archive---------43-----------------------#2020-06-21">https://towardsdatascience.com/how-to-send-python-app-crash-notifications-via-email-6fd5c156b49d?source=collection_archive---------43-----------------------#2020-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ef4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您在远程服务器上运行 Python 应用程序，您可能会不时遇到应用程序崩溃。并且您希望尽快知道发生了崩溃，以便尽快修复问题。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/07e7c77abb7596c509f462e68e959976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*08vYVUZFiR1OrL3t"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@jannerboy62?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尼克·费因斯</a>拍摄</p></figure><p id="26bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个小小的代码片段可以帮助你实现这一点。</p><ol class=""><li id="c58c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">导入所需的 Python 模块(电子邮件、日志和 io)</li><li id="2c2f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">定义电子邮件处理功能。您只需更新您的电子邮件服务器认证详情。</li><li id="0909" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">定义 Try/Except 循环，其中“Try”部分将包含您的主代码，“Except”部分将捕获应用程序崩溃，并将详细的崩溃描述发送到您定义的电子邮件地址。</li></ol><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="57f7" class="mo mp it mk b gy mq mr l ms mt">from email.mime.text import MIMEText<br/>from email.mime.multipart import MIMEMultipart<br/>from email.mime.base import MIMEBase<br/>from email import encoders<br/>import logging<br/>from io import StringIO<br/>import smtplib</span><span id="4329" class="mo mp it mk b gy mu mr l ms mt">def send_email_crash_notification(<em class="mv">crash_message</em>):</span><span id="c7e0" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">    </em>email = 'your_email@gmail.com'<br/>    send_to_email = 'receipent_email@gmail.com'<br/>    subject = 'Python application CRASHED!'</span><span id="664e" class="mo mp it mk b gy mu mr l ms mt">    msg = MIMEMultipart()<br/>    msg['From'] = email<br/>    msg['To'] = send_to_email<br/>    msg['Subject'] = subject<br/>    message = <em class="mv">crash_message<br/>    </em>msg.attach(MIMEText(message, 'plain'))<br/></span><span id="ad16" class="mo mp it mk b gy mu mr l ms mt"><em class="mv">    # Send the message via SMTP server.<br/>    </em>server = smtplib.SMTP('smtp.gmail.com', 587)<br/>    server.ehlo()<br/>    server.starttls()<br/>    server.login('your_email@gmail.com', 'your_password')<br/>    text = msg.as_string()<br/>    server.sendmail(email, send_to_email, text)<br/>    server.quit()<br/>    <em class="mv">print</em>('email sent to ' + <em class="mv">str</em>(send_to_email))</span><span id="4162" class="mo mp it mk b gy mu mr l ms mt">    return True<br/></span><span id="30bb" class="mo mp it mk b gy mu mr l ms mt">try:<br/>    <em class="mv">#Your main code will be placed here<br/>    print</em>(1+1)</span><span id="51c9" class="mo mp it mk b gy mu mr l ms mt">except <em class="mv">Exception </em>as e:<br/>    log_stream = StringIO()<br/>    logging.basicConfig(<em class="mv">stream</em>=log_stream, <em class="mv">level</em>=logging.INFO)<br/>    logging.error("Exception occurred", <em class="mv">exc_info</em>=True)<br/>    send_email_crash_notification(log_stream.getvalue())</span></pre><p id="dc55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读，我期待着阅读您的评论！</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><blockquote class="nd ne nf"><p id="769e" class="kz la mv lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">如果你觉得特别慷慨，<strong class="lb iu">你可以在<a class="ae ky" href="http://www.buymeacoffee.com/kingmichael" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">www.buymeacoffee.com/kingmichael</strong></a>给我买杯咖啡。你的支持将极大地帮助我保持动力，写出你喜欢的文章。</strong></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/ad1a67aa28b91407f5fa873fcf42f0d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DQXob8ZSoTFaEK61"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@peter_mc_greats?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">彼得罗·德·格兰迪</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div></div>    
</body>
</html>