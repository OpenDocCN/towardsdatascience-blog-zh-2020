<html>
<head>
<title>A/B Test Statistics Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B测试统计变得简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-b-test-statistics-made-easy-8805ac2533d6?source=collection_archive---------13-----------------------#2020-04-17">https://towardsdatascience.com/a-b-test-statistics-made-easy-8805ac2533d6?source=collection_archive---------13-----------------------#2020-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d044" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">第2部分:比例度量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d1a28209d60fcf98ccf6ff39f0c625e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEpjZgdgJ4Rlic0SjQHPwA.jpeg"/></div></div></figure><p id="f7f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">这篇文章将展示当输出指标是一个比例，比如客户转换率时，如何评估A/B测试的结果。这里我们利用了我们在<a class="ae lz" rel="noopener" target="_blank" href="/a-b-test-statistics-made-easy-4e94098758d9">第1部分:持续度量</a>中建立的统计基础，所以如果你需要复习，就从这里开始吧。</p><p id="1525" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">统计学可能是一门令人望而生畏的学科，但也不尽然。这些指南的目的是让人们更容易使用统计工具。本指南使用模拟数据来揭开主题的神秘面纱，并使关键的统计概念变得生动。尽情享受吧！</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="1386" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">1.模拟两个相同网站的转化率</h1><p id="aaa5" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">想象一下，我们拥有2个网站。每个网站以30%的比率将访问者转化为客户。让我们看看1000个访问者访问每个网站后会发生什么:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/c513af796b7fc985badb91663b9cf785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHWISKSNGKxobQzk1_rUIA.png"/></div></div></figure><p id="4234" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们运行一个模拟，可以对总共100，000个样本重复上述过程。以下是结果的一瞥:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/d9e32fd18896b12db5daa7c9ce15e78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzeZ4XieBIanO-_NpWtrsw.png"/></div></div></figure><p id="ac4c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，尽管我们知道真实转换率是30%，但由于随机<strong class="kw iu"> <em class="nf">采样误差</em> </strong>，我们看到这个数字周围有一些变化。现在让我们把上面所有的数字转换成比例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/4b869adfad6c6161c803923a65577362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rnyc7zKlu4pQyRdHV7wS1w.png"/></div></div></figure><p id="40d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，让我们绘制转换率差异的分布图(最后一列):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/99211940e0d0f65f182445fd30be9ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rHRUTgNYA7uyVlU4"/></div></div></figure><p id="9c60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">总结:我们有两个转化率相同的网站。所以转换率的差异应该等于零。但是由于抽样误差，我们看到结果的抽样分布在零附近。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="ac2e" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">2.将模拟应用于A/B测试</h1><p id="5160" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">现在假设A/B测试产生以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/aeda0803e09716009d4f7bf12bc2a2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vYjX18AHKJJLPIZ-v5qbvQ.png"/></div></div></figure><p id="ccbb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">测试处理真的提高了45个客户的转化吗？或者测试组和对照组有相同的转化率吗？在这种情况下，我们观察到的任何差异都只是随机抽样误差的结果？</p><p id="1795" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们更正式地捕捉这些假设:</p><ul class=""><li id="c342" class="ni nj it kw b kx ky la lb ld nk lh nl ll nm lp nn no np nq bi translated"><strong class="kw iu"><em class="nf"/></strong>(<strong class="kw iu"><em class="nf">零假设</em> </strong>):人口转换率之差= 0。任何观察到的差异都是由于采样误差造成的。</li><li id="3754" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated"><strong class="kw iu"> <em class="nf">哈</em> </strong> ( <strong class="kw iu"> <em class="nf">替代假设</em> </strong>):人口转化率之差≠ 0。观察到的差异不太可能仅仅是由于采样误差。</li></ul><p id="b40e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，让我们从确定假设为零时的抽样分布开始。我们需要知道的只是真实的(人口)转换率可能是多少。我们最好的猜测是样本转换率的平均值:(0.335 + 0.290) / 2 = 0.3125。现在，让我们模拟一下测试组和对照组的转换率均为0.3125时的分布情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/4ac754ea1c0da446ad2578f5212ffbbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l8aJi-H_9c6sHrDA"/></div></div></figure><p id="8c88" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">回顾:我们再次使用模拟来生成抽样分布。这里我们假设测试人群和控制人群具有相同的转化率——这是我们的零假设。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="262d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">3.生成采样分布的一种更快速的方法</h1><p id="4cf9" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">模拟是生成抽样分布以展示抽样误差影响的一个很好的工具。如果我们想移动得更快，我们可以，事实上，<em class="nf">计算</em>采样分布如下:</p><p id="464f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第一步:计算汇集样本比例(<em class="nf"> p </em>)。</strong></p><p id="2071" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们已经计算出这是0.3125。</p><p id="8501" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是实际的公式，当测试组和对照组的样本量不同时，这个公式特别有用:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/e0bed70eaf1e0ef9d44dcf381dd087b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMaND4CN6rqAdyZSlyvHEg.png"/></div></div></figure><p id="c3a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第二步:用<em class="nf"> p </em>计算标准误差(<em class="nf"> se </em>)。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/2c43128124ccefe371b9601c048fe0db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXPFJg5wB9CvtGDsZKi91w.png"/></div></div></figure><p id="7991" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">步骤3:计算一个均值= 0，标准差= 0.0207的正态分布。</strong></p><p id="785f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<em class="nf"> R </em>中，我们可以简单地写:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="b4d4" class="od mi it nz b gy oe of l og oh">rnorm(n = 10000, mean = 0, sd = 0.0207)</span></pre><p id="f48a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们来看看这个计算值的分布(红色)与之前我们通过模拟创建的分布(黑色)相比是什么样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/156e5a027d40f4a8b24e11a2a0a3c195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aY55mzgsmg50YnJ3yTVqDA.png"/></div></div></figure><p id="c0c4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如你所见，我们有一个几乎完美的匹配！事实上，模拟导致对采样分布的<em class="nf">估计</em>。然而，如果我们无限次运行模拟，我们将获得计算出的采样分布。因此，它是<em class="nf">精确的</em>抽样分布。</p><p id="853d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">概述:我们不再需要运行许多模拟来估计抽样分布。我们现在可以计算精确的采样分布。</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="30e0" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">4.解释A/B测试结果</h1><p id="bbb5" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">那么，给定上面的抽样分布，在零假设下，获得0.045或更大的结果的概率是多少？让我们重新检查我们的抽样分布:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/98aa7f6215c919b452c896e50c4428e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F2Y0lgPQH5t0E_i7"/></div></div></figure><p id="4a23" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里我们的<strong class="kw iu"> <em class="nf"> p值</em> </strong>(蓝色阴影)是3%，它告诉我们，如果零假设为真，那么我们预计在100次A/B测试中只有3次会看到极端或大于0.045的结果。由于我们的p值小于我们的<strong class="kw iu"> <em class="nf">显著性水平</em>(</strong>【𝛂】<strong class="kw iu">)</strong>0.05，我们拒绝零假设。</p><p id="4186" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">总结:在零假设下，转换率提高到0.045或更高的可能性不大。具体来说，我们的p值为0.03意味着我们只可能在100个实验中的3个实验中看到极端或大于0.045的结果。这个比率小于我们的显著性水平(𝛂)0.05，因此，我们拒绝零假设。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="56d4" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">5.计算p值的更快方法</h1><p id="ba97" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">我们可以通过使用<strong class="kw iu"> <em class="nf">标准正态分布</em> </strong>来加速这个过程。我们可以通过除以标准误差将我们的分布转换成标准正态分布。同样，我们也可以通过除以标准误差将我们的测试结果转换成一个<strong class="kw iu"> <em class="nf"> z分数</em> </strong>。所以这里我们得到0.045 / 0.0207 = 2.17。</p><p id="e3bb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用这个z值，我们现在可以通过<a class="ae lz" href="https://en.wikipedia.org/wiki/Standard_normal_table#Table_examples" rel="noopener ugc nofollow" target="_blank">查找表</a>快速确定p值，或者使用编程语言如<em class="nf"> R </em>计算p值:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="6651" class="od mi it nz b gy oe of l og oh">pnorm(q = -2.17, mean = 0, sd = 1) * 2</span></pre><p id="d9d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这两种情况下，我们得到了与之前相同的p值:0.03。</p><p id="21ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">概述:通过将我们观察到的转换率差异(0.045)转换为z值(2.17)，我们能够利用标准正态分布的查找表来快速得出p值。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="f2c5" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">6.置信区间</h1><p id="7761" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">概括一下:</p><ul class=""><li id="e302" class="ni nj it kw b kx ky la lb ld nk lh nl ll nm lp nn no np nq bi translated">我们已经<strong class="kw iu"><em class="nf"/></strong>否定了原假设<strong class="kw iu"><em class="nf">【H0】</em></strong>认为人口转换率之差= 0。</li><li id="1a29" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">因此，我们必须<strong class="kw iu"> <em class="nf">接受</em> </strong>的替代假设<strong class="kw iu"> <em class="nf">(哈)</em> </strong>即人口转换率之差≠ 0。</li></ul><p id="0f87" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们接受人口转换率的差异<em class="nf">不等于零，那么</em>等于多少？给定替代假设，可能值的范围是什么？让我们参考给定替代假设的抽样分布:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/2eb69b426f6b2be1e50245a258bd40e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FQAzzmjBDvyPUBJc"/></div></div></figure><p id="89b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">灰色阴影区域代表图表的中间95%,对应于置信区间(0.004，0.086)或0.045±0.041。每个置信区间都有一个相关的置信水平，该置信水平由显著性水平(𝛂)预先确定，等于1-𝛂= 1–0.05 = 95%。置信区间告诉我们，如果我们多次重复整个A/B测试，那么从长远来看，95%的置信区间将捕捉到人口转换率之间的真实差异。</p><p id="f55e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">概述:置信区间(在相关的置信水平上)显示了我们的A/B测试结果的可能值的范围。在这里，我们报告的置信区间为0.045±0.041，置信水平为95%。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="dea3" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">7.R中的统计分析</h1><p id="901c" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">至此，您应该对统计分析的总体框架感到相当满意了。现在，让我们看看如何将上述所有步骤简化为几行代码。在<em class="nf"> R </em>中我们会写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="46f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这会产生:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/73414f8bd4aebc6f0f39325acab72300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4QRmIBduirZyMgUJKaEi1g.png"/></div></div></figure></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="d3f8" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">8.摘要</h1><p id="3ff3" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">在这里，我们探索了分析A/B测试所涉及的步骤，以及将所有步骤联系在一起的框架。希望这已经让你对A/B测试统计有了更好的理解。在这种情况下，我们有足够的证据(根据p值)来拒绝零假设。但是，如果我们没有收集到足够大的样本来产生p值怎么办？下一篇文章中，我们将演示如何提前推断出所需的样本量。</p></div></div>    
</body>
</html>