<html>
<head>
<title>Five steps to set up a data source using AWS Athena</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS Athena设置数据源的五个步骤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/five-steps-to-set-up-a-data-source-using-aws-athena-62d89d0a9051?source=collection_archive---------65-----------------------#2020-05-28">https://towardsdatascience.com/five-steps-to-set-up-a-data-source-using-aws-athena-62d89d0a9051?source=collection_archive---------65-----------------------#2020-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="38ea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为可视化准备德克萨斯州健康事实数据</h2></div><p id="4793" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated"><span class="l lc ld le bm lf lg lh li lj di"> A </span> thena是AWS中的一项无服务器服务，它提供了对存储在亚马逊简单存储服务(S3)中的数据执行查询的机会。在本文中，我将描述在AWS Athena中准备好数据源以创建有洞察力的仪表板的五个步骤。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/5186f05aebfc14f0db14f279095330d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xva1Z8jP1RmZfKek"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">由<a class="ae ma" href="https://unsplash.com/@cgower?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯托弗·高尔</a>在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6c40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">德克萨斯州健康服务部每年维护健康事实档案数据。我获得了两个excel文件，分别包含2012年、2013年、2014年和2015年结构化格式的健康事实数据。</p><p id="8d81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我编写Python代码来检查和更新数据的质量，使其整洁，并创建一个CSV文件。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="fd57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CSV文件随后被存储在AWS S3存储桶中，下面是在AWS Athena中设置数据源的步骤。</p><blockquote class="md me mf"><p id="6e95" class="kf kg mg kh b ki kj jr kk kl km ju kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">Amazon Athena是一个交互式查询服务，允许您从Amazon S3查询数据，而不需要集群或数据仓库。</p></blockquote><p id="4967" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第一步。在AWS控制台中，通过在搜索栏中键入或从分析类别中选择Athena。</strong></p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mk"><img src="../Images/fb09b188a4116eadd23eaa6c0a4f958f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyJwYMNrts4QzU5Q54_Ncw.png"/></div></div></figure><p id="2239" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第二步。点击【开始使用】</strong></p><p id="4ce0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您可以选择连接到数据源。我将使用默认的AwsDataCatalog</p><p id="7d73" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以手动创建数据库和表，也可以使用AWS Glue。我用了AWS胶水。</p><p id="a6d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第三步。启动AWS Glue并添加爬虫</strong></p><p id="2b30" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg">爬虫信息</em> </strong>:我把爬虫命名为“mytxhealthfacts”。我跳过了可选条目。</p><p id="87a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg">爬虫源类型</em> </strong>:我选择了“数据存储”作为爬虫源类型</p><p id="4cd9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg">数据仓库</em> </strong>:我选择了S3作为数据仓库。我在AWS S3中输入csv文件的位置作为包含路径。您也可以通过导航到该文件，然后选择复制路径将其放在剪贴板上来获得它。</p><p id="9dba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我跳过了添加另一个数据存储的选项。</p><p id="2458" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg"> IAM角色</em> </strong>:我选择了一个现有的IAM角色。</p><p id="15a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg">日程</em> </strong>:我选择了频率选项“按需运行”</p><p id="41e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="mg">输出</em> </strong>:我选择了添加名为“txhealthfacts”的数据库的选项，跳过了所有可选条目。</p><p id="058c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我回顾了前面添加爬虫的所有步骤，并单击“Finish”。</p><p id="2710" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">步骤四。运行爬虫</strong></p><p id="a9d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这花了几秒钟，我看到状态从“开始”到“停止”再到“就绪”。</p><p id="c118" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">爬虫准备好之后，我回到雅典娜。</p><p id="17fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">第五步。启动Athena并点击“查询编辑器”</strong></p><p id="2ccc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我确认已经创建了数据库，并且还创建了包含来自csv文件的正确元数据的表。我还运行了一个查询来确认记录的数量。</p><p id="889a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated"><span class="l lc ld le bm lf lg lh li lj di">现在，我在AWS Athena中有可用的数据源。我现在可以从Quicksight或Tableau等可视化工具连接到它，并创建一个有洞察力的仪表板。</span></p></div></div>    
</body>
</html>