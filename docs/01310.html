<html>
<head>
<title>How I built a Hacker News clone for Coronavirus in less than a day</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在不到一天的时间里为冠状病毒创建了一个黑客新闻克隆</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-i-built-a-hacker-news-clone-for-coronavirus-in-less-than-a-day-f4a199f4d842?source=collection_archive---------27-----------------------#2020-02-05">https://towardsdatascience.com/how-i-built-a-hacker-news-clone-for-coronavirus-in-less-than-a-day-f4a199f4d842?source=collection_archive---------27-----------------------#2020-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c8fd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Flask作为后端和Scrapy抓取新闻</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0147561e6317dd2ea9df431f29c611da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y2XhxijtdzK6lAOk"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">蒂姆·莫斯霍尔德在Unsplash<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></p></figure><p id="a866" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想观看直播网站，请访问<a class="ae kv" href="https://visualizenow.org/corona-news" rel="noopener ugc nofollow" target="_blank">本页</a>。有关实时统计数据，请访问<a class="ae kv" href="https://visualizenow.org/corona-live" rel="noopener ugc nofollow" target="_blank">本页</a>。我不打算一行一行地重复如何写代码，如果你想要的话，可以看看这个<a class="ae kv" href="https://github.com/sagunsh/corona-live" rel="noopener ugc nofollow" target="_blank"> Github repo </a>。我还添加了过去3-4天收集的所有新闻。</p><p id="20a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想了解关于传染性冠状病毒爆发的最新消息。浏览社交媒体是一种选择，但考虑到如今社交媒体上流传的假新闻和点击诱饵的数量，我更喜欢从可靠的新闻门户网站上获取新闻。问题是有很多。所以我想，也许是时候用我的编码技能来构建一些有用的东西了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/6699f8193274ebf95c18a886f527534f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*yz-wUSls51C061Jb.jpg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自Imageflip.com</p></figure><h1 id="12a4" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">新闻爬虫</h1><p id="dc1e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">爬行是我的日常工作之一，我以前创建过新闻爬虫。几乎每次我都用Scrapy进行抓取和爬行，因为它内置了很多东西。我不想重新发明轮子，更重要的是，我已经习惯了Scrapy。</p><p id="4240" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">RSS对于几乎所有的网站都是统一的，所以我决定用它来获取新闻。这样，我将只编写一个适用于所有网站的解析器。我需要做的就是在列表中添加更多的URL，脚本会处理它。RSS提要中的一个典型条目如下所示</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d6d1" class="mv lu iq mr b gy mw mx l my mz">&lt;item&gt;<br/>    &lt;title&gt;<br/>        &lt;![CDATA[ China coronavirus outbreak: All the latest updates ]]&gt;<br/>    &lt;/title&gt;<br/>    &lt;description&gt;<br/>        &lt;![CDATA[Global death toll reaches 427 with two reported dead outside mainland China as infection rate passes 20,500 cases.]]&gt;<br/>    &lt;/description&gt;<br/>    &lt;link&gt;<br/>        <a class="ae kv" href="https://www.aljazeera.com/news/2020/02/china-admits-shortcomings-coronavirus-death-toll-hits-425-200203234036932.html" rel="noopener ugc nofollow" target="_blank">https://www.aljazeera.com/news/2020/02/china-admits-shortcomings-coronavirus-death-toll-hits-425-200203234036932.html</a><br/>    &lt;/link&gt;<br/>    &lt;guid isPermaLink="false"&gt;200203234036932&lt;/guid&gt;<br/>    &lt;pubDate&gt;Tue, 04 Feb 2020 16:41:35 GMT&lt;/pubDate&gt;<br/>&lt;/item&gt;</span></pre><p id="c41e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一步是收集数据。我想要标题、链接和发布日期，我需要一种方法来选择仅在我的页面上显示的与冠状病毒相关的新闻。一种简单的方法是匹配关键词。所以我做了一个关键字列表和一个函数，它将检查标题和描述是否有这些关键字之一，并将其插入数据库或忽略它。所有这些步骤都记录在<code class="fe na nb nc mr b">rss_scraper.py</code>文件中。</p><h1 id="9031" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">前端</h1><p id="2792" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">所以我想的第一件事就是尽快完成。我不想浪费更多的时间来构建一个简单的MVP。我承认我对设计和前端的东西很糟糕。所以我做了每个开发人员都会做的事情，即找到一个合适的模板。通常我会搜索<strong class="ky ir">“免费引导新闻模板”</strong>，但正如我所说，我不想浪费太多时间。我见过的最简单的用户界面是<a class="ae kv" href="https://news.ycombinator.com/" rel="noopener ugc nofollow" target="_blank">黑客新闻</a>。所以我从他们的网站上复制了所有的HTML，CSS，删除了多余的东西，做了一些改变，比如颜色，页脚。</p><h1 id="25c4" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">后端</h1><p id="c87d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">选项对我来说是有限的，因为我只知道Python和初级JavaScript/NodeJS。对我来说不是弗拉斯克就是姜戈。Django很棒，但我想要一个单页应用程序，几乎没有2-3页，所以这将是一个大材小用。Flask因其最小化方法而受欢迎，所以我选择了它。</p><p id="3a27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用的数据库是MySQL。我创建了一个端点<code class="fe na nb nc mr b">/corona-news</code>,它查询数据库并将字典列表返回给模板，在模板中它们将被呈现为HTML。和《黑客新闻》一样，我设定了每页30条的限制。点击<a class="ae kv" href="https://visualizenow.org/corona-news" rel="noopener ugc nofollow" target="_blank">此链接</a>访问页面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/ac344f18e3868426a644e54f81816dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QaW75GUiPHoEESAIOgFfA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">实时新闻页面</p></figure><h1 id="5968" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">奖金</h1><p id="6969" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我发现<a class="ae kv" href="https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6" rel="noopener ugc nofollow" target="_blank">这个网站</a>正在更新报告的病例数、死亡数和康复病人数。他们也有一个链接到保存汇总数据的google sheet。我使用google sheet定期下载文件，并以表格形式显示数据。有关现场计数和统计，请访问<a class="ae kv" href="https://visualizenow.org/corona-live" rel="noopener ugc nofollow" target="_blank">本页</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/a82b6e5faf87192bfa31d4dd3d7db22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6ZLPCPH_jmh7Z6hxGgkKw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">实时统计页面</p></figure><h1 id="7ebb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">部署</h1><p id="f778" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我使用Linode VPS和Ubuntu进行部署。按照DigitalOcean的指南<a class="ae kv" href="https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uswgi-and-nginx-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">在Ubuntu上使用Nginx和uWSGI部署Flask应用程序。</a></p><h1 id="91f5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">最后的想法</h1><p id="ba84" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我希望这一页将有助于你们中的一些人获得关于冠状病毒的最新消息，这次疫情将尽快得到控制。</p></div></div>    
</body>
</html>