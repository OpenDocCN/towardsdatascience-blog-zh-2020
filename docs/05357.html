<html>
<head>
<title>YOLOv3 PyTorch Streaming on Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google Colab上的YOLOv3 PyTorch流媒体</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/yolov3-pytorch-streaming-on-google-colab-16f4fe72e7b?source=collection_archive---------12-----------------------#2020-05-06">https://towardsdatascience.com/yolov3-pytorch-streaming-on-google-colab-16f4fe72e7b?source=collection_archive---------12-----------------------#2020-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f9e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Google Colab在您的浏览器上进行网络摄像头流对象检测</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/26aa487802e4907b0e33a369caa7a545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GuEhvEpJFHRolmc054GGRg.png"/></div></div></figure><p id="c9db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> YOLO </strong>(你只看一次)在计算机视觉和深度学习方面最大的突破之一是能够实时处理<strong class="kw iu">高精度的物体检测。</strong></p><p id="fabb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在非GPU计算机上使用YOLO完全是一种痛苦，幸运的是谷歌实验室来拯救我们了！！！每台能够打开Google Chome浏览器的电脑都足以使用Google的免费GPU(其他浏览器也可以，但推荐使用Chome)。</p><blockquote class="lq lr ls"><p id="6054" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">Google Colab里有我之前关于YOLO的文章:<br/> <a class="ae lx" rel="noopener" target="_blank" href="/yolov3-pytorch-on-google-colab-c4a79eeecdea"> YOLOv3视频处理</a></p></blockquote><p id="5031" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们不会讨论YOLO的概念或架构，因为媒体上已经有很多好文章对此进行了阐述。</p><p id="0d06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">这里要讨论的:</strong> <br/> 1。使用JavaScript将我们的网络摄像头连接到Google Colab。使用YOLO从网络摄像头上的图像中获取对象检测边界框<br/> 3。将预测的边界框放入我们的实时网络摄像头显示</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/bedd2e6453aed8610f0498d7d955f6b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zv9H21HUVT-qzmzDQzn2uQ.png"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">工作流程</p></figure><p id="af94" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们旅程的结果会是这样的</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="e90f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这个<a class="ae lx" href="https://colab.research.google.com/github/vindruid/yolov3-in-colab/blob/master/yolov3_streaming_webcam.ipynb" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>中亲身体验</p><h1 id="be07" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">让我们开始行动吧</h1><h2 id="5002" class="mx mg it bd mh my mz dn ml na nb dp mp ld nc nd mr lh ne nf mt ll ng nh mv ni bi translated">1.使用JavaScript将我们的网络摄像头连接到Google Colab</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">在Google Colab中连接网络摄像头的功能</p></figure><p id="d43e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">基本上有两个函数我们需要用到:<code class="fe nk nl nm nn b">start_input</code>和<code class="fe nk nl nm nn b">take_photo</code>。</p><p id="7242" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当运行<code class="fe nk nl nm nn b">start_input</code>时，我们打开网络摄像头(确保你<strong class="kw iu">允许</strong>你的浏览器/ Google Colab打开你的摄像头)，然后提供画布来放置网络摄像头捕捉到的一切，并显示给我们的Google Colab输出。</p><p id="5146" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过改变<code class="fe nk nl nm nn b">captureCanvas.width</code>和<code class="fe nk nl nm nn b">captureCanvas.height</code>来调整画布的大小。</p><p id="f74e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nk nl nm nn b">take_photo</code>返回<em class="lt">包含要在YOLO处理的图像(以字节为单位)的JavaScript对象</em>，我们将在下一节看到。</p><p id="cae9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最突出显示的输入<code class="fe nk nl nm nn b">take_photo</code>是<code class="fe nk nl nm nn b"><strong class="kw iu">img_data</strong></code>，这是一个<em class="lt">图像</em>，我们希望覆盖在我们的网络摄像头图像上。在我们的例子中，它是边界框的图像。这将在最后一节讨论。</p><p id="5acf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们如何在Google Colab中打开网络摄像头，停止捕捉只需点击输出底部的红色文本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><h2 id="ddd2" class="mx mg it bd mh my mz dn ml na nb dp mp ld nc nd mr lh ne nf mt ll ng nh mv ni bi translated">2.从网络摄像头上的图像中使用YOLO获得对象检测边界框</h2><p id="a69f" class="pw-post-body-paragraph ku kv it kw b kx no ju kz la np jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">首先，我们必须处理来自<code class="fe nk nl nm nn b">take_photo</code>函数的JavaScript输出，我们将其命名为<code class="fe nk nl nm nn b">js_reply</code>，以获得数组格式的图像。</p><p id="6f01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们是这样做的，我们把它从一个字节格式解码，然后转换成一个数组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><p id="fd9d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有了一个已经<strong class="kw iu">符合YOLO模型</strong>的图像。</p><p id="fd76" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">其次，我们从ultralytics制备YOLO回购</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><p id="da80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上面的代码包含<strong class="kw iu">克隆repo </strong>和<strong class="kw iu">从ultralytics加载预训练模型</strong>。</p><p id="05e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们从YOLO模型中产生边界框，但是这次我们没有直接把它画到输入图像中，而是把边界框画到一个RGBA格式的空白画布中。png)，所以我们可以得到一个没有背景的包围盒的图像。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><p id="343d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">画布的结果大概是这样的。没有背景就查一下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/9dc7893ea17de773890247d6d1745d64.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*GqTlzfrnVfjdR4PzoK73yA.png"/></div></figure><h2 id="dd04" class="mx mg it bd mh my mz dn ml na nb dp mp ld nc nd mr lh ne nf mt ll ng nh mv ni bi translated">3.将预测的边界框放入我们的实时网络摄像头显示</h2><p id="d84e" class="pw-post-body-paragraph ku kv it kw b kx no ju kz la np jx lc ld nq lf lg lh nr lj lk ll ns ln lo lp im bi translated">在我们得到预测结果后，我们需要做的最后一件事就是把结果直接放到我们的网络视频中。</p><p id="f48f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要通过<code class="fe nk nl nm nn b">take_photo</code>函数中的<code class="fe nk nl nm nn b">img_data</code>参数将其放回我们的JavaScript东西’中，我们需要将预测结果转换/编码为<em class="lt">字节</em>格式。这是怎么回事:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><p id="42d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">到目前为止，我们已经有了几个函数，让我们按照使用的顺序再回顾一下:</p><ol class=""><li id="9e8f" class="nu nv it kw b kx ky la lb ld nw lh nx ll ny lp nz oa ob oc bi translated"><code class="fe nk nl nm nn b">start_input</code> - &gt;打开网络摄像头并显示网络摄像头</li><li id="516e" class="nu nv it kw b kx od la oe ld of lh og ll oh lp nz oa ob oc bi translated"><code class="fe nk nl nm nn b">take_photo</code> - &gt;从网络摄像头获取图像并覆盖边框</li><li id="1265" class="nu nv it kw b kx od la oe ld of lh og ll oh lp nz oa ob oc bi translated"><code class="fe nk nl nm nn b">js_reply_to_image</code> - &gt;将JS输出的图像转换成数组</li><li id="8452" class="nu nv it kw b kx od la oe ld of lh og ll oh lp nz oa ob oc bi translated"><code class="fe nk nl nm nn b">get_drawing_array</code> - &gt;从图像数组中获取预测的包围盒</li><li id="0ab7" class="nu nv it kw b kx od la oe ld of lh og ll oh lp nz oa ob oc bi translated"><code class="fe nk nl nm nn b">drawing_array_to_bytes</code> - &gt;将预测包围盒转换成字节</li></ol><p id="fa2a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们重新运行我们的网络摄像头，使用所有这5个功能:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj me l"/></div></figure><p id="345b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里可以看到，起初<code class="fe nk nl nm nn b">img_data</code>是一个空字符串(<code class="fe nk nl nm nn b">''</code>)，然后在每次迭代中，它将被替换为<code class="fe nk nl nm nn b">drawing_bytes</code>。这就是我们的边界框如何出现在Google Colab的摄像头输出上方。</p></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><h1 id="04c8" class="mf mg it bd mh mi op mk ml mm oq mo mp jz or ka mr kc os kd mt kf ot kg mv mw bi translated">来源</h1><ul class=""><li id="2583" class="nu nv it kw b kx no la np ld ou lh ov ll ow lp ox oa ob oc bi translated"><a class="ae lx" href="https://github.com/ultralytics/yolov3" rel="noopener ugc nofollow" target="_blank">https://github.com/ultralytics/yolov3</a></li><li id="4135" class="nu nv it kw b kx od la oe ld of lh og ll oh lp ox oa ob oc bi translated">https://learn . ada fruit . com/tensor flow-in-your-browser-object-detection-with-bounding-box？视图=全部</li></ul></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><p id="1baa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">谢谢你到目前为止阅读:D</p><p id="8d61" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想在<a class="ae lx" href="https://github.com/vindruid/yolov3-in-colab/blob/master/yolov3_streaming_webcam.ipynb" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>中亲自尝试，请点击链接</p><p id="e4e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">希望这篇文章有帮助</p><h1 id="0d0e" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">干杯！！！</h1></div></div>    
</body>
</html>