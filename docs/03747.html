<html>
<head>
<title>Top 5 Beautiful Soup Functions That Will Make Your Life Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让你的生活更轻松的五大美味汤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-5-beautiful-soup-functions-7bfe5a693482?source=collection_archive---------6-----------------------#2020-04-08">https://towardsdatascience.com/top-5-beautiful-soup-functions-7bfe5a693482?source=collection_archive---------6-----------------------#2020-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b5b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated">一旦你进入<a class="ae kx" rel="noopener" target="_blank" href="/everything-you-need-to-know-about-web-scraping-6541b241f27e">的网络搜集和数据处理领域，你会发现有很多工具可以帮你完成这项工作。其中之一是</a><a class="ae kx" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">美汤</a>，这是一个用于从HTML和XML文件中提取数据的python库。它创建了数据解析树以便于获取数据。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/c5e04e3fa0f718d372f098fad571c01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OHukaYpjQhPmYdNT9Ns9sg.jpeg"/></div></div><p class="lk ll gj gh gi lm ln bd b be z dk translated"><a class="ae kx" href="https://unsplash.com/@sortino?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Joshua Sortino </a>在<a class="ae kx" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的原始照片</p></figure><p id="0c61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基本过程是这样的:</p><blockquote class="lo"><p id="b81f" class="lp lq it bd lr ls lt lu lv lw lx kn dk translated">获取数据，然后按照你想要的方式进行处理。</p></blockquote><p id="2bd9" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">这就是为什么今天我想向你展示一些美丽的汤提供的顶级功能。</p><p id="4b40" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你也对其他库感兴趣，比如<a class="ae kx" rel="noopener" target="_blank" href="/top-25-selenium-functions-that-will-make-you-pro-in-web-scraping-5c937e027244"> Selenium </a>，这里有一些你应该看看的例子:<br/>我以前写过关于Selenium和Web抓取的文章，所以在你开始阅读这些之前，我建议你阅读这篇文章“<a class="ae kx" rel="noopener" target="_blank" href="/everything-you-need-to-know-about-web-scraping-6541b241f27e">关于Web抓取的一切</a>”，因为这是一个设置过程。如果你已经比较精通网络抓取，试试我的高级脚本，比如“<a class="ae kx" rel="noopener" target="_blank" href="/how-to-save-money-with-python-8bfd7e627d13">如何用Python省钱</a>”和“<a class="ae kx" rel="noopener" target="_blank" href="/how-to-make-an-analysis-tool-using-python-c3e4477b6d8">如何用Python制作分析工具</a>”。</p><p id="6c1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，为BeautifulSoup设置环境的一个很好的例子在文章“<a class="ae kx" rel="noopener" target="_blank" href="/how-to-save-money-with-python-8bfd7e627d13">如何用Python </a>省钱”中。</p><p id="ae48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们直接投入进去吧！</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi md"><img src="../Images/a10a9e63bd74a2ae9ead494d4b1b2994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yvP7swIY4WZ8EKvKd7cRIQ.png"/></div></div></figure><h1 id="5363" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">漂亮的汤设置</h1><p id="f962" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">在我们进入前5个函数之前，我们必须设置我们的环境和库，我们将使用它们来获取数据。</p><p id="1ad4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在终端中，您应该安装库:</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="75da" class="nm mf it ni b gy nn no l np nq"><em class="nr">pip3 install requests</em></span></pre><p id="cab8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以使用<strong class="js iu">请求</strong>，这样您就可以通过简单的Python库添加内容，如标题、表单数据、多部分文件和参数。它还允许您以同样的方式访问Python的响应数据。</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="55d8" class="nm mf it ni b gy nn no l np nq">sudo pip3 install beautifulsoup4</span></pre><p id="a52f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是我们上面已经提到过的主库美汤。</p><p id="4270" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，当您开始启动Python脚本时，您应该包括我们刚刚安装的库:</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="ef94" class="nm mf it ni b gy nn no l np nq"><em class="nr">import</em> requests</span><span id="6d56" class="nm mf it ni b gy ns no l np nq"><em class="nr">from</em> bs4 <em class="nr">import</em> BeautifulSoup</span></pre><p id="bd8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们继续讨论函数！</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d933ab03e536ef173e35e66ae2572a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*x-FiKjxSJ9DNeNXT5lKcYA.png"/></div></figure><h1 id="78d7" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">获取()</h1><p id="8405" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">这个功能绝对是必不可少的，因为有了它，你就可以进入你想要的网页。让我展示给你看。</p><p id="eae1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们必须找到一个我们想要从中抓取(获取数据)的URL:</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="7e88" class="nm mf it ni b gy nn no l np nq">URL = '<a class="ae kx" href="https://www.amazon.de/gp/product/B0756CYWWD/ref=as_li_tl?ie=UTF8&amp;tag=idk01e-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B0756CYWWD&amp;linkId=868d0edc56c291dbff697d1692708240" rel="noopener ugc nofollow" target="_blank">https://www.amazon.de/gp/product/B0756CYWWD/ref=as_li_tl?ie=UTF8&amp;tag=idk01e-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B0756CYWWD&amp;linkId=868d0edc56c291dbff697d1692708240</a>'</span><span id="99ca" class="nm mf it ni b gy ns no l np nq">headers = {"User-agent": 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36'}</span></pre><p id="3f37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我随机拿了一个亚马逊产品，通过get函数，我们可以访问网页上的数据。标题只是你的浏览器的一个定义。你可以在这里查看你的<a class="ae kx" href="http://www.xhaus.com/headers" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a329" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用请求库，我们可以获得带有已定义标题的所需URL。<br/>之后，我们创建一个对象实例‘soup ’,我们可以用它在页面上找到我们想要的任何东西。</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="0077" class="nm mf it ni b gy nn no l np nq">page = requests.get(URL, headers=headers)</span><span id="1994" class="nm mf it ni b gy ns no l np nq">soup = BeautifulSoup(page.content, 'html.parser')</span></pre><p id="84fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">BeautifulSoup(，)创建一个表示解析后的HTML或XML文档的数据结构。<br/>您将在BeautifulSoup对象上调用的大多数方法都继承自PageElement或Tag。<br/>在内部，这个类定义了将HTML/XML文档转换成数据结构时树构建器调用的基本接口。该接口抽象出了解析器之间的差异。</p><p id="3b85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在可以继续下一个函数，它实际上搜索我们刚刚创建的对象。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/f71bdb92b0a2de5fdb30c4a04dd9eea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*xv1cxBbbU0cKad8UqCKOEg.png"/></div></figure><h1 id="a9e9" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">查找()</h1><p id="1d54" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">使用find()函数，我们可以在网页中搜索任何内容。<br/>假设我们想根据他们的id获得产品的标题和价格。</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="ccaa" class="nm mf it ni b gy nn no l np nq">title = soup.find(id="productTitle").get_text()</span><span id="e018" class="nm mf it ni b gy ns no l np nq">price = soup.find(id="priceblock_ourprice").get_text()</span></pre><p id="3686" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些Web元素的id可以通过单击键盘上的F12或右键-&gt;“Inspect”来找到。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nu"><img src="../Images/6d4ab75fb997017ad5a0ca9a703d2ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzuJ7wAXWPpi42l6QQ-7yg.png"/></div></div></figure><p id="1fa6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们仔细看看刚刚发生了什么！</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/197aaada9d3228603122187d78bb66e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*3DHD7FjLuB9ciEXa_OrBXQ.png"/></div></figure><h1 id="0322" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">get_text()</h1><p id="aa80" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">正如您在前面的函数中看到的，我们使用get_text()提取新发现的元素title和price的文本部分。</p><p id="a33c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是在我们得到最终结果之前，为了得到完美的输出，我们还需要对我们的产品做一些事情。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/503f1f4b8a49ad56d81138bdf24c0c05.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*_nYaG6cOF9B81kHsn8tZXA.png"/></div></figure><h1 id="b1b8" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">条状()</h1><p id="0747" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">strip()方法返回删除了前导字符和尾随字符的字符串副本(基于传递的字符串参数)。</p><p id="0beb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用这个函数来删除标题中的空白:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nv"><img src="../Images/14f1dc5305f51fa254d25366df4f0e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pWZG49hzk_Nlgzu0.png"/></div></div></figure><p id="8b0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个函数也可以用在任何其他python用法中，不仅仅是漂亮的Soup，但是以我个人的经验，当操作文本元素时，它已经派上用场很多次了，这就是为什么我把它放在这个列表中。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/5fd567c63050caf62561218473bf976a.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*nMmSnSdGKhan4pHsBI-j0Q.png"/></div></figure><h1 id="2cd1" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated"><strong class="ak"> split() </strong></h1><p id="28db" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">这个函数对于Python来说也是通用的，但是我发现它也非常有用。它将字符串分成不同的部分，我们可以使用我们想要的部分。它与分隔符和字符串结合使用。</p><p id="00b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用<strong class="js iu"> sep </strong>作为价格字符串中的分隔符，并将其转换为整数(整数)。</p><p id="418f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">replace()只是替换“.”带有空字符串。</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="a2fa" class="nm mf it ni b gy nn no l np nq">sep = ','<br/>con_price = price.split(sep, 1)[0]<br/>converted_price = int(con_price.replace('.', ''))</span></pre><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/326a1872b4e92014c147609cd799cfd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*cfYchYJmtQi53gxk8U0sKg.png"/></div></figure><p id="7810" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是最终结果:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nw"><img src="../Images/d5d5f420e02af02ad5475c4796c2c2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*98sQmDJ2mkXPSfXyzgb3kg.png"/></div></div></figure><p id="d28a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我把完整的代码放在这个要点中:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="3e5e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在执行之前，只需检查您的头文件。</p><p id="7050" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您想运行它，下面是终端命令:</p><pre class="kz la lb lc gt nh ni nj nk aw nl bi"><span id="d863" class="nm mf it ni b gy nn no l np nq">python3 bs_tutorial.py</span></pre><blockquote class="lo"><p id="6823" class="lp lq it bd lr ls nz oa ob oc od kn dk translated">我们完了！</p></blockquote><figure class="oe of og oh oi ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi md"><img src="../Images/911834b218c5278695699477309a742a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*91wqlZ3L2EeuAd2xQ_OSbQ.png"/></div></div></figure><h1 id="e8df" class="me mf it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">临终遗言</h1><p id="d003" class="pw-post-body-paragraph jq jr it js b jt nc jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj ng kl km kn im bi translated">如前所述，这不是我第一次写关于美丽的汤，硒和网络刮一般。我还想介绍更多的功能，还会有更多的功能。我希望你喜欢这个教程，为了跟上进度，请继续关注我！</p><p id="ca6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">感谢阅读！</strong></p><figure class="kz la lb lc gt ld gh gi paragraph-image"><a href="https://medium.com/@lazar.gugleta"><div class="gh gi oj"><img src="../Images/be10e7a3911b6f5a7dc0d973baafc3cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*lr0F9J5kBTqSpVRXyZTxYQ.png"/></div></a><p class="lk ll gj gh gi lm ln bd b be z dk translated">查看我的<strong class="bd ok">其他文章</strong>，关注我的<a class="ae kx" href="https://medium.com/@lazar.gugleta" rel="noopener">媒体</a></p></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><a href="https://twitter.com/intent/user?screen_name=LazarGugleta"><div class="gh gi oj"><img src="../Images/f57531852f6a5e67742319cb55c98fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*ZrXqWUPT9NkYwSRQDcD1eg.png"/></div></a><p class="lk ll gj gh gi lm ln bd b be z dk translated">当我有新文章时，在Twitter上关注我</p></figure></div></div>    
</body>
</html>