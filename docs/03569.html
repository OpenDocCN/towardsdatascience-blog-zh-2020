<html>
<head>
<title>NumPy Array Manipulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NumPy 数组操作</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/numpy-array-manipulation-5d2b42354688?source=collection_archive---------26-----------------------#2020-04-04">https://towardsdatascience.com/numpy-array-manipulation-5d2b42354688?source=collection_archive---------26-----------------------#2020-04-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2dfd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">修改数组形状的实用指南</h2></div><p id="2068" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据科学的一切都始于数据，数据有多种格式。数字、图像、文本、x 光、声音和视频记录只是数据源的一些例子。无论数据以何种格式传入，都需要转换成数字数组进行分析。复杂的计算机视觉模型无法像人类一样看到或处理图像。在分析之前，图像被转换成一组数字。因此，在数据科学中有效地存储和修改数字数组是至关重要的。NumPy(数字 Python)是一个科学计算包，它提供了非常实用的方法来创建和操作数字数组。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/1297f868197a55705372e99f95a3d740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIHdkz2YhYEGQBCPn2dUPQ.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">由<a class="ae lu" href="https://unsplash.com/@zamansizturk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿里·耶尔马兹</a>在<a class="ae lu" href="https://unsplash.com/s/photos/calculation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="e6e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将介绍在 NumPy 中使用以下操作来操作数组形状的方法:</p><ul class=""><li id="b710" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">使再成形</li><li id="5cd1" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">扩展 _ 变暗</li><li id="8269" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">散开并弄平</li></ul><p id="5a6e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想了解 NumPy 的基础知识，你可以访问下面的帖子:</p><div class="mj mk gp gr ml mm"><a rel="noopener follow" target="_blank" href="/the-most-underrated-tool-in-data-science-numpy-68d8fcbde524"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">数据科学中最被低估的工具:NumPy</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">NumPy 的强大功能以及如何有效地使用它</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">towardsdatascience.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na lo mm"/></div></div></a></div><p id="d213" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从导入 NumPy 开始:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="6942" class="ng nh it nc b gy ni nj l nk nl">import numpy as np</span></pre><blockquote class="nm nn no"><p id="86c0" class="ki kj np kk b kl km ju kn ko kp jx kq nq ks kt ku nr kw kx ky ns la lb lc ld im bi translated">提示:就存储和处理而言，NumPy 数组比列表有效得多。</p></blockquote><h1 id="21e3" class="nt nh it bd nu nv nw nx ny nz oa ob oc jz od ka oe kc of kd og kf oh kg oi oj bi translated"><strong class="ak">重塑</strong></h1><p id="958d" class="pw-post-body-paragraph ki kj it kk b kl ok ju kn ko ol jx kq kr om kt ku kv on kx ky kz oo lb lc ld im bi translated">Numpy 提供了灵活的工具来改变数组的维数。在更改维度之前，最好记住数组的维度是什么意思，以及不同维度的数组是什么样子:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="5f67" class="ng nh it nc b gy ni nj l nk nl">a = np.random.randint(10, size=5)<br/>a<br/>array([9, 7, 3, 7, 5])</span><span id="3fc2" class="ng nh it nc b gy op nj l nk nl">a.ndim<br/>1</span><span id="e1cb" class="ng nh it nc b gy op nj l nk nl">a.shape<br/>(5,0)</span></pre><p id="6621" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以用 numpy 创建多维数组:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="2577" class="ng nh it nc b gy ni nj l nk nl"># 2-dimensional<br/>b = np.zeros((3,4))</span><span id="4797" class="ng nh it nc b gy op nj l nk nl">b<br/>array([[0., 0., 0., 0.],        <br/>       [0., 0., 0., 0.],        <br/>       [0., 0., 0., 0.]])</span><span id="b82e" class="ng nh it nc b gy op nj l nk nl">b.ndim<br/>2</span><span id="9d50" class="ng nh it nc b gy op nj l nk nl"># 3-dimensional<br/>c = np.ones((2,2,2))</span><span id="01f3" class="ng nh it nc b gy op nj l nk nl">c<br/>array([[[1., 1.],         <br/>        [1., 1.]],<br/>         <br/>        [[1., 1.],         <br/>         [1., 1.]]])</span><span id="adfb" class="ng nh it nc b gy op nj l nk nl">c.ndim<br/>3</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oq"><img src="../Images/9581fa7c2b90458d155fce4531569fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*iOcnapY14IKf-Vk7eecRdQ.png"/></div></div></figure><p id="e81e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有不同的方法来改变数组的维数。<strong class="kk iu"> Reshape </strong>函数通常用于修改数组的形状和维度。我们只需要将新形状作为参数传递给 shape 函数:</p><blockquote class="nm nn no"><p id="f513" class="ki kj np kk b kl km ju kn ko kp jx kq nq ks kt ku nr kw kx ky ns la lb lc ld im bi translated">提示:举例来说，我在创建数组时使用了不同的方法，这样您也可以熟悉如何创建数组。</p></blockquote><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="1847" class="ng nh it nc b gy ni nj l nk nl">np.arange(6)<br/>array([0, 1, 2, 3, 4, 5])</span><span id="16c4" class="ng nh it nc b gy op nj l nk nl">np.arange(6).reshape(2,3)<br/>array([[0, 1, 2],        <br/>       [3, 4, 5]])</span></pre><p id="464b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">shape (2，3)返回一个 2 行 3 列的二维新数组。因此，我们应用 reshape(2，3)的数组必须是 6 个元素。</p><p id="5a32" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们也使用 reshape 创建一个三维数组:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="19c7" class="ng nh it nc b gy ni nj l nk nl">np.arange(8).reshape(2,2,2)</span><span id="1788" class="ng nh it nc b gy op nj l nk nl">array([[[0, 1],         <br/>        [2, 3]],         </span><span id="3859" class="ng nh it nc b gy op nj l nk nl">        [[4, 5],         <br/>         [6, 7]]])</span></pre><p id="7f81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">reshape 函数的一个非常有用的特性是，如果不知道原始数组中元素的数量，可以将其中一个维度指定为“-1”。</p><p id="1414" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们几乎总是使用非常大的数组，所以键入(-1，1)而不是(100000，1)也很方便。</p><blockquote class="nm nn no"><p id="6d2c" class="ki kj np kk b kl km ju kn ko kp jx kq nq ks kt ku nr kw kx ky ns la lb lc ld im bi translated">提示:调整数组形状时，新形状需要与原始形状兼容。</p></blockquote><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="18c2" class="ng nh it nc b gy ni nj l nk nl">np.arange(6).reshape(-1,2)<br/>array([[0, 1],        <br/>       [2, 3],        <br/>       [4, 5]])</span><span id="3ea2" class="ng nh it nc b gy op nj l nk nl">np.arange(6).reshape(-1,3)<br/>array([[0, 1, 2],        <br/>       [3, 4, 5]])</span></pre><p id="0722" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也可以在不改变元素顺序的情况下增加维度。我们可以通过整形(-1，1)或(1，-1)来实现:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="dbe0" class="ng nh it nc b gy ni nj l nk nl">np.random.normal(0,1,3)<br/>array([-0.14788456,  0.01909406,  0.88659889])</span><span id="2f71" class="ng nh it nc b gy op nj l nk nl">np.random.normal(0,1,3).reshape(-1,1)<br/>array([[-0.14588167],        <br/>       [ 0.06871804],        <br/>       [ 2.32699261]])</span><span id="f7f2" class="ng nh it nc b gy op nj l nk nl">np.random.normal(0,1,3).reshape(1,-1)<br/>array([[ 1.46812451,  0.48818206, -0.80228877]])</span></pre><h1 id="e6f7" class="nt nh it bd nu nv nw nx ny nz oa ob oc jz od ka oe kc of kd og kf oh kg oi oj bi translated"><strong class="ak"> Expand_dims </strong></h1><p id="2355" class="pw-post-body-paragraph ki kj it kk b kl ok ju kn ko ol jx kq kr om kt ku kv on kx ky kz oo lb lc ld im bi translated">顾名思义，<strong class="kk iu"> expand_dims </strong>扩展一个数组的形状。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="27a9" class="ng nh it nc b gy ni nj l nk nl">a = np.array([1,2,3])</span><span id="d493" class="ng nh it nc b gy op nj l nk nl">np.expand_dims(a, axis=0)<br/>array([[1, 2, 3]])</span><span id="6b3b" class="ng nh it nc b gy op nj l nk nl">np.expand_dims(a, axis=1)<br/>array([[1],        <br/>       [2],        <br/>       [3]])</span></pre><p id="5ec1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">轴参数允许选择通过哪个轴进行扩展。</p><p id="aa75" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">axis=1 的 expand_dims 等效于 shape(-1，1)。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="a8e4" class="ng nh it nc b gy ni nj l nk nl">np.expand_dims(a, axis=1)<br/>array([[1],        <br/>       [2],        <br/>       [3]])</span><span id="e07e" class="ng nh it nc b gy op nj l nk nl">np.expand_dims(a, axis=1)<br/>array([[1],        <br/>       [2],        <br/>       [3]])</span></pre><h1 id="5ed6" class="nt nh it bd nu nv nw nx ny nz oa ob oc jz od ka oe kc of kd og kf oh kg oi oj bi translated"><strong class="ak">拆卷压平</strong></h1><p id="04e7" class="pw-post-body-paragraph ki kj it kk b kl ok ju kn ko ol jx kq kr om kt ku kv on kx ky kz oo lb lc ld im bi translated">Ravel 返回一个扁平数组。如果你熟悉卷积神经网络(CNN)，汇集的特征映射在馈送到完全连接的层之前被展平。该操作将二维数组转换为一维数组。</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="fb1d" class="ng nh it nc b gy ni nj l nk nl">a = np.random.randint(10, size=(2,3))<br/>a</span><span id="50a7" class="ng nh it nc b gy op nj l nk nl">array([[6, 8, 2],        <br/>       [5, 1, 8]])</span><span id="1929" class="ng nh it nc b gy op nj l nk nl">np.ravel(a)<br/>array([6, 8, 2, 5, 1, 8])</span></pre><p id="ffde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二行连接在第一行的末尾。Ravel 函数还允许使用<strong class="kk iu">顺序</strong>参数进行列级连接:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="d78e" class="ng nh it nc b gy ni nj l nk nl">np.ravel(a, order='F')<br/>array([6, 5, 8, 1, 2, 8])</span></pre><p id="2714" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">展平也执行相同的操作:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="5e12" class="ng nh it nc b gy ni nj l nk nl">array([[3, 5, 2],        <br/>       [6, 7, 8]])</span><span id="58ab" class="ng nh it nc b gy op nj l nk nl">a.flatten()<br/>array([3, 5, 2, 6, 7, 8])</span></pre><p id="fbfa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">松散和展平的区别:</p><ul class=""><li id="5c26" class="lv lw it kk b kl km ko kp kr lx kv ly kz lz ld ma mb mc md bi translated">Ravel:尽可能返回原始数组的视图。</li><li id="7aa0" class="lv lw it kk b kl me ko mf kr mg kv mh kz mi ld ma mb mc md bi translated">Flatten:总是返回原始数组的副本。</li></ul><p id="410f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，您在 flatten 返回的数组上所做的更改将永远不会在原始数组上进行。但是，如果通过 ravel 修改返回的数组，也可能会改变原始数组。让我们看一个例子来说明这一点:</p><pre class="lf lg lh li gt nb nc nd ne aw nf bi"><span id="fa7e" class="ng nh it nc b gy ni nj l nk nl">array([[3, 5, 2],        <br/>       [6, 7, 8]])</span><span id="fea1" class="ng nh it nc b gy op nj l nk nl">a.flatten()[0] = 10<br/>a<br/>array([[3, 5, 2],        <br/>       [6, 7, 8]])</span><span id="e4b6" class="ng nh it nc b gy op nj l nk nl">np.ravel(a)[0] = 10<br/>a<br/>array([[<strong class="nc iu">10</strong>,  5,  2],        <br/>       [ 6,  7,  8]])</span></pre><p id="7989" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，我们在 ravel 上所做的改变也改变了原始数组。</p></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><p id="b7bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>