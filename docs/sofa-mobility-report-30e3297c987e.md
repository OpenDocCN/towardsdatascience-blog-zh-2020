# Sofa 移动性报告

> 原文：<https://towardsdatascience.com/sofa-mobility-report-30e3297c987e?source=collection_archive---------65----------------------->

## 走还是留？或者如何建立类似苹果和谷歌坐在沙发上的移动分析。

![](img/e7415830c8d9de10b0127325e03d24e4.png)

三个月前，在隔离最活跃的阶段，我和我的同事亚历克斯坐在不同城市的沙发上，保持着可接受的社交距离。我们想知道是否有一种简单的方法来了解哪些地方是“安全”的，哪些地方由于疫情而太拥挤了。什么时间在路上遇到的人少，走哪条路线？

这甚至导致了一个服务的原型，该服务从谷歌收集像流行时间这样的数据(对开发者不可用)，并显示拥挤和不太拥挤的地方的热图。

![](img/9208dc5a7d11d3ac76325aaeddbd6748.png)

众所周知，由于新冠肺炎事件，苹果和谷歌联合起来为医疗机构提供关于人们的移动模式如何变化的统计数据。苹果的报告根据苹果地图中的方向请求，反映了步行、驾驶和运输中的变化，而谷歌则专注于“不同地理位置的移动趋势，跨不同类别的场所，如零售和娱乐、杂货店和药店、公园、公交车站、工作场所和住宅”。

![](img/a525adba6396c051a25651d92714dc04.png)

[苹果移动报告](https://www.apple.com/covid19/mobility)

![](img/0d932252e3d7d35b390885bdf163bba1.png)

[谷歌移动报告](https://www.google.com/covid19/mobility/)

这两个来源都反映了与基线(疫情之前的平均水平)相比，人们开始减少(或增加)通勤、步行、驾车和参观地点的变化百分比。这些公开的数据对好奇的人来说是一个发现，对需要做出明智决定的当局来说是一个资源。

回头看看原型，我们细心的用户假装住在伦敦的梅菲尔区。伦敦成为测试原型的首选城市是有原因的。它有很多公开的实时闭路电视摄像头。你可以通过[伦敦交通摄像头](https://www.tfljamcams.net/)网站访问近 900 个摄像头。它还有一个每 5 分钟捕获一次的快照存档，并保存一个半月。

![](img/f3ece048252fa360cec0fc212c9768fb.png)

[TfLJamCams.net](https://www.tfljamcams.net/)

我们假设，如果我们分析流并计算快照上的人数(实时处理对于 sofa 报告来说太繁重了)，它可能会为我们提供一些关于特定时间内这些地方有多受欢迎的见解，以及整个流量如何随着时间的推移而变化。所以，我们从市中心拿了 50 个摄像头。我们圆圈的中心是大本钟，而被覆盖的区域从西边的哈罗德百货公司到东边的伦敦桥，从北边的国王十字车站到南边的巴特西公园。相当一个中心区域，所以不能代表整个城市，仍然足够大，直径超过 5 公里。

![](img/2275c727341bf8d8a7cd43ff70e7c7fc.png)

50 台摄像机观察区

不幸的是，当这个聪明的想法出现在我们脑海中时，可用的快照档案有点过时，无法捕捉 3 月下旬社交距离规则越来越严格导致的流动性大幅下降。所以，我们分析了可用的时间范围:从 4 月 16 日到 7 月 8 日，差不多三个月。

这一分析背后的技术是 OpenCV、YOLOv3 和 tensor flow——现成的开源库和框架。在人物检测方面，我们完全依赖于 YOLO，这是最先进的(最好的)机器学习模型，用于对象检测。

我们对所有 50 台摄像机的计算得出每天的人数大约在 5，000 到 29，000 之间。虚线是趋势线——我们跳跃的每日数字的线性近似值。正如你可能注意到的，有几个数据丢失的日期，这些是我们这边的一些技术问题，或者只是存档中丢失的日期。

![](img/04b8a86e541d187cb63c9c716bebfd34.png)

中央电视台:每天人

我们得到的数字有多合理？嗯，或多或少，当我们回想起我们只处理一次 5 分钟快照。这是每小时 12 幅图像。在现实中，人们更经常出现在摄像机前，所以理想情况下，我们大约每 20-30 秒拍一张照片，这将使我们每小时拍摄 120-180 张照片，比我们现有的多 10-15 倍。将它乘以我们的数字，在疫情时代，我们会在空旷的一天得到 50，000-75，000 人，在拥挤的一天得到 290，000-435，000 人。考虑到有限的摄像机视野，在伦敦中心 5 公里的范围内似乎是合法的。

![](img/cfbb62edf2bc001d98e9f397a11b4694.png)

伦敦市中心的摄像流示例

苹果公司允许下载原始数据集，这样你就可以与 y 轴上 100%的基线数据进行比较(他们也缺少几天)。图表上 33%的数值意味着总共 67%的伦敦人走得更少。

![](img/0242fb071029f51f59e172491c89fa34.png)

苹果:移动性降至基线以下

虽然苹果的报告描述了整个伦敦，但相机分析只观察了伦敦市中心的一部分，主要由办公室和公共场所组成，住宅建筑较少。因此，我们的假设是，当居住在卧室社区的人们继续步行去杂货店、公园和其他场所时，在隔离期间，市中心的交通应该会大幅减少。

因此，我们使用两个图表的标准化表示来比较结果。

![](img/968935b02b65d4c1dca72ba11c0a7603.png)

从我们可以看到，这种增长趋势对市中心来说更具侵略性。由于最初的强劲下跌，更快的增长是我们应该期待的。随着时间的推移，限制变得越来越弱，越来越多的人回到正常的生活，参观位于市中心的地方。

如果我们仔细观察 6 月和 7 月，我们会发现尽管实际数字有波动，但市中心和大伦敦的趋势(虚线)几乎相同。这可能意味着市中心和城市其他地方的步行模式正在以大致相同的速度恢复正常。

![](img/4c8e5510aadc39ec953506c375e88910.png)

细看六七月:央视 vs 苹果

作为 Sofa 报告的结论，我想说我们的方法肯定不适用于更大的区域，仅仅因为缺少视频监控。然而，对于配备摄像头的当地社区来说，这与苹果和谷歌等巨头的结果相当。

这里的所有计算都是使用临时的桌面 CPU 完成的，而不是最新一代的 GPU。