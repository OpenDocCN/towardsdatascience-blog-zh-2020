<html>
<head>
<title>COVID-19 — Interactive Power BI Map of Total Cases by US State and County</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎-按美国州和县列出的所有案例的交互式Power BI地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/covid-19-interactive-power-bi-map-of-total-cases-by-us-state-and-county-e4ad7fdd0f10?source=collection_archive---------26-----------------------#2020-03-24">https://towardsdatascience.com/covid-19-interactive-power-bi-map-of-total-cases-by-us-state-and-county-e4ad7fdd0f10?source=collection_archive---------26-----------------------#2020-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8918" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">疫情对全国的影响的局部视图</h2></div><div class="ki kj kk kl gt ab cb"><figure class="km kn ko kp kq kr ks paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><img src="../Images/972769bcc6fd54a5179c35d4d4e0ebeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*hhfTRBTcd6CE889d_pOxzA.png"/></div></figure><figure class="km kn kz kp kq kr ks paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><img src="../Images/859c3d33a6179fb1abaafae132fab324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*4hMlbc1OQFci0ZJxp3b4SQ.png"/></div></figure></div><h2 id="e55d" class="la lb it bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">TL；DR链接到仪表板<a class="ae lw" href="https://app.powerbi.com/view?r=eyJrIjoiMDkzZjQwNDMtZmI1Zi00YmVkLWExMTMtNDRjMjcwNWQ5ZGExIiwidCI6IjE1MjgxOGIxLTdmMTUtNDM3YS1hYzBiLTkyNDQwNzgwMzQ0ZCIsImMiOjN9&amp;fbclid=IwAR0sB3j-SvuYu8dxdwSMX8Pp20m3eSBO7a5v6C1e6W6WgRrWn3-TwWz9IuA" rel="noopener ugc nofollow" target="_blank">此处</a></h2><p id="523d" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lj mg mh mi ln mj mk ml lr mm mn mo mp im bi translated">我和我妻子谈到美国各县是如何在新闻中单独报道新冠肺炎病例的。有很多地图追踪器用于世界和美国的州级报告，但没有多少地图在县一级整理。</p><p id="870e" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">她将此视为一项挑战，并在一个晚上就构建了这个惊人的公开可用的Power BI交互式仪表盘！</p><h1 id="eeea" class="mv lb it bd lc mw mx my lf mz na nb li jz nc ka lm kc nd kd lq kf ne kg lu nf bi translated">支持仪表板的API和数据:</h1><p id="28e4" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lj mg mh mi ln mj mk ml lr mm mn mo mp im bi translated">最初，我们将这个令人敬畏的GitHub API归功于GitHub用户<strong class="lz iu">JKSenthil:</strong><a class="ae lw" href="https://github.com/JKSenthil/coronavirus-county-api" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">【https://github.com/JKSenthil/coronavirus-county-api】</strong></a><br/>，他构建了这个基于python的API，从<a class="ae lw" href="https://coronavirus.1point3acres.com/en" rel="noopener ugc nofollow" target="_blank"><strong class="lz iu">https://coronavirus.1point3acres.com/en</strong></a>抓取数据</p><p id="3d3c" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">但是，当1point3acres更改他们的html UI数据格式时，我们遇到了一些问题，这破坏了API。我最终克隆了API，并对其进行了编辑，使其起死回生(这占用了我周日的大部分时间)。但是，嘿，一个星期天花在帮助妻子上是值得的。:)</p><h1 id="d733" class="mv lb it bd lc mw mx my lf mz na nb li jz nc ka lm kc nd kd lq kf ne kg lu nf bi translated">API分叉和调整:</h1><p id="a3bd" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lj mg mh mi ln mj mk ml lr mm mn mo mp im bi translated">API使用Selenium WebDriver，它运行一个无头Chrome来抓取web URL，并将API数据作为JSON返回。API是用python编写的，运行在通过gunicorn提供服务的Flask上，部署并托管在Heroku上。我遇到了一些问题:</p><p id="850a" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">问题# 1:API中断是因为scraper失败。这源于源UI格式的变化。我可以通过调整抓取逻辑来解决这个问题。</p><p id="4bd1" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">问题#2: Heroku的自由等级意味着我必须限制gunicorn的工人数量为1。这对于应用程序来说不是问题，因为它是唯一请求数据的API用户。这些请求每隔几个小时才会刷新一次仪表板。</p><p id="559d" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">问题# 3:API需要一段时间来响应，因为抓取器必须遍历美国所有3200多个县来抓取数据。我不得不将gunicorn的超时值提高到比默认值更长。</p><h1 id="22d4" class="mv lb it bd lc mw mx my lf mz na nb li jz nc ka lm kc nd kd lq kf ne kg lu nf bi translated">结束语:</h1><p id="272a" class="pw-post-body-paragraph lx ly it lz b ma mb ju mc md me jx mf lj mg mh mi ln mj mk ml lr mm mn mo mp im bi translated">总的来说，这是一次很酷的经历，特别是使用Python和Heroku主机。</p><p id="8925" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">我相信这张公共地图也揭示了有趣的县级统计数据和空间分布。随着美国新冠肺炎病例的增加，这一点尤其重要。在#隔离期间，帮助我的妻子做一个数据科学项目也很有趣！</p><p id="63fa" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">如果您对该主题有任何想法或对仪表盘或所用工具有任何疑问，请通过<a class="ae lw" href="https://www.linkedin.com/in/lakshmananshankar" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系</p><p id="ca2b" class="pw-post-body-paragraph lx ly it lz b ma mq ju mc md mr jx mf lj ms mh mi ln mt mk ml lr mu mn mo mp im bi translated">这里是交互式仪表盘的链接，它每24小时更新一次:<a class="ae lw" href="https://app.powerbi.com/view?r=eyJrIjoiMDkzZjQwNDMtZmI1Zi00YmVkLWExMTMtNDRjMjcwNWQ5ZGExIiwidCI6IjE1MjgxOGIxLTdmMTUtNDM3YS1hYzBiLTkyNDQwNzgwMzQ0ZCIsImMiOjN9&amp;fbclid=IwAR0sB3j-SvuYu8dxdwSMX8Pp20m3eSBO7a5v6C1e6W6WgRrWn3-TwWz9IuA" rel="noopener ugc nofollow" target="_blank">新冠肺炎美国仪表盘</a></p></div></div>    
</body>
</html>