<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://towardsdatascience.com/statistical-analysis-on-a-dataset-you-dont-understand-f382f43c8fa5?source=collection_archive---------17-----------------------#2020-08-24">https://towardsdatascience.com/statistical-analysis-on-a-dataset-you-dont-understand-f382f43c8fa5?source=collection_archive---------17-----------------------#2020-08-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><p id="582e" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">对您不了解的数据集进行统计分析</p></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><h2 id="c977" class="jx jy it bd jz ka kb dn kc kd ke dp kf jd kg kh ki jh kj kk kl jl km kn ko kp bi translated">对一个数据集的样本分析，你什么都不知道，什么都不懂！</h2></div><div class="ab cl jq jr hx js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="im in io ip iq"><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/fa69452776943a568d9d8911646db2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OoMqWG5Qwoao19yt"/></div></div><p class="lc ld gj gh gi le lf bd b be z dk translated">艾米丽·莫特在<a class="ae lg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8cda" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">最近，我有机会参加了由<a class="ae lg" href="https://www.mindsumo.com/contests/campus-analytics-challenge-2020" rel="noopener ugc nofollow" target="_blank">富国银行</a>举办的比赛。所提供的数据集只是各列中的一堆数字，并没有指明数据可能是什么。我一直认为数据分析需要对数据和领域的一些知识和理解，以执行有效的分析。我在下面附上了一个样本。它由从<strong class="iu lh"> X0 </strong>到<strong class="iu lh"> X29 </strong>的列组成，包括连续值和<strong class="iu lh"> XC </strong>，包括分类数据，即总共 30 个变量。我着手对整个数据集进行进一步分析，以理解数据。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi li"><img src="../Images/420f0120e6e5dfbdb64e120de4833370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WE0kSvzFUY3k_f_5C70mMQ.png"/></div></div></figure><h1 id="85b9" class="lj jy it bd jz lk ll lm kc ln lo lp kf lq lr ls ki lt lu lv kl lw lx ly ko lz bi translated">连续变量的正态性检验</h1><p id="21d8" class="pw-post-body-paragraph ir is it iu b iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl me jn jo jp im bi translated">我使用 QQ 图来确定变量的正态分布，并了解数据中是否存在任何偏差。所有的数据点都呈正态分布，偏差很小，此时不需要对数据进行任何处理就可以得到高斯分布。我更喜欢用 QQ 图进行初步分析，因为它可以很容易地分析数据并确定分布类型，如高斯分布、均匀分布等。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mf"><img src="../Images/2f0bc068c8b9d52984e70671f79fd5e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Lw86-XLSDpvAmgVoWjGbg.png"/></div></div></figure><p id="e099" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">一旦使用 QQ 图确定数据为正态分布，就可以进行夏皮罗维尔克测试来确认假设。它是专门为正态分布设计的。在这种情况下，零假设是变量呈正态分布。如果获得的 p 值小于 0.05，则拒绝零假设，并假设变量不是正态分布的。所有的值似乎都大于 0.05，这意味着所有的变量都遵循正态分布。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/e3315d938cd51d420c794c5cbddd8dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*cb9FDmsVWUuvP4PJTIC5sQ.png"/></div></figure><h1 id="f08f" class="lj jy it bd jz lk ll lm kc ln lo lp kf lq lr ls ki lt lu lv kl lw lx ly ko lz bi translated">分类变量</h1><p id="2d20" class="pw-post-body-paragraph ir is it iu b iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl me jn jo jp im bi translated">我检查了分类变量的分布，以检查数据集中的点是否均匀分布。变量的分布如下所示。该变量由 5 个唯一的值(A、B、C、D 和 E)组成，所有的值或多或少是均匀分布的。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mh"><img src="../Images/3f60a9b34ebc30114f5bfe8cfe14fd42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzB7bL1TqP81pMCMa6c1Zw.png"/></div></div></figure><p id="f1d6" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">我使用了<a class="ae lg" href="https://medium.com/@michaeldelsole/what-is-one-hot-encoding-and-how-to-do-it-f0ae272f1179" rel="noopener"> One-Hot Encoding </a>机制来将分类变量转换为每个结果分类值的二进制变量，如下所示。虽然这导致了维数的增加，但我希望稍后检查相关性，并删除或合并某些行。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/c567fbbb1f7277a294b78babce3a2ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*43ZKTzUN7Xl9it64iNNv9w.png"/></div></figure><h1 id="09f7" class="lj jy it bd jz lk ll lm kc ln lo lp kf lq lr ls ki lt lu lv kl lw lx ly ko lz bi translated">数据相关性</h1><p id="7bba" class="pw-post-body-paragraph ir is it iu b iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl me jn jo jp im bi translated">相关性是一项重要的技术，有助于确定变量之间的关系，剔除高度相关的数据。我们这样做的原因是，我们不想要高度相关的变量，因为它们以同样的方式影响最终的因变量。相关值的范围从-1 到 1，值 1 表示两者之间有很强的正相关，值-1 表示有很强的负相关。我们还计算相关性的统计显著性，以确定零假设(没有相关性)是否有效。我取了三个值作为衡量统计显著性的基准——<strong class="iu lh">0.1</strong>、<strong class="iu lh"> 0.05 </strong>和<strong class="iu lh"> 0.01 </strong>。下表是每组变量的相关值的一个小的子样本。小于 0.01 的 p 值表示高统计显著性，并且可以拒绝零假设，这由 3<strong class="iu lh">' *</strong>表示，而如果 p 值小于 0.1 但大于 0.05，这由 1 '<strong class="iu lh">*</strong>表示，则统计显著性较低。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mj"><img src="../Images/ca0d31ef27eafb12413c5f48bb86c539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ePXN_5HuByrShHW_6_BByA.png"/></div></div></figure><p id="7de2" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">上面的数据集没有任何具有高相关值的值。因此，我安全地继续假设这些值彼此不相关。我进一步探究了变量与因变量<strong class="iu lh"> y </strong>的相关性。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/e69f9dc0d5388a33520871f59cdd7806.png" data-original-src="https://miro.medium.com/v2/resize:fit:354/format:webp/1*sOYwGDfkE-AYf5EvdKbk9A.png"/></div></figure><p id="31c4" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">我们关心的是变量<strong class="iu lh"> y </strong>的预测。正如所见，有许多变量与<strong class="iu lh"> y </strong>没有任何相关性，也不具有统计显著性，这意味着这种关系很弱，我们可以安全地将它们从最终数据集中排除。其中包括<strong class="iu lh"> X5 </strong>、<strong class="iu lh"> X8 </strong>、<strong class="iu lh"> X9 </strong>、<strong class="iu lh"> X10 </strong>、<strong class="iu lh"> XC_C </strong>等变量。我没有排除其他相关性低但统计意义高的变量，因为可能有一个小样本会影响最终的因变量，我们不能完全排除它们。我们可以通过合并一些变量来进一步减少变量。我们这样做是基于与<strong class="iu lh"> y </strong>变量具有相同相关值的变量。这些包括—</p><ul class=""><li id="f327" class="ml mm it iu b iv iw iz ja jd mn jh mo jl mp jp mq mr ms mt bi translated"><strong class="iu lh"> X7 </strong>、<strong class="iu lh"> X11 </strong>、<strong class="iu lh"> X17 </strong>和<strong class="iu lh"> X21 </strong></li><li id="5bff" class="ml mm it iu b iv mu iz mv jd mw jh mx jl my jp mq mr ms mt bi translated"><strong class="iu lh"> X1 </strong>和<strong class="iu lh"> X23 </strong></li><li id="0c24" class="ml mm it iu b iv mu iz mv jd mw jh mx jl my jp mq mr ms mt bi translated"><strong class="iu lh"> X22 </strong>和<strong class="iu lh"> X26 </strong></li><li id="d909" class="ml mm it iu b iv mu iz mv jd mw jh mx jl my jp mq mr ms mt bi translated"><strong class="iu lh"> X4 </strong>、<strong class="iu lh"> X15 </strong>、<strong class="iu lh"> X19 </strong>和<strong class="iu lh"> X25 </strong></li></ul><p id="6538" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">我用优化技术合并了这些变量。让我们考虑一下变量，<strong class="iu lh"> X1 </strong>和<strong class="iu lh"> X23 </strong>。我通过假设一个线性关系<em class="mz">m</em>T34】X1+<em class="mz">n</em><strong class="iu lh">X23</strong>与<strong class="iu lh"> y </strong>来实现这一点。为了确定最大相关性，我们必须计算出<em class="mz"> m </em>和<em class="mz"> n </em>的最佳值。在所有情况下，我都假设<em class="mz"> n </em>为<strong class="iu lh"> 1 </strong>并求解<em class="mz">m</em>方程式如下所示。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/46d968a0ce9a52221ea7432aad768bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*Zc6xsveUXP6bBmlju0F-Dg.png"/></div></figure><p id="f7fa" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">一旦 n 被设置为<strong class="iu lh"> 1 </strong>，我们就可以很容易地解出 m。这可以代入上述线性方程中的每个值。这样我们就可以把上面的变量全部合并。如果分母为<strong class="iu lh"> 0 </strong>，则<em class="mz"> m </em>可作为<strong class="iu lh"> 1 </strong>，方程可解出<em class="mz"> n </em>。确保两个变量的相关值相等。合并后，我再次生成了相关表。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/a148e51356d149cbd4482dc43976b5ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*hGxh4R_3PlQrTQRm236U5A.png"/></div></figure><p id="99a7" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">我们可以看到，合并变量的相关值增加了，所有变量的统计显著性都很高。我设法将变量的数量从 30 个减少到 15 个。我现在可以使用这些变量将其输入到我的机器学习模型中，并根据验证数据集检查准确性。</p><h1 id="84ad" class="lj jy it bd jz lk ll lm kc ln lo lp kf lq lr ls ki lt lu lv kl lw lx ly ko lz bi translated"><strong class="ak">训练和验证数据</strong></h1><p id="e856" class="pw-post-body-paragraph ir is it iu b iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl me jn jo jp im bi translated">出于多种原因，我选择了一个逻辑回归模型来训练和预测这个数据集</p><ul class=""><li id="1fcb" class="ml mm it iu b iv iw iz ja jd mn jh mo jl mp jp mq mr ms mt bi translated">因变量是二元的</li><li id="5989" class="ml mm it iu b iv mu iz mv jd mw jh mx jl my jp mq mr ms mt bi translated">自变量与因变量相关</li></ul><p id="ee93" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">训练完模型后，我对照验证数据集检查了模型，结果如下。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/6f77d3958a21a15a83f71d36711762fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*dQ8qRsnDG_IvPtTqfl6HMA.png"/></div></figure><p id="7ffa" class="pw-post-body-paragraph ir is it iu b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp im bi translated">该模型的<code class="fe nd ne nf ng b">accuracy</code>为<strong class="iu lh"> 99.6% </strong>，而<code class="fe nd ne nf ng b">F1 score</code>为<strong class="iu lh"> 99.45% </strong>。</p><h1 id="c2e5" class="lj jy it bd jz lk ll lm kc ln lo lp kf lq lr ls ki lt lu lv kl lw lx ly ko lz bi translated">结论</h1><p id="3a5f" class="pw-post-body-paragraph ir is it iu b iv ma ix iy iz mb jb jc jd mc jf jg jh md jj jk jl me jn jo jp im bi translated">这是一个基本的探索性统计分析，旨在减少要素数量，并确保最终数据集中没有相关变量。使用一些简单的技术，我们可以保证得到好的结果，即使我们最初不明白数据是什么。主要步骤包括确保数据的正态分布和分类变量的有效编码方案。此外，可以基于变量之间的相关性移除和合并变量，之后可以选择合适的模型进行分析。你可以在 https://github.com/Raul9595/AnonyData 找到代码库。</p></div></div>    
</body>
</html>