<html>
<head>
<title>How to upload raw data from Google Ads to Google BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Google Ads上传原始数据到Google BigQuery</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-upload-raw-data-from-google-ads-to-google-bigquery-4bf0f2565f18?source=collection_archive---------39-----------------------#2020-06-08">https://towardsdatascience.com/how-to-upload-raw-data-from-google-ads-to-google-bigquery-4bf0f2565f18?source=collection_archive---------39-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9319457933c9f9e9f2f0530d47b88233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZkO4tSujL4BhDNGHtYz7oQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来源:<a class="ae jg" href="https://ru.depositphotos.com/170231376/stock-photo-backup-and-archive-concept.html" rel="noopener ugc nofollow" target="_blank">沉积照片</a></p></figure><div class=""/><div class=""><h2 id="1c55" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">如何将原始数据从你的谷歌广告账户上传到谷歌大查询，并识别自动标记广告活动的所有UTM标签</h2></div><p id="0e3c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过在Google Analytics中分析Google Ads广告活动的有效性，您可能会遇到采样、数据聚合或其他系统界面限制。幸运的是，这个问题很容易解决，只需将广告服务的原始数据上传到Google BigQuery即可。</p><h1 id="a149" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">为什么你需要谷歌广告的原始数据</h1><p id="a070" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">来自谷歌广告的原始数据将允许你精确到每个关键词来分析广告活动。通过将数据上传到BigQuery，您可以:</p><ul class=""><li id="84c7" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">构建您想要的详细报告，不受GA限制。</li><li id="05d2" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">在会话和用户层面确定广告活动的效果。</li><li id="3922" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">按地区、用户类型(新用户或老客户)、设备和任何其他参数计算ROI、ROAS和CRR。</li><li id="b847" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">有效管理您的价格，并创建<a class="ae jg" href="https://www.owox.com/blog/use-cases/remarketing/" rel="noopener ugc nofollow" target="_blank">再销售清单。</a></li><li id="9b49" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">结合来自Google Ads、Google Analytics和CRM的数据，根据您的商品的利润和可赎回性来评估活动的有效性。</li><li id="350b" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">训练你的ML模型以获得更精确的计划。</li></ul><p id="105d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要了解哪些活动、广告和关键词将用户带到您的网站，您需要将来自Google广告和分析的数据结合到BigQuery中。您可以使用<a class="ae jg" href="https://www.owox.com/products/bi/pipeline/google-analytics-to-google-bigquery/" rel="noopener ugc nofollow" target="_blank"> OWOX BI流来实现这一点。</a></p><p id="7867" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">流式传输这些信息会将您网站上未采样的用户行为数据发送到GBQ。实时传输点击，然后基于这些点击形成会话。</p><p id="0c28" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">OWOX BI流量来源信息取自UTM tags广告标记。标签为手动，而<a class="ae jg" href="https://support.google.com/analytics/answer/1033981?hl=en&amp;ref_topic=1308612" rel="noopener ugc nofollow" target="_blank">为自动。</a></p><p id="12a6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设您手动标记了广告，并获得了以下URL:</p><p id="8bbe" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nf">https://example.com/?utm_source=facebook&amp;UTM _ medium = CPC&amp;UTM _ campaign = UTM _ tags</em></p><p id="b0b0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，连接OWOX BI后，您将在GBQ表中获得来源、渠道和活动数据:</p><ul class=""><li id="00b2" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">trafficSource.source —谷歌</li><li id="cb41" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">trafficSource.medium — cpc</li><li id="2a7f" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">traffic source . campaign-UTM _ tags</li></ul><p id="b06a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您在广告服务中启用了自动标记，则会为您的每个广告分配一个特殊的gclid参数。当用户点击公告时，它被添加到登录页面URL。</p><p id="0630" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种链接示例:</p><p id="3a88" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="nf">http://www.example.com/?gclid=TeSter-123</em></p><p id="488f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果使用自动标记，没有原始数据就无法从gclid获得source、medium或campaign这些字段在OWOX BI收集的BigQuery表中将为空。</p><p id="f556" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，如果只有gclid，您能做什么？如何获得活动名称和其他参数？配置从Google Ads到GBQ的自动上传。</p><p id="e806" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">注意:</strong>如果公告根本没有标记，OWOX BI将分配<a class="ae jg" href="https://support.google.com/analytics/answer/6205762#flowchart" rel="noopener ugc nofollow" target="_blank">链接</a>如下:</p><ul class=""><li id="6aac" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">对于非Google来源，作为推荐流量(例如facebook/referral)</li><li id="fdef" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">对于Google source作为直接流量(直接/无)</li></ul><p id="0633" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您的报告中有大量<a class="ae jg" href="https://www.owox.com/blog/articles/direct-traffic/" rel="noopener ugc nofollow" target="_blank">直接/无</a>流量，您可能没有启用僵尸过滤，或者您可能有大量未标记的广告。</p><h1 id="ecf3" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">从Google Ads上传原始数据到BigQuery的两种方法</h1><p id="8ccf" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们使用并推荐两种方法从Google Ads上传原始数据:<a class="ae jg" href="https://cloud.google.com/bigquery/transfer/" rel="noopener ugc nofollow" target="_blank">数据传输连接器</a>和<a class="ae jg" href="https://developers.google.com/google-ads/scripts/docs/solutions/bigquery-exporter" rel="noopener ugc nofollow" target="_blank"> Ads脚本。</a></p><p id="0c59" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选择哪种方式取决于你的目标和预算。为了让您更容易做出决定，我们准备了一份对照表:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/76850a2380af859f1de7bef05546fb68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2W3VY4tRIp0JNTv8U_rkAA.png"/></div></div></figure><h1 id="b2a7" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">你需要什么设置</h1><p id="1e99" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">以下位置的活动项目和客户:</p><ul class=""><li id="3320" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">谷歌云平台(GCP)</li><li id="0180" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">谷歌大查询</li><li id="4e24" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">OWOX BI</li><li id="65eb" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">谷歌广告</li></ul><p id="e783" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">访问:</p><ul class=""><li id="16a3" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">GCP的所有者</li><li id="8d58" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">GBQ中的管理员</li><li id="2efa" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">在OWOX BI中编辑。重要提示:只有创建了Google Analytics→Google big query streaming pipeline的用户才能打开从Google Ads下载。</li><li id="bc45" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">在谷歌广告中阅读</li></ul><h1 id="f5e3" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">如何在GBQ中授予访问权限</h1><p id="64f4" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">打开<a class="ae jg" href="https://console.cloud.google.com/getting-started?angularJsUrl=" rel="noopener ugc nofollow" target="_blank"> GCP控制台</a>，从侧面菜单中选择IAM和admin —管理资源。然后选择项目并单击添加成员。输入用户的电子邮件，选择BigQuery管理员角色，并保存您的更改。</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/7f216eb6018f586c0b3de1d6a142c48d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JIF1tTrEpakKx94n7ZxTg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><h1 id="1948" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">如何使用数据传输配置上传</h1><h2 id="009f" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">第一步。在谷歌云平台中创建一个项目</h2><p id="28ff" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">如果你在GCP已经有一个项目，跳过这一步。如果没有，打开<a class="ae jg" href="https://console.cloud.google.com/getting-started?angularJsUrl=" rel="noopener ugc nofollow" target="_blank"> GCP控制台</a>并从侧面菜单中选择IAM和admin —管理资源。单击创建项目按钮。然后输入项目名称，指定组织，并单击创建:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/b61c539fb43d152d43fc2f3b598b89b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D3JBNZMv8TUDltMVBOF5Fg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="0e30" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保启用计费。为此，请打开侧面菜单中的“计费-账户管理”选项卡，选择项目，并链接计费账户:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/54ac932e9d09b11feb3d4e8bbdf3981a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y-wrWVpKs85ustrn.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="9cd4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，通过输入您的联系人和支付卡详细信息来完成所有字段。如果这是你在GCP的第一个项目，你会得到300美元，可以用12个月。每月有1-2个谷歌广告账户和多达100，000个独立用户的项目将足够用一年。当你用完这个额度，就不需要还钱了。为了进一步使用，您只需将余额充值到与项目关联的卡上。</p><h2 id="89d9" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">第二步。打开API BigQuery</h2><p id="d098" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">创建项目后，必须激活BigQuery API。为此，请从GCP侧菜单转到“API和服务—仪表板”,选择项目，然后单击“启用API和服务”:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/b9314512eb7f2fe12e9dbdb4283155c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AOk_1pdm1aeaPRGd.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="6aba" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在API库中，搜索“BigQuery API”并单击启用:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/9821431f23c693406ebdb9be160c493e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6I1_zqD2xKswbfTW.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="8f77" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要使用API，请单击创建凭据:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/ba116c1f2d53679748d47445ffa85610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cT8dV0uHzDtg-FF1.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="4fd6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从下拉列表中选择BigQuery API，然后单击我需要什么凭据？</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/9fe5379d48657c80a7828df9f73b3e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/0*UIG96vUMdeIVEFN9.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="547d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建服务帐户的名称，并指定BigQuery角色访问级别。选择JSON密钥的类型，然后单击继续:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/9b138b4044dee461b863540f11ab1f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S1qXleA60Iwp_QHd.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><h2 id="80aa" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">第三步。激活数据传输API</h2><p id="6e50" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">接下来，您需要激活BigQuery中的数据服务。为此，打开<a class="ae jg" href="https://console.cloud.google.com/projectselector2/bigquery?pli=1&amp;supportedpurview=project" rel="noopener ugc nofollow" target="_blank"> GBQ </a>并从左侧菜单中选择传输。然后启用BigQuery数据传输API:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/bd1b859e02f7b214ad8e6b8a7da1781f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ce4wxqiEH4ODI3bQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><h2 id="ed63" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">第四步。准备GBQ中的数据集</h2><p id="dbc1" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在BigQuery中，选择项目并单击右侧的Create Dataset按钮。完成新数据集的所有必填字段(名称、位置、保留期):</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/41ef0f34b835ae6efadc06e1ba9a57bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jd8Vd506wqdm3wPs.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><h2 id="4987" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">第五步。从Google Ads设置数据传输</h2><p id="55fc" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">单击侧面菜单上的“转移”选项卡，然后单击“创建转移”。然后选择Google Ads(以前的AdWords)作为来源，并输入上传的名称，例如Data Transfer。</p><p id="8b1a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在“时间表选项”下，您可以保留默认设置“立即开始”,或者设置您想要开始下载的日期和时间。在重复字段中，选择上传频率:每天、每周、每月按需等。</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/e0d1221db431a3908966c834b7f9d129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wSytMhOjuXnz9DjP.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="ddee" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，您必须指定GBQ数据集，以便从Google Ads加载报告。输入客户ID(这是您的Google Ads帐户的ID或MCC ID ),然后单击添加。你可以在谷歌广告账户的右上角查看客户ID，就在你的邮箱旁边。</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/c48177cdbc9e28d36c0667eb6d49038e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2OvwHjOV3sysIuau.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="ea14" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，您需要授权您正在使用的Gmail帐户。第二天，该信息将出现在您设置转移时指定的数据集中。</p><p id="2d9e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，您将在GBQ中收到大量原始数据,您可以使用这些数据:按活动、受众、常用(自定义)表格、关键字和转换的表格。例如，如果您想要构建一个定制的仪表板，您可以从这些表中提取非聚合数据。</p><h2 id="abdb" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何使用Ads脚本设置上传</h2><p id="67de" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">打开您的Google Ads帐户，单击右上角的工具和设置，选择批量操作—脚本，然后单击加号:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/bf07ca575d117542c3d9a2374274b63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W-S5xD6nJt96wMk1.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="1924" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，在右上角，单击高级API按钮，选择BigQuery，并保存您的更改:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/4cd47bbfd07eb04a5923df3d094677e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0lu-plOCROTg-kNf.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="b101" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请务必使用您登录Google Ads时使用的帐户进行注册:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/13f4a113d404e3b347812ca6b8de401f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WktAKjtw-663zMm7.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="9d4d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">复制<a class="ae jg" href="https://docs.google.com/document/d/1p0wrwR8XLq1xsBSiVBdNT_RfyaOrlCwu8W9zUP4PzAI/edit" rel="noopener ugc nofollow" target="_blank">这个剧本</a>。在BIGQUERY_PROJECT_ID、BIGQUERY_DATASET_ID和您的电子邮件行中，用您自己的信息替换这些值:项目名称、GBQ数据集和电子邮件。将脚本文本粘贴到文本编辑器中。</p><p id="0034" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在运行脚本之前，一定要单击右下角的预览按钮来检查结果。如果其中有错误，系统会警告您并指出错误发生在哪一行，如下图所示:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/0d126d4ae6b332ffd261bee7607b3ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oZEgqA-Y8GOF1tAD.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="a090" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果没有错误，请单击运行按钮:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/cba48ccf331ec8345978f53f57d82a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wMqz82Yuua9CIA9V.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="5521" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，您将在GBQ中收到一份新的CLICK_PERFORMANCE_REPORT报告，该报告将于第二天提供:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/2b8a15196e2f4d9557a72fb44641f085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r8J561vyRNO3Z0BE.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="9304" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回想一下，当您使用数据传输时，您会得到大量原始的非聚合数据。与广告脚本，你只会有关于<a class="ae jg" href="https://developers.google.com/adwords/api/docs/appendix/reports/click-performance-report" rel="noopener ugc nofollow" target="_blank">某些领域的信息。</a></p><p id="a899" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本次上传的以下字段包含在与会话相关的OWOX BI表中:</p><ul class=""><li id="53d1" class="mr ms jj la b lb lc le lf lh mt ll mu lp mv lt mw mx my mz bi translated">GclId</li><li id="804f" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">CampaignId</li><li id="bc92" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">活动名称</li><li id="d14d" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">AdGroupId</li><li id="2f9c" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">AdGroupName</li><li id="7d78" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">标准Id</li><li id="2c5b" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">标准参数</li><li id="8137" class="mr ms jj la b lb na le nb lh nc ll nd lp ne lt mw mx my mz bi translated">关键字匹配类型</li></ul><h2 id="f8b3" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何将从Google Ads下载的数据连接到OWOX BI</h2><p id="8015" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">现在，你需要将谷歌广告的信息与网站数据结合起来，以了解用户通过哪些活动到达了你的网站。在BigQuery中得到的表，比如数据传输，没有客户机ID参数。您只能通过将gclid数据链接到OWOX BI流数据来确定哪个客户点击了广告。</p><p id="200e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你还没有OWOX BI中的Google Analytics → Google BigQuery流管道，请阅读<a class="ae jg" href="https://support.owox.com/hc/en-us/articles/217490557" rel="noopener ugc nofollow" target="_blank">关于如何创建它的说明。</a></p><p id="f0b0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后转到您的OWOX BI项目，打开这个管道。单击设置选项卡，然后在会话数据收集下，单击编辑设置:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/112465158ddb97913fd88afeeed9745a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*12LygJ-bnp4yF5DL.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="f261" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用滑块为Google Ads自动标记的活动启用数据收集，然后单击更改设置:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi of"><img src="../Images/96758c0959ddd3b2b4ebee3dcfc53c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AQbobdTWIZnlk4NG.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="526d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选择自动标签标记类型，指定如何将数据传输或Ads脚本加载到BigQuery。指定将从中下载Google Ads数据的项目和数据集，并保存您的设置:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/1f937efc33c69900838bfea86bbb3808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6VS6CpsX0eqfeYo_.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><h2 id="0b15" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">有用的提示</h2><p id="f711" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><strong class="la jk">提示1。</strong>通过数据传输，您可以将Google Ads中的历史数据上传到GBQ。同时，对加载的总周期没有限制(一年或三年)，但每次只加载180天的数据。</p><p id="d5d4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以通过选择所需的传输，使用“传输”选项卡上的“计划回填”按钮来激活上传并指定时间段:</p><figure class="nh ni nj nk gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/8dd9382792c6f567babcc7d7863d7eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x5IpxBdDKPQiX8ZEzY3vUg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由作者提供</p></figure><p id="9083" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">技巧二。如果您想检查GCP将收费的Google Ads帐户的数量，您需要使用以下查询来确定Customer表中ExternalCustomerID的数量:</p><pre class="nh ni nj nk gt oh oi oj ok aw ol bi"><span id="ebe9" class="nm lv jj oi b gy om on l oo op"><strong class="oi jk">SELECT</strong> <br/>ExternalCustomerId<br/><strong class="oi jk">FROM</strong> `project_name.dataset_name.Customer_*`<br/><strong class="oi jk">WHERE</strong> _PARTITIONTIME &gt;= "2020-01-01 00:00:00" <strong class="oi jk">AND</strong> _PARTITIONTIME &lt; "2020-07-10 00:00:00"<br/><strong class="oi jk">group</strong> <strong class="oi jk">by</strong> 1</span></pre><p id="9210" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以在查询中编辑日期。</p><p id="95ef" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">技巧三。您可以使用SQL查询自己访问上传的数据。例如，下面是一个查询，用于从数据传输派生的“Campaign”和“CampaignBasicStats”表中确定活动的有效性:</p><pre class="nh ni nj nk gt oh oi oj ok aw ol bi"><span id="9d05" class="nm lv jj oi b gy om on l oo op"><strong class="oi jk">SELECT</strong><br/>{<strong class="oi jk">source</strong> <strong class="oi jk">language</strong>="sql"}<br/>  c.ExternalCustomerId,<br/>  c.CampaignName,<br/>  c.CampaignStatus,<br/>  <strong class="oi jk">SUM</strong>(cs.Impressions) <strong class="oi jk">AS</strong> Impressions,<br/>  <strong class="oi jk">SUM</strong>(cs.Interactions) <strong class="oi jk">AS</strong> Interactions,<br/>{/<strong class="oi jk">source</strong>}<br/>  (<strong class="oi jk">SUM</strong>(cs.Cost) / 1000000) <strong class="oi jk">AS</strong> <strong class="oi jk">Cost</strong><br/><strong class="oi jk">FROM</strong><br/>  `[DATASET].Campaign_[CUSTOMER_ID]` c<br/><strong class="oi jk">LEFT</strong> <strong class="oi jk">JOIN</strong><br/>{<strong class="oi jk">source</strong> <strong class="oi jk">language</strong>="sql"}<br/>{<strong class="oi jk">source</strong> <strong class="oi jk">language</strong>="sql"}<br/>  `[DATASET].CampaignBasicStats_[CUSTOMER_ID]` cs<br/><strong class="oi jk">ON</strong><br/>  (c.CampaignId = cs.CampaignId<br/>   <strong class="oi jk">AND</strong> cs._DATA_DATE <strong class="oi jk">BETWEEN</strong><br/>   <strong class="oi jk">DATE_ADD</strong>(<strong class="oi jk">CURRENT_DATE</strong>(), INTERVAL -31 <strong class="oi jk">DAY</strong>) <strong class="oi jk">AND</strong> <strong class="oi jk">DATE_ADD</strong>(<strong class="oi jk">CURRENT_DATE</strong>(), INTERVAL -1 <strong class="oi jk">DAY</strong>))<br/><strong class="oi jk">WHERE</strong><br/>  c._DATA_DATE = c._LATEST_DATE<br/><strong class="oi jk">GROUP</strong> <strong class="oi jk">BY</strong><br/>  1, 2, 3<br/><strong class="oi jk">ORDER</strong> <strong class="oi jk">BY</strong><br/>  Impressions <strong class="oi jk">DESC</strong></span></pre><p id="1dff" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">页（page的缩写）如果你需要帮助上传和合并数据到谷歌大查询，我们随时准备提供帮助。</p></div></div>    
</body>
</html>