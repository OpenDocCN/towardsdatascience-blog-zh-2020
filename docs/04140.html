<html>
<head>
<title>Interactively Plot Graph Networks With IGViz</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用IGViz交互式绘制图形网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactively-plot-graph-networks-with-igviz-c75da26858ec?source=collection_archive---------44-----------------------#2020-04-15">https://towardsdatascience.com/interactively-plot-graph-networks-with-igviz-c75da26858ec?source=collection_archive---------44-----------------------#2020-04-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="622c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Plotly轻松查看图形网络</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5107df07bbda3fc2bc80e4ed689521cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D3EfZ6ZxfRCDQEJ4LmeURg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.instagram.com/jusspreme/?hl=en" rel="noopener ugc nofollow" target="_blank"> @jusspreme </a>的Justin Jairam拍摄的照片</p></figure><p id="ff29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的几个月里，我开始探索使用图形网络来检测网络安全中的恶意和非恶意行为。我发现处理图形的一个主要难点是以简洁、视觉上吸引人的方式可视化网络、节点属性和边。默认的绘图选项建立在Matplotlib上，这对于这种类型的可视化来说是次优的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/d8350784bc7064330cd3eb823952d057.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/0*DQuolLAWLgqajuoG"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Matplotlib的默认图形绘制</p></figure><p id="fbd9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不想摆弄Matplotlib axes API，手动定制图表或创建一次性函数，而是想要一些更健壮、开箱即用、视觉上更吸引人和简洁的东西，同时最大限度地增加图表上可以显示的信息量。</p><p id="1e57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">进来的是我最喜欢的可视化库Plotly。Plotly已经有了一些关于如何可视化图形的<a class="ae ky" href="https://plotly.com/python/network-graphs" rel="noopener ugc nofollow" target="_blank">文档</a>，但这仍然是一个相当漫长的过程，并且只针对非定向图形。目标是找到(或创建)一个遵循<code class="fe lw lx ly lz b">.plot</code>标准的统一API，并对图形进行一些定制。因此，我做了这个叫做<a class="ae ky" href="https://github.com/Ashton-Sidhu/plotly-graph" rel="noopener ugc nofollow" target="_blank">交互式图形可视化(igviz) </a>的包。</p><blockquote class="ma mb mc"><p id="eb58" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>目前仅支持Networkx，但下一步将扩展到Apache的<code class="fe lw lx ly lz b">Graphx</code>。</p></blockquote><p id="66ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看任何情节的交互性，您可以在这里查看<a class="ae ky" href="https://ashton-sidhu.github.io/Blog/jupyter/graph/visualization/2020/03/27/intro-to-igviz.html#The-Basics" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="ef98" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">使用</h1><p id="7825" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">安装运行<code class="fe lw lx ly lz b">pip install igviz</code></p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="b72f" class="ni mi it lz b gy nj nk l nl nm">import networkx as nx<br/>import igviz as ig</span></pre><p id="1e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于演示目的，创建一个随机图，为每个节点分配一个名为<code class="fe lw lx ly lz b">prop</code>的属性，并将值设为12。</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="5f25" class="ni mi it lz b gy nj nk l nl nm">G = nx.random_geometric_graph(200, 0.125)<br/>nx.set_node_attributes(G, 12, "prop")</span></pre><p id="6994" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，节点的大小和颜色由其自身的度数决定。节点的度就是它拥有的边(连接两个节点的线)的数量。悬停在节点上可以看到节点的度数！</p><blockquote class="ma mb mc"><p id="6ccc" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>这也适用于有向图和多重图。有向图将显示从节点到节点的箭头。</p></blockquote><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="fc5e" class="ni mi it lz b gy nj nk l nl nm">fig = ig.plot(G)<br/>fig.show()</span><span id="ec53" class="ni mi it lz b gy nn nk l nl nm"># ig.plot(G) also works.</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/a489a90e03653a1e80b4cc31cfb80f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yrWzY17byhiCMDIO.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用IGViz的默认图形绘制</p></figure><blockquote class="ma mb mc"><p id="3cf6" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">提示:</strong>谈到可定制性，您可以将节点的大小(<code class="fe lw lx ly lz b">size_method</code>)更改为静态的，基于节点的属性或您自己的定制大小方法。</p><p id="28e7" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">提示:</strong>颜色可以改变(<code class="fe lw lx ly lz b">color_method</code>)为静态颜色(十六进制、纯文本等)。)，基于节点的属性或您自己的自定义颜色方法。</p></blockquote><p id="f61a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有更多的选项，还会有更多的选项，但这些选项会极大地影响图表的可视化和信息。</p><h1 id="32b9" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">自定义图形外观</h1><p id="9b9c" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">这里所有的节点都被设置为相同的大小，颜色被设置为浅红色，同时在悬停时显示<code class="fe lw lx ly lz b">prop</code>属性。</p><blockquote class="ma mb mc"><p id="59ca" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">提示:</strong>要在悬停时显示节点的属性，请为您想要显示的节点属性的<code class="fe lw lx ly lz b">node_text</code>参数指定一个列表。默认情况下，仅显示度数。</p></blockquote><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="dd2d" class="ni mi it lz b gy nj nk l nl nm">fig = ig.plot(<br/>    G, # Your graph<br/>    title="My Graph",<br/>    size_method="static", # Makes node sizes the same<br/>    color_method="#ffcccb", # Makes all the node colours black,<br/>    node_text=["prop"], # Adds the 'prop' property to the hover text of the node<br/>    annotation_text="Visualization made by &lt;a href='https://github.com/Ashton-Sidhu/plotly-graph'&gt;igviz&lt;/a&gt; &amp; plotly.", # Adds a text annotation to the graph<br/>)<br/><br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/0bfe65063d3a225f684a17cd1af5a779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_iCxUHAkHywbWSJ7.png"/></div></div></figure><blockquote class="ma mb mc"><p id="1496" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">提示</strong>:如果你想在一条边上悬停时显示边属性，调用<code class="fe lw lx ly lz b">ig.plot</code>时添加<code class="fe lw lx ly lz b">show_edgetext=True</code>！</p></blockquote><p id="a5b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，调整大小和颜色的方法基于每个节点的<code class="fe lw lx ly lz b">prop</code>属性，我们在悬停时显示<code class="fe lw lx ly lz b">prop</code>属性。</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="72e0" class="ni mi it lz b gy nj nk l nl nm">fig = ig.plot(<br/>    G,<br/>    title="My Graph",<br/>    size_method="prop", # Makes node sizes the size of the "prop" property<br/>    color_method="prop", # Colors the nodes based off the "prop" property and a color scale,<br/>    node_text=["prop"], # Adds the 'prop' property to the hover text of the node<br/>)<br/><br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/99840a06a0183af61dd20a80a9483388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-6vAoh2JY7iz6EjU.png"/></div></div></figure><p id="0f68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要添加您自己的大小和颜色方法，请将与图中每个节点相关的颜色或大小列表传递给<code class="fe lw lx ly lz b">size_method</code>和<code class="fe lw lx ly lz b">color_method</code>参数。</p><blockquote class="ma mb mc"><p id="99ce" class="kz la md lb b lc ld ju le lf lg jx lh me lj lk ll mf ln lo lp mg lr ls lt lu im bi translated"><strong class="lb iu">提示:</strong>要改变色阶，改变<code class="fe lw lx ly lz b">colorscale</code>参数！</p></blockquote><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="d324" class="ni mi it lz b gy nj nk l nl nm">color_list = []<br/>sizing_list = []</span><span id="1b4a" class="ni mi it lz b gy nn nk l nl nm">for node in G.nodes():<br/>    size_and_color = G.degree(node) * 3</span><span id="2e3d" class="ni mi it lz b gy nn nk l nl nm">    color_list.append(size_and_color)<br/>    sizing_list.append(size_and_color)</span><span id="1e2d" class="ni mi it lz b gy nn nk l nl nm">fig = ig.plot(<br/>    G,<br/>    title="My Graph",<br/>    size_method=sizing_list, # Makes node sizes the size of the "prop" property<br/>    color_method=color_list, # Colors the nodes based off the "prop" property and a color scale<br/>    node_text=["prop"], # Adds the 'prop' property to the hover text of the node<br/>)</span><span id="94b8" class="ni mi it lz b gy nn nk l nl nm">fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/a70a48fb458e60631078ef47f6698e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tJTd0WuURMrMD8bX.png"/></div></div></figure><h1 id="32d8" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">布局</h1><p id="fb45" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">您可以通过指定布局类型来更改图表的组织和布局方式。Networkx附带了可以使用的预定义布局，我们可以通过<code class="fe lw lx ly lz b">layout</code>应用它们。</p><p id="a830" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，igviz寻找<code class="fe lw lx ly lz b">pos</code>节点属性，如果它不存在，它将默认为随机布局。</p><p id="0a83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">支持的布局有:</p><ul class=""><li id="3892" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated"><strong class="lb iu">随机(默认)</strong>:在单位正方形内随机均匀放置节点。对于每个节点，通过在区间[0.0，1.0]上均匀随机地选择每个dim坐标来生成位置。</li><li id="a0a1" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">圆形</strong>:在一个圆上定位节点。</li><li id="77fa" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu"> kamada </strong>:使用Kamada-Kawai路径长度成本函数定位节点。</li><li id="ed50" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">平面</strong>:如果可能的话(如果图形是平面的)，定位没有边相交的节点。</li><li id="f9c1" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu"> spring </strong>:使用Fruchterman-Reingold力定向算法定位节点。</li><li id="60fc" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">谱</strong>:使用图拉普拉斯的特征向量定位节点。</li><li id="c3d8" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated"><strong class="lb iu">螺旋</strong>:在螺旋布局中定位节点。</li></ul><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="5ab1" class="ni mi it lz b gy nj nk l nl nm">fig = ig.plot(<br/>    G,<br/>    title="My Graph",<br/>    layout="kamada"<br/>)<br/><br/>fig.show()</span></pre><p id="8950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要添加您自己的<code class="fe lw lx ly lz b">pos</code>属性，您可以通过<code class="fe lw lx ly lz b">nx.set_node_attributes</code>功能进行设置。</p><pre class="kj kk kl km gt ne lz nf ng aw nh bi"><span id="ddb3" class="ni mi it lz b gy nj nk l nl nm">pos_dict = {<br/>    0: [1, 2], # X, Y coordinates for Node 0<br/>    1: [1.5, 3], # X, Y coordinates for Node 1<br/>    ...<br/>}<br/><br/>nx.set_node_attributes(G, pos_dict, "pos")<br/><br/>fig = ig.plot(G)<br/><br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/9f4ec74a85f92bf290c2832487a2eefc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uSJG0IDgBamSRPLv.png"/></div></div></figure><h1 id="0539" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">反馈</h1><p id="88d5" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我鼓励所有关于这个帖子或Igviz的反馈。你可以给我发电子邮件到sidhuashton@gmail.com或者在帖子上留言。</p><p id="0f2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这个项目，请给它一个<a class="ae ky" href="https://github.com/Ashton-Sidhu/plotly-graph" rel="noopener ugc nofollow" target="_blank">星</a>以及关注我在<a class="ae ky" href="https://twitter.com/ashtonasidhu" rel="noopener ugc nofollow" target="_blank">推特</a>上的更多更新！</p><p id="0860" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何错误或功能请求，请在Github repo上创建一个问题。我欢迎所有功能请求和任何贡献。如果你想为一个开源项目做贡献，这个项目是一个很好的开端——如果你需要帮助，可以随时给我发消息。</p></div></div>    
</body>
</html>