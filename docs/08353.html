<html>
<head>
<title>GraphQL With Python Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带 Python Flask 的 GraphQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/graphql-with-python-flask-560d083ffa01?source=collection_archive---------20-----------------------#2020-06-18">https://towardsdatascience.com/graphql-with-python-flask-560d083ffa01?source=collection_archive---------20-----------------------#2020-06-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9463" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">GraphQL、石墨烯、Flask 和 Mysql</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/459488c324f88053df18a24842a6d90b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pZhlopZtbmWf04IR"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@lazycreekimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Michael Dziedzic </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="5f86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，让我们先谈谈我们的目标。</p><p id="fc6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在尝试开发一个在 Flask 上运行的初学者工具包项目，它具有以下功能:</p><ul class=""><li id="d0ec" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">GraphQL 支持</li><li id="dffb" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">数据库集成</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8e5b" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">先决条件</h1><p id="287c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">对于本教程，我们需要:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="2a2d" class="ns mr it no b gy nt nu l nv nw">- Python<br/>- Pip<br/>- Virtualenv<br/>- Docker</span></pre><h1 id="9f78" class="mq mr it bd ms mt nx mv mw mx ny mz na jz nz ka nc kc oa kd ne kf ob kg ng nh bi translated">安装烧瓶</h1><blockquote class="oc od oe"><p id="bd1a" class="kz la of lb b lc ld ju le lf lg jx lh og lj lk ll oh ln lo lp oi lr ls lt lu im bi translated"><em class="it"> Flask 是一个基于 Werkzeug、Jinja 2 和 good intentions 的 Python 微框架。—烧瓶文件</em></p></blockquote><p id="f1fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">建立一个准系统 Flask 项目非常简单。然而，由于我们希望内置相当多的功能，下面的步骤将比通常花费稍长的时间。</p><p id="75b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先创建一个虚拟环境。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="8dd5" class="ns mr it no b gy nt nu l nv nw">$ virtualenv venv<br/>$ source venv/bin/activate</span></pre><p id="f24b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们可以安装所需的软件包。为了不使每个人感到困惑，我将只分别包括每个步骤所需的包。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="777e" class="ns mr it no b gy nt nu l nv nw">$ pip install flask flask_script<br/>$ mkdir -p app/__init__.py<br/>$ touch manage.py</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="4f40" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">MySQL 与 Flask 的集成</h1><p id="10f4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们首先必须安装所需的依赖项</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b777" class="ns mr it no b gy nt nu l nv nw">$ pip install flask-sqlalchemy pymysql</span></pre><p id="99e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以开始设置我们的 Flask 应用程序来连接我们的 MySQL 服务。为此，我们必须添加一个<code class="fe oj ok ol no b">config.py</code>文件，并更新我们的<code class="fe oj ok ol no b">app/__init__.py</code>文件。</p><p id="e015" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用一个配置文件，我们能够分离我们的环境变量，以及根据需要存储我们的常量变量。</p><p id="e7de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，当我们运行<code class="fe oj ok ol no b">docker-compose up</code>时，应用程序将开始运行，并与 MySQL 服务连接。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="ef1c" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">设置 GraphQL</h1><p id="a555" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">GraphQL 是一种针对 API 和运行时的查询语言，用于使用现有数据完成这些查询。GraphQL 为 API 中的数据提供了一个完整且易于理解的描述，让客户能够准确地了解他们的需求，使 API 更容易随时间发展，并支持强大的开发工具。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="5027" class="ns mr it no b gy nt nu l nv nw">$ pip install graphene Flask-GraphQL</span></pre><p id="a75c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们分析一下我们刚刚安装的软件包。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="be02" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">烧瓶图</h1><p id="0593" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><a class="ae ky" href="https://github.com/graphql-python/flask-graphql" rel="noopener ugc nofollow" target="_blank"> Flask-GraphQL </a>是一个包装层，为 Flask 应用程序增加了 GraphQL 支持。</p><p id="7fed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须为客户端添加一个<code class="fe oj ok ol no b">/graphql</code>路由来访问 API。为此，我们可以简单地更新我们的<code class="fe oj ok ol no b">app/__init__.py</code>文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="1983" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们从<code class="fe oj ok ol no b">Flask-GraphQL</code>模块导入了<code class="fe oj ok ol no b">GraphQLView</code>，并使用它来实现我们的<code class="fe oj ok ol no b">/graphql</code>路线。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="46fc" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">石墨烯</h1><p id="2f78" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">接下来，我们将使用<a class="ae ky" href="https://graphene-python.org/" rel="noopener ugc nofollow" target="_blank">石墨烯-Python </a>包。Graphene 是一个开源库，允许开发人员使用 Python 中的 GraphQL 构建简单但可扩展的 API。</p><p id="28f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你已经从我们最新的<code class="fe oj ok ol no b">app/__init__.py</code>文件中注意到，我们实际上缺少一个<code class="fe oj ok ol no b">app/schema.py</code>文件来让我们的 Flask 应用程序工作。GraphQL 模式是任何 GraphQL 服务器实现的核心，它描述了连接到它的客户机可用的功能。</p><p id="1282" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们将创建一个简单的模式，这样我们的应用程序将能够运行，没有任何错误。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="3c42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，尝试运行您的应用程序。当你访问<a class="ae ky" href="http://localhost:5000/graphql%60" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/graph QL</a>时，你应该能看到这个页面。如果你熟悉 GraphQL，这个页面你应该很熟悉。这是一个允许你输入 GraphQL 查询的界面。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="3c41" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="c59a" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我希望本文能让您更好地理解和概述如何使用 GraphQL 构建 Python 应用程序。这也可以通过 Django 框架来实现。</p><p id="d68a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还在这里添加了一个 Github 知识库供参考<a class="ae ky" href="https://github.com/maniish-jaiin/flask-graphql" rel="noopener ugc nofollow" target="_blank"/>。这是 GraphQL 最佳实践的另一个故事，您可能会感兴趣。</p><div class="oo op gp gr oq or"><a rel="noopener follow" target="_blank" href="/graphql-best-practices-3fda586538c4"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd iu gy z fp ow fr fs ox fu fw is bi translated">GraphQL 最佳实践</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">在使用 GraphQL 6 个月之后，我分享了我对创建 graph QL 服务器的良好实践的想法</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">towardsdatascience.com</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf ks or"/></div></div></a></div></div></div>    
</body>
</html>