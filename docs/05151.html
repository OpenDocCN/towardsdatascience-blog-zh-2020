<html>
<head>
<title>How to use the Google Maps API with Custom styling in React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 React.js 中使用带有自定义样式的 Google Maps API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-the-google-maps-api-with-custom-styling-in-react-js-f6e7e59273df?source=collection_archive---------8-----------------------#2020-05-03">https://towardsdatascience.com/how-to-use-the-google-maps-api-with-custom-styling-in-react-js-f6e7e59273df?source=collection_archive---------8-----------------------#2020-05-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a7df" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">前端</h2><div class=""/><div class=""><h2 id="dde5" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在 React 项目中集成漂亮的谷歌地图</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/01d10e1dadf98675f599d06536576a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsO6H9SQiX7rdBjUGz9krA.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://www.pexels.com/photo/white-ipad-38271/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>的<a class="ae lh" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>拍摄</p></figure><p id="349e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我的朋友尝试一个新发型时，我问他“你为什么剪成这样？”他说他想成为一名出色的模特。因此，我明白了人们喜欢独特而美丽地展示它们。</p><p id="0897" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我开发个人 react 应用程序时，我想实现 google map API。我在谷歌上搜索了很多例子，最后，我找到了一个简单的解决方案。在这里，我将简要说明我如何使用该应用程序，以及我们可以添加到谷歌地图的自定义样式。这里我们将从头开始看。你可以在这里看到演示<a class="ae lh" href="https://react-map-goog.web.app/" rel="noopener ugc nofollow" target="_blank"/>。这是我在 Medium 的第 29 篇文章。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f14e" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">首先</h1><p id="6d1e" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">如果你没有谷歌地图 API 令牌注册<a class="ae lh" href="https://developers.google.com/maps/documentation/" rel="noopener ugc nofollow" target="_blank">谷歌地图 API </a>并获得令牌使用！要获得令牌，您必须输入信用卡号码。然而，谷歌表示，如果你不亲自更新服务，他们不会向你的账户收费。做你的决定吧。一旦你有了 API 密匙，就开始开发你的应用吧！</p><p id="a245" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要创建 react 应用程序，请在您的 shell/终端的特定文件夹(例如，desktop)中运行以下命令</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="7518" class="nn mm it nj b gy no np l nq nr">npx create-react-app google-map</span></pre><p id="8805" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">将创建一个新文件夹，并将其命名为 google-map。从这一步开始，用<a class="ae lh" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>引导您的应用程序。有关更多信息，请单击<a class="ae lh" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">链接</a>。然后在 IDE 中打开该项目。我使用的是 VS 代码集成开发环境。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/f0785a4cd3a0aa3b89a3019507b30e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_z8SijFvtQ7PryUEJqdCw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">来自<a class="ae lh" href="https://burst.shopify.com/hands?utm_campaign=photo_credit&amp;utm_content=Picture+of+Working+Out+With+Chalk+%E2%80%94+Free+Stock+Photo&amp;utm_medium=referral&amp;utm_source=credit" rel="noopener ugc nofollow" target="_blank">突发</a>的<a class="ae lh" href="https://burst.shopify.com/@ndekhors?utm_campaign=photo_credit&amp;utm_content=Picture+of+Working+Out+With+Chalk+%E2%80%94+Free+Stock+Photo&amp;utm_medium=referral&amp;utm_source=credit" rel="noopener ugc nofollow" target="_blank">妮可·德·霍斯</a>的照片</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0f9c" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">着手工作</h1><p id="db4e" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">如果您打开 react 应用程序，那么您需要删除不需要的文件。因此，您需要转到 src 文件夹，删除 Logo.svg、App.css、index.css 和 App.test.js 文件。并在名为 components，assets and helpers 的 src 文件夹中创建以下文件夹，然后将 serviceWorker.js 移动到助手的文件夹中，将 App.js 文件移动到 Components 文件夹中。然后打开 index.js 文件，删除 index.js 文件中的以下代码片段。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="70f6" class="nn mm it nj b gy no np l nq nr"><em class="nt">import</em> ‘./index.css’;</span></pre><p id="18a5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后修改 index.js 导入中的 App.js 和 serviceWorker.js 文件路径，如下所示。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="8f4c" class="nn mm it nj b gy no np l nq nr"><em class="nt">import</em> App <em class="nt">from</em> ‘./components/App’;<br/><em class="nt">import</em> * <em class="nt">as</em> serviceWorker <em class="nt">from</em> ‘./helpers/serviceWorker’;</span></pre><p id="d1ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">转到 Components 文件夹，打开 App.js，删除 App 函数的返回部分。</p><p id="a64b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您需要安装一个依赖项来将谷歌地图作为一个组件。为此，使用下面的命令来安装依赖项。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="476d" class="nn mm it nj b gy no np l nq nr">npm install --save google-maps-react</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nu"><img src="../Images/abc068d8874fc0b3ef69f5f8567786da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B81tXwu343kO3KGY9CTZQg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@bruno_nascimento?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">布鲁诺·纳西门托</a>在<a class="ae lh" href="https://unsplash.com/s/photos/start-to-run?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="ecc9" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">完全（或彻底）地</h1><p id="1b74" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">在你的组件 app 里面新建一个文件，命名为 Map.js，然后你需要导入<code class="fe nv nw nx nj b">google-maps-rect</code>。为此，在 Map.js 中添加以下代码片段。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="029a" class="nn mm it nj b gy no np l nq nr">import { Map, GoogleApiWrapper } from 'google-maps-react';</span></pre><p id="09be" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在您需要呈现<code class="fe nv nw nx nj b">Map</code>组件。因此，添加<code class="fe nv nw nx nj b">Map</code>组件到你的渲染函数中。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="1b7c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上面的代码中，我添加了普通的样式。我在 render 方法中使用了常量变量。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="2072" class="nn mm it nj b gy no np l nq nr">const mapStyles = {<br/>  width: '100%',<br/>  height: '100%',<br/>};</span></pre><p id="72dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您需要在 Maps.js 文件中添加 export default 语句，如下所示</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="ad7e" class="nn mm it nj b gy no np l nq nr">export default GoogleApiWrapper({<br/>  apiKey: 'TOKEN HERE'<br/>})(MapContainer);</span></pre><p id="c23c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">确保在这里输入您的 API 密钥！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/8a5166bf7af636adc8d0776df8b2a5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsZf8USwzK6_15-_XL8Bsg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">来自<a class="ae lh" href="https://burst.shopify.com/seasons?utm_campaign=photo_credit&amp;utm_content=Free+The+Ice+Climbing+Adventures+Photo+%E2%80%94+High+Res+Pictures&amp;utm_medium=referral&amp;utm_source=credit" rel="noopener ugc nofollow" target="_blank">爆炸</a>的<a class="ae lh" href="https://burst.shopify.com/@cmurillo?utm_campaign=photo_credit&amp;utm_content=Free+The+Ice+Climbing+Adventures+Photo+%E2%80%94+High+Res+Pictures&amp;utm_medium=referral&amp;utm_source=credit" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·穆里略</a>的照片</p></figure><p id="8c48" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在 App.js 文件中导入<code class="fe nv nw nx nj b">Maps</code>组件。所以你的 App.js 应该是这样的。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="dd2b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当你使用<code class="fe nv nw nx nj b">npm start</code>启动你的开发服务器时，你会看到下面的结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/c4140f58b2af92c71a5a66fd93205a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_DmMxuUJihkaxSoa8B_89g.jpeg"/></div></div></figure><p id="2fb7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">嘣！你做到了，但是使用谷歌地图有什么意义呢？但是，合理地说，使用没有任何标记的谷歌地图有什么意义。因此，我们来添加一个标记。为此，更新您的<code class="fe nv nw nx nj b">Map</code>组件以包含<code class="fe nv nw nx nj b">Marker</code>组件。这里我使用了不同的纬度和经度，你可以使用任何你需要的纬度和经度。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="d7bb" class="nn mm it nj b gy no np l nq nr">import { Map, GoogleApiWrapper, Marker } from 'google-maps-react';</span></pre><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oa"><img src="../Images/bc6691da479989f7f82eceb979c6c079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2QqW94BaWD7us4nZ3t7hHw.jpeg"/></div></div></figure><p id="a96d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">太好了！你在地图上添加了标记。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="3ffd" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">美好的事物永远是一种快乐</h1><p id="3d64" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">现在，您已经进入了本文最有趣的部分。现在，让我们来看看自定义样式。它只是一个 JSON 对象。您将在 GoogleMapStyles.js 文件中存储自定义样式 JSON。我使用的主题来自<a class="ae lh" href="https://mapstyle.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">样式向导:谷歌地图 API</a>。如果你需要更漂亮的样式，那么试试时髦地图的样式，或者通过定制 JSON 对象建立你自己独特的地图样式。您的 GoogleMapStyles.js 文件将如下所示。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="ffb2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在你需要在你的<code class="fe nv nw nx nj b">Maps</code>组件中导入这个样式的 JSON。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="6dc9" class="nn mm it nj b gy no np l nq nr"><em class="nt">import</em> googleMapStyles <em class="nt">from</em> “./GoogelMapStyle”;</span></pre><p id="dfd7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">导入样式 JSON 后，可以将样式 JSON 设置为<code class="fe nv nw nx nj b">Maps</code>组件的<code class="fe nv nw nx nj b">defaultProps</code>。这可以通过在类体之外的组件类本身上定义<code class="fe nv nw nx nj b">defaultProps</code>来实现，如下面的代码片段所示:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="0a48" class="nn mm it nj b gy no np l nq nr">Maps.defaultProps = googleMapStyles;</span></pre><p id="662b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，您需要将这个属性传递给<code class="fe nv nw nx nj b">Map</code>组件的样式属性，如下面的代码片段所示:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="a8bc" class="nn mm it nj b gy no np l nq nr">&lt;Map<br/>  <em class="nt">google</em>={<em class="nt">this</em>.props.google}<br/>  <em class="nt">zoom</em>={15}<br/>  <em class="nt">styles</em>={<em class="nt">this</em>.props.mapStyle}<br/>  <em class="nt">initialCenter</em>={{ lat: 9.761927, lng: 79.95244 }}<br/>/&gt;;</span></pre><p id="4ac0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在你的<code class="fe nv nw nx nj b">Maps</code>组件将如下面的文件所示。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="179a" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated"><strong class="ak">把你的脚抬起来</strong></h1><p id="12ee" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">在 react 中实现谷歌地图很容易。有很多 npm 包可以帮助 React 实现谷歌地图。对我来说，<code class="fe nv nw nx nj b">google-maps-react</code>很容易使用，它是一个比<a class="ae lh" href="https://www.npmtrends.com/google-map-react-vs-google-maps-vs-google-maps-react" rel="noopener ugc nofollow" target="_blank">其他</a>更小的包。你可以从这个<a class="ae lh" href="https://github.com/sabesansathananthan/react-google-map" rel="noopener ugc nofollow" target="_blank">链接</a>克隆回购。</p><p id="b158" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">快乐编码😊！！！</p></div></div>    
</body>
</html>