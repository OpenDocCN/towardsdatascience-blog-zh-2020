<html>
<head>
<title>Getting started in R markdown</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R markdown入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-in-r-markdown-2d3de636bde3?source=collection_archive---------21-----------------------#2020-02-18">https://towardsdatascience.com/getting-started-in-r-markdown-2d3de636bde3?source=collection_archive---------21-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dd1e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在R中生成动态的、可复制的PDF或HTML文档</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2cd62d586e5bb5ea8842d2d3676f0de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8B-c-FVhtTAXkml4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">乔恩·泰森拍摄的照片</p></figure><p id="68a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">如果你花了一些时间用R编写代码，你可能听说过生成包含R代码、R输出(结果)和文本或注释的动态报告。在本文中，我将解释R Markdown是如何工作的，并为您提供在制作这些动态报告时轻松入门所需的基本要素。</p><h1 id="1371" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">R Markdown:什么、为什么和如何？</h1><p id="4b69" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">R Markdown允许生成一个报告(大部分时间以PDF、HTML、Word或beamer演示的形式),该报告是从RStudio中编写的文件自动生成的。生成的文档可以作为您的分析的整洁记录，可以在详细和完整的报告中共享和发布。即使你从没想过要把结果展示给别人，它也可以作为一个个人笔记本来回顾，这样你就可以看到你当时做了什么。R Markdown文件的扩展名为<code class="fe nb nc nd ne b">.Rmd</code>，而R script文件的扩展名为<code class="fe nb nc nd ne b">.R</code>。</p><p id="42c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与R相比，使用R Markdown的第一个主要优点是，在R Markdown文档中，您可以组合任何统计分析的三个重要部分:</p><ul class=""><li id="f1b8" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">r代码显示分析是如何完成的。例如，您使用的数据和函数。这允许读者跟踪您的代码，并检查分析是否正确执行。</li><li id="55e1" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">代码的结果，也就是分析的输出。例如，线性模型的输出、图或刚刚编码的假设检验的结果。这使得读者可以看到你的分析结果。</li><li id="3530" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">结果的文本、注释和解释。例如，在计算主要的<a class="ae ky" href="https://www.statsandr.com/blog/descriptive-statistics-in-r/" rel="noopener ugc nofollow" target="_blank">描述性统计数据</a>并绘制一些图表后，您可以在您的问题的上下文中解释它们并突出重要的发现。由于你的解释和评论，读者能够理解你的结果，就好像你写了一份文件来解释你的工作一样。</li></ul><p id="2aa6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R Markdown的另一个优点是报告是动态的，任何有权访问<code class="fe nb nc nd ne b">.Rmd</code>文件(如果使用外部数据，当然还有数据)的人都可以复制，这使得它非常适合协作和结果的传播。所谓动态，我们的意思是，如果您的数据发生变化，您的结果和解释也会相应地发生变化，而无需您做任何工作。</p><p id="7a9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">报告的制作分两个阶段完成:</p><ol class=""><li id="36cc" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nt nl nm nn bi translated">包含R代码块(称为块)和文本的<code class="fe nb nc nd ne b">.Rmd</code>文件被提供给<code class="fe nb nc nd ne b">{knitr}</code>包，该包将执行R代码以获得输出，并创建markdown ( <code class="fe nb nc nd ne b">.md</code>)格式的文档。然后，这个文档包含R代码、结果(或输出)和文本。</li><li id="33bb" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">然后这个<code class="fe nb nc nd ne b">.md</code>文件被基于pandoc的<code class="fe nb nc nd ne b">markdown</code>包(即一个文档转换工具)转换成想要的格式(HTML、PDF或Word)。</li></ol><h1 id="8731" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">开始之前</h1><p id="eca5" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">要创建一个新的R Markdown文档(<code class="fe nb nc nd ne b">.Rmd</code>)，您首先需要安装并加载以下软件包:</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="7353" class="ny mf it ne b gy nz oa l ob oc">install.packages(c("knitr", "rmarkdown", "markdown"))</span><span id="9a27" class="ny mf it ne b gy od oa l ob oc">library(knitr)<br/>library(rmarkdown)<br/>library(markdown)</span></pre><p id="44cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击文件-&gt;新文件-&gt; R Markdown，或者点击左上角带有绿色十字的白色小表格，然后选择<code class="fe nb nc nd ne b">R Markdown</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/c9e30498a0e71150bc0a9719a265f0a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/0*fho1kYQtUlgaPKIM.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的R Markdown文档</p></figure><p id="f1e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个窗口将会打开，选择标题和作者，然后点击确定。默认的输出格式是HTML。以后可以改成PDF或者Word。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/3961c9e40260448b1891845ef9237c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uXcf7VPQY2IS2Yol.png"/></div></div></figure><p id="a58f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击OK后，一个新的用作示例的<code class="fe nb nc nd ne b">.Rmd</code>文件就创建好了。我们将使用这个文件作为我们更复杂、更个性化的文件的起点。</p><p id="9aa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将R Markdown文档编译成HTML文档，请点击顶部的<code class="fe nb nc nd ne b">Knit</code>按钮:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/2e5e52f34a29b0fba2f7d9f61e94b6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:260/format:webp/0*d4xEoRTIKTAd6-Aq.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">编织一个R减价文件</p></figure><p id="ad1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出现HTML报告的预览，它也保存在您的工作目录中(参见什么是<a class="ae ky" href="https://www.statsandr.com/blog/how-to-import-an-excel-file-in-rstudio/" rel="noopener ugc nofollow" target="_blank">工作目录</a>的提示)。</p><h1 id="6f8d" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated"><code class="fe nb nc nd ne b">.Rmd</code>文件的组成部分</h1><p id="40d7" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">R Markdown文档的主要组成部分如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/2d4471c0ba79a0f03dfb5bb32b03af4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKMw9RsHewnKXieBcy6jaQ.png"/></div></div></figure><p id="2092" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些组件将在以下章节中详细介绍。</p><h1 id="2f12" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">YAML头球</h1><p id="7246" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">一个<code class="fe nb nc nd ne b">.Rmd</code>文件以YAML头文件开始，由两个<code class="fe nb nc nd ne b">---</code>序列包围。默认情况下，这包括报告的标题、作者、日期和格式。如果您想在PDF文档中生成报告，请将<code class="fe nb nc nd ne b">output: html_document</code>替换为<code class="fe nb nc nd ne b">output: pdf_document</code>。编译报告后(即编制文档后)，YAML标题中的信息将出现在所生成报告的顶部。</p><p id="6b95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要向您的文档添加目录，请将<code class="fe nb nc nd ne b">output: html_document</code>替换为</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="2c45" class="ny mf it ne b gy nz oa l ob oc">output:<br/>  html_document:<br/>    toc: true</span></pre><p id="4745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我关于HTML文档格式的常用设置(如果你以PDF格式呈现文档，请删除<code class="fe nb nc nd ne b">number_sections: true</code>之后的所有内容，因为PDF文档不接受YAML标题中的这些选项):</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="1ef8" class="ny mf it ne b gy nz oa l ob oc">output:<br/>  html_document:<br/>    toc: true<br/>    toc_depth: 6<br/>    number_sections: true<br/>    toc_float: true<br/>    code_folding: hide<br/>    theme: flatly<br/>    code_download: true</span></pre><p id="c6ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了添加目录外，它还设置了深度，添加了章节编号，向下滚动文档时目录是浮动的，默认情况下代码是隐藏的，使用了<code class="fe nb nc nd ne b">flatly</code>主题，并增加了下载<code class="fe nb nc nd ne b">.Rmd</code>文档的可能性。</p><p id="d5be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">甚至在编织文档之前，您就可以可视化您的目录，或者通过单击右上角的小图标直接转到特定部分。您的目录将会出现，单击一个部分即可转到您的<code class="fe nb nc nd ne b">.Rmd</code>文档中的该部分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/065dc6dc5d0a90ca3f0dc1e232ecc293.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/0*nyxR90d4r4HyXs5C.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可视化你的目录</p></figure><p id="00a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了这个增强的目录之外，我通常在YAML页眉中设置以下日期:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/aef932156df7caaebef4849d73c05db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/0*0rshFHwnktTyLw7z.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">R降价中的动态日期</p></figure><p id="0561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码允许我写下当前的日期，而不必自己修改。这对于持续几周或几个月的项目来说非常方便，因为在文档的顶部总是有一个更新的日期。</p><h1 id="f657" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">代码块</h1><p id="ebb9" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在YAML标题的下面，有一个第一代码块，用于你的<strong class="lb iu">整个</strong>文档的设置选项。目前最好就这样，如果需要的话，我们可以以后再换。</p><p id="a748" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R Markdown文档中的代码块用于编写R代码。每次你想包含R代码时，你都需要用三个反撇号把它括起来。例如，为了计算值1、7和11的平均值，我们首先需要通过点击位于顶部的<code class="fe nb nc nd ne b">Insert</code>按钮并选择R来插入一个R代码块(见下图)，然后我们需要在刚刚插入的代码块中写入相应的代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/c829b78ef97014dcb89b258f117d03e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:180/format:webp/0*8Ftxq7ihnpE6xXRJ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在R Markdown中插入R代码块</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c44e89d37a9c57c503559aa7211f1510.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/0*2kdDjjfBpOsl-GYQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码块示例</p></figure><p id="afb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在示例文件中，可以看到第一个R代码块(setup代码块除外)包含了预加载数据集<code class="fe nb nc nd ne b">cars</code> : <code class="fe nb nc nd ne b">summary(cars)</code>的函数<code class="fe nb nc nd ne b">summary()</code>。如果您查看从这个示例文件生成的HTML文档，您将会看到汇总度量就显示在代码块之后。</p><p id="660f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个示例文件中的下一个代码块是<code class="fe nb nc nd ne b">plot(pressure)</code>，它将产生一个绘图。尝试编写其他R代码并编织(即，通过单击编织按钮来编译文档)文档，以查看您的代码是否正确生成。</p><p id="5d0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您已经用R脚本编写了代码，并且希望在R Markdown文档中重用它，那么您可以简单地将代码复制粘贴到代码块中。不要忘记总是将代码包含在代码块中，否则R会在编译文档时抛出错误。</p><p id="c0e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，与我上面给出的平均值的代码块相比，该图的代码块中有两个额外的参数。字母<code class="fe nb nc nd ne b">r</code>后面的第一个参数(两者之间没有逗号)用于设置块的名称。一般来说，不要为此费心，它主要用于指代特定的代码块。您可以删除程序块的名称，但是不要删除<code class="fe nb nc nd ne b">{}</code>之间的字母<code class="fe nb nc nd ne b">r</code>，因为它告诉R后面的代码对应于R代码(是的，您读得很好，这也意味着您可以包含来自另一种编程语言的代码，例如Python、SQL等。).</p><p id="1c24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在块的名称之后(在示例文件中的<code class="fe nb nc nd ne b">pressure</code>之后)，您可以看到有一个附加的参数:<code class="fe nb nc nd ne b">echo=FALSE</code>。这个参数称为选项，表示您想要隐藏代码，只显示代码的输出。试着去掉它(或者改成<code class="fe nb nc nd ne b">echo=TRUE</code>)，你会看到在编织文档之后，代码和输出都会出现，而之前只出现结果。</p><p id="a19e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以为每个代码块单独指定是隐藏还是显示代码以及该代码的输出，例如，如果您希望显示某些代码块的代码，而不是其他代码块的代码。或者，如果您想总是隐藏/显示整个文档的代码和输出，您可以在位于YAML头后面的安装代码块中指定它。传递给此安装程序代码块的选项将决定所有代码块的选项，除了那些已被特别修改的代码块。</p><p id="bccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，当您打开一个新的R Markdown文件时，唯一的设置选项是<code class="fe nb nc nd ne b">knitr::opts_chunk$set(echo = TRUE)</code>，这意味着默认情况下，所有输出都将伴随有其相应的代码。如果您想只显示结果而不显示整个文档的代码，请用<code class="fe nb nc nd ne b">knitr::opts_chunk$set(echo = FALSE)</code>替换它。通常传递给这个设置代码块的另外两个选项是<code class="fe nb nc nd ne b">warning = FALSE</code>和<code class="fe nb nc nd ne b">message = FALSE</code>，以防止在报告上显示警告和消息。如果要传递几个选项，不要忘记用逗号分隔它们:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/d55451fa553f908d964ab5af945ae02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5veZLerFmth8ueGU.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码块的几个选项</p></figure><p id="4af6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以选择显示代码，但不显示结果。为此，传递选项<code class="fe nb nc nd ne b">results = "hide"</code>。或者，使用选项<code class="fe nb nc nd ne b">include = FALSE</code>，您可以防止代码和结果出现在完成的文件中，而R仍然运行代码，以便在以后的阶段使用它。如果你想阻止代码和结果出现，并且不想让R运行代码，使用<code class="fe nb nc nd ne b">eval = FALSE</code>。要编辑图形的宽度和高度，使用选项<code class="fe nb nc nd ne b">fig.width</code>和<code class="fe nb nc nd ne b">fig.height</code>。另一个非常有趣的选项是<code class="fe nb nc nd ne b">tidy = 'styler'</code>选项，它会自动<a class="ae ky" href="https://www.statsandr.com/blog/rstudio-addins-or-how-to-make-your-coding-life-easier/#styler" rel="noopener ugc nofollow" target="_blank">重新格式化输出中显示的R代码</a>。</p><p id="e1ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此查看所有选项及其描述<a class="ae ky" href="https://yihui.org/knitr/options/" rel="noopener ugc nofollow" target="_blank">或通过运行<code class="fe nb nc nd ne b">str(knitr::opts_chunk$get())</code>查看默认选项列表。</a></p><p id="3e49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">提示</strong>:在编写R Markdown时，你经常需要插入新的R代码块。要更快地插入新的R代码块，在Windows上按<code class="fe nb nc nd ne b">CTRL + ALT + I</code>或在Mac上按<code class="fe nb nc nd ne b">command + option + I</code>。如果你对这些让你更有效率的快捷方式感兴趣，请看R Markdown 中的其他<a class="ae ky" href="https://www.statsandr.com/blog/tips-and-tricks-in-rstudio-and-r-markdown/" rel="noopener ugc nofollow" target="_blank">提示和技巧。</a></p><p id="3a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，如果您想检查某个特定代码块的结果，代码块可以在不需要编译整个文档的情况下运行。为了运行特定的代码块，选择代码并像在R脚本(<code class="fe nb nc nd ne b">.R</code>)中一样运行它，方法是单击run或按Windows上的<code class="fe nb nc nd ne b">CTRL + Enter</code>或Mac上的<code class="fe nb nc nd ne b">command + Enter</code>。这个代码块的结果将直接显示在R Markdown文档中，就在代码块的下面。</p><h1 id="0433" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">文本</h1><p id="cd79" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">文本可以添加到代码块之外的任何地方。R Markdown文档使用Markdown语法来格式化文本。在我们的示例文件中，就在安装代码块的下面，插入了一些文本。要插入文本，您只需简单地编写没有任何封闭的文本。尝试添加一些句子并编织文档，看看它在HTML文档中是如何出现的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/d6329eb9362b784598562198308a7f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/0*TKantHnlOI30sjhy.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">R代码块示例下面的文本示例</p></figure><p id="7bf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Markdown语法可用于更改出现在输出文件中的文本格式，例如将某些文本格式化为<em class="oo">斜体</em>粗体<strong class="lb iu">粗体</strong>等。下面是一些常见的格式化命令:</p><ul class=""><li id="9310" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">标题:<code class="fe nb nc nd ne b"># Title</code></li><li id="ca84" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">字幕:<code class="fe nb nc nd ne b">## Subtitle</code></li><li id="a8e7" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">子标题:<code class="fe nb nc nd ne b">### Subsubtitle</code>。如果您包含目录，这些标题将自动包含在目录中。</li><li id="b303" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><em class="oo">斜体</em> : <code class="fe nb nc nd ne b">*italics*</code>或<code class="fe nb nc nd ne b">_italics_</code></li><li id="75e1" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><strong class="lb iu">加粗</strong> : <code class="fe nb nc nd ne b">**bold**</code>或<code class="fe nb nc nd ne b">__bold__</code></li><li id="7b17" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://www.statsandr.com/" rel="noopener ugc nofollow" target="_blank">链接</a> : <code class="fe nb nc nd ne b">[link](https://www.statsandr.com/)</code>(如果是外部URL，不要忘记<code class="fe nb nc nd ne b">https://</code>)</li><li id="8d30" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">方程式:</li></ul><p id="ab1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用一个<code class="fe nb nc nd ne b">$</code>将你的方程式(用LaTeX写的)附在正文中:</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="4dea" class="ny mf it ne b gy nz oa l ob oc">$A = \pi*r^{2}$</span></pre><p id="070e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个众所周知的等式a =π∫r^2.</p><p id="b7d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用两个<code class="fe nb nc nd ne b">$$</code>把你的LaTeX方程括起来，让它集中在新的一行上:</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="335e" class="ny mf it ne b gy nz oa l ob oc">$$A = \pi*r^{2}$$</span></pre><p id="2b90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是另一个众所周知的等式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/638dd94ab52f983e497569b03d15d501.png" data-original-src="https://miro.medium.com/v2/resize:fit:172/format:webp/1*6uzyNIIkgE91TM7P6pJnoQ.png"/></div></figure><p id="4d5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列表:</p><ul class=""><li id="dc50" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated">无序列表，项目1: <code class="fe nb nc nd ne b">* Unordered list, item 1</code></li><li id="8f7f" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">无序列表，项目2: <code class="fe nb nc nd ne b">* Unordered list, item 2</code></li></ul><ol class=""><li id="3367" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nt nl nm nn bi translated">有序列表，项目1: <code class="fe nb nc nd ne b">1. Ordered list, item 1</code></li><li id="f021" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated">有序列表，项目2: <code class="fe nb nc nd ne b">2. Ordered list, item 2</code></li></ol><h1 id="d0e3" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">文本中的代码</h1><p id="c999" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在继续之前，我想介绍一下R Markdown的一个重要特性。通常情况下，当撰写解释或详细分析时，我们希望在文本中直接引用结果。例如，假设我们在<code class="fe nb nc nd ne b">iris</code>数据集上工作(预加载在R中)。我们可能要用文字解释，花瓣长度的平均值是某个值，而中位数是另一个值。</p><p id="276e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果没有R Markdown，用户将需要计算平均值和中值，然后手动报告。由于R Markdown，可以直接在文本中报告这两个<a class="ae ky" href="https://www.statsandr.com/blog/descriptive-statistics-by-hand/" rel="noopener ugc nofollow" target="_blank">描述性统计数据</a>，而无需手动编码。更好的是，如果数据集因为我们删除了一些观察值而发生了变化，那么生成的文档中报告的平均值和中值将会自动变化，而我们这边的文本不会有任何变化。</p><p id="2cbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过放置一个反撇号、字母<code class="fe nb nc nd ne b">r</code>、空格、代码，然后用另一个反撇号结束它，直接在解释(即文本)中插入结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/9f8f3607739a740cff20e7d7d2eb9c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/0*T2pOhgNI6K5ppFj_.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">R Markdown中的内联代码</p></figure><p id="b838" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是一个句子中整合的<code class="fe nb nc nd ne b">iris</code>数据集的萼片长度的平均值和中值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/be6de5df4bd3d161f368d3437c5e5f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OjhoVY_dA0ZomOhp.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">内联代码和文本的示例</p></figure><p id="67ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本和代码的组合将在生成的报告中给出以下输出:</p><blockquote class="os ot ou"><p id="25fd" class="kz la oo lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated"><em class="it">萼片长度的平均值为5.8433333，标准差为0.8280661。</em></p></blockquote><p id="1413" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种技术被称为<em class="oo">内联代码</em>，允许您将结果直接插入到R Markdown文档的文本中。如前所述，如果数据集发生变化，包含在文本中的结果(在我们的例子中是平均值和标准偏差)将自动调整到新的数据集，就像数据集发生变化时代码块的输出会动态更新一样。</p><p id="ddd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种内联代码技术，以及可以组合代码、代码输出和文本来注释输出的事实，使得R Markdown成为我进行统计分析时最喜欢的工具。自从我发现了R Markdown的强大功能(我仍在学习，因为它有大量的可能性和特性)，我几乎再也不用脚本编写R代码了。我写的每一个R代码都由R Markdown文档中的文本和内联代码补充，从而产生一个专业而完整的最终文档，可以随时共享、发布或存储以供将来使用。如果您对这种类型的文档不熟悉，我邀请您了解更多，并在您的下一个分析中尝试一下，您很可能不会再使用R脚本了。</p><h1 id="f9f3" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">突出显示文本，就像它是代码</h1><p id="9ae3" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">除了内联代码技术之外，您可能希望在生成的报告中让一些文本看起来像是一段代码，而不是实际运行它。</p><p id="986f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，用反勾号(内联代码使用的同一个反撇号)将文本括起来，不带字母<code class="fe nb nc nd ne b">r</code>。写下以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/0933a3bb80ea7c4dcea3b2f62cf0bc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a8Jo1JypWYghyXzI.png"/></div></figure><p id="045a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将在生成的报告中生成以下内容:</p><blockquote class="os ot ou"><p id="ffb2" class="kz la oo lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated"><em class="it">例如，在这句话中，我想突出显示数据帧</em> <code class="fe nb nc nd ne b"><em class="it">iris</em></code> <em class="it">中的变量名</em> <code class="fe nb nc nd ne b"><em class="it">Species</em></code> <em class="it">，就好像它是一段代码。</em></p></blockquote><p id="9d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">单词“物种”和“鸢尾”出现并被突出显示，就好像它是一段代码。</p><h1 id="bc7f" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">形象</h1><p id="d902" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">除了代码、结果和文本，您还可以在最终文档中插入图像。要插入图像，请将其放在工作目录中，并放在代码块之外，编写:</p><p id="f2d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">![](path_to_your_image.jpg)</code></p><p id="26ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，文件/url路径没有用引号括起来。要为您的图像添加替代文本，请将其添加到方括号<code class="fe nb nc nd ne b">[]</code>之间:</p><p id="3c75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">![alt text here](path_to_your_image.jpg)</code></p><h1 id="76ed" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">桌子</h1><p id="9e31" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在R Markdown文档中插入表格有两个选项:</p><ol class=""><li id="38cb" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nt nl nm nn bi translated"><code class="fe nb nc nd ne b">{knitr}</code>包中的<code class="fe nb nc nd ne b">kable()</code>功能</li><li id="426a" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nt nl nm nn bi translated"><code class="fe nb nc nd ne b">{pander}</code>包中的<code class="fe nb nc nd ne b">pander()</code>功能</li></ol><p id="1474" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个没有任何格式的表格示例，同样的代码在<code class="fe nb nc nd ne b">iris</code>数据集上应用了两个函数:</p><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="6881" class="ny mf it ne b gy nz oa l ob oc"># without formatting<br/>summary(iris)</span><span id="ad17" class="ny mf it ne b gy od oa l ob oc">##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   <br/>##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100  <br/>##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300  <br/>##  Median :5.800   Median :3.000   Median :4.350   Median :1.300  <br/>##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199  <br/>##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800  <br/>##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500  <br/>##        Species  <br/>##  setosa    :50  <br/>##  versicolor:50  <br/>##  virginica :50  <br/>##                 <br/>##                 <br/>##</span><span id="59d5" class="ny mf it ne b gy od oa l ob oc"># with kable()<br/>library(knitr)<br/>kable(summary(iris))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/b1473a2393bb0d5c5e4eca8b165ee17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X6KvAaar04J4rGHD.png"/></div></div></figure><pre class="kj kk kl km gt nu ne nv nw aw nx bi"><span id="c208" class="ny mf it ne b gy nz oa l ob oc"># with pander()<br/>library(pander)<br/>pander(summary(iris))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/767c9bba58d57e031e6dedd2ff0cd0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ELvFq3mT5pXEMB5V.png"/></div></div></figure><p id="eda5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nb nc nd ne b">pander()</code>相对于<code class="fe nb nc nd ne b">kable()</code>的优势在于，它可以用于比table更多的不同输出。尝试你自己的代码，例如线性回归或简单向量的结果。</p><h1 id="06bc" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">附加说明和有用的资源</h1><p id="418b" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">对于更高级的用户来说，R Markdown文件也可以用来创建<a class="ae ky" href="https://www.statsandr.com/tags/shiny/" rel="noopener ugc nofollow" target="_blank">闪亮的应用</a>、网站(这个网站的建立得益于R Markdown和<code class="fe nb nc nd ne b">{blogdown}</code>包)，根据几个国际期刊的模板写科学论文(用<code class="fe nb nc nd ne b">{rticles}</code>包)，甚至写书(用<code class="fe nb nc nd ne b">{bookdown}</code>包)。</p><p id="9ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要继续了解R Markdown，请查看R工作室团队的两个完整的备忘单<a class="ae ky" href="https://rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>和<a class="ae ky" href="https://rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>，以及由Yihui Xie、J. J. Allaire和Garrett Grolemund编写的更完整的指南<a class="ae ky" href="https://bookdown.org/yihui/rmarkdown/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="23fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这篇文章能说服你在未来的项目中使用R Markdown。查看R Markdown中的更多<a class="ae ky" href="https://www.statsandr.com/blog/tips-and-tricks-in-rstudio-and-r-markdown/" rel="noopener ugc nofollow" target="_blank">提示和技巧</a>以进一步提高R Markdown的效率。</p><p id="6e2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和往常一样，如果您有与本文主题相关的问题或建议，请将其添加为评论，以便其他读者可以从讨论中受益。</p><p id="9d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">相关文章:</strong></p><ul class=""><li id="076f" class="nf ng it lb b lc ld lf lg li nh lm ni lq nj lu nk nl nm nn bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/clustering-analysis-k-means-and-hierarchical-clustering-by-hand-and-in-r/" rel="noopener ugc nofollow" target="_blank">聚类分析完全指南:k-means和手动和in R系统聚类</a></li><li id="eca7" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/an-efficient-way-to-install-and-load-r-packages/" rel="noopener ugc nofollow" target="_blank">安装和加载R包的有效方法</a></li><li id="ef88" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated">我的数据符合正态分布吗？关于最广泛使用的分布以及如何检验R中的正态性的注释</li><li id="6e78" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/fisher-s-exact-test-in-r-independence-test-for-a-small-sample/" rel="noopener ugc nofollow" target="_blank">R中的Fisher精确检验:小样本的独立性检验</a></li><li id="c879" class="nf ng it lb b lc no lf np li nq lm nr lq ns lu nk nl nm nn bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/chi-square-test-of-independence-in-r/" rel="noopener ugc nofollow" target="_blank">R中独立性的卡方检验</a></li></ul></div><div class="ab cl pb pc hx pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="im in io ip iq"><p id="0163" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">原载于2020年2月18日https://statsandr.com</em><em class="oo"/><a class="ae ky" href="https://statsandr.com/blog/getting-started-in-r-markdown/" rel="noopener ugc nofollow" target="_blank"><em class="oo">。</em></a></p></div></div>    
</body>
</html>