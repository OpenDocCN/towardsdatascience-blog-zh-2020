<html>
<head>
<title>How to Deploy your Machine Learning Models on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Kubernetes 上部署你的机器学习模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-deploy-your-machine-learning-models-on-kubernetes-36e260027ce1?source=collection_archive---------19-----------------------#2020-04-27">https://towardsdatascience.com/how-to-deploy-your-machine-learning-models-on-kubernetes-36e260027ce1?source=collection_archive---------19-----------------------#2020-04-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="999c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 GCP 的 Kubernetes 和 Terraform 部署、扩展和管理您的机器学习服务。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c5b78529130ceadbee6ef1cd27bd1306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d30ED_wNRmrahwe6"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Guillaume Bolduc 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="15c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>是一个生产级的容器编排系统，它自动化了容器化应用的部署、扩展和管理。该项目是开源的，并通过谷歌运行的关键任务应用程序进行了测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/c3b6e375bab55d4707f4da8612c81937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*afkK1deEdJkuN3IhnzuzKg.png"/></div></div></figure><p id="41c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习解决方案通常被分解成许多步骤，这些步骤可能与操作系统和框架无关。此外，数据科学项目通常遵循数据流编程范式，其中程序被设计为一个有向图，数据从一个操作移动到下一个操作。这些方法和抽象很容易用 Kubernetes 实现，将基础设施管理的负担留给了系统。</p><p id="c88a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个故事中，我们将在 Kubernetes 上部署一个简单的图像分类器 web 服务。我们将在谷歌云平台(GCP)上工作，并利用他们的安全和管理的 Kubernetes 服务产品:GKE。我们将首先使用<a class="ae ky" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"> Terraform </a>来供应和管理所需的基础设施，然后创建一个预训练<a class="ae ky" href="https://pytorch.org/" rel="noopener ugc nofollow" target="_blank"> PyTorch </a>模型的简单部署。我们开始吧。</p><blockquote class="lw lx ly"><p id="c24e" class="kz la lz lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated"><a class="ae ky" href="https://mailchi.mp/d2d2d4a109b5/learning-rate-newsletter" rel="noopener ugc nofollow" target="_blank">学习率</a>是为那些对 AI 和 MLOps 的世界感到好奇的人准备的时事通讯。你会在每周五收到我关于最新人工智能新闻和文章的更新和想法。在这里订阅<a class="ae ky" href="https://mailchi.mp/d2d2d4a109b5/learning-rate-newsletter" rel="noopener ugc nofollow" target="_blank"/>！</p></blockquote></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="e112" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">基础设施作为代码</h1><p id="b345" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">为了建造所需的基础设施，我们将使用 Terraform。Terraform 将基础设施视为代码，以供应和管理任何云、基础设施或服务。Terraform 将使我们很容易创造我们需要的资源，并在我们完成后进行清理，以避免积累成本。要安装 Terraform，请遵循您的<a class="ae ky" href="https://learn.hashicorp.com/terraform/getting-started/install.html" rel="noopener ugc nofollow" target="_blank">平台</a>的说明。</p><h2 id="0cb2" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">预赛</h2><p id="b0c2" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">要处理 GCP，我们首先需要创建一个项目资源。项目资源是一个逻辑组织实体，它是创建、启用和使用其他 Google 云服务的基础。有必要开始对 GCP 和容易建设一个或使用任何新的 GCP 帐户初始化默认项目的工作。</p><p id="488b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要创建一个新的，从侧面板转到<code class="fe nt nu nv nw b">IAM &amp; Admin</code>并选择底部的<code class="fe nt nu nv nw b">Manage Resources</code>。按下<code class="fe nt nu nv nw b">Create Project</code>按钮，给出一个名字，你就可以开始了。</p><p id="2ee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是创建一个服务帐户，terraform 将使用它来创建我们需要的资源。服务帐户是一种特殊的帐户，由应用程序使用，而不是由个人使用。确保您正在使用您创建的项目，返回到<code class="fe nt nu nv nw b">IAM &amp; Admin</code>选项并选择<code class="fe nt nu nv nw b">Service Accounts</code>。按下按钮<code class="fe nt nu nv nw b">Create Service Account</code>创建一个新的，将其命名为<code class="fe nt nu nv nw b">terraform</code>并按下 Create。下一步，授予服务帐户<code class="fe nt nu nv nw b">Project Editor</code>的角色，然后按 continue。最后，通过按下<code class="fe nt nu nv nw b">Create Key</code>按钮生成一个 JSON 密钥。该密钥将成为 Terraform 的身份验证方法。</p><h2 id="9459" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">地形结构</h2><p id="3835" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">首先，我们需要配置 Terraform 使用 Google 存储桶来存储它需要的元数据。这是保持 Terraform 在自动化环境中运行的一个很好的方法。首先，让我们创建桶；创建一个名为<code class="fe nt nu nv nw b">main.tf</code>的新文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9bb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们需要为它使用的变量创建一个新文件。创建该文件并将其命名为<code class="fe nt nu nv nw b">variables.tf</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="cda4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个文件告诉 Terraform 应该使用哪些变量，并提供了一些默认值。例如，我们第一个脚本中的<code class="fe nt nu nv nw b">location</code>变量现在有了一个默认值<code class="fe nt nu nv nw b">US</code>。还有其他变量，比如<code class="fe nt nu nv nw b">project_id</code>，我们需要自己提供值。为此，我们创建一个新的<code class="fe nt nu nv nw b">terraform.tfvars</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="3475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保用必要的信息填充<code class="fe nt nu nv nw b">terraform.tfvars</code>文件，然后运行<code class="fe nt nu nv nw b">terraform init</code>和<code class="fe nt nu nv nw b">terraform apply</code>。最后，转到 GCP 控制台，验证铲斗是否在那里。</p><h2 id="6a1c" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">改造您的 GKE 集群</h2><p id="e9be" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们现在准备剥离我们的 Kubernetes 集群。我们将在一个新目录中创建三个单独的文件:一个用于定义 Terraform 后端，一个用于云提供商，一个用于实际的集群。当然，我们需要两个额外的变量文件。让我们设置后端。创建一个<code class="fe nt nu nv nw b">terraform.tf</code>文件，并将以下内容复制到其中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="c098" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保提供您之前创建的存储桶的名称。然后为云提供商创建一个<code class="fe nt nu nv nw b">provider.tf</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="4ad6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，创建一个<code class="fe nt nu nv nw b">main.tf</code>文件来配置我们想要的 GKE 集群。对于这个例子，我们将把它保持在最低限度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="b99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将改变的一件事是删除默认的节点池并创建一个我们自己的节点池，其中我们使用<code class="fe nt nu nv nw b">n1-standard-1</code>可抢占的机器。最后，创建<code class="fe nt nu nv nw b">variables.tf</code>和<code class="fe nt nu nv nw b">terraform.tfvars</code>文件，提供必要的变量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="bf72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和<code class="fe nt nu nv nw b">terraform.tfvars</code>文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="a113" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将位置设置为区域格式将创建一个区域簇。谷歌为每个付费账户提供一个免费的区域集群，因此我们将利用这个折扣。像以前一样，运行<code class="fe nt nu nv nw b">terraform init</code>和<code class="fe nt nu nv nw b">terraform apply</code>，等待几分钟，您的集群将准备就绪。</p><h1 id="f6f0" class="mk ml it bd mm mn nz mp mq mr oa mt mu jz ob ka mw kc oc kd my kf od kg na nb bi translated">图像分类器</h1><p id="57a8" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">对于这个例子，我们使用一个预先训练的 PyTorch 模型和<a class="ae ky" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>，来创建一个简单的机器学习 web 服务。接下来，我们将创建一个简单的 Kubernetes 部署来部署、管理和扩展 web 服务。</p><h2 id="13b0" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">PyTorch +烧瓶</h2><p id="0e5d" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">为了设计一个简单的图像分类器服务，我们使用了一个用于图像分类的 CNN 模型<a class="ae ky" href="https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf" rel="noopener ugc nofollow" target="_blank"> AlexNet </a>的 PyTorch 实现。我们使用烧瓶微型框架来提供它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9111" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们定义一个<code class="fe nt nu nv nw b">Predict</code> Flask 资源，它初始化模型并接受一个<code class="fe nt nu nv nw b">HTTP POST</code>请求。我们使用<code class="fe nt nu nv nw b">any-host</code>标识符(<code class="fe nt nu nv nw b">0.0.0.0</code>)将它与烧瓶一起提供。</p><blockquote class="lw lx ly"><p id="903d" class="kz la lz lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated">Flask 的内置服务器不适合生产，因为它的伸缩性不好。对于我们的目的是好的，但是如果你想知道如何正确地部署 Flask 应用程序，请看这里的<a class="ae ky" href="https://flask.palletsprojects.com/en/1.1.x/deploying/" rel="noopener ugc nofollow" target="_blank"/>。</p></blockquote><h2 id="dd8d" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">集装箱化</h2><p id="9188" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">要在 Kubernetes 上部署它，我们首先需要将服务容器化。为此，我们定义如下<code class="fe nt nu nv nw b">Dockerfile</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="33eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要从这个<code class="fe nt nu nv nw b">Dockerfile</code>构建一个映像，在同一个文件夹中创建一个<code class="fe nt nu nv nw b">requirements.txt</code>文件，包含以下内容:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="92db" class="nh ml it nw b gy oi oj l ok ol">flask<br/>flask-restful</span></pre><p id="4d4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在同一个文件夹中下载包含 Imagenet 标签的 JSON 文件<a class="ae ky" href="https://github.com/raghakot/keras-vis/blob/master/resources/imagenet_class_index.json" rel="noopener ugc nofollow" target="_blank">这里</a>。我们现在准备建立我们的 docker 形象；运行以下命令:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="3e12" class="nh ml it nw b gy oi oj l ok ol">docker build -t &lt;your-dockerhub-username&gt;/image-classifier:latest .</span></pre><p id="74b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，您需要将映像推送到容器注册中心。例如，要在 docker hub 上推送它，创建一个帐户，配置 docker 并运行以下命令:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="6810" class="nh ml it nw b gy oi oj l ok ol">docker login --username username</span><span id="84b2" class="nh ml it nw b gy om oj l ok ol">docker push &lt;your-dockerhub-username&gt;/image-classifier:latest</span></pre><p id="5f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了简单起见，你可以用我为你准备的图像。可以从<a class="ae ky" href="https://hub.docker.com/repository/docker/dpoulopoulos/moirai-image-classifier" rel="noopener ugc nofollow" target="_blank"> docker hub </a>拉出来。</p><h2 id="9e62" class="nh ml it bd mm ni nj dn mq nk nl dp mu li nm nn mw lm no np my lq nq nr na ns bi translated">部署</h2><p id="5428" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">最后一步是部署。为此，我们使用一个简单的<code class="fe nt nu nv nw b">YAML</code>配置文件。但是首先，我们需要安装<code class="fe nt nu nv nw b">kubectl</code>并获得连接到我们的集群的凭证。</p><p id="1b30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装<code class="fe nt nu nv nw b">kubectl</code>，请遵循<a class="ae ky" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank">平台</a>的说明。接下来，<a class="ae ky" href="https://cloud.google.com/sdk/install" rel="noopener ugc nofollow" target="_blank">安装</a> <code class="fe nt nu nv nw b">gcloud</code>，GCP 的 CLI 工具。要获取 GKE 群集的凭据，请运行以下命令:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="e7af" class="nh ml it nw b gy oi oj l ok ol">cloud container clusters get-credentials &lt;the-name-of-your-cluster&gt; --zone &lt;the-zone-that-it-is-in&gt;</span></pre><p id="c73f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="7fef" class="nh ml it nw b gy oi oj l ok ol">cloud container clusters get-credentials my-gke-cluster --zone us-central1-a</span></pre><p id="83d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该命令将创建一个配置文件，并指示<code class="fe nt nu nv nw b">kubectl</code>如何连接您的 GKE 集群。最后，定义图像分类器<code class="fe nt nu nv nw b">YAML</code>部署文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="c2f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个配置分为三部分:首先，我们定义一个名称空间，它为我们的资源名称提供了一个范围。然后，我们定义实际的部署，其中我们只使用服务的一个副本。你可以根据自己的需要调整这个数字。最后，我们用一个<code class="fe nt nu nv nw b">LoadBalancer</code>来公开我们的 web 服务。这将使我们的服务可以从互联网上访问。通过运行以下命令创建部署:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="4e8b" class="nh ml it nw b gy oi oj l ok ol">kubectl apply -f image-classifier.yaml</span></pre><p id="4608" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您现在已经准备好测试您的图像分类器 web 服务了。对于这个例子，我们使用<code class="fe nt nu nv nw b">curl</code>。</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="c9d1" class="nh ml it nw b gy oi oj l ok ol">curl -X POST -d '{"url": "<a class="ae ky" href="https://l.messenger.com/l.php?u=https%3A%2F%2Fi.imgur.com%2FjD2hDMc.jpg&amp;h=AT3BE3ChNWH0HYFPvWjWK_Aqtq08m0_DGLZpxfwEu_219IP625hqKCAjWzfap2ucsTFqtwk224-0Djl3nFCbpbxixNC4XgclqUkdsR9kOzTEkVVjazQJx395DGlzq3offB8i10LHlveiqg" rel="noopener ugc nofollow" target="_blank">https://i.imgur.com/jD2hDMc.jpg</a>"}' -H 'Content-Type: application/json' <a class="ae ky" href="http://35.239.113.2/predict" rel="noopener ugc nofollow" target="_blank">http://&lt;your-cluster's-ip&gt;/predict</a></span></pre><p id="11fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个命令将使用一个小猫图片查询您的服务。你得到的是与某种自信相关的预测。您现在已经在 Kubernetes 上成功部署了一个机器学习模型！</p><h1 id="1e52" class="mk ml it bd mm mn nz mp mq mr oa mt mu jz ob ka mw kc oc kd my kf od kg na nb bi translated">清理</h1><p id="89c6" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">为了清理我们自己，我们将按相反的顺序进行:</p><ol class=""><li id="c83e" class="on oo it lb b lc ld lf lg li op lm oq lq or lu os ot ou ov bi translated">删除命名空间、部署和负载平衡器:</li></ol><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="93e9" class="nh ml it nw b gy oi oj l ok ol">kubectl delete -f image-classifier.yaml</span></pre><p id="8c7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.销毁集群:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="925e" class="nh ml it nw b gy oi oj l ok ol">terraform destroy</span></pre><blockquote class="lw lx ly"><p id="34e8" class="kz la lz lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated">从您在“改造您的 GKE 集群”步骤中创建的文件夹中运行此命令。</p></blockquote><p id="ea87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.删除 Google 存储桶:</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="1650" class="nh ml it nw b gy oi oj l ok ol">terraform destroy</span></pre><blockquote class="lw lx ly"><p id="259e" class="kz la lz lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated">从您在“地形配置”步骤中创建的文件夹中运行此命令。</p></blockquote><h1 id="62d7" class="mk ml it bd mm mn nz mp mq mr oa mt mu jz ob ka mw kc oc kd my kf od kg na nb bi translated">结论</h1><p id="0849" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">在这个故事中，我们看到了如何在 GKE 用地形创造资源。具体来说，我们创建了一个 GKE 集群，以利用 Google 云平台提供的托管 Kubernetes 解决方案。然后，我们创建了一个简单的图像分类 web 服务，用它构建了一个 docker 图像，并将其部署在 Kubernetes 上。最后，我们自己清理，销毁我们不再需要的资源，以避免额外的成本。</p><p id="fd6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Kubernetes 是一个为生产部署机器学习模型的伟大平台。在后面的文章中，我们将探索 KubeflowKubernetes 的机器学习工具包。</p><p id="b5e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lz">我叫 Dimitris Poulopoulos，是希腊比雷埃夫斯大学</em></strong><a class="ae ky" href="https://bigdatastack.eu/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lz">BigDataStack</em></strong></a><strong class="lb iu"><em class="lz">和博士(c)的机器学习研究员。我曾为欧洲委员会、欧盟统计局、国际货币基金组织、欧洲中央银行、经合组织和宜家等主要客户设计和实施人工智能和软件解决方案。如果你有兴趣阅读更多关于机器学习、深度学习和数据科学的帖子，请关注我关于</em> </strong> <a class="ae ky" href="https://medium.com/@dpoulopoulos" rel="noopener"> <strong class="lb iu"> <em class="lz">中</em> </strong> </a> <strong class="lb iu"> <em class="lz">、</em></strong><a class="ae ky" href="https://www.linkedin.com/in/dpoulopoulos/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lz">LinkedIn</em></strong></a><strong class="lb iu"><em class="lz">或</em></strong><a class="ae ky" href="https://twitter.com/james2pl" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lz">@ james2pl</em></strong></a><strong class="lb iu"><em class="lz">上</em> </strong></p></div></div>    
</body>
</html>