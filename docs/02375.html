<html>
<head>
<title>4 Easy-to-use Introspection Functions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中4个易于使用的自省函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-easy-to-use-introspection-functions-in-python-49bd5ee3a2e8?source=collection_archive---------16-----------------------#2020-03-06">https://towardsdatascience.com/4-easy-to-use-introspection-functions-in-python-49bd5ee3a2e8?source=collection_archive---------16-----------------------#2020-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="d858" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python初学者</h2><div class=""/><div class=""><h2 id="92c6" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何在运行时检查对象</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/98ff9a90652e7d4277dddcdbf35c21c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZqQ1LlXAB1dpLxqE"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@supernov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃迪·利贝丁斯基</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="604f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Python是近年来最流行的编程语言。很多人都知道。但如果你问Python有哪些与众不同的优势？不是每个人都能回答这个问题。可能有很多答案。</p><p id="6833" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对我来说，肯定是'<strong class="lk jd">对象内省</strong>'或者'类型内省'。虽然您可以在许多其他语言中找到类似的特性，但Python无疑为您提供了最适合初学者的内置工具。</p><p id="6507" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但首先，什么是对象内省？</p><p id="97f2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它能够在运行时检查对象<strong class="lk jd">的类型或属性，并在代码中利用它们的属性。下面是初学者应该学习的4个简单易用的自省功能。</strong></p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="3465" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">1.类型()</h1><p id="7af4" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated"><strong class="lk jd">数据类型</strong>是对象的分类，决定了可以对其执行何种操作。例如，加号运算符<code class="fe ni nj nk nl b">+</code>可以应用于整数，也可以应用于字符串，但是它们的执行方式不同。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="abc8" class="nq mm it nl b gy nr ns l nt nu">a = 1 + 1 # 2<br/>b = 'Hello' + 'World' # 'HelloWorld'</span></pre><p id="bb0b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">前者是求和运算，而后者是串联运算。如果你试着把<code class="fe ni nj nk nl b">1 + 'Hello'</code>加在一起，你会得到一个错误，因为这个操作是未定义的。</p><p id="ab23" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，数据类型非常重要，因为它影响操作的执行方式。然而，Python中的数据类型是一个噩梦。这是因为不同的库有许多不同的数据类型，由不同的人群用不同的标准和用法编写。</p><p id="7018" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，在Python中有许多不同的方法来“包含”或“保存”数字1，下面是一些例子:</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="8267" class="nq mm it nl b gy nr ns l nt nu">a = 1<br/>b = 1.0<br/>c = [1]<br/>d = (1,)<br/>e = np.int64(1)<br/>f = pd.DataFrame([1])<br/>g = 'one' # well, why not?</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/9a0092aedb551729de393fd44e0e337a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lla05-WIU5xJ_sb0"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@vintageimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊丽莎白·罗威尔·马特森</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0202" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在同一个脚本中使用不同的数据类型是很常见的。为诊断目的检索对象数据类型的最简单方法是使用<code class="fe ni nj nk nl b">type()</code>。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="8aea" class="nq mm it nl b gy nr ns l nt nu">print( [type(x) for x in [a,b,c,d,e,f,g]] )<br/># [&lt;class 'int'&gt;, <br/>   &lt;class 'float'&gt;, <br/>   &lt;class 'list'&gt;, <br/>   &lt;class 'tuple'&gt;, <br/>   &lt;class 'numpy.int64'&gt;, <br/>   &lt;class 'pandas.core.frame.DataFrame'&gt;, <br/>   &lt;class 'str'&gt;]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="a373" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">2.isinstance()</h1><p id="776a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">要检查一个对象是否是一个类的<strong class="lk jd">实例</strong>，标准的方法是<code class="fe ni nj nk nl b">isinstance(object, class)</code>。它有两个参数，一个对象和一个类。如果<code class="fe ni nj nk nl b">object</code>是<code class="fe ni nj nk nl b">class</code>的实例，函数返回<code class="fe ni nj nk nl b">True</code>，否则返回<code class="fe ni nj nk nl b">False</code>。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="6b86" class="nq mm it nl b gy nr ns l nt nu">a = 1<br/>if isinstance(a, int):<br/>    print('a is an integer.')<br/>else:<br/>    print('a is not an integer.')</span><span id="4760" class="nq mm it nl b gy nw ns l nt nu"># 'a is an integer.'</span></pre><p id="32d3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因为它返回一个布尔对象，所以通常用在条件子句中。如果<code class="fe ni nj nk nl b">class</code>参数是一个<strong class="lk jd">元组</strong>，如果对象是元组中的类型之一，它将返回<code class="fe ni nj nk nl b">True</code>。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="f115" class="nq mm it nl b gy nr ns l nt nu">my_fav_numbers = [-1, 1, 5]<br/>print(isinstance(my_fav_numbers, (dict, list))) # True</span></pre><p id="8ae9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">假设你定义了一个函数，它应该只接受整数作为参数，否则，就会出现意想不到的后果，比如一个永不结束的递归函数。您可能想要检查参数是否是<code class="fe ni nj nk nl b">int</code>的实例。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="bfaa" class="nq mm it nl b gy nr ns l nt nu">assert isinstance(n, int), 'n should be an integer!'</span></pre><p id="ca4b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本文中的更多信息:</p><div class="nx ny gp gr nz oa"><a href="https://medium.com/better-programming/how-to-write-recursion-in-3-steps-9d512189a94e" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">如何用3个步骤编写递归</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">Python中的分步示例</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo lb oa"/></div></div></a></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi op"><img src="../Images/89f1cc3786176293c2e026a431ee8661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k2KGKKdWm9OBivVu"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@timothycdykes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">蒂莫西·戴克斯</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0660" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">3.目录()</h1><p id="a919" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">这可以说是Python中最强大的内省功能。您可以看到对象的所有有效属性和方法。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="dc4e" class="nq mm it nl b gy nr ns l nt nu">a = [1,2,3]<br/>print(dir(a))<br/># ['__add__', '__class__', '__contains__', '__delattr__', '__delitem__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__gt__', '__hash__', '__iadd__', '__imul__', '__init__', '__init_subclass__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__reversed__', '__rmul__', '__setattr__', '__setitem__', '__sizeof__', '__str__', '__subclasshook__', 'append', 'clear', 'copy', 'count', 'extend', 'index', 'insert', 'pop', 'remove', 'reverse', 'sort']</span></pre><p id="2bf3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里有一个可以应用在对象<code class="fe ni nj nk nl b">a</code>上的方法列表(以字符串的形式),比如<code class="fe ni nj nk nl b">sort</code>对列表进行排序，<code class="fe ni nj nk nl b">pop</code>获取和移除列表的最后一个元素等等..因此，如果您不确定是否存在方法<code class="fe ni nj nk nl b">sort</code>，只需检查<code class="fe ni nj nk nl b">'sort' in dir(a)</code>，如果存在，它将返回<code class="fe ni nj nk nl b">True</code>。</p><p id="fb4e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另一方面，当你在没有任何参数的情况下调用<code class="fe ni nj nk nl b">dir()</code>时，你会期待什么？一个错误？不要！</p><p id="fa24" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它返回当前范围内的名称列表！记得我之前定义过<code class="fe ni nj nk nl b">my_fav_numbers</code>吗？或者我有吗？让我们检查一下:</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="add1" class="nq mm it nl b gy nr ns l nt nu">'my_fav_numbers' in dir() # True</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8dfa" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">4.id()</h1><p id="e584" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated"><code class="fe ni nj nk nl b">id()</code>返回对象的<strong class="lk jd">内存地址</strong>。Python没有指针的概念，但是您仍然可以使用<code class="fe ni nj nk nl b">id()</code>来模拟指针操作。这可能太高级了，但是仍然有一些简单的事情可以通过这个函数来完成。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="86cc" class="nq mm it nl b gy nr ns l nt nu">a = [1,2,3]<br/>b = a</span><span id="ac52" class="nq mm it nl b gy nw ns l nt nu">print(id(a), id(b))<br/># 140301827626760 140301827626760</span><span id="cd72" class="nq mm it nl b gy nw ns l nt nu">print(id(a[0]))<br/># 140302068451232</span></pre><p id="e68a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过检查对象<code class="fe ni nj nk nl b">a</code>和<code class="fe ni nj nk nl b">b</code>的id，我们知道它们有相同的内存地址。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi op"><img src="../Images/df3ce0ad0a932c656f5385625c16155a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FHT2nhiYuoT2t4Cx"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lh" href="https://unsplash.com/@blocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> MARK S. </a>拍摄</p></figure><p id="ca13" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另一方面，如果您想更多地了解可变对象，检查它们的内存地址会有所帮助。</p><pre class="ks kt ku kv gt nm nl nn no aw np bi"><span id="817a" class="nq mm it nl b gy nr ns l nt nu">a = [1,2,3]<br/>print(id(a)) # 140298456699464</span><span id="3847" class="nq mm it nl b gy nw ns l nt nu">a = [4,5]<br/>print(id(a)) # 140298456729672</span><span id="e4e5" class="nq mm it nl b gy nw ns l nt nu">a[0] = -1<br/>print(id(a)) # 140298456729672</span></pre><p id="26e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你能解释一下上面片段中发生的事情吗？如果您不知道什么是可变对象，请查看下面的文章:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/4-common-mistakes-python-beginners-should-avoid-89bcebd2c628"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">Python初学者应该避免的4个常见错误</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">我很艰难地学会了，但你不需要</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo lb oa"/></div></div></a></div></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="9119" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">外卖</h1><p id="6cba" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们仅仅触及了Python中内省函数的皮毛。你觉得那些功能有趣有用吗？下面留言评论！你也可以<a class="ae lh" href="http://edenau.mailchimpsites.com/" rel="noopener ugc nofollow" target="_blank">注册我的时事通讯</a>来接收我的新文章的更新。如果您对提高Python技能感兴趣，以下文章可能会有所帮助:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/4-hidden-python-features-that-beginners-should-know-ec9de65ff9f8"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">初学者应该知道的4个隐藏的Python特性</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">如何轻松增强您的Python代码</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo lb oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/4-common-mistakes-python-beginners-should-avoid-89bcebd2c628"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">Python初学者应该避免的4个常见错误</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">我很艰难地学会了，但你不需要</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo lb oa"/></div></div></a></div></div></div>    
</body>
</html>