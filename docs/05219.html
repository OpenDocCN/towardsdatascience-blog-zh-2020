<html>
<head>
<title>Basic Statistics for Time Series Analysis in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中时间序列分析的基本统计数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/basic-statistics-for-time-series-analysis-in-python-4cb147d56535?source=collection_archive---------15-----------------------#2020-05-04">https://towardsdatascience.com/basic-statistics-for-time-series-analysis-in-python-4cb147d56535?source=collection_archive---------15-----------------------#2020-05-04</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="6243" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">了解描述性统计和推断性统计，快速启动您的时间序列分析</h2></div><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/13fb0721c87ce984e24ff5658ed4c479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mxwVKIcRlGqcSPR4"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated"><a class="ae la" href="https://unsplash.com/@icons8?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Icons8团队</a>在<a class="ae la" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="9567" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">时间序列只是一组按时间顺序排列的数据点，其中时间通常是独立变量。</p><p id="1a3d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，预测未来并不是时间序列分析的唯一目的。它还与评估重要属性相关，如平稳性、季节性或自相关性。</p><p id="ee00" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在进入更高级的建模实践之前，我们必须首先掌握基础知识。</p><p id="58ad" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在本文中，我们将通过介绍描述性和推断性统计来介绍时间序列分析的构建模块。当我们在时间序列上实现复杂的模型时，这些概念将会派上用场，因为统计显著性对于建立稳健的分析是必要的。</p><p id="426f" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">所有的代码示例都是Python语言，你可以拿着<a class="ae la" href="https://github.com/marcopeix/time-series-analysis/tree/master/1.Basics" rel="noopener ugc nofollow" target="_blank">的笔记本</a>跟着学。</p><p id="f5ac" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我们开始吧！</p><blockquote class="lx"><p id="649e" class="ly lz iv bd ma mb mc md me mf mg lw dk translated">通过Python 课程中的<a class="ae la" href="https://www.datasciencewithmarco.com/offers/tdU2mtVK" rel="noopener ugc nofollow" target="_blank">应用时间序列分析，使用Python和TensorFlow应用更复杂的模型进行时间序列分析！</a></p></blockquote><h1 id="4b12" class="mh mi iv bd mj mk ml mm mn mo mp mq mr kb ms kc mt ke mu kf mv kh mw ki mx my bi translated">描述统计学</h1><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="mz na l"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated"><a class="ae la" href="https://giphy.com/" rel="noopener ugc nofollow" target="_blank">https://giphy.com/</a></p></figure><p id="3094" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">描述性统计是对数据集进行汇总的一组值和系数。它提供了关于集中趋势和可变性的信息。</p><p id="d308" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">平均值、中值、标准偏差、最小值和最大值通常是我们要寻找的值。</p><p id="08e4" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">那么，让我们看看如何用Python获得这些值。</p><p id="d343" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">首先，我们将导入所有需要的库。并非所有这些都用于描述性统计，但我们稍后会用到它们。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="39af" class="ng mi iv nc b gy nh ni l nj nk">import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import matplotlib.mlab as mlab<br/>import seaborn as sns</span><span id="b784" class="ng mi iv nc b gy nl ni l nj nk">from sklearn.linear_model import LinearRegression</span><span id="ee5d" class="ng mi iv nc b gy nl ni l nj nk">import statsmodels.api as sm</span></pre><p id="f728" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，我们将探索数据集<a class="ae la" href="https://github.com/marcopeix/time-series-analysis/tree/master/1.Basics" rel="noopener ugc nofollow" target="_blank"><em class="nm">shampoo . CSV</em></a><em class="nm">。</em>该数据集追踪某段时间内洗发水的历史销量。</p><p id="dbdd" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">为了查看整个数据集，我们可以执行以下Python代码:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="a529" class="ng mi iv nc b gy nh ni l nj nk">data = pd.read_csv('shampoo.csv')<br/>data</span></pre><p id="4444" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">小心，因为这将显示整个数据集。在这种情况下，只有36个实例，但是对于较大的数据集，这不是很实际。</p><p id="70d0" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">相反，我们应该使用下面这段代码:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="46b5" class="ng mi iv nc b gy nh ni l nj nk">data.head()</span></pre><p id="b247" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">上面的代码行将显示数据集的前五个条目。您可以通过指定想要查看的条目数量来决定显示更多条目。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="0ab7" class="ng mi iv nc b gy nh ni l nj nk">data.head(10)</span></pre><p id="1da8" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">上面一行将显示数据集的前10个条目。</p><p id="3028" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，有一种非常简单的方法可以获得平均值、中值、标准差和其他关于数据集中心趋势的信息。</p><p id="4fa1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">只需运行下面的代码行:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="6aa0" class="ng mi iv nc b gy nh ni l nj nk">data.describe()</span></pre><p id="9b5d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">您应该会看到洗发水数据集的以下信息:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6d0a0a7d29d678647081de888dacad96.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*eQX9j-415VuCV97MZWJRtw.png"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">数据集的描述性统计</p></figure><p id="f892" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如您所见，通过这个简单的方法，我们获得了关于数据集大小、平均值和标准偏差、最小值和最大值的信息，以及关于其四分位数的信息。</p><h2 id="18cd" class="ng mi iv bd mj no np dn mn nq nr dp mr lk ns nt mt lo nu nv mv ls nw nx mx ny bi translated">形象化</h2><p id="9b77" class="pw-post-body-paragraph lb lc iv ld b le nz jw lg lh oa jz lj lk ob lm ln lo oc lq lr ls od lu lv lw io bi translated">数字是一个很好的起点，但是能够可视化一个时间序列可以给你快速的洞察力，这将帮助你把你的分析引向正确的方向。</p><p id="8853" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">当涉及到时间序列时，直方图和散点图是最广泛使用的可视化工具。</p><p id="2e2b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">我们数据集的简单直方图可以显示为:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="8126" class="ng mi iv nc b gy nh ni l nj nk">data.hist()</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/efe2c5301db886384d3d29952c0fafd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*zVw53UdlCN9GV70kl_8ifg.png"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">数据集的基本直方图</p></figure><p id="2bd1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然而，我们可以做得更好。让我们绘制一个更好的直方图，并给这个轴添加标签。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="4db1" class="ng mi iv nc b gy nh ni l nj nk">plt.figure(figsize=[10, 7.5]); # Set dimensions for figure</span><span id="bbfc" class="ng mi iv nc b gy nl ni l nj nk">plt.hist(data['Sales'])<br/>plt.title('Histogram of Shampoo Sales');<br/>plt.xlabel('Shampoo Sales ($M)');<br/>plt.ylabel('Frequency');</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi of"><img src="../Images/4ba86152da48777e1ddc836030d3b874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vo4ZtZa_VKltXGmar3HubQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">洗发水数据集的直方图</p></figure><p id="84a7" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">上面的直方图好多了。您可以更改许多参数来根据需要定制可视化。例如，您可以更改直方图中条柱的颜色和数量。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="76bb" class="ng mi iv nc b gy nh ni l nj nk">plt.figure(figsize=[10, 7.5]); # Set dimensions for figure</span><span id="9035" class="ng mi iv nc b gy nl ni l nj nk">plt.hist(data['Sales'], bins=20, color='#fcba03')<br/>plt.title('Histogram of Shampoo Sales');<br/>plt.xlabel('Shampoo Sales ($M)');<br/>plt.ylabel('Frequency');</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi og"><img src="../Images/faf22befa8aa37333badbe88f57c6527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTTJKiq5EwHHJT9NGQUItQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">洗发水数据集的直方图</p></figure><p id="ffef" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，您应该可以非常轻松地绘制直方图，并根据自己的需要进行定制。</p><p id="33b7" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">最后但同样重要的是知道如何显示散点图。非常简单，我们可以像这样可视化我们的数据集:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="b8fe" class="ng mi iv nc b gy nh ni l nj nk">plt.figure(figsize=[20, 7.5]); # Set dimensions for figure</span><span id="1ce3" class="ng mi iv nc b gy nl ni l nj nk">sns.scatterplot(x=data['Month'], y=data['Sales']);<br/>plt.title('Historical Shampoo Sales');<br/>plt.ylabel('Shampoo Sales ($M)');<br/>plt.xlabel('Month');</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi oh"><img src="../Images/ea73f8f46185b48c74a1e90911a6484b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXBELJ9qsrujZmM6hvdzzQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">洗发水数据集的散点图</p></figure><p id="2d90" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如果你想了解更多关于使用我们使用的库绘图的知识，并看看不同的参数如何改变绘图，请务必查阅<a class="ae la" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>或<a class="ae la" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> seaborn </a>的文档。</p><h1 id="b869" class="mh mi iv bd mj mk ml mm mn mo mp mq mr kb oi kc mt ke oj kf mv kh ok ki mx my bi translated">推断统计学</h1><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="ol na l"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">【https://giphy.com/ T4】</p></figure><p id="7d84" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">顾名思义，推断统计是使用分析从数据集中推断属性。</p><p id="01e1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">通常，我们希望在数据集中找到一个趋势，以便进行预测。这也是我们检验不同假设的机会。</p><p id="f319" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">出于介绍的目的，我们将使用一个简单的线性回归来说明和解释时间序列背景下的推断统计。</p><h2 id="c43e" class="ng mi iv bd mj no np dn mn nq nr dp mr lk ns nt mt lo nu nv mv ls nw nx mx ny bi translated">时间序列的线性回归</h2><p id="1b04" class="pw-post-body-paragraph lb lc iv ld b le nz jw lg lh oa jz lj lk ob lm ln lo oc lq lr ls od lu lv lw io bi translated">在本节中，我们将使用另一个数据集来追溯大气中CO2的历史浓度。由于数据集跨越了2014年的历史，让我们只考虑1950年及以后的数据。</p><p id="ed93" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">让我们应用之前所学的知识，展示我们数据的散点图。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="e2aa" class="ng mi iv nc b gy nh ni l nj nk"># Dataset from here: <a class="ae la" href="https://www.co2.earth/historical-co2-datasets" rel="noopener ugc nofollow" target="_blank">https://www.co2.earth/historical-co2-datasets</a><br/>co2_dataset = pd.read_csv('co2_dataset.csv')</span><span id="a493" class="ng mi iv nc b gy nl ni l nj nk">plt.figure(figsize=[20, 7.5]); # Set dimensions for figure</span><span id="8d32" class="ng mi iv nc b gy nl ni l nj nk"># Let's only consider the data from the year 1950<br/>X = co2_dataset['year'].values[1950:]<br/>y = co2_dataset['data_mean_global'].values[1950:]</span><span id="8d6c" class="ng mi iv nc b gy nl ni l nj nk">sns.scatterplot(x=X, y=y);<br/>plt.title('Historical Global CO2 Concentration in the Atmosphere');<br/>plt.ylabel('CO2 Concentration (ppm)');<br/>plt.xlabel('Year');</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi om"><img src="../Images/5003e4bd41c998498610321c06521b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6qsDao7fnyATCQ8vg3t8w.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">从1950年到2014年的二氧化碳浓度</p></figure><p id="e216" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如你所见，浓度似乎随着时间而增加。</p><p id="f141" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">虽然趋势似乎不是线性的，但它可能仍然可以解释数据的部分可变性。因此，让我们做如下假设:</p><ul class=""><li id="6b74" class="on oo iv ld b le lf lh li lk op lo oq ls or lw os ot ou ov bi translated">CO2浓度以线性方式依赖于时间，存在一些误差</li></ul><p id="742b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">在数学上，这表示为:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/f348266ca803e810a79421e11a67070e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*jIJIZejd_c13LAx2u65hUw.png"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">线性方程</p></figure><p id="b457" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">你应该很容易把它看作一个线性方程，包含一个常数项、一个斜率和一个误差项。</p><p id="6bfe" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">重要的是要注意，在进行简单的线性回归时，要做以下假设:</p><ul class=""><li id="0d16" class="on oo iv ld b le lf lh li lk op lo oq ls or lw os ot ou ov bi translated">误差呈正态分布，平均为0</li><li id="5d5b" class="on oo iv ld b le ox lh oy lk oz lo pa ls pb lw os ot ou ov bi translated">误差具有相同的方差(同方差)</li><li id="2198" class="on oo iv ld b le ox lh oy lk oz lo pa ls pb lw os ot ou ov bi translated">这些错误互不相关</li></ul><p id="ceb9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然而，在执行简单的线性回归时，这些假设在技术上都没有使用。我们不生成误差项的正态分布来估计线性方程的参数。</p><p id="944a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">相反，<strong class="ld iw">普通最小二乘法</strong> (OLS)用于估计参数。这只是试图找到误差平方和的最小值:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi pc"><img src="../Images/fc2c2cd11d3d6585a5b1d6eecb0849e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iImQkV5eqzRgTR-XwkEmyg.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">用OLS最小化的参数</p></figure><h2 id="be7c" class="ng mi iv bd mj no np dn mn nq nr dp mr lk ns nt mt lo nu nv mv ls nw nx mx ny bi translated">线性回归在起作用</h2><p id="2a6a" class="pw-post-body-paragraph lb lc iv ld b le nz jw lg lh oa jz lj lk ob lm ln lo oc lq lr ls od lu lv lw io bi translated">现在，让我们用一个线性模型来拟合我们的数据，并查看模型的估计参数:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="f308" class="ng mi iv nc b gy nh ni l nj nk">X = co2_dataset['year'].values[1950:].reshape(-1, 1)<br/>y = co2_dataset['data_mean_global'].values[1950:].reshape(-1, 1)</span><span id="65c8" class="ng mi iv nc b gy nl ni l nj nk">reg = LinearRegression()</span><span id="add5" class="ng mi iv nc b gy nl ni l nj nk">reg.fit(X, y)</span><span id="c349" class="ng mi iv nc b gy nl ni l nj nk">print(f"The slope is {reg.coef_[0][0]} and the intercept is {reg.intercept_[0]}")</span><span id="6358" class="ng mi iv nc b gy nl ni l nj nk">predictions = reg.predict(X.reshape(-1, 1))</span><span id="07b5" class="ng mi iv nc b gy nl ni l nj nk">plt.figure(figsize=(20, 8))<br/>plt.scatter(X, y,c='black')<br/>plt.plot(X, predictions, c='blue', linewidth=2)<br/>plt.title('Historical Global CO2 Concentration in the Atmosphere');<br/>plt.ylabel('CO2 Concentration (ppm)');<br/>plt.xlabel('Year');<br/>plt.show()</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi oh"><img src="../Images/da269f42d119ba3b31ab1b6520a42b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4p9k2YzF9Lvb_pqe_ijWMQ.png"/></div></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">线性回归</p></figure><p id="b6c0" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">运行上面的代码，你应该得到同样的图，你会看到斜率是1.3589，截距是-2348。</p><p id="d187" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">参数有意义吗？</p><p id="4877" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">斜率确实是正的，这是正常的，因为浓度无疑在增加。</p><p id="11a1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然而，截距是负的。这是否意味着时间0，CO2浓度为负？</p><p id="65eb" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">不。我们的模型绝对不足以让我们回到1950年。但是这些参数是最小化误差平方和的参数，因此产生最佳的线性拟合。</p><h2 id="b1ea" class="ng mi iv bd mj no np dn mn nq nr dp mr lk ns nt mt lo nu nv mv ls nw nx mx ny bi translated">评估模型的质量</h2><p id="ce3d" class="pw-post-body-paragraph lb lc iv ld b le nz jw lg lh oa jz lj lk ob lm ln lo oc lq lr ls od lu lv lw io bi translated">从图中，我们可以直观地说直线不是我们数据的最佳拟合，但也不是最差的。</p><p id="ee94" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">回想一下假设误差是正态分布的线性模型。我们可以通过绘制残差的<strong class="ld iw"> QQ图</strong>来检验这个假设。</p><p id="ec9d" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">QQ图是两种不同分布的分位数散点图。如果分布是相同的，那么我们会看到一条直线。</p><p id="988a" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">因此，如果我们绘制残差相对于正态分布的QQ图，我们可以看到它们是否落在一条直线上；这意味着我们的残差确实是正态分布的。</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="827c" class="ng mi iv nc b gy nh ni l nj nk">X = sm.add_constant(co2_dataset['year'].values[1950:])<br/>model = sm.OLS(co2_dataset['data_mean_global'].values[1950:], X).fit()<br/>residuals = model.resid<br/>qq_plot = sm.qqplot(residuals, line='q')<br/>plt.show()</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/e31e54068b6e4fb50d94efef5a378dc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*DGBczESyqmRwS-urQpoheg.png"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">QQ-残差图</p></figure><p id="0c9b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">如你所见，蓝点代表残差，它们不在一条直线上。因此，它们不是正态分布的，这表明线性模型不是我们数据的最佳拟合。</p><p id="e2e1" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">这可以通过绘制残差直方图得到进一步支持:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="49ad" class="ng mi iv nc b gy nh ni l nj nk">X = sm.add_constant(co2_dataset['year'].values[1950:])<br/>model = sm.OLS(co2_dataset['data_mean_global'].values[1950:], X).fit()<br/>residuals = model.resid</span><span id="1d0d" class="ng mi iv nc b gy nl ni l nj nk">plt.hist(residuals);</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/67229ec7beb0f65614a143fb1d35ee29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*kfhLMdFgAkkZ336qz-rDkg.png"/></div><p class="kw kx gj gh gi ky kz bd b be z dk translated">残差直方图</p></figure><p id="723b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">同样，我们可以清楚地看到它不是正态分布。</p><h2 id="9c84" class="ng mi iv bd mj no np dn mn nq nr dp mr lk ns nt mt lo nu nv mv ls nw nx mx ny bi translated">假设检验</h2><p id="540b" class="pw-post-body-paragraph lb lc iv ld b le nz jw lg lh oa jz lj lk ob lm ln lo oc lq lr ls od lu lv lw io bi translated">推断统计学的一个主要组成部分是假设检验。这是一种确定观察到的趋势是否是由于随机性，或者是否有真正的统计意义的方法。</p><p id="3021" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">对于假设检验，我们必须定义一个假设和一个无效假设。假设通常是我们试图从数据中提取的趋势，而零假设恰恰相反。</p><p id="579b" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">让我们为我们的情况定义假设:</p><ul class=""><li id="aab2" class="on oo iv ld b le lf lh li lk op lo oq ls or lw os ot ou ov bi translated"><strong class="ld iw">假设</strong>:时间与CO2浓度呈线性相关</li><li id="a04d" class="on oo iv ld b le ox lh oy lk oz lo pa ls pb lw os ot ou ov bi translated"><strong class="ld iw">零假设</strong>:时间和CO2浓度没有线性关系</li></ul><p id="3122" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">厉害！现在，让我们使用另一个库为我们的数据集拟合一个线性模型，该库将为我们自动运行假设检验:</p><pre class="kl km kn ko gt nb nc nd ne aw nf bi"><span id="8c21" class="ng mi iv nc b gy nh ni l nj nk">X = sm.add_constant(co2_dataset['year'].values[1950:])<br/>model = sm.OLS(co2_dataset['data_mean_global'].values[1950:], X).fit()<br/>print(model.summary())</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi pe"><img src="../Images/c5bb79837041ed720dd57d2ee2b52dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mis2a1W025cYYBq6n8Iuwg.png"/></div></div></figure><p id="f2b9" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">现在，这里有很多信息，但让我们只考虑几个数字。</p><p id="97a6" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">首先，我们有一个非常高的R值0.971。这意味着超过97%的CO2浓度变化可以用时间变量来解释。</p><p id="5761" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">然后，F统计量也很大:2073。这意味着时间和CO2浓度之间存在线性相关性具有统计学意义。</p><p id="e8ea" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">最后，查看斜率系数的p值，您会注意到它是0。虽然该数字可能不为0，但仍然非常小，这是存在线性相关性的另一个统计显著性指标。</p><p id="92dc" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">通常，阈值0.05用于p值。如果小于这个值，则拒绝零假设。</p><p id="5326" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">因此，由于一个大的F统计量，结合一个小的p值，我们可以拒绝零假设。</p></div><div class="ab cl pf pg hz ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="io ip iq ir is"><p id="2f70" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">就是这样！你现在处于一个非常好的位置来启动你的时间序列分析。</p><p id="d5e8" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">有了这些基本概念，我们将在它们的基础上构建更好的模型来帮助我们预测时间序列数据。</p><p id="dad8" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">了解Python中时间序列分析的最新最佳实践:</p><ul class=""><li id="8701" class="on oo iv ld b le lf lh li lk op lo oq ls or lw os ot ou ov bi translated"><a class="ae la" href="https://www.datasciencewithmarco.com/offers/tdU2mtVK" rel="noopener ugc nofollow" target="_blank">在Python中应用时间序列分析</a></li></ul><p id="c975" class="pw-post-body-paragraph lb lc iv ld b le lf jw lg lh li jz lj lk ll lm ln lo lp lq lr ls lt lu lv lw io bi translated">干杯！</p></div></div>    
</body>
</html>