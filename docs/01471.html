<html>
<head>
<title>Calculating Return on Equity with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 计算股本回报率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/calculating-return-on-equity-with-python-1ea583cd53bd?source=collection_archive---------27-----------------------#2020-02-09">https://towardsdatascience.com/calculating-return-on-equity-with-python-1ea583cd53bd?source=collection_archive---------27-----------------------#2020-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="09ad" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">构建一个 Python 脚本来逐步计算股本回报率</h2></div><p id="656d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">沃伦巴菲特最喜欢的指标之一是净资产收益率(ROE)。他将净资产收益率作为投资决策过程的一部分。</p><p id="1f3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">股本回报率表明公司用股东投入的资金产生了多少净收入。在这个故事中，我们将使用 Python 计算您感兴趣的任何股票的股本回报率。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/b8e7f350bc9b0273f3dde083dba16cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AA0lbbaBjtvyHluG"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated"><a class="ae lb" href="https://unsplash.com/@neonbrand?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae lb" href="https://unsplash.com/s/photos/return-on-equity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="9f94" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">如何计算净资产收益率？</h1><p id="a0c5" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">股本回报率的计算方法是:普通股股东可获得的净利润除以一段时间内(如一个季度、一年等)普通股的平均账面价值。).</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/80d5d26119fa5bd6e203409397e92f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rW321xDlSGGZ8Lr8"/></div></div></figure><p id="bc94" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">净收益</strong>代表普通股股东可获得的净收益。而<strong class="kh ir">权益账面价值</strong>是企业资产减去负债的价值。除了在分母中使用普通股的平均账面价值，我们还可以使用期初的账面价值。</p><p id="f993" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果普通股权益的账面价值在不同时期变化很大，那么一个时期的平均账面价值是最合适的。对于我们的计算，<strong class="kh ir">我们将使用权益的平均账面价值</strong>。</p><h1 id="3358" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">如何解读 ROE？</h1><p id="6552" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在投资界，较高的净资产收益率被视为一个积极的信号。然而，我们需要对公司如何增加净资产收益率保持谨慎。如果一家公司承担更多的债务，ROE 将会增加，因为该公司可能会通过发行债务来减少自己的权益(即购买自己的权益)。这将导致更高的风险，因此，净资产收益率将增加。</p><p id="de89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，如果一家公司增加净收入而不增加债务，那么净资产收益率的增加<strong class="kh ir">将是一个非常好的迹象。</strong></p><h1 id="fc79" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">用 Python 计算股本回报率</h1><p id="7891" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">既然我们理解了为什么 ROE 如此重要，那么让我们构建一个 Python 脚本来自动计算我们感兴趣的任何公司的 ROE。</p><p id="4396" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这超级简单。我们将使用一个免费的 API，<a class="ae lb" href="https://financialmodelingprep.com/developer/docs/" rel="noopener ugc nofollow" target="_blank"> Financialmodelingprep </a>，来检索财务报表和股票数据。我们将向 API 端点发出 get 请求来检索财务报表，我们将解析计算<strong class="kh ir"> ROE </strong>所需的值。</p><p id="f414" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要导入构建 Python 脚本所需的唯一库。</p><p id="4819" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们想重用代码来计算不同公司的 ROE，我们将构建一个函数调用<em class="mp"> getROE </em>。<em class="mp"> getROE </em>将把公司股票作为一个参数，该参数将作为 url 的一个参数传递:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Python ROE 函数</p></figure><p id="a0cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们现在打印我们的损益表，我们将有一个很好的易于解析的格式字典。请注意，在 url 中，<em class="mp">股票</em>将被作为参数传递的公司股票代码替换，例如“<em class="mp"> AAPL </em>”。</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="58ed" class="mx lt iq mt b gy my mz l na nb">print(income_statement)</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/12f8404a8fc37d1da508899e96af6acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*IiT9vd8a1gwrKz94"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Python 损益表</p></figure><h1 id="2470" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">计算净收入</h1><p id="bc99" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在，我们可以通过解析字典轻松提取出苹果的<em class="mp">净收入。关键的<em class="mp">财务</em>包含所有季度损益表数据。因为我们对最近一个季度感兴趣，所以我们提取列表的第一个元素。在第一个元素中，我们需要提取关键字<em class="mp"> Net Income Com </em>的值:</em></p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="3627" class="mx lt iq mt b gy my mz l na nb">net_inc_common1 = float(income_statement['financials'][0]['Net Income Com'])</span></pre><h1 id="4b1d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">检索权益的账面价值</h1><p id="bf35" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">太好了，我们有了我们的<em class="mp"> ROE </em>的分子。<strong class="kh ir">接下来，</strong>我们需要计算<strong class="kh ir"> <em class="mp">股权的账面价值</em> </strong>。股权的账面价值可以通过查看财务报告中的资产负债表来提取。</p><p id="f9a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，Python 将完成这项工作，并为我们提取价值。我们将向<a class="ae lb" href="https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/AAPL?period=quarter" rel="noopener ugc nofollow" target="_blank"> Financialmodelingprep API 端点</a>发出 get 请求，以提取资产负债表季度数据:</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="d604" class="mx lt iq mt b gy my mz l na nb">BS = requests.get(f"https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/{stock}?period=quarter")</span><span id="24cb" class="mx lt iq mt b gy nd mz l na nb">BS = BS.json()</span></pre><p id="10e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的回应如下所示。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/58b005164d7ec5cd80cdcef8bd223042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O9CHk3tHCx988rvA"/></div></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">资产负债表苹果公司</p></figure><p id="2b3c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和以前一样，我们的响应包含一个字典列表。最新季度是列表中的第一个元素。我们现在可以解析字典来<strong class="kh ir">提取<em class="mp">股东权益总额</em> </strong>值:</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="7e10" class="mx lt iq mt b gy my mz l na nb">tot_equity_now = float(BS['financials'][0]['Total shareholders equity'])</span></pre><p id="c778" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们需要计算该期间的平均值，所以我们还需要检索去年的权益账面价值。这将是列表中的第四个元素，即四个季度前:</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="b753" class="mx lt iq mt b gy my mz l na nb">tot_equity_previous = float(BS['financials'][4]['Total shareholders equity'])</span></pre><p id="06f7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很好，我们现在可以计算平均股本，并将其用作分母来获得 ROE 值。</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="2134" class="mx lt iq mt b gy my mz l na nb">Average_equity = (tot_equity_now + tot_equity_previous)/2</span><span id="7d10" class="mx lt iq mt b gy nd mz l na nb">ROE = net_inc_common1/Average_equity</span></pre><h1 id="6d28" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将我们的 Python 金融脚本放在一起</h1><p id="71d6" class="pw-post-body-paragraph kf kg iq kh b ki mk jr kk kl ml ju kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们构建了一个非常有用的<strong class="kh ir"> Python 脚本，用任何公司的 Python 来</strong> <strong class="kh ir">计算股本回报率</strong>。它非常容易使用，我们只需要调用函数并传递一个公司股票作为参数。然后，我们的函数将提取所需的财务数据，并为我们计算 ROE。</p><p id="da43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参见下面的最终代码。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div><p class="lo lp gj gh gi lq lr bd b be z dk translated">Python 计算 ROE</p></figure><p id="65a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们现在传递<em class="mp"> AAPL </em>和<em class="mp"> MSFT </em>作为我们<em class="mp"> getROE </em>函数的参数，Python 将计算苹果和微软的 ROE:</p><pre class="ld le lf lg gt ms mt mu mv aw mw bi"><span id="dffb" class="mx lt iq mt b gy my mz l na nb">Apple = getROE('AAPL')</span><span id="2d32" class="mx lt iq mt b gy nd mz l na nb">#Format number as percentage <br/>Apple = "{:.2%}".format(Apple) </span><span id="6e35" class="mx lt iq mt b gy nd mz l na nb">MSFT = getROE('MSFT') <br/>MSFT = "{:.2%}".format(MSFT) </span><span id="1012" class="mx lt iq mt b gy nd mz l na nb">print('MSFT:', MSFT ) print('AAPL:', Apple )</span></pre><p id="900a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将使微软的净资产收益率为 11.5%，苹果的净资产收益率为 21.44%。苹果的净资产收益率高于微软。这是因为更高的债务水平还是更高的净收入？我会让你自己分析这个。下面随意提供这个问题的答案！</p><p id="3c04" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您阅读文章。希望你喜欢它！</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="dded" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mp">原载于 2020 年 2 月 10 日 https://codingandfun.com</em><a class="ae lb" href="https://codingandfun.com/calculating-return-on-equity-with-python/" rel="noopener ugc nofollow" target="_blank"><em class="mp"/></a><em class="mp">。</em></p></div></div>    
</body>
</html>