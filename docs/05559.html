<html>
<head>
<title>Introduction to Pandas apply, applymap and map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫应用简介，应用地图和地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-pandas-apply-applymap-and-map-5d3e044e93ff?source=collection_archive---------1-----------------------#2020-05-10">https://towardsdatascience.com/introduction-to-pandas-apply-applymap-and-map-5d3e044e93ff?source=collection_archive---------1-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8e7e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个直观的熊猫教程，教你如何使用<code class="fe ki kj kk kl b">apply()</code>和<code class="fe ki kj kk kl b">applymap()</code>应用一个函数，以及如何使用<code class="fe ki kj kk kl b">map()</code>替换值</h2></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e38aa1183e1237b96a66610e21a5f294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8sI1hFqJodBvbpTa3xjL2Q.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">熊猫应用()应用地图()和地图()介绍</p></figure><p id="6a37" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在数据处理中，经常需要对某一行或某一列执行操作(如统计计算、拆分或代入值)以获得新的数据。编写一个 for 循环来遍历 Pandas DataFrame 和 Series 可以完成这项工作，但这似乎不是一个好主意。for 循环往往有更多的代码行，更少的代码可读性和更慢的性能。</p><p id="f976" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">幸运的是，熊猫已经内置了很好的方法来帮助你完成目标！在本文中，我们将看到如何使用<code class="fe ki kj kk kl b">apply()</code>和<code class="fe ki kj kk kl b">applymap()</code>执行操作，以及如何使用<code class="fe ki kj kk kl b">map()</code>替换值。</p><p id="9bb9" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">首先，你应该知道 DataFrame 和 Series 会有这三种方法中的一些或全部，如下:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ly"><img src="../Images/87230573201d228017d9fdf11267d3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*deCRAl5DuNZ1a0TNGKYrNQ.png"/></div></div></figure><p id="5503" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">而熊猫官方 API 参考建议:</p><ul class=""><li id="07a8" class="lz ma it le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated"><code class="fe ki kj kk kl b"><a class="ae mi" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">apply()</strong></a></code>用于沿数据帧或<strong class="le iu">的轴对系列</strong>的值应用函数<strong class="le iu">。</strong></li><li id="188d" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><code class="fe ki kj kk kl b"><a class="ae mi" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.applymap.html" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">applymap()</strong></a></code>用于将函数应用于数据帧的元素。</li><li id="f9bd" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><code class="fe ki kj kk kl b"><a class="ae mi" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html?highlight=map#pandas.Series.map" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">map()</strong></a></code>用于将序列中的每个值替换为另一个值。</li></ul><h1 id="9599" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">用于演示的数据集</h1><p id="1404" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">在我们深入细节之前，让我们首先创建一个数据框架进行演示。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="def3" class="np mp it kl b gy nq nr l ns nt">import pandas as pd</span><span id="505e" class="np mp it kl b gy nu nr l ns nt">df = pd.DataFrame(<strong class="kl iu">{ 'A': [1,2,3,4], <br/>                   'B': [10,20,30,40],<br/>                   'C': [20,40,60,80]<br/>                  }</strong>, <br/>                  index=[<strong class="kl iu">'Row 1', 'Row 2', 'Row 3', 'Row 4'</strong>])</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f6a2eea38cf9560f25490dcc82ad562f.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*xsDaF9cpRdZs2Nz41dnncQ.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">应用数据集、应用地图和地图演示</p></figure><h1 id="77ec" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">如何使用 apply()？</h1><p id="bea3" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">Pandas <code class="fe ki kj kk kl b">apply()</code>用于沿数据帧或<strong class="le iu">的轴对序列</strong>的值应用函数<strong class="le iu">。</strong></p><p id="6c4e" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">让我们从一个简单的例子开始，对每一行求和并将结果保存到新的列“D”</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="115d" class="np mp it kl b gy nq nr l ns nt"># Let's call this "custom_sum" as "sum" is a built-in function<br/>def <strong class="kl iu">custom_sum</strong>(row):<br/>    return row.sum()</span><span id="3d4f" class="np mp it kl b gy nu nr l ns nt">df[<strong class="kl iu">'D'</strong>] = df.apply(<strong class="kl iu">custom_sum</strong>, <strong class="kl iu">axis=1</strong>)</span></pre><p id="2f23" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">这是输出</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/4173008ccd3b637b24ca1a2523a7d029.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*k5CFnd7U0uVH9HHl99nkYQ.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">df 的结果[<strong class="bd nx">' D '</strong>]= df . apply(<strong class="bd nx">custom _ sum</strong>，<strong class="bd nx"> axis=1 </strong>)</p></figure><p id="7350" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">你真的明白刚才发生了什么吗？</p><p id="f23b" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">让我们来看看<code class="fe ki kj kk kl b">df.apply(<strong class="le iu">custom_sum</strong>, <strong class="le iu">axis=1</strong>)</code></p><ul class=""><li id="515d" class="lz ma it le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated">第一个参数<code class="fe ki kj kk kl b"><strong class="le iu">custom_sum</strong></code>是一个函数。</li><li id="cb91" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated">第二个参数<code class="fe ki kj kk kl b">axis</code>是指定函数应用于哪个轴。<code class="fe ki kj kk kl b">0</code>用于将函数应用于每一列，而<code class="fe ki kj kk kl b">1</code>用于将函数应用于每一行。</li></ul><p id="f8d1" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">让我用更直观的方式来解释这个过程。第二个参数<code class="fe ki kj kk kl b">axis = 1</code>告诉熊猫使用行。因此，<code class="fe ki kj kk kl b">custom_sum</code>应用于每一行，并返回一个新的序列，每一行的输出作为值。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/298e7ef66aca15cac75c6e34c8ddd5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*dh0MKXECWtM0whVWF6L15Q.png"/></div></figure><p id="47e1" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">有了对每行总和的理解，每列总和就正好用<code class="fe ki kj kk kl b">axis = 0</code>来代替</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="ed46" class="np mp it kl b gy nq nr l ns nt">df.<strong class="kl iu">loc['Row 5']</strong> = df.apply(custom_sum, <strong class="kl iu">axis=0</strong>)</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/bba94136af80e250ad228dcf302e1e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*seVq8tGio1GlD8ZigZPIBQ.png"/></div></figure><p id="1d3c" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">到目前为止，我们一直在谈论数据帧上的<code class="fe ki kj kk kl b">apply()</code>。同样，<code class="fe ki kj kk kl b">apply()</code>可以用在数值序列上。例如，将列“C”乘以 2，并将结果保存到新列“D”</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="272c" class="np mp it kl b gy nq nr l ns nt">def multiply_by_2(val):<br/>    return val * 2</span><span id="d8de" class="np mp it kl b gy nu nr l ns nt">df[<strong class="kl iu">'D'</strong>] = <strong class="kl iu">df['C']</strong>.apply(<strong class="kl iu">multiply_by_2</strong>)</span></pre><p id="c6aa" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">注意<code class="fe ki kj kk kl b">df[‘C’]</code>用于选择列“C ”,然后用唯一的参数<code class="fe ki kj kk kl b">multiply_by_2</code>调用<code class="fe ki kj kk kl b">apply()</code>。我们不再需要指定轴，因为 Series 是一个<strong class="le iu">一维数组</strong>。返回值是一个序列，并由<code class="fe ki kj kk kl b">df[<strong class="le iu">‘D’</strong>]</code>分配给新的列 D。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/1653c457fbfc5f8e345044eced104398.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*rYGk5WuZkE-yJxc1eCdl3Q.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">序列上 apply()的输出</p></figure><h2 id="124c" class="np mp it bd mq ob oc dn mu od oe dp my ll of og na lp oh oi nc lt oj ok ne ol bi translated">将 lambda 与 apply 一起使用</h2><p id="cdee" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">您也可以将 lambda 表达式与 Pandas <code class="fe ki kj kk kl b">apply()</code>函数一起使用。</p><p id="1797" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">数据帧每行总和的λ当量:</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="4f2a" class="np mp it kl b gy nq nr l ns nt">df['D'] = df.apply(<strong class="kl iu">lambda x:x.sum()</strong>, axis=1)</span></pre><p id="f9b2" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">数据帧每列总和的λ当量:</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="5124" class="np mp it kl b gy nq nr l ns nt">df.loc['Row 5'] = df.apply(<strong class="kl iu">lambda x:x.sum()</strong>, axis=0)</span></pre><p id="04af" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">以及在一系列上乘以 2 的λ当量:</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="65ba" class="np mp it kl b gy nq nr l ns nt">df['D'] = df['C'].apply(<strong class="kl iu">lambda x:x*2</strong>)</span></pre><h2 id="67e5" class="np mp it bd mq ob oc dn mu od oe dp my ll of og na lp oh oi nc lt oj ok ne ol bi translated">带有结果类型参数</h2><p id="5a2d" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated"><code class="fe ki kj kk kl b">result_type</code>是<code class="fe ki kj kk kl b">apply()</code>中的一个参数，设置为<code class="fe ki kj kk kl b">'expand'</code>、<code class="fe ki kj kk kl b">'reduce'</code>或<code class="fe ki kj kk kl b">'broadcast'</code>以获得所需类型的结果。</p><p id="2aae" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在上面的场景中，如果<code class="fe ki kj kk kl b">result_type</code>被设置为<code class="fe ki kj kk kl b">'broadcast'</code>，那么输出将是由<code class="fe ki kj kk kl b">custom_sum</code>值替代的数据帧。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="9f4d" class="np mp it kl b gy nq nr l ns nt">df.apply(custom_sum, axis=1, <strong class="kl iu">result_type='broadcast'</strong>)</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi om"><img src="../Images/9378be9fdc32d4ea467a4f2e37781d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*exNIc_dG6uYUgRTIjV9syQ.png"/></div></figure><p id="8d7f" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">结果被广播到帧的原始形状，原始索引和列被保留。</p><p id="3020" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">为了将<code class="fe ki kj kk kl b">result_type</code>理解为<code class="fe ki kj kk kl b">'expand'</code>和<code class="fe ki kj kk kl b">'reduce'</code>，我们将首先创建一个返回列表的函数。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="cfea" class="np mp it kl b gy nq nr l ns nt">def cal_multi_col(row):<br/>    return <strong class="kl iu">[row['A'] * 2, row['B'] * 3]</strong></span></pre><p id="62f4" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">现在将此函数应用于数据帧列，将<code class="fe ki kj kk kl b">result_type</code>作为<code class="fe ki kj kk kl b">'expand'</code></p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="851b" class="np mp it kl b gy nq nr l ns nt">df.apply(<strong class="kl iu">cal_multi_col</strong>, axis=1, <strong class="kl iu">result_type='expand'</strong>)</span></pre><p id="b8d4" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">输出是列名为<strong class="le iu"> 0 </strong>和<strong class="le iu"> 1 </strong>的新数据帧。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/0ec297fb8381f5c400604e9b7b9b4362.png" data-original-src="https://miro.medium.com/v2/resize:fit:464/format:webp/1*JwmWOwzM7xfzb-ibY4R2bw.png"/></div></figure><p id="f022" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">为了将它添加到现有的数据帧中，结果必须保存在一个变量中，这样列名就可以被<code class="fe ki kj kk kl b">res.columns</code>访问。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="8115" class="np mp it kl b gy nq nr l ns nt"><strong class="kl iu">res</strong> = df.apply(cal_multi_col, axis=1, result_type='expand')<br/>df[<strong class="kl iu">res.columns</strong>] = <strong class="kl iu">res</strong></span></pre><p id="cbc6" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">输出是:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/60ba0bf97cb878e3093f821c47313d5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*z0b5avBDgakerrV7tlMOwQ.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">result_type='expand '的输出</p></figure><p id="0618" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">接下来，用<code class="fe ki kj kk kl b">result_type</code>作为<code class="fe ki kj kk kl b">'reduce'</code>在 DataFrame 列中应用该函数。<code class="fe ki kj kk kl b">result_type='reduce'</code>与<code class="fe ki kj kk kl b">'expand'</code>正好相反，如果可能的话返回一个序列，而不是展开列表式的结果。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="5dee" class="np mp it kl b gy nq nr l ns nt">df[<strong class="kl iu">'New'</strong>] = df.apply(cal_multi_col, axis=1, <strong class="kl iu">result_type='reduce'</strong>)</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/cf630bb962719a1a288bc8a6883ebc8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*fRbqIGV7fUBgTlTnmGO27w.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">result_type='reduce '的输出</p></figure><h1 id="5742" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">如何使用 applymap()？</h1><p id="56f3" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated"><code class="fe ki kj kk kl b">applymap()</code>仅在数据帧中可用，用于整个数据帧中的元素操作。它已经过优化，在某些情况下比<code class="fe ki kj kk kl b">apply()</code>快得多，但在进行任何更繁重的操作之前，最好将其与<code class="fe ki kj kk kl b">apply()</code>进行比较。</p><p id="50cb" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">例如:输出数字平方的数据帧</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="811d" class="np mp it kl b gy nq nr l ns nt">df.applymap(np.square)</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b57ad83781e9f4f645bedcc084516777.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*RnO_T4BX-T9l4QZ4NBCA5Q.png"/></div></figure><h1 id="c1ef" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">如何使用 map()？</h1><p id="df28" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated"><code class="fe ki kj kk kl b">map()</code>仅在序列中可用，用于将序列中的每个值替换为另一个值。为了理解<code class="fe ki kj kk kl b">map()</code>是如何工作的，我们首先创建一个系列。</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="018b" class="np mp it kl b gy nq nr l ns nt"><strong class="kl iu">&gt;&gt;&gt; </strong>s = pd.Series(['cat', 'dog', np.nan, 'rabbit'])<br/><strong class="kl iu">&gt;&gt;&gt; </strong>s<br/>0      cat<br/>1      dog<br/>2      NaN<br/>3   rabbit<br/>dtype: object</span></pre><p id="7357" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><code class="fe ki kj kk kl b">map()</code>接受一个<code class="fe ki kj kk kl b">dict</code>或一个<code class="fe ki kj kk kl b">Series</code>。在<code class="fe ki kj kk kl b">dict</code>中找不到的值被转换成<code class="fe ki kj kk kl b">NaN</code>，除非<code class="fe ki kj kk kl b">dict</code>有默认值(如<code class="fe ki kj kk kl b">defaultdict</code>):</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="d370" class="np mp it kl b gy nq nr l ns nt"><strong class="kl iu">&gt;&gt;&gt; </strong>s.map(<strong class="kl iu">{'cat': 'kitten', 'dog': 'puppy'}</strong>)<br/>0   <strong class="kl iu">kitten</strong><br/>1    <strong class="kl iu">puppy</strong><br/>2      NaN<br/>3      <strong class="kl iu">NaN</strong><br/>dtype: object</span></pre><p id="a1d2" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">它还接受一个函数:</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="0369" class="np mp it kl b gy nq nr l ns nt"><strong class="kl iu">&gt;&gt;&gt; </strong>s.map('I am a <em class="or">{}</em>'.format)<br/>0       I am a cat<br/>1       I am a dog<br/>2       I am a nan<br/>3    I am a rabbit<br/>dtype: object</span></pre><p id="5587" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">为避免将该函数应用于缺失值(并将其保持为<code class="fe ki kj kk kl b">NaN</code>)，可使用<code class="fe ki kj kk kl b">na_action='ignore'</code>:</p><pre class="kn ko kp kq gt nl kl nm nn aw no bi"><span id="34d9" class="np mp it kl b gy nq nr l ns nt"><strong class="kl iu">&gt;&gt;&gt; </strong>s.map('I am a <em class="or">{}</em>'.format, na_action='ignore')<br/>0     I am a cat<br/>1     I am a dog<br/>2            NaN<br/>3  I am a rabbit<br/>dtype: object</span></pre><h1 id="d59d" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">摘要</h1><p id="22cc" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">最后，这里总结一下:</p><p id="8e3d" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">对于数据帧:</p><ul class=""><li id="bee7" class="lz ma it le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated"><code class="fe ki kj kk kl b">apply()</code>:当您想要沿行或列应用一个函数时使用。<code class="fe ki kj kk kl b">axis = 0</code>用于列，<code class="fe ki kj kk kl b">axis = 1</code>用于行。</li><li id="2ff6" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><code class="fe ki kj kk kl b">applymap()</code>:用于整个数据帧的逐元素操作。</li></ul><p id="f3e2" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">对于系列:</p><ul class=""><li id="24ae" class="lz ma it le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated"><code class="fe ki kj kk kl b">apply()</code>:当你想对数列的值应用一个函数时使用。</li><li id="dd31" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><code class="fe ki kj kk kl b">map()</code>:用于将每个值替换为另一个值。</li></ul><h2 id="8ac7" class="np mp it bd mq ob oc dn mu od oe dp my ll of og na lp oh oi nc lt oj ok ne ol bi translated">你可能会对我的其他一些熊猫文章感兴趣:</h2><ul class=""><li id="95c0" class="lz ma it le b lf ng li nh ll os lp ot lt ou lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/pandas-concat-tricks-you-should-know-to-speed-up-your-data-analysis-cd3d4fdfe6dd">你应该知道的熊猫串联()招数</a></li><li id="4110" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/how-to-do-a-custom-sort-on-pandas-dataframe-ac18e7ea5320">如何对熊猫数据帧进行自定义排序</a></li><li id="037f" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/when-to-use-pandas-transform-function-df8861aa0dcf">何时使用熊猫变换()函数</a></li><li id="c42f" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" href="https://medium.com/@bindiatwork/using-pandas-method-chaining-to-improve-code-readability-d8517c5626ac" rel="noopener">使用熊猫方法链接提高代码可读性</a></li><li id="af64" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/working-with-datetime-in-pandas-dataframe-663f7af6c587">在 Pandas 数据框架中处理日期时间</a></li><li id="94e2" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/working-with-missing-values-in-pandas-5da45d16e74">处理熊猫中的缺失值</a></li><li id="cc00" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" href="https://medium.com/@bindiatwork/all-the-pandas-read-csv-you-should-know-to-speed-up-your-data-analysis-1e16fe1039f3" rel="noopener">熊猫阅读 _csv()你应该知道的招数</a></li><li id="984c" class="lz ma it le b lf mj li mk ll ml lp mm lt mn lx me mf mg mh bi translated"><a class="ae mi" rel="noopener" target="_blank" href="/4-tricks-you-should-know-to-parse-date-columns-with-pandas-read-csv-27355bb2ad0e">用 Pandas read_csv()解析日期列应该知道的 4 个技巧</a></li></ul><p id="5d51" class="pw-post-body-paragraph lc ld it le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">更多可以从我的<a class="ae mi" href="https://github.com/BindiChen/machine-learning" rel="noopener ugc nofollow" target="_blank"> Github </a>中找到</p><h1 id="ac1d" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">尽情享受吧！</h1><p id="8eaa" class="pw-post-body-paragraph lc ld it le b lf ng ju lh li nh jx lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">大概就是这样。感谢阅读。</p></div></div>    
</body>
</html>