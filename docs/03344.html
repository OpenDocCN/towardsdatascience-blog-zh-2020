<html>
<head>
<title>Analyzing E-Scooter Activity through Visualization and Machine learning in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Python中的可视化和机器学习分析电动滑板车活动</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-e-scooter-activity-through-visualization-and-machine-learning-in-python-a33585b2c29?source=collection_archive---------33-----------------------#2020-03-30">https://towardsdatascience.com/analyzing-e-scooter-activity-through-visualization-and-machine-learning-in-python-a33585b2c29?source=collection_archive---------33-----------------------#2020-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d27f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从数据收集到在热图上可视化聚类</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/ae58f776d17b33797c75f2d6049a63f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CkFouUeVXzD9cnQu5k8tgw.gif"/></div></figure><p id="9710" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">根据最近发布的<a class="ae lm" href="https://www.tomtom.com/en_gb/traffic-index/" rel="noopener ugc nofollow" target="_blank"> 2019 TomTom交通指数报告</a>，全球416个城市中有239个城市(57%)交通拥堵加剧。仅在美国，主要城市的交通拥堵率为+20%。这意味着，一次出行将比在城市基线不拥挤的情况下多花20%的时间。洛杉矶以+42%高居榜首，然后是+37%的纽约市。更不用说由于更高的排放量而带来的环境影响了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ln"><img src="../Images/d749c832d109aeb6d51a9e40faceff0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_LyTYQVsmW6nH-ey"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">由<a class="ae lm" href="https://unsplash.com/@qa9de?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马克·阿斯特霍夫</a>在<a class="ae lm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="6149" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如上所述，人们正在使用替代的通勤方式，如拼车、骑自行车、公共交通或两者的结合。一个这样的选择是电动滑板车。电动滑板车对市场来说相当新，主要针对通勤的“最后一英里”部分。</p><p id="39be" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">伯德公司就是这样一家公司。对于那些不熟悉该公司的人，伯德在全球100多个城市经营<em class="lw">无码头滑板车</em>。有各种型号的滑板车，在我去华盛顿特区实地考察的时候，我就骑过其中的两种。骑滑板车不贵，除非你的平衡感很差，否则骑这种车应该很容易。</p><div class="kj kk kl km gt ab cb"><figure class="lx kn ly lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/6cb4afb787def362b6c84b1b3f5cf395.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*7Giy09gmZik7q08N8V3Ulw.png"/></div></figure><figure class="lx kn md lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/1da866c3e9ac7eebc8a2e0480cfb4a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*MePBi9MKkIi2joaV57htXQ.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk me di mf mg translated">来源(左):CBINSIGHTS(右):NACTO</p></figure></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mh"><img src="../Images/70c1b010cd59d2b1e37713b79555825e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCLtZkyyt2y0pmghIAZknQ.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">停放在华盛顿特区十字路口的小型摩托车</p></figure><h1 id="3535" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">简介:</h1><p id="e0db" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">踏板车通常安装有大量传感器，这导致大量数据产生，因此有利于有趣的数据探索。</p><p id="2aad" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我带着以下问题出发:</p><p id="391a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">1.电动滑板车在华盛顿特区及其周边的普及程度如何？</p><p id="8e3f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">2.平均行程距离是多少？用法是否取决于一周中的日期和时间？<em class="lw">后者看似直观但仍需证明。</em></p><p id="aeb4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">3.我能从顾客使用滑板车的行为中了解到什么？</p><p id="bbfc" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">4.我可以用上面的发现来产生见解吗？</p><h1 id="34ea" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">数据收集:</h1><p id="c4e0" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">某些州要求公司制定开放数据政策。但是华盛顿特区没有，因此Bird没有一个面向华盛顿特区的公共API，但是一个在Github上化名为ubahnverleih的人设法一起破解并开发了一个API。ubahnverleih已经为多个其他乘车共享公司开发了API，所以如果你正在寻找任何这样的数据，请查看他的Github。</p><p id="e2f2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">华盛顿特区及其周边地区大约占地100平方英里。为了覆盖整个区域，我精心选择了49个不同的坐标点<em class="lw">(大致36 sq。这样，在API中ping这些点，将返回该地区所有小型摩托车的数据。我使用的方法可以在<a class="ae lm" href="https://docs.google.com/document/d/1zalmeb7jNfvLY2K0zGE9-NuxibdbtYIhVIZO0XXcztY/edit" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</em></p><div class="kj kk kl km gt ab cb"><figure class="lx kn nf lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/9fee689642c16867ed556e861410a604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1472/format:webp/1*oaweB7E3yRXtzu7DJJXhJg.png"/></div></figure><figure class="lx kn ng lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/24750e703e7630efecac29c377d2ef0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*V6ZMfiMqhEDJslTfIpnxMw.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk nh di ni mg translated">图片来源(右):波导手机app</p></figure></div><p id="c2b8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这是任务的第一部分。然而，它缺少一个要素:时间。我想研究一段时间内踏板车的使用情况，而不仅仅是踏板车在地理上是如何分布的。</p><p id="9b4e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">为了捕捉一段时间内踏板车的使用情况，我编写了一个脚本，每隔5分钟运行一次，收集上面提到的所有坐标点的踏板车数据。我让这个程序运行了1.5个月(48天)，产生了大约800万个数据点。</p><h2 id="7ca8" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">数据收集挑战:</h2><p id="f238" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">该项目的API争论阶段存在许多技术挑战，虽然我不会一一列出，但我认为特别提到其中一个是有帮助的，可以说明在野外收集数据时会出现的各种挑战:</p><ul class=""><li id="a2aa" class="nv nw it ks b kt ku kw kx kz nx ld ny lh nz ll oa ob oc od bi translated">我写了一个脚本，收集了一整天的数据。在启动收集过程后，我注意到程序已经连续两个早上崩溃了。</li><li id="8329" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">我的第一反应是认为这是由于代码中的一个错误，但即使在检查之后，也没有发现是什么导致了这个问题。</li><li id="f430" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">然后我检查了收集的数据，注意到一个模式，崩溃前每晚的最后一次API调用总是在<em class="lw">【第二天】</em>凌晨12点之前的某个时间。当时没有对这个问题提供任何见解，但这是了解问题原因的一个小线索。在对代码进行了大量修补和不成功的测试后，我决定通宵坐着亲自见证崩溃。</li><li id="9ed1" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">这种方法，以及随后的黑客侦探工作，让我发现API在每天晚上12点到凌晨4点之间不会返回任何东西，而是在凌晨4点以后开始工作。公司经常对他们的系统进行维护，有些比其他公司更频繁，这可能是一个原因。无论如何，在知道这一点后，我在脚本中添加了一个小部分来说明每晚的事件，这是一个简单的解决方法。但这无疑是一个具有挑战性的诊断。</li></ul><p id="2b5a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">有了现在定期收集的数据，我创建了一个PostgreSQL数据库来更好地组织和管理数据。从我的Jupyter笔记本中添加了另一个脚本部分来做同样的事情。</p><h1 id="9815" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">数据:</h1><p id="b598" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">在经历了上述步骤并克服了挑战之后，下面是结果数据的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi oj"><img src="../Images/f7f8a8eeb3e6cea7ac4508608a1d1a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCZ8xXbodNDCWdgP_ZmdFQ.png"/></div></div></figure><p id="69e7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">每一行包含一个单独的踏板车的所有相关信息。</p><p id="7ef5" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">例如，在上面快照的第一行，小型摩托车<code class="fe ok ol om on b">‘3db0f8a8–72ed-4d4b-aff8-f0f2de53c875’</code>，型号为<code class="fe ok ol om on b">‘bd’</code>，位于<code class="fe ok ol om on b">4:00:53 AM</code>的<code class="fe ok ol om on b">10/3/19</code>上的<code class="fe ok ol om on b">(38.927739,-77.097905)</code>，电池电量为<code class="fe ok ol om on b">42</code>，这意味着它将运行另外<code class="fe ok ol om on b">5069</code>个单位<em class="lw">(大约6英里，根据数据比例)</em>。</p><div class="kj kk kl km gt ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/36fff9b45d716fce40a1e4decc28340e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*OFAD_fCO7DHGCW6zC0ERtg.jpeg"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/000eeab0709683f341ecedeac31d8cce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*eCa3JISQAy81ZZGes7P0Sw.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">使用数据发现的踏板车型号“bd”。(厂商网址:<a class="ae lm" href="http://www.electisan.com/" rel="noopener ugc nofollow" target="_blank">http://www.electisan.com/</a>)</p></figure></div><p id="e46a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">有一些空的和多余的字段，它们没有用，因此我的分析没有考虑它们。</p><h1 id="2b21" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">分析策略:</h1><p id="f805" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">以下是我回答上述问题的方法概述。</p><p id="9234" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我已经在帖子的末尾浏览了结果。</p><ol class=""><li id="b6ae" class="nv nw it ks b kt ku kw kx kz nx ld ny lh nz ll or ob oc od bi translated">数据清理。</li><li id="e2d9" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll or ob oc od bi translated">从收集的数据中创建踏板车出行数据集，并使用它来研究使用和活动，同时也有助于进一步分析。</li><li id="6319" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll or ob oc od bi translated">定义检测踏板车何时静止和何时移动的规则，以便分析和比较使用活动。</li><li id="0ea7" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll or ob oc od bi translated">使用上述规则的特征工程和对踏板车位置的聚类来跟踪聚类中心。</li></ol><p id="251d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">为了这篇博文，我将更多地关注方法和结果，而不会过多地探究背后的代码。如果需要，我会展示某些代码部分。完整的代码可以在我的GitHub <a class="ae lm" href="https://github.com/himanshu20792/BirdProject" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="6efb" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">1.数据清理</h2><p id="3881" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">双重:</p><p id="3afd" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">A.修复数据类型。</p><p id="73b3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">B.创建一个datetime功能，以允许对数据进行切片和切块。</p><p id="74a9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我创建了一个助手函数来为我们完成上述工作..</p><pre class="kj kk kl km gt os on ot ou aw ov bi"><span id="9a9d" class="nj mj it on b gy ow ox l oy oz">def fix_dtypes(df):<br/> int_cols = [‘battery_level’, ‘estimated_range’]<br/> float_cols = [‘latitude’, ‘longitude’]<br/> df = df.astype({col: ‘int32’ for col in int_cols})<br/> df = df.astype({col: ‘float32’ for col in float_cols})<br/> #Combining date, time column to datetime<br/> df[‘date_time’] = df[‘Date’].map(str) + “ “ + df[“Time”].map(str)<br/> df[‘date_time’] = pd.to_datetime(df[‘date_time’])<br/> return df</span><span id="c4ec" class="nj mj it on b gy pa ox l oy oz">df_scootsbydate = df_multiple_days.groupby(‘Date’ [‘id’].nunique()<br/>df_scootsbydate.mean()</span><span id="eadd" class="nj mj it on b gy pa ox l oy oz">[Out]: 5337.555555555556</span><span id="c0b6" class="nj mj it on b gy pa ox l oy oz">So, on any given day, there are about 5338 scooters spread throughout the D.C. region.</span></pre><h2 id="13ae" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">2.踏板车旅行:</h2><p id="3212" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">原始数据实际上是每次ping API时拍摄的一系列快照。每次ping都会返回当时所有可用指示器的数据。</p><p id="d18f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在一个非常简单的层面上，人们可以想到一本翻书动画。就像每个页面是一个快照，所有页面放在一起向我们显示从开始到结束的整个序列，第一页显示序列的开始，最后一页显示序列的结束。类似地，第一个API调用将显示一天开始时踏板车的时间和位置，最后一个API调用将显示一天结束时的时间和位置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pb pc l"/></div></figure><p id="4888" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面是结果数据的一个片段，以及我是如何完成的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi pd"><img src="../Images/114f4ec80d5bea4e248e8d625fc68bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYDbpm6HH7-3X7BR66lYCQ.png"/></div></div></figure><p id="af05" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在不涉及太多技术细节的情况下，<code class="fe ok ol om on b">(‘latitude_first, longitude_first)</code>是在<code class="fe ok ol om on b">‘date_time_min’</code>日期&amp;时间投入运行时的坐标，<code class="fe ok ol om on b">(‘latitude_last, longitude_last)</code>是在<code class="fe ok ol om on b">‘date_time_max’</code>日期&amp;时间停止运行时的坐标。</p><p id="d983" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><code class="fe ok ol om on b">‘time_diff_hrs’</code>:滑板车一天的总运行时间。其被计算为仅仅<code class="fe ok ol om on b">‘date_time_max’ — ‘date_time_min’</code>。</p><p id="0a20" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu">计算行驶距离(</strong> <code class="fe ok ol om on b"><strong class="ks iu">‘distance_miles')</strong></code> <strong class="ks iu"> <em class="lw"> : </em> </strong></p><p id="433e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><code class="fe ok ol om on b">‘distance_miles’</code>:滑板车一天行驶的距离(英里)。</p><p id="87fa" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">从上面，我们有<code class="fe ok ol om on b">(‘latitude_first’, ‘longitude_first’)</code>和<code class="fe ok ol om on b">(‘latitude_last’, ‘longitude_last’)</code>为每辆踏板车。现在我们需要计算这两个位置之间的距离。有几种方法可以计算两点之间的距离。但是在这里，由于我们处理的是GPS坐标，我们使用<strong class="ks iu"> <em class="lw">哈弗森距离</em> </strong>进行计算。<a class="ae lm" href="https://community.esri.com/groups/coordinate-reference-systems/blog/2017/10/05/haversine-formula" rel="noopener ugc nofollow" target="_blank">哈弗辛</a>考虑了地球的球形，而像<em class="lw">欧几里德距离</em>这样的公式却没有考虑，这就是为什么哈弗辛适合在这种情况下使用<em class="lw">。</em></p><p id="1388" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">有一些好的Python包可以做到这一点。我使用<a class="ae lm" href="https://stackoverflow.com/questions/25767596/vectorised-haversine-formula-with-a-pandas-dataframe" rel="noopener ugc nofollow" target="_blank">这个</a>资源来构建一个助手函数来为我完成这项工作。</p><h2 id="e0ab" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">3.平稳性和非平稳性的定义规则。</h2><p id="7ffd" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">在这一点上，我们有了收集数据的1.5个月中每天的踏板车出行数据集。我们现在可以分析踏板车的用法和运动。但是这并不像仅仅根据距离特征过滤指示器那么简单，换句话说，子集化数据以只选择那些<code class="fe ok ol om on b">‘distance_miles’</code>是<code class="fe ok ol om on b">0</code>的指示器。</p><p id="d7e3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><code class="fe ok ol om on b"><strong class="ks iu">Stationary</strong></code>:当满足<em class="lw">【Cond _ 1】</em><em class="lw">和</em><strong class="ks iu"/><em class="lw">【Cond _ 2】</em>时，认为Scooter是静止的。<br/> <code class="fe ok ol om on b"><strong class="ks iu">Non-stationary</strong></code>:如果<em class="lw">不满足</em><em class="lw"/>'<em class="lw">Cond _ 2】但满足【Cond _ 3】</em>，则认为Scooter是非静止的(或在行程中)。也就是说，如果<code class="fe ok ol om on b">‘distance_miles’</code>大于0.5英里并且<code class="fe ok ol om on b">‘battery_diff’</code>小于50英里(下面给出解释)。</p><p id="d50e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">有一些挑战，我解释了我用来识别踏板车是否静止的三个条件:</p><p id="7428" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">1.<em class="lw">Cond _ 1</em>:<code class="fe ok ol om on b">‘time_diff’</code>应该大于4小时。有很多情况下，滑板车会在白天出现一小段时间，然后消失几天。可能是由于各种原因，如维修、保养等。这篇文章在某种程度上证实了这一点。滑板车的消失并不真正算作滑板车的使用活动，因此没有计入我们的分析。这一规则使得重点放在“肯定”是静止的踏板车上。<br/>2<br/>2。<em class="lw"> Cond_2 </em> : <code class="fe ok ol om on b">‘distance_miles’</code>应该小于0.5英里。人们可能会猜测，要将小型摩托车视为静止，您所需要的就是距离特征为零，对吗？好吧，数据有一些不一致的地方，我们注意到有些情况下滑板车移动了很小的距离，不到几码左右。几码并不真正算作“旅行”，所以我们将阈值保持在0.5，以避免在我们的分析中采取这些滑板车运动。</p><p id="10a3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">3.<em class="lw"> Cond_3 </em> : <code class="fe ok ol om on b">‘battery_diff’</code>应该小于50。这是一个偷偷摸摸的方法，因为这是在分析的几次迭代之后实现的。有时候，滑板车被拿出来充电后，会被放回一个完全不同的地方。我们最初的分析认为这是踏板车运动，但在认识到这种不规则性后，使用这种条件有助于我们避免犯这种错误。50是一个很好的阈值，因为在这种情况下，电池电量会急剧变化，例如，电池电量为10的小型摩托车被拿出来充电，然后电池电量为100时再放回去。在这种情况下，电池电量的差值将为90。这种情况会正确地认识到这种不规则性，并且不会将这种踏板车计入我们的分析中。</p><div class="kj kk kl km gt ab cb"><figure class="lx kn pe lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/594aabb43a2f0c76dffbe2e8342f25f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*COMSBKHGCnDvc6wxWxsrcg.png"/></div></figure><figure class="lx kn pf lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/1b7095573f0d72525c647f843e142cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*_QiYYzCwnuRPMZmyixni7g.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk pg di ph mg translated">工作日(左)和周末(右)出行最多的五种滑板车</p></figure></div><h2 id="92b1" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">4.特征工程和聚类。</h2><p id="96a5" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">Feature使用上述规则将原始数据集设计成固定/非固定以及工作日/周末组合的子集。</p><p id="3b7d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面是静态踏板车的一些统计数据..</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi pi"><img src="../Images/6c2f429f3cbb69e0b6b11cd55bead2f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cm1IjAAtjs2WlPMtK7qniQ.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">平日的固定滑板车</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi pj"><img src="../Images/8b105f4d8a220d13feabdd9f667ae8e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AKaXrTnlm0NX20D_RljbPA.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">周末的固定滑板车</p></figure><p id="098f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">正如你从上面所看到的，在某个特定的点上有一系列的滑板车。为了产生洞察力，我们需要了解踏板车的整体运动，而不是关注个人。我们使用K-Means和HDBSCAN聚类方法来实现这一点。</p><h1 id="11dc" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结果和结论:</h1><p id="160b" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">我们已经做好了所有的准备工作，现在是公布结果的时候了…</p><h2 id="92b2" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">1.滑板车在华盛顿特区的普及程度如何？</h2><p id="2878" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">当然，踏板车的数量会随着时间的推移而变化，但我在这里的目的只是为了更好地了解Bird在该地区部署踏板车的程度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi pk"><img src="../Images/3e174f2a0d6b99293a1f070a1741cdd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUwzwzOe7_O94eQ2nk1b5w.png"/></div></div></figure><p id="c126" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">所以，平均来说，整个华盛顿大约有5338辆小型摩托车，这比我最初预计的要多得多。</p><h2 id="8c22" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">2.平均行程距离是多少？一周中的哪一天对使用有影响吗？</h2><p id="0676" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">回答问题的第一部分..平均行程距离约为1.88英里</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi pl"><img src="../Images/bb5d8dffc2078fd230cbd5596272c305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nH29JrddJ9f9CuO_2pNWg.png"/></div></div></figure><p id="3579" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">出于对验证我的发现的好奇，我开始在网上搜索任何报告或文章，结果发现，我的发现与网上发表的这篇报告非常接近(下面的<em class="lw">链接)</em></p><blockquote class="pm"><p id="7fc7" class="pn po it bd pp pq pr ps pt pu pv ll dk translated"><a class="ae lm" href="https://qz.com/1325064/scooters-might-actually-have-good-unit-economics/" rel="noopener ugc nofollow" target="_blank">“鸟类旅行的平均长度是1.6英里”</a></p></blockquote><p id="49dd" class="pw-post-body-paragraph kq kr it ks b kt pw ju kv kw px jx ky kz py lb lc ld pz lf lg lh qa lj lk ll im bi translated">考虑到这只是基于1.5个月的数据，这是非常接近的。</p><p id="a135" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu">第二部分</strong> …比较不同日期的使用活动…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/0fc1ef440109b409be419f464c1e5dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*Sc0UanlvSTGa2-9ST4bF1g.png"/></div></figure><p id="e41b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">其中0 —周一，1 —周二，以此类推。</p><p id="973f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">正如我们从上面看到的，工作日的使用量似乎比周末多一点。</p><p id="f0f7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">老实说，这让我很惊讶，因为我以为滑板车更多地是用于娱乐目的，因此在周末会有更多的活动。</p><p id="ca09" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">但是从我上面的结果来看，工作日的活动似乎比周末多。这表明人们可能更多地使用滑板车作为通勤工具。也许上下班的时候。</p><p id="0944" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">考虑到华盛顿地区的交通状况，这是有道理的。走出地铁/公交车站后，人们可能会使用滑板车来覆盖他们的“最后一英里”。</p><p id="94c2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">当我看到伯德发表的关于其在华盛顿使用滑板车的报告时，我能够验证我的理论</p><blockquote class="pm"><p id="f957" class="pn po it bd pp pq pr ps pt pu pv ll dk translated"><a class="ae lm" href="https://www.bird.co/blog/birds-positive-impact-on-d-c/" rel="noopener ugc nofollow" target="_blank">“……50%的骑行者表示他们使用Bird上下班。但是乘客们也在使用公共交通工具——29%的乘客使用Bird来连接华盛顿地铁和公交车……”——Bird</a></p></blockquote><h2 id="730f" class="nj mj it bd mk nk qc dn mo nm qd dp ms kz qe np mu ld qf nr mw lh qg nt my nu bi translated">3.我能从使用模式中学到什么？</h2><p id="d8bb" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">有什么比想象更好的理解事物的方法呢？我在Python中使用了一个很酷的包，叫做“叶子”,通过它你可以在真实世界的地图上构建自定义的可视化效果。</p><p id="4a0e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">由于存在大量的滑板车和它们的运动，绘制单个滑板车和它们的运动只会使地图拥挤，难以解释。为了实现这一点，我使用了叶子上很酷的<em class="lw">热图和时间</em>插件来绘制热图。你们可能都很了解热图，颜色越深，浓度越高，在这个例子中是指踏板车。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/5106bd73c8f944f80400ceb27e132517.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*GDvKUWysxXtMjTiM4gtrmA.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">可视化策略</p></figure><div class="kj kk kl km gt ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/7ae47a84a9627bd4798368b2b7ff18f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*ns3f6_D5G2o5UnoIQPGFcg.gif"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/54c68f33a20e6a499b6d188deaaf7136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*TdbIJYbzo3z-bSJVUHq-oQ.gif"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">平日(左)与周末(右)的固定滑板车活动</p></figure></div><div class="ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/d2455007866cc2d42268ed508522ec77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*z0Lg0QH5Eeo9g0hTVyN5Cw.gif"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/175b4de836fba5761890e81274cba419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*NKcWx9Rr2PnQpF9R0Qe1nw.gif"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">工作日(左)与周末(右)的非固定踏板车活动</p></figure></div><div class="ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/175b4de836fba5761890e81274cba419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*NKcWx9Rr2PnQpF9R0Qe1nw.gif"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/54c68f33a20e6a499b6d188deaaf7136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*TdbIJYbzo3z-bSJVUHq-oQ.gif"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">非固定(左)，固定(右)周末</p></figure></div><h2 id="c0fc" class="nj mj it bd mk nk nl dn mo nm nn dp ms kz no np mu ld nq nr mw lh ns nt my nu bi translated">4.我能利用上述问题的发现并产生见解吗？</h2><p id="0798" class="pw-post-body-paragraph kq kr it ks b kt na ju kv kw nb jx ky kz nc lb lc ld nd lf lg lh ne lj lk ll im bi translated">为了做到这一点，我根据地理坐标将踏板车分组，然后通过不同的时间段将这些分组可视化。这将使我对整体动作有一个很好的理解。我使用K-Means和HDBSCAN聚类算法来实现这一点，然后我比较了不同情况下的结果，如下所示。</p><div class="kj kk kl km gt ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/43a7a64c8ae9cb9b4e1200e433d1a4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*CkFouUeVXzD9cnQu5k8tgw.gif"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/5beb228fd368900657ff2c6c19599093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*PXRQW2LUtbaeiSN_7kiN3Q.gif"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">平日(左)与周末(右)的固定滑板车活动</p></figure></div><div class="ab cb"><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/4aab97595a277033a4414b12be4d4341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*BOMZXXF-fwxubUR7hIYBww.gif"/></div></figure><figure class="lx kn oo lz ma mb mc paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><img src="../Images/e6a5c225bf440c14a037271413f9c0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*HNuCAGHOzR3DOQoc0UTSHw.gif"/></div><p class="ls lt gj gh gi lu lv bd b be z dk op di oq mg translated">工作日(左)与周末(右)的非固定踏板车活动</p></figure></div><h1 id="87ca" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结论:</h1><ul class=""><li id="1a17" class="nv nw it ks b kt na kw nb kz qi ld qj lh qk ll oa ob oc od bi translated">上面的图像代表了华盛顿的心跳模式。</li><li id="1c73" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">工作日的上午8点至10点时段显示出较高的使用率，接近中午时段时有所下降，但在下午4点至6点时段又有所回升。</li><li id="dd1d" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">周末的活动比平日少，但使用模式与平日相似。</li><li id="9a3c" class="nv nw it ks b kt oe kw of kz og ld oh lh oi ll oa ob oc od bi translated">在任何一天，活动在一天的早些时候集中在市中心区域，在一天的晚些时候扩散到市中心周围的区域。代表用户的通勤行为。</li></ul><p id="02e1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">来自上面的使用数据和见解可用于找到最常用的路线，并使用该路线，公共交通服务，如公共汽车、地铁等。可以改进。可以对路线进行聚类，然后根据受欢迎程度进行排名。</p><p id="4e75" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">使用密度可以与基于人口统计的人口密度相互参照，并且资源可以集中于在这两个方面排名靠前的人。</p><p id="2d88" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu"> <em class="lw">评论或提问？请发邮件至:himanshu.agarwal20792@gmail.com或联系</em></strong><a class="ae lm" href="https://www.linkedin.com/in/walh/" rel="noopener ugc nofollow" target="_blank"><strong class="ks iu"><em class="lw">LinkedIn</em></strong></a></p></div></div>    
</body>
</html>