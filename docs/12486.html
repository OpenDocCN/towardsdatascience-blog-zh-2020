<html>
<head>
<title>The White Noise Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">白噪声模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-white-noise-model-1388dbd0a7d?source=collection_archive---------10-----------------------#2020-08-28">https://towardsdatascience.com/the-white-noise-model-1388dbd0a7d?source=collection_archive---------10-----------------------#2020-08-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c7d84ab1e96e753e73e8f45596045d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTD3_xpQmDSDv_bkGUuwhw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">这肯定不仅仅是一个随机的过程！或者是？(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><div class=""/><div class=""><h2 id="abff" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">最重要的统计模型</h2></div><p id="f99a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">白噪声是任何回归模型都无法解释的数据变化。</p><p id="d29c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，恰好有一个白噪声的统计模型。时间序列数据是这样的:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/22edcec47a036f6878b0124a07128064.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*TnagfsMv84D5eABELk2Flw.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">加性白噪声模型(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="a7f8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">时间步<em class="lz"> i </em>处的观测值<em class="lz"> Y_i </em>是当前电平<em class="lz"> L_i </em>和当前电平周围的随机分量<em class="lz"> N_i </em>的和。</p><p id="ecd9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果随机变化的程度与当前水平成比例，则我们有相同模型的以下乘法版本:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/b86777f4768f12b7fa32897a8978060e.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*4TGcXNCn_VFdTgWQ-61Uzg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">乘法白噪声模型(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="9cbe" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果当前电平<em class="lz"> L_i </em>对于所有<em class="lz"> i </em>都是恒定的，即<em class="lz"> L_i = L </em>对于所有<em class="lz"> i </em>都是恒定的，那么将会看到噪声在固定电平附近波动。</p><p id="555e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很容易生成一个白噪声数据集。下面是在 Excel 中的操作方法:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ma"><img src="../Images/527866621b03db971abdd60f6eacc927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FfbLZWpnn5Hsg7mWGNa2Lg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">如何在 Excel 中生成加性白噪声数据集(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="f40e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是在恒定水平 100 附近波动的噪声输出图:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/0a0b9f17727fddab04c8c93ad34c643b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*H0eTO_W8pJF4Uuyd9mT8Bg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">水平=100 附近的加性白噪声(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="3ce0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">电流水平经常随着现实世界的因素而变化。例如，如果<em class="lz"> L_i </em>响应于一组回归变量<strong class="la jk"> <em class="lz"> X </em> </strong>而线性变化，那么我们得到以下线性回归模型:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mc"><img src="../Images/25c0adbc7d5364f1bc2f12cad79b8153.png" data-original-src="https://miro.medium.com/v2/resize:fit:742/format:webp/1*_OJB28IxOif-7X824fGT0w.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">回归变量加噪声的时间序列(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="da25" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上式中，<strong class="la jk"> <em class="lz"> β </em> </strong>是回归系数的向量，<strong class="la jk"> <em class="lz"> X_i </em> </strong>是回归变量的向量。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="24ce" class="mk ml jj bd mm mn mo mp mq mr ms mt mu kp mv kq mw ks mx kt my kv mz kw na nb bi translated">为什么研究白噪声模型很重要？</h1><p id="fdbb" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">原因有三:</p><ol class=""><li id="ef67" class="nh ni jj la b lb lc le lf lh nj ll nk lp nl lt nm nn no np bi translated">如果你发现使用一些我将很快描述的技术，你的数据基本上是围绕一个固定水平的白噪声，那么你能做的最好的事情就是围绕这个固定水平拟合一个模型。试图做得更好是浪费时间。</li><li id="2209" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">假设您已经为数据集拟合了回归模型。如果你能够证明拟合模型的残差是白噪声，这意味着你的模型在解释因变量的方差方面做得很好。在信息的道路上已经没有什么可以提取的了，剩下的都是噪音。你可以为自己出色的工作而感到自豪！</li><li id="7e12" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">第三，白噪声模型恰好是统计学中另一个重要而著名的模型的垫脚石，这个模型叫做随机游走模型，我将在下一节解释它。</li></ol></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="e967" class="mk ml jj bd mm mn mo mp mq mr ms mt mu kp mv kq mw ks mx kt my kv mz kw na nb bi translated">随机漫步模型</h1><p id="0831" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">让我们再次看看白噪声模型的等式:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/57b9fa65b58713fdeed87c9f0733b6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*Ri8rwHPrmfygAhEHEFuMbg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="8fe3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们使时间步长<em class="lz"> i </em>的 level level <em class="lz"> L_i </em>成为前一时间步长<em class="lz"> (i-1) </em>的模型输出值，我们就得到<strong class="la jk">随机漫步模型，</strong>因伯顿·马尔基尔的<a class="ae jg" href="https://www.amazon.com/dp/0393330338" rel="noopener ugc nofollow" target="_blank">A Random Walk Down Wall Street</a>而在通俗文学中出名。</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a718f4adb1ae9e262996372c44647e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*2vhF4QZjR-NIJDSJm4EU7g.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">随机漫步模型(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="9c82" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随机漫步模型就像数据科学甜点中的海市蜃楼。它诱使许多追逐利润的投资者赌上(并输掉)所有的钱，幻想股价走势，而这种走势实际上只不过是随机游走。</p><p id="b992" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是使用随机漫步模型生成的数据图:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/99c5868645700ec55ef5407a921209f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbFjZoIY38uMIZ2pYsGltg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">随机漫步(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="e3db" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">告诉我你在这个情节中看不到任何趋势！</p><p id="c1e1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您不完全相信上述数据可以通过纯粹的随机过程生成，那么让我们通过演示如何在 Excel 中生成这些数据来打消任何残存的幻想:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/4388aff44344157c6440abc8be2db0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BNwU5pvIKuhfD113Kc1T_g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">如何在 Excel 中生成随机行走数据(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="e23a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看如何利用我们对白噪声和随机游走的了解来尝试检测它们在时间序列数据中的存在。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="8468" class="mk ml jj bd mm mn mo mp mq mr ms mt mu kp mv kq mw ks mx kt my kv mz kw na nb bi translated">如何检测时间序列数据集中的白噪声</h1><p id="4572" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">我们将通过 3 个测试来确定你的时间序列是否真实，只是白噪音:</p><ol class=""><li id="654b" class="nh ni jj la b lb lc le lf lh nj ll nk lp nl lt nm nn no np bi translated">自相关图</li><li id="6424" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">盒子-皮尔斯试验</li><li id="9f38" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">永盒试验</li></ol><h1 id="fddc" class="mk ml jj bd mm mn ny mp mq mr nz mt mu kp oa kq mw ks ob kt my kv oc kw na nb bi translated">使用自相关图测试白噪声</h1><p id="dfbc" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">当两个变量同时上升或下降时(或者如果一个值上升，另一个值下降)，它们被称为正(或负)相关。相关系数可以用来衡量两个变量之间的线性相关程度:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/ae03752f8a49a918220a697b12bcf913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*VBlkxNVCKB1nqycOsC1qjA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">皮尔逊相关系数，用于衡量两个随机变量<strong class="bd oe"> X </strong>和<strong class="bd oe"> Y </strong>之间的线性相关性(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="dd8b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上式中，<em class="lz">E(</em><strong class="la jk"><em class="lz">X</em></strong><em class="lz">)</em>和<em class="lz">E(</em><strong class="la jk"><em class="lz">Y</em></strong><em class="lz">)</em>为<strong class="la jk"><em class="lz">X</em></strong><strong class="la jk"><em class="lz">Y</em></strong>的预期(即均值)。<em class="lz"> σ_X </em>和<em class="lz"> σ_Y </em>是<strong class="la jk"> <em class="lz"> X </em> </strong>和<strong class="la jk"> <em class="lz"> Y </em> </strong>的标准差。</p><p id="ab0f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在时间序列数据中，当前值与比当前值早 1 个时间步长或更长时间的值之间经常存在相关性，即<em class="lz"> Y_i </em>与<em class="lz"> Y_(i-1) </em>之间、<em class="lz"> Y_i </em>与<em class="lz"> Y_(i-2) </em>之间等等。股票价格的变化经常显示这种正相关和负相关的模式(注意，包含随机游走的数据也是如此！).</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi of"><img src="../Images/a36c27881c8eb5338cb23fb83fe12c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Z6HBYBB5tvg84a9yP66Ew.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">纽约证券交易所安进股票价格。蓝框显示正相关的价格变动。图表由<a class="ae jg" href="https://stockcharts.com/" rel="noopener ugc nofollow" target="_blank">StockCharts.com</a>根据<a class="ae jg" href="https://support.stockcharts.com/doku.php?id=policies:terms_of_service" rel="noopener ugc nofollow" target="_blank">使用条款</a>提供</p></figure><p id="32b3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为这些值与它们自身的过去版本相关，我们称它们为 auto，意思是自相关的。</p><p id="1cdf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是计算<em class="lz"> Y_i </em>和<em class="lz"> Y_(i-k) </em>之间自相关系数的公式:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/2cd512a2e9d921ac3adadd8fd4aa0e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGjWCpzDnPUJEiz8fGwUog.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">滞后 k 处的自相关系数(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="5641" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们展示如何使用这个自相关系数<em class="lz"> r_k </em>来检测白噪声之前，我们需要对随机变量进行一次短暂而愉快的补充考察。我会解释为什么<em class="lz"> r_k </em>是一个正态分布的随机变量，以及<em class="lz"> r_k </em>的这个性质如何被用来检测白噪声。</p><h2 id="8a4f" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated"><em class="ot">LAG-k 自相关系数的分布</em> r_k</h2><blockquote class="ou"><p id="2126" class="ov ow jj bd ox oy oz pa pb pc pd lt dk translated">对于任何滞后<em class="ot"> k </em>，<em class="ot"> r_k </em>是具有某种均值<em class="ot"> </em> _k 和方差<em class="ot"> σ </em> _k 的正态分布随机变量。</p></blockquote><p id="42bf" class="pw-post-body-paragraph ky kz jj la b lb pe kk ld le pf kn lg lh pg lj lk ll ph ln lo lp pi lr ls lt im bi translated">要理解为什么，考虑一下这个思维实验:</p><ol class=""><li id="5896" class="nh ni jj la b lb lc le lf lh nj ll nk lp nl lt nm nn no np bi translated">取一个包含 100，000 个时间点的时间序列数据集。</li><li id="7466" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">从这个数据集中随机抽取 5000 个样本。假设每个样本长度为 100 个<em class="lz">连续的</em>时间点。</li><li id="2c5d" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">对于每个样本，使用上述公式为<em class="lz"> r_k </em>计算 LAG-1 自相关系数<em class="lz"> r_1 </em>。</li><li id="8874" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">可以看到，每次，对于 100 个时间点的每个样本来说，<em class="lz">R1</em>将是 0 和 1 之间的某个值。所以我们得到了 5000 个 R1 值，每个值都是 0 到 1 之间的一个数。因此<em class="lz">R1</em>是一个随机变量，我们已经测量了它的 5000 个值。</li><li id="9ad2" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">借助于统计学的极限定理，<em class="lz">可以证明 R1 是一个正态分布的随机变量，</em>和<em class="lz">R1</em>的分布集中于某个总体均值，我们称之为<em class="lz"> _1，</em>和某个方差，我们称之为<em class="lz"> σ _1 </em>。实际上，观察到的<em class="lz">R1</em>的平均值和方差将接近我们测量的<em class="lz">R1</em>的 5000 个值的平均值。</li><li id="d94c" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">通过对所有滞后<em class="lz"> k </em>重复上述实验，可以看出，所有滞后的<em class="lz">自相关系数是正态分布的随机变量</em>，其均值为<em class="lz"> _k </em>，方差为<em class="lz">σ_ k</em></li></ol><p id="77d5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lz">象征性地:</em></p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/01dc93bd5b05ebe21393ca8ed007d654.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*pxBkX9tzj0FBh8ktgpHGqQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">对于所有滞后 k，r_k 是正态分布的随机变量(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><h2 id="fba2" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">检测白噪声的意义</h2><p id="ed87" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">如果时间序列是白噪声，那么理论上，其当前值<em class="lz"> T_i </em>根本不应该与过去值<em class="lz"> T_(i-1)、T_(i-2) </em>等以及相应的自相关系数<em class="lz"> r_1、r_2、… </em>等相关。将为零或接近于零。</p><p id="923a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">即当时间序列为白噪声时，<em class="lz"> r_k 为 0 </em>对于所有<em class="lz"> k = 1，2，3，… </em></p><p id="5346" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是我们刚刚看到<em class="lz"> r_k </em>是一个<em class="lz"> N( _k，σ _k) </em>随机变量。</p><p id="189c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将以上两个事实放在一起，我们得出以下第一个重要的结论:</p><p id="d3f7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果时间序列是白噪声，那么所有滞后 k 的自相关系数<em class="lz"> r_k </em>将具有<strong class="la jk">零均值</strong>和一些方差<em class="lz"> σ _k. </em></p><p id="4d8d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lz">象征性地:</em></p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/60eb72b57bbdf1fbb3f383fe80941e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*cW_K0MsjWHQNeykqZw6ryw.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">对于所有滞后 k，r_k 在白噪声条件下具有零均值(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="e157" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是系数<em class="lz"> r_k </em>的方差<em class="lz"> σ _k </em>呢？</p><p id="74f3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://projecteuclid.org/euclid.aoms/1177731638" rel="noopener ugc nofollow" target="_blank"> Anderson </a>、<a class="ae jg" href="https://www.jstor.org/stable/pdf/2983611.pdf?seq=1" rel="noopener ugc nofollow" target="_blank"> Bartlett </a>和<a class="ae jg" href="https://www.jstor.org/stable/2236311?seq=1" rel="noopener ugc nofollow" target="_blank"> Quenouille </a>已经表明，在白噪声条件下，标准差<em class="lz"> σ_k </em>如下:</p><p id="c80a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lz"> σ_k = 1/sqrt(n) </em></p><p id="282a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其中<em class="lz"> n </em>大小相同。回想一下，在我们的思想实验中，<em class="lz"> n </em>是 100。</p><p id="bceb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由此可知，白噪声条件下的<em class="lz"> r_k </em>具有如下分布:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/590b58f9bf2d2f9cd9614824b7827974.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*VZNc0ZMrveVkMNPYTHaHUQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">数据集为纯白噪声时自相关系数的分布(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="7088" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正态分布的一个重要特性是，它的大约 95%位于平均值的 1.96 倍标准差之内。在我们的例子中，平均值为 0，标准偏差为<em class="lz"> 1/sqrt(n) </em>，因此我们得到自相关系数的 95%置信区间如下:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pk"><img src="../Images/8c0a144df454c93601053674aea0edd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QclblIgdYMGS-TLyOg3JLw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>)</p></figure><p id="1476" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些结果产生使用自相关系数<em class="lz"> r_k </em>进行白噪声测试的以下程序:</p><ol class=""><li id="e10b" class="nh ni jj la b lb lc le lf lh nj ll nk lp nl lt nm nn no np bi translated">计算第一个<em class="lz"> k </em>自相关系数<em class="lz"> r_k </em>。<em class="lz"> k </em>可以根据时间序列数据集的长度<em class="lz"> n </em>设置为足够高的值。</li><li id="98c2" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">计算 95%置信区间<em class="lz">[-1.96/sqrt(n)，+1.96/sqrt(n)]。</em></li><li id="840c" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">如果对于所有的<em class="lz"> k </em>，如果 r_k 位于上述置信区间内，则在 95%的置信水平下断定该时间序列是真实的，<em class="lz">可能</em>只是白噪声。我们说<em class="lz">可能是</em>，因为如果我们用更大的样本量进行实验，即更大的<em class="lz"> n </em>，置信区间的大小将会缩小，并且之前在 95%界限内的<em class="lz"> r_k </em>的值现在将位于 95%界限之外。</li><li id="d3a3" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt nm nn no np bi translated">如果任何一个<em class="lz"> r_k </em>位于置信区间之外，那么时间序列<em class="lz">可能</em>中有信息。</li></ol></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h2 id="9d7f" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">示例:使用 Python 进行白噪声检测</h2><p id="d44d" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">让我们使用使用<a class="ae jg" href="https://sciencejournal.withgoogle.com/" rel="noopener ugc nofollow" target="_blank">谷歌科学杂志</a>应用程序在一家餐馆进行的 5000 分贝水平测量的真实世界时间序列来说明上述程序。</p><p id="3e48" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据集可以从这里下载<a class="ae jg" href="https://gist.github.com/sachinsdate/65f560fae449f1f6da87e338fcd52859" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0d02" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用 pandas 库从 csv 文件加载数据集并绘制它:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="5ade" class="oh ml jj pm b gy pq pr l ps pt"><strong class="pm jk">import </strong>pandas <strong class="pm jk">as </strong>pd<br/><strong class="pm jk">import </strong>numpy <strong class="pm jk">as </strong>np<br/><strong class="pm jk">from</strong> matplotlib <strong class="pm jk">import</strong> pyplot <strong class="pm jk">as</strong> plt</span><span id="b5ec" class="oh ml jj pm b gy pu pr l ps pt">df = pd.<strong class="pm jk">read_csv</strong>('restaurant_decibel_level.csv', <strong class="pm jk">header</strong>=0, <strong class="pm jk">index_col</strong>=[0])</span></pre><p id="296a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们打印前 10 行:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="9369" class="oh ml jj pm b gy pq pr l ps pt">df.<strong class="pm jk">head</strong>(10)</span><span id="e5e2" class="oh ml jj pm b gy pu pr l ps pt">           Decibel<br/>TimeIndex<br/>0          55.931323<br/>40         57.779260<br/>80         62.956952<br/>140        65.158100<br/>180        60.325242<br/>220        45.411725<br/>262        55.958807<br/>300        62.021807<br/>340        62.222563<br/>380        56.156684</span></pre><p id="9eb0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们绘制系列中的所有 5000 个值:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pv"><img src="../Images/ab55fb9c6ee2e5639d14e93a7f8c30d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZHYFFBcMdbjVvjKNOElZQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">餐馆的分贝水平(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="6c95" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们获取并绘制前 40 个滞后的自相关系数。我们将使用 statsmodels 库来完成这项工作。</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="3891" class="oh ml jj pm b gy pq pr l ps pt"><strong class="pm jk">import </strong>statsmodels.graphics.tsaplots <strong class="pm jk">as </strong>tsa</span><span id="e32b" class="oh ml jj pm b gy pu pr l ps pt">tsa.<strong class="pm jk">plot_acf</strong>(df['Decibel'], <strong class="pm jk">lags</strong>=40, <strong class="pm jk">alpha</strong>=0.05, <strong class="pm jk">title</strong>='Auto-correlation coefficients for lags 1 through 40')</span></pre><p id="4223" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">alpha=0.05 告诉 statsmodels 也绘制 95%置信区间区域。我们得到如下的情节:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pw"><img src="../Images/04f249d5e74c60f85b66f4595aee381e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cz_a18CV60u32DC-5MJGJA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">分贝水平时间序列的自相关图(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="827f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们所看到的，时间序列包含显著的自相关，直到滞后 17。顺便说一下，滞后 0 处的自相关始终为 1.0，因为某个值始终与其自身完全相关。</p><p id="9f1c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在自相关图中有类似波浪的图形，表明数据中可能包含一些季节性。我们可以通过将时间序列分解为趋势、季节性和噪声成分来识别和隔离季节性。</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="0a52" class="oh ml jj pm b gy pq pr l ps pt">Related read: <a class="ae jg" rel="noopener" target="_blank" href="/what-is-time-series-decomposition-and-how-does-it-work-9b67e007ae90"><strong class="pm jk">What is time series decomposition and how does it work</strong></a></span></pre><p id="3e7b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们将重点放在噪声部分。底线是，这个时间序列，以其目前的形式，似乎不是纯粹的白噪音。</p><p id="05fe" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将对时间序列进行两次测试来证实这一点。</p><h1 id="8474" class="mk ml jj bd mm mn ny mp mq mr nz mt mu kp oa kq mw ks ob kt my kv oc kw na nb bi translated">白噪声检测的卡方检验</h1><p id="1a1a" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">卡方检验就是基于统计学中这个强大的结果:k 个<em class="lz">相同的标准正态随机变量的平方和是一个自由度为<em class="lz"> k 个</em>的卡方分布随机变量。</em></p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi px"><img src="../Images/49434c38483ffdeb210146fda6be5abc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*iyL5DVuX0cq_tRPxF0VAxA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">具有 1 到 9 个自由度的卡方分布。来源:<a class="ae jg" href="https://commons.wikimedia.org/wiki/File:Chi-square_pdf.svg" rel="noopener ugc nofollow" target="_blank">维基媒体</a>下<a class="ae jg" href="https://creativecommons.org/licenses/by/3.0" rel="noopener ugc nofollow" target="_blank"> CC BY 3.0 </a></p></figure><p id="1f8d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实际的测试称为<strong class="la jk">盒-皮尔斯</strong>测试，其测试统计量称为 Q 统计量。其公式如下:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi py"><img src="../Images/8945e3f9753a378e4d85c5364d4d950e.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*YWCsxZ8o2jL-kea06DP2PQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Box-Pierce 测试统计(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="ce99" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以看出，如果基础数据集是白噪声，则 Q 统计的期望值为零。</p><p id="83ae" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于任何给定的时间序列，通过在卡方表中查找自由度<em class="lz"> k </em>的检验统计的 p 值，可以检查 Q 值是否以统计显著的方式偏离零。通常，小于 0.05 的 p 值表示显著的自相关，不能归因于偶然。</p><h1 id="b8fc" class="mk ml jj bd mm mn ny mp mq mr nz mt mu kp oa kq mw ks ob kt my kv oc kw na nb bi translated">白噪声检测的容格盒试验</h1><p id="c1f2" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">Ljung-Box 检验对 Box-Pierce 检验进行了改进，以获得具有比 Q 统计更接近卡方分布的分布的检验统计。Ljung-Box 检验的检验统计量计算如下，并且也是卡方(k)分布:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/c03ef53562547133e720e05bcc8ceab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*V3_ubo6ia58HqfJ0rp7Y0A.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">永盒检验统计(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="c2c0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里，<em class="lz"> n </em>是时间序列中数据点的数量，<em class="lz"> k </em>是要考虑的时滞的数量。与 Box-Pierce 测试一样，如果基础数据集是白噪声，则该卡方分布随机变量的期望值为零。同样，小于 0.05 的 p 值表示显著的自相关，不能归因于偶然。</p><h2 id="3cd8" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">示例:使用 Python 中的 Ljung-Box 测试测试白噪声</h2><p id="422b" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">让我们在餐馆分贝级别数据集上运行 Ljung-Box 测试。我们将测试多达 40 个滞后，我们将要求测试也运行盒-皮尔斯测试。</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="748b" class="oh ml jj pm b gy pq pr l ps pt"><strong class="pm jk">import </strong>statsmodels.stats.diagnostic <strong class="pm jk">as </strong>diag<br/>diag.<strong class="pm jk">acorr_ljungbox</strong>(<em class="lz">df['Decibel']</em>, <em class="lz">lags=</em>[40], <em class="lz">boxpierce=True</em>, <em class="lz">model_df=0</em>, <em class="lz">period=None</em>, <em class="lz">return_df=None</em>)</span></pre><p id="f674" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们得到以下输出:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="90bd" class="oh ml jj pm b gy pq pr l ps pt">(array([<strong class="pm jk">13172.80554476</strong>]), array([<strong class="pm jk">0.</strong>]), array([<strong class="pm jk">13156.42074648</strong>]), array([<strong class="pm jk">0.</strong>]))</span></pre><p id="c662" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据卡方(k=40)表，值<strong class="la jk"> 13172.80554476 </strong>是 Ljung-Box 检验的检验统计值，<strong class="la jk"> 0.0 </strong>是其 p 值。</p><p id="0ca9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据卡方(k=40)表，值<strong class="la jk"> 13156.42074648 </strong>是 Box-Pierce 测试的测试统计值，0.0 是其 p 值。</p><p id="e97a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们所看到的，两个 p 值都小于 0.01，因此我们可以 99%的信心说，餐馆分贝水平时间序列不是纯粹的白噪声。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="6fd2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">早些时候，我们介绍了随机游走作为白噪声模型的特例，并指出人们很容易将它们误认为是可以预测的模式或趋势。</p><p id="ec20" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将看看如何通过应用一种技术来避免犯这种错误，这种技术将揭示随机行走的真正随机性质。</p><h1 id="e0ee" class="mk ml jj bd mm mn ny mp mq mr nz mt mu kp oa kq mw ks ob kt my kv oc kw na nb bi translated">检测随机漫步</h1><p id="90ea" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">随机漫步通常是高度相关的。其实都是自相关白噪声！</p><p id="61b0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面介绍的白噪声检测测试将利用这些自相关，使它们得出时间序列不是白噪声的结论。</p><p id="c467" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">补救方法是取怀疑是随机游走的时间序列的第一个差值，并对差值序列进行白噪声测试。</p><blockquote class="ou"><p id="2db9" class="ov ow jj bd ox oy oz pa pb pc pd lt dk translated">如果原始时间序列是随机游走，那么它的第一个区别就是纯粹的白噪声。</p></blockquote><p id="4812" class="pw-post-body-paragraph ky kz jj la b lb pe kk ld le pf kn lg lh pg lj lk ll ph ln lo lp pi lr ls lt im bi translated">让我们来举例说明:</p><p id="c4ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将从加载一个被怀疑是随机游走的数据集开始。数据集可以从这里下载<a class="ae jg" href="https://gist.github.com/sachinsdate/8084300ac596241b06d2b78a12f480a2" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="262b" class="oh ml jj pm b gy pq pr l ps pt">df = pd.<strong class="pm jk">read_csv</strong>('random_walk.csv', header=0, index_col=[0])</span></pre><p id="d538" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们把它画出来，看看它是什么样子:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="2c2d" class="oh ml jj pm b gy pq pr l ps pt">df.<strong class="pm jk">plot</strong>()<br/>plt.<strong class="pm jk">show</strong>()</span></pre><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qa"><img src="../Images/aaeb620579ef77f17b6800d9e5cefa07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dMV-BJRqDjr6LUFbpbahTA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="2079" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们对这些数据进行 Ljung-Box 白噪声测试:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="0350" class="oh ml jj pm b gy pq pr l ps pt">diag.<strong class="pm jk">acorr_ljungbox</strong>(df['Y_i'], <strong class="pm jk">lags</strong>=[40], <strong class="pm jk">boxpierce</strong>=True)</span></pre><p id="367a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们得到以下结果:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="ab0a" class="oh ml jj pm b gy pq pr l ps pt">(array([<strong class="pm jk">393833.91252517</strong>]), array([<strong class="pm jk">0.</strong>]), array([<strong class="pm jk">392952.07675659</strong>]), array([<strong class="pm jk">0.</strong>]))</span></pre><p id="e501" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">p 值为 0.0 表明我们必须强烈拒绝数据是白噪声的零假设。<em class="lz">Ljung-Box 和 Box-Pierce 测试都认为这个数据集是由</em> <strong class="la jk"> <em class="lz">而不是</em> </strong> <em class="lz">纯随机过程产生的。</em></p><p id="d2bd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这显然是一个错误的结果。</p><p id="df3e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看看在我们对数据进行第一次差分后，情况是否会发生变化，即我们创建一个新的数据集，其中<em class="lz"> Y = Y_i —Y_(i-1) </em>:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="e59a" class="oh ml jj pm b gy pq pr l ps pt">diff_Y_i = df['Y_i'].<strong class="pm jk">diff</strong>()<br/><strong class="pm jk">#drop the NAN in the first row<br/></strong>diff_Y_i = diff_Y_i.<strong class="pm jk">dropna</strong>()</span></pre><p id="8559" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们绘制不同的数据集:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="59c8" class="oh ml jj pm b gy pq pr l ps pt">diff_Y_i.plot()<br/>plt.show()</span></pre><p id="9b72" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们现在看到了一幅截然不同的画面:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qb"><img src="../Images/4c091d76344757f4b14a65cbbe69d39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcHc_ZoyG15FPKUVq2FrfQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">差异数据集(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="8d34" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是放大的视图:</p><figure class="lv lw lx ly gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi qc"><img src="../Images/aa90309273ea87eeebcc7b615ebffb46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PukJroi4eYMzIN1BNgJouA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">差异数据集的放大视图(图片由<a class="ae jg" href="https://sachin-date.medium.com/" rel="noopener">作者</a>提供)</p></figure><p id="9c4e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们在差异数据集上运行 Ljung-Box 测试:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="b827" class="oh ml jj pm b gy pq pr l ps pt">diag.<strong class="pm jk">acorr_ljungbox</strong>(diff_Y_i, <strong class="pm jk">lags</strong>=[40], <strong class="pm jk">boxpierce</strong>=True)</span></pre><p id="a839" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们得到以下输出:</p><pre class="lv lw lx ly gt pl pm pn po aw pp bi"><span id="29b5" class="oh ml jj pm b gy pq pr l ps pt">(array([<strong class="pm jk">32.93405364</strong>]), array([<strong class="pm jk">0.77822417</strong>]), array([<strong class="pm jk">32.85051846</strong>]), array([<strong class="pm jk">0.78137548</strong>]))</span></pre><p id="287e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，这一次由 Ljung-Box 报告的测试统计值<strong class="la jk"> 32.934 </strong>和由 Box-Pierce 测试报告的<strong class="la jk"> 32.850 </strong>要小得多。并且在卡方(k=40)表上检测到的对应 p 值分别为<strong class="la jk"> 0.778 </strong>和<strong class="la jk">0.781</strong>，均远高于 0.05。这足以支持数据(即差分时间序列)是纯白噪声的零假设。</p><p id="741e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lz">从本练习中得出的结论是，除了白噪声模型之外，不应对此数据进行任何拟合。</em></p><h1 id="93b1" class="mk ml jj bd mm mn ny mp mq mr nz mt mu kp oa kq mw ks ob kt my kv oc kw na nb bi translated">摘要</h1><ul class=""><li id="12e2" class="nh ni jj la b lb nc le nd lh qd ll qe lp qf lt qg nn no np bi translated">白噪声模型可以用来表示数据集中噪声的性质。</li><li id="24b2" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt qg nn no np bi translated">测试白噪声是数据科学家应该做的第一件事，以避免花费时间在数据集上拟合模型，这些数据集不能提供有意义的可提取信息。</li><li id="383c" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt qg nn no np bi translated">如果数据集不是白噪声，那么在将模型拟合到数据后，应该对残差进行白噪声测试，以了解模型能够从数据中提取多少信息。</li><li id="c5d2" class="nh ni jj la b lb nq le nr lh ns ll nt lp nu lt qg nn no np bi translated">对于时间序列数据，自相关图和 Ljung-Box 检验提供了两种有用的技术来确定时间序列实际上是否只是白噪声。</li></ul></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="4f3a" class="mk ml jj bd mm mn mo mp mq mr ms mt mu kp mv kq mw ks mx kt my kv mz kw na nb bi translated">参考文献、引文和版权</h1><h2 id="bdad" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">数据集</h2><p id="399b" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">餐厅分贝等级数据的版权<a class="ae jg" href="https://www.linkedin.com/in/sachindate/" rel="noopener ugc nofollow" target="_blank"> Sachin 日期</a>在<a class="ae jg" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>下。</p><p id="7c2f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安进股价图来自<a class="ae jg" href="https://stockcharts.com/h-sc/ui" rel="noopener ugc nofollow" target="_blank">stockcharts.com</a>下<a class="ae jg" href="https://support.stockcharts.com/doku.php?id=policies:terms_of_service" rel="noopener ugc nofollow" target="_blank">这些使用条款</a>。</p><h2 id="e56a" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">报纸</h2><p id="0ce1" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">Anderson，R. L .，<a class="ae jg" href="https://projecteuclid.org/euclid.aoms/1177731638" rel="noopener ugc nofollow" target="_blank">序列相关系数的分布</a>，<em class="lz">数理统计年鉴，第 13 卷，第 1 号(1942)，1–13</em>。</p><p id="bfde" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Bartlett，M. S,“自相关时间序列的理论规范和抽样特性”，<em class="lz">《皇家统计学会杂志》增刊，第 8 卷，第 1 期(1946 年)，第 27-41 页。</em></p><p id="fd5b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">论文链接:Quenouille，M. H .，<a class="ae jg" href="https://www.jstor.org/stable/2236311?seq=1" rel="noopener ugc nofollow" target="_blank">序列相关系数的联合分布</a>，<em class="lz">《数理统计年鉴》第 20 卷第 4 期(1949 年 12 月)，第 561–571 页</em></p><h2 id="b356" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">书</h2><p id="b5b5" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">Hyndman，R. J .，Athanasopoulos，g .，<a class="ae jg" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">预测:原理与实践【T5，<em class="lz"> OTexts </em></a></p><h2 id="9375" class="oh ml jj bd mm oi oj dn mq ok ol dp mu lh om on mw ll oo op my lp oq or na os bi translated">形象</h2><p id="60dd" class="pw-post-body-paragraph ky kz jj la b lb nc kk ld le nd kn lg lh ne lj lk ll nf ln lo lp ng lr ls lt im bi translated">本文中的所有图片版权归<a class="ae jg" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC-BY-NC-SA </a>所有，除非图片下方提到了不同的来源和版权。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="2c19" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lz">感谢阅读！如果您喜欢这篇文章，请</em> <a class="ae jg" href="https://timeseriesreasoning.medium.com/" rel="noopener"> <strong class="la jk"> <em class="lz">关注我</em> </strong> </a> <em class="lz">获取关于回归和时间序列分析的提示、操作方法和编程建议。</em></p></div></div>    
</body>
</html>