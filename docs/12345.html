<html>
<head>
<title>Let’s Impute Missing Values with SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用 SQL 估算缺失值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lets-impute-missing-values-with-sql-e350c89d9e2a?source=collection_archive---------33-----------------------#2020-08-25">https://towardsdatascience.com/lets-impute-missing-values-with-sql-e350c89d9e2a?source=collection_archive---------33-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3df5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">易于理解的自动化脚本来完成工作。</h2></div><p id="56a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">缺失值是机器学习中的一个巨大问题。在机器学习可以直接在数据库中完成的时代，人们想知道如何在没有其他编程语言(如 Python 和 r)的情况下使用 SQL 进行充分的数据准备。今天我们将看到它是多么简单。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/a7f338e277de9738ee9fa74a8f20be8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7q-IsQV-iJddOfgC"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/@elijahdhiett?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊莱贾·赫特</a>在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="8669" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">出于本文的目的，我们将使用<a class="ae lu" href="https://www.oracle.com/index.html" rel="noopener ugc nofollow" target="_blank"> Oracle Cloud </a>，因为它是免费的，无需在您的机器上进行任何下载和安装即可使用——通过<em class="lv"> SQL Developer Web </em>。如果您决定跟随，创建一个免费的 OLTP 数据库，并转到<em class="lv">服务控制台—开发— SQL Developer Web </em>。</p><p id="9352" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于数据集，我们将使用众所周知的<a class="ae lu" href="https://gist.githubusercontent.com/michhar/2dfd2de0d4f8727f873422c5d959fff5/raw/fa71405126017e6a37bea592440b4bee94bf7b9e/titanic.csv" rel="noopener ugc nofollow" target="_blank"> Titanic 数据集</a>，原因有二:</p><ul class=""><li id="a1d6" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld mb mc md me bi translated">这很简单，很容易理解</li><li id="dc36" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">它包含了足够的缺失值供我们使用</li></ul><p id="7955" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦您下载了数据集，您就可以使用<em class="lv"> SQL Developer Web </em>的<em class="lv">上传数据</em>功能来创建表并上传数据:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mk"><img src="../Images/4744c5e204007e447841c624704a3bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8P5VHC48lsoZmIxy-dA2CQ.png"/></div></div></figure><p id="0002" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用您的最佳判断更改数据类型，您已经准备好了！</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="41f9" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">准备和探索</h1><p id="9c99" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">我不想把源表搞乱，这个表叫做<code class="fe np nq nr ns b">titanic</code>，所以我们复制一个:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="a203" class="nx mt it ns b gy ny nz l oa ob">CREATE TABLE cp_titanic AS <br/>SELECT * FROM titanic;</span></pre><p id="9ad7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们快速选择一下，确认一切正常:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="6296" class="nx mt it ns b gy ny nz l oa ob">SELECT * FROM cp_titanic;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oc"><img src="../Images/4dcf6c09e520830834057ad421462dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGzidnzLtrc2FHbAxdeiAg.png"/></div></div></figure><p id="4cc1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">厉害！如果您对这个数据集做过任何工作，您就会知道<code class="fe np nq nr ns b">Age</code>列是最容易出现缺失值的列。让我们检查一下有多少:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="9028" class="nx mt it ns b gy ny nz l oa ob">SELECT COUNT(*) AS num_age_missing <br/>FROM cp_titanic <br/>WHERE age IS NULL;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8b108c56707fc63b45483bc25292a7fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*8Oy045Ed5Yb64Ql_TXixig.png"/></div></figure><p id="79b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们考虑到数据集少于 1000 行，这就很多了。因此，我们需要找出如何填充这些缺失的值，并以一种简单和自动化的方式来完成。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="87eb" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">插补时间</h1><p id="9a0d" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">为了处理缺失数据插补，我们将创建一个<code class="fe np nq nr ns b">PL/SQL</code>程序。如果你不知道那是什么，不要担心，因为跟随它会非常简单。在我们用代码做任何事情之前，让我们列出这个过程应该做的事情:</p><ol class=""><li id="3871" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld oe mc md me bi translated">获得一个用于插补的值(平均值/中值/众数将在这个简单的例子中起作用)</li><li id="a697" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld oe mc md me bi translated">对表进行更新-用计算值替换空值</li></ol><p id="6db2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太好了！这应该不难做到。我们还将接受用户的一些输入，更准确地说是 3 个参数:</p><ul class=""><li id="c631" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld mb mc md me bi translated"><em class="lv">表名</em> —缺失数据所在的表的文本表示</li><li id="4234" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated"><em class="lv">属性</em> —包含缺失值的列</li><li id="82ac" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated"><em class="lv">估算方法</em>——估算的一种方式——均值、中值或众数</li></ul><p id="b140" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是我们要开始学习的全部内容。让我们用目前已知的信息创建一个过程:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="bba8" class="nx mt it ns b gy ny nz l oa ob">CREATE OR REPLACE PROCEDURE impute_missing(<br/>    in_table_name    IN VARCHAR2,<br/>    in_attribute     IN VARCHAR2,<br/>    in_impute_method IN VARCHAR2 DEFAULT ‘mean’<br/>) IS<br/>BEGIN<br/>END;<br/>/</span></pre><p id="65d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">厉害！在关键字<code class="fe np nq nr ns b">IS</code>下面，我们将声明一些其他变量——用于保存将要使用的估算函数、获取平均值的语句、平均值本身以及更新语句。我们的过程现在看起来如下:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="f6b8" class="nx mt it ns b gy ny nz l oa ob">CREATE OR REPLACE PROCEDURE impute_missing(<br/>    in_table_name    IN VARCHAR2,<br/>    in_attribute     IN VARCHAR2,<br/>    in_impute_method IN VARCHAR2 DEFAULT ‘mean’<br/>) IS<br/>    impute_func   VARCHAR2(16);<br/>    get_avg_stmt  VARCHAR2(128);<br/>    avg_value     NUMBER;<br/>    update_stmt   VARCHAR2(128);<br/>BEGIN<br/>END;<br/>/</span></pre><p id="1f84" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">剩余的代码将位于关键字<code class="fe np nq nr ns b">BEGIN</code>和<code class="fe np nq nr ns b">END</code>之间。</p><h2 id="ddfe" class="nx mt it bd mu of og dn my oh oi dp nc kr oj ok ne kv ol om ng kz on oo ni op bi translated">估算方法</h2><p id="762e" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">如前所述，我们的程序可以通过使用均值、中值或众数统计函数来处理缺失值插补。同样，这些是用户可以为<code class="fe np nq nr ns b">in_impute_method</code>参数提供的值。</p><p id="741b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">唯一的问题是——这些统计函数在 SQL 中的调用有点不同。我们可以使用<code class="fe np nq nr ns b">CASE</code>操作符来处理这个问题，并将结果存储到<code class="fe np nq nr ns b">impute_func</code>变量中。代码如下:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="e64a" class="nx mt it ns b gy ny nz l oa ob">CASE in_impute_method<br/>    WHEN ‘mean’   THEN impute_func := ‘AVG’;<br/>    WHEN ‘median’ THEN impute_func := ‘MEDIAN’;<br/>    WHEN ‘mode’   THEN impute_func := ‘STATS_MODE’;<br/>    ELSE RAISE_APPLICATION_ERROR(-20001, ‘Invalid impute method!’);<br/>END CASE;</span></pre><p id="927f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那并不难，是吗？</p><p id="7b5b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们差不多完成了一半，接下来的部分也很简单。</p><h2 id="6a77" class="nx mt it bd mu of og dn my oh oi dp nc kr oj ok ne kv ol om ng kz on oo ni op bi translated">获取平均值</h2><p id="3c64" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">为了得到平均值，我们将不得不使用一个叫做<em class="lv">动态 SQL </em>的东西。这意味着我们不会硬编码 SQL 语句，而是根据提供的用户输入来创建语句。</p><p id="b392" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看如何创建一个动态查询来获取平均值，关于用户输入的参数(表名、属性和估算方法):</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="6077" class="nx mt it ns b gy ny nz l oa ob">get_avg_stmt <strong class="ns iu">:=<br/>     </strong>q’[SELECT ]’<br/>  <strong class="ns iu">||</strong> impute_func<br/>  <strong class="ns iu">||</strong> q’[(]’<br/>  <strong class="ns iu">||</strong> in_attribute<br/>  <strong class="ns iu">||</strong> q’[) FROM ]’<br/>  <strong class="ns iu">||</strong> in_table_name;</span><span id="9035" class="nx mt it ns b gy oq nz l oa ob">DBMS_OUTPUT.PUT_LINE(‘get_avg_stmt = ‘ <strong class="ns iu">||</strong> get_avg_stmt);</span></pre><p id="691a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它可能看起来和感觉起来有点奇怪，直到你习惯了这一点，但你以后会看到这一切归结为什么。这个<code class="fe np nq nr ns b">DBMS_OUTPUT</code>行不是必需的，但是一旦我们运行这个过程，它会将<code class="fe np nq nr ns b">get_avg_stmt</code>输出到控制台。</p><p id="f422" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是这还不够，因为我们仍然需要执行这条语句并将其结果存储在<code class="fe np nq nr ns b">avg_value</code>变量中。这很容易做到:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="92a4" class="nx mt it ns b gy ny nz l oa ob">BEGIN<br/>    EXECUTE IMMEDIATE get_avg_stmt INTO avg_value;<br/>END;</span><span id="42d7" class="nx mt it ns b gy oq nz l oa ob">DBMS_OUTPUT.PUT_LINE(‘avg_value = ‘ || avg_value);</span></pre><p id="23f4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一部分已经完成，现在我们应该以某种方式对表进行更新，以实际填充缺失的值。让我们看看怎么做。</p><h2 id="80aa" class="nx mt it bd mu of og dn my oh oi dp nc kr oj ok ne kv ol om ng kz on oo ni op bi translated">归罪</h2><p id="7838" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">如果你已经理解了前一部分，你就会理解这一部分。同样，我们需要动态创建一个 SQL 语句并执行它。唯一的区别是这次结果不会存储在变量中，因为这对一个<code class="fe np nq nr ns b">UPDATE</code>语句没有意义。相反，该表被就地修改:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="ac55" class="nx mt it ns b gy ny nz l oa ob">update_stmt :=<br/>     q’[UPDATE ]’<br/>  || in_table_name<br/>  || q’[ SET ]’<br/>  || in_attribute<br/>  || q’[ = ]’<br/>  || avg_value<br/>  || q’[ WHERE ]’<br/>  || in_attribute<br/>  || q’[ IS NULL]’;</span><span id="5889" class="nx mt it ns b gy oq nz l oa ob">DBMS_OUTPUT.PUT_LINE(‘update_stmt = ‘ || update_stmt);</span><span id="11ed" class="nx mt it ns b gy oq nz l oa ob">BEGIN <br/>    EXECUTE IMMEDIATE update_stmt;<br/>END;</span><span id="4969" class="nx mt it ns b gy oq nz l oa ob">COMMIT;</span></pre><p id="5bd3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里唯一的新东西是<code class="fe np nq nr ns b">COMMIT</code>关键字。它用于结束当前事务并使所有更改永久化。如果你不确定哪些语句必须提交，<a class="ae lu" href="https://stackoverflow.com/questions/9541013/oracle-what-statements-need-to-be-committed" rel="noopener ugc nofollow" target="_blank">这里有一个解释</a>。不客气</p><p id="cdd8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基本上就是这样，我们已经做了我们该做的一切。</p><h2 id="8086" class="nx mt it bd mu of og dn my oh oi dp nc kr oj ok ne kv ol om ng kz on oo ni op bi translated">概述</h2><p id="6f70" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">以下是整个过程，以防你遗漏了什么:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="206c" class="nx mt it ns b gy ny nz l oa ob">CREATE OR REPLACE PROCEDURE impute_missing(<br/>    in_table_name    IN VARCHAR2,<br/>    in_attribute     IN VARCHAR2,<br/>    in_impute_method IN VARCHAR2 DEFAULT ‘mean’<br/>) IS<br/>    impute_func   VARCHAR2(16);<br/>    get_avg_stmt  VARCHAR2(128);<br/>    avg_value     NUMBER;<br/>    update_stmt   VARCHAR2(128);<br/>BEGIN<br/>    CASE in_impute_method<br/>        WHEN ‘mean’   THEN impute_func := ‘AVG’;<br/>        WHEN ‘median’ THEN impute_func := ‘MEDIAN’;<br/>        WHEN ‘mode’   THEN impute_func := ‘STATS_MODE’;<br/>        ELSE RAISE_APPLICATION_ERROR(-20001, ‘Invalid impute method!’);<br/>    END CASE;</span><span id="b004" class="nx mt it ns b gy oq nz l oa ob">    get_avg_stmt <strong class="ns iu">:=<br/>         </strong>q’[SELECT ]’<br/>      <strong class="ns iu">||</strong> impute_func<br/>      <strong class="ns iu">||</strong> q’[(]’<br/>      <strong class="ns iu">||</strong> in_attribute<br/>      <strong class="ns iu">||</strong> q’[) FROM ]’<br/>      <strong class="ns iu">||</strong> in_table_name;<br/>    DBMS_OUTPUT.PUT_LINE(‘get_avg_stmt = ‘ <strong class="ns iu">||</strong> get_avg_stmt);</span><span id="fa47" class="nx mt it ns b gy oq nz l oa ob">    BEGIN EXECUTE IMMEDIATE get_avg_stmt INTO avg_value;<br/>    END;<br/>    DBMS_OUTPUT.PUT_LINE(‘avg_value = ‘ || avg_value);</span><span id="2740" class="nx mt it ns b gy oq nz l oa ob">    update_stmt :=<br/>         q’[UPDATE ]’<br/>      || in_table_name<br/>      || q’[ SET ]’<br/>      || in_attribute<br/>      || q’[ = ]’<br/>      || avg_value<br/>      || q’[ WHERE ]’<br/>      || in_attribute<br/>      || q’[ IS NULL]’;<br/>    DBMS_OUTPUT.PUT_LINE(‘update_stmt = ‘ || update_stmt);</span><span id="cbde" class="nx mt it ns b gy oq nz l oa ob">    BEGIN EXECUTE IMMEDIATE update_stmt;<br/>    END;<br/>    COMMIT;</span><span id="031f" class="nx mt it ns b gy oq nz l oa ob">END;<br/>/</span></pre><p id="1c4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们来测试一下！</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="9d31" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">测试</h1><p id="8fb6" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">我们已经完成了所有的艰苦工作，现在我们可以测试是否一切都像宣传的那样工作。为此，我们将使用<code class="fe np nq nr ns b">age</code>列的中值来估算其缺失值。方法如下:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="1f60" class="nx mt it ns b gy ny nz l oa ob">BEGIN<br/>    impute_missing(‘cp_titanic’, ‘age’, ‘median’);<br/>END;<br/>/</span></pre><p id="8c7f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！如果我们执行这段代码，我们将得到一些控制台输出，这是由于过程中的所有<code class="fe np nq nr ns b">DBMS_OUTPUT</code>调用:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi or"><img src="../Images/58111ad8c1472fe6da60c1d955b5e7e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AWktl7Yv6orwrlb0DsBC2A.png"/></div></div></figure><p id="a18e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">厉害！如果我们再次检查缺失值的数量，我们可以看到一切都按预期进行了:</p><pre class="lf lg lh li gt nt ns nu nv aw nw bi"><span id="6681" class="nx mt it ns b gy ny nz l oa ob">SELECT COUNT(*) AS num_age_missing <br/>FROM cp_titanic <br/>WHERE age IS NULL;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi os"><img src="../Images/85d6337ebd9450827075792c89690f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*vFjl-4JfpZx5vYK6QFr70A.png"/></div></figure></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="e58a" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">有哪些可以改进的地方？</h1><p id="128e" class="pw-post-body-paragraph ki kj it kk b kl nk ju kn ko nl jx kq kr nm kt ku kv nn kx ky kz no lb lc ld im bi translated">我们的程序完成了工作，但这并不意味着它不能进一步改进。这里有几个想法:</p><ul class=""><li id="39c4" class="lw lx it kk b kl km ko kp kr ly kv lz kz ma ld mb mc md me bi translated">舍入结果——在几乎任何情况下调用<code class="fe np nq nr ns b">AVG</code>都会产生大量的小数点</li><li id="c667" class="lw lx it kk b kl mf ko mg kr mh kv mi kz mj ld mb mc md me bi translated">用户可以选择输入插补值，而不是使用平均值/中值/众数</li></ul><p id="5870" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这不是一个明确的列表，所以你可以根据自己的需要随意修改程序。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="23c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lv">喜欢这篇文章吗？成为</em> <a class="ae lu" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lv">中等会员</em> </a> <em class="lv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="ot ou gp gr ov ow"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">medium.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk lo ow"/></div></div></a></div></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><p id="69bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://mailchi.mp/46a3d2989d9b/bdssubscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">加入我的私人邮件列表，获取更多有用的见解。</strong> </a></p></div></div>    
</body>
</html>