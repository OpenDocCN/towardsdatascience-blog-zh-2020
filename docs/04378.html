<html>
<head>
<title>Accessing Census Data with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python访问人口普查数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/accessing-census-data-with-python-3e2f2b56e20d?source=collection_archive---------16-----------------------#2020-04-20">https://towardsdatascience.com/accessing-census-data-with-python-3e2f2b56e20d?source=collection_archive---------16-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f4cd" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">公共数据项目</h2><div class=""/><p id="f1c3" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">随着2020年人口普查的进行和即将到来的选区重新划分，访问和理解公共人口普查数据比以往任何时候都更加重要。这篇文章将指导你使用一个名为<a class="ae kx" href="https://pypi.org/project/CensusData/" rel="noopener ugc nofollow" target="_blank"> <em class="ky"> CensusData </em> </a>的Python包将数据导入Pandas</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/21e09a5591a73ead97bfd0ad51a32701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3P46gnXAar6ZNxEW.jpg"/></div></div></figure><h1 id="7236" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">普查数据集</h1><p id="69d2" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated">通过<em class="ky"> CensusData </em>有5个数据集可用，包括经典的十年一次的人口普查以及4个不同的美国社区调查(ACS)估计。</p><h2 id="558d" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">什么是美国社区调查？</h2><p id="e85d" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated">ACS始于2005年，取代了过去每十年与传统人口普查一起发送给家庭子集的长表格人口普查。相反，ACS是在滚动的基础上进行的，每月发送给大约350万个家庭。这个子集然后被用来创建整个人口的估计。ACS上的问题也更加深入，包括教育、就业和互联网接入等主题。</p><h2 id="3330" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">五个数据集</h2><ul class=""><li id="8599" class="mz na it kb b kc mj kg mk kk nb ko nc ks nd kw ne nf ng nh bi translated"><em class="ky"> ACS 1年评估(2012–2018)</em>针对人口超过65，000的地区，更新最频繁，但“分辨率”最低，因为它不包括人口较少的地区，且样本量最小</li><li id="9458" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><em class="ky"> ACS 1年补充评估(2014–2017)</em>补充数据集，重点关注20，000+人口较少的地区</li><li id="8500" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><em class="ky"> ACS 3年估计值(2010-2012年至2011-2013年)</em>针对人口超过20，000的地区，非常接近1至5年的中间值。目前由人口普查局打折，但旧版本仍然可以访问。</li><li id="85f7" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><em class="ky"> ACS五年估计值(2005–2009年至2014–2018年)</em>所有区域的数据，最高分辨率和最大样本量，但最少当前数据</li><li id="2b62" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><em class="ky">2010年人口普查摘要文件1 </em>统计美国的每一个居民，每10年更新一次。</li></ul><h2 id="3b5a" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">笔记</h2><ul class=""><li id="fbf3" class="mz na it kb b kc mj kg mk kk nb ko nc ks nd kw ne nf ng nh bi translated">跨越多年的估计数是总量</li><li id="bf38" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated">永远不要比较重叠范围的估计值，例如，比较ACS 2010–2012年到2011–2013年的3年</li></ul><h1 id="c5ba" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">设置和搜索表格</h1><p id="b1ac" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated">通过您的终端使用pip可以轻松完成安装。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="5b08" class="mo lm it no b gy ns nt l nu nv">pip install censusdata</span></pre><p id="c372" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">现在你可以在人口普查网站上查找你感兴趣的表格，例如这里的<a class="ae kx" href="https://www.census.gov/programs-surveys/acs/technical-documentation/summary-file-documentation.html" rel="noopener ugc nofollow" target="_blank">是ACS的</a>。或者您可以使用<em class="ky"> CensusData </em>的搜索方法</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="2c30" class="mo lm it no b gy ns nt l nu nv">import pandas as pd<br/>import censusdata</span><span id="c905" class="mo lm it no b gy nw nt l nu nv">sample = censusdata.search('acs5', 2015,'concept', 'transportation')</span></pre><p id="946a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">以下是来自文档的搜索参数的详细信息:</p><ul class=""><li id="ee39" class="mz na it kb b kc kd kg kh kk nx ko ny ks nz kw ne nf ng nh bi translated"><strong class="kb jd"> src </strong> ( <em class="ky"> str </em> ) —人口普查数据来源:acs1年估计数为“ACS 1”，acs5年估计数为“ACS 5”，acs3年估计数为“ACS 3”，ACS 1年补充估计数为“acsse”，sf1数据为“SF1”。</li><li id="e796" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><strong class="kb jd">年</strong> ( <em class="ky"> int </em> ) —数据的年份。</li><li id="b1ea" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><strong class="kb jd">字段</strong> ( <em class="ky">字符串</em> ) —要搜索的字段。</li><li id="5b07" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><strong class="kb jd">标准</strong> ( <em class="ky">字符串</em> ) —搜索标准。</li><li id="3c29" class="mz na it kb b kc ni kg nj kk nk ko nl ks nm kw ne nf ng nh bi translated"><strong class="kb jd"> tabletype </strong> ( <em class="ky"> str，可选</em> ) —从中提取变量的表格类型(仅适用于ACS数据)。选项包括“详细信息”(详细信息表)、“主题”(主题表)、“配置文件”(数据配置文件表)、“c配置文件”(比较配置文件表)。</li></ul><p id="5435" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">因此，在上面的搜索查询中，我们正在寻找从2015年开始的5年ACS估计值，其中包含“运输”这一概念。现在，这个搜索将返回一个包含变量名、概念和符合搜索标准的标签的三元组列表。这个列表可能相当大。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="666f" class="mo lm it no b gy ns nt l nu nv">print(len(sample))</span><span id="40d6" class="mo lm it no b gy nw nt l nu nv">&gt;&gt;&gt;3630</span></pre><p id="9268" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">让我们详细检查两个第一元组，以理解它们告诉我们什么。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="fedf" class="mo lm it no b gy ns nt l nu nv">print(sample[0])</span><span id="420b" class="mo lm it no b gy nw nt l nu nv">&gt;&gt;&gt;('B08006_001E', 'B08006.  Sex of Workers by Means of Transportation to Work', 'Total:')</span><span id="c511" class="mo lm it no b gy nw nt l nu nv">print(sample[2])</span><span id="8d2e" class="mo lm it no b gy nw nt l nu nv">&gt;&gt;&gt;('B08006_002E', 'B08006.  Sex of Workers by Means of Transportation to Work', 'Car, truck, or van:')</span></pre><p id="8883" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">第一个元素是<em class="ky">变量名</em>，包含两个元素，父表和子表名称。两个条目共享同一个父表‘b 08006’，它对应于第二个元素<em class="ky">概念</em>，‘b 08006。上班交通工具上的工人性别。最后一个元素是对应于它们的子表的标签。</p><h2 id="cd9e" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">打印表格和查找地理位置</h2><p id="276f" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated">一旦知道了感兴趣的父表，就可以使用print table命令清楚地读出所有子表。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="6fc5" class="mo lm it no b gy ns nt l nu nv">censusdata.printtable(censusdata.censustable('acs5', 2015, 'B23025'))</span></pre><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi oa"><img src="../Images/3769eb88cf65f2385ffbfb27248a8746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xt5zPsVjN8sM7sFUAmF-Sw.png"/></div></div><p class="ob oc gj gh gi od oe bd b be z dk translated">包含在图像中，因为它不适合介质格式</p></figure><p id="ed1b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">为了下载一些人口普查数据，您需要的最后一部分是您感兴趣的地区的地理代码。我们可以使用地理方法来探索这些信息。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="91c9" class="mo lm it no b gy ns nt l nu nv">states = censusdata.geographies(censusdata.censusgeo([('state', '*')]), 'acs5', 2015)</span></pre><p id="c54e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">该查询将返回一个dictionary对象，其中每个键都是一个州的名称。下面是前两个元素的示例。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="7765" class="mo lm it no b gy ns nt l nu nv">{'Alabama': censusgeo((('state', '01'),)), <br/>'Alaska': censusgeo((('state', '02'),))}</span></pre><p id="e823" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">因此，为了找到纽约的代码，我们需要打印相应的值。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="b64f" class="mo lm it no b gy ns nt l nu nv">print(states['New York']<br/>&gt;&gt;&gt;Summary level: 040, state:36</span></pre><p id="f876" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们感兴趣的是第二个值36，它可以用来获取该州的所有县代码。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="ec0c" class="mo lm it no b gy ns nt l nu nv">counties = censusdata.geographies(censusdata.censusgeo([('state', '36'), ('county', '*')]), 'acs5', 2015)</span><span id="6e66" class="mo lm it no b gy nw nt l nu nv">print(counties)<br/>&gt;&gt;&gt;Summary level: 040, state:36<br/>{'Queens County, New York': <br/>        censusgeo((('state', '36'), ('county', '081'))), <br/>'Rensselaer County, New York': <br/>        censusgeo((('state', '36'), ('county', '083'))),<br/>'Richmond County, New York': <br/>        censusgeo((('state', '36'), ('county', '085'))),<br/>...}</span></pre><h2 id="c461" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">下载数据</h2><p id="3615" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated">现在我们已经拥有了下载第一组人口普查数据所需的一切！</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="b3ce" class="mo lm it no b gy ns nt l nu nv">data = censusdata.download('acs5', 2015,<br/>           censusdata.censusgeo([('state', '36'),<br/>                                 ('county', '081'),<br/>                                 ('block group', '*')]),<br/>          ['B23025_001E', 'B23025_002E', 'B23025_003E',<br/>           'B23025_004E', 'B23025_005E',<br/>           'B23025_006E', 'B23025_007E'])</span></pre><p id="6d3e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">该查询将把请求的数据存储为Pandas数据帧，可以使用标准的Pandas方法访问该数据帧。</p><pre class="la lb lc ld gt nn no np nq aw nr bi"><span id="3187" class="mo lm it no b gy ns nt l nu nv">print(data.head)</span></pre><p id="c426" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">恭喜你！你已经正式访问了公开的美国人口普查数据。</p><h2 id="869c" class="mo lm it bd ln mp mq dn lr mr ms dp lv kk mt mu lz ko mv mw md ks mx my mh iz bi translated">参考资料:</h2><p id="d2dd" class="pw-post-body-paragraph jz ka it kb b kc mj ke kf kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw im bi translated"><a class="ae kx" href="https://jtleider.github.io/censusdata/" rel="noopener ugc nofollow" target="_blank">https://jtleider.github.io/censusdata/</a></p><p id="48a0" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><a class="ae kx" href="https://www.census.gov/en.html" rel="noopener ugc nofollow" target="_blank">https://www.census.gov/en.html</a></p></div></div>    
</body>
</html>