<html>
<head>
<title>Panel data regression: a powerful time series modeling technique</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面板数据回归:一种强有力的时间序列建模技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/panel-data-regression-a-powerful-time-series-modeling-technique-7509ce043fa8?source=collection_archive---------2-----------------------#2020-02-26">https://towardsdatascience.com/panel-data-regression-a-powerful-time-series-modeling-technique-7509ce043fa8?source=collection_archive---------2-----------------------#2020-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eafa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在数据科学和机器学习问题中应用计量经济学</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2243735010a5e1bdf9de5c889f271598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fyDZwjbVGqJR-gfP"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">弗兰基·查马基在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="e022" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" rel="noopener" target="_blank" href="/econometrics-101-for-data-scientists-584f4f879c4f">之前的一篇文章</a>中，我简要提到了面板数据模型；在这篇文章中，我将通过一些技术细节对此进行更深入的探讨。正如我在那篇文章中所说的，<strong class="lb iu">计量经济学拥有数据科学家工具箱中一些最重要的工具</strong>。它有许多用例——从测量<a class="ae ky" href="https://www.tandfonline.com/doi/abs/10.1080/17565529.2014.989189?journalCode=tcld20" rel="noopener ugc nofollow" target="_blank">温度变化对农业的影响</a>到时间序列数据建模和<a class="ae ky" href="https://www.sciencedirect.com/science/article/abs/pii/S0304407618302112" rel="noopener ugc nofollow" target="_blank">预测</a>。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6471" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么是面板数据？</h1><p id="7321" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">那么到底什么是面板数据呢？首先，让我们来看看下面的定义:</p><blockquote class="mz na nb"><p id="ab74" class="kz la nc lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated"><strong class="lb iu">面板数据</strong>是随时间重复测量的观察的多维数据。</p></blockquote><p id="d8b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个单行的定义，但是有很多内容需要解释。该定义隐含地描述了面板数据集的三个关键属性:</p><ul class=""><li id="2fba" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">特性 1:重复观察相同的对象/个人</li><li id="8118" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">特性 2:对那些相同的个人/对象测量多个变量</li><li id="e08b" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">特性 3:观察发生在多个时间点</li></ul><p id="d7c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了说明这些属性，下面是一个假设的(我在运行中创建的)数据集，有 4 列 4 行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/bb2b5fb44af1950c0db6dbc24c55a9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*HNXnhZyZCEaa_xQtUhMDiw.png"/></div></figure><ul class=""><li id="3306" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated">数据集包含两个(假想的)美国县的 4 个观测值-克劳县和布尔县(属性 1)。</li><li id="9fbf" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">对于每个县，测量了 2 个变量—安装的速度摄像头的数量和交通违规的数量(属性 2)。</li><li id="de22" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated">最后，测量发生在 2 个不同的离散时间点——2018 年和 2019 年(属性 3)。</li></ul><p id="5b7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多酷啊！</p><h1 id="c35d" class="mc md it bd me mf nv mh mi mj nw ml mm jz nx ka mo kc ny kd mq kf nz kg ms mt bi translated">面板数据回归技术</h1><p id="e561" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我现在将继续描述面板数据建模技术如何回答特定的问题。假设使用上述 4 x 4 数据集，我们想要回答以下问题:</p><blockquote class="mz na nb"><p id="cde6" class="kz la nc lb b lc ld ju le lf lg jx lh nd lj lk ll ne ln lo lp nf lr ls lt lu im bi translated"><strong class="lb iu">安装的测速摄像头数量对交通违章案件数量有影响吗？</strong></p></blockquote><p id="4560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们运行简单的线性 OLS 回归，我们应该能够快速检查两个变量之间的关联(如果有的话):</p><p id="c600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nc">traffic _ violation = f(speed _ camera)</em></p><p id="c0d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，请记住，这不是普通的数据集，这是一个面板数据。这意味着我们可以比运行简单的 OLS 回归更有效地使用它。</p><p id="5c6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">怎么会？</p><p id="44fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们不应该忘记自变量还有另外两个属性——county 和 year。这意味着个体和时间维度存在差异，我们可以在更高级的模型中捕捉到这种差异，我们称之为<strong class="lb iu"> <em class="nc">面板数据回归</em> </strong>。</p><p id="da3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">面板数据模型(即估计量)有三种主要类型，下面简要介绍它们的公式。</p><p id="349e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> a)汇集 OLS 模型</strong></p><p id="cbc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">混合 OLS(普通最小二乘)模型将数据集视为任何其他横截面数据，并忽略数据具有时间和个体维度。这就是假设与普通线性回归相似的原因。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/dbaeceeb60741abecab6f7fcf3e16ded.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*HXr14gE6R6VZgx-w-wa5dw.png"/></div></figure><p id="a69f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> b)固定效果模型</strong></p><p id="2d8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然安装速度摄像头可能会对交通违规产生影响，但由于速度摄像头以外的原因(例如，高速公路巡逻率较高),每个县的交通违规情况也可能有所不同。).然而，这并没有反映在上述 OLS 模型中。固定效应模型更进了一步，它考虑了个体实体(在我们的例子中是县)之间的差异:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/29f7f6a21d55904b8986652132b9c8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*n8_NodBaJOBqso0Oo_AynQ.png"/></div></figure><p id="082a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> c)随机效应模型</strong></p><p id="2b4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在固定效应模型中，我们控制了各个县之间的差异。但是那些在个体中不变但随时间变化的变量呢？随机效应模型考虑了这些个体变化<em class="nc">以及</em>时间相关变化。该模型消除了变量的偏差，这些偏差是无法观察到的，并且会随着时间的推移而变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/992434c30686607aa23798f88e027628.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*gp_MFrOKHr9g2sGR7fdh5A.png"/></div></figure><h1 id="496c" class="mc md it bd me mf nv mh mi mj nw ml mm jz nx ka mo kc ny kd mq kf nz kg ms mt bi translated">履行</h1><p id="284a" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">真的只是几行代码(假设你已经完成了数据角力的另外 80%的工作！).是镇上最好的 R 库，只需三个简单的步骤就能实现你的模型:(1)输入数据；(2)将数据转换成面板数据帧；(3)实现您指定的模型。</p><pre class="kj kk kl km gt oh og oi oj aw ok bi"><span id="f8ce" class="ol md it og b gy om on l oo op"># import package<br/>library(plm)<br/># import data <br/>df =   read.table("../data.csv")<br/># convert the data frame to a data format recognizable by `plm` <br/>pdf = pdata.frame(df, index = c("county", "year"))<br/># specify and run the model<br/>model = plm(traffic_violation~speed_camera, data = pdf, model = "random")</span><span id="db97" class="ol md it og b gy oq on l oo op">summary(model)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/85504e0559774b0aa1d930a35d1ed1ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*Z8PkRTS6MKZwJWKD-jkJqw.png"/></div></figure><h2 id="a148" class="ol md it bd me os ot dn mi ou ov dp mm li ow ox mo lm oy oz mq lq pa pb ms pc bi translated">最终注释</h2><p id="ccfa" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">数据科学是一个不断发展的学科，来自许多学科的各种工具和技术丰富了它。计量经济学提供了传统上用于社会和经济研究的工具，但也增加了数据科学的价值。对于那些感兴趣的人来说，两本开放存取的书可以让你开始计量经济学和高级社会科学研究:</p><ul class=""><li id="56a6" class="ng nh it lb b lc ld lf lg li ni lm nj lq nk lu nl nm nn no bi translated"><a class="ae ky" href="https://www.econometrics-with-r.org/" rel="noopener ugc nofollow" target="_blank">计量经济学导论与 R </a>与</li><li id="ee04" class="ng nh it lb b lc np lf nq li nr lm ns lq nt lu nl nm nn no bi translated"><a class="ae ky" href="https://bookdown.org/ccolonescu/RPoE4/" rel="noopener ugc nofollow" target="_blank">带 R 的计量经济学原理</a>。</li></ul><p id="27d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两本书以通俗易懂的方式描述了复杂的技术，以及 R 编程语言的应用和实现。</p></div></div>    
</body>
</html>