<html>
<head>
<title>Data Analysis in python: Getting started with pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python 中的数据分析:熊猫入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-analysis-in-python-getting-started-with-pandas-8cbcc1500c83?source=collection_archive---------23-----------------------#2020-06-24">https://towardsdatascience.com/data-analysis-in-python-getting-started-with-pandas-8cbcc1500c83?source=collection_archive---------23-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7d8f652bb21dee98c8569e3ba8544fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3gHKHFxu3d7x6Wts-bGnjQ.png"/></div></div></figure><p id="670d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Pandas 是一个广泛用于数据分析和操作的 python 工具。最近，我一直在使用具有大数据帧(&gt; 50 米行)的 pandas，并通过<a class="ae kw" href="https://www.youtube.com/watch?v=C1hqHk1SfrA" rel="noopener ugc nofollow" target="_blank"> PyDataUK May Talks </a>和 exploring <a class="ae kw" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>线程发现了几个对优化我的分析非常有用的技巧。</p><p id="ee63" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本教程是一个系列的第一部分，旨在介绍熊猫和它在探索<a class="ae kw" href="https://allisonhorst.github.io/palmerpenguins/index.html" rel="noopener ugc nofollow" target="_blank">帕尔默企鹅数据集</a>时提供的一些有用的功能。</p><p id="1d65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将介绍:</p><ul class=""><li id="81e9" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">如何安装和导入熊猫</li><li id="19b8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">熊猫中的数据结构</li><li id="fa25" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">如何输入和输出数据</li><li id="864d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">检查数据</li><li id="5f10" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">数据清理入门</li></ul><h1 id="f0a2" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">介绍帕尔默企鹅</h1><p id="4905" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">虹膜数据集是数据科学中常用于可视化和模式识别的数据集。自从最近发现作者与优生学的联系后，一直在努力寻找其他数据集供使用。<br/>这就是企鹅的用武之地，<a class="ae kw" href="https://allisonhorst.github.io/palmerpenguins/index.html" rel="noopener ugc nofollow" target="_blank">帕尔默企鹅数据集</a>已经由<a class="ae kw" href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php" rel="noopener ugc nofollow" target="_blank">克里斯汀·戈尔曼</a>博士和<a class="ae kw" href="https://www.allisonhorst.com/" rel="noopener ugc nofollow" target="_blank">艾利森·霍斯特</a>根据 CC-0 许可收集并发布，作为可供探索的备选数据集！</p><p id="caad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它已经发布了供 R 使用的示例，但是我们将使用 python 包 pandas 来探索可以在<a class="ae kw" href="https://github.com/allisonhorst/palmerpenguins/tree/1a19e36ba583887a4630b1f821e3a53d5a4ffb76/data-raw" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到的原始数据集(注意原始 CSV 文件不再包含在主分支中，因为它是我第一次开始查看数据集时包含的，所以我在这里引用存储库中的一个旧提交。如果该文件被重新添加到主分支中，我将更新它)。</p><p id="cd19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些数据包含了对南极洲帕尔默群岛岛屿上三种不同企鹅物种的观察，我们可以使用这些数据来比较不同物种或岛屿之间的体重、鳍状肢长度或长度。</p><h2 id="978d" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">我们开始吧！</h2><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/ab73693b37cdb30493b10c814d498777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KU-V8tWWQU3nDtw12-bQ_g.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated"><a class="ae kw" href="https://github.com/allisonhorst/palmerpenguins/blob/master/vignettes/articles/img/lter_penguins.png" rel="noopener ugc nofollow" target="_blank">作品</a>作者<a class="ae kw" href="https://twitter.com/allison_horst" rel="noopener ugc nofollow" target="_blank"> @allison_horst </a></p></figure><h1 id="93d8" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">1.安装和导入熊猫</h1><p id="f1e3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Pandas 可以使用 python 包管理器<code class="fe nj nk nl nm b">pip</code> : <code class="fe nj nk nl nm b">pip install pandas</code>从<a class="ae kw" href="https://pypi.org/project/pandas/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>安装</p><p id="82d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者将<code class="fe nj nk nl nm b">conda</code>与<code class="fe nj nk nl nm b">conda install pandas</code>配合使用</p><p id="cec0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装完成后，我们可以导入熊猫，并为其分配一个别名<code class="fe nj nk nl nm b">pd</code>,别名为:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="3f1f" class="mo lm iq nm b gy nr ns l nt nu">import pandas as pd</span></pre><h1 id="b44d" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">2.数据结构</h1><p id="ee11" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">pandas 中有两种数据结构，Series 和 DataFrames。我最常用的结构是 DataFrame，这是一种带有标签的 2D 表格结构，类似于电子表格或 SQL 表。</p><p id="2a08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一种结构是一个序列，它是一个 1D 标记的数组，可以保存任何数据类型。每一行都标有索引。</p><p id="9eaa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">数据帧可以用许多不同的方式构建，包括作为系列的字典，其中每个系列是数据帧中的一列。</p><p id="94c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文将关注数据帧，我们将使用 CSV 作为数据帧的输入。</p><p id="0df0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要进一步探索数据结构，请查看熊猫文档。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nv"><img src="../Images/aec5a27d580783ac890aaa13c9e6e095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2rTTJJ0IhXuDB-GwVz2HxA.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">熊猫系列和数据框示例</p></figure><h1 id="b6b4" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">3.输入输出数据</h1><h2 id="e3ec" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">投入</h2><p id="83d5" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">数据框可以通过多种方式创建:</p><p id="baa8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">a)创建一个空的数据帧:<code class="fe nj nk nl nm b">df = pd.DataFrame()</code></p><p id="a272" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">b)输入数据:<code class="fe nj nk nl nm b">df = pd.DataFrame(data = data)</code>，其中输入数据<code class="fe nj nk nl nm b">data</code>可以是多种不同的格式，这使得构建数据框架变得灵活和方便，因为您处理的数据可以是任意数量的结构，包括序列字典，如上图所示，并且可以用以下代码构建:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="1740" class="mo lm iq nm b gy nr ns l nt nu">d = {'student1': pd.Series([85., 72.], index=['maths', 'science']),<br/>   'student2': pd.Series([62., 70., 55.], index=['maths', 'science', 'english']),<br/>   'student3': pd.Series([45., 48., 70.], index=['maths', 'science', 'english'])}<br/>df = pd.DataFrame(d)<br/>print(df.head())</span></pre><p id="f04b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">c)来自文件或数据源的输入，我们将在此重点关注 Palmer Penguin 数据的<a class="ae kw" href="https://raw.githubusercontent.com/allisonhorst/palmerpenguins/1a19e36ba583887a4630b1f821e3a53d5a4ffb76/data-raw/penguins_raw.csv" rel="noopener ugc nofollow" target="_blank">原始 CSV。</a></p><p id="a0c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与使用输入数据构建数据框架非常相似，当从文件或数据源创建数据框架时，可以接受许多输入格式。<br/>这包括:</p><ul class=""><li id="004e" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">excel 电子表格</li><li id="e61c" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">结构化查询语言</li><li id="e158" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">战斗支援车</li><li id="2096" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">JSON</li></ul><p id="1b6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看<a class="ae kw" href="https://pandas.pydata.org/pandas-docs/stable/reference/io.html" rel="noopener ugc nofollow" target="_blank">熊猫文档</a>获取完整列表。</p><p id="55a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这在数据存储方面提供了很大的灵活性，你可以读入存储在本地或远程的文件，甚至可以接受压缩文件。</p><p id="bec8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们感兴趣的 Palmer Penguin 文件存放在 GitHub 上，您可以下载该文件并阅读指定您机器上位置的 CSV 文件，或者我们可以提供原始文件的链接并使用一行代码打开它:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="e606" class="mo lm iq nm b gy nr ns l nt nu">df = pd.read_csv('https://raw.githubusercontent.com/allisonhorst/palmerpenguins/1a19e36ba583887a4630b1f821e3a53d5a4ffb76/data-raw/penguins_raw.csv')</span></pre><p id="6921" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一个常见的数据源是 SQL 数据库。有许多不同的 python 包可以连接到数据库，其中一个例子是<code class="fe nj nk nl nm b">pymysql</code>，我们可以首先连接到 MySQL 数据库，然后使用<code class="fe nj nk nl nm b">read_sql</code>将数据从查询加载到<code class="fe nj nk nl nm b">df</code>。这提供了快速和容易地连接到远程数据库的灵活性！</p><p id="5856" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意:这只是一个如何读入 SQL 数据的例子，在教程</strong>中没有用到</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="92dd" class="mo lm iq nm b gy nr ns l nt nu"># Example code: how to use read_sql<br/>import pymysql</span><span id="633c" class="mo lm iq nm b gy nw ns l nt nu">con = pymysql.connect(host='localhost', user='test', password='', db='palmerpenguins')</span><span id="2ce0" class="mo lm iq nm b gy nw ns l nt nu">df = read_sql(f'''SELECT * FROM penguins''', con)</span></pre><p id="77c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">💡<a class="ae kw" href="https://realpython.com/python-f-strings/" rel="noopener ugc nofollow" target="_blank"> Python 3 的 f 字符串</a>在输入查询时使用起来很方便。</p><p id="ce90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们稍后可能会输入一个条件，该条件使用了我们之前定义的变量，我们可以直接在 f 字符串中包含该变量，而不是对该条件进行硬编码。</p><p id="e1d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">三重引号还允许在 f 字符串中使用单引号，而不使用转义字符，如下例所示。例如:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="5931" class="mo lm iq nm b gy nr ns l nt nu"># Example code: f-string's and variables<br/>region = tuple('Anvers')</span><span id="894c" class="mo lm iq nm b gy nw ns l nt nu">df = read_sql(f'''SELECT * FROM penguins WHERE Region IN {region} AND Date Egg &gt; '2007-11-11' ''', con)</span></pre><h2 id="329a" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated"><strong class="ak">大型数据帧</strong></h2><p id="c715" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在读取大型数据集时，通过指定选项<code class="fe nj nk nl nm b">chunksize</code>至<code class="fe nj nk nl nm b">read_csv</code>、<code class="fe nj nk nl nm b">read_sql</code>或其他输入函数，可以迭代文件并每次迭代读取有限的行数。然而，值得注意的是，这个函数现在返回一个<code class="fe nj nk nl nm b">TextFileReader</code>而不是一个数据帧，并且需要进一步的步骤将块连接成一个数据帧。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="1358" class="mo lm iq nm b gy nr ns l nt nu">df = read_csv('https://raw.githubusercontent.com/allisonhorst/palmerpenguins/1a19e36ba583887a4630b1f821e3a53d5a4ffb76/data-raw/penguins_raw.csv', chunksize = 10000)</span><span id="56b3" class="mo lm iq nm b gy nw ns l nt nu">df_list = []<br/>for df in df:<br/>    df_list.append(df)</span><span id="d005" class="mo lm iq nm b gy nw ns l nt nu">df = pd.concat(df_list,sort=False)</span></pre><p id="5261" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在 Palmer Penguin 数据集上不一定要使用这一步，因为它只有几百行，但这里展示的是如何在一个大文件上使用这一步，一次读取 10k 行中的数据。</p><h2 id="0dca" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated"><strong class="ak">输出</strong></h2><p id="1b10" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">正如我们可以以多种格式输入文件一样，将数据帧输出到文件也同样灵活和容易！</p><p id="0d30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">经过一些操作后，我们可以将数据帧写入 CSV，如果需要，可以选择压缩文件:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="d1ca" class="mo lm iq nm b gy nr ns l nt nu">df.to_csv('output.csv', compression='gzip)</span></pre><p id="22eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您的数据存储在 AWS 中，那么有一个用于 Python 的 AWS SDK，<code class="fe nj nk nl nm b"><a class="ae kw" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" rel="noopener ugc nofollow" target="_blank">boto3</a></code>可以用来连接到您的 AWS 服务。</p><h1 id="33f7" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">4.检查数据的快速检查</h1><p id="54ec" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">在我们开始研究我们的数据之前，首先要检查它是否已经正确加载并包含我们所期望的内容。</p><h2 id="6a2f" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">数据帧的尺寸</h2><p id="b001" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们可以首先通过检查行数是否大于 0 来检查数据帧是否为空，并使用以下函数进一步检查维度:</p><ul class=""><li id="9d98" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">获取行数:<code class="fe nj nk nl nm b">len(df)</code></li><li id="0567" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">获取列数:<code class="fe nj nk nl nm b">len(df.columns)</code></li><li id="6976" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">获取行数和列数:<code class="fe nj nk nl nm b">df.shape</code></li><li id="5ceb" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">获取元素的数量(行数 X 列数):<code class="fe nj nk nl nm b">df.size</code></li></ul><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="175d" class="mo lm iq nm b gy nr ns l nt nu">if len(df) &gt; 0:<br/>    print(f'Length of df {len(df)}, number of columns {len(df.columns)}, dimensions {df.shape}, number of elements {df.size}')</span><span id="bfa6" class="mo lm iq nm b gy nw ns l nt nu">else:<br/>    print(f'Problem loading df, df is empty.')</span></pre><p id="e94f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将返回:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="1b74" class="mo lm iq nm b gy nr ns l nt nu">Length of df 344, number of columns 17, dimensions (344, 17), number of elements 5848</span></pre><p id="d4d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的数据集已经正确加载，有 344 行和 17 列。这个数据帧包含什么？</p><h2 id="4f73" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">数据类型和存储器</h2><p id="6b32" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们已经加载了数据帧，但是我们仍然不知道它包含什么类型的数据。我们可以用<code class="fe nj nk nl nm b">df.info()</code>得到一个摘要——让我们看看它返回了哪些细节:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="c07e" class="mo lm iq nm b gy nr ns l nt nu">df.info()</span><span id="4287" class="mo lm iq nm b gy nw ns l nt nu">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 344 entries, 0 to 343<br/>Data columns (total 17 columns):<br/>studyName              344 non-null object<br/>Sample Number          344 non-null int64<br/>Species                344 non-null object <br/>Region                 344 non-null object <br/>Island                 344 non-null object <br/>Stage                  344 non-null object <br/>Individual ID          344 non-null object <br/>Clutch Completion      344 non-null object <br/>Date Egg               344 non-null object <br/>Culmen Length (mm)     342 non-null float64 <br/>Culmen Depth (mm)      342 non-null float64 <br/>Flipper Length (mm)    342 non-null float64 <br/>Body Mass (g)          342 non-null float64 <br/>Sex                    334 non-null object <br/>Delta 15 N (o/oo)      330 non-null float64 <br/>Delta 13 C (o/oo)      331 non-null float64 <br/>Comments               54 non-null object <br/>dtypes: float64(6), int64(1), object(10) memory usage: 45.8+ K<!-- --> </span></pre><p id="3dd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nj nk nl nm b">df.info()</code>回报:</p><ul class=""><li id="0f7d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">索引数据类型(dtype)和范围，在本例中，pandas 数据帧有 344 个条目，用索引值 0-343 表示，</li><li id="5f00" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">每列的名称和数据类型，以及非空值的数量，</li><li id="e685" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">内存使用情况</li></ul><p id="26a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">penguin 数据包含混合或字符串数据类型的列<code class="fe nj nk nl nm b">objects</code>，整数<code class="fe nj nk nl nm b">int64</code>和浮点数<code class="fe nj nk nl nm b">float64</code>。下表总结了熊猫的数据类型。</p><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/d8c33c47aad35153486d12d518aad04e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrXMq7iTWih7lsBBRQFxXg.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">熊猫类型</p></figure><p id="7927" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<code class="fe nj nk nl nm b"><a class="ae kw" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.info.html" rel="noopener ugc nofollow" target="_blank">df.info()</a></code>默认情况下，内存使用量只是根据列数据类型和行数进行估计。<br/>我们可以指定使用深度内省来计算实际内存使用量，这在处理大型数据帧时特别有用:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="c2e5" class="mo lm iq nm b gy nr ns l nt nu">df.info(memory_usage='deep')</span><span id="8242" class="mo lm iq nm b gy nw ns l nt nu"><br/>&lt;class 'pandas.core.frame.DataFrame'&gt; <br/>RangeIndex: 344 entries, 0 to 343 <br/>Data columns (total 17 columns): <br/>studyName              344 non-null object <br/>Sample Number          344 non-null int64 <br/>Species                344 non-null object <br/>Region                 344 non-null object <br/>Island                 344 non-null object <br/>Stage                  344 non-null object <br/>Individual ID          344 non-null object <br/>Clutch Completion      344 non-null object <br/>Date Egg               344 non-null object <br/>Culmen Length (mm)     342 non-null float64 <br/>Culmen Depth (mm)      342 non-null float64 <br/>Flipper Length (mm)    342 non-null float64 <br/>Body Mass (g)          342 non-null float64 <br/>Sex                    334 non-null object <br/>Delta 15 N (o/oo)      330 non-null float64 <br/>Delta 13 C (o/oo)      331 non-null float64 <br/>Comments               54 non-null object <br/>dtypes: float64(6), int64(1), object(10) memory usage: 236.9 KB</span></pre><p id="2daa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以使用以下命令检查每列的内存使用情况:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="c963" class="mo lm iq nm b gy nr ns l nt nu">print(df.memory_usage(deep=True))<br/>Index                     80 <br/>studyName              22016 <br/>Sample Number           2752 <br/>Species                31808 <br/>Region                 21672 <br/>Island                 21704 <br/>Stage                  25800 <br/>Individual ID          21294 <br/>Clutch Completion      20604 <br/>Date Egg               23048 <br/>Culmen Length (mm)      2752 <br/>Culmen Depth (mm)       2752 <br/>Flipper Length (mm)     2752 <br/>Body Mass (g)           2752 <br/>Sex                    21021 <br/>Delta 15 N (o/oo)       2752 <br/>Delta 13 C (o/oo)       2752 <br/>Comments               14311 <br/>dtype: int64 </span></pre><p id="eccf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者总内存使用量如下:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="0bdc" class="mo lm iq nm b gy nr ns l nt nu">print(df.memory_usage(deep=True).sum())</span><span id="d018" class="mo lm iq nm b gy nw ns l nt nu">242622</span></pre><p id="08ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以看到，数字列明显小于包含对象的列。不仅如此，我们对分析中的所有列都不感兴趣。</p><p id="c1bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个原始文件包含已经收集的所有数据。如果我们要比较不同种类和不同岛屿上的企鹅的体重、鳍状肢长度和长度，那么我们可以清理数据，只保留相关的数据。</p><h1 id="633d" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">5.数据清理</h1><p id="ed7b" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">要清理数据，我们可以采取几个步骤:</p><h2 id="6963" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">删除我们不感兴趣的列</h2><p id="2725" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">让我们先看一下前几行数据:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="fe10" class="mo lm iq nm b gy nr ns l nt nu">print(df.head())</span></pre><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/d73e2aec857b25b5b9890675d50c6cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RbC5QoNJO6-towYeAXzSqQ.png"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">df.head()的输出</p></figure><p id="108e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个输出看起来不太对。我们知道有 17 列，但我们只能看到其中的 4 列以及这里的索引。根据您正在使用的控制台的大小，您可能会在这里看到更多的列，但可能不是全部 17 列。</p><p id="45f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了查看所有的列，我们可以将<code class="fe nj nk nl nm b">display.max_columns</code>的值设置为<code class="fe nj nk nl nm b">None</code>。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="b063" class="mo lm iq nm b gy nr ns l nt nu">pd.set_option('display.max_columns', None)<br/>print(df.head())</span></pre><figure class="nb nc nd ne gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/29c884fbd0274d58babd1a08aa4eda33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*PNyHQuo-70KTgLlyL9PTVA.png"/></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">将最大列数设置为 None 后 df.head()的输出</p></figure><p id="8241" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查看数据样本，我们可以确定我们想要使用的列，并通过只指定我们想要保留的行和列来为<code class="fe nj nk nl nm b">df</code>重新分配一个新值。我们可以用<code class="fe nj nk nl nm b">df.loc(rows, cols)</code>来做到这一点。在 rows 参数中，冒号表示所有值，而 columns 可以指定我们感兴趣的列，它们是:物种、地区、岛屿、竿长(mm)、竿深(mm)、鳍长(mm)、体重(g)、性别</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="5438" class="mo lm iq nm b gy nr ns l nt nu"><br/>keep_cols = ['Species', 'Region', 'Island', 'Culmen Length (mm)', 'Culmen Depth (mm)', 'Flipper Length (mm)', 'Body Mass (g)', 'Sex']</span><span id="e860" class="mo lm iq nm b gy nw ns l nt nu">df = df.loc[:, keep_cols]  </span><span id="c19a" class="mo lm iq nm b gy nw ns l nt nu">print(df.columns)  </span><span id="b16f" class="mo lm iq nm b gy nw ns l nt nu">&gt;&gt;&gt; Index(['Species', 'Region', 'Island', 'Culmen Length (mm)',        'Culmen Depth (mm)', 'Flipper Length (mm)', 'Body Mass (g)', 'Sex'],       dtype='object'</span></pre><p id="5da7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们的数据帧中只存储了感兴趣的列。</p><h2 id="b32a" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">替换或删除空值</h2><p id="c710" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们可以再次检查<code class="fe nj nk nl nm b">df</code>的内存使用情况，我们可以看到，通过删除不相关的列，它减少了一半。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="0fd5" class="mo lm iq nm b gy nr ns l nt nu">df.info<!-- -->(memory_usage='deep')</span><span id="5667" class="mo lm iq nm b gy nw ns l nt nu">&lt;class 'pandas.core.frame.DataFrame'&gt; <br/>RangeIndex: 344 entries, 0 to 343 <br/>Data columns (total 8 columns): <br/>Species                344 non-null object <br/>Region                 344 non-null object <br/>Island                 344 non-null object <br/>Culmen Length (mm)     342 non-null float64 <br/>Culmen Depth (mm)      342 non-null float64 <br/>Flipper Length (mm)    342 non-null float64 <br/>Body Mass (g)          342 non-null float64 <br/>Sex                    334 non-null object <br/>dtypes: float64(4), object(4) memory usage: 104.8 KB<!-- --> </span></pre><p id="faa8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看看非空值的数量，大小数据有 2 个空值，性别有 10 个。我们也可以看到这一点:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="6596" class="mo lm iq nm b gy nr ns l nt nu">print(df.isna().sum())  <br/>Species                 0 <br/>Region                  0 <br/>Island                  0 <br/>Culmen Length (mm)      2 <br/>Culmen Depth (mm)       2 <br/>Flipper Length (mm)     2 <br/>Body Mass (g)           2 <br/>Sex                    10 <br/>dtype: int64</span></pre><p id="6332" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以删除这些值，或者用另一个值替换它们，在函数中指定<code class="fe nj nk nl nm b">inplace=True</code>来重新赋值。<br/>在这种情况下，我们可以用<code class="fe nj nk nl nm b">Unknown</code>替换<code class="fe nj nk nl nm b">Sex</code>列的<code class="fe nj nk nl nm b">na</code>值，并删除其他列的<code class="fe nj nk nl nm b">na</code>值。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="122d" class="mo lm iq nm b gy nr ns l nt nu">df['Sex'].fillna('Unknown', inplace=True) </span><span id="17e3" class="mo lm iq nm b gy nw ns l nt nu">print(df.isna().sum())  </span><span id="abf2" class="mo lm iq nm b gy nw ns l nt nu">Species                0 <br/>Region                 0 <br/>Island                 0 <br/>Culmen Length (mm)     2 <br/>Culmen Depth (mm)      2 <br/>Flipper Length (mm)    2 <br/>Body Mass (g)          2 <br/>Sex                    0 <br/>dtype: int64  </span><span id="e2e2" class="mo lm iq nm b gy nw ns l nt nu">df.dropna(inplace=True) </span><span id="11f2" class="mo lm iq nm b gy nw ns l nt nu">print(df.isna().sum())  </span><span id="95da" class="mo lm iq nm b gy nw ns l nt nu">Species                0 <br/>Region                 0 <br/>Island                 0 <br/>Culmen Length (mm)     0 <br/>Culmen Depth (mm)      0 <br/>Flipper Length (mm)    0 <br/>Body Mass (g)          0 <br/>Sex                    0 <br/>dtype: int64</span></pre><p id="4fc4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我们只移除了少数几个值，这不太可能影响内存使用，但有助于清理数据，并且在处理包含大量空值的大型数据帧时，可能会减少内存。</p><h2 id="b4b1" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">将对象转换为分类数据类型</h2><p id="b8a3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">清理数据的最后一步是检查每一列中唯一值的数量，以确定分类数据类型是否比使用对象更合适。</p><p id="42fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们已经知道在我们的数据中有三种企鹅，但是这个列的 dtype 是一个<code class="fe nj nk nl nm b">object</code>，所以让我们先检查这个列。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="88b1" class="mo lm iq nm b gy nr ns l nt nu">print(df['Species'].head())  </span><span id="904f" class="mo lm iq nm b gy nw ns l nt nu">0    Adelie Penguin (Pygoscelis adeliae) <br/>1    Adelie Penguin (Pygoscelis adeliae) <br/>2    Adelie Penguin (Pygoscelis adeliae) <br/>4    Adelie Penguin (Pygoscelis adeliae) <br/>5    Adelie Penguin (Pygoscelis adeliae) <br/>Name: Species, dtype: object  </span><span id="051d" class="mo lm iq nm b gy nw ns l nt nu">print(df['Species'].nunique())  </span><span id="756c" class="mo lm iq nm b gy nw ns l nt nu">3  </span><span id="a514" class="mo lm iq nm b gy nw ns l nt nu">print(df['Species'].unique())  </span><span id="61d8" class="mo lm iq nm b gy nw ns l nt nu">['Adelie Penguin (Pygoscelis adeliae)' 'Gentoo penguin (Pygoscelis papua)'  'Chinstrap penguin (Pygoscelis antarctica)']</span></pre><p id="44b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如所料，这一列中只有 3 个唯一值，但每一行都包含一个企鹅种类的字符串，占用了大量内存。相反，我们可以将该列转换为类别数据类型，并检查这如何改变内存。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="f790" class="mo lm iq nm b gy nr ns l nt nu">print(df.memory_usage(deep=True))</span><span id="fe76" class="mo lm iq nm b gy nw ns l nt nu">Index                   2736<br/>Species                31626<br/>Region                 21546<br/>Island                 21575<br/>Culmen Length (mm)      2736<br/>Culmen Depth (mm)       2736<br/>Flipper Length (mm)     2736<br/>Body Mass (g)           2736<br/>Sex                    21213<br/>dtype: int64</span><span id="9e74" class="mo lm iq nm b gy nw ns l nt nu">df['Species'] = df['Species'].astype('category')</span><span id="3ca9" class="mo lm iq nm b gy nw ns l nt nu">print(df.memory_usage(deep=True))</span><span id="1c1f" class="mo lm iq nm b gy nw ns l nt nu">Index                   2736<br/>Species                  702<br/>Region                 21546<br/>Island                 21575<br/>Culmen Length (mm)      2736<br/>Culmen Depth (mm)       2736<br/>Flipper Length (mm)     2736<br/>Body Mass (g)           2736<br/>Sex                    21213<br/>dtype: int64</span></pre><p id="3ffb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这已经从 31626 字节变成了 702 字节，大大减小了大小！对于其他对象列、区域、岛和性别，可以采用相同的方法。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="86f1" class="mo lm iq nm b gy nr ns l nt nu">for col in ['Region','Island','Sex']:<br/>    print(f'Column: {col}, number of unique values, {df[col].nunique()}, unique values: {df[col].unique()}')</span><span id="3dc1" class="mo lm iq nm b gy nw ns l nt nu">Column: Region, number of unique values, 1, unique values: ['Anvers']<br/>Column: Island, number of unique values, 3, unique values: ['Torgersen' 'Biscoe' 'Dream']<br/>Column: Sex, number of unique values, 4, unique values: ['MALE' 'FEMALE' 'Unknown' '.']</span></pre><p id="479a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Region 只有一个值，此列可以删除，因为它不提供任何值。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="0c1b" class="mo lm iq nm b gy nr ns l nt nu">df.drop(columns=['Region'], inplace=True)<br/>print(df.columns)</span><span id="a0db" class="mo lm iq nm b gy nw ns l nt nu">Index(['Species', 'Island', 'Culmen Length (mm)', 'Culmen Depth (mm)',<br/>       'Flipper Length (mm)', 'Body Mass (g)', 'Sex'],<br/>      dtype='object')</span></pre><p id="f6e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">岛和性别可以像种一样转换成分类数据类型。在此之前，在句号的性别栏中有一个奇怪的值，让我们看看有多少个这样的值。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="2edd" class="mo lm iq nm b gy nr ns l nt nu">print((df['Sex']=='.').value_counts())</span><span id="19db" class="mo lm iq nm b gy nw ns l nt nu">False    341<br/>True       1<br/>Name: Sex, dtype: int64</span></pre><p id="6df1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为只有 1 个值，所以让我们用替换空值的方法用<code class="fe nj nk nl nm b">Unknown</code>替换它。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="fda8" class="mo lm iq nm b gy nr ns l nt nu">df['Sex'].replace('.','Unknown', inplace=True)<br/>print((df['Sex']=='.').value_counts())</span><span id="7d32" class="mo lm iq nm b gy nw ns l nt nu">False    342<br/>Name: Sex, dtype: int64</span></pre><p id="07c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们对这些列感到满意，让我们将 Sex 和 Island 转换为类别，并检查最终的内存使用情况:</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="08f5" class="mo lm iq nm b gy nr ns l nt nu">df['Sex'] = df['Sex'].astype('category')<br/>df['Island'] = df['Island'].astype('category')</span><span id="0afc" class="mo lm iq nm b gy nw ns l nt nu">print(df.memory_usage(deep=True))</span><span id="73ff" class="mo lm iq nm b gy nw ns l nt nu">Index                  2736<br/>Species                 702<br/>Island                  613<br/>Culmen Length (mm)     2736<br/>Culmen Depth (mm)      2736<br/>Flipper Length (mm)    2736<br/>Body Mass (g)          2736<br/>Sex                     610<br/>dtype: int64</span><span id="0aad" class="mo lm iq nm b gy nw ns l nt nu">print(df.memory_usage(deep=True).sum())</span><span id="b61f" class="mo lm iq nm b gy nw ns l nt nu">15605</span></pre><p id="4af0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">总的内存使用量从 242622 增加到了 15605。</p><pre class="nb nc nd ne gt nn nm no np aw nq bi"><span id="5292" class="mo lm iq nm b gy nr ns l nt nu">df.info(memory_usage='deep')</span><span id="f2ef" class="mo lm iq nm b gy nw ns l nt nu">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>Int64Index: 342 entries, 0 to 343<br/>Data columns (total 7 columns):<br/>Species                342 non-null category<br/>Island                 342 non-null category<br/>Culmen Length (mm)     342 non-null float64<br/>Culmen Depth (mm)      342 non-null float64<br/>Flipper Length (mm)    342 non-null float64<br/>Body Mass (g)          342 non-null float64<br/>Sex                    342 non-null category<br/>dtypes: category(3), float64(4)<br/>memory usage: 15.2 KB</span></pre><p id="a3d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将内存从 236.9 KB 减少到 15.2 KB。</p><h2 id="197f" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kj mt mu lz kn mv mw md kr mx my mh mz bi translated">任务完成！</h2><p id="e18b" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">到目前为止，我们已经介绍了如何开始将文件读入 pandas 并清理文件以优化性能。penguin 的数据已经有了很好的结构，与您可能从其他来源遇到的数据类型相比，只需要最少的清理。它也是一个相当小的数据集，从 200 KB 开始，当 pandas 可以处理 GBs 量级的文件时，这些快速提示可以显著提高性能。</p><p id="d85d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是系列教程的第 1 部分。在接下来的部分中，我们将定量和图形化地探索我们的数据，使用 pandas 和一些额外的 python 包(matplotlib 和 seaborn)创建数据可视化，并且我们将深入了解 pandas 的一些其他有用的特性！</p><p id="0938" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本教程的完整代码可以在 GitHub 上找到！</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="1b30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你想知道更多关于熊猫的数据检查和清理功能吗？或者我错过了什么？<a class="ae kw" href="https://twitter.com/_kaparker" rel="noopener ugc nofollow" target="_blank">让我知道</a>！<br/> <br/>如果你喜欢这篇文章，你可以<a class="ae kw" href="https://kaparker.substack.com/" rel="noopener ugc nofollow" target="_blank">订阅我的每月简讯</a>直接在你的收件箱里获得我的最新文章、我使用的资源和其他技巧！</p><p id="4431" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">想了解 web 抓取或学习资源，包括 python 中的数据科学课程，请查看我的一些其他文章:</p><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/data-science-skills-web-scraping-using-python-d1a85ef607ed"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">数据科学技能:使用 python 进行网络搜集</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">作为一名数据科学家，我在工作中接受的第一批任务之一就是网络搜集。这完全是…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jw ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/learn-to-code-learn-python-efb037b248e8"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd ir gy z fp op fr fs oq fu fw ip bi translated">学习编码。学习 Python。</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">你想学习编码但是不知道从哪里开始吗？开始您的编码之旅，并决定 python 是否…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy jw ok"/></div></div></a></div></div></div>    
</body>
</html>