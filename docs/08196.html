<html>
<head>
<title>A definitive guide to effect size</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">影响大小的权威指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-definitive-guide-to-effect-size-9bc93f00db86?source=collection_archive---------8-----------------------#2020-06-16">https://towardsdatascience.com/a-definitive-guide-to-effect-size-9bc93f00db86?source=collection_archive---------8-----------------------#2020-06-16</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><figure class="iu iv gp gr iw ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi it"><img src="../Images/bda6b7dcb3fa08f9205c8070f1a9dca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7aBzwaB44Iqys9Mq1YmPxg.jpeg"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">由<a class="ae ji" href="https://www.pexels.com/@kaboompics?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Kaboompics拍摄的照片。com </a>来自<a class="ae ji" href="https://www.pexels.com/photo/scientific-calculator-ii-5775/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a></p></figure><div class=""/><div class=""><h2 id="26cb" class="pw-subtitle-paragraph ki jk jl bd b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dk translated">了解如何正确计算和解释A/B测试的影响大小！</h2></div><p id="bc44" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">作为一名数据科学家，在进行某种A/B测试时，您很可能会遇到影响大小的问题。一种可能的情况是，公司希望对产品进行更改(无论是网站、移动应用程序等。)而你的任务是确保这种改变在一定程度上会带来更好的KPI表现。</p><p id="beac" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这就是假设检验发挥作用的时候了。然而，统计测试只能告知影响存在的可能性。就效果而言，我只是指一种差异——它可以是两个方向上的差异，但也可以是一种假设的更精确的变体，即一个样本实际上比另一个样本更好/更差(根据给定的指标)。为了知道影响有多大，我们需要计算影响大小。</p><p id="ccb9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在本文中，我将提供一个关于效果大小的简单理论介绍，然后展示一些如何在Python中计算它的实际例子。</p><h1 id="c6df" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">理论介绍</h1><p id="756e" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">从形式上来说，<strong class="lc jm">效应大小</strong>是我们正在研究的现象的量化大小。如前所述，统计测试得出了观察到一种效应的概率，然而，它们并没有具体说明这种效应实际上有多大。这可能会导致这样的情况:我们检测到统计上的显著影响，但它实际上非常小，对于实际情况(业务)来说，它可以忽略不计，一点也不有趣。</p><p id="c10f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">此外，在计划A/B测试时，我们希望估计测试的预期持续时间。这与<strong class="lc jm">功耗分析</strong>的主题有关，我在<a class="ae ji" rel="noopener" target="_blank" href="/introduction-to-power-analysis-in-python-e7b748dfa26">的另一篇文章</a>中提到过。快速总结一下，为了计算所需的样本量，我们需要指定三件事:显著性水平、检验的功效和效应大小。保持其他两个不变，效应大小越小，就越难以某种确定性来检测它，因此统计检验所需的样本量就越大。</p><p id="30e8" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">一般来说，可能有数百种不同的效果大小的测量方法，每一种都有一些优点和缺点。在这篇文章中，我将只介绍一些最流行的。在深入研究兔子洞之前，效应大小的度量可以根据它们定义效应的方法分为三类。这些群体是:</p><ul class=""><li id="22bd" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">基于相关性的度量</li><li id="c84b" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">基于差异的指标(例如，平均值之间)</li><li id="70a1" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">分类变量的度量</li></ul><p id="f50c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">前两个系列涵盖连续随机变量，而最后一个系列用于分类/二元特征。举一个现实生活中的例子，我们可以将前两个应用于一个指标，如在一个应用程序中花费的时间(以分钟为单位)，而第三个系列可以用于转换或保留-以布尔值表示。</p><p id="7b98" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我将在下面描述一些效果大小的度量，以及Python实现。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/1e2c180c481beedfa202d8c00ef03655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*phqej8da74t0lFvinijkpg.jpeg"/></div><p class="je jf gj gh gi jg jh bd b be z dk translated">Vishwarajsinh Rana 在<a class="ae ji" href="https://unsplash.com/s/photos/calculator?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="173f" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">Python中的示例</h1><p id="bae1" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">在这一部分中，我将更详细地描述每个效果大小系列的几个例子，并展示如何使用流行的库在Python中计算它们。当然，我们也可以自己编写这些函数，但是我认为没有必要重新发明轮子。</p><p id="c252" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">作为第一步，我们需要导入所需的库:</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="6751" class="no lx jl bd ly np nq dn mc nr ns dp mg lj nt nu mi ln nv nw mk lr nx ny mm nz bi translated">1.相关家族</h2><p id="0ddb" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">这个组的名字(也称为“r族”)来自两个变量之间关联的度量——相关性。到目前为止，最流行的相关性度量是皮尔逊相关系数(皮尔逊的<em class="oa"> r </em>)。</p><p id="8bfb" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在深入研究指标之前，我们将从多元正态分布中生成一些随机的相关变量。它们有不同的含义，因此我们实际上可以检测到一些影响，同时为了简单起见，我们将方差保持为1。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="aea0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">请记住，我们生成的随机观察越多，它们的分布就越像我们指定的分布。</p><p id="acfb" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">皮尔森的<em class="oa">r</em>T9】</strong></p><p id="ff0f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这并不奇怪，因为这个家族的名字就是基于这个标准。皮尔逊相关系数衡量两个实值变量之间的线性关联程度。该度量是无单位的，表示为[-1，1]范围内的数字。为简洁起见，我只描述极端情况的解释:</p><ul class=""><li id="5e3b" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">值-1表示变量之间完全负相关，</li><li id="7835" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">值0表示没有线性关系，</li><li id="dd2d" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">值为1表示完美的正关系。</li></ul><p id="1ef0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">由于这通常是最常用的指标之一，因此在Python中有许多计算相关系数的方法:</p><ul class=""><li id="2509" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated"><code class="fe ob oc od oe b">pearsonr</code>在<code class="fe ob oc od oe b">scipy.stats</code>中——除了相关系数，我们还接收相关测试的p值。引用<a class="ae ji" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html" rel="noopener ugc nofollow" target="_blank">文档</a>:"<em class="oa">p值大致表示不相关系统产生的数据集的皮尔逊相关性至少与从这些数据集计算出的值一样极端的概率。</em></li></ul><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="941b" class="no lx jl oe b gy oj ok l ol om">stats.pearsonr(x[:,0], x[:,1])<br/># (0.6023670412294826, 0.0)</span></pre><ul class=""><li id="ab7f" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated"><code class="fe ob oc od oe b">numpy.corrcoef</code> —返回相关矩阵，使用<code class="fe ob oc od oe b">rowvar</code>指示随机变量的观察值是存储在行中还是列中。</li></ul><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="70ba" class="no lx jl oe b gy oj ok l ol om">np.corrcoef(x, rowvar=False)<br/># array([[1.        , 0.60236704],<br/>#        [0.60236704, 1.        ]])</span></pre><ul class=""><li id="5254" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated"><code class="fe ob oc od oe b">pandas</code>数据帧/系列的<code class="fe ob oc od oe b">corr</code>方法。</li><li id="836f" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated"><code class="fe ob oc od oe b">pingouin</code>的<code class="fe ob oc od oe b">corr</code>函数——默认情况下，它返回皮尔逊的<em class="oa"> r </em>系数(也可以使用其他相关性度量)。与<code class="fe ob oc od oe b">scipy</code>相反，该函数返回相关性测试的更详细的结果。我们也可以使用检验的单侧变量。</li></ul><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="9b8a" class="no lx jl oe b gy oj ok l ol om">pg.corr(x[:, 0], x[:, 1])</span></pre><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi on"><img src="../Images/97be160a8b8ad0f397fcfb461d88f792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yLk2aLw0bTfSO_1cqc7TYg.png"/></div></div></figure><p id="1e68" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">决定系数(R ) </strong></p><p id="e6c0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在这个家族中，效应大小的第二个度量是决定系数，也称为R。它说明了自变量解释(可预测)的因变量方差的比例。换句话说，这是一个衡量观察到的结果如何被模型复制的标准。</p><p id="6dbb" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">决定系数有几种定义，然而，对我们来说最相关的是与皮尔逊的r相关的定义。当使用包含截距的简单线性回归(有一个因变量)时，决定系数就是皮尔逊的<em class="oa"> r </em>的平方。如果有更多的因变量，R是多重相关系数的平方。</p><p id="ba40" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在上述任何一种情况下，决定系数通常在0和1之间。但是，如果使用另一个定义，这些值也可能变成负值。由于我们平方相关系数的事实，决定系数不传达任何关于相关方向的信息。</p><p id="d4f0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们可以通过运行简单的线性回归并检查报告值来计算决定系数:</p><ul class=""><li id="602c" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">使用<code class="fe ob oc od oe b">pingouin</code>:</li></ul><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="82fe" class="no lx jl oe b gy oj ok l ol om">pg.linear_regression(x[:, 0], x[:, 1])</span></pre><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi oo"><img src="../Images/60b8ac35823ce8e63869d445860ff2dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quS7saNOS5L3Xr87C0_LIw.png"/></div></div></figure><ul class=""><li id="bd56" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">使用<code class="fe ob oc od oe b">statsmodels</code>:</li></ul><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi op"><img src="../Images/a95045c91b989c2e18f1ee3be7843f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*38Evlfo3OSDMr1blJdQE2w.png"/></div></div></figure><p id="ecbb" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在这两种情况下，决定系数接近0.36，这是相关系数(0.6)的平方。</p><p id="fbd6" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">η平方(<em class="oa"> η </em> ) </strong></p><p id="dd9f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">该系列中最后考虑的度量是eta平方。它是一个预测因子在因变量中解释的方差比率，同时控制其他预测因子，这使它类似于r。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/197485e42561f9a98676a23ec451447e.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*UCDVrKXpHTDDbzy78uWKyQ.png"/></div></figure><p id="5cd5" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其中SS代表平方和。<em class="oa"> η </em>是模型解释的总体方差的有偏估计量，因为它仅估计所考虑样本中的效应大小。这意味着eta平方将总是高估实际效应大小，尽管这种偏差随着样本大小的增加而变小。Eta-squared也有r的弱点——每个额外的变量都会自动增加<em class="oa"> η </em>的值。</p><p id="463e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">为了用Python计算eta的平方，我们可以使用<code class="fe ob oc od oe b">pingouin</code>库:</p><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="c9ec" class="no lx jl oe b gy oj ok l ol om">pg.compute_effsize(x[:, 0], x[:, 1], eftype='eta-square')<br/># 0.057968511053166284</span></pre><p id="f248" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">此外，该库包含一个名为<code class="fe ob oc od oe b">convert_effsize</code>的有用函数，它允许我们将Pearson的<em class="oa"> r </em>或Cohen的<em class="oa"> d </em>测量的效果大小转换为eta-squared等。</p><h2 id="0350" class="no lx jl bd ly np nq dn mc nr ns dp mg lj nt nu mi ln nv nw mk lr nx ny mm nz bi translated">2.“差异”家庭</h2><p id="766e" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">第二个家族被称为差异家族，这可能是衡量效应大小的最常用方法——计算样本平均值之间的差异。通常，该差异也通过除以标准偏差(任一或两个群体)来标准化。</p><p id="c0f9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">实际上，人口数值是未知的，只能通过抽样统计来估计。这就是为什么有多种方法来计算均值之间的差异的影响大小——它们在使用的样本统计方面有所不同。</p><p id="8e8c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">另一方面，这种估计效应大小的形式类似于计算<em class="oa"> t </em>统计量，不同之处在于标准偏差除以<em class="oa"> t </em>统计量分母中<em class="oa"> n </em>的平方根。与T21统计不同，效应大小旨在估计总体水平的值，不受样本大小的影响。</p><p id="36f1" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这一族也被称为“<em class="oa"> d族</em>”，以估计效应大小的最常见方法——Cohen的<em class="oa"> d. </em>命名</p><p id="70d3" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在深入研究指标之前，我们先定义两个来自正态分布的随机变量。我们使用不同的均值和标准差来确保变量有足够的差异来获得合理的效应大小。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi or"><img src="../Images/4bdc59979bfed9c88e3e93ab305288b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DAqOAhAOA7Y7q3rBvMwj1g.png"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">两个随机变量的分布</p></figure><p id="ebf2" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">科恩的d </strong></p><p id="76e2" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">科恩的<em class="oa"> d </em>测量两个变量的均值之间的差异。差异以标准差的数量表示，因此在公式中有除法。科恩的<em class="oa"> d </em>定义为:</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi os"><img src="../Images/4f91927cce4d4011ba8f14fb62d3baab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rsTRBHk7YRtt_BPjX-5i4w.png"/></div></div></figure><p id="9acf" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其中<em class="oa"> s </em>为合并标准差，S1、S2为两个独立样本的标准差。</p><p id="ba75" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">注</strong>:一些来源使用不同的集合标准差公式，并且分母中不包括-2。</p><p id="2244" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">对效应大小的最常见解释如下:</p><ul class=""><li id="a4f1" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">小效果尺寸:d=0.2</li><li id="8a73" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">中等效果尺寸:d=0.5</li><li id="ab00" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">大效果尺寸:d=0.8</li></ul><p id="6177" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">Cohen的<em class="oa"> d </em>经常用于估算A/B测试所需的样本量。一般来说，Cohen的<em class="oa"> d </em>值越低，表明需要更大的样本量，反之亦然。</p><p id="5be8" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在Python中计算Cohen的<em class="oa"> d </em>的最简单方法是使用<code class="fe ob oc od oe b">pingouin</code>库:</p><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="eed0" class="no lx jl oe b gy oj ok l ol om">pg.compute_effsize(x, y, eftype='cohen')<br/># -0.5661743543595718</span></pre><h2 id="e3f8" class="no lx jl bd ly np nq dn mc nr ns dp mg lj nt nu mi ln nv nw mk lr nx ny mm nz bi translated">玻璃'δ'</h2><p id="4e2a" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">Glass的δ与Cohen的<em class="oa"> d </em>非常相似，不同之处在于使用了第二个样本(A/B测试中的对照组)的标准偏差，而不是混合标准偏差。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/5d631bcf3519f1941ad33d1c4fed2599.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*Ymr66Q_xNrj9490_7B4nnA.png"/></div></figure><p id="fc5f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">仅使用对照组的标准差的基本原理是基于这样的事实，即如果我们将多个治疗组与同一对照组进行比较，这样我们将在所有情况下具有共同的标准。</p><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="097d" class="no lx jl oe b gy oj ok l ol om">pg.compute_effsize(x, y, eftype='glass')<br/># -0.6664041092152272</span></pre><p id="e266" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">对冲的g </strong></p><p id="1c01" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">Cohen的<em class="oa"> d </em>是总体水平效应大小的有偏估计量，尤其是对于小样本(n &lt; 20)。这就是为什么Hedge的<em class="oa"> g </em>通过将Cohen的<em class="oa"> d </em>乘以修正系数(基于伽马函数)来进行修正:</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/3ee967b19de24244c9af1d4e6635bae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*oJBdLzfOh502I7BhULf6-Q.png"/></div></figure><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="388e" class="no lx jl oe b gy oj ok l ol om">pg.compute_effsize(x, y, eftype='hedges')<br/># -0.5661722311818571</span></pre><p id="30db" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">我们可以看到科恩的<em class="oa"> d </em>和对冲的<em class="oa"> g </em>的差别非常小。对于较小的样本量，这种情况会更明显。</p><h2 id="67f8" class="no lx jl bd ly np nq dn mc nr ns dp mg lj nt nu mi ln nv nw mk lr nx ny mm nz bi translated">3.绝对家族</h2><p id="5139" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">这一族用于估计分类(以及在一些简单的情况下——二元)随机变量的效应大小。我们通过运行以下代码片段来生成该部分的随机变量:</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="5394" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">φ(φ系数)</strong></p><p id="79ad" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">phi系数是卡尔·皮尔逊引入的两个二元变量之间关联的度量，与2x2 <a class="ae ji" href="https://en.wikipedia.org/wiki/Contingency_table" rel="noopener ugc nofollow" target="_blank">列联表</a>的卡方统计相关。在机器学习术语中，列联表基本上与混淆矩阵相同。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/02870f32cb09753b3363d6a274b52558.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/1*FGYQMwufWIL98ECsOiYAhw.png"/></div></figure><p id="789e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">当大部分数据落在列联表的对角线上时，两个二元随机变量是正相关的(想想真正的正和真正的负)。相反，当大部分数据脱离对角线时，变量是负相关的(想想假阳性和假阴性)。</p><p id="6068" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">事实上，为两个二元变量计算的皮尔逊相关系数(<em class="oa"> r </em>)会得出phi系数(我们将用Python来证明)。然而，phi系数的范围不同于相关系数，尤其是当至少一个变量取两个以上的值时。</p><p id="d4f6" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">此外，在机器学习中，我们看到马修斯相关系数作为评估分类模型性能的一种度量标准越来越受欢迎。事实上，MCC就是皮尔逊的phi系数。</p><p id="1eb0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">Phi/MCC考虑了混淆矩阵/列联表的所有元素，这就是为什么它被认为是一个平衡的评估指标，也可以在类别不平衡的情况下使用。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="4377" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">运行代码会产生以下输出:</p><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="0132" class="no lx jl oe b gy oj ok l ol om">Phi coefficient: 0.000944<br/>Matthews Correlation: 0.000944<br/>Pearson's r: 0.000944</span></pre><p id="56b3" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">克莱默V </strong></p><p id="fd27" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">cramér’s V是分类变量之间关联的另一种度量(不限于二元情况)。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/826f6a8ff106c904e8f1eebe14e80dab.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*ElUM4HPxTT7Ru99jRCi6LQ.png"/></div></figure><p id="1830" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其中<em class="oa"> k </em>和<em class="oa"> r </em>代表列数和行数，φ是上面计算的φ系数。</p><p id="019c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">克拉默的V取值范围为0(变量之间没有关联)到1(完全关联)。请注意，对于2x2列联表(两个二元变量)的情况，Cramér的V等于phi系数，我们将很快在实践中看到这一点。</p><p id="0fd6" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">对克拉默V的大小最常见的解释如下:</p><ul class=""><li id="deeb" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">小效果尺寸:V ≤ 0.2</li><li id="2ef2" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">中等效果尺寸:0.2 &lt; V ≤ 0.6</li><li id="98e5" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">Large Effect Size: 0.6 &lt; V</li></ul><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="f4ef" class="no lx jl oe b gy oj ok l ol om">Cramer's V: 0.000944</span></pre><p id="f68e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">We have indeed obtained the same value as in the case of the phi coefficient.</p><p id="7df7" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">科恩的w </strong></p><p id="b192" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">Cohen提出了效应大小的另一种度量，它“随着替代假设指定的分布与代表零假设的分布之间的差异程度而增加”(更多详细信息，请参见[1]第216页)。在这种情况下，我们处理的是比例(所有观察值的一部分)，而不是之前度量的列联表。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/47a869531df94e788168911bdca1629d.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*DLvoqOvVak_nqaGfQuLp2g.png"/></div></figure><p id="56da" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其中:</p><ul class=""><li id="62c3" class="mt mu jl lc b ld le lg lh lj mv ln mw lr mx lv my mz na nb bi translated">p_{0i} —零假设下单元格<em class="oa"> i </em>中的比例，</li><li id="8222" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">p_{1i} —替代假设下单元格<em class="oa"> i </em>中的比例，</li><li id="751e" class="mt mu jl lc b ld nc lg nd lj ne ln nf lr ng lv my mz na nb bi translated">m —细胞数量。</li></ul><p id="1e24" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">Cohen的<em class="oa"> w </em>测量的效应大小被认为对于接近0.1的值是小的，对于大约0.3是中等的，对于大约0.5是大的。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="8c64" class="no lx jl oe b gy oj ok l ol om">Cohen's w: 0.173820</span></pre><p id="ccc7" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">科恩的h </strong></p><p id="89f0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">另一种用于比较两个独立样本比例的方法是科恩的<em class="oa"> h </em>，定义如下:</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/c2880705a389c53048fadfde9e2cc68e.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*ImyXCKOeA-_OU8YqlgK4gw.png"/></div></figure><p id="e0e0" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">其中P1代表第一个样本中阳性病例的比例。为了评估影响大小的大小，作者提出了与科恩的<em class="oa"> d </em>相同的指示值范围。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="2c35" class="no lx jl oe b gy oj ok l ol om">Cohen's h: 0.174943</span></pre><p id="08a2" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><strong class="lc jm">优势比</strong></p><p id="33c9" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">通过比值比测量的效应大小通过注意到治疗组中事件发生的比值比对照组高/低X倍来计算。</p><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/921e93f98a818a733bd5fe802aa3078b.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*J8P7i5zbib0u_cbEjK_TWA.png"/></div></figure><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><pre class="ni nj nk nl gt of oe og oh aw oi bi"><span id="0a63" class="no lx jl oe b gy oj ok l ol om">Odds Ratio: 1.374506</span></pre><p id="e888" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">事件(例如转化)发生的几率在<code class="fe ob oc od oe b">x</code>组中比在<code class="fe ob oc od oe b">y</code>组中高约1.37倍，这与生成数据时提供的概率一致。</p><h2 id="504d" class="no lx jl bd ly np nq dn mc nr ns dp mg lj nt nu mi ln nv nw mk lr nx ny mm nz bi translated"><strong class="ak">加成:通用语言效果大小</strong></h2><p id="499e" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">最后一个指标非常有趣，因为——顾名思义——它旨在用每个人都能理解的简单语言来表达效果大小。也不属于上面提到的家庭。作者在[2]中将这一指标描述为:</p><blockquote class="pa pb pc"><p id="6110" class="la lb oa lc b ld le km lf lg lh kp li pd lk ll lm pe lo lp lq pf ls lt lu lv io bi translated">从一个分布中随机抽取的分数大于从其他分布中抽取的分数的概率。</p></blockquote><p id="8f40" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">为了使描述尽可能清楚，我将转述文中提到的例子。假设我们有一个成年男女的身高样本，CLES是0.8。这将意味着在80%随机选择的配对中，男性将高于女性。或者换个说法，10次相亲中有8次，男方会高于女方。</p><figure class="ni nj nk nl gt ix"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="ni nj nk nl gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi pg"><img src="../Images/bef877b4b068c06560cc8bbd32eec00d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxqYPHLAcqafQcBd3raNdQ.png"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">随机生成的高度的分布</p></figure><h1 id="f594" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated"><strong class="ak">结论</strong></h1><p id="bb26" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">在本文中，我介绍了影响大小的不同度量，并展示了如何在Python中计算它们。了解这些，或者每个家族至少有一个关键指标，在使用frequentist方法计划A/B测试时肯定会派上用场。</p><p id="4703" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">您可以在我的<a class="ae ji" href="https://github.com/erykml/medium_articles/blob/master/Statistics/effect_size.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到本文使用的代码。一如既往，我们欢迎任何建设性的反馈。可以在<a class="ae ji" href="https://twitter.com/erykml1?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或者评论里联系我。</p><p id="f1ac" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">如果您对本文感兴趣，您可能也会喜欢:</p><div class="iu iv gp gr iw ph"><a rel="noopener follow" target="_blank" href="/the-new-kid-on-the-statistics-in-python-block-pingouin-6b353a1db57c"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd jm gy z fp pm fr fs pn fu fw jk bi translated">Python统计块中的新成员:pingouin</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">图书馆的快速参观，以及它是如何从老守卫中脱颖而出的</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">towardsdatascience.com</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv jc ph"/></div></div></a></div><div class="iu iv gp gr iw ph"><a rel="noopener follow" target="_blank" href="/one-tailed-or-two-tailed-test-that-is-the-question-1283387f631c"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd jm gy z fp pm fr fs pn fu fw jk bi translated">单尾还是双尾检验，这是个问题</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">了解统计测试的两种变体之间的区别，以及如何在Python中实现它们</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">towardsdatascience.com</p></div></div><div class="pq l"><div class="pw l ps pt pu pq pv jc ph"/></div></div></a></div><div class="iu iv gp gr iw ph"><a rel="noopener follow" target="_blank" href="/introduction-to-power-analysis-in-python-e7b748dfa26"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd jm gy z fp pm fr fs pn fu fw jk bi translated">Python中的功耗分析简介</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">了解概念的重要性，如显著性水平、效应大小、统计功效和样本大小</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">towardsdatascience.com</p></div></div><div class="pq l"><div class="px l ps pt pu pq pv jc ph"/></div></div></a></div><h1 id="8c35" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">参考</h1><p id="1c82" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">[1]科恩，J. (2013)。<em class="oa">行为科学的统计功效分析</em>。学术出版社。</p><p id="89a4" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">[2] McGraw，K. O .，&amp; Wong，S. P. (1992年)。一种常见的语言效应大小统计。<em class="oa">心理通报，111 </em> (2)，361–365。https://doi.org/10.1037/0033-2909.111.2.361<a class="ae ji" href="https://psycnet.apa.org/doi/10.1037/0033-2909.111.2.361" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>