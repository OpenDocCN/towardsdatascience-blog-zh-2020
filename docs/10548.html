<html>
<head>
<title>Training Custom NER</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">培训定制 NER</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/train-ner-with-custom-training-data-using-spacy-525ce748fab7?source=collection_archive---------4-----------------------#2020-07-24">https://towardsdatascience.com/train-ner-with-custom-training-data-using-spacy-525ce748fab7?source=collection_archive---------4-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2ac5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文解释了如何使用 spacy 和 python 从训练数据中训练和获取自定义命名的实体。</h2></div><blockquote class="kf kg kh"><p id="c6e1" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">文章解释了什么是 spacy，spacy 的优点，以及如何使用 spacy 进行命名实体识别。现在，所有的就是训练你的训练数据从文本中识别自定义实体。</p></blockquote><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/599569089ecbb3eea0663f601e6c8776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ws1IJJsN8Bid2iO8Uzs4yA.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">由<a class="ae lv" href="https://unsplash.com/@sandym10?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">桑迪·米勒</a>在<a class="ae lv" href="https://unsplash.com/s/photos/text?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="b947" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">spaCy 是什么？</h1><p id="c186" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi mw translated">S  paCy 是一个用于高级<a class="ae lv" href="https://en.wikipedia.org/wiki/Natural_language_processing" rel="noopener ugc nofollow" target="_blank">自然语言处理</a>的开源软件库，用编程语言<a class="ae lv" href="https://en.wikipedia.org/wiki/Python_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Python </a>和<a class="ae lv" href="https://en.wikipedia.org/wiki/Cython" rel="noopener ugc nofollow" target="_blank"> Cython </a>编写。该库在麻省理工学院的许可下发布，其主要开发者是软件公司 Explosion 的创始人 Matthew Honnibal 和 Ines Montani。</p><blockquote class="kf kg kh"><p id="be9b" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><em class="iq">与广泛用于教学和科研的</em><a class="ae lv" href="https://en.wikipedia.org/wiki/Natural_Language_Toolkit" rel="noopener ugc nofollow" target="_blank"><em class="iq">NLTK</em></a><em class="iq">不同，spaCy 专注于提供生产使用的软件。从 1.0 版本开始，spaCy 还支持</em> <a class="ae lv" href="https://en.wikipedia.org/wiki/Deep_learning" rel="noopener ugc nofollow" target="_blank"> <em class="iq">深度学习</em> </a> <em class="iq">工作流，允许连接由流行的</em> <a class="ae lv" href="https://en.wikipedia.org/wiki/Machine_learning" rel="noopener ugc nofollow" target="_blank"> <em class="iq">机器学习</em> </a> <em class="iq">库训练的统计模型，如</em> <a class="ae lv" href="https://en.wikipedia.org/wiki/TensorFlow" rel="noopener ugc nofollow" target="_blank"> <em class="iq">张量流</em> </a> <em class="iq">，</em><a class="ae lv" href="https://en.wikipedia.org/wiki/PyTorch" rel="noopener ugc nofollow" target="_blank"><em class="iq">py torch</em></a><em class="iq">或</em><a class="ae lv" href="https://en.wikipedia.org/wiki/Apache_MXNet" rel="noopener ugc nofollow" target="_blank"><em class="iq">MXNet<em class="iq"/></em></a></p></blockquote><h1 id="0cdd" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">为什么不是 NLTK？</h1><p id="86ac" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">虽然 NLTK 提供了对许多算法的访问来完成一些事情，但是 spaCy 提供了最好的方法。它提供了迄今为止发布的任何 NLP 库的最快和最准确的语法分析。它还提供了对更大的词向量的访问，这些词向量更容易定制。</p><h1 id="adaa" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">自定义-NER</h1><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/ae9af10ae7ff8a3045700ac450096c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ESlC0cOzAZjxv5X8YPeOg.png"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><a class="ae lv" href="https://miro.medium.com/fit/c/1838/551/0*O2A6Q5VwrfyNWKF4.png" rel="noopener">NER 的一个实例</a></p></figure><h1 id="c3e1" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">步骤:1 安装说明</h1><h2 id="5f7f" class="ng lx iq bd ly nh ni dn mc nj nk dp mg mq nl nm mi ms nn no mk mu np nq mm nr bi translated">点</h2><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="4ec6" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">安装后，您需要下载一个语言模型</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="031b" class="ng lx iq bd ly nh ni dn mc nj nk dp mg mq nl nm mi ms nn no mk mu np nq mm nr bi translated">康达</h2><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="f2a2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">第二步:模型训练</h1><p id="be76" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">完成第一步后，您就可以开始培训了。</p><p id="42ab" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→首先，导入定制创建过程所需的必要包。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="ca10" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→现在，主要部分是为输入文本创建您的自定义实体数据，其中<em class="kk">命名实体</em>将在测试期间由模型识别。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="8273" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→定义要处理的训练模型所需的变量。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="bd70" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→接下来，加载流程的空白模型以执行 NER 动作，并使用<em class="kk"> create_pipe </em>功能设置只有 NER 的管道。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="05ac" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→这里，我们想通过禁用除 NER 之外的不必要的流水线来训练识别器。<em class="kk"> nlp_update </em>函数可用于训练识别器。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="1a6d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">产出:培训损失</p><pre class="lg lh li lj gt nu nv nw nx aw ny bi"><span id="5b09" class="ng lx iq nv b gy nz oa l ob oc">100%|██████████| 3/3 [00:00&lt;00:00, 32.00it/s]</span><span id="fb82" class="ng lx iq nv b gy od oa l ob oc">{'ner': 10.165919601917267}</span><span id="3de5" class="ng lx iq nv b gy od oa l ob oc">100%|██████████| 3/3 [00:00&lt;00:00, 30.38it/s]</span><span id="7ad1" class="ng lx iq nv b gy od oa l ob oc">{'ner': 8.44960543513298}</span><span id="2b40" class="ng lx iq nv b gy od oa l ob oc">100%|██████████| 3/3 [00:00&lt;00:00, 28.11it/s]</span><span id="06e1" class="ng lx iq nv b gy od oa l ob oc">{'ner': 7.798196479678154}</span><span id="bbc4" class="ng lx iq nv b gy od oa l ob oc">100%|██████████| 3/3 [00:00&lt;00:00, 33.42it/s]</span><span id="d707" class="ng lx iq nv b gy od oa l ob oc">{'ner': 6.569828731939197}</span><span id="d211" class="ng lx iq nv b gy od oa l ob oc">100%|██████████| 3/3 [00:00&lt;00:00, 29.20it/s]</span><span id="d64e" class="ng lx iq nv b gy od oa l ob oc">{'ner': 6.784278305480257}</span></pre><p id="0023" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→为了测试训练好的模型，</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="40b2" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">→最后，将模型保存到保存在<em class="kk"> output_dir </em>变量中的路径。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="6d5a" class="ng lx iq bd ly nh ni dn mc nj nk dp mg mq nl nm mi ms nn no mk mu np nq mm nr bi translated">一旦保存了训练好的模型，就可以使用</h2><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="04c1" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr mq kt ku kv ms kx ky kz mu lb lc ld le ij bi translated">在<a class="ae lv" href="https://github.com/Nishk23/spaCy-Custom-NER-creation/tree/master" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上可以找到完整的源代码。</p><h1 id="c8af" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="3e54" class="pw-post-body-paragraph ki kj iq kl b km mo jr ko kp mp ju kr mq mr ku kv ms mt ky kz mu mv lc ld le ij bi translated">我希望你现在已经明白了如何在斯帕西 NER 模型的基础上训练你自己的 NER 模型。感谢阅读！</p></div></div>    
</body>
</html>