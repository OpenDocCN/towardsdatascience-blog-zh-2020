<html>
<head>
<title>Optimizing product price using regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用回归优化产品价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/optimizing-product-price-using-regression-2c17688e65ea?source=collection_archive---------7-----------------------#2020-08-11">https://towardsdatascience.com/optimizing-product-price-using-regression-2c17688e65ea?source=collection_archive---------7-----------------------#2020-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="a31f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">应用数据科学</h2><div class=""/><div class=""><h2 id="4b08" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">收益最大化价格优化的 Python 实现</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/580d545967fd2cbdcd98323592228e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hDoSKGDjFCNhefWO"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@maddibazzocco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Maddi Bazzocco </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3904" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">价格和数量是决定每项业务底线的两个基本指标，设定正确的价格是一家公司可以做出的最重要的决定之一。如果消费者愿意多付钱，定价过低会损害公司的收入，另一方面，如果消费者不愿意以更高的价格购买产品，定价过高也会以类似的方式损害公司的收入。</p><p id="0c78" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，考虑到价格和销售之间的微妙关系，最大化产品销售和赚取最多利润的最佳点——最佳价格——在哪里呢？</p><p id="deac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本文的目的是通过在 Python 环境中实现经济理论和回归算法的结合来回答这个问题。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="71d3" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">1.数据</h1><p id="26e3" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们是根据历史价格和销量的关系来优化一个未来价格，所以首先需要的是这两个指标的过往数据。在这个练习中，我使用了历史<a class="ae lh" href="https://raw.githubusercontent.com/susanli2016/Machine-Learning-with-Python/master/beef.csv" rel="noopener ugc nofollow" target="_blank">牛肉销售和相应单价</a>的时间序列数据。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="8502" class="nn mm it nj b gy no np l nq nr"># load data<br/>import pandas as pd<br/>beef = pd</span><span id="9a5f" class="nn mm it nj b gy ns np l nq nr"># view first few rows<br/>beef.tail(5</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/31967ca8365d896f03e77625ce5d2945.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*ospppjd_0HiubROnVDpxEQ.png"/></div></figure><p id="5a89" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该数据集包含总共 91 个按季度报告的数量-价格对观察值。</p><p id="0afd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据科学中通常会进行探索性数据分析(EDA)，但我将跳过这一部分，专注于建模。然而，我强烈建议采取这一额外的步骤，以确保您在构建模型之前理解了数据。</p><h1 id="996d" class="ml mm it bd mn mo nu mq mr ms nv mu mv ki nw kj mx kl nx km mz ko ny kp nb nc bi translated">2.图书馆</h1><p id="a01c" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们需要导入库有三个原因:操作数据、构建模型和可视化功能。</p><p id="bd0b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们正在导入用于创建和操作表格的<code class="fe nz oa ob nj b">numpy</code>和<code class="fe nz oa ob nj b">pandas</code>，用于可视化的<code class="fe nz oa ob nj b">mtplotlib</code>和<code class="fe nz oa ob nj b">seaborn</code>，以及用于构建和运行回归模型的<code class="fe nz oa ob nj b">statsmodels</code> API。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="b8c5" class="nn mm it nj b gy no np l nq nr">import numpy as np<br/>from pandas import DataFrame<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>from statsmodels.formula.api import ols<br/>%matplotlib inline</span></pre><h1 id="ee2a" class="ml mm it bd mn mo nu mq mr ms nv mu mv ki nw kj mx kl nx km mz ko ny kp nb nc bi translated">2.定义利润函数</h1><p id="d8af" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们知道收入取决于销售量和产品的单价。</p><p id="33ca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们也知道利润是通过从收入中扣除成本计算出来的。</p><p id="85cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">将这两者放在一起，我们得到以下等式:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="c9ae" class="nn mm it nj b gy no np l nq nr"># revenue<br/>revenue = quantity * price # eq (1)</span><span id="3bde" class="nn mm it nj b gy ns np l nq nr"># profit<br/>profit = revenue - cost # eq (2)</span></pre><p id="c916" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以结合 eq 改写利润函数。#1 和# 2 如下:</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="cf10" class="nn mm it nj b gy no np l nq nr"># revised profit function<br/>profit = quantity * price - cost # eq (3)</span></pre><p id="a1e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">等式 3 告诉我们，我们需要三条信息来计算利润:数量、价格和成本。</p><h1 id="0c01" class="ml mm it bd mn mo nu mq mr ms nv mu mv ki nw kj mx kl nx km mz ko ny kp nb nc bi translated">3.定义需求函数</h1><p id="cb06" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们首先需要建立数量和价格之间的关系——需求函数。这个需求函数是根据价格和数量之间的线性关系从“需求曲线”中估算出来的。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="6420" class="nn mm it nj b gy no np l nq nr"># demand curve<br/>sns.lmplot(x = "Price", y = "Quantity", <br/>data = beef, fig_reg = True, size = 4)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/8f123b4af6be7f1ff16e83a2e4d5f8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*sSGsmYr3IinoU0VKrLMKxg.png"/></div></figure><p id="79d6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了找到需求曲线，我们将拟合一个普通最小二乘(OLS)回归模型。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="bdc7" class="nn mm it nj b gy no np l nq nr"># fit OLS model<br/>model = ols("Quantity ~ Price", data = beef).fit()</span><span id="c625" class="nn mm it nj b gy ns np l nq nr"># print model summary<br/>print(model.summary())</span></pre><p id="3d6b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以下是回归结果，带有进一步分析所需的必要系数。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi od"><img src="../Images/aa637476c31f9588211a9e4f3eaac12c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*3a0WmuEzpObn99gj1UwSQg.png"/></div></figure><h1 id="87b0" class="ml mm it bd mn mo nu mq mr ms nv mu mv ki nw kj mx kl nx km mz ko ny kp nb nc bi translated">5.寻找利润最大化的价格</h1><p id="a440" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们正在寻找的系数来自上面的回归模型——截距和价格系数——来测量相应的销售量。我们现在可以将这些值代入等式 3。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="bc46" class="nn mm it nj b gy no np l nq nr"># plugging regression coefficients<br/>quantity = 30.05 - 0.0465 * price # eq (5)</span><span id="c3da" class="nn mm it nj b gy ns np l nq nr"># the profit function in eq (3) becomes<br/>profit = (30.05 - 0.0465 * price) * price - cost # eq (6)</span></pre><p id="2fa1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下一步是从一系列选项中找到我们想要的价格。下面的代码应该是直观的，但基本上我们在这里做的是计算每一个价格和相应的销售数量的收入。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="b899" class="nn mm it nj b gy no np l nq nr"># a range of diffferent prices to find the optimum one<br/>Price = [320, 330, 340, 350, 360, 370, 380, 390]</span><span id="ba14" class="nn mm it nj b gy ns np l nq nr"># assuming a fixed cost<br/>cost = 80</span><span id="c617" class="nn mm it nj b gy ns np l nq nr">Revenue = []</span><span id="68ca" class="nn mm it nj b gy ns np l nq nr">for i in Price:<br/>   quantity_demanded = 30.05 - 0.0465 * i<br/>   <br/>   # profit function<br/>   Revenue.append((i-cost) * quantity_demanded)</span><span id="1f8e" class="nn mm it nj b gy ns np l nq nr"># create data frame of price and revenue<br/>profit = pd.DataFrame({"Price": Price, "Revenue": Revenue})</span><span id="0bcd" class="nn mm it nj b gy ns np l nq nr">#plot revenue against price<br/>plt.plot(profit["Price"], profit["Revenue"])</span></pre><p id="4630" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果绘制价格和收入，我们可以直观地识别收入的峰值，并找到使收入位于曲线最高点的价格。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/3b555969e6612690c38b13bb144a7da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*ISyv1CF9izaptFrfyHVrng.png"/></div></figure><p id="d25a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此我们发现，当价格设定为 360 美元时，不同价格水平下的最大收益达到 3726 美元。</p><pre class="ks kt ku kv gt ni nj nk nl aw nm bi"><span id="7f22" class="nn mm it nj b gy no np l nq nr"># price at which revenue is maximum<br/>profit[profit['Revenue'] == profit[['Revenue'].max()]</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi of"><img src="../Images/02ea1073cf725eef5c97f4cdc881bf79.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/1*RoMm1N2yu1SJioqD6foYpg.png"/></div></figure><h2 id="26a0" class="nn mm it bd mn og oh dn mr oi oj dp mv lr ok ol mx lv om on mz lz oo op nb iz bi translated">总结和结论</h2><p id="4a4b" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">本文的目的是演示如何结合使用经济理论和统计建模来找到收入或利润最大化的价格。在最初的步骤中，我们定义了需求和利润函数，然后运行回归来找到需要输入利润/收入函数的参数值。最后，我们检查了不同价格水平下的收入，以获得相应的最大收入价格。</p></div></div>    
</body>
</html>