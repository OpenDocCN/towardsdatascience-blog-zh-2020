<html>
<head>
<title>Match Prediction in League of Legends Using Vanilla Deep Neural Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于香草深度神经网络的英雄联盟比赛预测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/match-prediction-in-league-of-legends-using-vanilla-deep-neural-network-7cadc6fce7dd?source=collection_archive---------18-----------------------#2020-04-18">https://towardsdatascience.com/match-prediction-in-league-of-legends-using-vanilla-deep-neural-network-7cadc6fce7dd?source=collection_archive---------18-----------------------#2020-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3d44" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解英雄联盟比赛预测模型，该模型通过其独特的输入功能显示约70%的准确性。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0424821618a899b23f29610c1b57c328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ruNAQM69nD7b1q1vpXdgxA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马克西姆·罗西诺尔在<a class="ae ky" href="https://unsplash.com/collections/1123297/esports-in-indonesia-(project-startup?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="57ba" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">为什么要研究电子竞技游戏中的获胜预测？</strong></h1><p id="e26e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">公众的第一个反应是钱，的确，也许钱可以通过一个足够成功的预测模型来赚，但也许这只是看着一个小画面。</p><p id="a404" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">解剖模型可以看到更大的画面。成功的胜利预测模型准确地告诉我们是什么促成了比赛的胜利。</p><p id="9c50" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，假设预测模型中使用的数据点之一是<em class="ms">球员身高</em>。如果通过预测模型显示，球队的平均身高越高，该队赢得比赛的可能性越大，那么我们可以从预测模型中得出与我们的信念相反的结论，<em class="ms">球员身高</em>实际上在赢得联赛比赛中至关重要！这可能会从根本上改变世界各地职业联赛电子竞技队的球探系统。</p><p id="38d7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你可能会问，为什么要首先关注电子竞技行业。嗯，在2019年的英雄联盟世界锦标赛中，<strong class="lt iu">4400万</strong>人同时观看了11月10日的决赛，<strong class="lt iu"> 1亿</strong>独立观众在线观看了这场赛事。这超过了当年超级碗的观众人数。随着这个行业越来越受欢迎，预计这个数字还会继续增长。</p><p id="cead" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">研究电子竞技背后的数字的最后一个原因是<strong class="lt iu">可获得的数据</strong>。关于这个话题存在一些争论，因为RiotApi(一种用于获取比赛数据的Api，通过《英雄联盟》的出版商RiotGames提供)提供的数据有限且不准确，这可能是大多数关于同一游戏类型的研究论文都基于《英雄联盟》的竞争对手DotA2的原因。但是，数据是免费的。与足球等其他传统运动相比，这是一个巨大的优势，在足球等传统运动中，有意义的数据只能通过像Opta这样的公司的昂贵订阅才能获得。</p><h1 id="f2e3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">电子竞技比赛预测的前期研究</h1><p id="0aee" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如前所述，很少有关于英雄联盟比赛预测的先前研究，但DotA2比赛预测的情况相反。由于这两款游戏属于同一类型，游戏玩法相似，这些研究值得探讨。</p><p id="0c2a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，论文<em class="ms"> Dota 2获胜预测</em>提供了一个具有73%准确性的预测器，使用了诸如偏移、匹配、协同和对抗等特征。<br/>另一篇论文<em class="ms">赢或不赢</em>提供了一个具有74%准确率的预测器，使用共现网络来揭示英雄协同数据，并使用逻辑回归来做最后的魔术。</p><p id="7211" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">尽管这些结果令人惊讶，但对这些先前的研究有一定的改进，可以应用于获得更好的结果。</p><p id="2544" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，两篇论文都将每个英雄视为输入中的一个单独的向量，或者在数据预处理过程中。这让你“考虑每个光芒四射和可怕的英雄对比赛结果的个人影响”，但也有对每个冠军训练预测模型过于狭隘的危险。以⁴为例，预测模型将无法把<em class="ms">或</em>视为一个拥有坦克和大量魔法伤害的冠军，而只是把<em class="ms">或</em>视为自己。它将错过定义单个冠军的特征，并且无法与其他类似的冠军进行归纳。</p><p id="18b6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第二，两篇论文都没有考虑到玩家控制英雄的技能。很明显，一个职业玩家控制一个英雄会比一个普通玩家控制同一个英雄对游戏结果产生更大的影响。因此，虽然英雄的影响力、协同效应和反选择都很重要，但玩家的技能也很重要。这可能是提高预测能力的附加特征。</p><h1 id="ab85" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据集</h1><p id="2898" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">RiotApi的问题是很难随时获得固定数量的比赛数据。有必要确定一个球员，然后浏览他的比赛历史，然后继续查看出现在他的比赛历史上的球员的比赛历史，以递归地收集比赛数据。</p><p id="f8ec" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">即使采集了数据，也必须经过<em class="ms">过滤</em>，以确保冠军的泳道位置标记正确。在超过一半的情况下，Riot错误地标记了冠军的车道位置，在顶车道标记了三个冠军，在中间车道标记了四个冠军，在bot车道标记了零个冠军，等等。</p><p id="c79d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">RiotApi还强制执行每2分钟100个请求的速率限制，加上损坏数据的高概率，这意味着我必须在自定义AWS EC2服务器上运行一个脚本几天，无休止地挖掘匹配数据。</p><p id="f870" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在我的研究中，我收集了1045个匹配数据，其中80%作为训练集，10%作为开发集，其余10%作为测试集。</p><h1 id="94d3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">特征</h1><p id="3bbf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我的模型与之前的研究的真正区别在于我对特征的选择。</p><p id="3ec7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我在模型中使用的特征是<strong class="lt iu">胜率</strong>。</p><p id="9cf0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">关于英雄联盟游戏的一个显而易见的事实是，一个由优秀玩家组成的团队控制强大的冠军将会获胜。在这里，成为一名“好球员”更具体地意味着球员擅长控制特定的冠军，因为球员必须能够匹配冠军的比赛风格，以最大限度地发挥冠军的潜力。</p><p id="d042" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">那么问题就变成了，有哪些数据在数字中表现出以下两个特征？</p><ol class=""><li id="337a" class="mt mu it lt b lu mn lx mo ma mv me mw mi mx mm my mz na nb bi translated">一个球员对某个冠军的控制有多好</li><li id="6322" class="mt mu it lt b lu nc lx nd ma ne me nf mi ng mm my mz na nb bi translated">当前元中的冠军有多强</li></ol><p id="29aa" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第一个特征由玩家与特定冠军的胜率来捕捉。例如，一个只玩名为<em class="ms">奈特利</em>的冠军的玩家在玩那个冠军时很可能会有很高的胜率。</p><p id="455a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第二个特征是由当前元/补丁中特定冠军的胜率捕获的。众所周知，一个强有力的冠军有很高的胜率(通常等于或大于53%，当从所有级别合计时)。</p><p id="cc07" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们为每个队中的每个球员收集这些数据，因此神经网络的每个输入向量将有20个数据点大，如下所示:</p><p id="dc39" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi">[0.5114, 0.52, 0.5275, 0.619, 0.5074, 0.727, 0.4999, 0.517, 0.5187, 0.659, 0.5034, 0.0, 0.5005, 0.5, 0.4448, 0.257, 0.5065, 0.286, 0.5199, 0.544]</p><p id="3c81" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">结果是我有一个只有20大的输入特征。与先前研究中使用的输入特征相比，这是非常小的。</p><blockquote class="nh ni nj"><p id="97a2" class="lr ls ms lt b lu mn ju lw lx mo jx lz nk mp mc md nl mq mg mh nm mr mk ml mm im bi translated">每一个<em class="it"> 2*i </em> | 0≤i≤9元素都是当前元/补丁中的冠军胜率，<em class="it"> 1+i </em> | 0≤i≤9是玩家控制那个特定冠军时的胜率。</p></blockquote><h1 id="bc44" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">模型和结果</h1><h2 id="cb4c" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">模型</h2><p id="5dcf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如题，我用的是香草深度神经网络，意思是有四个隐层的全连接前馈深度神经网络。<br/>我使用了<a class="ae ky" href="http://tflearn.org" rel="noopener ugc nofollow" target="_blank"> tflearn库</a>来构建模型，包含了批量训练。尝试了各种参数和超参数，包括隐藏层数。虽然四个隐藏层看起来过多，但它似乎产生了最好的结果，尽管两个或三个隐藏层的性能差别很小。我不会透露确切的参数/超参数，因为通过设置自己的参数应该很容易重现结果。</p><h2 id="2826" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">结果</h2><p id="2a46" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">神经网络的性能取决于参数/超参数，但最具代表性的数字如下:</p><p id="4650" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">训练精度:0.7255 <br/>验证精度:0.6905 <br/>测试精度:0.7033</p><p id="11f8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">此外，由于在输出层使用了softmax激活，输出向量将网络在比赛中获胜或失败的“置信度”显示为大小为2的向量(例如，[0.317，0.683]将显示模型认为比赛失败)。输出向量中的数字并不直接转化为赢或输的“概率”,特别是因为使用了批量训练，但它们确实给出了每个事件可能性的一般意义。因此，我收集了所有比赛，其中模型有0.8或更多的“信心”认为这场比赛会取得胜利，然后得到了76.76%的准确率:对于某些比赛，我们可以非常确定它的结果。</p><h1 id="8972" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">很大的改进空间</h1><p id="51e8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个模型仍然很有希望的是有很大的改进空间，因此，有可能获得更高的匹配预测准确性。</p><h2 id="2e86" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">红边/蓝边</h2><p id="5c9b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当进入英雄联盟比赛时，每个玩家被分配到红方或蓝方。传统上，胜率会因你站在哪一边而有所不同，而在当前的补丁中，胜率没有太大的差异(蓝边的胜率为50.3%)，这是一个随补丁而变化的数字，可以考虑在内。⁵</p><h2 id="4187" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">冠军协同效应</h2><p id="1886" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">协同是之前研究中包含的特征之一，单独负责<em class="ms">记录的74%预测准确率赢或不赢。⁵ </em>想出一种方法来准确反映冠军协同效应，并将其作为输入特征，可以提高模型的准确性。</p><h2 id="1c7c" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">数据的细化</h2><p id="a2d6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在当前用于培训/开发/测试集的数据中，有些数据是不可能找到的，因此只能靠运气。这些归功于我大量使用<a class="ae ky" href="http://op.gg" rel="noopener ugc nofollow" target="_blank"> op.gg </a>和其他英雄联盟分析网站来收集特定玩家的冠军统计数据。<br/>例如，如果在预处理数据时，python爬行脚本找不到某个玩家的冠军特定胜率，则该胜率会自动分配0.5的值。这是一个合理的选择，因为在大多数情况下，特定冠军的胜率不会出现，因为缺乏特定冠军的使用，这意味着玩家不擅长使用冠军的可能性与他/她擅长使用冠军的可能性一样大。<br/>随着数据更加精确，漏洞更少，这种神经网络模型的性能可能会提高。</p><h2 id="f2c2" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">球员的形式</h2><p id="3ae0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">玩家之间的一个普遍现象是，有时候玩家会陷入“翻滚”这意味着当一个球员已经连续赢了几场比赛，他觉得他很可能在下一场比赛中再次获胜，反之亦然。在职业锦标赛中，根据球员的表现，一支球队可能会有非常不同的表现，这几乎是一个既定的事实。例如，2020年LCK之春的KT Rolster在本赛季的大部分时间里表现极差，但在比赛的最后两周表现出非凡的实力，这是因为球员和球队的“状态”有所改善。这也可能是影响匹配预测的附加特征。</p><h2 id="0921" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">冠军作文</h2><p id="f626" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">与冠军协同非常相似，但也有一点不同，冠军组合指的是比赛前一支球队的结构。例如，蓝队可能有一个治疗冠军，两个坦克冠军，两个经销商冠军，这取决于补丁/元可以影响该队的胜利可能性。另一个区别可能是“早期”冠军和“后期”冠军。这些标签根据冠军何时对游戏产生最大影响来区分冠军，因此可能是代表团队组成的另一种方式。</p><h1 id="2703" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">现在怎么办？</h1><p id="3334" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我有信心，用更多的特征和更好的数据来改进预测模型将会增强模型的预测能力，也许会超过先前的一项研究设定的74%的基线。</p><p id="bf40" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">希望有了更先进的预测模型，我们可以制定最佳团队构成的指导方针，以及在寻找未来职业球员时具体要寻找什么。通过提出一个成功的模型并检查权重，我们可以潜在地洞察到与团队组成相比，对冠军的掌握有多重要，等等。这不仅会影响职业球队的球探系统，还会影响他们在锦标赛中的策略。</p><p id="06b1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为我现在在军队服役，所以我能多快/多有效地进行这项研究是有限制的。但我还是会这样做，并继续发布我的收获。</p><h2 id="93e4" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">后续步骤:</h2><p id="2a4f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在AWS上学习和设置DynamoDB。<br/>创建脚本文件，在DynamoDB上建立我自己的数据库。<br/>为RiotApi注册开发Api密钥。<br/>学习如何表现冠军协同效应和组合。<br/>等。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="b4f1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">[1]裴，安妮，<em class="ms">“这个电竞巨头吸引的观众比超级碗还多，预计会变得更大”，</em>https://www . CNBC . com/2019/04/14/league-of-legends-gets-more-viewers-than-Super-Bowl whats-coming-next . html<br/>【2】金凯德，尼古拉斯，<em class="ms">“DOTA 2赢预测。”</em> (2015)。<br/>【3】卡亚纳拉曼，考希克。<em class="ms">“赢还是不赢？决定DotA 2比赛结果的预测模型。”</em> (2015)。<br/>【4】金凯德。<br/>【5】卡利亚纳拉曼。<br/>【6】红色vs蓝色图形(2020 . 04 . 17)<a class="ae ky" href="https://www.leagueofgraphs.com/rankings/blue-vs-red/na" rel="noopener ugc nofollow" target="_blank">https://www.leagueofgraphs.com/rankings/blue-vs-red/na</a></p></div></div>    
</body>
</html>