<html>
<head>
<title>Linear Programming using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python进行线性编程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/linear-programming-using-python-priyansh-22b5ee888fe0?source=collection_archive---------2-----------------------#2020-04-26">https://towardsdatascience.com/linear-programming-using-python-priyansh-22b5ee888fe0?source=collection_archive---------2-----------------------#2020-04-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8191" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一步一步的介绍使用Python中的纸浆库公式化和解决线性优化问题。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/14a22ee6d85d570823b8b10b5430d14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VQf2xuLP0jkNp5bd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安托万·道特里在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="ac11" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">文章目的</strong></h1><p id="55d7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文的主要目的是向读者介绍一种最简单也是最常用的工具，使用PuLP库在Python中编写线性优化问题的代码。它还对优化和线性编程进行了快速介绍，这样，即使那些对优化、规范分析或运筹学知之甚少或一无所知的读者也可以很容易地理解文章的上下文以及文章将要讨论的内容。我们也将触及如何用数学符号来表达一个LP。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/a38110069a3d313ec47bd22695553b3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eXvcnUaD_EKrnkPM"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@diggitymarketing?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">digity Marketing</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="be57" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">先决条件</h1><p id="265e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu"> <em class="mo">给定的前提条件有是好的，没有必要。</em>T13】</strong></p><ol class=""><li id="7fb2" class="mp mq it lt b lu mr lx ms ma mt me mu mi mv mm mw mx my mz bi translated">Python中的基本编码知识。</li><li id="cc44" class="mp mq it lt b lu na lx nb ma nc me nd mi ne mm mw mx my mz bi translated">对线性规划、目标函数、约束和决策变量有基本的了解。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/560ef27fbd9e842d1e7260addf354e67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Baq2b315B5ROeEyb"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@helloquence?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">hello queue</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="59f3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">优化简介</strong></h1><blockquote class="ng nh ni"><p id="e220" class="lr ls mo lt b lu mr ju lw lx ms jx lz nj nk mc md nl nm mg mh nn no mk ml mm im bi translated">优化是通过控制约束环境中的一组决策来寻找给定目标的最大值或最小值的过程。简而言之，<a class="ae ky" href="https://www.igi-global.com/dictionary/cuckoo-search-for-optimization-and-computational-intelligence/21383" rel="noopener ugc nofollow" target="_blank">优化问题包括通过从允许的集合中系统地选择输入值并计算函数值来最大化或最小化真实函数。</a></p></blockquote><p id="f93a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">真实函数(目标函数)可以是从仓库向客户交付货物的成本，在给定有限数量的驾驶员和时间(约束)的情况下，我们希望通过选择最优路线和最优车辆组(决策变量)来最小化该成本。这是运筹学和最优化领域中路线最优化的一般情况。</p><p id="fc87" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">计算机科学领域的另一个非常著名的问题是TSP或旅行推销员问题，其中我们希望找到最短的路线或最便宜的路线来穿越所有城市，给定它们之间的成对距离。在这种情况下，我们的目标函数变成最小化旅行的总距离(或总成本),决策变量变成二元变量，告知旅行者是否应该从城市I旅行到城市j，并且应用约束，使得旅行者覆盖所有城市并且不会两次访问一个城市。我们今天还将处理一个更简单但类似的问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/577ff2e47841cd9d7e88c04799c7c757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ATI8aoLetP8Mi-Q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">斯蒂芬·门罗在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="28ef" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">线性规划导论</h1><p id="5367" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">线性规划基本上是最优化的一个子集。线性规划或线性优化是一种优化技术，其中我们试图使用一组变化的决策变量为线性约束系统找到线性目标函数的最优值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/426132d1cd6958bac5a79d261210cf58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ErVUxfh0aGd0vqDtyJ8TxQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由Inductiveload —自有作品，公共领域，【https://commons.wikimedia.org/w/index.php?curid=6666051 T4】</p></figure><h1 id="45f5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">理解手头的问题</h1><p id="3fbb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您希望将货物从两个不同的仓库运送到四个不同的客户手中的成本降到最低。每个仓库的供应量是有限的，每个客户都有一定的需求。我们需要通过从给定的仓库装运产品来满足客户的需求，这样运输的总成本是最低的，并且我们还能够使用每个仓库可用的有限供应来满足客户的需求。</p><h1 id="2349" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据</h1><p id="92d0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设这家公司是只供应鞋类的crocs，这里的客户是它的经销商，他们需要大量的Crocs。供应的产品在性质上是一致的。</p><ol class=""><li id="5145" class="mp mq it lt b lu mr lx ms ma mt me mu mi mv mm mw mx my mz bi translated"><em class="mo">仓库i </em>到<em class="mo">客户j </em>的运输矩阵成本如下。每个值也可以表示为Cij，表示从仓库I运送到客户j的成本C。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/27658c8bf79d8ebcfff4f68a36e02deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pNF1FGt82jC-t7rgWDIadg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">成本矩阵</p></figure><p id="fbf3" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">2.客户需求和仓库可用性如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/efb10d8b7db5a461df75d18d8a16a236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3VQ2wm5ICw3Y8LERWSX1-Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">需求(必需)和供应(可用性)矩阵</p></figure><h1 id="1005" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">公式化问题</h1><p id="5938" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们开始用数学方程式来表述这个问题。我们需要确定我们的LP的3个主要组成部分，即</p><h2 id="eb46" class="nt la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">1)决策变量</h2><p id="dee1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们将我们的决策变量定义为Xij，它基本上告诉我们X个产品应该从仓库I交付给客户j。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/0c808bff7b0ea00cbfac18c8333c83b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R2Ka9rUBa_jmczjlFLf6Gg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">决策变量定义</p></figure><h2 id="f6db" class="nt la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">2)目标函数</h2><p id="164d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们的目标函数被定义为运输这些产品的总成本，我们需要最小化这个总成本。因此，目标函数定义为:-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/5f4790b59a4956bf88614faa99dfa42e.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/0*9KQpIGu4pQer6TII.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">目标函数</p></figure><h2 id="5057" class="nt la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">3)制约因素</h2><p id="1c4a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">对于给定的问题，我们将有两种主要类型的约束:-</p><p id="88c6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated"><strong class="lt iu"> 3.1)仓库约束条件或供应约束条件:</strong>这些约束条件基本上表示每个仓库在所有4个客户之间完成的总供应量小于或等于该仓库的最大可用性/容量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/03ad10e17b23d4089592235f63601841.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*sXTrgh1q6h0mpQCrpWJj4A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">供应限制</p></figure><p id="571e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated"><strong class="lt iu"> 3.2)客户约束或需求约束:</strong>这些约束基本上是说，对于每个客户，跨两个仓库完成的供应应该等于(或大于等于)该客户的需求。我们可以用≥代替=因为我们的目标函数总是试图最小化成本，因此永远不会提供超过需要的。这样做是因为在一些优化问题中，我们可能无法通过严格的等式约束得到可行的解决方案。虽然，这里的情况并非如此。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2a718cd18bdb074f88d5af667eacbcf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*yi2G3GORtU6ZqFYkDoQVWw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">需求约束</p></figure><blockquote class="ng nh ni"><p id="d564" class="lr ls mo lt b lu mr ju lw lx ms jx lz nj nk mc md nl nm mg mh nn no mk ml mm im bi translated">问题的表述到此结束。我们现在进一步理解如何用Python来编码这个问题，并找到供应货物的最小成本。我们还将获得最佳答案，该答案将建议应该由哪个仓库向哪个客户供应多少货物。</p></blockquote></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="2b13" class="kz la it bd lb lc oq le lf lg or li lj jz os ka ll kc ot kd ln kf ou kg lp lq bi translated"><strong class="ak">纸浆快速入门</strong></h1><blockquote class="ng nh ni"><p id="e7e9" class="lr ls mo lt b lu mr ju lw lx ms jx lz nj nk mc md nl nm mg mh nn no mk ml mm im bi translated">PuLP是一个用Python编写的免费开源软件。它用于将优化问题描述为数学模型。然后，PuLP可以调用众多外部LP解算器(CBC、GLPK、CPLEX、Gurobi等)中的任何一个来求解该模型，然后使用python命令来操作和显示解决方案。请务必阅读它的文档，它非常有用。以下链接也有助于您了解如何在Python环境中安装库PuLP和任何所需的求解器。</p><p id="0208" class="lr ls mo lt b lu mr ju lw lx ms jx lz nj nk mc md nl nm mg mh nn no mk ml mm im bi translated">来源:<a class="ae ky" href="https://coin-or.github.io/pulp/main/installing_pulp_at_home.html" rel="noopener ugc nofollow" target="_blank">https://coin-or . github . io/pulp/main/installing _ pulp _ at _ home . htm</a></p></blockquote><h1 id="066a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">钻研代码</h1><p id="a12c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">你可以在下面的Github repo中找到将在下面解释的完整代码(Jupyter notebook)。</p><div class="ov ow gp gr ox oy"><a href="https://github.com/mnips/Linear-Programming-Python-1" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">mni PS/线性编程-Python-1</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">使用Python (PuLP)进行线性编程的快速指南。-mni PS/线性编程-Python-1</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">github.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ks oy"/></div></div></a></div><h1 id="0a55" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">导入所需的库</h1><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="e552" class="nt la it po b gy ps pt l pu pv">from pulp import *<br/>import pandas as pd<br/>import numpy as np</span></pre><p id="f9a2" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">第一条语句从PuLP库中导入我们将使用的所有必需的函数。Pandas是一个数据操作库，Numpy是一个主要用于在Python中处理多维数组的库。我通常只导入这些库，因为它们在几乎所有的数据分析项目中都会用到。</p><h1 id="7629" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">数据定义</h1><p id="8e4c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们定义数据并将其分配给变量，然后这些变量可用于输入模型、目标函数和约束条件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="82a4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">所有变量都是直观的，易于解释。</p><h1 id="7ed5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">模型初始化</h1><p id="d312" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们可以通过调用<code class="fe py pz qa po b">LpProblem()</code>函数来初始化模型。函数中的第一个参数表示我们想要给模型起的名字。第二个参数告诉我们的模型，我们是否希望最小化或最大化我们的目标函数。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="032c" class="nt la it po b gy ps pt l pu pv">model = LpProblem("Supply-Demand-Problem", LpMinimize)</span></pre><p id="7ba9" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">如果你想最大化你的目标函数，你可以使用<code class="fe py pz qa po b">LpMaximize</code>。</p><h1 id="765b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">定义决策变量</h1><p id="244d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可以在您的模型中定义变量名，以使您的模型对于稍后阅读它的人来说看起来更直观。因此，我们为我们的决策变量创建指数，这将在后面定义。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="1c2e" class="nt la it po b gy ps pt l pu pv">variable_names = [str(i)+str(j) for j in range(1, n_customers+1) for i in range(1, n_warehouses+1)]</span><span id="c33b" class="nt la it po b gy qb pt l pu pv">variable_names.sort()</span><span id="5e21" class="nt la it po b gy qb pt l pu pv">print("Variable Indices:", variable_names)</span></pre><p id="bbd4" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">输出如下所示:-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qc"><img src="../Images/f116a00c1e560c4695441cdfa11b0136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F-tu2VL05nd-smXoCVgc-w.png"/></div></div></figure><p id="3f0a" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">此外，我们使用<code class="fe py pz qa po b">LpVariables.matrix</code>来定义变量。在定义决策变量时，我们也可以使用字典或单例变量，但在这种情况下，这似乎是最好的方法，因为对于更大的问题，仓库或客户的数量可能会增加。我们将决策变量命名为<code class="fe py pz qa po b">X</code>，并使用上面定义的索引作为第二个参数，这有助于PuLP理解我们想要一个2*4的矩阵。第三个参数是一个类别，它告诉我们决策变量只能取<code class="fe py pz qa po b">Integer</code>值。默认为<code class="fe py pz qa po b">Continuous</code>。这也告诉我们，我们的<strong class="lt iu">线性规划</strong>问题其实是一个<strong class="lt iu">整数LP </strong>。如果我们还有可以取连续值的决策变量，我们称之为<strong class="lt iu"> MILP </strong>或<strong class="lt iu">混合整数LP </strong>。在第四个也是最后一个参数中，我们设置了一个<code class="fe py pz qa po b">0</code>的<code class="fe py pz qa po b">lower bound</code>，表示我们的决策变量≥ 0。为了利用Numpy数组操作，我们可以将决策变量转换为Numpy数组。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="4a2c" class="nt la it po b gy ps pt l pu pv">DV_variables = LpVariable.matrix("X", variable_names, cat = "Integer", lowBound= 0 )</span><span id="2296" class="nt la it po b gy qb pt l pu pv">allocation = np.array(DV_variables).reshape(2,4)</span><span id="9b07" class="nt la it po b gy qb pt l pu pv">print("Decision Variable/Allocation Matrix: ")</span><span id="a829" class="nt la it po b gy qb pt l pu pv">print(allocation)</span></pre><p id="6a84" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">输出如下所示:-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/f4e65da4401d329747d628f94aacf20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*VePARE0jqOE-JwhEjywLNQ.png"/></div></figure><h1 id="a23e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">目标函数</h1><p id="4017" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在让我们定义我们的目标函数，它基本上是提供产品的总成本。换句话说，它是成本矩阵和上面定义的分配矩阵的和积。我们可以如下定义我们的目标函数。<code class="fe py pz qa po b">lpSum</code>在Python中与<code class="fe py pz qa po b">sum</code>函数交替使用，因为它在执行与PuLP变量相关的操作时速度更快，并且还能很好地汇总变量。我们使用<code class="fe py pz qa po b">+=</code>速记操作符进一步将目标函数添加到模型中。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="15bc" class="nt la it po b gy ps pt l pu pv">obj_func = lpSum(allocation*cost_matrix)</span><span id="0a50" class="nt la it po b gy qb pt l pu pv">print(obj_func)</span><span id="5d27" class="nt la it po b gy qb pt l pu pv">model +=  obj_func</span><span id="188b" class="nt la it po b gy qb pt l pu pv">print(model)</span></pre><p id="5c7c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">让我们看看我们的模型现在是什么样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/6db15d187f49b46c7d48ef876c9d70d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fcCLC2o9jJyfxqPN7svaYQ.png"/></div></div></figure><p id="5a5e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">正如我们所看到的，我们已经给我们的问题起了一个名字。在目标函数中，我们试图最小化成本，并且我们所有的决策变量都就位了。最好在创建模型时打印出来，以便了解我们是否遗漏了什么。现在我们继续向我们的模型添加约束。</p><h1 id="15b2" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">限制</h1><p id="a87b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们需要添加两种主要类型的约束:-</p><h2 id="2e20" class="nt la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">1)仓库或供应限制</h2><p id="c749" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如前所述，这些约束表明，对于一个给定的仓库或<code class="fe py pz qa po b">i-th</code>仓库，在所有客户之间完成的总分配或供应的产品应该不违反该仓库的可用性。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="47d6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">此约束的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/56ef70b3431b3cf7a2deb85f095b019c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*eg0d_ZS0ogtV4UueUmRmIA.png"/></div></figure><h2 id="2849" class="nt la it bd lb nu nv dn lf nw nx dp lj ma ny nz ll me oa ob ln mi oc od lp oe bi translated">2)客户或需求约束</h2><p id="e971" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这些约束表明，为每个客户或<code class="fe py pz qa po b">j-th</code>客户完成的分配应该满足该客户的需求。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="a714" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">此约束的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/dd4a4d3f80bbc1be57f82977434259c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*ji7b5C4iikZ5sCDSkRlD9Q.png"/></div></figure><h1 id="da4a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">检查模型</h1><p id="677f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在我们已经完成了所有需要的公式，让我们检查模型看起来怎么样。这可以通过打印模型来实现:<code class="fe py pz qa po b">print(model)</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qh"><img src="../Images/432e2ec5cadd8e41651d05cf2e956215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L9qBrjd058OgqrtlPWVvYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">完全优化模型</p></figure><p id="abe3" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">我们还可以将这个模型保存在一个<code class="fe py pz qa po b">.lp</code>文件中，任何不熟悉我们模型的人都可以参考这个文件。它基本上就像一个文本文件，包含上面打印的优化模型的确切细节。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="a228" class="nt la it po b gy ps pt l pu pv">model.writeLP(“Supply_demand_prob.lp”)</span></pre><h1 id="c9ac" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">运行模型并检查状态</h1><p id="3444" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">既然我们已经检查了模型看起来很好，我们现在应该运行模型并检查我们是否得到了问题的可行/最优解决方案。默认情况下，纸浆使用CBC解算器，但我们也可以启动其他解算器，如GLPK，古罗比等。我已经明确地在这里调用了CBC。类似地，我们可以调用任何其他求解器来代替CBC。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="94a8" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">上面代码的输出是<code class="fe py pz qa po b">Optimal</code>，它告诉我们我们的模型已经能够找到问题的最优解。</p><h1 id="8104" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">输出目标函数值和决策变量值</h1><p id="7f66" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在让我们看看公司通过打印出我们的问题的最优解(即目标函数值)而必须承担的最小成本，并看看将产品从仓库运送到客户的最优安排。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="feba" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">输出是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/c8f9d9160c9172005e19f609dc1fdf6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*WhX1bADlbCkpntfrped6DA.png"/></div></figure><p id="ea34" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">此外，我们可以检查每个仓库需要供应多少产品，以及每个仓库需要多少容量。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pw px l"/></div></figure><p id="b4b6" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/d37add304917487507153c59650c3feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*0w_GS9rl9YVl740-xilp4A.png"/></div></figure><p id="dd2f" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">因此，我们在2号仓库只需要45000件，而不是80000件。虽然在这种情况下非常幼稚，但是我们可以从优化问题的输出中做很多类似的分析，做出相关的商业决策。比如，如果每个仓库都有运营成本。这个供求问题可以有许多不同的形式。探索！</p><h1 id="7aee" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">摘要</h1><p id="f09c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们简要地看了最优化和线性规划。我们还学习了如何用数学方程来表述一个问题。此外，我们通过利用Python和PuLP库并分析其结果，深入研究了编码LP问题。就这样，我们到了这篇文章的结尾。希望你觉得这有用！</p><p id="d63c" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated">我还要感谢我亲爱的朋友Karan Bhanot，他通过他的文章激励了我，也激励我与世界分享我的知识！</p><p id="ec74" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma nk mc md me nm mg mh mi no mk ml mm im bi translated"><strong class="lt iu"> <em class="mo">注:</em> </strong> <em class="mo">我用过Python 3 . 7 . 6版和纸浆2.1版。您没有必要使用相同的版本，但有时由于PuLP库中的一些更新，可能会有微小的差异导致错误(主要是由于语法变化)，因此将此作为快速注释添加进来。</em></p></div></div>    
</body>
</html>