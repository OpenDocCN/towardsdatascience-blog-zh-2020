<html>
<head>
<title>Z-score for anomaly detection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常检测的 z 分数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/z-score-for-anomaly-detection-d98b0006f510?source=collection_archive---------5-----------------------#2020-09-03">https://towardsdatascience.com/z-score-for-anomaly-detection-d98b0006f510?source=collection_archive---------5-----------------------#2020-09-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/87eec1b4102214f0c342cf6e7cf5301e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B5i45Is-mQKGD64e"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">内森·希维利在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="2176" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">小块数据科学</h2></div></div><div class="ab cl ky kz hx la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="im in io ip iq"><p id="ede3" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">大多数时候，我会写一些关于数据科学主题的较长的文章，但最近我一直在考虑围绕特定的概念、算法和应用程序写一些小文章。这是我在这个方向上的第一次尝试，希望人们会喜欢这些作品。</p><p id="11b1" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在今天的“小话题”中，我写的是在<strong class="lh jk">异常检测</strong>背景下的 Z 分数。</p><p id="b5d6" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">异常检测是一个识别需要检查的意外数据、事件或行为的过程。这是数据科学中一个成熟的领域，有大量算法可以根据数据类型和业务环境来检测数据集中的异常。Z-score 可能是最简单的算法，可以快速筛选候选人进行进一步检查，以确定他们是否可疑。</p><p id="3d9c" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk">什么是 Z 分数</strong></p><p id="d951" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">简单地说，Z 得分是一种统计度量，它告诉你一个数据点离数据集的其余部分有多远。用一个更专业的术语来说，Z-score 表示一个给定的观察值距离平均值有多少标准偏差。</p><p id="08dd" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">例如，Z 值为 2.5 意味着数据点距离平均值有 2.5 个标准偏差。由于它远离中心，因此被标记为异常值/异常值。</p><p id="e7e5" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk">它是如何工作的？</strong></p><p id="70a6" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">z 得分是一种参数测量方法，它采用两个参数—平均值和标准差。</p><p id="d2d0" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">一旦计算出这两个参数，就很容易找到数据点的 Z 值。</p><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mb"><img src="../Images/9196f2437f3695e19ad28748cdf68e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*DCpleGiHnUbN74hAZozK0w.png"/></div></div></figure><p id="a968" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">注意，平均值和标准偏差是针对整个数据集计算的，而<em class="mg"> x </em>代表每一个数据点。这意味着，每个数据点都有自己的 z 值，而均值/标准差在任何地方都保持不变。</p><p id="6012" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk">示例</strong></p><p id="55e5" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">下面是 Z-score 的 python 实现，带有几个样本数据点。我会在每一行代码中添加注释来解释发生了什么。</p><pre class="mc md me mf gt mh mi mj mk aw ml bi"><span id="b734" class="mm mn jj mi b gy mo mp l mq mr"># import numpy<br/>import numpy as np</span><span id="f0a2" class="mm mn jj mi b gy ms mp l mq mr"># random data points to calculate z-score<br/>data = [5, 5, 5, -99, 5, 5, 5, 5, 5, 5, 88, 5, 5, 5]</span><span id="d9ae" class="mm mn jj mi b gy ms mp l mq mr"># calculate mean<br/>mean = np.mean(data) </span><span id="c019" class="mm mn jj mi b gy ms mp l mq mr"># calculate standard deviation<br/>sd = np.std(data)</span><span id="2ad5" class="mm mn jj mi b gy ms mp l mq mr"># determine a threhold<br/>threshold = 2</span><span id="2047" class="mm mn jj mi b gy ms mp l mq mr"># create empty list to store outliers<br/>outliers = []</span><span id="c99b" class="mm mn jj mi b gy ms mp l mq mr"># detect outlier<br/>for i in data: <br/>    z = (i-mean)/sd # calculate z-score<br/>    if abs(z) &gt; threshold:  # identify outliers<br/>        outliers.append(i) # add to the empty list</span><span id="cf66" class="mm mn jj mi b gy ms mp l mq mr"># print outliers    <br/>print("The detected outliers are: ", outliers)</span></pre><figure class="mc md me mf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mt"><img src="../Images/8b11101b36bf52c9654a1b671bb70c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*LVzGtQ4NnFxEEmHW-VTucQ.png"/></div></div></figure><p id="dbc7" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lh jk">注意事项和结论</strong></p><p id="c917" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">如果你研究这些数据，你会注意到一些事情:</p><ul class=""><li id="b04a" class="mu mv jj lh b li lj ll lm lo mw ls mx lw my ma mz na nb nc bi translated">有 14 个数据点，Z-score 正确检测到 2 个异常值[-99 和 88]。然而，如果您从列表中删除五个数据点，它只检测到一个异常值[-99]。这意味着您需要有一定数量的数据大小，Z-score 才能工作。</li><li id="67a0" class="mu mv jj lh b li nd ll ne lo nf ls ng lw nh ma mz na nb nc bi translated">在大型生产数据集中，如果数据呈正态分布(也称为。高斯分布)。</li><li id="95a6" class="mu mv jj lh b li nd ll ne lo nf ls ng lw nh ma mz na nb nc bi translated">我使用了一个任意的阈值 2，超过这个阈值，所有的数据点都被标记为异常值。经验法则是使用 2、2.5、3 或 3.5 作为阈值。</li><li id="b6d2" class="mu mv jj lh b li nd ll ne lo nf ls ng lw nh ma mz na nb nc bi translated">最后，Z-score 对极值很敏感，因为均值本身对极值很敏感。</li></ul><p id="d987" class="pw-post-body-paragraph lf lg jj lh b li lj kk lk ll lm kn ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">希望这有用，请随时通过<a class="ae jg" href="https://twitter.com/DataEnthus" rel="noopener ugc nofollow" target="_blank"> Twitter </a>联系。</p></div></div>    
</body>
</html>