<html>
<head>
<title>The Right Way to Access a Dictionary</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">查阅字典的正确方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-right-way-to-access-a-dictionary-2270e936443e?source=collection_archive---------22-----------------------#2020-08-19">https://towardsdatascience.com/the-right-way-to-access-a-dictionary-2270e936443e?source=collection_archive---------22-----------------------#2020-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c2a8" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON 词典指南</h2><div class=""/><div class=""><h2 id="f837" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">小心点！你可能做错了</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0ce2b9c9683f1eef7327d505dc82d47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uj5sS1NIeBPvnJ9S"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">图片由<a class="ae lh" href="https://unsplash.com/@videmusart" rel="noopener ugc nofollow" target="_blank"> Syd Wachs </a>在<a class="ae lh" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="92b8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在用 Python 编程时，字典是现成可用的数据结构之一。</p><h1 id="ca41" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">在我们开始之前，什么是字典？</h1><p id="5a4d" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">Dictionary 是一个无序和无序的 Python 集合，它将惟一的键映射到一些值。在 Python 中，字典是用花括号<code class="fe nb nc nd ne b">{}</code>写的。键与键之间用冒号<code class="fe nb nc nd ne b">:</code>隔开，每个键-值对用逗号<code class="fe nb nc nd ne b">,</code>隔开。下面是用 Python 声明字典的方法。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="d1d4" class="nj mf it ne b gy nk nl l nm nn">#A dictionary containing basketball players with their heights in m<br/>playersHeight = {"Lebron James": 2.06,<br/>                 "Kevin Durant": 2.08, <br/>                 "Luka Doncic": 2.01,<br/>                 "James Harden": 1.96}</span></pre><p id="76ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们已经创建了字典，但是，如果我们不能再次检索数据，这对我们有什么好处呢？这是很多人做错的地方。我应该承认，不久前我也是其中之一。当我意识到优势后，我再也不会回头了。这就是为什么我有动力与你们分享它。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="6a97" class="me mf it bd mg mh nv mj mk ml nw mn mo ki nx kj mq kl ny km ms ko nz kp mu mv bi translated">错误的方式</h1><p id="3261" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">众所周知的，或者我应该说是传统的在字典中访问一个值的方法是通过引用它在方括号中的键名。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="d136" class="nj mf it ne b gy nk nl l nm nn">print(playersHeight["Lebron James"]) #print 2.06<br/>print(playersHeight["Kevin Durant"]) #print 2.08<br/>print(playersHeight["Luka Doncic"]) #print 2.01<br/>print(playersHeight["James Harden"]) #print 1.96</span></pre><p id="af65" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一切都很好，对吗？没那么快！如果你输入一个字典里没有的篮球运动员的名字，你认为会发生什么？仔细看</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="dc26" class="nj mf it ne b gy nk nl l nm nn">playersHeight["Kyrie Irving"] #KeyError 'Kyrie Irving'</span></pre><p id="fe0c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，当您想要访问字典中不存在的键值时，将会导致 KeyError。这可能会很快升级为一个大问题，尤其是当你正在构建一个大项目的时候。不要烦恼！当然有一两种方法可以解决这个问题。</p><blockquote class="oa ob oc"><p id="3bc0" class="li lj od lk b ll lm kd ln lo lp kg lq oe ls lt lu of lw lx ly og ma mb mc md im bi translated"><em class="it">使用 If </em></p></blockquote><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="2de9" class="nj mf it ne b gy nk nl l nm nn">if "Kyrie Irving" is in playersHeight:<br/>    print(playersHeight["Kyrie Irving"])</span></pre><blockquote class="oa ob oc"><p id="7f95" class="li lj od lk b ll lm kd ln lo lp kg lq oe ls lt lu of lw lx ly og ma mb mc md im bi translated"><em class="it">使用 Try-Except </em></p></blockquote><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="c081" class="nj mf it ne b gy nk nl l nm nn">try:<br/>    print("Kyrie Irving")<br/>except KeyError as message:<br/>    print(message) #'Kyrie Irving'</span></pre><p id="391d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这两个代码片段运行起来都没有问题。现在，看起来还可以，我们可以容忍写更多的行来处理可能的 KeyError。然而，当你写的代码是错误的时候，它会变得很烦人。</p><p id="6288" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">幸运的是，有更好的方法来做到这一点。不是一个，而是两个更好的方法！系好安全带，准备好！</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="7f09" class="me mf it bd mg mh nv mj mk ml nw mn mo ki nx kj mq kl ny km ms ko nz kp mu mv bi translated">正确的方式</h1><blockquote class="oa ob oc"><p id="6f47" class="li lj od lk b ll lm kd ln lo lp kg lq oe ls lt lu of lw lx ly og ma mb mc md im bi translated"><em class="it">使用 get()方法</em></p></blockquote><p id="f7e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用 get 方法是处理字典时最好的选择之一。这个方法有两个参数，第一个是必需的，第二个是可选的。然而，为了发挥<code class="fe nb nc nd ne b">get()</code>方法的全部潜力，我建议您填充这两个参数。</p><ul class=""><li id="ec62" class="oh oi it lk b ll lm lo lp lr oj lv ok lz ol md om on oo op bi translated">First:要检索其值的键的名称</li><li id="b05c" class="oh oi it lk b ll oq lo or lr os lv ot lz ou md om on oo op bi translated">第二:如果我们要搜索的键在</li></ul><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="5b2c" class="nj mf it ne b gy nk nl l nm nn">#A dictionary containing basketball players with their heights in m<br/>playersHeight = {"Lebron James": 2.06,<br/>                 "Kevin Durant": 2.08,<br/>                 "Luka Doncic": 2.01,<br/>                 "James Harden": 1.96}#If the key exists<br/>print(playersHeight.get("Lebron James", 0)) #print 2.06<br/>print(playersHeight.get("Kevin Durant", 0)) #print 2.08#If the key does not exist<br/>print(playersHeight.get("Kyrie Irving", 0)) #print 0<br/>print(playersHeight.get("Trae Young", 0)) #print 0</span></pre><p id="0a49" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当键存在时，<code class="fe nb nc nd ne b">get()</code>方法的工作方式与引用方括号中的键的名称完全相同。但是，当键不存在时，使用<code class="fe nb nc nd ne b">get()</code>方法将打印我们输入的默认值作为第二个参数。</p><p id="529b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果不指定第二个值，将返回一个<code class="fe nb nc nd ne b">None</code>值。</p><p id="5732" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您还应该注意，使用<code class="fe nb nc nd ne b">get()</code>方法不会修改原始字典。我们将在本文后面进一步讨论它。</p><blockquote class="oa ob oc"><p id="e5fe" class="li lj od lk b ll lm kd ln lo lp kg lq oe ls lt lu of lw lx ly og ma mb mc md im bi translated"><em class="it">使用 setdefault()方法</em></p></blockquote><p id="f909" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">什么？还有别的办法吗？是的，当然！</p><p id="93b7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您不仅想跳过 try-except 步骤，还想覆盖原来的字典时，您可以使用<code class="fe nb nc nd ne b">setdefault()</code>方法。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="40ef" class="nj mf it ne b gy nk nl l nm nn">#A dictionary containing basketball players with their heights in m<br/>playersHeight = {"Lebron James": 2.06,<br/>                 "Kevin Durant": 2.08,<br/>                 "Luka Doncic": 2.01,<br/>                 "James Harden": 1.96}#If the key exists<br/>print(playersHeight.setdefault("Lebron James", 0)) #print 2.06<br/>print(playersHeight.setdefault("Kevin Durant", 0)) #print 2.08#If the key does not exist<br/>print(playersHeight.setdefault("Kyrie Irving", 0)) #print 0<br/>print(playersHeight.setdefault("Trae Young", 0)) #print 0</span></pre><p id="a9d8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我说的改写是这个意思，当你再次看到原词典的时候，你会看到这个。</p><pre class="ks kt ku kv gt nf ne ng nh aw ni bi"><span id="1cf3" class="nj mf it ne b gy nk nl l nm nn">print(playersHeight)<br/>"""<br/>print<br/>{"Lebron James": 2.06,<br/> "Kevin Durant": 2.08,<br/> "Luka Doncic": 2.01,<br/> "James Harden": 1.96,<br/> "Kyrie Irving": 0,<br/> "Trae Young": 0}</span></pre><p id="2084" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除此之外，<code class="fe nb nc nd ne b">setdefault()</code>方法与<code class="fe nb nc nd ne b">get()</code>方法完全相似。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="d5ca" class="me mf it bd mg mh nv mj mk ml nw mn mo ki nx kj mq kl ny km ms ko nz kp mu mv bi translated">最后的想法</h1><p id="5831" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated"><code class="fe nb nc nd ne b">get()</code>和<code class="fe nb nc nd ne b">setdefault()</code>都是你们都必须熟悉的高级技术。实现它并不困难和简单。你现在唯一的障碍是打破那些旧习惯。</p><p id="cb2d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，我相信随着你使用它，你会立即体验到不同之处。过一段时间，你就不再犹豫改变，开始用<code class="fe nb nc nd ne b">get()</code>和<code class="fe nb nc nd ne b">setdefault()</code>的方法。</p><p id="fd17" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">记住，当你不想覆盖原来的字典时，用<code class="fe nb nc nd ne b">get()</code>方法。</p><p id="346d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当你想对原来的字典进行修改时，<code class="fe nb nc nd ne b">setdefault()</code>会是你更好的选择。</p><p id="2d4a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">问候，</p><p id="982a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">弧度克里斯诺</strong></p></div></div>    
</body>
</html>