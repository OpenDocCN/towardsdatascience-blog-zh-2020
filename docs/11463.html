<html>
<head>
<title>Chi-Square Test for Independence in Python with Examples from the IBM HR Analytics Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中独立性的卡方检验以及 IBM HR 分析数据集的示例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/chi-square-test-for-independence-in-python-with-examples-from-the-ibm-hr-analytics-dataset-97b9ec9bb80a?source=collection_archive---------5-----------------------#2020-08-09">https://towardsdatascience.com/chi-square-test-for-independence-in-python-with-examples-from-the-ibm-hr-analytics-dataset-97b9ec9bb80a?source=collection_archive---------5-----------------------#2020-08-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6d109d1b037fecbe8324b9cc68ce5a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ghJt9Vv9QnCVYaZW"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">活动发起人</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="dd2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设您正在研究一个数据集，并且想要检查两个分类变量是否相互依赖。</p><p id="c787" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">动机可能是更好地理解结果变量和预测因子之间的关系，识别相关预测因子等。</p><p id="b82a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，<strong class="ki iu">卡方检验</strong>可以成为有效的统计工具。</p><p id="e97c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将讨论如何用 Python(从头开始和使用 SciPy)进行这个测试，并用一个流行的 HR 分析数据集 IBM 员工流失和绩效数据集——做例子。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="6fb4" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">古玩目录</h1><ol class=""><li id="1ee7" class="mj mk it ki b kj ml kn mm kr mn kv mo kz mp ld mq mr ms mt bi translated"><a class="ae kf" href="#ebe5" rel="noopener ugc nofollow">什么是卡方检验？</a></li><li id="c0d4" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><a class="ae kf" href="#3750" rel="noopener ugc nofollow">我们要检验的分类变量是什么？</a></li><li id="56e9" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><a class="ae kf" href="#9974" rel="noopener ugc nofollow">如何从头开始进行这项测试？</a></li><li id="bd63" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><a class="ae kf" href="#6627" rel="noopener ugc nofollow">这样做有捷径吗？</a></li><li id="ca58" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">我们还能做什么？</li><li id="37b3" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><a class="ae kf" href="#1431" rel="noopener ugc nofollow">有哪些局限性？</a></li></ol></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="ebe5" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">概观</h1><p id="d431" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">卡方检验是一种<a class="ae kf" href="https://www.statisticshowto.com/probability-and-statistics/hypothesis-testing/" rel="noopener ugc nofollow" target="_blank">统计假设检验</a>，用于检验统计量在零假设下的卡方分布，特别是独立性卡方检验通常用于检验两个分类变量之间的独立性【1】。</p><p id="236b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与该测试相关的关键假设是:1 .从人群中随机抽取的样本。2.在任何变量中，每个主题不能属于一个以上的组。</p><p id="a708" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了更好地说明这个测试，我选择了来自 Kaggle ( <a class="ae kf" href="https://www.kaggle.com/pavansubhasht/ibm-hr-analytics-attrition-dataset" rel="noopener ugc nofollow" target="_blank">链接</a>)的 IBM HR 数据集，其中包括一个关于减员、工作满意度、绩效等员工 HR 信息的样本。人们经常用它来揭示员工流失和其他因素之间的关系。</p><p id="1949" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，这是由 IBM 数据科学家创建的虚构数据集[2]。</p><p id="dbed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要查看完整的 Python 代码，请查看我的<a class="ae kf" href="https://www.kaggle.com/dehaozhang/chi-squared-test-on-attrition" rel="noopener ugc nofollow" target="_blank"> Kaggle 内核</a>。</p><p id="10e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事不宜迟，让我们进入细节！</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="e60c" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">探测</h1><p id="8a71" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">让我们首先检查雇员的数量和属性的数量:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="9f07" class="nl lm it nh b gy nm nn l no np">data.shape<br/>--------------------------------------------------------------------<br/>(1470, 35)</span></pre><p id="3774" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">员工 1470 人，属性 35 个。</p><p id="a5f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们可以检查这些属性是什么，并查看是否有任何与它们相关联的缺失值:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="d580" class="nl lm it nh b gy nm nn l no np">data.isna().any()<br/>--------------------------------------------------------------------<br/>Age                         False<br/>Attrition                   False<br/>BusinessTravel              False<br/>DailyRate                   False<br/>Department                  False<br/>DistanceFromHome            False<br/>Education                   False<br/>EducationField              False<br/>EmployeeCount               False<br/>EmployeeNumber              False<br/>EnvironmentSatisfaction     False<br/>Gender                      False<br/>HourlyRate                  False<br/>JobInvolvement              False<br/>JobLevel                    False<br/>JobRole                     False<br/>JobSatisfaction             False<br/>MaritalStatus               False<br/>MonthlyIncome               False<br/>MonthlyRate                 False<br/>NumCompaniesWorked          False<br/>Over18                      False<br/>OverTime                    False<br/>PercentSalaryHike           False<br/>PerformanceRating           False<br/>RelationshipSatisfaction    False<br/>StandardHours               False<br/>StockOptionLevel            False<br/>TotalWorkingYears           False<br/>TrainingTimesLastYear       False<br/>WorkLifeBalance             False<br/>YearsAtCompany              False<br/>YearsInCurrentRole          False<br/>YearsSinceLastPromotion     False<br/>YearsWithCurrManager        False<br/>dtype: bool</span></pre><p id="3750" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">识别分类变量</strong></p><p id="65f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们想检验“流失”和“工作满意度”之间是否有关系。</p><p id="9649" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">两类“损耗”的计数:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="598c" class="nl lm it nh b gy nm nn l no np">data['Attrition'].value_counts()<br/>--------------------------------------------------------------------<br/>No     1233<br/>Yes     237<br/>Name: Attrition, dtype: int64</span></pre><p id="ce95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按频率排序的四类“工作满意度”的计数:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="cb6d" class="nl lm it nh b gy nm nn l no np">data['JobSatisfaction'].value_counts()<br/>--------------------------------------------------------------------<br/>4    459<br/>3    442<br/>1    289<br/>2    280<br/>Name: JobSatisfaction, dtype: int64</span></pre><p id="31a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，对于“工作满意度”，1 表示“低”，2 表示“中”，3 表示“高”，4 表示“非常高”。</p><p id="cb7c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">原假设和替代假设</strong></p><p id="0473" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于我们这里的独立性卡方检验，零假设是<strong class="ki iu">在‘流失’和‘工作满意度’之间没有</strong>显著的关系。</p><p id="cff1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个假设是,<strong class="ki iu">在“流失”和“工作满意度”之间有</strong>显著的关系。</p><p id="9974" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">列联表</strong></p><p id="dd96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了计算卡方检验统计量，我们需要构建一个列联表。</p><p id="c2c4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用 pandas 的“交叉表”功能来实现:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="16e4" class="nl lm it nh b gy nm nn l no np">pd.crosstab(data.Attrition, data.JobSatisfaction, margins=True)</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/187757368580eb3ec814d1569d7e2fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*QkXnGjorGiVr_2HkZs7jZw.png"/></div></figure><p id="0343" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">表中的数字代表频率。例如,“工作满意度”中的“2”和“流失”中的“是”都显示为“46 ”,这意味着在 1470 名员工中，有 46 名员工将他们的工作满意度评为“中等”,他们确实离开了公司。</p><p id="850e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">卡方统计</strong></p><p id="fe4e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">卡方统计量(X)的计算公式如下所示:</p><p id="6b16" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">X =总和[(观察值-预期值)/预期值]</p><p id="27e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">术语'<strong class="ki iu">观察到的</strong>是指我们在列联表中看到的数字，术语'<strong class="ki iu">期望的</strong>是指零假设为真时的期望数字。</p><p id="e226" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在零假设下，“流失”和“工作满意度”之间没有显著的关系，这意味着流失的百分比在工作满意度的四个类别中应该是一致的。例如，“4”和“流失”的预期频率应该是将工作满意度评为“非常高”的员工人数*(总流失/员工总数)，即 459*237/1470，或大约 74。</p><p id="287a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们计算所有预期的数字，并将它们存储在一个名为“exp”的列表中:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="56a9" class="nl lm it nh b gy nm nn l no np">row_sum = ct.iloc[0:2,4].values<br/>exp = []<br/>for j in range(2):<br/>    for val in ct.iloc[2,0:4].values:<br/>        exp.append(val * row_sum[j] / ct.loc['All', 'All'])<br/>print(exp)<br/>--------------------------------------------------------------------<br/>[242.4061224489796,<br/> 234.85714285714286,<br/> 370.7387755102041,<br/> 384.99795918367346,<br/> 46.593877551020405,<br/> 45.142857142857146,<br/> 71.26122448979592,<br/> 74.00204081632653]</span></pre><p id="27fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意最后一项(74)验证了我们的计算是正确的。</p><p id="272e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以计算 X:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="31e7" class="nl lm it nh b gy nm nn l no np">((obs - exp)**2/exp).sum()<br/>--------------------------------------------------------------------<br/>17.505077010348</span></pre><p id="e313" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">自由度</strong></p><p id="7148" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了 X 之外，我们还需要一个参数，即自由度，其计算方法为(第一个变量中的类别数-1)*(第二个变量中的类别数-1)，在本例中为(2–1)*(4–1)，即 3。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="3b9c" class="nl lm it nh b gy nm nn l no np">(len(row_sum)-1)*(len(ct.iloc[2,0:4].values)-1)<br/>--------------------------------------------------------------------<br/>3</span></pre><p id="d9df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">释义</strong></p><p id="f6f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于 X 和自由度，我们可以使用卡方表/计算器来确定其对应的 p 值，并在给定 alpha 的指定<a class="ae kf" href="https://blog.minitab.com/blog/adventures-in-statistics-2/understanding-hypothesis-tests-significance-levels-alpha-and-p-values-in-statistics" rel="noopener ugc nofollow" target="_blank">显著性水平的情况下，推断是否存在显著关系。</a></p><p id="b001" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">换句话说，给定自由度，我们知道在零假设下,“观察到的”应该接近“预期的”,这意味着 X 应该相当小。当 X 大于某个阈值时，我们知道 p 值(假设存在零假设，则出现如此大的 X 的概率)极低，我们会拒绝零假设。</p><p id="c2b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 Python 中，我们可以如下计算 p 值:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="fa94" class="nl lm it nh b gy nm nn l no np">1 - stats.chi2.cdf(chi_sq_stats, dof)<br/>--------------------------------------------------------------------<br/>0.000556300451038716</span></pre><p id="4e01" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设显著性水平为 0.05。我们可以得出结论，在“流失”和“工作满意度”之间有着重要的关系。</p><p id="6627" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">使用 SciPy </strong></p><p id="8943" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 Python 中有一个执行这个测试的捷径，它利用了 SciPy 库(<a class="ae kf" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.chi2_contingency.html" rel="noopener ugc nofollow" target="_blank">文档</a>)。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="56d4" class="nl lm it nh b gy nm nn l no np">obs = np.array([ct.iloc[0][0:4].values,<br/>                  ct.iloc[1][0:4].values])<br/>stats.chi2_contingency(obs)[0:3]<br/>--------------------------------------------------------------------<br/>(17.505077010348, 0.0005563004510387556, 3)</span></pre><p id="91a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，这三个术语分别是 X 统计量、p 值和自由度。这些结果与我们之前手工计算的结果一致。</p><p id="8354" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">‘减员’和‘教育’</strong></p><p id="53cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">员工是否离职与工作满意度有关，这多少有些直观。现在让我们看另一个例子，在这个例子中，我们检验“流失”和“教育”之间是否有显著的关系:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="f7ef" class="nl lm it nh b gy nm nn l no np">ct = pd.crosstab(data.Attrition, data.Education, margins=True)<br/>obs = np.array([ct.iloc[0][0:5].values,<br/>                  ct.iloc[1][0:5].values])<br/>stats.chi2_contingency(obs)[0:3]<br/>--------------------------------------------------------------------<br/>(3.0739613982367193, 0.5455253376565949, 4)</span></pre><p id="00ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">p 值超过 0.5，因此在 0.05 的显著性水平上，我们无法拒绝“流失”和“教育”之间没有关系。</p><p id="c712" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">按部门分解分析</strong></p><p id="61ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以检查是否存在按部门细分的重要关系。例如，我们知道“自然减员”和“工作生活平衡”之间有很大的关系，但我们想检验这是否与部门无关。首先，让我们看看有哪些部门以及每个部门的员工人数:</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="d244" class="nl lm it nh b gy nm nn l no np">data['Department'].value_counts()<br/>--------------------------------------------------------------------<br/>Research &amp; Development    961<br/>Sales                     446<br/>Human Resources            63<br/>Name: Department, dtype: int64</span></pre><p id="aa79" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了确保卡方检验有足够的样本，我们在分析中将只关注 R&amp;D 和销售。</p><pre class="nc nd ne nf gt ng nh ni nj aw nk bi"><span id="b453" class="nl lm it nh b gy nm nn l no np">alpha = 0.05<br/>for i in dep_counts.index[0:2]:<br/>    sub_data = data[data.Department == i]<br/>    ct = pd.crosstab(sub_data.Attrition, sub_data.WorkLifeBalance, margins=True)<br/>    obs = np.array([ct.iloc[0][0:4].values,ct.iloc[1][0:4].values])<br/>    print("For " + i + ": ")<br/>    print(ct)<br/>    print('With an alpha value of {}:'.format(alpha))<br/>    if stats.chi2_contingency(obs)[1] &lt;= alpha:<br/>        print("Dependent relationship between Attrition and Work Life Balance")<br/>    else:<br/>        print("Independent relationship between Attrition and Work Life Balance")<br/>    print("")<br/>--------------------------------------------------------------------<br/>For Research &amp; Development: <br/>WorkLifeBalance   1    2    3   4  All<br/>Attrition                             <br/>No               41  203  507  77  828<br/>Yes              19   32   68  14  133<br/>All              60  235  575  91  961<br/>With an alpha value of 0.05:<br/>Dependent relationship between Attrition and Work Life Balance<br/><br/>For Sales: <br/>WorkLifeBalance   1    2    3   4  All<br/>Attrition                             <br/>No               10   78  226  40  354<br/>Yes               6   24   50  12   92<br/>All              16  102  276  52  446<br/>With an alpha value of 0.05:<br/>Independent relationship between Attrition and Work Life Balance</span></pre><p id="c981" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从这些输出中，我们可以看到在 R&amp;D 部门中有一个重要的关系，但在销售部门中没有。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="1431" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">警告和限制</h1><p id="0610" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">进行此分析时有一些注意事项，以及此测试的一些限制:</p><ol class=""><li id="9d8c" class="mj mk it ki b kj kk kn ko kr nr kv ns kz nt ld mq mr ms mt bi translated">为了得出有意义的结论，每个场景中的样本数量需要足够大，但现实中可能并非如此。</li><li id="be34" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">重要的关系并不意味着<strong class="ki iu">而不是</strong>意味着因果关系。</li><li id="15c4" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">卡方检验本身并不能提供除“显著关系与否”之外的额外见解。例如，测试没有告知随着工作满意度的增加，离开公司的员工比例趋于减少。</li></ol></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="e19c" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">摘要</h1><p id="c901" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">让我们快速回顾一下。</p><p id="2f3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们对独立性进行了卡方检验，以检查 IBM HR 分析数据集中变量之间的关系。我们讨论了用 Python 实现这一点的两种方法，一种是从头开始，另一种是使用 SciPy。最后，我们表明，当一个重要的关系存在，我们也可以分层，并检查它是否是真实的每一个水平。</p><p id="afe8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你喜欢这篇博文，并请分享你的想法:)</p><p id="b791" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看我的另一篇关于通过 Streamlit 和 PyTorch 构建图像分类的文章:</p><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/create-an-image-classification-web-app-using-pytorch-and-streamlit-f043ddf00c24"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">使用 PyTorch 和 Streamlit 创建影像分类 Web 应用程序</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">用 50 行代码搭建一个简单的图像分类 app！</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jz nx"/></div></div></a></div></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="5584" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">参考</h1><p id="fa11" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">[1]<a class="ae kf" href="https://en.wikipedia.org/wiki/Chi-squared_test" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Chi-squared_test</a><br/>【2】<a class="ae kf" href="https://www.kaggle.com/pavansubhasht/ibm-hr-analytics-attrition-dataset" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/pavansubhasht/IBM-HR-analytics-attraction-dataset</a></p></div></div>    
</body>
</html>