# Numba: JIT 编译，但是用于 Python

> 原文：<https://towardsdatascience.com/numba-jit-compilation-but-for-python-373fc2f848d6?source=collection_archive---------31----------------------->

## 快速浏览一下 2020 年让 Python 变得更好的神奇工具。

![](img/6163b37de9b0f152f1d6abce5857d7ae.png)

# 介绍

对于程序员和计算机科学家来说，统计计算一直是一个非常困难的学科。程序员不仅在统计编程语言中寻找某些属性和特征，在通用编程语言中也是如此。随着机器学习和数据科学应用的普及，统计计算的兴起也加剧了“完美语言”发展中的这些关键问题。

回到十年前，没有人能预料到 Python 中机器学习的兴起会是什么样子。大多数科学家使用 R 编程语言进行统计分析和类似的事情。MATLAB 当然也是统计计算领域非常流行的选择，Scala 也是如此。Python 最近在这方面变得非常流行，因为它具有强大的统计能力

当然，Python 是用 c 解释的，这意味着 Python 没有它的竞争对手那么快，也不适合大数据解决方案。Python 本质上并不是一种为满足现代科学计算需求而构建的编译器语言。虽然 Python 对于大多数统计应用程序来说是一个很好的应用程序，但 Python 的主要缺点通常是在处理大量数据和递归训练机器学习模型时的速度。

# 为什么要用 Python？

如果 Python 在处理大量数据方面有问题，并且本质上是一种解释型的高级语言，那么为什么今天许多科学家喜欢这种语言呢？答案很简单，目前，Python 是最好的解决方案。虽然 Python 与许多其他语言相比相对较慢，但与其他语言相比，它也是非常高级的语言，并且在过去几年中一直在变得更快和更优化。

除此之外，Python 拥有当今最强大的统计计算生态系统之一。这些包中的大部分也是用 C 语言编写的，这使得 Python 经常成为非常快速的代码的简单接口。然而，无论生态系统有多强大，它都无法帮助处理海量数据和编写 Pythonic 算法来清理和编辑数据。

# 吉特舞乐

除非你一直生活在编程的龟壳下，否则你可能熟悉——或者至少听说过一个叫做 JIT 的编译器概念。JIT 或即时编译是一种编译器特性，它允许在运行时而不是在执行时解释和编译语言。这意味着 JIT 编译器在编译代码之前执行逻辑，而不是准备所有的代码来工作，决定代码要做什么，然后再去做。

这种编译器的好处当然是速度。花费在初始编译上的时间更少意味着代码可以更快地被解释。打个比方，假设你有一份晚餐要做的东西的清单。你可以采取一种多任务的方法，在同一时间做多件事情，而不是单独做所有的事情。

# 数字概述

Numba JIT 编译器类似于 Julia JIT 编译器，使用标准的 LLVM 编译器库。虽然它在这方面确实有一些缺点，因为 LLVM 的重点不一定是 JIT，但它确实意味着编译器非常快和精确。Numba 编译的 Pythonic 算法可以达到 c 等低级语言中常见的速度。

这听起来可能很复杂，确实如此——但这并不意味着 Numba 很难使用。事实上，Numba 非常容易使用！为了试用它，你当然需要用 Python 的包管理器 PIP 来添加它。

```
sudo pip3 install numba
```

安装 Numba 后，您可以通过 jit 函数访问它:

```
from numba import jit
import random

@jit(nopython=True)
def monte_carlo_pi(nsamples):
    acc = 0
    for i in range(nsamples):
        x = random.random()
        y = random.random()
        if (x ** 2 + y ** 2) < 1.0:
            acc += 1
    return 4.0 * acc / nsamples
```

对于大多数代码，Numba 在优化 Python 代码方面做得非常出色。然而，正如 Julia 开发者在 JuliaCon 上讨论的那样，在当前版本中，Numba 仍有很长的路要走，并存在[某些代码的问题。一些问题无法通过简单的 Python 调用来解决，尽管 Numba 在创建可以轻松导入的 Python 优化编译器方面做得很好，但仍有一些改进需要做。

# 结论

不管 Python 是否会一直成为科学目的和统计计算的首选编程语言，很明显 Python 现在肯定是这样。虽然 Python 不是最快的编程语言，并且在科学计算方面也有一些小问题，但对于那些希望进行统计或机器学习的人来说，它仍然是一个很好的选择。这主要是由于它的生态系统和整体受欢迎程度。

幸运的是，Python 的许多缺陷正被有才华、有干劲的开发人员直接瞄准。随着时间的推移，这项技术很有可能会发展到当使用 Python 进行数据科学时，这些问题中的许多可能都不会再被感觉到。

Python 最大的问题之一是速度。Numba 是一系列令人敬畏的工具之一，有助于解决这个问题，并使 Python 达到对抗其他统计语言的标准，特别是像 Julia 这样的新语言。Numba 令人兴奋的地方在于它使用起来非常简单，就像一个电灯开关，可以让你的代码运行得更快。反过来，这可以用来为应用程序注入新的活力，否则这些应用程序甚至可能无法运行。