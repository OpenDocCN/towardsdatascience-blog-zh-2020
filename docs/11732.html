<html>
<head>
<title>Data Visualization using Streamlit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Streamlit 实现数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-using-streamlit-151f4c85c79a?source=collection_archive---------6-----------------------#2020-08-14">https://towardsdatascience.com/data-visualization-using-streamlit-151f4c85c79a?source=collection_archive---------6-----------------------#2020-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c8c1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Streamlit 简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/457d628f6cf19bbf04feb75e40049089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZDT1gD84S6oMNG9Q"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卢克·切瑟在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="6042" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">喜欢、分享、订阅频道- <a class="ae ky" href="https://www.youtube.com/channel/UC0ZCXAvGOg5fDyw0Xu-_PCw" rel="noopener ugc nofollow" target="_blank"> HackerShrine </a></p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="8336" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最近，我遇到了一个开源框架— <a class="ae ky" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>，它是用来创建数据应用的。所以我花了一些时间在文档上，并在一个<a class="ae ky" href="https://datahack.analyticsvidhya.com/contest/genpact-machine-learning-hackathon-1/#ProblemStatement" rel="noopener ugc nofollow" target="_blank">粮食需求预测数据集</a>上做了一些数据可视化。</p><blockquote class="me"><p id="0f80" class="mf mg it bd mh mi mj mk ml mm mn lw dk translated">Streamlit 的开源应用框架<strong class="ak"> </strong>是<strong class="ak"> </strong>数据科学家和机器学习工程师在几个小时内创建漂亮、高性能应用的最简单方式！全是纯 Python。全部免费。</p><p id="ecc8" class="mf mg it bd mh mi mj mk ml mm mn lw dk translated"><a class="ae ky" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> —流线型</a></p></blockquote><p id="5ce3" class="pw-post-body-paragraph lb lc it ld b le mo ju lg lh mp jx lj lk mq lm ln lo mr lq lr ls ms lu lv lw im bi translated">要开始，只需键入以下命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0564" class="my mz it mu b gy na nb l nc nd">pip install streamlit</span></pre><p id="7210" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">要检查它是否安装正确，请运行以下命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="870e" class="my mz it mu b gy na nb l nc nd">streamlit hello</span></pre><p id="7434" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">如果这出现在您的浏览器上，则 streamlit 已安装并正常工作！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/cdb3a3f96db3b6800120befa90f4516c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26h0eBuWtfuA7v7Az3OJ6w.png"/></div></div></figure><p id="269f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在我们将使用上面链接中提供的数据集绘制一些简单的图表。</p><p id="e140" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">首先导入必要的库并给出一个标题。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="016e" class="my mz it mu b gy na nb l nc nd">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly.figure_factory as ff<br/>import matplotlib.pyplot as plt</span><span id="546c" class="my mz it mu b gy nf nb l nc nd">st.title(‘Food Demand Forecasting — Analytics Vidhya’)</span></pre><p id="b318" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在数据集中，您将看到 3 个 csv 文件，我们现在将使用 pandas 导入这些文件。@st.cache 在这里对于流畅快速的运行是相当重要的。在这里详细阅读<a class="ae ky" href="https://docs.streamlit.io/en/stable/tutorial/create_a_data_explorer_app.html#effortless-caching" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="4f7d" class="my mz it mu b gy na nb l nc nd"><a class="ae ky" href="http://twitter.com/st" rel="noopener ugc nofollow" target="_blank">@st</a>.cache<br/>def load_data(nrows):<br/>    data = pd.read_csv('train.csv', nrows=nrows)<br/>    return data</span><span id="cb9d" class="my mz it mu b gy nf nb l nc nd"><a class="ae ky" href="http://twitter.com/st" rel="noopener ugc nofollow" target="_blank">@st</a>.cache<br/>def load_center_data(nrows):<br/>    data = pd.read_csv('fulfilment_center_info.csv',nrows=nrows)<br/>    return data</span><span id="f097" class="my mz it mu b gy nf nb l nc nd"><a class="ae ky" href="http://twitter.com/st" rel="noopener ugc nofollow" target="_blank">@st</a>.cache<br/>def load_meal_data(nrows):<br/>    data = pd.read_csv('meal_info.csv',nrows=nrows)<br/>    return data</span></pre><p id="6cd7" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在让我们调用这些函数。我现在只取 1000 行，你可以取整个数据集。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0404" class="my mz it mu b gy na nb l nc nd">data_load_state = st.text('Loading data...')<br/>weekly_data = load_data(1000)<br/>center_info_data = load_center_data(1000)<br/>meal_data = load_meal_data(1000)</span></pre><p id="a852" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">首先我们来看一下<strong class="ld iu"> <em class="ng">周需求数据</em> </strong>。我们将绘制条形图，直方图，折线图和面积图。</p><p id="aef1" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">条形图</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="4336" class="my mz it mu b gy na nb l nc nd">st.subheader(‘Weekly Demand Data’)<br/>st.write(weekly_data)</span><span id="01d2" class="my mz it mu b gy nf nb l nc nd">#Bar Chart<br/>st.bar_chart(weekly_data[‘num_orders’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/51867886b5c59008e6441f3d9789292a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*Wz0j6FBevAG5sh39wrsIDw.png"/></div></figure><p id="6198" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">直方图</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0229" class="my mz it mu b gy na nb l nc nd">#histogram<br/>df = pd.DataFrame(weekly_data[:200], columns = [‘num_orders’,’checkout_price’,’base_price’])<br/>df.hist()<br/>plt.show()<br/>st.pyplot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/2b17c9041c167c6ccee39e6017bf6b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mHLEwfNSc2xEtTqWzEOSBg.png"/></div></div></figure><p id="4f93" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">折线图</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="e78f" class="my mz it mu b gy na nb l nc nd">#Line Chart<br/>st.line_chart(df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/655528a302789e0f44e7aff06f022c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*dgRYz-rUpTO6fQqYpO53sA.png"/></div></figure><p id="01c8" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">面积图</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="475f" class="my mz it mu b gy na nb l nc nd">chart_data = pd.DataFrame(weekly_data[:40], columns=[‘num_orders’, ‘base_price’])<br/>st.area_chart(chart_data)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/b6bf8920f9783f13fdcef8a330cd00b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*Zyf9pcjkUZx2Dog1mfhZhw.png"/></div></figure><p id="1ebe" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们拥有的下一个 csv 文件属于<strong class="ld iu"> <em class="ng">履行信息中心。</em> </strong></p><p id="3ebf" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了显示 csv 文件中的原始数据，我添加了一个复选框，当它被选中时，就会显示原始数据。Streamlit 提供了简单而优雅的语法，如下所示。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2deb" class="my mz it mu b gy na nb l nc nd">st.subheader(‘Fulfillment Center Information’)<br/>if st.checkbox(‘Show Center Information data’):<br/>    st.subheader(‘Center Information data’)<br/>    st.write(center_info_data)<br/>#st.write(center_info_data)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/950cc8b039a941c7a487938f4941849a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0s68RTWmxyKnfroZcpWrEg.png"/></div></div></figure><p id="39b8" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">以类似于每周需求数据的方式绘制区域代码和中心类型的条形图。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="dda7" class="my mz it mu b gy na nb l nc nd">st.bar_chart(center_info_data[‘region_code’])<br/>st.bar_chart(center_info_data[‘center_type’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/acf4e69390f4b35c331ee101efaadce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*PePP-N8nf_jtnJcORGRceA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/8f72f7e9f4c470fc955fd57f846c8dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*CW4a0iNBCd1SVMRmhITZkw.png"/></div></figure><p id="4cc4" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">接下来，我们将使用 plotly 查看配送区域代码和中心 id。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="277f" class="my mz it mu b gy na nb l nc nd">hist_data = [center_info_data[‘center_id’],center_info_data[‘region_code’]]<br/>group_labels = [‘Center Id’, ‘Region Code’]<br/>fig = ff.create_distplot(hist_data, group_labels, bin_size=[10, 25])<br/>st.plotly_chart(fig, use_container_width=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/358dfa4cf29a4da3d0fabe07e0ccdd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*XBfVtqHhbol5Bsj25nwflg.png"/></div></div></figure><p id="a353" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们拥有的最后一个 csv 文件是膳食数据，让我们也显示它的原始数据。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2a89" class="my mz it mu b gy na nb l nc nd">st.subheader('Meal Information')<br/>st.write(meal_data)</span></pre><p id="9395" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这里绘制了一个简单的 cusine 柱条形图。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="beed" class="my mz it mu b gy na nb l nc nd">st.bar_chart(meal_data[‘cuisine’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/cdd30a681f029fa7cd121d641d0f396e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*u2k1xpjkrgNoBXDT-Z9bzg.png"/></div></figure><p id="bf10" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">然后创建按钮，点击该按钮将显示餐饮类别数量的条形图。这可以通过编写以下代码来实现:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="56b5" class="my mz it mu b gy na nb l nc nd">agree = st.button(‘Click to see Categories of Meal’)<br/>if agree:<br/> st.bar_chart(meal_data[‘category’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/ed121f7a8a82d5cb36d563ac31658252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prvWNLqKcQk_Zdu2ilIhSw.png"/></div></div></figure><p id="c52f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">要运行您的 streamlit 应用程序，只需键入以下命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="99ca" class="my mz it mu b gy na nb l nc nd">streamlit run appname.py</span></pre><p id="381e" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这将打开一个浏览器，你可以看到所有的可视化。</p><p id="1fbf" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这是我电脑上的一个屏幕录像。</p><div class="nm nn gp gr no np"><a href="https://www.linkedin.com/posts/aniket-wattamwar-0a6658139_machinelearning-python-streamlit-activity-6699267657994162176-psWO" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">Aniket Wattamwar 在 LinkedIn 上发帖</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">最近，我偶然发现了一个开源框架 Streamlit。所以，我花了一些时间在文档上，做了一些…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">www.linkedin.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div><p id="4d13" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">你可以在我的 G <a class="ae ky" href="https://github.com/aniketwattamwar" rel="noopener ugc nofollow" target="_blank"> itHub </a>上找到完整的代码。你也可以在其他平台上和我联系——<a class="ae ky" href="https://linktr.ee/aniketwattamwar" rel="noopener ugc nofollow" target="_blank">Linktree</a></p><p id="d905" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">谢谢你。</p><p id="1ea9" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">和平。</p></div></div>    
</body>
</html>