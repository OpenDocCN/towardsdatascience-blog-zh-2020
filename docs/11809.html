<html>
<head>
<title>Independence Day Speeches: How long will it be this time?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">独立日演讲:这次会持续多久？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/independence-day-speeches-how-long-will-it-be-this-time-6dee2f542e0e?source=collection_archive---------42-----------------------#2020-08-15">https://towardsdatascience.com/independence-day-speeches-how-long-will-it-be-this-time-6dee2f542e0e?source=collection_archive---------42-----------------------#2020-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/dc5cb3def2205202fe6a17d2a971cf66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRS6dioanIOt_wMiywJAKA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">过去 21 年印度独立日演讲中的前 200 个单词</p></figure><div class=""/><div class=""><h2 id="61ee" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">21 年印度独立日演讲的 EDA 和对 2020 年 8 月 15 日演讲长度的预测</h2></div><h1 id="9105" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">前言</h1><p id="d4f4" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">几天前，我坐在自己的公寓里，思考着这个问题——“今年的独立日会和以往有什么不同吗？</p><p id="b612" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">当然会。原因很明显。</p><p id="a670" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">这个问题让我想到了另一个问题——“<em class="ml">知道这次会有所不同，首相这次会说什么？</em></p><p id="5476" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">这是全国近 10 亿人渴望听到的一件事。</p><p id="5aac" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">因为今年我们遇到了困难，目睹了近年来前所未有的悲剧。因此，首相的话应该反映一个正在慢慢恢复元气的国家的情绪。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="b84b" class="kx ky ji bd kz la my lc ld le mz lg lh ko na kp lj kr nb ks ll ku nc kv ln lo bi translated">动机</h1><p id="7009" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">但是我有另一个问题—</p><blockquote class="nd"><p id="3b25" class="ne nf ji bd ng nh ni nj nk nl nm mk dk translated">这次他会说多长时间？</p></blockquote><p id="112c" class="pw-post-body-paragraph lp lq ji lr b ls nn kj lu lv no km lx ly np ma mb mc nq me mf mg nr mi mj mk im bi translated">换句话说，这次传统的独立日演讲会持续多久？</p><p id="aa22" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">从历史上看，在独立日，过去的总理们会详细谈论他们的政府发起的各种计划、成就、困难和未来的道路。</p><p id="9548" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">我认为这将是一个很好的机会，重温过去，窥视昔日的演讲，也许，预测今年的演讲会有多长。</p><blockquote class="ns nt nu"><p id="c6a8" class="lp lq ml lr b ls mm kj lu lv mn km lx nv mo ma mb nw mp me mf nx mq mi mj mk im bi translated">我把代码片段放在这篇文章的最后，因为(惊喜，惊喜)数据可视化第一！！</p><p id="6628" class="lp lq ml lr b ls mm kj lu lv mn km lx nv mo ma mb nw mp me mf nx mq mi mj mk im bi translated">你可以在我的<a class="ae ny" href="https://github.com/ani-rudra-chan/Independence-Day-Speeches.git" rel="noopener ugc nofollow" target="_blank"> GitHub </a>库上找到整个项目。</p></blockquote></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="aee8" class="kx ky ji bd kz la my lc ld le mz lg lh ko na kp lj kr nb ks ll ku nc kv ln lo bi translated">数据采集</h1><p id="07c9" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我浏览了 PMO 档案馆<a class="ae ny" href="https://archivepmo.nic.in/" rel="noopener ugc nofollow" target="_blank"><strong class="lr jj"><em class="ml"/></strong></a>的公开网页，下载了现任和上两届总理的独立日演讲，一直追溯到 1999 年。最近几年，印度有过以下几任总理—</p><ol class=""><li id="fe58" class="nz oa ji lr b ls mm lv mn ly ob mc oc mg od mk oe of og oh bi translated">施里。阿塔尔·比哈里·瓦杰帕伊(1999-2003 年)</li><li id="edc9" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk oe of og oh bi translated">曼莫汉·辛格博士(2004-2013 年)</li><li id="f233" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk oe of og oh bi translated">施里。纳伦德拉·莫迪(2014 年至今)</li></ol><blockquote class="ns nt nu"><p id="8c01" class="lp lq ml lr b ls mm kj lu lv mn km lx nv mo ma mb nw mp me mf nx mq mi mj mk im bi translated">提醒一下——这些下载的文本是当时用印地语演讲的英文翻译。</p></blockquote><h1 id="603f" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">数据预处理</h1><p id="33eb" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我使用自然语言处理库，<strong class="lr jj"> NLTK，</strong>来-</p><ul class=""><li id="ee37" class="nz oa ji lr b ls mm lv mn ly ob mc oc mg od mk on of og oh bi translated">删除不必要的停用词；</li><li id="5f1a" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk on of og oh bi translated">去掉标点符号；</li><li id="9fc5" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk on of og oh bi translated">将单词标记化和词条化；</li><li id="392f" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk on of og oh bi translated">用词性标签(词类)标注每个单词；</li></ul><p id="2241" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">最后，我只剩下一套 21 篇演讲稿，其中只包含了基本内容。</p><h1 id="9e1b" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">想象过去的话语</h1><h2 id="2e15" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">过去演讲中的热门词汇</h2><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pa"><img src="../Images/4a5907225fca12dfd32716e439de398e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O0fNK9XYm2yoODR4U1gJbw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">历年演讲中使用最多的 50 个词(鸣谢:作者)</p></figure><p id="8674" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">在过去的 21 年里，独立日演讲中出现频率最高的词显然是:<strong class="lr jj">国家</strong>、<strong class="lr jj">政府</strong>、<strong class="lr jj">年</strong>、<strong class="lr jj">今日</strong>、<strong class="lr jj">印度</strong>、<strong class="lr jj">世界</strong>、<strong class="lr jj">兄弟</strong>、<strong class="lr jj">姐妹</strong>。</p><p id="2ebc" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">有趣的是，现任总理什里在过去几年中非常频繁地使用这些词。纳伦德拉·莫迪与其前任相比。另一方面，‘<strong class="lr jj">印度</strong>’几乎被所有总理平等提及(这是意料之中的)。</p><h2 id="42c9" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">谁说了什么？</h2><ul class=""><li id="634b" class="nz oa ji lr b ls lt lv lw ly pf mc pg mg ph mk on of og oh bi translated"><em class="ml"> Shri。阿塔尔·比哈里·瓦杰帕伊</em></li></ul><p id="9be5" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">在他担任总理的 5 年里，什里。阿塔尔·比哈里·瓦杰帕伊被普遍称为现代印度真正的政治家，他在演讲中反映了这一绰号。可以看出，像'<strong class="lr jj">世界</strong>'、<strong class="lr jj">新</strong>'、<strong class="lr jj">国家</strong>'、<strong class="lr jj">民族</strong>'这样的词汇在他的独立日演讲中被频繁使用。</p><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/3ca5f4125f0ec34d88d8df16b33df551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C-WtgXfDnSXJY700v5tucw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Shri 排名前 200 的单词。阿塔尔·比哈里·瓦杰帕伊的独立日演讲(鸣谢:作者)</p></figure><ul class=""><li id="f61b" class="nz oa ji lr b ls mm lv mn ly ob mc oc mg od mk on of og oh bi translated">曼莫汉·辛格博士</li></ul><p id="58e8" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">这位从 2004 年到 2013 年领导印度的学者和经济学家总理详细谈论了'<strong class="lr jj">发展'</strong>'<strong class="lr jj">教育</strong>'、<strong class="lr jj">工作</strong>等等。在他的独立日演讲中。</p><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/da00b91337594aca2f8be5fb6383a13e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKTegqC9LmPrv1M7T28DFQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">曼莫汉·辛格博士独立日演讲中的 200 个单词</p></figure><ul class=""><li id="2246" class="nz oa ji lr b ls mm lv mn ly ob mc oc mg od mk on of og oh bi translated"><em class="ml"> Shri。纳伦德拉·莫迪</em></li></ul><p id="84c8" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">最近连任的现任总理在过去独立日的演讲中强调了穷人、农民、T42 人和印度人的利益。</p><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5ffc3a33446f24c0bcb6488c71701220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hu_d9mSMZPWx10jLf7RNLg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Shri 排名前 200 的单词。纳伦德拉·莫迪的独立日演讲(鸣谢:作者)</p></figure><h2 id="2605" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">历年的演讲长度</h2><p id="4254" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">看看演讲的持续时间和文本长度，令人惊讶的是瓦杰帕伊的演讲是持续时间和长度最短的，而莫迪的演讲是迄今为止最长的。</p><p id="735c" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">在过去的 21 年里，演讲的篇幅稳步增长，莫迪当选后出现了大幅增长。2017 年演讲时长有明显下降。根据这篇<a class="ae ny" href="https://www.livemint.com/Politics/QrQaiQItcApTG2gOlSd72O/Narendra-Modi-keeps-promise-delivers-his-shortest-Independe.html" rel="noopener ugc nofollow" target="_blank">文章</a>，首相收到了抱怨他前一年(2016 年)长篇演讲的信件，这促使他保持简洁。</p><p id="61be" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">但这只是那一年的情况，因为接下来的两年，演讲又变得更长了。</p><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pi"><img src="../Images/b1a46c82f7e13ed2ed13d5d9aea8b15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDYtIjQstSs4lgdxAbbDMA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">过去 21 年的演讲长度(以分钟和单词为单位)</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="4032" class="kx ky ji bd kz la my lc ld le mz lg lh ko na kp lj kr nb ks ll ku nc kv ln lo bi translated">预测今年的演讲长度</h1><h2 id="cf90" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">自回归模型</h2><p id="3be7" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">看过以往的演讲时长，想到用一个简单的<strong class="lr jj">自回归(AR) </strong>模型来预测今年的演讲时长。</p><p id="a679" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">在我看来，这些独立日演讲似乎是精心撰写和控制的，也着眼于历史，以确保事情忠于传统(至少在 2013 年之前是这样)。</p><p id="c678" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">最多，今年的演讲长度可能取决于去年的演讲长度(正如我之前写的轶事所证明的)，因此 1 的<strong class="lr jj">滞后对于 ar 模型来说应该足够好了。此外，由于这是一个非平稳的时间序列，我差分一次，使它在拟合模型之前平稳。</strong></p><p id="0284" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">为了测试这个简单的模型，我对它从 2010 年开始连续几年的演讲长度进行了训练，并进行了滚动预测。2011 年至 2019 年的产量如下所示。</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="d4e8" class="oo ky ji pk b gy po pp l pq pr">2011<br/>predicted=41.497464, expected=34.000000<br/>2012<br/>predicted=34.293300, expected=32.000000<br/>2013<br/>predicted=32.275443, expected=28.000000<br/>2014<br/>predicted=27.779659, expected=65.000000<br/>2015<br/>predicted=64.317813, expected=86.000000<br/>2016<br/>predicted=94.102461, expected=96.000000<br/>2017<br/>predicted=101.639437, expected=57.000000<br/>2018<br/>predicted=52.350426, expected=81.000000<br/>2019<br/>predicted=81.350816, expected=92.000000<br/>Test RMSE: 23.252</span></pre><p id="5273" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">所以这个模型在 2014 年显示了很大的误差，当时新总理当选了，他的讲话比他的前任还长！从那以后，这个简单的模型在 2017 年和 2018 年出现了错误，因为——看在上帝的份上，这只是一个自回归模型！！它只是依靠它前一年的价值来预测下一年的价值。</p><p id="1b7e" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">无论如何，这个模型似乎有一个+- 23 分钟的误差，对今年，2020 年的预测是</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="87ad" class="oo ky ji pk b gy po pp l pq pr">&gt;&gt;&gt; 94.7 +- 23 minutes</span></pre><blockquote class="nd"><p id="dd8e" class="ne nf ji bd ng nh ps pt pu pv pw mk dk translated"><strong class="ak">因此，看起来首相可能会在独立日发表最长约 120 分钟、最短约 70 分钟的讲话！</strong></p></blockquote><p id="16e9" class="pw-post-body-paragraph lp lq ji lr b ls nn kj lu lv no km lx ly np ma mb mc nq me mf mg nr mi mj mk im bi translated"><strong class="lr jj"> <em class="ml">免责声明</em> </strong></p><ol class=""><li id="f04f" class="nz oa ji lr b ls mm lv mn ly ob mc oc mg od mk oe of og oh bi translated"><em class="ml">请对这一预测持怀疑态度，因为——它只是一个 AR 模型，并没有学到任何东西(除了更新它的回归系数)，因为除了它以前的值，没有任何可供学习的特征。</em></li><li id="6edb" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk oe of og oh bi translated"><em class="ml">这个预测是在独立日前夕做的，所以我在等着验证！</em></li><li id="41e3" class="nz oa ji lr b ls oi lv oj ly ok mc ol mg om mk oe of og oh bi translated"><em class="ml">所有演讲都可以在项目管理办公室的档案中免费下载。</em></li></ol><blockquote class="ns nt nu"><p id="9565" class="lp lq ml lr b ls mm kj lu lv mn km lx nv mo ma mb nw mp me mf nx mq mi mj mk im bi translated"><strong class="lr jj"> <em class="ji">更新——首相今年发言 86 分钟，完全在预测误差之内！</em>T19】</strong></p></blockquote><h1 id="ef7f" class="kx ky ji bd kz la lb lc ld le lf lg lh ko li kp lj kr lk ks ll ku lm kv ln lo bi translated">代码片段</h1><p id="b848" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">在这里，我展示了我编写的代码片段，以生成数据可视化和文本清理。</p><h2 id="4059" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">文本清洗和预处理</h2><p id="8b43" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">清理和预处理文本的功能—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="055b" class="oo ky ji pk b gy po pp l pq pr">def speech_cleaner(text):   <br/>    # Lower Case conversion<br/>    text = text.lower()<br/>    # Tokenize sentences to words<br/>    text = nltk.word_tokenize(text)<br/>    # Remove empty tokens<br/>    text = [w for w in text if len(w) &gt; 0]<br/>    # Remove punctuations<br/>    punct = string.punctuation<br/>    text = [w for w in text if w not in punct]<br/>    # Remove stopwords<br/>    stopword = stopwords.words('english')<br/>    text = [w for w in text if w not in stopword] <br/>    # POST Tagging the text<br/>    pos_tags = pos_tag(text)<br/>    # Lemmatize the text<br/>    text = [WordNetLemmatizer().lemmatize(w[0]) for w in pos_tags]<br/>    # Removing one letter words<br/>    text = [w for w in text if len(w) &gt; 1]<br/>    # Rejoin all words to get back speech<br/>    speech = " ".join(text)<br/>    return speech</span></pre><p id="ee2a" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">一个从本地目录读入文本并用前面的函数清理它的函数—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="1f5f" class="oo ky ji pk b gy po pp l pq pr">def text_reader_cleaner(file):<br/>    <br/>    text = []<br/>    <br/>    with open(file, 'r') as f:<br/>        text = f.readlines()<br/>    clean_speech = ""<br/>    <br/>    for i in text:<br/>        clean_speech = clean_speech + " " + speech_cleaner(i)<br/>    return clean_speech</span></pre><p id="7897" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">进一步预处理—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="2b58" class="oo ky ji pk b gy po pp l pq pr">all_speech = ""<br/>all_words = pd.DataFrame([], columns=['year','words'])<br/>for y, s in speech.items():<br/>    all_speech = all_speech + s<br/>    w = pd.Series(re.split("\W+",s))<br/>    w = w.drop(index=w.loc[w.values==''].index)<br/>    all_words = pd.concat([all_words, <br/>                       pd.DataFrame({'year':len(w)*[y],<br/>                                     'words':w}),<br/>                       ], axis=0)<br/>    all_words = all_words.reset_index(drop=True)</span><span id="8f22" class="oo ky ji pk b gy px pp l pq pr">all_words['pos_tag'] = pd.DataFrame(pos_tag(all_words.words))[1]<br/>all_words['chk'] = 1</span></pre><figure class="pb pc pd pe gt iv gh gi paragraph-image"><div class="gh gi py"><img src="../Images/fea6118be1aada8d80789ab72651d44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*we4ya79rXxrDc1S1MnFqsg.jpeg"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">这是预处理后的语音输出</p></figure><h2 id="02a6" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">前 50 个词的热图</h2><p id="523d" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">下面是分隔名词的代码片段—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="263f" class="oo ky ji pk b gy po pp l pq pr">nouns = all_words.loc[all_words.pos_tag=='NN'].words.value_counts()/10<br/>names = nouns.loc[nouns.values&gt;5].index<br/>names = names.drop('br')<br/>word_year = pd.pivot_table(all_words, values='chk', index='words', columns='year', aggfunc=np.sum)</span></pre><p id="0263" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated">这是你绘制热图的方法—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="aa66" class="oo ky ji pk b gy po pp l pq pr">fig,ax = plt.subplots(figsize=[10,10])<br/>colors = ["orange", "blue", "limegreen"]<br/>cmap0 = LinearSegmentedColormap.from_list("india_tricolor", colors)<br/>sns.heatmap(word_year.loc[names[:50]], cmap=cmap0)<br/>plt.title('Number of times the top 50 words were mentioned')</span></pre><h2 id="0e2d" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">词云生成器</h2><p id="f8b1" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这里有一个使用漂亮的<strong class="lr jj"> wordcloud </strong>库生成 wordcloud 的函数</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="17b1" class="oo ky ji pk b gy po pp l pq pr">def wc_generator(clean_speech, cmap=None):    <br/>    if cmap is None:<br/>        cmap = LinearSegmentedColormap.from_list('india_tricolor', ['orange', 'white', 'green'])<br/>    wordcloud = WordCloud(<br/>                          width=800, height=400,<br/>                          background_color='black',<br/>                          colormap=cmap, <br/>                          max_words=200,<br/>                          random_state=42<br/>                            ).generate(clean_speech)</span><span id="1a87" class="oo ky ji pk b gy px pp l pq pr">fig, ax = plt.subplots(dpi=400, figsize=[15,10])<br/>    plt.imshow(wordcloud, interpolation='bilinear')<br/>    plt.axis("off")<br/>    plt.figure()</span></pre><h2 id="bf86" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">语音长度时间序列</h2><p id="ac98" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">为了绘制时间序列，你可以写这段代码—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="c86c" class="oo ky ji pk b gy po pp l pq pr">colors = ["orange", "white", "limegreen"]<br/>cmap0 = LinearSegmentedColormap.from_list("india_tricolor", colors)<br/>india_tricolor = cmap0(np.linspace(0,1,21))</span><span id="874e" class="oo ky ji pk b gy px pp l pq pr">y = []<br/>l = []<br/>for year, text in speech.items():<br/>    y.append(year)<br/>    l.append(len(text))</span><span id="da94" class="oo ky ji pk b gy px pp l pq pr">fig, ax1 = plt.subplots(dpi=300,figsize=[15,6])<br/>ax2 = ax1.twinx()</span><span id="1380" class="oo ky ji pk b gy px pp l pq pr">spt = pd.Series(speech_time).values<br/>for y1, l1, c in zip(y,l, india_tricolor):<br/>    ax1.bar(y1, l1, color=c, edgecolor='k')<br/>    ax1.set_ylabel('Speech Length (words)')<br/>    <br/>ax2.plot(y,spt, marker='s',color='b')<br/>ax2.set_ylabel('Speech Length (minutes)')</span><span id="57bb" class="oo ky ji pk b gy px pp l pq pr">plt.xticks(np.arange(1999,2020), np.arange(1999,2020).tolist())<br/>plt.show()</span></pre><h2 id="698a" class="oo ky ji bd kz op oq dn ld or os dp lh ly ot ou lj mc ov ow ll mg ox oy ln oz bi translated">语音长度预测的自回归模型</h2><p id="d9fb" class="pw-post-body-paragraph lp lq ji lr b ls lt kj lu lv lw km lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">为了进行滚动预测并检查预测误差，您编写了这个简单的代码片段(感谢 www.machinelearningmastery.com<a class="ae ny" href="http://www.machinelearningmastery.com" rel="noopener ugc nofollow" target="_blank">的杰森·布朗利</a>！)—</p><pre class="pb pc pd pe gt pj pk pl pm aw pn bi"><span id="5738" class="oo ky ji pk b gy po pp l pq pr">from statsmodels.tsa.arima_model import ARIMA<br/>from sklearn.metrics import mean_squared_error</span><span id="6deb" class="oo ky ji pk b gy px pp l pq pr">X = df.sp_len.values<br/>size = int(len(X) * 0.6)<br/>train, test = X[0:size], X[size:len(X)]<br/>history = [x for x in train]<br/>predictions = list()<br/>for t in range(len(test)):<br/> model = ARIMA(history, order=(1,1,0))<br/> model_fit = model.fit(disp=0)<br/> output = model_fit.forecast()<br/> yhat = output[0]<br/> predictions.append(yhat)<br/> obs = test[t]<br/> history.append(obs)<br/>    print()<br/> print('predicted=%f, expected=%f' % (yhat, obs))<br/>error = np.sqrt(mean_squared_error(test, predictions))<br/>print('Test RMSE: %.3f' % error)</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="7cad" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><em class="ml">那都是乡亲们！</em></p><p id="e417" class="pw-post-body-paragraph lp lq ji lr b ls mm kj lu lv mn km lx ly mo ma mb mc mp me mf mg mq mi mj mk im bi translated"><em class="ml">再见！</em></p></div></div>    
</body>
</html>