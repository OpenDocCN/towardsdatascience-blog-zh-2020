<html>
<head>
<title>Required Sample Size for A/B Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">A/B 测试所需的样本量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a?source=collection_archive---------1-----------------------#2020-03-20">https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a?source=collection_archive---------1-----------------------#2020-03-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="08b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文描述了计算 A/B 测试所需最小样本量的一些流行方法。本文中描述的方法并没有什么新颖之处。然而，它将为初入该领域的数据科学家提供实用指南(严谨)。它还将帮助求职者在数据科学面试中脱颖而出。此外，这篇文章还揭示了一些流行的在线样本量计算器背后的数学原理。本文使用的公式来自<em class="kl">生物统计学基础(第 8 版)</em>。</p><h1 id="1ea0" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">为什么要计算所需的样本量？</h1><p id="f6ae" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">在 A/B 测试中，我们通常感兴趣的是测试治疗组与对照组在某个成功指标(如转化率)上是否有显著差异。无效假设是没有显著差异。</p><p id="1596" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们拒绝不应该拒绝的零假设时，第一类错误就发生了。一类错误率是一类错误发生的概率，也称为显著性水平或 alpha。α的常见值是 0.05。</p><p id="26fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们在应该拒绝零假设的时候没有拒绝零假设时，第二类错误就发生了。第二类错误率也称为β。</p><p id="38c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">统计功效是测试在应该拒绝零假设时拒绝零假设的概率。基本上是 1 减去β。统计功效的常见值是 0.80(因此β是 0.20)。</p><p id="df9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了获得有意义的结果，我们希望我们的测试有足够的统计能力。并且，样本大小影响统计功效。例如，在比较两个平均值时，可以使用下面的公式来计算统计功效。随着样本量的增加，统计功效增加。因此，为了使我们的测试具有理想的统计功效(通常为 0.80)，我们需要估计所需的最小样本量。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/c9f576cd4484861ce2826cef99376ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSC3XipUdZgq1JqRdhCrdg.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">(摘自《生物统计学基础》)</p></figure><p id="c1a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将通过一个假设的例子来理解所需样本量的计算。</p><h1 id="0672" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">例如:电子商务网站的转换率</h1><p id="a214" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">假设一个电子商务网站想要测试实现一个新功能(例如，布局或按钮)是否会显著提高转换率(购买次数除以会话/访问次数)。我们可以随机向 50%的用户展示新网页。然后，我们有一个测试组和一个控制组。一旦我们有了足够的数据点，我们就可以测试治疗组的转化率是否明显高于对照组(单侧测试)。无效假设是两组的转换率没有显著差异。</p><h1 id="f110" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">比较两个平均值的样本量</h1><p id="5eb2" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">进行测试的一种方法是计算治疗组和对照组的每日转化率。由于某一天一组中的转化率代表的是单个数据点，所以样本量实际上就是天数。因此，我们将测试测试期间每组每日平均转换率之间的差异。</p><p id="483b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">估计最小样本量公式如下:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mf"><img src="../Images/915c8064fe0a92de3abb493808ac8d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sHBSKbgQ-qGecDDuGG97UQ.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">(摘自《生物统计学基础》)</p></figure><p id="3c4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我们的示例，让我们假设过去 6 个月的平均每日转化率为 0.15，样本标准差为 0.05。随着新功能的推出，我们预计转化率会有 3%的绝对增长。因此，治疗组的转化率为 0.18。我们还假设两组样本的标准差相同。我们的参数如下。</p><ul class=""><li id="6340" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">mu1 = 0.15</li><li id="31c7" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">mu2 = 0.18</li><li id="fb30" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">σ1 =σ2 = 0.05</li></ul><p id="9dd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设α= 0.05，β= 0.20(幂= 0.80)，应用该公式，所需的最小样本量为 35 天。这与来自这个<a class="ae mu" href="https://www.stat.ubc.ca/~rollin/stats/ssize/n2.html" rel="noopener ugc nofollow" target="_blank">网络计算器</a>的结果一致。</p><h1 id="c30a" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">比较两个比例的样本量</h1><p id="08ab" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">双均值方法将每一天+组视为一个数据点。但是如果我们把重点放在个人用户和访问上呢？如果我们想知道测试需要多少次访问/会话呢？在这种情况下，一个组的转换率基本上是所有购买除以该组中的所有会话。如果每个会话是伯努利试验(转换或不转换)，每个组遵循二项式分布。为了测试治疗组和对照组之间转化率的差异，我们需要两个比例的测试。估计所需最小样本量的公式如下。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mv"><img src="../Images/161edc0494088cc525d8f1bc9e8b0223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5meNSZQYEkZIEnq3WktTrA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">(摘自《生物统计学基础》)</p></figure><p id="21ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设五五分成，我们有以下参数:</p><ul class=""><li id="70d3" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">p1 = 0.15</li><li id="df70" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">p2 = 0.18</li><li id="56e8" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">k = 1</li></ul><p id="1393" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用α= 0.05 和β= 0.20，应用该公式，所需的样本量为每组 1，892 个会话。这与来自这个<a class="ae mu" href="https://www.stat.ubc.ca/~rollin/stats/ssize/b2.html" rel="noopener ugc nofollow" target="_blank">网络计算器</a>的结果一致。这也接近使用<a class="ae mu" href="https://www.optimizely.com/sample-size-calculator/" rel="noopener ugc nofollow" target="_blank">优化</a>的样本量计算器计算转化率的结果。</p></div></div>    
</body>
</html>