<html>
<head>
<title>How to Implement Cough Detection on the Arm Cortex-M0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在手臂皮层上实现咳嗽检测-M0</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/keyword-spotting-embedded-on-the-arm-cortex-m0-69241f69fde3?source=collection_archive---------25-----------------------#2020-01-10">https://towardsdatascience.com/keyword-spotting-embedded-on-the-arm-cortex-m0-69241f69fde3?source=collection_archive---------25-----------------------#2020-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6036" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">小型微控制器中的关键字定位</h2></div><h1 id="376e" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">超低功耗 MCU 的挑战</h1><p id="c72d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">深度神经网络(DNNs)具有无与伦比的提取高级信息的能力(比如，“一个病人在过去的一个小时里咳嗽了几次？”)来自原始传感器数据。</p><p id="f3f3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">但是 dnn 通常在云中实现，因为它们对于嵌入式微控制器来说太耗费资源了。这让嵌入式系统工程师面临一个令人不安的选择:要么(1)将数据从传感器传输到基于云的神经网络，并付出电池寿命短、延迟差和数据隐私威胁的代价，要么(2)放弃深度神经网络的强大推理能力。</p><p id="0b8e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">目前针对这一问题的“edge AI”解决方案依赖于重型微处理器和 DSP，但这些器件可能会消耗 0.5 W 至 30 W 的功率。对于一个重量轻、不显眼的用于咳嗽计数的可穿戴设备来说，它们是不切实际的，因为它只有 10 毫瓦的备用功率。</p><p id="5c3b" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在本文中，我们描述了一些将深度神经网络压缩到资源受限平台中的技巧，如超低功耗 ARM Cortex-M0+微控制器。</p><h1 id="9bf7" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">嵌入式门控循环单元</h1><p id="fa45" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们的方法基于嵌入式门控递归单元(eGRU)，它利用了一些修改(见图 1 ),我们现在将依次考虑这些修改。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mb"><img src="../Images/2323ef3d61a47dda48f52b8667f36fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lTRC_NWTiEJ_WizOiBlE0Q.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">图 1:示出了(a) GRU 和(b) eGRU 的小区架构的框图。与 GRU 相比，eGRU 省略了重置门 r，并且不需要权重 wr。此外，它用 softsign 变体替代 sigmoid 和 tanh 激活功能。</p></figure><h2 id="b32a" class="mr kj it bd kk ms mt dn ko mu mv dp ks lj mw mx ku ln my mz kw lr na nb ky nc bi translated">单门机构</h2><p id="b985" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">eGRU 有一个更新门，但没有复位门。这将模型的占地面积减少了三分之一。现在，如果没有复位门，当出现某些大输入时，eGRU 容易闩锁。这一挑战在反向传播训练期间得到缓解:在每次迭代的正向传递期间，eGRU 状态从均匀随机分布初始化。这迫使 eGRU 在任何新的相关数据出现时丢弃过去的记忆。</p><h2 id="2241" class="mr kj it bd kk ms mt dn ko mu mv dp ks lj mw mx ku ln my mz kw lr na nb ky nc bi translated">软设计激活功能</h2><p id="f3a8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Cortex-M0+没有专用的浮点单元，这使得<em class="nd">软设计</em>成为传统 GRU<em class="nd">tanh</em>和<em class="nd"> sigmoid </em>激活功能的理想替代品。校正线性单元(ReLU)是更有效的激活函数，但是将 ReLU 与大量量化的权重相结合会破坏网络的性能。因此，<em class="nd"> softsign </em>是一个很好的妥协:它的饱和属性有助于保持网络性能，它的运行速度比 M0+上的<em class="nd"> tanh </em>或<em class="nd"> sigmoid </em>快 10 倍以上。</p><h2 id="ece8" class="mr kj it bd kk ms mt dn ko mu mv dp ks lj mw mx ku ln my mz kw lr na nb ky nc bi translated">重量量化</h2><p id="9855" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">eGRU 使用 3 位指数量化码存储其权重，从而将网络占用空间减少了 10 倍。</p><h2 id="d9db" class="mr kj it bd kk ms mt dn ko mu mv dp ks lj mw mx ku ln my mz kw lr na nb ky nc bi translated">Q15 定点运算</h2><p id="a606" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了符合 M0+ 32 位架构，eGRU 使用 Q15 16 位定点格式执行所有运算。由于指数权重量化，权重乘法(最常见的运算)被实现为右移运算。这使得速度提高了 20 倍。</p><h1 id="a1fd" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">评估 eGRU</h1><p id="d500" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">已经在不同复杂度的三个声学事件检测(AED)任务上评估了 eGRU:咳嗽检测、口语数字识别和城市声音识别(见图 2)。</p><p id="a1a7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">与在工作站上实现的传统 GRU 相比，在 ARM Cortex-M0+上实现的 eGRU 在咳嗽检测上表现相当好，在语音数字任务上稍差。eGRU 在城市声音任务上的表现比传统的 GRU 差得多(见图 3)。</p><p id="7790" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">目前，eGRU 对于嵌入在低功率微控制器单元上的短声音事件检测或关键词识别任务是有效的。</p><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ne"><img src="../Images/9f844ac40c86b39453e6b3f11f1278f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NHWBzI8wUqcStkDZLL5GmA.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">图 2: (a)在实验中调查的三个音频事件检测(AED)数据集和任务的总结。咳嗽检测是最容易的，因为样本相对较短，并且它是一个 3 类问题。城市音长 10 倍，由 10 个不同的类别组成。(b)说明用于所有任务的神经网络结构。前两层中的重复单位是 RNN、eGRU 或 GRU 细胞。输入是 FFT 向量序列</p></figure><figure class="mc md me mf gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nf"><img src="../Images/808053368d1f4c7dd3a888bde9f5a71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWMDtdBT8sAhr5WiYA4CpA.png"/></div></div><p class="mn mo gj gh gi mp mq bd b be z dk translated">图 3:显示嵌入 ARM Cortex-M0+处理器的 eGRU 模型性能的结果。(a)在不同的任务中，M0+上的 eGRU 模型与其在计算机上的完全精确的 GRU 模型相比，表现良好。然而，嵌入式 eGRU 模型是高效的，仅占用 GRU 的 10%大小，并且只需要廉价的整数运算。(eGRU 和 GRU 模型在所有任务中的验证精度曲线。eGRU 比 GRU 需要更长的历元来训练。(c)相应的验证损失曲线。eGRU 模型在短期任务中接近类似的损失</p></figure><p id="ccf6" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><em class="nd">对来源感兴趣？查看我们的原创研究</em> <a class="ae ng" href="https://sites.dartmouth.edu/odame/research/asthma-symptom-monitoring/" rel="noopener ugc nofollow" target="_blank"> <em class="nd">论文</em> </a> <em class="nd">。</em></p><p id="45fd" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated"><em class="nd">对茶感兴趣？这件物品与伯爵茶很相配。</em></p></div></div>    
</body>
</html>