<html>
<head>
<title>I created a Deep Learning powered Discord Bot to react with smily 😎</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我创造了一个深度学习驱动的不和谐机器人来和 smily 反应😎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/i-created-a-deep-learning-powered-discord-bot-to-react-with-smily-fec831d30d1b?source=collection_archive---------37-----------------------#2020-07-28">https://towardsdatascience.com/i-created-a-deep-learning-powered-discord-bot-to-react-with-smily-fec831d30d1b?source=collection_archive---------37-----------------------#2020-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f6ea" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">检测信息的情绪、情感和讽刺，并以适当的微笑回复。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/65d288cffe69c8ada6c03c58ff14cc3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lkkc5XESSqOcnTealYoHiw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">和我的同事一起微笑</p></figure><h1 id="6909" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">动机</h1><p id="aeff" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我最近看了很多论文，大部分是关于深度学习的，RNN，CNN，LSTM[1]，Transformer(注意力是你需要的全部)[3]，BERT 等等。这个名单只会越来越长。但是学习任何东西的最好方法是体验它。此外，如果我用我的脸部署一个机器人，在我的办公室服务器上，它有时可以在我忙于阅读时为我提供代理。😜开玩笑的。作为一个有经验的软件开发人员，这只是一种实现新知识的冲动。</p><p id="fb50" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">但是有一些很大的障碍。我上哪去弄这么多数据来训练一个神经网络？即使我管理数据，我也需要一台高保真配置的机器，或者至少需要一个强大的 GPU 来用数据训练我的模型。但是，有志者事竟成。🤓经过一番研究我发现，<a class="ae mr" href="https://github.com/bfelbo/DeepMoji" rel="noopener ugc nofollow" target="_blank"> DeepMoji </a> 🧙🏻‍♂️.我们可以使用像<a class="ae mr" href="https://github.com/bfelbo/DeepMoji" rel="noopener ugc nofollow" target="_blank"> DeepMoji </a>这样的预训练模型来实现我们的机器人。现在，在一个预先训练好的模型上工作，并根据需要使它变得更好是一种常见的做法。</p><p id="5250" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对我来说，这是一个制作不和谐机器人(因为我的办公室交流是不和谐的)的绝佳机会，也是体验 NLP 过程如何使用各种<a class="ae mr" href="https://www.bioinf.jku.at/publications/older/2604.pdf" rel="noopener ugc nofollow" target="_blank"> LSTM </a>和注意力机制的绝佳机会。这个机器人可以监听所有正在接收的消息，并用表情符号做出反应。</p><h1 id="532a" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">DeepMoji</h1><p id="e4b9" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">DeepMoji 是建立在 Keras 上的模型，后端在 Tensorflow 上。Deepmoji 基于这篇由 Bjarke Felbo、Alan Mislove、Anders sgaard、Iyad Rahwan 和 Sune Lehmann 开发的论文。</p><p id="6dfe" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">本文表明，通过将远程监督扩展到更多样化的噪声标签集，模型可以学习更丰富的表示。通过对包含 64 种常见表情符号之一的 12 亿条推文数据集进行表情符号预测，他们使用单一预训练模型在情绪、情感和讽刺检测的 8 个基准数据集上获得了最先进的性能。</p><h1 id="8961" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated"><strong class="ak">火炬手</strong></h1><p id="b85d" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated"><a class="ae mr" href="https://github.com/huggingface/torchMoji" rel="noopener ugc nofollow" target="_blank"> TorchMoji </a>是由<a class="ae mr" href="http://huggingface.co" rel="noopener ugc nofollow" target="_blank"> huggingface </a>构建的 DeepMoji 模型的 pyTorch 实现。DeepMoji 构建在 python 2.7 之上。所以我们将使用 TochMoji，它是 python3 中的一个实现。所以我们将使用 torchmoji 来实现。</p><h1 id="e05f" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">设置</h1><p id="00ce" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">对我来说，这次旅程中最紧张的部分是准备工作。因为我找不到任何合适的例子来在项目中实现 torchMoji。所有的例子都是在<a class="ae mr" href="http://jupyter.org" rel="noopener ugc nofollow" target="_blank"> jupyter </a>笔记本中使用的测试用例。但是我特别感兴趣的是使用我的 VS 代码在一个项目中实现它，这样我就可以用我的 discord BOT 连接它，并从那里发送响应。</p><p id="510f" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这里可以看到我的完整代码:<br/><a class="ae mr" href="https://github.com/anuragbhattacharjee/discord-nlp-smily-bot/tree/master" rel="noopener ugc nofollow" target="_blank">https://github . com/anuragbhattacharjee/discord-NLP-smily-bot/</a></p><p id="6a6e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">***在 github 库上给予⭐️之星帮助我们共同成长。你将获得项目的所有更新，我将获得更新项目的灵感。</p><p id="4031" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">那我们开始吧。</p><h2 id="c716" class="ms kz it bd la mt mu dn le mv mw dp li lz mx my lk md mz na lm mh nb nc lo nd bi translated">1.设置不和谐机器人</h2><p id="792c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">设置不和谐机器人很简单。导航至<a class="ae mr" href="https://discord.com/developers/applications" rel="noopener ugc nofollow" target="_blank">应用页面</a>。创建一个应用程序，然后在您的应用程序下创建一个 bot。</p><p id="3775" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">创建机器人后，您将看到机器人的几个设置。您将需要在您的 BOT 设置下使用“BOT Token”来从您的代码连接它。</p><p id="0e3d" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你进入 OAuth2 设置，你可以创建一个需要权限的链接，通过点击链接，一个不和谐的服务器所有者可以将机器人添加到他们的服务器。出于测试目的，我为自己创建了一个服务器，并在我的办公室服务器上测试之前先添加了 bot。</p><p id="e6d8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">此时，您应该看到机器人已经加入到您的服务器中。但是离线了。因为我们还没有把它和我们的代码联系起来，赋予它生命。🤖❤</p><p id="c7b7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您在创建 discord bot 时遇到任何问题，请遵循以下链接中的详细可视步骤:</p><div class="ne nf gp gr ng nh"><a href="https://discordpy.readthedocs.io/en/latest/discord.html" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">创建 Bot 帐户- discord.py 1.4.0a 文档</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">为了使用这个库和 Discord API，我们必须首先创建一个 Discord Bot 帐户。正在创建…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">discordpy.readthedocs.io</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ks nh"/></div></div></a></div><h2 id="3473" class="ms kz it bd la mt mu dn le mv mw dp li lz mx my lk md mz na lm mh nb nc lo nd bi translated">2.设置 python 环境</h2><p id="d80f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我在这里呆了很长时间。因为火炬手说要用<a class="ae mr" href="https://conda.io" rel="noopener ugc nofollow" target="_blank">康达</a>来酝酿项目。但是当我试图下载所有的依赖项时，遇到了一系列的错误。</p><p id="7ee9" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">虽然你可以使用任何你喜欢的环境管理工具(conda/venv)，你只需要知道如何使用它。Conda 在数据科学中使用时最受青睐，因为它们可以一次性设置所有需要的环境包。哪个更容易。但是我认为 Venv 更灵活。</p><p id="f669" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">不管怎样，经过几次反复试验失败后，我终于找到了一种方法。我下载了 torchMoji 项目，并在我的项目中作为一个包使用。我使用 venv 进行环境管理。你可以跟着我的 github repo 进行设置。<a class="ae mr" href="https://github.com/anuragbhattacharjee/discord-nlp-smily-bot/" rel="noopener ugc nofollow" target="_blank">https://github . com/anuragbhattacharjee/discord-NLP-smily-bot/</a></p><h2 id="d3c9" class="ms kz it bd la mt mu dn le mv mw dp li lz mx my lk md mz na lm mh nb nc lo nd bi translated">3.测试预测</h2><p id="bb9e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">设置完成后。现在是做一些测试的时候了。我必须对 torchMoji 库进行一些修改，以便在我的代码模块中正常工作。</p><p id="acdc" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在编写一个代码来使用 torchMoji 来预测微笑是非常简单的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="9683" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们可以通过在终端中运行来测试它</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="44ee" class="ms kz it nz b gy od oe l of og">python3</span><span id="3eb0" class="ms kz it nz b gy oh oe l of og">&gt;&gt;&gt; from emojize import Emojize<br/>&gt;&gt;&gt; e = Emojize()<br/>&gt;&gt;&gt; e.predict("I am doing great today!")<br/>:smile:</span></pre><h2 id="72d8" class="ms kz it bd la mt mu dn le mv mw dp li lz mx my lk md mz na lm mh nb nc lo nd bi translated">4.连接到不和谐机器人</h2><p id="e95f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这就是乐趣的开始。在您的项目设置好之后，现在是时候连接到您的 bot 并进行一些测试了。</p><p id="92b0" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">要连接到 discord，我们需要安装 discord.py 包，如果您安装了 requirements.txt，那么这个包应该已经安装了。</p><p id="f401" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在要连接到不和谐机器人，我们需要做一个。env 文件并将我们的密钥放在。env 文件作为 DISCORD_TOKEN。我制作了一个 env.demo 文件，并把它放在我的 git repo 中，这样你就可以使用它了。😁</p><p id="0221" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">设置好令牌后，我们可以连接到<code class="fe oi oj ok nz b">discord.Client()</code>并监听客户端的几个事件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="f7fb" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我做了一个简单的实现，只需发送一个 smily 消息并对所有消息做出反应。但是我们可以通过检查消息来让它变得更聪明，如果我被提到了，或者如果消息中有我的名字，只是为了让它更人性化，因为什么样的开发者会回复帖子中的每一条消息。🤷🏻‍♂️</p><p id="e0e8" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">但是我会根据您的需要来实现它。如果需要，不要忘记分叉和启动回购。</p><p id="af57" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">以下是您可以使用的不一致事件的详细信息:</p><div class="ne nf gp gr ng nh"><a href="https://discordpy.readthedocs.io/en/latest/api.html#event-reference" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">API 参考- discord.py 1.4.0a 文档</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">以下部分概述了 discord.py 的 API。请注意，该模块使用 Python 日志记录模块来记录诊断…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">discordpy.readthedocs.io</p></div></div></div></a></div></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="2aa7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">参考资料:</p><p id="6b54" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">[1] <strong class="ls iu">长 SHORT􏰀-TERM 记忆</strong> <br/>作者 Hochreiter 和 Schmidhuber，1997；苏茨基弗等人，https://www.bioinf.jku.at/publications/older/2604.pdf2014􏰅􏰊􏰊􏰈<a class="ae mr" href="https://www.bioinf.jku.at/publications/older/2604.pdf" rel="noopener ugc nofollow" target="_blank"/></p><p id="526f" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">[2] <strong class="ls iu">使用数百万个表情符号来学习任何领域的表达，以检测情绪、情感和讽刺</strong> <br/>作者:比亚克·费尔博、艾伦·米斯洛夫、安德斯·索加德、伊亚德·拉万、苏内·莱曼<br/><a class="ae mr" href="https://arxiv.org/abs/1708.00524" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/abs/1708.00524</a></p><p id="7687" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">阿希什·瓦斯瓦尼、诺姆·沙泽尔、尼基·帕尔马、雅各布·乌兹科雷特、莱昂·琼斯、艾丹·戈麦斯、卢卡斯·凯泽、伊利亚·波洛舒欣<br/>、T4</p><p id="b1ed" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">【4】<strong class="ls iu">deep moji</strong><br/><a class="ae mr" href="https://github.com/bfelbo/DeepMoji" rel="noopener ugc nofollow" target="_blank">https://github.com/bfelbo/DeepMoji</a></p><p id="56f6" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><strong class="ls iu"/><br/><a class="ae mr" href="https://github.com/huggingface/torchMoji" rel="noopener ugc nofollow" target="_blank">https://github.com/huggingface/torchMoji</a></p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="947f" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我希望你喜欢这个博客。这是我正在写的关于 NLP 的几个主题的系列的第二个故事。如果你想看更多我的博客，你可以在这里关注我。</p><p id="a0bb" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我是阿努拉格。从 2014 年开始专业从事软件工程师工作。我目前正在为我现在的雇主做一个 NLU 微服务。最近，我正在研究论文，以了解更多关于自然语言处理。在我的空闲时间，我喜欢开发简单有用的网络和移动应用程序。您可以在此与我联系:</p><p id="c4b2" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">🔗<a class="ae mr" href="https://www.linkedin.com/in/anuragbhattacharjee/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/anuragbhattacharjee/</a>t20】🕸<a class="ae mr" href="http://anuragbhattacharjee.com" rel="noopener ugc nofollow" target="_blank">http://anuragbhattacharjee.com</a></p><p id="b242" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">快乐编码😀</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/566ca98d76f146aad758f107fac91cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*HbkSk3h4cCT4GDLHi1YACQ.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿努拉格·巴塔查尔吉</p></figure></div></div>    
</body>
</html>