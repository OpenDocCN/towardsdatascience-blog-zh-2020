<html>
<head>
<title>Build machine learning models that work</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立有效的机器学习模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-machine-learning-models-that-work-8cb060117584?source=collection_archive---------32-----------------------#2020-02-06">https://towardsdatascience.com/build-machine-learning-models-that-work-8cb060117584?source=collection_archive---------32-----------------------#2020-02-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ba7c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">“150 个成功的机器学习模型:Booking.com 的 6 个经验教训”论文摘要</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b76cf58fc6c34e3ecf634d19ba078a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wbKzf2cq6obO7t2j"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">约书亚·索蒂诺在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="85bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.kdd.org/kdd2019/accepted-papers/view/150-successful-machine-learning-models-6-lessons-learned-at-booking.com" rel="noopener ugc nofollow" target="_blank"> 150 个成功的机器学习模型:Booking.com 的 6 个教训</a>是 2019 <a class="ae ky" href="https://www.kdd.org/" rel="noopener ugc nofollow" target="_blank"> KDD 会议</a>接受的论文。与业内大多数专注于机器学习理论方面的论文不同，本文更注重实践，并讨论了 Bookings.com 在构建其丰富的模型集合时遇到的挑战。我发现这篇论文非常有趣，因为它提供了我作为数据科学家一直思考的 6 个问题的见解；在本文中，我将尝试总结他们对每个问题的回答:</p><ul class=""><li id="2ceb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">机器学习可以解决哪些问题？</strong></li><li id="da41" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">如何用机器学习提高业务 KPI？</strong></li><li id="b5f2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">如何提高模型性能？</strong></li><li id="b25d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">当存在延迟/不完整的反馈时，如何评估模型？</strong></li><li id="1c4b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">有哪些方法可以加快预测过程？</strong></li><li id="1f59" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">如何 A/B 测试机器学习系统？</strong></li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><ol class=""><li id="0800" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu mq mb mc md bi translated"><strong class="lb iu">机器学习可以解决哪些问题？</strong></li></ol><p id="f2c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学团队的任务之一是确定组织中可以通过机器学习改进的领域，并对模型构建任务进行优先排序，以便有短期收益来证明团队的价值，并有长期计划来扩展团队的能力。Bookings.com 为他们的机器学习模型开发了一个分类法，可以作为这种规划的一个很好的参考点。他们将模型分为两大类:专用模型和通用模型:</p><p id="b0f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">具体型号</strong></p><p id="329c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">优势:良好的性能带来强大的业务影响</p><p id="5695" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺点:用例有限</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/2cf3555e48ee2596fd8d9c8b1c724abc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fKhnU5JkfAKvVmYEPDGRVw.png"/></div></div></figure><p id="d0c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">通用型号</strong></p><p id="c208" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">优势:适应范围广</p><p id="b945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">缺点:对特定业务指标的影响有限</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/06a63b30c6605acc18e2d716e147cf1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8v5xYtklU6gMFXCWVMkdxA.png"/></div></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="b4a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。如何用机器学习提高业务 KPI？</strong></p><p id="8804" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习模型经常优化相关指标，但不直接优化业务 KPI。例如，bookings.com 关心酒店预订率，但他们的推荐模型优化了点击率，即点击进入酒店描述页面的比率。<strong class="lb iu">除非模型直接优化业务 KPI，否则模型离线性能增益不会总是转化为业务价值增益。</strong>文中提到的情侣理由有:</p><p id="fae0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">a)模型指标与业务指标相关但不同，可能会无意中鼓励不良行为。例如，针对点击率(模型度量)进行优化的酒店推荐模型将推荐与用户已经参与的相似的酒店，这鼓励用户点击和比较更多的酒店列表。然而，这可能会将用户引入选择的悖论，并实际上伤害预订率(业务 KPI)。</p><p id="b7e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">b)机器学习模型对商业价值的贡献是有上限的。</p><p id="0633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">c)模型太好，即模型比你自己更了解你。这让一些消费者感到不安，因此会产生负面影响，因为用户会有意尝试与模型建议相反的行为。</p><p id="162b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个问题没有显而易见的解决方案，但该论文建议<strong class="lb iu">仅将离线指标用作健康检查，并更多地基于业务指标的在线测试来评估模型。</strong>本文中给出的一个例子是，当假设多样性对于推荐系统很重要，并且开发了一个具有更低均方根误差(RMSE)但更具多样性的新模型时，应该针对当前模型进行在线测试，而不考虑其更低的 RMSE，以查看它是否能提供更好的商业价值收益。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="42fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。如何提高模型性能？</strong></p><p id="7561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当谈到提高现有模型的性能时，收集更多的训练数据或试验不同的算法往往是首先想到的事情。不过，本文中提到了一个不同的选项——改变模型设置。</p><p id="063b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">在解决一个问题时，通常有不同的方法来构建目标变量</strong>(例如，日期灵活性，愿意改变日期以获得更好的价值，或者考虑比典型用户更多的日期等。)、<strong class="lb iu">和</strong> <strong class="lb iu">对于相同的构建目标变量</strong>可以有不同的学习设置(例如，预测酒店停留时间的回归可以变成多类分类)。<strong class="lb iu">改变设置是释放价值的非常有效的方式。</strong></p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="7488" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 4。当反馈延迟/不完整时，如何评估模型？</strong></p><p id="26d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用于评估分类模型的度量通常比较真实目标和预测。然而，有时在模型开发时无法获得目标。为了解决这个问题，该论文建议检查预测分布，并基于启发式进行判断调用。下面的截图是来自<strong class="lb iu">二元分类模型</strong>的 4 种可能的预测分布及其含义。(我没有在论文中找到红线是什么的解释，但是感谢<a class="mt mu ep" href="https://medium.com/u/7a925ed40bb4?source=post_page-----8cb060117584--------------------------------" rel="noopener" target="_blank">威廉·凯塞多·托里斯</a>指出它们是每种情况下的累积概率分布)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/c502b0f0dad1f598b058ed2af615bec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Al8jFMxrtZPiFfwFRUvuag.png"/></div></div></figure><ul class=""><li id="f2a6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">左上:模型的高错误率或数据的高偏差</li><li id="93f3" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">右上:有问题的特征，例如错误的比例或错误的异常值</li><li id="6a54" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">左下:过于稀疏的模型</li><li id="2bac" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">右下:可以区分 2 类的好模型。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="9037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 5。有哪些方法可以加快预测过程？</strong></p><p id="92e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">a)跨集群复制和分发模型</p><p id="caf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">b)建立可简化为内积的内部线性预测引擎</p><p id="2112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">c)建立具有较少参数的稀疏模型</p><p id="0b89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">d)当特征空间很小时，预计算所有预测并保存在键值对中；当特征空间很大时，预计算频繁请求</p><p id="3c57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">e)当每次预测需要许多请求时，批量请求变成一个</p><p id="957d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">f)应用最小特征变换</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="3a04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 6。如何 A/B 测试机器学习系统？</strong></p><p id="cff2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该论文描述了传统的随机 A/B 测试不够充分的三种情况，并且需要允许定制触发的更复杂的系统。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/8b820c110475c2f387b04ae4ecfa6ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*dc6iobag9MwuJyk-nXWFfA.png"/></div></figure><p id="1b8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提到的第一个实验设置是仅当测试对象暴露于模型时才触发实验。我能想到的一个需要这种设置的例子是，当测试只对用户子集进行预测的算法时。在这种情况下，我们希望确保只有这样的用户包含在测试中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/ae79884ddd4ac99bf2a1e54eae2241f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*DBItXtIjM0vadtG6OSnCNA.png"/></div></figure><p id="6b40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二种情况是处理标准取决于模型输出。该论文提到了一个例子，其中他们仅向被模型识别为目的地灵活的用户显示具有备选目的地的块。该实验将把随机选择的控制组用户与被预测为目的地灵活并被示出替代目的地的用户，以及被预测为目的地灵活但未被示出替代目的地的用户进行比较。实验组中被预测为目的地不灵活的用户被排除在治疗组之外。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/801313bbd6f8c6c7e29ef048d8e70691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*OxNb0OKvDv_Ah2Sitmtttg.png"/></div></figure><p id="f274" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第三个场景专门用于测试模型更新。在上面的截图中，模型 1 是原始模型，模型 2 是更新的挑战者模型。实验的设置使得只有两个模型不一致的情况被包括在处理组中进行分析。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="097e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你对更多细节感兴趣，可以在这里找到论文<a class="ae ky" href="https://www.kdd.org/kdd2019/accepted-papers/view/150-successful-machine-learning-models-6-lessons-learned-at-booking.com" rel="noopener ugc nofollow" target="_blank">；它非常容易消化，我强烈推荐每个人都去读一读。</a></p></div></div>    
</body>
</html>