<html>
<head>
<title>Python List Comprehension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 列表理解</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-list-comprehension-711330271401?source=collection_archive---------26-----------------------#2020-09-03">https://towardsdatascience.com/python-list-comprehension-711330271401?source=collection_archive---------26-----------------------#2020-09-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="f889" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python 列表终极指南！</h2><div class=""/><div class=""><h2 id="5f7f" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">成为列表理解专家</h2></div><p id="1813" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">列表理解是处理 Python 列表时最强大的特性之一。这个功能已经触手可及。不需要导入任何库或模块，因为列表理解是 Python 的一个内置特性。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/69f021af7681f57f833d034a659c9034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FrenwAAAcXE4CM7j"/></div></div><p class="lz ma gj gh gi mb mc bd b be z dk translated">图片由<a class="ae md" href="https://unsplash.com/@sortino" rel="noopener ugc nofollow" target="_blank">约书亚·索蒂诺</a>在<a class="ae md" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="4baa" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">如何写列表理解</h1><p id="6197" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">List Comprehension 可用于创建仅在一行中包含限制(用数学语句编写)的列表。除此之外，列表理解可以用来从另一个列表中创建一个新列表。</p><p id="d939" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">列表理解语法很容易理解，别担心，它很简单。做列表理解，需要先做一个方括号<code class="fe ni nj nk nl b">[]</code>。在括号内，您需要使用 for 关键字，后跟一个或多个您选择的子句。这里的表达可以是任何东西，你可以倾注你的创造力。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="86d3" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">基本语法</h1><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="f321" class="nq mm it nl b gy nr ns l nt nu">[<strong class="nl jd">expression</strong> for <strong class="nl jd">element</strong> in <strong class="nl jd">list</strong> if <strong class="nl jd">conditional</strong>]</span></pre><p id="278a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">以上列表理解等同于:</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="67c2" class="nq mm it nl b gy nr ns l nt nu">for <strong class="nl jd">element</strong> in <strong class="nl jd">list</strong>:<br/>    if <strong class="nl jd">conditional</strong>:<br/>        <strong class="nl jd">expression</strong> #appends the resulting element to the list</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="fb5c" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">例子</h1><p id="7ade" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">当然，我会给你提供一些例子！否则这篇文章就不完整。我将从最简单的开始，继续讨论更高级的应用程序。</p><h1 id="f0cb" class="ml mm it bd mn mo nv mq mr ms nw mu mv ki nx kj mx kl ny km mz ko nz kp nb nc bi translated">生成新列表</h1><p id="8133" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">1.制作一个由前 5 个自然数组成的新列表。</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="f50e" class="nq mm it nl b gy nr ns l nt nu">ls = [i for i in range(1, 6)] #ls = [1, 2, 3, 4, 5]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="4ee8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">2.制作前 5 个偶数自然数的新列表。</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="cc15" class="nq mm it nl b gy nr ns l nt nu">ls = [i for i in range(2, 11, 2)] #ls = [2, 4, 6, 8, 10] </span></pre><p id="0110" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">或者使用 if 来说明如何使用条件来创建新列表。</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="1b45" class="nq mm it nl b gy nr ns l nt nu">ls = [i for i in range(2, 11) if i % 2 == 0] #ls = [2, 4, 6, 8, 10]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="79b1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">3.列出前 5 个平方数</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="df57" class="nq mm it nl b gy nr ns l nt nu">ls = [i**2 for i in range(1, 6)] #ls = [1, 4, 9, 16, 25]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0ca0" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">使用我们声明的函数</h1><p id="1ff3" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">列表理解的条件不需要明确地写在方括号内。你可以预先声明一个函数，然后在列表理解中调用它。在下一个例子中，我们将这样做。</p><p id="4d58" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">4.列出 1 到 30 之间的质数</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="e637" class="nq mm it nl b gy nr ns l nt nu">import math</span><span id="ff15" class="nq mm it nl b gy oa ns l nt nu">def isPrime(n):<br/>    if n == 1:<br/>        return False<br/>    elif n == 2:<br/>        return True<br/>    elif n % 2 == 0:<br/>        return False<br/>    else:<br/>        for i in range(3, int(math.sqrt(n)) + 1, 2):<br/>            if n % i == 0:<br/>                 return False<br/>        return True</span><span id="008d" class="nq mm it nl b gy oa ns l nt nu">ls = [i for i in range(1, 31) if isPrime(i)]<br/>#ls = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="0d79" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">从另一个列表创建新列表</h1><p id="dc3b" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">列表理解的另一个有用的用法是从另一个列表中创建一个新列表。你可以这样想，你正在从原始列表中选择满足你需求的元素。然后，将这些项目分组到一个新列表中。以下是一些例子:</p><p id="bf71" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">5.只取原始列表中的偶数</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="63df" class="nq mm it nl b gy nr ns l nt nu">ls = [15, 6, 1, 3, 10]</span><span id="e0c2" class="nq mm it nl b gy oa ns l nt nu">result = [i for i in ls if i % 2 == 0] #result = [6, 10]</span></pre><p id="646f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">6.查找一个列表中也存在于另一个列表中的元素</p><pre class="lo lp lq lr gt nm nl nn no aw np bi"><span id="1e3e" class="nq mm it nl b gy nr ns l nt nu">ls = [15, 6, 1, 3, 10]<br/>ls2 = [1, 2, 3, 4, 5, 6]</span><span id="6669" class="nq mm it nl b gy oa ns l nt nu">result = [i for i in ls if i in ls2] #result = [6, 1, 3]</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="c304" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">最后的话</h1><p id="290a" class="pw-post-body-paragraph kr ks it kt b ku nd kd kw kx ne kg kz la nf lc ld le ng lg lh li nh lk ll lm im bi translated">Python 列表理解是您在编程工具箱中绝对需要的一项技术。它功能强大，易于在任何地方实现。过一段时间，相信我，你会习惯的。在这一点上，你可以随时轻松地使用它。如果您觉得这篇文章很有用，并且想了解更多关于 Python 的其他技巧，您可以阅读这篇文章:<a class="ae md" rel="noopener" target="_blank" href="/become-a-python-one-liners-specialist-8c8599d6f9c5">成为 Python“一行程序”专家</a>。</p><p id="a809" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最诚挚的问候，</p><p id="cb59" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">弧度克里斯诺</strong></p></div></div>    
</body>
</html>