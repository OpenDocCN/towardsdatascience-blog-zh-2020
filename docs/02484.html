<html>
<head>
<title>Deploying Julia projects on Heroku.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Heroku.com部署Julia项目</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-julia-projects-on-heroku-com-eb8da5248134?source=collection_archive---------31-----------------------#2020-03-09">https://towardsdatascience.com/deploying-julia-projects-on-heroku-com-eb8da5248134?source=collection_archive---------31-----------------------#2020-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/50a8169c3c507ddb8517dc74f6b129ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FjGDSfbl0ExUVBb7pbvejQ.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@r3dmax?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔纳森派</a>在<a class="ae kc" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="683e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗨！今天我将向你展示如何在云应用平台Heroku上用Julia编程语言部署项目。在本例中，我将部署一个<a class="ae kc" href="https://github.com/waralex/Dashboards.jl" rel="noopener ugc nofollow" target="_blank"> Dashboards.jl </a>文件进行演示。</p><p id="7b74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇博客的所有内容都来自我的GitHub库，最终产品是这里的。请稍后查看示例:)</p><p id="1c72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们开始之前，您将需要以下内容:您的Dashboard文件、一个Heroku帐户、一个Julia安装，以及安装的<a class="ae kc" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank"> Heroku命令行界面</a> (CLI)。对于这个例子，我将在这里使用来自<a class="ae kc" href="https://github.com/waralex/DashboardsExamples/blob/master/dash_tutorial/5_interactive_graphing_2.jl" rel="noopener ugc nofollow" target="_blank">的仪表板文件</a>。</p><p id="daa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您可以创建一个新文件夹来存储部署应用程序所需的所有文件。这里，我将使用文件夹<code class="fe lb lc ld le b">juliadash</code>作为示例目录。之后输入<code class="fe lb lc ld le b">julia</code>进入茱莉亚。</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="858a" class="ln lo iq le b gy lp lq l lr ls">mkdir juliadash<br/>cd juliadash<br/>julia</span></pre><p id="8f9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你在Julia中，你将需要创建一个新的项目，包含<code class="fe lb lc ld le b">Project.toml</code>和<code class="fe lb lc ld le b">Manifest.toml</code>文件，包含你需要使用的软件包和注册表的版本信息。以下代码使用这两个文件激活您的新环境，并添加您的应用程序所需的包，然后将所有信息存储在这两个文件中。</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="cb39" class="ln lo iq le b gy lp lq l lr ls">using Pkg; Pkg.activate(".")<br/>Pkg.add("Dashboards")       #Do this as many times as you need to, changing the string (containing the package name) every time.<br/>Pkg.add("HTTP")<br/>⋮</span></pre><p id="b271" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，您可以关闭cmd/终端窗口。</p><p id="6aa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将创建一个<code class="fe lb lc ld le b">Procfile</code>，这是一个空白文件，Heroku使用它来指导您的文件的部署。您需要创建名为Procfile的文件，并将以下代码行复制并粘贴到该文件中。</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="1b66" class="ln lo iq le b gy lp lq l lr ls">web: julia --project app.jl $PORT</span></pre><p id="100c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您需要用您的应用程序的启动文件的文件名替换<code class="fe lb lc ld le b">app.jl</code>。然后，您可以将文件保存到您的应用程序所在的目录中。</p><p id="7861" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您的目录应该有您的仪表板文件、<code class="fe lb lc ld le b">Project.toml</code>、<code class="fe lb lc ld le b">Manifest.toml</code>以及<code class="fe lb lc ld le b">Procfile</code>。</p><p id="ccaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于您通常将仪表板应用程序托管在本地主机的一个端口上，您将需要替换您的主机方法和编号，因为Heroku将应用程序部署在一个随机端口上。如果您使用的是HTTP.jl，您需要用以下内容替换您的端口:</p><p id="e464" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主持方式:用<code class="fe lb lc ld le b">"0.0.0.0"</code>代替<code class="fe lb lc ld le b">HTTP.Sockets.localhost</code></p><p id="f75a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主机端口:将<code class="fe lb lc ld le b">8080</code>替换为<code class="fe lb lc ld le b">parse(Int,ARGS[1])</code></p><p id="2b47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(如果你想知道，<code class="fe lb lc ld le b">parse(Int,ARGS[1])</code>对应的是<code class="fe lb lc ld le b">Procfile</code>中的<code class="fe lb lc ld le b">$PORT</code>。)</p><p id="e210" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我的HTTP serve函数的样子:(更多细节，请看我在这个存储库中的代码。)</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="c393" class="ln lo iq le b gy lp lq l lr ls">HTTP.serve(handler, "0.0.0.0", parse(Int,ARGS[1]))</span></pre><p id="402b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，您可以在cmd或终端上打开一个新窗口，并通过键入以下内容登录Heroku CLI帐户:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="f738" class="ln lo iq le b gy lp lq l lr ls">heroku login</span></pre><p id="007f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该会打开一个浏览器窗口，让您输入凭据。完成登录并关闭浏览器窗口后，您会发现自己已经登录。现在，您可以再次进入您的目录并部署您的应用程序。</p><p id="5585" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请在下面的代码中将<code class="fe lb lc ld le b">my-app-name</code>替换为您希望调用应用程序的名称！</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="63f5" class="ln lo iq le b gy lp lq l lr ls">cd juliadash<br/>git init<br/>HEROKU_APP_NAME=my-app-name<br/>heroku create $HEROKU_APP_NAME --buildpack https://github.com/Optomatica/heroku-buildpack-julia.git<br/>git heroku git:remote -a $HEROKU_APP_NAME<br/>git add .<br/>git commit -am "make it better"<br/>git push heroku master</span></pre><p id="5d78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦该过程完成，应用程序将被部署并投入使用！</p><p id="8071" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能需要一段时间，但一旦完成，您就可以运行以下命令在浏览器上打开您部署的应用程序！</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="6544" class="ln lo iq le b gy lp lq l lr ls">heroku open -a $HEROKU_APP_NAME</span></pre><p id="5a73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这有助于你了解更多关于使用Heroku部署应用程序的知识。这种方法不仅限于仪表板应用程序。</p><p id="6670" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想看看我做的最终产品，点击<a class="ae kc" href="https://juliadash.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://juliadash.herokuapp.com/</a>了解一下！</p><p id="37e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">引用:</strong>该库中的<code class="fe lb lc ld le b">dashex.jl</code>文件来自这里的<a class="ae kc" href="https://github.com/waralex/DashboardsExamples/blob/master/dash_tutorial/5_interactive_graphing_2.jl" rel="noopener ugc nofollow" target="_blank"/>！</p></div></div>    
</body>
</html>