<html>
<head>
<title>General Git Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通用 Git 工作流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/general-git-workflow-94cb22d1f18a?source=collection_archive---------24-----------------------#2020-02-29">https://towardsdatascience.com/general-git-workflow-94cb22d1f18a?source=collection_archive---------24-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d985" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">使用 Git 时最常用的命令</em></h2></div><p id="77bf" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">Git 是最常用的代码版本跟踪工具，可能每个开发人员都使用它，无论你使用 Github、Gitlab 还是 Bitbucket，只要你想分享你的代码或学习他人的代码，或与他人合作开发一个项目，git 都是必备的能力。</p><p id="592e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">那里有很多 git 使用教程、命令介绍文章和文档。但坦率地说，当我查看大多数官方文档时，我被太多的命令和太详细的介绍填满了，这使我很难找到我真正需要的东西。因此，在本文中，我将只介绍您在使用 git 时肯定会用到的命令行工具。</p><p id="80c2" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我将分为两个工作流程:</p><ol class=""><li id="aa19" class="lf lg it kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">使用现有存储库</li><li id="695a" class="lf lg it kl b km lo kp lp ks lq kw lr la ls le lk ll lm ln bi translated">创建自己的存储库</li></ol><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/f5717937ba209efe3d63e8373cdc1b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMC83-7fB27k1tTMxDfRaQ.png"/></div></div></figure><h1 id="f6af" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">使用现有存储库</h1><p id="02bc" class="pw-post-body-paragraph kj kk it kl b km mx ju ko kp my jx kr ks mz ku kv kw na ky kz la nb lc ld le im bi translated">当你在一家公司工作时，这是最常见的，在大多数情况下，你需要从其他人那里接管一个项目，或者只是在一个大型项目上与其他开发人员合作。一般的工作流程是:</p><p id="2814" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">给自己找一个工作文件夹</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="b23f" class="nh mg it nd b gy ni nj l nk nl">cd {YOUR_FOLDER}</span></pre><p id="5b40" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">克隆项目(使用 SSH 或 HTTPS)</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="2a5f" class="nh mg it nd b gy ni nj l nk nl">git clone {PROJECT_PATH}</span></pre><p id="4b27" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">现在项目已经下载到你的本地计算机上，你就在主分支了。下一步是创建您自己的分支，并在该分支上开发您的特性。<strong class="kl iu">如果你不是项目的所有者或者你和许多其他开发人员一起工作，千万不要直接在主分支</strong>上进行变更。经验法则是，我们总是把母版制作得干净整洁，直到可以投入生产。</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="28f3" class="nh mg it nd b gy ni nj l nk nl">git checkout -b {YOUR_BRANCH_NAME}</span></pre><p id="96b6" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果你已经有一个分支，需要转移到那个分支，你只需要</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="10ab" class="nh mg it nd b gy ni nj l nk nl">git checkout {YOUR_EXISTING_BRANCH}</span></pre><p id="6d19" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">好了，现在你在你的分支上，你做了一些改变。一切看起来都很好，您认为您已经准备好向 master 更新您的更改了。然后，您需要首先将您的更改提交到本地:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="4a23" class="nh mg it nd b gy ni nj l nk nl"># check what files you've changed<br/>git status</span><span id="4bde" class="nh mg it nd b gy nm nj l nk nl"># add those files to staging<br/>git add .</span><span id="ea16" class="nh mg it nd b gy nm nj l nk nl"># commit your files<br/>git commit -m "what I have done"</span></pre><p id="9f8c" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这三个命令可能是 git 最常用的命令。除了添加所有你修改过的文件的<code class="fe nn no np nd b">git add .</code>，你还能做什么</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="dc10" class="nh mg it nd b gy ni nj l nk nl">git add {LIST OF SPECIFIC FILES}</span></pre><p id="79b1" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">并分别提交。</p><p id="89d4" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kl iu"> <em class="nq">提示</em> </strong></p><p id="2906" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">运行</em> <code class="fe nn no np nd b"><em class="nq">git status</em></code> <em class="nq">后，您发现一些您不打算添加到提交中的系统文件，如</em> <code class="fe nn no np nd b"><em class="nq">.idea, __cache__</em></code> <em class="nq">等。然后你需要编辑你的</em> <code class="fe nn no np nd b"><em class="nq">.gitignore</em></code> <em class="nq">文件(或者如果根文件夹中不存在就直接添加)。</em></p><p id="64bf" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><code class="fe nn no np nd b"><em class="nq">.gitignore</em></code> <em class="nq">顾名思义就是告诉 git 故意忽略一些不必要的文件，这样 git 就会跟踪这些文件的变化。例如，您可以添加</em></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="9acc" class="nh mg it nd b gy ni nj l nk nl"><em class="nq">.idea<br/>*/**/.idea</em></span></pre><p id="133e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">变成你的</em> <code class="fe nn no np nd b"><em class="nq">.gitignore</em></code> <em class="nq">。</em></p><p id="13e5" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">你可以做的另一件事是使用</em> <code class="fe nn no np nd b"><em class="nq">git rm</em></code> <em class="nq">，它从 git 中移除文件并停止跟踪它，而不是从你的电脑中！</em></p><p id="1203" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">现在您已经提交了您的文件，并且您对它们很有信心，所以让我们推进到远程并合并到主文件。</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="caa8" class="nh mg it nd b gy ni nj l nk nl">git push origin {YOUR_BRANCH_NAME}</span></pre><p id="bf24" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在大多数情况下，你不能做<code class="fe nn no np nd b">git push origin master</code>，因为你的授权是受限的。但即使可以，也不应该这么做。这里的规则是，如果你在一个分支上工作，总是推到远程分支。上面的命令将您的本地分支推送到远程分支(如果远程分支不存在，git 将帮助您创建一个)。</p><p id="282e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">当您执行上述命令时，通常它会在控制台中返回一个 url，引导您提交一个合并请求。请注意，这个合并请求是将您的远程分支合并到远程主服务器。您可以提交您的合并请求，并让回购所有者批准合并到主(可能需要单独解决冲突的方式)。</p><p id="9f13" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kl iu"> <em class="nq">提示</em> </strong></p><p id="0e2a" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">假设远程主机非常活跃，并且有许多其他开发人员正在开发它。在提交合并请求之前，您希望将新的更改合并到远程主分支中，并可能解决本地主分支中的冲突。那么你可以这样做:</em></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="f5ca" class="nh mg it nd b gy ni nj l nk nl"><em class="nq"># go to your local master<br/>git checkout master</em></span><span id="f958" class="nh mg it nd b gy nm nj l nk nl"><em class="nq"># merge your local master with remote master<br/>git pull origin master</em></span><span id="8b0e" class="nh mg it nd b gy nm nj l nk nl"><em class="nq"># go to your branch<br/>git checkout {YOUR_BRANCH}</em></span><span id="0b35" class="nh mg it nd b gy nm nj l nk nl"><em class="nq"># merge master into your branch<br/>git rebase master</em></span></pre><p id="5c6c" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">最后一步你还可以做</em> <code class="fe nn no np nd b"><em class="nq">git merge master</em></code> <em class="nq">。他们以不同的方式绑定了 git 提交的历史。你可以在这里</em>  <em class="nq">查看</em> <a class="ae nr" href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing" rel="noopener ugc nofollow" target="_blank"> <em class="nq">的区别。</em></a></p><p id="3599" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这些基本上都是关于与他人一起工作，使用最常用的命令，以及您可能遇到的问题。</p><h1 id="27ab" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">创建自己的存储库</h1><p id="dbc8" class="pw-post-body-paragraph kj kk it kl b km mx ju ko kp my jx kr ks mz ku kv kw na ky kz la nb lc ld le im bi translated">想想当你在笔记本电脑上做自己的项目时，突然它在你的脑海中闪现——这是一个多么棒的项目！我要和别人分享！</p><p id="f529" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">酷，让我们创建自己的回购协议，并把我们的代码放在网上。它分为两步:</p><h2 id="3849" class="nh mg it bd mh ns nt dn ml nu nv dp mp ks nw nx mr kw ny nz mt la oa ob mv oc bi translated">创建远程存储库</h2><p id="bbfc" class="pw-post-body-paragraph kj kk it kl b km mx ju ko kp my jx kr ks mz ku kv kw na ky kz la nb lc ld le im bi translated">转到您的 Github、GitLab 或 Bitbucket，并选择 create a new repository。这里我以 Github 为例:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi od"><img src="../Images/82671fe428fdfc4057fd6070be2bbfed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjClp9FL7UB7z0MZ8nNy3A.png"/></div></div></figure><p id="011b" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">给你的项目一个名字和一些描述，然后点击<code class="fe nn no np nd b">Create repository</code>按钮。</p><p id="82ed" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">将克隆按钮中的 URL(SSH 或 HTTPS)复制到剪贴板，我们稍后会用到它。</p><p id="b9ca" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">现在回到你的牛逼项目文件夹根目录</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="c87b" class="nh mg it nd b gy ni nj l nk nl">cd {YOUR_PROJECT_ROOT}</span></pre><p id="36f0" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">用 git 初始化你的项目</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="40f5" class="nh mg it nd b gy ni nj l nk nl">git init</span></pre><p id="3247" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这会在你的文件夹中启动 git，如果你运行<code class="fe nn no np nd b">ls -a</code>，你将会在你的根文件夹中看到隐藏的文件<code class="fe nn no np nd b">.git</code>，它告诉你从现在开始，git 将会跟踪这个文件夹中的每一个变化。</p><p id="8cb9" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">接下来是将您的本地文件连接到您的远程 repo，如果您运行</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="898d" class="nh mg it nd b gy ni nj l nk nl">git remote -v</span></pre><p id="6a86" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这将列出您当前项目的远程 url，到目前为止它应该是空的，因为您创建了一个远程 repo，您还告诉 git 跟踪您的文件，但是您还没有告诉 git 如何将您的本地 repo 连接到远程。为此，请运行:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="7941" class="nh mg it nd b gy ni nj l nk nl">git remote add origin {URL_OF_YOUR_REPO}</span></pre><p id="13ea" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这将您的本地项目与您刚刚创建的远程 repo 连接起来，并给它一个昵称<code class="fe nn no np nd b">origin</code>(您可以随意命名，但人们通常将其命名为 origin)。</p><p id="b05a" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kl iu"> <em class="nq">提示</em> </strong></p><p id="f4bc" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">一个本地 repo 实际上可以连接多个不同 URL 的远程 repo。你只要做:</em></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="e3c6" class="nh mg it nd b gy ni nj l nk nl"><em class="nq">git remote add upstream1 {SECOND_URL}</em></span><span id="93ac" class="nh mg it nd b gy nm nj l nk nl"><em class="nq">git remote add upstream2 {THIRD_URL}</em></span><span id="891e" class="nh mg it nd b gy nm nj l nk nl"><em class="nq">...</em></span></pre><p id="aae7" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">这样，当您在本地进行更改时，您可以同时更新多个远程回购。</em></p><p id="35a2" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">现在再次运行<code class="fe nn no np nd b">git remote -v</code>，你会看到你的网址列在那里。让我们推出改变，分享我们的代码！</p><p id="e47f" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">添加和提交代码的步骤是一样的:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="cbbe" class="nh mg it nd b gy ni nj l nk nl"># check what files you've changed<br/>git status</span><span id="087f" class="nh mg it nd b gy nm nj l nk nl"># add those files to staging<br/>git add .</span><span id="755b" class="nh mg it nd b gy nm nj l nk nl"># commit your files<br/>git commit -m "what I have done"</span></pre><p id="b9c0" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">要将您的更改推送到遥控器，有两种情况。</p><ol class=""><li id="b619" class="lf lg it kl b km kn kp kq ks lh kw li la lj le lk ll lm ln bi translated">如果遥控器有一些文件不包含在你的本地，比方说，一个<code class="fe nn no np nd b">README.md</code>的创建回购初始化，你需要:</li></ol><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="c102" class="nh mg it nd b gy ni nj l nk nl">git pull origin master --allow-unrelated-histories</span><span id="4211" class="nh mg it nd b gy nm nj l nk nl"># resolve conflicts and then push to remote</span><span id="1a90" class="nh mg it nd b gy nm nj l nk nl">git push origin master</span></pre><p id="373e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><code class="fe nn no np nd b">allow-unrelated-histories</code>是在分支独立开始时合并它们，这里就像你的本地文件夹和你的远程 repo。</p><p id="6bf5" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">2.如果你的遥控器是干净的，那么就做<code class="fe nn no np nd b">git push origin master</code>。</p><p id="d8a5" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kl iu"> <em class="nq">提示</em> </strong></p><p id="fb78" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">你不需要每次都输入回购名称。运行</em></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="de3f" class="nh mg it nd b gy ni nj l nk nl"><em class="nq">git push --set-upstream origin master</em></span></pre><p id="54de" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">这明确告诉我们</em> <code class="fe nn no np nd b"><em class="nq">origin</em></code> <em class="nq">将会被默认分支推送到，这样下次你只需要运行</em> <code class="fe nn no np nd b"><em class="nq">git push</em></code> <em class="nq">。</em></p><p id="c73e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><strong class="kl iu"> <em class="nq">提示</em> </strong></p><p id="8d4a" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">当您在本地有多个分支，并且您需要在分支之间跳转时，您可能会遇到 git 告诉您在切换分支之前提交的问题，但是您不确定当前的更改，并且您不想提交，在这种情况下，您可以:</em></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="9a74" class="nh mg it nd b gy ni nj l nk nl"><em class="nq">git stash</em></span></pre><p id="8074" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这将保存您的更改，并使您能够跳转到另一个分支而无需提交它们。当你回到这个分支时，你可以运行:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="2ca6" class="nh mg it nd b gy ni nj l nk nl"><em class="nq">git stash pop</em></span></pre><p id="824e" class="pw-post-body-paragraph kj kk it kl b km kn ju ko kp kq jx kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nq">恢复您刚才所做的更改。</em></p></div></div>    
</body>
</html>