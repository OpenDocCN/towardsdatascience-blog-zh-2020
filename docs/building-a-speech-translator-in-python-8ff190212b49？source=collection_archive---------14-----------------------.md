# ç”¨ Python æ„å»ºè¯­éŸ³ç¿»è¯‘å™¨

> åŸæ–‡ï¼š<https://towardsdatascience.com/building-a-speech-translator-in-python-8ff190212b49?source=collection_archive---------14----------------------->

## ä½¿ç”¨è°·æ­Œç¿»è¯‘ API å°†ä½ çš„æ¼”è®²ç¿»è¯‘æˆå¤šç§è¯­è¨€

![](img/0a5f44303b465d962b99a42bd855eadd.png)

ç…§ç‰‡ç”±[äºšå†å±±å¤§Â·å¥ˆç‰¹](https://www.pexels.com/@agk42?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)ä»[æ´¾å…‹æ–¯](https://www.pexels.com/photo/high-angle-photo-of-robot-2599244/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)æ‹æ‘„

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Python å°†ä½ çš„æ¼”è®²ç¿»è¯‘æˆä¸åŒçš„è¯­è¨€ã€‚è¯­éŸ³ç¿»è¯‘å°†è®°å½•ä½ çš„è®²è¯ï¼Œç„¶åç†è§£ä½ åœ¨è¯´ä»€ä¹ˆï¼Œå¹¶ç¿»è¯‘æˆä½ å–œæ¬¢çš„è¯­è¨€ã€‚ç¿»è¯‘è¿‡ç¨‹å®Œæˆåï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰æ‚¨çš„ä»£ç ï¼Œä½¿å…¶æ˜¾ç¤ºç¿»è¯‘åçš„æ–‡æœ¬ã€‚è¿™æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„é¡¹ç›®ï¼Œä½ ä¼šå–œæ¬¢å·¥ä½œï¼Œç”šè‡³å¯èƒ½ç»™ä½ çš„æœ‹å‹å’Œå®¶äººç•™ä¸‹æ·±åˆ»å°è±¡ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ æƒ³å’Œä¸€ä¸ªæ¥è‡ªä¸åŒå›½å®¶çš„äººäº¤æµæ—¶ï¼Œä½ å¿…é¡»é›‡ä½£ä¸€ä¸ªä¼šè¯´ä¸¤ç§è¯­è¨€çš„äººæ¥åšæ‰€æœ‰çš„ç¿»è¯‘å·¥ä½œã€‚ä»¥å‰æ˜¯è¿™æ ·ï¼Œä½†æ˜¯éšç€äº’è”ç½‘å’ŒæŠ€æœ¯çš„å‘å±•ï¼Œäº¤æµå˜å¾—è¶Šæ¥è¶Šå®¹æ˜“äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è°·æ­Œç¿»è¯‘åœ¨å‡ ç§’é’Ÿå†…ç¿»è¯‘æˆ‘ä»¬æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼Œè¿™éš¾é“ä¸ä»¤äººå…´å¥‹å—ï¼ŸYouTube ä¹Ÿåœ¨ä¸ºä¸€äº›è§†é¢‘è¿™æ ·åšã€‚ä»–ä»¬åˆ©ç”¨äººå·¥æ™ºèƒ½å°†è§†é¢‘ä¸­çš„æ¼”è®²å®æ—¶è½¬æ¢æˆä¸åŒçš„è¯­è¨€ã€‚è¿™ä¸ªå¾ˆç¥å¥‡ï¼Œå€¼å¾—åˆ†äº«ã€‚æ‰€ä»¥æˆ‘æƒ³å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Python æ¥å®ç°è¿™ä¸€ç‚¹ã€‚è¿™æ ·ä½ å°±æœ‰äº†ä¼šè¯´å¤šç§è¯­è¨€çš„ç§äººç¿»è¯‘ã€‚ğŸ™‚

# æˆ‘ä»¬å¼€å§‹å§ï¼

æˆ‘æƒ³æä¸€ä¸‹ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†åŒæ—¶ç»ƒä¹ å¤šä¸ªä¸»é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªç»“åˆä½ çš„æŠ€èƒ½ï¼Œåˆ›é€ æ›´å¥½çš„ä¸œè¥¿çš„å¥½æ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¯­éŸ³è¯†åˆ«å™¨æ¥æ•™æˆ‘ä»¬çš„ç¨‹åºç†è§£æˆ‘ä»¬çš„è¯­éŸ³ï¼Œç„¶åæˆ‘ä»¬å°†å®ƒè½¬æ¢æˆæ–‡æœ¬ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªç¿»è¯‘å™¨ï¼Œå°†æ–‡æœ¬è½¬æ¢æˆæˆ‘ä»¬å–œæ¬¢çš„è¯­è¨€ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªæ–‡æœ¬åˆ°è¯­éŸ³çš„æ¨¡å‹ï¼Œè¿™æ ·æˆ‘ä»¬çš„ç¨‹åºå°±å¯ä»¥å¤§å£°è¯´è¯ã€‚

## **å¯¼å…¥åº“**

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®‰è£…æˆ‘ä»¬å°†åœ¨è¿™ä¸ªç¨‹åºä¸­ä½¿ç”¨çš„æ¨¡å—ã€‚æˆ‘ä»¬å°†å®‰è£… SpeechRecognitionã€Pyttsx3 å’Œ Googletrans æ¨¡å—ã€‚SpeechRecognition å’Œ Googletrans æ¨¡å—æ˜¯ç”±æˆ‘ä»¬åœ¨ Google çš„æœ‹å‹åˆ›å»ºçš„ã€‚æ‰€æœ‰è¿™äº›æ¨¡å—éƒ½å¯ä»¥å…è´¹å®‰è£…å’Œä½¿ç”¨ï¼Œè¿™æ˜¯ç¼–ç¨‹è¡Œä¸šå‘å±•å¦‚æ­¤è¿…é€Ÿçš„ä¸€ä¸ªé‡è¦åŸå› ã€‚ä¸‹é¢æ˜¯ pip åŒæ—¶å®‰è£…å¤šä¸ªæ¨¡å—çš„ä»£ç :

```
pip install speechrecognition pyttsx3 googletrans
```

æ˜¯çš„ï¼Œå°±æ˜¯å®ƒã€‚ä½¿ç”¨ pip å®‰è£…æ¨¡å—éå¸¸å®¹æ˜“ã€‚å¦‚æœæ‚¨æƒ³äº†è§£è¿™äº›æ¨¡å—çš„æ›´å¤šä¿¡æ¯ï¼Œè¿™é‡Œæœ‰å®ƒä»¬çš„æ–‡æ¡£é¡µé¢çš„é“¾æ¥ã€‚

# 1.è¯­éŸ³è¯†åˆ«

## **å®šä¹‰è¯†åˆ«å™¨**

```
r = sr.Recognizer()
```

## **å®šä¹‰æ‚¨çš„è¯ç­’**

åœ¨å®šä¹‰éº¦å…‹é£å®ä¾‹ä¹‹å‰ï¼Œæˆ‘ä»¬å°†é€‰æ‹©è¾“å…¥è®¾å¤‡ã€‚å¯èƒ½æœ‰å¤šä¸ªè¾“å…¥è®¾å¤‡æ’å…¥æ‚¨çš„è®¡ç®—æœºï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©æˆ‘ä»¬æ‰“ç®—ä½¿ç”¨å“ªä¸€ä¸ªã€‚ä½ çŸ¥é“æœºå™¨æ˜¯å‡äººï¼Œä½ å¿…é¡»å‡†ç¡®åœ°å‘Šè¯‰ä»–ä»¬è¯¥åšä»€ä¹ˆï¼ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼Œä½ å°†èƒ½å¤Ÿçœ‹åˆ°ä½ çš„è¾“å…¥è®¾å¤‡ã€‚

```
print(sr.Microphone.list_microphone_names())
```

![](img/ea0e956eb612dbe28414fcc2b08bf35b.png)

è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°æˆ‘æ£€æŸ¥è¾“å…¥è®¾å¤‡çš„ç»“æœã€‚æˆ‘å»ºè®®æ‚¨åœ¨å®šä¹‰éº¦å…‹é£ä¹‹å‰è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå› ä¸ºæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚è¯¥è„šæœ¬è¿”å›ä¸€ä¸ªå¸¦æœ‰è¾“å…¥åç§°çš„æ•°ç»„åˆ—è¡¨ï¼Œå¯¹æˆ‘æ¥è¯´æˆ‘æƒ³ä½¿ç”¨â€œå†…ç½®éº¦å…‹é£â€ï¼Œæ‰€ä»¥æ•°ç»„åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å®šä¹‰éº¦å…‹é£ä»£ç å°†å¦‚ä¸‹æ‰€ç¤º:

```
mic = sr.Microphone(device_index=0)
```

## **è¯†åˆ«è¯­éŸ³**

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨*è¯†åˆ« _ è°·æ­Œ*æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±æˆ‘ä»¬åœ¨è°·æ­Œçš„æœ‹å‹åˆ›å»ºçš„è¯­éŸ³è¯†åˆ«æ¨¡å‹ã€‚å¤šäºäº†ä»–ä»¬ï¼

```
with mic as source: 
   r.adjust_for_ambient_noise(source) 
   audio = r.listen(source) result = r.recognize_google(audio)
```

å¦‚æœæƒ³åœ¨ç¿»è¯‘ä¹‹å‰æ£€æŸ¥ç»“æœï¼Œå¯ä»¥åœ¨ä»£ç ä¸­æ·»åŠ ä¸‹é¢ä¸€è¡Œã€‚

```
print(result)
```

[](/building-a-speech-recognizer-in-python-2dad733949b4) [## ç”¨ Python æ„å»ºè¯­éŸ³è¯†åˆ«å™¨

### ä½¿ç”¨è°·æ­Œäº‘è¯­éŸ³ API å°†æ‚¨çš„éŸ³é¢‘æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬

towardsdatascience.com](/building-a-speech-recognizer-in-python-2dad733949b4) 

# 2.æ„å»ºç¿»è¯‘å™¨

## **å®šä¹‰ç¿»è¯‘å™¨**

è¿™æ˜¯è¿™ä¸ªé¡¹ç›®æœ‰è¶£çš„éƒ¨åˆ†ã€‚ä½ ä¼šæœ‰å¾ˆå¤šé€‰æ‹©ã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥åƒæˆ‘ä¸€æ ·ï¼Œé—­ä¸Šçœ¼ç›ï¼Œæƒ³è±¡ä¸€ä¸ªä½ å¸Œæœ›èƒ½å»çš„å›½å®¶ï¼Œçœ‹çœ‹é‚£é‡Œçš„äººè¯´ä»€ä¹ˆè¯­è¨€ã€‚æ˜¯çš„ï¼Œè¿™æ˜¯ä»ä¸€å †ä¸åŒçš„è¯­è¨€ä¸­é€‰æ‹©çš„ä¸€ç§æ–¹æ³•ã€‚ğŸ™‚

ç°åœ¨ï¼Œæ‚¨å¯ä»¥å°†è¯¥è¯­è¨€æ”¾å…¥ destination å±æ€§ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```
p = Translator() 
k = p.translate(result, dest='french')
```

åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠç¿»è¯‘çš„ç»“æœè½¬æ¢æˆæ–‡æœ¬æ ¼å¼ï¼Œè¿™å°†æœ‰åŠ©äºæˆ‘ä»¬çš„æ–‡æœ¬åˆ°è¯­éŸ³æ¨¡å—æ­£å¸¸å·¥ä½œã€‚å› ä¸ºåœ¨ä»¥å‰çš„ä»£ç ä¸­ï¼Œç»“æœæ˜¯ä½œä¸ºå¯¹è±¡å­˜å‚¨çš„ã€‚

```
translated = str(k.text)
print(translated)
```

# 3.æ–‡æœ¬åˆ°è¯­éŸ³å¼•æ“

## **å®šä¹‰æ–‡æœ¬åˆ°è¯­éŸ³å¼•æ“**

```
engine = pyttsx3.init()
```

æˆ‘ä»¬åˆšåˆšå°†æ¨¡å—å®šä¹‰ä¸ºä¸€ä¸ªå¼•æ“ã€‚ç°åœ¨æ˜¯å‘Šè¯‰æˆ‘ä»¬çš„ç¨‹åºæœ—è¯»ç¿»è¯‘æ–‡æœ¬çš„æ—¶å€™äº†ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰è¯­è¨€ã€‚ä¸‹é¢æ˜¯æŸ¥çœ‹è¯­è¨€åˆ—è¡¨åŠå…¶ id çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰ç¿»è¯‘å™¨æ—¶å°†éœ€è¦è¿™äº›ä»£ç ã€‚æˆ‘å»ºè®®åœ¨è¿›å…¥ä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œåœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œè¿™æ®µä»£ç ã€‚

```
engine = pyttsx3.init() 
voices = engine.getProperty('voices') 
for voice in voices: 
  print("Voice:") 
  print(" - ID: %s" % voice.id) 
  print(" - Name: %s" % voice.name) 
  print(" - Languages: %s" % voice.languages) 
  print(" - Gender: %s" % voice.gender) 
  print(" - Age: %s" % voice.age)
```

![](img/88057396bd1641b75e01168ec7b35a7e.png)

å£°éŸ³

## **å®šä¹‰æ¼”è®²è€…è¯­è¨€**

å¤åˆ¶æ‚¨æƒ³è¦ä½¿ç”¨çš„è¯­è¨€çš„ IDï¼Œå¹¶å°†å…¶ç²˜è´´åˆ°æˆ‘ä»¬çš„ç¨‹åºä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨ setProperty æ–¹æ³•æ¥å®šä¹‰è¯´è¯è€…è¯­è¨€ã€‚

```
fr_voice_id = "com.apple.speech.synthesis.voice.thomas" engine.setProperty('voice', fr_voice_id)
```

## **æœ€åä¸€æ­¥:è®©å¥‡è¿¹å‘ç”Ÿ**

```
engine.say(translated)engine.runAndWait()
```

æ­å–œä½ ã€‚æ‚¨å·²ç»ä½¿ç”¨ Python åˆ›å»ºäº†è‡ªå·±çš„è¯­éŸ³ç¿»è¯‘å™¨ã€‚å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ•™ç¨‹ï¼Œå¹¶åœ¨ä»Šå¤©å­¦åˆ°ä¸€äº›æ–°ä¸œè¥¿ã€‚ç»ƒä¹ ç¼–ç æŠ€èƒ½çš„æœ€å¥½æ–¹æ³•æ˜¯åˆ¶ä½œæœ‰è¶£çš„é¡¹ç›®ã€‚

æœ¬æ–‡å·²ç”±ä¸“ä¸šç¿»è¯‘ Chema ç¿»è¯‘æˆè¥¿ç­ç‰™è¯­ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ–‡ç« ã€‚çŸ¥è¯†æ˜¯æ™®éçš„ã€‚

> å…³æ³¨æˆ‘çš„[åšå®¢](https://medium.com/@lifexplorer)å’Œ[èµ°å‘æ•°æ®ç§‘å­¦](https://towardsdatascience.com/)ä»¥è·å¾—çµæ„Ÿã€‚

*åŸè½½äº 2020 å¹´ 6 æœˆ 8 æ—¥*[*https://sonsuzdesign . blog*](https://sonsuzdesign.blog/2020/06/07/building-a-speech-translator-in-python/)*ã€‚*