# 部署我的第一个 ML 项目的经验教训

> 原文：<https://towardsdatascience.com/lessons-learned-deploying-my-first-ml-project-80e8b44bcd21?source=collection_archive---------23----------------------->

![](img/750f78fc70bbd4901f58e178eb37f046.png)

弗兰基·查马基在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

## 启动我的第一个生产就绪 ML 项目后的五点收获

![](img/11f26e69226ce872d077531079e39a23.png)

来源: [Xkcd](https://xkcd.com/1838/)

# 背景

我是一名软件工程师，为[小说家工作，](https://www.ebscohost.com/novelist)为公共图书馆制作软件。读者咨询也就是书籍推荐是我们的饭碗。想想网飞，但对于书籍！我们有两级推荐:A 级，我们的内部专业人员，如图书管理员等。为最受欢迎的书籍创建手工推荐，B 级推荐由推荐系统使用我们关于书籍的专有元数据生成。

我们的专有元数据是一个宝库:数十万本有吸引力的术语、流派和主题标签的书籍。我们的内部编目员已经花了数年时间对书籍进行编目并添加元数据。但这也是一个瓶颈，因为他们必须手动阅读书籍摘要和评论，以便添加适当的元数据。

> 元数据的例子:appealpacing.fast .快节奏，appealstory.issue .面向问题，appearl character . lgbtqia _ diversity，appearl tone .发人深省等。

我的项目很简单:给定我们的标签书评宝库，训练一个多标签分类器，它将预测上诉条款。这将加快我们的编目过程，消除我们的瓶颈。

# 五个外卖

## 1.理解数据的重要性

我的机器学习教育包括三年前在大学期间学习的两门课程，加上通过观看吴恩达和阅读来自媒体/数据科学的文章进行的自学。一言以蔽之，没有正规的 ML 教育。作为一名初学机器学习的实践者(我不敢称自己为机器学习工程师)，我做了初学者做的事情:先编码，后思考。

我开始研究(阅读谷歌)各种多标签文本分类解决方案，并逐一实现，比较结果，并对缺乏准确性感到沮丧。在尝试了第六个或第七个分类器后，我踩下刹车，后退了一步。然后我做了我之前应该做的事情:了解我的数据的前景。在做了一些基本的数据探索后，我发现我的数据集严重不平衡。在我可能的 158 个标签中，只有 20 个有相当数量的样本。还有，158 个独特的标签！

在将数据集分成单独的组(即 appealtone、appealwritingstyle 等)后，我使用 k-nearest neighborhood([ml KNN](http://scikit.ml/api/skmultilearn.adapt.mlknn.html#multilabel-k-nearest-neighbours))的改编版本获得了最佳结果(性能+训练速度)。分而治之！下一步是使用 BERT 训练一个。

## 2.创建模型只是工作的一半

所以你创造了这个模型，得到了最佳的性能和很高的精确度。现在怎么办？你跟踪的朱庇特笔记本没有提到那之后的生活。以下是我和我的团队为完成这个项目必须做的事情:

*   创建一个 Flask API 端点，这样我们就可以发送一个包含新书评论的 POST 请求，并检索预测标签的列表。
*   将 API 部署到 AWS，这样我们就可以使用它了。
*   将模型工件保存到 AWS S3 (AWS4？).创建一个[云形成](https://aws.amazon.com/cloudformation/)模板来自动旋转实例。
*   为 API 编写自动化测试。
*   创建一个 React tester 应用程序，以便我们的编目员可以玩分类器，并对有效性进行手动 QA。
*   部署 React 应用程序。
*   为一切创建自主部署流程( [CI/CD](https://www.redhat.com/en/topics/devops/what-is-ci-cd) )。

> **Protip:** 使用 [Cortex](https://www.cortex.dev/) 为您的模型实现 CI/CD 自动化。

创建模型/分类器是工作的一半。可能是四分之一。老实说，取决于你的项目。当你做计划时，确保你考虑到所有这些辅助工作。

> **Protip:** 用 Python 脚本编写你的 ML 代码，而不是直接在 Jupyter 笔记本上写。否则，审查笔记本中的代码变更几乎是不可能的。此外，这使得测试更加容易。

## 3.你不需要成为一个 ML 专家

让我以这样一句话开始这一部分:如果你是一名专家，那就更好了。*显然*。但是如果你不是，这并不意味着你不能创造一个 ML 驱动的产品！正如我之前所说，我没有受过正规的 ML 教育。诚然，学习曲线非常陡峭，但并非不可逾越。我每天都觉得自己像个冒名顶替者，但当我看到我们的编目员使用我们的上诉预测器时，我感觉好了一点。

ML 生态圈太神奇了！像熊猫，scikit-learn，pytorch，huggingface 等图书馆。让机器学习大众化。您可以用不到 20 行代码创建自己的模型！有大量的教程会在整个过程中帮助你。如果你有毅力和决心，你可以很容易地创造自己的 ML 动力产品。它可能不是最尖端的型号，但它是你的型号！你边做边学。没有什么能打败它。

记住，只要你在解决一个问题，并且有人从中受益，就有价值。最终用户并不关心你的模型的 F1 值是 88%还是 90%。

## 4.敏捷开发的重要性

软件工程是解决问题:你有一个需要解决的商业问题。对于我来说，我们希望减少编目瓶颈，加快过程，节省时间和资源。永远让问题引导你找到解决方案。而不是相反。

你想尽快得到你的产品的实际反馈，然后利用反馈对它进行迭代。对我们来说，就是把一些东西交给我们的编目员，这样他们就可以利用他们的领域专业知识来验证预测器的结果。然后，我们使用他们的反馈来调整模型。

## 5.数据为王

你的模型和你的数据一样好。这是没有办法的。在我看来，ML 中最困难的事情之一是管理一个全面的数据集。幸运的是，我已经准备好了。这加快了整个过程，让我的生活更轻松。此外，我们的数据由领域专家标记，这意味着它们非常准确，这反过来使我们能够创建一个相当准确的模型。

在开始自己的项目之前，请确保您的数据是干净的。了解您的数据环境。不要重蹈我的覆辙。先做一些数据探索。看看你是否可以使用像 [SMOTE](https://imbalanced-learn.readthedocs.io/en/stable/generated/imblearn.over_sampling.SMOTE.html) 这样的工具来增强它。记住，即使你的模型不像你希望的那样精确，你也能在这个过程中学习到一些新的东西。从长远来看，这是有回报的。