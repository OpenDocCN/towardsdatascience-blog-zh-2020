<html>
<head>
<title>How to Practice Logging in Python with Logzero</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Logzero练习Python中的日志记录</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-practice-logging-in-python-with-logzero-82e4f9842a5c?source=collection_archive---------40-----------------------#2020-04-17">https://towardsdatascience.com/how-to-practice-logging-in-python-with-logzero-82e4f9842a5c?source=collection_archive---------40-----------------------#2020-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="874b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为您的Python项目提供强大而有效的日志记录。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ced82fec835f3090683f137da0efbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dkpw14YxoX0FonKf4OaHMg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.toptal.com/resume/son-nguyen-kim?__hstc=753710.17be834d28ba29055621f0833fc6733b.1582400164835.1582400164835.1582400164835.1&amp;__hssc=753710.1.1582400164836&amp;__hsfp=3618320745" rel="noopener ugc nofollow" target="_blank">儿子阮金的照片</a></p></figure><p id="725d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Logzero是由<a class="ae ky" href="https://twitter.com/metachris" rel="noopener ugc nofollow" target="_blank"> Chris Hager </a>创建的Python包，它简化了Python 2和3的日志记录。Logzero作为打印语句更容易显示信息和调试细节。</p><p id="5e27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想知道<strong class="lb iu">什么是日志记录</strong>，我推荐你阅读我之前写的关于<a class="ae ky" href="https://medium.com/analytics-vidhya/how-to-run-machine-learning-experiments-with-python-logging-module-9030fbee120e" rel="noopener">“如何用Python日志记录模块运行机器学习实验”</a>的文章，尤其是前3节。</p><p id="bd1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在那篇文章中，您将了解到:</p><ul class=""><li id="8c67" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">什么是日志记录？</li><li id="ef13" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">为什么日志记录很重要。</li><li id="6e3a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">测井在不同技术行业中的应用。</li></ul><p id="f7c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Logzero具有不同的特性，使得它更易于在Python项目中使用。这些功能包括:</p><ul class=""><li id="e46a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">轻松记录到控制台和/或文件。</li><li id="bf60" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">提供完全配置的标准Python logger对象。</li><li id="2ab0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">漂亮的格式，包括控制台中特定级别的<strong class="lb iu">颜色</strong>。</li><li id="44d1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">适用于各种字符编码和特殊字符。</li><li id="bc0e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">兼容Python 2和3。</li><li id="8350" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">不再依赖Python。</li></ul><h1 id="1a96" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">安装。</h1><p id="aa39" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">使用pip运行安装logzero。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="7e16" class="nl mk it nh b gy nm nn l no np">pip install -U logzero</span></pre><p id="bda0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以从公共<a class="ae ky" href="https://github.com/metachris/logzero" rel="noopener ugc nofollow" target="_blank"> Github repo </a>安装logzero:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="0e38" class="nl mk it nh b gy nm nn l no np">git clone https://github.com/metachris/logzero.git<br/>cd logzero<br/>python setup.py install</span></pre><h2 id="62da" class="nl mk it bd ml nq nr dn mp ns nt dp mt li nu nv mv lm nw nx mx lq ny nz mz oa bi translated">基本例子。</h2><p id="5bfa" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">我们将从一个基本的例子开始。在python文件中，我们将从logzero导入日志记录器，并尝试4种不同的日志记录级别示例。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="00d6" class="nl mk it nh b gy nm nn l no np">#import logger from logzero<br/>from logzero import logger</span><span id="0999" class="nl mk it nh b gy ob nn l no np">logger.debug(“hello”)<br/>logger.info(“info”)<br/>logger.warning(“warning”)<br/>logger.error(“error”)</span></pre><p id="e5d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出是彩色的，易于阅读。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/7172534d63a89b884a401beae6192cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*e2-6RDjgF7SpdbdxVZroEw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">对数零输出</p></figure><p id="ab86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，每一关都有自己的颜色。这意味着您可以通过检查颜色轻松识别级别。</p><h1 id="bf34" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">将日志写入文件</h1><p id="658a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">大多数时候Python用户倾向于在文件中写日志。系统运行时，您可以将日志保存在文件中，并查看它们以进行错误检查和维护。您还可以设置一个文件来保存legzero中的所有日志条目。</p><p id="63fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从logezero导入日志记录器和日志文件。logfile方法将帮助我们配置日志文件来保存我们的日志条目。</p><p id="7bce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您的日志条目将被记录到名为my_logfile.log的文件中。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="f1ed" class="nl mk it nh b gy nm nn l no np">#import logger and logfile<br/>from logzero import logger, logfile<br/><br/>#set logfile path<br/>logfile('my_logfile.log')<br/><br/># Log messages<br/>logger.info("This log message saved in the log file")</span></pre><p id="e7fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">my_logfile.log中的输出包含日志级别标签(对于标记为“I”的信息级别)、日期、时间、python文件名、行号和消息本身。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="4055" class="nl mk it nh b gy nm nn l no np">[I 200409 23:49:59 demo:8] This log message saved in the log file</span></pre><h2 id="5759" class="nl mk it bd ml nq nr dn mp ns nt dp mt li nu nv mv lm nw nx mx lq ny nz mz oa bi translated">旋转日志文件。</h2><p id="271a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">您不需要一个单独的日志文件来保存所有的日志条目。这导致系统打开和关闭大量日志文件。</p><p id="f893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用<strong class="lb iu"> maxBytes </strong>和<strong class="lb iu"> backupCount </strong>参数来允许文件以预定的大小翻转。当大小即将超出时，文件将被关闭，并自动打开一个新文件进行输出。每当当前日志文件的长度接近maxBytes时，就会发生翻转。如果maxBytes或backupCount为零，则永远不会发生翻转。</p><p id="ab3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我们将maxBytes设置为<strong class="lb iu"> 1000000字节(1 MB)。</strong>这意味着当文件大小超过1MB时，文件将被关闭，并打开一个新文件来保存日志条目。要保留的备份数量设置为3。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="3830" class="nl mk it nh b gy nm nn l no np"># Set a rotating logfile<br/>logzero.logfile("my_logfile.log", maxBytes=1000000, backupCount=3)</span></pre><h2 id="b812" class="nl mk it bd ml nq nr dn mp ns nt dp mt li nu nv mv lm nw nx mx lq ny nz mz oa bi translated">设置最低日志记录级别。</h2><p id="21b3" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">日志级别是指设置给定日志消息的重要性级别。您还可以通过使用logfile方法中的log level参数为文件处理程序设置不同的日志级别<strong class="lb iu">。</strong></p><p id="bb25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的例子中，我们将loglevel设置为<code class="fe od oe of nh b">warning</code>。这意味着低于<strong class="lb iu">警告级别</strong>的所有日志条目将不会保存到日志文件中。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e2d8" class="nl mk it nh b gy nm nn l no np">#import logzero package<br/>from logzero import logger, logfile<br/>import logging<br/><br/># You can also set a different loglevel for the file handler<br/>logfile("my_logfile.log", loglevel=logging.WARNING)<br/><br/># Log messages<br/>logger.info("This log message saved in the log file")<br/>logger.warning("This log message saved in the log file")</span></pre><h2 id="1e5f" class="nl mk it bd ml nq nr dn mp ns nt dp mt li nu nv mv lm nw nx mx lq ny nz mz oa bi translated">设置自定义格式化程序。</h2><p id="8912" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">如何格式化日志记录由您决定。有不同的方法可以格式化你的日志记录。您可以在格式中包含日期、时间和日志记录级别，这样您就可以知道日志是何时发送的以及在什么级别发送的。</p><p id="a459" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下示例显示了如何配置日志记录的格式。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e9cd" class="nl mk it nh b gy nm nn l no np">#import logzero package<br/>import logzero<br/>from logzero import logger, logfile<br/>import logging<br/><br/>#set file path<br/>logfile("my_logfile.log")<br/><br/># Set a custom formatter<br/>my_formatter = logging.Formatter('%(filename)s - %(asctime)s - %(levelname)s: %(message)s');<br/>logzero.formatter(my_formatter)<br/><br/># Log messages<br/>logger.info("This log message saved in the log file")<br/>logger.warning("This log message saved in the log file")</span></pre><p id="b3ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们配置了日志格式，包括<em class="og">文件名、日期、时间、日志级别名称、</em>和<em class="og">消息。</em></p><p id="941a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是my_logfile.log中的输出:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="0091" class="nl mk it nh b gy nm nn l no np">demo.py — 2020–04–10 00:51:44,706 — INFO: This log message saved in the log file<br/>demo.py — 2020–04–10 00:51:44,707 — WARNING: This log message saved in the log file</span></pre><h2 id="ded0" class="nl mk it bd ml nq nr dn mp ns nt dp mt li nu nv mv lm nw nx mx lq ny nz mz oa bi translated">自定义记录器实例</h2><p id="e3df" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">除了使用默认的记录器，您还可以使用<strong class="lb iu"> logzero.setup_logger(..)</strong>。您可以使用不同的参数配置并返回一个完全配置的logger实例，如<em class="og">名称、日志文件名称、格式化程序、最大字节数、备份计数、</em>和<em class="og">日志记录级别。</em></p><p id="a94b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个如何使用自定义记录器实例设置日志记录的工作示例:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="e591" class="nl mk it nh b gy nm nn l no np">import logzero package<br/>from logzero import logger, logfile, setup_logger<br/>import logging<br/><br/># Set a custom formatter<br/>my_formatter = logging.Formatter('%(filename)s - %(asctime)s - %(levelname)s: %(message)s');<br/><br/><br/>#create custom logger instance<br/>custom_logger = setup_logger(<br/> name="My Custom Logger",<br/> logfile="my_logfile.log",<br/> formatter=my_formatter,<br/> maxBytes=1000000,<br/> backupCount=3,level=logging.INFO)<br/><br/># Log messages<br/>custom_logger.info("This log message saved in the log file")<br/>custom_logger.warning("This log message saved in the log file")</span></pre><p id="0d99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们已经用不同的配置参数值设置了一个名为<strong class="lb iu"> custom_logger </strong>的自定义记录器实例。</p><h1 id="49e0" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">包裹</h1><p id="4c74" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在本文中，您已经学习了如何使用Logezero Python包的基础知识和一些示例。您可以在<a class="ae ky" href="https://logzero.readthedocs.io/en/latest/#" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多可用功能。现在您可以开始在下一个<a class="ae ky" href="https://realpython.com/intermediate-python-project-ideas/" rel="noopener ugc nofollow" target="_blank"> python项目</a>中实现logzero包了。</p><p id="00ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你学到了新的东西或者喜欢阅读这篇文章，请分享给其他人看。在那之前，下期帖子再见！也可以通过Twitter <a class="ae ky" href="https://twitter.com/Davis_McDavid" rel="noopener ugc nofollow" target="_blank"> @Davis_McDavid </a>找到我</p><p id="e473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以阅读<a class="ae ky" href="https://www.freecodecamp.org/news/good-logging-practice-in-python-with-logzero/" rel="noopener ugc nofollow" target="_blank"> freecodecamp的原文。</a></p><p id="5c91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="og">最后一件事:</em> </strong> <em class="og">在以下链接中阅读更多类似这样的文章。</em></p><div class="oh oi gp gr oj ok"><a href="https://medium.com/analytics-vidhya/why-you-need-to-explore-your-data-how-you-can-start-13de6f29c8c1" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">为什么您需要探索您的数据以及如何开始</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">探索性数据分析逐步指南。</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://medium.com/analytics-vidhya/feature-selection-by-using-voting-approach-e0d1c7182a21" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">使用投票方法的特征选择</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">如何应用多种技术来选择Xverse包的特性？</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy ks ok"/></div></div></a></div><div class="oh oi gp gr oj ok"><a href="https://medium.com/analytics-vidhya/how-to-run-machine-learning-experiments-with-python-logging-module-9030fbee120e" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">如何用Python日志模块运行机器学习实验</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">有时候“打印”并不是一个好主意</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">medium.com</p></div></div><div class="ot l"><div class="pa l ov ow ox ot oy ks ok"/></div></div></a></div></div></div>    
</body>
</html>