# å¦‚ä½•æ“çºµå’Œå¯è§†åŒ–æ•°æ®ä»¥è¿›è¡Œæ¯”è¾ƒåˆ†æž NBA çš„å…³é”®æ—¶åˆ»

> åŽŸæ–‡ï¼š<https://towardsdatascience.com/how-to-manipulate-visualize-data-for-comparative-analysis-crunch-time-in-the-nba-f20540e23b54?source=collection_archive---------16----------------------->

## ä½¿ç”¨ Python å’Œ Pandas å’Œ Plotly å¯¹æ•°æ®è¿›è¡Œåˆ‡ç‰‡ã€åˆ†ç»„å’Œå¯è§†åŒ–ï¼Œä»¥èŽ·å¾—æ–°çš„è§è§£(ä»£ç å’Œæ•°æ®åœ¨æˆ‘çš„ [GitLab repo](https://gitlab.com/jphwang/online_articles) ä¸­)ã€‚

![](img/9a3bc017a6b29f01d52b00cc86aa5d64.png)

[Jason Dent](https://unsplash.com/@jdent?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/s/photos/comparison?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„åŽŸå§‹ç…§ç‰‡

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æ¼”ç¤ºäº†å¦‚ä½•æ“ä½œå’Œå¯è§†åŒ–æ•°æ®ä»¥èŽ·å¾—æ¯”è¾ƒæ€§çš„æ´žå¯ŸåŠ›ã€‚æˆ‘ä»Žä¸€ä¸ªæ•°æ®é›†å¼€å§‹åˆ†æžï¼Œå°†å¯¹å…¶è¿›è¡Œåˆ†æžä»¥æ‰¾åˆ°åˆé€‚çš„åˆ†å‰²ï¼Œå¹¶æ‰¾åˆ°ä¸Žå‰©ä½™æ•°æ®è¿›è¡Œæ¯”è¾ƒçš„æœ€ä½³å­é›†ã€‚

å®žé™…ä¸Šï¼Œè¿™ç¯‡æ–‡ç« ç€çœ¼äºŽä¸Šä¸ªèµ›å­£çš„ NBA æ•°æ®ï¼Œä»¥äº†è§£æŽ¥è¿‘ï¼Œæ¯”èµ›åŽæœŸçš„æƒ…å†µã€‚æœ‰äº›äººå–œæ¬¢æž—æ ¼æ°[æ¯”å°”Â·è¥¿è’™æ–¯](https://twitter.com/BillSimmons)ç§°ä¹‹ä¸ºâ€œå…³é”®æ—¶åˆ»â€ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨æ•°æ®æ¥äº†è§£è¿™äº›é«˜é£Žé™©æ—¶åˆ»çš„æ›´å¤šä¿¡æ¯ã€‚çœŸæ­£çš„å…³é”®æ—¶åˆ»æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿè¿™æœŸé—´çš„æ¸¸æˆçŽ©æ³•æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿè¿™é‡Œé‡‡ç”¨äº†ä»€ä¹ˆæ ·çš„ç­–ç•¥ï¼Ÿ

å’Œå¾€å¸¸ä¸€æ ·ï¼Œæœ¬æ–‡çš„é‡ç‚¹å°†æ˜¯é€‚ç”¨äºŽæ‚¨è‡ªå·±çš„é¢†åŸŸå’Œæ•°æ®çš„æ•°æ®åˆ†æžï¼Œè€Œä¸æ˜¯ç‰¹å®šäºŽç¯®çƒçš„è¾“å‡ºã€‚

æˆ‘ä»¬èµ°å§ã€‚

# åœ¨å¼€å§‹ä¹‹å‰

## æ•°æ®å’Œä»£ç 

æˆ‘åœ¨æˆ‘çš„ [GitLab repo here](https://gitlab.com/jphwang/online_articles) (åœ¨ **basketball_crunchtime** ç›®å½•ä¸­)ä¸­åŒ…å«äº†è¿™æ–¹é¢çš„æ•°æ®å’Œä»£ç ï¼Œæ‰€ä»¥è¯·éšæ„ä¸‹è½½å¹¶ä½¿ç”¨å®ƒ/æ”¹è¿›å®ƒã€‚

## åŒ…è£…

æˆ‘å‡è®¾æ‚¨ç†Ÿæ‚‰ pythonã€‚å³ä½¿ä½ ç›¸å¯¹è¾ƒæ–°ï¼Œè¿™ä¸ªæ•™ç¨‹ä¹Ÿä¸åº”è¯¥å¤ªéš¾ã€‚

ä½ éœ€è¦`pandas`å’Œ`plotly`ã€‚ç”¨ä¸€ä¸ªç®€å•çš„`pip install [PACKAGE_NAME]`å®‰è£…æ¯ä¸€ä¸ª(åœ¨ä½ çš„è™šæ‹ŸçŽ¯å¢ƒä¸­)ã€‚

# åˆ›å»ºâ€œå…³é”®æ—¶åˆ»â€æ•°æ®

è¿™é‡Œçš„å‡è®¾å¾ˆç®€å•ã€‚åœ¨ç¯®çƒè¿åŠ¨ä¸­ï¼Œæœ‰äº›æƒ…å†µä¼šå¾—åˆ°ä¸åŒçš„å¯¹å¾…ï¼Œä¼šå¾—åˆ°çƒå‘˜å’Œæ•™ç»ƒæ›´å¤šçš„åŠªåŠ›å’Œå…³æ³¨ã€‚è®©æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå…³é”®æ—¶åˆ»â€ï¼Œçœ‹çœ‹æ•°æ®æ˜¯å¦æ˜¾ç¤ºå‡ºå®ƒä¸Žæ¸¸æˆå…¶ä½™éƒ¨åˆ†ä¹‹é—´çš„ä»»ä½•å·®å¼‚å’Œæ¨¡å¼ã€‚

æˆ‘ä»¬çš„æ•°æ®é›†åŒ…æ‹¬ 2018-19 èµ›å­£çš„è¯¦ç»†æ•°æ®ã€‚æ­£å¦‚ä½ å¯èƒ½æƒ³è±¡çš„é‚£æ ·ï¼Œåœ¨æˆ‘å¯ä»¥è¿‡æ»¤çš„æ•°æ®ä¸­æ²¡æœ‰' *crunch time* 'ç‰¹æ€§ã€‚ä½†æ ¹æ®æˆ‘ä»¬çš„ç›´è§‰ï¼Œå…³é”®æ—¶åˆ»æ•°æ®ä¸Žå‰©ä½™æ—¶é—´æœ‰é™ä¸”åˆ†æ•°å·®å¼‚è¾ƒå°çš„æ—¶æœŸç›¸å…³ä¼¼ä¹Žæ˜¯åˆç†çš„ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç ”ç©¶è¿™äº›æ•°æ®ï¼Œçœ‹çœ‹é€‰æ‹©å…³é”®æ—¶é—´å­é›†çš„åˆç†æ ‡å‡†æ˜¯ä»€ä¹ˆã€‚

## åœ¨ç†ŠçŒ«ä¸­åˆ›å»ºæ–°æ 

çŽ°æœ‰æ•°æ®é›†ä¸åŒ…æ‹¬å‰©ä½™æ—¶é—´æˆ–å¾—åˆ†å·®å¼‚çš„è¦ç´ ï¼Œä½†å®ƒåŒ…æ‹¬è¿™äº›è¦ç´ çš„åŸºç¡€æ•°æ®ã€‚

åœ¨ Pandas ä¸­åˆ›å»ºæ–°åˆ—æœ‰å¤šç§æ–¹æ³•ï¼Œä½†æˆ‘æ›´å–œæ¬¢ä½¿ç”¨`.assign`æ–¹æ³•ï¼Œå› ä¸ºå®ƒ[è¿”å›žä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html)ã€‚è¿™æœ‰åŠ©äºŽé¿å…æ“ä½œé”™è¯¯å¯¹è±¡çš„éº»çƒ¦ã€‚

æ•°æ®é›†ç‰¹å¾åŒ…æ‹¬`period`ï¼Œå…± 4 åˆ†é’Ÿï¼Œä»¥åŠæ¯ä¸ªæ—¶é—´æ®µçš„`elapsed`æ—¶é—´(å…± 12 åˆ†é’Ÿ)ã€‚`period`æ•°æ®æ˜¯æ•´æ•°ï¼Œ`elapsed`æ—¶é—´æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³æŠŠå®ƒä»¬è½¬æ¢æˆä¸€è‡´çš„æ—¶é—´å•ä½ã€‚

`Pandas`æœ‰ä¸€ä¸ª`timedelta`å‡½æ•°å¯ä»¥æ–¹ä¾¿åœ°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´ï¼Œè€Œ`timedelta64`å‡½æ•°`numpy`å¯ä»¥å°†æ—¶é—´è½¬æ¢ä¸ºç§’ï¼Œæ‰€ä»¥å°†å®ƒä»¬ç›¸åŠ å°±å¯ä»¥å¾—å‡ºæ¸¸æˆæ‰€ç”¨çš„æ€»æ—¶é—´ã€‚

è®©æˆ‘ä»¬ä¹Ÿä¸ºå½“å‰å¾—åˆ†å·®å¼‚åˆ›å»ºä¸€ä¸ªæ–°åˆ—:

```
shots_df = shots_df.assign(tot_time=(shots_df.period-1)*np.timedelta64(60*12, 's') + pd.to_timedelta(shots_df.elapsed, unit='s'))
shots_df = shots_df.assign(score_diff=abs(shots_df.home_score-shots_df.away_score))
```

ä»¥å‰`max(shots_df.elapsed)`ç»™`â€˜0:12:00'`ï¼ŒçŽ°åœ¨`max(shots_df.tot_time)`ç»™`Timedelta(â€˜0 days 00:48:00â€™)`ã€‚*(æˆ‘æš‚æ—¶æŽ’é™¤äº†è¶…æ—¶)*

## è¿‡æ»¤æ•°æ®

è¿™äº›æ–°åˆ—çŽ°åœ¨å¯ä»¥ç”¨æ¥è¿‡æ»¤æˆ‘ä»¬çš„æ•°æ®é›†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒä»¬æ¥ç”Ÿæˆä¸€äº›æ½œåœ¨çš„å…³é”®æ—¶é—´å­é›†è¿›è¡Œæ¯”è¾ƒã€‚

é¦–å…ˆï¼Œæˆ‘æƒ³çœ‹çœ‹é•œå¤´çš„åˆ†å¸ƒæ˜¯å¦ä¼šæ”¹å˜ã€‚åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æŠŠçƒåœºåˆ†æˆäº†ä¸åŒçš„åŒºåŸŸï¼Œå°±åƒè¿™æ ·:

![](img/bd58570b721f5bdc58a4dd183369ca16.png)

æ¯ä¸ªé•œå¤´éƒ½æœ‰ä¸€ä¸ªç‰¹å¾ç¼–ç ï¼Œè®°å½•å®ƒæ¥è‡ªè¿™ 7 ä¸ªåŒºåŸŸä¸­çš„å“ªä¸€ä¸ªã€‚

æ‹æ‘„ä½ç½®çš„æ”¹å˜å¯èƒ½å’Œç²¾åº¦çš„æ”¹å˜ä¸€æ ·æœ‰æ„ä¹‰ã€‚å®žé™…ä¸Šï¼Œæƒ…å†µå¯èƒ½æ›´æ˜¯å¦‚æ­¤ï¼Œå› ä¸ºæ•°æ®å¯èƒ½æ²¡æœ‰å°„å‡»ç²¾åº¦é‚£ä¹ˆâ€œå˜ˆæ‚â€ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬æ•æ‰è¿™äº›åŒºåŸŸçš„æ‹æ‘„åˆ†å¸ƒæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå°†æ¯ä¸ªåŒºåŸŸçš„æ‹æ‘„ç²¾åº¦/é¢‘çŽ‡ç­‰ç»Ÿè®¡æ•°æ®æ·»åŠ åˆ°æˆ‘ä»¬çš„æ•°æ®å¸§ä¸­ã€‚

ä¸ºäº†è¯„ä¼°å„ç§æ—¶é—´å’Œåˆ†æ•°é˜ˆå€¼çš„æ•ˆæžœï¼Œæˆ‘æž„å»ºäº†ä¸€ä¸ªå…·æœ‰å„ç§æ—¶é—´å’Œåˆ†æ•°é˜ˆå€¼çš„åµŒå¥—å¾ªçŽ¯ï¼Œå¹¶ä½¿ç”¨ pandas æ ¹æ®å¾ªçŽ¯ä¸­çš„è¿™äº›å€¼è¿‡æ»¤æ•°æ®å¸§:

```
for time_thresh in [12, 10, 8, 6, 4, 2]:
    for score_thresh in [2, 4, 6, 8, 10]:
        filt_shots_df = shots_df[
            (shots_df.tot_time > np.timedelta64(60*(48-time_thresh), 's'))
            & (shots_df.score_diff <= score_thresh)
        ]
```

æ¯ä¸ªç»Ÿè®¡æ•°æ®ä¹Ÿæ˜¯ä½œä¸ºä¸Žæ•´ä½“æ•°æ®ç›¸æ¯”è¾ƒçš„ç›¸å¯¹å€¼è¢«æ•èŽ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›åœ¨å…³é”®æ—¶åˆ»æ•èŽ·æ¸¸æˆçš„*å˜åŒ–*ã€‚

å¦‚æžœä½ ä¸ç¡®å®šå¦‚ä½•ä½¿ç”¨ï¼Ÿgroupby methods with dataframesï¼Œ[è¿™é‡Œæ˜¯æ–‡æ¡£](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html)ã€‚

è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¯è¡Œçš„æ•°æ®æ¡†æž¶è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å¼€å§‹ç ”ç©¶æˆ‘ä»¬çš„æ•°æ®é›†ã€‚

# å¯è§†åŒ–â€œå…³é”®æ—¶åˆ»â€æ•°æ®

## å¥å…¨æ€§æ£€æŸ¥â€”æ ·æœ¬å¤§å°

æ¯å½“æˆ‘å¤„ç†æ•°æ®çš„å­é›†æ—¶ï¼Œæˆ‘éƒ½å¸Œæœ›è­¦æƒ•å¼•å…¥éšæœºé”™è¯¯ï¼Œæˆ–æ— æ„è¯†çš„åå·®ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æˆ‘å¾—å‡ºé”™è¯¯çš„ç»“è®ºã€‚

åœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹åˆ†å¸ƒæƒ…å†µï¼Œä»¥äº†è§£æ¯åœºæ¯”èµ›åœ¨æ¯ä¸ªåˆ†æ•°å·®å¼‚èŒƒå›´å†…èŠ±è´¹äº†å¤šå°‘ã€‚

æˆ‘ä»¬çš„æ•°æ®åº“åŒ…å«æ•´ä¸ª NBA èµ›å­£å¤§çº¦ 217ï¼Œ000 å¼ ç…§ç‰‡ã€‚ç²—ç•¥ä¼°è®¡ï¼Œæ¯åˆ†é’ŸåŒ…å« 4500 ä¸ªé•œå¤´ã€‚å°†è¿™äº›ç»˜åˆ¶æˆç›´æ–¹å›¾:

```
import plotly.express as px
fig = px.histogram(shots_df, x='score_diff', nbins=40, histnorm='probability density', range_y=[0, 0.09])
fig.update_layout(
    title_text='Score differences in an NBA game',
    paper_bgcolor="white",
    plot_bgcolor="white",
    xaxis_title_text='Score difference', # xaxis label
    yaxis_title_text='Probability', # yaxis label
    bargap=0.2,  # gap between bars of adjacent location coordinates
)
fig.show()
```

![](img/65ecd68bc6d824700276e2570baf560c.png)

åŒæ ·ï¼Œåœ¨æœ€åŽçš„ 6 åˆ†é’Ÿé‡Œ:

![](img/1fa8167d3ae5a549196fd4463267ed6f.png)

å³ä½¿åœ¨æœ€åŽ 6 åˆ†é’Ÿï¼ŒNBA æ¯”èµ›ä¹Ÿæœ‰çº¦ 4.5%çš„æ¯”åˆ†åœ¨ 1 åˆ†ä»¥å†…ï¼Œçº¦ 10%åœ¨ 3 åˆ†ä»¥å†…ã€‚

åœ¨è¶…è¿‡ 215ï¼Œ000 å¼ ç…§ç‰‡çš„åŸºç¡€ä¸Šï¼ŒèŽ·å¾—è¿™äº›å­é›†ä¼¼ä¹Žæ˜¯åˆç†çš„ï¼Œä½†è¿™æ˜¯å€¼å¾—å…³æ³¨çš„äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯å½“å­é›†æ˜¯åŸºäºŽæ—¶é—´å’Œåˆ†æ•°å¯¼å‡ºçš„ã€‚

## è¯†åˆ«å…³é”®æ—¶åˆ»

æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ„Ÿå…´è¶£çš„å˜é‡ï¼Œå‰©ä½™æ¸¸æˆæ—¶é—´(`time_thresh`)å’Œå¾—åˆ†å·®(`score_thresh`)ã€‚æˆ‘ä»¬è¿˜æœ‰æ‹æ‘„åŒºåŸŸçš„å˜é‡(`zone_name`)ã€‚æœ‰ä¸‰ä¸ªå˜é‡è¦è€ƒè™‘ï¼Œè¿™å¯¹äºŽæ°”æ³¡å›¾æ¥è¯´æ˜¯å®Œç¾Žçš„ï¼Œä¸€ä¸ªå˜é‡æ²¿ç€ x è½´ï¼Œå¦ä¸€ä¸ªæ˜¯é¢œè‰²ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æ”¯çº¿å‰§æƒ…ã€‚

ä½¿ç”¨è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¿™æ ·çš„æ°”æ³¡å›¾:

```
fig = px.scatter(
    summary_df, x='score_thresh', y='rel_shots_freq', color='time_thresh', size='filt_shots_freq',
    facet_col='zone_name', hover_data=['filt_shots_taken'])
fig.show()
```

![](img/5ce1afc520f3535e7645b5407a9a9a12.png)

æ”¯çº¿å‰§æƒ…/é¢œè‰²ç³»åˆ—å¯ä»¥åƒè¿™æ ·ç¿»è½¬ï¼Œäº§ç”Ÿ:

```
fig = px.scatter(
    summary_df, x='time_thresh', y='rel_shots_freq', color='score_thresh', size='filt_shots_freq',
    facet_col='zone_name', hover_data=['filt_shots_taken'])
fig.show()
```

![](img/a9f4f8df52a320712289de557edffe13.png)

è¿™äº›å›¾å·²ç»å‘Šè¯‰æˆ‘ä»¬å¾ˆå¤šã€‚

ä»–ä»¬å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨æ¯”èµ›åŽæœŸï¼Œä¸‰åˆ†çƒæŠ•å¾—æ¯”æ¯”èµ›å…¶ä»–æ—¶é—´å¤šå¾—å¤šã€‚è¿™éšç€åˆ†æ•°å·®è·çš„å¢žåŠ è€Œå¢žåŠ (å³ï¼Œå›¢é˜Ÿå†’æ›´å¤§çš„é£Žé™©æ¥è¿½èµ¶)ã€‚

[çŽ°ä»£åˆ†æžæŒ‡å‡ºï¼Œæœ€å¥½çš„æŠ•ç¯®æ¥è‡ªé è¿‘ç¯®ç­å’Œè§’è½çš„ 3s](https://fansided.com/2014/11/01/geometry-distance-corner-3s/) ï¼Œè€Œè¿™é‡Œçš„æ•°æ®æ˜¾ç¤ºï¼Œè¿™äº›æŠ•ç¯®å˜å¾—è¶Šæ¥è¶Šéš¾ã€‚æ®æŽ¨æµ‹ï¼Œè¿™æ˜¯ç”±äºŽé˜²å®ˆæŠ•å…¥äº†æ›´å¤šçš„åŠªåŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¯”èµ›çš„åŽæœŸï¼Œå½“æ¯”åˆ†æŽ¥è¿‘æ—¶(çœ‹çœ‹ç´«è‰²çš„< 2 åˆ†æ¯”èµ›æ•°æ®)ã€‚

ä»”ç»†è§‚å¯Ÿåº•éƒ¨çš„æƒ…èŠ‚ä¹Ÿå¯ä»¥å‘çŽ°ï¼Œåœ¨å¤§å¤šæ•°æ¬¡è¦æƒ…èŠ‚ä¸­ï¼Œå¤§çº¦åœ¨ 8 åˆ†é’Ÿæˆ– 6 åˆ†é’Ÿå¤„æœ‰ä¸€ä¸ªæ‹ç‚¹ã€‚è¿™ä¸€ç‚¹åœ¨ç¬¬ä¸€ä¸ªæ”¯çº¿å‰§æƒ…(4 è‹±å°ºä»¥å†…)å’Œç¬¬äº”ä¸ª(çŸ­ 3s)ä¸­è¡¨çŽ°å¾—æœ€ä¸ºæ˜Žæ˜¾ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹å°„å‡»ç²¾åº¦ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªç›¸ä¼¼çš„æ•…äº‹å—ï¼Ÿ

![](img/c5ef6ecc48c3eab15524546eb3fcbce2.png)

å¥½åƒæ˜¯è¿™æ ·çš„ï¼éšç€å¾—åˆ†å·®è·çš„å¢žåŠ ï¼Œåœ¨è¿‘è·ç¦»æŠ•ç¯®æ—¶ï¼Œå‡†ç¡®æ€§å¾€å¾€ä¼šå¢žåŠ ï¼Œè€Œåœ¨è¿œè·ç¦»æŠ•ç¯®æ—¶ï¼Œå‡†ç¡®æ€§ä¼šé™ä½Žã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºé¢†å…ˆçš„çƒé˜Ÿå¯¹ä¸‰åˆ†çƒä¿æŒè­¦æƒ•ï¼Œä»¥é˜²æ­¢ä»–ä»¬çš„å¯¹æ‰‹è¿…é€Ÿè¿½ä¸Šæ¥ï¼Œè€Œè½åŽçš„çƒé˜Ÿæ›´ç»å¸¸ä»Žè¿œè·ç¦»å°„é—¨ã€‚ä¸Šå›¾ä¸­æ˜¾ç¤ºçš„é¢‘çŽ‡è¯å®žäº†è¿™ä¸€ç‚¹ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™äº›æ”¯çº¿å‰§æƒ…ä¸­çš„è®¸å¤šéƒ½è¡¨æ˜Žåœ¨æ¸¸æˆè¿˜å‰© 6 åˆ†é’Ÿçš„æ—¶å€™å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚è¿™ä¼¼ä¹Žæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—¨æ§›ã€‚

åˆ†æ•°å‘¢ï¼Ÿå½“æˆ‘ä»¬ä»Žè¶Šæ¥è¶Šå¤§çš„åˆ†æ•°å·®è·ä¸­è§‚å¯Ÿæ•°æ®æ—¶ï¼Œè™½ç„¶å¯¹æ•°æ®çš„å½±å“æ˜¯æ¸è¿›çš„ï¼Œä½†æˆ‘çš„è§‚å¯Ÿæ˜¯ï¼Œåˆ†æ•°åœ¨ 2 åˆ†ä»¥å†…çš„æƒ…å†µä¸‹çš„æ•°æ®ç‚¹åœ¨å¤§å¤šæ•°è¿™äº›æ”¯çº¿å‰§æƒ…ä¸­è„±é¢–è€Œå‡ºã€‚(è‡ªå·±çœ‹çœ‹ï¼Œå¦‚æžœä½ ä¸åŒæ„ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚)

**æ‰€ä»¥è®©æˆ‘ä»¬é‡‡ç”¨å…³é”®æ—¶åˆ»çš„å®šä¹‰ï¼Œå³å‰©ä½™æ—¶é—´ä¸º 6 åˆ†é’Ÿæˆ–æ›´å°‘ï¼Œå¾—åˆ†åœ¨ 2 åˆ†ä»¥å†…ã€‚**

## ç´§ç¼©æ—¶é—´ vs å¸¸è§„(å¹³ç¨³ï¼Ÿ)æ—¶é—´

æ—¢ç„¶æˆ‘ä»¬å·²ç»ä¸º crunch time è®¾ç½®äº†å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°åˆ—æ¥åŒºåˆ†è¿™ä¸¤ä¸ªæ•°æ®é›†ã€‚

```
shots_df = shots_df.assign(
    crunchtime=(shots_df.tot_time > np.timedelta64(60*(48-6), 's'))
               & (shots_df.score_diff <= 2))
```

`crunch_df`åŒ…å« 3886 ä¸ªé•œå¤´ï¼Œæ²¡ä»€ä¹ˆå¯è½»è§†çš„ã€‚(ä½†æˆ‘ä»¬å¯èƒ½ä¸å¸Œæœ›å˜å¾—æ›´å°ã€‚)

è®©æˆ‘ä»¬åŸºäºŽè¿™ä¸ªå±žæ€§æ¥æ¯”è¾ƒä¸¤ä¸ªæ•°æ®é›†ã€‚çŽ°åœ¨ï¼Œåªéœ€å›´ç»•`crunchtime`å˜é‡çš„å¸ƒå°”å€¼æž„å»ºæ•°æ®ï¼Œå³å¯è½»æ¾å®žçŽ°è¿™ä¸€ç‚¹:

```
for crunch_bool in [True, False]:
    filt_shots_df = shots_df[shots_df.crunchtime == crunch_bool]
```

æˆ–å…¨éƒ¨:

ç»“æžœå¾ˆæœ‰æ„æ€ã€‚

![](img/5e988197e35874b9871005428c0b5699.png)

è™½ç„¶æ¯”èµ›å¾ˆæŽ¥è¿‘ï¼Œä½†çƒé˜Ÿæ²¡æœ‰é‡‡å–æžç«¯çš„ç­–ç•¥(ä¾‹å¦‚æ›´å¤šçš„ä¸‰åˆ†çƒ)ã€‚ä½†æ˜¯å¾ˆæ˜Žæ˜¾ï¼Œæƒ³è¦åœ¨ 1 åŒºã€4 åŒºå’Œ 5 åŒºæ‹å‡ºç†æƒ³çš„ç…§ç‰‡æ˜¯å¾ˆéš¾çš„ã€‚æˆ–è®¸æˆ‘ä»¬åº”è¯¥çœ‹çœ‹ç›¸å¯¹äºŽæ•´ä½“å¹³å‡å€¼çš„ç™¾åˆ†æ¯”:

![](img/f3fbd6db57caaaa9f446d14f8a24a2a8.png)

å¾ˆæ˜Žæ˜¾ï¼Œé˜²å®ˆé˜Ÿå‘˜çš„é¢å¤–åŠªåŠ›è¿«ä½¿çƒé˜Ÿåœ¨æ•ˆçŽ‡ä½Žçš„ä½ç½®(2ï¼Œ3ï¼Œ6 å’Œ 7)æŠ•ç¯®æ›´å¤šï¼Œè€Œåœ¨å¥½çš„ä½ç½®(1ï¼Œ4 å’Œ 5)æŠ•ç¯®æ›´å°‘ã€‚è™½ç„¶è¿™å¯èƒ½åªæ˜¯æ•°æ®ä¸­çš„å™ªå£°ï¼Œä½†ä¸‹é™æ¥è‡ªå·²çŸ¥çš„ç†æƒ³æ‹æ‘„åŒºåŸŸè¿™ä¸€äº‹å®žä½¿æˆ‘æ€€ç–‘è¿™ä¸€ç‚¹ã€‚

çœ‹çœ‹æ‹æ‘„çš„å‡†ç¡®æ€§ï¼Œç”»é¢å˜å¾—æ›´åŠ æœ‰è¶£ã€‚

![](img/095649a23df9c1f35ba8c261131ecc38.png)

åœ¨æ¯”èµ›çš„æœ€åŽ 6 åˆ†é’Ÿï¼Œå½“æ¯”åˆ†æŽ¥è¿‘æ—¶ï¼Œåœ¨è¶Šè¿‡ä¸‰åˆ†çº¿ä¹‹å‰ï¼ŒæŠ•ç¯®å‘½ä¸­çŽ‡ä¼šå…¨é¢ä¸‹é™ï¼Œä»Žè€Œå˜å¾—æ›´åŠ å‡†ç¡®*é•¿è·ç¦»*ã€‚è¿™ä»¤äººå›°æƒ‘ï¼Œä½†æ˜¯æœ‰ä¸€äº›æ½œåœ¨çš„è§£é‡Šã€‚

ä¸€ä¸ªæ˜¯*é€‰æ‹©åå·®*ï¼Œåœ¨å›¢é˜Ÿä¸­æœ€ä¼˜ç§€çš„çƒå‘˜è¿™ä¸ªæ—¶å€™å¾—åˆ°è¿™äº›é•œå¤´ã€‚å¦ä¸€ä¸ªæ˜¯ä¸Žåšå¼ˆè®ºç›¸å…³çš„ï¼Œå› ä¸ºé˜²å®ˆå¯èƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šé¼“åŠ±çƒé˜Ÿé‡‡å–è¿™äº›ç›¸å¯¹è¾ƒä½Žæ¯”ä¾‹çš„æŠ•ç¯®(åœ¨æ­£å¸¸æƒ…å†µä¸‹)ã€‚

å°½ç®¡å¦‚æ­¤ï¼Œç ”ç©¶è¿™äº›æ•°æ®çš„å›¢é˜Ÿä¼šè¯´ï¼Œè¿›è¡Œé•¿æ—¶é—´çš„ä¸‰åˆ†å¯èƒ½æ˜¯ä¸€ä¸ªä»¤äººæƒŠè®¶çš„é«˜ä»·å€¼å‘½é¢˜ã€‚

ä¸ºäº†æ€»ç»“è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ‹æ‘„å›¾è¡¨æ¥æ›´è¯¦ç»†åœ°æŸ¥çœ‹æ•°æ®ã€‚

![](img/b6b0c0da0de63e3d6c28a11a4abc5bee.png)

åœ¨ä¸‰åˆ†çº¿å†…çš„å‡ ä¹Žæ‰€æœ‰åœ°æ–¹ï¼ŒæŠ•ç¯®éƒ½å˜å¾—è¶Šæ¥è¶Šä¸å‡†ç¡®ï¼Œä¸‰åˆ†è§’çƒå˜å¾—æ˜Žæ˜¾æ›´åŠ å›°éš¾ï¼Œè¿™å¯èƒ½æ˜¯å› ä¸ºé˜²å®ˆå¢žåŠ äº†åŽ‹åŠ›ã€‚

è™½ç„¶æˆ‘ä»¬é¢„è®¡è¿™äº›æ•°æ®å¯èƒ½ä¼šæœ‰ç‚¹å˜ˆæ‚ï¼Œå› ä¸ºåªæœ‰ 3886 å¼ ç…§ç‰‡ï¼Œè€Œä¸æ˜¯è¶…è¿‡ 210ï¼Œ000 å¼ )ï¼Œä½†è¿™é‡Œåæ˜ äº†å…¨é¢çš„ä¸‹é™ã€‚

å‡ºäºŽè¿™ä¸ªåŽŸå› ï¼Œæˆ‘ä¸ä¼šå¯¹æ–¹å‘å·®å¼‚åšè¿‡å¤šè§£è¯»ã€‚ç»™å®šå°æ ·æœ¬é‡ï¼Œå·¦/å³çš„å·®å¼‚å¯èƒ½åªæ˜¯å™ªå£°ï¼Œè€Œä¸æ˜¯è¶‹åŠ¿çš„åæ˜ ã€‚

# æ€»ç»“

æˆ‘ä¸ªäººå‘çŽ°ï¼Œå°½ç®¡çŽ°åœ¨æ‰¾åˆ°å¤§åž‹æ•°æ®é›†ç›¸å¯¹å®¹æ˜“ï¼Œä½†å®ƒä»¬å¹¶ä¸æ€»æ˜¯åŒ…å«å…è®¸æˆ‘è½»æ¾åœ°å¯¹æ•°æ®è¿›è¡Œåˆ‡ç‰‡ã€è¿›è¡Œæ¯”è¾ƒæˆ–ä»Žä¸­å¾—å‡ºç»“è®ºçš„åŠŸèƒ½ã€‚

ç›¸åï¼Œæˆ‘ç»å¸¸ä¸å¾—ä¸ä»ŽçŽ°æœ‰çš„æ•°æ®ä¸­åˆ›å»ºæ–°çš„ç‰¹å¾ï¼Œå¹¶ä½¿ç”¨æˆ‘çš„ç›´è§‰æ¥è¯„ä¼°åˆ›å»ºæ•°æ®å­é›†çš„é€‚å½“æˆªæ­¢ç‚¹ã€‚

ä¸ºæ­¤ï¼Œæˆ‘å¸Œæœ›ä¸Šé¢çš„ä¾‹å­å¯¹ä½ æœ‰ç”¨ï¼Œä¹Ÿå¯èƒ½æœ‰è¶£ã€‚

è¯·ä¸‹è½½æ•°æ®å’Œä»£ç ï¼ŒçŽ©ä¸€çŽ©ï¼Œç”¨ä½ è‡ªå·±çš„æ•°æ®é›†æž„å»ºç±»ä¼¼çš„ä¸œè¥¿ã€‚æˆ‘å¾ˆæƒ³å¬å¬ä½ çš„ç»åŽ†æˆ–è¯„è®ºï¼

å¦‚æžœä½ å–œæ¬¢è¿™ä¸ªï¼Œæ¯”å¦‚è¯´ðŸ‘‹/åœ¨ [twitter](https://twitter.com/_jphwang) ä¸Šå…³æ³¨ï¼Œæˆ–å…³æ³¨æ›´æ–°ã€‚æˆ‘è¿˜å†™äº†è¿™äº›å…³äºŽç¯®çƒæ•°æ®çš„æ–‡ç« ï¼Œå¯èƒ½å¯¹æœ¬æ–‡æœ‰å¸®åŠ©ï¼Œå¦‚æžœä½ ä»¥å‰æ²¡çœ‹è¿‡çš„è¯ã€‚

[](/how-to-visualize-hidden-relationships-in-data-with-python-analysing-nba-assists-e480de59db50) [## å¦‚ä½•ç”¨ Python å¯è§†åŒ–æ•°æ®ä¸­çš„éšè—å…³ç³» NBA åŠ©æ”»åˆ†æž

### ä½¿ç”¨äº¤äº’å¼å¿«ç…§ã€æ°”æ³¡å›¾å’Œæ¡‘åŸºå›¾æ“çºµå’Œå¯è§†åŒ–æ•°æ®ï¼Œä½¿ç”¨ Plotly(ä»£ç å’Œæ•°æ®â€¦

towardsdatascience.com](/how-to-visualize-hidden-relationships-in-data-with-python-analysing-nba-assists-e480de59db50) [](/interactive-basketball-data-visualizations-with-plotly-8c6916aaa59e) [## ç”¨ Plotly å®žçŽ°äº¤äº’å¼ç¯®çƒæ•°æ®å¯è§†åŒ–

### ç”¨ hexbin shot å›¾è¡¨åˆ†æžä½“è‚²æ•°æ®ï¼Œç”¨ Plotly å’Œ Plotly Express åˆ†æžæ°”æ³¡å›¾(æºä»£ç &æˆ‘è‡ªå·±çš„æ•°æ®â€¦

towardsdatascience.com](/interactive-basketball-data-visualizations-with-plotly-8c6916aaa59e)