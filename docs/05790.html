<html>
<head>
<title>4D Data Visualization with Kepler.gl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Kepler.gl 实现 4D 数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4d-data-visualization-with-kepler-gl-b6bd6dd90451?source=collection_archive---------37-----------------------#2020-05-13">https://towardsdatascience.com/4d-data-visualization-with-kepler-gl-b6bd6dd90451?source=collection_archive---------37-----------------------#2020-05-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="5c35" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据可视化</h2><div class=""/><div class=""><h2 id="19a4" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">教程 Kepler.gl 以新冠肺炎数据集为例显示时态数据</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f96585df3b335267b176d6f0e570ccf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TNRX1bC3OX5Kly8aluomJw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">在 Kepler.gl 中可视化德国新冠肺炎数据</strong>(作者)</p></figure><p id="0787" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae me" href="https://kepler.gl/" rel="noopener ugc nofollow" target="_blank"> Kepler.gl </a> is 是优步于 2018 年推出的一款针对大规模数据集的强大开源地理空间分析工具。它是数据科学家探索和分析地理空间数据的绝佳工具。</p><p id="a6fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本文中，我将展示一个非常简短的教程，介绍如何准备和可视化四维数据:位置(纬度、经度、高度)和时间。例如，下图显示了德国一段时间内新增新冠肺炎确诊病例数的可视化示例:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/7eebeaa6100139830a0d8e531f102483.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WF9xxVy7mlucvzKc5u37_g.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">在 Kepler.gl </strong>中可视化德国新冠肺炎数据(作者—来自<a class="ae me" href="https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/nCoV_node.html" rel="noopener ugc nofollow" target="_blank"> RKI </a>的数据集)</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="6e5b" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">第一步。数据准备📝</h1><p id="021c" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nh lt lu lv ni lx ly lz nj mb mc md im bi translated">为了在 2D/3D 地图上可视化数据，我们需要确保我们的数据包含纬度和经度的地理空间字段，以映射每一行数据。如果数据源是 shapefile、geojson 这样的地理空间格式，那么我们就不需要担心这个问题。但是，如果它是表格格式并且没有地理空间字段，那么我们可以在 GIS 软件中运行地理编码器，或者使用一些地理编码器脚本，如 Python 和地理编码器库，如下例所示:</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="b4c9" class="np mo it nl b gy nq nr l ns nt"><strong class="nl jd"><em class="nu">import</em> geocoder<br/>g = geocoder.google('Stuttgart', key="&lt;Your Google API Key&gt;")<br/>print(g.latlng)<br/></strong>&gt;&gt; [48.7758459, 9.1829321]</span></pre><p id="51e5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">或者，您也可以运行使用 GeoPandas 来完成这项工作。数据集中的日期/时间列是可选的，它允许应用程序显示及时的数据。例如，我从 RKI 下载了德国新冠肺炎数据集。(从此处<a class="ae me" href="https://npgeo-corona-npgeo-de.hub.arcgis.com/datasets/dd4580c810204019a7b8eb3e0b329dd6_0" rel="noopener ugc nofollow" target="_blank">下载</a>)然后准备如下所示的数据集:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/60fcc9cc0e6136104d2351cd7bba642e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cacCNup5C-ne8XMDqqc4NA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">Cleaned _ RKI _ covid 19 _ Dataset . CSV</strong>(作者—来自<a class="ae me" href="https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/nCoV_node.html" rel="noopener ugc nofollow" target="_blank"> RKI </a>的数据集)</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="2be7" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">第二步。将数据集加载到 Kepler.gl🔃</h1><p id="09a6" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nh lt lu lv ni lx ly lz nj mb mc md im bi translated">这一步很简单。我们可以简单地将准备好的数据集拖放到<em class="nu">中。csv </em>、<em class="nu">。json </em>，或<em class="nu">。geojson </em>到 Kepler.gl 应用程序中。或者，如果您是 Python 和 Jupyter 的爱好者，那么您可以在将熊猫加载到开普勒地图之前，将它们加载到您的轻松加载数据集。</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="929b" class="np mo it nl b gy nq nr l ns nt"><strong class="nl jd">from keplergl import KeplerGl<br/>import pandas as pd</strong></span><span id="bb3f" class="np mo it nl b gy nw nr l ns nt"><strong class="nl jd">map = KeplerGl(height=500)<br/>df = pd.read_csv(f'&lt;your dataset&gt;')<br/>#...........................................<br/>#... pandas data manipulation if needed ....<br/>#...........................................</strong></span><span id="eb97" class="np mo it nl b gy nw nr l ns nt"><strong class="nl jd">map.add_data(data=&lt;df_cleaned&gt;, name='&lt;data_named&gt;')</strong></span></pre></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="636c" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">第三步。开普勒地图设置🔨</h1><p id="397e" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nh lt lu lv ni lx ly lz nj mb mc md im bi translated">现在，让我们来看看开普勒地图吧！😊</p><ul class=""><li id="9eb1" class="nx ny it lk b ll lm lo lp lr nz lv oa lz ob md oc od oe of bi translated">选择你想要的地图类型(在上面的第一个 gif 例子中，我使用了 Hexbin)</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/cf8dfa52063058272849ed0aaa1733b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZR0iTec8onqzF92mifFsIw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">开普勒. gl </strong>中的图层类型(作者)</p></figure><ul class=""><li id="8fed" class="nx ny it lk b ll lm lo lp lr nz lv oa lz ob md oc od oe of bi translated">定义位置(纬度/经度)列。</li><li id="4742" class="nx ny it lk b ll oh lo oi lr oj lv ok lz ol md oc od oe of bi translated">指定颜色主题、比例、选定列的聚合方法、过滤器和不透明度。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi om"><img src="../Images/30e81efe1b226b02368c3ef0a9c17e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*FlUSZaoecZ6iqy81uUL96g.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">Kepler . GL 中的颜色设置</strong>(作者)</p></figure><ul class=""><li id="ecae" class="nx ny it lk b ll lm lo lp lr nz lv oa lz ob md oc od oe of bi translated">调整网格大小，开普勒会自动为你聚合数据！</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/7df20e4d6bb5c506d86251de7d7028ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A8zboC4KYBFD8pAt05I77g.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">在 Kepler.gl </strong>中调整网格大小(作者)</p></figure><ul class=""><li id="c153" class="nx ny it lk b ll lm lo lp lr nz lv oa lz ob md oc od oe of bi translated">启用基于选定列的高度。在本例中，我选择通过对新冠肺炎案件编号求和来汇总数据。</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/5a3c30cb8c874d2fce27454753247b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LrN-Yn7ol6XHzdVV_HhleQ.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">在 Kepler.gl </strong>中调整网格高度属性(作者)</p></figure><ul class=""><li id="34b7" class="nx ny it lk b ll lm lo lp lr nz lv oa lz ob md oc od oe of bi translated">最后，让我们通过添加图层过滤器并选择日期/时间列来启用时态可视化。然后，我们将得到动画地图，显示随着时间的推移，网格高度的新冠肺炎案件。🎉🎉</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mf"><img src="../Images/83b653b3847d05372c6a3aa7fe595a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4GEAr7bJSWgYxsT0ly91_w.gif"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd lh">启用 Kepler.gl 中的时间过滤器</strong>(作者)</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="4411" class="mn mo it bd mp mq mr ms mt mu mv mw mx ki my kj mz kl na km nb ko nc kp nd ne bi translated">结论:</h1><p id="5a66" class="pw-post-body-paragraph li lj it lk b ll nf kd ln lo ng kg lq lr nh lt lu lv ni lx ly lz nj mb mc md im bi translated">本文展示了如何使用 Kepler.gl 在 4D 可视化和浏览数据集的分步教程。您可以使用 Kepler.gl 来体验许多功能，如热点图图层、旅行图层等。在 https://kepler.gl/<a class="ae me" href="https://kepler.gl/" rel="noopener ugc nofollow" target="_blank">检查一下。我希望你喜欢这篇文章，并发现它对你的日常工作或项目有用。如果您有任何问题或意见，请随时给我留言。</a></p><p id="fe8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae me" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">安全<strong class="lk jd">健康</strong>健康<strong class="lk jd">！💪</strong></p><p id="2645" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读。📚</strong></p></div></div>    
</body>
</html>