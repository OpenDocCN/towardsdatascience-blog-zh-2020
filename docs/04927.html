<html>
<head>
<title>The Basics of Data Visualisation with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 数据可视化基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-basics-of-data-visualisation-with-python-23188aa9fc1a?source=collection_archive---------26-----------------------#2020-04-29">https://towardsdatascience.com/the-basics-of-data-visualisation-with-python-23188aa9fc1a?source=collection_archive---------26-----------------------#2020-04-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6eed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">不到 5 分钟的逐步介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d5cecd3e1cba2f1a52bceb88983fedde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bDCogsE0nxhnVkYZ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU 机构</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9d1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇博客中，我们将学习如何获取、转换并最终吸引人地呈现数据。我们将使用新冠肺炎数据集和 Python 来学习基础知识。</p><blockquote class="lv"><p id="7a0d" class="lw lx it bd ly lz ma mb mc md me lu dk translated">学习数据，你就可以讲述更多人甚至还不知道却渴望听到的故事。—内森·尤</p></blockquote><p id="f39d" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">总之，在不到 5 分钟的时间里，你将学会如何从熊猫的数据框架中获取数据，如何转换数据框架，并最终通过折线图、条形图、饼状图和热图将其可视化。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="0f45" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">采购数据</h1><p id="b041" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">任何项目的最大问题之一是找到正确的数据。正如<a class="ae ky" href="https://medium.com/financeexplained/learn-to-build-your-own-historical-stock-price-data-sets-2495f8a23d11" rel="noopener">之前看到的</a>，人们可以尝试建立自己的数据集，但在这种情况下，我们没有必要这样做。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/ff43167b6aeb0695201a352e84eed51c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y0oP7jNjnMyGDLx3"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·温克勒在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="9df5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将使用来自约翰·霍普金系统科学与工程中心的数据。更具体地说，我们将使用<a class="ae ky" href="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv" rel="noopener ugc nofollow" target="_blank">每日死亡人数</a>的时间序列数据。</p><p id="9d9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做的第一件事是在浏览器上打开链接，检查数据以识别一些快速信息。我们可以看到数据是 CSV 格式的(带分隔符'，')。我们还可以看到，每一天都包含死亡总人数(不是每日死亡人数)。最后，我们可以看到国家/地区级别的数据。</p><p id="087b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事不宜迟，让我们来看看代码。为了方便起见，熊猫图书馆允许我们直接从网上获取数据。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="30b9" class="nu ms it nq b gy nv nw l nx ny">import pandas as pd</span><span id="735b" class="nu ms it nq b gy nz nw l nx ny">url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv'</span><span id="ec83" class="nu ms it nq b gy nz nw l nx ny">df = pd.read_csv(url, delimiter=',',header = 'infer')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/2239ec28d42c99088457a3d0025c6170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0nmvbVOmPFpZSc0sQ0gZBg.png"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="14a2" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">转换数据</h1><p id="f9e5" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">既然我们已经获得了数据，我们需要为处理做好准备。我们需要的必要操作取决于我们试图实现的目标。</p><p id="49df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我们应该做的第一件事是以两种方式过滤我们的数据:</p><ol class=""><li id="9b51" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu og oh oi oj bi translated">仅保留国家级数据(即删除任何定义了省/州的数据)</li><li id="d4b7" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu og oh oi oj bi translated">只保留英国、美国、意大利和德国的国家级数据。</li></ol><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="9789" class="nu ms it nq b gy nv nw l nx ny">df_interest = df.loc[<br/>                df['Country/Region'].isin(['United Kingdom','US', 'Italy', 'Germany'])<br/>                &amp; df['Province/State'].isna()]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/c6d55cb2e863a8a0688400ba131b3f3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*093qooMqaEsHgpV1GUSfPA.png"/></div></div></figure><p id="1543" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我想转置数据，这样每一列是每个国家，每一行是每个日期。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="41b9" class="nu ms it nq b gy nv nw l nx ny">df_interest.rename(index=lambda x: df_interest.at[x,'Country/Region'], inplace=True)</span><span id="5e1c" class="nu ms it nq b gy nz nw l nx ny">df1 = df_interest.transpose()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/bb4acccacb220fc0812cc9d5bdd0cb25.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*ihdvHWTO18zdGJCZCBYqOw.png"/></div></figure><p id="81a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以去掉我们不感兴趣的行:</p><ul class=""><li id="097b" class="ob oc it lb b lc ld lf lg li od lm oe lq of lu or oh oi oj bi translated">省/州、国家/地区、经度和纬度</li><li id="3f6f" class="ob oc it lb b lc ok lf ol li om lm on lq oo lu or oh oi oj bi translated">所有国家的死亡率为零的任何列</li></ul><p id="a543" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后将我们的索引数据类型转换为 DateTime，这样它就可以很好地处理时序操作。</p><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="5abb" class="nu ms it nq b gy nv nw l nx ny">df1 = df1.drop(['Province/State','Country/Region', 'Lat','Long'])</span><span id="1047" class="nu ms it nq b gy nz nw l nx ny">df1 = df1.loc[(df1 != 0).any(1)]</span><span id="e995" class="nu ms it nq b gy nz nw l nx ny">df1.index = pd.to_datetime(df1.index)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/87319dde5aabe2cb19dadb9dbe58edb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*mfwcou1DffGhAQM_QlhAYg.png"/></div></figure><p id="ad0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，我们就可以开始可视化我们的数据了。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="804c" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">数据可视化</h1><h2 id="a401" class="nu ms it bd mt ot ou dn mx ov ow dp nb li ox oy nd lm oz pa nf lq pb pc nh pd bi translated">线形图</h2><p id="e74f" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">在直线上绘制数据可以显示数据如何随时间变化，并且可以比较不同的变量。一旦数据格式正确，用 Python 创建线图就非常简单了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/3052fd4c2feec3fd024a5a6f7dc79cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*YC2ijRgEuGYCuH2v3_8IZQ.png"/></div></figure><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="bfaa" class="nu ms it nq b gy nv nw l nx ny">from matplotlib import pyplot</span><span id="6eb5" class="nu ms it nq b gy nz nw l nx ny">df1.plot()</span><span id="97fc" class="nu ms it nq b gy nz nw l nx ny">pyplot.xlabel('Dates')</span><span id="4aec" class="nu ms it nq b gy nz nw l nx ny">pyplot.ylabel('No of Deaths')</span><span id="e136" class="nu ms it nq b gy nz nw l nx ny">pyplot.show()</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="bd1c" class="nu ms it bd mt ot ou dn mx ov ow dp nb li ox oy nd lm oz pa nf lq pb pc nh pd bi translated">条形图</h2><p id="9344" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">我很确定我从来没有打开过没有条形图的 PowerPoint 演示文稿。在比较单个时间点的不同变量时，条形图非常有效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/c137fafe27ffaba9d0be84b22de24aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*vedJ-TYgMJYpD7B8DgoYEA.png"/></div></figure><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="0e72" class="nu ms it nq b gy nv nw l nx ny">import matplotlib.pyplot as plt; plt.rcdefaults()</span><span id="4769" class="nu ms it nq b gy nz nw l nx ny">import numpy as np</span><span id="26be" class="nu ms it nq b gy nz nw l nx ny">import matplotlib.pyplot as plt</span><span id="a325" class="nu ms it nq b gy nz nw l nx ny">objects = df1.max().index</span><span id="3605" class="nu ms it nq b gy nz nw l nx ny">y_pos = np.arange(len(objects))</span><span id="362a" class="nu ms it nq b gy nz nw l nx ny">performance = df1.tail(1).values.tolist()[0]</span><span id="65ae" class="nu ms it nq b gy nz nw l nx ny">plt.bar(y_pos, performance, align='center', alpha=0.5)</span><span id="b94f" class="nu ms it nq b gy nz nw l nx ny">plt.xticks(y_pos, objects)</span><span id="b227" class="nu ms it nq b gy nz nw l nx ny">plt.ylabel('Deaths')</span><span id="e33a" class="nu ms it nq b gy nz nw l nx ny">plt.xlabel('Countries')</span><span id="3a9a" class="nu ms it nq b gy nz nw l nx ny">plt.title('Deaths per Country')</span><span id="4776" class="nu ms it nq b gy nz nw l nx ny">plt.show()</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="286e" class="nu ms it bd mt ot ou dn mx ov ow dp nb li ox oy nd lm oz pa nf lq pb pc nh pd bi translated">圆形分格统计图表</h2><p id="d544" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">谁不喜欢馅饼…图表！饼状图是显示不同数据集之间相对大小的另一个好方法；很像条形图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/f0cf668471e505ff82be8b1826d00285.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*6MbLbnjzbQXRTu2-OIUxCg.png"/></div></figure><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="9ba6" class="nu ms it nq b gy nv nw l nx ny">from matplotlib import pyplot<br/>import numpy as np</span><span id="ff59" class="nu ms it nq b gy nz nw l nx ny">#Credit: <a class="ae ky" href="https://stackoverflow.com/questions/41088236/how-to-have-actual-values-in-matplotlib-pie-chart-displayed-python" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/questions/41088236/how-to-have-actual-values-in-matplotlib-pie-chart-displayed-python</a><br/>def absolute_value(val):<br/>    a  = np.round(val/100.*df1.max().sum(), 0)<br/>    return int(a)</span><span id="ea6d" class="nu ms it nq b gy nz nw l nx ny">plot = df1.max().plot.pie(y=df1.max().index, figsize=(5, 5),autopct=absolute_value, label='')<br/>plot.set_title('Total Number of Deaths', fontsize=12)</span><span id="e733" class="nu ms it nq b gy nz nw l nx ny">pyplot.show()</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="78cd" class="nu ms it bd mt ot ou dn mx ov ow dp nb li ox oy nd lm oz pa nf lq pb pc nh pd bi translated">热图</h2><p id="4a28" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">热图是一种更先进的可视化技术，允许我们呈现不同变量的时间序列数据，并进一步通过颜色进行比较。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/93fa65d0d55638468d53399b4cf5d198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0ZqDCe_XI50cbaXT7LjGA.png"/></div></div></figure><pre class="kj kk kl km gt np nq nr ns aw nt bi"><span id="6cc1" class="nu ms it nq b gy nv nw l nx ny">#Credit <a class="ae ky" href="https://matplotlib.org/3.1.1/gallery/images_contours_and_fields/image_annotated_heatmap.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/3.1.1/gallery/images_contours_and_fields/image_annotated_heatmap.html</a></span><span id="c77d" class="nu ms it nq b gy nz nw l nx ny">import numpy as np<br/>from matplotlib import pyplot</span><span id="18b1" class="nu ms it nq b gy nz nw l nx ny">df1 = df1.tail(15)<br/>dates = df1.index.strftime('%Y-%b-%d')<br/>countries = df1.max().index</span><span id="9420" class="nu ms it nq b gy nz nw l nx ny">df2 = pd.DataFrame(df1, columns=df1.columns).astype(int)</span><span id="697b" class="nu ms it nq b gy nz nw l nx ny">matrix = np.array(df2).transpose()</span><span id="e5d0" class="nu ms it nq b gy nz nw l nx ny">fig, ax = pyplot.subplots()<br/>im = ax.imshow(matrix)</span><span id="6ad2" class="nu ms it nq b gy nz nw l nx ny"># We want to show all ticks...<br/>ax.set_xticks(np.arange(len(dates)))<br/>ax.set_yticks(np.arange(len(countries)))<br/># ... and label them with the respective list entries<br/>ax.set_xticklabels(dates)<br/>ax.set_yticklabels(countries)</span><span id="f594" class="nu ms it nq b gy nz nw l nx ny"># Rotate the tick labels and set their alignment.<br/>pyplot.setp(ax.get_xticklabels(), rotation=45, ha="right",<br/>         rotation_mode="anchor")</span><span id="6984" class="nu ms it nq b gy nz nw l nx ny"># Loop over data dimensions and create text annotations.<br/>for i in range(len(dates)):<br/>    for j in range(len(countries)):<br/>        text = ax.text(i, j, matrix[j, i],<br/>                       ha="center", va="center", color="w", size = '10')</span><span id="ecaa" class="nu ms it nq b gy nz nw l nx ny">ax.set_title("Deaths Per Day Heatmap")<br/>fig.tight_layout()<br/>pyplot.show()</span></pre></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="d887" class="mr ms it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="04cf" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">好了，伙计们。在不到五分钟的时间里，你已经学会了如何创建数据可视化的一些基础知识。创造这些观想可以成为一个非常强大的工具，帮助你讲述一个故事和理解一个信息。</p><p id="5544" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">祝大家学习愉快，平安无事！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="1d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你离开之前，如果你喜欢这篇文章，你可能也会喜欢:</p><div class="pi pj gp gr pk pl"><a rel="noopener follow" target="_blank" href="/how-to-extract-text-from-pdf-245482a96de7"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">如何从 PDF 中提取文本</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">学习使用 Python 从 pdf 中提取文本</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">towardsdatascience.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz ks pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a href="https://medium.com/financeexplained/web-data-scraping-in-python-with-regex-and-beautifulsoup-e57f4a3392e3" rel="noopener follow" target="_blank"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">用 Python 中的 Regex 和 BeautifulSoup 实现 Web 数据抓取</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">了解如何快速从互联网上抓取数据</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">medium.com</p></div></div><div class="pu l"><div class="qa l pw px py pu pz ks pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a rel="noopener follow" target="_blank" href="/an-introduction-to-sql-4c9eb27995df"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd iu gy z fp pq fr fs pr fu fw is bi translated">SQL 简介</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">通过示例学习 SQL 的基础知识</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">towardsdatascience.com</p></div></div><div class="pu l"><div class="qb l pw px py pu pz ks pl"/></div></div></a></div></div></div>    
</body>
</html>