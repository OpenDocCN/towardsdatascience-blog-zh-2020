<html>
<head>
<title>Working with Numpy: Slicing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Numpy:切片</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-numpy-arrays-slicing-4453ec757ff0?source=collection_archive---------34-----------------------#2020-06-25">https://towardsdatascience.com/working-with-numpy-arrays-slicing-4453ec757ff0?source=collection_archive---------34-----------------------#2020-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4725" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/pytrix-series" rel="noopener" target="_blank"> PyTrix系列</a></h2><div class=""/><div class=""><h2 id="0274" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">PyTrix #3:访问Numpy数组中的序列</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/8384cdfaf65f18e608e4bbf5cdba7098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RWReonSS57Bhurq3"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@juanma?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">胡安·曼努埃尔·努涅斯·门德斯</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="a436" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">限幅</h1><p id="53cd" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">当我们想要访问一个序列的一部分，比如一个字符串、元组或列表时，我们可以利用Python中的一个称为切片的特性，它使我们能够编写更加干净、简洁和可读的代码。</p><p id="6f16" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">切片可用于查看、修改或删除可变序列中的项目，例如在列表数据类型中。此外，这个特性还可以很好地利用像NumPy和Pandas这样的框架。</p><p id="625c" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">有关本文中使用的代码，请参见:</p><div class="nb nc gp gr nd ne"><a href="https://github.com/kurtispykes/demo/blob/master/pytrix/pytrix_slicing.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">kurtispykes/演示</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">permalink dissolve GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns lb ne"/></div></div></a></div><h1 id="b8b1" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">数组与列表</h1><p id="e5db" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">分割一个数组和分割一个列表没有太大的不同。主要的区别是，数组，你可以在多个维度上分割数组，另一个重要的因素我将在后面讲到。</p><p id="28b8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">类似于我之前在PyTrix系列中提到的关于索引的内容；</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/working-with-numpy-arrays-indexing-e4c08595ed57"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">使用Numpy数组:索引</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">访问Numpy数组中的元素</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns lb ne"/></div></div></a></div><p id="b702" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">当我们获取数组的一部分时，返回的数组是原始数组的视图——我们最终以不同的顺序访问了相同的数据。然而，当我们分割一个列表时，它将返回一个全新的列表。</p><h1 id="b23d" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">切片列表数据类型</h1><p id="dc8c" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">为了向您展示Python的内置切片特性是如何工作的，我现在将演示它的功能…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="6ed6" class="nz lj it nv b gy oa ob l oc od">a = [1, 2, 3, 4, 5]</span></pre><p id="2209" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">接下来，我将演示python切片是如何工作的，并截取这个列表的一部分并打印出来…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="32a9" class="nz lj it nv b gy oa ob l oc od">b = a[1:4]<br/>print(b)<br/>&gt;&gt;&gt;&gt; [2, 3, 4]</span></pre><p id="d865" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">当我们使用切片表示法时，我们指定了我们希望从切片中得到的[start:end]索引。这也从开始复制列表，但不包括结束索引。</p><p id="db35" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们还可以做的一件很酷的事情是省略切片的开头或结尾。例如，如果我们省略开始并提供一个结束索引，Python将从开始索引开始切片，但不包括结尾提供的索引。或者，如果我们省略结尾并提供一个开始，Python将从提供的开始索引开始，并切片到列表的结尾。有关示例，请参见下面的代码单元格。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="42a4" class="nz lj it nv b gy oa ob l oc od">c = a[:3]<br/>d = a[2:]<br/>e = a[:]</span><span id="81b0" class="nz lj it nv b gy oe ob l oc od">print(f"List c: {c}\nList d: {d}\nList e: {e}")<br/>&gt;&gt;&gt;&gt; List c: [1, 2, 3]<br/>     List d: [3, 4, 5]<br/>     List e: [1, 2, 3, 4, 5]</span></pre><p id="0664" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">请注意，在列表e中，我没有提供开始或结束。这只是整个列表的副本。</p><p id="33d2" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">最后，为了不使索引变得复杂。让我们看看列表和切片的区别。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="aa43" class="nz lj it nv b gy oa ob l oc od">f = a[2]<br/>g = a[2:3]</span><span id="4800" class="nz lj it nv b gy oe ob l oc od">print(f"f: {f}\ng: {g}")<br/>&gt;&gt;&gt;&gt; f: 3<br/>     g: [3] </span></pre><p id="f2e8" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">索引返回给定索引处的列表元素，而切片返回单个元素的列表。</p><h1 id="b8f3" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">切片1D阵列</h1><p id="84e4" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">如上所述，分割1D Numpy数组和list几乎是相同的任务，尽管如此，正如您将看到的，它们有一个明显的区别。</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="52b3" class="nz lj it nv b gy oa ob l oc od">import numpy as np</span><span id="1ad9" class="nz lj it nv b gy oe ob l oc od">np_a = np.array([1, 2, 3, 4, 5])<br/>np_b = np_a[1:4]</span><span id="f5c7" class="nz lj it nv b gy oe ob l oc od">print(np_b)<br/>&gt;&gt;&gt;&gt; [2 3 4] </span></pre><p id="3be3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">不同于切片时创建新列表的列表，NumPy切片返回我们存储在<code class="fe of og oh nv b">np_b</code>中的数据视图。因此，如果我们要改变<code class="fe of og oh nv b">np_b</code>中的一个元素，那么<code class="fe of og oh nv b">np_a</code>中的元素也会改变，反之亦然。请看下一个代码单元格中的示例:</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="d3ce" class="nz lj it nv b gy oa ob l oc od">print(f"Original Array {np_a}")<br/>np_b[1] = 6<br/>print(f"np_b: {np_b}\nOriginal Array: {np_a}")<br/>&gt;&gt;&gt;&gt; Original Array: [1 2 3 4 5]<br/>     np_b: [2 6 4]<br/>     Original Array: [1 2 6 4 5]</span></pre><h1 id="c14e" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">切片2D阵列</h1><p id="865b" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">2D阵列可以在两个轴上切片…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="0c05" class="nz lj it nv b gy oa ob l oc od">a_2d = np.array([[1, 2, 3, 4, 5],<br/>                 [6, 7, 8, 9, 10],<br/>                 [11, 12, 13, 14, 15],<br/>                 [16, 17, 18, 19, 20]])<br/>print(a_2d[1:, 1:3])<br/>&gt;&gt;&gt;&gt; [[7 8]<br/>      [12 13]<br/>      [17 18]]</span></pre><p id="6355" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">为了进行分解，我们从1:到数组的末尾取了一些行，从1:3取了一些列(因此是1和2列)。</p><h1 id="2548" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">切片3D数组</h1><p id="d358" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">3D阵列可以在所有3个轴上切片…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="cd67" class="nz lj it nv b gy oa ob l oc od">a_3d = np.array([[[1, 2, 3,], [4, 5, 6], [7, 8, 9]],<br/>                 [[10, 11, 12], [13, 14, 15], [16, 17, 18]],<br/>                 [[19, 20, 21], [22, 23, 24], [25, 26, 27]]])</span><span id="ca1e" class="nz lj it nv b gy oe ob l oc od">print(a_3d[1:, 1:, :])<br/>&gt;&gt;&gt;&gt; [[ [13, 14, 15] [16, 17, 18]]<br/>      [ [22, 23, 24] [25, 26, 27] ]]</span></pre><p id="0260" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们选择了从索引1开始的所有平面、从索引1开始的所有行和所有列。出于清晰的原因，由于这可能相当棘手，我在下面再次解释了这一点；</p><ul class=""><li id="b2cf" class="oi oj it mc b md mw mg mx mj ok mn ol mr om mv on oo op oq bi translated">飞机<code class="fe of og oh nv b">1:</code>(最后两架飞机)</li><li id="982e" class="oi oj it mc b md or mg os mj ot mn ou mr ov mv on oo op oq bi translated">排<code class="fe of og oh nv b">2:</code>(最后2排)</li><li id="3545" class="oi oj it mc b md or mg os mj ot mn ou mr ov mv on oo op oq bi translated">列<code class="fe of og oh nv b">:</code>(所有列)</li></ul><p id="3f68" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">老实说，我没有必要在列中包含<code class="fe of og oh nv b">:</code>。我们可以使用<code class="fe of og oh nv b">:</code>功能获得平面、行或列的完整切片。然而，当我们有尾随索引时，我们仍然可以通过简单地省略索引来获得完整的切片。</p><p id="a538" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">简单地说，这意味着…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="c29a" class="nz lj it nv b gy oa ob l oc od"># 2D Arrays<br/>print(a_2d[1:3, :] ==  a_2d[1:3])</span><span id="a9c9" class="nz lj it nv b gy oe ob l oc od"># 3D Arrays<br/>print(a_3d[1:, :2, :] == a_3d[1:, :2])<br/>print(a_3d[2:, :, :] == a_3d[2:, :])<br/>&gt;&gt;&gt;&gt; [[ True  True  True  True  True]<br/>      [ True  True  True  True  True]]<br/>    <br/>     [[[ True  True  True]<br/>       [ True  True  True]]<br/>      [[ True  True  True]<br/>       [ True  True  True]]]pr</span><span id="cc1f" class="nz lj it nv b gy oe ob l oc od">     [[[ True  True  True]<br/>       [ True  True  True]<br/>       [ True  True  True]]]</span></pre><h1 id="048f" class="li lj it bd lk ll lm ln lo lp lq lr ls ki lt kj lu kl lv km lw ko lx kp ly lz bi translated">切片和索引</h1><p id="db59" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">将此与之前关于索引的PyTrix系列相关联:</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/working-with-numpy-arrays-indexing-e4c08595ed57"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">使用Numpy数组:索引</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">访问Numpy数组中的元素</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns lb ne"/></div></div></a></div><p id="77a5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">我们知道，我们可以使用索引来选择特定的平面、行或列。例如…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="6125" class="nz lj it nv b gy oa ob l oc od">print(a_2d[1,2:4])<br/>&gt;&gt;&gt;&gt; [8 9]</span></pre><p id="50a5" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">另一方面，我们也可以使用切片来做类似的操作…</p><pre class="ks kt ku kv gt nu nv nw nx aw ny bi"><span id="4d1a" class="nz lj it nv b gy oa ob l oc od">print(a_2d[1:2,2:4])<br/><em class="ow">&gt;&gt;&gt;&gt; [[8 9]]</em></span></pre><p id="8e69" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">请注意索引和切片返回的细微差别。索引返回一个1D数组，而切片方法返回一个只有一行的2D数组。</p><p id="89a9" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">这个故事中使用的代码可以在…</p><div class="nb nc gp gr nd ne"><a href="https://github.com/kurtispykes/demo/blob/master/pytrix/pytrix_slicing.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">kurtispykes/演示</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">permalink dissolve GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns lb ne"/></div></div></a></div></div><div class="ab cl ox oy hx oz" role="separator"><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc pd"/><span class="pa bw bk pb pc"/></div><div class="im in io ip iq"><h2 id="41c4" class="nz lj it bd lk pe pf dn lo pg ph dp ls mj pi pj lu mn pk pl lw mr pm pn ly iz bi translated">一锤定音</h2><p id="2a69" class="pw-post-body-paragraph ma mb it mc b md me kd mf mg mh kg mi mj mk ml mm mn mo mp mq mr ms mt mu mv im bi translated">如果您认为我遗漏了什么，或者您想向我指出什么，或者如果您仍然不确定什么，您的反馈是有价值的。发个回应！</p><p id="cca3" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">然而，如果你想和我联系，我在LinkedIn上是最活跃的，我也很乐意和你联系。</p><div class="nb nc gp gr nd ne"><a href="https://www.linkedin.com/in/kurtispykes/" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">Kurtis Pykes -人工智能博客-走向数据科学| LinkedIn</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">在世界上最大的职业社区LinkedIn上查看Kurtis Pykes的个人资料。Kurtis有两个工作列在他们的…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">www.linkedin.com</p></div></div><div class="nn l"><div class="po l np nq nr nn ns lb ne"/></div></div></a></div><p id="d27d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">如果你喜欢这个PyTrix系列，你可以在下面的PyTrix系列链接中找到迄今为止的所有文章…</p><div class="nb nc gp gr nd ne"><a href="https://towardsdatascience.com/tagged/pytrix-series" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">Pytrix系列-走向数据科学</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">阅读《走向数据科学》中关于Pytrix系列的文章。共享概念、想法和代码的媒体出版物。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="pp l np nq nr nn ns lb ne"/></div></div></a></div><p id="799d" class="pw-post-body-paragraph ma mb it mc b md mw kd mf mg mx kg mi mj my ml mm mn mz mp mq mr na mt mu mv im bi translated">你可能会对我最近的帖子感兴趣…</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/staying-motivated-for-your-data-science-career-e845f18421e1"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jd gy z fp nj fr fs nk fu fw jc bi translated">为您的数据科学事业保持动力</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">我们可以长期保持动力。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="pq l np nq nr nn ns lb ne"/></div></div></a></div></div></div>    
</body>
</html>