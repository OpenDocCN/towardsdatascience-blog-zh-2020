<html>
<head>
<title>Create Music Recommendation System Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建音乐推荐系统</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-music-recommendation-system-using-python-ce5401317159?source=collection_archive---------3-----------------------#2020-03-19">https://towardsdatascience.com/create-music-recommendation-system-using-python-ce5401317159?source=collection_archive---------3-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3f6c" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">推荐系统</h2><div class=""/><div class=""><h2 id="fcc7" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">熟悉Tableau并创建一个协同过滤推荐系统</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/b911f80bd5f75e5459fb371eb1b3282d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GMikfjbGYyPGDTYdJuMwhg.png"/></div></div></figure><p id="3e1a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi lz translated">大家好！推荐系统在网上无处不在，相当标准。亚马逊、网飞和许多这样的公司都在使用推荐系统。我们要构建的这个与Spotify或Youtube音乐所用的非常相似，但要简单得多。</p><p id="caae" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">跟进所需的工具是Tableau和Python3。你可以从<a class="ae mi" href="https://www.tableau.com/academic/students" rel="noopener ugc nofollow" target="_blank">这里</a>下载Tableau。让我先带您浏览一下数据集，稍后我将在数据可视化部分提供Tableau的简要介绍。</p><h1 id="7ba8" class="mj mk it bd ml mm mn mo mp mq mr ms mt ki mu kj mv kl mw km mx ko my kp mz na bi translated">数据集</h1><p id="d401" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated"><a class="ae mi" href="http://millionsongdataset.com/" rel="noopener ugc nofollow" target="_blank"><strong class="lf jd">百万首歌曲数据集</strong>是一百万首当代流行音乐曲目</a>的音频特征和元数据的免费收集。</p><p id="11d0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">以下是数据集的链接:</strong></p><p id="851f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><a class="ae mi" href="https://static.turi.com/datasets/millionsong/10000.txt" rel="noopener ugc nofollow" target="_blank">https://static.turi.com/datasets/millionsong/10000.txt</a></p><p id="7779" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><a class="ae mi" href="https://static.turi.com/datasets/millionsong/song_data.csv" rel="noopener ugc nofollow" target="_blank">https://static.turi.com/datasets/millionsong/song_data.csv</a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/f608c15bb0ef89d10c98042e288855fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJWb5wA4KVsbw8JwpE7gWg.png"/></div></div></figure><p id="cf2b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这是我们需要合并的两个数据集。我们将使用Python3连接数据集，并将其导入Tableau进行数据可视化。</p><pre class="ks kt ku kv gt nh ni nj nk aw nl bi"><span id="3908" class="nm mk it ni b gy nn no l np nq">#importing all the required libraries<br/>import numpy as np<br/>import pandas as pd</span><span id="0fdf" class="nm mk it ni b gy nr no l np nq">#importing both the datasets<br/>songmetadata = pd.read_csv(r'Path where the file is located')</span><span id="6fda" class="nm mk it ni b gy nr no l np nq">#one of the file is a text file hence we import it with pd.read_fwf<br/>#fwf stands for fixed width file<br/>othersongdata = pd.read_fwf(r'Path where the file is located')</span><span id="c1a7" class="nm mk it ni b gy nr no l np nq">#naming the columns for the othersongdata<br/>othersongdata.columns = ['user_id','song_id','listen_count’]</span><span id="3a60" class="nm mk it ni b gy nr no l np nq">#merging both the datasets and removing duplicates<br/>song_df = pd.merge(othersongdata, songmetadata.drop_duplicates(['song_id']), on="song_id", how="left")</span><span id="3a65" class="nm mk it ni b gy nr no l np nq">#writing the file in .csv to visualize in Tableau<br/>song_df.to_csv(r'Path where you want to store the exported CSV file\File Name.csv', index = False)</span></pre><p id="73b5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">组合数据集后，我们得到的是百万首歌曲数据集。该数据集有超过一百万个观察值。数据集由七个变量组成。</p><pre class="ks kt ku kv gt nh ni nj nk aw nl bi"><span id="6aad" class="nm mk it ni b gy nn no l np nq"><strong class="ni jd">Song_id </strong>= Object<br/>#Unique ID for every song in the dataset, in total there are 1000 songs in the dataset<br/><strong class="ni jd">User_id </strong>= Object #Unique ID for every user<br/><strong class="ni jd">Listen_count </strong>= int <br/>#Number of times a song was listened by an user<br/><strong class="ni jd">Artist_name </strong>= Str <br/>#Name of Artist <strong class="ni jd"><br/>Title </strong>= Str <br/>#Title of each song<br/><strong class="ni jd">Year</strong> = int <br/>#Categorical variable with lot of zero values<br/><strong class="ni jd">Release</strong> = Str<br/>#Album to which the songs belong to</span></pre><h1 id="c181" class="mj mk it bd ml mm mn mo mp mq mr ms mt ki mu kj mv kl mw km mx ko my kp mz na bi translated">数据可视化</h1><blockquote class="ns nt nu"><p id="2b5f" class="ld le nv lf b lg lh kd li lj lk kg ll nw ln lo lp nx lr ls lt ny lv lw lx ly im bi translated">视觉化给你你不知道的问题的答案—本·施奈德曼 </p></blockquote><p id="5f1e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">将数据可视化、理解数据并找到见解总是一个很好的实践。我使用Tableau是因为它很快，并且提供了大量可视化数据集的选项。Tableau极大地改进了我的工作流程，而且，我提到过它对学生是免费的吗？</p><h2 id="6710" class="nm mk it bd ml nz oa dn mp ob oc dp mt lm od oe mv lq of og mx lu oh oi mz iz bi translated">什么是树形图？</h2><p id="ad19" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">我不想撒谎，我喜欢树状图。我在这个项目中广泛使用它们来显示数据。它们很漂亮，可定制，需要关注。</p><p id="ce2f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">维基百科已经用一种比我更容易理解的格式解释了它，请看下面:</p><blockquote class="ns nt nu"><p id="7148" class="ld le nv lf b lg lh kd li lj lk kg ll nw ln lo lp nx lr ls lt ny lv lw lx ly im bi translated">树形图将分层(<a class="ae mi" href="https://en.wikipedia.org/wiki/Tree_(data_structure)" rel="noopener ugc nofollow" target="_blank">树形结构</a>)数据显示为一组嵌套的矩形。树的每个分支都有一个矩形，然后用代表子分支的更小的矩形平铺。叶节点的矩形面积与数据的指定<a class="ae mi" href="https://en.wikipedia.org/wiki/Dimension_(metadata)" rel="noopener ugc nofollow" target="_blank">维度成比例。</a><a class="ae mi" href="https://en.wikipedia.org/wiki/Treemapping#cite_note-1" rel="noopener ugc nofollow" target="_blank">【1】</a>通常叶子节点是有颜色的，以显示数据的一个单独的维度。—维基百科</p></blockquote><h2 id="267b" class="nm mk it bd ml nz oa dn mp ob oc dp mt lm od oe mv lq of og mx lu oh oi mz iz bi translated">（舞台上由人扮的）静态画面</h2><p id="a9c1" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">在写这篇文章的时候，我在想，怎样才能最好地解释“如何在Tableau中创建树形图？”。而且我也不想走截图路线。我能做什么？所以我做了一个简单易懂的视频。</p><p id="804c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">要将数据放入Tableau，需要将。csv到excel工作簿。您可以使用python中的以下命令轻松实现:</p><pre class="ks kt ku kv gt nh ni nj nk aw nl bi"><span id="29a8" class="nm mk it ni b gy nn no l np nq">song_df.to_excel("millionsong.xlsx")</span></pre><p id="9bf9" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">有时转换需要大量的时间，所以我在这里提供了一个可以下载的excel工作簿<a class="ae mi" href="https://drive.google.com/open?id=1WFuCGIkX-VWVu0HGTimQWVErAPyRkGGP" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="54d4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">绝不是，这是一个全面的Tableau指南，它只是一个概述，让你熟悉Tableau如何工作以及如何制作树形图。学习Tableau，查看免费培训，Tableau官方网站提供<a class="ae mi" href="https://www.tableau.com/learn" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/07b8a1144bc686fd1f20686ec23f430b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ySxmhvl8YsRzkp517LH_A.png"/></div></div></figure><p id="9cf0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">第一个树形图表示数据集中<strong class="lf jd"> Year </strong>变量相对于<strong class="lf jd"> Listen_count </strong>的比例。该图显示数据集中有许多零。因为我们在创建音乐推荐系统时不打算使用<strong class="lf jd"> Year </strong>变量，所以我们不打算删除这些观察值。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/a4f072a9fbece878de629e3eae89e287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9ep5SuihdEVWQTybkvLMg.png"/></div></div></figure><p id="edf3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">第二个树形图表示相对于数据集中的总数<strong class="lf jd"> Listen_count </strong>的艺术家。酷玩乐队以36，406的点击率成为数据集中最受欢迎的歌手，其次是莱昂国王T21，点击率为32，552。</p><h1 id="9fe1" class="mj mk it bd ml mm mn mo mp mq mr ms mt ki mu kj mv kl mw km mx ko my kp mz na bi translated">商业问题</h1><p id="4742" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">太多的选择会让用户不知所措。如果提供的选项太多，用户可能什么都不会买。像Spotify这样的流媒体服务有大量的目录。识别用户可能喜欢的曲目并推荐他们可能喜欢的产品对他们的业务至关重要。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/5702cd8fa2c2d6b6e882e0a33825c13d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgW0rbMpVcFiU_XOhMAi_Q.png"/></div></div></figure><p id="9ef1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们将创建两个播放列表，一个是受欢迎的播放列表，第二个是识别与用户已经喜欢的歌曲相似的歌曲，从而为他们提供个性化的推荐。</p><h1 id="93fc" class="mj mk it bd ml mm mn mo mp mq mr ms mt ki mu kj mv kl mw km mx ko my kp mz na bi translated">推荐系统</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/2bf3726c4275662cdd10677c859b5801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yN8kDC3K7InDPQwlAq5DSQ.png"/></div></div></figure><h2 id="dd58" class="nm mk it bd ml nz oa dn mp ob oc dp mt lm od oe mv lq of og mx lu oh oi mz iz bi translated">基于内容的推荐系统</h2><p id="6794" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">CBRS根据项目的特点和其他项目要素之间的相似性推荐项目。假设用户已经看过喜剧类型的电影，CBRS将推荐也属于喜剧类型的电影。</p><h2 id="c72f" class="nm mk it bd ml nz oa dn mp ob oc dp mt lm od oe mv lq of og mx lu oh oi mz iz bi translated">协同过滤推荐系统</h2><p id="039f" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">用户的偏好和态度被认为是创造CFRS。CFRS推荐与用户已经选择的项目相似的项目。我们将使用皮尔逊相关来计算相似轨迹之间的关系。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/bcffcd4f9c16d1bde0afa4d1d4a3924e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Zn-cwI2eQFqSQscVhFIwA.png"/></div></div></figure><p id="fa11" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="nv">为什么我们不用联想而不用关联？</em>T3】</strong></p><p id="8f19" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">关联只描述了两个变量之间的关系，而相关不仅描述了关系，还描述了强度。因此，当我们创建一个协同过滤推荐系统时，我们使用相关性。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/c3410297bac2d18e315bb0749fdca598.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRbqSgSoXOIOz1fxDvDtVA.png"/></div></div></figure><h1 id="9290" class="mj mk it bd ml mm mn mo mp mq mr ms mt ki mu kj mv kl mw km mx ko my kp mz na bi translated">让我们深入研究代码！</h1><p id="8556" class="pw-post-body-paragraph ld le it lf b lg nb kd li lj nc kg ll lm nd lo lp lq ne ls lt lu nf lw lx ly im bi translated">我们将首先创建<strong class="lf jd">流行播放列表</strong>。我们需要的只是一些数据争论。我尝试在评论中解释代码。尽管如此，如果你有问题，你可以在下面评论。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ol ok l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/e7411c4bb2c4b02ab1d7005947f7c2c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Df9QyG2n5szFtx8aXh51dw.png"/></div></div></figure><p id="0af8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在我们将制作CFRS并创建<strong class="lf jd">个性化播放列表</strong>。我使用的观察是，推荐系统的结果在下面给出。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/bc23c3600f4555f2017bb65ca408b638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5LQIAbXiuFMN4am1uGPDeA.png"/></div></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ol ok l"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/35ec45b50ac3dd2e427e9877350de52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQD3b1TkLuKDey4CDK9pdQ.png"/></div></div></figure><p id="c2b1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果你还和我在一起，谢谢。有人抽出时间来看我的作品对我来说意义重大。不要害羞，因为我就是。请在我的<a class="ae mi" href="https://www.linkedin.com/in/ajinkya-khobragade-6b6b08159/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，说‘你好！’，这将使我的一天。</p></div></div>    
</body>
</html>