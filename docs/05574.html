<html>
<head>
<title>Installing CUDA on Google Cloud Platform in 10 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10分钟在谷歌云平台上安装CUDA</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/installing-cuda-on-google-cloud-platform-in-10-minutes-9525d874c8c1?source=collection_archive---------16-----------------------#2020-05-10">https://towardsdatascience.com/installing-cuda-on-google-cloud-platform-in-10-minutes-9525d874c8c1?source=collection_archive---------16-----------------------#2020-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c08a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">剥离支持GPU的实例的4步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/bfef635b28971f58b1b8b7ecab1267d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*8r_Ru1Rnju6p8renaAdp5Q.jpeg"/></div></figure><p id="5a34" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi lj translated">最近，我花了相当多的时间在谷歌云平台(GCP)上建立我的CUDA实例。在大量的错误和文章之后，我发现如果我第一次就发现了正确的设置过程的话，这本来可以很快完成的！</p><p id="6201" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">所以我决定写这篇文章来让你的CUDA实例在几分钟内运行起来。到这篇文章结束时，你将在GCP上安装CUDA 10.0、cuDNN 7.6.5和Ubuntu 16.04。</p><p id="9db8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">第0步:在谷歌云平台(GCP)上创建一个免费账户</strong></p><p id="41ed" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在谷歌云平台上创建一个免费账户。输入您的信用卡详细信息并验证。你将获得300美元的信用。</p><blockquote class="ls lt lu"><p id="b6c1" class="kn ko lv kp b kq kr jr ks kt ku ju kv lw kx ky kz lx lb lc ld ly lf lg lh li ij bi translated">要使用GPU，您需要将<a class="ae lz" href="https://stackoverflow.com/questions/45227064/how-to-request-gpu-quota-increase-in-google-cloud" rel="noopener ugc nofollow" target="_blank">升级到付费账户，并增加您的GPU配额</a>。如果您还没有经过验证的升级帐户，这一步可能需要一些时间(通常为1-2天)。</p></blockquote><p id="846e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">步骤1:在GCP上设置一个虚拟机实例</strong></p><p id="80e7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">选择一个<strong class="kp ir">项目</strong>。我选择了“我的第一个项目”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ma"><img src="../Images/d983094d0a28de49ee0d8fcb4442af95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xurygDOUladULjgR-WwQJw.png"/></div></div></figure><p id="0c6d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在您的项目中创建一个<strong class="kp ir"> VM实例</strong>。点击“创建”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mf"><img src="../Images/6cb3b03f6dec82f30fd28ae3bf48b476.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*do9M0hQja6oOPcR3PBTjhg.png"/></div></div></figure><p id="772e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">选择您需要的CPU内核数量，以及您想要的GPU。我选择了‘n1-standard-8’CPU和一个‘P100 GPU’。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/9f9d1d4d9c6e7ade5549c414823a5689.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*kMp2nAs4qixcGxdc9Fg10A.png"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">设置CPU和GPU类型和数量</p></figure><p id="1d9e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">选择<strong class="kp ir"> OS </strong>为Ubuntu 16.04和引导盘大小。200 GB是推荐的大小。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/4845bbe134626640d7334dcefe646ff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*iE4AhZJ3CbS50txSKYYZEw.png"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">设置操作系统类型和引导磁盘大小</p></figure><p id="8544" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">勾选<strong class="kp ir">防火墙</strong>规则，然后点击“管理、安全、磁盘、网络、单独租赁”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/bcda104c1e786cb73be29284be890ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*5Tv2FHVxbnOeISSWPBrUlg.png"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">更改防火墙设置</p></figure><p id="eeb3" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">禁用“磁盘”下的<strong class="kp ir">引导磁盘删除</strong>选项</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/02888f9ef0fd11ba8617cac2da263039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*uLs8jSWd6FAJw1KJvc81mg.png"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">取消启动磁盘删除检查</p></figure><p id="1f7a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">点击最后的<strong class="kp ir"> create </strong>，你的实例就准备好了！</p><p id="5606" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">点击<strong class="kp ir"> SSH </strong>打开一个终端。您的实例应该正在运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mn"><img src="../Images/0e917c6a1fc786c095a94895dd2843a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iNC9hN__5NV-kr4EDTxK1A.png"/></div></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">单击SSH以连接到终端</p></figure><p id="683e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">不要关闭终端。您将在这个终端中安装CUDA和cuDNN，<strong class="kp ir">而不是</strong>在您的本地桌面终端中。</p><blockquote class="mo"><p id="ac56" class="mp mq iq bd mr ms mt mu mv mw mx li dk translated">警惕！！您的实例现在已经启动并运行。你被起诉了。如果你的使用超过300美元信用，你将不得不支付余额。不要忘记在不使用时停止实例。</p></blockquote><p id="e44f" class="pw-post-body-paragraph kn ko iq kp b kq my jr ks kt mz ju kv kw na ky kz la nb lc ld le nc lg lh li ij bi translated"><strong class="kp ir">第二步:安装CUDA </strong></p><p id="b414" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我给Ubuntu1604装了CUDA 10.0。你也可以安装其他的<a class="ae lz" href="http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/" rel="noopener ugc nofollow" target="_blank"> CUDA版本</a>并相应地编辑下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">Ubuntu 16.04上的CUDA 10.0</p></figure><blockquote class="ls lt lu"><p id="12eb" class="kn ko lv kp b kq kr jr ks kt ku ju kv lw kx ky kz lx lb lc ld ly lf lg lh li ij bi translated">你可能会得到<a class="ae lz" href="https://askubuntu.com/questions/1025928/why-do-i-get-sbin-ldconfig-real-usr-local-cuda-lib64-libcudnn-so-7-is-not-a" rel="noopener ugc nofollow" target="_blank"> libcudnn.so此时不是符号链接错误</a>。查看这篇文章底部的解决方案</p></blockquote><p id="f94b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">第三步:安装</strong>T5 cud nn</p><p id="4a07" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">你需要在Nvidia 上免费创建一个开发者<a class="ae lz" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank">账户。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">Ubuntu 16.04上的CuDNN 7.6.5</p></figure><p id="5e2b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">要验证CUDA 10.0安装，请运行以下命令。它应该打印安装的CUDA版本。</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="7600" class="nk nl iq ng b gy nm nn l no np">nvcc -V </span></pre><h2 id="b2c9" class="nk nl iq bd nq nr ns dn nt nu nv dp nw kw nx ny nz la oa ob oc le od oe of og bi translated">恭喜你！您成功安装了CUDA 10.0</h2><p id="50cd" class="pw-post-body-paragraph kn ko iq kp b kq oh jr ks kt oi ju kv kw oj ky kz la ok lc ld le ol lg lh li ij bi translated">完整的<a class="ae lz" href="https://gist.github.com/MittalShruti/ee472685ac984ece698af7dd27ef8614" rel="noopener ugc nofollow" target="_blank">代码</a>便于参考。</p></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><p id="c4a8" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kp ir">第四步:</strong>安装<strong class="kp ir"> Tensorflow </strong>等软件包</p><p id="859a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">可以安装Tensorflow和基本的python包，比如<strong class="kp ir"> ipython </strong>和<strong class="kp ir"> pip </strong>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">安装tensorflow和python包</p></figure><blockquote class="mo"><p id="6abf" class="mp mq iq bd mr ms ot ou ov ow ox li dk translated">警惕！！不要忘记停止实例！</p></blockquote></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><h1 id="d476" class="oy nl iq bd nq oz pa pb nt pc pd pe nw jw pf jx nz jz pg ka oc kc ph kd of pi bi translated">注意:</h1><p id="7d4c" class="pw-post-body-paragraph kn ko iq kp b kq oh jr ks kt oi ju kv kw oj ky kz la ok lc ld le ol lg lh li ij bi translated">在<code class="fe pj pk pl ng b">sudo ldconfig</code>上，您可能会得到以下错误:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="0a8a" class="nk nl iq ng b gy nm nn l no np">/usr/local/cuda/lib64/libcudnn.so.7 is not a symbolic link</span></pre><p id="c96b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这是因为libcudnn.so.5和libcudnn.so不是符号链接。你可以在这里阅读详情<a class="ae lz" href="https://askubuntu.com/questions/1025928/why-do-i-get-sbin-ldconfig-real-usr-local-cuda-lib64-libcudnn-so-7-is-not-a" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3d74" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">要解决该错误，请执行以下步骤:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="mh mi gj gh gi mj mk bd b be z dk translated">libcudnn.so符号链接错误</p></figure></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><p id="58f4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我们关于在Google云平台上设置支持CUDA的VM实例的快速帖子到此结束。</p><p id="9410" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">我希望你喜欢这个技术性更强的帖子！</p></div></div>    
</body>
</html>