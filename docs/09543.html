<html>
<head>
<title>How to scrape any website with Python and Beautiful Soup (dynamic web)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 和美汤刮任何网站(动态网)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-scrape-any-website-with-python-and-beautiful-soup-part-2-of-2-77560fcd30fc?source=collection_archive---------40-----------------------#2020-07-07">https://towardsdatascience.com/how-to-scrape-any-website-with-python-and-beautiful-soup-part-2-of-2-77560fcd30fc?source=collection_archive---------40-----------------------#2020-07-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="14ac" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><a class="ae ki" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Python Beautiful soup </a>用于抓取任何网页的教程，带有 youtube 视频——并专注于网络驱动程序</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/9197ddc458f81feecf92ab1ca9ddadb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tNgqLu_6yPSQ1bOK6ZihnQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来自作者</p></figure><p id="7133" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:这是一个纯粹的技术教程。在进行任何刮擦之前，请检查网站的政策。在我用的例子中，刮地盘是不合法的:</em><a class="ae ki" href="https://gitcoin.co//legal/terms" rel="noopener ugc nofollow" target="_blank"><em class="lv"/></a><em class="lv">。请不要使用。</em></p><p id="0361" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些想亲眼目睹这一切的人，可以看看我在页面底部的 YouTube 视频。</p><p id="4ca0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在如果你没看我的<a class="ae ki" rel="noopener" target="_blank" href="/how-to-scrape-any-website-with-python-and-beautiful-soup-bc84e95a3483">第一部</a>，回去看！这是基于在那里学到的概念。记住，这方面的<a class="ae ki" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">文档</a>非常强大，所以一定要在本教程结束后查看！</p><p id="d2c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在要学习如何处理<a class="ae ki" href="https://en.wikipedia.org/wiki/Dynamic_web_page" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">动态</strong> </a>网页或者有很多正在进行的网页，不仅仅是 HTML/CSS。用 beautifulsoup 来抓取这些页面更难，因为有时候，代码发生在服务器端，beautifulsoup 需要让浏览器来运行它。</p><p id="6123" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果有一种方法让我们编码并让我们的代码假装它是一个浏览器，那不是很好吗？…好吧，碰巧这正是这篇文章的内容！</p><p id="8fb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我第一次在<a class="ae ki" rel="noopener" target="_blank" href="/data-science-skills-web-scraping-javascript-using-python-97a29738353f">这篇文章</a>中读到了这一点，我将这篇文章的重点放在了具体的实现上，所以要了解更多的细节，请务必查看！</p><h1 id="3707" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">1.下载 Chrome 或 Firefox</h1><p id="2c62" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这是目前我所知道的仅有的两个有这个功能的，所以一定要使用其中的一个。对于这篇文章，我们使用的是<a class="ae ki" href="https://www.mozilla.org/en-US/firefox/new/" rel="noopener ugc nofollow" target="_blank"> Firefox </a>。</p><h1 id="94cd" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">2.下载网络驱动程序</h1><p id="6251" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将使用的网络驱动是<a class="ae ki" href="https://github.com/mozilla/geckodriver/releases" rel="noopener ugc nofollow" target="_blank"> geckodriver </a>，你可以在那个链接的底部找到所有的下载。下载后，从下载文件中提取文件(只需双击 zip 文件)。</p><p id="ab89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web 驱动有点挑剔，和操作系统玩的不太好，所以我们需要:<br/>把 geckodriver 移到一个路径可执行文件所在的地方。请查看<a class="ae ki" rel="noopener" target="_blank" href="/data-science-skills-web-scraping-javascript-using-python-97a29738353f">这篇文章</a>了解如何在 windows 上做到这一点。</p><p id="cb92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过运行以下命令找到我们的可执行路径:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="49f5" class="my lx it mu b gy mz na l nb nc">echo $PATH</span></pre><p id="8045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以:</p><ol class=""><li id="2556" class="nd ne it lb b lc ld lf lg li nf lm ng lq nh lu ni nj nk nl bi translated"><code class="fe nm nn no mu b">cp</code>将 geckodriver 文件从 zip 压缩到你的<code class="fe nm nn no mu b">$PATH</code>变量告诉你的一个位置(在运行<code class="fe nm nn no mu b">echo $PATH</code>之后)</li><li id="6630" class="nd ne it lb b lc np lf nq li nr lm ns lq nt lu ni nj nk nl bi translated">向您的<code class="fe nm nn no mu b">$PATH</code>环境变量添加一个新的<code class="fe nm nn no mu b">$PATH</code>位置，并将可执行文件 geckodriver 放在那里。<a class="ae ki" href="https://opensource.com/article/17/6/set-path-linux" rel="noopener ugc nofollow" target="_blank">你可以在这里看到如何操作。</a></li></ol><p id="0b49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后重新启动您的终端以使更改生效。如果你使用 MacOS(我就是)，你可能还需要<a class="ae ki" href="https://firefox-source-docs.mozilla.org/testing/geckodriver/Notarization.html" rel="noopener ugc nofollow" target="_blank">公证</a>这个应用程序。您可以通过运行以下命令来实现:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="1acc" class="my lx it mu b gy mz na l nb nc">xattr -r -d com.apple.quarantine geckodriver</span></pre><h1 id="7084" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">3.开始用 python 编码吧！</h1><p id="2142" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">运行之后:<code class="fe nm nn no mu b">pip install selenium</code>，现在可以开始使用 web 驱动了！您将使用<code class="fe nm nn no mu b">driver.get</code>来获取动态网页 URL，而不是使用<code class="fe nm nn no mu b">requests.get</code>来获取，就像这样:</p><pre class="kk kl km kn gt mt mu mv mw aw mx bi"><span id="0b51" class="my lx it mu b gy mz na l nb nc">from selenium import webdriver<br/>from selenium.webdriver.firefox.options import Options<br/>from bs4 import BeautifulSoup</span><span id="ae53" class="my lx it mu b gy nu na l nb nc">options = Options()<br/># Make it go faster by running headless<br/># This will remove the web browser GUI from popping up<br/>options.headless = True<br/>driver = webdriver.Firefox(options=options)<br/># Enter whatever URL you like<br/>driver.get("https://gitcoin.co/{}".format(link.attrs['href']))<br/># Let the code on their end run<br/>time.sleep(20)<br/># Save it to a variable<br/>html = driver.page_source<br/>driver.quit()<br/># And then just paste it right back into beautifulsoup!<br/>projects_soup = BeautifulSoup(html, 'lxml')</span></pre><p id="b026" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在<a class="ae ki" href="https://github.com/alphachainio/demo_code/blob/master/scrape_advanced.py" rel="noopener ugc nofollow" target="_blank"> Alpha Chain demos repo </a>上看到完整的代码示例，在我的<a class="ae ki" href="https://github.com/PatrickAlphaC/hackathon_scraper" rel="noopener ugc nofollow" target="_blank"> hackathon-scraper 项目</a>上看到一个完整的示例，在这里有一个视频向你展示如何做。</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="2ba9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且记住，你可以一直快进:)</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="oc od l"/></div></figure></div></div>    
</body>
</html>