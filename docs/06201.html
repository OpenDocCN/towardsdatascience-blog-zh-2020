<html>
<head>
<title>Calculating the bearing between two geospatial coordinates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计算两个地理空间坐标之间的方位角</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/calculating-the-bearing-between-two-geospatial-coordinates-66203f57e4b4?source=collection_archive---------8-----------------------#2020-05-19">https://towardsdatascience.com/calculating-the-bearing-between-two-geospatial-coordinates-66203f57e4b4?source=collection_archive---------8-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2b93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当以编程方式调整相机以遵循特定路径时——无论是在谷歌街景还是地理信息系统动画上，程序员可能需要指定两点之间的方位或经纬度坐标。在这篇文章中，我解释了这是如何实现的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/36b78d4636652ced1994469e98ec5a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s4B3H7yYaZ8ceXdx"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@dmjdenise?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼斯·詹斯</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="925d" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">数学</h1><p id="0977" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">数学上，点<em class="mi"> a </em>和点<em class="mi"> b </em>之间的方位角是通过取 X 和 Y 的反正切函数来计算的</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="baba" class="mo lg it mk b gy mp mq l mr ms">bearing  = arctan(X,Y)</span></pre><p id="8095" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其中 X 和 Y 定义如下:</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="b32b" class="mo lg it mk b gy mp mq l mr ms">X = cos θb * sin ∆L</span><span id="d654" class="mo lg it mk b gy mt mq l mr ms">Y = cos θa * sin θb – sin θa * cos θb * cos ∆L</span></pre><p id="653d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里<em class="mi"> a </em>和<em class="mi"> b </em>代表两个坐标，它们的前缀由下式给出:</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="ce25" class="mo lg it mk b gy mp mq l mr ms">L     = Longitude<br/>theta = Latitude</span><span id="47fb" class="mo lg it mk b gy mt mq l mr ms">and ∆L is the difference between the Longitudal values of the two points</span></pre><h1 id="8f3a" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">程序上</h1><p id="71ce" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">为了将这一逻辑应用于计算机程序，我们从我们的观点开始:</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="5628" class="mo lg it mk b gy mp mq l mr ms">a = {'lat': &lt;some value&gt;, 'lon': &lt;some value&gt;}<br/>b = {'lat': &lt;some value&gt;, 'lon': &lt;some value&gt;}</span></pre><p id="0f2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们通过从<em class="mi"> b </em>中减去<em class="mi"> a </em>的纵向值得到<code class="fe mu mv mw mk b">∆L</code></p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="4a92" class="mo lg it mk b gy mp mq l mr ms">dL = b.lon-a.lon</span></pre><p id="35c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们可以计算我们的 X 和 Y 值:</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="e750" class="mo lg it mk b gy mp mq l mr ms">X = cos(b.lat)* sin(dL)<br/>Y = cos(a.lat)*sin(b.lat) - sin(a.lat)*cos(b.lat)* cos(dL)</span></pre><p id="c542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们可以使用反正切并获得我们的方位:</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="a697" class="mo lg it mk b gy mp mq l mr ms">bearing = <strong class="mk iu">arctan2</strong>(X,Y)</span></pre><p id="b3be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mi">注意:该值以弧度为单位！</em></p><h2 id="a3a9" class="mo lg it bd lh mx my dn ll mz na dp lp kb nb nc lt kf nd ne lx kj nf ng mb nh bi translated">Python 导入</h2><p id="f893" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">如果使用 Python，您可以在下面的 numpy 导入中重用上面的代码。</p><pre class="kp kq kr ks gt mj mk ml mm aw mn bi"><span id="1555" class="mo lg it mk b gy mp mq l mr ms">from numpy import arctan2,random,sin,cos,degrees</span></pre><p id="3ded" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要将弧度转换成角度，只需在末端应用“角度”功能- <code class="fe mu mv mw mk b">degrees(bearing)</code>。在我的例子中，我想要北方的学位，因此使用了<code class="fe mu mv mw mk b">((degrees(bearing)+360) % 360)</code>。</p><h1 id="0ba8" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="ebd9" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">这里我们有一个简单的方法来计算两点之间的方位。</p></div></div>    
</body>
</html>