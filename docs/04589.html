<html>
<head>
<title>Rotoscoping: Hollywood’s video data segmentation?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rotoscoping:好莱坞的视频数据分割？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/rotoscoping-hollywoods-video-data-segmentation-7ca7c02b6ccc?source=collection_archive---------38-----------------------#2020-04-23">https://towardsdatascience.com/rotoscoping-hollywoods-video-data-segmentation-7ca7c02b6ccc?source=collection_archive---------38-----------------------#2020-04-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/d4d17ab68c6926aebbb2ee195d65b147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*WjzV3DOjKCACTbF5.jpg"/></div></figure><p id="0b6e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">在好莱坞，视频数据分割已经做了几十年。简单的技巧，如绿色屏幕的颜色键控可以大大减少工作。</strong></p><p id="0fe7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">2018 年末，我们开发了一个视频分割工具箱。视频剪辑中常见的一个问题是拍摄场景时，天空过饱和或太亮。电影中的大部分天空都被 VFX 专家取代了。这个任务叫做“天空替换”。我们认为这是引入自动分割来掩盖天空以进行进一步替换的完美起点。基于收集的经验，我将解释 VFX 和数据注释的相似之处。</p><p id="79c0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您会发现我们构建的解决方案与当时被认为是最佳图像分割模型的 Deeplab v3+进行了比较。我们的方法(左)产生了更好的建筑物周围的细节，并大大减少了帧之间的闪烁。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">我们的天空分割模型和 Deeplab v3+的比较</p></figure><h1 id="ea10" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">好莱坞的视频分割技术</h1><p id="f5a1" class="pw-post-body-paragraph ju jv iq jw b jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr ij bi translated">在这一节中，我们将更仔细地看看彩色键控，例如绿色屏幕和旋转镜。</p><h1 id="fa26" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">什么是色彩键控？</h1><p id="63c8" class="pw-post-body-paragraph ju jv iq jw b jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr ij bi translated">我很肯定你听说过彩色键控或绿色屏幕。也许你自己在使用 Adobe After Effects、Nuke、Final Cut 或任何其他软件编辑视频时也使用过这样的技巧。</p><p id="34c0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我小时候自己做过很多视频剪辑。与朋友一起制作有趣的视频，并使用 after-effects 等工具添加酷炫的效果。没日没夜的看 videocopilot.com<a class="ae mf" href="https://www.videocopilot.net/" rel="noopener ugc nofollow" target="_blank">和 creativecow.com</a><a class="ae mf" href="https://creativecow.com/" rel="noopener ugc nofollow" target="_blank">的教程。我记得我和一个朋友在我家后院玩木棍，只是为了几个小时后把它们换成光剑。</a></p><p id="32e3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你不知道绿色屏幕是如何工作的，你可以在下面找到一个视频，它会给你一个比我用文字更好的解释。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">解释绿屏如何工作的视频</p></figure><p id="635a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本质上，绿屏使用的是颜色键控。镜头中的“绿色”被屏蔽了。这个遮罩可以用来混合另一个背景。美妙的是，我们不需要烧你的 GPU 的花哨的图像分割模型，而是一个相当简单的算法，寻找具有所需颜色的相邻像素进行遮罩。</p><h1 id="599c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">什么是 rotoscoping？</h1><p id="a0da" class="pw-post-body-paragraph ju jv iq jw b jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr ij bi translated">你可以想象在许多好莱坞电影中，特效需要更复杂的场景，而不是简单地使用彩色背景来掩盖元素。想象一个场景，动物可能不喜欢强烈的颜色，或者有很多头发在风中飘动。简单的颜色键控方法是不够的。</p><p id="9b3a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但也是针对这个问题，好莱坞在多年前就找到了一种技术:<strong class="jw ir"> Rotoscoping </strong>。<br/>为了让你更好地了解什么是 rotoscoping，我在下面嵌入了一个视频。该视频是一个关于如何使用 after effects 进行旋转观测的教程。使用一个特殊的工具箱，你可以在整个视频中的物体周围绘制样条线和多边形。工具箱允许帧之间的自动插值，为您节省大量时间。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">旋转观测的后效教程</p></figure><p id="aa96" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这项技术于 2003 年在 After Effects 中推出，已经问世近 20 年，并被许多 VFX 专家和自由职业者使用。</p><p id="4fbd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">剪影</strong>与 After Effects one 工具完全专注于旋转观测形成对比。在这个视频中，你可以了解他们最新的产品更新<a class="ae mf" href="https://www.youtube.com/watch?v=NwbbHFO8Rl0" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="1b82" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我为你挑选了一个例子来展示 rotoscoping 的结果有多详细。MPC Academy 的以下视频中的三个元素让我大吃一惊:运动模糊(T7)、头发的精细细节(T9)、帧一致性(T11)。当我们为 VFX 编辑开发一个产品时，我们了解到这个行业的质量要求超出了我们在图像分割方面的要求。在计算机视觉中，既没有数据集，也没有符合好莱坞标准的模型。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="kw kx l"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">MPC 学院的旋转观测演示卷</p></figure><p id="bc73" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在 YouTube 上搜索“roto showreel”，你会发现更多的例子。</p><blockquote class="mg mh mi"><p id="36fd" class="ju jv mj jw b jx jy jz ka kb kc kd ke mk kg kh ki ml kk kl km mm ko kp kq kr ij bi translated"><em class="iq">VFX 的工具和工作流程以及数据标注惊人地相似。</em></p></blockquote><h1 id="f2fc" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">质量检验比较</h1><h1 id="d49b" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">我们如何训练我们的天空分割模型</h1><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/af1fd6e28dd8a0c1075e6353d6ba5702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZgxDR-fuLpfwv11c.jpg"/></div></div></figure><p id="1283" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">此外，我们在简单的背景前使用了公开的和无许可证的树、人和其他移动元素的视频。为了获得地面真实信息，我们简单地使用彩色键控。它非常有效，我们在几个小时内就完成了 5 分钟镜头的像素级精确分割。为了增加样本的多样性，我们使用了视频编辑工具，在移动摄像机的同时，裁剪掉部分视频。4k 原始视频有一个平滑移动的全高清帧。对于一些镜头，我们甚至打破了典型的二进制分类，使用平滑的边缘，在全黑和全白之间插入，作为我们的遮罩。通常，分割总是二进制的，黑色或白色。当场景模糊时，中间有 255 种颜色。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/34d2d27fc73806ea13de75a22d65903f.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/0*5bVgKiBdQpJ0fNMe.gif"/></div></figure><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/48a6d375d3d1c3fac86ad2286e5a92e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/0*1TV1WDxXtYCNHhcA.gif"/></div></figure><p id="761e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">颜色键控允许我们获得复杂场景的地面真实数据，如树叶或头发。下面的棕榈树图片已经使用简单的颜色键控进行了遮罩/标记。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/d4fc2306f84f05e8f48fc46be1644f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rAW1vW6ya-hX0wvR.jpg"/></div></div></figure><p id="1b07" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这适用于所有种类的树。甚至帮助我们获得了整个视频的良好效果。我们能够在剪辑过程中简单地调整颜色键控参数。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/afd60d966f5fe16fce2195ed59c35fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7roSemvTbwy-pl2x.jpg"/></div></div></figure><p id="8812" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了让你对我们的色彩键控实验的时间结果有一个概念，请看下面的 gif。注意有一点苦涩。我们特意添加了这个来“模拟”用你手中的相机进行录制。摄像机本身的移动是整个场景上作物的简单线性插值。所以你在下面看到的只是全景的一部分。</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/49cbf28525905832869360a86fc72413.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*lEyoMxK58GHiwG0K.gif"/></div></figure><h1 id="7a9d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">训练模型</h1><h1 id="8b96" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">时间一致性的对抗性训练</h1><p id="56a7" class="pw-post-body-paragraph ju jv iq jw b jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr ij bi translated">因此，对于您的下一个视频数据分割项目，您可能想看看是否可以使用这些技巧来收集数据并节省大量时间。在我的其他帖子中，你会发现一个数据注释工具列表。如果你不想在手工注释上花费时间，这里还有一个数据注释公司的<a class="ae mf" href="https://data-annotation.com/list-of-data-annotation-companies/" rel="noopener ugc nofollow" target="_blank">列表</a>。</p><p id="09ed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="mj">我要感谢和我一起做这个项目的莫莫和黑基。另外感谢所有 VFX 艺术家和工作室的反馈和富有成效的讨论。</em></p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="1afe" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="mj">原载于 2020 年 4 月 23 日 https://data-annotation.com</em><em class="mj"/><a class="ae mf" href="https://data-annotation.com/rotoscoping-hollywoods-video-data-segmentation/" rel="noopener ugc nofollow" target="_blank"><em class="mj">。</em></a></p></div></div>    
</body>
</html>