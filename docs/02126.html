<html>
<head>
<title>Complete Guide to Data Visualization with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 数据可视化完全指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/complete-guide-to-data-visualization-with-python-2dd74df12b5e?source=collection_archive---------3-----------------------#2020-02-29">https://towardsdatascience.com/complete-guide-to-data-visualization-with-python-2dd74df12b5e?source=collection_archive---------3-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5bce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来看看使用 Python 进行数据可视化的主要库，以及可以使用它们完成的所有类型的图表。我们还将看到在每种情况下推荐使用哪个库，以及每个库的独特功能。</p><p id="7817" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将从直接查看数据的最基本的可视化开始，然后我们将继续绘制图表，最后，我们将制作交互式图表。</p><h1 id="da6a" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">数据集</h1><p id="5143" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">我们将使用两个数据集，它们将适应我们在文章中展示的可视化效果，数据集可以在这里下载。</p><p id="5477" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它们是关于人工智能相关的三个术语(数据科学、机器学习和深度学习)在互联网上的搜索热度的数据。它们是从一个著名的搜索引擎中提取出来的。</p><p id="d470" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有两个文件<em class="ls"> temporal.csv </em>和<em class="ls"> mapa.csv </em>。我们将在本教程的大部分内容中使用的第一个术语包括这三个术语在一段时间内的流行度数据(从 2004 年到现在，2020 年)。此外，我还添加了一个分类变量(1 和 0)来演示带有分类变量的图表的功能。</p><p id="5182" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">文件<em class="ls"> mapa.csv </em>包含按国家划分的流行度数据。我们将在文章的最后一部分使用它来处理地图。</p><h1 id="11f7" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">熊猫</h1><p id="2fae" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在我们进入更复杂的方法之前，让我们从最基本的数据可视化方式开始。我们将简单地使用 pandas 来查看数据，并了解数据是如何分布的。</p><p id="8ee9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们必须做的第一件事是可视化一些例子，看看有哪些列，它们包含什么信息，值是如何编码的…</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="6791" class="mc kp it ly b gy md me l mf mg">import pandas as pd<br/>df = pd.read_csv('temporal.csv')<br/>df.head(10) #View first 10 data rows</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/d937032ce76f15dd9648c07aa448c3a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*DmRS6Iv7gHmcS230.png"/></div></figure><p id="3f42" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用 describe 命令，我们将看到数据是如何分布的，最大值、最小值、平均值…</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="9388" class="mc kp it ly b gy md me l mf mg">df.describe()</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/2d25207e79f4b28a74956701e196d45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/0*kIIuSPCfJuy927u2.png"/></div></figure><p id="4f49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用 info 命令，我们可以看到每一列包含什么类型的数据。我们可能会发现这样一种情况，当使用 head 命令查看某列时，该列看起来是数字，但是如果我们查看后续数据，就会发现值是字符串格式的，那么该变量将被编码为字符串。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="a9cf" class="mc kp it ly b gy md me l mf mg">df.info()</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/bda5b51be0f12c72b6429e61f5db47a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/0*NqSw4yzCWoCUT9qL.png"/></div></figure><p id="1361" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">默认情况下，pandas 限制它显示的行数和列数。这通常会困扰我，因为我希望能够可视化所有的数据。</p><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/326513dd6d3db4258e70b16e1b989b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/0*5ZI8-Y6ifYgrxhOH.png"/></div></figure><p id="cd2b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用这些命令，我们增加了限制，并且可以可视化整个数据。对于大数据集，请小心使用这个选项，我们可能会在显示它们时遇到问题。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="6983" class="mc kp it ly b gy md me l mf mg">pd.set_option('display.max_rows', 500)<br/>pd.set_option('display.max_columns', 500)<br/>pd.set_option('display.width', 1000)</span></pre><p id="2edc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用 Pandas 样式，我们可以在查看表格时获得更多信息。首先，我们定义一个格式字典，以便数字以清晰的方式显示(有一定数量的小数、相关格式的日期和小时、百分比、货币……)不要惊慌，这只是一个显示，不会改变数据，您稍后处理它不会有任何问题。</p><p id="dd71" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了给出每种类型的示例，我添加了货币和百分比符号，尽管它们对该数据没有任何意义。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="f02d" class="mc kp it ly b gy md me l mf mg">format_dict = {'data science':'${0:,.2f}', 'Mes':'{:%m-%Y}', 'machine learning':'{:.2%}'}</span><span id="4dad" class="mc kp it ly b gy mo me l mf mg">#We make sure that the Month column has datetime format<br/>df['Mes'] = pd.to_datetime(df['Mes'])</span><span id="06f7" class="mc kp it ly b gy mo me l mf mg">#We apply the style to the visualization<br/>df.head().style.format(format_dict)</span></pre><p id="d801" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以用颜色突出最大值和最小值。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="26b2" class="mc kp it ly b gy md me l mf mg">format_dict = {'Mes':'{:%m-%Y}'} #Simplified format dictionary with values that do make sense for our data<br/>df.head().style.format(format_dict).highlight_max(color='darkgreen').highlight_min(color='#ff0000')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/d5f48c7ef8baa1f7cf3caeec4aa286bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/0*rphPG0AYK1j0k_Sv.png"/></div></figure><p id="5c73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用颜色渐变来显示数据值。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="6d25" class="mc kp it ly b gy md me l mf mg">df.head(10).style.format(format_dict).background_gradient(subset=['data science', 'machine learning'], cmap='BuGn')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/7b08c839bce9320f2ec9cb34752defcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/0*jw7Gpc1Txb8Qrygc.png"/></div></figure><p id="8822" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们也可以用条形显示数据值。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="ae8a" class="mc kp it ly b gy md me l mf mg">df.head().style.format(format_dict).bar(color='red', subset=['data science', 'deep learning'])</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/394aefb4c1726939ec41fb80ca88a447.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/0*9NomcpUlwD1h2WBw.png"/></div></figure><p id="ec4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，我们还可以结合上述功能，生成一个更复杂的可视化。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="ff6e" class="mc kp it ly b gy md me l mf mg">df.head(10).style.format(format_dict).background_gradient(subset=['data science', 'machine learning'], cmap='BuGn').highlight_max(color='yellow')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/6ee9f6ee6a28643fa5db2ce894239afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/0*ANFfosAvtvE5ZB2F.png"/></div></figure><p id="09c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击这里了解更多关于熊猫的可视化样式:<a class="ae lr" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html" rel="noopener ugc nofollow" target="_blank">https://Pandas . pydata . org/Pandas-docs/stable/user _ guide/style . html</a></p><h1 id="a7a1" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">熊猫简介</h1><p id="45c1" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Pandas profiling 是一个使用我们的数据生成交互式报告的库，我们可以看到数据的分布、数据的类型以及可能存在的问题。它非常容易使用，只用 3 行代码我们就可以生成一个报告，我们可以发送给任何人，即使你不懂编程也可以使用。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="27fd" class="mc kp it ly b gy md me l mf mg">from pandas_profiling import ProfileReport<br/>prof = ProfileReport(df)<br/>prof.to_file(output_file='report.html')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi mt"><img src="../Images/bcd6564faa9a66ef6392e725e7bba0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UI2C_oCoHId66b2w.png"/></div></div></figure><p id="0ea9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到从文章中使用的数据生成的交互报告，<a class="ae lr" href="https://todoia.es/recursos/informe.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="e555" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以在这篇文章中找到更多关于熊猫简介<a class="ae lr" rel="noopener" target="_blank" href="/exploratory-data-analysis-with-pandas-profiling-de3aae2ddff3">的信息。</a></p><h1 id="4f4d" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">Matplotlib</h1><p id="c3ae" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Matplotlib 是图形化可视化数据的最基本的库。它包括了许多我们能想到的图表。仅仅因为它是基本的，并不意味着它不强大，我们将要谈到的许多其他数据可视化库都是基于它的。</p><p id="b73d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Matplotlib 的图表由两个主要部分组成，轴(界定图表区域的线条)和图形(我们在这里绘制轴、标题和轴区域之外的东西)。现在让我们创建一个尽可能简单的图表:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="7de8" class="mc kp it ly b gy md me l mf mg">import matplotlib.pyplot as plt<br/>plt.plot(df['Mes'], df['data science'], label='data science') #The parameter label is to indicate the legend. This doesn't mean that it will be shown, we'll have to use another command that I'll explain later.</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/46c291b0e7fa107214a7839b0730f9b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*PXSMqn9wcNdp5S7H.png"/></div></figure><p id="8932" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在同一个图形中制作多个变量的图形，从而进行比较。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="18a5" class="mc kp it ly b gy md me l mf mg">plt.plot(df['Mes'], df['data science'], label='data science')<br/>plt.plot(df['Mes'], df['machine learning'], label='machine learning')<br/>plt.plot(df['Mes'], df['deep learning'], label='deep learning')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/e21120b6b4e5476018ddcd2c7c7c2c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*syCuZJPWyxEI_DpS.png"/></div></figure><p id="bcb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不是很清楚每种颜色代表哪个变量。我们将通过添加图例和标题来改进图表。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="30c5" class="mc kp it ly b gy md me l mf mg">plt.plot(df['Mes'], df['data science'], label='data science')<br/>plt.plot(df['Mes'], df['machine learning'], label='machine learning')<br/>plt.plot(df['Mes'], df['deep learning'], label='deep learning')<br/>plt.xlabel('Date')<br/>plt.ylabel('Popularity')<br/>plt.title('Popularity of AI terms by date')<br/>plt.grid(True)<br/>plt.legend()</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/364d75fd9e3557ee818cd21d1762c16b.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*V2rq9b961VQGrnOBJ6Ov_w.png"/></div></figure><p id="9057" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您正在从终端或脚本使用 Python，在使用我们上面编写的函数定义图形之后，使用 plt.show()。如果您正在 jupyter 笔记本上工作，请在文件的开头内联添加%matplotlib，并在制作图表之前运行它。</p><p id="1e27" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在一个图形中制作多个图形。这非常适用于比较图表，或者使用单个图像轻松共享多种图表类型的数据。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="3f0c" class="mc kp it ly b gy md me l mf mg">fig, axes = plt.subplots(2,2)<br/>axes[0, 0].hist(df['data science'])<br/>axes[0, 1].scatter(df['Mes'], df['data science'])<br/>axes[1, 0].plot(df['Mes'], df['machine learning'])<br/>axes[1, 1].plot(df['Mes'], df['deep learning'])</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi na"><img src="../Images/56e5a60226ff57dd61e6afc33c4192d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/0*2xhEd9H08f9Q82rr.png"/></div></figure><p id="cdc6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以为每个变量的点绘制不同风格的图形:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="440b" class="mc kp it ly b gy md me l mf mg">plt.plot(df['Mes'], df['data science'], 'r-')<br/>plt.plot(df['Mes'], df['data science']*2, 'bs')<br/>plt.plot(df['Mes'], df['data science']*3, 'g^')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/a3543d426c979701a4205926f3d81e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*OCcQXbVkp7lYV-H2.png"/></div></figure><p id="c6cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们来看几个我们可以用 Matplotlib 做的不同图形的例子。我们从散点图开始:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="296b" class="mc kp it ly b gy md me l mf mg">plt.scatter(df['data science'], df['machine learning'])</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/96c40ea1e3b40281402a13707967b36c.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*c3_yr8WTTYTwiaCx.png"/></div></figure><p id="c036" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">条形图示例:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="1457" class="mc kp it ly b gy md me l mf mg">plt.bar(df['Mes'], df['machine learning'], width=20)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/05b74e60cc05a177900af5c140b2767b.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*QejGxD6WqOZ_uOjk.png"/></div></figure><p id="c9bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">直方图示例:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="38f8" class="mc kp it ly b gy md me l mf mg">plt.hist(df['deep learning'], bins=15)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi my"><img src="../Images/942276ee43cd4b2bf867421b5f6f20de.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*2cRubutmRebDoYMj.png"/></div></figure><p id="b71c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在图形中添加一段文字，用我们在图形中看到的相同单位来表示文字的位置。在文本中，我们甚至可以在 TeX 语言之后添加特殊字符</p><p id="4d3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还可以添加指向图上特定点的标记。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="3e58" class="mc kp it ly b gy md me l mf mg">plt.plot(df['Mes'], df['data science'], label='data science')<br/>plt.plot(df['Mes'], df['machine learning'], label='machine learning')<br/>plt.plot(df['Mes'], df['deep learning'], label='deep learning')<br/>plt.xlabel('Date')<br/>plt.ylabel('Popularity')<br/>plt.title('Popularity of AI terms by date')<br/>plt.grid(True)<br/>plt.text(x='2010-01-01', y=80, s=r'$\lambda=1, r^2=0.8$') #Coordinates use the same units as the graph<br/>plt.annotate('Notice something?', xy=('2014-01-01', 30), xytext=('2006-01-01', 50), arrowprops={'facecolor':'red', 'shrink':0.05})</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/aff2fd0a4ef8b8c89fd6359240859354.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*xjpZcLjApLhIJ0BYIW4KIQ.png"/></div></figure><p id="6794" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">图库示例:</strong> <br/>在此链接:<a class="ae lr" href="https://matplotlib.org/gallery/index.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/gallery/index.html</a>我们可以看到可以用 Matplotlib 完成的所有类型图形的示例。</p><h1 id="b3d3" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">海生的</h1><p id="f893" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Seaborn 是一个基于 Matplotlib 的库。基本上，它给我们的是更好的图形和函数，只用一行代码就可以制作复杂类型的图形。</p><p id="77ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们导入这个库，并用 sns.set()初始化图形的样式，如果没有这个命令，图形仍然具有与 Matplotlib 相同的样式。我们展示一个最简单的图形，一个散点图</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="8071" class="mc kp it ly b gy md me l mf mg">import seaborn as sns<br/>sns.set()<br/>sns.scatterplot(df['Mes'], df['data science'])</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/50310e8fc60c95a54659792a1f3fa534.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/0*_VDCN-gY02rdP5c0.png"/></div></figure><p id="0f8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在同一张图中添加两个以上变量的信息。为此，我们使用颜色和大小。我们还根据类别列的值制作了一个不同的图表:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="17f4" class="mc kp it ly b gy md me l mf mg">sns.relplot(x='Mes', y='deep learning', hue='data science', size='machine learning', col='categorical', data=df)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nc"><img src="../Images/fadbad8b56363959bb018ca29ec02e80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0PrWTSLi-fgs85bi.png"/></div></div></figure><p id="7b42" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Seaborn 提供的最受欢迎的图形之一是<strong class="js iu">热图</strong>。通常使用它来显示数据集中变量之间的所有相关性:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="e5ad" class="mc kp it ly b gy md me l mf mg">sns.heatmap(df.corr(), annot=True, fmt='.2f')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/c196cd5c0d30267a75f671372c59e24d.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/0*B1_hnfiZVZIw31Lf.png"/></div></figure><p id="ad1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一个最流行的是 pairplot，它向我们展示了所有变量之间的关系。如果您有一个大型数据集，请小心使用此函数，因为它必须显示所有数据点的次数与列数一样多，这意味着通过增加数据的维度，处理时间会呈指数增长。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="a481" class="mc kp it ly b gy md me l mf mg">sns.pairplot(df)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ne"><img src="../Images/c4fdbd2bae5a2b37eb73717b024f237a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wpl4LWweGXUPdchn.png"/></div></div></figure><p id="4b53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们做一个 pairplot，展示根据<em class="ls">分类</em>变量的值划分的图表</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="8a96" class="mc kp it ly b gy md me l mf mg">sns.pairplot(df, hue='categorical')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bbcc41577483aab0e41d6b3ac329de3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*kaolFEKmmJn0eHLT.png"/></div></figure><p id="32d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个非常有用的图表是联合图，它允许我们看到散点图和两个变量的直方图，并看到它们是如何分布的:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="8a14" class="mc kp it ly b gy md me l mf mg">sns.jointplot(x='data science', y='machine learning', data=df)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ad5215a594d3957df54e309c3f88bd83.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/0*QZf0VQAW8r3oNFS5.png"/></div></figure><p id="24c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一个有趣的图形是<strong class="js iu">小提琴图</strong>:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="9611" class="mc kp it ly b gy md me l mf mg">sns.catplot(x='categorical', y='data science', kind='violin', data=df)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/c82e83330ca746c9a613e743c68bcf6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/0*oYdW6Zpmkj-mc7my.png"/></div></figure><p id="9b8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在一个图像中创建多个图形，就像我们使用 Matplotlib 一样:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="c08d" class="mc kp it ly b gy md me l mf mg">fig, axes = plt.subplots(1, 2, sharey=True, figsize=(8, 4))<br/>sns.scatterplot(x="Mes", y="deep learning", hue="categorical", data=df, ax=axes[0])<br/>axes[0].set_title('Deep Learning')<br/>sns.scatterplot(x="Mes", y="machine learning", hue="categorical", data=df, ax=axes[1])<br/>axes[1].set_title('Machine Learning')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/4f2e263a42a76b8759541f82fa2e1ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/0*DB0jrhBoVD7MmIN7.png"/></div></figure><p id="db77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">例子图库:</strong> <br/> <a class="ae lr" href="https://seaborn.pydata.org/examples/index.html" rel="noopener ugc nofollow" target="_blank">在这个链接</a>中，我们可以看到用 Seaborn 可以做的一切事情的例子。</p><h1 id="b66f" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">散景</h1><p id="fdf4" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Bokeh 是一个允许你生成交互式图形的库。我们可以将它们导出到一个 HTML 文档中，与任何拥有网络浏览器的人共享。</p><p id="0fe0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我们有兴趣在图形中寻找东西，并且希望能够放大和移动图形时，它是一个非常有用的库。或者当我们想要分享它们，并给另一个人探索数据的可能性时。</p><p id="a06a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们首先导入库并定义保存图形的文件:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="f756" class="mc kp it ly b gy md me l mf mg">from bokeh.plotting import figure, output_file, save<br/>output_file('data_science_popularity.html')</span></pre><p id="3a65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们画出我们想要的并保存在文件中:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="c43e" class="mc kp it ly b gy md me l mf mg">p = figure(title='data science', x_axis_label='Mes', y_axis_label='data science')<br/>p.line(df['Mes'], df['data science'], legend='popularity', line_width=2)<br/>save(p)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/981d67f6634cd47b3830feaa0ac385e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*d5V-cXrk3AvsThcwFzpCtQ.png"/></div></figure><p id="16c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以通过<a class="ae lr" href="https://todoia.es/recursos/data_science_popularity.html" rel="noopener ugc nofollow" target="_blank">点击这里</a>看到文件<a class="ae lr" href="https://todoia.es/recursos/data_science_popularity.html" rel="noopener ugc nofollow" target="_blank"><em class="ls">data _ science _ popularity . html</em></a>的样子。它是交互式的，你可以随意移动和放大图片</p><p id="f509" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将多个图形添加到单个文件:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="b4ea" class="mc kp it ly b gy md me l mf mg">output_file('multiple_graphs.html')</span><span id="fefd" class="mc kp it ly b gy mo me l mf mg">s1 = figure(width=250, plot_height=250, title='data science')<br/>s1.circle(df['Mes'], df['data science'], size=10, color='navy', alpha=0.5)<br/>s2 = figure(width=250, height=250, x_range=s1.x_range, y_range=s1.y_range, title='machine learning') #share both axis range<br/>s2.triangle(df['Mes'], df['machine learning'], size=10, color='red', alpha=0.5)<br/>s3 = figure(width=250, height=250, x_range=s1.x_range, title='deep learning') #share only one axis range<br/>s3.square(df['Mes'], df['deep learning'], size=5, color='green', alpha=0.5)</span><span id="e9c2" class="mc kp it ly b gy mo me l mf mg">p = gridplot([[s1, s2, s3]])<br/>save(p)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nk"><img src="../Images/34d40d614fabe194af71d8a3b3b37d07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZRZ8DlA3NrHUKqHp.png"/></div></div></figure><p id="bb3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击<a class="ae lr" href="https://todoia.es/recursos/multiple_graphs.html" rel="noopener ugc nofollow" target="_blank">可以看到文件<a class="ae lr" href="https://todoia.es/recursos/multiple_graphs.html" rel="noopener ugc nofollow" target="_blank"> multiple_graphs.html </a>的样子。</a></p><p id="b0a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">示例图库:</strong> <br/>在这个链接中<a class="ae lr" href="https://docs.bokeh.org/en/latest/docs/gallery.html" rel="noopener ugc nofollow" target="_blank">https://docs.bokeh.org/en/latest/docs/gallery.html</a>你可以看到用散景可以做的所有事情的示例。</p><h1 id="2a90" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">阿尔泰尔</h1><p id="499a" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在我看来，Altair 并没有给我们已经讨论过的其他库带来任何新的东西，因此我不会深入讨论它。我想提一下这个库，因为也许在他们的示例库中，我们可以找到一些可以帮助我们的特定图形。</p><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/062798b9aa8885077cc8cf0134d2a135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*tnK-XIj02WExK5hy.png"/></div></figure><p id="ece2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">范例库:</strong> <br/> <a class="ae lr" href="https://altair-viz.github.io/gallery/index.html" rel="noopener ugc nofollow" target="_blank">在这个链接里</a>你可以找到所有你能用 Altair 做的范例库。</p><h1 id="1bf2" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">薄层</h1><p id="c78a" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Folium 是一个允许我们绘制地图和标记的库，我们也可以在上面绘制我们的数据。让我们选择地图供应商，这决定了地图的风格和质量。在本文中，为了简单起见，我们只将 OpenStreetMap 视为一个地图提供商。</p><p id="193c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用地图是相当复杂的，值得单独撰写一篇文章。在这里，我们只看一些基础知识，并用现有的数据画几张地图。</p><p id="daa4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们从基础开始，我们将画一个简单的地图，上面什么也没有。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="944d" class="mc kp it ly b gy md me l mf mg">import folium<br/>m1 = folium.Map(location=[41.38, 2.17], tiles='openstreetmap', zoom_start=18)<br/>m1.save('map1.html')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nm"><img src="../Images/ee0aeb6d125b5464d1335cdf0c0e1a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zblHixvqYAsmyJ-V.png"/></div></div></figure><p id="66d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们为地图生成一个交互式文件，你可以随意移动和缩放。这里可以看到<a class="ae lr" href="https://todoia.es/recursos/mapa1.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8771" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在地图上添加标记:</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="d363" class="mc kp it ly b gy md me l mf mg">m2 = folium.Map(location=[41.38, 2.17], tiles='openstreetmap', zoom_start=16)</span><span id="b986" class="mc kp it ly b gy mo me l mf mg">folium.Marker([41.38, 2.176], popup='&lt;i&gt;You can use whatever HTML code you want&lt;/i&gt;', tooltip='click here').add_to(m2)<br/>folium.Marker([41.38, 2.174], popup='&lt;b&gt;You can use whatever HTML code you want&lt;/b&gt;', tooltip='dont click here').add_to(m2)</span><span id="3508" class="mc kp it ly b gy mo me l mf mg">m2.save('map2.html')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi nn"><img src="../Images/596117c79e907f767924c818ea52bfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*buof9qIBd8M9UcJa1s-o8Q.png"/></div></div></figure><p id="8836" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以看到交互式地图文件，您可以通过<a class="ae lr" href="http://todoia.es/recursos/map2_medium.html" rel="noopener ugc nofollow" target="_blank">点击此处</a>点击标记。</p><p id="b3d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始展示的数据集中，我们有国家名称和人工智能术语的流行程度。快速可视化后，您会发现有些国家缺少其中一种价值观。我们将把这些国家排除在外，以便于操作。然后，我们将使用 Geopandas 将国家名称转换为可以在地图上绘制的坐标。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="51c8" class="mc kp it ly b gy md me l mf mg">from geopandas.tools import geocode<br/>df2 = pd.read_csv('mapa.csv')<br/>df2.dropna(axis=0, inplace=True)</span><span id="ff7c" class="mc kp it ly b gy mo me l mf mg">df2['geometry'] = geocode(df2['País'], provider='nominatim')['geometry'] #It may take a while because it downloads a lot of data.<br/>df2['Latitude'] = df2['geometry'].apply(lambda l: l.y)<br/>df2['Longitude'] = df2['geometry'].apply(lambda l: l.x)</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi no"><img src="../Images/1fdeb09a1a6577bfcf07ea658d858a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iImLjIFqyVK_C75u.png"/></div></div></figure><p id="db85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们有了用纬度和经度编码的数据，让我们在地图上表示它。我们将从一张泡泡地图开始，我们将在这些国家上画圈。它们的大小将取决于术语的流行度，并且它们的颜色将是红色或绿色，这取决于它们的流行度是否高于某个值。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="31b0" class="mc kp it ly b gy md me l mf mg">m3 = folium.Map(location=[39.326234,-4.838065], tiles='openstreetmap', zoom_start=3)</span><span id="e3ca" class="mc kp it ly b gy mo me l mf mg">def color_producer(val):<br/>	if val &lt;= 50:<br/>		return 'red'<br/>	else:<br/>		return 'green'</span><span id="89dd" class="mc kp it ly b gy mo me l mf mg">for i in range(0,len(df2)):<br/>	folium.Circle(location=[df2.iloc[i]['Latitud'], df2.iloc[i]['Longitud']], radius=5000*df2.iloc[i]['data science'], color=color_producer(df2.iloc[i]['data science'])).add_to(m3)</span><span id="dba3" class="mc kp it ly b gy mo me l mf mg">m3.save('map3.html')</span></pre><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi np"><img src="../Images/4748984b215af19b0853fbad36866c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*edHdT9un6cgmiraj.png"/></div></div></figure><p id="8efb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击这里可以查看互动地图文件<a class="ae lr" href="http://todoia.es/recursos/mapa3.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="2021" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">在任何给定的时间使用哪个库？</h1><p id="b009" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">有了这么多种类的库，您可能想知道哪个库最适合您的项目。快速的答案是库，让您可以轻松地制作您想要的图形。</p><p id="24ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于一个项目的初始阶段，随着熊猫和熊猫概况，我们将快速可视化，以了解数据。如果我们需要可视化更多的信息，我们可以使用简单的图表，我们可以在 matplotlib 中找到散点图或直方图。</p><p id="1513" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于项目的高级阶段，我们可以在主要库(Matplotlib、Seaborn、Bokeh、Altair)的图库中搜索我们喜欢并适合项目的图形。这些图形可用于在报告中给出信息，制作交互式报告，搜索特定值，…</p></div></div>    
</body>
</html>