<html>
<head>
<title>Exploring the US Cars Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索美国汽车数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-the-us-cars-dataset-dbcebf954e4a?source=collection_archive---------42-----------------------#2020-05-09">https://towardsdatascience.com/exploring-the-us-cars-dataset-dbcebf954e4a?source=collection_archive---------42-----------------------#2020-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2471" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">美国汽车数据集的探索性数据分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/83ef3c3a42b8c2f428508ed0d534a47f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlnN2gU8zmVD60jgQCxsYQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/red-car-usa-america-57409/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="707d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">美国汽车数据集</em>包含来自北美汽车在线拍卖的零散数据。它包含了在美国销售的28个汽车品牌的信息。在本帖中，我们将对<em class="lv">美国汽车数据集</em>进行探索性数据分析。数据可以在<a class="ae ky" href="https://www.kaggle.com/doaaalsenani/usa-cers-dataset" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="5b82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="2ab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们导入熊猫库</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="2093" class="mb mc it lx b gy md me l mf mg">import pandas as pd</span></pre><p id="1809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们移除熊猫数据框的默认显示限制:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="0c36" class="mb mc it lx b gy md me l mf mg">pd.set_option('display.max_columns', None)</span></pre><p id="e166" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们将数据读入数据框:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="4d71" class="mb mc it lx b gy md me l mf mg">df = pd.read_csv("USA_cars_datasets.csv")</span></pre><p id="a527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打印数据中的列列表:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="7af4" class="mb mc it lx b gy md me l mf mg">print(list(df.columns))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/051d57deefa8a82bf78a02e5522b311c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gFu9gwxzivfRs9IBs2pKxg.png"/></div></div></figure><p id="4130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以看看数据中的行数:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="8305" class="mb mc it lx b gy md me l mf mg">print("Number of rows: ", len(df))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/d9e46b39f9b5fc7f999488563defa607.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*HcEwCZd20BgicZ2jLg_-OA.png"/></div></figure><p id="43c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们打印前五行数据:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="51f1" class="mb mc it lx b gy md me l mf mg">print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/28bc74568800ad839ba48cf40eb72f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2H6wML28qxFU-KIitHsu1Q.png"/></div></div></figure><p id="03d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到有几个分类列。让我们定义一个将数据框、列名和限制作为输入的函数。当被调用时，它打印分类值的字典以及它们出现的频率:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="1a43" class="mb mc it lx b gy md me l mf mg">from collections import Counter<br/>def return_counter(data_frame, column_name, limit):<br/>  print(dict(Counter(data_frame[column_name]<br/>  .values).most_common(limit)))</span></pre><p id="75f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将函数应用于“品牌”列，并将结果限制为五个最常见的值:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="3235" class="mb mc it lx b gy md me l mf mg">return_counter(df, 'brand', 5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/27d84477474f1700f52f62a6dc4a2f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PavagrZAltP97hJqdkPXWg.png"/></div></div></figure><p id="ce88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如我们所见，我们有1235辆福特，432辆道奇，312辆尼桑，297辆雪佛兰和42辆通用汽车。</p><p id="fc32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将函数应用于“颜色”列:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="0eaa" class="mb mc it lx b gy md me l mf mg">return_counter(df, 'color', 5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/41feb239e1953ecc7bee79c7954aaa48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2tH_2bpewZjOxUwAeOvgw.png"/></div></div></figure><p id="62fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们看看白色汽车的品牌:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="ad20" class="mb mc it lx b gy md me l mf mg">df_d1 = df[df['color'] =='white']<br/>print(set(df_d1['brand']))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/ce8a69b6269691dafa8842e9b5f65a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HIV9aikV01FtyzcYU67s-g.png"/></div></div></figure><p id="9667" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以看看最常见的白色汽车品牌:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="117b" class="mb mc it lx b gy md me l mf mg">print(dict(Counter(df_d1['brand']).most_common(5)))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/8ec0186e23fe7db7faf8325dadc8bbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_eJ3FPBPetXiBxtIRbrUg.png"/></div></div></figure><p id="b02e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到大多数白色汽车是福特、道奇和雪佛兰。</p><p id="676b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以看看销售白色汽车最常见的州:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="93e3" class="mb mc it lx b gy md me l mf mg">print(dict(Counter(df_d1['state']).most_common(5)))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/ef7b903cb9d46ad2798d7936f2f983ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTa16mDkTno-m1_Fckz_2A.png"/></div></div></figure><p id="3633" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，从像“持续时间”这样的数字列中生成汇总统计数据会很有用。让我们定义一个采用数据框、分类列和数字列的函数。每个类别的数字列的平均值和标准偏差存储在数据框中，并且数据框根据平均值以降序排序。如果您想要快速查看特定类别对于特定数字列是否具有更高或更低的平均值和/或标准偏差值，这将非常有用。</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="3816" class="mb mc it lx b gy md me l mf mg">def return_statistics(data_frame, categorical_column, numerical_column):<br/>    mean = []<br/>    std = []<br/>    field = []<br/>    for i in set(list(data_frame[categorical_column].values)):<br/>        new_data = data_frame[data_frame[categorical_column] == i]<br/>        field.append(i)<br/>        mean.append(new_data[numerical_column].mean())<br/>        std.append(new_data[numerical_column].std())<br/>    df = pd.DataFrame({'{}'.format(categorical_column): field, 'mean {}'.format(numerical_column): mean, 'std in {}'.format(numerical_column): std})<br/>    df.sort_values('mean {}'.format(numerical_column), inplace = True, ascending = False)<br/>    df.dropna(inplace = True)<br/>    return df</span></pre><p id="a19c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用分类列“品牌”和数字列“价格”来调用我们的函数:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="c6ff" class="mb mc it lx b gy md me l mf mg">stats = return_statistics(df, 'brand', 'price')<br/>print(stats.head(15))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/8ab3ecc1bea07d86a05d169c4cbaf2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*irnGn7TMfWVm5B84MdoqEw.png"/></div></figure><p id="5194" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将使用箱线图来显示基于最小值、最大值、中值、第一个四分位数和第三个四分位数的数值分布。</p><p id="b2d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与汇总统计函数类似，此函数采用数据框、分类列和数值列，并根据限制显示最常见类别的箱线图:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="ca43" class="mb mc it lx b gy md me l mf mg">import matplotlib.pyplot as plt<br/>def get_boxplot_of_categories(data_frame, categorical_column, numerical_column, limit):<br/>    import seaborn as sns<br/>    from collections import Counter<br/>    keys = []<br/>    for i in dict(Counter(df[categorical_column].values).most_common(limit)):<br/>        keys.append(i)<br/>    print(keys)<br/>    df_new = df[df[categorical_column].isin(keys)]<br/>    sns.set()<br/>    sns.boxplot(x = df_new[categorical_column], y = df_new[numerical_column])<br/>    plt.show()</span></pre><p id="0a34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们为5个最常见的“品牌”类别中的“价格”生成箱线图:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="604a" class="mb mc it lx b gy md me l mf mg">get_boxplot_of_categories(df, 'listed_in', 'duration', 5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/66c8ee21a80b252172594ec11f5480a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIbcDo9lP_p3shRvK1-rIQ.png"/></div></div></figure><p id="57b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，让我们定义一个函数，它将数据框和数字列作为输入，并显示一个直方图:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="cfe1" class="mb mc it lx b gy md me l mf mg">def get_histogram(data_frame, numerical_column):<br/>    df_new = data_frame<br/>    df_new[numerical_column].hist(bins=100)<br/>    plt.title('{} histogram'.format(numerical_column))<br/>    plt.show()</span></pre><p id="8c6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用数据框调用函数，并从“价格”生成一个直方图:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="26cd" class="mb mc it lx b gy md me l mf mg">get_histogram(df, 'price')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/37ccc08debaf3154113d469bb414f2ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Jj0Qr_77_19FPrVrhj4UQ.png"/></div></div></figure><p id="abdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是请随意处理数据并自己编码。</p><h1 id="dbaf" class="ms mc it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">结论</h1><p id="bf8b" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">总之，在这篇文章中，我们介绍了几种分析美国汽车数据集的方法。<em class="lv"> </em>这包括定义生成汇总统计数据的函数，比如平均值、标准差和分类值的计数。我们还定义了用箱线图和直方图可视化数据的函数。我希望这篇文章有用/有趣。这篇文章的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/exploratory_data_analysis/eda_us_cars.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>