<html>
<head>
<title>Class Instances in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的类实例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/class-instances-in-python-d89ebf545ba4?source=collection_archive---------38-----------------------#2020-04-11">https://towardsdatascience.com/class-instances-in-python-d89ebf545ba4?source=collection_archive---------38-----------------------#2020-04-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3be" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">类实例的字符串表示</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/36360653201eb89db0b27714e83345a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adDbe2Gkj5bzyoHnxS9Mzg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/macbook-pro-on-black-table-3787591/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="3508" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自定义类实例的表示方式是简化调试和实例输出的好方法。在这篇文章中，我们将讨论如何通过定义“__repr__”和“__str__”方法来改变实例的字符串表示。</p><p id="b24b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="7665" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们定义一个描述YouTube频道的类。该类将包含特定于Youtube频道的属性(数据)，如频道名称、订户和验证状态:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4a31" class="ma mb it lw b gy mc md l me mf">class YouTube:<br/>    def __init__(self, channel_name, subscribers, verification):<br/>        self.channel_name = channel_name<br/>        self.subscribers = subscribers<br/>        self.verification = verification</span></pre><p id="1918" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个YouTube类的实例。提醒一下，实例是一个类对象的具体实例。对于我们的实例，让我们设置对应于我最喜欢的YouTube频道之一的属性，<a class="ae ky" href="https://www.youtube.com/user/sentdex/featured" rel="noopener ugc nofollow" target="_blank"><em class="mg"/></a>:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="40dd" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)</span></pre><p id="cde3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经创建了实例，让我们打印出实例:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8da1" class="ma mb it lw b gy mc md l me mf">print(sentdex)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/b0fcae49dc9f6a1108eeef0fcd5229bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*pEVwkU-AcLra82DoM6rWlQ.png"/></div></figure><p id="5866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到在指定的内存地址中有一个类型为“YouTube”的对象。虽然这符合我们的预期，但它并不是我们的实例可读性最好的表示。如果我们想改变这个对象的表示方式，我们可以定义' __repr__ '和' __str__ '方法。首先，让我们定义' __repr__ '方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4f78" class="ma mb it lw b gy mc md l me mf">class YouTube:<br/>    def __init__(self, channel_name, subscribers, verification):<br/>        self.channel_name = channel_name<br/>        self.subscribers = subscribers<br/>        self.verification = verification<br/>        <br/>    def __repr__(self):<br/>        return 'YouTube({0.channel_name!r}, {0.subscribers!r}, {0.verification!r})'.format(self)</span></pre><p id="390d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们重新定义我们的对象' sentdex '，并打印结果:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="cf5a" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)<br/>print(sentdex)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/36968b59a4f8c7a929f3f533ea1c756d.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*ZSZ9drl-sk0y22UCf6vCbg.png"/></div></figure><p id="fd64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到' __repr__ '方法返回了我们实例的代码表示。它只是对应于我们为创建实例而键入的代码。</p><p id="608f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们定义' __str__ '方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="19a0" class="ma mb it lw b gy mc md l me mf">class YouTube:<br/>    def __init__(self, channel_name, subscribers, verification):<br/>        self.channel_name = channel_name<br/>        self.subscribers = subscribers<br/>        self.verification = verification<br/>        <br/>    def __repr__(self):<br/>        return 'YouTube({0.channel_name!r}, {0.subscribers!r}, {0.verification!r})'.format(self)</span><span id="4a92" class="ma mb it lw b gy mj md l me mf">    def __str__(self):<br/>        return '({0.channel_name!s}, {0.subscribers!s}, {0.verification!s})'.format(self)</span></pre><p id="1123" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再次定义我们的实例并打印结果:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="bb06" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)<br/>print(sentdex)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/dde272b53471553d0f7cb4bdf5839ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*cNbjYNiW2m5SrnJfguCf7A.png"/></div></figure><p id="5c88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到我们现在有了实例的字符串表示。如果我们想要打印出代码表示，使用我们当前的类实现，我们可以使用内置的“repr()”方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="52fc" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)<br/>print(repr(sentdex))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/87502762fe7755eec145e23ad295f139.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*e5E2GtjCDiWHWCb_Rpi3ag.png"/></div></figure><p id="813d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还想指出' __repr__()'和' __str__()'在文本格式上的区别。特别的！“r”格式代码指示应使用“__repr__()”的输出，而不是默认的“__str__()”。例如，如果我们包括！我们字符串中的“r ”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c7b4" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)<br/>print('sentdex is {0!r}'.format(sentdex))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/788ac82fc59ef1830a6c299fa2050089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*fa_IDF0H0uCOA-_nYxK38g.png"/></div></figure><p id="d8e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到了代码表示。如果我们省略掉！r '代码，字符串表示用作默认值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1081" class="ma mb it lw b gy mc md l me mf">sentdex = YouTube('Sentdex', 847000, True)<br/>print('sentdex is {0}'.format(sentdex))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/750a700f25cccc4f3aa03ea41c69a20f.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*0By1PZRJolGrC6EPAW_yPA.png"/></div></figure><p id="55b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">定义“__repr__()”和“__str__()”方法通常是很好的做法，因为它可以使类实例更容易解释和调试。例如，记录实例的自定义字符串表示可以为程序员提供更多关于实例内容的有用信息。我就讲到这里，但是我鼓励你自己去研究代码。如果你有兴趣学习更多与python中的类定义相关的编程模式，我鼓励你去看看Python食谱<a class="ae ky" href="https://d.cxcore.net/Python/Python_Cookbook_3rd_Edition.pdf" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="af6e" class="mo mb it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="1bbb" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">总之，在这篇文章中，我们讨论了类实例的字符串表示。我们展示了如何定义“__repr__()”和“__str__()”方法，这允许我们显示实例的代码表示和字符串表示。这种做法可以使类实例的内容透明，如果做得好，可以大大简化调试。我希望你觉得这篇文章有用/有趣。这篇文章中的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/classes_in_python/class_instance_representation.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>