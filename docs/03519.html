<html>
<head>
<title>5 Advanced Functions in Itertools To Simplify Iterations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Itertools中的5个高级函数简化了Python中的迭代</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-advanced-functions-in-itertools-to-simplify-iterations-in-python-c6213312ca47?source=collection_archive---------6-----------------------#2020-04-03">https://towardsdatascience.com/5-advanced-functions-in-itertools-to-simplify-iterations-in-python-c6213312ca47?source=collection_archive---------6-----------------------#2020-04-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d7b8dc79c6eb7871ac87dbf5e6629b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CC_-EETF3DEZNRmK0zRIdQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@steve_j?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae jg" href="https://unsplash.com/s/photos/five?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><div class=""/><div class=""><h2 id="30bc" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">使用itertools模块，使一些复杂的迭代变得更加容易</h2></div><h1 id="b557" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">介绍</h1><h2 id="d70f" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated">干燥原则</h2><p id="2bcd" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">一个基本的编码原则是<strong class="mh jk"> DRY </strong>(即不要重复自己)，这也适用于Python编程。例如，假设我们需要处理一系列具有相同数据结构的csv文件。如果没有实现DRY原则，我们可能需要编写一些Python代码，如下所示。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">没有干燥原理的重复操作</p></figure><p id="0bb1" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">如你所见，由于违反了DRY原则，我们无法重用代码的某些部分。此外，当需要改变每个文件的操作时，我们必须更新程序中的多个地方，这是一个容易出错的过程。</p><p id="ce65" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">下面的代码怎么样？它用上面的代码做了完全相同的事情，但是更加简洁。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">根据干燥原理重复操作</p></figure><p id="8bdb" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">代码不仅通过组合所有单个文件的公共操作而具有更好的可读性，而且具有更好的可维护性，因为如果以后我们决定对每个文件进行不同的操作，我们只需更改一个地方的代码。</p><p id="cd9c" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">如您所知，这段代码利用了Python中实现的迭代特性，这是一个遵循DRY原则的良好实践。迭代背后的基本思想是为特定序列的单个项目提取公共动作，这被称为可迭代的(关于可迭代的更多信息，请参考我以前关于这个主题的文章<a class="ae jg" href="https://medium.com/swlh/understand-pythons-iterators-and-iterables-and-create-custom-iterators-633939eed3e7" rel="noopener">。</a></p><h2 id="86dd" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated">内置迭代函数</h2><p id="e95d" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">如上面的最后一段代码所示，我们通常使用<code class="fe nj nk nl nm b">for</code>循环来实现迭代，这使得我们可以方便地遍历可迭代对象来执行特定的操作。下面是一些在大多数情况下各种用法的例子。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">内置迭代函数</p></figure><p id="fcc7" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">如上面的代码片段所示，除了使用<code class="fe nj nk nl nm b">range()</code>的基本迭代，我们还利用三个关键函数，包括<code class="fe nj nk nl nm b">enumerate()</code>、<code class="fe nj nk nl nm b">reversed()</code>和<code class="fe nj nk nl nm b">zip()</code>，来改进我们的循环逻辑。要了解更多关于迭代中使用这些内置函数的技巧，你可以参考我以前关于这个主题的文章。</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="3192" class="ky kz jj bd la lb nu ld le lf nv lh li kp nw kq lk ks nx kt lm kv ny kw lo lp bi translated">itertools模块</h1><p id="991a" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">在本文中，我将重点介绍五个高级函数，它们将在更复杂的场景中简化迭代。具体来说，我们将探索<code class="fe nj nk nl nm b">itertools</code>模块。作为标准Python库的一部分，<code class="fe nj nk nl nm b">itertools</code>模块提供了各种工具，允许我们高效地处理迭代器。</p><p id="5ed0" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">如果你想继续学习本教程，请先运行<code class="fe nj nk nl nm b">import itertools</code>让这个模块在你的程序中可用。重要的是，为了提供适当的使用环境，您可以在以后自己参考，这些函数都有一个实际的例子。</p><h2 id="1d61" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated"><code class="fe nj nk nl nm b">accumulate</code>()</h2><p id="671f" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">这个函数<code class="fe nj nk nl nm b">accumulate(<em class="nz">iterable</em>[, <em class="nz">func</em>, <em class="nz">*</em>, <em class="nz">initial=None</em>])</code>通过指定<code class="fe nj nk nl nm b">func</code>参数来构造一个迭代器，该迭代器返回二进制函数(即带有两个参数的函数)的累积结果。可选的<code class="fe nj nk nl nm b">initial</code>参数是在输出iterable的开头设置一个额外的值。乍一看，这个函数可能听起来有点混乱，但是下面的例子将帮助您理解它。</p><p id="af23" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">假设你花5万美元买了一辆特斯拉汽车，月供2000美元，月息0.3%。我们想跟踪每月的余额。下面的代码展示了我们如何使用<code class="fe nj nk nl nm b">accumulate()</code>函数来实现这一点。需要注意的一点是，我们使用一个lambda函数，它正好接受两个参数，作为二元函数来处理连续的元素以产生累加的结果。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用accumulate()的迭代</p></figure><h2 id="2eb0" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated"><code class="fe nj nk nl nm b">The groupby</code>()</h2><p id="552d" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">这个函数<code class="fe nj nk nl nm b">groupby(<em class="nz">iterable</em>, <em class="nz">key=None</em>)</code>接受一个iterable和一个key，这个函数指定iterable中的元素应该如何分组。需要注意的一点是，如果元素没有事先排序，这个<code class="fe nj nk nl nm b">groupby()</code>函数不会像您预期的那样使用key函数对元素进行分组。换句话说，在使用<code class="fe nj nk nl nm b">groupby()</code>函数之前，通常需要使用相同的函数对iterable进行排序。</p><p id="39a9" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">假设我们有一些新员工参加了他们的入职培训，我们想按他们姓氏的首字母对他们进行分组，这样他们就可以更快地签到以获得他们的徽章。下面的代码展示了我们如何使用<code class="fe nj nk nl nm b">groupby()</code>函数来获得想要的结果。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用groupby()的迭代</p></figure><h2 id="dc5e" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated"><code class="fe nj nk nl nm b">The combinations</code>()</h2><p id="c2e5" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">这个函数<code class="fe nj nk nl nm b">combinations(<em class="nz">iterable</em>, <em class="nz">r</em>)</code>接受一个iterable和一个整数，并返回长度为r的元素子序列。有一点需要注意，这些元组中元素的顺序将反映它们在初始iterable中的原始顺序。</p><p id="4822" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">假设我们有一些不同面值的硬币，我们想用一定数量的硬币找出所有可能的组合。眼熟吗？你说得对——我是从我8岁女儿的数学作业中得到这个想法的。请随意将代码用于您的内部辅导工作。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用组合的迭代()</p></figure><h2 id="81ae" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated"><code class="fe nj nk nl nm b">product</code>()</h2><p id="20a9" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">这个函数<code class="fe nj nk nl nm b">product(<em class="nz">*iterables</em>, <em class="nz">repeat=1</em>)</code>接受一个或多个可迭代对象，并返回这些可迭代对象的笛卡尔积。这个函数非常像嵌套的<code class="fe nj nk nl nm b">for</code>循环，它创建了一个迭代器来“展平”嵌套的循环。可选的<code class="fe nj nk nl nm b">repeat</code>参数是为指定的数字重复唯一的输入迭代器。换句话说，<code class="fe nj nk nl nm b">product(a_list, repeat=3)</code>与<code class="fe nj nk nl nm b">product(a_list, a_list, a_list)</code>相同。</p><p id="2d5b" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">假设你将有一个侄子，你姐姐让你给这个男孩取名。我们知道他会姓汤普森。我们有两个名单，分别是名字和中间名。让我们找出可能的组合。最后，我们可能会选择约翰·埃利奥特·汤普森这个名字，因为JET这个首字母对一个男孩来说很酷:)</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用产品的迭代()</p></figure><h2 id="dde5" class="lq kz jj bd la lr ls dn le lt lu dp li lv lw lx lk ly lz ma lm mb mc md lo me bi translated"><code class="fe nj nk nl nm b">The permutations</code>()</h2><p id="3aed" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">这个函数<code class="fe nj nk nl nm b">permutations(<em class="nz">iterable</em>, <em class="nz">r=None</em>)</code>接受一个iterable和一个整数，并从iterable返回连续的<em class="nz"> r </em>长度的元素排列。如果省略可选的<code class="fe nj nk nl nm b">r</code>参数，该函数将返回指定iterable的所有可能排列。这个函数与<code class="fe nj nk nl nm b">combinations()</code>相似，都产生元素的组合。区别在于顺序在<code class="fe nj nk nl nm b">permutations()</code>函数中很重要，但在<code class="fe nj nk nl nm b">combinations()</code>函数中不重要。请看下面的插图。</p><pre class="my mz na nb gt oa nm ob oc aw od bi"><span id="ac4f" class="lq kz jj nm b gy oe of l og oh">&gt;&gt;&gt; numbers = [1, 2]<br/>&gt;&gt;&gt; print(list(itertools.combinations(numbers, 2)))<br/>[(1, 2)]<br/>&gt;&gt;&gt; print(list(itertools.permutations(numbers, 2)))<br/>[(1, 2), (2, 1)]</span></pre><p id="1074" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">在一个实际的例子中，假设南美的四个国家在世界杯预选赛中处于同一组，我们想知道所有可能的比赛。每支球队都将与其他球队进行一场主场和客场比赛，因此每支球队配对的顺序至关重要。所以我们可能要用<code class="fe nj nk nl nm b">permutations()</code>功能。</p><figure class="my mz na nb gt iv"><div class="bz fp l di"><div class="nc nd l"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用排列的迭代()</p></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="b3f6" class="ky kz jj bd la lb nu ld le lf nv lh li kp nw kq lk ks nx kt lm kv ny kw lo lp bi translated">外卖食品</h1><p id="a1d1" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">本教程向您展示了五个高级函数，我们可以用它们来简化我们在实际项目中可能遇到的一些复杂的迭代。当然，我们可以用自己的代码来实现这些迭代需求，但是可能需要复杂的逻辑来实现这些功能，并且我们的项目可能会因为涉及更多的代码而出现错误。因此，只要适用，我们应该考虑使用这些函数，因为它们已经被特别优化来处理各种迭代需求。</p><p id="ce01" class="pw-post-body-paragraph mf mg jj mh b mi ne kk mk ml nf kn mn lv ng mp mq ly nh ms mt mb ni mv mw mx im bi translated">要加快你的项目进度，除了干原则，编程中的另一个原则就是<strong class="mh jk">不要多此一举！</strong>因此，学习itertools模块中的这些高级函数和更多函数，如其官方文档<a class="ae jg" href="https://docs.python.org/3.8/library/itertools.html" rel="noopener ugc nofollow" target="_blank">中所列，并在任何适用的时候使用它们。</a></p><h1 id="59be" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">附加阅读</h1><p id="6f46" class="pw-post-body-paragraph mf mg jj mh b mi mj kk mk ml mm kn mn lv mo mp mq ly mr ms mt mb mu mv mw mx im bi translated">感谢阅读这篇文章。这里有一些关于这个主题的额外读物供感兴趣的读者阅读。</p><div class="is it gp gr iu oi"><a href="https://medium.com/better-programming/how-to-use-for-loops-better-in-python-1dfbc3d9e91f" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jk gy z fp on fr fs oo fu fw ji bi translated">如何在Python中更好地使用For循环</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">几个可以改善循环逻辑的函数</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow ja oi"/></div></div></a></div><div class="is it gp gr iu oi"><a href="https://medium.com/swlh/understand-pythons-iterators-and-iterables-and-create-custom-iterators-633939eed3e7" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jk gy z fp on fr fs oo fu fw ji bi translated">理解Python的迭代器和可迭代对象，并创建自定义迭代器</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">迭代是Python中最重要的概念之一。与迭代相关的两个术语是迭代器和…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow ja oi"/></div></div></a></div><div class="is it gp gr iu oi"><a href="https://docs.python.org/3.8/library/itertools.html" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd jk gy z fp on fr fs oo fu fw ji bi translated">itertools -为高效循环创建迭代器的函数- Python 3.8.2文档</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">这个模块实现了许多受APL、Haskell和SML启发的构件。每个都是…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">docs.python.org</p></div></div></div></a></div></div></div>    
</body>
</html>