<html>
<head>
<title>How to evaluate my Classification Model results</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何评价我的分类模型结果</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-5-metrics-for-evaluating-classification-model-83ede24c7584?source=collection_archive---------16-----------------------#2020-06-14">https://towardsdatascience.com/top-5-metrics-for-evaluating-classification-model-83ede24c7584?source=collection_archive---------16-----------------------#2020-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="9a02" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">混淆矩阵、ROC-AUC、F1得分、对数损失</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/320f55f0fc4edcd52ded83e064a62502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMx7xn2W4P7lyF5AYIMurg.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:照片由来自Unsplash的Annie Spratt拍摄</p></figure><p id="031a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与回归模型不同，当我们评估分类模型结果时，我们不仅要关注预测结果，还需要考虑每一类的预测概率和预测能力。</p><p id="d275" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">网上有很多关于分类指标选择的文章，这里我将只使用我自己的话来解释我的5个最重要的指标，在你评估你的分类模型之前，你应该考虑和知道。</p><blockquote class="le lf lg"><p id="b529" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated">1.混淆矩阵</p><p id="9841" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated">2.准确度、召回率、精确度</p><p id="57ca" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated">3.F1分数</p><p id="06e3" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated">4.接收操作特性(ROC)，曲线下面积(AUC)</p><p id="9c79" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated">5.原木损失</p></blockquote><p id="a74a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上面的列表没有按照重要性的顺序排列。为了便于说明，我将使用一个住房数据示例来展示预测住房价格范围的分类结果。</p><h1 id="aa73" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">1.混淆矩阵</h1><h2 id="40dc" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">什么是混淆矩阵？</h2><p id="fb08" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">从名字我们可以看出，混淆矩阵输出是一个矩阵，它相当'混淆'？不过，如果你懂逻辑的话，其实还是挺直观的。混淆矩阵是一个2*2的表(用于二进制分类),它是许多其他度量的基础。假设您的分类只有两类结果(1或0)，混淆矩阵是您的预测(1或0)与实际值(1或0)的组合。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi na"><img src="../Images/68a1df08350e2f1936acdcac60da193f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3GL9pLnYUTIc1Tdj124jaA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者-困惑矩阵</p></figure><blockquote class="le lf lg"><p id="b7f2" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated"><strong class="js iu">真阳性:</strong>正确预测阳性结果的情况</p><p id="b6be" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated"><strong class="js iu">假阳性:</strong>预测结果为阳性但实际为阴性的情况</p><p id="f0fc" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated"><strong class="js iu">假阴性:</strong>案例然后你预测结果是阴性，但实际上是阳性</p><p id="8e54" class="jq jr lh js b jt ju jv jw jx jy jz ka li kc kd ke lj kg kh ki lk kk kl km kn im bi translated"><strong class="js iu">真阴性:</strong>正确预测阴性结果的情况</p></blockquote><p id="fb8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这四个部分中，第一个词表示你的预测是否正确，第二个词表示你的预测值。查看<strong class="js iu">您的分类模型在不同价值类别上的表现非常有用。矩阵不仅仅局限于2*2，如果你的分类结果有2个以上的类别，你可以看到一个更大的矩阵。</strong></p><h2 id="4b58" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.confusion_matrix.html" rel="noopener ugc nofollow" target="_blank">示例</a></h2><pre class="kp kq kr ks gt nc nd ne nf aw ng bi"><span id="7d46" class="mj lm it nd b gy nh ni l nj nk">#Calculate confusion matrix<br/>from sklearn.metrics import confusion_matrix<br/>matrix=confusion_matrix(y_test, y_predicted,labels=['high','low'])<br/>cm=pd.DataFrame(matrix,index=['high','low'],columns=['high','low'])<br/>print(cm)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/14d3b1a0cd491ebdfa20f44a24d14432.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*J9gw-XzR_QY_8r8kc5Z5Zw.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">混淆矩阵示例</p></figure><p id="d48d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我将房价分为高和低，你可以看到不同类别的分类结果。注意，在sklearn包中，y轴是真值，为什么x值是不同于正常约定的预测值。在这里，您只能看到绝对数字，而不能直接看到百分比指标。</p><h1 id="fa77" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">2.准确度、召回率、精确度</h1><p id="d12a" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">这3个指标直接从混淆矩阵结果中计算得出，是基于您从混淆矩阵中看到的绝对数字的百分比指标。</p><h2 id="54ae" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.accuracy_score.html" rel="noopener ugc nofollow" target="_blank">精度</a></h2><p id="fdbc" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">准确性纯粹是您总体上正确预测的案例的百分比。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nm"><img src="../Images/ecf8d1b7a2b1dea26d4e6e624e74bcdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COccMlVMai5QVuhpLDrMvA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者-准确性计算</p></figure><p id="8966" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">准确度= (TP+TN)/(TP+TN+FP+FN)</p><h2 id="a01a" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">什么时候使用准确性？</h2><p id="8f1f" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">准确性是衡量整体模型表现的一个很好的标准。然而，它并没有告诉你在每个类别中的表现，因此，如果你单纯地看准确性，你可能会错过重要的信息。当不同类别中的大量案例相似或与其他指标一起使用时，最好使用<strong class="js iu">。</strong></p><h2 id="ece0" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html" rel="noopener ugc nofollow" target="_blank">回忆</a></h2><p id="2be6" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">召回衡量实际<strong class="js iu">阳性病例</strong>被正确识别的百分比。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nn"><img src="../Images/208e0599c8cf813cc7d261d936bbd803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_fNLnQpQ7uX6TWDG4csEQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者-回忆计算</p></figure><p id="14e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">召回= TP/(TP+FN)</p><h2 id="11c1" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">何时使用召回？</h2><p id="78bd" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">当<strong class="js iu">的目标是获取最大数量的阳性病例</strong>时，使用召回。例如，在最近的新冠肺炎疫情中，政府希望跟踪社区中所有的感染病例。如果你建立了一个模型，根据症状来预测这个人是否感染了新冠肺炎病毒，回忆将是一个重要的衡量指标。</p><h2 id="5e29" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_score.html" rel="noopener ugc nofollow" target="_blank">精度</a></h2><p id="364f" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">精确测量在预测为阳性的案例中，有多少百分比是真正的阳性。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/b266f316ff8b47b5421390318489823a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P-qdYsgmDsJlXXI5UnCMAw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者-精确计算</p></figure><p id="e5df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">精度= TP/(TP+FP)</p><h2 id="4e52" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">何时使用Precision？</h2><p id="a840" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">当您想要<strong class="js iu">非常精确地测量阳性病例</strong>时，使用Precision。它总是<strong class="js iu">与召回相冲突，因为您想要捕获的阳性案例越多，您将被归类为阳性案例的标准就越低</strong>。在新冠肺炎病例的例子中，如果您想要捕获更多的感染病例，您可能想要包括所有具有轻微症状的病例，这些症状可能只是由于普通流感引起的。</p><h2 id="5c20" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">例子</h2><pre class="kp kq kr ks gt nc nd ne nf aw ng bi"><span id="de7a" class="mj lm it nd b gy nh ni l nj nk">#Calculate Accuracy<br/>from sklearn.metrics import accuracy_score<br/>accuracy_score(y_test,y_predicted)<br/># Accuracy is 0.88124999999999998</span><span id="ff0a" class="mj lm it nd b gy np ni l nj nk">#Calculate Recall<br/>from sklearn.metrics import recall_score<br/>recall_score(y_test, y_predicted)<br/>#Recall is 0.84109589041095889</span><span id="c763" class="mj lm it nd b gy np ni l nj nk">#Calculate Precision<br/>from sklearn.metrics import precision_score<br/>precision_score(y_test, y_predicted)<br/># Precision is 0.84573002754820936</span></pre><p id="fbaa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以看到，这里的准确率略高于召回率和准确率，因为该模型在负面(低价)情况下预测得更好。</p><h1 id="c44e" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">3.F1分数</h1><h2 id="8e0c" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">F1成绩是多少？</h2><p id="2441" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">考虑到精确度和召回率之间的冲突特征，F1分数被创建为<strong class="js iu">具有召回率和精确度之间的平衡度量</strong>。这是回忆和精确的调和平均值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2b130dd6f24f43ba4c67035436c8d674.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*Y_4-4Yoe9rfw-NDUfiL3ug.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">F1得分公式</p></figure><h2 id="25f6" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">为什么我们需要F1的分数？</h2><p id="0a70" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">你可能要问:为什么我们不简单地平均精度和召回率？嗯，如果正面和负面案例的分布非常不均匀，平均值可能不能很好地代表模型性能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/11ffd8bdaef43f62bd6afd2473e69472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*1Pg9RHuBAv0k7PXPJmIimQ.png"/></div></figure><p id="defa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的例子中，只有一个真实的阳性案例，模型捕捉到了它。然而，在确定为阳性的100个病例中，只有1个是真正阳性的。因此，召回率=1，精确度=0.01。两者之间的平均值是0.505，这显然不能很好地代表模型有多差。F1得分= 2*(1*0.01)/(1+0.01)=0.0198，这更好地展示了模型的表现。</p><h2 id="3d6e" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html" rel="noopener ugc nofollow" target="_blank">例子</a></h2><pre class="kp kq kr ks gt nc nd ne nf aw ng bi"><span id="d43d" class="mj lm it nd b gy nh ni l nj nk">#calculate F1 score<br/>from sklearn.metrics import f1_score<br/>f1_score(y_test,y_predicted)<br/># F1 score is 0.84340659340659341</span></pre><h1 id="a637" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">4.接收操作特性(ROC)，曲线下面积(AUC)</h1><p id="c65d" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">AUC是ROC曲线下的面积，它是两个方面的良好衡量标准:</p><ol class=""><li id="ad81" class="ns nt it js b jt ju jx jy kb nu kf nv kj nw kn nx ny nz oa bi translated">该模型如何区分这两个类别(积极和消极)</li><li id="b265" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated">模型对不同类别的识别有多准确(比如它是否正确地将A组识别为阳性)？</li></ol><h2 id="cff1" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">那么什么是ROC曲线呢？</h2><p id="a71a" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">这里，我们需要首先理解两个指标:</p><ol class=""><li id="295f" class="ns nt it js b jt ju jx jy kb nu kf nv kj nw kn nx ny nz oa bi translated">真实阳性率(TPR): TPR实际上等于回忆真实阳性案例中，有多少百分比在模型中被正确捕获</li><li id="7b9f" class="ns nt it js b jt ob jx oc kb od kf oe kj of kn nx ny nz oa bi translated">假阳性率(NPR):这衡量在真正阴性的病例中，有多少百分比实际上是假阳性。</li></ol><p id="72b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">TPR和NPR正相关。这是因为当你想在你的分类模型中捕获更多的正面案例时，不可避免地你会错误地分类其中的一些案例，并且NPR会增加。<strong class="js iu"> ROC曲线是对NPR绘制的TPR，曲线下的面积越大，不同组之间的分离越好。</strong></p><h2 id="b9d1" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">例子</h2><pre class="kp kq kr ks gt nc nd ne nf aw ng bi"><span id="7ef7" class="mj lm it nd b gy nh ni l nj nk">#Calculate AUC <br/>from sklearn.metrics import roc_curve, auc<br/>fpr, tpr, treshold = roc_curve(y_test, y_score_new)<br/>roc_auc = auc(fpr, tpr)<br/>#auc is 0.96</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/5ab958f1e064cca11dbf64d1e0b5d5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4S_yNodbD6ZRD8irzK6SVw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者ROC曲线</p></figure><p id="7936" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于2类(1或0)上的分类问题，你瞎猜的概率是50%。当你盲目猜测类别时，蓝色虚线显示曲线TPR和FPR，对于该对角线，曲线下面积(AUC)为0.5。</p><p id="e9cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">曲线上的每个点代表TPR和FPR之间不同的分界点</strong>。例如，如果我不能容忍任何假阳性率(&lt; 0.01)，那么我能达到的真阳性率在0.6左右(见图上的绿点)。如果我把自己的标准放宽一点，只需要把FPR控制在0.1以下，那么我的TPR就可以达到0.9(见图上的红点)。</p><p id="fa68" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">阈值的选择基于不同的业务需求，通常情况下，<strong class="js iu">最佳选择是最大化TPR和FPR之间的差异，在图上用橙色和蓝色虚线(见红线)</strong>之间的最大垂直距离表示。我们的预测示例具有相当好的AUC(0.96)，优化点在(0.1，0.9)左右</p><p id="ba73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以在以下链接中找到有关ROC-AUC的更多信息:</p><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/deep-dive-into-roc-auc-cfdd78959ac3"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">深入研究ROC-AUC</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">什么是ROC曲线，我们如何解读它？</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ky ok"/></div></div></a></div><h1 id="55da" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">5.对数损失/二元交叉熵</h1><p id="e0ee" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">日志损失函数惩罚错误分类的案例，并且对正确分类的案例缺乏信心。与ROC-AUC相同，它不仅考虑分类准确性或结果，还考虑分配给模型中每个病例的概率。模型越好，测井曲线损失值越低。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oz"><img src="../Images/f985110d9c260a709da5b64707fec7e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbBU56792DTudRXRsznXnw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">对数损失公式</p></figure><p id="33d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">y是真实结果(0或1)，p函数是模型预测结果为1的概率。因此，如果实际值为1，我们希望最大化分配给预测1的概率，即p(y ),而如果实际值为0，我们希望最大化预测0的概率，即1-p(y)。这是求和符号之后我们想要最大化的部分。值在0-1之间的对数函数为负。因此，为了使整个值为正，函数前面有一个负号，我们需要最小化整个函数。</p><h2 id="f6a0" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated">日志损失的可接受值是多少？</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pa"><img src="../Images/269ef4fdc945bb36c5aa374326f8476e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mU3NSwKzgXCkpQZ8xo-TBA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">来源:作者-日志损失值曲线</p></figure><p id="f85b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对数损失值可以从0变化到无穷大。但是如果按照公式计算，如果只是盲目的给每种情况分配50%，那么log loss函数就是0.69。因此，您应该明确地将日志损失值保持在0.69以下，并根据业务需求来决定阈值。</p><h2 id="af34" class="mj lm it bd ln mk ml dn lr mm mn dp lv kb mo mp lz kf mq mr md kj ms mt mh mu bi translated"><a class="ae nb" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.log_loss.html" rel="noopener ugc nofollow" target="_blank">例子</a></h2><pre class="kp kq kr ks gt nc nd ne nf aw ng bi"><span id="e943" class="mj lm it nd b gy nh ni l nj nk">#Calculate log loss<br/>from sklearn.metrics import log_loss<br/>log_loss(y_test,y_score)<br/>#log loss is 0.32241485496779987</span></pre><h1 id="0647" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">建议</h1><p id="70cd" class="pw-post-body-paragraph jq jr it js b jt mv jv jw jx mw jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">总之，不同的度量服务于不同的目的，并且可以相应地应用于不同的问题。<strong class="js iu">但是，一般建议使用ROC-AOC或对数损失，因为它们考虑了每类预测的预测概率。</strong>尽管两种模型都能正确预测这种情况，但90%置信度的预测模型肯定比51%置信度的预测模型更受青睐。</p><p id="c872" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您有兴趣知道回归模型使用什么指标，可以参考下面的链接:</p><div class="oh oi gp gr oj ok"><a rel="noopener follow" target="_blank" href="/what-are-the-best-metrics-to-evaluate-your-regression-model-418ca481755b"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">评估您的回归模型的最佳指标是什么？</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">缅因州RMSE MSE的r广场</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">towardsdatascience.com</p></div></div><div class="ot l"><div class="pb l ov ow ox ot oy ky ok"/></div></div></a></div></div></div>    
</body>
</html>