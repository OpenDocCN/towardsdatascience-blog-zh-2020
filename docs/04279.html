<html>
<head>
<title>Pandas String Operations — Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫串操作—解释</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pandas-string-operations-explained-fdfab7602fb4?source=collection_archive---------19-----------------------#2020-04-18">https://towardsdatascience.com/pandas-string-operations-explained-fdfab7602fb4?source=collection_archive---------19-----------------------#2020-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fbd6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何操作文本数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9f12dcbe15317e5841756643d52ca236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2X6FKMpDUuYKZQHN2PA9Dw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Ashkan Forouzani 在<a class="ae ky" href="https://unsplash.com/s/photos/letter?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="04bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们必须用数值来表示每一位数据，以便由机器学习和深度学习模型进行处理和分析。然而，字符串通常不会有一个好的和干净的格式，需要大量的预处理。Pandas 提供了许多多功能函数来修改和处理字符串数据。在讨论字符串操作之前，最好提一下 pandas 是如何处理字符串数据类型的。</p><h1 id="33e3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">对象 vs 字符串</strong></h1><p id="caec" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在 pandas 1.0 之前，只有“object”数据类型用于存储字符串，这导致了一些缺点，因为非字符串数据也可以使用“object”数据类型存储。Pandas 1.0 引入了一个新的特定于字符串数据的数据类型<strong class="lb iu">string type</strong>。到目前为止，我们仍然可以使用 object 或 string type 来存储字符串，但是在将来，我们可能会被要求只使用 string type。</p><blockquote class="ms mt mu"><p id="9c46" class="kz la mv lb b lc ld ju le lf lg jx lh mw lj lk ll mx ln lo lp my lr ls lt lu im bi translated">这里需要注意的一点是，对象数据类型仍然是字符串的默认数据类型。要使用 StringDtype，我们需要显式声明它。</p></blockquote><p id="8c84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过“<strong class="lb iu">字符串</strong>或<strong class="lb iu"> pd。用于选择字符串数据类型的 Dtype 参数的 string type()</strong>参数。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="ed5b" class="ne lw it na b gy nf ng l nh ni">import pandas as pd<br/>import numpy as np</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/13d65fcb97d5ad42e9bd57cd2250fbb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*mku-QbOVK9LOPm2mLu0TwA.png"/></div></figure><p id="758e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种方法是使用<strong class="lb iu"> astype </strong>函数转换为“字符串”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d82d157a3976a3cae219f99cf5458fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*IPhJMpeiHHa8kwEjUqGu9A.png"/></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="b7c1" class="lv lw it bd lx ly ns ma mb mc nt me mf jz nu ka mh kc nv kd mj kf nw kg ml mm bi translated"><strong class="ak">字符串操作</strong></h1><ul class=""><li id="283d" class="nx ny it lb b lc mn lf mo li nz lm oa lq ob lu oc od oe of bi translated"><strong class="lb iu">上下</strong></li></ul><p id="029c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谈到字符串，首先想到的是小写和大写字母。对 as 来说可能没什么大不了的，但是“A”和“A”就像“A”和“k”或任何其他字符对计算机来说一样不同。</p><p id="b265" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">上()</strong>和<strong class="lb iu">下()</strong>的方法可以用来解决这个问题:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/581e3830515ef37fea32641155e9371a.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*PuD7T2EnyVTd4l2cCZ6iHQ.png"/></div></figure><ul class=""><li id="8492" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">剥离</strong></li></ul><p id="3520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果字符串的开头或结尾有空格，我们应该修剪字符串以消除空格。<strong class="lb iu">剥离</strong>的方法可以用来做这个任务:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/f329036dc22f336c3a118e8631b006bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*MfZS47rZ42VoJepDZoWvVQ.png"/></div></figure><p id="fe30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有<strong class="lb iu"> lstrip </strong>和<strong class="lb iu"> rstrip </strong>方法分别删除前后空格。</p><ul class=""><li id="5eba" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">拆分</strong></li></ul><p id="0f0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时字符串携带不止一条信息。为了利用不同种类的信息，我们需要拆分字符串。而这里用的方法是<strong class="lb iu">分割</strong>，令人惊讶。</p><p id="ec4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只需要将字符传递给 split。默认字符是空格或空字符串(str= ' ')，所以如果我们要根据任何其他字符进行拆分，就需要指定它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/caedefa057be37298367679ae4575e41.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*N1s9nziv-kMy56x1OD2mXw.png"/></div></figure><p id="9247" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">字符串被拆分，新元素被记录在一个列表中。通过传递索引，可以使用<strong class="lb iu"> [] </strong>或<strong class="lb iu"> get </strong>方法来访问列表中的元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/9bc0e14b72b364690cdae4894448bbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*HfGFy3OHxXGdHMbNcaJKxA.png"/></div></div></figure><p id="3b02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以在拆分后用新元素创建一个数据帧。<strong class="lb iu">扩展</strong>参数设置为真创建一个数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/c76c737d4d8e810cf96d8ee15acd9160.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*8Ssa9CniKCyyRpBmYvySqw.png"/></div></figure><p id="9432" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一行没有足够的元素来匹配其他行，则单元格中不填充任何元素。我们也可以限制分裂的次数。默认情况下，分割从左边开始，但是如果我们想从右边开始，应该使用<strong class="lb iu"> rsplit </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/94c72d07d2f9acd37e3d4121660e1150.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*DiVjhMDWQG_n8feaXPYlMQ.png"/></div></figure><ul class=""><li id="708f" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">卡特彼勒</strong></li></ul><p id="55b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在某些情况下需要拆分字符串一样，我们可能需要组合或连接字符串。<strong class="lb iu"> Cat </strong>方法用于连接字符串。</p><p id="bbfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要使用<strong class="lb iu"> sep </strong>参数传递一个参数放在连接的字符串之间。默认情况下，cat 忽略缺失值，但是我们也可以使用<strong class="lb iu"> na_rep </strong>参数指定如何处理它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/43213ad45b753bf185bc65c37fec3485.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*j92xi-NyJrqQUlMAbFeRdQ.png"/></div></figure><p id="d415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以进行元素级的连接(即向序列中的每个字符串添加一个字符串):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/2c93c9f94e031fc04ceede6478125480.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*UUOIg9LDMnSaSExd0BIELg.png"/></div></figure><p id="e25f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设字符串是从左到右索引的，我们可以使用<strong class="lb iu"> str[] </strong>访问每个索引。用例子来解释更好:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/a79a3e812b4f4b510c8499e6e264108e.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*uSzTHvF7T-1mQvl2Y8dXvQ.png"/></div></figure><p id="b639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果字符串没有指定的索引，则返回 NaN。</p><ul class=""><li id="687e" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">开始和结束</strong></li></ul><p id="8c33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以分别使用以开头的<strong class="lb iu">和以</strong>结尾的<strong class="lb iu">来选择字符串。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/931b4f3ca326269bf96c6b7b7192ebb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*DQSuyP16xgQadwOdWnZM7A.png"/></div></figure><ul class=""><li id="e336" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">得到假人</strong></li></ul><p id="6a75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以从序列中提取虚拟变量。这在编码分类变量时特别有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/b8ac386637f5c87230ceee8ad9268b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*Vl7PzwCEYD0lWj15GLj0DQ.png"/></div></figure><p id="1a36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种表示需要将分类变量输入到机器学习模型中。</p><p id="75d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果一个字符串包含多个值，我们可以首先使用<strong class="lb iu"> sep </strong>参数进行拆分和编码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/2999443979647355906a3541da59c655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*G-sN9gRAOnvJNsxcMLB-2Q.png"/></div></figure><ul class=""><li id="2044" class="nx ny it lb b lc ld lf lg li oh lm oi lq oj lu oc od oe of bi translated"><strong class="lb iu">镜头</strong></li></ul><p id="0b71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在某些情况下，我们需要数据帧的一系列或一列中字符串的长度。为了得到每个字符串的长度，我们可以应用<strong class="lb iu"> len </strong>方法。请记住，len 也用于获取一个系列或数据帧的长度。让我们用例子来看看不同之处:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/93affae0ff3705d5401c307b106b127d.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*QgNL1RZM4E76MYpV4aZbRg.png"/></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="32c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas 字符串操作并不局限于我们在这里讨论的内容，但是我们讨论的函数和方法肯定会有助于处理字符串数据并加快数据清理和准备过程。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="4ecf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>