<html>
<head>
<title>MyAnimeList user scores: Fun with web scraping and linear regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MyAnimeList 用户评分:网络抓取和线性回归的乐趣</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/myanimelist-user-scores-fun-with-web-scraping-and-linear-regression-9dd97900a82b?source=collection_archive---------44-----------------------#2020-05-05">https://towardsdatascience.com/myanimelist-user-scores-fun-with-web-scraping-and-linear-regression-9dd97900a82b?source=collection_archive---------44-----------------------#2020-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d674e895499fc4ed4921ca1b4c0b98ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFSsl6OcfyQps3pz0zWxRw.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">蒂姆·莫斯霍尔德在<a class="ae kc" href="https://unsplash.com/s/photos/download?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="d777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Metis 数据科学训练营的第三周已经结束，训练营的第二个项目也已经结束。下面我详细介绍一下我做的项目，就是从<a class="ae kc" href="https://www.myanimelist.net" rel="noopener ugc nofollow" target="_blank"> MyAnimeList </a> (MAL)中抓取数据，然后使用线性回归模型<strong class="kf ir">根据动漫</strong>的特点预测用户评分。</p><h2 id="21bb" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">TL；博士:</h2><ul class=""><li id="fb1b" class="lu lv iq kf b kg lw kk lx ko ly ks lz kw ma la mb mc md me bi translated"><strong class="kf ir">从 11541 个动漫作品中刮净 19 个特征</strong></li><li id="d7c6" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated"><strong class="kf ir">通过虚拟变量转换的特征</strong>；剪裁异常值；应用 log10 和 sqrt 和乘法/除法功能</li><li id="2cd7" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated"><strong class="kf ir">通过 statsmodel 的 OLS 选择了 11 个特征</strong>；scikit-learn 的套索；R 和 MSE 等指标；直觉和领域知识</li><li id="5cd1" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated"><strong class="kf ir"> LASSO </strong>在性能上挤掉了 plain linear regression 和 Ridge，但是线性回归模型的选择最终没有产生差异</li><li id="0145" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">最终的模型可以预测一部动画是高分还是中分，但是有<strong class="kf ir">负偏差</strong>和<strong class="kf ir">相对广泛的传播</strong></li><li id="c33d" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">不同类型的动画也有<strong class="kf ir">非常不同的剧集分布和时长</strong></li><li id="b468" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">接下来的步骤是<strong class="kf ir">将线性回归模型分别</strong>应用于不同的动画类型，并<strong class="kf ir">研究更复杂的模型</strong></li></ul></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="78f9" class="mr lc iq bd ld ms mt mu lg mv mw mx lj my mz na lm nb nc nd lp ne nf ng ls nh bi translated">一.背景</h1><p id="c4a9" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">MAL 声称它是“世界上最大的动漫数据库和社区”。网站上的大部分信息(如果不是全部的话)都是用户生成的，从给一部动漫的评分和评论到该动漫的人物简介和列表。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/339002cb55f6504acc22e2aa71fa6220.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*7ZhCs8yx6HbrpmG21JVIrQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">《仲裁示范法》清单示例(<a class="ae kc" href="https://myanimelist.net/anime/5114/Fullmetal_Alchemist__Brotherhood" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></figure><p id="4cf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用户生成的分数很好地代表了一部动漫的质量和受欢迎程度。因此，我想知道我是否可以使用 MAL 在这部动画上的数据来预测它将获得的分数。</p><blockquote class="nq nr ns"><p id="fdf3" class="kd ke nt kf b kg kh ki kj kk kl km kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated">对于决定下一部作品的动画制作公司来说，或者对于决定委托或授权播放哪部动画的电视网络来说，这将是非常有价值的信息。</p></blockquote><h1 id="6960" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">二。收集数据</h1><p id="d2c6" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">我使用 BeautifulSoup 收集了 2020 年 4 月 23 日至 24 日之间的 16706 部动漫作品的数据。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oc"><img src="../Images/9e80fd97a1632453aa9c120f3412ec9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6K5lS8QC3QMLrWevcchVuA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">我如何分割恶意数据</p></figure><p id="8821" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这些条目中，有 5，165 个被排除在最终测试和训练数据集之外，因为它们没有分数(也称为目标值)。这给我留下了 11，541 个条目，或者原始数据集的 2/3。然后，我将剩余条目的 1/5(或 2，279)分成一个测试数据集，并保留剩余的 9，262 个条目用于训练和验证。</p><p id="ee9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是最终考虑的 19 个特性列表。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/235983eb0cdb3c5a7ce4028fb81531b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fA4inpdyKC35V4Udzz3heA.png"/></div></div></figure><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/e58da4148c034c0d25d92f3da87a1e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*X2M6htCdIT5u0zVjxIOGLA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">关联属性的类型</p></figure><p id="ce4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">被删除但没有使用的功能包括制作方、许可方和工作室，以及日本的播出时间。未被删除的特征包括动画中的角色、配音演员和其他工作人员。所有这些特征都可以包含在对恶意代码数据的任何进一步调查中。</p><h1 id="1fc7" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">三。准备数据</h1><h2 id="f07d" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">a)空数据</h2><p id="f4d1" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">最终数据集中有几个空数据实例。所以我选择删除下面的内容，剩下 9144 个条目:</p><ul class=""><li id="f167" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">150 个尚未播出或正在播出的节目。他们没有列出结束日期和/或没有集数</li><li id="5884" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">7 个已经结束播放但没有开始日期的节目</li></ul><p id="f52a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我还将剩余的空数据处理如下:</p><ul class=""><li id="a800" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">没有列出集号的电影被认为只有一集，大多数电影都是这样</li><li id="f3cd" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">各个相关属性的空条目可以被认为是空列表</li></ul><h2 id="6953" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">b)整合流派</h2><p id="09d4" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">数据集中有 41 个流派，这可能意味着多达 41 个特征；然而，只有 9 种类型有超过 200 个相关的动画条目:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/1fc996cef16b21a242dba03f00afdde8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j09PWyaE0RTyIt9itmBeqA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">那可是好多流派啊！</p></figure><p id="392c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我将少于 200 个条目的所有流派合并到“其他”类别中，结果是一个更易于管理的 10 个流派的列表:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/fc30362d788f6529b9dc1e90b27c30dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dh-lqOjF5RGoj-uPQ2ildg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">好多了。</p></figure><h2 id="39ba" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">c)流派和类型的虚拟变量</h2><p id="aa5a" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">我为 10 个综合类型和 6 个动画类型生成了虚拟变量，其中电视和 OVA 列表占了大多数。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/31bee4a59127c037218787626bce3f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*OwsypA-mrG44JwDiY3LDxg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">动漫类型及其分类</p></figure><h2 id="20da" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">d)流派和相关属性的计数</h2><p id="d8d5" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">每个动画条目可以被标记为多种类型和相关属性。因此，我生成了以下内容:</p><ul class=""><li id="7751" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">流派的数量</li><li id="14c7" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">每个关联属性的计数</li><li id="7d2d" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">关联属性的总数</li></ul><h2 id="d589" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">e)额定值的数值</h2><p id="9257" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">动漫的分级从适合所有年龄的(G)到色情的。因此，我决定给每个等级分配一个等级，用 0 表示最适合家庭，用 5 表示最不适合家庭。</p><p id="b313" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一小部分动漫没有评级；对于这些，我假设它们的评级为 PG13，这是最常见的评级(占训练数据集的 44%)。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/0910301abc8fd9747e589e0910a97c57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bf-9XjsRfVNzTk3EXMrjuw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">动漫分级及其分类</p></figure><h2 id="b997" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">f)剪辑情节和持续时间</h2><p id="ab7a" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">我发现剧集(一些剧集播放时间很长)和时长(一些电影播放时间接近 3 小时)都存在极端异常值，如下图所示:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/e7f200a36982f5279765b4da4162d9ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*d4zzNw5GZVRpkn-RodXbhw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">1750 集！？！？</p></figure><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi om"><img src="../Images/ac4de6251cf25fba566ab9cca4b57dad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*Fiqr1XA2YEysvLRzY9tQlA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">请注意&lt; 5 分钟左右(对应于非常短的动画)和～25 分钟左右(对应于典型电视或 OVA 剧集的长度)的峰值</p></figure><p id="1407" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我选择将剧集剪辑为 60 集(略多于一年的动画)，时长为 150 集(典型电影长度的上限)，如下所示。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/1c271b479786bf501b1f5378b6714467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*5D7Y0YBRcwGMoI8CdBhjFw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">请注意 1 集(对应于电影和其他单镜头)以及 13、26 和 52 集(对应于电视动画的第 1、2 和 4 季)的峰值</p></figure><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/26a0209543f7bcff9b4b43a23df03b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*eJmXMjBnwA5KpwldnG13Aw.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">在第 90 分钟左右略有起伏</p></figure><h2 id="3a88" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">g)动画的开始年份和年代</h2><p id="8a86" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">从动画条目的开始字段中，我提取了动画开始的年份，并按年份计算了动画的年龄。</p><h2 id="5c84" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">h)其他转换</h2><p id="e1ed" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">我对以下特征应用了 log10 变换，这些特征显示出更符合泊松分布:</p><ul class=""><li id="0575" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">剪辑的剧集和剪辑的时长</li><li id="8c49" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">成员和收藏夹(对此我也应用了额外的 log10 转换)</li><li id="2935" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">动漫时代</li><li id="01a1" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">Gerne 和相关计数</li></ul><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/caecdd1dd5055a173f242a3836b1e00d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWLVydPZf-4iJxkPYZCkhw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">需要 log10 转换的功能示例</p></figure><p id="2487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我还应用了以下转换:</p><ul class=""><li id="c5a0" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">开始年份的平方根</li><li id="75e9" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">按日志成员划分日志收藏夹(以获得收藏夹与成员的比率)</li><li id="97bc" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">将剪辑的剧集与剪辑的时长相乘以获得剪辑的长度；将测井次数乘以测井持续时间，得到测井长度</li><li id="d23f" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">类型和相关属性的倍增虚拟变量与日志长度</li></ul><h1 id="fe82" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">四。选择最终特征</h1><p id="9d80" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">总共考虑了 86 个特征；其中包括成员和收藏夹以及以下 84 个转换后的功能。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/9570dbc41d00cbe094ce69422ae94aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*3W3a0zK3Q765Qj1Whb_jHA.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">转换后的要素列表</p></figure><p id="161b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了减少功能的数量，我使用了以下代码:</p><ul class=""><li id="72e4" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">statsmodel 的<strong class="kf ir"> OLS </strong>，使用参数的<strong class="kf ir"> t-scores </strong>确定其显著性(选择的分界点为 5%显著性)</li><li id="5583" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">scikit-learn 的<strong class="kf ir">套索</strong>，查看哪些参数在<strong class="kf ir">λ= 0.01</strong>处被丢弃(选择的截止点为 0.01)</li><li id="1c69" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">scikit-learn 的 LinearRegression，查看<strong class="kf ir"> R、均方误差、平均绝对误差和最大误差</strong></li><li id="0759" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">直觉和领域知识</li></ul><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/4713a92cf5725e739994dbfd70dedcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*ByilOnC5phWGw5ShD_Crqg.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">用于选择要素的工具</p></figure><p id="6038" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这给我留下了如下 11 个特征。</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/24180f2c9246eccfc03a31ab71bfbf48.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*RUA28cyDmhvmpQwTsnUFMQ.png"/></div></figure><h1 id="1cf5" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">动词 （verb 的缩写）拟合和选择模型</h1><p id="0180" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">出于这个项目的目的，我考虑了 scikit-learn 的以下线性回归模型:</p><ul class=""><li id="9ede" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">线性回归</li><li id="9e5f" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">山脉</li><li id="e0dd" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">套索</li></ul><p id="b368" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这三个模型在训练数据集上用 5 重交叉验证来训练。结果非常相似，如下表所示:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/a2a4e300f920c5aa1eafb9396ca95186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*GGHANcYodiW9FWDBhovcow.png"/></div></figure><p id="afed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我选择了 LASSO 模型，因为它比其他两个模型稍微好一点(特别是在最大误差方面)，但这两个模型都可以工作得很好。以下是 LASSO 训练结果的图示:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/352b5c7d610f0768f9147388c9ad5d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R5MaNcUbP7cktmjdSWhj1Q.png"/></div></div></figure><h1 id="b22c" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">不及物动词观察</h1><p id="45cd" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">将最终模型应用于测试集给出了以下结果:</p><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/875050834837313c4dca0e2689b9b7f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riII0ij2FvnChoz_iv634g.png"/></div></div></figure><p id="1e70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这比在训练/验证集上的性能稍好。最终的模型看起来也足够强大，足以表明一部动画是否会获得高分或中等分。</p><p id="d2f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查如下表所示的调整后的参数权重，我发现如下:</p><ul class=""><li id="a66b" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">最喜欢的成员的比例是用户生成的动画分数的最重要的预测因素。这是有意义的，因为用户将一部动画放在喜爱的列表中很可能给该动画一个高分。</li><li id="00ef" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">父母故事和前传数量也是重要的预测因素。这可以归功于一部属于已知特许经营的动漫，从而成为其粉丝中的已知数量。</li></ul><blockquote class="nq nr ns"><p id="23f6" class="kd ke nt kf b kg kh ki kj kk kl km kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated">这也表明了依赖用户生成分数的风险；我们已经看到，在整个数据集中，较高的分数比较低的分数更普遍，所以粉丝喜爱的人可能倾向于获得较高的分数，而不管观众的规模如何。</p></blockquote><ul class=""><li id="5cd9" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">动漫长度也是用户生成分数的一个重要预测指标，这是有意义的，因为长期播放的电视剧通常是如此，这是因为受欢迎的需求和随后的经济回报。</li></ul><figure class="nm nn no np gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ot"><img src="../Images/9d16a05114aece462caa7bd6ee301468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-kppyR9yByPM6LlBZJ0ovQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">调整后的重量=模型重量的绝对值除以数值范围</p></figure><p id="6215" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，我注意到以下限制:</p><ul class=""><li id="9935" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">模型有一个<strong class="kf ir">负偏斜</strong>；分数&gt; 8 偏向较低分数，分数&lt; 5 偏向较高分数</li><li id="a596" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">该模型有一个<strong class="kf ir">相对较高的传播</strong>，尤其是分数&lt; 5。所以精确的分数预测有点超出了它的范围</li><li id="488c" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">不同动漫类型的<strong class="kf ir">剧集和时长分布差异很大</strong>。比如电影多为一集，时长在 1 到 3 小时之间；电视连续剧往往至少有 13 集，每集 24 分钟。</li></ul><figure class="nm nn no np gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/b576ef19e7733cc50b646c28f2273ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*RsYDCCUpqcA4-U8RTnW0-A.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">顶行表示持续时间，底行表示发作次数。请注意不同动漫类型之间的分布差异有多大。</p></figure><h1 id="6276" class="mr lc iq bd ld ms nx mu lg mv ny mx lj my nz na lm nb oa nd lp ne ob ng ls nh bi translated">七。进一步的工作和学习要点</h1><p id="1424" class="pw-post-body-paragraph kd ke iq kf b kg lw ki kj kk lx km kn ko ni kq kr ks nj ku kv kw nk ky kz la ij bi translated">显然，需要一个更复杂的模型来准确预测恶意动漫作品的用户生成分数。可能的方法包括:</p><ul class=""><li id="5b7e" class="lu lv iq kf b kg kh kk kl ko of ks og kw oh la mb mc md me bi translated">对每个动画类型(无论是电视还是电影)分别应用线性回归或其他模型。决策树算法在这里可能会创造奇迹。</li><li id="9412" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">纳入当前分析中遗漏的特征，如制片人、工作室和工作人员。</li><li id="abd4" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">整合其他动漫网站的数据，如 AniDB 和动漫新闻网。</li><li id="da37" class="lu lv iq kf b kg mf kk mg ko mh ks mi kw mj la mb mc md me bi translated">应用更复杂的模型，如神经网络。</li></ul><p id="d047" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我学到了很多关于典型数据分析的工作流程，我很高兴看到如何将我学到的知识应用到下一个项目中。</p></div></div>    
</body>
</html>