<html>
<head>
<title>Top 3 New Features in Pandas 1.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫1.0的三大新功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-new-features-in-pandas-1-0-4a92d98a9a8f?source=collection_archive---------15-----------------------#2020-02-16">https://towardsdatascience.com/top-3-new-features-in-pandas-1-0-4a92d98a9a8f?source=collection_archive---------15-----------------------#2020-02-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e33d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一些新的节省时间和精力的功能</h2></div><p id="c249" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">熊猫1.0版本发布已经有几周了，它带来了一些令人兴奋的新功能，尽管其中一些仍处于实验阶段。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/8862811a703f34852a994a8f5756ea6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MjF64GdiYTAoHWIg8KMuQ.jpeg"/></div></div></figure><p id="79ad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章背后的主要思想是简要地探索它们，并向您展示如何升级到Pandas 1.0，因为您可能仍在运行0.25版本。所以事不宜迟，让我们看看如何做到这一点。</p><h2 id="8df4" class="lq lr it bd ls lt lu dn lv lw lx dp ly kr lz ma mb kv mc md me kz mf mg mh mi bi translated">从0.25升级到1.0</h2><p id="5c1d" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">如果我打开<strong class="kk iu"> Jupyter笔记本</strong>并查看当前版本的熊猫图书馆，我会得到这个:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mo"><img src="../Images/399536bd4862af6c7427f04a1578097c.png" data-original-src="https://miro.medium.com/v2/resize:fit:390/format:webp/1*vx2oPdiWHjR6yEt_lNaJWw.png"/></div></div></figure><p id="0f6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的版本是0.25.1，所以要升级我需要执行下面的命令(也可以通过Jupyter完成，不需要打开终端或命令提示符):</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/200fa924f1929543d17548dfe509644b.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*xWgaMF9iiqnrDuW2KvTzkQ.png"/></div></figure><p id="d15e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，如果您得到一些<strong class="kk iu">权限错误</strong>，以管理员身份运行命令行，或者如果您在Linux上，在命令前面加上<code class="fe mq mr ms mt b">sudo</code>。现在让我们看看一切是否如预期的那样:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/1d9c1d9d36e5719d0361b2f69dfe5658.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*WfYIQSTTW-1csOGTAFlrkA.png"/></div></figure><p id="3ccc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，你可能看不到“1.0.1”，这取决于你何时阅读这篇文章，它可能是一个更新的版本。完成后，让我们简单讨论一下我将用来做演示的数据集，以及从哪里获得它。</p><h2 id="7ab4" class="lq lr it bd ls lt lu dn lv lw lx dp ly kr lz ma mb kv mc md me kz mf mg mh mi bi translated">使用的数据集</h2><p id="f1ba" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">我决定使用<strong class="kk iu"> MT Cars数据集</strong>，这是任何用户都熟悉的数据集，非常适合一些基本的数据操作。它可以从<a class="ae mw" href="https://raw.githubusercontent.com/plotly/datasets/master/mtcars.csv" rel="noopener ugc nofollow" target="_blank">这个链接</a>下载，或者你可以直接通过Pandas复制链接并阅读:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/5dadc5fdd8ffc44143c6838999e536cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*ViBjeB79tyW85YHKLje_AQ.png"/></div></figure><p id="03bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，现在当这一切都结束了，我可以开始写文章了！</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="139d" class="nf lr it bd ls ng nh ni lv nj nk nl ly jz nm ka mb kc nn kd me kf no kg mh np bi translated">1.降价转换</h1><p id="7c45" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">现在，作为Pandas DataFrame操作的结果，您可以轻松地生成减价表。不过，您还需要一个额外的库，名为<code class="fe mq mr ms mt b">tabluate</code>:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/d685d4808e6c4c33d8ed8e766cd36bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*AEJZcxTNN7IR0stPJ6VHVw.png"/></div></figure><p id="2f6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了演示，我决定只保留6缸汽车，只保留<code class="fe mq mr ms mt b">manufacturer</code>和<code class="fe mq mr ms mt b">mpg</code>列:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/70f995e9d85d4eebab515596eb20744d.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*QA7d68KtCFEwXoCaoxAiAQ.png"/></div></figure><p id="b10a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在很容易将这个结果导出到markdown表。只需在陈述的末尾添加<code class="fe mq mr ms mt b">.to_markdown()</code>，并确保用<code class="fe mq mr ms mt b">print()</code>陈述将所有内容括起来:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/97359da1ef3b05bf514b85e39662f809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*1mA03wMz9vHJN1B48I6AWQ.png"/></div></figure><p id="c9fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以复制该文本并将其粘贴到markdown单元格中(选择一个单元格，然后选择<code class="fe mq mr ms mt b">ESC</code> — <code class="fe mq mr ms mt b">M</code> — <code class="fe mq mr ms mt b">Enter</code>):</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/78eab92e5d65ab49cd0868447839fce0.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*ZqkVLOY_Qb26kfnTtwc6qw.png"/></div></figure><p id="d66f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">瞧啊。该单元格现在包含来自您的数据的减价表:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/4c32bf56e169b897c23e50134114c0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/1*TZ_iiDoxFyaObrajPjLb2Q.png"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="6937" class="nf lr it bd ls ng nh ni lv nj nk nl ly jz nm ka mb kc nn kd me kf no kg mh np bi translated">NA标量</h1><p id="5061" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">Pandas最终得到了一个标量来表示缺失值。其背后的思想是用一个标量来表示所有数据类型中一致的缺失值。到目前为止，我们有:</p><ul class=""><li id="15ce" class="nv nw it kk b kl km ko kp kr nx kv ny kz nz ld oa ob oc od bi translated"><code class="fe mq mr ms mt b">np.nan</code> —用于彩车</li><li id="b4f0" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated"><code class="fe mq mr ms mt b">None</code> —用于对象</li><li id="c9d1" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated"><code class="fe mq mr ms mt b">pd.NaT</code> —表示日期和时间</li></ul><p id="cf02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以用<code class="fe mq mr ms mt b">pd.NA</code>代替上面提到的那些来表示缺失值。值得一提的是，它仍然是一个<strong class="kk iu">实验特性</strong>，并且可以在没有预先警告的情况下改变其行为，所以我还不会将它包含在产品代码中。</p><p id="70e1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，这并不意味着我们可以玩弄它。要快速查看它的动作，只需在任意Jupyter单元格中执行<code class="fe mq mr ms mt b">pd.NA</code>:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/24fa2ffb6829fcbfceb4656272c9a31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*S2OvsuKztkkory0DvdgStg.png"/></div></figure><p id="3838" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了查看它在一个基本示例中是如何工作的，我将创建一系列的几个元素，并将其中一个声明为missing，首先使用<code class="fe mq mr ms mt b">None</code>关键字:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/22c64df5731ea7657e1653fb037a1ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:510/format:webp/1*BMSizzFJ5G8IpOHLavWYkg.png"/></div></figure><p id="2ce3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以看到<code class="fe mq mr ms mt b">None</code>是如何毫无问题地“翻译”到<code class="fe mq mr ms mt b">NA</code>的。您也可以通过<code class="fe mq mr ms mt b">pd.NA</code>直接指定缺失值:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/22b86a0a2e44b4fd57ff320d6341afcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*1hRrkKw4mtpVu72poGOazQ.png"/></div></figure><p id="07c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，从这里开始，您可以使用您的标准方法来查看一个系列是否包含缺失值:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi om"><img src="../Images/3fee6344ffeb20a0039c89d45e88b843.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*CCJ2LKSlKDPcrmpEf9bthg.png"/></div></figure><p id="8bcc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在差不多就是这样了。再说一次，这个特性是实验性的，所以我不建议在产品代码中使用它。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="b14b" class="nf lr it bd ls ng nh ni lv nj nk nl ly jz nm ka mb kc nn kd me kf no kg mh np bi translated">字符串数据类型</h1><p id="c89b" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">到目前为止，我们只有<code class="fe mq mr ms mt b">object</code>数据类型来处理任何非数值的东西，这可能会有问题，原因有几个:</p><ol class=""><li id="cbb9" class="nv nw it kk b kl km ko kp kr nx kv ny kz nz ld on ob oc od bi translated">您可以将字符串和非字符串存储到一个数据类型数组中</li><li id="8cb4" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld on ob oc od bi translated">没有明确的方法只提取字符串列，因为数据类型为<code class="fe mq mr ms mt b">object</code>的<code class="fe mq mr ms mt b">.select_dtypes()</code>会导致第一个讨论的问题</li></ol><p id="f751" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像<code class="fe mq mr ms mt b">pd.NA</code>一样，这仍然被认为是实验性的，这意味着它很容易在没有警告的情况下发生变化。</p><p id="fef3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们回头看看我们的<strong class="kk iu"> MT Cars </strong>数据集，看看我们在其中存储了哪些数据类型:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/d7838fb66e160bf7c1347bcd2c963f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*-r1rBYDp80mxpFMo9hFAjA.png"/></div></figure><p id="81a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，<code class="fe mq mr ms mt b">manufacturer</code>很明显是一个字符串，被声明为<code class="fe mq mr ms mt b">object</code>。对您来说，这听起来没什么大不了的，但是想象一下这样一个场景，您想要对数据集进行子集化，只保留string数据类型的列。在那里，您可以很容易地得到一个数字列，其中只有一个非数字的值。这是我们想要避免的问题。</p><p id="170b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，我们可以使用<code class="fe mq mr ms mt b">.convert_dtypes()</code>方法将潜在的对象转换成字符串:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi op"><img src="../Images/1b1c56510f05840a30acb61cc55d4a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*vPa7MwxFHGedyIXMGQLSBQ.png"/></div></figure><p id="cdff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我可以更安全地基于列数据类型创建子集了:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/0befd03690bea1b5a8db3400864e446a.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*jXRnEaMtvMT7vCtkjnrCFA.png"/></div></figure></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><h1 id="947c" class="nf lr it bd ls ng nh ni lv nj nk nl ly jz nm ka mb kc nn kd me kf no kg mh np bi translated">在你走之前</h1><p id="7d3d" class="pw-post-body-paragraph ki kj it kk b kl mj ju kn ko mk jx kq kr ml kt ku kv mm kx ky kz mn lb lc ld im bi translated">最后，我只希望你能从这篇文章中得到一些有用的东西。没有一个新特性是开创性的，但这并不意味着它们不能帮助你编写更好、更统一的代码。</p><p id="33ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我很想知道熊猫背后的开发团队将会添加哪些功能，所以如果你想在它们发布后尽快了解它们，请继续关注。</p><p id="a681" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p></div><div class="ab cl my mz hx na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="im in io ip iq"><p id="eb76" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">喜欢这篇文章吗？成为 <a class="ae mw" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="mv">中等会员</em> </a> <em class="mv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="or os gp gr ot ou"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">通过我的推荐链接加入Medium-Dario rade ci</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">medium.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi lo ou"/></div></div></a></div></div></div>    
</body>
</html>