<html>
<head>
<title>Clustering Food Venues in Sydney</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">悉尼的美食聚集地</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/clustering-food-venues-in-sydney-bf48877650d5?source=collection_archive---------49-----------------------#2020-04-22">https://towardsdatascience.com/clustering-food-venues-in-sydney-bf48877650d5?source=collection_archive---------49-----------------------#2020-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ce52" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Foursquare API 和悉尼美食聚集地。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1e56afebffb101b3fddc3c3a4491ee0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1FBdKV0hDivefm3-"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">雅各布·卡普斯纳克在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="3e8c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">背景信息</strong></h2><p id="61ab" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">对一些人来说，很难确定他们想和朋友去哪里吃饭。有这么多不同的食物和菜肴可供选择。一般来说，如果一个地区因某种特定的美食而闻名，那么游客更有可能在那个地区吃那种美食。澳大利亚是一个多元文化的国家，在共同的地方不难找到不同的民族社区。</p><p id="ad62" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在这个项目中，我们的目标是帮助人们根据自己的兴趣找到在悉尼就餐的地点。例如，如果你想吃泰国菜，你可以去你周围的郊区。我们将使用<em class="mq"> Foursquare API </em>和<em class="mq"> K-means 聚类</em>来发现地区中最常见的美食，并在地图上可视化聚类。</p><h2 id="88de" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">数据</h2><p id="449c" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">悉尼火车站<strong class="lu ir"> </strong>附近有很多餐馆。为此，我编制了一个数据集，其中包含了悉尼所有的火车站和地铁站，以及它们各自的经度和纬度坐标。这将使我们能够在悉尼的地图上看到这些地点。车站位置的选择是因为大多数悉尼工人都乘坐公共交通工具。靠近车站的餐馆为居民提供了方便的选择。这里可以查看数据集<a class="ae kv" href="https://github.com/ngoharry19/Coursera_Capstone/blob/master/sydney_trains.csv" rel="noopener ugc nofollow" target="_blank">，共 181 个站。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/e738b5319919173021b6c1e6fe7dee45.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*UMGq82j2egNGuZ8nNNMUQw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">。悉尼站数据帧的 head()</p></figure><h2 id="8889" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">方法和分析</h2><p id="026f" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">在将悉尼站读入一个<em class="mq">熊猫</em>数据框后，我们现在将使用 Foursquare API 来查找我们站附近的美食地点。然后，我们将使用<em class="mq"> K-means </em>聚类来创建具有相似特征的站点的聚类。</p><p id="9c21" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">首先，让我们看看我们的站在悉尼地图上是什么样子，以检查我们的坐标是否正确。我们可以使用<em class="mq"> geopy </em>和<em class="mq">叶子</em>库来创建一张悉尼地图，上面叠加我们的站坐标。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">悉尼火车/地铁网络——使用笔获得交互式地图</p></figure><p id="e78a" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">现在，我们使用 four square API T1，这是一种社交定位服务，允许用户发现商业和景点。由于我们试图找到与食物相关的地点，我添加了类别 ID '<em class="mq">4d 4b 7105d 754 a 06374d 81259</em>'作为 API 请求 URL 的一部分。我将返回的场地限制为 300 个，半径为 1 公里。</p><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="53cc" class="kw kx iq mv b gy mz na l nb nc">url = 'https://api.foursquare.com/v2/venues/search?&amp;categoryId=4d4b7105d754a06374d81259&amp;client_id=<strong class="mv ir">{}</strong>&amp;client_secret=<strong class="mv ir">{}</strong>&amp;v=<strong class="mv ir">{}</strong>&amp;ll=<strong class="mv ir">{}</strong>,<strong class="mv ir">{}</strong>&amp;radius=<strong class="mv ir">{}</strong>&amp;limit=<strong class="mv ir">{}</strong>'.format(<br/>            CLIENT_ID, <br/>            CLIENT_SECRET, <br/>            VERSION, <br/>            lat, <br/>            lng, <br/>            radius, <br/>            LIMIT)</span></pre><p id="f76c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">利用我们提取的附近美食场所的信息，我们可以将其合并到一个包含我们的站点信息的新数据帧中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/1c4838f00c4a5047ec5cd61caecd4bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*738FM9i2WC1kSjSd5t4Opg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">。head()提取的悉尼美食场馆数据框</p></figure><p id="38b9" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><em class="mq">四方</em>共退回 5565 家美食场所。然而，当查看一些站点的场馆数量时，一些站点的数量很少或者根本没有。为了使这些站点不影响聚类，我删除了所有少于 9 个美食场所的站点。这导致了总共 5458 个美食场所和 175 个独特的类别。从 181 个站点，我们的数据帧现在包含 142 个站点，即删除了 39 个站点。</p><p id="3e05" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在使用一种热编码并对每个食品场所类别的频率取平均值后，我们可以使用<em class="mq"> K-means </em>聚类，这是一种无监督学习算法，用于根据特征相似性创建数据点的<em class="mq"> K </em>聚类。</p><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="8e77" class="kw kx iq mv b gy mz na l nb nc">sydney_onehot = pd.get_dummies(sydney_venues[['Venue Category']], prefix="", prefix_sep="")<br/><br/><em class="mq"># add neighborhood column back to dataframe</em><br/>sydney_onehot['Station'] = sydney_venues['Station'] <br/><br/><em class="mq"># move neighborhood column to the first column</em><br/>fixed_columns = [sydney_onehot.columns[-1]] + list(sydney_onehot.columns[:-1])<br/>sydney_onehot = sydney_onehot[fixed_columns]</span><span id="e439" class="kw kx iq mv b gy ne na l nb nc">sydney_grouped = sydney_onehot.groupby('Station').mean().reset_index()<br/>sydney_grouped.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/11b9c68d341e8882cfc5a8ef547d06ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*T7U9dsZhfVcin-JIue9w0w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">悉尼分组数据框显示了前 7 个类别的频率平均值</p></figure><p id="8b42" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">使用这个数据框，我们可以删除第一列并将其用于<em class="mq"> K-means </em>聚类。观察肘方法和剪影评分，我们发现要使用的最佳聚类数是<em class="mq"> K = 5 </em>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/5de6030068a9c30b6e50e6ec972969eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3PUt0ANbPM9T5aqoOIkizw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最佳 K 的肘方法和轮廓分数</p></figure><p id="d103" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">生成聚类标签后，我们可以将其添加到新的数据框中，合并原始数据框和它们各自的前 10 个场馆。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/12f9c8309c3b0a0c73dff6e98e1a82bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJ9g2CO-gxIcypviYYRUKQ.png"/></div></div></figure><p id="e782" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">由于之前已经删除了一些站点，我们获得了一些站点的<em class="mq"> NaN </em>值，因此我们使用<em class="mq"> dropna() </em>方法删除了这些行。<br/>我将每个车站的第一个最常见的场馆可视化，按照它们的集群进行分组，让我们清楚地了解这些集群可能具有的特征。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/e306a18f3701f47c839a55fa8a26b50b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NBAbngD5SLLMdXHr9RwwLA.png"/></div></div></figure><p id="8d5e" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">通过查看条形图，我归纳了每个集群并给它们贴上标签。<br/>我不得不包括几个类别作为标签，因为顶级场所有相似之处，例如咖啡馆:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/7ec09f874fdf2b2dcd13fbc4b8103538.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*hg5JEv46BzRyYULVy4YAMw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据框中每个聚类的标签</p></figure><p id="1612" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我还添加了每个站点的前三个地点，这样我们可以在地图上查看它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/adf8f3d431b5cd9f9555deae5ad26a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*Ux4eem43B7PLoAEzMztLzw.png"/></div></figure><p id="e581" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">然后，通过合并先前的数据帧，创建包含所有新信息的最终数据帧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/3377291219da1163ee1fc1661af6b4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ulww4ahcrfT7ohuQwMzOlA.png"/></div></div></figure><h2 id="7e86" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结果</h2><p id="1d83" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">我们的最终地图显示的信息集群创建。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/d473ae88468415387418c33fe8cadddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_PDAiiFy_cjpZLMWwk4SlA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">悉尼车站集群地图</p></figure><p id="6b31" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">对总共 142 个站(最初来自 181 个)进行聚类的结果展示了 5 个聚类。我们将集群归纳如下:</p><ul class=""><li id="b619" class="nn no iq lu b lv ml ly mm lf np lj nq ln nr mk ns nt nu nv bi translated">集群 0(黄色)-23 个车站、面包店/咖啡馆/印度餐馆场馆</li><li id="7ca4" class="nn no iq lu b lv nw ly nx lf ny lj nz ln oa mk ns nt nu nv bi translated">聚类 1(青色)-2 个车站，韩国餐馆</li><li id="ea8c" class="nn no iq lu b lv nw ly nx lf ny lj nz ln oa mk ns nt nu nv bi translated">第 2 组(紫色)——35 个车站、咖啡厅</li><li id="e591" class="nn no iq lu b lv nw ly nx lf ny lj nz ln oa mk ns nt nu nv bi translated">集群 3(蓝色)-63 个车站、咖啡馆/咖啡/泰国餐馆场馆</li><li id="11b8" class="nn no iq lu b lv nw ly nx lf ny lj nz ln oa mk ns nt nu nv bi translated">第 4 组(红色)-19 个车站，中国/越南/披萨餐厅场馆</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">悉尼车站周围的美食场所-使用笔来获得交互式地图版本</p></figure><p id="f040" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">虽然有些车站可能与标签描述不同，但它很好地概述了有哪些类型的餐馆或美食场所。</p><h2 id="8a6b" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h2><p id="ca93" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">总之，我们使用了 K-means 聚类，为悉尼火车站和地铁站创建了 5 个不同的聚类，这些火车站和地铁站周围至少有 9 个美食场所。下次你出去吃饭的时候(希望快点！)，你可以看看这张地图，了解一下悉尼车站和周围的美食广场都提供什么样的食物。</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="9361" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">感谢阅读！</p><p id="f936" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这是我的“<a class="ae kv" rel="noopener" target="_blank" href="/exploring-areas-and-venues-of-sydney-nsw-australia-88c0cf4f3da2?source=friends_link&amp;sk=4260f408761960b57ed6a3f91c3e2aea">探索悉尼的地区和场所</a>”文章的第 2 部分，在这里我重点介绍了悉尼的餐馆和其他与食物相关的场所。<br/>你可以在这里查看这个项目的全部代码/笔记本<a class="ae kv" href="https://github.com/ngoharry19/Coursera_Capstone/blob/master/Clustering_Food_Venues_in_Sydney.ipynb" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="5b21" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">欢迎在<a class="ae kv" href="https://www.linkedin.com/in/harryngo19/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我，或者在<a class="ae kv" href="https://medium.com/@harryngo" rel="noopener"> Medium </a>上关注我。</p></div></div>    
</body>
</html>