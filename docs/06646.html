<html>
<head>
<title>Keeping things .secret</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">保管东西。秘密</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/keeping-things-secret-d9060c73089b?source=collection_archive---------45-----------------------#2020-05-25">https://towardsdatascience.com/keeping-things-secret-d9060c73089b?source=collection_archive---------45-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="af14" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">向黑客大军隐藏 API 密钥的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/46523a14fb438d04bb34a2261272ac93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JCSfD6R3W5w4tjS6M1yB1Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由卢瑟·博特里尔(<a class="ae kv" href="https://unsplash.com/photos/EsBufnuK4NE" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/EsBufnuK4NE</a>)拍摄</p></figure><p id="10f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名数据科学家或软件工程师，在你的职业生涯和个人项目中，你将不可避免地与 API(应用编程接口)进行交互。虽然许多 API 提供“免费增值”服务，允许用户每天免费请求一定数量的请求，但一旦超过这一限制，就会产生巨额账单。<a class="ae kv" href="https://nakedsecurity.sophos.com/2019/03/25/thousands-of-coders-are-leaving-their-crown-jewels-exposed-on-github/" rel="noopener ugc nofollow" target="_blank">北卡罗来纳州立大学(NCSU) </a>完成的一项研究扫描了 13%的 GitHub 存储库，发现每天都有数千个新的独特代码被泄露。黑客不仅可以为他们不幸的目标积累荒谬的账单，他们甚至可以对国家安全构成威胁。NCSU 能够在一个西欧国家的主要政府机构的网站上找到 AWS 凭证。正如您在本文中可能想到的，我们需要一种方法来保持这些 API 凭证的秘密，同时仍然能够在线呈现我们的代码。</p><p id="0c3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与编程世界中的大多数事情一样，这可以通过几种方式来实现。我将在本文中概述我最喜欢的方法，主要是因为它简单易用。此外，本教程是为使用 Unix 命令行(macOS 或 Linux)的人编写的，但稍加修改也可以在 Windows 操作系统上复制。</p><h1 id="f3a5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">制作一个秘密文件夹</h1><p id="2421" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们要保存这些密钥的位置是在我们主目录的一个文件夹中。首先导航到主目录并编写以下代码:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f91f" class="mu lt iq mq b gy mv mw l mx my">mkdir .secret</span></pre><p id="76cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将在主目录中创建一个名为<code class="fe mz na nb mq b">.secret</code>的新目录。“.”意味着这个文件夹是隐藏的，它不会显示在主目录中。如果你想检查它是否确实存在，你可以在主目录中输入<code class="fe mz na nb mq b">ls -a</code>,它会在你所有的其他文件中列出。</p><h1 id="6267" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建 JSON 文件</h1><p id="47de" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用您选择的文本编辑器，我的偏好是<a class="ae kv" href="https://www.sublimetext.com/" rel="noopener ugc nofollow" target="_blank"> Sublime Text </a>，您现在需要创建一个 JSON 字典，其中包含您给定项目所需的所有 API 键。该结构的一个示例如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9044" class="mu lt iq mq b gy mv mw l mx my">{<br/>      "API_Key" : "&lt;YOUR API KEY GOES HERE&gt;"<br/>  }</span></pre><p id="ad86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记得把这个文件保存在你的主目录下，扩展名为<code class="fe mz na nb mq b">.json</code>。这就是将文件定义为 JSON 的原因，与代码的格式无关。</p><h1 id="bb8d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将 JSON 文件移动到。秘密目录</h1><p id="42e8" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在您的主目录中，编写以下代码，将 JSON 文件从主目录移动到我们刚刚创建的<code class="fe mz na nb mq b">.secret</code>文件中。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c56a" class="mu lt iq mq b gy mv mw l mx my">mv ~/&lt;JSON FILE NAME&gt; ~/.secret/&lt;JSON FLE NAME&gt;</span></pre><h1 id="7063" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">从文件中提取 API 密钥</h1><p id="3f11" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在，在你的 python 脚本中，你需要定义一个使用<code class="fe mz na nb mq b">json</code>库来解码 JSON 文件的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3cd3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">剩下的就是使用上面的函数，将文件路径作为参数。要访问该字典中的特定 API 键，只需选择相应的字典键，在本例中为“API_Key”。瞧，API 键现在作为它自己的对象存储在您的脚本中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><blockquote class="ne nf ng"><p id="af5c" class="kw kx nh ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated">这是所有的乡亲。我希望这对你有帮助，在你编码的时候保持安全！</p></blockquote></div></div>    
</body>
</html>