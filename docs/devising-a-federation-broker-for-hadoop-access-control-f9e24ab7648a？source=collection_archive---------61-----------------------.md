# 为 Hadoop 访问控制设计一个联合代理

> 原文：<https://towardsdatascience.com/devising-a-federation-broker-for-hadoop-access-control-f9e24ab7648a?source=collection_archive---------61----------------------->

## 理解联邦方法中的数据授权以获得更好的安全性。

![](img/23835b48e7894ce85344ff6e5060604a.png)

作者图片

你是数码守望者的粉丝吗？想想一个人工智能系统，可以处理海量数据，阻止城市犯罪？是的，你猜对了， **POI** 或**相关人员**是一个强有力的例子，说明数据可能比诺克斯堡的所有黄金都值钱(如果真的有黄金存在，而美国政府一直否认这一点)！

Hadoop 是最强大的数据处理开源框架之一。但是，它存在安全问题，我们将通过联合访问代理来减少这一问题。在我们开始探索 Hadoop 访问控制的新框架之前，让我们先了解一下 Hadoop 框架。

# Hadoop 是什么？

Hadoop 是由 Apache 开发的开源框架[。它基于数据聚类和并行处理。不可否认的事实是，一个大型开源社区一直在支持 Hadoop 在大数据应用程序中的存在。他们为创建更强大的企业级数据应用程序堆栈做出了贡献。](https://hadoop.apache.org/)

存储和处理大量数据的能力对于更大规模地接受 Hadoop 至关重要。Hadoop 擅长结构化和非结构化数据的计算资源管理。但是，这种现代数据架构存在一些挑战，尤其是在数据安全性方面。

> 为了了解安全挑战，让我们来了解一下 Hadoop 在 BigData 中的应用。

# Hadoop 是如何运作的？

我们知道 Hadoop 是基于并行处理和分布式计算机制而设计的。该平台提供了 Hadoop 分布式文件系统或 HDFS。HDFS 支持硬件商品和不同处理框架的容纳。

IAM 或 HDFS 身份认证管理系统用于定义一组协议，帮助最终用户通过应用程序访问数据。这些协议集被称为 API 或应用程序编程接口，这些接口[可以由企业](https://www.kunshtech.com/blog/why-develop-api-for-your-business/)开发用于数据访问。

# Hadoop 联盟

随着数据集群的增加，Hadoop 框架面临着很大的压力。为了解决这个问题，它引入了两个联盟

*   HDFS 联邦
*   纱线联盟

HDFS 联盟使用多个命名节点。这些 NameNodes 是独立的，管理整个名称空间的子集。这里，NameNodes 维护名为名称空间的文件系统。他们通过名称分组来维护文件的层次结构。树状文件结构在一个名为名称空间的容器中进行管理。

# 任何 HDFS 系统都由两层组成。

![](img/0e3b7c007a4f443b991c508c8ccd6513.png)

**图片:** HDFS 联邦系统([下一代大数据联邦访问控制:参考模型](https://arxiv.org/pdf/1912.11588.pdf)

**第 1 层:**NameNodes 中的名称空间控制着与目录、文件和块相关的数据的存储。

**第 2 层:**它是支持低级操作的块存储，有两个部分——数据的块管理和物理存储。

通过添加水平 DataNodes，可以轻松扩展物理存储，这与 NameNodes 不同。扩展 NameNodes 有一个限制，因为它只能垂直进行，由于单节点架构，这很难做到。但是，有了 HDFS 联邦，NameNodes 的名称空间层可以水平扩展。

# HDFS 建筑

![](img/fb5b395b5f5a5c2d6809a326d423f35c.png)

**图片:** HDFS 架构([下一代大数据联邦访问控制:参考模型](https://arxiv.org/pdf/1912.11588.pdf))

它有一个架构来提高大数据存储和访问管理的效率。HDFS 结构有两个主要组成部分。

*   将单个节点 NameNode 作为主节点
*   在集群从属服务器上运行的几个 DataNodes。

命名节点运行命名空间层来管理与文件系统相关的数据。它管理对文件的访问，并使用分级系统。它还跟踪块的位置，并维护日志文件，以便在必要时进行审计。这些文件在内部被分成多个块。块被放置在存储在本地存储磁盘中的数据节点中。

# HDFS 的出入控制

如果一个客户想要访问存储在 HDFS 系统中的任何数据，就会发出一个调用。在收到调用后，HDFS 使用 NameNodes 来提供对存储在本地磁盘的 DataNodes 中的数据的访问。

数据一旦写入，没有高级 IAM 协议就无法编辑。没有适当的协议，HDFS 不允许对客户端的任何其他访问。因此，所提供的访问是一次写入多次读取。

在这里，HDFS 建筑提出了几个挑战。

*   客户端需要获得多级权限才能访问数据。
*   重新认证任务需要取消原始会话，从而造成更多的时间浪费。
*   由于成千上万的节点到节点的交互，通信的复杂性增加了。
*   节点之间缺乏端到端的数据加密可能会威胁到数据安全。
*   为了有效管理，节点编排必须在令牌时间内完成。
*   安全审计需要广泛且难以执行。
*   由于几个 NNs 集群，日志信息审计变得很困难。

# HDFS 联邦接入代理

联合经纪人并不新鲜。许多企业使用这种解决方案进行数据访问控制。这种体系结构引入了一个中间层，它将客户端的流量重定向到代理服务器或网关进行身份验证。[访问代理](https://arxiv.org/pdf/1912.11588.pdf)是基于云的系统或内部数据中心的授权执行点。

![](img/b982ff93b1c68b4034bac282c7b047fb.png)

**图片:**HDFS 联邦代理系统([下一代大数据联邦访问控制:参考模型](https://arxiv.org/pdf/1912.11588.pdf)

这里，我们发现了一个联邦访问代理，它可以抽象远程访问调用的管理。这些调用通常是客户端为了数据访问而对 Hadoop 联合服务进行的。

该架构执行两个基本功能。

1.  Apache Knox 网关用于客户端识别和集群访问控制。
2.  执行管理员授权分配。

在这里，客户端需要在 Knox 网关得到认证。接下来，这个用于身份验证的 ClientID 被传递给 Ranger，以验证对 NNs 的访问。验证客户端调用后，将建立一个安全会话。

如果 Ranger 授权成功，它将提供访问 NNs 的证书。它将为客户端分配与每个 NameNode 交互的权限。NN 将通过分配给特定 NameNode 的 DataNodes 执行数据访问。

每次尝试访问 DataNodes 进行数据访问时，都会创建审计日志。这些日志存储在一个集中的 HDFS 存储中，以降低跨集群分布审计日志的复杂性。

# 结论:

我们发现使用联合代理可以降低 Hadoop 框架中安全性和客户端认证的复杂性。由于世界各地的企业都在大力投资数据聚合和存储，因此需要像 Hadoop 这样高效的框架。但是，由于它使用数据集群和并行处理，人们已经感受到了联合的需要。

开源框架已经见证了联邦框架的兴起，但是还有一些问题需要解决。联合代理增加了额外的身份验证层，创建了更加严格的数据安全性。它还简化了对数据的访问，而不需要太多的验证时间。因为抽象层有两个不同的授权和验证网关来快速推进流程。

这种数据访问是通过协议实现的。企业可以使用应用程序编程接口在联邦层之前创建数据访问协议。那么，你愿意冒数据被盗的风险吗？或者创建安全的数据访问、验证和存储协议。

[***联系我们***](https://www.kunshtech.com/contactus/) 立即获取 API 开发解决方案并创建安全协议！