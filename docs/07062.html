<html>
<head>
<title>Montreal’s Apartment Rental Crisis Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蒙特利尔的公寓租赁危机分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-data-science-to-look-at-montreals-apartment-rental-crisis-cffea9ee6b00?source=collection_archive---------47-----------------------#2020-05-30">https://towardsdatascience.com/using-data-science-to-look-at-montreals-apartment-rental-crisis-cffea9ee6b00?source=collection_archive---------47-----------------------#2020-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="26b2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">网页抓取、数据清理、数据可视化等等</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fbb0316eed23799da5690df2c15917c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fMy9i4WNE7dSVoPr"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/VAxCHgJvZ0g" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="c0ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在蒙特利尔找一套公寓比以往任何时候都难，当前的危机当然也没有帮助。</p><p id="1e35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2020年1月，《蒙特利尔公报》估计，该市的空置率约为1.5%(15年来最低)，租金价格在一年内上涨了约3.6%。</p><p id="0639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着7月1日(城市正式搬迁日)的到来，我决定看看目前的租赁市场，看看情况到底有多糟糕。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8c9b" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">获取数据</h2><p id="252b" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了做到这一点，我从寻找蒙特利尔公寓的主要网站Kijiji上搜集了(使用BeautifulSoup)数据。更准确地说，我搜集了大约3500份公寓出租清单。对于每一个列表，我提取了价格、公寓的大小和离市中心的距离。我不得不使用离市中心的距离(最多10公里),因为大多数公寓的实际地址是不可用的。然而，离市中心的距离应该是一个很好的指标，表明公寓是否在理想的位置。对于熟悉这座城市的人来说，这是一张10公里半径的地图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/02c6b5daa6b670c463d289a701d2aa2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*VCPpZOo8xAJoY_WSVEhJhg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:使用mapdevelopers.com制作的地图</p></figure><p id="ec66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是用于从Kijiji获取数据并创建起始数据帧的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="457b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所述，只有前80页的网站被刮，只有相对较新的清单。此外，睡眠功能用于通过暂停一段时间来控制循环的速率。我这样做是因为向网站发送太多太频繁的请求会导致网站的服务器关闭或网站变得太慢。</p><p id="c11d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我此时的数据帧快照:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/cfbde5d3916e8fb6145f222a5e20e7bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*erm7wn-wjAux8Q_1EwJNMg.png"/></div></div></figure><p id="8f74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我有了数据，它需要被清理。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="bf2e" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">清理数据</h2><p id="0b90" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">清理数据分为两步。首先，我想只保留必要的信息。这意味着公寓的大小、离市中心的距离和价格是一个简单的数字(不需要其他符号或字符)。</p><p id="7140" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第二，我删除了没有价格的公寓或没有实际价格的公寓(有些列为每月1美元，有些列为每月10，000美元，等等)。).</p><p id="9127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是用来清理数据帧的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8f30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有个小提示:对于那些不知道的人，我们在蒙特利尔用一种奇怪的尺度来描述公寓的大小。</p><p id="b75b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 1 1/2 </strong>:一个房间，一个独立卫生间。更广为人知的是工作室。</p><p id="e7f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3 1/2 </strong>:包括一个独特的客厅、卧室和厨房。更广为人知的是一居室公寓。</p><p id="5b7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后每增加一个房间，通常是一间卧室。所以4 1/2是两居室的公寓。</p><p id="62f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是最终清理后的数据框的快照，它包含了5月28日在Kijiji上搜集的总共3238个公寓列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/0c2552d4092989c5bfddf1267c2d991a.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*y1Ayr0berDTht9gVXmZuAw.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="871d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">分析数据</h2><p id="ab33" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">公寓挂牌的平均价格是每月1394美元。根据蒙特利尔公报，2019年该市的平均租金为每月1080美元。可租的和已租的之间的巨大差价！这是价格分布图。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="5a48" class="mc md it ng b gy nk nl l nm nn">import seaborn as sns<br/>sns.set(font_scale=1.2)<br/>sns.distplot(df['price'], color="red", axlabel='Prices ($)').set(title='Distribution of Prices')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e06a21bb79ba925550d900e9fd85c806.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*NVQg7UD0q18duiQki6IN_Q.png"/></div></figure><p id="1bf8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所料，在这种类型的部门中，分布是向右倾斜的。绝大多数房源都是价格在900美元到1，600美元之间的公寓，但也有一些超过每月3，000美元。</p><p id="36b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来看看城市里可供出租的公寓类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/11906ae22192569716e4b0bfaefd6c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*4wszU2Zz979uvoIFb80LwA.png"/></div></figure><p id="5eb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">令人震惊的是，97.8%的房源都是一居室、二居室或三居室公寓。这说明了这个城市目前面临的租房危机的一个主要问题。对于买不起房子的5口之家来说，找房子真的成了问题。对于那些正在寻找一个工作室并且不想为一个完整的一居室公寓付钱的人来说，这也是一个挑战。</p><p id="eb60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们按户型来看一下均价。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="cca2" class="mc md it ng b gy nk nl l nm nn">plot1 = df.groupby('size')['price'].mean().plot(kind='bar', figsize= (10,5), color='salmon',title='Average Price by Size')<br/>plot1.set_xlabel("Size",fontsize=14)<br/>plot1.set_ylabel("Price ($)",fontsize=14)<br/>plot1.title.set_size(16)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/6fd116893536a39ffc9a2fc5770633c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*3H3I_suwMY2BO04bR9zTkg.png"/></div></figure><p id="eaf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回到我刚刚提出的观点，工作室并不比一居室公寓便宜多少(1070美元对1174美元)。供应不足可能是价格如此之高的原因。对于更大的公寓，我们看到了类似的情况，因为平均5间卧室以上的公寓每月3407美元，比平均4间卧室的公寓高出约1000美元。有点让你在生第四个孩子之前想一想！</p><p id="ca00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是每种类型公寓每间卧室的价格比率:</p><ul class=""><li id="cf7a" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu nw nx ny nz bi translated">工作室:1070美元</li><li id="05d4" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">单卧室公寓:1174美元</li><li id="4beb" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">双卧室公寓:780美元</li><li id="7556" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">三居室公寓:560美元</li><li id="b2ff" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">4卧室公寓:576美元</li><li id="e9e0" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu nw nx ny nz bi translated">5间卧室以上的公寓:681美元</li></ul><p id="f443" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最好的价值似乎来自于租一个3或4卧室的公寓，这对于任何想要和平和安静的人来说显然不是理想的。不过，另一种选择要贵得多(在一套三居室公寓中，一个工作室和一个房间之间的额外租金每年超过5000美元)。</p><p id="211a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">面对如此高的价格，人们将不得不搬到离市中心更远的地方，那里的租金应该更便宜。这是根据离市中心的距离列出的平均价格。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="adc1" class="mc md it ng b gy nk nl l nm nn">plots=sns.lineplot(x=df["distance_center"], y=df["price"], color='red').set(title='Price by Distance to Downtown')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/f512a83af99b2994b7f100e461910cba.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*8viSjxT93g5HnDlbZTg-AQ.png"/></div></figure><p id="534e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们确实看到了一个明显的趋势，离市中心越远，公寓就越便宜，除了9公里以外。这可能是因为距离市中心约9公里的地方是Petite-Italie、Villeray和Mont-Royal等社区，都是非常理想的居住场所。</p><p id="afae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们把它们放在一起。这是一张热图，按照到市中心的距离和面积显示了公寓的价格。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7a18" class="mc md it ng b gy nk nl l nm nn">some_flats = df[(df['price']&lt;3000) &amp; (df['size']!= 7.5)]     <br/>heat = some_flats.pivot_table("price", "size", "distance_center")<br/>sns.heatmap(heat).set(title='Price Heatmap')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/b3197908536cef9e1ba51ad41c5540ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*7DfXPh2AhfpH0uxt2hBySg.png"/></div></figure><p id="4e4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再说一遍，数据很清楚。我们看到大公寓或工作室的供应不足，因为经常在离市中心一定距离的地方找不到一个房源(地图上的白色矩形)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="8e77" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="6037" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在我看来，从提供的数据中可以得出三个结论:</p><ol class=""><li id="7a82" class="nr ns it lb b lc ld lf lg li nt lm nu lq nv lu oh nx ny nz bi translated">在蒙特利尔，一居室或两居室的公寓仍然随处可见，价格相对正常(与其他类型的公寓相比)。</li><li id="2f93" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu oh nx ny nz bi translated">小型或大型公寓(工作室和4间以上卧室)的供应似乎明显不足，这可能会推动价格上涨，尤其是在靠近市中心的地方。</li><li id="61bd" class="nr ns it lb b lc oa lf ob li oc lm od lq oe lu oh nx ny nz bi translated">最好的价值来自于租一个3或4卧室的公寓，因为小的或大的会更贵。</li></ol><p id="effe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你的阅读！</p><h2 id="aa77" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">参考</h2><p id="2fe7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><a class="ae ky" href="https://montrealgazette.com/news/local-news/mayor-addresses-housing-crisis" rel="noopener ugc nofollow" target="_blank">https://Montreal gazette . com/news/local-news/mayor-addresses-housing-crisis</a></p></div></div>    
</body>
</html>