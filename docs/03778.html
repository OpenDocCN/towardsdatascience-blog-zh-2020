<html>
<head>
<title>The Makings of a Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模块的制作</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-makings-of-a-module-5990100216d4?source=collection_archive---------37-----------------------#2020-04-08">https://towardsdatascience.com/the-makings-of-a-module-5990100216d4?source=collection_archive---------37-----------------------#2020-04-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3c65" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实践 OOP 开发以产生快速线性模型并应用脊和套索正则化</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/07baeaed84b592a208cab67bbbba946b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K08uIjz9cuEbAUe08umj_w.jpeg"/></div></div></figure><h2 id="23bb" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">提示和问题</h2><p id="06ed" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">最近在我的数据科学训练营完成了一个关于使用面向对象编程的讲座后，我选择实践这些原则，并将它们应用到一个工具中，我可以在作为数据科学家的工作中继续使用它们。我观察到这个项目旨在解决的三个问题是:</p><ul class=""><li id="38b7" class="mg mh iq lp b lq mi lt mj la mk le ml li mm mf mn mo mp mq bi translated">新手身份导致方向不明</li><li id="a30b" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">常见步骤的重复代码(导入、拆分等)</li><li id="7703" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">由于常见的印刷或语法错误而导致失败的倾向</li></ul><p id="fe5b" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">这个模块将允许我“聪明地工作，而不是努力地工作”，并尽可能地简化数据清理和 EDA 阶段。</p><h2 id="0485" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">假设</h2><p id="7d82" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">我的 qdtools，或“快速和肮脏”模块最初将包含线性回归方法以及脊和套索正则化技术。它将在使用过程中为用户提供反馈和指导。正如所料，该模块将严重依赖于现有的模块和来自熊猫，sklearn 和 statsmodels 的软件包，并将主要用于为我自己的需求定制的“香草”建模。最后，该模块将需要不断开发和增强，并将是合作的开源。</p><h2 id="32cd" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">初速电流状态</h2><p id="58de" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">处理线性回归数据集时，数据科学家必须遵循一些定义好的步骤(简而言之):</p><ul class=""><li id="f07c" class="mg mh iq lp b lq mi lt mj la mk le ml li mm mf mn mo mp mq bi translated">上传并快速查看数据集</li><li id="f65f" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">为培训和测试定义目标和分割数据集</li><li id="13e8" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">探索原始数据</li><li id="c4f8" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">清理数据集</li><li id="9ea7" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">运行模型并分析</li></ul><p id="1bfd" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">或者，像在 CRISP-DM 模型中一样，进行数据准备、建模和评估(根据需要重复)。</p><p id="9b67" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">特别是在线性模型中，我发现这个过程的一些步骤可以包装在一个函数中，以减少时间编码和限制错误，从导入模块和平面文件开始</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/3225d24718ce8647435dece9f24c5853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n40cWd2d-_Vu507zCWLqQQ.png"/></div></div></figure><p id="efa7" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">分配目标和特征，</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/b9a360fc9a8f4342dd2196f533e0d271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*5KswT_B6HNzwUJbi1YKoGw.png"/></div></figure><p id="8221" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">分割数据集</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/1189d6e6c6a37d6e5599789f66b96535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GqUtEaqzE_lCsCvFNkqh-g.png"/></div></div></figure><p id="6d8c" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">接下来是虚拟或一次性编码、缩放和标准化以及建模。我们将看看 qdtools 如何帮助我们加速这一过程。</p><h1 id="e193" class="nc ks iq bd kt nd ne nf kw ng nh ni kz jw nj jx ld jz nk ka lh kc nl kd ll nm bi translated">使用 qdtools</h1><p id="c274" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated"><em class="nn">免责声明:本演示进展很快，因为我们已经熟悉了 kc_house_data 数据集</em></p><p id="2c8c" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">首先，qdtools.py 文件位于 site-packages 文件夹中，所以我不需要在 jupyter 笔记本的工作目录中有一个副本。此时，唯一要实例化的类是 LinearVanilla</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/2fa2c4d2746ca07b7c1c9dca86be789d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYiPrdlui13MehlwD1KMbQ.png"/></div></div></figure><p id="4d7f" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">非常好。用户甚至会收到一个确认消息，确认对象已经创建，并指示用户尝试 help()方法。我们去看看。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/1679e3ea7b4fef916b3cfafcfbc748ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l01LUdsNsI_QLhkKichiMw.png"/></div></div></figure><p id="102d" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">这很有帮助！好了，让我们直接跳过 kc_house_data.csv。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/3572b099bd32301a017b960760d51912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Jd1JYzTJ_U-qPFGvePkbg.png"/></div></div></figure><p id="9c90" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">又来了，多么健谈。我们通常会查看数据帧，并使用。info()和。描述()，但是让我们看看 qd_info_df()方法能向我们展示什么</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5fc7f9afff19c9744c843f3887999385.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*dNrWmA7xBVL8mc3zNbom0w.png"/></div></figure><p id="097e" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">哎呀，这是一个很大的信息扔在那里。但是，注意到什么不同了吗？这不仅是一个函数调用的 info()和 describe()输出，而且它们被稍微修改以包含一些潜在有用的信息。在这种情况下，我们可以在 1 和 99%看到一些额外的分位数数据；这可能会派上用场...</p><p id="ba09" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">就现在。仔细观察这个数据集，我发现有一栋房子有 33 个卫生间，但 99%的房子只有不到 6 个。让我们使用 cut99()方法删除一些异常值(在其他列中也是如此)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/7a87c4481f61aac43288509a6866659b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6CiwqjGe8mAfEtTILGXOw.png"/></div></div></figure><p id="6364" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">注意:你可能不想(阅读，你可能被告知你不应该)以这种方式或根本不想剔除异常值，但对我来说，这是一个学习的经历，包括<em class="nn">能力</em>来快速轻松地做到这一点。</p><p id="69e0" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">现在，让我们分割数据，并设置一个分类特征，邮政编码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/30817a9a8f5975865814b9bafea3ea15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*-zLAsz70e2V-U9pEEFyH4w.png"/></div></figure><p id="77e4" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">使用方法的两行简短代码。我看到自己在未来会经常使用这种方法！在这里看不到，但是可以像使用 test_train_split()一样操作 test_size 和 random_state，target_and_split()就是从 test _ train _ split()派生出来的。在我们运行我们的模型之前(已经？！)，让我们删除一些我们现在不想包含在普通模型中的列，同时，让我们处理一些空值</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/34b93763554ad373e030607ed76709fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z1m9o3Xcf8tWc9G6ACluEw.png"/></div></div></figure><p id="a497" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">信不信由你，我们已经准备好运行一些模型。对于线性香草，我们运行两种方法来获得统计模型 OLS 和 sklearn 线性回归，岭和套索分数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/d2ac756e21d8aff64c43ca971522a6ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*YCZo3Rq04bvfpoMP_y8hTA.png"/></div></figure><p id="edbd" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">我们可以看看我们的训练成绩，</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/52959024a0346d156f0f36f1dbaace8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*wytU3c9K6IfpJxcOBY3HYw.png"/></div></figure><p id="202b" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">我们可以访问我们的 OLS 摘要作为我们对象的属性</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/dc083bfa71d45bbd82a44038cb6d5121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*LtYTdEyDoRozBPC6mFNo4w.png"/></div></figure><p id="5b04" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">我们刚刚在一个原始数据集上运行了三个“模型”(对此我们很熟悉),得分为 0.83…非常好！我们甚至使用了一个分类特性，但是不必处理 get_dummies()的编码。此外，我的 R 为 0.87 的原始项目包括了我们在这里没有探讨的工程特性。不幸的是，截至这篇博客发表之日，我还没有对这些错误的分析。</p><h2 id="bf6a" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">我学到了什么</h2><p id="67f3" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">这个模块的开发比预期的更具挑战性(也更耗时)。吸取的第一个教训是预先确定模块的范围；我发现自己正在庆祝我之前设计的新代码块的成功执行，却发现它破坏了模块的一个关键功能。</p><p id="1851" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">一些更具技术性的发现包括在模块内放置导入(在声明类之前)，高效的控制流，</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/d8f97d708a7abd8894485cd6399f8ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hTnjMLv6S01v2bSviGcgfw.png"/></div></div></figure><p id="180f" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">以及在哪里存储？py 文件，这样该模块可以在系统范围内使用(参见<a class="ae nz" href="https://www.digitalocean.com/community/tutorials/how-to-write-modules-in-python-3" rel="noopener ugc nofollow" target="_blank">这篇有用的文章</a>)。我还获得了使用文本编辑器和调试的美妙体验。总而言之，看到我的代码变得栩栩如生，并为自己创建了一个我可能会经常使用的工具，这是令人兴奋的。</p><h2 id="433d" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">局限性和未来工作</h2><p id="899d" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">我不能夸大的是，我意识到这个模块对于许多数据科学家来说可能并不实用，它主要是 OOP 中的一个实践。qdtools 1.0 是一个激动人心的有用的模块，它有一些很棒的回归工具，但是它也不是没有缺点。</p><ul class=""><li id="364a" class="mg mh iq lp b lq mi lt mj la mk le ml li mm mf mn mo mp mq bi translated">我希望该模块适用于任何数据集，因此需要更健壮的数据清理方法(或控制流)。</li><li id="1340" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">特征只能被删除或虚拟编码，因此工程特征不在模块范围内。</li><li id="6660" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">可视化；我的目标是包括一些快速和肮脏的 EDA 方法(sns pairplots，相关矩阵)</li><li id="44d8" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">我期望在模块中实现 OneHotEncoder</li><li id="e6d8" class="mg mh iq lp b lq mr lt ms la mt le mu li mv mf mn mo mp mq bi translated">“抬头显示”的潜在高价值功能，在建模前突出显示您的功能数据的关键点，如有多少唯一值的计数为 1，以及(可能)基于算法的推荐器，用于确定某一列是否应该分类，甚至是否应该删除；这将使用 OLS 汇总中的 p 值。</li></ul><p id="4a27" class="pw-post-body-paragraph ln lo iq lp b lq mi jr ls lt mj ju lv la mw lx ly le mx ma mb li my md me mf ij bi translated">在添加更多功能之前，我将花时间创建完整的文档和一个有组织的<a class="ae nz" href="https://github.com/a-woodbury/qdtools" rel="noopener ugc nofollow" target="_blank">库</a>，这样任何人都可以使用并为这个项目做出贡献。</p></div></div>    
</body>
</html>