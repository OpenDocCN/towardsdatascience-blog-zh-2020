<html>
<head>
<title>Run Your Local Database in Docker! 🐳</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Docker中运行您的本地数据库！🐳</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/run-your-local-database-in-docker-3e7ed68a50f3?source=collection_archive---------7-----------------------#2020-05-16">https://towardsdatascience.com/run-your-local-database-in-docker-3e7ed68a50f3?source=collection_archive---------7-----------------------#2020-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="55b0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">用于本地开发的Docker数据库映像:</h2><div class=""/><div class=""><h2 id="7a94" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何使用docker建立本地开发数据库？快速简单。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/5ec4152bf47f53208bde8d6bb650049e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JolEFQvIL-oWvsz0"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@ishant_mishra54?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ishant Mishra </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="3736" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当建立一个新项目时，有时会有一个全面的先决条件列表，以便能够运行一个项目。在这个简短的教程中，我们将使用docker映像建立一个本地数据库。例如，我们将使用PostgreSQL，但是您可以自由选择您的数据库。</p><p id="a2b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">先决条件:</strong>你首先也是唯一需要的就是Docker。我下载了<a class="ae lh" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a>以便在我的mac上开始使用(你可以自由使用你喜欢的任何Docker安装)。</p><p id="9de6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们开始吧！🙌</p><h1 id="bed9" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">✌️My 3个主要原因</h1><p id="b5b2" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我使用docker数据库映像进行本地开发的三个主要原因，以及我认为您也应该这样做的原因:</p><ol class=""><li id="b7f6" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated">它使本地开发设置变得容易。一个简单的抽象，使用一行设置来设置数据库！</li><li id="0a7b" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">它不要求您在计算机上安装任何数据库(或数据库的特定版本)。</li><li id="25a0" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated">它隔离了数据库环境。它允许我同时运行多个版本和实例，而不会遇到麻烦。</li></ol><p id="97ad" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我通常将它作为选项添加到我的<code class="fe np nq nr ns b">README</code>文件的项目设置中。然后人们可以决定做什么——要么用手动方式做，要么用简单的方式做😄</p><p id="18ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">您并不局限于使用PostgreSQL映像</strong> — <a class="ae lh" href="https://hub.docker.com/search?category=database&amp;source=verified&amp;type=image" rel="noopener ugc nofollow" target="_blank"> docker拥有所有常见数据库的数据库映像</a>，如Redis、MySQL、Oracle等。找到你的最爱。</p><h1 id="427b" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">让我们装运那个集装箱吧！</h1><p id="e9d6" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">我们将使用Postgres映像启动一个新的docker容器来运行数据库:</p><pre class="ks kt ku kv gt nt ns nu nv aw nw bi"><span id="6cdc" class="nx mf it ns b gy ny nz l oa ob">$ <strong class="ns jd">docker run --name my_postgres -p 5432:5432 -e POSTGRES_PASSWORD=postgres postgres</strong></span></pre><p id="3728" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这就对了。我们基本上完成了——在一行中，您已经设置好了所有的东西😄 🤷‍♀(如果你没有安装任何图像，docker会问你是否要下载)。让我们看看我们刚刚创建的内容:</p><ul class=""><li id="e6e7" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md oc nh ni nj bi translated"><code class="fe np nq nr ns b">--name my postgres</code>创建一个名为<code class="fe np nq nr ns b">my_postgres</code>的docker容器。</li><li id="582d" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">-p</code>是设置端口的标志。<code class="fe np nq nr ns b">5432:5432</code>将内部docker端口映射到外部端口，这样我们可以有一个从外部到docker映像的门。端口<code class="fe np nq nr ns b">5432</code>是一个Postgres特定的端口——如果使用另一个数据库映像，您可能需要更改它。</li><li id="d4b8" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">-e</code>是环境变量的标志。我们加上了<code class="fe np nq nr ns b">POSTGRES_PASSWORD</code>。</li><li id="e0f6" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated">最后一部分<code class="fe np nq nr ns b">postgres</code>是我们将使用的docker图像(如果您使用另一个数据库，您应该更改它)</li></ul><p id="e4f5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在您有了一个名为<code class="fe np nq nr ns b">my_postgres</code>的docker容器，它在端口5432上运行PostgreSQL数据库。数据库将<code class="fe np nq nr ns b">name</code>、<code class="fe np nq nr ns b">username</code>和<code class="fe np nq nr ns b">password</code>设置为<strong class="lk jd"> postgres </strong>。</p><h1 id="212e" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">👩‍💻一些细节</h1><p id="4182" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">好了，让我们继续看一些docker标志和命令:</p><ul class=""><li id="5a84" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md oc nh ni nj bi translated"><code class="fe np nq nr ns b">-d</code>如果你想在后台运行你的数据库作为守护进程。如果没有<code class="fe np nq nr ns b">d</code>标志，您需要让您的容器一直在一个单独的终端中运行，以访问您的数据库。您可以通过运行<code class="fe np nq nr ns b">docker start &lt;docker_name&gt;</code>或<code class="fe np nq nr ns b">docker stop &lt;docker_name&gt;</code>来启动和停止容器。</li><li id="4e27" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">docker postgres:latest</code>如果你想确保使用最新的Postgres镜像。</li><li id="4107" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">docker pull postgres</code>拉最新的Postgres图片。</li><li id="f4da" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">docker images</code>列出您电脑上的所有图像。</li><li id="df83" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">docker ps -a</code>查看所有创建的容器(具有指定端口的容器是运行中的容器)。</li><li id="09af" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><code class="fe np nq nr ns b">docker rm &lt;docker_ID&gt;</code>或<code class="fe np nq nr ns b">docker rm &lt;docker_name&gt;</code>移除码头集装箱。</li><li id="3ce4" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated">从docker容器中清除所有数据库数据。即使您有几个docker容器在运行，您仍然会访问相同的数据，因为它被写入相同的位置。</li></ul><h1 id="d54d" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">💅哪里可以欣赏我的新数据库？</h1><p id="2b12" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">您可以选择您喜欢的数据库GUI工具并连接到您的数据库。我喜欢用<a class="ae lh" href="https://dbeaver.io/" rel="noopener ugc nofollow" target="_blank"> <em class="od"> DBeaver </em> </a> <em class="od">。</em>使用以下命令连接到我们在Docker容器中运行的新创建的数据库:</p><ul class=""><li id="b97f" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md oc nh ni nj bi translated"><strong class="lk jd">数据库名称:</strong> postgres</li><li id="5d07" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><strong class="lk jd">数据库用户:</strong> postgres</li><li id="c528" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><strong class="lk jd">数据库密码:</strong> postgres</li><li id="a679" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md oc nh ni nj bi translated"><strong class="lk jd">端口:</strong> 5432</li></ul><p id="5193" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您喜欢在终端中使用数据库，您可以在docker容器中输入以下命令来访问数据库(我们的docker在本教程中被命名为<strong class="lk jd"> my_postgres </strong>):</p><pre class="ks kt ku kv gt nt ns nu nv aw nw bi"><span id="5aea" class="nx mf it ns b gy ny nz l oa ob">$ <strong class="ns jd">docker exec -it &lt;DATABASE_NAME&gt; bash</strong></span></pre></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><p id="6f16" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">🎉<strong class="lk jd">快乐编码</strong> <br/>🐳你会开始使用docker数据库镜像来进行本地设置吗？</p></div></div>    
</body>
</html>