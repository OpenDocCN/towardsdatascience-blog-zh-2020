<html>
<head>
<title>R Tutorial: Analyzing COVID-19 Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">r教程:分析新冠肺炎数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/r-tutorial-analyzing-covid-19-data-12670cd664d6?source=collection_archive---------9-----------------------#2020-03-24">https://towardsdatascience.com/r-tutorial-analyzing-covid-19-data-12670cd664d6?source=collection_archive---------9-----------------------#2020-03-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="abb7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在现实世界中使用R的介绍</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c979684e8d325177e6bfe954bdb1e0aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UofAibMtS22EEgyyCYZGbw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://pixabay.com/photos/entrepreneur-idea-competence-vision-1340649/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="2bbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这学期我在耶鲁上计量经济学导论课，我们利用R和统计学来分析各种数据集。因此，当我在家与自己保持社交距离时，我认为将我在新冠肺炎数据集上学到的一些技术应用起来会很有趣。</p><p id="c33e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在Kaggle 上使用了<a class="ae kv" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/version/25#COVID19_line_list_data.csv" rel="noopener ugc nofollow" target="_blank">这个页面，发现了一个CSV数据集，你可以在这里</a>获得<a class="ae kv" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/download/uMF6QnlPB7ScS6BxTw1I%2Fversions%2Fe03zBLHwzT7b8fR01UTk%2Ffiles%2FCOVID19_line_list_data.csv?datasetVersionNumber=25" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8d90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看一下数据:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/7fcb4b417392f0d307742465bf35f569.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gl19hf2afTJyCHOe5HkQ0g.png"/></div></div></figure><p id="3abf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有大约1000例新冠肺炎病例的数据。我们可以看到每个感染者的年龄，挡泥板，他们是否恢复或死亡，以及其他许多事情。对于本教程，我们将只看其中的几个专栏。让我们用这个CSV文件创建一个文件夹，并启动RStudio。</p><p id="386e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在RStudio中，要导入数据集，我们将转到文件-&gt;导入数据集-&gt;从文本(基本)。找到您的CSV文件，然后单击“导入”您将在RStudio的控制台中看到这样一行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="6a13" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将把这一行复制到我们的主R脚本中，我将把它保存为脚本。与我们的CSV文件放在同一个文件夹中。</p><p id="0ed2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了方便起见，我将把数据框变量重命名为“data”我还将清除所有现有的变量，导入一个名为Hmisc的库，并使用它的describe函数来更好地理解我们的数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="a340" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您运行这段代码，您将在控制台中看到大量信息。例如，我们有1085行。如果我们查看死亡部分，我们会看到有14个不同的值。这可能看起来有点奇怪，但是死亡一栏要么是0(没有死亡)，要么是1(没有死亡)，或者仅仅是患者的死亡日期。这很难做到，因为我们想要全是0和1。</p><p id="0598" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们通过向数据集添加一个death_dummy列来解决这个问题，它只包含值0和1。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="8957" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还计算了数据集的死亡率，运行后结果是5.8%。在本教程的第一部分，我们将分析死亡和未死亡的人的年龄。</p><h1 id="b1f0" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">年龄</h1><p id="b430" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">媒体声称新冠肺炎的老年人比年轻人更容易死亡。这是真的吗？让我们用数据集检查一下。首先，我们将我们的数据集分成活着的患者和已经去世的患者，并比较平均年龄。这段代码将为我们做这件事:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="30e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，na.rm=TRUE意味着跳过特定列(在本例中为age)为na(或没有值)的行。运行这个程序后，我们得到存活者的平均年龄是48岁，而死亡的平均年龄是68.6岁。</p><p id="5eed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的，所以数据确实显示在我们的样本中，那些死去的人年龄更大。但是这对于所有人来说都是真的吗？我们有多大把握这是真的？</p><p id="da7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用t.test命令来衡量我们的信心，看看我们是否可以信任我们的方法。在这种情况下，我们将使用95%的置信区间。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="4eba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个简单的命令非常强大。注意，我们给出了活着的病人和死去的病人的年龄。我们来分析一下输出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/972e8731117aa33c85f86aa401d2b4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_VaJkIMIIMWtKDsOYDZmgg.png"/></div></div></figure><p id="05eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看置信区间，我们可以95%肯定地说，已经死亡和没有死亡的患者之间的年龄差异是从16.7岁到24.3岁。现在，看看p值。快0了。这意味着，在零假设(即两组的年龄相等)下，我们有大约0%的机会从这个样本中随机获得这样的极端结果。出于这个原因，我们可以合理地拒绝零假设(在0.05的常规显著性水平下)，并说死于新冠肺炎病的人确实比没有死于该病的人更老。现在，我们来看看性别！</p><h1 id="3339" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">性别</h1><p id="8da3" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">这个会很像。我们想知道男性和女性的死亡率是否相似。让我们再次分割数据并进行t检验:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="5d24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将原始数据分成两组。计算平均值后，我们看到数据集中男性的死亡率为8.5%，而女性为3.7%。这真是出乎意料。还是那句话，我们能相信这个数据吗？下面是t.test输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/e5f3e9377337c5ec67b53e9d5042eb5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HP1h515aC08okQu91oefkg.png"/></div></div></figure><p id="8961" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们95%的置信区间表明，平均死亡率将比女性高1.7%至7.8%。p值为0.002意味着我们可以拒绝男性和女性死亡率相同的无效假设，因为0.002 &lt; 0.05.</p><p id="1ed3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">There have been articles written that men indeed do have a higher coronavirus death rate. <a class="ae kv" href="https://www.cnn.com/2020/03/24/health/coronavirus-gender-mortality-intl/index.html" rel="noopener ugc nofollow" target="_blank">这里的</a>是其中之一，如果你感兴趣的话。</p><h1 id="ee5a" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结论</h1><p id="5d0e" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">正如您所看到的，R帮助我们非常容易地对重要的数据集进行统计分析。感谢您的阅读！</p></div></div>    
</body>
</html>