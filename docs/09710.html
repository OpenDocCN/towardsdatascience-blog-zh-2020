<html>
<head>
<title>Cluster analysis on stock selection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">股票选择的聚类分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/clustering-analysis-on-stock-selection-2c2fd079b295?source=collection_archive---------12-----------------------#2020-07-10">https://towardsdatascience.com/clustering-analysis-on-stock-selection-2c2fd079b295?source=collection_archive---------12-----------------------#2020-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ab24" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">时间抛开复杂的时间序列模型，简单的基本面分析也可以帮助赚钱！！！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b412c272586be7010f36cb3cf4f05da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*af_20iT4h1oGbU2O"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="e004" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">背景</h1><p id="1b98" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di"> H </span>你有没有厌倦过通过查看数百个财务比率来选择一只股票？或者你已经厌倦了打磨你的技术分析技巧或改进你的时间序列模型来更好地预测价格？如果答案是肯定的，那你来对地方了。</p><p id="1d57" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">在本文中，我们将通过一个实验来看看不同维度的财务比率是否真的增加了股票选择的价值。在这个过程中，我们还将看到聚类分析如何帮助我们摆脱财务指标的海洋。</p><p id="07e1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">在此之前，我还将向您展示<strong class="lt iu"> (1)下载股票的历史财务比率、</strong>和<strong class="lt iu"> (2)股票的每日价格数据</strong>，这对许多在不同项目中研究股票数据的人来说非常有用。</p><p id="c1e6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">下面所有代码的原文，你可以在这里查阅我的 Github 链接<a class="ae ky" href="https://github.com/ngaiyin1760/Cluster-analysis-for-stock-selection" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="3f70" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(1)下载股票的财务指标</h1><p id="e7e4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated">首先，我们将使用一个名为<strong class="lt iu"> <em class="nb">基础分析的库。</em> </strong>关于这个库的详细信息，请参考网站<a class="ae ky" href="https://pypi.org/project/FundamentalAnalysis/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="dad4" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">为了能够使用这个包，我们需要一个来自<a class="ae ky" href="https://financialmodelingprep.com/developer/docs/" rel="noopener ugc nofollow" target="_blank"> FinancialModellingPrep </a>的 API 密匙，并按照那里的说明获得一个<strong class="lt iu"> <em class="nb">免费的</em> API 密匙</strong>。请注意，虽然没有时间限制，但这些密钥仅限于每个帐户 250 个请求。所以我强烈建议大家将下载的数据输出为 excel 文件以备将来使用。否则很容易超过限制。</p><p id="9bd1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">并且由于这个限制，我<strong class="lt iu">将实验中的选股范围设定为下面列出的 97 只股票，都是纳斯达克 100 指数</strong>的成份股。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="677b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">上面的代码会生成两个 excel 文件，<strong class="lt iu"><em class="nb">(a)key _ metrics . xlsx</em></strong>和<strong class="lt iu"><em class="nb">(b)financial _ ratios . xlsx</em></strong>，每只股票在一个单独的表中。这两个文件都存储了过去 10-20 年的各种财务指标，具体取决于公司上市的时间。在后面的步骤中，我们将把它们与收益和价格波动数据结合在一起。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/b23c70edc4b427d6aa8014e8d398b0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*WF5er8oZXzMLsinyAktxJQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">MSFT 关键指标数据的捕获图像</p></figure><h1 id="1064" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(2)下载股票价格数据</h1><p id="f455" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated">让我们下载价格数据。由于上面的包对请求配额有限制，我们将切换到另一个自由库<strong class="lt iu"> <em class="nb"> yfinance。</em>T13】</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="cb3f" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">上面的代码将下载股票行情表中所有股票的每日价格数据。并选择收盘价来表示价格，输出为 excel 文件，<strong class="lt iu"> <em class="nb"> price.xlsx </em> </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e258e25cffccac5335c16fdede7305ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*ODNa3C3TgVr7Eb9z7ONXUw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">价格数据的捕获图像</p></figure><h1 id="3f1d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(3)将所有数据结合起来使用</h1><p id="8fee" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di">最后</span>我们想<strong class="lt iu">将准备好的三个 excel 文件合并成一个文件，每个文件在所选期间(2017–2019)</strong>内保存一年。我不打算在这里赘述细节，因为这些都只是使用熊猫和 numpy 的一些基本技巧。本节原代码请参考 Github 链接<a class="ae ky" href="https://github.com/ngaiyin1760/Cluster-analysis-for-stock-selection" rel="noopener ugc nofollow" target="_blank">此处</a>中的<strong class="lt iu"><em class="nb">cluster _ stocks _ data . py</em></strong>。</p><p id="923f" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">尽管如此，我还是想提到一些非常有用的关键技巧，即使是在你从事其他项目的时候。</p><p id="3cec" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb"> (a) dataframe.at[index，column name]</em></strong><em class="nb">——为了避免混淆 iloc 或 loc 或任何其他类似的函数，您可以尝试使用函数</em> <strong class="lt iu"> <em class="nb">”。在"</em> </strong> <em class="nb">，</em> <strong class="lt iu"> <em class="nb"> </em> </strong> <em class="nb">这些直接指的是 dataframe 内的单个单元格。并且可以很容易地用等号设置它的值。</em></p><p id="1531" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"><em class="nb">【b】数据帧。t</em></strong><em class="nb">—如果要交换行和列，转置数据帧。通过应用此功能</em> <strong class="lt iu"> <em class="nb">。T" </em> </strong> <em class="nb">，那么列名就会变成索引，反之亦然。</em></p><p id="8f00" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"><em class="nb">(c)PD . concat()</em></strong><em class="nb">—平行(水平)组合两个数据帧。</em></p><p id="6c05" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"><em class="nb">(d)data frame . fillna(value = N)</em></strong><em class="nb">—用特定值的 NaN 填充单元格。</em></p><p id="d20c" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">经过繁琐的程序后，最终产品将是三个 excel 文件(2017 年、2018 年和 2019 年)。每个都存储特定年份股票行情表中每只股票的回报、价格波动和其他财务指标的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/b43b02ad43cf7ed28b6ac235d7d07edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bWaqqhW0g_bP-BEFN9aA3w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">2017 年最终数据集的捕获图像</p></figure><h1 id="10be" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(4)实验</h1><p id="008f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di"> F </span>最后，我们可以回到本文的主要内容——(1)<strong class="lt iu">检验</strong> <strong class="lt iu">不同维度的财务比率是否真的为选股增值，</strong>和<strong class="lt iu"> (2)看看聚类分析如何帮助我们摆脱财务指标的海洋。</strong></p><p id="9113" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">与其一行一行地检查冗长的代码，我们不如一起检查这个想法。但是，我还是会举例说明一些关键部分的代码。对于下面介绍的金融概念，如果你有进一步的兴趣，可以参考<a class="ae ky" href="https://www.investopedia.com/" rel="noopener ugc nofollow" target="_blank"> Investopedia </a>了解更多详情。本节代码请参考 Github <a class="ae ky" href="https://github.com/ngaiyin1760/Cluster-analysis-for-stock-selection" rel="noopener ugc nofollow" target="_blank">链接</a> <em class="nb">中的<strong class="lt iu"><em class="nb">cluster _ stocks _ analysis . py</em></strong>。</em></p><p id="fd51" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">第一步:选择一组有代表性的财务指标。</em> </strong>在这个实验中，我选择了以下内容，旨在从不同维度捕捉一家公司的表现或能力。</p><p id="786d" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">负债权益比率——公司的杠杆比率</strong></p><p id="b112" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">股息收益率——公司支付给股东的持有其股票的金额除以当前股价</p><p id="d695" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">企业价值(EV) / EBITDA — </strong>一个常用的倍数来确定公司的价值</p><p id="5176" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">净债务与 EBITDA 比率— </strong>表明公司减少债务的能力</p><p id="0304" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">净利润率— </strong>净收入占收入的百分比是多少</p><p id="1ac6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">营业利润率— </strong>在支付可变生产成本(如工资和原材料)后，支付利息或税之前，公司从一美元销售中获得的利润</p><p id="cc74" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">资产回报率— </strong>通过确定一家公司相对于其总资产的盈利能力，表明该公司利用其资产的情况</p><p id="635a" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">第二步:根据以上选择的财务指标进行聚类分析。</em> </strong></p><p id="96be" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">不同的人在选择股票时有不同的偏好。有的关心公司盈利能力，有的关心股票是否稳定分红。但是如果我们想了解整体性能呢？那么就很难断定一只股票一定比另一只好，特别是每一个财务指标都代表不同的东西，可能有上百个指标。</p><p id="f8b2" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">在这种情况下，聚类分析可能是拯救我们的一种方法。<strong class="lt iu">聚类帮助我们根据财务指标所代表的特征将相似的股票分组在一起。</strong></p><p id="06f5" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">在本实验中，我们将应用一种最常用的方法——<strong class="lt iu">系统聚类，用自底向上的方法、欧几里德距离和沃德方法来计算相似度</strong>。对于层次聚类的详细解释，这篇<a class="ae ky" rel="noopener" target="_blank" href="/understanding-the-concept-of-hierarchical-clustering-technique-c6e8243758ec">文章</a>给出了一个很好的教训。</p><p id="55db" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">(一)标准化</em> </strong></p><p id="b3e8" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">每个财务指标都有自己的标度</strong>。例如，EV / EBITDA 可以始终高于资产回报率。因此，为了防止这种规模差异导致无与伦比的权重和不可靠的结论，我们必须首先对数据进行标准化。我们可以通过下面的一行代码简单地做到这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="6c3f" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb"> mean() — </em> </strong>计算列内数值的平均值</p><p id="bf8b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb"> std() — </em> </strong>计算一列内数值的标准差</p><p id="c4ab" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">(二)执行层次聚类分析</em> </strong></p><p id="5ce9" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">将数据标准化后，我们可以使用一个名为<strong class="lt iu">agglomeveclustering</strong>的库来执行聚类，这个库的名字意味着自底向上的方法。</p><p id="b99b" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">为了可视化聚类结果，我们将应用<strong class="lt iu">树状图，</strong>，它是一个<strong class="lt iu"> </strong>树形图，记录了合并或拆分的顺序。但是，请注意，最终形成的集群数量完全基于您的判断。如果聚类太多，分类可能会太细。如果太少，股票可能无法很好地分类。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b3c4" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">树状图绘制如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4b8ff4a1ee97b4bf3eddf4ac3b17ae69.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*wmfsu9dg96c0m3vW-w8Udw.png"/></div></figure><p id="ad9c" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从树状图中，我们可以看到<strong class="lt iu">可能有 13 个星团。</strong></p><p id="adee" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">有趣的是，四只股票本身形成了独立的集群。</p><p id="1ac7" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">基于该选择，我们接下来对数据集 2017、<strong class="lt iu"> <em class="nb">应用函数<strong class="lt iu">凝聚聚类</strong>，通过将 n_clusters 设置为 13，将亲和力设置为欧几里德距离，将链接设置为沃德方法</em> </strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="7e54" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">为了说明这 13 个星团的特征，我们可以画一个线图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/16a77054f2998512f3a073467c8cffc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*hCHBG4fSkXoiX6jb6dHq6g.png"/></div></figure><p id="94a1" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从折线图上我们可以看到，2017 年有四个非常有特色的星团，实际上它们都是单独形成的。它们是:</p><p id="dccf" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">(i) <strong class="lt iu">【灰线】——高净债务/EBITDA 比率和 EV/EBITDA 比率</strong>，这意味着公司偿还债务的能力相对较低，基于其较弱的盈利能力对其进行了高估值，这可能意味着其被高估。</p><p id="50af" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">(二)<strong class="lt iu"> IDXX(深蓝线)—负负债率</strong>，主要是公司 2017 年权益余额为负。</p><p id="aba6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">(三)<strong class="lt iu"> DXCM(浅蓝色线)—负 EV / EBITDA 比率，</strong>因 2017 年 EBITDA 为负。</p><p id="1967" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">(iv) <strong class="lt iu"> VRTX(橙色线)——负净债务与 EBITDA 比率</strong>，因其 2017 年净债务为负值。</p><p id="b9e4" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">我们不打算调查公司业绩的细节，这可能需要为每只股票单独写一篇文章。我只是想给大家展示一下<strong class="lt iu">在选取的财务指标中，聚类可以帮助我们将具有相似特征的股票分组在一起，同时也可以检测出一些离群值。</strong></p><p id="4102" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">第三步:根据聚类结果构建投资组合，并与不借助聚类构建的投资组合进行比较</em> </strong></p><p id="9a27" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">截至 2017 年底，13 个集群的平均绩效表如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/13d8ce600807e202f504f13e5e057622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ky8n_aimBMfw0bWxwToo7g.png"/></div></div></figure><p id="ed6c" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu">在进行聚类分析后，需要一个标准来帮助做出投资组合构建的决策。</strong>在这个实验中，<strong class="lt iu">收益价格波动率</strong>将是唯一遵循的标准。</p><p id="e168" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">回报将是一年的回报，通过比较 2017 年末的价格和 2017 年初的价格来计算。价格波动率是 2017 年全年价格的标准差。因此<strong class="lt iu">收益-价格波动率比率仅仅是一个收益和风险的度量</strong>，也用来模仿<a class="ae ky" href="https://www.investopedia.com/articles/07/sharpe_ratio.asp" rel="noopener ugc nofollow" target="_blank">夏普比率</a>。</p><p id="0f3e" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">从上表中可以看出，<strong class="lt iu">集群 6、8 和 11 将被选中，因为它们的收益价格波动率相对较高</strong>。投资组合 A 是通过对这三个组中的所有股票进行相等的加权投资而构建的，总共有 10 只股票。作为比较，我们希望通过选择 2017 年收益价格波动率最高的相应数量的个股来构建另一个投资组合，而无需事先应用聚类分析。</p><p id="7be7" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">两个投资组合:</p><p id="07f0" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">(一)2017 年收益率波动率最高的前 3 个集群</em> </strong> <em class="nb">，共 10 只股票(CSCO、FAST、XEL、EXC、COST、QCOM、VRSN、CHKP、FB、VRTX) </em></p><p id="ab46" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"><em class="nb">(B)2017 年收益价格波动率最高的 10 只股票</em> </strong> <em class="nb">(为了公平比较，我们每年都会调整该投资组合的股票数量，以便与投资组合 A 中的股票数量相匹配)(SIRI、、、EBAY、、CSCO、MU、MXIM、NTAP、CMCSA) </em></p><p id="ad85" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">现在，我们有兴趣看看哪个投资组合在未来一年(2018 年)产生更高的回报。并且<strong class="lt iu">结果显示，投资组合 A 产生了 3.48%的收益，而投资组合 B 遭受了 2.29%的损失。</strong></p><p id="f179" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">然而，仍然很难断定基于上述方法的投资组合结构一定会表现更好，尤其是基于一年的数据。因此，我将这个实验延长两个时期(2018–2019 和 2019–2020)，结果相当令人惊讶。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/1707bc6864535fda7dd9908e318e66bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*sazlNJvsVufAQ8dFvcRjTg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">两个投资组合在三年内的表现。</p></figure><p id="aed6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">显然，<strong class="lt iu">在所有三年中，投资组合 A 始终比投资组合 B 产生更高的回报。</strong></p><h1 id="4534" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(5)性能提高的可能原因</h1><p id="8d6e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated"><span class="l mo mp mq bm mr ms mt mu mv di">当然，通过财务指标的聚类分析来构建投资组合并不一定能取得优异的业绩。<strong class="lt iu">但其持续优于仅考虑回报和风险的选股表现表明，基本面分析确实增加了一些价值，聚类分析有助于简化分析过程。</strong></span></p><p id="9880" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">以下是对更好性能的一些可能解释:</p><p id="db03" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">(一)价值基本面分析— </em> </strong> <em class="nb">财务指标从不同维度衡量一家公司的业绩。因此，财务表现良好的公司的回报应该比“随机产生的”回报更具可持续性。定期考虑财务指标并更新投资组合配置对其可持续表现非常必要。作为证据，如果我们试图保持 2017 年构建的投资组合的配置在 2019 年前不变，其业绩在 2018-2019 年期间实际上恶化了很多。</em></p><p id="8260" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb">(二)多元化收益— </em> </strong> <em class="nb">聚类分析有助于区分不同特征的股票。换句话说，所选择的三个集群应该是完全不同的。这种多样化可以防止投资组合在某一时期因某一特定类型公司的低迷而遭受重大损失。</em></p><p id="d2f6" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><strong class="lt iu"> <em class="nb"> (c)防范一些公司特有的风险— </em> </strong> <em class="nb">将具有相似特征的股票聚集在一起。所以一个过去收益率与价格波动率比值高的群体应该比一只比值高的个股更“具体”。通过这种方法构建的投资组合可能防范了一些公司特有的风险。</em></p><h1 id="be52" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">(6)结论</h1><p id="24b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi mn translated">构建一个持续表现良好的投资组合总是不容易的，尤其是当有成千上万只股票的时候。有时，我们可能会先缩小范围，但在做出决定之前，仍然需要查看数百个财务指标。</p><p id="c115" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">本文介绍了一种可能的方法——<strong class="lt iu">聚类分析</strong>来帮助我们摆脱财务指标的海洋，并通过一些程序构建了一个完整的财务数据集。我希望这将开启关于如何通过利用一些数据科学技术来改善我们的投资组合分配的讨论。</p><h1 id="4ddd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><strong class="ak">参考</strong></h1><ol class=""><li id="37bc" class="nl nm it lt b lu lv lx ly ma nn me no mi np mm nq nr ns nt bi translated">柴坦尼亚·瑞迪·帕特拉。(2018).<a class="ae ky" rel="noopener" target="_blank" href="/understanding-the-concept-of-hierarchical-clustering-technique-c6e8243758ec">理解层次聚类技术的概念</a>。</li><li id="7679" class="nl nm it lt b lu nu lx nv ma nw me nx mi ny mm nq nr ns nt bi translated">达米安·博。(2020).<a class="ae ky" rel="noopener" target="_blank" href="/get-up-to-date-financial-ratios-p-e-p-b-and-more-of-stocks-using-python-4b53dd82908f">使用 Python </a>获取最新的股票财务比率。</li><li id="9b85" class="nl nm it lt b lu nu lx nv ma nw me nx mi ny mm nq nr ns nt bi translated">小牛顿达科斯塔，杰弗逊库尼亚和塞尔吉奥达席尔瓦。(2005).基于聚类分析的股票选择</li></ol></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><div class="kj kk kl km gt og"><a href="https://medium.com/@hudsonko/membership" rel="noopener follow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">用我的推荐链接加入媒体-哈德森高</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">如果你对我写的东西感兴趣，不要错过成为 Medium 会员的机会。您将可以完全访问所有…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">medium.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="b23a" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">如果你对时间序列模型更有信心，我的另一篇关于在 LSTM 模型中定制损失函数的文章可能会对你有所帮助。谢了。</p><div class="ov ow gp gr ox og"><a rel="noopener follow" target="_blank" href="/customize-loss-function-to-make-lstm-model-more-applicable-in-stock-price-prediction-b1c50e50b16c"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">定制损失函数，使 LSTM 模型更适用于股票价格预测</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">损失函数不要只考虑价格差异，方向损失也很重要！！！</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="oy l or os ot op ou ks og"/></div></div></a></div><p id="b472" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><em class="nb">免责声明:请注意，投资可能因任何原因而上涨或下跌，股票的过去表现并不能保证未来表现。</em></p><p id="c227" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">本文对任何内容的及时性、准确性或适用性不做任何陈述，也不对任何不规则或不准确之处承担责任。</p><p id="52a0" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated"><em class="nb">本文中的股票推荐和评论不代表我对是否买入、卖出或持有任何特定股票的观点。</em></p><p id="e723" class="pw-post-body-paragraph lr ls it lt b lu mw ju lw lx mx jx lz ma my mc md me mz mg mh mi na mk ml mm im bi translated">建议所有投资者在做出投资决定之前进行独立研究。投资者应该考虑任何投资建议的来源和适合性。您使用本文中的任何内容都要自担风险。</p></div></div>    
</body>
</html>