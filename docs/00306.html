<html>
<head>
<title>World map of visited countries in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中所访问国家的世界地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/world-map-of-visited-countries-in-r-d46b9be7d52b?source=collection_archive---------35-----------------------#2020-01-09">https://towardsdatascience.com/world-map-of-visited-countries-in-r-d46b9be7d52b?source=collection_archive---------35-----------------------#2020-01-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0be0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated"><span class="l kp kq kr bm ks kt ku kv kw di"> L </span>和我一样，如果你和 R 一样喜欢旅行，你可能会想画一张你在 R 访问过的国家的世界地图。下面是一个我在 2020 年 1 月访问过的国家的例子:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/ec96762d33467e2b0e3aff0aabc1565f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WSwewvQEOsc4uXCUpmJpg.png"/></div></div><p class="lj lk gj gh gi ll lm bd b be z dk translated">突出显示到访国家的世界地图示例</p></figure><p id="190a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要在 R 中绘制这个地图，您需要以下软件包:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="dadd" class="ls lt it lo b gy lu lv l lw lx">library(highcharter)<br/>library(dplyr)<br/>library(maps)</span></pre><p id="4c10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">像往常一样，在用<code class="fe ly lz ma lo b">library()</code>加载软件包之前，您需要将它们安装在您的机器上。可以用命令<code class="fe ly lz ma lo b">install.packages("name_of_package")</code>安装包。</p><p id="a873" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">加载完包后，我们将使用来自<code class="fe ly lz ma lo b">{maps}</code>包的名为<code class="fe ly lz ma lo b">iso3166</code>的数据集，并将其重命名为<code class="fe ly lz ma lo b">dat</code>。以下是数据集的前 6 行:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="7665" class="ls lt it lo b gy lu lv l lw lx">dat &lt;- iso3166<br/>head(dat)</span><span id="cede" class="ls lt it lo b gy mb lv l lw lx">##   a2  a3       ISOname               mapname sovereignty<br/>## 1 AW ABW         Aruba                 Aruba Netherlands<br/>## 2 AF AFG   Afghanistan           Afghanistan Afghanistan<br/>## 3 AO AGO        Angola                Angola      Angola<br/>## 4 AI AIA      Anguilla              Anguilla    Anguilla<br/>## 5 AX ALA Aland Islands Finland:Aland Islands     Finland<br/>## 6 AL ALB       Albania               Albania     Albania</span></pre><p id="9e22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将变量<code class="fe ly lz ma lo b">a3</code>重命名为<code class="fe ly lz ma lo b">iso-a3</code>:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="b10a" class="ls lt it lo b gy lu lv l lw lx">dat &lt;- rename(dat, "iso-a3" = a3)<br/>head(dat)</span><span id="31d9" class="ls lt it lo b gy mb lv l lw lx">##   a2 iso-a3       ISOname               mapname sovereignty<br/>## 1 AW    ABW         Aruba                 Aruba Netherlands<br/>## 2 AF    AFG   Afghanistan           Afghanistan Afghanistan<br/>## 3 AO    AGO        Angola                Angola      Angola<br/>## 4 AI    AIA      Anguilla              Anguilla    Anguilla<br/>## 5 AX    ALA Aland Islands Finland:Aland Islands     Finland<br/>## 6 AL    ALB       Albania               Albania     Albania</span></pre><p id="9ec0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将访问过的国家保存在一个名为<code class="fe ly lz ma lo b">countries_visited</code>的向量中。要了解您访问过的国家的 ISO 代码，请检查数据集中的列<code class="fe ly lz ma lo b">ISOname</code>，并从列<code class="fe ly lz ma lo b">iso-a3</code>中提取 ISO 代码:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="44fa" class="ls lt it lo b gy lu lv l lw lx">countries_visited &lt;- c("AUS", "BEL", "CAN", "CZE", "DNK", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LUX", "MCO", "MMR", "NLD", "NZL", "NOR", "PRT", "ROU", "SGP", "ESP", "SWE", "CHE", "TWN", "THA", "GBR", "USA")</span></pre><p id="ca18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在创建一个名为<code class="fe ly lz ma lo b">visited</code>的新变量，如果你去过这个国家，它等于 1，否则等于 0:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="83ae" class="ls lt it lo b gy lu lv l lw lx">dat$visited &lt;- ifelse(dat$`iso-a3` %in% countries_visited, 1, 0)<br/>head(dat)</span><span id="3730" class="ls lt it lo b gy mb lv l lw lx">##   a2 iso-a3       ISOname               mapname sovereignty visited<br/>## 1 AW    ABW         Aruba                 Aruba Netherlands       0<br/>## 2 AF    AFG   Afghanistan           Afghanistan Afghanistan       0<br/>## 3 AO    AGO        Angola                Angola      Angola       0<br/>## 4 AI    AIA      Anguilla              Anguilla    Anguilla       0<br/>## 5 AX    ALA Aland Islands Finland:Aland Islands     Finland       0<br/>## 6 AL    ALB       Albania               Albania     Albania       0</span></pre><p id="0d0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，由于来自<code class="fe ly lz ma lo b">{highcharter}</code>包的<code class="fe ly lz ma lo b">hcmap()</code>命令，我们已经准备好绘制世界地图了:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="16e3" class="ls lt it lo b gy lu lv l lw lx">hcmap(<br/>  map = "custom/world-highres3", # high resolution world map<br/>  data = dat, # name of dataset<br/>  joinBy = "iso-a3",<br/>  value = "visited",<br/>  showInLegend = FALSE, # hide legend<br/>  nullColor = "#DADADA",<br/>  download_map_data = TRUE<br/>) %&gt;%<br/>  hc_mapNavigation(enabled = FALSE) %&gt;%<br/>  hc_legend("none") %&gt;%<br/>  hc_title(text = "World map") # title</span></pre><p id="e707" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据你的需要改变论点，你就可以开始了。更进一步，您还可以添加一个列表，其中包括您访问过的所有国家，这要归功于以下代码:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="f009" class="ls lt it lo b gy lu lv l lw lx">dat &lt;- subset(dat, dat$visited == 1)<br/>sort(dat$ISOname) # sort is to have the visited countries in alphabetical order</span><span id="971e" class="ls lt it lo b gy mb lv l lw lx">##  [1] "Australia"                                           <br/>##  [2] "Belgium"                                             <br/>##  [3] "Canada"                                              <br/>##  [4] "Clipperton Island"                                   <br/>##  [5] "Czech Republic"                                      <br/>##  [6] "Denmark"                                             <br/>##  [7] "Finland"                                             <br/>##  [8] "France"                                              <br/>##  [9] "Germany"                                             <br/>## [10] "Greece"                                              <br/>## [11] "Hungary"                                             <br/>## [12] "Ireland"                                             <br/>## [13] "Italy"                                               <br/>## [14] "Latvia"                                              <br/>## [15] "Luxembourg"                                          <br/>## [16] "Monaco"                                              <br/>## [17] "Myanmar"                                             <br/>## [18] "Netherlands"                                         <br/>## [19] "New Zealand"                                         <br/>## [20] "Norway"                                              <br/>## [21] "Portugal"                                            <br/>## [22] "Portugal"                                            <br/>## [23] "Portugal"                                            <br/>## [24] "Romania"                                             <br/>## [25] "Singapore"                                           <br/>## [26] "Spain"                                               <br/>## [27] "Spain"                                               <br/>## [28] "Sweden"                                              <br/>## [29] "Switzerland"                                         <br/>## [30] "Taiwan"                                              <br/>## [31] "Thailand"                                            <br/>## [32] "United Kingdom of Great Britain and Northern Ireland"<br/>## [33] "United States"</span></pre><p id="8f52" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数一数去过的国家:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="3f0b" class="ls lt it lo b gy lu lv l lw lx">paste(<br/>  "Total: ",<br/>  sum(dat$visited),<br/>  " countries."<br/>)</span><span id="f800" class="ls lt it lo b gy mb lv l lw lx">## [1] "Total:  33  countries."</span></pre><p id="ad1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总之，下面是绘制世界地图的完整代码，其中突出显示了访问过的国家，按字母顺序列出了所有国家和访问过的国家数:</p><pre class="ky kz la lb gt ln lo lp lq aw lr bi"><span id="1700" class="ls lt it lo b gy lu lv l lw lx">library(highcharter)<br/>library(dplyr)<br/>library(maps)</span><span id="f2c1" class="ls lt it lo b gy mb lv l lw lx">dat &lt;- iso3166<br/>dat &lt;- rename(dat, "iso-a3" = a3)<br/>countries_visited &lt;- c("AUS", "BEL", "CAN", "CZE", "DNK", "FIN", "FRA", "DEU", "GRC", "HUN", "IRL", "ITA", "LVA", "LUX", "MCO", "MMR", "NLD", "NZL", "NOR", "PRT", "ROU", "SGP", "ESP", "SWE", "CHE", "TWN", "THA", "GBR", "USA")<br/>dat$visited &lt;- ifelse(dat$`iso-a3` %in% countries_visited, 1, 0)</span><span id="f92b" class="ls lt it lo b gy mb lv l lw lx">hcmap(<br/>  map = "custom/world-highres3", # high resolution world map<br/>  data = dat, # name of dataset<br/>  joinBy = "iso-a3",<br/>  value = "visited",<br/>  showInLegend = FALSE, # hide legend<br/>  nullColor = "#DADADA",<br/>  download_map_data = TRUE<br/>) %&gt;%<br/>  hc_mapNavigation(enabled = FALSE) %&gt;%<br/>  hc_legend("none") %&gt;%<br/>  hc_title(text = "World map") # title</span><span id="66f6" class="ls lt it lo b gy mb lv l lw lx">dat &lt;- subset(dat, dat$visited == 1)<br/>sort(dat$ISOname) # sort is to have the visited countries in alphabetical order</span><span id="3f00" class="ls lt it lo b gy mb lv l lw lx">paste(<br/>  "Total: ",<br/>  sum(dat$visited),<br/>  " countries."<br/>)</span></pre><p id="e742" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读。我希望这篇文章能帮助你画出一张世界地图，用 r 标出你去过的国家。</p><p id="501c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">和往常一样，如果您有与本文主题相关的问题或建议，请将其添加为评论，以便其他读者可以从讨论中受益。</p><p id="3c29" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">相关文章:</strong></p><ul class=""><li id="5a37" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated"><a class="ae ml" href="https://www.statsandr.com/blog/an-efficient-way-to-install-and-load-r-packages/" rel="noopener ugc nofollow" target="_blank">安装和加载 R 包的有效方法</a></li><li id="2990" class="mc md it js b jt mm jx mn kb mo kf mp kj mq kn mh mi mj mk bi translated">我的数据符合正态分布吗？关于最广泛使用的分布以及如何检验 R 中的正态性的注释</li><li id="d861" class="mc md it js b jt mm jx mn kb mo kf mp kj mq kn mh mi mj mk bi translated"><a class="ae ml" href="https://www.statsandr.com/blog/fisher-s-exact-test-in-r-independence-test-for-a-small-sample/" rel="noopener ugc nofollow" target="_blank">R 中的 Fisher 精确检验:小样本的独立性检验</a></li><li id="fb2a" class="mc md it js b jt mm jx mn kb mo kf mp kj mq kn mh mi mj mk bi translated"><a class="ae ml" href="https://www.statsandr.com/blog/chi-square-test-of-independence-in-r/" rel="noopener ugc nofollow" target="_blank">R 中独立性的卡方检验</a></li><li id="7a1d" class="mc md it js b jt mm jx mn kb mo kf mp kj mq kn mh mi mj mk bi translated"><a class="ae ml" href="https://www.statsandr.com/blog/how-to-create-a-timeline-of-your-cv-in-r/" rel="noopener ugc nofollow" target="_blank">如何在简历中创建时间线</a></li></ul></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="751a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="my">原载于 2020 年 1 月 9 日 https://statsandr.com</em><em class="my"/><a class="ae ml" href="https://statsandr.com/blog/world-map-of-visited-countries-in-r/" rel="noopener ugc nofollow" target="_blank"><em class="my">。</em></a></p></div></div>    
</body>
</html>