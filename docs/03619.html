<html>
<head>
<title>Valuing a company with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python评估一家公司</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/valuing-a-company-with-python-1ddab3e33502?source=collection_archive---------36-----------------------#2020-04-05">https://towardsdatascience.com/valuing-a-company-with-python-1ddab3e33502?source=collection_archive---------36-----------------------#2020-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="672d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用价格销售比</h2></div><p id="6518" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">销售价格是分析师用来比较类似股票价值的常用工具。在这篇文章中，我们将使用销售价格比来评估数百家科技行业的公司。这个Python脚本将让我们找到按照这个比例最便宜的公司。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/d18c2edc2138a944af2d3c322fc53ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tkYS0GEX12ttIxBO"/></div></div><p class="ln lo gj gh gi lp lq bd b be z dk translated">照片由<a class="ae lr" href="https://www.pexels.com/@kaiquestr?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd ls">凯雀罗查</strong>T3】发自</a><a class="ae lr" href="https://www.pexels.com/photo/architecture-blur-building-escalator-125532/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">T5】PexelsT7】</a></p></figure><h1 id="a13a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">价格与销售额的比率是多少？</h1><p id="bab6" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated"><strong class="kh ir">销售价格的计算方法是将公司的</strong> <a class="ae lr" href="https://www.investopedia.com/articles/fundamental/03/032603.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">市值除以年收入。</strong> </a> <strong class="kh ir"> </strong>它告诉我们需要多少年的收入才能覆盖一家公司目前的市值。</p><p id="5305" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与市盈率不同(<a class="ae lr" href="https://codingandfun.com/price-earning-with-python/" rel="noopener ugc nofollow" target="_blank">点击此处了解如何用Python </a>计算PE比率)，我们可以对没有任何收益的公司使用市盈率。由于这个原因，价格销售比对于那些在成长时期可能没有利润的成长型公司非常有用。</p><p id="6f84" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">价格销售比本身并不能说明什么。因此，重要的是计算类似公司的行业平均价格销售比，以用作参考。</p><p id="6976" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">销售本身可能不足以做出投资决策。除了价格销售比之外，我们还将计算每家公司的毛利率，并结合价格销售比来使用。毛利率告诉我们一家公司在销售成本上赚了多少利润。一个拥有更大毛利率的公司，可以分配更多的资源到研发上来进一步发展公司。或者，它也可以向股东分配更多收益。</p><p id="1506" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">毛利率=(销售额—销货成本)/销售额</p><h1 id="342c" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">用Python计算销售价格</h1><p id="5879" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">理论够了。让我们计算一下科技行业的一些公司的价格销售比和毛利率。我们将把我们的财务分析局限于市值超过100亿美元的公司。</p><p id="6d06" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于我们的财务分析，我们将使用一个很棒的财务API <a class="ae lr" href="https://fmpcloud.io/" rel="noopener ugc nofollow" target="_blank"> fmpcloud </a>。通过在他们那里开一个账户，你每天可以得到一些免费的API调用。让我们构建我们的脚本来逐步计算价格与销售额的比率:</p><p id="ee61" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，<strong class="kh ir">我们得到所有的科技公司</strong>，并把它们添加到Python列表中。我们使用下面的<a class="ae lr" href="https://fmpcloud.io/api/v3/stock-screener?sector=financial&amp;marketCapMoreThan=10000000000&amp;limit=100&amp;apikey=demo" rel="noopener ugc nofollow" target="_blank">API</a>终点传递作为参数的<em class="mq">技术</em>部门和市值。</p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="f4ba" class="mw lu iq ms b gy mx my l mz na">import requests <br/>import pandas as pd<br/><br/>import requests<br/><br/>demo= 'your_api key'<br/><br/>companies = requests.get(f'https://fmpcloud.io/api/v3/stock-screener?sector=technology&amp;marketCapMoreThan=100000000000&amp;limit=100&amp;apikey={demo}')<br/>companies = companies.json()<br/><br/>technological_companies = []<br/><br/>for item in companies:<br/>  technological_companies.append(item['symbol'])<br/><br/>print(technological_companies)<br/>#['MSF.BR', 'MSFT', 'AAPL', 'AMZN', 'GOOG', 'GOOGL', 'FB', 'INCO.BR', 'INTC', ...</span></pre><p id="bbb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们<strong class="kh ir">遍历列表中的每只股票</strong>，向<a class="ae lr" href="https://fmpcloud.io/api/v3/income-statement/AAPL?apikey=demo" rel="noopener ugc nofollow" target="_blank"> API发出http请求，然后<strong class="kh ir">检索损益表数据</strong> </a>。我们解析对<strong class="kh ir">的响应，得到收入和毛利率</strong>。请注意，我们请求年度损益表来获取年度收入。接下来，我们检索<a class="ae lr" href="https://fmpcloud.io/api/v3/market-capitalization/AAPL?apikey=demo" rel="noopener ugc nofollow" target="_blank">最新市值</a>。最后，我们计算价格与销售额的比率，并将它们添加到一个空字典中。</p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="6c4b" class="mw lu iq ms b gy mx my l mz na">pricetosales = {}<br/>for item in technological_companies:<br/>    try:<br/>      #annual income statement since we need anual sales<br/>      IS = requests.get(f'https://fmpcloud.io/api/v3/income-statement/{item}?apikey={demo}')<br/>      IS = IS.json()<br/>      Revenue = IS[0]['revenue']<br/>      grossprofitratip = IS[0]['grossProfitRatio']<br/>      #most recent market capitliazation<br/>      MarketCapit = requests.get(f'https://fmpcloud.io/api/v3/market-capitalization/{item}?apikey={demo}')<br/>      MarketCapit = MarketCapit.json()<br/>      MarketCapit = MarketCapit[0]['marketCap']<br/><br/>      #Price to sales<br/>      p_to_sales = MarketCapit/Revenue<br/><br/>      pricetosales[item] = {}<br/>      pricetosales[item]['revenue'] = Revenue<br/>      pricetosales[item]['Gross_Profit_ratio'] = grossprofitratip<br/>      pricetosales[item]['price_to_sales'] = p_to_sales<br/>      pricetosales[item]['Market_Capit'] = MarketCapit<br/>    except:<br/>      pass<br/><br/>print(pricetosales)<br/>#<br/>{'AAPL': {'Gross_Profit_ratio': 0.37817768109,<br/>  'Market_Capit': 1075385951640,<br/>  'price_to_sales': 4.133333659935274,<br/>  'revenue': 260174000000},<br/> 'ADBE': {'Gross_Profit_ratio': 0.850266267202,<br/>  'Market_Capit': 143222958000,<br/>  'price_to_sales': 12.820620380963822,<br/>  'revenue': 11171297000},<br/> 'AMZN': {'Gross_Profit_ratio': 0.409900114786,<br/>  'Market_Capit': 960921360000</span></pre><p id="c8b2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们在Python字典中给出了每家公司的价格销售比和毛利比。然而，为了做进一步的分析，在熊猫的数据框架中有这些信息是很好的。我们可以从_dict中使用Pandas DataFrame方法，并将我们的字典作为参数传递。</p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="25de" class="mw lu iq ms b gy mx my l mz na">price_to_sales_df = pd.DataFrame.from_dict(pricetosales, orient='index')</span></pre><p id="d5ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们<strong class="kh ir">计算技术行业</strong>的平均价格销售比，并将其添加到名为<em class="mq"> ps_average_sector </em>的新列中。我们还使用价格销售比作为估价工具来计算额外信息，例如每个公司的价格:</p><pre class="lc ld le lf gt mr ms mt mu aw mv bi"><span id="e425" class="mw lu iq ms b gy mx my l mz na">price_to_sales_df['ps_average_sector'] = price_to_sales_df['price_to_sales'].mean()<br/>price_to_sales_df['pscompany_vs_averagesector'] = price_to_sales_df['price_to_sales'] - price_to_sales_df['ps_average_sector']<br/>price_to_sales_df['price_as_per_average_industryPS'] = price_to_sales_df['ps_average_sector'] * price_to_sales_df['revenue']<br/>price_to_sales_df['price_difference'] = price_to_sales_df['price_as_per_average_industryPS'] - price_to_sales_df['Market_Capit']</span></pre><h1 id="c2e8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">包扎</h1><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/25611630b39da620a6a735646e0bf011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*swVbudFM9BV03deb"/></div></div></figure><p id="266f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的图片中，我们可以看到我们生成的熊猫数据帧的样本。令人惊讶的是，像苹果和亚马逊这样的公司的价格销售比低于行业平均水平。仅分别为4.12和3.42，而行业平均水平为5.99。</p><p id="b756" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">列<em class="mq">根据平均行业价格</em>显示如果我们将<em class="mq">价格应用于销售行业平均价格</em>作为乘数以获得每只股票的价格，那么股票的市值应该是多少。</p><p id="4bee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，通过使用苹果的<em class="mq">平均价格销售比</em>(平均ps比率*公司收入:5.99 *4.133)，我们得到的市值为1.560851e+12，远低于其当前的真实市值。这是否意味着这是一个购买苹果的好机会？</p><p id="42cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在做出任何投资决定之前，需要进一步分析其他基本面因素。查看我的<a class="ae lr" href="https://codingandfun.com/category/python-for-finance-data-science/fundamental-analysis-python/" rel="noopener ugc nofollow" target="_blank">Python for Finance——基本面分析</a>,了解其他不错的分析工具。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="deb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mq">原载于2020年4月5日</em><a class="ae lr" href="https://codingandfun.com/valuing-a-company-price-to-sales-ratio-with-python/" rel="noopener ugc nofollow" target="_blank"><em class="mq">【https://codingandfun.com】</em></a><em class="mq">。</em></p></div></div>    
</body>
</html>