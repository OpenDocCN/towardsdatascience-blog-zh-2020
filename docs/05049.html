<html>
<head>
<title>How To Filter A Pandas Dataframe in 3 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在3分钟内过滤一个熊猫数据帧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-filter-a-pandas-dataframe-in-3-minutes-b8bc4fd3443e?source=collection_archive---------27-----------------------#2020-05-01">https://towardsdatascience.com/how-to-filter-a-pandas-dataframe-in-3-minutes-b8bc4fd3443e?source=collection_archive---------27-----------------------#2020-05-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cbfe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何过滤熊猫数据框有很多选择，我将向你展示最常见的功能</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7274e0e13a0ff5a291d621069881146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hc30QuKNIPcR4HbaRVhj0g.png"/></div></div></figure><blockquote class="ku kv kw"><p id="82e3" class="kx ky kz la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Pandas中，有许多方法可以过滤数据帧。我将在辛普森一家的帮助下向你介绍最重要的选择。</p></blockquote><h2 id="e8dc" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">布尔索引</h2><p id="5b6a" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">布尔索引需要找到每一行的真值。如果你寻找<code class="fe mv mw mx my b">df['column'] == 'XY'</code> <strong class="la iu">，</strong>，一个真/假序列被创建。</p><p id="47b6" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg md li lj lk mh lm ln lo ml lq lr ls lt im bi mz translated">我想象你刚刚在《辛普森一家》的片场。他们是明星，每个人都可以为下一季订购一些东西，由制作人支付费用。你的工作是接受主角的命令并转发相关数据:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="088f" class="lu lv it my b gy nm nn l no np">df = pd.DataFrame({'Items': 'Car Saxophone Curler Car Slingshot Duff'.split(),<br/> 'Customer': 'Homer Lisa Marge Lisa Bart Homer'.split(),<br/> 'Amount': np.arange(6), 'Costs': np.arange(6) * 2})</span><span id="6fb7" class="lu lv it my b gy nq nn l no np">print(df)<br/>       Items Customer  Amount  Costs<br/>0        Car    Homer       0      0<br/>1  Saxophone     Lisa       1      2<br/>2     Curler    Marge       2      4<br/>3        Car     Lisa       3      6<br/>4  Slingshot     Bart       4      8<br/>5       Duff    Homer       5     10</span></pre><h2 id="abba" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例1-选择具有特定值的行</h2><p id="4b77" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">让我们找出Bart的所有条目，以便转发给他的经理:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="0035" class="lu lv it my b gy nm nn l no np">df.loc[df['Customer'] == 'Bart']</span><span id="dfb9" class="lu lv it my b gy nq nn l no np">   Items         Customer   Amount Costs<br/>4  Slingshot     Bart       4      8</span></pre><h2 id="ef2d" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例2 —从列表中选择行</h2><p id="f43d" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">片场有传言说，我们是数据专家，广告合作伙伴想知道节目中的孩子们出于营销原因订购了什么:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="87db" class="lu lv it my b gy nm nn l no np">kids = ['Lisa','Bart']</span><span id="fa90" class="lu lv it my b gy nq nn l no np">df.loc[df['Customer'].isin(kids)]</span><span id="cacb" class="lu lv it my b gy nq nn l no np">       Items     Customer   Amount Costs<br/>1  Saxophone     Lisa       1      2<br/>3        Car     Lisa       3      6<br/>4  Slingshot     Bart       4      8</span></pre><p id="f580" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg md li lj lk mh lm ln lo ml lq lr ls lt im bi translated">我们会在电视广告上看到萨克斯管、汽车和弹弓…</p><h2 id="bdc2" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例3 —组合多个条件</h2><p id="cdf1" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">辛普森一家也必须省钱。新规则是:1)禁止汽车，2)每人最多可订购3件商品:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="41b2" class="lu lv it my b gy nm nn l no np">df.loc[(df['Items'] != 'Car') &amp; (df['Amount'] &lt;= 3)]</span><span id="def8" class="lu lv it my b gy nq nn l no np">       Items Customer  Amount  Costs<br/>1  Saxophone     Lisa       1      2<br/>2     Curler    Marge       2      4</span></pre><p id="0498" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg md li lj lk mh lm ln lo ml lq lr ls lt im bi translated">我希望霍默和巴特能和我们在一起，不要怒气冲冲地离开节目…</p><h2 id="d2f7" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例4 —选择未出现在列表中的所有行</h2><p id="397c" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">不幸的是，该系列的明星们对这些削减一点也不热情，所以第一批赞助商站出来帮忙:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="56e9" class="lu lv it my b gy nm nn l no np">happy_stars = ['Lisa','Marge']</span><span id="15fc" class="lu lv it my b gy nq nn l no np">df.loc[~df['Customer'].isin(happy_stars)]</span><span id="6e38" class="lu lv it my b gy nq nn l no np">Items     Customer   Amount Costs<br/>1  Saxophone     Lisa       1      2<br/>3        Car     Lisa       3      6<br/>4  Slingshot     Bart       4      8</span></pre><h2 id="0caa" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">位置索引</h2><p id="d4d2" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">有时，您不想根据特定条件进行过滤，而是根据数据帧的位置选择特定行。在这种情况下，我们使用切片来获得想要的行。</p><h2 id="578b" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例1 —选择数据帧的前几行</h2><p id="a884" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">你部门的新实习生不应该直接处理整个数据集，他只需要前三个条目:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="dbe2" class="lu lv it my b gy nm nn l no np">df.iloc[0:3]<br/>         <br/>       Items Customer  Amount  Costs<br/>0        Car    Homer       0      0<br/>1  Saxophone     Lisa       1      2<br/>2     Curler    Marge       2      4</span></pre><h2 id="6877" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">示例2 —选择数据帧的最后几行</h2><p id="20f1" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi translated">你有很多工作要做，你会得到另一个实习生。为了让两个学员独立完成他们的任务，您现在保存记录的最后三行:</p><pre class="kj kk kl km gt ni my nj nk aw nl bi"><span id="420c" class="lu lv it my b gy nm nn l no np">df.iloc[-3:]<br/>         <br/>       Items Customer  Amount  Costs<br/>3        Car     Lisa       3      6<br/>4  Slingshot     Bart       4      8<br/>5       Duff    Homer       5     10</span></pre><h2 id="164b" class="lu lv it bd lw lx ly dn lz ma mb dp mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">结论</h2><p id="1fad" class="pw-post-body-paragraph kx ky it la b lb mq ju ld le mr jx lg md ms lj lk mh mt ln lo ml mu lr ls lt im bi mz translated"><span class="l na nb nc bm nd ne nf ng nh di">我们</span>能够根据其值或位置从我们的数据集中选择任何特定的行。Pandas提供了在制定条件时考虑多个值的简单方法。列表和条件可以很容易地链接在一起。</p></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="509a" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg md li lj lk mh lm ln lo ml lq lr ls lt im bi translated"><a class="ae ny" href="https://medium.com/@droste.benedikt/membership" rel="noopener">如果您喜欢中级和数据科学，并且还没有注册，请随时使用我的推荐链接加入社区。</a></p></div></div>    
</body>
</html>