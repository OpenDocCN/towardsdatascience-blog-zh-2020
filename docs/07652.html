<html>
<head>
<title>How to find and organize your data from the command-line</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从命令行查找和组织数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-find-and-organize-your-data-from-the-command-line-852a4042b2be?source=collection_archive---------49-----------------------#2020-06-08">https://towardsdatascience.com/how-to-find-and-organize-your-data-from-the-command-line-852a4042b2be?source=collection_archive---------49-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0e65" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">metaframe简介:面向数据科学家的基于markdown的文档工具和数据目录。</h2></div><p id="ad17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">回购:</strong>【https://github.com/rsyi/metaframe】T2</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/ce44468fa46ce0c56115f94a5310858a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*csWgKlgKhCjACxoLEeCgOA.png"/></div></div></figure><p id="5991" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是一名数据科学家，你的工作就是从数据中提取价值。但是在你的职业生涯中，你可能会花费(并且已经花费)大量的时间<em class="lr">去寻找和获取</em>所说数据的背景。以我的经验来看，这通常是徒劳的——你问团队中最资深的人，谁让你去找别人，谁让你去找别人，谁告诉你他们不知道你在说什么。然后你重复这个过程，直到你找到一个人可以给你一个有用的表。</p><pre class="lg lh li lj gt ls lt lu lv aw lw bi"><span id="4f9c" class="lx ly it lt b gy lz ma l mb mc">person = senior_data_scientist<br/>while person and not_tired:<br/>  response = ask(person)<br/>  if type(response) == Table<br/>    rejoice()<br/>  if type(response) == Person<br/>    person = response</span></pre><p id="98b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是这个算法真的是蛮可怕的！这绝不是一个彻底的搜索，您最终会得到一个无人维护、无人使用的表。如果你决定冒险把它用在你的生产流水线上，当你六个月后发现这张桌子并不像你想象的那样工作时，你可能会让你的公司损失一大笔钱。更何况这是一个<strong class="kk iu">巨大的时间浪费！</strong>有时你会忘记几个月后桌子做了什么，你不得不再次做这个<em class="lr"/>，让你的同事沮丧<em class="lr">。</em>那么你能做什么呢？</p><h1 id="26e6" class="md ly it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">简要介绍数据目录及其局限性</h1><p id="fd71" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">幸运的是，这个问题已经有了解决方案:<strong class="kk iu">数据目录</strong>。数据目录名副其实，因为它们只是为您提供一个数据目录。它们允许您按名称搜索和查找表，查看它们的列和元数据，并使用附加文档丰富这些元数据。存在许多闭源播放器，如<a class="ae le" href="https://www.alation.com/" rel="noopener ugc nofollow" target="_blank"> Alation </a>和<a class="ae le" href="https://www.collibra.com/" rel="noopener ugc nofollow" target="_blank"> Collibra </a>，许多科技公司已经发布了开源版本，包括网飞的<a class="ae le" href="https://github.com/Netflix/metacat" rel="noopener ugc nofollow" target="_blank"> Metacat </a>，Lyft的<a class="ae le" href="https://lyft.github.io/amundsen/" rel="noopener ugc nofollow" target="_blank"> Amundsen </a>，以及LinkedIn的<a class="ae le" href="https://engineering.linkedin.com/blog/2019/data-hub" rel="noopener ugc nofollow" target="_blank"> Datahub </a>。许多公司都在为自己开发这些工具(Airbnb、优步、谷歌、脸书等等)。</p><p id="eac7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就引出了一个问题:<strong class="kk iu">为什么不使用/实现这些解决方案中的一个呢？</strong></p><p id="4a8c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嗯，你可能想认真考虑一下，最终<em class="lr"/>，但是有巨大的进入壁垒:建立目录往往是昂贵的，或者，在开源工具的情况下，很难建立。对于只有少数数据科学家和分析师的公司来说，花费几十万美元或几个月的工作来实现一个工具几乎是不值得的，这个工具最多可以节省你转向你的邻居并再次向他/她询问那张桌子的几分钟时间。</p><p id="0e67" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我和一些在小型创业公司工作的朋友谈过这个问题，虽然数据文档和数据发现的问题即使在最小的规模上也很突出，但成本效益权衡根本没有意义。但是，仅仅因为问题太昂贵而无法用现有方法解决，并不意味着不存在划算的解决方案。</p><h1 id="e31b" class="md ly it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">那么解决办法是什么呢？</h1><p id="552c" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">我想，“T7比T8更容易建立目录。”日复一日，我只想寻找我的数据，检查列名，并做一些笔记。为什么这么难？我已经可以通过将所有内容保存在团队范围的电子表格中来手动完成这项工作。</p><p id="7d3c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我想我应该试着80/20这个。结果呢？</p><p id="c552" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://github.com/rsyi/metaframe" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">元框架</strong> </a> <strong class="kk iu">。</strong></p><p id="fc05" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://github.com/rsyi/metaframe" rel="noopener ugc nofollow" target="_blank"> Metaframe </a>是一个基于CLI的数据目录，带有一个定制的基于Markdown的元数据后端，一个基于fzf的搜索服务，以及一个用bash和python编写的ETL管道，构建于lyft的amundsendatabuilder库之上。</p><p id="4929" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但这很难理解。这里有一个快速演示:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi mz"><img src="../Images/90e8b9ceaa8988d1fa62e6b999643018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ju_qo2f2c-4BJbto.gif"/></div></div></figure><p id="02e1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本质上，<a class="ae le" href="https://github.com/rsyi/metaframe" rel="noopener ugc nofollow" target="_blank"> metaframe </a>只是一个有点固执己见的文档工具。想只为一桌写笔记？很简单，只需键入以下内容:</p><pre class="lg lh li lj gt ls lt lu lv aw lw bi"><span id="483d" class="lx ly it lt b gy lz ma l mb mc">mf new table_name</span></pre><p id="2824" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将进入一个位于<code class="fe na nb nc lt b">~/.metaframe/metadata/table_name.docs.md</code>的文本文件，您可以在此表格上添加您的注释。然后，通过运行以下命令，可以在您的搜索中访问这些内容</p><pre class="lg lh li lj gt ls lt lu lv aw lw bi"><span id="ef59" class="lx ly it lt b gy lz ma l mb mc">mf</span></pre><p id="c931" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这并不局限于表格——您可以为SQL查询、ML模型、jupyter笔记本等创建新的文档。我个人在<code class="fe na nb nc lt b">~/.metaframe/</code>中保存了一个名为<code class="fe na nb nc lt b">recipes</code>的子文件夹，在那里我存储了SQL的命名片段。</p><p id="a8df" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想要更全面的数据目录体验，metaframe还支持本地运行的ETL作业。您所需要做的就是通过运行<code class="fe na nb nc lt b">mf connections edit</code>在yaml中指定一个连接，然后运行<code class="fe na nb nc lt b">mf etl</code>，您所有的数据都可以使用<code class="fe na nb nc lt b">mf</code>来访问。搜索并找到要做笔记的表格后，可以按enter编辑与所选表格相关联的文档，该文档将在以后的搜索中附加到元数据预览窗口。</p><p id="b856" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为文件结构完全是基于文本的，您甚至可以导航到<code class="fe na nb nc lt b">~/.metaframe/metadata</code>并用git跟踪它的版本。在一个有许多想要共享笔记的合作者的公司中，一个简单的模式可以是设置CI/CD(或一个气流作业)来自动填充git存储库中的数据，并让用户将他们的个人文档推送到这个repo中的分支。因为这是版本跟踪的，所以通过检查您的同事的个人分支的提交历史，您应该能够很容易地看到您的同事了解哪些表，而不必询问他们。</p><h1 id="41d4" class="md ly it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">有什么警告吗？</h1><p id="4091" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">我注意到metaframe的唯一问题是，它会在100，000张左右开始突突。但是对于具有这种规模的公司来说，谨慎的做法可能是:( a)不在本地运行ETL作业,( b)限制正在提取的模式。在metaframe中，这只是简单地给你的<code class="fe na nb nc lt b">mf connections edit</code>文件添加几个标志，比如<code class="fe na nb nc lt b">included_schemas</code>或者<code class="fe na nb nc lt b">excluded_schemas</code>。更多详情参见<a class="ae le" href="https://docs.metaframe.sh/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="76ea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Metaframe支持presto或neo4j上的手动文档和ETL(amundsen ),但是我们也支持定制的<a class="ae le" href="https://docs.metaframe.sh/connection-setup/custom-etl" rel="noopener ugc nofollow" target="_blank">构建脚本</a>,以支持定制的提取作业(从任何仓库，从预先抓取的数据库存储，等等。).我们也正在建立更多的本地连接(例如，雪花和Postgres正在工作中)。如果您热衷于让它为您的特定设置工作，请随时提出问题，我们会帮助您。或者，如果你愿意，做点贡献吧！:)</p><h1 id="29a1" class="md ly it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">摘要</h1><p id="6a15" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">数据文档和数据发现是严重的问题，但它们不是数据科学家通常考虑的事情。我们很容易忽视一个每周浪费不到一个小时的问题，但我在这里告诉你，在所有规模上都有解决这个问题的办法。试试metaframe吧，我保证一旦你尝到了它的味道，你就离不开它了。</p><p id="2bf0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">回购:</strong>【https://github.com/rsyi/metaframe】T2</p></div></div>    
</body>
</html>