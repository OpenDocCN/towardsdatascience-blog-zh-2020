<html>
<head>
<title>Dynamic subplot layout in Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Seaborn 中的动态子情节布局</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dynamic-subplot-layout-in-seaborn-e777500c7386?source=collection_archive---------20-----------------------#2020-04-16">https://towardsdatascience.com/dynamic-subplot-layout-in-seaborn-e777500c7386?source=collection_archive---------20-----------------------#2020-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/216f5dbf0add86e490819de3182e030e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G1i_0GGWweZQZfpx"/></div></div></figure><h1 id="c18d" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">在一个网格中可视化支线剧情</h1><p id="92c3" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Seaborn 是最常用的可视化库之一，我喜欢使用它。在我最近的项目中，我想以一种动态的方式可视化多个支线剧情。令我惊讶的是，我没有在网上任何地方找到直接的解决方案，所以我想分享我的方法。它在任何数据分析工作中都非常有用。</p><h1 id="61d7" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">目录</h1><ul class=""><li id="4c8c" class="lx ly it lb b lc ld lg lh lk lz lo ma ls mb lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#the-problem" rel="noopener ugc nofollow" target="_blank">问题</a></li><li id="ad00" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#the-approach" rel="noopener ugc nofollow" target="_blank">走近</a></li><li id="3849" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#the-solution" rel="noopener ugc nofollow" target="_blank">解决方案</a></li><li id="af85" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#changing-it-to-2-columns-it-will-look-like-this" rel="noopener ugc nofollow" target="_blank">将其更改为 2 列，看起来像这样</a></li><li id="90cd" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#changing-it-to-4-columns-it-will-look-like-this" rel="noopener ugc nofollow" target="_blank">将其更改为 4 列，如下图所示</a></li><li id="d3d2" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd/Writing/blob/master/2020/articles/plottingDynamic.md#about" rel="noopener ugc nofollow" target="_blank">关于</a></li></ul><h1 id="021f" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">问题是</h1><p id="cb45" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">让我们看看泰坦尼克号的数据集:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mm"><img src="../Images/70e95f637129d077ef29d5b9604a5ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mX_vEG3awo7c2JS8.png"/></div></div></figure><p id="e9c9" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">有多个分类变量，我们可能希望用计数图来形象化。通过在每个新单元格中复制代码来实现这一点并不是最佳选择:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mw"><img src="../Images/0a948a26a3f6b9e02548b2a2e233e021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3ltMV6mORSXlGz2U.png"/></div></div></figure><p id="c2da" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">seaborn 有一个 FacetGrid 选项:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/f06f0731273d0d12190e9b6d988f108b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8bPTuAbBa-0nnbBw.png"/></div></div></figure><p id="f69b" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">然而，我想有不同的支线剧情，我可以为自己设置每个情节。</p><h1 id="737d" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">方法</h1><p id="4f02" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">谢天谢地，还有支线剧情功能:</p><pre class="mn mo mp mq gt my mz na nb aw nc bi"><span id="9c87" class="nd kc it mz b gy ne nf l ng nh">categorical_vars = ['survived', 'pclass', 'sex', 'age', 'sibsp', 'parch',<br/>       'embarked', 'class', 'who', 'adult_male', 'deck', 'embark_town',<br/>       'alive', 'alone']<br/></span><span id="2286" class="nd kc it mz b gy ni nf l ng nh">fig, axs = plt.subplots(nrows=2, ncols=2)</span><span id="ea67" class="nd kc it mz b gy ni nf l ng nh">for i, var in enumerate(categorical_vars):<br/>    row = i//2<br/>    pos = i % 2</span><span id="91e2" class="nd kc it mz b gy ni nf l ng nh">    plot = sns.countplot(x=var, data=titanic, ax=axs[row][pos])</span></pre><p id="4744" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">这导致:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/10bb0e7b3221bef232cdeafc8b97f319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mfAOVOg4QIfv4W1U.png"/></div></div></figure><p id="df10" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">这说明了我经常遇到的问题。对于多个变量，我总是需要手动设置行数和列数。(<code class="fe nk nl nm mz b">fig, axs = plt.subplots(nrows=2, ncols=2)</code>)</p><h1 id="6c90" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">解决方案</h1><p id="2e2b" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了解决这个我，把它改成了:</p><pre class="mn mo mp mq gt my mz na nb aw nc bi"><span id="dc97" class="nd kc it mz b gy ne nf l ng nh">categorical_vars = ['survived', 'pclass', 'sex', 'age', 'sibsp', 'parch',<br/>       'embarked', 'class', 'who', 'adult_male', 'deck', 'embark_town',<br/>       'alive', 'alone']<br/></span><span id="4a34" class="nd kc it mz b gy ni nf l ng nh">num_plots = len(categorical_vars)<br/>total_cols = 3<br/>total_rows = num_plots//total_cols + 1</span><span id="3cb4" class="nd kc it mz b gy ni nf l ng nh">fig, axs = plt.subplots(nrows=total_rows, ncols=total_cols,<br/>                        figsize=(7*total_cols, 7*total_rows), constrained_layout=True)</span><span id="266c" class="nd kc it mz b gy ni nf l ng nh">for i, var in enumerate(categorical_vars):<br/>    row = i//total_cols<br/>    pos = i % total_cols</span><span id="a952" class="nd kc it mz b gy ni nf l ng nh">    plot = sns.countplot(x=var, data=titanic, ax=axs[row][pos])</span></pre><p id="6938" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">这就导致了:</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/9ff972dfb8ecf25d6dc91da965504f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S4CyK6pDmMRU6KrU.png"/></div></div></figure><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6b6f015a4c3afc131783bce21f5e99e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qt2vZHraPvD77gJ9"/></div></div></figure><h1 id="76e6" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">将其更改为两列，如下所示</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi no"><img src="../Images/dbb97eb3d750e59bd077f0928972d6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f1Fsh5Y54mpL3UaJ"/></div></div></figure><h1 id="4274" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">将其更改为 4 列，如下所示</h1><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/9a4e61a14d0792ae7777b73979c1bc0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*510rMqPRADHZhEl1"/></div></div></figure><p id="1e3a" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">现在，我可以根据自己的意愿定义地块的布局，也可以决定要绘制什么。即使看起来挺容易的，网上也没找到相关的。所以也许这对你们有些人有帮助。)</p><h1 id="c7cc" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">关于</h1><p id="cb2c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">丹尼尔是一名企业家、软件开发人员和商业法毕业生。他曾在各种 IT 公司、税务咨询、管理咨询和奥地利法院工作。</p><p id="d0eb" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">他的知识和兴趣目前围绕着编程机器学习应用程序及其所有相关方面。从本质上说，他认为自己是复杂环境的问题解决者，这在他的各种项目中都有所体现。</p><p id="d8fc" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">如果您有想法、项目或问题，请不要犹豫与我们联系。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/82c84ffef86d7b2d2109d64d9949138d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5tZLM17cIURkk5Jp.png"/></div></div></figure><p id="416d" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">你可以在 https://www.buymeacoffee.com/createdd 支持我</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/28f456b7882413d79e1d6035049a1f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/0*HCaKLGFrMxyQ3StZ"/></div></figure><p id="8623" class="pw-post-body-paragraph kz la it lb b lc mr le lf lg ms li lj lk mt lm ln lo mu lq lr ls mv lu lv lw im bi translated">连接到:</p><ul class=""><li id="f2f7" class="lx ly it lb b lc mr lg ms lk ns lo nt ls nu lw mc md me mf bi translated"><a class="ae mg" href="https://www.linkedin.com/in/createdd" rel="noopener ugc nofollow" target="_blank">领英</a></li><li id="7bc3" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://github.com/Createdd" rel="noopener ugc nofollow" target="_blank"> Github </a></li><li id="2dd6" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://medium.com/@createdd" rel="noopener">中等</a></li><li id="ee0d" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://twitter.com/_createdd" rel="noopener ugc nofollow" target="_blank">推特</a></li><li id="c606" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://www.instagram.com/create.dd/" rel="noopener ugc nofollow" target="_blank"> Instagram </a></li><li id="db8b" class="lx ly it lb b lc mh lg mi lk mj lo mk ls ml lw mc md me mf bi translated"><a class="ae mg" href="https://www.createdd.com/" rel="noopener ugc nofollow" target="_blank">createdd.com</a></li></ul></div></div>    
</body>
</html>