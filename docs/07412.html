<html>
<head>
<title>3 Quick and Easy data visualisations inspired by Game of Thrones</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">受《权力的游戏》启发的 3 种快速简单的数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-quick-and-easy-data-visualisations-inspired-by-game-of-thrones-37c0e611b9bf?source=collection_archive---------50-----------------------#2020-06-04">https://towardsdatascience.com/3-quick-and-easy-data-visualisations-inspired-by-game-of-thrones-37c0e611b9bf?source=collection_archive---------50-----------------------#2020-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="edd7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">回答问题:我在看什么？</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/ba1a5878400b2e7737c0b5b3fe13eca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uvooBz5JyKZEHunWiqCYzg.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@souomau?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">mauricio Santos</a>在<a class="ae kz" href="https://unsplash.com/s/photos/game-of-thrones?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="379a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">又被隔离了一个下午。我决定通过玩一些有趣的数据来提高我的视觉化技能。在这篇文章中，你会发现:</p><ul class=""><li id="fe52" class="lw lx it lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">Seaborn 图书馆提供的热图</li><li id="8a0d" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">由 Plotly Express 提供的条形图</li><li id="32dc" class="lw lx it lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">散点图(带注释！)动力 Seaborn</li></ul><p id="caba" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我会揭开浏览量、收视率、每集死亡人数和史诗战役之间的关系！剧透警告:如果你认为你知道大量观众喜欢什么，请三思！</p><h1 id="ca7f" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">使用的数据集</h1><p id="74fa" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">用于收集每集<strong class="lc iu">收视率和</strong>浏览量的第一个数据集可以在<strong class="lc iu">Kaggle</strong>T12】这里找到。</p><p id="bc1b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我使用的第二个数据集总结了每集<strong class="lc iu">的死亡人数</strong>和<strong class="lc iu"> </strong>可以在<strong class="lc iu">数据世界</strong> <a class="ae kz" href="https://data.world/aendrew/game-of-thrones-deaths" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="798c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">关于我是如何根据季节和剧集连接这两个数据帧的更多信息可以在下面找到。</p><h1 id="df0e" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">IMDb 评级所有季节</h1><p id="1866" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">我希望能够看到的第一件事是每集的收视率，以及它在不同季节的变化。为此，我使用了 Seaborn 热图。</p><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="d22c" class="nm ml it ni b gy nn no l np nq">df1=pd.read_csv("Data/Heatmap_GOT.csv"<strong class="ni iu">, </strong>index_col=<strong class="ni iu">0</strong>)</span><span id="79c2" class="nm ml it ni b gy nr no l np nq">sns.heatmap(df1<strong class="ni iu">, </strong>annot=True<strong class="ni iu">, </strong>cmap='RdPu'<strong class="ni iu">, </strong>annot_kws={"size":<strong class="ni iu">8</strong>}<strong class="ni iu">, </strong>linewidths=<strong class="ni iu">.5</strong>)</span><span id="3891" class="nm ml it ni b gy nr no l np nq">plt.title('Game of Thrones - Rate IMDb'<strong class="ni iu">, </strong>fontsize=<strong class="ni iu">15</strong>)<br/>plt.show()</span></pre><p id="2700" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以清楚地看到，《权力的游戏》前七季的收视率非常出色，每一季的最后几集收视率都明显较高。当我们到达第八季时，出现了相当大的下降。我不喜欢批评…但是这里有几个可能导致低收视率的原因…</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ns"><img src="../Images/2260dd1b1c2862cf4752275054c0f375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R6xoaq9P_mQURYdMDPgC_Q.png"/></div></div></figure><h1 id="5c41" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">每季浏览量</h1><h2 id="325a" class="nm ml it bd mm nt nu dn mq nv nw dp mu lj nx ny mw ln nz oa my lr ob oc na od bi translated">最后一季的收视率明显较低，这是否意味着观看人数减少？</h2><p id="09af" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">让我们通过绘制每个季节的点击率来看一下。该柱状图是使用 plotly express 绘制的。<a class="ae kz" rel="noopener" target="_blank" href="/step-by-step-bar-charts-using-plotly-express-bb13a1264a8b">这里</a>是如何使用这个最近更新的新库的一步一步的教程。</p><blockquote class="oe of og"><p id="51f0" class="la lb oh lc b ld le ju lf lg lh jx li oi lk ll lm oj lo lp lq ok ls lt lu lv im bi translated"><strong class="lc iu">条形图</strong>在试图可视化少于 10 个类别的分类数据时非常有效。多了这些，剧情就会杂乱无章，难以理解。在处理分类数据时，我更喜欢使用条形图，因为我们可以通过简单地查看条形的大小来轻松地可视化类别之间的差异。此外，我们可以按颜色分类。</p></blockquote><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="e94c" class="nm ml it ni b gy nn no l np nq">views =df.groupby(['Season']).mean().reset_index()<br/>fig = px.bar(views,<br/>             x='Season',<br/>             y= 'views',<br/>             color='Season',<br/>             title = "Views (in millions) per season")<br/>fig.show()</span></pre><p id="f274" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">从第一季的 230 万到第八季的 1200 万，浏览量直线上升。这解释了为什么预算从第一季的 600 万美元增加到最后一季的 1500 万美元。不幸的是，我提出的假设被证明是错误的，因为收视率最低的那个季节有最多的浏览量！</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ol"><img src="../Images/d8d44941e1aa812a0469a35c35dc031f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2pf8cQPh5wcWisTozewnA.png"/></div></div></figure><h1 id="8708" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">每集死亡人数—假设检验 v.1</h1><p id="7134" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">我的一个假设是，有更多动作的剧集会转化成更多的观看次数，并且会从公众那里获得更高的收视率。为了形象化这种关系，我决定实现一个散点图，将浏览量和收视率联系起来。</p><blockquote class="oe of og"><p id="5f9d" class="la lb oh lc b ld le ju lf lg lh jx li oi lk ll lm oj lo lp lq ok ls lt lu lv im bi translated"><strong class="lc iu">散点图</strong>非常适合显示多个变量之间的关系，因为我们可以看到原始数据的分布。通过对各组进行颜色编码，我们可以查看不同数据组之间的关系。为了形象化三个变量，我们创建了另一个参数，比如点的大小，或者颜色。</p></blockquote><p id="8a89" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我做的第一件事是合并两个数据帧(视图和死亡)。我创建了一个公共列，对季节和情节进行编码。以第一季第二集为例，结果采用这种格式(1，2)。</p><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="83a5" class="nm ml it ni b gy nn no l np nq">df["episode"] = df["Season"].astype(str) + ","+df["Number in Season"].astype(str)<br/>deaths["episode"] = deaths["death_season"].astype(str) + ","+ deaths["death_episode"].astype(str)<br/><br/>merged = pd.merge(df<strong class="ni iu">, </strong>deaths<strong class="ni iu">, </strong>on='episode'<strong class="ni iu">, </strong>how='inner')</span></pre><p id="3d46" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用 groupby 函数，我对剧集进行排序，并保存“浏览量”、“收视率”和“死亡人数”这三列。</p><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="c302" class="nm ml it ni b gy nn no l np nq">new_merged = merged.groupby(['episode'<strong class="ni iu">,</strong>'views'<strong class="ni iu">,</strong>'Rating'<strong class="ni iu">, </strong>'Season'<strong class="ni iu">, </strong>'Death_Count']).size().reset_index(name='deaths')</span><span id="583a" class="nm ml it ni b gy nr no l np nq">ax = sns.scatterplot(data=new_merged<strong class="ni iu">,<br/>                     </strong>x="views"<strong class="ni iu">, </strong>y="Rating"<strong class="ni iu">,<br/>                     </strong>hue="deaths"<strong class="ni iu">, </strong>size="deaths")<br/>plt.show()</span></pre><p id="46b4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">情节上的每个圆圈代表系列中的一集。大小和颜色与事件中重大死亡的数量成线性关系。这种观想所提供的信息并没有导致任何结论性的结果。这一集的<strong class="lc iu">内容一定会强烈影响收视率，而且<strong class="lc iu">不仅仅是死亡</strong>！这是我将在下一节研究的内容。</strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi om"><img src="../Images/26d455dc055b41e88e572ecd26055afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*soAJMdneQkQ58Xj7YtSxpg.png"/></div></div></figure><h1 id="dab2" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">每集战斗—假设检验 v.2</h1><p id="95f0" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">我的第二个假设是观众喜欢战斗。谁不喜欢穿着闪亮盔甲的男人和女人为他们所爱的人而战。让我们看看这是否可以用数据来佐证。</p><p id="0a7c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我找不到包含该系列主要战役的数据集。我决定手动创建一个，用下面的<a class="ae kz" href="https://www.vulture.com/article/game-of-thrones-battles-ranked.html" rel="noopener ugc nofollow" target="_blank">网站</a>花了大约 8 分钟。</p><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="d4e2" class="nm ml it ni b gy nn no l np nq"># Create dataframe with main battles<br/>battles = {'Name': ["Frozen Lake Battle"<strong class="ni iu">, </strong>" Loot Train Attack"<strong class="ni iu">,<br/>              </strong>"Battle of Blackwater"<strong class="ni iu">, </strong>"Battle of Castle Black"<strong class="ni iu">, </strong>"Battle of the Bastards"<strong class="ni iu">, </strong>"Fall of King’s Landing"<strong class="ni iu">,<br/>              </strong>"Battle of Winterfell"<strong class="ni iu">, </strong>"Dance of Dragons"<strong class="ni iu">, </strong>"Stormbron"]<strong class="ni iu">,<br/>     </strong>'Episode': [<strong class="ni iu">6, 4, 9, 9, 9, 5, 3, 9, 2</strong>]<strong class="ni iu">,<br/>     </strong>'Season': [<strong class="ni iu">7, 7, 2, 4, 6, 8, 8, 5, 7</strong>]<br/>     }<br/>battles = pd.DataFrame(data=battles)</span></pre><p id="c9a5" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我将“战斗”数据帧与包含视图和评级的数据帧合并。我决定保持散点图的可视化，但是<strong class="lc iu">为包含一场战斗的每一集增加了一个标记</strong>。</p><pre class="kk kl km kn gt nh ni nj nk aw nl bi"><span id="4e23" class="nm ml it ni b gy nn no l np nq">battles["episode"] = battles["Season"].astype(str) + ","+ battles["Episode"].astype(str)<br/>d.drop(['Season'<strong class="ni iu">,</strong>'Episode' ]<strong class="ni iu">, </strong>axis=<strong class="ni iu">1, </strong>inplace=True)<br/>merged = pd.merge(df<strong class="ni iu">, </strong>battles<strong class="ni iu">, </strong>on='episode'<strong class="ni iu">, </strong>how='outer')<br/>merged = merged.replace(np.nan<strong class="ni iu">, </strong>''<strong class="ni iu">, </strong>regex=True)<br/><br/>p1=sns.scatterplot(data=merged<strong class="ni iu">, </strong>x="views"<strong class="ni iu">, </strong>y="Rating"<strong class="ni iu">, </strong>hue = 'Season')</span><span id="cd96" class="nm ml it ni b gy nr no l np nq">for n in range(<strong class="ni iu">0, </strong>merged.shape[<strong class="ni iu">0</strong>]):<br/>    p1.text(merged.views[n] + <strong class="ni iu">0.2, </strong>merged.Rating[n]<strong class="ni iu">, </strong>merged.Name[n]<strong class="ni iu">, </strong>horizontalalignment='center'<strong class="ni iu">, </strong>color='black'<strong class="ni iu">,</strong>weight='semibold'<strong class="ni iu">, </strong>fontsize=<strong class="ni iu">9</strong>)<br/>plt.show()</span></pre><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi on"><img src="../Images/421716b1c2ee6e6184882c9224057147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFOjrE8K0xTE5APS9Fsyfw.png"/></div></div></figure><p id="7fec" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">清澈见底，不是吗？有战斗的剧集收视率一直较高。唯一的例外仍然是排名较低的最后一季剧集，这可以从对应于该季的每个点的颜色看出。</p><h1 id="c465" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">感谢阅读！</h1><p id="eb73" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">如果你喜欢我的作品，我会非常感激你跟随我来到这里。</p><p id="211d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您对如何改进有任何问题、建议或想法，请在下面留下评论或通过 LinkedIn <a class="ae kz" href="https://www.linkedin.com/in/alejandra-g-283595b8" rel="noopener ugc nofollow" target="_blank">这里</a>取得联系。</p><h1 id="cf62" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">Github 知识库</h1><p id="f151" class="pw-post-body-paragraph la lb it lc b ld nc ju lf lg nd jx li lj ne ll lm ln nf lp lq lr ng lt lu lv im bi translated">所有代码都可以在 Github <a class="ae kz" href="https://github.com/alejandra-gutierrez/TVshows" rel="noopener ugc nofollow" target="_blank">这里</a>的<strong class="lc iu">gameoftrones . py</strong>文件中找到！</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oo"><img src="../Images/cf3eb56cae5288bacd3a1fc7a6358657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJDDybuUFyUlpvTaUiCDQA.png"/></div></div></figure></div></div>    
</body>
</html>