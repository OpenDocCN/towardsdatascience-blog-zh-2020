<html>
<head>
<title>A Complete Understanding of Precision, Recall, and F Score Concepts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完全理解精确度、召回率和 F 分数的概念</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-complete-understanding-of-precision-recall-and-f-score-concepts-23dc44defef6?source=collection_archive---------13-----------------------#2020-09-12">https://towardsdatascience.com/a-complete-understanding-of-precision-recall-and-f-score-concepts-23dc44defef6?source=collection_archive---------13-----------------------#2020-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/44aa6bb96a9a95feb9f7df8aaec022ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wT0m_BUmfcI6qXYZ"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@picsbyjameslee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">李中清</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><div class=""/><div class=""><h2 id="2392" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">机器学习中如何处理倾斜数据集</h2></div><p id="210e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用倾斜的数据集开发有效的机器学习算法可能会很棘手。例如，数据集是关于银行欺诈活动或癌症检测的。你会在数据集中看到，99%的情况下没有欺诈活动，或者没有癌症。你可以很容易地作弊，只要一直预测 0(如果有癌症预测 1，如果没有癌症预测 0)就可以获得 99%的准确率。如果我们这样做，我们将有 99%准确的机器学习算法，但我们永远不会检测到癌症。如果某人患有癌症，她/他将永远得不到治疗。在银行里，不会有针对欺诈行为的行动。因此，对于这样一个有偏差的数据集来说，光靠准确性是无法决定算法是否有效的。</p><h2 id="140c" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">背景</h2><p id="60c8" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">有不同的评估矩阵可以帮助处理这些类型的数据集。这些评估指标被称为精确召回评估指标。</p><p id="8716" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要了解精度和召回率，您需要理解下表及其所有术语。考虑二进制分类。它将返回 0 或 1。对于给定的训练数据，如果实际类为 1，预测类也为 1，则称为<strong class="la jk">真正</strong>。如果实际类别为 0，而预测类别为 1，则这是一个<strong class="la jk">假阳性</strong>。如果实际类别为 1，但预测类别为 0，则称为<strong class="la jk">假阴性</strong>。如果实际类别和预测类别都是 0，则这是<strong class="la jk">真否定</strong>。</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/837809273df21174c1bdebecadfeeced.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/0*I8WpstyWhaBE4JH2.png"/></div></figure><p id="a0ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">利用这些，我们将计算精度和召回率。</p><h2 id="6c6d" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">精确</h2><p id="bd9d" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Precision 计算我们预测为欺诈的交易(预测类别 1)中有多少部分实际上是欺诈的。<strong class="la jk">精度可以用下面的公式</strong>计算:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mx"><img src="../Images/587c67f1c1d6eff182d075636be56bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/0*KwI_qSdOspYwLOY4.png"/></div></div></figure><p id="87dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">进一步分解，这个公式可以写成:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi my"><img src="../Images/e2d7a610ea407b5371fa71ec8d57c2c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/0*SjlLg88wf2LmQ9Jj.png"/></div></figure><p id="a35e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从公式中可以看出，精度越高越好。因为更高的精度意味着更多的真阳性。这意味着当我们说这笔交易是欺诈性的，这是真的。</p><h2 id="ec99" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">回忆</h2><p id="4910" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">回忆告诉我们，所有最初是欺诈性的交易中有多少部分被检测为欺诈性的。这意味着当一笔交易实际上是欺诈性的，如果我们告诉适当的银行当局采取行动。当我第一次读到精确和回忆的定义时，我花了一些时间才真正理解它们的区别。我希望你越来越快。如果没有，那也不用担心。你并不孤单。</p><p id="8c94" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">召回率可通过以下公式计算:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/3be02d101d0f58a934cdcc51df3d2df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/0*9YemRBfBtX_AXIhI.png"/></div></figure><p id="1482" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用上面 2 x 2 表中定义的术语表示:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi na"><img src="../Images/0e12d98e8da24aae8fc254dc3157b4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/0*XDQaWD5rQda3qpzu.png"/></div></figure><h2 id="8679" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">根据精确度和召回率做出决策</h2><p id="9a6a" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">精确度和召回率让我们更好地了解算法实际上是如何工作的，尤其是当我们有一个高度倾斜的数据集时。如果我们一直预测 0，并且得到 99.5%的准确率，那么召回率和准确率都是 0。因为没有真正的阳性。所以，你知道分类器不是一个好的分类器。当精确度和召回率都很高时，这表明该算法做得非常好。</p><p id="e311" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们只在高度自信的情况下，想预测 y = 1。因为有些情况下它非常重要。尤其是当我们处理医疗数据时。假设我们正在检测某人是否患有心脏病或癌症。预测假阳性会给一个人的生活带来很多痛苦。提醒一下，一般来说，如果假设大于或等于 0.5，逻辑回归预测 1，如果假设小于 0.5，逻辑回归预测 0。</p><p id="20ad" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设≥ 0.5，则预测 1</p><p id="b808" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设&lt; 0.5，则预测为 0</p><p id="50f4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，当我们处理上述一些敏感情况时，我们希望对我们的结果更加确定，如果假设≥ 0.7，我们预测 1，如果假设&lt; 0.7，我们预测 0。如果你想对你的结果更有信心，你可以看到像 0.9 这样的值。所以你可以 90%确定某人是否患有癌症。</p><p id="cc03" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，看看精度和召回公式。真阳性和假阳性都会降低。所以，精度会更高。但另一方面，假阴性会更高，因为我们现在会预测更多的阴性。那样的话，召回会更高。但是太多的假阴性也不好。如果某人确实患有癌症，或者某个账户有欺诈活动，但我们告诉他们，他们没有癌症，或者该账户没有欺诈活动，这可能会导致灾难。</p><p id="7a06" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了避免假阴性并获得更高的召回率，我们需要将阈值更改为如下所示:</p><p id="2be7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设≥ 0.3，预测 1</p><p id="9717" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果假设&lt; 0.3，则预测为 0</p><p id="ba07" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与前一种情况相反，我们将有更高的召回率和更低的准确率。</p><p id="ff0c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么门槛怎么定呢？这将取决于你的要求是什么。根据您的数据集，您必须决定是需要更高的精度还是更高的召回率。这是精确回忆曲线:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/9008d309073bedbe8d95fec0dc0d5129.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/0*JTJUZnYXwYX2YMTz.png"/></div></figure><p id="3e5c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">精确召回曲线可以是任何形状。所以，我在这里展示了三种不同的形状。如果您不能自己决定是否需要更高的精确度或更高的召回率，您可以使用 F1 分数。</p><h2 id="34c8" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">F1 分数</h2><p id="9e15" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">F1 得分是准确率和召回率的平均值。但是平均的公式是不同的。常规的平均公式在这里不起作用。看平均公式:</p><p id="5ada" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">(精度+召回)/ 2</p><p id="4e5a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">即使精度是 0 或者召回率是 0，平均值仍然是 0.5。记住我们之前的讨论，精度为零是什么意思。我们总是可以预测 y = 1。因此，这是不可接受的。因为精确回忆的目的就是避免这种情况。F1 方程式的分数是:</p><figure class="mt mu mv mw gt iv gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/80b09f7ee2fe55d40c115692276ba028.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/0*SvyKlV2OPqgvraBc.png"/></div></figure><p id="277a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里，P 是精度，R 是召回率。如果精度为零或召回为零，F1 分数将为零。所以，你会知道分类器没有像我们想要的那样工作。当精确度和召回率都达到完美时，这意味着精确度是 1，召回率也是 1，F1 的分数也将是 1。所以，完美的 F1 分数是 1。<strong class="la jk">尝试不同的阈值并计算精确度、召回率和 F1 分数，以找出您的机器学习算法的最佳阈值，这是一个好主意。</strong></p><h2 id="a937" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">结论</h2><p id="da11" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在本文中，您了解了如何处理有偏差的数据集。如何使用 F1 分数在精确度和召回率之间做出选择？我希望它有帮助。</p><h2 id="4594" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">更多阅读</h2><div class="is it gp gr iu nd"><a rel="noopener follow" target="_blank" href="/multiclass-classification-algorithm-from-scratch-with-a-project-in-python-step-by-step-guide-485a83c79992"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd jk gy z fp ni fr fs nj fu fw ji bi translated">使用 Python 从零开始的多类分类算法:分步指南</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">本文介绍两种方法:梯度下降法和优化函数法</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ja nd"/></div></div></a></div><div class="is it gp gr iu nd"><a href="https://medium.com/towards-artificial-intelligence/build-a-neural-network-from-scratch-in-python-f23848b5a7c6" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd jk gy z fp ni fr fs nj fu fw ji bi translated">用 Python 从头开始构建神经网络</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">神经网络的详细说明和逐步实现</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="ns l no np nq nm nr ja nd"/></div></div></a></div><div class="is it gp gr iu nd"><a rel="noopener follow" target="_blank" href="/logistic-regression-in-python-to-detect-heart-disease-2892b138d0c0"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd jk gy z fp ni fr fs nj fu fw ji bi translated">Python 中用于检测心脏病的逻辑回归</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">发展逻辑回归演算法的重要方程式和如何发展逻辑回归演算法</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="nt l no np nq nm nr ja nd"/></div></div></a></div><div class="is it gp gr iu nd"><a href="https://medium.com/towards-artificial-intelligence/similar-texts-search-in-python-with-a-few-lines-of-code-an-nlp-project-9ace2861d261" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd jk gy z fp ni fr fs nj fu fw ji bi translated">用几行代码在 Python 中搜索相似的文本:一个 NLP 项目</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">使用 Python 中的计数矢量器和最近邻法查找类似的维基百科简介，这是一个简单而有用的…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="nu l no np nq nm nr ja nd"/></div></div></a></div><div class="is it gp gr iu nd"><a rel="noopener follow" target="_blank" href="/all-the-datasets-you-need-to-practice-data-science-skills-and-make-a-great-portfolio-857a348883b5"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd jk gy z fp ni fr fs nj fu fw ji bi translated">练习数据科学技能和制作优秀投资组合所需的所有数据集</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">一些有趣的数据集提升你的技能和投资组合</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="nv l no np nq nm nr ja nd"/></div></div></a></div></div></div>    
</body>
</html>