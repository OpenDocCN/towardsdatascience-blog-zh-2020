# 如何通过自动化变得更棒并节省时间

> 原文：<https://towardsdatascience.com/laziness-saved-my-friends-sanity-6683dcec2383?source=collection_archive---------56----------------------->

## 我写 Python 字数统计脚本时的一个实际用例

![](img/b9d6c884f42d850bf2d2b32afd60e436.png)

由[埃维·卡莱米](https://unsplash.com/@evik?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

和很多开发者一样，我很懒。我珍惜自己的时间，也珍惜亲人的时间。

当我看到一个朋友一遍又一遍地重复一项乏味的任务时，我感到沮丧，就好像这是我的负担一样。因为我讨厌重复的任务，所以我想找到一种自动化它们的方法。

# 拥抱懒惰

自动化包括给机器一套指令，让它替你做所有的重活。都是关于**效率**。我跟你说实话:我是一名专门从事移动开发的程序员。我对脚本语言没有特别的了解。

不久前，我看到一篇文章，这篇文章启发了我如何以及为什么我们可以让生活变得更轻松。

[](https://automatetheboringstuff.com/) [## 用 Python 自动化枯燥的东西

### “编程最好的部分是看到机器做一些有用的事情的胜利。用…自动化枯燥的工作

automatetheboringstuff.com](https://automatetheboringstuff.com/) 

# 这值得痛苦吗？

记住，大多数开发人员都很懒。写剧本对我来说听起来很痛苦。对你来说也一样。问自己这些问题:你介意重复同样的任务吗？你觉得手工做有价值吗？如果你在这些问题上犹豫不决，考虑投资一些时间在自动化上。

我想和你分享一个故事，这个故事让我为我的朋友写了一个小剧本。我决定选择 Python，因为这是一个发现这种语言的绝佳机会。

# 字数问题

有一天，女朋友带着任务来找我。她是一名专业内容作家。有时，她碰巧做翻译工作。有一次，一家公司给她发了一个剧本来翻译。以下是一个示例:

```
Joey and Phoebe meets in a bar
Joey(smiling): [<How're you doing?>]
Phoebe welcomes him with open arms
Phoebe(cheerful): [<Oh! I'm feeling great!>]
```

注意到文本中的分隔符了吗？该公司突出显示了要翻译的区域。其余的作为额外的信息——对从上下文中选择正确的语气至关重要。工作完成后，她需要将发票寄给公司。因为我的朋友是按单词收费的，她需要计算她翻译了多少单词。

任何文字处理软件都可以帮你统计字数。然而，她不能对整篇文章收费——并不是说她不介意账单。她必须首先排除括号外的内容。可惜公司没有给她提供这样的工具。

当她开始用手数单词时——我们谈论的是 50000 个单词！——我必须在她失去理智之前进行干预。

# 分析需求

任务很明确:在一个定义的分隔符内计算所有单词。我开始把它分解成更小的步骤:

1.  对于所有输入行，提取`[<`和`>]`之间的文本。
2.  将所有带格式的行合并成一个文本块。
3.  把这个模块分成一个单词列表
4.  计算列表的长度

考虑到这一点，我准备开始下一阶段。

# 用脚本自动化

我最终写了这个剧本:

word_counter.py

仅此而已！我承认我花了两个小时才把它放下。但这两个小时花得很值。我很自豪地看到几行代码可以为我的朋友节省这么多时间！她的理智也是！

她只需要将文本插入到`inputString`变量中，然后运行脚本来获得字数。

```
$ python word_counter.py
7 // there are seven words in the example above
```

对于没有入门的 Python 开发人员，我们来分解一下这段代码。

## 提取分隔符中的文本

第一步要求我使用正则表达式(Regex)。它们允许我提取符合特定模式的所有行。我以这个结尾:

```
import relist = re.findall(r'\[\<(.+?)\>\]', inputString)
// ['How're you doing?', 'Oh! I'm feeling great!']
```

首先，我们必须导入 Regex 库。然后，我们通过从`inputString`中找到所有以`[<`开头、以`>]`结尾的句子来创建一个`list`。最后，括号声明我们想要排除分隔符。作为注释，我展示了从本文开头的示例中获得的结果。

## 从提取的文本创建一个句子

我们要把`list`展平成一句话。我们需要将前面的列表加入到一个空字符串中。

```
subString = " ".join(list).replace('\xc2\xa0', ' ')
// "How're you doing?, Oh! I'm feeling great!"
```

注意到`replace`方法了吗？由于 UTF-8 编码，当复制粘贴你的文本时，一些[不间断空格](https://en.wikipedia.org/wiki/Non-breaking_space)会出现。我们可以用一个规则的空格代替它们来计算两个单词而不是一个。当我的朋友要开发票时，省略单词不会让她高兴！

## 将句子拆分成单词

对于这一步，一个简单的`split`就可以了。

```
words = subString.split()
// ['How're', 'you', 'doing?', 'Oh!', 'I'm', 'feeling', 'great!']
```

在继续之前，我必须检查结果是否正确。例如，你可能会惊讶于“怎么样”也算一个单词。我也很好奇。然而，任何在线工具都会证实这一点。

## 计数和打印

最后，计算并打印我们的`words`列表的大小。

```
count = len(subStr.split())
print count
// 7
```

# 如何理解它？

我知道这个剧本一点也不特别。有改进的余地。例如，我可以提取分隔符或输入文本等参数。

但它完成了任务。这就是我所关心的！

痛苦吗？不完全是。在不了解 Python 的情况下，我设法在几个小时内编写了一个小脚本。我甚至觉得写它很有趣！

值得吗？问我女朋友。到目前为止，她似乎很感谢有这个工具。