<html>
<head>
<title>AI in Industry: Why you should synchronize features in Time-Series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">工业中的人工智能:为什么你应该同步时间序列中的特征</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-in-industry-why-you-should-synchronize-features-in-time-series-f8a2e831f87?source=collection_archive---------76-----------------------#2020-06-22">https://towardsdatascience.com/ai-in-industry-why-you-should-synchronize-features-in-time-series-f8a2e831f87?source=collection_archive---------76-----------------------#2020-06-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bb78" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用几行代码提高模型的准确性，避免这个常见的陷阱。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c221def17a34632700fd1246cf452d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TsrKLCbGsRQGO-Fz"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Alexander Schimmeck 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e2d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不需要成为数据科学家就能体会这种感觉:现在是冬天，你早上打开“热”水龙头，需要几秒钟(有时更久)水才能从冷的温度升到理想的温度。</p><p id="12bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">原因很明显:热水需要时间从锅炉流到你手里。而且，换个说法，这两件事(要热水和得到一些)是“不同步”的。</p><p id="3df9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想在 t 时刻达到一个特定的温度，你必须预测水通过管道需要多长时间。</p><h1 id="1c31" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">这与工业中的建模过程有什么关系？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/294d2a56d29f136dee10938ef2fbc6c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b7XnqD7J7tZ8KgFO"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@spacexuan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">郭锦恩</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="0df9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您提取历史数据时，通常会得到一个带有时间戳的时间序列作为索引。该时间戳对应于记录值的时间:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/f6fcb1545c7da2fe4660567b811384c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*moY-pCV-J9Su8fdcpIgsSQ.png"/></div></figure><p id="c757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们假设产品的“<strong class="lb iu">粘度</strong>”是您的目标特性，并且在您的温度传感器和粘度计之间有一根 200 米长的管道。</p><p id="c99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您在 06:06 测量粘度“<strong class="lb iu"> 61 </strong>”时，同一时间测量的温度(10.8°C)是否会导致此结果？除非流量真的很快，大概不会！那么在建立机器学习模型时，应该考虑什么温度呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/8c703d848c5a5a84ba0e3f600462a831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbfJD4WnVg1LFTi4CNycHw.png"/></div></div></figure><p id="e1e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从工程的角度来看，你可以试着确定流速、管道直径等。猜猜产品从 A 到 b 需要多少秒。</p><h1 id="5c0c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">从数据科学的角度来看，您可以使用数据本身来确定这种“不同步”并对其进行处理！</h1><p id="997b" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">像往常一样，没有什么比一个简单的例子更好地理解我们如何应对这个问题了。</p><p id="bb32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建 3 个循环特征(x1、x2 和 x3)和相应的目标“y”，作为所有这些特征的加权组合。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/d5d657dbf00506cdb66eff1d1d45edd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HWI7fZlhLpXte3Dm35ZtaQ.png"/></div></div></figure><p id="07fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来计算一下(显然很强！)x1、x2、x3 和 y 之间的相关性:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="31ba" class="nd lw it mz b gy ne nf l ng nh"><strong class="mz iu">df.corr().loc["y",:]</strong></span><span id="a2f4" class="nd lw it mz b gy ni nf l ng nh">x1    0.989357<br/>x2    0.961574<br/>x3    0.990654</span></pre><p id="1bf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们在 x 特征和 y 特征之间引入一个随机延迟，因为在现实生活中，在“x1”、“x2”或“x3”上的变化确实影响“y”上的测量之前，应该需要几秒、几分钟甚至有时几小时。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(x1 移至-34；x2 移至-32；x3 偏移了-19)</p></figure><p id="14be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的滞后现在是"<strong class="lb iu">视觉上明显的</strong>"但是让我们记住真实的情况要复杂得多！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/c639f6c58f39aa53057e2c757eb9cf42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foAtSYVmLn3GCeKpy9w6Sw.png"/></div></div></figure><p id="a552" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以将这个数据集视为我们的基线，因为“<strong class="lb iu">去同步特征</strong>是我们在现实生活中会得到的。正如您在下面看到的，功能之间的相关性已经急剧下降:</p><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="40cb" class="nd lw it mz b gy ne nf l ng nh"><strong class="mz iu">df.corr().loc["y",:]</strong></span><span id="f85b" class="nd lw it mz b gy ni nf l ng nh">x1          x1_shifted<br/>0.989141 -&gt; 0.748233</span><span id="87cc" class="nd lw it mz b gy ni nf l ng nh">x2          x2_shifted<br/>0.959595 -&gt; 0.706007</span><span id="c157" class="nd lw it mz b gy ni nf l ng nh">x3          x3_shifted<br/>0.990252 -&gt; 0.914779</span></pre><p id="e6a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在只需循环每个特征并增加偏移值，以观察系数相关性如何演变。</p><p id="0857" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当它达到其峰值时，那么它应该是目标和所述特征之间的实际滞后:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div></figure><pre class="kj kk kl km gt my mz na nb aw nc bi"><span id="a3a5" class="nd lw it mz b gy ne nf l ng nh">Best shift of x1_shifted at 34 with 0.9887480759856975<br/>Best shift of x2_shifted at 32 with 0.9584397947951305<br/>Best shift of x3_shifted at 19 with 0.9899320966442271</span></pre><p id="6136" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">这与数据集中引入的初始滞后相匹配！<br/> </strong>(如果你没有看过，它们写在执行功能转换的代码下面。)</p><p id="1a40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以查看 15 和 40 之间的行，以再次检查这些等级是否确实对应于相关峰值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/800c95d8eee3bfb0a0f5425e221982bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*BSUy6HL5krcNddAgb2ie9A.png"/></div></figure><p id="3156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以获取初始数据集，并根据相应的滞后移动每个要素。由于这一点，机器学习算法将创建一个模型，其中目标及其影响参数很好地同步，并获得最佳的潜在结果！</p><p id="1e82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像往常一样，在我们结束这篇文章之前，有一些评论:</p><ul class=""><li id="60b7" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">无论何时运行模型来预测目标，<strong class="lb iu">“实时”数据集也应该以同样的方式重新同步</strong>。</li><li id="14fd" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">运行"<strong class="lb iu"> pandas 时使用的默认关联方法。DataFrame.corr </strong>为“<strong class="lb iu"> Pearson </strong>”，适用于线性关系。如果你假设你的特征和目标有<strong class="lb iu">非线性关系</strong>，那么“<strong class="lb iu"> Spearman </strong>”等级相关系数将是一个更聪明的选择。</li><li id="cf4f" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated">我发现了一些案例，其中一个<strong class="lb iu">数学奇点导致了一个从物理角度来看不可能的转变提议(太远或太近)</strong>。这就是为什么与现场专家交叉验证这些变化总是更好。</li><li id="cd6f" class="nl nm it lb b lc nu lf nv li nw lm nx lq ny lu nq nr ns nt bi translated"><strong class="lb iu">深度学习架构</strong>，如<strong class="lb iu">长短期记忆(LSTM)神经网络</strong>也有能力管理这种特征的重新同步，但从计算角度来看，它通常更重。</li></ul><div class="nz oa gp gr ob oc"><a href="https://pl-bescond.medium.com/pierre-louis-besconds-articles-on-medium-f6632a6895ad" rel="noopener follow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">皮埃尔-路易·贝斯康德关于媒介的文章</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">数据科学、机器学习和创新</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">pl-bescond.medium.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>