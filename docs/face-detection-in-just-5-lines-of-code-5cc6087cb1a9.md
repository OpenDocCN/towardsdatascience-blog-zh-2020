# ä»…ç”¨ 5 è¡Œä»£ç å®ç°äººè„¸æ£€æµ‹

> åŸæ–‡ï¼š<https://towardsdatascience.com/face-detection-in-just-5-lines-of-code-5cc6087cb1a9?source=collection_archive---------19----------------------->

## ä½¿ç”¨ä¸–ç•Œä¸Šæœ€ç®€å•çš„äººè„¸è¯†åˆ« python åº“æ¥è¯†åˆ«å’Œæ“ä½œäººè„¸ã€‚

![](img/6397c978e04a06bc73ebad403a9574d1.png)

ä»å°åº¦å°¼è¥¿äºšä¸€ç¾¤å­©å­çš„å›¾åƒä¸­æ£€æµ‹äººè„¸ã€‚å›¾ç‰‡ç”± Pixabay æä¾›ã€‚

F **ç‹ç‰Œæ£€æµ‹**æ˜¯æ·±åº¦å­¦ä¹ çš„è®¡ç®—æœºæŠ€æœ¯å¸ˆã€‚å®ƒè¯†åˆ«æ•°å­—å›¾åƒæˆ–è§†é¢‘åœºæ™¯ä¸­çš„äººè„¸ã€‚å®ƒè¢«ç”¨äºå¤šç§åº”ç”¨ï¼Œå¦‚**é¢éƒ¨è¯†åˆ«ã€è§£é”æ™ºèƒ½æ‰‹æœºã€æ™ºèƒ½å¹¿å‘Šã€æƒ…æ„Ÿæ¨æ–­**ç­‰ç­‰ã€‚

**æ·±åº¦å­¦ä¹ **æ˜¯äººå·¥æ™ºèƒ½(AI)ä¸­**æœºå™¨å­¦ä¹ **çš„å­é›†ï¼Œå®ƒæ‹¥æœ‰èƒ½å¤Ÿä»éç»“æ„åŒ–æˆ–æ— æ ‡ç­¾çš„æ•°æ®ä¸­è¿›è¡Œæ— ç›‘ç£å­¦ä¹ çš„ç½‘ç»œã€‚

> â€œè®¡ç®—æœºç°åœ¨èƒ½å¤Ÿçœ‹ã€å¬å’Œå­¦ä¹ ã€‚æ¬¢è¿æ¥åˆ°æœªæ¥ï¼â€â€”æˆ´å¤«Â·æ²ƒç‰¹æ–¯

åœ¨è¿™ä¸ªåˆå­¦è€…æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å®‰è£…å’Œé…ç½® python ç¯å¢ƒï¼Œä½¿ç”¨é›†æˆå¼€å‘ç¯å¢ƒ(ide)æ¥è°ƒè¯•å’Œè¿è¡Œæˆ‘ä»¬çš„ python ä»£ç ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨å¹¿æ³›æµè¡Œçš„äººè„¸æ£€æµ‹å’Œæ“ä½œåº“**ç”± [Adam Geitgey](https://github.com/ageitgey) å¼€å‘çš„äººè„¸è¯†åˆ«**ã€‚æˆ‘ä»¬å°†åœ¨æ£€æµ‹åˆ°çš„ facesğŸ•µ.å‘¨å›´å®šåˆ¶ä¸åŒé¢œè‰²å’Œè¾¹æ¡†å½¢çŠ¶çš„å›¾åƒå®ƒæ˜¯ä½¿ç”¨ dlib æœ€å…ˆè¿›çš„å…·æœ‰æ·±åº¦å­¦ä¹ åŠŸèƒ½çš„äººè„¸è¯†åˆ«æŠ€æœ¯æ„å»ºçš„ã€‚è¯¥æ¨¡å‹åœ¨ Wild åŸºå‡†ä¸­çš„æ ‡è®°äººè„¸ä¸Šå…·æœ‰ 99.38%çš„å‡†ç¡®ç‡ã€‚

**TLï¼›åšå£«**æœ¬æ•™ç¨‹æ˜¯ä¸º**ç»å¯¹åˆå­¦è€…**å‡†å¤‡çš„ï¼Œå³ä½¿ä½ æ˜¯åˆšæ¯•ä¸šçš„å­¦ç”Ÿæˆ–è€…æ˜¯æœŸå¾…ä½¿ç”¨ python å¼€å§‹æœºå™¨å­¦ä¹ çš„äººã€‚åƒ **Web å’Œç§»åŠ¨å¼€å‘è€…**æˆ–**åç«¯å¼€å‘è€…**è¿™æ ·çš„æŠ€æœ¯å †æ ˆå¼€å‘è€…ä¹Ÿå¯ä»¥è½»æ¾åœ°é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹æ–°çš„ç®€çŸ­çš„ä»£ç ä¹‹æ—…ã€‚

# ç¯å¢ƒé…ç½®å’Œå®‰è£…

é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½ [**Python**](https://www.python.org/downloads/) çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚

é€šå¸¸æœ‰ä¸¤ç§è‘—åçš„æ–¹æ³•æ¥é…ç½® python ç¯å¢ƒå¹¶åœ¨æˆ‘ä»¬çš„è®¡ç®—æœºä¸Šå®‰è£…è½¯ä»¶åŒ…â€”â€”pip æˆ– condoã€‚

python åŒ…åŒ…å«æ¨¡å—æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ã€‚æ¨¡å—æ˜¯å¯ä»¥åŒ…å«åœ¨é¡¹ç›®ä¸­çš„ Python ä»£ç åº“ã€‚

1.  [**PIP**](https://www.w3schools.com/python/python_pip.asp)**-**ä¸€ä¸ªç”¨äº Python åŒ…çš„åŒ…ç®¡ç†å™¨ã€‚
2.  [**Anaconda**](https://docs.anaconda.com/anaconda/user-guide/getting-started/)**-**ä¸€ä¸ªå®Œæ•´çš„ python ç¯å¢ƒè§£å†³æ–¹æ¡ˆï¼Œè¿è¡Œä¸åŒç‰ˆæœ¬ï¼Œç®¡ç†æ‰€æœ‰ python åŒ…ã€‚ä½¿ç”¨ Anaconda Navigatorï¼Œæ‚¨å¯ä»¥å®‰è£…å’Œç®¡ç†è®¡ç®—æœºä¸­çš„æ‰€æœ‰è½¯ä»¶åŒ…ã€‚

æ‚¨å¯ä»¥å…³æ³¨å…¶ä¸­ä»»ä½•ä¸€ä¸ªæˆ–ä¸¤ä¸ªã€‚

# **ä»£ç ç¼–è¾‘å™¨å’Œ IDE**

é™¤äº†åŸºæœ¬çš„ python **REPL** (å‘½ä»¤è¡Œç•Œé¢)ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸¤ä¸ªä¸“ä¸šç¼–è¾‘å™¨ä¸­è¿è¡Œæˆ‘ä»¬çš„ python ç¨‹åº

1.  [**py charm**](https://www.jetbrains.com/pycharm/)**-**ä¸‹è½½çƒ­é—¨é¢å‘ä¸“ä¸šå¼€å‘è€…çš„ Python IDE å¹¶å¼€å§‹ã€‚å®ƒå°±åƒå…¶ä»–è‘—åçš„ IDE ä¸€æ ·ï¼Œå¯åŠ¨å’Œä½¿ç”¨éƒ½å¾ˆç®€å•ã€‚
2.  [**Jupyter ç¬”è®°æœ¬**](https://jupyter.org/) **-** è¢«ç¨‹åºå‘˜å’Œä¸“ä¸šåŸ¹è®­å¸ˆå¹¿æ³›ä½¿ç”¨çš„åŸºäºç½‘ç»œçš„ä»£ç ç¼–è¾‘å™¨ã€‚

ä½¿ç”¨åº·è¾¾å®‰è£… Jupyter ç¬”è®°æœ¬ç”µè„‘

```
conda install -c conda-forge notebook
```

æˆ–è€…ä½¿ç”¨ pip å®‰è£…ï¼Œç„¶åè¿è¡Œ Jupiter notebook æ¥è¿è¡Œå®ƒ-

```
pip install notebook
jupyter notebook
```

è¿™è¶³ä»¥è®©æˆ‘ä»¬å¼€å§‹ç¼–å†™ç¬¬ä¸€ä¸ª Python ç¨‹åºå¹¶è¿è¡Œå®ƒã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ä»»ä½•ä¸€ä¸ªç¼–è¾‘å™¨ã€‚åœ¨æˆ‘ä»¬çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ PyCharm ç¼–å†™å¸¦æœ‰ pip åŒ…ç®¡ç†å™¨çš„ä»£ç æ¥å®‰è£…åŒ…ã€‚

æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹åœ¨ä»»ä½•ç»™å®šçš„å›¾åƒå’Œç…§ç‰‡ä¸­æ£€æµ‹äººè„¸ã€‚ä½ ä¸å…´å¥‹å—ï¼ŸğŸ˜€

giphy.com çš„ Gif

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®‰è£…ä»£ç è¿è¡Œæ‰€éœ€çš„åº“ã€‚æˆ‘ä»¬å°†åªå®‰è£…å’Œå¯¼å…¥ 2 ä¸ªåº“ã€‚

1.  [**æ•**](https://pypi.org/project/Pillow/) **-** å‹å¥½çš„ PIL å‰(Python å½±åƒåº“)ã€‚
2.  [](https://pypi.org/project/face-recognition/#description)****-æ£€æµ‹å›¾åƒä¸­çš„äººè„¸ã€‚****

```
**pip install Pillowpip install face-recognition**
```

****æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª python ç±»å‹çš„æ–°æ–‡ä»¶(æ‰©å±•åä¸º**)ã€‚py** )æˆ–è€… Jupyter ç¬”è®°æœ¬ä¸­çš„æ–°ç¬”è®°æœ¬å¼€å§‹ç¼–ç â€” **face_detection.py** ã€‚å¦‚æœå®ƒéœ€è¦å…¶ä»–ç›¸å…³çš„åº“ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ pip æˆ– conda ç®€å•åœ°å®‰è£…å®ƒä»¬ã€‚****

****è®©æˆ‘ä»¬åœ¨ä»£ç ä¸­å¯¼å…¥ä¸Šè¿°åº“-****

```
****import** PIL.Image
**import** PIL.ImageDraw
**import** face_recognition**
```

## ****ç¬¬ä¸€è¡Œ****

****è®©æˆ‘ä»¬åœ¨ä»£ç æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸­é€‰æ‹©ä¸€ä¸ªåä¸º GroupYoga.jpg çš„å›¾ç‰‡(ä½ å¯ä»¥é€‰æ‹©ä»»ä½•å›¾ç‰‡),æˆ–è€…ç»™å‡ºå›¾ç‰‡çš„æ­£ç¡®è·¯å¾„ã€‚æˆ‘ä»¬åº”è¯¥ä» face_recognition åº“ä¸­å°†æˆ‘ä»¬çš„å›¾åƒåŠ è½½åˆ° **load_image_file()** æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå°†å®ƒè½¬æ¢æˆè¯¥å›¾åƒçš„ [**NumPy**](https://numpy.org/) æ•°ç»„ã€‚æˆ‘ä»¬æŠŠå®ƒèµ‹ç»™å˜é‡å **given_image** ã€‚****

```
**given_image = face_recognition.load_image_file(**'GroupYoga.jpg'**)**
```

## ****ç¬¬äºŒè¡Œ****

****ä½¿ç”¨åŒä¸€ä¸ªåº“ä¸­çš„ **face_locations()** æ–¹æ³•ï¼Œæˆ‘ä»¬å°†è®¡ç®—ç»™å®š _image ä¸­çš„äººè„¸æ•°é‡ï¼Œå¹¶å°†æ‰“å°å›¾åƒä¸­æ‰¾åˆ°çš„æ‰€æœ‰äººè„¸çš„é•¿åº¦ã€‚****

```
**face_locations = face_recognition.face_locations(given_image)

number_of_faces = len(face_locations)
print(**"We found {} face(s) in this image."**.format(number_of_faces))**
```

## ****ç¬¬ 3 è¡Œ****

****ç°åœ¨ï¼Œä¸ºäº†åœ¨å›¾åƒä¸Šç»˜åˆ¶ä»»ä½•å½¢çŠ¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ PIL.Image ä¸­çš„ **fromarray()** æ–¹æ³•å°†å›¾åƒè½¬æ¢ä¸ºæ•å¤´åº“å¯¹è±¡ã€‚****

```
**pil_image = PIL.Image.fromarray(given_image)**
```

## ****ç¬¬ 4 è¡Œ****

****ç°åœ¨ï¼Œæˆ‘ä»¬å°†è¿è¡Œä¸€ä¸ª for-in å¾ªç¯æ¥æ‰“å°å››ä¸ªåƒç´ ä½ç½®ï¼Œå¦‚æ£€æµ‹åˆ°çš„äººè„¸çš„ä¸Šã€å·¦ã€ä¸‹å’Œå³ã€‚****

```
****for** face_location **in** face_locations:top, left, bottom, right = face_location
    print(**"A face is detected at pixel location Top: {}, Left: {}, Bottom: {}, Right: {}"**.format(top, left, bottom, right))**
```

## ****ç¬¬ 5 è¡Œ****

****æˆ‘ä»¬å°†ç»˜åˆ¶ä¸€ä¸ªç»¿è‰²çš„çŸ©å½¢æ¡†ï¼Œå®½åº¦ä¸º 10ã€‚æ‚¨ä¹Ÿå¯ä»¥å°†å½¢çŠ¶æ›´æ”¹ä¸ºå¤šè¾¹å½¢æˆ–æ¤­åœ†å½¢ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šé¢çš„å¾ªç¯ä¸­å†™ä¸‹é¢çš„ä¸¤ä¸ªç»˜åˆ¶æ–¹æ³•ã€‚****

```
**draw = PIL.ImageDraw.Draw(pil_image)
draw.rectangle([left, top, right, bottom], outline=**"green"**, width=10)**
```

****ç°åœ¨ï¼Œåªéœ€ä½¿ç”¨å˜é‡ **pil_image** æ¥æ˜¾ç¤ºæˆ‘ä»¬çš„æ–°å›¾åƒï¼Œå…¶ä¸­æ£€æµ‹åˆ°çš„äººè„¸å‘¨å›´ä½¿ç”¨çŸ©å½¢è¾¹æ¡†ã€‚****

```
**pil_image.show()**
```

****æ–°çš„ä¸´æ—¶æ˜ åƒå°†åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šè‡ªåŠ¨æ‰“å¼€(å¦‚æœä¸€åˆ‡è®¾ç½®æ­£ç¡®)ã€‚å®ƒåº”è¯¥æ˜¯ç±»ä¼¼ä¸‹å›¾çš„ä¸œè¥¿-****

****![](img/ad7ea8eb62665829b328526ffc7463c3.png)****

****æ£€æµ‹åˆ°åšç‘œä¼½çš„å¥³äººçš„è„¸ã€‚å›¾ç‰‡ç”± Pexels æä¾›ã€‚****

****ç­”å¯¹äº†ã€‚ğŸ‰****

> ****å¦‚æœæ‚¨é‡åˆ°ä»»ä½•ç¼–è¯‘æ—¶æˆ–è¿è¡Œæ—¶é—®é¢˜ä»¥åŠç¯å¢ƒé…ç½®é—®é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„å›å¤éƒ¨åˆ†å†™ä¸‹ï¼Œæˆ–è€…ä¸æˆ‘è”ç³»ã€‚****

****ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠä¸Šé¢æ‰€æœ‰çš„å°ä»£ç ç‰‡æ®µæ”¶é›†åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥åœ¨ä»»ä½• python ç¯å¢ƒä¸­è¿è¡Œã€‚è®©æˆ‘ä»¬ä½¿ç”¨å­¦æ ¡å­©å­çš„å½¢è±¡(ä½œä¸ºæ–‡ç« å°é¢çš„ç‰¹è‰²)****

****face_detection.py ä¸­çš„å®Œæ•´ä»£ç ****

****å¦‚æœæ‚¨è¿è¡Œä¸Šé¢çš„æ–‡ä»¶(PyCharm æˆ– Notebook ä¸­çš„ run æŒ‰é’®)ï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸(æˆ‘æŒ‡çš„æ˜¯ç¼–è¯‘æˆ–è¿è¡Œæ—¶é”™è¯¯)ï¼Œæ‚¨å°†åœ¨ç¼–è¾‘å™¨çš„æ§åˆ¶å°å¾—åˆ°ä¸‹é¢çš„è¾“å‡º-****

****PyCharm ä¸­çš„æ§åˆ¶å°è¾“å‡º****

****å°±æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬æœ€ç®€å•çš„äººè„¸æ£€æµ‹ğŸ­ä»£ç å·²å‡†å¤‡å¥½ä»ä»»ä½•ç»™å®šçš„ç…§ç‰‡ä¸­è¯†åˆ«äººè„¸ã€‚æ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹é¢œè‰²ã€è¾¹æ¡†ç±»å‹å’Œå®½åº¦æ¥è‡ªå®šä¹‰ä¸Šé¢çš„ä»£ç ã€‚æˆ‘å»ºè®®å°è¯•å®šåˆ¶ï¼Œå¹¶æ¢ç´¢å…¶ä»–æ–¹æ³•å’Œé€‰é¡¹ã€‚****

> ******Face _ recognition**library è¿˜å¯ä»¥ç”¨æ¥åœ¨äººè„¸ä¸Šè¿›è¡Œ**æ•°ç åŒ–å¦†**ï¼Œåœ¨ä¸€ç¾¤äººä¸­æ£€æŸ¥**ç›¸ä¼¼çš„äººè„¸**ï¼Œå›´ç»•è¿™äº›æ£€æµ‹åˆ°çš„äººè„¸å¼€å‘ä¸€äº›**æ¸¸æˆ**ã€‚****

****æˆ‘ç›¸ä¿¡ä½ ä¼šå‘ç°å®ƒæ˜¯äº’è”ç½‘ä¸Šæ‰€æœ‰æŠ€æœ¯æ–‡ç« ä¸­æœ€ç®€å•çš„äººè„¸æ£€æµ‹æ•™ç¨‹ä¹‹ä¸€ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‚è€ƒèµ„æ–™æ¥äº†è§£è¿™ä¸ªåº“çš„æ›´å¤šç»†èŠ‚ã€‚å¯¹äºè¿™ä¸ªåº“çš„å…¶ä»–åº”ç”¨ï¼Œä¸‹æ¬¡æˆ‘ä¼šå†™ä¸€äº›å…¶ä»–çš„æ–‡ç« ã€‚****

******èµ„æº:******

****[](https://pypi.org/project/face-recognition/) [## äººè„¸è¯†åˆ«

### æŸ¥æ‰¾å›¾ç‰‡ä¸­çš„é¢å­”æŸ¥æ‰¾å‡ºç°åœ¨å›¾ç‰‡ä¸­çš„æ‰€æœ‰é¢å­”:æŸ¥æ‰¾å’Œå¤„ç†å›¾ç‰‡ä¸­çš„é¢éƒ¨ç‰¹å¾è·å–â€¦

pypi.org](https://pypi.org/project/face-recognition/) [](https://github.com/ageitgey/face_recognition) [## å¹´é¾„/é¢éƒ¨è¯†åˆ«

### You can also read a translated version of this file in Chinese ç®€ä½“ä¸­æ–‡ç‰ˆ or in Korean í•œêµ­ì–´ or in Japanese æ—¥æœ¬èª. Recognize andâ€¦

github.com](https://github.com/ageitgey/face_recognition) 

åœ¨ Medium ä¸Šå…³æ³¨æˆ‘ï¼Œè®©æˆ‘ä»¬åœ¨ LinkedIn([@ kapilraghuwansh](https://www.linkedin.com/in/kapilraghuwanshi/)I)å’Œ Twitter ( [@techygeeek](https://twitter.com/techygeeeky) y)ä¸Šä¿æŒè”ç³»ï¼Œä»¥è·å–æ›´å¤šæ­¤ç±»æœ‰è¶£çš„ç§‘æŠ€æ–‡ç« ã€‚ğŸ¤****