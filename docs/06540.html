<html>
<head>
<title>Create Simple Optical Character Recognition (OCR) with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 创建简单的光学字符识别(OCR)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-simple-optical-character-recognition-ocr-with-python-6d90adb82bb8?source=collection_archive---------12-----------------------#2020-05-24">https://towardsdatascience.com/create-simple-optical-character-recognition-ocr-with-python-6d90adb82bb8?source=collection_archive---------12-----------------------#2020-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1826" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">宇宙魔方光学字符识别初学者指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3a89d72d09078fefcd15feca786a5c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ThTJ2xghdAIZfJ3F"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sortino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">约书亚·索特诺</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">号航天飞机</a>上拍摄的照片</p></figure><p id="ea18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当为文本挖掘过程收集数据或查找其他参考资料时，我们经常会找到图像形式的源。例如，如果我们要分析 pdf 格式的单词，文件会包含文本图像。这无疑使数据处理变得困难。解决这个问题的一个方法是我们可以使用光学字符识别(OCR)。</p><p id="29c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">OCR 是一种识别图像中文本的技术，例如扫描文档和照片。常用的 OCR 工具之一是<a class="ae ky" href="https://github.com/tesseract-ocr/tesseract" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">魔方</strong> </a>。宇宙魔方是各种操作系统的光学字符识别引擎。它最初是由惠普公司作为专有软件开发的。后来谷歌接管了开发。</p><p id="c974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，宇宙魔方在 Windows、macOS 和 Linux 平台上运行良好。宇宙魔方支持 Unicode (UTF-8)并支持 100 多种语言。在本文中，我们将从镶嵌 OCR 安装过程开始，并测试图像中文本的提取。</p><p id="2d7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">第一步是安装宇宙魔方。为了使用宇宙魔方库，我们首先需要在我们的系统上安装它。如果您正在使用 Ubuntu，您可以简单地使用 apt-get 来安装宇宙魔方光学字符识别:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9a19" class="ma mb it lw b gy mc md l me mf">sudo apt-get install tesseract-ocr</span></pre><p id="9f52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于 macOS 用户，我们将使用自制软件来安装宇宙魔方。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="41af" class="ma mb it lw b gy mc md l me mf">brew install tesseract</span></pre><p id="3fd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于 Windows，请参见<a class="ae ky" href="https://github.com/tesseract-ocr/tesseract/wiki#windows" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">魔方文档</strong> </a>。让我们从安装侏儒怪开始。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0acf" class="ma mb it lw b gy mc md l me mf">$ pip install pytesseract</span></pre><p id="5880" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，让我们继续用 python 应用宇宙魔方。首先，我们导入依赖项。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e0d1" class="ma mb it lw b gy mc md l me mf">from PIL import Image<br/>import pytesseract<br/>import numpy as np</span></pre><p id="a941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将使用一个简单的图像来测试魔方的用法。我将使用下面的图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/8ed4c502291325471491db6d006dfa81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*aaVVxd-U6A5cyiSGF-L0Tg.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">示例图像</p></figure><p id="1439" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们加载此图像并将其转换为文本。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fec7" class="ma mb it lw b gy mc md l me mf">filename = 'image_01.png'<br/>img1 = np.array(Image.open(filename))<br/>text = pytesseract.image_to_string(img1)</span></pre><p id="60cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们看看结果。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e446" class="ma mb it lw b gy mc md l me mf">print(text)</span></pre><p id="1b88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/a39f3c07113397f62f31b9f3208af95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*mpiWVYeMn01NUbt_Z5OyTw.png"/></div></figure><p id="c9b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从宇宙魔方获得的结果对于简单的图像来说已经足够好了。因为在现实世界中很难找到真正简单的图像，所以我将添加噪声来观察宇宙魔方的性能。我将使用下面的图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/f3a4334b6cc38e46e0ada1d4cf618212.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*3Ml2iK2fx6H4hiyq4E-hKg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">有噪声的样本图像</p></figure><p id="6485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将执行与之前相同的过程。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="233b" class="ma mb it lw b gy mc md l me mf">filename = 'image_02.png'<br/>img2 = np.array(Image.open(filename))<br/>text = pytesseract.image_to_string(img2)<br/>print(text)</span></pre><p id="8297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/874fa343aa060b5a7a3d4e9a530ae00a.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*PZXZeoSpnyoIH3pkB5LB0Q.png"/></div></figure><p id="93f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果是……没什么。这意味着宇宙魔方无法读取有噪声的图像中的单词。</p><p id="d8ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们尝试使用一点图像处理来消除图像中的噪声。在这里，我将使用开放简历库。在这个实验中，我使用归一化，阈值和图像模糊。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e344" class="ma mb it lw b gy mc md l me mf">import numpy as np<br/>import cv2</span><span id="8ced" class="ma mb it lw b gy mk md l me mf">norm_img = np.zeros((img.shape[0], img.shape[1]))<br/>img = cv2.normalize(img, norm_img, 0, 255, cv2.NORM_MINMAX)<br/>img = cv2.threshold(img, 100, 255, cv2.THRESH_BINARY)[1]<br/>img = cv2.GaussianBlur(img, (1, 1), 0)</span></pre><p id="2347" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么结果就会是这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/a20e46c5483bd432e8d02e8d514d4bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*qSN-cm850eeslxStdwjUwA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预处理图像</p></figure><p id="2963" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像足够干净，然后我们将再次尝试与以前相同的过程。这就是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/4915b30cb0d66b83b54eb2f1d109453b.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*AxKFA-s8YAlrGvnip1aYIw.png"/></div></figure><p id="322f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上图可以看出，结果与我们所期望的一致。</p><div class="mm mn gp gr mo mp"><a href="https://medium.com/@fahmisalman/an-easy-way-of-creating-text-localization-and-detection-in-tesseract-ocr-24cc89ed6fbc" rel="noopener follow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd iu gy z fp mu fr fs mv fu fw is bi translated">在 Tesseract OCR 中创建文本定位和检测的简单方法</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">如何利用 Tesseract 来检测、定位和 OCR 文本</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd ks mp"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="0394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以得出的结论是，当构建扫描和处理图像的文档处理管道时，tesseract 是最合适的。这最适合高分辨率输入的情况，在这种情况下，前景文本从背景中整齐地分割出来。</p></div></div>    
</body>
</html>