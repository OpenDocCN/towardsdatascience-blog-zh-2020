<html>
<head>
<title>Analyzing #WhenTrumpIsOutOfOffice tweets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析#WhenTrumpIsOutOfOffice 推文</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-whentrumpisoutofoffice-tweets-7169b3e5ca35?source=collection_archive---------45-----------------------#2020-05-30">https://towardsdatascience.com/analyzing-whentrumpisoutofoffice-tweets-7169b3e5ca35?source=collection_archive---------45-----------------------#2020-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0a39" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">R 中清理和分析 tweets 的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/06a380635c62b6950345d2a32939aee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jHR5KF_Kx7XCpDI2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@darren1303?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">达伦·霍尔斯特德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2bb1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着美国下届总统大选的临近，我想知道人们对被提名人的看法。现任总统会继续留在白宫，还是我们会看到一位不那么愤怒的推特咆哮的新美国总统？</p><h2 id="38db" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">获取数据集</h2><p id="e3b0" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我用 R 包<code class="fe mt mu mv mw b">rtweet</code>下载了标签为# WhenTrumpIsOutOfOffice 在 2020 年 3 月发的推文。结果，我找到了 6000 多条带有标签的推文。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4c41" class="lv lw it mw b gy nb nc l nd ne">library(rtweet)</span><span id="5697" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu"># create token named "twitter_token"</strong><br/>twitter_token &lt;- create_token(<br/>  app = appname,<br/>  consumer_key = consumer_key,<br/>  consumer_secret = consumer_secret,<br/>  access_token = access_token,<br/>  access_secret = access_secret)</span><span id="6643" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#download tweets into csv files</strong><br/>tweets &lt;- search_tweets(<br/>  "#WhenTrumpIsOutOfOffice", n = 18000, include_rts = FALSE)</span><span id="4170" class="lv lw it mw b gy nf nc l nd ne">df &lt;- apply(tweets,2,as.character)<br/>write.csv(df,"csv file path" )</span><span id="78fa" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#read the csv file</strong><br/>text &lt;- read.csv("csv file path", stringsAsFactors = FALSE)</span></pre><h2 id="da4e" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">清理数据集</h2><p id="6f85" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">像任何其他数据科学项目一样，数据清理是必不可少的。在本文中，我从 tweet 文本中删除了 URL、标签和常用的停用词。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="7aa3" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#data pre-processing</strong><br/>remove_reg &lt;- "&amp;amp;|&amp;lt;|&amp;gt;"<br/>text &lt;- text %&gt;%<br/>  mutate(text = str_remove_all(text, remove_reg)) %&gt;%<br/>  mutate(text = tolower(text)) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("@\\w+"),"" )) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("http\\w+"),"" )) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("://t.co/\\w+"),"" ))%&gt;%<br/>  mutate(text = str_replace_all(text, regex("&lt;\\w+"),"" )) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("/+[a-zA-Z0-9&lt;&gt;]+"),"")) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("fa[a-zA-Z0-9+&lt;&gt;]+"),"" )) %&gt;%<br/>  mutate(text = str_replace_all(text, regex("#[a-zA-Z0-9&lt;&gt;]+"),"" ))</span></pre><p id="b21e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我使用 R 包<code class="fe mt mu mv mw b">udpipe</code>来注释我们下载的 tweets。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="7c95" class="lv lw it mw b gy nb nc l nd ne">library(udpipe)</span><span id="88ef" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#download and load the pre-trained models</strong><br/>udmodel &lt;- udpipe_download_model(language = "english")<br/>udmodel &lt;- udpipe_load_model(file = udmodel$file_model)</span><span id="e314" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#annotate the data frame with uipipe model</strong><br/>tidy_text &lt;- udpipe_annotate(udmodel, x = text$text)<br/>tidy_text &lt;- as.data.frame(tidy_text)</span></pre><p id="a7c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释完数据集后，我们可以从数据集中删除停用词。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="29c7" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Remove stop words</strong><br/>my_stop_words &lt;- tibble(<br/>  word = c("#whentrumpisoutofoffice", "<a class="ae ky" href="http://twitter.com/realdonaldtrump" rel="noopener ugc nofollow" target="_blank">@realdonaldtrump</a>", "trump","ill"))</span><span id="3f9e" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Prepare stop words tibble</strong><br/>all_stop_words &lt;- stop_words %&gt;%<br/>  bind_rows(my_stop_words)</span><span id="e1f4" class="lv lw it mw b gy nf nc l nd ne">tidy_tweets &lt;- text %&gt;%<br/>  anti_join(all_stop_words, by = "word")</span><span id="4374" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#To check how many words removed after stop word anti join, deleted</strong> <br/>tibble(<br/>  total_words = nrow(text),<br/>  after_cleanup = nrow(tidy_tweets))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/6b652f83e75ec8abd7c87ad3a05eb5b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*2dfbNtmAu1ko-9rB5t4Zdw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据清理前后的字数</p></figure><h2 id="f2a6" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">数据分析</h2><p id="8f63" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在本文中，您将发现四种不同的文本挖掘技术应用于推文:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="f1da" class="lv lw it mw b gy nb nc l nd ne">1. Most frequent words in the tweets<br/>2. Keyword extraction<br/>3. Sentiment analysis<br/>4. Word association network graphs</span></pre><h2 id="4688" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">转发次数最多的文本</h2><p id="e883" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">两条推文的转发量超过了一千条:</p><p id="71bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当特朗普下台时，这些无法无天、腐败、肆无忌惮的白痴将和他一起消失。 <strong class="lb iu"> <em class="nh"> — 1216 转推</em> </strong></p><p id="78ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会不由自主地被投票让糟糕的政客下台所吸引。我刚刚开始投票；它就像一块磁铁。投票吧。我都不等了。当它是民主的时候，他们让你做它。# when trumpisoutofoffice<strong class="lb iu"><em class="nh">—1101 转发</em> </strong></p><h2 id="454c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">单字和双字的词频</h2><p id="3cb8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">流行的文本挖掘技术之一是找出一个单词在一个或多个文档中出现的频率。在这篇文章中，我们将看看单字和双字的词频。虽然单个词让我们对文档中最常用的词有所了解，但双词通常能给读者更好的洞察力。</p><p id="fe25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从下面的条形图中，我们可以做出一些假设:</p><ul class=""><li id="161c" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">特朗普卸任时，将是 2025 年 1 月</li><li id="1791" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">当特朗普不在办公室时，人们会去参加派对(“派对”在推文中出现了 165 次)</li></ul><div class="kj kk kl km gt ab cb"><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/34ae75c9a6fbac7398ba538dd0e61dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*evlAH_BEEmdt_3f7rIffEA.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/bf3d86e4b21d08cbb39376cd7362dc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*N38MCcNFrbWwBPgvIvjXcQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oc di od oe translated">词频条形图</p></figure></div><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="0fd0" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Unigram bar chart</strong><br/>tidy_tweets %&gt;%<br/>  count(word, sort = TRUE) %&gt;%<br/>  mutate(word = reorder(word, n)) %&gt;%<br/>  filter(n &gt; 150) %&gt;%<br/>  ggplot(aes(word, n)) +<br/>  geom_col(fill = "red") +<br/>  xlab(NULL) +<br/>  coord_flip() +<br/>  ggtitle("#WhenTrumpIsOutOfOffice - 1-Word Frequency") +<br/>  geom_text(aes(x = word, label = n), vjust = 0, hjust = -0.3, size = 4)</span><span id="4f08" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Bigram bar chart (showing codes for the bar chart only)<br/></strong>...<br/>bigrams_united %&gt;%<br/>  count(bigram, sort = TRUE) %&gt;%<br/>  mutate(bigram = reorder(bigram, n)) %&gt;%<br/>  filter(n &gt; 20) %&gt;%<br/>  ggplot(aes(bigram, n)) +<br/>  geom_col(fill = "blue") +<br/>  xlab(NULL) +<br/>  coord_flip() +<br/>  ggtitle("#WhenTrumpIsOutOfOffice - 2-Word Frequency") +<br/>  geom_text(aes(x = bigram, label = n), vjust = 0, hjust = -0.3, size = 4)</span></pre><p id="49f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了找出词频，我们还可以使用预先构建的算法/包快速提取关键词。在我们的例子中，我使用 RAKE 方法(快速自动关键字提取)提取关键字，该方法在 udpipe R 包中可用。</p><p id="38fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据下面的 RAKE 关键字条形图，我们可以得出以下结论:</p><ul class=""><li id="d4ef" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">得分最高的两个关键词是“白宫”和“新总统”。人们担心特朗普是否会继续他第二个任期，或者被新总统取代。</li><li id="fdf3" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">与词频的结果类似，人们计划在特朗普离任时举办最大的派对</li><li id="148c" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">有趣的是，“更好的地方”也在 RAKE 关键字列表的顶部</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/9e1f241c841c8986cf74cd029500268a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7M1Evr-U3hWLi8AzmVb7w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">RAKE 方法确定的关键字条形图</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="9bea" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Keywords identified by RAKE method bar chart</strong><br/>stats &lt;- keywords_rake(x = tidy_text, term = "lemma", group = "doc_id", <br/>                       relevant = tidy_text$upos %in% c("NOUN", "ADJ"))<br/>stats$key &lt;- factor(stats$keyword, levels = rev(stats$keyword))</span><span id="2bfe" class="lv lw it mw b gy nf nc l nd ne">stats %&gt;%<br/>  <strong class="mw iu">#filter data</strong><br/>  filter(freq &gt; 10 &amp; ngram &gt; 1) %&gt;%<br/>  <strong class="mw iu"># set value for x, y, and fill</strong><br/>  ggplot(aes(x = reorder(keyword, rake), y =  rake  )) +<br/>  <strong class="mw iu"># show in bars</strong><br/>  geom_col(fill = "red") +<br/>  <strong class="mw iu"># flip the bars to be horizontal</strong><br/>  coord_flip() +<br/>  <strong class="mw iu"># show value labe</strong>l<br/>  geom_text(aes(label = round(rake, digits = 2), vjust = 0, hjust = -0.3 )) +<br/>  <strong class="mw iu"># change y-axis name</strong><br/>  xlab("keywords")+<br/>  <strong class="mw iu"># add title</strong><br/>  ggtitle("Keywords identified by RAKE method") +<br/>  <strong class="mw iu"># hide legend</strong><br/>  theme(legend.position = "none")</span></pre><p id="0f38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个有趣的文本挖掘技术是给每个单词一个语法标记，称为词性标记(POS)。在这种情况下，我们指定从 tweets 中提取名词短语。</p><p id="a1f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">POS 标记条形图的一些要点:</p><ul class=""><li id="1413" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">当特朗普不在办公室时，与乔·拜登相比，迈克·彭斯/彭斯总统是被频繁提及的短语</li><li id="031e" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">当特朗普离开办公室时，人们松了一口气</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/cebc8a789e5982c51d6117ade74eb4d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtwhGpjk6eZ-AUw2AacyPA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由词类标签识别的关键字—简单名词短语条形图</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="0eb3" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Keywords identified by POS tags - Simple noun phrases bar chart</strong><br/>tidy_text$phrase_tag &lt;- as_phrasemachine(tidy_text$upos, type = "upos")<br/>stats &lt;- keywords_phrases(x = tidy_text$phrase_tag, term = tolower(tidy_text$token), <br/>                          pattern =  "(A|N)*N(P+D*(A|N)*N)*", <br/>                          is_regex = TRUE, detailed = FALSE)<br/>stats &lt;- subset(stats, ngram &gt; 1 &amp; freq &gt; 100)<br/>stats$key &lt;- factor(stats$keyword, levels = rev(stats$keyword))</span><span id="0be1" class="lv lw it mw b gy nf nc l nd ne">stats %&gt;%<br/><strong class="mw iu">  #data</strong><br/>  #filter(freq &gt; 100 &amp; ngram &gt; 1  ) %&gt;%<br/><strong class="mw iu">  # set value for x, y, and fill</strong><br/>  ggplot(aes(x = reorder(keyword, freq), y =  freq  )) +<br/><strong class="mw iu">  # show in bars</strong><br/>  geom_col(fill = "red") +<br/><strong class="mw iu">  # flip the bars to be horizontal</strong><br/>  coord_flip() +<br/><strong class="mw iu">  # show value label</strong><br/>  geom_text(aes(label = freq, vjust = 0, hjust = -0.3 )) +<br/><strong class="mw iu">  # change y-axis name</strong><br/>  xlab("keywords")+<br/><strong class="mw iu">  # add title</strong><br/>  ggtitle("Keywords identified by POS tags - Simple noun phrases") +<br/><strong class="mw iu">  # hide legend</strong><br/>  theme(legend.position = "none")</span></pre><h2 id="0ec0" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">情感分析</h2><p id="e280" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">情感分析是自然语言处理(NLP)中的一个领域，它试图识别文本数据中的情感。舆情分析可以让我们快速了解公众对特定话题或个人的情绪。因此，Twitter 是文本挖掘的绝佳数据源，在那里你可以找到大量公开表达的观点。</p><h2 id="0933" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">#WhenTrumpIsOutOfOffice 的总体喜好度</h2><p id="e255" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">使用“NRC”词典，我们可以将单词标记为 8 种基本情绪(信任、期待、恐惧等)。)和两种情绪(正面和负面)。</p><p id="76f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，我们看到推文中正面和负面词汇的分布几乎相等。请注意“信任”在其他情绪中所占的比例最高，而“惊讶”所占的比例最少。在下一节中，我们将详细了解与情感和情绪相关的词汇。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/3841e44cfc2cbcb42470daf7bfef74ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*kD1ivOLUS_0w_CFkEd5UCg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">情感排名列表</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="6985" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Sentiment ranking list</strong><br/>nrc_words &lt;- tidy_tweets %&gt;%<br/>  inner_join(get_sentiments("nrc"), by = "word")</span><span id="54d5" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Rank of sentiments</strong><br/>sentiments_rank &lt;- nrc_words %&gt;%<br/>  group_by(sentiment) %&gt;%<br/>  tally %&gt;%<br/>  arrange(desc(n))</span><span id="6db3" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Find percentage</strong><br/>sentiments_rank %&gt;%<br/>  mutate(percent = (n/8169)*100)</span></pre><p id="0c1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以用饼状图的形式来显示情感排名:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/f3295c890dfa98e3087801f519de9259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_1Tp1eSJQSSC0Xg59HoAg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按情感分类的词频饼图</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="7a2b" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Word frequency pie chart categorized by sentiments</strong><br/>sentiments_rank_clean &lt;- sentiments_rank %&gt;%<br/>  filter(sentiment != "positive") %&gt;%<br/>  filter(sentiment != "negative")</span><span id="ce9f" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu"># Create bar chart first</strong><br/>bp&lt;- ggplot(sentiments_rank_clean, aes(x=reorder(sentiment, -n), y=n, fill=sentiment))+<br/>  geom_bar(width = 1, stat = "identity")</span><span id="ebe6" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Turn bar chart into a pie chart<br/></strong>pie &lt;- bp + coord_polar("x", start=0) +<br/>  ggtitle("#WhenTrumpIsOutOfOffice - Sentiment pie chart") +<br/>  xlab("Word frequency - Sentiment")</span></pre><h2 id="b3e3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">基于情感的词频</h2><p id="8ca6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">让我们看看出现在“信任”类别中的单词，它的词频最高。请注意,“总统”这个词出现了 400 多次。</p><p id="f6fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他有趣的见解:</p><ul class=""><li id="c59a" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">“地狱”一词是愤怒、恐惧和悲伤情绪类别的首选。</li><li id="8cc2" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">“终于”这个词是另一个排在厌恶、喜悦和惊讶榜首的词。</li><li id="f990" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">如果你仔细看看负面情绪下面的单词，你会发现大多数单词都与仇恨、监狱等有关。而不是与悲伤或失望相关的词语。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/881a16386872729a7c25792b1c7ceffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1U2-hIkG-AXngMYcC7L5Lw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基于情绪的词频</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="85bd" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Word frequencies based on emotions</strong><br/>nrc_words %&gt;%<br/><strong class="mw iu">  # Count by word and sentiment</strong><br/>  count(word, sentiment) %&gt;%<br/><strong class="mw iu">  # Group by sentiment</strong><br/>  group_by(sentiment) %&gt;%<br/><strong class="mw iu">  # Take the top 10 words for each sentiment</strong><br/>  top_n(10) %&gt;%<br/>  ungroup() %&gt;%<br/>  mutate(word = reorder(word, n)) %&gt;%<br/><strong class="mw iu">  # Set up the plot with aes()</strong><br/>  ggplot(aes(word, n, fill = sentiment)) +<br/>  geom_col(show.legend = FALSE) +<br/>  facet_wrap(~ sentiment, scales = "free") +<br/>  coord_flip() +<br/>  ggtitle("Word frequency based on emotion")</span></pre><h2 id="5fa1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">阳性词云</h2><p id="9535" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们还可以提取与积极和消极情绪相关的单词，并将它们绘制成单词云。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/69c7b12a0fc2d342a8e585cc05b69a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*jyBRji2hlu3RXNij1DXEkA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">标签# WhenTrumpIsOutOfOffice 的肯定性词云</p></figure><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="854d" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Positivity word cloud for the hashtag: #WhenTrumpIsOutOfOffice</strong><br/>positivity_wordcloud &lt;- tidy_tweets %&gt;%<br/>  inner_join(get_sentiments("bing"), by = c("word" = "word")) %&gt;%<br/>  count(word, sentiment, sort = TRUE) %&gt;%<br/>  acast(word ~ sentiment, value.var = "n", fill = 0) %&gt;%<br/>  comparison.cloud(colors = c( "#A32D39","#177255"),  title.size = 1.8,<br/>                   max.words = 50,scale=c(2,0.7))</span></pre><h2 id="9d98" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">#WhenTrumpIsOutOfOffice 的词关联图</h2><p id="3f58" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">最后，我们还可以看到一条 tweet 和整个 tweet 文档中的单词是如何相互关联的。</p><div class="kj kk kl km gt ab cb"><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8c933e2fa95e125c92e80279856a4992.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*UAXNTfEK4BpmKOtMoXqDAw.png"/></div></figure><figure class="nw kn nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8053905274504a169cae4bdbb9189a5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*KoVz-ntYm1SfgSBoVkL1uQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oc di od oe translated">#WhenTrumpIsOutOfOffice 的词联想网络图</p></figure></div><p id="2385" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">左边的网络图标题为“句内共现”，显示了在一个句子中经常一起使用的短语。在网络图中，节点代表年度字母中使用的单词，边(链接)的阴影反映每个单词之间的紧密程度。如果术语关系密切，边缘的色调就越暗。两对单词在图表中脱颖而出，这是“长期”和“利润少”的单词组合。</p><p id="2c8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至于右边的网络图，该图向我们显示了在一个文档中彼此“相邻”的单词。在这个图表中，我们可以看到“Pence”和“female/ woman”与单词“president”密切相关</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4a37" class="lv lw it mw b gy nb nc l nd ne"><strong class="mw iu">#Cooccurrences within sentence network graph</strong><br/><strong class="mw iu">#how many times nouns and adjectives are used in the same sentence</strong><br/>cooc &lt;- cooccurrence(x = subset(tidy_text, upos %in% c("NOUN", "ADJ")), <br/>                     term = "lemma", <br/>                     group = c("doc_id", "paragraph_id", "sentence_id"))</span><span id="d9d5" class="lv lw it mw b gy nf nc l nd ne">library(igraph)<br/>library(ggraph)<br/>library(ggplot2)</span><span id="4699" class="lv lw it mw b gy nf nc l nd ne">wordnetwork &lt;- head(cooc, 50)<br/>wordnetwork &lt;- graph_from_data_frame(wordnetwork)<br/>ggraph(wordnetwork, layout = "fr") +<br/>  geom_edge_link(aes(edge_alpha = cooc), edge_colour = "red") +<br/>  geom_node_point(color = "red", size = 1) +<br/>  geom_node_text(aes(label = name), col = "blue", size = 5, repel = TRUE) +<br/>  theme_graph(base_family = "Arial") +<br/>  theme(legend.position = "none") +<br/>  labs(title = "Cooccurrences within sentence", subtitle = "Nouns &amp; Adjective")</span><span id="aa11" class="lv lw it mw b gy nf nc l nd ne"><strong class="mw iu">#Words following one another network graph</strong><br/>cooc &lt;- cooccurrence(tidy_text$lemma, relevant = tidy_text$upos %in% c("NOUN", "ADJ"), skipgram = 1)<br/>dev.off()<br/>head(cooc)<br/>wordnetwork &lt;- head(cooc, 50)<br/>wordnetwork &lt;- graph_from_data_frame(wordnetwork)<br/>ggraph(wordnetwork, layout = "fr") +<br/>  geom_edge_link(aes( edge_alpha = cooc),edge_colour = "blue") +<br/>  geom_node_point(color = "red", size = 1) +<br/>  geom_node_text(aes(label = name), col = "red", size = 5,  repel = TRUE) +<br/>  theme_graph(base_family = "Arial") +<br/>  labs(title = "Words following one another", subtitle = "Nouns &amp; Adjective") +<br/>  theme(legend.position = "none")</span></pre><h1 id="a628" class="ol lw it bd lx om on oo ma op oq or md jz os ka mg kc ot kd mj kf ou kg mm ov bi translated">结论</h1><p id="aba2" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">总的来说，我们已经导出了几个关键词，从整体上探索了单词与#WhenTrumpIsOutOfOffice 的关系，并能够做出以下假设:</p><ul class=""><li id="f318" class="ni nj it lb b lc ld lf lg li nk lm nl lq nm lu nn no np nq bi translated">人们担心特朗普卸任后，谁将成为下一任美国总统。总统会继续他的第二个任期，还是他的副总统会取代他？或者我们最终会看到这个国家的第一位女总统吗？</li><li id="867f" class="ni nj it lb b lc nr lf ns li nt lm nu lq nv lu nn no np nq bi translated">总的来说，积极情绪与解脱和庆祝有关，而消极情绪与伤害和“坐牢”有关。</li></ul></div></div>    
</body>
</html>