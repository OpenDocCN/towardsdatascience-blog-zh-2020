<html>
<head>
<title>Convert Your Python Code into a Windows Application (.exe file)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Python 代码转换成 Windows 应用程序(。exe 文件)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/convert-your-python-code-into-a-windows-application-exe-file-28aa5daf2564?source=collection_archive---------0-----------------------#2020-08-08">https://towardsdatascience.com/convert-your-python-code-into-a-windows-application-exe-file-28aa5daf2564?source=collection_archive---------0-----------------------#2020-08-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dc4e" class="pw-subtitle-paragraph jo ip iq bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">无限制共享的快速技巧</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/332416979124f4dd05ea862fb5b0a38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_m8OAd9Aq7Paqksq"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">塔达斯·萨尔在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b4e2" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">您编写了一个令人惊叹的 Python 应用程序，并提交给了您的老板。他对此印象深刻，并希望在自己的系统中使用它。他既没有在自己的系统上安装 Python，也没有使用过它。你被卡住了！！！</p><p id="fe41" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果以上听起来很熟悉，那么本教程将解决你的问题。在这里，我们将学习将 Python 代码转换成<em class="lt"> Windows </em>可执行文件的过程。从现在开始，每当您想要与更广泛的社区共享您的优秀成果时，您不必担心在他们的系统上设置 Python 环境。只需创建一个可执行文件并发送给他们。他们将能够使用该应用程序，就像您在您的系统上一样。</p><h1 id="f0c9" class="lu lv iq bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">你需要什么？</h1><h2 id="1e82" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak"> 1。要转换的脚本</strong></h2><p id="26f6" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">对于本教程，我们已经编写了一个小的 Python 代码来读取。csv '文件从<em class="lt">窗口的</em>文件夹中取出。这个文件有两列，每列包含一组随机数。该代码创建一个新列，其中包含两个输入列的数字之和。修改后的文件保存在与旧文件相同的文件夹位置。</p><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="c438" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Importing the required library</strong><br/>import pandas as pd</span><span id="8466" class="mm lv iq ne b gy nm nj l nk nl"><strong class="ne ir">#### Reading csv file</strong><br/>df = pd.read_csv("C:\\Ujjwal\\New_File_V1.csv")</span><span id="7b5a" class="mm lv iq ne b gy nm nj l nk nl"><strong class="ne ir">#### Adding 2 columns</strong><br/>df["Third_Column"] = df["Randome Numbers 1"] + df["Random Numbers 2"]</span><span id="860c" class="mm lv iq ne b gy nm nj l nk nl"><strong class="ne ir">#### Exporting the data to same location</strong><br/>df.to_csv("C:\\Ujjwal\\New_File_V2.csv",index = False)</span></pre><p id="bc90" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">输入 CSV 文件的示例列如下:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nn"><img src="../Images/68e512c4fb6ad4286970262a04432e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBr0jVDWG-kzo7B5kPrR3A.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">输入 CSV 文件(图片由作者提供)</p></figure><p id="4060" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">代码执行后的输出文件如下所示:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nn"><img src="../Images/0cb0b6016d8720678d08c2b15d800817.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zDDqstlfwVOVvZsJ5hWYug.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">输出 CSV 文件(图片由作者提供)</p></figure><h2 id="cbe8" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak"> 2。Pyinstaller 包</strong></h2><p id="2b15" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">为了将 Python 代码转换成可执行文件，我们将使用<em class="lt"> Pyinstaller </em>包。使用标准的“pip install”命令来安装此软件包。</p><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="841d" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Install Command</strong><br/>pip install pyinstaller</span></pre><h1 id="d856" class="lu lv iq bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">实际任务</h1><p id="0021" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">让我们一步一步地将 Python 文件转换成一个<em class="lt"> Windows </em>可执行文件:</p><ul class=""><li id="c1ba" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated"><strong class="kz ir">打开命令提示符— </strong>使用命令行将 Python 脚本转换为<em class="lt"> Windows </em>可执行文件。为此，我们必须转到命令提示符。在你的<em class="lt">窗口</em>搜索框中键入“cmd”并打开命令提示符</li><li id="46a8" class="no np iq kz b la nx ld ny lg nz lk oa lo ob ls nt nu nv nw bi translated"><strong class="kz ir">更改文件夹位置</strong> —使用以下命令，将命令提示符指向 Python 代码的位置:</li></ul><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="87be" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Change Folder Location</strong><br/>cd folder_location</span></pre><ul class=""><li id="d641" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated"><strong class="kz ir">转换</strong> —使用以下命令将 Python 文件转换成一个<em class="lt"> Windows </em>可执行文件:</li></ul><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="c709" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Command for conversion</strong><br/>pyinstaller --onefile filename</span></pre><p id="9e48" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">上述代码将创建一个与 python 代码功能相同的可执行文件。该可执行文件将在一个新文件夹<strong class="kz ir"> dist，</strong>中提供，该文件夹与您的 Python 脚本位于同一位置。</p><ul class=""><li id="22af" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated"><strong class="kz ir">执行— </strong>要执行文件，只需双击可执行文件，它将产生与您的 Python 脚本相同的结果。</li></ul><h1 id="0c53" class="lu lv iq bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated"><strong class="ak">常见问题解答</strong></h1><p id="6e0a" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">使用<em class="lt"> pyinstaller </em>时，人们会面临一些常见的问题/挑战。本节将回答其中的大部分问题:</p><h2 id="c7ba" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak">附加文件</strong></h2><p id="eaef" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">除了包含可执行文件的<strong class="kz ir"> dist 文件夹</strong>之外，其他文件和文件夹正在被创建。你不需要它们。您可以在没有这些附加文件的情况下共享您的可执行文件。即使您将删除额外的文件和文件夹，您的可执行文件也不会失去其功能。</p><h2 id="9ba6" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak">完成时间</strong></h2><p id="1397" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">可执行文件的创建和可执行文件的执行都是耗时的任务。对于像我们这样的短脚本，创建可执行文件需要将近 5 分钟，执行需要将近 30 秒。</p><h2 id="20fe" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak">可执行文件的大小</strong></h2><p id="3b7c" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">因为我们在 Python 脚本中导入包，为了使可执行文件自给自足，完整的包被合并到可执行文件中。这增加了可执行文件的大小。对于我们的例子，它超过了 300 MB</p><h2 id="b4c9" class="mm lv iq bd lw mn mo dn ma mp mq dp me lg mr ms mg lk mt mu mi lo mv mw mk mx bi translated"><strong class="ak">可执行文件失败，错误为</strong></h2><p id="075c" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">在执行可执行文件时，最容易遇到的错误是“<strong class="kz ir">ModuleNotFoundError:</strong><strong class="kz ir">没有名为<em class="lt">的模块，模块名</em> </strong>”。此错误和实际错误提示的示例屏幕截图如下:</p><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="355f" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Error Prompt Message</strong><br/>ModuleNotFoundError: No module named 'pandas._libs.tslibs.nattypes' </span></pre><p id="0a47" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果您遇到这样的错误(模块名称可能不同)，请采取以下步骤:</p><ul class=""><li id="f4ae" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated">转到安装<em class="lt"> pyinstaller </em>包的<em class="lt"> Windows </em>位置。因为我使用的是 Anaconda 发行版，所以下面是我系统上的位置:</li></ul><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="414f" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Package Location</strong><br/>C:\Users\Ujjwal\Anaconda3\Lib\site-packages</span></pre><ul class=""><li id="9fb7" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated">在<em class="lt"> pyinstaller </em>包文件夹中，搜索名为<strong class="kz ir"> hooks </strong>的文件夹。这个文件夹里有大多数常用 Python 包的<strong class="kz ir">钩子文件。搜索引发错误的 Python 包的钩子文件。在我们的例子中，是熊猫。示例钩子文件及其内容如下:</strong></li></ul><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oc"><img src="../Images/a21b3c8f503f1ba0d4134d7c13670d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hx4R7biAt0E6-cyKks-EFw.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">原始钩子文件(图片由作者提供)</p></figure><ul class=""><li id="b240" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated">错误背后的原因是初始化'<strong class="kz ir"> hiddenimports' </strong>'的命令出现故障。<strong class="kz ir">注释此语句并添加一个新的</strong>，其中'<strong class="kz ir"> hiddenimports </strong>'用引发错误的相同模块名初始化。对我们来说，是“<strong class="kz ir">熊猫。_libs.tslibs.nattype </strong>'。要添加的代码行如下:</li></ul><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="bcd9" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Code line for hook file</strong><br/>hiddenimports = 'pandas._libs.tslibs.nattype'</span></pre><ul class=""><li id="0e59" class="no np iq kz b la lb ld le lg nq lk nr lo ns ls nt nu nv nw bi translated">一旦钩子文件被修改，保存它并重新创建新的可执行文件。在重新创建之前，请<strong class="kz ir">确保删除旧的可执行文件和相关文件夹。</strong>如果错误仍然存在，继续在钩子文件中添加其他缺失的模块。请注意，多个模块应该作为一个列表结构添加。</li></ul><pre class="kh ki kj kk gt nd ne nf ng aw nh bi"><span id="96a3" class="mm lv iq ne b gy ni nj l nk nl"><strong class="ne ir">#### Code line after adding multiple modules</strong><br/>hiddenimports = ['pandas._libs.tslibs.np_datetime','pandas._libs.tslibs.nattype','pandas._libs.skiplist']</span></pre><p id="d940" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们在示例中使用的最终钩子文件如下所示:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi od"><img src="../Images/539cc860f14ba77cce8c927db17b256e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*az4vsxjFAkA3VFC2cNe9ww.png"/></div></div><p class="ks kt gj gh gi ku kv bd b be z dk translated">最终挂钩文件(图片由作者提供)</p></figure><p id="7bc3" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">一旦添加了所有模块，错误就会得到解决。</p><h1 id="f8df" class="lu lv iq bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">结束语</h1><p id="bdb7" class="pw-post-body-paragraph kx ky iq kz b la my js lc ld mz jv lf lg na li lj lk nb lm ln lo nc lq lr ls ij bi translated">在上面的教程中，我们已经尝试解决了一个小问题，这个问题是我们大多数人在工作中遇到的。</p><p id="bc4b" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我希望这篇教程是有启发性的，并且你学到了一些新的东西。</p><p id="1b8b" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">会在以后的教程中尝试并带来更多有趣的话题。在此之前:</p><p id="1e0b" class="pw-post-body-paragraph kx ky iq kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">快乐学习！！！！</p></div></div>    
</body>
</html>