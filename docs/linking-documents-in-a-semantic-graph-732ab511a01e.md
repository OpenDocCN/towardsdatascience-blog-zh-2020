# 在语义图中链接文档(第 2 部分)

> 原文：<https://towardsdatascience.com/linking-documents-in-a-semantic-graph-732ab511a01e?source=collection_archive---------52----------------------->

## 如何使用 TigerGraph Cloud 设计自己的图形

![](img/6a17f8ed4104d3013eea75459453e4ed.png)

# 议程

1.  使用出版物元数据构建图表
2.  创建 TigerGraph 帐户
3.  设计图表
4.  上传和映射数据
5.  加载数据
6.  可视化图表

# 1.使用出版物元数据构建图表

这个项目是上一个项目的延续。我们使用 scispaCy，一个 Python 的 NLP 包，从一组关于新冠肺炎的文章摘要中提取医学关键词。查看这篇文章，深入了解我们是如何提取数据的。这个项目的目标是建立一个图表来连接出版物和我们提取的实体。我们使用图表是因为它可以让我们有效地显示和分析高度关联的数据。如果你还不熟悉图表，我建议看看这个[视频](https://www.youtube.com/watch?v=vJcxRjJ982k)。为了创建我们的图表，我们将使用来自 TigerGraph 的一个免费的、基于 UI 的图形平台，名为 **TigerGraph Cloud** 。

# 2.创建一个 TigerGraph 帐户

在你做任何事情之前，你首先需要创建一个 TigerGraph 帐户。TigerGraph 有一个很棒的[视频](https://www.youtube.com/watch?v=JARd9ULRP_I&feature=youtu.be&utm_referrer=https://www.tigergraph.com/starterkits/)带你完成创建你的账户和建立一个空图的步骤。遵循视频中的步骤，在 GraphStudio 中加载您的解决方案。加载解决方案后，您应该会到达这个主页。

![](img/a103b41f00e3959bb2f00bc6d689753c.png)

主屏幕

# 3.设计图表模式

我们将从点击**设计方案**选项卡开始。
您应该会看到一个类似这样的空白页。

![](img/121e85affdcff646be56674f02d098b7.png)

空白设计方案

## 添加顶点

接下来，我们将创建一些顶点。我们的中心顶点类型将被称为**“PUBLICATION”**。这个顶点将存储与出版物相关的数据，如 doi、标题和 URL。顶点类型的这些特定属性被称为**属性**。要创建顶点，按下 **+** 图标。按如下方式填写数据。

![](img/de94d883da5d01c6a9c4c8812e9b78ea.png)![](img/0c2392d57e2cd429f44eabe93a748407.png)

发布顶点

*你可以自由地编辑顶点的名称和它们的属性为你喜欢的任何名称，也可以为每个顶点类型定制图标和颜色。只要确保属性类型是正确的。*

这里没有列出一些出版物属性，比如许可证类型和出版物期刊。这是因为在理想情况下，属性是对于给定类型的每个顶点都是唯一的特征。因为多个出版物可以具有相同的许可证、期刊等。，最好把那些作为**单独的顶点类型**留下。我们仍然可以很容易地在我们的设计模式中连接这些顶点。

让我们继续创建我们的顶点。我们需要 3 个新的顶点来表示高度重复的出版物特征(许可证、作者和期刊)，一个顶点表示我们之前提取的实体，一个顶点表示这些实体的类。这些顶点应该像这样。

![](img/189e8184b6404cad822fe9e5cb354d67.png)

日志顶点

![](img/e46042f6ab98d6953fe46c2a55768b56.png)

作者顶点

![](img/12156f824656aa663c4bdf34dcf05b61.png)

许可顶点

![](img/6e0bc01764270ea788b20886155d1695.png)

实体顶点

![](img/98f2eb926628a03e407d884a09312ffb.png)

类顶点

现在我们所有的顶点都创建好了，我们的图应该看起来像这样。

![](img/c521e8fa0d69266cd511a492dc72729f.png)

看起来还不错，但是少了点什么。我们仍然需要用边连接我们的顶点！

*如果你还没有，确保使用+号旁边的****up*******箭头*** *来发布你的图表。这可确保保存您的图表。**

## *添加边缘*

*要添加一条边，点击**右箭头**图标并选择要连接的两个顶点。例如，如果我们想将作者顶点连接到出版物顶点，我们按下箭头，然后单击作者图标和出版物图标。我们应该得到一个类似这样的弹出窗口:*

*![](img/56fa8720078fbbe4acbd5b28f0784bee.png)*

*TigerGraph 会自动填充源顶点和目标顶点，所以我们要做的就是给它命名。以连接的两个顶点命名边很有帮助。对于这个边缘，姑且称之为**“PUB _ HAS _ AUTHOR”**。我们的优势现在应该是这样的:*

*![](img/fab05168309212c5fdc90583c779c6e0.png)*

*出版物和作者之间的边缘*

*现在，我们只需对剩余的边重复这个过程。*

*![](img/abced9f98cf457217808d9db523fb1e8.png)*

*出版物和期刊之间的边缘*

*![](img/7b8d2cdfac1eaa7dd1897fe79ab6b987.png)*

*出版物和许可证之间的边缘*

*![](img/1264ed41c5c49626ae434f580f737c48.png)*

*实体和出版物之间的边缘*

*![](img/c2d2e937a15c6f4a3773cae88dffb278.png)*

*实体和类之间的边界*

**注意，我们所有的边都是* ***无向*** *。这是因为任意两个顶点之间的关系是双向的(即出版物与作者相关联，但作者也与该出版物相关联)。**

*在我们添加了所有这些边之后，我们的最终图形应该看起来像这样:*

*![](img/2ba67a2034795ad26424797db3b748a2.png)*

*完成的设计方案*

# *4.上传和绘制我们的数据*

*图形设计完成后，我们现在需要上传数据。你可以在这里找到我们需要上传[的所有文件。我将简要说明每个文件的内容。](https://gofile.io/d/CGR7UU)*

***sample.csv** —包含每个出版物的一般信息(如 doi、URL、期刊、许可证等。*

***normalizedAuthors.csv** —包含每个出版物的 doi 和作者的规范化列表*

***实体 _*。csv** —这四个文件中的每一个都包含使用 scispaCy 中的一个预构建模型提取的实体和类。如果你想知道这些医学术语是如何提取出来的，可以看看[我的上一篇文章](/using-scispacy-for-named-entity-recognition-785389e7918d)。*

*要上传这些文件，点击**将数据映射到图表**选项卡，然后点击看起来像带+号的文件的图标。现在将你下载的所有文件添加到服务器，点击 **ADD** 。*

*这是棘手的部分开始。您需要手动将每个文件映射到与该文件中的列相对应的每个顶点和边。例如，**规范化作者**文件有**【doi】**和**【作者】**列。这意味着文件必须映射到发布顶点(doi 属性所在的位置)、作者顶点以及连接发布和作者顶点的边。要映射文件，请单击交叉箭头图标，选择文件，然后选择顶点或边。 **normalizedAuthors** 文件的映射应该如下所示:*

*![](img/367df4ed2d583913df30511a47fd94e6.png)*

*normalizedAuthors.csv 的总映射*

*每个单独的映射应该如下所示:*

*![](img/46a1db1ca53ab5ef282bf5c78f6ef3f0.png)*

*将 normalizedAuthors.csv 映射到作者顶点*

*![](img/29fb0823a84c6d12e0f5c6fd3d63f2ac.png)*

*将 normalizeAuthors.csv 映射到连接作者和出版物的边*

*![](img/7525ef86a7fb0059597ef105120ba4dd.png)*

*将 normalizedAuthors.csv 映射到发布顶点*

*同样，我们对所示的其他文件重复这些步骤。*

*![](img/3b51a5c1858c2ed8f49874b2062c2ed9.png)*

*sample.csv 的总映射*

*![](img/a625024b3fbd571a4c12c7b92d894f00.png)*

*将 sample.csv 映射到日志顶点*

*![](img/c8be5daf17b04c67410a6f70609c80d8.png)*

*将 sample.csv 映射到连接出版物和期刊的边缘*

*![](img/8ff525ed21859c0118be39dca97449d9.png)*

*将 sample.csv 映射到发布顶点*

*![](img/5c317770a84eefb930c56af4a331da94.png)*

*将 sample.csv 映射到连接发布和许可证的边缘*

*![](img/8e7aeba990f0ba7412c9ab2adba7011e.png)*

*将 sample.csv 映射到许可证顶点*

*现在我们映射实体文件。我将展示一个文件的映射，因为这四个文件是一样的。*

*![](img/f6b2b18ef8bd56aca6da056283aaa704.png)*

*实体文件的总映射*

*![](img/474ed715dfb490f3920dea0613a8b511.png)*

*将实体文件映射到类顶点*

*![](img/b06434de4150de6f65edb9ea485a4b7e.png)*

*将实体文件映射到连接实体和类的边*

*![](img/e9ae42235b52feb1fe9326c433fb5abd.png)*

*将实体文件映射到实体顶点*

*![](img/e0c9a6e4f5122231e287a07b18a5f4da.png)*

*将实体文件映射到连接实体和发布的边缘*

*![](img/a27bc0fd1e41e9477bbc99051bdb5227.png)*

*将实体文件映射到发布顶点*

*你刚刚完成了这个项目最困难的部分。映射完成后，我们的图表应该如下所示:*

*![](img/410058cbbb330b145ffc66016902df77.png)*

*图的全映射*

*点击发布按钮保存你所有的努力工作！*

# *5.加载数据*

*一旦映射了数据，加载数据就非常容易了。点击**加载数据**选项卡，然后点击播放按钮开始加载数据。这个过程大约需要一分钟。一旦完成，你就可以继续可视化你的图表了。*

# *6.直观探索您的图表*

*现在是有趣的部分(虽然我希望整个项目到目前为止都很有趣)。创建设计并加载数据后，您现在可以直观地浏览图表了。为此，点击**浏览图表**选项卡。在这个页面上你可以做很多事情(完整的文档可以在[这里](https://docs.tigergraph.com/ui/graphstudio/explore-graph)找到)，但是让我们看几个具体的例子。*

## *搜索顶点*

*您可以使用顶点 id 搜索特定的顶点，也可以找到特定类型的随机顶点。我们将做后者。对于我们的例子，让我们选择类型**“出版”**的 5 个顶点。你应该看到 5 个顶点弹出。*

*![](img/73d59b936f12862efe92b77c45a94e19.png)*

*搜索出版物类型的 5 个顶点的示例*

*您可以将鼠标悬停在每个顶点上以查看其所有属性。您也可以双击任意顶点来显示其直接连接。*

*![](img/a6a411c7cefc5c1a95b22543f048094f.png)*

*双击出版物顶点后可见*

*如果你的输出看起来很乱，你可以点击并拖动顶点来清理你的屏幕。*

## *从顶点展开*

*如果您从**搜索**选项(放大镜)更改为**从顶点扩展**选项(看起来像三角形的符号)，您可以从一个顶点扩展到直接连接之外的其他顶点。为了确保您的计算机不会过载，请将扩展边缘限制更改为较小的值，如 4 或 5。现在，让我们看看当我们扩展我们刚刚揭示的一个实体时会发生什么。*

*![](img/42a7e6e417615ce35a488ee6d8651aac.png)*

*从实体顶点通过所有边类型向所有顶点类型扩展*

*我们可以看到，在扩展我们的实体顶点时，该实体的类以及其他也具有相同实体的论文被拉起。这是我们为什么首先使用图表的一个很好的例子。我们可以很容易地在图表中搜索出版物、实体、作者、许可证等。，只需点击几下，我们就可以显示不同的发布是如何连接的，哪些发布共享相同的实体，等等。*

## *进一步探索*

*在本文中，我不会讨论其他图形探索选项，也不会讨论如何创建查询(本质上是我们刚刚使用的可视化扩展的代码版本)。请继续关注本系列的第 3 部分，在这里我将带您为我们的图表编写一些基本的搜索查询。在那之前，我会把它们作为挑战性问题留给你自己去解决。如果你感兴趣，你可以在这里阅读查询。*

# *结论*

*图表为绘制和分析高度关联的数据提供了无与伦比的优势。通过我们对 TigerGraph Cloud 的探索，您已经学会了如何可视化地设计、绘制和探索您自己的成熟图形。您已经向图形数据库的世界迈出了巨大的第一步，并为您未来的项目获得了相当大的优势。图形数据库可以在任何东西上实现，从像这样的小规模项目到像脸书和谷歌搜索这样的大型结构。图表拥有不可思议的力量；一种你现在可以接触到的力量。*

# *资源*

1.  *[https://medium.com/r/?URL = https % 3A % 2F % 2 ftowardsdata science . com % 2 fusing-scispacy-for-named-entity-recognition-785389 e 7918d](/using-scispacy-for-named-entity-recognition-785389e7918d)*
2.  *https://www.youtube.com/watch?v=vJcxRjJ982k*
3.  *【https://www.youtube.com/watch?v=JARd9ULRP_I】T4&feature = youtu . be&UTM _ referrer = https % 3A % 2F % 2fwww . tiger graph . com % 2f starter kits % 2F*
4.  *[https://gofile.io/d/CGR7UU](https://gofile.io/d/CGR7UU)*
5.  *[https://docs.tigergraph.com/ui/graphstudio/explore-graph](https://docs.tigergraph.com/ui/graphstudio/explore-graph)*
6.  *[https://docs.tigergraph.com/ui/graphstudio/write-queries](https://docs.tigergraph.com/ui/graphstudio/write-queries)*