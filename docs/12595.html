<html>
<head>
<title>I made this introductory SQL learning article for you being a data analyst</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我为身为数据分析师的您撰写了这篇 SQL 学习入门文章</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/i-made-this-introductory-sql-learning-article-for-you-as-a-data-analyst-897c9e6a2cb6?source=collection_archive---------35-----------------------#2020-08-30">https://towardsdatascience.com/i-made-this-introductory-sql-learning-article-for-you-as-a-data-analyst-897c9e6a2cb6?source=collection_archive---------35-----------------------#2020-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="da90" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">SQL 对于寻找数据分析师的职位仍然是重要和必要的</h2></div><p id="9cf4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SQL(结构化查询语言)已经有几十年的历史了。SQL 听起来可能不像 Python 或 R 这两种更现代的流行编程语言那样花哨，但它一直是成为数据分析师的要求的一部分。</p><p id="17a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是数据分析师的工作要求。正如你所看到的，SQL 的丰富经验是这篇文章的必备条件。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi le"><img src="../Images/3c2a000c7d20be150fe686e5dfc2667b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*LNlR378zcMGTNp0qHlurIg.png"/></div></figure><p id="487e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哪个公司的？</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/9fa8b271ccbd25075b59082cc920c6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*b81Z6EQFwC2O_LXT_vcwpQ.png"/></div></figure><p id="0208" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">特斯拉。精通 SQL 让你有更高的机会成为许多大公司的一员。在 Linkedin 上，有超过 7100 条关于美国“SQL 数据分析师”的结果。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/e491573a21fb0778d85f9abaa7e48052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*BbnwW6FOABRCyP11P_sFxw.png"/></div></figure><p id="c436" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我相信这些图片已经足以证明 SQL 的重要性。凭借多年的 SQL 编码经验，我将在这里指导您如何在数据分析师级别使用 SQL。由于这篇文章是给没有任何先验知识的人看的，所以我会把一切都解释透彻。此外，我将只讨论查询和分析部分。因此，不会有 insert into/update/delete/alter table…语句。所有语句都以“Select”开头。</p><p id="28a1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们开始吧。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/18b3c760c1fca8923b9f710ad1420fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*f4Nzs8r-WQW8SP2uEPtC2Q.png"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated"><a class="ae lt" href="https://unsplash.com/s/photos/sql-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae lt" href="https://unsplash.com/@altumcode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> AltumCode </a>拍摄的照片</p></figure><p id="d4c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">展示的数据集来自卡格尔的学生饮酒量(<a class="ae lt" href="https://www.kaggle.com/uciml/student-alcohol-consumption" rel="noopener ugc nofollow" target="_blank">链接</a>)。模式名为“dataset”，表名为“student_mat”</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="471a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">基本的选择语句</h1><p id="1b64" class="pw-post-body-paragraph ki kj it kk b kl mt ju kn ko mu jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">要从表中查询记录，您需要知道哪个表中哪个列是必需的。因此，在每个用于查询的 SQL 语句中，您必须在语句中提供这样的信息。基本陈述是</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="a080" class="nd mc it mz b gy ne nf l ng nh">SELECT * FROM dataset.student_mat;</span></pre><p id="1c78" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个声明有四个部分。第一部分是关键字<code class="fe ni nj nk mz b">select</code>，用于从数据库中选择记录。第二部分是 select 子句，<code class="fe ni nj nk mz b">*</code>。这部分是输入你要查询的列。<code class="fe ni nj nk mz b">*</code>表示查询表中的所有列。第三部分是另一个关键字<code class="fe ni nj nk mz b">from</code>，最后一部分是<code class="fe ni nj nk mz b">from </code>子句<code class="fe ni nj nk mz b">dataset.student_mat</code>。最后一部分是输入表的名称。<code class="fe ni nj nk mz b">dataset</code>是一个模式的名称。模式是表、视图等的集合。您可以将模式视为一组表，而<code class="fe ni nj nk mz b">dataset</code>是这个组的名称。<code class="fe ni nj nk mz b">student_mat</code>是表名。该语句末尾有一个分号<code class="fe ni nj nk mz b">;</code>表示该语句结束。(尽管在一些 SQL 数据库系统中，并不要求以分号结尾，但在这里我只包括它。)我们可以将这条 SQL 语句解释为“查询模式“dataset”中表“student_mat”的所有列。”需要记住的一点是，关键字是不区分大小写的。因此<code class="fe ni nj nk mz b">select</code>相当于<code class="fe ni nj nk mz b">SELECT</code>或<code class="fe ni nj nk mz b">Select</code>。</p><p id="5687" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个语句的结果将是这样的:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nl"><img src="../Images/bbeab91cf2f98351964fe140676a6824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O9Yt6CqedQ3ZUl_fUMM8AA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">SELECT * FROM dataset . student _ mat；</p></figure><p id="aa87" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如上所述，您可以用您想要的列名替换<code class="fe ni nj nk mz b">*</code>。结果将只包括那些列。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/af16c211e2e2f1f11235ad73e37b5eca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*07XMPW87-67hEDn5Fu7I2w.png"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select 学校，性别 from dataset.student</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e96a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">有要求—在哪里</h1><p id="f93d" class="pw-post-body-paragraph ki kj it kk b kl mt ju kn ko mu jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">但是在大多数情况下，如果不是全部，您不希望查询表中的所有记录。您希望查询符合特定条件的记录。然后我们需要扩展 SQL 语句。<code class="fe ni nj nk mz b">where</code>是你需要包含在语句中的内容。例如，我们希望查询学校是 GP 的表中的所有列。我们可以把前面的陈述扩展到</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="4fee" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat <strong class="mz iu">where school = 'GP';</strong></span></pre><p id="b370" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ni nj nk mz b">where</code>是表示查询条件的关键字。<code class="fe ni nj nk mz b">where</code>条款<code class="fe ni nj nk mz b">school = 'GP'</code>是代表“学校等于‘GP’”的标准。。注意<code class="fe ni nj nk mz b">GP</code>是用单引号引起来的。这对单引号对于作为标准值的字符串是必需的。如果标准值是数字，则没有引号，如下所示</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="a5fe" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where age = 18;</span></pre><p id="6a70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果将只包括符合条件的记录。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nr"><img src="../Images/3a566c8b53fb9de170719404f269591f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GokualmyVRLxS5k7eDnpYw.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 school = ' GP</p></figure><p id="6689" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果需要同时满足一个以上的标准，您可以用连接词<code class="fe ni nj nk mz b">and</code>进一步扩展<code class="fe ni nj nk mz b">where</code>子句。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="0347" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where school = 'GP' and sex = 'F';</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ns"><img src="../Images/2ab7c1ca00f9555f9fd016416714257d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_tf0i7qpVgJpBxQ1WHGiKw.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 school = 'GP '，sex = ' F</p></figure><p id="375f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以上示例选择学校等于“GP”且性别等于“F”的记录。但是如果我们想要选择一个列不等于某个值的记录呢？那你应该改用<code class="fe ni nj nk mz b">!= or &lt;&gt;</code>。在大多数数据库系统中，它们是等价的。个人比较喜欢<code class="fe ni nj nk mz b">!=</code>。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="28db" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where school = 'GP' and sex != 'F';</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nt"><img src="../Images/2b69e86f84b06862aec7e1b5633f9e98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1I2tFsZObgWymeGPSBpSkA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 school = 'GP '和 sex！= ' F</p></figure><p id="1bef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，如果您想要查询满足任一条件的记录，您可以使用连接词<code class="fe ni nj nk mz b">or</code>而不是<code class="fe ni nj nk mz b">and</code>。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nu"><img src="../Images/ca6d36dc03288ba5247696b50f3ae058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T4oR4Tj5a6THjdszyLqpeQ.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 school = 'GP '或 sex！= ' F</p></figure><p id="041e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想要过滤具有多个标准值的列，而不是逐个创建并用<code class="fe ni nj nk mz b">and</code>连接它们，您可以使用<code class="fe ni nj nk mz b">in</code>来包含一列的所有标准值。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="bbfa" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where Mjob in ('health','other');</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nv"><img src="../Images/adf108366e0d12cbf520977cbc64fc94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p4Ggh2i4I06QYXRT8Z-NMA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset . student _ mat where Mjob in(' health '，' other ')；</p></figure><p id="3a85" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于数值标准值，除了使用<code class="fe ni nj nk mz b">=</code>和<code class="fe ni nj nk mz b">!=</code>外，还可以使用其他运算符<code class="fe ni nj nk mz b">&gt;, &lt;, &gt;= and &lt;=</code>来构建标准。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nw"><img src="../Images/75c50dc136d08c1d52379ae5cca6b050.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Y0fR4MZJNmPe7RyfbXk2w.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中年龄&gt; = 16；</p></figure><p id="552b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可能已经注意到，关键字可以用来将 SQL 语句分解成不同的部分。并且使用这些关键字的顺序受到限制。不能将<code class="fe ni nj nk mz b">from</code>放在<code class="fe ni nj nk mz b">select</code>之前或<code class="fe ni nj nk mz b">where</code>之后。</p><p id="3e99" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面显示了一个更复杂的标准条件的例子。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="e3e6" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where ((school = 'GP' and sex = 'F') or (school = 'MS' or age &lt;18));</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nx"><img src="../Images/26a0beffdcf8da31f41617daae0baf7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vK4irDh_JAe8e5SK3c8Lew.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset . student _ mat where((school = ' GP ' and sex = ' F ')or(school = ' MS ' or age &lt; 18))；</p></figure><p id="6044" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，在某些情况下，您不能或没有提供准确的条件字符串值。相反，您希望使用特定的模式来过滤列，比如以特定的字符作为开头。然后您可以使用带有通配符的<code class="fe ni nj nk mz b">like</code>操作符。通配符有两种类型，<code class="fe ni nj nk mz b">%</code>和<code class="fe ni nj nk mz b">_</code>。(在 Microsoft Access 中，它使用<code class="fe ni nj nk mz b">*</code>和<code class="fe ni nj nk mz b">?</code>。)与其解释如何使用<code class="fe ni nj nk mz b">%</code>和<code class="fe ni nj nk mz b">_</code>，我觉得不如直接去举例说明如何使用。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="da4d" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where Mjob like 'o%';</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ny"><img src="../Images/5e66b6c4ec3b5309b6d81c4fa2b99aee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PgGzSGmeAmyCgxo9VMAQXA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 Mjob like ' o %</p></figure><p id="42fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个例子中，<code class="fe ni nj nk mz b">where</code>子句是<code class="fe ni nj nk mz b">Mjob like 'o%'</code>。<code class="fe ni nj nk mz b">%</code>指一个、多个或空字符。该<code class="fe ni nj nk mz b">where</code>子句表示选择 Mjob 列中值以“o”开头的所有记录，不管字母“o”后面有多少个或是否有任何字符。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="967a" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where Mjob like '%her';</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nv"><img src="../Images/9688c02a11c60ce43b6479855e2356d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOIonGsl8fQFus0JA9LQgg.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 m job like“% her”；</p></figure><p id="0256" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在这个例子中<code class="fe ni nj nk mz b">Mjob like ‘%her’</code>过滤值以‘她’结尾的记录。所以“其他”和“教师”都包括在选择中。</p><p id="1a8f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，您可以将<code class="fe ni nj nk mz b">%</code>放在字符中间，以便包含具有特定开始和结束字符的值。</p><p id="2849" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你理解了<code class="fe ni nj nk mz b">%</code>，那么就很容易理解如何使用<code class="fe ni nj nk mz b">_</code>。<code class="fe ni nj nk mz b">%</code>和<code class="fe ni nj nk mz b">_</code>的区别在于<code class="fe ni nj nk mz b">_</code>只代表一个字符，而<code class="fe ni nj nk mz b">%</code>代表一个、多个甚至空字符。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="1435" class="nd mc it mz b gy ne nf l ng nh">select * from dataset.student_mat where Mjob like 'o_h_r';</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nz"><img src="../Images/2fe070a59795b70c9507d906392d6907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KTIveNja_Dh8Y24mWTaQgQ.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select * from dataset.student_mat 其中 Mjob like ' o _ h _ r</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="fe8a" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">聚合-分组依据</h1><p id="fff6" class="pw-post-body-paragraph ki kj it kk b kl mt ju kn ko mu jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">SQL 的另一个常见应用是执行数据分析。我们更多的是在数据分组后进行数据分析。例如，您可能想知道表中每个学校的记录数，或者想知道每个性别的平均年龄。此时，您需要在 SQL 语句中包含<code class="fe ni nj nk mz b">group by</code>。例如，如果您想知道每个学校的记录数量，分组级别是<code class="fe ni nj nk mz b">school</code>，因此您必须在 SQL 语句中包含<code class="fe ni nj nk mz b">group by school</code>。<code class="fe ni nj nk mz b">group by</code>语句跟在<code class="fe ni nj nk mz b">where</code>语句后面。而且，您必须在<code class="fe ni nj nk mz b">select</code>子句中包含<code class="fe ni nj nk mz b">school</code>才能返回每个组的名称(在本例中是学校)。</p><p id="0033" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一步是计算每组的记录数。对于这一部分，我们需要在<code class="fe ni nj nk mz b">select</code>子句中包含一个聚合函数<code class="fe ni nj nk mz b">count</code>。每个聚合函数后面都有一个花括号，其中包含此类聚合的列名。既然要算学校，可以在<code class="fe ni nj nk mz b">select</code>语句中包含<code class="fe ni nj nk mz b">count(school)</code>。但是，对于<code class="fe ni nj nk mz b">count</code>函数，不需要指定要统计哪一列，因为选择哪一列没有区别。事实上，你甚至可以输入<code class="fe ni nj nk mz b">count(1)</code>来计数。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="ddb2" class="nd mc it mz b gy ne nf l ng nh">select school, count(school) from dataset.student_mat group by school;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oa"><img src="../Images/2e9cba123a59704214e9aa30659c9525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_w3afjq7pk2QxS-6TIzIA.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select school，count(school from dataset . student _ mat group by school；</p></figure><p id="cd10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果显示了学校中每个组的记录数。</p><p id="cd38" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以将分组级别扩展到多个列。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="eb69" class="nd mc it mz b gy ne nf l ng nh">select school, sex, count(school) from dataset.student_mat group by school, sex;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ob"><img src="../Images/a17068a1bcadf17fed66b11da6303b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xqQo8BOmIC1RBqe6o9OTyw.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select 学校，性别，count(学校)from dataset.student_mat group by 学校，性别；</p></figure><p id="0904" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是您可以在<code class="fe ni nj nk mz b">select</code>语句中使用的聚合函数:<code class="fe ni nj nk mz b">count, max, min, sum, avg</code>。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="205c" class="nd mc it mz b gy ne nf l ng nh">select school, avg(age) from dataset.student_mat group by school;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/7c0a29ba7b3ba1d4120a0b6d4ecb4254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*EkVJzXyPIXvyKwOhYKgTqg.png"/></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select school，avg(age)from dataset . student _ mat group by school；</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="89d9" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">别名—作为</h1><p id="5de4" class="pw-post-body-paragraph ki kj it kk b kl mt ju kn ko mu jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">正如您在前面的示例中看到的结果，平均年龄的列名变成了<code class="fe ni nj nk mz b">avg(age)</code>。它仍然是可以自我解释的。但是当然，如果我们重命名这个列名就更好了。然后我们可以在<code class="fe ni nj nk mz b">avg(age)</code>之后包含<code class="fe ni nj nk mz b">as</code>，并给这个列取一个新名字。我们还可以修改<code class="fe ni nj nk mz b">select</code>语句中其他列的名称。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="69ce" class="nd mc it mz b gy ne nf l ng nh">select school as school_name, avg(age) as average_age from dataset.student_mat group by school;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi od"><img src="../Images/a37ac6829d8ebb59cdf4c83c328c184b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ov9SQDXTgeJLln1Ui2M24w.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select school 作为 school_name，avg(age)作为 average _ age from dataset . student _ mat group by school；</p></figure><p id="4e13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我建议不要在列名中包含空格，因为这只会在您在<code class="fe ni nj nk mz b">select</code>语句中进一步选择该列时带来麻烦。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="162d" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">排名—排序依据</h1><p id="1ce6" class="pw-post-body-paragraph ki kj it kk b kl mt ju kn ko mu jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated"><code class="fe ni nj nk mz b">order by</code>语句帮助您按照一列或多列的升序或降序对返回的数据进行排序。默认顺序是升序，因此不需要指定。如果要按降序排序，必须在<code class="fe ni nj nk mz b">order by</code>语句中的列名后面加上<code class="fe ni nj nk mz b">desc</code>。</p><pre class="lf lg lh li gt my mz na nb aw nc bi"><span id="620a" class="nd mc it mz b gy ne nf l ng nh">select school as school_name, sex, count(school) as num_count <br/>from dataset.student_mat group by school, sex order by school, sex desc;</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi oe"><img src="../Images/cd969f78f9a4ee9dd51c074b46e05d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXkMvGHnT6lLrNI1st_3Mw.png"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">select school as school_name，sex，count(学校)as num _ count<br/>from dataset . student _ mat group by school，sex order by school，sex desc；</p></figure><p id="135f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ni nj nk mz b">order by</code>语句是<code class="fe ni nj nk mz b">order by school, sex desc</code>。因此，返回的结果第一个订单列<code class="fe ni nj nk mz b">school</code>由于没有指定而被升序排列。然后<code class="fe ni nj nk mz b">sex</code>降序排列。结果是，(GP，M)在(GP，F)之前，而(GP，F)在(MS，M)之前。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="3054" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">到目前为止，我已经讲述了 SQL 在查询和数据分析方面的基本用法。对于一个完全没有 SQL 经验的初学者来说，我相信这篇文章可以帮助你毫无困难地快速学习基本的 SQL 应用。请告诉我这篇文章是否对你有所帮助，或者你是否想进一步了解其他 SQL 用法，比如 join、having 或 window 函数。下次见。</p></div></div>    
</body>
</html>