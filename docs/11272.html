<html>
<head>
<title>Build your own AutoML in Power BI using PyCaret 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 PyCaret 2.0 在 Power BI 中构建您自己的 AutoML</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-own-automl-in-power-bi-using-pycaret-8291b64181d?source=collection_archive---------4-----------------------#2020-08-05">https://towardsdatascience.com/build-your-own-automl-in-power-bi-using-pycaret-8291b64181d?source=collection_archive---------4-----------------------#2020-08-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e8d0e352c8f132434ac8f1481492ae6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kx9YUt0hWPhU_a6h2vM5qA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">py caret——Python 中的开源低代码机器学习库</p></figure><h1 id="a89a" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak"> PyCaret 2.0 </strong></h1><p id="7e71" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">上周我们已经宣布了<a class="ae ly" rel="noopener" target="_blank" href="/announcing-pycaret-2-0-39c11014540e"> PyCaret 2.0 </a>，这是一个开源的、<strong class="lc ir">Python 中的低代码</strong>机器学习库，可以自动化机器学习工作流。它是一个端到端的机器学习和模型管理工具，可以加快机器学习实验周期，帮助数据科学家变得更加高效和多产。</p><p id="f19c" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在本帖中，我们展示了一个<strong class="lc ir">分步教程</strong>，介绍如何使用 PyCaret 在<a class="ae ly" href="https://powerbi.microsoft.com/en-us/" rel="noopener ugc nofollow" target="_blank"> Power BI </a>中构建自动化机器学习解决方案，从而允许数据科学家和分析师在没有任何额外许可或软件成本的情况下，向他们的仪表板添加一层机器学习。PyCaret 是一个开源的<strong class="lc ir">免费使用的</strong> Python 库，它提供了广泛的功能，可以在 Power BI 中工作。</p><p id="4b3d" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在本文结束时，您将了解如何在 Power BI 中实现以下内容:</p><ul class=""><li id="bf0e" class="me mf iq lc b ld lz lh ma ll mg lp mh lt mi lx mj mk ml mm bi translated">设置 Python conda 环境并安装 pycaret==2.0。</li><li id="4e71" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">用 Power BI 链接新创建的 conda 环境。</li><li id="ad31" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">在 Power BI 中构建您的第一个 AutoML 解决方案，并在仪表板上展示性能指标。</li><li id="43af" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">在 Power BI 中生产/部署您的 AutoML 解决方案。</li></ul><h1 id="f007" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Microsoft Power BI</h1><p id="9fbd" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">Power BI 是一种业务分析解决方案，可让您在整个组织中可视化数据和共享见解，或将它们嵌入到您的应用程序或网站中。在本教程中，我们将通过将 PyCaret 库导入 Power BI 来使用<a class="ae ly" href="https://powerbi.microsoft.com/en-us/downloads/" rel="noopener ugc nofollow" target="_blank"> Power BI Desktop </a>进行机器学习。</p><h1 id="3ec7" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是自动机器学习？</h1><p id="1963" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">自动机器学习(AutoML)是将机器学习的耗时、迭代任务自动化的过程。它允许数据科学家和分析师高效地构建机器学习模型，同时保持模型质量。任何 AutoML 解决方案的最终目标都是基于一些性能标准最终确定最佳模型。</p><p id="d7c2" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">传统的机器学习模型开发过程是资源密集型的，需要大量的领域知识和时间来产生和比较几十个模型。借助自动化机器学习，您可以轻松高效地加快生产就绪型 ML 模型的速度。</p><h1 id="e408" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">【PyCaret 是如何工作的？</h1><p id="44c7" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">PyCaret 是一个用于监督和非监督机器学习的工作流自动化工具。它被组织成六个模块，每个模块都有一组可用于执行某些特定操作的功能。每个函数接受一个输入并返回一个输出，在大多数情况下，这是一个经过训练的机器学习模型。第二版中可用的模块有:</p><ul class=""><li id="82b0" class="me mf iq lc b ld lz lh ma ll mg lp mh lt mi lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/classification" rel="noopener ugc nofollow" target="_blank">分类</a></li><li id="914a" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/regression" rel="noopener ugc nofollow" target="_blank">回归</a></li><li id="f481" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/clustering" rel="noopener ugc nofollow" target="_blank">聚类</a></li><li id="f5cb" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/anomaly-detection" rel="noopener ugc nofollow" target="_blank">异常检测</a></li><li id="9394" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a></li><li id="a90a" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><a class="ae ly" href="https://www.pycaret.org/association-rules" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a></li></ul><p id="fad7" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">PyCaret 中的所有模块都支持数据准备(超过 25 种基本预处理技术，附带大量未经训练的模型&amp;支持定制模型、自动超参数调整、模型分析和可解释性、自动模型选择、实验日志记录和简单的云部署选项。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/4cf3dac0d5d0cc9adc63c09554c50f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wT0m1kx8WjY_P7hrM6KDbA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">https://www.pycaret.org/guide</p></figure><p id="b6fe" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">要了解更多关于 PyCaret 的信息，<a class="ae ly" rel="noopener" target="_blank" href="/announcing-pycaret-2-0-39c11014540e">点击这里</a>阅读我们的官方发布公告。</p><p id="58b8" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果你想开始使用 Python，<a class="ae ly" href="https://github.com/pycaret/pycaret/tree/master/examples" rel="noopener ugc nofollow" target="_blank">点击此处</a>查看入门笔记本示例库。</p><blockquote class="mx"><p id="a711" class="my mz iq bd na nb nc nd ne nf ng lx dk translated">“PyCaret 通过为业务分析师、领域专家、公民数据科学家和经验丰富的数据科学家提供免费、开源和低代码的机器学习解决方案，使机器学习和高级分析的使用民主化”。</p></blockquote><h1 id="3954" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn nh kp kq kr ni kt ku kv nj kx ky kz bi translated">开始之前</h1><p id="c8ac" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">如果您是第一次使用 Python，安装 Anaconda 发行版是最简单的入门方式。<a class="ae ly" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank">点击这里</a>下载 Python 3.7 或更高版本的 Anaconda 发行版。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/527c605741ef4b3832cb382834b24e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMceDxpwFVHDtdFi528jEg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae ly" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">https://www.anaconda.com/products/individual</a></p></figure><h2 id="e24a" class="nl kd iq bd ke nm nn dn ki no np dp km ll nq nr kq lp ns nt ku lt nu nv ky nw bi translated">设置环境</h2><p id="fa38" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在我们开始在 Power BI 中使用 PyCaret 的机器学习功能之前，我们需要创建一个虚拟环境并安装 pycaret。这是一个分为三步的过程:</p><p id="e8f3" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank"> ✅ </a> <strong class="lc ir">步骤 1——创建一个 anaconda 环境</strong></p><p id="16a6" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">从开始菜单打开<strong class="lc ir"> Anaconda 提示符</strong>并执行以下代码:</p><pre class="mt mu mv mw gt nx ny nz oa aw ob bi"><span id="4b7b" class="nl kd iq ny b gy oc od l oe of">conda create --name <strong class="ny ir">myenv</strong> python=3.7</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/9b661134633c119f526cdc9479143a34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2D9jKJPM4eAy1-7lvcLlJQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Anaconda 提示符—创建环境</p></figure><p id="2b2e" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank">✅</a>T4】步骤 2 —安装 PyCaret </p><p id="921e" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在 Anaconda 提示符下执行以下代码:</p><pre class="mt mu mv mw gt nx ny nz oa aw ob bi"><span id="099c" class="nl kd iq ny b gy oc od l oe of">pip install <strong class="ny ir">pycaret==2.0</strong></span></pre><p id="d3f5" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">安装可能需要 15-20 分钟。如果您在安装时遇到问题，请查看我们的<a class="ae ly" href="https://www.github.com/pycaret/pycaret" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面，了解已知问题和解决方案。</p><p id="6bca" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank"> ✅ </a> <strong class="lc ir">第三步——在 Power BI 中设置 Python 目录</strong></p><p id="10e2" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">创建的虚拟环境必须与 Power BI 链接。这可以使用 Power BI Desktop 中的全局设置来完成(文件→选项→全局→ Python 脚本)。默认情况下，Anaconda 环境安装在以下位置:</p><p id="eabb" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">C:\Users\ <strong class="lc ir"> <em class="oh">用户名</em></strong>\ AppData \ Local \ Continuum \ anaconda 3 \ envs \ myenv</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/71fac33af972f13dcaf90ad006e735ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQMKuyEk8LGrOPE-NByjrg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">文件→选项→全局→ Python 脚本</p></figure><h1 id="dc30" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">👉让我们开始吧</strong></h1><h1 id="0d4f" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">设置业务环境</h1><p id="b3e1" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">一家保险公司希望通过使用住院时的人口统计和基本患者健康风险指标来更好地预测患者费用，从而改善其现金流预测。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/0d35a8d2ddf1693e80660f604ba756ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qM1HiWZ_uigwdcZ0_ZL6yA.png"/></div></div></figure><p id="caef" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><em class="oh"> ( </em> <a class="ae ly" href="https://www.kaggle.com/mirichoi0218/insurance#insurance.csv" rel="noopener ugc nofollow" target="_blank"> <em class="oh">)数据来源</em> </a> <em class="oh"> ) </em></p><h1 id="b5f3" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">目标</h1><p id="29a2" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">根据数据集中的其他变量，如年龄、性别、体重指数、儿童、吸烟者和地区，训练和选择预测患者费用的最佳回归模型。</p><h1 id="5759" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉步骤 1-加载数据集</h1><p id="57f2" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">你可以直接从 GitHub 加载数据集，方法是进入 Power BI Desktop → Get Data → Web</p><p id="c01c" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">链接到数据集:<a class="ae ly" href="https://raw.githubusercontent.com/pycaret/pycaret/master/datasets/insurance.csv" rel="noopener ugc nofollow" target="_blank">https://raw . githubusercontent . com/py caret/py caret/master/datasets/insurance . CSV</a></p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/a6d7111bc1ac93250b49d6deb9b5d89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZjZzF_TJudoThDCBGK3fQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Power BI 桌面→获取数据→ Web</p></figure><p id="00af" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在超级查询中创建重复数据集:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/f6c8e0258eb528ea7adaa1ed303f522d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mU8tl4P89WKMC__k6rM-Vw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">超级查询→创建重复数据集</p></figure><h1 id="6323" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉步骤 2-以 Python 脚本形式运行 AutoML</h1><p id="3d69" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在 Power Query 中运行以下代码(转换→运行 Python 脚本):</p><pre class="mt mu mv mw gt nx ny nz oa aw ob bi"><span id="9dba" class="nl kd iq ny b gy oc od l oe of"><strong class="ny ir"># import regression module</strong><br/>from pycaret.regression import *</span><span id="f9e8" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># init setup</strong><br/>reg1 = setup(data=dataset, target = 'charges', silent = True, html = False)</span><span id="7919" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># compare models</strong><br/>best_model = compare_models()</span><span id="4b8c" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># finalize best model<br/></strong>best = finalize_model(best_model)</span><span id="e082" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># save best model</strong><br/>save_model(best, 'c:/users/moezs/best-model-power')</span><span id="1cd5" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># return the performance metrics df<br/></strong>dataset = pull()</span></pre><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/01d621e8652ff25b784bab284ac5b3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOxy83SH1uy8pFLJT6sa3w.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">超级查询中的脚本</p></figure><p id="0225" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">前两行代码用于导入相关模块和初始化设置函数。设置功能执行机器学习中所需的几个必要步骤，例如清除缺失值(如果有的话)、将数据分成训练和测试、设置交叉验证策略、定义度量、执行特定于算法的转换等。</p><p id="c5da" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">训练多个模型，比较和评估性能指标的神奇函数是<strong class="lc ir"> compare_models。</strong>它根据可以在 compare_models 中定义的'<strong class="lc ir"> sort' </strong>参数返回最佳模型。默认情况下，它对回归用例使用“R2 ”,对分类用例使用“准确性”。</p><p id="f739" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">其余的行用于最终确定通过 compare_models 返回的最佳模型，并将其保存为本地目录中的 pickle 文件。最后一行返回数据帧，其中包含模型训练的详细信息及其性能指标。</p><p id="f8a8" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">输出:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/661e9b1cd511a89a1e9f7bf55d8ededb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CSYQDLfQUZeTtYwNllFSw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Python 脚本的输出</p></figure><p id="cd8a" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">仅用几条线，我们就训练了 20 多个模型，该表显示了基于 10 倍交叉验证的性能指标。</p><p id="113f" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">最高性能模型<strong class="lc ir">梯度推进回归器</strong>将与整个转换管道一起作为 pickle 文件保存在您的本地目录中。稍后可以使用该文件在新数据集上生成预测(请参见下面的步骤 3)。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/1c615ba5f26df0697c59f403ae47c50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*euQRJQVAVvP2X5ASNWjjOg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">转换管道和模型保存为 pickle 文件</p></figure><p id="2e8d" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">PyCaret 致力于模块化自动化的想法。因此，如果您有更多的资源和时间进行培训，您可以扩展脚本来执行超参数调整、集成和其他可用的建模技术。请参见下面的示例:</p><pre class="mt mu mv mw gt nx ny nz oa aw ob bi"><span id="ae0c" class="nl kd iq ny b gy oc od l oe of"><strong class="ny ir"># import regression module</strong><br/>from pycaret.regression import *</span><span id="6e6b" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># init setup</strong><br/>reg1 = setup(data=dataset, target = 'charges', silent = True, html = False)</span><span id="9c92" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># compare models</strong><br/>top5 = compare_models(n_select = 5)<br/>results = pull()</span><span id="bb55" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># tune top5 models<br/></strong>tuned_top5 = [tune_model(i) for i in top5]</span><span id="558e" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># select best model<br/></strong>best = automl()</span><span id="731b" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># save best model</strong><br/>save_model(best, 'c:/users/moezs/best-model-power')</span><span id="89e8" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># return the performance metrics df<br/></strong>dataset = results</span></pre><p id="f466" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">我们现在返回了前 5 名的型号，而不是一个最高性能的型号。然后，我们创建了一个列表理解(循环)来调整顶级候选模型的超参数，最后<strong class="lc ir"> automl 函数</strong>选择一个性能最佳的模型，然后保存为 pickle 文件(注意，这次我们没有使用<strong class="lc ir"> finalize_model </strong>，因为 automl 函数返回最终模型)。</p><h1 id="47a2" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">样本仪表板</strong></h1><p id="ed17" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">示例仪表板已创建。PBIX 文件<a class="ae ly" href="https://github.com/pycaret/pycaret-powerbi-automl" rel="noopener ugc nofollow" target="_blank">上传到这里</a>。</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e8d0e352c8f132434ac8f1481492ae6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kx9YUt0hWPhU_a6h2vM5qA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">使用 PyCaret AutoML 结果创建的仪表板</p></figure><h1 id="1cb9" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉步骤 3-部署模型以生成预测</h1><p id="58d0" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">一旦我们将最终模型保存为 pickle 文件，我们就可以使用它来预测新数据集的电荷。</p><h1 id="f46b" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">加载新数据集</strong></h1><p id="51c5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">出于演示目的，我们将再次加载相同的数据集，并从数据集中删除“charges”列。在 Power Query 中以 Python 脚本的形式执行以下代码以获得预测结果:</p><pre class="mt mu mv mw gt nx ny nz oa aw ob bi"><span id="a690" class="nl kd iq ny b gy oc od l oe of"><strong class="ny ir"># load functions from regression module</strong><br/>from pycaret.regression import load_model, predict_model</span><span id="0fe6" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># load model in a variable<br/></strong>model = load_model(‘c:/users/moezs/best-model-powerbi’)</span><span id="7408" class="nl kd iq ny b gy om od l oe of"><strong class="ny ir"># predict charges<br/></strong>dataset = predict_model(model, data=dataset)</span></pre><p id="1b84" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">输出:</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/d74f9b0de4fbf2a8f35db3287bb080b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYWjwtu4njS7f7XMp90ofg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Power 查询中的 predict_model 函数输出</p></figure><h1 id="4e6c" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">部署电源 BI 服务</strong></h1><p id="6f78" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">当您将包含 Python 脚本的 Power BI 报告发布到服务时，这些脚本也将在您的数据通过本地数据网关刷新时执行。</p><p id="d5f6" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">要实现这一点，您必须确保托管您的个人网关的计算机上也安装了 Python 运行时以及相关的 Python 包。请注意，由多个用户共享的本地数据网关不支持 Python 脚本执行。<a class="ae ly" href="https://powerbi.microsoft.com/en-us/blog/python-visualizations-in-power-bi-service/" rel="noopener ugc nofollow" target="_blank">点击此处</a>阅读更多相关信息。</p><p id="ccae" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">本教程中使用的 PBIX 文件被上传到这个 GitHub 库:【https://github.com/pycaret/pycaret-powerbi-automl T2】</p><p id="aaf3" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果你想了解更多关于 PyCaret 2.0 的信息，请阅读这个<a class="ae ly" rel="noopener" target="_blank" href="/announcing-pycaret-2-0-39c11014540e">公告</a>。</p><p id="c03f" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果您以前使用过 PyCaret，您可能会对当前版本的<a class="ae ly" href="https://github.com/pycaret/pycaret/releases/tag/2.0" rel="noopener ugc nofollow" target="_blank">发行说明</a>感兴趣。</p><p id="1789" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">使用 Python 中的这个轻量级工作流自动化库，您可以实现的目标是无限的。如果你觉得这有用，请不要忘记给我们 github 回购⭐️。</p><p id="b2d3" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">要了解更多关于 PyCaret 的信息，请关注我们的 LinkedIn 和 Youtube。</p><h1 id="b01c" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">你可能也会感兴趣:</strong></h1><p id="b32a" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/machine-learning-in-power-bi-using-pycaret-34307f09394a">使用 PyCaret 在 Power BI 中进行机器学习</a> <br/> <a class="ae ly" rel="noopener" target="_blank" href="/build-your-first-anomaly-detector-in-power-bi-using-pycaret-2b41b363244e">使用 PyCaret 在 Power BI 中构建您的第一个异常检测器</a> <br/> <a class="ae ly" rel="noopener" target="_blank" href="/how-to-implement-clustering-in-power-bi-using-pycaret-4b5e34b1405b">如何使用 PyCaret 在 Power BI 中实现聚类</a> <br/> <a class="ae ly" rel="noopener" target="_blank" href="/topic-modeling-in-power-bi-using-pycaret-54422b4e36d6">主题使用 PyCaret 在 Power BI 中建模</a></p><h1 id="99d6" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">重要链接</h1><p id="a9f6" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae ly" href="https://medium.com/@moez_62905" rel="noopener">博客</a><br/><a class="ae ly" href="https://github.com/pycaret/pycaret/releases/tag/2.0" rel="noopener ugc nofollow" target="_blank">py caret 2.0 发行说明</a> <br/> <a class="ae ly" href="https://www.pycaret.org/guide" rel="noopener ugc nofollow" target="_blank">用户指南/文档</a><a class="ae ly" href="https://github.com/pycaret/pycaret/releases/tag/2.0" rel="noopener ugc nofollow" target="_blank"><br/></a><a class="ae ly" href="http://www.github.com/pycaret/pycaret" rel="noopener ugc nofollow" target="_blank">Github</a><br/><a class="ae ly" href="https://stackoverflow.com/questions/tagged/pycaret" rel="noopener ugc nofollow" target="_blank">stack overflow</a><br/><a class="ae ly" href="https://www.pycaret.org/install" rel="noopener ugc nofollow" target="_blank">安装 PyCaret </a> <br/> <a class="ae ly" href="https://www.pycaret.org/tutorial" rel="noopener ugc nofollow" target="_blank">笔记本教程</a> <br/> <a class="ae ly" href="https://www.pycaret.org/contribute" rel="noopener ugc nofollow" target="_blank">贡献于 PyCaret </a></p><h1 id="3fe6" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">想了解某个特定模块？</h1><p id="de12" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">单击下面的链接查看文档和工作示例。</p><p id="7935" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.pycaret.org/classification" rel="noopener ugc nofollow" target="_blank">分类</a> <br/> <a class="ae ly" href="https://www.pycaret.org/regression" rel="noopener ugc nofollow" target="_blank">回归<br/> </a> <a class="ae ly" href="https://www.pycaret.org/clustering" rel="noopener ugc nofollow" target="_blank">聚类</a> <br/> <a class="ae ly" href="https://www.pycaret.org/anomaly-detection" rel="noopener ugc nofollow" target="_blank">异常检测<br/></a>T37】自然语言处理 <br/> <a class="ae ly" href="https://www.pycaret.org/association-rules" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a></p></div></div>    
</body>
</html>