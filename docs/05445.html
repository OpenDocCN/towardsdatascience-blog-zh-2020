<html>
<head>
<title>Set up a High Content Screening Imaging Platform with Label Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Label Studio 建立高内容放映影像平台</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setup-a-high-content-screening-imaging-platform-with-label-studio-b7e5a6ebb13c?source=collection_archive---------47-----------------------#2020-05-07">https://towardsdatascience.com/setup-a-high-content-screening-imaging-platform-with-label-studio-b7e5a6ebb13c?source=collection_archive---------47-----------------------#2020-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e1f5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于 HCS 来说，拥有一个注释图像数据的平台是必不可少的。在这里，我将演示如何从 Broad 注释 C Elegans 图像。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/079cec6653db44555f9e57f237abd0bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v5N39PDBYpPn6Ayw.jpg"/></div></div></figure><p id="4433" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">几年来，我一直在寻找一个我真正喜欢的工具，使用 web 界面来注释 HCS 图像。我用过几个工具，包括一个叫做<a class="ae ln" href="https://github.com/tzutalin/labelImg" rel="noopener ugc nofollow" target="_blank"> LabelImg </a>的桌面应用，我终于找到了一个检查所有叫做<a class="ae ln" href="https://labelstud.io/" rel="noopener ugc nofollow" target="_blank"> LabelStudio </a>的盒子的工具！</p><p id="30b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Label Studio 是一个用于图像、音频和文本的注释工具。在这里，我们将专注于图像作为我们选择的媒介。</p><p id="3ced" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在这个视频中讲述了这个过程。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><h1 id="7e1f" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">获取数据</h1><p id="5fe8" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">当然，您可以使用您自己的数据，但是对于本教程，我将使用来自<a class="ae ln" href="https://data.broadinstitute.org/bbbc/BBBC010/" rel="noopener ugc nofollow" target="_blank">Broad bio image Benchmark Collection</a>的公开可用的<em class="mn"> C. elegans </em>数据集。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="cfc6" class="mt lr iq mp b gy mu mv l mw mx">mkdir data<br/>cd data<br/>wget https://data.broadinstitute.org/bbbc/BBBC010/BBBC010_v2_images.zip<br/>unzip BBBC010_v2_images.zip</span></pre><p id="30c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在系统查看器中打开时，HCS 图像通常非常暗。为了将它们用于管道的其余部分，我们必须进行两步转换过程，首先使用<a class="ae ln" href="https://www.openmicroscopy.org/bio-formats/" rel="noopener ugc nofollow" target="_blank"> bftools </a>从 tif - &gt; png 转换，然后使用<a class="ae ln" href="https://imagemagick.org/index.php" rel="noopener ugc nofollow" target="_blank"> Imagmagick </a>进行色阶校正。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="48dd" class="mt lr iq mp b gy mu mv l mw mx">cd .. # be in your project root here<br/># Use the bftools docker image and drop into a shell<br/>mkdir data/tif<br/>mkdir data/png<br/>mkdir data/corrected-png<br/>docker run -it -v $(pwd)/data:/home/bf/data openmicroscopy/bftools bash<br/>cd /home/bf/data<br/>find $(pwd) -name '*tif' | sed 's/\.tif//g' | xargs -I {} bfconvert -nogroup {}.tif {}.png<br/># ctrl+d to exit the container</span></pre><p id="55a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们将使用 ImageMagick 来应用自动水平校正，以便我们可以看到我们正在标记的内容！</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="f559" class="mt lr iq mp b gy mu mv l mw mx">docker run -it --rm -v $(pwd)/data:/data \<br/>    continuumio/miniconda3 bash<br/># On the image<br/>conda install -c conda-forge -y imagemagick<br/>cd /data<br/>find $(pwd) -name '*tif' | xargs -I {} basename {} | sed 's/\.tif//g' | xargs -I {} convert -auto-level /data/{}.png /data/{}-autolevel.png<br/>mv *.tif tif/<br/>mv *auto*.png corrected-png/<br/>mv *.png png/<br/># Ctrl+D to exit</span></pre><p id="4281" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你像我一样，收集 docker 图片作为避免在你的电脑上安装东西的一种方式，你需要偶尔清理它们。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="9c43" class="mt lr iq mp b gy mu mv l mw mx"># This will remove ALL DOCKER containers from your system<br/># Use with caution!<br/>docker container stop $(docker container ls -aq)<br/>docker system prune -f -a</span></pre><p id="f360" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您需要清理图像，请移除<code class="fe my mz na mp b">data/png</code>和<code class="fe my mz na mp b">data/tif</code>文件夹。我们不会使用它们。</p><h1 id="d647" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">启动 LabelStudio</h1><p id="eeb9" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">LabelStudio 基于项目工作，每个项目都包含任务。在这种情况下，任务是标记图像。因此，我们需要做的是将它指向一个图像目录，它将为我们配置项目。</p><h1 id="4d48" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">不同的标签配置</h1><p id="ee13" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">LabelStudio 可以容纳几种不同的图像注释类型。了解更多信息的最佳途径是访问他们的<a class="ae ln" href="https://labelstud.io/templates/" rel="noopener ugc nofollow" target="_blank">模板</a>页面，开始探索他们的游乐场。</p><p id="92ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将假设您正在使用语义分割、多边形标记或包围盒。作为一个快速的免责声明，语义分割界面在我试用时有点小故障。在撰写本文时，它被标记为“新的”,正在积极开发中。也许当你读到这封信的时候，事情已经解决了。</p><p id="8afd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这对我来说不是问题，因为我个人发现我可以使用多边形标注工具来勾勒形状，从而获得相同的功能。我还发现多边形工具更容易使用，一旦你有了多边形轮廓，你就可以把它转换成一个遮罩。</p><h1 id="23d5" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">语义分割与包围盒</h1><p id="3bde" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">语义分割是指将图像中的每一个像素指定为你想要标记的东西。标注更加耗时，并且需要更多的计算资源来训练模型，但是精度会更高。</p><p id="098a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用边界框来标记和开始使用要快得多，但是你会失去准确性，特别是当你有许多重叠的对象时。</p><p id="ce23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的例子可以更好地解释这一点:</p><p id="b5a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">多边形标签</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/3a393ce380e0dbac7f5a9c216cde878c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r6zY2gERBOIcw3JC.png"/></div></div></figure><p id="128a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">语义标签</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/e3e9d3f02eb8423865820ab4b1499492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RJ5wqwpYxcc2ZJAt.png"/></div></div></figure><p id="cccc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">边界框</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/a0b93c69bda7b3c11b534d4df22a79da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VZneaCei8rn7KeXk.png"/></div></div></figure><h1 id="74a9" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">初始化并启动脚本</h1><p id="925d" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">抓住这个，命名为<code class="fe my mz na mp b">init-labelproject.sh</code>。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="0cdc" class="mt lr iq mp b gy mu mv l mw mx">#!/usr/bin/env bash<br/><br/># init-labelproject.sh<br/><br/>docker run --rm -it \<br/>    -e PORT=${PORT} \<br/>    -v $(pwd)/${TYPE}:/label-studio/${TYPE} \<br/>    -v $(pwd)/data:/label-studio/data \<br/>    -v $(pwd)/conf:/label-studio/conf \<br/>     --name label-studio-${TYPE} \<br/>     heartexlabs/label-studio:latest label-studio \<br/>        init ${TYPE} --force \<br/>        --port ${PORT} \<br/>        --input-path=/label-studio/data/corrected-png \<br/>        --label-config=/label-studio/conf/${TYPE}-config.xml \<br/>        --input-format=image-dir</span></pre><p id="e415" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">抓住这个，命名为<code class="fe my mz na mp b">run-labelstudio.sh</code>。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="a86c" class="mt lr iq mp b gy mu mv l mw mx">#!/usr/bin/env bash<br/><br/># run-labelstudio.sh<br/><br/>docker run --rm -it \<br/>    -p ${PORT}:${PORT} \<br/>    -e PORT=${PORT} \<br/>    -v $(pwd)/${TYPE}:/label-studio/${TYPE} \<br/>    -v $(pwd)/data:/label-studio/data \<br/>    -v $(pwd)/conf:/label-studio/conf \<br/>     --name label-studio-${TYPE} \<br/>     heartexlabs/label-studio:latest label-studio \<br/>        start ./${TYPE} --port ${PORT}</span></pre><p id="a64b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦你有了这些运行<code class="fe my mz na mp b">chmod 777 *sh</code>，让我们来标记一些蠕虫！</p><h1 id="ab84" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">设置您的项目并启动 Web 界面</h1><p id="9824" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">在下面找到您想要的配置，并启动 web 界面。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="b830" class="mt lr iq mp b gy mu mv l mw mx">mkdir conf<br/># Make sure each of the xml files are in the conf dir!<br/>cd conf</span></pre><p id="9321" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">包围盒配置</strong></p><p id="242e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">抓住这个放在<code class="fe my mz na mp b">conf/object-config.xml</code>里。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="7003" class="mt lr iq mp b gy mu mv l mw mx">&lt;View style="display: flex"&gt;<br/>  &lt;View style="width: 100px"&gt;<br/>    &lt;Header value="Pick label" /&gt;<br/>    &lt;RectangleLabels name="tag" toName="img"&gt;<br/>      &lt;Label value="Alive" background="blue"&gt;&lt;/Label&gt;<br/>      &lt;Label value="Dead" background="orange"&gt;&lt;/Label&gt;<br/>    &lt;/RectangleLabels&gt;<br/>    &lt;/View&gt;<br/>  &lt;View&gt;<br/>    &lt;Image name="img" value="$image" showMousePos="true" zoom="true" zoomControl="true" /&gt;<br/>  &lt;/View&gt;<br/>&lt;/View&gt;</span></pre><p id="de6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">多边形配置</strong></p><p id="cff5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">抓住这个，把它放在<code class="fe my mz na mp b">conf/polygon-config.xml</code>。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="9810" class="mt lr iq mp b gy mu mv l mw mx">&lt;View style="display: flex"&gt;<br/>  &lt;View style="width: 100px"&gt;<br/>    &lt;Header value="Pick label" /&gt;<br/>    &lt;PolygonLabels name="tag" toName="img" strokewidth="2" pointstyle="circle" pointsize="small" showInline="false"&gt;<br/>      &lt;Label value="Alive" background="blue"&gt;&lt;/Label&gt;<br/>      &lt;Label value="Dead" background="orange"&gt;&lt;/Label&gt;<br/>    &lt;/PolygonLabels&gt;<br/>    &lt;/View&gt;<br/>  &lt;View&gt;<br/>    &lt;Image name="img" value="$image" showMousePos="true" zoom="true" zoomControl="true" /&gt;<br/>  &lt;/View&gt;<br/>&lt;/View&gt;</span></pre><p id="8a2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">语义配置</strong></p><p id="1716" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">抓住这个放在<code class="fe my mz na mp b">conf/semantic-config.xml</code>里。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="ff5b" class="mt lr iq mp b gy mu mv l mw mx">&lt;View style="display: flex"&gt;<br/>  &lt;View style="width: 100px"&gt;<br/>    &lt;Header value="Pick label" /&gt;<br/>    &lt;BrushLabels name="tag" toName="img"&gt;<br/>      &lt;Label value="Alive" background="blue" /&gt;<br/>      &lt;Label value="Dead" background="orange" /&gt;<br/>    &lt;/BrushLabels&gt;<br/>    &lt;/View&gt;<br/>  &lt;View&gt;<br/>    &lt;Image name="img" value="$image" showMousePos="true" zoom="true" zoomControl="true" /&gt;<br/>  &lt;/View&gt;<br/>&lt;/View&gt;</span></pre><h1 id="c29a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">包围盒</h1><p id="dbca" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">要运行边界框界面，使用以下命令-</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="936c" class="mt lr iq mp b gy mu mv l mw mx">export TYPE="object"<br/>export PORT="8080"<br/>mkdir $TYPE<br/># you only need to run the init script once for setup<br/>./init-labelproject.sh<br/>./run-labelstudio.sh</span></pre><p id="06ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并在浏览器中打开<code class="fe my mz na mp b">localhost:8080</code>。</p><h1 id="b72a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">多边形</h1><p id="770f" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">要运行多边形界面，请使用以下命令-</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="7b45" class="mt lr iq mp b gy mu mv l mw mx">export TYPE="polygon"<br/>export PORT="8081"<br/>mkdir $TYPE<br/># you only need to run the init script once for setup<br/>./init-labelproject.sh<br/>./run-labelstudio.sh</span></pre><p id="e991" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并在浏览器中打开<code class="fe my mz na mp b">localhost:8081</code>。</p><h1 id="ad56" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">语义分割(画笔)</h1><p id="3615" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">要运行语义界面，请使用以下命令-</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="5054" class="mt lr iq mp b gy mu mv l mw mx">export TYPE="semantic"<br/>export PORT="8082"<br/>mkdir $TYPE<br/># you only need to run the init script once for setup<br/>./init-labelproject.sh<br/>./run-labelstudio.sh</span></pre><p id="1401" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并在浏览器中打开<code class="fe my mz na mp b">localhost:8082</code>。</p><h1 id="207a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">定制标签界面</h1><p id="6f30" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">LabelStudio 给了你很多对<a class="ae ln" href="https://labelstud.io/tags/#Styles" rel="noopener ugc nofollow" target="_blank">标签界面</a>的控制。您也可以使用<a class="ae ln" href="https://labelstud.io/tags/choices.html" rel="noopener ugc nofollow" target="_blank">控制标签</a>直接通过配置添加简单的表单。</p><p id="eaa0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我想要的是将图像标记为完整的能力，这意味着所有的蠕虫都被标记，或者无效以将其从训练中排除。我可以用下面的配置添加它。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="2e2b" class="mt lr iq mp b gy mu mv l mw mx">&lt;View&gt;<br/><br/>    &lt;!--    Begin Display the image--&gt;<br/>    &lt;View style="padding: 25px;<br/>               box-shadow: 2px 2px 8px #AAA;"&gt;<br/>        &lt;Image name="img" value="$image" showMousePos="true" zoom="true" zoomControl="true"/&gt;<br/>    &lt;/View&gt;<br/>    &lt;!--    End Display the image--&gt;<br/><br/>    &lt;!--    Begin display labels--&gt;<br/>    &lt;View style=" padding: 25px;<br/>               box-shadow: 2px 2px 8px #AAA;"&gt;<br/>        &lt;View style=""&gt;<br/>            &lt;Header value="Choose Phenotype"/&gt;<br/>            &lt;PolygonLabels name="tag" toName="img" strokewidth="2" pointstyle="circle" pointsize="small"<br/>                           showInline="false"&gt;<br/>                &lt;Label value="Alive" background="blue"&gt;&lt;/Label&gt;<br/>                &lt;Label value="Dead" background="orange"&gt;&lt;/Label&gt;<br/>            &lt;/PolygonLabels&gt;<br/>        &lt;/View&gt;<br/><br/>        &lt;View style=""&gt;<br/>            &lt;Header value="Check when the image is complete. If the image is not suitable for training choose invalid instead."/&gt;<br/><br/>            &lt;Choices name="complete" toName="img" choice="single"&gt;<br/>                &lt;Choice alias="complete" value="Complete"/&gt;<br/>                &lt;Choice alias="invalid" value="Invalid"/&gt;<br/>            &lt;/Choices&gt;<br/>        &lt;/View&gt;<br/>    &lt;/View&gt;<br/>    &lt;!--    End display labels--&gt;<br/><br/><br/>&lt;/View&gt;</span></pre><p id="3954" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了得到你想要的精确布局，你可以在这上面多下功夫。宽度、高度和其他 CSS 变量都可以通过配置进行配置。确保重新启动服务器以查看您的新配置！</p><p id="26f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每个控件都有一个名称<code class="fe my mz na mp b">name</code>，它必须是唯一的，还有一个目的地<code class="fe my mz na mp b">toName</code>。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="ff41" class="mt lr iq mp b gy mu mv l mw mx">&lt;Choices name="complete" toName="img" choice="single"&gt;<br/># ...<br/>&lt;Image name="img" value="$image"<br/># ...<br/>&lt;PolygonLabels name="tag" toName="img"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/91d87b7e2039dcc26f2324b4794635a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uCJpNT-czLPjsSvF.png"/></div></div></figure><h1 id="0de8" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">处理标签输出</h1><p id="e54f" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">每个输出都在您的<code class="fe my mz na mp b">project-dir/completions</code>中，在那个目录中，每个图像都有一个 json 文件。你会看到路径<code class="fe my mz na mp b">completions</code>，然后会有一个<code class="fe my mz na mp b">results</code>的数组。输出格式和具体规格可能会因您的配置而异，因此请务必使用您自己的配置进行验证。</p><p id="759e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是一个面标注输出示例。我已经添加了注释，它不再是有效的 json，所以不要试图解析它。；-)</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4507" class="mt lr iq mp b gy mu mv l mw mx">{<br/>## Corresponds to the name on the Polygon Control<br/>    "from_name": "tag",<br/>## Randomly generated ID <br/>    "id": "bUgnJpbBgC",<br/>## Height and Width of the Image<br/>    "original_height": 520,<br/>    "original_width": 696,<br/>## Task Variable<br/>    "source": "$image",<br/>## The to portion of the control<br/>    "to_name": "img",<br/>## Control Type<br/>    "type": "polygonlabels",<br/>    "value": {<br/>## Points of the polygon<br/>## These can be read into a matplotlib.Path object for parsing<br/>        "points": [<br/>            [<br/>                71.25434944790884,<br/>                27.052753770458885<br/>            ],<br/>            [<br/>                68.9321022931952,<br/>                28.148466100859682<br/>            ],<br/>            ... More labels<br/>        ],<br/>        "polygonlabels": [<br/>        ## ITS ALIVE!<br/>        ## This is one of the phenotypes<br/>        ## The phenotypes were either alive or dead<br/>            "Alive"<br/>        ]<br/>    }<br/>},</span></pre><p id="0992" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们用完全/无效创建的“表单”的一个示例。</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="1328" class="mt lr iq mp b gy mu mv l mw mx">{<br/># This is the name from the control<br/>    "from_name": "complete",<br/>    "id": "PZru1lZMeo",<br/>    "to_name": "img",<br/>    "type": "choices",<br/>    "value": {<br/>        "choices": [<br/>        ## This image as marked as invalid!<br/>        ## Don't use it for training!<br/>            "invalid"<br/>        ]<br/>    }<br/>}</span></pre><p id="b526" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是事情变得有趣的时候，因为现在您有了一个带有可解析输出的可配置接口，您可以开始为训练创建健壮的管道。</p><h1 id="5846" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">进一步的想法</h1><p id="f239" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">当您旋转界面并开始标记时，您会看到 LabelStudio 将您的数据发送到<code class="fe my mz na mp b">{polygon,object,semantic}/completions/*.json</code>。这些只是数据文件，然后您可以使用它们为 Tensorflow、PyTorch 或 Keras 训练模型。</p><p id="8cfb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设您使用的是<a class="ae ln" href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/instance_segmentation.md" rel="noopener ugc nofollow" target="_blank"> Tensorflow MaskRCNN </a>模型。您可以使用 LabelStudio 来标记您的图像，将 JSON 文件转换成一个<a class="ae ln" href="https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/using_your_own_dataset.md" rel="noopener ugc nofollow" target="_blank"> TFRecord </a>，并进行训练。然后你可以拿起你不完美的模型，让它标记一个图像集，然后手动清理新的图像，冲洗并重复。</p><p id="9335" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你有任何问题，请不要犹豫与我在 jillian@dabbleofdevops.com 联系。</p><h1 id="9af7" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">引文</h1><div class="nc nd gp gr ne nf"><a href="https://data.broadinstitute.org/bbbc/BBBC010/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">BBBC010:秀丽隐杆线虫活/死分析</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">登录号 BBBC010 第 1 版这一选择的图像是控制选择从一个屏幕上找到新的…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">data.broadinstitute.org</p></div></div><div class="no l"><div class="np l nq nr ns no nt kp nf"/></div></div></a></div><p id="3278" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">“我们使用了由 Fred Ausubel 提供的<em class="mn">秀丽隐杆线虫</em>感染活/死图像集版本 1，可从 Broad bio image Benchmark Collection 获得[ <a class="ae ln" href="http://dx.doi.org/10.1038/nmeth.2083" rel="noopener ugc nofollow" target="_blank"> Ljosa 等人，<em class="mn"> Nature Methods </em>，2012 </a> ]。”</p></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="72c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mn">最初发表于</em><a class="ae ln" href="https://www.dabbleofdevops.com/blog/setup-a-high-content-screening-imaging-platform-with-label-studio" rel="noopener ugc nofollow" target="_blank"><em class="mn">【https://www.dabbleofdevops.com】</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>