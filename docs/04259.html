<html>
<head>
<title>Identifying Sellers of Illicit Narcotics on Soundcloud.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">识别Soundcloud.com的非法毒品卖家</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/identifying-sellers-of-illicit-narcotics-on-soundcloud-com-3ca0bece4307?source=collection_archive---------48-----------------------#2020-04-17">https://towardsdatascience.com/identifying-sellers-of-illicit-narcotics-on-soundcloud-com-3ca0bece4307?source=collection_archive---------48-----------------------#2020-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e46a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">识别网上毒贩的自动化框架</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/924400628f1c3a49253b8a43b32bf040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jETyzBoSWCcu0mkg7AST5w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/photo/medication-pills-isolated-on-yellow-background-3683105/" rel="noopener ugc nofollow" target="_blank">像素</a>的图像</p></figure><h1 id="fcfa" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="5143" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">许多网上药品销售发生在暗网市场——隐藏在暗网上销售非法商品的平台。然而，在Instagram和Snapchat等地方，这些商品的销售开始从暗网过渡到表面网。</p><p id="334a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">卖家将利用这些平台发布他们产品的图片，并建立销售。然后，客户将付款并提供送货地点。定位这些帐户可能很困难，尤其是在Snapchat的情况下，因为你必须将他们添加为好友才能查看他们的内容。</p><p id="989f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，这些卖家正在网络上宣传他们的Instagram和Snapchat个人资料。这种情况发生在流行的在线音乐流媒体网站Soundcloud的评论区。下面是一个评论的截图，可识别的信息被编辑，广告大麻，可卡因和迷幻药。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/4d99ca84f5eb92c7ce9313703760efe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4hGWLWZ_roHC5ze-Kxdvhw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://soundcloud.com/" rel="noopener ugc nofollow" target="_blank">音云</a></p></figure><p id="4153" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">建立一个自动化框架来收集Soundcloud评论并提取Snapchat和Instagram上销售毒品的个人资料，有助于提高这一新领域执法工作的有效性。</p><h1 id="c5fc" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结构</h1><p id="aec5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">该框架是用Python开发的，包括两个组件:web抓取和帐户提取。网络爬虫抓取Soundcloud.com并下载流行歌曲的评论。然后，这些评论被输入账户提取组件，该组件识别广告销售毒品的评论，并提取Instagram和Snapchat账户。</p><h2 id="f6c8" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated"><em class="nf">刮网器</em></h2><p id="1c01" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">web scraper从Soundcloud上的当前热门曲目中抓取评论，并将其存储在csv文件中。这一管道概述如下。</p><p id="c037" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，Selenium库用于访问Soundcloud图表页面。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="3b54" class="mt la it nh b gy nl nm l nn no">driver = webdriver.Chrome()<br/>driver.get("<a class="ae ky" href="https://soundcloud.com/discover/sets/charts-top:all-music:us" rel="noopener ugc nofollow" target="_blank">https://soundcloud.com/discover/sets/charts-top:all-music:us</a>")<br/>time.sleep(5)</span></pre><p id="3359" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后选择当前的顶部轨道。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="988a" class="mt la it nh b gy nl nm l nn no">driver.find_element_by_xpath('//*[<a class="ae ky" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@id</a>="content"]/div/div/div[2]/div[1]/div/div[2]/ul/li[1]/div/div[3]/a[2]').click()</span></pre><p id="74a2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">因为Soundcloud对评论使用动态加载，所以需要先滚动到页面底部，直到不能再加载评论为止。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="b70d" class="mt la it nh b gy nl nm l nn no">last_height = driver.execute_script("return document.body.scrollHeight")</span><span id="29de" class="mt la it nh b gy np nm l nn no">while True:</span><span id="beea" class="mt la it nh b gy np nm l nn no">  driver.execute_script("window.scrollTo(0,               document.body.scrollHeight);")</span><span id="8e18" class="mt la it nh b gy np nm l nn no"><br/>  time.sleep(2)</span><span id="8397" class="mt la it nh b gy np nm l nn no"><br/>  new_height = driver.execute_script("return document.body.scrollHeight")</span><span id="d167" class="mt la it nh b gy np nm l nn no">if new_height == last_height:<br/> break<br/> last_height = new_height</span></pre><p id="c1cc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">评论是由班级选择的。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="a174" class="mt la it nh b gy nl nm l nn no">comments = driver.find_elements_by_class_name('commentItem__read')</span></pre><p id="67bd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后从评论中提取文本和用户名，并分别存储在<em class="nq"> commentTextList </em>和<em class="nq"> commentUserList </em>中。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="13fd" class="mt la it nh b gy nl nm l nn no">for comment in comments:<br/>  commentText<br/>  comment.find_element_by_xpath('.//div[1]/div/span/p').text<br/>  commentUser =  comment.find_element_by_xpath('.//div[1]/span/a').text<br/>  commentTextList.append(commentText)<br/>  commentUserList.append(commentUser)</span></pre><p id="7473" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">commentTextList和commentUserList然后被转换成Pandas数据帧并导出到csv。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="02ea" class="mt la it nh b gy nl nm l nn no">df['User'] = commentUserList<br/>df['commentText'] = commentTextList</span><span id="694d" class="mt la it nh b gy np nm l nn no">df.to_csv('scrape.csv')</span></pre><h2 id="8356" class="mt la it bd lb mu mv dn lf mw mx dp lj ma my mz ll me na nb ln mi nc nd lp ne bi translated"><em class="nf">账户提取</em></h2><p id="7143" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">账户提取组件搜索抓取的评论以识别毒品卖家并提取他们的Instagram和Snapchat账户。这一管道概述如下。</p><p id="807a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，使用read_csv加载注释。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="bf0e" class="mt la it nh b gy nl nm l nn no">df = pd.read_csv("scrape.csv")</span></pre><p id="8d3f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了识别销售毒品的广告账户的评论，使用了关键词列表。所选的关键词通常出现在这些评论中。在这个领域之外也经常使用的关键字，如“芽”，被排除在外。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="4968" class="mt la it nh b gy nl nm l nn no">keywordList = ['carts', 'pills', 'shrooms', 'lsd', 'acid']</span></pre><p id="d447" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后在评论中搜索与关键词匹配的内容。如果找到匹配，该注释将被添加到列表<em class="nq"> foundComments中。</em></p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="8a88" class="mt la it nh b gy nl nm l nn no">for ind in df.index:<br/>  if any(ext in df['commentText'][ind] for ext in keywordList):<br/>  foundComments.append(df['commentText'][ind])</span></pre><p id="f0c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果评论包括snapchat或Instagram帐户，帐户名称几乎总是以snap、Snapchat、insta或instagram开头。为了捕捉这些不区分大小写的单词，注释被转换为小写。在某些情况下，评论中会使用表情符号。这些都是用Demoji库剥离出来的。然后，评论被转换成向量，一系列if语句被用来识别帐户在哪个平台上以及帐户名称是什么。如果找到一个账户，账户名称被添加到列表<em class="nq">用户名列表</em>，平台被添加到列表<em class="nq">平台列表</em>。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="19c9" class="mt la it nh b gy nl nm l nn no">for comment in foundComments:<br/>  cleanComment = demoji.replace(comment)<br/>  cleanComment = cleanComment.lower()<br/>  commentVector = cleanComment.split()<br/>  if 'insta' in commentVector:<br/>    next_word = commentVector[commentVector.index('insta') + 1]<br/>    usernameList.append(next_word)<br/>    platformList.append('instagram')<br/> if 'instagram' in commentVector:<br/>    next_word = commentVector[commentVector.index('instagram') + 1]<br/>    usernameList.append(next_word)<br/>    platformList.append('instagram')<br/> if 'snap' in commentVector:<br/>    next_word = commentVector[commentVector.index('snap') + 1]<br/>    usernameList.append(next_word)<br/>    platformList.append('snapchat')<br/> if 'snapchat' in commentVector:<br/>    next_word = commentVector[commentVector.index('snapchat') + 1]<br/>    usernameList.append(next_word)<br/>    platformList.append('snapchat')</span></pre><p id="089e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后创建一个新的pandas数据框架，并添加两个列表。然后将数据帧导出为csv文件。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="209c" class="mt la it nh b gy nl nm l nn no">df2 = pd.DataFrame()<br/>df2['username'] = usernameList<br/>df2['platform'] = platformList<br/>df2.to_csv('accounts.csv')</span></pre><h1 id="0b78" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">讨论</h1><p id="82fe" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">麻醉品销售从现场销售转向网上销售给执法部门带来了新的问题。这一框架可以帮助确定在线分销商，以便进一步调查，并改善这一领域的执法工作。</p><p id="fe9b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">虽然这种实现只抓取了Soundcloud上的顶级音轨，但该框架可以扩展到从多个页面收集评论，从而大大提高其效率。此外，这个框架可以适用于Soundcloud之外的其他平台。</p><p id="ef56" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">关键字词典也可以改进，以包括更多的术语和识别句子结构。提取Snapchat和Instagram用户名的算法也可以改进，以处理使用其他句子结构的评论。</p></div></div>    
</body>
</html>