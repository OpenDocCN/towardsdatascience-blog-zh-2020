<html>
<head>
<title>Systematically Pricing Financial Options With Black Scholes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Black Scholes对金融期权进行系统定价</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/systematically-pricing-financial-options-with-black-scholes-4998c591ccbd?source=collection_archive---------21-----------------------#2020-06-12">https://towardsdatascience.com/systematically-pricing-financial-options-with-black-scholes-4998c591ccbd?source=collection_archive---------21-----------------------#2020-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eff3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">疫情唯一没有破坏的模型？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fd44ad356a02366ec19b2cc6459dded6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ks5tQG-9Fj8o1RYv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@m_b_m?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> M. B. M. </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="c50f" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">欧式与美式期权</h2><p id="0a5f" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">金融市场上交易的普通金融期权有两种:美式期权——你可以在行权日之前的任何时候行使期权——以及欧式期权——你必须等到行权日才能行使期权。</p><p id="0642" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">“<em class="mt">美国</em>”和“<em class="mt">欧洲</em>”这两个名字实际上与期权的交易地点或公司的国籍无关。如果股票支付股息，并且行权日之前的时间包括除息日，那么这两种期权的估值将会有很大的不同——此时购买股票将不再授予你获得股息的权利。</p><p id="1e08" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">Black-Scholes假设了欧式期权，但它也可以用于不支付股息的美式期权。</p><h2 id="6567" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">布莱克·斯科尔斯公式</h2><p id="080f" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">获得诺贝尔奖的原始Black-Scholes公式指出，看涨期权的价格取决于股票现货价格S的函数的累积正态分布(此处用<em class="mt"> N、</em>表示)、以K值(等于执行价格)交易的无风险债券的现值、股票年化回报的波动率以及从今天到行权日的时间除以一个财政年度的天数(此处用t表示)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/3d63315205472b21db2115e5a7fad0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA9Przj2ncqg5shwn4iBJQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">布伦娜·托里诺</p></figure><p id="d767" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果你想知道更多关于公式推导的信息，<a class="ae ky" href="https://medium.com/cantors-paradise/the-black-scholes-formula-explained-9e05b7865d8a" rel="noopener">这里有一个非常好的资源。</a>在本文中，我将更多地关注公式的系统应用。</p><h2 id="7efe" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">数据</h2><p id="1a40" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">为了计算我们从期权中的潜在收益，我们需要一年(在本例中，2018年6月12日至2019年6月12日)股票价格的历史数据和期权当前交易价格水平的数据，以便我们可以比较我们的结果。</p><p id="eec9" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">历史数据可以从雅虎财经获取:进入<em class="mt">历史数据</em>下载一年的数据集。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/3f05e80d07bcf54f56a81a9fc091169b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2v3jyoqZcTX86roq95ezg.png"/></div></div></figure><p id="59e7" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">首先，我们需要计算输入布莱克-斯科尔斯模型的波动率。传统上，我们使用股票年回报率的波动率，计算如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b319" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">最后一行将检索股票行权日期为7月24日的看涨期权数据表。</p><h2 id="08e4" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Python中的Black-Scholes公式</h2><p id="a6ff" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">下面是本文开头描述的相同的Black Scholes公式，但是现在用一个名为black_scholes的Python函数表示。请注意，无风险债券的现值公式就是债券价格K除以(1 +无风险利率)的时间分数的幂<em class="mt"> T，</em>，我们使用Python函数cdf来计算变量d1和d2的累积分布函数值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="2705" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">布莱克-斯科尔斯算法</h2><p id="7472" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">计算出波动率(金融市场天数的平方根乘以年化回报的标准差)后，我们可以对我们目前拥有的所有执行价格进行估计。在特斯拉的案例中，我们有35种不同的看涨期权执行价格。</p><p id="2c10" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">对于每个执行价格，我们输入股票的现货价格(目前为972.84)，循环遍历数据框<em class="mt"> r，</em>中的执行价格，我使用的无风险利率是10年期美国国债收益率，目前为0.69%。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6d29" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">我们输出数据框<em class="mt"> df_estimate </em>，我们可以用它来计算Black Scholes模型的估计值与期权在市场上的实际交易价格有多接近:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div></figure><blockquote class="my"><p id="6cb0" class="mz na it bd nb nc nd ne nf ng nh mn dk translated">布莱克·斯科尔斯正确预测了期权的市场价值吗？</p></blockquote><div class="ni nj nk nl nm ab cb"><figure class="nn kn no np nq nr ns paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/c4c683250228838399d9e6bc81e78d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*i5ZQ6KmPdBJH5DH7HDAQ_A.png"/></div></figure><figure class="nn kn nt np nq nr ns paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/50e59e90b732b744441940c0312ffc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*A7xaZwU8Anear7oxIfU0jQ.png"/></div></figure></div><p id="f45a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">我们的平均估计误差为0.49%，标准差为2.46个百分点。我们的中位数更有希望达到0.29%左右。我们的标准差似乎仍然有点高，但仔细观察数据集，我们可以看到有几个合约今天根本没有交易，这扭曲了数据集，因为这些价格没有高度更新。</p><p id="29e1" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">如果我们只包括今天至少交易过一次的合约:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="fcdb" class="kz la it nv b gy nz oa l ob oc">df1 = df_estimate[(df_estimate.Volume != '-')]</span></pre><p id="c8c8" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">对于估计误差，我们实际上可以产生更好的结果:</p><div class="kj kk kl km gt ab cb"><figure class="nn kn od np nq nr ns paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/c6a795e2f632f61a486b676acdd46937.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*QIItWnEuvpKTSYm37qd9JA.png"/></div></figure><figure class="nn kn oe np nq nr ns paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/1cf25628ba29b8f704baf8120bffcc32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*SYtRoUyYqFFsMHb4RxVDGg.png"/></div></figure></div><p id="3643" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">这里，我们有一个-0.13%的平均估计误差，这意味着与我们的估计相比，期权价格平均低估期权0.13%，我们的标准差减少到只有1.8个百分点。</p><p id="a7ad" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">出于好奇，让我们分析一下布莱克·斯科尔斯误差超过1%的几份合同:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="9f41" class="kz la it nv b gy nz oa l ob oc">df1[df1['estimate_error'] &gt; 1]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/e5a1a1fdc351f2a9f93a2c7b0fa093b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Wuz7YFaOtYHv5jG6hcyuw.png"/></div></div></figure><p id="9bc8" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">大多数合约的交易量都很小，在股市交易日只交易一次。然而，4号合约具有1.4%的估计误差，具有21个合约和466个未平仓权益的高容量。执行价格在850，这意味着如果股票价格高于850+174.65 = 1021.65美元，它将获利，而目前股票交易价格为972.84美元。在大约31个股市交易日中，这只上涨了5.325%，这对特斯拉来说并不是一个困难的壮举。</p><p id="bf7a" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">我们的估计略低，但差异的一个原因可能是这些期权的<em class="mt">非常</em>大的价差，做市商以6%的无风险利润退出。这表明，目前7月24日特斯拉期权的风险要高得多，考虑到这些交易的低交易量和行权日期的临近，这是有道理的。</p><h2 id="6074" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">隐含波动率</h2><p id="a9a9" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">雅虎金融期权数据的一个重要壮举是，它向我们展示了期权价格的隐含波动率，这可以通过从期权交易价格开始反向求解波动率的布莱克-斯科尔斯方程来计算。对于这个分析，我没有使用隐含波动率作为输入，因为我想比较市场参与者如何对期权定价与布莱克-斯科尔斯模型的估计。</p><p id="171f" class="pw-post-body-paragraph lv lw it lx b ly mo ju ma mb mp jx md li mq mf mg lm mr mi mj lq ms ml mm mn im bi translated">隐含波动率是<em class="mt">前瞻性</em>，意思是它可以给我们一个感觉，交易者目前在期权中定价了多少未来波动率，<strong class="lx iu">T5，如果交易者是理性的 </strong>。当谈到隐含波动率时，最后一个假设很重要，因为其他因素，如行为经济学(由于这种信念，特斯拉是市场上最被做空的股票)，当前疫情期间的非理性避险情绪，以及其他外部因素，都可以在期权定价中发挥作用，但不一定反映股票的预期波动率。</p></div></div>    
</body>
</html>