<html>
<head>
<title>Mapping 2019–20 Australian bushfires</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">绘制 2019-20 澳大利亚森林火灾</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mapping-2019-20-australian-bushfires-4e6d9a0eed63?source=collection_archive---------34-----------------------#2020-04-28">https://towardsdatascience.com/mapping-2019-20-australian-bushfires-4e6d9a0eed63?source=collection_archive---------34-----------------------#2020-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0acc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个案例研究，展示了如何通过 5 个简单的步骤使用深度学习从卫星图像中监控火灾的日常进展</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/116eebd88963927d49516d722ad24ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZCSJOxE8-trjMom666E8Q.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">澳大利亚东海岸的丛林大火。图片来自<a class="ae kv" href="https://www.nasa.gov/image-feature/goddard/2019/bushfires-on-east-coast-of-australia-out-of-control" rel="noopener ugc nofollow" target="_blank"> NASA </a>。</p></figure><p id="451e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di">2019-20 澳大利亚森林大火的极端程度在 2020 年初成为世界各地的头条新闻。<a class="ae kv" href="https://doi.org/10.1029/2018GL080959" rel="noopener ugc nofollow" target="_blank">在气候变暖的情况下，像这样的极端事件预计会变得更加频繁。监控火灾的程度对于评估损失非常重要，对于从</a><a class="ae kv" href="https://doi.org/10.1111/j.1365-2699.2011.02595.x" rel="noopener ugc nofollow" target="_blank">森林管理</a>到<a class="ae kv" href="https://doi.org/10.1016/j.atmosenv.2008.09.047" rel="noopener ugc nofollow" target="_blank">火灾碳排放和空气污染</a>的广泛应用也是如此。分辨率高达每像素约 500 米的日常卫星图像有助于监测燃烧区域。然而，这并不是一项简单的任务，因为图像中经常出现云和烟雾。作为一个基于图像的问题，监测烧伤区域的日常进展是计算机视觉领域的一项非常适合的任务。</span></p><p id="d625" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个故事中，我展示了如何使用<a class="ae kv" href="https://medium.com/@mnpinto/mapping-burned-areas-from-space-with-artificial-intelligence-3657bdb97a9d" rel="noopener"> BA-Net 模型</a>(我是该模型的作者之一)来绘制澳大利亚的火灾地图，以及如何使用<a class="ae kv" href="https://github.com/mnpinto/banet" rel="noopener ugc nofollow" target="_blank">Github 资源库</a>中提供的开源代码和预先训练的模型作为名为<strong class="ky ir"> banet </strong>的 Python 包，在地球上的几乎任何地方做同样的事情。</p><p id="064e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您只对结果感兴趣，在 5 个步骤之后，您可以直接跳到“<strong class="ky ir">可视化结果</strong>”部分。</p><h2 id="2911" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">第一步。定义研究区域</h2><p id="ac96" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/mnpinto/banet/blob/master/banet/geo.py" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">banet . geo</strong></a><strong class="ky ir"/>中的<strong class="ky ir"> Region </strong>类应该如下使用，其中<strong class="ky ir"> bbox </strong>参数接收一个带有区域左、下、右、上边界的列表。<strong class="ky ir"> pixel_size </strong>应保持为 0.01(约 1 公里)，以接近这里将使用的卫星数据的分辨率。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5e9f" class="mb mc iq na b gy ne nf l ng nh">r <strong class="na ir">=</strong> Region(name<strong class="na ir">=</strong>'Australia', bbox<strong class="na ir">=</strong>[146, <strong class="na ir">-</strong>39, 154, <strong class="na ir">-</strong>26], pixel_size<strong class="na ir">=</strong>0.01)<br/>r<strong class="na ir">.</strong>export('data/regions/R_Australia.json')</span></pre><h2 id="ffd8" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated"><strong class="ak">步骤二。下载 VIIRS 现行火灾数据</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/accfed3398b73b01f897021d6545fe10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdk5Vj04T4zmtH4u02q3pg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">研究区域内活跃火灾的散点图。作者创造的形象。</p></figure><p id="7b09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">VIIRS Active Fires 是一种产品，提供对卫星通过期间活跃的火的辐射功率的近实时估计。这些<a class="ae kv" href="https://en.wikipedia.org/wiki/Polar_orbit" rel="noopener ugc nofollow" target="_blank">极地轨道卫星</a>一天两次观察地球上的大部分地点。数据可以从<a class="ae kv" href="https://firms.modaps.eosdis.nasa.gov/download/" rel="noopener ugc nofollow" target="_blank">页面</a>下载；在“创建新请求”之后；选择区域；选择“VI IRS S-NPP”；选择研究周期(或至少 15 天)前一个月开始和后一个月结束的时间范围。至于文件格式，应该是选择 CSV。提交请求后，应该会很快得到处理。然后可以下载数据并保存为“热点{name}”。csv”，使用步骤 1 中定义的“名称”。</p><p id="6e21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">绘制所有活动火灾事件的结果如上图所示，其中颜色代表从 2019 年 1 月 1 日开始计数的燃烧日。</p><h2 id="359e" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated"><strong class="ak">第三步。</strong>下载 VIIRS 图像数据</h2><p id="64b4" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">下面的 bash 代码利用 banet 命令行实用程序从<a class="ae kv" href="https://ladsweb.modaps.eosdis.nasa.gov/" rel="noopener ugc nofollow" target="_blank"> Nasa 地球数据</a>下载数据。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a27c" class="mb mc iq na b gy ne nf l ng nh">#!/bin/bash -l <br/>region<strong class="na ir">=</strong>"Australia"<br/>tstart<strong class="na ir">=</strong>"2019-08-01 00:00:00"<br/>tend<strong class="na ir">=</strong>"2020-02-17 23:59:59"<br/>path_save<strong class="na ir">=</strong>"/data/Australia/rawdata"<br/>regions_path<strong class="na ir">=</strong>"/data/regions"<br/><br/>banet_viirs750_download $region "$tstart" "$tend" $path_save $regions_path</span></pre><p id="7575" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要将<strong class="ky ir"> region </strong>变量设置为步骤 1 中定义的名称，并将<strong class="ky ir"> regions_path </strong>设置为保存 JSON 文件的相应目录。</p><h2 id="c4cc" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">第四步。数据预处理</h2><p id="4398" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">对于这一步，banet 包中提供了另一个实用函数。该程序包括读取步骤 3 中下载的原始数据(HDF 格式)，并保存每天的 mat 文件，包括:</p><ul class=""><li id="08c4" class="nj nk iq ky b kz la lc ld lf nl lj nm ln nn lr no np nq nr bi translated">红色、近红外(NIR)和中红外(MIR)反射率；</li><li id="342b" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">网格化活跃火灾数据。</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="c820" class="mb mc iq na b gy ne nf l ng nh">#!/bin/bash -l<br/>region<strong class="na ir">=</strong>"Australia"<br/>viirs_path<strong class="na ir">=</strong>"/data/Australia/rawdata"<br/>save_path<strong class="na ir">=</strong>"/data/Australia/dataset"<br/>fires_path<strong class="na ir">=</strong>"/data/ActiveFires"<br/>regions_path<strong class="na ir">=</strong>"/data/regions"<br/><br/>banet_create_dataset $region $viirs_path $fires_path $save_path $regions_path</span></pre><p id="a0bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意<strong class="ky ir"> fires_path </strong>应该设置为保存步骤 2 中获得的 CSV 文件的目录。</p><h2 id="ceb8" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">第五步。使用 BA-Net 生成烧毁区域地图</h2><p id="936c" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">同样，banet 包提供了一个实用的命令行函数来处理这个步骤。该过程包括加载 64 天的序列，并将大图像裁剪成 128×128 的图像块，将每个图像块输入到模型中，然后合并这些图像块以获得整个图像的结果。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a7aa" class="mb mc iq na b gy ne nf l ng nh">#!/bin/bash -l<br/>region<strong class="na ir">=</strong>"Australia"<br/>tstart<strong class="na ir">=</strong>"2019-08-01 00:00:00"<br/>tend<strong class="na ir">=</strong>"2020-02-17 23:59:59"<br/>input_path<strong class="na ir">=</strong>"/data/Australia/dataset"<br/>output_path<strong class="na ir">=</strong>"/data/Australia/output"<br/>regions_path<strong class="na ir">=</strong>"/data/regions"<br/><br/>banet_predict_times $region "$tstart" "$tend" $input_path $output_path $regions_path</span></pre><p id="4f36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意<strong class="ky ir">输入路径</strong>应该对应于步骤 4 的<strong class="ky ir">保存路径</strong>——数据集存储的目录。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="4242" class="oe mc iq bd md of og oh mg oi oj ok mj jw ol jx mm jz om ka mp kc on kd ms oo bi translated">可视化结果</h1><p id="7641" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">完成上述 5 个步骤后，结果将保存在<strong class="ky ir">输出路径</strong>中。下图显示了模型给出的置信水平(左)和燃烧日(右)。此后，仅考虑置信水平至少为 0.5 的像素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/5b55402533dbdf08f5b50f885bb0f00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXOcQuhPKwBD2zx4g81MNg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从 BA-Net 模型获得的置信水平图(左)和燃烧天数图(右)。作者创造的形象。</p></figure><p id="c0c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，燃烧日期的进展通常是平稳的，与其他现有产品形成对比，如本故事或 BA-Net 学术论文中所讨论的。燃烧日期的改进使得每日燃烧面积的表示更加准确，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/f98a26769ffb3c7c96daa2b1664ca801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8RLc4SJHn8lryEmDVkrjlw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">所有研究区域的每日燃烧面积。作者创造的形象。</p></figure><p id="6c3f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意 2019 年底和 2020 年初烧毁面积的极值——这是澳大利亚火灾成为全球头条新闻的时期。</p><p id="03d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">柱状图代表的总过火面积为<strong class="ky ir"> 6 688 147 ha </strong>。相比之下，维基百科中提到的新南威尔士州、维多利亚州和澳大利亚首都直辖区的总面积为 6 956 688 公顷。这些数字不能直接比较，因为这里我们包括了南昆士兰的小火灾，并且只考虑了维多利亚州的一部分。然而，这是一场势均力敌的比赛。</p><p id="e4ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个尺度上，可能会高估燃烧区域，因为燃烧区域内通常有较小的未燃烧区域。为了更好地识别这些区域，需要更高分辨率的图像，如 Sentinel-2 (10 米像素大小)。然而，这些图像每 5 天才有一次，无法绘制火灾的每日进展情况。</p><h2 id="ee86" class="mb mc iq bd md me mf dn mg mh mi dp mj lf mk ml mm lj mn mo mp ln mq mr ms mt bi translated">前进的道路</h2><p id="bbe1" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf mw lh li lj mx ll lm ln my lp lq lr ij bi translated">最近几年，遥感数据的深度学习应用开始蓬勃发展。我相信这种趋势在可预见的未来将会继续。我预计在接下来的几年里，火烧区测绘将会是一个有重大进展的课题。从几颗卫星上不断检索的时空数据量之大使得这个问题具有挑战性。由 GPU 和 TPUs 驱动的深度学习为大量有待探索的新可能性开辟了道路。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="5257" class="oe mc iq bd md of og oh mg oi oj ok mj jw ol jx mm jz om ka mp kc on kd ms oo bi translated">关于我</h1><div class="or os gp gr ot ou"><a rel="noopener follow" target="_blank" href="/my-3-year-journey-from-zero-python-to-deep-learning-competition-master-6605c188eec7"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd ir gy z fp oz fr fs pa fu fw ip bi translated">我的 3 年历程:从零 Python 到深度学习竞赛高手</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">自从 2017 年开始学习 Python 以来，我一直遵循的道路是成为一名独自参加 Kaggle 比赛的大师…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">towardsdatascience.com</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi kp ou"/></div></div></a></div><p id="7658" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="pj">感谢阅读！祝您愉快！</em></p></div></div>    
</body>
</html>