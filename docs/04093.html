<html>
<head>
<title>People’s Opinion of Australia’s Prime Minister</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人们对澳大利亚总理的看法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/peoples-opinion-on-australian-prime-minister-c8c48cdd827f?source=collection_archive---------44-----------------------#2020-04-14">https://towardsdatascience.com/peoples-opinion-on-australian-prime-minister-c8c48cdd827f?source=collection_archive---------44-----------------------#2020-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8510" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Twitter数据进行情感分析</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/61e2f0779e237eee68fd7d8346b3890b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MEx-k9yKGCcKnYd2GxTZjA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这张照片是我在访问堪培拉时拍的</p></figure><blockquote class="kv"><p id="5f11" class="kw kx iq bd ky kz la lb lc ld le lf dk translated">"斯科特·莫里森的假期不是问题，他对森林大火缺乏领导才是问题所在！"</p><p id="7d42" class="kw kx iq bd ky kz lg lh li lj lk lf dk translated">凯瑟琳·墨菲</p><p id="bfb6" class="kw kx iq bd ky kz lg lh li lj lk lf dk translated">“澳大利亚对冠状病毒感到恐惧和困惑。在这个严峻的时刻，斯科特·莫里森是我们需要的领袖吗？?"</p><p id="5f2b" class="kw kx iq bd ky kz lg lh li lj lk lf dk translated">理查德·弗拉纳根</p></blockquote><p id="d779" class="pw-post-body-paragraph ll lm iq ln b lo lp jr lq lr ls ju lt lu lv lw lx ly lz ma mb mc md me mf lf ij bi translated">斯科特·莫里森(ScoMo)是澳大利亚第30任总理，也是自2018年以来的自由党领袖。我不支持任何政党，但是，在我呆在澳大利亚期间，我从来没有听到过关于我们总理的一句好话，我确信大多数人不喜欢他。</p><p id="9f15" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我很想知道大多数人对ScoMo的看法。但是在哪里可以找到这样的信息呢？我们可以利用一个资源来获取数据。现在是<strong class="ln ir"> <em class="ml">推特</em>T3。</strong></p><p id="cf0c" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir"> Twitter </strong>是一个微博客系统，允许你发送和接收被称为tweets的简短帖子。推文可以长达140个字符，可以包括相关网站和资源的链接。这是一个社交媒体平台，每天有1 . 45亿活跃用户和5亿条推文。</p><p id="5d2a" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">现在我们知道在哪里可以找到数据。但是，</p><ul class=""><li id="4ecd" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated"><strong class="ln ir">如何从twitter中提取数据？</strong></li><li id="0bf3" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated"><strong class="ln ir">如何根据这些数据检查人们的意见？</strong></li></ul><p id="a70f" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">这就是我这篇文章<em class="ml">要讨论的内容。</em></p><p id="4f8c" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">首先我们需要对<strong class="ln ir"> <em class="ml">情感分析</em> </strong>有一个基本的概念。</p><h2 id="d764" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">什么是情感分析？</h2><blockquote class="kv"><p id="f0eb" class="kw kx iq bd ky kz lg lh li lj lk lf dk translated">本质上，它是确定一系列词语背后的情感基调的过程，用于理解在线提及中表达的态度、观点和情绪。</p></blockquote><p id="cd71" class="pw-post-body-paragraph ll lm iq ln b lo lp jr lq lr ls ju lt lu lv lw lx ly lz ma mb mc md me mf lf ij bi translated"><strong class="ln ir">好！等够了。让我们深入研究代码，</strong></p><p id="146a" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">点击<a class="ae nt" href="https://github.com/hasitha-ranasinghe/twitter-data-analysis-scottmorrison" rel="noopener ugc nofollow" target="_blank">这里</a>查看我在GitHub上的完整项目。</p></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><h1 id="c37c" class="ob nb iq bd nc oc od oe nf of og oh ni jw oi jx nl jz oj ka no kc ok kd nr ol bi translated">1.提取数据</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/ef4c210fe7b159b80031a7c6a6ec6c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-i5F6TIQuEEr99ZV4UNHgg.png"/></div></div></figure><p id="b0fd" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">要提取twitter数据，您需要有一个Twitter API。我将向您展示如何创建一个。</p><ul class=""><li id="441d" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated">申请<a class="ae nt" href="https://developer.twitter.com/en/docs/basics/developer-portal/overview" rel="noopener ugc nofollow" target="_blank"> Twitter开发者账户</a>并获得批准。</li><li id="2c61" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">创建一个<a class="ae nt" href="https://developer.twitter.com/en/docs/basics/apps/overview" rel="noopener ugc nofollow" target="_blank"> Twitter开发者应用</a></li><li id="6b9f" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">生成您的应用程序的<a class="ae nt" href="https://developer.twitter.com/en/docs/basics/apps/guides/the-app-management-dashboard" rel="noopener ugc nofollow" target="_blank"> API密钥和用户访问令牌。</a></li></ul><p id="1002" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">有三种类型的搜索API，这里我们使用的是<strong class="ln ir">标准搜索API。</strong></p><h2 id="ce45" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">让我们看看如何在代码中使用它</h2><p id="d4d7" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated"><strong class="ln ir">导入库</strong></p><ul class=""><li id="0aa6" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated">tweepy——使用Twitter APIs。这是这个库的文档。</li><li id="cf65" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">CSV-操作CSV(逗号分隔值)文件。</li></ul><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="1143" class="na nb iq ot b gy ox oy l oz pa">import tweepy as tw<br/>import csv</span></pre><p id="7645" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">设置API密钥和访问令牌</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="d729" class="na nb iq ot b gy ox oy l oz pa">consumer_key = "xxxxxxxxxxxxx" <br/>consumer_secret = "xxxxxxxxxxxxxx"<br/>access_token = "xxxxxxxxxxxxx"<br/>access_token_secret = "xxxxxxxxxxxxxx"</span></pre><p id="e76c" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">创建到Twitter API的连接</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="f5c2" class="na nb iq ot b gy ox oy l oz pa">auth = tw.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(access_token, access_token_secret)<br/>api = tw.API(auth,wait_on_rate_limit=True)</span></pre><p id="680d" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">创建并打开一个CSV文件以追加数据</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="a4bd" class="na nb iq ot b gy ox oy l oz pa">file = 'data/raw/scomo.csv'</span><span id="08b8" class="na nb iq ot b gy pb oy l oz pa">csvFile = open(file, 'w+', newline="",encoding="utf-8")</span><span id="4521" class="na nb iq ot b gy pb oy l oz pa">csvWriter = csv.writer(csvFile)</span><span id="1e76" class="na nb iq ot b gy pb oy l oz pa">csvWriter.writerow(["user_id","tweet_created_time","tweet_text","tweet_length","user_created_at","user_followers_count","user_friends_count", "twitter_source","tweet_likes","tweet_retweets"])</span></pre><p id="b121" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><em class="ml">文件头包括我决定从一条推文中提取的十个特征。</em></p><p id="4db9" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">提取数据并附加到CSV文件</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="4fcc" class="na nb iq ot b gy ox oy l oz pa">tweets = tw.Cursor(api.search,q=search_string,count=200, lang="en",since=date_since)</span><span id="8900" class="na nb iq ot b gy pb oy l oz pa">for tweet in tweets.items():<br/>    <br/>    csvWriter.writerow([tweet.id_str, <br/>                        tweet.created_at, <br/>                        tweet.text.encode("utf-8"),<br/>                        len(tweet.text),<br/>                        tweet.author.created_at, <br/>                        tweet.author.followers_count,<br/>                        tweet.author.friends_count,<br/>                        tweet.source,<br/>                        tweet.favorite_count,<br/>                        tweet.retweet_count<br/>                       ])</span></pre><p id="a07c" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">这里是<a class="ae nt" href="https://github.com/hasitha-ranasinghe/twitter-data-analysis-covid19/blob/master/src/data/raw/extracted_data.csv" rel="noopener ugc nofollow" target="_blank"> extracted_data.csv </a>文件。</p><p id="3595" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我在2014年1月20日和2014年9月20日之间收集了43554条推文。我用了所有的推文进行分析。Twitter标准API只允许我们回溯十天。如果tweet的数量与关键字高度相关，我们将能够收集更多的tweet。</p><h1 id="b2c8" class="ob nb iq bd nc oc pc oe nf of pd oh ni jw pe jx nl jz pf ka no kc pg kd nr ol bi translated">2.预处理数据</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/dc12666da6e6ea85caa1e4d49a740735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCoz0Ak3NgxkqpYEVea6gg.png"/></div></div></figure><p id="c6ab" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">当我们处理数据时，这一步至关重要。提取的数据以原始格式存在，这对于分析是不可行的。这就是为什么我们需要清理数据，然后转换成一个干净的数据集。这里我使用以下两个库来完成任务。</p><p id="d3bf" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><a class="ae nt" href="https://pypi.org/project/tweet-preprocessor/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ir">预处理器</strong> </a> —预处理器是用Python编写的tweet数据的预处理库。这个库使得清理、解析或标记tweets变得容易。</p><p id="aa70" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><a class="ae nt" href="https://docs.python.org/3/library/re.html#" rel="noopener ugc nofollow" target="_blank"> <strong class="ln ir"> re </strong> </a> — re是Python的正则表达式(RegEx)库，它负责解析字符串并有效地修改它们，而不必显式地遍历组成特定字符串的字符。</p><p id="5255" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">导入库</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="e878" class="na nb iq ot b gy ox oy l oz pa">#python libraries<br/>import pandas as pd     <br/>import numpy as np</span><span id="45be" class="na nb iq ot b gy pb oy l oz pa">#Regular expression and clean data<br/>import preprocessor as p<br/>import re</span><span id="9bd4" class="na nb iq ot b gy pb oy l oz pa">#processing textual data<br/>from textblob import TextBlob<br/>from textblob import Word</span><span id="0866" class="na nb iq ot b gy pb oy l oz pa">#nltk library for stopwords<br/>import nltk<br/>from nltk.corpus import stopwords</span></pre><p id="6f17" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">让我们将提取的数据从extracted_data.csv读取到Panda数据帧中。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="d002" class="na nb iq ot b gy ox oy l oz pa">raw_data = pd.read_csv('data/raw/scomo.csv', usecols=['tweet_text'])</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pi"><img src="../Images/a82e6f577690edf6b8bd134d61a413b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pRDTLvs1q_TQKrUcNFmwg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据集的前20行</p></figure><p id="6040" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">让我们继续数据清理过程。</p><h2 id="d804" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">1.删除网址，提及，标签，保留字，表情符号，笑脸和数字</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="dbbf" class="na nb iq ot b gy ox oy l oz pa">raw_data['tweet_text'] = np.array([ p.clean(tweet) for tweet in raw_data['tweet_text'] ])</span></pre><p id="bf04" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">预处理程序库中的clean()函数</strong>删除一条推文中的URL、标签、提及、保留字(RT、FAV)、表情符号、表情符号和数字。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/940f5bb87211c14906d9e613de6116af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xtNsIlT6rtxUsTnFuVGZPA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">执行clean()函数后的数据</p></figure><h2 id="0e19" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">2.删除标点符号</h2><p id="2d89" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">标点符号在分析时没有帮助。最好从文本中删除它们，就像我们使用clean()函数删除它们一样。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="fd72" class="na nb iq ot b gy ox oy l oz pa">raw_data['tweet_text'] = np.array([ re.sub(r'(@[A-Za-z0-9]+)|([^0)-9A-Za-z \t])|(\w+:\/\/\S+)', "", tweet) for tweet in raw_data['tweet_text'] ])</span></pre><h2 id="d7d0" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.删除第一个字母“b”</h2><p id="4207" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">正如你在下面看到的，我们可以在每一行前面找到字母‘b’，它没有任何用处。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/0ad634070a882bfd1ae388b41b9e367e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*G0Iarq4A8-ONYezagGNpkA.jpeg"/></div></figure><p id="abde" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我们可以通过调用下面的代码行来删除它们。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="5f43" class="na nb iq ot b gy ox oy l oz pa">raw_data['tweet_text'] = np.array([ tweet[1:] for tweet in raw_data['tweet_text'] ])</span></pre><h2 id="8939" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">4.小写字母盘</h2><p id="84f8" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">将所有字母转换成小写，使它们更精确。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="0960" class="na nb iq ot b gy ox oy l oz pa">raw_data['tweet_text'] = raw_data['tweet_text'].apply(lambda x: " ".join(x.lower() for x in x.split()))</span></pre><h2 id="8f46" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.删除停用词</h2><p id="8841" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">停用词是英语中常用的词(如“the”、“a”、“an”、“in”)。它们不会给上下文增加价值。我们不希望这些单词占用我们的数据库空间，或者占用宝贵的处理时间。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="fa28" class="na nb iq ot b gy ox oy l oz pa">stop_words = stopwords.words('english')</span><span id="c785" class="na nb iq ot b gy pb oy l oz pa">raw_data['tweet_text'] = raw_data['tweet_text'].apply(lambda x: " ".join(x for x in x.split() if x not in stop_words))</span></pre><h2 id="6edf" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">6.生僻字去除</h2><p id="00de" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">有时，您需要删除独特的单词，如名称、品牌、产品名称和一些干扰字符，如HTML省略符号。这被认为是一个罕见的词删除。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="492f" class="na nb iq ot b gy ox oy l oz pa">freq = pd.Series(' '.join(raw_data['tweet_text']).split()).value_counts()[-1000:]<br/>freq = list(freq.index)<br/>raw_data['tweet_text'].apply(lambda x: " ".join(x for x in x.split() if x not in freq))</span></pre><h2 id="bfbf" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">7.词汇化</h2><p id="7c63" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">词汇化是一个寻求分析一个词的预期意义而不是它的基本形式的过程。</p><p id="bb89" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">例如；</p><ul class=""><li id="455a" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated">这个男孩的汽车是不同的颜色。</li><li id="23b4" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">男孩可以是不同的颜色。</li></ul><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="e61b" class="na nb iq ot b gy ox oy l oz pa">raw_data['tweet_text'] = raw_data['tweet_text'].apply(lambda x: " ".join([Word(word).lemmatize() for word in x.split()]))</span></pre><p id="ea64" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">清理数据后，推文如下… </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pl"><img src="../Images/c19f63b3dfc3b29dabd0b0800ae0ac6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*42w18YqTIiNEWhwTe1A6tw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">干净的文本</p></figure><h2 id="7c02" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">将tweet length、like和retweets列连接到最终数据集</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="ea3f" class="na nb iq ot b gy ox oy l oz pa">data = pd.read_csv('data/raw/scomo.csv', usecols=['tweet_length','tweet_likes','tweet_retweets'])</span><span id="30b4" class="na nb iq ot b gy pb oy l oz pa">processed_df = pd.concat([raw_data, data], axis=1)</span></pre><h2 id="e34e" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">将处理后的数据帧作为新的CSV文件写入</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="1178" class="na nb iq ot b gy ox oy l oz pa">processed_df.to_csv('data/processed/processed_data.csv',index=False)</span></pre><h1 id="f83e" class="ob nb iq bd nc oc pc oe nf of pd oh ni jw pe jx nl jz pf ka no kc pg kd nr ol bi translated">3.分析并可视化结果</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pm"><img src="../Images/40a8f0d998b8f08affef3bd22c32f91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7kbMfsYI653AaxFJbMwcg.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae nt" href="https://unsplash.com/@kmuza?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>在<a class="ae nt" href="https://unsplash.com/s/photos/analysis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="2cf0" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">这里我们已经到了工作的最后部分。</p><p id="a995" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我已经设法以比原始版本更有意义的方式清理了推文文本，这将有助于识别文本的情绪。</p><h2 id="3176" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">如何进行情感分析</h2><p id="8e2b" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated"><strong class="ln ir">我们使用</strong><a class="ae nt" href="https://textblob.readthedocs.io/en/dev/index.html" rel="noopener ugc nofollow" target="_blank"><strong class="ln ir">text blob</strong></a><strong class="ln ir">库</strong></p><p id="40f8" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><em class="ml"> TextBlob是一个用于处理文本数据的Python (2和3)库。它提供了一个简单的API，用于处理常见的自然语言处理(NLP)任务，如词性标注、名词短语提取、情感分析、分类、翻译等。</em></p><p id="bed6" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">导入库</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="e262" class="na nb iq ot b gy ox oy l oz pa">import pandas as pd     <br/>import numpy as np</span><span id="f012" class="na nb iq ot b gy pb oy l oz pa">#sentiment analysis<br/>from textblob import TextBlob<br/>from textblob import Blobber<br/>from textblob.sentiments import NaiveBayesAnalyzer</span><span id="63e2" class="na nb iq ot b gy pb oy l oz pa">#for visualizations<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>%matplotlib inline</span></pre><p id="6dd8" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">将processed_data.csv读入数据帧</strong></p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="c248" class="na nb iq ot b gy ox oy l oz pa">data = pd.read_csv('data/processed/processed_data.csv')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/7b1555afc9dbb354bb302c524ceab9e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C7scpHNjuD7sib60KZd6Hg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于分析的已清理数据集</p></figure><h2 id="c6cc" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">找到极性和主观性</h2><p id="a3c1" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated"><strong class="ln ir">极性</strong>，又称倾向性，是句子中表达的情感。它可以是积极的、消极的或中性的。主观性是指文本是一篇必须在上下文中分析的信息性文章。</p><p id="9d1b" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">极性是一个位于[-1，1]范围内的浮点数，其中1表示肯定陈述，而-1表示否定陈述。主观句一般指个人观点、情感或判断，而客观句指事实信息。主观性也是一个位于[0，1]范围内的浮点数。</p><p id="9334" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">textblob的<em class="ml">情感</em>函数返回两个属性，<strong class="ln ir">极性，</strong>和<strong class="ln ir">主观性</strong>。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="f558" class="na nb iq ot b gy ox oy l oz pa">data['polarity'] = np.array([ TextBlob(str(tweet)).sentiment.polarity for tweet in data['tweet_text']])</span><span id="7b51" class="na nb iq ot b gy pb oy l oz pa">data['subjectivity'] = np.array([ TextBlob(str(tweet)).sentiment.subjectivity for tweet in data['tweet_text']])</span></pre><p id="9b10" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">计算的极性和主观性被添加到数据集中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/732d899dc00ec94ef2c2cba94acdac93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFRDUst2M-cuoaqNHJE9Sg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">具有极性和主观性的数据集</p></figure><h1 id="72d1" class="ob nb iq bd nc oc pc oe nf of pd oh ni jw pe jx nl jz pf ka no kc pg kd nr ol bi translated">让我们看看一些统计和图形可视化的分析</h1><h2 id="3ab0" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">1.生成数据帧的统计数据</h2><p id="6771" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">让我们看看数据帧的数值的百分位数、平均值和标准差等统计数据是什么。我们可以用<em class="ml">描述熊猫的</em>功能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/39e86de81a12457e576c106896523ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*jBTDGGIY1NXXHW66yk352g.png"/></div></figure><h2 id="7134" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">2.创建并可视化相关矩阵</h2><p id="e4aa" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">相关矩阵是显示变量之间相关系数的表格。表中的每个单元格显示了两个变量之间的相关性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/d5942e001e53d9c5ad224ab75a9c9d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*xTdOldJi0L1bX8tCcl4U1Q.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">相关矩阵</p></figure><p id="5226" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我们将创建一个<strong class="ln ir">热图</strong>来可视化这种关联。热图是以二维形式表示数据的一种方式。数据值在图表中用颜色表示。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="1c2e" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(10,6))<br/>sns.heatmap(data.corr(), annot=True)<br/>plt.title('data correlations')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/7453d8ca856f6b8eee0036ecb7e84b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*z4JgNjBpLzUKQB7bVssZOQ.png"/></div></figure><p id="0ed1" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">根据热图，</p><ul class=""><li id="de2a" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated"><strong class="ln ir">推文点赞</strong>和<strong class="ln ir">转发</strong>显示<strong class="ln ir">最高相关度</strong></li><li id="b87a" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated"><strong class="ln ir">极性</strong>和<strong class="ln ir">情绪</strong>显示<strong class="ln ir">第二高的相关性</strong></li></ul><h2 id="dda2" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.极性、主观性和微博长度的分布</h2><p id="2b75" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">我们将分别为两个字段创建一个<strong class="ln ir"> <em class="ml"> distplot </em> </strong>图，以查看数据集中的值是如何分布的。</p><h2 id="c058" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.1极性分布</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="0987" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(10,4))<br/>plt.title('Distribution of polarity')<br/>sns.distplot(data['polarity'].dropna(), kde=False, bins=40)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/6d6f5fc13b9f64817d64ae4b69396370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*-EhgS9Tvr6ppzOGwMfr5ng.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">极性分布</p></figure><h2 id="48bc" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.2主观性分布</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="acac" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(10,4))<br/>plt.title('Subjectivity of polarity')<br/>sns.distplot(data['subjectivity'].dropna(), kde=False, bins=40)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/cee43de943e60fb290b7dccd01b94275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*_80h0Kzrv-jN6tyetQrKpg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">主观性分布</p></figure><h2 id="b4a0" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.3推文长度分布</h2><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="97e6" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(10,4))<br/>plt.title('Distribution of tweet length')<br/>sns.distplot(data['tweet_length'].dropna(), kde=False, bins=40)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/e1f4428097402be96aed6f35094e9778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*RwRG_cDTBkVutPhv-ZydLA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">推文长度分布</p></figure><h2 id="281e" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">3.4极性和主观性的组合分布</h2><p id="40f9" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">我们可以创建一个<strong class="ln ir"> <em class="ml"> jointplot </em> </strong>图来显示两个变量之间的关系。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="4e45" class="na nb iq ot b gy ox oy l oz pa">sns.jointplot(x='polarity',y='subjectivity',data=data,kind='scatter')</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/745edd227cf3a4b45c843616acb79dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*C6p7ZKQvm9lnU69Ih5YCLQ.png"/></div></figure><h2 id="28dd" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">4.决定情绪</h2><p id="19d7" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">正如我上面提到的，我们可以通过使用极性值来发现情绪。如果，</p><ul class=""><li id="7ceb" class="mm mn iq ln b lo mg lr mh lu mo ly mp mc mq lf mr ms mt mu bi translated">极性&lt; 0: negative sentiment</li><li id="d7c8" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">polarity = 0: neutral sentiment</li><li id="3768" class="mm mn iq ln b lo mv lr mw lu mx ly my mc mz lf mr ms mt mu bi translated">polarity &gt; 0:积极情绪</li></ul><p id="0133" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">让我们创建一个函数来计算情绪。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="1fc6" class="na nb iq ot b gy ox oy l oz pa">def select_sentiment(value):<br/>    <br/>    if value&gt;0:<br/>        return 1<br/>    elif value==0:<br/>        return 0<br/>    else:<br/>        return -1</span></pre><p id="fb9a" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">产生情感价值。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="bcba" class="na nb iq ot b gy ox oy l oz pa">data['sentiment'] = np.array([select_sentiment(p) for p in data['polarity']])</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pv"><img src="../Images/8027105804e445de3f2f9645087234cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edahRT-kkRzSg7vx2z-Fmg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">带有情感值的数据集</p></figure><h2 id="7b15" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.想象这种情绪</h2><h2 id="2846" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.1每个类别中出现的次数</h2><p id="4b28" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">我们可以使用<strong class="ln ir"> <em class="ml">计数图</em> </strong>来显示使用条形的每个分类箱中的观察计数。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="5b16" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(6,4))<br/>plt.title('Number of occurence of each category')<br/>sns.countplot(x='sentiment',data=data,)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/d7968b67ec0f44ff6d5f955c9597d850.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*u08aF8ekLJ5HUXvPU0iP0A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">情绪的计数图</p></figure><p id="38ef" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">根据图表，出现次数最多的是在<strong class="ln ir">空档</strong>类别。</p><h2 id="2e2c" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.2基于情感的推文长度</h2><p id="154b" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">我们可以使用<strong class="ln ir"> <em class="ml">条形图</em> </strong>来显示数据中分类特征的聚合数据。我们可以观察一条推文的长度在每个类别中的指向。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="c502" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(6,4))<br/>plt.title('Tweet length based on sentiment')<br/>sns.barplot(x='sentiment',y='tweet_length',data=data)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi px"><img src="../Images/41b4ed3d82fd82b4a2fa2a8b6ab1e5ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*YnRtI5WV_GMaaAE2Ck61CQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">基于情感的推文长度柱状图</p></figure><h2 id="799d" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.3基于情感的推文长度分布</h2><p id="dbac" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">我们可以用一个<strong class="ln ir"> <em class="ml">箱线图</em> </strong>来显示分类数据的分布。该框显示数据集的四分位数，而触须延伸以显示分布的其余部分。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="54a4" class="na nb iq ot b gy ox oy l oz pa">plt.figure(figsize=(10,7))<br/>plt.title('Distribution of tweet length based on sentiment')<br/>sns.boxplot(x="sentiment", y="tweet_length", data=data)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi py"><img src="../Images/35a1b1f1b738e0fc92a50c7e5aeb7225.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*B1MdnZCAj06Wu367X-DSIg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">基于情感的推文长度分布箱线图</p></figure><h2 id="8b08" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">5.3基于情感类别的百分比</h2><p id="937a" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">使用以下代码计算每个情感类别的百分比。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="2305" class="na nb iq ot b gy ox oy l oz pa">pos_tweets= [ tweet for index, tweet in enumerate(data['sentiment']) if data['sentiment'][index] == 1]<br/>nue_tweets= [ tweet for index, tweet in enumerate(data['sentiment']) if data['sentiment'][index] == 0]<br/>neg_tweets= [ tweet for index, tweet in enumerate(data['sentiment']) if data['sentiment'][index] == -1]</span><span id="2c0a" class="na nb iq ot b gy pb oy l oz pa">pos_percentage = len(pos_tweets)*100/len(data)<br/>nue_percentage = len(nue_tweets)*100/len(data)<br/>neg_percentage = len(neg_tweets)*100/len(data)</span></pre><p id="2189" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">根据这些值绘制一个饼图。</p><pre class="kg kh ki kj gt os ot ou ov aw ow bi"><span id="f104" class="na nb iq ot b gy ox oy l oz pa">fig = plt.figure()<br/>percentage = pd.Series([pos_percentage,nue_percentage,neg_percentage], <br/>                      index=['positive','nuetral','negative'], <br/>                      name='Sentiment analysis')<br/>percentage.plot.pie(fontsize=9, autopct='%.2f%%', figsize=(8,8));<br/>plt.figure()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/b78d64671a31877b38a1ae742b34adef.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*PqLR-6tgN8iAh8uIyTpLaQ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">情感类别饼图</p></figure><h2 id="025c" class="na nb iq bd nc nd ne dn nf ng nh dp ni lu nj nk nl ly nm nn no mc np nq nr ns bi translated">6.决赛成绩</h2><p id="4ae8" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">分析的结果如下。调查显示，50.19%的人对ScoMo持中立态度(无论是负面还是正面)，32.36%的人持正面态度，17.45%的人持负面态度。</p><h1 id="3f96" class="ob nb iq bd nc oc pc oe nf of pd oh ni jw pe jx nl jz pf ka no kc pg kd nr ol bi translated">结论</h1><p id="2941" class="pw-post-body-paragraph ll lm iq ln b lo on jr lq lr oo ju lt lu op lw lx ly oq ma mb mc or me mf lf ij bi translated">根据分析，更多的人(50%)对ScoMo持中立态度。如果我们能够收集更长时间的数据，而不是十天，这个结果是可以改变的。此外，世界当前局势和最近发生的事件等事实会影响推文的行为。</p></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="97de" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated"><strong class="ln ir">进一步扩展</strong></p><p id="b583" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">我只用了推文的文字。诸如日期/时间、地理位置等其他属性可用于进一步分析。此外，我们可以观察哪些是经常使用的单词，并寻找模式和训练模型以供将来使用。</p><p id="d0ab" class="pw-post-body-paragraph ll lm iq ln b lo mg jr lq lr mh ju lt lu mi lw lx ly mj ma mb mc mk me mf lf ij bi translated">感谢您的阅读！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qa"><img src="../Images/058867dd7f0c603335701d6ec1db5a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CG8ZpjLSeb5apZBs"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae nt" href="https://unsplash.com/@rizmooney?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Riz Mooney </a>在<a class="ae nt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div></div>    
</body>
</html>