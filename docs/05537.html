<html>
<head>
<title>Create ML: Deploy the model to an iOS App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建 ML:将模型部署到 iOS 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-ml-deploy-the-model-to-an-ios-app-f52e5b62ab09?source=collection_archive---------47-----------------------#2020-05-09">https://towardsdatascience.com/create-ml-deploy-the-model-to-an-ios-app-f52e5b62ab09?source=collection_archive---------47-----------------------#2020-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4012" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们创建一个简单的狗与猫的 iOS 应用程序！</h2></div><p id="4490" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几天前，我在 Create ML 部分发表了两篇文章中的第一篇，那篇讨论了收集数据和模型训练的过程。今天我们将会有更多的乐趣，因为在文章的最后，你将会在你的 iPhone 上拥有一个能够对狗和猫进行分类的应用程序(或者模拟器)!</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/f1451ec0db08ea9715e061da90555968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*191pvO3UgiLwiKDK"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">安东尼·乔伦在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b3b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="lv">作者注:</em> </strong> <em class="lv">我不是 iOS 开发者，这篇文章大概不会演示最干净的解决方案。然而，它仍然完美地工作着，我发现它值得与我的读者们分享。</em></p><p id="615f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你错过了第一篇文章，你可以在这里找到它:</p><div class="lw lx gp gr ly lz"><a rel="noopener follow" target="_blank" href="/create-ml-a-gui-for-training-neural-networks-72bd1d651275"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">创建 ML:一个用于训练神经网络的 GUI</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">让我们用 3 行代码创建一个狗和猫的分类器。</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">towardsdatascience.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn lo lz"/></div></div></a></div><p id="2eeb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，您不必完全阅读它，因为模型文件可以在官方的<a class="ae lu" href="https://github.com/daradecic/iOS_CNN_CatVsDog" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中获得。尽管如此，我还是强烈建议你这么做，因为你会发现现在训练图像分类器是多么容易。</p><p id="2215" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">跟随的<strong class="kk iu">前提</strong>依然苛刻:</p><ol class=""><li id="2f7f" class="mo mp it kk b kl km ko kp kr mq kv mr kz ms ld mt mu mv mw bi translated">你需要一台苹果电脑(或者使用 MacInCloud.com)</li><li id="a695" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">最新版本的 Xcode 是必须的</li><li id="153a" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">你应该对 iOS 开发有所了解(目录结构，如何运行应用…)</li></ol><p id="5347" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你没有 iPhone，这很酷，因为这款应用可以在模拟器上运行。在开始编写代码之前，让我们快速浏览一下这个应用程序的最终版本,这样可以让你更有动力:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="afaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章的结构如下:</p><ol class=""><li id="3b5d" class="mo mp it kk b kl km ko kp kr mq kv mr kz ms ld mt mu mv mw bi translated">iOS 项目创建</li><li id="33a3" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">布局</li><li id="e80e" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">代码</li><li id="6a7b" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">让我们运行它</li><li id="38ac" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">结论</li></ol><p id="37f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，事不宜迟，我们开始吧！</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="46c3" class="nl nm it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">iOS 项目创建</h1><p id="df81" class="pw-post-body-paragraph ki kj it kk b kl od ju kn ko oe jx kq kr of kt ku kv og kx ky kz oh lb lc ld im bi translated">启动 Xcode 并选择<strong class="kk iu">创建新的 Xcode 项目</strong>。在那里，选择<strong class="kk iu">单视图应用</strong>:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oi"><img src="../Images/a528d55a207af5bde9d64a6708fb0088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9ayntKEOLvDwdW3etVoSA.png"/></div></div></figure><p id="4dd1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将打开一个新窗口。在这里，您可以指定应用程序的名称——这样做，并将其他所有内容保留为默认值。点击<strong class="kk iu">下一个</strong>:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oi"><img src="../Images/76a24e15965c62868523de7230b88d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_XUeFtrbUZAO1Eu38smSAQ.png"/></div></div></figure><p id="861c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一步是将应用程序存储在某个地方—您决定最佳位置:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oj"><img src="../Images/6f3eee33ede7a6ec82cd138f0776aafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVPIjQBHVPDvC6W3AgoebQ.png"/></div></div></figure><p id="a97d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在将创建项目。这里我们需要做的最后一步是将我们的模型包含到应用程序中。为此，只需拖动<strong class="kk iu">。mlmodel </strong>文件到项目文件:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/e523a65c4d6953e53bf4ac54e54b5e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*B_LvXJRfkCa2VImsWzitBw.png"/></div></figure><p id="802b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一节就讲到这里。在下一个中，我们将为应用程序创建<strong class="kk iu">布局</strong>。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="19f0" class="nl nm it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">布局</h1><p id="b9b5" class="pw-post-body-paragraph ki kj it kk b kl od ju kn ko oe jx kq kr of kt ku kv og kx ky kz oh lb lc ld im bi translated">布局非常简单——我们将在<strong class="kk iu"> Main.storyboard </strong>文件中设计它。我的决定是将视图包装在<strong class="kk iu">导航控制器</strong>中，这样我们就可以在导航栏中设置摄像头按钮。</p><p id="05eb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有，导航栏有个标题——<strong class="kk iu">狗还是猫？</strong></p><p id="d91e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，在内容部分，我们有一个基本的<strong class="kk iu"> UIImageView </strong>来显示一个图像，在它下面，我们有一个<strong class="kk iu">文本视图</strong>来显示预测的类。您看不到它，因为默认情况下它是空白的，一旦我们选择一个图像，它就会被填充。</p><p id="1f23" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是你最后应该有的截图:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ol"><img src="../Images/719e19f8183e4fc20e5725741359e249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJUNMrdHvrD23eX7zW4QZQ.png"/></div></div></figure><p id="b0e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有一些开发 iOS 应用的经验，像这样构造简单的 UI 不是问题。我决定不一步一步地展示这个过程，因为这篇文章很快就会变得很乱。非常欢迎你克隆<a class="ae lu" href="https://github.com/daradecic/iOS_CNN_CatVsDog" rel="noopener ugc nofollow" target="_blank">官方回购</a>，卡壳了可以借鉴。</p><p id="06f5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好的，如果你现在已经跟上了，你应该已经完成了布局部分。在下一节中，我们将开始编写一些<strong class="kk iu">代码</strong>以及<strong class="kk iu">管理权限</strong>。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="da9d" class="nl nm it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">代码</h1><p id="86e6" class="pw-post-body-paragraph ki kj it kk b kl od ju kn ko oe jx kq kr of kt ku kv og kx ky kz oh lb lc ld im bi translated">在编写任何 Swift 代码之前，我们需要获得用户的照片库许可——转到<strong class="kk iu"> Info.plist </strong>并添加如下:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi om"><img src="../Images/f5fedbff987ff443056bf44cd7ba5895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S3gR8NMw7JYP_KB5FBiSWA.png"/></div></div></figure><p id="023f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就这样，现在用户可以允许我们访问他/她的图像。我们现在准备写一些 Swift 代码！</p><p id="9df9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我绝不是 Swift 方面的专家，恰恰相反，我认为自己是一个绝对的初学者，但我发现这段代码工作得非常完美。也许它并没有考虑到最佳实践，但是它将适合我们的需要。</p><p id="550c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我们需要执行的步骤(嗯，主要步骤):</p><ol class=""><li id="b7a7" class="mo mp it kk b kl km ko kp kr mq kv mr kz ms ld mt mu mv mw bi translated">导入库</li><li id="9b90" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">为我们的视图声明变量</li><li id="8a82" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">按下相机按钮时显示图像拾取器</li><li id="354b" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">处理图像拾取器</li><li id="789b" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">为图像分类声明一个函数</li><li id="586e" class="mo mp it kk b kl mx ko my kr mz kv na kz nb ld mt mu mv mw bi translated">图像拾取控制器的链接检测功能</li></ol><p id="c1d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">整个代码必须写在<strong class="kk iu"> ViewController.swift </strong>文件中。您可以在下面的要点中找到代码，其中的步骤被写成了注释:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="on nd l"/></div></figure><p id="927e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是关于代码的大部分内容！在下一部分，我们将运行这个应用程序(但我猜你已经知道它是如何执行的——如果你看过<a class="ae lu" href="https://www.youtube.com/watch?v=eEGleqTldTs" rel="noopener ugc nofollow" target="_blank">视频演示</a>)。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="5234" class="nl nm it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">让我们运行它</h1><p id="cc2e" class="pw-post-body-paragraph ki kj it kk b kl od ju kn ko oe jx kq kr of kt ku kv og kx ky kz oh lb lc ld im bi translated">现在，我们实际上可以选择在哪个设备上运行应用程序。如果您没有 iPhone，您可以从下拉菜单中选择任何模拟器:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oo"><img src="../Images/8ff114639709fd8e3ee9e1d7392caa74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qzHGPgV_MU2_DLsAZJl6hw.png"/></div></div></figure><p id="3e2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按下<strong class="kk iu">启动</strong>按钮，编译运行需要一分钟左右的时间。在模拟器上，我上网下载了一些免版税的猫狗图片。</p><p id="a42c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦你这样做了，打开应用程序来测试它。以下是从我的设备获得的分类:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi op"><img src="../Images/9ede696f6f295fc157ddfff7a9472696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ar0ECG-gm2k08YBgXa9vKQ.jpeg"/></div></div></figure><p id="fc6b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，我们确实有很多未使用的空白，设计也不完美——但这是一篇数据科学相关的文章，而不是 UI 设计相关的文章。不管怎样，今天就到这里，让我们在下一节快速总结一下。</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="2b26" class="nl nm it bd nn no np nq nr ns nt nu nv jz nw ka nx kc ny kd nz kf oa kg ob oc bi translated">结论</h1><p id="fea5" class="pw-post-body-paragraph ki kj it kk b kl od ju kn ko oe jx kq kr of kt ku kv og kx ky kz oh lb lc ld im bi translated"><em class="lv">我是 iOS 开发者吗？最肯定不是。<em class="lv">在设计和代码质量方面有改进的空间吗？</em>绝对可以。</em></p><p id="4cb4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，作为数据科学家，我们没有义务在 UI 设计方面表现出色。我的意思是，你拥有这些技能很好，但这不是强制性的。</p><p id="3ce4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章和之前的 Create ML 文章背后的唯一目标是增加趣味，让你(和我)走出舒适区。编写算法代码并花费数周时间是一回事，但如果你只知道如何使用它，那又有什么意义呢？<strong class="kk iu">如果没有好的方法来展示你的作品，那还有什么意义呢？</strong></p><p id="83b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">花点时间想一想。它不必是一个移动应用程序，因为一个简单的网络应用程序与上传组件将只是这个项目的罚款。</p><p id="9fbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p><p id="e934" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="lv"> P.S. </em> </strong> <em class="lv">如果模型对你的一些图片分类错误，请告诉我，因为我测试过的每一张图片都被正确分类了。</em></p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="99ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lv">喜欢这篇文章吗？成为</em> <a class="ae lu" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lv">中等会员</em> </a> <em class="lv">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="lw lx gp gr ly lz"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">medium.com</p></div></div><div class="mi l"><div class="oq l mk ml mm mi mn lo lz"/></div></div></a></div></div></div>    
</body>
</html>