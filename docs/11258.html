<html>
<head>
<title>How to Track Coronavirus Spreading using Real Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用真实数据追踪冠状病毒的传播</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-track-coronavirus-spreading-using-real-data-dba64211b483?source=collection_archive---------51-----------------------#2020-08-04">https://towardsdatascience.com/how-to-track-coronavirus-spreading-using-real-data-dba64211b483?source=collection_archive---------51-----------------------#2020-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="acf4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Plotly 实现时间轴数据可视化的分步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/389a342d3c44f2ea6d504e03e39e4c38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9bIWRjbwodl2pWLfzNVSg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">马丁·桑切斯在<a class="ae ky" href="https://unsplash.com/s/photos/virus-map?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="6812" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">在这篇文章中，我将向你展示如何使用冠状病毒病例数据创建一个交互式地图。随着数字开始再次上升，我想创建一个全球世界地图，看看如何继续蔓延到世界各地。我在 Kaggle 上发现了大量的全球病例数据，我将在下面添加数据链接。如果你没有听说过 Kaggle，Kaggle 是世界上最大的数据科学社区，拥有强大的工具和资源来帮助你实现数据科学目标。</span></p><p id="6c43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可视化在表示数据方面起着重要的作用。创建可视化有助于以更容易理解的形式呈现您的分析。尤其是在处理大型数据集时，很容易迷失方向，这时我们就可以看到数据可视化的威力了。我们开始吧！</p><h2 id="e50b" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">目录:</h2><ul class=""><li id="e955" class="mx my it lb b lc mz lf na li nb lm nc lq nd lu ne nf ng nh bi translated">Plotly</li><li id="0db6" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">理解数据</li><li id="6e2e" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">数据预处理</li><li id="4eff" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">数据可视化</li><li id="5faa" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">交互式地图视频</li></ul></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="b973" class="nu mf it bd mg nv nw nx mj ny nz oa mm jz ob ka mp kc oc kd ms kf od kg mv oe bi translated">Plotly</h1><p id="2f22" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">Plotly 是一个 Python 图形库，可以制作交互式的、出版物质量的图形。如何制作折线图、散点图、面积图、条形图、误差线、箱线图、直方图、热图、支线图、多轴图、极坐标图和气泡图的示例。它也是一个开源库。</p><p id="729f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">了解更多关于 Plotly 的信息:<a class="ae ky" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> Plotly 图形库</a></p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="4948" class="nu mf it bd mg nv nw nx mj ny nz oa mm jz ob ka mp kc oc kd ms kf od kg mv oe bi translated">理解数据</h1><p id="597e" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">该数据集具有关于 2019 年新型冠状病毒的受影响病例数、死亡数和恢复数的每日水平信息。请注意，这是一个时间序列数据，因此任何一天的病例数都是累计数。</p><p id="ac33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确诊病例数据可以从<a class="ae ky" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset/metadata" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这里下载</strong> </a>。</p><p id="813c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据文件夹包含 8 个数据集文件，但我们将要处理的主文件夹名为“<em class="oi"> covid_19_data.csv </em>”，数据集描述如下:</p><ul class=""><li id="c517" class="mx my it lb b lc ld lf lg li oj lm ok lq ol lu ne nf ng nh bi translated"><strong class="lb iu">序列号</strong> —序列号</li><li id="09f3" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">观察日期</strong> —观察的日期，单位为年/月/日</li><li id="2c8d" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">省/州</strong> —观察的省或州(缺少时可以为空)</li><li id="a03f" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">国家/地区</strong> —观察国</li><li id="c374" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu"> Last Update </strong> —以 UTC 表示的给定省份或国家更新行的时间。(未标准化，因此请在使用前清洁)</li><li id="2fa8" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">确诊</strong> —当日累计确诊病例数</li><li id="0ec3" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">死亡人数</strong> —截止到该日期的累计死亡人数</li><li id="1159" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><strong class="lb iu">已恢复</strong> —到该日期为止已恢复案例的累计数量</li></ul><p id="42df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个项目，这是建立一个交互式地图，我们将重点放在国家和确认列。我们将在数据预处理步骤中进行过滤。让我们导入数据并研究它。</p><h2 id="3d20" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">图书馆</h2><p id="f007" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">我们需要三个主要的库来开始。当我们谈到可视化时，我会要求您导入更多的子库，也称为库组件。现在，我们将导入以下库:</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="7da1" class="me mf it on b gy or os l ot ou">import numpy as np<br/>import pandas as pd<br/>import plotly as py</span></pre><p id="adae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您没有这些库，也不用担心。安装它们非常容易，只需在您的终端窗口中写下下面一行:</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="ac7e" class="me mf it on b gy or os l ot ou">pip install numpy pandas plotly</span></pre><h2 id="87cd" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">读出数据</h2><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="1f22" class="me mf it on b gy or os l ot ou">df = pd.read_csv("data/corona/covid_19_data.csv")</span><span id="d3ed" class="me mf it on b gy ov os l ot ou">df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/7055edd0676d9f70c9b56f78077218c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nbh8jSwqPeuqQ00v.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">头</p></figure><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="d9ea" class="me mf it on b gy or os l ot ou">df.tail()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/36e56a7d40411d37e83850a4d5f9ef14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OAyxUA6HEGvetSuY.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尾巴</p></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="9adb" class="nu mf it bd mg nv nw nx mj ny nz oa mm jz ob ka mp kc oc kd ms kf od kg mv oe bi translated">数据预处理</h1><p id="2d57" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">数据科学更多的是理解数据，数据清洗是这个过程中非常重要的一部分。什么让数据更有价值，取决于我们能从中获得多少。做好数据准备会让你的数据分析结果更加准确。</p><p id="ee0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先重命名这两列:ObservationDate 和 Country/Region。我们将使用一个名为“重命名”的熊猫方法。</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="3888" class="me mf it on b gy or os l ot ou"># Rename columns<br/>df = df.rename(columns={'Country/Region':'Country'})<br/>df = df.rename(columns={'ObservationDate':'Date'})</span><span id="477c" class="me mf it on b gy ov os l ot ou">df.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/441b0c335bdebca7757373c3d85bb01f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VYD65CNglXgI4KG8.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">头</p></figure><p id="2b54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！列名被更新。我们没有重命名其他列，因为我们不会在可视化中使用它们。现在，是时候进行数据过滤了。对于这一步，我们将使用几种方法。其中两个是 Pandas 方法:groupby 和 drop_duplicates。第三次过滤将使用比较运算符。</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="8b99" class="me mf it on b gy or os l ot ou"># Manipulate Dataframe<br/>df_countries = df.groupby(['Country', 'Date']).sum().reset_index().sort_values('Date', ascending=False)</span><span id="a443" class="me mf it on b gy ov os l ot ou"># Drop Duplicates<br/>df_countries = df_countries.drop_duplicates(subset = ['Country'])</span><span id="d7a3" class="me mf it on b gy ov os l ot ou"># Filter by Confirmed number<br/>df_countries = df_countries[df_countries['Confirmed']&gt;0]</span></pre><ul class=""><li id="5314" class="mx my it lb b lc ld lf lg li oj lm ok lq ol lu ne nf ng nh bi translated">在第一行中，我们按照国家和日期列进行分组。sum 函数帮助我们对确诊病例进行求和。然后我们按照日期值对它们进行排序。</li><li id="f9af" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在第二行，我们删除了重复的国家值(如果有的话)。否则，当我们处于数据可视化步骤时，它可能会导致问题。</li><li id="ba10" class="mx my it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">在第三行，我们正在筛选确诊病例。我们正在获取确认值大于零的行。</li></ul><p id="6065" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完美！现在，让我们看看我们的数据框架。顺便说一下，我们的新数据框架叫做“df_countries”，我们在下面定义了它。在接下来的步骤中，我们将继续使用新的数据帧。</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="785c" class="me mf it on b gy or os l ot ou">df_countries.head(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/a195006a1e71923e67f798b6a76e2cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/0*9-FkIKo-gs22N7wC.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">头</p></figure><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="e620" class="me mf it on b gy or os l ot ou">df_countries.tail(10)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/d02eca9f2078f089ce7430132c6e8ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/0*Xp3wQ3L6uuAj8PfJ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">尾巴</p></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="cc61" class="nu mf it bd mg nv nw nx mj ny nz oa mm jz ob ka mp kc oc kd ms kf od kg mv oe bi translated">数据可视化</h1><p id="6872" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li of lk ll lm og lo lp lq oh ls lt lu im bi translated">干得好！你已经到达它，直到这里的最后和有趣的部分。我们将添加一些 Plotly 的组件来制作那些很酷的交互式地图情节。然后，我们将创建我们的交互式地图地块。</p><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="c378" class="me mf it on b gy or os l ot ou">import plotly.express as px</span><span id="90f2" class="me mf it on b gy ov os l ot ou">import plotly.graph_objs as go</span><span id="79d4" class="me mf it on b gy ov os l ot ou">from plotly.subplots import make_subplots</span><span id="ce0f" class="me mf it on b gy ov os l ot ou">from plotly.offline import download_plotlyjs, init_notebook_mode, plot, iplot</span></pre><p id="17e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">两张互动地图</strong>:第一张将显示截至 8 月 1 日的确诊病例。第二张图将显示自今年 1 月 22 日以来确诊病例的增加。</p><h2 id="1356" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">最新确诊病例数</h2><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="6a53" class="me mf it on b gy or os l ot ou"># Create the Choropleth<br/>fig = go.Figure(data=go.Choropleth(<br/> locations = df_countries['Country'],<br/> locationmode = 'country names',<br/> z = df_countries['Confirmed'],<br/> colorscale = 'Reds',<br/> marker_line_color = 'black',<br/> marker_line_width = 0.5,<br/>))</span><span id="4e93" class="me mf it on b gy ov os l ot ou">fig.update_layout(<br/> title_text = 'Confirmed Cases as of August 1, 2020',<br/> title_x = 0.5,<br/> geo=dict(<br/> showframe = False,<br/> showcoastlines = False,<br/> projection_type = 'equirectangular'<br/> )<br/>)</span><span id="808a" class="me mf it on b gy ov os l ot ou">fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/9793ffd8607cb036fd0b67fd2b679e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1lwySJrT2DQ1A4Iw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">结果</p></figure><h2 id="eddf" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">冠状病毒的全球传播</h2><pre class="kj kk kl km gt om on oo op aw oq bi"><span id="f35d" class="me mf it on b gy or os l ot ou"># Manipulating the original dataframe<br/>df_countrydate = df[df['Confirmed']&gt;0]<br/>df_countrydate = df_countrydate.groupby(['Date','Country']).sum().reset_index()<br/></span><span id="3053" class="me mf it on b gy ov os l ot ou"># Creating the visualization<br/>fig = px.choropleth(df_countrydate, <br/> locations="Country", <br/> locationmode = "country names",<br/> color="Confirmed", <br/> hover_name="Country", <br/> animation_frame="Date"<br/> )</span><span id="52fd" class="me mf it on b gy ov os l ot ou">fig.update_layout(<br/> title_text = 'Global Spread of Coronavirus',<br/> title_x = 0.5,<br/> geo=dict(<br/> showframe = False,<br/> showcoastlines = False,<br/> ))<br/> <br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/2d5447209b97828ed1d3e826afcf36cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OxwGdesf-2Kv6KTt"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">结果</p></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="86c2" class="nu mf it bd mg nv nw nx mj ny nz oa mm jz ob ka mp kc oc kd ms kf od kg mv oe bi translated">冠状病毒视频的全球传播</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="05f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你阅读这篇文章，我希望你喜欢并且今天学到了一些新的东西。如果您在执行代码时有任何问题，请随时通过我的博客联系我。我非常乐意帮忙。你可以找到更多我发表的与 Python 和机器学习相关的帖子。保持安全和快乐的编码！</p><p id="330c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oi">我是贝希克·居文，我喜欢分享关于创造力、编程、动力和生活的故事。</em></p><p id="f0ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oi">跟随</em> <a class="ae ky" href="https://medium.com/@lifexplorer" rel="noopener"> <em class="oi">我的博客</em> </a> <em class="oi">和</em> <a class="ae ky" href="https://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="oi">走向数据科学</em> </a> <em class="oi">以待启发。</em></p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h2 id="9373" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">更多内容</h2><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/python-for-finance-the-complete-beginners-guide-764276d74cef"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd iu gy z fp pn fr fs po fu fw is bi translated">面向金融的 Python 完全初学者指南</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">使用亚马逊股票数据的简单实践</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw ks pi"/></div></div></a></div><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/simple-face-detection-in-python-1fcda0ea648e"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd iu gy z fp pn fr fs po fu fw is bi translated">Python 中的简单人脸检测</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">如何使用 OpenCV 库检测图像中的人脸</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="px l pt pu pv pr pw ks pi"/></div></div></a></div></div></div>    
</body>
</html>