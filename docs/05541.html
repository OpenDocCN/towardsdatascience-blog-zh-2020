<html>
<head>
<title>Beautify Coronavirus Bar Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">美化冠状病毒条形图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beautify-coronavirus-bar-charts-ac636d314d98?source=collection_archive---------51-----------------------#2020-05-09">https://towardsdatascience.com/beautify-coronavirus-bar-charts-ac636d314d98?source=collection_archive---------51-----------------------#2020-05-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ec9f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">超越Matplotlib基础的5个步骤</h2></div><p id="c79f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当你刚接触<em class="le"> matplotlib </em>的时候，<em class="le"> plt.show() </em>的结果并不是特别令人印象深刻。当然，它对传达信息很有用，但它不是那种可以放在文件夹里或向朋友炫耀的图表。</p><p id="724d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">五个关键调整可以将基本图形转换为漂亮的图形。美丽在这里并不意味着无关紧要。当谈到图形数据时，漂亮包括正确的背景、方向、大小、颜色和标签，以提供一个有吸引力的、清晰的和信息丰富的图形。</p><p id="e8b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们加载冠状病毒数据，准备用于绘图的数据，使用<em class="le"> matplotlib </em>绘制基本条形图，并使用5个键调整将绘图转换为漂亮的图形。本文假设读者对<em class="le">熊猫有基本的了解。</em></p><h2 id="2635" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">加载冠状病毒数据</h2><p id="84ca" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">首先，我们需要一些数据。以下代码将约翰·霍普斯金冠状病毒Github数据集分配给变量<em class="le"> url </em>。该文件是一个CSV文件，并且在靠近末尾处提供了日期。该日期可由用户更新以获得最新的冠状病毒信息。数据集每天更新。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="e7ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，导入<em class="le">熊猫</em>，然后使用<em class="le"> pd.read_csv </em>和<em class="le"> df.head() </em>读取并显示数据帧。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/5a6c329c93580ade5e54c2fd9b5feaf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l86uHGSPij1Hvki83-cFiA.png"/></div></div></figure><p id="4bc4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从最后一栏可以看出，数据是按城市和国家提供的。该数据集包括所有国家。要仅绘制来自国家/地区的数据，我们可以通过列<em class="le">‘国家/地区’</em>进行<em class="le">分组。我们选择<em class="le">‘sum’</em>聚合来获得除纬度和经度之外的所有数字列的精确计数。</em></p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="8a18" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们只选择提供关于冠状病毒的数字信息的列，即<em class="le">、</em>、<em class="le">、【死亡】、</em>、<em class="le">、【恢复】、</em>和<em class="le">、【活动】、</em>。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="b6f2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在开始制图。</p><h2 id="abab" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">准备用于打印的数据</h2><p id="6425" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">用<em class="le"> matplotlib </em>很容易生成一个图。在条形图的情况下，您只需要x值，即您想要比较的类别，以及y值，即比较的列。我们将比较每个国家的恢复病例数。</p><p id="b069" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个包含数百个类别的条形图是不可行的。在冠状病毒数据的情况下，类别是国家，由列为我们的<em class="le">组之后的索引。我们将只选择前10个国家。</em></p><p id="d621" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，使用<em class="le"> sort_values </em>方法，通过选取10个最高回收数量的国家来分割数据框架。结果可以存储在新的数据帧中，如下:<em class="le">df _ Recovered = df . sort _ values(by =‘Recovered’，ascending=False)[:10] </em>。</p><p id="b1b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，使用索引上的<em class="le"> to_series </em>方法将索引转换为序列。这种转换的原因是在绘图时使用列是标准的，实际上是<em class="le">熊猫系列</em>。这些指数，通常是你在T4分组之后想要的类别，必须被转换。以下代码将索引国家转换为序列:<em class="le">x _ vals = df _ recovered . index . to _ series()</em>。</p><p id="90a5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还设置了<em class="le">y _ vals = df _ recovered[' Recovered ']</em>来选择“Recovered”列作为我们的y值。</p><p id="a650" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是分割数据帧并设置x和y值的步骤。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="8905" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">使用Matplotlib的基本条形图</h2><p id="1075" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">条形图是许多<em class="le"> matplotlib </em>图中的一种。导入<em class="le"> matplotlib，</em>之后，您决定想要绘制的绘图类型，在我们的例子中是条形图，然后您插入x和y值，后面跟着<em class="le"> plt.show() </em>，如下所示。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/e447f9e1d45a738e68512601cf7ed94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*HmwDr71CVWo707siFnawGg.png"/></div></figure><p id="b3af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我电脑上的图表。它捕捉到了关键信息，但是国家名称连在一起，太小了，不美观。</p><p id="8e8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们使用相同的信息和5个关键的调整来创建一个美丽的条形图。</p><h2 id="ab8e" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调整一:进口海博</h2><p id="8f62" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">seaborn是matplotlib的一个很好的补充。我一直使用<em class="le"> seaborn </em>，因为我更喜欢带有网格线的灰色背景，我发现<em class="le"> seaborn </em>中的许多图形选项，如线性回归，更容易使用，更美观，并提供更多信息。</p><p id="ee2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的代码将<em class="le"> seaborn </em>和<em class="le"> matplotlib </em>一起导入，并将背景设置为漂亮的深色网格。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="f72f" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调整2:水平前进</h2><p id="239d" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">我们已经有了数据集，<em class="le"> df_recovered </em>。上面给出的x值和y值的信息可能保持不变，只有一个例外:将它们转换为水平条形图。</p><p id="64be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">水平条形图更容易阅读，因为x轴上的间距不再杂乱。当订购垂直堆叠时，水平条形图也提供了很好的美感。</p><p id="cd13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是切换x和y的代码。注意，在条形图函数中设置参数<em class="le"> orient='h' </em>也可能有效。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="ecf8" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调整3:改变体形大小</h2><p id="a96e" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">这是一个大的。我不确定为什么默认的<em class="le"> matplotlib </em>图这么小。增加尺寸总是一个好主意。你可以看到更多的细节，图形不那么拥挤，它们占据了更多的屏幕空间。</p><p id="eb52" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用<em class="le"> plt </em>上的<em class="le">fig</em>的方法，然后在括号内设置<em class="le"> figsize </em>的尺寸。注意尺寸是(水平，垂直)。这里有一个大尺寸的作品。根据自己的喜好调整数字。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="1f0c" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调整4:使用调色板</h2><p id="a956" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">漂亮的颜色真的让图表很突出。当使用一种颜色时，考虑将透明度包含在<em class="le"> alpha </em>参数中。对于条形图，调色板是理想的。调色板甚至可以颠倒，这样最深的颜色就在最上面，这取决于你想讲的故事。</p><p id="61b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">值得尝试用你的颜色讲一个故事。由于从冠状病毒中恢复是一件好事，绿色可以用作积极的颜色，恢复最多的国家显示在顶部，作为最暗的绿色阴影。将最深的颜色放在最上面通常需要将'<em class="le">_ r【T3]'字符串连接到调色板的末尾来颠倒顺序。</em></p><p id="b757" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">找到所有调色板选项的一个有趣的方法是在代码中插入一个调色板错误！正确的选项会显示在Colab笔记本中。或者，标准调色板可以在<a class="ae ms" href="https://python-graph-gallery.com/101-make-a-color-palette-with-seaborn/" rel="noopener ugc nofollow" target="_blank">的Python图库</a>中找到。我更喜欢错误的方法，因为我可以留在我的笔记本上，它告诉我一切。</p><p id="67a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">调色板可在<em class="le"> sns.barplot </em>内设置，连同x值和y值如下。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="a292" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调整5:使用有尺寸的标签</h2><p id="f2ac" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">不言而喻，应该为图使用标签并确定其大小。所有的图表都应该有标题，标题的大小可以增加，直到你喜欢为止。</p><p id="0d93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<em class="le"> seaborn </em>的情况下，x轴和y轴默认使用index和columns提供的标签，这里就不加了。</p><p id="bfd9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是给你的图加标题和调整标题大小的代码。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="1298" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">把所有的放在一起</h2><p id="37c4" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">剩下的就是保存剧情，展示出来。保存您的绘图总是值得的，因为在您的计算机上的输出会比在Jupyter或Colab笔记本上，甚至在使用第三方软件的Medium等网站上看起来好得多。一个简单的策略是将dpi(每英寸点数)设置为一个较大的数字，比如300。</p><p id="7bfb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里是所有的代码一起创建和显示一个美丽的冠状病毒水平条形图。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mt"><img src="../Images/5f645160fa529f7df84d74cbec975fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_nYGViemovnhzLC5snZyaw.png"/></div></div></figure><p id="d8a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，通过5个关键调整，新图表值得与朋友分享或放入你的作品集。这个图表很简单，但是信息丰富而且很漂亮。它在我的电脑上更清晰，在你的电脑上也会如此。</p><p id="9f7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你已经学会了5个关键的调整，使你的条形图美观，享受这个数据集和其他创建和显示新的信息列的乐趣。</p><p id="2806" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编码快乐！</p><p id="4692" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">科里·韦德(Corey Wade)是伯克利编码学院</em> <a class="ae ms" href="http://berkeleycodingacademy.com" rel="noopener ugc nofollow" target="_blank"> <em class="le">的主任</em> </a> <em class="le">，</em> <a class="ae ms" href="https://www.amazon.com/Python-Workshop-Interactive-Approach-Learning-ebook/dp/B0816C5R6Y" rel="noopener ugc nofollow" target="_blank"> <em class="le"> Python工作坊</em> </a> <em class="le">的作者，伯克利独立研究数学系主任。2020年夏天，他正在为青少年在线举办一个机器学习&amp; AI夏令营。更多信息参见</em><a class="ae ms" href="http://berkeleycodingacademy.com" rel="noopener ugc nofollow" target="_blank"><em class="le">berkeleycodingacademy.com</em></a><em class="le">。</em></p></div></div>    
</body>
</html>