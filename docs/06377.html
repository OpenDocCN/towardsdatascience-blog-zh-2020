<html>
<head>
<title>Extracting Features From Covid’s News: A Simple Bag-of-Words Approach for Time-Series Text Data Modelling | Covid-19 Article 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Covid的新闻中提取特征:时间序列文本数据建模的简单词袋方法|新冠肺炎文章2</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extracting-features-from-covids-news-a-simple-bag-of-words-approach-for-time-series-text-data-bffe59de76a1?source=collection_archive---------52-----------------------#2020-05-21">https://towardsdatascience.com/extracting-features-from-covids-news-a-simple-bag-of-words-approach-for-time-series-text-data-bffe59de76a1?source=collection_archive---------52-----------------------#2020-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7388" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/covid-19-text-analysis" rel="noopener" target="_blank">新冠肺炎文字分析</a></h2><div class=""/><p id="f3d0" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd"> <em class="kx">编者注:</em> </strong> <em class="kx"> </em> <a class="ae ky" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="kx">走向数据科学</em> </a> <em class="kx">是一份以研究数据科学和机器学习为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae ky" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="kx">这里</em> </a> <em class="kx">。</em></p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="09e2" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi lg translated">这是我之前博客的续篇，在那里我探索了出现在印度媒体与新冠肺炎相关的新闻文章中的词汇。在本文中，我对文本进行了进一步的探索，并尝试使用词袋(BoW)方法在从文本中提取的特征之间建立显著的相关性。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="4507" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">关于数据源:</h1><ul class=""><li id="f822" class="mn mo it kb b kc mp kg mq kk mr ko ms ks mt kw mu mv mw mx bi translated"><strong class="kb jd">新闻文章数据:</strong>新闻文章是用<a class="ae ky" href="https://newsapi.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb jd"> NewsAPI的</strong> </a> <strong class="kb jd">开发者计划刮出来的。</strong>日期范围为<strong class="kb jd">2020年3月10日至4月10日</strong>对于本文<strong class="kb jd"> </strong>，数据集每月增长。</li><li id="e72e" class="mn mo it kb b kc my kg mz kk na ko nb ks nc kw mu mv mw mx bi translated"><strong class="kb jd"> Covid病例数据:</strong> <a class="ae ky" href="https://en.wikipedia.org/wiki/COVID-19_pandemic_in_India" rel="noopener ugc nofollow" target="_blank">维基百科关于新冠肺炎·疫情在印度的文章</a></li></ul><h1 id="e4b7" class="lp lq it bd lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi nh mk ml mm bi translated">关于资料准备和基础探索:</h1><p id="d74d" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">在我之前的博客中记录了这个关于新冠肺炎数据的系列。它使用传统的记号化、词条化和清理过程，使用<a class="ae ky" href="http://www.nltk.org/" rel="noopener ugc nofollow" target="_blank"> nltk </a>和<a class="ae ky" href="https://nlp.stanford.edu/" rel="noopener ugc nofollow" target="_blank"> Stanford CoreNLP </a>。</p><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/exploring-news-about-covid-19-in-indian-media-nlp-wordcloud-covid-19-article-1-2bcbb127dfb3"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">探索印度媒体中关于新冠肺炎的新闻| NLP| Wordcloud |新冠肺炎文章1</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">新冠肺炎改变了全球流行语。在本文中，我研究了我的印度新闻文章数据集，内容是关于…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc od no"/></div></div></a></div></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="b897" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">背景:我到底想在这里实现什么？</h1><p id="8ddf" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">这也是对所产生的时间序列数据的试验性研究，该数据仅由30个数据点组成。我的目标是提取诸如每日新闻量、与医疗保健、新冠肺炎和中央政府相关的每日令牌量等特征，并评估它们与Covid病例计数之间是否存在任何强相关性。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="2292" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">入门:</strong></h1><h2 id="cde2" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">1.设置时间序列数据集:</h2><p id="3722" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">我从维基百科的excel文件中提取了covid病例和死亡人数数据，并将其读入我的Jupyter笔记本。接下来，从我以前的博客中创建的数据集，我通过分组和统计每天发布的新闻数量来提取新闻量，并将它们合并。</p><p id="451c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">代码:</strong></p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="e60d" class="oe lq it ou b gy oy oz l pa pb"><strong class="ou jd">import</strong> pandas <strong class="ou jd">as</strong> pd</span><span id="2ce0" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Read the data in</strong><br/>df_covid_stats = pd.read_excel('covid_stats.xlsx')<br/>df = pd.read_pickle(text_data_pickle_file_path)</span><span id="1f20" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Group daily and count news volume</strong><br/>df_news_vol=df[['published_at','title']].groupby(by='published_at')<br/>                                        .count().reset_index()<br/>df_news_vol.columns = ['published_at', 'News Volume']</span><span id="08a3" class="oe lq it ou b gy pc oz l pa pb"># Merge Covid-19 stats with news volume data<br/>df_merged = pd.merge(df_news_vol, df_covid_stats,<br/>                     left_on='published_at', right_on='Date')<br/>df_merged.head(5)</span></pre><p id="8ea7" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">合并后的数据集如下所示:</p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pd"><img src="../Images/99075abb18f658bf4e7ee7f14e97bbda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8VgrsSREUSTBHrLHQWF5QA.png"/></div></div><p class="pk pl gj gh gi pm pn bd b be z dk translated">合并数据的快照。</p></figure><h2 id="5853" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">2.时间序列图:</h2><p id="e84e" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">然后，我绘制了这些点，以可视化和观察这三十天数据的模式。我不想拘泥于传统的折线图，所以下面是棒棒糖时间序列图的代码。看起来很整洁！！</p><p id="f122" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">代码:</strong></p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="ebf7" class="oe lq it ou b gy oy oz l pa pb"><strong class="ou jd">from</strong> matplotlib.lines <strong class="ou jd">import</strong> Line2D<br/><strong class="ou jd">import</strong> matplotlib.pyplot <strong class="ou jd">as</strong> plt<br/><strong class="ou jd">import</strong> matplotlib <strong class="ou jd">as</strong> mpl<br/><strong class="ou jd">import</strong> seaborn <strong class="ou jd">as</strong> sns</span><span id="e2b3" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># initializing configs</strong><br/>columns = ['News Volume', 'Total Cases', 'Total Death']<br/>colors = ['black', '#007acc', '#4db8ff']<br/>custom_text = "Some Text"<br/>plt.style.use('seaborn-darkgrid')<br/>fig, ax = plt.subplots(figsize=(16,10), dpi= 80)</span><span id="da09" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Plot each column using the configs</strong><br/>for i, column in enumerate(columns):<br/>    ax.vlines(x=df_merged.index, ymin=0, ymax=df_merged[column],<br/>              color='grey', linewidth=1, alpha=0.5)<br/>    ax.scatter(x=df_merged.index, y=df_merged[column], s=75,<br/>               color=colors[i])</span><span id="5a77" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Setting up Title, Label, XTicks and Ylim</strong><br/>ax.set_title('News Volume, Covid Cases and Deaths', <br/>             fontdict={'size':22})<br/>ax.set_ylabel('News Volume')<br/>ax.set_xticks(df_merged.index)<br/>ax.set_xticklabels(df_merged.index.date, rotation=60, <br/>                   fontdict={'horizontalalignment': 'right',<br/>                             'size':12})<br/>ax.set_ylim(bottom=0)</span><span id="e33c" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Setting up Legends </strong><br/>legend_elements = [Line2D([0], [0], marker='o', color='black',<br/>                          label='News Volume', markersize=10),<br/>                   Line2D([0], [0], marker='o', color='#007acc',<br/>                          label='Total Cases', markersize=10),<br/>                   Line2D([0], [0], marker='o', color='#4db8ff',<br/>                          label='Total Death', markersize=10)]<br/>ax.legend(handles=legend_elements, loc='upper left'</span><span id="68ba" class="oe lq it ou b gy pc oz l pa pb">plt.show()</span></pre><p id="3348" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">时间序列图:</strong></p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi po"><img src="../Images/b63bda39cfc7227fc678d708e1a7f0bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qc2quzVTrdeMEb5ipVNq-Q.png"/></div></div></figure><p id="e603" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">观察:</strong></p><p id="02e6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">很明显，covid病例数和死亡数在关注期内将呈指数级增长。但是，有趣和令人沮丧的是，新闻文章并没有显示出随着covid病例或死亡人数的变化。相反，如果你能发现，在新闻量数据中有三到五天的上升和下降周期模式。此外，在covid病例开始时，数量保持上升趋势，这也是一种预期行为。新闻数量随后保持一个均匀的水平，略有下降趋势，不再上升。所以，我们需要更多的数据！这有点道理，除了你可能已经注意到的异常值(我无法修复，因为我在开发计划中)，但这个图表肯定会随着时间的推移而改善。</p><h2 id="fa02" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">3.定义单词包特征和容量</h2><p id="4782" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">因此，在这一步中，我直观地收集了一些与covid、医疗保健和中央政府相关的令牌作为我的BoW特征，并循环浏览新闻标题，以获得每个BoW组的每篇新闻文章的这些令牌的计数。然后，我将每天的计数进一步分组，并将它们相加，得出我的时间序列特征。</p><p id="506a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">代码:</strong></p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="6e8a" class="oe lq it ou b gy oy oz l pa pb"><strong class="ou jd"># Bag-of-Words</strong><br/>covid_words_list = ['covid-19','corona', 'coronavirus']<br/>central_government_list = ['government', 'modi', 'pm']<br/>healthcare_list = ['doctor', 'healthcare', 'vaccine', 'cure',  <br/>                   'hospital', 'test', 'testing']</span><span id="2c5d" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Iteration Function</strong><br/>def token_counts(x, words_list):<br/>    title_tokens = x[0]<br/>    if len(words_list) == 1:<br/>        return title_tokens.count(words_list[0])<br/>    elif len(words_list) &gt;1 :<br/>        return sum([title_tokens<br/>                    .count(each_word) for each_word in words_list])<br/>    else:<br/>        raise Exception("Recheck Wordlist")</span><span id="0cb0" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Applying lambda function to apply token_counts() on each row<br/></strong>df['Covid Count'] = df.title_cleaned.apply(lambda x: token_counts(x, <br/>                                                  covid_words_list))<br/>df['Central Gov Count'] = df.title_cleaned.apply(lambda x:   <br/>                           token_counts(x, central_government_list))<br/>df['Healthcare Count'] = df.title_cleaned.apply(lambda x:    <br/>                                   token_counts(x, healthcare_list))</span><span id="3477" class="oe lq it ou b gy pc oz l pa pb">df_bow_extended = df[['Covid Count', 'Central Gov Count',   <br/>                      'Healthcare Count','published_at']]<br/>                      .groupby(by='published_at')<br/>                      .sum().reset_index()<br/>df_bow_extended</span></pre><p id="01f9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">分组数据:</strong></p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pd"><img src="../Images/29debfdcc0544ba134d47e0a8e825879.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ALbsIJTQQsqBNrYwjxkbIQ.png"/></div></div></figure><h1 id="eb04" class="lp lq it bd lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi nh mk ml mm bi translated">顺便说一下…</h1><p id="f9e6" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">我的弓看起来很简单，不是吗？查看下面的“后续步骤”部分。我将在接下来的博客中为我的弓做一些主题建模，这些博客将会有更多的数据点和标记来实验！</p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pp"><img src="../Images/0174c6f6576f9e4014cedb55b8b244e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UDWf8lllo1yOg6eD"/></div></div><p class="pk pl gj gh gi pm pn bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@armedshutter?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ayo Ogunseinde </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="f496" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">4.连接完整的数据并绘制时间序列</h2><p id="3f08" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">接下来，我将这些特征与之前的我的时间序列数据集合并，生成了下面的时间序列图，以便直观地寻找模式。这一次，我使用普通的多线图表，以避免不必要的混乱，因为有六条线进行观察。</p><p id="447f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">代码:</strong></p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="a65a" class="oe lq it ou b gy oy oz l pa pb">plt.close()</span><span id="b3db" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Setting up Configs</strong><br/>columns = ['News Volume','Total Cases', 'Total Death']<br/>columns_bow = ['Covid Count', 'Healthcare Count', <br/>               'Central Gov Count']<br/>colors = ['black', '#007acc', '#4db8ff']<br/>colors_bow = ['#cc3300', '#0000e6', '#ff8533']</span><span id="112b" class="oe lq it ou b gy pc oz l pa pb">plt.style.use('seaborn-darkgrid') <br/>fig, ax = plt.subplots(figsize=(15, 10), dpi=100)</span><span id="8f58" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Plotting the Time-Series</strong><br/>for i, column in enumerate(columns):<br/>    ax.plot('published_at', column, '--', data=df_merged_extended,  <br/>            color=colors[i], alpha=0.5)</span><span id="4cd8" class="oe lq it ou b gy pc oz l pa pb">for i, column in enumerate(columns_bow):<br/>    ax.plot('published_at', column, data=df_merged_extended, <br/>            color=colors_bow[i], linewidth=2)</span><span id="c067" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Setting up Title, XTicks, Xlim, Ylim and Legend</strong><br/>plt.title('Covid Cases and Deaths, News Volume and BOW Features from <br/>           10th March to 10th April, 2020')<br/>plt.xticks(rotation=45)<br/>plt.ylim(0, 900)<br/>plt.xlim(min(df['published_at']), max(df['published_at']))<br/># print(ax.get_xlim())<br/># print(ax.get_ylim())<br/>plt.text(737520.5, 310, 'News Volume', size='medium', color='black')<br/>plt.legend()</span><span id="cb18" class="oe lq it ou b gy pc oz l pa pb">plt.show()</span></pre><p id="ed77" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">时间序列图:</strong></p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pq"><img src="../Images/6a3c583a25a658f22a20f0d7b68fb37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEPrGS_6s2b1OcWU2SYyMg.png"/></div></div></figure><p id="ae99" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">观察:</strong></p><p id="b060" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在这一时期，医疗保健和政府话题的参与相当一致。这一趋势并没有显示出covid病例和死亡人数有任何特别的变化。Covid主题和新闻文章量如预期的那样具有良好的相关性。因此，为了证明我们的观察，让我们在下一节中获得相关性。4月10日，所有BoW功能均下降，显示covid案例数最高。同样，根据我们在数据集中看到的情况，这是意料之中的，因为这似乎是异常值的影响。</p><h2 id="7814" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">5.使用热图评估相关性</h2><p id="e2f7" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">为了进行关联，我使用了熊猫的内置<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html" rel="noopener ugc nofollow" target="_blank">。corr()函数</a>使用皮尔逊相关系数(ρ)来测量连续特征之间的线性关系，并返回一个NxN矩阵，其中N =特征数量。您还可以使用我们在下一步中讨论的Scipy。</p><p id="1838" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">。corr()自动跳过了我的<em class="kx"> published_at </em>专栏。因此，在我得到相关矩阵后，我以完整的正方形格式绘制它，因为<em class="kx">我喜欢完整正方形的热图</em>，即使我意识到冗余信息的显示。</p><p id="e75f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">然而，我包括了其他两种格式的代码——下面的三角形包括和不包括对角线。你可以转置并在<em class="kx"> mask_matrix </em>上得到上面的三角形。</p><p id="972c" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">代码:</strong></p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="b98b" class="oe lq it ou b gy oy oz l pa pb"><strong class="ou jd"># Obtain Correlation</strong><br/>corr = df_merged_extended.corr()</span><span id="3bd6" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Set up plt</strong><br/>plt.style.use('default')<br/>plt.figure(figsize=[10,10])</span><span id="81e8" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Heat-map 1 : Full Square</strong></span><span id="39ef" class="oe lq it ou b gy pc oz l pa pb">sns.heatmap(corr, annot=True, vmin=-1, vmax=1, center=0, <br/>            square=True, cmap='Spectral', annot_kws={"size": 12}, <br/>            linewidths=1, linecolor='white')</span><span id="b510" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Heat-map 2: Lower Triangle excluding diagonal</strong></span><span id="ea0c" class="oe lq it ou b gy pc oz l pa pb">c=np.zeros_like(corr)<br/>mask_matrix[np.triu_indices_from(mask_matrix)] = True<br/>sns.heatmap(corr, annot=True, vmin=-1, vmax=1, center=0,   <br/>            square=True, cmap='Spectral', mask = mask_matrix)</span><span id="b139" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Heat-map 3: Lower Triangle including diagonal</strong></span><span id="4c83" class="oe lq it ou b gy pc oz l pa pb">mask_matrix=np.zeros_like(corr)<br/>mask_matrix[np.triu_indices_from(mask_matrix)] = True<br/>mask_matrix = 1 - mask_matrix.T<br/>sns.heatmap(corr, annot=True, vmin=-1, vmax=1, center=0,   <br/>            square=True, cmap='Spectral', mask = mask_matrix)</span><span id="bc45" class="oe lq it ou b gy pc oz l pa pb"><strong class="ou jd"># Set up Title and Text</strong><br/>plt.title("Heatmap to Assess Correlation between Extracted  <br/>           Features")</span></pre><p id="5b76" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">热图</strong></p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pr"><img src="../Images/8a55c9044624dfbba1e2962b76358535.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lN5ehHwtVmusTL4KnK2Pww.png"/></div></div></figure><p id="b043" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">观察:</strong></p><p id="f5d0" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">有两个不同集群——</p><ul class=""><li id="1ff9" class="mn mo it kb b kc kd kg kh kk ps ko pt ks pu kw mu mv mw mx bi translated"><em class="kx">总病例</em>和<em class="kx">总死亡</em></li><li id="5e19" class="mn mo it kb b kc my kg mz kk na ko nb ks nc kw mu mv mw mx bi translated">船头特写和<em class="kx">新闻卷</em></li></ul><p id="0d40" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">这些单独的特征组之间确实具有正相关性。这些集群彼此负相关。所以，我想，现在我们需要衡量相关性的可靠程度。此时，我们将我们的零假设公式化为——所有特征都是相互独立的。让我们看看下一步结果如何。</p><h2 id="84a7" class="oe lq it bd lr of og dn lv oh oi dp lz kk oj ok md ko ol om mh ks on oo ml iz bi translated">6.p值和显著性评估</h2><p id="d7c0" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">为了评估我们零假设的准确性，我使用了<a class="ae ky" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html" rel="noopener ugc nofollow" target="_blank"> Scipy的</a> pearsonr函数，该函数返回Pearson的相关系数(ρ)以及p值。下面是我用来评估的代码。我使用了三个级别的统计显著性评估— .01、. 02和. 05。让我们看看下面的结果:</p><pre class="op oq or os gt ot ou ov ow aw ox bi"><span id="90eb" class="oe lq it ou b gy oy oz l pa pb"><strong class="ou jd">from</strong> scipy.stats <strong class="ou jd">import</strong> pearsonr</span><span id="e17f" class="oe lq it ou b gy pc oz l pa pb">def assess_corr(col1, col2):<br/>    r, p = pearsonr(col1, col2)<br/>    return r, p</span><span id="3688" class="oe lq it ou b gy pc oz l pa pb">df_merged_extended.fillna(value=0, inplace=True)<br/>df_merged_extended.set_index('published_at', inplace=True)</span><span id="eaa0" class="oe lq it ou b gy pc oz l pa pb">df_stat_sig = pd.DataFrame(columns=df_merged_extended.columns,  <br/>                           index=df_merged_extended.columns)</span><span id="a91b" class="oe lq it ou b gy pc oz l pa pb">for col1 in df_merged_extended.columns:<br/>    for col2 in df_merged_extended.columns:<br/>        #print("{} and {}".format(col1, col2))<br/>        r, p = assess_corr(df_merged_extended[col1],<br/>                           df_merged_extended[col2])<br/>        if p &lt; 0.01:<br/>            df_stat_sig[col1][col2] = "{:.3f}".format(p) + "***"<br/>        elif p &lt; 0.02:<br/>            df_stat_sig[col1][col2] = "{:.3f}".format(p) + "**"<br/>        elif p &lt; 0.05:<br/>            df_stat_sig[col1][col2] = "{:.3f}".format(p) + "*"<br/>        else:<br/>            df_stat_sig[col1][col2] = "{:.3f}".format(p)</span><span id="8418" class="oe lq it ou b gy pc oz l pa pb">df_stat_sig</span></pre><p id="898f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">输出:</strong></p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pv"><img src="../Images/1a44defe6b0d080eacf73a99d7730921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YuqvKEhsK-NrCE8DFCCVew.png"/></div></div></figure><p id="116d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">观察:</strong></p><p id="1d8a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">所有弓形特征都与<em class="kx">新闻量</em> e强相关，具有小于0.01的统计显著性。同<em class="kx">总例数</em>和<em class="kx">总死亡数。</em>所以我们可以拒绝<em class="kx">——</em></p><ul class=""><li id="82c3" class="mn mo it kb b kc kd kg kh kk ps ko pt ks pu kw mu mv mw mx bi translated">新闻计数独立于Covid计数、中央政府计数和医疗保健计数</li><li id="22ce" class="mn mo it kb b kc my kg mz kk na ko nb ks nc kw mu mv mw mx bi translated">总病例数独立于总死亡数</li><li id="6fb3" class="mn mo it kb b kc my kg mz kk na ko nb ks nc kw mu mv mw mx bi translated">Covid计数独立于中央政府和医疗保健计数。</li></ul><p id="4210" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我们几乎可以拒绝医疗保健独立于中央政府的观点，尽管风险只有5%多一点。我希望在下一篇关于这个数据集的时间序列分析的博客中，当我遍历大量数据点时，这一点会被最小化。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="5ca6" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">下一篇:</strong></h1><p id="7f3a" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">万岁！我有一些积极的结果，对这个实验的进展有积极的感觉。但是你有没有注意到在弓的特征定义中真正缺乏思考？如果我做了所有的思考，那么我的代码会做什么呢？</p><figure class="op oq or os gt pe gh gi paragraph-image"><div role="button" tabindex="0" class="pf pg di ph bf pi"><div class="gh gi pw"><img src="../Images/b9564732e4d9ced9dee398753e5ba4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t1zptBWEUnVtHPnI"/></div></div><p class="pk pl gj gh gi pm pn bd b be z dk translated">Sherise拍摄的照片。 on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="bb89" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">因此，在下一篇博客中，我将研究一些从爱尔兰新闻上收集的数据，并检查一些令牌与印度令牌有何不同。请记住，这些国家在许多方面彼此不同，这将是一项有趣的研究，以了解媒体在第一世界国家和发展中经济体中的相似或不同之处。</p><p id="0040" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd"> <em class="kx">我还把数据集扩展到了下个月，所以我有更多的数据可以处理。耶！！！</em> </strong></p><p id="6161" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">此外，在即将到来的博客中，我将评估新闻的主题，并将使用这些主题中出现的术语来丰富我的博客。此外，如果代码从同一个数据集创建字典，我就不必担心匹配标记。所以，敬请期待！</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="11c3" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">关于新冠肺炎文章系列:</h1><p id="504a" class="pw-post-body-paragraph jz ka it kb b kc mp ke kf kg mq ki kj kk ni km kn ko nj kq kr ks nk ku kv kw im bi translated">这是我用我的新冠肺炎新闻媒体数据集写的第二篇博客，将会写更多关于我的操作和实验的文章。数据集也将增长更多。如果您有兴趣了解这个数据集是如何形成的，请跟我来！这是我以前的博客。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h1 id="c8b6" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">Github链接到这个博客的笔记本:</h1><div class="nl nm gp gr nn no"><a href="https://github.com/royn5618/Medium_Blog_Codes/blob/master/Covid-Blog-Codes/Covid-Time-Series-Analysis-Prelim.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">royn5618/Medium_Blog_Codes</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">permalink dissolve GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="px l nz oa ob nx oc od no"/></div></div></a></div><h1 id="5693" class="lp lq it bd lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi nh mk ml mm bi translated">Github链接到该数据集上的所有笔记本:</h1><div class="nl nm gp gr nn no"><a href="https://github.com/royn5618/Medium_Blog_Codes/tree/master/Covid-Blog-Codes" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">royn5618/Medium_Blog_Codes</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="py l nz oa ob nx oc od no"/></div></div></a></div></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="e595" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd">我的链接:</strong> <a class="ae ky" href="https://medium.com/@nroy0110" rel="noopener">中型</a>|<a class="ae ky" href="https://www.linkedin.com/in/nabanita-roy/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ky" href="https://github.com/royn5618" rel="noopener ugc nofollow" target="_blank">GitHub</a></p><p id="3ed7" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><strong class="kb jd"> <em class="kx">感谢光临。我希望你喜欢阅读这篇博客。</em>T13】</strong></p></div></div>    
</body>
</html>