<html>
<head>
<title>Quickly label data in Jupyter Lab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jupyter实验室中快速标记数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/quickly-label-data-in-jupyter-lab-999e7e455e9e?source=collection_archive---------18-----------------------#2020-05-28">https://towardsdatascience.com/quickly-label-data-in-jupyter-lab-999e7e455e9e?source=collection_archive---------18-----------------------#2020-05-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/db7658651ab8db4f8a5ba2142e25efce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lX_wmkjiwrdSwrKjx4SBdg.png"/></div></div></figure><div class=""/><div class=""><h2 id="0826" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">使用pigeonXT来标记所有种类的数据</h2></div><p id="5992" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">随便问一个人数据科学家是做什么的，他或她可能会回答说数据科学家使用最先进的算法提供数据驱动的解决方案。如果那个随机的人碰巧是(或认识)一个数据科学家，他或她很可能会用这个笑话来回应:80%的时间数据科学家在清理数据，20%的时间数据科学家抱怨不得不清理数据。玩笑归玩笑，数据科学家确实花了很多时间清理和调整数据集，并且通常总是在寻找改进过程。尤其是当一项任务不那么令人兴奋时，比如贴标签。</p><blockquote class="lp lq lr"><p id="2f82" class="kt ku ls kv b kw kx kf ky kz la ki lb lt ld le lf lu lh li lj lv ll lm ln lo im bi translated">我发现数据标注的过程非常有益(甚至会上瘾)。每次我标记一个例子，我都觉得我的知识、经验和技能被转移到了模型中。“我真的无法理解数据科学家为什么抱怨被要求这么做，”安德里·布尔科夫</p></blockquote><p id="0999" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于一个NLP项目，我们需要一个工具来将短文本分成一个或多个类别。在短短的五分钟“让我们自己写吧”之后，你很快就会得出结论，Python社区中可能已经提供了一些东西。事实上，有许多像<a class="ae lw" href="https://labelstud.io" rel="noopener ugc nofollow" target="_blank">标签工作室</a>或<a class="ae lw" href="https://prodi.gy/" rel="noopener ugc nofollow" target="_blank">产品</a>这样的解决方案，它们确实是很棒的解决方案，但在我们的品味中太过一般。稍微搜索了一下，我们找到了我们想要的工具:<a class="ae lw" href="https://github.com/agermanidis/pigeon" rel="noopener ugc nofollow" target="_blank">鸽子</a>由<a class="ae lw" href="https://agermanidis.com/" rel="noopener ugc nofollow" target="_blank"> Anastasis Germanidis </a>创造。这非常简单:在Jupyter中，你向一个函数输入一个文本列表和一个标签列表，然后弹出一个小部件来遍历每个例子。结果再次以列表形式给出。唯一的缺点是它还不支持多标签。</p><p id="ac4a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在Github上共享代码最棒的一点是，每个人都可以分享代码并进行修改。不幸的是，Anastasis没有回复讨论变化和拉请求的电子邮件。因此，我们决定将这些更改发布为<a class="ae lw" href="https://github.com/dennisbakhuis/pigeonXT" rel="noopener ugc nofollow" target="_blank"> PigeonXT </a>，Pigeon的扩展版本。</p><p id="978d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">PigeonXT目前支持以下注释任务:</p><ul class=""><li id="b1af" class="lx ly je kv b kw kx kz la lc lz lg ma lk mb lo mc md me mf bi translated">二元/多类分类</li><li id="fe08" class="lx ly je kv b kw mg kz mh lc mi lg mj lk mk lo mc md me mf bi translated">多标签分类</li><li id="ffa2" class="lx ly je kv b kw mg kz mh lc mi lg mj lk mk lo mc md me mf bi translated">回归任务</li><li id="e5bd" class="lx ly je kv b kw mg kz mh lc mi lg mj lk mk lo mc md me mf bi translated">字幕任务</li></ul><p id="7e2b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">任何可以在Jupyter上显示的内容(文本、图像、音频、图表等。)可以通过提供适当的<code class="fe ml mm mn mo b">display_fn</code>参数由pigeon显示。</p><p id="f519" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">此外，定制挂钩可以附加到每个行更新(<code class="fe ml mm mn mo b">example_process_fn</code>)，或者当注释任务完成时(<code class="fe ml mm mn mo b">final_process_fn</code>)。</p><h1 id="c497" class="mp mq je bd mr ms mt mu mv mw mx my mz kk na kl nb kn nc ko nd kq ne kr nf ng bi translated">装置</h1><p id="a882" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">与最初的Pigeon一样，扩展的PigeonXT被上传到<a class="ae lw" href="https://pypi.org/project/pigeonXT-jupyter/" rel="noopener ugc nofollow" target="_blank"> Python包索引</a>，并且可以使用pip进行安装。在这篇blob帖子中，我们给出了几个例子。要运行这些，我建议首先创建一个新的环境。我们正在使用Miniconda管理环境，完整的程序在这里<a class="ae lw" href="https://github.com/dennisbakhuis/Tutorials/tree/master/Python_Conda_Pip_Environments" rel="noopener ugc nofollow" target="_blank">描述</a>。要创建新环境并安装要求，请在shell中键入以下内容:</p><pre class="nm nn no np gt nq mo nr ns aw nt bi"><span id="2833" class="nu mq je mo b gy nv nw l nx ny">conda create --name pigeon python=3.7<br/>conda activate pigeon<br/>conda install nodejs<br/>pip install numpy pandas jupyterlab ipywidgets<br/>jupyter nbextension enable --py widgetsnbextension<br/>jupyter labextension install <a class="ae lw" href="http://twitter.com/jupyter" rel="noopener ugc nofollow" target="_blank">@jupyter</a>-widgets/jupyterlab-manager</span><span id="0a0e" class="nu mq je mo b gy nz nw l nx ny"><strong class="mo jf">pip install pigeonXT-jupyter</strong></span></pre><p id="2e20" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">要启动Jupyter Lab，只需在同一个shell中键入以下内容:</p><pre class="nm nn no np gt nq mo nr ns aw nt bi"><span id="f91c" class="nu mq je mo b gy nv nw l nx ny">jupyter lab</span></pre><h1 id="691e" class="mp mq je bd mr ms mt mu mv mw mx my mz kk na kl nb kn nc ko nd kq ne kr nf ng bi translated">例子</h1><p id="cd28" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">所有的例子也可以在<a class="ae lw" href="https://github.com/dennisbakhuis/pigeonXT" rel="noopener ugc nofollow" target="_blank">我的Github页面</a>的笔记本中找到。</p><h2 id="506f" class="nu mq je bd mr oa ob dn mv oc od dp mz lc oe of nb lg og oh nd lk oi oj nf ok bi translated">二元或多类文本分类</h2><p id="d458" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">多类分类或二元分类(如果只提供两个标签)非常简单:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi on"><img src="../Images/c04578b058d0e102369df219c7b63269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tpWCToRKv0BKVvh9hJPnEg.png"/></div></div></figure><h2 id="8f40" class="nu mq je bd mr oa ob dn mv oc od dp mz lc oe of nb lg og oh nd lk oi oj nf ok bi translated">多标签文本分类</h2><p id="e596" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">将多个类标注到同一个示例中称为多标签标注，这与前面的示例几乎相同:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/50e73186df49876e96184c5e4ba44b44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*10bPDAn6lYzWaYO2rZpZzg.png"/></div></div></figure><h2 id="4801" class="nu mq je bd mr oa ob dn mv oc od dp mz lc oe of nb lg og oh nd lk oi oj nf ok bi translated">图像分类</h2><p id="502c" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">可以与Jupyter交互的任何类型的结构(图像、音频、电影)的分类也可以同样容易地进行标记:</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/c327c0e563ac9baaf3d703daa41c6892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTHYIYd3fNwEDJyfh7PCGw.png"/></div></div></figure><h2 id="afaa" class="nu mq je bd mr oa ob dn mv oc od dp mz lc oe of nb lg og oh nd lk oi oj nf ok bi translated">带有自定义挂钩的多标签文本分类</h2><p id="c882" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">虽然自定义挂钩可能会再次增加复杂性，但这里有一个用例示例。当有一个包含1000个例子的数据框架要标记时，一次做的事情可能太多了。不仅是身体上的时间，也是为了防止无聊到发疯。在这里，您可以编写一个包装器来包装注释函数，以选择一部分并将该部分保存到磁盘。下一次，它检查输出，并在您停止的地方继续。这部分写在包装器和final_processing函数中。</p><p id="0e7a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">作为一个基于行的钩子函数的例子，我们将标签改为它们的数字等价物，并用每一行更新数据帧。现在，您可以看到数据框中充满了每个步骤。</p><figure class="nm nn no np gt iv"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="nm nn no np gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/46bc5023ffe3dbd62da523ae888ab67b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rnj0-Np4CYp1vR3vSRH1dQ.png"/></div></div></figure><h1 id="18bd" class="mp mq je bd mr ms mt mu mv mw mx my mz kk na kl nb kn nc ko nd kq ne kr nf ng bi translated">围捕</h1><p id="7a62" class="pw-post-body-paragraph kt ku je kv b kw nh kf ky kz ni ki lb lc nj le lf lg nk li lj lk nl lm ln lo im bi translated">标注数据有许多有用的工具。我发现的大多数工具都非常完整，但也相对复杂。我们正在寻找一个简单的工具，可以直接从Jupyter使用。Pigeon已经是一个很好的工具了，但是我们需要增加一些功能来满足我们的需求。我们也享受了创建/更改新的Python包并与社区共享的小小努力。如果您有任何问题或只是觉得有用，请告诉我。</p></div></div>    
</body>
</html>