<html>
<head>
<title>Helping Santa plan with Mixed Integer Programming (MIP)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用混合整数规划(MIP)帮助圣诞老人计划</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/helping-santa-plan-with-mixed-integer-programming-mip-1951386a6ba5?source=collection_archive---------27-----------------------#2020-01-15">https://towardsdatascience.com/helping-santa-plan-with-mixed-integer-programming-mip-1951386a6ba5?source=collection_archive---------27-----------------------#2020-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="917a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于我们如何在Kaggle组织的“2019年圣诞老人工作室之旅”比赛中获得银牌的报道</h2></div><p id="8a99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今年，<a class="ae lb" href="https://bsteenwi.github.io/" rel="noopener ugc nofollow" target="_blank"> Bram Steenwinckel </a>和我作为第28个团队(1600多名参与者),为圣诞老人的年度100天研讨会提供了最佳时间表，确保了我们的圣诞礼物。这篇博客文章包含了一个问题描述和我们为达到这个最佳解决方案所采取的不同步骤。</p><p id="078d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">免责声明:</strong>布拉姆和我绝不是优化方面的专家。然而，我们玩得很开心，也学到了很多东西。</p><h1 id="8801" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">问题定义</h1><p id="1461" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">每年，圣诞老人都会组织一个为期100天的圣诞工作坊，让5000个家庭参加。每个家庭(由一定数量的家庭成员组成)可以提供他们最喜欢参加的10天的列表。由于研讨会场地容量有限(每天必须有125至300名与会者)，因此不可能让每个人都有自己的首选。因此，向没有获得第一选择权的家庭提供补偿。一个N口之家，没有得到他们的第一个选择会得到:</p><ul class=""><li id="8a5f" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">50美元礼品卡，如果他们有第二选择的话</li><li id="8e95" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">每位家庭成员获得50美元礼品卡和圣诞老人自助餐25%的折扣(价值9美元),如果他们有第三个选择的话</li><li id="5942" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">第四种选择的家庭成员每人100美元礼品卡和圣诞老人自助餐25%的折扣(价值9美元)</li><li id="c02e" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">如果他们得到第五个选择，每位家庭成员可获得200美元礼品卡和圣诞老人自助餐25%的折扣(价值9美元)</li><li id="421d" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">第六种选择对应的每位家庭成员200美元礼品卡和圣诞老人自助餐50%折扣(价值18美元)</li><li id="4c00" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">第七选择每位家庭成员300美元礼品卡和免费圣诞老人自助餐(价值36美元)</li><li id="4a66" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">第八个选择的家庭成员每人400美元礼品卡和免费圣诞老人自助餐(价值36美元)</li><li id="d6fd" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">每位家庭成员可获得500美元的礼品卡、免费的圣诞老人自助餐(价值36美元)，如果他们获得第九个选择，每位家庭成员可享受50%的北极直升机之旅(价值199美元)</li><li id="22fb" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">每位家庭成员可获得500美元的礼品卡、免费的圣诞老人自助餐(价值36美元)，否则每位家庭成员可免费乘坐一次北极直升机(价值398美元)</li></ul><p id="7c79" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哦，天啊，我不介意从我的十大清单中选不到一个。我已经可以想象自己坐在圣诞老人旁边，乘坐直升机飞越北极。另外，500美元和一顿免费晚餐也不算太寒酸。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mn"><img src="../Images/3f4b6e3f851ae88747657da3b62c7d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9SRbsY4k-WIhvWP6.jpg"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">史蒂文斯家庭的未着色图像被分配到第十个选择。</p></figure><p id="3746" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但这还不是全部…如果我们不在100天内统一分配出席人数，还会有会计处罚:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nd"><img src="../Images/b53189c7ef49b9eb7179a84a1a416b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ykrhUhuNEqcB5e_T4uHaTQ.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">未统一分配服务员人数的会计处罚。N_d是第d天的服务员人数，N_(d+1)是第d+1天的服务员人数</p></figure><p id="a707" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终目标是将这5000个家庭分配到100天中的一天，使偏好和会计成本的总和最小化。</p><h1 id="bd04" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">检查数据和成本</h1><p id="0de6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">让我们仔细看看提供的5000个家庭的数据。首先，让我们检查一下家庭规模:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/752688716a2d8dd51c7e1a23e1878e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*2OrvhO_rVjNX1Eu2b8TNWQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">5000个家庭的规模遵循某种正态分布</p></figure><p id="3899" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，看起来家庭规模有点正态分布，规模4是众数。现在，让我们看看作为首选的日期:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f0d50844719dc0f06a14f99d513dff88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*elbKJFrbFSwM4iTyN4jHgg.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">将某一天作为首选的家庭数量。</p></figure><p id="04fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">显然，第一天是非常受欢迎的一天。实际上，日子是倒着算的，d日是指圣诞节前d天。因此，第一天正好是圣诞节的前一天，这解释了为什么它如此受欢迎。此外，我们看到对应于周末的周期性峰值。让我们创建一个偏好成本(的对数)热图，作为家庭规模和指定选择的函数:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/9ef694d10a53cb49f2e3631fa3b65f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*I6Xg-pq6G5coRUmc_AWuZQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">一张偏好成本的热图，它是家庭指定选择及其规模的函数</p></figure><p id="93e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们来看看会计成本日志的热图:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0142e540de7bdd15abf1c6b42f18b1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*ciOmT6wp-p_hBLr13BSpFQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">当当天的服务人员数量等于125时，会计成本始终为零，当当天的服务人员数量为300而第二天为125时，会计成本最大。</p></figure><h1 id="aa56" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">第一种方法:贪婪，匈牙利方法，遗传算法和模拟退火</h1><h2 id="13d9" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">贪婪算法</h2><p id="944b" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们的第一次尝试非常幼稚。由于每天的出席人数必须至少达到125人，我们保留了一个没有125人出席的日期列表。然后，我们遍历每个系列，并将其分配给列表中的一个选项。如果这个家庭的选择都不在这个列表中，我们就把它分配给最佳选择，确保那天的服务员不超过300人。</p><h2 id="8497" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">匈牙利方法</h2><p id="55d5" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">比赛开始后不久，opensourc.es发表了一篇博文,获得了比我们目前所获得的分数好得多的分数。他的策略是忽略会计成本，使用匈牙利方法最小化偏好成本。普通实现试图统一分配家庭(每天50个)。我们很快扩展了这种方法，将更多的家庭分配到更受欢迎的日子。我们实际上试图解决下面的优化问题有一段时间了:找到一个100维的向量<strong class="kh ir"> V </strong>，它的元素总和为5000(家族的数量),当提供给匈牙利算法时，它产生最小的成本。<strong class="kh ir">V</strong>【I】将是分配给第一天的家庭数量。不幸的是，这是一个有点“昂贵”的问题，对于每个新的<strong class="kh ir"> V </strong>，我们必须重新运行匈牙利方法，这需要一些时间。使用我们的最终向量，获得了<em class="nu"> 95441 </em>的分数，而不是原始提案获得的<em class="nu"> 144287 </em>。下面可以找到这方面的代码片段。</p><figure class="mo mp mq mr gt ms"><div class="bz fp l di"><div class="nv nw l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">匈牙利算法的代码片段</p></figure><h2 id="a892" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">贪婪局部搜索</h2><p id="ad60" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">然后，我们实现了一些算法(或者使用了通过公共笔记本提供给我们的一些很棒的实现)来对解决方案做一些小的调整。每次适应后，我们重新计算分数，检查是否有进步。很明显，快速评分功能至关重要。我们将进一步讨论这个问题。我们使用的策略是:</p><ul class=""><li id="95aa" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">尝试将一个族移动到它的选择之一。</li><li id="13af" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">尝试交换两个系列(取一个系列(=f1)，选择其中一个(=d1)，然后选择当前分配给d1的第二个系列(=f2)，并将其分配给其中一个(=d2))。</li><li id="0cd7" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">与上面类似，但有三个家庭。</li><li id="fb2c" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated"><a class="ae lb" href="https://www.kaggle.com/golubev/c-stochastic-product-search-65ns" rel="noopener ugc nofollow" target="_blank">随机搜索</a>:取若干个家族(=F)，强行分配他们的前K个选择。这是每次迭代的K**F次调整。这个策略被证明是最有效的。在比赛即将结束时，这个算法的一个C++实现<a class="ae lb" href="https://www.kaggle.com/golubev/c-stochastic-product-search-65ns" rel="noopener ugc nofollow" target="_blank">已经推出。<br/> →如果我们将匈牙利方法创建的95441个解决方案输入该算法，45分钟后我们可以获得大约<em class="nu"> 75000 </em>的分数。</a></li></ul><h2 id="7138" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">遗传算法和模拟退火</h2><p id="5078" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们还使用了一些元启发式方法。我们首先想到的是遗传算法会在这场竞争中胜出。比赛开始后，我们很快专注于遗传算法，但很快就放弃了，因为我们的种群总是收敛到一个非常糟糕的分数。模拟退火更成功，因为它有时能帮助我们摆脱贪婪的局部搜索无法摆脱的局部最小值。模拟退火的要点是，它允许解决方案暂时恶化，以逃避深度局部最优。</p><h2 id="7e35" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">成本的快速计算</h2><p id="59b1" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如上所述，快速成本函数非常重要，因为这允许在相同的时间框架内进行更多的局部搜索。人们很快提供了可以在几纳秒内运行的python中使用的C实现。由于本地搜索的性质，这些实现甚至可以进一步优化:由于每次迭代中的适应是最小的，我们不需要计算每天<a class="ae lb" href="https://www.kaggle.com/khahuras/the-elegant-prize" rel="noopener ugc nofollow" target="_blank">的偏好&amp;记账成本，而只需要计算受影响的那些</a>。</p><h1 id="c36b" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">非线性优化的局部求解器</h1><p id="6d05" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">随着比赛的进行，很明显，顶尖选手实际上取得了最佳成绩(68888.04)。随着时间的推移，越来越多的人实现了最佳价值。12月6日(在比利时是"<a class="ae lb" href="https://en.wikipedia.org/wiki/Sinterklaas" rel="noopener ugc nofollow" target="_blank"> Sinterklaas </a>")，来自LocalSolver(一个非线性求解器)的人给了我们一份礼物。他们<a class="ae lb" href="https://twitter.com/localsolver/status/1203002028282257409" rel="noopener ugc nofollow" target="_blank">在推特</a>上发布了一个简化版的解决方案，使用他们的工具实现了前50名的位置。解决方案是一个非线性目标的公式，可以用他们的工具进行优化。我们给自己弄了一个学术许可证，运行了这个工具，结果当时的分数大概是<em class="nu"> 71000 </em>。下面是一段代码片段:</p><figure class="mo mp mq mr gt ms"><div class="bz fp l di"><div class="nv nw l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">用LocalSolver求解非线性整数规划</p></figure><p id="af86" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，我们创建了一个5000x100的二进制矩阵<strong class="kh ir"> x </strong>，其中包含了各个家庭对日期的分配。如果<strong class="kh ir">x【f】【d】= 1</strong>，则f族被分配给d日。由此，创建一个100维的<strong class="kh ir"> N </strong>向量，其中包含每天的入住率。然后，我们设置约束条件，即每个家庭应该被分配恰好1天，并且每天的入住人数不能低于125人，也不能超过300人。使用<strong class="kh ir"> x </strong>和<strong class="kh ir"> N </strong>我们可以直接制定我们的非线性目标，并让LocalSolver发挥他的魔力，找到最佳的<strong class="kh ir">x</strong>-矩阵。</p><h1 id="392d" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">使用Gurobi的混合整数规划</h1><p id="b664" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">虽然与使用贪婪的局部搜索相比，使用LocalSolver是一个直接的改进，但它仍然离最优值很远。因此，我们转向求解一个(线性)混合整数规划(使用Gurobi，一个强大的商业求解器)。为此，我们必须运用一些技巧。</p><h2 id="4378" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">使目标线性</h2><p id="02f6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">首先，LP或MIP求解器期望约束和目标至多是二次的，最好是线性的。当查看会计罚款的公式时，很明显这是一个非线性函数。但是，由于一天的占用率被限制在125到300之间，因此该记帐功能的输入数量是有限的。从公式中我们可以看到两个因变量:当天的占有率和d + 1天(在这个框架中是前一天)的占有率。因此，我们可以创建一个(查找)176x176矩阵，其中包含该会计成本的所有可能值(我们通过在会计成本热图中创建网格线暗示了这一点)。总之，一个名为<strong class="kh ir"> occ </strong>的100×176×176矩阵用于存储所有这些信息。<strong class="kh ir"> occ[d][k][l] </strong>如果在d日入住率等于k，在d + 1日入住率等于l，则occ[d][k][l]等于1。这个矩阵非常庞大，但我们可以轻松地删除一些变量。我们知道最佳解决方案的会计成本大约是6020，因为与高于此的成本相关联的二元变量可以立即被丢弃。</p><h2 id="0146" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">每个家族仅使用10个二元变量</h2><p id="de25" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在我们的LocalSolver公式中，我们使用一个5000x100的二进制矩阵来存储我们的赋值。在检查我们的解决方案时，我们很快发现，最佳解决方案绝不会让一个家庭做出糟糕的选择。因此，我们可以将二进制矩阵的大小减少到5000x10。如果家族f被赋予选择c，那么x[f][c]将是1。</p><p id="fafa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总之，我们有以下变量:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/534d9f0a40545b5e45f2c0ababe0c01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*4NPEWFphI7IsjgTqSk7q4g.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">赋值变量</p></figure><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ny"><img src="../Images/89fb97f5bb1ccac9000b06e054e70a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*lzpVse9UNHry2jVRugaLEA.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">占用变量</p></figure><p id="6edb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，我们也可以从分配矩阵中计算占用变量:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/3d6873034f4c4c8a47b0dde61d81953c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*KT8AuYqnW7eHL58JLsd1PA.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">根据分配矩阵计算占用率</p></figure><p id="d6e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，family_size包含每个系列的大小，choices是一个矩阵，包含每个系列的选项。为了更具体，让我们看一个简单的例子。假设我们有5个家庭，选择矩阵如下:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/a5333d7c96b9f297463c17c4cb8908ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*SoFninQFzpxeGWyLtL5iVQ.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">家庭选择矩阵的一个简单例子</p></figure><p id="b6fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么第1天的占用率(occupancy(1))将等于:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ob"><img src="../Images/381c2d575865b299252c559fca92e423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9jNjT7yWF9PqVMySB7EGw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">基于分配矩阵计算占用率的实例</p></figure><p id="6ea0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们添加约束条件，即占用率应该在125和300之间，每个家庭必须准确地分配一个选择，并且二进制占用率矩阵中的1位必须与计算的占用率值一致。最后，我们优化以下目标:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/34d7c8708186f32d429818c9e8b02725.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*yS7v5FxquCfLUluGLxz1MA.png"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">我们的医疗保险计划的目标</p></figure><p id="8b0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">PREF和ACC两个矩阵包含相应的费用。可以在下面找到可以提供给Gurobi的代码:</p><figure class="mo mp mq mr gt ms"><div class="bz fp l di"><div class="nv nw l"/></div><p class="mz na gj gh gi nb nc bd b be z dk translated">我们为Gurobi设计的MIP配方</p></figure><p id="c4d6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们让它运行了1周。！)并最终输出最优解。可以添加一些技巧来加快收敛速度，最明显的是添加约束条件，将求解器导向68888.04的最优解(带有求解器的相应“最优性证明”)。如果你成功地使你的求解器在一周内收敛，请在评论中告诉我们！</p><h2 id="e60a" class="ni ld iq bd le nj nk dn li nl nm dp lm ko nn no lo ks np nq lq kw nr ns ls nt bi translated">可视化我们的结果</h2><p id="635e" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">使用一个<a class="ae lb" href="https://www.kaggle.com/ghostskipper/visualising-results" rel="noopener ugc nofollow" target="_blank">公共内核</a>，我们可以为我们的最优解创建一个很好的可视化:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi gj"><img src="../Images/8d0cea9da423713657b670bc6a57b80a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iL4PfhXTgG4MHbAYjuQ-Jw.png"/></div></div><p class="mz na gj gh gi nb nc bd b be z dk translated">我们的最优解的可视化。在x轴上，您可以看到每天的护理人数(显示在y轴上)。每个条形中的颜色表示那天被分配了特定选择的家庭的比例。</p></figure><h1 id="4c46" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">总结词</h1><p id="1bd6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">Bram和我是找到这个最优解的第28个团队。鉴于我们没有线性编程的经验，我们对最终的结果感到非常自豪。我们现在都获得了银牌，我被提升为“竞赛专家”。</p></div></div>    
</body>
</html>