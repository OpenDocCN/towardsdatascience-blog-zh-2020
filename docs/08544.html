<html>
<head>
<title>Creating Streamlit Dashboard from scratch.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从头开始创建 Streamlit 仪表板。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-streamlit-dashboard-from-scratch-59316a74fa1?source=collection_archive---------22-----------------------#2020-06-21">https://towardsdatascience.com/creating-streamlit-dashboard-from-scratch-59316a74fa1?source=collection_archive---------22-----------------------#2020-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c33f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Streamlit 是一个很棒的工具，可以轻松构建视觉上吸引人的仪表板。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/20184d675a8c13d9afbaa390a95fa8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AK9DtF_m305oP8uA"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">马库斯·温克勒在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1dc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">构建仪表板从来都不容易，创建仪表板需要 bootstrap、HTML、CSS 等知识和大量的时间。但是通过使用 streamlit，我们只需几行代码就可以创建高度交互式和视觉上吸引人的仪表板。让我们开始构建我们的控制面板，但首先让我们了解一下 streamlit。</p><h1 id="164e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是 Streamlit？</h1><p id="197b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><strong class="ky ir"> Streamlit </strong>是一个开源的 Python 库，其速度快得惊人，可以轻松地为机器学习和数据科学构建漂亮的定制网络应用。这是一个非常棒的工具，只需要一些 python 知识就可以创建高度交互式的仪表板。我们将从安装 streamlit 开始，看看它是如何工作的。</p><p id="7c58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">安装 Streamlit </strong></p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d970" class="mu lt iq mq b gy mv mw l mx my">pip install streamlit</span></pre><p id="426b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看 streamlit 上的一些演示。为此，我们需要在命令提示符下运行下面给出的命令。此命令允许您浏览预加载的 Streamlit 演示。你一定要看看这些，因为它们真的很有趣。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="8ce0" class="mu lt iq mq b gy mv mw l mx my">streamlit hello</span></pre><p id="a5ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们创建自己的仪表板。在这里，我将创建一个仪表板，用于分析 2019 年 5 月至 2020 年 5 月印度股市的 5 大赢家和输家。为了构建它，让我们导入一些我们需要的库。请注意，您需要为 streamlit 创建一个脚本并运行它，因此我们将使用任何代码编辑器，如 Atom 或 Notepad++并使用。py 格式。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9049" class="mu lt iq mq b gy mv mw l mx my">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly.express as px<br/>from plotly.subplots import make_subplots<br/>import plotly.graph_objects as go<br/>import matplotlib.pyplot as plt</span></pre><p id="ea6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有这些库将用于股票数据的数学计算和可视化。现在让我们使用 pandas 导入我们的数据，这里我为赢家和输家创建了单独的文件，所以我们将导入这两个文件。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="e348" class="mu lt iq mq b gy mv mw l mx my">DATA_URL = ("C:/Users/Divya/gainers.csv")<br/>DATA_UR= ("C:/Users/Divya/losers.csv")<br/>df=pd.read_csv(DATA_URL)<br/>df1=pd.read_csv(DATA_UR)</span></pre><p id="adf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">导入数据文件后，让我们开始设置仪表板的标题。为此，我们将使用<strong class="ky ir"> st.title </strong>作为主标题，使用<strong class="ky ir"> st.sidebar.title </strong>作为侧栏标题，如下所示。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="db23" class="mu lt iq mq b gy mv mw l mx my">st.title("Share Price analysis for May 2019 to May 2020:")<br/>st.sidebar.title("Share Price analysis for May 2019 to May 2020:")<br/>st.markdown("This application is a Share Price dashboard for Top 5 Gainers and Losers:")<br/>st.sidebar.markdown("This application is a Share Price dashboard for Top 5 Gainers and Losers:")</span></pre><p id="1043" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以保存此文件并在 streamlit 中运行它来查看更改。您将看到带有您提到的标题的仪表板。我将我的文件存储为 share_new.py，因此我将通过键入下面给出的命令来运行。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d678" class="mu lt iq mq b gy mv mw l mx my">streamlit run share_new.py</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/2b51d5a810f9a97b9bca3db203e51ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBfYQ8F12WWpoP-OCkJn0Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">这是您的仪表板最初的外观。</p></figure><p id="6480" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">streamlit 最好的一点是它非常快，也就是说，你可以保存脚本中的更改，应用程序会立即反映这些更改，你不需要一次又一次地刷新应用程序。</p><p id="8dca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个仪表板中，我们将为数据集中的所有股票创建蜡烛图。此外，我们将绘制这些股票的移动平均线。首先创建收益者的标题，并创建一个选择框来选择要分析的股票。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c10d" class="mu lt iq mq b gy mv mw l mx my">st.sidebar.title("Gainers")<br/>select = st.sidebar.selectbox('Share', ['Adani Green Energy', 'GMM Pfaudler', 'AGC Networks', 'Alkyl Amines Chem', 'IOL Chem &amp; Pharma'], key='1')</span></pre><p id="674f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦保存文件，更改将会反映在您的应用程序中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/9ac2f36923ffa846ff2843c027ce7d98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRUYcG4jZ9jR_VYJXCZt2Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在这里，您可以看到选择框显示了标题增益。</p></figure><p id="7961" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将编写代码来创建一个复选框，以启用或禁用蜡烛图的可视化，并为所有股票创建一个蜡烛图。下面给出的代码将创建“阿达尼绿色能源”的蜡烛图，还将计算和显示该份额的移动平均线。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9a91" class="mu lt iq mq b gy mv mw l mx my">if not st.sidebar.checkbox("Hide", True, key='1'):<br/>    st.title("Gainers")<br/>    if select == 'Adani Green Energy':<br/>        for i in ['AdaLow', 'AdaHigh', 'AdaClose', 'AdaOpen']:<br/>            df[i] = df[i].astype('float64')<br/>avg_20 = df.AdaClose.rolling(window=20, min_periods=1).mean()<br/>avg_50 = df.AdaClose.rolling(window=50, min_periods=1).mean()<br/>avg_200 = df.AdaClose.rolling(window=200, min_periods=1).mean()<br/>set1 = { 'x': df.AdaDate, 'open': df.AdaOpen, 'close': df.AdaClose, 'high': df.AdaHigh, 'low': df.AdaLow, 'type': 'candlestick',}<br/> set2 = { 'x': df.AdaDate, 'y': avg_20, 'type': 'scatter', 'mode': 'lines', 'line': { 'width': 1, 'color': 'blue' },'name': 'MA 20 periods'}<br/>set3 = { 'x': df.AdaDate, 'y': avg_50, 'type': 'scatter', 'mode': 'lines', 'line': { 'width': 1, 'color': 'yellow' },'name': 'MA 50 periods'}<br/>        set4 = { 'x': df.AdaDate, 'y': avg_200, 'type': 'scatter', 'mode': 'lines', 'line': { 'width': 1, 'color': 'black' },'name': 'MA 200 periods'}<br/>        data = [set1, set2, set3, set4]<br/>        fig = go.Figure(data=data)<br/>        st.plotly_chart(fig)</span></pre><p id="cf69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">类似地，我们可以为数据集中列出的所有份额创建烛台图表，但是重复上面提到的代码，最终的仪表板将显示数据集中提到的所有份额。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/50c07c51aa1f8a7c5b7e41c2aec071cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wqisyECpDlslymX1nubmCA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">显示所有功能和共享的最终仪表板。</p></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="1ebb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">视频显示了最终创建的仪表板，烛台图表是使用 Plotly 创建的，因此它们是交互式的，移动平均线可以相应地启用或禁用。这个仪表板在不到两个小时的时间内就创建好了，具有高度的交互性和视觉吸引力。</p><p id="09f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这只是 streamlit 所能做的一个例子。您可以探索更多信息，了解 streamlit 为创建网络应用和仪表盘提供的无限功能。如果您在创建自己的仪表板时遇到任何困难，请回信并与我分享您的经验。</p><div class="ne nf gp gr ng nh"><a rel="noopener follow" target="_blank" href="/creating-dataset-using-faker-and-use-it-for-pandas-profiling-6fe26e1b9557"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">使用 Faker 创建数据集并将其用于熊猫概况分析</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">创建您自己的数据并对其执行操作。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">towardsdatascience.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv kp nh"/></div></div></a></div><h1 id="862f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在你走之前</h1><p id="258b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><strong class="ky ir"> <em class="nw">感谢</em> </strong> <em class="nw">的阅读！如果你想与我取得联系，请随时通过 hmix13@gmail.com 联系我或我的</em> <a class="ae kv" href="http://www.linkedin.com/in/himanshusharmads" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nw"> LinkedIn 个人资料</em> </strong> </a> <em class="nw">。也可以在我的</em><a class="ae kv" href="https://github.com/hmix13/streamlit_candlestick" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nw">Github</em></strong></a><em class="nw">中查看我在这里使用过的代码和数据集。另外，请随意浏览</em> <a class="ae kv" href="https://medium.com/@hmix13" rel="noopener"> <strong class="ky ir"> <em class="nw">我的简介</em> </strong> </a> <em class="nw">并阅读我写的与数据科学相关的不同文章。</em></p></div></div>    
</body>
</html>