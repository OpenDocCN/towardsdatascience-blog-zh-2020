<html>
<head>
<title>Python: The Boolean confusion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python:布尔混淆</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-the-boolean-confusion-f7fc5288f0ce?source=collection_archive---------7-----------------------#2020-01-05">https://towardsdatascience.com/python-the-boolean-confusion-f7fc5288f0ce?source=collection_archive---------7-----------------------#2020-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8265" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">if val</code>和<code class="fe kl km kn ko b">if val is not None</code>不一样！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/5e18887ff31720ae648112ebc2bcd846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wAbWuNYZ30rfmdSC"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">照片由<a class="ae lf" href="https://unsplash.com/@hiteshchoudhary?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Hitesh Choudhary </a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="fa15" class="lg lh iq bd li lj lk dn ll lm ln dp lo jy lp lq lr kc ls lt lu kg lv lw lx ly bi translated">哇，什么？？？Python(不)疯狂。</h2><p id="64e7" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">当你做<code class="fe kl km kn ko b">if val is None</code>时，你调用操作员<code class="fe kl km kn ko b">is</code>，它检查<code class="fe kl km kn ko b">x</code>的身份。即<code class="fe kl km kn ko b">if val is value</code>在这里，<strong class="jp ir">是</strong>运算符检查两个操作数是否指向同一个对象。</p><blockquote class="me mf mg"><p id="99ee" class="jn jo mh jp b jq jr js jt ju jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj kk ij bi translated"><code class="fe kl km kn ko b"><em class="iq">None</em></code>在Python中是单例的，所有的<code class="fe kl km kn ko b"><em class="iq">None</em></code>值也是完全相同的实例。</p></blockquote><h2 id="501a" class="lg lh iq bd li lj lk dn ll lm ln dp lo jy lp lq lr kc ls lt lu kg lv lw lx ly bi translated">但是…</h2><p id="1b4d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">你说<code class="fe kl km kn ko b">if val</code>，python的表现就不一样了。<strong class="jp ir">如果</strong>期望一个布尔值，并且假设<code class="fe kl km kn ko b">val</code>不是布尔值，Python自动调用<code class="fe kl km kn ko b">val</code>的<code class="fe kl km kn ko b">__bool__</code>方法。</p><p id="0d3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe kl km kn ko b">if val</code>实际上是作为<code class="fe kl km kn ko b">if val.__bool__</code>执行的</p><p id="3a96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">令人困惑的是，<code class="fe kl km kn ko b">bool(None)</code>返回<code class="fe kl km kn ko b">False</code>，所以如果<code class="fe kl km kn ko b">val</code>为None。这按预期工作，但还有其他值被评估为<code class="fe kl km kn ko b">False.</code></p><p id="5408" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最重要的例子是空列表。<code class="fe kl km kn ko b">bool([])</code>同样返回<code class="fe kl km kn ko b">False</code>。通常情况下，空单和<code class="fe kl km kn ko b">None</code>有不同的含义；None表示没有值，而空列表表示零值。语义上，他们是不同的。</p><h2 id="331a" class="lg lh iq bd li lj lk dn ll lm ln dp lo jy lp lq lr kc ls lt lu kg lv lw lx ly bi translated">例子</h2><p id="b57b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">为了更好地理解，这里有一些例子。</p><p id="2780" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将针对不同的值执行以下条件块:</p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="be35" class="lg lh iq ko b gy mp mq l mr ms"><strong class="ko ir">if </strong>val:<br/>    print(<strong class="ko ir">'if val'</strong>)</span><span id="422e" class="lg lh iq ko b gy mt mq l mr ms"><strong class="ko ir">if not </strong>val:<br/>    print(<strong class="ko ir">'if not val'</strong>)</span><span id="52c3" class="lg lh iq ko b gy mt mq l mr ms"><strong class="ko ir">if </strong>val <strong class="ko ir">is not None</strong>:<br/>    print(<strong class="ko ir">'if val is not None'</strong>)</span><span id="f37f" class="lg lh iq ko b gy mt mq l mr ms"><strong class="ko ir">if </strong>val <strong class="ko ir">is None</strong>:<br/>    print(<strong class="ko ir">'if val is None'</strong>)</span></pre><p id="110e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 1。无</strong></p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="406c" class="lg lh iq ko b gy mp mq l mr ms">val = None</span><span id="3659" class="lg lh iq ko b gy mt mq l mr ms">if not val<br/>if val is None</span></pre><p id="cd39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 2。【</strong>(空单)</p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="a810" class="lg lh iq ko b gy mp mq l mr ms">val = []</span><span id="d991" class="lg lh iq ko b gy mt mq l mr ms">if not val<br/>if val is not None</span></pre><p id="6269" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 3。[27，37] </strong>(非空列表)</p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="cb4e" class="lg lh iq ko b gy mp mq l mr ms">val = [27, 37]</span><span id="3088" class="lg lh iq ko b gy mt mq l mr ms">if val<br/>if val is not None</span></pre><p id="462d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 4。0 </strong>(数字—零)</p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="deb1" class="lg lh iq ko b gy mp mq l mr ms">val = 0</span><span id="9980" class="lg lh iq ko b gy mt mq l mr ms">if not val<br/>if val is not None</span></pre><p id="bca6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 5。1 </strong>(数字—1/非零)</p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="a8b6" class="lg lh iq ko b gy mp mq l mr ms">val = 1</span><span id="d5a8" class="lg lh iq ko b gy mt mq l mr ms">if val<br/>if val is not None</span></pre><p id="9497" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 6。一个物体</strong></p><pre class="kq kr ks kt gt ml ko mm mn aw mo bi"><span id="c7d5" class="lg lh iq ko b gy mp mq l mr ms">val = object()</span><span id="f863" class="lg lh iq ko b gy mt mq l mr ms">if val<br/>if val is not None</span></pre><p id="a381" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很有趣，对吧？试试看！</p></div></div>    
</body>
</html>