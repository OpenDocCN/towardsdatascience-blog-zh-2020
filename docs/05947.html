<html>
<head>
<title>Exception Handling in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的异常处理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exception-handling-in-python-7f639ce9a3d?source=collection_archive---------40-----------------------#2020-05-15">https://towardsdatascience.com/exception-handling-in-python-7f639ce9a3d?source=collection_archive---------40-----------------------#2020-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3b25" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python中异常处理的介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/101a5ff0abc083f7345e5f282fa16ae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioB9d5hTUF8ZP7e_r-I7Dg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/stainless-steel-close-wrench-on-spanner-210881/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="1c5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">异常处理是以编程方式响应需要特殊处理的异常情况的方法。在python中，为各种各样的错误类型实现异常处理是非常简单的。在本帖中，我们将讨论如何在python中实现异常处理。</p><p id="632e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="ad09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们考虑下面的整数列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="edd8" class="ma mb it lw b gy mc md l me mf">my_list1 = [1, 2, 3, 4, 5]</span></pre><p id="921d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以遍历列表并使用“for-loop”打印元素:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a57c" class="ma mb it lw b gy mc md l me mf">for value in my_list1:<br/>    print(value)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/048e3b09ea54fe8c02aebde66d5acf2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:68/format:webp/1*P58kT4flcEXuA-Q7HAVTYQ.png"/></div></figure><p id="efd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在“for-loop”中，我们还可以执行操作并打印结果。让我们计算每个元素的平方并打印结果；</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="73cc" class="ma mb it lw b gy mc md l me mf">for value in my_lis1t:<br/>    square = value**2<br/>    print(value, square)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/9835ae726db9b66e3f3384aefc024b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:124/format:webp/1*3RVw9QJ3de44KLhQpcwtsg.png"/></div></figure><p id="510e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们的列表也包含字符串值“6”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1db5" class="ma mb it lw b gy mc md l me mf">my_list2 = [1, 2, 3, 4, 5, '6']</span></pre><p id="131a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们试着计算这个新列表中每个元素的平方。这将返回一个“类型错误”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c223" class="ma mb it lw b gy mc md l me mf">for value in my_list2:<br/>    square = value**2<br/>    print(value, square)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/a26b951ba3e22e01668793684dbc7d24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFMKkYsKv4aBnr5F_veS0g.png"/></div></div></figure><p id="eb3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该错误指定了有问题的代码行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5533" class="ma mb it lw b gy mc md l me mf">square = value**2</span></pre><p id="89c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">引发了“TypeError”，因为“**”幂运算符不支持操作数“str”。假设我们希望我们的代码能够处理字符串值的整数而不抛出错误。这就是异常处理发挥作用的地方。我们可以使用python关键字<strong class="lb iu"> try </strong>和<strong class="lb iu"> except </strong>来处理“类型错误”。首先，让我们<strong class="lb iu">尝试</strong>平方并打印每个值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1f5b" class="ma mb it lw b gy mc md l me mf">for value in my_list2:<br/>    try:<br/>        square = value**2<br/>        print(value, square)</span></pre><p id="73a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们得到一个“类型错误”时，我们使用<strong class="lb iu"> except </strong>关键字来处理“类型错误”。由于字符串包含数值，我们可以使用' int()'方法将字符串转换为整数，并计算异常内的平方:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5f03" class="ma mb it lw b gy mc md l me mf">for value in my_list2:<br/>    try:<br/>        square = value**2<br/>        print(value, square)<br/>    except(TypeError):<br/>        square = int(value)**2    <br/>        print(value, square)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/1a789cd2a45344777f959c12e72c99e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/1*piwI6In8oov6vebW10Vv3g.png"/></div></figure><p id="2c86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得注意的是，我们处理错误的方式很大程度上取决于错误类型和我们正在处理的数据类型。</p><p id="a3ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，假设我们的列表包含一个单词或类似列表的另一种类型。我们希望能够处理这些错误，而不让我们的代码产生任何输出。让我们考虑以下包含字符串' ## '的列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3bb4" class="ma mb it lw b gy mc md l me mf">my_list3 = [1, 2, 3, 4, 5, '##']</span></pre><p id="6695" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们尝试循环这个新列表并计算其平方，我们会得到一个“ValueError”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b57a" class="ma mb it lw b gy mc md l me mf">for value in my_list3:<br/>    try:<br/>        square = value**2<br/>        print(value, square)<br/>    except(TypeError):<br/>        square = int(value)**2    <br/>        print(value, square)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/eb8455c4aeb2c674cc0d587157889e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixqdmYHnzkNAw8KN017yhg.png"/></div></div></figure><p id="430c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个错误是说我们不能将字符串“##”转换成整数。我们需要为这种错误类型编写额外的处理。例如，我们可以用一些填充值替换字符串，如0或“NaN”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="037c" class="ma mb it lw b gy mc md l me mf">import numpy as np<br/>for value in my_list3:<br/>    try:<br/>        square = value**2<br/>        print(value, square)<br/>    except(TypeError):<br/>        square = np.nan<br/>        print(value, square)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/1248970131fe56e351850f83b09c6b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:180/format:webp/1*_CRo3A0RpIqh0QooVBqeCw.png"/></div></figure><p id="c6a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们考虑另一个异常处理的例子。假设我们有以下包含编程语言的字符串列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9dfd" class="ma mb it lw b gy mc md l me mf">my_list4 = ['python c++ java',  'SQL R scala', 'pandas keras sklearn']</span></pre><p id="1c20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用“split()”方法来拆分字符串，并使用“+”运算符添加文本“is awesome ”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="09dd" class="ma mb it lw b gy mc md l me mf">for value in my_list4:<br/>    print([i +' is awesome' for i in value.split()])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/93f88099b02720336c3a37cbef00e0ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mINNryEZ-SzLOd9Xw1yRgA.png"/></div></div></figure><p id="c61b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于“split()”方法是一个字符串对象方法，如果我们的列表中有非字符串值，将会引发“AttributeError”。让我们在列表中添加一个字典，然后再次运行我们的代码:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="df93" class="ma mb it lw b gy mc md l me mf">my_list4 = ['python c++ java',  'SQL R scala', 'pandas keras sklearn', {'language': ''golang'}]<br/>for value in my_list4:<br/>    print([i +' is awesome' for i in value.split()])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/6b54ed4c55b453c7f600644f4ff71fd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1uX0X6WnMA7HHtFHLxQ3UA.png"/></div></div></figure><p id="8425" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该错误指出“dict()”对象没有属性“split()”。让我们编写一些try/except逻辑来处理这个错误:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e9aa" class="ma mb it lw b gy mc md l me mf">my_list4 = ['python c++ java',  'SQL R scala', 'pandas keras sklearn', {'language': 'golang ruby julia'}]<br/>for value in my_list4:<br/>    try:<br/>        print([i +' is awesome' for i in value.split()])<br/>    except(AttributeError):<br/>        print([i +' is awesome' for i in value['language'].split()])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/661b33fd55590ca287d23cb52936288c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HhkoSxQub_gL-0VQDPj4Ag.png"/></div></div></figure><p id="c5f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是我鼓励你自己去研究代码。</p><h1 id="f8f4" class="mp mb it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">结论</h1><p id="fe52" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">总之，在这篇文章中，我们讨论了python中的异常处理。我们展示了如何使用try/except关键字和错误类型来处理数据中的错误值。我们看看处理“类型错误”和“属性错误”的例子。我鼓励您研究其他错误类型以及如何处理它们。附加的错误类型包括“SyntaxError”、“ZeroDivisionError”、“FileNotFoundError”等等。我希望你觉得这篇文章有用/有趣。这篇文章中的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/basic_python/exception_handling.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>