<html>
<head>
<title>3 Ways to Handle Args in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中处理参数的 3 种方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/3-ways-to-handle-args-in-python-47216827831a?source=collection_archive---------3-----------------------#2020-08-30">https://towardsdatascience.com/3-ways-to-handle-args-in-python-47216827831a?source=collection_archive---------3-----------------------#2020-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cf1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">直奔主题的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9eaf4377b50f813e83d5065ed6042c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*obXf3poD8RPbdrnK"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@majapetric?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Maja Petric </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="5d75" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#1 系统模块</h2><p id="a3dc" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Python 中的<code class="fe mo mp mq mr b">sys</code>模块具有<code class="fe mo mp mq mr b">argv</code>功能。当通过终端触发执行时，该功能返回提供给<code class="fe mo mp mq mr b">main.py</code>的所有命令行参数的列表。除了其他参数，返回列表中的第一个元素是<code class="fe mo mp mq mr b">main.py</code>的路径。</p><p id="d841" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">考虑下面这个<code class="fe mo mp mq mr b">main.py</code>的例子</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="bde1" class="kz la it mr b gy nb nc l nd ne">import sys</span><span id="8eec" class="kz la it mr b gy nf nc l nd ne">list_of_arguments = sys.argv</span><span id="9a28" class="kz la it mr b gy nf nc l nd ne">print(list_of_args[0]) <br/>print(list_of_args[1]) <br/>print(list_of_args[2]) <br/>print(list_of_args[3])</span></pre><p id="267b" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">触发<code class="fe mo mp mq mr b">main.py</code>为:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="091f" class="kz la it mr b gy nb nc l nd ne">python main.py first_arg "[second_arg]" "{\"arg\": 3}"</span></pre><p id="1312" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">会返回:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="6624" class="kz la it mr b gy nb nc l nd ne">test.py<br/>first_arg<br/>[second_arg]<br/>{"arg": 3}</span></pre></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="3b5c" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">#2 带有一个大参数的 sys 模块</h2><p id="c7b7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">这是为 Python 代码提供参数的一种简单而强大的方法。您提供了一个单一的“大”参数，而不是提供许多按空格分开的参数。这个大参数是一个字符串字典，其中 dict-keys 表示参数名，dict-values 表示它们对应的值。</p><p id="7dbd" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">因为这个字典参数在 Python 中被表示为一个字符串，所以您应该将其转换为字典。这可以通过使用<code class="fe mo mp mq mr b">ast.literal_eval</code>或<code class="fe mo mp mq mr b">json.loads</code>功能来完成。需要相应地导入<code class="fe mo mp mq mr b">ast</code>或<code class="fe mo mp mq mr b">json</code>模块。</p><p id="5508" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">考虑下面这个<code class="fe mo mp mq mr b">main.py</code>的例子:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="d25a" class="kz la it mr b gy nb nc l nd ne">import sys<br/>import ast<br/><br/>raw_arguments = sys.argv[1]<br/><br/>print(raw_arguments)<br/>arguments = ast.literal_eval(raw_arguments)<br/><br/>print(arguments['name']) # John<br/>print(arguments['surname']) # Doe<br/>print(arguments['age']) # 22</span></pre><p id="4afc" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">触发<code class="fe mo mp mq mr b">main.py</code>为:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="dc13" class="kz la it mr b gy nb nc l nd ne">python main.py "{\"name\": \"John\", \"surname\": \"Doe\", \"age\": 22}"</span></pre><p id="d652" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">会返回:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="b546" class="kz la it mr b gy nb nc l nd ne">{"name": "John", "surname": "Doe", "age": 22}<br/>John<br/>Doe<br/>22</span></pre></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h2 id="8b7c" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"># 3 arg parse 模块</h2><p id="3ca7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如果您想为您的应用程序提供一个合适的命令行界面，那么<code class="fe mo mp mq mr b">argparse</code>就是您需要的模块。这是一个完整的模块，它提供了开箱即用的参数解析、帮助消息以及在参数被误用时自动抛出错误。这个模块预装在 Python 中。</p><p id="e07e" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">为了充分利用<strong class="lx iu"> argparse 提供的功能，</strong>需要一些时间来掌握。作为开始，考虑以下<code class="fe mo mp mq mr b">main.py</code>的例子:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="cd30" class="kz la it mr b gy nb nc l nd ne">import argparse<br/><br/>parser = argparse.ArgumentParser(description='Personal information')</span><span id="a5ab" class="kz la it mr b gy nf nc l nd ne">parser.add_argument('--name', dest='name', type=str, help='Name of the candidate')</span><span id="6218" class="kz la it mr b gy nf nc l nd ne">parser.add_argument('--surname', dest='surname', type=str, help='Surname of the candidate')</span><span id="c6d4" class="kz la it mr b gy nf nc l nd ne">parser.add_argument('--age', dest='age', type=int, help='Age of the candidate')<br/><br/>args = parser.parse_args()</span><span id="ee06" class="kz la it mr b gy nf nc l nd ne">print(args.name)<br/>print(args.surname)<br/>print(args.age)</span></pre><p id="9cc8" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">在初始化一个<code class="fe mo mp mq mr b">ArgumentParses</code>的对象后，我们使用<code class="fe mo mp mq mr b">add_argument</code>函数添加所有期望的参数。该函数接收多个参数，其中包括<em class="nn">参数名称</em>(例如<code class="fe mo mp mq mr b">--name</code>)<em class="nn">目标变量</em>、<em class="nn">预期数据类型、</em>、要显示的<em class="nn">帮助消息</em>等。</p><p id="1aa2" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">触发<code class="fe mo mp mq mr b">main.py</code>为:</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="5afb" class="kz la it mr b gy nb nc l nd ne">python main.py --name John --surname Doe --age 22</span></pre><p id="773c" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">会回来</p><pre class="kj kk kl km gt mx mr my mz aw na bi"><span id="7b97" class="kz la it mr b gy nb nc l nd ne">John<br/>Doe<br/>22</span></pre><p id="6539" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">要找到关于这个模块的更多信息，请看一下<a class="ae ky" href="https://docs.python.org/2/library/argparse.html" rel="noopener ugc nofollow" target="_blank"> argparse 文档</a>。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><h1 id="ef2d" class="no la it bd lb np nq nr le ns nt nu lh jz nv ka ll kc nw kd lp kf nx kg lt ny bi translated">结论</h1><p id="24e1" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">很多时候，您需要向 Python 脚本传递参数。Python 通过<code class="fe mo mp mq mr b">sys</code>模块提供对这些参数的访问。您可以直接访问<code class="fe mo mp mq mr b">argv</code>功能并处理您自己的参数解析，或者您可以使用其他模块作为<code class="fe mo mp mq mr b">argparse</code>来为您完成这项工作。</p><p id="5657" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">在我的日常编码生活中，我使用小脚本中的<em class="nn"> sys 和</em>arg parse 时，我是它们的唯一用户/维护者。</p><p id="f995" class="pw-post-body-paragraph lv lw it lx b ly ms ju ma mb mt jx md li mu mf mg lm mv mi mj lq mw ml mm mn im bi translated">编码快乐！</p><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/150-concepts-heard-in-data-engineering-a2e3a99212ed"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">数据工程中听到的 150 多个概念</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">面向数据工程师的综合词汇表</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ks oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/how-to-generate-ms-word-tables-with-python-6ca584df350e"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">如何用 Python 生成 MS Word 表格</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">30 秒内自动生成报告</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq ks oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/5-scenarios-where-beginners-usually-misuse-python-98bac34e6978"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">新手通常误用 Python 的 5 种场景</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">更好地利用 Python</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq ks oc"/></div></div></a></div></div></div>    
</body>
</html>