# 如果您的 Python 代码抛出错误，请先检查这些内容

> 原文：<https://towardsdatascience.com/if-your-python-code-throws-errors-check-these-things-first-a93d8a9036f1?source=collection_archive---------26----------------------->

## 忘记关闭大括号或添加缩进？许多错误都有一个简单的修复方法

![](img/15e0c33daeb99aba1624455d88281a0c.png)

Python 不需要成为你的敌人。作者图片

![F](img/6c6b353ec68b1a29419be8a008cc3f16.png)  F 快失败，早失败——我们都听说过[这句格言](https://hbr.org/2011/04/failing-by-design)。尽管如此，当你写了一段漂亮的代码，却发现它并不像你预期的那样工作时，还是会很沮丧。

这就是单元测试的用武之地。检查你的每一段代码有助于你定位和修复你的错误。

但并非所有的缺陷都是一样的。有些 bug 是意想不到的，根本看不出来，即使是有经验的开发人员也很难修复。这些更有可能发生在大型复杂的项目中，尽早发现它们可以为您节省大量的时间。

其他错误是微不足道的，比如当你忘记了一个右括号或者弄乱了一些缩进。它们很容易修复，但是很难发现，特别是当你已经在代码上工作了一段时间或者在深夜的时候。

一旦你发现了这样一个 bug，这就有点像掌脸时刻了。你可能会因为没有早点发现这一点而自责不已——并且你会想当初为什么会犯下如此愚蠢的错误。他们也不是你希望你的同事在你之前发现的那种错误。

[](/4-common-mistakes-python-beginners-should-avoid-89bcebd2c628) [## Python 初学者应该避免的 4 个常见错误

### 我很艰难地学会了，但你不需要

towardsdatascience.com](/4-common-mistakes-python-beginners-should-avoid-89bcebd2c628) 

# 首先要检查的愚蠢但常见的错误

我不能说这个列表涵盖了你可能会犯的所有愚蠢的错误。然而，定期使用它至少可以帮助您消除最常见的错误。

## 忘记右括号了吗？

每个人都会遇到这种情况——你快乐地编码，在编码的过程中，你忘记了关闭数组、参数列表或任何你正在处理的东西。

一些开发人员一打开右大括号就键入右大括号，然后填充中间的空格。大多数现代 IDE 也自动关闭牙套——因此，如果忘记牙套是你的一种慢性病，你可能会考虑放弃你的旧 IDE。

## 你的结肠呢？

嘿，我们每个人都会遇到这种事。您正在构造一个新的类，由于它很复杂，您在键入代码时已经在考虑类的内容了。哎呀，你忘了结尾的冒号:

```
class SillyMistake():
    def AvoidThis():
        print("Don't do silly mistakes!")
```

一个很好的经验是，如果你要增加一行的缩进量，你需要在它前面的那一行加一个冒号。

## 你是否混淆了等式和赋值运算符？

什么时候用`=`，什么时候用`==`？根据经验，如果你正在检查或比较两个值，你将使用`==`。另一方面，如果你给一个变量赋值，你将使用`=`。

![](img/a42e833d522fd882bd967a0849e9f88a.png)

在你对错误感到恐慌之前，检查一下那些微不足道的错误。作者图片

## 你是否混淆了易变的表达式？

看看这个:

```
def NotRecommendedCode(item, new=[]):
    new.append(item)
```

这本身没有错，但是如果你不小心的话，你会遇到麻烦的。将参数列表中的数组`[]`定义为可变的意味着它将被[修改以用于将来的调用](https://deepsource.io/blog/python-common-mistakes/)。

但是你可能每次都想从一个空数组开始。这更好:

```
def RecommendedCode(item, new=None):
    if new is None:
        new **=** []
    new.append(item)
```

## Python 是区分大小写的，记得吗？

这是非常琐碎的事情，但却经常发生。假设您已经定义了变量`CamelBucket`，稍后在代码中调用`camelbucket`。

没用，是吧？很有可能，您非常清楚 Python 是区分大小写的，但是您只是忘记了按 shift 键。

大多数现代的 ide 可以通过提出聪明的建议来帮助你避免这个错误。因此，如果你容易打字错误，你可以考虑升级你的文本编辑器。

[](/why-developers-are-falling-in-love-with-functional-programming-13514df4048e) [## 为什么开发人员会爱上函数式编程

### 从 Python 到 Haskell，这种趋势不会很快消失

towardsdatascience.com](/why-developers-are-falling-in-love-with-functional-programming-13514df4048e) 

## 你在迭代列表的时候修改列表了吗？

这可能发生在每个初级开发人员身上:你已经建立了一个列表，现在你想改变一些事情。没什么大不了的，对吧？

不对。考虑一下这个:

```
mylist = [i for i in range(10)]
for i in range(len(mylist)):
    if i%2==0: del mylist[i]
```

剧透:这抛出了一个错误，因为你最终迭代了一个不再存在的列表中的条目。与其从现有列表中删除，不如考虑写入一个新列表。

## 你有循环模块依赖吗？

这是如此琐碎，但也是[常见的](https://www.toptal.com/python/top-10-mistakes-that-python-programmers-make):在一个文件中，比如说`bug.py`，你写`import anotherbug`。在另一个文件`anotherbug.py`中，你写`import bug`。

这是行不通的——计算机怎么知道哪个文件包含在哪个文件中呢？你可能知道这一点，但这样做是偶然的。没关系，但是尽快修理它！

## 你还没有像 Python 的标准库那样命名你的模块，对吧？

关于模块的另一件事:Python 附带了大量惊人的库模块。但是如果你需要创建你自己的，一定要给他们一个原始的名字。

例如，定义一个名为`numpy.py`的模块会导致混乱。如果您不确定可以使用哪些名称，这里有 Python 标准库的完整列表[。](https://docs.python.org/3/library/)

![](img/016f81c22b04aad627ce139d80f49392.png)

一天一个好习惯，代码医生远离我。作者图片

# 如何避免愚蠢的错误

你从错误中学习。作为一名初级开发人员，您可能每天都在犯这样的错误。但是随着时间的推移，它们变得越来越少。

你也可以更进一步，养成一些健康的习惯，这样你就不会犯小错误了。这些只是许多技巧中的一小部分，但是它们可以帮助你避免许多错误。

## 总是初始化变量

如果你[定义了一个变量](https://learning-python.com/reconstruct-learn_python.html)并且直到后来才赋值，Python 代码可以完美地工作。因此，每次在定义时初始化它们似乎很麻烦。

但是不要忘记你也是人，因此你很容易忘记哪个变量被赋值了，哪个没有。此外，初始化变量迫使您考虑您正在处理的变量的类型，这可能会防止以后出现错误。

这就是为什么许多经验丰富的开发人员用默认值初始化每个变量，如`0`、`None`、`[]`、`""`等等。

当然，如果你只是想绑定一个小的独立脚本，而不是在一个庞大的项目上工作，你可以允许自己快速草率地做事。但是当事情变得复杂时，记得要勤奋。

## 用大括号调用函数，避免麻烦

又是牙套。不知何故，它们与人类大脑的迟钝不相容。

在 Python 中，你总是需要像这样调用函数:`callingthisfunction()`，而不是像这样:`notcallingthisfunction`，不管有没有参数。听起来微不足道，但并不总是如此！

例如，如果您有一个名为`file`的文件，并且您想用 Python 关闭它，那么您将编写`file.close()`。但是，如果您编写`file.close`，代码将运行而不会抛出错误——除了它不会关闭文件。试着在一个有数千行代码的项目中找出这样的错误…

经过几天的练习，它变得相当自动，所以从今天开始:函数总是用括号调用！

![](img/f98b02c42562bb5fc109d7c5c52420a1.png)

虫子可能会令人生畏，但随着时间的推移，你会学会避开它们。作者图片

## 导入模块时不要使用扩展

同样，这是相当琐碎的，但经常被初学者忘记。如果你正在调用一个模块，你将永远不会使用一个扩展，不管它是来自 Python 标准库还是其他地方。

因此，请注意类似这样的语句:

```
import numpy.py         *# don't do that!!!*
```

删除那个`.py`扩展名，并像避开臭味一样避开它。扩展和导入不能一起工作。

## 一致缩进

同样，您可能知道自己需要在整个文件中以同样的方式建立索引。但是，当你与他人合作或在深夜时，这仍然是一个常见的陷阱。

在开始编码之前，决定是使用制表符还是空格，以及使用多少空格。最常见的约定是四个空格，但是您可以做任何最适合您的事情——只要您在整个文档中保持它。

另一方面，如果您在一行中使用空格，在另一行中使用制表符，有时 Python 不会像您预期的那样处理它。我知道这看起来像是一个愚蠢的工作，但是尽你所能努力去做。

[](/object-oriented-programming-is-dead-wait-really-db1f1f05cc44) [## 面向对象编程已经死了。等等，真的吗？

### 函数式编程的鼓吹者们，你们把枪口对准了错误的敌人

towardsdatascience.com](/object-oriented-programming-is-dead-wait-really-db1f1f05cc44) 

# 底线:为你自己和你的同事避免面部表情

快速失败，尽早失败——但不要愚蠢地失败。每个人都会犯错误，但还是要避免那些愚蠢的错误，或者至少快速改正它们。

不仅仅是为了进步。这也是为了避免 face palm-时刻，你会因为没有早点发现错误而自责。

这也是为了不失去你的名声——谁愿意带着一个看似复杂的问题跑去找同事或经理，却发现这个问题其实很容易解决？

很有可能你已经犯了我在过去提到的一些错误。冷静，伙计，我也有——我们是人。

关键是，如果您的代码以意想不到的方式运行，您将希望首先检查琐碎的事情。然后，如果您的代码仍然不能正常工作，您可以随时 ping 您的同事。