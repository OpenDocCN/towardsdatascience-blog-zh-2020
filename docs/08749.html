<html>
<head>
<title>A Beginner’s Guide to Instrumental Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">工具变量初学者指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-beginners-guide-to-using-instrumental-variables-635fd5a1b35f?source=collection_archive---------22-----------------------#2020-06-24">https://towardsdatascience.com/a-beginners-guide-to-using-instrumental-variables-635fd5a1b35f?source=collection_archive---------22-----------------------#2020-06-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5730" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当他们可能成为你的超人时[包括R代码]</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/82fcedac871f60e678199b2455e1840d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsC_gNhCqbsVK-hclCxixg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">埃斯特万·洛佩兹在<a class="ae ky" href="/s/photos/superman?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="ca3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为一名大学生，我学习经济学，这意味着我研究了<em class="lv">很多回归。</em>这基本上是课程的90%(当然，当我们不讨论供需曲线时)。<a class="ae ky" href="https://pubs.aeaweb.org/doi/pdf/10.1257/000282802762024665" rel="noopener ugc nofollow" target="_blank">腐败对相扑的影响</a>？<em class="lv">回归。</em><a class="ae ky" href="https://www.nber.org/papers/w4509.pdf" rel="noopener ugc nofollow" target="_blank">最低工资变动对新泽西州一家温蒂的影响</a>？<em class="lv">回归。</em>又或许<a class="ae ky" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2550498" rel="noopener ugc nofollow" target="_blank"> <em class="lv">僵尸律师天启</em> </a>更是你的速度(还好，不是回归，不过标题很酷)。</p><p id="3143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管怎样，我的大学生涯教会了我三件事:1)供给和需求，2)回归是生活，3)经济学家认为它们非常可笑。</p><p id="a1c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是如果你的回归失败了呢？如果它没有预测到它应该预测的事情，因为你的X与你没有数据的事情联系在一起，那该怎么办？</p><p id="176f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，我的朋友们，那就是你可能要考虑使用静脉注射的时候了。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><blockquote class="md me mf"><p id="f29d" class="kz la lv lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated">一个<strong class="lb iu">工具变量是第三个变量</strong>，Z，当你有内生变量时用于回归分析，这些变量受模型中其他变量的影响。换句话说，您可以用它来解释变量之间的意外行为。使用工具变量来识别隐藏的(未观察到的)相关性可以让您看到解释变量和响应变量之间的真实相关性，Y. — <a class="ae ky" href="https://www.statisticshowto.com/instrumental-variable/" rel="noopener ugc nofollow" target="_blank"> <em class="it">统计如何</em> </a></p></blockquote><p id="e858" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把其中的一些分解成我们能理解的部分。</p><h2 id="5c80" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">第1部分:线性回归方程</h2><p id="1c74" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">假设你有两个你认为相关的变量，教育和工资(X和Y)。你想调查教育是否会导致更高的工资，即X → Y。这很有道理。你写<strong class="lb iu"> <em class="lv"> y = α + βx + </em> ε </strong>，然后，满足于自己，用剩下的时间狂吃<em class="lv">权力的游戏。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3d10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等等。慢点。首先让我们澄清一些事情。</p><ul class=""><li id="780e" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><strong class="lb iu"><em class="lv">【α=</em>“起点”。</strong>并非所有回归都从零开始；例如，如果X是教育水平，Y是工资，你不会从零教育水平开始(T4)，因为现在大多数人不会在2年级、3年级、4年级甚至9年级后辍学(耶，进步！).你可能会考虑从高中文凭开始的教育，一年一次，截距解释了这一点。</li><li id="6dc4" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu"><em class="lv">β=</em>X影响y的权重。</strong>例如，如果1年的教育预计会带来100美元的额外工资，那么系数<em class="lv"> β </em>就是100。β指定了多受一年教育能给你带来多少。</li><li id="f880" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu"> ε =误差项。经济学家喜欢使用花哨的行话和希腊语，就像他们喜欢时髦的标题一样，所以ε只是错误的一个花哨的“e”。这吸收了X不能完美映射到Y的任何东西；很少会出现一对一映射的完美直线。</strong></li></ul><p id="5d4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经把<strong class="lb iu"> <em class="lv"> y = x </em> </strong>翻译成了<strong class="lb iu"> <em class="lv"> y = α + βx + </em> ε。</strong>现在的问题与<em class="lv">理论有关，如果</em>X真的导致y。教育导致工资，这是有道理的；但是，如果努力接受高等教育的人也将获得更高的工资，因为他们是人口中更有活力、更有抱负、更有动力的一部分，那又会怎样呢？</p><p id="67b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是个大问题。为什么？因为不是X导致了Y，而是别的什么导致了Y，那个“别的什么”目前被吸收在误差项里，因为我们<em class="lv">无法衡量野心</em>。这违反了线性回归的基本假设。经济学家称之为<em class="lv">内生性。</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/80d5a59651067418f46ee1d8f273178d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MblDcLp3NdLZOZH_0XfPg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@exxteban?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">埃斯特万·洛佩兹</a>在<a class="ae ky" href="/s/photos/lego-batman?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="133a" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">第2部分:选择工具变量</h2><p id="3cc7" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我们想用<strong class="lb iu"> <em class="lv"> y = α + βx + </em> ε </strong>，但很快就清楚了，x、<em class="lv">教育</em>和y、<em class="lv">工资</em>，也受到z、<em class="lv">野心/驱动力/那种创造出迈克尔·乔丹这样的人的神奇品质的影响。</em>既然我们无法衡量抱负并将其转化为一个整洁的CSV，我们该怎么办？</p><p id="dbd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们用别的东西，一些<em class="lv">可测量的东西，</em>与教育(X)相关，但与误差项(ε)无关。</p><p id="959c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">这些是IV的要求:1)它们不能与错误(外生性)相关，2)它们<em class="lv">与X(教育)相关</em>。</strong></p><p id="1f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，早期吸烟行为是一个很好的工具。为什么？因为早期吸烟行为和受教育年限是相关的。另一方面，早期吸烟行为和野心则不是；许多成功人士都有吸烟的艰难童年。事实上，Matt Dickson博士已经发表了一篇关于这种效应的论文。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/3adfc9a8b89c9e213af80d4ce0045496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q8umrI4pJlWEHa_kPAhAAg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我在例子中使用了太多表情符号吗？🤷*表情符号中的耸肩*</p></figure><h2 id="b0a4" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">第3部分:通过2SLS使用工具变量</h2><p id="95bc" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">现在你有了X ( <em class="lv">学历</em>)，Y ( <em class="lv">工资</em>)，Z ( <em class="lv">早期吸烟行为</em>)的数据。你已经宣布Z将成为一个很好的工具变量来处理x的内生性遗传。还有一个问题:<strong class="lb iu">我们如何在回归方程中包含一个工具变量？</strong></p><p id="8949" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将通过创建<em class="lv">两个</em>方程来做到这一点，这被称为<strong class="lb iu">两阶段最小二乘(2SLS) </strong>估计。它所实现的只是将教育变量稍微重新定义为早期吸烟行为的函数:</p><ul class=""><li id="d2b0" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><strong class="lb iu"> <em class="lv">教育= c + d*(早期吸烟行为)+ v </em> </strong></li><li id="44ac" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu"> <em class="lv">工资</em>=<em class="lv">α+β*学历+ </em> ε </strong></li></ul><p id="d772" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，<strong class="lb iu"> c </strong>是起点(像<strong class="lb iu"> <em class="lv"> α)，d </em> </strong>是权重(像<strong class="lb iu"><em class="lv"/></strong>)，而<strong class="lb iu"><em class="lv"/></strong>是误差(像<strong class="lb iu"> ε </strong>)。我们首先将<em class="lv">教育</em>变量重新校准为<em class="lv">早期吸烟行为</em>的函数，然后将我们的新定义代入原始方程。这就是为什么它被称为两阶段最小二乘法；我们创建了两个方程来正确回答第一个方程。</p><h2 id="7caf" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">第4部分:R中的分析</h2><p id="17ab" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">你现在已经有了理解什么是工具变量，以及我们如何在IRL和2sl中使用它所需的所有理论。在R中运行分析非常简单:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="4195" class="mj mk it oa b gy oe of l og oh">install.packages("AER")          # library with ivreg() function<br/>library(AER)</span><span id="807d" class="mj mk it oa b gy oi of l og oh">reg_1 = ivreg(wages ~ education | early_smoking_age, data = _source)</span></pre><p id="7100" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用人类的话来说；这种回归是关于工资的教育，早期吸烟年龄被用作一种工具。正在使用的数据源称为 <code class="fe oj ok ol oa b"><em class="lv">_source</em></code> <em class="lv">。我将这个回归命名为</em> <code class="fe oj ok ol oa b"><em class="lv">reg_1</em></code> <em class="lv">，这样我以后可以调用它。</em></p><p id="86b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">整个<code class="fe oj ok ol oa b">ivreg()</code>文档在<a class="ae ky" href="https://www.rdocumentation.org/packages/AER/versions/1.2-9/topics/ivreg" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/a4e05e20d7153d8bc7f812e3309f4159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DkiUxWQfZ64zYU3rTI1tKQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@_alikokab_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿里·科卡布</a>在<a class="ae ky" href="/s/photos/batman?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="0b64" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated">第五部分:结论</h2><p id="6387" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">我花了<em class="lv">很长的</em>时间才明白一个工具变量的用途，或者说如何挑选一个很棒的；在完全理解之前，我甚至在2019年UChicago计量经济学比赛中获得了<a class="ae ky" href="https://lsa.umich.edu/econ/news-events/all-news/student-news/undergraduate-econ-team-place-second-at-annual-uchicago-economet.html" rel="noopener ugc nofollow" target="_blank">第二名。出于这个原因，如果你不完全理解静脉注射的一切，那也没什么，完全正常。</a></p><p id="db14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望你现在对使用工具变量有了更多的了解；如果你有任何想法，请在下面评论(或留下掌声)。感谢阅读！❤️</p><p id="4ac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">—阿曼达</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h2 id="2a2c" class="mj mk it bd ml mm mn dn mo mp mq dp mr li ms mt mu lm mv mw mx lq my mz na nb bi translated"><strong class="ak">参考文献</strong></h2><p id="d496" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">大卫·卡德和艾伦·克鲁格，《最低工资和就业:新泽西和宾夕法尼亚快餐业的案例研究》，1993年10月(<a class="ae ky" href="https://www.nber.org/papers/w4509.pdf" rel="noopener ugc nofollow" target="_blank">https://www.nber.org/papers/w4509.pdf</a>)</p><p id="2801" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">马特·迪克森，重新审视教育对工资的因果影响，2009年9月(<a class="ae ky" href="http://ftp.iza.org/dp4419.pdf" rel="noopener ugc nofollow" target="_blank">http://ftp.iza.org/dp4419.pdf</a>)</p><p id="690f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">马克·达根和史蒂芬·列维特，《胜利不是一切:相扑中的腐败》，2000年7月(<a class="ae ky" href="https://pubs.aeaweb.org/doi/pdf/10.1257/000282802762024665" rel="noopener ugc nofollow" target="_blank">https://pubs.aeaweb.org/doi/pdf/10.1257/000282802762024665</a>)</p><p id="7df6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">黄文雄和科里·罗森，《僵尸律师启示录》，2014年8月(<a class="ae ky" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2550498" rel="noopener ugc nofollow" target="_blank">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2550498</a>)</p></div></div>    
</body>
</html>