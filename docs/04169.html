<html>
<head>
<title>Which Countries React Similar to COVID-19? Machine Learning provides the Answer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">哪些国家的反应与新冠肺炎相似？机器学习提供了答案</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/which-countries-react-similar-to-covid-19-machine-learning-provides-the-answer-5971ec2f6f31?source=collection_archive---------12-----------------------#2020-04-16">https://towardsdatascience.com/which-countries-react-similar-to-covid-19-machine-learning-provides-the-answer-5971ec2f6f31?source=collection_archive---------12-----------------------#2020-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="777c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">看看你的国家(或美国的州)和它的同行相比表现如何。了解聚类分析的实际应用——使用 UMAP 投影和 HDBSCAN。</h2></div><p id="8c70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">【2020-2019-04 更新:添加 GitHub 库，见故事底部】</em></p><p id="94bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi lf translated"><span class="l lg lh li bm lj lk ll lm ln di">我</span>经常想知道不同国家在冠状病毒病例统计方面有什么不同。往往只考虑绝对数字。因此，较小的国家(如瑞士、比利时)被忽略了。在这个故事中，我主要分析与人口规模相关的案例。截至今天(2020-04-16，来源 JHU)的<strong class="kk iu">铁的事实是:</strong></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/b6311902044bed6c7d822a920b601d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uGmHQXnaGspSYZY7VnmzhQ.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">每百万居民死于新冠肺炎的人数。人口规模至少为 100 万的所有国家、美国各州和中国各省的前 25 名。红色代表国家，灰色代表州和省。</p></figure><p id="227f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">纽约州在这份令人悲伤的名单中遥遥领先，紧随其后的是欧洲国家西班牙、比利时和意大利。在前 25 名中，中国只有一个省份。<strong class="kk iu">湖北</strong>(第 23 位)每百万死亡 56 人，约为纽约的十分之一。</p><p id="343c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提醒一下——将国家分成更小的区域总是会导致更多的极端值。对意大利来说，这将揭示出每百万人中有 1055 人死亡的伦巴第大区</p><blockquote class="me"><p id="4693" class="mf mg it bd mh mi mj mk ml mm mn ld dk translated">但是动力呢？是不是有些国家反应比较早，有些国家比较晚？有没有一些模式？我们可以向其他国家学习吗？</p></blockquote><p id="cb91" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">为了回答这些问题，我采用了数据驱动的方法。<a class="ae mt" href="https://en.wikipedia.org/wiki/Unsupervised_learning" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">无监督学习</strong> </a>技术应该有助于获得一些新的洞察力。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="d234" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个故事分为以下四个部分:</p><ol class=""><li id="805e" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld ng nh ni nj bi translated"><strong class="kk iu">数据源</strong> <br/>所用数据源的描述。</li><li id="c739" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">疫情爆发后的病例数发展</strong> <br/>众所周知的情节——更新并包括美国各州&amp;中国各省。</li><li id="f99a" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">特性工程</strong> <br/>关于最终分析中要使用的特性的细节。</li><li id="b078" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">聚类分析</strong> <br/>通过无监督学习进行国家间的比较。</li></ol></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="68d7" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">1.数据源</h1><h2 id="201b" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">案例统计</h2><p id="82d3" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">像许多其他人一样，我；))，对于案例统计，我依靠的是<a class="ae mt" href="https://github.com/CSSEGISandData/COVID-19/tree/master/csse_covid_19_data/csse_covid_19_time_series" rel="noopener ugc nofollow" target="_blank">约翰·霍普斯金大学</a>的 GitHub 知识库的数据。他们按国家和日期发布包括确诊病例、康复和死亡的时间序列。对于一些国家，如美国、加拿大、中国、澳大利亚，他们甚至更进一步，增加了地区甚至直辖市。</p><p id="518a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇报道中，我们坚持使用国家数据。仅对于美国和中国，我还加载了单个州和省。</p><h2 id="f7ec" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">人口</h2><p id="a160" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">人口规模取自三个不同的来源。国家一级的数字取自世界银行公开数据 API。还有一个<a class="ae mt" href="https://github.com/mwouts/world_bank_data" rel="noopener ugc nofollow" target="_blank"> Python 包</a>适合这个工作。</p><p id="82da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于中国的省份，我找不到任何方便的 API。因此，我将维基百科上的<a class="ae mt" href="https://en.wikipedia.org/wiki/Provinces_of_China#List_of_province-level_divisions" rel="noopener ugc nofollow" target="_blank">表复制到一个制表符分隔的文本文件中。一个定制的导入器脚本将这些乱七八糟的东西转换成了一个漂亮的熊猫数据帧。</a></p><p id="0c78" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">美国各州的人口规模已经包含在死亡人口的美国时间序列文件中(<a class="ae mt" href="https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv" rel="noopener ugc nofollow" target="_blank"><em class="le">time _ series _ covid 19 _ deaths _ US . CSV</em></a>’)。这个文件是 JHU 数据库的一部分。</p><p id="e966" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在连接了所有这些数据集之后，我得到了一个熊猫数据框架，包括了我需要的所有数据。以下命令提取 4 月 11 日的随机样本，排除非常小的国家(&lt; 1 million):</p><pre class="lp lq lr ls gt oy oz pa pb aw pc bi"><span id="544b" class="oh nq it oz b gy pd pe l pf pg">data[(data.date == '2020-04-11') &amp; (data.Population &gt;= 1000000)] \<br/>    .sample(15)</span></pre><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi ph"><img src="../Images/db1074fbdfa90ed2cfbb99cf541a0436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShrDONZ8XlHJtST5q6EmXw.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">Random sample of the imported data. <strong class="bd pi">每行代表一个国家在给定日期的州</strong>(列‘date’)。对于美国和中国，也包括州/省级别的数据。彩色框代表国家数据(=红色)和地区数据(=灰色)。</p></figure><h1 id="dc59" class="np nq it bd nr ns pj nu nv nw pk ny nz jz pl ka ob kc pm kd od kf pn kg of og bi translated">2.爆发后的病例数发展</h1><p id="90b0" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">下面的图表是众所周知的。我添加这些图的主要原因是我对爆发日期的定义略有不同。在下一节描述“机器学习”特性时，我也会用到这个定义。看:</p><ul class=""><li id="bf30" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld po nh ni nj bi translated"><strong class="kk iu"> x 轴</strong>表示病毒爆发以来的<strong class="kk iu">天数。然而，我们没有将疫情定义为病例数超过 100 的那一天，而是将其定义为病例数超过每百万居民 5 例的<strong class="kk iu">日</strong>。统计数据表明人口为 2000 万。</strong></li><li id="0fcc" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated"><strong class="kk iu"> y 轴</strong>显示累计的<strong class="kk iu">确诊病例数，相对于对数轴上的人口规模</strong>。</li></ul><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pp"><img src="../Images/a54b4dfd850c231299ef6f4958184cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mInA5tYJCkmAyBezkrf06g.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">自新冠肺炎疫情爆发以来累计确诊病例数(百万分之五以上的一天)。仅显示人口规模至少为 1500 万的国家。</p></figure><p id="0fe8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在欧洲国家中，西班牙领先。然而，所有这些国家在过去几周都放缓了脚步。就这些数字而言，美国作为一个整体，可以与欧洲相媲美。</p><p id="ca86" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">中国和韩国在 3-4 周前拉平了曲线。与这些国家相比，日本的病例数稳步缓慢增长。</p><p id="83ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，美国各州<strong class="kk iu">的情况完全相同。我将 x 轴的下限限定为 10，以使图的右上部分清晰:</strong></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pq"><img src="../Images/8c99d90d96025340b247b24a007893be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kuzlPtU27zCOQNbZWBXRJQ.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">自新冠肺炎疫情爆发以来累计确诊病例数(百万分之五以上的一天)。仅显示人口至少为 500 万的美国各州。</p></figure><p id="b9da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然一些州远低于全国平均水平(每百万 2000 例，如明尼苏达州为 300 例)，但纽约和新泽西已经达到每百万 8000-9000 例。所有的曲线都降低了对数轴上的速度，但在这个已经很高的水平上加倍数字是不同的…</p><h1 id="0563" class="np nq it bd nr ns pj nu nv nw pk ny nz jz pl ka ob kc pm kd od kf pn kg of og bi translated">3.特征工程</h1><p id="bed6" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">考虑到有限的数量和数据的异构性，在新冠肺炎数据集上应用机器学习方法并不简单:</p><ul class=""><li id="85fb" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld po nh ni nj bi translated">首先，每个国家收集数据的方式非常不同。对病例有不同的定义，数据收集滞后，一些国家测试更多，等等。此外，死亡的原因也不尽相同。</li><li id="ede6" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated">第二，全球只有大约 200 个国家。此外，为了执行数据驱动的方法，没有确诊病例或确诊病例很少的国家不会增加这一分析的价值。</li></ul><p id="e73f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">自疫情爆发以来，我们总共有大约 60 个国家有超过 3 周的数据。因此，我不得不把更多的精力放在手工制作有用的功能上，而不是完全自动化的方法。让我先解释两个术语，然后是特性本身:</p><h2 id="4c53" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">定义</h2><ul class=""><li id="4f47" class="nb nc it kk b kl ot ko ou kr pr kv ps kz pt ld po nh ni nj bi translated"><strong class="kk iu">疫情</strong> : <br/>如上所述，我将疫情定义为病例数超过每百万居民 5 例的那一天。</li><li id="f6b1" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated"><strong class="kk iu">峰值</strong> : <br/>峰值定义为最近 7 天的平滑平均值达到最高值的那一天。关于平滑的更多信息。</li></ul><h2 id="6eaa" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">特征</h2><p id="3e3f" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">我计算并用于以下聚类分析的特征是:</p><ol class=""><li id="7d73" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld ng nh ni nj bi translated"><strong class="kk iu">早期死亡率</strong> : <br/>疫情发生 14 天后每周死亡人数除以<br/>疫情发生一周内确诊病例数。</li><li id="9110" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">10x</strong>:<br/>从疫情爆发到确诊病例数乘以 10 所需的天数。实际上，这是从百万分之五到百万分之五十的时间段。</li><li id="beca" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">高峰死亡率</strong> : <br/>高峰周死亡人数除以前 14 天的周确诊人数。</li><li id="0fba" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">早期加速度</strong> : <br/>如果<em class="le"> deltaW0W1 </em>确诊病例从疫情爆发一周至之后一周的百分比增量，以及<em class="le"> deltaW1W2 </em>疫情爆发后第 1 周至第 2 周的百分比增量，则加速度为:<br/><em class="le">Early Accel = deltaw1w 2/deltaw0w 1。</em></li><li id="5a95" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="kk iu">电流加速度</strong> : <br/>类似。如果<em class="le"> deltaWt-2Wt </em>从上周到本周确诊病例增加的百分比，<em class="le"> deltaWt-4Wt-2 </em>从当前前第 4 周到第 2 周确诊病例增加的百分比，则加速度为:<br/><em class="le">current Accel = deltaWt-2Wt/deltaWt-4Wt-2。</em></li></ol><p id="10bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">加速度的定义听起来可能很复杂，但实际上它只是速度的变化。如果我们看到案例增加了 20%，然后又增加了 10%，那么加速度就是 1.10 / 1.20 = 0.92。因此，小于 1.0 的值是可以的。</p><h2 id="4176" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">为什么我用一个几何平均数来得到平滑的星期</h2><p id="e3bc" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">我们的病例统计数据具有很强的<strong class="kk iu">周季节性</strong>，这是由周末较少进行测试这一事实造成的。因此，我们需要一个像<a class="ae mt" href="https://en.wikipedia.org/wiki/Moving_average#Simple_moving_average" rel="noopener ugc nofollow" target="_blank">移动平均线</a>这样的平滑器来解释这个事实。我用的是<a class="ae mt" href="https://en.wikipedia.org/wiki/Geometric_mean" rel="noopener ugc nofollow" target="_blank">几何平均</a>。这背后的基本原理是，我们处理一个指数序列。每个周期都加倍的数列，例如:</p><p id="855d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[25，50，<strong class="kk iu"> 100 </strong>，200，400]</p><p id="8cae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得出的算术平均值是 155。相反，几何平均值是 100。正是我们想要的。下面是计算的代码片段:</p><pre class="lp lq lr ls gt oy oz pa pb aw pc bi"><span id="60a9" class="oh nq it oz b gy pd pe l pf pg">def geometric_mean(values):<br/>    return np.exp(np.mean(np.log(values)))</span><span id="1382" class="oh nq it oz b gy pu pe l pf pg">def geometric_simple_moving_average(df, len=7):<br/>    return df.apply(np.log).rolling(len).mean().apply(np.exp)</span></pre><h1 id="b80f" class="np nq it bd nr ns pj nu nv nw pk ny nz jz pl ka ob kc pm kd od kf pn kg of og bi translated">4.聚类分析</h1><h2 id="c1b0" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">方法</h2><p id="e543" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">我选择 HDBSCAN 的 UMAP 投影进行聚类分析有几个原因。首先，<strong class="kk iu">数据不是对称的</strong>，所以基于对称距离的线性方法宁愿失败。</p><p id="c100" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就非线性聚类分析而言，如今 t-SNE 非常普遍。然而，SNE 霸王龙只保留了局部结构，而不是全局结构。相反，对 UMAP 来说，全球距离也是有意义的。这使得可视化对解释更有价值。</p><p id="72ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，但同样重要的是，我想表演一些新的东西。不是旧的 k-means，或者标准的层次结构等等。:)</p><p id="4287" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> UMAP </strong>本身并不直接生成星团。它对新空间进行非线性投影。在这个新的投影中，<a class="ae mt" href="https://hdbscan.readthedocs.io/en/latest/how_hdbscan_works.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> HDBSCAN </strong> </a>可以用来提取集群。</p><p id="3d59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用 UMAP 和 HDBSCAN 进行聚类分析的详细信息和 Python 代码可以在<a class="ae mt" href="https://umap-learn.readthedocs.io/en/latest/clustering.html" rel="noopener ugc nofollow" target="_blank">UMAP-学习</a>页面上找到。我计算了两个不同的投影。一个用于可视化(<em class="le"> embedding_for_plot </em>)，另一个(<em class="le"> embedding_for_hdbscan </em>)作为 hdbscan 聚类的预处理器:</p><pre class="lp lq lr ls gt oy oz pa pb aw pc bi"><span id="0055" class="oh nq it oz b gy pd pe l pf pg">import umap.umap_ as umap   # !pip install 'umap-learn==0.3.10'<br/>import hdbscan</span><span id="3fc2" class="oh nq it oz b gy pu pe l pf pg">embedding_for_plot = umap.UMAP(random_state=random_state) \<br/>    .fit_transform(features)</span><span id="2be7" class="oh nq it oz b gy pu pe l pf pg">embedding_for_hdbscan = umap.UMAP( \<br/>    random_state=random_state, min_dist=0.0, n_neighbors=10) \<br/>    .fit_transform(features)</span><span id="b101" class="oh nq it oz b gy pu pe l pf pg">cluster = hdbscan.HDBSCAN(min_samples=2, min_cluster_size=5) \<br/>    .fit_predict(embedding_for_hdbscan)</span></pre><h2 id="ad81" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">为什么要进行两次分析？</h2><p id="2ace" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">我进行了两种不同的分析。第一个聚类分析只包括三个特征，对于疫情爆发后只有 2.5 周数据的国家来说效果很好。</p><p id="ee5d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二个分析也使用曲线峰值的特征。对于每日病例仍在增加的国家，高峰将会移动。因此，结果也会改变。</p><h2 id="5159" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">1.爆发相似性和聚类分析</h2><p id="6ced" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在第一次分析中，我使用了以下三个特征:</p><ul class=""><li id="0142" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld po nh ni nj bi translated">DaysTo10X</li><li id="e47c" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated">早期死亡率</li><li id="0feb" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated">早期加速</li></ul><p id="7391" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该算法将数据集分成大小相似的四个不同的簇。使用 UMAP 嵌入，数据可以很容易地在两个轴上可视化:</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pv"><img src="../Images/06857ef698fb5473bfe936100a7a2e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eCR0BKpH-3TgBiXlH5EEig.png"/></div></div></figure><p id="330f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，对于这种聚类，仅使用爆发后 2-3 周的数据。值得注意的是，西班牙在这里并不属于橙色组，该组包括意大利、比利时、纽约、德国、加拿大等。</p><p id="2e4c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了深入挖掘，我创建了<a class="ae mt" href="https://en.wikipedia.org/wiki/Violin_plot" rel="noopener ugc nofollow" target="_blank">小提琴图</a>(类似于盒子图)。红色和橙色集群的早期死亡率都很高。然而，红色集群在爆发后达到快 10 倍(小“DaysTo10X”)。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pw"><img src="../Images/5075eabcd973b40f5cde2f1d48d27d67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fk8pZdgXgjtlvyrIzC2hQ.png"/></div></div></figure><h2 id="7c40" class="oh nq it bd nr oi oj dn nv ok ol dp nz kr om on ob kv oo op od kz oq or of os bi translated">2.总体相似性和聚类分析</h2><p id="dd0d" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">在第二次分析中，我增加了两个特性，即:</p><ul class=""><li id="bf12" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld po nh ni nj bi translated">峰值死亡率</li><li id="61e0" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld po nh ni nj bi translated">电流传感器</li></ul><p id="915b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在 HDBSCAN 确定了 5 个集群:</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi px"><img src="../Images/427455c53a294dd39ce6168f5e6e7281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqRxeBpuVnlLJ_tafnwVJQ.png"/></div></div></figure><p id="7631" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这些星团中，蓝色的那个鹤立鸡群。“蓝色等级”的国家在疫情爆发后花了更长时间才实现病例数 10 倍的增长，但它们现在在确诊病例中分享了相当高的增长速度(见“当前加速”)。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi py"><img src="../Images/9903d9d6a4db521aeefd1ca80db8c907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqwqRNv72-GNxIMrOSRihQ.png"/></div></div></figure><p id="9357" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">慢慢来，确定你的国家，做你自己的解释。聚类分析总是关于<strong class="kk iu">发现新的关系和见解</strong>。</p><p id="d0b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">大多数方法也有<strong class="kk iu">随机成分</strong>。这意味着，如果我们用不同的随机种子数进行相同的分析，结果可能会有所不同。通常不是很多，但也可能不是五个，而是四个或六个。</p><h1 id="abb6" class="np nq it bd nr ns pj nu nv nw pk ny nz jz pl ka ob kc pm kd od kf pn kg of og bi translated">关于预测和预报的一点注记</h1><p id="a14c" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">这个故事不是直接关于预测和未来的场景。然而，识别相似的国家或州，以及它们的集群，可以帮助应用<strong class="kk iu">监督学习</strong>。</p><blockquote class="pz qa qb"><p id="49cc" class="ki kj le kk b kl km ju kn ko kp jx kq qc ks kt ku qd kw kx ky qe la lb lc ld im bi translated">如果我们知道纽约和新泽西的表现与意大利和西班牙相似，但它们滞后 2 周，我们可以使用欧洲国家的最新历史来预测美国这些州的未来。</p></blockquote><p id="ce6b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就机器学习术语而言，欧洲国家的最新数据起到了“标签”的作用。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="c9a2" class="np nq it bd nr ns nt nu nv nw nx ny nz jz oa ka ob kc oc kd od kf oe kg of og bi translated">贮藏室ˌ仓库</h1><p id="76c2" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">这个故事的所有代码都可以在 GitHub 上找到，参见:</p><div class="qf qg gp gr qh qi"><a href="https://github.com/ploner/coronavirus-clustering" rel="noopener  ugc nofollow" target="_blank"><div class="qj ab fo"><div class="qk ab ql cl cj qm"><h2 class="bd iu gy z fp qn fr fs qo fu fw is bi translated">ploner/冠状病毒-聚集</h2><div class="qp l"><h3 class="bd b gy z fp qn fr fs qo fu fw dk translated">该资料库包括一个 Jupyter 笔记本，用于对冠状病毒病例进行聚类分析。结果和情节…</h3></div><div class="qq l"><p class="bd b dl z fp qn fr fs qo fu fw dk translated">github.com</p></div></div><div class="qr l"><div class="qs l qt qu qv qr qw ly qi"/></div></div></a></div><h1 id="7ca4" class="np nq it bd nr ns pj nu nv nw pk ny nz jz pl ka ob kc pm kd od kf pn kg of og bi translated">最后的想法</h1><p id="b610" class="pw-post-body-paragraph ki kj it kk b kl ot ju kn ko ou jx kq kr ov kt ku kv ow kx ky kz ox lb lc ld im bi translated">除了识别一些众所周知的集群，我还能够发现一些新的、意想不到的关系。此外，特别是使用<strong class="kk iu"> Violin Plots </strong>的聚类分布可视化对从提取的聚类中获得更多信息有很大帮助。</p><p id="9a5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我会一直建议基于<strong class="kk iu">周【几何】平均值</strong>而不是每日病例统计数据做出关于冠状病毒的决定。这消除了周末效应，使每一个分析和解释更加稳定。</p></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><blockquote class="pz qa qb"><p id="00b3" class="ki kj le kk b kl km ju kn ko kp jx kq qc ks kt ku qd kw kx ky qe la lb lc ld im bi translated">如果你喜欢这个故事，<strong class="kk iu">你可能也会喜欢我在《走向数据科学》上发表的这两个中型故事<strong class="kk iu">中的</strong>一个。它们是关于新冠肺炎、<strong class="kk iu">分析</strong>和<strong class="kk iu">数据驱动的 Web 应用开发</strong>:</strong></p></blockquote><div class="qf qg gp gr qh qi"><a rel="noopener follow" target="_blank" href="/forget-daily-statistics-of-the-coronavirus-7e9bbb7349bd"><div class="qj ab fo"><div class="qk ab ql cl cj qm"><h2 class="bd iu gy z fp qn fr fs qo fu fw is bi translated">厌倦了被告知新冠肺炎方向每两天改变？</h2><div class="qp l"><h3 class="bd b gy z fp qn fr fs qo fu fw dk translated">忘记每日统计，遵循正确的 KPI！</h3></div><div class="qq l"><p class="bd b dl z fp qn fr fs qo fu fw dk translated">towardsdatascience.com</p></div></div><div class="qr l"><div class="qx l qt qu qv qr qw ly qi"/></div></div></a></div><div class="qf qg gp gr qh qi"><a rel="noopener follow" target="_blank" href="/visualise-covid-19-case-data-using-python-dash-and-plotly-e58feb34f70f"><div class="qj ab fo"><div class="qk ab ql cl cj qm"><h2 class="bd iu gy z fp qn fr fs qo fu fw is bi translated">使用 Python、Dash 和 Plotly 可视化新冠肺炎案例数据</h2><div class="qp l"><h3 class="bd b gy z fp qn fr fs qo fu fw dk translated">立即创建您自己的仪表板 Web 应用程序！</h3></div><div class="qq l"><p class="bd b dl z fp qn fr fs qo fu fw dk translated">towardsdatascience.com</p></div></div><div class="qr l"><div class="qy l qt qu qv qr qw ly qi"/></div></div></a></div></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><p id="463d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">编者按:</em> </strong> <em class="le"> </em> <a class="ae mt" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="le">走向数据科学</em> </a> <em class="le">是一份以数据科学和机器学习研究为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae mt" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="le">这里</em> </a> <em class="le">。</em></p></div></div>    
</body>
</html>