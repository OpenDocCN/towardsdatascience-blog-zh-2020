<html>
<head>
<title>Set up a Dask Cluster for Distributed Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为分布式机器学习建立一个 Dask 集群</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/set-up-a-dask-cluster-for-distributed-machine-learning-31f587b1b553?source=collection_archive---------12-----------------------#2020-02-27">https://towardsdatascience.com/set-up-a-dask-cluster-for-distributed-machine-learning-31f587b1b553?source=collection_archive---------12-----------------------#2020-02-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="346a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="http://towardsdatascience.com/tagged/daskdistributedml" rel="noopener" target="_blank">使用 Python 和 Dask 的分布式机器学习</a></h2><div class=""/><div class=""><h2 id="ef1c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">通过使用 SSH 连接机器来创建 Dask 环境</h2></div><p id="4f34" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">由<a class="ln lo ep" href="https://medium.com/u/360640c0a123?source=post_page-----31f587b1b553--------------------------------" rel="noopener" target="_blank"> Pablo Salvador Lopez </a>和<a class="ln lo ep" href="https://medium.com/u/bb4e30a633db?source=post_page-----31f587b1b553--------------------------------" rel="noopener" target="_blank"> Aadarsh Vadakattu </a>合作撰写</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/ae20a32c5e00e318aa2bf475beff4662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G0ih5zREEeilFrToRrQ0zQ.jpeg"/></div></div></figure><p id="5a76" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果你知道 Dask 有什么能力，以及它如何<em class="mb">分发</em>你的机器学习过程，那你就来对地方了！本文将解释如何创建一个简单的 SSH 集群，您可以使用它作为实现 Dask 环境的基础，该环境可以分发您的机器学习工作流。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><h2 id="da68" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">顺便问一下，我们可以用多少种方法来加速 Dask 集群？</h2><p id="f984" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">Dask 集群可以通过多种方式加速:</p><ol class=""><li id="94de" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nl nm nn no bi translated">使用 SSH 连接</li><li id="899b" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在 Hadoop 集群上，本质上是借助 HDFS 和 YARN 的力量运行</li><li id="0433" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在 Kubernetes 和一堆 Docker 容器的帮助下</li><li id="d010" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在超级计算机上</li><li id="a174" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nl nm nn no bi translated">在像 AWS 或 Azure 这样的云环境中</li></ol><p id="2f8d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在本文中，我们将展示如何通过使用<strong class="kt jd"> SSH 连接</strong>构建一个工作的 Dask 测试环境。</p><h2 id="5e5f" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">这是最好的方法吗？</h2><p id="0abb" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">使用 SSH 连接建立 Dask 集群似乎是最容易的，但是它也是最不稳定、最不安全和最乏味的。这种方法仅用于测试目的，不用于生产中的某个地方。基于您的生产环境，您可以尝试使用 Hadoop、Kubernetes 或云解决方案来实现 Dask，因为它们更有组织性和稳定性。</p><h2 id="0983" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">应该建什么？</h2><p id="5c4f" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">Dask 运行在调度器-工作器网络上，调度器分配任务，节点相互通信以完成分配的任务。因此，网络中的每台机器都必须能够相互连接和联系。Dask 有时也会尝试从一个源节点连接到同一个源节点，所以我们应该确保所有机器上的每个连接网关都可用，包括到自身的连接。</p><p id="ddc3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在您找到一堆可以用来实现分布式集群的机器之后，</p><ul class=""><li id="c002" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">必须设置防火墙规则，使连接成为可能</li><li id="37fd" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">必须使用 SSH 设置无密码登录</li><li id="35f3" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">必须在所有机器上建立一个唯一的安装目录，该目录将包含我们的训练/测试数据，并提供给 Dask</li><li id="7f79" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">Python 必须安装在所有要安装相同版本库的机器上。</li></ul><p id="6371" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">下面的测试设置是在一堆运行 Red Hat Enterprise Linux 7 (RHEL 7)的机器上实现的。您可以在任何地方开发或部署这种架构，方法是在本地或云中启动一组虚拟机，或者在可通过网络访问的真实机器上启动。</p><h2 id="ae53" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">设置防火墙</h2><ul class=""><li id="9e78" class="ng nh it kt b ku nb kx nc la nv le nw li nx lm nu nm nn no bi translated">确保关闭防火墙或允许通过防火墙访问所有其他机器。</li><li id="3a22" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">如果您想使您的测试设置安全，允许从每台机器到每台机器的访问，包括它自己。假设您正在从任何其他机器上访问 IP <code class="fe ny nz oa ob b">10.10.10.10</code>,执行如下命令。在这里，24 决定了通用的 TCP 端口，8786 是 Dask 通常需要进行通信的端口。通过使用相同的命令并更改端口号，您可以根据需要打开任何其他端口。</li></ul><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="1c7a" class="mj mk it ob b gy og oh l oi oj">firewall-cmd --permanent --zone=public --add-source=10.10.10.10/24<br/>firewall-cmd --permanent --zone=public --add-source=10.10.10.10/8787</span></pre><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ok"><img src="../Images/44d37cc1f93a5ab9cdb9b27da470df45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKoLlJ1nnWeqglYLI_O6ew.png"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">如果您的防火墙连接规则被添加，您将看到如下消息。</p></figure><p id="2b7d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">您可以使用<code class="fe ny nz oa ob b">ping</code>命令确认您的连接没有被阻塞。如果您没有通过 ping 收到传输的数据包，则说明您的网络有问题。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi op"><img src="../Images/04da8381ab5c592d1f8b7c65405ac13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*yYLbHjcupcWSWRsJXsDhog.png"/></div><p class="ol om gj gh gi on oo bd b be z dk translated">您的 ping 应该返回传输的数据包，如上所示。如果没有，您将看到收到 0，这确定您的网络可能有问题。</p></figure><p id="c6ba" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果安全性对您的测试设置不重要，您可以禁用防火墙以减少一些麻烦。为此，请在所有计算机上运行此命令。这将关闭您运行的计算机上的防火墙。</p><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="7d5e" class="mj mk it ob b gy og oh l oi oj">systemctl stop firewalld</span></pre><p id="1082" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">您可以通过运行以下命令来检查防火墙状态:</p><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="0415" class="mj mk it ob b gy og oh l oi oj">systemctl status firewalld</span></pre><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi oq"><img src="../Images/a29dafe8434b5cdabe69f9308cc0143e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpnRh37JM2XP2p8hMg60Vw.png"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">如果您有活动的防火墙，您可以看到状态为活动。</p></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi or"><img src="../Images/8960a0577f3ab7202cb601315e11feab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BisS2GiJovLp51zfI6NEhQ.png"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">如果您停止了防火墙，防火墙的状态将变为非活动。</p></figure><h2 id="241c" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">设置无密码 SSH</h2><p id="d6ab" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">当您的所有机器都可以被其他机器发现后，您需要让它们使用 SSH 连接，以便它们可以通信和传输数据。</p><p id="9265" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">通常，登录到一台机器需要一个系统的 IP 和一个认证密码。这种类型的登录可以手动完成，但是如果目标机器请求密码，Dask 不知道如何以及在哪里输入密码。为了克服这个问题，我们可以将计划的集群中所有其他可能的目的地机器作为 SSH 已知主机，使登录安全且无需密码。</p><p id="52f2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果您以前没有创建过 SSH 密钥，运行如下所示的<code class="fe ny nz oa ob b">ssh-keygen</code>命令。如果需要，您可以输入密码，也可以留空。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi os"><img src="../Images/a4ac2499cbbdbbe9bfdc4c4f44030d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q3t-msaQclRWCVTJCkA4bg.jpeg"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">这将创建一个 SSH 密钥，您可以使用它跨设备进行身份验证，从而使您的登录更加安全且无需密码。</p></figure><p id="9b7f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">现在运行下面的命令来复制目标机器的 SSH ID。假设是<code class="fe ny nz oa ob b">10.1.1.93</code>，</p><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="1853" class="mj mk it ob b gy og oh l oi oj">ssh-copy-id 10.1.1.93</span></pre><p id="74a2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">运行上面的命令可能会显示类似如下的输出:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi os"><img src="../Images/99712e56c3d53f5569a9c9c906c1f227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rLLEye9NXsPmBu78uRcULA.png"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">添加密钥后，您无需输入密码即可从当前机器登录到该机器。</p></figure><p id="3031" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">您还可以通过检查<code class="fe ny nz oa ob b">~/.ssh/known_hosts</code>文件来确认集群中所有可能的目的地是否都被设置为主机。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi os"><img src="../Images/e4d244d3b2cc70d8c866a334368a0ca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKs_yLXbRaje0RwKQI8bqg.png"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">在您复制了所有机器的 id 之后，您应该在这个文件中看到所有机器的 id 以及它们的 IP。</p></figure><p id="78d7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">确保对计划包含在集群中的每台计算机运行此步骤(包括您可能正在使用的当前计算机的 IP)。如前所述，Dask 有时会尝试连接到自己，但会失败，因为没有 SSH 授权。)</p><p id="d6ff" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在所有机器上运行这些程序后，您应该能够不使用密码无缝地从一台机器登录到另一台机器。下面的例子显示了两台机器，其中<code class="fe ny nz oa ob b">10.1.1.107</code>没有复制 SSH ID，而<code class="fe ny nz oa ob b">10.1.1.93</code>在当前工作的机器上复制了它的 ID。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ot"><img src="../Images/8d6d372bb5112fedb479abe20d9c80a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fu4_WY3VKRutgOjNdNPstA.gif"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">SSH 请求密码，因为它没有找到 id 令牌。您必须在此输入密码才能登录机器。</p></figure><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ot"><img src="../Images/6c01d0b0c3a247a7b71fa95f98e4d4d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*e3J0dx8UK1o_OXkIBm56yw.gif"/></div></div><p class="ol om gj gh gi on oo bd b be z dk translated">复制 ID 后的 SSH。在这里，您无需密码即可登录，因为登录是通过您之前复制的 ID 进行身份验证的。</p></figure><h2 id="4715" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">跨集群设置挂载目录</h2><p id="52ec" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">现在，您可以设置一个地方，让 Dask 可以访问您的数据。您可以在一个名为<strong class="kt jd"> SSHFS </strong>的应用程序的帮助下完成这项工作，该应用程序会在您在任何机器上指定的目录下创建挂载点。当您在目标计算机上指定装载源时，这会将数据从源传输到目标，并从目标传输到源，以保持该特定目录中的所有文件和文件夹在计算机之间同步。这种方法的好处是—它从两个位置拷贝和同步数据，而不仅仅是在创建装载点源的位置。</p><p id="d8c2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果您将要处理的数据放在机器上不同的目录路径中，Dask 有时会感到困惑。因此，请确保选择一个跨机器通用的特定目录。简单的例子可以是<code class="fe ny nz oa ob b">/tmp/daskdata/</code>。</p><p id="fb76" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">要将该目录指定为挂载点，</p><ul class=""><li id="c5ac" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">在所有机器上创建公共目录</li><li id="de52" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">使用以下命令在所有机器上安装 SSHFS(如果您在 RHEL 上)</li></ul><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="282a" class="mj mk it ob b gy og oh l oi oj">wget <a class="ae ou" href="https://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-12.noarch.rpm" rel="noopener ugc nofollow" target="_blank">https://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/e/epel-release-7-12.noarch.rpm</a></span><span id="8174" class="mj mk it ob b gy ov oh l oi oj">yum install fuse-sshfs</span></pre><ul class=""><li id="c69b" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">登录到所有机器，并在该目录下创建一个挂载点，将其指向源机器的目录。假设您的源机器是<code class="fe ny nz oa ob b">10.10.10.10</code>，输入如下命令:</li></ul><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="8627" class="mj mk it ob b gy og oh l oi oj">sshfs 10.10.10.10:/tmp/daskdata /tmp/daskdata</span></pre><p id="deac" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">上面的命令假设您已经登录到一台机器，并且您正在将这台机器上的<code class="fe ny nz oa ob b">/tmp/daskdata/</code>指向<code class="fe ny nz oa ob b">10.10.10.10</code>上的<code class="fe ny nz oa ob b">/tmp/daskdata/</code>，这可能是源。</p><p id="7aef" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">正确实现挂载点后，通过在任何机器的挂载目录中创建一个文件来确保它正在运行。您可以使用<code class="fe ny nz oa ob b">touch dummy</code>轻松创建一个测试文件，它会创建一个名为“dummy”的空文件。在任何一个位置创建这个文件都必须将文件复制到所有位置，这意味着它应该可以在所有机器的<code class="fe ny nz oa ob b">/tmp/daskdata/</code>目录中找到。</p><h2 id="0f96" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">在集群中匹配 Python 库的版本</h2><p id="c687" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated">最后，您必须确保您需要的所有 Python 库都在所有集群上以相同的版本运行。为此，</p><ul class=""><li id="60b9" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">尝试使用调度器在本地运行和调试一个简单的 Dask 分布式程序。如果这行得通，您就可以确定 Dask 需要运行的特定库版本集。通常，这一步会失败，因为 Dask 需要安装其他版本的库。根据这个程序抛出的错误获取必要的库，并尝试安装它们。</li></ul><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="cc1e" class="mj mk it ob b gy og oh l oi oj">from dask.distributed import Client<br/>import dask</span><span id="7080" class="mj mk it ob b gy ov oh l oi oj"># Import a sample dataset<br/>df = dask.datasets.timeseries()</span><span id="92ec" class="mj mk it ob b gy ov oh l oi oj"># Connect to distributed cluster. To run locally, pass no arguments # in the Client function.<br/>client = Client()</span><span id="8f20" class="mj mk it ob b gy ov oh l oi oj"># This now runs on the distributed system<br/>df.groupby('name').x.mean().compute()</span></pre><ul class=""><li id="cf5f" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">这里有一个<a class="ae ou" href="https://docs.dask.org/en/latest/install.html#optional-dependencies" rel="noopener ugc nofollow" target="_blank">链接</a>指向 Dask 可能需要的依赖项，以及支持的最低版本。检查这个，确保你已经满足所有要求。</li><li id="11cb" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">有了库的版本后，您可以使用<code class="fe ny nz oa ob b">pip freeze</code>命令收集所有已安装的版本，并安装所有这些需求，如下所示:</li></ul><pre class="lq lr ls lt gt oc ob od oe aw of bi"><span id="4a20" class="mj mk it ob b gy og oh l oi oj">pip freeze &gt; requirements.txt #on a machine where all libraries are #installed</span><span id="0fce" class="mj mk it ob b gy ov oh l oi oj">pip install -r requirements.txt #on another machine where all #libraries should be installed</span></pre><ul class=""><li id="a9c8" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">同样为了减少麻烦，您可以创建一个 pip 或 conda 环境，并使用<code class="fe ny nz oa ob b">venv-pack</code>或<code class="fe ny nz oa ob b">conda-pack</code>将库导出到其他机器。这将在目标机器上复制您创建的环境。这里有很好的视频解释如何做到这一点:</li><li id="c54d" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated"><a class="ae ou" href="https://conda.github.io/conda-pack" rel="noopener ugc nofollow" target="_blank">https://conda.github.io/conda-pack/</a></li><li id="d4f9" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated"><a class="ae ou" href="https://jcrist.github.io/venv-pack" rel="noopener ugc nofollow" target="_blank">https://jcrist.github.io/venv-pack/</a></li></ul><p id="c067" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">现在，您可以将数据放入挂载的文件夹中，并编写 Dask 应用程序了！</p><h2 id="55f9" class="mj mk it bd ml mm mn dn mo mp mq dp mr la ms mt mu le mv mw mx li my mz na iz bi translated">为 Dask 构建 SSH 集群的利弊是什么？</h2><p id="bfcf" class="pw-post-body-paragraph kr ks it kt b ku nb kd kw kx nc kg kz la nd lc ld le ne lg lh li nf lk ll lm im bi translated"><strong class="kt jd">优点:</strong></p><ul class=""><li id="58fb" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">这是一个完全从零开始构建的集群，可以在不安装 HDFS 的情况下运行，这可能很繁琐。如果您有一个包含许多机器的小型集群，可以使用这种方式快速测试 Dask。</li></ul><p id="7ce2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">缺点:</strong></p><ul class=""><li id="2cd9" class="ng nh it kt b ku kv kx ky la ni le nj li nk lm nu nm nn no bi translated">挂载点需要精确地位于所有机器上的相同位置。HDFS 在这里大获全胜，因为如果以这种方式实现，Dask 只需要知道文件在 HDFS 的什么地方。</li><li id="ce39" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">大量文件会破坏每台机器上的磁盘，并且会破坏网络上的 SSHFS 连接。</li><li id="ba91" class="ng nh it kt b ku np kx nq la nr le ns li nt lm nu nm nn no bi translated">SSHFS 挂载可能很难跟踪，并且 SSHFS 应用程序在跟踪正在运行的挂载点方面做得不好。</li></ul><p id="cddd" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">请继续关注有效运行 Dask 的其他方式，包括通过 HDFS 和 YARN 设置的<strong class="kt jd">，使用 Kubernetes 设置的</strong>和在 Azure Cloud 设置的<strong class="kt jd"/>。</p></div><div class="ab cl mc md hx me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="im in io ip iq"><p id="13e7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">非常感谢你的阅读！既然您已经设置了集群，那么您可以创建并运行 Dask 程序，并在 Dask 仪表板中查看所有运行统计数据！</p></div></div>    
</body>
</html>