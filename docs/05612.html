<html>
<head>
<title>Easy development environments with Operation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">易于操作的开发环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easy-development-environments-with-operation-6b352e72c0eb?source=collection_archive---------54-----------------------#2020-05-10">https://towardsdatascience.com/easy-development-environments-with-operation-6b352e72c0eb?source=collection_archive---------54-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e09681b5519bd72f73249a356edbdd32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_JbJG6t5bUtpew0Jxt5pkg.png"/></div></div></figure><div class=""/><p id="83ab" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">像越来越多的工程师一样，数据科学家正在向码头工人 T2 转移。这个框架将资源和应用程序从全球系统中分离出来，有助于更好的可复制性，从而解决了软件安装和部署过程中的一些问题。</p><p id="e761" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">虽然它主要用于部署独立的应用程序，但是我们可以通过一种稍微派生的方式来利用这种技术来构建轻量级和可移植的开发环境。</p><p id="a63e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">随着越来越多不同的工具和库，有时很难知道我们的工作站中安装了什么，以及如何轻松地管理所有这些东西。每个人都遇到过仅仅为了安装一个特定的 Python 库或 Bash 实用程序而进行几个小时的调试。</p><blockquote class="la lb lc"><p id="5413" class="kb kc ld kd b ke kf kg kh ki kj kk kl le kn ko kp lf kr ks kt lg kv kw kx ky im bi translated"><em class="je">如果你想了解更多关于 Docker 技术的细节，在 Medium </em>  <em class="je">这里已经有很多好的资源</em> <a class="ae kz" href="https://medium.com/@kelvin_sp/docker-introduction-what-you-need-to-know-to-start-creating-containers-8ffaf064930a" rel="noopener"> <em class="je">。</em></a></p></blockquote><h1 id="41bb" class="lh li je bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">带码头的移动实验室</h1><p id="989b" class="pw-post-body-paragraph kb kc je kd b ke mf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku mj kw kx ky im bi translated">当我收到最后一台笔记本电脑时，我没有在全局系统安装上安装任何库或代码实用程序。相反，我将许多日常工作转移到 Docker 容器中。</p><p id="7284" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这种工作流程有很多优点:</p><ul class=""><li id="b31a" class="mk ml je kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated">您可以安装和测试库，而不用担心会破坏您的全局系统。全部隔离在容器中。</li><li id="ac42" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">由于 Dockerfiles(在 Git 中跟踪),您可以跟踪不同的工作区以及它们是如何发展的。</li><li id="501f" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">您可以在任何计算机上运行您的任何工作区。只需要安装 Docker(这非常简单)。</li><li id="d11a" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">您可以共享工作区。您的任何项目都可以在朋友的电脑上运行。</li></ul><p id="8506" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好的，听起来不错。安装或升级库时，我们将不再害怕。在任何地方运行项目的可能性是非常令人兴奋的，由于 Git，获得所有历史变更将节省时间。</p><p id="3b1e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">尽管如此，还是有一点缺点:您必须编写很长的命令才能启动这些容器</p><figure class="mz na nb nc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi my"><img src="../Images/b2e99085d397a195f200d368791c5b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWxe5ku6lskRlE0h-UQnYw.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">在 Docker 容器中运行 Jupyter 记事本的 Docker 命令示例。</p></figure><h1 id="eee1" class="lh li je bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">我们总是想要快捷简单的工具</h1><p id="678e" class="pw-post-body-paragraph kb kc je kd b ke mf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku mj kw kx ky im bi translated">为了解决这个问题，我首先想到了<a class="ae kz" href="https://github.com/docker/compose" rel="noopener ugc nofollow" target="_blank"> docker-compose </a>。这个工具对于定义和运行多容器 Docker 应用程序非常有用。它可以将复杂的运行操作恢复成简单的<code class="fe nh ni nj nk b">docker-compose up</code>命令。</p><p id="098c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，这不是我们在我们的环境中使用的工具，至少有两个原因:</p><p id="eeef" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，您必须在包含<code class="fe nh ni nj nk b">docker-compose.yml</code>的文件夹中运行 docker-compose 命令，或者提供相当长的完整 docker 文件路径。这并不像我们习惯的那样，仅仅在你的控制台中输入<code class="fe nh ni nj nk b">jupyter-notebook</code>或者启动 Rstudio 应用程序那么简单。</p><p id="0203" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">其次，你得安装 docker-compose。好了，这还不是最难的。但是在安装工作空间时，您仍然需要添加这个层。</p><p id="9b96" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以我问自己，在大多数 Unix 系统上，默认的工具是什么？简单回答:Bash。</p><p id="ba74" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://github.com/Ben8t/operation" rel="noopener ugc nofollow" target="_blank">行动</a>诞生了。</p><h1 id="53b3" class="lh li je bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">操作:Docker 环境支持 Bash。</h1><p id="37b7" class="pw-post-body-paragraph kb kc je kd b ke mf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku mj kw kx ky im bi translated">这个工具非常简单。事实上，它只是 docker 容器运行命令到 shell 脚本中简单表达式的映射。</p><p id="3559" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">环境——或“操作”——由一个<strong class="kd jf">docker 文件</strong>和一个<strong class="kd jf">配置文件</strong>定义。后者用于指定容器运行命令和所有需要的参数，如卷、环境变量等</p><figure class="mz na nb nc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/325c6d285611012211d873262fded09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7jC5Acc8ThDz8fVPILniQ.png"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">Jupyter 笔记本操作后面的<a class="ae kz" href="https://github.com/Ben8t/operation/blob/master/operation/src/jupyter/config.yml" rel="noopener ugc nofollow" target="_blank">配置文件</a>。</p></figure><p id="d04f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">映射被解释成一个简单的<a class="ae kz" href="https://github.com/Ben8t/operation/blob/master/operation.sh" rel="noopener ugc nofollow" target="_blank"> shell 脚本</a>。我们可以用一个简单的<code class="fe nh ni nj nk b">operation briefing</code>构建所有的 Docker 图像。</p><p id="07ee" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，不用运行长 Docker 命令来运行 Jupyter 笔记本，只需键入<code class="fe nh ni nj nk b">operation jupyter</code>。</p><p id="c686" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">操作被设计得非常简单，它不是一个革命性的工具，只是一个小的附带项目。目标是能够运行单个应用程序或开发工具，而不用担心系统依赖性和安装。</p><p id="dff1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当在一个更复杂的项目中工作时，我更喜欢在项目中建立 docker 文件甚至 docker-compose 文件，而不是在操作中构建它。这对项目的可重复性更好。</p><p id="02f4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于我主要使用 Python 和 R，我开始构建像 IPython 或浏览器内 Rstudio 环境这样的“操作”。我还利用这个解决方案设置了一些任务，虽然我不是每天都做，但是这些任务非常有用，比如 CSV 文件转换、图像旋转或日期时间操作。</p><p id="c83c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些小工具可以安装在我的全球系统上。它们不需要太多的依赖。尽管如此，我还是希望能够使用它们而完全不用担心我的系统配置，并且当我换到另一个工作站时能够快速找到它们。</p><p id="772c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有了手术，我手头就有了。</p><h1 id="120f" class="lh li je bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">背后的故事</h1><p id="1db0" class="pw-post-body-paragraph kb kc je kd b ke mf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku mj kw kx ky im bi translated">这个想法并不新鲜。<a class="ae kz" href="https://twitter.com/jessfraz" rel="noopener ugc nofollow" target="_blank">杰西·弗雷泽勒</a>，前 Docker-Google-微软工程师已经有了一个<a class="ae kz" href="https://github.com/jessfraz/dockerfiles" rel="noopener ugc nofollow" target="_blank">完整的 Docker 文件库</a>来运行独立的桌面应用。我鼓励你去看<a class="ae kz" href="https://blog.jessfraz.com/post/docker-containers-on-the-desktop/" rel="noopener ugc nofollow" target="_blank">相应的博文</a>。</p><p id="0063" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">读了汤姆·克兰西的书后，我想到了“手术”这个名字。像<a class="ae kz" href="https://en.wikipedia.org/wiki/List_of_military_operations" rel="noopener ugc nofollow" target="_blank">军事行动</a>一样，Docker 容器被定义、操作，然后分类。为了实现这个想法，我甚至添加了“秘密”行动的别名。例如，您可以启动运行<code class="fe nh ni nj nk b">operation ipython</code>或<code class="fe nh ni nj nk b">operation rattlesnake</code>的 IPython 控制台。</p><p id="0d34" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个锁定也让我学习了一些关于 3D 建模和 Blender 渲染的知识。围绕码头鲸创作了一些艺术品。<a class="ae kz" href="https://www.behance.net/gallery/95156933/Operation" rel="noopener ugc nofollow" target="_blank">了解有关具体行为项目的更多信息</a>。</p><div class="mz na nb nc gt ab cb"><figure class="nm iv nn no np nq nr paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/7942e129b2588e79e1a8e4ce662e15bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*xWdTiQT0alZwJaCd5_0NAg.png"/></div></figure><figure class="nm iv ns no np nq nr paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/576b14d4d24d2685437d2d1d682c7e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*6-xskWlamtjjpVaqnClE-w.png"/></div><p class="nd ne gj gh gi nf ng bd b be z dk nt di nu nv translated">https://www.behance.net/gallery/95156933/Operation</p></figure></div><h1 id="ad2a" class="lh li je bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">未来的发展</h1><p id="e4e8" class="pw-post-body-paragraph kb kc je kd b ke mf kg kh ki mg kk kl km mh ko kp kq mi ks kt ku mj kw kx ky im bi translated">我利用锁定开始这个小项目，并提高我的 Bash 技能。由于我们过去面对许多新的工具和环境，它可能会定期更新。可以进行许多改进，例如:</p><ul class=""><li id="f38e" class="mk ml je kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated">优化图像定义并遵循 Docker 的良好实践。</li><li id="f092" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">更好的安装过程(apt-获得支持？).</li><li id="8367" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">潜在的卷“安全性”和授权违规。</li><li id="74ea" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">改进文档。</li><li id="c93d" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">添加操作“优先级”以快速构建特定的 Docker 映像。</li><li id="c119" class="mk ml je kd b ke mt ki mu km mv kq mw ku mx ky mp mq mr ms bi translated">比 Bash 更好的 CLI，无需使用任何其他工具。</li></ul><p id="f233" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">目前每个操作都非常接近我的个人喜好。如果你想添加你自己的操作:添加你的 Dockerfile 并填充一个<code class="fe nh ni nj nk b">config.yml</code>文件，你就准备好了。</p><p id="8db0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你有改进的想法吗？认为应该创造一些新的环境？你可以在 Github 上找到<a class="ae kz" href="https://github.com/Ben8t/operation" rel="noopener ugc nofollow" target="_blank">这个库。不要犹豫，添加问题或创建合并请求，在下面添加评论，或</a><a class="ae kz" href="https://twitter.com/Ben8t" rel="noopener ugc nofollow" target="_blank">在 Twitter 上与我联系</a>。我将很高兴收到你的来信。</p></div></div>    
</body>
</html>