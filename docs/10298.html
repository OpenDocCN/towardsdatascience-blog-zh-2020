<html>
<head>
<title>Option Greeks in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的希腊选项</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/option-greeks-in-python-97980df3ab0b?source=collection_archive---------26-----------------------#2020-07-20">https://towardsdatascience.com/option-greeks-in-python-97980df3ab0b?source=collection_archive---------26-----------------------#2020-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2ba7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">自动偏微分 JAX</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/161c489be726ce5f9af49f6dc967ff6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yv2EHXQPnARTbmnYwGEYnw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/photo/human-statue-under-clear-sky-1251720/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae ky" href="https://www.pexels.com/@andreea-ch-371539?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">安德里亚·切</a>的照片</p></figure><p id="ae40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">T4 期权对每个期权交易者来说都是必不可少的。但是，希腊人到底是什么？希腊人是布莱克-斯科尔斯方程关于每个变量的偏导数…</p><p id="4203" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">希腊人</strong></p><ul class=""><li id="a758" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">δ—δ—基础资产的一阶偏导数</li><li id="d957" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">γ—γ—关于基础资产的二阶偏导数</li><li id="67cf" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">Vega — <em class="ms"> v </em> —关于波动率的偏导数</li><li id="28b5" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">θ—θ—呼气前时间的偏导数</li><li id="8cf6" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">ρ—ρ—相对于给定利率的偏导数</li></ul><p id="8f55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用简单的英语来说，希腊人告诉我们，当只有那个参数变化时(所有其他参数保持不变)，期权的价格是如何变化的。交易平台通常会自动计算每份合约的希腊价格。然而，当将市场数据流式传输到 Python 时，或者使用您自己的定价模型时，您将需要自己计算这些值。尽管布莱克-斯科尔斯希腊方程有闭合形式的解(这大大加快了他们的计算速度)。然而，我认为这将是对 Python 库 JAX 的一个很酷的介绍，它可以用来自动计算任何函数的梯度。</p><p id="aab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源自 JAX 的希腊模型的美妙之处在于，它可以用于任何定价模型，而不仅仅是 Black-Scholes 模型，让对冲外来风险变得不那么痛苦。</p><h2 id="92b9" class="mt mu it bd mv mw mx dn my mz na dp nb li nc nd ne lm nf ng nh lq ni nj nk nl bi translated">什么是梯度向量？</h2><p id="84e1" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">梯度向量，或简称为<em class="ms">梯度</em>，是任何给定多变量函数的偏导数的集合。</p><p id="e2f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给定以下功能<em class="ms"> f </em> …</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/b136e66f284ae58816f62ab4d94cd2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*5xdXLRGbVMnNgTqW06YWLg.png"/></div></figure><p id="b59b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">梯度-∇-如下…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/463db9d5dcba539e9d800d94b7bc75c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*lu3Nedcjsz3EhVC-lokO2g.png"/></div></figure><p id="76b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一概念适用于所有函数，不管维度如何…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/6593f106061b71cb5261d2c983df6026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*K69jUqmAurtxNVIncVRFlg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/a103bfb8aff3eaaed9490612bb4be99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XtDXJswny_Vuzn0pIA8eIw.png"/></div></div></figure><p id="863d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于渐变的更多信息，请查看<a class="ae ky" rel="noopener" target="_blank" href="/the-gradient-vector-66ad563ab55a">渐变矢量</a>。</p><h2 id="9252" class="mt mu it bd mv mw mx dn my mz na dp nb li nc nd ne lm nf ng nh lq ni nj nk nl bi translated">使用 JAX 的布莱克-斯科尔斯梯度</h2><p id="426d" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">你会注意到这两个概念的交集在于偏导数。希腊人(γ除外)是布莱克-斯科尔斯方程对每个变量的一阶偏导数。如果我们能从布莱克-斯科尔斯方程推导出梯度，我们将有一个函数能产生 5 个希腊人中的 4 个！</p><p id="e0f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JAX 是由谷歌开发和维护的库，主要用于机器学习，提供了一种自动计算梯度函数的简单方法。</p><p id="dbe4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，在撰写本文时，JAX 仅在 IOS 上受支持。</p><p id="46f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，重要的是要注意，为了使用 JAX，我们将需要通过 JAX 本身引用任何线性代数(numpy)或统计分布(scipy)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0c1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经为欧式调用建立了类，并放入了结构正确的 Python 以用于 JAX…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="2b12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，如果变量的类型不是浮点型，JAX 会返回错误，因为有多种近似技术用于求解导数。你会发现在上面的所有课程中都提到了<em class="ms">。因为这个原因<em class="ms">。</em></em></p><p id="5c70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们实现 JAX 的 grad 函数来自动计算希腊人…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="a4b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码中，在计算每个期权价格后，我添加了一个调用 JAX 函数的字段。grad 函数既接受函数，也接受关于梯度中包含哪些参数的元组。在计算完 gradient_func 之后，我用它分别给 delta，vega，theta，rho 赋值。您还会注意到，我们需要做一些调整，因为 vega 和 rho 是以百分比表示的，而 theta 是按年计算的。</p><p id="fc73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们使用这个类来计算希腊人的一个示例选项…</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="283a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了实现这些类，我们按照以下顺序创建了一个选项参数的 JAX-numpy 数组…</p><ul class=""><li id="bc0b" class="me mf it lb b lc ld lf lg li mg lm mh lq mi lu mj mk ml mm bi translated">资产价格</li><li id="8502" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">波动性</li><li id="74e8" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">执行价格</li><li id="a51a" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">到期时间(年化)</li><li id="7b4e" class="me mf it lb b lc mn lf mo li mp lm mq lq mr lu mj mk ml mm bi translated">无风险利率</li></ul><p id="1c00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们创建一个欧式期权类的实例，并使用<em class="ms">填充 JAX-numpy 数组。astype('float') </em>避免计算梯度时出现错误。最后，我们打印使用梯度函数导出的希腊人的值…</p><pre class="kj kk kl km gt nx ny nz oa aw ob bi"><span id="f464" class="mt mu it ny b gy oc od l oe of">0.6300359 3.1931925 -1.3295598 1.3750976</span><span id="34c8" class="mt mu it ny b gy og od l oe of">[Finished in 1.253s]</span></pre></div></div>    
</body>
</html>