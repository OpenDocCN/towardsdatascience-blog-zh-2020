<html>
<head>
<title>How to draw a bar graph for your scientific paper with python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 python 为你的科学论文绘制条形图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-draw-a-bar-graph-for-your-scientific-paper-with-python-a6c2a5e6bcd7?source=collection_archive---------24-----------------------#2020-09-17">https://towardsdatascience.com/how-to-draw-a-bar-graph-for-your-scientific-paper-with-python-a6c2a5e6bcd7?source=collection_archive---------24-----------------------#2020-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1c3c82553de010b1e3000b3119058de8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boI-C4K2Qhw-s7u-v3Rj9Q.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">照片由特雷·赫尔利拍摄</p></figure><p id="9844" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">条形图📊(也称为条形图或条形图)是一种可视化工具，读者可以使用它来比较不同类别的条形图所显示的数据。在这个故事中，我试图介绍如何用 python 绘制清晰的条形图。</p><p id="f0be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一名学生或研究人员，你必须在科学论文中发表你的努力和成果，研究数据应该易于阅读和获取。共享研究数据是我们越来越鼓励，甚至强制要求的事情。同时，这也是我热衷的事情😘。</p><p id="1718" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先让我们重新认识一下这位朋友，条形图是谁(什么)？</p><blockquote class="lb lc ld"><p id="236f" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated"><strong class="kf ir">条形图</strong>或<strong class="kf ir">条形图</strong>是一种图表或图形，用矩形条表示分类数据，矩形条的高度或长度与它们所代表的值成比例。条形图可以垂直或水平绘制。垂直条形图有时被称为柱形图。<a class="ae kc" href="https://en.wikipedia.org/wiki/Bar_chart" rel="noopener ugc nofollow" target="_blank">由维基百科</a>提供。</p></blockquote><h1 id="e3c9" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">第一个例子</h1><p id="59a4" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我做了一个简单的例子，用竖条图直观的展示了一个学生 X 的各科成绩。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/13c5cbdacc68d0fcee03cb1e3782baa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ldVri1K9lknMbrmA_OBbg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">所有分数的条形图</p></figure><p id="8eb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是由一个非常简单的 Matplotlib 代码实现的:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7a7e" class="mv lj iq mr b gy mw mx l my mz">import matplotlib.pyplot as plt</span><span id="df7d" class="mv lj iq mr b gy na mx l my mz">fig = plt.figure(figsize=(7,5))</span><span id="93df" class="mv lj iq mr b gy na mx l my mz">ax = fig.add_axes([0,0,1,1])</span><span id="d035" class="mv lj iq mr b gy na mx l my mz">subjects = ['Math', 'Physik', 'English', 'Chemistry', 'History']</span><span id="03d5" class="mv lj iq mr b gy na mx l my mz">scores = [90,80,85,72,66]</span><span id="ec4b" class="mv lj iq mr b gy na mx l my mz">ax.bar(subjects,scores)</span><span id="9b1a" class="mv lj iq mr b gy na mx l my mz">ax.set_ylabel('scores',fontsize= 12)</span><span id="8ef9" class="mv lj iq mr b gy na mx l my mz">ax.set_xlabel('subjects',fontsize= 12)</span><span id="e98c" class="mv lj iq mr b gy na mx l my mz">ax.set_title('all scores of student X')</span><span id="f5e4" class="mv lj iq mr b gy na mx l my mz">for i, v in enumerate(scores):</span><span id="2086" class="mv lj iq mr b gy na mx l my mz">ax.text( i ,v + 1, str(v), color='black', fontweight='bold')</span><span id="4e8c" class="mv lj iq mr b gy na mx l my mz">plt.savefig('barplot_1.png',dpi=200, format='png', bbox_inches='tight')</span><span id="5961" class="mv lj iq mr b gy na mx l my mz">plt.show()</span></pre><h1 id="c534" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">数据分析中的真实案例</h1><p id="abfe" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">对于少量的结果数据，我们可以定义一个列表来保存整个数据，就像前面的例子一样。但有时数据太多，如果我们已经将相同的数据保存在 excel 文件中，那么再次将每个数据输入到一个列表中是低效的。</p><p id="0d41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们通过导入一个 excel 文件或其他文件来开始绘制条形图的过程，这将非常方便。因此，我们需要一个数据框架，它是二维的、大小可变的、潜在异构的表格数据，包括带标签的轴(行和列)。</p><p id="e856" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我在论文中写的这个真实案例中，我需要准确地比较不同模型的性能。准确度(ACC)是测量值与特定值的接近程度，这是评估分类模型的一个度量标准。从形式上看，准确性有以下定义:</p><p id="fb63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">准确度=正确预测的数量/方向总数</p><p id="50fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，通常在多分类模型中使用的前 N 名准确性意味着正确的类出现在前 N 名概率中，从而被认为是“正确的”。在论文中，我采用了前 1 名、前 3 名和前 5 名的准确度来评估预测。我已经在一个名为“model_accs.xlsx”的 excel 文件中输入了所有前 N 名 ACC。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/f57f6fecbc61ae1cc55b1701fa7832f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSpzWMtbXm05zvnm9EdboQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">数据，保存在 excel 表格(b)和熊猫数据框(c)中</p></figure><p id="328b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了 pandas，我们可以用 python 从 excel 文件中读取数据。Pandas 是一个开源的、BSD 许可的库，为 Python 编程语言提供了高性能、易于使用的数据结构和数据分析工具。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="2f12" class="mv lj iq mr b gy mw mx l my mz">import pandas as pd<br/>df= pd.read_excel("model_accs.xlsx",header=0) # read excel file</span></pre><p id="ac32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过函数 pd.read_excel()，我们可以读取我们的结果 excel 文件。如果数据保存在。csv 文件，那么我们可以使用 pd.read_csv()，类似于 pd.read_excel()。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="82c8" class="mv lj iq mr b gy mw mx l my mz">import numpy as np</span><span id="872e" class="mv lj iq mr b gy na mx l my mz">top_1 = df.iloc[:,3]</span><span id="cc72" class="mv lj iq mr b gy na mx l my mz">top_3 = df.iloc[:,2]</span><span id="bc7f" class="mv lj iq mr b gy na mx l my mz">top_5 = df.iloc[:,1]</span><span id="05bb" class="mv lj iq mr b gy na mx l my mz">xlabels = df.iloc[:,0]</span><span id="fbc8" class="mv lj iq mr b gy na mx l my mz">N =5</span><span id="7649" class="mv lj iq mr b gy na mx l my mz">ind = np.arange(N)  # the x locations for the groups</span><span id="9ae5" class="mv lj iq mr b gy na mx l my mz">width = 0.2       # the width of the bars</span><span id="8a1c" class="mv lj iq mr b gy na mx l my mz">fig, ax = plt.subplots(figsize=(12,8))</span><span id="e9e2" class="mv lj iq mr b gy na mx l my mz">rects1 = ax.bar(ind, top_1, width, color='b')</span><span id="87a1" class="mv lj iq mr b gy na mx l my mz">rects2 = ax.bar(ind + width, top_3, width, color='orange')</span><span id="0c6d" class="mv lj iq mr b gy na mx l my mz">rects3 = ax.bar(ind + 2*width, top_5, width, color='g')</span><span id="3e1b" class="mv lj iq mr b gy na mx l my mz">ax.set_xticks(ind + width)</span><span id="ef50" class="mv lj iq mr b gy na mx l my mz">ax.set_xticklabels(xlabels,fontsize=10)</span><span id="f7b5" class="mv lj iq mr b gy na mx l my mz">ax.set_xlabel("models", fontsize=12)</span><span id="5038" class="mv lj iq mr b gy na mx l my mz">ax.set_ylabel("Top-N ACC/%", fontsize=12)</span><span id="0921" class="mv lj iq mr b gy na mx l my mz">ax.set_title('Top-N ACC for 5 different models')</span><span id="d397" class="mv lj iq mr b gy na mx l my mz">ax.legend((rects1[0], rects2[0],rects3[0]),('top-1 acc', 'top-3 acc','top-5 acc'),bbox_to_anchor=(1.13, 1.01))</span><span id="8173" class="mv lj iq mr b gy na mx l my mz">def labelvalue(rects):</span><span id="758b" class="mv lj iq mr b gy na mx l my mz">for rect in rects:</span><span id="930e" class="mv lj iq mr b gy na mx l my mz">height = rect.get_height()</span><span id="5f8d" class="mv lj iq mr b gy na mx l my mz">ax.text(rect.get_x() + rect.get_width()/2., 1.01*height,</span><span id="ab18" class="mv lj iq mr b gy na mx l my mz">'%d' % int(height),ha='center', va='bottom')</span><span id="f897" class="mv lj iq mr b gy na mx l my mz">labelvalue(rects1)</span><span id="a258" class="mv lj iq mr b gy na mx l my mz">labelvalue(rects2)</span><span id="4e0c" class="mv lj iq mr b gy na mx l my mz">labelvalue(rects3)</span><span id="7491" class="mv lj iq mr b gy na mx l my mz">plt.savefig('barplot_2.png',dpi=200, format='png', bbox_inches='tight')</span><span id="5230" class="mv lj iq mr b gy na mx l my mz">plt.show()</span></pre><p id="58f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上述代码，我们为 5 款车型的 top-N ACC 保存了一个漂亮的条形图，如下所示:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/c3422e0d36aa4a3d32d404b0ec9c2f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AF3L3vvA4Dm7I6kCHwfazQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">5 款车型的前 N 名 ACC 条形图</p></figure><h1 id="a3f2" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">进步</h1><p id="ccff" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">但是，我们对这个条形图不太满意，因为条形图太多了。我们能简化显示数据吗🤔？例如，我们将前 1 名、前 3 名和前 5 名 acc 合并到一个条形图中，这意味着我们只需要 5 个条形图来显示 5 个型号的前 N 名 acc。情节中的信息要压缩。在这里，我们可以通过以下预处理输入数据来实现，其中我们减去前 5 名 acc 和前 3 名 acc 以获得差异，对前 3 名 acc 和前 1 名 acc 重复相同的操作。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/0aab308a9506a32a8698b1730b5598c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fHdrVIuvprpL2QIiKhZZuQ.png"/></div></div></figure><p id="8bc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用下面的代码绘制了一个新的条形图:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="fd7b" class="mv lj iq mr b gy mw mx l my mz">ax = df[['top-1 acc','top-3 acc','top-5 acc']].plot(kind='bar', title ="Top-N ACC for 5 different models", figsize=(12, 8), legend=True, fontsize=12,stacked=True)</span><span id="7ee7" class="mv lj iq mr b gy na mx l my mz">top_1 = df.iloc[:,3]</span><span id="a9ec" class="mv lj iq mr b gy na mx l my mz">top_3 = df.iloc[:,2]</span><span id="3d94" class="mv lj iq mr b gy na mx l my mz">top_5 = df.iloc[:,1]</span><span id="8be6" class="mv lj iq mr b gy na mx l my mz">xlabels = df.iloc[:,0]</span><span id="8e01" class="mv lj iq mr b gy na mx l my mz">ax.set_xticklabels(xlabels,fontsize=10)</span><span id="ca99" class="mv lj iq mr b gy na mx l my mz">ax.set_xlabel("models", fontsize=12)</span><span id="5354" class="mv lj iq mr b gy na mx l my mz">ax.set_ylabel("Top-N ACC/%", fontsize=12)</span><span id="da89" class="mv lj iq mr b gy na mx l my mz">for i, v in enumerate(top_1):</span><span id="a39e" class="mv lj iq mr b gy na mx l my mz">ax.text( i ,v - 2, str(v), color='black')</span><span id="74f4" class="mv lj iq mr b gy na mx l my mz">for i, v in enumerate(top_3):</span><span id="03e8" class="mv lj iq mr b gy na mx l my mz">ax.text( i ,v - 3, str(v), color='black')</span><span id="f725" class="mv lj iq mr b gy na mx l my mz">for i, v in enumerate(top_5):</span><span id="6faf" class="mv lj iq mr b gy na mx l my mz">ax.text( i ,v + 1, str(v), color='black')</span><span id="f437" class="mv lj iq mr b gy na mx l my mz">plt.savefig('barplot_2.png',dpi=200, format='png', bbox_inches='tight')</span><span id="d134" class="mv lj iq mr b gy na mx l my mz">plt.show()</span></pre><p id="354b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行代码后，我们得到一个简单的条形图，它将前 1 名 acc、前 3 名 acc 和前 5 名 acc 集成到一个条形图中。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/dce6cafb2cf5206123d280691406db81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxfCK7gCr2uiiJBgX2ysmA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">更直观的 5 款车型前 N 名 ACC 条形图</p></figure><p id="33e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一个条形图看起来非常直观和明显，尽管它包含的信息与倒数第二个有 15 个条形的条形图相同。此外，最后一个条形图的代码比倒数第二个条形图的代码短。因此，我选择在我的论文中使用新的条形图📜。</p><h1 id="3aca" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="bba6" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在这个故事中，我根据自己的经验介绍了用 Python 绘制条形图的方法。对于学生和研究人员来说，掌握如何直观地展示他们的研究数据的技能是很重要的。条形图是科学论文中最好和最常用的插图之一。我希望我的故事对你了解 it⛳️.有所帮助</p><p id="6d67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">链接到 GitHub 库:</strong>【https://github.com/Kopfgeldjaeger/Bar_graph_with_Matplotlib T2】</p><h1 id="2740" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">参考</h1><p id="f401" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这里有两个对 pandas 和 Matplotlib 有用的文档。</p><div class="nf ng gp gr nh ni"><a href="https://pandas.pydata.org/pandas-docs/stable/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">pandas 文档- pandas 1.1.2 文档</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">在文档中看到了一个错别字？想要改进现有功能？投稿指南将指导您…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">pandas.pydata.org</p></div></div></div></a></div><div class="nf ng gp gr nh ni"><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">Matplotlib . py plot . bar-Matplotlib 3 . 3 . 2 文档</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">制作条形图。这些条按照给定的对齐方式定位在 x 处。它们的尺寸由高度和宽度给出…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">matplotlib.org</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw jw ni"/></div></div></a></div></div></div>    
</body>
</html>