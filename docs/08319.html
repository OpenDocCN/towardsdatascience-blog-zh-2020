<html>
<head>
<title>Visualize from Text for COVID-19 Cases Update from Slack Bot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从 Slack Bot 的新冠肺炎案例更新的文本中可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualize-from-text-for-covid-19-cases-update-from-slack-bot-2590ea780887?source=collection_archive---------67-----------------------#2020-06-17">https://towardsdatascience.com/visualize-from-text-for-covid-19-cases-update-from-slack-bot-2590ea780887?source=collection_archive---------67-----------------------#2020-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9523" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">获得最新的新冠肺炎全球跟踪使用人类文本与命名实体识别</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a1b38ab83b6ee0775395bbc564e3975e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_pVdStSI4-EIzgxLY8R3xw.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">新冠肺炎跟踪松弛应用程序。(<em class="ky">图片作者</em>)</p></figure><p id="2eb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们能在一个地方看到所有的新冠肺炎信息，那该有多好？在这篇文章中，我们将研究如何开发一个系统，通过<strong class="lb iu">问一些自然的问题来提供全世界新冠肺炎病例的更新。</strong></p><p id="7f45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们许多人都听说过 Alexa 设备，但有些人经常使用它。它试图通过高级机器学习工作流来解释文本。我们将建立一些类似于 Alexa 的技能，可以回答相关问题。</p><p id="716c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将创建<strong class="lb iu">新冠肺炎跟踪机器人</strong>，它试图理解多种意图，提取命名实体识别(NER)值，实现自定义新冠肺炎视觉响应，并具有松散集成。</p><h1 id="2edf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">我们将讨论以下主题:</h1><ol class=""><li id="5f61" class="mn mo it lb b lc mp lf mq li mr lm ms lq mt lu mu mv mw mx bi translated">解决方案架构</li><li id="bca5" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">意图分类</li><li id="6918" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">命名实体识别</li><li id="c5ca" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">新冠肺炎海关行动</li><li id="a7ae" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">松散集成</li></ol><h1 id="57e7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.解决方案架构</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/d3630de546a4787d2f831db868f2143f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*p7tgoTv4SgT0OWlyGdrA3A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">解决方案架构(<em class="ky">图片作者</em>)</p></figure><p id="285a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ne" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> RASA </a>聊天机器人框架提供了与<a class="ae ne" href="https://api.slack.com/apps" rel="noopener ugc nofollow" target="_blank"> Slack App </a>连接的最简单方式。让我们看看 RASA 聊天机器人的幕后发生了什么。人类文本作为输入传递到 RASA 框架中的管道，以执行自然语言处理(NLP)操作。以下是 RASA 中用于识别话语的<strong class="lb iu">意图</strong>的示例可配置 NLP 管道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/9e4e27f1ae0e41336193438ff99cdd8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*cJrNd3gaBXNlayH7cs06ag.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">基本 RASA NLP 管道。(<em class="ky">作者图片</em>)</p></figure><p id="0829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">命名实体识别(NER) </strong>是流行的自然语言处理任务之一<strong class="lb iu">。</strong>从文本中获取特定的 NER 将使用 Spacy，由<a class="ae ne" href="https://wit.ai/" rel="noopener ugc nofollow" target="_blank"> wit.ai </a>提供的 duckling，以及使用 CRF 实体提取器(RASA)的自定义实体。</p><p id="eaee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，<strong class="lb iu">我们如何为 RASA Bot 生成动态视觉响应？</strong>是的，可以使用 RASA 进行自定义操作。RASA 提供了一个定制的动作服务器来实现特定的业务逻辑，以便机器人做出响应。我们的新冠肺炎跟踪器逻辑将在自定义操作中实现。自定义新冠肺炎机器人响应将有图像输出。然而，slack 应用程序只会识别可从公共 URL 访问的图像。因此，需要包含来自 RASA bot 响应的公共 URL 图像。</p><p id="cb2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我如何向 Slack 应用程序提供新冠肺炎视觉图像？</strong>这里使用了一个简单的 flask web 应用程序。整个解决方案部署在 AWS EC2 实例中。RASA 自定义动作生成图像输出，并保存在 flask app 目录的静态文件夹下。Slack 使用这个 flask 端点 URL 来访问图像。下面是样品瓶代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Flask web 应用程序访问图像。</p></figure><h1 id="6744" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">新冠肺炎案例追踪器示例:</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/3f26c0e904398cf1ffd1c1c1f455494c.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*Mntx8PP80sdqAXHYhxyYMA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">例句 1 ( <em class="ky">图片作者</em></p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/f78594ee418210755f192b0c7eb9ef34.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/format:webp/1*ZW1OUClW-WZEJRlKnMm1XQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">例句 2 ( <em class="ky">作者图片</em>)</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/a205cafae55bba5b3270bfed6f5deb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*d6yNdZ03MF87F_zwBMjxKg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">例句 3 ( <em class="ky">图片作者</em>)</p></figure><p id="3df5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，每个句子都被称为话语。RASA 框架执行配置管道中指定的意图分类和实体识别。让我们看看下面的每个主题:</p><h1 id="3693" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.意图分类</h1><p id="60fe" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">意图分类是聊天机器人的强大模块之一。这是一个分类问题，输入文本需要分类。RASA 提供各种分类算法来执行意图识别。每个意图都与要执行的特定动作相关联。</p><h1 id="cd7a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.命名实体识别</h1><p id="43e5" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">我们需要将位置名称、日期和自定义实体标识为 COVID 案例类型(活动、已确认、已恢复和死亡)。我们的管道中使用了以下库:</p><ol class=""><li id="497d" class="mn mo it lb b lc ld lf lg li nn lm no lq np lu mu mv mw mx bi translated">空间</li><li id="b52e" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">小鸭子</li><li id="2bec" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">RASA 实体提取器</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/90cdf1260e064e15ed1a429360dc7dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*gmKMkGu-BjhYzCrl7QJ02g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">样本实体提取信息。(<em class="ky">作者图片</em>)</p></figure><h2 id="b948" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">空间</h2><p id="5b3b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">Spacy 库在这里用于标识位置名称，如印度、美国、中国、澳大利亚。有不同的预训练模型可供使用。你可以点击查看空间 NER <a class="ae ne" href="https://explosion.ai/demos/displacy-ent" rel="noopener ugc nofollow" target="_blank">演示。您可以在 RASA 管道中使用 Spacy NER，如下所示:</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/578dfba88e17b65f471204d063080765.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*LaM5wNfbZDkQqwSOW7B7RQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">RASA 管道中的 Spacy NER。(<em class="ky">作者图片</em>)</p></figure><p id="aa9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以选择预先训练的模型以及从话语中提取哪种实体。我们指定了 LOC 和 GPE 实体来标识位置名称。</p><h2 id="4e9e" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">小鸭子</h2><p id="3178" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated"><a class="ae ne" href="https://duckling.wit.ai/" rel="noopener ugc nofollow" target="_blank"> Duckling </a>是一个 Haskell 库，它将文本解析成结构化数据。脸书开发了一个小鸭图书馆。它可以处理多个实体，如时间、日期、持续时间、距离、数量、温度、数量。在我们的场景中，我们使用从文本中提取日期信息。您可以在 RASA 管道中使用小鸭 NER，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/b43617929e5ec47dcb98675233badf52.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*5fuGPXdPHFO9XG7LXmABnw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">RASA 管道中的小鸭子 NER。(<em class="ky">图片作者</em>)</p></figure><p id="f3db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">小鸭库怎么安装？</p><ol class=""><li id="c238" class="mn mo it lb b lc ld lf lg li nn lm no lq np lu mu mv mw mx bi translated">安装 docker。你可以参考<a class="ae ne" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank">这里的</a>进行安装。</li><li id="b3e2" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">RASA 提供了<a class="ae ne" href="https://hub.docker.com/r/rasa/duckling" rel="noopener ugc nofollow" target="_blank">小鸭码头工人图像</a>。您可以将 docker 图像克隆为<code class="fe of og oh oi b">docker pull rasa/duckling</code></li><li id="c56c" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">您可以使用<code class="fe of og oh oi b">docker run</code>命令启动 docker 映像。</li><li id="72b5" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">使用<code class="fe of og oh oi b">docker ps</code>命令检查状态。</li></ol><p id="7437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">小鸭子在<code class="fe of og oh oi b">8000</code>港口奔跑。你可以在你的 RASA 管道中提到 duckling URL 和具体的实体名称。</p><h2 id="2899" class="nr lw it bd lx ns nt dn mb nu nv dp mf li nw nx mh lm ny nz mj lq oa ob ml oc bi translated">CRF 实体提取器</h2><p id="b4ab" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">条件随机字段(CRF)是 RASA 框架的一个组件，用于标识定制实体。我们使用来标识自定义实体，如<strong class="lb iu">电晕状态</strong>(确认、活动、恢复和死亡)。RASA 框架自行训练自定义实体。</p><h1 id="37bf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.新冠肺炎海关行动</h1><p id="2c55" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">现在，我们如何根据给定的人类文本生成视觉输出？到目前为止，我们从文本中解释了意图和实体。它帮助我们实现自定义新冠肺炎跟踪器逻辑。互联网上有新冠肺炎的开源 API，它提供每个国家的信息。我们将使用来自 API 的新冠肺炎信息来绘制可视化输出。下面是项目中使用的 COVID API:</p><ol class=""><li id="4074" class="mn mo it lb b lc ld lf lg li nn lm no lq np lu mu mv mw mx bi translated"><a class="ae ne" href="https://api.covid19api.com" rel="noopener ugc nofollow" target="_blank">邮递员新冠肺炎 API </a></li><li id="58d7" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated"><a class="ae ne" href="https://corona.lmao.ninja/v2" rel="noopener ugc nofollow" target="_blank">小说电晕 API </a></li></ol><p id="79ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里找到自定义动作 Python 代码<a class="ae ne" href="https://github.com/narendraprasath/COVID-19-Tracker-Bot/blob/master/COVID-19-Tracker-Chatbot_Code/CovidTracker.py#L150" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="6539" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.松散集成</h1><p id="2efc" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在 Slack 应用中设置 RASA bot 的最后阶段。</p><ol class=""><li id="1f80" class="mn mo it lb b lc ld lf lg li nn lm no lq np lu mu mv mw mx bi translated">在此创建一个新的 Slack 应用<a class="ae ne" href="https://api.slack.com/apps" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="420c" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">转到 OAuth 令牌&amp;重定向 URL &gt;订阅 Bot 令牌范围:channels.history，chat:write，groups:history，im:history，mpim:history。</li><li id="9ccd" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">OAuth 令牌&amp;重定向 URL &gt;工作区的令牌。您将获得 OAuth 访问令牌作为<code class="fe of og oh oi b">xoxb-xxxxxxxxx.</code></li><li id="7423" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">点击<code class="fe of og oh oi b">Install App to Workspace.</code></li><li id="6ad4" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">获取 OAuth 访问令牌，在 RASA 中打开<code class="fe of og oh oi b">credentials.yml</code>文件，并更改值<code class="fe of og oh oi b">slack_token: “access-token&lt;xoxb-xxxxxxx&gt;”.</code></li><li id="ff9f" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">转到事件订阅&gt;订阅 bot 事件:message.channels、message.groups、message.im、message.mpim。</li><li id="b2eb" class="mn mo it lb b lc my lf mz li na lm nb lq nc lu mu mv mw mx bi translated">现在，你已经成功地在 Slack 应用中集成了 RASA bot。</li></ol><p id="a942" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你！您已成功完成时差集成。<strong class="lb iu">新冠肺炎追踪者机器人</strong>源代码可在<a class="ae ne" href="https://github.com/narendraprasath/COVID-19-Tracker-Bot/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中获得。如果你有什么要说的，请提出你的意见。</p><p id="760b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！你可以通过<a class="ae ne" href="https://www.linkedin.com/in/narendra-prasath/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系到我。</p><h1 id="2c1d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">资源:</strong></h1><div class="oj ok gp gr ol om"><a href="https://documenter.getpostman.com/view/10724784/SzYXXKmA?version=latest" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">covid 19-印度 API</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">一个志愿者驱动的新冠肺炎统计 API&amp;印度病人追踪(非官方)…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">documenter.getpostman.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://corona.lmao.ninja/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">NovelCOVID API</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">更新:1591782903866，病例:7342359，今日病例:31527，死亡:414124，今日死亡:1152，痊愈…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">科罗娜. lmao .忍者</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://rasa.com/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">Rasa:开源对话式人工智能</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">利用我们的开源机器学习框架，在文本和语音中构建上下文相关的人工智能助手和聊天机器人。缩放它…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">rasa.com</p></div></div><div class="ov l"><div class="pc l ox oy oz ov pa ks om"/></div></div></a></div><div class="oj ok gp gr ol om"><a href="https://duckling.wit.ai/" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">小鸭子</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">用 Clojure 编写的日期解析器</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">小鸭. wit.ai</p></div></div></div></a></div></div></div>    
</body>
</html>