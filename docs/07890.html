<html>
<head>
<title>Geospatial adventures. Step 4. The Colour of Magic or If I Don’t See It — It Doesn’t Exist.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地理空间冒险。第四步。魔法的颜色，或者如果我看不到它，它就不存在。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/geospatial-adventures-step-4-the-colour-of-magic-or-if-i-dont-see-it-it-doesn-t-exist-56cf7fb33ba9?source=collection_archive---------51-----------------------#2020-06-11">https://towardsdatascience.com/geospatial-adventures-step-4-the-colour-of-magic-or-if-i-dont-see-it-it-doesn-t-exist-56cf7fb33ba9?source=collection_archive---------51-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/71cfef7b3932f78433456cc4cf657929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*znG9LlPMkGhUWWut5nDDqg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用KeplerGL生成</p></figure><div class=""/><div class=""><h2 id="c273" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">快速浏览几何/地理对象(建筑多边形、道路、水路等)的可视化工具。).</h2></div><p id="6dce" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><em class="lq">从</em> <a class="ae lr" href="https://medium.com/@datingpolygons/geospatial-adventures-step-3-polygons-grow-on-r-trees-2f15e2712537" rel="noopener"> <em class="lq">继续第三步</em> </a> <em class="lq">。现在我们已经有了约克郡东骑马区的所有(OSM已知的)建筑的数据集，让我们看看可视化数据的方法。</em></p><p id="c8a0" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">简单回顾一下——在上一篇文章中，我们观察了英国的地方政府多边形，并把它们与OSM建筑多边形结合起来。然后，我们讨论了一种将所有建筑多边形归属于相应的地方当局多边形的方法，并集中讨论了约克郡的East Riding，这是由它的形状之美和与赫尔的邻近性所激发的。然后，我们继续创造一个非常不恰当的结果视觉化，我们即将纠正它。这篇文章是关于在地图上查看几何/地理数据的不同方法。</p><p id="b7ae" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在我们能正确开始之前，我们确实需要一些小步骤。</p><p id="4e6b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">首先，让我们加载我们在上一篇文章中使用的所有库:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="f2b5" class="mb mc jf lx b gy md me l mf mg">import geopandas as gpd<br/>import swifter<br/>import numpy as np<br/>from shapely.geometry import Polygon, GeometryCollection</span></pre><p id="5194" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在此之上，我们仍然有我们的数据框架和属性化的建筑，我们称之为“bd_ery”。让我们快速浏览一下:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="6941" class="mb mc jf lx b gy md me l mf mg">bd_ery.head()</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mh"><img src="../Images/749cf163857181ac0b71dd5cbeef1ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdZJNn1LdIApKaYaJE48YA.png"/></div></div></figure><h2 id="b48d" class="mb mc jf bd mi mj mk dn ml mm mn dp mo ld mp mq mr lh ms mt mu ll mv mw mx my bi translated">用GeoPandas绘图</h2><p id="7c54" class="pw-post-body-paragraph ku kv jf kw b kx mz kg kz la na kj lc ld nb lf lg lh nc lj lk ll nd ln lo lp ij bi translated">我们将逐步进行，首先，让我们看看地理数据框架本身可以做些什么，因为除了显示几何对象之外，它还具有一些额外的绘图功能。如果你是GeoPandas的新手——看看本系列的第二篇文章<a class="ae lr" rel="noopener" target="_blank" href="/geospatial-adventures-step-2-pandas-vs-geopandas-16e842d0e3a7"/></p><p id="59bc" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们仍然需要使用MatPlotLib，所以让我们继续加载它。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="df92" class="mb mc jf lx b gy md me l mf mg">import matplotlib.pyplot as plt<br/>%matplotlib inline</span></pre><p id="0305" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">还有一件事——策划整个地方当局将使我们所有美丽的建筑形状变得非常小，这将是不可原谅的。因此，相反，我们将首先利用我们创建的图块来对它们进行属性化(<a class="ae lr" href="https://medium.com/analytics-vidhya/geospatial-adventures-step-3-polygons-grow-on-r-trees-2f15e2712537" rel="noopener">详见上一篇文章</a>)。我们不想处理它们的多边形，然而，我们需要的只是一种简单的方法来选择位于特定瓦片中的建筑物。为此，我们将把多边形转换成id。最简单的方法是获取左下角的坐标(整数形式)并将它们合并成一个12位的id(您也可以考虑散列多边形的字符串表示，但是我们不需要走那么远)。您可以将我们的12位id保存为字符串或整数(后者占用的内存更少)。我将把它们保存为字符串，因为无论如何它们都必须留在列表中，所以DataFrame最终会把它们视为对象。<br/>转换只需一行代码，使用一些基本的列表理解即可完成:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="d97f" class="mb mc jf lx b gy md me l mf mg">bd_ery['ids']=bd_ery['grid'].swifter.apply(<br/>    lambda x: [<br/>        ''.join(np.array(a.exterior)[0].astype(int).astype(str)) for a in x<br/>    ]<br/>)</span></pre><p id="f391" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我将使用瓷砖' 499323426360 '没有任何具体原因，除了它有相当多的建筑，所以它非常适合我们的目的。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="4e03" class="mb mc jf lx b gy md me l mf mg">fig, ax = plt.subplots(1, figsize=(15, 15))<br/>ax.axes.get_xaxis().set_visible(False)<br/>ax.axes.get_yaxis().set_visible(False)<br/>bd_ery[bd_ery['ids'].apply(lambda x: 1 if '499323426360' in x else 0) == 1].plot(ax=ax)</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/2c1e801e068ed79d1275f43aeaf0f717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*OVRH3JoL3PZGvcoN7jkEWQ.png"/></div></figure><p id="a8fa" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">好吧，这还是有些乏味，不是吗？你肯定能看到一堆建筑形状，但也就这些了。当然，我们可以做得更多一点。</p><p id="d998" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们这次使轴可见，让我们也根据建筑的类型给每个建筑分配颜色，让我们在看的时候放一张色图。<br/>网格线，有人吗？哦，好吧，网格线也是…那图例呢？是的，是的，好的…</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="1ef1" class="mb mc jf lx b gy md me l mf mg">fig, ax = plt.subplots(1, figsize=(15, 15))<br/>colormap="RdYlBu"<br/>ax.grid()<br/>bd_ery[bd_ery['ids'].apply(lambda x: 1 if '499323426360' in x else 0) == 1].plot(<br/>    column='type',<br/>    ax=ax, <br/>    cmap=colormap, <br/>    legend=True<br/>)</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/af46ec6d76b9db1ec1d867a573f6b056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWsyacO64-87fqb0SMmwtg.png"/></div></div></figure><p id="b599" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">那更好…这实际上在合适的人手里是有用的，尤其是考虑到制作一个这样的东西是多么容易。把它贴在你的网络应用或交互式仪表盘上，或者至少把截图粘贴到一个中型博客上，假装你知道你在说什么。</p><p id="a816" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然而，我们还没有完全达到目标。我们可以做得更好。</p><p id="5870" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">输入…</p><h2 id="9f04" class="mb mc jf bd mi mj mk dn ml mm mn dp mo ld mp mq mr lh ms mt mu ll mv mw mx my bi translated"><strong class="ak">叶子</strong></h2><p id="a209" class="pw-post-body-paragraph ku kv jf kw b kx mz kg kz la na kj lc ld nb lf lg lh nc lj lk ll nd ln lo lp ij bi translated">关于folium的伟大之处在于，虽然它仍然完全由您的应用程序控制，并且输出仍然可以用于webapps和仪表盘，但输出是一个html文件，这使用户能够对生成的地图进行大量控制。是的，这是一张地图，我们现在要在实际的地图上画出我们可爱的多边形！</p><p id="bf74" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在我们开始多边形之前，让我们看看是否可以自己创建地图。奔跑</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="2854" class="mb mc jf lx b gy md me l mf mg">!pip install folium</span></pre><p id="b314" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">如果你还没有，让我们加载库和底图。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="0654" class="mb mc jf lx b gy md me l mf mg">import folium<br/>state_geo = '<a class="ae lr" href="http://geoportal1-ons.opendata.arcgis.com/datasets/01fd6b2d7600446d8af768005992f76a_4.geojson'" rel="noopener ugc nofollow" target="_blank">http://geoportal1-ons.opendata.arcgis.com/datasets/01fd6b2d7600446d8af768005992f76a_4.geojson'</a></span></pre><p id="fb8f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们还需要传递一个起点，这样leav就知道我们要找的是地图的哪个部分。这需要以纬度/经度格式完成，因此我将创建一个迷你地理数据框架，以我们的切片中心作为唯一的点，然后使用crs转换方法来获得纬度/经度。这是一种有点复杂的方式，但它确实有效。曾经有一篇Hannah Fry(BBC4科学播客fame——很棒，看看吧)的优秀博客文章，其中有转换代码，你仍然可以在GitHub上找到用Python写的版本，但我相信博客本身已经不在了。我觉得这是值得一提的，因为我仍然偶尔使用这些代码，并且知道你仍然可以在那里找到它的版本。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="eb50" class="mb mc jf lx b gy md me l mf mg">from shapely.geometry import Point<br/>tile = gpd.GeoDataFrame(<br/>    {'geometry':[Point(499323+1000,426360+1000)]}<br/>)<br/>tile.crs = 'epsg:27700'<br/>tile = tile.to_crs(epsg=4326)</span></pre><p id="afac" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这为我们处理了转换，现在我们要做的就是绘制:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="8041" class="mb mc jf lx b gy md me l mf mg">m = folium.Map(location=[tile.geometry.iloc[0].y, tile.geometry.iloc[0].x], zoom_start=15)<br/>m</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/40db0f1445caddd125e7807fa992eafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwDafM6aT2d3sl2T2Eithw.png"/></div></div></figure><p id="7647" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">看起来有些眼熟？</p><p id="3da9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">现在让我们画一些多边形。</p><p id="34e6" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">首先，我们将把图块的内容转换成一个单独的数据帧，并将其转换成epsg:4326，这样整个事情就更容易理解了:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="6755" class="mb mc jf lx b gy md me l mf mg">bd_tile = bd_ery[<br/>    bd_ery['ids'].apply(lambda x: 1 if '499323426360' in x else 0) == 1<br/>].to_crs('epsg:4326').reset_index(drop=True)</span></pre><p id="9799" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">现在我们可以开始了:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="a7fa" class="mb mc jf lx b gy md me l mf mg">folium.GeoJson(bd_tile['geometry'].to_json()).add_to(m)<br/>m</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/c811fd53ca08ab213e1ab45f4f6f6079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_D3a2cZ5UTSTDdAjANIRTw.png"/></div></div></figure><p id="d5b2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">啊哈！我们快到了！请注意，我们只是在之前的地图上添加了一些东西，并没有重新绘制整个地图。</p><p id="cba4" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们给它添加一些样式。我要从Seaborn那里偷调色板，把它变成一个字典，然后把它传到leav。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="db16" class="mb mc jf lx b gy md me l mf mg">import seaborn as sns<br/>types = list(bd_tile['type'].unique())<br/>color_dict = dict(<br/>    zip(<br/>        types,<br/>        sns.color_palette("Paired", len(types)).as_hex()<br/>    )<br/>)<br/>m = folium.Map(<br/>    location=[<br/>        tile.geometry.iloc[0].y,<br/>        tile.geometry.iloc[0].x<br/>    ],<br/>    zoom_start=15<br/>)<br/>folium.GeoJson(<br/>    bd_tile[['osm_id', 'type', 'geometry']].to_json(),<br/>    style_function = lambda feature: {<br/>        'fillColor': color_dict[feature['properties']['type']],<br/>        'color': 'black',<br/>        'weight': 0.2,<br/>        'fillOpacity': 0.7<br/>    }<br/>).add_to(m)<br/>m</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/29f47fb6af9174b05a690f008988b198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-J7M4ecN_RFDPHdEEBb9w.png"/></div></div></figure><p id="ffec" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然后，您可以像下面这样简单地将其保存为html:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="d5bc" class="mb mc jf lx b gy md me l mf mg">m.save_to('map.html')</span></pre><p id="caca" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">还不算太差，但还是有一些弊端。除非你准备创建一个自定义的html图例，就像这里的<a class="ae lr" href="https://nbviewer.jupyter.org/gist/talbertc-usgs/18f8901fc98f109f2b71156cf3ac81cd" rel="noopener ugc nofollow" target="_blank"/>一样，否则你会陷入没有图例的困境。标准方法只允许添加自动生成的颜色图，这对于分类变量来说一点也不好玩。还有另一种方法使用choropleth方法创建相同的地图，你可以在这里选择<a class="ae lr" href="https://nbviewer.jupyter.org/github/python-visualization/folium/blob/master/examples/GeoJSON_and_choropleth.ipynb" rel="noopener ugc nofollow" target="_blank"/>，但是同样没有可定制的图例和工具提示/弹出窗口。后者你可以通过添加圆形物体到多边形质心并混合它们。这些家伙可以有弹出窗口和工具提示，所以它让你的生活变得更容易一点。不过，你可能明白我的意思——还有另一个选择，我认为这可能是最好的方法。</p><p id="9884" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">进入</p><h2 id="7ed9" class="mb mc jf bd mi mj mk dn ml mm mn dp mo ld mp mq mr lh ms mt mu ll mv mw mx my bi translated"><strong class="ak">开普勒格尔</strong></h2><p id="8f43" class="pw-post-body-paragraph ku kv jf kw b kx mz kg kz la na kj lc ld nb lf lg lh nc lj lk ll nd ln lo lp ij bi translated">你可以在这里阅读<a class="ae lr" href="https://kepler.gl/" rel="noopener ugc nofollow" target="_blank">。它可以用在jupyter笔记本上，</a><a class="ae lr" rel="noopener" target="_blank" href="/kepler-gl-jupyter-notebooks-geospatial-data-visualization-with-ubers-opensource-kepler-gl-b1c2423d066f">这里</a>有一篇非常详细的文章(包括最后的安装说明)。它不是没有一些缺点，因为它不能通过笔记本本身的代码完全控制，地图需要一些手动定制。尽管如此，它仍然可以保存为html格式。</p><p id="634d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">让我们看看开普勒的例子。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="54d7" class="mb mc jf lx b gy md me l mf mg">from keplergl import KeplerGl<br/>map_1 = KeplerGl(height=500)</span></pre><p id="badf" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">Height参数是指jupyter中窗口的大小。</p><p id="ea10" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">现在我们要做的就是将地理数据框添加到地图对象中。请确保不要传递任何带有几何对象的其他列，因为这会使其混淆。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="b359" class="mb mc jf lx b gy md me l mf mg">map_1.add_data(<br/>    data=bd_tile[['osm_id', 'type', 'geometry']], <br/>    name='Building types'<br/>)<br/>map_1</span></pre><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/4a3bbd6372a7ad00e0db114e644b68f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7x8XEaRqWnYtmDWo6568aw.png"/></div></div></figure><p id="5d05" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">看起来很熟悉，第一眼看上去没什么印象。关键是——从现在开始，您可以非常轻松地进行定制，并将其放在需要的地方。</p><p id="df04" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">你所需要做的就是点击左上角带箭头的小方块，进入下面的菜单:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nk"><img src="../Images/c30087b36e2683624f89e0dd482da193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N6qXi462rvrUXKao-ZrqgQ.png"/></div></div></figure><p id="d148" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在第一个(层)菜单中，您可以调整对象的颜色和边界，颜色可以由您上传的数据帧的列决定:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/541891bad8021b39d946f8821e4f4abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1I2jUIdiZ5wei24PkdZ-4A.png"/></div></div></figure><p id="3b36" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">交互菜单允许你控制工具提示的内容。右边的菜单允许你切换到3D模式，添加图例等等。同样，3D表示的高度可以由数据框列决定，也可以设置为特定值。</p><p id="8ad7" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">你还可以放大和缩小，移动到其他位置，改变视角等。</p><p id="06ee" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">这是一个3D效果的示例，根据类型进行颜色编码，并显示带有osm_id和类型的工具提示:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/4685b0e8e88a7ed16015d4e852f891f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*icYFl5ZvG3KaBKhUbr-JmQ.png"/></div></div></figure><p id="6ede" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最后一步——将其保存为html格式并分享出去…</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="3a51" class="mb mc jf lx b gy md me l mf mg">map_1.save_to_html(file_name='kepler_example.html')</span></pre><p id="260d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">还不错…唯一的主要缺点是必须手动将最终图像调整到正确的状态，所以这只对webapp中的一次性演示或静态数据表示有好处。尽管如此，注意这个领域——这些缺点可能会相对较快地得到纠正。</p><p id="6f1b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">哦，对了……差点忘了——标题图片是威斯敏斯特所有的建筑，都是由同一个开普勒格尔建造的。这实际上指出了它的另一个优势——它可以处理相当多的数据，因此在地图上绘制超过20000个多边形对象根本不是问题。</p><p id="7f3b" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">今天到此为止。下次—我们来看看<a class="ae lr" href="https://medium.com/@datingpolygons/geospatial-adventures-step-5-leaving-the-flatlands-or-flying-over-the-sea-of-polygons-846e45c7487e" rel="noopener">光栅文件及其分析/解释</a>。</p><h2 id="c875" class="mb mc jf bd mi mj mk dn ml mm mn dp mo ld mp mq mr lh ms mt mu ll mv mw mx my bi translated"><strong class="ak">还在这个系列:</strong></h2><p id="6a71" class="pw-post-body-paragraph ku kv jf kw b kx mz kg kz la na kj lc ld nb lf lg lh nc lj lk ll nd ln lo lp ij bi translated"><a class="ae lr" href="https://medium.com/@datingpolygons/geospatial-adventures-step-1-shapely-e911e4f86361" rel="noopener"> <em class="lq">地理空间历险记。第一步:匀称。</em>T11】</a></p><p id="0cea" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lr" rel="noopener" target="_blank" href="/geospatial-adventures-step-2-pandas-vs-geopandas-16e842d0e3a7">地理空间冒险。第二步:熊猫大战地球熊猫</a></p><p id="10c7" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lr" href="https://medium.com/analytics-vidhya/geospatial-adventures-step-3-polygons-grow-on-r-trees-2f15e2712537" rel="noopener"> <em class="lq">地理空间冒险。第三步。多边形长在R树上</em>T5】</a></p><p id="7319" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lr" href="https://medium.com/@datingpolygons/geospatial-adventures-step-5-leaving-the-flatlands-or-flying-over-the-sea-of-polygons-846e45c7487e" rel="noopener"> <em class="lq">地理空间历险记。第五步。离开平地或飞越多边形的海洋</em> </a></p></div></div>    
</body>
</html>