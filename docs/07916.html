<html>
<head>
<title>Data Exploration and Analysis Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 进行数据探索和分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-exploration-and-analysis-using-python-e564473d7607?source=collection_archive---------10-----------------------#2020-06-12">https://towardsdatascience.com/data-exploration-and-analysis-using-python-e564473d7607?source=collection_archive---------10-----------------------#2020-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0a46" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让您的数据说话的简单方法</h2></div><p id="50be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据探索是数据分析和模型构建的一个关键方面。如果不花大量时间去理解数据及其模式，就无法构建高效的预测模型。在由数据清理和预处理组成的数据科学项目中，数据探索占据了大部分时间。</p><p id="7684" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我将通过简单的解释和 Python 代码片段来解释数据探索中涉及的各个步骤。数据探索中涉及的关键步骤有:</p><blockquote class="le lf lg"><p id="b363" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">&gt;加载数据<br/> &gt;识别变量<br/> &gt;变量分析<br/> &gt;处理缺失值<br/> &gt;处理离群值<br/> &gt;特征工程</p></blockquote><p id="6518" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">加载数据并识别变量</strong>:</p><p id="3c62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据来源可能因数据库和网站而异。数据源被称为原始数据。原始数据不能直接用于建模，因为它不一致，不适合预测。必须对异常和缺失值进行处理。<strong class="kk iu">变量可以是不同的类型，如字符、数字、分类和连续</strong>。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/eb4595672905d92fcf22a4bc59cbe899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MKf_S6PGmTmGtcj2FgYK4Q.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">可变类型</p></figure><p id="3dad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确定预测值和目标变量也是建立模型的关键步骤。<strong class="kk iu"> Target 是因变量，predictor 是独立变量，基于该变量进行预测。</strong>分类变量或离散变量是那些无法用数学方法处理的变量。它由 0 和 1 等固定值组成。另一方面，连续变量可以用数学函数来解释，比如求所有值的平均值或总和。您可以使用一系列 Python 代码来理解数据集中的变量类型。</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="34f3" class="mg mh it mc b gy mi mj l mk ml"><strong class="mc iu">#Import required libraries</strong><br/>import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="9469" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">#Load the data</strong><br/>titan=pd.read_csv("../input/titan.csv")</span><span id="778e" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">#get an overview of the data</strong><br/>titan.head()<br/>titan.tail()<br/>titan.sample(10)<br/><br/><strong class="mc iu">#identify variable type</strong><br/>titan.dtypes<br/>titan.info()<br/>titan.describe()</span></pre><p id="8140" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">变量分析:</strong></p><p id="edde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">变量分析有三种方式，<strong class="kk iu">单变量分析，双变量分析，多变量分析</strong>。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/bdd4a657ac08a6e330ece0fe309a842c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*nS6WoUIYrSfYbOO_s-38Bg.jpeg"/></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">变量分析</p></figure><p id="afc2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">单变量分析</strong>用于突出缺失值和异常值。这里对每个变量的范围和分布进行单独分析。<strong class="kk iu">分类变量和连续变量的单变量分析不同。</strong>对于分类变量，您可以使用频率表来了解每个类别的分布情况。对于连续变量，你必须了解变量的中心趋势和扩散。可以用均值、中值、众数等来衡量。它可以使用箱线图或直方图来可视化。</p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="31c6" class="mg mh it mc b gy mi mj l mk ml"><strong class="mc iu">#Understand various summary statistics of the data</strong><br/>include =['object', 'float', 'int'] <br/>titan.describe(include=include)<br/>titan.describe()</span><span id="cae9" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">#Get count of values in a categorical variable</strong><br/>titan.survived.value_counts()</span><span id="5652" class="mg mh it mc b gy mm mj l mk ml">titan.age.hist(figsize=(10,5))</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/a5fff12385eb5247b06a94472dc4c298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*MD__wETngmGwlgnP6dw72g.jpeg"/></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">柱状图</p></figure><p id="e5d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">双变量分析</strong>用于找出两个变量之间的关系。可以对分类变量和连续变量的组合进行分析。<strong class="kk iu">散点图适合分析两个连续变量。</strong>表示变量之间的线性或非线性关系。<strong class="kk iu">条形图有助于理解两个分类变量之间的关系。</strong>某些统计测试也用于有效理解双变量关系。Scipy 库有大量的模块可以在 Python 中执行这些测试。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mq"><img src="../Images/c1a679ffac3bfd716c5da5c28ada7519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PtWT7cP6XfBxxWKZSGfkRQ.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">双变量分析</p></figure><p id="7b02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Matplotlib 和 Seaborn 库可用于绘制不同的关系图，帮助可视化不同类型变量之间的二元关系。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/6ad7ffd82cafdf00fc9cd999724e8b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*rGg3_H339nChbnt8CL8Kxg.jpeg"/></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">散点图</p></figure><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="788f" class="mg mh it mc b gy mi mj l mk ml"><strong class="mc iu">iris = sns.load_dataset("iris")</strong><br/>sns.relplot(x = 'sepal_length', y = 'petal_length', hue='species',data = iris)</span><span id="4959" class="mg mh it mc b gy mm mj l mk ml">relplot = sns.catplot(x="pclass", hue="who", col="survived",  <br/>      data=titan, kind="count",  <br/>    height=4, aspect=.7);  <br/>relplot</span></pre><p id="271e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">处理缺失值:</strong></p><p id="8968" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据集中缺少的值会降低模型拟合度。<strong class="kk iu">由于无法对数据进行全面分析，这可能会导致模型出现偏差。</strong>行为以及与其他变量的关系无法正确推导。它会导致错误的预测或分类。缺失值可能是由于数据提取或数据收集中的问题造成的，这些问题可分为 MCAR、马尔和 NMAR。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ms"><img src="../Images/55164fb688ac332994a11a18169a36b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*grOwrqRoTktUMN0iZQwftQ.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">缺少值</p></figure><p id="ac4a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">缺失值可以通过删除、均值/众数/中位数插补、KNN 插补或使用预测模型来处理。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mt"><img src="../Images/2fb908387bb6a9a0e38a62170035c3ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7C1GWGW-NPc8m8ww8LjiEw.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">处理缺失值</p></figure><p id="5859" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">您可以使用 Python 中名为 Missingno 的库直观地分析缺失的数据。</strong></p><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="eca7" class="mg mh it mc b gy mi mj l mk ml">import missingno as msno<br/>msno.bar(titan)<br/>msno.heatmap(titan)</span><span id="9917" class="mg mh it mc b gy mm mj l mk ml">np.mean(titan['age'])</span><span id="f504" class="mg mh it mc b gy mm mj l mk ml">from scipy import stats<br/>stats.mode(titan['embarked'])</span><span id="9997" class="mg mh it mc b gy mm mj l mk ml">titancopy['age'].fillna(29,inplace=True)<br/>titancopy['embarked'].fillna("S", inplace=True)</span></pre><p id="42a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">处理异常值:</strong></p><p id="8e25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">异常值可能自然出现在数据中，也可能是由于数据输入错误造成的。它们可以彻底改变数据分析和统计建模的结果。<strong class="kk iu">异常值很容易通过可视化方法检测，如箱线图、直方图和散点图。</strong>异常值的处理类似于缺失值，通过删除观察值、转换观察值、宁滨或分组观察值、将其视为单独的组或输入值。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi mu"><img src="../Images/cf79e6ca1779bf554f5198d5f5948fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j9JuaBcwR-4zc1RUmo8spA.jpeg"/></div></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">箱形图</p></figure><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="5270" class="mg mh it mc b gy mi mj l mk ml">import plotly.express as px<br/>fig = px.box(titan,x='survived',y='age', color='pclass')<br/>fig.show()</span><span id="5d0f" class="mg mh it mc b gy mm mj l mk ml">px.box(titan, y='age')</span><span id="eaa6" class="mg mh it mc b gy mm mj l mk ml">px.box(titan,x='survived',y='fare', color='pclass')</span><span id="d7be" class="mg mh it mc b gy mm mj l mk ml"><em class="lh">#Adding trendline to the data</em><br/>x=iris.sepal_length<br/>y=iris.petal_width<br/>plt.scatter(x, y)<br/><br/>z = np.polyfit(x, y, 1)<br/>p = np.poly1d(z)<br/>plt.plot(x,p(x),"y--")<br/><br/>plt.show()</span></pre><p id="bfb4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">特征工程:</strong></p><p id="b5ce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">特征工程是从现有数据中提取更多信息的过程。特征选择也可以是它的一部分。特征工程的两种常用技术是变量转换和变量创建。在变量转换中，使用特定函数转换现有变量。例如，一个数可以用它的对数值来代替。另一种技术是从现有变量创建一个新变量。例如，将 dd/mm/yy 格式的日期字段拆分为日期、月份和年份列。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/2c4b38f26a86d952e04b646d23b5f91f.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*t9Scs9RENxusk_GcxBE-hQ.jpeg"/></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">变量变换</p></figure><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="f8cc" class="mg mh it mc b gy mi mj l mk ml">titancopy = titan.copy()</span><span id="9163" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">#variable transformation</strong><br/>titancopy['alive'].replace({'no':0,'yes':1}, inplace=True)</span><span id="ac57" class="mg mh it mc b gy mm mj l mk ml"><strong class="mc iu">#Convert boolean to integer</strong><br/>titancopy["alone"]=titancopy["alone"].astype(int)</span></pre><p id="ead5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外两种数据转换技术是对分类变量进行编码和对连续变量进行缩放以使数据标准化。这取决于用于评估的模型，因为有些模型接受分类变量。</p><p id="343b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">不相关的特征会降低模型的准确性。</strong>可以自动或手动选择功能。相关矩阵用于可视化特征之间的相互关系或与目标变量的关系。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/e788ffd85258da565f95292051923544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*-G4UK1utF9AiBodU4pTMZQ.jpeg"/></div><p class="lx ly gj gh gi lz ma bd b be z dk translated">相关矩阵</p></figure><pre class="lm ln lo lp gt mb mc md me aw mf bi"><span id="4312" class="mg mh it mc b gy mi mj l mk ml">titancopy.corr()</span><span id="fca7" class="mg mh it mc b gy mm mj l mk ml">plt.figure(figsize=(10,10))<br/>corr = titan.corr()<br/>ax = sns.heatmap(<br/>    corr, <br/>    vmin=-1, vmax=1, center=0,<br/>    cmap=sns.diverging_palette(20, 220, n=200),<br/>    square=True, annot=True<br/>)<br/>ax.set_xticklabels(<br/>    ax.get_xticklabels(),<br/>    rotation=45,<br/>    horizontalalignment='right'<br/>)<br/>ax.set_yticklabels(<br/>    ax.get_yticklabels(),<br/>    rotation=45,<br/><br/>);</span></pre><p id="f15a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.SelectKBest.html#sklearn.feature_selection.SelectKBest" rel="noopener ugc nofollow" target="_blank"> scikit-learn 库</a>提供了一些好的类，比如 SelectBest，用于从给定的数据集中选择特定数量的特征。同一库中的基于树的分类器可用于获得特征重要性分数。</p><p id="47d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这涵盖了数据探索中涉及的一些关键步骤。根据数据的大小和模型的要求，每个步骤都可以重复。<strong class="kk iu">数据科学家在数据预处理上花费的时间最多，因为数据质量直接影响模型的成功。</strong></p><p id="3ade" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里显示的所有代码片段都在<a class="ae mp" href="https://www.kaggle.com/krrai77/exploratory-data-analysis-and-visualization" rel="noopener ugc nofollow" target="_blank">探索性数据分析和可视化 Kaggle 笔记本</a>中执行。</p></div></div>    
</body>
</html>