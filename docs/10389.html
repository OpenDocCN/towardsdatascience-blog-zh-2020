<html>
<head>
<title>A Real-Time Product Recommender in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的实时产品推荐器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-real-time-product-recommender-in-python-c91d16554a0c?source=collection_archive---------39-----------------------#2020-07-21">https://towardsdatascience.com/a-real-time-product-recommender-in-python-c91d16554a0c?source=collection_archive---------39-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/88ca6f19eaf4cad73533f4c198d4fdda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WHOwWXeJUwQUEoO3lUrxyg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">克里斯蒂安·威迪格在<a class="ae jg" href="https://unsplash.com/s/photos/amazon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="3879" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">我们如何调整我们的电子购物体验？</h2></div><p id="0c1d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可能会同意，我们这些熟悉网上购物的人都有在亚马逊购物的经历。多年来，它无疑已经成为最大的电子购物中心之一。因此，当我们搜索某样东西时，我们可以依靠亚马逊的搜索算法，根据我们的搜索词为我们提供几个最佳选择。让我们来谈谈如何轻松使用基于亚马逊结果的实时产品推荐器，并微调我们的购物体验。</p><h2 id="4650" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">这个想法背后的动机</h2><p id="ff1a" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">驱动的想法是，看看我们能使我们的购物过程变得多么健壮和用户友好。比如说，我们想买一副耳机。如果我们在亚马逊上搜索，它会给出一个大约 25-30 种产品的列表。现在，每个买家都有一些偏好。这些偏好中最重要的是品牌规格和定价。除此之外，买家还会考虑其他几个因素，如产品受欢迎程度、产品评级、产品评论和最佳价格匹配。此外，作为用户，我们有时也会觉得，如果我们能一眼看到几个产品提供的规格，并从专家的角度做出决定，那就太好了。</p><p id="672f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，每个顾客的需求都不一样。比方说，一些购物者关注评论，一些关注评级，而另一些则坚持价格。所以，如果我们能给用户提供决定他/她想关注什么的权力，这不是很好吗？所以，让我们看看如何实现这些目标。</p><h2 id="a292" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">这个想法</h2><p id="4f5b" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">这个想法是给每个产品分配一个基于字段的分数，用户可以在购物时查看。例如，我们分配一个产品，基于流行度的分数，基于评论的分数，等等。随后，我们根据用户偏好计算加权分数。</p><p id="3882" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们用一个具体的例子来看看这个想法。比如说，我们想买一个耳机。因此，我们搜索并获得一个包含 25 个项目的列表。我们根据评级为每个产品分配可变分数 x1，根据受欢迎程度分配 x2，根据评论分配 x3，根据价格限制分配 x4。现在，我们询问用户他/她是否有任何偏好，比如更关注某个方面。例如，如果用户希望更多地关注评论，我们将整体得分计算如下:</p><blockquote class="ms mt mu"><p id="4f61" class="ky kz mv la b lb lc kk ld le lf kn lg mw li lj lk mx lm ln lo my lq lr ls lt im bi translated">y= x1+x2+ax3+x4</p></blockquote><p id="225b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这给了 x3 更多的权重。如果用户没有这样的偏好，那么我们可以计算为。</p><blockquote class="ms mt mu"><p id="9c7d" class="ky kz mv la b lb lc kk ld le lf kn lg mw li lj lk mx lm ln lo my lq lr ls lt im bi translated">y= x1+x2+x3+x4</p></blockquote><p id="a628" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里，我们将每个值标准化为最大值 1，以保持每个因素的权重平衡。接下来，我们可以根据 y 值对产品进行排序，以获得我们的结果。</p><p id="db24" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同时，我们将创建所有产品的规格列表，以帮助具有特定需求的用户直观地了解哪种产品最适合他们。</p><p id="7a3a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们跳到应用程序</p><h2 id="52bc" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">应用</h2><p id="e4be" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">如果我们在亚马逊网站上搜索，我们的选项如下所示。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mz"><img src="../Images/d0d88f98b551f6dc926648983106e170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rIEtT0TZdFKV8ph7UtW3ZQ.gif"/></div></div></figure><p id="096e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将废弃亚马逊搜索算法给出的选项。我们将使用 Selenium Webdriver 来完成这项工作。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/48262438f6cd7caf57a4c6f083582eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*GkROCJqT54Xxk2rNyAkv6A.png"/></div></figure><p id="5904" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们仔细观察搜索栏，并打破它，我们可以很容易地框住我们的直接搜索网址，这将有助于我们登陆亚马逊搜索页面。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="8524" class="lu lv jj ng b gy nk nl l nm nn">import re<br/>from selenium import webdriver<br/>from selenium.webdriver.common.by import By<br/>from selenium.webdriver.support.ui import WebDriverWait<br/>from selenium.webdriver.support import expected_conditions as EC<br/>from selenium.webdriver.chrome.options import Options<br/>from bs4 import BeautifulSoup</span><span id="3185" class="lu lv jj ng b gy no nl l nm nn">import requests<br/>def search_am(phrase):<br/>    link="<a class="ae jg" href="https://www.amazon.in/s?k=" rel="noopener ugc nofollow" target="_blank">https://www.amazon.in/s?k=</a>"<br/>    l_end="&amp;ref=nb_sb_noss"<br/>    phrase_w= phrase.replace(' ','+')<br/>    link_full=link+phrase_w+l_end<br/>    #print(link_full)<br/>    <br/>    driver = webdriver.Chrome()<br/>    <br/>    wait = WebDriverWait(driver, 5)<br/>    driver.get(link_full)<br/>    <br/>    names_f=[]<br/>    names=driver.find_elements_by_tag_name("a")<br/>    i=0<br/>    for name in names:<br/>        className = name.get_attribute('class')<br/>        if className=='a-link-normal a-text-normal':<br/>            names_f.append(name)<br/>            i+=1<br/>       <br/>            <br/>    <br/>    links=[]<br/>    for i in names_f:<br/>        temp= i.get_attribute('href')<br/>        links.append(temp)<br/>        <br/>    driver.quit()<br/>    return links</span></pre><p id="4927" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的函数帮助我们抓取搜索页面上所有列出的产品的所有链接，并返回链接。</p><p id="91dc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个链接都将我们引向一个特定的产品页面。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi np"><img src="../Images/a8f2ab75fc3d62497cbc126b0dda2f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pco-UPKDfAOOMI6B2uK3A.png"/></div></div></figure><p id="c472" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将重点关注产品页面的某些部分。</p><ol class=""><li id="4921" class="nq nr jj la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated">评级部分:</li></ol><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/3df8d8d3380c75fb353ebd1d2a146a34.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*KXbA_wD1Gsb4j-_EfA2G-g.png"/></div></figure><p id="98b0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这部分提到产品的等级。</p><p id="f01a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.受欢迎程度部分:在这里，我用收视率来衡量受欢迎程度。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d83be3335bb0349956248de53b8e10e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*YN4po-lD8Jf8Yn-YD_X1XA.png"/></div></figure><p id="cc59" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.价格部分:这部分给出了产品的价格。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/0842030ac9a2a6935e4c79d51a669937.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*NvzMQ_DnFsKyhx3oAbZhMA.png"/></div></figure><p id="ce96" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.规格部分:它列出了所有的产品规格和细节。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/44866c6a0792cba2b62cd1f08b530545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*CMjsmE_ybIz6D5MYEC90pQ.png"/></div></figure><p id="3bcc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.评论部分:这个部分反映了产品的评论。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/a5e4a33438ea706ececb0ee2e4e83bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*T-CkY1EocLOqZ298wsDcFw.png"/></div></figure><p id="001a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果我们在这里用粗体字显示，那么每个评估都有一个声明。这一行给出了评论的要点。我们会拿起这些句子，判断情绪，分配复习分数。</p><p id="3df5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们首先从产品页面中删除所需的细节。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="6d77" class="lu lv jj ng b gy nk nl l nm nn">def get_element_dets(link):<br/>    driver = webdriver.Chrome()<br/>    wait = WebDriverWait(driver, 2)<br/>    driver.get(link)<br/>    title_o= driver.find_elements_by_id("productTitle")<br/>    title=title_o[0].text<br/>    <br/>    number_o= driver.find_elements_by_id("acrCustomerReviewText")<br/>    try:<br/>        popularity=(number_o[0].text)<br/>    except:<br/>        popularity='0'<br/>    rate=driver.find_elements_by_css_selector("#reviewsMedley &gt; div &gt; div.a-fixed-left-grid-col.a-col-left &gt; div.a-section.a-spacing-none.a-spacing-top-mini.cr-widget-ACR &gt; div.a-fixed-left-grid.AverageCustomerReviews.a-spacing-small &gt; div &gt; div.a-fixed-left-grid-col.aok-align-center.a-col-right &gt; div &gt; span &gt; span")<br/>    try:<br/>        rate_o=(rate[0].text).split(' ')[0]<br/>    except:<br/>        rate_o='0'<br/>    feat_f=[]<br/>    tag=[]<br/>    value=[]<br/>    #features=driver.find_elements_by_css_selector("#feature-bullets &gt; ul &gt; li &gt; span")<br/>    #for f in features:<br/>    #    feat_f.append(f.text)<br/>    price=0<br/>    try:<br/>        tag_o=driver.find_elements_by_tag_name('th')<br/>        for name in tag_o:<br/>            className = name.get_attribute('class')<br/>            if className=='a-color-secondary a-size-base prodDetSectionEntry':<br/>                tag.append(name.text)<br/>    <br/>        value_o=driver.find_elements_by_tag_name('td')        <br/>        for name in value_o:<br/>            className = name.get_attribute('class')<br/>            if className=='a-size-base':<br/>                value.append(name.text)<br/>        i=0<br/>        while i&lt;len(value):<br/>            t=str(tag[i])+':'+str(value[i])<br/>            feat_f.append(t)<br/>            i+=1<br/>    except:<br/>        feat_f=[':'] <br/>    try:<br/>        price_o= driver.find_elements_by_id("priceblock_ourprice")<br/>        for name in price_o:<br/>            className = name.get_attribute('class')<br/>            if className=='a-size-medium a-color-price priceBlockBuyingPriceString':<br/>                price=(name.text)<br/>                break<br/>    except:<br/>        price=0<br/>    #price=price_o.text<br/>    <br/>    feedbacks=driver.find_elements_by_tag_name("a")<br/>    <br/>    feedback_f=[]<br/>    for feed in feedbacks:<br/>        className = feed.get_attribute('class')<br/>        if className=='a-size-base a-link-normal review-title a-color-base review-title-content a-text-bold':<br/>            feedback_f.append(feed.text)<br/>            <br/>    driver.quit()<br/>    return feedback_f,title,rate_o,popularity,feat_f,price</span></pre><p id="cc16" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码片段有助于删除产品页面所需的所有细节，并返回产品标题反馈、评分、流行度和其他所需的值。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="c977" class="lu lv jj ng b gy nk nl l nm nn">def caller(phrase):<br/>    links=search_am(phrase)<br/>    data={}<br/>    print(len(links))<br/>    for link in links:<br/>        data[link]={}<br/>        feedback_f,title,rate,popularity,feat_f,price=get_element_dets(link)<br/>        data[link]['feedback']=feedback_f<br/>        data[link]['title']=title<br/>        data[link]['rate']=rate<br/>        data[link]['popularity']=popularity<br/>        data[link]['features']=feat_f<br/>        if isinstance(price, int):<br/>            data[link]['price']=price<br/>            <br/>        else:<br/>            <br/>            data[link]['price']=price.split(' ')[1]<br/>        #print(len(data))<br/>    return data</span></pre><p id="29dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码片段有助于以字典格式排列所有产品及其相应的特性。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/b66d1812995d4fcf54f46385c991aec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*O-gA2gw1PaVI8UMFiqy64A.png"/></div></figure><p id="5f39" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每个产品的键都是它的链接，相应地，嵌套字典中的所有特性都是键值对。</p><p id="3b0c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Amazon 页面的标签很少会有变化，不过，最好还是使用 try 和 exception 块来处理错误，以防万一。</p><p id="397e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，在我们丢弃了所有需要的数据之后，让我们开始分配分数。</p><h2 id="830b" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">基于流行度和等级的系统</h2><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="93e7" class="lu lv jj ng b gy nk nl l nm nn">def assign_popularity_rating():<br/>    with open('products.json', 'r') as openfile: <br/>  <br/>   <br/>        data = json.load(openfile) <br/>    temp=0<br/>    for k in data.keys():<br/>        p=int(data[k]['popularity'].split(' ')[0])<br/>        r=float(data[k]['rate'])<br/>        if p&lt;50:<br/>            temp=1<br/>        elif p&lt;100:<br/>            temp=2<br/>        elif p&lt;150:<br/>            temp=3<br/>        else:<br/>            temp=4<br/>        score=(temp)<br/>        data[k]['Popularity_Score']=score<br/>        data[k]['Rating_Score']=r<br/>        with open("products_mod.json", "w") as outfile: <br/>            json.dump(data, outfile)</span></pre><p id="c030" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的代码用于根据人口和评级来分配每个产品的分数。对于人口，我使用了宁滨或类的方法。我们已经从刮擦获得的值中获得的评级。</p><h2 id="f181" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">审查基于情感的系统</h2><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="b95d" class="lu lv jj ng b gy nk nl l nm nn">from textblob import TextBlob<br/>def assign_sentiment_rating():<br/>    with open('products_mod.json', 'r') as openfile: <br/>  <br/>   <br/>        data = json.load(openfile) <br/>        <br/>    sm=0<br/>    for k in data.keys():<br/>        temp=data[k]['feedback']<br/>      <br/>        z=0<br/>        sm=0<br/>        for i in temp:<br/>            #print(i)<br/>            z+=1<br/>            t=TextBlob(i).sentiment.polarity<br/>            #print(t)<br/>            sm+=t<br/>        if (z==0):<br/>            rating=0<br/>        else:<br/>            <br/>            rating=sm/z<br/>        data[k]['Review_Score']=rating<br/>        with open("products_mod_2.json", "w") as outfile: <br/>            json.dump(data, outfile)</span></pre><p id="1032" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于评论情感极性检测，我使用了 TextBlob 库的情感极性功能。它根据从评论中检测到的情绪分配一个从-1 到+1 的值。对于一个产品，我们有多个评论，因此，对于每个评论，我们都有一个值。因此，我们将从所有评论中获得的所有值相加，并除以评论的数量，试图使总分小于或等于-1。因此，我们对每个产品重复这一过程，并获得每个产品的评级。</p><h2 id="1d06" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">价格相关性系统</h2><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="c75f" class="lu lv jj ng b gy nk nl l nm nn">def check_price_relevence():<br/>    with open('products_mod_2.json', 'r') as openfile: <br/>  <br/>   <br/>        data = json.load(openfile) <br/>    print("Specify the approx price to tune search")<br/>    price=int(input())<br/>    print("Specify a margin")<br/>    margin=int(input())<br/>    <br/>    for k in data.keys():<br/>        data_ref=str(data[k]['price']).replace(',','')<br/>        temp=float(data_ref)<br/>        <br/>        if temp&lt;price+margin and temp&gt;price-margin:<br/>            rating=1<br/>        else:<br/>            rating=0<br/>            <br/>        data[k]['Price_relevence_Score']=rating<br/>        with open("products_mod_3.json", "w") as outfile: <br/>            json.dump(data, outfile)</span></pre><p id="1ece" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我们的价格相关性函数。它要求一个大概的价格和比较的利润。然后，它比较产品的价格和范围，以分配相关性分数。</p><p id="df38" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在分配完所有分数后，我们的字典会为每个产品添加以下内容。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div class="gh gi of"><img src="../Images/ace8b602097550acdba98554f3d05bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*GeiLZyRFPbTTbitPMElXOg.png"/></div></figure><h2 id="c68f" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">收集规格</h2><p id="e956" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">接下来，我们将为有特定需求的客户创建一个包含所有列出产品规格的 csv 或 excel 文件。</p><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="eb1a" class="lu lv jj ng b gy nk nl l nm nn">import pandas as pd<br/>def form_featureset():<br/>    with open('products_mod_3.json', 'r') as openfile: <br/>  <br/>        <br/>        data = json.load(openfile)<br/>        feat=[]<br/>        set_c=[]<br/>        for k in data.keys():<br/>            temp=data[k]['features']<br/>            <br/>            temp2=[]<br/>        <br/>            for i in temp:<br/>                tag=i.split(':')[0]<br/>                if tag not in feat:<br/>                    feat.append(tag)<br/>        #print(feat)<br/>        for k in data.keys():<br/>            temp=data[k]['features']<br/>            temp2=[-1]*len(feat)<br/>            for i in temp:<br/>                tag=i.split(':')[0]<br/>                <br/>                #print(tag)<br/>                <br/>                ind= feat.index(tag)<br/>                #print(ind)<br/>                    <br/>                <br/>                temp2[ind]= i.split(':')[1]<br/>            <br/>                    <br/>            set_c.append(temp2)<br/>                <br/>    <br/>    df=pd.DataFrame(set_c,columns=feat)<br/>    df.to_csv('product_descriptions.csv',index=False)<br/>    return df</span></pre><p id="8464" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个片段生成了一个数据框，其中包含所有产品及其列出的规格，以提供对可用规格的洞察。</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/54af187622e7618b125e15fb5a52a656.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OBa88Q-anrcZ0W_XhRU1Aw.png"/></div></div></figure><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/18e14c39ce029c19fd32ce33ad075ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riWnfaTeXEmmkYcHQqq-Fw.png"/></div></div></figure><p id="09ee" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">生成的规格表如下所示。对于产品页面中没有给出的值，我填了-1。</p><p id="1368" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些表格将有助于客户比较查找规格。</p><h2 id="fbac" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">加权分数</h2><pre class="na nb nc nd gt nf ng nh ni aw nj bi"><span id="1184" class="lu lv jj ng b gy nk nl l nm nn">def tune_search(choice):</span><span id="55b7" class="lu lv jj ng b gy no nl l nm nn">with open('products_mod_3.json', 'r') as openfile: <br/>  <br/>        <br/>        data = json.load(openfile)<br/>    for k in data.keys():<br/>            price_rel=data[k]['Price_relevence_Score']<br/>            review_score=data[k]['Review_Score']<br/>            pop_score=data[k]['Popularity_Score']<br/>            pop_score_k=pop_score/4<br/>            <br/>            rate_score=data[k]['Rating_Score']<br/>            rate_score_k=rate_score/5<br/>            <br/>            if choice==1:<br/>                total_score=5*pop_score_k+rate_score_k+review_score+price_rel<br/>            if choice==2:<br/>                total_score=pop_score_k+5*rate_score_k+review_score+price_rel<br/>            if choice==3:<br/>                total_score=pop_score_k+rate_score_k+review_score+5*price_rel<br/>            if choice==4:<br/>                total_score=pop_score_k+rate_score_k+5*review_score+price_rel<br/>                <br/>            else:<br/>                total_score=pop_score_k+rate_score_k+review_score+price_rel<br/>                <br/>            data[k]['Total_score']=total_score<br/>            #print(data[k]['Total_score'])<br/>    links=sort_d(data)<br/>            <br/>    return links</span></pre><p id="2ac2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这段代码片段根据用户的选择提供了一个分数。我使用了一个非常基本的条件驱动方法。我将收视率除以 5，人口除以 4，以保持数值在 0 和 1 之间。这里权重值固定为 5。只是随便选的。</p><p id="e5a0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这都是关于我们的代码。</p><h2 id="8cfa" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">应用</h2><p id="c8bf" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">给定的视频演示了该应用</p><figure class="na nb nc nd gt iv"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="ab07" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无论选择是什么，我也给出了其他选择的链接，只是为了给用户额外的安慰和尝试其他选择的机会。</p><p id="da1a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我的例子中，你会看到 chrome 窗口，虽然它是自动的，会自己关闭，但会不断弹出，你可以使用 headless chrome 阻止它启动，并使用 chromeoptions()为你的 chrome 驱动程序利用它。</p><h2 id="faa8" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">展望未来</h2><p id="706a" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">可以通过两种方式修改应用程序或使其更加健壮，但这两种方式都需要数据，目前似乎还没有数据(据我所知)。</p><ol class=""><li id="2bfb" class="nq nr jj la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated">如果当前的亚马逊情感数据集可用，我们可以制作自己的情感分类器，在其中我们可以将其他类别与积极和消极的情感放在一起，这将有助于我们基于评论的评分更加稳健。</li><li id="4381" class="nq nr jj la b lb ok le ol lh om ll on lp oo lt nv nw nx ny bi translated">如果数据或规格是绝对存在的，我们可以为规格创建我们自己的特性嵌入。例如，如果我们有足够的笔记本电脑数据实例，我们可以为笔记本电脑创建一个嵌入或编码空间。我们可以将每台笔记本电脑表示为其规格的嵌入向量。我们可以根据用户需求创建新的规格向量。在那里，我们可以应用 K-最近邻算法来获得与需求向量最近的 K 个嵌入向量，并根据它们的欧几里德距离对它们进行排序。因此，我们可以获得规格接近用户要求的 k 笔记本电脑。这将让我们添加一个基于相关规范的分数，使我们的系统更加健壮。</li></ol><h2 id="f91d" class="lu lv jj bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">结论</h2><p id="c2e6" class="pw-post-body-paragraph ky kz jj la b lb mn kk ld le mo kn lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">因此，我们可以通过几个步骤用 python 构建一个实时产品推荐引擎。</p><p id="6115" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里是 Github 的链接。</p><p id="b217" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">希望这有所帮助。</p></div></div>    
</body>
</html>