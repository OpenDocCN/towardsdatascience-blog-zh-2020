<html>
<head>
<title>Solving Conditional Probability Problems with the Laws of Total Expectation, Variance, and Covariance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用总期望、方差和协方差定律解决条件概率问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/solving-conditional-probability-problems-with-the-laws-of-total-expectation-variance-and-c38c07cfebfa?source=collection_archive---------12-----------------------#2020-02-28">https://towardsdatascience.com/solving-conditional-probability-problems-with-the-laws-of-total-expectation-variance-and-c38c07cfebfa?source=collection_archive---------12-----------------------#2020-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b9a9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">深入挖掘条件变量的属性以解决现实世界的问题，然后用R</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5e31b9850c636af6e1c69cc16536d494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hmX_E7cZV_ok8nGn"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">安特·罗泽茨基在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="b3c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解如何使用总期望、方差和协方差法则来解决条件概率问题，例如您可能在求职面试中遇到的问题，或者在建模随机变量以其他随机变量为条件的业务问题时遇到的问题。</p><p id="18ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我先问几个现实世界中的概率问题:</p><ol class=""><li id="ac91" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">你在一家公共交通公司工作。您有过去在您所在城市的各个车站上下车的乘客人数的数据。当公共汽车到达任何一个车站时，找出车上预期的乘客人数。量化此评估中的不确定性。</li><li id="2a3e" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">你有一个酒店预订网站。从过去的数据中，你发现对于给定的流量，有0.1的转化率。此外，在周末，访问网站的人遵循泊松过程(10人/小时)。求周六的预期收入。这个数字如何变化？</li></ol><p id="9527" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这些场景中，你可以观察到我们感兴趣的变量依赖于其他随机变量。例如，在第一个问题中，第<em class="mj"> i </em>站的乘客数量很可能取决于第<em class="mj"> (i-1) </em>站的乘客数量。这些条件概率问题乍一看似乎很神秘，但是只要牢牢把握住总期望、方差和协方差的法则<strong class="lb iu"> <em class="mj"> </em> </strong>我们就可以轻松高效地解决它们。</p><p id="5ce5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将首先看到如何将这些定律应用于一个问题(与上面的总线问题相关)，然后通过模拟r中的问题来验证结果。</p><p id="80ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这里开始，我假设你对随机变量，它们的期望和方差，以及条件概率有一个基本的了解。如果你想复习一下，这里有一个很好的资源:</p><div class="mk ml gp gr mm mn"><a rel="noopener follow" target="_blank" href="/basic-probability-theory-and-statistics-3105ab637213"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">基础概率论与统计</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">我想讨论一些与概率和统计相关的非常基本的术语/概念，这些术语/概念经常会遇到…</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb ks mn"/></div></div></a></div><p id="b2f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想对概率的基本概念有更深更透彻的理解，这是一本终极的书:</p><div class="mk ml gp gr mm mn"><a href="https://readyforai.com/download/a-first-course-in-probability-9th-edition-pdf/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fo"><div class="mp ab mq cl cj mr"><h2 class="bd iu gy z fp ms fr fs mt fu fw is bi translated">概率第一课第九版PDF —为人工智能做好准备</h2><div class="mu l"><h3 class="bd b gy z fp ms fr fs mt fu fw dk translated">概率的第一个课程(PDF)第9版具有清晰和直观的数学解释…</h3></div><div class="mv l"><p class="bd b dl z fp ms fr fs mt fu fw dk translated">readyforai.com</p></div></div><div class="mw l"><div class="nc l my mz na mw nb ks mn"/></div></div></a></div><p id="9073" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。这里又是一个版本的总线问题[1]:</p><blockquote class="nd ne nf"><p id="51f5" class="kz la mj lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">一辆自动驾驶公共汽车(是的，我们在2050年)到达第一站(i = 1)，车上没有乘客。在每个车站，分别有0、1或2名乘客以0.3、0.5、0.2的概率上车。在每个车站，乘客下车的概率是0.1。求公共汽车<br/> 1)离开第一站<br/>后在第二站<br/>下车的乘客数量的期望值和方差2)公共汽车离开第二站后在第二站【】下车的乘客数量</p></blockquote><p id="9105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设在一个车站上车的乘客数量与其他车站无关，并且车辆具有无限的载客量。</p><p id="3036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们定义以下变量:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/c47b1ebd48d9b3663e7ed82fd2c14043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*We5jJgwCPLcTHi0zypJncQ.png"/></div></figure><p id="b975" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你想想看，一个车站下车的乘客人数是一个带参数的<a class="ae ky" href="https://en.wikipedia.org/wiki/Binomial_distribution" rel="noopener ugc nofollow" target="_blank">二项分布</a>(n =到达那个车站时车上的乘客人数，p = 0.1)。比如<strong class="lb iu"> A2 ~ Binom(L1，0.1) </strong></p><p id="f040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，给定所有这些信息，我们如何着手解决这个问题呢？首先，我们可以从激发变量之间使用条件关系的问题中得出一些观察结果:</p><ol class=""><li id="2bf6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">第二站(L2)后的乘客数量取决于第一站(L1)后的乘客数量。例如，如果在公交车离开第一站后，车上的人更多，那么在公交车离开第二站后，车上的人极有可能更多。</li><li id="803d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在任何车站下车的乘客数量取决于当公共汽车到达该车站时车上的人数，例如，A2将取决于L1。</li></ol><p id="5835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们将首先计算其他变量所依赖的变量的估计值，然后使用这些估计值来估计我们的因变量。例如，我们将计算L1的估计值，然后我们将使用这些来计算A2和L2的估计值。</p><p id="cade" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们要计算问题中变量的期望值。</p><h1 id="30b4" class="nk nl it bd nm nn no np nq nr ns nt nu jz nv ka nw kc nx kd ny kf nz kg oa ob bi translated">期望值的计算</h1><p id="e4f6" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">根据期望值的定义，当公共汽车离开车站1，E(L1)时，公共汽车上乘客数量的期望值可以计算如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/cec165c55150b8b1504ca3d194ce97b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*RZMmWBzVOciFMiCcDfrGoQ.png"/></div></figure><p id="b501" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们计算E(A2)，即，当公共汽车离开车站2时下车的乘客数量的预期。如上所述，A2依赖于L1，因此E(A2)可以通过对L1进行调节来计算，这使我们看到了总期望定律。</p><h2 id="216a" class="oi nl it bd nm oj ok dn nq ol om dp nu li on oo nw lm op oq ny lq or os oa ot bi translated">总期望定律</h2><p id="0e28" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">这里的想法是，对于给定的L1值，计算A2的期望值，然后将A2的期望值与L1的值相加。为了更好地理解这一点，这里有一条定律:</p><p id="af6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给定随机变量X和Y，X的期望值等于X在Y上的条件分布的期望值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/e04950ce7fa34c879ad0068b18b1d9f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*EDuz-nusQJPVGRP-JN0LMQ.png"/></div></figure><p id="2895" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当Y是离散随机变量时，该定律变为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/d55482d67b6e59fbf13b3c0ef7d9fe9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*5k2vdS1-DmA3FG5C5KT0ig.png"/></div></figure><blockquote class="nd ne nf"><p id="33d8" class="kz la mj lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">这个公式背后的直觉是，为了计算E(X ),可以打破X相对于Y的空间，然后以(Y=y)的概率取E(X|Y=y)的加权平均值作为权重。</p></blockquote><p id="83ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给定此信息，E(A2)可计算如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/93c49ecd8100dd6c91173ee2c3bee07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*O22w8V2c7Viq1Ics6hqvtQ.png"/></div></figure><p id="6213" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[*] <strong class="lb iu"> </strong> (A2|L1 = m)~二项式(m，0.1)，因此E(A2| L1 = m) = 0.1*m</p><p id="f5cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似地，当公共汽车离开车站2，E(L2)时，公共汽车上乘客数量的预期可计算如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/5bb5ec016911509e8c46bdb3c7a0b8a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*sDjuDZVeLBrVs0LBap-Srw.png"/></div></figure><p id="ac5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[*]人们必须明白，B2的期望值和方差与L1的相等。原因是，在任何车站上车的人数与在第一站(L1)上车的人数具有相似的概率分布。</p><p id="b0b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题的期望部分到此结束。牢记业务问题，我们还应该考虑这些估计中的不确定性，这是通过方差来度量的。现在我们来求解方差。</p><h1 id="8836" class="nk nl it bd nm nn no np nq nr ns nt nu jz nv ka nw kc nx kd ny kf nz kg oa ob bi translated">差异的计算</h1><p id="b58d" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">让我们从计算L1的方差开始，用Var(L1)表示。由于L1不依赖于任何其他变量，我们可以使用基本公式直接求解Var(L1)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/2d73e50e672ff73df0c3c7b29db92a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*1z4_Z2LEnNwCfdp7yXKPcw.png"/></div></figure><p id="4cd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看看A2的方差。同样，由于A2依赖于L1，采用条件方差使计算更容易。这就把我们带到了总方差定律。</p><h2 id="4b8b" class="oi nl it bd nm oj ok dn nq ol om dp nu li on oo nw lm op oq ny lq or os oa ot bi translated">总方差定律</h2><p id="c9bb" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">这个想法类似于总期望定律。我们将把A2的值分成w . r . t . L1组，取各组的方差，然后对这些组求和，得到所需的方差。</p><p id="9638" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们正在计算方差，所以有2个可变性来源:(A2中的组内预期可变性)+(A2的预期值在组间的可变性)。为了更好地理解这一点，请看这个公式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/9f652c0103adbf2e37b8bc2a1670a0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*P7LV3E_rXl6XnEIIBZ-rSg.png"/></div></figure><p id="5d95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://math.stackexchange.com/questions/1742578/law-of-total-variance-intuition" rel="noopener ugc nofollow" target="_blank">这个</a>非常清楚地解释了总方差定律背后的直觉，这里总结一下:</p><blockquote class="nd ne nf"><p id="1b41" class="kz la mj lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">类似于总期望定律，我们将X的样本空间相对于Y进行分解。注意，Var(X|Y)和E(X|Y)都是随机变量。第一个组件计算所有Y值的平均值时X的预期方差。但是，Var(X|Y)是基于E(X|Y)的，它也是随机的。因此，我们包括第二项来说明期望值的变化。</p></blockquote><p id="3f8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们来计算Var(A2)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/1055ebe584c1084a234eb4060c025715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*RB9p7SMNzZCDOagpIImclg.png"/></div></figure><p id="c093" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[*] A2|L1 = m~二项式(m，0.1)，因此Var(A2 | L1 = m)= m * 0.1 *(1–0.1)。</p><p id="f385" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我们还使用了期望和方差的基本属性</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/eb3d62da389a6b290fb851d5e5add1f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*dgpyLI9_6G-cNJWmhlW3ig.png"/></div></figure><p id="863e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，到目前为止一切顺利。是时候得到L2的方差了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/45f71afe8c53b36171bb453381d78706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*XoqQQZ5wXgfUwlhJ3-P4gA.png"/></div></figure><p id="bfd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[*]由于B2独立于L1和A2，B2不与L1和A2共享协方差。但是，L1和A2是相关的，因此扩大方差会在它们之间引入协方差。</p><p id="316a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，要计算Var(L2)，我们需要计算cov(L1，A2)。同样，由于A2依赖于L1，我们将使用它们的条件关系来计算协方差，这将我们带到总协方差定律。</p><h2 id="8776" class="oi nl it bd nm oj ok dn nq ol om dp nu li on oo nw lm op oq ny lq or os oa ot bi translated">总协方差定律</h2><p id="10d6" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">这个想法类似于总方差定律，所以我将直接跳到这个定律:给定3个随机变量，X，Y和Z，总协方差定律表明</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/90d11b512c5b2b828ec2d32415852abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*XqNrXXXOADXVSoeGL6cElw.png"/></div></figure><p id="b0d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个很好地解释了我在下面总结的总协方差定律背后的直觉。</p><blockquote class="nd ne nf"><p id="8149" class="kz la mj lb b lc ld ju le lf lg jx lh ng lj lk ll nh ln lo lp ni lr ls lt lu im bi translated">cov(X，Y|Z)，E(X|Z)和E(Y|Z)是随机变量。类似于总方差定律，第一项说明了不同Z值上X和Y之间的平均协方差。注意cov(X，Y|Z)是基于随机的E(X|Z)和E(Y|Z)的。也就是说，对于Z的值，E(X|Z)和E(Y|Z)将同时实现一个值。因此，第二项包含了对于不同z值实现的X和Y坐标之间的协方差。</p></blockquote><p id="3499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">理解这一点的另一种方式是将定律分解为:<br/>(组内X和Y之间的期望协方差)+(组间X和Y的期望值的协方差)</p><p id="8811" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们用这个定律来计算cov(L1，A2)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/58cb31f32ccd7e5e319167a2a68df7de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kATNX7sr__SiWcDb1ErHbA.png"/></div></div></figure><p id="9a58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[*]利用协方差的性质:cov(a*X，b*X) = a*b*Var(X)</p><p id="2afd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们有了计算Var(L2)的所有部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/7942fb4d2d3657b4a8d536a09ba0424b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*FY9J7ka8CC-u1Ilygxm-DQ.png"/></div></figure><p id="ac73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，就是这样。我们巧妙地使用了所有三个定律来开发因变量之间的关系，并推导出公共汽车上乘客数量的期望值和方差<br/> 1)在离开第一站(L1) <br/>后2)在第二站下车(A2) <br/>后3)在离开第二站(L2)</p><p id="ba61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们用R模拟一下这个，验证一下我们的答案。</p><h1 id="8d60" class="nk nl it bd nm nn no np nq nr ns nt nu jz nv ka nw kc nx kd ny kf nz kg oa ob bi translated">R中的模拟</h1><p id="c006" class="pw-post-body-paragraph kz la it lb b lc oc ju le lf od jx lh li oe lk ll lm of lo lp lq og ls lt lu im bi translated">下面，我创建了一个函数来模拟r中的公交出行次数。这个函数接受要聚合的公交出行次数作为输入，并返回所需的估计值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pg ph l"/></div></figure><p id="188e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我将使用这个函数生成10，000个估计值，每个估计值都是使用100，000次公交出行的样本计算的。最后，我们取10，000个估计值的平均值来得到最终值。按照<a class="ae ky" href="https://en.wikipedia.org/wiki/Law_of_large_numbers" rel="noopener ugc nofollow" target="_blank">大数定律</a> (LLN)，这样做提供了真实总体参数的最佳估计。按照LLN的说法，你使用的估计值越多，这些估计值的平均值就越接近真实的参数值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pg ph l"/></div></figure><p id="2fce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/94b2962e0f1fc51cc691ec1bc618bf8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*ze1cpjhsqX2uq-kg1pZzCA.png"/></div></figure><p id="799b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将这些结果与我们从理论上得到的结果进行比较，我们可以看到我们已经验证了我们的解决方案！<br/>E(L1):0.9<br/>Var(L1):0.49<br/>E(A2):0.09<br/>Var(A2):0.0859<br/>cov(L1，A2):0.049<br/>E(L2):1.71<br/>Var(L2):0.9679</p><p id="a4d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇博客能帮助你理解总期望、方差和协方差的规律，并对你的概率论知识和解决问题的策略做出有价值的补充。</p></div><div class="ab cl pj pk hx pl" role="separator"><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po pp"/><span class="pm bw bk pn po"/></div><div class="im in io ip iq"><p id="0dfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参考资料:</p><ol class=""><li id="c3b5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">从算法到Z分数:计算机科学中的概率和统计建模。Norm Matloff，加州大学戴维斯分校</li></ol></div></div>    
</body>
</html>