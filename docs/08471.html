<html>
<head>
<title>Simple word cloud in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的简单单词云</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simple-wordcloud-in-python-2ae54a9f58e5?source=collection_archive---------2-----------------------#2020-06-20">https://towardsdatascience.com/simple-wordcloud-in-python-2ae54a9f58e5?source=collection_archive---------2-----------------------#2020-06-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6fcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">💡<strong class="js iu"> <em class="ko">单词云</em> </strong> <em class="ko">是一种可视化文本中频繁出现的单词的技术，其中单词的大小代表它们的频率。</em></p><p id="5d11" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建单词云的一个简单方法是在谷歌上搜索“单词云”，找到一个可以生成单词云的免费网站。你可以自定义它的外观。又快又简单！</p><p id="a770" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更令人兴奋的是，您可以用 Python 自己构建一个💫。这篇文章将展示如何创建一个像下面这样的单词云。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/2a88329fab496c1b0df84f2ec852f170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vl3UWcszdPNFGWASiieLqQ.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">第三节的词云。Fancier 单词云🌸</p></figure></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="7ca0" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">0.Python 设置🔧</h1><p id="3a06" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">我假设读者(👀是的，你！)可以访问并熟悉 Python，包括安装包、定义函数和其他基本任务。如果你是 Python 新手，<a class="ae mp" href="https://www.python.org/about/gettingstarted/" rel="noopener ugc nofollow" target="_blank">这个</a>是一个入门的好地方。</p><p id="d87a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经在 Jupyter Notebook 中使用并测试了 Python 3.7.1 中的脚本。</p><p id="d9d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们开始之前，让我们确保您已经安装了以下库:<br/> ◻️ <strong class="js iu">创建单词云:</strong> <em class="ko">单词云<br/> </em> ◻️ <strong class="js iu">导入图像:</strong> <em class="ko">枕头</em>(稍后将导入为<em class="ko">pil</em>)<strong class="js iu"><br/></strong>◻️<strong class="js iu">从维基百科中抓取文本:<em class="ko"> </em> </strong> <em class="ko">维基百科</em></p><p id="95f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后一个包是可选的，你可以加载或创建自己的文本数据，而不必通过网络抓取拉文本。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="6ad0" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">1.数据📦</h1><p id="c33a" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">作为我们的样本文本，我们将使用从维基百科“网络抓取”页面上抓取的文本。</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="ba5b" class="mv ln it mr b gy mw mx l my mz"># Import packages<br/>import wikipedia<br/>import re</span><span id="5914" class="mv ln it mr b gy na mx l my mz"># Specify the title of the Wikipedia page<br/>wiki = wikipedia.page('Web scraping')</span><span id="4ef4" class="mv ln it mr b gy na mx l my mz"># Extract the plain text content of the page<br/>text = wiki.content</span><span id="c2bb" class="mv ln it mr b gy na mx l my mz"># Clean text<br/>text = re.sub(r'==.*?==+', '', text)<br/>text = text.replace('\n', '')</span></pre><p id="9fa2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">🔗我已经在另一篇关于抓取的文章中解释了这个脚本的作用。简而言之，这个脚本将提取段落中的纯文本内容，并将其分配给<em class="ko">文本</em>字符串。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="fd58" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">2.字云☁️</h1><p id="0a79" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">首先，让我们准备一个绘制单词云的函数:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="e4f6" class="mv ln it mr b gy mw mx l my mz"># Import package<br/>import matplotlib.pyplot as plt</span><span id="1946" class="mv ln it mr b gy na mx l my mz"># Define a function to plot word cloud<br/>def plot_cloud(wordcloud):<br/>    # Set figure size<br/>    plt.figure(figsize=(40, 30))<br/>    # Display image<br/>    plt.imshow(wordcloud) <br/>    # No axis details<br/>    plt.axis("off");</span></pre><p id="2fc4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其次，让我们创建我们的第一个单词云并绘制它:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="7141" class="mv ln it mr b gy mw mx l my mz"># Import package<br/>from wordcloud import WordCloud, STOPWORDS</span><span id="e45e" class="mv ln it mr b gy na mx l my mz"># Generate word cloud<br/>wordcloud = WordCloud(width= 3000, height = 2000, random_state=1, background_color='salmon', colormap='Pastel1', collocations=False, stopwords = STOPWORDS).generate(text)</span><span id="09cd" class="mv ln it mr b gy na mx l my mz"># Plot<br/>plot_cloud(wordcloud)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/c291e570fa8a18fddcae8ffec036d139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRf3BnXowyp9agTmg5Md8Q.png"/></div></div></figure><p id="b9f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Ta-da❕我们刚刚建立了一个单词云！以下是关于<em class="ko"> WordCloud </em>函数参数的一些注意事项:</p><p id="f3c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> ◼️宽度/高度:</strong>您可以使用这些选项将单词云的尺寸更改为您喜欢的宽度和高度。<br/> ◼️ <strong class="js iu"> random_state: </strong>如果你不把它设置成你选择的数字，你很可能每次在相同的输入数据上运行相同的脚本时得到一个稍微不同的单词云。通过设置此参数，您可以确保完全相同的词云的再现性。你可以玩随机数，直到你找到你喜欢的单词云。<br/> <strong class="js iu"> ◼️背景 _ 颜色:</strong>‘白’和‘黑’是常见的背景颜色。如果你想探索更多的颜色，<a class="ae mp" href="http://www.science.smith.edu/dftwiki/index.php/Color_Charts_for_TKinter" rel="noopener ugc nofollow" target="_blank">这个</a>可能会派上用场。请注意，有些颜色可能不适用。希望你能找到你喜欢的东西。<br/> <strong class="js iu"> ◼️色彩图:</strong>通过这个参数，你可以设置文字显示的颜色主题。有很多漂亮的<a class="ae mp" href="https://matplotlib.org/3.2.1/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib 色图</a>可供选择。我最喜欢的是“彩虹”、“地震”、“彩色 1”和“彩色 2”。<br/> ◼️ <strong class="js iu">搭配:</strong>将此设置为<em class="ko"> False </em>以确保单词云看起来不会包含任何重复的单词。否则你可能会在词云中看到' web '、' scraping '、' web scraping '作为搭配，给人一种词被重复的印象。<br/> <strong class="js iu"> ◼️停用词:</strong>停用词是对文本意义几乎没有价值的常用词 We、are 和 the 是停用词的例子。我已经在这里更详细地解释了停用词<a class="ae mp" rel="noopener" target="_blank" href="/introduction-to-nlp-part-1-preprocessing-text-in-python-8f007d44ca96">(滚动到‘步骤 3。删除“停用词”部分)。这里，我们使用了来自<em class="ko"> wordcloud </em>包的<em class="ko">停用词</em>。要查看停用词集合，使用<code class="fe nc nd ne mr b">print(STOPWORDS)</code>并向该集合添加自定义停用词，使用此模板<code class="fe nc nd ne mr b">STOPWORDS.update(['word1', 'word2'])</code>，在生成词云之前用您的自定义停用词替换<em class="ko"> word1 </em>和<em class="ko"> word2 </em>。您还可以自定义其他参数。查看 </a><a class="ae mp" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank"> <em class="ko">文档</em> </a> <em class="ko">了解更多信息。</em></p><p id="7bf0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们用不同的<em class="ko">背景颜色</em>和<em class="ko">颜色图</em>生成另一个单词云🎨。你可以玩不同的组合，直到你找到你喜欢的。我觉得下面这个组合挺好的:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="e2a7" class="mv ln it mr b gy mw mx l my mz"># Generate wordcloud<br/>wordcloud = WordCloud(width = 3000, height = 2000, random_state=1, background_color='black', colormap='Set2', collocations=False, stopwords = STOPWORDS).generate(text)</span><span id="cc9b" class="mv ln it mr b gy na mx l my mz"># Plot<br/>plot_cloud(wordcloud)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/31d4b25044fbc8f55085e2852f4920d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uyMcm31lC4bFDjnAEJyWdw.png"/></div></div></figure><p id="765c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设我们对 word cloud 很满意，并希望将其保存为. png 文件，我们可以使用下面的代码来实现这一点:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="340b" class="mv ln it mr b gy mw mx l my mz"># Save image<br/>wordcloud.to_file("wordcloud.png")</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="a71d" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">3.Fancier 单词云🌸</h1><p id="eec0" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">我说的更好的单词云是指那些自定义形状的单词云，就像本文开头显示的那样。要创建一个花哨的单词云，我们需要首先找到一个图像作为遮罩。看来最大的挑战是找到正确的图像文件。你可以在谷歌图片上用关键词搜索图片:“屏蔽文字云图片”。在我的搜索过程中，我偶然发现了这个来源，一位慷慨的 kaggler 分享了一些有用的屏蔽图片。我在这篇文章的开头使用“upvote.png”来生成单词 cloud，使用了以下脚本(记得在运行脚本之前在当前目录中保存一份蒙版图像的副本):</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="9e5c" class="mv ln it mr b gy mw mx l my mz"># Import packages<br/>import numpy as np<br/>from PIL import Image</span><span id="0a6a" class="mv ln it mr b gy na mx l my mz"># Import image to np.array<br/>mask = np.array(Image.open('upvote.png'))</span><span id="4a3a" class="mv ln it mr b gy na mx l my mz"># Generate wordcloud<br/>wordcloud = WordCloud(width = 3000, height = 2000, random_state=1, background_color='white', colormap='Set2', collocations=False, stopwords = STOPWORDS, mask=mask).generate(text)</span><span id="6244" class="mv ln it mr b gy na mx l my mz"># Plot<br/>plot_cloud(wordcloud)</span></pre><p id="7cca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你会注意到，唯一的区别是我们将图像导入到了一个<em class="ko"> numpy 数组</em>，然后在<em class="ko"> WordCloud </em>中添加了<code class="fe nc nd ne mr b">mask=mask</code>。蒙版的一个特点是，最好将背景颜色设置为“白色”。如果我们尝试换成不同的颜色，单词 cloud 可能看起来不太好。让我们创建一个并查看:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="aaa1" class="mv ln it mr b gy mw mx l my mz"># Generate wordcloud<br/>wordcloud = WordCloud(width = 3000, height = 2000, random_state=1, background_color='navy', colormap='rainbow', collocations=False, stopwords = STOPWORDS, mask=mask).generate(text)</span><span id="3b9c" class="mv ln it mr b gy na mx l my mz"># Plot<br/>plot_cloud(wordcloud)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/29723fd8b5c9307782e8ea52f64f555c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gx249OvN7-OsQzL-iHcSQ.png"/></div></div></figure><p id="3aab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相对于拥有白色背景，你怎么看这个？我会让你来判断。</p><p id="5fcd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我喜欢单词云，并计划做一个(当然不是关于网络抓取的！🙈)用来当海报装饰我的房间。但是它也可以在其他环境中使用，例如在演示文稿和文档中作为视觉辅助。</p><p id="afe5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">您想访问更多这样的内容吗？媒体会员可以无限制地访问媒体上的任何文章。如果您使用</em> <a class="ae mp" href="https://zluvsand.medium.com/membership" rel="noopener"> <em class="ko">我的推荐链接</em> </a>，<em class="ko">成为会员，您的一部分会费将直接用于支持我。</em></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="dbf1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">谢谢你看我的帖子。我希望你已经学到了一些东西，✂️.如果你感兴趣的话， 以下是我其他一些帖子的链接:<br/> ◼️ <a class="ae mp" href="https://medium.com/@zluvsand/two-simple-ways-to-scrape-text-from-wikipedia-in-python-9ce07426579b" rel="noopener">用 Python 从维基百科中抓取文本的两种简单方法</a> <br/> <em class="ko">(下面列出了一系列关于 NLP 介绍的帖子) </em> <br/> ◼️ <a class="ae mp" rel="noopener" target="_blank" href="/introduction-to-nlp-part-1-preprocessing-text-in-python-8f007d44ca96">第一部分:Python 中的文本预处理</a> <br/> ◼️ <a class="ae mp" href="https://medium.com/@zluvsand/introduction-to-nlp-part-2-difference-between-lemmatisation-and-stemming-3789be1c55bc" rel="noopener">第二部分:引理和词干的区别</a> <br/> ◼️ <a class="ae mp" href="https://medium.com/@zluvsand/introduction-to-nlp-part-3-tf-idf-explained-cedb1fc1f7dc" rel="noopener">第三部分:TF-IDF 讲解</a> <br/> ◼️ <a class="ae mp" href="https://medium.com/@zluvsand/introduction-to-nlp-part-4-supervised-text-classification-model-in-python-96e9709b4267" rel="noopener">第四部分:Python 中的有监督文本分类模型</a> <br/> ◼️ <a class="ae mp" rel="noopener" target="_blank" href="/introduction-to-nlp-part-5a-unsupervised-topic-model-in-python-733f76b3dc2d">第 5A 部分:Python 中的无监督主题模型(sklearn) </a> <br/> ◼️ <a class="ae mp" rel="noopener" target="_blank" href="/introduction-to-nlp-part-5b-unsupervised-topic-model-in-python-ab04c186f295">第 5B 部分:Python 中的无监督主题模型(gensim</a></p><p id="a5d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">再见🏃💨</p></div></div>    
</body>
</html>