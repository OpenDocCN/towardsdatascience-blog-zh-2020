<html>
<head>
<title>Link your Virtual Environment to Jupyter Using Kernels</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用内核将您的虚拟环境链接到 Jupyter</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/link-your-virtual-environment-to-jupyter-with-kernels-a69bc61728df?source=collection_archive---------2-----------------------#2020-08-29">https://towardsdatascience.com/link-your-virtual-environment-to-jupyter-with-kernels-a69bc61728df?source=collection_archive---------2-----------------------#2020-08-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/acf6771a7858bc2cbe4dad0518965ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XpiZj06Hw-Hv1nm6"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@tak_tag?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">田口孝宏</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><div class=""/><div class=""><h2 id="4003" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">立即开始原型制作。</h2></div><h1 id="c2ec" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated"><strong class="ak">简介:</strong></h1><p id="f08d" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">当我第一次开始使用 Python 时，虚拟环境的概念对我来说非常难以理解。我经常花几个小时的时间来寻找和尝试创造一个，结果却比开始时更加困惑。</p><p id="eb8a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这篇文章旨在成为理解虚拟环境到底做什么，如何创建它们，以及将它们链接到你的 Jupyter 笔记本的一站式商店。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="9446" class="my kz jj bd la mz na dn le nb nc dp li lz nd ne lk md nf ng lm mh nh ni lo nj bi translated">目录:</h2><ul class=""><li id="8062" class="nk nl jj ls b lt lu lw lx lz nm md nn mh no ml np nq nr ns bi translated">什么是虚拟环境？</li><li id="d8c4" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated">使用 Anaconda 创建一个环境</li><li id="b643" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated">将软件包安装到环境中</li><li id="b9a7" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated">使用 Jupyter 中的虚拟环境作为内核</li><li id="6529" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated">删除环境和内核</li></ul></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="6f92" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">什么是虚拟环境？</h1><p id="1bd9" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我们先从鲍勃的故事说起。</p><p id="df31" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">Bob 在一家大型金融公司担任数据科学家。Bob 和他的团队都使用 Python，并定期在某些项目上相互协作。然而，由于这家金融公司规模很大，他们都有大量的个人项目。因此，需要一种通用的方法来将这些项目相互分离，以确保它们可以在任何安装了 Python 的计算机上运行。这就是虚拟环境发挥作用的地方。</p><p id="b2a6" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">你可以把一个虚拟环境想象成你电脑中 Python   <em class="od"> </em>的<strong class="ls jk"> <em class="od">特定副本，你可以指定自己<strong class="ls jk"><em class="od"/></strong>。这个副本可以是安装了任何</em>包的任何版本的 Python。使用虚拟环境可以确保项目之间存在一定的障碍。这些障碍确保任何人都可以运行您的 Python 版本，不管他们的计算机上有什么。</strong></p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="d2e5" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">使用 Anaconda 创建一个环境</h1><p id="0c7a" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我将在本教程中使用 Anaconda，因为它使得创建和维护虚拟环境变得极其容易。如果你没有下载，你可以在 Anaconda 的网站上设置<a class="ae jg" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">个人版。完全下载可能需要一些时间。</a></p><p id="6f82" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您允许 Anaconda 设置一个路径变量，那么您可以在您的命令提示符下执行我的操作。如果没有，您仍然可以在下载文件附带的 Anaconda 提示符下遵循这些步骤。</p><p id="3919" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">让我们首先从创建一个新环境开始。我将把它命名为<code class="fe oe of og oh b">tutorial</code>，但是你可以随便叫它:</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="b00b" class="my kz jj oh b gy oq or l os ot">$ conda create -n tutorial python=3.7</span></pre><p id="6ad2" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">注意事项:</p><ul class=""><li id="20de" class="nk nl jj ls b lt mm lw mn lz ou md ov mh ow ml np nq nr ns bi translated"><code class="fe oe of og oh b">-n</code>表示虚拟环境的名称</li><li id="d0c1" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated"><code class="fe oe of og oh b">python=3.7</code>是可选的，可以改成任何版本。我更喜欢在创建环境时设置一个特定的版本，因为它会给你一个“基本的”Python 环境。</li><li id="a3d4" class="nk nl jj ls b lt nt lw nu lz nv md nw mh nx ml np nq nr ns bi translated">您将被要求继续安装一组软件包。键入<code class="fe oe of og oh b">y</code>并按回车键。</li></ul><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/c3a1b841bac9a902988441796d70cd1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jTRhFInzhsgw9I75YRofSA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="4ef7" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">将软件包安装到环境中</h1><p id="19b7" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">现在我们的环境已经创建好了，Anaconda 给了我们一个提示。</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="a1d5" class="my kz jj oh b gy oq or l os ot">#<br/># To activate this environment, use<br/>#<br/>#     $ conda activate tutorial<br/>#<br/># To deactivate an active environment, use<br/>#<br/>#     $ conda deactivate</span></pre><p id="4476" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">所以我们会这样做。激活我们的环境:</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="1203" class="my kz jj oh b gy oq or l os ot">$ conda activate tutorial</span></pre><p id="1f99" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这是我们应该期待看到的:</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/f61baf4ef95acd764b8a4bc6ca11481c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2rWJiAS9pBmExE6OEuCkkw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="1b85" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">请注意，当我们激活虚拟环境时，括号中的虚拟环境名称是如何出现的。这就是我们如何知道我们在环境中。</p><p id="cee8" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">要安装软件包，我们可以像安装其他软件包一样使用<code class="fe oe of og oh b">pip</code>。由于本文的目的是让我们也能使用 Jupyter 中的虚拟环境，我们将安装<code class="fe oe of og oh b">ipykernel</code>来为我们完成这项工作。但是，您可以在这个阶段为您的项目安装任何需要的包。</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="86e2" class="my kz jj oh b gy oq or l os ot">$ pip install ipykernel</span></pre><p id="5d13" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">让提示符运行并安装<code class="fe oe of og oh b">ipykernel</code>。我们现在可以为 Jupyter 创建 Python 内核。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="af1c" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">使用 Jupyter 中的虚拟环境作为内核</h1><p id="8e2f" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">使用 Jupyter 笔记本时，您可以使用纯文本或代码。我们使用的代码块是内核。我们可以用<code class="fe oe of og oh b">ipykernel</code>创建新的内核。</p><p id="1930" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">当我们创建内核时，我们可以将它链接到我们的虚拟环境。当您正在创建一个新项目并且不确定您需要的必要包时，这将变得非常有用。无论您删除三分之二的已安装软件包还是再安装一个，内核将始终镜像我们创建的虚拟环境。</p><p id="7618" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">为此:</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="9834" class="my kz jj oh b gy oq or l os ot">$ <!-- -->python -m ipykernel install --user --name=tutorial</span></pre><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/6d14e3e47e316bd0948f5aefc2384e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OeOwkA2ADfoThlXdoi9x0g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="e25d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在要验证内核是否在我们的 Jupyter 笔记本中:</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/ab3a23c546c767a21e7cec526c357734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrYlwqOXH50ghHHFEiF7Wg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="64aa" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如你所见，<code class="fe oe of og oh b">tutorial</code>现在是我们的一个内核了。我们现在可以利用这种环境创建新的笔记本电脑，或者利用现有的采用这种新内核的笔记本电脑。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="8721" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">删除环境和内核</h1><p id="b3c8" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">出于管理目的，我还将向您展示如何逆转我们在本文中已经完成的内容。首先，停用您的虚拟环境。</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="cd9b" class="my kz jj oh b gy oq or l os ot">$ conda deactivate</span></pre><p id="177e" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">你应该看到<code class="fe oe of og oh b">(tutorial)</code>走开。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="45f7" class="my kz jj bd la mz na dn le nb nc dp li lz nd ne lk md nf ng lm mh nh ni lo nj bi translated">移除内核:</h2><p id="f0d0" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先，查看计算机上的内核列表。如果您在阅读本文之前从未这样做过，那么您应该会看到两个内核的列表:Python 3 和我们刚刚创建的内核。</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="0838" class="my kz jj oh b gy oq or l os ot">$ jupyter kernelspec list</span></pre><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/602ac2851c53dc319706fab308e1c117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZJFP-4ZIxXPneGLCSLLRw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="c4da" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在我们知道我们有什么，我们知道要删除什么。要删除内核，请使用下面的命令。您将被要求再次与<code class="fe oe of og oh b">y</code>确认。</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="5a64" class="my kz jj oh b gy oq or l os ot">$ jupyter kernelspec remove tutorial</span></pre><p id="3c89" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">一旦完成，用<code class="fe oe of og oh b">jupyter kernelspec list</code>再次确认它已被移除。</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/ce071d031a50cdb2f94fc683df803e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDjMvIwmhG1szi_vqo5hyg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="30ad" class="my kz jj bd la mz na dn le nb nc dp li lz nd ne lk md nf ng lm mh nh ni lo nj bi translated">删除环境:</h2><p id="f506" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">删除虚拟环境基本上遵循与删除内核相同的过程。首先，查看我们拥有的环境列表:</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="e5e7" class="my kz jj oh b gy oq or l os ot">$ conda env list</span></pre><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/1016389545c730c1459fd0d8c5eb8283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ctZtN3sV50ztt-F0rFX0pw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="9455" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您的列表中没有<code class="fe oe of og oh b">blind-source-separation</code>，请不要担心。这是我亲自参与的项目之一。你应该期待看到<code class="fe oe of og oh b">base</code>和<code class="fe oe of og oh b">tutorial</code>。要移除<code class="fe oe of og oh b">tutorial</code>:</p><pre class="oi oj ok ol gt om oh on oo aw op bi"><span id="a332" class="my kz jj oh b gy oq or l os ot">$ conda env remove -n tutorial</span></pre><p id="d5f1" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">删除后，查看环境列表进行验证。</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/e6491eee0f7da527d7535f0c18be3cce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1q-zw1J2TrAKhqCBtF1i3g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="a735" class="ky kz jj bd la lb ny ld le lf nz lh li kp oa kq lk ks ob kt lm kv oc kw lo lp bi translated">结论:</h1><p id="550b" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我希望这篇教程能帮助你理解如何创建虚拟环境，并把它们链接到你的 Jupyter 笔记本上。请随意保存这篇文章，以节省您一次又一次搜索这些程序的时间。</p><blockquote class="oz"><p id="2f52" class="pa pb jj bd pc pd pe pf pg ph pi ml dk translated">感谢您的阅读。</p></blockquote></div></div>    
</body>
</html>