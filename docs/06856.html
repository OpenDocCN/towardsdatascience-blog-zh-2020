<html>
<head>
<title>Deploy Machine Learning Pipeline on Google Kubernetes Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Google Kubernetes引擎上部署机器学习管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-machine-learning-model-on-google-kubernetes-engine-94daac85108b?source=collection_archive---------7-----------------------#2020-05-28">https://towardsdatascience.com/deploy-machine-learning-model-on-google-kubernetes-engine-94daac85108b?source=collection_archive---------7-----------------------#2020-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/14fbab21ae94bf9a92b4608b957d72ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P-JjI7MXq6UJV9Xab-B9qg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">在Google Kubernetes引擎上封装和部署ML管道的循序渐进的初学者指南</p></figure><h1 id="b5f2" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">概述</h1><p id="7c93" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在我们关于在云中部署机器学习管道的<a class="ae ly" rel="noopener" target="_blank" href="/deploy-machine-learning-pipeline-on-cloud-using-docker-container-bec64458dc01">上一篇文章</a>中，我们展示了如何用PyCaret开发机器学习管道，用Docker将其容器化，并作为使用Microsoft Azure web App服务的Web应用。如果你以前没有听说过PyCaret，请阅读这个<a class="ae ly" rel="noopener" target="_blank" href="/announcing-pycaret-an-open-source-low-code-machine-learning-library-in-python-4a1f1aad8d46">公告</a>以了解更多信息。</p><p id="e016" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在本教程中，我们将使用我们之前构建和部署的相同的机器学习管道和Flask应用程序。这次我们将演示如何在Google Kubernetes引擎上封装和部署机器学习管道。</p><h1 id="32a0" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉本教程的学习目标</h1><ul class=""><li id="6ef1" class="me mf iq lc b ld le lh li ll mg lp mh lt mi lx mj mk ml mm bi translated">了解什么是容器，什么是Docker，什么是Kubernetes，什么是Google Kubernetes引擎？</li><li id="51c5" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">建立一个Docker图像，并上传到谷歌容器注册(GCR)。</li><li id="fc56" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">使用Flask app作为web服务创建集群和部署机器学习管道。</li><li id="4c8b" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">看看一个使用训练有素的机器学习管道来实时预测新数据点的web应用程序。</li></ul><p id="53f6" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">之前我们展示了<a class="ae ly" rel="noopener" target="_blank" href="/build-and-deploy-your-first-machine-learning-web-app-e020db344a99">如何在Heroku PaaS上部署ML管道</a>和<a class="ae ly" rel="noopener" target="_blank" href="/deploy-machine-learning-pipeline-on-cloud-using-docker-container-bec64458dc01">如何在Azure Web服务上使用Docker容器部署ML管道。</a></p><p id="922e" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">本教程将涵盖整个工作流程，从构建docker图像开始，将其上传到Google Container Registry，然后将预训练的机器学习管道和Flask应用程序部署到Google Kubernetes引擎(GKE)上。</p><h1 id="bde4" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">💻本教程的工具箱</h1><h1 id="8ec1" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">PyCaret</h1><p id="c008" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae ly" href="https://www.pycaret.org/" rel="noopener ugc nofollow" target="_blank"> PyCaret </a>是Python中的开源、低代码机器学习库，用于训练和部署机器学习管道和模型到生产中。PyCaret可以使用pip轻松安装。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="9941" class="nb kd iq mx b gy nc nd l ne nf">pip install pycaret</span></pre><h1 id="47e0" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">瓶</h1><p id="a1ee" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">Flask 是一个允许你构建web应用的框架。web应用程序可以是商业网站、博客、电子商务系统，也可以是使用训练好的模型从实时提供的数据中生成预测的应用程序。如果你没有安装Flask，你可以使用pip来安装。</p><h1 id="8c5b" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">谷歌云平台</h1><p id="2693" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">由谷歌提供的谷歌云平台(GCP)是一套云计算服务，运行在谷歌内部用于其最终用户产品(如谷歌搜索、Gmail和YouTube)的相同基础设施上。如果你没有GCP的账户，你可以在这里注册。如果你是第一次注册，你将获得1年的免费学分。</p><h1 id="8cb3" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">让我们开始吧。</h1><p id="addf" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在我们进入Kubernetes之前，让我们了解一下什么是容器，为什么我们需要一个容器？</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/de136ffefe9f778acb5c2d8d14641d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*SlzsvRhA71oFOhAjE1Hs0A.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">【https://www.freepik.com/free-photos-vectors/cargo-ship T2】号</p></figure><p id="a113" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">您是否遇到过这样的问题:您的代码在您的计算机上运行得很好，但是当一个朋友试图运行完全相同的代码时，却无法运行？如果你的朋友重复完全相同的步骤，他或她应该得到相同的结果，对不对？一个词的答案是<strong class="lc ir"> <em class="nh">环境</em>。</strong>你朋友的环境和你不一样。</p><p id="4c47" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">环境包括什么？→编程语言，如Python和所有的库和依赖项，以及构建和测试应用程序所使用的确切版本。</p><p id="f506" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果我们可以创建一个可以转移到其他机器上的环境(例如:你朋友的电脑或者谷歌云平台这样的云服务提供商)，我们就可以在任何地方重现结果。因此，<strong class="lc ir"><em class="nh"/></strong><em class="nh"/><strong class="lc ir"><em class="nh">容器</em> </strong>是一种将应用程序及其所有依赖项打包的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境。</p><blockquote class="ni nj nk"><p id="e42a" class="la lb nh lc b ld lz lf lg lh ma lj lk nl mb ln lo nm mc lr ls nn md lv lw lx ij bi translated">那Docker是什么？</p></blockquote><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/4f2f499e4bea87156b17080c49e81550.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*EJx9QN4ENSPKZuz51rC39w.png"/></div></figure><p id="77e9" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">Docker是一家提供允许用户构建、运行和管理容器的软件(也称为Docker)的公司。虽然Docker的集装箱是最常见的，但也有其他不太出名的选择，如提供集装箱解决方案的LXD和LXC。</p><p id="daa5" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">现在您已经具体了解了容器和docker，让我们了解Kubernetes是什么。</p><h1 id="61c3" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是Kubernetes？</h1><p id="6ba8" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">Kubernetes是Google在2014年开发的一个强大的开源系统，用于管理容器化的应用程序。简而言之，Kubernetes <strong class="lc ir"> </strong>是一个跨机器集群运行和协调容器化应用的系统。这是一个旨在完全管理容器化应用程序生命周期的平台。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/6ea521f575fb5d5bb85d31855b50a8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2ZayMwt1Un8-9ZFA"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ly" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>拍摄</p></figure><h1 id="a83b" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">特征</h1><p id="6b08" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">✔️ <strong class="lc ir">负载平衡:</strong>自动在集装箱之间分配负载。</p><p id="6c92" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">✔️ <strong class="lc ir">扩展:</strong>当需求变化时，如高峰时间、周末和节假日，通过添加或删除容器来自动扩展或缩小。</p><p id="e87a" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">✔️ <strong class="lc ir">存储:</strong>保持存储与应用程序的多个实例一致。</p><p id="8fa7" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">✔️ <strong class="lc ir">自我修复</strong>自动重启失败的容器，并杀死不响应用户定义的健康检查的容器。</p><p id="5e95" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">✔️ <strong class="lc ir">自动化部署</strong>您可以自动化Kubernetes来为您的部署创建新的容器，删除现有的容器，并将它们的所有资源应用到新的容器中。</p><h1 id="fb45" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">有Docker为什么还要Kubernetes？</h1><p id="0693" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">想象一下这样一个场景，您必须在多台机器上运行多个docker容器来支持一个企业级ML应用程序，无论白天还是晚上都有不同的工作负载。虽然听起来很简单，但手动完成的工作量很大。</p><p id="4ce6" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">您需要在正确的时间启动正确的容器，弄清楚它们如何相互通信，处理存储问题，以及处理失败的容器或硬件。这就是Kubernetes正在解决的问题，它允许大量的容器和谐地一起工作，减少了操作负担。</p><blockquote class="nq"><p id="bf8b" class="nr ns iq bd nt nu nv nw nx ny nz lx dk translated">将<strong class="ak"> Docker与Kubernetes相提并论是错误的。</strong>这是两种不同的技术。Docker是一个允许你容器化应用程序的软件，而Kubernetes是一个容器管理系统，允许创建、扩展和监控成百上千个容器。</p></blockquote><p id="497e" class="pw-post-body-paragraph la lb iq lc b ld oa lf lg lh ob lj lk ll oc ln lo lp od lr ls lt oe lv lw lx ij bi translated">在任何应用程序的生命周期中，Docker用于在部署时打包应用程序，而kubernetes用于在生命周期的其余时间管理应用程序。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/1412acf27677aa1510d73b2a857da2fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBJjxZrfdMppXhdwjZLX6w.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">通过Kubernetes / Docker部署的应用程序的生命周期</p></figure><h1 id="fc87" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是Google Kubernetes引擎？</h1><p id="5cae" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">Google Kubernetes引擎是Google开源Kubernetes 在Google云平台上的实现。简单！</p><p id="0dcd" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">其他受欢迎的GKE替代品有亚马逊ECS和微软Azure Kubernetes服务T21。</p><h1 id="2094" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">最后一次，你明白吗？</h1><ul class=""><li id="c0ff" class="me mf iq lc b ld le lh li ll mg lp mh lt mi lx mj mk ml mm bi translated"><strong class="lc ir">容器</strong>是一种打包应用程序及其所有依赖项的软件，因此应用程序可以从一个计算环境可靠地运行到另一个计算环境。</li><li id="1dd6" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><strong class="lc ir"> Docker </strong>是一款用于构建和管理容器的软件。</li><li id="461b" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><strong class="lc ir"> Kubernetes </strong>是一个在集群环境中管理容器化应用的开源系统。</li><li id="7db2" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><strong class="lc ir"> Google Kubernetes引擎</strong>是开源的Kubernetes框架在Google云平台上的实现。</li></ul><p id="784c" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在本教程中，我们将使用谷歌Kubernetes引擎。为了跟进，你必须有一个谷歌云平台账户。<a class="ae ly" href="https://console.cloud.google.com/getting-started" rel="noopener ugc nofollow" target="_blank">点击这里</a>免费报名。</p><h1 id="0c42" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">设置业务环境</h1><p id="32ab" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">一家保险公司希望通过使用住院时的人口统计和基本患者健康风险指标来更好地预测患者费用，从而改善其现金流预测。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/0d35a8d2ddf1693e80660f604ba756ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qM1HiWZ_uigwdcZ0_ZL6yA.png"/></div></div></figure><p id="8ca9" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><em class="nh"> ( </em> <a class="ae ly" href="https://www.kaggle.com/mirichoi0218/insurance#insurance.csv" rel="noopener ugc nofollow" target="_blank"> <em class="nh">数据源</em> </a> <em class="nh"> ) </em></p><h1 id="4d0b" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">目标</h1><p id="913a" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">构建和部署一个web应用程序，将患者的人口统计和健康信息输入到基于web的表单中，然后输出预测的收费金额。</p><h1 id="097e" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">任务</h1><ul class=""><li id="1a2d" class="me mf iq lc b ld le lh li ll mg lp mh lt mi lx mj mk ml mm bi translated">为部署培训和开发机器学习管道。</li><li id="2eeb" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">使用Flask框架构建web应用程序。它将使用经过训练的ML管道实时生成对新数据点的预测。</li><li id="aa70" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">建立一个docker图像，并上传到谷歌容器注册(GCR)的容器。</li><li id="a575" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">创建集群并在Google Kubernetes引擎上部署应用程序。</li></ul><p id="388d" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">由于我们已经在最初的教程中介绍了前两个任务，我们将快速回顾它们，然后集中讨论上面列表中的其余项目。如果您有兴趣了解更多关于使用PyCaret在Python中开发机器学习管道以及使用Flask框架构建web应用程序的信息，请阅读本教程。</p><h1 id="d9ea" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉开发机器学习管道</h1><p id="3a2e" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们正在使用Python中的PyCaret进行训练，并开发一个机器学习管道，它将作为我们web应用程序的一部分。机器学习管道可以在集成开发环境(IDE)或笔记本中开发。我们使用笔记本运行了以下代码:</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d22e" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">当您在PyCaret中保存一个模型时，基于在<strong class="lc ir"> setup() </strong>函数中定义的配置的整个转换管道被创建。所有的相互依赖都是自动编排的。查看存储在“deployment_28042020”变量中的管道和模型:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a9845c2631e671c47ec93a2f730018ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P7EXfIxqZZGrpeLgDdk1vQ.png"/></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">使用PyCaret创建的机器学习管道</p></figure><h1 id="98b6" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">👉构建Web应用程序</h1><p id="c0a5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">本教程的重点不是构建Flask应用程序。这里讨论它只是为了完整性。现在我们的机器学习管道已经准备好了，我们需要一个web应用程序，它可以连接到我们训练过的管道，以实时生成对新数据点的预测。我们已经使用Python中的Flask框架创建了web应用程序。该应用程序有两个部分:</p><ul class=""><li id="3c98" class="me mf iq lc b ld lz lh ma ll ok lp ol lt om lx mj mk ml mm bi translated">前端(使用HTML设计)</li><li id="4efa" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">后端(使用Flask开发)</li></ul><p id="37ca" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">这是我们的web应用程序的外观:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/bd02a6aa0e599dc3bc528472c6a6ae5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tc_6S8NztYKB85rPUJd1uQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">本地计算机上的Web应用程序</p></figure><p id="8bda" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果到目前为止你还没有跟上，没问题。您可以简单地从GitHub派生这个<a class="ae ly" href="https://github.com/pycaret/pycaret-deployment-google" rel="noopener ugc nofollow" target="_blank">存储库</a>。此时，您的项目文件夹应该是这样的:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/3ce7d982fe954b55e2f7d7a5130dce66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CcId22jB-BMCen8o1hWNdQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">https://www.github.com/pycaret/pycaret-deployment-google<a class="ae ly" href="https://www.github.com/pycaret/pycaret-deployment-google" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="69af" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">现在我们有了一个全功能的web应用程序，我们可以开始在Google Kubernetes引擎上封装和部署应用程序了。</p><h1 id="bb4c" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">在Google Kubernetes引擎上部署ML管道的10个步骤:</h1><h2 id="bd1a" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤1 —在GCP控制台中创建新项目</h2><p id="635a" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">登录您的GCP控制台，然后转到“管理资源”</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/0112c5b48190c841bc603369a8274243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OS16COUUns7uBnpyUxH9-w.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">谷歌云平台控制台→管理资源</p></figure><p id="deca" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">点击<strong class="lc ir">创建新项目</strong></p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/1b9b08cd9ca19baba79fd1dce5d23186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QJz8fITeJJWP44yPm2v4vQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">Google云平台控制台→管理资源→创建新项目</p></figure><h2 id="ee10" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤2 —导入项目代码</h2><p id="02d9" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">点击控制台窗口顶部的<strong class="lc ir">激活云壳</strong>按钮打开云壳。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/713eae73b2b25e3cf78d01105c61c7fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mbcd4RlkCcz98Pbf4KSUAA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">谷歌云平台(项目信息页面)</p></figure><p id="84ed" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">在Cloud Shell中执行以下代码来克隆本教程中使用的GitHub存储库。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a67b" class="nb kd iq mx b gy nc nd l ne nf">git clone https://github.com/pycaret/pycaret-deployment-google.git</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pc"><img src="../Images/242da35b33bc9696f0e5ee156c754710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_RQ30jDG4UsyS84mh-qrw.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">git克隆<a class="ae ly" href="https://github.com/pycaret/pycaret-deployment-google.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pycaret/pycaret-deployment-google.git</a></p></figure><h2 id="b30a" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤3-设置项目ID环境变量</h2><p id="4baf" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">执行以下代码来设置PROJECT_ID环境变量。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b2e1" class="nb kd iq mx b gy nc nd l ne nf">export PROJECT_ID=<strong class="mx ir">pycaret-kubernetes-demo</strong></span></pre><p id="4273" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><em class="nh">py caret-kubernetes-demo</em>是我们在上面的步骤1中选择的项目的名称。</p><h2 id="5fbc" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤4—构建docker映像</h2><p id="83e5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">通过执行以下代码，构建应用程序的docker映像并标记它以便上传:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a9ec" class="nb kd iq mx b gy nc nd l ne nf">docker build -t gcr.io/${PROJECT_ID}/insurance-app:v1 .</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/742aebd91814c41b8a88bb99d94bdcb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zo7_W7pG6JhFvHbzyQeEsA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">docker构建成功时返回的消息</p></figure><p id="ee82" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">您可以通过运行以下代码来检查可用的图像:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="067d" class="nb kd iq mx b gy nc nd l ne nf">docker images</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/926ba433d6e372d6468f89bdd50e41f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0paobe_W8tmdCF1xhX4BgA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">云壳上“docker images”命令的输出</p></figure><h2 id="4d86" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤5—上传容器图像</h2><ol class=""><li id="d7f8" class="me mf iq lc b ld le lh li ll mg lp mh lt mi lx pd mk ml mm bi translated">认证到<a class="ae ly" href="https://cloud.google.com/container-registry" rel="noopener ugc nofollow" target="_blank">容器注册表</a>(您只需要运行一次):</li></ol><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="be41" class="nb kd iq mx b gy nc nd l ne nf">gcloud auth configure-docker</span></pre><p id="9da6" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">2.执行以下代码将docker图像上传到Google容器注册表:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="2616" class="nb kd iq mx b gy nc nd l ne nf">docker push gcr.io/${PROJECT_ID}/insurance-app:v1</span></pre><h2 id="6655" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤6—创建集群</h2><p id="bcd5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">现在容器已经上传，您需要一个集群来运行容器。一个集群由一个运行Kubernetes的计算引擎VM实例池组成。</p><ol class=""><li id="a5be" class="me mf iq lc b ld lz lh ma ll ok lp ol lt om lx pd mk ml mm bi translated">为gcloud工具设置项目ID和计算引擎区域选项:</li></ol><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="c205" class="nb kd iq mx b gy nc nd l ne nf">gcloud config set project $PROJECT_ID <br/>gcloud config set compute/zone <strong class="mx ir">us-central1</strong></span></pre><p id="1e30" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">2.通过执行以下代码创建一个集群:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="6ef3" class="nb kd iq mx b gy nc nd l ne nf">gcloud container clusters create <strong class="mx ir">insurance-cluster</strong> --num-nodes=2</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/e9918d8443e151af073cb6eb710f5b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2sHrv5nuFjDKiyAtjYapQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">谷歌云平台→ Kubernetes引擎→集群</p></figure><h2 id="2109" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤7—部署应用程序</h2><p id="f2f7" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">要在GKE集群上部署和管理应用程序，您必须与Kubernetes集群管理系统通信。执行以下命令来部署应用程序:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="9756" class="nb kd iq mx b gy nc nd l ne nf">kubectl create deployment insurance-app --image=gcr.io/${PROJECT_ID}/insurance-app:v1</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pe"><img src="../Images/55a4a95687991a90dfc20a97553f85cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p0_A6PZnfYJ4mnttM7lzzA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">通过kubectl创建部署时返回的输出</p></figure><h2 id="230a" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤8—将您的应用程序公开到互联网上</h2><p id="2f2c" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">默认情况下，您在GKE上运行的容器不能从互联网上访问，因为它们没有外部IP地址。执行以下代码，将应用程序公开给internet:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="6612" class="nb kd iq mx b gy nc nd l ne nf">kubectl expose deployment insurance-app --type=LoadBalancer --port 80 --target-port 8080</span></pre><h2 id="bb32" class="nb kd iq bd ke op oq dn ki or os dp km ll ot ou kq lp ov ow ku lt ox oy ky oz bi translated">👉步骤9—检查服务</h2><p id="e81f" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">执行下面的代码来获取服务的状态。<strong class="lc ir"> EXTERNAL-IP </strong>是您可以在浏览器中查看已发布应用的网址。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="d443" class="nb kd iq mx b gy nc nd l ne nf">kubectl get service</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/e1ddb3c04c30ab94c1042d43ef7608ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRWl7frtmvPYaYjAoloFgQ.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">云壳→ kubectl获取服务</p></figure><p id="0392" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">👉第10步——在http://34.71.77.61:8080的<a class="ae ly" href="http://34.71.77.61:8080" rel="noopener ugc nofollow" target="_blank">上查看应用程序的运行情况</a></p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pc"><img src="../Images/438047ede37d8e84eaf9280d28a04ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bKuZiYSPdE8T5SLKXx5B_Q.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">最终应用上传至http://34.71.77.61:8080<a class="ae ly" href="http://34.71.77.61:8080" rel="noopener ugc nofollow" target="_blank"/></p></figure><p id="2610" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><strong class="lc ir">注意:</strong>在这篇文章发表时，该应用程序将从公共地址中删除，以限制资源消耗。</p><p id="222a" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.github.com/pycaret/pycaret-deployment-google" rel="noopener ugc nofollow" target="_blank">链接到本教程的GitHub库</a></p><p id="76eb" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.github.com/pycaret/pycaret-azure-deployment" rel="noopener ugc nofollow" target="_blank">链接到微软Azure部署的GitHub仓库</a></p><p id="d411" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.github.com/pycaret/deployment-heroku" rel="noopener ugc nofollow" target="_blank">链接到Heroku部署的GitHub存储库</a></p></div><div class="ab cl pf pg hu ph" role="separator"><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk pl"/><span class="pi bw bk pj pk"/></div><div class="ij ik il im in"><h1 id="3c61" class="kc kd iq bd ke kf pm kh ki kj pn kl km kn po kp kq kr pp kt ku kv pq kx ky kz bi translated">PyCaret 1.0.1来了！</h1><p id="bd34" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们收到了来自社区的大力支持和反馈。我们正在积极改进PyCaret，并准备我们的下一个版本。<strong class="lc ir"> PyCaret 1.0.1会更大更好</strong>。如果您想分享您的反馈并帮助我们进一步改进，您可以<a class="ae ly" href="https://www.pycaret.org/feedback" rel="noopener ugc nofollow" target="_blank">在网站上填写此表格</a>或者在我们的<a class="ae ly" href="https://www.github.com/pycaret/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>或<a class="ae ly" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>页面上发表评论。</p><p id="375f" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">关注我们的<a class="ae ly" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>并订阅我们的<a class="ae ly" href="https://www.youtube.com/channel/UCxA1YTYJ9BEeo50lxyI_B3g" rel="noopener ugc nofollow" target="_blank"> YouTube </a>频道，了解更多关于PyCaret的信息。</p><h1 id="05ba" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">想了解某个特定模块？</h1><p id="897a" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">从第一个版本1.0.0开始，PyCaret有以下模块可供使用。点击下面的链接，查看Python中的文档和工作示例。</p><p id="eca4" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.pycaret.org/classification" rel="noopener ugc nofollow" target="_blank">分类</a><br/>T3】回归<br/>T5】T6】聚类 <br/> <a class="ae ly" href="https://www.pycaret.org/anomaly-detection" rel="noopener ugc nofollow" target="_blank">异常检测<br/> </a> <a class="ae ly" href="https://www.pycaret.org/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> <br/> <a class="ae ly" href="https://www.pycaret.org/association-rules" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a></p><h1 id="91a1" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">另请参见:</h1><p id="ed69" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">笔记本中的PyCaret入门教程:</p><p id="9d49" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated"><a class="ae ly" href="https://www.pycaret.org/clu101" rel="noopener ugc nofollow" target="_blank">聚类</a> <br/> <a class="ae ly" href="https://www.pycaret.org/anom101" rel="noopener ugc nofollow" target="_blank">异常检测</a> <br/> <a class="ae ly" href="https://www.pycaret.org/nlp101" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> <br/> <a class="ae ly" href="https://www.pycaret.org/arul101" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a> <br/> <a class="ae ly" href="https://www.pycaret.org/reg101" rel="noopener ugc nofollow" target="_blank">回归</a> <br/> <a class="ae ly" href="https://www.pycaret.org/clf101" rel="noopener ugc nofollow" target="_blank">分类</a></p><h1 id="ddd9" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">你愿意投稿吗？</h1><p id="9e5d" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">PyCaret是一个开源项目。欢迎每个人都来投稿。如果您愿意投稿，请随意处理<a class="ae ly" href="https://github.com/pycaret/pycaret/issues" rel="noopener ugc nofollow" target="_blank">未决问题</a>。dev-1.0.1分支上的单元测试接受拉请求。</p><p id="7e5c" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">如果你喜欢PyCaret，请给我们GitHub回购的⭐️。</p><p id="bad2" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">中:<a class="ae ly" href="https://medium.com/@moez_62905/machine-learning-in-power-bi-using-pycaret-34307f09394a" rel="noopener">https://medium.com/@moez_62905/</a></p><p id="d231" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">领英:<a class="ae ly" href="https://www.linkedin.com/in/profile-moez/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/profile-moez/</a></p><p id="d1e2" class="pw-post-body-paragraph la lb iq lc b ld lz lf lg lh ma lj lk ll mb ln lo lp mc lr ls lt md lv lw lx ij bi translated">推特:【https://twitter.com/moezpycaretorg1 T42】T43</p></div></div>    
</body>
</html>