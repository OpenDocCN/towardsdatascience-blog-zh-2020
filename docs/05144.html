<html>
<head>
<title>Master the COCO Dataset for Semantic Image Segmentation — Part 1 of 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握用于语义图像分割的COCO数据集—第1部分，共2部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/master-the-coco-dataset-for-semantic-image-segmentation-part-1-of-2-732712631047?source=collection_archive---------1-----------------------#2020-05-03">https://towardsdatascience.com/master-the-coco-dataset-for-semantic-image-segmentation-part-1-of-2-732712631047?source=collection_archive---------1-----------------------#2020-05-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="be9b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在这个由两部分组成的演练中，我们将使用PyCoco和Tensorflow Keras等库来探索和操作COCO(上下文中的公共对象)图像数据集，以便在Python中进行语义图像分割。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38de4c4a9bc7a23479dbf64059a297ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*taqoyoo-5DlTvktWYM21tQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">你是说可可吗？(原图由来自<a class="ae ky" href="https://www.pexels.com/photo/white-ceramic-mug-1693652/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>的<a class="ae ky" href="https://www.pexels.com/@nietjuh?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">伊兰尼特·科彭斯</a>拍摄)</p></figure><p id="f46a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://cocodataset.org/#home" rel="noopener ugc nofollow" target="_blank"> COCO(上下文中的常见对象)</a>，是最受欢迎的图像数据集之一，具有对象检测、分割和字幕等应用程序——令人惊讶的是，几乎没有全面而简单的端到端教程。当我第一次开始使用这个数据集时，我感到非常失落和害怕。我不得不费力地通过网上这么多分散的、不充分的资源、多个模糊的教程和一些实验，最终在这条隧道的尽头看到光明。当我完成后，我知道我必须记录下这段旅程，从开始到结束。于是我照做了。希望有一天，有人会发现这些有价值的东西，而不必经历我所面临的所有麻烦。</p><p id="becf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个由两部分组成的系列教程，旨在帮助您探索、使用和掌握用于图像分割的COCO图像数据集。我会尽量保持简单，为每一步提供解释，并且只使用免费的、简单的库。<em class="lv">我在这里的工作是让你熟悉和熟悉这个话题，达到一个水平，在这个水平上</em> <strong class="lb iu"> <em class="lv">你可以占据中心位置，并根据你的需要操纵它！</em>T11】</strong></p><p id="3a72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在第1部分中，我们将首先使用一个名为<a class="ae ky" href="https://pypi.org/project/pycoco/#description" rel="noopener ugc nofollow" target="_blank"> pycoco </a>的python库来探索和操作用于图像分割的COCO数据集。这个库简化了COCO数据集的处理，否则自己编写代码会非常困难。</p><p id="3a28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" rel="noopener" target="_blank" href="/master-the-coco-dataset-for-semantic-image-segmentation-part-2-of-2-c0d1f593096a">第2部分</a>中，我们将使用T<a class="ae ky" href="https://www.tensorflow.org/guide/keras" rel="noopener ugc nofollow" target="_blank">sensor flow Keras</a>库来简化该数据集上的训练模型，并添加图像增强。</p><p id="a2a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在我的<a class="ae ky" href="https://github.com/virafpatrawala/COCO-Semantic-Segmentation" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中找到本教程的完整代码。然而，请继续阅读这篇文章以获得更详细的解释。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="fe5b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.COCO数据集</h1><blockquote class="mv mw mx"><p id="aed7" class="kz la lv lb b lc ld ju le lf lg jx lh my lj lk ll mz ln lo lp na lr ls lt lu im bi translated">" COCO是一个大规模的对象检测、分割和字幕数据集."</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/7a5e14d3debc0ec046b2cdbde16c72ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vP5WkxR8oY2Iz0Ox0tXW1w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://cocodataset.org/#home" rel="noopener ugc nofollow" target="_blank"> COCO数据集</a></p></figure><p id="3eb7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上下文中的常见对象(COCO)字面上意味着数据集中的图像是从日常场景中捕获的日常对象。这为场景中捕捉的对象添加了一些“上下文”。<a class="ae ky" href="http://cocodataset.org/#explore" rel="noopener ugc nofollow" target="_blank">在这里探索这个数据集</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/9ea5f147a4b5527bc43e6c70161ca259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ShJDpj-tEmuxJ0BdvsvIOw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据集中的示例图像。</p></figure><p id="28ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">COCO提供多对象标记、分割遮罩注释、图像字幕、关键点检测和全景分割注释，共有81个类别，使其成为一个非常通用和多用途的数据集。</p><p id="c8f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本演练中，我们将重点关注数据集的语义分段应用。</p><h1 id="968a" class="md me it bd mf mg nd mi mj mk ne mm mn jz nf ka mp kc ng kd mr kf nh kg mt mu bi translated">2.下载和安装</h1><h2 id="68d2" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">椰子树</h2><p id="cfc2" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">您需要将COCO数据集下载到您的设备上(很明显)。您可以使用以下链接下载2017年数据集文件。这些文件非常大，所以请耐心等待，因为这可能需要一些时间。您需要的文件有:</p><p id="ea59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(一)<a class="ae ky" href="http://images.cocodataset.org/zips/train2017.zip" rel="noopener ugc nofollow" target="_blank"> 2017年列车图像</a></p><p id="6e90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(b) <a class="ae ky" href="http://images.cocodataset.org/zips/val2017.zip" rel="noopener ugc nofollow" target="_blank"> 2017 val图像</a></p><p id="c743" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(c) <a class="ae ky" href="http://images.cocodataset.org/annotations/stuff_annotations_trainval2017.zip" rel="noopener ugc nofollow" target="_blank"> 2017 Stuff Train/Val注释</a></p><p id="cb8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提取压缩文件。从(c)中，只需要train和val的<em class="lv">实例</em>文件，即<em class="lv">实例_train2017.json </em>和<em class="lv">实例_val2017.json. </em></p><p id="30b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按照下面给出的文件结构排列这些文件。需要对文件夹和文件进行一些简单的重新排列和重新命名。我这样做只是为了便于使用和可视化，如果你不想这样做，你需要做的就是相应地更改代码(主要是文件路径)。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="743c" class="ni me it oa b gy oe of l og oh">Project Folder<br/>└───the code notebook (.py / .ipynb)<br/>│<br/>└───COCOdataset2017   <br/>    └───images<br/>    │   └───train<br/>    │   │    │   000000000009.jpg<br/>    │   │    │   000000000025.jpg<br/>    │   │    │   ...<br/>    │   └───val   <br/>    │        │   000000000139.jpg<br/>    │        │   000000000285.jpg<br/>    │        │   ...<br/>    └───annotations<br/>        │   instances_train.json<br/>        │   instances_val.json</span></pre><p id="3c8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">#请注意，有一种方法可以访问图像及其URL(从注释文件中)，只需要下载(c)。然而，在一个漫长的训练过程中，如果你不依赖互联网会更好，因此我建议你也下载(a)和(b)。</em></p><h2 id="bfaa" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">PyCoco</h2><p id="5d9d" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">接下来，让我们安装我们的主要库，<strong class="lb iu"> pycoco </strong>。我特别说明了这个过程，因为如果你按照你的标准过程，你会在安装和导入过程中面临许多错误。</p><p id="2739" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<a class="ae ky" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Conda </a>中，如果你按照下面的步骤操作，你应该可以相当流畅地安装、导入和使用这个库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="edcd" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">其他人</h2><p id="b06f" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">让我们导入我们将在本教程中使用的所有库。其他库的安装非常简单，所以我不会在这里提及细节。在python环境中安装所有的库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bf01" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">3.使用PyCoco探索数据集</h1><p id="84c7" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">首先，让我们初始化PyCoco库。这个库接受COCO注释(。json)文件(我们在步骤2中下载的文件)作为输入。train或val实例注释都可以，但对于本教程，我使用“instances_val.json ”,因为它加载速度更快(原因:val数据集比train数据集小)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="3f97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出(即类别)打印如下:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="4efa" class="ni me it oa b gy oe of l og oh">[{'supercategory': 'person', 'id': 1, 'name': 'person'},<br/> {'supercategory': 'vehicle', 'id': 2, 'name': 'bicycle'},<br/> {'supercategory': 'vehicle', 'id': 3, 'name': 'car'},<br/> {'supercategory': 'vehicle', 'id': 4, 'name': 'motorcycle'},<br/> {'supercategory': 'vehicle', 'id': 5, 'name': 'airplane'},<br/> {'supercategory': 'vehicle', 'id': 6, 'name': 'bus'},<br/> {'supercategory': 'vehicle', 'id': 7, 'name': 'train'},<br/> {'supercategory': 'vehicle', 'id': 8, 'name': 'truck'},<br/> {'supercategory': 'vehicle', 'id': 9, 'name': 'boat'},<br/> {'supercategory': 'outdoor', 'id': 10, 'name': 'traffic light'},<br/> {'supercategory': 'outdoor', 'id': 11, 'name': 'fire hydrant'},<br/> {'supercategory': 'outdoor', 'id': 13, 'name': 'stop sign'},<br/> {'supercategory': 'outdoor', 'id': 14, 'name': 'parking meter'},<br/> {'supercategory': 'outdoor', 'id': 15, 'name': 'bench'},<br/> {'supercategory': 'animal', 'id': 16, 'name': 'bird'},<br/> {'supercategory': 'animal', 'id': 17, 'name': 'cat'},<br/> {'supercategory': 'animal', 'id': 18, 'name': 'dog'},<br/> {'supercategory': 'animal', 'id': 19, 'name': 'horse'},<br/> {'supercategory': 'animal', 'id': 20, 'name': 'sheep'},<br/> {'supercategory': 'animal', 'id': 21, 'name': 'cow'},<br/> {'supercategory': 'animal', 'id': 22, 'name': 'elephant'},<br/> {'supercategory': 'animal', 'id': 23, 'name': 'bear'},<br/> {'supercategory': 'animal', 'id': 24, 'name': 'zebra'},<br/> {'supercategory': 'animal', 'id': 25, 'name': 'giraffe'},<br/> {'supercategory': 'accessory', 'id': 27, 'name': 'backpack'},<br/> {'supercategory': 'accessory', 'id': 28, 'name': 'umbrella'},<br/> {'supercategory': 'accessory', 'id': 31, 'name': 'handbag'},<br/> {'supercategory': 'accessory', 'id': 32, 'name': 'tie'},<br/> {'supercategory': 'accessory', 'id': 33, 'name': 'suitcase'},<br/> {'supercategory': 'sports', 'id': 34, 'name': 'frisbee'},<br/> {'supercategory': 'sports', 'id': 35, 'name': 'skis'},<br/> {'supercategory': 'sports', 'id': 36, 'name': 'snowboard'},<br/> {'supercategory': 'sports', 'id': 37, 'name': 'sports ball'},<br/> {'supercategory': 'sports', 'id': 38, 'name': 'kite'},<br/> {'supercategory': 'sports', 'id': 39, 'name': 'baseball bat'},<br/> {'supercategory': 'sports', 'id': 40, 'name': 'baseball glove'},<br/> {'supercategory': 'sports', 'id': 41, 'name': 'skateboard'},<br/> {'supercategory': 'sports', 'id': 42, 'name': 'surfboard'},<br/> {'supercategory': 'sports', 'id': 43, 'name': 'tennis racket'},<br/> {'supercategory': 'kitchen', 'id': 44, 'name': 'bottle'},<br/> {'supercategory': 'kitchen', 'id': 46, 'name': 'wine glass'},<br/> {'supercategory': 'kitchen', 'id': 47, 'name': 'cup'},<br/> {'supercategory': 'kitchen', 'id': 48, 'name': 'fork'},<br/> {'supercategory': 'kitchen', 'id': 49, 'name': 'knife'},<br/> {'supercategory': 'kitchen', 'id': 50, 'name': 'spoon'},<br/> {'supercategory': 'kitchen', 'id': 51, 'name': 'bowl'},<br/> {'supercategory': 'food', 'id': 52, 'name': 'banana'},<br/> {'supercategory': 'food', 'id': 53, 'name': 'apple'},<br/> {'supercategory': 'food', 'id': 54, 'name': 'sandwich'},<br/> {'supercategory': 'food', 'id': 55, 'name': 'orange'},<br/> {'supercategory': 'food', 'id': 56, 'name': 'broccoli'},<br/> {'supercategory': 'food', 'id': 57, 'name': 'carrot'},<br/> {'supercategory': 'food', 'id': 58, 'name': 'hot dog'},<br/> {'supercategory': 'food', 'id': 59, 'name': 'pizza'},<br/> {'supercategory': 'food', 'id': 60, 'name': 'donut'},<br/> {'supercategory': 'food', 'id': 61, 'name': 'cake'},<br/> {'supercategory': 'furniture', 'id': 62, 'name': 'chair'},<br/> {'supercategory': 'furniture', 'id': 63, 'name': 'couch'},<br/> {'supercategory': 'furniture', 'id': 64, 'name': 'potted plant'},<br/> {'supercategory': 'furniture', 'id': 65, 'name': 'bed'},<br/> {'supercategory': 'furniture', 'id': 67, 'name': 'dining table'},<br/> {'supercategory': 'furniture', 'id': 70, 'name': 'toilet'},<br/> {'supercategory': 'electronic', 'id': 72, 'name': 'tv'},<br/> {'supercategory': 'electronic', 'id': 73, 'name': 'laptop'},<br/> {'supercategory': 'electronic', 'id': 74, 'name': 'mouse'},<br/> {'supercategory': 'electronic', 'id': 75, 'name': 'remote'},<br/> {'supercategory': 'electronic', 'id': 76, 'name': 'keyboard'},<br/> {'supercategory': 'electronic', 'id': 77, 'name': 'cell phone'},<br/> {'supercategory': 'appliance', 'id': 78, 'name': 'microwave'},<br/> {'supercategory': 'appliance', 'id': 79, 'name': 'oven'},<br/> {'supercategory': 'appliance', 'id': 80, 'name': 'toaster'},<br/> {'supercategory': 'appliance', 'id': 81, 'name': 'sink'},<br/> {'supercategory': 'appliance', 'id': 82, 'name': 'refrigerator'},<br/> {'supercategory': 'indoor', 'id': 84, 'name': 'book'},<br/> {'supercategory': 'indoor', 'id': 85, 'name': 'clock'},<br/> {'supercategory': 'indoor', 'id': 86, 'name': 'vase'},<br/> {'supercategory': 'indoor', 'id': 87, 'name': 'scissors'},<br/> {'supercategory': 'indoor', 'id': 88, 'name': 'teddy bear'},<br/> {'supercategory': 'indoor', 'id': 89, 'name': 'hair drier'},<br/> {'supercategory': 'indoor', 'id': 90, 'name': 'toothbrush'}]</span></pre><p id="2a8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">COCO数据集有81个对象类别(<em class="lv">注意‘id’:0是背景</em>)，正如我们上面打印出来的一样(这里还列出了<a class="ae ky" href="https://gist.github.com/AruniRC/7b3dadd004da04c80198557db5da4bda" rel="noopener ugc nofollow" target="_blank"/>)。然而，正如您所观察到的，这81个类的标签id范围从0到90(中间有一些空的id号)。这是一个方便的函数，它可以获取给定id号的类名。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="c0c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将给出一个输出:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="df75" class="ni me it oa b gy oe of l og oh">The class name is cell phone</span></pre><h2 id="2b9a" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">类别过滤</h2><p id="35c7" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">假设我想要只包含“笔记本电脑”、“电视”和“手机”类的图像，而不需要任何其他对象类。要获取数据集的这个子集，请执行以下步骤:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="49be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，<em class="lv"> imgIDs </em>变量包含了包含所有<em class="lv"> filterClasses </em>的所有图像。print语句的输出是:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="d361" class="ni me it oa b gy oe of l og oh">Number of images containing all the classes: 11</span></pre><p id="28f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着，在整个验证数据集中，有11个图像包含了我想要的全部3个类。显示的示例图像是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/6f2f1da56d966a94019f6475b9ad8549.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*QZd5XQXNiy9EnL1BXzSXXw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含过滤后的输出类的示例图像。</p></figure><p id="0080" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了显示注释，我们应该遵循下面的代码。请注意，我们使用pycoco功能<strong class="lb iu">"</strong><a class="ae ky" href="https://github.com/cocodataset/cocoapi/blob/master/PythonAPI/pycocotools/coco.py#L200" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">loadAnns</strong></a><strong class="lb iu">"</strong>加载coco格式的关于对象的注释，并使用<strong class="lb iu">"</strong><a class="ae ky" href="https://github.com/cocodataset/cocoapi/blob/master/PythonAPI/pycocotools/coco.py#L233" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">showAnns</strong></a><strong class="lb iu"/>在图像上绘制这些注释。这些函数极大地简化了注释遮罩的绘制。您可以查看链接的函数定义，了解它们在内部是如何工作的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/0251c9dc2bfc9bd56a4aceaabb6c0710.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*C0BP5dLinScCUjH3DrNhNA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">过滤后的类的注释简洁明了。</p></figure><h2 id="9621" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">所有可能的组合</h2><p id="dc2f" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">当我们用类过滤数据集时，pycoco工具返回的图像只包含所有需要的类，而不是一两个或任何其他组合。因此，这段代码将确保在结果数据集中获得给定的<em class="lv"> filterClass </em>列表的所有可能组合。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="578e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">print语句的输出是:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="04fe" class="ni me it oa b gy oe of l og oh">Number of images containing the filter classes: 503</span></pre><p id="af2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看上面，我们只收到了11张图片，但是现在有503张图片！我们也避免了图像的重复。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="bd1f" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">4.图像分割掩模生成</h1><p id="609c" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">对于任何语义分割训练任务，您都需要一个装满图像(train和val)和相应的输出真实遮罩的文件夹。本节将帮助创建相应的图像遮罩。</p><h2 id="0c41" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">屏蔽类型1:正常语义分段屏蔽</h2><p id="a3ed" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">每个像素根据其所属的类别都有一个标签。我没有使用官方的COCO ids，而是按照数组'<em class="lv"> filterClasses </em>'中类名的顺序分配像素值，即:<br/> 0:背景<br/> 1:笔记本电脑<br/> 2:电视<br/> 3:手机</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="a98f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出是一个2通道语义分割蒙版，其尺寸等于原始图像，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/ce783e2f64a5e5d91a271520cb4f6ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*VIBddw3Pj29rATNbc4rk9g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用于语义分割的普通双通道掩码。</p></figure><h2 id="e6b0" class="ni me it bd mf nj nk dn mj nl nm dp mn li nn no mp lm np nq mr lq nr ns mt nt bi translated">掩码类型2:二元语义分段掩码</h2><p id="9d1a" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">一般来说，对于N个输出类，你的输出遮罩将有<em class="lv"> N </em>个可能的像素值。然而，二进制掩码意味着输出掩码将只有2个像素值，即<strong class="lb iu"> 1 </strong>(对象:可以是N个类中的任何一个)和<strong class="lb iu"> 0 </strong>(背景)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="5840" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出是一个2通道二元语义分割蒙版，其尺寸等于原始图像，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d337744ff2057ebd7acbd3aa314ab324.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*DlLjP-00rEHjVMNhvE1wPQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">二元语义分割掩码。黄色代表像素值1，紫色代表像素值0。</p></figure><p id="e951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi om translated"><span class="l on oo op bm oq or os ot ou di"> N </span>例如，您可能希望标签id号与原始COCO数据集中的相同(0–90)。或者你可能想要一个<em class="lv">实例分割</em>用例的输出格式。另一个例子是，您可能希望您的遮罩是一个热编码，即通道数=输出对象类的数量，并且每个通道只有0(背景)和1(该对象)。</p><p id="ab66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，相应地修改上面的代码，你就可以得到你想要的遮罩。如果将来我有时间，我也会尝试为这些额外的类型添加代码。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="2da7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">接下来，我们接着看</em> </strong> <a class="ae ky" rel="noopener" target="_blank" href="/master-the-coco-dataset-for-semantic-image-segmentation-part-2-of-2-c0d1f593096a"> <strong class="lb iu"> <em class="lv">第二部分</em> </strong> </a> <strong class="lb iu"> <em class="lv">。</em> </strong></p><div class="ov ow gp gr ox oy"><a rel="noopener follow" target="_blank" href="/master-the-coco-dataset-for-semantic-image-segmentation-part-2-of-2-c0d1f593096a"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">掌握用于语义图像分割的COCO数据集</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">创建一个数据生成器，并在COCO图像数据集上训练您的模型，以便使用PyCoco进行语义图像分割…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ks oy"/></div></div></a></div><p id="0757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，本教程的代码在我的<a class="ae ky" href="https://github.com/virafpatrawala/COCO-Semantic-Segmentation" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中。</p><p id="f893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的朋友们，今天到此为止！如果您已经走了这么远，我希望您已经对COCO数据集有了一些信心。<strong class="lb iu"> <em class="lv">但不要止步于此——走出去，尝试一下这个地狱，用你的新想法震撼图像分割的世界！</em> </strong></p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><p id="049a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您喜欢这篇文章，那么下一篇文章将向您展示如何用最少的努力轻松地倍增您的图像数据集。一定要读一读！</p><div class="ov ow gp gr ox oy"><a rel="noopener follow" target="_blank" href="/create-a-synthetic-image-dataset-the-what-the-why-and-the-how-f820e6b6f718"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">创建一个合成图像数据集——“是什么”、“为什么”和“如何”</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">缺少图像来训练你的模型？以下是如何使用合成图像将数据集的大小增加数倍…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pn l pj pk pl ph pm ks oy"/></div></div></a></div><p id="163a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者想在股票中利用ML一夜暴富？这篇文章(不)适合你！</p><div class="ov ow gp gr ox oy"><a rel="noopener follow" target="_blank" href="/how-not-to-predict-stock-prices-with-lstms-a51f564ccbca"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">如何(不)用LSTMs预测股票价格</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">股票和机器学习——天作之合。但是事情真的像看起来那么简单吗？</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="po l pj pk pl ph pm ks oy"/></div></div></a></div><p id="e6dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ML模型真的能读懂股价图吗？</p><div class="ov ow gp gr ox oy"><a rel="noopener follow" target="_blank" href="/can-an-ml-model-read-stock-charts-and-predict-prices-fb73c551c7a4"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">机器学习模型可以阅读股票图表并预测价格吗？</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">股票和机器学习——天作之合。如果你的ML模型可以从字面上阅读价格图表…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">towardsdatascience.com</p></div></div><div class="ph l"><div class="pp l pj pk pl ph pm ks oy"/></div></div></a></div></div></div>    
</body>
</html>