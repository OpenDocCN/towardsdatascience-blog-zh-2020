<html>
<head>
<title>Training Machine Learning Models on Amazon SageMaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在亚马逊SageMaker上训练机器学习模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/training-machine-learning-models-on-amazon-sagemaker-d95bd089db0d?source=collection_archive---------31-----------------------#2020-05-11">https://towardsdatascience.com/training-machine-learning-models-on-amazon-sagemaker-d95bd089db0d?source=collection_archive---------31-----------------------#2020-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="687a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">说到SageMaker</h2><div class=""/><div class=""><h2 id="70f9" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">短暂的集群、实验、可视化等等</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/4d1b693c6daee4b658880164694c4bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wz3panz3DQmClGbVVjCQUw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">用SageMaker实验可视化深度学习模型</p></figure><p id="42ee" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在是午夜。你已经花了几个小时来微调你的脚本，并且你正在赶在明天的截止日期之前把它放到服务器上。你正在你的大规模for循环中构建朴素贝叶斯、逻辑回归、XGBoost、KNN和任何模型。您终于解决了本地机器上的问题，并准备扩展您宝贵的脚本，但是当它开始运行时，您会看到…到底发生了什么？随机打印报表？你怎么知道它起作用了？如果它坏了你会怎么做？你怎么知道你的模特在做你想让她们做的事？</p><p id="3b43" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现实是，你不需要单干。有成千上万的其他数据科学家和机器学习工程师与你走在同一条路上，幸运的是，在你追求目标的过程中，你可以利用桌面上的相当多的技术。</p><p id="2834" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这里，我将带你在Amazon SageMaker上训练机器学习模型，这是一个完全托管的解决方案，用于构建、训练和部署机器学习模型，由Amazon Web Services精心开发。我们将介绍如何<strong class="lg ja">在SageMaker上引入您自己的模型，用调试器分析培训作业，用实验管理项目，以及在多个EC2实例上扩展作业。</strong></p><p id="b4cd" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们跳进来吧！谁知道呢，在本教程结束的时候，你甚至可以用你自己的巧妙的可视化来展示它。</p><h1 id="3656" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">建立亚马逊SageMaker工作室</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ms"><img src="../Images/0eada2d821a33b359b250eebdd59827e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVdNR0cEYXEvFXa6it85ug.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">Studio将开发与计算分离</p></figure><p id="8c6b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，让我们来设置您的环境。SageMaker Studio是一个完全集成的机器学习IDE。它将开发与计算分离开来，让您在维护IDE的同时，轻松地单独修改和配置EC2实例。你可以用<strong class="lg ja"> IAM或者SSO凭证</strong>设置工作室，更多详情请点击<a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/gs-studio.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><h1 id="17f5" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">克隆存储库</h1><p id="206c" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">接下来，为<a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples" rel="noopener ugc nofollow" target="_blank"> SageMaker示例</a>克隆Github存储库。打开Studio，创建一个新的终端，然后运行这个命令。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="e37d" class="ne mb iq na b gy nf ng l nh ni">git clone <a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples.git" rel="noopener ugc nofollow" target="_blank">https://github.com/awslabs/amazon-sagemaker-examples.git</a></span></pre><p id="2dc7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，导航到这个目录:<strong class="lg ja">Amazon-sage maker-examples/sage maker-debugger/mnist _ tensor _ plot</strong></p><p id="f549" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">然后打开笔记本！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nj"><img src="../Images/a17ae928909c22562b61ca2d2169d38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7cnzC_RI1M1TWMI9SKwp_A.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">使用SageMaker调试器可视化深度学习模型</p></figure><p id="335c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">让我们一起来解决这个问题。马上，确保您添加了一些依赖项。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="5655" class="ne mb iq na b gy nf ng l nh ni">! python -m pip install plotly<br/>! python -m pip install smdebug<br/>!pip install sagemaker<br/>!pip install awscli<br/>!pip install nbformat==4.2.0</span></pre><p id="3891" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦您安装好这些，我们就可以开始您的工作了！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/4494acedac5ab43be624e3b010a5fd5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ht6fCKb6h6GiETSeuHxdg.png"/></div></div></figure><p id="4869" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这些第一行非常普通，你会在<a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples" rel="noopener ugc nofollow" target="_blank"> SageMaker-Examples </a>中看到它们中的大部分。我们正在导入<a class="ae mt" href="https://sagemaker.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> SageMaker Python SDK </a>，然后指向新的<a class="ae mt" href="https://sagemaker.readthedocs.io/en/stable/debugger.html" rel="noopener ugc nofollow" target="_blank"> SageMaker调试器</a>库。这既有一个<strong class="lg ja">调试器钩子配置</strong>，也有一个<strong class="lg ja">集合配置</strong>。这两样我们都需要。</p><p id="2c79" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，让我们设置我们的估计！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nl"><img src="../Images/ab186091f7d71f6b6573f2c5f09de3d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilen1AowbpGOlpAQNneqPw.png"/></div></div></figure><p id="9c2f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">评估员是我们在SageMaker上配置培训工作的方式。您已经得到了具有运行作业权限的<strong class="lg ja">执行角色</strong>，然后是<strong class="lg ja"> EC2实例配置。看到这有多小了吗？只需要2行代码来指定你需要一个<a class="ae mt" href="https://aws.amazon.com/sagemaker/pricing/instance-types/" rel="noopener ugc nofollow" target="_blank"><strong class="lg ja">ml . M4 . xlarge</strong></a><strong class="lg ja">。</strong></strong></p><p id="0f92" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，我们要指向我们的<a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples/blob/master/sagemaker-debugger/mnist_tensor_plot/scripts/mxnet_gluon_save_all_demo.py" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">入口点脚本</strong> </a> <strong class="lg ja">。这是您的示例附带的文件；它使用<a class="ae mt" href="https://sagemaker.readthedocs.io/en/stable/sagemaker.mxnet.html#mxnet-estimator" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> MXNet估算器</strong> </a> <strong class="lg ja"> </strong>来完成Docker文件的抽象。</strong></p><p id="bd34" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">记住，只要你能在Docker上运行你的代码，你就能在SageMaker上运行。</strong></p><p id="1ed5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这里，我们使用所谓的<em class="nm">脚本模式，</em>或者使用<em class="nm">短暂集群</em>在SageMaker上扩展你自己的模型脚本的能力。这些是EC2实例，它们在您的作业开始时加速，在您的作业结束时减速。这使得它们更易于扩展、保护和支付。</p><p id="602e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">定义了模型之后，连同框架的版本，我们准备添加<a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/debugger-how-it-works.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">调试器钩子配置</strong> </a> <strong class="lg ja">。这告诉SageMaker that)我们想给我们的工作添加调试器，以及(B)我们想让它做什么。在这种情况下，我们抓住所有的张量。</strong></p><h1 id="a89c" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">SageMaker调试器去神秘化</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nn"><img src="../Images/219e647555c5572e44a681da04775759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVHiXAW9E-3nsY0D5sbpmA.png"/></div></div></figure><p id="56b2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">不要被名字误导，SageMaker调试器是非常先进的解决方案！网络是，你要在你的深度学习模型中收集张量。然后，你要分析那些。SageMaker调试器<a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/debugger-built-in-rules.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">自带18条规则</strong></a><strong class="lg ja"/>，你可以通过<strong class="lg ja"> </strong> <a class="ae mt" href="https://github.com/awslabs/sagemaker-debugger/blob/master/docs/sagemaker.md#zero-script-change" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">零代码修改</strong> </a> <strong class="lg ja">将这些应用到你的深度学习模型中。</strong>也就是说，只要你在使用SageMaker深度学习容器，你就不需要修改你的脚本就可以开始使用SageMaker调试器。</p><h1 id="8362" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">启动您的培训工作</h1><p id="8e0f" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">现在，适合你的模型，我们出发去比赛！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/110d0caa49b682af0d8e72715246962a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXzp2xGdR3znDWT2Ii4kDw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">在亚马逊SageMaker上创建一个新的培训职位</p></figure><p id="be47" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你是一个精明的AWS用户，你会知道回到AWS控制台调查你的培训工作。导航至SageMaker登录页面左侧的<strong class="lg ja">培训</strong>，然后选择<strong class="lg ja">培训工作。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/5a3cda7dd4cb182eb84ca5e55d9a74b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EqMwUBgqpePGDvHzNC844w.png"/></div></div></figure><p id="6c0a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这将打开你工作的视野！您将看到从开始的状态显示<em class="nm">，以及关于您的数据在哪里、您正在使用的图像、您的模型工件要去哪里以及日期和时间的所有细节。</em></p><p id="c7a5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">请记住，默认情况下，您在SageMaker中的所有作业都会被存储和记录。</p><p id="457b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这意味着<em class="nm">不仅可以在作业运行时监控作业，还可以返回到您停止的地方，甚至是几个月前，重新开始一个模型，这应该非常简单。</em></p><p id="cbd1" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在我们去找那些张量。</p><h1 id="699f" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated"><strong class="ak">将张量从你的模型复制到你的本地工作室实例中</strong></h1><p id="9b0b" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">接下来，运行一个快速命令来获取存储张量数据的S3路径。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nq"><img src="../Images/d6891fd186d9808419f40ec18c433ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvN9GF3qTt7eGZSU7u4qYw.png"/></div></div></figure><p id="d39b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，运行命令将数据从S3复制到本地Studio实例。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/1d776472ea19cfbc34bfbd59b800eceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*91w6jZdH0LdW7TvD0S1GUA.png"/></div></figure><p id="6e6b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我不得不承认，这两行很可能是我在AWS cloud上最喜欢的命令。它们如此简单，却又如此有效。<code class="fe ns nt nu na b">!aws s3 cp</code>和<code class="fe ns nt nu na b">!aws s3 sync</code>我们所做的就是将我们的数据从S3转移到Studio上的代码中。它非常有效。</p><h1 id="e923" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">可视化你的深度学习模型</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/eb111b1f50e90d191fba6d327699589e.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*pyzVfKnLYUpyQTihapG6rw.png"/></div></figure><p id="8a8d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，有趣的部分来了。让我们用一个叫做<code class="fe ns nt nu na b">tensor_plot</code>的软件包来建立一个你的网络的交互式可视化！</p><p id="86ad" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们正指向一个名为<code class="fe ns nt nu na b">debug-output</code>的文件夹，你要确定那是你从S3复制张量的地方。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/6d9aa2b201a65a31b18fb1c73bef3511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjkBJNIL0gLN6ABI1TU7Cg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">使用SageMaker调试器为任何深度学习模型创建交互式视觉</p></figure><p id="83f7" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">相当牛逼！记住，<strong class="lg ja"> <em class="nm">你可以为你在SageMaker上训练的任何深度学习模型设置这种可视化。</em> </strong>你只需要添加那个调试钩子配置。也可以在XGBoost模型上运行这个！</p><h1 id="fd18" class="ma mb iq bd mc md me mf mg mh mi mj mk kf ml kg mm ki mn kj mo kl mp km mq mr bi translated">使用SageMaker实验管理项目</h1><p id="ac51" class="pw-post-body-paragraph le lf iq lg b lh mu ka lj lk mv kd lm ln mw lp lq lr mx lt lu lv my lx ly lz ij bi translated">接下来，我们将学习如何使用SageMaker实验来管理我们的项目。</p><p id="b3d3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我将带您浏览一下这个笔记本中的一些代码片段，可以在这里找到。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="7675" class="ne mb iq na b gy nf ng l nh ni"><a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples" rel="noopener ugc nofollow" target="_blank">amazon-sagemaker-examples</a>/<a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples/tree/master/sagemaker-experiments" rel="noopener ugc nofollow" target="_blank">sagemaker-experiments</a>/mnist-handwritten-digits-classification-experiment.ipynb</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/e4bcf454f6057d042d2295df323c63c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRsaNA1tcckPdoCTDsXSMw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">用SageMaker实验管理机器学习项目</p></figure><p id="05e5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，了解这在SageMaker中是如何组织的很有帮助。你有<strong class="lg ja">实验、试验和试验组件。</strong><em class="nm">实验</em>是你正在进行的总体学习项目，就像你的计算机视觉解决方案，或者你正在构建的预测模型。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/f338d032c4b01c2eee13b6ffd8f41456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Evykz7iF-dQWUwrf4hoq6w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">SageMaker实验故障</p></figure><p id="850d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这个实验将被分解成多个试验，每个试验将大致对应一个培训工作。因此，如果你正在为一个分类项目测试XGBoost、KNN、逻辑回归和SVM，你会把每个尝试列为一个试验。当然，您可以为这些试验指定您感兴趣的对象指标。</p><p id="3eba" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，<strong class="lg ja">每个试验将有一个试验组件。</strong>这些将是那个试验的步骤，比如你应用的预处理技术，<a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/processing-job.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> SageMaker处理</strong> </a> <strong class="lg ja"> </strong>你运行的作业，或者训练作业。</p><p id="3f1f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这就是你如何追溯你的结果。在你找到一个合理的模型后，只要它通过实验被追踪，你可以毫不夸张地<a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/experiments.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">跟随那个模型</strong> </a>的血统在下游再造它。</p><p id="9f41" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这里有一些代码片段，以及漂亮的实验图像！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/dc7f9b56db949963b95b6d05f131c622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*Tk-FiRmoQADCSsdFviviMg.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">为SageMaker实验安装依赖项</p></figure><p id="285c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">首先，确保安装了依赖项。</p><p id="2d7e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，设置您的导入，以及您的SageMaker凭证。</p><p id="9e08" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在，让我们通过SDK创建一个实验！一些需要注意的事情。(1)这实际上只有4行代码。(2)你有一次命名的机会。如果你像我一样，尝试了几次，得到了你真正想要的版本，你会想要开发一个命名版本策略。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="683d" class="ne mb iq na b gy nf ng l nh ni">version_num = ‘v1’</span><span id="6c51" class="ne mb iq na b gy oa ng l nh ni">my_experiment = Experiment.create(<br/> experiment_name=”my-model-{}”.format(version_num), <br/> description=”My first experiment”, <br/> sagemaker_boto_client=sm)</span></pre><p id="40c0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，<em class="nm">让我们给你的实验添加预处理步骤。这里，我们将记录我们设置的参数。在这种情况下，这就是我们将用于标准化的平均值和标准偏差。</em></p><p id="8960" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">请注意，您可以在这里记录您正在设置的参数。<strong class="lg ja">运行</strong> <a class="ae mt" href="https://docs.aws.amazon.com/sagemaker/latest/dg/autopilot-automate-model-development.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja"> SageMaker自动驾驶</strong> </a> <strong class="lg ja">作业时，可以看到如何记录SageMaker处理作业，将您的特征工程步骤与模型训练关联起来。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nj"><img src="../Images/2a52065dc7e089cc90705d31f9940f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PRVHZ2lUP0OTqDfql-Kgnw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">用SageMaker实验记录参数</p></figure><p id="9fe9" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">按照笔记本创建评估者。在这个例子中，你实际上是要遍历一个潜在隐藏层的列表来构建你的网络。</p><p id="f3da" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦你创建了评估器，下面是我们如何添加一个实验配置。</p><pre class="kp kq kr ks gt mz na nb nc aw nd bi"><span id="0b45" class="ne mb iq na b gy nf ng l nh ni">estimator.fit(<br/> inputs={‘training’: inputs}, <br/> job_name=cnn_training_job_name,<br/> experiment_config={<br/> “TrialName”: cnn_trial.trial_name,<br/> “TrialComponentDisplayName”: “Training”,<br/> }</span></pre><p id="b5c5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在调用<code class="fe ns nt nu na b">estimator.fit()</code>时，您添加了将此培训工作与您的实验相关联所需的其余组件，即将其作为试验记录。</p><p id="ba6d" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">现在，单击左侧的实验选项卡，然后<em class="nm">右键单击您的实验，以在试验组件详细视图中查看。</em> </strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/4f07ff6937c13ed9b0df02a10070dfc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1LnzZng3wEIgRba3Hwy2Q.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">SageMaker Experiments为试验组件提供了视觉效果</p></figure><p id="2070" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">相当花哨！请记住，<strong class="lg ja">每次您在Studio中创建一个实验，包括使用SDK，它都会显示在Experiments选项卡中。</strong>要查看试用组件列表，只需点击右键。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/0ce9ce3d1ff799cdd68e62626b3c59db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*GnJhd4dFQr3Y9R6skowDKQ.png"/></div></figure><p id="a13c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">接下来，突出显示其中一个试验，右键单击<em class="nm">在试验详情中打开。</em></p><p id="e3f0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这将为您提供针对具体工作的培训。</p><p id="379c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦您进入<em class="nm">试验细节视图</em>，您就可以通过直接引用<strong class="lg ja">培训工作和预处理步骤来检查您项目的血统。</strong></p><p id="8b66" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">除此之外，您可以创建图表来分析您的模型在特定试验中的性能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/8f87016927374f1d08101625a0e3e6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21QshjODSp7ObtFy9jRY1w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">使用SageMaker实验可视化结果</p></figure><p id="ff8b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">就这样结束了！我希望你喜欢这个教程。请记住，您可以在我们的Github页面<strong class="lg ja"/>上找到更多示例<a class="ae mt" href="https://github.com/awslabs/amazon-sagemaker-examples" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">，或者在这里找到我们的其他<a class="ae mt" href="https://aws.amazon.com/sagemaker/developer-resources/" rel="noopener ugc nofollow" target="_blank"> <strong class="lg ja">开发者资源。</strong> </a></strong></a></p></div></div>    
</body>
</html>