<html>
<head>
<title>Hacking The Data Science Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">入侵数据科学管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hacking-the-data-science-pipeline-18303e2c4307?source=collection_archive---------66-----------------------#2020-05-09">https://towardsdatascience.com/hacking-the-data-science-pipeline-18303e2c4307?source=collection_archive---------66-----------------------#2020-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="c964" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">特征工程系列</h2><div class=""/><div class=""><h2 id="397e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">功能改进—以#02.01 为例</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/361001051c7eb36f7729adcec77c8f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KQwTPgC3AYJ95Kje.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">昆腾·德格拉夫在<a class="ae le" href="https://unsplash.com/s/photos/pipelines?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="3121" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">这篇博文的目的</h1><p id="4850" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">这是特征工程系列的第 02.01 课。在<a class="ae le" rel="noopener" target="_blank" href="/hacking-the-data-science-pipeline-b1121996f4b5"> Take#01 </a>中，我们专注于获得与 EDA 相结合的基线模型以及对数据的理解。我们能够为 ML 基线模型获得 0.59035 的 AUC -ROC。</p><blockquote class="mt mu mv"><p id="2370" class="lx ly mw lz b ma mx ka mc md my kd mf mz na mi mj nb nc mm mn nd ne mq mr ms ij bi translated"><strong class="lz ja">因此，要击败的 AUC -ROC 是 0.59035！</strong></p></blockquote><p id="d1a3" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">让我们继续“特性改进”的项目演练，这是特性工程管道的第二个也是最重要的组成部分之一。</p><blockquote class="mt mu mv"><p id="d4ff" class="lx ly mw lz b ma mx ka mc md my kd mf mz na mi mj nb nc mm mn nd ne mq mr ms ij bi translated">面临的挑战是创建一个模型，使用重症监护最初 24 小时的数据<strong class="lz ja">预测患者的存活率(标签:“hospital _ death”)</strong>。麻省理工学院的 GOSSIS community initiative 拥有哈佛隐私实验室的隐私认证，提供了超过 130，000 名医院重症监护病房(ICU)患者的数据集，时间跨度为一年。【<a class="ae le" href="https://www.kaggle.com/c/widsdatathon2020/overview" rel="noopener ugc nofollow" target="_blank">来源</a>】。关于挑战的详细描述可以在<a class="ae le" href="https://www.kaggle.com/c/widsdatathon2020" rel="noopener ugc nofollow" target="_blank">这里</a>找到</p></blockquote><h2 id="2b44" class="nf lg iq bd lh ng nh dn ll ni nj dp lp mg nk nl lr mk nm nn lt mo no np lv iw bi translated">说够了，让我们开始吧！</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b2105351ecb00485aa02e6fdf9e3642f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*l7lPnpSmYOyw86Pb.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@mael_bld?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Mael BALLAND </a>在<a class="ae le" href="https://unsplash.com/s/photos/diver?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="66de" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">定义路线图…..🚵</h1><p id="a24e" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated"><strong class="lz ja">深入调查潜在的数据问题，如下所示:</strong></p><p id="6c16" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><strong class="lz ja">里程碑# 1:确定明确的缺失值</strong></p><p id="0415" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><strong class="lz ja">里程碑# 2:注意隐式/ <em class="mw">隐藏的</em>缺失值&amp;不正确的数据值</strong></p><p id="013b" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">最后是结束语。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="6ec1" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><strong class="lz ja">里程碑# 1:识别明确缺失的值</strong></p><p id="bde2" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">所以在我们之前的迭代中，我们已经看到了缺失值的分布。这是一个简单的简写，因为我们能够识别编码为<em class="mw">nan 的缺失值。</em>就这么简单！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/82af2f6e574abce056123fe87c6c5bb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kHMgaeB58i9QqoZx.gif"/></div></div></figure><p id="3826" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><strong class="lz ja">里程碑# 2:注意隐式/ <em class="mw">伪装的</em>缺失值&amp;不正确的数据值</strong></p><p id="8ee2" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">事实上，您也应该始终在数据集中寻找“伪装的”缺失值，以确保缺失值被正确编码为缺失值，更准确地说是 NaN。缺失值的几种伪装形式描述如下:</p><ol class=""><li id="c495" class="ny nz iq lz b ma mx md my mg oa mk ob mo oc ms od oe of og bi translated"><strong class="lz ja"> <em class="mw">范畴变量:名词性/序数串</em> </strong> —空串/“未知数”/？”表示缺少的值</li><li id="babf" class="ny nz iq lz b ma oh md oi mg oj mk ok mo ol ms od oe of og bi translated"><strong class="lz ja"/></li><li id="1828" class="ny nz iq lz b ma oh md oi mg oj mk ok mo ol ms od oe of og bi translated"><strong class="lz ja"/></li></ol><p id="f557" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">很公平。</p><blockquote class="mt mu mv"><p id="57f3" class="lx ly mw lz b ma mx ka mc md my kd mf mz na mi mj nb nc mm mn nd ne mq mr ms ij bi translated">问题是，要识别隐藏的缺失值和潜在的损坏/不正确的数据，您几乎总是依赖于与您试图解决的问题的领域专家合作。在我们的例子中，领域专家是医疗从业者，但是由于它是一个 Kaggle 数据集，与领域专家合作的可能性是不存在的。但还是要注意一点！</p><p id="75d5" class="lx ly mw lz b ma mx ka mc md my kd mf mz na mi mj nb nc mm mn nd ne mq mr ms ij bi translated">幸运的是，我们得到了数据文档，它本身并不详细，也没有指出数据问题，但是快速 EDA 和浏览文档向我揭示了许多关于隐藏的缺失值和可能不正确的数据的见解，这正是我接下来几分钟要关注的内容。</p></blockquote><h2 id="1b16" class="nf lg iq bd lh ng nh dn ll ni nj dp lp mg nk nl lr mk nm nn lt mo no np lv iw bi translated">文档看起来是这样的:</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/7e4e1d8a522de33634fa160720a7136e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQfOfWRavTagaL8u6Looew.png"/></div></div></figure><p id="a97b" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">很明显，我们对每个属性 都有一个<strong class="lz ja"> <em class="mw">【类别】。下面的图表总结了上述类别分布的信息:</em></strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/2284e94df1432c80aedad696206162d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j8ORqB97xk6BGKlz5zuCDg.png"/></div></div></figure><p id="31b7" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">上面清楚地显示了什么特定的数据类型属于什么特定的类别。考虑到生命体征、实验室和实验室血气主要由数字变量组成，让我们首先关注它们。</p><p id="a0bb" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">探究这些变量是否由零值组成揭示了:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/98f89ed128587d6a04175eca12df3e2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4cKozmnJNDD5q7y174jocw.png"/></div></div></figure><p id="0c6d" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">此外，通过对属于这三个类别的变量的描述，可以发现它们与人体内特定化学物质的存在有关，如果一个人活着，那么“0”表示有效值本身是没有意义的。这可以通过浏览这些变量的描述，由领域知识(如文档中提供的)进一步验证。例如，对于属于<strong class="lz ja">生命体征类别的变量:</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/06b06af4705f0b31904cbf4238c0bcf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zp7Ah-cmr_kS4y_Um1KkpQ.png"/></div></div></figure><p id="f919" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">提供的数据符合患者之前的 24 小时，记录的值与患者死亡时间不完全一致。这引出了两个主要观点:</p><ol class=""><li id="b929" class="ny nz iq lz b ma mx md my mg oa mk ob mo oc ms od oe of og bi translated">如果值为“0 ”,则患者不可能活着</li><li id="d120" class="ny nz iq lz b ma oh md oi mg oj mk ok mo ol ms od oe of og bi translated">反之亦然可能不是真的。例如，有可能患者已经死亡，但是<strong class="lz ja"><em class="mw"/></strong>的“一些更低的”值可能存在。但是，这是一个假设，我们需要更多的 ed a 来验证这一点，如下所示:</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/dc8b56225b8ba11c666b008d80749870.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*EH6ekigJLUOLLf9tYjAPjg.png"/></div></figure><p id="622f" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">上述趋势分叉为医院死亡==1 和医院死亡==0，表明在“医院死亡”==1 的情况下有总体下降趋势。所以这确实支持了我们的第二个假设，即如果<br/>医院 _ 死亡==1，一般会发现下降趋势。</p><p id="5fea" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">接下来，对于我们的第一个假设，我们需要进一步放大精确“0”的值，我们可能会寻找“0”与检测为异常值的值的交集。这可以进一步验证我们的概念，即这些“0”实际上是丢失的值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi or"><img src="../Images/625e208d66714066577c32445c52810e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*DGfD3c_dAd9PbxMe63x8ng.gif"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">异常值分布</p></figure><p id="c48e" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">让我们来看看这些变量的异常值的一般分布</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi os"><img src="../Images/60c90851b0bc8f8a97f11ad860b79fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ooZKH6A-8xMjCC4n-zv43A.png"/></div></div></figure><p id="15fc" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">“0”在生命体征变量中的分布显示，<strong class="lz ja"><em class="mw">D1 _ heart rate _ min</em></strong>&amp;<strong class="lz ja"><em class="mw">D1 _ resprate _ min</em></strong>具有大部分 0 值，而<strong class="lz ja"><em class="mw">D1 _ spo 2 _ min</em></strong>&amp;<strong class="lz ja"><em class="mw">h1 _ resprate _ min</em></strong>具有相对较少的“0”。让我们绘制异常值分布。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ot"><img src="../Images/373e9d6491229db13b99df626a8c276d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dCVJyFBjrrOHgF36LLslg.png"/></div></div></figure><p id="831a" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">哇！因此，该图确实显示，对于具有相对较高数量的“0”的变量，作为异常值的“0”的数量也较高！我们可以通过明确检查所有这些“0”是否也是每个变量的总异常值集的一部分来进一步验证我们的想法，即“0”是缺失值。</p><p id="4e7d" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><strong class="lz ja">将离群值的 0 分布与原始数据集中的 0 分布进行匹配:</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d6b47b6e3e836c56cc54ec0dc8caba74.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*nhhzFUrflDs8rSMAVw_4Yw.png"/></div></figure><p id="9dad" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated"><em class="mw">“0”和“1”列对应的是 hospital_death==0 和 hospital_death==1。</em>原始数据集中的所有“0”都在异常值中找到并完全匹配！</p><p id="b86e" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">所以到目前为止，我们已经收集了足够的证据来支持我们的论点，即对于生命体征类别的上述变量，0 的<strong class="lz ja"> <em class="mw">最有可能是缺失值</em> </strong>。</p><blockquote class="mt mu mv"><p id="4af4" class="lx ly mw lz b ma mx ka mc md my kd mf mz na mi mj nb nc mm mn nd ne mq mr ms ij bi translated">我们不是 100%确定托梁的概念，但同时，我们也不是绝对的盲点！</p></blockquote><p id="4f8a" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">我想在这里提一下，这又是一个强调与领域专家合作的问题，如果这个问题是在现场处理的话，我们将有机会进一步验证我们的发现！</p><p id="d0cd" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">现在，通过将这些“0”编码为适当缺失的值<strong class="lz ja"><em class="mw">【nans】</em></strong>，反映数据分布的变化总是一个好主意。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ov"><img src="../Images/630752d1c53d408e52c5777d4199ff3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02ikWfOm1TKmCpCbNiKTXQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">“平均值”的变化百分比</p></figure><p id="3da3" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">不出所料，由于 D1 _ heart rate _ min&amp;<strong class="lz ja"><em class="mw">D1 _ resp rate _ min</em></strong>的“0”数最多，因此它们被更改的次数最多。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h1 id="42ae" class="lf lg iq bd lh li ow lk ll lm ox lo lp kf oy kg lr ki oz kj lt kl pa km lv lw bi translated"><strong class="ak">最后结束语……</strong></h1><ol class=""><li id="0a03" class="ny nz iq lz b ma mb md me mg pb mk pc mo pd ms od oe of og bi translated">作为一名精明的数据科学家，您不断地与领域专家互动和协作！你将会向他们透露一些发现，另一方面，领域专家将会为你设定一个方向。它总是一个联合的努力。</li><li id="95e0" class="ny nz iq lz b ma oh md oi mg oj mk ok mo ol ms od oe of og bi translated">然而，<strong class="lz ja"> <em class="mw">您必须始终亲自检查数据完整性</em> </strong>，千万不要拘泥于您刚刚听到的<strong class="lz ja"> <em class="mw">(就当它是潜在的进展)</em> </strong>因为在大多数情况下，公司本身也没有意识到潜在的数据问题，就像我们上面遇到的那些问题一样。</li></ol></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h2 id="776c" class="nf lg iq bd lh ng nh dn ll ni nj dp lp mg nk nl lr mk nm nn lt mo no np lv iw bi translated">即将发布的帖子将包括:</h2><p id="9f5c" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在这篇博文中，我们仅限于对生命体征变量的详细分析。在下一篇博文中，我们将转向其他类型的变量，并继续识别和修复其他数据问题。这很费时间，但最终，结果将是值得的！</p><p id="60df" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">敬请期待！📻</p><p id="2f34" class="pw-post-body-paragraph lx ly iq lz b ma mx ka mc md my kd mf mg na mi mj mk nc mm mn mo ne mq mr ms ij bi translated">如果您有任何想法、意见或问题，欢迎在下面评论或联系📞跟我上<a class="ae le" href="https://www.linkedin.com/in/aisha-javed/" rel="noopener ugc nofollow" target="_blank"> <strong class="lz ja"> LinkedIn </strong> </a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/97f97cf6be9b2bcb49f26c734bfba554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HTr4wVl61PDp38FV.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@cannonmatt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马特·卡农</a>在<a class="ae le" href="https://unsplash.com/s/photos/victory?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div></div>    
</body>
</html>