<html>
<head>
<title>Introduction to Matrices in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中矩阵的介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-matrices-in-r-dc009e3cdbb3?source=collection_archive---------49-----------------------#2020-05-22">https://towardsdatascience.com/introduction-to-matrices-in-r-dc009e3cdbb3?source=collection_archive---------49-----------------------#2020-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e2bd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习如何创建矩阵，了解如何用它们做基本的计算。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3cf9a6ac7512998e81b73b51d758e41e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*udcxkbmU0ATeAMXvDBnZOw.png"/></div></div></figure><h1 id="4974" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">什么是矩阵？</h1><p id="00a1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir">矩阵</strong>是排列成固定数量的行和列的相同数据类型(数字、字符或逻辑)元素的集合。<strong class="ll ir">二维矩阵</strong>仅适用于行和列。</p><p id="a985" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">R 中的<code class="fe mk ml mm mn b"><a class="ae mo" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/matrix" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">matrix()</strong></a></code>函数创建一个矩阵。考虑下面的例子:</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="8fe8" class="mt ks iq mn b gy mu mv l mw mx">matrix(1:9, byrow=TRUE, nrow = 3)</span></pre><p id="1a37" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">这将构造一个包含 3 行的矩阵，包含 1 到 9 的数字，按行填充。</p><p id="a965" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在<code class="fe mk ml mm mn b">matrix()</code>功能中:</p><ul class=""><li id="ece2" class="my mz iq ll b lm mf lp mg ls na lw nb ma nc me nd ne nf ng bi translated">第一个参数是 R 将排列到矩阵的行和列中的元素的集合。这里，我们使用了<code class="fe mk ml mm mn b">1:9</code>(这个和<code class="fe mk ml mm mn b">c(1,2,3,4,5,6,7,8,9)</code>一样(见 R 中的<a class="ae mo" href="https://medium.com/@linda.ngo/introduction-to-vectors-in-r-6ccae4748f2e" rel="noopener">向量)。这是一个可选参数，可以在以后填充。如果我们把它留空，矩阵就不会被填充。</a></li><li id="f8b4" class="my mz iq ll b lm nh lp ni ls nj lw nk ma nl me nd ne nf ng bi translated">参数<code class="fe mk ml mm mn b">byrow</code>表示矩阵是按行填充的。如果我们希望矩阵按列填充，我们将这个参数设置为<code class="fe mk ml mm mn b">FALSE</code>(即<code class="fe mk ml mm mn b">byrow=FALSE</code>)。默认情况下，矩阵由列<code class="fe mk ml mm mn b">byrow=FALSE</code>填充。</li></ul><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="8557" class="mt ks iq mn b gy mu mv l mw mx"># Row-wise  # Column-wise<br/>   1 2 3        1 4 7<br/>   4 5 6        2 5 8<br/>   7 8 9        3 6 9</span></pre><ul class=""><li id="7ceb" class="my mz iq ll b lm mf lp mg ls na lw nb ma nc me nd ne nf ng bi translated">第三个参数<code class="fe mk ml mm mn b">nrow</code>表示所需的行数。<code class="fe mk ml mm mn b">nrows=3</code>表示矩阵应该有三行。</li></ul><p id="9709" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">还有其他论点，如:</p><ul class=""><li id="8f47" class="my mz iq ll b lm mf lp mg ls na lw nb ma nc me nd ne nf ng bi translated"><code class="fe mk ml mm mn b">ncol</code>表示所需的列数。</li></ul><h1 id="2331" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">从向量创建矩阵</h1><p id="e079" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们来分析一下《星球大战》系列的票房数字。</p><p id="0be3" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">下面是三个向量，每个向量定义了前三部《星球大战》电影之一的票房数字。每个向量的第一个元素表示美国票房收入，第二个元素表示非美国票房(来源:<a class="ae mo" href="https://en.wikipedia.org/wiki/List_of_Star_Wars_films" rel="noopener ugc nofollow" target="_blank">维基百科</a>)。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="8cde" class="mt ks iq mn b gy mu mv l mw mx"># Box office Star Wars (in millions)<br/>new_hope &lt;- c(460.998, 314.4)<br/>empire_strikes &lt;- c(290.475, 247.900)<br/>return_jedi &lt;- c(309.306, 165.8)</span></pre><p id="ebf4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要从这三个向量构建一个矩阵，我们首先需要将这三个向量合并成一个。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="685c" class="mt ks iq mn b gy mu mv l mw mx">box_office &lt;- c(new_hope, empire_strikes, return_jedi)</span></pre><p id="ea32" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">然后我们使用<code class="fe mk ml mm mn b">matrix()</code>函数构建一个矩阵。第一个参数是向量<code class="fe mk ml mm mn b">box_office</code>，包含所有票房数字。接下来，我们必须指定<code class="fe mk ml mm mn b">nrow=3</code>和<code class="fe mk ml mm mn b">byrow=TRUE</code>来构建按行填充 3 行的矩阵(第一列代表美国收入，第二列代表非美国收入)。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="f4ab" class="mt ks iq mn b gy mu mv l mw mx">star_wars_matrix &lt;- matrix(box_office, byrow=TRUE, nrow=3)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/096f7b4fae0497bad805d0da0edbe5c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*snRto7ovM-u_YiVJt0H-4w.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">总的来说，代码应该是这样的。</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/d8e2611a6ea38f6e551968df8c7dd1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2A1-1S0ldVLG7RmaE9rjyQ.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">结果矩阵将是一个 3 行乘 2 列的“表格”。</p></figure><h1 id="29a8" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">命名矩阵</h1><p id="95d5" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">向矩阵的行和列添加名称通常有助于记住矩阵中存储的内容。它不仅有助于读取数据，还有助于从矩阵中选择某些元素。我们可以通过使用函数<code class="fe mk ml mm mn b">colnames()</code>和<code class="fe mk ml mm mn b">rownames()</code>来实现这一点。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="01b0" class="mt ks iq mn b gy mu mv l mw mx">rownames(my_matrix) &lt;- row_names_vector<br/>colnames(my_matrix) &lt;- col_names_vector</span></pre><p id="fe03" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要按区域和标题命名列，需要表示这些名称的向量。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="0774" class="mt ks iq mn b gy mu mv l mw mx"># Vectors region and titles, used for naming<br/>region &lt;- c("US", "non-US")<br/>titles &lt;- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")</span></pre><p id="84f6" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要用<code class="fe mk ml mm mn b">region</code>向量命名<code class="fe mk ml mm mn b">star_wars_matrix</code>的列，必须使用<code class="fe mk ml mm mn b">colnames()</code>。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="5ef0" class="mt ks iq mn b gy mu mv l mw mx"># Name the columns with region<br/>colnames(star_wars_matrix) &lt;- region</span></pre><p id="5d63" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要用<code class="fe mk ml mm mn b">titles</code>向量命名<code class="fe mk ml mm mn b">star_wars_matrix</code>的行，必须使用<code class="fe mk ml mm mn b">rownames()</code>。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="5b3b" class="mt ks iq mn b gy mu mv l mw mx"># Name the rows with titles<br/>rownames(star_wars_matrix) &lt;- titles</span></pre><p id="26e5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">您的代码现在应该像这样:</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="42c9" class="mt ks iq mn b gy mu mv l mw mx"># Box office Star Wars (in millions)<br/>new_hope &lt;- c(460.998, 314.4)<br/>empire_strikes &lt;- c(290.475, 247.900)<br/>return_jedi &lt;- c(309.306, 165.8)</span><span id="73d6" class="mt ks iq mn b gy ns mv l mw mx"># Construct matrix<br/>star_wars_matrix &lt;- matrix(c(new_home, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)</span><span id="1a98" class="mt ks iq mn b gy ns mv l mw mx"># Vectors region and titles, used for naming<br/>region &lt;- c("US", "non-US")<br/>titles &lt;- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")</span><span id="a686" class="mt ks iq mn b gy ns mv l mw mx"># Name the columns with region<br/>colnames(star_wars_matrix) &lt;- region</span><span id="679b" class="mt ks iq mn b gy ns mv l mw mx"># Name the rows with titles<br/>rownames(star_wars_matrix) &lt;- titles</span><span id="5be7" class="mt ks iq mn b gy ns mv l mw mx"># Print out star_wars_matrix<br/>star_wars_matrix</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/7d51a9a7b0f84b90166a31e549e8567f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BD-vIBWfstNHalzCbpQ8VQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/23be8988267b5a4f0a8e8785864dc52f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGpPtQkDgMg3EkjAkseBjw.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">使用 colnames()和 rownames()函数后，矩阵现在被标记。</p></figure><h2 id="38e2" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">备选方案:使用 dimnames 参数</h2><p id="96c6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">矩阵的<code class="fe mk ml mm mn b">dimnames</code>属性可用于命名矩阵的行和列。<code class="fe mk ml mm mn b">dimnames</code>属性接受长度为 2 的<code class="fe mk ml mm mn b">list</code>,分别给出行名和列名。也就是说，</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="c37f" class="mt ks iq mn b gy mu mv l mw mx">dimnames = list(row_vector,column_vector)</span></pre><p id="45db" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">所以，在构造矩阵时，我们可以直接标记它。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="311d" class="mt ks iq mn b gy mu mv l mw mx"># Construct star_wars_matrix<br/>box_office &lt;- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)<br/>star_wars_matrix &lt;- matrix(box_office, nrow = 3, byrow = TRUE, dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"),c("US, "non-US")))</span></pre><h1 id="b8eb" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">计算行总计</h1><p id="4ccb" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">一部电影的一个重要统计数据是它的全球票房数字。要计算三部《星球大战》电影的总票房收入，你需要确定美国收入和非美国收入的总和。</p><p id="b743" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">函数<code class="fe mk ml mm mn b">rowSums()</code>计算矩阵每行的总数，并创建一个新的向量:</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="91fd" class="mt ks iq mn b gy mu mv l mw mx">rowSums(my_matrix)</span></pre><h2 id="d07a" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="165c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">计算三部电影的全球票房数字。</p><h2 id="ff64" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="38f0" class="mt ks iq mn b gy mu mv l mw mx"># Construct star_wars_matrix<br/>box_office &lt;- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)<br/>star_wars_matrix &lt;- matrix(box_office, nrow = 3, byrow = TRUE, dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"),c("US, "non-US")))</span><span id="41b7" class="mt ks iq mn b gy ns mv l mw mx"># Calculate worldwide box office figures<br/>worldwide_vector &lt;- rowSums(star_wars_matrix)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/1164a32424d1b3bea8ac89d89eef16d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_23gKAPwPA9n_I-8SqZ-1A.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/0985bcd544774e04579d9f2a67458b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*do1hA-m-qT8kD6aOs7ca7g.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">我们得到每部电影的总票房收入，而不考虑地区。</p></figure><h1 id="5f82" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">向矩阵中添加列</h1><p id="05a8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">您可以使用<code class="fe mk ml mm mn b"><a class="ae mo" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind" rel="noopener ugc nofollow" target="_blank">cbind()</a></code>功能向矩阵添加一列或多列，该功能按列将矩阵和/或向量合并在一起。例如:</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="d480" class="mt ks iq mn b gy mu mv l mw mx">big_matrix &lt;- cbind(matrix1, matrix2, vector1, ...)</span></pre><h2 id="21f1" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="f5ff" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在上一个练习中，您计算了包含三部电影的全球票房收入的向量。然而，这个向量还不是<code class="fe mk ml mm mn b">star_wars_matrix</code>的一部分。将此向量作为新列添加到矩阵中，并将结果赋给新矩阵。</p><h2 id="f86a" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="2233" class="mt ks iq mn b gy mu mv l mw mx"># Construct star_wars_matrix<br/>box_office &lt;- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)<br/>star_wars_matrix &lt;- matrix(box_office, nrow = 3, byrow = TRUE, dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"),c("US, "non-US")))</span><span id="fc03" class="mt ks iq mn b gy ns mv l mw mx"># Calculate worldwide box office figures<br/>worldwide_vector &lt;- rowSums(star_wars_matrix)</span><span id="a483" class="mt ks iq mn b gy ns mv l mw mx"># Bind the new variable worldwide_vector as a column to star_wars_matrix<br/>all_wars_matrix &lt;- cbind(star_wars_matrix, worldwide_vector)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/e23601d755ceb6c613990752fd09c768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLUWcWKD1H0Zv_xCXGeXZA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/ba070e638cba390e3607c21b285685c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfeYlUytDVkEdvLTIaK06A.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">all_wars_matrix 现在包括美国收入、非美国收入以及这两项的总和。</p></figure><h1 id="6fc6" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">添加一行</h1><p id="b3c4" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">要添加列，可以使用<code class="fe mk ml mm mn b"><a class="ae mo" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">cbind()</strong></a></code>。要添加一行，可以使用<code class="fe mk ml mm mn b"><a class="ae mo" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">rbind()</strong></a></code>。<code class="fe mk ml mm mn b">rbind()</code>函数接受一系列向量或矩阵参数，并按行组合它们。举个例子，</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="d2e6" class="mt ks iq mn b gy mu mv l mw mx">big_matrix &lt;- rbind(matrix1, matrix2, vector1, ...)</span></pre><h2 id="f7fe" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="dd3f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">就像你用原三部曲的数据创建<code class="fe mk ml mm mn b">star_wars_matrix</code>一样，用前传三部曲的类似数据创建第二个矩阵。</p><p id="ab27" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">然后使用<code class="fe mk ml mm mn b">rbind()</code>来合并两个矩阵，首先是原三部曲的数据，然后是前传的数据。</p><h2 id="a649" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="242d" class="mt ks iq mn b gy mu mv l mw mx"># Construct star_wars_matrix<br/>box_office &lt;- c(461.0, 314.4, 290.5, 247.9, 309.3, 165.8)<br/>star_wars_matrix &lt;- matrix(box_office, nrow = 3, byrow = TRUE, dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi"), c("US", "non-US")))</span><span id="61a8" class="mt ks iq mn b gy ns mv l mw mx"># Construct star_wars_matrix2<br/>box_office2 &lt;- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)<br/>star_wars_matrix2 &lt;- matrix(box_office2, nrow = 3, byrow = TRUE, dimnames = list(c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith"), c("US", "non-US")))</span><span id="216f" class="mt ks iq mn b gy ns mv l mw mx"># Combine both Star Wars trilogies in one matrix<br/>all_wars_matrix &lt;- rbind(star_wars_matrix, star_wars_matrix2)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/b106935ccf7370805d1afc0ad1064fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5T7g0Jw1ob6tX9YaPKRgBg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/02f7a7dda9de53374ab873e7160a0160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Mft9agTEGxHvqv0xSvIEA.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">新的矩阵应该按地区列出原版和前传的收入。</p></figure><h1 id="fbd5" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">计算列总计</h1><p id="cd3f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">类似于我们如何使用<code class="fe mk ml mm mn b">rowSums()</code>来计算每行的总和，我们也可以使用<code class="fe mk ml mm mn b"><a class="ae mo" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/colSums" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">colSums()</strong></a></code>来计算矩阵每列的总和。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="9492" class="mt ks iq mn b gy mu mv l mw mx">rowSums(my_matrix)</span></pre><h2 id="dae7" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="80bf" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">使用之前练习中构建的<code class="fe mk ml mm mn b">all_wars_matrix</code>，计算整个传奇在美国和非美国地区的总票房收入。</p><h2 id="8869" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="58e0" class="mt ks iq mn b gy mu mv l mw mx"># Total revenue for US and non-US<br/>total_revenue_vector &lt;- colSums(all_wars_matrix)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/fae518d7f3f44b87df226da2f6df7e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzidKuDKKxasax1rVQ_zPQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/a69f7c2cf13e3b70e1f6af21b8bd8c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqgdTeYru4uEDi3UaqTC5Q.png"/></div></div></figure><h1 id="8920" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">矩阵元素的选择</h1><p id="7d6f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">与向量类似，方括号<code class="fe mk ml mm mn b">[]</code>可用于从矩阵中选择一个或多个元素。因为矩阵是二维的，所以需要逗号来分隔行和列。例如:</p><ul class=""><li id="f542" class="my mz iq ll b lm mf lp mg ls na lw nb ma nc me nd ne nf ng bi translated"><code class="fe mk ml mm mn b">my_matrix[1,2]</code>选择第一行第二列的元素(第 1 行，第 2 列)</li><li id="9065" class="my mz iq ll b lm nh lp ni ls nj lw nk ma nl me nd ne nf ng bi translated"><code class="fe mk ml mm mn b">my_matrix[1:3, 2:4]</code>返回包含第 1 行到第 3 行、第 2 列到第 4 列的数据的矩阵。</li></ul><p id="53a4" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要选择一行中的所有元素，在列后不需要数字。要选择一列的所有元素，在该列前不需要数字。</p><ul class=""><li id="bea0" class="my mz iq ll b lm mf lp mg ls na lw nb ma nc me nd ne nf ng bi translated"><code class="fe mk ml mm mn b">my_matrix[,1]</code>选择第一列的所有元素。</li><li id="88ad" class="my mz iq ll b lm nh lp ni ls nj lw nk ma nl me nd ne nf ng bi translated"><code class="fe mk ml mm mn b">my_matrix[1,]</code>选择第一行的所有元素。</li></ul><h2 id="2f6a" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="b0dd" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">计算所有电影的平均非美国收入(提示:选择<code class="fe mk ml mm mn b">all_wars_matrix</code>的整个第二列，并使用<code class="fe mk ml mm mn b">mean()</code>函数)。</p><h2 id="5731" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="b853" class="mt ks iq mn b gy mu mv l mw mx"># Select the non-US revenue for all movies<br/>non_us_all &lt;- all_wars_matrix</span><span id="f5c6" class="mt ks iq mn b gy ns mv l mw mx"># Average non-US revenue<br/>mean(non_us_all)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/81d59ecae27c86ba021b562915cbcd15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UTTM4JGYeznNJl1MkTHF0Q.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/4ab85662f8c53e0ba8219a3ce0ff525f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clA1hOhd4mMIJu0BmzDlEg.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">我们的平均收入为 3.4797 亿美元。</p></figure></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><h2 id="cc23" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">给你尝试(2)</h2><p id="b66d" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">计算传奇故事前两部电影的平均值。</p><h2 id="fa5f" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="a386" class="mt ks iq mn b gy mu mv l mw mx"># Select the non-US revenue for the first two movies<br/>non_us_some &lt;- all_wars_matrix[1:2,2]</span><span id="f8bd" class="mt ks iq mn b gy ns mv l mw mx"># Average non-US revenue for the first two movies<br/>mean(non_us_some)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/2099ff7b7948927897163fe638dc1da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4UVyItT3UJQNhngkfJa9cQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/b45484ff40a117d312655e270fc05975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsSOYU3jzY9f9MN1DekqTw.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">前两部电影的平均非美国收入为 2.8115 亿美元。</p></figure><h1 id="b974" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">矩阵运算</h1><p id="3115" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">标准运算符，如<code class="fe mk ml mm mn b">+</code>、<code class="fe mk ml mm mn b">-</code>、<code class="fe mk ml mm mn b">/</code>、<code class="fe mk ml mm mn b">*</code>等。它处理向量，也以元素的方式处理矩阵。</p><p id="4c0e" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">例如，<code class="fe mk ml mm mn b">2 * my_matrix</code>将<code class="fe mk ml mm mn b">my_matrix</code>的每个元素乘以 2。</p><p id="123c" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">也可以将一个矩阵乘以另一个矩阵。例如，<code class="fe mk ml mm mn b">my_matrix1 * my_matrix2</code>创建一个矩阵，其中每个元素都是<code class="fe mk ml mm mn b">my_matrix1</code>和<code class="fe mk ml mm mn b">my_matrix2</code>中相应元素的乘积。</p><h2 id="cd30" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">让你试试</h2><p id="3c87" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">假设一张电影票的价格是 5 美元。确定每个地理区域有多少观众去看了每部电影。(提示:简单地用票房数字除以票价就会得到游客数量)。</p><h2 id="e3c0" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="9679" class="mt ks iq mn b gy mu mv l mw mx"># Estimate the visitors<br/>visitors &lt;- all_wars_matrix / 5</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/102a076e2880340d94dd97c1e11694a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JO_l5fLGU9eXIZINkHY5yw.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/8974abb5e60b69b5b922570b988080e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkbr4UPp-pvJjGoCxDieYw.png"/></div></div></figure></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><h2 id="cf94" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">给你尝试(2)</h2><p id="9a94" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">假设票价随着时间的推移而上涨。给出一个票价矩阵，确定所有电影的美国和非美国游客的估计数量。</p><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="5ead" class="mt ks iq mn b gy mu mv l mw mx"># Construct ticket_prices_matrix<br/>ticket_prices &lt;- c(5.0, 5.0, 6.0, 6.0, 7.0, 7.0, 4.0, 4.0, 4.5, 4.5, 4.9, 4.9)<br/>ticket_prices_matrix &lt;- matrix(ticket_prices, nrow = 6, byrow = TRUE, dimnames = list(c("A New Hope", "The Empire Strikes Back", "Return of the Jedi","The Phantom Menace", "Attack of the Clones", "Revenge of the Sith"),c("US", "non-US")))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/44c62a77b28003daec341135d86fe819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3o629vrhh8hbGQTQ_DIW0g.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">票价矩阵。</p></figure><h2 id="9682" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="fed6" class="mt ks iq mn b gy mu mv l mw mx"># Estimated number of visitors<br/>visitors &lt;- all_wars_matrix / ticket_prices_matrix</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/bca1fa664af3b2ce8be73b5c9a7846dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EoGkxZ-fJjjHESkxAnDAKA.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/05ffd24227264b0e5e232ac53f113397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uqONnRRXJANtGmkaskr00A.png"/></div></div></figure></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><h2 id="ec6d" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">给你试试(3)</h2><p id="da89" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">计算美国访问者的平均数量(提示:您需要完成第二个才能尝试)</p><h2 id="3d69" class="mt ks iq bd kt nv nw dn kx nx ny dp lb ls nz oa ld lw ob oc lf ma od oe lh of bi translated">解决办法</h2><pre class="kg kh ki kj gt mp mn mq mr aw ms bi"><span id="06de" class="mt ks iq mn b gy mu mv l mw mx"># US visitors (Select the entire first column)<br/>us_visitors &lt;- visitors[,1]</span><span id="f098" class="mt ks iq mn b gy ns mv l mw mx"># Average number of US visitors<br/>mean(us_visitors)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/237581e7dfd9d90d36dde55e4f1a88b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDWilWHMcaUOPm3dxiuy7A.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/b558b44df5551dab62f78446cab81ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U2ALWng_6OEzhe_GFuJ0Mg.png"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">美国访问者的平均数量可以使用均值函数来确定。</p></figure></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><h1 id="4877" class="kr ks iq bd kt ku ox kw kx ky oy la lb jw oz jx ld jz pa ka lf kc pb kd lh li bi translated">笔记</h1><p id="7ff6" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">所有图片，除非特别注明，均归作者所有。横幅图像是使用<a class="ae mo" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>创建的。</p></div></div>    
</body>
</html>