<html>
<head>
<title>Hide Your Secret Keys Using Environment Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用环境变量隐藏您的密钥</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/connect-to-databases-using-python-and-hide-secret-keys-with-env-variables-a-brief-tutorial-4f68e33a6dc6?source=collection_archive---------8-----------------------#2020-02-08">https://towardsdatascience.com/connect-to-databases-using-python-and-hide-secret-keys-with-env-variables-a-brief-tutorial-4f68e33a6dc6?source=collection_archive---------8-----------------------#2020-02-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="64d5" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/python" rel="noopener" target="_blank"> Python </a> | <a class="ae ep" href="https://towardsdatascience.com/tagged/programming" rel="noopener" target="_blank">编程</a> | <a class="ae ep" href="https://towardsdatascience.com/tagged/office-hours" rel="noopener" target="_blank">办公时间</a></h2><div class=""/><div class=""><h2 id="352e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">关于如何在使用Python连接到数据库时使用环境变量保护密码的教程</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/468a298822ca2ad8d7a3a8676ef2a100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BvdCuorPC8jC0GJ0"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@danny144?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹·尼尔森</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="d3fc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">我向我的读者强烈推荐的课程:</em></p><ul class=""><li id="7f6c" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated"><a class="ae lh" href="https://datacamp.pxf.io/jWm4G0" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd"><em class="me">Python中的命令行自动化(data camp)</em></strong></a><strong class="lk jd"><em class="me">→</em></strong><em class="me">学习自动化许多常见的文件系统任务，并能够管理和与进程通信。</em></li></ul><h1 id="b13c" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated">介绍</h1><p id="04d5" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">假设您正在进行一个数据科学项目，您决定通过使用Python建立连接来从公司数据库中提取数据。如果有必要通过GitHub分享你的脚本，让更广泛的团队审阅，那该怎么办？那么，在这种情况下，为了避免其他人滥用，你最好隐藏你的秘密细节。</p><p id="3866" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本文中，我将展示如何通过命令行使用环境变量来保证用户名、<em class="me">密码</em>和<em class="me">数据库名</em>的安全，避免不必要的信息泄露。</p><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/write-datasets-from-g-sheet-to-your-database-with-python-bd2c2643f958"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">使用Python将Google电子表格写入数据库</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在本教程中，学习如何用几行代码构建简单的ETL来跨系统移动数据。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc lb no"/></div></div></a></div><h1 id="5477" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak">环境变量解释</strong></h1><p id="6893" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">环境变量是<strong class="lk jd"> KEY=value </strong>对，类似于Shell变量，可以通过命令行<em class="me">、</em>创建，但功能更强大，因为一旦声明，它们就可以被任何编程语言使用，因为它们与您的环境/操作系统相关联。</p><p id="9e31" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在命令行环境中:</p><ul class=""><li id="1362" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated">变量<strong class="lk jd">键</strong>必须用<strong class="lk jd"> <em class="me">大写字母</em> </strong>书写，并且可以是<em class="me">字符</em>、<em class="me">数字</em>和<em class="me">下划线</em>的混合。</li><li id="08f3" class="mf mg it lk b ll od lo oe lr of lv og lz oh md mk ml mm mn bi translated">另一方面，任何<strong class="lk jd">值</strong>数据类型都可以赋给它们，在Bash中使用字符串时引号是可选的，除非字符串包含空格。这是因为Bash对空格很敏感，所以包含空格的字符串除非用引号括起来，否则无法正常工作。</li><li id="3aa8" class="mf mg it lk b ll od lo oe lr of lv og lz oh md mk ml mm mn bi translated">最后，在“<em class="me">=”</em>符号前后不能留有空格，如下所示:</li></ul><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="bfae" class="on mp it oj b gy oo op l oq or"><strong class="oj jd">MY_VARIABLE=”my_value” </strong>--&gt; works(capital, no space, quotes)</span><span id="7376" class="on mp it oj b gy os op l oq or"><strong class="oj jd">MY_VARIABLE=my_value </strong>--&gt; works(capital, no space, no quotes but underscore)</span><span id="ec09" class="on mp it oj b gy os op l oq or"><strong class="oj jd">MY_VARIABLE=my value </strong>--&gt; fails(capital, no space, space in value)</span><span id="a030" class="on mp it oj b gy os op l oq or"><strong class="oj jd">MY_VARIABLE = ”my_value” </strong>--&gt; fails(capital, space between equal sign, quotes)</span></pre><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/3-ways-to-compute-a-weighted-average-in-python-4e066de7a719"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">Python中计算加权平均值的3种方法</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在这篇简短的教程中，我将展示如何在Python中计算加权平均值，要么定义自己的函数，要么使用…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="ot l nz oa ob nx oc lb no"/></div></div></a></div><h1 id="2242" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak">配置环境变量</strong></h1><p id="f7a7" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">在使用Mac OS时永久声明环境变量的一个简单方法是将它添加到<strong class="lk jd">中。bash_profile </strong>是在您的主目录中定义的一个隐藏文件，用于在您的系统中配置Bash Shell。要访问该文件，首先运行您的终端，使用<strong class="lk jd"> cd ~ </strong>导航到主目录，然后在<strong class="lk jd">打开的情况下打开文件编辑器。bash_profile </strong>命令:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="1d06" class="on mp it oj b gy oo op l oq or">$ cd ~</span><span id="6ae4" class="on mp it oj b gy os op l oq or">$ open .bash_profile</span></pre><p id="cff7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在文件编辑器中，为您想要隐藏的秘密信息键入<strong class="lk jd"> KEY=value </strong>对，前面是<strong class="lk jd"> export </strong>命令，表明您希望这些变量在shell之外也可用:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="76af" class="on mp it oj b gy oo op l oq or">export USERNAME=”Insert Your User Name”<br/>export DBPW=”Insert Your PW"<br/>export DBNAME=”Insert Your DB Name"</span></pre><p id="cd36" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">添加完所有变量后，保存文本文件并用<strong class="lk jd">源刷新bash概要文件。bash_profile </strong>命令:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="7bc0" class="on mp it oj b gy oo op l oq or">$ source .bash_profile</span></pre><p id="36ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://stackoverflow.com/questions/4608187/how-to-reload-bash-profile-from-the-command-line" rel="noopener ugc nofollow" target="_blank">如果您忽略运行上面的命令，您将无法立即看到刚刚创建的环境变量，您需要退出并重新登录命令行</a>。</p><p id="7d9f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，在尝试数据库连接之前，让我们通过在命令行中打开<em class="me">交互式Python控制台</em>并导入<a class="ae lh" href="https://docs.python.org/3/library/os.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> os模块</strong> </a>来确保变量确实可以在Python中使用。其中，os模块使Python能够使用您的操作系统环境变量。您可以使用<strong class="lk jd"> os.environ </strong>列出它们，这是一个返回Python字典的方法，该字典包含系统中当前可用的所有变量，或者选择每个键，如下所示:</p><pre class="ks kt ku kv gt oi oj ok ol aw om bi"><span id="75ff" class="on mp it oj b gy oo op l oq or"><strong class="oj jd">$ ipython</strong></span><span id="3a5a" class="on mp it oj b gy os op l oq or"><strong class="oj jd">In [1]: import os</strong></span><span id="7e52" class="on mp it oj b gy os op l oq or"><strong class="oj jd">In [2]: os.environ['USERNAME']</strong></span><span id="7baa" class="on mp it oj b gy os op l oq or"><strong class="oj jd">Out[2]: 'Insert Your User Name'</strong></span><span id="9226" class="on mp it oj b gy os op l oq or"><strong class="oj jd">In [3]: os.environ['DBPW']</strong></span><span id="2b88" class="on mp it oj b gy os op l oq or"><strong class="oj jd">Out[3]: 'Insert Your PW'</strong></span><span id="083a" class="on mp it oj b gy os op l oq or"><strong class="oj jd">In [4]: os.environ['DBNAME']</strong></span><span id="c722" class="on mp it oj b gy os op l oq or"><strong class="oj jd">Out[4]: 'Insert Your DB Name'</strong></span></pre><p id="71ba" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">太棒了。似乎您现在可以在数据库连接设置中用环境变量键替换秘密信息字符串。如果你像我一样使用<code class="fe ou ov ow oj b">psycopg2.connect()</code>和<code class="fe ou ov ow oj b">pd.read_sql()</code>方法<em class="me">和</em>来连接红移，你会得到这样的结果:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ox oy l"/></div></figure><h1 id="1be6" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak">结论</strong></h1><p id="819c" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ni lt lu lv nj lx ly lz nk mb mc md im bi translated">在本教程中，我尝试解决了一个我最近几次遇到的实际问题:在处理共享Python脚本时隐藏密钥，我希望你会发现环境变量对你的工作流和对我一样有用。请注意，这只是一个介绍性的指南，还有很多关于环境变量的内容需要学习。例如，我发现一门特别有启发性的课程是由<a class="ae lh" href="https://datacamp.pxf.io/2rdeLQ" rel="noopener ugc nofollow" target="_blank"> DataCamp </a>教授的Python 中的<a class="ae lh" href="https://datacamp.pxf.io/jWm4G0" rel="noopener ugc nofollow" target="_blank">命令行自动化。</a></p><p id="ea4f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">免责声明:这个帖子包括附属链接，如果你购买的话，我可以免费给你一点佣金。</em></p><h1 id="1d34" class="mo mp it bd mq mr ms mt mu mv mw mx my ki mz kj na kl nb km nc ko nd kp ne nf bi translated"><strong class="ak">你可能也喜欢:</strong></h1><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/15-git-commands-you-should-learn-before-your-very-first-project-f8eebb8dc6e9"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">在你开始第一个项目之前，要掌握15个Git命令</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">您需要掌握的最后一个Git教程是命令行版本控制。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="oz l nz oa ob nx oc lb no"/></div></div></a></div><div class="nl nm gp gr nn no"><a rel="noopener follow" target="_blank" href="/10-algorithms-to-solve-before-your-python-coding-interview-feb74fb9bc27"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">Python编码面试前要解决的10个算法</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">在这篇文章中，我介绍并分享了FAANG中经常出现的一些基本算法的解决方案</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">towardsdatascience.com</p></div></div><div class="nx l"><div class="pa l nz oa ob nx oc lb no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://medium.com/analytics-vidhya/5-pythons-sets-problems-to-solve-before-your-coding-interview-41bb1d14ac25" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jd gy z fp nt fr fs nu fu fw jc bi translated">5套算法解决之前，你的Python编码屏幕</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">你对Python中的集合了解多少？用这些“简单”和“中等”的LeetCode问题挑战自己。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">medium.com</p></div></div><div class="nx l"><div class="pb l nz oa ob nx oc lb no"/></div></div></a></div></div></div>    
</body>
</html>