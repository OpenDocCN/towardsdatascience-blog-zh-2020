<html>
<head>
<title>Tips and tricks in RStudio and R Markdown</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RStudio 和 R Markdown 中的提示和技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tips-and-tricks-in-rstudio-and-r-markdown-7a464508b0c?source=collection_archive---------26-----------------------#2020-01-21">https://towardsdatascience.com/tips-and-tricks-in-rstudio-and-r-markdown-7a464508b0c?source=collection_archive---------26-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="baed" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">或者如何更快更有效地写 R 代码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8fc8d7594b97615f150f7c3cdfde47bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y4fKu_3a0d7sPbPL"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@nosoylasonia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">胡安·戈麦斯</a>拍摄</p></figure><p id="c9af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">如果你有机会和一位经验丰富的程序员一起工作，你可能会惊讶于她写代码的速度。在本文中，我分享了一些技巧和快捷方式，您可以在 RStudio 和 R Markdown 中使用它们来加速代码的编写。</p><h1 id="6b18" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">运行代码</h1><p id="8dc6" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">你很可能已经知道这个快捷方式，但是我仍然为新的 R 用户提到它。从您的脚本中，您可以运行一段代码:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="fb26" class="ng mf it nc b gy nh ni l nj nk">command + Enter on Mac<br/>Ctrl + Enter on Windows</span></pre><h1 id="90ec" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">在 R and R 减价中插入评论</h1><p id="d2f2" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">要插入注释:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="46f6" class="ng mf it nc b gy nh ni l nj nk">command + Shift + C on Mac<br/>Ctrl + Shift + C on Windows</span></pre><p id="e227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此快捷方式可用于:</p><ul class=""><li id="685d" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">当你想注释你的代码时。它会在行首添加一个<code class="fe nu nv nw nc b">#</code></li><li id="eaeb" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">对于 R Markdown 中的文本。它会在文本周围添加<code class="fe nu nv nw nc b">&lt;!--</code>和<code class="fe nu nv nw nc b">--&gt;</code></li></ul><p id="ed87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，如果您想要注释多行，请选择您想要注释的所有行，然后使用快捷键。如果您想要取消注释，请应用相同的快捷键。</p><h1 id="7ddb" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">编织一个 R 减价文件</h1><p id="28dc" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">您可以使用此快捷方式来编织 R Markdown 文档:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="1681" class="ng mf it nc b gy nh ni l nj nk">command + Shift + K on Mac<br/>Ctrl + Shift + K on Windows</span></pre><h1 id="71de" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">代码片段</h1><p id="6ada" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">代码段通常只有几个字符长，用作插入一段普通代码的快捷方式。你只需输入几个字符，然后按下<code class="fe nu nv nw nc b">Tab</code>，它会用一个更大的代码来完成你的代码。然后再次使用<code class="fe nu nv nw nc b">Tab</code>在需要定制的代码中导航。例如，如果您键入<code class="fe nu nv nw nc b">fun</code>，然后按下<code class="fe nu nv nw nc b">Tab</code>，它将自动使用所需代码完成代码，以创建一个函数:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="c2c8" class="ng mf it nc b gy nh ni l nj nk">name &lt;- function(variables) {<br/>  <br/>}</span></pre><p id="6753" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">再次按下<code class="fe nu nv nw nc b">Tab</code>将在占位符间跳转，以便您进行编辑。所以你可以先编辑函数的名字，然后是变量，最后是函数内部的代码(自己试试！).</p><p id="7831" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RStudio 中默认有很多代码片段。以下是我最常用的代码片段:</p><ul class=""><li id="4e9b" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">lib</code>呼叫<code class="fe nu nv nw nc b">library()</code></li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="5406" class="ng mf it nc b gy nh ni l nj nk">library(package)</span></pre><ul class=""><li id="2549" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">mat</code>创建一个矩阵</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7d83" class="ng mf it nc b gy nh ni l nj nk">matrix(data, nrow = rows, ncol = cols)</span></pre><ul class=""><li id="124b" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">if</code>、<code class="fe nu nv nw nc b">el</code>、<code class="fe nu nv nw nc b">ei</code>创建<code class="fe nu nv nw nc b">if() {}</code>、<code class="fe nu nv nw nc b">else {}</code>、<code class="fe nu nv nw nc b">else if () {}</code>等条件表达式</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="85bf" class="ng mf it nc b gy nh ni l nj nk">if (condition) {<br/>  <br/>}</span><span id="8647" class="ng mf it nc b gy oc ni l nj nk">else {<br/>  <br/>}</span><span id="91d4" class="ng mf it nc b gy oc ni l nj nk">else if (condition) {<br/>  <br/>}</span></pre><ul class=""><li id="52b1" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">fun</code>创建一个函数</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="6798" class="ng mf it nc b gy nh ni l nj nk">name &lt;- function(variables) {<br/>  <br/>}</span></pre><ul class=""><li id="7a67" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">for</code>创建 for 循环</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7f5f" class="ng mf it nc b gy nh ni l nj nk">for (variable in vector) {<br/>  <br/>}</span></pre><ul class=""><li id="14fe" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">ts</code>插入带有当前日期和时间的注释(如果你有很长的代码并与他人分享，以便他们能看到它何时被编辑，这很有用)</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="aee1" class="ng mf it nc b gy nh ni l nj nk"># Tue Jan 21 20:20:14 2020 ------------------------------</span></pre><ul class=""><li id="f526" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">shinyapp</code>每次我创建一个新的<a class="ae ky" href="https://www.statsandr.com/tags/shiny/" rel="noopener ugc nofollow" target="_blank">闪亮的应用</a></li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="a63b" class="ng mf it nc b gy nh ni l nj nk">library(shiny)</span><span id="72d5" class="ng mf it nc b gy oc ni l nj nk">ui &lt;- fluidPage(<br/>  <br/>)</span><span id="5279" class="ng mf it nc b gy oc ni l nj nk">server &lt;- function(input, output, session) {<br/>  <br/>}</span><span id="9dcf" class="ng mf it nc b gy oc ni l nj nk">shinyApp(ui, server)</span></pre><p id="f15c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到所有默认的代码片段，并通过点击工具&gt;全局选项…&gt;代码(左侧栏) &gt;编辑代码片段…</p><h1 id="d43f" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">R 降价中的有序列表</h1><p id="0cc8" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在 R Markdown 中，当创建这样的有序列表时:</p><ol class=""><li id="37ab" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu od nr ns nt bi translated">项目 1</li><li id="25e3" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 2</li><li id="75b0" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 3</li></ol><p id="bcd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而不是纠结于数字和打字</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="bf86" class="ng mf it nc b gy nh ni l nj nk">1. Item 1<br/>2. Item 2<br/>3. Item 3</span></pre><p id="4042" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以简单地输入</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d0f4" class="ng mf it nc b gy nh ni l nj nk">1. Item 1<br/>1. Item 2<br/>1. Item 3</span></pre><p id="26b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">获得完全相同的结果(自己尝试一下或者查看本文的代码！).这样，在创建新项目时，您就不必担心下一个号码是什么了。</p><p id="94eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更进一步，只要第一项是您想要开始的数字，任何数字实际上都将呈现相同的结果。例如，您可以键入:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="36bc" class="ng mf it nc b gy nh ni l nj nk">1. Item 1<br/>7. Item 2<br/>3. Item 3</span></pre><p id="c950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这使得</p><ol class=""><li id="5a5a" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu od nr ns nt bi translated">项目 1</li><li id="1e04" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 2</li><li id="5a63" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 3</li></ol><p id="d9ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我建议总是使用你想要的数字来开始所有的条目，因为如果你移动了顶部的一个条目，列表将从这个新的数字开始。例如，如果我们将<code class="fe nu nv nw nc b">7. Item 2</code>从前面的列表中移到顶部，列表将变成:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7bba" class="ng mf it nc b gy nh ni l nj nk">7. Item 2<br/>1. Item 1<br/>3. Item 3</span></pre><p id="74c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不正确地呈现了</p><ol class=""><li id="e1cf" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu od nr ns nt bi translated">项目 2</li><li id="b813" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 1</li><li id="3cec" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu od nr ns nt bi translated">项目 3</li></ol><h1 id="4b39" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">R Markdown 中的新代码块</h1><p id="6b62" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">当编辑 R Markdown 文档时，您将需要多次插入新的 R 代码块。以下快捷方式将使您的生活更轻松:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7d2d" class="ng mf it nc b gy nh ni l nj nk">command + option + I on Mac (or command + alt + I depending on your keyboard)<br/>Ctrl + ALT + I on Windows</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/e48fe445e1def203bd415711b1642167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ypes-JFWhhn7qwvZ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">R Markdown 中的新 R 代码块</p></figure><h1 id="dbaf" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">重新格式化代码</h1><p id="407c" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">一个清晰可读的代码总是更容易和更快地阅读(并且在分享给合作者时看起来更专业)。自动应用最常见的编码准则，如空白、缩进等。，使用:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="ae23" class="ng mf it nc b gy nh ni l nj nk">cmd + Shift + A on Mac<br/>Ctrl + Shift + A on Windows</span></pre><p id="2b20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，下面的代码不符合指导原则(并且不容易阅读):</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="0336" class="ng mf it nc b gy nh ni l nj nk">1+1<br/>  for(i in 1:10){if(!i%%2){next}<br/>print(i)<br/> }</span></pre><p id="81e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变得更加简洁易读:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="20ad" class="ng mf it nc b gy nh ni l nj nk">1 + 1<br/>for (i in 1:10) {<br/>  if (!i %% 2) {<br/>    next<br/>  }<br/>  print(i)<br/>}</span></pre><h1 id="3f2c" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">RStudio addins</h1><p id="fb27" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">RStudio 插件是一些扩展，它们为从 RStudio 中执行高级 R 函数提供了一种简单的机制。更简单地说，当执行一个插件(通过单击插件菜单中的一个按钮)时，相应的代码被执行，而您不必编写代码。RStudio 插件的优势在于，与您自己编写代码相比，它们允许您更轻松地执行复杂和高级的代码。</p><p id="d08b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最常用的 addin 可能是<code class="fe nu nv nw nc b"><a class="ae ky" href="https://www.statsandr.com/blog/rstudio-addins-or-how-to-make-your-coding-life-easier/#esquisse" rel="noopener ugc nofollow" target="_blank">{esquisse}</a></code> <a class="ae ky" href="https://www.statsandr.com/blog/rstudio-addins-or-how-to-make-your-coding-life-easier/#esquisse" rel="noopener ugc nofollow" target="_blank"> addin </a>，它允许用<code class="fe nu nv nw nc b"><a class="ae ky" href="https://www.statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">{ggplot2}</a></code> <a class="ae ky" href="https://www.statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">包</a>以用户友好和交互的方式绘制图形，而不必自己编写代码。</p><p id="6f35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">RStudio 插件种类繁多，需要更详细的解释，所以我写了一篇文章专门讨论这些插件。见文章<a class="ae ky" href="https://www.statsandr.com/blog/rstudio-addins-or-how-to-make-your-coding-life-easier/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><h1 id="d4d7" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated"><code class="fe nu nv nw nc b">{pander}</code>和<code class="fe nu nv nw nc b">{report}</code>为美学</h1><p id="a41d" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated"><code class="fe nu nv nw nc b">{pander}</code>包中的<code class="fe nu nv nw nc b">pander()</code>功能对于<a class="ae ky" href="https://statsandr.com/blog/getting-started-in-r-markdown/" rel="noopener ugc nofollow" target="_blank"> R Markdown </a>文档和报告非常有用。这实际上不是一条捷径，但它极大地提高了 R 输出的美观性。</p><p id="401c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，参见下面独立性<a class="ae ky" href="https://statsandr.com/blog/chi-square-test-of-independence-in-r/" rel="noopener ugc nofollow" target="_blank">卡方测试</a>的默认输出与使用<code class="fe nu nv nw nc b">pander()</code>函数(使用<code class="fe nu nv nw nc b"><a class="ae ky" href="https://statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">{ggplot2}</a></code> <a class="ae ky" href="https://statsandr.com/blog/graphics-in-r-with-ggplot2/" rel="noopener ugc nofollow" target="_blank">包</a>中的<code class="fe nu nv nw nc b">diamonds</code>数据集)的相同测试的输出之间的差异:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="ef17" class="ng mf it nc b gy nh ni l nj nk">library(ggplot2)<br/>dat &lt;- diamonds</span><span id="14b0" class="ng mf it nc b gy oc ni l nj nk">test &lt;- chisq.test(table(dat$cut, dat$color))<br/>test</span><span id="f721" class="ng mf it nc b gy oc ni l nj nk">## <br/>##  Pearson's Chi-squared test<br/>## <br/>## data:  table(dat$cut, dat$color)<br/>## X-squared = 310.32, df = 24, p-value &lt; 2.2e-16</span><span id="00b8" class="ng mf it nc b gy oc ni l nj nk">library(pander)<br/>pander(test)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/290c4715c5aab31d651cb657ee57ae33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LEQ41i52Yjpf3Ke4YtExjA.png"/></div></div></figure><p id="07eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要的所有信息都显示在一个雅致的表格中。<code class="fe nu nv nw nc b">pander()</code>函数适用于许多统计测试(不是所有测试，但我没有在 R 中的所有可用测试中尝试过)和回归模型:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="76e9" class="ng mf it nc b gy nh ni l nj nk"># Linear model with lm()<br/>model &lt;- lm(price ~ carat + x + y + z,<br/>            data = dat)<br/>model</span><span id="86c5" class="ng mf it nc b gy oc ni l nj nk">## <br/>## Call:<br/>## lm(formula = price ~ carat + x + y + z, data = dat)<br/>## <br/>## Coefficients:<br/>## (Intercept)        carat            x            y            z  <br/>##      1921.2      10233.9       -884.2        166.0       -576.2</span><span id="89e7" class="ng mf it nc b gy oc ni l nj nk">pander(model)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/196330fa9cbb16ccd5e06bd2123b33f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j3BUwRD5zytgtyAj7ITQ4Q.png"/></div></div></figure><p id="a55f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">pander 函数还制作数据集、表格、向量等。在 R Markdown 输出中可读性更好。例如，请参见下面的差异:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7c89" class="ng mf it nc b gy nh ni l nj nk">head(dat) # first 6 observations of a dataset</span><span id="d3b0" class="ng mf it nc b gy oc ni l nj nk">## # A tibble: 6 x 10<br/>##   carat cut       color clarity depth table price     x     y     z<br/>##   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;<br/>## 1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43<br/>## 2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31<br/>## 3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31<br/>## 4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63<br/>## 5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75<br/>## 6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48</span><span id="708d" class="ng mf it nc b gy oc ni l nj nk">pander(head(dat))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/8c4f218a68a45dc5cb1e7b896b98899d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04MvueYJwV3lv4F6FX6W0Q.png"/></div></div></figure><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="06b9" class="ng mf it nc b gy nh ni l nj nk">summary(dat) # main descriptive statistics</span><span id="32a8" class="ng mf it nc b gy oc ni l nj nk">##      carat               cut        color        clarity          depth      <br/>##  Min.   :0.2000   Fair     : 1610   D: 6775   SI1    :13065   Min.   :43.00  <br/>##  1st Qu.:0.4000   Good     : 4906   E: 9797   VS2    :12258   1st Qu.:61.00  <br/>##  Median :0.7000   Very Good:12082   F: 9542   SI2    : 9194   Median :61.80  <br/>##  Mean   :0.7979   Premium  :13791   G:11292   VS1    : 8171   Mean   :61.75  <br/>##  3rd Qu.:1.0400   Ideal    :21551   H: 8304   VVS2   : 5066   3rd Qu.:62.50  <br/>##  Max.   :5.0100                     I: 5422   VVS1   : 3655   Max.   :79.00  <br/>##                                     J: 2808   (Other): 2531                  <br/>##      table           price             x                y         <br/>##  Min.   :43.00   Min.   :  326   Min.   : 0.000   Min.   : 0.000  <br/>##  1st Qu.:56.00   1st Qu.:  950   1st Qu.: 4.710   1st Qu.: 4.720  <br/>##  Median :57.00   Median : 2401   Median : 5.700   Median : 5.710  <br/>##  Mean   :57.46   Mean   : 3933   Mean   : 5.731   Mean   : 5.735  <br/>##  3rd Qu.:59.00   3rd Qu.: 5324   3rd Qu.: 6.540   3rd Qu.: 6.540  <br/>##  Max.   :95.00   Max.   :18823   Max.   :10.740   Max.   :58.900  <br/>##                                                                   <br/>##        z         <br/>##  Min.   : 0.000  <br/>##  1st Qu.: 2.910  <br/>##  Median : 3.530  <br/>##  Mean   : 3.539  <br/>##  3rd Qu.: 4.040  <br/>##  Max.   :31.800  <br/>##</span><span id="9e18" class="ng mf it nc b gy oc ni l nj nk">pander(summary(dat))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/9aacff759e62d8e69c45aaaef3c0dbf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6uBieg5j2aRtgU5LEZqY6A.png"/></div></div></figure><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="c8c0" class="ng mf it nc b gy nh ni l nj nk">table(dat$cut, dat$color) # contingency table</span><span id="2cfa" class="ng mf it nc b gy oc ni l nj nk">##            <br/>##                D    E    F    G    H    I    J<br/>##   Fair       163  224  312  314  303  175  119<br/>##   Good       662  933  909  871  702  522  307<br/>##   Very Good 1513 2400 2164 2299 1824 1204  678<br/>##   Premium   1603 2337 2331 2924 2360 1428  808<br/>##   Ideal     2834 3903 3826 4884 3115 2093  896</span><span id="bc96" class="ng mf it nc b gy oc ni l nj nk">pander(table(dat$cut, dat$color))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/f95ccf8ca46f86b042b182a0da9a8f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3VSBXDY_FfwW5zMGJsFrQ.png"/></div></div></figure><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="b5de" class="ng mf it nc b gy nh ni l nj nk">names(dat) # variable names</span><span id="1975" class="ng mf it nc b gy oc ni l nj nk">##  [1] "carat"   "cut"     "color"   "clarity" "depth"   "table"   "price"  <br/>##  [8] "x"       "y"       "z"</span><span id="4ad3" class="ng mf it nc b gy oc ni l nj nk">pander(names(dat))</span></pre><p id="fcad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="og">克拉</em>，<em class="og">切工</em>，<em class="og">颜色</em>，<em class="og">净度</em>，<em class="og">深度</em>，<em class="og">表</em>，<em class="og">价格</em>，<em class="og"> x </em>，<em class="og"> y </em>和<em class="og"> z </em></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d45c" class="ng mf it nc b gy nh ni l nj nk">rnorm(4) # generates 4 observations from a standard normal distribution</span><span id="5231" class="ng mf it nc b gy oc ni l nj nk">## [1] -1.8170575  0.2089859  1.0480589  0.1609936</span><span id="4928" class="ng mf it nc b gy oc ni l nj nk">pander(rnorm(4))</span></pre><p id="6112" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="og"> 1.291 </em>、<em class="og"> 0.1842 </em>、<em class="og"> -0.1146 </em>和<em class="og"> -1.006 </em></p><p id="dd4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个技巧在编写<a class="ae ky" href="https://statsandr.com/blog/getting-started-in-r-markdown/" rel="noopener ugc nofollow" target="_blank"> R Markdown </a>时特别有用，因为生成的文档看起来会更好。</p><p id="e921" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个美观的技巧是<code class="fe nu nv nw nc b">{report}</code>包中的<code class="fe nu nv nw nc b">report()</code>函数。</p><p id="b671" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与<code class="fe nu nv nw nc b">pander()</code>类似，<code class="fe nu nv nw nc b">report()</code>函数允许以更易读的方式报告测试结果——但它也为您解释结果。例如，参见<a class="ae ky" href="https://statsandr.com/blog/correlation-coefficient-and-correlation-test-in-r/" rel="noopener ugc nofollow" target="_blank">相关性测试</a>:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="0dcb" class="ng mf it nc b gy nh ni l nj nk"># install.packages("remotes")<br/># remotes::install_github("easystats/report") # You only need to do that once<br/>library("report") # Load the package every time you start R</span><span id="c71d" class="ng mf it nc b gy oc ni l nj nk">report(cor.test(dat$price, dat$carat))</span><span id="9f21" class="ng mf it nc b gy oc ni l nj nk">## Effect sizes were labelled following Funder's (2019) recommendations.<br/>## <br/>## The Pearson's product-moment correlation between dat$price and dat$carat is positive, significant and very large (r = 0.92, 95% CI [0.92, 0.92], t(53938) = 551.41, p &lt; .001)</span></pre><p id="f6bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试结果与<em class="og"> p </em>值和相关系数一起显示并解释给您。</p><p id="39c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，<code class="fe nu nv nw nc b">report()</code>功能可用于其他分析。在软件包的<a class="ae ky" href="https://easystats.github.io/report/" rel="noopener ugc nofollow" target="_blank">文档</a>中查看更多示例。</p><h1 id="8196" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">用<code class="fe nu nv nw nc b">{equatiomatic}</code>提取方程模型</h1><p id="d573" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如果您经常需要在 R Markdown 报告中编写与统计模型相对应的方程，<code class="fe nu nv nw nc b"><a class="ae ky" href="https://cran.r-project.org/package=equatiomatic" rel="noopener ugc nofollow" target="_blank">{equatiomatic}</a></code>将帮助您节省时间。</p><p id="ee06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个多元线性回归的基本示例，使用与上述相同的数据集(即<code class="fe nu nv nw nc b">diamonds</code>来自<code class="fe nu nv nw nc b">{ggplot2}</code>):</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="8dab" class="ng mf it nc b gy nh ni l nj nk"># install.packages("equatiomatic")<br/>library(equatiomatic)</span><span id="6266" class="ng mf it nc b gy oc ni l nj nk"># fit a basic multiple linear regression model<br/>model &lt;- lm(price ~ carat + depth,<br/>            data = dat)</span><span id="1de4" class="ng mf it nc b gy oc ni l nj nk">extract_eq(model,<br/>           use_coefs = TRUE)</span></pre><p id="b279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">价格= 4045.33 + 7765.14 克拉-102.17 克拉(深)+ ϵ</p><p id="afae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果方程很长，您可以通过添加参数<code class="fe nu nv nw nc b">wrap = TRUE</code>在多行中显示它:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="e0c1" class="ng mf it nc b gy nh ni l nj nk">model &lt;- lm(price ~ carat + x + y + z + depth,<br/>            data = dat)</span><span id="cf8b" class="ng mf it nc b gy oc ni l nj nk">extract_eq(model,<br/>           use_coefs = TRUE,<br/>           wrap = TRUE)</span></pre><p id="f6ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">价格= 12196.69 + 10615.5 克拉-1369.67 克拉+ 97.6 克拉+ 64.2 克拉-156.62 克拉(深)+ ϵ</p><p id="1938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意:</p><ul class=""><li id="cade" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">如果您在 R Markdown 中使用它，您需要为该特定代码块添加<code class="fe nu nv nw nc b">results = 'asis'</code>,否则该方程将被呈现为 LaTeX 方程</li><li id="2b8b" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">在撰写本文时，它仅适用于 PDF 和 HTML 输出，不适用于 Word</li><li id="78ea" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">每行的默认术语数是 4。您可以使用<code class="fe nu nv nw nc b">terms_per_line</code>参数来更改它:</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="5cdb" class="ng mf it nc b gy nh ni l nj nk">extract_eq(model,<br/>           use_coefs = TRUE,<br/>           wrap = TRUE,<br/>           terms_per_line = 2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/5e5a1d52e2fa6473cb81c013d1058f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*7bdsqyrGeaOvPrkOB7d7Qw.png"/></div></figure><ul class=""><li id="05f6" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><code class="fe nu nv nw nc b">{equatiomatic}</code>也支持逻辑回归的输出。在<a class="ae ky" href="https://cran.r-project.org/web/packages/equatiomatic/vignettes/intro-equatiomatic.html" rel="noopener ugc nofollow" target="_blank">插图</a>中查看所有支持的型号</li><li id="3db8" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">如果您需要没有实际参数估计的理论模型，请删除<code class="fe nu nv nw nc b">use_coefs</code>参数:</li></ul><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d9da" class="ng mf it nc b gy nh ni l nj nk">extract_eq(model,<br/>           wrap = TRUE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/0294d61e98c53d4688539ae8b909f940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKC39-cai16UQFpnyav51Q.png"/></div></figure><p id="9c76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，我更喜欢用β0 作为截距，而不是α。你可以用<code class="fe nu nv nw nc b">intercept = "beta"</code>论点来改变这一点:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="4d3a" class="ng mf it nc b gy nh ni l nj nk">extract_eq(model,<br/>           wrap = TRUE,<br/>           intercept = "beta")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/0f72ef671f094bf17183e27b90189394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du3xZPhNvRTNQ_F5UUzq_Q.png"/></div></div></figure><h1 id="c7cd" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">管道操作员<code class="fe nu nv nw nc b">%&gt;%</code></h1><p id="54db" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">如果您经常使用<code class="fe nu nv nw nc b">{dplyr}</code>、<code class="fe nu nv nw nc b">{tidyverse}</code>或<code class="fe nu nv nw nc b">{magrittr}</code>软件包，以下是管道操作员<code class="fe nu nv nw nc b">%&gt;%</code>的快捷方式:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="e7ee" class="ng mf it nc b gy nh ni l nj nk">command + Shift + M on Mac<br/>Ctrl + Shift + M on Windows</span></pre><h1 id="ea9f" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">其他人</h1><p id="d886" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">与许多其他程序类似，您也可以使用:</p><ul class=""><li id="6bd4" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated">Mac 上的<code class="fe nu nv nw nc b">command + Shift + N</code>和 Windows 上的<code class="fe nu nv nw nc b">Ctrl + Shift + N</code>打开一个新的 R 脚本</li><li id="924e" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">Mac 上的<code class="fe nu nv nw nc b">command + S</code>和 Windows 上的<code class="fe nu nv nw nc b">Ctrl + S</code>保存您当前的脚本或 R Markdown 文档</li></ul><p id="4a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。我希望这些提示和技巧对你有用。如果你正在使用其他的，请在评论区分享。</p><p id="5bd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">和往常一样，如果您有与本文主题相关的问题或建议，请将其添加为评论，以便其他读者可以从讨论中受益。</p><p id="4fea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">相关文章:</strong></p><ul class=""><li id="0588" class="nl nm it lb b lc ld lf lg li nn lm no lq np lu nq nr ns nt bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/an-efficient-way-to-install-and-load-r-packages/" rel="noopener ugc nofollow" target="_blank">安装和加载 R 包的有效方法</a></li><li id="a7a9" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated">我的数据符合正态分布吗？关于最广泛使用的分布以及如何检验 R 中的正态性的注释</li><li id="36d0" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/fisher-s-exact-test-in-r-independence-test-for-a-small-sample/" rel="noopener ugc nofollow" target="_blank">R 中的费雪精确检验:小样本的独立性检验</a></li><li id="5d3e" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/chi-square-test-of-independence-in-r/" rel="noopener ugc nofollow" target="_blank">R 中独立性的卡方检验</a></li><li id="19dd" class="nl nm it lb b lc nx lf ny li nz lm oa lq ob lu nq nr ns nt bi translated"><a class="ae ky" href="https://www.statsandr.com/blog/how-to-create-a-timeline-of-your-cv-in-r/" rel="noopener ugc nofollow" target="_blank">如何在简历中创建简历时间线</a></li></ul></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><p id="9f9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="og">原载于 2020 年 1 月 21 日 https://statsandr.com</em><a class="ae ky" href="https://statsandr.com/blog/tips-and-tricks-in-rstudio-and-r-markdown/" rel="noopener ugc nofollow" target="_blank"><em class="og"/></a><em class="og">。</em></p></div></div>    
</body>
</html>