<html>
<head>
<title>Calculating distance between two geo-locations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python计算两个地理位置之间的距离</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/calculating-distance-between-two-geolocations-in-python-26ad3afe287b?source=collection_archive---------5-----------------------#2020-06-13">https://towardsdatascience.com/calculating-distance-between-two-geolocations-in-python-26ad3afe287b?source=collection_archive---------5-----------------------#2020-06-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/df6fc2af73d4a57acd43b4ac23c52585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9SybXmOpOSi8l7v7"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@dead____artist?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">捕捉人心。</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="1b29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几个月前，我在从事一个可视化地理位置数据(即纬度和经度)的自由职业项目，在这个项目中，我必须在地图上可视化中心设施和客户位置。根据一个客户的要求，我必须找到距离不同设施3公里范围内的所有客户位置。为此，我必须计算所有位置之间的距离。这是我第一次使用原始坐标，所以我尝试了一个天真的尝试，使用欧几里德距离来计算距离，但很快意识到这种方法是错误的。</p><p id="1c25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">欧几里得距离适用于平面，就像笛卡尔平面一样，然而，地球不是平的。所以我们必须使用一种特殊类型的公式，称为<strong class="kf ir">哈弗辛距离。</strong></p><blockquote class="lb lc ld"><p id="fe78" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">哈弗线距离<strong class="kf ir"> </strong>可以定义为<strong class="kf ir"> </strong>地球表面两个位置之间的角距离。</p></blockquote><p id="39d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哈弗线距离可以计算为:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/01cb0b2f6045b0c1250f085f18989c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dugEP7ituXMnsNOF7Ve7Qg.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">来源:<a class="ae kc" href="https://en.wikipedia.org/wiki/Haversine_formula" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Haversine_formula</a></p></figure><p id="ce76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来令人生畏，是的，如果你必须使用原始的python代码来应用它，这将是令人生畏的，但是感谢python充满活力的开发者社区，我们有一个专门的库来计算称为haversine的Haversine距离(使用python的好处之一)。</p><p id="b6f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">介绍完毕，让我们开始实施吧:</p><p id="b81a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤1:安装“哈弗辛”</strong></p><p id="4e89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在jupyter笔记本上安装以下命令的haversine类型。</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="ee29" class="ls lt iq lo b gy lu lv l lw lx">!pip install haversine</span></pre><p id="e927" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您通过anaconda提示符安装，请删除“！”从上面的命令中标记。</p><p id="c255" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤2:导入库</strong></p><p id="d32d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装完库后，导入它</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="d3b2" class="ls lt iq lo b gy lu lv l lw lx">import haversine as hs</span></pre><p id="ef53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">步骤3:计算两个位置之间的距离</strong></p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="9d43" class="ls lt iq lo b gy lu lv l lw lx">loc1=(28.426846,77.088834)<br/>loc2=(28.394231,77.050308)<br/>hs.haversine(loc1,loc2)</span></pre><p id="3adc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">产量:5.229712941541709</p><p id="e347" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，哈弗辛函数返回以千米为单位的距离。如果要将距离的单位改为英里或米，可以使用如下所示的哈弗辛函数的单位参数:</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="bc0e" class="ls lt iq lo b gy lu lv l lw lx">from haversine import Unit<br/>#To calculate distance in meters <br/>hs.haversine(loc1,loc2,unit=Unit.METERS)</span></pre><p id="1501" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出:58660 . 68868686861</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="6e78" class="ls lt iq lo b gy lu lv l lw lx">#To calculate distance in miles <br/>hs.haversine(loc1,loc2,unit=Unit.MILES)</span></pre><p id="49bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">产量:3.245363636765</p><p id="7972" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，你也可以用英寸来计算距离。</p><p id="43e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果使用原始位置数据，计算两个位置之间的距离是一项基本要求。它不仅能帮助你更好地可视化，还能为你的机器学习算法提供优势。它可能会给你的模型增加一个优势，并通过增加一个新的维度“距离”来提高它的整体效率。</p><p id="cf24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我在本文前面提到的项目的输出:</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/e14c4834688eaa615ffb2531eb13ce94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1S6_-kwWLv1JaJ-VcjBncA.png"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</p></figure><p id="d7cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想看完整的代码，你可以访问我的github页面:<a class="ae kc" href="https://github.com/ashutoshb418/Foodies-Visualization" rel="noopener ugc nofollow" target="_blank">https://github.com/ashutoshb418/Foodies-Visualization</a></p></div></div>    
</body>
</html>