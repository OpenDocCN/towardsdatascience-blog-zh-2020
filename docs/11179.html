<html>
<head>
<title>Pareto Distributions and Monte Carlo Simulations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">帕累托分布和蒙特卡罗模拟</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pareto-distributions-and-monte-carlo-simulations-bee46113211d?source=collection_archive---------44-----------------------#2020-08-03">https://towardsdatascience.com/pareto-distributions-and-monte-carlo-simulations-bee46113211d?source=collection_archive---------44-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5fcc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用帕累托分布模拟网页浏览</h2></div><p id="6a06" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">帕累托分布无处不在。它也被称为 80/20 法则。举几个例子:</p><ul class=""><li id="4be3" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">20%的网站获得了 80%的流量。</li><li id="d158" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">全球收入最高的 20%的人赚了 80%的收入。</li><li id="e21d" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">你 80%的时间穿 20%的衣服。</li></ul><p id="06fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">传统上，我们认为统计范围的假设分布是一个<strong class="kk iu">正态分布</strong>，即<em class="ls">均值=中位数=众数</em>的分布。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/239cd53710dc8d6c5d72643bd1248589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*XdzfMFyTOVbyCjBw2jRaJQ.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">资料来源:RStudio</p></figure><p id="bf77" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，我们在周围观察到的许多现象往往更接近帕累托分布。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/38b36fe477a03a4f59c2e7e200633af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*ERN4ZSdDO8oeMnIGSqhiIA.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:Jupyter 笔记本输出</p></figure><p id="af47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个特定的例子中，我们可以看到一个严重右尾的分布，即大多数具有较低值的观察值(如 x 轴所定义的)倾向于图表的左侧，而少数具有较高值的观察值倾向于图表的右侧。</p><h1 id="da7a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用蒙特卡罗模拟法模拟网页浏览</h1><p id="fa82" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">让我们以一段时间内的网页浏览量为例。这是一个曲线图，显示了 2016 年 1 月至 2020 年 8 月“地震”一词随时间的波动，来自维基媒体 Toolforge:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/26e6f75113100593095d598e4261936b.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*-mm7b0u1-LXkMV-g_-i3Uw.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:维基媒体工具锻造</p></figure><p id="336f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，在某些时段，页面浏览量会出现“峰值”——可能是在世界上某个地方正在发生地震的时候。</p><p id="81b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这正是我们所期待的——这是一个搜索词的例子，它在某些时候有更高的页面浏览量。事实上，许多网页遵循这种模式，流量或多或少遵循一种稳定的模式——伴随着突然的“峰值”。</p><p id="adea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们画出这个数据的直方图。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/e1775ebec7d54598e1e2b53256767c2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*-gO_F5xngfB5HOJ4wQIO8Q.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:Jupyter 笔记本输出</p></figure><p id="b5bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的例子中，我们看到某一天的大部分页面浏览量都低于<strong class="kk iu"> 10，000 </strong>，但也有极少数情况超过了这个数字。</p><p id="57b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在选定的时间段内，某一天的最大页面浏览量为<strong class="kk iu"> 31，520 </strong>。这很接近帕累托分布。</p><p id="2122" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">试图用传统的时间序列工具如 ARIMA 来预测页面浏览量是徒劳的。这是因为不可能提前知道特定的流量高峰将在何时出现，因为它严重依赖于外部环境，而与过去的数据无关。</p><p id="0e9f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个更有意义的练习是运行模拟来预测假设帕累托分布的情况下人们可能期望看到的流量范围。</p><p id="a498" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">帕累托分布在 Python 中的调用如下:</p><pre class="lu lv lw lx gt nf ng nh ni aw nj bi"><span id="5e49" class="nk mh it ng b gy nl nm l nn no">numpy.random.pareto(<em class="ls">a</em>, <em class="ls">size=None</em>)</span></pre><p id="1d48" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> a </strong>表示分布的形状，size 设置为<strong class="kk iu">10000</strong>，即从分布中产生 10000 个随机数用于蒙特卡洛模拟。</p><p id="cd3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">计算原始时间序列的平均值和标准偏差。</p><pre class="lu lv lw lx gt nf ng nh ni aw nj bi"><span id="f2a8" class="nk mh it ng b gy nl nm l nn no">mu=np.mean(value)<br/>sigma=np.std(value)</span></pre><p id="c481" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">时间序列的均值为<strong class="kk iu"> 5224 </strong>，标准差为<strong class="kk iu"> 2057 </strong>。</p><p id="2db7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用这些值，可以使用这些参数以及来自假设的帕累托分布的随机采样来生成蒙特卡罗模拟。</p><pre class="lu lv lw lx gt nf ng nh ni aw nj bi"><span id="6265" class="nk mh it ng b gy nl nm l nn no">t = np.random.pareto(a, 10000) * (mu+sigma)<br/>t</span></pre><p id="e0e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如上所述，<strong class="kk iu"> a </strong>的值取决于分布的形状。让我们首先将它设置为<strong class="kk iu"> 3 </strong>。</p><p id="ddab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是以百分位数表示的分布记录值:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d97710f303a6374dbb6101932b340ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*G2DIrN10xaNP3YKgHPdt6Q.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:Jupyter 笔记本输出</p></figure><p id="4804" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到<strong class="kk iu"> a = 3 </strong>时记录的最大值超过 35 万，远远高于时间序列记录的最大值。</p><p id="fe1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们设置<strong class="kk iu"> a = 4 </strong>会发生什么？</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/121224277a9cc659edcdc529b243ac0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*6xNpGD2hkj7gdRzZ9mMgow.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:Jupyter 笔记本</p></figure><p id="9d1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在看到记录的最大值现在超过了<strong class="kk iu"> 60，000 </strong>，这仍然比时间序列记录的最大值高很多。</p><p id="dd1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们试试<strong class="kk iu"> a = 5 </strong>。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/36586dd92a7342dd2118c3b0dfcae782.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*AB8j_xl4AHQ0h9jL4ZJoFA.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">来源:Jupyter 笔记本输出</p></figure><h1 id="e736" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">解释</h1><p id="f01b" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">最大页面浏览量刚刚超过 35，000，这更符合我们在原始时间序列中看到的情况。</p><p id="4680" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，在这种情况下，我们只查看 2016 年以后的时间序列数据。许多最严重的地震实际上发生在 2016 年之前。</p><p id="4aa7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，让我们假设像 2004 年印度洋地震和海啸那样严重的地震将在今天发生——我们有理由预计对术语<strong class="kk iu">“地震”</strong>的页面浏览兴趣将比我们自 2016 年以来观察到的大得多。</p><p id="ddd9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们假设帕累托分布有<strong class="kk iu"> a = 3 </strong>，那么模型表明这个词的页面浏览量可能会超过<strong class="kk iu"> 350，000 </strong>。</p><p id="1f55" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这方面，蒙特卡洛模拟允许我们检查超出已记录的时间序列数据界限的情况。</p><p id="1eb7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">地震(不幸的是)比互联网存在的时间要长得多——因此我们没有办法测量在记录最强烈地震的时候这个搜索词的页面访问量会是什么样的。</p><p id="f68f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也就是说，结合对最接近的理论分布的建模进行蒙特卡罗模拟，可以允许对特定情况下时间序列<strong class="kk iu">的界限</strong>进行强场景分析。</p><h1 id="1a7d" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="b860" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">在本文中，您已经看到:</p><ul class=""><li id="f6ca" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">什么是帕累托分布</li><li id="cc54" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何在 Python 中生成这样的分布</li><li id="f20f" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何将帕累托分布与蒙特卡洛模拟结合起来</li></ul><p id="84b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">非常感谢你的时间。一如既往，非常感谢任何反馈、想法或问题。请随意在评论区留下它们。</p><p id="f464" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ls">免责声明:本文是在“原样”的基础上编写的，没有任何担保。本文旨在提供数据科学概念的概述，不应以任何方式解释为专业建议。</em></p><h1 id="66b7" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">参考</h1><ul class=""><li id="678e" class="le lf it kk b kl my ko mz kr nr kv ns kz nt ld lj lk ll lm bi translated"><a class="ae nu" href="https://machinelearningmastery.com/monte-carlo-sampling-for-probability/" rel="noopener ugc nofollow" target="_blank">机器学习掌握:概率的蒙特卡罗抽样</a></li><li id="8f0c" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae nu" href="http://pageperso.lif.univ-mrs.fr/~francois.denis/IAAM1/numpy-html-1.14.0/reference/generated/numpy.random.pareto.html" rel="noopener ugc nofollow" target="_blank"> Numpy v1.14 手册:numpy.random.pareto </a></li><li id="a6f0" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae nu" href="https://stackoverflow.com/questions/8441882/matplotlib-draw-lines-from-x-axis-to-points" rel="noopener ugc nofollow" target="_blank">堆栈溢出:Matplotlib —从 x 轴到点画线</a></li><li id="5e94" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae nu" rel="noopener" target="_blank" href="/monte-carlo-simulations-in-python-analysing-web-page-views-b6dbec2ba683">走向数据科学 Python 中的蒙特卡罗模拟:分析网页浏览量</a></li><li id="0a22" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae nu" href="https://pageviews.toolforge.org/?project=en.wikipedia.org&amp;platform=all-access&amp;agent=user&amp;redirects=0&amp;start=2015-07-01&amp;end=2020-08-02&amp;pages=Earthquake" rel="noopener ugc nofollow" target="_blank"> Wikimedia Toolforge:浏览量分析</a></li></ul></div></div>    
</body>
</html>