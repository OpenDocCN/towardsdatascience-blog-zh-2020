<html>
<head>
<title>Streamlit + Heroku = Magic?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Streamlit + Heroku = Magic？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/streamlit-heroku-magic-5e4a7192929a?source=collection_archive---------62-----------------------#2020-06-24">https://towardsdatascience.com/streamlit-heroku-magic-5e4a7192929a?source=collection_archive---------62-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/4fa8a36c714ad79345146385ebd43bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AUfc53cMesJNasjr"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">照片由<a class="ae jd" href="https://unsplash.com/@rhett__noonan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">瑞德·卫斯理</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><div class=""/><div class=""><h2 id="d758" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">如何轻松地在Heroku上部署您的streamlit应用程序。</h2></div><p id="572f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我不知道你怎么想，但在过去的几天里，我一直在玩<a class="ae jd" href="https://www.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> streamlit </a>，我不得不说我对它印象深刻。</p><p id="3bc7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它速度快，反应灵敏，易于掌握。<strong class="kx jh">但最棒的是，您可以编辑您的python脚本，并看到您的streamlit应用程序实时自动更新。在我看来，与streamlit一起工作是非常愉快的。</strong></p><p id="5485" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，一旦你构建了你的应用程序，你为什么不部署它，让全世界都能看到它呢？这是为您的数据科学或数据分析产品组合添加交互性的绝佳方式。</p><p id="22c3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本教程将逐步介绍如何在Heroku上部署您的streamlit应用程序。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h2 id="9b7f" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">目录</h2><ol class=""><li id="5f73" class="mr ms jg kx b ky mt lb mu le mv li mw lm mx lq my mz na nb bi translated">第1部分:您需要哪些文件？</li><li id="1c91" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">第2部分:通过Heroku CLI(终端)使用Heroku。</li><li id="e72c" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">要避免的常见陷阱</li><li id="323d" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">第3部分:通过Github库使用Heroku。</li></ol></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="25e3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh">注意:我假设您已经安装了streamlit，并且已经知道一点如何使用它。</em></p><h1 id="3cde" class="ni lz jg bd ma nj nk nl md nm nn no mg km np kn mj kp nq kq mm ks nr kt mp ns bi translated">第1部分:您需要哪些文件？</h1><p id="5b04" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">在Heroku上启动streamlit应用程序需要四个基本组件。</p><ol class=""><li id="f2f1" class="mr ms jg kx b ky kz lb lc le nw li nx lm ny lq my mz na nb bi translated">setup.sh</li><li id="4e44" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">requirements.txt</li><li id="687e" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">Procfile</li><li id="605c" class="mr ms jg kx b ky nc lb nd le ne li nf lm ng lq my mz na nb bi translated">你的应用程序</li></ol><h2 id="5e76" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">setup.sh —不需要凭据</h2><figure class="nz oa ob oc gt is"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e499" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh">注意:您不需要将这个文件命名为setup.sh，它可以是任何名称，但是必须以。sh文件扩展名。然而，将其命名为setup.sh似乎是一种规范。</em></p><h2 id="d21a" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">requirements.txt</h2><p id="2041" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">这个文件基本上列出了我们将在streamlit应用程序中使用的所有特定python插件。可能看起来是这样的。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="ba97" class="ly lz jg og b gy ok ol l om on">newspaper3k==0.2.8<br/>streamlit==0.61.0<br/>nltk==3.4.5</span></pre><p id="b269" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在您的终端上简单使用<em class="nh"> pip冻结</em>功能可能很有诱惑力。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="cc2f" class="ly lz jg og b gy ok ol l om on">pip freeze &gt; requirements.txt </span></pre><p id="f88c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，我发现当你上传你的申请到heroku时，有时会引起很多不必要的问题。</p><p id="23e5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh">注意:我在我的基本环境中测试了这个pip冻结功能，因此一个</em> <strong class="kx jh"> <em class="nh">提示</em> </strong> <em class="nh">将为您的新streamlit应用程序创建一个新的python环境，然后安装所需的python插件。</em></p><h2 id="7076" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">Procfile</h2><p id="6906" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated"><em class="nh">注意:将该文件命名为Procfile，不要在其后添加任何扩展名。这是一个标准的文本文件。</em></p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="530e" class="ly lz jg og b gy ok ol l om on">web: sh setup.sh &amp;&amp; streamlit run your_application.py</span></pre><h2 id="04ab" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">你的应用程序</h2><p id="24f3" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">耗时的部分是构建您的streamlit应用程序，这是作为python脚本存储的。</p><p id="7a3d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于本教程，我基于我在<a class="ae jd" rel="noopener" target="_blank" href="/the-easy-way-to-web-scrape-articles-online-d28947fc5979">网上抓取文章</a>上的上一篇文章制作了一个简单的python应用程序。</p><div class="ip iq gp gr ir oo"><a rel="noopener follow" target="_blank" href="/the-easy-way-to-web-scrape-articles-online-d28947fc5979"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd jh gy z fp ot fr fs ou fu fw jf bi translated">网上搜集文章的简单方法</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在我的朋友newspaper3k插件的一点帮助下，我们可以把来自不同新闻渠道的文章集合起来…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">towardsdatascience.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ix oo"/></div></div></a></div><figure class="nz oa ob oc gt is"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9bba" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">在我们继续之前，确保所有这些文件都在一个我们可以在终端中导航到的特定文件夹中。</strong></p><h1 id="1040" class="ni lz jg bd ma nj nk nl md nm nn no mg km np kn mj kp nq kq mm ks nr kt mp ns bi translated">第2部分:通过Heroku CLI(终端)使用Heroku。</h1><p id="2e3b" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">我想你们知道如何注册一个Heroku账户。</p><p id="4187" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh">注意:在我们开始在终端上使用Heroku之前，我建议导航到本教程第1部分的文件所在的文件夹。</em></p><h2 id="8928" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">第一步:通过你的终端登录Heroku。</h2><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="dd36" class="ly lz jg og b gy ok ol l om on">$ heroku login</span></pre><p id="d5c6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您将被重定向到您可以登录的网页，或者如果您已经登录到您的web浏览器，它将自动登录到您创建的帐户。</p><h2 id="d550" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤2:创建一个新的Heroku实例</h2><p id="1be3" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">运行下面的代码将自动创建一个带有随机名称的全新Heroku应用程序。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="1615" class="ly lz jg og b gy ok ol l om on">$ heroku create</span></pre><p id="e73b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">或者你可以给它起自己的名字…</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="5f6c" class="ly lz jg og b gy ok ol l om on">$ heroku create name_of_heroku_instance</span></pre><h2 id="78f3" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">第三步:将你的文件推送到新的Heroku应用程序中。</h2><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="99eb" class="ly lz jg og b gy ok ol l om on">$ git push heroku master</span></pre><p id="1dbe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这一部分可能需要一点时间，因为Heroku应用程序正在设置并在服务器上安装所需的python插件。一旦完成，它应该输出这个消息:<em class="nh">远程:验证部署…完成。</em></p><h2 id="ad92" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤4:启动你的应用程序</h2><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="76e2" class="ly lz jg og b gy ok ol l om on">$ heroku open</span></pre><p id="18c6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">瞧，这就对了！如果你按照上面所有的步骤复制了所有的代码。您在heroku上的streamlit应用程序应该如下所示。</p><figure class="nz oa ob oc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pd"><img src="../Images/01392193b544861154ad16a3378e6c17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QkXrYH2SZOYViq_R-cIMkQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">我的Streamlit应用程序是什么样子的。</p></figure><h1 id="876c" class="ni lz jg bd ma nj nk nl md nm nn no mg km np kn mj kp nq kq mm ks nr kt mp ns bi translated">要避免的常见陷阱</h1><p id="0d39" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">有时您可能会忘记已经在您正在处理的文件夹中创建了一个远程heroku应用程序。</p><p id="f01d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要进行检查，请运行以下代码。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="eb83" class="ly lz jg og b gy ok ol l om on">$ git remote -v</span></pre><p id="6a23" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果不同，请删除此远程连接。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="6d24" class="ly lz jg og b gy ok ol l om on">$ git remote rm heroku</span></pre><p id="26c4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后添加正确的heroku地址，您希望您的应用程序托管在这个地址上。</p><pre class="nz oa ob oc gt of og oh oi aw oj bi"><span id="96e4" class="ly lz jg og b gy ok ol l om on">$ git remote add heroku (git.heroku.com/heroku_application.git)</span></pre><h1 id="d2a8" class="ni lz jg bd ma nj nk nl md nm nn no mg km np kn mj kp nq kq mm ks nr kt mp ns bi translated">第3部分:通过Github库使用Heroku。</h1><p id="f0d4" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le nt lg lh li nu lk ll lm nv lo lp lq ij bi translated">也许，你并不是真的想通过你的终端推送你的应用文件。另一种方法是通过Github。但是，这需要通过您选择的web浏览器上的Heroku仪表板来完成。</p><h2 id="7a86" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤1:通过仪表板创建一个新的应用程序</h2><h2 id="0756" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">第二步:点击应用程序</h2><h2 id="26c8" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤3:单击部署选项卡</h2><h2 id="cc4a" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤4:选择Github作为部署方法</h2><figure class="nz oa ob oc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pe"><img src="../Images/51078581b117ecbeab3af6c39f488f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1IIbAEB8hjQ_T2xUPVNvQ.png"/></div></div></figure><h2 id="2e35" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">第5步:搜索GitHub存储库，其中存储了第1部分中的文件。</h2><figure class="nz oa ob oc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pf"><img src="../Images/411791a2d267d962d358c03773625960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lWcWKQxjYp3OgUNjqL24g.png"/></div></div></figure><h2 id="0bb7" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated"><strong class="ak">步骤6:连接到存储库。</strong></h2><figure class="nz oa ob oc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pe"><img src="../Images/4628a141bb8335b116db9750884e83fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21LidYup_k8irHOuekCBzA.png"/></div></div></figure><h2 id="9aa7" class="ly lz jg bd ma mb mc dn md me mf dp mg le mh mi mj li mk ml mm lm mn mo mp mq bi translated">步骤7:在手动部署部分部署分支</h2><figure class="nz oa ob oc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pg"><img src="../Images/83c68928e2bd56f2bcd6229cb2766651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7oty4lO-JjNYJUOE9tvvw.png"/></div></div></figure><p id="c14b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，您可以点击“查看”来查看您的应用程序。</p><p id="041a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">我还建议在自动部署部分启用自动部署。这将自动从你的GitHub推送最新的主分支，只要它有新的版本更新。</strong></p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="f250" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是在Heroku上部署streamlit应用程序的两种方法。</p></div></div>    
</body>
</html>