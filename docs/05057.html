<html>
<head>
<title>How to Build your own Domain-Focused Datasets or Corpora from Wikipedia</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从维基百科建立你自己的领域数据集或语料库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-your-own-datasets-or-corpora-from-wikipedia-3eb35d78baac?source=collection_archive---------35-----------------------#2020-05-01">https://towardsdatascience.com/how-to-build-your-own-datasets-or-corpora-from-wikipedia-3eb35d78baac?source=collection_archive---------35-----------------------#2020-05-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="af98" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">维基百科(Python 库)|美汤| MediaWikiAPI | DBpedia | SPARQL</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c398d9d383d4e232254e03ada3c2496b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*se7Ozg8m0TLnUATs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@fragilejames?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> James L.W </a>拍摄的照片</p></figure><p id="0e14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.wikipedia.org/" rel="noopener ugc nofollow" target="_blank">维基百科</a>是 21 世纪最值得信赖和众包的数字信息财富，如果有任何疑问，我们可以参考它来回答问题，了解网络系列的情节，找到电影演员的生物数据，了解更多关于世界伟大领袖或震撼地球的灾难，了解过去和未来。</p><p id="c62a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太戏剧化了，是吧？</p><p id="942f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">维基百科是一个创建丰富数据集或语料库的伟大平台，因为它有自然语言内容以及名为<a class="ae ky" href="https://wiki.dbpedia.org/" rel="noopener ugc nofollow" target="_blank"> DBpedia </a>的语义结构化数据库。</p><p id="9b3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">本博客讨论了两种简单、快速和轻量级的方法来管理特定领域的数据集或从维基百科构建 coropra 来训练机器学习模型。</em></p><p id="7808" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，让我们来看看这些丰富的知识如何成为你下一个项目的输入数据。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="3947" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">方法 1:使用维基百科的传统抓取</h1><p id="acb0" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这是你一定已经熟悉的东西——网络抓取。旁边还有<a class="ae ky" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank">美汤</a>，维基百科现在有自己的刮痧库(<a class="ae ky" href="https://pypi.org/project/wikipedia/" rel="noopener ugc nofollow" target="_blank"> pypi 链接</a>)。</p><p id="6058" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个简单的程序，使用维基百科，python 库，来抓取内容。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="4d05" class="nf me it nb b gy ng nh l ni nj">import wikipedia</span><span id="0621" class="nf me it nb b gy nk nh l ni nj">results_list = wikipedia.search("&lt;your_search_term&gt;")</span><span id="333a" class="nf me it nb b gy nk nh l ni nj">wiki_search_results = []</span><span id="1e27" class="nf me it nb b gy nk nh l ni nj">for each_result in results_list:<br/>    wiki_page_result = {}<br/>    wiki_page_obj = wikipedia.page(each_result)<br/>    wiki_page_result['title'] = wiki_page_obj.title<br/>    wiki_page_result['content'] = wiki_page_obj.content<br/>    wiki_page_result['url'] = wiki_page_obj.url<br/>    wiki_page_result['links'] = wiki_page_obj.links<br/>    wiki_search_results.append(wiki_page_result)</span></pre><h2 id="b822" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">限制:</h2><p id="9319" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">这种方法的局限性是无论如何都不会刮擦表。</p><h2 id="9b49" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">解决方案:</h2><p id="2afa" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><a class="ae ky" href="https://pypi.org/project/beautifulsoup4/" rel="noopener ugc nofollow" target="_blank"> Beautifulsoup </a>和<a class="ae ky" href="https://pypi.org/project/mediawikiapi/" rel="noopener ugc nofollow" target="_blank"> MediaWikiAPI </a></p><p id="7d7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是使用 MediaWikiAPI 和 Beautifulsoup 从维基百科页面提取表格的示例代码:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="4ec6" class="nf me it nb b gy ng nh l ni nj">from mediawikiapi import MediaWikiAPI<br/>from bs4 import BeautifulSoup</span><span id="e854" class="nf me it nb b gy nk nh l ni nj">mediawikiapi = MediaWikiAPI()    <br/>media_wiki_page = mediawikiapi.page(wiki_page_obj)     </span><span id="f016" class="nf me it nb b gy nk nh l ni nj"># scrape the HTML with BeautifulSoup to find tables   </span><span id="c13c" class="nf me it nb b gy nk nh l ni nj">soup = BeautifulSoup(media_wiki_page.html(), 'html.parser')    <br/>tables = soup.findAll("table", {"class": "wikitable"})</span><span id="41a5" class="nf me it nb b gy nk nh l ni nj">print(tables[0])</span></pre><p id="943c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用维基百科、MediaWikiAPI 和 Beautiful Soup 创建了一个复合代码来抓取维基百科页面。这段代码抓取作为搜索词响应的页面，搜索词基本上是您感兴趣的主题或领域。更深入地说，这段代码还从所有搜索响应页面获取相关链接，并抓取它们的内容。</p><p id="a6f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/royn5618/Corpus_Builder_Wikipedia" rel="noopener ugc nofollow" target="_blank">链接到 GitHub 知识库</a>使用维基百科抓取维基百科内容。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7265" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">方法 2: DBpedia 和 SPARQL</h1><h2 id="edd6" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">DBpedia</h2><p id="fbf3" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">DBpedia 是通过从维基百科项目中提取实体及其关系创建的，并以<a class="ae ky" href="https://en.wikipedia.org/wiki/N-Triples" rel="noopener ugc nofollow" target="_blank"> N-Triples 格式</a>存储。换句话说，DBpedia 是一个<a class="ae ky" href="https://www.w3.org/RDF/" rel="noopener ugc nofollow" target="_blank"> RDF 图</a>数据库。这些数据库的特点是它们在存储数据的同时保留了嵌入的语义关系。</p><p id="9712" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如:“我叫纳芭妮塔，来自印度。我住在爱尔兰。”</p><p id="77ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">N-triples 数据库会将您的这些信息视为:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="ce51" class="nf me it nb b gy ng nh l ni nj">entity:me    relation_type:name   "Nabanita"<br/>entity:me    relation_type:country   "India"<br/>entity:me    relation_type:residence   "Ireland"</span></pre><p id="d764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一般来说，这种格式也称为:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c724" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">subject</strong>          <strong class="nb iu">predicate</strong>                      <strong class="nb iu">object</strong><br/><em class="lv">(about what?)</em>    <em class="lv">(what is the relationship?) </em>   <em class="lv">(the value.)</em></span></pre><h2 id="6d78" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">SPARQL</h2><p id="c79e" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">SPARQL 是 RDF 数据库查询语言。语法与其他传统的查询语言非常不同，但是目标非常相似，因此可读性很强。</p><h2 id="ef47" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated"><strong class="ak">SPARQL 查询的快照</strong></h2><p id="793c" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">目标:</em> </strong>在维基百科上获取运动员的详细信息，如出生日期、姓名和国家。另外，我希望名字是英文的。此外，国家是一个可选变量，即即使“国家”为空，我也需要运动员的信息。出生日期和姓名是必填项。</p><p id="2ca4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">结果 SPARQL 查询:</em> </strong></p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="3516" class="nf me it nb b gy ng nh l ni nj">PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;    <br/>PREFIX dbo: &lt;http://dbpedia.org/ontology/&gt;    <br/>PREFIX dbr: &lt;http://dbpedia.org/resource/&gt;    <br/>PREFIX dbp: &lt;http://dbpedia.org/property/&gt;    <br/>PREFIX ling: &lt;http://purl.org/linguistics/gold/&gt;    </span><span id="1dc7" class="nf me it nb b gy nk nh l ni nj">SELECT DISTINCT ?a, ?dob, ?name, ?c    <br/>WHERE{<br/>   ?a a dbo:Athlete; <br/>      dbo:birthDate ?dob;<br/>      foaf:name ?name.    <br/>   OPTIONAL{?a  dbo:country ?c}    <br/>   FILTER(LANG(?name) = "en").    <br/>} </span></pre><p id="8002" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">查询解释:</em> </strong></p><p id="eab2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有的<em class="lv">前缀</em>都是已经存在的标准定义或 RDF 词汇表。把它们当作进口货。在主查询中，我们选择不同的运动员(？a)哪一个是主体；出生日期(？dob)，名字(？姓名)和国家(？c)哪些是对象。在“WHERE”中，第一行表示—选择一个类型(用<em class="lv"> a </em>或 rdfs:type 表示)dbo:athlete 的主题。rdfs:type 或<em class="lv"> a </em>和 dbo:athlete 是预定义的词汇表。“；”是用来继续使用选定的主题，即'？一个。此外，我们选择 dbo:birthDate(预定义词汇)，值/对象将被检索为“？dob”和 foaf:name 一样？姓名。在“可选”中，我们选择相同主题的国家(？a)使用词汇 dbo:country 作为谓语，但我们说它是可选的。换句话说，即使 dbo:county 没有关联的值，也要检索结果。最后一行“过滤器”，根据变量“过滤语言”？name”并指定它应该是英文的。如果没有指定语言，那么 SPARQL 将检索不同语言的对象。因此，除非需要解决特定的目标，否则我们将会有不需要的重复数据。</p><p id="e1a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="lv">输出:</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2c603299089d12a7c40b807e406028ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lX8IG7pB1qXfqlAjH56ObQ.png"/></div></div></figure><p id="8e4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出看起来有点像这个图像(当限制为 2 时)。您可以在这里尝试执行自己的 SPARQL 查询<a class="ae ky" href="https://dbpedia.org/sparql" rel="noopener ugc nofollow" target="_blank"/>。使用 SPARQL 的一个很大的优点是可以选择多种响应类型，包括 HTML、JSON 和 csv 文件格式。</p><h2 id="4958" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">如何在 Python 中执行 SPARQL 查询:</h2><p id="e798" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Python 有一个包装 SPARQL 服务的包装器，叫做<a class="ae ky" href="https://pypi.org/project/SPARQLWrapper/" rel="noopener ugc nofollow" target="_blank"> SPARQLWrapper </a>。这可用于查询位于<a class="ae ky" href="https://dbpedia.org/sparql" rel="noopener ugc nofollow" target="_blank">https://dbpedia.org/sparql</a>的 SPARQL 端点并检索结果。在本例中，我检索了一个 json 对象，并将其规范化为 pandas 数据帧。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="0848" class="nf me it nb b gy ng nh l ni nj">import pandas as pd<br/>from SPARQLWrapper import SPARQLWrapper, JSON<br/>from pandas.io.json import json_normalize</span><span id="306a" class="nf me it nb b gy nk nh l ni nj"># SPARQL query<br/>query = '''PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;    <br/>PREFIX dbo: &lt;http://dbpedia.org/ontology/&gt;    <br/>PREFIX dbr: &lt;http://dbpedia.org/resource/&gt;    <br/>PREFIX dbp: &lt;http://dbpedia.org/property/&gt;    <br/>PREFIX ling: &lt;http://purl.org/linguistics/gold/&gt;</span><span id="2e5a" class="nf me it nb b gy nk nh l ni nj">SELECT DISTINCT ?a, ?dob, ?ht, ?hpn, ?g, ?name, ?c    <br/>WHERE{{<br/>   ?a a dbo:Athlete; <br/>      dbo:birthDate ?dob;<br/>      foaf:name ?name.    <br/>   OPTIONAL{{?a  dbo:country ?c}}    <br/>   FILTER(LANG(?name) = "en").    <br/>}}'''</span><span id="2044" class="nf me it nb b gy nk nh l ni nj"># initialise the SPARQL endpoint<br/>sparql = SPARQLWrapper('http://dbpedia.org/sparql')</span><span id="f56e" class="nf me it nb b gy nk nh l ni nj"># set query<br/>sparql.setQuery(query)</span><span id="c9ac" class="nf me it nb b gy nk nh l ni nj"># set the response format<br/>sparql.setReturnFormat(JSON)</span><span id="c153" class="nf me it nb b gy nk nh l ni nj"># execute the query<br/>results = sparql.query().convert()</span><span id="15a6" class="nf me it nb b gy nk nh l ni nj"># normalize the json object to a pandas dataframe<br/>df_results = json_normalize(results['results']['bindings'])</span></pre><p id="2c34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了从维基百科中搜集所有运动员的数据，我创建了一个知识库，执行这个示例查询的稍微增强版本。</p><p id="d5ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/royn5618/DBPedia-Data-Scraping-using-Python" rel="noopener ugc nofollow" target="_blank">链接到 GitHub 存储库</a>以使用 SPARQLWrapper 查询 DBpedia。</p><p id="8c45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">总之，</strong>这是我们搜集或查询维基百科内容并进行创作的两种方式</p><ul class=""><li id="bb1c" class="nx ny it lb b lc ld lf lg li nz lm oa lq ob lu oc od oe of bi translated">丰富且设计精良的数据集</li><li id="b51b" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">训练自然语言处理模型的语料库</li><li id="707d" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">试用 SPARQL</li><li id="6ebb" class="nx ny it lb b lc og lf oh li oi lm oj lq ok lu oc od oe of bi translated">为 DBpedia 项目做贡献</li></ul><h1 id="3e33" class="md me it bd mf mg ol mi mj mk om mm mn jz on ka mp kc oo kd mr kf op kg mt mu bi translated">一些有用的资源:</h1><h2 id="9f0e" class="nf me it bd mf nl nm dn mj nn no dp mn li np nq mp lm nr ns mr lq nt nu mt nv bi translated">要了解关于 RDF 数据库和链接数据的更多信息:</h2><div class="oq or gp gr os ot"><a href="https://www.cambridgesemantics.com/blog/semantic-university/learn-rdf/" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">学习 RDF</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">引言这一系列课程是对 RDF 的介绍，RDF 是语义网的核心数据模型，也是</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">www.cambridgesemantics.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph ks ot"/></div></div></a></div><div class="oq or gp gr os ot"><a href="https://www.ontotext.com/knowledgehub/fundamentals/what-is-rdf/" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd iu gy z fp oy fr fs oz fu fw is bi translated">什么是 RDF？让数据的力量增加两倍</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">RDF 代表资源描述框架，是 W3C 开发并同意的数据交换标准</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">www.ontotext.com</p></div></div><div class="pc l"><div class="pi l pe pf pg pc ph ks ot"/></div></div></a></div></div></div>    
</body>
</html>