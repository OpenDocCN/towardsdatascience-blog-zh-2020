<html>
<head>
<title>Pheatmap Draws Pretty Heatmaps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pheatmap绘制了漂亮的热图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pheatmap-draws-pretty-heatmaps-483dab9a3cc?source=collection_archive---------2-----------------------#2020-04-09">https://towardsdatascience.com/pheatmap-draws-pretty-heatmaps-483dab9a3cc?source=collection_archive---------2-----------------------#2020-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2d1d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">工具</h2><div class=""/><div class=""><h2 id="d13e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何用r中的<em class="kr"> pheatmap </em>生成漂亮的热图的教程。</h2></div><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/f1d029259bdd5612b0d9ca913d9b022d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U8SzxhOWhQbSVfi-"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">照片由<a class="ae li" href="https://unsplash.com/@danielcgold?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹金</a>在<a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="a011" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi mf translated">eatmap是数据科学家必备的数据可视化工具包之一。</p><p id="bb0c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在<strong class="ll jd"> R </strong>中，有很多生成热图的包，比如<a class="ae li" href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/heatmap" rel="noopener ugc nofollow" target="_blank"><em class="mo">heat map</em></a><em class="mo">()</em>，<a class="ae li" href="https://www.rdocumentation.org/packages/gplots/versions/3.0.3/topics/heatmap.2" rel="noopener ugc nofollow" target="_blank"><em class="mo">heat map . 2</em></a><em class="mo">()</em>，以及<strong class="ll jd"><em class="mo"/></strong><a class="ae li" href="https://cran.r-project.org/web/packages/heatmaply/vignettes/heatmaply.html" rel="noopener ugc nofollow" target="_blank"><em class="mo">heat maply</em></a><em class="mo">()</em>。不过我最喜欢的还是<a class="ae li" href="https://www.rdocumentation.org/packages/pheatmap/versions/1.0.12/topics/pheatmap" rel="noopener ugc nofollow" target="_blank"><strong class="ll jd"><em class="mo">pheatmap</em></strong></a><strong class="ll jd"><em class="mo">()</em></strong>。我非常肯定你看完这篇帖子后会同意我的选择。</p><p id="9374" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在这篇文章中，我将通过将这个强大的数据可视化包<strong class="ll jd"> <em class="mo"> pheatmap </em> </strong>应用到<em class="mo"> NBA球员在<em class="mo">2019–2020</em>赛季的基本统计数据</em>中，来详细介绍这个包。</p><p id="cd22" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">原始数据来自<a class="ae li" href="https://www.basketball-reference.com/leagues/NBA_2020_per_game.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ll jd"> <em class="mo">篮球参考</em> </strong> </a>。你可以手动下载数据集，也可以按照我之前的一篇文章<a class="ae li" href="https://www.basketball-reference.com/leagues/NBA_2020_per_game.html" rel="noopener ugc nofollow" target="_blank"><em class="mo"/></a>来<em class="mo">抓取数据</em>。</p><p id="5e30" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">准备开始了吗？我们走吧。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="550a" class="mw mx it bd my mz na dn nb nc nd dp ne ls nf ng nh lw ni nj nk ma nl nm nn iz bi translated">准备</h2><p id="e21f" class="pw-post-body-paragraph lj lk it ll b lm no kd lo lp np kg lr ls nq lu lv lw nr ly lz ma ns mc md me im bi translated"><strong class="ll jd">语言:</strong>T64】R。<br/> <strong class="ll jd">包名:</strong> <a class="ae li" href="https://www.rdocumentation.org/packages/pheatmap/versions/1.0.12/topics/pheatmap" rel="noopener ugc nofollow" target="_blank"> pheatmap </a>。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="5dcd" class="mw mx it nu b gy ny nz l oa ob">install.packages("pheatmap")<br/>library(pheatmap)</span></pre><p id="7c4c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd">数据:</strong>2019–2020 NBA球员场均数据。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="b79f" class="mw mx it nu b gy ny nz l oa ob">df = read.csv("../2019_2020_player_stats_pergame.csv")</span><span id="3fed" class="mw mx it nu b gy oc nz l oa ob">head(df)</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi od"><img src="../Images/25de1e6f91f75153c9dd1b08137e1c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8WJGcLRPOPWZrWF7qg4RHQ.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">我们正在处理的数据集的头(由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener"> Yufeng </a></p></figure><p id="13ec" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">上面是我们正在处理的数据框的头部。你不明白列名是什么没关系，因为它们都是篮球的统计数据。不影响我们对热图绘制的探索。</p><p id="4e6f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><strong class="ll jd">数据清理:</strong>过滤掉每场比赛上场时间少于30分钟的球员，删除赛季中被交易的球员的重复，并用0填充NA值。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="526d" class="mw mx it nu b gy ny nz l oa ob">df_filt = df[df$MP &gt;= 30 ,]</span><span id="6968" class="mw mx it nu b gy oc nz l oa ob">TOT_players = df_filt[df_filt$Tm == "TOT","Player"]</span><span id="e41c" class="mw mx it nu b gy oc nz l oa ob">df_used = df_filt[((df_filt$Player %in% TOT_players) &amp; (df_filt$Tm == "TOT")) | (!(df_filt$Player %in% TOT_players)),]</span><span id="77ff" class="mw mx it nu b gy oc nz l oa ob">df_used[is.na(df_used)] = 0</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="6768" class="mw mx it bd my mz na dn nb nc nd dp ne ls nf ng nh lw ni nj nk ma nl nm nn iz bi translated">默认pheatmap</h2><p id="ac57" class="pw-post-body-paragraph lj lk it ll b lm no kd lo lp np kg lr ls nq lu lv lw nr ly lz ma ns mc md me im bi translated">首先，pheatmap只接受数字矩阵对象作为输入。因此，我们需要通过删除分类数据的前5列，将数据帧的数字部分转换为矩阵。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="cbca" class="mw mx it nu b gy ny nz l oa ob">df_num = as.matrix(df_used[,6:30])</span></pre><p id="3b36" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">由于矩阵的<strong class="ll jd">行名</strong>是热图中的默认行标签，我们最好通过避免数字索引使它们<strong class="ll jd">有意义</strong>。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="b2c2" class="mw mx it nu b gy ny nz l oa ob">rownames(df_num) = sapply(df_used$Player,<strong class="nu jd">function</strong>(x) strsplit(as.character(x),split = "\\\\")[[1]][1])</span></pre><p id="0ad6" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">玩家数据的不同列在范围上有很大的变化，所以我们需要<strong class="ll jd"> <em class="mo">缩放</em> </strong>它们以防止热图被大值所支配。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="782e" class="mw mx it nu b gy ny nz l oa ob">df_num_scale = scale(df_num)</span></pre><p id="5447" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">R中的scale函数对输入数据的列执行标准缩放，首先从列中减去列均值(<strong class="ll jd"> <em class="mo">居中步长</em> </strong>)，然后将居中的列除以列标准差(<strong class="ll jd"> <em class="mo">缩放步长</em> </strong>)。此函数用于将数据缩放至均值为0、标准差为1的分布。</p><p id="a188" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">其方程如下所示，其中<strong class="ll jd"> x </strong>为数据，<strong class="ll jd"> u </strong>为列均值，<strong class="ll jd"> s </strong>为列标准差。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="facc" class="mw mx it nu b gy ny nz l oa ob"><strong class="nu jd">z = (x — u) / s</strong></span></pre><p id="3102" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">您可以通过分别设置<strong class="ll jd"> <em class="mo"> center = FALSE </em> </strong>或<strong class="ll jd"> <em class="mo"> scale = FALSE </em> </strong>来关闭R中的<em class="mo">中心步进</em>或<em class="mo">比例步进</em>。让我们通过绘制缩放前后玩家每场比赛的积分密度来直观地了解缩放的效果。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="425c" class="mw mx it nu b gy ny nz l oa ob">plot(density(df$PTS),xlab = "Points Per Game",ylab="Density",main="Comparison between scaling data and raw data",col="red",lwd=3,ylim=c(0,0.45))</span><span id="3631" class="mw mx it nu b gy oc nz l oa ob">lines(density(df_num_scale[,"PTS"]),col="blue",lwd=3)</span><span id="5999" class="mw mx it nu b gy oc nz l oa ob">legend("topright",legend = c("raw","scaled"),col = c("red","blue"),lty = "solid",lwd=3)</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi oe"><img src="../Images/45f07fac01ddb6fb21532ca1c8975423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ad8bGH3txVDgnKLszMZPLg.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated"><a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">裕丰</a>对缩放和未缩放数据的比较</p></figure><p id="3a01" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">缩放后，数据准备好输入函数。</p><p id="fc12" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">让我们看看默认的pheatmap。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="21cc" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale<!-- -->,main = "pheatmap default"<!-- -->)</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/c37b44fbf4b39399d440266d2dd6c0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYS3hV9ehC_ZXg9IV3TX1g.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">于峰</a>制作的热图</p></figure><p id="a946" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">函数的默认行为包括<strong class="ll jd"> <em class="mo">行和列</em> </strong>的层次聚类，在其中我们可以观察到相近位置的相似球员和统计类型。</p><p id="e970" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">例如，在热图的中间部分有一个超级<em class="mo">温暖区域</em>。对应的是一堆超级巨星，包括<strong class="ll jd"> <em class="mo">詹姆斯·哈登、【卢卡·东契奇】、勒布朗詹姆斯、</em></strong><strong class="ll jd"><em class="mo">达米恩·利拉德</em> </strong>。</p><p id="63f7" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果要关闭聚类，可以将<strong class="ll jd"> <em class="mo"> cluster_cols </em> </strong>或<strong class="ll jd"> <em class="mo"> cluster_rows </em> </strong>设置为<strong class="ll jd"> False </strong>。下面的代码取消了列聚类。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="8914" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale,cluster_cols = F,main = "pheatmap row cluster")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/125a46351d0072d6e23d7a008f89f961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P68P_9insgfUvkZMGRCuIw.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">俞峰制作的热图</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="c44d" class="mw mx it bd my mz na dn nb nc nd dp ne ls nf ng nh lw ni nj nk ma nl nm nn iz bi translated">值缩放</h2><p id="083a" class="pw-post-body-paragraph lj lk it ll b lm no kd lo lp np kg lr ls nq lu lv lw nr ly lz ma ns mc md me im bi translated">实际上，函数本身可以在热图中进行行列缩放。它主要用作跨行或列比较的可视化目的。以下代码显示了行缩放热图。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="a4c6" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale,scale = "row",main = "pheatmap row scaling")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/a129bd9775ba8be952008272c4942d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l44gFZDWgRWXYv3GJHrvlQ.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">于峰</a>制作的热图</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="c780" class="mw mx it bd my mz na dn nb nc nd dp ne ls nf ng nh lw ni nj nk ma nl nm nn iz bi translated">向行和列添加批注</h2><p id="a7b4" class="pw-post-body-paragraph lj lk it ll b lm no kd lo lp np kg lr ls nq lu lv lw nr ly lz ma ns mc md me im bi translated">注释功能是pheatmap最强大的特性之一。具体来说，您可以输入一个<strong class="ll jd"> <em class="mo">独立数据帧</em> </strong>，并对热图矩阵的行或列进行注释。</p><p id="4f10" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">例如，我用他们的位置注释了每个球员，使其成为一个数据框对象，并将其输入到pheatmap函数中。需要注意的一点是，根据您的注记目标，注记数据框的行名称必须与热图矩阵的行名称或列名称相匹配。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="9cf9" class="mw mx it nu b gy ny nz l oa ob">pos_df = data.frame("Pos" = df_used$Pos)<br/>rownames(pos_df) = rownames(df_num) # name matching<br/>pheatmap(df_num_scale,cluster_cols = F,annotation_row = pos_df,main = "pheatmap row annotation")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/31f96bc2e199aca3060b707bd12f4e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njJTItGVvjST8F-fQzYPdA.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">于峰</a>制作的热图</p></figure><p id="ebc5" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">从热图中可以看到，还有一列颜色表示玩家的位置。</p><p id="eb81" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们看到球员并没有按照他们的位置聚集在一起，这表明随着篮球的发展，球员的位置和他们的比赛类型之间的关系变得模糊了。</p><p id="2fa2" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">此外，我们还可以添加列注释。我用它们的分类来命名统计数据，包括<em class="mo">进攻</em>、<em class="mo">防守</em>和<em class="mo">其他</em>。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="9533" class="mw mx it nu b gy ny nz l oa ob">cat_df = data.frame("category" = c(rep("other",3),rep("Off",13),rep("Def",3),"Off",rep("Def",2),rep("other",2),"Off"))<br/>rownames(cat_df) = colnames(df_num)</span></pre><p id="594c" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">然后，我绘制了只带有列注释的热图。这次我只打开列集群。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="3c43" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale,cluster_rows = F, annotation_col = cat_df,main = "pheatmap column annotation")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/8f0648e12e96d21ac40438fa768901fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOE1GElDbPY8M7q4fSiUww.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">于峰</a>制作的热图</p></figure><p id="cea4" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们可以从热图中看到，与进攻相关的数据倾向于聚集在一起。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="2aac" class="mw mx it bd my mz na dn nb nc nd dp ne ls nf ng nh lw ni nj nk ma nl nm nn iz bi translated">将热图切割成碎片</h2><p id="a256" class="pw-post-body-paragraph lj lk it ll b lm no kd lo lp np kg lr ls nq lu lv lw nr ly lz ma ns mc md me im bi translated">我想介绍的最后一个功能是热图切割功能。有时，如果我们通过聚类来切割热图，会给出更清晰的可视化效果。</p><p id="12ab" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">通过分割热图，独立的区块将代表其自身的人口。让我们看看下面这个例子中的行切割。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="d903" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale,cutree_rows = 4,main = "pheatmap row cut")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/054ba04095ccca935fdf175ea9e965b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_CLduk8bdq-DOaZ7r7RsA.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">于峰</a>制作的热图</p></figure><p id="9be8" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在代码中，我输入了<code class="fe og oh oi nu b">cutree_rows = 4</code>，这意味着将热图按行分割成4个集群。</p><p id="27b0" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">前面提到的超星组出现在切割热图的第三块中。</p><p id="f258" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们可以对下面的列做类似的事情。</p><pre class="kt ku kv kw gt nt nu nv nw aw nx bi"><span id="5dd1" class="mw mx it nu b gy ny nz l oa ob">pheatmap(df_num_scale,cutree_cols = 4,main = "pheatmap column cut")</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi of"><img src="../Images/82a97bbe115125a4576be7c3e3bc1155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhfRhChSpkOBBK4vmgpdnA.png"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">由<a class="ae li" href="https://medium.com/@jianan.jay.lin" rel="noopener">虞峰</a>制作的热图</p></figure><p id="9d80" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">通过这种方式，相似的统计数据显示得非常接近。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="3e26" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">到目前为止，我已经了解了pheatmap的所有主要特性。当然，还有<strong class="ll jd"> <em class="mo">包中更多的细节</em> </strong>，比如<em class="mo">调色板</em>，<em class="mo">聚类距离度量</em>等等。有兴趣的可以参考<a class="ae li" href="https://cran.r-project.org/web/packages/pheatmap/pheatmap.pdf" rel="noopener ugc nofollow" target="_blank">功能手册</a>。</p><p id="c92e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">希望这篇教程能帮助你强化自己的可视化工具包。如果你喜欢读这篇文章，你也可以在我的其他文章中找到有趣的东西。</p><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/hands-on-guidance-of-data-visualization-in-r-package-ggplot2-of-nba-players-stats-d812ed272d66"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">NBA球员统计数据R包“ggplot2”中数据可视化的实践指导</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">应用于NBA数据的R数据可视化工具“ggplot2”的6分钟之旅。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa lc om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/present-the-feature-importance-of-the-random-forest-classifier-99bb042be4cc"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">给出了随机森林分类器的特征重要性</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">如何建立一个随机森林分类器，提取特征重要性，并漂亮地呈现出来。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa lc om"/></div></div></a></div><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/whos-the-mvp-of-nba-this-season-3e347c66a40a"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd jd gy z fp or fr fs os fu fw jc bi translated">谁是本赛季NBA的最有价值球员？</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">一个案例研究，展示一个机器学习项目从开始到结束的样子。</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pc l ox oy oz ov pa lc om"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi pd"><img src="../Images/d281098431258ebed7d06bc2ae5e4db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nma4roeq-itx1e3Q"/></div></div><p class="le lf gj gh gi lg lh bd b be z dk translated">照片由<a class="ae li" href="https://unsplash.com/@morgansessions?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">摩根塞申斯</a>在<a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure></div></div>    
</body>
</html>