<html>
<head>
<title>How to Build a wordcloud in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 构建 wordcloud</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-wordcloud-in-python-2f9222414fc6?source=collection_archive---------39-----------------------#2020-09-03">https://towardsdatascience.com/how-to-build-a-wordcloud-in-python-2f9222414fc6?source=collection_archive---------39-----------------------#2020-09-03</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><div class=""/><div class=""><h2 id="f9a4" class="pw-subtitle-paragraph jt iv iw bd b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dk translated">一个简单快速的建立文字云的教程</h2></div><figure class="km kn ko kp gu kq gi gj paragraph-image"><div class="gi gj kl"><img src="../Images/c9583479ebfe7dd42336c460655684e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*4PwcgKr29pASpxaCefZspg.png"/></div><p class="kt ku gk gi gj kv kw bd b be z dk translated">图片由安吉莉卡·洛·杜卡(作者)提供</p></figure><p id="105f" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated">在本教程中，我将向你展示如何使用<code class="fe lt lu lv lw b">wordcloud</code>包在 Python 中构建文本的单词云。</p><p id="7fed" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated">在示例中，我将构建圣奥古斯丁的<em class="lx">忏悔</em>的词云，可以从<a class="ae ly" href="https://www.gutenberg.org/files/3296/3296-h/3296-h.htm" rel="noopener ugc nofollow" target="_blank">Gutenberg 项目页面</a>下载。这部杰作被分成 13 本书。我们将每本书存储在不同的文件中，名为 number.text(例如 1.txt 和 2.txt)。每个文件的每一行只包含一个句子。</p><p id="e59a" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated">本教程的源代码可以从<a class="ae ly" href="https://github.com/alod83/papers/tree/master/aiucd2021" rel="noopener ugc nofollow" target="_blank">我的 Github 资源库</a>下载。</p><h1 id="fed9" class="lz ma iw bd mb mc md me mf mg mh mi mj kc mk kd ml kf mm kg mn ki mo kj mp mq bi translated">入门指南</h1><h2 id="6a5e" class="mr ma iw bd mb ms mt dn mf mu mv dp mj lg mw mx ml lk my mz mn lo na nb mp nc bi translated">安装并熟悉 wordcloud 软件包</h2><p id="93bc" class="pw-post-body-paragraph kx ky iw kz b la nd jx lc ld ne ka lf lg nf li lj lk ng lm ln lo nh lq lr ls ip bi translated">创建 word cloud 的第一步是通过命令<code class="fe lt lu lv lw b">pip install wordcloud</code>安装<a class="ae ly" href="https://pypi.org/project/wordcloud/" rel="noopener ugc nofollow" target="_blank"> wordcloud </a>包。然后你可以导入<code class="fe lt lu lv lw b">WordCloud</code>这个类以及<code class="fe lt lu lv lw b">STOPWORDS</code>的列表。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="8998" class="mr ma iw lw b gz nm nn l no np">from wordcloud import WordCloud, STOPWORDS</span></pre><p id="9f65" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated">如果需要，您可以将其他停用字词添加到列表中。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="8412" class="mr ma iw lw b gz nm nn l no np">stopwords = set(STOPWORDS) <br/>stopwords.add('thou')</span></pre><p id="be92" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated"><code class="fe lt lu lv lw b">Wordcloud</code>函数需要一个句子作为输入，其中包含应该计算单词云的所有单词。在我们的例子中，我们应该将杰作的所有文本存储到一个变量中。我们可以通过打开相关文件来读取每本书的文本，并将其存储到一个全局变量中，这个变量叫做<code class="fe lt lu lv lw b">all_text</code>。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="2b20" class="mr ma iw lw b gz nm nn l no np">all_text = ""<br/>for book in range(1,14):<br/>    file = open('sources/' + str(book) + '.txt')<br/>    lines = file.readlines()<br/>    <br/>    for line in lines:<br/>        all_text += " " + line</span></pre><h1 id="4569" class="lz ma iw bd mb mc md me mf mg mh mi mj kc mk kd ml kf mm kg mn ki mo kj mp mq bi translated">构建单词云</h1><h2 id="76fd" class="mr ma iw bd mb ms mt dn mf mu mv dp mj lg mw mx ml lk my mz mn lo na nb mp nc bi translated">为你的文本创建世界云</h2><p id="df93" class="pw-post-body-paragraph kx ky iw kz b la nd jx lc ld ne ka lf lg nf li lj lk ng lm ln lo nh lq lr ls ip bi translated">现在我们已经准备好构建 wordcloud 了。我们可以创建一个<code class="fe lt lu lv lw b">WordCloud</code>对象，向它传递单词云的大小、停用词列表、背景颜色和最小字体大小。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="c27d" class="mr ma iw lw b gz nm nn l no np">wordcloud = WordCloud(width = 800, height = 300, stopwords = stopwords,background_color ='white',  min_font_size = 10)</span></pre><p id="39f0" class="pw-post-body-paragraph kx ky iw kz b la lb jx lc ld le ka lf lg lh li lj lk ll lm ln lo lp lq lr ls ip bi translated">一旦构建了<code class="fe lt lu lv lw b">WordCloud</code>对象，我们就可以调用方法<code class="fe lt lu lv lw b">generate()</code>来计算作为参数传递的文本的 worcloud。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="7353" class="mr ma iw lw b gz nm nn l no np">wordcloud.generate(all_text)</span></pre><h1 id="c7f8" class="lz ma iw bd mb mc md me mf mg mh mi mj kc mk kd ml kf mm kg mn ki mo kj mp mq bi translated">绘图结果</h1><h2 id="e795" class="mr ma iw bd mb ms mt dn mf mu mv dp mj lg mw mx ml lk my mz mn lo na nb mp nc bi translated">将单词云保存到图片中</h2><p id="bc68" class="pw-post-body-paragraph kx ky iw kz b la nd jx lc ld ne ka lf lg nf li lj lk ng lm ln lo nh lq lr ls ip bi translated">最后，我们准备绘制结果。我们可以利用<code class="fe lt lu lv lw b">matplotlib</code>库提供的<code class="fe lt lu lv lw b">imshow()</code>函数。</p><pre class="km kn ko kp gu ni lw nj nk aw nl bi"><span id="e6e5" class="mr ma iw lw b gz nm nn l no np">import matplotlib.pyplot as plt<br/> <br/>plt.figure(figsize = (8, 3), facecolor = None) <br/>plt.imshow(wordcloud) <br/>plt.axis("off") <br/>plt.tight_layout(pad = 0) <br/>plt.savefig('plots/word_cloud.png')<br/>plt.show()</span></pre><h1 id="0afb" class="lz ma iw bd mb mc md me mf mg mh mi mj kc mk kd ml kf mm kg mn ki mo kj mp mq bi translated">吸取的教训</h1><p id="f976" class="pw-post-body-paragraph kx ky iw kz b la nd jx lc ld ne ka lf lg nf li lj lk ng lm ln lo nh lq lr ls ip bi translated">用 Python 构建一个文本的单词云非常简单。这可以通过<code class="fe lt lu lv lw b">wordcloud</code>包完成</p><ul class=""><li id="702b" class="nq nr iw kz b la lb ld le lg ns lk nt lo nu ls nv nw nx ny bi translated">第一步是定义一个字符串变量，它包含所有需要计算单词云的文本。</li><li id="fa6f" class="nq nr iw kz b la nz ld oa lg ob lk oc lo od ls nv nw nx ny bi translated">然后，<code class="fe lt lu lv lw b">Wordcloud</code>对象可以通过指定一些参数作为实参以及向其方法<code class="fe lt lu lv lw b">generate()</code>传递文本来定义</li><li id="f119" class="nq nr iw kz b la nz ld oa lg ob lk oc lo od ls nv nw nx ny bi translated">最后，利用<code class="fe lt lu lv lw b">matplotlib</code>包可以完成一个 wordcloud 的情节。</li></ul></div></div>    
</body>
</html>