# åˆ©ç”¨ D3.js v4 æ„å»º Tableau çš„ç½‘ç»œå›¾

> åŸæ–‡ï¼š<https://towardsdatascience.com/leverage-on-d3-js-v4-to-build-a-network-graph-for-tableau-with-ease-cc274cba69ce?source=collection_archive---------23----------------------->

## ä½¿ç”¨ D3.js è‡ªåŠ¨è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„(xï¼Œy)åæ ‡ï¼Œå¹¶æ ¹æ®æ‚¨çš„å–œå¥½è°ƒæ•´å¸ƒå±€

å› æ­¤ï¼Œæœ€è¿‘ä¸–ç•Œå„å›½éƒ½åœ¨ç‹‚çƒ­åœ°è¿½è¸ªæ¥è§¦è€…ï¼Œä»¥æ§åˆ¶æ–°å† è‚ºç‚æ„ŸæŸ“ç‡ã€‚ä½œä¸ºä¸€åæ•°æ®åˆ†æå¸ˆï¼Œæˆ‘æœ€è¿‘æ¥è§¦äº†å¾ˆå¤šç½‘ç»œå›¾ã€‚çœ‹åˆ°ä¸€ä¸ªä¸»è¦ç”±**èŠ‚ç‚¹**å’Œ**é“¾æ¥**ç»„æˆçš„å›¾ä¸ä»…ç¾è§‚ï¼Œè€Œä¸”æœ‰æ•ˆåœ°è¡¨ç¤ºäº†ä¸åŒå®ä½“ä¹‹é—´çš„è¿æ¥ï¼Œè¿™å¾ˆæœ‰è¶£ã€‚

![](img/0746523f8f5e2ea211460a363831d98f.png)

Image by Author |ä¸€ä¸ªç”± d3.js æ¸²æŸ“çš„ç½‘ç»œå›¾ç¤ºä¾‹ï¼Œç”¨äºå¯è§†åŒ– stackoverflow ä¸Š#æ ‡ç­¾çš„å‡ºç°é¢‘ç‡

å¤§å¤šæ•°ç½‘ç»œå›¾å¯è§†åŒ–å¤§å¤šéƒ¨ç½²åœ¨ web åº”ç”¨ç¨‹åºä¸Šã€‚æ®‹é…·çš„äº‹å®æ˜¯ web å¼€å‘æ—¶é—´è¿œè¿œè¶…è¿‡ dashboardingã€‚æ­¤å¤–ï¼Œæˆ‘å·¥ä½œè¿‡çš„å›¢é˜Ÿé€šå¸¸åªå¯¹ç½‘ç»œå›¾çš„å¿«ç…§æ„Ÿå…´è¶£ï¼Œå› æ­¤åœ¨ Tableau ç­‰ä»ªè¡¨æ¿å·¥å…·ä¸Šç»˜åˆ¶ç½‘ç»œå›¾çš„èƒ½åŠ›å°†ä¸ºçªå‡ºæ˜¾ç¤ºä¸å›¾å½¢çš„äº¤äº’æ€§ä¸å¤ªé‡è¦çš„é‡è¦å‘ç°æä¾›æ›´å¤§çš„ä¾¿åˆ©ã€‚å› æ­¤ï¼Œæˆ‘ç»§ç»­æ¢ç´¢å’Œå®ç°ç”¨æœ€å°çš„åŠªåŠ›åœ¨ Tableau ä¸Šç»˜åˆ¶å®Œå…¨ç›¸åŒçš„å›¾å½¢çš„æ–¹æ³•ã€‚è¿™è®©æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç”± **2** éƒ¨åˆ†ç»„æˆçš„å® ç‰©é¡¹ç›®

**ç¬¬ä¸€éƒ¨åˆ†:**ç›´æ¥ä¸º Tableau è¾“å‡ºæ•°æ®çš„ web åº”ç”¨ç¨‹åº(åŠŸèƒ½åŒ…æ‹¬æ‰‹åŠ¨è°ƒæ•´å›¾å½¢å¸ƒå±€çš„çµæ´»æ€§+æœ€ç»ˆ Tableau å°±ç»ªæ•°æ®è¾“å‡ºçš„å¯¼å‡º)

**ç¬¬äºŒéƒ¨åˆ†:**ä½¿ç”¨åœ¨*ç¬¬ä¸€éƒ¨åˆ†*ä¸­åˆ›å»ºçš„æ•°æ®ç”Ÿæˆå™¨ï¼Œç›¸åº”åœ°åœ¨æˆ‘çš„ä¸‹ä¸€ä¸ª Tableau ä»ªè¡¨æ¿ä¸­åŒ…å«ä¸€ä¸ªç½‘ç»œå›¾ã€‚

# ç¬¬ä¸€éƒ¨åˆ†:åˆ›å»º Web åº”ç”¨å·¥å…·

å…³äºé¡¹ç›®çš„è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„å¸ƒå±€å’ŒåŠŸèƒ½æ˜¯åŸºäºç‰¹é‡Œæ–¯å¦Â·å‰åˆ—æ–‡çš„ https://observablehq.com/@ladataviz/network-data-generator

![](img/389cf5f4add7804b59823caa3ad6dad4.png)

å›¾ç‰‡ç”±ä½œè€…æä¾›|å±•ç¤ºäº†[https://observablehq.com/@ladataviz/network-data-generator](https://observablehq.com/@ladataviz/network-data-generator)ä¸Šçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬:ä½¿ç”¨æˆ·èƒ½å¤Ÿè¾“å…¥è‡ªå·±çš„ JSON æ–‡ä»¶æ¥å‘ˆç°ç½‘ç»œå›¾ï¼Œå¹¶ä¸º Tableau å¯¼å‡º 2 ä¸ª CSV æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¯ä»¥è°ƒæ•´èŠ‚ç‚¹**å°ºå¯¸**å’Œ**åŠ›**å‚æ•°çš„é…ç½®ï¼Œä»¥æ”¹å˜æ•´ä½“å¸ƒå±€ã€‚

ä¸è¦è¯¯ä¼šæˆ‘çš„æ„æ€ï¼Œè™½ç„¶æˆ‘è§‰å¾—è¿™å¾ˆæ£’ï¼Œè€Œä¸”æˆ‘å¯¹åˆ©ç”¨ d3 å›¾å½¢åº“çš„ç‹¬åˆ›æ€§å°è±¡æ·±åˆ»ï¼Œä½†å½“æˆ‘è¯•å›¾ä½¿ç”¨ Tableau ä¸­çš„è¾“å‡ºæ—¶ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦é™åˆ¶â€”â€”

*   çº¦æŸ 1:è¯¥å·¥å…·ä¸å…è®¸ç›´æ¥å°†èŠ‚ç‚¹æ‹–åŠ¨åˆ°å…¶ä»–ä½ç½®æ¥å®ç°æ›´åŠ å®šåˆ¶çš„å¸ƒå±€ã€‚*è™½ç„¶å¼ºåº¦å’Œç¢°æ’å‚æ•°å¯ä»¥åˆ‡æ¢ï¼Œä½†èŠ‚ç‚¹çš„ç§»åŠ¨æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œéš¾ä»¥æ“çºµã€‚*
*   çº¦æŸ 2:æœ€ç»ˆç”Ÿæˆçš„è¾“å‡ºç¡®å®å‘ˆç°äº†å·¥å…·ä¸­é¢„è§ˆçš„ç²¾ç¡®å¸ƒå±€ã€‚ç„¶è€Œï¼Œå½“æˆ‘è¯•å›¾è¿‡æ»¤ä¸€äº›**èŠ‚ç‚¹**æˆ–**é“¾æ¥**çš„æ˜¾ç¤ºæ—¶ï¼Œæ•°æ®è¾“å‡ºä¸­æ²¡æœ‰ç‰¹å®šçš„å­—æ®µâ€” *nodes.csv* å’Œ *links.csv* ï¼Œè¿™ä½¿å¾—è¿™åœ¨ Tableau ä¸­å¾ˆå®¹æ˜“å‘ç”Ÿã€‚

åœ¨è§£å†³ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ç»§ç»­å¼€å‘äº†ä¸€ä¸ªç±»ä¼¼äº Tristan Guillevin çš„ web ç•Œé¢:

![](img/c429fa0b99daeb5d3bc5517b419b6644.png)

ä½œè€…å›¾ç‰‡|æˆ‘åœ¨[https://tableau-data-utility.glitch.me/](https://tableau-data-utility.glitch.me/)éƒ¨ç½²çš„ web åº”ç”¨é¢„è§ˆã€‚ç±»ä¼¼åœ°ï¼Œç”¨æˆ·å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼è¾“å…¥ä»–ä»¬è‡ªå·±çš„ JSON æ–‡ä»¶ã€‚å›¾å½¢å¸ƒå±€ä¹Ÿå¯ç”¨äº†é…ç½®ã€‚æ­¤å¤–ï¼Œå¸¦æœ‰ Tableau å›¾æ ‡çš„æŒ‰é’®è¯´æ˜äº†ä¸¤ä¸ªè¾“å‡ºæ–‡ä»¶â€” **nodes.csv** å’Œ **links.csv** ä¹‹é—´çš„åç»­æ•°æ®è¿æ¥æ˜¯å¦‚ä½•å‘ç”Ÿçš„

åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå•é¡µåº”ç”¨ç¨‹åºï¼ŒåŒ…å«æ‰€æœ‰çš„è¯´æ˜å’Œæ‰€éœ€çš„ä¿¡æ¯ã€‚ç°åœ¨ï¼Œè¿™é‡Œå‡ºç°äº†ä¸€ä¸ªæœ‰äº‰è®®çš„æœ€ç”¨æˆ·å‹å¥½çš„ç‰¹æ€§â€” *å…è®¸ç”¨æˆ·æ‰‹åŠ¨æ”¹å˜å’Œæ‹–åŠ¨èŠ‚ç‚¹ï¼Œä»¥ä½¿å›¾å½¢ç¬¦åˆä»–ä»¬æƒ³è¦çš„å¸ƒå±€:*

![](img/1460aaa6ea91f42517370f8707d93634.png)

ä½œè€…å›¾ç‰‡|åœ¨[https://tableau-data-utility.glitch.me/](https://tableau-data-utility.glitch.me/)å¯¹ç½‘ç»œåº”ç”¨ç¨‹åºä¸­å›¾è¡¨çš„åŸå§‹å¸ƒå±€è¿›è¡Œç®€å•è°ƒæ•´çš„æ¼”ç¤º

è¿™é‡Œæœ‰ä¸€ä¸ªæ˜æ˜¾çš„å¯¹æ¯”ï¼Œå·¥å…·åœ¨ç§»åŠ¨åæˆåŠŸåœ°æ”¹å˜äº†èŠ‚ç‚¹çš„åæ ‡:

![](img/41e6dc52ee765452bb4cdf2f8b7dddf0.png)

ä½œè€…å›¾ç‰‡| ( **å·¦**)D3 . js æ¸²æŸ“çš„ç½‘ç»œå›¾è°ƒæ•´å‰å¸ƒå±€| ( **å³**)å¯¼å‡º csv æ–‡ä»¶çš„ Tableau å›¾å½¢å¯è§†åŒ–

![](img/04991fa9d34805b7432e5c169fd4ee18.png)

ä½œè€…å›¾ç‰‡| ( **å·¦**)D3 . js æ¸²æŸ“çš„ç½‘ç»œå›¾è°ƒæ•´åå¸ƒå±€| ( **å³**)å¯¼å‡º csv æ–‡ä»¶çš„ Tableau å›¾å½¢å¯è§†åŒ–

å› æ­¤ï¼Œè§£å†³äº†(1/2)çš„çº¦æŸæ¡ä»¶â€”â€”å¦ä¸€ä¸ªæœªè§£å†³çš„é—®é¢˜æ˜¯ï¼Œå½“åœ¨ Tableau ä¸­ç»˜åˆ¶æ—¶ï¼Œç”Ÿæˆçš„åŸå§‹è¾“å‡ºä¸å…è®¸å¯¹ç‰¹å®šçš„**èŠ‚ç‚¹**æˆ–**é“¾æ¥**è¿›è¡Œè¿‡æ»¤(è¿™å°†åœ¨**ç¬¬äºŒéƒ¨åˆ†**ä¸­è¿›è¡Œé˜è¿°)ã€‚

# ç¬¬äºŒéƒ¨åˆ†:åœ¨ Tableau Dashboard ä¸­åŒ…å«ä¸€ä¸ªç½‘ç»œå›¾ï¼Œç”¨äºæ•°æ®å‰–æ/åˆ†æ

æœ€ç»ˆï¼Œæˆ‘å†³å®šåœ¨ 2020 å¹´ç¬¬ä¸‰å­£åº¦ç¡®å®šæ–°åŠ å¡çš„ç™»é©çƒ­é›†ç¾¤ã€‚åŸå§‹æ•°æ®æºåœ¨æœ€ç»ˆçš„ä»ªè¡¨æ¿ä¸­è¯´æ˜ï¼Œä½†æ˜¯åœ¨åœ°ç†ç¼–ç å’Œä¸€äº›æ•°æ®è½¬æ¢ä¹‹åï¼Œç”Ÿæˆ Tableau å›¾æ‰€éœ€çš„ JSON è¾“å…¥è¢«ç”Ÿæˆ:[https://github . com/wended-geek-cc/Tableau-data-utility/blob/master/public/data/SG _ dengue _ clusters . JSON](https://github.com/incubated-geek-cc/tableau-data-utility/blob/master/public/data/sg_dengue_clusters.json)

åœ¨ç»˜åˆ¶ç½‘ç»œå›¾å¹¶å°†åœ°å›¾æ·»åŠ åˆ°ä»ªè¡¨æ¿ä¸Šä¹‹åï¼Œæˆ‘é¢ä¸´çš„ç¬¬äºŒä¸ªçº¦æŸæ˜¯æ— æ³•é€šè¿‡ç‰¹å®šèŠ‚ç‚¹/é“¾æ¥è¿›è¡Œè¿‡æ»¤:

*   [Id] (nodes.csv):æ¯ä¸ªèŠ‚ç‚¹çš„æ ‡è¯†ç¬¦
*   [Id] (links.csv):èŠ‚ç‚¹çš„[Id]ï¼Œå³æº/ç›®æ ‡
*   [Key] (links.csv):è‡ªåŠ¨ç”Ÿæˆçš„æ•°å€¼ï¼Œç”¨äºæ ‡è¯†æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹
*   [ç±»å‹] (links.csv):æº/ç›®æ ‡

å®é™…ä¸Šï¼Œåªæœ‰`[Id]`å­—æ®µå¯ç”¨äºè¯†åˆ«è¦è¿‡æ»¤çš„èŠ‚ç‚¹/é“¾æ¥ã€‚ç„¶è€Œï¼Œç”±äºè¾“å‡ºæ ¼å¼ï¼Œå½“*å•ä¸ªèŠ‚ç‚¹*è¢«è¿‡æ»¤æ—¶ï¼ŒèŠ‚ç‚¹çš„*é“¾æ¥*é»˜è®¤ä¸è¢«è¿‡æ»¤ï¼Œè¿™åœ¨å›¾ä¸­ç•™ä¸‹äº†è®¸å¤šæŒ‚èµ·çš„é“¾æ¥:

![](img/a9dd9e89d42c75e4fbd65e8031f99ea8.png)

ä½œè€…å›¾ç‰‡| Tableau æ¼”ç¤ºï¼Œæ˜¾ç¤ºèŠ‚ç‚¹ c0 è‡³ c7 å·²è¿‡æ»¤ã€‚è¯·æ³¨æ„ï¼Œè¿‡æ»¤èŠ‚ç‚¹çš„é“¾æ¥ä»ç„¶å­˜åœ¨ã€‚

æˆ‘æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ç”Ÿæˆä¸€ä¸ªåä¸º`[Link Id]`çš„é¢å¤–å­—æ®µï¼Œå®ƒåŸºæœ¬ä¸Šè¿æ¥äº†æºèŠ‚ç‚¹çš„`[Id]`å’Œç›®æ ‡èŠ‚ç‚¹çš„`[Id]`ã€‚è¿™ä¸ç”¨äºåŒºåˆ†é“¾è·¯çš„`[Key]`å­—æ®µçš„ç›®çš„ç›¸åŒï¼Œä½†æ˜¯èŠ‚ç‚¹å’Œé“¾è·¯ç°åœ¨éƒ½å¯ä»¥è¢«`[Link Id]`è¯†åˆ«ã€‚

æ­¤åï¼Œç”¨ä»¥ä¸‹å…¬å¼åˆ›å»ºä¸€ä¸ªç§°ä¸º`[Filter by Link Id]`çš„å­—æ®µ:

```
IF [Parameters].[Cluster Id]='All' THEN TRUE 
ELSE 
 RIGHT(link_id,LEN([Parameters].[Cluster Id]))=[Parameters].[Cluster Id] 
END
```

å› æ­¤ï¼Œä»ªè¡¨æ¿æœ€ç»ˆå¯ä»¥åŒæ—¶åœ¨ç½‘ç»œå›¾å’Œå…¶ä»–è§†å›¾ä¸­äº¤å‰è¿‡æ»¤:

![](img/aee32a800900ebd02c3f6f7e3b91b114.png)

å›¾ç‰‡æŒ‰ä½œè€…| Node [Id] c10 è¢«é€‰ä¸­ï¼Œåœ¨éƒ¨ç½²äº[https://public . tableau . com/views/singapores dengue clusters 2020/SG _ dengue _ clusters _ 2020ï¼Ÿ:language = en&:display _ count = y&:origin = viz _ share _ link](https://public.tableau.com/views/SingaporesDengueClusters2020/sg_dengue_clusters_2020?:language=en&:display_count=y&:origin=viz_share_link)

## æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»ï¼Œæˆ‘åœ¨ Tableau ä»ªè¡¨ç›˜ä¸Šç»˜åˆ¶ç½‘ç»œå›¾çš„æ¢ç´¢åˆ°æ­¤ç»“æŸï¼

è¯·éšæ„ä½¿ç”¨éƒ¨ç½²åœ¨ https://tableau-data-utility.glitch.me/[çš„å·¥å…·æ¥ç”Ÿæˆ Tableau ç½‘ç»œæ•°æ®é›†ã€‚](https://tableau-data-utility.glitch.me/)

![](img/eb81a7061f33c26f5f2e52e7e5c857b9.png)

å›¾ç‰‡ä½œè€…| Dashboard éƒ¨ç½²äº[https://public . tableau . com/views/Singapore sdengeclusters 2020/SG _ dengue _ clusters _ 2020ï¼Ÿ:language = en&:display _ count = y&:origin = viz _ share _ link](https://public.tableau.com/views/SingaporesDengueClusters2020/sg_dengue_clusters_2020?:language=en&:display_count=y&:origin=viz_share_link)

[](https://geek-cc.medium.com/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥çµåª’â€”â€”ææ€æ¬£Â·å´”

### è·å¾—ææ€æ¬£Â·å´”å’Œå…¶ä»–ä½œå®¶åœ¨åª’ä½“ä¸Šçš„æ‰€æœ‰å¸–å­ï¼ğŸ˜ƒæ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥â€¦

geek-cc.medium.com](https://geek-cc.medium.com/membership)