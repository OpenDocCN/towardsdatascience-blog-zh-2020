<html>
<head>
<title>Build Your First News Data Pipeline With Python &amp; Newscatcher</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 和 Newscatcher 构建您的第一条新闻数据管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-first-news-data-pipeline-with-python-newscatcher-5fa18b8c5083?source=collection_archive---------35-----------------------#2020-03-24">https://towardsdatascience.com/build-your-first-news-data-pipeline-with-python-newscatcher-5fa18b8c5083?source=collection_archive---------35-----------------------#2020-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6898" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">新闻捕手</h2><div class=""/><div class=""><h2 id="78c3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">Newscatcher python 包可以让你从 3000 多个主要的在线新闻网站自动收集最新的新闻数据。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/f86c1173ac19ef3bc684b6458a3cc1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UcNpSHxDL4RAVudF"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@quinten149?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">昆腾·德格拉夫</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="c410" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我写这篇文章时，许多人不得不在家工作，有些人在此期间有很多空闲时间。你可以利用这段时间建立你的投资组合，提高你的技能或者开始一个副业。</p><p id="c134" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://github.com/kotartemiy/newscatcher" rel="noopener ugc nofollow" target="_blank"> Newscatcher </a>包使得新闻文章数据<strong class="lk jd">的收集和标准化变得容易，而不需要任何外部依赖</strong>。它是在我们开发名为<a class="ae lh" href="https://newscatcherapi.com/" rel="noopener ugc nofollow" target="_blank"> Newscatcher API </a>的主要<a class="ae lh" href="https://www.safegraph.com/blog/data-as-a-service-bible-everything-you-wanted-to-know-about-running-daas-companies?source=search_post---------0" rel="noopener ugc nofollow" target="_blank">数据即服务</a>产品时构建的。我们是开发者优先的团队，因此，我们尽可能开源，以便编码人员可以免费部分复制我们已经完成的工作。</p><p id="cc19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用我们的包的方法很简单，你<strong class="lk jd">传递网站 URL 作为输入，获取最新的文章作为输出</strong>。对于每篇文章，您都有一个<strong class="lk jd"> <em class="me">标题、完整的 URL、简短的描述、发表日期、作者</em> </strong>和一些更多的变量。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="aff6" class="mm mn it bd mo mp mq mr ms mt mu mv mw ki mx kj my kl mz km na ko nb kp nc nd bi translated">快速启动</h1><p id="ed35" class="pw-post-body-paragraph li lj it lk b ll ne kd ln lo nf kg lq lr ng lt lu lv nh lx ly lz ni mb mc md im bi translated">你需要 Python 3.7 以上版本</p><p id="ed4c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过 PyPI 安装软件包:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="2fa1" class="no mn it nk b gy np nq l nr ns">pip install newscatcher</span></pre><p id="8db5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从包中导入<strong class="lk jd"> <em class="me">新闻捕捉器</em> </strong>类:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="7743" class="no mn it nk b gy np nq l nr ns">from newscatcher import Newscatcher</span></pre><p id="b91a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，我们想看看<strong class="lk jd">nytimes.com</strong>的最后一篇文章是什么</p><p id="e2f1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你必须传递 URL 的基本形式——没有<code class="fe nt nu nv nk b">www.</code>，既没有<code class="fe nt nu nv nk b">https://</code>，也没有在 URL 末尾的<code class="fe nt nu nv nk b">/</code>。</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="5791" class="no mn it nk b gy np nq l nr ns">news_source = Newscatcher(‘nytimes.com’)</span><span id="23af" class="no mn it nk b gy nw nq l nr ns">last_news_list = news_source.news</span></pre><p id="b41e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"><em class="me">news _ source . news</em></strong>是<strong class="lk jd"> <em class="me"> feedparser 的列表。FeedParserDict </em> </strong>。<a class="ae lh" href="https://github.com/kurtmckee/feedparser" rel="noopener ugc nofollow" target="_blank"> Feedparser </a>是一个规范 RSS 提要的 Python 包。在我的另一篇中型文章中，我更详细地解释了什么是 RSS 以及如何使用 feedparser 处理它:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/collecting-news-articles-through-rss-atom-feeds-using-python-7d9a65b06f70"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">使用 Python 通过 RSS/Atom 提要收集新闻文章</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">或者如何停止依赖数据提供商</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo lb oa"/></div></div></a></div><p id="b166" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">需要知道的一件重要事情是<strong class="lk jd">每个 RSS/Atom 提要可能有自己的一组属性</strong>。尽管 feedparser 在结构化方面做得很好，但是不同的新闻发布者的文章属性可能会有所不同。</p><p id="727c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于 nytimes.com 的<strong class="lk jd">，物品属性列表如下:</strong></p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="94fb" class="no mn it nk b gy np nq l nr ns">article = last_news_list[0]<br/>article.keys()</span><span id="2f12" class="no mn it nk b gy nw nq l nr ns">dict_keys(['title', 'title_detail', 'links', 'link', 'id', 'guidislink', 'summary', 'summary_detail', 'published', 'published_parsed', 'tags', 'media_content', 'media_credit', 'credit'])</span></pre><p id="d1f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上面的代码中，我们获取名为<strong class="lk jd"> <em class="me"> last_news_list </em> </strong>的列表中的第一篇文章，并检查它的键(每篇文章都是一个字典)。</p><p id="a22b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们浏览主要属性时:</p><pre class="ks kt ku kv gt nj nk nl nm aw nn bi"><span id="4d07" class="no mn it nk b gy np nq l nr ns">print(article.title)</span><span id="5e19" class="no mn it nk b gy nw nq l nr ns">Coronavirus Live Updates: New York City Braces for a Deluge of Patients; Costs of Containment Grow</span><span id="8d9c" class="no mn it nk b gy nw nq l nr ns">print(article.summary)</span><span id="92cf" class="no mn it nk b gy nw nq l nr ns">Soldiers in Spain found nursing home patients abandoned. Officials warned that New York was experiencing a virus “attack rate” of five times that elsewhere in the United States. Washington edged closer to a $2 trillion relief package.</span><span id="b1b5" class="no mn it nk b gy nw nq l nr ns">print(article.link)</span><span id="3410" class="no mn it nk b gy nw nq l nr ns"><a class="ae lh" href="https://www.nytimes.com/2020/03/24/world/coronavirus-updates-maps.html" rel="noopener ugc nofollow" target="_blank">https://www.nytimes.com/2020/03/24/world/coronavirus-updates-maps.html</a></span><span id="8227" class="no mn it nk b gy nw nq l nr ns">print(article.published)</span><span id="d84f" class="no mn it nk b gy nw nq l nr ns">Tue, 24 Mar 2020 10:35:54 +0000</span></pre><p id="e9ea" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最有可能的是，你会在所有新闻出版商的文章数据中找到上述所有属性。</p><p id="a496" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">目前，最大的新闻出版商都在 Newscatcher 上。</strong>因此，你可以建立一个端到端的数据项目。此外，您还可以做许多不同的事情，例如:</p><ul class=""><li id="3748" class="op oq it lk b ll lm lo lp lr or lv os lz ot md ou ov ow ox bi translated">收集新闻文章并将其保存到某种数据库的管道(带重复数据删除)</li><li id="09d1" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md ou ov ow ox bi translated">+添加一个 NLP 层(例如，命名实体识别)</li><li id="c6e6" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md ou ov ow ox bi translated">+跟踪某个特定的主题</li><li id="0732" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md ou ov ow ox bi translated">+刮一篇文章的全文</li><li id="f715" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md ou ov ow ox bi translated">+可视化汇总数据</li></ul><p id="6955" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我建议在使用<strong class="lk jd"> newscatcher </strong>包时使用以下包/技术:</p><ol class=""><li id="f75c" class="op oq it lk b ll lm lo lp lr or lv os lz ot md pd ov ow ox bi translated"><a class="ae lh" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>存储和查询数据</li><li id="7f8d" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md pd ov ow ox bi translated"><a class="ae lh" href="https://github.com/codelucas/newspaper" rel="noopener ugc nofollow" target="_blank"> Newscaper3k </a> python 包自动抓取文章全文</li><li id="0ce3" class="op oq it lk b ll oy lo oz lr pa lv pb lz pc md pd ov ow ox bi translated"><a class="ae lh" href="https://github.com/explosion/spaCy" rel="noopener ugc nofollow" target="_blank">NLP 的空间</a></li></ol><p id="4c50" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">给那些想提高投资组合的人一个小提示。能够向招聘人员展示你有能力做一个端到端的项目会让你的简历脱颖而出。然而，你的工作的商业价值也很重要。因此，试着做一些服务于任何真实案例商业价值的东西。祝你好运。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt oa"><a href="https://medium.com/@kotartemiy" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">艺术媒体</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">阅读媒介上 Artem 的作品。固执己见的数据专家。newscatcherapi.com 和 politwire.com 的联合创始人…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="pe l ol om on oj oo lb oa"/></div></div></a></div><p id="35e3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你想支持我们的团队，你可以通过注册 Newscatcher API 的封闭测试版来帮助我们。我们的 API 允许你搜索过去发布的最相关的新闻。</p><p id="ad54" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://newscatcherapi.com/" rel="noopener ugc nofollow" target="_blank">报名参加公测</a></p></div></div>    
</body>
</html>