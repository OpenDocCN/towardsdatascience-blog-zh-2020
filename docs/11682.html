<html>
<head>
<title>Deep Learning with React Native (iOS only)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native æ·±åº¦å­¦ä¹ (ä»…é™ iOS)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/deep-learning-with-react-native-ios-only-8089fed59773?source=collection_archive---------19-----------------------#2020-08-13">https://towardsdatascience.com/deep-learning-with-react-native-ios-only-8089fed59773?source=collection_archive---------19-----------------------#2020-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e1f2f05af187d27312eff31a95f033e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dm0rZczn-IfHwL1o7rabUw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><div class=""/><p id="5e20" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><em class="ld">æ–‡ç« åŸè½½äº</em> <a class="ae le" href="https://dev.to/dittmarconsulting/deep-learning-with-react-native-ios-only-2470" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> dev.to </em> </a></p><h2 id="14a1" class="lf lg ji bd lh li lj dn lk ll lm dp ln kq lo lp lq ku lr ls lt ky lu lv lw lx bi translated">ä»‹ç»</h2><p id="7c76" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky mc la lb lc im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†æ¶µç›–å¦‚ä½•æ„å»ºç§»åŠ¨åº”ç”¨ç¨‹åºå’Œè®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ‰€æœ‰æ­¥éª¤ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨æ‰‹æœºçš„æ‘„åƒå¤´é¢„æµ‹ 0 åˆ° 9 ä¹‹é—´çš„æ‰‹å†™æ•°å­—ã€‚</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/4131e2f57d87f49cc44801e140d3b611.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/1*Bk4GS5ff5r2uSUfknBfZDw.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">é¢„æµ‹æ‰‹å†™æ•°å­—çš„åº”ç”¨ç¨‹åº(ä½œè€…å›¾ç‰‡)</p></figure><p id="1583" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä½†æ˜¯åœ¨æˆ‘ä»¬å¼€å§‹æ„å»ºç§»åŠ¨åº”ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æƒ³å‡ºä¸€ä¸ªé«˜å±‚æ¬¡çš„ç­–ç•¥ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ€è€ƒè¿‡ç¨‹:</p><ul class=""><li id="ebcc" class="mi mj ji kh b ki kj km kn kq mk ku ml ky mm lc mn mo mp mq bi translated">æˆ‘ä»¬æ˜¯æ„å»ºä¸€ä¸ªçº¯ React-Native ( <strong class="kh jj"> RN </strong>)è¿˜æ˜¯ä¸€ä¸ª<strong class="kh jj"> Expo </strong>åº”ç”¨ï¼Ÿ</li><li id="560e" class="mi mj ji kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq bi translated">æˆ‘ä»¬æƒ³ç”¨å“ªä¸ªç›¸æœºåº“ï¼Ÿ</li><li id="e5de" class="mi mj ji kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq bi translated">æˆ‘ä»¬éœ€è¦è£å‰ªå›¾åƒå—ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ ·çš„åº“ï¼Ÿ</li><li id="1350" class="mi mj ji kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq bi translated">æˆ‘ä»¬å¦‚ä½•è®­ç»ƒä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Ÿ</li><li id="c00c" class="mi mj ji kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq bi translated">æˆ‘ä»¬å¦‚ä½•å¯¹ç…§ç…§ç‰‡ä½¿ç”¨é‚£ä¸ªæ¨¡å‹ï¼Ÿ</li><li id="37a8" class="mi mj ji kh b ki mr km ms kq mt ku mu ky mv lc mn mo mp mq bi translated">æˆ‘ä»¬å¦‚ä½•æ˜¾ç¤ºç»“æœï¼Ÿ</li></ul><blockquote class="mw mx my"><p id="4e17" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">æ³¨æ„:æœ¬æ•™ç¨‹éœ€è¦ä¸€äº›å…ˆå†³æ¡ä»¶å’Œå¯¹ RN å’Œ Javascript çš„å…¨é¢ç†è§£ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªç»å¯¹çš„åˆå­¦è€…ï¼Œæˆ‘å»ºè®®åœ¨ç»§ç»­å­¦ä¹ æœ¬æ•™ç¨‹ä¹‹å‰ï¼Œå…ˆåœ¨ Youtubeã€Udemy æˆ– Egghead ä¸Šå­¦ä¹ ä¸€é—¨å¥½çš„è¯¾ç¨‹ã€‚</p></blockquote><h2 id="719b" class="lf lg ji bd lh li lj dn lk ll lm dp ln kq lo lp lq ku lr ls lt ky lu lv lw lx bi translated">æˆ‘ä»¬å¼€å§‹å§</h2><p id="26df" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky mc la lb lc im bi translated">æˆ‘å°†æŠŠè¿™ä¸ªæ•™ç¨‹åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†</p><p id="f13c" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae le" href="#1a09" rel="noopener ugc nofollow"> <strong class="kh jj">ç¬¬ä¸€ç« </strong>:åˆ›å»º RN åº”ç”¨</a> <br/> <a class="ae le" href="#c7cf" rel="noopener ugc nofollow"> <strong class="kh jj">ç¬¬äºŒç« </strong>:è®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹</a> <br/> <a class="ae le" href="#01f8" rel="noopener ugc nofollow"> <strong class="kh jj">ç¬¬ä¸‰ç« </strong>:å®ç°æ¨¡å‹ï¼Œé¢„æµ‹å¹¶å±•ç¤ºç»“æœ</a></p><h2 id="1a09" class="lf lg ji bd lh li lj dn lk ll lm dp ln kq lo lp lq ku lr ls lt ky lu lv lw lx bi translated">ç¬¬ 1 ç« :åˆ›å»º RN åº”ç”¨ç¨‹åº</h2><p id="cec5" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky mc la lb lc im bi translated">è¿˜è®°å¾—æˆ‘ä»¬æ€è€ƒè¿‡ç¨‹çš„ç¬¬ä¸€ç‚¹æ˜¯åˆ›å»ºä¸€ä¸ªè£¸åº”ç”¨è¿˜æ˜¯ Expo æ ·æ¿åº”ç”¨å—ï¼Ÿ</p><p id="c5e7" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç»è¿‡ä¸€äº›ç ”ç©¶ï¼Œæˆ‘å†³å®šåœ¨æœ¬åœ°åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚è¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼Œä¸éœ€è¦ä»äº‘æœåŠ¡å™¨è·å–æ¨¡å‹ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥è¿™æ ·åšã€‚</p><p id="e765" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="fe nc nd ne nf b"><a class="ae le" href="http://twitter.com/tensorflow/tfjs-react-native" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs-react-native</a></code>ä¸­ä¸å¹¸ä¸ Expo ä¸å…¼å®¹çš„<code class="fe nc nd ne nf b">bundleResourceIO</code>ã€‚</p><blockquote class="mw mx my"><p id="136a" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">æ­¤å¤–ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³ä½¿ç”¨ç›¸æœºï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ç‰©ç†æ‰‹æœºï¼Œè€Œä¸æ˜¯æ¨¡æ‹Ÿå™¨ã€‚ä¸ºæ­¤ï¼Œä½ å¿…é¡»æœ‰ä¸€ä¸ªè‹¹æœå¼€å‘è€…å¸æˆ·æ¥ç­¾ç½²ä½ çš„åº”ç”¨ç¨‹åºï¼Œå¦åˆ™ä½ å°†æ— æ³•è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚</p></blockquote><p id="f590" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºåº”ç”¨ç¨‹åº:</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="19e0" class="lf lg ji nf b gy nk nl l nm nn">$ react-native init MyFirstMLApp</span></pre><p id="07c1" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å®‰è£…è¿‡ç¨‹å®Œæˆåï¼Œè¯·ç¡®ä¿æ‚¨çš„æ‰€æœ‰è±†èšä¹Ÿå·²å®‰è£…ï¼</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="2781" class="lf lg ji nf b gy nk nl l nm nn">$ cd MyFirstMLApp<br/>$ npx pod-install</span></pre><p id="ba37" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è®©æˆ‘ä»¬åœ¨ä½ çš„ç‰©ç† iPhone ä¸Šç¬¬ä¸€æ¬¡è¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºã€‚æ‰“å¼€ Xcodeï¼Œæ‰¾åˆ°<code class="fe nc nd ne nf b">MyFirstMLApp.xcworkspace</code>å¹¶æ‰“å¼€ã€‚ä½¿ç”¨ lightning çº¿ç¼†å°† iPhone è¿æ¥åˆ° Macï¼Œç„¶åé€‰æ‹©æ‚¨çš„æ‰‹æœºã€‚é¦–æ¬¡æ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œè¯·æŒ‰æ’­æ”¾æŒ‰é’®ã€‚ä½ åº”è¯¥ä¼šåœ¨ä½ çš„ iPhone ä¸Šçœ‹åˆ°<strong class="kh jj">æ¬¢è¿ååº”</strong>å±å¹•ã€‚</p><p id="4a0f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ğŸ†<strong class="kh jj">ç‰›é€¼ï¼</strong></p><p id="4edf" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è®©æˆ‘ä»¬ä¸ºè¿™ä¸ªåº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº›åŒ…:</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="94df" class="lf lg ji nf b gy nk nl l nm nn">yarn add <a class="ae le" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-native-community/async-storage <a class="ae le" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-native-community/cameraroll <a class="ae le" href="http://twitter.com/tensorflow/tfjs" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs</a> <a class="ae le" href="http://twitter.com/tensorflow/tfjs-react-native" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs-react-native</a> expo-camera expo-gl expo-gl-cpp expo-image-manipulator react-native-fs react-native-svg react-native-unimodules victory-native</span></pre><p id="4005" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æœ€åï¼Œå®‰è£…å¯¼èˆªåº“ã€‚</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="c816" class="lf lg ji nf b gy nk nl l nm nn">yarn add react-native-navigation &amp;&amp; npx rnn-link</span></pre><p id="576a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åä¸€ä¸ªå‘½ä»¤ä¼šå°†å¯¼èˆªåŒ…æ·»åŠ åˆ° iOS å’Œ Android ä¸­ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰å®Œæˆã€‚</p><p id="f41a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ RN çš„è£¸æ¡†æ¶ï¼Œ<a class="ae le" href="https://docs.expo.io/bare/installing-unimodules/" rel="noopener ugc nofollow" target="_blank">å•æ¨¡å—</a>éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚</p><p id="4740" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¯·ç‚¹å‡»é“¾æ¥ï¼Œå¹¶æŒ‰ç…§ iOS éƒ¨åˆ†æ‰€è¿°ä¿®æ”¹<code class="fe nc nd ne nf b">Podfile</code>ã€‚é‚£æ¬¡è·‘æ­¥ä¹‹å</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="92af" class="lf lg ji nf b gy nk nl l nm nn">$ npx pod-install</span></pre><p id="a255" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¹¶æ„å»º Xcode é¡¹ç›®ï¼Œçœ‹çœ‹æ˜¯å¦æ‰€æœ‰ä¸œè¥¿éƒ½å·²æ­£ç¡®å®‰è£…ã€‚</p><p id="6f52" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç„¶åç»§ç»­å°†<a class="ae le" href="https://docs.expo.io/bare/installing-unimodules/" rel="noopener ugc nofollow" target="_blank">å•æ¨¡å—</a>çš„ä»£ç æ·»åŠ åˆ°<code class="fe nc nd ne nf b">AppDelegate.m</code>ä¸­ï¼Œå¹¶å†æ¬¡æ„å»ºé¡¹ç›®ã€‚</p><p id="d83e" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å› ä¸ºæˆ‘ä»¬æƒ³ç”¨ç›¸æœºæ‹ç…§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™<code class="fe nc nd ne nf b">Info.plist</code>æ·»åŠ å‡ ä¸ªç§é’¥</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="1985" class="lf lg ji nf b gy nk nl l nm nn">&lt;?xml version=â€1.0" encoding=â€UTF-8"?&gt;<br/>&lt;!DOCTYPE plist PUBLIC â€œ-//Apple//DTD PLIST 1.0//ENâ€ â€œ<a class="ae le" href="http://www.apple.com/DTDs/PropertyList-1.0.dtd" rel="noopener ugc nofollow" target="_blank">http://www.apple.com/DTDs/PropertyList-1.0.dtd</a>"&gt;<br/>&lt;plist version=â€1.0"&gt;<br/>  &lt;dict&gt;<br/>    <br/>    &lt;! â€” Required for iOS 10 and higher --&gt;<br/>    &lt;key&gt;NSCameraUsageDescription&lt;/key&gt;<br/>    &lt;string&gt;We need to use the camera for taking pictures of the digits&lt;/string&gt;</span><span id="af41" class="lf lg ji nf b gy no nl l nm nn">&lt;! â€” Required for iOS 11 and higher: include this only if you are planning to use the camera roll --&gt;<br/>    &lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;<br/>    &lt;string&gt;We need to access the photo library to upload the images&lt;/string&gt;</span><span id="fa40" class="lf lg ji nf b gy no nl l nm nn">&lt;! â€” Include for only if you are planning to use the camera roll --&gt;<br/>    &lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;<br/>    &lt;string&gt;We need to access the photo library to upload the images&lt;/string&gt;</span><span id="d6f9" class="lf lg ji nf b gy no nl l nm nn">&lt;! â€” Include this only if you are planning to use the microphone for video recording --&gt;<br/>    &lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;<br/>    &lt;string&gt;We need to access the microphone&lt;/string&gt;<br/> <br/>    &lt;key&gt;CFBundleDevelopmentRegion&lt;/key&gt;<br/>    &lt;string&gt;en&lt;/string&gt;</span></pre><p id="53ff" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚æœ Xcode æ„å»ºè‰¯å¥½ï¼Œæ‚¨å¯ä»¥ç»§ç»­ä» Xcode è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ–è€…åªä½¿ç”¨ç»ˆç«¯ã€‚</p><p id="9975" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚æœä½ å†³å®šä»ç°åœ¨å¼€å§‹ä»å‘½ä»¤è¡Œè¿è¡Œè¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œåƒæˆ‘ä¸€æ ·ï¼Œè¯·å°†<code class="fe nc nd ne nf b">â€” device</code>æ·»åŠ åˆ°ä½ çš„<code class="fe nc nd ne nf b">package.json</code>æ–‡ä»¶çš„<code class="fe nc nd ne nf b">ios</code>è„šæœ¬ä¸­å¹¶è¿è¡Œ</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="eee1" class="lf lg ji nf b gy nk nl l nm nn">yarn ios</span></pre><p id="cef8" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä¸€æ—¦åº”ç”¨ç¨‹åºåœ¨ä½ çš„ iPhone ä¸Šå¯åŠ¨ï¼Œä¸è¦æƒŠè®¶ä½ å†ä¹Ÿçœ‹ä¸åˆ°æ¬¢è¿é¡µé¢äº†ã€‚é‚£æ˜¯å› ä¸ºæˆ‘ä»¬ç”¨äº†<code class="fe nc nd ne nf b">react-native-navigation</code>ã€‚ä½†æ˜¯ä½ åº”è¯¥çœ‹åˆ°åŠ è½½å±å¹•<strong class="kh jj"> MyFirstMLApp </strong></p><p id="4026" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç°åœ¨æ˜¯æ—¶å€™åˆ›å»ºæˆ‘ä»¬çš„ 2 ä¸ªå±å¹•ï¼Œå¹¶å°†è¿™äº›å±å¹•çš„å¯¼èˆªæ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚</p><p id="4ce9" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¯·åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º<code class="fe nc nd ne nf b">src/screens/CameraView</code>å’Œ<code class="fe nc nd ne nf b">src/screens/EvaluationView</code>ç›®å½•ã€‚</p><p id="9d65" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨<code class="fe nc nd ne nf b">src/screens/CameraView</code>ä¸­åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne nf b">index.js</code>æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="6de0" class="lf lg ji nf b gy nk nl l nm nn">import React, { useState, useRef, useEffect } from "react";<br/>import {<br/>  SafeAreaView,<br/>  TouchableOpacity,<br/>  View,<br/>  Text,<br/>  StatusBar,<br/>} from "react-native";<br/>import { Navigation } from "react-native-navigation";<br/>import { Camera } from "expo-camera";</span><span id="04f4" class="lf lg ji nf b gy no nl l nm nn">const MASK_DIMENSION = 100;</span><span id="c648" class="lf lg ji nf b gy no nl l nm nn">export const CameraView = (props) =&gt; {<br/>  const [hasPermission, setHasPermission] = useState(null);<br/>  const [showShutterButton, setShowShutterButton] = useState(false);<br/>  const cameraRef = useRef();</span><span id="e2ee" class="lf lg ji nf b gy no nl l nm nn">useEffect(() =&gt; {<br/>    (async () =&gt; {<br/>      const { status } = await Camera.requestPermissionsAsync();<br/>      setHasPermission(status === "granted");<br/>    })();<br/>  }, []);</span><span id="b0b9" class="lf lg ji nf b gy no nl l nm nn">const handlePictureProcessing = async () =&gt; {<br/>    goToEvaluationView();<br/>  };</span><span id="70ca" class="lf lg ji nf b gy no nl l nm nn">const goToEvaluationView = () =&gt; {<br/>    Navigation.push(props.componentId, {<br/>      component: {<br/>        name: "evaluationView",<br/>        options: {<br/>          topBar: {<br/>            title: {<br/>              text: "Evaluating ML result",<br/>              color: "white",<br/>            },<br/>            background: {<br/>              color: "#4d089a",<br/>            },<br/>            backButton: {<br/>              color: "white",<br/>              showTitle: false,<br/>            },<br/>          },<br/>        },<br/>        passProps: {},<br/>      },<br/>    });<br/>  };</span><span id="e3cf" class="lf lg ji nf b gy no nl l nm nn">if (hasPermission === null) {<br/>    return &lt;View /&gt;;<br/>  }</span><span id="eae3" class="lf lg ji nf b gy no nl l nm nn">if (hasPermission === false) {<br/>    return &lt;Text&gt; No access to camera &lt;/Text&gt;;<br/>  }</span><span id="2a4f" class="lf lg ji nf b gy no nl l nm nn">return (<br/>    &lt;React.Fragment&gt;<br/>      &lt;StatusBar barStyle="light-content" /&gt;<br/>      &lt;SafeAreaView style={styles.safeArea}&gt;<br/>        &lt;Camera<br/>          ref={cameraRef}<br/>          type={Camera.Constants.Type.back}<br/>          whiteBalance={Camera.Constants.WhiteBalance.auto}<br/>          onCameraReady={() =&gt; setShowShutterButton(true)}&gt;<br/>          &lt;View style={styles.cameraView}&gt;<br/>            &lt;View style={styles.mask} /&gt;<br/>            {showShutterButton &amp;&amp; (<br/>              &lt;TouchableOpacity<br/>                style={styles.shutterButton}<br/>                onPress={handlePictureProcessing}&gt;<br/>                &lt;Text style={styles.shutterButtonText}&gt;<br/>                  Take a picture<br/>                &lt;/Text&gt;<br/>              &lt;/TouchableOpacity&gt;<br/>            )}<br/>          &lt;/View&gt;<br/>        &lt;/Camera&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>};</span><span id="1a10" class="lf lg ji nf b gy no nl l nm nn">const styles = {<br/>  safeArea: {<br/>    backgroundColor: "#4d089a",<br/>  },<br/>  cameraView: {<br/>    height: "100%",<br/>    justifyContent: "center",<br/>    alignItems: "center",<br/>    backgroundColor: "transparent",<br/>  },<br/>  mask: {<br/>    height: MASK_DIMENSION,<br/>    width: MASK_DIMENSION,<br/>    borderWidth: 3,<br/>    borderColor: "white",<br/>    borderStyle: "dotted",<br/>    borderRadius: 15,<br/>  },<br/>  shutterButton: {<br/>    position: "absolute",<br/>    bottom: 0,<br/>    width: 150,<br/>    height: 40,<br/>    justifyContent: "center",<br/>    alignItems: "center",<br/>    borderWidth: 1,<br/>    borderColor: "white",<br/>    borderRadius: 15,<br/>    marginBottom: 20,<br/>  },<br/>  shutterButtonText: {<br/>    fontSize: 18,<br/>    color: "white",<br/>  },<br/>};</span><span id="b5f2" class="lf lg ji nf b gy no nl l nm nn">CameraView.options = {<br/>  statusBar: {<br/>    backgroundColor: null,<br/>  },<br/>  topBar: {<br/>    title: {<br/>      text: "Take a picture",<br/>      color: "white",<br/>    },<br/>    background: {<br/>      color: "#4d089a",<br/>    },<br/>  },<br/>  tapBar: {<br/>    background: {<br/>      color: "#4d089a",<br/>    },<br/>  },<br/>};</span></pre><p id="89db" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨<code class="fe nc nd ne nf b">src/screens/EvaluationView</code>ä¸­åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne nf b">index.js</code>æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="9460" class="lf lg ji nf b gy nk nl l nm nn">import React from "react";<br/>import { SafeAreaView, View, Text, StatusBar } from "react-native";</span><span id="eadd" class="lf lg ji nf b gy no nl l nm nn">export const EvaluationView = (props) =&gt; {<br/>  return (<br/>    &lt;React.Fragment&gt;<br/>       &lt;StatusBar barStyle="light-content" /&gt;<br/>      &lt;SafeAreaView style={styles.safeArea}&gt;<br/>        &lt;View style={styles.container}&gt;<br/>           &lt;Text style={styles.headerText}&gt;ANALYSIS&lt;/Text&gt;<br/>        &lt;/View&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>};</span><span id="c0ed" class="lf lg ji nf b gy no nl l nm nn">const styles = {<br/>  safeArea: {<br/>    backgroundColor: "#4d089a",<br/>  },<br/>  container: {<br/>    height: "100%",<br/>    alignItems: "center",<br/>    backgroundColor: "white",<br/>  },<br/>  headerText: {<br/>    fontSize: 20,<br/>    fontWeight: "500",<br/>    color: "#4d089a",<br/>    margin: 20,<br/>  },<br/>};</span></pre><p id="9a28" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç„¶åç”¨ä¸‹é¢çš„ä»£ç è¦†ç›–æ ¹ç›®å½•ä¸­çš„<code class="fe nc nd ne nf b">index.js</code>æ–‡ä»¶:</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="c590" class="lf lg ji nf b gy nk nl l nm nn">import { Navigation } from "react-native-navigation";<br/>import { CameraView } from "./src/screens/CameraView";<br/>import { EvaluationView } from "./src/screens/EvaluationView";</span><span id="83c5" class="lf lg ji nf b gy no nl l nm nn">Navigation.registerComponent("cameraView", () =&gt; CameraView);<br/>Navigation.registerComponent("evaluationView", () =&gt; EvaluationView);</span><span id="ccca" class="lf lg ji nf b gy no nl l nm nn">Navigation.setDefaultOptions({<br/>  statusBar: {<br/>    style: "light",<br/>    backgroundColor: "#4d089a",<br/>  },<br/>  topBar: {<br/>    title: {<br/>      color: "white",<br/>    },<br/>    background: {<br/>      color: "#4d089a",<br/>    },<br/>    backButton: {<br/>      color: "white",<br/>      showTitle: false,<br/>    },<br/>  },<br/>});</span><span id="e260" class="lf lg ji nf b gy no nl l nm nn">Navigation.events().registerAppLaunchedListener(() =&gt; {<br/>  Navigation.setRoot({<br/>    root: {<br/>      stack: {<br/>        children: [<br/>          {<br/>            component: {<br/>              name: "cameraView",<br/>            },<br/>          },<br/>        ],<br/>      },<br/>    },<br/>  });<br/>});</span></pre><p id="d3ff" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æœ€åï¼Œæ‚¨å¯ä»¥åˆ é™¤<code class="fe nc nd ne nf b">App.js</code>æ–‡ä»¶ï¼Œå› ä¸ºä¸å†éœ€è¦å®ƒäº†ã€‚</p><p id="c294" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">é‡å¯ä½ çš„ metro bundlerï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°è¿™ä¸ªåº”ç”¨ç¨‹åºæ˜¯è¿™æ ·è¿è¡Œçš„â€¦</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/b7d1573c16b3924cb1c0d8949ae2657e.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/1*MnLgHukfbKevE2GqvUJ5fw.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">å¸¦æœ‰å·¥ä½œå¯¼èˆªçš„åº”ç”¨ç¨‹åºçš„å±å¹•å½•åˆ¶(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="34a6" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ğŸ†<strong class="kh jj">æ­å–œæ­å–œï¼</strong></p><p id="c7c1" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ‚¨å·²ç»åˆ›å»ºäº†åŸºæœ¬åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨ç¨‹åºè¿˜ä¸èƒ½æ‹ç…§ï¼Œä½†å¯ä»¥ä»ä¸€ä¸ªå±å¹•å¯¼èˆªåˆ°å¦ä¸€ä¸ªå±å¹•ã€‚</p><h2 id="c7cf" class="lf lg ji bd lh li lj dn lk ll lm dp ln kq lo lp lq ku lr ls lt ky lu lv lw lx bi translated">ç¬¬äºŒç« :è®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹</h2><p id="56fe" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky mc la lb lc im bi translated">æœ€åˆï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<a class="ae le" href="https://www.kaggle.com/c/digit-recognizer/data" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ªæ¥è‡ª<strong class="kh jj"> Kaggle </strong> </a> <strong class="kh jj"> </strong>çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œä½†æ˜¯è®©è¿™ä¸ªåº”ç”¨ç¨‹åºå·¥ä½œèµ·æ¥çš„åŠªåŠ›æ˜¯å·¨å¤§çš„ã€‚</p><p id="12e0" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘ä¸å¾—ä¸åˆ›å»ºäº†ä¸€ä¸ª<strong class="kh jj"> AWS EC2 æ·±åº¦å­¦ä¹  AMI(Amazon Linux 2)30.1 ç‰ˆæœ¬å®ä¾‹</strong>å¹¶ä½¿ç”¨ SSH è®¿é—®ï¼Œå› ä¸ºæˆ‘çš„ Macbook ä¸æ”¯æŒ CUDAã€‚(è®­ç»ƒæ¨¡å‹éœ€è¦ GPU æ”¯æŒ)<br/>ç„¶åæˆ‘å¿…é¡»ä» Kaggle å¤åˆ¶<a class="ae le" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"><strong class="kh jj">Jupyter</strong></a><strong class="kh jj"/>ç¬”è®°æœ¬ï¼Œè¿è¡Œç¬”è®°æœ¬åœ¨ AWS å®ä¾‹ä¸Šè®­ç»ƒæ¨¡å‹(å®ƒè¿è¡Œäº† 3 ä¸ªå°æ—¶)å¹¶å°†æ¨¡å‹ç§»å›æˆ‘çš„é¡¹ç›®ã€‚<br/>æ­¤å¤–ï¼Œæˆ‘ä¸å¾—ä¸å®‰è£…<strong class="kh jj"> OpenGL </strong>æ¥ä¿®æ”¹å›¾åƒï¼Œå¹¶ç¼–å†™äº†ä¸€ä¸ªéå¸¸å¤æ‚çš„è„šæœ¬æ¥å°† base64 å­—ç¬¦ä¸²æ•´å½¢ä¸ºå¼ é‡ï¼Œä»¥åŒ¹é…æ¨¡å‹<code class="fe nc nd ne nf b">[1, 28, 28, 1]</code>çš„é¢„æœŸè¾“å…¥ã€‚</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi np"><img src="../Images/f762076ab58c876e54817a3651829ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/1*tEa0cwfoHxvWm6Sm6jgOFw.gif"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">æ¨¡å‹å¼€å§‹åœ¨ AWS ä¸Šè®­ç»ƒ(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="7124" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ‰€æœ‰è¿™äº›è®©æˆ‘é‡æ–°æ€è€ƒå¦‚ä½•å†™è¿™ç¯‡æ•™ç¨‹ã€‚æ¯•ç«Ÿï¼Œæœ¬æ•™ç¨‹åº”è¯¥æ˜¯ä¸ºé‚£äº›åªæƒ³ç©æœºå™¨å­¦ä¹ æ¨¡å‹è€Œæ²¡æœ‰äº‹å…ˆå­¦ä¹ <strong class="kh jj"> Python </strong>ã€<strong class="kh jj"> Jupyter </strong>ã€<strong class="kh jj"> Tensorflow </strong>å’Œ<strong class="kh jj"> Keras </strong>çš„äººå‡†å¤‡çš„ã€‚æ­¤å¤–ï¼Œæ•™ç¨‹çš„é•¿åº¦å°†æ˜¯ç°åœ¨çš„ 5 å€ã€‚</p><blockquote class="mw mx my"><p id="70cb" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">æ³¨:å¦‚æœä½ æƒ³å­¦ä¹ å¦‚ä½•ä½¿ç”¨<strong class="kh jj">tensor flow</strong>&amp;<strong class="kh jj">Keras</strong>æˆ‘ç”¨<a class="ae le" href="https://www.youtube.com/channel/UC4UJ26WkceqONNF5S26OiVw" rel="noopener ugc nofollow" target="_blank"> <strong class="kh jj"> deeplizard </strong> </a>æ‰¾åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„å…³äºæ·±åº¦å­¦ä¹ çš„ Youtube é¢‘é“ï¼Œå†…å®¹éå¸¸ä¸°å¯Œï¼Œä¹Ÿå¾ˆç¬¦åˆæˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­æƒ³è¦åšçš„äº‹æƒ…ã€‚<br/>è¿˜æœ‰ï¼Œ<a class="ae le" href="https://www.udemy.com/course/complete-machine-learning-and-data-science-zero-to-mastery/learn/lecture/16488468" rel="noopener ugc nofollow" target="_blank"><strong class="kh jj">Udemy</strong></a><strong class="kh jj"/>ä¸Šçš„è¿™é—¨è¯¾ä¹Ÿä¸é”™ï¼Œå¯æƒœä¸æ˜¯å…è´¹çš„ã€‚<em class="ji">ğŸ˜•</em></p></blockquote><p id="748b" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åæ­£ä¸ºäº†è¿™ä¸ªæ•™ç¨‹ï¼Œæˆ‘å†³å®šç”¨<a class="ae le" href="https://teachablemachine.withgoogle.com/train/image" rel="noopener ugc nofollow" target="_blank"> <strong class="kh jj">è°·æ­Œçš„å¯æ•™æœºå™¨</strong> </a>æ¥è®­ç»ƒå›¾åƒã€‚</p><p id="a610" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™ä¸ªæƒ³æ³•æ˜¯ç”¨æˆ‘ä»¬åˆšåˆšå»ºç«‹çš„åº”ç”¨ç¨‹åºæ‹æ‘„<strong class="kh jj"> 28 x 28 åƒç´ </strong>çš„å›¾åƒï¼Œå°†å›¾åƒä¸Šä¼ åˆ°å¯æ•™æœºå™¨ï¼Œå¹¶å°†è®­ç»ƒå¥½çš„æ¨¡å‹ä¸‹è½½å›æˆ‘ä»¬çš„é¡¹ç›®ã€‚</p><blockquote class="mw mx my"><p id="5111" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">ä»¥é˜²ä½ é—®æˆ‘ä¸ºä»€ä¹ˆç”¨ 28 x 28 åƒç´ çš„å›¾ç‰‡ï¼Ÿè¿™æ˜¯æˆ‘é¦–å…ˆä½¿ç”¨çš„æ¨¡å‹çš„åŸå§‹è¾“å…¥å¤§å°ã€‚æ‰€ä»¥æˆ‘åšæŒäº†ä¸‹æ¥ã€‚</p></blockquote><p id="9a0d" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¿…é¡»è£å‰ªå¹¶ä¿å­˜æ‹æ‘„çš„å›¾åƒåˆ°ç›¸æœºåº“ä¸­ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ã€‚</p><p id="cec4" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¯·åœ¨<code class="fe nc nd ne nf b">CameraView</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne nf b">helper.js</code>æ–‡ä»¶ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹ä»£ç :</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="54d2" class="lf lg ji nf b gy nk nl l nm nn">import { Dimensions } from "react-native";<br/>import * as ImageManipulator from "expo-image-manipulator";<br/>import CameraRoll from "<a class="ae le" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-native-community/cameraroll";</span><span id="45f1" class="lf lg ji nf b gy no nl l nm nn">const { height: DEVICE_HEIGHT, width: DEVICE_WIDTH } = Dimensions.get("window");</span><span id="adfb" class="lf lg ji nf b gy no nl l nm nn">// got the dimension from the trained data of the *Teachable Machine*; pixel resolution conversion (8x)<br/>export const BITMAP_DIMENSION = 224;</span><span id="94b4" class="lf lg ji nf b gy no nl l nm nn">export const cropPicture = async (imageData, maskDimension) =&gt; {<br/>  try {<br/>    const { uri, width, height } = imageData;<br/>    const cropWidth = maskDimension * (width / DEVICE_WIDTH);<br/>    const cropHeight = maskDimension * (height / DEVICE_HEIGHT);<br/>    const actions = [<br/>      {<br/>        crop: {<br/>          originX: width / 2 - cropWidth / 2,<br/>          originY: height / 2 - cropHeight / 2,<br/>          width: cropWidth,<br/>          height: cropHeight,<br/>        },<br/>      },<br/>      {<br/>        resize: {<br/>          width: BITMAP_DIMENSION,<br/>          height: BITMAP_DIMENSION,<br/>        },<br/>      },<br/>    ];<br/>    const saveOptions = {<br/>      compress: 1,<br/>      format: ImageManipulator.SaveFormat.JPEG,<br/>      base64: false,<br/>    };<br/>    return await ImageManipulator.manipulateAsync(uri, actions, saveOptions);<br/>  } catch (error) {<br/>    console.log("Could not crop &amp; resize photo", error);<br/>  }<br/>};</span><span id="e4ab" class="lf lg ji nf b gy no nl l nm nn">export const saveToCameraRoll = async (uri) =&gt; {<br/>  try {<br/>    return await CameraRoll.save(uri, "photo");<br/>  } catch (error) {<br/>    console.log("Could not save the image", error);<br/>  }<br/>};</span></pre><p id="5ceb" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">åœ¨<code class="fe nc nd ne nf b">src/screens/CameraView/index.js</code>ä¸­æ·»åŠ å¯¼å…¥è¯¥æ–‡ä»¶</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="6f6b" class="lf lg ji nf b gy nk nl l nm nn">import { cropPicture, saveToCameraRoll } from â€˜./helpersâ€™;</span></pre><p id="d29b" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ·»åŠ <code class="fe nc nd ne nf b">takePicture</code>åŠŸèƒ½ï¼Œå¹¶ä¿®æ”¹<code class="fe nc nd ne nf b">handlePictureProcessing</code>åŠŸèƒ½</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="be93" class="lf lg ji nf b gy nk nl l nm nn">const handlePictureProcessing = async () =&gt; {<br/>  const imageData = await takePicture();<br/>  const croppedData = await cropPicture(imageData, MASK_DIMENSION);<br/>  await saveToCameraRoll(croppedData.uri);<br/>  // we don't want to go to the evaluation view now<br/>  //goToEvaluationView();<br/>};</span><span id="6836" class="lf lg ji nf b gy no nl l nm nn">const takePicture = async () =&gt; {<br/>  const options = {<br/>    quality: 0.1,<br/>    fixOrientation: true,<br/>  };<br/>  try {<br/>    return await cameraRef.current.takePictureAsync(options);<br/>  } catch (error) {<br/>    console.log("Could not take photo", error);<br/>  }<br/>};</span></pre><p id="dfd9" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æ³¨é‡Šæ‰äº†è¡Œ<code class="fe nc nd ne nf b">//goToEvaluationView();</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šè½¬åˆ°å¦ä¸€ä¸ªå±å¹•ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥è¿ç»­æ‹æ‘„ä»»æ„å¤šå¼ ç…§ç‰‡ã€‚ç°åœ¨ï¼Œæ‰€æœ‰ç…§ç‰‡éƒ½å°†ä¿å­˜åœ¨æ‚¨çš„ç…§ç‰‡åº“ä¸­ã€‚</p><p id="2c7a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªä»»åŠ¡æ˜¯åœ¨ä¸€å¼ çº¸ä¸Šå†™å‡ºå°½å¯èƒ½å¤šçš„ 0 åˆ° 9 ä¹‹é—´çš„æ•°å­—å˜åŒ–ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ•°å­—ã€é¢œè‰²å’Œç¬”çš„å½¢çŠ¶è¶Šå¤šï¼Œé¢„æµ‹å°±è¶Šå‡†ç¡®ã€‚</p><p id="3981" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘å¾ˆæ‡’ï¼Œæœ€åæ¯ä¸ªæ•°å­—å¤§æ¦‚æœ‰ 10 ä¸ªå˜åŒ–ï¼Œä½†æ˜¯å¯¹äºä¸€äº›æ•°å­—ï¼Œæ¯”å¦‚ 4 å’Œ 8ï¼Œé¢„æµ‹æœ‰ç‚¹åå·®ã€‚</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nq"><img src="../Images/a716392f0218a1e3432fc3260567d082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVMikcy1zDrnxif2UV9dmw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">ä¹¦å†™æ•°å­—å½¢çŠ¶çš„å˜åŒ–(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="ef17" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æ‰€ä»¥ç”±ä½ å†³å®šè®©<strong class="kh jj">å¯æ•™æœºå™¨</strong>è®­ç»ƒå¤šå°‘ä¸ªæ•°å­—ã€‚</p><p id="9843" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å½“ä½ å®Œæˆæ‹æ‘„å›¾åƒåï¼ŒæŠŠå®ƒä»¬å…¨éƒ¨ç©ºæŠ•å›ä½ çš„ Macï¼Œä»é‚£é‡ŒæŠŠå®ƒä»¬ä¸Šä¼ åˆ°<a class="ae le" href="https://teachablemachine.withgoogle.com/train/image" rel="noopener ugc nofollow" target="_blank"> <strong class="kh jj">å¯æ•™æœºå™¨</strong> </a>å¹¶å¼€å§‹è®­ç»ƒå®ƒä»¬ã€‚</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/8cf13493668b673cafb581dac2abdf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oPs5sYmr8xNV73f8ncbEMg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">è®­ç»ƒå¥½çš„æ¨¡å‹æˆªå›¾(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="2e91" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å®Œæˆåï¼Œä½ å¯ä»¥ç”¨ä½ çš„åº”ç”¨ç¨‹åºæ‹æ‘„æ›´å¤šçš„ç…§ç‰‡å¹¶ä¸Šä¼ ï¼Œä»¥æµ‹è¯•è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚</p><p id="897f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚æœä½ å¯¹ç»“æœæ»¡æ„ï¼Œç‚¹å‡»<code class="fe nc nd ne nf b">Export Model</code>-&gt;-<code class="fe nc nd ne nf b">Tensorflow.js </code>-&gt;-<code class="fe nc nd ne nf b">Download</code>-&gt;-<code class="fe nc nd ne nf b">Download my model</code>ï¼Œä¼šä¸‹è½½ä¸€ä¸ª<strong class="kh jj"> ZIP </strong>æ–‡ä»¶ã€‚</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/0537852175dbc0ad7652b0e4c91a22ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*iaOjhH078xGv_M86SyMuHg.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">ä¸‹è½½æ¨¡å‹ poup(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="404f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è§£å‹ zip æ–‡ä»¶ï¼Œåœ¨<code class="fe nc nd ne nf b">src</code>ç›®å½•(<code class="fe nc nd ne nf b">src/model</code>)ä¸‹åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne nf b">model</code>æ–‡ä»¶å¤¹ï¼Œå¹¶å°†<code class="fe nc nd ne nf b">model.json</code>å’Œ<code class="fe nc nd ne nf b">weights.bin</code>å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚</p><p id="3292" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ metro å¤„ç†æ–°çš„æ–‡ä»¶æ ¼å¼:<code class="fe nc nd ne nf b">*.bin</code>ã€‚æ‰€ä»¥è¯·è¿™æ ·ä¿®æ”¹<code class="fe nc nd ne nf b">metro.config.js</code>:</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="65f8" class="lf lg ji nf b gy nk nl l nm nn">const { getDefaultConfig } = require("metro-config");</span><span id="0822" class="lf lg ji nf b gy no nl l nm nn">module.exports = (async () =&gt; {<br/>  const {<br/>    resolver: { assetExts },<br/>  } = await getDefaultConfig();<br/>  return {<br/>    transformer: {<br/>      getTransformOptions: async () =&gt; ({<br/>        transform: {<br/>          experimentalImportSupport: false,<br/>          inlineRequires: false,<br/>        },<br/>      }),<br/>    },<br/>    resolver: {<br/>      assetExts: [...assetExts, "bin"],<br/>    },<br/>  };<br/>})();</span></pre><p id="60b8" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">å¤ªå¥½äº†ï¼ç°åœ¨æˆ‘ä»¬çš„æ¨¡å‹å·²ç»åœ¨é¡¹ç›®ä¸­äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹ä½¿ç”¨æ¨¡å‹æ¥é¢„æµ‹æ•°å­—ã€‚</strong></p><h2 id="01f8" class="lf lg ji bd lh li lj dn lk ll lm dp ln kq lo lp lq ku lr ls lt ky lu lv lw lx bi translated">ç¬¬ä¸‰ç« :å®ç°æ¨¡å‹ï¼Œé¢„æµ‹å¹¶å±•ç¤ºç»“æœ</h2><p id="1de9" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky mc la lb lc im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬ä¸æƒ³å†ä¿å­˜ç…§ç‰‡åˆ°æˆ‘ä»¬çš„ç…§ç‰‡åº“ä¸­ã€‚(é™¤éä½ æ„¿æ„)ã€‚</p><p id="85e0" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">äºæ˜¯æ³¨é‡Šæ‰äº†é‚£è¡Œ<code class="fe nc nd ne nf b">//await saveToCameraRoll(croppedData.uri);</code>ã€‚<br/>æˆ‘ä»¬è¿˜éœ€è¦è£å‰ªå›¾åƒçš„<code class="fe nc nd ne nf b">base64 string</code>ï¼Œæœ€åï¼Œæˆ‘ä»¬æƒ³é€šè¿‡<code class="fe nc nd ne nf b">props</code>å°†é‚£ä¸ª<code class="fe nc nd ne nf b">base64 string</code>ä¼ é€’ç»™<code class="fe nc nd ne nf b">EvaluationView</code>ã€‚</p><p id="2365" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è®©æˆ‘ä»¬åƒè¿™æ ·å†æ¬¡ä¿®æ”¹æˆ‘ä»¬çš„ CameraView <code class="fe nc nd ne nf b">src/screens/CameraView/index.js</code>æ–‡ä»¶:</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="788d" class="lf lg ji nf b gy nk nl l nm nn">const handlePictureProcessing = async () =&gt; {<br/>  const imageData = await takePicture();<br/>  const croppedData = await cropPicture(imageData, MASK_DIMENSION);<br/>  // await saveToCameraRoll(croppedData.uri);<br/>  goToEvaluationView(croppedData);<br/>};</span><span id="cf31" class="lf lg ji nf b gy no nl l nm nn">const goToEvaluationView = (croppedData) =&gt; {<br/>  Navigation.push(props.componentId, {<br/>    component: {<br/>      name: "evaluationView",<br/>      options: {<br/>        topBar: {<br/>          title: {<br/>            text: "Evaluating ML result",<br/>            color: "white",<br/>          },<br/>          background: {<br/>            color: "#4d089a",<br/>          },<br/>          backButton: {<br/>            color: "white",<br/>            showTitle: false,<br/>          },<br/>        },<br/>      },<br/>      passProps: {<br/>        base64: croppedData.base64 || null,<br/>      },<br/>    },<br/>  });<br/>};</span></pre><p id="f7f9" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ğŸ†å¤ªæ£’äº†ï¼</p><p id="9f59" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è®©æˆ‘ä»¬åœ¨<code class="fe nc nd ne nf b">EvaluationView</code>ä¸­æ˜¾ç¤ºå›¾åƒã€‚ä»<code class="fe nc nd ne nf b">react-native</code>å¯¼å…¥<strong class="kh jj">å›¾åƒ</strong>å¹¶å°†<strong class="kh jj">å›¾åƒ</strong>ç»„ä»¶æ·»åŠ åˆ°<code class="fe nc nd ne nf b">View</code>å®¹å™¨ä¸­</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="be8e" class="lf lg ji nf b gy nk nl l nm nn">&lt;View style={styles.container}&gt;<br/>  &lt;Text style={styles.headerText}&gt;ANALYSIS&lt;/Text&gt;<br/>  &lt;Image<br/>    style={styles.imageContainer}<br/>    source={{ uri: `data:image/gif;base64,${props.base64}` }}<br/>    resizeMethod="scale"<br/>  /&gt;<br/>&lt;/View&gt;;</span></pre><p id="a984" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¹¶åœ¨<code class="fe nc nd ne nf b">headerText</code>æ ·å¼ä¸‹æ·»åŠ <code class="fe nc nd ne nf b">imageContainer</code>çš„æ ·å¼ã€‚</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="b23e" class="lf lg ji nf b gy nk nl l nm nn">imageContainer: {<br/> height: 300,<br/> width: 300,<br/>},</span></pre><p id="1b73" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æœ€åä¸€æ­¥æ˜¯è½¬åˆ°<code class="fe nc nd ne nf b">src/screens/CameraView/helpers.js</code>æ–‡ä»¶ï¼Œå°†<code class="fe nc nd ne nf b">saveOptions</code>æ›´æ”¹ä¸º<code class="fe nc nd ne nf b">base64: true</code>ã€‚</p><p id="beb7" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ğŸ†ç§ï¼</p><p id="ded9" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä½ åº”è¯¥åœ¨<em class="ld">åˆ†æ</em>æ–‡æœ¬ä¸‹æ–¹çš„<code class="fe nc nd ne nf b">EvaluationView</code>ä¸­çœ‹åˆ°æ‹æ‘„çš„å›¾åƒã€‚</p><p id="bb39" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç°åœ¨æˆ‘ä»¬è¦æ˜¾ç¤ºé¢„æµ‹ç»“æœã€‚æˆ‘ä»¬éœ€è¦å°†<strong class="kh jj">èƒœåˆ©å›¾è¡¨</strong>å’Œä¸€äº›<code class="fe nc nd ne nf b">react-native</code>åŒ…ä¸€èµ·æ·»åŠ åˆ°<code class="fe nc nd ne nf b">EvaluationView</code>ä¸­</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="caa0" class="lf lg ji nf b gy nk nl l nm nn">import React from "react";<br/>import {<br/>  Dimensions,<br/>  ActivityIndicator,<br/>  SafeAreaView,<br/>  View,<br/>  Image,<br/>  Text,<br/>  StatusBar,<br/>} from "react-native";<br/>import {<br/>  VictoryChart,<br/>  VictoryAxis,<br/>  VictoryBar,<br/>  VictoryTheme,<br/>} from "victory-native";</span><span id="11be" class="lf lg ji nf b gy no nl l nm nn">const { width: DEVICE_WIDTH } = Dimensions.get("window");</span></pre><p id="0dbc" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä¸ºäº†è·å¾—è®¾å¤‡çš„ã€the VictoryChart éœ€è¦çš„),æˆ‘ä»¬ä½¿ç”¨äº†<code class="fe nc nd ne nf b">Dimensions</code>åº“ã€‚</p><p id="d81a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç„¶åæ·»åŠ <strong class="kh jj">èƒœåˆ©å›¾</strong>å®¹å™¨ã€‚å› ä¸ºæˆ‘ä»¬åªæƒ³åœ¨å¾—åˆ°é¢„æµ‹ç»“æœåæ˜¾ç¤ºå›¾è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªåŸºäº<code class="fe nc nd ne nf b">graphData.</code>é•¿åº¦çš„æ¡ä»¶</p><p id="73fd" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰å·¥ä½œæ¨¡å‹ï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€äº›å‡çš„å›¾è¡¨æ•°æ®æ¥æŸ¥çœ‹å›¾è¡¨çš„<strong class="kh jj">æ°´å¹³æ¡</strong>ã€‚</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="ba2e" class="lf lg ji nf b gy nk nl l nm nn">import React from "react";<br/>import {<br/>  Dimensions,<br/>  ActivityIndicator,<br/>  SafeAreaView,<br/>  View,<br/>  Image,<br/>  Text,<br/>  StatusBar,<br/>} from "react-native";<br/>import {<br/>  VictoryChart,<br/>  VictoryAxis,<br/>  VictoryBar,<br/>  VictoryTheme,<br/>} from "victory-native";</span><span id="74ee" class="lf lg ji nf b gy no nl l nm nn">const { width: DEVICE_WIDTH } = Dimensions.get("window");</span><span id="a0d7" class="lf lg ji nf b gy no nl l nm nn">export const EvaluationView = (props) =&gt; {<br/>  const graphData = [<br/>    { number: 0, prediction: 0.04 },<br/>    { number: 1, prediction: 0.02 },<br/>    { number: 2, prediction: 0.02 },<br/>    { number: 3, prediction: 0.1 },<br/>    { number: 4, prediction: 0.85 },<br/>    { number: 5, prediction: 0.04 },<br/>    { number: 6, prediction: 0.2 },<br/>    { number: 7, prediction: 0.12 },<br/>    { number: 8, prediction: 0.0 },<br/>    { number: 9, prediction: 0.0 },<br/>  ];</span><span id="1f3c" class="lf lg ji nf b gy no nl l nm nn">return (<br/>    &lt;React.Fragment&gt;<br/>      &lt;StatusBar barStyle="light-content" /&gt;<br/>      &lt;SafeAreaView style={styles.safeArea}&gt;<br/>        &lt;View style={styles.container}&gt;<br/>          &lt;Text style={styles.headerText}&gt;ANALYSIS&lt;/Text&gt;<br/>          &lt;Image<br/>            style={styles.imageContainer}<br/>            source={{ <br/>              uri: `data:image/gif;base64,${props.base64}` <br/>            }}<br/>            resizeMethod="scale"/&gt;<br/>          &lt;View style={styles.resultContainer}&gt;<br/>            {graphData.length ? (<br/>              &lt;VictoryChart<br/>                width={DEVICE_WIDTH - 20}<br/>                padding={{ <br/>                  top: 30, bottom: 70, left: 50, right: 30 <br/>                }}<br/>                theme={VictoryTheme.material}&gt;<br/>                &lt;VictoryAxis<br/>                  tickValues={[1, 2, 3, 4, 5, 6, 7, 8, 9]}<br/>                  tickFormat={[1, 2, 3, 4, 5, 6, 7, 8, 9]}/&gt;<br/>                 &lt;VictoryAxis <br/>                   dependentAxis <br/>                   tickFormat={(tick) =&gt; tick} /&gt;<br/>                &lt;VictoryBar<br/>                  style={{ data: { fill: "#c43a31" } }}<br/>                  barRatio={0.8}<br/>                  alignment="start"<br/>                  data={graphData}<br/>                  x="number"<br/>                  y="prediction"/&gt;<br/>              &lt;/VictoryChart&gt;<br/>            ) : (<br/>              &lt;ActivityIndicator size="large" color="#4d089a" /&gt;<br/>            )}<br/>          &lt;/View&gt;<br/>        &lt;/View&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>};</span></pre><p id="5345" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ä½ åº”è¯¥æœ‰ä¸€ä¸ªè¿™æ ·çš„å±å¹•:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/b1ba237ef887b3980eb798016296b71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6BKrfC27yldSi5mkPmQq-g.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">èŠå¤©æ˜¾ç¤ºè™šå‡æ•°æ®(å›¾ç‰‡ç”±ä½œè€…æä¾›)</p></figure><p id="2c97" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ğŸ†<strong class="kh jj">ä½ æ˜¯å† å†›ï¼</strong></p><p id="694a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘ä»¬æ­£åœ¨æ…¢æ…¢è¿›å…¥æ•™ç¨‹çš„æœ€åä¸€éƒ¨åˆ†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†åŠ è½½æ¨¡å‹ï¼Œå¹¶å°†æ‹æ‘„çš„ç…§ç‰‡ä¸æ¨¡å‹è¿›è¡Œæ¯”è¾ƒã€‚</p><p id="5597" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¯·åœ¨<code class="fe nc nd ne nf b">src</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne nf b">util.js</code>å¹¶ç²˜è´´ä»¥ä¸‹ä»£ç ã€‚</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="28ad" class="lf lg ji nf b gy nk nl l nm nn">/* eslint-disable no-bitwise */<br/>/*<br/>Copyright (c) 2011, Daniel Guerrero<br/>All rights reserved.<br/>Redistribution and use in source and binary forms, with or without<br/>modification, are permitted provided that the following conditions are met:<br/>    * Redistributions of source code must retain the above copyright<br/>      notice, this list of conditions and the following disclaimer.<br/>    * Redistributions in binary form must reproduce the above copyright<br/>      notice, this list of conditions and the following disclaimer in the<br/>      documentation and/or other materials provided with the distribution.<br/>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND<br/>ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED<br/>WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE<br/>DISCLAIMED. IN NO EVENT SHALL DANIEL GUERRERO BE LIABLE FOR ANY<br/>DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES<br/>(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;<br/>LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND<br/>ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT<br/>(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS<br/>SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<br/> */</span><span id="ac53" class="lf lg ji nf b gy no nl l nm nn">/**<br/> * Uses the new array typed in javascript to binary base64 encode/decode<br/> * at the moment just decodes a binary base64 encoded<br/> * into either an ArrayBuffer (decodeArrayBuffer)<br/> * or into an Uint8Array (decode)<br/> *<br/> * References:<br/> * <a class="ae le" href="https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer</a><br/> * <a class="ae le" href="https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array</a><br/> */</span><span id="702a" class="lf lg ji nf b gy no nl l nm nn">export const Base64Binary = {<br/>  _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",</span><span id="6a74" class="lf lg ji nf b gy no nl l nm nn">/* will return a  Uint8Array type */<br/>  decodeArrayBuffer: function (input) {<br/>    var bytes = (input.length / 4) * 3;<br/>    var ab = new ArrayBuffer(bytes);<br/>    this.decode(input, ab);</span><span id="7210" class="lf lg ji nf b gy no nl l nm nn">return ab;<br/>  },</span><span id="cb85" class="lf lg ji nf b gy no nl l nm nn">removePaddingChars: function (input) {<br/>    var lkey = this._keyStr.indexOf(input.charAt(input.length - 1));<br/>    if (lkey === 64) {<br/>      return input.substring(0, input.length - 1);<br/>    }<br/>    return input;<br/>  },</span><span id="eadf" class="lf lg ji nf b gy no nl l nm nn">decode: function (input, arrayBuffer) {<br/>    //get last chars to see if are valid<br/>    input = this.removePaddingChars(input);<br/>    input = this.removePaddingChars(input);</span><span id="98af" class="lf lg ji nf b gy no nl l nm nn">var bytes = parseInt((input.length / 4) * 3, 10);</span><span id="e019" class="lf lg ji nf b gy no nl l nm nn">var uarray;<br/>    var chr1, chr2, chr3;<br/>    var enc1, enc2, enc3, enc4;<br/>    var i = 0;<br/>    var j = 0;</span><span id="e3c7" class="lf lg ji nf b gy no nl l nm nn">if (arrayBuffer) {<br/>      uarray = new Uint8Array(arrayBuffer);<br/>    } else {<br/>      uarray = new Uint8Array(bytes);<br/>    }</span><span id="3b09" class="lf lg ji nf b gy no nl l nm nn">input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");</span><span id="cbcf" class="lf lg ji nf b gy no nl l nm nn">for (i = 0; i &lt; bytes; i += 3) {<br/>      //get the 3 octects in 4 ascii chars<br/>      enc1 = this._keyStr.indexOf(input.charAt(j++));<br/>      enc2 = this._keyStr.indexOf(input.charAt(j++));<br/>      enc3 = this._keyStr.indexOf(input.charAt(j++));<br/>      enc4 = this._keyStr.indexOf(input.charAt(j++));</span><span id="977d" class="lf lg ji nf b gy no nl l nm nn">chr1 = (enc1 &lt;&lt; 2) | (enc2 &gt;&gt; 4);<br/>      chr2 = ((enc2 &amp; 15) &lt;&lt; 4) | (enc3 &gt;&gt; 2);<br/>      chr3 = ((enc3 &amp; 3) &lt;&lt; 6) | enc4;</span><span id="42e9" class="lf lg ji nf b gy no nl l nm nn">uarray[i] = chr1;<br/>      if (enc3 !== 64) {<br/>        uarray[i + 1] = chr2;<br/>      }<br/>      if (enc4 !== 64) {<br/>        uarray[i + 2] = chr3;<br/>      }<br/>    }</span><span id="34e0" class="lf lg ji nf b gy no nl l nm nn">return uarray;<br/>  },<br/>};</span></pre><blockquote class="mw mx my"><p id="103c" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">å‡ºäºå¯¹å¼€å‘è€…çš„å°Šé‡è¯·ä¸è¦åˆ é™¤ç‰ˆæƒå…è´£å£°æ˜<em class="ji">ğŸ˜ƒ</em></p></blockquote><p id="2b38" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">ç°åœ¨åˆ›å»ºå¦ä¸€ä¸ª<code class="fe nc nd ne nf b">helpers.js</code>æ–‡ä»¶ï¼Œä½†è¿™æ¬¡æ˜¯åœ¨<code class="fe nc nd ne nf b">EvaluationView</code>ç›®å½•<code class="fe nc nd ne nf b">src/screens/EvaluationView/helpers.js</code>ä¸­ï¼Œå¹¶å¤åˆ¶è¿™æ®µä»£ç </p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="9654" class="lf lg ji nf b gy nk nl l nm nn">import * as tf from "<a class="ae le" href="http://twitter.com/tensorflow/tfjs" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs</a>";<br/>import "<a class="ae le" href="http://twitter.com/tensorflow/tfjs-react-native" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs-react-native</a>";<br/>import { bundleResourceIO, decodeJpeg } from "<a class="ae le" href="http://twitter.com/tensorflow/tfjs-react-native" rel="noopener ugc nofollow" target="_blank">@tensorflow/tfjs-react-native</a>";<br/>import { Base64Binary } from "../../util";<br/>import { BITMAP_DIMENSION } from "../CameraView/helpers";</span><span id="fa24" class="lf lg ji nf b gy no nl l nm nn">const modelJson = require("../../model/model.json");<br/>const modelWeights = require("../../model/weights.bin");</span><span id="3067" class="lf lg ji nf b gy no nl l nm nn">// 0: channel from JPEG-encoded image<br/>// 1: gray scale<br/>// 3: RGB image<br/>const TENSORFLOW_CHANNEL = 3;</span><span id="b9ed" class="lf lg ji nf b gy no nl l nm nn">export const getModel = async () =&gt; {<br/>  try {<br/>    // wait until tensorflow is ready<br/>    await tf.ready();<br/>    // load the trained model<br/>    return await tf.loadLayersModel(bundleResourceIO(modelJson, modelWeights));<br/>  } catch (error) {<br/>    console.log("Could not load model", error);<br/>  }<br/>};</span><span id="63bb" class="lf lg ji nf b gy no nl l nm nn">export const convertBase64ToTensor = async (props) =&gt; {<br/>  try {<br/>    const uIntArray = Base64Binary.decode(props.base64);<br/>    // decode a JPEG-encoded image to a 3D Tensor of dtype<br/>    const decodedImage = decodeJpeg(uIntArray, 3);<br/>    // reshape Tensor into a 4D array<br/>    return decodedImage.reshape([<br/>      1,<br/>      BITMAP_DIMENSION,<br/>      BITMAP_DIMENSION,<br/>      TENSORFLOW_CHANNEL,<br/>    ]);<br/>  } catch (error) {<br/>    console.log("Could not convert base64 string to tesor", error);<br/>  }<br/>};</span><span id="2bc8" class="lf lg ji nf b gy no nl l nm nn">export const startPrediction = async (model, tensor) =&gt; {<br/>  try {<br/>    // predict against the model<br/>    const output = await model.predict(tensor);<br/>    // return typed array<br/>    return output.dataSync();<br/>  } catch (error) {<br/>    console.log("Error predicting from tesor image", error);<br/>  }<br/>};</span><span id="16a0" class="lf lg ji nf b gy no nl l nm nn">export const populateData = (typedArray) =&gt; {<br/>  const predictions = Array.from(typedArray);<br/>  return predictions.map((item, index) =&gt; {<br/>    return {<br/>      number: index,<br/>      prediction: item,<br/>    };<br/>  });<br/>};</span></pre><p id="a04c" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™äº›æ˜¯æˆ‘ä»¬åŠ è½½æ¨¡å‹ã€å°† base64 å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¼ é‡ã€é¢„æµ‹æ•°å­—å’Œå¡«å……èƒœåˆ©å›¾è¡¨æ•°æ®çš„å‡½æ•°ã€‚</p><p id="354e" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨<code class="fe nc nd ne nf b">src/screens/EvaluationView/index.js</code>çš„<code class="fe nc nd ne nf b">useEffect()</code>é’©å­ä¸­è°ƒç”¨è¿™äº›å‡½æ•°ã€‚</p><p id="5c47" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">è¿™æ˜¯è¯¥è§†å›¾çš„å®Œæ•´ä»£ç :</p><pre class="me mf mg mh gt ng nf nh ni aw nj bi"><span id="6807" class="lf lg ji nf b gy nk nl l nm nn">import React, { useState, useEffect } from "react";<br/>import {<br/>  Dimensions,<br/>  ActivityIndicator,<br/>  SafeAreaView,<br/>  View,<br/>  Image,<br/>  Text,<br/>  StatusBar,<br/>} from "react-native";<br/>import {<br/>  VictoryChart,<br/>  VictoryAxis,<br/>  VictoryBar,<br/>  VictoryTheme,<br/>} from "victory-native";<br/>import {<br/>  getModel,<br/>  convertBase64ToTensor,<br/>  startPrediction,<br/>  populateData,<br/>} from "./helpers";</span><span id="8654" class="lf lg ji nf b gy no nl l nm nn">const { width: DEVICE_WIDTH } = Dimensions.get("window");</span><span id="e429" class="lf lg ji nf b gy no nl l nm nn">export const EvaluationView = (props) =&gt; {<br/>  const [graphData, setGraphData] = useState([]);</span><span id="bbd9" class="lf lg ji nf b gy no nl l nm nn">useEffect(() =&gt; {<br/>    const predictDigits = async () =&gt; {<br/>      const model = await getModel();<br/>      const tensor = await convertBase64ToTensor(props);<br/>      const typedArray = await startPrediction(model, tensor);<br/>      setGraphData(populateData(typedArray));<br/>    };<br/>    predictDigits();<br/>  }, [props]);</span><span id="dd29" class="lf lg ji nf b gy no nl l nm nn">return (<br/>    &lt;React.Fragment&gt;<br/>      &lt;StatusBar barStyle="light-content" /&gt;<br/>      &lt;SafeAreaView style={styles.safeArea}&gt;<br/>        &lt;View style={styles.container}&gt;<br/>          &lt;Text style={styles.headerText}&gt;ANALYSIS&lt;/Text&gt;<br/>          &lt;Image<br/>            style={styles.imageContainer}<br/>            source={{ uri: `data:image/gif;base64,${props.base64}` }}<br/>            resizeMethod="scale"<br/>          /&gt;<br/>          &lt;View style={styles.resultContainer}&gt;<br/>            {graphData.length ? (<br/>              &lt;VictoryChart<br/>                width={DEVICE_WIDTH - 20}<br/>                padding={{ top: 30, bottom: 70, left: 50, right: 30 }}<br/>                theme={VictoryTheme.material}<br/>              &gt;<br/>                &lt;VictoryAxis<br/>                  tickValues={[1, 2, 3, 4, 5, 6, 7, 8, 9]}<br/>                  tickFormat={[1, 2, 3, 4, 5, 6, 7, 8, 9]}<br/>                /&gt;<br/>                 &lt;VictoryAxis dependentAxis tickFormat={(tick) =&gt; tick} /&gt;<br/>                &lt;VictoryBar<br/>                  style={{ data: { fill: "#c43a31" } }}<br/>                  barRatio={0.8}<br/>                  alignment="start"<br/>                  data={graphData}<br/>                  x="number"<br/>                  y="prediction"<br/>                /&gt;<br/>              &lt;/VictoryChart&gt;<br/>            ) : (<br/>              &lt;ActivityIndicator size="large" color="#4d089a" /&gt;<br/>            )}<br/>          &lt;/View&gt;<br/>        &lt;/View&gt;<br/>      &lt;/SafeAreaView&gt;<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>};</span><span id="5a04" class="lf lg ji nf b gy no nl l nm nn">const styles = {<br/>  safeArea: {<br/>    backgroundColor: "#4d089a",<br/>  },<br/>  container: {<br/>    height: "100%",<br/>    alignItems: "center",<br/>    backgroundColor: "white",<br/>  },<br/>  headerText: {<br/>    fontSize: 20,<br/>    fontWeight: "500",<br/>    color: "#4d089a",<br/>    margin: 20,<br/>  },<br/>  imageContainer: {<br/>    height: 300,<br/>    width: 300,<br/>  },<br/>  resultContainer: {<br/>    flex: 1,<br/>    justifyContent: "center",<br/>    alignItems: "center",<br/>  },<br/>};</span></pre><p id="4135" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæ¨¡å‹ä¼šåƒä½ è®­ç»ƒçš„æ¨¡å‹ä¸€æ ·å¥½ã€‚</strong></p><blockquote class="mw mx my"><p id="a016" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ•°æ®å·¥ç¨‹å¸ˆä¼šä½¿ç”¨æ•°ä¸‡ç§ä¸åŒçš„æ‰‹å†™æ•°å­—æ¥è®­ç»ƒæ¨¡å‹ã€‚ç„¶åå°†ä½¿ç”¨å¦ä¸€ä¸ªé›†åˆæ¥è°ƒæ•´æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªå…¨æ–°çš„é›†åˆæ¥æ£€æŸ¥æ¨¡å‹æ€§èƒ½ã€‚</p><p id="9ea9" class="kf kg ld kh b ki kj kk kl km kn ko kp mz kr ks kt na kv kw kx nb kz la lb lc im bi translated">åœ¨æˆ‘ç»“æŸæœ¬æ•™ç¨‹ä¹‹å‰ï¼Œé¡ºä¾¿æä¸€ä¸‹ï¼›å¦‚æœä½ æ˜¯ä¸€ä¸ªç»éªŒä¸°å¯Œçš„ React åŸç”Ÿå¼€å‘è€…ï¼Œä½ ç°åœ¨åº”è¯¥å·²ç»æ„è¯†åˆ°ï¼Œé€šè¿‡ä¸€äº›æ‰‹åŠ¨å¯¼å…¥ï¼Œç‰¹åˆ«æ˜¯<code class="fe nc nd ne nf b"><em class="ji">react-native-unimodules</em></code>ã€<code class="fe nc nd ne nf b"><em class="ji">expo-camera</em></code>å’Œæƒé™è®¾ç½®ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿå¯ä»¥åœ¨ Android ä¸Šå¼€ç®±å³ç”¨ã€‚<em class="ji">ğŸ¤“</em></p></blockquote><p id="3644" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">æˆ‘å¸Œæœ›ä½ å·²ç»å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿ã€‚</p><p id="1db1" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">å¦‚æœæˆ‘å¯ä»¥åšä¸€äº›ä¸åŒçš„äº‹æƒ…ï¼Œæˆ–è€…å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•™ç¨‹ï¼Œè¯·ç•™ä¸‹è¯„è®ºã€‚æ¯•ç«Ÿæˆ‘ä»¬éƒ½æ˜¯æ¥å­¦ä¹ çš„ï¼Œå¯¹å§ï¼ŸğŸ‘¨ğŸ¼â€ğŸ“</p></div></div>    
</body>
</html>