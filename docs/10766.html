<html>
<head>
<title>Pandas date_range Function Details</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫日期范围函数详细信息</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pandas-date-range-function-details-fc1bd91b80a0?source=collection_archive---------56-----------------------#2020-07-27">https://towardsdatascience.com/pandas-date-range-function-details-fc1bd91b80a0?source=collection_archive---------56-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="61b0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">考虑不同条件生成一系列日期</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3baa8cd043b939c4bb1b23cbc3ffa0b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*602_djn2uTbCWYZtKY8sIw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:王思然·哈德森</p></figure><p id="223b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列数据是以固定或恒定的时间间隔收集的数据集。时间序列数据用于跟踪长期预测，观察时间相关趋势或季节性趋势。这非常有用，通常用于金融机构、零售企业、房地产和许多其他类型的企业。但是如果你有数据但是没有记录日期呢？今年需要用去年的数据生成实验报告怎么办？或者，你可能需要在本季度使用上季度的数据。有时它是研究、分析或预测所必需的。</p><h1 id="df15" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">生成一系列日期</h1><p id="aa04" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">幸运的是<a class="ae ky" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>有一个名为日期范围的函数来生成一系列日期或时间。我们将看到如何利用它来解决我们在工作中可能遇到的一些问题。在这里，我们将解决几个问题。</p><ol class=""><li id="2ee5" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">先说最简单的。<strong class="lb iu">以一天的频率生成一系列日期。</strong></li></ol><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="5757" class="ng lw it nc b gy nh ni l nj nk">import pandas as pd<br/>pd.date_range(start = '1/1/2020', end='1/15/2020')#Output:<br/>DatetimeIndex(['2020-01-01', '2020-01-02', '2020-01-03', '2020-01-04', '2020-01-05', '2020-01-06', '2020-01-07', '2020-01-08',                '2020-01-09', '2020-01-10', '2020-01-11', '2020-01-12',                '2020-01-13', '2020-01-14', '2020-01-15'],               dtype='datetime64[ns]', freq='D')</span></pre><p id="188c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 2。生成一系列间隔两天的日期</strong></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="8acf" class="ng lw it nc b gy nh ni l nj nk">pd.date_range('1/1/2020', '1/15/2020', freq='2D')#Output:<br/>DatetimeIndex(['2020-01-01', '2020-01-03', '2020-01-05', '2020-01-07', '2020-01-09', '2020-01-11', '2020-01-13', '2020-01-15'],               dtype='datetime64[ns]', freq='2D')</span></pre><p id="5025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你注意到，我们不需要一直提到开始和结束。默认情况下，第一个日期作为开始日期，第二个日期作为结束日期。</p><p id="d564" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 3。制作一个只有工作日的时间序列</strong></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="4bff" class="ng lw it nc b gy nh ni l nj nk">pd.date_range('1/1/2020', '1/15/2020', freq='B')#Output:<br/>DatetimeIndex(['2020-01-01', '2020-01-02', '2020-01-03', '2020-01-06', '2020-01-07', '2020-01-08', '2020-01-09', '2020-01-10',                '2020-01-13', '2020-01-14', '2020-01-15'],               dtype='datetime64[ns]', freq='B')</span></pre><p id="d5a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，“频率= 'B '表示工作日。</p><p id="43a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.如果我们有开始日期，没有结束日期，该怎么办。在这种情况下，我们可以只输入一个句点，这意味着我们需要的日期或次数。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="595d" class="ng lw it nc b gy nh ni l nj nk">pd.date_range('1/1/2020', periods = 9, freq='B')#Output:<br/>DatetimeIndex(['2020-01-01', '2020-01-02', '2020-01-03', '2020-01-06', '2020-01-07', '2020-01-08', '2020-01-09', '2020-01-10',                '2020-01-13'],               dtype='datetime64[ns]', freq='B')</span></pre><p id="f3ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 5。如果我们有一个结束日期和一个周期(或者我们需要多少个日期)，</strong></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="2eef" class="ng lw it nc b gy nh ni l nj nk">pd.date_range(end='1/1/2020', periods = 5)#Output:<br/>DatetimeIndex(['2019-12-28', '2019-12-29', '2019-12-30', '2019-12-31', '2020-01-01'],               dtype='datetime64[ns]', freq='D')</span></pre><p id="a3e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们不指定频率，date_range 函数将使用“freq='D '”。</p><p id="f8fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.频率不一定要以天数或工作日为单位。它可以是月、小时、分钟、秒和许多其他频率。<strong class="lb iu">让我们用一个 3M 的频率。</strong></p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="ae7f" class="ng lw it nc b gy nh ni l nj nk">pd.date_range('1/1/2020', periods = 5, freq='3M')#Output:<br/>DatetimeIndex(['2020-01-31', '2020-04-30', '2020-07-31', '2020-10-31', '2021-01-31'],               dtype='datetime64[ns]', freq='3M')</span></pre><p id="c477" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是所有频率的完整列表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/55e9c8f786f304c57f24eafe3305cd7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/0*hwKQ89CuvccbP60Y.png"/></div></figure><p id="9e6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 7。找出每个月的业务月末日期。</strong></p><p id="08ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用“BM”作为上面频率表中的频率。提供开始日期和“周期”值。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="7714" class="ng lw it nc b gy nh ni l nj nk">pd.DataFrame(pd.date_range('1/1/2018', periods=12, freq='BM'), columns=['Date'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/b3d75918f4c06452767b4e558dd2416e.png" data-original-src="https://miro.medium.com/v2/resize:fit:186/format:webp/0*u_tVJfjR2nyS5xz6.png"/></div></figure><p id="6d15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是 2018 年每个月的最后一个工作日。</p><p id="6b70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 7。你的客户可能在不同的时区</strong>，比如在非洲:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="a4a0" class="ng lw it nc b gy nh ni l nj nk">pd.date_range('1/11/2019', periods=5, tz='Africa/Abidjan', freq='3H')#Output: <br/>DatetimeIndex(['2019-01-11 00:00:00+00:00', '2019-01-11 03:00:00+00:00', '2019-01-11 06:00:00+00:00', '2019-01-11 09:00:00+00:00',  '2019-01-11 12:00:00+00:00'],               dtype='datetime64[ns, Africa/Abidjan]', freq='3H')</span></pre><p id="db97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我使用的是每小时一次的频率。点击所有<a class="ae ky" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="noopener ugc nofollow" target="_blank">时区</a>的链接。</p><p id="d291" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是熊猫 date_range 函数的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="958e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望它有帮助。</p></div></div>    
</body>
</html>