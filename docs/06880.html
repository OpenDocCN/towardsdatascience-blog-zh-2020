<html>
<head>
<title>Easy Interactive Plot — Pandas plotly backend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">轻松互动剧情——熊猫剧情后端</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easy-interactive-plot-pandas-plotly-backend-6c9772059515?source=collection_archive---------31-----------------------#2020-05-28">https://towardsdatascience.com/easy-interactive-plot-pandas-plotly-backend-6c9772059515?source=collection_archive---------31-----------------------#2020-05-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0770" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">熊猫系列和数据框架中的一行交互式情节</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/95d0da57f1669a99da06f93ac3918cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VkboAFhDIIH1Dirw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU机构</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="89f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫提供了一种探索数据的简单方法(EDA)。一个例子是，我们如何在不导入任何可视化模块的情况下，仅从Pandas系列或数据框中创建绘图。我在下面的案例中展示给你看。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a4d5" class="ma mb it lw b gy mc md l me mf">#I only use seaborn to import sample dataset<br/>import pandas as pd, seaborn as sns</span><span id="7d4c" class="ma mb it lw b gy mg md l me mf">tips = sns.load_dataset('tips')<br/>tips['tip'].plot(kind = 'hist')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f5d620df7c51ebf17b24f5256fc84402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*Wc5iWtqVOPIst3dfHaXrqw.png"/></div></figure><p id="e99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅仅通过使用<code class="fe mi mj mk lw b">.plot</code>属性，我们就可以默认生成一个matplotlib图。不过，在这篇文章中，我要展示的是我们如何用上面类似的线条创建一个交互式的<a class="ae ky" href="https://plotly.com/" rel="noopener ugc nofollow" target="_blank"> plotly </a> plot。示例结果如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/290396108079426a6faa0c7e71f91be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gn2AqDCcbpSbv89Y_RNt3g.png"/></div></div></figure><p id="3f10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想了解更多关于熊猫的EDA，这里有一篇由<a class="mm mn ep" href="https://medium.com/u/cf29bfb08abb?source=post_page-----6c9772059515--------------------------------" rel="noopener" target="_blank"> Pararawendy Indarjo </a> <a class="ae ky" rel="noopener" target="_blank" href="/exploratory-data-analysis-eda-visualization-using-pandas-ca5a04271607">撰写的文章</a>很好地涵盖了你可以用熊猫做什么，但在这篇文章中，我将只专注于创建一个互动的情节。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="2d5d" class="mv mb it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">Plotly</h1><p id="9687" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Plotly是一个模块，可以改善任何可视化，变得更加互动。2020年5月26日，Plotly发布了支持熊猫绘图的4.8.0版本。这是一个我个人很兴奋使用的新功能。后端是由plotly-express驱动的，这是plotly中的另一个包，用于创建快速、交互式的情节。以下是数据分析期间plotly express用法的示例。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e779" class="ma mb it lw b gy mc md l me mf">import plotly.express as px<br/>fig = px.histogram(tips['tip'])<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/79799c5ce3ddc3b350f7bab09361e920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBP9TW4PcdHB5wems22Qaw.png"/></div></div></figure><p id="6e22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，Plotly 4 . 8 . 0版提供了一个后端来在Pandas系列或数据框中使用它，而不是导入plotly.express。要实现这一点，您需要首先安装Plotly模块。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b240" class="ma mb it lw b gy mc md l me mf">#If you never install Plotly<br/>pip install plotly</span><span id="880d" class="ma mb it lw b gy mg md l me mf">#If you have install Plotly previously<br/>pip install -U plotly</span></pre><p id="2253" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装了Plotly模块后，我们需要首先使用以下代码设置环境。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b334" class="ma mb it lw b gy mc md l me mf">pd.options.plotting.backend = "plotly"</span></pre><p id="d074" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，我们已经将pandas plot后端从默认的matplotlib更改为plotly模块。让我们尝试我们能创造的各种各样的情节。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><ul class=""><li id="ba02" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><strong class="lb iu">散点图</strong></li></ul><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ecf0" class="ma mb it lw b gy mc md l me mf">tips.plot.scatter(x = 'tip', y='total_bill')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/43cc133863edb721403a7093e39d34e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGasJRP_FB4f1QxUQV0m-Q.png"/></div></div></figure><ul class=""><li id="47fd" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><strong class="lb iu">箱线图</strong></li></ul><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ed6f" class="ma mb it lw b gy mc md l me mf">tips['tip'].plot.box()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/85506822de8bc24c294d7a07f1492b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Oey9wE6b306CnFooce0uw.png"/></div></div></figure><ul class=""><li id="0c11" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><strong class="lb iu">水平条形图</strong></li></ul><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ce2d" class="ma mb it lw b gy mc md l me mf">#The y axis in the Plotly bar plot is the index, that is why I set up another column as the index</span><span id="b8b7" class="ma mb it lw b gy mg md l me mf">tips.set_index('sex')['size'].plot.barh()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/df8a9832bb145ef8d0ad62d0a1d6022a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6a6bgLpk-8M8HmEtsDd5A.png"/></div></div></figure><ul class=""><li id="6758" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><strong class="lb iu">刻面图</strong></li></ul><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3496" class="ma mb it lw b gy mc md l me mf">tips[['tip', 'smoker']].plot.box(facet_col = 'smoker')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/e2c523de38fe29dd21e32764f50e45f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yK0danm4v53GoiJcBRmIrQ.png"/></div></div></figure><p id="dd10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是通过熊猫Plotly后端支持的几个情节。准确的说，目前只有<code class="fe mi mj mk lw b">scatter</code>、<code class="fe mi mj mk lw b">line</code>、<code class="fe mi mj mk lw b">area</code>、<code class="fe mi mj mk lw b">bar</code>、<code class="fe mi mj mk lw b">barh</code>、<code class="fe mi mj mk lw b">hist</code>、<code class="fe mi mj mk lw b">box</code>剧情可用。如果你想了解更多，你可以参考文档<a class="ae ky" href="https://plotly.com/python/pandas-backend/" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4370" class="mv mb it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">结论</h1><p id="4526" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在这篇文章中，我只是展示了如何使用Plotly从熊猫系列和数据框创建一个简单的互动情节。这个特性在本文创作时还是全新的，但是我相信在将来，这个功能会实现更多我们可以使用的情节。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="807b" class="mv mb it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">如果您喜欢我的内容，并希望获得更多关于数据或数据科学家日常生活的深入知识，请考虑在此订阅我的<a class="ae ky" href="https://cornellius.substack.com/welcome" rel="noopener ugc nofollow" target="_blank">简讯。</a></h1><blockquote class="of"><p id="7b0b" class="og oh it bd oi oj ok ol om on oo lu dk translated">如果您没有订阅为中等会员，请考虑通过<a class="ae ky" href="https://cornelliusyudhawijaya.medium.com/membership" rel="noopener">我的推荐</a>订阅。</p></blockquote></div></div>    
</body>
</html>