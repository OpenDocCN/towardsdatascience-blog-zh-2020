# 土耳其地震和热门场馆数据分析

> 原文：<https://towardsdatascience.com/earthquake-popular-venues-data-analysis-of-turkey-28f8d02cb0d?source=collection_archive---------28----------------------->

## 我应该在哪个安全的城市投资哪个部门？

**1。简介**

**1.1。描述&背景讨论**

土耳其是一个地震多发国家，T4 有 8200 万居民。由 **81 个省份**组成。它被北安纳托利亚、西安纳托利亚和东南安纳托利亚地震带环绕。土耳其地貌的多样性是地球运动的结果，几千年来，地球运动塑造了该地区的地形。

它有死火山，地震仍然频繁发生。在这个国家的北部和东部，有导致今天地震的大断层线。1999 年发生在北安纳托利亚断层线上的马尔马拉大地震导致数千人死亡。[1]

尽管土耳其是一个地震多发的国家，尽管它也是一个旅游国家。每年有数百万来自世界各地的游客参观它。甚至有一些外国侨民在土耳其购买房地产并进行交易。[2]

**1.2。问题**

投资者和消费者会对基于地震统计和每个城市热门地点的数据分析感兴趣。投资者可以在地震风险较低的地方开展项目，并投资于这些地方业务不太密集的工作。对于生活在城市的普通人来说，他们可能想要购买并居住在不太危险同时又靠近社交场所的地方。

因此，通过基于每个城市合理的过去(例如，100 年)进行地震统计来进行聚类研究，可以确定具有高地震风险或没有地震风险的区域。此外，通过比较这些地区的热门场馆，可以揭示地区之间的独特性。

**2。数据**

**2.1。数据来源**

本研究中用于解决问题的数据来源如下:

*   从 **AFAD 地震目录**页面，1920-2020 年间发生的里氏震级 4-10 级地震的统计数据以 csv 格式通过各种过滤方法获得。[3]
*   通过 **OpenStreetMap** ，提供了地震分布所需的 **GeoJSON 数据**和显示集群组的地图。[4]
*   通过 **Foursquare API** ，可以获得这些城市最受欢迎的场馆的类型信息，以及这些地方的经纬度信息。[5]
*   来自维基百科的是土耳其的城市列表。借助 **Python GeoPy 库**，通过逐一查询，获得城市的经纬度信息。[6]

**2.2。数据探索和清理**

从 **AFAD** 刮来的地震数据；获得了日期、地震纬度、地震经度、地震震级和深度信息。从多个来源下载或搜集的数据被合并到一个表中。在 1920 年 1 月 1 日**至 2020 年 1 月 1 日**和 2020 年 1 月 1 日**至 2020 年 1 月 1 日**大于 4.0 里氏**共获得 **5707** 条数据。csv 文件中出现的一些缺少信息的变量没有包含在原始数据集中，因为它们是多余的。**

![](img/3caa75f2b2d687d002e4035476669e66.png)

**图一。** AFAD 地震目录页。(图片由作者提供)

在接收 **AFAD** 地震数据时，实施了*矩形搜索式*。人们认识到，收到的一些数据来自土耳其境外。由于地震发生城市的名称不包括在地震统计中，因此地震发生城市的信息是通过使用 GeoPy 库和对每个数据的反向地理编码方法获得的。发生在土耳其以外的地震数据被从主数据集中删除。因此，总共有 **4364** 行数据保留在主数据中。

![](img/95aaf957cb5111c56384f2b49d02b3e4.png)

**图二。摘自 AFAD 网站的第一个地震统计编辑版本。(图片由作者提供)**

根据获得的数据集，通过查看**震级直方图**可以看出，发生的大多数地震的震级在 4 到 4.78 之间。直方图提供了有关地震分布的信息，有助于了解数据集的结构。

![](img/0c7977e548fe85778928681c70769a94.png)

**图三。**地震震级直方图。(图片由作者提供)

此外，还检查了研究中数据集的标准偏差、最小值和最大值，并得出了意见。本次审查的表格如下所示。

![](img/3a210eaeebb971c3b0475c05ab46aa03.png)

**图 4。**创建的第一个数据集的统计信息。(图片由作者提供)

查看**图 4**,**~ 0.47**的震级标准偏差值表明，震级值比其他变量分布更均匀，彼此更接近。**图 5** 中的震级直方图也支持这一观点。下面的**深度直方图**显示了深度值的分布，也可以检查。

![](img/ae16835ffecaffd9fbb156376b1d4938.png)

**图五。**地震深度直方图。(图片由作者提供)

当比较属性的最大值和最小值范围时，将会看到它们通常是彼此相差不太远的值。此外，当比较所有特性的最大值和所有特性的最小值时，可以理解不需要任何标准化或规范化。

**2.3。处理缺失数据**

发现第一个数据集中没有一些城市的统计数据。这意味着那些城市已经 100 年没有发生过大于 4.0 的地震了。这些城市分别是*****里泽*******巴特恩*** *和* ***基利斯*** *。*震级和深度变量仅填充了这四个城市的合理值，因此这些省份的行在数据集中不会显示为 NaN。***

**这些城市在统计的 100 年内没有大于 4.0 的地震记录，并不代表没有地震。一些小于 4.0 级但我们没有记录的地震可能已经发生。即使这些城市的边界内没有地震，邻近城市的地震也能影响这些城市。所以用零填充 NaN 的幅度部分是没有意义的。**

**然而，在从 AFAD 获得的统计数据中，发现一些深度值为 **0.0** 。考虑到这种情况可能是自然的，下面要推导的最大深度**和最小深度**的值被接受为这些省份的 **0.0** 。**最大幅度**值被接受为 **3.0** ，最小幅度**值被接受为 1.0。基于此，**平均值**值被接受为 **2.5** 。********

****2.4。特征提取****

**每个城市的平均、最大和最小特征通过特征提取产生。这些属性被添加到编辑的第一个数据集。新属性是基于幅度和深度变量导出的。然后从数据集中删除了 *Eq_Latitude* 和 *Eq_Longitude* 属性。最后，**主数据集**被创建，将带有 **81 个城市**的经纬度信息的数据表添加到数据集。**

**![](img/040af32692a1e00c4010390eab065331.png)**

****图六。**主数据。(图片由作者提供)**

****3。方法学****

**使用 **Python 叶库**，对 **4364 个地震点**的地理细节进行可视化，以获得初步见解。这是一个有用的可视化，特别是在看到地震发生在哪些地区以及了解地震分布方面。**

**![](img/8af6fe1689629658872e0bd4dd0377f9.png)**

****图 7。**土耳其 1920-2020 年间发生的地震。(图片由作者提供)**

**Foursquare API 被用来发现城市中受欢迎的场所。作为每个城市的限制， **100 个热门场馆**和 **20 公里直径**被测量。在一些城市中，已经观察到当直径测量值较短时，没有返回流行的空间数据。为此，进行了 20 公里宽的搜索，以便从每个城市获得至少 10 排。共获得 **6581** 行数据。**

**![](img/64d0f83a8546dceb899aadc8888eab91.png)**

****图 8** 。Foursquare API 查询获得的位置数据。(图片由作者提供)**

**为城市中确定的热门地点创建了一个汇总表。数据透视表显示了 Foursquare API 为每个城市返回的场馆总数。该表的图表如下。**

**![](img/a812ea2b43b0af8916e79b8a9cf12c78.png)**

****图九。**各城市热门场馆总数。(图片由作者提供)**

**当检查**图 9** 时，可以看到**返回了许多大城市的 100 个结果**。而*伊斯坦布尔*、*亚洛娃*、*伊兹密尔*、*布尔萨*、*特拉布宗*、*阿达纳*、*梅尔辛*、*迪亚巴克尔*和*安塔利亚*等省份则被视为热门地的富豪；*阿加尔*、*通杰利*、*哈克里*、*锡尔特*、*埃尔祖鲁姆*等省份保持在 **20 结果**以下。**

**当然，这张图并没有包括各省所有的热门地点。因为搜索是在距离每个城市 20 公里的地方进行的，并且仅使用一个经纬度对来表示每个城市。考虑到它的面积，这个搜索可能被认为是对某些城市的窄搜索。**

**也可能有许多位置没有被 Foursquare 检测到或认为是受欢迎的。通过使用关于城市的更多纬度和经度信息执行更详细的搜索，可以获得更受欢迎的位置信息。**

**当总结使用 Foursquare API 获得的数据时，可以看到总共识别出了属于不同类别的 **347** 种受欢迎的场所。一个新的数据表已经创建，显示了**各省最常见的 10 个场馆**。**

**![](img/f4d72c8598c0b9431a7aa30c9283dd67.png)**

****图十。**十大最常见的场馆。(图片由作者提供)**

**确定热门场馆后，对 347 个分类变量进行**一次性编码**，从主数据中提取*城市*属性，用 **K-Means** 算法进行聚类研究。K-Means 算法通过尝试将样本分成 n 个方差相等的组来对数据进行聚类，最大程度地降低了惯性或类内平方和标准。K-Means 算法是无监督学习中最常用的聚类方法之一。**

**![](img/bd6b76b05606c5b658dbb6845da3530b.png)**

****图 11。**用于 K-Means 算法的数据集摘要。(图片由作者提供)**

****图 11** 总结了 K-Means 聚类算法中使用的数据集(81 行 x 355 列)。空间距离有不同度量距离函数。**研究中选择了 Sqeuclidean** 指标。因为它让肘部断裂点看得更清楚。为了确定最佳聚类数，用不同的试验进行聚类研究。通过增加 K-Means 算法的聚类常数(K 值)来分析结果。用**肘法**分析时，确定最佳值为 **K = 3** 。这种情况在下图中也可以看到。**

**![](img/d9830a9dfef11d1f0f22ec2f83404686.png)**

****图 12。**优 K 数同肘法。(图片由作者提供)**

**在聚类研究之后，创建了一个新的数据表，给出了发现的聚类、城市名称、平均值。城市中发生地震的震级，以及每个城市中 10 个最常见的地点。**

**![](img/33cf4226b8797245fbb51e0e42141d2a.png)**

****图 13。**最常见的场馆和集群编号。(图片由作者提供)**

**当对检测到的的 **3 个星团进行地震危险性检查时，它们被标记为**低** — **中** — **高**。当计算每个聚类中所有城市的平均地震震级时，也确定了聚类的风险比。****

**地震风险最高的城市群被确定为高，而地震风险最低的城市群被确定为低。创建了一个新的数据表，其中包含分类所拥有的城市总数、分类在形状和地图上的表示颜色以及分类标签。**

**![](img/8a0cb13baee3c2b2f889d2949893cfb7.png)**

****图 14。**检测到的簇的标签、颜色和计数信息。(图片由作者提供)**

**当比较聚类之间的城市数时，可以看到**聚类高**以 **46.9%** 排在第一位。这一结果表明，该国大多数城市都处于地震的高风险之中。**

**另一方面，地震风险低的**集群低**的城市总数过高，不容低估。对于为防范地震风险而进行的各种投资，可以将注意力吸引到这一组中的省份。**

****集群中等**，地震风险处于中等水平，就城市总数而言似乎是最小的集群。下面，您可以查看包含聚类城市编号的饼图。**

**![](img/15a0a543bda4c6765d660bd3fc3b7dd0.png)**

****图 15。**聚类中城市的计数。(图片由作者提供)**

****4。结果分析****

**到目前为止，我们所取得的成果对那些希望生活在一个安全城市的普通人来说是一个指南，或者在这个方向上做出他们的房地产购买决定。有必要更详细和单独地研究集群，以便提出意见来指导投资者。**

****4.1。集群:“高”****

**![](img/0bb1dab12468f659ec2e93e4d729ef11.png)**

****图十六。**簇高的透视表。(图片由作者提供)**

**高集群是地震风险最大的城市集群。土耳其所有城市中的 38 个都在这个集群中。考虑到所有的集群，它在城市数量方面是第一个集群。当检查城市的特征结构时，可以看到它们通常位于远离大海的内陆地区，在多山的地方，其中一些有海边。**

**集群中拥有海岸的大多数城市都是爱琴海的邻国。集群中还有两个城市，相邻的马尔马拉、黑海和地中海。**

**![](img/3f71f63ba45ffdc1bf1b41f7ed2c2bf2.png)**

****图 17。**集群高第一公共场馆数据透视表。(图片由作者提供)**

****图 17** 中给出的表格是在对集群中城市的“**最常去的地方**”进行比较后得出的。**

**根据该表，咖啡馆似乎是该集群 38 个城市中 24 个城市的第一个最常见的位置。然后，“**酒店**”和“**土耳其餐厅**”分别到来。预计对投资者来说，这些行业将会有激烈的竞争。更明智的做法是将注意力转向竞争力较弱的行业。**

**这个集群中几乎所有的城市都位于断层线上。在这方面，特别是那些想购买房地产的人，可以从距离断层线较远的集群中或集群低中选择一个城市。**

**此外，由于具有最高地震风险的集群，可能优选的是，要进行的投资是不受地震影响的成本较低的企业类型。对于高成本投资，地震风险较小的集群城市可能是首选。**

**当对该集群中从 1 到 10 的所有城市的所有公共场所进行求和时，列表顶部的前 20 个场馆如下图所示。**

**![](img/17171ce81bf9eb8650506947bffb95c7.png)**

****图 18。**集群高中所有最常见场馆的前 20 名图表。(图片由作者提供)**

**根据**图 18** 中的图形，**海鲜餐厅**看起来是一个比其他行业竞争力弱的地方。可以在这个部门进行投资，特别是在这个集群的海滨城市。**

**此外，作为第七家烘焙食品业务“**甜品店**”的替代方案，投资“**面包店**”板块，该板块服务的区域相似，竞争比图中要少，可以认为是一个很好的机会。**

**该集群中的一些城市位于内陆地区，那里是大陆性气候，并且位于冬季非常寒冷的山区。另一方面，看图表，可以看到有很多与茶、咖啡等饮料相关的业务。**

**与其进入这个竞争激烈的地区，“早餐点”可能是一个不错的投资选择，在这里你可以喝茶和咖啡，一方面吃早餐，另一方面竞争也较少。**

****4.2。集群:“中等”****

**![](img/08230b91a2ad73ead2aae7b048e23d4a.png)**

****图 19。**集群中的透视表。(图片由作者提供)**

**该集群由 10 个城市组成，地震危险度为二级。城市的邻居通常是从集群高的城市。在这方面，就穿过城市的断层线和地震风险而言，地形可能类似于集群高。除了穆拉、安塔利亚和梅尔辛，这些城市都没有海滨。安纳托利亚东部的城市位于山区和高海拔地区。**

**当根据“**第一最常见地点**”在集群中的城市之间进行比较时，获得下表。**

**![](img/c56729632f3d55e5ecf29e08d9f79a42.png)**

****图 20。**第一集群媒体公共场馆数据透视表。(图片由作者提供)**

**从该表中可以看出，**咖啡馆**是前两个集群中投资者普遍青睐的行业。所以竞争很大。特别是考察集群介质中的集群时，一些省份常见但竞争较少的“**山**板块可能适合投资。**

**关于这个问题的进一步评论，看一下前 20 个场馆列表将是有用的，其中包括所有城市中的公共场馆。下图显示了从 1 到 10 的所有常见地点的总和。**

**![](img/fa0f924139fae3b1ad14d44c3f8debca.png)**

****图 21。**集群媒体中所有最常见场馆的前 20 名图表。(图片由作者提供)**

**集群中临海的城市可以被认为是可以投资的城市，尤其是在旅游业方面。与集群高一样，我们可以检查在投资方面竞争力较弱且排名较低的行业。**

**根据该国旅游业的发展情况，排名前 20 位的“**酒店**”行业和“**观景**”行业可能是一个不错的投资选择，在高海拔城市，这两个行业的竞争力似乎较弱。**

**就房地产而言，海滨城市可能很有吸引力。然而，对于这一点来说，选择低地更合适，它具有最小的地震风险，并且有海滨。**

****4.3。集群:“低”****

**![](img/d3dc67d01c4f607a6e124b1d0b9dbe51.png)**

****图 22。**簇低的透视表。(图片由作者提供)**

**是地震风险最小的集群。它总共由 33 个城市组成，城市数量在其他集群中排名第二。几乎所有拥有海岸线的城市都毗邻黑海。除了土耳其黑海的邻国科贾埃利和萨卡里亚之外，所有的城市都位于这个集群中。**

**这个集群中的城市可能是房地产投资的首选。那些想在海边和地震风险最小的地方买房的人应该详细评估这个集群中的城市以及这些城市的房地产机会。**

**当根据人口密度进行评估时，它由该国人口最多的城市组成，如伊斯坦布尔和安卡拉。人口密集，地震风险低于其他省份的事实，为投资铺平了道路。**

**下表显示了城市中“最常见的地方”。**

**![](img/fcfc7b47d418513601854e8f331001e0.png)**

****图 23。**第一集群媒体公共场馆数据透视表。(图片由作者提供)**

**在这个集群中的城市，投资机会高于其他集群中的省份。大量的海滨城市、较少的地震和各种各样的投资领域使得集群低的城市更有吸引力。**

**因此，更好的决定是选择一个不同的、开放发展的部门，而不是像咖啡馆部门那样在每一个集群中都非常普遍和竞争激烈的部门。在下图中，您可以看到聚类低的城市的前 20 个位置列表。**

**![](img/158185f5e9fd0b2e60ec9660fe98bbe9.png)**

****图 24。**Cluster LOW 中所有最常见场馆的前 20 名图表。(图片由作者提供)**

**我们之前为集群高提到的“**甜品店**”和“**面包店**”的投资思路在这个集群也是成立的。当**图 24** 被检查时，将会看到这些部分可以相互替代，因为它们处于相似的区域。**

**黑海沿岸的城市发展了渔业。所以竞争不太激烈的“**海鲜馆**”可以是不错的投资。为海鲜餐馆供应鱼也是一个好的商业想法。**

**在“**花园**”和“**农场**”中，它们可以被评估为相似且竞争较小的业务类型，作为联合或单独投资。**

**当检查到目前为止所有集群的表格和图形时，将会看到“**山**”扇区在每个集群中处于显著的顺序。为此，在所有集群中海拔较高的城市，可以认为是一个很好的投资机会。**

**同样，当将所有集群放在一起考虑时，可以看到“**农场**”、“**公园**”和“**广场**”行业的竞争处于中等水平，它们在总数中所占的比例很大。**

****4.4。聚类图****

**所有检测到的聚类都用土耳其地图上的点可视化。 **Python 叶子** **库**被用于此。你可以在下面的地图上看到我们在上面对星团所做的所有解释的可视化版本。**

**![](img/cf14f47a6ec53608a1f4aecba0341eb7.png)**

****图 25。**土耳其地图中聚类点的可视化。(图片由作者提供)**

**上面地图上用红色显示的点属于集群高，地震风险最高。橙色点代表中，绿色点代表低。**

**除此地图外，还根据平均地震震级绘制了颜色分布的**等值线图**。平均地震震级和聚类一起显示在 Choropleth 图中。**

**另外，点击每个点时，相关城市名称、集群信息和百年平均地震震级信息作为**弹出**。**

**![](img/88a2aaa7a5d0c5a229e0c7d1c203f0d5.png)**

****图 26。**土耳其地图中聚类点和平均地震震级分布的可视化。(图片由作者提供)**

****5。讨论****

**这项研究的第一个目的是通过利用地震数据分析城市中受欢迎的场馆，帮助商人和普通市民做出投资决策和未来的社会生活。**

**虽然该项目中使用的统计数据代表了城市的一部分，但它被视为代表了整个城市。例如，只发生在城市一个地区的地震被认为发生在整个城市。因此，基于城市的研究可以通过更深入的挖掘在地区或社区的基础上进行。此外，还可以用 Foursquare API 数据之外的不同数据源获取更多数据。因此，将有可能获得更清晰和不同的结果。**

**这个项目的另一个目的是通过检查旧的地震做出推论，并产生我们可以从中受益的信息。**

**例如，如果一个城市发生了太多地震，并且震级很高，那么该城市很可能会因断层活动而再次发生地震。但是，这种接受并不能得出多年没有地震的地方是安全的结论。本研究所使用的方法在将来可以用不同的数据和不同的方法来处理，可以得到不同的结果。**

**当检查图 25 中的红点时，可以看到它们与土耳其的地震危险地图是一致的。[7]**

****6。结论****

**因此，该项目有助于更好地了解城市在地震和社交场所方面的特点。该项目不仅支持了投资者，也支持了城市管理者或规划者的决策。它也为在与本研究类似的领域中使用数据分析类型的各类研究人员起到了指导作用。**

**研究中使用的所有数据集、Python 代码和图像文件都存储在相关的 GitHub 帐户中。[8]因此，它可以在将来用于不同的项目。**

****泽克·奇普拉克** 物理学家，数据&计算机科学爱好者。**

****7。参考文献****

*   **1.[维基百科“土耳其”话题。](https://tr.wikipedia.org/wiki/T%C3%BCrkiye)(土耳其语)**
*   **2.[gyo der——为什么要投资土耳其？](https://www.gyoder.org.tr/uploads/HTB-TURKCE-web.pdf)(土耳其语)**
*   **3. [AFAD 地震](https://deprem.afad.gov.tr/depremkatalogu)目录**
*   **4. [OpenStreetMap](https://www.openstreetmap.org/export)**
*   **5. [Foursquare API](https://developer.foursquare.com)**
*   **6.土耳其的城市(土耳其语)**
*   **7.[项目的 GitHub 库](https://github.com/zkcplk/Earthquake_and_Popular_Venues_Data_Analysis_of_Turkey)**
*   **8.[土耳其地震危险性图。](https://dmc.metu.edu.tr/system/files/HazardMap/aktiffay.jpg)**

***坚持科学…***