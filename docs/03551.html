<html>
<head>
<title>How to Create a Drop-Down Menu and a Slide Bar for your Favorite Visualization Tool</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为你最喜欢的可视化工具创建下拉菜单和滑动条</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-drop-down-menu-and-a-slide-bar-for-your-favorite-visualization-tool-3a50b7c9ea01?source=collection_archive---------8-----------------------#2020-04-04">https://towardsdatascience.com/how-to-create-a-drop-down-menu-and-a-slide-bar-for-your-favorite-visualization-tool-3a50b7c9ea01?source=collection_archive---------8-----------------------#2020-04-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5940" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python Widget，您可以用 3 行代码升级可视化</h2></div><h1 id="7511" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="f8d6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">想象一下，我们正在分析世界各国从 1960 年到 2018 年的趋势人口，以预测未来几年的人口。</p><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="a98a" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">为了可视化国家的趋势，我们选择 Plotly，因为它简单而美丽的可视化。从“越南”开始</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="05f5" class="mn kj it mj b gy mo mp l mq mr">import pandas as pd <br/>import datapane as dp <br/>import plotly.express as px</span><span id="529f" class="mn kj it mj b gy ms mp l mq mr">data = pd.read_csv('population.csv')</span><span id="d8eb" class="mn kj it mj b gy ms mp l mq mr">fig = px.line(data.set_index('Countries').loc['Vietnam'],<br/>              labels={'index': 'Year', 'value': 'Population'},<br/>              title='Population Over Time',<br/>             )<br/>fig.show()</span></pre><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mt mc l"/></div></figure><p id="e568" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">然后是美国</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="df80" class="mn kj it mj b gy mo mp l mq mr">fig = px.line(data.set_index('Countries').loc['United States'],<br/>              labels={'index': 'Year', 'value': 'Population'},<br/>              title='Population Over Time',<br/>              )<br/>fig.show()</span></pre><figure class="lw lx ly lz gt ma"><div class="bz fp l di"><div class="mt mc l"/></div></figure><p id="f442" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">看起来曲线是线性增长的，但我们不确定曲线是否对每个国家都是线性的，所以我们想继续可视化更多的国家。有没有更快的方法来可视化这些国家，而不是在<code class="fe mu mv mw mj b">df.loc['location']?</code>中更改国家的名称，如果有一个<strong class="lc iu">下拉菜单</strong>来选择您想要可视化的国家不是很好吗？</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/110a2174d3f43a9953584f4c3a039338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bODuHNXCG8BRc9N6lVx59g.gif"/></div></div></figure><p id="e13d" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">这可以通过一个小插件 Jupyter 小部件轻松完成。</p><h1 id="4424" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">Jupyter 小工具</h1><p id="540c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae ne" href="https://ipywidgets.readthedocs.io/en/latest/examples/Widget%20Basics.html" rel="noopener ugc nofollow" target="_blank"> Widgets </a>是多事件的 python 对象，可以提供像滑块、文本框等控件。我们可以使用小部件为我们的笔记本电脑构建交互式图形用户界面。</p><p id="427d" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">从安装开始</p><p id="f5a2" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated"><strong class="lc iu">带 pip </strong></p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="a1ab" class="mn kj it mj b gy mo mp l mq mr">pip install ipywidgets<br/>jupyter nbextension enable --py widgetsnbextension</span></pre><p id="eb63" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated"><strong class="lc iu">带康达</strong></p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="0ba0" class="mn kj it mj b gy mo mp l mq mr">conda install -c conda-forge ipywidgets</span></pre><p id="1a9b" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">查看此<a class="ae ne" href="https://ipywidgets.readthedocs.io/en/latest/user_install.html" rel="noopener ugc nofollow" target="_blank">链接</a>以获取关于安装的更多信息。</p><h2 id="825d" class="mn kj it bd kk nf ng dn ko nh ni dp ks lj nj nk ku ln nl nm kw lr nn no ky np bi translated">使用 Interact</h2><p id="abce" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">导入有用的库</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="3e3e" class="mn kj it mj b gy mo mp l mq mr">from ipywidgets import interact, interactive, fixed, interact_manual<br/>import ipywidgets as widgets</span></pre><p id="1c74" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">探索我们可以用<code class="fe mu mv mw mj b">interact</code>做的基本事情。首先，定义一个您想要探索的函数。当参数 x 改变时，下面的函数返回 x。</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="d737" class="mn kj it mj b gy mo mp l mq mr">def f(x):<br/>    return x</span></pre><p id="5345" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">通过向<code class="fe mu mv mw mj b">x</code>传递一个元组<code class="fe mu mv mw mj b">(min, max)</code>来创建一个滑动条</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="57e2" class="mn kj it mj b gy mo mp l mq mr">interact(f, x=(0.0,10.0))</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/381c9e93c5393f3e3d18c020c1b9df65.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/1*m-9L882X323_Eb0ogrKOsQ.gif"/></div></figure><p id="41c6" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">通过传递字符串列表创建下拉菜单</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="4d1b" class="mn kj it mj b gy mo mp l mq mr">interact(f, x=['love','hate'])</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/f8fbfd5ae78c379cd34f2f3c9b954802.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/1*MRYbPUjCKrwZxB3BYxRsUg.gif"/></div></figure><p id="2046" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">基于此，也许我们可以为我们的情节创建一个基于国家变化的函数？</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="2070" class="mn kj it mj b gy mo mp l mq mr">def f(country):<br/>    df.loc[country].iplot(<br/>                    xTitle='Year', <br/>                    yTitle='Population of {}'.format(country),<br/>                    title='Population Over Time'<br/>                     )</span></pre><p id="dc0e" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">用<code class="fe mu mv mw mj b">df.index</code>代表国家</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="9113" class="mn kj it mj b gy mo mp l mq mr">df.index</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/fc1cda3518066f0e06ca5b62a838691a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*HKGLbOZCS896H0jZUJojsg.png"/></div></figure><p id="3bd5" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">用一个简单的代码创建交互。</p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="ee99" class="mn kj it mj b gy mo mp l mq mr">interact(f, country=df.index)</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi mx"><img src="../Images/110a2174d3f43a9953584f4c3a039338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bODuHNXCG8BRc9N6lVx59g.gif"/></div></div></figure><p id="63a1" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">厉害！似乎有些国家的人口曲线是线性的。但是我们也很好奇每年世界上人口的分布是如何变化的，我们能创造另一个函数作为参数吗？绝对的！</p><p id="21ab" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">对我们之前的图表进行转置，将<code class="fe mu mv mw mj b">country</code>改为<code class="fe mu mv mw mj b">year.</code></p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="5a4a" class="mn kj it mj b gy mo mp l mq mr">def f(year):<br/>    fig = px.line(data.set_index('Countries').T.loc[str(year)],<br/>              labels={'value':'Population in {}'.format(str(year))},<br/>              title= 'Population over time')<br/>    fig.show()<br/>    <br/>interact(f, year=list(data.T.index)[1:] )</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nt"><img src="../Images/0a0c25ee9cac01682f53f6cc5e346900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*WhoQEu77xwpIDCvJ9TnYVw.gif"/></div></div></figure><p id="2e70" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">如果我们喜欢滑动条，我们可以简单地将年份列表转换成元组<code class="fe mu mv mw mj b">(min year, max year)</code></p><pre class="lw lx ly lz gt mi mj mk ml aw mm bi"><span id="eea2" class="mn kj it mj b gy mo mp l mq mr">interact(f, year=(1960, 2018))</span></pre><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nt"><img src="../Images/e8808ac454ac43ebb1ec2bc4c33c4ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bBhQ8G38WriHHJJIM6Wtxw.gif"/></div></div></figure><p id="25c6" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">就是这样！现在，我们可以有效地检查每年的分布，看看分布是否随时间而改变。</p><h1 id="9f4a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="5b13" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！您已经学习了如何利用 Python 小部件来创建滑动条和下拉菜单，以实现高效的可视化。我鼓励你用你最喜欢的可视化工具来尝试一下，比如 Matplotlib，Seaborn。只需在代码中做一点小小的改动，就可以为您节省大量时间，让您可以投入到数据科学项目的其他重要任务中。</p><p id="92be" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">在<a class="ae ne" href="https://github.com/khuyentran1401/Data-science/blob/master/visualization/dropdown/dropdown.ipynb" rel="noopener ugc nofollow" target="_blank"> this Github repo </a>中，您可以随意使用本文的代码。</p><p id="3f76" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以通过<a class="ae ne" href="https://www.linkedin.com/in/khuyen-tran-1401/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ne" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p><p id="27e5" class="pw-post-body-paragraph la lb it lc b ld md ju lf lg me jx li lj mf ll lm ln mg lp lq lr mh lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在 Medium 上关注我，了解我的最新数据科学文章，例如:</p><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/how-to-share-your-jupyter-notebook-in-3-lines-of-code-with-ngrok-bfe1495a9c0c"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">如何用 Ngrok 用 3 行代码分享你的 Jupyter 笔记本</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">想象一下，让你的朋友在远程机器上使用你的本地 Jupyter 笔记本</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol nc nx"/></div></div></a></div><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/how-to-turn-a-dinosaur-dataset-into-a-circle-dataset-with-the-same-statistics-64136c2e2ca0"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">恐龙和圆圈的数据集可以有相同的统计数据吗？</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">它们有相同的中位数和标准差，但它们是两个明显不同的数据集！</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="om l oi oj ok og ol nc nx"/></div></div></a></div><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/how-to-monitor-and-log-your-machine-learning-experiment-remotely-with-hyperdash-aa7106b15509"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">如何使用 HyperDash 远程监控和记录您的机器学习实验</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">培训需要很长时间才能完成，但你需要去洗手间休息一下…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="on l oi oj ok og ol nc nx"/></div></div></a></div><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/how-to-create-fake-data-with-faker-a835e5b7a9d9"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">如何用 Faker 创建假数据</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">您可以收集数据或创建自己的数据</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="oo l oi oj ok og ol nc nx"/></div></div></a></div><div class="nu nv gp gr nw nx"><a rel="noopener follow" target="_blank" href="/how-to-create-an-elegant-website-for-your-data-science-portfolio-in-10-minutes-577f77d1f693"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">如何在 10 分钟内为您的数据科学产品组合创建一个优雅的网站</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">你需要做的就是编辑</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">towardsdatascience.com</p></div></div><div class="og l"><div class="op l oi oj ok og ol nc nx"/></div></div></a></div></div></div>    
</body>
</html>