<html>
<head>
<title>Best Ways to Visualize Proportions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化比例的最佳方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/best-ways-to-visualize-proportions-956218c7d164?source=collection_archive---------35-----------------------#2020-06-12">https://towardsdatascience.com/best-ways-to-visualize-proportions-956218c7d164?source=collection_archive---------35-----------------------#2020-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6c25" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">可视化比例数据的三个关键图表</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/1d3f4d140565bc8c82e1920598b6aef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*gB2YcKH8oYH65UNwLL1oyg.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片来自<a class="ae ku" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2510243" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ku" href="https://pixabay.com/users/Monfocus-2516394/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2510243" rel="noopener ugc nofollow" target="_blank"> Monfocus </a></p></figure><h1 id="c348" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">比例数据示例</h1><p id="2a35" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">无论您的数据分析和数据科学应用是什么，到处都有比例。比例是关于理解组成一个整体的不同部分。</p><p id="af26" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">比例很大程度上只是给定分类变量中某事物的计数。这可能是不同行业的客户数量、不同地区的销售电话数量、各种活动类型的活动数量，或者各种口味的冰淇淋甜筒的销售数量。如果你能数出来，并把它分成几组，那么你就得到了比例数据！</p><h1 id="0a98" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">基本比例可视化</h1><p id="b7bd" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">无论你是否熟悉“探索性数据分析”的概念；基本统计数据的简单绘图对任何分析都非常有帮助，尤其是当你正在建立理解的基础，这将通知你更复杂的分析。</p><h1 id="c531" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">甜蜜的想象</h1><p id="a70e" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">我将分解三种分析比例的可视化类型，它们将被证明是非常有用的:饼图、华夫饼图和条形图(想象它们实际上是枫糖条形图或糖果条形图，以“糖果”为主题)</p><h1 id="28b3" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">馅饼时间</h1><h1 id="ccb9" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">饼图的陷阱</h1><ul class=""><li id="5821" class="mo mp it lp b lq lr lt lu lw mq ma mr me ms mi mt mu mv mw bi translated">显示角度和偏移角度的比例；会使饼图很难解释</li><li id="8b3c" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">一旦你在一个给定的馅饼中得到超过 3-5 个类，就很难比较相对比例——这里的全部目的…</li><li id="64cb" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">好吧，让我们说是的，你可以对你的分类变量的任何给定水平或值的一般分配有一个概念…但是我们经常缺乏精确性，或者对任何给定的值集之间的差异的精确考虑。</li></ul><h1 id="d796" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">使用饼图的可取之处</h1><ul class=""><li id="2248" class="mo mp it lp b lq lr lt lu lw mq ma mr me ms mi mt mu mv mw bi translated">相反，饼状图对房地产来说是惊人的。它们很小，可以在一个小空间里包含大量的信息，而不是占用大量的空间。</li><li id="231b" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">根据你的受众，饼状图可以很容易让不知情的群体快速吸收一个给定的想法。</li></ul><h1 id="a7ea" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">我们开始吧！</h1><p id="ea39" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">从使用 mtcars 数据集的组开始，让我们构建一个饼图。</p><p id="6d3c" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">首先，安装并加载<code class="fe nc nd ne nf b">ggplot2</code> (install.packages('ggplot2)，然后是库(ggplot2)，然后你就可以开始比赛了)</p><p id="620b" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated"><code class="fe nc nd ne nf b">ggplot</code>的快速故障，</p><ul class=""><li id="05bb" class="mo mp it lp b lq mj lt mk lw ng ma nh me ni mi mt mu mv mw bi translated">首先包括您正在处理的数据框架，在本例中是 mtcars</li><li id="ae02" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">然后指定<code class="fe nc nd ne nf b">aes()</code>-thetics……也就是你希望不同的变量出现在图上的地方</li><li id="a603" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">第一个是 x，所以不管你的分类变量是什么，你的桶，你的容器，你的冰淇淋口味；加在那里。</li></ul><p id="d209" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">从这里开始，在底部抛出<code class="fe nc nd ne nf b">geom_bar()</code>，让你确切地知道你想要看到什么类型的图表。我们将直接进入语法，但是使用<code class="fe nc nd ne nf b">ggplot</code>，您可以有效地创建可视化对象，然后告诉该对象您想要如何使用它。</p><p id="040a" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">首先给你一个数据的快速概念；下面你可以看到我们正在按 cylinders 变量分组，并计算每个变量中的记录数。</p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="8111" class="nn kw it nf b gy no np l nq nr">counts &lt;- mtcars %&gt;%<br/>  group_by(cyl) %&gt;%<br/>  summarise(n = n())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ns"><img src="../Images/7e0b6ddc5dccd08cdc6aa1f11812e5ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:318/0*m6XyoOiDPs5EwOuN"/></div></div></figure><p id="2038" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">让我们把它扔进馅饼里！</p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="4652" class="nn kw it nf b gy no np l nq nr">ggplot(counts, aes(x = 1, y = n, fill = cyl)) +<br/>  geom_col()+<br/>  coord_polar(theta = 'y')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/8ddf385f3cd44869388dcaed6fe573dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/0*EyLC-yHC5Keg2V9t"/></div></figure><p id="2de3" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">嘣！这是你的第一张饼状图。你会看到，无论你分组的分类变量是什么，都进入了颜色，而我写的计数或 n 进入了 y 美学。</p><p id="a49b" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">你可能还会注意到<code class="fe nc nd ne nf b">geom_col()</code>命令和<code class="fe nc nd ne nf b">coord_polar()</code></p><p id="55d1" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">为了说明<code class="fe nc nd ne nf b">coord_polar()</code>的目的，我将只运行<code class="fe nc nd ne nf b">geom_col()</code></p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="e3f8" class="nn kw it nf b gy no np l nq nr">ggplot(counts, aes(x = 1, y = n, fill = cyl)) +<br/>  geom_col()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ny"><img src="../Images/276aff14d603eff881e501a5e5918a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*STIBoI_WZmQobdku"/></div></div></figure><p id="5370" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">如您所见，这是一个堆积条形图，其中包含了相关部分。打开<code class="fe nc nd ne nf b">coord_polar(theta = 'y')</code>,我们就可以将这个柱状图打包成一个饼状图。</p><h1 id="333d" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">馅饼的绝佳替代品？华夫饼！</h1><p id="bdda" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">好吧，所以你不喜欢派…华夫饼图表是一个很好的选择。虽然华夫饼图表类似于饼图，但它们实际上将分类变量的每个级别、类别或值编码为正方形的比例。</p><h1 id="c0b3" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">华夫饼图表的陷阱</h1><ul class=""><li id="bcb7" class="mo mp it lp b lq lr lt lu lw mq ma mr me ms mi mt mu mv mw bi translated">与饼图类似，华夫饼干图很快会因为包含太多的类而陷入困境</li><li id="eef6" class="mo mp it lp b lq mx lt my lw mz ma na me nb mi mt mu mv mw bi translated">绝对不要尝试分割华夫饼或饼状图..这不利于对“相对比例”进行合理的比较，而“相对比例”才是全部目的。</li></ul><p id="f8d9" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">要为华夫饼图表准备数据，您需要将数值缩放到 1–100，加起来就是 100。为此我们将使用<code class="fe nc nd ne nf b">dplyr</code> ( <code class="fe nc nd ne nf b">install.packages('dplyr')</code>，<code class="fe nc nd ne nf b">library(dplyr)</code>)。</p><p id="1aec" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">您将在下面看到的是，我们根据分类对数据集进行分组，然后根据计数或<code class="fe nc nd ne nf b">n()</code>进行总结。然后，我们使用<code class="fe nc nd ne nf b">mutate</code>创建一个名为 percent 的新变量。这里最重要的是在我们的<code class="fe nc nd ne nf b">mutate()</code>函数中，我们正在创建这个缩放到 100 的值。</p><p id="18ee" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">我们将设置 case_counts 的名称，然后运行<code class="fe nc nd ne nf b">waffle()</code></p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="a196" class="nn kw it nf b gy no np l nq nr">count &lt;- mtcars %&gt;%<br/>  group_by(cyl) %&gt;%<br/>  summarise(n = n()) %&gt;% <br/>  mutate(percent = round(n/sum(n)*100))</span><span id="1b3c" class="nn kw it nf b gy nz np l nq nr">case_counts &lt;- count$percent<br/>names(case_counts) &lt;- count$cyl</span><span id="8bbd" class="nn kw it nf b gy nz np l nq nr">waffle(case_counts)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/b2f532ec21ffac1f77a92b11427f10c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/0*r1I9Jh6-cBFWfEVr"/></div></figure><p id="21e5" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">好了，我们上路了！</p><h1 id="8518" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">让我们用条形图来总结一下</h1><p id="c091" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">对很多东西来说，棒线只是更好地建立了价值与价值的相对可比性。让我们展开馅饼，把它扔进酒吧。还要注意，这不是直方图。我们将气缸数视为一个分类变量。</p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="b1d1" class="nn kw it nf b gy no np l nq nr">library(ggplot2)<br/>ggplot(mtcars, aes(x = as.factor(cyl))) +<br/>  geom_bar()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ob"><img src="../Images/f0c873c85e9e186602f28bc36d619eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i1PX5fova6k2mVPG"/></div></div></figure><p id="d6c2" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">堆积条形图的最佳实践:不要孤立地制作它们，三个以后就没什么用了</p><p id="9cac" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">关键是被比较的整体都共享同一个 y 轴</p><p id="4b62" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">需要记住的是，任何超过三个变量的东西都很难解释。</p><p id="d5c8" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">为了对你的条形图重新排序，你需要确保分类变量是一个因子<code class="fe nc nd ne nf b">as.factor()</code>，然后改变级别到你想要的显示顺序</p><p id="842a" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">Ggplot 根据它在数据集中看到变量的顺序对条形图和图例进行排序。要覆盖这一点，将 disease 列转换成一个带有<code class="fe nc nd ne nf b">levels</code>的因子，按照我们希望我们的图使用的顺序。</p><pre class="kj kk kl km gt nj nf nk nl aw nm bi"><span id="8ee4" class="nn kw it nf b gy no np l nq nr">mtcars %&gt;%<br/>  factor(levels = c('2', '4', '6'))</span></pre><p id="2389" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">这在组织你的情节以优化解释能力时经常会起到很大的作用</p><h1 id="92c5" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">结论</h1><p id="8763" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">享受使用比例图表和分类相关数据可视化的乐趣。随着您熟悉不同的图表技术，考虑不同的图表工具作为您可能在给定的数据类型和情况下使用的工具会对您有好处。</p><p id="cec3" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">祝数据科学快乐！别忘了关注我的博客，获取更多与机器学习、数据可视化、数据争论和所有数据科学相关的博客！datasciencelessons.com。</p></div></div>    
</body>
</html>