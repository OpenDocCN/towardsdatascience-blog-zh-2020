<html>
<head>
<title>Matplotlib Tips: How to Add Text on Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib 提示:如何在绘图上添加文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/matplotlib-tips-how-to-add-text-on-plots-33a87bdd7605?source=collection_archive---------11-----------------------#2020-07-16">https://towardsdatascience.com/matplotlib-tips-how-to-add-text-on-plots-33a87bdd7605?source=collection_archive---------11-----------------------#2020-07-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b1a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用智能文本创建更多信息性的情节。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c2b1b12483a9ea9c8084a1689809815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u5C-NUdjVB6MRlLa4vrOpg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/writing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@nevenkrcmarek?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Neven Krcmarek </a>拍摄的照片</p></figure><p id="6959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Matplotlib 是一个广泛使用的 python 数据可视化库。它的语法可能比 seaborn 或 plotly 稍微复杂一点，但这种语法带来了灵活性的优势。我们可以在 matplotlib 图上做任何事情。</p><p id="395f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图由两个主要部分组成:</p><ul class=""><li id="7573" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">身材</strong>:身材是维系一切的东西。它就像一个容器，我们把构成情节的其他组件放进去。</li><li id="b8d2" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">轴</strong>:我们绘制数据的区域。绘图的其他元素，如标签、图例、刻度都放在轴上。</li></ul><blockquote class="mj mk ml"><p id="ad22" class="kz la mm lb b lc ld ju le lf lg jx lh mn lj lk ll mo ln lo lp mp lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:一个图形可能有多个轴，但是一个轴只能在一个图形上。</p></blockquote><p id="5cda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于 matplotlib 有很多内容需要介绍。它提供了我们能想到的几乎任何一种情节。在本帖中，我们将关注一个更具体的主题，即在地块上添加文本。我们将首先创建一个基本的时间序列数据，然后在图上添加一些信息性的文本对象。</p><p id="587b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从导入我们需要的库开始。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="3888" class="mv mw it mr b gy mx my l mz na">#For generating time series data<br/>import numpy as np</span><span id="1f47" class="mv mw it mr b gy nb my l mz na">#matplotlib<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span></pre><blockquote class="mj mk ml"><p id="84a1" class="kz la mm lb b lc ld ju le lf lg jx lh mn lj lk ll mo ln lo lp mp lr ls lt lu im bi translated">需要%matplotlib 内联魔术命令来渲染 jupyter 笔记本中的绘图。</p></blockquote><p id="71be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以生成一个基本的绘图。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="8a73" class="mv mw it mr b gy mx my l mz na">ser = np.random.randn(100) #time series data</span><span id="402b" class="mv mw it mr b gy nb my l mz na">fig = plt.figure(figsize=(12,8)) <br/>ax = fig.add_subplot(111)<br/>plt.grid()<br/>ax.plot(ser)</span></pre><p id="df6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变量“ser”是保存我们将要绘制的随机时间序列数据的 numpy 数组。在下一行中，我们创建一个大小为(12，8)的<strong class="lb iu">图形</strong>。然后，我们在图上添加一个<strong class="lb iu">轴</strong>。Plt.grid 向绘图添加网格线。最后一行是在轴上实际绘制数据的命令。我们制作的情节是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/88b589de009c7a414f9a24789ec59780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4fuDnbWvyEKtRHJjfhBQQ.png"/></div></div></figure><p id="26f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来是那么的平淡简单。在情节上添加文字之前，让我们使它更有吸引力。我们可以添加一个标题，还可以指定 x 轴和 y 轴的名称。我认为最好调整 y 轴上的范围，这样我们可以有一些空间来添加文本。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="3435" class="mv mw it mr b gy mx my l mz na">ser = np.random.randn(100) #time series data</span><span id="68b0" class="mv mw it mr b gy nb my l mz na">fig = plt.figure(figsize=(12,8)) <br/>ax = fig.add_subplot(111)<br/>plt.grid()<br/>ax.plot(ser)</span><span id="a142" class="mv mw it mr b gy nb my l mz na">#title<br/>ax.set_title('Time Series Plot', fontsize=18, fontweight='bold')</span><span id="1923" class="mv mw it mr b gy nb my l mz na">#axis title<br/>ax.set_xlabel('Day', fontsize=15)<br/>ax.set_ylabel('Value', fontsize=15)</span><span id="d791" class="mv mw it mr b gy nb my l mz na">#axis limits<br/>ax.axis([0,100, -5, 5])</span></pre><p id="3279" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Set_title </strong>用于添加标题。第一个论点是标题。其余的参数是可选的，用于格式化文本。同样，<strong class="lb iu"> set_xlabel </strong>和 set_ylabel 用于给 x 轴和 y 轴添加标题。Ax.axis 允许指定数值范围(前两个用于 x 轴，另外两个用于 y 轴)。我们更新的图看起来像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/2c72bebe38ab063f629a68cfea98d45a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_jzbAea1M23rxukaYUQjg.png"/></div></div></figure><p id="2423" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比之前的版本好看。现在是给我们的情节添加文本的时候了。我们需要指定文本的位置，当然还有文本是什么。例如，下面的代码将添加“随机噪声”文本。它将根据指定坐标的点定位(本例中为[3，4])。参数<strong class="lb iu"> bbox </strong>用于捕捉带框的文本。作为 bbox 参数的参数，我们传递一个包含格式样式的字典。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="367b" class="mv mw it mr b gy mx my l mz na">ax.text(3, 4, 'Random Noise', style='italic', fontsize=12, <br/>        bbox={'facecolor': 'grey', 'alpha': 0.5, 'pad': 10})</span></pre><p id="a012" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不必将文本装箱。下面的代码添加不带框的指定文本。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="2d3e" class="mv mw it mr b gy mx my l mz na">ax.text(60, 4.1, 'No continuous trend observed', fontsize=15,      color='red')</span></pre><p id="7e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以添加带注释的文本。例如，我们可以用标记和注释来标记时间序列数据的峰值:</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="6999" class="mv mw it mr b gy mx my l mz na">ax.plot([33.5], [2.5], 'o')</span><span id="6ba3" class="mv mw it mr b gy nb my l mz na">ax.annotate('peak', xy=(33.5, 2.5), xytext=(40, 4), <br/>             fontsize=12,      <br/>             arrowprops = dict(facecolor='black', shrink=0.05))</span></pre><p id="d8fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们首先添加一个圆形标记，然后添加带有指向该标记的箭头的文本。<strong class="lb iu"> xy </strong>参数包含箭头的坐标，<strong class="lb iu"> xytext </strong>参数指定文本的位置。<strong class="lb iu"> Arrowprops </strong>顾名思义，是用来给箭头做样式的。</p><p id="a422" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把所有这些放在一起，看看我们剧情的最终版本。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="c2cf" class="mv mw it mr b gy mx my l mz na">ser = np.random.randn(100) #time series data</span><span id="13a9" class="mv mw it mr b gy nb my l mz na">fig = plt.figure(figsize=(12,8)) <br/>ax = fig.add_subplot(111)<br/>plt.grid()<br/>ax.plot(ser)</span><span id="ad24" class="mv mw it mr b gy nb my l mz na">#title<br/>ax.set_title('Time Series Plot', fontsize=18, fontweight='bold')</span><span id="6150" class="mv mw it mr b gy nb my l mz na">#axis title<br/>ax.set_xlabel('Day', fontsize=15)<br/>ax.set_ylabel('Value', fontsize=15)</span><span id="d627" class="mv mw it mr b gy nb my l mz na">#axis limits<br/>ax.axis([0,100, -5, 5])</span><span id="0c9c" class="mv mw it mr b gy nb my l mz na">#text<br/>ax.text(3, 4, 'Random Noise', style='italic', fontsize=12,<br/>        bbox={'facecolor': 'grey', 'alpha': 0.5, 'pad': 10})</span><span id="1aa6" class="mv mw it mr b gy nb my l mz na">ax.text(60, 4.1, 'No continuous trend observed', fontsize=15,  color='red')</span><span id="43fa" class="mv mw it mr b gy nb my l mz na">#annotation<br/>ax.plot([33.5], [2.5], 'o')</span><span id="eddf" class="mv mw it mr b gy nb my l mz na">ax.annotate('peak', xy=(33.5, 2.5), xytext=(40, 4), fontsize=12,<br/>            arrowprops=dict(facecolor='black', shrink=0.05))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/02278ae6efb3cd08b6d994e1474d4f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HH-G1EygGomnaXEVPT1AnA.png"/></div></div></figure></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="2bad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>