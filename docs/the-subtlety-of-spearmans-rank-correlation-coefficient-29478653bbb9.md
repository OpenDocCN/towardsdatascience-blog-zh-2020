# æ–¯çš®å°”æ›¼ç­‰çº§ç›¸å…³ç³»æ•°çš„å¾®å¦™æ€§

> åŸæ–‡ï¼š<https://towardsdatascience.com/the-subtlety-of-spearmans-rank-correlation-coefficient-29478653bbb9?source=collection_archive---------16----------------------->

## ç»Ÿè®¡æ•°å­—

## å•è°ƒå…³ç³»çš„æœªçŸ¥éƒ¨åˆ†

![](img/d3280616f9ab9910270745700a06b89a.png)

ç…§ç‰‡ç”± [Linus Mimietz](https://unsplash.com/@linusmimietz?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/s/photos/physics?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

```
**Table of Contents**[**Introduction**](#1edb)1\. [Spearmanâ€™s Rank Correlation with identical values](#b785)
2\. [Finding mathematically Spearmanâ€™s Rank Correlation](#8058)
3\. [With Numpy](#bfdd)
4\. [With Pandas](#22d4)
5\. [Investigation the subtlety of Spearman correlation coefficient](#0a22)[**Conclusion**](#ed46)
```

# ä»‹ç»

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³ä½¿ç”¨åŒ…å«ç›¸åŒå€¼çš„æ•°æ®æ¥æ¢ç©¶ Spearman çš„ç­‰çº§ç›¸å…³ç³»æ•°ã€‚æˆ‘è¿˜æ­ç¤ºäº†æ–¯çš®å°”æ›¼å€¼å¦‚ä½•æ ¹æ®å‡½æ•°çš„æ€§è´¨è€Œå˜åŒ–ã€‚

åœ¨`[scipy.stats.spearmanr](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.spearmanr.html)`æ–‡æ¡£ä¸­ï¼Œæ²¡æœ‰æ˜ç¡®è¯´æ˜ä½¿ç”¨åºæ•°æ•°æ®ã€‚æˆ‘ä¹Ÿæƒ³æ·±å…¥ç ”ç©¶ä¸€ä¸‹ã€‚

å¦‚æœä½ æœ‰å…´è¶£é˜…è¯»å…³äº Spearman ä½¿ç”¨æœ‰åºæ•°æ®çš„ç­‰çº§ç›¸å…³ç³»æ•°ã€‚è¯·å‚è€ƒä»¥ä¸‹æ–‡ç« ã€‚å®ƒè§£é‡Šäº†ä½¿ç”¨å››ç§ä¸åŒçš„æ–¹æ³•æ‰¾åˆ° Spearman çš„å€¼ï¼Œç®€åŒ–å…¬å¼ã€é€šç”¨å…¬å¼ã€Pandas `corr`å’Œæ‰‹åŠ¨è®¡ç®—ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³ä½¿ç”¨åŒ…å«ç›¸åŒå€¼çš„æ•°æ®æ¥æ¢ç©¶ Spearman çš„ç­‰çº§ç›¸å…³ç³»æ•°ã€‚æˆ‘è¿˜æ¯”è¾ƒäº†æ–¯çš®å°”æ›¼å’Œçš®å°”é€Šä»·å€¼è§‚ä¹‹é—´çš„å·®å¼‚ã€‚

åœ¨`[scipy.stats.spearmanr](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.spearmanr.html)`æ–‡çŒ®ä¸­ï¼Œæ²¡æœ‰æ˜ç¡®è¯´æ˜ä½¿ç”¨åºæ•°æ•°æ®ã€‚æˆ‘ä¹Ÿæƒ³æ·±å…¥ç ”ç©¶ä¸€ä¸‹ã€‚

# å…·æœ‰ç›¸åŒå€¼çš„ Spearman ç§©ç›¸å…³

æ–¯çš®å°”æ›¼ç­‰çº§ç›¸å…³ç³»æ•°ï¼Œ *ğœŒğ‘Ÿğ‘¥* ï¼Œ *ğ‘Ÿğ‘¦* æ˜¾ç¤ºäº†ä¸¤ä¸ªæœ‰åºæ•°æ®ä¹‹é—´çš„ç›¸å…³æ€§ã€‚ä¸€ä¸ªåºæ•°æ•°æ®å¦‚ä½•éšç€å¦ä¸€ä¸ªåºæ•°çš„å˜åŒ–è€Œå˜åŒ–ã€‚

æ–¯çš®å°”æ›¼ç§©ç›¸å…³çš„ä¸€èˆ¬å…¬å¼å¦‚ä¸‹ã€‚å½“ä½ æœ‰ç›¸åŒç­‰çº§çš„æ•°æ®æ—¶ï¼Œä½ å¿…é¡»ä½¿ç”¨è¿™ä¸ªå…¬å¼è€Œä¸æ˜¯ç®€åŒ–çš„å…¬å¼ã€‚

![](img/ba8e5fde1fdc49c6487973d0c1a914b8.png)

è®©æˆ‘ä»¬å¯¼å…¥å¿…è¦çš„åº“ã€‚

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸‹é¢çš„æ•°æ®æœ‰ç›¸åŒçš„æ’åã€‚æˆ‘ä»¬ä½¿ç”¨`scipy.stats.spearmanr`æ‰¾åˆ°æ–¯çš®å°”æ›¼ç³»æ•°ã€‚è¿”å›çš„ç³»æ•°å€¼æ˜¯ 0.710560ã€‚

![](img/631db26e6dac81fab8decf6cb2f5a081.png)

## ç†ŠçŒ«è§’

[Pandas corr](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html) éœ€è¦è®¾ç½®æ–¹æ³•ã€‚æˆ‘ä»¬ç”¨`spearman`ã€‚å®ƒè¿”å›ç›¸å…³çŸ©é˜µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€‰æ‹©`[0,1]`è¿™æ˜¯ Spearman çš„ç›¸å…³ç³»æ•°ã€‚

![](img/0b388a770e5ef0fbd369a2225e08fa47.png)

# ç”¨æ•°å­¦æ–¹æ³•å¯»æ‰¾ Spearman ç§©ç›¸å…³

![](img/9e955ec1032bb82d9ebe7d66cf1864d4.png)

å…¬å¼éœ€è¦ *ğ‘Ÿğ‘¥* å’Œ *ğ‘Ÿğ‘¦* çš„åæ–¹å·®ï¼Œ *ğœğ‘Ÿğ‘¥* ï¼Œ *ğœğ‘Ÿğ‘¦* çš„æ ‡å‡†å·®ã€‚

## æ’åæ•°æ®

æˆ‘ä»¬éœ€è¦ä½¿ç”¨`scipy.stats.rankdata`å¯¹æ•°æ®è¿›è¡Œæ’åºã€‚

å®ƒè¿”å›ä»¥ä¸‹å†…å®¹ã€‚

```
[5\.  3.5 2\.  1\.  3.5 6\.  7\. ]
[2\. 4\. 4\. 1\. 4\. 7\. 6.]
```

![](img/954c8670532b47006b460957c4e74b39.png)

åœ¨ A ç»„ä¸­ï¼Œæœ‰ä¸¤ä¸ª 6ï¼Œä»–ä»¬çš„æ’åæ˜¯ç¬¬ä¸‰å’Œç¬¬å››ã€‚

![](img/5340112582d3f29378a5c9dbad1def86.png)

åœ¨é›†åˆ B ä¸­ï¼Œæœ‰ä¸‰ä¸ª 4ï¼Œå®ƒä»¬çš„æ’åæ˜¯ç¬¬ 3ã€ç¬¬ 4 å’Œç¬¬ 5ã€‚å› æ­¤ï¼Œä»–ä»¬çš„çº§åˆ«æ˜¯:

![](img/4796f94713079aa845507c0bc907dc6c.png)

# ä½¿ç”¨ Numpy

Pandas å’Œ Numpy å¯¹æ ‡å‡†å·®ã€æ–¹å·®å’Œåæ–¹å·®ç­‰ä½¿ç”¨ä¸åŒçš„ ddof å€¼ã€‚

# å’Œç†ŠçŒ«ä¸€èµ·

åœ¨ Pandas æ–‡æ¡£ä¸­ï¼Œæ²¡æœ‰è¯´æ˜`pandas.cov`ä½¿ç”¨é»˜è®¤å€¼`ddof=1`ã€‚æˆ‘ä»¬éœ€è¦ç”¨`ddof=1`æ¥è¡¨ç¤ºæ ‡å‡†å·®ã€‚

# æ–¯çš®å°”æ›¼ç›¸å…³ç³»æ•°çš„å¾®å¦™æ€§ç ”ç©¶

ç°åœ¨è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹ Spearman å’Œ Pearson ç›¸å…³ç³»æ•°ä¹‹é—´çš„å·®å¼‚ã€‚

æ­£å¦‚æˆ‘åœ¨å¼•è¨€ä¸­æ‰€å†™çš„ï¼Œæ–¯çš®å°”æ›¼çš„ç­‰çº§ç›¸å…³ç³»æ•°ã€ *ğœŒğ‘Ÿğ‘¥çš„*ã€ *ğ‘Ÿğ‘¦çš„*æ˜¾ç¤ºäº†ä¸¤ä¸ªåºæ•°æ•°æ®ä¹‹é—´çš„ç›¸å…³æ€§ã€‚ä¸€ä¸ªåºæ•°æ•°æ®å¦‚ä½•éšç€å¦ä¸€ä¸ªåºæ•°çš„å˜åŒ–è€Œå˜åŒ–ã€‚ä¸ä¸ºäººçŸ¥çš„æ˜¯ï¼Œå³ä½¿ rx å’Œ ry å’Œè°åœ°å˜åŒ–ï¼Œå½“ *ğ‘Ÿğ‘¦* å‡å°‘è€Œ *ğ‘Ÿğ‘¥* å¢åŠ æ—¶ï¼Œæ–¯çš®å°”æ›¼å€¼ä¸‹é™ã€‚

è®©æˆ‘å‘Šè¯‰ä½ è¿™æ˜¯ä»€ä¹ˆæ„æ€ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨çº¿æ€§å…³ç³»æ¯”è¾ƒçš®å°”é€Šå’Œæ–¯çš®å°”æ›¼ç›¸å…³ç³»æ•°ã€‚

## ç ”ç©¶çº¿æ€§å…³ç³»

![](img/e7cc0bb09a3b8350afab0a5b21b833e8.png)

å¯¹äºçº¿æ€§å‡½æ•°ï¼ŒSpearman å’Œ Pearson æ˜¯ç›¸åŒçš„å€¼ã€‚

## è°ƒæŸ¥äºŒæ¬¡å…³ç³»

![](img/4cd75e3086f4f87e3eacb3c39b74f80e.png)

```
# Spearman
1.0
# Pearson
0.9833690525971426
```

![](img/e8bc7301a13eac432542d1741129b575.png)

æ–¯çš®å°”æ›¼å€¼ä¸º 1ã€‚ç„¶è€Œï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„å‡½æ•°ï¼Œä½¿ç”¨ä¸åŒçš„åŸŸä¼šäº§ç”Ÿä¸åŒçš„ Spearman å€¼ã€‚è¿™æ˜¯å› ä¸ºå½“ x å€¼å¢åŠ æ—¶ï¼Œf(x)çš„å€¼å‡å°‘ã€‚ä¸€æ—¦å‡½æ•°ä¸Šä¸‹æ³¢åŠ¨ï¼ŒSpearman å€¼å°±ä¼šé™ä½ã€‚

```
# spearman
0.48511548511548513
# pearson
0.6104541477467882
```

![](img/5a1a8f0852fbf3e9cd9ce6855f74283e.png)

## ç ”ç©¶ä¸‰æ¬¡å‡½æ•°

```
# spearman
0.9144132575042309
# pearson
0.8176029571135436
```

![](img/523f1e98579fccea74d03ea91d876a49.png)

ç”±äºä¸Šé¢çš„ä¸‰æ¬¡å‡½æ•°åœ¨ç»™å®šçš„åŸŸå†…å‡å°‘äº†å€¼ï¼Œå› æ­¤ Spearman å€¼ä¸æ˜¯ 1ã€‚å¦‚æœæŠŠå®šä¹‰åŸŸé™åˆ¶åœ¨å‡½æ•°å¢åŠ çš„å€¼ï¼ŒSpearman å°±æ˜¯ 1ã€‚

```
# spearman
1.0
# pearson
0.9849816814186138
```

![](img/b109b88c714ff78e0c6b482da12b063a.png)

# ç»“è®º

*   `spearmanr`éœ€è¦æ’åºæ•°æ®ï¼Œå› æ­¤æ‚¨çš„æ•°æ®éœ€è¦æ˜¯æœ‰åºçš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ çš„æ•°æ®ä¸æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥å½“ä½ å¯»æ‰¾çŸ›å…µæ—¶ï¼Œä½¿ç”¨`scipy.stats.rankdata`æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚
*   ä»¥ä¸Šè§‚å¯Ÿæ¥è‡ªäºåæ–¹å·®çš„å®šä¹‰ã€‚å¦‚æœä¸€ä¸ªå˜é‡çš„è¾ƒå¤§å€¼å¯¹åº”äºå¦ä¸€ä¸ªå˜é‡çš„è¾ƒå¤§å€¼ï¼Œåˆ™åæ–¹å·®ä¸ºæ­£ã€‚å½“ä¸€ä¸ªå˜é‡çš„è¾ƒå¤§å€¼ä¸»è¦å¯¹åº”äºå¦ä¸€ä¸ªå˜é‡çš„è¾ƒå°å€¼æ—¶ï¼Œå˜é‡å¾€å¾€è¡¨ç°å‡ºç›¸åçš„è¡Œä¸ºï¼Œåæ–¹å·®ä¸ºè´Ÿã€‚è¿™å½±å“äº†æ–¯çš®å°”æ›¼çš„ä»·å€¼ã€‚
*   ä¹Ÿå»ºè®®ç»˜åˆ¶ä¸€ä¸ªå›¾è¡¨æ¥æŸ¥çœ‹ä»»ä½•å€¼æ­£åœ¨å‡å°‘ï¼Œå› ä¸ºå®ƒä¼šå½±å“ä½ çš„ Spearman å€¼ã€‚

**é€šè¿‡** [**æˆä¸º**](https://blog.codewithshin.com/membership) **ä¼šå‘˜ï¼Œå¯ä»¥å®Œå…¨è®¿é—®åª’ä½“ä¸Šçš„æ¯ä¸€ä¸ªæ•…äº‹ã€‚**

![](img/0be3ee559fee844cb75615290e4a8b29.png)

[https://blog.codewithshin.com/subscribe](https://blog.codewithshin.com/subscribe)

# ç›¸å…³æ•…äº‹

[](/discover-the-strength-of-monotonic-relation-850d11f72046) [## ä½¿ç”¨æœ‰åºæ•°æ®çš„ Spearman ç­‰çº§ç›¸å…³ç³»æ•°

### å‘ç°å•è°ƒå…³ç³»çš„åŠ›é‡

towardsdatascience.com](/discover-the-strength-of-monotonic-relation-850d11f72046) [](/exploring-normal-distribution-with-jupyter-notebook-3645ec2d83f8) [## ç”¨ Jupyter ç¬”è®°æœ¬æ¢ç´¢æ­£æ€åˆ†å¸ƒ

### ä½¿ç”¨ scipy å’Œ matplotlib çš„æ­£æ€åˆ†å¸ƒåˆå­¦è€…æŒ‡å—

towardsdatascience.com](/exploring-normal-distribution-with-jupyter-notebook-3645ec2d83f8)