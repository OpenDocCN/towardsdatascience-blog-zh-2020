<html>
<head>
<title>A Practical Guide to Data Visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据可视化实用指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-practical-guide-on-data-visualization-5c31a0e0fcd5?source=collection_archive---------46-----------------------#2020-05-14">https://towardsdatascience.com/a-practical-guide-on-data-visualization-5c31a0e0fcd5?source=collection_archive---------46-----------------------#2020-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="94a4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一张图胜过千言万语</h2></div><p id="71fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们生活在大数据时代。我们可以收集大量数据，从而推断出有意义的结果，做出明智的商业决策。然而，随着数据量的增加，分析和探索数据变得更加困难。当有效和恰当地使用时，可视化是探索性数据分析的伟大工具。可视化也有助于向你的观众传递信息，或者告诉他们你的发现。没有一种通用的可视化方法，因此某些任务需要不同类型的可视化。在本帖中，我们将介绍如何创建基本情节并有效地使用它们。</p><p id="d0b5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要一个样本数据框架来工作。在本帖中，我们将使用两个不同的数据集，它们都可以在 Kaggle 上找到。第一个是<a class="ae le" href="https://www.kaggle.com/blastchar/telco-customer-churn" rel="noopener ugc nofollow" target="_blank">电信客户流失</a>数据集，另一个是<a class="ae le" href="https://www.kaggle.com/doaaalsenani/usa-cers-dataset" rel="noopener ugc nofollow" target="_blank">美国汽车数据集。</a></p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="466b" class="lo lp it lk b gy lq lr l ls lt">import pandas as pd<br/>import numpy as np</span><span id="16b1" class="lo lp it lk b gy lu lr l ls lt">df = pd.read_csv("Projects/churn_prediction/Telco-Customer-Churn.csv")</span><span id="093a" class="lo lp it lk b gy lu lr l ls lt">df.shape<br/>(7043, 21)</span></pre><p id="5d85" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据集包括 21 列。“流失”列指示客户是否流失(即离开公司)，其余列包括关于客户或客户拥有的产品的信息。</p><figure class="lf lg lh li gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lv"><img src="../Images/30a99d607ebfff5497b589ef2ba385e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydzW6Y-ASIqyBLXmAWkqIg.png"/></div></div></figure><p id="9b28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意</strong>:有很多工具和软件包可以创建很棒的可视化效果。在这篇文章中，我将使用两个最常见的 matplotlib 和 seaborn。只要你得到你想要的，随便使用任何包装。</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="b542" class="lo lp it lk b gy lq lr l ls lt">import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="a180" class="lo lp it lk b gy lu lr l ls lt">sns.set(style="darkgrid")</span><span id="f391" class="lo lp it lk b gy lu lr l ls lt">%matplotlib inline</span></pre><p id="4bb5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">%matplotlib inline 命令允许渲染笔记本中的图形，以便我们可以立即看到它们。</p><p id="e677" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在开始创建可视化之前，我想强调一点。可视化数据的主要目标是探索和分析数据或解释结果和发现。当然，我们需要注意人物看起来如何，并努力创造有吸引力的人物。然而，没有任何信息力量的非常漂亮的可视化在数据分析中是无用的。让我们从记住这一点开始。</p><p id="97ae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个数据集的主要对象是客户流失。因此，最好检查一下这个变量的样子:</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="7269" class="lo lp it lk b gy lq lr l ls lt">plt.figure(figsize=(8,5))</span><span id="cadb" class="lo lp it lk b gy lu lr l ls lt">sns.countplot('Churn', data=df)</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi md"><img src="../Images/6ea55ccd2131ce05db4058f0000d1cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*G8hMUclSOYS4SMWMat0miw.png"/></div></figure><p id="6a20" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用 matplotlib 后端创建了一个指定大小的图形对象。然后，使用 seaborn 添加了一个 countplot。这个数字显然告诉我们，该公司善于留住客户，因为流失率实际上很低。</p><p id="d5ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个数字简单明了。让我们给它增加一些信息的力量。我们可以根据“老年人”和“性别”栏看到客户流失的变化:</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="84a6" class="lo lp it lk b gy lq lr l ls lt">sns.catplot('Churn', hue='SeniorCitizen', <br/>            col='gender', kind='count', <br/>            height=4, aspect=1, data=df)</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi me"><img src="../Images/002274597cd19c9cb83f8f415e95f2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*sNAeI4jlje5eGaBETG6SUw.png"/></div></figure><p id="ced0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">性别似乎没有改变流失率，但老年人和非老年人之间存在差异。老年人更有可能流失。我们可以通过以这种方式尝试其他列来扩展我们的分析。</p><p id="32c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种探索数据的方法是检查变量的分布，这给我们一个关于分布和密度的概念。让我们检查一下“任期”和“每月收费”功能。</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="5ff5" class="lo lp it lk b gy lq lr l ls lt">fig, axs = plt.subplots(ncols=2, figsize=(10,6))</span><span id="d424" class="lo lp it lk b gy lu lr l ls lt">sns.distplot(df.tenure, ax=axs[0]).set_title("Distribution of Tenure")</span><span id="fdab" class="lo lp it lk b gy lu lr l ls lt">sns.distplot(df.MonthlyCharges, ax=axs[1]).set_title("Distribution of MonthlyCharges")</span></pre><p id="b483" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用两个支线剧情创建了人物对象。然后，使用 seaborn 创建分布图。我们还使用<strong class="kk iu"> set_title </strong>添加了标题:</p><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/0fe285f258c6b8359d9c8b625bedf67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*wNoL9xwlMdUh5_i7HpQ3dQ.png"/></div></figure><p id="40d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">任期变量表示客户成为客户的时间(以月为单位)。大多数顾客都是新顾客，或者是老顾客了。月度电荷变量呈现出奇怪的分布，但在最低量上可以看到高密度。</p><p id="7dc0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种了解数据分散性的方法是<strong class="kk iu">箱线图</strong>。</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="deb7" class="lo lp it lk b gy lq lr l ls lt">plt.figure(figsize=(10,6))</span><span id="d3d7" class="lo lp it lk b gy lu lr l ls lt">sns.boxplot(x="Contract", y="MonthlyCharges", data=df)</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mg"><img src="../Images/976d307f0c314311d7a2517db6f4af46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*An63EPdY-lYhiUBL-MsTow.png"/></div></div></figure><p id="6bf5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">方框中的线代表中间值。方框的下边缘和上边缘分别显示第一和第三分位数。所以，高的方框表示数值更加分散。从这个情节中我们可以理解:</p><ul class=""><li id="dfb0" class="mh mi it kk b kl km ko kp kr mj kv mk kz ml ld mm mn mo mp bi translated">短期合同的价格范围较小</li><li id="faef" class="mh mi it kk b kl mq ko mr kr ms kv mt kz mu ld mm mn mo mp bi translated">随着合同期的延长，月费趋于减少</li></ul></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="c65d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二数据集相对于目标变量是不同的。流失是一个分类变量，它使任务成为一个分类，而价格是连续的，我们需要解决一个回归问题来预测价格。</p><p id="fae9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">删除冗余列后，cars 数据集如下所示:</p><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/5b57d028f703ff06d6b81b286ba6ce17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*oRK4Jji9CB38f4J734oY4A.png"/></div></figure><p id="7332" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看里程和价格是如何关联的:</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="8fa5" class="lo lp it lk b gy lq lr l ls lt">sns.relplot(x="price", y="mileage", hue="brand", data=df,<br/>           height=6, aspect=1.2)</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/674a9bd1c4db284e25bceeb6701547fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*cTMhOEF_3EAZ2t7ZbabYFA.png"/></div></figure><p id="86c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不出所料，价格和里程是负相关的。另一个值得注意的是“尼桑”汽车。与其他品牌相比，它们位于低价位——低里程区域。</p><p id="31be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来看看价格的分布:</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="2786" class="lo lp it lk b gy lq lr l ls lt">plt.figure(figsize=(10,6))</span><span id="3db7" class="lo lp it lk b gy lu lr l ls lt">sns.distplot(df['price']).set_title('Distribution of Car Prices')</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9fff218b28d95a36d885ad610afd8d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*Azf6fV_0Qi0yNI820Kwciw.png"/></div></figure><p id="823d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">价格变量不是正态分布的。它是右偏的，意味着分布的尾部右侧比左侧长。另一种证明偏度的方法是比较平均值和中位数。如果平均值高于中值，则分布是右偏的。Mean 是平均值，median 是中间的值。因此，如果平均值高于中位数，我们有更多的样本在中位数的上边。</p><figure class="lf lg lh li gt lw gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/0bf7cc031731a7b2e355516523b42705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*vng4uZql5UcGxUN1WEvUBg.png"/></div></figure><p id="049d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如预期的那样，平均值高于中值。所以，昂贵的汽车比便宜的汽车多。</p><p id="0ec6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我想展示两种相关的可视化类型:散点图和点状图。<strong class="kk iu">散点图</strong>通过分散数据点显示两组数据之间的关系。<strong class="kk iu">点阵图</strong>显示点估计值和置信区间。所以，这是一种基于散点图的估计。如 seaborn 文档中所述，“点阵图通过散点图点的位置来表示对数值变量的集中趋势的估计，并使用误差线来提供该估计周围的不确定性的一些指示”。让我们来看一个例子，让这个概念更清楚:</p><pre class="lf lg lh li gt lj lk ll lm aw ln bi"><span id="f2b7" class="lo lp it lk b gy lq lr l ls lt">#Scatter plot<br/>plt.figure(figsize=(12,8))<br/>sns.scatterplot(x="age", y="mileage", data=df).set_title("Scatter plot")</span><span id="d587" class="lo lp it lk b gy lu lr l ls lt">#Point plot<br/>plt.figure(figsize=(12,8))<br/>sns.pointplot(x="age", y="mileage", data=df).set_title("Point plot")</span></pre><figure class="lf lg lh li gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi ng"><img src="../Images/b6f787cee0c79c6dfa5ef6cc56f2817f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q2WeycfDcbhZu0yJAkkf-g.png"/></div></div></figure><figure class="lf lg lh li gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi nh"><img src="../Images/e4f7c0ebf7e668acde6c977c5cd8cc8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEaXl-ClijgZZOdXKkZJKA.png"/></div></div></figure><p id="475c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点图上条形的长度与不确定性成正比。如果我们比较两个图，我们会发现散点图点密集的区域中的条形较短。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="fe22" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有许多不同的可视化类型。根据任务的不同，不同的选项可能更合适。还有动态图，通常是时间序列分析的更好选择。所有可视化的共同点是，它们都是探索性数据分析和数据科学讲述部分的伟大工具。</p><h1 id="9c1f" class="ni lp it bd nj nk nl nm nn no np nq nr jz ns ka nt kc nu kd nv kf nw kg nx ny bi translated"><strong class="ak">关于探索性数据分析的更多信息</strong></h1><ul class=""><li id="6e36" class="mh mi it kk b kl nz ko oa kr ob kv oc kz od ld mm mn mo mp bi translated"><a class="ae le" rel="noopener" target="_blank" href="/a-practical-guide-for-exploratory-data-analysis-5ab14d9a5f24">探索性数据分析实用指南</a></li><li id="92de" class="mh mi it kk b kl mq ko mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><a class="ae le" rel="noopener" target="_blank" href="/a-complete-pandas-guide-2dc53c77a002">一个完整的熊猫指南</a></li><li id="db9c" class="mh mi it kk b kl mq ko mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><a class="ae le" rel="noopener" target="_blank" href="/machine-learning-guide-learning-by-doing-afe732afde39">机器学习指南—边做边学</a></li></ul></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="d247" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读。如果你有任何问题，请让我知道。</p></div></div>    
</body>
</html>