<html>
<head>
<title>Data mining in an unknown domain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">未知领域的数据挖掘</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-mining-in-an-unknown-domain-70502d12fc19?source=collection_archive---------33-----------------------#2020-01-17">https://towardsdatascience.com/data-mining-in-an-unknown-domain-70502d12fc19?source=collection_archive---------33-----------------------#2020-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="838a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从提取仿真陈述到构建高级模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6626a2694cea1692d84d34aef06716ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9azZR1KdHms3S4uB"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@franki?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">弗兰基·查马基</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><blockquote class="kz la lb"><p id="aefd" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你有没有遇到过这样的情况，不管出于什么原因，你不得不处理一个来自你知之甚少或一无所知的领域的数据集？我打赌是的。没有多少数据科学家对泰坦尼克号或 Iris flowers 有专业知识，但他们完全可以处理这些数据集。</p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="c39d" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">数据科学家经常抱怨他们 80%的时间被浪费了？)在数据清理方面。虽然这是事实，但花在数据清理上的时间并没有完全浪费。恰恰相反。你花在数据上的时间越多，你对数据了解得越多，你的分析直觉就越好。</p><p id="1277" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">这篇文章的目的是——假设你有一个开放的心态，对数据集一无所知，头脑中没有任何问题，只是好奇——你如何发现数据集会泄露什么有趣的故事和信息？</p><p id="277a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">正如我在上一篇文章中所写的，数据科学有两个可能的起点——从问题开始或者从数据开始。在那篇文章中，我谈到了从一个问题开始的项目的生命周期。在理想情况下，是的，数据科学家会首先提出一个问题，然后使用所有可用的工具和技术来尝试找到该问题的答案。然而，现实中并非总是如此。偶尔会碰到一些你一无所知的数据。你不问任何问题，你只想知道他们掌握了什么信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/e31661af160fb5d10195837906568ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*qX3WlE-4LbYd0bJzbodXTg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据科学项目周期(@mab.datasc)</p></figure><p id="8043" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">在接下来的部分中，我将带您完成这个过程。为此，我从世界银行微数据数据库下载了一个数据集来使用(稍后会有更多的介绍)。我将使用 python jupyter 笔记本环境，使用三个主要库:<code class="fe mk ml mm mn b">pandas</code>、<code class="fe mk ml mm mn b">seaborn</code>和<code class="fe mk ml mm mn b">Scikit-Learn</code>。但是不管你用什么工具——R，excel，tableau，power BI，等等——重要的是你做了什么。</p><blockquote class="kz la lb"><p id="b1e9" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">声明:为了公平起见，我选择了一个我以前不了解的领域，并选择了一个我在写这篇文章之前从未见过的数据集。以前我处理过其他类型的世界银行数据集，但是对非洲的援助从来都与我的工作或兴趣无关。</p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="056b" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated"><strong class="ak">理解数据及其起源</strong></h1><p id="a03d" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">当你得到一个未知的数据集时，你要做的第一件事就是问一些基本的问题来了解数据的来源/血统:这个数据是关于什么的？它从哪里来的？谁生产的，出于什么目的？什么时候收集的，怎么收集的？可能有描述数据集、一些关键变量的定义等的相关文档。您可能会在哪里找到这些信息</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/fcae101b99171520603e20346e92fef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*zatxeZ50yJkYT8765vYenA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">元数据和数据文档</p></figure><p id="2d89" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我在这里使用的数据集是 1990 年至 1996 年间从非洲依赖援助的国家收集的时间序列数据。根据文件，该数据集创建于 2010 年，目的是了解捐助方为一个目的提供的援助最终是否被用于另一个目的。</p><h1 id="4885" class="mo mp it bd mq mr nm mt mu mv nn mx my jz no ka na kc np kd nc kf nq kg ne nf bi translated"><strong class="ak">这些数据包含了什么？</strong></h1><p id="54c9" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">接下来:启动你最喜欢的数据辩论库，第一次让你的数据达到顶峰。我不知道其他人做了什么，但我导入数据后做的第一件事就是调用<code class="fe mk ml mm mn b">head()</code>函数，看看它在原始状态下是什么样子。然后我会检查(不一定按这个顺序)有什么样的列，数据类型是什么，数据大小是多少，是否有缺失值。老实说，对我来说，这是处理数据最令人兴奋的部分，尤其是处理未知数据，就好像我发现了新的东西！</p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="c98f" class="nv mp it mn b gy nw nx l ny nz"># import libraries<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="485b" class="nv mp it mn b gy oa nx l ny nz"># import data<br/>df = pd.read_csv("../data.csv")</span><span id="16dd" class="nv mp it mn b gy oa nx l ny nz"># take a peak into the data<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/f0cc3a378c216819cee0d36694b5b5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8qadZYldH7E0v0PAPTHUg.png"/></div></div></figure><h1 id="fad9" class="mo mp it bd mq mr nm mt mu mv nn mx my jz no ka na kc np kd nc kf nq kg ne nf bi translated"><strong class="ak">清理您的数据</strong></h1><p id="ac41" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">数据清理确实会花费你大量的时间，尤其是当你对它几乎一无所知的时候。我也花了不少时间来清理我的数据集。为了不把这篇文章写得太长，如果你感兴趣的话，我已经把数据清理的整个过程记录在一个 jupter 笔记本和上传到 GitHub 的<a class="ae ky" href="https://github.com/mabalam/Towards-Data-Science-EDA" rel="noopener ugc nofollow" target="_blank">中。</a></p><h1 id="c64a" class="mo mp it bd mq mr nm mt mu mv nn mx my jz no ka na kc np kd nc kf nq kg ne nf bi translated"><strong class="ak">提问</strong></h1><p id="9071" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">现在您的数据已经清理完毕，您可以将它带到您的环境中来做一些事情了。如果您了解探索性数据分析(EDA)，那么您已经知道可以对数据集做什么:</p><ul class=""><li id="3a39" class="oc od it lf b lg lh lj lk mg oe mh of mi og ly oh oi oj ok bi translated">描述统计学</li><li id="7f37" class="oc od it lf b lg ol lj om mg on mh oo mi op ly oh oi oj ok bi translated">散点图</li><li id="3f20" class="oc od it lf b lg ol lj om mg on mh oo mi op ly oh oi oj ok bi translated">图表</li><li id="9920" class="oc od it lf b lg ol lj om mg on mh oo mi op ly oh oi oj ok bi translated">分布图</li><li id="c39a" class="oc od it lf b lg ol lj om mg on mh oo mi op ly oh oi oj ok bi translated">还有更多…</li></ul><p id="c875" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">您可能可以从数据集中提取数百条不同的信息。这绝对是一种解决方法。但我认为更有趣的方式是问一些你可能会感兴趣的问题。这样你的时间会得到更有效的利用。因为我的数据集是关于非洲艾滋病的，我感兴趣的第一个问题是:</p><p id="81e7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">问:有多少国家和哪些国家接受了援助？</strong></p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="daec" class="nv mp it mn b gy nw nx l ny nz"># number of countries<br/>print("Number of countries: ", df["country"].nunique())</span><span id="a1cd" class="nv mp it mn b gy oa nx l ny nz"># name of the countries<br/>print(df["country"].unique())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/bc24374fa8c3add3a9efa7a325a068d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*sDuq1CLjiqEa03R0xVOxhA.png"/></div></figure><p id="2f14" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">既然我们知道有多少和哪些国家接受了援助，接下来显而易见的国家是:</p><p id="3271" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">问:这些年来哪些国家接受了相对较多的援助？</strong></p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="64ec" class="nv mp it mn b gy nw nx l ny nz"># creating boxplots to see summary of aid by receiving countries<br/>sns.boxplot(y="country", x="aid_percap", data=df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/78afe88df08f27ace4eeaf1135389aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*BtAarSz_jdwUBJdbwdUnOA.png"/></div></figure><p id="f08c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">这是一个面板数据集，意味着每个国家都有自己的所有变量的时间序列。所以下一个问题是:</p><p id="71ea" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">问:在研究期间，aid 的总体时间趋势是什么？</strong></p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="80c0" class="nv mp it mn b gy nw nx l ny nz"># plotting time series<br/>sns.lineplot(x="year", y="aid_percap", data=df)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/89cb4cfd8486b0b9da125069580bff4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*mFcQyV4TdQN3F3aGHQPc1g.png"/></div></figure><p id="849c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我可以继续下去……对每个变量问类似的问题，但我会在这里停下来。我将继续讨论一些更有趣的问题，一些双变量分析:</p><p id="4c16" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">问:政府支出和援助之间有关联吗？</strong></p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="e2c9" class="nv mp it mn b gy nw nx l ny nz"># bivariate scatter plot with linear model<br/>sns.lmplot(x="aid_percap", y="govt_expenditure", data=df, fit_reg=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/2cc95214fb557ffc17e3030d4db4d099.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*G0Wq1GCpM2dwsGo_ISTokQ.png"/></div></figure><p id="45a7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">这个数据集不是终点。我会用其他来源的数据或文献来补充这个数据集中的发现，以验证和支持我的问题的答案。</p><h1 id="5ae4" class="mo mp it bd mq mr nm mt mu mv nn mx my jz no ka na kc np kd nc kf nq kg ne nf bi translated">建立预测模型</h1><p id="c86b" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">到目前为止，我在上一节中所做的事情是让您的数据准备好进行分析，并提出一些琐碎的问题来提取一些有趣的事实。它并没有在这里结束，而是很可能是一些更有趣和有用的东西的开始。下面是一个使用数据集构建线性回归模型以根据农业支出预测人均 GDP 的示例[注意:该模型仅用于演示目的，我跳过了许多中间步骤]。</p><pre class="kj kk kl km gt nr mn ns nt aw nu bi"><span id="3f8c" class="nv mp it mn b gy nw nx l ny nz"># import necessary libraries<br/>import numpy<br/>from sklearn.model_selection import train_test_split<br/>from sklearn.linear_model import LinearRegression<br/>from sklearn import metrics</span><span id="9f55" class="nv mp it mn b gy oa nx l ny nz">data = df[[ "gdp_percap", "agri_expenditure"]]</span><span id="cd6f" class="nv mp it mn b gy oa nx l ny nz"># remove NA values<br/>data=data.dropna()</span><span id="d4e5" class="nv mp it mn b gy oa nx l ny nz"># select x, y data for modeling<br/>y = data.iloc[:, 1].values<br/>X = data.iloc[:, :-1].values</span><span id="0f49" class="nv mp it mn b gy oa nx l ny nz"># Split X and y into X_<br/>X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.25, random_state=1)</span><span id="f72b" class="nv mp it mn b gy oa nx l ny nz"># instantiate model<br/>model = LinearRegression()</span><span id="295f" class="nv mp it mn b gy oa nx l ny nz"># fit model<br/>model.fit(X_train, y_train)</span><span id="0a21" class="nv mp it mn b gy oa nx l ny nz"># Model evaluation</span><span id="14d4" class="nv mp it mn b gy oa nx l ny nz">print("Model score: ", model.score(X_test, y_test))<br/>print("Intercept: ", model.intercept_)<br/>print("Coefficients: ", model.coef_)</span><span id="8cf4" class="nv mp it mn b gy oa nx l ny nz">print("*******")</span><span id="a2f7" class="nv mp it mn b gy oa nx l ny nz">print('Mean Absolute Error:', metrics.mean_absolute_error(y_test, y_pred))  <br/>print('Mean Squared Error:', metrics.mean_squared_error(y_test, y_pred))  <br/>print('Root Mean Squared Error:', np.sqrt(metrics.mean_squared_error(y_test, y_pred)))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/d03cfb503cd692cc981e34836e74a44e.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*RI95ugOOTJPxnHIbP0wSsw.png"/></div></figure><h1 id="7dfd" class="mo mp it bd mq mr nm mt mu mv nn mx my jz no ka na kc np kd nc kf nq kg ne nf bi translated">传达调查结果</h1><p id="c14c" class="pw-post-body-paragraph lc ld it lf b lg ng ju li lj nh jx ll mg ni lo lp mh nj ls lt mi nk lw lx ly im bi translated">讲述和交流你从数据中学到的东西是最不受重视的，但却是做数据科学最重要的部分。作为一名数据科学家，你需要能够总结故事中最有趣的部分，并能够将其传达给可能使用它们的人。这种交流可以采取任何形式，从写博客、制作幻灯片、为公司高管写报告到在科学期刊上发表。</p><p id="7592" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><em class="le">注:jupyter 笔记本及更多代码、注释和相关数据在</em><a class="ae ky" href="https://github.com/mabalam/Towards-Data-Science-EDA" rel="noopener ugc nofollow" target="_blank"><em class="le">GitHub repo</em></a><em class="le">中。</em></p></div></div>    
</body>
</html>