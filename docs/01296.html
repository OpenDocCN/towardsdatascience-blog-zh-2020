<html>
<head>
<title>How to Use Lambda for Efficient Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Lambda获得高效的Python代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-lambda-for-efficient-python-code-ff950dc8d259?source=collection_archive---------13-----------------------#2020-02-05">https://towardsdatascience.com/how-to-use-lambda-for-efficient-python-code-ff950dc8d259?source=collection_archive---------13-----------------------#2020-02-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f8ee" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用lambda对元组进行排序并为您的数据科学创意创建复杂函数的技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/869d39b17c037b0a83231d5881753c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*rH6hkj4X3N8xeOph5Su58A.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">检索自<a class="ae ku" href="https://gideonpyzer.dev/blog/2017/02/05/create-an-aws-lambda-function-in-javascript/" rel="noopener ugc nofollow" target="_blank"> Gideon Pyzer </a></p></figure><h1 id="8fea" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">动机</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ln"><img src="../Images/838283ea57ff537ad9bfc00271f08ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EUQWk_I0cvtYwgzae1onyQ.png"/></div></div></figure><p id="9c7f" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这张图让你想起了什么？波的振幅放大？这个怎么做？你仔细看看图表，发现了一些有趣的事情。看起来像是随着x的增加，y轴上的值先下降到-1，然后上升到1，再下降到-2，然后上升到2，依此类推。这给了你一个想法，图表可以用这样的列表来制作</p><p id="c69f" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated"><code class="fe mo mp mq mr b">[0, -1, 1, -2, 2, -3, 3, -4, 4, -5, 5, -6, 6, -7, 7, -8, 8, -9, 9]</code></p><p id="3e16" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">如果您将上述列表中的<code class="fe mo mp mq mr b">matplotlib</code>用作参数，您应该得到与上图接近的图形:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/6e15fd8754d89e627fd8189261d795b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*v4b4uQ8pB3PvzMZm_YDMbQ.png"/></div></figure><p id="a2a9" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这看起来很容易。一旦您理解了如何使用列表创建图形，您就可以轻松地重新创建波形图。但是如果你想创建一个更酷的图表，需要一个更大的列表，像这样呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/99333272dba1ee5cbb9c43d54a30e2d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:818/format:webp/1*Da9T-Vo4fWcgKxWeCjd_qg.png"/></div></figure><p id="0e6f" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">你肯定不想手动写上面的单子，单子上有200个数字。因此，您必须弄清楚如何使用Python来创建编号范围为(n，m)的列表</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/31291b3d7c48566d89a9ac2604edec2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*AEb_uq8Jf57PNSOEzbL82A.png"/></div></figure><p id="39ab" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">但是从0开始，按-1，1，-2，2，…n进行。</p><p id="65bc" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">如果我们认识到按元素|0|、|-1|、|1|、|-2|、|2|的绝对值排序的列表，..，n .所以有排序和绝对值的东西会起作用？答对了。我将向你展示如何用<code class="fe mo mp mq mr b">lambda</code>在一行<strong class="lu iu">代码中轻松创建这种功能。</strong></p><h1 id="d545" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">顺便问一下，Lambda是什么？</h1><p id="dd5a" class="pw-post-body-paragraph ls lt it lu b lv mv ju lx ly mw jx ma mb mx md me mf my mh mi mj mz ml mm mn im bi translated">嘿，很高兴你这么问。Python中的<code class="fe mo mp mq mr b">lambda</code>关键字提供了声明<em class="na">小型匿名函数</em>的快捷方式。它的行为就像常规函数一样。它们可以作为函数对象的替代。让我们举一个如何用lambdas代替function的小例子:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="00fb" class="nf kw it mr b gy ng nh l ni nj">def mult(x,y):<br/>  return x*y</span><span id="3641" class="nf kw it mr b gy nk nh l ni nj">mult(2,6)</span></pre><p id="da3e" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">结果:<code class="fe mo mp mq mr b">12</code></p><p id="a64d" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我们可以用<code class="fe mo mp mq mr b">lambda</code>让上面的代码更短</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="6e4e" class="nf kw it mr b gy ng nh l ni nj">mult = lambda x, y: x*y<br/>mult(2,6)</span></pre><p id="5ce6" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">但是我们需要定义乘法的名称吗？毕竟，我们只是想创建一个可以将两个数相乘的函数，对吗？我们可以将上面的函数简化为更简单的代码:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="df83" class="nf kw it mr b gy ng nh l ni nj">(lambda x, y: x*y)(2, 6)</span></pre><p id="1e13" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">那看起来更短。但是为什么你要费心去学习<code class="fe mo mp mq mr b">lambda</code>，只是为了节省几行代码呢？因为<code class="fe mo mp mq mr b">lambda</code>可以帮助你轻松创造更复杂的东西。比如根据字母表对元组列表进行排序:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="1040" class="nf kw it mr b gy ng nh l ni nj">tuples = [(1, 'd'), (2, 'b'), (4, 'a'), (3, 'c')]</span><span id="2798" class="nf kw it mr b gy nk nh l ni nj">sorted(tuples, key=lambda x: x[1])</span></pre><p id="c447" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">结果:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="102f" class="nf kw it mr b gy ng nh l ni nj">[(4, 'a'), (2, 'b'), (3, 'c'), (1, 'd')]</span></pre><p id="4779" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这给了你一个如何使用<code class="fe mo mp mq mr b">lambda</code>创建上面的图表的提示。准备好了吗？这是:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="8e3e" class="nf kw it mr b gy ng nh l ni nj">import matplotlib.pyplot as plt</span><span id="5a32" class="nf kw it mr b gy nk nh l ni nj">nums = plt.plot(sorted(range(-100, 101), key=lambda x: x * x))</span><span id="4ef9" class="nf kw it mr b gy nk nh l ni nj">plt.plot(nums)</span></pre><p id="a8b9" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">给我们图表:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4b5fce02cbacad1b9f73b8ebc0b1d34f.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*dM_ew4LPfCCKry89Hq5C1A.png"/></div></figure><h2 id="61fa" class="nf kw it bd kx nm nn dn lb no np dp lf mb nq nr lh mf ns nt lj mj nu nv ll nw bi translated">何时使用<code class="fe mo mp mq mr b">lambda</code>的其他启示:</h2><p id="a584" class="pw-post-body-paragraph ls lt it lu b lv mv ju lx ly mw jx ma mb mx md me mf my mh mi mj mz ml mm mn im bi translated">想创建一个函数来计算一个数的另一个数的幂吗？我们可以使用嵌套函数和<code class="fe mo mp mq mr b">lambda</code>的组合:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="5913" class="nf kw it mr b gy ng nh l ni nj">def power(n):<br/>  return lambda x: x**n</span><span id="96e9" class="nf kw it mr b gy nk nh l ni nj">power_3 = power(3)</span><span id="3c9f" class="nf kw it mr b gy nk nh l ni nj">list(map(power_3,[2,3,4,5]))</span></pre><p id="7b59" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">结果:</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="ce09" class="nf kw it mr b gy ng nh l ni nj">[8, 27, 64, 125]</span></pre><p id="4fd1" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">或者使用<code class="fe mo mp mq mr b">lambda</code>来操作<code class="fe mo mp mq mr b">pandas</code>数据帧</p><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="832d" class="nf kw it mr b gy ng nh l ni nj">import pandas as pd<br/>df = pd.DataFrame([[1,2,3],[4,5,6]], columns=['a','b','c'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/6c8b5e43a856556109cccbe22885c9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:204/format:webp/1*hho06mFiyzqs3aAWerdqPQ.png"/></div></figure><pre class="kj kk kl km gt nb mr nc nd aw ne bi"><span id="5b62" class="nf kw it mr b gy ng nh l ni nj">#Create the 4th column that is the sum of the other 3 columns</span><span id="97f0" class="nf kw it mr b gy nk nh l ni nj">df['d'] = df.apply(lambda row: row['a']+row['b']+row['c'],axis=1)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/901afda3243503391044d3a08f2057c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/format:webp/1*mcqbTpBIBlKJKfWHBE2SZQ.png"/></div></figure><h1 id="ae1a" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">结论</h1><p id="b008" class="pw-post-body-paragraph ls lt it lu b lv mv ju lx ly mw jx ma mb mx md me mf my mh mi mj mz ml mm mn im bi translated">恭喜你！现在你知道如何使用<code class="fe mo mp mq mr b">lambda</code>作为函数的快捷方式。当你想在短时间内创建一个无名函数时，我鼓励你使用<code class="fe mo mp mq mr b">lambda</code>。你也可以像上面一样把它作为一个高阶函数的参数，或者和像<code class="fe mo mp mq mr b">filter()</code>、<code class="fe mo mp mq mr b">map()</code>、<code class="fe mo mp mq mr b">apply()</code>这样的函数一起使用。</p><p id="8c6d" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我希望这篇教程能给你一些动机和理由来用<code class="fe mo mp mq mr b">lambda</code>切换你的一些Python代码。随着您越来越多地为您的数据科学项目引入更复杂的代码，代码中的一个小变化可以在时间和效率上给您带来巨大的回报。</p><p id="2f47" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在<a class="ae ku" href="https://github.com/khuyentran1401/Data-science/blob/master/python/lambda.ipynb" rel="noopener ugc nofollow" target="_blank">这个Github repo </a>中，您可以随意派生和使用本文的代码。</p><p id="834c" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="7171" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/timing-the-performance-to-choose-the-right-python-object-for-your-data-science-project-670db6f11b8e"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">高效Python代码的计时</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">如何比较列表、集合和其他方法的性能</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ko oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/maximize-your-productivity-with-python-6110004b45f7"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">使用Python最大化您的生产力</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">你创建了一个待办事项清单来提高效率，但最终却把时间浪费在了不重要的任务上。如果你能创造…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq ko oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/cython-a-speed-up-tool-for-your-python-function-9bab64364bfd"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">cy thon——Python函数的加速工具</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">当调整你的算法得到小的改进时，你可能想用Cython获得额外的速度，一个…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq ko oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/how-to-build-a-matrix-module-from-scratch-a4f35ec28b56"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">如何从头开始构建矩阵模块</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">如果您一直在为矩阵运算导入Numpy，但不知道该模块是如何构建的，本文将展示…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="ot l on oo op ol oq ko oc"/></div></div></a></div></div></div>    
</body>
</html>