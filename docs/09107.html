<html>
<head>
<title>How to scrape ANY website with python and beautiful soup (static web)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 python 和美汤刮任何网站(静态网页)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-scrape-any-website-with-python-and-beautiful-soup-bc84e95a3483?source=collection_archive---------4-----------------------#2020-06-30">https://towardsdatascience.com/how-to-scrape-any-website-with-python-and-beautiful-soup-bc84e95a3483?source=collection_archive---------4-----------------------#2020-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3a2f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><a class="ae ki" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Python 美汤</a>任意网页抓取教程，带 youtube 视频</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/e4c3e999a81e271828615d2910de812f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDKchO-IRH1uB-PzX2Rx8A.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来自作者</p></figure><p id="0577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">注意:这是一个纯技术教程。在进行任何刮擦之前，请检查网站的政策。</em></p><p id="d7e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些想亲眼目睹这一切的人，可以看看我在页面底部的 YouTube 视频。</p><p id="05f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">抓取网页的原因有很多。</p><p id="382e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你想得到你的足球队的数据吗，这样你就可以用算法来管理你的梦幻球队了？嘣，做一个刮 ESPN 的刮网器。跟踪竞争对手在不同社交媒体上的活动？太好了，这也包括在内。</p><p id="ee4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，也许你是一名<a class="ae ki" href="https://www.linkedin.com/pulse/developer-advocate-so-thats-engineer-right-patrick-collins/" rel="noopener ugc nofollow" target="_blank">开发者拥护者</a>，正在寻找衡量他参与黑客马拉松的 OKR 的好方法，但目前还没有好的工具，所以你想开发自己的工具。</p><p id="8068" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后一个非常特别，也是我们要寻找的！本教程展示了如何根据关键字<code class="fe lw lx ly lz b">blockchain</code>从 devpost 获取所有将在未来 50 天内结束的黑客马拉松。</p><p id="d0b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论如何，让我们直接进入如何用 python 来抓取任何东西。我将假设您有空间可以编码，并且熟悉如何使用 python。</p><p id="af17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这方面的<a class="ae ki" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">文档</a>非常强大，所以一定要在本教程结束后检查一下！</p><h1 id="e9ad" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">**注* *</h1><p id="0899" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">Beautiful soup 非常适合静态网页。如果你这样做并得到奇怪/糟糕的结果，你可能需要一个<a class="ae ki" href="https://www.selenium.dev/documentation/en/webdriver/" rel="noopener ugc nofollow" target="_blank">网络驱动</a>来清理这个网站。<a class="ae ki" rel="noopener" target="_blank" href="/how-to-scrape-any-website-with-python-and-beautiful-soup-part-2-of-2-77560fcd30fc">我发表了这样做的高级版本</a>，但是对于 95%的情况，下面的方法将会奏效。</p><h1 id="786b" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">1.皮普安装请求和美丽的汤</h1><p id="baee" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated"><code class="fe lw lx ly lz b">pip install requests</code></p><p id="e5f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">pip install beautifulsoup</code></p><p id="cfb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行这两个程序，这样您就可以使用这些包了。</p><h1 id="1e2b" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">2.找到你想刮的地方的网址</h1><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mx"><img src="../Images/2d3fe89baa97f65e9d7241db581fcc3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZzW3-hl2HaTN8vopFXabcA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来自<a class="ae ki" href="https://devpost.com/hackathons?utf8=%E2%9C%93&amp;search=blockchain&amp;challenge_type=all&amp;sort_by=Submission+Deadline" rel="noopener ugc nofollow" target="_blank">devpost.com</a></p></figure><p id="cfb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这一个不是一成不变的。如果你想浏览多个网站，你需要多个 URL。本教程的重点是只刮单个网站。一旦你理解了抓取单个页面的工作原理，你就可以移动到更多的页面。</p><p id="ee55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的教程中，我们将使用:</p><pre class="kk kl km kn gt my lz mz na aw nb bi"><span id="fe92" class="nc mb it lz b gy nd ne l nf ng"><a class="ae ki" href="https://devpost.com/hackathons?utf8=%E2%9C%93&amp;search=blockchain&amp;challenge_type=all&amp;sort_by=Submission+Deadline" rel="noopener ugc nofollow" target="_blank">https://devpost.com/hackathons?utf8=%E2%9C%93&amp;search=blockchain&amp;challenge_type=all&amp;sort_by=Submission+Deadline</a></span></pre><p id="51a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为它给了我们所有的参数。区块链关键词和黑客马拉松结束的时间。</p><h1 id="9007" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">3.检查页面，并找到您正在寻找的标签</h1><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/cb653ad994be6ba55c0ff36128a30a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*ABXvMomlMB5rzNJytpSnXA.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来自作者</p></figure><p id="a41e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个页面都是由 HTML/CSS/javascript 组成的(嗯…大部分情况下)，显示在屏幕上的每一点数据都显示为文本。你可以随时查看这个页面！只需右键单击，并点击“检查”。</p><p id="d973" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将显示页面用来呈现的所有代码。这是网络抓取的关键。你看到“元素”标签了吗？那里有你需要的所有 HTML/CSS 代码。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ni"><img src="../Images/12ea6c9a7a86ece0900c3a4c641c01c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWUR_BA-zHQ73c2iXhA8tg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">“检查”按钮的外观。图片来自作者。</p></figure><p id="25bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你不需要知道 HTML/CSS 是如何工作的(虽然，如果你知道的话，它真的会很有帮助)。唯一需要知道的是，你可以把每一个<a class="ae ki" href="https://www.w3schools.com/tags/tag_html.asp" rel="noopener ugc nofollow" target="_blank"> HTML 标签</a>看作一个对象。这些 HTML 标签有您可以查询的属性，并且每一个都是不同的。</p><p id="aaed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">图像中以<code class="fe lw lx ly lz b">&lt;footer&gt;</code>、<code class="fe lw lx ly lz b">&lt;script&gt;</code>或<code class="fe lw lx ly lz b">&lt;div&gt;</code>开头的每一行代码都是标签的开始，它们分别以<code class="fe lw lx ly lz b">&lt;/footer&gt;</code>、<code class="fe lw lx ly lz b">&lt;/script&gt;</code>或<code class="fe lw lx ly lz b">&lt;/div&gt;</code>结尾。介于这些标签之间的所有内容也是可查询的，并作为该标签的一部分。一旦你有了一个标签，你就可以得到标签里面的任何东西。</p><h1 id="7911" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">4.开始做一些 python 吧！</h1><p id="bf02" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">因此，我们通过使用 requests 对象获取我们想要的网站来开始抓取:</p><pre class="kk kl km kn gt my lz mz na aw nb bi"><span id="7bb8" class="nc mb it lz b gy nd ne l nf ng">import requests<br/>from bs4 import BeautifulSoup</span><span id="993b" class="nc mb it lz b gy nj ne l nf ng">result = requests.get("https://devpost.com/hackathons?utf8=%E2%9C%93&amp;search=blockchain&amp;challenge_type=all&amp;sort_by=Submission+Deadline")<br/>src = result.content<br/>soup = BeautifulSoup(src, 'lxml')</span></pre><p id="2fc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将结果存储在一个名为<code class="fe lw lx ly lz b">soup</code>的<code class="fe lw lx ly lz b">BeautifulSoup</code>对象中。</p><p id="d6c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是锅炉板的任何汤刮，接下来是可定制的部分。</p><h1 id="d0e2" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">5.选择你想要的标签和属性</h1><p id="43cc" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">你现在可以开始找出你想要的标签，这是你需要一点创意的地方，因为你通常可以用许多不同的方法来处理这个问题。对于我们的例子，我们想要找到所有的 hackathon 列表，我们发现它们都被包装在一个<code class="fe lw lx ly lz b">a</code>标签中，并且有一个<code class="fe lw lx ly lz b">featured_challenge</code>属性。下面是他们的 HTML 代码:</p><pre class="kk kl km kn gt my lz mz na aw nb bi"><span id="a2bc" class="nc mb it lz b gy nd ne l nf ng">&lt;a class=”clearfix” data-role=”featured_challenge” href=”<a class="ae ki" href="https://utonhack.devpost.com/?ref_content=default&amp;amp;ref_feature=challenge&amp;amp;ref_medium=discover" rel="noopener ugc nofollow" target="_blank">https://utonhack.devpost.com/?ref_content=default&amp;amp;ref_feature=challenge&amp;amp;ref_medium=discover</a>"&gt;<br/>.<br/>.<br/>.<br/>&lt;/a&gt;</span></pre><p id="9e9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3 个<code class="fe lw lx ly lz b">.</code>代表该标签内的其他标签<strong class="lb iu">。我们现在将忽略这些，因为我们要寻找的数据就在这个标记中。我们想要那个网址。如您所见，这是一个<code class="fe lw lx ly lz b">a</code>标签，因为它以<code class="fe lw lx ly lz b">&lt;a</code>开头，并且它有一个属性<code class="fe lw lx ly lz b">data-role="featured_challenge"</code>，这就是我们将要用来识别它的。</strong></p><p id="d8cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用这个通过使用<code class="fe lw lx ly lz b">find_all</code>函数找到一个<strong class="lb iu">列表，每一个都是</strong>中的一个。</p><pre class="kk kl km kn gt my lz mz na aw nb bi"><span id="cfc1" class="nc mb it lz b gy nd ne l nf ng">featured_challenges = soup.find_all('a', attrs={'data-role': 'featured_challenge'})</span></pre><p id="2735" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在的<code class="fe lw lx ly lz b">featured_challenges</code>是一个<code class="fe lw lx ly lz b">a</code>标签对象的列表，我们可以从中获取 URL。</p><p id="1543" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们遍历这个列表，我们可以这样做:</p><pre class="kk kl km kn gt my lz mz na aw nb bi"><span id="7546" class="nc mb it lz b gy nd ne l nf ng">print(featured_challenge.attrs['href'])</span></pre><p id="fe8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">attrs</code>是每个标签的属性图。如果你回头看看我们提取的<code class="fe lw lx ly lz b">a</code>标签，你会看到有一个<code class="fe lw lx ly lz b">href</code>属性保存着我们正在寻找的黑客马拉松的 URL，万岁！</p><p id="1d22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些标签对象中的每一个都算作另一个 HTML 对象，所以你也可以对每个对象做<code class="fe lw lx ly lz b">find_all</code>！如果只想得到第一个结果，可以使用<code class="fe lw lx ly lz b">find</code>功能。</p><p id="2202" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，如果您只想获得对象的文本，您可以只查找标记对象的<code class="fe lw lx ly lz b">text</code>属性，就像这样:</p><p id="fe8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lw lx ly lz b">featured_challenge.text</code></p><p id="279a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6574" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想要在这个演示中使用的真正简单的刮刀的代码，<a class="ae ki" href="https://github.com/alphachainio/demo_code/blob/master/scrape.py" rel="noopener ugc nofollow" target="_blank">在这里查看</a>。</p><p id="1c14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ki" href="https://github.com/PatrickAlphaC/hackathon_scraper" rel="noopener ugc nofollow" target="_blank">带网络驱动的多黑客马拉松铲运机的完整代码</a></p></div></div>    
</body>
</html>