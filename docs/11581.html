<html>
<head>
<title>PyCaret: The Machine Learning Omnibus — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyCaret:机器学习综合教程—第 2 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pycaret-the-machine-learning-omnibus-part-2-87c7d0756f2b?source=collection_archive---------31-----------------------#2020-08-11">https://towardsdatascience.com/pycaret-the-machine-learning-omnibus-part-2-87c7d0756f2b?source=collection_archive---------31-----------------------#2020-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b63a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">…满足您所有机器学习需求的一站式商店。</p><h2 id="cc95" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">数据预处理和模型比较</h2><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/c606254863aff05aacd730d5516aeb1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xBCLuoJattCFMb3v.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">阿什利·特雷瑟万在<a class="ae lu" href="https://unsplash.com/s/photos/one-stop-shop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a80f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是关于 python 中令人惊叹的<code class="fe lv lw lx ly b">pycaret</code>包的系列文章的第二篇，它用少得可笑的代码行实现了对 ML 项目生命周期的几乎每个阶段的快速跟踪和自动化。<strong class="jp ir">如果您错过了第一部分，请单击下面的链接，我们在其中简要介绍了初始设置，它仅用一行代码就完成了数据预处理的所有方面，并将我们带到建模阶段。</strong></p><div class="lz ma gp gr mb mc"><a rel="noopener follow" target="_blank" href="/pycaret-the-machine-learning-omnibus-dadf6e230f7b"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">PyCaret:机器学习的综合体</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">..满足您所有机器学习需求的一站式商店</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq lo mc"/></div></div></a></div><p id="f8f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将查看几个可以传递给<code class="fe lv lw lx ly b">setup()</code>函数的参数，以进一步控制由<code class="fe lv lw lx ly b">pycaret</code>完成的预处理。默认情况下，<code class="fe lv lw lx ly b">setup</code>函数只需要数据帧和我们想要预测其类别标签的目标特征。但是，由函数自动推断的要素数据类型可能并不总是正确的。在某些情况下，我们可能需要介入。例如，在我们正在使用的泰坦尼克号数据集中，<code class="fe lv lw lx ly b">setup</code>函数正确地将<code class="fe lv lw lx ly b">Pclass</code>(乘客等级)、<code class="fe lv lw lx ly b">SibSp</code>(船上的兄弟姐妹&amp;配偶)和<code class="fe lv lw lx ly b">Parch</code>(船上的父母和子女)与<code class="fe lv lw lx ly b">sex</code>一起推断为分类特征。<code class="fe lv lw lx ly b">pycaret</code>将自动对分类特征进行一键编码，在这种情况下，将对<code class="fe lv lw lx ly b">Pclass</code>、<code class="fe lv lw lx ly b">Sibsp</code>、<code class="fe lv lw lx ly b">Parch</code>和<code class="fe lv lw lx ly b">sex</code>进行编码。然而，除了<code class="fe lv lw lx ly b">sex</code>之外的这些特征都有其固有的等级顺序(普通性),对它们进行标记编码以捕捉等级顺序更为合适。</p><p id="d2a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，在下面的输出中，在运行<code class="fe lv lw lx ly b">setup</code>时，我们键入<code class="fe lv lw lx ly b">Quit</code>并通过将下面列出的附加参数传递给<code class="fe lv lw lx ly b">setup</code>函数来解决这个问题。注意，我们使用<code class="fe lv lw lx ly b">ignore_features</code>参数从建模中排除了<code class="fe lv lw lx ly b">Name</code>、<code class="fe lv lw lx ly b">Ticket</code>和<code class="fe lv lw lx ly b">Cabin</code>特征。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mr"><img src="../Images/cf91bcdba556f60ea4738c0fa856e318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x12TIL2LqFsmA3AOLWgRtg.png"/></div></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ms"><img src="../Images/c78434c53402f5d23ea258afcd004536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKdosGbYI9RsVMpMyZjTXQ.png"/></div></div></figure><h2 id="0d94" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">序数 _ 特征()</h2><p id="36c3" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated"><code class="fe lv lw lx ly b">ordinal_features</code>参数接受一个字典，其中包含我们想要标记为序数的特性以及相应的类别级别。</p><h2 id="ab79" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">常化</h2><p id="888b" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">我们还可以将<code class="fe lv lw lx ly b">normalize</code>参数设置为 True(默认为 false)并使用<code class="fe lv lw lx ly b">normalize_method</code>参数指定方法(比如说 minmax，默认为 zscore)。</p><h2 id="c733" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">宁滨数字特征</h2><p id="3437" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">在这种情况下，让我们也对数字特征<code class="fe lv lw lx ly b">Age</code>和<code class="fe lv lw lx ly b">Fares</code>进行分类，因为它们值的每个单位变化不太可能影响我们对目标的预测。</p><h2 id="9f62" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">设置</h2><p id="7eb8" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated">综上所述，我们修改后的<code class="fe lv lw lx ly b">setup</code>命令如下所示:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi my"><img src="../Images/a5eda04e52edc1c5574ca2e9821f9c89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*asUmxXjGvdnuilPTvN5MMQ.png"/></div></div></figure><p id="92d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当<code class="fe lv lw lx ly b">pycaret</code>提示我们确认它的推断时，我们点击<code class="fe lv lw lx ly b">Enter</code>。使用单个<code class="fe lv lw lx ly b">setup</code>功能，<code class="fe lv lw lx ly b">pycaret</code>已经完成:</p><ul class=""><li id="9749" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated">缺失值插补</li><li id="e634" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">分类特征的编码(见下面的第 11 行和第 12 行，现在我们有 31 个特征)</li><li id="e16e" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">规范化数字特征</li><li id="7c4f" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">收集数字特征</li><li id="7f80" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">将数据集分为训练和测试</li></ul><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/da81054e7a500408fac65476ac697475.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*wI9eFgsDCZev2xjb6mjHNg.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">产出续下</p></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi no"><img src="../Images/97b9e7e9f7e2443cdbfdfa0172b12a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*Ca-WdshNO6PRxO8AifML2Q.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">产出续下</p></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b4f21f7a6cc51b8edb3f7eab8c699386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*yOn-lFbEt73Zu7_SCDCR5g.png"/></div></figure><p id="0069" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">厉害！对吗？这还不是全部。通过向<code class="fe lv lw lx ly b">setup</code>传递额外的参数，您可以根据数据集的性质探索许多设置定制。在上面的输出中，无论您在哪里看到 False/None，我们都保持默认的设置配置不变。您可以根据数据集的性质和想要进行的转换来启用相关的选项。配置这些附加参数的语法很简单。你可以在这里找到分类的完整列表和文档<a class="ae lu" href="https://pycaret.org/classification/" rel="noopener ugc nofollow" target="_blank">，在这里</a><a class="ae lu" href="https://pycaret.org/regression/" rel="noopener ugc nofollow" target="_blank">找到回归的</a>。</p><p id="0875" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，用一个函数就完成了预处理！</p><h2 id="e9bd" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">使用 compare_model()进行模型比较</h2><p id="6b78" class="pw-post-body-paragraph jn jo iq jp b jq mt js jt ju mu jw jx jy mv ka kb kc mw ke kf kg mx ki kj kk ij bi translated"><code class="fe lv lw lx ly b">compare_model()</code>函数使我们能够生成 15 个分类模型，并一次性比较多个分类指标的交叉验证性能！模型还会根据精度指标(默认)自动排序，可以使用<code class="fe lv lw lx ly b">sort</code>参数将精度指标更改为您喜欢的其他指标。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nq"><img src="../Images/eb24be949e6dd2a2e1f7df99a0e8200d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SHbCGpckfR5CYVjCqcGJ-g.png"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">模型比较</p></figure><p id="4599" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，您可以单击任何其他首选指标列标题，根据新指标对模型排名进行交互式排序。这非常有助于快速确定我们首选指标的最佳性能模型，以便我们可以继续对所选模型进行超参数调整。</p><p id="ed9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lv lw lx ly b">compare_models()</code>返回指定度量上的最佳执行模型，该模型可以存储为模型对象。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/1dda3d85ac0dcc59ce02dd6e06aa74b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*2YD9vgwWXWo9QPIEgng5qg.png"/></div></figure><p id="001e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过将附加参数传递给以下对象，可以进一步定制<code class="fe lv lw lx ly b">compare_models()</code>的输出:</p><ul class=""><li id="a947" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated">省略型号(<code class="fe lv lw lx ly b">blacklist</code>)</li><li id="ba27" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">仅考虑特定型号(<code class="fe lv lw lx ly b">whitelist</code>)</li><li id="c6a1" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">指定交叉验证折叠(<code class="fe lv lw lx ly b">fold</code>，默认为 10)</li><li id="1814" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">四舍五入小数(<code class="fe lv lw lx ly b">round</code>，默认为 4)</li><li id="c780" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">指定模型排序的度量标准(<code class="fe lv lw lx ly b">sort</code>，默认为精确度)</li><li id="f523" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">要返回的顶级模型的数量(<code class="fe lv lw lx ly b">n_select</code>，默认为 1。如果大于 1，则返回顶级模型的列表)</li></ul><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ns"><img src="../Images/5a80d57d4a65f97431259598a48ceea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RfxweUEtntgiNSuQmjJQlQ.png"/></div></div></figure><p id="3672" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们看到，使用<code class="fe lv lw lx ly b">pycaret</code>，只需两行代码，我们就能够在 ML 项目中快速完成预处理和初步模型比较阶段。</p><p id="34bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的文章中，我们将了解<code class="fe lv lw lx ly b">pycaret</code>的强大功能，它可以使用遵循****_model()语法的函数来创建模型、调整模型超参数、集合模型、堆栈模型等等。</p><p id="1d54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您喜欢这篇文章，您可能还想看看下面关于探索性数据分析(EDA)和用最少的代码和最大的输出进行可视化的文章。</p><div class="lz ma gp gr mb mc"><a rel="noopener follow" target="_blank" href="/eda-in-r-with-smarteda-eae12f2c6094"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">使用 SmartEDA 开发的 EDA</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">探索性数据分析——更智能、更快速的方式..</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ml l"><div class="nt l mn mo mp ml mq lo mc"/></div></div></a></div><div class="lz ma gp gr mb mc"><a rel="noopener follow" target="_blank" href="/patchwork-the-next-generation-of-ggplots-1fcad5d2ba8a"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd ir gy z fp mh fr fs mi fu fw ip bi translated">拼凑——下一代 ggplots</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">进一步扩展 ggplot2 的多功能性..</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ml l"><div class="nu l mn mo mp ml mq lo mc"/></div></div></a></div><p id="f9b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的宝贵时间！注意安全！！</p></div></div>    
</body>
</html>