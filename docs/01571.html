<html>
<head>
<title>Fundamental Marketing Analytics : RFM Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基础营销分析:RFM 分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fundamental-marketing-analytics-f875018391d5?source=collection_archive---------19-----------------------#2020-02-12">https://towardsdatascience.com/fundamental-marketing-analytics-f875018391d5?source=collection_archive---------19-----------------------#2020-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ed3bb666468658101f706d76ac9d0203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_uv0-HlsrF9Hut-2figHQ.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">威廉·艾文在<a class="ae jd" href="https://unsplash.com/s/photos/marketing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="5c6e" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated"><strong class="ak">通过</strong>最近频率货币模型<strong class="ak">和用 Python 实现的管理细分机器学习模型</strong></h2></div><p id="78c0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如今，要成为一名成功的营销专业人士，营销分析是一项必备技能。因此，具有经济学和统计学背景的营销专家通常被认为比其他人更有优势。但是不管你的背景如何，仍然有一个简单的分析技术你可以利用——RFM(最近频率货币)模型。</p><p id="ea7e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">RFM 分析是一种营销分析工具，用来确定你的客户是最好的。RFM 模型基于 3 个定量因素:首先是最近度(R ),它显示了客户购买的时间；然后是频率(F ),它告诉客户多久购买一次；最后，货币(M)，它显示了客户花了多少钱。</p><p id="2a02" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇短文中，我们将通过 Python 环境探索零售数据集，向您展示这种营销分析技巧。(将使用一个非常简单的 SQL 语句来实现这个目标)</p><p id="e514" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为一个读者，没有什么比弄脏自己的手更有收获的了，走吧！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="bb08" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">数据</h1><ul class=""><li id="43e2" class="mq mr jg kx b ky ms lb mt le mu li mv lm mw lq mx my mz na bi translated">分析中使用的数据集可从<a class="ae jd" href="https://raw.githubusercontent.com/lorenzoyeung/Fundamental-marketing-analytics-/master/data.csv" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</li><li id="d1e6" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">我们没有使用所有的列。我们将主要关注客户 id、订单日期和销售额。</li><li id="897e" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">销售额:每笔订单的总金额。</li></ul><h1 id="9ac5" class="ly lz jg bd ma mb ng md me mf nh mh mi km ni kn mk kp nj kq mm ks nk kt mo mp bi translated">RFM 分析和分割</h1><ul class=""><li id="8dbf" class="mq mr jg kx b ky ms lb mt le mu li mv lm mw lq mx my mz na bi translated">像往常一样，首先要做的是导入必要的库。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="5474" class="nu lz jg nq b gy nv nw l nx ny">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>from pandasql import sqldf<br/>from sklearn.preprocessing import scale<br/>from scipy.cluster.hierarchy import linkage, dendrogram, cut_tree</span></pre><ul class=""><li id="d7fd" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">让我们导入数据并检查它的前 5 行。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="dbff" class="nu lz jg nq b gy nv nw l nx ny">df = pd.read_csv('data.csv')<br/>df.head()</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/67e77d02c8bb4981b550f8d9e0bade71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgYoxIMnrpH3fcQPG8-KuA.jpeg"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">检查数据的前 5 行</p></figure><ul class=""><li id="22cf" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">将 order_date 列转换为日期格式。</li><li id="991b" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">然后我们需要找出数据集的持续时间。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="624d" class="nu lz jg nq b gy nv nw l nx ny">df["order_date"] = df["order_date"].astype('datetime64[ns]')<br/>print(df["order_date"].max(),"\n",df["order_date"].min())</span></pre><ul class=""><li id="db79" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">创建一个新列，并将其命名为 days_since。这是为了显示最后一次购买的日期。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="5c65" class="nu lz jg nq b gy nv nw l nx ny">df['days_since'] = (pd.Timestamp('2020-01-01') - df['order_date']).dt.days</span></pre><p id="5bf7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">个人认为这是文章最有趣的部分。我们将只使用一行 sql 代码来计算最近、频率和平均购买量。</p><ul class=""><li id="315a" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">“GROUP BY 1”表示结果集的第一列。这与我们的 python 语言完全不同，如您所见，别名为 1 的列是不存在的。</li><li id="8af6" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">然后我们检查新的数据集“rfm”。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="214b" class="nu lz jg nq b gy nv nw l nx ny">rfm = sqldf("SELECT customer_id, MIN(days_since) AS 'recency', COUNT(*) AS 'frequency', AVG(sales) AS 'amount' FROM df GROUP BY 1", globals())</span><span id="f496" class="nu lz jg nq b gy od nw l nx ny">rfm.describe()</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/6a762d88fb1a369f1f87de6caf088505.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*sT0l12Zu8QQOw9ZgtvS1QQ.jpeg"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">数据帧“rfm”</p></figure><ul class=""><li id="68d8" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">现在将数据可视化。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="bc41" class="nu lz jg nq b gy nv nw l nx ny">rfm.recency.hist(bins=20)</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi of"><img src="../Images/5637d377971df29c8e9ac9e5337870f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*FyIHXOMFc3GpEUXu32R_nw.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">崭新</p></figure><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="4619" class="nu lz jg nq b gy nv nw l nx ny">customers.frequency.hist(bins=6)</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi og"><img src="../Images/6fe5e60f0629cfe7a1bf2de8ac3e4751.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*cJZHvsP8lr5jO1pV8TwVcg.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">频率</p></figure><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="f941" class="nu lz jg nq b gy nv nw l nx ny">customers.amount.hist()</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/314c59bacc167a04f190955f5e915f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*wXlV0zCuwq3fJ8WgcRmQhQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">数量</p></figure><h2 id="a473" class="nu lz jg bd ma oi oj dn me ok ol dp mi le om on mk li oo op mm lm oq or mo os bi translated"><strong class="ak"> <em class="ot">观察:</em> </strong></h2><ol class=""><li id="4fa9" class="mq mr jg kx b ky ms lb mt le mu li mv lm mw lq ou my mz na bi translated">大多数顾客是最近买的。</li><li id="d3db" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq ou my mz na bi translated">大多数顾客一年中只来购物一次，很少光顾超过两次，这意味着在顾客满意度方面需要做很多工作。</li><li id="6254" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq ou my mz na bi translated">平均订单值位于图表(金额)的左侧，这是合理的。</li></ol><ul class=""><li id="ba89" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">现在，我们将客户数据复制到一个新的数据框中。</li><li id="b17c" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">并将 customer_id 设置为索引</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="ca6a" class="nu lz jg nq b gy nv nw l nx ny">new_data = rfm<br/>new_data.head()<br/>new_data = new_data.set_index(new_data.customer_id).iloc[:,1:4]<br/>new_data.head()</span></pre><ul class=""><li id="c4ec" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">然后我们对数量和图形进行对数变换。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="474c" class="nu lz jg nq b gy nv nw l nx ny">new_data.amount = np.log(new_data.amount)</span><span id="6a15" class="nu lz jg nq b gy od nw l nx ny">new_data.amount.hist(bins=7)</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/abda488258d9849de8b2596c6681b089.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*QIjxQmpZm3mWOD4IULBYyQ.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">对数转换后的数量</p></figure><ul class=""><li id="01f5" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">标准化变量。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="a9e9" class="nu lz jg nq b gy nv nw l nx ny">new_data = pd.DataFrame(scale(new_data), index=new_data.index, columns=new_data.columns)<br/>new_data.head()</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/9816866cb3df6d8d0b6a036100885bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*7LHVwh0Vx-KhmVP0tWE89A.jpeg"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">新数据数据框架</p></figure><h2 id="90ce" class="nu lz jg bd ma oi oj dn me ok ol dp mi le om on mk li oo op mm lm oq or mo os bi translated">运行分层分段</h2><ul class=""><li id="d37c" class="mq mr jg kx b ky ms lb mt le mu li mv lm mw lq mx my mz na bi translated">取标准化数据的 10%样本。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="7de6" class="nu lz jg nq b gy nv nw l nx ny">new_data_sample = new_data.iloc[::10, :]</span></pre><ul class=""><li id="7ae1" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">对距离度量执行分层聚类。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="9507" class="nu lz jg nq b gy nv nw l nx ny">c = linkage(new_data_sample, method='ward')</span></pre><ul class=""><li id="dafc" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">将分段设置为 3，</li><li id="5b12" class="mq mr jg kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">并查看频率表。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="a3e1" class="nu lz jg nq b gy nv nw l nx ny">members = pd.DataFrame(cut_tree(c, n_clusters = 3), index=new_data_sample.index, columns=['ClusterNumber'])</span><span id="bd94" class="nu lz jg nq b gy od nw l nx ny">members.ClusterNumber.value_counts(sort=False)</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/8b0a8c0e749cc32465a190d143afbec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*S_uB6qFMSbbl0mPDPbA3tw.jpeg"/></div></figure><ul class=""><li id="66bc" class="mq mr jg kx b ky kz lb lc le nz li oa lm ob lq mx my mz na bi translated">展示前 10 名顾客。</li></ul><pre class="nl nm nn no gt np nq nr ns aw nt bi"><span id="bb38" class="nu lz jg nq b gy nv nw l nx ny">members.iloc[0:10]</span></pre><figure class="nl nm nn no gt is gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/f7ce86f5a5fd966096ec1a8c1d0549bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*25rntVFBMTq_LiQunGwSpQ.jpeg"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">客户表</p></figure><h1 id="1c70" class="ly lz jg bd ma mb ng md me mf nh mh mi km ni kn mk kp nj kq mm ks nk kt mo mp bi translated"><strong class="ak">结论:</strong></h1><p id="89a9" class="pw-post-body-paragraph kv kw jg kx b ky ms kh la lb mt kk ld le oy lg lh li oz lk ll lm pa lo lp lq ij bi translated">是不是很简单，简单的脚本，简单的工作流程！</p><p id="b14e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有了这个客户表(上表)，营销经理就能够针对每个客户的细分市场和相关的营销活动。</p><p id="8d14" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，客户群 2 是那些具有较高购买频率和中等消费金额的客户群。营销人员可以通过积极的优惠券营销或频繁的激励电子邮件来瞄准这一客户群。你也可以用各种各样的参数，如折扣价值、持续时间、打折产品等，开展小规模的活动，来测试这群客户。</p><p id="2234" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">而那些在第一部分的人，他们是那些很少花钱的休眠者。要恢复它们并不容易，因此暂时跳过它们可能是个不错的选择。</p><p id="ef45" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，分析的<a class="ae jd" href="https://github.com/lorenzoyeung/Fundamental-marketing-analytics-" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>可以在<a class="ae jd" href="https://github.com/lorenzoyeung/Fundamental-marketing-analytics-" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到。</p><p id="45a9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">编码快乐！</p><p id="f161" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要查看我的其他中国传统营销博客，这里有链接，</p><p id="5c59" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://elartedm.com/marketing-blog/" rel="noopener ugc nofollow" target="_blank">营销博客</a></p><p id="7354" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae jd" href="https://positivehk.com/category/專欄/digital-marketing-blog/" rel="noopener ugc nofollow" target="_blank">数字营销博客</a></p></div></div>    
</body>
</html>