<html>
<head>
<title>Extracting Speech from Video using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 从视频中提取语音</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extracting-speech-from-video-using-python-f0ec7e312d38?source=collection_archive---------1-----------------------#2020-08-09">https://towardsdatascience.com/extracting-speech-from-video-using-python-f0ec7e312d38?source=collection_archive---------1-----------------------#2020-08-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0cf9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Google 语音识别 API 的简单实用项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5a5e5fb428b4c5e113c9625f807971c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJvYtC7uFtCuam2QfQs97Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">雅各布·欧文斯在<a class="ae ky" href="https://unsplash.com/photos/l82NzBSYbj0?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="eea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">在这篇文章中，我将向你展示如何从视频文件中提取演讲。在识别演讲之后，我们将把它们转换成文本文档。这将是一个简单的机器学习项目，这将有助于你理解谷歌语音识别库的一些基础知识。语音识别是机器学习概念下的一个热门话题。语音识别越来越多地用于许多领域。例如，我们在网飞节目或 YouTube 视频中看到的字幕大多是由使用人工智能的机器创建的。其他语音识别器的伟大例子是个人语音助手，如谷歌的 Home Mini，亚马逊 Alexa，苹果的 Siri。</span></p><h2 id="aee9" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">目录:</h2><ul class=""><li id="0501" class="mx my it lb b lc mz lf na li nb lm nc lq nd lu ne nf ng nh bi translated"><strong class="lb iu"> <em class="ni">入门</em> </strong></li><li id="9610" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated"><strong class="lb iu"> <em class="ni">第一步:导入库</em> </strong></li><li id="3b46" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated"><strong class="lb iu"> <em class="ni">第二步:视频转音频</em> </strong></li><li id="0999" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated"><strong class="lb iu"> <em class="ni">第三步:语音识别</em> </strong></li><li id="5b21" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated"><strong class="lb iu"> <em class="ni">最后一步:导出结果</em> </strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/afacc820e3a7f996087fd54d200e9140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2AORyZWf6chqaA4A9Xhaw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@apellaes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">亚历山大·佩莱斯</a>在<a class="ae ky" href="https://unsplash.com/@apellaes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="9c09" class="nw mf it bd mg nx ny nz mj oa ob oc mm jz od ka mp kc oe kd ms kf of kg mv og bi translated">入门指南</h1><p id="108a" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">正如你可以理解的标题，我们将需要这个项目的视频记录。它甚至可以是你对着镜头说话的录音。使用名为<em class="ni"> MoviePy，</em>的库，我们将从视频记录中提取音频。下一步，我们将使用谷歌的语音识别库将音频文件转换成文本。如果您准备好了，让我们从安装库开始吧！</p><h2 id="fd46" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">图书馆</h2><p id="281f" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">我们将为这个项目使用两个库:</p><ul class=""><li id="2f2e" class="mx my it lb b lc ld lf lg li ok lm ol lq om lu ne nf ng nh bi translated">语音识别</li><li id="19d0" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">电影</li></ul><p id="3175" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在将它们导入到我们的项目文件之前，我们必须安装它们。在 python 中安装模块库非常容易。您甚至可以在一行代码中安装几个库。在您的终端窗口中写下下面一行:</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="7688" class="me mf it oo b gy os ot l ou ov">pip install SpeechRecognition moviepy</span></pre><p id="3828" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，就是它。<strong class="lb iu"> SpeechRecognition </strong>模块支持多种识别 API，Google Speech API 就是其中之一。你可以从<a class="ae ky" href="https://pypi.org/project/SpeechRecognition/" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于这个模块的信息。</p><p id="4cf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> MoviePy </strong>是一个可以读写所有最常见的音频和视频格式的库，包括 GIF。如果您在安装 moviepy 库时遇到问题，请尝试安装 ffmpeg。Ffmpeg 是一个领先的多媒体框架，能够解码、编码、转码、复用、解复用、流式传输、过滤和播放人类和机器创造的几乎任何东西。</p><p id="bb9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们应该开始在代码编辑器中编写代码了。我们将从导入库开始。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="870c" class="nw mf it bd mg nx ny nz mj oa ob oc mm jz od ka mp kc oe kd ms kf of kg mv og bi translated">步骤 1-导入库</h1><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="203e" class="me mf it oo b gy os ot l ou ov">import speech_recognition as sr </span><span id="6ede" class="me mf it oo b gy ow ot l ou ov">import moviepy.editor as mp</span></pre><p id="f725" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，这就是我们完成任务所需要的。抓紧时间，让我们进入下一步。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="85de" class="nw mf it bd mg nx ny nz mj oa ob oc mm jz od ka mp kc oe kd ms kf of kg mv og bi translated">步骤 2 —视频到音频转换</h1><p id="ab1f" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">在这一步，我们将做一些很酷的事情，将我们的视频记录转换成音频文件。视频格式有很多种，其中一些可以列举如下:</p><ul class=""><li id="a229" class="mx my it lb b lc ld lf lg li ok lm ol lq om lu ne nf ng nh bi translated">MP4 (mp4、m4a、m4v、f4v、f4a、m4b、m4r、f4b、mov)</li><li id="b07d" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">3GP (3gp、3gpp2、3g2、3gpp、3gpp 2)</li><li id="a7e4" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">OGG (ogg、oga、ogv、ogx)</li><li id="cbce" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">WMV (wmv、wma、asf*)</li></ul><p id="6c6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该知道我们的视频格式做转换没有任何问题。除了视频格式，了解一些音频格式也是一个很好的练习。以下是其中的一些:</p><ul class=""><li id="4619" class="mx my it lb b lc ld lf lg li ok lm ol lq om lu ne nf ng nh bi translated">MP3 文件</li><li id="a217" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">加气混凝土</li><li id="9f77" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">WMA</li><li id="3755" class="mx my it lb b lc nj lf nk li nl lm nm lq nn lu ne nf ng nh bi translated">AC3(杜比数字)</li></ul><p id="5509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们对这两种格式都有了一些了解。是时候使用 MoviePy 库进行转换了。你不会相信这有多容易。</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="31f3" class="me mf it oo b gy os ot l ou ov">clip = mp.VideoFileClip(r”video_recording.mov”) <br/> <br/>clip.audio.write_audiofile(r”converted.wav”)</span></pre><p id="ff51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我建议转换成 wav 格式。它与语音识别库配合得很好，这将在下一步中介绍。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ox"><a rel="noopener follow" target="_blank" href="/building-a-speech-recognizer-in-python-2dad733949b4"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">用 Python 构建语音识别器</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">使用谷歌云语音 API 将您的音频文件转换为文本</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl ks ox"/></div></div></a></div></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="daa5" class="nw mf it bd mg nx ny nz mj oa ob oc mm jz od ka mp kc oe kd ms kf of kg mv og bi translated">步骤 3 —语音识别</h1><p id="c7ef" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">首先，让我们定义识别器。</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="2880" class="me mf it oo b gy os ot l ou ov">r = sr.Recognizer()</span></pre><p id="52fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们导入在上一步(步骤 2)中创建的音频文件。</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="1858" class="me mf it oo b gy os ot l ou ov">audio = sr.AudioFile("converted.wav")</span></pre><p id="4efe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完美！最棒的部分来了，就是识别音频文件中的语音。识别器将尝试理解语音并将其转换为文本格式。</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="be43" class="me mf it oo b gy os ot l ou ov">with audio as source:<br/>  audio_file = r.record(source)</span><span id="fd60" class="me mf it oo b gy ow ot l ou ov">result = r.recognize_google(audio_file)</span></pre><h1 id="1dc3" class="nw mf it bd mg nx pm nz mj oa pn oc mm jz po ka mp kc pp kd ms kf pq kg mv og bi translated">最后一步—导出结果</h1><p id="8199" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">干得好！艰苦的工作完成了。在这一步中，我们将把识别的语音导出到一个文本文档中。这将有助于你储存你的作品。我还添加了一个<em class="ni">打印(“准备！”)</em>结束代码。以便我们知道文件何时准备好，工作何时完成。</p><pre class="kj kk kl km gt on oo op oq aw or bi"><span id="7ca0" class="me mf it oo b gy os ot l ou ov"># exporting the result <br/>with open('recognized.txt',mode ='w') as file: <br/>   file.write("Recognized Speech:") <br/>   file.write("\n") <br/>   file.write(result) <br/>   print("ready!")</span></pre></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="95ea" class="nw mf it bd mg nx ny nz mj oa ob oc mm jz od ka mp kc oe kd ms kf of kg mv og bi translated">视频演示</h1><p id="a8c8" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li oh lk ll lm oi lo lp lq oj ls lt lu im bi translated">刚刚开始我在 YouTube 上的旅程，我将为您演示机器学习、数据科学、人工智能和更多项目。尽情享受吧！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pr ps l"/></div></figure></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ox"><a href="https://lifexplorer.medium.com/membership" rel="noopener follow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">加入我的介绍链接媒体-贝希克居文</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">lifexplorer.medium.com</p></div></div><div class="pg l"><div class="pt l pi pj pk pg pl ks ox"/></div></div></a></div><p id="deb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜你。你已经创建了一个程序，将视频转换成音频文件，然后从该音频中提取语音。最后，将识别的语音导出到文本文档中。希望你喜欢阅读这篇文章并参与这个项目。如果你今天学到了新东西，我很高兴。从事像这样的动手编程项目是提高编码技能的最好方式。</p><p id="1bec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在执行代码时有任何问题，请随时<a class="ae ky" href="https://sonsuzdesign.blog/contact/" rel="noopener ugc nofollow" target="_blank">联系我</a>。</p><blockquote class="pu pv pw"><p id="20f6" class="kz la ni lb b lc ld ju le lf lg jx lh px lj lk ll py ln lo lp pz lr ls lt lu im bi translated">关注我的<a class="ae ky" href="https://medium.com/@lifexplorer" rel="noopener">博客</a>和<a class="ae ky" href="https://towardsdatascience.com/" rel="noopener" target="_blank">了解数据科学</a>以获得灵感。</p></blockquote></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h2 id="3bc1" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">相关内容:</h2><div class="qa qb gp gr qc ox"><a rel="noopener follow" target="_blank" href="/convert-text-to-speech-in-5-lines-of-code-1c67b12f4729"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">用 5 行代码将文本转换成语音</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">了解文本到语音转换可以发挥作用的领域</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="qd l pi pj pk pg pl ks ox"/></div></div></a></div><div class="qa qb gp gr qc ox"><a rel="noopener follow" target="_blank" href="/simple-face-detection-in-python-1fcda0ea648e"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">Python 中的简单人脸检测</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">如何使用 OpenCV 库检测图像中的人脸</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">towardsdatascience.com</p></div></div><div class="pg l"><div class="qe l pi pj pk pg pl ks ox"/></div></div></a></div></div></div>    
</body>
</html>