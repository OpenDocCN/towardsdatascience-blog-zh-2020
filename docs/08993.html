<html>
<head>
<title>Introduction to Data Frames in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中的数据帧介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-data-frames-in-r-b9a6302d9a56?source=collection_archive---------37-----------------------#2020-06-28">https://towardsdatascience.com/introduction-to-data-frames-in-r-b9a6302d9a56?source=collection_archive---------37-----------------------#2020-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3068" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">许多数据集存储为数据框。了解如何创建数据框、选择数据框中感兴趣的部分以及根据特定变量对数据框进行排序。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ca75cddc10ce4d60f40abb369b757462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjQ3nZ7gVaHRZpTzLD1whg.png"/></div></div></figure><h1 id="d975" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">什么是数据框？</h1><p id="09e5" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">回想一下，对于<a class="ae mf" rel="noopener" target="_blank" href="/introduction-to-matrices-in-r-dc009e3cdbb3"> <strong class="ll ir">矩阵</strong> </a>来说，所有元素必须是相同的数据类型。然而，在做市场调查时，你经常会有这样的问题:</p><ul class=""><li id="8838" class="mg mh iq ll b lm mi lp mj ls mk lw ml ma mm me mn mo mp mq bi translated">“你结婚了吗”或其他“是/否”的问题</li><li id="8c66" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">“你多大了，”(<code class="fe mr ms mt mu b">numeric</code>)</li><li id="28cc" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">你对这种产品有什么看法？或者其他‘开放式’问题(<code class="fe mr ms mt mu b">character</code>)</li></ul><p id="26f4" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">输出，即回答者对上述问题的回答，是不同数据类型的数据集。处理包含不同数据类型而不是一种数据类型的数据集是很常见的。</p><p id="97d6" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">数据框将数据集的变量作为列，将观察值作为行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/2dd0befa5f863439db4a9433515c2851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZRMangPeMJiOWazBMEwlQ.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">下面是一个 r 中内置数据帧的例子。</p></figure><h1 id="ed8d" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">看一看数据集</h1><p id="1bac" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">处理大型数据集并不少见。当处理(极其)大的数据集和数据框时，您必须首先对数据集的结构和主要元素有一个清晰的了解。因此，只显示整个数据集的一小部分通常是有用的。</p><p id="7cd1" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">要在 R 中做到这一点，您可以使用函数<code class="fe mr ms mt mu b"><a class="ae mf" href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/head" rel="noopener ugc nofollow" target="_blank">head()</a></code>或<code class="fe mr ms mt mu b"><a class="ae mf" href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/head" rel="noopener ugc nofollow" target="_blank">tail()</a></code>。<code class="fe mr ms mt mu b">head()</code>功能显示数据帧的第一部分。<code class="fe mr ms mt mu b">tail()</code>功能显示最后一部分。这两个函数都打印一个名为“header”的顶行，其中包含数据集中不同变量的名称。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/e1f51d48547ffbdcd7140ba61730ccb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SVmRJDunuCiZGotwGKA9Q.png"/></div></div></figure><h1 id="ae54" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">看一看结构</h1><p id="afc0" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">另一种快速查看数据的方法是<code class="fe mr ms mt mu b"><a class="ae mf" href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/str" rel="noopener ugc nofollow" target="_blank">str()</a></code>函数。<code class="fe mr ms mt mu b">str()</code>功能显示数据集的结构。对于数据框，它提供以下信息:</p><ul class=""><li id="f7df" class="mg mh iq ll b lm mi lp mj ls mk lw ml ma mm me mn mo mp mq bi translated">观察总数(例如 32 种车型)</li><li id="bbc8" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">变量的总数(例如 11 个汽车特征)</li><li id="7300" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">变量名的完整列表(例如<code class="fe mr ms mt mu b">mpg</code>、<code class="fe mr ms mt mu b">cy1</code> …)。)</li><li id="5e6e" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">每个变量的数据类型(如<code class="fe mr ms mt mu b">num</code>)</li><li id="4d74" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">第一次观察</li></ul><p id="42d7" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">当您接收到一个新的数据集或数据帧时，应用<code class="fe mr ms mt mu b">str()</code>功能通常是第一步。在进行更深入的分析之前，这是更深入了解数据集的好方法。</p><p id="f1f4" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">为了研究<code class="fe mr ms mt mu b"><a class="ae mf" href="https://www.rdocumentation.org/packages/datasets/versions/3.6.2/topics/mtcars" rel="noopener ugc nofollow" target="_blank">mtcars</a></code>的结构，使用<code class="fe mr ms mt mu b">str()</code>函数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/0280ce9dc4d4eb549aa2491336637ffb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfPaSM7jsNUGKgJoZwA_pQ.png"/></div></div></figure><h1 id="8a8a" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">创建数据框</h1><p id="b6db" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">让我们构建一个描述太阳系八大行星主要特征的数据框架。假设一颗行星的主要特征是:</p><ul class=""><li id="4f0c" class="mg mh iq ll b lm mi lp mj ls mk lw ml ma mm me mn mo mp mq bi translated">行星的类型(类地行星还是气态巨行星)</li><li id="5217" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">行星的直径相对于地球的直径。</li><li id="27dc" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">行星相对于地球自转的总和。</li><li id="3b36" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated">行星是否有环(对或错)。</li></ul><p id="2e78" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">一些<a class="ae mf" href="https://en.wikipedia.org/wiki/Planet" rel="noopener ugc nofollow" target="_blank">研究</a>表明，以下几个向量是必要的:<code class="fe mr ms mt mu b">name</code>、<code class="fe mr ms mt mu b">type</code>、<code class="fe mr ms mt mu b">diameter</code>、<code class="fe mr ms mt mu b">rotation</code>和<code class="fe mr ms mt mu b">rings</code>。每个向量中的第一个元素对应于第一次观察。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="b1b5" class="no ks iq mu b gy np nq l nr ns"># Definition of vectors<br/>name &lt;- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")<br/>type &lt;- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", <br/>          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")<br/>diameter &lt;- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)<br/>rotation &lt;- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)<br/>rings &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)</span></pre><p id="163d" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">要构建数据框，使用<code class="fe mr ms mt mu b"><a class="ae mf" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/data.frame" rel="noopener ugc nofollow" target="_blank">data.frame()</a></code>功能。作为参数，必须传递前面的向量:它们将成为数据帧的不同列。因为每一列都有相同的长度，所以传递的向量也应该有相同的长度。请记住，它们可能包含不同类型的数据。</p><p id="c018" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">为了构建行星数据框架，我们将使用<code class="fe mr ms mt mu b">data.frame()</code>函数并传递向量<code class="fe mr ms mt mu b">name</code>、<code class="fe mr ms mt mu b">type</code>、<code class="fe mr ms mt mu b">diameter</code>、<code class="fe mr ms mt mu b">rotation</code>和<code class="fe mr ms mt mu b">rings as arguments.</code></p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="4585" class="no ks iq mu b gy np nq l nr ns"># Create a data frame from the vectors<br/>planets_df &lt;- data.frame(name, type, diameter, rotation, rings)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/4b817f3d9c83968f7190456bd2b95cbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*csL4UKK5pKSNdS3vtuXtpw.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">数据框有 8 个观察值和 5 个变量。</p></figure><p id="fe30" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">让我们研究一下新数据框的结构。回想一下，我们可以使用<code class="fe mr ms mt mu b">str()</code>函数来实现这一点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/42eae2589dcb39bae2cb88817f71d509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5Eg0F1Tz8Zq3ADlxPzd4Q.png"/></div></div></figure><h1 id="beb1" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">数据框元素的选择</h1><p id="ade1" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">与向量和矩阵类似，您可以使用方括号<code class="fe mr ms mt mu b">[]</code>从数据框中选择元素。通过使用逗号，您可以分别指示从行和列中选择什么。例如:</p><ul class=""><li id="19c5" class="mg mh iq ll b lm mi lp mj ls mk lw ml ma mm me mn mo mp mq bi translated"><code class="fe mr ms mt mu b">my_df[1,2]</code>选择<code class="fe mr ms mt mu b">my_df</code>中第一行第二列的值。</li><li id="790b" class="mg mh iq ll b lm mv lp mw ls mx lw my ma mz me mn mo mp mq bi translated"><code class="fe mr ms mt mu b">my_df[1:3, 2:4]</code>选择<code class="fe mr ms mt mu b">my_df</code>中的第 1 至 3 行和第 2 至 4 列。</li></ul><p id="c47d" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">选择一行或一列的所有元素与选择矩阵完全相同。例如，<code class="fe mr ms mt mu b">my_df[1,]</code>选择第一行的所有元素。</p><h2 id="87a9" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">让你试试</h2><p id="05e2" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">从<code class="fe mr ms mt mu b">planets_df </code>数据框中选择水星的直径(这与我们之前使用的数据框相同)。这是第一行第三列的值。接下来，选择火星上的所有数据(第四行)。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="dd1c" class="no ks iq mu b gy np nq l nr ns"># Definition of vectors<br/>name &lt;- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")<br/>type &lt;- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", <br/>          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")<br/>diameter &lt;- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)<br/>rotation &lt;- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)<br/>rings &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)</span><span id="d552" class="no ks iq mu b gy of nq l nr ns"># Create a data frame from the vectors<br/>planets_df &lt;- data.frame(name, type, diameter, rotation, rings)</span></pre><h2 id="138e" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">解决办法</h2><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="f8c0" class="no ks iq mu b gy np nq l nr ns"># Print out diameter of Mercury (row 1, column 3)<br/>planets_df[1,3]</span><span id="c69f" class="no ks iq mu b gy of nq l nr ns"># Print out data for Mars (entire fourth row)<br/>planets_df[4,]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/4c561028aa639cd58b8e8484ef3e8c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbrZ-xyd1EbCNu0-LMaWLg.png"/></div></div></figure><h1 id="01ff" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">数据框元素的选择(2)</h1><p id="061a" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">除了使用数字来选择数据框的元素，还可以使用变量名来选择数据框的列。</p><p id="2a32" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">例如，假设您想要选择<code class="fe mr ms mt mu b">type</code>列的前三个元素。使用第一种方法，您将使用</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="53f3" class="no ks iq mu b gy np nq l nr ns">planets_df[1:3,2]</span></pre><p id="5b06" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">这种方法的一个可能的缺点是，您必须知道(或查找)列号<code class="fe mr ms mt mu b">type</code>，如果有很多变量，这可能会变得很困难。因此，使用变量名通常更容易:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="e9cb" class="no ks iq mu b gy np nq l nr ns">plantes_df[1:3, "type"]</span></pre><h2 id="beef" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">让你试试</h2><p id="5c7c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">选择并打印出<code class="fe mr ms mt mu b">planets_df</code>的<code class="fe mr ms mt mu b">"diameter"</code>栏中的前 5 个值。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="7e71" class="no ks iq mu b gy np nq l nr ns"># Definition of vectors<br/>name &lt;- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")<br/>type &lt;- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", <br/>          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")<br/>diameter &lt;- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)<br/>rotation &lt;- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)<br/>rings &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)</span><span id="0e1f" class="no ks iq mu b gy of nq l nr ns"># Create a data frame from the vectors<br/>planets_df &lt;- data.frame(name, type, diameter, rotation, rings)</span></pre><h2 id="c6b5" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">解决办法</h2><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="c016" class="no ks iq mu b gy np nq l nr ns"># Select first 5 values of diameter column<br/>planets_df[1:5, "diameter"]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/8789a17c3e87755253ce1fe2f896b10e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMLD61V9Llt3vn0hRvop3A.png"/></div></div></figure><h1 id="70c2" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">只有带环的行星</h1><p id="76bc" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">通常，从数据框中选择特定变量会很有帮助。为此，您需要选择一整列。假设您想要选择第三个变量<code class="fe mr ms mt mu b">diameter</code>的所有元素。您可以使用以下命令之一:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="8663" class="no ks iq mu b gy np nq l nr ns">planets_df[,3]<br/>planets_df[,"diameter"]</span></pre><p id="73c7" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">然而，有一条捷径。如果您的列有名称，您可以使用<code class="fe mr ms mt mu b">$</code>符号:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="f599" class="no ks iq mu b gy np nq l nr ns">planets_df$diameter</span></pre><h2 id="b8af" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">让你试试</h2><p id="786f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">从我们之前创建的<code class="fe mr ms mt mu b">planets_df</code>数据框中选择<code class="fe mr ms mt mu b">rings</code>变量，并将结果存储为<code class="fe mr ms mt mu b">rings_vector</code>。打印出<code class="fe mr ms mt mu b">rings_vector</code>看看你是否做对了。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="b5f1" class="no ks iq mu b gy np nq l nr ns"># Definition of vectors<br/>name &lt;- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")<br/>type &lt;- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", <br/>          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")<br/>diameter &lt;- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)<br/>rotation &lt;- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)<br/>rings &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)</span><span id="03ba" class="no ks iq mu b gy of nq l nr ns"># Create a data frame from the vectors<br/>planets_df &lt;- data.frame(name, type, diameter, rotation, rings)</span></pre><h2 id="438d" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">解决办法</h2><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="7f6e" class="no ks iq mu b gy np nq l nr ns"># Select the rings variable from planets_df<br/>rings_vector &lt;- planets_df$rings<br/>  <br/># Print out rings_vector<br/>rings_vector</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/e2846eed47afbbd4028577f87cc1ce69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5B71p50kb3-PZmyhMmZdqw.png"/></div></div></figure><h1 id="4459" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">只有带环的行星(2)</h1><p id="df04" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">假设你想用 R 来帮助你得到太阳系中有环的行星的数据。在上面，我们创建了包含以下内容的<code class="fe mr ms mt mu b">rings_vector</code>:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="f167" class="no ks iq mu b gy np nq l nr ns">&gt; rings_vector<br/>[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</span></pre><p id="3944" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">我们看到前四个观测值(或行星)没有环(<code class="fe mr ms mt mu b">FALSE</code>)，剩下的四个有(<code class="fe mr ms mt mu b">TRUE</code>)。</p><p id="83b0" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">为了更好地了解这些行星的名称、直径等，我们将使用<code class="fe mr ms mt mu b">rings_vector</code>来选择四颗有环行星的数据。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="247f" class="no ks iq mu b gy np nq l nr ns"># Select all columns for planets with rings<br/>planets_df[rings_vector,]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/df75e9ea4f24f981a531396d6ca6f60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FpUCpfo6hjgQsk6zLz6veQ.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">在这里，我们学习了如何根据某个条件是否为真(有环或无环)，从日期框架(<code class="fe mr ms mt mu b">planets_df</code>)中选择一个子集，提取所有相关数据。</p></figure><h1 id="bcfc" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">只有有环但更短的行星</h1><p id="5564" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">通过使用<code class="fe mr ms mt mu b"><a class="ae mf" href="http://www.rdocumentation.org/packages/base/functions/subset" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">subset()</strong></a></code> <strong class="ll ir"> </strong>函数作为快捷方式，我们可以做与上面完全相同的事情。subset 函数返回满足条件的向量、矩阵或数据帧的子集。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="6789" class="no ks iq mu b gy np nq l nr ns">subset(my_df, subset = some_condition)</span></pre><p id="9a2e" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">subset 函数接受几个参数。第一个参数<code class="fe mr ms mt mu b">my_df</code>指定要添加子集的数据集。第二个参数是一个逻辑表达式，指示要保留的元素或行:缺少的值被视为 false。通过添加第二个参数，您为 R 提供了选择正确子集的必要信息和条件。</p><p id="778e" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">以前，为了得到有环行星的子集，我们使用了<code class="fe mr ms mt mu b">rings_vector</code>。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="228b" class="no ks iq mu b gy np nq l nr ns"># Select the rings variable from planets_df<br/>rings_vector &lt;- planets_df$rings</span><span id="fd60" class="no ks iq mu b gy of nq l nr ns"># Select all columns for planets with rings<br/>planets_df[rings_vector,]</span></pre><p id="8f61" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">通过使用<code class="fe mr ms mt mu b">subset()</code>函数，我们可以在不需要<code class="fe mr ms mt mu b">rings_vector</code>的情况下得到完全相同的结果。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="b2ef" class="no ks iq mu b gy np nq l nr ns">subset(planets_df, subset = rings)</span></pre><h2 id="9232" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">让你试试</h2><p id="ebef" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">从<code class="fe mr ms mt mu b">planets_df</code>中选择直径小于地球的行星子集。你需要使用<code class="fe mr ms mt mu b">subset()</code>功能。<strong class="ll ir">提示:</strong>因为<code class="fe mr ms mt mu b">diameter</code>变量是行星直径相对于地球的相对度量，所以你的条件是<code class="fe mr ms mt mu b">diameter &lt; 1</code>。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="3727" class="no ks iq mu b gy np nq l nr ns"># Definition of vectors<br/>name &lt;- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")<br/>type &lt;- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", <br/>          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")<br/>diameter &lt;- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)<br/>rotation &lt;- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)<br/>rings &lt;- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)</span><span id="84c3" class="no ks iq mu b gy of nq l nr ns"># Create a data frame from the vectors<br/>planets_df &lt;- data.frame(name, type, diameter, rotation, rings)</span></pre><h2 id="d073" class="no ks iq bd kt nu nv dn kx nw nx dp lb ls ny nz ld lw oa ob lf ma oc od lh oe bi translated">解决办法</h2><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="4eab" class="no ks iq mu b gy np nq l nr ns"># Select planets with diameter &lt; 1<br/>subset(planets_df, subset = diameter &lt; 1)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/b270e0cd4ab43ef8419fbb6c1c1e2ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKclpHXK7rEjI-hec2CiNQ.png"/></div></div><p class="ne nf gj gh gi ng nh bd b be z dk translated">根据我们的输出，我们可以分析并确定三颗行星的直径小于地球。它们是水星、金星和火星。</p></figure><h1 id="3fcc" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">整理</h1><p id="d88f" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在数据分析中，根据数据集中的某个变量对数据进行排序通常很有帮助。这可以借助 r 中的函数<code class="fe mr ms mt mu b"><a class="ae mf" href="http://www.rdocumentation.org/packages/base/functions/order" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir">order()</strong></a><strong class="ll ir"> </strong></code>来完成。</p><p id="9eae" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">该函数返回应用于变量(如向量)时每个元素的排序位置。例如:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="6a86" class="no ks iq mu b gy np nq l nr ns">&gt; a &lt;- c(100, 10, 1000)<br/>&gt; order(a)<br/>[1] 2 1 3</span></pre><p id="6c3f" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">在这个例子中，<code class="fe mr ms mt mu b">a</code>中的第二个元素 10 是最小的元素，所以在<code class="fe mr ms mt mu b">order(a)</code>的输出中 2 排在第一位。100 是<code class="fe mr ms mt mu b">a</code>中的第一个元素，是第二小的元素，所以 1 在<code class="fe mr ms mt mu b">order(a)</code>的输出中排在第二位。然后，<code class="fe mr ms mt mu b">a</code>中的第三个也是最后一个元素 1000 是最大的元素，所以 3 在<code class="fe mr ms mt mu b">order(a)</code>的输出中排在最后。</p><p id="62d5" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">有了<code class="fe mr ms mt mu b">order(a)</code>的输出，我们可以重组<code class="fe mr ms mt mu b">a</code>，这样我们就可以得到一个排序后的输出:</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="24d6" class="no ks iq mu b gy np nq l nr ns">&gt; a[order(a)]<br/>[1]   10  100 1000</span></pre><h1 id="065c" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">对数据框进行排序</h1><p id="7e3c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们可以用<code class="fe mr ms mt mu b">order()</code>函数做的一件有用的事情是排序我们的数据帧。假设我们想通过<code class="fe mr ms mt mu b">diameter</code>对数据帧进行排序。也就是说，重新排列数据框，使其从最小的行星开始，以最大的行星结束。</p><p id="e51f" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">我们首先必须使用<code class="fe mr ms mt mu b">planets_df</code>的<code class="fe mr ms mt mu b">diameter</code>栏上的<code class="fe mr ms mt mu b">order()</code>功能。让我们将结果存储为<code class="fe mr ms mt mu b">positions</code>。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="e40f" class="no ks iq mu b gy np nq l nr ns"># Use order() to create positions.<br/>positions &lt;- order(planets_df$diameter)</span></pre><p id="ca23" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">接下来，我们将使用方括号内的<code class="fe mr ms mt mu b">positions</code>向量作为行索引来重新排列<code class="fe mr ms mt mu b">planets_df</code>。我们将保留所有列。</p><pre class="kg kh ki kj gt nk mu nl nm aw nn bi"><span id="0d8d" class="no ks iq mu b gy np nq l nr ns"># Use positions to sort planets_df<br/>planets_df[positions, ]</span></pre><p id="a14f" class="pw-post-body-paragraph lj lk iq ll b lm mi jr lo lp mj ju lr ls na lu lv lw nb ly lz ma nc mc md me ij bi translated">瞧，我们现在有了一个基于直径的分类数据框。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a0f35654cdaded9231304ad3bef0995d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uxgBlQYDnPLe-uYNqSsntA.png"/></div></div></figure></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><h1 id="6e17" class="kr ks iq bd kt ku or kw kx ky os la lb jw ot jx ld jz ou ka lf kc ov kd lh li bi translated">笔记</h1><p id="ea61" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">所有图片，除非特别注明，均归作者所有。横幅图像是使用<a class="ae mf" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank"> Canva </a>创建的。</p></div></div>    
</body>
</html>