<html>
<head>
<title>Automate Sentiment Analysis Process for Reddit Post: TextBlob and VADER</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Reddit Post: TextBlob和VADER的自动化情感分析流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automate-sentiment-analysis-process-for-reddit-post-textblob-and-vader-8a79c269522f?source=collection_archive---------24-----------------------#2020-06-02">https://towardsdatascience.com/automate-sentiment-analysis-process-for-reddit-post-textblob-and-vader-8a79c269522f?source=collection_archive---------24-----------------------#2020-06-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2986" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">使用VADAR和TextBlob python库找到Reddit子群的情绪</strong></h2></div><p id="529e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">被困在付费墙后面？<a class="ae le" rel="noopener" target="_blank" href="/automate-sentiment-analysis-process-for-reddit-post-textblob-and-vader-8a79c269522f?source=friends_link&amp;sk=1142e729859b4bfaf5e0fe377fa60981">阅读这篇文章，我的朋友链接在这里。</a></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/f940b94f5da0eb95df74c5ae463ef542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1xNxgeqUMWpHlNn5ncaJ2Q.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">来源:图片由<a class="ae le" href="https://pixabay.com/users/27707-27707/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1007072" rel="noopener ugc nofollow" target="_blank">凯文·菲利普斯</a>来自<a class="ae le" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1007072" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="0ad6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你有没有想过如何从一个用户的评论中找到一个subreddit的情绪？或者想在加入之前检查不同主题的subreddit极性？如果你正在寻找这些问题的答案，那么这篇文章将会给你很大的帮助。在这篇文章中，我们将发现subreddit的整体情绪。</p><p id="e075" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里给不知道什么是subreddit和reddit的人解释一下。</p><h1 id="e701" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Reddit</h1><p id="80ff" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">Reddit是一个社交分享网站，它分为更小的社区，称为<strong class="kk iu">子社区</strong>。subreddit只是一个专门讨论特定主题的板块。</p><p id="005f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用户，Reddit的组成部分，加入这些社区并提交他们的想法和经验。然后，其他用户通过对这些想法的评论来表达他们的观点。</p><p id="12e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开始了解情绪分析所需的库:</p><h2 id="1ed9" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">1.PRAW</h2><p id="dc2b" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">Reddit提供了一个API来从他们的站点获取信息。我们将使用Python库PRAW与Reddit API进行交互。</p><h2 id="6181" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">2.VADER</h2><p id="cb79" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">VADER (Valence Aware字典和情感推理器)是一个基于词典和规则的情感分析工具，专门针对社交媒体中表达的情感。我们将使用VADER对Reddit评论和话题进行情感分析。</p><h2 id="5761" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">3.文本Blob</h2><p id="953d" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">TextBlob是一个用于处理文本数据的Python库。它为自然语言处理(NLP)任务提供了一个API，如词性标注、名词短语提取、情感分析、分类、翻译等。</p><p id="20dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意:代码的最终版本可以在本文末尾找到。</strong></p><h2 id="86b4" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">让我们导入这些库</h2><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="d0b6" class="ms lw it nf b gy nj nk l nl nm">import praw<br/>from textblob import TextBlob<br/># VADER can be accessed by the NLTK library.<br/>import nltk<br/># Download the VADAR tool and access it through the NLTK library.<br/>nltk.download(‘vader_lexicon’)<br/>from nltk.sentiment.vader import SentimentIntensityAnalyzer</span></pre><p id="14f5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们开始收集情绪分析数据之前，我们需要创建一个Reddit应用程序。访问<a class="ae le" href="https://www.reddit.com/prefs/apps" rel="noopener ugc nofollow" target="_blank">此</a>页面创建一个应用程序，并获取所需的身份验证和详细信息。</p><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="df98" class="ms lw it nf b gy nj nk l nl nm">reddit_api = praw.Reddit(client_id=’my_client_id’,<br/>                         client_secret=’my_client_secret’,<br/>                         user_agent=’my_user_agent’)</span></pre><p id="67e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Reddit_api对象与Reddit API建立连接。我们将使用它的函数获取帖子和评论等子编辑信息。</p><p id="b6e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用showerthoughts subreddit来获得前5名每周帖子的数据。如果您想检查其他子编辑的极性，只需用您的子编辑名称替换showerthoughts即可。</p><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="9b39" class="ms lw it nf b gy nj nk l nl nm">top_posts = Reddit.subreddit(‘showerthoughts’).top(‘week’, limit=5)</span></pre><p id="9dfc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以用小时、月和年来代替周。该限制将帖子限制为5个。有关Reddit API配置的更多信息，请访问本页。</p><p id="aabb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一步是获取每个子编辑中的数据:文章标题、评论和回复。subreddit上的帖子分为两部分，标题和评论部分。有些标题有一小段描述，代表文章作者的观点。大多数投票的评论及其回复显示在评论区的顶部。</p><h2 id="65bf" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">标题部分的实现</h2><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="9454" class="ms lw it nf b gy nj nk l nl nm">for submission in top_posts:<br/>     print("Title of the post :", submission.title)</span></pre><h2 id="83c2" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">注释部分的实现</h2><p id="00df" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我已经使用递归复制了subreddit帖子的整个评论部分。</p><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="2281" class="ms lw it nf b gy nj nk l nl nm">def replies_of(top_level_comment,<br/>               count_comment,<br/>               sub_entries_textblob,<br/>               sub_entries_nltk):<br/>    if len(top_level_comment.replies) == 0:<br/>        count_comment = 0<br/>        return<br/>    else:<br/>        for num, comment in enumerate(top_level_comment.replies):<br/>            try:<br/>                count_comment += 1<br/>                   print(‘-’ * count_comment, comment.body)<br/>                   text_blob_sentiment(comment.body,<br/>                                       sub_entries_textblob)<br/>                   nltk_sentiment(comment.body, sub_entries_nltk)<br/>            except:<br/>               continue<br/>            replies_of(comment, <br/>                       count_comment,<br/>                       sub_entries_textblob,<br/>                       sub_entries_nltk)</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nn"><img src="../Images/38c1a34425c80658d5f6484784407422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDszM_x3lnDr_PXE0ASsRg.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">Reddit帖子的标题和评论部分</p></figure><p id="71af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">情感分析所需的子编辑数据现已可用。我们将在TextBlob工具中传递数据，并获取情绪。</p><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="c8c7" class="ms lw it nf b gy nj nk l nl nm">def text_blob_sentiment(review, sub_entries_textblob):<br/>    analysis = TextBlob(review)<br/>    if analysis.sentiment.polarity &gt;= 0.0001:<br/>        if analysis.sentiment.polarity &gt; 0:<br/>            sub_entries_textblob[‘positive’]=<br/>                              sub_entries_textblob[‘positive’]+1<br/>            return ‘Positive’<br/>    elif analysis.sentiment.polarity &lt;= -0.0001:<br/>        if analysis.sentiment.polarity &lt;= 0:<br/>            sub_entries_textblob[‘negative’]=<br/>                             sub_entries_textblob[‘negative’] + 1<br/>            return ‘Negative’<br/>    else:<br/>        sub_entries_textblob[‘neutral’]=<br/>                             sub_entries_textblob[‘neutral’] + 1<br/>        return ‘Neutral’</span></pre><p id="80cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">TextBlob的所有函数都可以从分析变量中访问。我们将使用analysis .情操来了解句子的极性得分。根据极性得分，我们将句子分为阳性、阴性和中性。所有句子的情感已经被统计并存储在变量sub_entries_textblob中。</p><p id="1076" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对VADER工具遵循相同的过程，传递数据，并将情感存储在sub_entries_nltk中。</p><pre class="lg lh li lj gt ne nf ng nh aw ni bi"><span id="bb6f" class="ms lw it nf b gy nj nk l nl nm">sia = SentimentIntensityAnalyzer()<br/>def nltk_sentiment(review, sub_entries_nltk):<br/>    vs = sia.polarity_scores(review)<br/>    if not vs[‘neg’] &gt; 0.05:<br/>        if vs[‘pos’] — vs[‘neg’] &gt; 0:<br/>            sub_entries_nltk[‘positive’]=<br/>                                 sub_entries_nltk[‘positive’] + 1<br/>            return ‘Positive’<br/>        else:<br/>            sub_entries_nltk[‘neutral’]=<br/>                                 sub_entries_nltk[‘neutral’] + 1<br/>            return ‘Neutral’<br/>    elif not vs[‘pos’] &gt; 0.05:<br/>        if vs[‘pos’] — vs[‘neg’] &lt;= 0:<br/>            sub_entries_nltk[‘negative’]=<br/>                                sub_entries_nltk[‘negative’] + 1<br/>            return ‘Negative’<br/>        else:<br/>            sub_entries_nltk[‘neutral’]=<br/>                                 sub_entries_nltk[‘neutral’] + 1<br/>            return ‘Neutral’<br/>    else:<br/>        sub_entries_nltk[‘neutral’]=sub_entries_nltk[‘neutral’] + 1<br/>        return ‘Neutral’</span></pre><p id="0e61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用sia对象访问VADER函数。sia.polarity将一个句子作为输入，并将情感得分作为输出。从nltk _情操()句子分类成积极，消极和中性的情绪。</p><p id="53f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您打印sub_entries_nltk和sub_entries_textblob变量，我们将获得正面、负面和中性情绪的总数。从计数中，我们将得出子涡旋的总体极性。</p><h1 id="ad73" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="afd9" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">在本文中，人们可以学习如何使用PRAW python库从Reddit获取信息，并发现subreddit的观点。此外，了解文本块和VADER工具是如何轻松实现情感分析的。这篇文章帮助你复制subreddit帖子的整个评论部分，并附上每个评论及其回复。</p><p id="f239" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">作者其他文章</strong></p><ol class=""><li id="9cc2" class="no np it kk b kl km ko kp kr nq kv nr kz ns ld nt nu nv nw bi translated"><a class="ae le" href="https://www.analyticsvidhya.com/blog/2020/10/a-quick-guide-to-descriptive-statistics-the-first-step-in-exploring-your-data/" rel="noopener ugc nofollow" target="_blank">EDA的第一步:描述性统计分析</a></li><li id="5998" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/analysis-and-visualization-of-unstructured-text-data-2de07d9adc84">路透社文章的文本数据分析和可视化</a></li><li id="c672" class="no np it kk b kl nx ko ny kr nz kv oa kz ob ld nt nu nv nw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/discover-the-sentiment-of-reddit-subgroup-using-roberta-model-10ab9a8271b8">使用罗伯塔模型发现Reddit子群的情绪</a></li></ol><h2 id="08f3" class="ms lw it bd lx mt mu dn mb mv mw dp mf kr mx my mh kv mz na mj kz nb nc ml nd bi translated">这是完整的代码</h2><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="oc od l"/></div></figure></div></div>    
</body>
</html>