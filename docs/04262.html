<html>
<head>
<title>How to embed Bootstrap CSS &amp; JS in your Python Dash app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的Python Dash应用中嵌入引导CSS &amp; JS</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-embed-bootstrap-css-js-in-your-python-dash-app-8d95fc9e599e?source=collection_archive---------2-----------------------#2020-04-18">https://towardsdatascience.com/how-to-embed-bootstrap-css-js-in-your-python-dash-app-8d95fc9e599e?source=collection_archive---------2-----------------------#2020-04-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a86eff1b454a72736b333ef3f9550174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ezak7P3CrUPLv6q0dzNDYA.png"/></div></div></figure><div class=""/><div class=""><h2 id="effd" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">使用Dash Bootstrap组件构建新冠肺炎感染预测应用程序</h2></div></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h1 id="a257" class="la lb je bd lc ld le lf lg lh li lj lk kk ll kl lm kn ln ko lo kq lp kr lq lr bi translated">摘要</h1><p id="ad78" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">在本文中，我将展示如何使用<strong class="lu jf"> Python </strong>、<strong class="lu jf"> Dash </strong>和<strong class="lu jf"> Bootstrap </strong>构建一个预测新冠肺炎病毒在任何受感染国家传播的web应用程序，如下所示:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mo"><img src="../Images/cdaf2ef35358b119b46a9148f4262a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QfUoYQoeSWfDf2nATasJ9g.gif"/></div></div></figure><p id="9900" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">让我从这个开始:编写Dash应用程序很麻烦…我没有任何恶意，我喜欢Dash，我认为它是Python web开发的未来。<a class="ae my" href="https://dash.plotly.com/introduction" rel="noopener ugc nofollow" target="_blank"> <strong class="lu jf"> Dash </strong> </a>是一个用于构建web应用的Python(和R)框架。它建立在Flask、Plotly.js和React js之上。它是开源的，它的应用程序运行在网络浏览器上。如果你更擅长Python而不是Javascript，Dash会非常方便，因为它允许你使用纯Python来构建仪表盘。</p><p id="fddc" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">不知道大家有没有见过dash的应用代码。这是一个烂摊子:代码出来真的很长，因为你需要编写每个html Div的内容和属性，就像一个html页面之前，引导发明。<a class="ae my" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"><strong class="lu jf">Bootstrap</strong></a><strong class="lu jf"/>是一个开源的工具包，用于开发HTML、CSS和JS。它是web开发中使用最多的库，这要归功于它广泛的预构建组件和基于jQuery构建的强大插件。</p><p id="d0b6" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我喜欢Boostrap，不仅因为它的输出总是非常好看，而且特别是因为它为您节省了一行又一行的HTML、CSS和JS代码。如果我告诉你它也可以用于Dash应用呢？你喜欢这种声音，不是吗？</p><p id="0e00" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">通过本教程，我将一步一步地解释如何将Bootstrap轻松集成到Dash中，以及如何使用我的新冠肺炎感染预测应用程序<strong class="lu jf"> </strong>为例构建和部署web应用程序、<strong class="lu jf"> </strong>(链接如下，加载可能需要30秒)。</p><div class="is it gp gr iu mz"><a href="https://app-virus-forecaster.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">病毒预报员</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">编辑描述</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">app-virus-forecaster.herokuapp.com</p></div></div></div></a></div><p id="8962" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我将展示一些有用的Python代码，这些代码可以很容易地用于其他类似的情况(只需复制、粘贴、运行)，并通过注释遍历每一行代码，这样您就可以很容易地复制这个示例(下面是完整代码的链接)。</p><div class="is it gp gr iu mz"><a href="https://github.com/mdipietro09/App_VirusForecaster" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">GitHub-mdipietro 09/App _病毒预报员:新冠肺炎预报员网络应用</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">新冠肺炎预报员网络应用。通过在…上创建帐户，为mdipietro 09/App _ virus forecaster开发做出贡献</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">github.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn ja mz"/></div></div></a></div><p id="1885" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我将使用这几天隔离中最流行的数据集:<strong class="lu jf"> CSSE新冠肺炎数据集</strong>。它显示了自疫情开始以来，每个国家每天报告的确诊传染病病例数的时间序列。这个数据集可以在约翰霍普金斯大学的GitHub上免费获得(链接如下)。</p><div class="is it gp gr iu mz"><a href="https://github.com/CSSEGISandData/COVID-19" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">CSSEGISandData/新冠肺炎</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">这是由约翰·霍普金斯大学运营的2019年新型冠状病毒视觉仪表板的数据存储库…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">github.com</p></div></div><div class="ni l"><div class="no l nk nl nm ni nn ja mz"/></div></div></a></div><p id="c711" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">特别是，我将经历:</p><ul class=""><li id="b585" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">环境的设置</li><li id="ab97" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">后端:编写模型来获取、处理和绘制数据</li><li id="33b5" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">前端:用Dash和Bootstrap构建应用程序</li><li id="18ac" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">部署应用程序</li></ul></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><h2 id="7353" class="od lb je bd lc oe of dn lg og oh dp lk mb oi oj lm mf ok ol lo mj om on lq oo bi translated">设置</h2><p id="8f87" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">首先，我将通过终端安装以下库:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="2a91" class="od lb je oq b gy ou ov l ow ox">pip install <strong class="oq jf">dash</strong></span><span id="2a61" class="od lb je oq b gy oy ov l ow ox">pip install <strong class="oq jf">dash-bootstrap-components</strong></span><span id="fce3" class="od lb je oq b gy oy ov l ow ox">pip install <strong class="oq jf">pandas</strong></span></pre><p id="b9c8" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">安装dash的命令还会下载有用的包，比如<strong class="lu jf"> dash-core-components </strong>、<strong class="lu jf"> dash-html-components </strong>和<strong class="lu jf"> plotly </strong>。类似地，pandas安装包括<strong class="lu jf"> numpy </strong>和<strong class="lu jf"> scipy </strong>，我稍后也会用到它们。我假设你已经知道了这些，因此我将花点时间来介绍一下<a class="ae my" href="https://dash-bootstrap-components.opensource.faculty.ai/" rel="noopener ugc nofollow" target="_blank"> <strong class="lu jf"> Dash Bootstrap组件</strong> </a>:基本上，这就是将Bootstrap集成到Dash中的诀窍，它使构建具有复杂和响应性布局的风格一致的应用程序变得更加容易。我是这个库的粉丝，因为它保存了大量的dash代码行，稍后您会看到。</p><p id="d5b7" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">安装完所有需要的东西后，我建议在终端上运行以下命令，将需求保存在适当的文本文件中:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="9e2c" class="od lb je oq b gy ou ov l ow ox">pip freeze &gt; <strong class="oq jf">requirements.txt</strong></span></pre><p id="49b5" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">关于<strong class="lu jf">文件夹结构</strong>，我将4个基本元素放在了根级别:</p><ul class=""><li id="5954" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">应用程序文件夹:dash.py文件中所有dash代码所在的位置</li><li id="9d0b" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">python文件夹:我放置模型逻辑的地方</li><li id="c6a3" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">设置文件夹:其中有所有的配置</li><li id="6e69" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">run.py文件:如果在终端上用下面的命令执行，它将运行全部内容</li></ul><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="d6bb" class="od lb je oq b gy ou ov l ow ox">python <strong class="oq jf">run.py</strong></span></pre><p id="4c7c" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">到目前为止，这些都是我让应用程序工作所需的，然而，还有一些其他<strong class="lu jf">有用但不必要的</strong>东西，我添加了静态图像(在应用程序文件夹中)、注释(在设置文件夹中)、Procfile和部署中使用的requirements.txt(在根级别)。</p><p id="9ed0" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">总而言之，应用程序应具有以下结构:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oz"><img src="../Images/34caef3efcb35d41c82d3872b76ad259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFKSnpJF8XfkXfaRc9SbqA.png"/></div></div></figure><p id="adbd" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">现在一切都设置好了，我将浏览每个python文件并展示其中的代码。我们开始吧，好吗？</p><h2 id="8157" class="od lb je bd lc oe of dn lg og oh dp lk mb oi oj lm mf ok ol lo mj om on lq oo bi translated">后端:获取数据、流程、绘图</h2><p id="4b0b" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">首先，我将编写获取新冠肺炎感染数据的类，然后我将建立从过去的观察中学习的模型，并预测时间序列的未来趋势。</p><p id="89d9" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在<strong class="lu jf"> data.py </strong>(在python文件夹内)中，我将使用一个在应用程序启动时执行的方法来定义“data”类，这意味着每次加载应用程序运行的浏览器页面时，后端都会直接从数据源获取新数据(下面代码中的<em class="pa"> get_data </em>函数)。保存国家列表很重要，因为它将在仪表板上显示给用户，供他们选择特定的国家。数据类的任务还包括接收来自前端的输入、用户选择的国家、过滤和处理数据(下面代码中的<em class="pa"> process_data </em>函数)。在过滤特定国家之前，我会创建一个名为“世界”的聚合时间序列，这将是应用程序启动时默认选择的国家。</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/3f6cb16b597d49613a7f890cc1602cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/1*8xvOB3MoOG9WxXT4UxhpVg.gif"/></div></figure><p id="64ea" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">用python的术语来说，data.py文件如下所示:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="ba24" class="od lb je oq b gy ou ov l ow ox">import <strong class="oq jf">pandas </strong>as pd<br/></span><span id="150c" class="od lb je oq b gy oy ov l ow ox">class <strong class="oq jf">Data()</strong>:<br/>    <br/>    def <strong class="oq jf">get_data</strong>(self):<br/>        self.dtf_cases = pd.read_csv("<a class="ae my" href="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv" rel="noopener ugc nofollow" target="_blank"><strong class="oq jf">https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv</strong></a>", sep=",")<br/>        self.countrylist = ["World"] + self.dtf_cases["Country/Region"].unique().tolist()<br/></span><span id="d9aa" class="od lb je oq b gy oy ov l ow ox">    @staticmethod<strong class="oq jf"><br/>    </strong>def <strong class="oq jf">group_by_country</strong>(dtf, country):<br/>        dtf = dtf.drop(['Province/State','Lat','Long'], axis=1).groupby("Country/Region").sum().T<br/>        dtf["World"] = dtf.sum(axis=1)<br/>        dtf = dtf[country]<br/>        dtf.index = pd.to_datetime(dtf.index, infer_datetime_format=True)<br/>        ts = pd.DataFrame(index=dtf.index, data=dtf.values, columns=["data"])<br/>        return ts<br/>    <br/>  <br/>    def <strong class="oq jf">process_data</strong>(self, <strong class="oq jf">country</strong>):<br/>        self.dtf = self.<strong class="oq jf">group_by_country</strong>(self.dtf_cases, <strong class="oq jf">country</strong>)</span></pre><p id="2a4b" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">现在，我将构建模型来拟合数据和预测。本文的目的不是挖掘什么是最适合该数据集的模型，因此我将保持简单:我将使用参数曲线拟合方法，为每个国家的时间序列优化逻辑函数的参数。如果你对这个基本的建模方法感兴趣，你可以在这里 找到它的解释<a class="ae my" href="https://medium.com/analytics-vidhya/how-to-predict-when-the-covid-19-pandemic-will-stop-in-your-country-with-python-d6fbb2425a9f" rel="noopener"> <strong class="lu jf">。</strong></a></p><p id="756d" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在<strong class="lu jf">Model . py</strong>(python文件夹内)中，我将使用一个方法(下面代码中的<em class="pa"> forecast </em>函数)定义“模型”类，该方法将在应用程序启动时以及每次从前端选择特定国家时在世界时间序列上执行。这个班的任务是在选定的国家数据上拟合最佳的逻辑函数(用scipy ),并产生一个pandas数据框架:</p><ul class=""><li id="77c1" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">实际数据和拟合的逻辑模型，将用于绘制总病例</li><li id="a8bc" class="np nq je lu b lv ny ly nz mb oa mf ob mj oc mn nu nv nw nx bi translated">实际数据和拟合逻辑模型(delta t = y t — y t-1)的每日变化，用于绘制活动案例。</li></ul><p id="5d98" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">举例来说，model.py文件包含以下代码:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="1d32" class="od lb je oq b gy ou ov l ow ox">import <strong class="oq jf">pandas </strong>as pd<br/>import <strong class="oq jf">numpy </strong>as np<br/>from <strong class="oq jf">scipy </strong>import optimize<br/></span><span id="3e38" class="od lb je oq b gy oy ov l ow ox">class <strong class="oq jf">Model()</strong>:<br/>    <br/>    def <strong class="oq jf">__init__</strong>(self, dtf):<br/>        self.dtf = dtf<br/>        <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">f</strong>(X, c, k, m):<br/>        y = c / (1 + np.exp(-k*(X-m)))<br/>        return y<br/>    <br/>  <br/>    @staticmethod<br/>    def <strong class="oq jf">fit_parametric</strong>(X, y, f, p0):<br/>        model, cov = optimize.curve_fit(f, X, y, maxfev=10000, p0=p0)<br/>        return model<br/>    <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">forecast_parametric</strong>(model, f, X):<br/>        preds = f(X, model[0], model[1], model[2])<br/>        return preds<br/>    <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">generate_indexdate</strong>(start):<br/>        index = pd.date_range(start=start, periods=30, freq="D")<br/>        index = index[1:]<br/>        return index<br/>    <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">add_diff</strong>(dtf):<br/>        <strong class="oq jf">## create delta columns</strong><br/>        dtf["delta_data"] = dtf["data"] - dtf["data"].shift(1)<br/>        dtf["delta_forecast"] = dtf["forecast"] - dtf["forecast"].shift(1)     <br/>        <strong class="oq jf">## fill Nas</strong><br/>        dtf["delta_data"] = dtf["delta_data"].fillna(method='bfill')<br/>        dtf["delta_forecast"] = dtf["delta_forecast"].fillna(method='bfill')   <br/>        <strong class="oq jf">## interpolate outlier</strong><br/>        idx = dtf[pd.isnull(dtf["data"])]["delta_forecast"].index[0]<br/>        posx = dtf.index.tolist().index(idx)<br/>        posx_a = posx - 1<br/>        posx_b = posx + 1<br/>        dtf["delta_forecast"].iloc[posx] = (dtf["delta_forecast"].iloc[posx_a] + dtf["delta_forecast"].iloc[posx_b])/2<br/>        return dtf</span><span id="c730" class="od lb je oq b gy oy ov l ow ox">    <br/>     def <strong class="oq jf">forecast</strong>(self):<br/>        <strong class="oq jf">## fit</strong><br/>        y = self.dtf["data"].values<br/>        t = np.arange(len(y))<br/>        model = self.fit_parametric(t, y, self.f, p0=[np.max(y),1,1])<br/>        fitted = self.f(t, model[0], model[1], model[2])<br/>        self.dtf["forecast"] = fitted<br/>        <strong class="oq jf">## forecast</strong><br/>        t_ahead = np.arange(len(y)+1, len(y)+30)<br/>        forecast = self.forecast_parametric(model, self.f, t_ahead)<br/>        <strong class="oq jf">## create dtf</strong><br/>        self.today = self.dtf.index[-1]<br/>        idxdates = self.generate_indexdate(start=self.today)<br/>        preds = pd.DataFrame(data=forecast, index=idxdates, columns=["forecast"])<br/>        self.dtf = self.dtf.append(preds) <br/>        <strong class="oq jf">## add diff</strong><br/>        self.dtf = self.add_diff(self.dtf)</span></pre><p id="b8f5" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">是时候制作一些很酷的情节了，这项工作的最佳工具是Plotly，因为Dash是在它的基础上构建的。我将在<strong class="lu jf">result . py</strong>(python文件夹内)中放入一个类，这个类将负责处理这个问题</p><ul class=""><li id="7c72" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">绘制总例数时间序列及其预测的方法(下面代码中的<em class="pa"> plot_total </em>函数):</li></ul><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/25bb5787197257ec39c28970342d1b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Xn7CF4KRx-7MXvFvQR8Yrw.gif"/></div></div></figure><ul class=""><li id="3411" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">绘制活动案例时间序列及其预测的方法(下面代码中的<em class="pa"> plot_active </em>函数):</li></ul><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/2f863edaac55ed89c3d02b6effbc9495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*crw6AdOR1gT4Q6ICxU3YfA.gif"/></div></div></figure><ul class=""><li id="dff8" class="np nq je lu b lv mt ly mu mb nr mf ns mj nt mn nu nv nw nx bi translated">该方法检索一些统计数据显示在前端上(下面代码中的<em class="pa"> get_panel </em>函数):</li></ul><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/929d0f08b09a3735560147d4aa0ff0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*2YKaJeSMPLPpZMGYxXv5eg.png"/></div></figure><p id="9f84" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">以下是result.py中的完整代码:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="d466" class="od lb je oq b gy ou ov l ow ox">import <strong class="oq jf">pandas </strong>as pd<br/>import <strong class="oq jf">plotly</strong>.graph_objects as go</span><span id="0fa2" class="od lb je oq b gy oy ov l ow ox">class <strong class="oq jf">Result()</strong>:<br/>    <br/>    def <strong class="oq jf">__init__</strong>(self, dtf):<br/>        self.dtf = dtf<br/>        <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">calculate_peak</strong>(dtf):<br/>        data_max = dtf["delta_data"].max()<br/>        forecast_max = dtf["delta_forecast"].max()<br/>        if data_max &gt;= forecast_max:<br/>            peak_day = dtf[dtf["delta_data"]==data_max].index[0]<br/>            return peak_day, data_max<br/>        else:<br/>            peak_day = dtf[dtf["delta_forecast"]==forecast_max].index[0]<br/>            return peak_day, forecast_max<br/>    <br/>    <br/>    @staticmethod<br/>    def <strong class="oq jf">calculate_max</strong>(dtf):<br/>        total_cases_until_today = dtf["data"].max()<br/>        total_cases_in_30days = dtf["forecast"].max()<br/>        active_cases_today = dtf["delta_data"].max()<br/>        active_cases_in_30days = dtf["delta_forecast"].max()<br/>        return total_cases_until_today, total_cases_in_30days, active_cases_today, active_cases_in_30days<br/></span><span id="dd36" class="od lb je oq b gy oy ov l ow ox">    def <strong class="oq jf">plot_total</strong>(self, today):<br/>        <strong class="oq jf">## main plots</strong><br/>        fig = go.Figure()<br/>        fig.add_trace(go.Scatter(x=self.dtf.index, y=self.dtf["data"], mode='markers', name='data', line={"color":"black"}))<br/>        fig.add_trace(go.Scatter(x=self.dtf.index, y=self.dtf["forecast"], mode='none', name='forecast', fill='tozeroy'))<br/>        <strong class="oq jf">## add slider</strong><br/>        fig.update_xaxes(rangeslider_visible=True)    <br/>        <strong class="oq jf">## set background color</strong><br/>        fig.update_layout(plot_bgcolor='white', autosize=False, width=1000, height=550)        <br/>        <strong class="oq jf">## add vline</strong><br/>        fig.add_shape({"x0":today, "x1":today, "y0":0, "y1":self.dtf["forecast"].max(), <br/>                       "type":"line", "line":{"width":2,"dash":"dot"} })<br/>        fig.add_trace(go.Scatter(x=[today], y=[self.dtf["forecast"].max()], text=["today"], mode="text", line={"color":"green"}, showlegend=False))<br/>        return fig<br/>        <br/>        <br/>    def <strong class="oq jf">plot_active</strong>(self, today):<br/>        <strong class="oq jf">## main plots</strong><br/>        fig = go.Figure()<br/>        fig.add_trace(go.Bar(x=self.dtf.index, y=self.dtf["delta_data"], name='data', marker_color='black'))<br/>        fig.add_trace(go.Scatter(x=self.dtf.index, y=self.dtf["delta_forecast"], mode='none', name='forecast', fill='tozeroy'))<br/>        <strong class="oq jf">## add slider</strong><br/>        fig.update_xaxes(rangeslider_visible=True)<br/>        <strong class="oq jf">## set background color</strong><br/>        fig.update_layout(plot_bgcolor='white', autosize=False, width=1000, height=550)<br/>       <strong class="oq jf"> ## add vline</strong><br/>        fig.add_shape({"x0":today, "x1":today, "y0":0, "y1":self.dtf["delta_forecast"].max(), <br/>                       "type":"line", "line":{"width":2,"dash":"dot"} })<br/>        fig.add_trace(go.Scatter(x=[today], y=[self.dtf["delta_forecast"].max()], text=["today"], mode="text", line={"color":"green"}, showlegend=False))<br/>        return fig<br/>    <br/>        <br/>    def <strong class="oq jf">get_panel</strong>(self):<br/>        peak_day, num_max = self.calculate_peak(self.dtf)<br/>        total_cases_until_today, total_cases_in_30days, active_cases_today, active_cases_in_30days = self.calculate_max(self.dtf)<br/>        return peak_day, num_max, total_cases_until_today, total_cases_in_30days, active_cases_today, active_cases_in_30days</span></pre><h2 id="2fd9" class="od lb je bd lc oe of dn lg og oh dp lk mb oi oj lm mf ok ol lo mj om on lq oo bi translated">前端:用Dash和Bootstrap构建应用程序</h2><p id="8cfb" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">最后，在这里，我们将使用<strong class="lu jf"> Dash </strong>和<strong class="lu jf"> Dash Bootstrap组件</strong>(以下简称“dbc”)来编写应用程序，我将一步一步地解释它，并提供<em class="pa"> dash.py </em>的完整代码(在应用程序文件夹内)。</p><p id="3391" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">为此，我们需要以下进口:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="e7b3" class="od lb je oq b gy ou ov l ow ox">import <strong class="oq jf">dash</strong><br/>from dash.dependencies import Input, Output, State<br/>import <strong class="oq jf">dash_core_components </strong>as dcc<br/>import <strong class="oq jf">dash_html_components </strong>as html<br/>import <strong class="oq jf">dash_bootstrap_components </strong>as dbc</span></pre><p id="587b" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">首先，我需要定义应用程序实例，在这个过程中，dbc已经提供了一个选择<a class="ae my" href="https://www.bootstrapcdn.com/bootswatch/" rel="noopener ugc nofollow" target="_blank">引导CSS <strong class="lu jf">主题</strong> </a>的强大功能:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="3c29" class="od lb je oq b gy ou ov l ow ox">app = dash.<strong class="oq jf">Dash</strong>(external_stylesheets=[<strong class="oq jf">dbc.themes.LUX</strong>])</span></pre><p id="b053" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">按照视觉顺序，我现在将接近顶部<strong class="lu jf">导航条</strong>。我想要一个很酷的反应式点击，有弹出菜单和下拉菜单，但我不想浪费太多时间写CSS和JS代码。换句话说，我想这样使用Bootstrap:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pe"><img src="../Images/3f3edf6d71de47a88b13aff35ac47e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hIX-7bH51n1z8yf99kXrog.png"/></div></div><p class="pf pg gj gh gi ph pi bd b be z dk translated"><a class="ae my" href="https://getbootstrap.com/docs/4.0/components/navs/" rel="noopener ugc nofollow" target="_blank">https://getbootstrap.com/docs/4.0/components/navs/</a></p></figure><p id="623d" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">与这个html类似，我们可以使用dbc创建导航栏及其项目:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="eaba" class="od lb je oq b gy ou ov l ow ox">dbc.<strong class="oq jf">Nav</strong>([<br/>    dbc.<strong class="oq jf">NavItem</strong>(),<br/>    dbc.<strong class="oq jf">NavItem</strong>(),<br/>    dbc.<strong class="oq jf">DropdownMenu</strong>()<br/>])</span></pre><p id="df4c" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">你得到了秘密装置，对不对？Dash和Dbc复制了html语法的相同结构和逻辑。考虑到这一点，我们可以在每个项目中添加我们想要的任何内容:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pj"><img src="../Images/d337ce74e1b58cbc2b9e017f129e35dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Eth55rGfXR0cGTm1YXDVQQ.gif"/></div></div></figure><p id="ff21" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">继续使用<strong class="lu jf">输入表单</strong>，我想得到一个简单的下拉菜单，将所有可能的国家作为选项，将“世界”作为默认选项。为了做到这一点，有必要在编码下拉菜单对象之前读取数据。还记得之前在data.py (python文件夹)里面写的数据类吗？好吧，现在是时候使用它了:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="2c53" class="od lb je oq b gy ou ov l ow ox">from python.data import Data</span><span id="ac3b" class="od lb je oq b gy oy ov l ow ox">data = Data()<br/>data.get_data()</span></pre><p id="8353" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">既然我们在数据对象中有了国家列表，我们就可以编写下拉菜单，并用一个简单的for循环设置其中的选项:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="5f0e" class="od lb je oq b gy ou ov l ow ox">dcc.<strong class="oq jf">Dropdown</strong>(id="country", options=[{"label":x,"value":x} for x in        <br/>             <strong class="oq jf">data.countrylist</strong>], value="World")])</span></pre><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/3f6cb16b597d49613a7f890cc1602cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/1*8xvOB3MoOG9WxXT4UxhpVg.gif"/></div></figure><p id="3b18" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在Dash中，如果没有特别编程，输出将按行排列，一行在另一行下面。但是，我希望所有的内容都包含在屏幕尺寸中，这样用户就不需要向下滚动了。这就是为什么我要使用<strong class="lu jf">选项卡</strong>，每个选项卡将显示我之前用plotly在result.py(在python文件夹中)中编码的2个<strong class="lu jf">图</strong>中的一个。使用dbc，这非常简单:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="032d" class="od lb je oq b gy ou ov l ow ox">dbc.<strong class="oq jf">Tabs</strong>([<br/>         dbc.<strong class="oq jf">Tab</strong>(<strong class="oq jf">dcc.Graph(id="plot-total")</strong>, label="Total cases"),<br/>         dbc.<strong class="oq jf">Tab</strong>(<strong class="oq jf">dcc.Graph(id="plot-active")</strong>, label="Active cases")<br/>        ])</span></pre><p id="7f07" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我敢打赌，你一定想知道“应用程序如何知道它必须在第一个选项卡中放置第一个情节，在第二个选项卡中放置另一个情节？”。嗯，你没有错，应用程序需要在html和Python代码输出之间建立一个链接。在Dash中，这是通过回调来完成的。一个<strong class="lu jf">回调</strong>只不过是一个装饰器，一个接受另一个函数并扩展后一个函数的行为而不显式修改它的函数。</p><p id="7ac6" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">让我们以总案例的绘图为例:我需要一个函数，它将从前端选择的国家作为输入，并使用我之前编码的模型和结果类(在python文件夹中)将绘图作为输出返回。大概是这样的:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="b888" class="od lb je oq b gy ou ov l ow ox">def <strong class="oq jf">plot_total_cases</strong>(country):<br/>    data.process_data(country) <br/>    model = Model(data.dtf)<br/>    model.forecast()<br/>    model.add_deaths(data.mortality)<br/>    result = Result(model.dtf)<br/>    return result.plot_total(model.today)</span></pre><p id="29b9" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">正如你肯定注意到的，在我定义选项卡的前一段代码中，我在第一个选项卡中放了一个<em class="pa">id</em>(<em class="pa">id = " plot-total "</em>)。因此，我需要在这个函数的顶部添加一个回调装饰器，告诉应用程序后端将绘制的数字是指那个<em class="pa"> id </em>，输入是国家值。</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="16db" class="od lb je oq b gy ou ov l ow ox"><strong class="oq jf">@app.callback</strong>(output=Output("plot-total","figure"), <br/>              inputs=[Input("country","value")]) </span></pre><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pk"><img src="../Images/1d304dc86f992ffc43521f708285c326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VpyydHDydosPeYAxEalpsw.gif"/></div></div></figure><p id="deba" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">最终，右边的<strong class="lu jf">面板</strong>和一些统计数据有一点不同，因为python函数没有像以前那样返回一个图，而是返回一个完整的html div。事实上，这次的破折号代码将在计算这些数字的回调函数中。我说的是这个:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/929d0f08b09a3735560147d4aa0ff0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*2YKaJeSMPLPpZMGYxXv5eg.png"/></div></figure><p id="eaeb" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">这几乎涵盖了前端布局的所有元素，它是一个非常基本的应用程序，只有一个输入和几个输出(图形和数字)。</p><p id="97b6" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">dash.py的完整代码:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="1677" class="od lb je oq b gy ou ov l ow ox"><strong class="oq jf"># Setup</strong><br/>import <strong class="oq jf">dash</strong><br/>from dash.dependencies import Input, Output, State<br/>import <strong class="oq jf">dash_core_components </strong>as dcc<br/>import <strong class="oq jf">dash_html_components </strong>as html<br/>import <strong class="oq jf">dash_bootstrap_components </strong>as dbc</span><span id="0fc8" class="od lb je oq b gy oy ov l ow ox">from settings import config, about<br/>from python.data import Data<br/>from python.model import Model<br/>from python.result import Result</span><span id="af7f" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Read data</strong><br/>data = Data()<br/>data.get_data()</span><span id="99d5" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># App Instance</strong><br/>app = dash.Dash(name=config.name, assets_folder=config.root+"/application/static", external_stylesheets=[dbc.themes.LUX, config.fontawesome])<br/>app.title = config.name</span><span id="1260" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Navbar</strong><br/>navbar = dbc.Nav(className="nav nav-pills", children=[<br/>    <strong class="oq jf">## logo/home</strong><br/>    dbc.NavItem(html.Img(src=app.get_asset_url("logo.PNG"), height="40px")),<br/>    <strong class="oq jf">## about</strong><br/>    dbc.NavItem(html.Div([<br/>        dbc.NavLink("About", href="/", id="about-popover", active=False),<br/>        dbc.Popover(id="about", is_open=False, target="about-popover", children=[<br/>            dbc.PopoverHeader("How it works"), dbc.PopoverBody(about.txt)<br/>        ])<br/>    ])),<br/>    <strong class="oq jf">## links</strong><br/>    dbc.DropdownMenu(label="Links", nav=True, children=[<br/>        dbc.DropdownMenuItem([html.I(className="fa fa-linkedin"), "  Contacts"], href=config.contacts, target="_blank"), <br/>        dbc.DropdownMenuItem([html.I(className="fa fa-github"), "  Code"], href=config.code, target="_blank")<br/>    ])<br/>])</span><span id="9467" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Input</strong><br/>inputs = dbc.FormGroup([<br/>    html.H4("Select Country"),<br/>    dcc.Dropdown(id="country", options=[{"label":x,"value":x} for x in data.countrylist], value="World")<br/>])</span><span id="da52" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># App Layout</strong><br/>app.layout = dbc.Container(fluid=True, children=[<br/>    <strong class="oq jf">## Top</strong><br/>    html.H1(config.name, id="nav-pills"),<br/>    navbar,<br/>    html.Br(),html.Br(),html.Br(),</span><span id="0ae0" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf">    ## Body</strong><br/>    dbc.Row([<br/>        <strong class="oq jf">### input + panel</strong><br/>        dbc.Col(md=3, children=[<br/>            inputs, <br/>            html.Br(),html.Br(),html.Br(),<br/>            html.Div(id="output-panel")<br/>        ]),<br/>        <strong class="oq jf">### plots</strong><br/>        dbc.Col(md=9, children=[<br/>            dbc.Col(html.H4("Forecast 30 days from today"), width={"size":6,"offset":3}), <br/>            dbc.Tabs(className="nav nav-pills", children=[<br/>                dbc.Tab(dcc.Graph(id="plot-total"), label="Total cases"),<br/>                dbc.Tab(dcc.Graph(id="plot-active"), label="Active cases")<br/>            ])<br/>        ])<br/>    ])<br/>])</span><span id="adfb" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Python functions for about navitem-popover</strong><br/>@app.callback(output=Output("about","is_open"), inputs=[Input("about-popover","n_clicks")], state=[State("about","is_open")])<br/>def <strong class="oq jf">about_popover</strong>(n, is_open):<br/>    if n:<br/>        return not is_open<br/>    return is_open</span><span id="a918" class="od lb je oq b gy oy ov l ow ox">@app.callback(output=Output("about-popover","active"), inputs=[Input("about-popover","n_clicks")], state=[State("about-popover","active")])<br/>def <strong class="oq jf">about_active</strong>(n, active):<br/>    if n:<br/>        return not active<br/>    return active</span><span id="a6e5" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Python function to plot total cases</strong><br/>@app.callback(output=Output("plot-total","figure"), inputs=[Input("country","value")]) <br/>def <strong class="oq jf">plot_total_cases</strong>(country):<br/>    data.process_data(country) <br/>    model = Model(data.dtf)<br/>    model.forecast()<br/>    model.add_deaths(data.mortality)<br/>    result = Result(model.dtf)<br/>    return result.plot_total(model.today)</span><span id="4ef8" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Python function to plot active cases</strong><br/>@app.callback(output=Output("plot-active","figure"), inputs=[Input("country","value")])<br/>def <strong class="oq jf">plot_active_cases</strong>(country):<br/>    data.process_data(country) <br/>    model = Model(data.dtf)<br/>    model.forecast()<br/>    model.add_deaths(data.mortality)<br/>    result = Result(model.dtf)<br/>    return result.plot_active(model.today)</span><span id="3d8b" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf"># Python function to render output panel</strong><br/>@app.callback(output=Output("output-panel","children"), inputs=[Input("country","value")])<br/>def <strong class="oq jf">render_output_panel</strong>(country):<br/>    data.process_data(country) <br/>    model = Model(data.dtf)<br/>    model.forecast()<br/>    model.add_deaths(data.mortality)<br/>    result = Result(model.dtf)<br/>    peak_day, num_max, total_cases_until_today, total_cases_in_30days, active_cases_today, active_cases_in_30days = result.get_panel()<br/>    peak_color = "white" if model.today &gt; peak_day else "red"<br/>    panel = html.Div([<br/>        html.H4(country),<br/>        dbc.Card(body=True, className="text-white bg-primary", children=[<br/>            html.H6("Total cases until today:", style={"color":"white"}),<br/>            html.H3("{:,.0f}".format(total_cases_until_today), style={"color":"white"}),<br/>            <br/>            html.H6("Total cases in 30 days:", className="text-danger"),<br/>            html.H3("{:,.0f}".format(total_cases_in_30days), className="text-danger"),<br/>            <br/>            html.H6("Active cases today:", style={"color":"white"}),<br/>            html.H3("{:,.0f}".format(active_cases_today), style={"color":"white"}),<br/>            <br/>            html.H6("Active cases in 30 days:", className="text-danger"),<br/>            html.H3("{:,.0f}".format(active_cases_in_30days), className="text-danger"),<br/>            <br/>            html.H6("Peak day:", style={"color":peak_color}),<br/>            html.H3(peak_day.strftime("%Y-%m-%d"), style={"color":peak_color}),<br/>            html.H6("with {:,.0f} cases".format(num_max), style={"color":peak_color})<br/>        <br/>        ])<br/>    ])<br/>    return panel</span></pre><p id="0462" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我们如何发现我们是否在代码中犯了错误？我们<strong class="lu jf">运行应用程序</strong>。运行整个程序只需要一行代码，我将把它放在run.py文件中(在根级别):</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="192d" class="od lb je oq b gy ou ov l ow ox">from application.dash import <strong class="oq jf">app</strong><br/>from settings import config</span><span id="ecfd" class="od lb je oq b gy oy ov l ow ox"><strong class="oq jf">app</strong>.<strong class="oq jf">run_server</strong>(debug=config.debug, host=config.host, port=config.port)</span></pre><p id="2691" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">在终端中运行以下命令:</p><pre class="mp mq mr ms gt op oq or os aw ot bi"><span id="7358" class="od lb je oq b gy ou ov l ow ox">python run.py</span></pre><p id="cc4d" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">你应该看看这个:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pl"><img src="../Images/c5e9b42cd2932e40fe1fe80b131f7adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DfNGpBWJQ8-Caf_PL8IfNA.png"/></div></div></figure><p id="1dae" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">干得好，应用程序已经启动并运行了！</p><h2 id="5b11" class="od lb je bd lc oe of dn lg og oh dp lk mb oi oj lm mf ok ol lo mj om on lq oo bi translated">部署</h2><p id="4ba6" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">您想让任何人都可以使用您的应用程序吗？那么你必须把它部署在某个地方。我通常使用<a class="ae my" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lu jf"> Heroku </strong> </a> <strong class="lu jf">，</strong>云平台即服务，只需一个免费帐户即可部署PoC应用。</p><p id="fb4f" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">您可以链接一个Github repo并部署其中一个分支。</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pm"><img src="../Images/866536e89a486b6cc2da59306e776f09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-o2B4LeUa3nB9eZrulPg8w.png"/></div></div></figure><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pn"><img src="../Images/cae9bc50177e853b6dd24d356b86816f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBTNRqIe8uTZVMeg82zeUQ.png"/></div></div></figure><p id="b695" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">为了让这个工作，应用程序需要一个requirements.txt和一个Procfile。在Setup部分，我已经输入了创建包含所需包的文本文件的命令。关于Procfile，它只是运行我在上一节中放入的应用程序的命令行。Heroku将运行它，你去那里:</p><figure class="mp mq mr ms gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi po"><img src="../Images/12cb5e3d9e844ba1242f43a23bead034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P1KPwTJgbTYTnfTWxYtGjg.png"/></div></div></figure><h2 id="ccfb" class="od lb je bd lc oe of dn lg og oh dp lk mb oi oj lm mf ok ol lo mj om on lq oo bi translated">结论</h2><p id="15da" class="pw-post-body-paragraph ls lt je lu b lv lw kf lx ly lz ki ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">这篇文章是一个教程，展示了用<strong class="lu jf"> Dash </strong>和<strong class="lu jf"> Dash Bootstrap组件</strong>嵌入Bootstrap的所有CSS和JS来构建一个好看的web应用程序是多么容易。我以我的新冠肺炎感染预测应用程序为例，经历了从后端到前端甚至部署的每一步。现在你知道它是如何工作的，你可以开发自己的预测器，例如改变数据源(即雅虎财经)和机器学习模型(即lstm神经网络)你可以建立一个股票价格预测器。</p><p id="baf3" class="pw-post-body-paragraph ls lt je lu b lv mt kf lx ly mu ki ma mb mv md me mf mw mh mi mj mx ml mm mn im bi translated">我希望你喜欢它！如有问题和反馈，或者只是分享您感兴趣的项目，请随时联系我。</p><blockquote class="pp"><p id="3199" class="pq pr je bd ps pt pu pv pw px py mn dk translated">👉<a class="ae my" href="https://linktr.ee/maurodp" rel="noopener ugc nofollow" target="_blank">我们来连线</a>👈</p></blockquote></div><div class="ab cl kt ku hx kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="im in io ip iq"><blockquote class="pz qa qb"><p id="05d9" class="ls lt pa lu b lv mt kf lx ly mu ki ma qc mv md me qd mw mh mi qe mx ml mm mn im bi translated">本文是使用Python进行Web开发系列文章<strong class="lu jf">的一部分，参见:</strong></p></blockquote><div class="is it gp gr iu mz"><a rel="noopener follow" target="_blank" href="/web-development-with-python-dash-complete-tutorial-6716186e09b3"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">用Python进行Web开发:Dash(完整教程)</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">用Plotly绘图，嵌入引导CSS，上传和下载文件，选择后改变输入，导航条，微调器，和…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="qf l nk nl nm ni nn ja mz"/></div></div></a></div><div class="is it gp gr iu mz"><a rel="noopener follow" target="_blank" href="/surpass-excel-vlookup-with-python-and-nlp-ab20d56c4a1a"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">字符串匹配:用Python和NLP超越Excel VLOOKUP</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">为所有Excel爱好者(和讨厌者)构建一个字符串匹配应用程序</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">towardsdatascience.com</p></div></div><div class="ni l"><div class="qg l nk nl nm ni nn ja mz"/></div></div></a></div><div class="is it gp gr iu mz"><a href="https://medium.com/towards-artificial-intelligence/build-deploy-a-python-bot-with-short-term-and-long-term-memory-a3f1cd6254b8" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd jf gy z fp ne fr fs nf fu fw jd bi translated">构建和部署一个具有短期和长期记忆的电报机器人</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">从头开始创建一个聊天机器人，用Python记住并提醒事件</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">medium.com</p></div></div><div class="ni l"><div class="qh l nk nl nm ni nn ja mz"/></div></div></a></div></div></div>    
</body>
</html>