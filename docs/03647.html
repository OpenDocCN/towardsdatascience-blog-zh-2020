<html>
<head>
<title>Visualizing COVID-19 Data Beautifully in Python (in 5 Minutes or Less!!)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python漂亮地可视化新冠肺炎数据(不到5分钟！！)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-covid-19-data-beautifully-in-python-in-5-minutes-or-less-affc361b2c6a?source=collection_archive---------8-----------------------#2020-04-06">https://towardsdatascience.com/visualizing-covid-19-data-beautifully-in-python-in-5-minutes-or-less-affc361b2c6a?source=collection_archive---------8-----------------------#2020-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6dab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让Matplotlib不那么痛苦！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1dd6548e8fb972bfb2add3b35558e7a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAOUhxclkns7AVl-scQl2g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">让我们用Python创建一些漂亮的数据可视化！资料来源:Nik Piepenbreier。</p></figure><p id="2384" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Matplotlib可能是Python事实上的数据可视化库，但它并不总是最漂亮的。在这篇文章中，我们将探索如何把一个单调的默认Matplotlib图变成一个漂亮的数据可视化。我们将研究新冠肺炎的数据，看看病毒是如何在不同国家传播的。</p><h1 id="6456" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">让我们载入数据</h1><p id="7cda" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我们将使用来自<a class="ae mr" href="https://github.com/datasets/covid-19/blob/master/data/countries-aggregated.csv" rel="noopener ugc nofollow" target="_blank">这个美妙的Github库</a>的数据，它每天自动更新数据。我们将根据URL把我们的数据加载到熊猫的数据框架中，这样它将每天为我们自动更新。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">加载我们的数据并创建汇总变量。资料来源:Nik Piepenbreier</p></figure><ul class=""><li id="13ea" class="mu mv it la b lb lc le lf lh mw ll mx lp my lt mz na nb nc bi translated">在上述要点的第1节 中，我们正在加载我们的库。在本教程中，我们将使用Pandas和Matplotlib。</li><li id="afbc" class="mu mv it la b lb ne le nf lh ng ll nh lp ni lt mz na nb nc bi translated">在<strong class="la iu"> <em class="nd">第2节</em> </strong>中，我们将数据读入数据帧<code class="fe nj nk nl nm b">df</code>，然后只选择列表<code class="fe nj nk nl nm b">countries</code>中的国家。选择数据使结果可视化更具可读性。</li><li id="61e6" class="mu mv it la b lb ne le nf lh ng ll nh lp ni lt mz na nb nc bi translated">在第3节 的<strong class="la iu"> <em class="nd">中，我们创建了一个汇总列，汇总了所有确诊病例、已康复病例和任何因新冠肺炎而死亡的个体的病例总数。</em></strong></li></ul><h1 id="a962" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">为数据可视化准备数据框架</h1><p id="36a1" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">现在我们已经将数据存储在一个数据帧中，让我们准备另外两个数据帧，将数据保存在交叉表中，这将使我们能够更容易地可视化数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">为可视化准备数据。资料来源:Nik Piepenbreier</p></figure><p id="6424" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们更详细地探讨一下我们在这里做了什么:</p><p id="615d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="nd">第4节</em> </strong>中，我们旋转我们的数据框架<code class="fe nj nk nl nm b">df</code>，创建国家的列，以案件数量作为数据字段。这个新的数据帧被称为<code class="fe nj nk nl nm b">covid</code>。然后，我们将数据帧的索引设置为日期，并将国家名称分配给列标题。</p><p id="397c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="nd">第5节</em> </strong>中，我们复制了我们的数据帧<code class="fe nj nk nl nm b">covid</code>，称之为<code class="fe nj nk nl nm b">percapita</code>。我们使用存储所有国家人口的字典，将每个值除以人口，再乘以100，000，得出每100，000人中的病例数。</p><p id="5052" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想学习如何解透视数据，看看<a class="ae mr" href="https://datagy.io/using-the-pandas-melt-function-in-python-to-unpivot-data/" rel="noopener ugc nofollow" target="_blank">这篇关于熊猫融化功能的教程</a>。</p><p id="e8c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来看看我们的数据从开始到现在是如何变化的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/58414eb05a85d0a17b190138a301d61e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ENC4agP_XYySGy9Fcyj55Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们如何重塑数据来讲述一个故事。资料来源:Nik Piepenbreier</p></figure><h1 id="7ea4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">创建我们的第一个可视化—案例随时间推移</h1><p id="e524" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">让我们首先创建第一个可视化视图，展示不同国家/地区一段时间内的病例总数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建我们的第一个可视化。资料来源:Nik Piepenbreier</p></figure><p id="9eab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们更详细地探究一下我们对她做了什么:</p><p id="e165" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="nd">第6节</em> </strong>中，我们创建了一个包含不同国家十六进制值的字典。将它存储在字典中可以让我们稍后在for循环中轻松调用它。我们还分配了FiveThirtyEight样式来添加一些通用格式，我们将在此基础上进行大量构建。</p><p id="8b5c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="nd">第7节</em> </strong>中，我们使用Pandas的plot函数创建了我们的第一个可视化。我们使用colors参数将颜色分配给不同的列。我们还使用<code class="fe nj nk nl nm b">set_major_formatter</code>方法来格式化带有千位分隔符的值。</p><p id="e594" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，在<strong class="la iu"> <em class="nd">第8节</em> </strong>中，我们创建一个for循环，为各个国家生成标签文本。这个for循环以列表的形式从字典中的关键字获取每个国家的名称，并遍历这个列表。它将包含国家名称的文本放置在最后一个x值的右侧(<code class="fe nj nk nl nm b">covid.index[-1]</code> →数据帧中的最后一个日期)，在当天的y值处(它将始终等于该列的最大值)。</p><p id="59fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，在<strong class="la iu"> <em class="nd">第9节</em> </strong>中，我们添加了一个关于图表的标题、副标题和源信息。我们再次使用变量来定位数据，因此当图形更新时，这些位置会动态更新！</p><p id="93c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我们第一张图表的最终结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/310553cc9d845e3bb1cd691fec14857b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qpgNHoP4Kt-JWP9R4Cjmw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的第一个可视化结果——各个国家的案例。资料来源:Nik Piepenbreier</p></figure><h1 id="49f0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">创建我们的第二个可视化——每100，000人中的病例</h1><p id="ff39" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">为了创建我们的第二个可视化，我们将使用下面的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建我们的第二个可视化——每10万人中的病例。资料来源:Nik Piepenbreier</p></figure><p id="c369" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这一部分主要遵循我们为第一个图表所做的。这表明，一旦使用Python设置了图表，更新不同数据集的可视化效果是多么简单！</p><p id="d5fa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我们的可视化结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/c2dcb6ab294125c3987ce4b44d5038c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfuNeQt23rVbQbTixzoWHw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的第二个设想——每个国家每10万人中的病例。资料来源:Nik Piepenbreier</p></figure><h1 id="55e3" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论:用Matplotlib实现漂亮的COVID可视化</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/42da7c844f27c97c11b2829d2254fc59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lV9DH3N41xLUjOSJFuPJQA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">感谢阅读！资料来源:Nik Piepenbreier</p></figure><p id="d36f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我们学习了如何使用Github上的新冠肺炎数据集生成漂亮的数据可视化。我们可以利用Python的强大功能，根据今天的数据自动更新我们的图表。</p><p id="7bcd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">非常感谢你花时间阅读这篇文章！</p></div></div>    
</body>
</html>