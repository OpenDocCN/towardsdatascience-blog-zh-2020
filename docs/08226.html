<html>
<head>
<title>Have Your ML Models Built Automatically Using GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub动作自动构建您的ML模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/have-your-ml-models-built-automatically-using-github-actions-5caa03c6f571?source=collection_archive---------38-----------------------#2020-06-16">https://towardsdatascience.com/have-your-ml-models-built-automatically-using-github-actions-5caa03c6f571?source=collection_archive---------38-----------------------#2020-06-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="82c5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在Marketplace上发布自定义GitHub动作，用于构建机器学习应用。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fd96887acd1cef4a234b325e677e88e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VTHqP4SmSWNsWp-fLO8t9g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">大规模应用的手动任务(使用Canva设计)</p></figure><blockquote class="kv kw kx"><p id="98eb" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">GitHub Actions说:“给我数据集，我会为你建立模型!”！</p></blockquote><p id="0aa9" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">你有没有想过有一个自动化的流水线，根据我们的需求训练我们的模型，并为我们提供结果？想象一下那会让你有什么感觉！现在，您可以选择创建一个管道，接受来自用户的数据集，并使用GitHub操作直接提供模型文件(pickle文件)。</p><p id="3dd2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">GitHub Actions帮助我们自动化从代码提交到部署的任何软件开发工作流程。在这里，我们可以编写称为<em class="la">动作</em>的单独任务，为我们完成特定的工作。在本文中，我将向您展示如何创建一个<em class="la">动作</em>来在给定数据集时自动构建分类器模型。此外，该操作可以发布在GitHub Marketplace上，供其他人使用(使用我们的自定义操作)。</p><p id="641f" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果你是工作流和动作的新手，你可以访问我之前关于<a class="ae ly" rel="noopener" target="_blank" href="/github-actions-makes-one-click-to-deploy-feasible-for-ml-ci-cd-pipeline-61470ed3edbc"> GitHub Actions </a>的文章来获得一个简要的概述。</p><blockquote class="kv kw kx"><p id="7317" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">我们开始吧！</p></blockquote><h2 id="0c29" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">计划自定义操作</h2><p id="0e1c" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">我们不想在设计工作流时出错，所以让我们用一个清单为我们的自定义操作制定一个计划。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a82480c54e200f018d60da85a24deadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2OA3dEaYG6aaxqnLnhxfKg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用Canva设计</p></figure><ul class=""><li id="f7dc" class="mx my iq lb b lc ld lf lg lv mz lw na lx nb lu nc nd ne nf bi translated"><strong class="lb ir"> Dockerfile — </strong>所有动作都需要一个Dockerfile来定义运行动作的容器环境。</li><li id="ae2a" class="mx my iq lb b lc ng lf nh lv ni lw nj lx nk lu nc nd ne nf bi translated"><strong class="lb ir"> action.yml — </strong>这将为我们的操作定义输入、输出、入口点，以及其他细节，如操作名称、描述、作者姓名等。</li><li id="5949" class="mx my iq lb b lc ng lf nh lv ni lw nj lx nk lu nc nd ne nf bi translated"><strong class="lb ir">脚本— </strong>一个动作可能需要一个脚本来执行任务，在我们的例子中，导入数据集和训练模型就是任务。所以这里我们使用一个python脚本。</li><li id="99d2" class="mx my iq lb b lc ng lf nh lv ni lw nj lx nk lu nc nd ne nf bi translated"><strong class="lb ir"> README.md — </strong>这是可选的，但是如果我们想在市场上发布我们的行动，我们就需要它。README.md文件有助于提供操作顺利运行所需的示例和变量。</li><li id="dcba" class="mx my iq lb b lc ng lf nh lv ni lw nj lx nk lu nc nd ne nf bi translated"><strong class="lb ir">一个GitHub库— </strong>所有的动作代码都会保存在一个GitHub库中。</li></ul></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h2 id="e967" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">Dockerfile文件</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/0ac4e8370ab94b928847da3a614e72e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*buOIUdaBJv6DAg3pZHVd2A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Dockerfile(作者照片)</p></figure><p id="afe5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">我们需要一个操作将在其中运行的Dockerfile文件。安装了模型训练所需的必要依赖项，并在此定义了入口点。</p><h2 id="0c63" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">设置action.yml文件以定义操作</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/fb5cc1c7ae47f123430d4c6d3b161354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*FlK-bH_sd1NvgWyas_aYAA.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">actions.yml文件(作者提供照片)</p></figure><p id="fa58" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">正如我前面所说的，这个文件帮助我们定义动作的输入和输出。在我们的例子中，在模型被训练之后，我从用户那里获取输入进行分类。我们还将使用actions.yml文件在市场中用图标和颜色标记我们的行动。</p><h2 id="01fa" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">用于训练模型的Python脚本</h2><p id="04b9" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">脚本是使动作执行任务的主要核心部分。在这里，我们可以使用环境变量、访问机密和任何事件数据。我们可以考虑使用Python、Ruby、Java、C#编写脚本。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用于训练模型的Python脚本</p></figure><p id="76e1" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在当前操作中，我们通过环境变量<strong class="lb ir"> GITHUB_REPOSITORY访问用户上传到GitHub存储库中的数据集。</strong>一旦我们得到数据，输出变量被编码。我用SVM来分类。随着模型的构建，它将被存储在容器中以备后用。</p><blockquote class="kv kw kx"><p id="c310" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><strong class="lb ir">注意:</strong>这里我们假设数据集是干净的，没有丢失的值。对于不同的任务，脚本可以是不同的，您可以相应地定制它。我们还可以执行几项工作，如数据预处理、特征工程等。</p></blockquote><p id="4031" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">一旦创建了所有必要的文件并上传到GitHub，存储库应该如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/a76edbfb362113386ced40e4477f92d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tud9V18PLdXMTZI3KdH08A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GitHub知识库(作者提供图片)</p></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h2 id="4cf6" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">将行动发布到市场</h2><p id="e70c" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">GitHub足够智能，可以检测action.yml文件，并询问我们是否要将该操作发布到Marketplace。点击<strong class="lb ir">发布草稿。</strong></p><blockquote class="kv kw kx"><p id="0f59" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">在发布之前，请确保您已经为GitHub帐户启用了双因素身份验证。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/5e5fe69ffd74b4b5abe3c9748726102d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4oQbQlLa8iYLIj8TYEYkw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">发布行动(作者照片)</p></figure><p id="8bbb" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果一切正常，可以看到上面的控制台。现在提供所需的详细信息，如主要类别、描述、标签名称等。如下图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/43ee64e24c467f9a454076198ab5a544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUpzx1rthd7Jd5McMaWQ1w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">发布行动的其他详细信息(作者提供的照片)</p></figure><p id="58c8" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">填写完必要的详细信息<strong class="lb ir">后，点击<strong class="lb ir">发布发布</strong>。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/e4850aefb334735d6a9880659a826c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gYXLe4IcvAfCSw7cVapY1A.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">行动发布(作者供图)</p></figure><p id="4775" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">点击右上角的<strong class="lb ir">市场</strong>。</p><blockquote class="kv kw kx"><p id="5020" class="ky kz la lb b lc ld jr le lf lg ju lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">TADAAA！！我们的行动已发布，现在出现在<a class="ae ly" href="https://github.com/marketplace/actions/autom-ml-classifier-action" rel="noopener ugc nofollow" target="_blank">市场上。</a></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/9d0a3dbe7b83f6aacc5c4fa1100aeecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZ9ZJscqazRr1xx9XAYKFw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GitHub Marketplace上的自动ML分类器操作(作者提供图片)</p></figure><h2 id="c781" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">这个动作怎么用？</h2><p id="c569" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">既然我们已经在市场上发布了<em class="la">动作</em>，让我们看看如何在我们的工作流程中使用它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/2255de1887087f4c0de674a0919835c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXoTQs_drKQSO_Z3JXGpqA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用自动ML分类器动作(作者照片)</p></figure><p id="16e9" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">当您点击<strong class="lb ir">使用最新版本时，</strong>将显示提示。我们需要复制代码并在我们的工作流程中使用它，如下所示。为了简单起见，我使用了虹膜数据集来训练模型并对花进行分类。我已经提供了测试模型的输入。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/eb7fd65a7d25ee3caa7f520ca1c53915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*N7bE2N-MKZfQ5qgILT80ug.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">工作流程(作者照片)</p></figure><p id="d8a5" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">现在创建一个存储库并上传数据集来训练模型。数据集文件的名称必须是<strong class="lb ir"> dataset.csv </strong>(在我的例子中)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/2ba0114090cc922640786983f0125d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HvVjDl50jsjGua2DzGLz5Q.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GitHub知识库(作者提供图片)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/07d0c66364e1eb0442c105bbad63d414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMkpl36wbhQ-2usSLUCNng.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">数据集格式(作者提供的照片)</p></figure><p id="b326" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">现在到GitHub控制台上的<strong class="lb ir">动作</strong>，点击<strong class="lb ir">自己设置一个工作流程。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/d8351cf27766e1d5206e04b7de79965a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHZI3FEQNohR1TDnXJSaWQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GitHub操作部分(作者提供图片)</p></figure><p id="450e" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">点击<strong class="lb ir">开始提交，</strong>给出提交信息(可选)，点击<strong class="lb ir">提交新文件。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/d7d953dbdf4a798d3d33e4e4a6b8f451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ETFt1Z5ay_ULnNkEc3J6AA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">提交工作流文件(作者照片)</p></figure><p id="5c7e" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">一旦你点击<strong class="lb ir">提交新文件，</strong>工作流就开始了。转到<strong class="lb ir"> Actions </strong>，您将找到与您之前给出的提交消息同名的工作流。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/5218e0363c2891fdd82f46187fcabb4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qNWMpZBSB80KAKwW7lzJIQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">执行工作流程(作者提供照片)</p></figure><p id="8c35" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">单击工作流，您将看到控制台输出。对于给定的输入和模型精度，您可以看到模型的输出。在右上角，您可以点击<strong class="lb ir">工件</strong>，下载模型文件并在我们的本地机器上使用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/ffc982c5e3753b3bbe8301a8e8bcabaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0zPqPv8CywMPRYwx-CmsA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">控制台输出(作者提供照片)</p></figure><p id="c1d3" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">该工作流在<strong class="lb ir"> push </strong>事件时触发，即每当用户上传数据集或对数据集进行任何更改时，GitHub动作— <strong class="lb ir"> Auto ML Classifier </strong>将为我们构建模型。当在本地机器上构建模型出现问题时，这个操作会很方便。此外，通过添加不同的阶段，可以测试模型并部署它，或者以不同的版本将应用程序交付给用户。</p><p id="fc16" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">自动ML分类器动作</em> </strong>的完整代码可以在GitHub <a class="ae ly" href="https://github.com/developers-cosmos/Auto-ML-Classifier" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="8b52" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><strong class="lb ir"> <em class="la">测试动作</em> </strong>的完整代码可以在GitHub <a class="ae ly" href="https://github.com/RitheeshBaradwaj/Testing_GitHubAction" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="7c6a" class="lz ma iq bd mb mc md dn me mf mg dp mh lv mi mj mk lw ml mm mn lx mo mp mq mr bi translated">结论</h2><p id="7a46" class="pw-post-body-paragraph ky kz iq lb b lc ms jr le lf mt ju lh lv mu lk ll lw mv lo lp lx mw ls lt lu ij bi translated">在本文中，我们已经看到了如何创建一个GitHub动作，一旦数据集被提供，它就自动构建或训练一个机器学习模型。此外，创建的操作在文章中被发布到<strong class="lb ir"> Marketplace </strong>。通过使用GitHub Actions，我们可以实现完全成熟的<strong class="lb ir">持续集成</strong>和交付(<strong class="lb ir"> CI </strong> / <strong class="lb ir"> CD </strong>)功能，这些功能内置于服务中。</p><p id="6d0d" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果你有什么建议，我很乐意听听。我很快会带着另一个有趣的话题回来。在那之前，呆在家里，保持安全，继续探索！</p><p id="1da2" class="pw-post-body-paragraph ky kz iq lb b lc ld jr le lf lg ju lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果想联系，<strong class="lb ir">联系我上</strong><a class="ae ly" href="https://www.linkedin.com/in/ritheesh-baradwaj-yellenki-8a6988173/" rel="noopener ugc nofollow" target="_blank"><strong class="lb ir">LinkedIn</strong></a><strong class="lb ir">。</strong></p></div></div>    
</body>
</html>