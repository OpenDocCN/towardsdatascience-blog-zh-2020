<html>
<head>
<title>Visualizing Multiple Regression in 3D</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">三维可视化多元回归</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-multiple-regression-in-3d-a1e7aba7a007?source=collection_archive---------30-----------------------#2020-07-27">https://towardsdatascience.com/visualizing-multiple-regression-in-3d-a1e7aba7a007?source=collection_archive---------30-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3684" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何更好地理解高维数据集？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/aa876517cfc3af56aade4fce480f3c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*eqscfx3hNWVfpdzB-zqdAQ.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片由<a class="ae ku" href="https://pixabay.com/users/Mediamodifier-1567646/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2140601" rel="noopener ugc nofollow" target="_blank"> Mediamodifier </a>来自<a class="ae ku" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2140601" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><h1 id="8eef" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">介绍</h1><p id="554d" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">不管你是否接触过数据科学&amp;统计学，至少，你很可能听说过回归。在本帖中，我们将讨论多元回归，作为前兆，你肯定希望对简单的线性回归有所了解。如果你不熟悉，你可以<a class="ae ku" rel="noopener" target="_blank" href="/build-evaluate-and-interpret-your-own-linear-regression-model-in-minutes-e6a3e8253501">从这里开始</a>！否则，让我们开始多元线性回归。我最近谈到了用热图可视化多元线性回归，如果你已经读过这篇文章，请随意跳到这篇文章的建模部分，在那里我们将构建我们的新模型，并介绍<code class="fe mj mk ml mm b">plotly</code>包和三维可视化。如果你还没有读过，这是另一个可视化<a class="ae ku" rel="noopener" target="_blank" href="/visualizing-multiple-linear-regression-with-heatmaps-3f69f1652fc4?source=your_stories_page---------------------------">多元回归</a>的有用方法。</p><h1 id="18fc" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">多元线性回归</h1><p id="0980" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">我们在简单线性回归和多元线性回归之间的区别仅仅是帮助我们理解因变量的解释变量的数量。</p><p id="3461" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">多元线性回归是数据科学家非常流行的统计技术，也是数据科学家使用的许多更复杂方法的基础。</p><p id="dfe8" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在我关于简单线性回归的文章中，我给出了一个用一个数字变量——平方英尺来预测房价的例子。</p><p id="608f" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">这篇文章是我们探索线性回归不同实现的系列文章的一部分。在我们探索<a class="ae ku" rel="noopener" target="_blank" href="/multiple-regression-a-primer-on-parallel-slopes-models-137d114e314e">平行斜坡模型</a>的帖子中，我们创建了一个模型，在这个模型中，我们使用平方英尺来预测价格，以及它是否是一个滨水房产。这里我们将做一些类似的事情，但是我们将使用多个数字输入来创建我们的模型。</p><h1 id="f6e5" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">让我们开始建模</h1><p id="4bff" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">类似于我们在前面提到的文章中所构建的，我们将创建一个线性回归模型，其中我们添加了一个新的数值变量。</p><p id="04fb" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">我们正在处理的数据集是西雅图房价数据集。数据集的记录级别是按房屋和详细价格、平方英尺数、床位数、浴室数等。</p><p id="bd12" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在这篇文章中，我们将尝试通过数据集中其他数值变量的函数来解释价格。</p><p id="1e2d" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">说到这里，让我们开始吧。与我们之前构建的类似，我们使用<code class="fe mj mk ml mm b">sqft_living</code>来预测<code class="fe mj mk ml mm b">price</code>，只是这里我们将添加另一个变量:<code class="fe mj mk ml mm b">sqft_basement</code></p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="5f3d" class="mw kw it mm b gy mx my l mz na">fit &lt;- lm(price ~  sqft_living + sqft_basement,    <br/>          data = housing)<br/>summary(fit)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/4e3fbe1ec27b14c8fa35a10f23b4e25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1FwbqFIpw06TPpph"/></div></div></figure><p id="386f" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">回归模型中包含各种数字解释变量在语法上和数学上都很简单。</p><h1 id="55e7" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">可视化限制</h1><p id="2434" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">虽然从技术上讲，您可以将数字变量一个接一个地分层到同一个模型中，但这很快就会变得难以可视化和理解。</p><p id="ebd2" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在我们的模型中，我们需要能够评估三个独立的维度。</p><p id="88b6" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">正如我之前提到的，这里我们将使用<code class="fe mj mk ml mm b">plotly</code>的 3d 绘图工具来加深理解。</p><p id="02c6" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">让我们和<code class="fe mj mk ml mm b">plot_ly</code>一起玩吧！</p><p id="ad97" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">让我们首先可视化<code class="fe mj mk ml mm b">sqft_living</code>和<code class="fe mj mk ml mm b">price</code>来熟悉语法。</p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="b78c" class="mw kw it mm b gy mx my l mz na">plot_ly(data = housing, x = ~sqft_living, y = ~price, opacity = 0.5) %&gt;%<br/>  add_markers()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ng"><img src="../Images/668905e52c6574759d3e4b98c8012860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Csu0NnqDuLSlAx6E"/></div></div></figure><p id="c05a" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">如你所见，语法与 ggplot 没有太大的不同。首先指定数据，然后跳入美学，而不必明确声明它们是美学。上图是一个简单的二维散点图。</p><p id="8963" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">让我们在三维空间中想象一下！</p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="edd1" class="mw kw it mm b gy mx my l mz na">plot_ly(data = housing, z = ~price, x = ~sqft_living, y = ~bathrooms, opacity = 0.5) %&gt;%<br/>  add_markers()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/7350c83ade773acfab091a3785643611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mO0SnYIOlXnMScwW"/></div></div></figure><p id="6424" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">类似于我们之前所做的，我们只是将<code class="fe mj mk ml mm b">price</code>移动到 z 轴，现在包括了<code class="fe mj mk ml mm b">sqft_basement</code>。这个绘图工具的有趣之处在于它不是静态的，你可以点击并拖动旋转你观察绘图的角度。显然这里你只是看到了一个截图，但是让它在你自己的机器上运行来体验一下<code class="fe mj mk ml mm b">plotly</code>的全部灵活性。当您在 RStudio 中运行这个命令时，您的<code class="fe mj mk ml mm b">Viewer</code>窗口将会填充这个可拖动/可移动的可视内容，这有助于解释更大维度的数据集。</p><h1 id="fb12" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">添加平面</h1><p id="79cc" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">当从二维转移到三维时，事情就变了。如果你有线性代数的背景，这可能会引起共鸣。简单来说，如果你有一个单一的维度，那么你就有一个点。如果你有两个维度，你有一条线。如果你有三个维度…你就有一个<em class="nh">平面</em>。</p><p id="a96d" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">考虑到这一点，让我们用一个平面来形象化我们的多元线性回归模型。</p><p id="aa96" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">首先，我们需要创建一个矩阵，其中包含所有可能的模型输入以及每种情况下的模型预测。</p><p id="95ee" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">下面我为我们的<code class="fe mj mk ml mm b">x</code>和<code class="fe mj mk ml mm b">y</code>创建一个向量。然后我们将它们传递给<code class="fe mj mk ml mm b">outer</code>函数，在这里我们声明将它们传递给通过拟合我们的模型定义的线性回归函数的操作。</p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="0ea5" class="mw kw it mm b gy mx my l mz na">x &lt;- seq(370, 15000, by = 10)<br/>y &lt;- seq(0, 15000, by = 10)</span><span id="804e" class="mw kw it mm b gy ni my l mz na">plane &lt;- outer(x, y, function(a, b){fit$coef[1] + <br/>    fit$coef[2]*a + fit$coef[3]*b})</span></pre><p id="eb9d" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">现在我们有了我们的飞机，让我们把它添加到我们的视觉。</p><pre class="kj kk kl km gt ms mm mt mu aw mv bi"><span id="f47f" class="mw kw it mm b gy mx my l mz na">plot_ly(data = housing, z = ~price, x = ~sqft_living, y = ~sqft_basement, opacity = 0.5) %&gt;%<br/>  add_markers() %&gt;%<br/>  add_surface(x = ~x, y = ~y, z = ~plane, showscale = FALSE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/83342b13a94611f88470baedf805dade.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/0*9G9wV394jK5eB1kW"/></div></figure><p id="f11e" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">再说一次，你必须自己跳进去和<code class="fe mj mk ml mm b">plotly</code>一起玩。</p><p id="c947" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">你做到了！您已经将一个平面添加到您的 3D 散点图中，该平面代表我们的回归公式与不同输入<code class="fe mj mk ml mm b">sqft_lot</code> &amp; <code class="fe mj mk ml mm b">sqft_basement</code>之间的关系，但是我们仍然有一个问题…这如何帮助我们？</p><p id="a033" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">你曾经在你的 2D 散点图上加过回归线吗？如果是，意图是什么？</p><p id="6918" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">你可以在你的图中添加一条线来表示“最佳拟合”是什么样子，但是对于给定的<code class="fe mj mk ml mm b">x</code>值，我们可以预测<code class="fe mj mk ml mm b">y</code>，这也是很有用的。飞机给了我们这一切。对于<code class="fe mj mk ml mm b">x</code>和<code class="fe mj mk ml mm b">y</code>的给定值，<code class="fe mj mk ml mm b">z</code>是什么？</p><h1 id="6056" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">结论</h1><p id="98e1" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">我们在短时间内做了很多工作。多元线性回归模型会很快变得越来越复杂。我希望将此功能添加到您的工具集中，您将能够更好地理解您正在处理的数据和模型。给一个模型加载我们能接触到的每一个变量并不是非常困难，但是它确实提出了这样一个问题:它是否解决了我们的目标。它是否有助于我们在参与建模过程时开始获得的那种理解？</p><p id="3892" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">在短短的几分钟内，我们讲述了:</p><ul class=""><li id="e17b" class="nk nl it lp b lq mn lt mo lw nm ma nn me no mi np nq nr ns bi translated">多元线性回归定义</li><li id="e3aa" class="nk nl it lp b lq nt lt nu lw nv ma nw me nx mi np nq nr ns bi translated">构建 mlr 模型</li><li id="2018" class="nk nl it lp b lq nt lt nu lw nv ma nw me nx mi np nq nr ns bi translated">可视化/解释限制</li><li id="5422" class="nk nl it lp b lq nt lt nu lw nv ma nw me nx mi np nq nr ns bi translated">使用 3D 绘图和平面来解释我们的数据和模型</li></ul><p id="6376" class="pw-post-body-paragraph ln lo it lp b lq mn ju ls lt mo jx lv lw mp ly lz ma mq mc md me mr mg mh mi im bi translated">如果这有帮助，请随时查看我在 datasciencelessons.com 的其他帖子。祝数据科学快乐！</p></div></div>    
</body>
</html>