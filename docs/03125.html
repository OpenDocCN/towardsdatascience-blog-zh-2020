<html>
<head>
<title>Unity-ML Agents: The Mayan Adventure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity-ML特工:玛雅冒险</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/unity-ml-agents-the-mayan-adventure-2e15510d653b?source=collection_archive---------14-----------------------#2020-03-25">https://towardsdatascience.com/unity-ml-agents-the-mayan-adventure-2e15510d653b?source=collection_archive---------14-----------------------#2020-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="91ee" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="http://www.simoninithomas.com/unitymlagentscourse/" rel="noopener ugc nofollow" target="_blank"> Unity-ML代理课程</a></h2><div class=""/><div class=""><h2 id="c3b7" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">训练一个特工在这种危险的环境下拿到金像。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c626961f01373409af4f2664db927954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HY69H5jTh5yLCq-ibqFjFw.png"/></div></div></figure><p id="229c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="lw">本文是</em> <a class="ae lx" href="http://www.simoninithomas.com/unitymlagentscourse" rel="noopener ugc nofollow" target="_blank">的第三章<em class="lw">全新免费课程关于深度强化学习与合一。</em> </a> <em class="lw">我们将创建使用Unity游戏引擎🕹.学习玩视频游戏的代理查看教学大纲</em> <a class="ae lx" href="http://www.simoninithomas.com/unitymlagentscourse/" rel="noopener ugc nofollow" target="_blank"> <em class="lw">此处</em> </a> <em class="lw">。</em></p><p id="9d92" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="lw">如果之前没有学习过深度强化学习，需要查看免费课程</em><a class="ae lx" href="https://simoninithomas.github.io/Deep_reinforcement_learning_Course/" rel="noopener ugc nofollow" target="_blank"><em class="lw">tensor flow深度强化学习。</em> </a></p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><p id="b4b1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在前两篇文章中，您学习了使用ML-agent，并培训了两个agent。第一个是<a class="ae lx" rel="noopener" target="_blank" href="/an-introduction-to-unity-ml-agents-6238452fcf4c">能够翻墙</a>，第二个<a class="ae lx" rel="noopener" target="_blank" href="/diving-deeper-into-unity-ml-agents-e1667f869dc3">学会摧毁金字塔以获得金砖</a>。是时候做些更难的事情了。</p><p id="db7e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">当我在考虑创建一个自定义环境时，我想起了印第安纳·琼斯中的一个著名场景，Indy需要获得金像并避免大量的陷阱才能生存。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="8cac" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我在想:我的经纪人能像他一样好吗？<strong class="lc ja">剧透警告:的确是，正如你在这个回放视频中看到的！</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mh mg l"/></div></figure><p id="2887" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这就是为什么在过去的两周里，我在<a class="ae lx" href="https://unity.com/" rel="noopener ugc nofollow" target="_blank"> Unity </a>中开发了一个名为Mayan Adventure的开源强化学习环境。充满陷阱的危险模块化环境。为了训练代理人，我使用了一种叫做课程学习的学习策略。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mi"><img src="../Images/7c1ff0d2a72575fe0b83179869849e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5D3BhKRhrYdqJoca9S1tVg.png"/></div></div></figure><p id="5efa" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">所以今天，你将学习<strong class="lc ja">课程学习，</strong>你将训练我们的代理人获得<strong class="lc ja">金像并击败游戏</strong>。</p><p id="cec8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">所以让我们开始吧！</p><h1 id="39e3" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated"><strong class="ak">介绍玛雅冒险</strong></h1><h2 id="290f" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">Hello Indie</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nm"><img src="../Images/bcde2199483d04fb20b9100ca0a0bb21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXS9QPzHNzHkc7-T2KoJcQ.png"/></div></div></figure><p id="dcdf" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">正如我所说，玛雅冒险是一个针对ML-agent的开源强化学习环境。</p><p id="0fb1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这种环境下，你训练你的代理人(Indie) <strong class="lc ja">击败每一个危险的陷阱，得到金像。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nn"><img src="../Images/23c9eb5ff2f9f3f1e69c37b6990a5d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E__Vau9qv4-lnBia2zX5hg.png"/></div></div></figure><p id="dd6f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在学习过程中，我们的代理人启动<strong class="lc ja">以避免掉下地面</strong>并获得金像。<strong class="lc ja">随着他变得越来越好，我们增加了一些难度</strong>，感谢两个压力按钮，你的代理可以将自己变成岩石或木头。</p><p id="1aa4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">他需要把自己变成木头才能通过木桥，否则，桥就会倒塌。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e80e2d0351fd070b0130e86975ef7644.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*WzkE7xf4VSg6ikXC5Pab_A.gif"/></div></figure><p id="bcd8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然后撞上一块岩石穿过火层。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e74eead2c94275416c06612fb9048c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*cyLWG2LwgldxNmTn6aZMRQ.gif"/></div></figure><p id="3e6b" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">奖励制度是:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/48d359692437fe5dca085855ef376bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TRKrF6hBYkWRrVWm"/></div></div></figure><p id="a223" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在观察方面，我们的代理<strong class="lc ja">没有使用计算机视觉，而是使用光线感知张量</strong>。可以把它们想象成激光，如果它穿过一个物体，它就会探测出来。</p><p id="c1da" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">我们用了其中的两个</strong>探测安全平台，去岩钮、去木钮、火、木桥、球门和宝石。第二条射线也能探测到空洞(为了训练我们的特工避免从环境中掉下来)。</p><p id="d60d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><strong class="lc ja">此外，我们添加了3个观察值</strong>:一个布尔型通知代理是否是岩石，以及代理的x和z速度。</p><p id="4b2b" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">动作空间是离散的，具有:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/f799d9ed3bef97486eb0688476c7b4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H8mXeSKjBJqOSqtL"/></div></div></figure><h2 id="1082" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">引擎盖背后:是怎么做到的？</h2><p id="056a" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">玛雅人的冒险始于这个原型版本。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/e867767e870f2d300be8682673a18370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*X39tPdFtlR_0iV6On8GKAg.png"/></div><p class="nw nx gj gh gi ny nz bd b be z dk translated">原型</p></figure><p id="99fb" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">但这并不吸引人，为了创造环境，我们使用了不同的免费软件包:</p><ul class=""><li id="b0e6" class="oa ob iq lc b ld le lg lh lj oc ln od lr oe lv of og oh oi bi translated"><a class="ae lx" href="https://assetstore.unity.com/packages/templates/tutorials/3d-game-kit-115747" rel="noopener ugc nofollow" target="_blank"> 3D游戏套件</a>:Unity创造的梦幻环境，我使用了他们的岩石平台、按钮、植被和柱子元素。</li><li id="8ce0" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated"><a class="ae lx" href="https://assetstore.unity.com/packages/essentials/tutorial-projects/unity-particle-pack-127325" rel="noopener ugc nofollow" target="_blank"> Unity粒子包</a>:我用它做消防系统。</li><li id="12f3" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated"><a class="ae lx" href="https://assetstore.unity.com/packages/templates/tutorials/creator-kit-puzzle-149311" rel="noopener ugc nofollow" target="_blank">创作工具包:拼图</a>:我只用它来做win粒子烟火。</li><li id="8cab" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">其他元素，木桥，动画，石头头，金像，软呢帽等<strong class="lc ja">都是在Blender中制作的。</strong></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/82047576e4d48de420a92fc0718fc1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I27fQGv7uHl4SFFkXaRalA.png"/></div></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi op"><img src="../Images/9a8b0f7b581a4fa2edc674f4081795e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yb9AlgPcgQMOG6kJf-vgZw.png"/></div></div></figure><p id="bc5f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我把这个项目设计得尽可能模块化。这意味着你将能够创造新的水平和新的障碍。此外，这仍然是一项进行中的工作，它意味着<strong class="lc ja">将进行纠正和改进，并将达到新的水平。</strong></p><p id="21f3" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为了帮助我在代码方面创建环境，我在Unity Learn上学习了Immersive Limit制作的非常好的<a class="ae lx" href="https://www.immersivelimit.com/tutorials/unity-ml-agents-penguins" rel="noopener ugc nofollow" target="_blank">课程。</a></p><blockquote class="oq"><p id="190e" class="or os iq bd ot ou ov ow ox oy oz lv dk translated">你现在可能会问的问题是<strong class="ak">我们将如何培训这个代理？</strong></p></blockquote><h1 id="7228" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf pa kg mv ki pb kj mx kl pc km mz na bi translated">让我们训练独立音乐</h1><p id="d807" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">为了培训Indie，我们将使用PPO和课程学习策略。如果你不知道什么是PPO，<a class="ae lx" rel="noopener" target="_blank" href="/proximal-policy-optimization-ppo-with-sonic-the-hedgehog-2-and-3-c9c21dbed5e">可以查看我的文章</a>。</p><h2 id="6c12" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">什么是课程学习？</h2><p id="0019" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">课程学习是一种<strong class="lc ja">强化学习技术，可以在代理需要学习复杂任务时更好地训练它。</strong></p><p id="69c9" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">假设你6岁，我对你说我们要开始学习多元微积分。然后你会不知所措，无法做到。因为这对开始来说太难了:<strong class="lc ja">你会失败的。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/8e688fca126cc5ba111de0621bed1cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bs2JPCQNQZdv-ZRXjj9peQ.jpeg"/></div></div></figure><p id="2ef1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">一个更好的策略是先学习简单的数学，然后随着你对基础知识的掌握越来越好，再增加复杂性，最终能够完成这门高级课程。</p><p id="a157" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">所以你从算术课开始，当你很好的时候，你继续上代数课，然后是复代数课，然后是微积分课，最后是多变量微积分课。多亏了这个策略，你将能够在多变量微积分中取得成功。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/e485b9c77b0f3f0561746c00a48e99b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*43MPWvbFeex0KztPcTuNpw.jpeg"/></div></div></figure><p id="7845" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这也是我们用来训练特工的策略。我们不是一次给我们的代理整个环境，而是随着他变得更好，通过增加难度来训练它。</p><p id="396e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为了在ML-Agents中做到这一点，我们需要<strong class="lc ja">指定我们的课程:</strong>一个YAML配置文件，它将根据一些度量(平均累积奖励)指定何时改变环境参数(在我们的例子中，增加级别)。<strong class="lc ja">将本课程视为我们的代理需要遵循的教学大纲。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pe"><img src="../Images/f851d71aefef31337c2489feb09a104c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FeystKyiTg74gQBG"/></div></div></figure><p id="0ea1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">课程是这样的:</p><ul class=""><li id="5713" class="oa ob iq lc b ld le lg lh lj oc ln od lr oe lv of og oh oi bi translated">第一关，代理人需要<strong class="lc ja">学会拿到金像</strong>，避免掉下平台。</li><li id="ac94" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">然后，在第二关中，代理需要<strong class="lc ja">与物理按钮</strong>进行交互，并将自己变成木头，以通过这座大木桥。</li><li id="e983" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">在第三关，为了穿越这团火，代理人需要把自己变成岩石。</li><li id="e2ee" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">最后，在最后一关，代理人需要<strong class="lc ja">学会将自己变成木头，并通过一个更窄的桥</strong>而不会从桥上掉下来。</li></ul><h2 id="1d5b" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">我们去拿这个金像吧！</h2><p id="421e" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated"><em class="lw">你需要从</em> <a class="ae lx" href="https://github.com/simoninithomas/the_mayan_adventure" rel="noopener ugc nofollow" target="_blank"> <em class="lw"> GitHub库</em> </a> <em class="lw">下载项目，按照doc </em>  <em class="lw">中定义的安装</em> <a class="ae lx" href="https://github.com/simoninithomas/the_mayan_adventure" rel="noopener ugc nofollow" target="_blank"> <em class="lw">流程进行。</em></a></p><p id="8d40" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="lw">如果不想训练金像，训练好的模型都在</em> <a class="ae lx" href="https://github.com/simoninithomas/the_mayan_adventure" rel="noopener ugc nofollow" target="_blank"> <em class="lw"> Unity项目</em> </a> <em class="lw">文件夹中的“玛雅冒险拯救模型”。</em></p><p id="7c92" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在我们了解了玛雅冒险环境和课程学习是如何工作的，让我们来训练我们的代理人来打败这个游戏。</p><p id="5505" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">代码分为两个主要脚本:</p><ul class=""><li id="cb31" class="oa ob iq lc b ld le lg lh lj oc ln od lr oe lv of og oh oi bi translated"><em class="lw">mayanadventurea。cs:控制关卡生成、代理和目标产卵。</em></li><li id="b190" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated"><em class="lw">mayanadventurent . cs</em>:它控制代理的移动，处理事件(当你在石头上和在木桥上时会发生什么等等)，以及奖励系统。</li></ul><p id="4098" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">首先，我们需要<strong class="lc ja">定义我们的课程，</strong></p><p id="f46b" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为此，您需要转到您的<em class="lw"> ML-Agents文件夹/config/courses</em>文件夹，创建一个名为<em class="lw"> mayanAdventure </em>的新文件夹，并在其中创建您的<em class="lw">mayanadventurelearning . YAML</em>文件。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/66b35976de097ca73c8f94adc5e628f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNvG_DqD2Jx_Dyd0QpLBVg.jpeg"/></div></div></figure><ul class=""><li id="495b" class="oa ob iq lc b ld le lg lh lj oc ln od lr oe lv of og oh oi bi translated">我们将用来衡量代理商的<em class="lw">进度</em>的关键指标是<strong class="lc ja">奖励。</strong></li><li id="d304" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">然后，在<em class="lw">阈值</em>部分，<strong class="lc ja">我们定义进入下一个级别</strong>的平均奖励。例如，要达到第1级，我们的代理需要有0.1的平均累积奖励</li><li id="b655" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated"><em class="lw"> min_lesson_length </em>指定代理在改变等级<strong class="lc ja">之前必须完成的最少剧集数。这有助于我们避免我们的代理人在一集里运气好而改变级别太快的风险。</strong></li><li id="cc91" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">最后，我们定义<em class="lw">参数</em>，这里是<strong class="lc ja">级别号。</strong></li></ul><p id="759c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在我们已经定义了我们的课程，<strong class="lc ja">我们可以配置我们的代理。我们的代理是一个预置的实例。因此，为了一次修改全部<strong class="lc ja">我们将直接修改预设。</strong></strong></p><p id="65e4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在预设<em class="lw"> MayanAdventureArea </em>中，你需要检查训练是真的。我们创建这个bool是为了<strong class="lc ja">区分训练阶段和测试阶段</strong>，在测试阶段我们添加了一些事件，比如激活获胜面板、木桥摧毁动画以及当你获胜时展示烟火。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/fe222d80019f0bc6832b8d7a1ac9da48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wgqC9crXgdQpusWPIMRvow.jpeg"/></div></div></figure><p id="0c42" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然后在预置中转到<em class="lw">代理</em>，先在<em class="lw">行为参数</em>中，如果有，移除模型。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/1e49db9455d8ac45f0667de2684693e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hpYmVHVtjphG-R7AZ6AlhA.jpeg"/></div></div></figure><p id="c0cb" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">之后，你需要<strong class="lc ja">来定义观察堆栈向量。</strong>这将<strong class="lc ja">取决于您是否使用循环存储器</strong>(将在教练配置中定义)如果不使用，<strong class="lc ja">您应该堆叠4到6帧。如果有，只有3个</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/513033da2f6baed5827c38b30278508e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vmsz9kH0JzbAEUmzCx-iEw.jpeg"/></div></div></figure><p id="af10" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">重要的是，矢量观察和光线感知观察<strong class="lc ja">具有相同的堆栈编号。</strong></p><p id="1618" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在我们可以定义超参数。这是我写的给我最好结果的配置。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/891b7a04ec4402ac48756437bf969f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c8zk2HEfn024ByTjYfNvXw.jpeg"/></div></div></figure><p id="daef" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">最后<strong class="lc ja">不要忘记关闭主摄像头</strong>，这里只是为了回放的目的。</p><p id="9689" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们现在<strong class="lc ja">准备训练。</strong>您需要打开您的终端，进入ml-agents-master所在的位置，键入以下内容:</p><pre class="kp kq kr ks gt pf pg ph pi aw pj bi"><span id="5e43" class="nb mk iq pg b gy pk pl l pm pn">mlagents-learn ./config/trainer_config.yaml --curriculum=config/curricula/mayanAdventure/MayanAdventureLearning.yaml --run-id TheMayanAdventure_beta_train --train</span></pre><p id="ea24" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这里，我们定义了:</p><ul class=""><li id="94ae" class="oa ob iq lc b ld le lg lh lj oc ln od lr oe lv of og oh oi bi translated">其中培训师_配置为:<em class="lw">。/config/trainer_config.yaml </em></li><li id="43c5" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">我们的课程:—课程=配置/课程/mayanAdventure/mayanadventurelearning . YAML</li><li id="366a" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">此培训的id:—run-id themayandventure _ beta _ train</li><li id="3eb3" class="oa ob iq lc b ld oj lg ok lj ol ln om lr on lv of og oh oi bi translated">别忘了火车旗。</li></ul><p id="4791" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它会要求你运行Unity场景，</p><p id="9cf8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">按下编辑器顶部的▶️按钮。</p><p id="36be" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">您可以使用以下命令启动Tensorboard来监控您的训练:</p><pre class="kp kq kr ks gt pf pg ph pi aw pj bi"><span id="7e16" class="nb mk iq pg b gy pk pl l pm pn">tensorboard — logdir=summaries</span></pre><h2 id="036f" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">我的结果</h2><p id="f64f" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">在获得好的结果之前，我已经进行了大约<strong class="lc ja"> 20次训练，以便找到一组好的超参数。</strong></p><p id="1664" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我给你两个训练有素的保存模型，第一个有循环记忆，另一个没有。培训花了我大约2个小时，在30个<strong class="lc ja">并行环境中，只有一个MacBook Pro英特尔酷睿i5处理器。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/55d425c0e56cd1e4384d49f7bdb3f0de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*slGE5MofMNe8HDmnN8Azzw.jpeg"/></div></div></figure><p id="ae2f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我们看到两个代理人<strong class="lc ja">有着完全相同的结果</strong>，没有记忆的训练要好得多。<strong class="lc ja">这是我用来录像的。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/fdbb7ca6dcfb23897870abaa438d8bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExaudGYzPXccZuLyr4Dyzg.jpeg"/></div></div></figure><h1 id="36f5" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">重播</h1><p id="8fc5" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">既然你已经训练了特工。您需要将包含在<em class="lw">ml-agents-master/Models</em>中的保存模型文件移动到Unity项目的<em class="lw">Mayan Adventure保存模型</em>中。</p><p id="31c6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然后，您需要停用除MayanAdventureArea (1)之外的<em class="lw"> MayanAdventureArea的所有实例。</em></p><p id="7eb0" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">事实上，正如我们在经典的深度强化学习中所做的那样，当我们启动一个游戏的多个实例(例如128个并行环境)时，我们在此复制并粘贴代理，以便有更多不同的状态。但是重播的时候我们只需要一个。</p><p id="4571" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">还有<strong class="lc ja">别忘了激活主摄像头。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/a2ce92f58da085fb93e63033192e3c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIGdtdhGGUNSRsBO7NjnCQ.jpeg"/></div></div></figure><p id="ac7f" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在，你需要回到<strong class="lc ja">mayanadventurea预设并取消选择Training。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/ac8f6ee4ad31ae25961b8cad09042319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2DFJpWP5p8FIVMyoMYl8Q.jpeg"/></div></div></figure><p id="9353" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">最后在代理<em class="lw">行为参数</em>中，拖动模型文件到模型占位符。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/7d9259ab2c82e9684a53f8d8847bf785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1chiv2UP7Lbe44aioV0hMA.jpeg"/></div></div></figure><p id="a21d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">然后，按下编辑器顶部的▶️按钮，瞧！</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/22ad603f06e6dfdfa9578bbd40096721.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*L-DBr5lHIfP4eNgvUOR-cA.gif"/></div></figure><p id="dd9a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你想记录你的结果，你只需要进入窗口&gt;常规&gt;记录器&gt;记录器窗口，点击开始记录这些参数:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pd"><img src="../Images/1fa82a83a1907e061daf4d8068d17fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQNMZ-x_WseBdkOzXPTk6g.jpeg"/></div></div></figure><h1 id="5f42" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">接下来的步骤</h1><p id="a51d" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">玛雅冒险<strong class="lc ja">是一个进行中的项目</strong>，它意味着修正和改进将会完成，新的水平将会出现。下面是我们将要采取的一些后续步骤。</p><h2 id="3733" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">光线投射可能不够:我们需要给他视觉能力</h2><p id="92f7" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">我们在培训中发现，我们的代理很优秀，但有些挑战绝对需要远见。</p><p id="059c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">vision的“问题”是它会以指数方式增加国家的规模。意味着下一个版本只会在GPU上训练，而不是CPU。</p><p id="11f4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这个想法可能是像Unity的Gridworld例子中一样，有一个环境的正交上视图作为输入。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi np"><img src="../Images/a7c257b86a85ef2da49ed27a839c3558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UCu1ZlU6ztyQwgwm.png"/></div></div><p class="nw nx gj gh gi ny nz bd b be z dk translated">来源:<a class="ae lx" href="https://github.com/Unity-Technologies/ml-agents/blob/master/docs/Learning-Environment-Examples.md" rel="noopener ugc nofollow" target="_blank"> ML-Agents文档</a></p></figure><h2 id="3af3" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">行上的新级别和定时事件</h2><p id="6600" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">因为玛雅环境是一个RL研究环境，所以我们想增加更复杂的关卡来训练我们的代理学习长期策略。</p><p id="a056" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">因此，除了视觉版本的工作，<strong class="lc ja">我们目前正在增加更复杂的水平。</strong>如滚球陷阱。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="po mg l"/></div></figure><p id="1bd5" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">而且<strong class="lc ja">还有一些定时事件，比如每3秒开关一次火候。</strong></p><h2 id="6ccb" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lj ng nh mv ln ni nj mx lr nk nl mz iw bi translated">增加了级别生成的随机性</h2><p id="06b0" class="pw-post-body-paragraph la lb iq lc b ld nq ka lf lg nr kd li lj ns ll lm ln nt lp lq lr nu lt lu lv ij bi translated">目前，我们的生成器总是输出相同的级别顺序。我们希望通过在关卡生成过程中增加一些随机性来改善这一点。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><p id="c2b1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">今天到此为止，</p><p id="2ad2" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你刚刚训练了独立游戏<strong class="lc ja">，击败了所有的陷阱，到达了金像。你也学到了课程学习。</strong>太牛逼了！</p><p id="2349" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">既然我们有了好的结果，我们可以尝试一些实验。记住，最好的学习方法是通过实验变得活跃。所以你要试着做一些假设，并验证它们。</p><p id="d9e4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">下次见！</p><p id="eb31" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果你有任何想法，评论，问题，欢迎在下面评论或者发邮件给我:hello@simoninithomas.com，或者发微博给我。</p><p id="0db3" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">不断学习，保持牛逼！</p></div></div>    
</body>
</html>