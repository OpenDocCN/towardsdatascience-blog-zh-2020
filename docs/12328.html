<html>
<head>
<title>5 simples steps to build your time series forecasting model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立时间序列预测模型的 5 个简单步骤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-simples-steps-to-build-your-time-series-forecasting-model-62356336bc35?source=collection_archive---------16-----------------------#2020-08-25">https://towardsdatascience.com/5-simples-steps-to-build-your-time-series-forecasting-model-62356336bc35?source=collection_archive---------16-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="213c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从数据准备到模型评估—关于构建简单的预测模型，您只需知道这些</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/be4324fc46802658b2904e3c2590742c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lsfycvfNzhHqH0km"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@aows?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿德里安</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8397" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我坚信“边做边学”的哲学。</p><p id="7757" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学是一个应用领域，所以你需要尝试学习一些东西。人们可以阅读所有关于游泳的“如何做”的教程，但在某些时候，他们必须测试水。</p><p id="7049" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学的初学者经常陷入这样一种印象:在做一个项目之前，他们必须学习世界上所有的东西。错了！我相信人们可以通过做一些小事情而不是阅读来学得更快。</p><p id="cbf5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我想让你学习如何拟合时间序列预测模型 ARIMA——对许多人来说，这是一个令人生畏的算法。在这篇文章中，你将通过 5 个简单的步骤学会它，并做出真正的预测。你不会造一辆法拉利，但我相信你会学会造一辆可以上街的车。</p><p id="d363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们卷起袖子。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f101" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">步骤 1:数据准备</h1><p id="3d86" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对于这个演示，我们将在 R 编程环境中使用一个名为<code class="fe mz na nb nc b">fpp2</code>的预测包。让我们装载那个包裹。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="2caf" class="nh md it nc b gy ni nj l nk nl"># Required packages<br/>library(fpp2)</span></pre><p id="5ad6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我从一个真实的时间序列中提取了一些数据。下面是这些值，让我们也把它们复制到 R 脚本中。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6203" class="nh md it nc b gy ni nj l nk nl"># your data<br/>values = c(92.1,  92.6,  89.5,  80.9,  95.6,  72.5,  71.2,  78.8,  73.8,  83.5,  97.9, 93.4,  98.0,  90.2,  96.7, 100.0, 103.6,  74.6,  78.9,  92.0,  83.4,  98.1, 109.9, 102.2, 102.1,  96.2, 106.9,  95.1, 113.4,  84.0,  88.6,  94.9,  94.7, 105.7, 108.6, 101.9,  113.9, 100.9, 100.2,  91.9,  99.6,  87.2,  92.1, 104.9, 103.4, 103.3, 103.9, 108.5)</span></pre><p id="fb16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像其他建模软件一样，这个软件包有特定的数据格式要求。<code class="fe mz na nb nc b">ts()</code>函数通过将数据转换成时间序列对象来处理这个问题。</p><p id="1d62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此函数中，我们指定起始年份(2015 年)和 12 个月的频率。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="5073" class="nh md it nc b gy ni nj l nk nl"># your time series<br/>time_series = ts(values, start = 2015, frequency =12)</span></pre><h1 id="1d58" class="mc md it bd me mf nm mh mi mj nn ml mm jz no ka mo kc np kd mq kf nq kg ms mt bi translated">步骤 2:时间序列分解</h1><p id="1cd0" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">分解基本上意味着将系列分解和可视化为其组成部分。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="97e6" class="nh md it nc b gy ni nj l nk nl"># time series decomposition<br/>autoplot(decompose(time_series)) + theme(plot.title = element_text(size=8))</span></pre><p id="1ab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了 4 条信息:您的数据(顶部一条)、总体趋势和季节性。最后一块被称为余数或随机部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/8b87efbbb931ca3f73aa0d19b81dbfab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VSVF0SCwJbZbQh7SRnXQ7Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">时间序列分解</p></figure><h1 id="4d0f" class="mc md it bd me mf nm mh mi mj nn ml mm jz no ka mo kc np kd mq kf nq kg ms mt bi translated">第三步:建模</h1><p id="11fe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">实际的模型构建是一个简单的使用<code class="fe mz na nb nc b">auto.arima()</code>函数的 2 行代码。<code class="fe mz na nb nc b">auto.arima</code>会照顾到最佳的参数值，你只需要指定几个布尔参数。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="095f" class="nh md it nc b gy ni nj l nk nl">model = auto.arima(time_series, seasonal = TRUE, stepwise = FALSE, approximation = FALSE)</span></pre><h1 id="abdf" class="mc md it bd me mf nm mh mi mj nn ml mm jz no ka mo kc np kd mq kf nq kg ms mt bi translated">第四步:预测</h1><p id="6361" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">做一个实际的预测是上面所有步骤中最简单的，仅仅是半行代码的长度——你能相信吗？我们正在使用<code class="fe mz na nb nc b">forecast()</code>函数，传递上面的模型，并指定你想要预测的未来的时间步数(我指定的是未来 30 个月)</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b94a" class="nh md it nc b gy ni nj l nk nl"># making forecast<br/>forecast_arima = forecast(model, h=30)</span></pre><p id="e79d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你实际上已经完成了预测。您可以使用<code class="fe mz na nb nc b">print(forecast_arima)</code>功能打印预测值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/d488903a7963caf100a499c1f2f5b28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*pkHVtKc_jVlHoO9jO8Upjw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预测值</p></figure><p id="467d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，您可能希望将预测值、输入序列和置信区间一起可视化。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="96ae" class="nh md it nc b gy ni nj l nk nl"># visualizing forecast<br/>autoplot(time_series, series = " Data") +<br/>  autolayer(forecast_arima, series = "Forecast") +<br/>  ggtitle(" Forecasting with ARIMA") +<br/>  theme(plot.title = element_text(size=8))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/abe2d39b586929f86d72ee833c3560cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*McGwF3JrC_L6c9Xt8G52Bg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">用 ARIMA 预测</p></figure><h1 id="d2ce" class="mc md it bd me mf nm mh mi mj nn ml mm jz no ka mo kc np kd mq kf nq kg ms mt bi translated">第五步:模型评估</h1><p id="b8b8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这是模型评估和准确性测试的额外步骤。首先，让我们看看模型描述:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="b49c" class="nh md it nc b gy ni nj l nk nl"># model description<br/>model['model']</span></pre><p id="4370" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我强调了一些你可能感兴趣的东西:模型的描述(ARIMA(0，1，2(0，1，1)[12])和 AIC 值。AIC 通常用于比较两个或多个模型的性能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/4c2f48d50a331f6131fcf0b8d0560a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*4eSExwlc3cULRk9eUJ6HMA.png"/></div></figure><p id="1c8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大多数机器学习模型中，精度是基于 RMSE 或 MAE 值来确定的。我们也把它们打印出来吧。</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="7e36" class="nh md it nc b gy ni nj l nk nl"># accuracy<br/>accuracy(model)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/b2f977f3be9355a5d07c7c263b484f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*Ty5gUmwWWMKY4sZ4i3yeeA.png"/></div></figure><p id="b7d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！</p><h1 id="ccb5" class="mc md it bd me mf nm mh mi mj nn ml mm jz no ka mo kc np kd mq kf nq kg ms mt bi translated">后续步骤</h1><p id="f57b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您刚刚使用 5 个简单的步骤构建并实现了一个预测模型。这是否意味着你成为了预测大师？不，但是你从头到尾都知道模型的整体结构，并且能够用不同的数据集、不同的参数值等来处理它。</p><p id="8688" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像我一开始说的，你没有造出一辆法拉利，但是你造出了一辆可以带到杂货店的车！</p><p id="2d10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以通过<a class="ae ky" href="https://twitter.com/DataEnthus" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae ky" href="https://www.linkedin.com/in/mab-alam/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p></div></div>    
</body>
</html>