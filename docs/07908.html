<html>
<head>
<title>Understanding the ROC curve in three visual steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过三个可视化步骤理解 ROC 曲线</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understanding-the-roc-curve-in-three-visual-steps-795b1399481c?source=collection_archive---------2-----------------------#2020-06-12">https://towardsdatascience.com/understanding-the-roc-curve-in-three-visual-steps-795b1399481c?source=collection_archive---------2-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2403" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在数据科学中，我花了更长时间才理解的一个概念是受试者工作特征(ROC)曲线。这是您的分类模型工作情况的直观表示。</p><p id="5503" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇博客中，我想解释 ROC 曲线是如何通过三个可视化步骤从零开始构建的。</p><h1 id="480e" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">步骤 1:获取分类模型预测</h1><p id="ee78" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">当我们训练一个分类模型的时候，我们得到了得到一个结果的概率。在这种情况下，我们的例子将是<em class="lo">偿还贷款的可能性</em>。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/bfa6de01c525183542931b7619282d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kfe6EfQGrV2L_dObmNhpUA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">图 1:分类模型示例</p></figure><p id="802e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">概率通常在 0 到 1 之间。价值越高，这个人偿还贷款的可能性就越大。</p><p id="a72a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是找到一个阈值，将概率分类为“<em class="lo">将偿还</em>或“<em class="lo">不会偿还</em>”。</p><p id="0c78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在图 1 的例子中，我们选择了 0.35 处的<em class="lo">阈值:</em></p><ul class=""><li id="2383" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">所有达到或超过此阈值的预测都被归类为<em class="lo">“将偿还”</em></li><li id="141f" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">所有低于此阈值的预测都被归类为<em class="lo">“不会偿还”</em></li></ul><p id="a02e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们看看这些预测中哪些是正确分类的，哪些是错误分类的。有了这些信息，我们就可以建立一个混淆矩阵。</p><p id="44cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有实际阳性，那些<em class="lo">确实偿还的，</em>是蓝点。</p><ul class=""><li id="aa30" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">如果他们被归类为<em class="lo">【将偿还】</em>，我们就有了真正的积极(TP)</li><li id="7d6f" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果他们被归类为<em class="lo">“不会偿还”</em>，我们就有一个假阴性(FN)</li></ul><p id="5805" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有实际负面，那些<em class="lo">没还的，</em>就是红点。</p><ul class=""><li id="c6e4" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">如果他们被归类为<em class="lo">【不会偿还】</em>，我们就真的否定了(TN)</li><li id="9742" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">如果它们被归类为<em class="lo">【将偿还】</em>，我们就有一个误报(FP)</li></ul><p id="bb64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在图 2 中，我们可以看到一个总结:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mt"><img src="../Images/0d1a19b0b253b42fefb6042bd2dc49a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2WjRy6UolGW0xkb5Hm9DA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">图 2:混淆矩阵</p></figure><h1 id="be48" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第二步:计算真阳性率和假阳性率</h1><p id="23e8" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">到目前为止，我们已经对所有的预测进行了分类，我们知道这些分类是否正确。这样，我们将计算接下来的两个指标:</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/413325e4e596f0038f74a90a75447fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*7_2ai1_ICde2nq83ksvZIg.png"/></div><p class="mb mc gj gh gi md me bd b be z dk translated">图 TPR 和 FPR 的计算</p></figure><ul class=""><li id="8768" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">真实阳性率(TPR): <em class="lo">在所有过去“确实还款”的人中，我们正确分类的百分比是多少</em></li><li id="7384" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">假阳性率(FPR): <em class="lo">在所有过去“没有还款”的人中，我们漏分了百分之几</em></li></ul><p id="58ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以在图 3 中看到这些计算的公式。</p><p id="8823" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面，在图 4 的第二个图中，我们可以看到阈值为 0.35 的原始示例。此时，我们</p><ul class=""><li id="5763" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">90%的阳性分类正确，那些<em class="lo">“已偿还”</em> (TPR)</li><li id="b902" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">漏分类 40%的所有否定，那些<em class="lo">“没还钱”</em> (FPR)</li></ul><p id="f786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以注意到 TPR 和 FPR 的结果随着阈值变大而降低。如果我们看第一个，阈值是 0:</p><ul class=""><li id="22ba" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">所有阳性被正确分类，因此 TPR = 100%</li><li id="32fb" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">所有的阴性都被错误分类，因此 FPR = 100%</li></ul><p id="f75e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在最后一个图表示例中，阈值为 1:</p><ul class=""><li id="4298" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">所有阳性被错误分类，因此 TPR = 0%</li><li id="c541" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">所有阴性都被正确分类，因此 FPR = 0%</li></ul><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mv"><img src="../Images/4940785aac48aedb4bee1ee480614063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQ-1ceyX80EE0a_s3SwvgQ.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">图 4:不同临界值的 FPR 和 TPR 结果</p></figure><blockquote class="mw mx my"><p id="662d" class="jn jo lo jp b jq jr js jt ju jv jw jx mz jz ka kb na kd ke kf nb kh ki kj kk ij bi translated">总的来说，我们可以看到这是一个权衡。随着我们提高阈值，我们会更好地分类负面信息，但这是以错误分类更多正面信息为代价的</p></blockquote><h1 id="03aa" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">第三步:为每个截止点绘制 TPR 和 FPR</h1><p id="a2ec" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">为了绘制 ROC 曲线，我们需要计算许多不同阈值<em class="lo">的 TPR 和 FPR(这一步在所有相关库中都被收录为</em> <code class="fe nc nd ne nf b"><em class="lo">scikit-learn</em></code> <em class="lo">)。</em></p><p id="b850" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于每个阈值，我们在 x 轴上绘制 FPR 值，在 y 轴上绘制 TPR 值。然后我们用一条线把这些点连接起来。<em class="lo">就是这样！</em></p><p id="7657" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面的图 5 中，我们可以看到 ROC 曲线的每个点是如何代表一个分类在给定临界值的 FPR 和 TRP 的。</p><p id="423d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，阈值为 1 时，第一个点位于(0，0)，阈值为 0 时，最后一个点位于(1，1)。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ng"><img src="../Images/2d7c94df53bafe603d44074bc1f51ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNtuQziwUKkGUxhG0Go5kA.png"/></div></div><p class="mb mc gj gh gi md me bd b be z dk translated">图 5: ROC 曲线示例</p></figure><p id="7655" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">线下覆盖的面积称为<em class="lo">“曲线下面积(AUC)”</em>。这用于评估分类模型的性能。AUC 越高，模型就越能区分不同的类别。</p><p id="77f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着在理想情况下，我们希望看到我们的线覆盖图形的大部分左上角，以获得更高的 AUC。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="c4d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你看完🎉</p><p id="b026" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望你觉得这个博客有用！请在下面留下您的评论和反馈👇</p></div></div>    
</body>
</html>