<html>
<head>
<title>Are series getting worse over time?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系列是否随着时间的推移越来越差？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/are-series-getting-worse-over-time-b81886c376d1?source=collection_archive---------53-----------------------#2020-05-04">https://towardsdatascience.com/are-series-getting-worse-over-time-b81886c376d1?source=collection_archive---------53-----------------------#2020-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="10fa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用 BeautifulSoup 和 Seaborn 可视化来抓取 IMDb 评分</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/28d7e1c513509a043a41bf9dc059aa39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WnTb4u8abegfaRIPoRoj0w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">杰瑞米·雅普在<a class="ae ky" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="24eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有没有过这样的感觉，随着时间的推移，你最喜欢的电视剧质量下降了？你不再像以前那样着迷了。是的…我有这种感觉。😐</p><p id="d518" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我通过检查<strong class="lb iu"> IMDb </strong>的分数来分析其他观众是否有同样的印象。IMDb 是一个关于连续剧、电影和视频的在线数据库。数据库中包含的所有剧集都有一个剧集指南，其中提供了每集的相关信息(标题、收视率、上映日期和情节)。</p><p id="cdd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了执行这一分析，首先，我们将使用<strong class="lb iu"> BeautifulSoup </strong>提取每集的收视率，并将它们存储在<strong class="lb iu"> Pandas </strong>数据帧中。然后，我们将使用<strong class="lb iu"> Seaborn </strong>库用<strong class="lb iu">热图</strong>可视化结果。</p><p id="f94c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您对用于从<strong class="lb iu"> IMDb 网页</strong>中提取费率以及生成<strong class="lb iu">热图</strong>的代码感兴趣，请阅读到最后，因为我们首先提供结果，然后解释我们如何获得它们！那么…让我们开始吧，⭐️</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="dd25" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">据 IMDb 用户称，质量随着时间的推移而下降</h1><p id="7e73" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在很多情况下，我有一种感觉，一个系列花费了太多的时间。成功的剧集通常会有很多季，有重复的风险。接下来，我们分析了 5 个随时间推移质量逐渐下降或在最后一季急剧下降的系列。</p><h1 id="48c6" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">越狱</h1><p id="1b90" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">《越狱》是一部 2005 年上映的美剧。这部电视剧讲述了一个杰出的结构工程师迈克尔·斯科菲尔德制定计划帮助他的兄弟林肯·巴罗斯越狱的故事。林肯因被指控杀害美国副总统的兄弟而被监禁并被判处死刑。</p><p id="94b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的<strong class="lb iu">热图</strong>显示了每一集的评分。正如你所观察到的，<strong class="lb iu">前两季</strong>的平均分数比其他的都要高。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/1fce85b783630c933646bbab0c9653c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UrAIYm-EBtA1SPBVsIRNUA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">监狱破裂</p></figure><h1 id="6673" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">行尸走肉</h1><p id="d479" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">《行尸走肉》是一部于 2010 年在 AMC<strong class="lb iu">频道</strong>播出的美剧。该系列呈现了一个后世界末日的世界，一群幸存者试图在僵尸的不断攻击下生存，同时面临与其他人类幸存者的冲突。我们可以观察到，分数随着时间的推移逐渐降低。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/e5b1699945b6ddfcfd2ad12eb73a8968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymddCT4tl3VYJ4rypB2p3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">行尸走肉</p></figure><h1 id="ebd9" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">金钱抢劫</h1><p id="c1ac" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">金钱大劫案</strong>是一部西班牙电视剧，最初于 2017 年在 Antena 3 播出。在被<strong class="lb iu">网飞</strong>收购后，<strong class="lb iu">金钱抢劫</strong>已经成为一个世界性的现象。该系列讲述了由“<strong class="lb iu">El professor</strong>”组织的<strong class="lb iu">皇家铸币厂劫案</strong>的故事。在计划了多年的抢劫后，El Profesor 招募了八名以城市命名的劫匪(东京、内罗毕、里约、柏林、莫斯科、丹佛、奥尔索和赫尔辛基)来执行他的总计划:印制 24 亿欧元并成功逃离铸币厂。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0e3b13fb2b367eae01b5f5f53bedc601.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*yWLK06T6SdFqJGg6WDMgtg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">金钱抢劫</p></figure><p id="8e7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上图，上一季很多集的评分大幅下降(1 分左右)；然而，它们在赛季结束时增加(第 7 和第 8 集)。</p><p id="c24a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不得不承认<strong class="lb iu">金钱大劫案</strong>是我最喜欢的❤️系列之一</p><h1 id="2067" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">《权力的游戏》</h1><p id="2be2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">权力的游戏</strong>是一部于 2017 年在<strong class="lb iu"> HBO </strong>播出的美剧，改编自<strong class="lb iu">乔治·r·r·马丁</strong>写的一系列奇幻小说。该系列讲述了王朝之间为争夺铁王座而发生冲突和结盟的故事。</p><p id="3f99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在下面观察到，剧集的评分在所有季节都很高，在最后一季出现了大幅下降。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/54ef7f42cfd559179448ed633b396764.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*igTGyZfpPRCnqqhlvNdKbA.png"/></div></figure><h1 id="07cc" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">《黑镜》</h1><p id="7ba8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">黑镜</strong>是一部<strong class="lb iu">英国</strong>反乌托邦电视剧，于 2011 年上映。该系列批评了现代社会，尤其是对技术的不当使用。所有的情节都是独立的，并呈现了不久的将来，科技扮演着重要但也有害的角色。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f93f1fe2fb3c12f8ab13b4b7553e3fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*nwGmYYC-fUX3HOGKwuMoTQ.png"/></div></figure><p id="a7ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上图所示，我们还可以观察到上个赛季的得分有所下降。</p><h1 id="aaa8" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">其他系列</h1><p id="fd1d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如<strong class="lb iu">纸牌屋</strong>、<strong class="lb iu">维京人</strong>、<strong class="lb iu">绯闻少女</strong>、<strong class="lb iu">罪人</strong>等系列，根据<strong class="lb iu"> IMDb </strong>用户的说法，也显示出质量随着时间的推移而下降。但是，有没有一个系列能保持它们的质量？答案是肯定的！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="918f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">根据 IMDb 用户的意见，随着时间的推移，质量保持不变</h1><p id="df7b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">虽然随着时间的推移，许多系列会失去质量，但也有一些系列能够在整个季节保持质量。让我们看一些例子。</p><h1 id="7b68" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated"><strong class="ak">绝命毒师</strong></h1><p id="f25c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">绝命毒师</strong>刚刚好。所有的部分都完美地组合在一起的拼图。什么都不缺，什么都不多余。不用说，<strong class="lb iu">绝命毒师</strong>是我最喜欢的系列！💚</p><p id="e29f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">《T4》系列于 2008 年在 AMC 电视台<strong class="lb iu">播出，讲述了<strong class="lb iu">沃尔特·怀特</strong>的故事，他是一名高中化学老师，在被诊断患有无法手术的肺癌后，开始生产冰毒以保证家庭的经济前景。</strong></p><p id="f96a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下图所示，该系列甚至<strong class="lb iu">随着时间的推移而提高质量</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/e395314e797748029c7b1ce2c83d9bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGd4x4sZy96l_bllkgoveQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">《绝命毒师》</p></figure><p id="2893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我完全同意<strong class="lb iu"> IMDb </strong>的用户。第四季的最后一章简直完美。</p><h1 id="1078" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">老友记</h1><p id="e0e3" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">老友记</strong>是 1994 年在<strong class="lb iu"> NBC </strong>播出的一部<strong class="lb iu">美国</strong>连续剧。这部电视剧讲述了住在纽约的六个朋友(瑞秋、莫妮卡、菲比、乔伊、钱德和罗斯)的故事。</p><p id="b406" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于《老友记》的成功，经过多次薪资谈判，剧组在第九季和第十季每集获得了 100 万美元的报酬！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/424afc43f0d349a11ef9388bc17d0fda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKvcAUq-QeFUKIoAcFtyuQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">老友记</p></figure><p id="e334" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，我们观察到各集之间分数的差异；然而，没有明显下降的质量在整个季节。</p><h1 id="6af1" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">如何逃脱谋杀</h1><p id="d06f" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">如何逍遥法外</strong>是 2017 年在<em class="nl"> ABC </em>上发布的一部<strong class="lb iu">美国</strong>系列。这部连续剧讲述了安娜莉丝·基廷的故事，她是米德尔顿大学的法学教授，也是一名成功的律师。她和她的五个学生卷入了安娜莉丝丈夫萨姆·基廷的谋杀案。</p><p id="7ba9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种特殊情况下，我们无法理解质量随时间的下降。然而，我们可以注意到，这一季的最后几章比第一章评价更高。我们几乎可以在所有系列中观察到这种趋势！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/353cd27872a1f23f667cb6eb514d4035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*krrF9ihmCxQrlqqiT8t8zA.png"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="1a9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，是时候让你自己的形象化了！</p><h1 id="ed70" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">密码</h1><p id="2f57" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们介绍本文中使用的第三方库。由于这些库不是<strong class="lb iu"> Python 标准库</strong>的一部分，我们需要单独安装它们。这可以通过使用<strong class="lb iu"> pip </strong>组件轻松实现。在计算机上执行代码之前，请验证是否安装了所有库。</p><p id="8ab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们提供用于从<strong class="lb iu"> IMDb 网页</strong>抓取数据并生成<strong class="lb iu">热图</strong>的代码，这样您就可以轻松地制作自己的可视化效果了！</p><h1 id="74ab" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">图书馆</h1><h2 id="b0ac" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">请求</h2><p id="f659" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">请求</strong> </a>是一个第三方库，允许你使用<strong class="lb iu"> Python </strong>发送<strong class="lb iu"> HTTP </strong>请求。在本文中，我们将只使用<strong class="lb iu">请求库</strong>来获取一个网页的<strong class="lb iu"> HTML </strong>代码。</p><h2 id="955a" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">美味的汤</h2><p id="985d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">当执行数据分析时，我们并不总是能够下载<strong class="lb iu"> csv 格式</strong>的数据，或者通过<strong class="lb iu">应用编程接口</strong> (API)访问数据。在某些情况下，我们必须直接从<strong class="lb iu">网页</strong>获取数据。这时候<strong class="lb iu">美汤</strong>就派上用场了。</p><p id="b184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">美汤</strong> </a>是一个<strong class="lb iu"> Python </strong>库，用于从<strong class="lb iu"> HTML </strong>和<strong class="lb iu"> XML </strong>文档中提取数据，有很多有用的功能可以从网页中抓取信息(例如从标签或图片中提取超链接、文本)。</p><h2 id="3296" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">熊猫</h2><p id="cef4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><a class="ae ky" href="https://pandas.pydata.org/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Pandas </strong> </a>是一个<strong class="lb iu"> Python </strong>开源库，用于<strong class="lb iu">数据科学</strong>，允许我们轻松处理结构化数据，如<strong class="lb iu"> csv 文件</strong>、<strong class="lb iu"> SQL 表</strong>或<strong class="lb iu"> Excel 电子表格</strong>。它提供了以不同格式读写数据、执行探索性分析和数据清理的工具。</p><h2 id="9a9d" class="nn md it bd me no np dn mi nq nr dp mm li ns nt mo lm nu nv mq lq nw nx ms ny bi translated">海生的</h2><p id="7360" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu"> Seaborn </strong>是基于<strong class="lb iu"> Matplotlib </strong>的<strong class="lb iu"> Python </strong>数据可视化库。与<strong class="lb iu"> Matplotlib </strong>、<strong class="lb iu"> Seaborn </strong>相比，它允许您使用更少的代码行来绘制图表，并提供更复杂的可视化工具，如<strong class="lb iu">热图</strong>、<strong class="lb iu">盒图</strong>和<strong class="lb iu">小提琴图</strong>。此外，可视化效果看起来更好！❤️</p><h1 id="5f5e" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">美声网刮</h1><p id="3714" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了从 IMDb 收集数据，我们创建了一个函数(<strong class="lb iu">剧集 _ 比率)</strong>，该函数接受一个剧集(剧集指南)的<strong class="lb iu">网页</strong>作为输入，返回一个<strong class="lb iu">数据帧</strong>，其中<strong class="lb iu">行</strong>表示<strong class="lb iu">季</strong>，而<strong class="lb iu">列</strong>表示<strong class="lb iu">集</strong>，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">剧集 _ 费率功能</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/e19a81a3b480f27f4220bf246a36bfc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TZEOdBsJoUDR6WJoZ6OiGw.gif"/></div></div></figure><p id="90a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一步一步地理解代码👌</p><p id="fb86" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.我们使用<strong class="lb iu">请求模块</strong>以字符串形式获取网页的<strong class="lb iu"> HTML </strong>代码。首先，我们使用<strong class="lb iu">向指定的<strong class="lb iu"> url </strong>发送一个<strong class="lb iu"> GET 请求</strong>。get(url) </strong>方法。然后，我们使用<strong class="lb iu">获取页面的<strong class="lb iu"> HTML </strong>文本。文本</strong>属性<strong class="lb iu">属性</strong>。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="5fbd" class="nn md it od b gy oh oi l oj ok"># obtain the html code as a string <br/> response = requests.get(url_serie + url_season)<br/> html = response.text</span></pre><p id="8dbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以观察到，<strong class="lb iu">网址</strong>由两部分组成:<strong class="lb iu">网址 _ 系列</strong>和<strong class="lb iu">网址 _ 季节</strong>。<strong class="lb iu"> Url_serie </strong>是函数(<strong class="lb iu">剧集 _ 收视率)</strong>的输入，在<strong class="lb iu"> url_season </strong>时保持不变(例如？季节=1，？季节=2，…)随着我们选择不同的季节而变化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/d92472d0fec80e746a12963486c83406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wRJw4JWmxKta08P9LWYeoQ.gif"/></div></div></figure><p id="0e8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.我们将字符串<strong class="lb iu"> html </strong>传递给<strong class="lb iu"> BeautifulSoup </strong>构造函数，获得一个<strong class="lb iu"> BeautifulSoup </strong>类型的对象。现在，我们可以使用<strong class="lb iu">美丽的汤</strong>中可用的方法轻松地从该对象中提取信息。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="518b" class="nn md it od b gy oh oi l oj ok"># create a BeautifulSoup object<br/> soup = bs4.BeautifulSoup(html, “html.parser”)</span></pre><p id="9d06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.接下来，我们用<strong class="lb iu"> Chrome 开发工具</strong>探索<strong class="lb iu"> HTML </strong>代码。<strong class="lb iu"> Chrome Dev Tools </strong>是一套直接内置于谷歌 Chrome 的网络开发工具，允许你轻松检查页面的<strong class="lb iu"> HTML </strong>代码。我们可以通过点击<strong class="lb iu"> Ctr + Shift + I </strong>或者选择<strong class="lb iu">更多工具&gt;开发者工具</strong>来轻松访问<strong class="lb iu"> Chrome 开发工具</strong>。</p><p id="e957" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在元素选项卡中，我们可以检查和编辑页面的<strong class="lb iu"> HTML </strong>和<strong class="lb iu"> CSS </strong>。要显示某个元素的<strong class="lb iu"> HTML </strong>代码(例如，事件率)，您可以点击检查元素按钮(带箭头的方块)并在浏览器中选择该项目，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/1dd81118834804a8b2192c0c8dd5e98a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*h0lTaxbYeeH-aUDuLE15Jw.gif"/></div></div></figure><p id="0bf0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所观察到的，感兴趣的元素(剧集比率)位于具有<strong class="lb iu">类属性</strong>(“IPL-rating-star _ _ rating”)的<strong class="lb iu"> span 标签</strong>内。这个<strong class="lb iu"> span 标签</strong>在一个<strong class="lb iu"> division 标签</strong>内，带有一个<strong class="lb iu"> class 属性</strong>(“IPL-rating-star small”)。</p><p id="3c14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用这种方法。<strong class="lb iu"> find_all() </strong>获取所有具有<strong class="lb iu">类属性</strong>(“IPL-rating-star small”)的标签。这个函数返回一个<strong class="lb iu"> bs4.element.ResultSet </strong>对象。然后，我们遍历这个对象(division 标签)，使用<strong class="lb iu">访问包含分数的 span 标签(“ipl-rating-star__rating”)。find() </strong>方法。为了获得标签之间的文本，我们使用了<strong class="lb iu">。文本属性</strong>如下。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="3ae4" class="nn md it od b gy oh oi l oj ok">rates_season = {}<br/> # we obtain all division tags with the class attribute “ipl-rating-star small”<br/> division_tags = soup.find_all(class_=”ipl-rating-star small”)<br/> <br/> # we loop through the tags and extract the scores<br/> # we create a dictionary with the scores<br/> for index, tag in enumerate(division_tags):<br/>     rate = tag.find(class_=”ipl-rating-star__rating”).text<br/>     episode = ‘Episode_’ + str(index + 1)<br/>     # we insert the score in the dictionary<br/>     rates_season[episode] = float(rate)<br/> <br/> # we append the dictionary to a list<br/> rates_all.append(rates_season)</span></pre><p id="ddc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上图所示，我们将分数插入到一个<strong class="lb iu">字典</strong>中，作为<strong class="lb iu">键</strong>的剧集编号和<strong class="lb iu">值</strong>的剧集分数。最后，我们将这本词典附加到一个列表中。</p><p id="db1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.一旦我们收集了一个赛季的所有分数，我们必须访问下一个赛季的<strong class="lb iu"> url </strong>来继续收集分数。首先，我们检查另一季是否可用(<strong class="lb iu">anchor tag</strong>—id = " load _ next _ 剧集")。如果是这样，我们使用。<strong class="lb iu"> get() </strong>方法。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="b586" class="nn md it od b gy oh oi l oj ok"># get next season anchor tag<br/> next_season = soup.find(“a”, id=”load_next_episodes”)<br/> # if next_season equal to None break the loop<br/> if not next_season:<br/>  break<br/> # if next_season is not equal to None, we access the url <br/> url_season = next_season.get(‘href’)</span></pre><p id="255d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上图所示，如果没有 id="load_next_episodes "的<strong class="lb iu">主播标签</strong>，意味着没有另一季可用，则<strong class="lb iu"> while 循环</strong>终止。</p><p id="f2e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.最后，我们获得一个字典列表，其中每个字典包含一个赛季的得分。我们使用这个<strong class="lb iu">字典列表</strong>创建一个<strong class="lb iu">熊猫数据帧</strong>，如下所示:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="1a7e" class="nn md it od b gy oh oi l oj ok">df = pd.DataFrame(rates_all, index=list(map(lambda x: ‘Season_’ + str(x+1), range(num_season))))</span></pre><p id="f047" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧！我们获得一个<strong class="lb iu">数据帧</strong>，只提供一个<strong class="lb iu">网页</strong>💪接下来，我们使用这个<strong class="lb iu">数据帧</strong>使用<strong class="lb iu"> Seaborn </strong>创建一个<strong class="lb iu">热图</strong>。</p><h1 id="2e64" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">Seaborn 可视化</h1><p id="c798" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">热图</strong>是一种数据可视化技术，其中每个数据点的值用颜色(色调或强度的变化)表示。我们可以使用<strong class="lb iu"> seaborn.heatmap() </strong>函数轻松创建一个带有<strong class="lb iu"> Seaborn </strong>的热图。</p><p id="6be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如下所示，我们创建了一个函数<strong class="lb iu">网页到热图</strong>，它接受剧集(剧集指南)的<strong class="lb iu">网页</strong>、图像的颜色图以及标题作为输入，返回热图可视化。正如您所看到的，我们使用函数<strong class="lb iu"> episodes_rates </strong>返回的数据帧作为<strong class="lb iu"> seaborn.heatmap() </strong>函数的输入。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网页热图</p></figure><p id="de34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们选择一个系列，并可视化其分数！</p><p id="d101" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们转到一个系列的剧集指南，我们复制 url 直到单词 episode，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/36ef79082dbf2ae60d90e87ce305b60c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HIjqcoyns0ANm5Bq82S11g.gif"/></div></div></figure><p id="d93e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们选择一个<strong class="lb iu">色图</strong>和一个<strong class="lb iu">标题</strong>用于可视化。最后，我们用<strong class="lb iu">网页热图</strong>函数创建了<strong class="lb iu">热图</strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/990c6cbd664b7b548b361e7daa0c9053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*kns4qZRiqRIVuPJpSF3QQA.png"/></div></div></figure><p id="2217" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，《广告狂人》随着时间的推移质量不断提高！此外，这一季的最后几章比第一季评价更高。</p><p id="30e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，是时候让你自己的形象化了！</p><p id="19cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阿曼达💜</p></div></div>    
</body>
</html>