<html>
<head>
<title>Boost Your Efficiency with these 6 Numpy Tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这 6 个小窍门提高你的效率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/boost-your-efficiency-with-these-6-numpy-tricks-29ca2fe81ecd?source=collection_archive---------23-----------------------#2020-03-06">https://towardsdatascience.com/boost-your-efficiency-with-these-6-numpy-tricks-29ca2fe81ecd?source=collection_archive---------23-----------------------#2020-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="523d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">并控制您的阵列</h2></div><h1 id="7d40" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="1f6b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，当我向我的朋友展示我使用的一些数字方法时，他们会发现它们很有帮助。所以我决定分享这些数字方法(或技巧),希望你也会发现它们很有帮助。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/81636a5c773e60713e230b352e6dc3e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0I-q2S_RFNHrYGQD"/></div></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">照片由<a class="ae mm" href="https://unsplash.com/@popnzebra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Pop &amp;斑马</a>在<a class="ae mm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="f4e2" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">从导入 Numpy 开始</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="b387" class="mx kj it mt b gy my mz l na nb">import numpy as np</span></pre><h1 id="3f01" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">面具</h1><p id="d5b7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设我们有一个数组，我们想在这个数组中选择一个特定的元素:0，2，并删除其他元素。有没有一种快速的方法可以选择这两个元素？口罩就可以了。</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="03a6" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A = np.array([0, 1, 2, 3, 4, 5])</span><span id="2977" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; mask = np.array([True, False, True, False, False, False])</span><span id="16a3" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A[mask]</span><span id="2a40" class="mx kj it mt b gy nc mz l na nb">array([0, 2])</span></pre><p id="21b6" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">我们可以看到，标记为<code class="fe nd ne nf mt b">False</code>的元素被删除，而标记为<code class="fe nd ne nf mt b">True</code>的元素被保留。</p><h1 id="8086" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">随意</h1><p id="57e3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">创建快速随机数组是测试代码的一种有用且快速的方法。但是有不同的<code class="fe nd ne nf mt b">np.random</code>方法，你可能想要选择一种而不是另一种来用于特定的用途。</p><p id="5c61" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">用 0 到 1 范围内的给定形状创建随机值</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="df4b" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; np.random.rand(10,2)</span><span id="9934" class="mx kj it mt b gy nc mz l na nb">array([[0.38850622, 0.31431385],        <br/>      [0.00815046, 0.13334727],        <br/>      [0.47482606, 0.92837947],        <br/>      [0.89809998, 0.38608183],        <br/>      [0.25831955, 0.56582022],        <br/>      [0.36625782, 0.52753452],        <br/>      [0.88125428, 0.71624809],        <br/>      [0.83642275, 0.79315897],        <br/>      [0.27361664, 0.8250761 ],        <br/>      [0.89894784, 0.95994016]])</span></pre><p id="2f35" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">或者创建特定范围内具有特定大小的随机整数数组</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="0fc4" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; np.random.randint(0,10,(3,3))</span><span id="01c8" class="mx kj it mt b gy nc mz l na nb">array([[0, 9, 6],        <br/>      [1, 7, 3],        <br/>      [6, 4, 7]])</span></pre><h1 id="e333" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">类形状阵列</h1><p id="812b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">你有没有发现自己创建了第二个数组，它的尺寸与第一个数组的尺寸相同，但元素不同？通常的做法是使用<code class="fe nd ne nf mt b">shape</code>来捕捉第一个数组的维度</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="eaf5" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A = np.random.randint(0,10,(3,3))</span><span id="a6c0" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A.shape</span><span id="a0df" class="mx kj it mt b gy nc mz l na nb">(3, 3)</span><span id="2485" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B = np.zeros(A.shape)</span><span id="9f75" class="mx kj it mt b gy nc mz l na nb">array([[0., 0., 0.],        <br/>       [0., 0., 0.],        <br/>       [0., 0., 0.]])</span></pre><p id="e184" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">这种方法没有错。但是有一个更快的方法来创建一个类似的数组，用 0 或 1 作为元素，用<code class="fe nd ne nf mt b">zeros_like</code>或<code class="fe nd ne nf mt b">ones_like</code></p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="eb03" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A = np.random.randint(0,10,(3,3))</span><span id="0845" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B = np.zeros_like(A)</span><span id="8fab" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B</span><span id="79ba" class="mx kj it mt b gy nc mz l na nb">array([[0., 0., 0.],        <br/>       [0., 0., 0.],        <br/>       [0., 0., 0.]])</span><span id="d738" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B = np.ones_like(A)</span><span id="6a57" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B</span><span id="1227" class="mx kj it mt b gy nc mz l na nb">array([[1, 1, 1],        <br/>       [1, 1, 1],        <br/>       [1, 1, 1]])</span></pre><p id="892e" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">正如我们所见，数组 B 与数组 A 的维数相同，但元素不同。</p><h1 id="a7bb" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">使再成形</h1><p id="bcd0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果我们想改变一个数组的维数，<code class="fe nd ne nf mt b">reshape</code>将是我们要使用的方法</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="352a" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A = np.arange(9)</span><span id="981d" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A</span><span id="3a8c" class="mx kj it mt b gy nc mz l na nb">array([0, 1, 2, 3, 4, 5, 6, 7, 8])</span><span id="0b6f" class="mx kj it mt b gy nc mz l na nb">#Reshape to 3x3 matrix</span><span id="d001" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A.reshape((3,3))</span><span id="e29e" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A</span><span id="0220" class="mx kj it mt b gy nc mz l na nb">array([[0, 1, 2],        <br/>       [3, 4, 5],        <br/>       [6, 7, 8]])</span></pre><p id="31f8" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">或者展平</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="9123" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A.reshape(-1)</span><span id="0009" class="mx kj it mt b gy nc mz l na nb">array([0, 1, 2, 3, 4, 5, 6, 7, 8])</span><span id="9eb0" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A.flatten()</span><span id="b1ed" class="mx kj it mt b gy nc mz l na nb">array([0, 1, 2, 3, 4, 5, 6, 7, 8])</span></pre><p id="8b7e" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated"><code class="fe nd ne nf mt b">reshape(-1)</code>或<code class="fe nd ne nf mt b">flatten()</code>将完成展平阵列的工作。</p><h1 id="05d3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">变换超出范围数组</h1><p id="e92d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设我们有一个范围从-3 到 6 的矩阵 B</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="7fc2" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; B = np.arange(-3,9).reshape((3,4))</span><span id="d68f" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; B</span><span id="9635" class="mx kj it mt b gy nc mz l na nb">array([[-3, -2, -1,  0],        <br/>       [ 1,  2,  3,  4],        <br/>       [ 5,  6,  7,  8]])</span></pre><p id="2416" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">但是我们只想保持元素的范围从 0 到 5，并将超出范围的元素转换为范围内的元素。我们如何做到这一点？这时我们需要<code class="fe nd ne nf mt b">np.clip</code></p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="4542" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; np.clip(B,0, 5)</span><span id="dfdb" class="mx kj it mt b gy nc mz l na nb">array([[0, 0, 0, 0],        <br/>       [1, 2, 3, 4],        <br/>       [5, 5, 5, 5]])</span></pre><p id="eea8" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">从变换后的矩阵可以看出，0 以下的元素变换为 0，5 以上的元素变换为 5，而范围内的元素保持不变。</p><h1 id="2641" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">洗牌</h1><p id="2c7c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">有时，我们希望使用随机数组，但我们的数组可能不是随机的。想想一副牌，当我们怀疑牌可能以特殊方式排序时，我们会怎么做？我们洗牌！</p><pre class="lx ly lz ma gt ms mt mu mv aw mw bi"><span id="0ad0" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; A = np.arange(9).reshape((3,3))</span><span id="989d" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A</span><span id="e71b" class="mx kj it mt b gy nc mz l na nb">array([[0, 1, 2],        <br/>       [3, 4, 5],        <br/>       [6, 7, 8]])</span><span id="6c6e" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; np.random.shuffle(A)</span><span id="1982" class="mx kj it mt b gy nc mz l na nb">&gt;&gt;&gt; A</span><span id="33d3" class="mx kj it mt b gy nc mz l na nb">array([[3, 4, 5],        <br/>       [0, 1, 2],        <br/>       [6, 7, 8]])</span></pre><p id="9360" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">正如我们所看到的，数组 A 中的元素与原始元素的位置不同。</p><h1 id="f0de" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="f20d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我希望这篇文章有助于为您的数据科学和编程实践添加一些新的 Numpy 技巧。拥有几个有用的方法来操作数组将极大地提高您的工作流程，并为您提供转换数组以满足特定需求的灵活性。</p><p id="c16f" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">在<a class="ae mm" href="https://github.com/khuyentran1401/Data-science/blob/master/python/Numpy_tricks.ipynb" rel="noopener ugc nofollow" target="_blank"> this Github repo </a>中，您可以随意使用本文的代码。</p><p id="3c40" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以通过<a class="ae mm" href="https://www.linkedin.com/in/khuyen-tran-1401/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae mm" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p><p id="427b" class="pw-post-body-paragraph la lb it lc b ld mn ju lf lg mo jx li lj mp ll lm ln mq lp lq lr mr lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在 Medium 上关注我，了解我的最新数据科学文章，例如:</p><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/dictionary-as-an-alternative-to-if-else-76fe57a1e4af"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">字典作为 If-Else 的替代</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">使用字典创建一个更清晰的 If-Else 函数代码</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx mg nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/how-to-create-fake-data-with-faker-a835e5b7a9d9"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">如何用 Faker 创建假数据</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">您可以收集数据或创建自己的数据</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx mg nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/python-tricks-for-keeping-track-of-your-data-aef3dc817a4e"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">跟踪数据的 Python 技巧</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">如何用列表、字典计数器和命名元组来跟踪信息</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx mg nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/timing-the-performance-to-choose-the-right-python-object-for-your-data-science-project-670db6f11b8e"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">高效 Python 代码的计时</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">如何比较列表、集合和其他方法的性能</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="oa l nu nv nw ns nx mg nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/cython-a-speed-up-tool-for-your-python-function-9bab64364bfd"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">cy thon——Python 函数的加速工具</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">当调整你的算法得到小的改进时，你可能想用 Cython 获得额外的速度，一个…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="ob l nu nv nw ns nx mg nj"/></div></div></a></div></div></div>    
</body>
</html>