<html>
<head>
<title>Pipenv to Heroku: Easy App Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pipenv到Heroku:轻松部署应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pipenv-to-heroku-easy-app-deployment-1c60b0e50996?source=collection_archive---------32-----------------------#2020-04-13">https://towardsdatascience.com/pipenv-to-heroku-easy-app-deployment-1c60b0e50996?source=collection_archive---------32-----------------------#2020-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="05e9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Pipenv将应用程序从GitHub部署到Heroku的指南</h2></div><p id="e62e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作者:<a class="ae le" href="https://www.linkedin.com/in/edkrueger/" rel="noopener ugc nofollow" target="_blank"> Edward Krueger </a>数据科学家兼讲师和<a class="ae le" href="https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/" rel="noopener ugc nofollow" target="_blank"> Douglas Franklin </a>助教兼技术作家。</p><p id="91ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lf">在本文中，我们将介绍如何使用Github资源库中的Pipfile部署应用程序，从而简化应用程序部署！</em></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/c76773f4ac2cc8d2b65eefc496002110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fUppC4iWteHpSHKrxWkkMg.jpeg"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@jesuskiteque?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jesus Kiteque </a>在<a class="ae le" href="https://unsplash.com/s/photos/development?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h2 id="d478" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">有关虚拟环境或Pipenv入门的更多信息，请查看本文！</h2><h1 id="90cb" class="mp lx it bd ly mq mr ms mb mt mu mv me jz mw ka mh kc mx kd mk kf my kg mn mz bi translated">数据科学和部署问题</h1><p id="e10e" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">数据科学家通常是跨学科的，并没有被教导如何与其他人合作并将项目推向生产。因此，通常缺乏部署、适当的环境和包管理技能。这给复制、部署和共享项目带来了困难。可再现的数据科学项目是那些允许其他人在您的分析基础上重新创建和构建，并重用和修改您的代码的项目。</p><p id="1602" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于缺乏对虚拟环境的了解或经验，新开发人员通常在系统级安装所有东西。用pip安装的软件包被放置在系统级。对每个项目都这样做的结果是一个臃肿且难以管理的单一Python环境。在这种环境下开发应用程序的人如何知道在requrements.txt中包含哪些依赖项？</p><p id="2cf5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据科学家需要能够将他们的模型投入生产。在模型开发过程中使用良好的实践大大简化了部署过程。即使是拥有独立部署或开发团队的数据科学家也可以从学习部署过程中受益。了解从开发到部署的完整工作流程的数据科学家可以交付一个更易于部署的产品。这种意识可以减轻开发人员和DevOps团队的压力。</p><p id="3ab5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有效的环境管理可以节省时间，并允许开发人员和数据科学家创建易于部署的独立软件产品。</p><h2 id="b202" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">Pipenv和Heroku</h2><p id="772b" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">Pipenv将软件包管理和虚拟环境控制结合到一个工具中，用于安装、删除、跟踪和记录您的依赖关系；以及创建、使用和管理您的虚拟环境。Pipenv本质上是将pip和virtualenv包装在一个产品中。</p><p id="9281" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Heroku提供许多软件服务产品。我们需要Heroku云平台服务来托管应用程序。不用担心；创建帐户和托管应用程序是免费的。云平台支持多种编程语言的应用，包括Python、Node.js、Scala、Ruby、Clojure、Java、PHP和Go。</p><h2 id="d2cc" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">应用部署</h2><p id="bdd2" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">一旦我们将一个带有Pipfile的应用程序推送到Github，Heroku允许我们快速地将一个应用程序从GitHub部署到Heroku。确保您的Pipfile在项目的根目录下。我们的应用程序使用SQLite数据库进行部署。</p><p id="5c2e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要对我们的应用程序项目文件进行一些修改，以便应用程序可以在Heroku上运行。</p><h2 id="c145" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">安装gunicorn</h2><p id="1c9f" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">Gunicorn是一个Python WSGI HTTP服务器，它将为Heroku上的Flask应用程序提供服务。通过运行下面的代码行，您将gunicorn添加到您的Pipfile中，这是在Heroku的容器中运行您的应用程序所需要的。</p><pre class="lh li lj lk gt nf ng nh ni aw nj bi"><span id="8b75" class="lw lx it ng b gy nk nl l nm nn">pipenv install gunicorn</span></pre><h2 id="dc5c" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">添加Procfile</h2><p id="a931" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">在项目根文件夹中创建一个<code class="fe no np nq ng b">Procfile</code>,并添加下面一行:</p><pre class="lh li lj lk gt nf ng nh ni aw nj bi"><span id="4248" class="lw lx it ng b gy nk nl l nm nn">web: gunicorn app:app</span></pre><p id="f3d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个<code class="fe no np nq ng b">app</code>代表运行您的应用程序的python文件的名称或者应用程序所在的模块的名称。第二个<code class="fe no np nq ng b">app</code>代表你的应用名称，即app.py，这个Procfile配合gunicorn和Heroku的Dynos，远程为你的应用服务。</p><h2 id="319f" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">部署</h2><p id="4b4d" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">一旦我们有我们的应用程序测试和工作在本地，我们把所有的代码推到主分支。然后在Heroku上，去部署一个新的app看看下面的页面。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nr"><img src="../Images/5e091f3bf30f3de32e6730e5f04ed0ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QB6948sQC0Gay2E5N9XAg.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">选择Github并搜索您的存储库</p></figure><p id="e839" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在Heroku上，选择GitHub并输入存储库的名称，然后点击search。一旦您的用户名/存储库出现，单击连接。选择所需的分支，然后单击部署。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ns"><img src="../Images/42ed924ce1c0e5796cddbfa02358509e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C602pi5UmqFgQLqL0x6wTw.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">选择主服务器并部署分支</p></figure><p id="1bfc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">构建日志将开始填充页面上的控制台。注意，Heroku首先查找requirements.txt文件，然后从Pipenv的Pipfile.lock安装依赖项。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nt"><img src="../Images/762eed8b5810e67e33f0a75af4bc5769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0mwQhR-KOAx04SLP1Ko-A.png"/></div></div></figure><p id="7732" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦从Pipfile.lock构建了您的环境，并且构建成功，您将会看到下面的消息。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nu"><img src="../Images/b9cc5bb65fd66512d59eadbab4d5cf2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7IhM4Y-0y_s_H5_dDng_A.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">成功的应用部署</p></figure><p id="f9fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该应用程序已成功部署！点击查看按钮，查看Heroku上部署的应用程序。</p><h2 id="3c21" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">自动部署</h2><p id="d6cb" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">我们可以启用自动部署，让Github master的更改在推送时显示在Heroku上。如果您使用这种方法，您将希望确保始终有一个工作的主分支。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nv"><img src="../Images/ac991872711bc597265ecaa63c5d73ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9xeUxuycVuenKzgs2VcLg.png"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">启用自动部署</p></figure><h2 id="6eee" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">结论</h2><p id="5db3" class="pw-post-body-paragraph ki kj it kk b kl na ju kn ko nb jx kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">对于希望在生产中部署、构建或使用代码的数据科学家和开发人员来说，实践良好的环境和包管理至关重要。当数据科学家和开发人员在其工作流程的上游使用这些开发技能时，可以帮助团队。</p><p id="7a68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了一个管理良好的Pipenv和Pipfile，Heroku的服务器可以用最少的故障排除来重建我们的应用程序。这使得我们可以在几分钟内将GitHub中的应用程序项目目录转移到一个已发布的应用程序中。</p><p id="06b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用Pipenv这样的环境和包管理器可以使包括部署在内的许多过程变得更加舒适和高效！有关虚拟环境或Pipenv入门的更多信息，请查看本文<a class="ae le" href="https://medium.com/@edkrueger_16881/virtual-environments-for-data-science-running-python-and-jupyter-with-pipenv-c6cb6c44a405#f91f-d040f09f69cf" rel="noopener">。我们希望本指南有所帮助。谢谢大家！</a></p></div></div>    
</body>
</html>