<html>
<head>
<title>Basic DateTime Operations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的基本日期时间操作</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/basic-datetime-operations-in-python-2d706be82c63?source=collection_archive---------8-----------------------#2020-01-02">https://towardsdatascience.com/basic-datetime-operations-in-python-2d706be82c63?source=collection_archive---------8-----------------------#2020-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/73e9af9f093d2be36ea5ba5b1977f82e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GRAb_zkTQUV8bRoVrLZbYg.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">布鲁克·拉克在<a class="ae kc" href="https://unsplash.com/s/photos/date-time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="79cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，处理包含日期和时间的数据可能是一项乏味的工作，谢天谢地，有这种内置的方式来帮助我们完成这项工作。Python 提供了一个<strong class="kf ir">日期时间</strong>模块，使我们能够以多种方式操作日期和时间。</p><p id="e09c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个模块中，我们需要查看五个主要的对象类，根据我们想要做的工作，我们最终会需要它们。之后，我们将讨论一些解释课程任务的例子。这些类别如下-</p><ol class=""><li id="509b" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">datetime.date :它允许我们在不干扰时间(月、日、年)的情况下操作日期</li><li id="2ad7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir"> datetime.time </strong>:它允许我们在不干扰日期(小时、分钟、秒、微秒)的情况下操作日期</li><li id="591b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir"> datetime.datetime </strong>:它允许我们操作日期和时间的组合(月、日、年、小时、秒、微秒)。</li><li id="027c" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir"> datetime.tzinfo </strong>:处理时区的抽象类。这些类型的对象是不可变的。例如，考虑不同的时区和/或夏令时。</li><li id="6444" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir"> datetime.timedelta </strong>:两个日期、时间或日期时间实例之差；该决议案</li></ol><h1 id="c3d3" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">创建日期时间对象</h1><p id="093d" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">由于<strong class="kf ir"> datetime </strong> includes 使我们能够处理日期和时间，因此，首先让我们看看这个对象的行为。<strong class="kf ir"> datetime </strong>既是一个模块，也是该模块中的一个类。我们将从<strong class="kf ir"> datetime </strong>模块中导入<strong class="kf ir"> datetime </strong>类，并打印当前的日期和时间以便仔细查看。我们可以使用<strong class="kf ir"> datetime </strong>的. now()函数来做到这一点。我们将打印我们的<strong class="kf ir">日期时间</strong>对象。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="28d7" class="nb lq iq mx b gy nc nd l ne nf"># import datetime class from datetime module<br/>from datetime import datetime<br/><br/># get today's date<br/>today = datetime.now()<br/>print(today)</span></pre><p id="59c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出如下所示:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/432918a42c9774afded57d74a27c95d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*Rf75ppHEB9ZduJUPq2sUMQ.png"/></div></figure><p id="6d80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们想看类型，我们可以写:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="c4f9" class="nb lq iq mx b gy nc nd l ne nf">print('Type :- ',type(today))</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/f1931b79084cfb0e36cd35c7ed8cdb2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*veXr2iGlEhWXl72txmfzgg.png"/></div></div></figure><p id="4710" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们从上面看到今天确实是一个 datetime 类的 datetime 对象。</p><p id="032c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面的例子我们可以了解到<strong class="kf ir">日期</strong>和<strong class="kf ir">时间</strong>对象应该如何工作。<strong class="kf ir">日期</strong>只适用于日期，不包括<strong class="kf ir">时间</strong>，反之亦然。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="0438" class="nb lq iq mx b gy nc nd l ne nf">dt_nw = datetime.now()<br/><br/># to get hour from datetime<br/>print('Hour: ', dt_nw.hour)<br/><br/># to get minute from datetime<br/>print('Minute: ', dt_nw.minute)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/e2c03e548773c2599ff95c0b9d436e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*Z83HI4GMZh7ifDI0mxYoyA.png"/></div></figure><p id="2430" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<strong class="kf ir"> datetime </strong>中，我们还可以使用它的。<strong class="kf ir"> weekday() </strong>起数字的作用。但是我们可以使用日历模块和一种叫做<strong class="kf ir">的方法将它转换成文本格式(即星期一、星期二、星期三……)。</strong>日 _ 名()。</p><p id="4be4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们将导入<strong class="kf ir">日历</strong>模块，然后找出月份和年份，并执行上述操作。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="fb7f" class="nb lq iq mx b gy nc nd l ne nf"># import calendar module<br/>import calendar<br/><br/>my_date= datetime.now()<br/># To get month from date<br/>print('Month: ', my_date.month) <br/><br/># To get month from year<br/>print('Year: ', my_date.year) <br/><br/># To get day of the month<br/>print('Day of Month:', my_date.day)<br/><br/># to get name of day(in number) from date<br/>print('Day of Week (number): ', my_date.weekday())<br/><br/># to get name of day from date<br/>print('Day of Week (name): ', calendar.day_name[my_date.weekday()])</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/57a8ed984bb3c06910b11752f91a40bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*jugSTBf5txPBpHVK8Zsd7A.png"/></div></figure><h1 id="1160" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">处理时区</h1><p id="1a67" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">现在我们需要了解两种<strong class="kf ir"> datetime </strong>对象；</p><ol class=""><li id="bba9" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">感知——感知对象具有处理模糊时间所需的知识，它包含时区和夏令时信息，因此它可以相对于其他感知对象定位自己。</li><li id="ffb3" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">天真——这个更容易处理。因为它不包含不同时区和夏令时的信息。操作仅仅依赖于程序。</li></ol><p id="2697" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于需要 aware 对象的程序，<strong class="kf ir"> datetime </strong>、<strong class="kf ir"> date </strong>和<strong class="kf ir"> time </strong>对象有一个可选的时区信息属性，<strong class="kf ir"> tzinfo </strong>。但是<strong class="kf ir"> tzinfo </strong>是一个抽象类。处理这个问题时，您必须决定到底需要哪些方法。因为这完全取决于对 aware <strong class="kf ir"> datetime </strong>对象的使用。</p><p id="74a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是处理时区通过<strong class="kf ir"> pytz </strong>模块变得很容易。它帮助我们处理跨时区转换，并处理使用该转换的地方的夏令时。让我们看看这个例子:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="1368" class="nb lq iq mx b gy nc nd l ne nf"># import timezone from pytz module<br/>from pytz import timezone<br/><br/># Create timezone UTC<br/>utc = timezone('UTC')<br/><br/># Localize date &amp; time<br/>loc = utc.localize(datetime(2020, 1, 1, 3, 50, 0))<br/>print(loc)<br/><br/># Convert localized date &amp; time into Asia/Dhaka timezone<br/>dhaka = timezone("Asia/Dhaka")<br/>print(loc.astimezone(dhaka))<br/><br/># Convert localized date &amp; time into Europe/Berlin timezone<br/>berlin = timezone('Europe/Berlin')<br/>print(loc.astimezone(berlin))</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/3af174043a3cc26fcfab13f101d4fb5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W95oL2OVwO8d1b-ijAfxLA.png"/></div></div></figure><p id="d186" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用了<strong class="kf ir"> localize() </strong>函数向<strong class="kf ir"> datetime </strong>对象添加时区位置。函数<strong class="kf ir"> astimezone() </strong>将现有的本地时区转换为任何其他指定的时区。</p><h1 id="1251" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">时间跨度和时差</h1><p id="46db" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">有时在一个程序中，我们可能需要指定剩余时间或时间跨度。在这种情况下，我们总是可以使用<strong class="kf ir">时间增量</strong>对象。我们可以利用这一点，通过对日期或时间进行加减来操纵它们。让我们看一些例子:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="db51" class="nb lq iq mx b gy nc nd l ne nf">#import timedelta<br/>from datetime import timedelta<br/>print(timedelta(days= 365, hours= 12, minutes= 30))</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/cc1e4bf1c1f0ca5f0bbb54cffbebc13c.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*J65_79WHAZg13GszGB14dQ.png"/></div></figure><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="8c25" class="nb lq iq mx b gy nc nd l ne nf"># get current time<br/>now = datetime.now()<br/>print ("Today's date &amp; time: ", str(now))<br/><br/>#add 365 days to current date<br/>future_date_after_one_year = now + timedelta(days = 365)<br/>print('Date &amp; time after one year: ', future_date_after_one_year)<br/><br/>#subtract 7 days from current date<br/>seven_days_ago = now - timedelta(days = 7)<br/>print('Date &amp; time seven days ago: ', seven_days_ago)<br/># print('seven_days_ago object type: ', type(seven_days_ago))</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/0fbfb0c7833108dedbaeb720b2c59c8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tYq3Ulo11KwAa2gpvQtjJQ.png"/></div></div></figure><p id="4436" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是我们如何处理<strong class="kf ir">时间增量</strong>对象。在大多数科学脚本/案例中，delta 总是意味着两个事物之间的差异。</p><h1 id="9507" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">strftime() &amp; strptime():日期格式</h1><p id="b78b" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated"><strong class="kf ir"> datetime </strong>包含两个方法，<strong class="kf ir"> strptime() </strong>和<strong class="kf ir"> strftime() </strong>，用于将对象从字符串转换为<strong class="kf ir"> datetime </strong>对象，反之亦然。<strong class="kf ir"> strptime( </strong>)可以读取带有日期和时间信息的字符串并将其转换为 datetime 对象，<strong class="kf ir"> strftime() </strong>将 datetime 对象转换回字符串。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="f981" class="nb lq iq mx b gy nc nd l ne nf"># import datetime<br/>from datetime import datetime<br/><br/>date_str = "2 january, 2020"<br/><br/># format date<br/>date_obj = datetime.strptime(date_str, "%d %B, %Y")<br/><br/>print("Today's date is: ", date_obj)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/6c9a36126bd440dc35b4875dfc6735b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*S1zBF6bKpBLrSj5ltAfplQ.png"/></div></figure><p id="bde9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看看<strong class="kf ir"> strftime() </strong>的用法:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="ccfe" class="nb lq iq mx b gy nc nd l ne nf"># current date and time<br/>now = datetime.now()<br/><br/># format time in HH:MM:SS<br/>time = now.strftime("%H:%M:%S")<br/>print("Time:", time)<br/><br/># format date<br/>date_time = now.strftime("%m/%d/%Y, %H:%M:%S")<br/>print("Date and Time:",date_time)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ed9667ae2167d1f3507f0dbc8efc2c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*3okObs5S4jgmsJ_RmqxBOQ.png"/></div></figure><h1 id="00f1" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">处理时间戳</h1><p id="74d0" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">在处理数据时，处理时间戳是非常常见的。也许你想以<a class="ae kc" href="https://en.wikipedia.org/wiki/Unix_time" rel="noopener ugc nofollow" target="_blank"> Unix 时间戳格式</a>存储你的数据。我们将使用<strong class="kf ir"> datetime </strong>的<strong class="kf ir"> timestamp() </strong>函数来完成这项工作。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="2968" class="nb lq iq mx b gy nc nd l ne nf"># get current date<br/>now = datetime.now()<br/><br/># convert current date into timestamp<br/>timestamp = datetime.timestamp(now)<br/><br/>print("Date and Time :", now)<br/>print("Timestamp:", timestamp)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/315651baa9ab94974bb9cdebdbe46854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*ksBJvhGvansbMZEL0x0dug.png"/></div></figure><p id="c8ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似地，我们可以从时间戳转换成日期和时间对象。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="03d6" class="nb lq iq mx b gy nc nd l ne nf">timestamp = 1577971124.673931<br/><br/>#convert timestamp to datetime object<br/>date_obj = datetime.fromtimestamp(timestamp)<br/><br/>print("Today's date &amp; time:", date_obj)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/f293dbd4e5a2ff9fe00d6bd3f43fb3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1ef1ry7l6SnX6hfGS39OQ.png"/></div></div></figure><h1 id="6633" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">熊猫日期时间对象</h1><p id="96f0" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">Pandas 是 python 中数据科学项目的主要成分，这是理所当然的。它使得处理日期和时间比其他任何方法都容易。</p><p id="f2b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<strong class="kf ir"> to_datetime() </strong>将日期和时间文本字符串转换成 pandas Datetime 对象要容易得多。</p><p id="4c35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个函数很擅长通过自动检测字符串的格式将字符串转换成 Python datetime 对象，而不需要我们使用 strftime 模式来定义它。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a3c9" class="nb lq iq mx b gy nc nd l ne nf"># import pandas module<br/>import pandas as pd<br/><br/># create date object using to_datetime() function<br/>date = pd.to_datetime("2nd of jan, 2020")<br/>print(date)</span></pre><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/512e1e82efda35f1659abb06712f4161.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*WBeRpTxYdHR4Tcl5o3uMow.png"/></div></figure><p id="9c2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有很多操作可以使用带有日期和时间数据的熊猫来完成。但这需要另一个自己的职位。然而，我希望这篇文章提供了关于我们可以用 datetime 模块和 pandas 进行的操作的初步概念。这里用到的所有代码都可以在我的 GitHub 账号<a class="ae kc" href="https://github.com/muniah" rel="noopener ugc nofollow" target="_blank">https://github.com/muniah</a>上找到。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="0c03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nz">原载于 2020 年 1 月 2 日 https://muniah.com</em><a class="ae kc" href="https://muniah.com/basic-datetime-operations-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="nz"/></a><em class="nz">。</em></p></div></div>    
</body>
</html>