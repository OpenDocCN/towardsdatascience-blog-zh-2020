<html>
<head>
<title>Do Not Use “+” to Join Strings in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要在 Python 中使用“+”来连接字符串</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/do-not-use-to-join-strings-in-python-f89908307273?source=collection_archive---------0-----------------------#2020-05-10">https://towardsdatascience.com/do-not-use-to-join-strings-in-python-f89908307273?source=collection_archive---------0-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c1d428bd6958c6566c6aae29fee1cdc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*asToUo6S3O5qTYl_u0GL2Q.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/tcausley-1584840/" rel="noopener ugc nofollow" target="_blank"> tcausley </a>在<a class="ae jg" href="https://pixabay.com/photos/rope-cleat-dock-knot-pier-mooring-1014799/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><div class=""/><div class=""><h2 id="f326" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">使用“+”和 join()方法在 Python 中连接字符串的方法比较。</h2></div><p id="51fd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我开始使用 Python 的时候，使用加号运算符<code class="fe lu lv lw lx b">+</code>来连接字符串是非常直观和容易出来的，很多编程语言都是这样做的比如 Java。</p><p id="4ddf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，很快我意识到许多开发人员似乎喜欢使用<code class="fe lu lv lw lx b">.join()</code>方法，而不是<code class="fe lu lv lw lx b">+</code>。在本文中，我将介绍这两种方法之间的区别以及为什么不应该使用<code class="fe lu lv lw lx b">+</code>。</p><h1 id="286e" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">开始</h1><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/111b200f34d37999489c17aafb68cb0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pKizmCUddXz9EqMN"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@dtopkin1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">戴恩·托普金</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0eea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一个初学者，或者刚刚从使用<code class="fe lu lv lw lx b">+</code>连接字符串的其他语言转换过来的人，编写这样的代码是非常容易的:</p><pre class="mr ms mt mu gt mv lx mw mx aw my bi"><span id="32ba" class="mz lz jj lx b gy na nb l nc nd">str1 = "I love "<br/>str2 = "Python."</span><span id="9f99" class="mz lz jj lx b gy ne nb l nc nd">print(str1 + str2)</span></pre><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/3727aca9c6edbedbea450fd377307499.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*J6qIGsaQpgawdsb9OM6ADw.png"/></div></figure><p id="63c1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着您越来越多地使用 Python，您可能会意识到其他人更喜欢像这样使用<code class="fe lu lv lw lx b">join()</code>方法:</p><pre class="mr ms mt mu gt mv lx mw mx aw my bi"><span id="68b0" class="mz lz jj lx b gy na nb l nc nd">str1 = "I love "<br/>str2 = "Python."</span><span id="976f" class="mz lz jj lx b gy ne nb l nc nd">print(''.join([str1, str2]))</span></pre><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/cd2ad689edb2acbc3c631e65d37a4060.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*JXxKY2htxHEhk529rGPZrQ.png"/></div></figure><p id="e9dc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">老实说，当我第一次看到上面的方法时，我认为这不直观，而且看起来有点难看。</p><h1 id="8ee2" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">连接多个字符串</h1><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/85f6a9533e2d47f9b6ef2561819393ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7w-8GibOb6Oi8MDg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@toboote?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Tim Boote </a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="52af" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，有一次我需要在一个列表中连接多个字符串。</p><pre class="mr ms mt mu gt mv lx mw mx aw my bi"><span id="9539" class="mz lz jj lx b gy na nb l nc nd">strs = ['Life', 'is', 'short,', 'I', 'use', 'Python']</span></pre><p id="5837" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最初，我是这样做的:</p><pre class="mr ms mt mu gt mv lx mw mx aw my bi"><span id="50bb" class="mz lz jj lx b gy na nb l nc nd">strs = ['Life', 'is', 'short,', 'I', 'use', 'Python']</span><span id="ee8e" class="mz lz jj lx b gy ne nb l nc nd">def join_strs(strs):<br/>    result = ''<br/>    for s in strs:<br/>        result += ' ' + s<br/>    return result[1:]</span><span id="fad7" class="mz lz jj lx b gy ne nb l nc nd">join_strs(strs)</span></pre><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/e3c699d9b10fa466ad911a15719295b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*2OvBvAUlqZH36NclkVdPbA.png"/></div></figure><p id="2800" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个例子中，我必须编写一个 for 循环来逐个连接字符串。此外，结果字符串需要修剪一个我在开始时添加的空格，因为所有的字符串都需要在前面添加一个空格，但不是第一个。您可能有其他解决方案，例如向 for 循环添加一个索引，这样索引= 0 处的字符串就不会添加这个空白。无论如何，你仍然需要这个 for 循环，并为空白做一些事情。</p><p id="d4bc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">之后，我想起我以前见过<code class="fe lu lv lw lx b">.join()</code>方法，也许这是我需要使用它的时候了！</p><pre class="mr ms mt mu gt mv lx mw mx aw my bi"><span id="bafc" class="mz lz jj lx b gy na nb l nc nd">def join_strs_better(strs):<br/>    return ' '.join(strs)</span><span id="4361" class="mz lz jj lx b gy ne nb l nc nd">join_strs_better(strs)</span></pre><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/fbad3ea280171efef7e7bacf4ded487e.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*jrWWtlEpmmJOOuYhGdr1yQ.png"/></div></figure><p id="33b2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">多简单啊！一行代码完成所有工作。因为<code class="fe lu lv lw lx b">.join()</code>方法是由一个字符串对象调用的，字符串对象将被用来连接列表中的每个字符串，所以你不需要担心开头的空格。</p><p id="6cd5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是等等，你真的认为这是我们需要使用<code class="fe lu lv lw lx b">join()</code>方法而不是<code class="fe lu lv lw lx b">+</code>的唯一原因吗？不，请阅读下一节。</p><h1 id="e2d8" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated"><code class="fe lu lv lw lx b">join()</code>方法背后的逻辑</h1><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/5a71902be9d4ce2135519fc46ab067e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iFwgWBFbe4xT3pW1"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">迈克尔·泽兹奇在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="4aa0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们比较这两种方法的性能。我们可以用《朱庇特笔记本》的神奇方法<code class="fe lu lv lw lx b">%timeit</code>来评价他们。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a5ff628a776e3af2129d84fd4660a475.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*Cvrt7DaWPHQV4fU7aR62og.png"/></div></figure><p id="cc59" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面显示的性能基于 100k 次试验，因此结果非常有把握且显而易见。使用<code class="fe lu lv lw lx b">join()</code>方法可以比使用<code class="fe lu lv lw lx b">+</code>连接列表中的字符串快 4 倍。</p><p id="2ebd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为什么？</p><p id="4c32" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我画的一个概念图，用来演示使用<code class="fe lu lv lw lx b">+</code>连接字符串的方法。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/eb16aaed5127d8a61a2a17b4be809392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILg5rZdQ3j4EM62TIhsIJg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用+运算符和 for-loop 连接列表中的字符串</p></figure><p id="1ab4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这显示了 for 循环和<code class="fe lu lv lw lx b">+</code>操作符的作用:</p><ol class=""><li id="d06b" class="nn no jj la b lb lc le lf lh np ll nq lp nr lt ns nt nu nv bi translated">对于每个循环，从列表中找到字符串</li><li id="f3a5" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">Python 执行器解释表达式<code class="fe lu lv lw lx b">result += ' ' + s</code>并为空白空间<code class="fe lu lv lw lx b">' '</code>申请内存地址。</li><li id="fa04" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">然后，执行程序意识到空白需要用一个字符串连接，所以它将为字符串<code class="fe lu lv lw lx b">s</code>申请内存地址，这是第一个循环的“生命”。</li><li id="923d" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">对于每个循环，执行器需要申请两次内存地址，一次是空白，另一次是字符串</li><li id="1723" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">内存分配有 12 倍</li></ol><p id="e447" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，对于<code class="fe lu lv lw lx b">join()</code>方法发生了什么？</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ob"><img src="../Images/43e66710f22ff9cfce2967fcaf55e066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cBow4wNdr7M-S6o0mwJTfQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">使用“join()”方法连接列表中的字符串</p></figure><ol class=""><li id="c8c2" class="nn no jj la b lb lc le lf lh np ll nq lp nr lt ns nt nu nv bi translated">执行程序将计算列表中有多少字符串。有 6 个。</li><li id="c482" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">这意味着用于连接列表中字符串的字符串需要重复 6–1 = 5 次。</li><li id="5aaa" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">它知道总共需要 11 个内存空间，所以所有这些都将立即应用并提前分配。</li><li id="2cdf" class="nn no jj la b lb nw le nx lh ny ll nz lp oa lt ns nt nu nv bi translated">按顺序排列字符串，返回结果。</li></ol><p id="7cc2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，显而易见，主要区别在于内存分配的次数是性能提高的主要原因。</p><p id="d3ca" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想象一下，使用<code class="fe lu lv lw lx b">join()</code>方法将 6 个字符串连接在一起已经快了 4 倍。如果我们要连接大量的字符串呢？这会产生更大的不同！</p><h1 id="1d15" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">摘要</h1><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/da1b3876746ae8a92f2fe88ba2b4d0d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-OVC-JtmzJWj_BFQ"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@liam_1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">利亚姆·布里斯</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="d251" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇短文中，我比较了在 Python 中连接字符串时<code class="fe lu lv lw lx b">+</code>操作符和<code class="fe lu lv lw lx b">join()</code>方法之间的区别。显然，<code class="fe lu lv lw lx b">join()</code>方法因其性能而更受青睐。</p><p id="251d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">学习一门编程语言通常是一条很长的曲线，但 Python 让它对于初学者来说相对较短，这绝对是很棒的。我们进了门之后，开始使用 Python，我们不应该止步于此，满足于我们能用 Python 做什么。通常情况下，高手和普通开发者的区别来自于细节方面的知识。</p><p id="87fb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们继续寻找更多关于 Python 的技巧，让自己更接近 Python 大师！</p><div class="is it gp gr iu od"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd jk gy z fp oi fr fs oj fu fw ji bi translated">阅读克里斯托弗·陶的每一个故事(以及媒体上成千上万的其他作家)</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ja od"/></div></div></a></div><p id="7b4a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">如果你觉得我的文章有帮助，请考虑加入中等会员来</strong> <a class="ae jg" href="https://medium.com/@qiuyujx/membership" rel="noopener"> <strong class="la jk">支持我和其他成千上万的作家！</strong> </a> <strong class="la jk">点击上面的链接。</strong></p></div></div>    
</body>
</html>