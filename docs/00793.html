<html>
<head>
<title>Web Analytics Data Warehouse: Google Analytics and Search</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络分析数据仓库:谷歌分析和搜索</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-analytics-data-warehouse-google-analytics-and-search-f2d244e110c9?source=collection_archive---------18-----------------------#2020-01-22">https://towardsdatascience.com/web-analytics-data-warehouse-google-analytics-and-search-f2d244e110c9?source=collection_archive---------18-----------------------#2020-01-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1e87d6d17a0ecca841179f81578bce62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3Jd0fjWA0T77UxY9ju0uw.png"/></div></div></figure><div class=""/><p id="0d20" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我们将看到如何创建一个数据仓库和一个依赖于 SEO(搜索引擎优化)的内容营销仪表板。它将利用和混合来自<a class="ae kz" href="https://analytics.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌分析</a>(跟踪你网站的流量)和<a class="ae kz" href="http://search.google.com/search-console" rel="noopener ugc nofollow" target="_blank">谷歌搜索控制台</a>(你的网站在谷歌搜索上的表现)的数据。</p><p id="9c59" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">结果将是<a class="ae kz" href="https://docs.google.com/spreadsheets/d/1AKg6_smd5c7lpXhjjHut5TEnUMoZI4TVmzTQk9wVkNw/edit?usp=sharing" rel="noopener ugc nofollow" target="_blank">这个 Google Sheet dashboard </a>(你可以点击链接或者看下面的截图)自动更新。这是来自我的博客<a class="ae kz" href="https://dataintoresults.com/" rel="noopener ugc nofollow" target="_blank">DataIntoResults.com</a>的直播，它运行在 WordPress 上，但是任何内容营销平台都可以。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi la"><img src="../Images/7c87a330bc3c5ce7c46ef49fa40bfbff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4uQ-anSLhE75hJYAFuhzw.png"/></div></div></figure><p id="b583" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这篇文章将包含许多主题:设置数据仓库和 ETL 基础设施，从 Google Analytics 和 Google Search 获取数据到数据仓库，对数据建模以便使用，以及在 Google Sheets 中设置一个漂亮的仪表板。</p><p id="3b84" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">我们开始吧！</strong></p><h1 id="cf8e" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么是网络分析数据仓库？</h1><p id="931f" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">我们需要问自己的第一个问题是，我们想要实现什么？建立 web analytics 数据仓库的全部意义在于能够获得完全符合您需求的定制报告。如果没有，你也可以使用谷歌分析前端。</p><p id="8772" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，我将把我的兴趣缩小到两个问题上:什么与我的受众相关，以及如何让我的文章更加 SEO 友好。尽管如此，这篇文章的目的是让你有足够的数据来更加关注你的具体情况。</p><h1 id="4d63" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">内容是否与受众相关？</h1><p id="07c5" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">哪些内容是观众感兴趣的？我不做 clickbait，所以我的文章往往比较长。因此，怀疑兴趣的一个方法是看有多少访问者阅读了整篇文章，而不是那些在文章开始就停下来的访问者。在 Medium 中有一个很酷的特性叫做读取率(见下面的截图)。我们将与谷歌分析这个功能。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/1d18f7c12c32d63dd0d3402bb91f58d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TNq4o8d7TA7GMrZt.png"/></div></div></figure><p id="0f3f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第二个感兴趣的指标是谷歌搜索上显示的内容的点击率(CTR)。如果你的内容被推到人们面前，但他们没有点击，这可能是因为你的主题不正确，或者你的标题和描述不够有趣。</p><h1 id="3e88" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">内容搜索引擎优化准备好了吗？</h1><p id="5308" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">有相关的内容是很好的，但是如果没有一种方法把它放在观众面前，它是没有用的。<strong class="kd jf"> SEO 营销的基础是让人们正在寻找的一些关键词的内容处于有利位置</strong>。</p><p id="d0ef" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，这些天我在搜索“postgresql 数据科学”上排名很好(在 DuckDuckGo 上排名第一)。这是一个合理的关键字组合，流量和排名第一有助于推动游客。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/51df79e7aa24b50e85ea6919dec311c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*f8PQ_3StREmA64Nq.png"/></div></figure><p id="b39b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">尽管如此，总的来说，该页面位于第 27 位。挖掘了一下，我发现了一些既相关又有一些流量(新内容创作的机会)的关键词组合。</p><h1 id="e78f" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">设置数据仓库基础设施</h1><p id="12e7" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">现在我们知道了我们想要什么，我们需要在基础设施上花些时间。<a class="ae kz" href="https://dataintoresults.com/contact/" rel="noopener ugc nofollow" target="_blank">需要帮助的话可以联系我</a>。让我们为您未来的发展打下坚实的基础。</p><p id="5fc9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将使用一个<a class="ae kz" href="https://dataintoresults.com/post/postgresql-for-data-science-pro-and-cons/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL 数据仓库</a>(开源)和<a class="ae kz" href="https://databrewery.co/" rel="noopener ugc nofollow" target="_blank">数据酿酒厂 ETL </a>(我的一个产品，也是开源的)。PostgreSQL 将是存储和处理数据的地方，而 Data Brewery 将把数据从谷歌服务转移到数据库并管理工作流。</p><p id="c3a3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有两个数据源，Google Analytics 和 Google Search 将存储在 PostgreSQL 数据仓库中(每个都在一个特定的模块中)。然后，我们将把它们融合到一个名为<em class="mk">内容营销</em>的新模块中。最后，我们将数据放入 Google 工作表中。这里没什么特别的。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ml"><img src="../Images/92880afb4e1e30e362f58ba7c8dd0c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3bSTJLAdG8i6LLfh.png"/></div></div></figure><p id="2f6b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以在 GitHub 上找到完整的 Data Brewery 项目<a class="ae kz" href="https://github.com/dataintoresults/web-analytics-data-warehouse" rel="noopener ugc nofollow" target="_blank">(在文件夹 v1 中)。</a></p><p id="06d2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我不会详细讨论实现，但是数据存储目录包含数据源的视图。例如，下面是谷歌搜索的数据存储。它定义了一个名为 seo_pages 的表(虚拟的),该表将包含一些关于过去 10 天的信息(有多少印象，点击和每页每天的平均位置)。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/766ad4cd309950d94d2d1e388c63c1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/0*0t2Q6cnmb7Xnse4Y.png"/></div></figure><p id="c3ae" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，数据被集成到归档模块中。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/7cfc811abfbd60391364cd492fa46ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/0*igWdvriFPFSSvjDZ.png"/></div></figure><p id="f5da" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行该流程(使用 shell 命令<code class="fe mo mp mq mr b">ipa run-process update</code>)后，将填充表 google_search.seo_pages。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ms"><img src="../Images/63a6269e3d3bc46bd836d59f8e09b680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5mUaqalEFsSoQJAJ.png"/></div></div></figure><p id="906c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Google Sheets 数据存储用于输出数据，每个表都有一个 SQL 查询要在数据仓库中执行，以便填充 Google Sheets 中的相应区域。</p><p id="02ef" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你想了解更多关于整合配置的信息，你可以阅读来自<a class="ae kz" href="https://databrewery.co/" rel="noopener ugc nofollow" target="_blank"> Data Brewery </a>的<a class="ae kz" href="https://databrewery.co/docs/reference/stores/google/google_analytics.html" rel="noopener ugc nofollow" target="_blank"> Google Analytics </a>、<a class="ae kz" href="https://databrewery.co/docs/reference/stores/google/google_search.html" rel="noopener ugc nofollow" target="_blank"> Google Search </a>和<a class="ae kz" href="https://databrewery.co/docs/reference/stores/google/google_sheets.html" rel="noopener ugc nofollow" target="_blank"> Google Sheets </a>文档页面。</p><h1 id="e31b" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">数据建模</h1><p id="e6ee" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">既然我们在 web analytics 数据仓库中有了原始数据，我们可能希望在仪表板中很好地呈现它。为此，我们将利用 SQL 语言(大多数数据库的说法)。</p><h1 id="8dfb" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第一次查询</h1><p id="5db1" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">让我们从一些简单的东西开始(但绝不简单)，每个国家每月的用户图表。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/fd550364fb738840225727fea987d7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/0*_WSXDlmoE5fASYD7.png"/></div></figure><p id="15f2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可能会看到，我们将展示的国家数量限制为五个，并将其余的国家重新组合在另一个国家。这对可读性很重要。但是你必须定义你如何选择五个重要的国家。它可以是静态选择，也可以是动态选择。在这种情况下，我选择了前一个月最大的 5 个国家。</p><p id="8590" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如您在下面看到的,<em class="mk"> user_country </em>部分(第一个选择)很简单，其余的只是 5 个国家的选择。</p><figure class="lb lc ld le gt iv"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="d9ac" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如您在<a class="ae kz" href="https://docs.google.com/spreadsheets/d/1AKg6_smd5c7lpXhjjHut5TEnUMoZI4TVmzTQk9wVkNw/edit#gid=234352901" rel="noopener ugc nofollow" target="_blank">数据—用户国家表</a>中看到的，栏 A 到栏 C 由 ETL 填充。在此基础上，我们使用交叉表来生成图表。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mw"><img src="../Images/47df4e3e5c6e50df47ae69dcb5d5c2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*19tZz841jXhtP-ys.png"/></div></div></figure><p id="700c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如你所看到的，这并不简单，因为我们想展示一些好的东西，我们操纵原始数据，最后是因为谷歌工作表是有限的。</p><p id="767a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是让我们变点魔法吧。</p><h1 id="82ac" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">读取比率</h1><p id="34a9" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">请记住，阅读率是阅读整个内容的访问者数量除以该内容的访问者数量。第二部分很简单，因为它在谷歌分析上是默认提供的。</p><p id="f176" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于第一部分，阅读全文的访问者数量，我们将使用 Google Analytics 的事件机制。我推荐使用<a class="ae kz" href="https://tagmanager.google.com/#/home" rel="noopener ugc nofollow" target="_blank">谷歌标签管理器</a>，它允许轻松配置谷歌分析事件。</p><p id="9c96" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我定义了下面的标签(参见截图)。我们将有一个名为 Scroll 的事件类别，它将在页面滚动时被触发(我已经设置了 25、50、75 和 90%)。参数{{UA DataIntoResults}}是我的 Google Analytics 视图 ID。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/bbf7cdc6911ecce3c71bcad3db603f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/0*Q5Nxr11JhvRSvGq_.png"/></div></figure><p id="dff2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<em class="mk">Google _ analytics . events</em>表中，我们将找到这些事件。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi my"><img src="../Images/4732dc8dcbb94af847e24b9a6cf4f6e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S20vQBhVWaTShU85.png"/></div></div></figure><p id="f677" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请注意，动作值与页面相同。这是因为我们将使用 unique_events 列。如果动作是一个像“滚动”一样的常量，那么 unique_event 将在每次访问时只计算一次，即使访问者阅读了许多完整的帖子。</p><p id="1ad5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，开始行动，或者 SQL 查询。我想强调三件事:</p><ul class=""><li id="2f99" class="mz na je kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">原始数据必须清理一点，页面有时有参数。例如，<code class="fe mo mp mq mr b">/mypage</code>和<code class="fe mo mp mq mr b">/mypage?parameter=1</code>不是谷歌分析的同一个页面。从商业角度来看，大多数时候都是一样的。代码<code class="fe mo mp mq mr b">regexp_replace(page, '[?&amp;].*$', '')</code>将会清除它(第 4 行和第 9 行)。</li><li id="8a70" class="mz na je kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">我们过滤数据，只保留 2020 年 1 月 15 日之后的数据。滚动跟踪是在那一天实现的(第 20 和 29 行)。</li><li id="37a7" class="mz na je kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">我们使用 75%的阈值来定义一篇文章为已读。合适的值取决于你的网站布局(第 18 行)。</li></ul><figure class="lb lc ld le gt iv"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="7b95" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们的阅读率:</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/a6ebf3735184229ce7bc117e0773d473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/0*rDwPnkTmjbNiKdwF.png"/></div></figure><h1 id="2b1b" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">最后一个焦点:那些迷你图</h1><p id="95d5" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">我是爱德华·塔夫特的超级粉丝，他在探索信息密度的过程中发明了迷你图这个术语。迷你图无需占用太多空间即可提供时间上下文。</p><p id="b6ad" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，我们使用印象指标(节选如下),它反映了在谷歌搜索上看到每个页面的人数。通过为过去 13 个月的趋势添加迷你图，我们提供了更多价值。我们可以看到，虽然第二篇文章(<a class="ae kz" href="https://dataintoresults.com/post/postgresql-for-data-science-pro-and-cons/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL for Data Science </a>)上升缓慢，但第一篇文章(<a class="ae kz" href="https://dataintoresults.com/post/jupyterlab-for-complex-python-and-scala-spark-projects/" rel="noopener ugc nofollow" target="_blank"> Jupyter for Complex Python 和 Scala Spark project</a>)却迅速获得了更多的印象。最后一个(<a class="ae kz" href="https://dataintoresults.com/post/data-warehouse-manifesto/" rel="noopener ugc nofollow" target="_blank">数据仓库宣言</a>)，印象不多，从来没有过。这只是不是搜索引擎优化的好内容。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/52f9a0e5136bb6c64fa87759c744302b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/0*fm0AjDf8W0P4S6Fo.png"/></div></figure><p id="c7e4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在坏消息是，每页绘制 13 个数据点需要 13 列，这在 SQL 中有点麻烦。我们首先创建一个参考表，提供每个月(过去 13 个月)的订单(从 1 到 13)。这是在第 8 到 11 行完成的。然后，从第 42 行开始，我们用一个关于月份的条件来聚集数据。这允许将数据从行旋转到列。</p><figure class="lb lc ld le gt iv"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f8c7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在每个指标有 13 列(浏览量、浏览量、点击量和位置)用于每个页面(每个页面是一行)，我们可以在 Google Sheet 中绘制这些小的迷你图。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi np"><img src="../Images/ac54c75a4aaf61207571680f567296f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DYm0YdNSv24FEcac.png"/></div></div></figure><p id="c050" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请注意，除了数据点选择之外，您还可以传递参数来控制行为。你可以在<a class="ae kz" href="https://support.google.com/docs/answer/3093289?hl=en" rel="noopener ugc nofollow" target="_blank"> Google Sheets 文档</a>中阅读更多关于迷你图的内容。</p><h1 id="4465" class="lf lg je bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">初始化并自动刷新</h1><p id="4c8a" class="pw-post-body-paragraph kb kc je kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">默认配置从谷歌分析和谷歌搜索中查找最近 10 天的信息。当您有一份过去 13 个月的报告时，这显然不方便(您需要等待 13 个月)。</p><p id="2bf5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，我们将使用 init.conf(见下文)来使用<code class="fe mo mp mq mr b">ipa run-module -c init.conf update</code>引导数据仓库。这将需要一些时间，因为我们要获取最近 400 天的数据。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/89be7ca369a7c2861c4fce0da6d8f67f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/0*ti7jItS2KACwejQB.png"/></div></figure><p id="76d2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们希望 web 分析数据仓库在没有人工交互的情况下被刷新。最简单的方法是使用调度程序，例如 Linux 下的 cron。在下面，您可以看到每天在 UTC 时间早上 5 点更新数据仓库的命令。</p><pre class="lb lc ld le gt nr mr ns nt aw nu bi"><span id="1531" class="nv lg je mr b gy nw nx l ny nz"># m h dom mon dow command 0 5 * * * cd ~/dwh/web-analytics-data-warehouse/v1 &amp;amp;&amp;amp; ~/app/ipa/bin/ipa run-process update</span></pre><p id="2268" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，我们的 Google Sheet dashboard 每天都会更新(每天不会有太大变化，因为它是一份月度报告)。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/c7cddc23e29819fdac7eb9b79ab611e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*akZWK1G7kkw2AKeN.png"/></div></div></figure><p id="ee74" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">恭喜，我们现在有了一个完全可操作的 web 分析数据仓库！你会添加什么使它更相关？</strong></p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="5221" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mk">原载于 2020 年 1 月 22 日</em><a class="ae kz" href="https://dataintoresults.com/post/web-analytics-data-warehouse-google-analytics-and-search/" rel="noopener ugc nofollow" target="_blank"><em class="mk"/></a><em class="mk">。</em></p></div></div>    
</body>
</html>