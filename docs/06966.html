<html>
<head>
<title>Classic Probability Problem #2: The Coupon Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">经典概率问题#2:优惠券问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/classic-probability-problem-2-the-coupon-problem-7acd7febaabd?source=collection_archive---------28-----------------------#2020-05-29">https://towardsdatascience.com/classic-probability-problem-2-the-coupon-problem-7acd7febaabd?source=collection_archive---------28-----------------------#2020-05-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ac75" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据科学和机器学习面试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4dfe65cb15a38004d762902838be159d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YP5u2UhCe2qBV8ls2VWI2A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从<a class="ae ky" href="https://www.freeimages.com/photo/save-money-with-these-coupon-1619724" rel="noopener ugc nofollow" target="_blank">freeimages.com</a></p></figure><p id="78bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我第二次进入概率论中的经典玩具问题。“息票问题”是一个需要注意的大问题；它出现在许多应用场合。从技术面试的角度来看，通过在最后添加一个小的计算组件，它可以作为对一般概率和编码知识的可靠测试。问题如下:</p><h1 id="3375" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">问题:</h1><p id="4844" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有一种品牌的麦片，每买一盒都有一张优惠券。有5种不同类型的优惠券。每购买一盒麦片，获得5张优惠券中任何一张的概率是一致的。目标是收集所有5种独特的优惠券类型。</p><p id="ceff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">现在问题来了，你需要购买多少盒麦片才能收集到所有5张独特的优惠券？</strong></p><p id="7869" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将首先解析地解决这个问题，然后通过计算模拟这个问题来验证我们的发现。</p><h1 id="4b99" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">分析解决方案:</h1><p id="1084" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们从一些观察开始:</p><ol class=""><li id="ede3" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">购买的每一盒麦片都独立于最后购买的一盒(或多盒)。</li><li id="5d22" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">在给定的盒子中获得5种优惠券类型中的任何一种的概率是相同的。</li></ol><p id="96de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要某种数学方法来界定这个问题。也许我们可以使用一些参数工具？让我们快速绕道，讨论几何随机变量。</p><h2 id="b803" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">几何随机变量:</h2><p id="eede" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">几何随机变量是具有单参数分布的离散随机变量，具体如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/190e224a2a6cdd5f7ef0efcd05a82a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jyps1TdpCkWw98moXWCCdw.png"/></div></div></figure><p id="305e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们可以将我们的优惠券收集问题视为五个几何随机变量的期望值之和，每个变量具有不同的成功参数<strong class="lb iu"> <em class="nt"> p </em> </strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/b9c521e333cee98b01497b85b43ea15b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AD0iAIGc0dwcGYdZJ1zQWg.png"/></div></div></figure><p id="d864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，几何随机变量的期望值是1/p:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/822ba987748f2a4ca85ac5f480aba408.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*3QSLC3JrNXMvVI9udHlYWg.png"/></div></figure><h2 id="e715" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">几何RV期望值的证明(可选部分):</h2><p id="8803" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">对于那些对几何随机变量的期望值的推导感兴趣的人，下面我包括了两个推导(一个直接使用PMF，另一个使用MGF)。如果您对这些证明不感兴趣，可以跳过这一部分:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/a20caf613f482e32e8592b86e1997c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UG2E6kfFdqDE35qWSeTOg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/efce02b9a04565c8b2a8ba1280cec464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fn6Ebz1GtY4kv7-caXqvpA.png"/></div></div></figure><h2 id="35ba" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">解决问题:</h2><p id="ec56" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们简单地将五个指定的随机变量的期望值相加:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/2a69489fcadca1a45176cefb917b221f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2k8KdQuo8H3thRqyTPoCpQ.png"/></div></div></figure><p id="fc03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，四舍五入到最接近的整数，我们需要购买的收集所有5个独特优惠券的预期盒数是12盒。</p><h1 id="60c2" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">计算模拟:</h1><p id="54b5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在让我们用python模拟这个场景，计算10，000次以上的迭代，以证实我们上面的分析结果:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="3f28" class="ng lw it oa b gy oe of l og oh">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="415f" class="ng lw it oa b gy oi of l og oh">## specify number of coupons, and the probability of getting a coupon<br/>num_coupons=5<br/>expected_number_of_trials = 0<br/>for i in range(num_coupons, 0, -1):<br/>    expected_number_of_trials = expected_number_of_trials + (1/(i/num_coupons))</span><span id="ba9d" class="ng lw it oa b gy oi of l og oh">iterations = 10000<br/>df = pd.DataFrame()<br/>df['iteration'] = range(1,iterations+1)<br/>df['average_num_trials_required'] = None</span><span id="471e" class="ng lw it oa b gy oi of l og oh">for i in range(0, iterations):<br/>    full_set = set(range(0,num_coupons))<br/>    current_set = set([])<br/>    total_number_of_coupons_collected = 0<br/>    while(current_set != full_set):<br/>        total_number_of_coupons_collected = total_number_of_coupons_collected+1<br/>        random_coupon = np.asscalar(np.random.randint(low=0, high=num_coupons, size=1))<br/>        update_set = list(current_set)<br/>        update_set.append(random_coupon)<br/>        current_set = set(update_set)<br/>        del random_coupon, update_set<br/>    <br/>    if(i+1 == 1):<br/>        df.loc[df['iteration']==i+1, 'average_num_trials_required'] = total_number_of_coupons_collected<br/>    else:<br/>        df.loc[df['iteration']==i+1, 'average_num_trials_required'] = float(((df.loc[df['iteration']==i, 'average_num_trials_required']*i) + total_number_of_coupons_collected)/(i+1))</span><span id="3207" class="ng lw it oa b gy oi of l og oh">print(df['average_num_trials_required'][i])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/8aac7bc5233243704aaf1ac18fbfb701.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*hE86GQNmOyUy0e_mHd-v3Q.png"/></div></figure><p id="b59b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如上所示，在该场景的10，000次迭代中，收集所有5个唯一优惠券所需购买的盒子数量的样本平均值约为11.431。这个结果与我们上面的解析解一致。</p><h1 id="9f6b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">最后的想法——我们为什么要关心这个问题，或者任何其他玩具问题？？</h1><p id="7cdf" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">正如技术领域中大多数众所周知的玩具问题一样，这个“优惠券问题”和关于谷物和优惠券收集的傻孩子般的场景有一个重要的目的。这个问题(以及它的微小变化)在应用实践中不断出现；关于离散等待时间的期望值的问题，或者在某事发生之前可能需要发生的事件的数量的问题。这些问题通常可以归结为优惠券问题的某种变体。因此，拥有良好的基础知识和关于玩具问题的理论基础知识，比如这里讨论的，对你的应用实践有很大的帮助。</p><p id="9afe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，值得一提的是，我们为<strong class="lb iu"> 5 </strong>独特优惠券解决了这个问题。但是我们可以选择任何大于零的任意常数<strong class="lb iu"> n </strong>唯一优惠券<strong class="lb iu">T5】。这里使用的方法仍然适用。</strong></p><p id="89bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我想留给你一个挥之不去的问题。在我们上面的问题中，假设你已经收集了4个独特的优惠券，现在正在收集第5个也是最后一个独特的优惠券。张贴您收集的第四张独特优惠券，您已经购买了50多盒麦片，但所有都包含更多您已经拥有的4张独特优惠券。从那时起，您需要购买多少盒才能获得第五张优惠券？我给你一个提示，几何分布是指数分布的离散对应物，它有一个关于等待时间的独特性质。欢迎在评论中加入你的想法，以及我上面的谜语的可能答案。</p><p id="e516" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">希望以上有见地。正如我在以前的一些文章中提到的，我认为没有足够的人花时间去做这些类型的练习。对我来说，这种基于理论的洞察力让我在实践中更容易使用方法。我个人的目标是鼓励该领域的其他人采取类似的方法。我打算在未来写一些基础作品，所以请随时在<a class="ae ky" href="http://www.linkedin.com/in/andrew-rothman-49739630" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> LinkedIn </strong> </a>上与我联系，并在Medium  上<a class="ae ky" href="https://anr248.medium.com/" rel="noopener"> <strong class="lb iu">关注我的更新！</strong></a></p></div></div>    
</body>
</html>