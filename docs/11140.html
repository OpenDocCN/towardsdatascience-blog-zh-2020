<html>
<head>
<title>How to Run MySQL and phpMyAdmin Using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Docker 运行 MySQL 和 phpMyAdmin</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-run-mysql-and-phpmyadmin-using-docker-17dfe107eab7?source=collection_archive---------5-----------------------#2020-08-03">https://towardsdatascience.com/how-to-run-mysql-and-phpmyadmin-using-docker-17dfe107eab7?source=collection_archive---------5-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc12" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Docker 简化了 MySQL 管理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef8c847be66813ff20c59f5de9bdbff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6QMCYNC_itaX3P4v3Bie1g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@bongkarn-thanyakij-683719?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> bongkarn thanyakij </a>从<a class="ae ky" href="https://www.pexels.com/photo/desktop-computer-beside-analog-camera-3759101/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>和<a class="ae ky" href="https://unsplash.com/@guibolduc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Guillaume Bolduc </a>在<a class="ae ky" href="https://unsplash.com/s/photos/containers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="3545" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">对于许多人来说，使用命令行界面管理 MySQL 服务器可能很困难。当我们可以使用图形界面时，事情就变得简单多了。数据库管理工具 phpMyAdmin 解决了这个问题。我们可以在网络界面上使用这个工具。它支持 MySQL 和 MariaDB 的各种操作，比如导入数据、导出数据、执行 SQL 语句等等。</p><p id="0736" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用 Docker 进行设置，因为在不同的机器上运行和管理 phpMyAdmin 对于环境管理来说是一件令人头疼的事情。Docker 通过使用其容器化技术解决了这个问题，该技术使用 Docker 图像。之前，我已经讨论过如何使用 Docker 运行 MySQL。你可以阅读下面的帖子，我在里面讲述了 MySQL 和 Docker 的一些基本概念和命令。</p><div class="me mf gp gr mg mh"><a rel="noopener follow" target="_blank" href="/how-to-run-mysql-using-docker-ed4cebcd90e4"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">如何使用 Docker 运行 MySQL</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">轻松运行 MySQL</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">towardsdatascience.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ks mh"/></div></div></a></div><p id="3be5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这篇文章中，你将学习如何使用<a class="ae ky" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>将<a class="ae ky" href="https://www.phpmyadmin.net/" rel="noopener ugc nofollow" target="_blank"> phpMyAdmin </a>连接到<a class="ae ky" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank"> MySQL </a>服务器。这种方法将节省您的时间和精力，因为您不必安装或配置 phpMyAdmin 和 MySQL。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="0356" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">设置</h1><p id="fb6e" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">有两种方法我们可以使用 Docker 连接 phpMyAdmin 和 MySQL。在第一种方法中，我们将使用单个 Docker 合成文件。对于第二个，我将向您展示如何连接到一个已经运行的 MySQL Docker 容器。首先，你需要安装<a class="ae ky" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。两种方法我都用 macOS。</p><h2 id="b56d" class="oa ne it bd nf ob oc dn nj od oe dp nn li of og np lm oh oi nr lq oj ok nt ol bi translated">方法 1</h2><p id="713b" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这个方法中，我们将使用一个<a class="ae ky" href="https://raw.githubusercontent.com/lifeparticle/MySQL-Snippets/master/phpMyAdmin/docker-compose.yml" rel="noopener ugc nofollow" target="_blank"> Docker 编写文件</a>。我们需要将<code class="fe om on oo op b">docker-compose.yml</code>放入一个文件夹中。这个设置中使用的文件夹名是<strong class="lb iu"> phpMyAdmin </strong>。让我们来分解一下<code class="fe om on oo op b">docker-compose.yml</code>文件的各个成分。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="27e9" class="ou ne it op b be ov ow l ox oy">version: '3.1'<br/>services:<br/>  db:<br/>    image: mysql<br/>    restart: always<br/>    environment:<br/>      MYSQL_ROOT_PASSWORD: root<br/>      MYSQL_DATABASE: test_db<br/>    ports:<br/>      - "3308:3306"<br/>  phpmyadmin:<br/>    image: phpmyadmin/phpmyadmin:latest<br/>    restart: always<br/>    environment:<br/>      PMA_HOST: db<br/>      PMA_USER: root<br/>      PMA_PASSWORD: root<br/>    ports:<br/>      - "8080:80"</span></pre><p id="7cd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们使用版本标记来定义合成文件格式，即 3.1。还有其他文件格式— 1、2、2.x 和 3.x。从 Docker 的文档<a class="ae ky" href="https://docs.docker.com/compose/compose-file/" rel="noopener ugc nofollow" target="_blank">中获取有关合成文件格式的更多信息，请点击</a>。</p><p id="543c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过服务散列来跟随我们的版本标签。在这里面，我们必须定义我们的应用程序想要使用的服务。对于我们的应用程序，我们有两个服务，<strong class="lb iu"> db、</strong>和<strong class="lb iu"> phpmyadmin </strong>。</p><p id="04c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使我们的设置过程快速简单，我们使用预先构建的官方图片<a class="ae ky" href="https://hub.docker.com/_/mysql" rel="noopener ugc nofollow" target="_blank"> MySQL </a>和<a class="ae ky" href="https://hub.docker.com/r/phpmyadmin/phpmyadmin/" rel="noopener ugc nofollow" target="_blank"> phpMyAdmin </a>作为图片标签。</p><p id="ab4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们使用<strong class="lb iu"> always </strong>作为重启标签时，容器总是重启。这样可以节省时间。例如，您不必在每次手动重启机器时都启动容器。当 Docker 守护进程重新启动或者容器本身被手动重新启动时，它会重新启动容器。</p><p id="b4ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经在环境标记下定义了环境变量，我们将使用这些变量进行数据库和 phpMyAdmin 认证。</p><p id="1b00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，ports 标记用于定义主机和容器端口。对于<strong class="lb iu"> db </strong>服务，它将主机上的端口 3308 映射到 MySQL 容器上的端口 3306。对于 phpmyadmin 服务，它将主机上的端口 8080 映射到 phpMyAdmin 容器上的端口 80。</p><p id="449f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在从<code class="fe om on oo op b">docker-compose.yml</code>文件所在的目录运行下面的命令。命令<code class="fe om on oo op b">docker compose up</code>启动并运行你的整个应用。如果您遇到以下错误，这意味着您已经在端口 3308 上运行 Docker 容器。要解决这个问题，您必须更改到不同的端口，或者您可以停止另一个容器。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="e01e" class="ou ne it op b be ov ow l ox oy">Bind for 0.0.0.0:3308 failed: port is already allocated</span></pre><p id="444d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在选择任意一个网络浏览器，进入以下地址。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="d136" class="ou ne it op b be ov ow l oz oy">http://localhost:8080</span></pre><p id="212c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">瞧啊。您应该会在浏览器上看到如下所示的网页。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/df85782f5b34ab8ef2c656e28ede280e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDss8aP2ZmaaV9n2c3AeLw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">管理面板</p></figure><p id="da3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，在底部有一个警告信息。让我们现在就解决这个问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/4112a14a8a3466bf9356d284f7c8b403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aeK2fyQCKcMeUNLBSP54OA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">首先，点击<strong class="bd pc">找出原因</strong>链接</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/188f640fbbf7f26b12998e8e4fb2bd47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*GWodFb4EkdsSq--uOcEmKQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">现在点击<strong class="bd pc">创建</strong>链接</p></figure><p id="0bdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您已经准备好管理您的数据库了！</p><h2 id="0f78" class="oa ne it bd nf ob oc dn nj od oe dp nn li of og np lm oh oi nr lq oj ok nt ol bi translated">方法 2</h2><p id="f705" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在这个方法中，您将学习如何将 phpMyAdmin docker 容器连接到已经运行的 MySQL 容器。当 docker-compose 文件中没有 phpMyAdmin 服务时，这很有帮助。</p><p id="ad5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要使用以下命令列出所有当前的 Docker 网络。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="de42" class="ou ne it op b be ov ow l ox oy">docker network ls</span></pre><p id="14b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你应该可以从列表中看到<code class="fe om on oo op b">phpmyadmin_default</code>。我们的目标是找到我们在方法一中使用 docker-compose 文件创建的应用程序网络。由于我们没有在 docker-compose 文件中为我们的应用程序指定一个网络名称，docker 将根据目录名给出网络名称，并在末尾加上<code class="fe om on oo op b">_default</code>。在这种情况下，<code class="fe om on oo op b">phpmyadmin_default</code>。如果你对 Docker networks 感兴趣，点击查看<a class="ae ky" href="https://docs.docker.com/compose/networking/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="9a50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">干得好，您已经成功识别了网络！最后，我们可以运行一个独立的 phpMyAdmin Docker 容器，它连接到我们想要的网络。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="4fe2" class="ou ne it op b be ov ow l ox oy">docker run --name stand-alone-phpmyadmin --network phpmyadmin_default -p 8081:80 phpmyadmin/phpmyadmin:latest</span></pre><p id="fc61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo op b">docker run</code>命令用于从映像运行容器。这里我们使用的是<code class="fe om on oo op b">phpmyadmin/phpmyadmin:latest</code>图像。</p><p id="06ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo op b">--name</code>标志(可选)用于给容器一个特定的名称。如果不想提供，Docker 会随机分配一个名字。</p><p id="782c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo op b">—-network</code>标志用于连接到 Docker 网络。</p><p id="9261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe om on oo op b">-p</code>标志已经在这篇文章中讨论过了。</p><p id="f143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在选择任意一个网络浏览器，进入以下地址。使用<code class="fe om on oo op b">root</code>作为用户名和密码登录。</p><pre class="kj kk kl km gt oq op or bn os ot bi"><span id="6c98" class="ou ne it op b be ov ow l oz oy">http://localhost:8081/index.php</span></pre><p id="7139" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您想要连接多个 Docker 容器时，这种方法很有用。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="3848" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">包裹</h1><p id="9fd5" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">当我们使用命令行界面时，数据库管理可能是一项艰巨的任务。基于网络的工具 phpMyAdmin 解决了这个问题，Docker 使整个过程更加顺畅。我使用这个设置来试验 MySQL 查询，这样可以节省很多时间。通过使用 Docker，我不必担心 MySQL 和 phpMyAdmin 的设置。我希望这能帮助你开始使用 MySQL、phpMyAdmin 和 Docker。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="79f8" class="nd ne it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">相关帖子</h1><div class="me mf gp gr mg mh"><a rel="noopener follow" target="_blank" href="/how-to-mount-a-directory-inside-a-docker-container-4cee379c298b"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd iu gy z fp mm fr fs mn fu fw is bi translated">如何在 Docker 容器中挂载目录</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">专注于编写代码，无需担心环境管理</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">towardsdatascience.com</p></div></div><div class="mq l"><div class="pe l ms mt mu mq mv ks mh"/></div></div></a></div></div></div>    
</body>
</html>