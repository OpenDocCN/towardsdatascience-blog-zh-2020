<html>
<head>
<title>Dictionary as an Alternative to If-Else</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">字典作为If-Else的替代</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/dictionary-as-an-alternative-to-if-else-76fe57a1e4af?source=collection_archive---------5-----------------------#2020-02-14">https://towardsdatascience.com/dictionary-as-an-alternative-to-if-else-76fe57a1e4af?source=collection_archive---------5-----------------------#2020-02-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b24" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用字典创建一个更清晰的If-Else函数代码</h2></div><h1 id="0883" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="74a8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可能经常使用Python的字典。但是，您是否已经释放了字典的全部容量来创建更高效的代码呢？如果你不知道如何创建一个有序的字典，将多个字典组合成一个映射，创建一个只读字典，你可以在这里找到更多的<a class="ae lw" href="https://medium.com/better-programming/boost-your-efficiency-with-specialized-dictionary-implementations-7799ec97d14f" rel="noopener"/>。</p><p id="a3af" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">本文将关注如何使用Python的字典作为if-else语句的替代。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/3ffd8d34969d9b513761e83027f6f2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IghWBL0tTRa8bAwrplDmQw.jpeg"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">图片来自<a class="ae lw" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4255486" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lw" href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4255486" rel="noopener ugc nofollow" target="_blank"> Gerd Altmann </a></p></figure><h1 id="f73b" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">削减If-Else语句，增加默认值</h1><p id="3d64" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">假设我们有杂货店商品的价格表:</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="120f" class="mx kj it mt b gy my mz l na nb">price_list = {<br/>'fish': 8,<br/>'beef': 7,<br/>'broccoli': 3,<br/>}</span></pre><p id="d165" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我们想打印商品的价格，但是预期不是每个商品都在<code class="fe nc nd ne mt b">price_list.</code>中，所以我们决定创建一个函数:</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="7e2a" class="mx kj it mt b gy my mz l na nb">def find_price(item):<br/>    if item in price_list:<br/>        return 'The price for {} is {}'.format(item, price_list[item])<br/>    else:<br/>        return 'The price for {} is not available'.format(item)</span><span id="cbad" class="mx kj it mt b gy nf mz l na nb">&gt;&gt;&gt; find_price('fish')<br/>'The price for fish is 8'</span><span id="002e" class="mx kj it mt b gy nf mz l na nb">&gt;&gt;&gt; find_price('cauliflower')<br/>'The price for cauliflower is not available'</span></pre><p id="791f" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">聪明。if-else语句做了我们希望它做的事情:当项目不可用时返回另一个值。但是我们查询字典两次，并使用两条语句返回几乎相同的内容。我们能做得更好吗？如果条目不在列表中，有没有办法返回一个默认值？幸运的是，Python的字典方法有一种方法可以做到这一点，叫做<code class="fe nc nd ne mt b">get()</code></p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="cc2c" class="mx kj it mt b gy my mz l na nb">def find_price(item):<br/>    return 'The price for {} is {}'.format(item, price_list.get(<br/>        item, 'not available'))</span></pre><p id="29d4" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated"><code class="fe nc nd ne mt b">.get()</code>查找一个键，用不存在的键返回默认值。代码看起来确实更短了，但是它的表现是否像我们想要的那样呢？</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="f982" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; find_price('fish')<br/>'The price for fish is 8'</span><span id="d0b8" class="mx kj it mt b gy nf mz l na nb">&gt;&gt;&gt; find_price('cauliflower')<br/>'The price for cauliflower is not available'</span></pre><p id="b851" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">整洁！</p><h1 id="3548" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">但是我可以用Dict来实现不涉及字典的功能吗？</h1><p id="ec2e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">好问题。让我们来处理一个完全不涉及字典的例子。</p><p id="a573" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">假设您想创建一个函数，返回两个数之间的运算值。这就是你得出的结论:</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="f37e" class="mx kj it mt b gy my mz l na nb">def operations(operator, x, y):<br/>    if operator == 'add':<br/>        return x + y<br/>    elif operator == 'sub':<br/>        return x - y<br/>    elif operator == 'mul':<br/>        return x * y<br/>    elif operator == 'div':<br/>        return x / y</span><span id="ebd2" class="mx kj it mt b gy nf mz l na nb">&gt;&gt;&gt; operations('mul', 2, 8)<br/>16</span></pre><p id="bb45" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">你可以利用字典和<code class="fe nc nd ne mt b">get()</code>方法得到一个更优雅的代码:</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="33d1" class="mx kj it mt b gy my mz l na nb">def operations(operator, x, y):<br/>    return {<br/>        'add': lambda: x+y,<br/>        'sub': lambda: x-y,<br/>        'mul': lambda: x*y,<br/>        'div': lambda: x/y,<br/>    }.get(operator, lambda: 'Not a valid operation')()</span></pre><p id="5f92" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">操作符的名字变成了键，<code class="fe nc nd ne mt b">lambda</code>有效地将函数压缩成字典的值。<code class="fe nc nd ne mt b">get()</code>找不到键时返回默认值。让我们检查一下我们的功能:</p><pre class="md me mf mg gt ms mt mu mv aw mw bi"><span id="3264" class="mx kj it mt b gy my mz l na nb">&gt;&gt;&gt; operations('mul', 2, 8)<br/>16<br/>&gt;&gt;&gt; operations('unknown', 2, 8)<br/>'Not a valid operation'</span></pre><p id="a4d6" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">太好了！它像我们想要的那样工作。</p><h1 id="8f5a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">那么我应该把If-Else语句切换到字典吗？</h1><p id="990c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">替代方案使代码看起来更干净。但是如果我们想使用字典，我们应该考虑这个开关的缺点。每次我们调用<code class="fe nc nd ne mt b">operations()</code>，它都会创建一个临时字典和lambdas，让操作码循环。这将降低代码的性能。</p><p id="7ce3" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">因此，如果我们想使用字典，我们应该考虑在函数调用之前创建一次字典。这个行为防止代码在我们每次查找时重新创建字典。这种技术当然不会在所有情况下都适用，但是在您的工具箱中有另一种技术可供选择将是有益的。</p><p id="5a4a" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在<a class="ae lw" href="https://github.com/khuyentran1401/Data-science/blob/master/python/dictionary_ifelse.ipynb" rel="noopener ugc nofollow" target="_blank"> this Github repo </a>中，您可以随意使用本文的代码。</p><p id="f0bc" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以通过<a class="ae lw" href="https://www.linkedin.com/in/khuyen-tran-1401/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae lw" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>与我联系。</p><p id="be83" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/timing-the-performance-to-choose-the-right-python-object-for-your-data-science-project-670db6f11b8e"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">高效Python代码的计时</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">如何比较列表、集合和其他方法的性能</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx mm nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/maximize-your-productivity-with-python-6110004b45f7"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">使用Python最大化您的生产力</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">你创建了一个待办事项清单来提高效率，但最终却把时间浪费在了不重要的任务上。如果你能创造…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx mm nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/how-to-use-lambda-for-efficient-python-code-ff950dc8d259"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">如何使用Lambda获得高效的Python代码</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">lambda对元组进行排序并为您创造性的数据科学想法创建复杂函数的技巧</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx mm nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener follow" target="_blank" href="/cython-a-speed-up-tool-for-your-python-function-9bab64364bfd"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">cy thon——Python函数的加速工具</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">当调整你的算法得到小的改进时，你可能想用Cython获得额外的速度，一个…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">towardsdatascience.com</p></div></div><div class="ns l"><div class="oa l nu nv nw ns nx mm nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://medium.com/better-programming/boost-your-efficiency-with-specialized-dictionary-implementations-7799ec97d14f" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">通过专门的字典实现提高您的效率</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">创建包含有序和只读条目的字典，为不存在的键返回默认值，等等</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="ob l nu nv nw ns nx mm nj"/></div></div></a></div><h1 id="f79f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">参考</h1><p id="be7f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">巴德丹。“Python的把戏。”2017</p></div></div>    
</body>
</html>