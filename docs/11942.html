<html>
<head>
<title>Feature Engineering &amp; Feature Selection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç‰¹å¾å·¥ç¨‹å’Œç‰¹å¾é€‰æ‹©</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/feature-engineering-feature-selection-8c1d57af18d2?source=collection_archive---------18-----------------------#2020-08-18">https://towardsdatascience.com/feature-engineering-feature-selection-8c1d57af18d2?source=collection_archive---------18-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="73a3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">ğŸ“ˆPython for finance ç³»åˆ—</h2><div class=""/><div class=""><h2 id="f72e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">å¦‚ä½•å°†ç°ä»£æœºå™¨å­¦ä¹ åº”ç”¨äºä½“ç§¯æ‰©æ•£åˆ†æ(VSA)</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/d5d8fa97c4fefcbc78908f87fdcd0405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rRJr1yKWniocJSJyMAxYbg.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@californong?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">å†œæ—º</a>åœ¨<a class="ae lh" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</p></figure><p id="410b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">è­¦å‘Š</strong> : <em class="me">è¿™é‡Œæ²¡æœ‰ç¥å¥‡çš„å…¬å¼æˆ–åœ£æ¯ï¼Œå°½ç®¡ä¸€ä¸ªæ–°çš„ä¸–ç•Œå¯èƒ½ä¼šä¸ºä½ æ‰“å¼€å¤§é—¨ã€‚</em></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="2dee" class="mm mn it bd mo mp mq dn mr ms mt dp mu lr mv mw mx lv my mz na lz nb nc nd iz bi translated">ğŸ“ˆPython For Finance ç³»åˆ—</h2><ol class=""><li id="b687" class="ne nf it lk b ll ng lo nh lr ni lv nj lz nk md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼</a></li><li id="9376" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/better-programming/identifying-outliers-part-two-4c00b2523362" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼â€”ç¬¬äºŒéƒ¨åˆ†</a></li><li id="62cb" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼â€”ç¬¬ä¸‰éƒ¨åˆ†</a></li><li id="58d2" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-whispering-eebb77a422da">ç¨‹å¼åŒ–çš„äº‹å®</a></li><li id="53ed" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/@kegui/feature-engineering-feature-selection-8c1d57af18d2" rel="noopener">ç‰¹å¾å·¥ç¨‹&amp;ç‰¹å¾é€‰æ‹©</a></li><li id="eae1" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-transformation-e7b3b4268151">æ•°æ®è½¬æ¢</a></li><li id="2d00" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/swlh/fractionally-differentiated-features-9c1947ed2b55" rel="noopener">ç»†å¾®å·®åˆ«ç‰¹å¾</a></li><li id="6243" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/the-triple-barrier-method-251268419dcd">æ•°æ®æ ‡ç­¾</a></li><li id="7524" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/meta-labeling-and-stacking-f17a7f9804ec">å…ƒæ ‡ç­¾å’Œå †å </a></li></ol></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="60b8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨è¿™äº›ç³»åˆ—çš„å‰å‡ ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬å°†æ¢ç´¢é‡‘èå¸‚åœºä¸­çœŸæ­£çš„æŠ€æœ¯åˆ†æã€‚å¾ˆé•¿ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘ä¸€ç›´ç€è¿·äº TA çš„å†…åœ¨é€»è¾‘ï¼Œå«åšé‡å·®åˆ†æ(VSA)ã€‚æˆ‘æ²¡æœ‰å‘ç°ä»»ä½•å…³äºåœ¨è¿™ä¸ªæ—¶å€™åº”ç”¨ç°ä»£æœºå™¨å­¦ä¹ æ¥è¯æ˜æŒä¹…æŠ€æœ¯çš„æ–‡ç« ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘è¯•å›¾æŠ›å‡ºä¸€æ¡å°é±¼å»æŠ“ä¸€æ¡é²¸é±¼ã€‚å¦‚æœæˆ‘èƒ½åœ¨è¿™ä¸ªé¢†åŸŸå¼•èµ·ä¸€äº›æ³¨æ„ï¼Œæˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸ŠèŠ±è´¹çš„æ—¶é—´æ˜¯å€¼å¾—çš„ã€‚</p><p id="0d48" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç‰¹åˆ«æ˜¯ï¼Œåœ¨æˆ‘è¯»äº†å¤§å«Â·hÂ·éŸ¦æ–¯çš„ã€Šå³å°†å‘ç”Ÿçš„äº¤æ˜“ã€‹ä¹‹åï¼Œä»–åœ¨ä¹¦ä¸­æè¿°é“:</p><blockquote class="nu"><p id="27e6" class="nv nw it bd nx ny nz oa ob oc od md dk translated">â€œä½ åº”è¯¥èƒ½å¤Ÿå€¾å¬ä»»ä½•å¸‚åœºå¯¹è‡ªèº«çš„çœ‹æ³•ï¼Œè€Œä¸æ˜¯åˆ†æä¸€ç³»åˆ—æŒ‡æ ‡æˆ–ç®—æ³•ã€‚â€</p></blockquote><p id="2b54" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">å¯†åˆ‡å€¾å¬å¸‚åœºï¼Œæ­£å¦‚ä¸‹é¢è¿™å¥è¯æ‰€è¯´çš„ï¼Œæ­£å¦‚æˆ‘ä»¬ä¸å¯èƒ½é¢„æµ‹æœªæ¥ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆéš¾å¿½è§†å³å°†å‘ç”Ÿçš„äº‹æƒ…ã€‚å…³é”®æ˜¯æ•æ‰å³å°†å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶è·Ÿéšæ½®æµã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/a777b542c2438d7808b5d61989f4817e.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*D8pfYnY8frFJKvvLLii5Mw.png"/></div></figure><p id="f62a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä½†æ˜¯å¦‚ä½•çœ‹å¾…å³å°†å‘ç”Ÿçš„äº‹æƒ…ï¼Œç†æŸ¥å¾·Â·å¨ç§‘å¤«å¾ˆä¹…ä»¥å‰å‘è¡¨çš„ä¸€ç¯‡å£°æ˜ç»™å‡ºäº†ä¸€äº›çº¿ç´¢:</p><blockquote class="nu"><p id="6e9c" class="nv nw it bd nx ny nz oa ob oc od md dk translated">â€œæˆåŠŸçš„è¯»ç£å¸¦[è¯»å›¾è¡¨]æ˜¯å¯¹åŠ›çš„ç ”ç©¶ã€‚å®ƒéœ€è¦åˆ¤æ–­å“ªä¸€æ–¹æœ‰æœ€å¤§çš„å¸å¼•åŠ›çš„èƒ½åŠ›ï¼Œä¸€ä¸ªäººå¿…é¡»æœ‰å‹‡æ°”å»æ”¯æŒé‚£ä¸€æ–¹ã€‚å°±åƒåœ¨ä¼ä¸šæˆ–ä¸ªäººçš„ç”Ÿæ´»ä¸­ä¸€æ ·ï¼Œæ¯ä¸€æ¬¡æ‘‡æ‘†éƒ½ä¼šå‡ºç°ä¸´ç•Œç‚¹ã€‚åœ¨è¿™äº›å…³é”®æ—¶åˆ»ï¼Œä¼¼ä¹ä»»ä½•ä¸€è¾¹ç¾½æ¯›çš„é‡é‡éƒ½ä¼šå†³å®šå½“å‰çš„è¶‹åŠ¿ã€‚ä»»ä½•ä¸€ä¸ªèƒ½å‘ç°è¿™äº›ç‚¹çš„äººéƒ½ä¼šèµ¢å¾—å¾ˆå¤šï¼Œå¤±å»å¾ˆå°‘ã€‚â€</p></blockquote><p id="c528" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">ä½†æ˜¯å¦‚ä½•è§£é‡Šå¸‚åœºè¡Œä¸ºå‘¢ï¼Ÿç†æŸ¥å¾·Â·å¨ç§‘å¤«<a class="ae lh" href="https://en.wikipedia.org/wiki/Richard_Wyckoff" rel="noopener ugc nofollow" target="_blank">å¯¹å¸‚åœºåŠ›é‡çš„ä¸€ä¸ªé›„è¾©çš„æè¿°å¾ˆæœ‰å¯å‘æ€§:</a></p><blockquote class="nu"><p id="a3ca" class="nv nw it bd nx ny nz oa ob oc od md dk translated">â€œå¸‚åœºå°±åƒä¸€ä¸ªç¼“æ…¢æ—‹è½¬çš„è½®å­:è½®å­æ˜¯ä¼šç»§ç»­æœåŒä¸€ä¸ªæ–¹å‘æ—‹è½¬ï¼Œé™æ­¢ä¸åŠ¨è¿˜æ˜¯å€’è½¬ï¼Œå®Œå…¨å–å†³äºä¸å®ƒçš„è½®æ¯‚å’Œè¸æ¿æ¥è§¦çš„åŠ›é‡ã€‚å³ä½¿å½“æ¥è§¦è¢«æ‰“ç ´ï¼Œæ²¡æœ‰ä»€ä¹ˆå½±å“å®ƒçš„è¿‡ç¨‹ï¼Œè½¦è½®ä¿ç•™ä¸€å®šçš„å†²åŠ›æ¥è‡ªæœ€è¿‘çš„ä¸»å¯¼åŠ›é‡ï¼Œå¹¶æ—‹è½¬ï¼Œç›´åˆ°å®ƒåœä¸‹æ¥æˆ–å—åˆ°å…¶ä»–å½±å“ã€‚â€</p></blockquote><p id="25f5" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">David H. Weis ç»™å‡ºäº†ä¸€ä¸ªæå¥½çš„ä¾‹å­ï¼Œè¯´æ˜äº†å¦‚ä½•è§£è¯»æ£’çº¿ï¼Œå¹¶å°†å…¶ä¸å¸‚åœºè¡Œä¸ºè”ç³»èµ·æ¥ã€‚é€šè¿‡ä»–å¯¹ä¸€ä¸ªå‡è®¾çš„é…’å§è¡Œä¸ºçš„æ„å»ºï¼Œæ¯ä¸€ä¸ªé…’å§éƒ½å˜å¾—æ´»è·ƒèµ·æ¥ï¼Œäº‰ç›¸å‘ä½ è®²è¿°ä»–ä»¬çš„æ•…äº‹ã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/d7eb81331692b4ddb2eea6db34fba814.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*UL0KRIWhd95uMzR4DHcMOg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">å‡è®¾çš„è¡Œä¸º</p></figure><p id="9e01" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ‰å…³åˆ†æçš„æ‰€æœ‰ç»†èŠ‚ï¼Œè¯·å‚è€ƒå¤§å«çš„ä¹¦ã€‚</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ol"><img src="../Images/50fefbda0fd08efd33ba90b7adf6c063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCJ6DhpOEjAzJtThZTPaCw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">åœ¨è¿™æœ¬ä¹¦æ­£å¼å‘è¡Œä¹‹å‰è´­ä¹°äº†å®ƒï¼Œå¹¶å¾—åˆ°äº†å¤§å«çš„ç­¾åã€‚</p></figure><p id="82ae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»£ç ä¹‹å‰ï¼Œæœ€å¥½ç»™å‡ºä¸€äº›å…³äºä½“ç§¯æ‰©æ•£åˆ†æ(VSA)çš„èƒŒæ™¯çŸ¥è¯†ã€‚VSA æ˜¯é€šè¿‡è·Ÿè¸ªä¸“ä¸šäº¤æ˜“è€…ï¼Œå³æ‰€è°“çš„åšå¸‚å•†ï¼Œç ”ç©¶é‡ä»·å…³ç³»æ¥é¢„æµ‹å¸‚åœºèµ°å‘ã€‚å¯¹å¸‚åœºè¡Œä¸ºçš„æ‰€æœ‰è§£é‡Šéƒ½éµå¾ª 3 æ¡åŸºæœ¬æ³•åˆ™:</p><ul class=""><li id="9163" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">ä¾›æ±‚æ³•åˆ™</li><li id="77e5" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">åŠªåŠ›ä¸ç»“æœçš„æ³•åˆ™</li><li id="ce90" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">å› æœå®šå¾‹</li></ul><p id="682e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨ VSA çš„å‘å±•å²ä¸Šï¼Œè¿˜æœ‰ä¸‰ä½å¤§åé¼é¼çš„äººç‰©ã€‚</p><ul class=""><li id="01f9" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">æ°è¥¿Â·åˆ©å¼—è«å°”</li><li id="f9b9" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">ç†æŸ¥å¾·Â·å¨ç§‘å¤«</li><li id="d237" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">æ±¤å§†Â·å¨å»‰å§†æ–¯</li></ul><p id="8d3a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¤§é‡çš„å­¦ä¹ èµ„æ–™å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°ã€‚å¯¹äºåˆå­¦è€…ï¼Œæˆ‘æ¨èä»¥ä¸‹ä¸¤æœ¬ä¹¦ã€‚</p><ol class=""><li id="be3d" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md nl nm nn no bi translated"><a class="ae lh" href="https://www.amazon.com/Master-Markets-Tom-Williams/dp/B001GF0LAM" rel="noopener ugc nofollow" target="_blank">æŒæ¡å¸‚åœº</a>æ±¤å§†Â·å¨å»‰å§†æ–¯è‘—</li><li id="ed2f" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated">å³å°†å‘ç”Ÿçš„äº¤æ˜“</li></ol><p id="2df4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦å¤–ï¼Œå¦‚æœä½ åªæƒ³å¿«é€Ÿæµè§ˆä¸€ä¸‹è¿™ä¸ªè¯é¢˜ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡æ¥è‡ª<a class="ae lh" href="https://school.stockcharts.com/doku.php?id=market_analysis:the_wyckoff_method" rel="noopener ugc nofollow" target="_blank">çš„å…³äº VSA çš„å¥½æ–‡ç« </a>ã€‚</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="3427" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ çš„ä¸€å¤§ä¼˜åŠ¿åœ¨äºä¸éœ€è¦ç‰¹å¾å·¥ç¨‹ã€‚VSA çš„åŸºæœ¬å¦‚å…¶åæ‰€è¨€ï¼Œæˆäº¤é‡ã€ä»·å·®çš„å¹…åº¦ã€ä½ç½®çš„å˜åŒ–ä¸è‚¡ä»·çš„å˜åŒ–å¯†åˆ‡ç›¸å…³ã€‚</p><p id="7088" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™äº›ç‰¹å¾å¯ä»¥å®šä¹‰ä¸º:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/42542cec6cb56aa8cc71ae843d942c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*xLhC-8kZUdYg_xnsT9FdoA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">é…’å§çš„å®šä¹‰</p></figure><ul class=""><li id="b915" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">éŸ³é‡:éå¸¸ç›´æ¥</li><li id="b243" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">èŒƒå›´/ä»·å·®:æœ€é«˜ä»·å’Œæ”¶ç›˜ä»·ä¹‹é—´çš„å·®å¼‚</li><li id="847c" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">æ”¶ç›˜ä»·ç›¸å¯¹äºåŒºé—´:æ”¶ç›˜ä»·æ˜¯æ¥è¿‘ä»·æ ¼æŸ±çš„é¡¶éƒ¨è¿˜æ˜¯åº•éƒ¨ï¼Ÿ</li><li id="c7b4" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">è‚¡ç¥¨ä»·æ ¼çš„å˜åŒ–:éå¸¸ç›´æ¥</li></ul><p id="66e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç½‘ä¸Šæœ‰å¾ˆå¤šå…³äº VSA çš„èµ„æ–™ã€‚æˆ‘å‘ç°è¿™ 7 ä¸ªç°åœºäº¤æ˜“ç³»åˆ—è§†é¢‘ç›¸å½“ä¸é”™ã€‚</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or os l"/></div></figure><p id="51f1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿˜æœ‰è¿™ä¸ªã€‚</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ot os l"/></div></figure><p id="a355" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ›´å¤šå†…å®¹å¯ä»¥åœ¨ YouTube ä¸Šæ‰¾åˆ°ã€‚</p><p id="fd42" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç†æŸ¥å¾·Â·å¨ç§‘å¤«åˆ›é€ äº†è®¸å¤šâ€œT4â€æœ¯è¯­ï¼Œå¦‚â€œåŠ›é‡çš„è±¡å¾â€(SOS)ã€â€œè½¯å¼±çš„è±¡å¾â€(SOW)ç­‰..ç„¶è€Œï¼Œè¿™äº›æœ¯è¯­ä¸­çš„å¤§å¤šæ•°çº¯ç²¹æ˜¯è¿™ 4 ä¸ªåŸºæœ¬ç‰¹å¾çš„ç»„åˆã€‚æˆ‘ä¸è®¤ä¸ºï¼Œåœ¨æ·±åº¦å­¦ä¹ çš„æƒ…å†µä¸‹ï¼Œè¿‡åº¦è®¾è®¡åŠŸèƒ½æ˜¯ä¸€ä»¶æ˜æ™ºçš„äº‹æƒ…ã€‚è€ƒè™‘åˆ°æ·±åº¦å­¦ä¹ çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå®Œå…¨è‡ªåŠ¨åŒ–äº†æœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹ä¸­è¿‡å»æœ€å…³é”®çš„æ­¥éª¤:ç‰¹å¾å·¥ç¨‹ã€‚æˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…æ˜¯å‘Šè¯‰ç®—æ³•çœ‹å“ªé‡Œï¼Œè€Œä¸æ˜¯ä¸€æ­¥ä¸€æ­¥åœ°ç…§çœ‹ä»–ä»¬ã€‚äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»£ç ã€‚</p><h1 id="68ac" class="ou mn it bd mo ov ow ox mr oy oz pa mu ki pb kj mx kl pc km na ko pd kp nd pe bi translated">1.æ•°æ®å‡†å¤‡</h1><p id="9b72" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr pf lt lu lv pg lx ly lz ph mb mc md im bi translated">ä¸ºäº†ä¸€è‡´æ€§ï¼Œåœ¨æ‰€æœ‰çš„<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">ğŸ“ˆPython for finance ç³»åˆ—</a>ï¼Œæˆ‘ä¼šå°½é‡é‡ç”¨ç›¸åŒçš„æ•°æ®ã€‚å…³äºæ•°æ®å‡†å¤‡çš„æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨<a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">è¿™é‡Œ</a>ï¼Œåœ¨<a class="ae lh" href="https://medium.com/@kegui/identifying-outliers-part-two-4c00b2523362" rel="noopener">è¿™é‡Œ</a>å’Œ<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="01d6" class="mm mn it pj b gy pn po l pp pq"><em class="me">#import all the libraries</em><br/>import pandas as pd<br/>import numpy as np<br/>import seaborn as sns <br/>import yfinance as yf  <em class="me">#the stock data from Yahoo Finance</em></span><span id="936e" class="mm mn it pj b gy pr po l pp pq">import matplotlib.pyplot as plt #set the parameters for plotting<br/>plt.style.use('seaborn')<br/>plt.rcParams['figure.dpi'] = 300</span><span id="afbe" class="mm mn it pj b gy pr po l pp pq">#define a function to get data<br/>def get_data(symbols, begin_date=None,end_date=None):<br/>    df = yf.download('AAPL', start = '2000-01-01',<br/>                     auto_adjust=True,#only download adjusted data<br/>                     end= '2010-12-31') <br/>    #my convention: always lowercase<br/>    df.columns = ['open','high','low',<br/>                  'close','volume'] <br/>    <br/>    return df<br/>prices = get_data('AAPL', '2000-01-01', '2010-12-31')   <br/>prices.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/20b81e6b675fa63be7ee9e570ba516da.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*i83KH7DKPDADarJJr5EJOQ.png"/></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="53b9" class="mm mn it bd mo mp mq dn mr ms mt dp mu lr mv mw mx lv my mz na lz nb nc nd iz bi translated">âœTipï¼</h2><p id="b07b" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr pf lt lu lv pg lx ly lz ph mb mc md im bi translated"><em class="me">æˆ‘ä»¬è¿™æ¬¡ä¸‹è½½çš„æ•°æ®æ˜¯é€šè¿‡è®¾ç½®</em> <code class="fe pt pu pv pj b"><em class="me">auto_adjust=True</em></code> <em class="me">è°ƒæ•´</em> <code class="fe pt pu pv pj b"><em class="me"> yfinance</em></code> <em class="me">çš„æ•°æ®ã€‚å¦‚æœä½ èƒ½å¾—åˆ°åˆ†ç¬”æˆäº¤ç‚¹çš„æ•°æ®ï¼Œå°½ä¸€åˆ‡åŠæ³•ã€‚å¦‚æœæœ‰é©¬ç§‘æ–¯Â·æ™®æ‹‰å¤š</em>çš„ <a class="ae lh" href="https://www.amazon.com/Advances-Financial-Machine-Learning-Marcos/dp/1119482089" rel="noopener ugc nofollow" target="_blank"> <em class="me"> </em>é‡‘èæœºå™¨å­¦ä¹ è¿›å±•</a> <em class="me">ä¸­é˜è¿°çš„åˆ†ç¬”æˆäº¤ç‚¹æ•°æ®å°±æ›´å¥½äº†ã€‚åæ­£ 10 å¹´è°ƒæ•´åçš„æ•°æ®åªç»™å‡º 2766 ä¸ªæ¡ç›®ï¼Œç¦»â€œå¤§æ•°æ®â€è¿˜å·®å¾—è¿œã€‚</em></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/aade114a28dbd313f869c0d43bb5ddeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*BAUadHRfLyeJJLyO3H0b0A.png"/></div></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="6826" class="ou mn it bd mo ov px ox mr oy py pa mu ki pz kj mx kl qa km na ko qb kp nd pe bi translated">2.ç‰¹å¾å·¥ç¨‹</h1><p id="af2e" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr pf lt lu lv pg lx ly lz ph mb mc md im bi translated">å°† VSA ä¸ç°ä»£æ•°æ®ç§‘å­¦ç›¸ç»“åˆçš„å…³é”®æ˜¯ï¼Œé€šè¿‡é˜…è¯»å’Œè§£é‡Šæ£’çº¿è‡ªèº«çš„è¡Œä¸ºï¼Œäººä»¬(å¸Œæœ›æ˜¯ç®—æ³•)å¯ä»¥æ„å»ºä¸€ä¸ªå¸‚åœºè¡Œä¸ºçš„æ•…äº‹ã€‚è¿™ä¸ªæ•…äº‹å¯èƒ½ä¸å®¹æ˜“è¢«äººç±»ç†è§£ï¼Œä½†å´ä»¥ä¸€ç§å¤æ‚çš„æ–¹å¼è¿ä½œã€‚</p><p id="0c91" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆäº¤é‡ç»“åˆä»·æ ¼åŒºé—´å’Œæ”¶ç›˜ä½ç½®å¾ˆå®¹æ˜“ç”¨ä»£ç æ¥è¡¨ç¤ºã€‚</p><ul class=""><li id="0da7" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">éŸ³é‡:éå¸¸ç›´æ¥</li><li id="2d45" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md op nm nn no bi translated">èŒƒå›´/ä»·å·®:æœ€é«˜ä»·å’Œæ”¶ç›˜ä»·ä¹‹é—´çš„å·®å¼‚</li></ul><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="c852" class="mm mn it pj b gy pn po l pp pq">def price_spread(df):<br/>    return (df.high - df.low)</span></pre><ul class=""><li id="ae4e" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">æ”¶ç›˜ä»·ç›¸å¯¹äºåŒºé—´:æ”¶ç›˜ä»·æ˜¯æ¥è¿‘ä»·æ ¼æŸ±çš„é¡¶éƒ¨è¿˜æ˜¯åº•éƒ¨ï¼Ÿ</li></ul><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="e973" class="mm mn it pj b gy pn po l pp pq">def close_location(df):<br/>    return (df.high - df.close) / (df.high - df.low)</span><span id="6b93" class="mm mn it pj b gy pr po l pp pq">#o indicates the close is the high of the day, and 1 means close<br/>#is the low of the day and the smaller the value, the closer the #close price to the high.</span></pre><ul class=""><li id="3e32" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md op nm nn no bi translated">è‚¡ç¥¨ä»·æ ¼çš„å˜åŒ–:éå¸¸ç›´æ¥</li></ul><p id="efe8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨åˆ°äº†æ£˜æ‰‹çš„éƒ¨åˆ†ï¼Œ</p><blockquote class="nu"><p id="99fc" class="nv nw it bd nx ny nz oa ob oc od md dk translated">"ä»æ›´å¤§çš„è§’åº¦æ¥çœ‹ï¼Œä¸€äº›ä»·æ ¼æ¡æœ‰äº†æ–°çš„å«ä¹‰."</p></blockquote><p id="d666" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">è¿™æ„å‘³ç€è¦çœ‹åˆ°å®Œæ•´çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„æ—¶é—´å°ºåº¦ä¸‹è§‚å¯Ÿè¿™ 4 ä¸ªåŸºæœ¬ç‰¹å¾ã€‚</p><p id="5164" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„æ—¶é—´è·¨åº¦é‡å»ºä¸€ä¸ªé«˜(H)ï¼Œä½(L)ï¼Œæ”¶ç›˜(C)å’Œä½“ç§¯(V)é…’å§ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="15ff" class="mm mn it pj b gy pn po l pp pq">def create_HLCV(i): <br/>'''<br/>#i: days<br/>#as we don't care about open that much, that leaves volume, <br/>#high,low and close<br/>''' </span><span id="43af" class="mm mn it pj b gy pr po l pp pq">    df = pd.DataFrame(index=prices.index)</span><span id="3e30" class="mm mn it pj b gy pr po l pp pq">    df[f'high_{i}D'] = prices.high.rolling(i).max()<br/>    df[f'low_{i}D'] = prices.low.rolling(i).min()<br/>    df[f'close_{i}D'] = prices.close.rolling(i).\<br/>                        apply(lambda x:x[-1]) <br/>    # close_2D = close as rolling backwards means today is <br/>    #literally, the last day of the rolling window.<br/>    df[f'volume_{i}D'] = prices.volume.rolling(i).sum()<br/>    <br/>    return df</span></pre><p id="2a41" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸‹ä¸€æ­¥ï¼Œæ ¹æ®ä¸åŒçš„æ—¶é—´å°ºåº¦åˆ›å»ºè¿™ 4 ä¸ªåŸºæœ¬ç‰¹å¾ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="d9de" class="mm mn it pj b gy pn po l pp pq">def create_features(i):<br/>    df = create_HLCV(i)<br/>    high = df[f'high_{i}D']<br/>    low = df[f'low_{i}D']<br/>    close = df[f'close_{i}D']<br/>    volume = df[f'volume_{i}D']<br/>    <br/>    features = pd.DataFrame(index=prices.index)<br/>    features[f'volume_{i}D'] = volume<br/>    features[f'price_spread_{i}D'] = high - low<br/>    features[f'close_loc_{i}D'] = (high - close) / (high - low)<br/>    features[f'close_change_{i}D'] = close.diff()<br/>    <br/>    return features</span></pre><p id="3c88" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘æƒ³æ¢ç´¢çš„æ—¶é—´è·¨åº¦æ˜¯ 1ã€2ã€3 å¤©å’Œ 1 å‘¨ã€1 ä¸ªæœˆã€2 ä¸ªæœˆã€3 ä¸ªæœˆï¼Œå¤§è‡´æ˜¯[1ã€2ã€3ã€5ã€20ã€40ã€60]å¤©ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›é€ ä¸€å¤§å †åŠŸèƒ½ï¼Œ</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="f533" class="mm mn it pj b gy pn po l pp pq">def create_bunch_of_features():<br/>    days = [1,2,3,5,20,40,60]<br/>    bunch_of_features = pd.DataFrame(index=prices.index)<br/>    for day in days:<br/>        f = create_features(day)<br/>        bunch_of_features = bunch_of_features.join(f)<br/>    <br/>    return bunch_of_features</span><span id="30c9" class="mm mn it pj b gy pr po l pp pq">bunch_of_features = create_bunch_of_features()<br/>bunch_of_features.info()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qc"><img src="../Images/b27b3b1c5041a74686cfaa23cf53b126.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*ShYAgXmxIwLGtoDblvZ0GQ.png"/></div></figure><p id="361d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºäº†è®©äº‹æƒ…å®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ç»“æœå°†åªæ˜¯ç¬¬äºŒå¤©çš„å›æŠ¥ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="58e2" class="mm mn it pj b gy pn po l pp pq"># next day's returns as outcomes<br/>outcomes = pd.DataFrame(index=prices.index)<br/>outcomes['close_1'] = prices.close.pct_change(-1)</span></pre><h1 id="e44d" class="ou mn it bd mo ov ow ox mr oy oz pa mu ki pb kj mx kl pc km na ko pd kp nd pe bi translated">3.ç‰¹å¾é€‰æ‹©</h1><p id="ba5d" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr pf lt lu lv pg lx ly lz ph mb mc md im bi translated">è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›ç‰¹å¾æ˜¯å¦‚ä½•ä¸ç»“æœï¼Œå³ç¬¬äºŒå¤©çš„å›æŠ¥ç›¸å…³è”çš„ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="eade" class="mm mn it pj b gy pn po l pp pq">corr = bunch_of_features.corrwith(outcomes.close_1)<br/>corr.sort_values(ascending=False).plot.barh(title = 'Strength of Correlation');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qd"><img src="../Images/f0ad8469218b73928e38f6985b097bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rvVFgRVo8P_V9jgFJ8GkHA.png"/></div></div></figure><p id="e071" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¾ˆéš¾è¯´æœ‰ä»€ä¹ˆå…³è”ï¼Œå› ä¸ºæ‰€æœ‰çš„æ•°å­—éƒ½è¿œä½äº 0.8ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="3907" class="mm mn it pj b gy pn po l pp pq">corr.sort_values(ascending=False)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/0c07e3246f1458e5c97654e9985dc6cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*4jSz5s51KGRfF80HmqEIrg.png"/></div></figure><p id="d160" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›ç‰¹æ€§æ˜¯å¦‚ä½•ç›¸äº’å…³è”çš„ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="cb70" class="mm mn it pj b gy pn po l pp pq">corr_matrix = bunch_of_features.corr()</span></pre><p id="ce7f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘æ²¡æœ‰åˆ¶ä½œçƒ­å›¾ï¼Œè€Œæ˜¯å°è¯•ä½¿ç”¨ Seaborn çš„ Clustermap æŒ‰è¡Œæˆ–åˆ—è¿›è¡Œèšç±»ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½•æ¨¡å¼å‡ºç°ã€‚Seaborn çš„ Clustermap åŠŸèƒ½éå¸¸é€‚åˆåˆ¶ä½œç®€å•çš„çƒ­å›¾ä»¥åŠåœ¨è¡Œå’Œ/æˆ–åˆ—ä¸Šéƒ½æœ‰æ ‘çŠ¶å›¾çš„åˆ†å±‚èšç±»çƒ­å›¾ã€‚è¿™å°†é‡æ–°ç»„ç»‡è¡Œå’Œåˆ—çš„æ•°æ®ï¼Œå¹¶æ˜¾ç¤ºå½¼æ­¤ç›¸é‚»çš„ç±»ä¼¼å†…å®¹ï¼Œä»¥ä¾¿æ›´æ·±å…¥åœ°ç†è§£æ•°æ®ã€‚ä¸€ä¸ªå¾ˆå¥½çš„å…³äºèšç±»å›¾çš„æ•™ç¨‹å¯ä»¥åœ¨<a class="ae lh" href="https://blog.tdwi.eu/hierarchical-clustering-in-python/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚è¦è·å¾—ä¸€ä¸ªèšç±»å›¾ï¼Œå®é™…ä¸Šåªéœ€è¦ä¸€è¡Œä»£ç ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="693f" class="mm mn it pj b gy pn po l pp pq">sns.clustermap(corr_matrix)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/8f52368acd3ebe119f7913d5aafb3a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*b1arPaOox4zU507j6dVQ_g.png"/></div></figure><p id="0b8b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚æœä½ ä»”ç»†è§‚å¯Ÿå›¾è¡¨ï¼Œå¯ä»¥å¾—å‡ºä¸€äº›ç»“è®º:</p><ol class=""><li id="79d4" class="ne nf it lk b ll lm lo lp lr om lv on lz oo md nl nm nn no bi translated">ä»·æ ¼å·®ä»·ä¸äº¤æ˜“é‡å¯†åˆ‡ç›¸å…³ï¼Œè¿™ä¸€ç‚¹åœ¨å›¾è¡¨çš„ä¸­å¿ƒå¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ã€‚</li><li id="0046" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated">å’Œåœ¨ä¸åŒæ—¶é—´è·¨åº¦ä¸Šå½¼æ­¤ç›¸å…³çš„æ¥è¿‘çš„ä½ç½®ï¼Œå¦‚å³ä¸‹è§’æ‰€ç¤ºã€‚</li><li id="fd2e" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated">ä»å·¦ä¸Šè§’çš„æ·¡é¢œè‰²æ¥çœ‹ï¼Œå¯†åˆ‡çš„ä»·æ ¼å˜åŒ–ç¡®å®ä¸å®ƒæœ¬èº«æˆå¯¹ï¼Œè¿™éå¸¸æœ‰æ„ä¹‰ã€‚ç„¶è€Œï¼Œå®ƒæœ‰ç‚¹éšæœºï¼Œå› ä¸ºåœ¨ä¸åŒçš„æ—¶é—´å°ºåº¦ä¸Šæ²¡æœ‰èšç±»æ¨¡å¼ã€‚æˆ‘å¸Œæœ› 2 å¤©çš„å˜åŒ–åº”è¯¥ä¸ 3 å¤©çš„å˜åŒ–é…å¯¹ã€‚</li></ol><p id="8b0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ¥è¿‘çš„ä»·æ ¼å·®å¼‚çš„éšæœºæ€§å¯ä»¥å½’å› äºè‚¡ç¥¨ä»·æ ¼æœ¬èº«çš„ç‰¹å¾ã€‚ç®€å•çš„ç™¾åˆ†æ¯”å›æŠ¥å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚è¿™å¯ä»¥é€šè¿‡å°†å…³é—­<code class="fe pt pu pv pj b"> diff()</code>ä¿®æ”¹ä¸ºå…³é—­<code class="fe pt pu pv pj b">pct_change()</code>æ¥å®ç°ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="e0ab" class="mm mn it pj b gy pn po l pp pq">def create_features_v1(i):<br/>    df = create_HLCV(i)<br/>    high = df[f'high_{i}D']<br/>    low = df[f'low_{i}D']<br/>    close = df[f'close_{i}D']<br/>    volume = df[f'volume_{i}D']<br/>    <br/>    features = pd.DataFrame(index=prices.index)<br/>    features[f'volume_{i}D'] = volume<br/>    features[f'price_spread_{i}D'] = high - low<br/>    features[f'close_loc_{i}D'] = (high - close) / (high - low)<br/>    #only change here<br/>    features[f'close_change_{i}D'] = close.pct_change()<br/>    <br/>    return features</span></pre><p id="387d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å†åšä¸€éã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="d1e3" class="mm mn it pj b gy pn po l pp pq">def create_bunch_of_features_v1():<br/>    days = [1,2,3,5,20,40,60]<br/>    bunch_of_features = pd.DataFrame(index=prices.index)<br/>    for day in days:<br/>        f = create_features_v1(day)#here is the only difference<br/>        bunch_of_features = bunch_of_features.join(f)<br/>    <br/>    return bunch_of_features</span><span id="9071" class="mm mn it pj b gy pr po l pp pq">bunch_of_features_v1 = create_bunch_of_features_v1()</span><span id="7805" class="mm mn it pj b gy pr po l pp pq">#check the correlation<br/>corr_v1 = bunch_of_features_v1.corrwith(outcomes.close_1)<br/>corr_v1.sort_values(ascending=False).plot.barh( title = 'Strength of Correlation')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/84f45390a623b6f52aa0ebb9143a9092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*R2aYHM57mMijm8am1kKsYw.png"/></div></figure><p id="a9db" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ‰ç‚¹ä¸åŒï¼Œä½†ä¸å¤šï¼</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="c406" class="mm mn it pj b gy pn po l pp pq">corr_v1.sort_values(ascending=False)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qh"><img src="../Images/8c162b1afd54a4c06269ce5f7a0d8510.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*ISsXFA4unUNG4D6GoTDcHA.png"/></div></figure><p id="6ab3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§ä¼šæ€æ ·ï¼Ÿ</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="7f24" class="mm mn it pj b gy pn po l pp pq">corr_matrix_v1 = bunch_of_features_v1.corr()<br/>sns.clustermap(corr_matrix_v1, cmap='coolwarm', linewidth=1)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/52d994da1cb73ecc02bb62c70145edf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*mG9mnv3T3TNgmslzMffL-A.png"/></div></figure><p id="5035" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å—¯ï¼Œæ¨¡å¼ä¿æŒä¸å˜ã€‚è®©æˆ‘ä»¬å°†é»˜è®¤æ–¹æ³•ä»â€œå¹³å‡â€æ”¹ä¸ºâ€œç—…æˆ¿â€ã€‚è¿™ä¸¤ç§æ–¹æ³•ç±»ä¼¼ï¼Œä½†â€œwardâ€æ›´åƒ K-MEANs èšç±»ã€‚å…³äºè¿™ä¸ªè¯é¢˜çš„å¾ˆå¥½çš„æ•™ç¨‹å¯ä»¥åœ¨<a class="ae lh" href="https://blog.tdwi.eu/hierarchical-clustering-in-python/" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/d6e5988f97949542bef918f8ecabdbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*XeSE_lSomLGXmftHLjXIxQ.png"/></div></figure><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="1a47" class="mm mn it pj b gy pn po l pp pq">sns.clustermap(corr_matrix_v1, cmap='coolwarm', linewidth=1,<br/>                         method='ward')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/8c157574622ace871c793727b204d1e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*1c34ElD3QtU1M97xHgutLw.png"/></div></figure><p id="a103" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºäº†é€‰æ‹©ç‰¹æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‘é€‰é‚£äº›ä¸ç›®æ ‡ç»“æœæœ‰æœ€å¼ºã€æœ€æŒä¹…å…³ç³»çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå°½é‡å‡å°‘æ‰€é€‰è¦ç´ ä¸­çš„é‡å æˆ–å…±çº¿æ€§ï¼Œä»¥é¿å…å™ªéŸ³å’Œè®¡ç®—æœºèƒ½åŠ›çš„æµªè´¹ã€‚å¯¹äºé‚£äº›åœ¨èšç±»ä¸­é…å¯¹åœ¨ä¸€èµ·çš„ç‰¹å¾ï¼Œæˆ‘åªæŒ‘é€‰ä¸ç»“æœæœ‰æ›´å¼ºç›¸å…³æ€§çš„ç‰¹å¾ã€‚é€šè¿‡æŸ¥çœ‹èšç±»å›¾ï¼Œå¯ä»¥æŒ‘é€‰å‡ºä¸€äº›ç‰¹å¾ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="2f93" class="mm mn it pj b gy pn po l pp pq">deselected_features_v1 = ['close_loc_3D','close_loc_60D',<br/>                       'volume_3D', 'volume_60D',<br/>                       'price_spread_3D','price_spread_60D',<br/>                       'close_change_3D','close_change_60D']</span><span id="f963" class="mm mn it pj b gy pr po l pp pq">selected_features_v1 = bunch_of_features.drop \<br/>(labels=deselected_features_v1, axis=1)</span></pre><p id="9c39" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€çœ‹é…å¯¹å›¾ï¼Œä¸€ä¸ª<a class="ae lh" href="https://seaborn.pydata.org/generated/seaborn.pairplot.html" rel="noopener ugc nofollow" target="_blank">é…å¯¹å›¾</a>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•æ¥è¯†åˆ«åç»­åˆ†æçš„è¶‹åŠ¿ï¼Œå…è®¸æˆ‘ä»¬çœ‹åˆ°å•ä¸ªå˜é‡çš„åˆ†å¸ƒå’Œå¤šä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯ä¸€è¡Œä»£ç ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="bd98" class="mm mn it pj b gy pn po l pp pq">sns.pairplot(selected_features_v1)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qk"><img src="../Images/c9b2bb866c38e06156f4c946e0054451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*qB-9ZWwvh62WhMhxhfWtMQ.png"/></div></figure><p id="cb77" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å›¾è¡¨é“ºå¤©ç›–åœ°ï¼Œå¾ˆéš¾çœ‹æ¸…ã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªå°ç¾¤ä½“ä¸ºä¾‹ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="7db8" class="mm mn it pj b gy pn po l pp pq">selected_features_1D_list = ['volume_1D', 'price_spread_1D',\         'close_loc_1D', 'close_change_1D']</span><span id="b857" class="mm mn it pj b gy pr po l pp pq">selected_features_1D = selected_features_v1\<br/>                       [selected_features_1D_list]</span><span id="f866" class="mm mn it pj b gy pr po l pp pq">sns.pairplot(selected_features_1D)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ql"><img src="../Images/9b7ef51a34d36552c6ad3cf84d810c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*YmkfaNFqdYhMQYcs_ym-Bw.png"/></div></figure><p id="c043" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ç«‹å³æ³¨æ„åˆ°ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯æœ‰å¼‚å¸¸å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯åˆ†å¸ƒä¸æ¥è¿‘æ­£å¸¸ã€‚</p><p id="67f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨è®©æˆ‘ä»¬æ¥å¤„ç†ç¦»ç¾¤å€¼ã€‚ä¸ºäº†ä¸€æ°”å‘µæˆï¼Œæˆ‘ä¼šå°†ç»“æœä¸ç‰¹å¾ç»“åˆèµ·æ¥ï¼Œå¹¶ä¸€èµ·åˆ é™¤å¼‚å¸¸å€¼ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="9dc7" class="mm mn it pj b gy pn po l pp pq">features_outcomes = selected_features_v1.join(outcomes)<br/>features_outcomes.info()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qm"><img src="../Images/2c958a142d8645f574560c3897b7bdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*eoX4mTpOO3N61I7qS4GuAQ.png"/></div></figure><p id="9212" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘å°†ä½¿ç”¨ä¸è¿™é‡Œæè¿°çš„<a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener"/>ã€è¿™é‡Œæè¿°çš„<a class="ae lh" href="https://medium.com/@kegui/identifying-outliers-part-two-4c00b2523362" rel="noopener"/>å’Œè¿™é‡Œæè¿°çš„<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener"/>ç›¸åŒçš„æ–¹æ³•æ¥ç§»é™¤å¼‚å¸¸å€¼ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="1689" class="mm mn it pj b gy pn po l pp pq">stats = features_outcomes.describe()<br/>def get_outliers(df, i=4): <br/>    #i is number of sigma, which define the boundary along mean<br/>    outliers = pd.DataFrame()<br/>    <br/>    for col in df.columns:<br/>        mu = stats.loc['mean', col]<br/>        sigma = stats.loc['std', col]<br/>        condition = (df[col] &gt; mu + sigma * i) | (df[col] &lt; mu - sigma * i) <br/>        outliers[f'{col}_outliers'] = df[col][condition]<br/>    <br/>    return outliers</span><span id="120e" class="mm mn it pj b gy pr po l pp pq">outliers = get_outliers(features_outcomes, i=1)<br/>outliers.info()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qn"><img src="../Images/4f2b8e799f58bd6cf8cd5dd97d04e1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*_Fnwc5fiYz1ZAhXoBIP_ew.png"/></div></figure><p id="9e26" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘è®¾ç½® 1 ä¸ªæ ‡å‡†å·®ä½œä¸ºè¾¹ç•Œï¼ŒæŠŠå¤§éƒ¨åˆ†çš„ç¦»ç¾¤å€¼æŒ–å‡ºæ¥ã€‚ç„¶åç§»é™¤æ‰€æœ‰å¼‚å¸¸å€¼å’Œ NaN å€¼ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="56c1" class="mm mn it pj b gy pn po l pp pq">features_outcomes_rmv_outliers = features_outcomes.drop(index = outliers.index).dropna()<br/>features_outcomes_rmv_outliers.info()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/8dc9357f5f6efa9addbf2ce17ec42c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*Lsr-gFJ2M2z-Dc2bS-wMpQ.png"/></div></figure><p id="48e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å‰”é™¤å¼‚å¸¸å€¼åï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡ç»˜åˆ¶é…å¯¹å›¾ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="4431" class="mm mn it pj b gy pn po l pp pq">sns.pairplot(features_outcomes_rmv_outliers, vars=selected_features_1D_list);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qo"><img src="../Images/23b6aa8510a2b32c5d28b857093ae75d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*aKrmkmy7zFFvfwCVuRgGdQ.png"/></div></figure><p id="1762" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨ï¼Œæƒ…å†µçœ‹èµ·æ¥å¥½äº†å¾ˆå¤šï¼Œä½†å‡ ä¹æ— æ³•å¾—å‡ºä»»ä½•æœ‰ç”¨çš„ç»“è®ºã€‚è¿™å°†æ˜¯å¾ˆå¥½çš„ï¼Œçœ‹çœ‹å“ªäº›æ™¯ç‚¹æ˜¯å‘ä¸‹ç§»åŠ¨ï¼Œå“ªäº›æ˜¯å‘ä¸Šç§»åŠ¨ä¸è¿™äº›åŠŸèƒ½ç›¸ç»“åˆã€‚æˆ‘å¯ä»¥æå–è‚¡ç¥¨ä»·æ ¼å˜åŒ–çš„ä¿¡å·ï¼Œå¹¶åœ¨å›¾ä¸Šå¢åŠ ä¸€ä¸ªé¢å¤–çš„ç»´åº¦ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="c66b" class="mm mn it pj b gy pn po l pp pq">features_outcomes_rmv_outliers['sign_of_close'] = features_outcomes_rmv_outliers['close_1'].apply(np.sign)</span></pre><p id="f962" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬é‡æ–°ç»˜åˆ¶<code class="fe pt pu pv pj b">pairplot()</code>,ç¨å¾®è°ƒæ•´ä¸€ä¸‹ï¼Œä½¿å›¾å½¢æ›´åŠ æ¼‚äº®ã€‚</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="8ad8" class="mm mn it pj b gy pn po l pp pq">sns.pairplot(features_outcomes_rmv_outliers, <br/>             vars=selected_features_1D_list,<br/>             diag_kind='kde',<br/>             palette='husl', hue='sign_of_close',<br/>             markers = ['*', '&lt;', '+'], <br/>             plot_kws={'alpha':0.3});#transparence:0.3</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qp"><img src="../Images/eab7e27cb96b63a36a4ae7bdb3242a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycLBag_9HJOkffWq3AGgEw.png"/></div></div></figure><p id="146c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨ï¼Œçœ‹èµ·æ¥å¥½å¤šäº†ã€‚æ˜¾ç„¶ï¼Œå½“ä»·æ ¼ä¸Šæ¶¨æ—¶ï¼Œå®ƒä»¬(è“ç‚¹)å¯†åº¦æ›´å¤§ï¼Œèšé›†åœ¨æŸä¸ªä½ç½®ã€‚è€Œåœ¨æƒ…ç»ªä½è½çš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šå››å¤„è”“å»¶ã€‚</p><p id="46e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">å¦‚æœä½ èƒ½ç»™è¿™å¯¹æ­æ¡£çš„æƒ…èŠ‚æä¾›ä¸€äº›çº¿ç´¢ï¼Œå¹¶åœ¨ä¸‹é¢ç•™ä¸‹ä½ çš„è¯„è®ºï¼Œæˆ‘å°†ä¸èƒœæ„Ÿæ¿€ï¼Œè°¢è°¢ã€‚</em> </strong></p><p id="3c1c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä»¥ä¸‹æ˜¯æœ¬æ–‡ä¸­ä½¿ç”¨çš„æ‰€æœ‰ä»£ç çš„æ‘˜è¦:</p><pre class="ks kt ku kv gt pi pj pk pl aw pm bi"><span id="c1d5" class="mm mn it pj b gy pn po l pp pq"><em class="me">#import all the libraries</em><br/>import pandas as pd<br/>import numpy as np<br/>import seaborn as sns <br/>import yfinance as yf  <em class="me">#the stock data from Yahoo Finance</em></span><span id="11a4" class="mm mn it pj b gy pr po l pp pq">import matplotlib.pyplot as plt #set the parameters for plotting<br/>plt.style.use('seaborn')<br/>plt.rcParams['figure.dpi'] = 300</span><span id="1cb0" class="mm mn it pj b gy pr po l pp pq">#define a function to get data<br/>def get_data(symbols, begin_date=None,end_date=None):<br/>    df = yf.download('AAPL', start = '2000-01-01',<br/>                     auto_adjust=True,#only download adjusted data<br/>                     end= '2010-12-31') <br/>    #my convention: always lowercase<br/>    df.columns = ['open','high','low',<br/>                  'close','volume'] <br/>    <br/>    return df</span><span id="9b05" class="mm mn it pj b gy pr po l pp pq">prices = get_data('AAPL', '2000-01-01', '2010-12-31')</span><span id="5cf2" class="mm mn it pj b gy pr po l pp pq">#create some features<br/>def create_HLCV(i):</span><span id="b68d" class="mm mn it pj b gy pr po l pp pq">#as we don't care open that much, that leaves volume, <br/>#high,low and close</span><span id="c2a8" class="mm mn it pj b gy pr po l pp pq">df = pd.DataFrame(index=prices.index)<br/>    df[f'high_{i}D'] = prices.high.rolling(i).max()<br/>    df[f'low_{i}D'] = prices.low.rolling(i).min()<br/>    df[f'close_{i}D'] = prices.close.rolling(i).\<br/>                        apply(lambda x:x[-1]) <br/>    # close_2D = close as rolling backwards means today is <br/>    # literly the last day of the rolling window.<br/>    df[f'volume_{i}D'] = prices.volume.rolling(i).sum()<br/>    <br/>    return df</span><span id="593e" class="mm mn it pj b gy pr po l pp pq">def create_features_v1(i):<br/>    df = create_HLCV(i)<br/>    high = df[f'high_{i}D']<br/>    low = df[f'low_{i}D']<br/>    close = df[f'close_{i}D']<br/>    volume = df[f'volume_{i}D']<br/>    <br/>    features = pd.DataFrame(index=prices.index)<br/>    features[f'volume_{i}D'] = volume<br/>    features[f'price_spread_{i}D'] = high - low<br/>    features[f'close_loc_{i}D'] = (high - close) / (high - low)<br/>    features[f'close_change_{i}D'] = close.pct_change()<br/>    <br/>    return features</span><span id="314e" class="mm mn it pj b gy pr po l pp pq">def create_bunch_of_features_v1():<br/>'''<br/>the timespan that i would like to explore <br/>are 1, 2, 3 days and 1 week, 1 month, 2 month, 3 month<br/>which roughly are [1,2,3,5,20,40,60]<br/>'''<br/>    days = [1,2,3,5,20,40,60]<br/>    bunch_of_features = pd.DataFrame(index=prices.index)<br/>    for day in days:<br/>        f = create_features_v1(day)<br/>        bunch_of_features = bunch_of_features.join(f)<br/>    <br/>    return bunch_of_features</span><span id="3c9e" class="mm mn it pj b gy pr po l pp pq">bunch_of_features_v1 = create_bunch_of_features_v1()</span><span id="ef04" class="mm mn it pj b gy pr po l pp pq">#define the outcome target<br/>#hereï¼Œ to make thing easy to understand, i will only try to predict #the next days's return<br/>outcomes = pd.DataFrame(index=prices.index)</span><span id="990b" class="mm mn it pj b gy pr po l pp pq"># next day's returns<br/>outcomes['close_1'] = prices.close.pct_change(-1)</span><span id="ac55" class="mm mn it pj b gy pr po l pp pq">#decide which features are abundant from cluster map<br/>deselected_features_v1 = ['close_loc_3D','close_loc_60D',<br/>                       'volume_3D', 'volume_60D',<br/>                       'price_spread_3D','price_spread_60D',<br/>                       'close_change_3D','close_change_60D']<br/>selected_features_v1 = bunch_of_features_v1.drop(labels=deselected_features_v1, axis=1)</span><span id="aff9" class="mm mn it pj b gy pr po l pp pq">#join the features and outcome together to remove the outliers<br/>features_outcomes = selected_features_v1.join(outcomes)<br/>stats = features_outcomes.describe()</span><span id="f888" class="mm mn it pj b gy pr po l pp pq">#define the method to identify outliers<br/>def get_outliers(df, i=4): <br/>    #i is number of sigma, which define the boundary along mean<br/>    outliers = pd.DataFrame()<br/>    <br/>    for col in df.columns:<br/>        mu = stats.loc['mean', col]<br/>        sigma = stats.loc['std', col]<br/>        condition = (df[col] &gt; mu + sigma * i) | (df[col] &lt; mu -   sigma * i) <br/>        outliers[f'{col}_outliers'] = df[col][condition]<br/>    <br/>    return outliers</span><span id="6e0c" class="mm mn it pj b gy pr po l pp pq">outliers = get_outliers(features_outcomes, i=1)</span><span id="884c" class="mm mn it pj b gy pr po l pp pq">#remove all the outliers and Nan value<br/>features_outcomes_rmv_outliers = features_outcomes.drop(index = outliers.index).dropna()</span></pre><p id="6a7e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘çŸ¥é“è¿™ç¯‡æ–‡ç« å¤ªé•¿äº†ï¼Œæˆ‘æœ€å¥½æŠŠå®ƒç•™åœ¨è¿™é‡Œã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œçœ‹çœ‹æˆ‘æ˜¯å¦æœ‰åŠæ³•è§£å†³åˆ†å¸ƒé—®é¢˜ã€‚æ•¬è¯·æœŸå¾…ï¼</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="8aa5" class="ou mn it bd mo ov px ox mr oy py pa mu ki pz kj mx kl qa km na ko qb kp nd pe bi translated">å‚è€ƒ</h1><ol class=""><li id="aa6e" class="ne nf it lk b ll ng lo nh lr ni lv nj lz nk md nl nm nn no bi translated">å³å°†å‘ç”Ÿçš„äº¤æ˜“</li><li id="1494" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated">ç½—æ´›ç£å¸¦[pseudã€‚]ï¼Œç£å¸¦é˜…è¯»çš„ç ”ç©¶(ä¼¯çµé¡¿ï¼Œä½›è’™ç‰¹å·:å¼—é›·æ³½ï¼Œ1910)ï¼Œ95ã€‚</li></ol></div></div>    
</body>
</html>