<html>
<head>
<title>Word embeddings with code2vec, GloVe, and spaCy.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">code2vecã€GloVe å’Œ spaCy çš„å•è¯åµŒå…¥ã€‚</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/word-embeddings-with-code2vec-glove-and-spacy-5b26420bf632?source=collection_archive---------21-----------------------#2020-03-18">https://towardsdatascience.com/word-embeddings-with-code2vec-glove-and-spacy-5b26420bf632?source=collection_archive---------21-----------------------#2020-03-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7371" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å¦‚ä½•æ ¹æ®æ‚¨çš„ç”¨ä¾‹é€‰æ‹©å•è¯åµŒå…¥ç®—æ³•ï¼Ÿ</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e72028ca5a3ed5748e5db407463d1575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKjt3uCh5k8PNqa5B00azQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">æ¥æº:<a class="ae ky" href="https://pixabay.com/users/lukasbieri-4664461/" rel="noopener ugc nofollow" target="_blank">å¢å¡æ–¯æ¯”è€¶é‡Œ</a>ç»ç”±<a class="ae ky" href="https://pixabay.com/photos/laptop-macbook-home-office-switched-2838917/" rel="noopener ugc nofollow" target="_blank">çš®å…‹æ–¯å·´ä¼Š</a> (CC0)</p></figure><p id="d036" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ”¹å–„ä½ çš„æœºå™¨å­¦ä¹ æ¨¡å‹çš„ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•æ˜¯ä½¿ç”¨<a class="ae ky" href="https://en.wikipedia.org/wiki/Word_embedding" rel="noopener ugc nofollow" target="_blank">å•è¯åµŒå…¥</a>ã€‚ä½¿ç”¨å•è¯åµŒå…¥ï¼Œæ‚¨å¯ä»¥æ•è·æ–‡æ¡£ä¸­å•è¯çš„ä¸Šä¸‹æ–‡ï¼Œç„¶åæ‰¾åˆ°è¯­ä¹‰å’Œå¥æ³•çš„ç›¸ä¼¼æ€§ã€‚</p><p id="203d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå•è¯åµŒå…¥æŠ€æœ¯çš„ä¸€ä¸ªä¸å¯»å¸¸çš„åº”ç”¨ã€‚æˆ‘ä»¬å°†åŠªåŠ›ä¸º OpenAPI è§„èŒƒæ‰¾åˆ°æœ€å¥½çš„å•è¯åµŒå…¥æŠ€æœ¯ã€‚ä½œä¸º OpenAPI è§„èŒƒçš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª<a class="ae ky" href="https://apis.guru/" rel="noopener ugc nofollow" target="_blank"> apis-guru </a>çš„ OpenAPI è§„èŒƒçš„å…è´¹èµ„æºğŸ˜ã€‚</p><p id="dbd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ€å¤§çš„æŒ‘æˆ˜æ˜¯ OpenAPI è§„èŒƒæ—¢ä¸æ˜¯è‡ªç„¶è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯ä»£ç ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¯ä»¥è‡ªç”±ä½¿ç”¨ä»»ä½•å¯ç”¨çš„åµŒå…¥æ¨¡å‹ã€‚åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶ä¸‰ä¸ªå¯èƒ½çš„å€™é€‰è€…:code2vecã€GloVe å’Œ spaCyã€‚</p><p id="14a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://urialon.cswp.cs.technion.ac.il/wp-content/uploads/sites/83/2018/12/code2vec-popl19.pdf" rel="noopener ugc nofollow" target="_blank"> code2vec </a>æ˜¯ä¸€ä¸ªå­¦ä¹ ä¸æºä»£ç ç›¸å…³çš„ç±»æ¯”çš„ç¥ç»æ¨¡å‹ã€‚è¯¥æ¨¡å‹æ˜¯åœ¨ Java ä»£ç æ•°æ®åº“ä¸Šè®­ç»ƒçš„ï¼Œä½†æ˜¯æ‚¨å¯ä»¥å°†å…¶åº”ç”¨äºä»»ä½•ä»£ç åº“ã€‚</p><p id="8b6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åæ˜¯<a class="ae ky" href="https://nlp.stanford.edu/projects/glove/" rel="noopener ugc nofollow" target="_blank">æ‰‹å¥—</a>ã€‚GloVe æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†(NLP)çš„ä¸€ç§å¸¸ç”¨ç®—æ³•ã€‚å®ƒåœ¨ç»´åŸºç™¾ç§‘å’Œ Gigawords ä¸Šæ¥å—äº†è®­ç»ƒã€‚</p><p id="1e88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ€åï¼Œæˆ‘ä»¬æœ‰<a class="ae ky" href="https://spacy.io/usage/vectors-similarity" rel="noopener ugc nofollow" target="_blank">ç©ºé—´</a>ã€‚è™½ç„¶ spaCy æ˜¯æœ€è¿‘æ‰å¼€å‘çš„ï¼Œä½†è¯¥ç®—æ³•å·²ç»ä»¥ä¸–ç•Œä¸Šæœ€å¿«çš„å•è¯åµŒå…¥è€Œé—»åã€‚</p><p id="c0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›ç®—æ³•ä¸­å“ªä¸€ä¸ªæ›´é€‚åˆ OpenAPI æ•°æ®é›†ï¼Œå“ªä¸€ä¸ªæ›´é€‚åˆ OpenAPI è§„èŒƒğŸ‘€ã€‚æˆ‘æŠŠè¿™ç¯‡æ–‡ç« åˆ†æˆå…­ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸€éƒ¨åˆ†éƒ½åŒ…å«ä»£ç ç¤ºä¾‹å’Œä¸€äº›å°†æ¥ä½¿ç”¨çš„æŠ€å·§ï¼Œè¿˜æœ‰ä¸€ä¸ªç»“è®ºã€‚</p><ol class=""><li id="f040" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">ä¸‹è½½æ•°æ®é›†</li><li id="54a9" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">ä¸‹è½½è¯æ±‡</li><li id="15ab" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">æå–å­—æ®µåç§°</li><li id="b7db" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">ä»¤ç‰ŒåŒ–å¯†é’¥</li><li id="8d57" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">åˆ›å»ºå­—æ®µåç§°çš„æ•°æ®é›†</li><li id="6fc1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">æµ‹è¯•åµŒå…¥</li><li id="c8b4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">ç»“è®º</li></ol><p id="75d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹äº†ã€‚</p><h1 id="ddf7" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 1ã€‚ä¸‹è½½æ•°æ®é›†âœ… </strong></h1><p id="7db1" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½æ•´ä¸ª<a class="ae ky" href="https://apis.guru/" rel="noopener ugc nofollow" target="_blank">API-guru</a>æ•°æ®åº“ã€‚</p><p id="79ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ‚¨ä¼šæ³¨æ„åˆ°å¤§å¤šæ•° API-guru è§„èŒƒéƒ½æ˜¯ Swagger 2.0 æ ¼å¼çš„ã€‚ä½†æ˜¯â€¦â€¦open API è§„èŒƒçš„æœ€æ–°ç‰ˆæœ¬æ˜¯<a class="ae ky" href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.3.md" rel="noopener ugc nofollow" target="_blank"> OpenAPI 3.0 </a>ã€‚æ‰€ä»¥è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ Unmock è„šæœ¬å°†æ•´ä¸ªæ•°æ®é›†è½¬æ¢æˆè¿™ç§æ ¼å¼ï¼æ‚¨å¯ä»¥æŒ‰ç…§<a class="ae ky" href="https://github.com/meeshkan/unmock-openapi-scripts/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> unmock-openapi-scripts è‡ªè¿°æ–‡ä»¶</a>ä¸­çš„è¯´æ˜å®Œæˆæ­¤æ“ä½œã€‚</p><p id="c3ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´(ä½ ä¸ä¼šå˜æˆğŸ§“ï¼Œä½†æˆ‘ä»¬è¯´çš„æ˜¯å‡ ä¸ªå°æ—¶â°)æœ€ç»ˆï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªå…·æœ‰å„ç§è§„æ ¼çš„å¤§å‹æ•°æ®é›†ğŸ“ã€‚</p><h1 id="e66e" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 2ã€‚ä¸‹è½½è¯æ±‡âœ… </strong></h1><p id="9284" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated"><strong class="lb iu">ä»£ç  2vec </strong></p><ol class=""><li id="51ed" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">ä»<a class="ae ky" href="https://github.com/tech-srl/code2vec" rel="noopener ugc nofollow" target="_blank"> code2vec GitHub é¡µé¢</a>ä¸‹è½½æ¨¡å‹ã€‚æŒ‰ç…§ README.md çš„å¿«é€Ÿå…¥é—¨éƒ¨åˆ†ä¸­çš„è¯´æ˜è¿›è¡Œæ“ä½œï¼Œç„¶åå¯¼å‡ºè®­ç»ƒå¥½çš„ä»¤ç‰Œã€‚</li><li id="c8db" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">ä½¿ç”¨<a class="ae ky" href="https://pypi.org/project/gensim/" rel="noopener ugc nofollow" target="_blank"> gensim </a>åº“åŠ è½½ã€‚</li></ol><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="c081" class="nl mk it nh b gy nm nn l no np">model = word2vec.load_word2vec_format(vectors_text_path, binary=False)</span><span id="aef9" class="nl mk it nh b gy nq nn l no np">model = word2vec.load_word2vec_format(vectors_text_path, binary=False)</span></pre><p id="817b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">æ‰‹å¥—</strong></p><ol class=""><li id="d321" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">ä»ç½‘ç«™ä¸Šä¸‹è½½ä¸€ä¸ª<a class="ae ky" href="https://nlp.stanford.edu/projects/glove/" rel="noopener ugc nofollow" target="_blank">æ‰‹å¥—</a>è¯æ±‡ã€‚æˆ‘ä»¬é€‰æ‹©äº†æœ€å¤§çš„ä¸€ä¸ªï¼Œå› ä¸ºå®ƒæ‰¾åˆ°æˆ‘ä»¬æ‰€æœ‰å•è¯çš„å‡ ç‡æ›´é«˜ã€‚æ‚¨å¯ä»¥é€‰æ‹©æƒ³è¦ä¸‹è½½å®ƒçš„ä½ç½®ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæœ€å¥½å°†å®ƒå­˜å‚¨åœ¨å·¥ä½œç›®å½•ä¸­ã€‚</li><li id="6a1c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">æ‰‹åŠ¨åŠ è½½æ‰‹å¥—è¯æ±‡ã€‚</li></ol><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="2ec7" class="nl mk it nh b gy nm nn l no np">embeddings_dict = {}<br/>with open("../glove/glove.6B.300d.txt", 'r', encoding="utf-8") as f:<br/>    for line in f:<br/>        values = line.split()<br/>        word = values[0]<br/>        vector = np.asarray(values[1:], "float32")<br/>        embeddings_dict[word] = vector</span></pre><p id="54bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">ç©ºé—´</strong></p><p id="744b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åŠ è½½å¤§ç©ºé—´è¯æ±‡:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="ed01" class="nl mk it nh b gy nm nn l no np">nlp = spacy.load(â€˜en_core_web_lgâ€™).</span></pre><h1 id="5efa" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 3ã€‚æå–å­—æ®µåç§°âœ… </strong></h1><p id="a010" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">OpenAPI è§„èŒƒåç§°çš„å®Œæ•´åˆ—è¡¨å¯ä»¥ä»<code class="fe nr ns nt nh b">scripts/fetch-list.sh</code>æ–‡ä»¶ä¸­è·å¾—ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ä»¥ä¸‹å‡½æ•°(å¯¹äº Windows)è·å¾—:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="eff1" class="nl mk it nh b gy nm nn l no np">def getListOfFiles(dirName):<br/>    listOfFile = os.listdir(dirName)<br/>    allFiles = list()<br/>    for entry in listOfFile:<br/>        fullPath = posixpath.join(dirName, entry)<br/>        if posixpath.isdir(fullPath):<br/>            allFiles = allFiles + getListOfFiles(fullPath)<br/>        else:<br/>            allFiles.append(fullPath)<br/>                <br/>    return allFiles</span></pre><p id="6f6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦ä¸€ä»¶å¤§äº‹æ˜¯ä»æˆ‘ä»¬çš„ OpenAPI è§„èŒƒä¸­è·å–å­—æ®µåã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ky" href="https://pypi.org/project/openapi-typed-2/" rel="noopener ugc nofollow" target="_blank"> openapi ç±»å‹åº“</a>ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code class="fe nr ns nt nh b">get_fields</code>å‡½æ•°ï¼Œå®ƒé‡‡ç”¨ OpenAPI è§„èŒƒå¹¶è¿”å›ä¸€ä¸ªå­—æ®µååˆ—è¡¨:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="94d2" class="nl mk it nh b gy nm nn l no np">def get_fields_from_schema(o: Schema) -&gt; Sequence[str]:<br/>    return [<br/>        *(o['properties'].keys() if ('properties' in o) and (type(o['properties']) == type({})) else []),<br/>        *(sum([<br/>            get_fields_from_schema(schema) for schema in o['properties'].values() if not ('$ref' in schema) and type(schema) == type({})], []) if ('properties' in o) and ($        *(get_fields_from_schema(o['additionalProperties']) if ('additionalProperties' in o) and (type(o['additionalProperties']) == type({})) else []),<br/>        *(get_fields_from_schema(o['items']) if ('items' in o) and  (type(o['items'] == type({}))) else []),<br/>    ]<br/><br/>def get_fields_from_schemas(o: Mapping[str, Union[Schema, Reference]]) -&gt; Sequence[str]:<br/>    return sum([get_fields_from_schema(cast(Schema, maybe_schema)) for maybe_schema in o.values() if not ('$ref' in maybe_schema) and (type(maybe_schema) == type({}))], [])<br/><br/><br/>def get_fields_from_components(o: Components) -&gt; Sequence[str]:<br/>    return [<br/>        *(get_fields_from_schemas(o['schemas']) if 'schemas' in o else []),<br/>            ]                                                                                                                                                                       <br/><br/>def get_fields(o: OpenAPIObject) -&gt; Sequence[str]:<br/>    return [<br/>        *(get_fields_from_components(o['components']) if 'components' in o else []),<br/>    ]</span></pre><p id="ca93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­å–œä½ ã€‚ç°åœ¨æˆ‘ä»¬çš„æ•°æ®é›†å‡†å¤‡å¥½äº†ã€‚</p><h1 id="cc33" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 4ã€‚ä»¤ç‰ŒåŒ–å¯†é’¥âœ… </strong></h1><p id="c895" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">å­—æ®µåå¯èƒ½åŒ…å«æ ‡ç‚¹ç¬¦å·ï¼Œå¦‚<code class="fe nr ns nt nh b">_</code>å’Œ<code class="fe nr ns nt nh b">-</code>ç¬¦å·ï¼Œæˆ–éª†é©¼å¤§å°å†™å•è¯ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›å•è¯åˆ†å‰²æˆç§°ä¸ºè®°å·çš„å°å—ã€‚</p><p id="7aeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸‹é¢çš„<code class="fe nr ns nt nh b">camel-case</code>å‡½æ•°è¯†åˆ«è¿™äº› camel case å•è¯ã€‚é¦–å…ˆï¼Œå®ƒæ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ ‡ç‚¹ç¬¦å·ã€‚å¦‚æœæ˜¯ï¼Œé‚£å°±ä¸æ˜¯éª†é©¼æ¡ˆã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥å•è¯ä¸­æ˜¯å¦æœ‰å¤§å†™å­—æ¯(ä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦)ã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="4fe8" class="nl mk it nh b gy nm nn l no np">def camel_case(example):      <br/>    if  any(x in example for x  in string.punctuation)==True:<br/>        return False<br/>    else:<br/>        if any(list(map(str.isupper, example[1:-1])))==True:<br/>            return True<br/>        else:<br/>            return False</span></pre><p id="1ce5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸‹ä¸€ä¸ªå‡½æ•°<code class="fe nr ns nt nh b">camel_case_split</code>å°† camel case å•è¯æ‹†åˆ†æˆå¤šä¸ªç‰‡æ®µã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥è¯†åˆ«å¤§å†™å­—æ¯ï¼Œå¹¶æ ‡è®°å‡ºå¤§å°å†™å˜åŒ–çš„åœ°æ–¹ã€‚è¯¥å‡½æ•°è¿”å›æ‹†åˆ†åçš„å•è¯åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œå­—æ®µå<code class="fe nr ns nt nh b">BodyAsJson</code>è½¬æ¢æˆåˆ—è¡¨<code class="fe nr ns nt nh b">[â€˜Bodyâ€™, â€˜Asâ€™,'Json']</code>ã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="a513" class="nl mk it nh b gy nm nn l no np">def camel_case_split(word):<br/>    idx = list(map(str.isupper, word))<br/>    case_change = [0]<br/>    for (i, (x, y)) in enumerate(zip(idx, idx[1:])):<br/>        if x and not y:  <br/>            case_change.append(i)<br/>        elif not x and y:  <br/>            case_change.append(i+1)<br/>    case_change.append(len(word))<br/>    return [word[x:y] for x, y in zip(case_change, case_change[1:]) if x &lt; y]</span></pre><p id="67ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™ä¸ª<code class="fe nr ns nt nh b">camel_case_split</code>å‡½æ•°ç„¶åè¢«ç”¨åœ¨ä¸‹é¢çš„è®°å·åŒ–ç®—æ³•ä¸­ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥å•è¯ä¸­æ˜¯å¦æœ‰æ ‡ç‚¹ç¬¦å·ã€‚ç„¶åï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªè¯åˆ†æˆå‡ éƒ¨åˆ†ã€‚æœ‰å¯èƒ½è¿™äº›ç‰‡æ®µæ˜¯éª†é©¼å¤§å°å†™å•è¯ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†æˆæ›´å°çš„å—ã€‚æœ€åï¼Œåœ¨æ‹†åˆ†æ¯ä¸ªå…ƒç´ åï¼Œæ•´ä¸ªåˆ—è¡¨è¢«è½¬æ¢ä¸ºå°å†™ã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="8fbb" class="nl mk it nh b gy nm nn l no np">def tokenizer(mylist):<br/>    tokenized_list=[]<br/>    for word in mylist:<br/><br/>        if '_'  in word:<br/>            splitted_word=word.split('_')<br/>            for elem in splitted_word:<br/>                if camel_case(elem):<br/>                    elem=camel_case_split(elem)<br/>                    for el1 in elem:<br/>                        tokenized_list.append(el1.lower())<br/>                else:    <br/>                    tokenized_list.append(elem.lower())<br/>        elif '-' in word:<br/>            hyp_word=word.split('-')<br/>            for i in hyp_word:<br/>                if camel_case(i):<br/>                    i=camel_case_split(i)<br/>                    for el2 in i:<br/>                        tokenized_list.append(el2.lower())<br/>                else: <br/>                    tokenized_list.append(i.lower())<br/>        elif camel_case(word):<br/>            word=camel_case_split(word)<br/>            for el in word:<br/>                tokenized_list.append(el.lower())<br/>        else:<br/>            tokenized_list.append(word.lower())<br/>    return(tokenized_list)<br/>tokenizer(my_word)</span></pre><h1 id="3fc3" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 5ã€‚åˆ›å»ºå­—æ®µåä¸ºâœ…çš„æ•°æ®é›†</strong></h1><p id="29a6" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç”¨æ‰€æœ‰è§„èŒƒä¸­çš„å­—æ®µååˆ›å»ºä¸€ä¸ªå¤§æ•°æ®é›†ã€‚</p><p id="c8a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸‹é¢çš„<code class="fe nr ns nt nh b">dict_dataset</code>å‡½æ•°è·å–æ–‡ä»¶åå’Œè·¯å¾„åˆ—è¡¨ï¼Œå¹¶æ‰“å¼€æ¯ä¸ªè§„èŒƒæ–‡ä»¶ã€‚å¯¹äºæ¯ä¸ªæ–‡ä»¶ï¼Œ<code class="fe nr ns nt nh b">get_field</code>å‡½æ•°è¿”å›ä¸€ä¸ªå­—æ®µååˆ—è¡¨ã€‚ä¸€äº›å­—æ®µåç§°å¯èƒ½åœ¨ä¸€ä¸ªè§„èŒƒä¸­é‡å¤ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ç§é‡å¤ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨<code class="fe nr ns nt nh b">list(dict.fromkeys(col))</code>å°†å­—æ®µååˆ—è¡¨ä»åˆ—è¡¨è½¬æ¢åˆ°å­—å…¸ï¼Œç„¶åå†è½¬æ¢å›æ¥ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æ ‡è®°åˆ—è¡¨ã€‚æœ€åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œä»¥æ–‡ä»¶åä½œä¸ºé”®ï¼Œä»¥å­—æ®µååˆ—è¡¨ä½œä¸ºå€¼ã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="3331" class="nl mk it nh b gy nm nn l no np">def dict_dataset(datasets):<br/>    dataset_dict={}<br/>    for i in datasets:<br/>        with open(i, 'r') as foo:<br/>            col=algo.get_fields(yaml.safe_load(foo.read()))<br/>            if col:<br/>                mylist = list(dict.fromkeys(col))<br/>                tokenized_list=tokenizer(mylist)<br/>                dataset_dict.update({i: tokenized_list})<br/>            else:<br/>                continue<br/>    return (dataset_dict)</span></pre><h1 id="4d61" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak"> 6ã€‚æµ‹è¯•åµŒå…¥âœ… </strong></h1><p id="4626" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated"><strong class="lb iu">ä»£ç  2vec å’Œæ‰‹å¥—</strong></p><p id="59f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºè¯æ±‡è¡¨å¤–çš„å•è¯(not_identified_c2v)å¹¶ç»Ÿè®¡è¿™äº›å•è¯å  code2vec è¯æ±‡è¡¨çš„ç™¾åˆ†æ¯”ã€‚ä»¥ä¸‹ä»£ç ä¹Ÿé€‚ç”¨äº GloVeã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="1c5d" class="nl mk it nh b gy nm nn l no np">not_identified_c2v=[]<br/>count_not_indent=[]<br/>total_number=[]<br/><br/>for ds in test1:<br/>    count=0<br/>    for i in data[ds]:<br/>        if not i in model:<br/>            not_identified_c2v.append(i)<br/>            count+=1<br/>    count_not_indent.append(count)<br/>    total_number.append(len(data[ds]))<br/><br/>total_code2vec=sum(count_not_indent)/sum(total_number)*100</span></pre><p id="36fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">ç©ºé—´</strong></p><p id="e5f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç©ºé—´è¯æ±‡æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç›¸åº”åœ°ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç :</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="01a9" class="nl mk it nh b gy nm nn l no np">not_identified_sp=[]<br/>count_not_indent=[]<br/>total_number=[]<br/><br/>for ds in test1:<br/>    count=0<br/>    for i in data[ds]:<br/>        f not i in nlp.vocab:<br/>                count+=1<br/>                not_identified_sp.append(i)<br/>    count_not_indent.append(count)<br/>    total_number.append(len(data[ds]))<br/><br/>        <br/>total_spacy=sum(count_not_indent)/sum(total_number)*100</span></pre><p id="6647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¯¹äº code2vecã€GloVe å’Œ spaCyï¼Œæœªè¯†åˆ«å•è¯çš„ç»“æœç™¾åˆ†æ¯”åˆ†åˆ«ä¸º<code class="fe nr ns nt nh b">3.39, 2.33, 2.09</code>ã€‚ç”±äºæ¯ä¸ªç®—æ³•çš„ç™¾åˆ†æ¯”ç›¸å¯¹è¾ƒå°ä¸”ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦ä¸€ä¸ªæµ‹è¯•ã€‚</p><p id="1297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç”¨æ‰€æœ‰ API è§„èŒƒä¸­åº”è¯¥ç›¸ä¼¼çš„å•è¯åˆ›å»ºä¸€ä¸ªæµ‹è¯•å­—å…¸:</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="7aa6" class="nl mk it nh b gy nm nn l no np">test_dictionary={'host': 'server',<br/>'pragma': 'cache',<br/>'id': 'uuid',<br/>'user': 'client',<br/>'limit': 'control',<br/>'balance': 'amount',<br/>'published': 'date',<br/>'limit': 'dailylimit',<br/>'ratelimit': 'rate',<br/>'start': 'display',<br/>'data': 'categories'}</span></pre><p id="d037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¯¹äº GloVe å’Œ code2vecï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ gensim åº“æä¾›çš„<code class="fe nr ns nt nh b">similar_by_vector</code>æ–¹æ³•ã€‚spaCy è¿˜æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•â€”â€”ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰¾åˆ°æœ€ç›¸ä¼¼çš„å•è¯ã€‚</p><p id="7f62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ ¼å¼åŒ–è¾“å…¥å‘é‡ï¼Œä»¥ä¾¿åœ¨è·ç¦»å‡½æ•°ä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬å°†åœ¨å­—å…¸ä¸­åˆ›å»ºæ¯ä¸ªé”®ï¼Œå¹¶æ£€æŸ¥ç›¸åº”çš„å€¼æ˜¯å¦åœ¨ 100 ä¸ªæœ€ç›¸ä¼¼çš„å•è¯ä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ ¼å¼åŒ–è¯æ±‡è¡¨ï¼Œä»¥ä¾¿åœ¨<code class="fe nr ns nt nh b">distance.cdist</code>å‡½æ•°ä¸­ä½¿ç”¨ã€‚è¿™ä¸ªå‡½æ•°è®¡ç®—è¯æ±‡è¡¨ä¸­æ¯å¯¹å‘é‡ä¹‹é—´çš„è·ç¦»ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ä»æœ€å°è·ç¦»åˆ°æœ€å¤§è·ç¦»å¯¹åˆ—è¡¨è¿›è¡Œæ’åºï¼Œå–å‰ 100 ä¸ªå•è¯ã€‚</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="21d3" class="nl mk it nh b gy nm nn l no np">from scipy.spatial import distance<br/><br/>for k, v in test_dictionary.items():<br/>    input_word = k<br/>    p = np.array([nlp.vocab[input_word].vector])</span><span id="901b" class="nl mk it nh b gy nq nn l no np">    closest_index = distance.cdist(p, vectors)[0].argsort()[::-1][-100:]<br/>    word_id = [ids[closest_ind] for closest_ind in closest_index]<br/>    output_word = [nlp.vocab[i].text for i in word_id]<br/>    #output_word<br/>    list1=[j.lower() for j in output_word]<br/>    mylist = list(dict.fromkeys(list1))[:50]<br/>    count=0<br/>    if test_dictionary[k] in mylist:<br/>        count+=1<br/>        print(k,count, 'yes')<br/>    else:<br/>        print(k, 'no')</span></pre><p id="d24f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç»“æœæ€»ç»“åœ¨ä¸‹è¡¨ä¸­ã€‚spaCy æ˜¾ç¤ºå•è¯â€œclientâ€åœ¨å‰ 100 ä¸ªä¸å•è¯â€œuserâ€æœ€ç›¸ä¼¼çš„å•è¯ä¸­ã€‚å®ƒå¯¹äºå‡ ä¹æ‰€æœ‰çš„ OpenAPI è§„èŒƒéƒ½æ˜¯æœ‰ç”¨çš„ï¼Œå¹¶ä¸”å¯ä»¥ç”¨äº OpenAPI è§„èŒƒç›¸ä¼¼æ€§çš„æœªæ¥åˆ†æã€‚å•è¯â€œbalanceâ€çš„å‘é‡æ¥è¿‘å•è¯â€œamountâ€çš„å‘é‡ã€‚æˆ‘ä»¬å‘ç°å®ƒå¯¹æ”¯ä»˜ API ç‰¹åˆ«æœ‰ç”¨ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/0e0914c0a3c78cc433e66d05b991a3f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*FIQW-Tn0AUc8KzfeMOiTXA.png"/></div></figure><h1 id="9e98" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated"><strong class="ak">ç»“è®º</strong></h1><p id="d9c8" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">æˆ‘ä»¬å·²ç»ä¸º OpenAPI è§„èŒƒå°è¯•äº†ä¸‰ç§ä¸åŒçš„å•è¯åµŒå…¥ç®—æ³•ã€‚å°½ç®¡è¿™ä¸‰ä¸ªè¯åœ¨è¿™ä¸ªæ•°æ®é›†ä¸Šéƒ½è¡¨ç°å¾—å¾ˆå¥½ï¼Œä½†æ˜¯å¯¹æœ€ç›¸ä¼¼çš„è¯çš„é¢å¤–æ¯”è¾ƒè¡¨æ˜ spaCy æ›´é€‚åˆæˆ‘ä»¬çš„æƒ…å†µã€‚</p><p id="c771" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">spaCy æ¯”å…¶ä»–ç®—æ³•æ›´å¿«ã€‚ä¸ GloVe æˆ– code2vec è¯æ±‡è¡¨ç›¸æ¯”ï¼ŒspaCy è¯æ±‡è¡¨ä¸Šä¼ é€Ÿåº¦å¿«äº”å€ã€‚ç„¶è€Œï¼Œç¼ºä¹å†…ç½®å‡½æ•°â€”â€”æ¯”å¦‚<code class="fe nr ns nt nh b">similar_by_vector</code>å’Œ<code class="fe nr ns nt nh b">similar_word</code>â€”â€”æ˜¯ä½¿ç”¨è¿™ç§ç®—æ³•çš„ä¸€ä¸ªéšœç¢ã€‚</p><p id="aa9f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­¤å¤–ï¼ŒspaCy é€‚ç”¨äºæˆ‘ä»¬çš„æ•°æ®é›†è¿™ä¸€äº‹å®å¹¶ä¸æ„å‘³ç€ spaCy å¯¹ä¸–ç•Œä¸Šçš„æ¯ä¸ªæ•°æ®é›†éƒ½æ›´å¥½ã€‚å› æ­¤ï¼Œè¯·éšæ„ä¸ºæ‚¨è‡ªå·±çš„æ•°æ®é›†å°è¯•ä¸åŒçš„å•è¯åµŒå…¥ï¼Œå¹¶åœ¨è¯„è®ºä¸­è®©æˆ‘ä»¬çŸ¥é“å“ªä¸€ç§æ›´é€‚åˆæ‚¨ï¼</p><p id="eceb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ„Ÿè°¢é˜…è¯»ï¼</p></div></div>    
</body>
</html>