<html>
<head>
<title>Top 3 Pandas Functions: Data Science Edition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫三大功能:数据科学版</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-3-pandas-functions-data-science-edition-e7c593cb1103?source=collection_archive---------52-----------------------#2020-06-29">https://towardsdatascience.com/top-3-pandas-functions-data-science-edition-e7c593cb1103?source=collection_archive---------52-----------------------#2020-06-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e254" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">最受欢迎的数据分析库提供了什么。</h2></div><p id="c459" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">毫无疑问，Pandas 是最受欢迎的数据科学库之一。它已经存在了相当长的一段时间，包括了很多节省时间和神经的功能。今天我们将探索其中的三种。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/3fe91d2714a79877b76c9937e1f7eaf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-t39SC-0JBdrjcxi"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">马克·巴萨拉布在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="7811" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你更喜欢视频，或者只是想巩固你的知识，请随意观看我们关于这个主题的视频。<a class="ae lu" href="https://github.com/betterdatascience/YouTube/blob/master/0003_Top3PandasFunctions.ipynb" rel="noopener ugc nofollow" target="_blank">源代码</a>包含:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="81c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">准备步骤很少，因为我们只需要导入 Pandas 库和数据集:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="15f8" class="mc md it ly b gy me mf l mg mh">import pandas as pd<br/>df = pd.read_csv(‘<a class="ae lu" href="https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv'</a>)</span></pre><p id="4fed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仅此而已。事不宜迟，让我们从第一个函数开始吧！</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="568b" class="mp md it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">1.应用()</h1><p id="6b6c" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated"><em class="nl"> apply() </em>函数允许您将预定义的或匿名的函数应用于特定的列。当没有一大堆你想执行的逻辑时，匿名或 lambda 函数是很棒的，因为 lambda 会很快变得很乱。</p><p id="676f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们想从<em class="nl">名称</em>属性中提取标题。标题可以在第一个逗号之后，第一个点之前找到。我们只需要知道这些。</p><p id="3561" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您选择预定义的函数，以下是解决问题的方法:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="886e" class="mc md it ly b gy me mf l mg mh">def extract_title(string):<br/>    string = string.split(‘,’)[-1]<br/>    string = string.strip()<br/>    string = string.split(‘.’)[0]<br/>    return string</span><span id="7802" class="mc md it ly b gy nm mf l mg mh">titles = df[‘Name’].apply(extract_title)</span></pre><p id="4607" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还不错，每个人都能体会到这段代码有多整洁。这肯定是一种更长的方法，但是代码不需要注释就能被其他人理解。</p><p id="8810" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来是匿名函数方法，这是一行程序:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="a1e5" class="mc md it ly b gy me mf l mg mh">titles = df[‘Name’].apply(lambda x: x.split(‘,’)[-1].strip().split(‘.’)[0])</span></pre><p id="8439" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，这种方法更短，但是想象一下如果我们需要执行更多的分割。兰姆达斯就不是个好选择了。</p><p id="f221" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是前几个标题的样子:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nn"><img src="../Images/2ed2e05917627bff888dde4af67c9e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w3AJC54mhnmYVMfhbyXOuA.png"/></div></div></figure><p id="9b87" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你现在可以使用这个计算栏来查看一个标题是否对生存机会有任何影响。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="1eec" class="mp md it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">2.值计数()</h1><p id="0c43" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated"><em class="nl"> value_counts() </em>的目的是统计指定属性中值的不同出现次数。这是前面提到的<em class="nl"> apply() </em>函数的一个很好的下一步，这正是我们将使用它的目的。</p><p id="77ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以调用<em class="nl">片头的功能</em>系列:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="a7d7" class="mc md it ly b gy me mf l mg mh">titles.value_counts()</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi no"><img src="../Images/dc3122722f99c7e309b1bb71ff3fbbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jByNVNxCCELpEFNZ--Qd2A.png"/></div></div></figure><p id="b592" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在您可以创建一个二进制属性，如果头衔不常见(比如 Dr、Rev、Mlle 等)，则值为 1，否则为 0(Mr、Miss、Mrs ),并执行一些进一步的分析。</p><p id="c0af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我喜欢看百分比，而不是原始数据。这很容易做到:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="6805" class="mc md it ly b gy me mf l mg mh">titles.value_counts(normalize=True) * 100</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi no"><img src="../Images/de92bac6d9fd5ad8212c042b70f1107b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JcLw8CDfxF971paWm_RrKA.png"/></div></div></figure><p id="5d02" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">差不多就是这样，简单且不言自明的函数。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="4094" class="mp md it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">3.get_dummies()</h1><p id="3e09" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated"><em class="nl"> get_dummies() </em>函数用于将分类列转换为虚拟变量— 0 或 1。这很有用，因为你不能将字符串类别输入到机器学习模型中，这些值必须是数字。</p><p id="48e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将在<em class="nl">登船</em>列执行此操作，该列有 3 个值，指示乘客在哪个港口登船。</p><p id="4d43" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看默认情况下会发生什么:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="2b9d" class="mc md it ly b gy me mf l mg mh">emb = pd.get_dummies(df[‘Embarked’])</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi np"><img src="../Images/6b365a869066da5aa6a16ab40f01fa90.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*ocqHt0bdcBRx4IkZl4Gxcg.png"/></div></figure><p id="6762" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不得不承认，这不是最具描述性的列名。幸运的是，有一个简单的解决方法:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="eb2b" class="mc md it ly b gy me mf l mg mh">emb = pd.get_dummies(df[‘Embarked’], prefix=’Embarked’)</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/23d92894e7e4c631e1f5204b5750f340.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*5owBSerGeAJ3y7_0nW7hXQ.png"/></div></figure><p id="a124" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在情况有所好转。仍然不理想，因为我们有<strong class="kk iu">共线性</strong>问题。我们不需要 3 列来知道乘客在哪个港口上船。看一下第一行——C 和 Q 的值都是 0，这表明乘客登上了港口 S(南安普敦)。</p><p id="4fb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个问题有一个快速解决方案:</p><pre class="lf lg lh li gt lx ly lz ma aw mb bi"><span id="3d25" class="mc md it ly b gy me mf l mg mh">emb = pd.get_dummies(df[‘Embarked’], prefix=’Embarked’, drop_first=True)</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/055842d577403cb7c7326f0f86ecab1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*NhTSY5VguPzBXI0H5EzBxg.png"/></div></figure><p id="644d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将<em class="nl"> drop_first </em>值指定为<em class="nl"> True </em>解决了共线性问题。现在，您可以将该数据框架连接到原始数据框架，并继续进行分析。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="d7ce" class="mp md it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">在你离开之前</h1><p id="86ca" class="pw-post-body-paragraph ki kj it kk b kl ng ju kn ko nh jx kq kr ni kt ku kv nj kx ky kz nk lb lc ld im bi translated">这并不是熊猫图书馆的全面指南，因为网上已经有很多这样的指南了。相反，我想分享我在最初的数据清理过程之后使用的一些功能(填充缺失值和处理损坏的记录)。</p><p id="25b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你已经设法从这篇文章中得到了一些有用的东西。如果你有这三个功能的其他例子，请在评论区分享。</p><p id="2400" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="ecbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="nl">喜欢这篇文章吗？成为</em> <a class="ae lu" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="nl">中等会员</em> </a> <em class="nl">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="ns nt gp gr nu nv"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd iu gy z fp oa fr fs ob fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">medium.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj lo nv"/></div></div></a></div></div></div>    
</body>
</html>