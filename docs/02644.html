<html>
<head>
<title>Track Coronavirus in Your Country by Displaying Notifications Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过使用 Python 显示通知来跟踪您所在国家的冠状病毒</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/coronavirus-track-coronavirus-in-your-country-by-displaying-notification-c914b5652088?source=collection_archive---------9-----------------------#2020-03-14">https://towardsdatascience.com/coronavirus-track-coronavirus-in-your-country-by-displaying-notification-c914b5652088?source=collection_archive---------9-----------------------#2020-03-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7639" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为了避免关于冠状病毒的假新闻，您可以创建一个 python 脚本来更新您的信息。</h2></div><p id="0e4f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated"><span class="l lf lg lh bm li lj lk ll lm di">到</span>被更新关于冠状病毒(新冠肺炎)在你居住的<strong class="kk iu">地区的<strong class="kk iu">传播</strong>，我决定向你展示如何使用 python </strong>和一些库来获取数据和显示 Windows 10 <em class="ln">通知</em>。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lo"><img src="../Images/7cdcfd7dcb512a283213170808b90095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wDpfKxd7YTcyW9f1yE-wIw.jpeg"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">背景图片由<a class="ae me" href="https://www.linkedin.com/in/felicity-yick-52256b152?originalSubdomain=hk" rel="noopener ugc nofollow" target="_blank"> Felicity Yick </a>经由<a class="ae me" href="https://www.thedp.com/staff/felicity-yick" rel="noopener ugc nofollow" target="_blank">thedp.com</a></p></figure><h1 id="9281" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">过程设计</h1><blockquote class="mx"><p id="4718" class="my mz it bd na nb nc nd ne nf ng ld dk translated">"计划就是把未来带入现在，这样你现在就可以做些事情了."艾伦·莱克因</p></blockquote><figure class="ni nj nk nl nm lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nh"><img src="../Images/9e9d44cf3ca2ce24ffc2122ad6e0695d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KCoi_A-PK1x5I0Nf"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated"><a class="ae me" href="https://unsplash.com/photos/ZSPBhokqDMc" rel="noopener ugc nofollow" target="_blank"> medbadrc </a>在<a class="ae me" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="00d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们必须<strong class="kk iu">找到一个可靠的网站</strong> <strong class="kk iu">提供我们需要的数据</strong>。我决定在这个项目中使用<a class="ae me" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"><em class="ln"/></strong></a><strong class="kk iu"><em class="ln"/></strong>。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi nn"><img src="../Images/475d9346cb392c6ffe23d3f1cdb3623f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwfSxU3ESNRlarxoS7ipRA.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="a28e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">网站给了我们一个<strong class="kk iu">现成的数据集</strong>，不同的数据作为列，不同的国家作为行。</p><p id="fa03" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们必须<strong class="kk iu">找到并过滤 web 元素，以获取数据</strong>、<strong class="kk iu">、</strong>，然后<strong class="kk iu">将其显示在通知上。</strong></p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="962b" class="mf mg it bd mh mi nv mk ml mm nw mo mp jz nx ka mr kc ny kd mt kf nz kg mv mw bi translated">设置环境</h1><p id="d45f" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oc kt ku kv od kx ky kz oe lb lc ld im bi translated">首先，我们需要<strong class="kk iu">安装</strong><a class="ae me" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">Python</strong></a><strong class="kk iu"/>和<strong class="kk iu">将其添加到路径:</strong></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi of"><img src="../Images/ae8354c80136f282728a92e951cf13b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/0*rv4mloEUJHAlp2_D.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="252a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们必须<strong class="kk iu">安装 3 个库</strong>:</p><ol class=""><li id="3d6a" class="og oh it kk b kl km ko kp kr oi kv oj kz ok ld ol om on oo bi translated"><a class="ae me" href="https://github.com/jithurjacob/Windows-10-Toast-Notifications" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">win 10 toast</strong></a>:<em class="ln">Python 库以</em> <strong class="kk iu"> <em class="ln">显示 Windows 10 的 Toast 通知。</em> </strong></li><li id="239c" class="og oh it kk b kl op ko oq kr or kv os kz ot ld ol om on oo bi translated"><a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">bs4</strong></a>:<em class="ln">Python 库用于</em> <strong class="kk iu"> <em class="ln">从 HTML </em> </strong> <em class="ln">和 XML 文件中提取数据</em>。</li><li id="33d4" class="og oh it kk b kl op ko oq kr or kv os kz ot ld ol om on oo bi translated"><a class="ae me" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">请求</strong> </a> : <em class="ln">一个优雅简单的</em> <strong class="kk iu"> <em class="ln"> HTTP 库</em> </strong> <em class="ln">为 Python </em></li></ol><p id="4ddc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要安装，打开<strong class="kk iu">命令提示符</strong> (CMD)和<strong class="kk iu">键入</strong>这些<strong class="kk iu">命令</strong>:</p><p id="124c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">打开<strong class="kk iu">命令提示符</strong> (CMD)并输入这些命令<strong class="kk iu">来安装</strong>下面的<strong class="kk iu"> python 包</strong>:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="7513" class="oz mg it ov b gy pa pb l pc pd">pip install win10toast<br/>pip install bs4<br/>pip install <!-- -->requests</span></pre><p id="d7aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们准备好<strong class="kk iu">开始编码</strong>。</p><h1 id="67fe" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">编码</h1><figure class="lp lq lr ls gt lt gh gi paragraph-image"><a href="https://www.python.org/"><div class="gh gi pe"><img src="../Images/068a4fd72b3e35be63a1b4e15434c6c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*S8XZwXnI-xjBkhr7DrKCkg.png"/></div></a></figure><p id="4f95" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">带上你的咖啡，让我们从<strong class="kk iu">创建一个新的 python 脚本</strong>和<strong class="kk iu">导入</strong>所有必要的<strong class="kk iu">包</strong>开始:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="2601" class="oz mg it ov b gy pa pb l pc pd">from win10toast import ToastNotifier<br/>from bs4 import BeautifulSoup<br/>import requests<br/>import time</span></pre><p id="b3ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们将<strong class="kk iu">创建并初始化</strong>一些<strong class="kk iu">变量</strong>:</p><blockquote class="pf pg ph"><p id="0613" class="ki kj ln kk b kl km ju kn ko kp jx kq pi ks kt ku pj kw kx ky pk la lb lc ld im bi translated"><strong class="kk iu">变量<em class="it">:类型:角色</em></strong><br/><code class="fe pl pm pn ov b">country</code><em class="it">:str:</em>国家名称<br/> <code class="fe pl pm pn ov b">notification_duration</code> <em class="it"> : int : </em>通知显示时间(秒)<br/><code class="fe pl pm pn ov b"><em class="it">refresh_time</em></code><em class="it">:</em><em class="it">int:</em>两次通知之间的时间间隔(分钟)<br/><code class="fe pl pm pn ov b"><em class="it">woldmetersLink</em></code><em class="it">:</em></p></blockquote><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="2e42" class="oz mg it ov b gy pa pb l pc pd">country = "Tunisia"<br/>notification_duration = 10<br/>refresh_time = 10 #minutes<br/>worldmetersLink = "<a class="ae me" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank">https://www.worldometers.info/coronavirus/</a>"</span></pre><p id="752d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们<strong class="kk iu">获取网页</strong>:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="e39a" class="oz mg it ov b gy pa pb l pc pd">try:<br/>    html_page = requests.get(worldmetersLink)<br/>except requests.exceptions.RequestException as e: <br/>    print(e) #ConnectionError<br/>    continue</span></pre><p id="3b89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们<strong class="kk iu">检查</strong> <a class="ae me" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">网页</strong></a><strong class="kk iu">获取数据</strong>。我们可以看到这个表在<code class="fe pl pm pn ov b">div</code>标签中，所有的数据在<code class="fe pl pm pn ov b">tbody</code>标签中，每个国家的信息在<code class="fe pl pm pn ov b">tr -&gt; td</code>中。<br/>所以层级是:<code class="fe pl pm pn ov b">div -&gt; tbody -&gt; tr -&gt; td</code></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi po"><img src="../Images/1b56d80c728311b66ca2fe15231f0bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSVYaaUpf1L4UWBAHrsRBg.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="6d13" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，我们使用<a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> CSS 选择器</strong> </a> <strong class="kk iu"> </strong>到<strong class="kk iu">来搜索匹配那些 CSS 类(div，tbody，tr，td)的标签</strong>:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="b57a" class="oz mg it ov b gy pa pb l pc pd">search = bs.select("div tbody tr td")</span></pre><p id="2fb7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用<code class="fe pl pm pn ov b"><a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#get-text" rel="noopener ugc nofollow" target="_blank">get_text</a>()</code>方法<strong class="kk iu">获取标签下的文本</strong>(国家名称)<strong class="kk iu">，</strong>然后我们使用<code class="fe pl pm pn ov b"><a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#find" rel="noopener ugc nofollow" target="_blank">find</a>()</code>来提取满足我们限制的第一个元素，即国家名称。</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="bde2" class="oz mg it ov b gy pa pb l pc pd">start = -1<br/>for i in range(len(search)):<br/>    if search[i].get_text().find(country) !=-1:<br/>        start = i<br/>        break</span></pre><p id="b3a9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们<strong class="kk iu">将标签之间的数据</strong>、<strong class="kk iu">存储在一个数组中:</strong></p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="dbea" class="oz mg it ov b gy pa pb l pc pd">data = []<br/>for i in range(1,8):<br/>    try:<br/>        data += [search[start+i].get_text()]<br/>    except:<br/>        data += [0]</span></pre><p id="2d8b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们必须<strong class="kk iu">生成</strong>一个<em class="ln"> str </em>，其中包含通知的<strong class="kk iu">消息</strong>:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="0602" class="oz mg it ov b gy pa pb l pc pd">message = "Total infected = {}, New Case = {}, Total Deaths = {}, New Deaths = {}, Recovred = {}, Active Case = {}, Serious Critical = {}".format(*data)</span></pre><p id="88ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是时候使用我们的 win10toast 模块了，我们从<strong class="kk iu">创建一个对象到 ToastNotifier 类</strong>开始:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="5e6a" class="oz mg it ov b gy pa pb l pc pd">toaster = ToastNotifier()</span></pre><p id="06b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们使用 show_toast 函数，该函数接受以下参数:</p><p id="0358" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="ln">标题</em> </strong> <em class="ln">:包含通知标题。<br/> </em> <strong class="kk iu"> <em class="ln">消息</em> </strong> <em class="ln">:包含通知消息。<br/> </em> <strong class="kk iu"> <em class="ln">持续时间</em> </strong> <em class="ln">”:指定通知销毁活动持续时间。<br/></em><strong class="kk iu"><em class="ln">icon _ path</em></strong><em class="ln">:它包含了到的路径。ico 文件。(那是可选的)(我用了一个图标，你可以在</em> <a class="ae me" href="https://github.com/AhmedAzizKhelifi/coronavirusTrackYourCountry" rel="noopener ugc nofollow" target="_blank"> <em class="ln"> Github 库</em> </a> <em class="ln">上找到)。</em></p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="858f" class="oz mg it ov b gy pa pb l pc pd">#toaster.show_toast(title, notification message, duration, icon)</span><span id="3b3c" class="oz mg it ov b gy pp pb l pc pd">toaster.show_toast("Coronavirus in {}".format(country) , message, duration = notification_duration , icon_path ="icon.ico")</span></pre><p id="8822" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后但同样重要的是，我们将代码放在一个<strong class="kk iu">无限循环中:</strong></p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="338a" class="oz mg it ov b gy pa pb l pc pd">While True :<br/>#our code</span></pre><p id="81f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并将此行添加到循环的末尾以<strong class="kk iu">刷新</strong>软件:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="19df" class="oz mg it ov b gy pa pb l pc pd">time.sleep(refresh_time * 60) #parameter in seconds</span></pre><h1 id="9260" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">代码清理</h1><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/9ec445cd4420638ec38a47771cb5622b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/0*1ieAbZhUw-zcLgJs.jpg"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">图片由<a class="ae me" href="https://www.freepik.com/jemastock" rel="noopener ugc nofollow" target="_blank">杰马斯托克</a>在<a class="ae me" href="https://www.freepik.com/home" rel="noopener ugc nofollow" target="_blank">freepik.com</a>上拍摄</p></figure><p id="f057" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看国家=“中国”的<strong class="kk iu">结果</strong>:</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/1e9492edf3e3f6a25f715f3d8fc7c49b.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*udY66cg-ewBMtgN2fC7FXw.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">Windows 10 通知截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="ed75" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嗯，我们可以看到<strong class="kk iu">成功地抓取了数据</strong>，但是<strong class="kk iu">的格式不正确</strong>，我们可以看到“+”、随机空格和“，”。</p><p id="8726" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们清理一下我们的数组。事实上，data = ['80，824 '，'+11 '，' 3，189 '，'+13 '，' 65，573 '，' 12，062 '，' 3，610 ']或者我们想要<strong class="kk iu">更干净的版本</strong>所以我们要把它改成:data = ['80.824 '，' 11 '，' 3.189 '，' 13 '，' 65.573 '，' 12.062 '，' 3.610']</p><blockquote class="pf pg ph"><p id="e65d" class="ki kj ln kk b kl km ju kn ko kp jx kq pi ks kt ku pj kw kx ky pk la lb lc ld im bi translated">从:<br/>数据= ['80 <strong class="kk iu">，</strong> 824 '，'<strong class="kk iu"> + </strong> 11 <strong class="kk iu"> 【T19 '，' 3 <strong class="kk iu">，</strong> 189 '，'<strong class="kk iu"> + </strong> 13 '，' 65 <strong class="kk iu">，</strong> 573 '，' 12062 '，' 3 <strong class="kk iu">，</strong>610 ']<strong class="kk iu"><br/>【T30]到:【t3t</strong></strong></p></blockquote><p id="ee38" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将添加一个名为 data_cleanup 的<strong class="kk iu">函数</strong>，该函数<strong class="kk iu">将一个不清理数组</strong>作为参数<strong class="kk iu">并清理它</strong></p><p id="6299" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们做一个<strong class="kk iu">函数</strong> <strong class="kk iu">来为我们清洗数组</strong>(它的<strong class="kk iu">参数</strong>就是<strong class="kk iu">免清洗数组</strong>)。我们称之为<code class="fe pl pm pn ov b">data_cleanup</code>函数。记住，函数定义总是以<code class="fe pl pm pn ov b">def</code>开头，后面是函数名、括号<code class="fe pl pm pn ov b">(parameter)</code>和冒号<code class="fe pl pm pn ov b">:</code>。</p><p id="957a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提醒:Python 字符串<code class="fe pl pm pn ov b"><a class="ae me" href="https://docs.python.org/2/library/string.html#string.strip" rel="noopener ugc nofollow" target="_blank">strip</a>()</code>方法:去掉字符串开头和结尾的空格:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="b5f5" class="oz mg it ov b gy pa pb l pc pd">def data_cleanup(array):<br/>    L = []<br/>    for i in array:<br/>        i = i.replace("+","") <br/>        i = i.replace("-","")<br/>        i = i.replace(",",".")<br/>        if i == "":<br/>            i = "0"<br/>        L.append(i.strip())<br/>    return L</span></pre><p id="94c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以<strong class="kk iu">结果</strong>是:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="57ff" class="oz mg it ov b gy pa pb l pc pd"># " +3,420   " &gt;&gt;&gt; "3.420"</span></pre><p id="bb0e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们只需在生成消息之前<strong class="kk iu">使用这个函数:</strong></p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="1725" class="oz mg it ov b gy pa pb l pc pd">data= data_cleanup(data)</span></pre><h1 id="402e" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">成品</h1><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/61bbe7c76e57e85485feb0522281899d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*aPq4_6Hc_GZUwBGiDNCO1A.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">由<a class="ae me" href="http://freepik.com/freepik" rel="noopener ugc nofollow" target="_blank"> Freepic </a>在<a class="ae me" href="https://fr.freepik.com/vecteurs-libre/concept-programmeurs-design-plat_2456100.htm" rel="noopener ugc nofollow" target="_blank">Freepic.com</a>上设计</p></figure><p id="f76f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看<strong class="kk iu">最后的结果</strong>吧:</p><ol class=""><li id="f594" class="og oh it kk b kl km ko kp kr oi kv oj kz ok ld ol om on oo bi translated">国家=中国</li></ol><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pt"><img src="../Images/4c2c9c7a10474943a7c4c3e201a24ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LU5KUon9wJlozn5pqvxH6A.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">截图:作者</p></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/12e9ce2587563ed78c821241f8caa9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*UNeZiTrs1dqPHZtsGr-4ew.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">Windows 10 通知截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="be3a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.国家=突尼斯</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/165ef3ad7153e99ba81930b2578b02bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*SHszkObzmeY9PpUHMxMHRw.png"/></div><p class="ma mb gj gh gi mc md bd b be z dk translated">Windows 10 通知截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi pw"><img src="../Images/2b0086e9f04e1313329ba9b57626910a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXZZEveg4SPdHdCb7KpHPg.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">截图:<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener">作者</a></p></figure><p id="268c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">瞧😄</p><p id="906b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是<a class="ae me" href="https://github.com/AhmedAzizKhelifi/coronavirusTrackYourCountry" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">完整源代码</strong> </a>:</p><div class="px py gp gr pz qa"><a href="https://github.com/AhmedAzizKhelifi/coronavirusTrackYourCountry" rel="noopener  ugc nofollow" target="_blank"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd iu gy z fp qf fr fs qg fu fw is bi translated">AhmedAzizKhelifi/冠状病毒追踪你的国家</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">显示您所在国家的冠状病毒数据的 Windows 10 通知。…</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">github.com</p></div></div><div class="qj l"><div class="qk l ql qm qn qj qo ly qa"/></div></div></a></div><p id="84b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将脚本打包在<strong class="kk iu"> EXE 文件</strong>中。你可以在<a class="ae me" href="https://github.com/AhmedAzizKhelifi/coronavirusTrackYourCountry" rel="noopener ugc nofollow" target="_blank"><em class="ln">git repos</em></a><em class="ln">上找到<strong class="kk iu">可执行文件</strong>。</em></p><h1 id="d614" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">更新</h1><p id="ef34" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oc kt ku kv od kx ky kz oe lb lc ld im bi translated">如果希望仅在数组值改变时显示通知<strong class="kk iu">。</strong>我们可以添加一个<em class="ln">新变量</em>(列表)<code class="fe pl pm pn ov b">data_check</code>，初始化<code class="fe pl pm pn ov b">data_check=[]</code>并将<code class="fe pl pm pn ov b">time.sleep</code>(最后一行)替换为:</p><pre class="lp lq lr ls gt ou ov ow ox aw oy bi"><span id="3366" class="oz mg it ov b gy pa pb l pc pd">if data_check!= data:<br/>    data_check = data<br/>    toaster = ToastNotifier()<br/>    toaster.show_toast("Coronavirus {}".format(country) , message, duration = notification_duration , icon_path ="icon.ico")   <br/>else:<br/>    time.sleep(refresh_time*60)<br/>    continue</span></pre><p id="7945" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以<a class="ae me" href="https://github.com/AhmedAzizKhelifi/coronavirusTrackYourCountry/blob/master/coronaV2.py" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">最后的代码</strong> </a>在<strong class="kk iu">添加了这个特性</strong>之后看起来是这样的:</p><figure class="lp lq lr ls gt lt"><div class="bz fp l di"><div class="qp qq l"/></div></figure><h1 id="b871" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">最后一句话</h1><p id="8f1c" class="pw-post-body-paragraph ki kj it kk b kl oa ju kn ko ob jx kq kr oc kt ku kv od kx ky kz oe lb lc ld im bi translated">最后，我会提醒你注意安全，记住预防胜于治疗。</p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi qr"><img src="../Images/f41cf833caf4fb1c2e3416654c0b8e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zyV97txATZE2psvI.png"/></div></div><p class="ma mb gj gh gi mc md bd b be z dk translated">图片来源<a class="ae me" href="https://worldindependant.com/china-needs-to-show-taiwan-respect-says-president/" rel="noopener ugc nofollow" target="_blank">worldindependant.com</a></p></figure></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="ffb5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">感谢阅读！😄</strong></p><figure class="lp lq lr ls gt lt gh gi paragraph-image"><a href="https://medium.com/@ahmedazizkhelifi"><div class="gh gi qs"><img src="../Images/37f8cb5ef38701ddec87b02b1435a150.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/0*PRNVc7bjff0Jj1pm.png"/></div></a><p class="ma mb gj gh gi mc md bd b be z dk translated">查看<strong class="bd qt">我的其他文章</strong>并关注我的<a class="ae me" href="https://medium.com/@ahmedazizkhelifi" rel="noopener"> <strong class="bd qt">中型</strong> </a></p></figure><p id="b14a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哈利菲·艾哈迈德·阿齐兹</p></div></div>    
</body>
</html>