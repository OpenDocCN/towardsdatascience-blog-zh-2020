<html>
<head>
<title>Plotly Front to Back: Scatter Charts and Bubble Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从前到后:散点图和气泡图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotly-front-to-back-scatter-charts-and-bubble-charts-8e6dc5f77b54?source=collection_archive---------27-----------------------#2020-04-01">https://towardsdatascience.com/plotly-front-to-back-scatter-charts-and-bubble-charts-8e6dc5f77b54?source=collection_archive---------27-----------------------#2020-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dbc0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">知道其中的区别——并在这个过程中让他们看起来很棒！</h2></div><p id="93af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">距离我在 Plotly 库上的上一篇文章已经过去了几天，上一篇文章介绍了<strong class="kk iu">棒线</strong>图表和<strong class="kk iu">线</strong>图表。虽然我建议在此之前先阅读那篇文章，但这绝不是强制性的，因为每篇文章都是为了讲述完整的故事。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/d6426b46e45610263e754daedbf54690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMccFapACsssk3Ryh--vpg.jpeg"/></div></div></figure><p id="760f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想跟进这个系列，这里有一些链接:</p><ol class=""><li id="33b3" class="lq lr it kk b kl km ko kp kr ls kv lt kz lu ld lv lw lx ly bi translated"><a class="ae lz" rel="noopener" target="_blank" href="/4-reasons-why-im-choosing-plotly-as-the-main-visualization-library-dc4a961a402f">我选择 Plotly 作为我的主要可视化库的 4 个原因</a></li><li id="4115" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld lv lw lx ly bi translated"><a class="ae lz" rel="noopener" target="_blank" href="/plotly-front-to-back-bar-charts-line-charts-2b591d29c6ba">从前到后绘制:条形图&amp;折线图</a></li></ol><p id="e91f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，事不宜迟，让我们花点时间讨论一下这篇文章涵盖的内容。主要想法是获取一个数据集(一个众所周知的数据集，稍后会详细介绍)并探索如何可视化它——使用散点图和气泡图。</p><p id="709b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所用的数据集很小，但足以满足我们的需求，可以从这个 URL 下载。你不需要下载它，因为我们会直接从<strong class="kk iu">网站</strong>导入它。</p><p id="6ebc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，没有任何麻烦，让我们开始吧！</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="a7b4" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">导入和数据集</h1><p id="a37d" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">导入方面，我们需要两个库——<code class="fe nj nk nl nm b">Pandas</code>和<code class="fe nj nk nl nm b">Plotly</code>——下面是如何导入它们:</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="47ad" class="nr mn it nm b gy ns nt l nu nv">import pandas as pd<br/>import plotly.graph_objs as go<br/>import plotly.offline as pyo</span></pre><p id="f97d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至于数据集，我们直接从 GitHub 抓取。这是众所周知的汽车数据集，非常适合我们将要进行的可视化类型:</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="3256" class="nr mn it nm b gy ns nt l nu nv">df = pd.read_csv(‘<a class="ae lz" href="https://raw.githubusercontent.com/plotly/datasets/master/mtcars.csv'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/plotly/datasets/master/mtcars.csv'</a>)<br/>df.head()</span></pre><p id="eb3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，就这样，现在让我们开始吧。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="7775" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">散点图</h1><p id="ac3a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">现在，散点图背后的基本思想是可视化一组变量之间的<strong class="kk iu">关系。就关系而言，我们指的是变量之间的依赖性——或运动——如果第一个变量运动了一定量，第二个变量会发生什么——或者用最简单的方式说，相关性。</strong></p><p id="bb0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用 Plotly 制作散点图非常简单——几乎任何东西都是如此(除了地图，这些可能是底部的痛苦，但在两篇文章中会有更多的讨论)—因为我们需要定义众所周知的<code class="fe nj nk nl nm b">data</code>和<code class="fe nj nk nl nm b">layout</code>选项。</p><p id="0a35" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像线图一样，我们将使用<code class="fe nj nk nl nm b">go.Scatter()</code>作为我们的数据，但是我们需要指定<code class="fe nj nk nl nm b">mode='markers'</code>来使一切正常工作。</p><p id="918f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是你如何在 x 轴上可视化属性<code class="fe nj nk nl nm b">hp</code>(马力)，在 y 轴上可视化属性<code class="fe nj nk nl nm b">mpg</code>(每加仑英里数):</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="3166" class="nr mn it nm b gy ns nt l nu nv">fig = go.Figure(<br/>    data=[<br/>        go.Scatter(<br/>            x=df[‘hp’],<br/>            y=df[‘mpg’],<br/>            mode=’markers’,<br/>        )<br/>    ],<br/>    layout=go.Layout(<br/>        title=dict(<br/>            text=’Horsepower vs. MPG’,<br/>            font=dict(size=20)<br/>        ),<br/>        hovermode=’closest’<br/>    )<br/>)</span><span id="9c89" class="nr mn it nm b gy nw nt l nu nv">pyo.plot(fig)</span></pre><p id="5407" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有太多的代码行，但是让我们看看它会产生什么结果:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nx"><img src="../Images/fbe2bed5fed421d79f4f507c889bdb47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6npYwXKFjgw2AdEBboz0uA.png"/></div></div></figure><p id="3e60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我知道你现在在想什么:</p><ul class=""><li id="5616" class="lq lr it kk b kl km ko kp kr ls kv lt kz lu ld ny lw lx ly bi translated">基础点太无聊了</li><li id="9932" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld ny lw lx ly bi translated">颜色很糟糕</li><li id="4c94" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld ny lw lx ly bi translated">马克笔太小了</li></ul><p id="8cb7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，让我们来解决这些问题:</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="b2d8" class="nr mn it nm b gy ns nt l nu nv">fig = go.Figure(<br/>    data=[<br/>        go.Scatter(<br/>            x=df[‘hp’],<br/>            y=df[‘mpg’],<br/>            mode=’markers’,<br/>            <strong class="nm iu">marker=dict(<br/>                size=16,<br/>                symbol=’x-dot’,<br/>                color=’#d35400'<br/>            )</strong><br/>        )<br/>    ],<br/>    layout=go.Layout(<br/>        title=dict(<br/>            text=’Horsepower vs. MPG’,<br/>            font=dict(size=20)<br/>        ),<br/>        hovermode=’closest’<br/>    )<br/>)</span><span id="9ab7" class="nr mn it nm b gy nw nt l nu nv">pyo.plot(fig)</span></pre><p id="aaf7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们之前遇到的每个问题都可以通过调整标记参数来解决，通过<code class="fe nj nk nl nm b">marker</code>参数。我们的图表现在看起来是这样的:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nz"><img src="../Images/deaadcf5605b835d7dd5c5ded397b537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qvijNk-Fj6ptvfL2OpnBYw.png"/></div></div></figure><p id="af49" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尽管不是最漂亮的，但现在也可以了。现在让我们探索散点图的更大的兄弟——气泡图——看看显示<strong class="kk iu">附加信息</strong>和将大小设置为动态是多么容易。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="ffe5" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">气泡图</h1><p id="8f06" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">以防你没有阅读整篇文章，而是跳到这一部分，这里有你应该知道的:我们通常使用气泡图来显示额外的信息，或者通过尺寸显示，或者通过颜色显示。</p><p id="4fc5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，假设我们仍然希望将<code class="fe nj nk nl nm b">hp</code>(马力)放在 x 轴上，将<code class="fe nj nk nl nm b">mpg</code>(每加仑英里数)放在 y 轴上——但是我们还希望将大小设置为动态的——假设根据<code class="fe nj nk nl nm b">wt</code>(重量)属性，并且还将颜色设置为动态的——根据气缸数量<code class="fe nj nk nl nm b">cyl</code>。</p><p id="06ca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于单个图表来说，这听起来像是太多的信息，但实际上不是。下面是如何用代码实现上述内容:</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="04ec" class="nr mn it nm b gy ns nt l nu nv">fig = go.Figure(<br/>   data=[<br/>       go.Scatter(<br/>           x=df[‘hp’],<br/>           y=df[‘mpg’],<br/>           mode=’markers’,<br/>           marker=dict(<br/>               size=df[‘wt’] * 10,<br/>               color=df[‘cyl’]<br/>           )<br/>       )<br/>    ]<br/>)</span><span id="64c9" class="nr mn it nm b gy nw nt l nu nv">pyo.plot(fig)</span></pre><p id="b76f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想知道，我们将<code class="fe nj nk nl nm b">wt</code>属性的值相乘，因为否则，它会太小。您可以随意调整这个值。图表如下所示:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oa"><img src="../Images/216251ebc705662cb232258b36fd0443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUB8XnVveh-mvtFfEOr7_g.png"/></div></div></figure><p id="64b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很好。我们在两个轴上都有与简单散点图相同的信息，但这里显示了两条附加信息。</p><p id="7a5a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你问我，这种黄色有点太多了，所以让我们看看如何改变<strong class="kk iu">调色板</strong>:</p><pre class="lf lg lh li gt nn nm no np aw nq bi"><span id="01a5" class="nr mn it nm b gy ns nt l nu nv">fig = go.Figure(<br/>    data=[<br/>        go.Scatter(<br/>            x=df[‘hp’],<br/>            y=df[‘mpg’],<br/>            mode=’markers’,<br/>            marker=dict(<br/>                size=df[‘wt’] * 10,<br/>                color=df[‘cyl’],<br/>                <strong class="nm iu">colorscale=’Viridis’</strong><br/>            )<br/>        )<br/>    ]<br/>)</span><span id="a29b" class="nr mn it nm b gy nw nt l nu nv">pyo.plot(fig)</span></pre><p id="ebfd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">图表如下所示:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/2668d4337a96f7ee0a4370f2e81c8716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAJPxHQ0plc6cijs0QqLiw.png"/></div></div></figure><p id="7249" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如你所见，这种视觉化对眼睛来说更容易一些。你可以参考<a class="ae lz" href="https://plotly.com/python/builtin-colorscales/" rel="noopener ugc nofollow" target="_blank">这个页面</a>来获得可用调色板的完整列表。</p><p id="2d89" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我想今天这样就够了。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="38a3" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">在你走之前</h1><p id="794f" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">我希望这对你来说不会太难——我知道这种复杂的语法可能需要一段时间来适应——但如果你问我，这是值得的。</p><p id="7b06" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来的文章将涵盖<strong class="kk iu">饼状图</strong>和<strong class="kk iu">树形图</strong>——如果你对此感兴趣，请继续关注。</p><p id="4463" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="18cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">喜欢这篇文章吗？成为 <a class="ae lz" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="oc">中等会员</em> </a> <em class="oc">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="od oe gp gr of og"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">medium.com</p></div></div><div class="op l"><div class="oq l or os ot op ou lo og"/></div></div></a></div></div></div>    
</body>
</html>