<html>
<head>
<title>A tricky Tableau question</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个棘手的问题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-tricky-tableau-question-6e8fe6e8371b?source=collection_archive---------44-----------------------#2020-07-08">https://towardsdatascience.com/a-tricky-tableau-question-6e8fe6e8371b?source=collection_archive---------44-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="58ff" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">更好地理解画面以避免挫败感</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3acce3ceec8a1bffd9d5ac8bfb1d8a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7lq0tTc9OzKS-nKP"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">micha Parzuchowski 在<a class="ae kv" href="https://unsplash.com/s/photos/jenga-kid?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c34a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名自由职业者，我已经用<a class="ae kv" href="https://www.airtasker.com/" rel="noopener ugc nofollow" target="_blank"> Airtasker </a>设置了一些提醒，这样如果有任何新的与仪表板相关的演出发布，我就会收到通知。Airtasker 有点像“逐底竞赛”,人们(包括我自己)发布相对简单的任务，他们只想以最少的钱完成这些任务。</p><p id="c426" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我以这种方式参加演出，他们带来了更大更好的东西，所以这并不全是坏事。如果没有别的，这是让你自己出去的好机会(尽管你必须小心那些要求你完成 20 美元作业的可疑大学生)。</p><p id="eb6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Tableau 辅导是我做过多次的事情(私下和通过 AirTasker)。我想我也可以分享一些我遇到的常见问题。所以这可能会变成一篇博文<strong class="ky ir">系列</strong> …</p><p id="e806" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">这篇博文</strong>是关于一个 Airtasker 的演出，它提出了一个我似乎已经多次(以某种形式)遇到的 Tableau 问题。这是一个直击要害的问题，为什么许多人觉得画面非常令人沮丧。</p><p id="a70d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">海报上有两张图片来说明她的问题。</p><h1 id="086b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">我的回应</h1><p id="d815" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我最终没有被分配到这个工作(drats！)，但这里是我想要传达的整洁版本。</p><p id="d440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了让我们开始，我可以使用 R(参见这里的要点)快速生成虚拟数据<a class="ae kv" href="https://gist.github.com/Tadge-Analytics/58a49896a5648175f95b3b61af67f653" rel="noopener ugc nofollow" target="_blank">，包含每月预算和每日实际金额，以模拟他们的数据。</a></p><p id="ae04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请随意下载生成的 Excel 文件，点击<a class="ae kv" href="https://www.dropbox.com/s/8ji31cxqpxouygk/example%20data.xlsx?dl=1" rel="noopener ugc nofollow" target="_blank">这里</a>(如果您愿意跟随)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/2f4e5521ce3b97a9bbc4c79ba7a3ab70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6cS4v6Dp7B829i44.png"/></div></div></figure><p id="3b69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以把这个放到桌子上，然后稍微布置一下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/2f59f2b1a5608f0b01f0774373012cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QqwmqhPIWFXs4x5d.png"/></div></div></figure><p id="e5bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在他们的照片中，他们有一些与上面不同的东西。他们并不仅仅使用<em class="mr">金额</em>，而是有几个计算字段显示几个特定时间段的金额:</p><ul class=""><li id="adb9" class="ms mt iq ky b kz la lc ld lf mu lj mv ln mw lr mx my mz na bi translated">当前月份</li><li id="5149" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">本年度</li><li id="b155" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">当前年度累计(财政)</li><li id="e64e" class="ms mt iq ky b kz nb lc nc lf nd lj ne ln nf lr mx my mz na bi translated">当前年度(YTG)(财政)</li></ul><p id="6725" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我如何创造这些。</p><p id="f445" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一步是创建一个新的列，该列正好是一直向下重复的当前日期。</p><blockquote class="ng nh ni"><p id="d80b" class="kw kx mr ky b kz la jr lb lc ld ju le nj lg lh li nk lk ll lm nl lo lp lq lr ij bi translated"><em class="iq">我认为计算字段是添加到数据源表中的</em>新列<em class="iq">——除非您正在处理 LOD 计算——在这种情况下，它更像是一个连接的聚合表——但 LOD 是一个完全不同的话题。</em></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/63a2a08fc2d83332247102f50017881b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-MHHojuYVfc3ugjQ.png"/></div></div></figure><p id="6697" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们创建一系列布尔(真/假)列，这些列将表明每一行中的日期是否满足我们的四个时间段条件中的任何一个。</p><p id="72fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用 datetrunc()函数，当前月份和年份就足够简单了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/7b6c257a5dcee56b748b739accacbba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b-cUBBC0eOueXYRd.png"/></div></div></figure><p id="af6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是<strong class="ky ir">财政年度</strong>需要更多的策略。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/a344d6f7cc830e899f8e688933e12801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7iGM8_HfTutvXN-z.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/9a1b60fe0c8d297fc43f1810d985cf12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*efLKvR4pI8PgU5Rf.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/693bf1e2e78be1304fa377ca959f17cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q0a-arVWIDdQ7ptx.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/5336275276b55ed6c589ba49579ded4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h4WNZfVVu_f8k26J.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/73998120bf11a037ad8602443fd3a07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/0*iCOUSAEhg42Hqp_4.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/ac4574c5fff112d89bf333a748a46d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4xPIUQw2vgLoiyoM.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/78c0da2edc3f929e2034a4f8082b1fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BWWGwcNDC-g0A4Rd.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/347e029433c3c85df6a01dcb10f2fa42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zDl_owu1-TSKhdep.png"/></div></div></figure><p id="292e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不错！用一个表仔细检查这些布尔值也是一个好主意，如下所示:</p><p id="84a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">似乎一切都好。</p><p id="b59b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的下一步是利用这些布尔列来<em class="mr">只包含金额列值，如果它们的条件满足</em>。我们可以简单地做到这一点，通过添加一个 IF 公式到每一个。</p><p id="23da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后将每个选项拖到 Measures 部分。</p><p id="8bc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">亲爱的。</p><p id="71e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以把它们都拖到我们的 viz 上，我们得到了一些看起来非常接近海报图片的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/bc725e7f5575446b40ed07fce9dd645d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kNEn9Db5ul7M97vv.png"/></div></div></figure><h1 id="1bef" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">寻找解决方案</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/2539f951dee8548bc9fcef5540c63340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FPY_hVL61FdIOryX.png"/></div></div></figure><p id="d32e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据原图，她的要求有两部分:<br/> 1。添加一个差异列<br/> 2。从“未来一年(YTG)”部分删除“实际值”和“差异”。</p><blockquote class="ng nh ni"><p id="69e3" class="kw kx mr ky b kz la jr lb lc ld ju le nj lg lh li nk lk ll lm nl lo lp lq lr ij bi translated"><em class="iq">这正是这种看似简单的事情，在 Tableau 中很难实现，这促使人们重新使用 Excel，在那里他们可以轻松地添加或隐藏列。</em></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/6e1d6cef40770ca31ebbed6adfea8eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/0*4BqAWMGe9KrDHUYN.png"/></div></figure><p id="69b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">弄清楚“Tableau 方式”需要很好地理解 Tableau 是如何“思考”的</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/cf48aac355b60a7896077d7d43bd5c49.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/0*VDP64BC-5I2ay8-p.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/46e29180a02eaffeee52e20c753a8934.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/0*KHHjp5pzXF5ISCUT.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/8f08779b3740bbcdab4f764f1cb04a4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_yOrPPMnZ3BUXHlv.png"/></div></div></figure><h1 id="6c88" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">快速取胜的解决方案</h1><p id="af72" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">(看起来)最简单的解决方案是向表中添加小计。</p><p id="39c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太棒了。</p><p id="37c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，新的 total 列只是 Actuals 和 Budget 列的相加。</p><p id="637e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了得到方差，我们必须创建一个“代理”金额列，其中实际值为负。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/2734536bdd8bfd1cbb6ca623a24bcc8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tlmxp-oU9-veOHfc.png"/></div></div></figure><p id="5886" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们将执行“替换引用”,这样，我们新创建的所有特定于时间的公式都链接回代理，而不是原始的 Amount 列。</p><p id="b5d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这没问题。格式栏还允许我们将标题标签从“总计”更改为“差异”。</p><p id="f1cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们对这个新的差异列的控制非常有限。</p><p id="0fc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了格式化它的颜色和排列，我们没有什么可以改变它。如果我们想把它显示成一个百分比，我们就不能这样做。</p><p id="4f3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种解决方案只会真正满足最随和的客户。</p><p id="a430" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个诱人的方法是右键单击我们的每个测量药丸，然后选择“快速表格计算”和“差异”…</p><p id="f587" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这<em class="mr">将</em>我们的列从两列(实际&amp;预算)变为一列(差额)。在这种情况下，很容易在意识到它不会给我们带来工作解决方案之前，在这个领域浪费几个小时。</p><h1 id="9773" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">令人沮丧的画面</h1><p id="4e69" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可能会认输，继续手动聚合我们的数据，在预处理步骤中(可能使用 SQL 创建视图，甚至是计划的 Tableau 准备流程)，将方差值附加到我们聚合的原始数据中。</p><p id="df89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一个使用 Tableau Prep 的快速视频。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><blockquote class="ng nh ni"><p id="815c" class="kw kx mr ky b kz la jr lb lc ld ju le nj lg lh li nk lk ll lm nl lo lp lq lr ij bi translated">这种事情只应该是最后的手段。</p></blockquote><p id="7368" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一大堆<em class="mr">单一用途的数据源</em>是一个坏习惯。尤其是刚开始的时候。</p><p id="f2ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时这是不可避免的，它们的创建既快又简单。但是一直这样做可能会阻止你获得所有不同的提示和技巧，这些提示和技巧允许你想要的功能从原始数据源产生<em class="mr">。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/da973d2fdd5ea9d9f52b00aba7ce218e.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/0*Kgm-MnXZQkr_G7DV.png"/></div></figure><p id="6066" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，这一过程的时间安排可能会成为你的一个障碍。如果我们正在处理一个数据库源，那么就有可能用这种正确的形式创建一个数据视图。但是，如果我们在没有一些中间位置(我们可以在那里建立这样一个视图)的情况下工作在一个直播服务<em class="mr">上，那么我们将会在设置它的过程中做更多的跑腿工作。</em></p><p id="4c80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">诚然，如果报告只是每月更新一次，那么在常规流程中增加一个准备流程可能没什么大不了的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/38b5aa836cb40a37ba0e7863d20368a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JA_l476RW78kmp2K.gif"/></div></div></figure><h1 id="c210" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">真正的解决方案</h1><p id="bd58" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有一种方法可以非常接近我们客户的要求，在原始数据集之外进行操作。</p><p id="fdb9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们要做的是为我们四个时间段的每个<strong class="ky ir"><em class="mr"/></strong>创建三个新的(实际、预算和差异)度量。</p><p id="c676" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不得不制定所有这些(12 项措施)听起来很令人头痛…但是我将向你展示一个漂亮的捷径。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/7dcbf7d5b2f174ae5a3d1ca73f4ea91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vAN2Fw-D170zjkha.gif"/></div></div></figure><p id="06d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们创建两个辅助列。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/5a428edada6fca67b1c266149fa4d150.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1et2oVslXtCFtx6F.png"/></div></div></figure><p id="fd60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">制作多个计算字段的诀窍是鲜为人知的<em class="mr">拖放方法</em>。</p><p id="d8b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，创建新字段的名称<em class="mr">作为注释</em>。相应地修改每个公式。然后将每个部分(包括注释/标题)拖到 measures 窗格上。</p><p id="97b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哒哒！该注释成为度量的名称。很惊讶，对吧？</p><p id="5bc4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建方差计算字段略有不同。请记住，从 Tableau 看到的内容来看，没有任何一行我们会看到<strong class="ky ir">预算和实际</strong>金额值。</p><p id="8100" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这由 SAP 版本列决定。任何特定的行都是<strong class="ky ir">T21、“实际”或“预算”。因此，使用[当月实际]—[当月预算]作为公式将<strong class="ky ir">而不是</strong>为我们工作。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/98032156e3e8cae57b78ba138e597449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jy_v1KdzeFY-tVfY.png"/></div></div></figure><p id="34d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，公式需要是一个集合，依赖于观想的情境。我们需要使用 SUM([当月实际])—SUM([当月预算])。</p><p id="25a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了整洁，我把所有这些新的计算结果放在一个文件夹里。让我们来看看它们。</p><p id="e5d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">哦不！在这一点上，我意识到“是实际的”栏不起作用！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/a74ae8066e5d679830a44165e6bff9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kQj-YQgVbl0OXVD1.png"/></div></div></figure><p id="0ca4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">SAP 版本有“实际的<strong class="ky ir"> S </strong>”而不是“实际的”。幸运的是，我只需要更新“is Actual”列，而不是我们刚刚创建的每一个“… actual”计算字段。唷！尽可能减少重复代码是一个很好的教训。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/477a1cd3ed4f5944c785717285cc9c09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yqxyAw-79efl6ZaO.png"/></div></div></figure><p id="8484" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧。回到正轨。</p><p id="c417" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将所有这些计算过的场都加入到 viz 中，我们面临着一系列新的挑战。</p><p id="f263" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于每个新度量，我想将标题别名从“当前月实际值”更改为“实际值”，但我只能这样做一次，因为它不能有重复的别名。</p><p id="cb88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为回应，我不得不在随后的别名上添加尾随空格，例如“Acutals”。我还将这些标题格式化为左对齐，并且从不“换行”(这样它们看起来都一样)。</p><p id="efd8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">诚然，这是一个相当小的问题。</p><p id="d8f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用所有这 12 个新计算的度量，我们现在可以根据需要灵活地修改差异列(例如，我们可以将其更改为预算的百分比)。我们还可以删除“未来一年的实际和差异”部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/53e7e672b6aa80ab3d2e86aa1a2b554d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/0*NC-cSRlFnmE5lVmu.png"/></div></figure><p id="b17c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，作为一个信息丰富的表格，这是非常乏味的，它缺少了客户请求的一个关键部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/afd1f42c0c31b8baa14130de48406181.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/0*GogtiPreaCzc50DV.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/cf2718f7f2c6694e4e50b0455a609d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/0*Izw0n4ajusBoYb01.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/1c2081d09466622865fe4b143f266349.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/0*wNww214Ww-an474R.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/9fcd203a0bf337062d388e7277b2713e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/0*RNRq6bNI-RFmwczE.png"/></div></figure><p id="3938" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们不能将“月($m)”、年初至今($m)”标题添加到显示“资本支出 OPEX”的上方(我们的源表中没有允许这样做的列)。我们目前的设置只是有一大堆数字，没有明确的时间框架之间的区别。</p><p id="883b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以用这些新的方法制作任何数量的酷图表，但是假设我们的客户是一个真正的坚持者，要么让表格看起来像她想要的那样，要么明确地知道她想要的根本不可能。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/f43cb79ab9c6f0d8c6a56fcd74739c4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tczF51EBtzT9unKm.png"/></div></div></figure><blockquote class="ng nh ni"><p id="399d" class="kw kx mr ky b kz la jr lb lc ld ju le nj lg lh li nk lk ll lm nl lo lp lq lr ij bi translated"><em class="iq">在所有这些艰苦的工作之后，我们会承认失败吗？</em></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/8bdd6448bd0ef9d07b7efc31be0959d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3Jf3C5QOb87LhruL.png"/></div></div></figure><h1 id="9790" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">选项 2</h1><p id="f1ba" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">和我们的委托人谈谈。尝试说服她一个你知道如何做的替代解决方案。</p><p id="bf92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也许他们不需要在一个表中显示每个时间段。我们可以创建一个参数，只显示<em class="mr">选择的</em>时间范围，一次一个。</p><p id="bdaf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后使用参数选择器驱动显示的数量。</p><p id="9f6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个小标题公式，会给我们需要的标题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/d677386cb7270010f985bf37e6e1641f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FEWO-wFHnxahOBrj.png"/></div></div></figure><h1 id="c4fc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">选项 3</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/9d94ef4b1316c88fc26ee0e250016ff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/0*wqnMrHxZ_9AFfQTf.png"/></div></figure><p id="40db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果他们绝对<em class="mr">必须</em>把它们都放在一个页面上，有一个解决方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/59580fcbeba43058bde6ff1e95eacb75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/0*NeNqo9U0PdGWGTic.png"/></div></figure><p id="3cdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过制作一个包含一系列表格的仪表板来实现这一点，这些表格只包含每个时间段的度量。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/c1d9f171f7798a423190233964818295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IUe8SdKXqiKrz3JE.gif"/></div></div></figure><p id="cc63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还将添加一个突出显示操作，这样在一个表中突出显示的行也会在其他 3 个表中突出显示。确保一切都正确排列。</p><p id="4eb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果实际数据有许多类别，我们还必须处理这些滚动条，因为它们不会以同步的方式滚动。有一个黑客，可用于这一点，解释得很好，在下面的视频。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ou oe l"/></div></figure><p id="3258" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这允许我们通过一个中心参数来限制每张表上显示的行数。但是你最终会得到一个水平滚动条，这有点烦人。可能有其他方法来改善滚动体验。</p><div class="ov ow gp gr ox oy"><a href="https://public.tableau.com/profile/klaus.schulte#!/vizhome/SynchronizedScrollingacrosssheetsinTableau2019_2/SynchronizedScrollingacrosssheets" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd ir gy z fp pd fr fs pe fu fw ip bi translated">Tableau 公共</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">编辑描述</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">public.tableau.com</p></div></div></div></a></div><p id="2f19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个演示展示了参数的使用。但我认为也好不到哪里去。</p><h1 id="4cff" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">上下合计</h1><p id="db69" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可能向客户展示的最后一个技巧是根据报告级别扩展和收缩表格。不幸的是，在我们的仪表板中，层次结构不能跨多个工作表工作。</p><p id="5312" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最简单的解决方案(复制自<a class="ae kv" href="https://youtu.be/tpYUfR6wkC4" rel="noopener ugc nofollow" target="_blank">这段 Youtube 视频</a>)是添加一个报告级别参数。</p><p id="d4e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后用计算字段替换实际报告级别，该字段将根据参数设置显示级别(或为空)。</p><p id="a0d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使我们能够根据不同的报告级别向上或向下(跨所有工作表)汇总。</p><p id="ca17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">也可能有“集合行动”演习，以进行调查。启用“单击展开”功能。但对我来说，参数滑块似乎令人满意。</p><h1 id="c282" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">所以你有它。</h1><p id="0016" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">看来我们终于找到了(理论上)能够满足客户最初要求的东西。您可以从 Tableau public 下载 Tableau 工作簿。</p><p id="98e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://public.tableau.com/views/Book1_15941833680570/Dashboard1?:language=en&amp;:display_count=y&amp;:origin=viz_share_link" rel="noopener ugc nofollow" target="_blank">https://public . tableau . com/views/Book1 _ 15941833680570/dashboard 1？:language = en&amp;:display _ count = y&amp;:origin = viz _ share _ link</a></p><p id="7eb0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个过程中，我们也向她展示了 Tableau 的一系列方面，其中许多方面她可能从未见过。</p><p id="1703" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在有很多地方可以这样做，比如可视化，理解起来不需要太多的认知负荷。</p></div><div class="ab cl ph pi hu pj" role="separator"><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm pn"/><span class="pk bw bk pl pm"/></div><div class="ij ik il im in"><p id="6720" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mr">原载于 2020 年 7 月 8 日 https://tadge-analytics.com.au</em><a class="ae kv" href="https://tadge-analytics.com.au/a-tricky-tableau-question/" rel="noopener ugc nofollow" target="_blank"><em class="mr"/></a><em class="mr">。</em></p></div></div>    
</body>
</html>