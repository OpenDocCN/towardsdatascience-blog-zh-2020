<html>
<head>
<title>4 Less Known Pandas Functions That Can Make Your Work Easier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4 个鲜为人知的熊猫功能，可以让你的工作更轻松</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-less-known-pandas-functions-that-can-make-your-work-easier-5e430cac7a82?source=collection_archive---------25-----------------------#2020-04-22">https://towardsdatascience.com/4-less-known-pandas-functions-that-can-make-your-work-easier-5e430cac7a82?source=collection_archive---------25-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="138c" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">为数据科学学习熊猫</h2><div class=""/><div class=""><h2 id="12f6" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">增强你的数据科学项目</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4636e751a5413da9c5bfef7614ba6a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fJVhsydkXqc9sMkh"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@stenuitj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jérémy Stenuit </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c729" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">许多数据科学家一直使用 Python 作为他们的编程语言选择。作为一种开源语言，Python 通过提供各种数据科学相关的库获得了相当大的流行。特别是，pandas 库可以说是基于 Python 的数据科学家中最流行的工具箱。</p><p id="449b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">不得不说熊猫库开发的太好了，为各种操作提供了非常庞大的函数集合。然而，这个强大的工具箱的缺点是，一些有用的功能可能不太为初学者所知。在这篇文章中，我想分享四个这样的功能。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="901f" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">1.where()函数</h2><p id="917b" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">大多数时候，对于我们正在处理的数据集，我们必须进行一些数据转换，以使数据具有可分析的格式。<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.where.html" rel="noopener ugc nofollow" target="_blank"/><code class="fe ni nj nk nl b"><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.where.html" rel="noopener ugc nofollow" target="_blank">where()</a></code><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.where.html" rel="noopener ugc nofollow" target="_blank">函数</a>用于替换不满足条件的值。让我们考虑下面的例子来了解它的用法。当然，我们首先需要导入 pandas 和 numpy，就像我们处理所有数据操作步骤一样。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/f5a4c8de40200d9ad447d57b40334f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8GvRCc7OKTDaIKHIfvhEDA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">对 Series 使用 where()</p></figure><p id="52c3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上图中，我们创建了一个序列并应用了<code class="fe ni nj nk nl b">where()</code>函数。具体来说，这个函数的签名用法是<code class="fe ni nj nk nl b">where(condition, other)</code>。在这个调用中，<code class="fe ni nj nk nl b">condition</code>参数将产生布尔值，当它们为<code class="fe ni nj nk nl b">True</code>时，原始值被保留，当它们为<code class="fe ni nj nk nl b">False</code>时，将使用由另一个参数指定的值。在我们的例子中，任何低于 1000 的值都被保留，而等于或大于 1000 的值被分配给 1000。</p><p id="546c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该函数不仅可用于 Series，也可用于 DataFrame。让我们看看 DataFrame 的类似用法。在下面的例子中，数据帧<code class="fe ni nj nk nl b">df0</code>的奇数将全部增加 1，偶数保持不变。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/916e064ad2a6f4848996ca7ddaf31bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EGG0_W1YoR3VREStrQa0-g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">将 where()与 DataFrame 一起使用</p></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="ce8a" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">2.函数的作用是</h2><p id="f7e7" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">与<code class="fe ni nj nk nl b">where()</code>函数不同，<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html" rel="noopener ugc nofollow" target="_blank"/><code class="fe ni nj nk nl b"><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html" rel="noopener ugc nofollow" target="_blank">pivot_table()</a></code><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html" rel="noopener ugc nofollow" target="_blank">函数</a>仅适用于 DataFrame。这个函数创建一个电子表格风格的数据透视表，因此它是一个很好的工具，通过以一种简单的方式显示数据来汇总、分析和呈现数据。用一个更现实的例子可以最好地展示它的威力。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/e81f71340c0839fe74f9f217d17a279b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*alohFx47Ih1NdifZYlT4rg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">对 DataFrame 使用 pivot_table()</p></figure><p id="2447" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上图中，我们创建了一个数据框架，其中包含工资和奖金记录以及雇员的性别和部门信息。然后，我们使用<code class="fe ni nj nk nl b">pivot_table()</code>函数创建了一个数据透视表。具体来说，我们将工资和奖金列设置为<code class="fe ni nj nk nl b">values</code>参数，将部门设置为<code class="fe ni nj nk nl b">index</code>参数，将性别设置为<code class="fe ni nj nk nl b">columns</code>参数，将<code class="fe ni nj nk nl b">[np.mean, np.median, np.amax]</code>设置为<code class="fe ni nj nk nl b">aggfunc</code>参数。</p><p id="31c8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在输出中，您可以看到我们有一个数据透视表，其中显示了 2(性别)乘 2(部门)的表格，分别是工资和奖金变量的平均值、中值和最大值。一些有趣的观察结果包括，在 A 部门，女性的工资高于男性，而在 b 部门，情况正好相反。在这两个部门，女性和男性的奖金相似。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="528a" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">3.函数的作用是</h2><p id="b53d" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">当我们有一个包含序数度量的数据集时，有时创建分类分位数来识别可能的模式比参数化地检查这些序数度量更有意义。理论上，我们可以自己计算分位数临界值，并使用这些临界值映射数据，以创建新的分类变量。</p><p id="a8c4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，这个操作可以通过<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.qcut.html" rel="noopener ugc nofollow" target="_blank"/><code class="fe ni nj nk nl b"><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.qcut.html" rel="noopener ugc nofollow" target="_blank">qcut()</a></code><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.qcut.html" rel="noopener ugc nofollow" target="_blank">函数</a>轻松实现，该函数根据变量的等级将变量离散成大小相等的池(例如，分位数和十分位数)。让我们通过下面的例子来看看这个函数是如何工作的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/0f863bd28b21b2189d325c3e73b2fa34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r77UydHgUf5_DZqVwbQCsw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">对 DataFrame 使用 qcut()</p></figure><p id="038a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上图中，我们创建了一个包含 3 列的数据帧。我们对生成<code class="fe ni nj nk nl b">var2</code>列的分位数感兴趣。因此，我们将<code class="fe ni nj nk nl b">q</code>参数指定为 4(如果需要十分位数，也可以是 10)。我们还指定了标签列表来标记这些分位数。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="1046" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">4.melt()函数</h2><p id="6951" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">根据数据科学家使用的工具，一些人喜欢“宽”格式(例如，一个主题一行多个变量)，而另一些人喜欢“长”格式(例如，一个主题多行一个变量)。因此，我们经常需要在这些格式之间进行数据转换。</p><p id="4802" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">与<a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.T.html" rel="noopener ugc nofollow" target="_blank">完全转置数据帧的转置</a> <code class="fe ni nj nk nl b"><a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.T.html" rel="noopener ugc nofollow" target="_blank">T</a></code> <a class="ae lh" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.T.html" rel="noopener ugc nofollow" target="_blank">函数</a>不同，<a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.melt.html" rel="noopener ugc nofollow" target="_blank"/><code class="fe ni nj nk nl b"><a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.melt.html" rel="noopener ugc nofollow" target="_blank">melt()</a></code><a class="ae lh" href="https://pandas.pydata.org/docs/reference/api/pandas.melt.html" rel="noopener ugc nofollow" target="_blank">函数</a>对于将数据从宽格式转换为长格式特别有用。让我们通过下面的例子来看看它是如何工作的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/7f2480e95add69acb65f1e8530598958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0E632_uKsg0ITcr1zzIRxQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">对 DataFrame 使用 melt()</p></figure><p id="bf8d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在上图中，我们创建了一个宽格式的数据帧。具体来说，我们有服药前和服药后两种措施。然后我们使用<code class="fe ni nj nk nl b">melt()</code>函数产生一个长格式的数据帧。我们将<code class="fe ni nj nk nl b">SubjectID</code>指定为<code class="fe ni nj nk nl b">id_vars</code>，将两个度量指定为<code class="fe ni nj nk nl b">value_vars</code>，并将列重命名为更有意义。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h2 id="c370" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">在你走之前</h2><p id="617a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们可以探索熊猫的更多功能。在本文中，我们刚刚学习了四个我们有些人不太了解的函数，但它们在我们的日常数据操作工作中非常有用。</p><p id="8baf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望你喜欢读这篇文章。你可以在<a class="ae lh" href="https://gist.github.com/ycui1/ef359c672f03b8a05e305669a564ef44" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到代码。</p><h2 id="bcd6" class="ml mm it bd mn mo mp dn mq mr ms dp mt lr mu mv mw lv mx my mz lz na nb nc iz bi translated">关于作者</h2><p id="a450" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我写关于 Python 和数据处理与分析的博客。万一你错过了我以前的一些博客，这里有一些与当前文章相关的文章链接。</p><div class="nn no gp gr np nq"><a href="https://medium.com/better-programming/30-simple-tricks-to-level-up-your-python-coding-5b625c15b79a" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd jd gy z fp nv fr fs nw fu fw jc bi translated">提升 Python 编码水平的 30 个简单技巧</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">更好的 Python</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe lb nq"/></div></div></a></div><div class="nn no gp gr np nq"><a rel="noopener follow" target="_blank" href="/understand-map-function-to-manipulate-pandas-series-8ac340d514f7"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd jd gy z fp nv fr fs nw fu fw jc bi translated">理解 map()函数操纵熊猫系列</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">了解使用 map()函数将数据转换为所需格式的基本原理</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">towardsdatascience.com</p></div></div><div class="nz l"><div class="of l ob oc od nz oe lb nq"/></div></div></a></div><div class="nn no gp gr np nq"><a rel="noopener follow" target="_blank" href="/a-cheat-sheet-on-generating-random-numbers-in-numpy-5fe95ec2286"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd jd gy z fp nv fr fs nw fu fw jc bi translated">关于在 NumPy 中生成随机数的备忘单</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">查看 NumPy 中最常用的生成随机数的函数。</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">towardsdatascience.com</p></div></div><div class="nz l"><div class="og l ob oc od nz oe lb nq"/></div></div></a></div></div></div>    
</body>
</html>