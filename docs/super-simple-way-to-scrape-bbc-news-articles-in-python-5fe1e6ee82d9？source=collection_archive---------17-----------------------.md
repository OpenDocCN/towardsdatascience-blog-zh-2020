# ç”¨ Python æŠ“å– BBC æ–°é—»æ–‡ç« çš„è¶…çº§ç®€å•æ–¹æ³•

> åŸæ–‡ï¼š<https://towardsdatascience.com/super-simple-way-to-scrape-bbc-news-articles-in-python-5fe1e6ee82d9?source=collection_archive---------17----------------------->

## *ç”¨æœ€å°‘ä»£ç æŠ“å–ç½‘ç«™çš„ç®€çŸ­æ•™ç¨‹*

# å—¨ï¼Œæˆ‘æ˜¯å½¼å¾—Â·ğŸ‡®ğŸ‡¸

æˆ‘åœ¨ä¼¦æ•¦ä¸€å®¶å’¨è¯¢å…¬å¸æ‹…ä»»æ•°æ®ç§‘å­¦å®¶ã€‚è¿™å®é™…ä¸Šæ„å‘³ç€æˆ‘ä¸ºå¤šå®¶å…¬å¸å·¥ä½œï¼Œä»äº‹ä¸åŒçš„æ•°æ®ç§‘å­¦å·¥ä½œã€‚

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘åœ¨äº‘ç«¯æ„å»ºæœºå™¨å­¦ä¹ è§£å†³æ–¹æ¡ˆã€‚æœ‰æ—¶ï¼Œé€šç”¨æ•°æ®è§£å†³æ–¹æ¡ˆã€ä»ªè¡¨ç›˜æˆ–æ¨èæ•°æ®ç§‘å­¦æœ€ä½³å®è·µã€‚ä¸è¿‡ï¼Œæœ€è¿‘ä¸»è¦æ˜¯ NLP æˆ–è®¡ç®—æœºè§†è§‰ã€‚å…³äºæˆ‘å·²ç»è¯´å¾—å¤Ÿå¤šäº†ã€‚

å¦‚æœä½ å¯¹æ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ æˆ–å¤§æ•°æ®æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆä½ å¾ˆæœ‰å¯èƒ½ä»ä¸€ä¸ªç½‘ç«™ä¸Šæ”¶é›†æ•°æ®ã€‚

å¯¹äºå°å‹é¡¹ç›®æˆ–æ¦‚å¿µéªŒè¯(PoC ),æ‰‹åŠ¨å®Œæˆå°±å¯ä»¥äº†ã€‚å…¶ä»–æ—¶å€™ï¼Œè¿™æœ€å¥½ç”¨ä»£ç æ¥å®Œæˆã€‚è¿™å°±æ˜¯ Python çš„é—ªå…‰ç‚¹ï¼Œæœ‰å¾ˆå¤šå¼€æºåº“å¯ä»¥å’Œå„ç§ç½‘ç«™äº¤äº’ã€‚

çŸ¥é“å¦‚ä½•ä½¿ç”¨ä»»ä½•åˆ®åº“ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æŠ€èƒ½ã€‚éå¸¸å€¼å¾—æŠ•èµ„ğŸ’°

> ç§˜å¯†æ˜¯å¾ˆå®¹æ˜“åˆ®ç½‘ç«™

æˆ‘ä»¬å°†ä¸€èµ·æ„å»ºä¸€ä¸ªç®€å•çš„ Python `class`æ¥æŠ“å– [BBC](https://www.bbc.co.uk/) ã€‚

> Ps:å¦‚æœä½ åªæ˜¯ä¸ºäº†æœ€åçš„ä»£ç è€Œæ‰“å¼€è¿™ç¯‡æ–‡ç« ï¼Œè¯·éšæ„è·³åˆ°ç»“å°¾ï¼Œé‚£é‡Œéƒ½æ˜¯å¸ƒå±€å¥½çš„ã€‚

![](img/29e38ebb9ed3867db261ccc102fba581.png)

ç…§ç‰‡ç”± [ClÃ©ment H](https://unsplash.com/@clemhlrdt?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/s/photos/coding?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

# æ¼‚äº®çš„ç»„åˆå’Œè®¾ç½®ğŸ²ğŸ£

[BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) æ˜¯æˆ‘æœ€å–œæ¬¢çš„æµè§ˆç½‘ç«™çš„æ–¹å¼ã€‚å­¦èµ·æ¥ç®€å•ï¼Œç”¨èµ·æ¥æ–¹ä¾¿ã€‚

æ­¤å¤–ï¼Œæƒ³è±¡ä¸€ä¸‹åœ¨ç½‘ç»œæŠ“å–æ—¶ä»æ±¤é‡Œæå‡ºå¥½çš„éƒ¨åˆ†æ˜¯å¾ˆæ»‘ç¨½çš„ã€‚

é¦–å…ˆï¼Œä½¿ç”¨å‘½ä»¤è¡Œå°†åº“å®‰è£…åˆ°æ‚¨çš„ [**ç¯å¢ƒ**](https://realpython.com/python-virtual-environments-a-primer/) ä¸­ã€‚ä½œä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨ [Anaconda](https://www.anaconda.com/) ã€‚

æˆ‘ä»¬è¿˜éœ€è¦`requests` æ¨¡å—ä» BBC è·å– HTML ä»£ç ã€‚åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œè¿™äº›:

```
conda install beautifulsoup4 requests -y
```

å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`pip`ã€‚

```
pip install beautifulsoup4 requests
```

å®‰è£…å®Œæˆåï¼Œåˆ›å»ºä¸€ä¸ª python æ–‡ä»¶(ã€‚py)å¹¶åœ¨ä»£ç é¡¶éƒ¨å¯¼å…¥åº“ã€‚

æˆ‘æ¨èä½¿ç”¨ [PyCharm](https://www.jetbrains.com/pycharm/) ï¼Œä½†æ˜¯å¦‚æœä½ åˆšåˆšå¼€å§‹ï¼ŒJupyter ç¬”è®°æœ¬æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å°è¯•æ–¹å¼ã€‚

```
import requests
from bs4 import BeautifulSoup as bs
```

æˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯ä¸¤ä¸ª`find` å‡½æ•°ã€‚å®ƒä»¬å…è®¸æˆ‘ä»¬åœ¨æ±¤é‡Œæ‰¾åˆ°ä»»ä½• HTML å…ƒç´ ï¼Œåªéœ€è¦æŒ‡å®šå®ƒçš„åå­—ã€‚

```
**find**(element_tag, attribute) *#return first matching item***find_all**(element_tag, attribute) *#return list of matching items*
```

> å§‹ç»ˆä½¿ç”¨ python ç¯å¢ƒæ¥ç®¡ç†æ‚¨çš„é¡¹ç›®

## ç¤ºä¾‹æ–‡ç« 

è®©æˆ‘ä»¬æŒ‘é€‰ä¸€ç¯‡ BBC çš„æ–‡ç« ã€‚æˆ‘é€‰æ‹©äº†ä¸€ä¸ªå†°å²›çºªå¿µå…¶ç¬¬ä¸€åº§å†°å·å› æ°”å€™å˜åŒ–è€Œæ¶ˆå¤±çš„åœ°æ–¹ã€‚

é€šè¿‡ Python è®¿é—®åŸå§‹æ–‡ç« :

```
url = '[https://www.bbc.co.uk/news/world-europe-49345912](https://www.bbc.co.uk/news/world-europe-49345912)'
article = requests.get(url)
```

ç„¶åå°†æ–‡ç« å†…å®¹ä¼ é€’ç»™ BeautifulSoup å¹¶æŒ‡å®š HTML è§£æå™¨ã€‚

```
soup = bs(article.content, 'html.parser')
```

å°±è¿™ä¹ˆç®€å•ï¼Œæ±¤å°±åšå¥½äº†ï¼è®©æˆ‘ä»¬æ‰¾å‡ºå¥½çš„éƒ¨åˆ†ğŸ£

ä¸‹ä¸€æ­¥æ˜¯æ‰‹åŠ¨æ£€æŸ¥é¡µé¢çš„ HTML ä»¥æ‰¾åˆ°æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…ƒç´ ã€‚æˆ‘ç”¨çš„æ˜¯ Chromeï¼Œä½†æ˜¯ä½ å¯ä»¥ç”¨ä»»ä½•æµè§ˆå™¨ã€‚

## ä½¿ç”¨æµè§ˆå™¨å®šä½å…ƒç´ 

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘é¡µï¼Œå³é”®å•å‡»å¹¶â€œæ£€æŸ¥â€ã€‚

![](img/a58f1a72547958dd4e6ba38989d5f9ca.png)

*ä½œè€…å›¾ç‰‡*

å°†é¼ æ ‡æ‚¬åœåœ¨ä»»ä½•æ–‡æœ¬ä¸Šï¼Œæµè§ˆå™¨ä¼šå‘Šè¯‰æ‚¨è¯¥æ®µè½åœ¨å“ªä¸ª div ä¸­ã€‚

*å¦‚æœä¸èµ·ä½œç”¨ï¼ŒæŒ‰*`***Ctrl+ Shift+ C***`**æˆ–* `***CMD + shift + C***` *å†è¯•ä¸€æ¬¡ã€‚**

*åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œ**story-body _ _ introduction**â€åŒ…å«çªå‡ºæ˜¾ç¤ºçš„æ®µè½ã€‚*

*å…·æœ‰å±æ€§" **articleBody"** çš„ div ç±»" **story-body__inner** "åŒ…å«äº†æ•´ç¯‡æ–‡ç« ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¿½æ±‚çš„ã€‚*

*![](img/3adaeb18dbede7511c684b55fc41592c.png)*

**ä½œè€…å›¾ç‰‡**

*åœ¨æ±¤é‡Œæ‰¾åˆ°å°¸ä½“:*

```
*body = soup.find(property='articleBody')*
```

*è¿™ä¸ºæˆ‘ä»¬æä¾›äº†åŸå§‹ HTML æ ¼å¼çš„æ®µè½(p)çš„å†…å®¹ã€‚*

*è®¿é—®æ¯ä¸ªæ®µè½çš„æ–‡æœ¬ï¼Œå¹¶ä½¿ç”¨åˆ—è¡¨ç†è§£å°†å…¶åˆ†é…åˆ°ä¸€ä¸ªæ–°åˆ—è¡¨:*

```
*text = [p.text for p in body.find_all('p')*
```

*æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°å†…å®¹ç»„åˆåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°æ¥å— BBC æ–‡ç« çš„ URL:*

## *è®¿é—®å…¶ä»–åŒºåŸŸ*

*å¦‚æœæˆ‘ä»¬æƒ³è¦è®¿é—®æ ‡é¢˜ï¼Œæˆ‘ä»¬å†æ¬¡æ£€æŸ¥ç«™ç‚¹ï¼Œæ‰¾åˆ°æ ‡é¢˜æ‰€åœ¨çš„ divï¼Œç„¶åæŠŠå®ƒä»æ··ä¹±ä¸­æå‡ºæ¥ã€‚*

*![](img/7bab1d107173ec2f1fabe9af07c77263.png)*

**ä½œè€…å›¾ç‰‡**

*ä»£ç çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:*

*æ›´æœ‰ç»éªŒçš„ç¼–ç äººå‘˜å¯èƒ½å·²ç»å‘ç°äº†è¿™äº›å‡½æ•°çš„é—®é¢˜â€¦*

*å®ƒä»¬åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç›¸åŒçš„ã€‚é‚£ä¸æ˜¯å¾ˆ[å¹²](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)å˜›ã€‚*

*ä¸€ç§æ–¹æ³•æ˜¯å°†å®ƒä»¬é‡æ„ä¸º 3 ä¸ªå‡½æ•°ï¼Œå¹¶å°†`get_soup`æ”¾åœ¨è‡ªå·±çš„å‡½æ•°ä¸­ã€‚*

*ç„¶è€Œï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬æƒ³è®¿é—®æ ‡é¢˜å’Œæ­£æ–‡ï¼Œæˆ‘ä»¬å¿…é¡»ä¸‹è½½ BBC æ–‡ç« ä¸¤æ¬¡ï¼*

*è¿™æ„Ÿè§‰åè€Œåº”è¯¥æ˜¯ä¸€é—¨è¯¾ã€‚*

*å¦å¤–ï¼Œç±»çœ‹èµ·æ¥æ›´ä¸“ä¸šï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°ä¸­è°ƒç”¨å‡½æ•°ã€‚å½“åˆ®åˆ€å˜å¾—è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œå®ƒä»¬ä¹Ÿä½¿ç»´æŠ¤å˜å¾—æ›´å®¹æ˜“ã€‚*

*ä½œä¸ºä¼Ÿå¤§çš„ç¨‹åºå‘˜ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒå˜æˆä¸€ä¸ªç±»ï¼*

# *é‡æ„ä¸ºä¸€ä¸ªç±»ğŸš€*

*ä»å®šä¹‰ç±»å¼€å§‹ã€‚*

*æ¯ä¸ªç±»éƒ½åº”è¯¥æœ‰ä¸€ä¸ª`__init__` å‡½æ•°ï¼Œä½ å¯ä»¥ä¼ é€’ä»»ä½•å˜é‡æ¥åˆå§‹åŒ–å‡½æ•°ã€‚*

*å½“æ‚¨è°ƒç”¨è¯¥ç±»æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨`__init__`å‡½æ•°ã€‚*

*ç±»ä¸­çš„æ¯ä¸ªå‡½æ•°è¿˜éœ€è¦æœ‰`self` ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚è¿™æ˜¯é‚£ä¸ªç‰¹å®šç±»çš„å®é™…å®ä¾‹ã€‚*

```
***class BBC:
    def __init__(self):
        pass***
```

*æ¥ä¸‹æ¥ï¼Œåœ¨`__init__`ä¸­æ·»åŠ  URL ä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠå®ƒå˜æˆä¸€ä¸ªæ±¤ã€‚æ›´æ”¹ä»¥ç²—ä½“çªå‡ºæ˜¾ç¤ºã€‚*

```
*class BBC:
    def __init__(self, **url**):
        **article = requests.get(url)
        self.soup = bs(article.content, "html.parser")***
```

*å°† soup å˜é‡å†™æˆ self.soup ä½¿å®ƒæˆä¸ºè¯¥ç±»çš„ä¸€ä¸ªå±æ€§ã€‚å¯ä»¥åœ¨ç±»ä¸­çš„ä»»ä½•åœ°æ–¹ã€ä»»ä½•å‡½æ•°ä¸­è®¿é—®ç±»å±æ€§ã€‚*

*ä¸ºäº†è®¿é—®æ–‡ç« çš„æ­£æ–‡ï¼Œæˆ‘ä»¬ä½¿ç”¨å‰é¢çš„ body å‡½æ•°ã€‚`body`ç°åœ¨ä¹Ÿæ˜¯è¿™ä¸ªç±»çš„ä¸€ä¸ªå±æ€§*

```
*class BBC:
    def __init__(self, url):
        article = requests.get(url)
        self.soup = bs(article.content, "html.parser") **self.body = self.get_body()** **def get_body(self) -> list:
        body = self.soup.find(property="articleBody")
        return [p.text for p in body.find_all("p")]***
```

*åŒé¢˜:*

```
*class BBC:
    def __init__(self, url):
        article = requests.get(url)
        self.soup = bs(article.content, "html.parser") self.body = self.get_body()
 **self.title = self.get_title()** def get_body(self) -> list:
        body = self.soup.find(property="articleBody")
        return [p.text for p in body.find_all("p")] **def get_title(self) -> str:
        return self.soup.find(class_="story-body__h1").text***
```

*æ•´ä¸ªä»£ç çœ‹èµ·æ¥åƒè¿™æ ·:*

# *æ‘˜è¦*

*æš‚æ—¶å°±è¿™æ ·äº†ã€‚ä¸‹é¢æ˜¯å®ƒçš„å·¥ä½œåŸç†:*

*![](img/e88c9d56bbe2fc94295f9d663051e1ad.png)*

**ä½œè€…å›¾ç‰‡**

*åœ¨æˆ‘çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°† NLP åº”ç”¨äº BBC æ–‡ç« ï¼Œå¹¶æ„å»ºä¸€ä¸ª [Streamlit](https://www.streamlit.io/) åº”ç”¨ç¨‹åºä¸ä¹‹äº¤äº’ï¼*