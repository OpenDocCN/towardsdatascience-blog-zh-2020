# 统计假设检验简明指南

> 原文：<https://towardsdatascience.com/statistical-hypothesis-testing-b9e641da8cb0?source=collection_archive---------38----------------------->

## 统计推断的频率主义方法。

![](img/f2e4fa905db52b5bb7414242fe4b7076.png)

拉纳·萨瓦哈在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 介绍

[**频数统计**](https://en.wikipedia.org/wiki/Frequentist_inference#:~:text=Frequentist%20inference%20is%20a%20type,alternative%20name%20is%20frequentist%20statistics.) 的主要应用之一是一组或多组之间 [**样本均值和方差**](https://en.wikipedia.org/wiki/Sample_mean_and_covariance) 的比较，称为 [**统计假设检验**](https://en.wikipedia.org/wiki/Statistical_hypothesis_testing) 。样本 [**统计量**](https://en.wikipedia.org/wiki/Statistic) 是一个汇总/压缩的概率分布；例如，高斯分布可以用平均值和标准差来概括。在一位经常出入的统计学家看来，当从背后有未知固定真值的数据中估计时，所述统计是 [**随机变量**](https://en.wikipedia.org/wiki/Random_variable)——问题是各组相对于这些估计值是否显著不同。

例如，假设研究人员对儿童的成长感兴趣，并且想知道相同年龄(例如 12 岁)的男孩和女孩是否具有相同的身高；该研究人员在某所学校收集随机变量*身高*的数据集。在这种情况下，*身高*的随机性是由于抽样人口(他发现的十二岁的儿童)而产生的，而不一定是由于噪音——除非测量方法非常不准确(这导致进入 [**计量学**](https://en.wikipedia.org/wiki/Metrology) 的领域)。也许，来自其他学校的不同孩子会导致不同的数据。

# 假设

假设研究问题公式化为“同龄的男生和女生的*身高*是否不同？”第一步是提出一个假设，尽管习惯上称为 [**无效假设**](https://en.wikipedia.org/wiki/Null_hypothesis)**【H0】**，即同龄的男孩和女孩具有相同的身高(没有差异)。这类似于考虑随机变量*身高*的可能的两种分布，具有固定的平均值 *μ* 和标准偏差 *σ* ，生成*身高*值——但是不知道男孩( *μ1* 和女孩( *μ2* )的平均值是否相同。(此外，还有一个替代假设(HA ),它通常是零假设的否定。)在这种情况下，零假设是

```
H0: μ1 = μ2
```

概率分布的参数可以用 [**最大似然**](https://en.wikipedia.org/wiki/Maximum_likelihood_estimation) 方法进行估计，即最大化一个似然函数；众所周知的平均值和标准偏差公式就是从这种方法中产生的。使用这些公式，研究人员计算两个样本均值，他可能会获得它们之间的一些差异。然而，研究人员如何确定这种差异是真实的，而不是随机不相等的零，因为他也可以在这项研究中包括其他(或更多)儿童？

![](img/48306916496e284dc2aed0c3076f394d.png)![](img/c48e063e845460fd414021f17ed4a24a.png)![](img/441dcad4c09209730d204a3cb44ff0b6.png)

**图 1:** 样本均值的分布作为样本量的函数。这个分布的标准差随着样本越多越窄(来源:作者)。

在图 1 中，给出了一个带有随机数发生器的模拟。从随机变量 *x* (例如*高度*)的高斯分布中抽取样本，其中 *μ* =156.4，*σ*= 4.8；在每个子图中，抽取 *n 个*样本，并计算样本平均值；对于每个样本大小，该过程重复 1000 次，并且样本平均值的相应直方图被可视化。这实质上是不同样本量的样本平均值的分布，很明显，随着样本量的增加，这种分布变得更窄，因为平均值的标准偏差，也称为[](https://en.wikipedia.org/wiki/Standard_error)****【s . e .)，与样本量的平方根成反比。****

```
**s.e. = σ / sqrt(n)**
```

****一方面， [**大数定律**](https://en.wikipedia.org/wiki/Law_of_large_numbers) 规定，从大量抽样的随机变量中获得的[](https://en.wikipedia.org/wiki/Average)**的平均值应该接近于[](https://en.wikipedia.org/wiki/Expected_value)**的期望值，并且随着抽取的样本越多，将趋于更接近于期望值。另一方面， [**中心极限定理**](https://en.wikipedia.org/wiki/Central_limit_theorem) 陈述了样本均值遵循具有真实均值和标准误差的正态分布。********

****在图 1 中，对于 *n* =20，一些样本均值是 154，而另一些是 160——这只是偶然。想象计算两个样本平均值，一个是男孩的，一个是女孩的。如果有差异，那可能只是偶然的，尤其是对于小样本而言。如果收集了足够多的样本，通过计算样本平均值可以更有把握地找到“真实平均值”——但如果没有给出呢？在许多研究中，参与者的数量通常是有限的。****

# ****置信区间****

****这就是所谓的 [**置信区间**](https://en.wikipedia.org/wiki/Confidence_interval) 的由来。估计统计量的置信区间是从样本中计算出来的随机区间，该样本包含具有某种指定概率的真值。例如，平均值的 95%置信区间是一个随机区间，其中包含概率为 0.95 的真实平均值。更准确地说，如果我们选取许多随机样本，并计算每个样本的置信区间，这些区间中大约 95%将包含真实均值，如图 2 中的模拟所示。****

****![](img/e81719c7ab83747729ca54dcf360de86.png)****

******图 2:** 以 100 个估计样本均值为中心的 95%置信区间(上例中 *μ* =156.4 *，σ* =4.8，n = 20——即 z=2.086)。100 个中有 6 个不包括真实平均值(来源:作者)。****

****这样，图 1 中的分布可以用一个置信区间来近似。为了计算置信区间，来自 [**t 分布**](https://en.wikipedia.org/wiki/Student%27s_t-distribution) 的分位数 *z* 对应于所选择的概率 1- *α* (例如，95%的情况下 *α* = 0.05)和自由度( *df* )乘以以两侧样本均值为中心的标准误差。(注意在频率主义者的范式中，随机性和频率这两个概念是如何无处不在的。)****

```
**confidence interval = [μ - z(α/2, df)*s.e., μ + z(α/2, df)*s.e.]**
```

****t 分布是一种连续的概率分布，当估计正态分布总体的样本均值时会出现这种情况，此时样本量较小，总体标准差未知，这种情况很常见。(下面将更详细地讨论 t 分布。)****

# ****统计测试****

****了解随机变量的分布对于选择适当的统计检验是有意义的。更准确地说，像 [**t-test**](https://en.wikipedia.org/wiki/Student%27s_t-test) 这样的参数测试假设随机变量的 [**正态分布**](https://en.wikipedia.org/wiki/Normal_distribution)**——一个可能不满足的要求。在这种情况下，使用非参数检验是合理的，例如 [**曼-惠特尼 U 检验**](https://en.wikipedia.org/wiki/Mann%E2%80%93Whitney_U_test) 。然而，Mann-Whitney U 检验使用另一个零假设，其中两组的概率分布彼此相关******

```
**H0: p(height1) = p(height2)**
```

****有一大堆统计测试(图 3)；使用哪种检验取决于数据类型(定量与分类)、数据是否正态分布(参数与非参数)以及样本是否配对(独立与相关)。然而，重要的是要意识到零假设并不总是相同的，所以结论会稍有变化。****

****![](img/a0416a2e272312de67b0b8b6303dfb10.png)****

******图 3:** 统计检验概述(来源:作者)。****

****一旦假设得到验证，就选择一个测试，并且从大小为 *n* 和 *m* 的两个样本中计算出 [**测试统计量**](https://en.wikipedia.org/wiki/Test_statistic) 。在这个例子中，它将是[**T-统计量**](https://en.wikipedia.org/wiki/T-statistic) *T* ，它根据**T-分布进行分布(具有 *n* + *m* -2 个自由度)。 *S* 是汇集(聚集)样本方差。此外，值得一提的是 *T* 与样本大小成比例。******

```
**T = (mean(height1) - mean(height2)) / (sqrt(S) * (1/n + 1/m))S = ((n - 1) * std(height1) + (m - 1) * std(height1)) / (n + m - 2)**
```

****注意 t 统计量与高斯分布相关的[***-得分***](https://en.wikipedia.org/wiki/Standard_score)*、的相似性。z 得分的绝对值越高，其关联概率越低，对于 t 分布也是如此。因此，t 统计的绝对值越高，零假设为真的可能性就越小。*****

*****只是为了提供一些说明，t 统计量遵循 t 分布，因为标准偏差/误差是未知的，必须从(少量)数据中估计。如果已知，我们将使用正态分布和 z 得分。对于较大的样本量，随着标准误差接近零，t 统计量的分布变得越来越正态。(注意，估计的标准偏差也是遵循具有 n-1 个自由度的 [**卡方分布**](https://en.wikipedia.org/wiki/Chi-square_distribution) 的随机变量。)*****

# *****p 值*****

*****如上所述，统计假设检验处理组间比较，目标是在给定估计样本统计的情况下，评估组间差异是否显著。为此，计算充分统计量、它们相应的置信区间和 [**p 值**](https://en.wikipedia.org/wiki/P-value) 。p 值是与使用 T 分布的 T 统计相关联的概率，类似于与 *z* 得分和高斯分布相关联的概率(图 4)。在大多数情况下，会应用双边检验来评估 T 统计的绝对值。用数学术语来说，p 值是*****

```
***p = 2*min{Pr(θ <= T|H0), Pr(θ >= T|H0)}***
```

*****![](img/a6b51b605c0ef4a7fa2a99c9daad8691.png)*****

*******图 4:** 学生的 t 分布和 p 值背后的直觉(来源:作者)。*****

*****因此，p 值是获得测试结果 *θ* 的最大概率，至少与假设零假设为真的情况下实际观察到的结果 *T —* 一样“极端”。非常小的 p 值意味着在零假设下，这种“极端”的观察结果是非常不可能的(观察到的数据与零假设“充分”不一致)。因此，零假设被拒绝。*****

# *****假阳性和假阴性*****

*****如果 p 值低于某个阈值 *α* ，则称该差异为 [**统计显著性**](https://en.wikipedia.org/wiki/Statistical_significance) 。拒绝实际为真的零假设称为**I 型错误**(假阳性)，I 型错误的概率称为显著性水平(“某阈值”) *α* 。当零假设为假时接受零假设被称为**第二类错误**(假阴性)，其概率用 *β* 表示。当零假设为假时被拒绝的概率称为检验的功效，等于 1- *β* 。通过对显著性水平 *α* 更加严格，假阳性的风险可以被最小化。然而，调整假阴性更加困难，因为替代假设包括所有其他可能性。*****

*****实际情况是， *α* 的选择本质上是任意的；科学上常用小数值，如 0.05(甚至 0.01)。这种方法的一个缺点是必须拒绝或接受零假设，尽管这不是必须的。例如，在贝叶斯方法中，两种假设可以同时存在，并具有一些相关的后验概率(模拟假设的可能性)。*****

# *****结束语*****

*****应该说明的是，置信区间和假设检验之间存在着二重性。无需过多赘述，值得一提的是，如果给定水平 *α* 的两个置信区间重叠，则零假设被拒绝。然而，仅仅因为差异在统计上是显著的，它可能是不相关的。对于没有意义或不重要的影响，可以观察到小的 p 值。事实上，样本量越大，产生有统计学意义的 p 值所需的最小效应就越小。最后，结论是没有价值的，因为它们是基于坏的(如有偏见的)数据。重要的是保证采样的数据是高质量的并且没有 [**偏差**](https://en.wikipedia.org/wiki/Bias_(statistics)) — ，这根本不是一件小事。*****

*****[](/how-sampling-biases-might-be-ruining-your-predictions-f9e021d79723) [## 偏见如何扭曲你的预测

### 理解数据及其分布是精确模型的关键。

towardsdatascience.com](/how-sampling-biases-might-be-ruining-your-predictions-f9e021d79723)*****