<html>
<head>
<title>Build your first Anomaly Detector in Power BI using PyCaret</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 PyCaret 在 Power BI 中构建第一个异常检测器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-first-anomaly-detector-in-power-bi-using-pycaret-2b41b363244e?source=collection_archive---------3-----------------------#2020-05-14">https://towardsdatascience.com/build-your-first-anomaly-detector-in-power-bi-using-pycaret-2b41b363244e?source=collection_archive---------3-----------------------#2020-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="01f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在 Power BI 中实现异常检测的分步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f51095eb3b91623a803593829336a588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sh9LrK5WiF1pBDDR1PCK0g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Power BI 中的异常检测仪表板</p></figure><p id="f000" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的上一篇文章中，<a class="ae lr" rel="noopener" target="_blank" href="/machine-learning-in-power-bi-using-pycaret-34307f09394a">使用 PyCaret </a>在 Power BI 中进行机器学习，我们展示了一个关于如何将 PyCaret 集成到 Power BI 中的<strong class="kx ir">分步教程</strong>，从而允许分析师和数据科学家在没有任何额外许可成本的情况下，将机器学习层添加到他们的仪表板和报告中。</p><p id="3554" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇文章中，我们将深入探讨并使用 PyCaret 在 Power BI 中实现一个异常检测器。如果你以前没有听说过 PyCaret，请阅读这个<a class="ae lr" rel="noopener" target="_blank" href="/announcing-pycaret-an-open-source-low-code-machine-learning-library-in-python-4a1f1aad8d46">公告</a>以了解更多信息。</p><h1 id="2814" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">本教程的学习目标</h1><ul class=""><li id="548e" class="mk ml iq kx b ky mm lb mn le mo li mp lm mq lq mr ms mt mu bi translated">什么是异常检测？异常检测的类型？</li><li id="2615" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">在 Power BI 中训练和实现一个无监督的异常检测器。</li><li id="619b" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">在仪表板中分析结果和可视化信息。</li><li id="4bd2" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">如何在电力 BI 生产中部署异常检测器？</li></ul><h1 id="2e45" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">开始之前</h1><p id="6a97" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">如果您以前使用过 Python，很可能您的计算机上已经安装了 Anaconda 发行版。如果没有，<a class="ae lr" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank">点击这里</a>下载 Python 3.7 或更高版本的 Anaconda 发行版。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/527c605741ef4b3832cb382834b24e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMceDxpwFVHDtdFi528jEg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae lr" href="https://www.anaconda.com/products/individual" rel="noopener ugc nofollow" target="_blank">https://www.anaconda.com/products/individual</a></p></figure><h1 id="7f8c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置环境</h1><p id="b402" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">在我们开始在 Power BI 中使用 PyCaret 的机器学习功能之前，我们必须创建一个虚拟环境并安装 pycaret。这是一个三步走的过程:</p><p id="0caa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank"> ✅ </a> <strong class="kx ir">步骤 1——创建一个 anaconda 环境</strong></p><p id="a116" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">从开始菜单打开<strong class="kx ir"> Anaconda 提示符</strong>并执行以下代码:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0ec9" class="nj lt iq nf b gy nk nl l nm nn">conda create --name <strong class="nf ir">myenv</strong> python=3.7</span></pre><p id="27e1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank"> ✅ </a> <strong class="kx ir">第二步—安装 PyCaret </strong></p><p id="9a25" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在 Anaconda 提示符下执行以下代码:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0ad3" class="nj lt iq nf b gy nk nl l nm nn">pip install pycaret</span></pre><p id="d656" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">安装可能需要 15-20 分钟。如果您在安装时遇到问题，请查看我们的<a class="ae lr" href="https://www.github.com/pycaret/pycaret" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面，了解已知问题和解决方案。</p><p id="98ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://fsymbols.com/signs/tick/" rel="noopener ugc nofollow" target="_blank">✅</a>t24】第三步——在 Power BI 中设置 Python 目录</p><p id="1173" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建的虚拟环境必须与 Power BI 链接。这可以使用 Power BI Desktop 中的全局设置来完成(文件→选项→全局→ Python 脚本)。默认情况下，Anaconda 环境安装在以下位置:</p><p id="db71" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">C:\Users\ <strong class="kx ir"> <em class="no">用户名</em></strong>\ AppData \ Local \ Continuum \ anaconda 3 \ envs \ myenv</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/71fac33af972f13dcaf90ad006e735ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQMKuyEk8LGrOPE-NByjrg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">文件→选项→全局→ Python 脚本</p></figure><h1 id="3f06" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是异常检测？</h1><p id="563a" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">异常检测<strong class="kx ir"> </strong>是机器学习中的一种技术，用于识别<strong class="kx ir">罕见项目</strong>、<strong class="kx ir">事件</strong>或<strong class="kx ir">观察值</strong>，这些观察值通过与大多数数据显著不同而引起怀疑。</p><p id="631b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通常，异常项目会转化为某种问题，如银行欺诈、结构缺陷、医疗问题或错误。有三种方法可以实现异常检测器:</p><p id="57eb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> (a)受监督:</strong>当数据集具有标识哪些交易是异常的，哪些是正常的标签时使用。<em class="no">(这类似于监督分类问题)</em>。</p><p id="8420" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> (b)半监督:</strong>半监督异常检测背后的思想是仅在正常数据上训练模型<em class="no">(没有任何异常)</em>。当训练好的模型随后用于看不见的数据点时，它可以预测新的数据点是否正常(基于训练好的模型中数据的分布)。</p><p id="c9cb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> (c)无监督:</strong>顾名思义，无监督意味着没有标签，因此没有训练和测试数据集。在无监督学习中，在完整的数据集上训练模型，并假设大多数实例是正常的。同时寻找似乎最不适合其余部分的实例。有几种无监督的异常检测算法，如隔离森林或单类支持向量机。每种方法都有自己识别数据集中异常的方法。</p><p id="b265" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本教程是关于在 Power BI 中使用名为 PyCaret 的 Python 库实现无监督异常检测的。对这些算法背后的具体细节和数学的讨论超出了本教程的范围。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/396c7ebc83a025d575b934abfc329399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Cnyg6-F-Qd4r1Ptcf6nNw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Goldstein M，Uchida S (2016)多元数据的无监督异常检测算法的比较评估。巴勒斯坦解放组织</p></figure><h1 id="2c3c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置业务环境</h1><p id="d670" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">许多公司向员工发放公司信用卡(<em class="no">也称为采购卡或</em> <em class="no">采购卡</em>)以有效管理运营采购。通常情况下，员工可以通过电子方式提交报销申请。收集的数据通常是交易性的，可能包括交易日期、供应商名称、费用类型、商家和金额。</p><p id="96b2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本教程中，我们将使用美国特拉华州教育部 2014 年至 2019 年的州雇员信用卡交易。这些数据可以在他们的<a class="ae lr" href="https://data.delaware.gov/Government-and-Finance/Credit-Card-Spend-by-Merchant/8pzf-ge27" rel="noopener ugc nofollow" target="_blank">开放数据</a>平台上在线获得。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/0334ac430d5bc74761aebc771d5580fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c8KS7taBuTRlxJ7tTL964g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae lr" href="https://data.delaware.gov/Government-and-Finance/Credit-Card-Spend-by-Merchant/8pzf-ge27" rel="noopener ugc nofollow" target="_blank">https://data . Delaware . gov/Government-and-Finance/信用卡消费商户/8pzf-ge27 </a></p></figure><p id="5eeb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">免责声明:</strong> <em class="no">本教程演示了在 Power BI 中使用 PyCaret 构建一个异常检测器。在本教程中构建的示例仪表板并不反映实际的异常情况，也不是为了识别异常情况。</em></p><h1 id="6a13" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">👉我们开始吧</h1><p id="c87a" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">现在，您已经设置了 Anaconda 环境，安装了 PyCaret，了解了异常检测的基础知识，并且有了本教程的业务上下文，让我们开始吧。</p><h1 id="5c89" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.检索数据</h1><p id="6f6b" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">第一步是将数据集导入 Power BI Desktop。您可以使用 web 连接器加载数据。(Power BI 桌面→获取数据→来自 Web)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/8a3677f1fad82368db7e7ab692517f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMQRdUPcw8VaG0HIOiGyQQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Power BI 桌面→获取数据→其他→ Web</p></figure><p id="728c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">链接到 csv 文件:</strong><a class="ae lr" href="https://raw.githubusercontent.com/pycaret/pycaret/master/datasets/delaware_anomaly.csv" rel="noopener ugc nofollow" target="_blank">https://raw . githubusercontent . com/py caret/py caret/master/datasets/Delaware _ anomaly . CSV</a></p><h1 id="f737" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.模特培训</h1><p id="96f9" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">为了在 Power BI 中训练异常检测器，我们必须在 Power Query Editor 中执行 Python 脚本(Power Query Editor→Transform→Run Python script)。将以下代码作为 Python 脚本运行:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="54e1" class="nj lt iq nf b gy nk nl l nm nn">from <strong class="nf ir">pycaret.anomaly</strong> import *<br/>dataset = <strong class="nf ir">get_outliers</strong>(dataset, ignore_features=['DEPT_NAME', 'MERCHANT', 'TRANS_DT'])</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/8edaf26399a1c43884dcdf187c0fae3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jLYtThjhL2rAlfOtZnG0gQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">超级查询编辑器(转换→运行 python 脚本)</p></figure><p id="93c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们忽略了数据集中的一些列，将它们传递到<strong class="kx ir"> ignore_features </strong>参数下。可能有许多原因导致您不想使用某些列来训练机器学习算法。</p><p id="62b5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">PyCaret 允许您隐藏而不是删除数据集中不需要的列，因为您可能需要这些列用于以后的分析。例如，在这种情况下，我们不想使用事务日期来训练算法，因此我们在<strong class="kx ir"> ignore_features 下传递它。</strong></p><p id="f719" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">PyCaret 中有超过 10 种现成的异常检测算法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/dd700fa75c0a06100540393a29ebf6a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*piuoq_K4B2aiyzOCkDg8MA.png"/></div></div></figure><p id="cc52" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">默认情况下，PyCaret 用 5%的分数训练一个<strong class="kx ir"> K 最近邻异常检测器</strong>(即表中总行数的 5%将被标记为异常值)。默认值可以很容易地更改:</p><ul class=""><li id="7cb6" class="mk ml iq kx b ky kz lb lc le nu li nv lm nw lq mr ms mt mu bi translated">要更改分数值，您可以使用<strong class="kx ir"> get_outliers( ) </strong>函数中的<strong class="kx ir"> <em class="no">分数</em> </strong>参数。</li><li id="7ba6" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">要更改模型类型，请使用<strong class="kx ir"> get_outliers() </strong>中的<strong class="kx ir"> <em class="no">模型</em> </strong>参数。</li></ul><p id="4755" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">参见用于训练分数为 0.1 的<strong class="kx ir">隔离森林</strong>检测器的示例代码:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="5677" class="nj lt iq nf b gy nk nl l nm nn">from <strong class="nf ir">pycaret.anomaly</strong> import *<br/>dataset = <strong class="nf ir">get_outliers</strong>(dataset, model = 'iforest', fraction = 0.1, ignore_features=['DEPT_NAME', 'MERCHANT', 'TRANS_DT'])</span></pre><p id="83dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">输出:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/8ecfad9de53c3198826a9b721698f606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCYtFO6XDGI2-qbZdYeMfQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">异常检测结果(执行 Python 代码后)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/5b081fe75531f1c5d0ecf11acf704e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZbf7VmCxkPUcX_p7kKJ4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终输出(点击表格后)</p></figure><p id="43cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">两个新列附加到原始表。标签(1 =异常值，0 =内部值)和分数(具有高分数的数据点被归类为异常值)。应用查询以查看 Power BI 数据集中的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/ac86c237ad8eb31d6c9eacbd44e8d431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QFJ2DJX_bGSxutOdxNmwEg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Power BI Desktop 中的结果(应用查询后)</p></figure><h1 id="593d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.仪表盘</h1><p id="87f4" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">一旦您在 Power BI 中有了异常值标签，以下是如何在 dashboard 中可视化它的示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/01216da7f41a8decf4b4863007e0716e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qWjee_M6PTrAd0PJdU1yg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板的摘要页面</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/77ba69120bd379b84d899d45be3666b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ISkFG8r3LtVJq0P3793Wg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板的详细信息页面</p></figure><p id="9290" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你可以从我们的<a class="ae lr" href="https://github.com/pycaret/powerbi-anomaly-detection" rel="noopener ugc nofollow" target="_blank"> GitHub </a>下载 PBIX 文件和数据集。</p><h1 id="6e08" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">👉在生产中实施异常检测</h1><p id="45d3" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">上面展示的是在 Power BI 中实现异常检测的一种简单方法。然而，重要的是要注意，每当 Power BI 数据集被刷新时，上面所示的方法训练异常检测器。这可能是一个问题，原因有二:</p><ul class=""><li id="ab62" class="mk ml iq kx b ky kz lb lc le nu li nv lm nw lq mr ms mt mu bi translated">当用新数据重新训练模型时，异常标签可能会改变(以前被标记为异常值的一些事务可能不再被认为是异常值)</li><li id="e4ff" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated">你不想每天花几个小时的时间重新训练模型。</li></ul><p id="05f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在 Power BI 中实现异常检测的另一种方法是将预先训练好的模型传递给 Power BI 进行标记，而不是在 Power BI 本身中训练模型。</p><h1 id="1e85" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">事前培训模型</strong></h1><p id="0294" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">你可以使用任何集成开发环境(IDE)或笔记本来训练机器学习模型。在此示例中，我们使用 Visual Studio 代码来训练异常检测模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/cc3b91ac8c2c6cf071e97d208b95b5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzymbb9ySyl3jeaFQoHxDg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Visual Studio 代码中的模型定型</p></figure><p id="eacb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后将训练好的模型保存为 pickle 文件，并导入到 Power Query 中以生成异常标签(1 或 0)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/b32f448f41330bab19a9e81336eb61ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*fLnTzbd-dTRtqwxmPqI4kw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">异常检测管道保存为文件</p></figure><p id="9d52" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您想了解有关使用 PyCaret 在 Jupyter 笔记本中实施异常检测的更多信息，请观看这个 2 分钟的视频教程:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oe of l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae lr" href="https://www.youtube.com/channel/UCxA1YTYJ9BEeo50lxyI_B3g" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/channel/UCxA1YTYJ9BEeo50lxyI_B3g</a></p></figure><h1 id="e8d1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用预先训练的模型</h1><p id="8677" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">以 Python 脚本的形式执行以下代码，从预训练的模型中生成标签。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="91e3" class="nj lt iq nf b gy nk nl l nm nn">from <strong class="nf ir">pycaret.anomaly</strong> import *<br/>dataset = <strong class="nf ir">predict_model</strong>('c:/.../anomaly_deployment_13052020, data = dataset)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/02ea3ac2e7a129b083437b89a9460847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMSuDzp7FpJgddT-NjTtUQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">超级查询编辑器(转换→运行 python 脚本)</p></figure><p id="55de" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它的输出将和我们上面看到的一样。但是，不同之处在于，当您使用预训练模型时，标签是在使用相同模型的新数据集上生成的，而不是在每次刷新 Power BI 数据集时重新训练模型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/5b081fe75531f1c5d0ecf11acf704e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZbf7VmCxkPUcX_p7kKJ4w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">最终输出(点击表格后)</p></figure><h1 id="3e44" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">使其在 Power BI 服务上工作</strong></h1><p id="3ee2" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">一旦你上传了。pbix 文件到 Power BI 服务，还需要几个步骤来实现机器学习管道到数据管道的无缝集成。其中包括:</p><ul class=""><li id="e4f7" class="mk ml iq kx b ky kz lb lc le nu li nv lm nw lq mr ms mt mu bi translated"><strong class="kx ir">为数据集</strong>启用计划刷新—要使用 Python 脚本为包含您的数据集的工作簿启用计划刷新，请参见<a class="ae lr" href="https://docs.microsoft.com/en-us/power-bi/connect-data/refresh-scheduled-refresh" rel="noopener ugc nofollow" target="_blank">配置计划刷新</a>，其中还包括关于<strong class="kx ir">个人网关</strong>的信息。</li><li id="4d06" class="mk ml iq kx b ky mv lb mw le mx li my lm mz lq mr ms mt mu bi translated"><strong class="kx ir">安装个人网关</strong> —你需要一个<strong class="kx ir">个人网关</strong>安装在文件所在的机器上，并且安装了 PythonPower BI 服务必须能够访问 Python 环境。您可以获得关于如何<a class="ae lr" href="https://docs.microsoft.com/en-us/power-bi/connect-data/service-gateway-personal-mode" rel="noopener ugc nofollow" target="_blank">安装和配置个人网关</a>的更多信息。</li></ul><p id="6ea6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您有兴趣了解有关异常检测的更多信息，请查看我们的<a class="ae lr" href="https://pycaret.org/ano101/" rel="noopener ugc nofollow" target="_blank">笔记本教程。</a></p></div><div class="ab cl oh oi hu oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ij ik il im in"><h1 id="b3e2" class="ls lt iq bd lu lv oo lx ly lz op mb mc jw oq jx me jz or ka mg kc os kd mi mj bi translated">PyCaret 1.0.1 来了！</h1><p id="80d7" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">我们收到了来自社区的大力支持和反馈。我们正在积极改进 PyCaret，并准备我们的下一个版本。<strong class="kx ir"> PyCaret 1.0.1 会更大更好</strong>。如果您想分享您的反馈并帮助我们进一步改进，您可以<a class="ae lr" href="https://www.pycaret.org/feedback" rel="noopener ugc nofollow" target="_blank">在网站上填写此表格</a>或者在我们的<a class="ae lr" href="https://www.github.com/pycaret/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>或<a class="ae lr" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>页面上发表评论。</p><p id="5d0f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关注我们的<a class="ae lr" href="https://www.linkedin.com/company/pycaret/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>并订阅我们的<a class="ae lr" href="https://www.youtube.com/channel/UCxA1YTYJ9BEeo50lxyI_B3g" rel="noopener ugc nofollow" target="_blank"> Youtube </a>频道，了解更多关于 PyCaret 的信息。</p><h1 id="493e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">重要链接</h1><p id="0898" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated"><a class="ae lr" href="https://www.pycaret.org/guide" rel="noopener ugc nofollow" target="_blank">用户指南/文档</a> <br/> <a class="ae lr" href="https://www.github.com/pycaret/pycaret" rel="noopener ugc nofollow" target="_blank"> GitHub 资源库<br/> </a> <a class="ae lr" href="https://www.pycaret.org/install" rel="noopener ugc nofollow" target="_blank">安装 PyCaret </a> <br/> <a class="ae lr" href="https://www.pycaret.org/tutorial" rel="noopener ugc nofollow" target="_blank">笔记本教程</a> <br/> <a class="ae lr" href="https://www.pycaret.org/contribute" rel="noopener ugc nofollow" target="_blank">贡献于 PyCaret </a></p><h1 id="773d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">想了解某个特定模块？</h1><p id="575c" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">从第一个版本 1.0.0 开始，PyCaret 有以下模块可供使用。点击下面的链接，查看 Python 中的文档和工作示例。</p><p id="b37b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://www.pycaret.org/classification" rel="noopener ugc nofollow" target="_blank">分类</a> <br/> <a class="ae lr" href="https://www.pycaret.org/regression" rel="noopener ugc nofollow" target="_blank">回归<br/> </a> <a class="ae lr" href="https://www.pycaret.org/clustering" rel="noopener ugc nofollow" target="_blank">聚类</a> <br/> <a class="ae lr" href="https://www.pycaret.org/anomaly-detection" rel="noopener ugc nofollow" target="_blank">异常检测<br/> </a> <a class="ae lr" href="https://www.pycaret.org/nlp" rel="noopener ugc nofollow" target="_blank">自然语言处理</a><br/>T29】关联规则挖掘</p><h1 id="521a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">另请参见:</h1><p id="ea24" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">笔记本中的 PyCaret 入门教程:</p><p id="e27f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://www.pycaret.org/clu101" rel="noopener ugc nofollow" target="_blank">聚类</a> <br/> <a class="ae lr" href="https://www.pycaret.org/anom101" rel="noopener ugc nofollow" target="_blank">异常检测</a> <br/> <a class="ae lr" href="https://www.pycaret.org/nlp101" rel="noopener ugc nofollow" target="_blank">自然语言处理</a> <br/> <a class="ae lr" href="https://www.pycaret.org/arul101" rel="noopener ugc nofollow" target="_blank">关联规则挖掘</a> <br/> <a class="ae lr" href="https://www.pycaret.org/reg101" rel="noopener ugc nofollow" target="_blank">回归</a> <br/>分类</p><h1 id="acd7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">你愿意投稿吗？</h1><p id="e72c" class="pw-post-body-paragraph kv kw iq kx b ky mm jr la lb mn ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">PyCaret 是一个开源项目。欢迎每个人都来投稿。如果您愿意投稿，请随意处理<a class="ae lr" href="https://github.com/pycaret/pycaret/issues" rel="noopener ugc nofollow" target="_blank">未决问题</a>。dev-1.0.1 分支上的单元测试接受拉请求。</p><p id="528f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你喜欢 PyCaret，请给我们 GitHub 回购的⭐️。</p><p id="9df6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">中:<a class="ae lr" href="https://medium.com/@moez_62905/machine-learning-in-power-bi-using-pycaret-34307f09394a" rel="noopener">https://medium.com/@moez_62905/</a></p><p id="c8f2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">领英:【https://www.linkedin.com/in/profile-moez/ T2】</p><p id="6988" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">推特:【https://twitter.com/moezpycaretorg1 T4】</p></div></div>    
</body>
</html>