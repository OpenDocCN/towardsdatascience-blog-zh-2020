<html>
<head>
<title>Want to easily integrate data with python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想用 python 轻松集成数据？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/want-to-easily-integrate-data-with-python-e9d808f88455?source=collection_archive---------51-----------------------#2020-07-20">https://towardsdatascience.com/want-to-easily-integrate-data-with-python-e9d808f88455?source=collection_archive---------51-----------------------#2020-07-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0fee2a26d7d2ea3e518f72197cc15668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KhbvM4aHr6iPHpw-dGd9qw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">克里斯托夫·高尔在<a class="ae jg" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><div class=""><h2 id="7463" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">与 data.world 的 5 分钟数据集成</h2></div><h1 id="042b" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">介绍</h1><p id="fcb7" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated"><strong class="ls jk">想象一下:</strong>你和几个同事正在用 python 开发一个数据科学项目。您没有费心将数据输入或输出与 SQL/python 数据库集成联系起来，因为没有那么多的数据转手。但是，还是有足够的。csv 文件被创建和更新，以至于很难通过电子邮件发送、备份或将其放在驱动器文件夹中。</p><p id="776b" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">在过去的几个月里，我个人多次遇到这种情况。我不想经历整个 SQL 集成过程，但是文件传输仍然很繁琐。</p><p id="1866" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我最近发现有一种更简单的方法，没有平台集成经验的人可以在短短 5 分钟内完成设置。解决方法:<a class="ae jg" href="https://data.world/home/" rel="noopener ugc nofollow" target="_blank"> <strong class="ls jk"> data.world </strong> </a>。</p><p id="1447" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">data.world 是一个企业数据目录，拥有世界上最大的开放数据社区，个人使用免费。您可以将各种数据、代码和分析上传到数据集或项目中。</p><h1 id="fc0d" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">设置您的帐户</h1><p id="6c9f" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">第一步是创建一个免费帐户。你可以在 data.world/login 使用谷歌、脸书、GitHub 或 Twitter 来做这件事。您将看到这样一个页面:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/b4bf63e3168852e536ae8648f80280c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XKQShVyLHggfW9oLvaammw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="ef86" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">点击<em class="mw">“+新建”</em>，然后点击<em class="mw">“创建新数据集”</em>。选择一个名称和一些其他设置，然后<em class="mw">“创建数据集”</em>。我把我的命名为“中等文章样本”。您可以现在添加描述和数据，也可以以后再添加。我添加了<a class="ae jg" href="https://www.kaggle.com/c/titanic/overview" rel="noopener ugc nofollow" target="_blank"> Kaggle 的泰坦尼克号比赛</a>的训练数据。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mx"><img src="../Images/b2e7b604311299b4020be504d4eccb75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCO-Z730g5iQyZvzfUC2KA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="38bc" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">接下来，转到<a class="ae jg" href="https://data.world/integrations" rel="noopener ugc nofollow" target="_blank">data.world/integrations</a>(或点击屏幕左下方的<em class="mw">“整合”</em>图标)。在过滤器搜索栏中键入“python ”,或者向下滚动直到看到它。点开它，点击<em class="mw">“启用集成”</em>，然后<em class="mw">“授权 Python”</em>。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi my"><img src="../Images/30a0442bd8ce9389bb4c526b1a39db33.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*wtaHJvn9w6xFFL1ZHRiHMQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="d67a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在集成已经完成，您可以点击<em class="mw">“开始”</em>并按照<a class="ae jg" href="https://datadotworld.github.io/data.world-py/python.html" rel="noopener ugc nofollow" target="_blank">那里</a>的步骤操作。我也将把它们包含在本文中。</p><h1 id="7053" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">安装软件包</h1><p id="c46b" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">1.使用命令行(或 jupyter 笔记本)，从 PyPI 安装 data.world 包。</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="ca4a" class="ne kz jj na b gy nf ng l nh ni">pip install datadotworld[pandas]</span></pre><p id="710c" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">2.使用命令行配置包。你需要你的 data.world API 令牌，在这里找到<a class="ae jg" href="https://data.world/integrations/python?tab=settings" rel="noopener ugc nofollow" target="_blank"/>(点击<em class="mw">“获取令牌】</em>)。现在您已经准备好使用这个包了！</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="ad59" class="ne kz jj na b gy nf ng l nh ni">dw configure</span></pre><p id="7598" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">3.在笔记本或脚本中导入包。</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="33dd" class="ne kz jj na b gy nf ng l nh ni">import datadotworld as dw</span></pre><h1 id="2336" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated">使用软件包</h1><p id="c9e8" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">使用 datadotworld 包可以做很多事情，但这里有一些我们正在寻找的基本数据集成的基础。</p><p id="19a6" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">首先，您可以读取数据集中的所有文件，并获取特定文件作为数据帧(根据文件类型，您可能需要将其作为表或原始数据导入；更多关于那个<a class="ae jg" href="https://pypi.org/project/datadotworld/" rel="noopener ugc nofollow" target="_blank">这里</a>。注意，表名都是小写的，用下划线代替空格。</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="5b62" class="ne kz jj na b gy nf ng l nh ni">dataset = dw.load_dataset('ryan-brown/medium-article-sample')<br/>df = ds.dataframes['titanic_training_data']</span></pre><p id="8675" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果您使用的是 Windows，编码可能会有问题；我创建了一个快速函数，利用了 datadotworld 的。查询函数从数据集中读取特定的表。</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="6af0" class="ne kz jj na b gy nf ng l nh ni">def dw_get(dataset_name, table_name):<br/>    results = dw.query(dataset_name, "SELECT * FROM `{}`".format(table_name))</span><span id="979b" class="ne kz jj na b gy nj ng l nh ni">    df = results.dataframe<br/>    return df</span><span id="f8c9" class="ne kz jj na b gy nj ng l nh ni">df = dw_get('ryan-brown/medium-article-sample', 'titanic_training_data')</span></pre><p id="1d8a" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">无论哪种方式，您现在都可以在笔记本中创建一个数据框架，您可以对其进行清理、处理和分析。假设我决定用 NaN 值填充 drop“ticket”列和所有行来清理数据。我现在有以下数据框架:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/c16576b4f25c97de6bfa675e6298dcaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeZg9f97nuUQGQnQvUnclg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="93a7" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我准备更新数据集上的文件，供我的同事在项目分析中使用。这样做很容易——只需将数据帧作为. csv 文件保存在工作目录中，然后调用 datadotworld api 客户端并上传文件。</p><pre class="ms mt mu mv gt mz na nb nc aw nd bi"><span id="fc90" class="ne kz jj na b gy nf ng l nh ni">df.to_csv('titanic_data_clean.csv',index=False)<br/>client = dw.api_client()</span><span id="c167" class="ne kz jj na b gy nj ng l nh ni">client.upload_files('ryan-brown/medium-article-sample', files=['titanic_data_clean.csv'])</span></pre><p id="dcaa" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">请注意，我决定给它一个不同于 titanic_training_data.csv 的名称，这样它将在数据集中显示为一个新文件。但是，如果我决定将其命名为 titanic_training_data.csv，它将替换数据集中旧的 titanic_training_data.csv 文件(同时仍然保留您可能添加的任何标签或描述)。</p><p id="f241" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在我们已经上传了新数据，让我们来看看数据。世界数据集:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/fd0c35cd058d6ab2e0750a97333f8870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7QI5768j_fm4cNrajetU7Q.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="3069" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">您可以看到清理后的数据在那里，在右边有一个更新，表明我使用 python 添加了数据。就这么简单。</p><p id="cb96" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">要授予对等用户访问权限，以便您可以协作处理和上传数据，请单击数据集的<em class="mw">“Contributors”</em>选项卡，然后单击<em class="mw">“Invite”</em>通过电子邮件或用户名邀请他们。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/dd7eaf052b0d37cbe4fc923b09bded1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Feg3yuS6b60h3VEdF1j9Ng.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="39d5" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这只是 datadotworld 包可以做的许多事情的一小部分，这个站点可以作为一个整体使用；你可以在<a class="ae jg" href="https://data.world/blog/turbocharge-your-data-acquisition-using-the-data-world-python-library/" rel="noopener ugc nofollow" target="_blank">这里</a>写的一篇很棒的文章中查看这个库的更多特性。</p></div></div>    
</body>
</html>