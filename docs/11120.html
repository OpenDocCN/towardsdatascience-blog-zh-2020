<html>
<head>
<title>Complete Works of Array Generating Functions in Python NumPy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python NumPy 中数组生成函数全集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/complete-works-of-array-generating-functions-in-python-numpy-67c7eb244fdf?source=collection_archive---------34-----------------------#2020-08-02">https://towardsdatascience.com/complete-works-of-array-generating-functions-in-python-numpy-67c7eb244fdf?source=collection_archive---------34-----------------------#2020-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/539a94e501adefc4008aeb0cb62ce81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bC8TOhb-Tyc5S3QdmnuWg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://pixabay.com/users/_Alicja_-5975425/" rel="noopener ugc nofollow" target="_blank"> _Alicja_ </a>在<a class="ae jg" href="https://pixabay.com/photos/counting-education-toy-wooden-3116201/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的照片</p></figure><div class=""/><div class=""><h2 id="282e" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">从等差数列到几何数列及定制生成函数</h2></div><p id="b243" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你用过 Python，我相信你一定用过 NumPy 库，所以我想我不必介绍这个库。</p><p id="4a9e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为 NumPy 就是这样一个为数值和维度数组计算而创建的库，所以它的一个典型使用场景就是根据定义的规则生成维度数组。</p><p id="9f89" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将介绍 NumPy 中所有优秀的内置函数，让我们可以按照一定的规则生成 n 维数组。请注意，随机数组可以是一个单独的主题，因此它们不会包含在本文中。我确信您一定知道我将在后面的章节中介绍的一些甚至大部分功能，但是强烈建议您浏览一下这篇文章。我敢肯定，你可能会发现一些你不知道的功能，但可能非常有用。</p><h1 id="fa10" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">NumPy 为什么这么快？</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e363366df90e4106636960c963dc1423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-mft9YrICoJ0OXkzUc1KQ.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/jingoba-24598/" rel="noopener ugc nofollow" target="_blank">神果</a>在<a class="ae jg" href="https://pixabay.com/photos/road-speed-highway-moving-street-259815/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="a14a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在介绍函数之前，我想提一下 NumPy 为什么这么快。简单的回答是，因为它不是 Python。</p><p id="2d4e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可能会惊讶为什么 NumPy 不是 Python。事实上，NumPy 是用 C 编程语言实现的，在大多数情况下，它在性能方面胜过 Python。所以，我们写 Python 代码用 NumPy，但是引擎盖下是 c。</p><p id="4ff0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以做一个简单的实验来比较性能。假设<code class="fe mq mr ms mt b">[1,2,3]</code>这样的“list”是一个纯 Python 对象，我们可以用 list 和 NumPy 数组做同样的事情来比较运行时间。</p><p id="d765" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，我们需要在一切之前导入 NumPy 库。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="06bc" class="my lv jj mt b gy mz na l nb nc">import numpy as np</span></pre><p id="fc04" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，让我们生成一个包含 100 万个整数的 Python 列表，然后计算列表中每个数字的平方。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="8e94" class="my lv jj mt b gy mz na l nb nc">ls = list(range(1000000))<br/>ls_square = [i**2 for i in ls]</span></pre><p id="3b74" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，让我们使用 NumPy 做同样的事情。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="ff7b" class="my lv jj mt b gy mz na l nb nc">arr = np.arange(1000000)<br/>arr_square = arr ** 2</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/c1a7d9c639709f2454b11e03df55e25c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQGrwUeij3acc2OspZ4F-w.png"/></div></div></figure><p id="ba58" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">可以看出 NumPy 比 Python 列表快了差不多 100 倍。这也是为什么大多数其他用于数据分析(如 SciPy、Pandas)、机器学习(如 Sci-kit Learn)和数据可视化(如 Matplotlib)的库通常依赖于 NumPy。</p><h1 id="2631" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">在范围内生成数组</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/ff73b9de7f170291582312a646cbb078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BlpMtvbrgu1LNEIYVpg8g.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/SparrowsHome-4168069/" rel="noopener ugc nofollow" target="_blank"> SparrowsHome </a>在<a class="ae jg" href="https://pixabay.com/photos/dominoes-colorful-patterns-4020617/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="b571" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们开始生成一定范围内的 NumPy 数组。</p><h2 id="f4bd" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">np.arange()</h2><p id="d940" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">第一个，当然是<code class="fe mq mr ms mt b">np.arange()</code>，我相信你可能已经知道了。</p><p id="2281" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要生成一个数组，从一个数字开始，以一定的步长在一个数字处停止，我们可以很容易地做到如下。请注意不包括停车号码。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="6763" class="my lv jj mt b gy mz na l nb nc">np.arange(start=1, stop=10, step=1)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/02a079654fa08bcdcae276ffa0106836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*w1ivTkGZtJ1-aUDyioopwA.png"/></div></figure><p id="8e0d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有时，如果我们希望数组从零开始，我们不需要指定起始数，因为它默认为零。此外，默认步长为 1。所以，如果我们想生成一个数组，从 0 开始，在 10 处停止(需要指定)，步长等于 1，下面的代码就可以了。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="fd74" class="my lv jj mt b gy mz na l nb nc">np.arange(10)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a961dc12477f0599c6ba17d74e4c5fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*VpiTfCouLyhV_XKLD8VubA.png"/></div></figure><p id="8147" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大概值得一提的是，step 也可以是 float 类型。这是与 Python 内置函数<code class="fe mq mr ms mt b">range()</code>的比较，因为后者不支持浮点数作为步长。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="5db2" class="my lv jj mt b gy mz na l nb nc">np.arange(start=1, stop=5, step=0.5)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/4924fd65dc79d103428b5ca7f0fe669a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*EGq4pf2s6CtL2BU-DSlEXw.png"/></div></figure><p id="bee4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管可能不常用，但步长也可以是负数。因此，数组将按降序排列，其中起始数大于终止数。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="5327" class="my lv jj mt b gy mz na l nb nc">np.arange(start=10, stop=1, step=-2)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/d2dc8a18faa68f34034347d5562f7ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*4QnIjSBNlS2Ci424usfnWw.png"/></div></figure><p id="957c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果要生成某种类型的数组，可以显式指定。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="a804" class="my lv jj mt b gy mz na l nb nc">arr = np.arange(10, dtype=float)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/74fc736e16491dcae5ca8c1d89f2a62a.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*NVZLaj7W4gpH3PvnNoyMtg.png"/></div></figure><h2 id="7566" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">np.linspace()</h2><p id="a791" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">这个功能比<code class="fe mq mr ms mt b">np.arange()</code>更强大一点。它的名字“linspace”代表“线性空间”。因此，它用于生成数字具有线性关系的数组。</p><p id="ca76" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">主要区别在于<code class="fe mq mr ms mt b">linspace()</code>不依赖于步长。相反，我们需要指定在起始号码和终止号码之间有多少个号码。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="8a69" class="my lv jj mt b gy mz na l nb nc">np.linspace(start=1, stop=10, num=10)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/c786da8bc1fa77e5adc7f67e4bca3f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*G6qbpeVmAsq_DhLV53x_sg.png"/></div></figure><p id="faa0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的两个例子中，开始和结束数字是相同的，但是生成的数组是不同的，因为我们要求第二个数组多一个数字。因此，该函数生成一个严格意义上的算术序列数组。</p><p id="26ae" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可能还会注意到，这一次停止编号是包含性的，但是我们可以显式地将其排除。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="d4ca" class="my lv jj mt b gy mz na l nb nc">np.linspace(1, 10, 11, endpoint=False)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/1ad3954ad3a43a41fa8c609c7fb150c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*C49P5eilpezKkQgIxTri4w.png"/></div></figure><p id="4a6a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以显式地指定数组所需的数据类型。然而，在将整数指定为数据类型时要小心，因为数字将被<strong class="la jk">floor</strong>而不是<strong class="la jk"> rounded </strong>。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="a46e" class="my lv jj mt b gy mz na l nb nc">np.linspace(1, 10, 11, dtype=int)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/ed1ec810c33a300e59a40297269466d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*ZUM7QrpHwB5y2JdO-h9OCQ.png"/></div></figure><h2 id="65f5" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">np.logspace()</h2><p id="cf09" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">你可能会好奇，我们有“线性空间”，但还有其他的“空间”吗？是的，我们也有“日志空间”，它不是线性的。我相信这个函数并不为大多数开发者所知，但它是一种非常优雅的生成几何序列数组的方式。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="f101" class="my lv jj mt b gy mz na l nb nc">np.logspace(start=1, stop=10, num=4, base=2)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/d10502a092d546794281e7bb6de7b74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*Kz9XeRHWHzIfQa5LsXZFeg.png"/></div></figure><p id="1c05" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看这个例子，同样，我们有起始号和终止号。第三个参数“num”是我们希望数组中有多少个数字。最后一个参数“base”是我们想要的基数。</p><p id="9fa9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，该函数生成了以下 4 个数字:</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi od"><img src="../Images/00e26c329d391f4a2c6f496a4e8a1689.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*ohdKeyfJGLLh04fzfSW7Iw.png"/></div></figure><p id="817c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它们也是严格的几何序列，如下所示:</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/126ff5b96d050186b028eaa9f4abda94.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*4uj7ffQ3wOwwAaxTd_qLlw.png"/></div></figure><p id="df4c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要提到的是，默认情况下“基数”是 10。因此，如果我们希望“基数”等于 10，我们不需要明确指定它。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="a052" class="my lv jj mt b gy mz na l nb nc">np.logspace(1, 5, 3)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9970825f15fddf412c5c0a5a9e7705e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*sO-nrl7r1XDaUjzTbp1y_A.png"/></div></figure><h1 id="04e8" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">生成具有特定值和形状的数组</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/48c73c8cd7682c1b340ab2b3a6bb0d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_ZdgqVDI3c_hHz1cuZApA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://pixabay.com/users/saulhm-31267/" rel="noopener ugc nofollow" target="_blank"> saulhm </a>在<a class="ae jg" href="https://pixabay.com/photos/measure-measures-rule-metro-106354/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄的照片</p></figure><p id="bf99" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为 NumPy 在计算多维数组(矩阵)方面很强大，所以我们也需要生成多维数组。</p><h2 id="565c" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">全 0 或全 1 生成</h2><p id="a43e" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">很常见的情况是，我们需要生成一个所有值都为零的特定维数的数组。例如，图像以 1024 * 768 * 3 的阵列表示，其中轴 3 表示 RGB 通道。如果我们想过滤只有一个颜色通道的图像，我们需要其他两个通道的值都为零。在这样的用例中，<code class="fe mq mr ms mt b">np.zeros()</code>函数非常有用。</p><p id="ad75" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想生成一个 2(行)乘 3(列)的 2D 数组，下面的代码就可以了。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="7ae8" class="my lv jj mt b gy mz na l nb nc">np.zeros((2,3))</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi og"><img src="../Images/ec4e15117c0b806cd987703e37ebb274.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*7MFXI-DedFWCYxKcTf6m4A.png"/></div></figure><p id="db13" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不仅仅是 0，我们也可以生成 1 的数组。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="4d4f" class="my lv jj mt b gy mz na l nb nc">np.ones((2,3))</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/84f9874a2ca49a161b3d62dffd7cdb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*gQqBJS4UjBUcGBmzXohxdw.png"/></div></figure><p id="b066" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要注意的是，我们使用<code class="fe mq mr ms mt b">np.zeros()</code>和<code class="fe mq mr ms mt b">np.ones()</code>生成的数组是浮点型的，从点<code class="fe mq mr ms mt b">0. (float)</code>可以看出它不是<code class="fe mq mr ms mt b">0 (int)</code>。如果我们需要它们是 int，这有时不太方便。幸运的是，我们可以显式地指定数据类型。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="8ff7" class="my lv jj mt b gy mz na l nb nc">np.zeros((2,3), dtype=int)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oi"><img src="../Images/92d2cbe612a550f1cc4d9e807005b656.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*Mr5kEvdFhQrrUQgtC8WTkg.png"/></div></div></figure><h2 id="5eea" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">用定制的数字生成</h2><p id="60cd" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">如果我们既不想要 0 也不想要 1，而是想要其他数字呢？在这样的场景中，我们可以使用<code class="fe mq mr ms mt b">np.full()</code>。例如，如果我们想要生成一个具有特定维度的数组，并且它的所有值都应该是 255，只需执行以下操作。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="8ffb" class="my lv jj mt b gy mz na l nb nc">np.full((2,3), 255)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/b07655eb15dffe486b72067d4b7232cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*vmIgdbGLlO5I-XErSIn-BA.png"/></div></figure><p id="a3e6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另外值得一提的是<code class="fe mq mr ms mt b">np.full()</code>不仅可以用来生成数值数组，还可以生成字符串等其他数据类型。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="70ec" class="my lv jj mt b gy mz na l nb nc">np.full((2,3), 'abc')</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/69edbf6b046d96e58999f06286de143b.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*cq4-HZb9Kx4nGORUwMB3YQ.png"/></div></figure><h2 id="a640" class="my lv jj bd lw ne nf dn ma ng nh dp me lh ni nj mg ll nk nl mi lp nm nn mk no bi translated">基于其他数组生成</h2><p id="4d14" class="pw-post-body-paragraph ky kz jj la b lb np kk ld le nq kn lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">为了方便起见，NumPy 还允许我们从其他数组生成数组。也就是说，复制另一个数组的形状及其数据类型。</p><p id="9925" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，让我们显式地创建一个样本数组。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="14ff" class="my lv jj mt b gy mz na l nb nc">sample_arr = np.array([<br/>    [1,2,3],<br/>    [4,5,6]<br/>])</span></pre><p id="d643" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该示例数组的维数为 2 * 3，数据类型为整数。</p><p id="fad8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们想要生成一个具有相同维度和数据类型的数组，但是值都是零，我们可以使用<code class="fe mq mr ms mt b">np.zeros_like()</code>。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="3a02" class="my lv jj mt b gy mz na l nb nc">np.zeros_like(sample_arr)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/bfafccd72674517ae2d1fb01ec93ed9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*5K2NhvV-D8AiR5RlEgj3Ng.png"/></div></figure><p id="583a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，我们也可以生成所有的 1。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="fe09" class="my lv jj mt b gy mz na l nb nc">np.ones_like(sample_arr)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi om"><img src="../Images/1bfb109037ceb10a0adfcc73e1311e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*C9BraVd_v7ZWgKd8uxpSdg.png"/></div></figure><p id="2de9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">和定制号码。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="586c" class="my lv jj mt b gy mz na l nb nc">np.full_like(sample_arr, 255)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi on"><img src="../Images/84455a699ea851edb710b5d604b260aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*89vHMKiSv_PtNmp61Gkcow.png"/></div></figure><p id="e1a5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，如果你愿意，你可以使用<code class="fe mq mr ms mt b">np.zeros()</code>来实现同样的事情，但是不要忘记，默认情况下它会创建一个 float 类型的数组。所以我们需要明确指定我们想要整数。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="3e91" class="my lv jj mt b gy mz na l nb nc">np.zeros_like(sample_arr)</span><span id="90d2" class="my lv jj mt b gy oo na l nb nc"># is equivalent to </span><span id="21fe" class="my lv jj mt b gy oo na l nb nc">np.zeros(sample_arr.shape, dtype=sample_arr.dtype)</span></pre><p id="87ca" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们不知道样本数组的类型呢？例如，这是在另一个函数的循环中。然后，我们不得不在那些情况下使用<code class="fe mq mr ms mt b">np.zero_like()</code>。</p><h1 id="f9fc" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">生成单位矩阵和对角矩阵</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/2ba46cdbc577e1cc7a20bb6e389ba88d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZ0fW8KxXrilPOB9TFyMnw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片由<a class="ae jg" href="https://pixabay.com/users/YouComMedia-907282/" rel="noopener ugc nofollow" target="_blank"> YouComMedia </a>在<a class="ae jg" href="https://pixabay.com/photos/strawberries-fruit-diagonal-berry-706650/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="d6d7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在某些场景下，我们还需要生成一些特殊的数组，比如单位矩阵和对角矩阵。</p><p id="f453" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了生成单位矩阵，我们使用<code class="fe mq mr ms mt b">np.eye()</code>，只需指定矩阵所需的行数/列数。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="01ef" class="my lv jj mt b gy mz na l nb nc">np.eye(5)</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi op"><img src="../Images/45a8af61cf554ff912a24cdb313cba6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*CyudjxMCVYDw1Uw2HJlIsA.png"/></div></figure><p id="d8ea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们想生成对角矩阵时，可以使用<code class="fe mq mr ms mt b">np.diag()</code>。我们需要传入一个值应该在对角线上的列表。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="61f8" class="my lv jj mt b gy mz na l nb nc">np.diag([1,2,3,4,5])</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/ea9238e71cda9fa60d58a28f0371f89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*e3-dBZf_Kb0W8OGZ0rdhIw.png"/></div></div></figure><h1 id="c479" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">从定制功能生成</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e207d7cc80e1cf0676f87dd878552f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EchlT69XeEenzulKxED7wg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/Free-Photos-242387/" rel="noopener ugc nofollow" target="_blank">在<a class="ae jg" href="https://pixabay.com/photos/tools-workshop-equipment-690038/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上的免费照片</a>拍摄</p></figure><p id="eed0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后但并非最不重要的，我想介绍如何生成一个自定义函数的多维数组。</p><p id="66a3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">函数<code class="fe mq mr ms mt b">np.fromfunction()</code>有两个必需的参数:</p><ul class=""><li id="5476" class="oq or jj la b lb lc le lf lh os ll ot lp ou lt ov ow ox oy bi translated">用户定义的函数，接受一个元组，该元组包含所有维度轴的索引</li><li id="9815" class="oq or jj la b lb oz le pa lh pb ll pc lp pd lt ov ow ox oy bi translated">数组的维数</li></ul><p id="63ee" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看一个例子。假设我们想生成一个 6 乘 5 的矩阵。每个数字的行号为十位，列号为一位。我们可以把这个函数定义如下。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="aa42" class="my lv jj mt b gy mz na l nb nc">def gen(row, col):<br/>    return (row+1)*10 + (col+1)</span></pre><p id="e2c1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以将函数传入<code class="fe mq mr ms mt b">np.fromfunction()</code>来生成我们想要的数组。</p><pre class="mm mn mo mp gt mu mt mv mw aw mx bi"><span id="eab2" class="my lv jj mt b gy mz na l nb nc">A = np.fromfunction(gen, (6,5))</span></pre><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/3b6e1fd7502a27f773211707544e2832.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*GynrDuT6vVMvs3CppG-SIQ.png"/></div></figure><h1 id="fb63" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">摘要</h1><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c207fed8005e6bff027b33b8d3b644ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OTqaXT-piWB78W2yDWj_-w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://pixabay.com/users/stevepb-282134/" rel="noopener ugc nofollow" target="_blank"> stevepb </a>在<a class="ae jg" href="https://pixabay.com/photos/calculator-calculation-insurance-385506/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>上拍摄</p></figure><p id="4129" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我已经介绍了为什么 NumPy 是首选，为什么它这么快。然后，我们重点讨论了如何使用 NumPy 生成多维数组。我相信这些都是你需要知道的函数，以便于你在 Python 中进行数据分析、数据挖掘、机器学习和数据可视化工作。希望有帮助。</p><p id="d19d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文使用的所有代码都可以在我的 Google Colab 笔记本中找到。</p><div class="is it gp gr iu pf"><a href="https://colab.research.google.com/drive/1Eo-m4kKQLR8ymdtaQHOBwKkwdygY9Qkp?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd jk gy z fp pk fr fs pl fu fw ji bi translated">主 Numpy 数组生成</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">所有多维数组生成函数</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">colab.research.google.com</p></div></div></div></a></div><p id="4804" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">人生苦短，用 Python！</p><div class="is it gp gr iu pf"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd jk gy z fp pk fr fs pl fu fw ji bi translated">通过我的推荐链接加入 Medium 克里斯托弗·陶</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">medium.com</p></div></div><div class="po l"><div class="pp l pq pr ps po pt ja pf"/></div></div></a></div><p id="7d6b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你觉得我的文章有帮助，请考虑加入 Medium 会员来支持我和成千上万的其他作者！(点击上面的链接)</p></div></div>    
</body>
</html>