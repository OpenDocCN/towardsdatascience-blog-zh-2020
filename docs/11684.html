<html>
<head>
<title>Create Beautiful Interactive Visualisations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 创建漂亮的交互式可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-beautiful-interactive-visualisations-in-python-f8517dc7ae5c?source=collection_archive---------21-----------------------#2020-08-13">https://towardsdatascience.com/create-beautiful-interactive-visualisations-in-python-f8517dc7ae5c?source=collection_archive---------21-----------------------#2020-08-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="6807" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">Plotly 和 Dash 入门</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/d324e2f85223de08c7e91b60d00a005e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yTSWaXpWHu1zxskK-83eqQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@auntneecey?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">丹尼斯·约翰逊</a>在<a class="ae kz" href="https://unsplash.com/s/photos/beautiful?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="73e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Plotly 是一个交互式的 Python 库，它提供了一个简单的界面，可以实现多种可视化。</p><p id="ab24" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Python 中有许多不同的可视化库。与 Matplotlib 相比，Plotly 与众不同的是其情节的交互性、可视化的丰富性和多样性、相对简单性，以及使用 Dash 模块将可视化部署为 web 应用的能力。</p><p id="8f76" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Plotly 工具套件有许多不同的部分，当我第一次开始使用它们时，我发现导航有点困难。在本文中，我想简单介绍一下 Plotly 的核心元素，包括标准绘图模块 Plotly express 和 Dash。除了一些简单的代码之外，还有让您快速使用这些工具的示例。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="19e1" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.标准绘图</h1><p id="a3ee" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">Plotly 可以 pip 安装。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="2b42" class="nf me iu nb b gz ng nh l ni nj">pip install plotly</span></pre><p id="1c2f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Plotly 可视化渲染为 HTML 文件。如果您在 Jupyter 笔记本上工作，并且想要直接渲染图像，您需要安装 ipywidgets 包。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="6236" class="nf me iu nb b gz ng nh l ni nj">pip install "notebook&gt;=5.3" "ipywidgets&gt;=7.2"</span></pre><p id="99df" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者你用的是 JupyterLab。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="345e" class="nf me iu nb b gz ng nh l ni nj">pip install jupyterlab "ipywidgets&gt;=7.5"<br/>jupyter labextension install jupyterlab-plotly@4.9.0</span></pre><p id="4902" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Plotly 使用称为图形的数据结构，图形可以表示为字典，在这种情况下，您可以使用<code class="fe nk nl nm nb b">plotly.io</code>模块。或者作为通过<code class="fe nk nl nm nb b">plotly.graph_objects</code>模块呈现的图形对象。</p><p id="5c00" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">图形对象通常被认为是比字典更好的选择，因为它们允许精确的数据验证，支持用于更新已经构建的图形的更高级的便利功能，并且图形对象的语法使得代码更紧凑。</p><p id="9af3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们导入一个玩具数据集，并探索标准绘图的基本功能。下面的代码导入了波士顿房价数据集，这是一个流行的玩具数据集，用于 scikit-learn 库中的回归分析。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><p id="4698" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">数据的前几行如下所示。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj np"><img src="../Images/9cb698d56ef606b4e688a25a53b1d9ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-oldTh0UukHrJzhaMonmmA.png"/></div></div></figure><p id="db51" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们使用图形对象模块来探索房价和房间数量之间的关系。你会注意到我正在使用我上面提到的助手功能来给可视化添加标题。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/93b3d4aacb524426259dacf4c415a15d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujTSqgEuUnc7fOVgeDqwBg.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="a7b7" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.Plotly express</h1><p id="6de3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">如果你需要创建一个定制的可视化，标准绘图模块是有用的。然而，如果你想创建一些非常标准的东西，比如上面显示的散点图，那么<code class="fe nk nl nm nb b">plotly.express</code> API 是最好的选择。</p><p id="1c88" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这个模块允许你在一行代码中为最常见的可视化创建完整的图形。它还能让你轻松控制颜色、风格和标签。</p><p id="aa61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用这个模块，我们只用一行代码就可以创建上面的散点图。颜色、标签和样式控制均可通过<code class="fe nk nl nm nb b">px.scatter</code>功能获得，轴标签会自动添加。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><p id="bcb1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">由<code class="fe nk nl nm nb b">plotly.express</code>提供的‘开箱即用’图表有大量不同的选项和控件，您可以在这里探索所有选项<a class="ae kz" href="https://plotly.com/python/plotly-express/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a9e9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，下面的代码创建了一个直方图来显示 CHAS 变量的分布。我使用了<code class="fe nk nl nm nb b">histnorm</code>选项来应用标准化以更好地可视化分布，使用<code class="fe nk nl nm nb b">hover_data</code>选项来控制悬停时的交互。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nr"><img src="../Images/9bc74d4f6fd1a184f9b4ee1bec4ac690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzGTk18WlzCzc4WP4PoldA.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="f62e" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">3.破折号</h1><p id="e1f8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">Dash 也是 Plotly 工具套件的一部分，是一个用于开发数据分析仪表板的框架，所有 Plotly 可视化都可以轻松嵌入到应用程序中。</p><p id="8509" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">仪表板需要单独安装。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="e351" class="nf me iu nb b gz ng nh l ni nj">pip install dash</span></pre><p id="f71c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">可以在 Jupyterlab 中显示 Dash 应用程序，但是您需要安装这个<a class="ae kz" href="https://github.com/plotly/jupyterlab-dash" rel="noopener ugc nofollow" target="_blank"> JupyterDash </a>扩展。</p><pre class="kk kl km kn gu na nb nc nd aw ne bi"><span id="df6a" class="nf me iu nb b gz ng nh l ni nj">pip install "jupyterlab&gt;=1.0" jupyterlab-dash==0.1.0a3<br/>jupyter labextension install jupyterlab-dash@0.1.0-alpha.3</span></pre><p id="4898" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">或者，Dash 将在 localhost 上托管应用程序，当您运行代码时，该地址将显示在输出中。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/c4512dd548bcda5018d534772014ca32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fcGz4wZeLuc7EvwASqVY4Q.png"/></div></div></figure><p id="67df" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">无论何时<code class="fe nk nl nm nb b">fig.show</code>被用于显示可视化，使用 Plotly express 或标准绘图，你都可以将相同的绘图传递给 Dash。</p><p id="f063" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Dash 应用程序的布局由<code class="fe nk nl nm nb b">app.layout</code>决定，它使用<code class="fe nk nl nm nb b">dash_core_components</code>和<code class="fe nk nl nm nb b">dash_html_components</code>的组合向仪表板添加图表、表格、交互性和文本。</p><p id="c49c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面显示的代码使用我们用<code class="fe nk nl nm nb b">plotly.express</code>创建的图表创建了一个基本的 Dash 应用程序。生成的仪表板如下所示。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/9722b8eba77c903e2ec91d62fafe454b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oHovSUwqa45zEWdjjzoFFw.png"/></div></div></figure><p id="4dfa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Dash 应用程序最有用的一个方面是，您可以通过使用<code class="fe nk nl nm nb b"><a class="ae kz" href="https://dash.plotly.com/basic-callbacks" rel="noopener ugc nofollow" target="_blank">callbacks</a></code>使您的仪表板具有交互性。核心组件模块包含各种不同的交互式组件，包括下拉菜单、滑块和文本框。</p><p id="e959" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码向仪表板添加了一个下拉菜单，允许您过滤 RAD 特性以查看每个唯一值的分布。生成的仪表板显示在代码下方。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nn no l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj nu"><img src="../Images/8897717e7806331ffffcdf9ca5e81e1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Rhx1mefNwiUOyEnj6qLNZQ.gif"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="4839" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我最近发现自己开始使用 Plotly 作为我的首选可视化库，因为我发现你可以如此轻松地实现的分析质量是目前任何其他 Python 绘图库都无法比拟的。自从 Pandas 将 Plotly 添加为其绘图功能的可用后端后，情况就变得更加如此。</p><p id="33f6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我以前写过这篇文章，概述了如何使用 Plotly 作为熊猫可视化的后端。如果您想将一些非常快速分析片段放在一起，这是非常有用的。</p><div class="nv nw gq gs nx ny"><a rel="noopener follow" target="_blank" href="/plotting-in-pandas-just-got-prettier-289d0e0fe5c0"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">熊猫里的情节越来越漂亮了</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">创建丰富的可视化和仪表板与熊猫绘图后端为 Plotly 和 Bokeh</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div><p id="c165" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！</p><p id="e3b7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我每月都会发一份简讯，如果你想加入，请点击此链接注册。期待成为您学习旅程的一部分！T3】</p></div></div>    
</body>
</html>