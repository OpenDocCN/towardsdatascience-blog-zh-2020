<html>
<head>
<title>Properties in Python: Fundamentals for Data Scientists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的属性:数据科学家的基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/properties-in-python-fundamentals-for-data-scientists-43071e6be580?source=collection_archive---------23-----------------------#2020-06-19">https://towardsdatascience.com/properties-in-python-fundamentals-for-data-scientists-43071e6be580?source=collection_archive---------23-----------------------#2020-06-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1676" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用一个具体的例子来理解基础！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0bc70a6d6758b76e1b26f17f9eab3fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3-va58Wu8fLuTBHv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">戈兰·艾沃斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="42d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在许多面向对象的编程语言中，通过使用特定的关键字，如<em class="lv"> private </em>或<em class="lv"> protected </em>，一个对象或一个类结构中的数据可以被显式地隐藏起来，不被外部访问。这通过不允许从类结构外部访问数据来防止误用。</p><p id="312c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相比之下，Python 类中的所有属性(存储在类或实例中的数据)都是公开的。因此，您没有对数据访问的显式控制，但是您有两个主要的隐式选项来限制数据访问&amp; Python 类中的操作；</p><ul class=""><li id="3e38" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">使用命名约定，用一个下划线作为受保护属性的前缀，用两个下划线作为私有属性的前缀。因为它只是一个显示意图的命名约定，所以即使正确应用了命名约定，用户仍然可以从外部访问属性。</li><li id="c96c" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">使用 Python <strong class="lb iu"> property </strong>函数或<strong class="lb iu"> @property </strong> decorator 来定义 setter 和 getter 方法。这些特殊的方法规定了其他人应该如何以可控的方式设置和获取属性。</li></ul><p id="fe48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章将向你介绍 Python 中属性的基础知识。</p><p id="8fbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们编写一个 Python3 代码，其中包含实现<strong class="lb iu"> @property </strong> decorator 的简单示例:</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="95cb" class="mp mq it ml b gy mr ms l mt mu">import pandas as pd</span><span id="e023" class="mp mq it ml b gy mv ms l mt mu"><em class="lv">class</em> <strong class="ml iu">CSVGetInfo</strong>(<em class="lv">object</em>):<br/><strong class="ml iu"> """ This class displays the summary of the tabular data contained <br/> in a CSV file """</strong></span><span id="f3aa" class="mp mq it ml b gy mv ms l mt mu"><em class="lv">def</em> <strong class="ml iu">__init__</strong>(<em class="lv">self</em>, <em class="lv">path</em>, <em class="lv">file_name</em>):<br/>  self._path = path<br/>  self._file_name = file_name</span><span id="7e80" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@<em class="lv">property</em></strong><em class="lv"><br/> def</em> <strong class="ml iu">path(<em class="lv">self</em>):</strong><br/>  """ The docstring for the path property """<br/>  print("Getting value of path")<br/>  return self._path</span><span id="e8d3" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@path.setter</strong><br/> <em class="lv">def</em> <strong class="ml iu">path(<em class="lv">self</em>,<em class="lv">value</em>):</strong><br/>  if '/' in value:<br/>   self._path = value<br/>   print("Setting value of path to {}".format(value))<br/>  else:<br/>   print("Error: {} is not a valid path string".format(value))</span><span id="9fab" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@path.deleter</strong><br/> <em class="lv">def</em> <strong class="ml iu">path(<em class="lv">self</em>):</strong><br/>  print('Deleting path attribute')<br/>  del self._path</span><span id="ee9e" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@<em class="lv">property</em></strong><em class="lv"><br/> def</em> <strong class="ml iu">file_name(<em class="lv">self</em>):</strong><br/>  """ The docstring for the file_name property """<br/>  print("Getting value of file_name")<br/>  return self._file_name</span><span id="833e" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@file_name.setter</strong><br/> <em class="lv">def</em> <strong class="ml iu">file_name(<em class="lv">self</em>,<em class="lv">value</em>):</strong><br/>  if '.' in value:<br/>   self._file_name = value<br/>   print("Setting value of file_name to {}".format(value))<br/>  else:<br/>   print("Error: {} is not a valid file name".format(value))</span><span id="a301" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">@file_name.deleter</strong><br/> <em class="lv">def</em> <strong class="ml iu">file_name(<em class="lv">self</em>):</strong><br/>  print('Deleting file_name attribute')<br/>  del self._file_name</span><span id="d524" class="mp mq it ml b gy mv ms l mt mu"><em class="lv">def</em> <strong class="ml iu">display_summary(<em class="lv">self</em>):</strong><br/>  data = pd.read_csv(self._path + self._file_name)<br/>  print(self._file_name)<br/>  print(data.info())</span><span id="b397" class="mp mq it ml b gy mv ms l mt mu">if __name__ == '__main__':</span><span id="6ed9" class="mp mq it ml b gy mv ms l mt mu">data_by_genres = CSVGetInfo("/Users/erdemisbilen/Lessons/", <br/> "data_by_genres.csv")</span><span id="f56e" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (1)</em></strong>print(data_by_genres.path)<br/> <strong class="ml iu"><em class="lv">(2)</em></strong>print(data_by_genres.file_name)</span><span id="9da7" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (3)</em></strong>data_by_genres.path="lessons"<br/> <strong class="ml iu"><em class="lv">(4)</em></strong>print(data_by_genres.path)<br/> <strong class="ml iu"><em class="lv">(5)</em></strong>data_by_genres.path="/Users/"<br/> <strong class="ml iu"><em class="lv">(6)</em></strong>print(data_by_genres.path)<br/> <strong class="ml iu"><em class="lv">(7)</em></strong>del data_by_genres.path</span><span id="5c7e" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (8)</em></strong>data_by_genres.file_name="datacsv"<br/> <strong class="ml iu"><em class="lv">(9)</em></strong>print(data_by_genres.file_name)<br/><strong class="ml iu"> <em class="lv">(10)</em></strong>data_by_genres.file_name="data.csv"<br/> <strong class="ml iu"><em class="lv">(11)</em></strong>print(data_by_genres.file_name)<br/> <strong class="ml iu"><em class="lv">(12)</em></strong>del data_by_genres.file_name</span><span id="c41b" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu">Output:</strong><br/>air-MacBook-Air: <strong class="ml iu">python PropertyExample.py</strong></span><span id="eb83" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (1)</em></strong>Getting value of path<br/> <strong class="ml iu"><em class="lv">(1)</em></strong>/Users/erdemisbilen/Lessons/<br/> <strong class="ml iu"><em class="lv">(2)</em></strong>Getting value of file_name<br/> <strong class="ml iu"><em class="lv">(2)</em></strong>data_by_genres.csv</span><span id="ac4b" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (3)</em></strong>Error: lessons is not a valid path string<br/> <strong class="ml iu"><em class="lv">(4)</em></strong>Getting value of path<br/> <strong class="ml iu"><em class="lv">(4)</em></strong>/Users/erdemisbilen/Lessons/<br/> <strong class="ml iu"><em class="lv">(5)</em></strong>Setting value of path to /Users/<br/> <strong class="ml iu"><em class="lv">(6)</em></strong>Getting value of path<br/> <strong class="ml iu"><em class="lv">(6)</em></strong>/Users/<br/> <strong class="ml iu"><em class="lv">(7)</em></strong>Deleting path attribute</span><span id="0892" class="mp mq it ml b gy mv ms l mt mu"><strong class="ml iu"><em class="lv"> (8)</em></strong>Error: datacsv is not a valid file name<br/> <strong class="ml iu"><em class="lv">(9)</em></strong>Getting value of file_name<br/> <strong class="ml iu"><em class="lv">(9)</em></strong>data_by_genres.csv<br/> <strong class="ml iu"><em class="lv">(10)</em></strong>Setting value of file_name to data.csv<br/> <strong class="ml iu"><em class="lv">(11)</em></strong>Getting value of file_name<br/> <strong class="ml iu"><em class="lv">(11)</em></strong>data.csv<br/> <strong class="ml iu"><em class="lv">(12)</em></strong>Deleting file_name attribute</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/df1beb0f8678761a09f2028ea0714228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8Gyfvvj64exlA5z9"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@anyadiary?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Waranya Mooldee </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="d7e1" class="mx mq it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">@property Decorator 来定义 Setter 和 Getter 方法</h1><p id="aa02" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">我们可以使用<strong class="lb iu"> property() </strong>函数或者<strong class="lb iu"> @property </strong> decorator 来定义属性。他们做同样的工作，但后者被认为更直观，更容易阅读。</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="67eb" class="mp mq it ml b gy mr ms l mt mu"><em class="lv">class</em> <strong class="ml iu">CSVGetInfo</strong>(<em class="lv">object</em>):</span><span id="e909" class="mp mq it ml b gy mv ms l mt mu"><em class="lv">def</em> <strong class="ml iu">__init__</strong>(<em class="lv">self</em>, <em class="lv">path</em>, <em class="lv">file_name</em>):<br/>  self._path = path<br/>  self._file_name = file_name</span></pre><p id="0b3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的<strong class="lb iu"> CSVGetInfo </strong>类中有<strong class="lb iu"> _path </strong>和<strong class="lb iu"> _file_name </strong>私有属性。为了控制其他人如何从外部获取和设置这些属性，让我们使用<strong class="lb iu">@<em class="lv">property</em></strong>decorator 来定义属性的 getter 和 setter 函数。</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="aa07" class="mp mq it ml b gy mr ms l mt mu"><strong class="ml iu">@<em class="lv">property</em></strong><em class="lv"><br/> def</em> <strong class="ml iu">path(<em class="lv">self</em>):</strong><br/>  """ The docstring for the path property """<br/>  print("Getting value of path")<br/>  return self._path</span></pre><p id="7953" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">@<em class="lv">属性</em> </strong>装饰器被添加到<strong class="lb iu">路径(<em class="lv"> self </em> ) </strong>方法的开始处。这表明<strong class="lb iu"> path(self) </strong>方法被用作 getter 函数。</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="0f24" class="mp mq it ml b gy mr ms l mt mu"><strong class="ml iu">@file_name.setter</strong><br/> <em class="lv">def</em> <strong class="ml iu">file_name(<em class="lv">self</em>,<em class="lv">value</em>):</strong><br/>  if '.' in value:<br/>   self._file_name = value<br/>   print("Setting value of file_name to {}".format(value))<br/>  else:<br/>   print("Error: {} is not a valid file name".format(value))</span></pre><p id="c33f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同理<strong class="lb iu">，@ &lt; property_name &gt;。setter </strong> decorator 帮助定义 setter 方法。在我们的例子中，<strong class="lb iu"> @file_name.setter </strong>被添加到了<strong class="lb iu"> file_name( <em class="lv"> self </em>，<em class="lv"> value </em> ) </strong>方法之前，以将其定义为 setter 方法。注意，在我们的 setter 方法中，我们在将值赋给<strong class="lb iu"> _file_name </strong>属性之前对其进行了验证。</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="7499" class="mp mq it ml b gy mr ms l mt mu"><strong class="ml iu">@path.deleter</strong><br/> <em class="lv">def</em> <strong class="ml iu">path(<em class="lv">self</em>):</strong><br/>  print('Deleting path attribute')<br/>  del self._path</span></pre><p id="aaff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了 setter 和 getter 方法，我们可以用@ <strong class="lb iu"> &lt; property_name &gt;定义 deleter 方法。删除器</strong>装饰器。</p><p id="2600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们不必为每个属性定义所有三个方法，因为有时属性只能在创建实例时设置。对于这种情况，我们可以通过包含一个 getter 方法来定义只读属性。</p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="2f37" class="mp mq it ml b gy mr ms l mt mu"> data_by_genres = CSVGetInfo("/Users/erdemisbilen/Lessons/", <br/> "data_by_genres.csv")</span><span id="27e2" class="mp mq it ml b gy mv ms l mt mu"> print(data_by_genres.path)<br/> print(data_by_genres.file_name)</span><span id="debd" class="mp mq it ml b gy mv ms l mt mu"> data_by_genres.path="lessons"<br/> print(data_by_genres.path)<br/> data_by_genres.path="/Users/"<br/> print(data_by_genres.path)<br/> del data_by_genres.path</span></pre><p id="d243" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经定义了我们的属性，现在我们可以使用它们来设置和获取包含在我们的<strong class="lb iu">data _ by _ genders</strong>实例中的数据。</p><p id="e269" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们可以随意使用 setter 和 getter 方法并修改它们，而不会影响代码结构中的实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/7d4f10b5e7555d941f89205710156197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_NoLu8CSqg00JUHQ"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@anna99t?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> T S </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="4092" class="mx mq it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">关键要点</h1><ul class=""><li id="e147" class="lw lx it lb b lc no lf np li nu lm nv lq nw lu mb mc md me bi translated"><strong class="lb iu"> @property </strong> decorator 被认为是定义 getters、setters 和 deleters 方法的首选方式。</li><li id="3192" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">通过定义属性，我们在类中创建了一个中间层，通过不影响已开发的代码结构来控制其他人如何访问数据。</li></ul><h1 id="1ef0" class="mx mq it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">结论</h1><p id="6077" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">在这篇文章中，我解释了 Python 中属性的基础知识。</p><p id="2f8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章中的代码可以在<a class="ae ky" href="https://github.com/eisbilen/PropertiesExample" rel="noopener ugc nofollow" target="_blank">我的 GitHub 库中找到。</a></p><p id="fabd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用。</p><p id="5e72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>