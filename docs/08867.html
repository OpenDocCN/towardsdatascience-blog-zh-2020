<html>
<head>
<title>Automating AWS SageMaker notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化 AWS SageMaker 笔记本电脑</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automating-aws-sagemaker-notebooks-2dec62bc2c84?source=collection_archive---------8-----------------------#2020-06-26">https://towardsdatascience.com/automating-aws-sagemaker-notebooks-2dec62bc2c84?source=collection_archive---------8-----------------------#2020-06-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0ed3a27757527f34bd41b5089bf2ca65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTcU74Gqaqi-KTxv5up7uw.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">在<a class="ae jg" href="/s/photos/automation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jg" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Franck V. </a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="5b63" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">了解如何使用 CloudWatch、Lambda 和生命周期配置安排自动执行 AWS SageMaker 笔记本</h2></div><h1 id="d510" class="ky kz jj bd la lb lc ld le lf lg lh li kp lj kq lk ks ll kt lm kv ln kw lo lp bi translated"><strong class="ak">简介</strong></h1><p id="01d5" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">SageMaker 提供了多种工具和功能来大规模标记、构建、训练和部署机器学习模型。其中最流行的是笔记本实例，用于准备和处理数据，编写代码来训练模型，将模型部署到 Amazon SageMaker 主机，以及测试或验证模型。我最近在做一个项目，涉及自动化 SageMaker 笔记本。</p><p id="3c3d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">使用 Amazon Glue 在 Sagemaker 中部署模型有多种方式，如这里的<a class="ae jg" rel="noopener" target="_blank" href="/automating-machine-learning-workflows-with-aws-glue-sagemaker-and-aws-step-functions-data-science-b4ed59e4d7f9">和这里的</a>和<a class="ae jg" href="https://www.cloudreach.com/en/resources/blog/machine-learning-model-aws/" rel="noopener ugc nofollow" target="_blank">所述。您还可以使用</a><a class="ae jg" rel="noopener" target="_blank" href="/aws-sagemaker-endpoint-as-rest-service-with-api-gateway-48c36a3cf46c">端点 API </a>来部署模型。如果您不部署模型，而是一次又一次地执行脚本，那该怎么办？SageMaker 目前还没有直接的方法来实现自动化。另外，如果您想在执行完脚本后立即关闭笔记本实例，该怎么办呢？这肯定会节省你的钱，因为 AWS 是按小时收费的。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="e058" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated">我们如何实现这一点？</h1><h2 id="3e13" class="nd kz jj bd la ne nf dn le ng nh dp li lz ni nj lk md nk nl lm mh nm nn lo no bi translated">正在使用的其他 AWS 功能和服务</h2><ul class=""><li id="7a9a" class="np nq jj ls b lt lu lw lx lz nr md ns mh nt ml nu nv nw nx bi translated"><a class="ae jg" href="https://aws.amazon.com/blogs/machine-learning/lifecycle-configuration-update-for-amazon-sagemaker-notebook-instances/" rel="noopener ugc nofollow" target="_blank">生命周期配置</a>:生命周期配置提供了 shell 脚本，这些脚本仅在您创建 notebook 实例或启动一个实例时运行。它们可用于安装软件包或配置笔记本实例。</li><li id="1b00" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated"><a class="ae jg" href="https://aws.amazon.com/cloudwatch/" rel="noopener ugc nofollow" target="_blank"> AWS CloudWatch </a>:亚马逊 CloudWatch 是一项监控和可观测性服务。它可用于检测您环境中的异常行为，设置警报，并排显示日志和指标，并采取自动化措施。</li><li id="b140" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated"><a class="ae jg" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a> : AWS Lambda 允许您在不提供或管理服务器的情况下运行代码。您只需为您消耗的计算时间付费，当您的代码不运行时，则不收费。</li></ul><p id="57e5" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">用于自动化的主要步骤:</p><ul class=""><li id="8632" class="np nq jj ls b lt mm lw mn lz od md oe mh of ml nu nv nw nx bi translated">使用 CloudWatch 触发调用 lambda 函数的执行</li><li id="0336" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated">lambda 函数启动相应的笔记本实例。</li><li id="080a" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated">笔记本实例一启动，生命周期配置就会被触发。</li><li id="6ff2" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated">生命周期配置执行脚本，然后关闭笔记本实例。</li></ul></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h1 id="65a1" class="ky kz jj bd la lb my ld le lf mz lh li kp na kq lk ks nb kt lm kv nc kw lo lp bi translated"><strong class="ak">详细步骤</strong></h1><p id="5137" class="pw-post-body-paragraph lq lr jj ls b lt lu kk lv lw lx kn ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated"><strong class="ls jk">λ函数</strong></p><p id="4a69" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们利用 lambda 函数来启动一个笔记本实例。假设 lambda 函数被称为<em class="og">‘测试-lambda-函数’</em>。确保选择一个有权限访问 lambda 和 SageMaker 的执行角色。</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/d9d620a18d84adf485a4aac6bc2adbac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ccq4FRCxPh0REcmQ8ewX0w.png"/></div></div></figure><p id="3b5f" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这里<em class="og">‘test-notebook-instance’</em>是我们想要自动化的笔记本实例的名称。</p><figure class="oi oj ok ol gt iv"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="1c88" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><strong class="ls jk">云观察</strong></p><ul class=""><li id="8882" class="np nq jj ls b lt mm lw mn lz od md oe mh of ml nu nv nw nx bi translated">转到规则&gt;创建规则。</li></ul><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/15d136d18f91cb04b7015b27a71e821d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiZT9WfsTFhGRGE-qIknlQ.png"/></div></div></figure><ul class=""><li id="6240" class="np nq jj ls b lt mm lw mn lz od md oe mh of ml nu nv nw nx bi translated">输入刷新频率</li><li id="5c47" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml nu nv nw nx bi translated">选择 lambda 函数名:<em class="og">‘测试-lambda-函数’</em>。这是我们在上面创建的同一个函数。</li></ul><p id="a0ab" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated"><strong class="ls jk">生命周期配置</strong></p><p id="1072" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我们现在将为我们的'<em class="og">测试笔记本实例'</em>'创建一个生命周期配置。让我们称这个生命周期配置为“测试-生命周期-配置”。</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/df5c9eba344e592b866b832e9e75ac16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSI2qCK5aXP_G3UBWPxgQw.png"/></div></div></figure><p id="0cd7" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">代码:</p><figure class="oi oj ok ol gt iv"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="9df0" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">代码功能的简要说明:</p><ol class=""><li id="a7f6" class="np nq jj ls b lt mm lw mn lz od md oe mh of ml oq nv nw nx bi translated">启动 python 环境</li><li id="ed83" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml oq nv nw nx bi translated">执行 jupyter 笔记本</li><li id="27a0" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml oq nv nw nx bi translated">下载包含自动停止功能的 AWS 示例 python 脚本</li><li id="6b7d" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml oq nv nw nx bi translated">等待 1 分钟。可以根据需要增加或降低。</li><li id="8a23" class="np nq jj ls b lt ny lw nz lz oa md ob mh oc ml oq nv nw nx bi translated">创建一个<a class="ae jg" href="https://en.wikipedia.org/wiki/Cron" rel="noopener ugc nofollow" target="_blank"> cron </a>作业来执行自动停止 python 脚本</li></ol><p id="f8b9" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">之后，我们将生命周期配置连接到笔记本电脑。</p><figure class="oi oj ok ol gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/3caf7313543e1daea48edf7e92ceef26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVC63rTVNtX40gaUpR9vPA.png"/></div></div></figure><p id="c21d" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">我喜欢在 LinkedIn 上联系——https://www.linkedin.com/in/taufeeqrahmani/</p><p id="ecae" class="pw-post-body-paragraph lq lr jj ls b lt mm kk lv lw mn kn ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">查看我在<a class="ae jg" href="https://data-sleek.com/" rel="noopener ugc nofollow" target="_blank"> Data Sleek </a>的朋友的工作，寻找所有数据的解决方案。</p></div></div>    
</body>
</html>