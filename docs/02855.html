<html>
<head>
<title>Filtering Lists in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的过滤列表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/filtering-lists-in-python-a3387c7b6b5e?source=collection_archive---------7-----------------------#2020-03-19">https://towardsdatascience.com/filtering-lists-in-python-a3387c7b6b5e?source=collection_archive---------7-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4367" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python中的过滤方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f56f24d7bddfb86538cf7914a78a26c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*90MaADWc6lhlbXUrUNfv7g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/clear-glass-pitcher-beside-black-ceramic-teacup-2267855/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="7466" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本帖中，我们将讨论Python中列表过滤的三种方法。具体来说，我们将介绍如何使用列表理解、生成器表达式和内置的“filter()”方法来过滤python中的列表。</p><p id="3938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><h1 id="faea" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用列表理解进行过滤</h1><p id="eb07" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">假设我们在一个列表中有数据，我们想提取值或根据一些标准减少列表。具体来说，让我们考虑下面的列表，它包含一个带有一些缺失值的医疗费用列表:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2224" class="mx lw it mt b gy my mz l na nb">medical_charges = ["500", "1000", None, "450", "230", None]<br/>print(medical_charges)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/a2e91ee83ed3f2e671fc856603d71099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*LxecAQaxyXafZt2K-vrVxA.png"/></div></figure><p id="ae5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们可以使用列表理解来过滤掉“无”值:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="5135" class="mx lw it mt b gy my mz l na nb">medical_charges = [n for n in medical_charges if n != None]<br/>print(medical_charges)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/c2dca3c5c0129a427c9a99f964b305e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*8vtTarHoMrC9s7IouLD3SA.png"/></div></figure><p id="af72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以将列表中的元素转换成整数，只是对列表的理解稍作修改:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ada7" class="mx lw it mt b gy my mz l na nb">medical_charges = [int(n) for n in medical_charges if n != None]<br/>print(medical_charges)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5af6f67f87dc81f67f42a73635b02128.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*-1RRvALKdnBTgPOJG57QCw.png"/></div></figure><p id="3a93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将每个元素转换为整数后，我们还可以根据每个整数的大小进行过滤。假设我们要保持费用大于或等于500美元，我们可以写出下面的列表理解:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="64ae" class="mx lw it mt b gy my mz l na nb">medical_charges = [n for n in medical_charges if n &gt;= 500]<br/>print(medical_charges)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/803ac7160ae9c543468888a398858a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*Iucj5Tl6W7M_scpunjGanQ.png"/></div></div></figure><h1 id="e78e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用发生器过滤</h1><p id="268f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果我们正在处理大量的数据，这是医疗记录的常见情况，我们可以使用生成器表达式进行迭代过滤。如果我们想用一个生成器表达式来转换我们的原始列表，我们做如下的事情:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a438" class="mx lw it mt b gy my mz l na nb">charges = (int(n) for n in medical_charges if n != None)<br/>print(charges)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/e17b6f1ee5fb69ada2718cc572e928bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*ZWFylg5f43edQKlGgfNrXQ.png"/></div></figure><p id="4777" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从列表理解来看，语法上的主要区别是使用了圆括号而不是方括号。我们现在可以迭代生成器:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="72e4" class="mx lw it mt b gy my mz l na nb">for charge in charges:<br/>    print(charge)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/5ad623c11f5bf732f46a893f466d1a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:144/format:webp/1*NvSB1wcrrd13EM0anE8ctg.png"/></div></figure><h1 id="ad39" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">使用“LIST()”和“FILTER()”方法进行筛选</h1><p id="6540" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">有时候，过滤标准不容易用列表理解或生成器表达式来表达。让我们考虑将我们的字符串值医疗费用原始列表转换为整数并删除缺失值的示例:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2adc" class="mx lw it mt b gy my mz l na nb">medical_charges = ["500", "1000", None , "450", "230", None]</span></pre><p id="48aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以定义一个函数，它接受一个列表，并尝试将每个元素转换成一个整数。当转换没有抛出错误时，我们返回true。当转换抛出值错误时，我们使用except语句来捕捉错误并返回false:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a5e0" class="mx lw it mt b gy my mz l na nb">def convert_and_filter(input_list):<br/>    try:<br/>        int(input_list)<br/>        return True<br/>    except ValueError:<br/>        return False</span></pre><p id="1d7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以使用内置的“filter()”和“list()”方法。“filter()”函数创建一个迭代器，“list()”方法允许我们创建一个结果列表:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="241f" class="mx lw it mt b gy my mz l na nb">charges = list(filter(convert_and_filter, medical_charges))<br/>print(charges)</span></pre><p id="5d64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将在这里停下来，但是可以随意使用上面的例子。例如，您可以尝试更改list comprehension示例中的过滤条件，使其只包含少于或等于$500的费用。</p><h1 id="5ae5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="f715" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">总之，在这篇文章中，我们讨论了Python中列表过滤的四种方法。我们讨论了列表理解，这对它的可读性是有用的。我们还讨论了生成器表达式，如果我们想避免从大型数据集生成大型结果，可以使用它。最后，我们讨论了使用内置的“filter()”和“list()”方法以及一个自定义函数来过滤列表。我希望你觉得这篇文章有用/有趣。这篇文章的代码可以在GitHub 上找到。感谢您的阅读！</p></div></div>    
</body>
</html>