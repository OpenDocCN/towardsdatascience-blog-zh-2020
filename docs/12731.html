<html>
<head>
<title>Sentiment Analysis of a book through Unsupervised Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于无监督学习的书籍情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sentiment-analysis-of-a-book-through-unsupervised-learning-df876563dd1b?source=collection_archive---------44-----------------------#2020-09-01">https://towardsdatascience.com/sentiment-analysis-of-a-book-through-unsupervised-learning-df876563dd1b?source=collection_archive---------44-----------------------#2020-09-01</a></blockquote><div><div class="fc ik il im in io"/><div class="ip iq ir is it"><div class=""/><p id="456e" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated"><em class="kr">用 Python 分析一本书情感的简单教程</em></p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/177729d66071465217f181dd6599ec1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pk6e_Ag8O-3BnvH2OKbGQg.jpeg"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">foto di<a class="ae li" href="https://pixabay.com/it/users/chenspec-7784448/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5477735" rel="noopener ugc nofollow" target="_blank">Chen spec</a>da<a class="ae li" href="https://pixabay.com/it/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5477735" rel="noopener ugc nofollow" target="_blank">Pixabay</a></p></figure><h1 id="46e9" class="lj lk iw bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">入门指南</h1><p id="09d6" class="pw-post-body-paragraph jt ju iw jv b jw mh jy jz ka mi kc kd ke mj kg kh ki mk kk kl km ml ko kp kq ip bi translated">在本教程中，我将向您展示如何通过基于 AFINN 词典的无监督学习(UL)技术，对包含在书中的文本进行情感分析。本教程利用了仅适用于英语和丹麦语的<code class="fe mm mn mo mp b">afinn</code> Python 包。如果你的文本被写成不同的语言，你可以先翻译成英文，然后使用<code class="fe mm mn mo mp b">afinn</code>包。</p><p id="a866" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">这个笔记本应用了情绪分析圣奥古斯丁忏悔，可以从<a class="ae li" href="https://www.gutenberg.org/files/3296/3296-h/3296-h.htm" rel="noopener ugc nofollow" target="_blank">古腾堡项目页面</a>下载。这部杰作分为 13 本书(或 13 章)。我们将每本书存储在不同的文件中，名为 number.text(例如 1.txt 和 2.txt)。每个文件的每一行只包含一个句子。</p><p id="0cdd" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">你可以从我的 Github 库下载代码:<a class="ae li" href="https://github.com/alod83/papers/tree/master/aiucd2021" rel="noopener ugc nofollow" target="_blank">https://github.com/alod83/papers/tree/master/aiucd2021</a></p><p id="fab7" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">首先从<code class="fe mm mn mo mp b">afinn</code>包中导入<code class="fe mm mn mo mp b">Afinn</code>类。</p><pre class="kt ku kv kw gu mq mp mr ms aw mt bi"><span id="4452" class="mu lk iw mp b gz mv mw l mx my">from afinn import Afinn</span></pre><p id="9f34" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">然后通过指定使用的语言创建一个新的<code class="fe mm mn mo mp b">Afinn</code>对象。</p><pre class="kt ku kv kw gu mq mp mr ms aw mt bi"><span id="382f" class="mu lk iw mp b gz mv mw l mx my">afinn = Afinn(language=’en’)</span></pre><h1 id="03ea" class="lj lk iw bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">计算情绪</h1><h2 id="33f8" class="mu lk iw bd ll mz na dn lp nb nc dp lt ke nd ne lx ki nf ng mb km nh ni mf nj bi translated">使用 Afinn 给出的分数来计算情感</h2><p id="a331" class="pw-post-body-paragraph jt ju iw jv b jw mh jy jz ka mi kc kd ke mj kg kh ki mk kk kl km ml ko kp kq ip bi translated"><code class="fe mm mn mo mp b">afinn</code>对象包含一个名为<code class="fe mm mn mo mp b">score()</code>的方法，该方法接收一个句子作为输入，并返回一个分数作为输出。分数可以是正的、负的或中性的。我们计算一本书的分数，只需简单地将该书所有句子的分数相加。我们定义了三个变量&gt; pos、neg 和 neutral，分别存储一本书所有句子的所有正面、负面和中性得分的总和。</p><p id="7202" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">首先，我们定义三个索引，它们将在后面使用。</p><pre class="kt ku kv kw gu mq mp mr ms aw mt bi"><span id="14ff" class="mu lk iw mp b gz mv mw l mx my">pos_index = []<br/>neg_index = []<br/>neutral_index = []</span></pre><p id="001b" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">我们通过<code class="fe mm mn mo mp b">open()</code>函数打开对应于每本书的文件，我们通过<code class="fe mm mn mo mp b">file.readlines()</code>函数读取所有行，并为每一行计算分数。</p><p id="f619" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">那么，我们可以定义三个指数来计算一本书的情绪:正面情绪指数(pi)、负面情绪指数(ni)和中性情绪指数(nui)。一本书的圆周率对应于一本书中的肯定句的数量除以该书的总句子数量。同样，我们可以计算一本书的 ni 和 nui。</p><pre class="kt ku kv kw gu mq mp mr ms aw mt bi"><span id="16b1" class="mu lk iw mp b gz mv mw l mx my">for book in range(1,14):<br/>    file = open('sources/' + str(book) + '.txt')<br/>    lines = file.readlines()<br/>    pos = 0<br/>    neg = 0<br/>    neutral = 0<br/>    <br/>    for line in lines:<br/>        score = int(afinn.score(line))<br/>        <br/>        if score &gt; 0:<br/>            pos += 1<br/>        elif score &lt; 0:<br/>            neg += 1<br/>        else:<br/>            neutral += 1<br/>        <br/>    n = len(lines)<br/>    pos_index.append(pos / n)<br/>    neg_index.append(neg / n)<br/>    neutral_index.append(neutral / n)</span></pre><h1 id="87c9" class="lj lk iw bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">绘图结果</h1><h2 id="c727" class="mu lk iw bd ll mz na dn lp nb nc dp lt ke nd ne lx ki nf ng mb km nh ni mf nj bi translated">以图形方式显示结果</h2><p id="bc40" class="pw-post-body-paragraph jt ju iw jv b jw mh jy jz ka mi kc kd ke mj kg kh ki mk kk kl km ml ko kp kq ip bi translated">最后，我们可以通过使用<code class="fe mm mn mo mp b">matplotlib</code>包来绘制结果。</p><pre class="kt ku kv kw gu mq mp mr ms aw mt bi"><span id="e5f1" class="mu lk iw mp b gz mv mw l mx my">import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="2bd2" class="mu lk iw mp b gz nk mw l mx my">X = np.arange(1,14)<br/>plt.plot(X,pos_index,'-.',label='pos')<br/>plt.plot(X,neg_index, '--',label='neg')<br/>plt.plot(X,neutral_index,'-',label='neu')<br/>plt.legend()<br/>plt.xticks(X)<br/>plt.xlabel('Libri')<br/>plt.ylabel('Indici')<br/>plt.grid()<br/>plt.savefig('plots/afinn-bsi.png')<br/>plt.show()</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj nl"><img src="../Images/47f344a8a830cc452fd0b24ceed024ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*9WPKLhV8F7OdZ8LqNZzqGA.png"/></div></figure><h1 id="3c99" class="lj lk iw bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">吸取的教训</h1><p id="1752" class="pw-post-body-paragraph jt ju iw jv b jw mh jy jz ka mi kc kd ke mj kg kh ki mk kk kl km ml ko kp kq ip bi translated">在本教程中，我向您展示了一个简单的策略来计算包含在一本书中的文本的情感。这可以通过 Python 提供的<code class="fe mm mn mo mp b">afinn</code>包来实现。您可以遵循以下步骤:</p><ul class=""><li id="b51c" class="nm nn iw jv b jw jx ka kb ke no ki np km nq kq nr ns nt nu bi translated">把书的正文分成几章，然后把每一章存放在一个单独的文件里</li><li id="6044" class="nm nn iw jv b jw nv ka nw ke nx ki ny km nz kq nr ns nt nu bi translated">把每一章的所有句子分成不同的行</li><li id="0b8c" class="nm nn iw jv b jw nv ka nw ke nx ki ny km nz kq nr ns nt nu bi translated">通过<code class="fe mm mn mo mp b">Afinn</code>类提供的<code class="fe mm mn mo mp b">score()</code>方法分别计算每个句子的分数</li><li id="61b7" class="nm nn iw jv b jw nv ka nw ke nx ki ny km nz kq nr ns nt nu bi translated">计算每个章节的正面情感指数、负面情感指数和中性情感指数</li><li id="79d5" class="nm nn iw jv b jw nv ka nw ke nx ki ny km nz kq nr ns nt nu bi translated">绘图结果。</li></ul><p id="d844" class="pw-post-body-paragraph jt ju iw jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ip bi translated">如果想应用监督学习技术进行情感分析，可以继续关注:)。</p></div></div>    
</body>
</html>