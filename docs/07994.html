<html>
<head>
<title>Face Detection in just 5 lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仅用 5 行代码实现人脸检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/face-detection-in-just-5-lines-of-code-5cc6087cb1a9?source=collection_archive---------19-----------------------#2020-06-13">https://towardsdatascience.com/face-detection-in-just-5-lines-of-code-5cc6087cb1a9?source=collection_archive---------19-----------------------#2020-06-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2b6b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用世界上最简单的人脸识别 python 库来识别和操作人脸。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6397c978e04a06bc73ebad403a9574d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZaPjV4CpFjVrhMvIMJX0SQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从印度尼西亚一群孩子的图像中检测人脸。图片由 Pixabay 提供。</p></figure><p id="82ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di"> F </span> <strong class="la iu">王牌检测</strong>是深度学习的计算机技术师。它识别数字图像或视频场景中的人脸。它被用于多种应用，如<strong class="la iu">面部识别、解锁智能手机、智能广告、情感推断</strong>等等。</p><p id="5826" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">深度学习</strong>是人工智能(AI)中<strong class="la iu">机器学习</strong>的子集，它拥有能够从非结构化或无标签的数据中进行无监督学习的网络。</p><blockquote class="md"><p id="c1d9" class="me mf it bd mg mh mi mj mk ml mm lt dk translated">“计算机现在能够看、听和学习。欢迎来到未来！”—戴夫·沃特斯</p></blockquote><p id="8caa" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在这个初学者教程中，我们将学习如何安装和配置 python 环境，使用集成开发环境(ide)来调试和运行我们的 python 代码。然后我们将使用广泛流行的人脸检测和操作库<strong class="la iu">由<a class="ae ms" href="https://github.com/ageitgey" rel="noopener ugc nofollow" target="_blank"> Adam Geitgey </a>开发的人脸识别</strong>。我们将在检测到的 faces🕵.周围定制不同颜色和边框形状的图像它是使用 dlib 最先进的具有深度学习功能的人脸识别技术构建的。该模型在 Wild 基准中的标记人脸上具有 99.38%的准确率。</p><p id="6d94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">TL；博士</strong>本教程是为<strong class="la iu">绝对初学者</strong>准备的，即使你是刚毕业的学生或者是期待使用 python 开始机器学习的人。像<strong class="la iu"> Web 和移动开发者</strong>或<strong class="la iu">后端开发者</strong>这样的技术堆栈开发者也可以轻松地阅读这篇文章。那么，让我们开始新的简短的代码之旅。</p><h1 id="8dac" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">环境配置和安装</h1><p id="668a" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">首先我们需要下载<a class="ae ms" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> Python </strong> </a>的最新稳定版本。</p><p id="20c5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常有两种著名的方法来配置 python 环境并在我们的计算机上安装软件包——pip 或 condo。</p><p id="bebe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">python 包包含模块所需的所有文件。模块是可以包含在项目中的 Python 代码库。</p><ol class=""><li id="2bfc" class="nq nr it la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated"><a class="ae ms" href="https://www.w3schools.com/python/python_pip.asp" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">PIP</strong></a><strong class="la iu">-</strong>一个用于 Python 包的包管理器。</li><li id="118b" class="nq nr it la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated"><a class="ae ms" href="https://docs.anaconda.com/anaconda/user-guide/getting-started/" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">Anaconda</strong></a><strong class="la iu">-</strong>一个完整的 python 环境解决方案，运行不同版本，管理所有 python 包。使用 Anaconda Navigator，您可以安装和管理计算机中的所有软件包。</li></ol><p id="a418" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以关注其中任何一个或两个。</p><h1 id="1dc7" class="mt mu it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated"><strong class="ak">代码编辑器和 IDE </strong></h1><p id="6e01" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">除了基本的 python <strong class="la iu"> REPL </strong>(命令行界面)，我们可以在这两个专业编辑器中运行我们的 python 程序</p><ol class=""><li id="ff13" class="nq nr it la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated"><a class="ae ms" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">py charm</strong></a><strong class="la iu">-</strong>下载<strong class="la iu"> </strong>热门<strong class="la iu"> </strong>面向专业开发者的 Python IDE 并开始。它就像其他著名的 IDE 一样，启动和使用都很简单。</li><li id="6f99" class="nq nr it la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated"><a class="ae ms" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> Jupyter 笔记本</strong> </a> <strong class="la iu"> - </strong>被程序员和专业培训师广泛使用的基于网络的代码编辑器。</li></ol><p id="90bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用康达安装 Jupyter 笔记本电脑</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="02d9" class="oj mu it of b gy ok ol l om on">conda install -c conda-forge notebook</span></pre><p id="54cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者使用 pip 安装，然后运行 Jupiter notebook 来运行它-</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="f330" class="oj mu it of b gy ok ol l om on">pip install notebook<br/>jupyter notebook</span></pre><p id="9398" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这足以让我们开始编写第一个 Python 程序并运行它。你可以使用上面的任何一个编辑器。在我们的教程中，我们将使用 PyCharm 编写带有 pip 包管理器的代码来安装包。</p><p id="1a26" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，让我们开始在任何给定的图像和照片中检测人脸。你不兴奋吗？😀</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">giphy.com 的 Gif</p></figure><p id="542b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们安装代码运行所需的库。我们将只安装和导入 2 个库。</p><ol class=""><li id="755b" class="nq nr it la b lb lc le lf lh ns ll nt lp nu lt nv nw nx ny bi translated"><a class="ae ms" href="https://pypi.org/project/Pillow/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">枕</strong> </a> <strong class="la iu"> - </strong>友好的 PIL 叉(Python 影像库)。</li><li id="0af7" class="nq nr it la b lb nz le oa lh ob ll oc lp od lt nv nw nx ny bi translated"><a class="ae ms" href="https://pypi.org/project/face-recognition/#description" rel="noopener ugc nofollow" target="_blank"><strong class="la iu"/></a><strong class="la iu"/>-检测图像中的人脸。</li></ol><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="5017" class="oj mu it of b gy ok ol l om on">pip install Pillow</span><span id="b558" class="oj mu it of b gy oq ol l om on">pip install face-recognition</span></pre><p id="05cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以创建一个 python 类型的新文件(扩展名为<strong class="la iu">)。py </strong>)或者 Jupyter 笔记本中的新笔记本开始编码— <strong class="la iu"> face_detection.py </strong>。如果它需要其他相关的库，你也可以使用 pip 或 conda 简单地安装它们。</p><p id="efa8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们在代码中导入上述库-</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="ff98" class="oj mu it of b gy ok ol l om on"><strong class="of iu">import </strong>PIL.Image<br/><strong class="of iu">import </strong>PIL.ImageDraw<br/><strong class="of iu">import </strong>face_recognition</span></pre><h2 id="8221" class="oj mu it bd mv or os dn mz ot ou dp nd lh ov ow nf ll ox oy nh lp oz pa nj pb bi translated">第一行</h2><p id="117c" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">让我们在代码文件所在的文件夹中选择一个名为 GroupYoga.jpg 的图片(你可以选择任何图片),或者给出图片的正确路径。我们应该从 face_recognition 库中将我们的图像加载到<strong class="la iu"> load_image_file() </strong>方法，该方法会将它转换成该图像的<a class="ae ms" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> NumPy </strong> </a>数组。我们把它赋给变量名<strong class="la iu"> given_image </strong>。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="2700" class="oj mu it of b gy ok ol l om on">given_image = face_recognition.load_image_file(<strong class="of iu">'GroupYoga.jpg'</strong>)</span></pre><h2 id="8db7" class="oj mu it bd mv or os dn mz ot ou dp nd lh ov ow nf ll ox oy nh lp oz pa nj pb bi translated">第二行</h2><p id="e8ff" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">使用同一个库中的<strong class="la iu"> face_locations() </strong>方法，我们将计算给定 _image 中的人脸数量，并将打印图像中找到的所有人脸的长度。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="8880" class="oj mu it of b gy ok ol l om on">face_locations = face_recognition.face_locations(given_image)<br/><br/>number_of_faces = len(face_locations)<br/>print(<strong class="of iu">"We found {} face(s) in this image."</strong>.format(number_of_faces))</span></pre><h2 id="9848" class="oj mu it bd mv or os dn mz ot ou dp nd lh ov ow nf ll ox oy nh lp oz pa nj pb bi translated">第 3 行</h2><p id="f479" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">现在，为了在图像上绘制任何形状，我们将使用 PIL.Image 中的<strong class="la iu"> fromarray() </strong>方法将图像转换为枕头库对象。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="fe0b" class="oj mu it of b gy ok ol l om on">pil_image = PIL.Image.fromarray(given_image)</span></pre><h2 id="2427" class="oj mu it bd mv or os dn mz ot ou dp nd lh ov ow nf ll ox oy nh lp oz pa nj pb bi translated">第 4 行</h2><p id="bd67" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">现在，我们将运行一个 for-in 循环来打印四个像素位置，如检测到的人脸的上、左、下和右。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="5d67" class="oj mu it of b gy ok ol l om on"><strong class="of iu">for </strong>face_location <strong class="of iu">in </strong>face_locations:<em class="pc"><br/>    </em>top, left, bottom, right = face_location<br/>    print(<strong class="of iu">"A face is detected at pixel location Top: {}, Left: {}, Bottom: {}, Right: {}"</strong>.format(top, left, bottom, right))</span></pre><h2 id="4ca7" class="oj mu it bd mv or os dn mz ot ou dp nd lh ov ow nf ll ox oy nh lp oz pa nj pb bi translated">第 5 行</h2><p id="b729" class="pw-post-body-paragraph ky kz it la b lb nl ju ld le nm jx lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我们将绘制一个绿色的矩形框，宽度为 10。您也可以将形状更改为多边形或椭圆形。所以，在上面的循环中写下面的两个绘制方法。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="05df" class="oj mu it of b gy ok ol l om on">draw = PIL.ImageDraw.Draw(pil_image)<br/>draw.rectangle([left, top, right, bottom], outline=<strong class="of iu">"green"</strong>, width=10)</span></pre><p id="6e3d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，只需使用变量<strong class="la iu"> pil_image </strong>来显示我们的新图像，其中检测到的人脸周围使用矩形边框。</p><pre class="kj kk kl km gt oe of og oh aw oi bi"><span id="4780" class="oj mu it of b gy ok ol l om on">pil_image.show()</span></pre><p id="9f85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">新的临时映像将在您的计算机上自动打开(如果一切设置正确)。它应该是类似下图的东西-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/ad7ea8eb62665829b328526ffc7463c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XLX9OEwgDcyR5jzVBZ3y5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检测到做瑜伽的女人的脸。图片由 Pexels 提供。</p></figure><p id="1375" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">答对了。🎉</p><blockquote class="pe pf pg"><p id="5807" class="ky kz pc la b lb lc ju ld le lf jx lg ph li lj lk pi lm ln lo pj lq lr ls lt im bi translated">如果您遇到任何编译时或运行时问题以及环境配置问题，您可以在下面的回复部分写下，或者与我联系。</p></blockquote><p id="ad6b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，让我们把上面所有的小代码片段收集到一个文件中，这个文件可以在任何 python 环境中运行。让我们使用学校孩子的形象(作为文章封面的特色)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk op l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">face_detection.py 中的完整代码</p></figure><p id="be97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您运行上面的文件(PyCharm 或 Notebook 中的 run 按钮)，如果一切正常(我指的是编译或运行时错误)，您将在编辑器的控制台得到下面的输出-</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pk op l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">PyCharm 中的控制台输出</p></figure><p id="e856" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就是这样。我们最简单的人脸检测🎭代码已准备好从任何给定的照片中识别人脸。您可以通过更改颜色、边框类型和宽度来自定义上面的代码。我建议尝试定制，并探索其他方法和选项。</p><blockquote class="md"><p id="c208" class="me mf it bd mg mh mi mj mk ml mm lt dk translated"><strong class="ak">Face _ recognition</strong>library 还可以用来在人脸上进行<strong class="ak">数码化妆</strong>，在一群人中检查<strong class="ak">相似的人脸</strong>，围绕这些检测到的人脸开发一些<strong class="ak">游戏</strong>。</p></blockquote><p id="1893" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我相信你会发现它是互联网上所有技术文章中最简单的人脸检测教程之一。您可以通过下面的参考资料来了解这个库的更多细节。对于这个库的其他应用，下次我会写一些其他的文章。</p><p id="163f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">资源:</strong></p><div class="pl pm gp gr pn po"><a href="https://pypi.org/project/face-recognition/" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd iu gy z fp pt fr fs pu fu fw is bi translated">人脸识别</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk translated">查找图片中的面孔查找出现在图片中的所有面孔:查找和处理图片中的面部特征获取…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">pypi.org</p></div></div><div class="px l"><div class="py l pz qa qb px qc ks po"/></div></div></a></div><div class="pl pm gp gr pn po"><a href="https://github.com/ageitgey/face_recognition" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fo"><div class="pq ab pr cl cj ps"><h2 class="bd iu gy z fp pt fr fs pu fu fw is bi translated">年龄/面部识别</h2><div class="pv l"><h3 class="bd b gy z fp pt fr fs pu fu fw dk">You can also read a translated version of this file in Chinese 简体中文版 or in Korean 한국어 or in Japanese 日本語. Recognize and…</h3></div><div class="pw l"><p class="bd b dl z fp pt fr fs pu fu fw dk translated">github.com</p></div></div><div class="px l"><div class="qd l pz qa qb px qc ks po"/></div></div></a></div><p id="1d2d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 Medium 上关注我，让我们在 LinkedIn(<a class="ae ms" href="https://www.linkedin.com/in/kapilraghuwanshi/" rel="noopener ugc nofollow" target="_blank">@ kapilraghuwansh</a>I)和 Twitter ( <a class="ae ms" href="https://twitter.com/techygeeeky" rel="noopener ugc nofollow" target="_blank"> @techygeeek </a> y)上保持联系，以获取更多此类有趣的科技文章。🤝</p></div></div>    
</body>
</html>