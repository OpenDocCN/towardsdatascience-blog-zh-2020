<html>
<head>
<title>How to bulk access arXiv full-text preprints</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何批量获取 arXiv 全文预印本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-bulk-access-arxiv-full-text-preprints-58026e19e8ef?source=collection_archive---------44-----------------------#2020-03-04">https://towardsdatascience.com/how-to-bulk-access-arxiv-full-text-preprints-58026e19e8ef?source=collection_archive---------44-----------------------#2020-03-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="29d1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Python3 和 MacOS X 命令行</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3a289203fab69e14dda3a98c373355d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K6zrmXvnOKuRQ8Q8GNhBkA.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae kv" href="https://stock.adobe.com/contributor/204072892/sikov?load_type=author&amp;prev_url=detail" rel="noopener ugc nofollow" target="_blank">西科夫</a>，via <a class="ae kv" href="https://stock.adobe.com/images/download-data-storage-business-technology-network-internet-concept/214879849" rel="noopener ugc nofollow" target="_blank">土坯股票</a></p></figure><p id="257c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自 1991 年成立以来，arXiv(科学预印本的主要数据库)已经收到了近 130 万份投稿。所有这些数据在分析中都是有用的，所以我们可能希望能够批量访问全文。这篇文章讲述了我们如何使用 Python 3 和 MacOS X 命令行来实现这一点。</p><h1 id="8f09" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">使用命令行批量访问全文的步骤</h1><p id="0fd0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">尽管数据就在服务器上，但由于服务器容量有限，不建议直接抓取 arXiv。然而，arXiv 已经承认了批量访问的需求，通过<a class="ae kv" href="https://arxiv.org/help/bulk_data_s3" rel="noopener ugc nofollow" target="_blank">在亚马逊 S3 </a>上提供所有全文，每月更新。</p><p id="fb33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">arXiv 将它们的源文件存储在<code class="fe mp mq mr ms b">arxiv</code>桶中。请求者必须付费。数据存储在按日期排序的大 tar 文件中(该文件的最后修改时间)。这有点不方便，因为我们需要处理整个 arXiv 语料库，即使我们只对特定的类别感兴趣。</p><p id="8a10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面我们将介绍下载全文的步骤，目标是<code class="fe mp mq mr ms b">astro-ph</code>类别。</p><h2 id="c748" class="mt lt iq bd lu mu mv dn ly mw mx dp mc lf my mz me lj na nb mg ln nc nd mi ne bi translated">1.设置一个 AWS 帐户。</h2><p id="a0e2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了能够从亚马逊 S3 下载任何东西，你需要一个亚马逊网络服务(AWS)账户。在这里报名<a class="ae kv" href="https://portal.aws.amazon.com/billing/signup" rel="noopener ugc nofollow" target="_blank"/>。你必须注册一张信用卡。</p><h2 id="019d" class="mt lt iq bd lu mu mv dn ly mw mx dp mc lf my mz me lj na nb mg ln nc nd mi ne bi translated">2.创建您的配置文件。</h2><p id="9a04" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建一个名为<code class="fe mp mq mr ms b">config.ini</code>的文件，并添加您的 AWS 配置:</p><pre class="kg kh ki kj gt nf ms ng nh aw ni bi"><span id="7155" class="mt lt iq ms b gy nj nk l nl nm">[DEFAULT]<br/>ACCESS_KEY <strong class="ms ir">=</strong> access<strong class="ms ir">-</strong>key<strong class="ms ir">-</strong>value<br/>SECRET_KEY <strong class="ms ir">=</strong> secret<strong class="ms ir">-</strong>key<strong class="ms ir">-</strong>value</span></pre><p id="1b8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获取您的键值，请按照这里的说明<a class="ae kv" href="https://www.cloudberrylab.com/blog/how-to-find-your-aws-access-key-id-and-secret-access-key-and-register-with-cloudberry-s3-explorer/" rel="noopener ugc nofollow" target="_blank">获取根访问键</a>。</p><p id="85c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要公开此文件！</p><h2 id="7861" class="mt lt iq bd lu mu mv dn ly mw mx dp mc lf my mz me lj na nb mg ln nc nd mi ne bi translated">3.创建 S3 资源并设置配置。</h2><p id="30af" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建一个将从命令行运行的 Python 文件。在其中，初始化一个 S3 资源，这是一个面向对象的服务接口，并将其配置为使用您的 root 访问。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h2 id="745c" class="mt lt iq bd lu mu mv dn ly mw mx dp mc lf my mz me lj na nb mg ln nc nd mi ne bi translated">4.检查<code class="fe mp mq mr ms b">arxiv</code>桶元数据。</h2><p id="cab1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">arXiv 在一个名为<code class="fe mp mq mr ms b">src/arXiv_src_manifest.xml</code>的文件中维护它们的桶中数据的有用信息。下载这个文件，以便更好地理解我们在做什么。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d37c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="np">注意:代码将只显示与当前步骤相关的新的或更改的部分，但是 Python 文件包含了从所有步骤到这一步的代码。完整的文件将显示在最后。</em></p><p id="7396" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">浏览清单文件中的存储桶元数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="ee6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们运行这段代码时，我们将看到清单文件最后一次更新的时间，以及<code class="fe mp mq mr ms b">arxiv</code> bucket 保存了多少 tar 文件和总大小。当我运行这段代码时(2018 年 6 月 10 日)，这个桶包含 1，910 个 924 GB 大小的 tar。</p><h2 id="6dbe" class="mt lt iq bd lu mu mv dn ly mw mx dp mc lf my mz me lj na nb mg ln nc nd mi ne bi translated">5.下载<code class="fe mp mq mr ms b">astro-ph</code>源文件！</h2><p id="c3d6" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">请记住，每个 tar 都包含嵌套的 tar gzs，后者又包含特定类别的源文件。虽然我们必须下载每个 tar，但是我们可以提取这些源文件，而不需要解压缩所有 tar 和 tar gzs。我们还将筛选源文件，只提取标有<code class="fe mp mq mr ms b">astro-ph</code>类别的文件，但也有其他类别可用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="189c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">完整代码</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="8d2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如果你想阅读更多我的文章或者探索数以百万计的其他文章，你可以注册成为中级会员:</strong></p><div class="nx ny gp gr nz oa"><a href="https://brienna.medium.com/membership" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">通过我的推荐链接加入 Medium-briena Herold</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">brienna.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kp oa"/></div></div></a></div><p id="1cee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您还可以订阅我的电子邮件列表，以便在我发布新文章时得到通知:</strong></p><div class="nx ny gp gr nz oa"><a href="https://brienna.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">每当布蕾娜·赫罗尔德发表。</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">每当布蕾娜·赫罗尔德发表。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">brienna.medium.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo kp oa"/></div></div></a></div><p id="b1bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">你可能会对我的其他一些故事感兴趣:</strong></p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-download-twitter-friends-or-followers-for-free-b9d5ac23812"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">如何免费下载 Twitter 好友或关注者</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">Python 中的简单指南</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo kp oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-bulk-access-arxiv-full-text-preprints-58026e19e8ef"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">如何批量获取 arXiv 全文预印本</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">使用 Python3 和 MacOS X 命令行</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="or l ol om on oj oo kp oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/collecting-data-from-the-new-york-times-over-any-period-of-time-3e365504004"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">从《纽约时报》收集任何时期的数据</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">Python 中的简单指南</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="os l ol om on oj oo kp oa"/></div></div></a></div></div></div>    
</body>
</html>