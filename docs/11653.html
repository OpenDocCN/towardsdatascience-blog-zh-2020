<html>
<head>
<title>Generating Poisson Distributions with Shiny Web Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用闪亮的 Web 应用生成泊松分布</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generating-poisson-distributions-with-shiny-web-apps-9c3352a006ab?source=collection_archive---------47-----------------------#2020-08-12">https://towardsdatascience.com/generating-poisson-distributions-with-shiny-web-apps-9c3352a006ab?source=collection_archive---------47-----------------------#2020-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4cb9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用闪亮的网络应用程序进行交互式概率分析</h2></div><p id="bc3a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">泊松分布使我们能够想象在给定的时间间隔内一个事件发生的概率。这些事件必须相互独立。</p><p id="bffc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这方面的一些例子可能是:</p><ul class=""><li id="10c2" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">一个人每周收到的电子邮件数量(假设电子邮件相互独立到达)</li><li id="6422" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">给定时间间隔内极端天气事件的数量，例如一个国家每 10 年发生一次异常寒潮的概率</li><li id="a76c" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated">一家公司在一周内的产品销售数量</li></ul><h1 id="0ee5" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">例子</h1><p id="ae7b" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">让我们以酒店取消为例(Antonio、Almeida 和 Nunes 的数据和研究，可从下面的参考资料部分获得)。</p><p id="5caf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设在给定的一周内，酒店会有一定数量的预订取消。根据研究中的第一个数据集(H1)，酒店预计每周平均有 115 次预订取消。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi mp"><img src="../Images/5a19efc648c4842a0c3b8236ee68e0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8sYtutGYDn065ZclchbZA.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">来源:闪亮的网络应用</p></figure><p id="bfd9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从上面我们可以看到，酒店预计每周最少有 90 次取消预订，最多有 150 次取消预订。</p><p id="c585" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，一个闪亮的 Web 应用程序的优势在于，它允许我们动态地分析一系列不同的场景，由此可以操纵<strong class="kk iu"> l </strong>(我们的λ值)。</p><p id="c125" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，研究中的另一家酒店(H2)平均每周有 287 次取消预订。让我们更改 lambda 值，看看这会如何影响分析。</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nf"><img src="../Images/0a1049b6d87a27b58dbfa1ea6bbeaba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BLQReMmjxo7XXQbDdLtbw.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">来源:闪亮的网络应用</p></figure><p id="5878" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，我们看到每周大约有 230–330 次取消。这将允许酒店经理对每周可预期的酒店取消的大致数量进行概率评估。</p><p id="ead2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也就是说，上述泊松分布可用于分析任何问题——只需知道<em class="ng">λ</em>值，并在必要时调整 x 轴，以说明特定数据集的整体值范围。</p><p id="804b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你为什么不自己试试这个模拟？</p><h1 id="925c" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">创建您自己的闪亮网络应用程序</h1><p id="9b9d" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">要生成闪亮的 Web 应用程序，请执行以下操作:</p><ol class=""><li id="505c" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld nh lk ll lm bi translated">打开 RStudio，点击<strong class="kk iu">文件- &gt;新文件- &gt;闪亮 Web App </strong>。</li><li id="e789" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld nh lk ll lm bi translated">选择<strong class="kk iu">多文件</strong>并为您的应用程序指定一个名称。</li><li id="843b" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld nh lk ll lm bi translated">在<strong class="kk iu"> ui 中。R </strong>，粘贴以下内容:</li></ol><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="e33c" class="nn lt it nj b gy no np l nq nr">library(shiny)</span><span id="5854" class="nn lt it nj b gy ns np l nq nr"># Define UI for application that draws a Poisson probability plot<br/>shinyUI(fluidPage(<br/>  <br/>  # Application title<br/>  titlePanel("Poisson Distribution"),<br/>  <br/>  # Sidebar with a slider input for value of lambda<br/>  sidebarLayout(<br/>    sidebarPanel(<br/>      sliderInput("l",<br/>                  "l:",<br/>                  min = 1,<br/>                  max = 400,<br/>                  value = 1)<br/>    ),<br/>    <br/>    # Show a plot of the generated probability plot<br/>    mainPanel(<br/>      plotOutput("ProbPlot")<br/>    )<br/>  )<br/>))</span></pre><p id="939a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.在<strong class="kk iu">服务器中。R </strong>，粘贴以下内容:</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="035e" class="nn lt it nj b gy no np l nq nr">library(shiny)<br/>library(ggplot2)<br/>library(scales)</span><span id="516d" class="nn lt it nj b gy ns np l nq nr"># Shiny Application<br/>shinyServer(function(input, output) {<br/>  <br/>  # Reactive expressions<br/>  output$ProbPlot &lt;- renderPlot({<br/>    <br/>    # generate lambda based on input$lambda from ui.R<br/>    l = input$l<br/>    x &lt;- 0:400<br/>    <br/>    # generate trials based on lambda value<br/>    muCalculation &lt;- function(x, lambda) {dpois(x, l=lambda)}<br/>    probability_at_lambda &lt;- sapply(input$x, muCalculation, seq(1, 400, 0.01))<br/>    # draw the probability<br/>    plot(x, dpois(x, l), type='h',lwd=3)<br/>    title(main="Poisson Distribution")<br/>  })<br/>  <br/>})</span></pre><p id="03b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.完成后，点击控制台右上角的<strong class="kk iu">运行应用</strong>:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nt"><img src="../Images/a1084d61438fad70992fc9fd93c67a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*py55UwZYHm8k3MDTjidDKw.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">资料来源:RStudio</p></figure><p id="e75c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您将看到一个动态泊松分布，其中<strong class="kk iu"> l (lambda) </strong>可以动态调整:)</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nf"><img src="../Images/0a1049b6d87a27b58dbfa1ea6bbeaba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BLQReMmjxo7XXQbDdLtbw.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">来源:闪亮的网络应用</p></figure><p id="70f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，假设你想调整音阶。如果您正在处理一个小得多的问题，例如，您平均每天收到 10 封电子邮件，并且想知道这个时间间隔的最小值和最大值，该怎么办？</p><p id="8a64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 ui 中。r，我们把最大 lambda 值设为 20。</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="7913" class="nn lt it nj b gy no np l nq nr"># Sidebar with a slider input for value of lambda<br/>  sidebarLayout(<br/>    sidebarPanel(<br/>      sliderInput("l",<br/>                  "l:",<br/>                  min = 1,<br/>                  max = 20,<br/>                  value = 1)</span></pre><p id="1b63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在服务器中。r，<strong class="kk iu"> x </strong>的值和顺序可以调整。让我们将最大范围设置为 20。</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="b197" class="nn lt it nj b gy no np l nq nr">x &lt;- 0:20<br/>probability_at_lambda &lt;- sapply(input$x, muCalculation, seq(1, 20, 0.01))</span></pre><p id="2114" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设<strong class="kk iu"> l = 10 </strong>，下面是现在的分布图:</p><figure class="mq mr ms mt gt mu gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi nu"><img src="../Images/afd973a68e5a4d923bbd37918e91f81a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5YUXUnGvlDdTwuzEbcUm_A.png"/></div></div><p class="nb nc gj gh gi nd ne bd b be z dk translated">来源:闪亮的网络应用</p></figure><h1 id="6d44" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">结论</h1><p id="1b71" class="pw-post-body-paragraph ki kj it kk b kl mk ju kn ko ml jx kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">泊松分布在分析给定时间间隔内一定数量的事件发生的概率时非常有用——当我们可以使用闪亮的 Web 应用程序进行动态分析时甚至更有用！</p><p id="5241" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">非常感谢您阅读本文，感谢您的任何问题或反馈。</p><p id="94b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以找到我的 GitHub(MGCodesandStats/shiny-we b-apps)的链接，其中包含下面的代码脚本，以及其他有用的参考资料。</p><p id="ffc6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ng">免责声明:本文是在“原样”的基础上编写的，没有担保。本文旨在提供数据科学概念的概述，不应以任何方式解释为专业建议。</em></p><h1 id="7c9f" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">参考</h1><ul class=""><li id="9e6f" class="le lf it kk b kl mk ko ml kr nv kv nw kz nx ld lj lk ll lm bi translated"><a class="ae ny" href="https://www.researchgate.net/publication/309379684_Using_Data_Science_to_Predict_Hotel_Booking_Cancellations" rel="noopener ugc nofollow" target="_blank">安东尼奥、阿尔梅达、努内斯，2016。使用数据科学预测酒店预订取消</a></li><li id="cb13" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae ny" href="https://github.com/MGCodesandStats/hotel-modelling" rel="noopener ugc nofollow" target="_blank">GitHub:MGCodesandStats/hotel-modeling</a></li><li id="ed7d" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae ny" href="https://github.com/MGCodesandStats/shiny-web-apps" rel="noopener ugc nofollow" target="_blank">GitHub:MGCodesandStats/shiny-web-apps</a></li><li id="8382" class="le lf it kk b kl ln ko lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><a class="ae ny" href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/Poisson.html" rel="noopener ugc nofollow" target="_blank"> R 文档:泊松分布</a></li></ul></div></div>    
</body>
</html>