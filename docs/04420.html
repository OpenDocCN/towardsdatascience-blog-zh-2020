<html>
<head>
<title>How to Use COVID19Py</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用COVID19Py</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-covid19py-c3014475283c?source=collection_archive---------58-----------------------#2020-04-20">https://towardsdatascience.com/how-to-use-covid19py-c3014475283c?source=collection_archive---------58-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/91b1ba0e65ff61ac91aff52d5f7a3087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mOHvF9StOr2zg4uC"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><div class=""/><div class=""><h2 id="bc25" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">使用独特的Python包获取最新的冠状病毒数据</h2></div><p id="16ae" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在整个COVID19疫情中，获取和分析足够的数据一直是个问题。到目前为止，像约翰·霍普金斯大学系统科学与工程中心(JHU·CSSE)和《纽约时报》( NYT)这样的机构在向公众提供时间序列和非结构化数据方面做得非常出色。现在，COVID19Py的创造者们更进一步，为<a class="ae jg" href="https://github.com/ExpDev07/coronavirus-tracker-api" rel="noopener ugc nofollow" target="_blank"> @ExpDev07的REST API </a>提供了一个极其有用的包装器。该软件包允许用户访问和跟踪受任何冠状病毒影响的人数(如新冠肺炎、新型冠状病毒等)。)</p><p id="44de" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文旨在向您简要介绍COVID19Py 0.3.0中的基本功能和用例。更多信息，请参考API的<a class="ae jg" href="https://github.com/ExpDev07/coronavirus-tracker-api/blob/master/README.md#picking-data-source" rel="noopener ugc nofollow" target="_blank"> Github库</a></p><h1 id="8570" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">安装和基础知识</h1><p id="dcfe" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在获取数据之前，有几行重要的代码需要运行。</p><h2 id="610a" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">安装和导入</h2><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="7e04" class="mr lv jj ni b gy nm nn l no np"># Install COVID19 Package in Terminal<br/>$ pip install COVID19Py</span><span id="a474" class="mr lv jj ni b gy nq nn l no np">In [1]: import COVID19Py</span></pre><h2 id="7419" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">创建一个新实例来访问数据源</h2><p id="2eef" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><strong class="la jk"> JHU <br/> </strong>默认数据源来自位于CSSE JHU的全球数据库。如果您想使用该数据，则不需要<code class="fe nr ns nt ni b">data_source</code>参数。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="28a4" class="mr lv jj ni b gy nm nn l no np">In [2]: covid19 = COVID19Py.COVID19()</span></pre><p id="bdb7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> CSBS <br/></strong></p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="21a2" class="mr lv jj ni b gy nm nn l no np">In [3]: covid19 = COVID19Py.COVID19(data_source="csbs")</span></pre><p id="eb04" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> NYT <br/> </strong>同样，《纽约时报》也发布了美国冠状病毒病例累计数的数据文件。您可以使用<strong class="la jk"> </strong> <code class="fe nr ns nt ni b">data_source = "nyt”</code>参数提取美国县级时间序列</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="e731" class="mr lv jj ni b gy nm nn l no np">In [3]: covid19 = COVID19Py.COVID19(data_source="nyt")</span></pre><h1 id="61cd" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">样本响应</h1><p id="996f" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">接下来，重要的是要记住所有的输出都是字典格式的。如果您想在pandas中使用数据框，那么您必须采取适当的步骤来实现。</p><h2 id="7e8c" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">获取案例总数</h2><p id="2f55" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">当您访问实例中的所有数据时，您最终会得到一个带有两个键的输出:<code class="fe nr ns nt ni b">"latest"</code>和<code class="fe nr ns nt ni b">"locations"</code>。最新键显示最近确诊病例、死亡和康复患者的数量。location键包含每个国家的最新数据，包括纬度、经度和人口数量。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="225f" class="mr lv jj ni b gy nm nn l no np">In [4]: data = covid19.getAll()</span><span id="2a76" class="mr lv jj ni b gy nq nn l no np"># Get same output with timelines as well<br/>In [4]: data = covid19.getAll(timelines=<strong class="ni jk">True</strong>)</span></pre><h2 id="149b" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">仅获取最新计数</h2><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="2a42" class="mr lv jj ni b gy nm nn l no np">In [5]: latest = covid19.getLatest()</span><span id="6f25" class="mr lv jj ni b gy nq nn l no np">Out [5]: {'confirmed': 2401378, 'deaths': 165043, 'recovered': 0}</span></pre><p id="7cea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运筹学</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="c7b4" class="mr lv jj ni b gy nm nn l no np">In [5]: data = covid19.getAll()<br/>        latest = data["latest"]</span><span id="0fb1" class="mr lv jj ni b gy nq nn l no np">Out [5]: {'confirmed': 2401378, 'deaths': 165043, 'recovered': 0}</span></pre><h2 id="588a" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">仅获取位置值</h2><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="9c7b" class="mr lv jj ni b gy nm nn l no np">In [6]: location = covid19.getLocations()</span><span id="1a1f" class="mr lv jj ni b gy nq nn l no np">Out [6]:</span><span id="836a" class="mr lv jj ni b gy nq nn l no np">[{'id': 0,<br/>  'country': 'Afghanistan',<br/>  'country_code': 'AF',<br/>  'country_population': 37172386,<br/>  'province': '',<br/>  'last_updated': '2020-04-20T11:01:05.072895Z',<br/>  'coordinates': {'latitude': '33.0', 'longitude': '65.0'},<br/>  'latest': {'confirmed': 996, 'deaths': 33, 'recovered': 0}},<br/> {'id': 1,<br/>  'country': 'Albania',<br/>  'country_code': 'AL',<br/>  'country_population': 2866376,<br/>  'province': '',<br/>  'last_updated': '2020-04-20T11:01:05.092994Z',<br/>  'coordinates': {'latitude': '41.1533', 'longitude': '20.1683'},<br/>  'latest': {'confirmed': 562, 'deaths': 26, 'recovered': 0}},<br/>   ...<br/>   ...</span></pre><p id="86d7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运筹学</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="57e9" class="mr lv jj ni b gy nm nn l no np">In [6]: data = covid19.getAll()<br/>        latest = data["location"]</span></pre><p id="77c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过使用<code class="fe nr ns nt ni b">rank_by</code>属性，您甚至可以根据<code class="fe nr ns nt ni b">'confirmed'</code>、<code class="fe nr ns nt ni b">'deaths'</code>和<code class="fe nr ns nt ni b">'recovered'</code>的数量对位置进行排序</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="871b" class="mr lv jj ni b gy nm nn l no np">In [6]: latest = covid19.getLocations(rank_by='recovered')</span></pre><h2 id="4840" class="mr lv jj bd lw ms mt dn ma mu mv dp me lh mw mx mg ll my mz mi lp na nb mk nc bi translated">选择特定国家</h2><p id="536e" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">如果您只想查看给定国家的最新案例，那么您只需知道国家代码即可</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="b1c8" class="mr lv jj ni b gy nm nn l no np">In [7]: location = covid19.getLocationByCountryCode("US")</span><span id="8bf5" class="mr lv jj ni b gy nq nn l no np"># Get same output with timelines as well<br/>In [7]: location = covid19.getLocationByCountryCode("US",    <br/>                                                    timelines=<strong class="ni jk">True</strong>)</span><span id="7038" class="mr lv jj ni b gy nq nn l no np"># Using the location id instead of country code<br/>In [7]: location = covid19.getLocationById(39)</span></pre><h1 id="7fb1" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">结论</h1><p id="1030" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">越多的公司和组织能够收集和存储冠状病毒数据，我们就能越早找到抗击疫情的模式和方法。那里的大部分数据是跟踪数据，这意味着它只是跟踪确认、死亡和恢复的数量。NYT和Twitter等一些公司已经发布了用于情感分析的非结构化数据，医疗机构也已经能够发布用于诊断和识别的胸片。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="a5ea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="ob">编者按:</em> </strong> <em class="ob"> </em> <a class="ae jg" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="ob">走向数据科学</em> </a> <em class="ob">是一份以数据科学和机器学习研究为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae jg" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="ob">这里</em> </a> <em class="ob">。</em></p></div></div>    
</body>
</html>