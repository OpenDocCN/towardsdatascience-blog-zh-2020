<html>
<head>
<title>Building a Data Warehouse: Basic Architectural principles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建数据仓库:基本架构原则</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-data-warehouse-basic-architectural-principles-66bd7059ffd0?source=collection_archive---------6-----------------------#2020-02-10">https://towardsdatascience.com/building-a-data-warehouse-basic-architectural-principles-66bd7059ffd0?source=collection_archive---------6-----------------------#2020-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4959" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" rel="noopener" target="_blank" href="/what-is-a-data-warehouse-basic-architecture-ea2cd12c9bb0">什么是数据仓库:基本架构</a></h2><div class=""/><div class=""><h2 id="fcdd" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一种简化数据仓库的方法</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4f1799a8d671826b29940087144c0a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0ozC4G2IbzM9B2X0"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@szolkin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">谢尔盖·佐尔金</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="dad7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据仓库理论有很多有用的资源。然而，如此大量的资源有时会让人不知所措——或者至少在我们开始构建数据仓库时是这样。</p><p id="02bd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最初，当我们开始塑造我们的数据仓库架构时，我们问的第一个问题是:<em class="me">什么是数据仓库的正确架构？</em>然后，经过一番研究，我们意识到<em class="me">没有对或错的架构。这总是取决于你的需求。</em></p><p id="0f4c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">尽管如此，在开始构建数据仓库时，您应该记住一些业内公认的有用的架构原则。特别是，在构建我们的数据仓库架构时，三个基本原则对我们帮助很大:</p><ul class=""><li id="28ea" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated"><strong class="lk jd">构建解耦系统</strong>、<em class="me">即</em>，当涉及到数据仓库时，不要试图将所有流程放在一起。一种尺寸不适合所有人。因此，理解过程的本质，并为正确的工作使用正确的工具。</li><li id="e4ad" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><strong class="lk jd">实施功能性数据管道</strong>、<em class="me">即</em>来自管道的数据应易于重现——<em class="me">例如</em>，如果您想要重新运行一个流程，您应确保它将始终产生相同的结果。这可以通过实施<a class="ae lh" href="https://medium.com/@maximebeauchemin/functional-data-engineering-a-modern-paradigm-for-batch-data-processing-2327ec32c42a" rel="noopener">功能数据工程范例</a>来实现。</li><li id="ad5b" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><strong class="lk jd">实现一个不可变的暂存区</strong>，<em class="me">即</em>，数据应该存储在一个不可变的暂存区。从那里，数据应该被转换并加载到您的数据仓库中。</li></ul><p id="d87a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们开始遵循这些原则之后，数据仓库过程变得简单了一些。因此，在这篇文章中，我们想与你分享一些关于这种架构原则的事情，以及它们如何帮助我们建立数据仓库的架构。此外，我们希望与您分享我们在 AWS 中构建数据仓库的首次尝试。</p><div class="mt mu gp gr mv mw"><a rel="noopener follow" target="_blank" href="/what-is-a-data-warehouse-basic-architecture-ea2cd12c9bb0"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd jd gy z fp nb fr fs nc fu fw jc bi translated">什么是数据仓库:基本架构</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">数据仓库主要概念介绍</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk lb mw"/></div></div></a></div><h1 id="5ade" class="nl nm it bd nn no np nq nr ns nt nu nv ki nw kj nx kl ny km nz ko oa kp ob oc bi translated">第一个原则:构建解耦系统</h1><p id="f903" class="pw-post-body-paragraph li lj it lk b ll od kd ln lo oe kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">该原则遵循<a class="ae lh" href="https://en.wikipedia.org/wiki/Separation_of_concerns" rel="noopener ugc nofollow" target="_blank">关注点分离原则</a>。它基于这样一个假设，即每个系统都应该以这样一种方式处理一个问题，即这个问题应该被系统本身封装起来。</p><p id="af6d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">具体来说，数据仓库可以分为四个关注点，可以认为是数据管道的一部分:<em class="me">收集、存储、处理/分析和消费— </em>查看 Siva Raghupathy 的<a class="ae lh" href="https://www.youtube.com/watch?v=a3713oGB6Zk" rel="noopener ugc nofollow" target="_blank">演讲</a>了解更多信息<em class="me">。</em> <strong class="lk jd">因此，作为我们数据管道一部分的每个系统都应该封装这四个关注点之一的职责</strong>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/3ded808757400e6659c3f747fcbdfdf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/0*lv9vD-68JE83XnaZ"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Siva Raghupathy 在<a class="ae lh" href="https://www.slideshare.net/AmazonWebServices/abd201big-data-architectural-patterns-and-best-practices-on-aws/9" rel="noopener ugc nofollow" target="_blank">幻灯片上的插图</a></p></figure><h1 id="6553" class="nl nm it bd nn no np nq nr ns nt nu nv ki nw kj nx kl ny km nz ko oa kp ob oc bi translated">第二个原则:实现功能性数据管道</h1><p id="17fc" class="pw-post-body-paragraph li lj it lk b ll od kd ln lo oe kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">这个原则基于<a class="ae lh" href="https://medium.com/@maximebeauchemin/functional-data-engineering-a-modern-paradigm-for-batch-data-processing-2327ec32c42a" rel="noopener">函数式数据工程范例</a>，这是一个将函数式编程范例引入数据工程学科的尝试。</p><p id="6733" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">实现功能数据管道的基础是在<strong class="lk jd"> <em class="me">纯任务</em>之上定义数据流程。</strong>根据<a class="ae lh" href="https://medium.com/u/9f4d525c99e2?source=post_page-----61d3bae486b0----------------------" rel="noopener"> Maxime Beauchemin </a>:</p><blockquote class="oj"><p id="c2db" class="ok ol it bd om on oo op oq or os md dk translated">“一个纯任务应该是<a class="ae lh" href="https://en.wikipedia.org/wiki/Deterministic_algorithm" rel="noopener ugc nofollow" target="_blank">确定性的</a>和<a class="ae lh" href="https://en.wikipedia.org/wiki/Idempotence" rel="noopener ugc nofollow" target="_blank">幂等的</a>，这意味着它每次运行或重新运行都会产生相同的结果”</p></blockquote><p id="013f" class="pw-post-body-paragraph li lj it lk b ll ot kd ln lo ou kg lq lr ov lt lu lv ow lx ly lz ox mb mc md im bi translated">因此，任何提取、转换或加载过程都应该遵循纯任务的标准——查看这篇<a class="ae lh" rel="noopener" target="_blank" href="/implementing-the-functional-data-engineering-paradigm-in-data-load-processes-by-using-airflow-61d3bae486b0">帖子</a>了解更多信息。</p><h1 id="8689" class="nl nm it bd nn no np nq nr ns nt nu nv ki nw kj nx kl ny km nz ko oa kp ob oc bi translated">第三个原则:实现不可变的临时区域</h1><p id="a2c2" class="pw-post-body-paragraph li lj it lk b ll od kd ln lo oe kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">这一原则基于在数据管道上实现一个临时区域，理想情况下，数据应该以其原始形式存储，或者接近其原始形式。</p><p id="b098" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们希望使我们的资源不变，这样就可以确保数据的再现性。根据 Maxime Beauchemin 的说法，不可变暂存区原则是再现性的关键，因为从理论上来说，<strong class="lk jd">它确保了从零开始重新计算整个数据仓库的状态是可能的。</strong></p><h1 id="ca99" class="nl nm it bd nn no np nq nr ns nt nu nv ki nw kj nx kl ny km nz ko oa kp ob oc bi translated">个案研究</h1><p id="ffd8" class="pw-post-body-paragraph li lj it lk b ll od kd ln lo oe kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">数据管道架构是基于 Siva Raghupathy 提出的关注点划分而设计的:<em class="me">收集</em>、<em class="me">存储</em>、<em class="me">处理/分析</em>，以及<em class="me">消费。</em>构建解耦数据管道的问题在于，编排<em class="me">和</em>可能会很复杂，因此，通过这种方式，我们添加了这一流程，作为设置数据管道架构时需要牢记的额外关注点。</p><p id="18ae" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下一张图中，我们展示了这五个问题如何塑造我们的数据管道架构。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/7131aeca758cf27173425d52fd5287c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*ase2ortBwmXwN-8DVlcvIw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">AWS 中的数据仓库体系结构——作者的实现</p></figure><p id="b05a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据管道架构以这种方式解决了上述问题:</p><ul class=""><li id="9c58" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated"><strong class="lk jd">收集:</strong>使用<a class="ae lh" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Spark </a>从本地数据库中提取数据。然后，它被加载到<a class="ae lh" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> AWS S3 </a>。</li><li id="2497" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">存储:数据以原始形式存储在 S3。它作为数据仓库的一个不可变的暂存区<strong class="lk jd"> </strong>。</li><li id="8490" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><strong class="lk jd">处理/分析:</strong>使用<a class="ae lh" href="https://docs.getdbt.com/" rel="noopener ugc nofollow" target="_blank"> DBT </a>转换数据并插入<a class="ae lh" href="https://aws.amazon.com/redshift/" rel="noopener ugc nofollow" target="_blank"> AWS 红移</a>。请记住，DBT 只是作为在数据仓库内部执行转换的工具。一种解决方法是通过红移光谱外部表访问 AWS S3 数据，这样就可以使用 DBT 在红移中转换和具体化这些数据。</li><li id="1210" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><strong class="lk jd">消费:</strong>用户通过不同的 BI 工具消费数据，如<a class="ae lh" href="https://www.metabase.com/" rel="noopener ugc nofollow" target="_blank">元数据库</a>和<a class="ae lh" href="https://www.tableau.com/" rel="noopener ugc nofollow" target="_blank">表格</a>。</li><li id="85b1" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><strong class="lk jd">编排:</strong>数据流程由气流编排。它允许解决人们在编制解耦系统时可能遇到的大多数问题。</li></ul><p id="ab67" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，在整个数据管道中实施功能数据工程范例。我们确保所有数据流程(如、数据加载和数据转换)都是在纯任务的基础上定义的。因此，通过这种方式，我们确保了它们的确定性和幂等性——查看这篇<a class="ae lh" rel="noopener" target="_blank" href="/implementing-the-functional-data-engineering-paradigm-in-data-load-processes-by-using-airflow-61d3bae486b0">帖子</a>了解更多信息。</p><h1 id="c3d1" class="nl nm it bd nn no np nq nr ns nt nu nv ki nw kj nx kl ny km nz ko oa kp ob oc bi translated">结论</h1><p id="a0c3" class="pw-post-body-paragraph li lj it lk b ll od kd ln lo oe kg lq lr of lt lu lv og lx ly lz oh mb mc md im bi translated">我们的目标是这篇文章中的信息可以让你简化数据仓库的过程。</p><p id="11ab" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">特别是，我们相信这些<em class="me">基本架构原则</em>可以帮助人们开始他们的过程。然而，请记住这篇文章中的信息是对整个数据仓库理论的一部分的简化。</p><p id="526e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你想深入了解数据仓库的理论，别忘了查看 Ralph Kimball 的数据仓库工具包。这本书是最受认可的关于数据仓库的书籍之一。</p><p id="2717" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，您可以在这里找到一些参考资料，帮助理解一些超出本文范围的内容:</p><ul class=""><li id="a6e7" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/what-is-a-data-warehouse-basic-architecture-ea2cd12c9bb0">什么是数据仓库:基本架构</a></li><li id="0c7a" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" href="https://dataschool.com/data-governance/" rel="noopener ugc nofollow" target="_blank">云数据管理</a></li><li id="3dda" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/building-a-data-warehouse-pipeline-basic-concepts-roadmap-d14032890ab6">数据仓库管道:基本概念&amp;路线图</a></li><li id="550f" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" href="https://www.slideshare.net/AmazonWebServices/abd201big-data-architectural-patterns-and-best-practices-on-aws?qid=50b8b8c9-ebf7-4c12-9c5c-acde09a1547f&amp;v=&amp;b=&amp;from_search=1" rel="noopener ugc nofollow" target="_blank">Abd 201-AWS 上的大数据架构模式和最佳实践</a></li><li id="19aa" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" href="https://es.slideshare.net/AmazonWebServices/building-data-lakes-and-analytics-on-aws-patterns-and-best-practices-bda305-chicago-aws-summit" rel="noopener ugc nofollow" target="_blank">在 AWS 上构建数据湖和分析；模式和最佳实践— BDA305 —芝加哥 AWS 峰会</a></li><li id="fec1" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" href="https://medium.com/@maximebeauchemin/functional-data-engineering-a-modern-paradigm-for-batch-data-processing-2327ec32c42a" rel="noopener">功能数据工程——批量数据处理的现代范例</a></li><li id="947c" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/implementing-the-functional-data-engineering-paradigm-in-data-load-processes-by-using-airflow-61d3bae486b0">通过使用气流在数据加载过程中实施功能性数据工程范例</a></li><li id="0b2c" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/generalizing-data-load-processes-with-airflow-a4931788a61f">用气流概括数据加载过程</a></li><li id="8554" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/building-a-modern-batch-data-warehouse-without-updates-7819bfa3c1ee">构建一个不需要更新的现代批量数据仓库</a></li></ul><p id="5faf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们希望这些信息对你有用。</p><p id="f470" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读到最后。</p><p id="6c7e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下期帖子再见！</p></div><div class="ab cl pb pc hx pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="im in io ip iq"><p id="ef9f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="me">如果你想随时更新我的作品，</em> <strong class="lk jd"> <em class="me">请加入我的</em> </strong> <a class="ae lh" href="https://metadatacommunity.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> <em class="me">简讯</em> </strong> </a> <strong class="lk jd"> <em class="me">！偶尔，我会和我的读者分享一些东西。如果你加入我会很感激:)</em></strong></p><div class="mt mu gp gr mv mw"><a href="https://ajhenaor.medium.com/interested-in-data-warehousing-424b49ec97e4" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd jd gy z fp nb fr fs nc fu fw jc bi translated">对数据仓库感兴趣？</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">我已经写了几篇关于它的文章。这就是如何阅读它们！</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ajhenaor.medium.com</p></div></div><div class="nf l"><div class="pi l nh ni nj nf nk lb mw"/></div></div></a></div></div></div>    
</body>
</html>