<html>
<head>
<title>Setting Up Jupyter on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS上设置Jupyter</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setting-up-jupyter-on-aws-6b3018dff41f?source=collection_archive---------21-----------------------#2020-03-15">https://towardsdatascience.com/setting-up-jupyter-on-aws-6b3018dff41f?source=collection_archive---------21-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6071" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个可脚本化的命令行列表，用于在AWS中安全、经济高效地部署Jupyter，并增加了练习</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d509973432013772b56a733993e7f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WyNQ6g_Pp3RRgWjbXwDuMA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Jupyter_logo.svg" rel="noopener ugc nofollow" target="_blank">commons.wikimedia.org</a>和<a class="ae ky" href="https://a0.awsstatic.com/libra-css/images/logos/aws_logo_smile_1200x630.png" rel="noopener ugc nofollow" target="_blank">aws.amazon.com</a></p></figure><p id="2cbc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">在我之前的帖子中，我给出了在Google Cloud </em>  <em class="lv">上设置Jupyter的相同说明——如果你更喜欢Google Cloud，可以去看看那篇文章。</em></p><p id="51de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS是三巨头之一(猜猜，其他是谁？)强大的当代云环境，为数据科学家和数据工程师提供了大量很酷的服务和工具。作为一名数据科学家，当您在本地笔记本电脑上运行分析项目时，您经常会面临技术资源方面的挑战，比如下载大型数据集的网络速度、磁盘大小限制、CPU能力限制或内存限制。在当代的云环境中，对于这些障碍，您基本上都有简单的解决方案。您的网络连接速度很快。你总是可以用小的、精益的和吝啬的资源开始任何任务。每当你面临磁盘存储问题时，你只需点击几下鼠标，就可以租用一个更大的磁盘。或者你可以将数据集加载到S3，然后通过Amazon Athena查询。或者使用一些其他合适的存储服务来进行成本有效的处理。CPU能力太小？不用担心，将您的实例类型更改为具有更多CPU的类型(当您不再需要它时，可以立即缩减)。内存不足？几次点击之后，你就有了更多的内存，同样，如果你不再需要它，你可以把它拿回来。对于分布式计算来说，任何类型的集群形成通常也只需点击几下鼠标，这时您只需知道要做什么:启动集群以执行更繁重的计算任务，将结果保存在集群外部的某个存储服务中，并关闭集群以防止其闲置(并产生不必要的成本)。</p><p id="1a12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你有使用Jupyter Notebook的经验，并且对类似Debian的环境感到舒适，那么你可能会发现下面的说明很有帮助。</p><h1 id="342f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">安装并设置AWS CLI v2(如果尚未安装)</h1><p id="3fb4" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">如果您还没有设置AWS命令行界面(CLI ),请进行设置。安装CLI并为其设置访问密钥，使其能够正常工作。其余说明假设您已经设置了CLI和访问密钥。</p><p id="6644" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">说明如下:</p><p id="ab77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.<a class="ae ky" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank">安装CLI </a></p><p id="f29f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.<a class="ae ky" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration" rel="noopener ugc nofollow" target="_blank">设置访问键</a></p><p id="bc89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从这一点开始，一切都可以从本地计算机的命令行shell界面进行。对我来说，下面提供的说明既适用于Windows上的Git Bash，也适用于Debian Linux。</p><h1 id="179e" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">创建一个密钥对(如果还没有)</h1><p id="d02f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">3.根据需要调整密钥名、区域和输出文件名(区域必须与您计划的Jupyter VM位置相匹配，并且需要chmod 400，否则Debian ssh客户端会阻止它的使用):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="506f" class="my lx it mu b gy mz na l nb nc">aws ec2 create-key-pair \<br/>        --key-name my-jupyter-kp \<br/>        --region eu-north-1 \<br/>        --query 'KeyMaterial' \<br/>        --output text \<br/>    &gt; my_jupyter_private_key.pem</span><span id="d965" class="my lx it mu b gy nd na l nb nc">chmod 400 my_jupyter_private_key.pem</span></pre><h1 id="c54b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">启动并设置合适的虚拟机</h1><p id="35c5" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">3.创建并运行虚拟机。我在这里使用<code class="fe ne nf ng mu b">t3.micro</code>作为实例类型，因为在编写这些指令时，<code class="fe ne nf ng mu b">t3.micro</code>是符合自由层条件的(您可以根据自己的使用需求随意切换，但要注意成本):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="a8cc" class="my lx it mu b gy mz na l nb nc">IMAGE_ID=`aws ec2 describe-images \<br/>        --owners aws-marketplace \<br/>        --filters "Name=name,Values=debian-10-amd64*" \<br/>        --query 'sort_by(Images, &amp;CreationDate)[-1].ImageId' \<br/>        --output text`</span><span id="6be1" class="my lx it mu b gy nd na l nb nc">AWS_MY_JUPYTER_INSTANCE_ID=`aws ec2 run-instances \<br/>        --image-id $IMAGE_ID \<br/>        --count 1 \<br/>        --instance-type t3.micro \<br/>        --key-name my-jupyter-kp \<br/>        --tag-specifications 'ResourceType=instance,\<br/>                Tags=[{Key=Name,Value=my-jupyter-vm}]' \<br/>        --query 'Instances[0].InstanceId' \<br/>        --placement AvailabilityZone=eu-north-1a \<br/>        --output text`</span></pre><p id="6d5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.等待虚拟机准备就绪。在我的例子中，在状态检查开始在新创建的虚拟机的EC2仪表板UI上显示“2/2检查通过”之前，花了2分多钟。</p><p id="5d59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.<strong class="lb iu">注意:</strong>从这里开始，我们假设<code class="fe ne nf ng mu b">AWS_MY_JUPYTER_INSTANCE_ID</code>变量成立。如果出于某种原因，您的shell终端关闭了，然后您重新打开它，您需要重新初始化该变量，以便下面的命令能够工作。我建议您备份您的实例ID(这样，如果需要，您可以稍后用<code class="fe ne nf ng mu b">AWS_MY_JUPYTER_INSTANCE_ID=&lt;your instance id&gt;</code>重新初始化它):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="70ea" class="my lx it mu b gy mz na l nb nc"># Take a backup note of the value of this variable:<br/>echo $AWS_MY_JUPYTER_INSTANCE_ID</span></pre><p id="5feb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.我们需要设置适当的安全组(防火墙规则)来启用ssh连接:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="0a0b" class="my lx it mu b gy mz na l nb nc">VPC_ID=`aws ec2 describe-instances \<br/>        --instance-ids $AWS_MY_JUPYTER_INSTANCE_ID \<br/>        --query 'Reservations[0].Instances[0].VpcId' \<br/>        --output text`</span><span id="a606" class="my lx it mu b gy nd na l nb nc">SG_ID=`aws ec2 create-security-group \<br/>        --group-name my-jupyter-sg \<br/>        --description "My Jupyter security group" \<br/>        --vpc-id $VPC_ID \<br/>        --query ‘GroupId’ \<br/>        --output text`</span><span id="3ad1" class="my lx it mu b gy nd na l nb nc">aws ec2 authorize-security-group-ingress \<br/>        --group-id $SG_ID \<br/>        --protocol tcp \<br/>        --port 22 \<br/>        --cidr 0.0.0.0/0</span><span id="2ac3" class="my lx it mu b gy nd na l nb nc">aws ec2 modify-instance-attribute \<br/>        --instance-id $AWS_MY_JUPYTER_INSTANCE_ID \<br/>        --groups $SG_ID</span></pre><p id="ae10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">7.测试ssh连接是否正常工作(对ssh指纹问题回答“是”):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="fc5a" class="my lx it mu b gy mz na l nb nc">DNS_NAME=`aws ec2 describe-instances \<br/>        --instance-ids $AWS_MY_JUPYTER_INSTANCE_ID \<br/>        --query 'Reservations[0].Instances[0].PublicDnsName' \<br/>        --output text`</span><span id="4597" class="my lx it mu b gy nd na l nb nc">ssh -i my_jupyter_private_key.pem admin@$DNS_NAME</span><span id="c7be" class="my lx it mu b gy nd na l nb nc">exit # to get back to your local compyter prompt</span></pre><p id="a89a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">8.为了能够在以后方便地重新启动虚拟机(这里我们假设我们上面创建的私钥文件在当前工作目录中，并且一直在那里—如果密钥文件的位置不同，那么适当地调整这里构造的别名):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="94a1" class="my lx it mu b gy mz na l nb nc">echo &gt;&gt; ~/.bashrc</span><span id="a64f" class="my lx it mu b gy nd na l nb nc">echo "AWS_MY_JUPYTER_INSTANCE_ID=$AWS_MY_JUPYTER_INSTANCE_ID" \<br/>    &gt;&gt; ~/.bashrc</span><span id="942f" class="my lx it mu b gy nd na l nb nc">echo "AWS_MY_JUPYTER_KEY=\"`pwd`/my_jupyter_private_key.pem\"" \<br/>    &gt;&gt; ~/.bashrc</span><span id="e41f" class="my lx it mu b gy nd na l nb nc">echo "alias aws_start_my_jupyter_vm=\"aws ec2 start-instances \\<br/>        --instance-ids \$AWS_MY_JUPYTER_INSTANCE_ID\"" \<br/>    &gt;&gt; ~/.bashrc</span><span id="4800" class="my lx it mu b gy nd na l nb nc">echo "alias aws_connect_my_jupyter_vm=\"<br/>        DNS_NAME=\\\`aws ec2 describe-instances \\<br/>            --instance-ids \$AWS_MY_JUPYTER_INSTANCE_ID \\<br/>            --query 'Reservations[0].Instances[0].PublicDnsName' \\<br/>            --output text\\\`<br/>        ssh -i \\\"\$AWS_MY_JUPYTER_KEY\\\" admin@\\\$DNS_NAME\"" \<br/>    &gt;&gt; ~/.bashrc</span></pre><p id="c5be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">9.测试新创建的别名:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="df57" class="my lx it mu b gy mz na l nb nc">aws ec2 stop-instances --instance-ids $AWS_MY_JUPYTER_INSTANCE_ID</span></pre><p id="4493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等到实例正确停止。您可以从AWS EC2仪表板检查它——实例状态必须显示“已停止”。我用了不到一分钟。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="eb64" class="my lx it mu b gy mz na l nb nc">exit</span></pre><p id="65ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重新打开本地shell命令提示符(让它重新加载<code class="fe ne nf ng mu b">~/.bashrc</code>文件)。输入以下命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1d7e" class="my lx it mu b gy mz na l nb nc">aws_start_my_jupyter_vm</span></pre><p id="b044" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该在json中看到一条消息(取决于您的AWS CLI配置),说明您的VM的当前和以前的状态。</p><p id="e6f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">等待虚拟机启动。</strong>这可能需要大约2分钟，您可以从AWS EC2仪表板上看到:当状态检查显示“2/2检查通过”时，实例准备好执行下一个命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2003" class="my lx it mu b gy mz na l nb nc">aws_connect_my_jupyter_vm</span></pre><p id="717b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将通过ssh将您带到VM命令提示符。</p><p id="e373" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">10.您的VM现在已经准备好了，您现在可以随时从本地计算机的命令行轻松地重新启动它，以便继续您的工作。</p><h1 id="9c35" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">设置Jupyter</h1><p id="97fe" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将安装JupyterLab，Jupyter笔记本的新版本。</p><p id="b137" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">11.连接到您的虚拟机(如果您在上面的命令后退出):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="7670" class="my lx it mu b gy mz na l nb nc">aws_connect_my_jupyter_vm</span></pre><p id="5595" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">12.在虚拟机命令提示符下运行以下命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="678f" class="my lx it mu b gy mz na l nb nc">sudo apt update<br/>sudo apt upgrade <strong class="mu iu"># Hit 'Y' and Enter key when asked</strong><br/>sudo apt install python3-pip <strong class="mu iu"># Hit 'Y' and Enter key when asked<br/></strong>sudo pip3 install --upgrade jupyterlab boto3<br/>sudo mkdir -p /opt/my_jupyterlab/bin<br/>sudo sh -c \<br/>    'echo "#!/bin/bash" &gt; /opt/my_jupyterlab/bin/run_jupyterlab'<br/>sudo chmod a+x /opt/my_jupyterlab/bin/run_jupyterlab</span></pre><p id="f51d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要！！！！</strong>在下一个命令中，出于安全原因，需要使用-IP = 127 . 0 . 0 . 1来阻止任何外部访问尝试，特别是因为我们在这里关闭了密码和安全令牌，以方便使用。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="af9b" class="my lx it mu b gy mz na l nb nc">sudo sh -c 'echo "jupyter lab \\<br/>        --ip=127.0.0.1 \\<br/>        --NotebookApp.token=\"\" \\<br/>        --NotebookApp.password=\"\" \\<br/>        --NotebookApp.allow_origin=\"*\"" \<br/>    &gt;&gt; /opt/my_jupyterlab/bin/run_jupyterlab'</span><span id="1eca" class="my lx it mu b gy nd na l nb nc">exit</span></pre><p id="2adf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">13.带有Jupyterlab的虚拟机现在已经配置好了，您现在回到了本地计算机的命令行。让我们将使JupyterLab易于启动和使用的要点联系起来:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="194e" class="my lx it mu b gy mz na l nb nc">echo "alias aws_connect_my_jupyterlab=\"<br/>        DNS_NAME=\\\`aws ec2 describe-instances \\<br/>            --instance-ids \$AWS_MY_JUPYTER_INSTANCE_ID \\<br/>            --query 'Reservations[0].Instances[0].PublicDnsName' \\<br/>            --output text\\\`<br/>        ssh -i \\\"\$AWS_MY_JUPYTER_KEY\\\" admin@\\\$DNS_NAME \\<br/>            -L 8888:localhost:8888 \\<br/>            -t '/opt/my_jupyterlab/bin/run_jupyterlab'\"" \<br/>    &gt;&gt; ~/.bashrc</span><span id="1685" class="my lx it mu b gy nd na l nb nc">exit</span></pre><p id="4b99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">14.再次打开本地命令提示符(让它重新加载<code class="fe ne nf ng mu b">~/.bashrc</code>文件)，测试我们刚刚创建的命令行别名:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="9b65" class="my lx it mu b gy mz na l nb nc">aws_connect_my_jupyterlab</span></pre><p id="f6c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">15.打开浏览器，在地址栏中输入<a class="ae ky" href="http://localhost:8888/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8888/ </a>。</p><p id="823c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">16.<strong class="lb iu">瞧！你在JupyterLab！</strong>您已经安装了AWS python API(参见上面的pip 3 install-upgrade命令)。您的JupyterLab python环境已经设置好，并且能够与AWS服务进行交互(在一定程度上，您已经通过CLI访问密钥向正在使用的帐户授予了权限)。</p><h1 id="5b11" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">停止虚拟机以避免不必要的云成本</h1><p id="4591" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">17.每当您停止使用笔记本电脑时，不要忘记关闭虚拟机，以避免不必要的云成本。要从本地计算机命令行停止虚拟机，请执行以下操作:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="12e3" class="my lx it mu b gy mz na l nb nc">aws ec2 stop-instances --instance-ids $AWS_MY_JUPYTER_INSTANCE_ID<br/>exit</span></pre><h1 id="2c1b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">重新启动已经设置好的Jupyter虚拟机</h1><p id="3c1a" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">18.当您稍后回到笔记本上工作时，打开本地命令提示符，使用以下命令重新启动虚拟机:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="4507" class="my lx it mu b gy mz na l nb nc">aws_start_my_jupyter_vm</span></pre><p id="4e97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">19.等待虚拟机启动。这可能需要大约2分钟—您可以从AWS EC2仪表板上看到:当状态检查显示“2/2检查通过”时，该实例准备好执行下一个命令:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="3949" class="my lx it mu b gy mz na l nb nc">aws_connect_my_jupyterlab</span></pre><p id="b355" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">20.打开浏览器，在地址栏中输入<a class="ae ky" href="http://localhost:8888/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8888/ </a>。</p><p id="202e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不想启动JupyterLab，而只是一个到VM的shell连接，那么您可以使用另一个命令行别名:<code class="fe ne nf ng mu b">aws_connect_my_jupyter_vm</code></p><h1 id="c99a" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">添加额外磁盘</h1><p id="24d0" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">虚拟机根文件系统链接到的默认卷大小为8gb。我建议让它保持原样，只有当您需要处理更大的数据集时，才向虚拟机添加额外的EBS卷。如果您已经完成了项目，将额外的空间作为单独的磁盘可以让您放下并删除它(在删除磁盘之前，将您想要保留的文件备份到S3)。根据官方记录，AWS免费层包括30GB的存储空间，但超出免费层的服务在典型的个人预算水平下可能会相当昂贵，所以让它们闲置，让你按月付费是没有意义的。同样，由于同样的成本原因，在创建另一个持久磁盘之前，考虑一下您实际需要多大的磁盘。确切的定价取决于您在创建EBS卷时可以调整的多个参数，但是200GB卷(带每日快照)的价格可能会超过每月30美元，而25GB对于您当前的项目来说可能已经足够大了(每月6美元)？</p><h1 id="d7b3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">家庭作业的附加练习</h1><p id="eaa6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">以上内容足以让您开始使用AWS中的Jupyter环境。但是，为了迫使你思考，练习一些AWS修补程序，并增强你对环境的信心，这里有一些额外的练习，可以让你的生活更加轻松，我建议你尝试自己解决。请随意在下面张贴您的解决方案描述或您可能得到的问题作为回应，我将尝试对它们进行评论以获得您的反馈。</p><h2 id="0555" class="my lx it bd ly nh ni dn mc nj nk dp mg li nl nm mi lm nn no mk lq np nq mm nr bi translated">练习1</h2><p id="c495" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">使Jupyter虚拟机的启动更加方便。改进本地命令行别名检查虚拟机是否已经运行的方式——如果没有，则自动启动虚拟机，等待它启动并准备好，并在其中启动Jupyter。这样，您将消除启动虚拟机并手动等待其准备就绪的单独手动步骤。</p><h2 id="6800" class="my lx it bd ly nh ni dn mc nj nk dp mg li nl nm mi lm nn no mk lq np nq mm nr bi translated">练习2</h2><p id="5e23" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">改进您的本地命令行别名，在使用ctrl+c停止Jupyter服务后，它还会让您停止虚拟机(默认操作是停止虚拟机)，这样您可以避免因意外忘记关闭虚拟机而导致的不必要的云成本。</p><h2 id="7bdb" class="my lx it bd ly nh ni dn mc nj nk dp mg li nl nm mi lm nn no mk lq np nq mm nr bi translated">练习3</h2><p id="6349" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">自动部署新的Jupyter VM，避免每次创建时手动复制粘贴上面的所有命令。如果您想为不同的项目维护单独的环境，这种方式会使您的生活更加灵活和敏捷。有几种方法可以做这件事。这里有几个想法(选择你的选择并实现它)。</p><p id="486d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Ex。4备选方案1。</strong>编写上述指令中的所有内容，以便从一个命令行命令中触发。</p><p id="53b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如。4备选方案2。创建一个Jupyter虚拟机映像，当您想要启动另一个独立于其他项目的干净的Jupyter环境时，可以将它用作模板。</p><p id="06e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">尽情享受吧！</strong></p></div></div>    
</body>
</html>