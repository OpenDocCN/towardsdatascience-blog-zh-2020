<html>
<head>
<title>BigQuery data structure in Google: How to get started with cloud storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Google 中的 BigQuery 数据结构:云存储入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bigquery-data-structure-in-google-how-to-get-started-with-cloud-storage-b6146fcad1d1?source=collection_archive---------34-----------------------#2020-06-30">https://towardsdatascience.com/bigquery-data-structure-in-google-how-to-get-started-with-cloud-storage-b6146fcad1d1?source=collection_archive---------34-----------------------#2020-06-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1fe5ffd8e02a2a482e4431bfde018dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iq80PGW6q4uJCeUSjRWD1g.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来源:<a class="ae jg" href="https://ru.depositphotos.com/238574794/stock-photo-city-streets-dusk-seen-aerial.html" rel="noopener ugc nofollow" target="_blank">沉积照片</a></p></figure><div class=""/><div class=""><h2 id="e137" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">了解如何开始使用云存储:创建数据集和表，设置与 Google BigQuery 之间的数据导入和导出</h2></div><p id="22fb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Google BigQuery 是一项云存储服务，允许您在一个系统中收集所有数据，并使用 SQL 查询轻松分析这些数据。为了便于处理数据，应该正确地组织数据。在本文中，我们将解释如何创建上传到 Google BigQuery 的表和数据集。</p><h1 id="cccf" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">数据集:什么是数据集以及如何创建数据集</h1><p id="63bd" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">要使用 Google BigQuery，需要在<a class="ae jg" href="https://cloud.google.com/free/" rel="noopener ugc nofollow" target="_blank"> Google 云平台(GCP) </a>中创建一个项目。注册后，您将在免费试用期内获得所有云平台产品，并在接下来的 12 个月内获得 300 美元用于购买这些产品。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/9c3343a46c2aa79d461510287f956502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PlTNU7N2bTJLLZSS.png"/></div></div></figure><p id="79d9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 Google 云平台中创建项目后，需要向 Google BigQuery 添加至少一个数据集。</p><p id="2a07" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数据集是用于组织和控制数据访问的顶级容器。简单地说，它是一种文件夹，你的信息以表格和视图的形式存储在其中。</p><p id="b55d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 GCP 打开您的项目，转到<strong class="la jk"> BigQuery </strong>选项卡，并点击<strong class="la jk">创建数据集</strong>:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/ac018fc327171c6e2aa02464a97cf244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JjOJqhJ2-y0FRxEO.png"/></div></div></figure><p id="b493" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在打开的窗口中，指定数据集的名称和表的保存期限。如果希望自动删除包含数据的表，请指定具体的删除时间。或者保留默认的<strong class="la jk">永久选项</strong>，以便只能手动删除表。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/2e1fcb27e88d14625d1d18c7afbfb35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kZLUuNDPJ7jB4gRG.png"/></div></div></figure><p id="77e7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">加工地点</strong>字段是可选的。默认情况下，它设置为 US multiregion。您可以在<a class="ae jg" href="https://cloud.google.com/bigquery/docs/locations?hl=en" rel="noopener ugc nofollow" target="_blank">帮助部分</a>找到更多关于存储数据区域的信息。</p><h1 id="77aa" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">如何添加表以将数据加载到 Google BigQuery 中</h1><p id="a0ba" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">创建数据集后，您需要添加一个将收集数据的表。表格是一组行。每一行都由列组成，这些列也称为字段。根据数据源的不同，有几种方法可以在 BigQuery 中创建表:</p><ul class=""><li id="c208" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated">手动创建一个空表，并为其设置一个数据模式</li><li id="d035" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">使用以前计算的 SQL 查询的结果创建一个表</li><li id="0db2" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">从您的计算机上传文件(CSV、AVRO、JSON、Parquet、ORC 或 Google Sheets 格式)</li><li id="d3ca" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">你可以创建一个引用外部数据源的表，而不是下载或流式传输数据:<a class="ae jg" href="https://cloud.google.com/bigquery/external-data-bigtable" rel="noopener ugc nofollow" target="_blank"> Cloud Bigtable </a>、<a class="ae jg" href="https://cloud.google.com/bigquery/external-data-cloud-storage" rel="noopener ugc nofollow" target="_blank">云存储</a>或<a class="ae jg" href="https://cloud.google.com/bigquery/external-data-drive" rel="noopener ugc nofollow" target="_blank"> Google Drive </a>。</li></ul><p id="ad89" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将仔细研究第一种方法:手动创建一个表。</p><p id="d85b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">第一步</strong>。选择要添加表格的数据集，然后单击<strong class="la jk">创建表格</strong>:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/c8135da79240332c7ab5ca6ba45505d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sY8mVmO1LlYJhEy6.png"/></div></div></figure><p id="d24f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">第二步。</strong>在源字段中选择<strong class="la jk">空表</strong>，在<strong class="la jk">表类型</strong>字段中选择目标对象原生格式的<strong class="la jk">表。</strong>想出一个表名。</p><p id="9abf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">重要信息</strong>:数据集、表格和字段的名称必须是拉丁字符，并且只包含字母、数字和下划线。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/a2327d11a7117e63fc8d26e4e54c1338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UinXUalL--7Q64vW.png"/></div></div></figure><p id="6ac3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第三步。指定表模式。该模式由四个部分组成:两个是强制性的(列名和数据类型)，两个是可选的(列模式和描述)。正确选择的类型和字段模式将有助于处理数据。</p><p id="1e62" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">BigQuery 中的模式示例:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/fbb078767d360986603d3dd92c2ab2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7wVOcDXoLCqm2gIH.jpg"/></div></div></figure><p id="f5d5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">列名</strong> <br/>在列名中，您需要指定每列负责的参数:日期、用户标识、产品等。标题只能包含拉丁字母、数字和下划线(最多 128 个字符)。不允许相同的字段名称，即使它们的大小写不同。<br/> <strong class="la jk"> <br/>数据类型</strong> <br/>在 BigQuery 中创建表时，可以使用以下字段类型:</p><p id="4973" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">模式</strong> <br/> BigQuery 支持以下表列模式:</p><p id="f77f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">注意</strong>:不需要填写模式字段。如果没有指定模式，默认列可为空。</p><p id="c7c4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">列描述</strong> <br/>如果您愿意，您可以为表格中的每一列添加一个简短的描述(不超过 1024 个字符),以便解释特定参数的含义。</p><p id="e06e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 BigQuery 中创建空表时，需要手动设置模式。这可以通过两种方式来实现:<br/> 1。点击<strong class="la jk">添加字段</strong>按钮，填写每一列的名称、类型和模式。</p><p id="7ec3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.使用<strong class="la jk">编辑为文本</strong>开关，以 JSON 数组的形式输入表格模式。</p><p id="933a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，Google BigQuery 在从 CSV 和 JSON 文件加载数据时可以使用自动模式检测。</p><p id="7444" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该选项的工作原理如下:BigQuery 从您指定的源中选择一个随机文件，扫描其中多达 100 行的数据，并将结果用作代表性样本。然后，它检查上传文件中的每个字段，并尝试根据示例中的值为其分配数据类型。</p><p id="7265" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">加载 Google 文件时，BigQuery 可以更改列名，使其与自己的 SQL 语法兼容。因此，我们建议您上传带有英文字段名的表格；例如，如果名称是俄语，系统会自动对其进行重命名。例如:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/06154e12091ef624d69a997255f9930b.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/0*kqnMhcXgyNJ1tIJk.jpg"/></div></figure><p id="d3ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果在加载数据时输入的列名不正确，或者您希望更改现有表中列的名称和类型，您可以手动执行此操作。我们会告诉你怎么做。</p><h1 id="2cac" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">如何对表模式进行更改</h1><p id="6e78" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">将数据加载到 Google BigQuery 后，表的布局可能会与原来略有不同。例如，字段名可能因为 BigQuery 中不支持的字符而更改，或者字段类型可能是整数而不是字符串。在这种情况下，您可以手动调整模式。</p><h2 id="99e4" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何更改列名</h2><p id="247f" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">使用 SQL 查询，选择表中的所有列，并为要重命名的列指定一个新名称。在这种情况下，您可以覆盖现有的表或创建一个新表。请求示例:</p><pre class="ms mt mu mv gt ny nz oa ob aw oc bi"><span id="b999" class="nm lv jj nz b gy od oe l of og">#legacySQL<br/><strong class="nz jk">Select</strong><br/>date,<br/>order_id,<br/>order___________ <strong class="nz jk">as</strong> order_type, -- new field name<br/>product_id<br/><strong class="nz jk">from</strong> [project_name:dataset_name.owoxbi_sessions_20190314]</span><span id="1c7e" class="nm lv jj nz b gy oh oe l of og">#standardSQL<br/><strong class="nz jk">Select</strong><br/>* <strong class="nz jk">EXCEPT</strong> (orotp, ddat),<br/>orotp <strong class="nz jk">as</strong> order_id,<br/>ddat <strong class="nz jk">as</strong> date<br/><strong class="nz jk">from</strong> `project_name.dataset_name.owoxbi_sessions_20190314`</span></pre><h2 id="5a52" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何更改模式中的数据类型</h2><p id="9b91" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">使用 SQL 查询，从一个表中选择所有数据，然后<a class="ae jg" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#casting" rel="noopener ugc nofollow" target="_blank">将相应的列转换为不同的数据类型。您可以使用查询结果</a><a class="ae jg" href="https://cloud.google.com/bigquery/docs/writing-results#permanent-table" rel="noopener ugc nofollow" target="_blank">来覆盖现有的表</a>或者创建一个新的表。请求示例:</p><pre class="ms mt mu mv gt ny nz oa ob aw oc bi"><span id="9241" class="nm lv jj nz b gy od oe l of og">#standardSQL<br/><strong class="nz jk">Select</strong><br/><strong class="nz jk">CAST</strong> (order_id <strong class="nz jk">as</strong> <strong class="nz jk">STRING</strong>) <strong class="nz jk">as</strong> order_id,<br/><strong class="nz jk">CAST</strong> (date <strong class="nz jk">as</strong> <strong class="nz jk">TIMESTAMP</strong>) <strong class="nz jk">as</strong> date<br/><strong class="nz jk">from</strong> `project_name.dataset_name.owoxbi_sessions_20190314`</span></pre><h2 id="d65b" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何更改列模式</h2><p id="5ce4" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">如<a class="ae jg" href="https://cloud.google.com/bigquery/docs/managing-table-schemas#relaxing_a_columns_mode" rel="noopener ugc nofollow" target="_blank">帮助文档</a>所述，您可以将列模式从必需更改为可空。第二个选项是将数据导出到云存储，并从那里以正确的模式将数据返回给 BigQuery。</p><h2 id="f687" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">如何从数据架构中删除列</h2><p id="8599" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">使用 SELECT * EXCEPT 查询排除一列(或多列)，然后将查询结果写入旧表或创建一个新表。请求示例:</p><pre class="ms mt mu mv gt ny nz oa ob aw oc bi"><span id="483d" class="nm lv jj nz b gy od oe l of og">#standardSQL<br/><strong class="nz jk">Select</strong><br/>* <strong class="nz jk">EXCEPT</strong> (order_id)<br/><strong class="nz jk">from</strong> `project_name.dataset_name.owoxbi_sessions_20190314`</span></pre><p id="6ca7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，还有第二种方法来更改模式，这种方法适用于上述所有任务:导出数据并将其加载到新表中。要重命名列，可以将数据从 BigQuery 上传到云存储，然后将其从云存储导出到新表中的 BigQuery，或者使用高级参数覆盖旧表中的数据:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/339e079c5be4f02e1c8fa5e34196b8f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jHOaHtuWhrvmUwe_.png"/></div></div></figure><p id="0091" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在<a class="ae jg" href="https://cloud.google.com/bigquery/docs/manually-changing-schemas" rel="noopener ugc nofollow" target="_blank">谷歌云平台帮助文档</a>中了解改变表格结构的其他方法。</p><h1 id="0baa" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">从/向 Google BigQuery 导出和导入数据</h1><p id="e62f" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">您可以通过界面或 OWOX BI 的特殊<a class="ae jg" href="https://www.owox.com/products/bi/pipeline/google-bigquery-to-google-sheets/" rel="noopener ugc nofollow" target="_blank">插件从 BigQuery 下载数据或向 big query 上传数据，而无需开发人员的帮助。让我们详细考虑每种方法。</a></p><h2 id="ba8d" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">通过 Google BigQuery 接口导入数据</h2><p id="c9a7" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">要将必要的信息上传到存储，例如，关于用户和离线订单的数据，请打开数据集，单击创建表，然后选择数据源:云存储、您的计算机、Google Drive 或云 Bigtable。指定文件的路径、格式以及将加载数据的表的名称:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/aed76fc13d3b2abb0248e4689dacc067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6yUMpp1epQlitWXX.png"/></div></div></figure><p id="4fa5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单击“创建表”后，数据集中会出现一个表。</p><h2 id="c6a2" class="nm lv jj bd lw nn no dn ma np nq dp me lh nr ns mg ll nt nu mi lp nv nw mk nx bi translated">通过 Google BigQuery 接口导出数据</h2><p id="576b" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">还可以从 BigQuery 上传处理过的数据——例如，通过系统界面创建报告。为此，请打开包含数据的所需表格，然后单击导出按钮:</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/06aba3c0642c98524071a40251ed200b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*voFpsU6YM14IYcBq.png"/></div></div></figure><p id="b835" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该系统将提供两种选择:在谷歌数据工作室查看数据或上传到谷歌云存储。如果您选择第一个选项，您将立即转到 Data Studio，在那里您可以保存报告。</p><p id="35b8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选择导出到 Google 云存储会打开一个新窗口。在其中，您需要指定数据的保存位置和格式。</p><h1 id="d05b" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">使用 OWOX BI 的插件导出和导入数据</h1><p id="ee0e" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated"><a class="ae jg" href="https://chrome.google.com/webstore/detail/owox-bi-bigquery-reports/fepofngogkjnejgcbdmmkddnpeojbbin?utm_source=owox_bi" rel="noopener ugc nofollow" target="_blank">免费的 OWOX BI BigQuery Reports 插件</a>允许你快速方便地将数据从 Google BigQuery 直接传输到 Google Sheets，反之亦然。因此，您不需要准备 CSV 文件或使用付费的第三方服务。</p><p id="c026" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，假设您想要将离线订单数据上传到 BigQuery 来构建一个 ROPO 报告。为此，您需要:</p><ol class=""><li id="b254" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">在浏览器中安装 BigQuery Reports 插件。</li><li id="2943" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt oi nc nd ne bi translated">在 Google Sheets 中打开您的数据文件，在标签<strong class="la jk"> Add-ons </strong>中，选择<strong class="la jk"> OWOX BI BigQuery Reports →将数据上传到 BigQuery。</strong></li><li id="81f7" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt oi nc nd ne bi translated">在打开的窗口中，在 BigQuery 中选择项目和数据集，并为表输入所需的名称。此外，选择要加载其值的字段。默认情况下，所有字段的类型都是 STRING，但是我们建议根据上下文选择数据类型(例如，对于带有数字标识符的字段，选择 INTEGER 对于价格，浮动):</li></ol><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/346eac9fdade3a83cd0f6079ba475bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/0*vF2nmPEQk963WRq8.png"/></div></figure><ol class=""><li id="d983" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">点击开始上传按钮，你的数据将被加载到谷歌大查询</li></ol><p id="18ae" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您还可以使用这个插件将数据从 BigQuery 导出到 Google Sheets——例如，可视化数据或与无权访问 BigQuery 的同事共享数据。为此:</p><ol class=""><li id="7b30" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">打开谷歌工作表。在<strong class="la jk">插件</strong>选项卡中，选择<strong class="la jk"> OWOX BI BigQuery 报表→添加新报表:</strong></li></ol><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/4de64849f14045eda051ee23c201694c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JkfvG7Sn-ex-uAXW.png"/></div></div></figure><ol class=""><li id="254e" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">然后在 Google BigQuery 中输入您的项目，并选择 Add new query。</li><li id="72ac" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt oi nc nd ne bi translated">在新窗口中，插入 SQL 查询。这可能是一个将数据从表上传到 BigQuery 的查询，也可能是一个提取并计算必要数据的查询。</li><li id="106a" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt oi nc nd ne bi translated">通过单击“保存并运行”按钮，重命名查询，使其易于查找和启动。</li></ol><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/f22094d5ab5a36ad711e451189178425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RSUVuJJTRbqpYhkN.jpg"/></div></div></figure><p id="d02d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要定期将数据从 BigQuery 上传到 Google Sheets，您可以启用计划的数据更新:</p><ol class=""><li id="cb4d" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">在<strong class="la jk">插件</strong>选项卡中，选择<strong class="la jk">OWOX BI big query Reports</strong>→<strong class="la jk">Schedule report</strong>:</li></ol><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/d9531cc3f3b229fea60e491a38dd807d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LXCqRX-TEsOZK3F1.png"/></div></div></figure><ol class=""><li id="535f" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt oi nc nd ne bi translated">在打开的窗口中，设置报告更新的时间和频率，并点击<strong class="la jk">保存</strong>:</li></ol><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi om"><img src="../Images/32ef777d2d3d74f6119c1747d5219d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/0*wdheAePHIYQZZPS8.jpg"/></div></figure><h1 id="e46c" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">为什么要在 Google BigQuery 中收集数据？</h1><p id="5f8b" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">如果您还没有意识到 Google BigQuery 云存储的好处，我们建议您尝试一下。在 OWOX BI 的帮助下，您可以将来自您的网站、<a class="ae jg" href="https://www.owox.com/products/bi/pipeline/google-analytics-cost-data-import/" rel="noopener ugc nofollow" target="_blank">广告源</a>和内部 CRM 系统的数据整合到 BigQuery 中，以便:</p><ul class=""><li id="39ab" class="mw mx jj la b lb lc le lf lh my ll mz lp na lt nb nc nd ne bi translated"><a class="ae jg" href="https://www.owox.com/blog/use-cases/end-to-end-analytics-implementation/" rel="noopener ugc nofollow" target="_blank">建立端到端分析</a>并找出您营销的实际回报，考虑线下订单、退货和购买过程中的所有用户步骤；</li><li id="3023" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae jg" href="https://www.owox.com/blog/articles/gbq-reports/" rel="noopener ugc nofollow" target="_blank">创建带有任何参数和指标的完整未采样数据的报告</a>；</li><li id="91c7" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae jg" href="https://www.owox.com/blog/success-stories/boodmo/" rel="noopener ugc nofollow" target="_blank">使用群组分析评估客户获取渠道</a>；</li><li id="1277" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">找出你的<a class="ae jg" href="https://www.owox.com/blog/articles/ropo-effect/" rel="noopener ugc nofollow" target="_blank">在线广告如何影响线下销售</a>；</li><li id="be17" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated">降低广告费用的份额，延长客户的生命周期，从整体上增加你的客户群的 LTV；</li><li id="a0ee" class="mw mx jj la b lb nf le ng lh nh ll ni lp nj lt nb nc nd ne bi translated"><a class="ae jg" href="https://www.owox.com/blog/success-stories/butik/" rel="noopener ugc nofollow" target="_blank">根据顾客的活动</a>对其进行细分，并与他们进行个性化交流。</li></ul></div></div>    
</body>
</html>