# é›¶å”®éœ€æ±‚é¢„æµ‹çš„æœºå™¨å­¦ä¹ 

> åŸæ–‡ï¼š<https://towardsdatascience.com/machine-learning-for-store-demand-forecasting-and-inventory-optimization-part-1-xgboost-vs-9952d8303b48?source=collection_archive---------2----------------------->

## é›¶å”®åº—éœ€æ±‚é¢„æµ‹æ–¹æ³•çš„æ¯”è¾ƒç ”ç©¶(XGBoost æ¨¡å‹ä¸æ»šåŠ¨å¹³å‡æ³•)

![](img/a3128a644cbd83c866a6333b5a1d4213.png)

åœ¨ [Unsplash](https://unsplash.com/s/photos/retail?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Š [NeONBRAND](https://unsplash.com/@neonbrand?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) æ‹æ‘„çš„ç…§ç‰‡

# **ä¸€ã€éœ€æ±‚è®¡åˆ’ä¼˜åŒ–é—®é¢˜é™ˆè¿°**

å¯¹äºå¤§å¤šæ•°é›¶å”®å•†æ¥è¯´ï¼Œéœ€æ±‚è®¡åˆ’ç³»ç»Ÿé‡‡ç”¨å›ºå®šçš„ã€åŸºäºè§„åˆ™çš„æ–¹æ³•æ¥è¿›è¡Œé¢„æµ‹å’Œè¡¥è´§è®¢å•ç®¡ç†ã€‚

![](img/25449c3d40c759520e8552a6cb59da96.png)

(1)éœ€æ±‚è®¡åˆ’ä¼˜åŒ–é—®é¢˜é™ˆè¿°â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

è¿™ç§æ–¹æ³•å¯¹äºç¨³å®šå’Œå¯é¢„æµ‹çš„äº§å“ç±»åˆ«è¶³å¤Ÿæœ‰æ•ˆï¼Œä½†æ˜¯åœ¨åº“å­˜å’Œè¡¥è´§ä¼˜åŒ–æ–¹é¢ä¼šæ˜¾ç¤ºå‡ºå®ƒçš„å±€é™æ€§ã€‚

è¿™ç§æ½œåœ¨çš„ä¼˜åŒ–å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é™ä½è¿è¥æˆæœ¬:

*   **åº“å­˜ä¼˜åŒ–:**å°†[åº—é“ºåº“å­˜](https://www.youtube.com/watch?v=U1HqjHZzgq4)ä¸å®é™…éœ€æ±‚ç›¸åŒ¹é…ï¼Œå‡å°‘æ‰€éœ€å­˜å‚¨ç©ºé—´**(ç§Ÿèµæˆæœ¬)**
*   **è¡¥è´§ä¼˜åŒ–:**ä¼˜åŒ–æ¯ç¬”è®¢å•çš„è¡¥è´§æ•°é‡ï¼Œä½¿ä»“åº“ä¸å•†åº—ä¹‹é—´çš„è¡¥è´§æ¬¡æ•°æœ€å°**(ä»“å‚¨&è¿è¾“æˆæœ¬)**

**ç¤ºä¾‹:æ‹¥æœ‰ 50 å®¶åº—é“ºçš„é›¶å”®å•†**

åœ¨è¿™é¡¹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å°†ä» Kaggle æŒ‘æˆ˜ä¸­è·å–ä¸€ä¸ªæ•°æ®é›†:[å•†åº—å•†å“éœ€æ±‚é¢„æµ‹æŒ‘æˆ˜](https://www.kaggle.com/c/demand-forecasting-kernels-only/data)ã€‚

èŒƒå›´

*   2013 å¹´ 1 æœˆ 1 æ—¥è‡³ 2017 å¹´ 12 æœˆ 31 æ—¥**çš„äº¤æ˜“**
*   91.3 ä¸‡ç¬”é”€å”®äº¤æ˜“
*   **50** ç‹¬ç‰¹çš„ SKU
*   **10** åº—é“º

ğŸ’Œæ–°æ–‡ç« ç›´æ¥å…è´¹æ”¾å…¥ä½ çš„æ”¶ä»¶ç®±:[æ—¶äº‹é€šè®¯](https://www.samirsaci.com/#/portal/signup)

## (æ›´æ–°)æ”¹è¿›æ¨¡å‹

æˆ‘ä¸€ç›´è‡´åŠ›äºè¯¥æ¨¡å‹çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå¹¶åœ¨ä¸‹é¢çš„æ–‡ç« ä¸­åˆ†äº«æˆ‘çš„è§è§£(å¸¦å®Œæ•´ä»£ç )ã€‚ç›®æ ‡æ˜¯äº†è§£æ·»åŠ ä¸šåŠ¡ç‰¹å¾(ä»·æ ¼å˜åŒ–ã€é”€å”®è¶‹åŠ¿ã€å•†åº—å…³é—­ç­‰)å¯¹æ¨¡å‹å‡†ç¡®æ€§çš„å½±å“ã€‚

[](https://www.samirsaci.com/machine-learning-for-retail-sales-forecasting-features-engineering/) [## é›¶å”®é¢„æµ‹çš„æœºå™¨å­¦ä¹ -ç‰¹å¾å·¥ç¨‹

### ä¾›åº”é“¾ä¼˜åŒ–äº†è§£ä¸ç¼ºè´§ã€å•†åº—å…³é—­æ—¥æœŸæˆ–å…¶ä»–ç›¸å…³çš„é¢å¤–åŠŸèƒ½çš„å½±å“

www.samirsaci.com](https://www.samirsaci.com/machine-learning-for-retail-sales-forecasting-features-engineering/) 

> Github åº“:[**é“¾æ¥**](https://github.com/samirsaci/ml-forecast-features-eng)

# **äºŒã€‚é”€å”®é¢„æµ‹ XG boost**

æœ€åˆçš„æ•°æ®é›†å·²è¢«ç”¨äº Kaggle æŒ‘æˆ˜èµ›ï¼Œåœ¨è¯¥æŒ‘æˆ˜èµ›ä¸­ï¼Œå„å›¢é˜Ÿç«ç›¸è®¾è®¡é¢„æµ‹é”€å”®çš„æœ€ä½³æ¨¡å‹ã€‚

Kaggle æŒ‘æˆ˜çš„åˆå§‹æ•°æ®æ¡†æ¶

è¿™é‡Œçš„ç¬¬ä¸€ä¸ªç›®æ ‡æ˜¯ä½¿ç”¨ XGBoost è®¾è®¡ä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼›è¯¥æ¨¡å‹å°†ç”¨äºä¼˜åŒ–æˆ‘ä»¬çš„è¡¥è´§ç­–ç•¥ï¼Œç¡®ä¿åº“å­˜ä¼˜åŒ–å¹¶å‡å°‘ä»æ‚¨çš„ä»“åº“å‘è´§çš„æ•°é‡ã€‚

## 1.æ·»åŠ æ—¥æœŸåŠŸèƒ½

## 2.åˆ—è½¦çš„æ¯æ—¥ã€æ¯æœˆå¹³å‡å€¼

## 3.å°†æ¯æ—¥å’Œæ¯æœˆå¹³å‡å€¼æ·»åŠ åˆ°æµ‹è¯•å’Œæ»šåŠ¨å¹³å‡å€¼ä¸­

## 4.ç”¨äºæ£€æŸ¥ç›¸å…³æ€§çš„çƒ­å›¾

![](img/5ea3452c60bb50e08cfce03f18baa26f.png)

çš®å°”æ£®ç›¸å…³çƒ­å›¾â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

è®©æˆ‘ä»¬ä¿ç•™æœˆå¹³å‡å€¼ï¼Œå› ä¸ºå®ƒä¸é”€å”®é¢çš„ç›¸å…³æ€§æœ€é«˜ï¼Œå¹¶åˆ é™¤å½¼æ­¤é«˜åº¦ç›¸å…³çš„å…¶ä»–ç‰¹å¾ã€‚

## 5.æ¸…ç†ç‰¹å¾ã€è®­ç»ƒ/æµ‹è¯•åˆ†å‰²å’Œè¿è¡Œæ¨¡å‹

## 6.ç»“æœé¢„æµ‹æ¨¡å‹

![](img/80a0af19ed187f7f8e164ac0ad63906f.png)

é¢„æµ‹ä¸å®é™…é”€å”®â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

åŸºäºè¿™ä¸€é¢„æµ‹æ¨¡å‹ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæ¨¡æ‹Ÿæ¨¡å‹æ¥æ”¹è¿›å•†åº—è¡¥è´§çš„éœ€æ±‚è®¡åˆ’ã€‚

å†³èµ›æˆç»©

æ•°æ®å¸§ç‰¹å¾

*   **æ—¥æœŸ:**äº¤æ˜“æ—¥æœŸ
*   **è´§å·:** SKU å·ç 
*   **åº—é“º:**åº—é“ºç¼–å·
*   **é”€å”®:**é”€å”®äº¤æ˜“çš„å®é™…å€¼
*   **sales_prd:** XGBoost é¢„æµ‹
*   **é”™è¯¯ _ é¢„æµ‹:**é”€å”® _prd â€”é”€å”®
*   **repln:** è¡¥è´§å¤©æ•°çš„å¸ƒå°”å€¼(å¦‚æœè¯¥å¤©åœ¨['æ˜ŸæœŸä¸€'ï¼Œ'æ˜ŸæœŸä¸‰'ï¼Œ'æ˜ŸæœŸäº”'ï¼Œ'æ˜ŸæœŸæ—¥']ä¸­ï¼Œåˆ™è¿”å› True)

[](http://samirsaci.com) [## è¨ç±³å°” Samir ä¾›åº”é“¾ç»„åˆçš„æ•°æ®ç§‘å­¦

### ğŸ­ä½¿ç”¨é«˜çº§æ•°å­¦æ¦‚å¿µçš„ä¾›åº”é“¾ç½‘ç»œä¼˜åŒ–ğŸ‘¨â€ğŸ­ä»“å‚¨çš„æŒç»­æ”¹è¿›â€¦

samirsaci.com](http://samirsaci.com) 

# **ä¸‰ã€‚éœ€æ±‚è®¡åˆ’:XGBoost ä¸æ»šåŠ¨å¹³å‡å€¼**

## **1ã€‚ä½¿ç”¨æ»šåŠ¨å¹³å‡å€¼çš„éœ€æ±‚è®¡åˆ’**

é¢„æµ‹éœ€æ±‚çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä»¥å‰é”€å”®çš„æ»šåŠ¨å¹³å‡å€¼ã€‚åœ¨ç¬¬ n-1 å¤©ç»“æŸæ—¶ï¼Œæ‚¨éœ€è¦é¢„æµ‹ç¬¬ n å¤©ã€ç¬¬ n+1 å¤©ã€ç¬¬ n+2 å¤©çš„éœ€æ±‚ã€‚

1.  è®¡ç®—æœ€è¿‘ p å¤©çš„å¹³å‡é”€å”®é‡:æ»šåŠ¨å¹³å‡(ç¬¬ n-1 å¤©ï¼Œâ€¦ï¼Œç¬¬ n-p å¤©)
2.  å°†æ­¤å¹³å‡å€¼åº”ç”¨äºç¬¬ n å¤©ã€ç¬¬ n+1 å¤©ã€ç¬¬ n+2 å¤©çš„é”€å”®é¢„æµ‹
3.  é¢„æµ‹éœ€æ±‚=é¢„æµ‹æ—¥ n +é¢„æµ‹æ—¥(n+1) +é¢„æµ‹æ—¥(n+2)

![](img/e799f84fe4c10098e1083cde54054216.png)

ä½¿ç”¨æ»šåŠ¨å¹³å‡æ³•çš„éœ€æ±‚é¢„æµ‹â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

## **2ã€‚XGBoost ä¸æ»šåŠ¨å¹³å‡å€¼**

æœ‰äº† XGBoost æ¨¡å‹ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ç§æ»šåŠ¨å¹³å‡æ³•éœ€æ±‚è®¡åˆ’æ–¹æ³•ã€‚

è®©æˆ‘ä»¬è¯•ç€æ¯”è¾ƒè¿™ä¸¤ç§æ–¹æ³•åœ¨é¢„æµ‹å‡†ç¡®æ€§æ–¹é¢çš„ç»“æœ:

1.  **å‡†å¤‡ç¬¬ n-1 å¤©è¡¥è´§**
    æˆ‘ä»¬éœ€è¦é¢„æµ‹ç¬¬ n å¤©ã€ç¬¬ n +1 å¤©ã€ç¬¬ n+2 å¤©çš„è¡¥è´§é‡
2.  **XGB é¢„æµ‹ç»™æˆ‘ä»¬ä¸€ä¸ªéœ€æ±‚é¢„æµ‹**
    Demand _ XGB = Forecast _ Day(n)+Forecast _ Day(n+1)+Forecast _ Day(n+2)
3.  **æ»šåŠ¨å¹³å‡æ³•ç»™æˆ‘ä»¬ä¸€ä¸ªéœ€æ±‚é¢„æµ‹**
    Demand _ RM = 3 x Rolling _ Mean(Day(n-1)ï¼ŒDay(n-2)ï¼Œ..æ—¥(n-p))
4.  **å®é™…éœ€æ±‚**
    éœ€æ±‚ _ å®é™…=å®é™… _ æ—¥(n) +å®é™… _ æ—¥(n+1) +å®é™… _ æ—¥(n+2)
5.  **é¢„æµ‹è¯¯å·®**Error _ RM =(Demand _ RMâ€”Demand _ Actual)
    Error _ XGB =(Demand _ XGBâ€”Demand _ Actual)

![](img/7e088d3d6d375bf197ab21d3e192baab.png)

ä½¿ç”¨ XGBoost å’Œæ»šåŠ¨å¹³å‡çš„æ–¹æ³•â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

**a .å‚æ•°æ•´å®š:p å¤©æ»šåŠ¨å¹³å‡å€¼**

åœ¨å°†æ»šåŠ¨å¹³å‡å€¼ç»“æœä¸ XGBoost è¿›è¡Œæ¯”è¾ƒä¹‹å‰ï¼›è®©æˆ‘ä»¬å°è¯•æ‰¾å‡º p çš„æœ€ä½³å€¼ï¼Œä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚

![](img/543078073ac3b17bb8d7107ae550e8bd.png)

æ»šåŠ¨å¹³å‡å€¼çš„æœ€å°è¯¯å·®â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

**ç»“æœ:**-(p = 8)ä¸(p = 1)çš„é¢„æµ‹è¯¯å·®ä¸º 35%

å› æ­¤ï¼ŒåŸºäºé”€å”®äº‹åŠ¡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨è¿‡å» **8 å¤©**çš„å¹³å‡å€¼æ¥é¢„æµ‹ç¬¬äºŒå¤©çš„é”€å”®é¢ï¼Œä»è€Œè·å¾—æœ€ä½³çš„éœ€æ±‚è®¡åˆ’ç»©æ•ˆã€‚

**b. XGBoost å¯¹æ»šåŠ¨å¹³å‡å€¼:p = 8 å¤©**

![](img/a13d77f71823f963ae93399d638f8e34.png)

è¯¯å·® XGBoost ä¸æ»šåŠ¨å¹³å‡å€¼çš„å…³ç³»â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

**ç»“æœ:** -ä½¿ç”¨ XGBoost ä¸æ»šåŠ¨å¹³å‡å€¼çš„é¢„æµ‹è¯¯å·®ä¸º 32%

![](img/e7612c0aa52b0cdb0c994d723c021dcb.png)

é¢„æµ‹è¯¯å·®(x è½´:å•†åº—ç¼–å·ï¼Œy è½´:å•†å“ç¼–å·ï¼Œz è½´:è¯¯å·®)â€”â€”(å›¾ç‰‡ç”±ä½œè€…æä¾›)

# å››ã€‚ç»“è®ºå’Œä¸‹ä¸€æ­¥æªæ–½

*å…³æ³¨æˆ‘çš„ mediumï¼Œäº†è§£æ›´å¤šä¸ä¾›åº”é“¾æ•°æ®ç§‘å­¦ç›¸å…³çš„è§è§£ã€‚*

## 1.ç»“è®º

åˆ©ç”¨æ»šåŠ¨å¹³å‡æ³•è¿›è¡Œéœ€æ±‚é¢„æµ‹ï¼Œå¯ä»¥å°†é¢„æµ‹è¯¯å·®é™ä½ **35%** ï¼Œå¹¶æ‰¾åˆ°æœ€ä½³å‚æ•° **p å¤©**ã€‚

ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨ XGBoost é¢„æµ‹ä»£æ›¿æ»šåŠ¨å¹³å‡å€¼æ¥é¢„æµ‹ç¬¬ n å¤©ã€ç¬¬ n+1 å¤©å’Œç¬¬ n+2 å¤©çš„éœ€æ±‚ï¼Œä»è€Œå°†è¯¯å·®é™ä½ **32%ï¼Œä»è€Œè·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚**

![](img/a8caa71ff6529e7a820dcc83d51ba582.png)

åº“å­˜ç®¡ç†æµç¨‹

## 2.å¯æŒç»­æ–¹æ³•:ç»¿è‰²åº“å­˜ç®¡ç†

![](img/dda9f984e7d16dd0239dfc928f8a1817.png)

(å›¾ç‰‡ç”±ä½œè€…æä¾›)

> å¦‚æœæˆ‘ä»¬é™ä½å•†åœºè¡¥è´§çš„é¢‘ç‡ï¼Œä¼šå¯¹äºŒæ°§åŒ–ç¢³æ’æ”¾é‡äº§ç”Ÿä»€ä¹ˆå½±å“ï¼Ÿ

![](img/e6aab30245213e28184d4bec59f540dc.png)

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç ”ç©¶å¦‚ä½•ä½¿ç”¨æ•°æ®åˆ†ææ¥æ¨¡æ‹Ÿå•†åº—è¡¥è´§é¢‘ç‡çš„å˜åŒ–ï¼Œå¹¶è¡¡é‡å¯¹æ•´ä½“ç¯å¢ƒå½±å“çš„å½±å“ã€‚

[](https://www.samirsaci.com/green-inventory-management-case-study/) [## ç»¿è‰²åº“å­˜ç®¡ç†-æ¡ˆä¾‹ç ”ç©¶

### å¯æŒç»­å‘å±•å¦‚ä½•å‡å°‘æ—¶å°šé›¶å”®ç‰©æµè¿ä½œçš„äºŒæ°§åŒ–ç¢³æ’æ”¾é‡ï¼Ÿ

www.samirsaci.com](https://www.samirsaci.com/green-inventory-management-case-study/) 

# å…³äºæˆ‘

è®©æˆ‘ä»¬åœ¨ [Linkedin](https://www.linkedin.com/in/samir-saci/) å’Œ [Twitter](https://twitter.com/Samir_Saci_) ä¸Šè¿çº¿ï¼Œæˆ‘æ˜¯ä¸€å[ä¾›åº”é“¾å·¥ç¨‹å¸ˆ](https://www.samirsaci.com/about/)ä½¿ç”¨æ•°æ®åˆ†ææ¥æ”¹å–„ç‰©æµè¿ä½œå’Œé™ä½æˆæœ¬ã€‚

å¦‚æœä½ å¯¹æ•°æ®åˆ†æå’Œä¾›åº”é“¾æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„ç½‘ç«™

[](https://samirsaci.com) [## Samir Saci |æ•°æ®ç§‘å­¦ä¸ç”Ÿäº§åŠ›

### ä¸“æ³¨äºæ•°æ®ç§‘å­¦ã€ä¸ªäººç”Ÿäº§åŠ›ã€è‡ªåŠ¨åŒ–ã€è¿ç­¹å­¦å’Œå¯æŒç»­å‘å±•çš„æŠ€æœ¯åšå®¢

samirsaci.com](https://samirsaci.com) 

# å‚è€ƒ

[1] Kaggle æ•°æ®é›†ï¼Œå•†åº—å•†å“éœ€æ±‚é¢„æµ‹æŒ‘æˆ˜ï¼Œ[é“¾æ¥](https://www.kaggle.com/c/demand-forecasting-kernels-only)