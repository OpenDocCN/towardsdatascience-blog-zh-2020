<html>
<head>
<title>Lines Detection with Hough Transform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于霍夫变换的直线检测</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lines-detection-with-hough-transform-84020b3b1549?source=collection_archive---------0-----------------------#2020-05-02">https://towardsdatascience.com/lines-detection-with-hough-transform-84020b3b1549?source=collection_archive---------0-----------------------#2020-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="91ca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一种在图像中寻找直线的算法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f6fb96927ab06fa0807fcc82bab73935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pSAwZyau08leeYmTM9203Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用霍夫变换算法的直线检测</p></figure><blockquote class="ky kz la"><p id="53a3" class="lb lc ld le b lf lg ju lh li lj jx lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><strong class="le iu">注:</strong>你可以在这里阅读<a class="ae ly" href="https://www.infoq.cn/article/3KfCkf67yZQHuiFp0x3Q" rel="noopener ugc nofollow" target="_blank">这篇文章的中文版。</a></p></blockquote><h1 id="7dad" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">一.动机</h1><p id="080e" class="pw-post-body-paragraph lb lc it le b lf mr ju lh li ms jx lk mt mu ln lo mv mw lr ls mx my lv lw lx im bi translated">最近，我发现自己不得不将文档扫描仪功能整合到一个应用程序中。在做了一些研究后，我看到了Dropbox机器学习团队成员熊英写的一篇文章。<a class="ae ly" href="https://dropbox.tech/machine-learning/fast-and-accurate-document-detection-for-scanning" rel="noopener ugc nofollow" target="_blank">的文章</a>解释了Dropbox的机器学习团队如何通过强调他们经历的步骤以及每个步骤中使用的算法来实现他们的文档扫描仪(熊，2016)。通过那篇文章，我了解了一种叫做霍夫变换<strong class="le iu"> </strong>的方法，以及如何用它来检测图像中的线条。因此，在本文中，我将解释霍夫变换算法，并提供该算法在Python中的“从头”实现。</p><h1 id="eff1" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">二。霍夫变换</h1><p id="64f7" class="pw-post-body-paragraph lb lc it le b lf mr ju lh li ms jx lk mt mu ln lo mv mw lr ls mx my lv lw lx im bi translated">霍夫变换是一种由Paul V. C. Hough申请专利的算法，最初被发明用于识别照片中的复杂线条(Hough，1962)。自开始以来，该算法已经被修改和增强，以便能够识别其他形状，例如特定类型的圆形和四边形。为了理解Hough变换算法如何工作，理解四个概念是很重要的:边缘图像、Hough空间、边缘点到Hough空间的映射、表示线的另一种方法以及如何检测线。</p><h2 id="3551" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">边缘图像</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/fd13680344092bd5fac30c19bab73293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*dIx2EJj7ZQMNWSpoOHwefw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Canny边缘检测算法。来源:<a class="ae ly" href="https://aishack.in/tutorials/canny-edge-detector/" rel="noopener ugc nofollow" target="_blank">艾窝棚</a></p></figure><p id="d264" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">边缘图像是边缘检测算法的输出。边缘检测算法通过确定图像的亮度/强度发生剧烈变化的位置来检测图像中的边缘(“边缘检测-使用Python进行图像处理”，2020)。边缘检测算法的例子有:<a class="ae ly" href="https://en.wikipedia.org/wiki/Canny_edge_detector" rel="noopener ugc nofollow" target="_blank"> Canny </a>、<a class="ae ly" href="https://en.wikipedia.org/wiki/Sobel_operator" rel="noopener ugc nofollow" target="_blank"> Sobel </a>、<a class="ae ly" href="https://en.wikipedia.org/wiki/Laplace_operator" rel="noopener ugc nofollow" target="_blank"> Laplacian </a>等。边缘图像被二值化是很常见的，这意味着它的所有像素值不是1就是0。根据您的情况，1或0可以表示边缘像素。对于霍夫变换算法，首先执行边缘检测以产生边缘图像是至关重要的，该边缘图像随后将被用作算法的输入。</p><h2 id="1048" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">霍夫空间和边缘点到霍夫空间的映射</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/c863578259b416f3bbbeaef87d9cf793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y9ljU_--SdFe7on9W_axrA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从边缘点到霍夫空间的映射。</p></figure><p id="1dbe" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">霍夫空间是2D平面，其水平轴代表斜率，垂直轴代表边缘图像上的线的截距。边缘图像上的一条线用<em class="ld"> y = ax + b </em>的形式表示(Hough，1962)。边缘图像上的一条线在霍夫空间上产生一个点，因为一条线由其斜率<em class="ld"> a </em>和截距<em class="ld"> b </em>来表征。另一方面，边缘图像上的边缘点(<em class="ld"> xᵢ </em>、<em class="ld"> yᵢ </em>)可以有无限多条线穿过。因此，一个边缘点在霍夫空间产生一条直线，其形式为<em class="ld">b =axᵢ+yᵢ</em>(leaves，1992)。在霍夫变换算法中，霍夫空间用于确定边缘图像中是否存在直线。</p><h2 id="6c0e" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">表示线条的另一种方式</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/6d7452e773be1770ac721e06d7d1e9a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X1WO4jfw3qSsttBcfg2d3g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">计算直线斜率的方程式。</p></figure><p id="2432" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">以<em class="ld">y = ax+b</em><strong class="le iu"><em class="ld"/></strong>的形式表示线条以及带有斜率和截距的霍夫空间有一个缺陷。在这种形式下，该算法将无法检测垂直线，因为斜率<em class="ld"> a </em>对于垂直线是未定义的/无穷大(Leavers，1992)。从程序上来说，这意味着计算机需要无限的内存来表示一个的所有可能值。为了避免这个问题，直线由一条称为法线的线来表示，该线穿过原点并垂直于该直线。法线的形式为ρ<em class="ld">= x cos(</em>θ<em class="ld">)+y sin(</em>θ<em class="ld">)</em>其中ρ <em class="ld"> </em>为法线的长度，θ为法线与x轴的夹角。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/c93e6a93be021756de27489bf463e044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cr73Mte5NNgO16D4moKDQg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">直线及其对应霍夫空间的替代表示。</p></figure><p id="16a6" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">使用这个，代替用斜率<em class="ld"> a </em>和截距<em class="ld"> b </em>表示霍夫空间，现在用ρ和θ表示霍夫空间，其中横轴表示θ值，纵轴表示ρ值。边缘点到霍夫空间的映射以类似的方式工作，除了边缘点(<em class="ld"> x </em> ᵢ，<em class="ld"> y </em> ᵢ)现在在霍夫空间中产生余弦曲线而不是直线(leavers，1992)。线的这种正常表示消除了处理垂直线时出现的<em class="ld"> a </em>的无界值的问题。</p><h2 id="6a76" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">线检测</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c10c86154d6cf97735bb637bfc34fa28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4IzvGyS6jSyuuUTOF0OcA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">检测图像中线的过程。霍夫空间中的黄点表示存在直线，由θ和ρ对表示。</p></figure><p id="9225" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">如上所述，边缘点在霍夫空间中产生余弦曲线。由此，如果我们将边缘图像中的所有边缘点映射到霍夫空间，将会生成大量的余弦曲线。如果两个边缘点位于同一直线上，它们对应的余弦曲线将在特定的(ρ，θ)对上相交。因此，霍夫变换算法通过找到具有大于某个阈值的相交数的(ρ，θ)对来检测直线。值得注意的是，如果不进行一些预处理，如霍夫空间上的邻域抑制，以去除边缘图像中的相似线，这种阈值方法可能不总是产生最佳结果。</p><h1 id="132c" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">三。该算法</h1><ol class=""><li id="51de" class="no np it le b lf mr li ms mt nq mv nr mx ns lx nt nu nv nw bi translated">决定ρ和θ的范围。通常，θ的范围是[ 0，180 ]度，<em class="ld"> ρ </em>是[ - <em class="ld"> d </em>，<em class="ld"> d </em>，其中<em class="ld"> d </em>是边缘图像对角线的长度。量化ρ和θ的范围很重要，这意味着应该有有限数量的可能值。</li><li id="0828" class="no np it le b lf nx li ny mt nz mv oa mx ob lx nt nu nv nw bi translated">创建一个名为累加器的2D数组，表示维数为(<em class="ld"> num_rhos </em>，<em class="ld"> num_thetas </em>)的霍夫空间，并将其所有值初始化为零。</li><li id="9a6a" class="no np it le b lf nx li ny mt nz mv oa mx ob lx nt nu nv nw bi translated">对原始图像执行边缘检测。这可以用你选择的任何边缘检测算法来完成。</li><li id="afb3" class="no np it le b lf nx li ny mt nz mv oa mx ob lx nt nu nv nw bi translated">对于边缘图像上的每个像素，检查该像素是否是边缘像素。如果是边缘像素，则遍历θ的所有可能值，计算相应的ρ，在累加器中找到θ和ρ索引，并基于这些索引对递增累加器。</li><li id="2e12" class="no np it le b lf nx li ny mt nz mv oa mx ob lx nt nu nv nw bi translated">遍历累加器中的所有值。如果该值大于某个阈值，则获取ρ和θ指数，从指数对中获取ρ和θ的值，然后可以将其转换回形式<em class="ld"> y = ax + b </em>。</li></ol><h1 id="8d68" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">四。代码</h1><h2 id="f6e6" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">非矢量化解决方案</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用霍夫变换的直线检测(非矢量化)</p></figure><h2 id="dd34" class="mz ma it bd mb na nb dn mf nc nd dp mj mt ne nf ml mv ng nh mn mx ni nj mp nk bi translated">矢量化解决方案</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用霍夫变换的直线检测(矢量化)</p></figure><h1 id="264c" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">动词 （verb的缩写）结论</h1><p id="6526" class="pw-post-body-paragraph lb lc it le b lf mr ju lh li ms jx lk mt mu ln lo mv mw lr ls mx my lv lw lx im bi translated">总之，本文以最简单的形式展示了霍夫变换算法。如上所述，该算法可以扩展到检测直线之外。多年来，对该算法进行了许多改进，使其能够检测其他形状，如圆形、三角形，甚至特定形状的四边形。这导致了许多有用的现实世界应用，从文件扫描到自动驾驶汽车的车道检测。我相信，在可预见的未来，这种算法将推动更多令人惊叹的技术。</p></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><p id="0cc7" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated"><em class="ld">喜欢这篇文章并想表示支持？跟着我或者给我买咖啡</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.buymeacoffee.com/socretlee"><div class="gh gi ol"><img src="../Images/69716627feab2505c60838bbd29241a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gS6Sh6i8g535gOafY4Wl1w.png"/></div></a></figure><h1 id="f381" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">参考</h1><p id="55e6" class="pw-post-body-paragraph lb lc it le b lf mr ju lh li ms jx lk mt mu ln lo mv mw lr ls mx my lv lw lx im bi translated">边缘检测—使用Python进行图像处理。(2020年2月16日)。检索自<a class="ae ly" href="https://datacarpentry.org/image-processing/08-edge-detection/" rel="noopener ugc nofollow" target="_blank">https://data uniform . org/image-processing/08-edge-detection/</a></p><p id="6486" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">霍夫公司(1962年)。<em class="ld">识别复杂图案的方法和手段</em>(美国专利3069654)。检索自<a class="ae ly" href="https://patentimages.storage.googleapis.com/9f/9f/f3/87610ddec32390/US3069654.pdf" rel="noopener ugc nofollow" target="_blank">https://patent images . storage . Google APIs . com/9f/9f/F3/87610 dec 32390/us 3069654 . pdf</a></p><p id="bda3" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">离开者，V. F. (1992)。预处理，<em class="ld">使用霍夫变换在计算机视觉中进行形状检测</em>(第39–64页)。doi:10.1007/978–1–4471–1940–1</p><p id="0dac" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">林，c .(2018 . 12 . 17)。<em class="ld">教程:搭建车道检测器</em>。走向数据科学。检索自<a class="ae ly" rel="noopener" target="_blank" href="/tutorial-build-a-lane-detector-679fd8953132">https://towardsdatascience . com/tutorial-build-a-lane-detector-679 FD 8953132</a></p><p id="d749" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">Mukhopadhyay，p .和Chaudhuria，B. B. (2015年)。霍夫变换综述。<em class="ld">模式识别</em>。<em class="ld"> 48 </em> (3)，993–1010。从https://doi.org/10.1016/j.patcog.2014.08.027<a class="ae ly" href="https://doi.org/10.1016/j.patcog.2014.08.027" rel="noopener ugc nofollow" target="_blank">取回</a></p><p id="86cd" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">史密斯，B. (2018年9月21日)。<em class="ld">霍夫圆变换</em>。ImageJ。从https://imagej.net/Hough_Circle_Transform<a class="ae ly" href="https://imagej.net/Hough_Circle_Transform" rel="noopener ugc nofollow" target="_blank">取回</a></p><p id="be8d" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">索达，S. (2017年)。<em class="ld">索贝尔边缘检测的实现</em>。projectrhea.org。检索自<a class="ae ly" href="https://www.projectrhea.org/rhea/index.php/An_Implementation_of_Sobel_Edge_Detection" rel="noopener ugc nofollow" target="_blank">https://www . project Rhea . org/Rhea/index . PHP/An _ Implementation _ of _ Sobel _ Edge _ Detection</a></p><p id="065a" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">霍夫变换。(未注明)。从https://aishack.in/tutorials/hough-transform-basics/<a class="ae ly" href="https://aishack.in/tutorials/hough-transform-basics/" rel="noopener ugc nofollow" target="_blank">取回</a></p><p id="ad1e" class="pw-post-body-paragraph lb lc it le b lf lg ju lh li lj jx lk mt lm ln lo mv lq lr ls mx lu lv lw lx im bi translated">熊，于(2016)。<em class="ld">快速准确的扫描文件检测</em>。检索自<a class="ae ly" href="https://dropbox.tech/machine-learning/fast-and-accurate-document-detection-for-scanning" rel="noopener ugc nofollow" target="_blank">https://Dropbox . tech/machine-learning/fast-and-accurate-document-detection-for-scanning</a></p></div></div>    
</body>
</html>