<html>
<head>
<title>Advanced plots in Matplotlib — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib 中的高级绘图—第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/advanced-plots-in-matplotlib-part-1-30dbb02b09ae?source=collection_archive---------28-----------------------#2020-08-04">https://towardsdatascience.com/advanced-plots-in-matplotlib-part-1-30dbb02b09ae?source=collection_archive---------28-----------------------#2020-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9277" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">展示了 matplotlib 中的一些高级图，可以让我们的分析更上一层楼。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/905b261b866da14c0aec58e1815fd71a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpH0O_mq3YqKcsRCsLsfig.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="ee69" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">python 可视化环境由几个有用的 Python 库组成。每个图书馆都以自己独特的方式闪耀。虽然有些库很容易使用，但其他的有更好的功能。Matplotlib 就是这个可视化生态系统中的一个重要组成部分。Matplotlib 提供了多种方式将数字表示成有意义的图形和图表。下面的备忘单很好地展示了 Matplotlib 的各种功能，以及如何使我们的可视化更加有效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/ec1d1faa5d7c4f1816188f6938b04860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dA5nAps-6Fzt4yUw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Matplotlib 备忘单。完整图片:<a class="ae lv" href="https://lnkd.in/dD5fE8V" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/dD5fE8V</a></p></figure><p id="ce14" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">matplotlib 的基本功能，包括创建条形图、直方图、饼图等。众所周知。然而，在本文中，我将展示 matplotlib 中的一些高级图，它们可以使我们的分析更上一层楼。</p><p id="70d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">matplotlib 中的动画是另一个有趣的功能，我有一篇完整的文章专门介绍它。文章可以在这里阅读: <a class="ae lv" rel="noopener" target="_blank" href="/animations-with-matplotlib-d96375c5442c"> <strong class="la iu"> <em class="lw">用 Matplotlib 制作的动画。</em> </strong> </a></p><div class="lx ly gp gr lz ma"><a rel="noopener follow" target="_blank" href="/animations-with-matplotlib-d96375c5442c"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd iu gy z fp mf fr fs mg fu fw is bi translated">Matplotlib 动画</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">动画是展示一种现象的有趣方式。我们人类总是被动画和…</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">towardsdatascience.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo ks ma"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="37da" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">1.跨度选择器</h1><p id="2501" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated"><a class="ae lv" href="https://matplotlib.org/3.1.1/gallery/widgets/span_selector.html" rel="noopener ugc nofollow" target="_blank">跨度选择器</a>是 matplotlib 中的一个鼠标小部件。小部件是 python 对象，用于包含一些交互功能。跨度选择器通过鼠标选择返回图形中选定区域的最大值和最小值。</p><p id="b288" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在下面的代码片段中，我们首先创建一个基本的线图。然后我们调用 SpanSelector 方法，首先使用它来选择一个区域，然后打印该区域中的最大值和最小值。下面让我们来看看它的实际应用。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="9fd0" class="ny mx it nu b gy nz oa l ob oc"><strong class="nu iu">import</strong> <!-- -->matplotlib.pyplot as plt<br/><strong class="nu iu">from</strong> <!-- -->matplotlib.widgets <strong class="nu iu">import</strong> <!-- -->SpanSelector</span><span id="c558" class="ny mx it nu b gy od oa l ob oc"><strong class="nu iu">def</strong> <!-- -->onselect(xmin, xmax):<br/>    print(xmin, xmax)<br/>    <strong class="nu iu">return</strong> <!-- -->xmin, xmax</span><span id="83ad" class="ny mx it nu b gy od oa l ob oc">fig, ax <strong class="nu iu">=</strong> <!-- -->plt.subplots()<br/>ax.plot([1,2,3,4,5,6,7], [10, 50, 100, 23,15,28,45])<br/>span <strong class="nu iu">=</strong> <!-- -->SpanSelector(ax, onselect, 'horizontal', useblit<strong class="nu iu">=</strong>True, rectprops<strong class="nu iu">=</strong>dict(alpha<strong class="nu iu">=</strong>0.5, facecolor<strong class="nu iu">=</strong>'red'))       <br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/df99bc5f7a3fc0271faa566323855fcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_USeLl8zJscTAw-8"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Matplotlib 的跨度选择器的作用</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="dffa" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">2.断裂条形图-断裂的水平条形图</h1><p id="a29b" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">“断开的”水平条形图是一个有缺口的图。它用于数据值变化很大的情况，例如，由极端温度范围组成的数据集。在这种情况下，折线图是理想的，因为它们可以完美地绘制最大和最小范围。</p><p id="6c81" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">python 模块<code class="fe of og oh nu b">matplotlib.broken_barh()</code>用于绘制断裂的水平条形图。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="6fd6" class="ny mx it nu b gy nz oa l ob oc">import matplotlib.pyplot as plt <br/>#Defining the x and y ranges <br/>xranges = [(5,5), (20,5),(20,7)] <br/>yrange = (2,1) <br/>#Plotting the broken bar chart <br/>plt.broken_barh(xranges, yrange, facecolors='green') <br/>xranges = [(6,2), (17,5),(50,2)] <br/>yrange = (15,1) <br/>plt.broken_barh(xranges, yrange, facecolors='orange') <br/>xranges = [(5,2), (28,5),(40,2)] <br/>yrange = (30,1) <br/>plt.broken_barh(xranges, yrange, facecolors='red') plt.xlabel('Sales') <br/>plt.ylabel('Days of the Month') <br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/f00d53e726b708b4dee7d176f07dd45d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*x-JYZCETo4mNPCF1.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">断开的水平条形图</p></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="4318" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">3.表格演示</h1><p id="9118" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">Matplotlib 的<a class="ae lv" href="https://matplotlib.org/3.2.1/gallery/misc/table_demo.html" rel="noopener ugc nofollow" target="_blank">表格函数</a>可以在绘图中显示表格。当您想要以条形图的形式查看表格中的快速可视化值，并将表格放在旁边时，这尤其方便。表格可以放置在图的顶部、底部或侧面。以下是如何轻松创建一个。</p><blockquote class="oj ok ol"><p id="8822" class="ky kz lw la b lb lc ju ld le lf jx lg om li lj lk on lm ln lo oo lq lr ls lt im bi translated">下面的例子摘自<strong class="la iu">刚刚发光的 Python(@ </strong>刚刚发光)的<a class="ae lv" href="https://twitter.com/JustGlowing/status/1290209800077209600" rel="noopener ugc nofollow" target="_blank">推文</a></p></blockquote><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="94e8" class="ny mx it nu b gy nz oa l ob oc">import pandas as pd <br/>import numpy as np <br/>import matplotlib.pyplot as plt <br/>x = np.random.rand(5, 8)*.7 <br/>plt.plot(x.mean(axis=0), '-o', label='average per column') plt.xticks([]) </span><span id="565e" class="ny mx it nu b gy od oa l ob oc">plt.table(cellText=[['%1.2f' % xxx for xxx in xx] for xx in x],cellColours=plt.cm.GnBu(x),loc='bottom') <br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/f88181c9fb9ff5c7b46d3c9816de0033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*1DrfSWxQ88PZ1i3J.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">matplotlib 中的表格绘图，底部有一个表格</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/9a1dbdf138e09bd946c30c0f3d51bd14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*-BQhFUM2c3jyu-xE"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">matplotlib 中的表格绘图，顶部有一个表格</p></figure><h1 id="f9c8" class="mw mx it bd my mz oq nb nc nd or nf ng jz os ka ni kc ot kd nk kf ou kg nm nn bi translated">4.水印图像</h1><p id="8c53" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">有时，将图像作为水印有助于为情节添加独特的味道。例如，如果我们要分析多年来顶级运动员的收入，将他们的照片放在背景中有助于我们轻松地区分不同运动员的情况。让我们分析一个由许多运动员的收入组成的数据集。我们将绘制一张勒布朗·詹姆斯历年收入的图表，单位为美元(百万)。</p><p id="263d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">先导入<a class="ae lv" href="https://github.com/parulnith/Website-articles-datasets/blob/master/Lebron_James_income.csv" rel="noopener ugc nofollow" target="_blank">数据集</a>，<a class="ae lv" href="https://github.com/parulnith/Website-articles-datasets/blob/master/LeBron_James.jpeg" rel="noopener ugc nofollow" target="_blank">图片</a>用于水印和必要的库。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="2d15" class="ny mx it nu b gy nz oa l ob oc">import numpy as np <br/>import matplotlib.image as image <br/>import matplotlib.pyplot as plt <br/>import pandas as pd <br/>df = pd.read_csv('income.csv') <br/>im = image.imread('Lebron_James.jpeg') # Image</span></pre><p id="c073" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">该数据集由许多运动员的收入组成。让我们筛选出只包含勒布朗的数据。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="5403" class="ny mx it nu b gy nz oa l ob oc">lebron_james = df[df['Name']=='LeBron James']</span></pre><p id="bf2e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">显示带水印的绘图。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="734f" class="ny mx it nu b gy nz oa l ob oc">fig, ax = plt.subplots() <br/>ax.grid() <br/>ax.plot('Year','earnings ($ million)',data=lebron_james) ax.set_title("LeBron James earnings in US$(millions)") fig.figimage(im, 60, 40,cmap='ocean', alpha=.2) <br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/2fd82105dda9888ae409883b6192b22d.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/0*Uo4zpwXQn1oeSIi7.png"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="48f5" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">5.XKCD 图</h1><p id="64f2" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">现在让我们在剧情中加入一些有趣的元素。<a class="ae lv" href="https://xkcd.com/" rel="noopener ugc nofollow" target="_blank"> xkcd </a>是由<a class="ae lv" href="https://en.wikipedia.org/wiki/Randall_Munroe" rel="noopener ugc nofollow" target="_blank">兰道尔·门罗</a>创作的网络漫画，展示了很多幽默的情节。这些图定期出现在许多数据科学演示文稿中，例如，下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/48bde43cc79bf85930e8bf1b4c7fbbfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/0*ysDJGi3SNrg1szVL.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:xkcd.com</p></figure><p id="881c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好吧，如果你想给你的 matplotlib 图添加一些扭曲，你可以简单地调用 pyplot 对象上的<code class="fe of og oh nu b">xkcd()</code>方法，如下所示。在这里，我们正在使用印度的 GDP 数据集，该数据集显示了 2010 年至 2019 年的 GDP 增长率百分比。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="7f0e" class="ny mx it nu b gy nz oa l ob oc">import pandas as pd <br/>import matplotlib.pyplot as plt <br/>df = pd.read_csv('https://raw.githubusercontent.com/parulnith/Website-articles-datasets/master/India%20GDP%20Growth%20Rate%20.csv', parse_dates=['Year']) <br/>df['Year'] = df['Year'].apply(lambda x: pd.Timestamp(x).strftime('%Y')) </span><span id="52b2" class="ny mx it nu b gy od oa l ob oc">#calling xkcd() method <br/>plt.xkcd(scale=5, length=400) <br/>df.plot(x='Year',y='GDP Growth (%)',kind='bar') <br/>plt.ylabel('GDP Growth (%)') <br/>plt.xticks(rotation=-20) <br/>plt.figure(figsize=(10,8)) <br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/fb0d2aff5c21c6593d0003bdc5f29088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*OeVWLNl3EDtptqpP.png"/></div></figure><h1 id="b5ae" class="mw mx it bd my mz oq nb nc nd or nf ng jz os ka ni kc ot kd nk kf ou kg nm nn bi translated">结论</h1><p id="e03b" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh nq lj lk ll nr ln lo lp ns lr ls lt im bi translated">这些是 matplotib 中一些有趣的高级功能。还有一些其他很酷的图表，我已经在文章的第二部分列出了:</p><div class="lx ly gp gr lz ma"><a rel="noopener follow" target="_blank" href="/advanced-plots-in-matplotlib-part-2-e88f91ce9e31"><div class="mb ab fo"><div class="mc ab md cl cj me"><h2 class="bd iu gy z fp mf fr fs mg fu fw is bi translated">Matplotlib 中的高级绘图—第 2 部分</h2><div class="mh l"><h3 class="bd b gy z fp mf fr fs mg fu fw dk translated">Matplotlib 可视化库的一些鲜为人知但功能强大的特性。</h3></div><div class="mi l"><p class="bd b dl z fp mf fr fs mg fu fw dk translated">towardsdatascience.com</p></div></div><div class="mj l"><div class="ox l ml mm mn mj mo ks ma"/></div></div></a></div><p id="20a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，抓住一个有趣的数据集，运用你新学到的技能来很好地理解这个主题。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="f266" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[1]最初发表于<a class="ae lv" href="https://parulpandey.com/2020/08/04/advanced-plots-in-matplotlib%e2%80%8a-%e2%80%8apart-1/" rel="noopener ugc nofollow" target="_blank">parulpandey.com</a></p></div></div>    
</body>
</html>