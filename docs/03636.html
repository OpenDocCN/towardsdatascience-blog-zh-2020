<html>
<head>
<title>Tutorial: Plotting in R for Python Refugees</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教程:用 R 为 Python 难民绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tutorial-plotting-in-r-for-python-refugees-15bf4500de5d?source=collection_archive---------53-----------------------#2020-04-05">https://towardsdatascience.com/tutorial-plotting-in-r-for-python-refugees-15bf4500de5d?source=collection_archive---------53-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9489387ac642230041b438e2c6f40263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jY6UwJbWr1Z7Un-_KPiMoQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来自 Pixabay 的背景图片。</p></figure><div class=""/><div class=""><h2 id="1d74" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">了解 R 惊人的绘图能力</h2></div><p id="3c83" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">虽然 Python 和 R 都是用于数据分析和机器学习的伟大语言，但大多数人都同意的一点是，R 在数据可视化方面占上风。虽然 Python 可能更适合快速绘图，但 R 具有可定制性控件，可以创建 Python 可以创建的几乎所有东西，甚至更远。最重要的是，R library <code class="fe lt lu lv lw b">ggplot2</code>遵循“图形语法”,比 Python 有更有组织和结构化的方式来绘制图表。</p><p id="1748" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果您是一名 Python 难民，正在寻找一种更好、更有条理的方法来绘制数据，那么本教程就是为您准备的！</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="eaef" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们将使用的绘图库是 ggplot2。基于图形的语法，它的工作原理是每个图形都可以由三个部分组成:</p><ul class=""><li id="9672" class="me mf ji kz b la lb ld le lg mg lk mh lo mi ls mj mk ml mm bi translated">数据集</li><li id="6f85" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">坐标系</li><li id="30b2" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">几何图形，或表示数据点的可视标记</li></ul><p id="9f4a" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了显示数值，数据中的变量需要映射到几何、美学的属性，如尺寸、颜色或<code class="fe lt lu lv lw b">x</code>和<code class="fe lt lu lv lw b">y</code>轴位置。</p><p id="2b4d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们从数据集开始。<code class="fe lt lu lv lw b">ggplot2</code>有一些内置功能。这</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="4d80" class="na nb ji lw b gy nc nd l ne nf">options(scipen=999)  # turn off scientific notation like 1e+06<br/>library(ggplot2)<br/>data("midwest", package = "ggplot2")  # load the data</span></pre><p id="fbd6" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在我们有了数据，是时候指定坐标系了。<code class="fe lt lu lv lw b">aes()</code>功能可用于指定<code class="fe lt lu lv lw b">x</code>和<code class="fe lt lu lv lw b">y</code>轴。<code class="fe lt lu lv lw b">area</code>和<code class="fe lt lu lv lw b">poptotal</code>是<code class="fe lt lu lv lw b">midwest</code>表格中的列。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="6263" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal))</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/2743a5a7201f4e86136d36fb2b18df0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SSmZE-du9O5wOofyOiQm2g.png"/></div></div></figure><p id="836e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这里有一个空白坐标系，最后，是时候添加几何图形了。在这种情况下，由于我们正在制作一个散点图，将使用<code class="fe lt lu lv lw b">geom_point()</code>，它将点放到坐标系中。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="01d2" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + geom_point()</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nh"><img src="../Images/4095d8c5f866a1300e76c318fa199fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DpWlaQart2q0k09Ap7qKXQ.png"/></div></div></figure><p id="a00d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们还可以添加其他层。例如，如果我们想添加一个线性回归，我们可以添加一个<code class="fe lt lu lv lw b">geom_smooth(method=’lm’)</code> geom。它对由<code class="fe lt lu lv lw b">ggplot</code>公式的初始数据部分指定的相同数据进行操作。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="d3d1" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + geom_point() + geom_smooth(method="lm")</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ni"><img src="../Images/64d5e9c935e1f50b889d6e444a7410df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFTRmzOqDBOCkvEdY4mBVg.png"/></div></div></figure><p id="1eeb" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们还可以添加改变图形的层。例如，要放大图形的一部分，可以添加接受两个向量的<code class="fe lt lu lv lw b">coord_cartesian</code>层——一个描述<code class="fe lt lu lv lw b">x</code>轴范围，另一个描述<code class="fe lt lu lv lw b">y</code>轴范围。注意，在 R 中，c()或 concatenate 函数创建一个向量(类似于一个<code class="fe lt lu lv lw b">NumPy</code>数组或列表)。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="8b74" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + geom_point() + geom_smooth(method="lm") + coord_cartesian(xlim=c(0,0.1), ylim=c(0, 100000))</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nj"><img src="../Images/3130ca3ce2735617d9c852bfe1a27b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Oa9V7bnMT3xcu_ef8CzKA.png"/></div></div></figure><p id="55d5" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">除了添加几何图形和缩放，<code class="fe lt lu lv lw b">+</code>操作符还允许标记标题和轴。在这种情况下，<code class="fe lt lu lv lw b">+ ggtitle(“Title”,subtitle = 'subtitle')</code>可用于为<code class="fe lt lu lv lw b">x</code>和<code class="fe lt lu lv lw b">y</code>轴添加标题和<code class="fe lt lu lv lw b">+ xlab(‘axis’)</code>和<code class="fe lt lu lv lw b">+ ylab(‘axis’)</code>。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="4876" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + geom_point() + geom_smooth(method="lm") + coord_cartesian(xlim=c(0,0.1), ylim=c(0, 100000)) + ggtitle("Area Vs Population", subtitle="From midwest dataset") + xlab("Area") + ylab("Population")</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/05983478d4930cb2cc5b893eb4c6fe43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2woCktBp1Vnj2vVUvsT_dA.png"/></div></div></figure><p id="3461" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了以一种更加结构化的方式组织所有的层，而不是把它们都塞进一行，在<code class="fe lt lu lv lw b">+</code>之后创建一个新行。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="089b" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + <br/>geom_point() + <br/>geom_smooth(method="lm") + <br/>coord_cartesian(xlim=c(0,0.1), ylim=c(0, 100000)) + <br/>ggtitle("Area Vs Population", subtitle="From midwest dataset") + <br/>xlab("Area") + <br/>ylab("Population")</span></pre><p id="80e8" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">每个图层都有自己的参数，例如，我们可以根据 geom 类型指定颜色和大小。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="5b4b" class="na nb ji lw b gy nc nd l ne nf">ggplot(midwest, aes(x=area, y=poptotal)) + <br/>  geom_point(col="purple", size=0.5) +<br/>  geom_smooth(method="lm", col="firebrick")</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nl"><img src="../Images/729f56a0c77916607d699f5eb1d05965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DDXKVzGea2nOJkVkZPRHA.png"/></div></div></figure><p id="4d74" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果我们想根据类改变颜色，只需将颜色参数(<code class="fe lt lu lv lw b">col</code>)设置为与颜色应该区分的列名相同。<code class="fe lt lu lv lw b">aes()</code>需要指定引用的数据。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="6488" class="na nb ji lw b gy nc nd l ne nf">g &lt;- ggplot(midwest, aes(x=area, y=poptotal)) + <br/>  geom_point(aes(col=state), size=3) +  # Set color to vary based on state categories.<br/>  geom_smooth(method="lm", col="firebrick", size=2)<br/>plot(g)</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/e1125c81ddec074369cc34d2f300ffda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-eSuY4F-IygLBDu4xeBHQ.png"/></div></div></figure><p id="b34e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">可以通过添加另一层来设置调色板。</p><pre class="ms mt mu mv gt mw lw mx my aw mz bi"><span id="eb95" class="na nb ji lw b gy nc nd l ne nf">gg + scale_colour_brewer(palette = "Set1")</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/f0a4c9caeae2be430c1ef725661d47f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jNC12KNdJ_psz8orz4zrPw.png"/></div></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="5c01" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在本教程中，您学习了:</p><ul class=""><li id="01de" class="me mf ji kz b la lb ld le lg mg lk mh lo mi ls mj mk ml mm bi translated">图形的语法</li><li id="c934" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">向图中添加数据</li><li id="d8be" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">向地块添加坐标</li><li id="35f7" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">向图中添加散点图几何</li><li id="703c" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">向图中添加其他形式的几何图形，如回归</li><li id="180b" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">更改绘图的比例</li><li id="d6a2" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">调整几何图形的大小和颜色</li><li id="a3c9" class="me mf ji kz b la mn ld mo lg mp lk mq lo mr ls mj mk ml mm bi translated">更改调色板</li></ul><p id="4e75" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">感谢阅读！</p></div></div>    
</body>
</html>