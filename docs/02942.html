<html>
<head>
<title>Free Stock Data for Python Using Yahoo Finance API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Yahoo Finance API 为 Python 免费提供股票数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/free-stock-data-for-python-using-yahoo-finance-api-9dafd96cad2e?source=collection_archive---------0-----------------------#2020-03-21">https://towardsdatascience.com/free-stock-data-for-python-using-yahoo-finance-api-9dafd96cad2e?source=collection_archive---------0-----------------------#2020-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2aee" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在这篇文章中，我将探索通过 Python 代码与 Yahoo Finance API 集成的用途。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e17fdc0981bf1aae9383213e5dd47508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qN1Gtb08SMbkVXDx"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@ricktap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">里克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上敲击</a></p></figure><h1 id="5278" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是雅虎财经 API？</h1><p id="ae89" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">雅虎财经是一个媒体平台，提供金融新闻、股票报价数据、新闻发布和财务报告。而且雅虎财经提供的所有数据都是免费的。Yahoo Finance API 是 Yahoo 提供的获取财务信息的 API。</p><p id="3985" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">雅虎在 2017 年弃用了他们的财务 API。所以你可以看到很多网站在谈论雅虎财经 API 的替代品。然而，python 库<a class="ae ky" href="https://github.com/ranaroussi/yfinance" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> yfinance </strong> </a>通过从 Yahoo！财务并以 DataFrame 格式返回数据。所以你仍然可以使用雅虎财经获得免费的股市数据。</p><p id="96b8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">雅虎财经提供了超过五年的每日 OHLC 价格数据。此外，您可以获得最近几天的分钟 OHLC 数据。</p><h1 id="7d91" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">开始吧</h1><p id="6bea" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Yahoo Finance API 提供对以下信息的访问:</p><ul class=""><li id="6ab6" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">财务摘要，如收益，资产负债表。</li><li id="3a36" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">股票历史价格。</li><li id="ac17" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">股票行为(包括拆分和分红)。</li></ul><p id="92f5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">所有这些信息都来自雅虎财经官网。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="cbf9" class="nl la it nh b gy nm nn l no np"># To install yfinance before you use it.<br/>&gt; pip install yfinance</span></pre><h1 id="f356" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">速度限制</h1><p id="fd20" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">调用 Yahoo Finance API 有一些限制:</p><ul class=""><li id="0dd1" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">使用公共 API(没有身份验证)，每个 IP 每小时最多只能有 2，000 个请求(或者一天最多 48，000 个请求)。</li></ul><p id="7cea" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我不确定这是为了财务数据。但是请使用 time.sleep(1)来避免您的 IP 被阻止。</p><h1 id="ed96" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">历史价格和图表</h1><p id="7ab4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您必须调用<code class="fe nq nr ns nh b">Ticker</code>模块来访问 ticker 数据。这里有一个简单的例子来检索五天的<code class="fe nq nr ns nh b">MSFT</code>股票 OHLC 数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="9a84" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在你可以得到如下结果:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="e852" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您可以为 history()方法设置更多参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="f9e6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">绘制历史价格</h1><p id="640f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果还没有安装，可以运行命令安装 matplotlib 和 seaborn。</p><pre class="kj kk kl km gt ng nh ni nj aw nk bi"><span id="2d46" class="nl la it nh b gy nm nn l no np">pip install matplotlib<br/>pip install seaborn</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/278c22579ac3ddd489ba0c7206b41716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_kwrV9iK97DgJQw7"/></div></div></figure><h1 id="d02b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">将数据导出为 CSV 格式</h1><p id="f127" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">此外，您可以将数据导出为 CSV 格式进行分析。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="c788" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该功能将设置<strong class="lt iu"> auto_adjust </strong>默认值为真。如果你不想要它，你可以改变它的值。</p><h1 id="9e87" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">金融基础</h1><p id="61e2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">您可以快速查看一些财务数据，如股息和拆分。您需要更改历史记录的代码长度来获取金融基本面数据。</p><p id="c360" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">更新于 2020/03/21 </strong>:目前没有收益和资产负债表信息。可能需要另一个 API 来找出数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="0df4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">最后</h1><p id="d7db" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本文中，我们了解了从雅虎财经获得股票市场数据有多简单。你可以开始写数据背后的分析。如果你有任何问题，请在下面提问。</p></div></div>    
</body>
</html>