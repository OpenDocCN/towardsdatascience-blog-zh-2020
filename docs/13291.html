<html>
<head>
<title>Building a Cardboard Empire: Introduction to the TCGplayer API using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建纸板帝国:使用 Python 介绍 TCGplayer API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-cardboard-empire-introduction-to-the-tcgplayer-api-using-python-fbfc2d62ef51?source=collection_archive---------19-----------------------#2020-09-12">https://towardsdatascience.com/building-a-cardboard-empire-introduction-to-the-tcgplayer-api-using-python-fbfc2d62ef51?source=collection_archive---------19-----------------------#2020-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b674" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 Python 连接到 TCGplayer.com API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c1755aee6d30edd2e4e9de56a35b2a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0X4k7mUFGWACItD4"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">韦恩·洛在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="110a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">纸板的生活</h1><p id="81a6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我几乎一生都在玩纸牌游戏，并在 90 年代中期大约在二年级的时候开始玩<a class="ae ky" href="https://en.wikipedia.org/wiki/Magic:_The_Gathering" rel="noopener ugc nofollow" target="_blank">魔法:聚会(MTG) </a>。虽然这不是一个让我受女孩欢迎的真正爱好，但我断断续续地坚持了下来，并在十几岁的时候花了许多周五晚上在纸牌店打磨构建的锦标赛和增强草案。现在我对编程和数据科学感兴趣，我很高兴了解到在线纸牌游戏市场，<a class="ae ky" href="http://tcgplayer.com" rel="noopener ugc nofollow" target="_blank">TCGplayer.com</a>有一个免费的 API。</p><p id="8f30" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">本文将带您了解如何使用 Python 和请求库连接和搜索 TCGplayer API。<strong class="lt iu">完整代码可在底部找到！</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/cec5e10880c04ddffbba41e1622a1bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_tg65c4zaXxUYp8aZJT4Qg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我的魔法中的几张卡片:收集</p></figure><h1 id="7031" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">获取 API 密钥</h1><p id="d174" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">TCGplayer 是一个收集物品的互联网市场，允许用户建立商店，通过它他们可以在线出售他们的库存。API 代表<strong class="lt iu"> <em class="mt">应用编程接口</em> </strong>。</p><blockquote class="mu mv mw"><p id="cad9" class="lr ls mt lt b lu mn ju lw lx mo jx lz mx mp mc md my mq mg mh mz mr mk ml mm im bi translated">位于 api.tcgplayer.com 的 TCGplayer API 是一个 RESTful API 应用程序，它与 TCGplayer 商店站点进行交互。存在大量的端点，它们返回目录的所有方面，查找定价信息，并管理个人商店。—<a class="ae ky" href="https://docs.tcgplayer.com/docs/welcome" rel="noopener ugc nofollow" target="_blank">https://docs.tcgplayer.com/docs/welcome</a></p></blockquote><p id="1132" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要访问他们的 API，首先填写他们的申请表:</p><div class="na nb gp gr nc nd"><a href="https://developer.tcgplayer.com/developer-application-form.html" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">TCGplayer APIs 开发人员社区和文档</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">此处的所有原创内容均为 2018 TCGplayer，Inc .版权所有。TCGplayer.com 是 TCGplayer，Inc .的商标</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">developer.tcgplayer.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ks nd"/></div></div></a></div><h1 id="2bba" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使用 Python 通过请求访问 API</h1><p id="785f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">一旦你的文书工作被接受，TCGplayer 的代表将通过电子邮件向你发送一个<strong class="lt iu">申请 Id </strong>、<strong class="lt iu">公钥</strong>和<strong class="lt iu">私钥</strong>。使用这些键，可以使用 Python 中的<a class="ae ky" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">请求</strong> </a>库创建到 API 的连接。根据需要使用 Pip 安装请求:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="3c97" class="nx la it nt b gy ny nz l oa ob">python -m pip install requests</span></pre><h1 id="18a6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">文件 config.py &amp;管理 API 密钥</h1><p id="7e93" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu"> <em class="mt">本项目使用 API 密钥</em> </strong>。如果你是管理钥匙的新手，确保将它们保存到一个<strong class="lt iu"> <em class="mt"> config.py </em> </strong>文件中，而不是在你的应用程序中硬编码它们。<strong class="lt iu"> API 密钥非常有价值，必须加以保护</strong>。<a class="ae ky" rel="noopener" target="_blank" href="/a-simple-git-workflow-for-github-beginners-and-everyone-else-87e39b50ee08">将配置文件添加到 gitignore 文件中，防止它也被推送到您的 repo 中<em class="mt">！</em>T13】</a></p><h2 id="fc56" class="nx la it bd lb oc od dn lf oe of dp lj ma og oh ll me oi oj ln mi ok ol lp om bi translated">用你的钥匙</h2><p id="2463" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">创建<strong class="lt iu"><em class="mt"/></strong>需要<strong class="lt iu">公钥</strong>和<strong class="lt iu">私钥</strong>。一个无记名令牌基本上告诉系统给持有令牌的任何东西以访问权。它是由认证服务器自动生成的。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="9523" class="nx la it nt b gy ny nz l oa ob">#import dependencies<br/>import requests</span><span id="756c" class="nx la it nt b gy on nz l oa ob">#pull in api keys from config file<br/>from config import public_key, private_key</span><span id="f060" class="nx la it nt b gy on nz l oa ob">#construct api request<br/>response = requests.<strong class="nt iu">post</strong>(<br/>            "<a class="ae ky" href="https://api.tcgplayer.com/token" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/token</a>",<br/>            <br/>            <strong class="nt iu">headers</strong>={<br/>                "Content-Type": "application/json",<br/>                "Accept": "application/json"},<br/>           <br/>            <strong class="nt iu">data</strong>=(f"grant_type=client_credentials"<br/>                  f"&amp;client_id={<strong class="nt iu">public_key</strong>}&amp;"<br/>                  f"client_secret={<strong class="nt iu">private_key</strong>}")<br/>        )</span></pre><p id="796b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意我使用了一个<strong class="lt iu"> POST </strong>请求到<em class="mt"> /token </em> URL。我将包含 API 键的<em class="mt">头</em>和<em class="mt">数据有效载荷</em>传递到请求中。返回承载令牌和元数据。</p><p id="5fc6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<strong class="lt iu">查看响应中返回的数据。json()或。正文</strong></p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="650f" class="nx la it nt b gy ny nz l oa ob">response.<strong class="nt iu">json()</strong></span><span id="ab1b" class="nx la it nt b gy on nz l oa ob">#output<br/># {'access_token': '<strong class="nt iu">YOUR_GENERATED_TOKEN</strong>',<br/># 'token_type': 'bearer',<br/># 'expires_in': 1209599,<br/># 'userName': '<strong class="nt iu">YOUR_GENERATED_USERNAME</strong>',<br/># '.issued': 'Sat, 12 Sep 2020 15:40:32 GMT',<br/># '.expires': 'Sat, 26 Sep 2020 15:40:32 GMT'}</span></pre><p id="1541" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意，不记名令牌已过期。TCGplayer 建议缓存元数据，只在密钥即将过期时重新生成密钥。</p><p id="80e9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">既然已经生成了不记名令牌，就可以使用它与 API 进行交互了。</p><p id="75fd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将无记名令牌保存到变量:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="77d4" class="nx la it nt b gy ny nz l oa ob">access = response.json()['access_token']</span></pre><p id="1ae8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将无记名令牌连同单词“<strong class="lt iu">无记名</strong>”一起传入请求<strong class="lt iu">报头</strong>。<br/> TCGplayer 还希望您在头文件中包含一个<strong class="lt iu">用户代理</strong>，这样他们可以更容易地跟踪 API 的使用情况:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="3ae0" class="nx la it nt b gy ny nz l oa ob">headers = {"accept": "application/json", <br/>           "Content-Type": "application/json",<br/>           <strong class="nt iu">'User-Agent': 'YOUR_USER_AGENT',<br/>           "Authorization": "bearer " + access</strong>}</span></pre><p id="cd78" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">选择要与之交互的 API 端点。我将从<strong class="lt iu">目录&gt;开始，列出所有类别</strong> API 端点，并开始探索！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/151f974c34991aafdc58d457b854051c.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*GmnlwC4XgOe-WQUoLokNRQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">TCGplayer.com API 端点</p></figure><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="1006" class="nx la it nt b gy ny nz l oa ob">url = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/categories" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/categories</a>"</span><span id="2258" class="nx la it nt b gy on nz l oa ob">response = requests.get(url, headers=headers)</span><span id="d5c6" class="nx la it nt b gy on nz l oa ob">response.json()</span></pre><p id="280e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意变量<strong class="lt iu"> URL </strong>是我想要命中的 API 端点。<br/>我将<strong class="lt iu"> URL </strong>和<strong class="lt iu">头</strong>传递给<em class="mt"> GET </em>请求并返回<em class="mt"> JSON </em>响应。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/7cf67ecaabdf67aed591709eb3e28de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*hBQF8GfGeBZUO0qnIdTPiA.png"/></div></figure><p id="eba2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果我想探索某个特定类别的更多信息，我可以在 API 端点的 URL 中使用 categoryID。例如，下面的 URL 将让我搜索类别 1(魔术聚会是类别 1):</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="d389" class="nx la it nt b gy ny nz l oa ob">#search the mtg catalog <a class="ae ky" href="https://api.tcgplayer.com/catalog/categories/1/search" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/categories/1/search</a></span></pre><p id="68b7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">虽然大多数 API 端点可以通过 GET 请求来访问，但有些端点，如<strong class="lt iu">目录&gt;搜索类别产品</strong>允许您使用<em class="mt"> POST </em>请求向请求传递过滤器。</p><p id="5c2c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">比如说我要搜魔:聚拢卡<em class="mt">什一税。我可以将一个<strong class="lt iu">排序</strong>选项，以及<strong class="lt iu">过滤器</strong>和<strong class="lt iu">聚合</strong>传递到 JSON 有效负载中。</em></p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="2fee" class="nx la it nt b gy ny nz l oa ob">url = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/categories/1/search" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/categories/1/search</a>"</span><span id="212c" class="nx la it nt b gy on nz l oa ob"><strong class="nt iu">payload </strong>= {"<strong class="nt iu">sort</strong>":"Relevance",<br/>           "<strong class="nt iu">filters</strong>": [{<br/>              "<strong class="nt iu">values</strong>": ["Tithe"],<br/>              "<strong class="nt iu">name</strong>": "productName"<br/>          }]}</span><span id="1822" class="nx la it nt b gy on nz l oa ob">search_response = requests.request("POST", url, json=payload, headers=headers)</span><span id="5e95" class="nx la it nt b gy on nz l oa ob">search_response.json()</span></pre><p id="7a01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该请求返回产品 id 列表。根据项目的排序方式，产品 id 列表与结果在 TCGplayer.com 上的显示方式相匹配</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/7966823bf632252ac15736da2574adb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gBU4lQhx_oTK9wZAPR_RiQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Search_response.text 按相关性排序的 Tithe</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/4165bf1d207a300d53d61feec20bb9eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DOlUhBiV5-w-MpOZ2J7QBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">按 TCGplayer.com 的相关性排序的什一税搜索结果</p></figure><p id="7dff" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要在搜索请求中检索关于卡的信息，只需将逗号分隔的列表传递给 API 端点 URL。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="f4b0" class="nx la it nt b gy ny nz l oa ob">endpoint = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/products/" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/products/</a>"<br/>productids = str(search_response.json()["results"])</span><span id="c6be" class="nx la it nt b gy on nz l oa ob">url = endpoint + productids</span><span id="acc1" class="nx la it nt b gy on nz l oa ob">response = requests.get( url, headers=headers)</span><span id="e4f1" class="nx la it nt b gy on nz l oa ob">response.json()</span></pre><p id="ebfb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意，我只是将 API 端点与产品 id 列表结合起来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/f96236a0e369ec33ff02b8631aa841b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*4p6eR3SdzCaO73lfVf8bUA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">response.json()</p></figure><blockquote class="ot"><p id="1431" class="ou ov it bd ow ox oy oz pa pb pc mm dk translated">恭喜你！您现在可以导航和探索 TCGplayer API 了！</p></blockquote><h1 id="57d9" class="kz la it bd lb lc ld le lf lg lh li lj jz pd ka ll kc pe kd ln kf pf kg lp lq bi translated">最终想法和代码</h1><p id="5f56" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">纸牌游戏并没有走向任何地方，它已经成熟成为一个受欢迎的利基市场。魔术:聚会到现在已经有将近 30 年了！使用像 TCGplayer API 这样的工具，有一个独特的机会来进行一些数据分析和数据科学，并开发新的工具和应用程序来帮助玩家建立和管理他们的收藏。通过 TCGplayer API，甚至可以运行您的在线商店！</p><p id="4819" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你喜欢这篇文章，可以看看我关于编程和数据科学的其他文章:</p><div class="na nb gp gr nc nd"><a href="https://medium.com/swlh/how-to-create-a-dashboard-to-dominate-the-stock-market-using-python-and-dash-c35a12108c93" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">如何使用 Python 和 Dash 创建控制股市的仪表板</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">自由期权订单流、价格、基本面、聊天集于一身</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="pg l no np nq nm nr ks nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a rel="noopener follow" target="_blank" href="/3-super-simple-projects-to-learn-natural-language-processing-using-python-8ef74c757cd9"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">使用 Python 学习自然语言处理的 3 个超级简单的项目</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">单词云、垃圾邮件检测和情感分析的简单代码示例</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="ph l no np nq nm nr ks nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a rel="noopener follow" target="_blank" href="/three-data-science-technologies-to-explore-while-you-self-isolate-what-is-docker-airflow-and-78969ba4f5fe"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">自我隔离时探索三种数据科学技术:什么是 Docker、Airflow 和…</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">探索 Docker、Airflow 和 Elasticsearch，扩展您的数据科学技术堆栈</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="pi l no np nq nm nr ks nd"/></div></div></a></div><h2 id="f77d" class="nx la it bd lb oc od dn lf oe of dp lj ma og oh ll me oi oj ln mi ok ol lp om bi translated">完全码</h2><p id="f1c9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下面是完整的代码</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="a4ca" class="nx la it nt b gy ny nz l oa ob">#import dependencies<br/>import requests</span><span id="4677" class="nx la it nt b gy on nz l oa ob">#pull in api keys from config file<br/>from config import public_key, private_key</span><span id="f49a" class="nx la it nt b gy on nz l oa ob">#construct api request<br/>response = requests.<strong class="nt iu">post</strong>(<br/>            "<a class="ae ky" href="https://api.tcgplayer.com/token" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/token</a>",<br/>            <br/>            <strong class="nt iu">headers</strong>={<br/>                "Content-Type": "application/json",<br/>                "Accept": "application/json"},<br/>           <br/>            <strong class="nt iu">data</strong>=(f"grant_type=client_credentials"<br/>                  f"&amp;client_id={<strong class="nt iu">public_key</strong>}&amp;"<br/>                  f"client_secret={<strong class="nt iu">private_key</strong>}")<br/>        )</span><span id="2890" class="nx la it nt b gy on nz l oa ob">access = response.json()['access_token']</span><span id="89bf" class="nx la it nt b gy on nz l oa ob">headers = {"accept": "application/json", <br/>           "Content-Type": "application/json",<br/>           <strong class="nt iu">'User-Agent': 'YOUR_USER_AGENT',<br/>           "Authorization": "bearer " + access</strong>}</span><span id="8ede" class="nx la it nt b gy on nz l oa ob">url = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/categories" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/categories</a>"</span><span id="f74e" class="nx la it nt b gy on nz l oa ob">response = requests.get(url, headers=headers)</span><span id="bb7a" class="nx la it nt b gy on nz l oa ob">print(response.json())</span><span id="f31f" class="nx la it nt b gy on nz l oa ob">url = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/categories/1/search" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/categories/1/search</a>"</span><span id="abab" class="nx la it nt b gy on nz l oa ob"><strong class="nt iu">payload </strong>= {"<strong class="nt iu">sort</strong>":"Relevance",<br/>           "<strong class="nt iu">filters</strong>": [{<br/>              "<strong class="nt iu">values</strong>": ["Tithe"],<br/>              "<strong class="nt iu">name</strong>": "productName"<br/>          }]}</span><span id="0975" class="nx la it nt b gy on nz l oa ob">search_response = requests.request("POST", url, json=payload, headers=headers)</span><span id="a60f" class="nx la it nt b gy on nz l oa ob">print(search_response.json())</span><span id="f7ec" class="nx la it nt b gy on nz l oa ob">endpoint = "<a class="ae ky" href="https://api.tcgplayer.com/catalog/products/" rel="noopener ugc nofollow" target="_blank">https://api.tcgplayer.com/catalog/products/</a>"<br/>productids = str(search_response.json()["results"])</span><span id="7b87" class="nx la it nt b gy on nz l oa ob">url = endpoint + productids</span><span id="ad30" class="nx la it nt b gy on nz l oa ob">response = requests.get( url, headers=headers)</span><span id="bec1" class="nx la it nt b gy on nz l oa ob">response.json()</span></pre><h1 id="4a22" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">谢谢大家！</h1><ul class=""><li id="d27e" class="pj pk it lt b lu lv lx ly ma pl me pm mi pn mm po pp pq pr bi translated"><em class="mt">如果你喜欢这个，</em> <a class="ae ky" href="https://medium.com/@erickleppen" rel="noopener"> <em class="mt">在 Medium 上关注我</em> </a> <em class="mt">获取更多</em></li><li id="34e9" class="pj pk it lt b lu ps lx pt ma pu me pv mi pw mm po pp pq pr bi translated"><a class="ae ky" href="https://erickleppen.medium.com/membership" rel="noopener"> <em class="mt">通过订阅</em> </a>获得对我的内容的完全访问和帮助支持</li><li id="f126" class="pj pk it lt b lu ps lx pt ma pu me pv mi pw mm po pp pq pr bi translated"><em class="mt">我们来连线一下</em><a class="ae ky" href="https://www.linkedin.com/in/erickleppen01/" rel="noopener ugc nofollow" target="_blank"><em class="mt">LinkedIn</em></a></li><li id="5027" class="pj pk it lt b lu ps lx pt ma pu me pv mi pw mm po pp pq pr bi translated"><em class="mt">用 Python 分析数据？查看我的</em> <a class="ae ky" href="https://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mt">网站</em> </a></li></ul><p id="7575" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="http://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> —埃里克·克莱本</strong> </a></p></div></div>    
</body>
</html>