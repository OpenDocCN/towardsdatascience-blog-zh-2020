<html>
<head>
<title>Climate is What You Expect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">气候是你所期待的</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/climate-is-what-you-expect-20c57da1ac24?source=collection_archive---------32-----------------------#2020-03-09">https://towardsdatascience.com/climate-is-what-you-expect-20c57da1ac24?source=collection_archive---------32-----------------------#2020-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d6c1" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">气候数据科学</h2><div class=""/><div class=""><h2 id="08b2" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">研究气候系统的规律</h2></div><p id="ba03" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">气候系统是其组成部分——大气圈、生物圈、冰冻圈、水圈和岩石圈——之间复杂相互作用的产物，由相当多的强迫机制驱动，如太阳辐射和温室气体浓度。尽管混沌是这个系统的固有特征，但在气候变量的行为中有几个规律和组织层次。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/edebefc076d507de817fc415770299c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUta9V2L_yZLA7sqmGMCCg.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">亚马逊的典型景观。<a class="ae ma" href="https://unsplash.com/@kugnharski?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Rodrigo Kugnharski </a>在<a class="ae ma" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="e7c1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">以一年中的季节为例。如果你住在北半球，你肯定会希望看到冬天下雪，夏天阳光明媚。在热带地区，气温波动不那么剧烈，夏季多雨寒冷，冬季干燥炎热。所有这些都可以用马克·吐温说过的一句话来概括:</p><blockquote class="mb mc md"><p id="e4f1" class="ko kp me kq b kr ks ka kt ku kv kd kw mf ky kz la mg lc ld le mh lg lh li lj ij bi translated">气候是你所期待的，天气是你所得到的。</p></blockquote><p id="e312" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一个简单的短语，但足以让你深刻理解气候系统中的事情是如何运作的。你认为亚马逊雨林中部会有大雪吗？在这个世界上没有。描述气候的一种分析方法是表达其变量的<a class="ae ma" href="https://library.wmo.int/doc_num.php?explnum_id=4166" rel="noopener ugc nofollow" target="_blank">平均条件，如降雨量和温度，至少在30年内。这些是著名的<strong class="kq ja">气候平均值，</strong>，它们告诉你许多关于你应该期待的气候的重要事情。</a></p><h1 id="4a3c" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">一年三月的降水</h1><p id="e135" class="pw-post-body-paragraph ko kp iq kq b kr na ka kt ku nb kd kw kx nc kz la lb nd ld le lf ne lh li lj ij bi translated">本教程着重于你可以采取的步骤，做你自己的任何感兴趣的特定地区的气候正常。为此，您将使用来自<strong class="kq ja">全球降水气候学中心</strong> (GPCC)的<a class="ae ma" href="https://www.esrl.noaa.gov/psd/data/gridded/data.gpcc.html" rel="noopener ugc nofollow" target="_blank">网格降水数据集</a>，该数据集由气候学研究中非常常见的全球数据集组成，因为其质量高且时间跨度长，从1901年1月到2013年12月。</p><p id="e7f4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">首先，像往常一样，您需要导入包:</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="4dbe" class="nk mj iq ng b gy nl nm l nn no">import xarray as xr <br/>import proplot as plot <br/>import matplotlib.pyplot as plt</span><span id="a3c7" class="nk mj iq ng b gy np nm l nn no">from esmtools.stats import*</span></pre><p id="b440" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你已经知道<code class="fe nq nr ns ng b">Matplotlib</code>是每一个Python程序员的可视化软件包的黄金标准，自从<a class="ae ma" rel="noopener" target="_blank" href="/a-quick-introduction-to-cmip6-e017127a49d3"><em class="me">cmip 6</em></a><em class="me"/>快速介绍以来，你已经接触了用于n维网格数据的<code class="fe nq nr ns ng b">Xarray</code>和数据可视化的下一件大事<code class="fe nq nr ns ng b">Proplot</code>。新成员是<code class="fe nq nr ns ng b">Esmtools</code>，这是一个<a class="ae ma" href="https://esmtools.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">软件包，主要用于复杂气候模型</a>的统计分析。最简单的安装方法是使用<code class="fe nq nr ns ng b">Pip</code>:</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="a0ee" class="nk mj iq ng b gy nl nm l nn no">pip install esmtools</span></pre><p id="cd03" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe nq nr ns ng b">Xarray</code>的许多优秀功能之一是可以直接加载大量数据集，而无需通过<a class="ae ma" href="https://www.opendap.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq ja"> OPeNDAP </strong> </a>下载。由于NOAA/PSD目录中的所有数据都可以通过OpenDAP访问，因此您可以轻松获得本教程的GPCC产品。</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="51c9" class="nk mj iq ng b gy nl nm l nn no"># OPEenDAP url<br/>url = 'http://www.esrl.noaa.gov/psd/thredds/dodsC/Datasets/gpcc/full_v7/precip.mon.total.2.5x2.5.v7.nc'<br/># load dataset<br/>dset = xr.open_dataset(url)<br/>&gt;&gt;&gt; dset</span></pre><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/c92d35fc11943d8071ddc029c3e305e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*9QI5tsf8Csg1Z4hTNE2Wuw.png"/></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">GPCC月降水网格数据集元数据。</p></figure><p id="66a5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这种降水在地图上看起来怎么样？</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="5e27" class="nk mj iq ng b gy nl nm l nn no">fig, ax = plot.subplots(axwidth=4.5, tight=True,<br/>                        proj='robin', proj_kw={'lon_0': 180},)<br/># format options<br/>ax.format(land=False, coast=True, innerborders=True, borders=True,<br/>          labels=True, geogridlinewidth=0,)</span><span id="f598" class="nk mj iq ng b gy np nm l nn no">map1 = ax.contourf(dset['lon'], dset['lat'],<br/>                   dset['precip'][0, :, :],<br/>                   cmap='Dusk',<br/>                   levels=plot.arange(0, 400, 50),<br/>                   extend='both')</span><span id="5424" class="nk mj iq ng b gy np nm l nn no">ax.colorbar(map1, loc='b', shrink=0.5, extendrect=True)</span><span id="ecb7" class="nk mj iq ng b gy np nm l nn no">plt.show()</span></pre><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nu"><img src="../Images/84a060a508b5275b8f4fd84466d48900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*My2q-Lz-4C0OOO4iG_JhEg.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">GPCC数据集的第一个全球降水场。</p></figure><h1 id="d67b" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">设置感兴趣的区域(和时间)</h1><p id="f19a" class="pw-post-body-paragraph ko kp iq kq b kr na ka kt ku nb kd kw kx nc kz la lb nd ld le lf ne lh li lj ij bi translated">在本教程中，您将调查亚马逊流域的年降雨量。这一循环受南美季风系统(SAMS)的起伏影响，表现为两个截然不同的雨季和旱季。为了关注这个特定的区域，<code class="fe nq nr ns ng b">Xarray</code>允许使用灵活的<code class="fe nq nr ns ng b">.sel()</code>方法。你可以在盆地周围设置一个方框区域，选择1981年到2010年这一特定时期的纬度和经度，根据世界气象组织(WMO)的说法，这是最近的气候时期。</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="13d7" class="nk mj iq ng b gy nl nm l nn no">amazon_area = dset.sel(lat=slice(5, -22), lon=slice(285, 315),<br/>                       time=slice('1981-01-01', '2010-12-01'))</span></pre><p id="1b65" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">对于您在路上找到的每一个数据集，您必须格外小心地知道维度在其中是如何描述的。例如，如果GPCC数据集将经度维度命名为<code class="fe nq nr ns ng b">longitude</code>而不是<code class="fe nq nr ns ng b">lon</code>，那么您必须将维度命名为<code class="fe nq nr ns ng b">sel</code>而不是<code class="fe nq nr ns ng b">lon</code>。所有这些小细节都与您的代码密切相关，所以如果您不熟悉特定的数据集，请务必检查元数据。</p><p id="d68a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">气候学研究中的一个常见做法是创建一个<em class="me">指数</em>，这是一个时间序列，用于描述特定地区特定现象或变量的行为。由于您已经选择了亚马逊盆地周围的区域，<code class="fe nq nr ns ng b">Esmtools</code>允许您通过对规则网格进行余弦加权，以最严格的方式从网格数据中创建一个索引。抛开气候学的措辞，用以下公式计算降水指数:</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="35c7" class="nk mj iq ng b gy nl nm l nn no">amazon_index = cos_weight(amazon_area['precip'])<br/>&gt;&gt;&gt; amazon_index.dims<br/>('time',)</span></pre><p id="e476" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">亚马逊的年降雨周期是怎样的？</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="04dd" class="nk mj iq ng b gy nl nm l nn no">fig, ax = plot.subplots(figsize=(5, 5), tight=True)<br/>ax.plot(amazon_index['time'], amazon_index, color='Blue')</span><span id="7e70" class="nk mj iq ng b gy np nm l nn no"># format options<br/>ax.format(xlabel='Time', ylabel='Precipitation (mm/month)')</span><span id="50a3" class="nk mj iq ng b gy np nm l nn no">plt.show()</span></pre><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nv"><img src="../Images/595df7c016fb343f6fc4a787f446997a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lrqyTLCwDsSd0IXJ-O0W0Q.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">亚马逊地区降水周期的起伏。</p></figure><p id="3076" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">虽然这很好地反映了年周期应该是什么样子，但它没有反映亚马逊地区降雨行为的一些重要细节。改善它的一个好方法是做一个简单的月图或者更精细的东西，比如箱线图。好消息是,<code class="fe nq nr ns ng b">Proplot</code>环绕着<code class="fe nq nr ns ng b">Matplotlib</code>,让你可以很容易地做出一个箱线图:</p><pre class="ll lm ln lo gt nf ng nh ni aw nj bi"><span id="53fd" class="nk mj iq ng b gy nl nm l nn no"># numpy trick: transform from a row vector to a matrix<br/>amazon_index = np.reshape(np.array(amazon_index), (30, 12),<br/>                          order='C')</span><span id="c3f8" class="nk mj iq ng b gy np nm l nn no">fig, ax = plot.subplots(figsize=(5, 5), tight=True, sharex=False)<br/># format options<br/>ax.format(ylim=(0, 300))</span><span id="2ebc" class="nk mj iq ng b gy np nm l nn no">ax[0].boxplot(amazon_index, marker='x', fillcolor='azure',<br/>              labels= months)</span><span id="aeed" class="nk mj iq ng b gy np nm l nn no">plt.show()</span></pre><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nv"><img src="../Images/7933a57022d4ef35bc6155eecad1444b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MpmVACSF_5mWNjm7MV5lCw.jpeg"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">一年一度的三月降雨，清晰可见。</p></figure><p id="91f5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">箱线图可以让你看到亚马逊盆地降雨的真实情况。从1月到5月中旬，整个盆地有一个大范围的雨季，主要受SAMS活跃期和热带辐合带(ITCZ)向南迁移的驱动。然而，令大多数人惊讶的是，雨林经历了正常的降雨缺乏期，因为它有非常明显的旱季，从六月到九月中旬。在这个明显的旱季，火灾季节也开始了，随着时间的推移，农业边界向亚马逊河推进了一点。</p><h1 id="f3d2" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">最后的话</h1><p id="a2f3" class="pw-post-body-paragraph ko kp iq kq b kr na ka kt ku nb kd kw kx nc kz la lb nd ld le lf ne lh li lj ij bi translated">在大多数情况下，任何感兴趣的气候变量的年周期都是更详细和更深入研究的第一步。然而，这个有点简单的行为已经足以让你很好地了解温度、降水和其他因素的自然行为。在不断变化的气候中，了解特定地区甚至全球的气候如何波动变得格外重要。</p><p id="85bc" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一件好事是大量可靠的数据集可供快速下载，而且<code class="fe nq nr ns ng b">Xarray</code>甚至允许基于云的访问。其他优秀的软件包，如<code class="fe nq nr ns ng b">Proplot</code>和新的<code class="fe nq nr ns ng b">Esmtools</code>，促进了这些通常复杂的网格数据集的可视化和统计分析。通常，本教程的Jupyter笔记本可以在我的<a class="ae ma" href="https://github.com/willyhagi/climate-data-science" rel="noopener ugc nofollow" target="_blank"> <strong class="kq ja">气候数据科学</strong> </a> <strong class="kq ja"> </strong>资源库中免费获得。</p></div></div>    
</body>
</html>