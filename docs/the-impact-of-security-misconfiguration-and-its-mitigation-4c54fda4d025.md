# 安全配置错误的影响及其缓解措施

> 原文：<https://towardsdatascience.com/the-impact-of-security-misconfiguration-and-its-mitigation-4c54fda4d025?source=collection_archive---------52----------------------->

![](img/2a9294f368d78e81ac520ef6379121f6.png)

克里斯托夫·高尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

当今的网络安全威胁形势极具挑战性。攻击者一直在寻找利用应用程序和系统中的安全漏洞来访问或控制敏感信息，并发起勒索软件等网络攻击。

随着公司在不同的平台上传播敏感数据，软件即服务 [(SaaS)平台](https://cypressdatadefense.com/blog/saas-application-security/)，容器，服务提供商，甚至各种云平台，他们开始采取更加主动的安全方法是至关重要的。

这意味着将安全性集成为开发过程的核心部分，将安全性转移到左边，并尽可能地自动化您的基础设施，以摆脱低效、耗时且昂贵的策略。构建强安全性的一个最基本的方面是维护安全配置。

在[研究](https://www.threatstack.com/blog/73-of-companies-have-critical-aws-security-misconfigurations)中，发现近 73%的组织至少有一个关键的安全错误配置，这可能暴露关键数据和系统，或使攻击者能够访问敏感信息或私人服务或主 AWS (Amazon Web Services)控制台。

这些“关键的”安全错误配置可能会使远程 SSH 对整个互联网开放，这可能会允许攻击者从任何地方访问远程服务器，从而使防火墙和 VPN 等网络控制变得毫无意义。此外，使用 root 帐户来自互联网的 SSH 流量也有严重的安全影响。

安全错误配置漏洞通常是由于不安全的默认配置、配置更改的副作用或仅仅是不安全的配置造成的。这表明需要基本的配置审计和安全卫生以及自动化流程。服务器应该按角色分组，而不是使用传统的网络控制，使用自动化来创建小而安全的网络路径，以建立对等体之间的信任。

在我们深入研究安全错误配置的影响之前，让我们看一下安全错误配置的真正含义。

# 什么是安全错误配置？

安全错误配置是对服务器或应用程序配置、网络设备等实施不正确的安全控制。这可能会导致安全漏洞。

例如，[web 应用程序](https://cypressdatadefense.com/blog/application-security-best-practices/)的不安全配置可能会导致许多安全缺陷，包括:

*   文件夹权限不正确
*   默认密码或用户名
*   启用设置/配置页面
*   调试已启用

安全错误配置的范围很广，从忘记禁用默认平台功能(该功能可能授予未经授权的用户(如攻击者)访问权限)到未能在 web 服务器上建立安全标头。安全错误配置可能发生在应用程序的任何级别，包括 web 服务器、数据库、应用服务器、平台、定制代码和框架。

web 应用程序中的安全错误配置的影响可能是深远的和毁灭性的。据[微软](https://www.microsoft.com/en-us/microsoft-365/enterprise-mobility-security/advanced-threat-analytics)称，网络安全漏洞现在每年在全球范围内造成高达 5000 亿美元的损失，平均每个漏洞给企业造成 380 万美元的损失。

更糟糕的是，关于网络安全攻击的最大误区之一是，它们不会影响小企业，因为它们太小，不会被瞄准或注意到。

打破这个神话，[小企业趋势](https://smallbiztrends.com/2017/01/cyber-security-statistics-small-business.html)预测至少 43%的网络攻击是专门针对小企业的。从根本上说，云错误配置等安全错误配置是组织面临的最大安全威胁之一。

事实上，正是云的错误配置导致[近 4 亿时代华纳有线电视客户的](https://www.theregister.co.uk/2017/09/05/twc_loses_4m_customer_records/)个人信息泄露。一家外部服务提供商意外错误配置了云存储，并将其公之于众，将该公司的 SQL 数据库暴露给了所有人。

# 安全错误配置示例

为了让您更好地理解 web 应用程序中潜在的安全错误配置，下面是一些最佳示例:

# 示例#1:默认配置未被修改/更新

如果您没有更改 web 应用程序的配置，攻击者可能会发现服务器上的标准管理页面，并使用默认凭据登录并执行恶意操作。

# 示例 2:您的服务器上没有禁用目录列表

在这种情况下，如果攻击者发现了您的目录列表，他们可以找到任何文件。黑客可以找到并下载你所有编译好的 Java 类，他们可以通过逆向工程得到你的定制代码。然后，他们可以利用应用程序中的这一安全控制缺陷进行恶意攻击。

# 示例 3:不安全的服务器配置可能会暴露用户的个人信息

存在安全错误配置的应用程序通常会在错误消息中显示敏感信息，这些信息可能会返回给用户。这可能会让攻击者危害您用户的敏感数据，并获得他们的帐户或个人信息的访问权限。

# 示例 4:示例应用程序没有从应用程序的生产服务器上删除

很多时候，这些示例[应用程序都有安全漏洞](https://cypressdatadefense.com/blog/web-application-vulnerabilities/)，攻击者可能会利用这些漏洞来访问您的服务器。

# 示例 5:操作系统的默认配置

大多数操作系统的默认配置侧重于功能、通信和可用性。如果您没有更新或修改操作系统的默认配置，可能会导致服务器不安全。

为了保护您的服务器，您应该为您组织中的所有服务器构建复杂而可靠的服务器强化策略。使用 CIS 基准来帮助强化您的服务器。

# 如何检测安全错误配置:识别和缓解

安全错误配置是一个普遍存在的问题，在许多系统、网络和应用程序中都存在，您也有可能遇到这种问题。这些错误配置可能发生在 IT 基础架构的任何级别，并使攻击者能够利用应用程序中的安全漏洞发起网络攻击。

最常见的安全错误配置有哪些？

一些最常见的安全错误配置包括不完整的临时配置、从未修改过的不安全默认配置，以及对应用程序的连接要求和网络行为的错误假设。

随着操作系统、网络、应用程序、工作负载和框架以及云环境和混合数据中心的日益复杂，安全错误配置正迅速成为企业面临的重大安全挑战。这些环境多种多样且瞬息万变，因此很难理解和实施针对安全配置的适当安全控制。

例如，在管理跨云和混合环境以及内部的防火墙时缺乏可见性，这继续增加了安全性挑战，并使企业难以遵守隐私法规和安全性。

您的云平台、软件、应用程序、网络和服务器缺乏可见性是导致安全配置错误和风险增加的主要因素。

一份[报告](https://www.firemon.com/state-of-the-firewall-report-2019/)发现，几乎三分之一的网络环境中有 100 个或更多的防火墙，每个防火墙都有一套不同的规则需要管理。此外，34%的网络对其网络安全风险和合规性的实时可见性不到 50%,这导致整个基础架构缺乏可见性，并导致安全配置错误。

以下是更多安全错误配置的例子:

*   **不安全的管理控制台为应用程序**打开。这些端口暴露了应用程序，攻击者可以利用这一安全缺陷修改管理控件。
*   **云中的闲置虚拟机:**由于云缺乏可见性，公司通常不会意识到云中的闲置虚拟机，并连续几天或几个月继续为这些虚拟机付费。这些空闲虚拟机可能没有得到主动管理，在应用安全补丁时可能会被遗漏。
*   各种互联网服务的出站连接。这些可能会暴露软件在敏感环境中的意外行为。
*   **试图与不再存在的应用建立通信的遗留应用**。黑客可以复制这些应用程序，并与传统应用程序建立通信。

除此之外，web 服务器通常带有一组默认特性，包括 QA 特性、调试、示例应用程序和许多其他特性，这些特性在默认情况下是启用的。这些功能可能会为攻击者提供一种手段，通过提升权限来规避安全协议并获得对您的客户或组织的敏感信息的访问权限。

攻击者还可能试图检测低并发限制或长超时的错误配置函数，以便发起拒绝服务(DoS)攻击。具有低并发限制配置的函数可能导致 DoS 攻击，因为攻击者只需调用错误配置的函数几次，直到它不可用。

包含不安全敏感信息(如代码或环境变量中的令牌和密钥)的函数也可能被攻击者破坏，并可能导致数据泄漏。

# 如何诊断和确定安全错误配置？

有几种方法可以快速检测系统中的安全错误配置:

*   扫描混合环境和云基础架构以识别资源。使用内置服务，如提供安全检查的 AWS Trusted Advisor。
*   验证您是否有适当的访问控制
*   针对可疑用户活动或“正常”行为异常设置警报。异常行为可能表明您在配置设置中没有足够的安全控制。
*   检查管理控制台或服务器、网络、设备和应用程序的其他部分的默认配置。

# 安全配置错误的影响是什么？

根据 IBM 的一份报告，在过去的几年中，安全错误配置的数量激增。该报告发现，与安全错误配置相关的违规行为激增了 424%，占该年度受损记录的近 70%。

虽然公司正在整合更好的安全实践并投资于网络安全，但攻击者正在进行更复杂的攻击，难以快速跟踪和缓解。

在各种企业中，人为错误也正在成为一个更加突出的安全问题。这些人为错误会导致一系列安全缺陷，包括安全错误配置、网络钓鱼攻击、恶意软件、勒索软件、内部威胁等。

安全错误配置可能源于简单的疏忽，但是很容易将您的业务暴露给攻击者。在某些情况下，错误配置的网络和系统可能会使数据完全开放，而不需要任何安全漏洞或恶意行为者的攻击。

一个常见的安全错误配置是将不安全的敏感数据留在数据库中，而没有适当的身份验证控制和对开放互联网的访问。

由于安全错误配置导致的最显著的违规事件之一是[1 . 54 亿美国选民记录在一次塞尔维亚黑客的安全违规中暴露](https://www.helpnetsecurity.com/2016/06/23/154-million-us-voter-records-exposed/)。

该数据库包含 1.54 亿选民的记录，包括他们的姓名、年龄、性别、电话号码、地址、婚姻状况、国会政党、州参议院选区和估计收入。数据库是一个 CouchDB，不需要认证，任何人都可以访问，这导致了巨大的安全漏洞。

在这个安全错误配置的例子中，存储设备或数据库缺乏基本的[安全控制导致互联网上每个人的大量敏感和个人数据被利用。](https://cypressdatadefense.com/blog/data-storage-security-best-practices/)

向用户公开的代码和敏感数据越多，安全风险就越大。如果未能正确配置对应用程序数据库的锁定访问，攻击者就有机会窃取数据，甚至修改数据的一部分来进行恶意活动。

# 如何防止安全错误配置？

防止安全错误配置的第一步也是最重要的一步是了解系统的行为，并理解每个关键组件及其行为。

要做到这一点，您需要拥有整个基础架构的精确、实时的地图，该地图显示您的数据中心环境中的流量和通信，无论是在混合云上还是在内部。

一旦您彻底了解了您的系统，减轻由于安全配置不当而导致的风险的最佳方式就是锁定最关键的基础设施，只允许特定的授权用户访问生态系统。

以下是一些防止安全错误配置的有效方法:

*   部署可重复的强化流程，使部署另一个正确配置的环境变得简单快捷。开发、生产和 QA 环境应该完全相同地配置，但是在每个环境中使用不同的密码。自动化此过程，以减少设置新的安全环境所需的工作量。
*   定期为每个环境及时安装软件更新和补丁。或者更好的是，修补一个黄金映像，然后将该映像部署到您的环境中。
*   构建强大的应用程序架构，提供安全有效的组件分离。
*   经常定期运行审核和扫描，以帮助识别潜在的安全错误配置或缺失的补丁程序。
*   保持一个结构良好的开发周期。这将有助于确保在开发阶段对应用程序进行安全测试。
*   就安全配置的重要性以及它们如何影响组织的整体安全性对您的员工进行教育和培训。
*   加密静态数据，帮助保护信息不被泄露。
*   对目录和文件应用适当的访问控制。这有助于弥补未受保护的目录和文件的漏洞。
*   如果实现自定义代码，请在将代码集成到生产环境之前使用静态代码安全扫描器。还应该由安全专业人员执行动态测试和手动审查。
*   使用没有任何不必要的特性、示例、文档和组件的最小平台。移除或不安装不安全的框架和未使用的功能。
*   审查云存储权限，如 S3 存储桶权限。作为修补程序管理流程的一部分，检查并更新所有安全修补程序、更新和说明的所有安全配置。
*   实施自动化流程，确保所有环境中的所有安全配置都到位。

# 最后的想法

随着我们增加更多外部供应商、第三方供应商和混合云环境，动态和复杂的数据中心只会增加安全违规的可能性和人为错误的风险。

安全错误配置的影响具有深远的后果，会影响组织的整体安全性。尽管您可能已经实施了安全控制，但是您需要定期跟踪和分析您的整个基础设施，以发现由于配置不当而可能出现的潜在安全漏洞。

请记住，在混合云环境中拥有可见性可以为您带来优势，并帮助您应对安全错误配置。

作为第一步，Cypress Data Defense 提供了您的云基础架构的详细地图，帮助您自动检测异常行为，并减少安全中的错误配置。一旦您确定了您的关键资产和漏洞，您就可以使用缓解技术来限制攻击面并确保您的数据得到保护。

**关于作者:**

Steve Kosten 是 [Cypress Data Defense](https://www.cypressdatadefense.com/) 的首席安全顾问，也是“Java/JEE 中的 SANS DEV541 安全编码:开发可防御应用程序”课程的讲师。

***来自《走向数据科学》编辑的提示:*** *虽然我们允许独立作者根据我们的* [*规则和指导方针*](/questions-96667b06af5) *发表文章，但我们并不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的* [*读者术语*](/readers-terms-b5d780a700a4) *。*