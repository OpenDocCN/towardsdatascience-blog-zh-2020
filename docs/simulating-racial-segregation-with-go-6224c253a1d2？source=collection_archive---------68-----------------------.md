# 用 Go 模拟种族隔离

> 原文：<https://towardsdatascience.com/simulating-racial-segregation-with-go-6224c253a1d2?source=collection_archive---------68----------------------->

## 用谢林的空间邻近模型探索种族隔离

尽管疫情席卷全球，但由于乔治·弗洛伊德被杀，美国种族不平等和分裂的潜在紧张局势已经爆发。我经常读到美国黑人不得不应对的骇人听闻的事情，但对这一事件的爆炸性反应让我感到惊讶，尽管事后来看，这不应该发生。

![](img/7b1458a53a300d8021ba9dd8060aee02.png)

[Teemu Paananen](https://unsplash.com/@xteemu?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 在 [Unsplash](https://unsplash.com/s/photos/protest?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

紧张局势已经酝酿了很长时间。尽管被认为是世界上对种族更加宽容的国家之一，种族隔离还是很好地表明了这一鸿沟有多深。

2009 年，激进的制图员(我承认这两个词对我来说不容易组合在一起)比尔·兰金绘制了一张惊人的地图，展示了芝加哥的种族隔离程度。

![](img/8f758012606351007e37cce3927fe24f.png)

过渡的分类(致谢:比尔·兰金[http://www.radicalcartography.net/index.html?chicagodots](http://www.radicalcartography.net/index.html?chicagodots)

他的作品让很多人惊叹不已，随后也激励了很多人。其中包括埃里克·费希尔，他很快拿出了一组美国其他城市的照片，显示出芝加哥并不是那么独特。

![](img/a300b06238383ee921fdc3ee3241cc20.png)![](img/ef679eb737092fff6105d89e0c6b0728.png)![](img/6eed69e61ea852ce9ced93f74ca02126.png)![](img/fba88aa4f2094087cf969e43ee13bb77.png)

从左上至右下:迈阿密、洛杉矶、底特律、纽约(鸣谢:埃里克·费舍尔[https://www . Flickr . com/photos/walking SF/sets/72157626354149574/with/5560490330/](https://www.flickr.com/photos/walkingsf/sets/72157626354149574/with/5560490330/))

这显然已经持续了一段时间，不应该让任何人感到惊讶，尽管可视化是相当惊人的。有了如此明显的隔离，难怪最终会有事情发生。

但这仅仅是我们的问题吗？实际上不，这真的不是我们独有的，这是安德鲁·惠特比为伦敦(英国，实际上除了苏格兰)绘制的类似地图。

![](img/d310c3a4141cc22dfa9f7cb75e1de24e.png)

伦敦种族分布图(鸣谢:安德鲁·惠特比【https://andrewwhitby.com/2013/09/04/uk-ethnicity-map/[】)](https://andrewwhitby.com/2013/09/04/uk-ethnicity-map/)

这是另一个被认为是世界上最具多元文化的城市[多伦多](https://www.contiki.com/six-two/toronto-demographics/)。

![](img/7e5b9c0a1f1d5a81f122bc443a4de977.png)

多伦多可见少数民族(鸣谢:杰夫·克拉克[http://neoformix.com/2013/TorontoVisibleMinorities.html](http://neoformix.com/2013/TorontoVisibleMinorities.html)

如果这个世界上最多元文化的城市也一样种族隔离，还有什么希望呢？

当我呆在家里时，我想起了不久前读过的一篇论文，作者是美国著名经济学家托马斯·谢林。这篇题为 [*种族隔离的动态模型*](https://www.suz.uzh.ch/dam/jcr:ffffffff-fad3-547b-ffff-ffff9a867c99/09.27-schelling-71.pdf) 的论文谈到了美国的种族隔离，并创造了一些模型来描述它。我记得很清楚，甚至用一个特定的模型做了几次演讲，因为我认为其中有一些有趣的现实生活中的观点。已经有一段时间了，所以我又翻出了那张纸和我的旧笔记。

我在之前的演讲中模拟了简化版的谢林空间邻近模型。现在我有了一些时间(也有了一个新的模拟框架)，我重新实现了一个更完整的模型。

# 隔离模型

[谢林的空间邻近模型](https://www.suz.uzh.ch/dam/jcr:ffffffff-fad3-547b-ffff-ffff9a867c99/09.27-schelling-71.pdf)描述了两个不同的种族，黑人和白人，占据了一个特定的领土。每个人在任何时候都有一个位置，并且可以自由地移动到任何其他空的空间。在这个模型中，有 5 个参数:

1.  邻域大小
2.  要求自己种族(肤色)的百分比
3.  黑人与白人在总人口中的比例
4.  管理人员流动的规则
5.  可供人们四处走动的空房数量

谢林的模型是手工运行的，也就是说，他在一张网格纸上画出`#`和`0`并通过它来工作。显然我不会这么做，相反，我将使用 [Petri，我的 Go 细胞自动化框架](https://github.com/sausheong/petri)来尝试复制谢林的模型。

![](img/f00f61dae9858277298e5afa60e08a9e.png)

鸣谢:托马斯·谢林，隔离的动态模型([https://www . suz . uzh . ch/dam/JCR:ffffff-fad 3-547 b-ffff-ffff 9a 867 c 99/09.27-谢林-71.pdf](https://www.suz.uzh.ch/dam/jcr:ffffffff-fad3-547b-ffff-ffff9a867c99/09.27-schelling-71.pdf) )

## 我修改过的模型

我的参数几乎和谢林的一样:

1.  邻域大小
2.  要求自己种族(肤色)的百分比
3.  种族间的人口比例。这与谢林假设非黑即白的模型略有不同。对于我的模拟，我允许不仅仅是 2 场比赛
4.  我取消了管理人员流动的规则，我使人员可以流动到任何有空缺的地方。相反，我添加了一个参数进行实验，如果我们应用规则来限制同一种族的邻居的数量，会怎么样
5.  可供人们四处走动的空房数量

模拟是一个[细胞自动机](https://medium.com/swlh/building-simulations-with-a-go-cellular-automata-framework-89b2bb1246d3)。我们建立了一个网格，并随机填充了不同种族的单位，每个单位占据一个不同的单元。并非所有的单元格都会被填充，一定比例的网格是空的。

久而久之，每个单位可以决定移动到另一个细胞或继续留在同一个细胞，根据规则，这主要取决于周围的单位本身。

# 构建模拟

为了实现这一点，我使用了 [Petri，我的 Go 细胞自动化框架](https://github.com/sausheong/petri)。你可以从这篇文章中获得关于如何使用 Petri 网创建模拟的快速入门。

邻域大小已经是 Petri 中为数不多的参数之一，所以我们不需要实现它。我们需要添加以下内容作为我们的周界:

`coverage`参数很简单，它只是一个百分比，描述为一个浮点数(默认为`0.7`或 70%)。`raceRatio`参数是种族间人口数量的比率，默认为 2 个种族，各占 50%，所以要使用的比率字符串是`1:1`。如果我们有 3 场比赛，比如第一场 50%，接下来的两场各 25%，那么要使用的比率字符串是`2:1:1`。

`minList`参数是自己种族的要求百分比。它的位置与`raceRatio`参数相对应。该数字表示可接受的同一种族邻居的最小数量。例如，如果数字是 2，那么至少有 3 个邻居属于同一种族。

![](img/4ef16d9f67d2fb8952e721826cb12155.png)

如果可接受邻居的最小数量为 2，则必须至少有 3 个或 3 个以上相同种族的邻居

`minList`是位置性的，与种族比率相匹配，也就是说，给定 `2:1:1`的`raceRatio`和`2:3:2`的`minList`，这意味着，拥有 50%人口的第一个种族，其同一种族的可接受邻居的最小数量为 3 个及以上。有 25%人口的第二个种族必须有 4 个及以上同种族的邻居，同样有 25%人口的最后一个种族必须有 3 个及以上同种族的邻居。

`maxList`与`minList`相反。该数字表示同一种族邻居的上限最大数量。这是怎么发生的？在一些国家，例如在新加坡，有一些政策确保在住宅区有一定的种族组合。这是为了防止种族隔离。在许多其他多元文化的国家，也有一些政策和法律服务于同样的反种族隔离的目的。

## 使用 Petri 网

使用 Petri 网进行模拟非常简单。只有两步。首先，您需要创建一个实现`Simulator`接口的结构。我们不需要实现所有的方法，我们可以依靠 Petri 已经创建的方法，通过将`petri.Sim`作为变量包含在我们的结构中。

然后，您只需创建一个 main 函数，并运行您创建的结构的实例。

是的，就这么简单！

大部分逻辑在我们实现的两个方法中。第一个是初始化网格的`Init`方法。

大部分的动作是弄清楚如何处理种族比例和网格填充的百分比。第二种方法非常简单，只需随机创建一个介于 0 和 1 之间的浮点数，然后将其与覆盖率参数进行比较，如果低于该值，则应该填充它。

首先是关于它应该是哪一个种族。为此，我创建了一个函数`calc`,它创建了一个函数来确定应该是哪一场比赛。代码很简单，应该是不言自明的。

为`Simulator`接口实现的第二个方法是`Process`方法，它处理网格并决定单元是否应该移动到另一个单元格。

就是这样！你可以在 https://github.com/sausheong/segregation[找到剩下的代码。](https://github.com/sausheong/segregation)

# 模拟种族隔离

现在我们从基本参数开始。默认情况下，覆盖率为 0.7(70%的网格被占用)，`1:1`为种族比率，表示有 2 个种族，每个种族占 50%，`2:2`为最小列表，表示两个种族都需要至少 3 个相同种族的邻居，`8:8`为最大列表。因为每个单元只有 8 个邻居，这里的`8`表示没有上限。

![](img/7912e82802d55febb502e01b8f28f757.png)

种族比例 1:1

如你所见，已经有一定程度的隔离了，尽管很轻微。让我们将比赛的数量增加到 3 个，但保留相同的最小值和比率。

![](img/8b64bed35affa121a5231b90f0ffca21.png)

种族比例 1:1:1

看起来还不算太糟。但是记住，这还是相当宽容的，只要我的邻居中有 3 个是同种族的(37.5%)，就没有动静。

## 更改邻居偏好级别

让我们后退一点，想象一个理想的世界，假设每个人都很好，如果至少有一个邻居是同一种族的(12.5%)。

![](img/f5e2a171c2a827a769c0ecf4a5d30be6.png)

最小列表 0:0:0

这看起来很随机，分布很广，因为单元是随机放置的。现在，让我们通过将最小可接受邻居数量设置为 5 或更多(62.5%)来将它提高几个等级

![](img/dddf20ae0dc4fd2f0d32b1a4c577f4b2.png)

最小列表 4:4:4

仅仅是这个变化，没有其他变化，我们可以看到网格变得更加隔离。

## 改变种族间的比例

现在让我们稍微调整一下种族比例。根据 2019 年美国人口普查局的估计，白人占 76.5%，任何种族的西班牙裔和拉丁裔美国人占 18.3%，黑人占人口的 13.4%。我们将第一场比赛(深粉色)设置为 76，第二场比赛(草坪绿色)设置为 18，第三场比赛(深天蓝色)设置为 13，并重新运行模拟。

![](img/dc57fe952c780522b7a0e7006600c2ad.png)

种族比例 76:18:13

我加快了这个 8x 的视频速度，但是你可以看到深粉色是如何快速稳定下来的(因为它的人口，但是其他两个种族在现有种族之间慢慢形成了自己的领地。深粉红色是非常稳定和集群，而其他 2 个种族需要相当长的时间来建立。

## 不同种族的邻居偏好水平不同

先前的模拟假设所有 3 个种族具有相同种族的相同最小数量的邻居。如果他们不一样呢？如果多数民族比少数民族要求更高会发生什么？

![](img/ec51b4d288b7541691f68bd204013a25.png)

比例 75:18:13，最小列表 4:2:2

我们现在看到了一幅不同的画面。模拟很快稳定下来，另外两个要求较低的种族发现他们在大的飞地中不那么聚集在一起。

反过来呢——如果少数民族之一比多数民族和另一个少数民族要求更多？

![](img/17aa25f492de43f2a3e4a66a8516b8a2.png)

比例 76:18:13，最小列表 2:2:4

要求更高的少数种族，深蓝，永远不会稳定，因为它走到哪里都会移动，而深红和草坪绿，这两种要求较低的稳定，分布非常好。

## 强加同种族邻居的最大数量

到目前为止，我们只研究了同一种族的最小数量的邻居。如果我们实施一些政策来防止种族隔离会怎么样？这意味着我们有一个相同种族的邻居数量上限。

记得早些时候，我们有这种情况，给定的种族比例是平等的，所有的种族都更加苛刻，我们有这些种族隔离集群？

![](img/aaa1e067a4974c3f236f5e9575d0454f.png)

种族比例 1:1:1，最小列表 4:4:4

如果我们设置一个上限，如果一个单元有 6 个以上的邻居，它必须再次搬走，怎么办？

![](img/acd7bf3bb6b081e8d8b212e4895ef603.png)

种族比例 1:1:1，最小列表 4:4:4，最大列表 6:6:6

这是行不通的，因为唯一稳定的配置是，如果这个单位正好有 5 个同种族的邻居，并且有太多的运动让它达到一个稳定的稳态。

如果只有一个种族被强加了这种特殊的政策呢？

![](img/2c37c1ad4a7a051848925a5359540aa3.png)

比赛比例 1:1:1，最小列表 4:4:4，最大列表 6:8:8

在这种情况下，因为草坪绿和深天蓝种族被给予自由统治，他们形成了他们通常的飞地，但因为深天红被强加了一项政策，它在他们的社区中长出了洞！这是因为其他种族都不会住在那些地方，那些地方也因为政策的原因不能被占领。

但是等等，那是因为他们有选择。所以，如果他们没有选择，因为根本没有空间？请记住，覆盖率参数允许我们指定模拟网格的填充程度。默认情况下是 70%，但是如果设置为 99%呢？(不可能是 100%不然谁都动不了)。

![](img/adb87e53db1dfe7bb803eb29984f53a5.png)

事实证明，它确实进入了某种程度的隔离，但是单元继续移动，它永远不会达到一个稳定的状态。

# 一些想法

模拟结果显示:

1.  仅仅因为一个简单的事情，比如对同种族邻居的偏爱，我们就可能很快变得真正被隔离
2.  在一个种族占多数的环境中，少数种族在优势种族遗留下来的地区形成他们自己的飞地
3.  如果多数种族在要求其邻居是同一种族方面没有少数种族那么苛刻，这可能导致较少的隔离，反之，隔离仍然相当突出
4.  仅仅实施政策来防止种族隔离是不会非常成功的。人们需要改变心态来欢迎不同种族的邻居

做和写关于技术的东西是我处理事情的方式，探索并试图理解我周围的世界。谢林是一位杰出的经济学家，他对许多事情都有深刻的见解。重新实施这些想法有助于更好地理解这个世界。

种族主义和种族隔离是当今世界的丑陋事实，但如果我们敞开心扉，欢迎与我们不同的人，事情会变得更好。

# 密码

你可以在这里找到这篇文章的所有代码——https://github.com/sausheong/segregation。

# 参考

分离的动态模型，托马斯 C·谢林(1971 年)——[https://www . suz . uzh . ch/dam/JCR:ffffffff-fad 3-547 b-ffff-ffff 9a 867 c 99/09.27-谢林-71.pdf](https://www.suz.uzh.ch/dam/jcr:ffffffff-fad3-547b-ffff-ffff9a867c99/09.27-schelling-71.pdf)

使用新加坡族裔住房配额估计族裔偏好—[http://public . econ . duke . edu/~ staff/wrk shop _ papers/2008-2009% 20 papers/wong . pdf](http://public.econ.duke.edu/~staff/wrkshop_papers/2008-2009%20Papers/Wong.pdf)

经济自由能培养宽容吗？—[http://www.ifn.se/wfiles/wp/wp918.pdf](http://www.ifn.se/wfiles/wp/wp918.pdf)