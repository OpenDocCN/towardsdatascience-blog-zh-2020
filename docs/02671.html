<html>
<head>
<title>Create Dumbbell Plots to Visualize Group Differences in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建哑铃图以直观显示 R 中的组差异</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-dumbbell-plots-to-visualize-group-differences-in-r-3536b7d0a19a?source=collection_archive---------9-----------------------#2020-03-15">https://towardsdatascience.com/create-dumbbell-plots-to-visualize-group-differences-in-r-3536b7d0a19a?source=collection_archive---------9-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ef235b91dc5e63c2254fa728c51ca223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*u5rJPBTwepH2X-pHKrCZPQ.gif"/></div></div></figure><p id="ea86" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">冠状病毒(也称为新冠肺炎)是一种疫情。截至本文撰写之时，已有近 6000 人死亡，另有 15 万人(T2)被感染。所有迹象似乎表明，病毒只是在增长。</p><p id="9948" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是一些团体不像其他团体那样担心新冠肺炎。昆尼皮亚克大学最近的<a class="ae kz" href="https://poll.qu.edu/national/release-detail?ReleaseID=3657#.XmaSrM7okEs.twitter" rel="noopener ugc nofollow" target="_blank">民调</a>显示，对冠状病毒的担忧与个人的党派身份、年龄和种族有关。</p><p id="3e89" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们想象一下，看看差异有多明显。我使用哑铃状点状图，因为它们是可视化两个群体(例如共和党和民主党)之间差异的一些最有力的工具。</p><h1 id="01b4" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">政治派别</h1><p id="906a" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">与民主党人相比，共和党人对冠状病毒的担忧要少得多。这在两个方面是正确的。首先，关于<em class="md">被感染的担忧</em>:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/76763ccb29dd21c9a2082423b2a8be51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UcLr0XDX18lMCdwYfveUw.jpeg"/></div></div></figure><p id="c9e3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我们关注新冠肺炎会不会<em class="md">扰乱一个人的生活</em>时，情况也是如此:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/dae68a1009e0c48a317d822b63572278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YYpUVgqpdSp8nUO9TPOJhw.jpeg"/></div></div></figure><p id="6ad2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">看第一个图，我们注意到共和党人说他们“根本不担心”冠状病毒感染他们或他们认识的人的可能性是民主党人的三倍。相比之下，民主党人说他们“非常担心”同样风险的可能性几乎是共和党人的三倍。</p><p id="cee0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第二幅图向我们展示了对破坏的恐惧的类似趋势:四分之三的民主党人担心(非常或有点)新冠肺炎会破坏他们的日常生活，相比之下，只有 38%的共和党人担心。虽然 26%的民主党人不担心分裂，但 61%的共和党人也是如此。</p><h1 id="2b10" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">年龄</h1><p id="db02" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">年龄和对冠状病毒的恐惧也有关系。</p><div class="mf mg mh mi gt ab cb"><figure class="mj ju mk ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/256ae7f57cb5d593a5b559d09ebe687a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*GXfA0_83vrISZjJpWrKV3A.jpeg"/></div></figure><figure class="mj ju mk ml mm mn mo paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/a60a48d6dde6e4f1d02efe9ee2698516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*-UpqAzOEo7hBxShqenZ5sg.jpeg"/></div></figure></div><p id="ff4c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些图表显示，不同年龄的人在担忧方面存在显著差异，但对分裂的恐惧比对感染的恐惧更普遍。第一个情节表明<em class="md">每个年龄段的人</em>都害怕新冠肺炎会打乱他们的日常生活；尽管年轻人表达这种情绪的频率较低。第二个情节<strong class="kd iu">大多数 50 岁以下的人并不担心新冠肺炎感染的可能性</strong>。年龄较大的受访者则相反；65 岁及以上的人更有可能受到感染风险的影响(62%对 37%)。</p><h1 id="642f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">为什么是哑铃情节？</h1><p id="89ad" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">哑铃图是分组条形图的替代方法。像条形图一样，它们显示了人群之间的差异，并且更有力地代表了两个群体之间的 T2 距离。他们经常被调查研究公司使用，如皮尤研究中心，如这个<a class="ae kz" href="https://twitter.com/pewresearch/status/1238345807348334593/photo/1" rel="noopener ugc nofollow" target="_blank">例子</a>所示:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/1aba2318564047c00d1d20fa371ad88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*EZjZA-NBL470gCBYE6u_Nw.jpeg"/></div></figure><p id="dffd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">虽然条形图需要八个条来可视化上面的每个数据点，但哑铃点图在四条线上显示八个点<em class="md">，减少混乱并强调组</em>之间的差异<em class="md">。</em></p><p id="26cd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里有另一个例子，这次来自<a class="ae kz" href="https://www.axios.com/trumps-disapproval-rate-is-up-in-every-state-2495232720.html?utm_source=twitter&amp;utm_medium=social&amp;utm_campaign=organic&amp;utm_content=infographic&amp;utm_term=politics" rel="noopener ugc nofollow" target="_blank"> Axios </a>(可视化 2017 年 1 月至 10 月总统不支持率的变化):</p><figure class="mf mg mh mi gt ju"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="aa08" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个伪哑铃情节(端点怪异的哑铃；别捡那一边！)有 50 个‘组’(美国各州)，但只有两个<em class="md">结果</em>(1 月和 10 月)。在这种情况下，哑铃图远远优于组合条形图，因为它强调两个时间段之间的差异，并且它使用的对象比条形图少(50 条线而不是 100 条线)。</p><p id="a3fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从上面的例子中得到一个关键的教训:如果利益的<em class="md">比较</em>是在两个群体之间(例如，共和党和民主党)，或者如果利益的<em class="md">结果</em>是双重的(例如，“关注”和“不关注”)，点状图是可视化数据的一种更好的方式。</p><h1 id="0d05" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">让我们在 R 中制造它！</h1><p id="3d27" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在是时候做自己的哑铃点状图了。我们将创建这个，即:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/76763ccb29dd21c9a2082423b2a8be51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UcLr0XDX18lMCdwYfveUw.jpeg"/></div></div></figure><p id="b08b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为参考，我使用的数据如下所示:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/17000c5809b6f59271fc2980621617ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*sFNoQBErR08e29bYbjA7QQ.jpeg"/></div></figure><p id="8d3a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">很简单，对吧？顺便说一下，它来自这里。</p><p id="7193" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个过程依赖于 Bob Rudis 的<code class="fe mt mu mv mw b">ggalt</code>包和<code class="fe mt mu mv mw b">geom_dumbbell</code>函数，它们完成了大部分繁重的工作。本教程主要是在这里找到的 Rudis 的代码<a class="ae kz" href="https://rud.is/b/2016/04/17/ggplot2-exercising-with-ggalt-dumbbells/" rel="noopener ugc nofollow" target="_blank">的一步一步的再创造</a>。</p><p id="e75b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了方便起见，在开始之前，让我们先定义一些东西:</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="aabb" class="nb lb it mw b gy nc nd l ne nf">blue &lt;- "#0171CE"<br/>red &lt;- "#DE4433"</span></pre><p id="4158" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">除了颜色，我们还创建了一个 hack-y 函数，允许我们有选择地标记点(再次感谢 Bob Rudis 的<a class="ae kz" href="https://rud.is/b/2016/04/17/ggplot2-exercising-with-ggalt-dumbbells/" rel="noopener ugc nofollow" target="_blank">这个</a>):</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="3810" class="nb lb it mw b gy nc nd l ne nf">percent_first &lt;- function(x) {<br/>  x &lt;- sprintf("%d%%", round(x*100))<br/>  x[2:length(x)] &lt;- sub("%$", "", x[2:length(x)])<br/>  x<br/>}</span></pre><h1 id="ae60" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">第一步:准系统</h1><p id="35fe" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">我们从一个基本的<code class="fe mt mu mv mw b">ggplot</code>对象开始。在<code class="fe mt mu mv mw b">geom_segment</code>中，我们定义了伪网格线(每个关注“级别”一条)。</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="64f3" class="nb lb it mw b gy nc nd l ne nf">library(ggplot2) <br/>library(ggalt)   <br/>library(tidyverse)<br/><br/>ggplot() +<br/>  geom_segment(data=infected, aes(y=concerned, yend=concerned, x=0, xend=.5), color="#b2b2b2", size=0.15)</span></pre><p id="629a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，<code class="fe mt mu mv mw b">geom_segment</code>创建了大小为 0.15 的灰色线条。线条的跨度从 0 到 0.5。这根据您的数据而变化；因为我们正在处理的最大数字是. 43(代表 43%的民主党人)，所以我们右侧的界限可以是 0.5；这也为我们稍后创建的差异列留出了空间。</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/4cedf893ffb67cc7f5ad533324cb165b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q5qzw0wfQZ_j_pfXooCQQA.jpeg"/></div></div></figure><p id="c70a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，<code class="fe mt mu mv mw b">geom_dumbbell</code>读入我们的数据并创建哑铃:我们指定每个哑铃的<em class="md">开头</em> ( <code class="fe mt mu mv mw b">x</code>)代表共和党，而<em class="md">结尾</em> ( <code class="fe mt mu mv mw b">xend</code>)对应民主党。其他规格影响伴随的线和点。</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="5725" class="nb lb it mw b gy nc nd l ne nf">geom_dumbbell(data=infected, aes(y=concerned, x=rep, xend=dem),<br/>size=1.5, color="#b2b2b2", size_x=3, size_xend = 3, colour_x = red, colour_xend = blue)</span></pre><p id="d65c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该代码创建了以下情节:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/c907e8db3e80d142d601b7e87a9d882b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQPkMwWYhlvL-8YFwcbWdw.jpeg"/></div></div></figure><p id="d1bd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们已经可以开始看到最终版本的框架:每个哑铃代表一个关注级别，并可视化共和党和民主党在该级别的比例。</p><h1 id="13a4" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">第二步:标签</h1><p id="ce30" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">下一步是创建“共和党”和“民主党”标签(以防颜色不够，或者图像是黑白的！).</p><p id="b949" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以用下面的代码创建标签:</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="745f" class="nb lb it mw b gy nc nd l ne nf">geom_text(data=filter(infected, concerned=="Very concerned"),<br/>          aes(x=dem, y=concerned, label="Democrats"),<br/>          color=blue, size=3, vjust=-1.5, fontface="bold", family="Lato") +<br/>geom_text(data=filter(infected, concerned=="Very concerned"),<br/>          aes(x=rep, y=concerned, label="Republicans"),<br/>          color=red, size=3, vjust=-1.5, fontface="bold", family="Lato")</span></pre><p id="f956" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">希望这段代码非常直观。因为我们只显示标签一次，所以我们在<code class="fe mt mu mv mw b">geom_text</code>的<code class="fe mt mu mv mw b">data</code>参数中指定一个过滤器。如果我们想只显示底层关注的标签，我们可以指定<code class="fe mt mu mv mw b">data=filter(infected, concerned=="Not concerned at all")</code>。</p><p id="ff7a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将每个点标上各自的政治归属，并根据点的颜色指定颜色。剩下的只是对文字的小美化。</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/3e15dcc67c404a79193a47bd33fa8f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ue3ecNEu6HNjTZYQrqs5SQ.jpeg"/></div></div></figure><p id="234c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们还必须为值添加直接标签，以便每个组的确切百分比清晰可见:</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="2db3" class="nb lb it mw b gy nc nd l ne nf">geom_text(data=infected, aes(x=rep, y=concerned, label=percent_first(rep)),<br/>          color=red, size=2.75, vjust=2.5, family="Lato") +<br/>geom_text(data=infected, color=blue, size=2.75, vjust=2.5, family="Lato",<br/>          aes(x=dem, y=concerned, label=percent_first(dem)))</span></pre><p id="2440" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，我们利用我们之前定义的函数<code class="fe mt mu mv mw b">percent_first</code>，因为我们只希望百分比出现在第一个数字上(以减少混乱)。其余的标签只是代表百分比的数字。这里的语法是简单的语法，应该为<code class="fe mt mu mv mw b">ggplot</code>用户所熟悉。它会创建以下输出:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/a2b9abb6772a70b8c5d5a3671757387a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BssUjiGtCTBjT_SxGPVypw.jpeg"/></div></div></figure><h1 id="31d7" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">第三步:差异栏</h1><p id="ca99" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">最后，我们想帮助我们的观众看到民主党和共和党之间的差异到底有多明显。我们通过差异列来实现这一点。</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="d33a" class="nb lb it mw b gy nc nd l ne nf">geom_rect(data=infected, aes(xmin=.5, xmax=.6, ymin=-Inf, ymax=Inf), fill="grey") +<br/>geom_text(data=infected, aes(label=paste0(diff*100, "%"), y=concerned, x=.55), fontface="bold", size=3, family="Lato") +<br/>geom_text(data=filter(infected, concerned=="Very concerned"), <br/>            aes(x=.55, y=concerned, label="Difference"),<br/>            color="black", size=3.1, vjust=-2, fontface="bold", family="Lato") +<br/>scale_x_continuous(expand=c(0,0), limits=c(0, .625)) +<br/>scale_y_discrete(expand=c(0.2,0))</span></pre><p id="6043" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里，我们首先创建一个带有<code class="fe mt mu mv mw b">geom_rect</code>的灰色矩形。它垂直跨越了整个图表，这就是为什么<code class="fe mt mu mv mw b">ymin</code>和<code class="fe mt mu mv mw b">ymax</code>的范围从负无穷大到正无穷大。接下来，我们根据差异列创建标签。我们根据关注程度(我们的 y 轴)对它们进行定位。最后，我们扩展了图表的边界，使它看起来更漂亮一些:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/d94e6de683cc2ffb836161618495e5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prbkeKtCHEWaYs57kaRbBA.jpeg"/></div></div></figure><h1 id="5a94" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">第四步:标题、标签和说明</h1><p id="b5ae" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">最后，让我们添加标题、副标题、题注和轴标签:</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="56f0" class="nb lb it mw b gy nc nd l ne nf">labs(x=NULL, y=NULL, title="Republicans are less worried about COVID-19",<br/>       subtitle="How concerned are you that you or someone you know will be infected with the coronavirus?",<br/>       caption="Source: Quinnipiac University Poll, March 9, 2020. Q27\n\nDesign: Connor Rothschild")</span></pre><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/05643ec873bddf087e566e0c6259d74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_2FUlaFbGhvuxUQPCoAYw.jpeg"/></div></div></figure><p id="77ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那是我们的阴谋！可惜它有点丑。让我们在最后一步解决这个问题。</p><h1 id="8457" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 5:美化</h1><p id="4abe" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">使用<code class="fe mt mu mv mw b">theme</code>参数进行美化。</p><pre class="mf mg mh mi gt mx mw my mz aw na bi"><span id="be9d" class="nb lb it mw b gy nc nd l ne nf">theme_bw(base_family="Lato") +<br/>theme(<br/>  panel.grid.major=element_blank(),<br/>  panel.grid.minor=element_blank(),<br/>  panel.border=element_blank(),<br/>  axis.ticks=element_blank(),<br/>  axis.text.x=element_blank(),<br/>  plot.title=element_text(size = 16, face="bold"),<br/>  plot.title.position = "plot",<br/>  plot.subtitle=element_text(face="italic", size=12, margin=margin(b=12)),<br/>  plot.caption=element_text(size=8, margin=margin(t=12), color="#7a7d7e")<br/>)</span></pre><p id="e0c2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在指定了我们的基本<code class="fe mt mu mv mw b">ggplot</code>主题<code class="fe mt mu mv mw b">theme_bw</code>之后，我们使用<code class="fe mt mu mv mw b">theme()</code>来指定一系列的参数。</p><p id="f15c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了简化，上面的代码:</p><ul class=""><li id="30a4" class="ng nh it kd b ke kf ki kj km ni kq nj ku nk ky nl nm nn no bi translated">删除网格线(<code class="fe mt mu mv mw b">panel.grid.major</code>，<code class="fe mt mu mv mw b">panel.grid.minor</code>)</li><li id="09ba" class="ng nh it kd b ke np ki nq km nr kq ns ku nt ky nl nm nn no bi translated">移除面板边框(<code class="fe mt mu mv mw b">panel.border</code>)</li><li id="1ced" class="ng nh it kd b ke np ki nq km nr kq ns ku nt ky nl nm nn no bi translated">删除轴记号和轴文本(<code class="fe mt mu mv mw b">axis.ticks</code>、<code class="fe mt mu mv mw b">axis.text.x</code>)</li><li id="cd0e" class="ng nh it kd b ke np ki nq km nr kq ns ku nt ky nl nm nn no bi translated">定位轴绘图、副标题和标题，并设置它们的样式(<code class="fe mt mu mv mw b">plot.title</code>、<code class="fe mt mu mv mw b">plot.title.position</code>、<code class="fe mt mu mv mw b">plot.subtitle</code>、<code class="fe mt mu mv mw b">plot.caption</code>)。</li></ul><p id="e940" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的最终产出:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/76763ccb29dd21c9a2082423b2a8be51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UcLr0XDX18lMCdwYfveUw.jpeg"/></div></div></figure><h1 id="2c5f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">总结</h1><p id="ddde" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">我们的过程看起来像这样:</p><figure class="mf mg mh mi gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ef235b91dc5e63c2254fa728c51ca223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*u5rJPBTwepH2X-pHKrCZPQ.gif"/></div></div></figure><p id="0bc6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上述可视化的代码，以及底层数据集和输出，可以在<a class="ae kz" href="https://github.com/connorrothschild/R/tree/master/covid" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="39e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢阅读！</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><div class="mf mg mh mi gt ob"><a href="https://twitter.com/CL_Rothschild" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">康纳·罗斯柴尔德</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">康纳·罗斯柴尔德的最新推文(@CL_Rothschild)。数据科学和公共政策。使用内部字体系列…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">twitter.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op jz ob"/></div></div></a></div><p id="baa1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="md">原载于我的</em> <a class="ae kz" href="https://connorrothschild.github.io/covid/" rel="noopener ugc nofollow" target="_blank"> <em class="md">博客</em> </a> <em class="md">。</em></p></div></div>    
</body>
</html>