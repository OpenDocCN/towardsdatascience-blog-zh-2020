<html>
<head>
<title>Creating Beautiful &amp; Informative Representations of Text: Wordclouds</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建漂亮且信息丰富的文本表示:单词云</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-beautiful-informative-representations-of-text-wordclouds-84911f6d05b5?source=collection_archive---------50-----------------------#2020-08-25">https://towardsdatascience.com/creating-beautiful-informative-representations-of-text-wordclouds-84911f6d05b5?source=collection_archive---------50-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5b651853f5165fcaa28789c8d30db34e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fqgUMTJW5kN3t0g5nhbYw.png"/></div></div></figure><div class=""/><div class=""><h2 id="380e" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">一个简单的 Python 教程</h2></div><p id="d907" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">单词云经常被误认为是笨重和过时的。事实上，它们可以是优雅和创造性的文本交流方法，既可以作为探索性分析，也可以作为演示。此外，它们很容易用 Python 创建——所以让我们开始吧！</p></div><div class="ab cl lp lq hx lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="im in io ip iq"><p id="2db0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们复制粘贴这篇<a class="ae lw" href="https://www.medicalnewstoday.com/articles/covid-19#summary" rel="noopener ugc nofollow" target="_blank">新冠肺炎</a>文章的内容，并将其粘贴到一个名为<code class="fe lx ly lz ma b">covid_article.txt</code>的文本文件中。这个文本文件的内容将被存储到一个名为<code class="fe lx ly lz ma b">content</code>的变量中。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="d047" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为了确保一个单词与另一个单词相同，我们需要去掉标点符号和大写字母，这样“hello”就与“hello”相同，而“Hello”与“Hello！”相同。我们还需要确保字符都是字母——我们可以通过列表理解(或者正则表达式)来实现这一点。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mh"><img src="../Images/3c6fa422133074d23cf45c9318608a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0pHG83QwJjA-lv7Zs2mGPQ.png"/></div></div></figure><p id="bc98" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">显然有一些小问题需要解决，但一般来说这只是一串单词，我们现在继续。我们需要导入<code class="fe lx ly lz ma b">wordcloud</code>模块(使用<code class="fe lx ly lz ma b">pip install wordcloud</code>安装)和<code class="fe lx ly lz ma b">matplotlib</code>库来显示图像。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="8d92" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们可以使用 wordcloud 用简单的参数构建一个 WordCloud。使用了三个参数——<code class="fe lx ly lz ma b">max_font_size</code>，表示一个字的最大大小；<code class="fe lx ly lz ma b">max_words</code>，显示的最大字数；还有<code class="fe lx ly lz ma b">background_color</code>，设置背景的颜色。Matplotlib 可以用来设置图形大小，显示文字云，不显示轴。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/f7a71fa488acfc0ba86506e198afa021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJfd-Kb8xb3Wp5MogIchOQ.png"/></div></div><p class="mj mk gj gh gi ml mm bd b be z dk translated">不要担心分辨率低，我们稍后会解决这个问题。</p></figure><p id="13fc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">它看起来不是很好，但它有很多我们期望看到的信息，每个单词的大小取决于它在文本中出现的次数。请注意，默认情况下，所谓的“停用词”，或者像“a”、“I”或“and”这样的常用词被排除在词云之外。您可以编写额外的过滤器来删除其他单词。</p><p id="f793" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们试着改变颜色。我们需要创建一个函数<code class="fe lx ly lz ma b">color_func()</code>，它返回一个 HSL 颜色，这是另一种表示颜色的方法(仅次于 RGB)。这个函数返回介于灰色和红色之间的随机颜色。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="22ea" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你可以在这里熟悉 HSL(色相、饱和度、明度)<a class="ae lw" href="https://www.w3schools.com/colors/colors_hsl.asp" rel="noopener ugc nofollow" target="_blank">。供参考，这是<code class="fe lx ly lz ma b">hsl(0,50,50)</code>的数值。</a></p><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mn"><img src="../Images/e7d1cffc2f111d20342106acc56b1dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0uLZA1g6lumeDq_Xed7lA.png"/></div></div></figure><p id="a295" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">要应用 color 函数，请使用以下代码将 wordcloud 转换为数组，并应用重新着色函数。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/ff5cebbe4b1ff5e72171e5165f3362b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mjQMiVNb7xmQS05SdyMD3A.png"/></div></div></figure><p id="0b75" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">或者，我们可以重新定义<code class="fe lx ly lz ma b">color_func</code>函数来接受一个<code class="fe lx ly lz ma b">word</code>参数，并检查它是否在最常见的单词列表中，<code class="fe lx ly lz ma b">top_words</code>。在这种情况下，<code class="fe lx ly lz ma b">top_words</code>是文本中出现超过二十次的所有单词的集合。如果单词是顶部单词，则返回一个随机的红色值。否则，该单词将显示为灰黑色。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mi"><img src="../Images/301652906e4be516a3d1215ac2c848fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P278_6MiABLFu3q_QHxgwA.png"/></div></div></figure><p id="8c24" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们把这个词做成病毒形状的云。首先，我们需要找到病毒的图片——你可以在任何搜索引擎上找到它。理想情况下，图像将有一个白色背景来创建一个“面具”。</p><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mo"><img src="../Images/0ff12b3b16e6a5b26784c11f65728f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mko2wIG3j37n6ltn7hJhlQ.png"/></div></div><p class="mj mk gj gh gi ml mm bd b be z dk translated">来源:<a class="ae lw" href="https://www.iconexperience.com/o_collection/icons/?icon=virus" rel="noopener ugc nofollow" target="_blank"> IconExperience </a>。图片免费分享。</p></figure><p id="8a72" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">掩码需要通过 PIL (Python Imaging Library)读取，并通过 NumPy 转换成数组。我们需要进口这些。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="36f7" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">一旦<code class="fe lx ly lz ma b">mask</code>被创建，就可以在<code class="fe lx ly lz ma b">WordCloud</code>中使用，包括参数<code class="fe lx ly lz ma b">mask=mask</code>。这个例子也使用了上面例子中的着色函数。</p><figure class="mb mc md me gt iv"><div class="bz fp l di"><div class="mf mg l"/></div></figure><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/7cb32c16f31bd363554a755a018c3aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*_neRgZvOaLknmnM-BgnqHQ.png"/></div></figure><p id="87f5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">不错！Wordcloud 为我们做了适应面具的大部分工作。对于我们的特定图像，较大的单词被推到中间，较小的单词被推到外面，这提供了一个很好的层次风格的可视化。</p><p id="f55b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">或者，我们可以将背景改为<code class="fe lx ly lz ma b">‘black’</code>，将文本颜色改为灰白色，以获得另一种可视化效果。</p><figure class="mb mc md me gt iv gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/9bc1e5d105b04dd4cf88e924c8cb8bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*hM00toJtfxT0NC4IaVywAw.png"/></div></figure><p id="a261" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">一些额外的想法/建议:</p><ul class=""><li id="1f0a" class="mq mr je kv b kw kx kz la lc ms lg mt lk mu lo mv mw mx my bi translated">增加字数可以帮助更好地勾勒出面具的轮廓。</li><li id="cadc" class="mq mr je kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">这些单词云的输出通常是粒状的。要导出高质量图像，请使用<code class="fe lx ly lz ma b">plt.savefig(“filepath/name.png”, dpi=600)</code>，其中 DPI 为“每英寸点数”。600 DPI 很好地平衡了质量和处理时间。</li></ul><figure class="mb mc md me gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/0a9e03e4f8769ca61580a26372d237a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7S5Oz52bFNYx4VY0c8BitQ.png"/></div></div><p class="mj mk gj gh gi ml mm bd b be z dk translated">高分辨率图像！</p></figure><ul class=""><li id="d633" class="mq mr je kv b kw kx kz la lc ms lg mt lk mu lo mv mw mx my bi translated">了解到较大的区域通常由较大的单词填充，尝试在 photoshop/PowerPoint 中创建自己的蒙版来表达层次。</li><li id="95fd" class="mq mr je kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">使用着色功能，您可以突出显示重要的单词，并探索其他提供的<code class="fe lx ly lz ma b">**kwargs</code>，如<code class="fe lx ly lz ma b">font_size</code>、<code class="fe lx ly lz ma b">position</code>和<code class="fe lx ly lz ma b">orientation</code>。例如，可以根据单词的大小或其在图像中的位置成比例地对单词进行着色(例如，根据单词在图像中的位置对单词进行着色)。</li></ul><p id="7079" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">感谢阅读！</p></div><div class="ab cl lp lq hx lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="im in io ip iq"><div class="mb mc md me gt nf"><a rel="noopener follow" target="_blank" href="/5-simple-one-liners-youve-been-looking-for-to-level-up-your-python-visualization-42ebc1deafbc"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd jf gy z fp nk fr fs nl fu fw jd bi translated">您一直在寻找的 5 个以上简单的一行程序来提升您的 Python 可视化水平</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">最小的努力，最大的收获</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">towardsdatascience.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt ja nf"/></div></div></a></div><p id="43ea" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">除非另有说明，图片由作者创作。</p></div></div>    
</body>
</html>