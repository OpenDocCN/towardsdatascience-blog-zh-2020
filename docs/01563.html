<html>
<head>
<title>How to create DataFlow IoT Pipeline -Google Cloud Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何打造数据流物联网管道——谷歌云平台</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-dataflow-iot-pipeline-in-google-cloud-platform-c08caeca13bb?source=collection_archive---------11-----------------------#2020-02-12">https://towardsdatascience.com/how-to-create-dataflow-iot-pipeline-in-google-cloud-platform-c08caeca13bb?source=collection_archive---------11-----------------------#2020-02-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/639738593a64e79d9bee34a05ddf20b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ot0PLDBgxl5kfRSRBA8L4Q.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">来自谷歌云平台参考架构的数据管道架构</p></figure><h1 id="a7fc" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">介绍</h1><p id="dfb1" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">在本文中，我们将了解如何在谷歌云平台上配置完整的端到端物联网管道。你会知道-</p><p id="22af" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何在云物联网核心中创建设备注册表</p><p id="c4a8" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何创建主题和订阅</p><p id="4e48" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何使用GCP Python物联网客户端向设备发送消息</p><p id="34ed" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何设置发布订阅</p><p id="20f8" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何建立从PubSub到BigQuery的云数据流管道</p><h1 id="5cb6" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">如何使用设备注册表和发布订阅设置云物联网核心</h1><p id="ec6f" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">前往<a class="ae mg" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/</a>，使用您的凭证登录并搜索物联网核心。</p><p id="2680" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">选择物联网核心后，其主界面页面会打开如下图。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/59559f37f2006c1ffa78bfe3151774bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*hpTCgDaiE-gFORBsdfEZHw.png"/></div></figure><p id="b7ff" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">我们首先需要创建注册表来注册设备。</p><p id="d42b" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">点击创建注册表</strong>。创建注册表的新页面打开如下</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/8265461a14a03b03eca3f7587d167fc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*PvEPSSWzySOin7KNiIpSfA.png"/></div></figure><p id="236b" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">根据需要为您的注册表命名。您可以看到显示的命名规则。</p><p id="ea45" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">选择要存储数据的区域。最好让注册表区域靠近设备源</p><p id="8642" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">然后您会注意到，它要求命名主题名为pub-sub，以路由来自注册中心中注册的设备的消息。</p><p id="4a22" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">所以我们取一个小的散度。转到发布订阅并创建主题和订阅。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/2c691d33643faa76f9003de2a999a844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*mHS9hKmpnGb5NMKm6lEClQ.png"/></div></figure><p id="1a3f" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">在新标签页转到https://console.cloud.google.com/的<a class="ae mg" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">并搜索发布订阅</a></p><p id="288d" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">它将打开发布-订阅登录页面，如下所示</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/b3405bf50d2abcdb5b8023ecd06fa7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*xxPxtpTeSrXSYPVLvwt65w.png"/></div></figure><p id="27fd" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">由于我已经创建了一个主题，它显示在列表中。</p><p id="7789" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">点击创建主题</strong>。将打开一个新的创建主题配置页面，如下所示</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/59c49130cf9eac33dfc029cc8b269bbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*iGZRCdg2M-o4n6TJGSbMwA.png"/></div></figure><p id="f1f6" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">给一个你想要的话题ID。它将自动创建一个主题名称，并添加到您的项目路径中。</p><p id="bcbe" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">点击</strong>创建主题。完成后，您将看到在主题登录页面中创建的主题。</p><p id="90b1" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">主题将消息从发布者设备转发到订阅者。任何订阅的消费者都可以使用这些消息。</p><p id="7a68" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">因此，让我们创建一个订阅，并将其与我们创建的主题相关联。</p><p id="5ce4" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">为此，请在发布订阅的登录页面上单击订阅。它将打开订阅窗格。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mn"><img src="../Images/09c7be5e280aff4bb1737e3175a0a324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*aYO7_uscsNys6LDWR2yOSw.png"/></div></div></figure><p id="97e8" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">点击</strong>创建订阅。这将打开订阅配置窗格。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/7830e996a5778f1b6e3ab52c6359cd72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*Z28-8I92rwpHgJZsjBtZjw.png"/></div></figure><p id="d907" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">给出你选择的ID。它将自动创建一个带有项目名称的订阅名称。</p><p id="4600" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">将您的订阅与刚刚创建的主题名称链接起来。</p><p id="8381" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">保留其余的默认设置，然后单击Create。</p><p id="1f03" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">这将创建如图所示的订阅</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/94cc24de2dd9ed6df455de3df392bacb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*z1CMApeAqEm5lJfq9g95UA.png"/></div></figure><p id="efca" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">现在，让我们回到“物联网核心”选项卡，将注册表与我们在“创建注册表配置”窗格中创建的主题相关联。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/5d2cb982fd85cea3e0888168dc030bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*P1fhlzdtKtSybQcO1F78-g.png"/></div></figure><p id="c756" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">单击“创建”来创建注册表。</p><p id="cc17" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">创建注册中心后，物联网核心登录页面将如下所示</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/4bb97611f156c450a57338d5dbfcce58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*_7ZTyXai1aOqZDWN3cVVyw.png"/></div></figure><p id="bd3f" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">点击注册表创建。它将打开如下注册表页面。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/3ba505d8a448f9162d77dc47578d0208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*gnDYvM5YbtWni-mpHk3Gpw.png"/></div></figure><p id="5a7d" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">我们现在需要创建一个设备实例，并将其与我们创建的注册表相关联。这将完成设备创建、注册表创建、主题订阅创建的路径。然后，我们可以从GCP客户端向这些设备发送消息。消息将通过订阅路由到主题。然后，可以用API提取消息。</p><p id="0aa9" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">点击设备，然后创建设备选项卡</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/f5d25f51a46ff632eaac4940e475fdbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*7EIuK8BrckoTFb81iuOXCw.png"/></div></figure><p id="6c43" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">这将打开设备配置页面。给出一个设备ID，保留其余的设置，然后点击create。这将创建一个与注册表相关联的设备实例。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/f17c4a7d8cd49c136bf15050bb2f3ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*y68uXkyZaqjYilYb5dmhtA.png"/></div></figure><h1 id="e4c7" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">创建GCP客户端，通过MQTT协议发送消息</h1><p id="dc76" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">下载用于谷歌云平台实施的Python脚本@</p><p id="72cc" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><a class="ae mg" href="https://github.com/GoogleCloudPlatform/python-docs-samples" rel="noopener ugc nofollow" target="_blank"><strong class="lf iu">【https://github.com/GoogleCloudPlatform/python-docs-samples】</strong></a></p><p id="2698" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">转到<strong class="lf iu"><em class="mq">tree/master/IOT/API-client/end _ to _ end _ example/cloud IOT _ pubsub _ example _ mqtt _ device . py</em></strong></p><p id="813f" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">此客户端依赖于以下python库。</p><p id="b854" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu"> <em class="mq"> argparse，datetime，json，os，ssl，time，jwt，paho MQTT客户端</em> </strong>。如果需要，可以使用pip install将相关的库安装到python包中。</p><p id="df5d" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">客户端文件生成虚拟温度数据消息，并将遥测数据发送到我们在物联网核心上创建的设备。该消息被进一步路由到发布-订阅主题。我们可以在发布订阅中看到消息，也可以订阅和提取消息。</p><p id="6012" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">请注意，这是一个基线脚本。您可以根据您的消息要求进行更改。</p><h1 id="59c5" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">执行代码</h1><p id="4033" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><strong class="lf iu">python cloud IOT _ pubsub _ example _ mqtt _ device _ lift PDM . py</strong>—<em class="mq">project _ id = your project name—registry _ id = your registry id—device _ id = your device id—private _ key _ file = RSApemfile—algorithm = RS 256</em></p><p id="9035" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">您可以使用openSSL通过以下命令生成RSA pem文件，如下所示-</p><p id="b327" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">OpenSSL gen pkey</strong>-算法RSA-out RSA _ private . PEM-pkeyopt RSA _ keygen _ bits:2048</p><p id="d9f4" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">OpenSSL RSA</strong>-in RSA _ private . PEM-pub out-out RSA _ public . PEM</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/1673e23b708348603b09f1b90a86677f.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*BU0lifmja-qvXn0SBvaR_Q.png"/></div></div></figure><p id="52e2" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">当我发布不同的数据时，你会看到不同的信息。但是消息将被确认。</p><p id="e0bd" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">现在让我们去PubSub看看消息。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mn"><img src="../Images/7d56fac6423a7b537ed0cc5b874ee59e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*k93GesA9mrulB7D8XMC1tQ.png"/></div></div></figure><p id="3440" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">点击您创建的主题ID</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/a094fa714bda90864be3ea35e0e9badd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*xWhYwrcsN2Cck6-FVuzFGw.png"/></div></figure><p id="3490" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">点击查看消息。您将选择订阅。从我们刚刚创建的下拉列表中单击subscription。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/d498ab5a9731c56fd95c8dddb43595e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*e-j9Z76swsXkMm558Yp17A.png"/></div></figure><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f9ee0cd4beb47f3e063e8324fea5901a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*-TJ2RW2ckCNpSU2Y8Uk2QA.png"/></div></figure><h1 id="7ba1" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">数据流管道</h1><p id="3b72" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">现在让我们来看看如何创建从PubSub到BigQuery的数据流管道</p><p id="8932" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">去console.cloud.google.com/dataflow。登录页面如下所示</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/7f21b3fb1ecb1283b16ea7964c0e8f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Vat9NC2JBOStg_UpYd7P5w.png"/></div></figure><p id="d8b6" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">点击从模板创建工作。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/d498ab5a9731c56fd95c8dddb43595e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*e-j9Z76swsXkMm558Yp17A.png"/></div></figure><p id="77ea" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">给出所需的作业名称、区域端点。从数据流模板中选择Pub-Sub到Bigquery管道，如下所示。以project:dataset:tablename格式命名我们创建的订阅和表名。您还需要在Google云存储中指定临时存储位置，如下所示。</p><p id="f0bf" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">你可以在big query @<a class="ae mg" href="https://cloud.google.com/bigquery/docs/tables" rel="noopener ugc nofollow" target="_blank"><em class="mq"/></a>中寻找更多关于表创建的细节</p><p id="2c01" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">【https://cloud.google.com/bigquery/docs/schemas】T5<a class="ae mg" href="https://cloud.google.com/bigquery/docs/schemas" rel="noopener ugc nofollow" target="_blank">T6</a></p><p id="cdaa" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">您可以在云存储@<a class="ae mg" href="https://cloud.google.com/storage/docs/creating-buckets" rel="noopener ugc nofollow" target="_blank"><em class="mq"/></a>中了解更多关于桶存储创建的详细信息</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/fd4e1037d4bc206c26b2f8c0aaf838ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*P7CCiTlIsmEel6_SYcoGMw.png"/></div></figure><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/2c787136ce26d46fdf287715dcc087af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*VIyyyDbxNQBONkIR3kpZcw.png"/></div></figure><p id="9792" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">单击运行作业选项卡，作业面板将如下所示</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/8f759b48f844ce84d1b13c86ff090799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*l9e36XfRhePfGTncLPq5kA.png"/></div></figure><p id="6f5a" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">现在让我们转到大查询，检查数据是否流入我们的表。</p><p id="9df7" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><strong class="lf iu">注意</strong> — GCP不允许启动/停止数据流作业。每次想要停止时，您都必须重新创建一个作业。一定要停止这项工作，因为它会消耗大量资源并给你带来巨额账单。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/bfad8f07ba2dbdf5c4bcd70772c6e7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*FQ0xuu9wqnGJDo12n8ibsg.png"/></div></figure><p id="b2d0" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">数据流入数据集liftpdm_2的表acc8。</p><p id="baa9" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">一旦数据存储在BigQuery中，您就可以用于进一步的下游应用程序，如可视化、机器学习等，并将计算出的数据存储回BigQuery。</p><h1 id="7cef" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">结论</h1><p id="d104" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我们研究了step来创建物联网核心设备和注册表，并将它们与主题相关联。</p><p id="b754" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何创建发布-订阅主题和订阅？</p><p id="52bc" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何通过物联网Python客户端向PubSub发送消息？</p><p id="8ce1" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated">如何创建从发布订阅到大查询的数据流管道？</p><h1 id="7eeb" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">下一步怎么样</h1><p id="f656" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated">我们将研究如何利用一些可操作的参数创建与设备的闭环通信。</p><h1 id="9002" class="kf kg it bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">参考文献</strong></h1><p id="eb78" class="pw-post-body-paragraph ld le it lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma im bi translated"><a class="ae mg" href="https://cloud.google.com/iot/docs/samples/end-to-end-sample" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/iot/docs/samples/end-to-end-sample</a></p><p id="0939" class="pw-post-body-paragraph ld le it lf b lg mb li lj lk mc lm ln lo md lq lr ls me lu lv lw mf ly lz ma im bi translated"><a class="ae mg" href="https://cloud.google.com/dataflow/docs/guides/templates/provided-streaming" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/data flow/docs/guides/templates/provided-streaming</a>。</p><div class="mt mu gp gr mv mw"><a href="https://github.com/GoogleCloudPlatform/professional-services/tree/master/examples/dataflow-python-examples" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">谷歌云平台/专业服务</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">这个报告包含了数据流python API的几个例子。这些示例是我们看到的常见用例的解决方案…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jz mw"/></div></div></a></div></div></div>    
</body>
</html>