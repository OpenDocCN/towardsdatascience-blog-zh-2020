<html>
<head>
<title>The Zen of Python: A guide to Python’s design principles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 的禅:Python 设计原则指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-zen-of-python-a-guide-to-pythons-design-principles-93f3f76d088a?source=collection_archive---------11-----------------------#2020-06-03">https://towardsdatascience.com/the-zen-of-python-a-guide-to-pythons-design-principles-93f3f76d088a?source=collection_archive---------11-----------------------#2020-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9a24" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">写出干净漂亮的代码！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9b587d46968fecfa11506b18b302fb78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0H6-tUbW6grMlezlb52yw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用 Python 写干净的代码</p></figure><p id="c0bf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一位 Python 爱好者曾经写过 20 句格言，说明如何用 Python 编写漂亮而干净的代码。这些格言被称为“Python 的禅宗”,在 Python 开发人员中引起了轰动。蒂姆·彼得斯为 Python 的设计写下了这些 BDFL(仁慈的终身独裁者，Python 创始人吉多·范·罗苏姆的昵称)的 20 条指导原则，但最后一句警句留给了范罗森。</p><p id="e4e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">直到今天，共有 19 句格言，罗森说最后一句格言是“一些奇怪的蒂姆·彼得斯在开玩笑。”但是，这些格言是什么意思呢？。让我们开始吧！</p><p id="1e32" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">Python 之禅</strong></p><blockquote class="lr ls lt"><p id="2fce" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">漂亮总比难看好。<br/>明的比暗的好。<br/>简单胜于复杂。<br/>复杂总比复杂好。<br/>扁平比嵌套好。<br/>稀不如密。可读性很重要。特例不足以特殊到打破规则。<br/>虽然实用性战胜了纯粹性。错误永远不会无声无息地过去。<br/>除非明确消音。<br/>面对暧昧，拒绝猜测的诱惑。应该有一种——最好只有一种——显而易见的方法来做这件事。虽然这种方式一开始可能并不明显，除非你是荷兰人。<br/>现在总比没有好。<br/>虽然永远也不会比现在*好。如果实现很难解释，这是个坏主意。<br/>如果实现容易解释，可能是个好主意。名称空间是一个非常棒的想法——让我们多做一些吧！</p></blockquote><p id="d486" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以通过键入以下命令在 Python IDE 中打开“复活节彩蛋”:</p><blockquote class="lr ls lt"><p id="2613" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated"><strong class="kx ir">进口这个</strong></p></blockquote><p id="5732" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">漂亮总比难看好</strong></p><p id="e402" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作为一名开发人员，编写代码并使其运行并不是唯一要做的工作。Python 以可读性和简单性著称。那么，为什么要篡改呢？编写干净易读的代码是一门艺术，它受到其他程序员的欣赏，并让他们理解每一点。</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="fa89" class="md me iq lz b gy mf mg l mh mi">def collatz(num):<br/>    if num%2 == 0:<br/>        return num//2<br/>    else:<br/>        return 3 * num + 1<br/><br/>number = input("Enter a number: ")<br/>while number != 1:<br/>    number = collatz(int(number))<br/>    print(number)</span></pre><p id="7433" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的代码中，不需要添加“else”。在这一点上感觉没有必要。另外，为了使它更好、更干净，你可以这样做:</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="1baf" class="md me iq lz b gy mf mg l mh mi">def collatz(num):<br/>    if num%2 == 0:<br/>        return num//2<br/>    <br/>    return 3 * num + 1</span></pre><p id="ac0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">显性比隐性好</strong></p><p id="df81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这句格言不言自明。这意味着最好使代码更加详细和明确。这样做将使代码可读。隐藏代码功能可能会产生影响，因为其他程序可能无法理解代码。</p><p id="dd5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">简单比复杂好</p><p id="29e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你可以构建一个简单的代码时，为什么要构建一个复杂的代码呢？</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="3504" class="md me iq lz b gy mf mg l mh mi">def recursion_reverse(s):<br/>    if(len(s)==1):<br/>        return s<br/>    else:<br/>        return recursion_reverse(s[1:]) + s[0]<br/><br/>original_string = "ABC"<br/>print("Reversed String : ", recursion_reverse(original_string))</span></pre><p id="4d99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您也可以只用两行代码来完成。</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="0b49" class="md me iq lz b gy mf mg l mh mi">my_string = “ABCD”<br/>reversed_string = my_string[::-1]</span></pre><p id="b67a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">复杂比复杂好</strong></p><p id="f45c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上面的格言说简单比复杂好。现在这个说“复杂比复杂好”。越来越混乱了！一个复杂的问题可能需要复杂的技术来解决，但它不应该是复杂的。</p><p id="87c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">代码的复杂性让其他程序员感到困惑。即使程序很复杂，也要尽量保持简单的一面，易于阅读和理解。复杂的代码会耗费精力和时间！而且，程序员不能浪费时间。</p><p id="8a22" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">扁平比嵌套好</strong></p><p id="cbab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">编码人员喜欢为每个功能创建子模块。比方说，我构建了一个名为“垃圾邮件”的模块，添加了子模块“foo ”,并在其中添加了“baz”。</p><p id="041f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，从 baz 访问另一个子包将类似于:</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="e9bb" class="md me iq lz b gy mf mg l mh mi">from spam.foo.baz import eggs</span></pre><p id="c749" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">嵌套和等级制度不是增加组织而是官僚主义！</p><p id="74d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">稀疏胜于密集</strong></p><p id="add4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有时，我们倾向于只用一行代码做所有的事情。您可能会得到正确的输出。但是，可读性呢？有人不用偷看很久就能看懂吗？</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="b527" class="md me iq lz b gy mf mg l mh mi">print('\n'.join("%i bytes = %i bits which has %i possible values." % (j, j * 8, 256 ** j - 1) for j in<br/>                (1 &lt;&lt; i for i in range(8))))</span></pre><p id="9b22" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">同样的东西可能被分成几部分，也可能被写成得到同样的结果。散布代码是一件令人愉快的事情，而密集的代码会激怒同事。</p><p id="7a31" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">可读性计数</strong></p><p id="1e9e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每次你被代码卡住的时候，你会去 StackOverflow 吗？那么，你看什么代码呢？可读的还是复杂的！</p><p id="0e7a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">据说代码读的比写的多。所以，为了读者的缘故，请开始编写可读的代码，因为它受到我们的程序员同事的喜爱。</p><p id="c1a2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">特例不足以违反规则</strong></p><p id="89c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">程序员必须坚持良好的“编程实践”。比方说，您导入了一个库，但是它不符合良好的编程实践。它必须帮助你完成任务，但请记住，库和语言应该总是遵循最佳的“编程实践”，并以其一致性而闻名。</p><p id="e1bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">虽然实用性战胜了纯粹性</strong></p><p id="4558" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与上面的“特例并不特殊到足以打破规则”的格言相反，这一条表明给定的规则集可能有一个例外。这里的关键词是“可能”。</p><p id="30d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">错误永远不会无声无息地过去</strong></p><p id="0c46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当一个函数返回 None 时，就是你陷入无声错误陷阱的时候。最好是得到错误，而不是无声的错误。如果您避免这样的错误，它可能会导致错误，并进一步导致崩溃。</p><p id="8876" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是为什么在代码中使用<em class="lu">“try-except”</em>语句变得很重要。无论你认为哪里有可疑的事情发生，你都必须添加这个组合，并了解这些无声的错误。</p><p id="df96" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">除非明确静音</strong></p><p id="71c9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有时您想忽略代码中的错误，最佳做法是显式地消除错误。</p><p id="a60e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">面对暧昧，拒绝猜测的诱惑</strong></p><p id="0e13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">计算机做我们想让它们做的事情。尽管如此，这些机器让我们变得迷信。计算机代码行为不正常总是有原因的。只有你的逻辑才能解决它。因此，打破猜测和盲目尝试解决方案的诱惑，直到代码工作。</p><p id="2937" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">应该有一种——最好只有一种——显而易见的方法来做这件事</strong></p><p id="805d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在 Perl 编程中，有一种说法是这样的——“有不止一种方法可以做到这一点！”用三四码做同样的事情，就好比有了双刃剑。不仅要花时间去写，而且每个人都必须能够毫无问题地阅读你的 3-4 种方法。这种实践中的灵活性不值得庆祝。</p><p id="3c74" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">尽管这种方式一开始可能并不明显，除非你是荷兰人</strong></p><p id="0b4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关于 Python 的创造者吉多·范·罗苏姆，这句格言说，除非你是代码的创造者，否则语言规则不容易学习或记忆。一个关于 BDFL 的笑话！</p><p id="d19c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">现在总比没有好</strong></p><p id="331f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个小格言说，陷入无限循环或永无止境循环的代码比没有陷入无限循环或永无止境循环的代码更糟糕。</p><p id="7613" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">虽然永远也不会比现在更好</strong></p><p id="654c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">等待一个程序结束比提前终止它并得到不正确的结果要好。这句格言和上面那句“现在总比没有好”既相似又矛盾。</p><p id="3964" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">如果实现很难解释，这是个坏主意</strong></p><p id="95ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你正在向某人解释你的代码，而向你的熟人或同事解释变得很困难，那么你的代码有问题。绝对不简单，很复杂！</p><p id="6bd4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">如果实现很容易解释，这可能是个好主意</strong></p><p id="12e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与上面的格言正好相反，这句格言只是说一个简单的，可读的代码很容易解释。如果你能够做到，你就在正确的轨道上。</p><p id="48cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">名称空间是一个非常棒的想法——让我们多做一些吧！</strong></p><p id="d6c6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在 Python 中，名称空间基本上是一个系统，每个对象都有一个唯一的名称。这是访问每一个底层对象的好方法。</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="bfdb" class="md me iq lz b gy mf mg l mh mi">a = 2<br/>print('id(a) =', id(a))<br/><br/>a = a+1<br/>print('id(a) =', id(a))<br/><br/>print('id(3) =', id(3))</span></pre><p id="5853" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它输出:</p><pre class="kg kh ki kj gt ly lz ma mb aw mc bi"><span id="45b9" class="md me iq lz b gy mf mg l mh mi">id(a) = 9302208<br/>id(a) = 9302240<br/>id(3) = 9302240</span></pre><p id="0f5a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Python 组织变量的方式令人难以置信。这就是名称空间很酷的原因！</p><p id="d0b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">结论</strong></p><p id="c4d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Python 太神奇了！这就是为什么数百万开发人员使用它，用它编码，用它分析数据，用它建立模型。为它制定的指导方针只是激励程序员编写简单、易读、干净的代码。下次你坐着编码时，试着遵循这些指导方针。</p><h2 id="cdc1" class="md me iq bd mj mk ml dn mm mn mo dp mp le mq mr ms li mt mu mv lm mw mx my mz bi translated"><strong class="ak">参考文献</strong></h2><ol class=""><li id="555e" class="na nb iq kx b ky nc lb nd le ne li nf lm ng lq nh ni nj nk bi translated"><a class="ae nl" href="https://www.python.org/dev/peps/pep-0020/" rel="noopener ugc nofollow" target="_blank">PEP 20—Python 的禅</a></li></ol><p id="8b8a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">编码快乐！</p></div></div>    
</body>
</html>