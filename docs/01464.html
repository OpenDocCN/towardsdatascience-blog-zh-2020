<html>
<head>
<title>Store Hyperledger Fabric certificates and keys in CouchDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 CouchDB 中存储 Hyperledger 结构证书和密钥</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/store-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0?source=collection_archive---------20-----------------------#2020-02-09">https://towardsdatascience.com/store-hyperledger-fabric-certificates-and-keys-in-couchdb-43c8f91a61b0?source=collection_archive---------20-----------------------#2020-02-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="efe2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Hyperledger Fabric 是关于权限的。这些权限以证书和密钥的形式提供。从广义上讲，它被称为身份。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4477d41b372b639770bc461d1d1d1c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZdTGytr_RFhr5gga.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mr_williams_photography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">迈卡·威廉姆斯</a>在<a class="ae ky" href="https://unsplash.com/s/photos/safe?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="74b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当应用程序与 Hyperledger Fabric 网络交互时，它使用此身份来验证自己。结构网络验证身份并授权应用程序进行交互。</p><p id="662c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，身份是非常重要的，如果你不妥善保存，那么它可能会变成一个令人头痛的问题。😩</p><blockquote class="lv"><p id="308f" class="lw lx it bd ly lz ma mb mc md me lu dk translated"><em class="mf">最初发布于</em><a class="ae ky" href="https://schadokar.dev/posts/store-hyperledger-fabric-certificates-and-keys-in-couchdb/" rel="noopener ugc nofollow" target="_blank"><em class="mf">https://schadokar . dev</em></a></p></blockquote><h1 id="fb11" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">我可以在哪里存储身份？💼</h1><p id="b125" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">在 Hyperledger 结构中，这种存储被称为<a class="ae ky" href="https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="nd">钱包</em> </strong> </a>。</p><p id="2e7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钱包有三种类型:</p><h2 id="220e" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated"><em class="mf">文件系统</em></h2><p id="8e78" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">这是一个简单的文件夹。本地存储钱包。对于钱包来说，这是一个不错的默认选择。在<code class="fe nq nr ns nt b">fabric-samples/balance-transfer</code>中，<code class="fe nq nr ns nt b">file system</code>是默认的钱包。当你运行<code class="fe nq nr ns nt b">balance-transfer</code>时，它会创建一个<code class="fe nq nr ns nt b">fabric-client-kv-orgName</code>文件夹并保存所有的身份。这个配置是在<code class="fe nq nr ns nt b">orgname.yaml</code>的<a class="ae ky" href="https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer/artifacts/org1.yaml" rel="noopener ugc nofollow" target="_blank">链接</a>中定义的。</p><h2 id="aa67" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">内存中</h2><p id="86f3" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">应用存储中的钱包。当您的应用程序在不能访问文件系统的受限环境中运行时，请使用这种类型的 wallet 通常是网络浏览器。值得记住的是，这种类型的钱包是不稳定的；应用程序正常结束或崩溃后，身份将会丢失。— <a class="ae ky" href="https://hyperledger-fabric.readthedocs.io/en/latest/developapps/wallet.html#types" rel="noopener ugc nofollow" target="_blank">文档</a></p><h2 id="2111" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">CouchDB</h2><p id="8692" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">用 couchdb 当钱包。此选项最适合生产。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="da10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本教程中，我们将把<code class="fe nq nr ns nt b">CouchDB</code>配置为钱包。👨🏻‍💻</p><blockquote class="ob oc od"><p id="0ed3" class="kz la nd lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated">为了演示，我使用了<code class="fe nq nr ns nt b">Fabric Node SDK</code>和<code class="fe nq nr ns nt b">fabric/samples/balance-transfer</code>。</p></blockquote><p id="e5a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">钱包使用 2 个存储来保存证书和密钥:</p><h2 id="c611" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">1.州商店:</h2><p id="a22e" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">状态存储用于存储注册身份的证书。它存储了身份的基本信息:</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="f9cf" class="ne mh it nt b gy ol om l on oo">{<br/>  "name": "test",<br/>  "mspid": "org1",<br/>  "roles": null,<br/>  "affiliation": "",<br/>  "enrollmentSecret": "&lt;ENROLLMENT_SECRET&gt;",<br/>  "enrollment": {<br/>    "signingIdentity": "&lt;PRIVATE_KEY_NAME&gt;",<br/>    "identity": {<br/>      "certificate": "&lt;SIGN_CERT&gt;"<br/>    }<br/>  }<br/>}</span></pre><blockquote class="ob oc od"><p id="ae93" class="kz la nd lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated"><em class="it"> ❗️ </em>注意:签名标识是存储在加密存储中的私钥和公钥的指针或地址。</p></blockquote><h2 id="a2d9" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">2.加密存储:</h2><p id="4166" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">加密存储用于存储身份的公钥和私钥。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="c3b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将 couchdb 配置为 wallet:</p><h2 id="b1b4" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">第一步</h2><p id="6f97" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">导入由<code class="fe nq nr ns nt b">Node SDK</code>提供的<code class="fe nq nr ns nt b">CouchDBKeyValueStore</code>库。</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="c8ea" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">const CDBKVS = require("fabric-client/lib/impl/CouchDBKeyValueStore.js");</strong></span></pre><blockquote class="ob oc od"><p id="348b" class="kz la nd lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated">请务必阅读《T4 》,它值得一读。</p></blockquote><h2 id="fcf5" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">第二步</h2><p id="d16d" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">设置<code class="fe nq nr ns nt b">state store</code>。</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="705a" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">let stateStore = await new CDBKVS({<br/>  url: "https://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;URL&gt;",<br/>  name: "&lt;DB_NAME&gt;"<br/>});<br/><br/>const Client = require("fabric-client");<br/><br/>const client = Client.loadFromConfig("path of network.yaml");<br/><br/>client.setStateStore(stateStore);</strong></span></pre><ul class=""><li id="c1a3" class="op oq it lb b lc ld lf lg li or lm os lq ot lu ou ov ow ox bi translated"><code class="fe nq nr ns nt b">&lt;USERNAME&gt;</code>是 couchdb 的用户名。</li><li id="ad0f" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><code class="fe nq nr ns nt b">&lt;PASSWORD&gt;</code>是 couchdb 的密码。</li><li id="5b74" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><code class="fe nq nr ns nt b">&lt;URL&gt;</code>是 couchdb 的 URL。</li><li id="0209" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><code class="fe nq nr ns nt b">&lt;DB_NAME&gt;</code>(可选)是用作状态存储的数据库名。默认的 dbname 是<code class="fe nq nr ns nt b">userdb</code>。如果数据库不存在，它会创建它。</li></ul><blockquote class="ob oc od"><p id="b9fa" class="kz la nd lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated"><a class="ae ky" href="https://hyperledger.github.io/fabric-sdk-node/release-1.4/Client.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">客户端</strong> </a> <strong class="lb iu">是用户和光纤网络之间的接口。</strong></p></blockquote><h2 id="4c78" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">第三步</h2><p id="8db5" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">设置<code class="fe nq nr ns nt b">crypto store</code>。</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="7d31" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">const cryptoSuite = Client.newCryptoSuite();<br/><br/>let cryptoKS = Client.newCryptoKeyStore(CDBKVS, {<br/>  url: "https://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;URL&gt;",<br/>  name: "&lt;DB_NAME&gt;"<br/>});<br/><br/>cryptoSuite.setCryptoKeyStore(cryptoKS);<br/><br/>client.setCryptoSuite(cryptoSuite);</strong></span></pre><p id="1453" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您必须根据上述步骤更新客户端，使其使用 couchdb。<br/>在下一节中，我们将在<code class="fe nq nr ns nt b">balance-transfer</code> fabric 示例中实现上述步骤。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="3df5" class="mg mh it bd mi mj pd ml mm mn pe mp mq jz pf ka ms kc pg kd mu kf ph kg mw mx bi translated">CouchDB 在平衡传递中的实现</h1><p id="a05f" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我使用<a class="ae ky" href="https://github.com/hyperledger/fabric-samples/blob/release-1.4/balance-transfer" rel="noopener ugc nofollow" target="_blank">平衡转移</a>织物样品作为参考。</p><blockquote class="lv"><p id="fd5d" class="lw lx it bd ly lz ma mb mc md me lu dk translated">我假设你知道如何进行余额转移。</p></blockquote><h2 id="10fe" class="ne mh it bd mi nf pi dn mm nh pj dp mq li pk nk ms lm pl nm mu lq pm no mw np bi translated">启动余额转移网络</h2><p id="6987" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">按照余额转移说明启动网络。</p><p id="3d3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将通过以下方式启动网络:</p><ul class=""><li id="630f" class="op oq it lb b lc ld lf lg li or lm os lq ot lu ou ov ow ox bi translated">2 CAs</li><li id="d733" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">单独订购者</li><li id="b469" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">4 个同行(每个组织 2 个同行)</li></ul><h2 id="73d3" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">为钱包启动 couchdb</h2><p id="637a" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">如果您使用基于云的 couchdb，这一步是可选的。</p><p id="7885" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">基于 Docker 的 Couchdb </strong></p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="d35b" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">docker run --name couch-userdb -e COUCHDB_USER=admin -e COUCHDB_PASSWORD=password -p 5984:5984 -d couchdb</strong></span></pre><p id="bb43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果不存在，上述命令将从 docker hub 中提取<code class="fe nq nr ns nt b">couchdb</code>的 docker 图像。</p><p id="1ad9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> CouchDB 详细信息:</strong></p><ul class=""><li id="996a" class="op oq it lb b lc ld lf lg li or lm os lq ot lu ou ov ow ox bi translated">容器名称:<code class="fe nq nr ns nt b">couch-userdb</code></li><li id="033e" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">CouchDB 用户名:<code class="fe nq nr ns nt b">admin</code></li><li id="2a79" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">CouchDB 密码:<code class="fe nq nr ns nt b">password</code></li><li id="9456" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">网址:<code class="fe nq nr ns nt b">localhost:5984</code></li></ul><p id="7b3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">CouchDB 连接 URL 是</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="e43a" class="ne mh it nt b gy ol om l on oo">https://&lt;USERNAME&gt;:&lt;PASSWORD&gt;@&lt;URL&gt; </span><span id="d4a9" class="ne mh it nt b gy pn om l on oo"><a class="ae ky" href="https://admin:password@localhost:5984" rel="noopener ugc nofollow" target="_blank"><strong class="nt iu">https://admin:password@localhost:5984</strong></a></span></pre><h2 id="ca09" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">在余额转移中更新客户</h2><p id="d871" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">打开<code class="fe nq nr ns nt b">app/helper.js</code>，更新<code class="fe nq nr ns nt b">getClientForOrg</code>。</p><p id="565d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下面的代码中，我们只是用上面的 couchdb 配置步骤替换了<code class="fe nq nr ns nt b">await client.initCredentialStores();</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="po pp l"/></div></figure><p id="3d7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们所做的改变，</p><ul class=""><li id="04a0" class="op oq it lb b lc ld lf lg li or lm os lq ot lu ou ov ow ox bi translated"><strong class="lb iu"> <em class="nd">第 13 行:</em> </strong>导入<code class="fe nq nr ns nt b">CouchDBKeyValueStore</code>。从上面开始。</li><li id="0fce" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><strong class="lb iu"> <em class="nd">第 31–52 行:</em> </strong>设置状态存储和加密存储。第二步&amp; 3。</li></ul><p id="c720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码有一个小的变化。</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="9e4f" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">// Client variable is used as hfc<br/>var hfc = require("fabric-client");<br/><br/>// Instead of Client<br/>const Client = require("fabric-client");</strong></span></pre><blockquote class="ob oc od"><p id="240b" class="kz la nd lb b lc ld ju le lf lg jx lh oe lj lk ll of ln lo lp og lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it">状态存储和加密存储的 db(dbname)不必相同。两家商店都可以有各自独立的数据库。这取决于要求。您可以将状态存储和加密存储 db 分别命名为</em> </strong> <code class="fe nq nr ns nt b"><strong class="lb iu"><em class="it">orgName-state-store</em></strong></code> <strong class="lb iu"> <em class="it">和</em> </strong> <code class="fe nq nr ns nt b"><strong class="lb iu"><em class="it">orgName-crypto-store</em></strong></code> <strong class="lb iu"> <em class="it">。</em> </strong> <strong class="lb iu"> <em class="it">每个组织必须有自己的状态存储和加密存储 db，否则会抛出认证错误。</em>T45】</strong></p></blockquote><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="6df9" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">Error: fabric-ca request register failed with errors [[{"code":20,"message":"Authentication failure"}]]</strong></span></pre><h2 id="a95f" class="ne mh it bd mi nf ng dn mm nh ni dp mq li nj nk ms lm nl nm mu lq nn no mw np bi translated">在余额转移中注册新用户</h2><p id="ce46" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">一旦注册了用户，就可以使用 couchdb apis 检查状态存储和加密存储。</p><p id="0187" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">例如:注册一个用户</strong></p><p id="cb80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用下面的参数来注册一个用户。对于<code class="fe nq nr ns nt b">org1</code>，我对<code class="fe nq nr ns nt b">state-store</code>和<code class="fe nq nr ns nt b">crypto-store</code>使用了相同的 db <code class="fe nq nr ns nt b">org1db</code>。</p><ul class=""><li id="d06f" class="op oq it lb b lc ld lf lg li or lm os lq ot lu ou ov ow ox bi translated">名称:<code class="fe nq nr ns nt b">alice</code></li><li id="b7a5" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">组织:<code class="fe nq nr ns nt b">org1</code></li><li id="e414" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">数据库名:<code class="fe nq nr ns nt b">org1db</code></li><li id="d207" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated">CouchDB URL: <code class="fe nq nr ns nt b"><a class="ae ky" href="http://admin:password@localhost:5369" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">http://admin:password@localhost:5369</strong></a></code></li></ul><p id="4697" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">打开浏览器，转到<code class="fe nq nr ns nt b"><strong class="lb iu">http://localhost:5369/org1db/_all_docs</strong></code>。返回保存在<code class="fe nq nr ns nt b">org1db</code>中的所有文档。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/7ab56145708525017bb7e2e7e71ad5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1WmjLJF237N7ViUr.PNG"/></div></div></figure><p id="2c50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">指标<code class="fe nq nr ns nt b">0, 1, 2</code>是<code class="fe nq nr ns nt b">admin</code>的证书。</p><p id="0675" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">索引<code class="fe nq nr ns nt b">3</code>是存储在<code class="fe nq nr ns nt b">state-store</code>中的<code class="fe nq nr ns nt b">alice</code>证书。<br/>索引<code class="fe nq nr ns nt b">4-5</code>是<code class="fe nq nr ns nt b">crypto-store</code>中存储的<code class="fe nq nr ns nt b">alice</code>的公钥和私钥。</p><p id="d8ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">转到<code class="fe nq nr ns nt b">http://localhost:5369/org1db/alice</code>。它返回存储在状态存储中的<code class="fe nq nr ns nt b">alice</code>的所有细节。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/63abb6d546b4c2d1f33198bc8185d995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TFfSeIs47L4N-ug2.PNG"/></div></div></figure><p id="8de6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查<code class="fe nq nr ns nt b">signingIdentity</code>。</p><pre class="kj kk kl km gt oh nt oi oj aw ok bi"><span id="03b0" class="ne mh it nt b gy ol om l on oo"><strong class="nt iu">"signingIdentity":"d37a97a8c2377c21537801ec1a929d81905ae57963a2f6c8ba0308931a7fc791"</strong></span></pre><p id="8710" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，检查上图中索引<code class="fe nq nr ns nt b">4 &amp; 5</code>的 id。两者是一样的。</p><p id="ba5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您还记得，<code class="fe nq nr ns nt b">signingIdentity</code>字段是存储在加密存储中的身份的私钥和公钥的引用。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="996d" class="mg mh it bd mi mj pd ml mm mn pe mp mq jz pf ka ms kc pg kd mu kf ph kg mw mx bi translated">结论</h1><p id="a7a7" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">CouchDB wallet 是生产用例的绝佳选择。您可以尝试使用其他数据库，但是在这种情况下，您必须像<code class="fe nq nr ns nt b">CouchDBKeyValueStore.js</code>一样编写相应的库。</p><p id="4d41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我觉得有用的参考资料。如果您发现任何您认为可以添加到此处的资源，请不要羞于分享。😉</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="258b" class="mg mh it bd mi mj pd ml mm mn pe mp mq jz pf ka ms kc pg kd mu kf ph kg mw mx bi translated">参考📌</h1><ul class=""><li id="c2da" class="op oq it lb b lc my lf mz li ps lm pt lq pu lu ou ov ow ox bi translated"><a class="ae ky" href="https://developer.ibm.com/tutorials/store-fabric-certificates-keys-ibm-cloudant-fabric-node-sdk/" rel="noopener ugc nofollow" target="_blank">https://developer . IBM . com/tutorials/store-fabric-certificates-keys-IBM-cloud ant-fabric-node-SDK/</a></li><li id="0785" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/53639061/hyperledger-fabric-what-is-the-difference-between-state-store-and-crypto-store" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/53639061/hyperledger-fabric-state-store 和 crypto-store 之间的区别是什么</a></li><li id="0bb9" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/54305378/hyperledger-fabric-client-credential-store-using-couchdb" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/54305378/hyperledger-fabric-client-credential-store-using-couch db</a></li><li id="e041" class="op oq it lb b lc oy lf oz li pa lm pb lq pc lu ou ov ow ox bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/58371858/hyperledger-fabric-client-credential-store-using-couchdbcouchdbkeyvaluestore" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/58371858/hyperledger-fabric-client-credential-store-using-couchdbcouchdbkeyvaluestore</a></li></ul></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="026e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nd">原载于</em><a class="ae ky" href="https://schadokar.dev/posts/couchdb-keyvalue-store-hlf/" rel="noopener ugc nofollow" target="_blank"><em class="nd">https://schadokar . dev</em></a><em class="nd">。</em></p></div></div>    
</body>
</html>