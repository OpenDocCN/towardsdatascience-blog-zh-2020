<html>
<head>
<title>Building End-to-End Customer Segmentation Solution with Alibaba Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用阿里云构建端到端客户细分解决方案</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-end-to-end-customer-segmentation-solution-with-alibaba-cloud-db326e90c2fb?source=collection_archive---------31-----------------------#2020-08-30">https://towardsdatascience.com/building-end-to-end-customer-segmentation-solution-with-alibaba-cloud-db326e90c2fb?source=collection_archive---------31-----------------------#2020-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/4985e6f8477008401a8d273fd2d62ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Fm2syJ4PSKyqTsfn"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">莎伦·麦卡琴在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="c836" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想象一下，我们有一个销售各种产品的零售店。为了在您的业务中取得更大的成功，我们必须充分了解我们的客户。尤其是在当今竞争激烈的世界。这样我们就可以回答:</p><p id="2717" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-谁是我们最好的客户？</p><p id="1496" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-谁是我们的潜在客户？</p><p id="dbdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-哪些客户需要成为目标并保留下来？</p><p id="cf75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-我们客户的特点是什么？</p><p id="1c8c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">了解我们客户的一种方法是进行客户细分。细分是根据共同特征将客户分成几组的过程。我们可以使用许多变量来细分我们的客户。客户人口统计、地理、心理、技术和行为等信息通常被用作区分客户的区分因素。</p><p id="fc94" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过在业务中实现客户细分，我们将能够个性化您的战略，以适应每个细分市场的特点。从而可以最大限度地保留客户，改善客户体验，获得更好的广告效果，并最大限度地降低营销成本。</p><p id="4a9c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么，如何才能做到这种客户细分呢？</p><p id="204f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将应用无监督的机器学习技术对零售数据集进行客户细分。我们将使用新近性、频率和货币(RFM)作为客户交易行为的有用指标。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi le"><img src="../Images/78a36037495d54142f0c5c24706ba78e.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*gEtOK4u8mPpbnwL7zLSkpQ.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">新近性、频率和货币定义。Bima 提供的图片</p></figure><p id="ce43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将利用以下产品来构建此使用案例。</p><p id="6784" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-<strong class="ki iu"/>对象存储服务(OSS)。OSS 是一种加密、安全、经济且易于使用的对象存储服务，使您能够在云中存储、备份和归档大量数据，并保证耐用性。</p><p id="4c20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">- <strong class="ki iu"> MaxCompute </strong>(之前称为 ODPS)是一个通用的、完全托管的多租户数据处理平台，用于大规模数据仓库。MaxCompute 支持各种数据导入解决方案和分布式计算模型，使用户能够有效查询海量数据集，降低生产成本，保障数据安全。</p><p id="7ed9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">- <strong class="ki iu"> DataWorks </strong>是阿里云推出的大数据平台产品。它提供一站式大数据开发、数据权限管理、离线作业调度等功能。此外，它还提供全方位的服务，包括数据集成、DataStudio、数据地图、数据质量和 DataService Studio。</p><p id="ac39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">- <strong class="ki iu">面向 AI 的机器学习平台</strong> (PAI)提供端到端的机器学习服务，包括数据处理、特征工程、模型训练、模型预测和模型评估。人工智能的机器学习平台结合了所有这些服务，使人工智能比以往任何时候都更容易获得。</p><p id="e3a4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">- <strong class="ki iu"> Data Lake Analytics </strong>是一种利用无服务器架构的交互式分析服务。DLA 使用 SQL 接口与用户服务客户端交互，这意味着它符合标准的 SQL 语法，并提供各种类似的功能。DLA 允许您从多个数据源或位置(如 OSS 和 Table Store)检索和分析数据，以优化数据处理、分析和可视化，从而提供更好的见解并最终指导更好的决策。</p><p id="76db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将首先准备数据，然后进行模型训练，接着创建一个为模型服务的管道。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/c61203a6266a18c1c89c72ef447da479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*FkvryTZiOv7_sSUHp2CmDA.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">端到端流程。图片由 Bima 提供</p></figure><h1 id="963b" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">数据准备</h1><p id="5364" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">首先，让我们了解一下我们的数据。我们使用来自 UCI 机器学习知识库的在线零售数据(你可以从这个<a class="ae kf" href="https://archive.ics.uci.edu/ml/datasets/Online+Retail+II" rel="noopener ugc nofollow" target="_blank">链接</a>下载这些数据)。该数据集由 2010 年和 2011 年的交易数据组成。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mn"><img src="../Images/182821487cce097be0f12ac4ed917387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QJMAAzDb2csk_419vnLD0A.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">数据集概述。图片由 Bima 提供</p></figure><h2 id="f961" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">第一步数据收集</h2><p id="633b" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我们将使用 2010 年的数据进行模型训练，并将该文件重命名为 transaction_train.csv。然后，作为需要处理的日常数据示例的数据是 2011 年，我们将其重命名为 transaction_daily.csv。我们需要将该数据集存储到阿里巴巴对象存储服务(OSS)中。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/62e8639fec795ca8511e18346c9f1acc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*77hupcCw554Uz5M5"/></div></div></figure><h2 id="81da" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">第二步数据摄取</h2><p id="b3bb" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">然后，我们使用 MaxCompute 和 Data Works 来编排流程。该步骤旨在使用 Data Works 将 OSS 中的数据导入 MaxCompute。</p><p id="e9d7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要创建一个表来存储 MaxCompute 中的数据。这个表应该与我们的数据集模式相匹配。我们可以通过右键单击业务流并选择 Create Table 来实现。然后，我们可以使用 DDL 语句创建模式，并遵循这个过程。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/7458cde22bc46820c2320e42e457c95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-zFL2k-WGFzzvIg0"/></div></div></figure><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/a0ce6dd7c16f562b4f93f4c14f651601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_sip5AtILSsXKjaC"/></div></div></figure><p id="f2f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经准备好桌子了。我们需要创建一个数据集成节点，将我们的数据从 OSS 同步到 MaxCompute。在这个节点中，我们需要设置源和目标，然后映射每个列。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/b1355ec889d12aa9717ca65cd938238e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hGz5ksInS19yf1gP"/></div></div></figure><p id="f3fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以运行该组件将数据从 OSS 接收到 MaxCompute，并将我们的数据放在适当的位置。</p><h2 id="bb8b" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">步骤 3 数据清理和转换</h2><p id="9474" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我们的数据需要在用于模型训练之前进行清理和转换。首先，我们将清除数据中的无效值。然后，我们通过计算每个客户的近期、频率和货币价值来转换数据。</p><p id="a570" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 DataWorks 中，我们将使用一个 SQL 节点来执行此任务。我们可以首先创建一个新表来存储结果，然后创建节点并编写一个 DML 查询来完成任务。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/b27dc7f0ae2809de53f9d5f4727c2c87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2zJuHkItO5t3hCv_"/></div></div></figure><p id="9661" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这项任务的结果是，我们将获得每个客户的 RFM 值。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/63f7ffa2b4ecba81820fa300ddcc0610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YA8gaTIo_doqUQQ2"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">从原始数据到 RFM 要素的数据转换。图片由 Bima 提供</p></figure><p id="2488" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将在模型训练和模型服务过程中使用这个数据准备步骤。在模型训练中，我们只做一次，直到有了模型。但是，这种数据准备将在模型服务管道中每天批处理运行。</p><h1 id="a3ed" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">模特培训</h1><p id="edc3" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我们将使用 K-Means 无监督机器学习算法。K-means 聚类是应用最广泛的聚类算法，它将 n 个对象划分为 k 个簇，以保持每个簇内的高相似性。相似性是基于聚类中对象的平均值来计算的。</p><p id="15a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该算法随机选择 k 个对象，每个对象最初代表一个聚类的平均值或中心。然后，该算法根据剩余对象与每个聚类中心的距离将它们分配到最近的聚类中，并重新计算每个聚类的平均值。这个过程重复进行，直到标准函数收敛。</p><p id="6b06" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">K-means 聚类算法假设我们从空间向量中获取对象属性，其目标是确保每个组内的均方误差和最小。</p><p id="c65b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这一步中，我们将使用 PAI studio 创建一个实验，并使用数据科学研讨会(DSW)进行优化。派工作室和 DSW 是阿里巴巴人工智能机器学习平台的一部分。</p><p id="bd19" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 PAI 工作室中创建一个实验相对简单。PAI Studio 已经有几个功能作为组件，我们可以将它们拖放到实验窗格中。然后我们只需要连接每个组件。下图显示了我们将构建的制作模型的实验。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/f518d945c0878d1dda39915a15e6d5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-hFaC5x1PKJ8jUsCEe_5Og.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">模型训练步骤。图片由 Bima 提供</p></figure><h2 id="d87c" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">第一步数据探索</h2><p id="c8bd" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">在这一步，我们的目标是理解数据。我们将通过生成描述性统计数据、创建直方图和创建散点图来研究我们的数据，以检查变量之间的相关性。我们可以在读取数据后创建一个组件来完成这些任务。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/caeb9710071b459c36b6af592120d7c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8x-S1_Lg3X44EyPY"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">数据探索结果。图片由 Bima 提供</p></figure><p id="b6b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们知道我们的频率和货币数据有偏差。因此，我们需要在创建模型之前进行特征工程。</p><h2 id="e2b9" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">特征工程</h2><p id="7722" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我们将进行日志转换来处理数据中的偏差。在使用它进行建模之前，我们还需要对值进行标准化。因为 K-意味着用距离作为度量，我们需要我们的每个参数都在同一个尺度上。为此，我们需要创建一个特性转换组件和标准化组件。</p><p id="9958" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在这个节点下，我们应该将标准化的参数保存到一个表中，这样我们就可以在部署过程中使用它。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/1a8c75c979aa7f6cb1f6a057bce29223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PulTm1TrQeq2pEqa"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">特征转换数据之旅。图片由 Bima 提供</p></figure><h2 id="1f96" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">步骤 3 模型创建</h2><p id="9cbf" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在是时候创建我们的模型了。我们将使用 K-Means 来发现客户群。为此，我们需要输入集群的数量作为我们的模型超参数。</p><p id="9851" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了找到最佳聚类数，我们需要使用 Data Science Workbench 使用不同数量的聚类迭代建模，并通过生成肘图来找到最佳值。最佳聚类数是平方和误差开始变平的地方。</p><p id="85e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">DSW 是一个类似木星笔记本的环境。这里我们需要通过编写 python 脚本来创建一个实验，并生成肘图。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/20f351d3777e5c24983e1534a7d9bf08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/0*OBCzpiJThedS37f8"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">找出最佳聚类的肘形图。图片由 Bima 提供</p></figure><p id="30b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果，我们发现我们的最佳集群是五个。然后，我们使用它作为 PAI studio 中 K-Means 组件的超参数，并运行该组件。</p><p id="c23c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个组件的结果，我们对每个客户都有一个 cluster_index。我们还可以将结果可视化为散点图的形式，散点图已经用 cluster_index 进行了着色。该组件还生成一个稍后将被提供的模型。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/0839b4f84e91703eb2f1ace9fbef1adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*phlAywI9sGJ95PyR"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">分割结果。图片由 Bima 提供</p></figure><h2 id="a5ce" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">步骤 4 保存聚类结果</h2><p id="592b" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">这里我们将把原始数据与 k-means 组件的结果结合起来。然后，我们通过创建 Write MaxCompute Table 组件将结果保存到 MaxCompute 表中，作为我们的实验输出。</p><h2 id="1bee" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">标记客户群</h2><p id="391a" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">我们将使用 SQL 组件来计算每个聚类的平均新近度、频率和货币，以了解每个聚类的特征，并表示每个聚类的名称。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/4688b55f44063d6946e2766b51bb5ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XUUUSuU2ZwNy5_7Y"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">每个聚类的平均值。图片由 Bima 提供</p></figure><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/0ee7310f2890fdced1cd52b750d1602c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zgrUqVSlEJsSHvqz"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">细分市场详情。图片由 Bima 提供</p></figure><p id="6cef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们回到 Data Works，创建一个 PAI 节点来运行我们的实验。然后，我们使用一个 SQL 节点编写一个 DML 来对每个集群进行分段。最后，我们创建另一个数据集成节点，将数据从 MaxCompute 发送回 OSS。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/79582ff65b9fe9d2fe132338c0ad90a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_Pi3WRA7R568rWml"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">数据工作中的业务流程。图片由 Bima 提供</p></figure><h2 id="5362" class="mo ll it bd lm mp mq dn lq mr ms dp lu kr mt mu ly kv mv mw mc kz mx my mg mz bi translated">模型培训总结</h2><p id="10dd" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">这是使用阿里云产品(如 OSS、MaxCompute、DataWorks 和人工智能机器学习平台)创建模型训练需要完成的五个步骤。总之，下图显示了从数据准备到模型训练的模型训练架构。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/3bbe4aff96c03a989983f3237333f86a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CqVKqw5yvHXb8RPX"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">客户细分模型培训架构。图片由 Bima 提供</p></figure><h1 id="8eab" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">模型服务</h1><p id="9af1" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">用户新近性、频率和货币数据可能会随着时间的推移而改变。这意味着我们需要根据用户当前的特征不断给他们贴标签。如果我们手动进行分割，这可能是一项具有挑战性的任务。因此，我们将每天一次批量自动部署和创建细分流程。下图总结了服务模型的步骤。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/9b0bca9cbf61b78b4b937e8f14b626dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A2mzU_rzmzJnEOHk"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">服务于架构的客户细分模型。图片由 Bima 提供</p></figure><p id="0433" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们首先将日常数据放入 OSS，然后使用 Data Works 服务将这些数据从 OSS 传输到 Max Compute。之后，我们清理和转换数据到 RFM 形式，和以前一样。</p><p id="d7af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们创建一个新的实验作为 PAI 节点。在这个实验中，我们做了相同的特征工程过程，如日志转换和标准化。但是我们使用在训练过程中保存的标准化参数。</p><p id="ae6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们使用之前创建的 RFM 模型的预测组件来预测我们的新数据。然后，我们将分段结果与原始参数结合起来，并将它们保存到最大计算表中。</p><p id="abf2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">之后，我们创建一个 SQL 节点，用各自的段名标记我们的客户。然后我们将结果以*的形式发送回 OSS。csv 文件，方法是创建一个数据集成节点。下图显示了 Data Works 和 PAI 实验的整体流程。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/67851ed6f734a675aeae33140e16be21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vKSNyiDXqibnwFbG"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">DataWorks 和 PAI 中的服务业务流模型。图片由 Bima 提供</p></figure><p id="810f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，数据湖分析(DLA)将用于连接开放源码软件文件和外部可视化工具，如 Tableau。数据湖分析(DLA)是一个无服务器的云原生交互式查询和分析服务。因此，我们可以将细分结果提交给我们的业务团队进行监控和使用。下图显示了在 Tableau 中创建的客户细分仪表板。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/d10d8956bcb456be53aa99d9198555dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CYXWRs_v3PahDNYh"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">客户细分仪表板。图片由 Bima 提供</p></figure><h1 id="3dc9" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">结论</h1><p id="a735" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">结果，确定了五个集群。那些是忠诚者，潜在，流失，潜在损失，和损失。因此，我们的业务团队可以设计和执行一个营销策略来参与每个细分市场。</p><p id="ab1f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个过程中，我们还了解到如何结合各种阿里云产品来制作端到端的机器学习管道，并构建业务用例。</p><h1 id="71a5" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">文献学</h1><p id="1a80" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">——<a class="ae kf" href="https://www.alibabacloud.com/product/maxcompute" rel="noopener ugc nofollow" target="_blank">https://www.alibabacloud.com/product/maxcompute</a></p><p id="87e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">——【https://www.alibabacloud.com/product/ide T2】</p><p id="3150" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">——【https://www.alibabacloud.com/product/data-lake-analytics T4】</p><p id="8891" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-<a class="ae kf" href="https://www.alibabacloud.com/product/oss" rel="noopener ugc nofollow" target="_blank">https://www.alibabacloud.com/product/oss</a></p></div></div>    
</body>
</html>