<html>
<head>
<title>Create a Farm Map with Soil and Elevation Data Using QGIS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 QGIS 创建包含土壤和高程数据的农场地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/farm-design-with-qgis-3fb3ea75bc91?source=collection_archive---------20-----------------------#2020-07-02">https://towardsdatascience.com/farm-design-with-qgis-3fb3ea75bc91?source=collection_archive---------20-----------------------#2020-07-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1f86" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用土壤数据、高程等高线(地形图)和地块创建免费的卫星地图。农场规划、关键线路设计和农林绘图始于良好的场地评估。</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/14c2df54b8f95d5c3cc761e657936b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7me428J1KN7TMB0c"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">Wolfgang Hasselmann 在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="38b5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">今年夏天，我的家人正在进行一个项目，利用农林业和永久农业原理在德克萨斯州设计和种植一个小果园。鉴于我对橡树和可食用植物的热爱，这是我一直想追求的梦想。这是从我尝试用橡子制作 T4 食品的创业过程中收集到的渴望。</p><p id="bc3e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们的家庭遵循萨瓦纳研究所(Savanna Institute)概述的规划原则，萨瓦纳研究所是一个致力于多功能农业的非营利组织，旨在促进“生态弹性、气候稳定、经济繁荣和充满活力的社区”。该组织的新书《常年路径:种植树木作物》概述了规划和种植成功的农林地块的必要步骤。</p><p id="3ed4" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">耕作的艰辛始于对土地的了解。地图是进行现场评估的最佳起点。正如 j .罗素.史密斯在《树木作物》中所说:</p><blockquote class="lz"><p id="27c1" class="ma mb iq bd mc md me mf mg mh mi ly dk translated">农业必须“适应……自然条件”；"耕作应该适合土地。"</p></blockquote><p id="80ee" class="pw-post-body-paragraph ld le iq lf b lg mj jr li lj mk ju ll lm ml lo lp lq mm ls lt lu mn lw lx ly ij bi translated">在挑选植物或准备田地之前，我们必须建造场地平面图。鉴于我对数据科学的兴趣，我主动提出帮助制作我们果园的地图。以下是我在开源平台<a class="ae lc" href="https://qgis.org/en/site/forusers/download.html" rel="noopener ugc nofollow" target="_blank"> QGIS 3 </a>中创建地图的步骤。我还使用 Google Earth Pro 处理包裹数据，使用 Gaia GPS 移动应用程序进行实地测绘。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mo"><img src="../Images/2a23b85f27936b7cd59a6c9232df280d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FIh7RogCOdPseK634vgn2w.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">谢尔盖·马朱加在<a class="ae lc" href="https://unsplash.com/s/photos/soil-map?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="5dae" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">步骤 1:获取包裹信息</h1><p id="04ba" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">首先，让我们向 QGIS 添加一个卫星栅格，这样您就可以获得您的方位。我遵循了哈塔里实验室的指示。</p><p id="19ef" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">那么，有几种方法来划分你的包裹。您可以:</p><p id="67ab" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">一个<strong class="lf ir">。</strong>)在 QGIS 中创建一个自定义的<a class="ae lc" href="https://youtu.be/Zer558SnKX4" rel="noopener ugc nofollow" target="_blank">多边形(如果是这样，可以跳到步骤 2)或者…</a></p><p id="6644" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">b.)导入 shapefile。</p><p id="afea" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们正在评估的地块沿着一条小溪，因此我们需要地块的准确坐标。因此，我从县评估区下载了适当的 shapefile 宗地数据。</p><p id="6139" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">许多评估区公开发布 shapefile 数据。然而，我们的土地与一个没有在其网站上发布此类信息的县重叠。通过一封快速的信函和少量的费用，我们能够通过公开记录请求获得适当的数据。然后我保存了这个。我电脑上的 shp 文件。</p><p id="0e2a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">接下来是棘手的部分…获取所有的县评估区数据，并将其缩小到您需要的几个地块。我们发现这个筛选过程在 Google Earth Pro 中更简单:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nm"><img src="../Images/45ed77924f91a3c0692867a0d78cf5d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zCCyvlhYhZGHXb5Ti3PPPg.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">Google Earth Pro 中的包裹</p></figure><p id="cbe9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">打开桌面上的谷歌地球专业版。转到文件&gt;导入&gt;(在此选择县包裹文件)&gt;打开&gt;全部导入。大多数评估区将数据存储为 ESRI shp 文件。因此，在导入时，记得选择文件类型为 ESRI 形状文件。</p><p id="2f88" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">导入后，在地图上查找您的特定农场宗地。右键单击并转到“保存位置为…”然后您可以将其保存在您的计算机上作为一个 kmz 文件。如果您在该县有多个包裹，请重复此步骤。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/c5312fb4aab43871dc6cfe9bd7909cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxC3ZXqICc-uCS1yt70kqA.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">在 QGIS 中添加矢量</p></figure><p id="995d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在，要将特定宗地导入 QGIS，请打开 QGIS 软件，然后转至图层&gt;添加图层&gt;添加矢量图层。选择在 Google Earth Pro 中保存 kmz 文件的源和矢量数据库，然后单击添加。瞧啊。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi no"><img src="../Images/38342a43fa260c9c03932bd1551d256a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lnxutvdnbQkVBUkbyXgTQ.jpeg"/></div></div></figure><p id="62ae" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在 QGIS 中拥有宗地图层后，右键单击并选择导出&gt;要素另存为，然后将其另存为 ESRI shapefile。这些文件是您感兴趣的领域，四个文件扩展名(.shp，。shx，。prj，。dbf)将是后续步骤所必需的。</p><h1 id="6460" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">步骤 2:导入土壤数据</h1><p id="864a" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">按绿色按钮启动美国农业部<a class="ae lc" href="https://websoilsurvey.sc.egov.usda.gov/App/HomePage.htm" rel="noopener ugc nofollow" target="_blank">网络土壤调查</a>。选择导入 AOI，然后从形状文件创建 AOI。选择并打开步骤 1 中保存的四个文件，然后单击“设置 AOI”按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4731ea1b75d50c4ecf4497ad45779b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*KIDS5ti1PHW9Lhpf_jFzCA.jpeg"/></div></figure><p id="06d2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您感兴趣的领域现在应该已经选定。查看顶部的黄色选项卡，并选择下载土壤数据选项卡。向下滚动并选择创建下载链接。然后点击标题为:下载链接下创建的 zip 文件。祝贺您——您现在拥有的土壤数据比您想要或需要的还要多！</p><p id="6433" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我的目标是为了种植的目的可视化土壤图。为了做到这一点，我回到我的 QGIS 地图，然后我添加了土壤地图的新矢量层。</p><p id="b7e9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">转到图层&gt;添加图层&gt;添加矢量图层。然后选择你下载的土壤地图压缩文件。单击添加按钮。将出现几个文件。选择以 spatial/soilmu_a_aoi.shp 结尾的文件，这是一种矢量文件类型。该选择将添加您寻找的矢量线。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nq"><img src="../Images/4462a922558e3945224784b489e849e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-mh9_FbdAiKr4v3AYjFkA.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">QGIS 中的美国农业部 WSS 数据和宗地地图</p></figure><p id="5e8f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">要添加土壤类型标签，右键单击新图层，然后转到属性。然后转到标签。选择单个标签。选择 MUSYMBOL 作为值。</p><p id="769b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">此操作将显示相应土壤类型的符号。为了更具体地探究这一关键点，我会在 WSS 网站上或通过 Microsoft Access 中的表格数据来进行。</p><h1 id="c5a8" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">步骤 3:导入高程等高线</h1><p id="75f4" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">a.)对德州人来说:</p><p id="cbc2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">德克萨斯州有一个独特的激光雷达和高程数据中心。我使用这个数据，因为它是非常当前有限的数据差距。</p><p id="77b0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您可以下载特定绘图区域的<a class="ae lc" href="https://tnris.org/stratmap/elevation-lidar/" rel="noopener ugc nofollow" target="_blank"> TNRIS 高程数据</a>。只需点击该地区，然后在地图上点击你想下载的多边形。然后点击地形图。下载完成后，你可以进入图层&gt;添加图层&gt;添加矢量图层导入高程等高线。我更喜欢 2 英尺的。层，但也有 5 英尺。层次。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nr"><img src="../Images/ce549dee866619168d0cd7f5a09ff3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e8vufQqzAiJubA8ijhRn_g.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">带有土壤类型和高程等高线矢量的农场地图</p></figure><p id="4ce8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">b.)对于美国的其他人:</p><p id="38cf" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">或者，如果你不住在德克萨斯州，或者想使用不同的方法。美国地质调查局-国家地图是一个伟大的资源。简单地说，去<a class="ae lc" href="https://viewer.nationalmap.gov/basic/" rel="noopener ugc nofollow" target="_blank"> TNM 下载网站</a>，选择高程源数据(3d EP)——LIDAR，IfSAR。然后选择 DEM 源。您可以从地图上找到适合您所选矩形或地址的产品。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ns"><img src="../Images/16c73c507f68525be98d66da2901b76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Rivv4oLWzlaYcYja5U7eQ.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://viewer.nationalmap.gov/basic/" rel="noopener ugc nofollow" target="_blank"> USGS 国家地图</a></p></figure><p id="6833" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">下载所有的产品压缩文件，解压并保存。这些 zip 文件中包含一个 tiff 文件。返回 QGIS，然后转到图层&gt;添加图层&gt;添加栅格图层。选择 tiff 文件，然后按添加。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nt"><img src="../Images/8768555e97e35316368380e54861f0f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lc9B_hJrAmu4BD3Cxuhsmg.jpeg"/></div></div></figure><p id="116b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在你会看到一个黑白图像覆盖在你的地图上。转到光栅&gt;提取，轮廓。输入图层应该是您添加的 tiff 文件。等高线之间的间隔是以米为单位的数量。它默认为 10，但我喜欢更多的细节，所以我把它改为 1 米的间隔。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/da1a83e8a7a4baa62285f6298ec11134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-6vDLSJsPYZiWqS6vcWOQ.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">美国地质调查局国家地图栅格中的高程等高线</p></figure><h1 id="5c91" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">步骤 5:向地图添加基础设施</h1><p id="aaf5" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">将现有或计划中的基础设施添加到地图中(水管、栅栏、谷仓等)。).您可以转到图层&gt;创建图层&gt;新建 shapefile 图层。您可以选择所需的几何类型。例如，可以为树添加一个点，为栅栏添加一条线，为谷仓添加一个多边形。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nv"><img src="../Images/f958b4987001f0817f9c7a9de69adcf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4iCo-Q5jNQLzmMnjKJYsA.jpeg"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">选择几何类型并创建新层</p></figure><h1 id="6fab" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">第六步:在手机上添加盖亚 GPS 现有的树木或兴趣点。</h1><p id="e13a" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">规划场地的一个重要步骤是进行实地考察，在你的地块上寻找杂草、树木和其他感兴趣的地方。我们在手机上安装了 Gaia GPS 应用程序，以捕捉我们希望包含在地图上的树木和道路。</p><p id="ca1d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您可以单击加号并添加路线、路点和区域。你甚至可以给树(或其他物品)拍照，并把它和你的路点一起分类。这些都保存在屏幕底部的 saved 文件夹中。您可以点击任何保存的项目，然后将它们导出为 GPX、KML 或 CSV 文件。我把它作为 KML 保存在 dropbox 文件夹中，这样我就可以在我的电脑上访问它了。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/6e3242221d519a2eabae3298d8b2117c.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*l3C9GDkiHzSOCp0o-5VQQw.png"/></div></figure><p id="c5a6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">然后，要将这些数据导入 QGIS，我只需进入图层&gt;添加图层&gt;添加矢量图层，并选择保存在我的 dropbox 文件夹中的文件。</p><h1 id="0556" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated">第七步:执行！</h1><p id="3013" class="pw-post-body-paragraph ld le iq lf b lg nh jr li lj ni ju ll lm nj lo lp lq nk ls lt lu nl lw lx ly ij bi translated">总之，您现在应该有一张地图，其中包含了您在种植布局、物种选择和其他基本设施因素方面做出决策所需的大部分信息。如果您有任何问题，请随时通过我的网站联系我:<a class="ae lc" href="http://www.mimis-musings.com." rel="noopener ugc nofollow" target="_blank">www.mimis-musings.com。</a></p><p id="1048" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我还要感谢<a class="ae lc" href="https://www.upwork.com/freelancers/~01205a1b2961dc4745" rel="noopener ugc nofollow" target="_blank">费伦·费雷尔</a>的帮助。</p></div></div>    
</body>
</html>