<html>
<head>
<title>The Simplest Way to Scrape Tabular Data with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python抓取表格数据的最简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-simplest-way-to-scrape-tabular-data-with-python-d17abda3096d?source=collection_archive---------31-----------------------#2020-05-19">https://towardsdatascience.com/the-simplest-way-to-scrape-tabular-data-with-python-d17abda3096d?source=collection_archive---------31-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ccce" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据科学基本指南</h2><div class=""/><div class=""><h2 id="ad7b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">用Python脚本的3行代码抓取新冠肺炎统计数据的例子</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/23155a0ec74d748e8391a38e34078095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PkJbtPQBB2MxLEgH"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">插图作者<a class="ae lh" href="https://medium.com/@chaeyunkim" rel="noopener">金彩云</a></p></figure><p id="3610" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">你们中的任何人可能已经从网站上读过几篇关于数据搜集的文章。他们大多建议用<strong class="lk jd"> Node.js搭配Cheerio </strong>库或者<strong class="lk jd"> Python搭配美汤</strong>。虽然当你掌握了这些技术后，这是非常有效的，但它需要你花费时间和精力，直到你完成所有的编码，找到你需要的元素，请求数据，清理数据以创建一个数据帧，然后才能进行实际的数据分析。<em class="mn">(当然，还有一些额外的时间来修复所有的bug和错误🐛)</em></p><p id="5d39" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这篇短文将向您展示如何用三行Python脚本以最简单的方式从任何网站获取表格数据的教程！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mo"><img src="../Images/efd000949eb1b20dfa912909fa027a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1g_cAVqOMPYqyKxZ"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">(红色)熊猫——照片由<a class="ae lh" href="https://unsplash.com/@rigels?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">参宿七</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="8bd8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们的英雄是(红色)熊猫！是的，你们所知道的受欢迎的熊猫很可爱，并且能够自动从HTML文件中提取表格数据。</p><h1 id="feed" class="mp mq it bd mr ms mt mu mv mw mx my mz ki na kj nb kl nc km nd ko ne kp nf ng bi translated">从Worldometer收集实时新冠肺炎数据的示例:</h1><p id="02e6" class="pw-post-body-paragraph li lj it lk b ll nh kd ln lo ni kg lq lr nj lt lu lv nk lx ly lz nl mb mc md im bi translated">例如，您想从Worldometer <a class="ae lh" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank">网站</a>获取表格数据。由于这个数据集是动态的，会随着时间的推移而变化，所以数据抓取是有意义的，每次运行脚本时我们都会得到最新的结果！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/9613aa49dbcfac048ecb1b7beede3ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_TnRloENf90zwr0480xRQ.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">来自<a class="ae lh" href="https://www.worldometers.info/coronavirus/" rel="noopener ugc nofollow" target="_blank"> Worldometer </a>的新冠肺炎表格数据示例。(作者截图—2020年5月19日)</p></figure><p id="19dd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要抓取这个数据集，请在您的机器上准备好Python和Pandas。我们将使用熊猫<code class="fe nn no np nq b">read_html()</code>提取任何网页的所有表格。然而，我们不能仅仅用它来直接读取URL，因为你可能会面对一个<code class="fe nn no np nq b">error 403: Forbidden</code>。为了避免这个错误，我们将在使用Pandas读取HTML之前，先用<code class="fe nn no np nq b">request</code>模块请求它来获取HTML正文。总的来说，该脚本如下所示:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nr ns l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="ak">从Worldometer获取新冠肺炎数据的示例Python脚本。</strong>(作者提供的示例脚本)</p></figure><p id="18bb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe nn no np nq b">dfs</code>是一个列表结果，包含来自所请求的HTML主体的表类的多个数据帧。让我们通过打印出第一个<code class="fe nn no np nq b">dfs</code>来研究从上面的脚本中得到的数据帧。</p><pre class="ks kt ku kv gt nt nq nu nv aw nw bi"><span id="41b8" class="nx mq it nq b gy ny nz l oa ob">print(dfs[0])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/e4c8e3b2e22c4377f1f19f1149aa1e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bmUd1tHXhWA4sVsd7PZzgA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd od">示例输出新冠肺炎案例数据帧</strong>(用Spyder探索)</p></figure><h1 id="0417" class="mp mq it bd mr ms mt mu mv mw mx my mz ki na kj nb kl nc km nd ko ne kp nf ng bi translated">是的，大概就是这样。</h1><p id="a6bb" class="pw-post-body-paragraph li lj it lk b ll nh kd ln lo ni kg lq lr nj lt lu lv nk lx ly lz nl mb mc md im bi translated">有了三行Python代码，你就可以得到新冠肺炎数据的更新数据框架来玩，<strong class="lk jd">简单</strong>和<strong class="lk jd">容易</strong>！</p><p id="a3e9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">享受数据分析/可视化的乐趣！！我希望你喜欢这篇短文。如果您有任何问题、意见或建议，请随时给我留言。</p><p id="fe8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae lh" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">安全<strong class="lk jd">健康</strong>和<strong class="lk jd">健康</strong>！💪</p><p id="2645" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读。📚</strong></p></div></div>    
</body>
</html>