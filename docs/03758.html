<html>
<head>
<title>Creating Beautiful Maps with Python Beyond the defaults</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 创建超越默认设置的美丽地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/creating-beautiful-maps-with-python-beyond-the-defaults-c92593ccf2cc?source=collection_archive---------17-----------------------#2020-04-08">https://towardsdatascience.com/creating-beautiful-maps-with-python-beyond-the-defaults-c92593ccf2cc?source=collection_archive---------17-----------------------#2020-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4bb7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">超越默认地图定制的初学者指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5f5112c92bc15ce2cf5fbf66c36084fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FQ0mTRdk6s1en1ig"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jentheodore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">珍·西奥多</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="acaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">用 Geopandas 制作地图非常容易，但我必须承认，它的默认设置不如其他数据可视化软件。在本教程中，我们将研究改变和创建美丽地图的方法。有许多不同的方式来定制您的地图。我们介绍了一些具体的方法，您可以通过参数、选择颜色以及在地图中添加背景图和底图来增强地图制作。</p><blockquote class="me"><p id="878f" class="mf mg it bd mh mi mj mk ml mm mn lu dk translated">让我们用少而简单的代码制作出光滑美观的地图。</p></blockquote><h2 id="7d69" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">数据和默认地图</h2><p id="d4a8" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">让我们读取数据，并用默认值将其可视化。我们使用 Geopandas <code class="fe nm nn no np b">read_file() </code>函数读取数据。用 Geopandas 绘制地理数据也很简单，只需调用<code class="fe nm nn no np b">plot()) </code>函数。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="6db8" class="mo mp it np b gy nu nv l nw nx">gdf = gpd.read_file(“data/malmo-pop.shp”)<br/>gdf.plot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/72cf93991dd31f7ab6b0e76d32e11e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*nsvvJE2vHZNDWgnTQff7Dw.png"/></div></figure><p id="3789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看那张地图。尽管长得丑，我们还是要欣赏这种轻松。我们可以用参数来增强和定制地图。绝不接受默认值。</p><h2 id="dc9f" class="mo mp it bd mq mr nz dn mt mu oa dp mw li ob my mz lm oc nb nc lq od ne nf ng bi translated">自定义地图参数</h2><p id="6da0" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">上面的地图有几个缺点，我们可以很容易地通过获取和定制参数来解决。在这一节中，我们回顾一些可以帮助我们制作更加美观的地图的基本元素。让我们添加一些基本元素和自定义地图。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="501c" class="mo mp it np b gy nu nv l nw nx">fig, ax = plt.subplots(figsize=(16,16)) # 1</span><span id="8873" class="mo mp it np b gy oe nv l nw nx">gdf.plot(ax=ax, color=”grey”, edgecolor=”white”, linewidth=0.2) # 2</span><span id="c179" class="mo mp it np b gy oe nv l nw nx">plt.title(‘Mälmo Neighbourhoods’, fontsize=40, fontname=”Palatino <br/>Linotype”, color=”grey”) # 3</span><span id="b3b6" class="mo mp it np b gy oe nv l nw nx">ax.axis(“off”) # 4</span><span id="ef64" class="mo mp it np b gy oe nv l nw nx">plt.axis('equal') # 5</span><span id="0011" class="mo mp it np b gy oe nv l nw nx">plt.show() # 6</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/2664219bcaedc7ff16e21682fcee9c84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFyUiECP61aDNd2O_bm85A.png"/></div></div></figure><p id="86a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止我们做了什么？。我们为地图添加了一个标题(#3)，并删除了纬度和经度的轴标签(# 4)。在(#5)中，我们还通过确保比例保持固定来确保地图尽可能地代表现实— <code class="fe nm nn no np b">plt.axis("equal")</code>。我们也增加了地图的大小(# 1)。</p><p id="dffc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">地图的实际颜色作为参数传递给<code class="fe nm nn no np b">plot()</code>函数。我们将地图默认的蓝色改为灰色，并使线条边缘变小为白色。</p><p id="02f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在定制地图方面走得更远了。上面的地图比之前默认的地图更令人愉快。在下一节，我们将了解如何有效地使用颜色。</p><h2 id="d461" class="mo mp it bd mq mr nz dn mt mu oa dp mw li ob my mz lm oc nb nc lq od ne nf ng bi translated">有效地使用颜色</h2><p id="61eb" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">虽然颜色的选择是个人的，但有许多工具可以通过设计指南帮助你有效地选择颜色。一个这样的工具是<a class="ae ky" href="https://www.palettable.io/" rel="noopener ugc nofollow" target="_blank">平板</a>。这些是可口可乐的一些指导颜色选择。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/f88ffb848fd1d8aafc1b4240361aeab4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXMQ8U5o-T5AiwY7oNaaNQ.png"/></div></div></figure><p id="4b7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将在地图上添加街道线，这样我们就可以为地图选择不同的颜色。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="0a4f" class="mo mp it np b gy nu nv l nw nx">streets = gpd.read_file(“data/malmo-streets.shp”)</span><span id="c3c9" class="mo mp it np b gy oe nv l nw nx">colors = [“#A1E2E6”, “#E6BDA1”, “#B3A16B”, “#678072”, “#524A4A”]<br/>palplot(colors, size=4)</span></pre><p id="034b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用这些颜色来传递函数参数。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="3518" class="mo mp it np b gy nu nv l nw nx">fig, ax = plt.subplots(figsize=(20,20))<br/>streets.plot(ax=ax, color = colors[4], linewidth= 0.2)<br/>gdf.plot(ax=ax, color=colors[1], edgecolor=”white”, linewidth=0.3)</span><span id="3b71" class="mo mp it np b gy oe nv l nw nx">plt.title(‘Mälmo Neighbourhoods’, fontsize=40, fontname=”Palatino Linotype”, color=”grey”)<br/>ax.axis(“off”)<br/>#plt.axis(‘equal’)<br/>plt.show()</span></pre><p id="9e4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用您选择的颜色，您可以增强地图的视觉美感。在这个例子中，我们修改了地图的背景颜色，并给街道线赋予了十六进制颜色#678072。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/39e53a44f3af8651498586747109ee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DM0vvWN92HqeiycnlbEzTA.png"/></div></div></figure><p id="b026" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上图显示了颜色的有效使用，以及如何使用十六进制代码选择颜色。为了给我们的地图添加上下文，我们可以添加底图。</p><h2 id="ae1e" class="mo mp it bd mq mr nz dn mt mu oa dp mw li ob my mz lm oc nb nc lq od ne nf ng bi translated">添加底图</h2><p id="2675" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">早先添加背景底图相当复杂，但是随着<a class="ae ky" href="https://github.com/darribas/contextily" rel="noopener ugc nofollow" target="_blank">上下文库</a>的引入，我们可以很容易地将不同的底图添加到我们的地图中。让我们这样做吧。</p><pre class="kj kk kl km gt nq np nr ns aw nt bi"><span id="35ed" class="mo mp it np b gy nu nv l nw nx">fig, ax = plt.subplots(figsize=(16, 18))</span><span id="ac78" class="mo mp it np b gy oe nv l nw nx">gdf.to_crs(epsg=3857).plot(ax=ax, color=colors[1], edgecolor=”white”, linewidth=0.3, alpha=0.5) # 2 - Projected plot<br/></span><span id="6b22" class="mo mp it np b gy oe nv l nw nx">streets.to_crs(epsg=3857).plot(ax=ax, color = colors[4], linewidth= 0.2)</span><span id="8069" class="mo mp it np b gy oe nv l nw nx">ctx.add_basemap(ax, url=ctx.providers.Stamen.TonerLite) # 3</span><span id="d4f1" class="mo mp it np b gy oe nv l nw nx">plt.title(‘Mälmo Neighbourhoods’, fontsize=40, fontname=”Palatino Linotype”, color=”grey”)<br/>ax.axis(“off”)<br/>#plt.axis(‘equal’)<br/>plt.show()</span></pre><p id="b7ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们只是将数据投影到网络墨卡托，然后绘制它(# 2)，并添加一个底图，在这种情况下，Stamen Toner Lite 设计。这是带底图的地图。根据您的选择，您可以选择许多不同的底图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/760d4bb43082583cb74e958b83d60da0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uOHlDeaqgCuSKL07JH1Y4A.png"/></div></div></figure><p id="99a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的地图有一个上下文底图，与 Geopandas 提供的默认地图相比，视觉效果更好。不要接受默认设置，尝试实验和设计你的地图。有了 Matplotlib 的一些知识，您可以用 Python 创建一个美观的地图。</p><h2 id="88c6" class="mo mp it bd mq mr nz dn mt mu oa dp mw li ob my mz lm oc nb nc lq od ne nf ng bi translated">结论</h2><p id="532d" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">在本教程中，我们介绍了如何在使用 Geopandas 制作地图时超越默认设置。我们已经看到了如何使用参数调整和定制绘图。我们也分享了如何在你的地图中加入色彩设计。最后，我们很容易地添加了底图，为地图提供了上下文。</p><p id="8acd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程的代码可以在这个 Github 仓库中获得。</p><div class="oj ok gp gr ol om"><a href="https://github.com/shakasom/esda/blob/master/Plotting.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">shakasom/esda</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">permalink dissolve GitHub 是 4000 多万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">github.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div></div></div>    
</body>
</html>