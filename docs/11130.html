<html>
<head>
<title>Keep your Jupyter Notebooks maintainable with nbQA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 nbQA 保持 Jupyter 笔记本的可维护性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/keep-your-jupyter-notebooks-maintainable-968c9a5e759c?source=collection_archive---------44-----------------------#2020-08-02">https://towardsdatascience.com/keep-your-jupyter-notebooks-maintainable-968c9a5e759c?source=collection_archive---------44-----------------------#2020-08-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3c556db558225bc361c3296337b74f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qgMMCq3rZVJ5yhec"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@vitreous_macula?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Julia Joppien </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ccdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们数据科学家喜欢 Jupyter 笔记本:它们支持快速原型制作，让我们用代码讲述故事，并允许我们彻底探索数据集。然而，任何试图将 Jupyter 笔记本套件置于版本控制之下的人都会告诉你，它们真的很难维护。</p><h1 id="0219" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">数据科学家喜欢 Jupyter 笔记本电脑…</h1><p id="c540" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">这有许多原因，例如:</p><ul class=""><li id="507c" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated">实现快速原型制作</li><li id="edb3" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">让你用代码讲故事</li><li id="e4d7" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">允许您彻底探索您的数据集</li></ul><h1 id="d4cf" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">…但是 Python 代码质量工具没有！</h1><p id="b1f5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们想使用以下任何一种优秀的工具:</p><ul class=""><li id="41b6" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated"><code class="fe mv mw mx my b"><a class="ae kf" href="https://flake8.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank">flake8</a></code>(风格指南强制执行)</li><li id="8f07" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b"><a class="ae kf" href="http://pylint.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank">pylint</a></code>(建议重构，带来代码味道)</li><li id="51eb" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated"><code class="fe mv mw mx my b"><a class="ae kf" href="http://mypy-lang.org/" rel="noopener ugc nofollow" target="_blank">mypy</a></code>(检查静态类型注释)</li><li id="fe9e" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">还有很多很多…</li></ul><p id="bedb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们需要放弃我们非常喜欢的 Jupyter 笔记本，转而使用 Python 脚本。</p><h1 id="305c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们能两全其美吗？</h1><p id="c248" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">是啊！</p><p id="3a63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b"><a class="ae kf" href="https://github.com/nbQA-dev/nbQA" rel="noopener ugc nofollow" target="_blank">nbQA</a></code>允许你在 Jupyter 笔记本上运行任何标准的 Python 代码质量工具。就像你通常在 Python 脚本上运行<code class="fe mv mw mx my b">flake8</code>一样:</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><pre class="mz na nb nc gt nf my ng nh aw ni bi"><span id="081d" class="nj lf it my b gy nk nl l nm nn">my_script.py:1:1: F401 'pandas as pd' imported but unused</span></pre><p id="fc9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx my b"><a class="ae kf" href="https://github.com/nbQA-dev/nbQA" rel="noopener ugc nofollow" target="_blank">nbQA</a></code>允许您在 Jupyter 笔记本上运行它！</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><pre class="mz na nb nc gt nf my ng nh aw ni bi"><span id="a617" class="nj lf it my b gy nk nl l nm nn">my_notebook.py:cell_1:1:1: F401 'pandas as pd' imported but unused</span></pre><p id="03c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看此演示，了解一些示例:</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi no"><img src="../Images/a56b8da183a2b5e27ec6d47b67a92c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sicCl5ITcmNu8Ldr0tXlAw.gif"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">作者图片</p></figure><h1 id="8e3f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用作提交前挂钩</h1><p id="55b5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果你使用<a class="ae kf" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank">预提交，</a>这里有一个例子，告诉你如何编写一个钩子，根据<code class="fe mv mw mx my b">black</code>格式化你的笔记本，检查它们是否遵循<code class="fe mv mw mx my b">flake8</code>，并用<code class="fe mv mw mx my b">mypy</code>对它们进行类型检查:</p><figure class="mz na nb nc gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h1 id="1474" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">nbQA 还能做什么？</h1><p id="0be2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">查看<a class="ae kf" href="https://nbqa.readthedocs.io/en/latest/readme.html" rel="noopener ugc nofollow" target="_blank"> nbQA 文档</a>了解如何配置<code class="fe mv mw mx my b"><a class="ae kf" href="https://github.com/nbQA-dev/nbQA" rel="noopener ugc nofollow" target="_blank">nbQA</a></code>以及它能做什么。</p><h1 id="a424" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">再也不要写不可维护的 Jupyter 笔记本了</h1><p id="4268" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果您将<code class="fe mv mw mx my b"><a class="ae kf" href="https://github.com/nbQA-dev/nbQA" rel="noopener ugc nofollow" target="_blank">nbQA</a></code>集成到您的工作流程中(参见文档中关于如何使用<code class="fe mv mw mx my b"><a class="ae kf" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank">pre-commit</a></code>或在<a class="ae kf" href="https://martinfowler.com/articles/continuousIntegration.html" rel="noopener ugc nofollow" target="_blank">持续集成</a>期间使用它的示例)，那么您将能够保留 Jupyter 笔记本的所有优点，而不必牺牲它们的可维护性。</p></div></div>    
</body>
</html>