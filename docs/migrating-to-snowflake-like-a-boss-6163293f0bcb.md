# 如何像老板一样迁移到雪花

> 原文：<https://towardsdatascience.com/migrating-to-snowflake-like-a-boss-6163293f0bcb?source=collection_archive---------32----------------------->

## 顺利迁移需要知道的 3 件事

![](img/035ee93317180c946e695c987b644910.png)

***形象承蒙*** [***碧玉人儿***](https://unsplash.com/photos/Dzd_O5cnr0Y) ***上的泼溅。***

告诉我这是否让你想起了什么:你的老板*确信 [**雪花**](https://www.snowflake.com/) **是** [**数据的未来**](https://siliconangle.com/2020/06/06/snowflake-challenging-cloud-native-database-giants/) 并告诉你的团队你需要从你的数据仓库迁移到这个崭新的解决方案，这是你生活中最需要的。将存储与计算隔离开来将为您的公司节省大量资金，此外，您的副总裁还可以生成新奇的仪表板供您的首席执行官跟踪。*

云数据仓库平台雪花，让数据团队可以轻松存储和使用数据。与传统的存储解决方案不同，雪花支持大量的数据类型和商业智能工具，并使内部和外部团队能够在整个 ETL 管道中轻松协作。作为一个关系数据库，雪花还可以支持大多数结构化和非结构化数据类型。

> 像您的副总裁一样，我的许多客户对迁移到像雪花这样的云存储和计算解决方案的前景感到兴奋，但他们不知道从哪里开始。正确的做法是:我能够找到几篇关于从红移迁移到雪花的文章，但是很少有关于从其他解决方案中进行极地跳水的。

![](img/f0ac00926d914f048ae1aa71f6ba382d.png)

*像雪花一样，没有两个数据栈是一模一样的，各有各的资产，复杂性，* [*需求*](/what-we-got-wrong-about-data-governance-365555993048) *。雪花使得跨各种数据库和数据类型的管理和协作变得容易。(图片由* [*伦负担*](https://unsplash.com/photos/5AiWn2U10cw) *于 Unsplash。)*

在与现场的几个迁移者交谈后，我分解了一些较少讨论的团队迁移到雪花的注意事项，不管您从哪里开始:

# 1.告别分区和索引。

与其他数据仓库不同， [Snowflake 不支持分区或索引](https://stackoverflow.com/questions/58491962/does-snowflake-support-indexes)。相反，雪花自动将大表分成[微分区](https://support.snowflake.net/s/article/understanding-micro-partitions-and-data-clustering)，用于计算每列包含的值域的统计数据。这些见解决定了您实际需要数据集的哪些部分来运行您的查询。

对于大多数实践者来说，这种从索引到微分区的范式转换真的不应该成为问题(事实上，许多人选择迁移到雪花，因为这种方法减少了查询延迟)。但是，如果您在当前的生态系统中有分区和索引，并且正在迁移到“集群”模型，那么您需要一个合理的方法。安全迁移的一些提示:

1.  **记录当前的数据模式和沿袭。**当您需要交叉引用旧数据生态系统和新数据生态系统时，这将非常重要。
2.  分析你当前的模式和血统。接下来，确定这个结构及其对应的上游源和下游消费者是否对数据迁移到雪花之后的使用方式有意义。
3.  **选择合适的集群键。这将确保您团队的访问模式具有最佳的查询性能。**

只要您对数据有可见性，告别分区和索引就没什么好担心的。

# 2.预期(并接受)语法问题。

我采访的几个数据团队反复强调语法问题是任何云仓库迁移不可避免的组成部分，迁移到雪花也不例外。

一位数据分析师特别指出了将用于处理 ETL 的 SSIS 包从她的 SQL 服务器转换到雪花的困难，这[承认](https://support.snowflake.net/s/article/Integrating-SSIS-with-Snowflake)SSIS 包不容易与他们的解决方案集成。这种错误不仅令人沮丧，而且大大减缓了她的迁移，导致不可预见的成本和资源限制。

虽然像 DBT 这样的建模解决方案有助于验证数据集，但是哈希、时间戳和日期等函数的格式在新旧版本的数据之间往往不一致。

> 此外，雪花是区分大小写的，所以检查查询中的比较问题很重要。由于这些问题，一些公司可能会检查并重构所有被迁移的 SQL 行。

语法错误成为传统行业公司的一个更大的痛点，例如金融服务或医疗保健( [ICD10 代码](https://en.wikipedia.org/wiki/ICD-10)，我正在看着你)，这些行业长期依赖传统解决方案和手动、易错的数据输入。简单地迁移到云并不能解决这些问题。正如一家公共部门咨询公司的数据分析师告诉我的那样:*“即使你雇佣了令人惊奇的人，并把最好的数据字典放在他们面前，他们也可能无法告诉你这一切意味着什么。”*

您越早接受语法错误作为过程的一部分，就越容易识别这些不一致的趋势和模式，从而加快它们的解决。

# 3.经常监控你的数据。

与语法错误类似，数据问题甚至会导致最平稳的雪花迁移失败，一旦您连接上商业智能工具，就会产生错误或误导性的分析。通常这些会导致无声的错误，直到下游的消费者在报告或仪表板中发现问题时才会被注意到。如果你幸运的话，那是一个内部用户——如果你不幸运的话，那可能是你上周刚入职并试图给他们留下深刻印象的新的重要客户。

我们在一家数字营销咨询公司采访的另一位分析师指出，很难确保新旧数据仓库之间的全面数据定义。在她公司的新雪花仓库出现一些数据错误后，她决定通过开发两个并行数据分析层来测试他们数据的可靠性，一个是她的传统仓库，另一个是通过雪花。使用 Looker 为两个堆栈生成指标，他们很快确定了两个仓库之间实际上存在不一致，每组指标呈现不同的数据量。

当升级你的数据仓库时，确保你也在升级你的团队运作的方式，从语法并发这样的小事一直到数据质量和可靠性。

> 您在这一迁移上投入了大量资金(理应如此！)，如果数据本身不可信，那么浪费这些数据是愚蠢的。

# 掌握您的迁移

如果您从索引和分区转移，预计语法问题，并优先考虑数据质量，您将实现更无缝的雪花迁移，促进更轻松的协作，并为您的组织提供真正的业务价值。

> 迁移到雪花意味着您的团队拥有更大的灵活性和可伸缩性，以及为您的客户提供更快、更可靠的洞察力——如果您做得好，它还可以为您的整个组织带来力量倍增。

别担心:你也会给你的老板留下深刻印象。我保证。

**想了解更多，伸手** [**巴尔摩西**](http://montecarlodata.com?utm_source=Medium&utm_medium=Article&utm_campaign=Snowflake_Migration) **。**

*本文由蒙特卡洛首席执行官* [*巴尔·摩西*](https://www.linkedin.com/in/barrmoses/) *、蒙特卡洛首席技术官&*[*Lior GAVI sh*](https://www.linkedin.com/in/lgavish/)*共同撰写。*