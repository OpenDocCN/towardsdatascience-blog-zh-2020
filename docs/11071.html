<html>
<head>
<title>Plotting w/ Pandas and PPP Loan Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">绘制熊猫和 PPP 贷款数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotting-w-pandas-and-ppp-loan-data-2d8d1995a626?source=collection_archive---------25-----------------------#2020-08-01">https://towardsdatascience.com/plotting-w-pandas-and-ppp-loan-data-2d8d1995a626?source=collection_archive---------25-----------------------#2020-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="8e17" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">查看我在 Python <a class="ae ep" href="https://medium.com/swlh/how-to-use-python-dictionaries-19c003afa65f" rel="noopener">字典</a>、<a class="ae ep" href="https://medium.com/swlh/how-to-use-python-lists-831f4369a0cb" rel="noopener">列表</a>和<a class="ae ep" href="https://medium.com/swlh/how-to-use-python-dictionaries-19c003afa65f" rel="noopener">字符串</a>上的其他帖子</h2><div class=""/><div class=""><h2 id="8ebf" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">探索性数据分析初学者指南。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/3b255bb514f1662366fb72692e07ab07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xSTOjThtbNJaQ2sQkWa_Uw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片由 Mikio Harman 提供</p></figure><h1 id="f6ee" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">数据帧</h1><p id="8b62" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">在深入研究数据之前，理解什么是数据帧及其用途是很重要的。了解这一点将有助于我们理解熊猫的数据是如何被操纵的。</p><p id="a1a8" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">熊猫数据框是表格，就像你在 Excel 中看到的一样。它们由列和行组成，并以表格格式排列我们的数据，以便更容易使用数据进行推断或预测。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/8717e839e309964d06c0a73b43c5e20a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCWtedXm2AyUCv5gr5EIoA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae mx" href="https://vita.had.co.nz/papers/tidy-data.pdf" rel="noopener ugc nofollow" target="_blank">数据应整齐，即每个变量形成一列，每个观察值形成一行，每种类型的观察单位形成一个表格。</a>图片由 Mikio Harman 拍摄</p></figure><p id="e6ab" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">更具体地说，DataFrame 可以使用一个<code class="fe mz na nb nc b"><a class="ae mx" href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries" rel="noopener ugc nofollow" target="_blank">dictionary</a></code>、<code class="fe mz na nb nc b"><a class="ae mx" href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="noopener ugc nofollow" target="_blank">lists</a></code>、<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas-series" rel="noopener ugc nofollow" target="_blank">pd.Series</a></code>、<code class="fe mz na nb nc b">n<a class="ae mx" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html" rel="noopener ugc nofollow" target="_blank">umpy.ndarrays</a></code>或另一个<code class="fe mz na nb nc b">DataFrame</code>来填充 DataFrame 对象。让我们使用前四种方法创建数据框架，并展示查看数据的四种不同方法。</p><p id="fef2" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">如果你还没有，你需要下载<a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/getting_started/install.html#installation" rel="noopener ugc nofollow" target="_blank"> Pandas </a>和<a class="ae mx" href="https://numpy.org/install/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>最简单的方法就是使用<code class="fe mz na nb nc b"><a class="ae mx" href="https://pypi.org/project/pip/" rel="noopener ugc nofollow" target="_blank">pip</a></code>。</p><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="9add" class="nh lf iq nc b gy ni nj l nk nl">pip install pandas numpy</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="42c7" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">用熊猫创建数据框很容易。根据您处理的数据和数据结构，能够以不同的方式创建它们给了您很大的灵活性。您还可以将一个列名列表传入到<code class="fe mz na nb nc b">columns</code>参数中，并使用<code class="fe mz na nb nc b">index</code>参数将哪个列用于索引。</p><p id="0def" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">查看数据也很简单，Pandas 提供了许多从数据中提取行的方法。笔记本中涵盖的五种方式是:</p><ul class=""><li id="d548" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.head.html#pandas-dataframe-head" rel="noopener ugc nofollow" target="_blank">head()</a></code>——看看前 5 行</li><li id="bcb2" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.tail.html#pandas-dataframe-tail" rel="noopener ugc nofollow" target="_blank">tail()</a></code> —查看最后 5 行</li><li id="5095" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sample.html#pandas-dataframe-sample" rel="noopener ugc nofollow" target="_blank">sample(x)</a></code> —看 x 随机行</li><li id="6372" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.shape.html#pandas-dataframe-shape" rel="noopener ugc nofollow" target="_blank">shape</a></code>返回一个元组:(行，列)</li><li id="339c" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sample.html" rel="noopener ugc nofollow" target="_blank">df[start:stop:step]</a></code> —数据帧切片</li></ul><h2 id="14bd" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">截断</h2><p id="f759" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">您经常会遇到数据集太大而无法在屏幕上完整显示的情况。当有太多的数据以列或行的方式显示时，Pandas 会自动截断你的数据，这就是为什么你会看到一个交叉的<code class="fe mz na nb nc b">…</code>穿过你的数据，就像上面的例子中看到的那样。这可以通过使用以下方法访问<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/options.html#options-and-settings" rel="noopener ugc nofollow" target="_blank">pd.options</a></code>方法来解决:</p><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="c6d6" class="nh lf iq nc b gy ni nj l nk nl"><strong class="nc ja"># Changing these settings as seen in the notebook above will let you view your desired amount of rows and columns.</strong><br/>pd.options.display.max_rows<br/>pd.options.display.max_columns</span><span id="6799" class="nh lf iq nc b gy om nj l nk nl"><strong class="nc ja"># View up to 100 rows and columns</strong><br/>pd.options.display.max_rows = 100<br/>pd.options.display.max_columns = 100</span></pre><p id="392f" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">警告显示比需要更多的行和列将会增加查看代码输出的时间。</p><p id="d995" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">现在我们已经了解了什么是数据帧以及与数据帧相关的一些基本功能，让我们加载一些数据并进行一些初步的 EDA。</p><h2 id="f307" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">EDA 是什么？</h2><blockquote class="on oo op"><p id="e9f3" class="lw lx oq ly b lz ms ka mb mc mt kd me or mu mh mi os mv ml mm ot mw mp mq mr ij bi translated">"探索性数据分析(EDA)是一种利用各种技术(主要是图形技术)进行数据分析的方法/理念. "</p><p id="6840" class="lw lx oq ly b lz ms ka mb mc mt kd me or mu mh mi os mv ml mm ot mw mp mq mr ij bi translated"><a class="ae mx" href="https://www.itl.nist.gov/div898/handbook/eda/section1/eda11.htm" rel="noopener ugc nofollow" target="_blank"> - NIST/SEMATECH 统计方法电子手册</a></p></blockquote><p id="16d1" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">对于什么样的技术可以用于 EDA 没有硬性规定，但是通常使用可视化和简单的统计来帮助探索数据。这可以包括使用:</p><ol class=""><li id="6879" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr ou nu nv nw bi translated">散点图</li><li id="c7f7" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">箱线图</li><li id="31fe" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">直方图</li><li id="7cb9" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">线形图</li><li id="8ad1" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">条形图</li></ol><p id="4b97" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><strong class="ly ja">工资保障计划贷款数据集</strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ov nn l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">将鼠标悬停在某个状态上可查看更多详细信息。</p></figure><p id="a0de" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">对于这个例子，我们将使用<a class="ae mx" href="https://home.treasury.gov/policy-issues/cares-act/assistance-for-small-businesses/sba-paycheck-protection-program-loan-level-data" rel="noopener ugc nofollow" target="_blank">小企业管理局工资保障计划贷款水平数据</a>。2020 年 3 月，美国立法者同意了一项价值 2 万亿美元的刺激法案。该套餐包括</p><ul class=""><li id="5aea" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr nt nu nv nw bi translated">成人 1，200 加元，家庭收入不超过 75，000 加元的每个儿童 500 加元</li><li id="ee2d" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">为美国企业提供 5000 亿美元的基金贷款，每笔贷款都要公开</li><li id="91ea" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">失业救济金连续四个月增加了 600 美元</li><li id="a02f" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">航空公司 250 亿美元</li><li id="a4d3" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">航空货运公司 40 亿美元</li><li id="5c4b" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">30 亿美元用于航空承包商</li><li id="d135" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">3670 亿美元的小型企业贷款和补助计划</li><li id="dbf7" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">州政府和地方政府 1500 亿美元</li><li id="d902" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated">1300 亿美元用于医院、医疗保健系统和供应商</li></ul><p id="3df0" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">我们将使用分配给小企业的 3670 亿美元的数据，看看 EDA 是否能帮助我们得出任何假设。</p><blockquote class="ow"><p id="344e" class="ox oy iq bd oz pa pb pc pd pe pf mr dk translated">“工资保护计划是一项贷款，旨在为小企业提供直接激励，以保持他们的工人在工资单上。”</p><p id="ef0e" class="ox oy iq bd oz pa pb pc pd pe pf mr dk translated">-<a class="ae mx" href="https://www.sba.gov/funding-programs/loans/coronavirus-relief-options/paycheck-protection-program" rel="noopener ugc nofollow" target="_blank">sba.gov</a></p></blockquote><h2 id="4c9e" class="nh lf iq bd lg oc pg dn lk oe ph dp lo mf pi oh lq mj pj oj ls mn pk ol lu iw bi translated">汇总统计数据</h2><p id="d66c" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">Pandas 有许多用于返回汇总统计数据的内置方法。我最喜欢的一些包括<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.describe.html#pandas-dataframe-describe" rel="noopener ugc nofollow" target="_blank">describe()</a></code>和<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.info.html#pandas-dataframe-info" rel="noopener ugc nofollow" target="_blank">info()</a></code>。</p><p id="1743" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><code class="fe mz na nb nc b">describe()</code>将返回两组不同的描述性统计数据，具体取决于是对分类列还是数字列执行该操作。</p><p id="d359" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><strong class="ly ja">分类列(离散值):</strong></p><ul class=""><li id="1aaa" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">count </strong></code> —列中非缺失值的数量</li><li id="c3f2" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">unique</strong> </code> —列中有多少个唯一值</li><li id="f0e6" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">top</strong></code> —列中最常见的值</li><li id="bed7" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">freq</strong></code> —最大<code class="fe mz na nb nc b"><strong class="ly ja">top</strong></code>值在列中出现多少次</li></ul><p id="da75" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><strong class="ly ja">数字列(连续值):</strong></p><ul class=""><li id="5e75" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">count</strong></code> —列中非缺失值的数量</li><li id="7563" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">mean</strong></code> —列中找到的平均值</li><li id="3aba" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">std</strong></code> <strong class="ly ja"> </strong> —列的标准偏差</li><li id="4f32" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">min</strong></code> —列中的最小值</li><li id="f053" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">25%</strong></code> —列的第 25 个百分点值</li><li id="3429" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">50%</strong></code> —列的第 50 个百分位(中值)的值</li><li id="c965" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">75%</strong></code> —列的第 75 百分位的值</li><li id="107b" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr nt nu nv nw bi translated"><code class="fe mz na nb nc b"><strong class="ly ja">max</strong></code> —列中的最大值</li></ul><p id="8df4" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><code class="fe mz na nb nc b">info()</code>告诉我们关于索引数据类型、列数据类型、存在多少非空值以及数据帧使用的内存量的信息。</p><p id="af88" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">让我们来看看一些运行中的代码。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="15be" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">加载数据</h2><p id="04cb" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">Pandas 可以加载多种文件类型，这取决于你使用哪种文件类型。我使用的数据是一个 CSV 文件，Pandas 方便地提供了一个<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.info.html#pandas-dataframe-info" rel="noopener ugc nofollow" target="_blank">read_csv()</a></code>方法，当给定正确的文件路径时，该方法会自动将数据读入 DataFrame。Pandas 还提供了许多参数，在加载数据时可以包含这些参数，这可以减少数据清理过程中的大量繁重工作。</p><p id="3db3" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">想学习加载不同的文件类型吗？检查这里的<a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/io.html#input-output" rel="noopener ugc nofollow" target="_blank">和</a>。</p><h2 id="f0bb" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated"><strong class="ak">楠策</strong></h2><p id="ba66" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">缺失值在数据中普遍存在，处理它们将是一项常见的任务。Pandas 以<code class="fe mz na nb nc b">NaN</code>的形式表示缺失值，意思是“不是一个数字”。这些不是表示缺失值的唯一方式，您的工作是确定在生成数据时如何处理缺失值。当您使用 Pandas 读入数据时，您可以指定哪些值代表缺失值。</p><p id="3e3a" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">默认情况下，Pandas 在加载数据时会将以下值解释为缺失，并会自动将它们转换为一个<code class="fe mz na nb nc b">NaN</code>:' '、' #N/A '、' #N/A N/A '、' #NA '、'-1。#IND '，'-1。#QNAN '，'-nan '，'-NaN '，' 1。#IND '，' 1。' #QNAN '，'&lt; NA &gt;'，'不适用'，' NA '，' null '，' NAN '，'不适用'，' NaN '，' NULL '。</p><p id="4d8f" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">我通过将两个方法链接在一起来确定每一列中有多少缺失值。</p><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="e815" class="nh lf iq nc b gy ni nj l nk nl">df.isna().sum()</span></pre><p id="1049" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.isna.html#pandas-dataframe-isna" rel="noopener ugc nofollow" target="_blank">isna()</a></code>为数据帧中的每个值返回一个布尔值，如果它丢失或不丢失，<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sum.html#pandas-dataframe-sum" rel="noopener ugc nofollow" target="_blank">sum()</a></code>对布尔值进行合计，以确定每列中有多少个丢失的值。这是一种简便的方法，可以知道哪些列可以立即删除，哪些列需要进一步分析，以了解应该如何处理缺失的值。</p><h2 id="02d4" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">熊猫策划</h2><p id="04fd" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">对 Pandas 使用<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html#pandas-dataframe-plot" rel="noopener ugc nofollow" target="_blank">plot()</a></code>方法可以很容易地快速可视化您的数据。让我们试着使用方法来理解一些可用的特性。在本例中，我们将使用熊猫创建以下地块。</p><ol class=""><li id="086b" class="no np iq ly b lz ms mc mt mf nq mj nr mn ns mr ou nu nv nw bi translated">直方图—非常适合查看数据的频率</li><li id="ed06" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">箱线图—非常适合查看数据的分布</li><li id="36a1" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">水平条形图—非常适合检查离散类型</li><li id="aa05" class="no np iq ly b lz nx mc ny mf nz mj oa mn ob mr ou nu nv nw bi translated">堆积图——非常适合比较多个推论。</li></ol><h2 id="5a00" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">列选择和分组依据</h2><p id="1985" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">Pandas 通过简单地在<code class="fe mz na nb nc b">[]</code>中传递列名和列名就可以很容易地选择一个列。如果您想选择多个列，只需传递一个名称列表即可。默认情况下，当您选择一个包含索引标签和值的列时，Pandas 将返回一个<code class="fe mz na nb nc b">pd.Series</code>对象，如果您想返回一个<code class="fe mz na nb nc b">DataFrame</code>对象，只需传递列表中的单个列名即可。点击了解更多信息。</p><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="e011" class="nh lf iq nc b gy ni nj l nk nl"><strong class="nc ja"># Make the DataFrame</strong><br/>data = {chr(65+x):[x+1] for x in range(3)}<br/>df = pd.DataFrame(data)</span><span id="8a63" class="nh lf iq nc b gy om nj l nk nl"><strong class="nc ja"># Getting a single column</strong><br/>print(df["C"])<br/>print(type(df["C"]))</span><span id="6ce7" class="nh lf iq nc b gy om nj l nk nl"><em class="oq"># Output<br/>0    3<br/>&lt;class 'pandas.core.series.Series'&gt;</em></span><span id="fcf7" class="nh lf iq nc b gy om nj l nk nl"><strong class="nc ja"># Returning a DataFrame from a single column</strong><br/>print(df[["C"]])<br/>print(type(df[["C"]]))</span><span id="9da4" class="nh lf iq nc b gy om nj l nk nl"><em class="oq"># Output<br/>0    3<br/>1    4<br/>Name: C, dtype: int64<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;</em></span><span id="2a65" class="nh lf iq nc b gy om nj l nk nl"><strong class="nc ja"># Passing a list of column names</strong><br/>print(df[["B", "A"]])</span><span id="cd02" class="nh lf iq nc b gy om nj l nk nl"><em class="oq">#Output<br/>   B   A<br/>0  2  1<br/>1  3  2<br/>&lt;class 'pandas.core.frame.DataFrame'&gt;</em></span></pre><p id="1c7c" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">有时，您会希望按某个变量对数据进行分组，并对其余数据执行聚合(平均值、总和、计数等)。).这可以通过使用<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html#pandas-dataframe-groupby" rel="noopener ugc nofollow" target="_blank">groupby()</a></code>方法来实现。<code class="fe mz na nb nc b">groupby()</code>的基本语法是这样的:</p><p id="8b75" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated"><code class="fe mz na nb nc b">df.groupby(&lt;Column Name to group by&gt;).&lt;aggregation function&gt;</code></p><p id="2f62" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">我强烈推荐阅读相关文档，<code class="fe mz na nb nc b">groupby()</code>是熊猫经常使用的方法，也是我最喜欢使用的方法之一。下面的代码示例更详细地说明了如何使用它。</p><h2 id="76ed" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">柱状图</h2><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="330c" class="nh lf iq nc b gy ni nj l nk nl">df["JobsRetained"].plot(<br/>    kind="hist", <br/>    title="Frequency of JobsRetained",<br/>    bins=30,<br/>    alpha=0.3 <strong class="nc ja">#adjusts the transperancy</strong><br/>)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pl"><img src="../Images/67ff00cebea58d0aa0da70d7679792d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MWDiHQQadJJgQk87uVm7IQ.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片由 Mikio Harman 提供</p></figure><p id="0aad" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">直方图显示了装箱值的出现频率。</p><p id="9428" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">当查看“JobsRetained”列时，我们看到数据中可能存在异常值。我们希望看到正态分布，但显然，从 x 轴上看，单个企业可以保留的工作岗位数量在 0-500 之间。这个直方图告诉我们，我们的数据是右偏的，这意味着我们的大部分数据值出现在 0-100 个保留的工作之间。</p><h2 id="6df0" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">箱线图</h2><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="7135" class="nh lf iq nc b gy ni nj l nk nl">df["JobsRetained"].plot(<br/>    kind="box",<br/>    vert=False, <strong class="nc ja">#makes the box plot horizontal</strong><br/>    title="Distribution of JobsRetaimed"<br/>);</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pl"><img src="../Images/c4d0667b03fc946ed8394502190601c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rBD8lZnBbSIiaX0I-ghtjg.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片由 Mikio Harman 提供</p></figure><p id="5b06" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">箱线图向我们更精确地展示了连续数据的分布。图表上的方框代表从第 25 个百分位数到第 75 个百分位数的四分位数范围，红线代表中位数。离开盒子的线被称为须，从一个须的末端到另一个须的末端的距离代表 99.3%的数据。另外 0.7%显示在胡须外。</p><p id="eddc" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">在我们的例子中，异常值看起来就像是紧密排列在一起的数据点的黑色粗线。箱线图看起来与直方图相似，因为它也被推到了图表的左侧。我们希望看到这一点，因为我们的直方图已经显示，大多数值都在 0-100 个保留的工作岗位之间。</p><h2 id="86e4" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">条形图</h2><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="ed05" class="nh lf iq nc b gy ni nj l nk nl">df["LoanRange"].value_counts(normalize=True).plot(<br/>    kind="barh", <br/>    title="Normazlized Loan Distribution",<br/>    legend=True,<br/>    alpha=0.3<br/>)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pl"><img src="../Images/2104d824f15153578a9255dd99e3c8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*12flxey8m46Fozkt58fc_w.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片由 Mikio Harman 提供</p></figure><p id="bebb" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">条形图有助于可视化离散变量的分布。在我们的例子中，我们在“LoanRange”列中绘制了五个不同的值。这些值代表每个批准属于哪一类贷款。</p><p id="739a" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">x 轴是归一化的，这意味着它显示了每个离散值与整个数据集相比所占的比例。看起来最常批准的贷款在 0-350，000 美元之间，占总数据的 50-60%。数据需要在绘图前汇总，这就是为什么在代码中使用了<code class="fe mz na nb nc b"><a class="ae mx" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.value_counts.html#pandas-series-value-counts" rel="noopener ugc nofollow" target="_blank">value_counts()</a></code>。</p><h2 id="022c" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">平均值和中位数</h2><pre class="kp kq kr ks gt nd nc ne nf aw ng bi"><span id="54e6" class="nh lf iq nc b gy ni nj l nk nl">df.groupby("State")["JobsRetained"].mean().sort_values().plot(<br/>    kind="bar",<br/>    title = "Mean Jobs Retained In Each State",<br/>    alpha = 0.3,<br/>    legend=True,<br/>)</span><span id="d2aa" class="nh lf iq nc b gy om nj l nk nl">df.groupby("State")["JobsRetained"].median().sort_values().plot(<br/>    kind="line",<br/>    title = "Mean Jobs Retained In Each State",<br/>    legend=True,<br/>    color="red",<br/>    rot=90,<br/>    alpha=.8,<br/>    figsize=(12,5) <strong class="nc ja">#determines the size</strong> <br/>)<br/>plt.ylabel("Jobs Retained") <br/>plt.legend(["Median", "Mean"])</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pm"><img src="../Images/55ad710c81874a36b81ee4bef4c9e278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Jim-RPmwhjbXInnlmKKyw.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片由 Mikio Harman 提供</p></figure><p id="4001" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">只要具有相同的 x 轴，就可以在彼此的顶部绘制多个图。您还可以在代码之外使用一些 matplotlib 语法来微调图表的外观。</p><p id="73ee" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">在这里，我们看到数据中每个州的“保留的工作”的中值和平均值相互叠加。由于数据的偏斜，预计会看到一个非常高的平均值。中位数只是整个数据集中的中间数字。由于保留了 0-100 个工作岗位之间的大量数据，以及保留了约 0-500 个工作岗位的数据范围，因此中值远低于平均值是有意义的。</p><h2 id="5875" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated">熊猫简介</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pn"><img src="../Images/bdbe5bc8a593c9d09df12be8ca8cc3c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*2XvbWqz38M9Aliub-JwYnA.png"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">一个为 Pandas 中的任何数据集自动生成 EDA 的包。</p></figure><p id="a815" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">没有提到<a class="ae mx" href="https://pandas-profiling.github.io/pandas-profiling/docs/master/index.html" rel="noopener ugc nofollow" target="_blank">熊猫简介</a>，关于熊猫的 EDA 讨论就不完整。Pandas Profiling 将自动执行各种 EDA 技术，并创建一个交互式报告。它非常容易上手，我已经包含了一个交互式报告，可以使用相同的数据来查看它的运行情况。<strong class="ly ja">参见互动报道</strong> <a class="ae mx" href="https://nbviewer.jupyter.org/github/mpHarm88/projects/blob/master/pandas/dataframes4.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ly ja">此处</strong> </a> <strong class="ly ja">。</strong></p><h2 id="92f7" class="nh lf iq bd lg oc od dn lk oe of dp lo mf og oh lq mj oi oj ls mn ok ol lu iw bi translated"><strong class="ak">感谢阅读🎉</strong></h2><p id="bd7c" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">我希望你现在能够自己完成一些简单的 EDA！</p><p id="42a3" class="pw-post-body-paragraph lw lx iq ly b lz ms ka mb mc mt kd me mf mu mh mi mj mv ml mm mn mw mp mq mr ij bi translated">在这里找到这个博客的代码<a class="ae mx" href="https://github.com/mpHarm88/projects/tree/master/pandas" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>