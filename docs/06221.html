<html>
<head>
<title>Getting Started with Deno: Nodejs Alternative</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno: Nodejs 替代方案入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-with-deno-nodejs-alternative-c06f820f259b?source=collection_archive---------28-----------------------#2020-05-19">https://towardsdatascience.com/getting-started-with-deno-nodejs-alternative-c06f820f259b?source=collection_archive---------28-----------------------#2020-05-19</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="7505" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="7ab9" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">V8 和 Rust 上的安全类型脚本运行时</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/2238d90c5e7802245f4e6d202fbfd235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6cYQp_izuGhncRGU"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">福斯托·加西亚在<a class="ae li" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="174d" class="lo lp iu lk b gz lq lr l ls lt"><strong class="lk je">Table of Contents</strong></span><span id="2e91" class="lo lp iu lk b gz lu lr l ls lt"><a class="ae li" href="#91be" rel="noopener ugc nofollow"><strong class="lk je">Introduction</strong></a></span><span id="a97a" class="lo lp iu lk b gz lu lr l ls lt">🦕 <a class="ae li" href="#288e" rel="noopener ugc nofollow">Installation</a><br/>🦕 <a class="ae li" href="#3da7" rel="noopener ugc nofollow">Deno Built-in tools</a><br/>🦕 <a class="ae li" href="#c6ce" rel="noopener ugc nofollow">ES Modules and No Package Manager</a><br/>🦕 <a class="ae li" href="#3397" rel="noopener ugc nofollow">Deno Standard library</a><br/>🦕 <a class="ae li" href="#c773" rel="noopener ugc nofollow">Security with Deno sandbox</a><br/>🦕 <a class="ae li" href="#caca" rel="noopener ugc nofollow">Web-API compatible</a><br/>🦕 <a class="ae li" href="#7de5" rel="noopener ugc nofollow">TypeScript</a><br/>🦕 <a class="ae li" href="#a4f1" rel="noopener ugc nofollow">Import maps</a><br/>🦕 <a class="ae li" href="#b83a" rel="noopener ugc nofollow">Test</a><br/>🦕 <a class="ae li" href="#b4f7" rel="noopener ugc nofollow">Third-party modules</a><br/>🦕 <a class="ae li" href="#627c" rel="noopener ugc nofollow">HTTP request</a><br/>🦕 <a class="ae li" href="#44bb" rel="noopener ugc nofollow">Limitation</a></span><span id="953c" class="lo lp iu lk b gz lu lr l ls lt"><a class="ae li" href="#945c" rel="noopener ugc nofollow"><strong class="lk je">Conclusion</strong></a></span></pre><h1 id="91be" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">介绍</h1><p id="b98e" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">2018 年 6 月，Node.js 的最初开发者 Ryan Dahl 在 JSConf EU 发表了演讲<a class="ae li" href="https://www.youtube.com/watch?v=M3BM9TB-8yA&amp;feature=youtu.be" rel="noopener ugc nofollow" target="_blank">“关于 Node.js 我后悔的 10 件事”</a>。下半年，他公布了自己的新项目 Deno。</p><p id="5e86" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">他后悔在创建 Node.js 时做了 10 件本可以做得更好的事情。这促使他创建了 Nodejs 替代方案。</p><p id="a334" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">2020 年 5 月 13 日，<a class="ae li" href="https://deno.land/v1" rel="noopener ugc nofollow" target="_blank"> Ryan Dahl，Bert Belder，Bartek iwan czuk</a>发布 Deno 1.0。开发者可以期待定期的稳定发布。</p><p id="8b6b" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 是一个使用 JavaScript 和 TypeScript 编写应用程序的新平台。它基于 V8 JavaScript 引擎和 Rust。</p><p id="eebb" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 与系统的最低级别绑定层与承诺(称为<code class="fe nn no np lk b">ops</code>)绑定在一起。Deno 在默认情况下是安全的，提供了一流的类型脚本支持，内置了依赖检查器之类的工具，并支持第三方模块，如<code class="fe nn no np lk b">lodash</code>。</p><p id="6426" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在本文中，我将探讨 Deno 的一些特性。</p><p id="8032" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">听起来有趣吗？请继续阅读。</p><h1 id="288e" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">装置</h1><p id="989f" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 可以在 macOS、Linux 和 Windows 上运行。Deno 是一个单一的二进制可执行文件，它没有外部依赖性。</p><p id="db2b" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">查看所有<a class="ae li" href="https://github.com/denoland/deno/blob/master/docs/getting_started/installation.md" rel="noopener ugc nofollow" target="_blank">安装</a>。</p><p id="f8e7" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">对于自制软件用户:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="8aa4" class="lo lp iu lk b gz lq lr l ls lt">$ brew install deno<br/>...<br/>Bash completion has been installed to:<br/>  /usr/local/etc/bash_completion.d</span><span id="f251" class="lo lp iu lk b gz lu lr l ls lt">zsh completions have been installed to:<br/>  /usr/local/share/zsh/site-functions<br/>==&gt; Summary<br/>🍺  /usr/local/Cellar/deno/1.0.0: 9 files, 41.7MB</span></pre><p id="6506" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">安装后，您可以检查版本和帮助。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="05b0" class="lo lp iu lk b gz lq lr l ls lt">$ deno --version<br/>deno 1.0.0<br/>v8 8.4.300<br/>typescript 3.9.2<br/>$ deno help<br/>...<br/>OPTIONS:<br/>    -h, --help                     Prints help information<br/>    -L, --log-level &lt;log-level&gt;    Set log level [possible values: debug, info]<br/>    -q, --quiet                    Suppress diagnostic output<br/>    -V, --version                  Prints version information<br/><br/>SUBCOMMANDS:<br/>    bundle         Bundle module and dependencies into single file<br/>    cache          Cache the dependencies<br/>    completions    Generate shell completions<br/>    doc            Show documentation for a module<br/>    eval           Eval script<br/>    fmt            Format source files<br/>    help           Prints this message or the help of the given subcommand(s)<br/>    info           Show info about cache or info related to source file<br/>    install        Install script as an executable<br/>    repl           Read Eval Print Loop<br/>    run            Run a program given a filename or url to the module<br/>    test           Run tests<br/>    types          Print runtime TypeScript declarations<br/>    upgrade        Upgrade deno executable to given version<br/><br/>ENVIRONMENT VARIABLES:<br/>    DENO_DIR             Set deno's base directory (defaults to $HOME/.deno)<br/>    DENO_INSTALL_ROOT    Set deno install's output directory<br/>                         (defaults to $HOME/.deno/bin)<br/>    NO_COLOR             Set to disable color<br/>    HTTP_PROXY           Proxy address for HTTP requests<br/>                         (module downloads, fetch)<br/>    HTTPS_PROXY          Same but for HTTPS</span></pre><h1 id="3da7" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">Deno 内置工具</h1><p id="dc5c" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 提供了一套内置工具来改善开发人员的体验。</p><ul class=""><li id="0667" class="nq nr iu mo b mp ni ms nj mv ns mz nt nd nu nh nv nw nx ny bi translated">运行测试:<code class="fe nn no np lk b">deno test</code></li><li id="aeaa" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated">格式化源文件:<code class="fe nn no np lk b">deno fmt</code></li><li id="4863" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated">邦德勒:<code class="fe nn no np lk b">deno bundle</code></li><li id="ca81" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated">调试<code class="fe nn no np lk b">deno --inspect &lt;file&gt;</code></li><li id="1429" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated">棉绒(即将推出)<code class="fe nn no np lk b">deno lint</code></li></ul><p id="bd57" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated"><code class="fe nn no np lk b">deno lint</code>是提高代码质量的 TypeScript 类型检查。它还没有发布。</p><p id="b969" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">您可以使用<code class="fe nn no np lk b">deno fmt</code>来格式化文件。(当我保存一个文件时，VS 代码为我做了这件事。)</p><h1 id="c6ce" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">ES 模块和无软件包管理器</h1><p id="5a2a" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">使用 Deno 时，您注意到的第一件事是 Deno 使用 es 模块作为默认模块系统，而 Node.js 使用 CommonJS。并且使用 URL 加载外部依赖项，</p><p id="2a20" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 Node.js 中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="8484" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 Deno:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="9cb7" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 是网络兼容的，你可以从一个网址运行<code class="fe nn no np lk b">deno</code>。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="9a16" class="lo lp iu lk b gz lq lr l ls lt">$ deno run https://deno.land/std/examples/welcome.ts<br/>Download https://deno.land/std/examples/welcome.ts<br/>Warning Implicitly using master branch https://deno.land/std/examples/welcome.ts<br/>Compile https://deno.land/std/examples/welcome.ts<br/>Welcome to Deno 🦕</span></pre><p id="10bd" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">你用<code class="fe nn no np lk b">deno run &lt;URL/file&gt;</code>运行一个程序。你可以找到更多关于<code class="fe nn no np lk b">deno run --help</code>的帮助。</p><p id="b447" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">或者你可以在 REPL 的<code class="fe nn no np lk b">deno</code>经营。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="63b1" class="lo lp iu lk b gz lq lr l ls lt">$ deno<br/>Deno 1.0.0<br/>exit using ctrl+d or close()<br/>&gt; console.log("Welcome to Deno 🦕");<br/>Welcome to Deno 🦕</span></pre><p id="679f" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">因为您可以从 URL 导入库，所以您可以在互联网上的任何地方托管模块。不需要 package.json 文件和依赖列表。没有像 npm 那样的集中注册中心。</p><h1 id="3397" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">Deno 标准库</h1><p id="b552" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 在 https://deno.land/std 提供了一个标准库。</p><p id="bd87" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">下面使用来自标准库的<code class="fe nn no np lk b">datetime</code>库。</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="5061" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在您的终端中:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="0ca6" class="lo lp iu lk b gz lq lr l ls lt">$ deno run datetime.ts<br/>Compile file:///Users/shinokada/Deno/demo/datetime.ts<br/>2019-01-19T15:00:00.000Z</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj og"><img src="../Images/bc20031c0ff52774c61d4d8bf6a24bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*zwR8UWhg5prMUFLVf7msUw.png"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated">德诺标准图书馆</p></figure><h1 id="c773" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">Deno 沙盒的安全性</h1><p id="d043" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 在沙箱中执行代码，这意味着运行时无法访问网络、文件系统和环境。</p><p id="a4a2" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 提供权限白名单。对于文件系统，可以使用<code class="fe nn no np lk b">--allow-read</code>和<code class="fe nn no np lk b">--allow-write</code>。您可以使用<code class="fe nn no np lk b">--allow-net</code>标志来访问主机/url。因为。env 文件，可以将<code class="fe nn no np lk b">--allow-env</code>与<a class="ae li" href="https://deno.land/x/dotenv/load.ts" rel="noopener ugc nofollow" target="_blank"> load.ts </a>一起使用。</p><p id="b831" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">创建 demo.js:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="b134" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">您需要<code class="fe nn no np lk b">--allow-net</code>标志来运行 demo.js:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="4199" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --allow-net demo.js<br/>http://localhost:8000/</span></pre><h1 id="caca" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">Web-API 兼容</h1><p id="78fc" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">网络浏览器使用<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API" rel="noopener ugc nofollow" target="_blank"> Web-API </a>。Deno <a class="ae li" href="https://doc.deno.land/https/raw.githubusercontent.com/denoland/deno/master/cli/js/lib.deno.shared_globals.d.ts" rel="noopener ugc nofollow" target="_blank">为</a>提供了一些 Web-API。例如，在 Nodejs 中需要<code class="fe nn no np lk b">fetch</code>。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="2f4a" class="lo lp iu lk b gz lq lr l ls lt">const fetch = require('node-fetch')<br/><br/>fetch('<a class="ae li" href="https://jsonplaceholder.typicode.com/posts/1" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/posts/</a>1')<br/>  .then(res =&gt; res.json())<br/>  .then(data =&gt; console.log(data) )</span></pre><p id="4c0e" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 Deno 中，可以使用<code class="fe nn no np lk b">fetch</code>:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="5b33" class="lo lp iu lk b gz lq lr l ls lt"># fetch.ts<br/>const res = await fetch("<a class="ae li" href="https://jsonplaceholder.typicode.com/posts/1" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/posts/1</a>");<br/>const json = res.json();<br/>const data = await json;<br/>console.log(data)</span></pre><p id="9b8b" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">然后在您的终端中:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="5638" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --allow-net fetch.ts<br/>{<br/>    userId: 1,<br/>    id: 1,<br/>    title: "sunt aut facere repellat provident occaecati excepturi   optio reprehenderit",<br/>    body: "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas..."<br/>}</span></pre><h1 id="7de5" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">以打字打的文件</h1><p id="bc0f" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 支持 TypeScript，不需要额外的工具。你可以通过<code class="fe nn no np lk b">deno types | less</code>看到 Deno 的 TypeScript 声明或者看到<a class="ae li" href="https://deno.land/typedoc/index.html" rel="noopener ugc nofollow" target="_blank">https://deno.land/typedoc/index.html</a>。</p><p id="b4bf" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated"><code class="fe nn no np lk b">deno types</code>输出包含三个库。</p><ul class=""><li id="5dc8" class="nq nr iu mo b mp ni ms nj mv ns mz nt nd nu nh nv nw nx ny bi translated"><a class="ae li" href="https://github.com/denoland/deno/blob/master/cli/js/lib.deno.ns.d.ts" rel="noopener ugc nofollow" target="_blank"> lib.deno.ns.d.ts </a></li><li id="9f1f" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated"><a class="ae li" href="https://github.com/denoland/deno/blob/master/cli/js/lib.deno.shared_globals.d.ts" rel="noopener ugc nofollow" target="_blank">lib . deno . shared _ globals . d . ts</a></li><li id="cdc5" class="nq nr iu mo b mp nz ms oa mv ob mz oc nd od nh nv nw nx ny bi translated"><a class="ae li" href="https://github.com/denoland/deno/blob/master/cli/js/lib.deno.window.d.ts" rel="noopener ugc nofollow" target="_blank"> lib.deno.window.d.ts </a></li></ul><h1 id="a4f1" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated"><a class="ae li" href="https://deno.land/manual/linking_to_external_code/import_maps" rel="noopener ugc nofollow" target="_blank">导入地图</a></h1><p id="06f3" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">尽管在撰写本文时它仍然是一个不稳定的特性，Deno 支持<a class="ae li" href="https://github.com/WICG/import-maps" rel="noopener ugc nofollow" target="_blank">导入映射</a>。<code class="fe nn no np lk b">Import maps</code>控制 JavaScript 导入的行为。</p><p id="7cf1" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">例如，在 import_map.json 中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="43fe" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 hello_server.ts 中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="87b7" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在您的终端中:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="714b" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --allow-net --importmap=import_map.json --unstable hello_server.ts</span></pre><p id="9f7d" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">然后访问<a class="ae li" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>查看输出。</p><h1 id="b83a" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">试验</h1><p id="722a" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">您可以使用 Deno 的内置测试运行器来测试 Javascript 或 TypeScript。使用 Deno 的标准库<a class="ae li" href="https://deno.land/std/testing/asserts.ts" rel="noopener ugc nofollow" target="_blank">测试/断言</a>，可以使用<code class="fe nn no np lk b">equal</code>、<code class="fe nn no np lk b">assert</code>、<code class="fe nn no np lk b">assertEquals</code>、<code class="fe nn no np lk b">assertNotEquals</code>、<code class="fe nn no np lk b">assertStrictEq</code>、<code class="fe nn no np lk b">assertStrContains</code>、<code class="fe nn no np lk b">assertArrayContains</code>、<code class="fe nn no np lk b">assertMatch</code>等函数。</p><p id="0cb4" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 mytest.ts 中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="db25" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在终端中:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="8b98" class="lo lp iu lk b gz lq lr l ls lt">$ deno test mytest.ts                                                        <br/>Compile file:///Users/shinokada/Deno/demo/.deno.test.ts<br/>running 1 tests<br/>test title ... ok (5ms)</span><span id="5cf6" class="lo lp iu lk b gz lu lr l ls lt">test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out (6ms)</span></pre><h1 id="b4f7" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">第三方模块</h1><p id="8d99" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">你可以在 https://deno.land/x/找到在 Deno 上工作的第三方模块。</p><p id="593f" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 上有许多现成的模块，<code class="fe nn no np lk b">lodash</code>就是其中之一:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj oh"><img src="../Images/51c429587926739d5d3212e9aa6ab383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gL0QeTuxmLuDlASpfFrC1g.gif"/></div></div></figure><p id="c54f" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">您可以搜索不同的类别。还有受 Express、Koa、哈比神等启发的 Deno 中间件和 web 框架。</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj oi"><img src="../Images/bea474d8c4385702123835d91e33f863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-xqHpvIrsqOA5zidnfoKCg.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">第三方模块中的中间件</p></figure><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj oj"><img src="../Images/2aa05c3dc469ed18452eb1cd02a1d889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9FfB_nxpVCqFBBjrgtRv9w.png"/></div></div><p class="le lf gk gi gj lg lh bd b be z dk translated">第三方模块中的应用程序</p></figure><h2 id="74a7" class="lo lp iu bd lw ok ol dn ma om on dp me mv oo op mg mz oq or mi nd os ot mk ja bi translated">。包封/包围（动词 envelop 的简写）</h2><p id="2b42" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno <a class="ae li" href="https://deno.land/typedoc/index.html#env-1" rel="noopener ugc nofollow" target="_blank">使用<code class="fe nn no np lk b">Deno.env.set/Deno.env.get</code>设置/获取</a>环境变量的值。</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="22cb" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">你需要使用<code class="fe nn no np lk b">--allow-env</code>标志来运行这个。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="06ab" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --allow-env denoenv.ts<br/>8888</span></pre><p id="81a8" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">使用。env 是一种常见的做法。可以使用第三方模块<code class="fe nn no np lk b"><a class="ae li" href="https://deno.land/x/dotenv" rel="noopener ugc nofollow" target="_blank">dotenv</a></code>。</p><p id="e7ba" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在<code class="fe nn no np lk b">.env</code>文件中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="9f5c" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在 app.ts 文件中:</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="610d" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">你需要<code class="fe nn no np lk b">--allow-read</code>标志来读取<code class="fe nn no np lk b">.env</code>文件。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="d315" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --allow-read app.ts<br/>Compile file:///Users/shinokada/Deno/demo/app.ts<br/>8777</span></pre><h1 id="627c" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">HTTP 请求</h1><p id="612a" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">在 Deno 中，可以使用 Web API <a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank"> fetch </a>进行 HTTP 调用。在下面的代码中，您将第一个参数存储到<code class="fe nn no np lk b">const url</code>，获取<code class="fe nn no np lk b">url</code>，然后将响应解析为一个<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" rel="noopener ugc nofollow" target="_blank"> ArrayBuffer </a>，等待响应，将其转换为一个<a class="ae li" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" rel="noopener ugc nofollow" target="_blank"> Uint8Array </a>并存储在变量体中。</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="4897" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在终端中:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="37e6" class="lo lp iu lk b gz lq lr l ls lt">deno run --allow-net=example.com https://deno.land/std/examples/curl.ts <a class="ae li" href="https://example.com" rel="noopener ugc nofollow" target="_blank">https://example.com</a></span></pre><p id="5c1c" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">产出:</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="fce0" class="lo lp iu lk b gz lq lr l ls lt">Download https://deno.land/std/examples/curl.ts<br/>Warning Implicitly using master branch https://deno.land/std/examples/curl.ts<br/>Compile https://deno.land/std/examples/curl.ts<br/>&lt;!doctype html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>    &lt;title&gt;Example Domain&lt;/title&gt;</span><span id="159b" class="lo lp iu lk b gz lu lr l ls lt">&lt;meta charset="utf-8" /&gt;<br/>    ...</span></pre><h1 id="44bb" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated"><a class="ae li" href="https://deno.land/v1#limitations" rel="noopener ugc nofollow" target="_blank">由于正在进行的进度限制</a></h1><p id="66c5" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">由于 Deno 仍处于早期阶段，因此存在一些局限性。一些标准库在运行时需要<code class="fe nn no np lk b">--unstable</code>标志。</p><h2 id="e061" class="lo lp iu bd lw ok ol dn ma om on dp me mv oo op mg mz oq or mi nd os ot mk ja bi translated">不稳定标志</h2><p id="e5ee" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated"><a class="ae li" href="https://deno.land/std/node/" rel="noopener ugc nofollow" target="_blank">节点模块</a>是<a class="ae li" href="https://nodejs.org/docs/latest-v12.x/api/" rel="noopener ugc nofollow" target="_blank"> NodeJS 标准库</a>的一层。</p><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="dc0e" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">在撰写本文时，您仍然需要使用<code class="fe nn no np lk b">--unstable</code>标志来处理 node。</p><pre class="kt ku kv kw gu lj lk ll lm aw ln bi"><span id="1df4" class="lo lp iu lk b gz lq lr l ls lt">$ deno run --unstable path.ts<br/>Compile file:///Users/shinokada/Deno/demo/path.ts<br/>quux.html</span></pre><h1 id="945c" class="lv lp iu bd lw lx ly lz ma mb mc md me kj mf kk mg km mh kn mi kp mj kq mk ml bi translated">结论</h1><p id="1af8" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">Deno 的目标不是取代 Node.js，而是提供一种替代方案。观察 Node.js 如何以不同的方式实现是很棒的。</p><p id="aca6" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">Deno 的成功取决于许多因素，特性、稳定性、性能、社区、学习曲线、文档、工具等。</p><p id="aa15" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated">尽管 v1.0 刚刚发布，但第三方模块开发者社区正在迅速发展，这对 Deno 来说无疑是一个积极的信号。你觉得瑞安·达尔的最新作品怎么样？</p></div><div class="ab cl ou ov hy ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="in io ip iq ir"><p id="4bce" class="pw-post-body-paragraph mm mn iu mo b mp ni ke mr ms nj kh mu mv nk mx my mz nl nb nc nd nm nf ng nh in bi translated"><strong class="mo je">通过</strong> <a class="ae li" href="https://blog.codewithshin.com/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="mo je">成为</strong> </a> <strong class="mo je">会员，可以完全访问媒体上的每一个故事。</strong></p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj pb"><img src="../Images/0be3ee559fee844cb75615290e4a8b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*DjTM9iFtVc2wlcWcOms7VQ.png"/></div><p class="le lf gk gi gj lg lh bd b be z dk translated"><a class="ae li" href="https://blog.codewithshin.com/subscribe" rel="noopener ugc nofollow" target="_blank">https://blog.codewithshin.com/subscribe</a></p></figure></div><div class="ab cl ou ov hy ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="in io ip iq ir"><h1 id="51ef" class="lv lp iu bd lw lx pc lz ma mb pd md me kj pe kk mg km pf kn mi kp pg kq mk ml bi translated">资源</h1><p id="fdce" class="pw-post-body-paragraph mm mn iu mo b mp mq ke mr ms mt kh mu mv mw mx my mz na nb nc nd ne nf ng nh in bi translated">🦕<a class="ae li" href="https://github.com/denoland/deno" rel="noopener ugc nofollow" target="_blank"> Deno Github 回购</a> <br/>🦕<a class="ae li" href="https://deno.land/manual" rel="noopener ugc nofollow" target="_blank">德诺手动</a>T5】🦕<a class="ae li" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank"> Deno 标准库</a> <br/>🦕<a class="ae li" href="https://deno.land/std/node" rel="noopener ugc nofollow" target="_blank">节点标准库</a> <br/>🦕<a class="ae li" href="https://deno.land/x" rel="noopener ugc nofollow" target="_blank"> Deno 第三方模块</a>T14】🦕<a class="ae li" href="https://doc.deno.land/" rel="noopener ugc nofollow" target="_blank">Deno doc</a>T17】🦕<a class="ae li" href="https://github.com/denoland/vscode_deno" rel="noopener ugc nofollow" target="_blank"> Visual Studio 代码 Deno 扩展</a></p></div></div>    
</body>
</html>