<html>
<head>
<title>Scalable Machine Learning with Dask on Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于谷歌云的 Dask 可扩展机器学习</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scalable-machine-learning-with-dask-on-google-cloud-5c72f945e768?source=collection_archive---------27-----------------------#2020-08-12">https://towardsdatascience.com/scalable-machine-learning-with-dask-on-google-cloud-5c72f945e768?source=collection_archive---------27-----------------------#2020-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="febc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Dask 为您的数据科学工具库增添了一大利器，它为您提供了大规模计算的高级并行性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b1e16ff510f219d24f6552ee9a6aeea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQmVGcYmrkaEAHl4JRhQlQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Paul Pasieczny 在 FreeImages.com 拍摄的照片</p></figure><p id="cf89" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> <em class="lu">于 2021 年 11 月 13 日更新，以反映在谷歌云</em> </strong>上设置 Dask 集群的最新步骤</p><p id="2194" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lv translated">许多人对 ask 进行了评估，并将其与其他工具进行了比较，包括 Spark、Ray 和 Vaex。它是与 Numpy、Pandas 和 Scikit-Learn 等其他社区项目合作开发的，绝对是扩展机器学习的一个很好的工具。</p><p id="d738" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，本文的目的不是比较 Dask 的优缺点(为此，您可以参考本文末尾的参考链接)，而是添加到现有的关于 Dask 在云上部署的文档，特别是 Google Cloud。谷歌云为新注册用户提供了免费试用，所以你可以免费试用。</p><h1 id="11e3" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">在 Google Cloud 上部署 Dask 的步骤</h1><p id="ba4a" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">我们首先列出要采取的一般步骤，然后用截图详细说明每个步骤(随意点击每个步骤进行导航)。拥有一个 Google Cloud 帐户是关注本文的唯一前提。</p><ol class=""><li id="4d67" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt nh ni nj nk bi translated"><a class="ae me" href="#a984" rel="noopener ugc nofollow">创建 Kubernetes 集群</a></li><li id="7c3c" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><a class="ae me" href="#5fae" rel="noopener ugc nofollow">设置舵</a></li><li id="8e92" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><a class="ae me" href="#3c4b" rel="noopener ugc nofollow">部署 Dask 进程和 Jupyter </a></li><li id="18dc" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><a class="ae me" href="#fe44" rel="noopener ugc nofollow">连接到 Dask 和 Jupyter </a></li><li id="95b6" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><a class="ae me" href="#2d39" rel="noopener ugc nofollow">配置环境</a></li><li id="a493" class="nc nd it la b lb nl le nm lh nn ll no lp np lt nh ni nj nk bi translated"><a class="ae me" href="#22ec" rel="noopener ugc nofollow">移除你的集群</a></li></ol><h1 id="a984" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.创建 Kubernetes 集群</h1><p id="f0cc" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">我们的第一步是通过谷歌 Kubernetes 引擎(GKE)建立一个 Kubernetes 集群。</p><p id="f892" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">a)登录谷歌云控制台后，启用<a class="ae me" href="https://console.cloud.google.com/apis/api/container.googleapis.com/overview" rel="noopener ugc nofollow" target="_blank"> Kubernetes 引擎 API </a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/6d04fbd524d0703019917aca4b57513f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JflaO_ARx-N9kFDXuSc5qg.png"/></div></div></figure><p id="3ebc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">b)启动谷歌云壳</p><p id="b7f6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该会在控制台页面的右上角看到一个类似于下面红框中按钮的按钮。点击它，会弹出一个终端。这个终端后面的虚拟机预装了各种工具，最重要的是<em class="lu"> kubectl </em>，这是一个控制 Kubernetes 集群的工具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/87ec0fd1a9b5d3ec85574dd6f3c0b789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*hUnvR6Jp1nezINiELhTl6Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">点击红框中的按钮，启动<em class="ns">谷歌云外壳</em></p></figure><p id="5826" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">c)创建一个受管理的 Kubernetes 集群</p><p id="6d6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 Google Cloud Shell 中键入以下内容，创建一个托管的 Kubernetes 集群，将<em class="lu"> &lt; CLUSTERNAME &gt; </em>替换为以后可以引用的名称。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="2ee0" class="ny mg it nu b gy nz oa l ob oc">gcloud container clusters create \<br/>  --machine-type n1-standard-4 \<br/>  --num-nodes <strong class="nu iu">2</strong> \<br/>  --zone us-central1-a \<br/>  --cluster-version latest \<br/>  &lt;CLUSTERNAME&gt;</span></pre><p id="f0e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面代码中参数的简要描述:</p><ul class=""><li id="551e" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated"><em class="lu"> machine-type </em>指定每个节点的 CPU 和 RAM 的数量。您可以从这个<a class="ae me" href="https://cloud.google.com/compute/docs/machine-types#machine_type_comparison" rel="noopener ugc nofollow" target="_blank">列表</a>中选择其他类型。</li><li id="d168" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated"><em class="lu"> num-nodes </em>确定要旋转的节点数量。</li><li id="85a9" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated"><em class="lu">区域</em>是指您的集群所在的数据中心区域。你可以选择<a class="ae me" href="https://cloud.google.com/compute/docs/regions-zones/#available" rel="noopener ugc nofollow" target="_blank">在离你的用户不太远的地方</a>。</li></ul><p id="526b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您的集群正在初始化时，您还可以在<a class="ae me" href="https://console.cloud.google.com/kubernetes" rel="noopener ugc nofollow" target="_blank"> Kubernetes 集群</a>页面上看到它正在旋转:</p><ul class=""><li id="5883" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">在控制台页面顶部的搜索栏中键入<em class="lu"> kubernetes clusters </em>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/d17d5a443d7508ad899f7ca4d6785bd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*6Ie7fIGoVXA2rACRStnw2A.png"/></div></figure><ul class=""><li id="b83e" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">从下拉列表中选择 Kubernetes 集群。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/e926626ea0343eda9dc3f62cc21585b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*xmQSryUr05hUzXkJ_NvNtg.png"/></div></figure><ul class=""><li id="665e" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">可以看到指定了<em class="lu"> &lt; CLUSTERNAME &gt; </em>的集群正在旋转。等到绿色勾号出现，集群就准备好了。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/e61bbe7bf0c588e62d88672f9a8888e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*V8C1zVGfpQejMCvJaUUIZQ.png"/></div></figure><p id="fd1d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者，您也可以通过运行以下命令来验证您的群集是否已初始化:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="e4bc" class="ny mg it nu b gy nz oa l ob oc">kubectl get node</span></pre><p id="9c0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">部署集群时，您应该看到状态为<em class="lu">就绪</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/6bc6964756ea0bf74db7730269ec4309.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*1e2t1z1-5GwHV8KQCvTMJw.png"/></div></figure><p id="4306" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">d)向群集提供帐户权限</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="d51a" class="ny mg it nu b gy nz oa l ob oc">kubectl create clusterrolebinding cluster-admin-binding \<br/>  --clusterrole=cluster-admin \<br/>  --user=&lt;GOOGLE-EMAIL-ACCOUNT&gt;</span></pre><p id="aa87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将<em class="lu">&lt;GOOGLE-EMAIL-ACCOUNT&gt;</em>替换为您用于登录 Google Cloud 的 GOOGLE 帐户的电子邮件。</p><h1 id="5fae" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">2.设置舵</h1><p id="b525" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">我们将使用 Helm 在 Kubernetes 集群上安装、升级和管理应用程序。</p><p id="e889" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">a)通过在 Google Cloud Shell 中运行安装程序脚本来安装 Helm</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="eef9" class="ny mg it nu b gy nz oa l ob oc">curl <a class="ae me" href="https://raw.githubusercontent.com/helm/helm/HEAD/scripts/get-helm-3" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/helm/helm/HEAD/scripts/get-helm-3</a> | bash</span></pre><p id="b659" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">b)验证舵安装正确</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="a311" class="ny mg it nu b gy nz oa l ob oc">helm version</span></pre><p id="b6d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">确保版本至少为 3.5。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/5c7faffff884849d3e381ce8e6a326b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvPRNULpeBoCUnL_e0PvmA.png"/></div></div></figure><h1 id="3c4b" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">3.部署 Dask 进程和 Jupyter</h1><p id="0d36" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">我们就快成功了……在我们开始运行机器学习代码之前，还有几个步骤。</p><p id="5654" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">a)使用 Dask 的 Helm 图表库添加和更新包信息</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="895a" class="ny mg it nu b gy nz oa l ob oc">helm repo add dask <a class="ae me" href="https://helm.dask.org/" rel="noopener ugc nofollow" target="_blank">https://helm.dask.org/</a><br/>helm repo update</span></pre><p id="a3e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">b)在 Kubernetes 集群上启动 Dask</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="e26c" class="ny mg it nu b gy nz oa l ob oc">helm install my-dask dask/dask --set scheduler.serviceType=LoadBalancer --set jupyter.serviceType=LoadBalancer</span></pre><p id="167b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，这会部署一个 dask 调度器、三个 dask 工作器和一个 Jupyter 服务器。</p><p id="f468" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据您的使用情况，您可以修改上述代码中的选项:</p><ul class=""><li id="9986" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated"><em class="lu"> my-dask </em>用于引用您的 dask 设置，您可以更改为其他名称。</li><li id="20f4" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated">— set 会将参数<em class="lu">调度器.服务类型</em>和<em class="lu">调度器.服务类型</em>设置为值<em class="lu">负载平衡器</em>。这对于我们使用外部 IP 地址来访问 Dask dashboard 和 Jupyter 服务器是必要的。如果没有此选项，默认情况下将只设置集群 IP，如本<a class="ae me" href="https://stackoverflow.com/questions/62324275/external-ip-not-exposed-helm-dask" rel="noopener ugc nofollow" target="_blank">堆栈溢出帖子</a>中所述。</li></ul><h1 id="fe44" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">4.连接到 Dask 和 Jupyter</h1><p id="3c05" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">在上一步中，我们在集群上启动了 Dask。但是，部署可能需要一分钟的时间，过一会儿您可以用 kubectl 检查状态:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="c134" class="ny mg it nu b gy nz oa l ob oc">kubectl get services</span></pre><p id="9d4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦准备就绪，外部 IPs 将为您的 Jupyter 服务器(<em class="lu"> my-dask-jupyter </em>)和 dask 调度程序(<em class="lu"> my-dask-scheduler </em>)显示。如果您在<em class="lu"> EXTERNAL-IP </em>下看到<em class="lu"> &lt;挂起&gt; </em>，请在再次运行上述代码之前多等一会儿。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/5d32d88ccae210925b348ecc0c1cfed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*zTsBvnzCcmntun1v5C5vEQ.png"/></div></figure><p id="ef0f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的网络浏览器中输入<em class="lu"> my-dask-jupyter </em>和<em class="lu"> my-dask-scheduler </em>的外部 IP 地址将允许您分别访问您的 jupyter 服务器和 dask 仪表板。</p><p id="9338" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于 Jupyter 服务器，您可以使用默认密码<em class="lu"> dask </em>登录。要更改此密码，请参见下一节。</p><p id="55bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">恭喜你！您现在可以开始运行您的 Dask 代码:)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/baa23c7c626b7aba0d9c18ef82de1662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iWUVETO8irhFmwlUaRbEIg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">单击笔记本下的按钮开始:)</p></figure><p id="81b0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:如果您在访问 Jupyter 时遇到 404 错误，只需点击顶部的 Jupyter 徽标即可进入登录页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/df73b10ab61248e75d3adb932559c45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*u4M352gZl4CLLel6AOpzbw.png"/></div></figure><h1 id="2d39" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">5.配置环境</h1><p id="b08d" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">在步骤 4 之后，您也许能够执行一些基本的 Dask 代码，但是如果您想运行 dask-ml 呢？默认情况下不会安装。如果您想启动三个以上的默认工作人员，该怎么办？改一下你的 Jupyter 服务器密码怎么样？</p><p id="8a4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，我们需要一种方法来定制我们的环境，我们可以通过创建一个 yaml 文件来配置它。该 yaml 文件中的值将覆盖<a class="ae me" href="https://github.com/dask/helm-chart/blob/master/dask/values.yaml" rel="noopener ugc nofollow" target="_blank">标准配置文件</a>中相应参数的默认值。</p><p id="5143" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了便于说明，我们将使用下面的<em class="lu">值。一般来说，配置分为三个主要部分:调度、工人和 Jupyter 各一个。</em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Dask Helm 部署更新的配置文件模板</p></figure><p id="c00f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要更新配置，只需执行以下操作:</p><ul class=""><li id="2d63" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">在您的 Google Cloud Shell 中，运行<code class="fe oo op oq nu b">nano values.yaml </code>来创建文件<em class="lu"> values.yaml </em>。</li><li id="dbc5" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated">复制粘贴上面的模板(随意修改)并保存。</li><li id="b99e" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated">更新您的部署以使用此配置文件:</li></ul><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="145b" class="ny mg it nu b gy nz oa l ob oc">helm upgrade my-dask dask/dask -f values.yaml</span></pre><ul class=""><li id="90e7" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">请注意，您可能需要等待一段时间，以便更新准备就绪。</li></ul><p id="9ec4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">配置概述</strong></p><p id="f606" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还在下面提供了模板中常用配置的一般描述。</p><p id="c43a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">a)安装库</p><p id="daa1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 Worker 和 Jupyter 下，你可以找到<em class="lu"> env </em>的子部分。请注意，安装可以通过 conda 或 pip 进行，包之间用空格隔开。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="03a0" class="ny mg it nu b gy nz oa l ob oc">env:  # Environment variables.<br/>  - name: EXTRA_CONDA_PACKAGES<br/>    value: dask-ml shap -c conda-forge<br/>  - name: EXTRA_PIP_PACKAGES<br/>    value: dask-lightgbm --upgrade</span></pre><p id="d98b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">b)工人人数</p><p id="fbae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">工人数量可以通过<em class="lu">副本</em>参数指定。在我们的例子中，我们要求 4 个工人。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="addb" class="ny mg it nu b gy nz oa l ob oc">worker:<br/>  replicas: 4  # Number of workers.</span></pre><p id="bd10" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">c)分配的资源</p><p id="c56b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据您的需要，您可以通过<em class="lu"> resources </em>子部分增加分配给调度程序、工作程序和/或 Jupyter 的内存或 CPU 数量。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="d60d" class="ny mg it nu b gy nz oa l ob oc">resources:<br/>  limits:<br/>    cpu: 1<br/>    memory: 4G<br/>  requests:<br/>    cpu: 1<br/>    memory: 4G</span></pre><p id="72f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">c) Jupyter 密码</p><p id="008c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Jupyter 密码是<em class="lu">密码</em>参数下的哈希值。您可以通过替换此字段来更改您的密码。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="2f86" class="ny mg it nu b gy nz oa l ob oc">jupyter:<br/>  password: 'sha1:aae8550c0a44:9507d45e087d5ee481a5ce9f4f16f37a0867318c'</span></pre><p id="c4bd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要生成新密码的哈希值，</p><ul class=""><li id="318b" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">首先在你的 Jupyter 发射器中发射一个终端。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b2e8a37ab1ceec803c7b61615f702508.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*pG6_jkx4OjDBfaNtSPMt6A.png"/></div></figure><ul class=""><li id="ff5d" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">在命令行中运行<code class="fe oo op oq nu b">jupyter notebook password</code>并输入您的新密码。哈希后的密码将被写入一个名为<em class="lu">jupyter _ notebook _ config . JSON</em>的文件。</li><li id="258b" class="nc nd it la b lb nl le nm lh nn ll no lp np lt od ni nj nk bi translated">查看和复制哈希密码。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/0f0f46b8978ef9727da3d748d1de84fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*Vr7EXqEMf7njdret1CoLaQ.png"/></div></figure><ul class=""><li id="cbcc" class="nc nd it la b lb lc le lf lh ne ll nf lp ng lt od ni nj nk bi translated">替换<em class="lu"> values.yaml </em>中的<em class="lu">密码</em>字段。</li></ul><h1 id="22ec" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">6.移除集群</h1><p id="c4f2" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">要删除您的 Helm 部署，请在 Google Cloud Shell 中执行:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="8e60" class="ny mg it nu b gy nz oa l ob oc">helm del --purge my-dask</span></pre><p id="13a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，这不会破坏 Kubernetes 集群。为此，您可以从<a class="ae me" href="https://console.cloud.google.com/kubernetes" rel="noopener ugc nofollow" target="_blank"> Kubernetes 集群</a>页面中删除您的集群。</p></div><div class="ab cl ot ou hx ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="im in io ip iq"><p id="8dde" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过上面的指南，我们希望您现在能够在 Google Cloud 上部署 Dask。</p><p id="0ad4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读，我希望这篇文章是有用的:)也请随时评论您可能有的任何问题或建议。</p><h1 id="0d13" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">参考</h1><div class="pa pb gp gr pc pd"><a href="https://www.datarevenue.com/en-blog/pandas-vs-dask-vs-vaex-vs-modin-vs-rapids-vs-ray" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">攀登熊猫:达斯克 vs 雷 vs 摩丁 vs 瓦克斯 vs 急流</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">Python 和它最受欢迎的数据争论库 Pandas 人气飙升。与竞争对手相比，如…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">www.datarevenue.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr ks pd"/></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://docs.dask.org/en/latest/setup/kubernetes-helm.html" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">Kubernetes 和 Helm - Dask 2.22.0+11.gb5156d66 .脏文档</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">使用 Kubernetes 和 Helm 很容易在云资源上启动 Dask 集群和 Jupyter 笔记本服务器。这是…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">docs.dask.org</p></div></div></div></a></div></div></div>    
</body>
</html>