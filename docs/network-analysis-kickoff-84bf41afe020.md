# 网络分析启动

> 原文：<https://towardsdatascience.com/network-analysis-kickoff-84bf41afe020?source=collection_archive---------38----------------------->

## [实践教程](https://towardsdatascience.com/tagged/hands-on-tutorials)

## 使用 Python、R & Tableau 进行网络分析的介绍

![](img/72e1990ec43102abb11cf1d2b81fbacd.png)

由 [Clarisse Croset](https://unsplash.com/@herfrenchness?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

> 你的网络给了你更好的眼睛，而不是更好的眼镜。~罗纳德·伯特

**什么是网络？**

*水平线和垂直线交叉的排列。~牛津词典*

一组或一个系统的相互联系的人或事物~牛津词典

我们可以称之为基于共同利益基础的拓扑，用于共享信息。每个拓扑都有两个主要部分，一组节点和一组连接节点的顶点。取决于网络的类型，一组节点可以由一组计算机、一组服务器、一组船只、汽车、飞机、城市、人等组成。不用说，为了解释和说明的目的，节点的性质必须尽可能地同质，也就是说，很难同时解释一堆被称为节点的计算机和人，尽管这并不是不可能的。节点通过明显的通信方式连接起来，当我们想在一张纸上或软件上画它们时，我们称它们为顶点。如果它是一个人的网络，那么顶点可以是他们友谊的本质，专业链接的本质，或者通信链接的本质。如果它是一个技术网络，那么顶点可以是网络电缆或 wifi 或电话网络的信号。如果它是一个交通网络，那么顶点可以是海上路线的性质、飞行路线的性质、道路路线的性质等。

在我们真正开始解释力量的度量之前，下面给出了一些更高级的数据表示。引用这句话的目的是让我们做好思想准备。

> 网络是一种简化的表示，它将系统简化为一个抽象的结构，只获取连接模式的基本信息，其他信息很少。网络中的顶点和边可以用附加信息来标记，例如名称或强度，以捕捉系统的更多细节，但即使如此，在将整个系统简化为网络表示的过程中，许多信息通常会丢失。~ M.E.J .纽曼

![](img/b0eb8864489d835ac113e32137939eb5.png)

无向网络-图片来源:(图片由作者提供)

无向网络是一种更简单的网络形式。它不允许考虑两个节点之间的任何直接关系。例如，在我们假设的相邻网络中，可能有来自(1，2)和(2，1)的信息流。到节点 3 的信息可以从节点 1、2、4 或 5 流出。它也可以被称为对称关系，这表明如果 1 连接到 2，反之亦然。

![](img/3c6db7ec0a87f505d966cfaed5ce118a.png)

定向网络-图片来源:(图片由作者提供)

**另一方面，有向网络**不假设用有向边连接的两个节点会显示两个方向的信息流。因此，由于存在明确的方向，它允许说明两个节点之间的直接关系。例如，在我们知道的相邻网络中(1，2)，(2，3)，(3，4)是直接相连的。信息不能从(2，1)，(3，2)，(4，3)流出。然而(1，3)&【3，5】没有方向，因此无向网络的概念成立。

**邻接矩阵**

> 简单标记图的邻接矩阵，有时也称为连接矩阵，是具有由图顶点标记的行和列的矩阵，根据 v_i 和 v_j 是否相邻，在位置(v_i，v_j)具有 1 或 0。对于没有自循环的简单图，邻接矩阵的对角线上必须有 0。对于无向图，邻接矩阵是对称的。~ [**来源**](https://mathworld.wolfram.com/AdjacencyMatrix.html)

简而言之，如果两个节点彼此**相邻**并且直接**连接**，那么矩阵中的值将是 1，否则该值将是 0。

在上面的无向网络的例子中，(4，5)是相邻的，但是没有边/顶点/连接。因此，该值为 0。(2，3)通过直接连接相邻，因此值为 1。(2，5)彼此不相邻，尽管它们通过节点-3 间接连接，因此值为 0。

![](img/1f30cf8985f98e402f2ce86c7e837c69.png)

无向网络邻接矩阵，图片来源:(图片作者)

![](img/477bc792bd9b19804bff0b97ddb0b9a7.png)

有向网络邻接矩阵，图片来源:(图片作者)

![](img/9ec0aea33fd831a451e3236ba4ca84be.png)

无向自环网络邻接矩阵，图片来源:(图片由作者提供)

![](img/61fe60f8c54ce242fe6e5243c6b7ad58.png)

有向自环网络邻接矩阵，图片来源:(图片由作者提供)

**度中心性**

度是连接到一个节点的边的数量。它有时被称为网络模式。它告诉我们一个特定的节点可以有多少直接到达。具有最大范围的节点具有最高程度的中心性。它表示对网络的暴露，并且一些具有高程度的节点被期望更受欢迎或更集中。

![](img/b5b89ff8adb528002d9b90b6899253ef.png)

学位步骤 1 和 2，图片来源:(图片由作者提供)

![](img/e869f2cdcb0b5f6530ae7cfd115fb02b.png)

度 Step-3，图片来源:(图片由作者提供)

**中间中心性**

介数是特定节点位于其他节点之间最强路径上的程度。它告诉我们一个节点成为网络中任意两个节点之间最直接的路由的可能性有多大。它衡量网络中节点的非正式权力，这种权力可以控制网络两端的信息流。我们想知道网络中潜在路径的数量。具有高介数中心性的节点位于比任何其他节点更多的节点之间的最短路径上。如果网络不是有向的并且没有自循环，那么在“n”个节点之外，我们可以提取 nC2 对。因此，网络中可能有 nC2 条路径。这样，就不会出现重复计算配对的情况。

![](img/59c0feb91de957bac6f99f3705192407.png)

中间步骤 1，图片来源:(作者图片)

![](img/89b99302ecbceee2d204c01a384249ea.png)

中间步骤 2，图片来源:(作者图片)

![](img/abc72be41f3006510d4daff9d3b22bde.png)

中间步骤 3，图片来源:(作者图片)

![](img/edeb8b4f5db0b1a25d949e8e6a861cb1.png)

中间步骤 4，图片来源:(作者图片)

**接近中心性**

接近度是到网络中所有其他节点的平均最短距离。它告诉我们一个节点到达网络中每个人的速度有多快。它有助于衡量网络中的间接影响。它衡量一条信息从网络的一部分传播到另一部分的速度。在测量接近中心性时，我们不看邻接矩阵。相反，我们着眼于源节点和目的节点之间最短路径的长度。换句话说，距离矩阵说明了我们在到达目的节点的最短路径中需要跳的次数。

![](img/54fe1c2c09f6cc6f815680a2e45a361e.png)

亲密度第一步和第二步，图片来源:(作者图片)

![](img/4d9306596df1e9da8c9de7b838d41ba0.png)

亲近第三步，图片来源:(作者图片)

**特征值中心性**

特征值中心性根据邻居的数量平等地分配重要性。它以与节点邻居的重要性成比例的方式分配重要性。具有较高特征值中心性的节点是网络上信息收集的可能目标。与具有较少连接的节点相比，连接到高度连接的节点将给予节点更大的影响。这有助于确定哪个节点连接到最中心的节点。

我们将寻求软件的帮助来评估矩阵，这将有助于我们更好地解释。特别是，我们将使用 r 中“igraph”包中的“eigen_centrality”函数。我们很快就会谈到代码过程。目前，将单个特征向量除以向量之和将给出我们要解释的特征值(归一化的)。特征值加起来应该是 1。

![](img/1b207e09327b0be301a4ed9087a96a08.png)

特征值，图片来源:(图片作者)

因此，根据上面的玩具示例，我们观察到以下情况:-

1.  节点 1 在网络中具有最大连接数，因此具有最高的度中心性度量。
2.  对于任何其他两个节点来说，节点 1 大部分时间都处于两者之间进行通信。因此，节点 1 可以很好地控制网络所有端的业务流。因此它具有最高的中心性度量。
3.  Node-1 还可以快速到达网络中的其他对等点，因为它已被证明是一个具有高介数的高效网桥。因此它也具有最高的接近中心性。
4.  Node-1 还连接到大多数其他有影响的节点，因为它在网络中非常接近，并且是网络上信息收集的可能目标。因此，它的特征值中心性也是最高的。

在一个相对较大的稀疏网络中，一个特定的节点吸引所有的注意力不是不可能的，但有点不太可能。如果一个特定的节点度数很高，那么它在有影响力的连接中也很高，这并不是一个规则。

![](img/bc7debd35fb5e34c11613ff4536bd883.png)

相关矩阵(玩具示例)，图片来源:(图片由作者提供)

对于每种类型的网络，相关性的强度可能不相同。网络的每个模式都有自己的相关矩阵和潜在的解释，就像人类的指纹一样。

***茶歇***

![](img/86623a77732fa78339db28be468be1c1.png)

照片由[内森·杜姆劳](https://unsplash.com/@nate_dumlao?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

需要数年的数据争论和可视化来吸收集中趋势测量的完整性，如均值、中值、众数等。我们看到和讨论的例子越多，我们在解释理解手头问题的基本汇总方法时就越有可能实现多样性。上述 4 个中心性度量几乎类似于网络或图论中使用的汇总度量。因此，在学习网络问题的初始阶段，计算度量的能力至关重要。然而，总结中心性度量并不是解决端到端网络优化问题所需的唯一设计要素。网络分析或社会网络分析或图论本身是一个巨大的研究课题，解决网络问题需要大量的绘图、计算矩阵和迭代各种图论模型才能得出结论。在本文的剩余部分，我们将重新讨论相同的方法，但是使用一个稍微大一点的网络，并看看 R 和 Python 如何一起帮助我们。我们将以这个研究领域的一些主要贡献者开发的一些基本的必须知道的模型来结束这篇文章。

**介绍网络**

[**孟买**](https://en.wikipedia.org/wiki/Mumbai)**众所周知，印度拥有亚洲最大的地方铁路网络之一
孟买的大部分人口依靠这些地方火车通勤
这个网络的三个主要连接点位于西部、中部和港口线路。西线包括教堂门至达哈努路。中央线覆盖查特拉帕蒂西瓦吉终点站至 Kalyan、Khopili 和 Kasara。港口线连接孟买到新孟买，直到潘韦尔。据估计，平均每天运送 740 万人。**

****站名和代码****

**![](img/52a47a249b2722b5c6dafc1e82f5e168.png)**

**站名和代码，图片来源:(图片作者)**

**[将](https://github.com/arimitramaiti/datasets/blob/master/articles/mumbai_local_adjacency-matrix.xlsx)链接到**邻接矩阵****

**![](img/b4250b1c167b2c5ade905d39a8fac595.png)**

**邻接矩阵快照，图片来源:[数据](https://github.com/arimitramaiti/datasets/blob/master/articles/adjacency_matrix_mumbailocal.csv)(图片由作者提供)**

****来自 R 的网络图****

**![](img/aa8908e8084bf0104f86b622adfca0fd.png)**

**网络图，图片来源:[代码](https://gist.github.com/arimitramaiti/e4ea1beb5b775c3f4ec909d2c369d527)(图片由作者提供)**

****R 代码生成图形****

****度中心性****

**![](img/57b6f55483a0a228204f7e7a8a5f7fbf.png)**

**度中心性图，图片来源:[链接](https://public.tableau.com/profile/arimitra.maiti#!/vizhome/NA_Project_Assignment/Degree)(图片由作者提供)**

**度数是连接到特定节点的本地站的数量
它也被称为网络的“模式”。它告诉我们一个特定车站可以直达的次数。具有最大范围的站具有最高程度的中心性。它表示对网络的暴露，并且具有高度中心性的站预期更受欢迎或更中心。
*Kurla (CLA)和 Dadar (DDR)的度中心性都是 4。这意味着他们都连接到 4 个独特的方向和不同的地方站。Kurla 直接连接到 Chunabhatti、Sion、Vidyavihar & Tilaknagar。Dadar 直接连接到 Elphinstone Road、Matunga、Matunga Road & Parel。***

****中间中心性****

**![](img/7c69412ca567cdb2963574c2f1811d2c.png)**

**中间中心图，图片来源:[链接](https://public.tableau.com/profile/arimitra.maiti#!/vizhome/NA_Project_Assignment/Degree)(图片由作者提供)**

**中间性是特定站(节点)位于其他站(节点)之间的最短路径上的程度。它有时被称为网络的“中间值”。它告诉我们一个站点成为网络中任意两个站点之间最直接的路由的可能性有多大。它衡量网络中能够控制网络两端信息流的非正式权力。
*库尔勒(CLA)位于贾特拉帕蒂·希瓦吉终点站(CSTM)到潘韦尔的直达航线之间。库尔勒位于 CSTM 至霍波利的直达路线和 CSTM 经塔那至卡萨拉的路线之间。库尔勒还可以将某人转移到 Dadar-Borivali 或 Dadar-Churchgate 或 Dadar-Dahanu 路。***

****接近中心性****

**![](img/183729cd365c0ac297938d5670bf8dcf.png)**

**亲近中心性图，图片来源:[链接](https://public.tableau.com/profile/arimitra.maiti#!/vizhome/NA_Project_Assignment/Degree)(图片由作者提供)**

**接近度是到网络中所有其他站点(节点)的平均最短距离。它有时被称为网络的“平均值”。它告诉我们从那个节点到网络中的每个站有多快。它有助于衡量网络中的间接影响。它衡量一条信息从网络的一部分传播到网络的另一部分的速度。
一旦从 Kurla 经 Sion 到达 Dadar，就可以通过 Matunga 路到达 Borivali 和 Dahanu 路或 Churchgate。一旦到达塔那，就可以到达 Kalyan 或 Kasara。**

****特征值中心性****

**![](img/430cdb8563507ff80b4c85c92261a8f6.png)**

**特征值中心图，图片来源:[链接](https://public.tableau.com/profile/arimitra.maiti#!/vizhome/NA_Project_Assignment/Degree)(图片由作者提供)**

**特征值中心性根据邻居的数量平等地分配重要性。具有高特征值中心性的站(节点)是网络上信息收集的可能目标。这有助于确定哪个站与大多数中心站相连。链接到高度连接站将比链接到较少连接的站给予一个站更大的影响。
*Sanpada 连接到 Vashi，Vashi 又连接到具有高中间中心性的 Kurla。圣帕达也通过 Turbhe/Juinagar 连接到塔那，也具有较高的中间中心性。库尔勒连接到 Sion、Vidyavihar 和 Chunabhatti，它们具有较高的接近中心性。桑帕达也与潘韦尔相连。***

****Python 代码生成相关矩阵****

**![](img/43cb2b9f7f65665b5835da2f22d6969b.png)**

**中心性度量的相关矩阵，图片来源:[链接](https://gist.github.com/arimitramaiti/237ee1b58590e0f8a1e2871ee4a37155)(图片由作者提供)**

**该程度与所有其他中心性测量呈正相关。接近度和介数的系数约为 0.4。0.4 可以被称为相当弱但正相关。它与特征值中心性的相关性更小，系数为 0.3。介数和贴近度之间的相关性相对最强，系数为 0.5。它比介数与度或介数与特征值之间的相关性更强。特征值和介数之间呈负相关，但特征值与亲密度呈弱正相关。**

****中心性分布的变化****

**![](img/4c92208df8e29e831a562df12c9b418f.png)**

**中心性分布的变化，图片来源:[链接](https://gist.github.com/arimitramaiti/34d621f60b9a652e8cbdec892e821eb9)(图片由作者提供)**

****生成变异的 Python 代码****

**所有 114 个节点的度中心性值的直方图表明，只有 2 个节点具有最高度 4。有 6 个终端站，每个终端站的度数为 1，因为除了该站之外没有任何东西。8 个站点的度为 3，这意味着除了往返站点之外，它们连接到 1 个不同的节点。98 个站点的度值为 2，这意味着除了往返节点之外，它们没有连接到任何其他方向。经验网络的中心性分数看起来并不是对称的。平均中心性分数约为 0.0005，超过 68%的观察值必须位于±1±0.0001 的标准偏差内，因为形状并不完全正常。**

> **“如果我知道一个网络有一些特殊的属性，比如特殊的度分布，这对系统更广泛的行为会有什么影响？”~ M.E.J .纽曼**

****随机图网络模型****

**保罗**鄂尔多斯**和阿尔弗雷德**雷尼**在 1959 年推出了这款车型。用外行的话来说，他们的工作使我们能够生成真实世界复杂网络的简单表示。因此，它将允许我们测试某些假设。从这个理论中产生的网络可能会也可能不会类似于现实世界的经验网络。如果我们可以从经验网络中收集一些**属性**，那么我们可以随机生成多个网络，并测试现实世界的现象是否完全随机。这有助于我们了解经验网络不同于这种随机网络。如果经验网络类似于随机网络模式，那么我们可以推断可能会有一些沉闷的事情发生。理想情况下，如果我们已经从一组数据中观察到某些中心趋势属性，并且给我们一个强大的工具来生成随机分布，以这些属性作为我们的主干，那么我们一定不能随机复制相同的数据。如果我们能够获得一个复制品，那么这可能意味着可能没有一个特定的模型来预测经验数据。它可以随时改变，没有模型可以限制数据的进一步理解。**

**随机图模型假设网络是无向的(这是上面显示的我们的经验站点网络的情况),并且节点随机连接。除了节点数量之外，重要的参数是任意两个节点共享一个连接的概率。鄂尔多斯-仁义是基于二项分布。在我们的站点示例中，我们有 114 个站点，因此有 114 个节点。**

****生成经验网络概率(p)的方法****

**![](img/5e236cd22986ae5cba4558e465c571d1.png)**

**鄂尔多斯-仁义概率，图片来源:(图片由作者提供)**

**我们将生成 100 个随机图模型，从每个模型中提取中心性度量，创建每个中心性度量的分布，并将它们与上面我们的实际经验站网络进行比较。其目的是通过检查随机图形模型是否可以轻松复制中心性分布来衡量站点是否是随机连接的。**

****R 代码模拟鄂尔多斯-雷尼模型****

****比较发行版的 Python 代码****

**![](img/6c9bcf367ece6867c2fc7c1a0c848575.png)**

**鄂尔多斯-仁义(随机网络)与经验网络对比，图片来源:[链接](https://gist.github.com/arimitramaiti/baced68ac989b4eca7d5702bb647ffa1)(图片由作者提供)**

***随机网络模型(蓝色)的特征值分布看起来是对称的，而经验网络(橙色)看起来不是这样。经验网络看起来不像随机网络模型。***

****瓦茨斯特罗加兹模型****

**1967 年，美国社会心理学家斯坦利·米尔格拉姆发现了小世界的属性。任何网络都有相对较少的长距离链接，但大多数节点对之间都有短路径，通常由集线器创建。1998 年，Duncan Watts 和 Steven Strogatz 进一步扩展了这个小世界问题的[数学](http://worrydream.com/refs/Watts-CollectiveDynamicsOfSmallWorldNetworks.pdf)观点。他们基本上分析了一些极其不同的网络，发现它们都与随机图网络没有任何相似之处。平均路径长度、聚类系数的概念在很大程度上是从它们对网络分析的贡献发展而来的。他们还挑战了常规网络模型，该模型基本上假设每个节点的连接模式与所有其他节点相似。结果，他们证明了大多数真实世界的网络既不是规则网络也不是随机网络的复制品，而是介于两者之间。**

**我们将生成 100 个小世界模型，从每个模型中提取中心性度量，创建每个中心性度量的分布，并将它们与上面我们的实际经验站网络进行比较。目的是测量这些站是否以类似于小世界模型的方式连接。除了节点数量和连接概率之外，我们不会改变任何参数，而是将其余参数保持为默认值。**

****R 代码模拟沃茨斯特罗加兹模型****

****比较分布的 Python 代码****

**![](img/d8b6401a357261151e5b32f41f406a57.png)**

**小世界与实证网络的对比，图片来源:[链接](https://gist.github.com/arimitramaiti/c60cd7c1b40c67345258183ebae97b18)(图片由作者提供)**

***随机网络模型(蓝色)的特征值分布看起来是对称的，而经验网络(橙色)看起来不是这样。经验网络也不像小世界网络模型。***

****巴拉巴斯艾伯特模型****

**它于 1990 年推出，基于这样一种信念，即如果网络中的节点数量增加，底层布局不会改变。它高度重视幂律分布，幂律分布表明在网络中少量的节点具有高的度，而大量的节点具有小的度。他们注意到正态分布在现实世界的网络中并不常见。他们的工作发展了[优先](https://oxford.universitypressscholarship.com/view/10.1093/acprof:oso/9780199211517.001.0001/acprof-9780199211517)连接的概念，即连接到已经高度连接的节点是有益的。**

**我们将生成 100 个 Barabasi Albert 模型，从每个模型中提取中心性度量，创建每个中心性度量的分布，并将它们与我们上面的实际经验站网络进行比较。目的是测量这些站是否以类似于小世界模型的方式连接。除了节点数量和连接概率之外，我们不会改变任何参数，而是将其余参数保持为默认值。**

****R 代码模拟巴拉巴斯阿尔伯特模型****

****Python 代码比较发行版****

**![](img/1c0361b40e78ee2aa470b7b0ef43e617.png)**

**巴拉巴斯艾伯特与实证网络对比，图片来源:[链接](https://gist.github.com/arimitramaiti/cae40d29f07c7bfc601b3216317e7b8c)(图片由作者提供)**

***bara basi Albert 模型的特征值分布非常类似于经验网络模型。经验网络看起来很像巴拉巴斯阿尔伯特模型。***

**在小世界模型和巴拉布西-阿尔伯特模型之间寻找相似之处总是一场艰苦的战斗。任何真实世界的网络都不会接近 Barabasi-Albert 模型。在你的情况下，它可以是不同的。每个中心性分布必须匹配特定的模型才能相似，这也是不习惯的。每个网络都是唯一的，每个网络都有自己的中心性分布。有些可能看起来像上面讨论的 3 个模型中的任何一个，有些可能不像。以上 3 种模式并不是唯一存在的。本文试图展示网络分析世界中的几个字母，除此之外还有更多字母，我们可以学习构造一个正确句子的方法。**

****参考文献****

***网络，马克·纽曼的介绍***

**艾伯特·巴拉巴斯的《网络新科学》**

***网络和开放视频平台分享网络分析知识***

***安宁迪亚教授 S.* [*查克拉巴蒂*](https://sites.google.com/site/homepageasc/home) *，IIM-艾哈迈达经济区***

> **六度分离并不意味着每个人都在短短的六个步骤中与其他所有人联系在一起。这意味着极少数人与其他所有人都有几步之遥的联系，而我们其余的人则通过那些特殊的少数人与这个世界联系在一起。~马尔科姆·格拉德威尔**