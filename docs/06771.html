<html>
<head>
<title>SENTIMENTAL ANALYSIS USING VADER</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用VADER的情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sentimental-analysis-using-vader-a3415fef7664?source=collection_archive---------1-----------------------#2020-05-27">https://towardsdatascience.com/sentimental-analysis-using-vader-a3415fef7664?source=collection_archive---------1-----------------------#2020-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8443" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">情绪的解释和分类</h2></div><p id="814e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">情感分析是一种文本分析方法，它检测文本中的极性(例如，正面<em class="le">意见</em>或负面<em class="le">意见</em>，无论是整个文档、段落、句子还是子句。</p><p id="4247" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">情感分析旨在基于文本中主观性的计算处理来测量说话者/作者的态度、情感、评价、态度和情绪。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/a04d8d0921f9b96c7715f6e9f211dc81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nyjzrDOKE-26_sZD.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">来源:MonkeyLearn，图片链接:【https://bit.ly/2X806dW T4】</p></figure><h1 id="b3c3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">为什么情感分析很难执行？</h1><p id="0b9d" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">尽管理论上看起来很容易，但情绪分析是一个棘手的问题。一个文本可以同时包含多种情感。举个例子，</p><p id="9617" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">“演技不错，但电影本来可以更好”</em></p><p id="c196" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面这句话包含了两个极性！！！</p><h1 id="31e0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated"><strong class="ak"> VADER </strong></h1><p id="8568" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">VADER(用于情感推理的效价感知词典)是用于文本情感分析的模型，其对情感的极性(积极/消极)和强度(强度)都敏感。它在NLTK包中提供，可以直接应用于未标记的文本数据。</p><p id="981c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">VADER情感分析依赖于一个字典，该字典将词汇特征映射到情感强度，即情感得分。文本的情感得分可以通过对文本中每个词的强度求和得到。</p><p id="4a8f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，像<em class="le">、【爱】、【享受】、【快乐】、【喜欢】这些词都传达了一种积极的情绪。VADER也足够聪明，能够理解这些词的基本语境，比如<em class="le">“不爱”</em>作为否定陈述。也理解大写和标点符号的侧重点，比如<em class="le">“享受”</em></em></p><h1 id="68a0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">极性分类</h1><p id="ad92" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们不会试图确定一个句子是客观的还是主观的，是事实还是观点。相反，我们只关心文本是否表达了积极的、消极的或中立的T21观点。</p><h1 id="fe39" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">文档级范围</h1><p id="2bc5" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们还会尝试将一个文档或段落中的所有句子聚合在一起，得出一个整体观点。</p><h1 id="0ffb" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">粗略分析</h1><p id="e08a" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们不会尝试进行精细的分析来确定积极/消极的程度。也就是说，我们并不试图猜测一个评论者给了多少颗星，只是想知道这个评论是正面的还是负面的。</p><h1 id="8bb5" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">主要步骤:</h1><ul class=""><li id="250f" class="mt mu it kk b kl mo ko mp kr mv kv mw kz mx ld my mz na nb bi translated">首先，考虑被分析的文本。一个基于整段评论的模型可能是无效的。确保为手头的任务使用合适的模型。</li><li id="4212" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">接下来，决定要执行的分析类型。一些基本的情感分析模型更进一步，考虑两个词的组合，或<em class="le">二元模型</em>。我们将学习完整的句子，为此我们将导入一个名为<em class="le"> VADER </em>的经过训练的NLTK词典。</li></ul><h1 id="a4a3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">要使用的数据集</h1><p id="c716" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">对于这个模型，您可以使用各种数据集，如亚马逊评论、电影评论或任何产品的任何其他评论。</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="a02a" class="nm lx it ni b gy nn no l np nq"><strong class="ni iu">import</strong> <strong class="ni iu">nltk</strong><br/>nltk.download('vader_lexicon')</span><span id="2c87" class="nm lx it ni b gy nr no l np nq"><strong class="ni iu">from</strong> <strong class="ni iu">nltk.sentiment.vader</strong> <strong class="ni iu">import</strong> SentimentIntensityAnalyzer<br/><br/>sid = SentimentIntensityAnalyzer()</span></pre><p id="513f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">VADER的<code class="fe ns nt nu ni b">SentimentIntensityAnalyzer()</code>接受一个字符串，并返回四个类别的得分字典:</p><ul class=""><li id="a13b" class="mt mu it kk b kl km ko kp kr nv kv nw kz nx ld my mz na nb bi translated">否定的；消极的；负面的；负的</li><li id="1f03" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">中立的</li><li id="b4ae" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">积极的</li><li id="a2fc" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">复合值<em class="le">(通过对上述</em>的分数进行归一化计算)</li></ul><p id="ecd9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们通过情感分析仪来分析一些随机陈述</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="f7a6" class="nm lx it ni b gy nn no l np nq">a = 'This was a good movie.'<br/>sid.polarity_scores(a)</span><span id="df3b" class="nm lx it ni b gy nr no l np nq">OUTPUT-{'neg': 0.0, 'neu': 0.508, 'pos': 0.492, 'compound': 0.4404}</span><span id="1fb2" class="nm lx it ni b gy nr no l np nq">a = 'This was the best, most awesome movie EVER MADE!!!'<br/>sid.polarity_scores(a)</span><span id="4d2e" class="nm lx it ni b gy nr no l np nq">OUTPUT-{'neg': 0.0, 'neu': 0.425, 'pos': 0.575, 'compound': 0.8877}</span></pre><h1 id="c7b0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">使用VADER分析评论</h1><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="d2e9" class="nm lx it ni b gy nn no l np nq"><strong class="ni iu">import</strong> <strong class="ni iu">numpy</strong> <strong class="ni iu">as</strong> <strong class="ni iu">np</strong><br/><strong class="ni iu">import</strong> <strong class="ni iu">pandas</strong> <strong class="ni iu">as</strong> <strong class="ni iu">pd</strong><br/><br/>df = pd.read_csv('../TextFiles/reviews.tsv', sep='<strong class="ni iu">\t</strong>')<br/>df.head()</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/d5d74d444fc86493240d532c81a6a60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*zS3ObHWV7t9auNt7XWb2Sg.png"/></div></figure><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="e6fb" class="nm lx it ni b gy nn no l np nq">df['label'].value_counts()<br/></span><span id="845b" class="nm lx it ni b gy nr no l np nq">OUTPUT-neg    5097<br/>pos    4903<br/>Name: label, dtype: int64</span></pre><h1 id="b6da" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">清理数据(可选)</h1><p id="7316" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">这一步是为了清除评论中的任何空白。</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="7d60" class="nm lx it ni b gy nn no l np nq"><em class="le"># REMOVE NaN VALUES AND EMPTY STRINGS:</em><br/>df.dropna(inplace=<strong class="ni iu">True</strong>)<br/><br/>blanks = []  <em class="le"># start with an empty list</em><br/><br/><strong class="ni iu">for</strong> i,lb,rv <strong class="ni iu">in</strong> df.itertuples():  <br/>    <strong class="ni iu">if</strong> type(rv)==str:            <br/>        <strong class="ni iu">if</strong> rv.isspace():        <br/>            blanks.append(i)     <br/><br/>df.drop(blanks, inplace=<strong class="ni iu">True</strong>)</span></pre><h1 id="12cb" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">向数据帧添加分数和标签</h1><p id="8e56" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">现在，我们将向原始数据帧添加列，以存储polarity_score字典、提取的复合得分以及从复合得分派生的新“正/负”标签。我们将使用这最后一列来执行准确性测试。这种方法中的评论将被分为负面、正面和中性比率。</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="4ccc" class="nm lx it ni b gy nn no l np nq">df['sc ores'] = df['review'].apply(<strong class="ni iu">lambda</strong> review: sid.polarity_scores(review))<br/><br/>df.head()</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nz"><img src="../Images/f4372fcdc203ae21fb6813c1ed8d2905.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dqKnXF2ydtPrbNsiHELItg.png"/></div></div></figure><p id="71cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在会将化合物作为单独的列，所有大于零的值都将被视为正面评价，所有小于零的值都将被视为负面评价。</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="0d54" class="nm lx it ni b gy nn no l np nq">df['compound']  = df['scores'].apply(<strong class="ni iu">lambda</strong> score_dict: score_dict['compound'])<br/><br/>df.head()</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi oa"><img src="../Images/2051203c61f6672e77132f6ffac7190f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DONDD6Yt8lYhb1uPCb-PIA.png"/></div></div></figure><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="0201" class="nm lx it ni b gy nn no l np nq">df['comp_score'] = df['compound'].apply(<strong class="ni iu">lambda</strong> c: 'pos' <strong class="ni iu">if</strong> c &gt;=0 <strong class="ni iu">else</strong> 'neg')<br/><br/>df.head()</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ob"><img src="../Images/be1875240664018853c0e1935b9d323c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1OGebmS-OOnubzduacd7A.png"/></div></div></figure><p id="f72a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以现在我们有了一个完整的分析，无论是正面的还是负面的。</p><p id="80ea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们通过一些新的评论来测试我们的模型表现如何！</p><pre class="lg lh li lj gt nh ni nj nk aw nl bi"><span id="e789" class="nm lx it ni b gy nn no l np nq"><em class="le"># Write a review as one continuous string (multiple sentences are ok)</em><br/>review = 'The shoes I brought were amazing.'<br/></span><span id="dc83" class="nm lx it ni b gy nr no l np nq"># Obtain the sid scores for your review<br/>sid.polarity_scores(review)</span><span id="0bc6" class="nm lx it ni b gy nr no l np nq">OUTPUT-<br/>{'neg': 0.0, 'neu': 0.513, 'pos': 0.487, 'compound': 0.5859}</span><span id="c904" class="nm lx it ni b gy nr no l np nq">review='The mobile phone I bought was the WORST and very BAD'</span><span id="4104" class="nm lx it ni b gy nr no l np nq"># Obtain the sid scores for your review<br/>sid.polarity_scores(review)</span><span id="7913" class="nm lx it ni b gy nr no l np nq"><br/>OUTPUT-</span><span id="8d96" class="nm lx it ni b gy nr no l np nq">{'neg': 0.539, 'neu': 0.461, 'pos': 0.0, 'compound': -0.8849}</span></pre><h1 id="6cc3" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="a2cd" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">VADER分析的结果似乎不仅显著，而且非常令人鼓舞。结果显示了在网站中文本数据可能是一系列文本的复杂混合的情况下，通过利用VADER将获得的优势。</p><h2 id="40a0" class="nm lx it bd ly oc od dn mc oe of dp mg kr og oh mi kv oi oj mk kz ok ol mm om bi translated">额外资源</h2><p id="fd0b" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我在《走向数据科学》杂志上发表了两篇关于这个博客相关主题的文章。为了更好地理解自然语言处理，请阅读这些文章</p><p id="3be3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lv" href="https://link.medium.com/JWpURpQjt6" rel="noopener">词干vs词汇化——https://link.medium.com/JWpURpQjt6</a></p><p id="66a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">词语向量和语义—<a class="ae lv" href="https://link.medium.com/tuVCswhYu6" rel="noopener">https://link.medium.com/tuVCswhYu6</a></p><h1 id="64f9" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">这只是对什么是情绪分析以及VADER如何工作的一个小小的窥探。如有任何疑问和澄清，请随时回复本博客。</h1></div></div>    
</body>
</html>