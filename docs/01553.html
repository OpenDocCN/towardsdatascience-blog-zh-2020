<html>
<head>
<title>Quantile Regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分位数回归</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/quantile-regression-ff2343c4a03?source=collection_archive---------1-----------------------#2020-02-12">https://towardsdatascience.com/quantile-regression-ff2343c4a03?source=collection_archive---------1-----------------------#2020-02-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/05ef2c3106a8c356bb20da0b03c97b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gDa8iV1R7T1UPsTAz4pA5w.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">分位数回归拟合的数据</p></figure><p id="3171" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">当进行回归分析时，对一个问题给出一个数字预测是不够的，你还需要表达你对这个预测有多有信心。例如，如果您正在查看某个特定市场的房价，而您的模型预测某栋房子的售价为262，458.45美元，那么您对模型的预测完全正确有多大把握呢？但愿你的直觉告诉你，这是真的可能性极小，但也许你的模型有可能接近实际答案。我们需要一种方法来预测一个数值范围，同时对该范围有一定的把握。</p><p id="3095" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">输入分位数回归。不同于使用最小二乘法来计算跨越不同特征值的目标的条件<strong class="kh iu"> <em class="ld">均值</em> </strong>的常规线性回归，分位数回归估计目标的条件<strong class="kh iu"> <em class="ld">中值</em> </strong>。分位数回归是线性回归的扩展，在不满足线性回归的条件(即线性、同方差、独立性或正态性)时使用。</p><p id="5493" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">传统上，用于计算平均值的线性回归模型采用以下形式</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi le"><img src="../Images/d9c35d3302a6b7bcd788c87a32eece55.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*3RFDypCL0Ur5_VfsPPFFJw.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">线性回归模型方程</p></figure><p id="5c57" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">其中<em class="ld"> p </em>等于等式中特征的数量，而<em class="ld"> n </em>是数据点的数量。最佳线性回归线是通过最小化均方误差找到的，这是通过以下等式找到的</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lj"><img src="../Images/9520c36793004e69e3baa9fd8cfb9076.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*ScESFiUUgFeWU5xx_6dc2w.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">线性回归的均方误差</p></figure><p id="5733" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，对于分位数回归，您不仅限于查找中位数，还可以计算特征变量中特定值的任何分位数(百分比)。例如，如果我们要找到特定房屋价格的第25个分位数，这将意味着有25%的可能性房屋的实际价格低于预测，而有75%的可能性价格高于预测。</p><p id="9f12" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">采用与线性回归模型类似的结构，𝜏th分位数的分位数回归模型方程为</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/0d86e36accee61928ab6d455d4749a31.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*tYeilWYdo3p6W_Knu0XVrQ.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">分位数回归模型</p></figure><p id="cc8a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这意味着β系数不再是常数，而是依赖于分位数的函数。在特定分位数上寻找这些betas值的过程与常规线性量化几乎相同，只是现在我们必须降低中值绝对偏差。</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/820f9a48556593525b71122dcb846deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*v4dxGwv-33ToWn0xNQmaYg.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">分位数回归的中位数绝对偏差</p></figure><p id="e723" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里，函数𝜌是检查函数，它根据误差的分位数和总体符号对误差赋予不对称的权重。数学上，𝜌采取的形式</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lm"><img src="../Images/4f70d67d35dbd8742bfd6ed94104101f.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*_koW9WaZHLx-GS1ujU_w8w.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">检查函数方程</p></figure><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ln"><img src="../Images/d4a15ae1223f2918bf6b85a357c21364.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*jx0oaa7Kom8guOKETAPjgg.png"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">检查功能图</p></figure><p id="0e96" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在这种情况下，<em class="ld"> u </em>是单个数据点的误差，max函数返回括号中的最大值。这意味着，如果误差为正，则检查函数将误差乘以𝜏，如果误差为负，则检查函数将误差乘以(1- 𝜏).</p><p id="dfbf" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">例如，如果您想要第10个百分位数的中间值，这意味着您想要90%的误差为正，10%为负。为了找到最小的MAD，同时使该陈述为真，必须将权重添加到误差中。在第10个分位数的情况下，权重0.9被添加到负权重，而权重0.1被添加到正权重。</p><p id="b342" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们看看分位数回归的作用。让我们检查一下QuantReg的python statsmodels示例，该示例查看了1857年比利时工人阶级家庭样本的收入和食品支出之间的关系，并查看我们可以进行何种统计分析。</p><pre class="lf lg lh li gt lo lp lq lr aw ls bi"><span id="3f92" class="lt lu it lp b gy lv lw l lx ly">import statsmodels.api as sm<br/>import statsmodels.formula.api as smf<br/>data = sm.datasets.engel.load_pandas().data<br/>data.head()</span></pre><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/da085224091db091abea814911973fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*UG4X8-Lxz-gaI2unaTGWjA.png"/></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">1857年贝尔加因家庭数据</p></figure><pre class="lf lg lh li gt lo lp lq lr aw ls bi"><span id="6ab6" class="lt lu it lp b gy lv lw l lx ly">mod = smf.quantreg('foodexp ~ income', data)<br/>res = mod.fit(q=.5)<br/>print(res.summary())</span></pre><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/98baa0581ce74d3ce6736abd541ce553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*_1kzmGqw01_mF2n-3zeEcw.png"/></div></figure><p id="9121" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如您所见，您可以为特定的分位数创建一条回归线，并对其执行统计分析，就像使用常规线性回归模型一样。</p><p id="2ef0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你想了解更多，这里有一个<a class="ae mb" href="https://support.sas.com/resources/papers/proceedings17/SAS0525-2017.pdf" rel="noopener ugc nofollow" target="_blank">链接</a>到SAS写的一篇关于分位数回归的论文。下文提供了其他来源。</p><div class="mc md gp gr me mf"><a href="https://en.wikipedia.org/wiki/Quantile_regression" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">分位数回归</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">分位数回归是统计学和计量经济学中使用的一种回归分析。而最小二乘法…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">en.wikipedia.org</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt jz mf"/></div></div></a></div><div class="mc md gp gr me mf"><a href="https://www.statsmodels.org/devel/examples/notebooks/generated/quantile_regression.html" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">分位数回归-统计模型</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">此示例页面显示了如何使用statsmodels的类来复制Koenker，Roger…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">www.statsmodels.org</p></div></div></div></a></div></div></div>    
</body>
</html>