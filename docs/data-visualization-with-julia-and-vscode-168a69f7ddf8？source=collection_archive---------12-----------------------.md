# 用 Julia 和 VSCode 实现数据可视化

> 原文：<https://towardsdatascience.com/data-visualization-with-julia-and-vscode-168a69f7ddf8?source=collection_archive---------12----------------------->

## 使用 Julia 和免费的 VSCode IDE，您可以用很少的编程知识制作令人印象深刻的数据可视化。

![](img/d77d245a45c2761a4221a6e3835f5b29.png)

除了茱莉亚语言标志外，所有图片均由 julialang.org 阿兰·琼斯创作

不久前，我写了一篇关于使用 Julia 和一个叫做 JuliaBox 的在线环境进行数据可视化的文章。当时 JuliaBox 是一项免费服务；不幸的是，它已被撤回。这是一个耻辱，因为它是一个伟大的服务。

因此，这篇文章的新版本使用了微软的 VSCode IDE(它不仅是免费的，而且也不太可能很快消失)。你需要安装 VSCode，Julia 语言，然后是针对 Julia 的 VSCode 扩展。如果这听起来很复杂，别担心，一点也不复杂。

# 朱莉娅

Julia 是一种相对较新的数据分析语言。它有一个高级语法，旨在易于使用和理解。有人称之为新 Python。

然而，与 Python 不同的是，它是一种编译语言，这意味着尽管它像 Python 一样容易编写，但它运行得更快，因为它被转换为更容易被计算机理解的低级代码。如果您必须处理需要大量处理的大型数据集，这非常有用。

![](img/970820dbdb7f259894f12df191440c1a.png)

与 Python 相比，Julia 对程序的布局也没有那么挑剔。

Julia 拥有现代编程语言的所有特性，但是在这里，我们将看看 Julia 的数据可视化能力。这些既令人印象深刻又易于使用。

一旦你安装了 Julia 和 VSCode，你就可以运行 Julia 代码并将你的可视化保存为标准的 *png* 文件。

## 安装 Julia 和 VSCode

要安装 Julia，你需要去 https://julialang.org/的[下载适合你操作系统的版本。安装很简单，只需按照说明操作。](https://julialang.org/)

对于 VSCode，建议是一样的，除了你去 https://code.visualstudio.com 的[下载。](https://code.visualstudio.com/)

准备好之后，启动 VSCode 并加载 Julia 扩展。

要做到这一点，你可以点击最左边面板中的扩展符号(四个矩形中的一个与另一个略有偏移)并在搜索栏中键入 *julia* 。

![](img/d89d32dca33cff4c0eae6eadd152d720.png)

现在点击*安装*。

如果您已经正常安装了 Julia，这应该就是您需要做的全部工作。如果你做了一些不同的事情，你需要点击设置图标(齿轮)并手动输入*julia.exe 的位置。*您也可以在*文件|首选项|扩展*菜单中找到设置。

在继续之前，我必须告诉您，本文中的说明和代码是在 Windows 10 笔记本电脑上开发的。我不知道为什么它在 Linux 或 Mac 上应该有任何不同，但我没有在这些环境中测试过。

## 图书馆

在我们编写任何程序之前，我们需要加载我们想要使用的库。你只需要这样做一次，一旦你加载了库，它们就永远存在了。

通过打开一个 Julia 终端(也称为 REPL，用于读取、评估和打印循环)来实现这一点。

您可以通过多种方式启动 REPL。从视图菜单中找到命令面板，然后单击它或按 Ctrl+Shift+P。这会给你一个命令列表，其中一个是“朱莉娅:启动 REPL”(如果你看不到它向下滚动或开始在搜索栏中键入“朱莉娅”，命令就会出现)，所以单击它，你会得到一个终端窗口。

在 REPL 窗口的 Julia 提示符下，键入以下内容

```
julia> using Pkg
```

这告诉 Julia 您将使用包管理器。然后键入以下内容并点击<return>:</return>

```
julia> Pkg.add("Plots")
```

现在你需要添加几个我们将在教程中用到的包。键入以下几行:

```
julia> Pkg.add("CSV")
```

和

```
julia> Pkg.add("DataFrames")
```

稍后您将会用到这些软件包。

现在你可以开始了！因此，打开一个新文件，将其命名为“myPlots.jl”或类似的名称，但要确保它具有扩展名。所以 VSCode 知道它是什么类型的文件。你现在应该有两个面板打开，文件和 REPL。您仍然希望打开 REPL，因为这是打印程序输出的地方。

您的屏幕应该是这样的:

![](img/b8170ae193aca5547fe6239b32520c6d.png)

# 朱莉娅·图斯

和大多数其他语言一样，Julia 依赖于特定专业用途的代码库，我们只是下载了我们需要的代码。我们最初感兴趣的一个叫做*图*。这为我们提供了创建数据可视化的能力。

所以我们需要执行的第一段代码是这样的:

```
using Plots
```

这告诉 Julia 加载我们将用来创建可视化的库。

## 你的第一次想象

这里有一个简单的程序来确保一切正常。

```
using Plots
x = 1:10; y = rand(10); # These are the plotting data 
plot(x,y, label="my label")
```

运行它将在 VSCode 的一个新选项卡中生成类似下图的内容(要运行代码，请在命令面板中找到该命令(Ctrl+Alt+P)将有许多选项，但您希望执行整个文件):

![](img/5759bb90c5ff835b8a4646ef6d0b9c37.png)

第一次朱莉娅可视化

这可能需要一点时间，因为当你第一次执行代码时，Julia 代码是动态编译的，这使得你第一次运行时速度变慢，但下一次会变得很快。因此后续的代码运行会更快。

让我解释一下代码是怎么回事。

*x = 1:10；y =兰特(10)；#这些是绘图数据*

这位代码创建两位数据，一位称为
*x* ，另一位称为 *y* 。

*x* 被赋予从 1 到 10 的数字范围的值，而 *y* 被赋予 10 个伪随机数的范围(每个伪随机数将具有 0 到 1 之间的值)。因此，我们在这里有一个图形的基础:一个范围从 1 到 10 的 x 轴和 x 轴上每个点的 y 值。

下一步很简单。

*plot(x，y，label= "我的标签")*

这段代码调用一个函数来绘制图表，我们所做的就是给它 x 和 y 值——另外，我们还给它一个标签。

这很简单，但是，当然，我们真的想可视化一些真实的数据。

## 真实数据——天气

我有几个表，我在其他文章中用过。这是一组关于过去几十年英国伦敦天气的数据。我是从英国气象局提供的公共表格中推导出来的。

数据记录了每个月记录的最高温度、最低温度、降雨量和日照时数。我有两个文件，一个是完整的数据集，一个是 2018 年的，只有。它们是 CSV 格式的，就像您可以导入到电子表格中一样。

为了处理这些文件，我们需要另一个允许我们读取 CSV 文件的库。

我们可以看到在下一段代码中引用的库，即“使用 CSV ”,下面一行实际上是将数据读入变量 *d* 。

```
using CSV
d = CSV.read("D:notebooks/juliaplot/london2018.csv")
print(d)
```

运行代码的结果是，我们现在有了一个如下所示的数据表:

![](img/1f88d3a8f0923ededf7f799b08a881e0.png)

当然，您需要将文件名的路径更改为下载到的位置。

# 来自有意义数据的图表

我们下载的数据是一个表格，有 6 栏:*年*、*月*、 *Tmax* (最高温度)、 *Tmin* (最低温度)、 *Rain* (降雨量单位为毫米)和 *Sun* (日照时数)。

这是数据的子集(仅针对 2018 年)，因此所有行中的*年*列具有相同的值。

# 条形图

所以，我们有的是 2018 年每个月的数据。如果我们想在柱状图中绘制每个月的最高温度，我们可以这样做:

```
using Plots
using CSV
d = CSV.read("D:notebooks/juliaplot/london2018.csv")
bar(d.Month,d.Tmax)
```

*bar* 是一个绘制条形图的函数(还有什么？)并且我们提供了 x 和 y 轴的列。我们通过使用数据表的名称，后跟列的名称来实现这一点。这两个名字用一个点隔开。

这里，我们将列*月*作为 x 轴，将 *Tmax* 作为 y 轴，因此我们在表格中绘制了 12 个月中每个月的最高记录温度。

将它放入一个新的代码单元并运行它，您会惊喜地(我希望)看到这个图表:

![](img/4aa34475ccc2fc5d4ab4f96bc4843768.png)

条形图

# 折线图

如果你想制作一个折线图，你可以做同样的事情，但是使用函数 *plot*

```
plot(d.Month, d.Tmax)
```

![](img/c6cad50569a1cb59159aa1758a4f129f.png)

折线图

如果您想在同一张图表上绘制最高和最低温度，您可以这样做:

```
plot(d.Month, [d.Tmax, d.Tmin], label=["Tmax","Tmin"])
```

请注意，d.Tmax 和 *d.Tmin，*这两个值在方括号中组合在一起，并用逗号分隔。这是向量或一维数组的符号。此外，我们还为线条添加了标签，这些标签以相同的方式分组。我们得到了这样一个图表:

![](img/6263f9960b04de30b6e0e872faf4d9f4.png)

# 散点图

或者散点图怎么样？散点图通常用于查看是否可以在数据中检测到模式。这里我们绘制了最高温度与日照时数的关系图。正如你所料，这是一种模式:一种明显的相关性——日照时间越长，气温越高。

```
scatter(d.Tmax, d.Sun)
```

![](img/e9422eb0682221860fe1b3b331f3d10a.png)

# 圆形分格统计图表

我们拥有的数据并不适合被描绘成饼图，所以我们将再次生成一些随机数据— 5 个随机数。

```
x = 1:5; y = rand(5); # These are the plotting data
pie(x,y)
```

![](img/fac0036a5249a6527c1c1c58a8b18fa3.png)

# 柱状图

现在，我们将加载更多的数据:

```
d2 = CSV.read("londonweather.csv")
```

这类似于我们一直使用的数据表，但更大，因为它涵盖了几十年的数据，而不仅仅是一年。这给了我们大量的降雨量数据，这样我们就可以看到伦敦在一段较长的时间内的降雨量分布。要创建直方图，我们运行以下代码:

直方图(d2。Rain，label= "降雨")

所以整个程序看起来像这样:

```
using Plots
using CSV
d2 = CSV.read("d:notebooks/juliaplot/londonweather.csv")
histogram(d2.Rain, label="Rainfall")
```

这是结果。

![](img/7a15388e31113d1677f4527f3c2cc488.png)

# 保存图表

在 VSCode 环境中看到这些图表当然很好，但是为了有用，我们需要能够保存它们以便在我们的文档中使用它们。

您可以像这样保存图表:

```
histogram(d2.Rain, label="Rainfall") 
savefig("d:notebooks/juliaplot/myhistogram.png")
```

运行此代码时，不会显示图表，但会以给定的文件名保存。

# 结论

我希望这是有用的——我们已经查看了 Julia Plots 中可用的基本图表。朱莉娅的故事远比我们在这篇短文中看到的要多，你也可以用情节做更多的事情，但我希望你已经发现这篇介绍已经激起了你探索更多的欲望。

## 下载

右键单击下面的链接下载文件，然后将它们复制到 Julia 将使用的目录中。数据文件在这里: [london2018.csv](https://github.com/alanjones2/dataviz/raw/master/london2018.csv) 和 [londonweather.csv](https://github.com/alanjones2/dataviz/raw/995f48b31ab4b9a1af32352042b5e6cfe83ebf3b/londonweather.csv)

一如既往，感谢阅读。如果你想知道我什么时候发表新文章，请考虑在这里注册一个电子邮件提醒。

如果你不是一个媒体订阅者，那就注册吧，这样你就可以每月花 5 美元阅读尽可能多的文章。在这里注册，我会赚一点佣金。