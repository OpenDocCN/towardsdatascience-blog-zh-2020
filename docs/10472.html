<html>
<head>
<title>Populating the Employee Database with Test Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用测试数据填充员工数据库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/populating-the-employee-database-with-test-data-aa76419eebb6?source=collection_archive---------49-----------------------#2020-07-22">https://towardsdatascience.com/populating-the-employee-database-with-test-data-aa76419eebb6?source=collection_archive---------49-----------------------#2020-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a5d3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从雇员数据库的例子开始，这一次我们将弄清楚如何用测试数据填充数据库。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/77da07e56870ddf1d2d852cc67cfec0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yFppAyp-bu6J1Oq1Otvt0Q.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">图片来自<a class="ae kz" href="https://www.piqsels.com/en/public-domain-photo-frpof" rel="noopener ugc nofollow" target="_blank"> Piqsels </a> (CC0)</p></figure><p id="07fb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我们将研究用虚拟数据填充雇员数据库的过程，我们在<a class="ae kz" rel="noopener" target="_blank" href="/sql-database-design-basics-with-example-8dcce4b0c687">的上一篇文章</a>中设计了虚拟数据的模式。当我们想要运行一些测试时，用虚拟数据填充 SQL 数据库会非常有用。最方便的方法是借助可视化数据生成工具用随机数据填充 SQL 表。</p><h1 id="34f9" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">借助 SQL Server 数据生成器生成数据</h1><p id="7e2c" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">为此，我们将使用 SQL Server 的<a class="ae kz" href="https://www.devart.com/dbforge/sql/data-generator/" rel="noopener ugc nofollow" target="_blank">数据生成器</a>工具，它被集成到 SSMS 中，也包含在<a class="ae kz" href="https://www.devart.com/dbforge/" rel="noopener ugc nofollow" target="_blank"> dbForge Studio </a>中。应该注意，真实的测试数据是基于列名、维度和数据类型生成的。除此之外，还考虑了表之间的关系，因为数据生成过程依赖于它们。</p><p id="12c7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要打开该组件，在<a class="ae kz" href="https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-2017" rel="noopener ugc nofollow" target="_blank"> SSMS </a>中的必要数据库上右击“新数据生成…”:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/a7aab7741cd15650210131bcc23bad30.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*aolTrP4nXn-Pcx1pxQooHw.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img。1.在 SSMS 运行 SQL Server 工具的数据生成器</p></figure><p id="98dd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您使用的是 dbForge Studio，请在主菜单中选择工具\新数据生成…:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/cb18124828f3e679f6b349248cdceff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*HfgqcxgYH_bTPEifeT4__g.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.2 .在 dbForge Studio 中运行 SQL Server 工具的数据生成器</p></figure><p id="6477" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在出现的窗口中，在“Connection”选项卡上，您可以看到当前的 MS SQL Server 实例和为数据生成选择的数据库，可以对其进行编辑(如果需要)。然后单击“下一步”按钮:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mv"><img src="../Images/812034fb482fe9cb9de861ac2a2b9d80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P_tEhuEfhJgTOH7WNLlTlw.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.3 .设置“连接”选项卡</p></figure><p id="253d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">接下来，在“选项”选项卡上，让我们设置数据库的数据生成选项:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mw"><img src="../Images/015a57bcc68508411fae10c9b5678668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8a6ve_C2uhaGGkx707lr-g.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.4 .设置数据生成选项</p></figure><p id="d303" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">请注意，您可以在不同的模式下生成 SQL 测试数据:</p><ol class=""><li id="5a3a" class="mx my it lc b ld le lg lh lj mz ln na lr nb lv nc nd ne nf bi translated">按指定的行数(默认为 1000 行)</li><li id="479f" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">按现有数据在总量中所占的百分比(默认为 10 %)</li><li id="e3b1" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">按时间生成数据(默认为 10 秒)</li></ol><p id="5b9a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您也可以通过设置“生成前从表中截断数据”参数，在生成前清除数据。</p><p id="0145" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可以通过以下方式之一设置值分配模式:</p><ol class=""><li id="261f" class="mx my it lc b ld le lg lh lj mz ln na lr nb lv nc nd ne nf bi translated">按时间戳随机</li><li id="a51a" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">按种子随机(默认为 1)</li><li id="ba31" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">连续的</li></ol><p id="d917" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">此外，您可以设置列属性:</p><ol class=""><li id="8b77" class="mx my it lc b ld le lg lh lj mz ln na lr nb lv nc nd ne nf bi translated">将值设置为唯一</li><li id="5f1a" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">包括空值(默认为 10%的行)</li><li id="e757" class="mx my it lc b ld ng lg nh lj ni ln nj lr nk lv nc nd ne nf bi translated">包括空值(默认为 10%的行)</li></ol><p id="5b67" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您可以按下位于数据生成设置窗口左下角的“保存命令行…”按钮，将设置保存到. bat 文件中。</p><p id="29cd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">完成设置后，在数据生成设置窗口的右下角，按下“打开”按钮。</p><p id="9464" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后，您将看到一个进度条，显示表元数据加载。之后，将出现一个窗口，其中包含每个选定表格的详细数据生成设置:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nl"><img src="../Images/42c8e911dbfb4b864a8672772790a5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWVVfq8cjr2cMGSqZN55yg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.5 .每个选定表格的详细数据生成设置</p></figure><p id="fab2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在左边，您应该选择想要填充的表和列，在右边，您应该为所选的表设置表生成模式。</p><p id="b184" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">同时，下面是生成数据的实例(注意代表真实姓名)。</p><p id="3886" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在右上角，有一个上面描述的数据生成设置按钮。</p><p id="5680" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要开始数据生成过程，请单击窗口顶部中间的绿色箭头。然后，您将看到用于选择附加设置的窗口。在这里，在 Output 选项卡上，您需要准确地选择生成数据的位置，以脚本的形式，将其保存到文件或数据库。让我们选择最后一个选项，然后按下一步:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mv"><img src="../Images/c66b861900e0ebc6104c92916f6ba5ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9tBJzGbPQ5aYgGyilOV1Q.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img。6.设置“输出”选项卡</p></figure><p id="fb8a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后，您可以在“选项”选项卡上设置其他参数。在这种情况下，您需要取消选中数据库备份选项，然后按“下一步”:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mv"><img src="../Images/dc288e57366b9710af1e0b89b7f74383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQFiBDwsthzEhJx1WEHnPA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.7 .设置“选项”选项卡</p></figure><p id="f55c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在“附加脚本”选项卡上，您可以设置附加脚本。在我们的例子中，我们只需按“下一步”:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nm"><img src="../Images/8c8d5e9275d953201c8050c5dec44e0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ompX1jyUtjf89LxFneybSQ.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.8 .设置“附加脚本”选项卡</p></figure><p id="e6a0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在“Summary”选项卡上，我们可以看到关于设置和警告的信息。在这里，您也可以将所有设置保存为. bat 文件，方法是按下左下角的“保存命令行…”按钮。要运行数据生成流程，您需要按“生成”按钮:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mv"><img src="../Images/ecc8fa143ae5a8eec69833679ef06886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IiDfKnndWpuD77yk0W6Vg.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.9 .摘要选项卡上的一般信息和警告</p></figure><p id="cf02" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">出现数据生成过程窗口:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d7195e3a29baf4d6bca7578b0af8bceb.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*qPiwEUF2UqqrnRobRYy4ZA.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.10 .数据生成流程</p></figure><p id="b953" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">然后，这些表将被数据填充。例如，Employee 表具有以下生成的数据:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ada15a76b8d1b8b2b62500780dfdfe01.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*IuCLtnzF4m3FhwIfC7FALA.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">Img.11 .雇员表中生成数据的示例</p></figure><h1 id="2812" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结论</h1><p id="f5f3" class="pw-post-body-paragraph la lb it lc b ld mo ju lf lg mp jx li lj mq ll lm ln mr lp lq lr ms lt lu lv im bi translated">总之，我们用真实的数据填充了数据库，用于测试功能和负载。可以为负载测试生成更多的随机数据。除此之外，测试的过程可以通过 dbForge 单元测试工具来加速。</p><p id="5a8a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">此外，通过使用 SQL 数据生成，您不仅可以计算数据库增长率，还可以计算数据量增加导致的查询性能差异。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="da6b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><em class="nw">原载于 2020 年 7 月 22 日 https://blog.devart.com</em><a class="ae kz" href="https://blog.devart.com/generate-test-data-with-sql-data-generator.html" rel="noopener ugc nofollow" target="_blank"><em class="nw"/></a><em class="nw">。</em></p></div></div>    
</body>
</html>