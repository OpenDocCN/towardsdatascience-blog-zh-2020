<html>
<head>
<title>Social Distancing to Slow the Coronavirus</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">社交距离减缓冠状病毒</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/social-distancing-to-slow-the-coronavirus-768292f04296?source=collection_archive---------2-----------------------#2020-03-12">https://towardsdatascience.com/social-distancing-to-slow-the-coronavirus-768292f04296?source=collection_archive---------2-----------------------#2020-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cbb7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">模拟新冠肺炎峰的变平</h2></div><p id="30ea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">新冠肺炎已经在全世界迅速传播。意大利现在已经进入封锁状态，加州已经宣布进入紧急状态，全球各地的学校和大学已经取消了面对面的课程和活动，企业已经减少了旅行，并推行在家工作的政策。所有这些都是为了减缓疾病的传播。这些努力被广泛地称为社交距离。</p><p id="fe69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个想法是为了减少人与人之间的接触，从而降低疾病传播的可能性。这种情况的影响经常在如下图所示的图像中表现出来，红色区域被展平，以尽可能地传播疾病。这有助于确保有足够的资源用于患病人群，这将有助于提高存活率。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/4cdd9a06f67ff882514f3c342bb13809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-J6B-uPOnRMmbMJCWilCNw.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">拉平曲线以保持感染可控(来源:<a class="ae lu" href="https://www.fast.ai/2020/03/09/coronavirus/" rel="noopener ugc nofollow" target="_blank"> Fast.ai </a>)。</p></figure><p id="7077" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们如何确定这种距离策略的价值，并对这种传播进行建模？</p><h1 id="f692" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="d3be" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我们走过一个SEIR流行病学模型，并用Python进行模拟。第一个模型是没有社交距离的基本SEIR，然后我们加入社交距离来展示这些策略的潜在有效性。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="929f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SEIR模型是一种用于模拟疾病如何在人群中传播的房室模型。这是<strong class="kk iu">的首字母缩写，易感，暴露，感染，康复</strong>。当一种疾病被引入一个群体时，人们从这些阶层(或区间)中的一个转移到下一个。当他们达到状态时，他们不再会被感染，这取决于你的解释，他们要么从疾病中幸存下来，现在具有免疫力，要么死于疾病，从人群中消失。</p><p id="814d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是经典SIR模型的<a class="ae lu" rel="noopener" target="_blank" href="/how-quickly-does-an-influenza-epidemic-grow-7e95786115b3">扩展，只是增加了一个等式来显示那些暴露在外的人。完整模型如下所示:</a></p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/b1b1b22e118400f64ca54375fc05d4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*dXCHv_pSYiMG90efXiFNPQ.png"/></div></figure><p id="7695" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在时域中有四个ODE，有三个参数:α、β和γ。</p><ul class=""><li id="f416" class="na nb it kk b kl km ko kp kr nc kv nd kz ne ld nf ng nh ni bi translated">α是潜伏期的倒数(1/t _孵育)</li><li id="e754" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">β是群体中的平均接触率</li><li id="7511" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">γ是平均传染期的倒数(1/t _传染)</li></ul><p id="f08a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">方程(1)是易感人群的变化，受感染者人数及其与感染者接触人数的调节。等式(2)给出了接触过这种疾病的人。它根据接触率而增长，根据人们被感染的潜伏期而减少。</p><p id="8122" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">等式(3)给出了基于暴露人群和潜伏期的感染者的变化。它根据传染期而减少，因此γ越高，人们死亡/恢复越快，并进入方程(4)中的最后阶段。最后一个等式，数字(5)，是一个约束条件，表示模型中没有出生/迁移效应；我们自始至终都有固定的人口。</p><p id="d7cb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有一个参数我们应该讨论，臭名昭著的R0值。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi no"><img src="../Images/04dc747f617595cbf9592d5a176606b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*kc4-Bv2nzIvb9xG6ELHuzA.png"/></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">R0值越大表示传染病越多(来源:<a class="ae lu" href="https://www.healthline.com/health/r-nought-reproduction-number#conditions" rel="noopener ugc nofollow" target="_blank">HealthLine.com</a>)，</p></figure><p id="413c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该值定义了疾病传播的速度，并且可以通过等式(6)中给出的关系与我们的参数相关联。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi np"><img src="../Images/5c04483340b354a648980cb991760337.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*K0qnrBZup_ToQeODajV-aw.png"/></div></figure><h1 id="af5e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">模拟冠状病毒</h1><p id="b1e6" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">有了这些方程，我们可以建立冠状病毒本身的模型，试图更好地了解它可能如何传播。关键是确定α、β和γ的值，这样我们就可以看到它是如何传播的。</p><p id="0e32" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://www.thelancet.com/journals/langlo/article/PIIS2214-109X(20)30074-7/fulltext" rel="noopener ugc nofollow" target="_blank">最近对新冠肺炎</a>的一项研究为我们估算了其中的一些值(Hellewell等人，2020)，因此我们可以使用他们的一些参数估计来让我们的模型起飞。</p><ul class=""><li id="04de" class="na nb it kk b kl km ko kp kr nc kv nd kz ne ld nf ng nh ni bi translated">潜伏期= 5天-&gt; α = 0.2</li><li id="3be1" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">R0 = 3.5</li></ul><p id="abfa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不幸的是，这篇论文没有提供γ的值，但是我们可以从另一篇论文(它使用了更复杂的房室模型)中得到一个估计<a class="ae lu" href="https://arxiv.org/pdf/2002.06563.pdf" rel="noopener ugc nofollow" target="_blank">，从而得到我们2天的1/γ值，所以γ = 0.5。</a></p><p id="59c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将R0和γ值代入等式(6)，我们得到β = 1.75的估计值。</p><p id="83fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，是时候把这个模型放到Python中了。</p><h1 id="d183" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Python中的基本SEIR模型</h1><p id="d31d" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我们将使用<a class="ae lu" rel="noopener" target="_blank" href="/a-beginners-guide-to-simulating-dynamical-systems-with-python-a29bc27ad9b1">半隐式欧拉方法</a> — <a class="ae lu" rel="noopener" target="_blank" href="/how-quickly-does-an-influenza-epidemic-grow-7e95786115b3">对此进行模拟，就像我用SIR模型</a>演示的那样。这只需要取S、E、I和R的最近值，加上乘以时间步长的方程。这方面的代码如下:</p><pre class="lf lg lh li gt nq nr ns nt aw nu bi"><span id="658f" class="nv lw it nr b gy nw nx l ny nz">def base_seir_model(init_vals, params, t):<br/>    S_0, E_0, I_0, R_0 = init_vals<br/>    S, E, I, R = [S_0], [E_0], [I_0], [R_0]<br/>    alpha, beta, gamma = params<br/>    dt = t[1] - t[0]<br/>    for _ in t[1:]:<br/>        next_S = S[-1] - (beta*S[-1]*I[-1])*dt<br/>        next_E = E[-1] + (beta*S[-1]*I[-1] - alpha*E[-1])*dt<br/>        next_I = I[-1] + (alpha*E[-1] - gamma*I[-1])*dt<br/>        next_R = R[-1] + (gamma*I[-1])*dt<br/>        S.append(next_S)<br/>        E.append(next_E)<br/>        I.append(next_I)<br/>        R.append(next_R)<br/>    return np.stack([S, E, I, R]).T</span></pre><p id="5146" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于任何一个ODE系统，我们都需要提供初始值。我们将对我们的s0、E0等使用标准化的总体值。因此，如果我们假设我们的人口中有1万人，我们从一个暴露者开始，其余9999人易感，我们有:</p><ul class=""><li id="a3d1" class="na nb it kk b kl km ko kp kr nc kv nd kz ne ld nf ng nh ni bi translated">s _ 0 = 1–1/10000</li><li id="72bb" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">E_0 =万分之一</li><li id="5973" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">I_0 = 0</li><li id="4b5c" class="na nb it kk b kl nj ko nk kr nl kv nm kz nn ld nf ng nh ni bi translated">R_0 = 0</li></ul><p id="f2aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以转向模拟本身，将这些值以1天的时间步长插入Python。</p><pre class="lf lg lh li gt nq nr ns nt aw nu bi"><span id="e201" class="nv lw it nr b gy nw nx l ny nz"># Define parameters<br/>t_max = 100<br/>dt = .1<br/>t = np.linspace(0, t_max, int(t_max/dt) + 1)</span><span id="0420" class="nv lw it nr b gy oa nx l ny nz">N = 10000<br/>init_vals = 1 - 1/N, 1/N, 0, 0<br/>alpha = 0.2<br/>beta = 1.75<br/>gamma = 0.5<br/>params = alpha, beta, gamma<br/># Run simulation<br/>results = base_seir_model(init_vals, params, t)</span></pre><p id="960d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们主要对社交距离的扁平化效应感兴趣，所以让我们画出模拟的<strong class="kk iu"> E </strong>和<strong class="kk iu"> I </strong>术语。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/2f3cbdfb1375018b6743c40608cc5ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B7oKJwYvLCnXC-tUHhN4NA.png"/></div></div></figure><p id="214c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在没有社会距离的情况下看待我们的基本案例。它表明，在高峰时，我们人口的10%将在第一次接触后的40天后感染该疾病。这很有可能是一种非常严重的感染，即使它是相对短暂的。</p><p id="025f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们转向社交距离的影响以及如何对其建模。</p><h1 id="3c80" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">具有社会距离的冠状病毒</h1><p id="8123" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">社交距离包括避免大型聚会、身体接触和其他减少传染病传播的努力。根据我们的模型，这将影响我们的接触率β。</p><p id="0853" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们引入一个新的值ρ来捕捉我们的社交距离效应。这将是0-1之间的一个常量，其中0表示<em class="oc">每个人</em>都被锁定和隔离，而1相当于我们上面的基本情况。为了将它引入我们的模型，我们将修改上面的等式(1)和(2)，将它乘以我们的β，写出等式(1’)和(2’)。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi od"><img src="../Images/6e3732fd93fdd8a91ee8b150e96df18f.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*xq6xxC0Ff54JX14iWHcVww.png"/></div></figure><p id="94bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们回到基线模型，我们只需要将ρ值添加到代码中，如下所示。</p><pre class="lf lg lh li gt nq nr ns nt aw nu bi"><span id="b4ab" class="nv lw it nr b gy nw nx l ny nz">def seir_model_with_soc_dist(init_vals, params, t):<br/>    S_0, E_0, I_0, R_0 = init_vals<br/>    S, E, I, R = [S_0], [E_0], [I_0], [R_0]<br/>    alpha, beta, gamma, rho = params<br/>    dt = t[1] - t[0]<br/>    for _ in t[1:]:<br/>        next_S = S[-1] - (rho*beta*S[-1]*I[-1])*dt<br/>        next_E = E[-1] + (rho*beta*S[-1]*I[-1] - alpha*E[-1])*dt<br/>        next_I = I[-1] + (alpha*E[-1] - gamma*I[-1])*dt<br/>        next_R = R[-1] + (gamma*I[-1])*dt<br/>        S.append(next_S)<br/>        E.append(next_E)<br/>        I.append(next_I)<br/>        R.append(next_R)<br/>    return np.stack([S, E, I, R]).T</span></pre><p id="6621" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们将ρ设置为1、0.8和0.5，我们可以想象出当我们通过简单的日常行动加大努力来遏制疾病时的扁平化效应。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/8aa03e6be4aaa23dd6ad0d8f05e48011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wFTtO07b-gCiV8t5DsOEug.png"/></div></div></figure><p id="1b5f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我再次显示了我们的模型的<strong class="kk iu"> E </strong>和<strong class="kk iu"> I </strong>值，它们用社交距离因子ρ进行了颜色编码。我们可以看到扁平化效应在这里发生，因为更多的社会距离在整个人口中发生，这具有直观的意义，因为它降低了接触率。我们从10%的人口同时被感染的基础病例峰值到大约7.5%再到3%的低水平。还要注意的是，它给了人们更多的时间去准备，因为高峰被推到了更远的未来。</p><p id="2219" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些社交距离的情景可能会通过给治疗和供应更多的时间来提高疾病的存活率，同时保持较低的峰值。</p><p id="576f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，这都是基于我们的社交距离因子ρ(以及任何其他可能起作用的因素)的准确性。然而，鉴于病毒的复杂性质，以及像我们这里这样将现实世界特征的相互作用归入包罗万象的因素，很难认真对待这样一个简单的模型。</p></div></div>    
</body>
</html>