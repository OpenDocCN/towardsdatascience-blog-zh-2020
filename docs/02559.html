<html>
<head>
<title>Discovering All the Charms in Python3 String Format Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发现 Python3 字符串格式函数的所有魅力</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/discovering-all-the-charms-in-python3-string-format-function-af07d609c760?source=collection_archive---------32-----------------------#2020-03-11">https://towardsdatascience.com/discovering-all-the-charms-in-python3-string-format-function-af07d609c760?source=collection_archive---------32-----------------------#2020-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/bb39b67834991402e19a3c6aa3396780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yq1KRaSI6MPv0K5j"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@cdr6934?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯里德</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><div class=""/><div class=""><h2 id="daa9" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">一个神奇的函数格式化 Python 字符串，给你更多呈现字符串和数字的想法。</h2></div><p id="3c6b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">由于 Python3 涉及到了<code class="fe lu lv lw lx b"><a class="ae jg" href="https://docs.python.org/3.8/library/stdtypes.html#str.format" rel="noopener ugc nofollow" target="_blank">str.format()</a></code>函数，我们有了一种更优雅的方式来定义字符串模板，并将变量值作为参数插入到这个函数中。</p><p id="37db" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文列出了使用该函数的所有不同方式，并展示了我们可以用它做的事情的潜力。</p><h1 id="3b20" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x01 按位置传递参数</h1><p id="81fd" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们需要使用花括号<code class="fe lu lv lw lx b">{}</code>作为占位符，然后将格式函数中的参数传递给字符串模板。有许多使用这种技术的方法，如下所列。</p><p id="65e3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们不指定位置，参数将按默认顺序传递。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="f04a" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{} {} {}'.format('I', 'love', 'Python')<br/>'I love Python'</span></pre><p id="2b69" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们也可以定义位置，实现同样的事情。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="5f58" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{0} {1} {2}'.format('I', 'love', 'Python')<br/>'I love Python'</span></pre><p id="41d2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在字符串模板中，我们可以自定义位置。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="aadf" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{1} {0} {2}'.format('love', 'I', 'Python')<br/>'I love Python'</span></pre><p id="ec32" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果<code class="fe lu lv lw lx b">format</code>函数中的参数比字符串模板中定义的多，那么多余的参数将被忽略。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="ce7e" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{0} {1} {2}'.format('I', 'love', 'Python', 'yes')<br/>'I love Python'</span></pre><p id="797f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们还可以在字符串模板中的特定位置多次使用该参数。当然，这样使用<code class="fe lu lv lw lx b">format</code>功能需要明确指定位置。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="11be" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{0} {1} {2}. {3} {1}s {2}, too'.format('I', 'love', 'Python', 'She')<br/>'I love Python. She loves Python, too'</span></pre><h1 id="ce83" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x02 通过键传递参数</h1><p id="9afe" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">与位置号相比，使用文本定义的键会使代码更具可读性。所以，有时你可能想通过键传递参数。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="5348" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; '{subject} {verb} {object}'.format(subject='I', verb='love', object='Python')<br/>'I love Python'</span></pre><h1 id="227d" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x03 传递字典</h1><p id="da49" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们可以直接传入一个字典，而不是在<code class="fe lu lv lw lx b">format</code>函数中使用“键=值”对，因为它也是“键:值”格式。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="2a1b" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; dict = {'subject': 'I', 'verb': 'love', 'object': 'Python'}<br/>&gt;&gt;&gt; '{subject} {verb} {object}'.format(**dict)<br/>'I love Python'</span></pre><h1 id="4399" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x04 传递列表</h1><p id="e966" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在使用<code class="fe lu lv lw lx b">format</code>函数将值传递给字符串模板之前，不必从列表中提取值。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="0d01" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; l = ['I', 'love', 'Python']<br/>&gt;&gt;&gt; '{0} {1} {2}'.format(*l)<br/>'I love Python'</span></pre><p id="2e48" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还可以通过下标访问列表中的元素。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="e73d" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; l = ['I', 'love', 'Python']<br/>&gt;&gt;&gt; '{0[0]} {0[1]} {0[2]}'.format(l)<br/>'I love Python'</span></pre></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="7516" class="ly lz jj bd ma mb np md me mf nq mh mi kp nr kq mk ks ns kt mm kv nt kw mo mp bi translated">高级用法:格式化符号</h1><p id="db82" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">在花括号<code class="fe lu lv lw lx b">{}</code>中，我们不仅可以插入位置指示器，还可以插入格式化符号。下表显示了可用的格式化符号。</p><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/07781ca167227ebcc6937fde3bfab928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G-q3rA7KrSOVEV5EKiRh4g.png"/></div></div></figure><p id="3768" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上表完全是用<code class="fe lu lv lw lx b">format</code>函数打印出来的，源代码如下。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="0c12" class="nd lz jj lx b gy ne nf l ng nh">def table():<br/> print('|| {:=^15} || {:=^50} ||'.format(' symbols ', ' meanings '))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format(':', 'format indicator'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('-/=\\#', 'filling characters'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('&lt;', 'left aligned'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('&gt;', 'right aligned'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('^', 'centre aligned'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('10 (number)', 'width'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format(',', 'formating number'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('.', 'decimal precision'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('f', 'floating number indicator'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('b', 'binary number'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('d', 'decimal number'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('o', 'octal number'))<br/> print('|| {:&lt;15} || {:&lt;50} ||'.format('x', 'hex number'))<br/> print('|| {0:=^15} || {0:=^50} ||'.format(''))</span></pre><p id="058e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些格式化符号将在下一节解释。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="cc03" class="ly lz jj bd ma mb np md me mf nq mh mi kp nr kq mk ks ns kt mm kv nt kw mo mp bi translated">0x05 填充、对齐和宽度</h1><p id="49e4" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated"><strong class="la jk">对准</strong>和<strong class="la jk">宽度</strong>必须一起使用。前者必须是<code class="fe lu lv lw lx b">&lt;</code>左对齐、<code class="fe lu lv lw lx b">&gt;</code>右对齐或<code class="fe lu lv lw lx b">^</code>居中对齐，后者必须是整数。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="13da" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('|{:&lt;15}|'.format('left'))<br/>|left           |<br/>&gt;&gt;&gt; print('|{:^15}|'.format('centre'))<br/>|    centre     |<br/>&gt;&gt;&gt; print('|{:&gt;15}|'.format('right'))<br/>|          right|</span></pre><p id="ba55" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果提供了填充字符，上面字符串中的所有空格都将被给定的字符替换。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="b97d" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('|{:=&lt;15}|'.format('left'))<br/>|left===========|<br/>&gt;&gt;&gt; print('|{:*^15}|'.format('centre'))<br/>|****centre*****|<br/>&gt;&gt;&gt; print('|{:$&gt;15}|'.format('right'))<br/>|$$$$$$$$$$right|</span></pre><p id="ab5f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，填充字符可以是任何字符，但只能是一个字符。</p><h1 id="67db" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x06 十进制精度</h1><p id="071a" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated"><code class="fe lu lv lw lx b">format</code>功能还允许我们指定十进制数的精度。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="58fb" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:.3f}'.format(3.1415926))<br/>3.142</span></pre><p id="e934" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们甚至可以通过计算直接显示百分比</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="e59c" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:.2%}'.format(7/8))<br/>87.50%</span></pre><h1 id="2469" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x07 数字格式</h1><p id="4cfd" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我发现<code class="fe lu lv lw lx b">format </code>功能的数字格式化功能还是挺有用的。它可以很容易地在正确的位置添加逗号。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="1396" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:,}'.format(123456789))<br/>123,456,789</span></pre><p id="525d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，我们可以控制正数和负数的输出格式，以便有更好的表示。</p><p id="e060" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">始终显示标志:</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="908c" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:+f}\n{:+f}'.format(100, -100))<br/>+100.000000<br/>-100.000000</span></pre><p id="3c66" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在正数前加一个空格，使数字从负数的相同位置开始:</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="2f32" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{: f}\n{: f}'.format(100, -100))<br/> 100.000000<br/>-100.000000</span></pre><h1 id="7736" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x08 基数转换</h1><p id="bfe0" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">我们还可以使用<code class="fe lu lv lw lx b">format</code>函数快速转换数字的基数。</p><p id="3992" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">十进制到二进制:</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="7bd4" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:b}'.format(100))<br/>1100100</span></pre><p id="2116" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">二进制到十进制</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="752d" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:d}'.format(0b1100100))<br/>100</span></pre><p id="cae1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">十进制到八进制</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="8008" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:o}'.format(100))<br/>144</span></pre><p id="e25a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">十进制到十六进制</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="50bf" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; print('{:x}'.format(100))<br/>64</span></pre><h1 id="2990" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">0x09 直接将日期时间转换为字符串</h1><p id="6f62" class="pw-post-body-paragraph ky kz jj la b lb mq kk ld le mr kn lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">通常我们需要使用<code class="fe lu lv lw lx b">strftime</code>函数将一个<code class="fe lu lv lw lx b">datetime</code>对象转换成特定格式的<code class="fe lu lv lw lx b">string</code>类型。但是，如果你只想打印<code class="fe lu lv lw lx b">datetime</code>，你可以不使用该功能。</p><pre class="mv mw mx my gt mz lx na nb aw nc bi"><span id="870a" class="nd lz jj lx b gy ne nf l ng nh">&gt;&gt;&gt; from datetime import datetime<br/>&gt;&gt;&gt; print('{:%d-%B,%Y %A %H:%M:%S}'.format(datetime.now()))<br/>11-March,2020 Wednesday 22:17:44</span></pre><h1 id="86a2" class="ly lz jj bd ma mb mc md me mf mg mh mi kp mj kq mk ks ml kt mm kv mn kw mo mp bi translated">摘要</h1><figure class="mv mw mx my gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/e9a883effae65ef2bd6dc589e4256010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZLnh2XB-CeTJ9v3s"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">尼尔斯·斯塔尔在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="629a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是 Python 中<code class="fe lu lv lw lx b">str.format()</code>函数的全部魔力。我希望这能让你在打印或格式化 Python 字符串和数字时有更多的想法。</p><div class="is it gp gr iu nw"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd jk gy z fp ob fr fs oc fu fw ji bi translated">通过我的推荐链接加入 Medium 克里斯托弗·陶</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ja nw"/></div></div></a></div><p id="7d6b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你觉得我的文章有帮助，请考虑加入 Medium 会员来支持我和成千上万的其他作者！(点击上面的链接)</p></div></div>    
</body>
</html>