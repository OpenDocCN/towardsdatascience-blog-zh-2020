<html>
<head>
<title>How I scrapped and analyzed Paris demographical Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何剔除和分析巴黎人口统计数据的</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-i-scraped-and-analized-paris-demographical-data-7025acf01a09?source=collection_archive---------36-----------------------#2020-03-11">https://towardsdatascience.com/how-i-scraped-and-analized-paris-demographical-data-7025acf01a09?source=collection_archive---------36-----------------------#2020-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a8d7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python和Tableau处理和分析数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/21c2d04daa593234dadfb41b459a0ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*h_IXdfXF8qfq0T1s.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pinterest.fr/pin/614108099163543096/" rel="noopener ugc nofollow" target="_blank">https://www.pinterest.fr/pin/614108099163543096/</a></p></figure><p id="f955" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在过去的20年里，作为法国首都的巴黎一直面临着人口的重大转变。因此，分析它会很有趣。</p><p id="cb08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将从不同的来源收集数据，然后使用基本工具进行分析。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="f036" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据报废</h1><h2 id="6a90" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">巴黎人口演变</h2><blockquote class="ng nh ni"><p id="27b8" class="kz la nj lb b lc ld ju le lf lg jx lh nk lj lk ll nl ln lo lp nm lr ls lt lu im bi translated">“启动我的项目最方便的是什么？”</p></blockquote><p id="28bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始一个项目时的经典问题。<br/>我开始在巴黎数据网站上搜索:<a class="ae ky" href="https://opendata.paris.fr/pages/home/" rel="noopener ugc nofollow" target="_blank">https://opendata.paris.fr/pages/home/</a>。在这里，我只找到当前的人口统计数据，没有关于它的演变。所以这项工作从一些数据废弃开始。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/4b8c8f6b5ffc9eb79834afc7e715aa81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RtSyIvs_lWv_u-6UqS2qag.png"/></div></div></figure><p id="7fd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能知道，巴黎分为几个区，称为“区”。所以我需要每个地区的人口数量。</p><p id="e82d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以用这种表格为每个地区找到一页。这些维基百科页面有着相同的模式:</p><p id="b1da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://fr.wikipedia.org/wiki/1er_arrondissement_de_Paris#D%C3%A9mographie" rel="noopener ugc nofollow" target="_blank">https://fr . Wikipedia . org/wiki/" district number " arressment _ de _ Paris # D % C3 % a9 mographie</a></p><p id="9a21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">经过半个小时的报废，我很快获得了这样的东西:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/4aaa9e8b67f502bfef8ad4c6360d8fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*Cr3k13lj0TbeaCAGLyWnnw.png"/></div></figure><p id="65cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我只收集了1999年以后的数据来做分析。</p><p id="2a9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，我们必须在分析之前处理这些数据</p><p id="382e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要有一个数据框架，其中有区县，年份和人口为特征</p><p id="c120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用融化功能来做到这一点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/5b6aa02a5066a3bbdb29a3522c0312dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gQ0jw95MofJuvi3wzt-DbQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/0b56a0f339f4b189a99dd996ed3b9e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*PbAV9PKI2YzZnyeHEbMZ6Q.png"/></div></div></figure><p id="b47c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将该数据帧保存为csv格式，以备将来使用</p><h2 id="3099" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">区域价格演变</h2><p id="e9c6" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">分析这些地区一年来的价格变化可能很有意思，但我找不到合适的csv来分析。</p><p id="d1dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在巴黎公证处网站上找到了一个pdf格式的表格，里面有我想要的所有信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/0a3503521b3850b96392953530b0a815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WLpHg2CrT5P9dQusf6xs0Q.png"/></div></div></figure><p id="a0b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用一个在线工具把这个pdf文件转换成csv格式。<a class="ae ky" href="https://www.zamzar.com/fr/convert/pdf-to-csv/" rel="noopener ugc nofollow" target="_blank">https://www.zamzar.com/fr/convert/pdf-to-csv/</a></p><p id="63dd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据帧如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/621ccaf69facc0d1e0a6f1a2f010e681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3iGy3-nLu6cXL4WRBJdbbw.png"/></div></div></figure><p id="7c42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们有很多预处理要做</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/98f47ed28594c2daf2c96b85dd691c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bkV_7qiJwOicVWjtM9gifQ.png"/></div></div></figure><ol class=""><li id="d1f1" class="nz oa it lb b lc ld lf lg li ob lm oc lq od lu oe of og oh bi translated">我们要删除“未命名的0”列</li><li id="f893" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">我们在pdf版本中有一些只有文本的行，我们必须删除。</li><li id="5641" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">我们需要“地区名称”具有邮政编码格式。</li><li id="6f99" class="nz oa it lb b lc oi lf oj li ok lm ol lq om lu oe of og oh bi translated">最后，我们需要使用melt函数，以便我们的数据帧具有与人口数据帧相同的格式。</li></ol><h2 id="1807" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">区的面积</h2><p id="0ada" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">为了得到人口密度，你必须将人口除以面积，所以我必须得到每个区的面积<br/>为了得到这些数据，我查阅了这个网站:<a class="ae ky" href="https://fr.vikidia.org/wiki/Arrondissements_de_Paris" rel="noopener ugc nofollow" target="_blank">https://fr.vikidia.org/wiki/Arrondissements_de_Paris</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3233" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">形象化</h1><h2 id="286d" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">可视化价格演变</h2><p id="ff39" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">数据准备好了吗？我们可以想象！<br/>我打开Tableau上的价格数据集，并按地区显示历年的价格</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/60922638d998badfd7c57f41759785c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*yTQ4wgqKismYMCUsqlrJtg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/4293e1bd0d0ca217a24b7907ed0233be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ui7glWhgR4GrJ5Wv.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">1999年至2019年巴黎各区房价的演变</p></figure><p id="17eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以很容易地看到，在过去的几年里，价格飞涨。我们可以用熊猫来发现这种进化。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/7f44d0aa2d6b0159fcbe93e07346c550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFY-7-nrV1WEvWJpZonIng.png"/></div></div></figure><p id="353b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们获得了1999年的2863.75英镑和2019年的10618.6英镑。<br/>价格因此在20年间上涨了4倍。对投资者来说真是太划算了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/028a0a9d624e667441dc80edacd7bef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnDJYwpAVs_U0_m37rv1Cw.png"/></div></div></figure><div class="kj kk kl km gt ab cb"><figure class="or kn os ot ou ov ow paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/69912767b9172beb12057ff986edc963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*jScctMDrjQmfWIWdwf1WBw.png"/></div></figure><figure class="or kn ox ot ou ov ow paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/c01eb0ea986b88b6beeda641bcdb3af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*ixo01UyOyjTwvGF3FDFk1Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk oy di oz pa translated">1999年(左)和2019年(右)的价格分布</p></figure></div><p id="e261" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，第7区和第6区一直是最贵的，而第19区和第20区是最便宜的。然而，我们可以在2019年看到中心区和其他区之间更严格的划界。</p><h2 id="ec9d" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">可视化密度演变</h2><p id="090e" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">为了分析密度，我们需要两个不同的数据集，一个是面积数据集，一个是人口数据集。我们将在“行政区”进行左连接以合并这些</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/205c158e86fc525b75d79fecd8308b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MD6Nfggc4QU61dyf7T0C1A.png"/></div></div></figure><p id="a702" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还需要删除2009年和2011年的行，因为我们没有这两年每个地区的数据。然后，我们可以创建我们的密度特征和导出我们的csv显示在Tableau</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pc"><img src="../Images/10cbaa3677becaaef1f25bb77990b12b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGURwh9MtNMcDJFuf8H9DA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/abcf7efc839256b0ff6652978281d777.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*gXx2r4eIwrcInhkneODOsg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9cbbde96d83d0aa9afbc48d5254470dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kmVox7N3U_Bag_8mHp1cOg.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">巴黎各区人口密度的演变</p></figure><p id="72e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嗯，看来巴黎的人口密度在那些年间并没有太大的变化。无论如何，那样是看不到的。</p><p id="5cc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将尝试检查各区的价格是否会影响其密度。为了做到这一点，我们将编写一个简单的函数，比较每个地区密度最大的年份与价格最小的年份是否相同。</p><p id="4a72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但首先我们需要合并价格和密度数据集。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/6d552a5bba18f185c6a4a45743d23a26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7pfO0DghSqtpRED5Sjupiw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/8250b1a2d2d446bebe8c52ca503b5fd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*rTlzKiekbbRC1lj_LYU_qg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作为输出获得的数据帧</p></figure><p id="4de1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据已经准备好了，我们可以把它们显示在桌面上</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/f81233fdaf10397128b3fc246cac9fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*yNdpvWLN5XODtpxkbMmlDA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/ff4c7e60b046be1188b36b73ac1e3fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6TmcRgQz5HhkIsuMZO90_g.png"/></div></div></figure><p id="dce2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们取得了什么结果？<br/>一般来说，低价格并不意味着特别高的密度，除了中心的四个区(姑且称之为“四大”)。我们可以问自己:为什么会有如此尖锐的分界？</p><p id="c9ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2006年，四大的密度处于最佳状态，但在2017年，由于某种原因，这些地区的密度有所下降。</p><p id="75bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，我们将通过将四大中的地区与不在四大中的地区分开来比较价格和密度的演变。</p><p id="32b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要两个数据集，一个包含四大，另一个包含其他</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/958637635319c6cc40381a65b0101a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AV2G-peVQPagiuGpHEIYYA.png"/></div></div></figure><p id="d849" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后用简单的微积分我们可以得到我们的进化</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/07a776df56a06a87bc754016c6ea08f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5C-lV0xW50Uon6dmnQbnbw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/adbae0179507da02a0ad7ef27f5e49f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*EF6qgWYwAMjShTdNLDAhcA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从2006年到2017年的价格和密度演变</p></figure><p id="d746" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管“四大”的房价涨幅与其他地区几乎相同，但我们看到“四大”的人口密度下降了近5%。</p><p id="d521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们可以假设这些地区的价格继续上涨，而11 452 €的价格上限正在阻止这些地区稳定其人口</p><p id="c1a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总之，我们看到，只要有一点耐心和时间，我们不一定需要现成的数据集来产生强大的分析，我们可以纯粹使用整个互联网作为我们的数据集。</p></div></div>    
</body>
</html>