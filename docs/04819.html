<html>
<head>
<title>Make a Covid-19 Choropleth Map in Mapbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Mapbox 中制作新冠肺炎地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/make-a-covid-19-choropleth-map-in-mapbox-5c93ac86e907?source=collection_archive---------36-----------------------#2020-04-27">https://towardsdatascience.com/make-a-covid-19-choropleth-map-in-mapbox-5c93ac86e907?source=collection_archive---------36-----------------------#2020-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a1dd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">美国各州新冠肺炎比率的可视化</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92ebfa2ded21fa6d18cfd2c132b57737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIL5MxvErJUOm35MwAL4Fw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">美国新冠肺炎确诊病例。(迭戈·乌尔塔多)</p></figure><p id="a4cd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">作者:<a class="lr ls ep" href="https://medium.com/u/3b572bafb88a?source=post_page-----5c93ac86e907--------------------------------" rel="noopener" target="_blank">迭戈·乌尔塔多</a></p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="6a0f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在地图上显示数据分布的一种方法是使用 choropleth，这是一种专题地图，其中的区域根据特定值进行着色。Choropleth 地图提供了一种简单的方法来直观显示某个地理区域内的测量值如何变化或显示某个区域内的可变性水平，是一种<a class="ae ma" href="https://en.wikipedia.org/wiki/Thematic_map" rel="noopener ugc nofollow" target="_blank">专题地图</a>，其中各个区域按照代表每个区域内地理特征汇总的统计变量(如人口密度或新冠肺炎病例)的比例进行着色或图案化。在本指南中，您将使用 Mapbox Studio 和 Mapbox GL JS 制作显示新冠肺炎确诊病例密度的美国各州地图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mb"><img src="../Images/c745d982b54292c1719b0c606b2f44e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zV4ooaA1wJLRy9MFzKUZ_w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">美国各州显示新冠肺炎确诊病例密度(迭戈·乌尔塔多)</p></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="9921" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated"><strong class="ak">入门</strong></h1><p id="12e3" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">在本指南中，您将使用两种地图框工具:</p><ul class=""><li id="a0c6" class="mz na iq kx b ky kz lb lc le nb li nc lm nd lq ne nf ng nh bi translated"><a class="ae ma" href="https://docs.mapbox.com/help/glossary/mapbox-studio" rel="noopener ugc nofollow" target="_blank"> Mapbox Studio </a>添加您的数据并创建您的地图样式。</li><li id="a968" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><a class="ae ma" href="https://docs.mapbox.com/help/glossary/mapbox-gl-js" rel="noopener ugc nofollow" target="_blank"> Mapbox GL JS </a>为您的地图添加交互性，并将其发布到 web 上。</li></ul><h1 id="eff6" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">处理数据</h1><p id="cc78" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">首先，从<a class="ae ma" href="https://covidtracking.com/api/states/daily" rel="noopener ugc nofollow" target="_blank">美国新冠肺炎追踪</a> API、<a class="ae ma" href="https://vega.github.io/vega-datasets/data/us-state-capitals.json" rel="noopener ugc nofollow" target="_blank">美国各州首府</a>和<a class="ae ma" href="https://raw.githubusercontent.com/DiegoFurtt/Covid-19-Choropleth-Map/master/covidData.geojson" rel="noopener ugc nofollow" target="_blank"> GeoJSON </a>表示美国空间(几何图形)的对象下载。根据<a class="ae ma" href="https://tools.ietf.org/html/rfc7946" rel="noopener ugc nofollow" target="_blank"> GeoJSON 规范(RFC 7946) </a>:</p><blockquote class="ns nt nu"><p id="0019" class="kv kw nv kx b ky kz jr la lb lc ju ld nw lf lg lh nx lj lk ll ny ln lo lp lq ij bi translated">GeoJSON 是一种用于编码各种地理数据结构的格式[…]。GeoJSON 对象可以表示一个空间区域(几何)、一个空间有界实体(要素)或一组要素(要素集合)。GeoJSON 支持以下几何类型:点、线串、面、多点、多线串、多面和 GeometryCollection。GeoJSON 中的要素包含几何对象和附加属性，FeatureCollection 包含要素列表。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/5d19325fb6800b6b44f48e4ab84cdaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1krfso9B5UX8cxvV9YRJAw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">美国空间几何 geoJson (Diego Hurtado)</p></figure><p id="97a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们甚至可以使用这些属性来设计我们的传单向量。这里有一个 GeoJSON 的例子:</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="c1a7" class="of md iq ob b gy og oh l oi oj">var geojsonFeature = {     <br/>    "type": "Feature",     <br/>    "properties": {         <br/>    "name": "Alabama",         <br/>    "density": 6270,         <br/>    "geometry": { "type": "Polygon", "coordinates": []} <br/>};</span></pre><h1 id="1e44" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">数据清理</h1><p id="c131" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">下载文件后，过滤并清理数据。这个过程的某些部分是完全可选的，比如重命名或过滤字段。但是，过滤声明 API 没有信息(' AS '，' GU '，' MP '，' VI ')。过滤掉美国投影中未显示的不需要的要素，如关岛和其他美国领土。如果不像关岛那样对这些州进行过滤，重新投影后将会得到空的几何，这会给信息的索引带来问题。</p><p id="9450" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">清理数据后，用每个州的确认数据替换 geoJSON 的密度值。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="d741" class="of md iq ob b gy og oh l oi oj">for i in range(1,len(s_array)):<br/>    features = data_geo['features'][i]<br/>    features['properties']['density'] = int(s_array[i])<br/>    <br/>    data_geo['features'][i]['properties']['density'] =    int(confirmedCasesStates[i])</span></pre><p id="d074" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">更新数据的示例:</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="f3c0" class="of md iq ob b gy og oh l oi oj">data_geo['features'][Alabama]['properties'][6270] =    int(confirmedCasesStates[6500])</span></pre><h1 id="db74" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">在 Studio 中上传并设计风格</h1><p id="d639" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">要学习重新投影您的数据以添加到您的投影中，请跟随我们的如何在 Mapbox Studio 中创建 choropleth 地图的操作视频，跟随<a class="ae ma" href="https://www.youtube.com/watch?v=HZpNeQC0Obg&amp;feature=emb_title" rel="noopener ugc nofollow" target="_blank">本教程</a>使用 map box Studio 创建 choropleth 地图，如果您错过了某些步骤。来源:<a class="ae ma" href="https://www.mapbox.com/videos/how-to/create-a-choropleth-map-in-mapbox-studio/" rel="noopener ugc nofollow" target="_blank">地图框</a></p><p id="6f14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要将 GeoJSON 文件上传到 Mapbox，将其直接拖放到<a class="ae ma" href="https://studio.mapbox.com/tilesets/" rel="noopener ugc nofollow" target="_blank"> tileset dashboard </a>中，或者如果文件太大或几何图形需要简化，使用 Tippecanoe 将其平铺。</p><p id="48b6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在您的 Tilesets 页面上，单击<strong class="kx ir">新建 tileset </strong>按钮。选择<a class="ae ma" href="https://raw.githubusercontent.com/DiegoFurtt/Covid-19-Choropleth-Map/master/covidData.geojson" rel="noopener ugc nofollow" target="_blank">文件</a> <code class="fe ok ol om ob b">covidataStates.geojson</code>并上传至您的账户。</p><p id="7b95" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上传完成后，单击文件名旁边的箭头打开其信息页面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/2173f4d9c1c47ee959c66fe250765d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdRqToLSEJyG0s0sEu2Rxg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:地图框</p></figure><h1 id="8b07" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">创建新样式</h1><p id="f799" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">检查完数据后，是时候创建新的样式了，这样您就可以将它放在地图上了！转到您的<a class="ae ma" href="https://studio.mapbox.com/" rel="noopener ugc nofollow" target="_blank">风格页面</a>。点击<strong class="kx ir">新样式</strong>按钮。找到<em class="nv">基础模板</em>样式，点击<strong class="kx ir">自定义基础模板</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/963dd09aeb12b04f12aa46c8e653006d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cCRWjc4w6-XPsovkWOXMQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:地图框</p></figure><h1 id="a4be" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">添加新层</h1><p id="730c" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">要添加人口密度数据并设置其样式，您需要向地图添加新图层:</p><ol class=""><li id="3fe8" class="mz na iq kx b ky kz lb lc le nb li nc lm nd lq op nf ng nh bi translated">如果造型面板显示<strong class="kx ir">组件</strong>选项卡，切换到<strong class="kx ir">层</strong>选项卡。</li><li id="aeb7" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq op nf ng nh bi translated">在图层面板的顶部，点击<strong class="kx ir"> + </strong>按钮添加一个自定义图层。</li></ol><p id="0b61" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<em class="nv">新图层</em>面板中，在<em class="nv">数据源</em>列表中查找<code class="fe ok ol om ob b">statedata</code>源。单击 tileset，然后选择源图层作为此新样式图层的源。</p><p id="02d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">默认的基本地图视图不以美国为中心。Mapbox Studio 识别出您上传的数据集中在不同的位置，因此它显示消息<em class="nv">“此 tileset 在您的地图视图中不可用。”</em>点击<strong class="kx ir">转到数据</strong>，地图视图将重新聚焦美国。</p><p id="0628" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您的新图层将在 x 射线图上高亮显示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/57cd0dc60db6b5030281c74267b5b9ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qhp6rGHdvEBy2wDSaqHpeA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:地图框</p></figure><p id="c9c2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击<strong class="kx ir">样式</strong>标签，地图将切换回样式模式显示你的新图层。您将在地图上看到默认样式的州数据(100%不透明度的黑色)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/21a497aa24c44d3cabcbf0b1d7c7a803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HP5m0Pgstv_xBauHw7gnaQ.png"/></div></div></figure><h1 id="5203" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">设置图层样式</h1><p id="726f" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">在 Mapbox Studio 样式编辑器中，您可以根据新冠肺炎确诊病例密度为每个州指定一种颜色。在<code class="fe ok ol om ob b">statedata</code>图层中点击<strong class="kx ir">样式</strong>链接。接下来，点击<strong class="kx ir">数据范围样式</strong>。</p><p id="781a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">选择一个数字数据字段，选择<code class="fe ok ol om ob b">density</code>,因为您想要根据其新冠肺炎确诊病例密度设置每个州的样式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/6878c55bd20326e358aa005c4914369e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NqkqMvmZgh94O1-B2hr9yA.png"/></div></div></figure><p id="90a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">变化率为<em class="nv">线性</em>。点击<strong class="kx ir">编辑</strong>并改为选择<strong class="kx ir">步骤</strong>。点击<strong class="kx ir">完成</strong>。由于您已将变化率设置为步长，因此停止点之间的每个密度范围的颜色将是一致的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/d2356119f36f9a3494a4bde0a5856ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJN0luDItx7RtHb-KYy4PQ.png"/></div></div></figure><p id="f0b3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在是时候开始添加停止和颜色了！您将创建几个停靠点，将各州分成具有相似新冠肺炎确诊病例密度的组。在第一个密度停止点点击<strong class="kx ir">编辑</strong>。第一站固定在<em class="nv"> 1.264 </em>，基于你上传的数据集中的信息。点击它，改变颜色为<code class="fe ok ol om ob b">#FFEDA0</code>。点击<strong class="kx ir">完成</strong>。</p><p id="8471" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">将下一站的<em class="nv">密度</em>改为 361，颜色也改为<code class="fe ok ol om ob b">#FFEDA0</code>。点击<strong class="kx ir">完成</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/d013f366a0d820e7249b4498fac024de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYlzY089MHkaa0LFWxPrkQ.png"/></div></div></figure><p id="f05f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击<strong class="kx ir"> +添加另一个停止点</strong>。将<em class="nv">密度</em>改为 361(数据最小值)，将颜色改为<code class="fe ok ol om ob b">#FED976</code>。点击<strong class="kx ir">完成</strong>。</p><p id="8372" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">根据确诊病例的数量创建以下附加步骤示例:</p><ul class=""><li id="c5a5" class="mz na iq kx b ky kz lb lc le nb li nc lm nd lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">341</code> : <code class="fe ok ol om ob b">#FED976</code></li><li id="2a55" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">1050</code> : <code class="fe ok ol om ob b">#FEB24C</code></li><li id="9d57" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">2000</code> : <code class="fe ok ol om ob b">#FD8D3C</code></li><li id="fddd" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">5911</code> : <code class="fe ok ol om ob b">#FC4E2A</code></li><li id="b43e" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">13319</code> : <code class="fe ok ol om ob b">#E31A1C</code></li><li id="9c5c" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><code class="fe ok ol om ob b">288054</code> : <code class="fe ok ol om ob b">#BD0026</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/59adf194b40d08024f2f9ca480aea13d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FgRx2lq0PgTeHNmCrQt9Ug.png"/></div></div></figure><h1 id="4e4b" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">发布样式</h1><p id="9bab" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">现在你的地图看起来不错，是时候发布了！点击屏幕右上角的<strong class="kx ir">发布</strong>按钮，然后在下一个提示下再次点击<strong class="kx ir">发布</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/dd83118da83e8ce90714be7e8d9d99f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xUQ03EcKr9u-2skfWdqG8Q.png"/></div></div></figure><h1 id="9578" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">网页</h1><p id="387b" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">以下是您需要开始的内容:</p><p id="6dd1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下载<a class="ae ma" href="https://github.com/DiegoFurtt/Covid-19-Choropleth-Map/blob/master/choroplethMapbox.html" rel="noopener ugc nofollow" target="_blank">模板</a>:</p><ul class=""><li id="2921" class="mz na iq kx b ky kz lb lc le nb li nc lm nd lq ne nf ng nh bi translated"><a class="ae ma" href="https://docs.mapbox.com/help/glossary/access-token" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">一个访问令牌</strong> </a>。您可以在您的<a class="ae ma" href="https://www.mapbox.com/account/" rel="noopener ugc nofollow" target="_blank">帐户页面</a>上找到您的访问令牌。</li><li id="3c39" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><a class="ae ma" href="https://docs.mapbox.com/help/glossary/style-url" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">样式 URL </strong> </a>为您的样式。从你的<a class="ae ma" href="https://www.mapbox.com/studio" rel="noopener ugc nofollow" target="_blank">样式</a>页面，点击你的人口密度样式旁边的<strong class="kx ir">菜单</strong>按钮，然后点击剪贴板图标复制<strong class="kx ir">样式 URL </strong>。</li><li id="cba8" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><a class="ae ma" href="https://www.mapbox.com/mapbox-gl-js" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> Mapbox GL JS </strong> </a>。用于构建 web 地图的 Mapbox JavaScript API。</li><li id="1448" class="mz na iq kx b ky ni lb nj le nk li nl lm nm lq ne nf ng nh bi translated"><strong class="kx ir">一个文本编辑器</strong>。毕竟，您将编写 HTML、CSS 和 JavaScript。</li></ul><p id="5a89" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您已经为页面添加了结构，您可以开始编写一些 JavaScript 了！您需要做的第一件事是添加您的访问令牌。没有这一点，其余的代码将无法工作。<em class="nv">注意:下面所有的代码都应该在</em> <code class="fe ok ol om ob b"><em class="nv">script</em></code> <em class="nv">标签之间。</em>:</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="b8b3" class="of md iq ob b gy og oh l oi oj">mapboxgl.accessToken = 'pk.......';</span></pre><p id="2842" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在您已经添加了页面的结构，您可以向<code class="fe ok ol om ob b">map</code> div 添加一个 map 对象。对于您在本指南第 1 部分中创建的样式，一定要用<a class="ae ma" href="https://docs.mapbox.com/help/glossary/style-url" rel="noopener ugc nofollow" target="_blank">样式 URL </a>替换<code class="fe ok ol om ob b">your-style-url</code>——否则，代码将无法工作！</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="e1c5" class="of md iq ob b gy og oh l oi oj">var map = new mapboxgl.Map({<br/>  container: 'map', // container id<br/>  style: 'your-style-url' // replace this with your style URL<br/>});</span></pre><h1 id="f6b6" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">创建间隔和颜色数组</h1><p id="a353" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">创建包含州数据的图层样式时使用的停靠点列表，将允许我们在后续步骤中向地图添加图例。</p><pre class="kg kh ki kj gt oa ob oc od aw oe bi"><span id="0448" class="of md iq ob b gy og oh l oi oj">var layers = ['0-10', '10-20', '20-50', '50-100', '100-200', '200-500', '500-1000', '1000+'];<br/>var colors = ['#FFEDA0', '#FED976', '#FEB24C', '#FD8D3C', '#FC4E2A', '#E31A1C', '#BD0026', '#800026'];</span></pre><h1 id="b98c" class="mc md iq bd me mf nn mh mi mj no ml mm jw np jx mo jz nq ka mq kc nr kd ms mt bi translated">任务完成</h1><p id="16ef" class="pw-post-body-paragraph kv kw iq kx b ky mu jr la lb mv ju ld le mw lg lh li mx lk ll lm my lo lp lq ij bi translated">您已经创建了一个交互式 choropleth 地图！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92ebfa2ded21fa6d18cfd2c132b57737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIL5MxvErJUOm35MwAL4Fw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">美国各州新冠肺炎比率的可视化(Diego Hurtado)</p></figure><p id="cc20" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要学习重新投影您的数据以添加到您的投影中，请跟随我们的操作视频<a class="ae ma" href="https://www.youtube.com/watch?v=HZpNeQC0Obg&amp;feature=emb_title" rel="noopener ugc nofollow" target="_blank">“如何在 Mapbox Studio 中创建 choropleth 地图”。</a></p><p id="a88c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">另一个例子是<a class="ae ma" rel="noopener" target="_blank" href="/analyze-and-visualize-data-for-covid-19-mexico-b33cddf386bf">墨西哥</a>各州新冠肺炎比率的可视化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/1b95b695ae7ca1f432333d689e41f8f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-L9gna1MalelJ-72wMHUFw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">墨西哥新冠肺炎率的可视化</p></figure><p id="69b3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">领英:【https://www.linkedin.com/in/diego-gustavo-hurtado-olivares/ T4】</p><p id="c18c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ma" href="https://twitter.com/hashtag/BuiltWithMapbox?" rel="noopener ugc nofollow" target="_blank"> #BuiltWithMapbox </a>。</p></div></div>    
</body>
</html>