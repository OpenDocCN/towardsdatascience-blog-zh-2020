<html>
<head>
<title>Deploying Flask on Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Windows 上部署 Flask</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-flask-on-windows-b2839d8148fa?source=collection_archive---------5-----------------------#2020-07-22">https://towardsdatascience.com/deploying-flask-on-windows-b2839d8148fa?source=collection_archive---------5-----------------------#2020-07-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一次悲伤痛苦的自我反省之旅。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a24f3eb032b1ad641540e984188dfc79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8b65gImRyURzzMFi"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">塔达斯·萨尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><blockquote class="kz la lb"><p id="5bc6" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf iu"> NB: </strong>如果你会用 linux 请做！我不得不在我的公司使用 Windows，因为它不会给我们 linux 系统。因此，经过一番折腾之后，我不得不弄清楚如何部署 flask API。</p></blockquote><p id="3d58" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">对于这篇短文，我不会详细介绍 flask API 的实际创建，而是更多地介绍如何部署。这里是一个超级浓缩的一步一步让一个 flask API 运行。</p><h2 id="e4c0" class="mc md it bd me mf mg dn mh mi mj dp mk lz ml mm mn ma mo mp mq mb mr ms mt mu bi translated"><strong class="ak">安装:</strong></h2><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="3835" class="mc md it mw b gy na nb l nc nd">pip install flask waitress</span></pre><p id="0f43" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">你会注意到我们正在安装<strong class="lf iu">女服务员</strong>，这是一个 Windows 兼容的服务器，我们可以使用它在多线程上部署我们的 flask 应用程序。这实际上是一个非常好的方法！下面是我们的 API 代码:</p><h2 id="f506" class="mc md it bd me mf mg dn mh mi mj dp mk lz ml mm mn ma mo mp mq mb mr ms mt mu bi translated"><strong class="ak"> API 代码:</strong></h2><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="c1c2" class="mc md it mw b gy na nb l nc nd">from flask import Flask<br/>from waitress import serve</span><span id="574a" class="mc md it mw b gy ne nb l nc nd">app = Flask(__name__)<br/><a class="ae ky" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route('/api/v1/')<br/>def myendpoint():<br/>    return 'We are computering now'</span><span id="5a6b" class="mc md it mw b gy ne nb l nc nd"><strong class="mw iu">serve(app, host='0.0.0.0', port=8080, threads=1) #WAITRESS!</strong></span></pre><p id="7cf3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">从上面可以看出，我们有一个超级复杂的 API，可以在运行时从浏览器调用:</p><pre class="kj kk kl km gt mv mw mx my aw mz bi"><span id="3d71" class="mc md it mw b gy na nb l nc nd">python server.py</span></pre><p id="3d20" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">我们应该能够导航到<a class="ae ky" href="http://myIP:8080/api/v1" rel="noopener ugc nofollow" target="_blank"><strong class="lf iu">http://myIP:8080/API/v1</strong></a><strong class="lf iu"/>并得到预期的响应。</p><p id="a300" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">这一切都很好，但现在该怎么办呢？在 Windows 上，我们如何确保它在启动时运行？任务调度器<strong class="lf iu">是我如何做的。首先，确保你有管理员权限，然后打开任务调度。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/56e3f0c930f39da3bf0f1713b3acd9b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1l9AYvuuNB4-5qOIBkHJdA.png"/></div></div></figure><p id="fc0c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">创建任务时，有一些非常重要的设置:</p><ol class=""><li id="a06d" class="ng nh it lf b lg lh lj lk lz ni ma nj mb nk ly nl nm nn no bi translated">确保您选择了最高权限框</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/1a9ac999e976ec7d3f9f5fb30c0bc8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*tY-DHyyodJgxqKfcXWj5fg.png"/></div></figure><p id="d3f1" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">2.触发任务在启动时运行</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/c50dfab68ba7df1ec36174dd636e0242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*peMLJNV9vMnKM-6JvCFx-Q.png"/></div></figure><p id="775c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">3.确保你使用<strong class="lf iu"> pythonw </strong>在后台运行(否则你将永远有一个命令提示)</p><p id="f62a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">4.使用 python 文件所在的起始目录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0d66b653fe117d8b38f4aec51de9e9f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NAcIh-iBHeOzNuyDGqUSzw.png"/></div></div></figure><p id="0ac6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">嘣！这样，您应该能够点击 run 并测试您的端点。运气好的话，下次重新启动时，作业应该会触发并运行！</p><p id="b746" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">我真心希望这能在未来帮助一些可怜的灵魂。一路平安。</p><h2 id="d135" class="mc md it bd me mf mg dn mh mi mj dp mk lz ml mm mn ma mo mp mq mb mr ms mt mu bi translated"><strong class="ak">参考文献</strong>:</h2><p id="4b39" class="pw-post-body-paragraph lc ld it lf b lg ns ju li lj nt jx ll lz nu lo lp ma nv ls lt mb nw lw lx ly im bi translated">很多这只是实验和快照是我自己的！</p></div></div>    
</body>
</html>