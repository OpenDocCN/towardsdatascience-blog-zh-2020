<html>
<head>
<title>Live Video Sketching through Webcam using Computer Vision</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用计算机视觉通过网络摄像头进行实时视频素描</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/live-video-sketching-through-webcam-using-computer-vision-30beed29f33e?source=collection_archive---------60-----------------------#2020-06-09">https://towardsdatascience.com/live-video-sketching-through-webcam-using-computer-vision-30beed29f33e?source=collection_archive---------60-----------------------#2020-06-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6d6b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">实施计算机视觉模型，创建实时网络摄像头视频的实时视频草图。源代码用python编写，模型基于OpenCV。</h2></div><p id="0811" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://en.wikipedia.org/wiki/Computer_vision" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">计算机视觉</strong> </a>指的是<a class="ae le" href="https://en.wikipedia.org/wiki/Computer_science" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">计算机科学</strong> </a>的一个领域，专注于使计算机能够像人脑一样看到、识别和处理图像。它是<a class="ae le" href="https://en.wikipedia.org/wiki/Artificial_intelligence" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">人工智能</strong> </a>的一个分支，允许计算机从一组图像中提取有用的特征，对它们执行所需的操作并生成输出。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/2ad8063371d7600928d7aad584f06396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-xmApvp-XuJBJpEz-x0umA.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><strong class="bd lv">图1:计算机视觉</strong> <a class="ae le" href="https://unsplash.com/photos/QRawWgV6gmo" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lv">来源</strong> </a></p></figure><p id="842c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文旨在实现一个计算机视觉模型，该模型生成一个网络摄像头的实时镜头的现场视频草图。该项目的完整源代码可在我的<a class="ae le" href="https://github.com/kaushikjadhav01/Live-Video-Sketching-through-webcam-using-OpenCv-Python" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Github repo </strong> </a>上获得。</p><h1 id="0c58" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">安装所需的软件包</h1><p id="0ff9" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">通过在命令提示符下运行以下命令，使用pip安装项目所需的所有软件包:</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="9795" class="my lx it mu b gy mz na l nb nc">pip install opencv-python<br/>pip install keras<br/>pip install numpy<br/>pip install matplotlib</span></pre><h1 id="3fa4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">实施模型</h1><p id="6990" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们将把实现过程分为两部分。</p><p id="df11" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一部分包括定义一个函数，该函数将视频的单个帧作为输入，并生成一个草图图像帧作为输出。执行此操作的<strong class="kk iu"> Python </strong>代码如下:</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="bef2" class="my lx it mu b gy mz na l nb nc"><strong class="mu iu">import</strong> <strong class="mu iu">keras</strong><br/><strong class="mu iu">import</strong> <strong class="mu iu">cv2</strong><br/><strong class="mu iu">import</strong> <strong class="mu iu">numpy</strong> <strong class="mu iu">as</strong> <strong class="mu iu">np</strong><br/><strong class="mu iu">import</strong> <strong class="mu iu">matplotlib<br/>import</strong> <strong class="mu iu">cv2</strong><br/><strong class="mu iu">import</strong> <strong class="mu iu">numpy</strong> <strong class="mu iu">as</strong> <strong class="mu iu">np</strong><br/><br/><em class="nd"># Our sketch generating function</em><br/><strong class="mu iu">def</strong> sketch(image):<br/>    <em class="nd"># Convert image to grayscale</em><br/>    img_gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)<br/>    <br/>    <em class="nd"># Clean up image using Guassian Blur</em><br/>    img_gray_blur = cv2.GaussianBlur(img_gray, (5,5), 0)<br/>    <br/>    <em class="nd"># Extract edges</em><br/>    canny_edges = cv2.Canny(img_gray_blur, 30, 60)<br/>    <br/>    <em class="nd"># Do an invert binarize the image </em><br/>    ret, mask = cv2.threshold(canny_edges, 240, 255, cv2.THRESH_BINARY_INV)<br/>    <br/>    <strong class="mu iu">return</strong> mask</span></pre><p id="7c14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们将视频的彩色图像帧转换成<strong class="kk iu">灰度</strong>。然后，我们使用<a class="ae le" href="https://opencv.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> OpenCV </strong> </a>的<strong class="kk iu"> GaussianBlur() </strong>函数清理图像。最后，为了生成帧的草图，我们提取了<strong class="kk iu"> canny边缘</strong>并在边缘上进行<strong class="kk iu">反转二值化</strong>操作。</p><p id="536f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二部分包括将上述草图函数递归应用于网络摄像机视频的所有帧。执行此操作的Python代码如下:</p><pre class="lg lh li lj gt mt mu mv mw aw mx bi"><span id="90e5" class="my lx it mu b gy mz na l nb nc">cap = cv2.VideoCapture(0)<br/>cap2 = cv2.VideoCapture(1)<br/><br/><strong class="mu iu">while</strong> <strong class="mu iu">True</strong>:<br/>    ret, frame = cap.read()<br/>    ret1, frame1 = cap2.read()<br/>    cv2.imshow('Original', (frame))<br/>    cv2.imshow('Our Live Sketcher', sketch(frame))<br/>    <strong class="mu iu">if</strong> cv2.waitKey(1) == 13: <em class="nd">#13 is the Enter Key</em><br/>        <strong class="mu iu">break</strong><br/>        <br/><em class="nd"># Release camera and close windows</em><br/>cap.release()<br/>cap2.release()<br/>cv2.destroyAllWindows()</span></pre><p id="6fb4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如上面的代码片段所示，初始化两个VideoCapture对象:一个用于显示网络摄像机镜头，另一个用于显示实时视频草图。创建一个循环，当有人按下回车键时循环就会中断。在循环内部，获取两个VideoCapture对象的帧。将原始框架传递给草图函数，并显示原始框架和草图框架，直到循环中断。</p><h1 id="6860" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">结果和结论</h1><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/d8b9f88140c45695cc1cf9dad583a428.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/1*aHbKiw6t-5z1UEIFajrEHA.gif"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><strong class="bd lv">图2:最终输出</strong></p></figure><p id="0388" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上图显示了模型的最终结果。我们可以看到，该模型成功地生成了网络摄像头视频的现场视频草图。</p><p id="ada6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="nd">请注意，视频性能因您的网络摄像头而异。为了提高性能，您可能希望在代码中使用canny_edges 30、60和二进制化240值。更改它们，使其适合您的网络摄像头。</em> </strong></p><p id="d956" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我鼓励本文的读者自己尝试代码，以提高模型的精度。</p><p id="d426" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你觉得这篇文章有用，请随意与他人分享。非常感谢您的阅读。</p><p id="ea92" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请随时在其他平台上与我联系:</p><p id="1f8e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">github—<a class="ae le" href="https://github.com/kaushikjadhav01" rel="noopener ugc nofollow" target="_blank">https://github.com/kaushikjadhav01</a></p><p id="2abb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">LinkedIn—<a class="ae le" href="https://www.linkedin.com/in/kaushikjadhav01/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/kaushikjadhav01/</a></p><h1 id="b923" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">源代码</h1><p id="1b3d" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">整个项目的源代码可以在我的<a class="ae le" href="https://github.com/kaushikjadhav01/Live-Video-Sketching-through-webcam-using-OpenCv-Python" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">Github repo</strong></a><strong class="kk iu">上找到。</strong>随意用于教育目的。</p></div></div>    
</body>
</html>