<html>
<head>
<title>How to build your machine learning application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建您的机器学习应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-your-machine-learning-application-e2b94c4527b5?source=collection_archive---------78-----------------------#2020-06-08">https://towardsdatascience.com/how-to-build-your-machine-learning-application-e2b94c4527b5?source=collection_archive---------78-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="76ea" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过Google App Engine构建和部署Dash应用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0cca9a4fd9403909bcaa2bd24419256c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJNstXr-5LVIllAa6fsY9g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这比造一匹马容易多了</p></figure><p id="c5b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天的机器学习不再是一件新奇或神奇的事情。事实上，所有的在线教程都让它变得和以前一样可行。只需从互联网上抓取大量代码并稍加调试，您的模型就可以运行了。然而，网上几乎没有资源告诉你如何向他人展示你的机器学习进展。无论是为产品原型、你的投资组合，还是向非技术人群解释你的模型的作用，<strong class="la iu">为你的机器学习项目构建一个应用程序总是一个很好的点睛之笔</strong>。</p><p id="bd83" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">什么是机器学习应用？让我给你举几个例子:</p><ul class=""><li id="de3e" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><strong class="la iu">虚拟个人助理</strong>，比如<em class="md"> Siri </em>和<em class="md"> Alexa </em>。你的声音被用作输入，他们提取你的话语，并用相应的命令做出回应，通过他们用庞大的数据集训练的模型。</li><li id="0e5d" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><strong class="la iu">垃圾邮件过滤</strong>。关于传入电子邮件的基本信息用于确定电子邮件是否可能是垃圾邮件。</li><li id="80d8" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><strong class="la iu">产品推荐</strong>。几天前，你在网上购买了一些运动鞋，突然，你和你室友的社交媒体开始收到运动鞋广告。你的浏览历史一些个人信息被用来为你推荐广告。</li></ul><p id="3469" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">仔细想想，机器学习应用就在你身边。我必须承认，将一个应用程序工业化需要大量的时间和精力，但我们可以在云基础上构建我们自己的简单机器学习应用程序，而无需考虑所有的极限情况和负载测试。它可以作为一个完美的个人投资组合，或者用于开发测试。在<em class="md">谷歌云服务</em>的帮助下，我们来构建一个应用吧！</p><p id="8da5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">第一部分。建立模型</strong></p><p id="1096" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将首先为这个应用程序建立我们的模型。让我们只使用<em class="md">虹膜</em>数据集。我们从<em class="md"> Scikit-learn </em>加载<em class="md"> Iris </em>数据集，并在其上构建简单的逻辑回归:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="ecd0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第二部分。在本地构建应用程序</p><p id="046e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后我们用<em class="md">破折号</em>在本地构建app。我们的目的是建立一个web界面，您可以在其中输入您为遇到的这种鸢尾花测量的不同值，它将返回基于输入预测的最可能的物种。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/b5f87396c6a6364a0136a70ffe78f0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zn6dssAiQbqTF-iyJFbxLQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们应用的工作流程</p></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="08eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我知道这是一大段代码，但是请耐心听我说。首先，我们初始化应用程序。这里要介绍一下flask，帮助用<strong class="la iu"><em class="md">Google app Engine</em></strong>部署App。</p><p id="0c97" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里的第二部分是设置<em class="md">应用布局</em>。代码在不同的部分进行了注释，并说明了它们的用途。<strong class="la iu">如果你没有任何前端经验，阅读起来会有点困难，但一定要相信学习过程</strong>。这里我们不做任何计算，只是设置零件及其对应的id。</p><p id="ab06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里的第三个部分是一个<em class="md">回调函数</em>，它使得应用程序具有“交互性”。输出和输入是在实际函数之前说明的:我们有一个输出，对应于布局部分的输出区域。我们有五个输入，即<em class="md"> GO </em>按钮和4个花朵测量的数字输入。这里使用状态是为了确保应用程序只有在整个表单完成后才从用户那里获取值，你可以在这里<a class="ae mm" href="https://dash.plotly.com/basic-callbacks" rel="noopener ugc nofollow" target="_blank">了解更多信息</a>。这里的按钮决定只有在你按下按钮后才开始工作。</p><p id="d384" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，如果您将所有这些代码放在一个笔记本或python文件中，并在本地运行它，您将获得这样的信息作为输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/767e59d409be252f68e49fb0f0db72a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*47YLMyX9eEbQpPQFgj8Tog.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代码的输出</p></figure><p id="860c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">只需<strong class="la iu">点击URL </strong>或<strong class="la iu">将其粘贴到您的浏览器</strong>中，即可访问您构建的应用。请注意，这是localhost，这意味着其他人无法通过此链接访问它，除非您设置了特殊的防火墙规则。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/cb84328e81b9991d1265a95cce9d434d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGDPXxHHUYrDaRJKqa_Z7g.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">如果您输入1作为值，然后单击GO按钮…</p></figure><p id="385b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">第三部分。部署应用程序</strong></p><p id="e678" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们现在已经有了本地运行的应用程序，但是如果你要和别人分享它，你需要和那个人分享你所有的代码和数据，并让他运行它。仅仅是环境的差异就已经够难调试的了，更不用说<em class="md">如果你把它展示给你根本不会编码的老板</em>。这就是为什么我们需要使用云基础平台来部署它:你只需要配置一次，并通过一个简单的URL来共享它，就像这样:<a class="ae mm" href="https://frankxu.uc.r.appspot.com" rel="noopener ugc nofollow" target="_blank">https://frankxu.uc.r.appspot.com</a>(你实际上可以点击它并访问这个应用程序)。我们更喜欢谷歌云平台，因为每个用户都有300美元/年的免费积分。</p><p id="2036" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在此之前，因为我们需要谷歌云引擎，让我们确保每个人都在同一页面上。你需要设置一个<a class="ae mm" href="https://console.cloud.google.com/home" rel="noopener ugc nofollow" target="_blank">活动的</a>谷歌云项目，然后<a class="ae mm" href="https://console.cloud.google.com/projectselector2/home" rel="noopener ugc nofollow" target="_blank">选择一个项目</a>并启用计费。然后，<a class="ae mm" href="https://cloud.google.com/sdk/install" rel="noopener ugc nofollow" target="_blank">在你的笔记本电脑上安装</a>和<a class="ae mm" href="https://cloud.google.com/sdk/docs/initializing" rel="noopener ugc nofollow" target="_blank">设置</a>Google Cloud SDK工具，这样你就可以通过几行代码轻松部署你的app。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/e0ffb89d87742d1697f208813f21f55b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*JZE7XklYEs2Xq7JQ5JDNYg.png"/></div></figure><p id="34bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先要做的是<strong class="la iu">新建一个文件夹</strong>，在这种情况下，我们姑且称之为<strong class="la iu"> <em class="md">破折号</em> </strong>。在Dash下我们希望有三个文件:<strong class="la iu"> <em class="md"> main.py </em> </strong>包含你所有的源代码，<strong class="la iu"> <em class="md"> app.yaml </em> </strong>包含云部署设置，以及<strong class="la iu"><em class="md">requirements . txt</em></strong>包含所有需要的包。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">创建我们需要的文件的代码示例</p></figure><p id="f6f4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="md"> main.py </em> </strong>中，只需将上面的所有代码按同样的顺序粘贴到其中，或者你也可以在这里访问它<a class="ae mm" href="https://github.com/Frank-Xu-Huaze/Medium/blob/master/Dash_GCP/Dash/main.py" rel="noopener ugc nofollow" target="_blank">。在<strong class="la iu"> <em class="md"> app.yaml </em> </strong>中，你会放入这样两行，分别指定你运行的环境和服务器名称。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">app.yaml的内容</p></figure><p id="53fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"><em class="md">requirements . txt</em></strong>中，简单放入一个你用过的python包的列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">requirements.txt内容</p></figure><p id="9691" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在这里下载这三个文件。现在我们已经为部署做好了一切准备。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/89a3269ed078a289ac8e49950a9233b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3gT4vIXVCZdXczzz71z_yQ.png"/></div></div></figure><p id="8960" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">打开你的终端，进入Dash目录。根据您是否为此项目创建了应用程序，您可能需要先创建一个应用程序。选择应用程序所需的位置，然后在出现提示时输入Y继续，并等待几分钟以部署应用程序。</p><p id="142d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">部署完成后，您可以进入<strong class="la iu"> <em class="md"> gcloud app浏览</em> </strong>或者将网址粘贴到您的浏览器<strong class="la iu"> </strong>来浏览app。加载需要几秒钟，但你应该会看到云服务的确切应用程序。<strong class="la iu">该应用程序将一直运行，直到您禁用它</strong>(转到应用程序引擎下的设置)，并且链接是可共享的，这意味着只要有互联网，您就可以将其发送给任何人使用。将应用程序添加到你的作品集也不错，这肯定比普通的简历或演示文稿更令人印象深刻。</p><p id="31ed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">下一步是什么？</strong>希望本教程结束后，你能够建立自己的机器学习应用程序。玩玩<strong class="la iu"> <em class="md"> main.py </em> </strong>就行了，不要改它的初始化和定型部分，有问题多向技术社区学习。整个项目及相关文件可以在<a class="ae mm" href="https://github.com/Frank-Xu-Huaze/Medium/tree/master/Dash_GCP" rel="noopener ugc nofollow" target="_blank"> <em class="md"> my Github </em> </a>找到。</p></div></div>    
</body>
</html>