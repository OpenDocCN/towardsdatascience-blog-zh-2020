<html>
<head>
<title>Period comparisons in Power BI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">功率 BI 的周期比较</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/period-comparisons-in-power-bi-7cc46705d663?source=collection_archive---------8-----------------------#2020-08-21">https://towardsdatascience.com/period-comparisons-in-power-bi-7cc46705d663?source=collection_archive---------8-----------------------#2020-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc1c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在 Power BI 中比较不同时间段变得容易！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d9553875281ca3e66bcfee5a7c752327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMlej5HPIokZuLPHSuhZJQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">像素上的全息照相术照片</p></figure><p id="413c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就在最近，我在 LinkedIn 平台上遇到一个问题，是否有可能在 Power BI 中创建以下可视化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/6e2f9e7692aef08260eee291b1ec65a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*QLPFwe6q66PEE4Tx02dWeA.jpeg"/></div></figure><p id="6565" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为一个常见的业务请求是在不同的时间段之间执行不同的比较，所以我认为 Power BI 在这方面有很大的优势。我已经解释了一些与时间智能相关的<a class="ae lv" rel="noopener" target="_blank" href="/tiq-part-4-being-time-intelligent-in-power-bi-88171980b141">基本计算，但显然有相当数量的用户并不十分熟悉它们。</a></p><p id="d44b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我要强调一个很棒的功能，叫做“快速测量”，在这里你可以获得多个常用计算的现成解决方案，例如:年初至今总计、本季度至今总计、本月至今总计、同比变化、滚动平均等。</p><p id="fbda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了让快速措施发挥作用，你需要有一个正确定义的<a class="ae lv" rel="noopener" target="_blank" href="/tiq-part-3-ultimate-guide-to-date-dimension-creation-98b951ffa68c">日期表</a>。</p><p id="dd84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，我们不会在这里使用快速措施来实现我们最初的目标，所以让我们切换到 Power BI 桌面并开始行动吧！像往常一样，我将使用 Contoso 数据库进行演示。</p><h2 id="df09" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated">创建基本度量</h2><p id="dd10" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">第一步是创建一个基本度量来计算销售额:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="af7c" class="lw lx it mv b gy mz na l nb nc">Sales Amt = SUM(FactOnlineSales[SalesAmount])</span></pre><p id="199c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将立即创建另一个度量，它将计算相同的数字，但向后移动一个月:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="05e8" class="lw lx it mv b gy mz na l nb nc">Sales Amt PM = CALCULATE([Sales Amt],<br/>                        DATEADD(DimDate[Datekey],-1,MONTH)<br/>                        )</span></pre><p id="caea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有多种不同的方法来计算这个度量，但我更喜欢使用<em class="nd"> DATEADD() </em>函数，因为它给了我更多的灵活性来改变周期(这是一个官方借口:)…实际上，我来自 SQL 世界，其中<em class="nd"> DATEADD() </em>是处理日期时最重要的函数之一)。</p><p id="f0f5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，当我选择 11 月 17 日和 12 月 17 日之间的日期时，我可以看到我的数字是如何相互关联的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/e181e75cca4b1ec251b4c38bf9977f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbgVApoFdSjePZ6kOtKP7A.png"/></div></div></figure><p id="fd9b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如您可能注意到的，我们的公式工作得很好—正如预期的那样，我们看到 12 月 17 日的销售额 PM 与 11 月 17 日的销售额相匹配。此外，我们的折线图很好地显示了趋势，以便于比较，而左上角的卡片视觉效果显示了所选期间的销售额以及我们正在比较的两个期间之间的差异。</p><p id="1b55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于这些差异，我创建了两个额外的衡量标准:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="83c2" class="lw lx it mv b gy mz na l nb nc">Sales Amt Diff PM = [Sales Amt] - [Sales Amt PM]<br/><br/>Sales Amt Diff  PM % = DIVIDE([Sales Amt],[Sales Amt PM],BLANK()) - 1</span></pre><p id="c8c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下方的卡片是根据值有条件地格式化的，因此当我们的表现比前一时期差时，它会变成红色，而当结果相反时，它会显示绿色:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/74dade57df5d9458bfcc30f5554858f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OfCjL3Bly_mybQZtA4InzQ.png"/></div></div></figure><h2 id="2a67" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated">添加更多配料</h2><p id="9933" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">现在，这很好，你也看到了我们如何轻松地回答最初的问题。然而，我想在这里添加一些更多的成分，使我们的用户能够在月环比和年同比之间进行选择。</p><p id="9e6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的示例中，如果我们再次选择 11 月 17 日和 12 月 17 日之间的日期，而不是显示前一个月的值(比较 12 月 17 日和 11 月 17 日),使用同比比较，我想比较 2009 年 12 月 17 日和 2008 年 12 月 17 日！</p><p id="043c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，让我们为此创建一个度量。同样，您可以使用不同的函数来实现这一点，如<em class="nd"> SAMEPERIODLASTYEAR() </em>函数，但我想保持一致性，因此我将再次使用 DATEADD():</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="4fbc" class="lw lx it mv b gy mz na l nb nc">Sales Amt PY = CALCULATE([Sales Amt],<br/>                        DATEADD(DimDate[Datekey],-1,YEAR)<br/>                        )</span></pre><p id="e9cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与 MoM 计算相同，需要两个额外的指标来计算同比数据的差异:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="9786" class="lw lx it mv b gy mz na l nb nc">Sales Amt Diff PY = [Sales Amt] - [Sales Amt PY]<br/><br/>Sales Amt Diff PY % = DIVIDE([Sales Amt],[Sales Amt PY],BLANK()) - 1</span></pre><p id="3983" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我将创建两个书签，以便用户可以通过单击相应的按钮导航到 MoM 或 YoY:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/e14dd3e1f586eb7a143ae010fd36a84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nRTK7UNh48ZIfCBXm9GwOw.png"/></div></div></figure><p id="949c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认情况下，他们应该看到 MoM 比较，但是一旦他们单击 YoY 按钮，报告看起来就会略有不同:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/8d3b6f24ba8ead7b4f7ff7545ffb2ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xo2PlJFTZ5NGa5UIyKz0Fw.png"/></div></div></figure><p id="9a0c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以注意到，卡片视觉效果中的数字发生了变化，以反映同比差异计算，而折线图也显示了不同的趋势！</p><p id="0703" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们结束之前，这里是我们的报告的最后行为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/cca202770e7fc2f23348df9765125ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Pu1BVp-BRS_aYdvywsmKZQ.gif"/></div></figure><h2 id="31e1" class="lw lx it bd ly lz ma dn mb mc md dp me lh mf mg mh ll mi mj mk lp ml mm mn mo bi translated">结论</h2><p id="e185" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh mr lj lk ll ms ln lo lp mt lr ls lt im bi translated">正如我们所见，在时间智能计算方面，Power BI 是一个非常强大的工具。基本上，可以创建不同时期之间的各种比较—最常见的比较，甚至不需要编写一行 DAX！</p><p id="2bd3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您需要扩展内置的快速测量，有一整套有用的时间智能功能。你可以在这里更深入地查看所有这些<a class="ae lv" href="https://dax.guide/functions/date-time/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="860b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读！</p><p id="12bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lv" href="https://datamozart.medium.com/membership" rel="noopener">成为会员，阅读媒体上的每一个故事！</a></p><p id="5965" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">订阅<a class="ae lv" href="http://eepurl.com/gOH8iP" rel="noopener ugc nofollow" target="_blank">这里</a>获取更多有见地的数据文章！</p></div></div>    
</body>
</html>