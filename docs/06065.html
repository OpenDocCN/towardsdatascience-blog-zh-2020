<html>
<head>
<title>Speech Recognition with Tensorflow.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Tensorflow.js进行语音识别</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/speech-recognition-with-tensorflow-js-2f55c104e809?source=collection_archive---------35-----------------------#2020-05-17">https://towardsdatascience.com/speech-recognition-with-tensorflow-js-2f55c104e809?source=collection_archive---------35-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6ce6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用语音命令识别技术在浏览器中引入语音控制</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/873371e5cda5c6dd5a3e2bacec5a0b26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JbFX0ArRB4MSiQz6gzw_bA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2598422" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/Kaufdex-2137215/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2598422" rel="noopener ugc nofollow" target="_blank"> Kaufdex </a></p></figure><p id="364c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像亚马逊Alexa和谷歌Home这样的语音助手已经变得广泛流行，它们允许用户通过使用语音识别快速完成任务。</p><p id="6356" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于语音识别技术的改进，Tensorflow.js发布了一个JavaScript模块，可以识别口头命令。</p><p id="7ae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将使用一个预先训练好的Tensorflow.js模型进行迁移学习。让我们建立一个可以识别你的语音命令的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/aaf54ee931adbd6c8bd6ce78a66f40b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1OzAYz_oHZvGcdKyx2lj7A.gif"/></div></div></figure><p id="44cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击下面的链接亲自尝试一下:</p><div class="lw lx gp gr ly lz"><a href="https://bensonruan.com/speech-recognition-with-tensorflow-js/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">采用TensorFlow.js - Benson技术的语音识别</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">在本文中，我们将使用预训练的TensorFlow.js模型进行语音识别。让我们构建一个应用程序…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">bensonruan.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><p id="6bb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以用声音无接触地控制电脑，这难道不令人惊奇吗？Tensorflow.js真正将人工智能带入浏览器。让我们深入代码，一步一步地向您展示如何用tensorflow.js构建这个语音识别应用程序。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4fb2" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">履行</h1><h2 id="01e0" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤1:包含tensorflow.js</h2><p id="e672" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">只需在html文件的&lt;头&gt;部分包含<code class="fe oe of og oh b">tfjs</code> <em class="oi"> </em>和<code class="fe oe of og oh b">speech-commands models</code>的脚本。</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="649a" class="nn mw it oh b gy on oo l op oq">&lt;script src="<a class="ae ky" href="https://unpkg.com/@tensorflow/tfjs" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@tensorflow/tfjs</a>"&gt;&lt;/script&gt;</span><span id="aaf8" class="nn mw it oh b gy or oo l op oq">&lt;script src="<a class="ae ky" href="https://unpkg.com/@tensorflow-models/speech-commands" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@tensorflow-models/speech-commands</a>"&gt;&lt;/script&gt;</span></pre><h2 id="87d7" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#第二步:列出命令词</h2><p id="5dd4" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated"><strong class="lb iu">HTML—index.html</strong></p><p id="0fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在html主体中添加一个<div>占位符</div></p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="8d03" class="nn mw it oh b gy on oo l op oq">&lt;div<!-- --> <!-- -->id="candidate-words"&gt;&lt;/div&gt;</span></pre><p id="be7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加一个复选框来控制打开/关闭麦克风，我已经使用纯css定制了复选框，看起来像一个移动开关。</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="8303" class="nn mw it oh b gy on oo l op oq">&lt;label class="form-switch"&gt;<br/>&lt;input type="checkbox" id="audio-switch"&gt;<br/>&lt;i&gt;&lt;/i&gt; Microphone&lt;/label&gt;</span></pre><p id="479c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">Javascript—speech _ command . js</strong></p><p id="980f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">tfjs语音命令库支持20项词汇，包括:“零”、“一”、“二”、“三”、“四”、“五”、“六”、“七”、“八”、“九”、“上”、“下”、“左”、“右”、“开始”、“停止”、“是”和“否”，此外还有“背景噪声”和“未知”。页面加载后，将单词追加到列表中。</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="96c2" class="nn mw it oh b gy on oo l op oq">wordList = ["zero","one","two","three","four","five","six","seven","eight","nine", "yes", "no", "up", "down", "left", "right", "stop", "go"];</span><span id="323f" class="nn mw it oh b gy or oo l op oq">$.each(wordList, function( index, word ) {<br/> if (!word.startsWith('_')){<br/>  $("#candidate-words").append('&lt;span id='word-${word}'&gt;${word}&lt;/span&gt;');<br/> }<br/>});</span></pre><h2 id="4dff" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤3:加载模型</h2><p id="541f" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">当麦克风开关(复选框)打开(选中)时，首先调用函数<code class="fe oe of og oh b">loadModel()</code>加载预先训练好的模型，然后调用函数<code class="fe oe of og oh b">startListening()</code>启动语音命令识别。</p><p id="1cc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当麦克风开关(复选框)关闭(未选中)时，调用功能<code class="fe oe of og oh b">stopListening()</code>断开麦克风。</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="b624" class="nn mw it oh b gy on oo l op oq">if(this.checked){<br/> if(!modelLoaded){<br/>  loadModel();<br/> }else{<br/>  startListening();<br/> }<br/>}<br/>else {<br/> stopListening();<br/>}</span></pre><p id="a793" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数loadModel()加载预先训练好的语音命令模型，调用<code class="fe oe of og oh b">speechCommands.create</code>和<code class="fe oe of og oh b">recognizer.ensureModelLoaded</code>的API。调用create函数时，必须提供音频输入的类型。<br/>两个可用选项是‘浏览器_快速傅立叶变换’和‘软件_快速傅立叶变换’。<br/> — BROWSER_FFT使用浏览器的原生傅立叶变换。<br/> — SOFT_FFT使用傅立叶变换的JavaScript实现(尚未实现)。</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="7bb9" class="nn mw it oh b gy on oo l op oq">function loadModel(){<br/>    recognizer = <strong class="oh iu">speechCommands.create("BROWSER_FFT")</strong>;  <br/>    Promise.all([<br/>        <strong class="oh iu">recognizer.ensureModelLoaded()</strong><br/>      ]).then(function(){<br/>        <strong class="oh iu">words = recognizer.wordLabels()</strong>;<br/>        modelLoaded = true;<br/>        startListening();<br/>      })<br/>}</span></pre><h2 id="7918" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤4:启动语音识别</h2><p id="948a" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">函数startListening()调用<code class="fe oe of og oh b">recognizer.listen</code> API开始监听语音命令。listen()函数接受两个参数:<br/> 1。识别单词时调用的回调函数。<br/> 2。具有可调字段的配置对象，例如<br/>—include spectrogram<br/>—probability threshold(当且仅当所有单词的最大概率得分大于该阈值时，才会调用回调函数)<br/> — includeEmbedding</p><p id="6d76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分数的输出包含对应于recognizer.wordLabels()的概率分数。下面的代码将分数转换成一个(分数，单词)对列表。</p><p id="adc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，麦克风只能通过<strong class="lb iu"> https </strong>协议访问</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="d6b8" class="nn mw it oh b gy on oo l op oq">function startListening(){<br/>    <strong class="oh iu">recognizer.listen(({scores})</strong> =&gt; {<br/>        scores = Array.from(scores).map(<strong class="oh iu">(s, i) =&gt; ({score: s, word: words[i]})</strong>);<br/>        scores.sort((s1, s2) =&gt; s2.score - s1.score);<br/>        $("#word-"+scores[0].word).addClass('candidate-word-active');<br/>    }, <br/>    {<br/>        <strong class="oh iu">probabilityThreshold</strong>: 0.70<br/>    });<br/>}</span></pre><p id="1b7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，要关闭麦克风，调用recognizer.stopListening API</p><pre class="kj kk kl km gt oj oh ok ol aw om bi"><span id="a3ab" class="nn mw it oh b gy on oo l op oq">function stopListening(){<br/>    <strong class="oh iu">recognizer.stopListening</strong>();<br/>}</span></pre></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="8a9d" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">GitHub知识库</h1><p id="1b1a" class="pw-post-body-paragraph kz la it lb b lc nz ju le lf oa jx lh li ob lk ll lm oc lo lp lq od ls lt lu im bi translated">您可以通过下面的链接下载上述演示的完整代码:</p><div class="lw lx gp gr ly lz"><a href="https://github.com/bensonruan/Speech-Command" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">本森阮/言语指挥</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">使用javascript库tensorflowjs的浏览器中麦克风的语音命令识别器…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">github.com</p></div></div><div class="mi l"><div class="os l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="6bb8" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结论</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/774b4c60305a58dd6b08131d6f9e5042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*01hVHIZ6wX_rtoj2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿尔瓦罗·雷耶斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2020年的Tensorflow.js由于其全面的线性代数核心和深度学习层，已经成为所有机器学习JavaScript项目的面包和黄油。从这篇文章中，我希望你能从中得到乐趣，并鼓励你更多地了解这个库。</p><p id="0f1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果你喜欢这篇文章，请在脸书或推特上分享。如果你有任何问题，请在评论中告诉我。在<a class="ae ky" href="https://github.com/bensonruan/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae ky" href="https://www.linkedin.com/in/benson-ruan/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上关注我。</p></div></div>    
</body>
</html>