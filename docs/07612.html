<html>
<head>
<title>Beautiful and Easy Plotting in Python — Pandas + Bokeh</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中漂亮而简单的绘图——熊猫+散景</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/beautiful-and-easy-plotting-in-python-pandas-bokeh-afa92d792167?source=collection_archive---------9-----------------------#2020-06-08">https://towardsdatascience.com/beautiful-and-easy-plotting-in-python-pandas-bokeh-afa92d792167?source=collection_archive---------9-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/81cde9c1b2cb56a5b99a50958f8d01ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0u3Wh0fyGbuQpa70"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@jtkyber1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔伊·凯伯</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><div class=""/><div class=""><h2 id="9a18" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">创建从熊猫数据帧到散景的交互式绘图的一行代码</h2></div><p id="2bff" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然 Matplotlib 可以满足我们在 Python 中想要绘制一些东西时的所有需求，但使用它创建一个漂亮的图表有时很耗时。嗯，有时我们可能想向老板展示一些东西，这样就可以有一些漂亮的互动情节。</p><p id="92e9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有很多优秀的库可以做到这一点，Bokeh 就是其中之一。然而，学习如何使用这样的库可能也需要一些时间。其实已经有人替我们解决了这个问题。这里有一个叫<code class="fe lu lv lw lx b">Pandas-Bokeh</code>的库，直接消费熊猫，用散景渲染数据。语法非常简单，我相信您很快就可以开始使用它了！</p><div class="is it gp gr iu ly"><a href="https://github.com/PatrikHlobil/Pandas-Bokeh" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd jk gy z fp md fr fs me fu fw ji bi translated">PatrikHlobil/Pandas-Bokeh</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">Pandas-Bokeh 为 Pandas、GeoPandas 和 Pyspark 数据帧提供了一个 Bokeh 绘图后端，类似于已经…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">github.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ja ly"/></div></div></a></div><h1 id="82cd" class="mn mo jj bd mp mq mr ms mt mu mv mw mx kp my kq mz ks na kt nb kv nc kw nd ne bi translated">条形图示例</h1><p id="5a4f" class="pw-post-body-paragraph ky kz jj la b lb nf kk ld le ng kn lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">让我用一个例子来演示这个库。</p><p id="6b83" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们需要使用<code class="fe lu lv lw lx b">pip</code>安装库。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="5110" class="ns mo jj lx b gy nt nu l nv nw">pip install pandas_bokeh</span></pre><p id="c41f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安装后，我们需要导入<code class="fe lu lv lw lx b">numpy</code>、<code class="fe lu lv lw lx b">pandas</code>，当然还有<code class="fe lu lv lw lx b">pandas_bokeh</code>库。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="4717" class="ns mo jj lx b gy nt nu l nv nw">import numpy as np<br/>import pandas as pd<br/>import pandas_bokeh</span></pre><p id="dcd8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想生成一些随机数据用于演示目的。假设我们有一个电子商务网站的数据集。该数据集包含三个类别从 2010 年到 2019 年的销售额。让我们使用 Numpy 生成这个数据集。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="6367" class="ns mo jj lx b gy nt nu l nv nw">df = pd.DataFrame({<br/>    'Year': np.arange(2010, 2020),<br/>    'Category-A': np.random.uniform(9000, 15000, 10),<br/>    'Category-B': np.random.uniform(9000, 15000, 10),<br/>    'Category-C': np.random.uniform(9000, 15000, 10)<br/>})</span></pre><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/97f7a328eb058f886e3fbdd3b3dd97cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*gVH41KFsbU-pyVtnng_asw.png"/></div></div></figure><p id="fc34" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们的熊猫数据库里有了数据。在我们开始使用<code class="fe lu lv lw lx b">pandas_bokeh</code>绘制数据之前，我们需要设置笔记本的输出，这将适用于 Jupyter/iPython 笔记本。稍后我会解释为什么我们需要这样做，因为<code class="fe lu lv lw lx b">pandas_bokeh</code>支持其他输出位置。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="2e3d" class="ns mo jj lx b gy nt nu l nv nw">pandas_bokeh.output_notebook()</span></pre><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c5c1f912d44813bcb0c025b023e9675d.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*1X5_SOzFJpKZvb0ugOgwhQ.png"/></div></figure><p id="a593" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好的。我们现在可以绘制数据帧。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="3748" class="ns mo jj lx b gy nt nu l nv nw">df.plot_bokeh(<br/>    kind='bar',<br/>    x='Year',<br/>    y=['Category-A', 'Category-B', 'Category-C'],<br/>    xlabel='Category',<br/>    ylabel='Annual Sales',<br/>    title='Annual Sales by Category'<br/>)</span></pre><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/6223dc314517ee2ff38e1b8f00a11f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*Xvz4gfS8vHU5WRtyOKnIdQ.png"/></div></figure><p id="e982" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是不是比默认的<code class="fe lu lv lw lx b">matplotlib</code>好看多了？让我们快速看一下参数:</p><ul class=""><li id="95ba" class="oa ob jj la b lb lc le lf lh oc ll od lp oe lt of og oh oi bi translated">您想要绘制哪种类型的图表？目前，<code class="fe lu lv lw lx b">pandas_bokeh</code>支持以下图表类型:折线图、点图、阶跃图、散点图、条形图、直方图、面积图、饼图和地图。</li><li id="1638" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">x</code>和<code class="fe lu lv lw lx b">y</code>简单地传入熊猫数据帧的列名</li><li id="2589" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">xlabel</code>和<code class="fe lu lv lw lx b">ylabel</code>x 轴和 y 轴相对的标签</li><li id="22d9" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">title</code>图表的标题</li></ul><p id="e079" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，你已经看到了创造这样一个美丽的情节是多么容易。更重要的是，它是互动的。下面是 GitHub 官方回购的 GIF。</p><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/3659321fe983c5f202186806ec3bc55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lfsR26JXj4o_QMWI.gif"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">图片提供:<a class="ae jg" href="https://github.com/PatrikHlobil/Pandas-Bokeh/raw/master/docs/Images/Startimage.gif" rel="noopener ugc nofollow" target="_blank">https://github . com/PatrikHlobil/Pandas-Bokeh/raw/master/docs/Images/start image . gif</a></p></figure><h1 id="3084" class="mn mo jj bd mp mq mr ms mt mu mv mw mx kp my kq mz ks na kt nb kv nc kw nd ne bi translated">一些高级参数</h1><p id="1ecd" class="pw-post-body-paragraph ky kz jj la b lb nf kk ld le ng kn lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">当然，该库也支持许多高级参数，允许我们在必要时定制情节。</p><p id="a6eb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是另一个使用相同数据集的示例，但使用折线图绘制数据。</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="997b" class="ns mo jj lx b gy nt nu l nv nw">df.plot_bokeh.line(<br/>    x='Year', <br/>    y=['Category-A', 'Category-B', 'Category-C'],<br/>    figsize=(900, 500),<br/>    ylim=(5000, 20000),<br/>    zooming=False,<br/>    panning=False<br/>)</span></pre><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/6bab26b2a12564fd21ecea6006adffdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3RVM9lDTPkExkq-i90sxhg.png"/></div></div></figure><p id="5d34" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，这里我使用的<code class="fe lu lv lw lx b">df.plot_bokeh.line(...)</code>相当于<code class="fe lu lv lw lx b">df.plot_bokeh(kind='line', ...)</code>。</p><ul class=""><li id="8aa5" class="oa ob jj la b lb lc le lf lh oc ll od lp oe lt of og oh oi bi translated"><code class="fe lu lv lw lx b">figsize</code>定义元组中绘图的大小(宽度，高度)</li><li id="0024" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">xlim</code>和<code class="fe lu lv lw lx b">ylim</code>分别定义 x 轴和 y 轴的默认范围。这里我只为 y 轴设置。</li><li id="56a6" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">zooming</code>启用/禁用缩放手势</li><li id="f60d" class="oa ob jj la b lb oj le ok lh ol ll om lp on lt of og oh oi bi translated"><code class="fe lu lv lw lx b">panning</code>启用/禁用平移手势</li></ul><h1 id="533e" class="mn mo jj bd mp mq mr ms mt mu mv mw mx kp my kq mz ks na kt nb kv nc kw nd ne bi translated">输出到 HTML</h1><p id="8490" class="pw-post-body-paragraph ky kz jj la b lb nf kk ld le ng kn lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">你记得我们已经把输出设置到笔记本了吗？</p><pre class="nk nl nm nn gt no lx np nq aw nr bi"><span id="3b37" class="ns mo jj lx b gy nt nu l nv nw">pandas_bokeh.output_file('chart.html')</span></pre><p id="f858" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除了 Jupyter 笔记本，我们还可以将输出设置为 HTML 文件。因此，图表将被保存并输出到一个可以持久化和分发的 HTML 文件中。</p><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/50561e99228c247069e3688400e8c2e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*gLfCGUoYuBl3n-ubWhuy9w.png"/></div></figure><h1 id="a8e3" class="mn mo jj bd mp mq mr ms mt mu mv mw mx kp my kq mz ks na kt nb kv nc kw nd ne bi translated">摘要</h1><figure class="nk nl nm nn gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/35f616558fd682d7fb750700f5672e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AOJTfn7_BB1DxSmX"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com/@kellysikkema?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kelly Sikkema </a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a457" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我演示了如何使用<code class="fe lu lv lw lx b">pandas_bokeh</code>库，用极其简单的代码绘制出您的 Pandas 数据帧，但它是一个具有交互特性的漂亮演示。</p><p id="4a41" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实证明，当您有许多特殊的渲染要求时，该库可能无法满足您的所有需求，但当您只想为数据集构建一个典型的图表时，它是一个优秀的库。</p><div class="is it gp gr iu ly"><a href="https://medium.com/@qiuyujx/membership" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd jk gy z fp md fr fs me fu fw ji bi translated">通过我的推荐链接加入 Medium 克里斯托弗·陶</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="os l mj mk ml mh mm ja ly"/></div></div></a></div><p id="7d6b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你觉得我的文章有帮助，请考虑加入 Medium 会员来支持我和成千上万的其他作者！(点击上面的链接)</p></div></div>    
</body>
</html>