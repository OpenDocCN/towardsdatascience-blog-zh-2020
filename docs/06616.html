<html>
<head>
<title>Real World Example on Web Scraping with Selenium and Beautiful Soup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现实世界的例子，网页刮硒和美丽的汤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/real-world-example-on-web-scraping-with-selenium-and-beautiful-soup-3e615dbc1fa1?source=collection_archive---------15-----------------------#2020-05-25">https://towardsdatascience.com/real-world-example-on-web-scraping-with-selenium-and-beautiful-soup-3e615dbc1fa1?source=collection_archive---------15-----------------------#2020-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/9c6d7803c91455bf44aacb0c698109a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*trxvmAHM-SKIb1BA"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">美国宇航局在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><div class=""/></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><p id="9746" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">53.9 亿。</strong></p><p id="71c0" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这就是万维网的页数。</p><p id="4781" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">数据方面？</p><p id="1bdd" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">价值超过 1,200。</strong></p><p id="9270" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这相当于 1，200，000 TB 和 1，200，000，000 GB。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/e33b1558f347a65eed9d54e4c3fdba83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*N1awsxHuZE8-LERPJAHshg.gif"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Giphy 的 GIF，2013 年 7 月 12 日(<a class="ae jg" href="https://giphy.com/gifs/confused-frustrated-mind-blown-UQB2MBJ3NzHsQ" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></figure><p id="d955" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我想说的是，网络上有大量的非结构化数据。</p><p id="62d4" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">只是坐在那里…</p><p id="937f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">等待被刮擦和分析。😉</p><p id="2eb1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在这篇文章中，我将讲述如何用硒和美丽的汤来抓取网页的代码片段。</p><p id="29b3" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我将先介绍这些技术，然后再介绍一个真实的例子。</p><p id="826b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我也将提出我在这个刮擦项目中遇到的问题，这样你就知道如何在你自己的工作中减轻这些问题。</p><p id="e658" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们开始吧！</p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h1 id="fff2" class="lq lr jj bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">硒美汤简介</strong></h1><p id="922b" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">对于外行来说，让我们先简单介绍一下我们将要使用的技术。</p><h2 id="8acc" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">硒</h2><p id="9c64" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">Selenium 诞生于 2004 年，是一个开源的自动化测试框架，用于验证跨不同浏览器和平台的 web 应用程序。</p><p id="746a" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这些测试脚本可以使用不同的编程语言构建，如 Java、C#、PHP、Python、Ruby 和 Perl。</p><p id="4076" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在本文中，我们将使用 Selenium Python 包(<a class="ae jg" href="https://selenium-python.readthedocs.io/api.html" rel="noopener ugc nofollow" target="_blank"> Selenium Web Driver </a>)来创建测试脚本。</p><p id="13c8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">作为对其工作原理的快速介绍，这里有一张我在 Jupyter 笔记本上使用 Selenium 的 GIF 图片。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/cbd410ffa400377058e057a8b27a59ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*r7yUx8-7Pq47nzNB1QTE8w.gif"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">硒简介</p></figure><p id="af6e" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在 GIF 中，我开始导入相关的包并初始化一个 chrome 浏览器。同时我告诉浏览器得到“http://www.google.com”。</p><p id="6e66" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">接下来，我触发了一个命令，在退出之前在 Google 搜索栏中搜索“Selenium python API”。</p><p id="97bc" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果你想尝试一下，那就开始使用你当地的 Jupyter 笔记本吧。</p><p id="6cb8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">您需要做的第一件事是安装 selenium。</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="342d" class="mt lr jj nh b gy nl nm l nn no">pip install selenium</span></pre><p id="b8ea" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">你还需要在这里安装 chrome 驱动程序<a class="ae jg" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="4008" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">然后逐步运行下面的代码。</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="0ab4" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意第 13 行，类名是“gLFyf.gsfi”？</p><p id="78eb" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我怎么知道谷歌搜索栏使用这个标签？</p><p id="3a33" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">要找出一个 HTML 页面的不同标签，你需要做的就是右键点击页面，用“inspect”进入开发者模式。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/844306b2abb6552b018d6ca081463a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9orIgc1QkgG9JzsgVi3FQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">如何从网页进入开发者模式</p></figure><p id="5875" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">接下来，点击左上角的图标。这将使您能够选择页面上的元素。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/dc7e7208a364b928dfb9d0b72fa11d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P3dL1ua81qeyvpeIlALBpw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">用于选择页面上元素的图标</p></figure><p id="93d8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">要查看搜索栏的标签，只需将鼠标悬停在搜索栏上。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/913b571a4907cc468d6a3f35a1a8f0ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A9k9BFDq8YTTZjKHJMc62A.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">如何找到相关标签的示例</p></figure><p id="c8a8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">一旦找到感兴趣的相关类标签，就可以告诉 Selenium 用代码获取它</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="c5d9" class="mt lr jj nh b gy nl nm l nn no">elem = browser.find_element_by_class_name("gLFyf.gsfi")</span></pre><p id="201c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">不过，这里需要注意一点。</p><p id="9913" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">根据这个特殊的抓取项目的经验，我注意到了“find_element_by_class_name”函数中的一个错误。</p><p id="1bba" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果类名太长，空格太多，<strong class="kp jk">该功能将无法工作。</strong></p><p id="18f0" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我在谷歌上搜索了大量的解决方案。即使您将这些句点放在标记之间，即“gLFyf <period> gsfi”</period></p><p id="34ec" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">这并不总是有效……</strong></p><p id="e527" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这方面很不靠谱。</p><p id="8085" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">过滤掉类标签的更好方法是使用 Beautiful Soup。</p><p id="df1b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">所以如果硒元素让我如此痛苦…</p><p id="50e5" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">为什么是硒？</strong></p><p id="4408" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我不得不在这个项目中使用硒的原因是由于在美丽的汤方面的限制。</p><p id="6ba8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">当 Beautiful Soup 解析一个 HTML 页面时，它<strong class="kp jk">不会</strong>解析页面中需要 java script 加载的部分。</p><p id="1ba8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">有时，在加载网页的新部分之前，有些网页需要用户向下滚动——加载通常由 java 脚本完成。</p><p id="08b8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">因此，如果您的 web 页面要求您向下滚动来加载页面的片段，漂亮的 Soup 解析器将<strong class="kp jk">永远不会</strong>解析完整的 HTML。</p><p id="759c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">为了缓解这个问题，您应该在解析整个 HTML 页面之前使用 Selenium 来自动化滚动过程。</p><p id="e48f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这样，您可以灵活地使用硒或美丽的汤来开始您的信息提取过程。</p><p id="88f5" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我两个都用，因为他们每个人都有自己的优点，在一起，他们就像一对强大的夫妇。😃</p><h2 id="4406" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">美味的汤</h2><p id="c58e" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">创建于 2004 年的<a class="ae jg" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Beautiful Soup </a>是一个用于无缝解析 HTML 和 XML 文件的 Python 库。</p><p id="0ed1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我这么说是什么意思？</p><p id="e461" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">好吧，让我们来看看他们的<a class="ae jg" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">文档</a>中的例子的修改版本。</p><p id="7f22" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我修改了这个例子，让事情变得更清楚一些。</p><p id="3ced" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">首先要做的就是装美汤。</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="cb0f" class="mt lr jj nh b gy nl nm l nn no">pip install beautifulsoup4</span></pre><p id="bd76" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">以下是代码:</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="d044" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">正如你所看到的，美丽的汤是非常容易和直观的使用。</p><p id="4ee5" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果你有时间，我建议你亲自尝试一下。</p><p id="eaf2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">那好吧。</p><p id="9099" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">既然介绍已经结束了，那么文章的核心部分就来了！</p><p id="1ee9" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们开始吧！</p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h1 id="6704" class="lq lr jj bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">真正的网络抓取项目</h1><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/05a0ec840113b6fb970a6228e69caea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xZjkHf2ztz-OfcoW"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@dtopkin1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">戴恩·托普金</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="c8cc" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果您已经完成了上面的介绍步骤，那么做得很好！</p><p id="9e8c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">但是这就是网络抓取变得有点复杂的地方。</p><p id="26b8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">整个抓取项目是从 TDS 作者那里抓取文章标题。</p><p id="7155" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我想分析 TDS 作者写的是什么主题，并通过每篇帖子获得的掌声数量来估计读者的兴趣。</p><p id="1222" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我不会在这篇文章中讨论结果，但会在另一篇文章中讨论。</p><p id="fad1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">然而，我将介绍用于完成抓取任务的代码。</p><p id="8a45" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这花了我大约 2 天的时间让它工作，因为我一路上遇到了很多不同的 bug。</p><p id="df88" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">开始了。</p><h2 id="0d32" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">用硒和美丽的汤刮网-两步过程</h2><p id="27a9" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">我分两步完成了这件事。</p><p id="8b6e" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">第一步——定义需要抓取的网页，并找到不同网页中使用的通用标签。</strong></p><p id="37d9" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这一步需要一段时间，因为您需要找到所有相关的标签，并将它们与其他页面进行交叉引用，以确定它们是否指向您想要抓取的相同元素。</p><p id="0a90" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我通过打开不同页面的多个选项卡并进入开发者模式(即右键单击“Inspect”或按 F12)来手动完成此操作。</p><p id="2078" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">然后，我将鼠标悬停在我想要提取的元素上，并搜索所有这些元素使用的公共标签。</p><p id="a4d4" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">就拿我的简介来说吧。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/792ff8ce3f272be23af1b9e95e3a3d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8V0r11D2ImDBZwlI1IYjPw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">要刮的东西的例子</p></figure><p id="dc68" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我感兴趣的信息有:</p><ul class=""><li id="ea4c" class="nw nx jj kp b kq kr ku kv ky ny lc nz lg oa lk ob oc od oe bi translated">发布者名称</li><li id="3455" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">发布日期</li><li id="d911" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">读出时间</li><li id="1dcd" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">职位名称</li><li id="e08b" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">鼓掌次数</li></ul><p id="e9e2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我要找的是“div”标签，它包含我想要提取的信息。</p><p id="a946" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在这里，我找到了我需要的“div”标签，还注意到它有“class”标签！</p><p id="f06d" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">完美！</p><p id="121f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意上面有 7 个相同的“类”标签吗？</p><p id="f060" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这是因为我的个人资料页面中的每个帖子都有相同的标签名称。</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="dbeb" class="mt lr jj nh b gy nl nm l nn no">&lt;div class = "gk gl gm gn go y c"&gt;...&lt;/div&gt;</span></pre><p id="932c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这是你想要寻找的东西。</p><p id="05a1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">但问题是，其他用户资料是否遵循相同的标签？</strong></p><p id="cd31" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">让我们把这一发现和另一份资料对照一下。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/55c71146db6e46d8d7d5a1b883a4ca00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EA0IUADSjX2KpIOjJdn8aQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">另一个概要文件的类标签示例</p></figure><p id="5151" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">事实证明，并不尽然。</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="f707" class="mt lr jj nh b gy nl nm l nn no">&lt;div class = "gm gn go gp gq y c"&gt;...&lt;/div&gt;</span></pre><p id="76c2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">但是在看了另一个简介之后…</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/1b4752c8d3b55ad0ce4878065416e3c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0GfqKwEpFtmCvbwW8srZQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">具有不同配置文件的另一个类标签的示例</p></figure><p id="19fa" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">有格局。</strong></p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="ae95" class="mt lr jj nh b gy nl nm l nn no">&lt;div class = "go gp gp gr gs y c"&gt;...&lt;/div&gt;</span></pre><p id="d28b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我需要的所有“div”标签的模式都遵循以下正则表达式模式:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="f16d" class="mt lr jj nh b gy nl nm l nn no">re.compile(r'(..\s){5}y c')</span></pre><p id="5212" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在英语中，会有一个 2 字符后跟一个恰好出现 5 次的空格。在此旁边，将出现字符“y c”。</p><p id="1976" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">因此，这就是我在抓取过程中使用的正则表达式模式。</p><p id="544a" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我不会去经历所有需要的模式，但你得到的想法。</p><blockquote class="om"><p id="c2a8" class="on oo jj bd op oq or os ot ou ov lk dk translated">网络抓取有点粗糙，充满了硬编码的标签。</p></blockquote><p id="ef0d" class="pw-post-body-paragraph kn ko jj kp b kq ow ks kt ku ox kw kx ky oy la lb lc oz le lf lg pa li lj lk im bi translated">无论如何，我冲洗和重复上述步骤，我需要提取的一切。</p><p id="34fc" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">让我们进入下一步。</p><p id="16a4" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kp jk">步骤 2——定义脚本将遵循的逻辑流程</strong></p><p id="1679" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">回想一下，我们的目标是让<strong class="kp jk">获得所有</strong> TDS 职位头衔。</p><p id="c024" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">从第一步<em class="pb">我们知道我们想要提取什么</em>，以及<em class="pb">如何提取</em>。</p><p id="5032" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们现在需要的是知道如何从<strong class="kp jk">所有</strong>作者简介页面中<strong class="kp jk">动态</strong>提取帖子标题。</p><p id="9c55" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这意味着加载<em class="pb">每个</em>编写者的档案并启动抓取过程。</p><p id="efcd" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">关键字“<em class="pb">各</em>”。</p><p id="c3b8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们该如何着手呢？</p><p id="c69a" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这是一个分为三步的过程:</p><ol class=""><li id="a224" class="nw nx jj kp b kq kr ku kv ky ny lc nz lg oa lk pc oc od oe bi translated">我们首先运行一个抓取作业来提取所有 TDS writer 配置文件链接。</li><li id="4f99" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk pc oc od oe bi translated">然后使用每个链接进入他们的个人资料页面，提取他们之前写的所有帖子标题。</li><li id="1d85" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk pc oc od oe bi translated">作为(2)的子任务，对于每个 post“div ”,为基本数据帧创建一个新条目，并将该行追加到该条目。</li></ol><p id="5229" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">下面是应用所有 3 个步骤后的代码。</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="57f7" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">让我们来分析一下你在上面的代码片段中看到了什么。</p><p id="69fd" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">首先，我调用了一个定义“get_profile_urls(…)”，它接受指向所有 TDS 作者个人资料的链接。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/31e3fcc98a6d56d75ef327feb2e8d885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rAXdWtr6VIgvUmnxuI2qwQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">所有 TDS 作者简介的链接示例</p></figure><p id="ee09" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">一旦定义抓取了每个作者的 URL 链接，它就返回一个它们的 python 列表。</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="87f3" class="mt lr jj nh b gy nl nm l nn no">url_list =['<a class="ae jg" href="https://medium.com/@kozyrkov','https://medium.com/@ssrosa','https://medium.com/@neha_mangal','https://medium.com/@parulnith'" rel="noopener">https://medium.com/@kozyrkov','https://medium.com/@ssrosa','https://medium.com/@neha_mangal','https://medium.com/@parulnith'</a>, ...]</span></pre><p id="b21f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这些链接中的每一个都被循环，并被用作另一个名为“extract_information(…)”的定义的输入。</p><p id="9c38" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在 gist 中，这个定义为每个 URL 初始化一个 Selenium 浏览器，并使用 Selenium 一直向下滚动到概要文件的末尾，然后启动两个子任务:“get_post(…)”和“get_writer_profile(…)”。</p><p id="92da" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">下面是 extract_information(…)的定义:</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="e2c2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">请注意第 21 行到第 37 行:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="21b3" class="mt lr jj nh b gy nl nm l nn no"># Path to webdriver<br/>    browser = webdriver.Chrome(webdriver_path)</span><span id="7261" class="mt lr jj nh b gy pe nm l nn no"># URL to scrape<br/>    browser.get(pub_url)<br/>    time.sleep(1)</span><span id="f7db" class="mt lr jj nh b gy pe nm l nn no"># Get body<br/>    elem = browser.find_element_by_tag_name("body")</span><span id="0f1b" class="mt lr jj nh b gy pe nm l nn no"># No. of times to scroll<br/>    no_of_pagedowns = 100</span><span id="9d33" class="mt lr jj nh b gy pe nm l nn no">while no_of_pagedowns:<br/>        elem.send_keys(Keys.PAGE_DOWN)<br/>        time.sleep(0.5)<br/>        no_of_pagedowns-=1</span></pre><p id="b75d" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这是 Selenium 为每个配置文件启动一个浏览器，定义页面的“主体”,每 0.5 秒向下滚动页面 100 次。</p><p id="60f3" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">是的，100 是硬编码的。我以为你会在 100 卷内看完每一页。</p><p id="9498" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果没有，只要增加到 150 滚动，这应该做的把戏。</p><p id="504f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">继续，请注意我是如何跟踪错误计数的。</p><p id="a8d2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">说到网络抓取，会有很多意想不到的事情发生。</p><p id="2be5" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在这种情况下，我面临着以下问题:</p><ul class=""><li id="cb0e" class="nw nx jj kp b kq kr ku kv ky ny lc nz lg oa lk ob oc od oe bi translated">没有掌声的帖子。因此，我必须说明这一点。</li><li id="7c1c" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">没有 H1 标题标签的帖子。</li><li id="9872" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">帖子 H4 标签在所有帖子中不相等。</li><li id="bec8" class="nw nx jj kp b kq of ku og ky oh lc oi lg oj lk ob oc od oe bi translated">还有更多…</li></ul><p id="55f8" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">对于所有这些小错误，我使用“try and except”来记录错误计数，并允许程序即使有错误也能继续运行。</p><p id="fe67" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果帖子不符合数据框列，这将是一个错误，我记录了计数。</p><p id="59ab" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我总共刮了 5524 篇文章，其中有 435 个错误。</p><p id="79b1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">呀。</p><p id="3a46" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">不过还好，我凑合用 5524。😏</p><p id="956f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">现在让我们看看“get_posts(…)”和“get_writer_profiles(…)”是什么样子的。</p><h2 id="e073" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">“get_posts(…)”定义</h2><p id="09b9" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">该定义从每个帖子中提取所有相关信息，并为基本数据框创建一个新条目，并将该新条目附加到该数据框中。</p><p id="7f55" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">此外，任何未通过提取过程的帖子都会被忽略，并保留一个错误计数器。</p><p id="a280" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">下面是代码的样子:</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="5487" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意第 25 行和第 26 行:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="e6f3" class="mt lr jj nh b gy nl nm l nn no">ends_with_yc = re.compile(r'(..\s){5}y c')    <br/>for row in page_content.find_all('div', class_=ends_with_yc):</span></pre><p id="76a1" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">回想一下，我使用正则表达式匹配来查找每个帖子的位置。</p><p id="ec6f" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我使用 Beautiful Soup 而不是 Selenium 进行提取的原因是因为类标签的匹配。</p><p id="9bc2" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如前所述，Selenium 中似乎有一个 bug，即类标签的匹配没有正常工作。</p><p id="bcdc" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在这个项目中，使用 class 标签来定位相关的“div”标签是至关重要的。</p><p id="dc74" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">接下来我想提醒大家注意的是第 63 行:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="8698" class="mt lr jj nh b gy nl nm l nn no">dp_rt_tag = row.find_all('span')[3].find('div')</span></pre><p id="35aa" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">有时候找到一个父标签来搜索它的子标签真的很有帮助。</p><p id="5031" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在第 63 行，父标签是“<em class="pb"> span </em>”，子标签是“<em class="pb"> div </em>”。</p><p id="9a14" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">你看，网页本质上是有层次的，知道了父标签，有时候提取东西会更容易。</p><p id="aff7" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这里有一个我提到的等级的例子。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pf"><img src="../Images/366f58f58ed37417c1f4ec8fdd9b92ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*804Vle5s0DW5KToJDtm_bA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">网页中的层次结构示例</p></figure><p id="554b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在上图中，父标签可以是“<em class="pb">部分</em>，它有很多子标签——“<em class="pb">div</em>”、“<em class="pb">图</em>”、“<em class="pb"> h1 </em>”、“<em class="pb"> h2 </em>”等。</p><h2 id="3cab" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">“get_writer_profiles(…)”定义</h2><p id="dc67" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">除了提取文章标题，我还随意提取了作者的名字，以及他们是否是顶级作家。</p><p id="2012" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这就是这个定义的本质。相当直接。</p><p id="23a7" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我用硒来提取。</p><p id="f83c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意不同的语法。</p><figure class="lm ln lo lp gt iv"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="d447" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意，对于 Selenium，要找到一个标记，您需要运行:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="d65a" class="mt lr jj nh b gy nl nm l nn no">match_tag = browser.find_element_by_tag_name("p")<br/>OR<br/>match_tag = browser.find_elements_by_tag_name("p")</span></pre><p id="e6af" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">单词“<em class="pb">元素</em>”与“<em class="pb">元素</em>”之间的细微差别。</p><p id="502d" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在《美丽的汤》中，相当于:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="8cd2" class="mt lr jj nh b gy nl nm l nn no">match_tag = browser.find("p")<br/>OR<br/>match_tag = browser.find_all("p")</span></pre><p id="cf77" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">要在 Selenium 中找到一个类，您可以写:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="721f" class="mt lr jj nh b gy nl nm l nn no">match_tag = browser.find_element_by_class_name("go.gp.gp.gr.gs.y.c")</span></pre><p id="c314" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在美丽的汤里:</p><pre class="lm ln lo lp gt ng nh ni nj aw nk bi"><span id="1de9" class="mt lr jj nh b gy nl nm l nn no">match_tag = browser.find('div', class_="go gp gp gr gs y c")</span></pre><p id="0d7b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">但是在 Selenium 中找到“class”标签并不总是有效的。</p><p id="4a1a" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">奇怪的是，它对某些类标签有效，但对其他类标签无效。😅</p><p id="a19b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">它对介绍中的 Google 示例有效，不是吗？</p><p id="f082" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">确实非常奇怪…</p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h1 id="9a21" class="lq lr jj bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">最终结果</h1><p id="ce28" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">运行您看到的代码后，最终提取的结果将如下所示:</p><p id="8907" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我以出版商的身份过滤了 TDS。</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pg"><img src="../Images/a78ce0fc3b0098f6d65de8c9eddea3aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L9xeNdJryi0sU8AYZETAWA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">抓取文章标题的结果</p></figure><p id="7a27" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">对于作者简介:</p><figure class="lm ln lo lp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ph"><img src="../Images/a2be5eb55c84e5afa0d893a05c2a612f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zGbGtHMYr_TO9yYl7g0KJg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">抓取作者个人资料的结果</p></figure><h2 id="e8e1" class="mt lr jj bd ls mu mv dn lw mw mx dp ma ky my mz me lc na nb mi lg nc nd mm ne bi translated">偷偷摸摸的时刻</h2><p id="c140" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">如果您一直在关注，请注意我是如何跳过一个定义的？😉</p><p id="e830" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我没有提到任何关于“get_profile_url(…)”的定义。</p><p id="e722" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我跳过了这个定义，所以你可以自己尝试一下。</p><p id="76d9" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">与我分享的其他定义相比，这非常简单。</p><p id="2670" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">自己试一试，看看硒或美丽的汤是如何工作的！</p><p id="8650" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果所有这些都失败了，我的脚本和笔记本在下面的 GitHub 页面上。</p><p id="31a4" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">一旦你亲自尝试了提取过程，你就可以检查它们。</p><p id="8708" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这篇文章的 GitHub 链接:</p><div class="is it gp gr iu pi"><a href="https://github.com/timtan-github/Selenium-Web-Scraper" rel="noopener  ugc nofollow" target="_blank"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd jk gy z fp pn fr fs po fu fw ji bi translated">timtan-github/Selenium-Web-刮刀</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">这个 Selenium web scraper 用于一个大型项目的数据收集阶段，以分析作者和读者…</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">github.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw ja pi"/></div></div></a></div></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h1 id="6879" class="lq lr jj bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结尾注释</h1><p id="ac21" class="pw-post-body-paragraph kn ko jj kp b kq mo ks kt ku mp kw kx ky mq la lb lc mr le lf lg ms li lj lk im bi translated">嗯，就这样吧！</p><p id="8f54" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在这篇文章中，我已经向你介绍了硒和美丽的汤是如何通过简单的练习发挥作用的。</p><p id="b61e" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">然后我给了你代码，让你在一组更真实的数据上尝试网络抓取。即 TDS 网页</p><p id="cf5c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">注意，这个抓取器可以在任何出版物上工作，不仅仅是 TDS，在某种意义上，它可以是你得到的其他 web 抓取项目的基础。</p><p id="b80c" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">希望这篇文章能让你对网络抓取有所了解。</p><p id="3383" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">说完了，下一篇帖子再见！</p><p id="d81a" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">再见！</p><p id="749b" class="pw-post-body-paragraph kn ko jj kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">领英简介:<a class="ae jg" href="https://www.linkedin.com/in/timothy-tan-97587190/" rel="noopener ugc nofollow" target="_blank">谭震霆</a></p></div></div>    
</body>
</html>