<html>
<head>
<title>Logical Flow of SQL Query | SQL Through the Eye of Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从数据库的角度看 SQL 查询| SQL 的逻辑流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/logical-flow-of-sql-query-sql-through-the-eye-of-database-e7d111c87516?source=collection_archive---------17-----------------------#2020-09-06">https://towardsdatascience.com/logical-flow-of-sql-query-sql-through-the-eye-of-database-e7d111c87516?source=collection_archive---------17-----------------------#2020-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b76b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于所有的数据分析师来说，改变你从逻辑上看待 SQL 语句的方式。</h2></div><p id="4813" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi lb translated">结构化查询语言(SQL)以数据的浪漫语言而闻名。甚至想从万亿字节的关系数据中提取一个正确的答案似乎也有点让人不知所措。所以理解查询的逻辑流程非常重要。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/d1a6d4435cc0e2219debb7ade3bcf0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TRylO5CJe4SLWD5L"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">由<a class="ae ma" href="https://unsplash.com/@glenncarstenspeters?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">格伦·卡斯滕斯-彼得斯</a>在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h2 id="7a76" class="mb mc iq bd md me mf dn mg mh mi dp mj ko mk ml mm ks mn mo mp kw mq mr ms mt bi translated">查询执行计划</h2><p id="0fed" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">SQL 是一种声明性语言，这意味着 SQL query 以逻辑方式向 SQL 查询优化器描述问题，后者随后会决定以物理方式执行查询的最佳方式。这种执行方法称为查询执行计划。可以有多个执行计划，所以当我们说优化一个查询时，反过来指的是使查询执行计划更有效。</p><p id="abb5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看看 SQL 查询可以通过的两个流程:</p><h1 id="aae7" class="mz mc iq bd md na nb nc mg nd ne nf mj jw ng jx mm jz nh ka mp kc ni kd ms nj bi translated">查询的语法流程</h1><p id="f0ed" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">SELECT 语句基本上告诉数据库要检索什么数据，从哪些列、行和表中获取数据，以及如何对数据进行排序。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nk"><img src="../Images/8f67ff166379790435b95823827ad19d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzIBbK8gR6MY6WYGWgMLYQ.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">SELECT 命令[1]的缩写语法</p></figure><ul class=""><li id="19d4" class="nl nm iq kh b ki kj kl km ko nn ks no kw np la nq nr ns nt bi translated"><strong class="kh ir"> SELECT </strong>语句以一列列或表达式开始。</li><li id="2639" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated">SELECT 语句的<strong class="kh ir"> FROM </strong>部分将所有数据源组合成一个结果集，供 SELECT 语句的其余部分使用。</li><li id="916b" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated"><strong class="kh ir"> WHERE </strong>子句作用于由 FROM 子句组装的记录集，根据条件过滤某些行。</li><li id="d63e" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated"><strong class="kh ir"> GROUP BY </strong>子句可以根据指定的列将较大的数据集分组为较小的数据集。</li><li id="4433" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated"><strong class="kh ir"> HAVING </strong>子句可用于限制 GROUP BY 的聚合结果。</li><li id="d4a7" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la nq nr ns nt bi translated"><strong class="kh ir"> ORDER BY </strong>子句确定结果集的排序顺序。</li></ul><blockquote class="nz oa ob"><p id="c601" class="kf kg oc kh b ki kj jr kk kl km ju kn od kp kq kr oe kt ku kv of kx ky kz la ij bi translated">最简单的有效 SQL 语句是:</p><p id="5f72" class="kf kg oc kh b ki kj jr kk kl km ju kn od kp kq kr oe kt ku kv of kx ky kz la ij bi translated">选择 1；(Oracle a 要求从 DUAL 追加来完成此操作)</p></blockquote><blockquote class="og"><p id="9fbd" class="oh oi iq bd oj ok ol om on oo op la dk translated">嗯...「句法流」的流动出了什么问题？你能在不知道数据来源的情况下选择数据吗？？...嗯..某处有逻辑缺失的权利！！！苏..</p></blockquote><figure class="or os ot ou ov lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi oq"><img src="../Images/e22ab12adff6605e48fb5aa373b4f02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jq0SH3SrysYtdwJU"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated"><a class="ae ma" href="https://unsplash.com/@smartphotocourses?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Smart </a>在<a class="ae ma" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><h1 id="ef90" class="mz mc iq bd md na nb nc mg nd ne nf mj jw ng jx mm jz nh ka mp kc ni kd ms nj bi translated"><strong class="ak">查询的逻辑流程</strong></h1><p id="00de" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">思考 SQL 语句的最佳方式是通过查询的逻辑流。逻辑流程可能不同于物理流程，也不同于查询语法。请按以下顺序考虑查询:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ow"><img src="../Images/01a82de94664a3080ae185a7e008a8d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NuGUYLzfeyJSTkwRvAHbVw.png"/></div></div><p class="lw lx gj gh gi ly lz bd b be z dk translated">逻辑流程的简化视图[1]</p></figure><ol class=""><li id="dcf0" class="nl nm iq kh b ki kj kl km ko nn ks no kw np la ox nr ns nt bi translated"><strong class="kh ir"> FROM </strong>:逻辑上查询从<strong class="kh ir"> FROM </strong>子句开始，组装初始数据集。</li><li id="d3df" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> WHERE </strong>:然后应用 WHERE 子句只选择符合条件的行。</li><li id="e02e" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir">聚合</strong>:对数据进行后期聚合，比如求总和、对列中的数据值进行分组以及对组进行过滤。</li><li id="e878" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir">列表达式</strong>:在上述操作之后，选择列表连同其中涉及的任何表达式的计算一起被处理。<em class="oc">(在 SQL 查询中，除了列表达式，其他都是可选的。)</em></li><li id="bc0f" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> ORDER BY </strong>:获取最终结果行后，按照 ORDER BY 子句进行升序或降序排序。</li><li id="2ced" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> OVER: </strong>稍后可以应用窗口和排序函数，以获得结果的单独排序视图，并使用附加函数进行聚合。</li><li id="2eba" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> DISTINCT </strong>:用于删除结果数据中出现的任何重复行。</li><li id="ebae" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> TOP: </strong>在选择数据、过滤数据、执行所有计算并对其排序的所有过程之后，SQL 可以将结果限制为前几行。</li><li id="8c85" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir">插入、更新、删除:</strong>这是使用结果输出执行数据修改的查询的最后一个逻辑步骤。</li><li id="495c" class="nl nm iq kh b ki nu kl nv ko nw ks nx kw ny la ox nr ns nt bi translated"><strong class="kh ir"> UNION </strong>:可以使用 UNION 命令将多个查询的输出堆叠起来。</li></ol><blockquote class="nz oa ob"><p id="c765" class="kf kg oc kh b ki kj jr kk kl km ju kn od kp kq kr oe kt ku kv of kx ky kz la ij bi translated">适用于所有从事数据库或数据仓库项目的数据分析师。理解逻辑流程及其背后的基本逻辑非常重要。在任何数据分析项目中，数据收集都是第一步(从),删除不携带的数据(从),然后对数据进行排序(排序依据)。</p></blockquote><h1 id="e933" class="mz mc iq bd md na nb nc mg nd ne nf mj jw ng jx mm jz nh ka mp kc ni kd ms nj bi translated">参考</h1><p id="c210" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">[1] Adam Jorgensen，Patrick LeBlanc，Jose Chinchilla，Jorge Segarra，Aaron Nelson，Microsoft SQL Server 2012 Bible，</p></div></div>    
</body>
</html>