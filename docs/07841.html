<html>
<head>
<title>Dashboard Tutorial (I): Flask and Chart.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仪表盘教程(一):Flask和Chart.js</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/flask-and-chart-js-tutorial-i-d33e05fba845?source=collection_archive---------2-----------------------#2020-06-11">https://towardsdatascience.com/flask-and-chart-js-tutorial-i-d33e05fba845?source=collection_archive---------2-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b234" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">关于Flask和Chart.JS的教程。通过代码片段和示例浏览web和图表设计。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4653e83b8a52b3849b8c06c09eadf40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0oF_v446YlyedMY3huolaw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.freepik.com/" rel="noopener ugc nofollow" target="_blank">freepik.com</a>拍摄</p></figure><p id="22b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用Python创建web时，Flask通常是开发人员常用的后端。Flask支持HTTP请求的管理和模板呈现。在这篇博客中，我们将介绍flask的基本结构，以及flask如何从其他网页中渲染模板。此外，您将学习加载一个逗号分隔值(CSV)文件，并使用<a class="ae kv" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>将其可视化。</p><p id="549b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将了解到:</p><p id="9ca3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(1)创建一个基本的烧瓶应用程序</p><p id="fd73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(2)图表。JS图</p><h2 id="15c4" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">创建基本的烧瓶应用程序</h2><p id="059f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，我们创建一个. py文件来导入flask包并设置flask配置。Flask会从templates文件夹中调用HTML文件，而不需要任何指定的路径。为了将flask指向正确的文件夹，我们指定了<strong class="ky ir">模板_文件夹</strong>和<strong class="ky ir">静态_文件夹</strong>路径。在静态文件夹中，它通常存储javascript、CSS文件和图像。在模板文件夹中，它通常存储HTML文件。此外，我们为终端设置app.config等于True来显示错误消息。此外，错误消息会在控制台的inspect元素下弹出。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d589" class="ls lt iq mr b gy mv mw l mx my"><strong class="mr ir">import</strong> flask<br/><br/>app <strong class="mr ir">=</strong> flask.Flask(__name__<!-- -->, static_url_path='',<br/>            static_folder='static',<br/>            template_folder='template'<!-- -->)<br/>app.config["DEBUG"] <strong class="mr ir">=</strong> True</span></pre><p id="84ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们继续定义主页的路径。我们能够给出一个可以传入HTML的网页名称。<strong class="ky ir"> Render_template </strong>函数会调用HTML文件并显示在指定的网页路径上。对于user的第二个功能，可以将嵌入在route中的name标签传递到HTML中。例如，当给出(<a class="ae kv" href="http://127.0.0.1:5000/home" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/home</a>)时，内容将是“Hello home”。此外，用户可以通过使用<strong class="ky ir">重定向</strong>函数来分配HTML网页的路径，并将网页名称放入<strong class="ky ir"> url_for </strong>函数中。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="add2" class="ls lt iq mr b gy mv mw l mx my">from flask import render_template, redirect, url_for<br/><br/><a class="ae kv" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/home")<br/>def home():<br/>    return render_template("home.html")</span><span id="887b" class="ls lt iq mr b gy mz mw l mx my"><a class="ae kv" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/&lt;name&gt;")<br/>def user(name):<br/>    return f"Hello-- {name}!"</span><span id="f587" class="ls lt iq mr b gy mz mw l mx my"><a class="ae kv" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.route("/admin")<br/>def admin():<br/>    return redirect(url_for("home"))</span></pre><p id="48ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成上述设置后，您就可以通过启动主机和端口来运行flask应用程序了。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2986" class="ls lt iq mr b gy mv mw l mx my">if __name__ == '__main__':<br/>    app.run(<!-- -->host="localhost", port=8000, debug=True<!-- -->)</span></pre><h1 id="c413" class="na lt iq bd lu nb nc nd lx ne nf ng ma jw nh jx md jz ni ka mg kc nj kd mj nk bi translated">图表。JS图</h1><p id="1a6a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">图表。JS成为一个流行且强大的数据可视化库。该库增加了用户通过输入某些参数来定制图的灵活性，这满足了用户的期望。从Chart.js创建绘图的主要优点是基本的代码结构，它允许用户显示绘图而无需创建许多行代码。</p><p id="813f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开始之前，请确保通过调用网页或指定下载文件的本地目录来调用Chart.js文件。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="f67f" class="ls lt iq mr b gy mv mw l mx my">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"&gt;&lt;/script&gt;</span></pre><p id="5809" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还需要创建一个<strong class="ky ir">画布节点</strong>来呈现图表，并用其宽度和高度指定绘图的大小。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="877f" class="ls lt iq mr b gy mv mw l mx my">&lt;canvas id="myChart" width="400" height="400"&gt;&lt;/canvas&gt;</span></pre><p id="d5e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于以下使用Chart.js的4个绘图示例，我主要使用来自加拿大新冠肺炎疫情数据源的流行病学数据。可以通过其<a class="ae kv" href="https://github.com/ishaberry/Covid19Canada" rel="noopener ugc nofollow" target="_blank">链接</a>访问数据。</p><h2 id="b5a9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">条形图</h2><p id="ebf6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，我们将通过调用d3库来加载CSV文件，该文件将被呈现到makeChart函数中。接下来，我们用数据参数定义函数，并将数据列映射到某些变量。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="81f6" class="ls lt iq mr b gy mv mw l mx my">d3<br/> .csv(“/file/Bar_cases.csv”)<br/> .then(makeChart);</span><span id="dcf8" class="ls lt iq mr b gy mz mw l mx my">function makeChart(data) {<br/>      var country = data.map(function(d) {return d.province;});<br/>      var value = data.map(function(d) {return d.cumulative_cases;});</span></pre><p id="c994" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们通过<strong class="ky ir"> getElementById调用画布id来创建图表。</strong>通过将类型指定为条形(要翻转条形的方向，请将类型设置为horizontalBar)即可生成条形图。条形图的标签设置为省份名称，数据为5月份的累计病例数。您可以通过参数创建图例和标题。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="14c4" class="ls lt iq mr b gy mv mw l mx my">// Bar chart<br/>      new Chart(document.getElementById("myCanvas"), {<br/>          type: 'bar',<br/>          data: {<br/>            labels: country,<br/>            datasets: [<br/>              {<br/>                label: "Population (millions)",<br/>                backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],<br/>                data: value<br/>              }<br/>            ]<br/>          },<br/>          options: {<br/>            legend: { display: false },<br/>            title: {<br/>              display: true,<br/>              text: 'Total Confirmed Cases of COVID in May'<br/>            }<br/>          }<br/>      });</span></pre><p id="3ff4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过下面的柱状图，我们可以通过悬停的信息看到信息。在五个省份中，魁北克省感染COVID的人数最多，而安大略省是第二高的省份。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/23ad2e544be0992a0b5c818413a9bed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9mw75vyfHVFd-QidQhrH0w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图表1:条形图</p></figure><h2 id="bda9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">折线图</strong></h2><p id="8452" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，我们需要为线图准备数据集。为了创建时间序列线图，我们需要筛选每个省的每月COVID19确诊病例。<strong class="ky ir"> OnlyUnique </strong>函数是从一个数组中生成唯一值。<strong class="ky ir"> forEach </strong>函数能够通过一个数组上的值和索引的迭代，在多个数组上找到相同的索引。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3c5e" class="ls lt iq mr b gy mv mw l mx my">// get unique value of array<br/>    function onlyUnique(value, index, self) {<br/>    return self.indexOf(value) === index;<br/>      }<br/>    var mon_unique = month.filter( onlyUnique );</span><span id="1916" class="ls lt iq mr b gy mz mw l mx my">province.forEach((pro, index) =&gt; {<br/>      if (pro =="Alberta") {<br/>      ab_val.push(value[index]);<br/>    } else if (pro =="BC") {<br/>      BC_val.push(value[index]);<br/>    } else if (pro =="Manitoba") {<br/>      mb_val.push(value[index]);<br/>    } else if (pro =="New Brunswick") {<br/>      nb_val.push(value[index]);<br/>    }<br/>     else {<br/>      nl_val.push(value[index]);<br/>    }<br/>    });</span></pre><p id="d219" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过将类型指定为线条，可以简单地生成折线图。对于每一行，我们可以输入包装在数据集列表中的标签和数据。默认情况下，每条线下的区域用颜色填充，覆盖该线和x轴之间的区域。可以通过指定(<code class="fe nm nn no mr b">fill: false</code>)来删除颜色。此外，可以用borderColor参数指定颜色。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="9234" class="ls lt iq mr b gy mv mw l mx my">// Line chart<br/>    new Chart(document.getElementById("myCanvas"), {<br/>  type: 'line',<br/>  data: {<br/>    labels: mon_unique,<br/>    datasets: [{<br/>        data: ab_val,<br/>        label: "Alberta",<br/>        borderColor: "#3e95cd",<br/>        fill: false<br/>      }, {<br/>        data: BC_val,<br/>        label: "BC",<br/>        borderColor: "#8e5ea2",<br/>        fill: false<br/>      }, {<br/>        data: mb_val,<br/>        label: "Manitoba",<br/>        borderColor: "#3cba9f",<br/>        fill: false<br/>      }, {<br/>        data: nb_val,<br/>        label: "New Brunswick",<br/>        borderColor: "#e8c3b9",<br/>        fill: false<br/>      }, {<br/>        data: nl_val,<br/>        label: "NL",<br/>        borderColor: "#c45850",<br/>        fill: false<br/>      }<br/>    ]<br/>  },<br/>  options: {<br/>    title: {<br/>      display: true,<br/>      text: 'Positive Cases of COVID in provinces of Canada'<br/>    },<br/>    hover: {<br/>     mode: 'index',<br/>     intersect: true<br/>    },<br/>  }<br/>});</span></pre><p id="57ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从下面的线图来看，除BC省外，4个省在1月和2月报告了0例确诊病例。从2月中旬开始，艾伯塔省和不列颠哥伦比亚省的确诊病例逐渐增加。从3月开始，艾伯塔省的阳性病例大幅增加，因为AB省在5个省中名列前茅。另一方面，MB、NB和NL等省报告的确诊COVID病例较少。5月，曲线变平，COVID案例减少。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/fa6741ceeaf312a96c2347240877f3c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w3-76Y7kxzkRWFQflrdYOQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图表2:折线图</p></figure><h2 id="bc10" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">圆环图</h2><p id="9da4" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，我们需要为甜甜圈图准备数据集。每个省数组被处理并有五月份累积案例的最终输入。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4906" class="ls lt iq mr b gy mv mw l mx my">//donut chart, get the end of MAy &amp; display the cumulative cases of 5 provinces</span><span id="553e" class="ls lt iq mr b gy mz mw l mx my">// get unique value of array<br/>    function onlyUnique(value, index, self) {<br/>    return self.indexOf(value) === index;<br/>      }<br/>    var pro_unique = province.filter( onlyUnique );<br/>    var ab_val = []<br/>    var BC_val = []<br/>    var mb_val = []<br/>    var nb_val = []<br/>    var nl_val = []</span><span id="0e99" class="ls lt iq mr b gy mz mw l mx my">date.forEach((i_dt, index) =&gt; {<br/>      if (i_dt == '2020-05-31' &amp;&amp; province[index] =="Alberta") {<br/>      ab_val.push(value[index]);<br/>    } else if (i_dt == '2020-05-31' &amp;&amp; province[index] =="BC") {<br/>      BC_val.push(value[index]);<br/>    } else if (i_dt == '2020-05-31' &amp;&amp; province[index] =="Manitoba") {<br/>      mb_val.push(value[index]);<br/>    } else if (i_dt == '2020-05-31' &amp;&amp; province[index] =="New Brunswick") {<br/>      nb_val.push(value[index]);<br/>    }<br/>     else if (i_dt == '2020-05-31' &amp;&amp; province[index] =="NL") {<br/>     nl_val.push(value[index]);<br/>    }<br/>    });</span></pre><p id="e031" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总共有6个按钮。按钮randomizeData使数据随机化，同时每个标签的区域可以按比例显示。对于其他4个按钮，它们支持添加或删除数据的功能。此外，像半圆/全圆按钮，允许圆扩大和缩小到秋天和一半的大小。一旦每个按钮都被单击，它将调用Doughnut.update()函数来更新绘图。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2f43" class="ls lt iq mr b gy mv mw l mx my">&lt;button id="randomizeData"&gt;Randomize Data&lt;/button&gt;<br/>&lt;button id="addDataset"&gt;Add Dataset&lt;/button&gt;<br/>&lt;button id="removeDataset"&gt;Remove Dataset&lt;/button&gt;<br/>&lt;button id="addData"&gt;Add Data&lt;/button&gt;<br/>&lt;button id="removeData"&gt;Remove Data&lt;/button&gt;<br/>&lt;button id="changeCircleSize"&gt;Semi/Full Circle&lt;/button&gt;</span><span id="866d" class="ls lt iq mr b gy mz mw l mx my">window.chartColors = {<br/>      red: 'rgb(255, 99, 132)',<br/>      orange: 'rgb(255, 159, 64)',<br/>      yellow: 'rgb(255, 205, 86)',<br/>      green: 'rgb(75, 192, 192)',<br/>      blue: 'rgb(54, 162, 235)',<br/>      purple: 'rgb(153, 102, 255)',<br/>      grey: 'rgb(201, 203, 207)'<br/>    };<br/>var config = {<br/>   type: 'doughnut',<br/>   data: {<br/>    datasets: [{<br/>     data: [<br/>      ab_val,<br/>      BC_val,<br/>      mb_val,<br/>      nb_val,<br/>      nl_val,<br/>     ],<br/>     backgroundColor: [<br/>      window.chartColors.red,<br/>      window.chartColors.orange,<br/>      window.chartColors.yellow,<br/>      window.chartColors.green,<br/>      window.chartColors.blue,<br/>     ],<br/>     label: 'Dataset 1'<br/>    }],<br/>    labels: pro_unique<br/>   },<br/>   options: {<br/>    responsive: true,<br/>    legend: {<br/>     position: 'top',<br/>    },<br/>    title: {<br/>     display: true,<br/>     text: 'Total counts of confirmed cases in Canada'<br/>    },<br/>    animation: {<br/>     animateScale: true,<br/>     animateRotate: true<br/>    }<br/>   }<br/>  };</span><span id="6eb5" class="ls lt iq mr b gy mz mw l mx my">window.onload = function() {<br/>   var ctx = document.getElementById('chart-area').getContext('2d');<br/>   window.myDoughnut = new Chart(ctx, config);<br/>  };</span><span id="782a" class="ls lt iq mr b gy mz mw l mx my">document.getElementById('randomizeData').addEventListener('click', function() {<br/>   config.data.datasets.forEach(function(dataset) {<br/>    dataset.data = dataset.data.map(function() {<br/>     return randomScalingFactor();<br/>    });<br/>   });</span><span id="2941" class="ls lt iq mr b gy mz mw l mx my">window.myDoughnut.update();<br/>  });</span><span id="792c" class="ls lt iq mr b gy mz mw l mx my">var colorNames = Object.keys(window.chartColors);<br/>  document.getElementById('addDataset').addEventListener('click', function() {<br/>   var newDataset = {<br/>    backgroundColor: [],<br/>    data: [],<br/>    label: 'New dataset ' + config.data.datasets.length,<br/>   };</span><span id="5ab0" class="ls lt iq mr b gy mz mw l mx my">for (var index = 0; index &lt; config.data.labels.length; ++index) {<br/>    newDataset.data.push(randomScalingFactor());</span><span id="b762" class="ls lt iq mr b gy mz mw l mx my">var colorName = colorNames[index % colorNames.length];<br/>    var newColor = window.chartColors[colorName];<br/>    newDataset.backgroundColor.push(newColor);<br/>   }</span><span id="684b" class="ls lt iq mr b gy mz mw l mx my">config.data.datasets.push(newDataset);<br/>   window.myDoughnut.update();<br/>  });</span><span id="c394" class="ls lt iq mr b gy mz mw l mx my">document.getElementById('addData').addEventListener('click', function() {<br/>   if (config.data.datasets.length &gt; 0) {<br/>    config.data.labels.push('data #' + config.data.labels.length);</span><span id="6ea2" class="ls lt iq mr b gy mz mw l mx my">var colorName = colorNames[config.data.datasets[0].data.length % colorNames.length];<br/>    var newColor = window.chartColors[colorName];</span><span id="bb38" class="ls lt iq mr b gy mz mw l mx my">config.data.datasets.forEach(function(dataset) {<br/>     dataset.data.push(randomScalingFactor());<br/>     dataset.backgroundColor.push(newColor);<br/>    });</span><span id="f186" class="ls lt iq mr b gy mz mw l mx my">window.myDoughnut.update();<br/>   }<br/>  });</span><span id="4e0d" class="ls lt iq mr b gy mz mw l mx my">document.getElementById('removeDataset').addEventListener('click', function() {<br/>   config.data.datasets.splice(0, 1);<br/>   window.myDoughnut.update();<br/>  });</span><span id="b522" class="ls lt iq mr b gy mz mw l mx my">document.getElementById('removeData').addEventListener('click', function() {<br/>   config.data.labels.splice(-1, 1); // remove the label first</span><span id="d80f" class="ls lt iq mr b gy mz mw l mx my">config.data.datasets.forEach(function(dataset) {<br/>    dataset.data.pop();<br/>    dataset.backgroundColor.pop();<br/>   });</span><span id="a701" class="ls lt iq mr b gy mz mw l mx my">window.myDoughnut.update();<br/>  });</span><span id="c8d9" class="ls lt iq mr b gy mz mw l mx my">document.getElementById('changeCircleSize').addEventListener('click', function() {<br/>   if (window.myDoughnut.options.circumference === Math.PI) {<br/>    window.myDoughnut.options.circumference = 2 * Math.PI;<br/>    window.myDoughnut.options.rotation = -Math.PI / 2;<br/>   } else {<br/>    window.myDoughnut.options.circumference = Math.PI;<br/>    window.myDoughnut.options.rotation = -Math.PI;<br/>   }</span><span id="9671" class="ls lt iq mr b gy mz mw l mx my">window.myDoughnut.update();<br/>  });</span></pre><p id="113b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从下图中，我们可以看到新不伦瑞克省确诊的COVID病例最多，而马尼托巴省也有类似比例的确诊病例。对于下面的图4，它显示了圆环图在半圆布局中的不同显示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/069266f3bed4ef8e6e8227a20e377025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVTP2A5v06WDj6MGu08Y-g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图表3:圆环图(全圆)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/2be2c168664d466af3ca2b8035130f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wvt0ts4b4EwhhLqXqp3jVg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">图表4:圆环图(半圆)</p></figure><h2 id="9895" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">条形图</h2><p id="ecaa" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，我们需要为条形图准备数据集。本图表主要关注1-6月艾伯塔省<strong class="ky ir"/>COVID的<strong class="ky ir">累计_病例、累计_痊愈、累计_死亡、</strong>和<strong class="ky ir">活跃_病例_变化</strong>。为了使这些值公平地分布在同一范围内，我处理了<strong class="ky ir"> cumulative_cases </strong>和<strong class="ky ir"> cumulative_recovered </strong>列，并在数组上记录日志。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="55ce" class="ls lt iq mr b gy mv mw l mx my">// get unique value of array<br/>  function onlyUnique(value, index, self) {<br/>  return self.indexOf(value) === index;<br/>    }<br/>  var date_unique = date.filter( onlyUnique );<br/>  var ab_case = []<br/>  var ab_recover = []<br/>  var ab_deaths = []<br/>  var ab_case_mean = []<br/>  var ab_case_log = []<br/>  var ab_recover_log = []</span><span id="2573" class="ls lt iq mr b gy mz mw l mx my">province.forEach((i_pro, index) =&gt; {<br/>    if (i_pro =="Alberta") {<br/>    ab_case.push(case1[index]);<br/>    ab_recover.push(recover[index]);<br/>    ab_deaths.push(deaths[index]);<br/>    ab_case_mean.push(case_mean[index]);<br/>  }<br/>  });<br/>// take log on ab_case, ab_recover<br/>ab_case.forEach((i_ab, index) =&gt; {<br/>      ab_recover_log.push(Math.log(ab_recover[index]));<br/>      ab_case_log.push(Math.log(i_ab));<br/>  });</span></pre><p id="8c82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Chat.js中，可以灵活地创建由两种或多种不同图表类型组合而成的混合图表。在下面的例子中，我创建了一个条形折线图，它具有独立的类型参数规范。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="4465" class="ls lt iq mr b gy mv mw l mx my">new Chart(document.getElementById("canvas"), {<br/>    type: 'bar',<br/>    data: {<br/>        datasets: [{<br/>            label: 'log on cumulative_cases in Alberta',<br/>            backgroundColor: window.chartColors.red,<br/>            data: ab_case_log,<br/>            borderColor: 'white',<br/>        borderWidth: 2<br/>        }, {<br/>            label: 'log on cumulative_recovered in Alberta',<br/>            backgroundColor: window.chartColors.green,<br/>            data: ab_recover_log,<br/>            borderColor: 'white',<br/>        borderWidth: 2<br/>        },{<br/>            label: 'cumulative_deaths in Alberta',<br/>            backgroundColor: window.chartColors.purple,<br/>            data: ab_deaths,<br/>            borderColor: 'white',<br/>        borderWidth: 2<br/>        },<br/>        {<br/>            label: 'Month average of active cases in Alberta',<br/>            data: ab_case_mean,<br/>            fill: false,<br/>            borderColor:window.chartColors.blue,<br/>            borderWidth: 2,<br/>            // Changes this dataset to become a line<br/>            type: 'line'<br/>        }],<br/>        labels: date_unique<br/>    },<br/>    options: {<br/>      title: {<br/>        display: true,<br/>        text: 'Positive Cases of COVID in provinces of Canada'<br/>      },<br/>      hover: {<br/>            mode: 'index',<br/>            intersect: true<br/>          },<br/>    }</span><span id="8f93" class="ls lt iq mr b gy mz mw l mx my">});</span></pre><p id="d276" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从下面的条形图中，我们可以看到四月份的平均活动案例急剧增加，而五月份的平均活动案例急剧减少。从5月到6月，尽管活跃病例的数量仍然为负，但有一条向上的曲线显示，感染COVID的人越来越少。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/69e046e9855a7e96c188460729f95eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gSpHVnM5OVw8xQcWq01VLA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">绘图4:条形折线图(半圆)</p></figure><h1 id="5c4d" class="na lt iq bd lu nb nc nd lx ne nf ng ma jw nh jx md jz ni ka mg kc nj kd mj nk bi translated">总之:</h1><ul class=""><li id="0630" class="nt nu iq ky b kz ml lc mm lf nv lj nw ln nx lr ny nz oa ob bi translated">Flask是一个强大的后端，可以很好地处理HTML和javascript文件。一旦用确切的文件夹指定了目录，应用程序将通过指定的路径呈现页面。</li><li id="31ef" class="nt nu iq ky b kz oc lc od lf oe lj of ln og lr ny nz oa ob bi translated">图表。JS是一个可视化库，支持许多图表，如条形图、折线图、面积图、圆环图等。最棒的是，您可以自定义布局，如悬停信息、刻度范围、x轴和y轴标签等。</li></ul><h1 id="7494" class="na lt iq bd lu nb nc nd lx ne nf ng ma jw nh jx md jz ni ka mg kc nj kd mj nk bi translated">参考:</h1><p id="f8d6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">图表。JS文档网站:<a class="ae kv" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank">https://www.chartjs.org/</a></p></div></div>    
</body>
</html>