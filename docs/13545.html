<html>
<head>
<title>Compare Amazon Textract with Tesseract OCR — OCR &amp; NLP Use Case</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较 Amazon Textract 和 tesserract OCR—OCR 和 NLP 用例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/compare-amazon-textract-with-tesseract-ocr-ocr-nlp-use-case-43ad7cd48748?source=collection_archive---------12-----------------------#2020-09-17">https://towardsdatascience.com/compare-amazon-textract-with-tesseract-ocr-ocr-nlp-use-case-43ad7cd48748?source=collection_archive---------12-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6860" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用于光学字符识别(OCR)和自然语言处理的两种已知引擎的比较</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bc318a9beb1dd3c02a095bfef1a0792d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtzhATqOP3YleD2h1rV17A.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/felix_w-6547745/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3089857" rel="noopener ugc nofollow" target="_blank">菲利克斯·沃尔夫</a>从<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3089857" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>拍摄</p></figure><p id="cbd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">OCR 到底是什么，为什么这么热门？人工智能(AI)使具有人类智能(us)的实体能够大规模处理数据——更快、更便宜。毫无疑问，很大一部分数据是以数字形式保存的，易于阅读和分析。然而，有很大一部分数据存储在物理文档中，既有打字的也有手写的。如何分析这类数据？这就是引人入胜的光学字符识别(OCR)技术的用武之地。使用 OCR，您可以将文档转换为适合编辑和搜索的文本格式的数据。这就是 OCR 能够做到的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/0489b62d775040f356f1adfc29ca99a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*LFBUeOb75RGVE3KeXRvvHQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1754932" rel="noopener ugc nofollow" target="_blank"> Gerd Altmann </a>从<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1754932" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄</p></figure><p id="6336" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将关注两个众所周知的 OCR 框架:</p><ol class=""><li id="eb1b" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">Tesseract OCR  —在 Apache 许可下发布的自由软件，版本 2.0——自 2006 年以来一直由谷歌赞助开发。</li><li id="fa09" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><strong class="lb iu"> Amazon Textract OCR — </strong>来自 Amazon 的完全托管服务，使用机器学习来自动提取文本和数据</li></ol><p id="0d5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将比较这两个框架的 OCR 能力。让我们从一个简单的图像开始，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/ad538bd46fecbe3c2ed434330c62c3f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*rulZJi4HxVjtrZ08nJ6FMw.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片—typewritten.jpg</p></figure><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="b267" class="mq mr it mm b gy ms mt l mu mv">$ git clone https://github.com/mkukreja1/blogs.git</span></pre><p id="4651" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下载并安装笔记本<strong class="lb iu"> blogs/ocr/OCR.ipynb </strong></p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="92a8" class="mq mr it mm b gy ms mt l mu mv">!pip install opencv-python<br/>!pip install pytesseract<br/>!pip install pyenchant</span><span id="8a26" class="mq mr it mm b gy mw mt l mu mv">import cv2<br/>import pytesseract<br/>import re<br/>from pytesseract import Output</span><span id="d4d3" class="mq mr it mm b gy mw mt l mu mv">img_typewritten = cv2.imread('typewritten.jpg')<br/>custom_config = r'--oem 3 --psm 6'<br/>txt_typewritten=pytesseract.image_to_string(img_typewritten, config=custom_config)<br/>print(txt_typewritten)</span></pre><p id="f661" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu">镶嵌 OCR 的 OCR 输出</strong>:</p><p id="5359" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最佳影片福特 V 法拉利<br/>爱尔兰人<br/>乔乔兔子<br/>小丑<br/>小女人<br/>婚姻故事<br/> 1917 <br/>从前……在好莱坞<br/>寄生虫</p><p id="7f4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu"> Amazon Textract OCR </strong>的 OCR 输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/a0d1458d16d8d4ae4c0440964e8b6057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xq_LCuuC349SUcLRReOtZQ.png"/></div></div></figure><p id="e4c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两个框架的表现完全相同。让我们看看手写文本是如何比较的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/0316b54dc0de8da70b3252c2c247e57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*eu_NVoeJ1FEwWNvpcZNC3Q.jpeg"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片—handwritten.jpg</p></figure><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="79be" class="mq mr it mm b gy ms mt l mu mv">img_handwritten = cv2.imread('handwritten.jpg')<br/>txt_handwritten=pytesseract.image_to_string(img_handwritten)<br/>print(txt_handwritten)</span></pre><p id="5325" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu">镶嵌 OCR 的 OCR 输出</strong>:</p><p id="f323" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi">&lt;&gt;</p><p id="ed41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">疮</p><p id="ff7a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">&amp;&amp;.一)<br/>哎哟！NS ané <br/> Lp 房地产集团</p><p id="425d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大使 ATH。远离|房地产<br/>洛美服务</p><p id="89e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我很高兴今天能和我见面，我也很高兴听到我的声音。再见<br/> AA aiv Go|干杯|</p><p id="eb8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">梅根·欧文斯，房产经纪人 402–689–4984<a class="ae ky" href="http://www.ForSalebyMegan" rel="noopener ugc nofollow" target="_blank">www。ForSalebyMegan </a>。</p><p id="1ef3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多媒体短信服务</p><p id="b938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">com</p><p id="6143" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu"> Amazon Textract OCR </strong>的 OCR 输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/823666110957be47aca8b88c494669cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8whZ9j8GxtTGiYz-Lj7p8w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="aea3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于手写文本，亚马逊 Textract OCR 的表现略好于<strong class="lb iu"> Tesseract OCR </strong>。</p><p id="d259" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们将尝试一个繁忙的图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/e8f09b91995c7888a05b9eac34c216d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FqzDx6PTvbIfrDilKpUYNQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片—invoice-sample.jpg</p></figure><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="41f4" class="mq mr it mm b gy ms mt l mu mv">img_invoice = cv2.imread('invoice-sample.jpg')<br/>custom_config = r'--oem 3 --psm 6'<br/>txt_invoice=pytesseract.image_to_string(img_invoice, config=custom_config)<br/>print(txt_invoice)</span></pre><p id="0089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu">镶嵌 OCR 的 OCR 输出</strong>:</p><p id="930b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://mrsinvoice.com" rel="noopener ugc nofollow" target="_blank">http://mrsinvoice.com</a>i7<br/>贵公司 LLC 地址 123，州，我的国家 P 111–222–333，F 111–222–334<br/>收单人:<br/>P:111–222–333，F:111–222–334 a . z<br/>cient @ eromplent<br/>联系电话 101–102–103<br/> f:122–222–334 应付金额:4170 美元<br/><a class="ae ky" href="mailto:office@example.net" rel="noopener ugc nofollow" target="_blank">office@example.net</a><br/>无产品/服务数量/费率/单位金额<br/>小时:价格<br/> 1 赞成 2 20 美元 40 美元<br/> 2 |方向盘 5 10 美元 50 美元<br/> 3 |机油 10 美元 15 美元 150 美元<br/> 4 |刹车片 24 美元 1000 美元 2400 美元<br/>小计 20 美元</p><p id="1868" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<strong class="lb iu"> Amazon Textract OCR </strong>的 OCR 输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/7a6163cf07421da275460200f1fb8241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PT8poS_RbvOgQivCieqcTQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="1b30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">亚马逊 Textract </strong>识别文档中的表格和表单。这是<em class="nc">整齐的</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/ef9064cf94efe4bdca2e75c62690ed93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cbA-3pK5si-WrJKsr6JJmg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><h1 id="7b17" class="ne mr it bd nf ng nh ni nj nk nl nm nn jz no ka np kc nq kd nr kf ns kg nt nu bi translated">高级功能—拼写检查</h1><p id="bef4" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">OCR 扫描的结果通常被输入到 NLP 模型中。因此，结果文本的高度准确性非常重要。我们可以用两种方式处理:</p><p id="75ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过拼写检查模块像<strong class="lb iu">附魔</strong>传递每一个作品</p><p id="791a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">选项 1 </strong> —如果拼写检查失败—从结果文本中屏蔽/删除该单词</p><p id="20f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">选项 2</strong>——如果拼写检查失败——使用拼写检查建议并编辑结果文本</p><p id="1f4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 中经常使用 Enchant 模块来根据字典检查单词的拼写。除了拼写检查之外，enchant 还可以给出纠正单词的建议。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="e2f7" class="mq mr it mm b gy ms mt l mu mv">img = cv2.imread('invoice-sample.jpg')<br/>text = pytesseract.image_to_data(img, output_type='data.frame')<br/>text = text[text.conf != -1]<br/>lines = text.groupby('block_num')['text'].apply(list)<br/>print(lines[25])</span></pre><p id="c606" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[<strong class="lb iu">‘‘感谢’</strong>，‘你’，‘为’，‘你的’，‘生意。]</p><p id="5fda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，第一个单词似乎有拼写问题。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="af96" class="mq mr it mm b gy ms mt l mu mv">import enchant<br/>dict_check = enchant.Dict("en_US")</span><span id="da12" class="mq mr it mm b gy mw mt l mu mv">for word in lines[25]:<br/>    if (dict_check.check(word)):<br/>        print(word+ ' - Dictionary Check Valid')<br/>    else:<br/>        print(word+ ' - Dictionary Check Valid Invalid')<br/>        print('Valid Suggestions')<br/>        print(dict_check.suggest(word))</span></pre><p id="f5d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">【感谢—字典检查有效无效<br/>有效建议<br/>【感谢】</strong> <br/>你—字典检查有效<br/>为—字典检查有效<br/>你—字典检查有效<br/>业务。—字典检查有效</p><p id="98f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，enchant 发现第一个单词无效，并能够提供替代建议。</p><h2 id="30c1" class="mq mr it bd nf oa ob dn nj oc od dp nn li oe of np lm og oh nr lq oi oj nt ok bi translated">为 NLP 使用正则表达式</h2><p id="f198" class="pw-post-body-paragraph kz la it lb b lc nv ju le lf nw jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">我在 IT 行业的早期(大约 25 年前)充满了起起落落。有一天，我会学到一些新的东西，感觉自己站在世界之巅。其他日子就没那么多了。我记得有一天，我的经理让我解决一个模式匹配问题。我必须在 Oracle 中对数据进行模式匹配。因为我以前从来没有这样做过，所以我请求他指点一下。我得到的答案是<em class="nc">“使用 REGEX 可以非常容易地做到这一点”。</em>我是一个很好的追随者，除了使用正则表达式模式匹配并不容易。我过了一会儿才意识到我的经理是在开玩笑。</p><p id="c9fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我仍然害怕使用正则表达式，但无法逃避它…..它仍然广泛应用于数据科学，尤其是 NLP。学习正则表达式需要时间。我经常使用像 https://regex101.com/<a class="ae ky" href="https://regex101.com/" rel="noopener ugc nofollow" target="_blank">这样的网站进行练习。</a></p><p id="2bc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果您想从文档中提取所有日期字段。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="cac5" class="mq mr it mm b gy ms mt l mu mv">d = pytesseract.image_to_data(img, output_type=Output.DICT)<br/>keys = list(d.keys())</span><span id="b66b" class="mq mr it mm b gy mw mt l mu mv">date_pattern = '^(0[1-9]|[12][0-9]|3[01])/(0[1-9]|1[012])/(19|20)\d\d$'</span><span id="9a8d" class="mq mr it mm b gy mw mt l mu mv">n_boxes = len(d['text'])<br/>for i in range(n_boxes):<br/>    if int(d['conf'][i]) &gt; 60:<br/>        if re.match(date_pattern, d['text'][i]):<br/>            (x, y, w, h) = (d['left'][i], d['top'][i], d['width'][i], d['height'][i])<br/>            img_date = cv2.rectangle(img, (x, y), (x + w, y + h), (0, 255, 0), 2)<br/>            print(d['text'][i])</span></pre><p id="0301" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">产出:2001 年 12 月 12 日</p><p id="297c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您甚至可以突出显示给定文档中的日期字段</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="7c31" class="mq mr it mm b gy ms mt l mu mv">cv2.imwrite('aimg_date.png', img_date)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/3aa691ca984d30f21e195cf335f1217c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TIuoq0dertFi5hJ9J35H9Q.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="c417" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章有助于启动您的 OCR 和 NLP 知识。像这样的主题是由<a class="ae ky" href="http://www.datafence.com" rel="noopener ugc nofollow" target="_blank"> Datafence 云学院</a>提供的 AWS 大数据分析课程的一部分。课程是周末自己在网上教的。</p></div></div>    
</body>
</html>