<html>
<head>
<title>Keras’ Accuracy Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Keras 的准确性指标</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/keras-accuracy-metrics-8572eb479ec7?source=collection_archive---------6-----------------------#2020-05-20">https://towardsdatascience.com/keras-accuracy-metrics-8572eb479ec7?source=collection_archive---------6-----------------------#2020-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ba41" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过在 Python 中运行简单的实验来理解它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ebb3d71000f9eafcabf8113086ef7865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8LcPUS-kS7QgZ2sy"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">乌古尔·佩克尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="fddf" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="b9a5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Keras 是 Python 的深度学习应用编程接口。它为评估分类器提供了五种不同的准确性指标。本文试图通过实验探索这些指标的组成和计算，从基础层面解释这些指标。</p><h2 id="a444" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">Keras 提供以下准确度指标</h2><ol class=""><li id="7aef" class="mz na it lt b lu lv lx ly ma nb me nc mi nd mm ne nf ng nh bi translated">准确(性)</li><li id="3d08" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">二元精度</li><li id="8e2d" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">分类准确性</li><li id="1673" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">TopK 分类准确性</li><li id="7746" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">稀疏 TopK 分类准确度</li></ol><h2 id="8cd1" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">对于每个指标，我们运行以下实验</h2><ol class=""><li id="004c" class="mz na it lt b lu lv lx ly ma nb me nc mi nd mm ne nf ng nh bi translated">从逻辑上定义和计算准确性——假设。</li><li id="3ffc" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">用 Keras 的方法计算精度。</li><li id="cd68" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">如果(1)和(2)同时存在，将逻辑定义归于 Keras 的方法。</li></ol></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="019e" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">准确(性)</h1><p id="894b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">精确度计算预测值(yPred)与实际值(yTrue)相匹配的百分比。</p><p id="7c05" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">对于一个记录，如果预测值等于实际值，则认为它是准确的。<br/> <br/>然后我们通过将准确预测的记录数除以记录总数来计算准确率。</p><h2 id="0c63" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">密码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="9998" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/76064cba35eedbcef033e57d598d3049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZcsqZ202UyMdA26plET_A.png"/></div></div></figure></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="f3b0" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">二元精度</h1><p id="20c0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">二进制精度计算二进制标签的预测值(yPred)与实际值(yTrue)相匹配的百分比。</p><p id="df85" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">由于标签是二进制的，yPred 由等于 1 的预测概率值组成。</p><p id="5fe8" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">郑重声明:</p><ol class=""><li id="89ca" class="mz na it lt b lu nz lx oa ma oh me oi mi oj mm ne nf ng nh bi translated">如果概率高于阈值，则分配 1，否则分配的值为 0。</li><li id="20a7" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">如果赋值等于实际值，则认为是准确的。</li></ol><p id="9a97" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">然后，我们通过将准确预测的记录数除以记录总数来计算二进制精度。</p><p id="b8f8" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">可以调整阈值(默认值= 0.5)来提高二进制精度。</p><h2 id="ff4e" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">密码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="d7bc" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/42b62309f94d7f6ee8442c2fd497c2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qAYEE3GQxtDPiHMbBQz0rA.png"/></div></div></figure><p id="26dc" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">问题 1。在上面的实验中，当我们将阈值改为(i) 0.4 和(ii) 0.49 时，二进制精度的值是多少？</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="fe1b" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">分类准确性</h1><p id="7af9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">分类精度计算一次性标注的预测值(yPred)与实际值(yTrue)相匹配的百分比。</p><p id="ab42" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">郑重声明:</p><ol class=""><li id="99f0" class="mz na it lt b lu nz lx oa ma oh me oi mi oj mm ne nf ng nh bi translated">我们使用 argmax()确定最大值出现的索引。</li><li id="27aa" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">如果 yPred 和 yTrue 相同，则认为是准确的。</li></ol><p id="0482" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">然后，我们通过将准确预测的记录数除以记录总数来计算分类准确性。</p><p id="9f61" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">由于分类准确性寻找最大值的索引，yPred 可以是 logit 或预测的概率。</p><h2 id="4723" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">密码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="352d" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/b2b49def277b9a55cf6793611a42780b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d31WBOXdVWOVhRpkjUMpIw.png"/></div></div></figure><p id="3fe0" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">问题 2。以下数据的分类准确度值是多少？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/31cad78f4ad3a0a2c03aae7c3c7c5059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5bqlTAdIS45BpI71EvjrQ.png"/></div></div></figure><p id="f14d" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated"><strong class="lt iu">提示。上面的 yPred 可能看起来不寻常，因为它有多个 1。但是，Keras 处理它们时不会抛出任何错误，因为当最大值出现多次时，argmax()会返回第一个匹配项的索引。</strong></p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="fdd8" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">TopK 分类准确性</h1><p id="4d4c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">TopK 分类准确性计算目标(非零 yTrue)在前 K 个预测(yPred)中的记录的百分比。</p><p id="881f" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">郑重声明:</p><ol class=""><li id="4e7d" class="mz na it lt b lu nz lx oa ma oh me oi mi oj mm ne nf ng nh bi translated">我们按照概率值的降序排列 yPred 预测。</li><li id="a92a" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">如果非零 yTrue 的索引中存在的 yPred 的秩小于或等于 K，则认为它是准确的。</li></ol><p id="7019" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">然后，我们通过将准确预测的记录数除以记录总数来计算 TopK 分类准确性。</p><h2 id="b7b1" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">密码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="2d5b" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/b298757396e7ed0075f52dd3b3093c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFgS7qxLmGoBVgcT_2v5gQ.png"/></div></div></figure><p id="9ef9" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated"><strong class="lt iu">问题 3。</strong>上述实验输出 100%作为 TopK 分类准确率的最小 K 是多少？</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="bed2" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">稀疏 TopK 分类准确度</h1><p id="eefa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">稀疏前 K 分类准确性计算整数目标(yTrue)在前 K 个预测(yPred)中的记录的百分比。</p><p id="9a4a" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">yTrue 由非零目标的索引(0 到 n-1)组成，而不是像 TopK 分类精度中那样的一次性目标。</p><p id="222f" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">郑重声明:</p><ol class=""><li id="77f3" class="mz na it lt b lu nz lx oa ma oh me oi mi oj mm ne nf ng nh bi translated">我们按照概率值的降序排列 yPred 预测。</li><li id="6bec" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">如果非零 yTrue 的索引中存在的 yPred 的秩小于或等于 K，则认为它是准确的。</li></ol><p id="2029" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">然后，我们通过将准确预测的记录数除以记录总数来计算稀疏 TopK 分类准确度。</p><h2 id="265a" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">密码</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="7a21" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">输出</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/8e5e1bf763d0ccb8aee65363a8937b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iC9GXAjhHa6HOsbRtuZt8Q.png"/></div></div></figure><p id="96a9" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated"><strong class="lt iu">问题 4。</strong>上述实验输出 100%作为稀疏 TopK 分类准确率的最小 K 是多少？</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="4168" class="kz la it bd lb lc nu le lf lg nv li lj jz nw ka ll kc nx kd ln kf ny kg lp lq bi translated">结论</h1><p id="b14e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">概括地说，Keras 提供了五种不同的度量来衡量分类器的预测准确性。根据数据的性质，特定的方法可能比其他方法更有帮助，也更相关。看完这篇文章，我希望你能明智地选择一个指标，并准确地解读它。</p><h2 id="8733" class="mn la it bd lb mo mp dn lf mq mr dp lj ma ms mt ll me mu mv ln mi mw mx lp my bi translated">答案</h2><ol class=""><li id="1342" class="mz na it lt b lu lv lx ly ma nb me nc mi nd mm ne nf ng nh bi translated">㈠100%，㈡80%</li><li id="6e28" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi">100%</li><li id="25fd" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">K = 4</li><li id="768d" class="mz na it lt b lu ni lx nj ma nk me nl mi nm mm ne nf ng nh bi translated">K = 2</li></ol><p id="2024" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">更多信息，请参考<a class="ae ky" href="https://keras.io/api/metrics/accuracy_metrics/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> Keras 的文档</strong> </a> <strong class="lt iu">。</strong></p><p id="8cde" class="pw-post-body-paragraph lr ls it lt b lu nz ju lw lx oa jx lz ma ob mc md me oc mg mh mi od mk ml mm im bi translated">最后，我想感谢我的朋友萨姆校对了这篇文章。</p></div></div>    
</body>
</html>