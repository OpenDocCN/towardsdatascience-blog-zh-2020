<html>
<head>
<title>Everything about plotting in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于用 Python 绘图的一切</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/everything-about-plotting-in-python-c12ccdc359bc?source=collection_archive---------28-----------------------#2020-07-17">https://towardsdatascience.com/everything-about-plotting-in-python-c12ccdc359bc?source=collection_archive---------28-----------------------#2020-07-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4641" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">📚实践中的 Python</h2><div class=""/><div class=""><h2 id="de4b" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">从 matplotlib 到 pandas.plot()</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/79e31c98282e9781fd2550189d0acbe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LRFYT4ddjJAjbU01skh_g.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@heyerlein?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> h heyerlein </a>在<a class="ae lh" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="751f" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr jd"><em class="ml">2020 年 11 月 4 日更新:</em> </strong> <em class="ml"> Seaborn 补充。</em></p></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="d725" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">atplotlib 是数据科学和许多科学绘图领域可视化的基石。然而，<code class="fe mm mn mo mp b"><em class="ml">plt</em></code> <em class="ml"> </em>函数看似简单，参数却让人应接不暇。根据底部显示的教程，我总结了一份 python 绘图格式:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="39da" class="mu mv it mp b gy mw mx l my mz">import matplotlib as mpl<br/>import matplotlib.pyplot as plt</span><span id="6b4e" class="mu mv it mp b gy na mx l my mz">plt.style.use('seaborn')<br/>mpl.rcParams['font.family'] = 'serif'<br/>%matplotlib inline<br/></span><span id="1c71" class="mu mv it mp b gy na mx l my mz">#1. create a figure,like canvas<br/>fig = plt.figure() </span><span id="0748" class="mu mv it mp b gy na mx l my mz">#2. add plots inside that figure you just created<br/>ax = fig.add_subplot(111) <br/>#3. set all the parameters for the plot inside that ax <br/>ax.set(xlim=[0.5, 4.5], ylim=[-2, 8], title='An Example Axes',<br/>       ylabel='Y-Axis', xlabel='X-Axis')</span><span id="04d8" class="mu mv it mp b gy na mx l my mz">#4. do the plotting<br/>ax.plot(x,y)<br/>plt.show()</span></pre><p id="f8df" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">您可以使用以下方法节省一行代码:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="18d3" class="mu mv it mp b gy mw mx l my mz">fig, axes = plt.subplots(ncols=2, figsize=plt.figaspect(1./2))</span></pre><p id="3829" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">使用<strong class="lr jd"> <em class="ml">轴</em> </strong>代替<strong class="lr jd"> <em class="ml"> </em> </strong> <code class="fe mm mn mo mp b"><strong class="lr jd"><em class="ml">plt</em></strong></code>的好处不仅是使整个过程更像“客观绘图”，每个<code class="fe mm mn mo mp b"><strong class="lr jd"><em class="ml">ax</em></strong></code>代表一个图形，而且使每个<code class="fe mm mn mo mp b">ax</code>/图形的迭代更容易，如:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="1cac" class="mu mv it mp b gy mw mx l my mz">fig, axes = plt.subplots(nrows=2, ncols=2)<br/>axes[0,0].set(title='Upper Left')<br/>axes[0,1].set(title='Upper Right')<br/>axes[1,0].set(title='Lower Left')<br/>axes[1,1].set(title='Lower Right')<br/><br/><em class="ml"># To iterate over all items in a multidimensional numpy array, use the `flat` attribute</em><br/><strong class="mp jd">for</strong> ax <strong class="mp jd">in</strong> axes.flat:<br/>    <em class="ml"># Remove all xticks and yticks...</em><br/>    ax.set(xticks=[], yticks=[])<br/>    <br/>plt.show()</span></pre><p id="4de0" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><code class="fe mm mn mo mp b">Figure</code>是这个层次结构中的顶级容器。它是整个窗口/页面，所有的东西都画在上面。您可以有多个独立的图形，并且<code class="fe mm mn mo mp b">Figure</code> s 可以包含多个<code class="fe mm mn mo mp b">Axes</code>。</p><p id="21f6" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">大多数绘图发生在<code class="fe mm mn mo mp b">Axes</code>上。轴实际上是我们绘制数据的区域，以及与之相关的任何记号/标签等。通常，我们将通过调用<code class="fe mm mn mo mp b">subplot</code>来设置一个轴(它将轴放置在一个规则的网格上)，所以在大多数情况下，<code class="fe mm mn mo mp b">Axes</code>和<code class="fe mm mn mo mp b">Subplot</code>是同义的。</p><p id="f6e3" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">每个<code class="fe mm mn mo mp b">Axes</code>都有一个<code class="fe mm mn mo mp b">XAxis</code>和一个<code class="fe mm mn mo mp b">YAxis</code>。这些包括<code class="fe mm mn mo mp b">ticks</code>、刻度位置、标签等。在本教程中，我们将主要通过其他机制来控制分笔成交点、分笔成交点标签和数据限制，因此我们不会过多地触及事物的单个<code class="fe mm mn mo mp b">Axis</code>部分。不过这里值得一提的是解释一下<code class="fe mm mn mo mp b">Axes</code>这个术语的来源。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nb"><img src="../Images/6fdd16f5c550c5daa2b4cc5779d4057b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N53cDexxgq9spM85.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://nbviewer.jupyter.org/github/matplotlib/AnatomyOfMatplotlib/tree/master" rel="noopener ugc nofollow" target="_blank">Matplotlib 图的剖析</a></p></figure><p id="ec58" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我最喜欢的 python 导师科里·斯查费的 Matplotlib 最佳视频教程之一。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="9155" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">熊猫情节</h1><p id="81a0" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated">至于熊猫的剧情功能，一切都打包在一个功能里:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="02c1" class="mu mv it mp b gy mw mx l my mz">pandas.DataFrame.plot()</span></pre><p id="96de" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">该函数中有几个非常有用的参数，例如:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="5b67" class="mu mv it mp b gy mw mx l my mz">pd.DataFrame.plot(<br/>                  ax = ax,<br/>                  secondary_y="some_col",<br/>                  subplots=True<br/>                  )</span></pre><p id="e959" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><code class="fe mm mn mo mp b"><strong class="lr jd"><em class="ml">ax</em></strong></code>允许您将绘图添加到当前绘图中；<code class="fe mm mn mo mp b"><strong class="lr jd"><em class="ml">secondary_y</em></strong></code>在你的图的右边给你一个额外的轴，并设置<code class="fe mm mn mo mp b"><strong class="lr jd"><em class="ml">subplots</em></strong></code>为真，就像<code class="fe mm mn mo mp b">plt.subplots()</code>一样，这将给你每一列一个单独的图。</p><h1 id="55e6" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">海生的</h1><p id="3eb3" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated">一旦你开始使用 Matplotlib 一段时间，很快你就会意识到 Matplotlib 有太多的参数和函数。我经常搞不清哪个参数属于哪个函数。另一次，我不记得参数的名称。</p><p id="a27c" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">Seaborn 是 Matplotlib 之上的一个很好的包装器。除了美学优化，seaborn 还提供了一个解决方案，帮助用户以更简单的方式探索数据。</p><p id="b1f1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">你可以直接使用 Seaborn</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="028c" class="mu mv it mp b gy mw mx l my mz">import seaborn as sns</span></pre><p id="b41d" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">默认设置对于日常数据可视化来说已经足够好了。如果你想对你的情节的风格和大小有一点额外的控制。最简单的方法就是一开始就设定好风格和语境。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="7661" class="mu mv it mp b gy mw mx l my mz">sns.set(style="ticks", context='talk')</span></pre><p id="79e1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">有五个预设的 seaborn 主题:<code class="fe mm mn mo mp b">darkgrid</code>、<code class="fe mm mn mo mp b">whitegrid</code>、<code class="fe mm mn mo mp b">dark</code>、<code class="fe mm mn mo mp b">white</code>和<code class="fe mm mn mo mp b">ticks</code>。它们分别适合不同的应用和个人偏好。默认主题是<code class="fe mm mn mo mp b">darkgrid</code>。四个预设上下文按照相对大小的顺序分别是<code class="fe mm mn mo mp b">paper</code>、<code class="fe mm mn mo mp b">notebook</code>、<code class="fe mm mn mo mp b">talk</code>和<code class="fe mm mn mo mp b">poster</code>。默认为<code class="fe mm mn mo mp b">notebook</code>样式。顺便说一下，所有的参数都可以通过一个<code class="fe mm mn mo mp b">set()</code>功能来设置。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="2229" class="mu mv it mp b gy mw mx l my mz">sns.set({"xtick.major.size": 8, "ytick.major.size": 8},    style="ticks")</span></pre><p id="3891" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">现在问题来了，我怎么知道那些参数是什么？</p><p id="6099" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">Seaborn 将所有复杂的参数归结为 2 组，只有 2 个函数需要记住。要控制风格，使用<code class="fe mm mn mo mp b"><a class="ae lh" href="https://seaborn.pydata.org/generated/seaborn.axes_style.html#seaborn.axes_style" rel="noopener ugc nofollow" target="_blank"><strong class="lr jd">axes_style()</strong></a></code>和<code class="fe mm mn mo mp b"><a class="ae lh" href="https://seaborn.pydata.org/generated/seaborn.set_style.html#seaborn.set_style" rel="noopener ugc nofollow" target="_blank"><strong class="lr jd">set_style()</strong></a></code>功能。要缩放图形，使用<code class="fe mm mn mo mp b"><a class="ae lh" href="https://seaborn.pydata.org/generated/seaborn.plotting_context.html#seaborn.plotting_context" rel="noopener ugc nofollow" target="_blank"><strong class="lr jd">plotting_context()</strong></a></code>和<code class="fe mm mn mo mp b"><a class="ae lh" href="https://seaborn.pydata.org/generated/seaborn.set_context.html#seaborn.set_context" rel="noopener ugc nofollow" target="_blank"><strong class="lr jd">set_context()</strong></a></code>功能。在这两种情况下，第一个函数返回一个参数字典，第二个函数设置 matplotlib 默认值。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="0a1c" class="mu mv it mp b gy mw mx l my mz">sns.axes_style()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/b5071caa15417e0959796b7b7fbef8f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*5t095jRYh05aODZ63vslxw.png"/></div></figure><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="4291" class="mu mv it mp b gy mw mx l my mz">sns.plotting_context()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/b7a9837e165b0250673678111a7c1263.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*9BH_Jq--sYyey0hctVxC2w.png"/></div></figure><p id="1f63" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">要设置任何参数，您只需简单地调用<code class="fe mm mn mo mp b">set()</code>即可。例如，您可以一次性设置所有内容。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="1e7e" class="mu mv it mp b gy mw mx l my mz">sns.set({'font.size': 60.0,<br/> 'axes.labelsize': 'medium',<br/> 'axes.titlesize': 'large',<br/> 'xtick.labelsize': 'medium',<br/> 'ytick.labelsize': 'medium',<br/> 'legend.fontsize': 'medium',<br/> 'axes.linewidth': 0.8,<br/> 'grid.linewidth': 0.8,<br/> 'lines.linewidth': 1.5,<br/> 'lines.markersize': 6.0,<br/> 'patch.linewidth': 1.0,<br/> 'xtick.major.width': 0.8,<br/> 'ytick.major.width': 0.8,<br/> 'xtick.minor.width': 0.6,<br/> 'ytick.minor.width': 0.6,<br/> 'xtick.major.size': 8.0,<br/> 'ytick.major.size': 8.0,<br/> 'xtick.minor.size': 2.0,<br/> 'ytick.minor.size': 2.0,<br/> 'legend.title_fontsize': None})</span></pre><p id="e3f0" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">基本上，大多数时候，你只需要改变预设的主题和背景。一旦完成数据探索，您可以使用<code class="fe mm mn mo mp b">sns.set()</code>微调任何参数以满足您的要求。</p><p id="cded" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这些就是你所需要了解的关于 Seaborn 的一切。我注意到一件事，它不在参数之内，是图形大小设置。简单的方法是在代码的开头声明一个图形画布，就像使用 matplotlib 一样。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="2e0c" class="mu mv it mp b gy mw mx l my mz">fig, ax = plt.subplots(figsize=(18,9))<br/>ax=sns.lineplot(data=data)<br/>ax.set(title='title', ylabel='ylabel')</span></pre><p id="ff5e" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">当然，强大的 set()函数可以接受所有订单:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="40b9" class="mu mv it mp b gy mw mx l my mz">sns.set(rc={'figure.figsize':(11,4)})<br/>#or like this<br/>sns.set({'figure.figsize':(20,8)})</span></pre><p id="b97b" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">请注意，如果你的数据是一个熊猫数据帧，Seaborn 将自动模仿你的数据帧结构，换句话说，你不需要担心标签和标题等。。</p><p id="4801" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">总之，你需要记住的只是 4 行代码</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="59b0" class="mu mv it mp b gy mw mx l my mz">import seaborn as sns<br/>sns.set(context='poster', style='ticks')<br/>sns.axes_style()<br/>sns.plotting_context()</span></pre><p id="5307" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我忘了说的一件事是颜色。默认调色板是</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="be5f" class="mu mv it mp b gy mw mx l my mz">sns.color_palette()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/ab0327877302c0b703cc03cc72f4b144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*rRJrYAxtf4BkPPeahWQcXA.png"/></div></figure><p id="0945" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">对于离散变量，<code class="fe mm mn mo mp b">‘Paired’</code>是一个很好的选项(记住大写 p)，</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="dcd8" class="mu mv it mp b gy mw mx l my mz">sns.color_palette('Paired')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi od"><img src="../Images/12e7f87218c022b98423731600a4a20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*spEJQE5DvDJbXv8mBf8NKA.png"/></div></figure><p id="4653" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">至于连续数据，<code class="fe mm mn mo mp b">‘rocket’</code>还不错。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="9b09" class="mu mv it mp b gy mw mx l my mz">sns.color_palette('rocket')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/e5c87aedce168c81af4de4b25194a5ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*gLHYa3b-GUsJTbxFGp9y5g.png"/></div></figure><h1 id="e79f" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">一会儿</h1><p id="7460" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated">警告:除非 ticklabels 已经被设置为一个字符串(通常是在<em class="ml">中的情况，例如</em>一个 boxplot)，否则这将不能用于任何比<code class="fe mm mn mo mp b">1.1.0</code>新的 matplotlib 版本。</p><p id="3fb1" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">通常，您可以按照以下方式操作刻度标签:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="7c47" class="mu mv it mp b gy mw mx l my mz">import matplotlib.pyplot as plt</span><span id="1563" class="mu mv it mp b gy na mx l my mz">fig, ax = plt.subplots()</span><span id="4fc8" class="mu mv it mp b gy na mx l my mz"># We need to draw the canvas, otherwise the labels won't be positioned and <br/># won't have values yet.<br/>fig.canvas.draw()</span><span id="d544" class="mu mv it mp b gy na mx l my mz">labels = [item.get_text() for item in ax.get_xticklabels()]<br/>labels[1] = 'Testing'</span><span id="1ae6" class="mu mv it mp b gy na mx l my mz">ax.set_xticklabels(labels)</span><span id="91b1" class="mu mv it mp b gy na mx l my mz">plt.show();</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/14b6ea4b5cb6eb495d6de0f2cf9d852d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4TNN7dh-QQABcsSs.png"/></div></div></figure><p id="6051" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">要理解为什么您需要经历这么多困难，您需要对 matplotlib 的结构有更多的了解。</p><p id="caf2" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">Matplotlib 有意避免对记号等进行“静态”定位，除非明确要求这样做。假设您想要与图进行交互，因此图的边界、刻度、刻度标签等将动态变化。</p><p id="fe0d" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">因此，不能只设置给定刻度标签的文本。默认情况下，每次绘图时，axis 的定位器和格式化程序都会重置它。</p><p id="ecfd" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">然而，如果定位器和格式化器被设置为静态的(分别为<code class="fe mm mn mo mp b">FixedLocator</code>和<code class="fe mm mn mo mp b">FixedFormatter</code>，那么刻度标签保持不变。</p><p id="580c" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">这就是<code class="fe mm mn mo mp b">set_*ticklabels</code>或<code class="fe mm mn mo mp b">ax.*axis.set_ticklabels</code>所做的。</p><p id="7e72" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">很多时候，你其实想做的只是注释某个位置。既然如此，那就去调查<code class="fe mm mn mo mp b">annotate</code>吧。</p><p id="c96b" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我将介绍在 Matplotlib 中设置刻度标签字体大小的不同方法。它包括，</p><ul class=""><li id="9d33" class="og oh it lr b ls lt lv lw ly oi mc oj mg ok mk ol om on oo bi translated"><code class="fe mm mn mo mp b">plt.xticks(fontsize= )</code></li><li id="d306" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated"><code class="fe mm mn mo mp b">ax.set_xticklabels(xlabels, fontsize= )</code></li><li id="8d2f" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated"><code class="fe mm mn mo mp b">plt.setp(ax.get_xticklabels(), fontsize=)</code></li><li id="7d14" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated"><code class="fe mm mn mo mp b">ax.tick_params(axis='x', labelsize= )</code></li></ul><p id="c739" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">下面的代码示例将使用相同的数据集。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/e685b7828b75ffb138742ae1e4872fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*qEkwwmAAU1kvAEkmynvTEw.png"/></div></figure><p id="d61f" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">创建上图的代码是，</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="d087" class="mu mv it mp b gy mw mx l my mz">from matplotlib import pyplot as plt<br/>xvalues = range(10)<br/>yvalues = xvalues</span><span id="8f97" class="mu mv it mp b gy na mx l my mz">fig,ax = plt.subplots()<br/>plt.plot(xvalues, yvalues)<br/>plt.grid(True)</span><span id="df22" class="mu mv it mp b gy na mx l my mz">plt.show();</span></pre><h2 id="71a7" class="mu mv it bd nf ov ow dn nj ox oy dp nn ly oz pa np mc pb pc nr mg pd pe nt iz bi translated">plt.xticks(fontsize=)设置 Matplotlib 刻度标签的字体大小</h2><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="aeec" class="mu mv it mp b gy mw mx l my mz">from matplotlib import pyplot as plt<br/>xvalues = range(10)<br/>yvalues = xvalues</span><span id="e1de" class="mu mv it mp b gy na mx l my mz">fig,ax = plt.subplots()<br/>plt.plot(xvalues, yvalues)<br/>plt.xticks(fontsize=16)<br/>plt.grid(True)</span><span id="a51c" class="mu mv it mp b gy na mx l my mz">plt.show();</span></pre><p id="b958" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><code class="fe mm mn mo mp b">plt.xticks</code>获取或设置 x 轴刻度位置和标签的属性。</p><p id="aaf7" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><code class="fe mm mn mo mp b"><a class="ae lh" href="https://matplotlib.org/3.1.1/api/text_api.html#matplotlib.text.Text.set_fontsize" rel="noopener ugc nofollow" target="_blank">fontsize</a></code> <a class="ae lh" href="https://matplotlib.org/3.1.1/api/text_api.html#matplotlib.text.Text.set_fontsize" rel="noopener ugc nofollow" target="_blank">或</a> <code class="fe mm mn mo mp b"><a class="ae lh" href="https://matplotlib.org/3.1.1/api/text_api.html#matplotlib.text.Text.set_fontsize" rel="noopener ugc nofollow" target="_blank">size</a></code>是<code class="fe mm mn mo mp b">Text</code>实例的属性，可以用来设置刻度标签的字体大小。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/4c092ac8b1dc789fa2bbb0d2f04d2d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*TdZu1Vq-WHbic5BXG0hY2w.png"/></div></figure><h2 id="c4a2" class="mu mv it bd nf ov ow dn nj ox oy dp nn ly oz pa np mc pb pc nr mg pd pe nt iz bi translated">ax.set_xticklabels(xlabels，Fontsize=)设置 Matplotlib 刻度标签的字体大小</h2><p id="9d81" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated"><code class="fe mm mn mo mp b">set_xticklabels</code>用字符串标签列表设置 x 刻度标签，用<code class="fe mm mn mo mp b">Text</code>属性作为关键字参数。在这里，<code class="fe mm mn mo mp b">fontsize</code>设置刻度标签的字体大小。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="d848" class="mu mv it mp b gy mw mx l my mz">from matplotlib import pyplot as plt<br/>import numpy as np</span><span id="0c79" class="mu mv it mp b gy na mx l my mz">xvalues = np.arange(10)<br/>yvalues = xvalues</span><span id="f4c3" class="mu mv it mp b gy na mx l my mz">fig,ax = plt.subplots()<br/>plt.plot(xvalues, yvalues)<br/>plt.xticks(xvalues)<br/>ax.set_xticklabels(xvalues, fontsize=16)<br/>plt.grid(True)</span><span id="dea7" class="mu mv it mp b gy na mx l my mz">plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/2efbf745c38c6c08ca25a474d52cedcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*5yYqkssS6Wkn7SZ4U2MuEA.png"/></div></figure><h2 id="bac4" class="mu mv it bd nf ov ow dn nj ox oy dp nn ly oz pa np mc pb pc nr mg pd pe nt iz bi translated">plt.setp(ax.get_xticklabels()，Fontsize=)设置 Matplotlib 刻度标签的字体大小</h2><p id="b840" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated"><code class="fe mm mn mo mp b">matplotlib.pyplot.setp</code>设置一个<a class="ae lh" href="https://matplotlib.org/3.1.1/api/artist_api.html" rel="noopener ugc nofollow" target="_blank">艺术家对象</a>的属性。<code class="fe mm mn mo mp b">plt.setp(ax.get_xticklabels(), fontsize=)</code>设置 xtick labels 对象的<code class="fe mm mn mo mp b">fontsize</code>属性。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="4111" class="mu mv it mp b gy mw mx l my mz">from matplotlib import pyplot as plt<br/>xvalues = np.arange(10)<br/>yvalues = xvalues</span><span id="f3ff" class="mu mv it mp b gy na mx l my mz">fig,ax = plt.subplots()<br/>plt.plot(xvalues, yvalues)<br/>plt.setp(ax.get_xticklabels(), fontsize=16)</span><span id="c7d3" class="mu mv it mp b gy na mx l my mz">plt.grid(True)</span><span id="c4f6" class="mu mv it mp b gy na mx l my mz">plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/4c092ac8b1dc789fa2bbb0d2f04d2d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*TdZu1Vq-WHbic5BXG0hY2w.png"/></div></figure><h2 id="1157" class="mu mv it bd nf ov ow dn nj ox oy dp nn ly oz pa np mc pb pc nr mg pd pe nt iz bi translated">ax.tick_params(axis='x '，Labelsize=)设置 Matplotlib 刻度标签的字体大小</h2><p id="bf82" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated"><code class="fe mm mn mo mp b">tick_params</code>设置记号、记号标签和网格线的参数。</p><p id="0075" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><code class="fe mm mn mo mp b">ax.tick_params(axis='x', labelsize= )</code>设置<code class="fe mm mn mo mp b">x</code>轴，也就是 X 轴的刻度标签的<code class="fe mm mn mo mp b">labelsize</code>属性。</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="b7bd" class="mu mv it mp b gy mw mx l my mz">from matplotlib import pyplot as plt<br/>xvalues = range(10)<br/>yvalues = xvalues</span><span id="f30e" class="mu mv it mp b gy na mx l my mz">fig,ax = plt.subplots()<br/>plt.plot(xvalues, yvalues)<br/>ax.tick_params(axis='x', labelsize=16)<br/>plt.grid(True)</span><span id="c250" class="mu mv it mp b gy na mx l my mz">plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/4c092ac8b1dc789fa2bbb0d2f04d2d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*TdZu1Vq-WHbic5BXG0hY2w.png"/></div></figure><h1 id="4501" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">颜色名称</h1><ul class=""><li id="5316" class="og oh it lr b ls nv lv nw ly pg mc ph mg pi mk ol om on oo bi translated">蓝色</li><li id="c8f6" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">g:绿色</li><li id="d5b2" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">红色</li><li id="d013" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">c:青色</li><li id="a1d9" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">男:洋红色</li><li id="0272" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">y:黄色</li><li id="dd60" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">凯西:黑色</li><li id="c47b" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">w:白色的</li></ul><p id="3c50" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">但是，如何给 pandas/matplotlib 条形图自定义颜色呢？</p><p id="a7df" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">我发现最简单的方法是使用<code class="fe mm mn mo mp b">.plot()</code>中的<code class="fe mm mn mo mp b">colormap</code>参数和一个预设的颜色渐变:</p><pre class="ks kt ku kv gt mq mp mr ms aw mt bi"><span id="4bf5" class="mu mv it mp b gy mw mx l my mz">df.plot(kind='bar', stacked=True, colormap='Paired')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pj"><img src="../Images/4843665b81551b71dcc680ad4435997b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CeCTnwZTql9DpYon.png"/></div></div></figure><p id="344e" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">您可以在此找到一个大型<a class="ae lh" href="http://scipy.github.io/old-wiki/pages/Cookbook/Matplotlib/Show_colormaps" rel="noopener ugc nofollow" target="_blank">预设色彩映射表列表。</a></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/40df8ddae00eabf0a3d3d1b7996d1e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/0*N5et7hboHalNjaLh.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="http://scipy.github.io/old-wiki/pages/Cookbook/Matplotlib/Show_colormaps" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><h1 id="8465" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">标记</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/5de90619b889f055cce2cb327f64b09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*e_QC8fetD0KOs_r6KzW1PQ.png"/></div></figure><h1 id="3a71" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">线型</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/cc94c944e9e8ba6f814918ec5441502b.png" data-original-src="https://miro.medium.com/v2/resize:fit:308/format:webp/1*ZbANr_IAqS6kVdhd5PR9Qw.png"/></div></figure><h1 id="c77f" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">绘图属性</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/03eda5e50a34b4a6c3a6bcf09370d4c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*UHiN7p7sdOqITtOAN5ouvg.png"/></div></figure><h1 id="00fb" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">孵出</h1><p id="2272" class="pw-post-body-paragraph lp lq it lr b ls nv kd lu lv nw kg lx ly nx ma mb mc ny me mf mg nz mi mj mk im bi translated">面片对象可以有为其定义的图案填充。</p><ul class=""><li id="900d" class="og oh it lr b ls lt lv lw ly oi mc oj mg ok mk ol om on oo bi translated">/ —对角线阴影线</li><li id="0eaa" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">\ —后对角线</li><li id="703b" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">| —垂直</li><li id="bc68" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">- —水平</li><li id="12bb" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">+ —交叉</li><li id="387e" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">x-交叉对角线</li><li id="1d01" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">o-小圆圈</li><li id="af85" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">o-大圆(大写字母“o”)</li><li id="1713" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">。—圆点</li><li id="ef60" class="og oh it lr b ls op lv oq ly or mc os mg ot mk ol om on oo bi translated">* —星星</li></ul><p id="ca88" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated">字母可以组合。</p><h1 id="f097" class="ne mv it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">参考</h1><ol class=""><li id="fb52" class="og oh it lr b ls nv lv nw ly pg mc ph mg pi mk po om on oo bi translated"><a class="ae lh" href="https://nbviewer.jupyter.org/github/matplotlib/AnatomyOfMatplotlib/tree/master" rel="noopener ugc nofollow" target="_blank">解剖 Matplotlib </a>最好的 Matplotlib 教程之一</li><li id="dedb" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" href="https://jakevdp.github.io/PythonDataScienceHandbook/04.06-customizing-legends.html" rel="noopener ugc nofollow" target="_blank">定制剧情图例</a>摘自杰克·范德普拉斯的<a class="ae lh" href="http://shop.oreilly.com/product/0636920034919.do" rel="noopener ugc nofollow" target="_blank"> <em class="ml"> Python 数据科学手册</em> </a> <em class="ml"/></li></ol></div><div class="ab cl li lj hx lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="im in io ip iq"><p id="ab3e" class="pw-post-body-paragraph lp lq it lr b ls lt kd lu lv lw kg lx ly lz ma mb mc md me mf mg mh mi mj mk im bi translated"><strong class="lr jd">请查看我最近发表的文章:</strong></p><h2 id="2dee" class="mu mv it bd nf ov ow dn nj ox oy dp nn ly oz pa np mc pb pc nr mg pd pe nt iz bi translated">📈Python For Finance 系列</h2><ol class=""><li id="b687" class="og oh it lr b ls nv lv nw ly pg mc ph mg pi mk po om on oo bi translated"><a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">识别异常值</a></li><li id="9376" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" href="https://medium.com/better-programming/identifying-outliers-part-two-4c00b2523362" rel="noopener">识别异常值—第二部分</a></li><li id="62cb" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">识别异常值—第三部分</a></li><li id="58d2" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-whispering-eebb77a422da">程式化的事实</a></li><li id="53ed" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" href="https://medium.com/@kegui/feature-engineering-feature-selection-8c1d57af18d2" rel="noopener">特征工程&amp;特征选择</a></li><li id="eae1" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-transformation-e7b3b4268151">数据转换</a></li><li id="2d00" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" href="https://medium.com/swlh/fractionally-differentiated-features-9c1947ed2b55" rel="noopener">细微差别特征</a></li><li id="6243" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/the-triple-barrier-method-251268419dcd">数据标签</a></li><li id="d6c4" class="og oh it lr b ls op lv oq ly or mc os mg ot mk po om on oo bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/meta-labeling-and-stacking-f17a7f9804ec">元标签和堆叠</a></li></ol></div></div>    
</body>
</html>