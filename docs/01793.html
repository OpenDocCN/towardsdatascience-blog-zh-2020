<html>
<head>
<title>Common Pipenv Errors and How to Solve Them: Why Won’t it Lock?!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见Pipenv错误及解决方法:为什么不能锁定？！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/common-errors-and-how-to-solve-them-why-wont-it-lock-8f5e57111f23?source=collection_archive---------3-----------------------#2020-02-19">https://towardsdatascience.com/common-errors-and-how-to-solve-them-why-wont-it-lock-8f5e57111f23?source=collection_archive---------3-----------------------#2020-02-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f25" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Pipenv无法锁定时该怎么办</h2></div><p id="47b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作者:<a class="ae le" href="https://www.linkedin.com/in/edkrueger/" rel="noopener ugc nofollow" target="_blank">爱德华·克鲁格</a>和<a class="ae le" href="https://www.linkedin.com/in/douglas-franklin-1a3a2aa3/" rel="noopener ugc nofollow" target="_blank">道格拉斯·富兰克林</a>。</p><p id="4d60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文是众多介绍Python包和使用Pipenv进行环境管理的文章之一。在这里，您将学习如何解决Pipenv安装和锁定问题。有关Pipenv或环境的更多信息，请查看这篇 <a class="ae le" rel="noopener" target="_blank" href="/virtual-environments-for-data-science-running-python-and-jupyter-with-pipenv-c6cb6c44a405"> <strong class="kk iu"> <em class="lf">中型文章</em> </strong> </a> <em class="lf">！</em></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/42bb8edba1323b2e8b242c24da4f9af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PyzjxMN2AQKTSSH_xyYfXg.jpeg"/></div></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">马科斯·迈尔在Unsplash上的照片</p></figure><h2 id="7875" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">Pipenv是什么？</h2><p id="cb34" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">Pipenv将软件包管理和虚拟环境控制结合到一个工具中，用于安装、删除、跟踪和记录您的依赖关系；以及创建、使用和管理您的虚拟环境。Pipenv本质上是将pip和virtualenv包装在一个产品中。</p><p id="839f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您使用Pipenv开始一个项目时，该工具会自动创建一个虚拟环境、一个Pipfile和一个Pipfile.lock。当您用<code class="fe mu mv mw mx b">pipenv install</code>安装一个包时，Pipfile会自动用新的依赖项更新。</p><h2 id="683e" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">锁定问题:Pipfile包含对不存在的包的引用</h2><p id="8544" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">当Pipfile试图安装不存在的软件包，即错别字时，它不会锁定。</p><p id="93c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:</p><pre class="lh li lj lk gt my mx mz na aw nb bi"><span id="9562" class="lw lx it mx b gy nc nd l ne nf">pipenv install panadas</span></pre><p id="cd29" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Pipenv查找您指定的包，不管它是否存在。当包不存在或由于其他原因找不到时，您会在终端中看到以下错误和更多错误。现在，我们将把重点放在这两个方面。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ef224e0203549c85bae831971bbcb94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*XDt_ATYaxvCqCj-2lSee9w.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">安装错别字</p></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="ab gu cl nh"><img src="../Images/7c0c3a8728ea4b49cd8703f7d1235cb5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*Uuj16fw7tCR_6gOV4gbXtQ.png"/></div><p class="ls lt gj gh gi lu lv bd b be z dk translated">Pipenv找不到Panadas的版本</p></figure><p id="a1fa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">锁定失败！请注意,“panadas”被添加到Pipfile的包中。这种打字错误将成为一个问题，因为现在我们的Pipfile包含一个错误，任何使用这个Pipfile的人都会遇到锁定和依赖错误。请注意，“安装成功”警报是不真实的；没有要安装的Panadas。所发生的只是将“panadas”添加到Pipfile中。Pipfile中的拼写错误是锁定失败的最常见原因。</p><p id="c495" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">只要Pipfile中存在这种输入错误，安装一个包，不管存在与否，都会导致锁定失败。您需要在文本编辑器中修复Pipfile。我用的是纳米。你可以使用任何你觉得舒服的编辑器；Sublime，VS代码，Atom等。只需将Panadas改为Pandas，然后<code class="fe mu mv mw mx b">pipenv install.</code></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ni"><img src="../Images/4e070231d260e7d35dbf9a9d65c36499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NgMcNdHHqW8yCNy0VOtCMQ.png"/></div></div></figure><p id="1b6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看锁定失败时控制台中出现的其他一些错误消息。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nj"><img src="../Images/63fbca538fdce16b505f09cdbdc21585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QSUbgAGdW97CW2RRrPrO4g.png"/></div></div></figure><p id="acce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意建议<code class="fe mu mv mw mx b">pipenv install --skip-lock</code>。这应该只在极端或因果编程环境中使用，因为它绕过了Pipfile。锁的主要用途；锁定软件包版本并创建安装环境依赖项的公式。</p><h2 id="bf2e" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">pip文件管理:指定版本</h2><p id="519b" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">锁定失败的第二个最常见的原因是我们试图安装一个预发布版本的包。您可以通过在安装中添加<code class="fe mu mv mw mx b">--pre</code>标志来解决预发布版本冲突。</p><pre class="lh li lj lk gt my mx mz na aw nb bi"><span id="4973" class="lw lx it mx b gy nc nd l ne nf">pipenv install --pre</span></pre><p id="27e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个命令之后，您的Pipfile有了一个新变量；<code class="fe mu mv mw mx b"> allow_prereleases = true</code>。请注意，这将允许在您的环境中安装任何预发行软件包。现在是固定特定包版本有用的时候了。固定版本是一个很好的习惯，可以防止将来出现依赖问题。</p><p id="94b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意上面“要求”部分下的Pipfile图像；你看<code class="fe mu mv mw mx b">python_version = 3.7</code>。Pipfile在这里指定了Python版本。</p><p id="9c6a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要使用特定的Python版本构建Pipfile或环境，请使用以下语法。</p><pre class="lh li lj lk gt my mx mz na aw nb bi"><span id="27fa" class="lw lx it mx b gy nc nd l ne nf">pipenv --python 3</span></pre><p id="c59a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">需要时还可以指定包版本。</p><pre class="lh li lj lk gt my mx mz na aw nb bi"><span id="2697" class="lw lx it mx b gy nc nd l ne nf">pipenv install django=1.11.10</span></pre><h2 id="c63d" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">结论</h2><p id="a520" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">通过Pipenv和Pipfile，您向其他人展示了一种安装项目依赖项以及测试和开发需求的标准化方法。任何拥有您的Pipfile副本的人都可以使用下面的命令重新创建您的环境。</p><pre class="lh li lj lk gt my mx mz na aw nb bi"><span id="0cb6" class="lw lx it mx b gy nc nd l ne nf">pipenv install</span></pre><p id="9da8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将创建一个由Pipfile指定的环境。确保Pipfile没有打字错误，并且在共享之前指定了正确的包和Python版本！</p><p id="271d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这不是您正在寻找的pipenv解决方案，请查看这篇中型文章以获得有关其他Pipenv错误的帮助！</p><div class="nk nl gp gr nm nn"><a rel="noopener follow" target="_blank" href="/common-pipenv-errors-3a6f8ce81562"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iu gy z fp ns fr fs nt fu fw is bi translated">常见Pipenv错误</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">Pipenv错误及其解决方案的集合。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">towardsdatascience.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob lq nn"/></div></div></a></div></div></div>    
</body>
</html>