<html>
<head>
<title>Data Analysis Of Your AppleWatch Workouts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AppleWatch锻炼的数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-analysis-of-your-applewatch-workouts-672fe0366e7c?source=collection_archive---------17-----------------------#2020-02-03">https://towardsdatascience.com/data-analysis-of-your-applewatch-workouts-672fe0366e7c?source=collection_archive---------17-----------------------#2020-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="96b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你是一个用Apple Watch跟踪锻炼的运动和数据极客吗？那么现在可能是时候了解更多关于你在过去几年中的表现发展了。读完这篇文章后，你会知道如何深入了解你的锻炼和运动模式。如果这还不够，深入数据分析可能是一个不错的第一个项目:你将学习如何从你的跟踪设备(在这种情况下是Apple watch)中提取数据，如何清理和转换数据集，最后用Google Data Studio可视化它。我们开始吧！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/c206c4524132faa7eb4835ab357a23be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XRMCwdHNFcHMl6G2JnnZRg.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">你的Apple Watch锻炼数据分析。</p></figure><p id="5ea6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章分为三部分。首先，你iPhone上的Apple Watch数据需要导出。其次，在编程语言Python的帮助下，读取、转换和清理接收到的XML文件。结果是一个完美的CSV文件，可以插入到谷歌数据工作室。如何做到这一点我们将在第三部分解释。</p><h2 id="83dc" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">我们使用的工具</h2><p id="5b66" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">正如已经提到的，我们正在使用Python和它惊人的开源库。首先，我们使用Jupyter Notebook，这是一个用于实时编码的开源应用程序，它允许我们讲述一个故事，并使代码可复制。要启动和运行python，推荐使用Anaconda。这里的<a class="ae md" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank">描述了如何设置和运行。对于数据可视化，您可以使用任何想要的工具。根据你的喜好，谷歌数据工作室的替代品是Tableau、Grafana或任何数据可视化工具。</a></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi me"><img src="../Images/46a2347671e24c4ed16ac75c964d407e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kn5wQuMWOaBVk0_i2modw.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">用于数据分析的工具</p></figure><h2 id="9249" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">1.从您的Apple设备导出数据</h2><p id="995c" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">首先，我们需要知道你的Apple Watch收集的所有数据在哪里可以找到。因此，从主屏幕打开健康应用程序。在右上角，您可以访问您的个人资料。滚动到底部，导出所有数据。不要担心，这可能需要一段时间。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mf"><img src="../Images/ba343570694f7ccafc0e21901244fb63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O6bqTrqbiZFwGx3mVIcHoA.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">从Apple导出您的健康记录。</p></figure><p id="5658" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您将得到一个XML文件。XML代表可扩展标记语言，这意味着您的数据以非预定义的结构和纯文本格式存储。因此，如果您想看一下文件的内容，可以用标准的文本编辑器打开它。XML在互联网上被广泛用于数据传输。下一步，我们用python获取这个文件并处理数据集。</p><h2 id="b528" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">2.使用Python进行数据转换和清理</h2><p id="a3c8" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在导出你所有锻炼的XML文件后，它现在就在你的笔记本电脑上。我们做的第一件事是将文件加载到Jupyter笔记本中(您应该已经安装了Python和Jupyter笔记本。如果没有，试试Anaconda，或者看看<a class="ae md" rel="noopener" target="_blank" href="/hands-on-setup-your-data-environment-with-docker-dca629607148">如何设置你的数据科学环境mit Docker。</a>)</p><p id="33de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了读取XML文件，加载了包xmltodict，并使用它来读取我们的导出。在这种情况下，我们一方面将手表的所有“记录”数据保存在“记录列表”中，另一方面将实际锻炼数据保存在“锻炼列表”中。虽然我们将只处理锻炼数据，但知道还有更多可用的数据仍然是有用的，您可以立即开始处理这些数据。</p><pre class="kq kr ks kt gt mg mh mi mj aw mk bi"><span id="3694" class="lf lg it mh b gy ml mm l mn mo">#Reading the file and converting it as a dict. </span><span id="ad08" class="lf lg it mh b gy mp mm l mn mo">import pandas as pd<br/>import xmltodict</span><span id="8d4d" class="lf lg it mh b gy mp mm l mn mo">input_path = '/Users/apple_health_export/export.xml'<br/>with open(input_path, 'r') as xml_file:<br/>    input_data = xmltodict.parse(xml_file.read())</span><span id="e3f5" class="lf lg it mh b gy mp mm l mn mo">#Records list for general health data &amp; imported as Pandas Data Frame<br/>records_list = input_data['HealthData']['Record']<br/>df_records = pd.DataFrame(records_list)</span><span id="8441" class="lf lg it mh b gy mp mm l mn mo">#Workout list for workout data<br/>workouts_list = input_data['HealthData']['Workout']<br/>df_workouts = pd.DataFrame(workouts_list)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mq"><img src="../Images/a6dd6870eb7b09c24b3d24df3647c02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkFpjaTEXjuKaaQvVVyo8g.png"/></div></div></figure><p id="68d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，一些列必须转换成不同的格式。一方面，持续时间、距离和消耗的能量应为数字，日期格式应用于日期</p><pre class="kq kr ks kt gt mg mh mi mj aw mk bi"><span id="54c1" class="lf lg it mh b gy ml mm l mn mo">#Convert selected columns to numeric so we can do calcuations<br/># convert just columns "..." and "..."<br/>df_workouts[["<a class="ae md" href="http://twitter.com/duration" rel="noopener ugc nofollow" target="_blank">@duration</a>", "<a class="ae md" href="http://twitter.com/totalDistance" rel="noopener ugc nofollow" target="_blank">@totalDistance</a>", "<a class="ae md" href="http://twitter.com/totalEnergyBurned" rel="noopener ugc nofollow" target="_blank">@totalEnergyBurned</a>"]] = df_workouts[["<a class="ae md" href="http://twitter.com/duration" rel="noopener ugc nofollow" target="_blank">@duration</a>", "<a class="ae md" href="http://twitter.com/totalDistance" rel="noopener ugc nofollow" target="_blank">@totalDistance</a>", "<a class="ae md" href="http://twitter.com/totalEnergyBurned" rel="noopener ugc nofollow" target="_blank">@totalEnergyBurned</a>"]].apply(pd.to_numeric)<br/>df_workouts.dtypes</span><span id="5014" class="lf lg it mh b gy mp mm l mn mo">#convert dates to actual datetime<br/>format = '%Y-%m-%d %H:%M:%S %z'</span><span id="b99e" class="lf lg it mh b gy mp mm l mn mo">df_workouts['<a class="ae md" href="http://twitter.com/creationDate" rel="noopener ugc nofollow" target="_blank">@creationDate</a>'] = pd.to_datetime(df_workouts['<a class="ae md" href="http://twitter.com/creationDate" rel="noopener ugc nofollow" target="_blank">@creationDate</a>'],format=format)</span><span id="dae7" class="lf lg it mh b gy mp mm l mn mo">df_workouts['<a class="ae md" href="http://twitter.com/startDate" rel="noopener ugc nofollow" target="_blank">@startDate</a>'] = pd.to_datetime(df_workouts['<a class="ae md" href="http://twitter.com/startDate" rel="noopener ugc nofollow" target="_blank">@startDate</a>'], format=format)</span><span id="fc14" class="lf lg it mh b gy mp mm l mn mo">df_workouts['<a class="ae md" href="http://twitter.com/endDate" rel="noopener ugc nofollow" target="_blank">@endDate</a>'] = pd.to_datetime(df_workouts['<a class="ae md" href="http://twitter.com/endDate" rel="noopener ugc nofollow" target="_blank">@endDate</a>'],format=format)</span><span id="8092" class="lf lg it mh b gy mp mm l mn mo">df_workouts.dtypes</span></pre><p id="c727" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于我们的锻炼分析，我们不需要所有的列。以游泳为例，我们在最后一栏中分解为100米组。如果您想了解详细信息，这可能会很有用，但出于我们的目的，我们只选择前12列，并且只保留锻炼活动类型游泳、跑步和骑自行车。</p><pre class="kq kr ks kt gt mg mh mi mj aw mk bi"><span id="9b6f" class="lf lg it mh b gy ml mm l mn mo">#drop unnecessary columns (all rows and column 1 to 12)<br/>df_workouts = df_workouts.iloc[:,0:12]<br/>df_workouts.head()</span><span id="8993" class="lf lg it mh b gy mp mm l mn mo">#Remove HKWorkoutActivityTypeWalking and HKWorkoutActivityTypeSnowSports<br/>df_workouts=df_workouts[df_workouts['<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>'] != 'HKWorkoutActivityTypeWalking']<br/>df_workouts=df_workouts[df_workouts['<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>'] != 'HKWorkoutActivityTypeSnowSports']</span></pre><p id="4789" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于健身程序的名称很长，原来的健身程序名称(如“HKWorkoutActivityTypeCycling ”)将替换为简单的“Cycling”。跑步和游泳也是如此。</p><pre class="kq kr ks kt gt mg mh mi mj aw mk bi"><span id="5421" class="lf lg it mh b gy ml mm l mn mo">#Rename Activity Types to Running, Cycling and Swimming<br/>df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"]= df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"].replace("HKWorkoutActivityTypeCycling", "Cycling")<br/>df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"]= df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"].replace("HKWorkoutActivityTypeRunning", "Running")<br/>df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"]= df_workouts["<a class="ae md" href="http://twitter.com/workoutActivityType" rel="noopener ugc nofollow" target="_blank">@workoutActivityType</a>"].replace("HKWorkoutActivityTypeSwimming", "Swimming")</span><span id="72e7" class="lf lg it mh b gy mp mm l mn mo">df_workouts.head(15)</span></pre><p id="8510" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后但同样重要的是，检查数据帧的头部。如果它看起来像你想要的样子，让我们做一个CSV导出，并准备好我们的最终分析数据集插入到Google Data Studio。</p><pre class="kq kr ks kt gt mg mh mi mj aw mk bi"><span id="168c" class="lf lg it mh b gy ml mm l mn mo">#save as csv (Don't forget to add '.csv' at the end of the path)finalADS = df_workouts.to_csv(r'/Users/finalADS.csv', header=True) </span></pre><h2 id="a2be" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">3.使用Google Data Studio创建仪表板</h2><p id="1a9e" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">最后但同样重要的是，我们正在可视化导出的CSV数据集，以探索我们的锻炼数据。Google Data Studio是首选工具，因为它对每个人都是免费的，并提供了一种快速可视化简单数据的方法。如果你已经有一个谷歌账户，访问https://datastudio.google.com/，你就可以开始了。Google Data Studio提供了一些示例报告，但是在这种情况下，我们从头开始，使用“空白报告”并添加我们的CSV作为数据源。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mr"><img src="../Images/6b968145cea415a5d65b1ea205ebe248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NReoGYg0wmy5AccRG1SD9w.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">在Data Studio中创建空白报表</p></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/0ac6b8a50abb0f6f88615d4b43d6c40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUk-cHRgWdO-oEnqmZKolw.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">Google Data Studio中的CSV上传</p></figure><p id="3993" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Google Data Studio将确认您的CSV成功上传。在我的例子中，第一列没有被命名为“ID ”,而是被追溯标记。之后，您可以开始创建您想要的图表。下面不会解释每一个图表，但是在Google Data Studio中如何创建一个图表的三个基本步骤。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/d3e2c739eca76f4713074401efdf7338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_6g1BBO1CeOvhjWa5NAEA.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">使用Google Data Studio创建图表</p></figure><ol class=""><li id="1c7e" class="mt mu it js b jt ju jx jy kb mv kf mw kj mx kn my mz na nb bi translated">通过单击顶部导航栏上的概述按钮添加新图表。</li><li id="8e11" class="mt mu it js b jt nc jx nd kb ne kf nf kj ng kn my mz na nb bi translated">选择所需的图表类型后，接下来选择要显示的数据。首先，选择我们的“finalADS.csv”作为数据源。其次，应该定义“日期范围维度”。在这种情况下，我们想比较这些年来我们的锻炼行为是如何发展的。第三，我们的“分解维度”选择为“@workoutActivityType”。这让我们可以在游泳、骑自行车和跑步中分解我们的训练</li><li id="b9d1" class="mt mu it js b jt nc jx nd kb ne kf nf kj ng kn my mz na nb bi translated">最后但同样重要的是，我们可以设计图表的样式。对于所有不同的图表，相同的颜色用于相同的锻炼活动类型。这样，我们可以轻松地将锻炼分配到相应的图表中。</li></ol><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nh"><img src="../Images/4f16f0830f27f01240b3878ecb0f0236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PL2FbqcK5gRD0eYiMz7H9Q.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">谷歌数据工作室——铁人三项仪表板I</p></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ni"><img src="../Images/11b267af79da171e4b20b258f2c14a72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6fvl9ixgAWn1Uv8-9bx2Q.png"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">谷歌数据工作室——铁人三项仪表板II</p></figure><h2 id="bd8d" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">结论</h2><p id="29fe" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">从运动的角度来看，从2018年到2019年，训练量几乎翻了一倍，另一方面，这些年来速度增加了，这是很惊人的。看起来运动的事情正朝着正确的方向发展，但你会发现这个项目更大的焦点是处理由Apple Watch设备创建的数据集。</p><p id="edf8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然提取数据集非常容易，但要适应XML文件需要一些时间。但是我保证一旦你掌握了窍门，你会爱上它的。从那时起，这就是一个非常典型的数据分析过程，其中包含清理和转换的部分。最后但并非最不重要的是，我只能向不太复杂的项目推荐使用Google Data Studio进行数据可视化。它是免费的，它有大部分的选择，并且很容易共享。对于这个范围内的其他工具，你肯定要付出代价。</p><p id="e96d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi">***************************************************************</p><p id="6e74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您有任何问题或需要一些数据分析方面的支持，请随时通过LinkedIn、Instagram或其他任何地方联系。</p><p id="356c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi">***************************************************************</p><p id="914d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能也喜欢阅读的文章:</p><p id="e67d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae md" rel="noopener" target="_blank" href="/hands-on-setup-your-data-environment-with-docker-dca629607148">使用Docker </a>设置您的数据环境</p><p id="3351" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae md" href="https://blog.markgrowth.com/eliminating-churn-is-growth-hacking-2-0-47a380194a06" rel="noopener ugc nofollow" target="_blank">消除流失是增长黑客2.0 </a></p><p id="5d27" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae md" rel="noopener" target="_blank" href="/misleading-with-data-statistics-c6d506bdb9cf">用数据误导&amp;统计</a></p></div></div>    
</body>
</html>