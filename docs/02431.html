<html>
<head>
<title>How to Find a Best Match with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python找到最佳匹配</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-match-two-people-with-python-7583b51ff3f9?source=collection_archive---------15-----------------------#2020-03-08">https://towardsdatascience.com/how-to-match-two-people-with-python-7583b51ff3f9?source=collection_archive---------15-----------------------#2020-03-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc51" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">给定个人偏好，如何最大化总偏好？</h2></div><h1 id="04d8" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">方案</h1><p id="f8c7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">恭喜你！你是由8名优秀员工组成的新团队领导。你想把他们分成4组，分别负责4个不同的项目。作为一名有经验的领导者，你知道员工在和他们喜欢的人一起工作时效率最高。所以你想出了一个员工评级系统。等级从1到10，10分意味着员工真的喜欢另一个员工，1分意味着雇主根本不想和另一个员工一起工作。进行调查后，您会得到以下结果:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/a4e32f3d1abc596c63fc333eb72da89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*avpWyMoSv1rS7VQGzedKag.png"/></div></figure><p id="f9df" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">因为雇员不能给自己评分，所以对角线元素为零。好消息是你知道每个雇主有多喜欢其他人。坏消息是你不知道如何搭配它们，这样每个人都会对他们的队友感到满意！作为一个热衷于数据的人，你知道一定有某种方法可以用数据来解决这个问题。你是对的。</p><p id="3a41" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">这个问题可以通过<strong class="lc iu">数学编程</strong>轻松解决。虽然机器学习在从数据中学习和做出预测方面很棒，但它在做出最佳决策方面有局限性。当你的问题涉及多种约束并允许多种可能的解决方案时，只有数学规划有能力找到最佳解决方案。</p><p id="9eb3" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">让我们来看看如何用数学编程来匹配你的员工！</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/1226dafc6950966e0ee16cfcc1ccc0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3mFrFJgbe12_1i6W"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">迪伦·吉利斯在<a class="ae ms" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h1 id="2efd" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">纸浆优化</h1><p id="5624" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果您不熟悉PuLP，它是一个python库，使您能够解决优化问题。你可以在这里找到关于这个图书馆的纪录片。我将使用这个方便的包来制定和解决我们的问题。</p><h2 id="dae0" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">安装软件包并定义问题</h2><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="86d2" class="mt kj it ng b gy nk nl l nm nn">!pip install pulp</span><span id="db9e" class="mt kj it ng b gy no nl l nm nn">from pulp import *</span><span id="bcf7" class="mt kj it ng b gy no nl l nm nn">prob = LpProblem("Matching Employees", LpMaximize)</span></pre><p id="b932" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">在<code class="fe np nq nr ng b">LpProblem</code>方法中，第一个参数是问题的名称，而第二个参数是你的目标(最大化或最小化)</p><h2 id="9016" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">因素</h2><p id="178f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">您需要匹配8名员工。NumPy数组是简介中显示的8名员工的偏好矩阵。</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h2 id="3bcb" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">变量</h2><p id="6110" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用<code class="fe np nq nr ng b">LpVariables</code>创建变量<code class="fe np nq nr ng b">y</code>，这是一个决策变量，用于确定是否将员工I与员工j进行匹配</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/6b9cef87a2f82397418435fb9e40b706.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*4Nivjxbiy-5h9DzPS_8NYQ.png"/></div></figure><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="b4d5" class="mt kj it ng b gy nk nl l nm nn">y = LpVariable.dicts("pair", [(i,j) for i in employees for j in employees] ,cat='Binary')</span></pre><h2 id="e734" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">目标</h2><p id="ec2e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最大化员工I和j之间的偏好得分</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/89c9f789da5480024784245dacb50183.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*PDWcfldm8A4iB7gKWYQf2A.png"/></div></figure><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="755c" class="mt kj it ng b gy nk nl l nm nn">prob += lpSum([(c[i][j] + c[j][i]) * y[(i,j)] for i in employees for j in employees])</span></pre><h2 id="e028" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">限制</h2><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nw"><img src="../Images/2af10b7435cf90444a0edcc8b5d52d72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpnznaJVlquZFBUuDMKtKw.png"/></div></div></figure><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="0163" class="mt kj it ng b gy nk nl l nm nn">for i in employees:</span><span id="dd57" class="mt kj it ng b gy no nl l nm nn">    prob += lpSum(y[(i,j)] for j in employees) &lt;= 1</span><span id="a456" class="mt kj it ng b gy no nl l nm nn">    prob += lpSum(y[(j,i)] for j in employees) &lt;= 1</span><span id="7867" class="mt kj it ng b gy no nl l nm nn">    prob += lpSum(y[(i,j)] + y[(j,i)] for j in employees) &lt;= 1</span><span id="c0be" class="mt kj it ng b gy no nl l nm nn">prob += lpSum(y[(i,j)] for i in employees for j in employees) == 4</span></pre><h2 id="0228" class="mt kj it bd kk mu mv dn ko mw mx dp ks lj my mz ku ln na nb kw lr nc nd ky ne bi translated">解决问题</h2><p id="e7b4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在定义了参数、变量、目标函数和约束条件之后，我们就可以用一行代码来解决问题了！</p><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="cbd5" class="mt kj it ng b gy nk nl l nm nn">&gt;&gt;&gt; prob.solve()<br/>1</span></pre><p id="8363" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">打印解决方案</p><pre class="lx ly lz ma gt nf ng nh ni aw nj bi"><span id="c3fd" class="mt kj it ng b gy nk nl l nm nn">print("Finish matching!\n")<br/>for i in employees:<br/>    for j in employees:<br/>        if y[(i,j)].varValue == 1:<br/>            print('{} and {} with preference score {} and {}. Total score: {}'.format(names[i],names[j],c[i,j], c[j,i], c[i,j] +c[j,i]))</span></pre><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/923924d8bdeb2d152702b5cfe76e8dd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*0lckgRW_6lf-NUhJ9wzuyQ.png"/></div></figure><h1 id="78ca" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">对结果的解释</h1><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/499a7c3532ebd6ebcf41c7763cf0fb98.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*p-4Vr5VFgJPuxENMxDGpLg.png"/></div></figure><p id="fe3f" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">在用这个结果匹配你的员工之前，我们先仔细看一下结果，看是否合理。请记住，目标是最大化一对中<strong class="lc iu">双方</strong>的偏好，而不仅仅是一个个体。</p><ul class=""><li id="457f" class="nz oa it lc b ld me lg mf lj ob ln oc lr od lv oe of og oh bi translated">凯特将弗朗西斯科作为她的首选，弗朗西斯科也将凯特作为她的首选。所以他们绝对是很好的一对。</li><li id="b991" class="nz oa it lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">阿尔弗雷多把本作为他的首选。即使本不像弗朗西斯科那样喜欢阿尔弗雷多，但本仍然喜欢阿尔弗雷多(偏好得分为7)。</li><li id="9d00" class="nz oa it lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">乔治似乎不喜欢克里斯，但克里斯非常喜欢乔治。所以也许克里斯会让乔治更喜欢他，因为他们一起工作？</li><li id="532f" class="nz oa it lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">奥利维亚和Thinh之间的配对似乎不是奥利维亚想要的。她一点也不喜欢这件事！但是Thinh真的很喜欢Olivia，所以也许他会热心帮助Olivia；因此，这对整个团队都有好处？</li></ul><h1 id="5cab" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">你可以成为一个伟大的媒人</h1><p id="0853" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这个结果仍然有一些局限性:一些人没有把他们的队友作为他们的首选，甚至讨厌他们的队友。但总的来说，该算法很好地将它们分成对，以便最大化整个组的匹配分数。更好的是，您不需要处理做出最佳决策的难题，因为算法已经为您完成了！</p><p id="2ea9" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">这篇文章的笔记本可以在我的<a class="ae ms" href="https://github.com/khuyentran1401/linear-programming-with-PuLP" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到。如果你想知道如何将你的员工或朋友分组，我建议你创建一个偏好分数的小调查，并尝试这个算法。也许最大化偏好会创造一个高效的工作环境？</p><p id="11c0" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">在<a class="ae ms" href="https://github.com/khuyentran1401/linear-programming-with-PuLP/blob/master/Cutting%20Stock%20Problem.ipynb" rel="noopener ugc nofollow" target="_blank">Github repo</a>中，您可以随意使用本文的代码。</p><p id="6259" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="6842" class="pw-post-body-paragraph la lb it lc b ld me ju lf lg mf jx li lj mg ll lm ln mh lp lq lr mi lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/maximize-your-productivity-with-python-6110004b45f7"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">使用Python最大化您的生产力</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">你创建了一个待办事项清单来提高效率，但最终却把时间浪费在了不重要的任务上。如果你能创造…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe mc oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/choose-stocks-to-invest-with-python-584892e3ad22"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">用Python选择要投资的股票</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">您计划在未来3年投资几只股票，每只股票的每一美元都有不同的预期回报…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe mc oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/linear-algebra-for-machine-learning-solve-a-system-of-linear-equations-3ec7e882e10f"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">用于机器学习的线性代数:求解线性方程组</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">代数是机器学习算法的底线机制</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pg l pb pc pd oz pe mc oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/dictionary-as-an-alternative-to-if-else-76fe57a1e4af"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">字典作为If-Else的替代</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">使用字典创建一个更清晰的If-Else函数代码</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="ph l pb pc pd oz pe mc oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener follow" target="_blank" href="/how-to-learn-data-science-when-life-does-not-give-you-a-break-a26a6ea328fd"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">当生活不给你喘息的机会，如何学习数据科学</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">我努力为数据科学贡献时间。但是发现新的策略使我能够提高我的学习速度和…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">towardsdatascience.com</p></div></div><div class="oz l"><div class="pi l pb pc pd oz pe mc oq"/></div></div></a></div></div></div>    
</body>
</html>