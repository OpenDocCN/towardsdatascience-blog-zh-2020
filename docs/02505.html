<html>
<head>
<title>Coronavirus Google Trends in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的冠状病毒谷歌趋势</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tracking-coronavirus-engagement-with-google-trends-in-python-5a4b08bc6977?source=collection_archive---------7-----------------------#2020-03-10">https://towardsdatascience.com/tracking-coronavirus-engagement-with-google-trends-in-python-5a4b08bc6977?source=collection_archive---------7-----------------------#2020-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="88d1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">谷歌搜索的州级分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6b3035a198e0bb7934564a8ff0bf67ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dp0DHCX62ysg_P6d20Ge8w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/w9KEokhajKw" rel="noopener ugc nofollow" target="_blank">疾控中心</a>在<a class="ae ky" href="https://unsplash.com/photos/w9KEokhajKw" rel="noopener ugc nofollow" target="_blank"> unsplash </a>拍摄的照片</p></figure><p id="80a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冠状病毒是一种在动物和人之间传播的病毒家族。症状包括发烧、咳嗽和轻微的呼吸道疾病。在严重的情况下，感染会导致肺炎和死亡。在写这篇文章的时候，美国疾病控制中心报告了645例病例和25例死亡。<a class="ae ky" href="https://www.sciencedirect.com/science/article/pii/S0160412018300771" rel="noopener ugc nofollow" target="_blank">在传染病研究领域</a>，社交媒体数据已被证明是预测感冒和流感季节开始和发展的有用指标。在本帖中，我们将使用谷歌趋势API来衡量各州对冠状病毒的参与度。</p><p id="2f60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用python Google trends API py trends来分析州级的“冠状病毒”谷歌搜索。</p><p id="06ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装pytrends，请打开命令行并键入:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2251" class="ma mb it lw b gy mc md l me mf">pip install pytrends</span></pre><p id="4ea6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，打开一个IDE(我使用Spyder)并导入pytrends:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6b66" class="ma mb it lw b gy mc md l me mf">from pytrends.request import TrendReq</span></pre><p id="690a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们指定主机语言、时区和有效负载。我们将主机语言指定为英语(“en-US”)，时区为中部标准时区，即“360”，我们可以将google属性过滤器(gprop)保留为空字符串。我们还设置category = 0，对应于与该关键字相关的所有类别。</p><p id="7807" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看纽约2020年2月至2020年3月的“冠状病毒”数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6389" class="ma mb it lw b gy mc md l me mf">pytrends = TrendReq(hl='en-US', tz=360)<br/>pytrends.build_payload(['Coronavirus'], cat=0, timeframe='2020-02-01 2020-03-10',  gprop='', geo='US-NY')</span></pre><p id="114a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将数据框定义为结果pytrends对象，并打印前五行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9197" class="ma mb it lw b gy mc md l me mf">df = pytrends.interest_over_time()<br/>print(df.head())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/42169d1b5e5828f0514d82c3f093cccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*mC4Kn5ROrkQ6N-GoeZBTCQ.png"/></div></figure><p id="e4f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用seaborn和matplotlib来绘制搜索“冠状病毒”的时间序列:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="764f" class="ma mb it lw b gy mc md l me mf">import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import pandas as pd</span><span id="718a" class="ma mb it lw b gy mh md l me mf">sns.set()<br/>df['timestamp'] = pd.to_datetime(df.index)<br/>sns.lineplot(df['timestamp'], df['Coronavirus'])</span><span id="163b" class="ma mb it lw b gy mh md l me mf">plt.title("Normalized Searches for Coronavirus in NY")<br/>plt.ylabel("Number of Searches")<br/>plt.xlabel("Date")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/0796ee1e2890681386ae83fcc068f6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgDDzqfx9qvWFNjTHksATg.png"/></div></div></figure><p id="7893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对马萨诸塞州的“冠状病毒”做同样的事情:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/ba95ede4638cc0115a6fb1bad8fd84f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9cWg3W0c9vlVVGdXMjCAQ.png"/></div></div></figure><p id="22e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以定义一个函数来获取任何状态的数据:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3972" class="ma mb it lw b gy mc md l me mf">def get_searches(key_word, state):<br/>    pytrends = TrendReq(hl='en-US', tz=360)<br/>    pytrends.build_payload([key_word], cat=0, timeframe='2020-02-01 2020-03-10',  gprop='',geo='US-{}'.format(state))    <br/>    df = pytrends.interest_over_time()<br/>            <br/>    <br/>    print(df.head())<br/>    <br/>    sns.set()<br/>    df['timestamp'] = pd.to_datetime(df.index)<br/>    sns.lineplot(df['timestamp'], df[key_word])<br/>    <br/>    plt.title("Normalized Searches for {} in {}".format(key_word, state))<br/>    plt.ylabel("Number of Searches")<br/>    plt.xlabel("Date")</span></pre><p id="e7de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们为NY、MA和CA调用这个函数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2c96" class="ma mb it lw b gy mc md l me mf">get_searches('Coronavirus', 'NY')<br/>get_searches('Coronavirus', 'MA')<br/>get_searches('Coronavirus', 'CA')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/31e745a7af49f83a331b8b451631368f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6rhpfD7aVqIwHYkuHU-hSg.png"/></div></div></figure><p id="422c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就说到这里，但请随意从其他州提取数据。你也可以随意输入关键字。也许你会想搜索“冠状病毒症状”或“冠状病毒死亡率”。</p><h1 id="da7c" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">结论</h1><p id="c8b8" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">总之，在这篇文章中，我们使用python库“pytrends”提取了与关键词“冠状病毒”相对应的州级谷歌趋势数据。社交媒体数据，如谷歌趋势数据，可能有助于衡量公共卫生相关话题的社会参与度，如冠状病毒。这可能有助于卫生机构，如疾病预防控制中心，定量评估需求，分配资源和沟通预防措施。我希望你觉得这篇文章有用/有趣。这篇文章的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/coronavirus_google_trends.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>