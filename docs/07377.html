<html>
<head>
<title>The Many Flavours Of SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL的多种风格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-many-flavours-of-sql-7b7da5d56c1e?source=collection_archive---------15-----------------------#2020-06-04">https://towardsdatascience.com/the-many-flavours-of-sql-7b7da5d56c1e?source=collection_archive---------15-----------------------#2020-06-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/e866e1a73c5335e49394afb581ab064c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*81oVjlRcufPVKjZ2kuWXqg.jpeg"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">照片由<a class="ae jh" href="https://unsplash.com/@ffstop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">福蒂斯·福托普洛斯</a>在<a class="ae jh" href="https://unsplash.com/s/photos/developer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h2 id="db6b" class="ji jj jk bd b dl jl jm jn jo jp jq dk jr translated" aria-label="kicker paragraph">数据工程</h2><div class=""/><div class=""><h2 id="20f2" class="pw-subtitle-paragraph kq jt jk bd b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dk translated">2022年的<a class="ae jh" href="https://linktr.ee/kovid" rel="noopener ugc nofollow" target="_blank"> SQL前景</a>会是怎样的，它的未来会是怎样的？</h2></div><p id="ffbd" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">本文最后一次更新于2022年12月9日。</p><p id="0273" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi mf translated">随着SQL成为传统数据库的事实上的查询语言，它可能已经在当前用于部署生产级应用程序的几乎所有技术栈中占有一席之地。即使当传统数据库(读关系数据库)不在使用时，SQL也不可避免地在系统中显示自己。卡珊德拉有类似SQL的CQL，Spark有SparkSQL，甚至JIRA有类似于基本SQL子句的JQL，比如<code class="fe mo mp mq mr b">WHERE</code>、<code class="fe mo mp mq mr b">IN</code>、<code class="fe mo mp mq mr b">BETWEEN</code>等。这些子句不仅仅属于SQL，它们也是几乎所有编程语言的一部分，用于循环和条件结构中。为了不离题太远，我想证明SQL不仅会在不远的将来出现，还会在遥远的将来出现。</p><p id="a1de" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我正在读保罗·格拉厄姆写的一篇关于未来语言的文章。他谈到了语言是如何在人类时间线上进化的，计算机语言是如何进化的，以及它们之间是如何相似的。这是一个很有趣的问题，不是吗？</p><blockquote class="ms"><p id="ba0a" class="mt mu jk bd mv mw mx my mz na nb md dk translated">他们会用什么样的编程语言来编写控制那些飞行汽车的软件？</p><p id="f04f" class="mt mu jk bd mv mw mx my mz na nb md dk translated">—保罗·格拉厄姆</p></blockquote><div class="nc nd ne nf ng nh"><a href="http://www.paulgraham.com/hundred.html" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">百年语言</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">2003年4月(本文摘自PyCon 2003的主题演讲。很难预测未来的生活会是什么样子</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">www.paulgraham.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv jb nh"/></div></div></a></div><p id="3a8b" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们从不使用“SQL是编程语言之一”这样的句子，就像我们使用“Python是编程语言之一”这样的句子一样<em class="me">。</em> SQL是查询语言。然后是SQL风格。这是标准。但认为它在未来不会改变将是一个疏忽。</p><p id="d5b7" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在这个领域工作了一段时间后，我知道许多传统和非传统的数据库都使用SQL。我想探索当前实践中不同风格的SQL。下面是SQL最常用、最流行的风格的汇编。</p><div class="it iu gq gs iv nh"><a rel="noopener follow" target="_blank" href="/well-always-have-sequel-55325432174"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">我们总会有续集</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">为什么SQL是数据工程、数据科学和软件开发的不二之选</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">towardsdatascience.com</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv jb nh"/></div></div></a></div><h1 id="7306" class="nx ny jk bd nz oa ob oc od oe of og oh kz oi la oj lc ok ld ol lf om lg on oo bi translated">关系数据库</h1><p id="cfba" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">大多数关系数据库支持写在<code class="fe mo mp mq mr b">ANSI-92</code> SQL文档中的基本SQL功能。最重要的是，每个数据库都有自己的一组附加特性，这些特性需要额外的SQL语句来利用这些特性。让我们来看看其中的一些。</p><h2 id="87d8" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak"> MySQL </strong></h2><p id="a1e2" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">很长一段时间，MySQL不支持分析和窗口功能。它只支持基本的聚合和<code class="fe mo mp mq mr b">GROUP BY</code>。然而，MySQL的替代者，如Percona Server和MariaDB，甚至在MySQL之前就已经发布了这些特性。</p><p id="48c4" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">您可以从SQL客户端或SQL终端执行的所有操作都应被视为SQL。例如，在MySQL中，您可以运行一个<code class="fe mo mp mq mr b">SHOW SLAVE STATUS</code>命令来检查从属服务器的当前状态，以及复制是否正在工作，它已经进行了多远，等等。这不是标准SQL的一部分，在其他数据库中也不受类似的支持。要了解SQL-92标准，可以通过<a class="ae jh" href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt" rel="noopener ugc nofollow" target="_blank">这篇500页的文档</a>。</p><p id="1c8f" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">MySQL的一些独特特性是</p><ul class=""><li id="8385" class="pf pg jk lk b ll lm lo lp lr ph lv pi lz pj md pk pl pm pn bi translated">支持本机复杂复制拓扑</li><li id="96ed" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">模拟分析函数和PL/SQL功能的会话和全局变量</li><li id="fe48" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated"><a class="ae jh" href="https://mariadb.com/kb/en/choosing-the-right-storage-engine/" rel="noopener ugc nofollow" target="_blank">存储引擎</a> —支持这么多存储引擎的数据库并不多</li></ul><div class="it iu gq gs iv nh"><a href="https://medium.com/crowdbotics/mysql-from-the-horses-mouth-582dbfca2abb" rel="noopener follow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">MySQL专家编写的阅读材料——书籍和博客</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">一个资源列表，由曾在MySQL、Oracle工作过的人提供，他们开发了广泛使用的MySQL分支，或者…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">medium.com</p></div></div><div class="nq l"><div class="pt l ns nt nu nq nv jb nh"/></div></div></a></div><h2 id="9132" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">一种数据库系统</h2><p id="2e7b" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">PostgreSQL通常被称为程序员的数据库，它通过对数组等高级抽象数据结构的原生支持，在开源领域成为MySQL的真正竞争对手。例如，要检查复制状态，您需要检查这个表— <code class="fe mo mp mq mr b">pg_stat_replication</code>。使PostgreSQL与众不同的一些特性是</p><ul class=""><li id="9250" class="pf pg jk lk b ll lm lo lp lr ph lv pi lz pj md pk pl pm pn bi translated">可扩展—您可以向数据库添加扩展以增强其功能。PostGIS是PostgreSQL的流行扩展，PostgreSQL是一个用于进行地理空间SQL查询的库。</li><li id="4cce" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">对抽象数据类型的广泛支持，尤其有助于匹配应用程序编程语言中的常见数据类型。</li><li id="4694" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">与MySQL不同，PostgreSQL确实扩展了自己，加入了一种过程语言PL/pgSQL，类似于Oracle的PL/SQL。</li></ul><p id="fa9e" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">这里有几个工作中的<a class="ae jh" href="https://postgis.net" rel="noopener ugc nofollow" target="_blank"> PostGIS </a>扩展的例子</p><figure class="pu pv pw px gu iw"><div class="bz fq l di"><div class="py pz l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">在Github Gist上托管</p></figure><h2 id="b706" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak">甲骨文</strong></h2><p id="07b5" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">关于Oracle数据库，我们能说些什么？它可能是最有弹性和最耐用的数据库，这就是为什么它继续在需要最强酸性和随之而来的保证的时间关键型业务中占据主导地位。</p><p id="815c" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">Oracle数据库的一些独特特性是</p><ul class=""><li id="aff7" class="pf pg jk lk b ll lm lo lp lr ph lv pi lz pj md pk pl pm pn bi translated">极强的耐酸性、高可靠性、高耐久性和弹性。</li><li id="cdc3" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">使用<code class="fe mo mp mq mr b">CONNECT BY ... LEVEL</code>极大地支持分层查询。</li><li id="6194" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">最长时间完全支持分析和窗口功能。</li></ul><p id="8bfa" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">MySQL和PostgreSQL这些年来变得越来越流行的一个原因是它们可以免费使用——它们是开源的。Oracle是闭源的定义。许可费用可能会扼杀一家小公司。每个企业都负担不起像Oracle和SQL Server这样的专有数据库。</p><h2 id="d904" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">SQL Server</h2><p id="c574" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">微软的终极数据库也拥有相似的特性和ACID支持级别等。，就像甲骨文一样。同样，就像甲骨文一样，对大多数公司来说成本太高。SQL Server的一些独特功能包括</p><ul class=""><li id="c4c4" class="pf pg jk lk b ll lm lo lp lr ph lv pi lz pj md pk pl pm pn bi translated">支持T-SQL，微软自己的过程</li><li id="5337" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">使用查询存储优化数据库和查询性能的高级查询统计</li><li id="e0bd" class="pf pg jk lk b ll po lo pp lr pq lv pr lz ps md pk pl pm pn bi translated">完全支持分析和窗口功能</li></ul><p id="2bf9" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">这是四种主要的关系数据库。我不算DB/2，SQLite等。，因为这些数据库没有足够的新用户。使用DB/2的地方可能是遗留系统。SQLite功能不丰富，不适合生产级应用程序。</p><h1 id="0a94" class="nx ny jk bd nz oa ob oc od oe of og oh kz oi la oj lc ok ld ol lf om lg on oo bi translated">非关系数据库和其他</h1><p id="3b90" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">从关系数据库开始，让我们看看一些被称为NoSQL数据库、NewSQL数据库或非关系数据仓库的数据库。</p><h2 id="5789" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">CQL</h2><p id="b28c" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">CQL是卡珊德拉对SQL的回答。它非常类似于SQL，但同样，就像您将从现在开始看到的所有其他数据库一样，这个数据库也有关于体系结构实现的附加特性，这反过来又需要SQL中的附加特性。例如，CQL有一种叫做<code class="fe mo mp mq mr b">ALLOW FILTERING</code>的东西<a class="ae jh" href="https://www.datastax.com/blog/2014/12/allow-filtering-explained" rel="noopener ugc nofollow" target="_blank">在这里做了很好的解释</a>:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="e4c3" class="qe ny jk mr b be qf qg l qh qi">SELECT * FROM ruling_stewards<br/>WHERE king = 'Brego'<br/>  AND reign_start &gt;= 2450<br/>  AND reign_start &lt; 2500 <br/>ALLOW FILTERING;</span></pre><p id="8432" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">请访问本页查看<a class="ae jh" href="https://docs.datastax.com/en/cql-oss/3.1/cql/cql_intro_c.html" rel="noopener ugc nofollow" target="_blank">的完整功能列表</a>。</p><h2 id="00ff" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">SparkSQL</h2><p id="d9e8" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">最初，Spark不支持SQL查询，查询必须用Scala或Python APIs为数据帧编写。SparkSQL提供了另一个抽象层，使受过SQL教育的员工能够轻松地充分利用他们的知识。下面是Databricks对SparkSQL的一个很好的介绍</p><div class="it iu gq gs iv nh"><a href="https://databricks-prod-cloudfront.cloud.databricks.com/public/4027ec902e239c93eaaa8714f173bcfc/3137082781873852/3704545280501166/1264763342038607/latest.html" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">大规模使用SQL-Spark SQL教程-数据块</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">Databricks上SparkSQL的简短指南</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">databricks-prod-cloudfront.cloud.databricks.com</p></div></div></div></a></div><p id="8e6a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">下面是一个示例查询的样子。您将看到越来越多的新关键字出现在每个其他数据库中，以获得特定于该数据库的功能。</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="52a4" class="qe ny jk mr b be qf qg l qh qi">sqlContext.sql("SELECT hashtag.text, count(*) A inst_count <br/>                  FROM twitter LATERAL VIEW OUTER <br/>                       explode(entities.hashtags) hashtagsTable AS hashtag <br/>                 GROUP BY hashtag.text <br/>                 ORDER BY inst_count DESC").show(4)</span></pre><p id="d0e3" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">下面是Rittman Mead关于如何使用SparkSQL的一个示例:</p><div class="it iu gq gs iv nh"><a href="https://www.rittmanmead.com/blog/2016/07/using-sparksql-pandas-import-data-big-data-discovery/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">使用SparkSQL和Pandas将数据导入Hive和大数据发现</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">大数据发现(BDD)是探索、转换和可视化存储在您的…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">www.rittmanmead.com</p></div></div><div class="nq l"><div class="qj l ns nt nu nq nv jb nh"/></div></div></a></div><p id="933d" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">尽管Spark即使不支持SQL也能提供很多东西，但自从它开始支持SparkSQL以来，Spark已经获得了更多的关注，因为它为数据分析师和数据科学家开辟了道路，否则他们将没有机会在Spark上工作(或者将有一个陡峭的学习曲线)。</p><h2 id="5fea" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">HiveQL</h2><p id="043d" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">随着Hadoop生态系统的出现，分析大量数据很快变得非常困难，因为每个人都不熟悉编程语言，并且必须编写许多行代码来分析数据。脸书有很多数据要分析，所以他们开发了这个类似SQL的查询引擎，运行在Hadoop的存储系统之上。Hive也意味着只查询结构化的分布式数据。以下是配置单元查询的样子:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="4828" class="qe ny jk mr b be qf qg l qh qi">CREATE TABLE sample_bucket (code STRING, <br/>                            description STRING, <br/>                            total_emp INT, <br/>                            salary INT) <br/>CLUSTERED BY (code) <br/>   SORTED BY (salary) <br/>     INTO 5 BUCKETS;</span></pre><p id="1f8c" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如果你感兴趣，这里有一份<a class="ae jh" href="https://gist.github.com/kzhangkzhang/258d18858889fa97194011a249b74c43" rel="noopener ugc nofollow" target="_blank">蜂巢备忘单</a>。</p><h2 id="6ff3" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">InfluxQL</h2><p id="71da" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">InfluxDB是一个时序数据库，用于需要实时查询的应用程序。这是一个传统数据库不完全支持的用例。一些新时代的流式管道解决方案为这一功能提供了一些限制。另一方面，InfluxDB专门处理如下连续查询:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="110f" class="qe ny jk mr b be qf qg l qh qi">CREATE CONTINUOUS QUERY "cq_basic_rp" ON "transportation"<br/>BEGIN<br/>  SELECT mean("passengers") <br/>    INTO "transportation"."three_weeks"."average_passengers" <br/>    FROM "bus_data" <br/>   GROUP BY time(1h)<br/>END</span></pre><p id="7554" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">该查询为您提供了一个小时内的平均乘客数量，而这一个小时的时间段每秒都在不断变化，因此我们得到的指标是一个小时内乘客的实时移动平均值。是不是很酷？</p><p id="8231" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">InfluxDB适合多种高容量、实时、关键的数据收集应用，如物联网、股票市场运动数据、天文数据等。这是来自InfluxDB的David Simmons的演讲，他讨论了InfluxDB的物联网用例。</p><p id="7da8" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在这个演讲中，David说InfluxDB中的插入比使用相同硬件的MongoDB快50多倍。我认为这不准确。这里有一篇比较这两种技术的更好的文章</p><div class="it iu gq gs iv nh"><a href="https://www.influxdata.com/blog/influxdb-is-27x-faster-vs-mongodb-for-time-series-workloads/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">MongoDB与InfluxDB | InfluxData时序工作负载</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">阅读MongoDB和InfluxDB之间比较的基准测试结果的更新版本，这两者不匹配…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">www.influxdata.com</p></div></div><div class="nq l"><div class="qk l ns nt nu nq nv jb nh"/></div></div></a></div><p id="f229" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">与MongoDB相比，InfluxDB在相同的硬件上快了2倍多。试试看！</p><figure class="pu pv pw px gu iw"><div class="bz fq l di"><div class="ql pz l"/></div></figure><h2 id="eacb" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak">弹性搜索SQL </strong></h2><p id="5617" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">尽管大多数关系数据库现在都支持全文搜索，但关系数据库并不意味着广泛的全文搜索，因为管理存储、内存和索引的成本会很高。Elasticsearch作为一个专用的全文搜索引擎来拯救我们。</p><div class="it iu gq gs iv nh"><a href="https://www.elastic.co/what-is/elasticsearch-sql" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">Elasticsearch SQL</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">Elasticsearch拥有您的数据所需的速度、规模和灵活性——而且它使用SQL。使用传统数据库…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">www.elastic.co</p></div></div><div class="nq l"><div class="qm l ns nt nu nq nv jb nh"/></div></div></a></div><p id="7d8b" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">下面是一个POST调用的例子，带有对Elasticsearch的查询负载。</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="7901" class="qe ny jk mr b be qf qg l qh qi">POST _xpack/sql?format=txt {   "query":"SELECT OriginCityName, DestCityName FROM flights WHERE FlightTimeHour &gt; 5 AND OriginCountry='US' ORDER BY FlightTimeHour DESC LIMIT 10" }</span></pre><p id="fd79" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">其他全文搜索引擎如<a class="ae jh" href="https://lucene.apache.org/solr/guide/6_6/parallel-sql-interface.html" rel="noopener ugc nofollow" target="_blank"> Solr也支持SQL语法</a>。</p><h2 id="b736" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak">密码</strong></h2><p id="09ab" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">neo4j是一个重要的图形数据库，它也非常支持类似SQL的查询。你自己看吧。以下是常规ANSI SQL中的一个示例:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="418d" class="qe ny jk mr b be qf qg l qh qi">SELECT p.ProductName, <br/>       sum(od.UnitPrice * od.Quantity) AS Volume<br/>  FROM customers AS c<br/>  LEFT OUTER JOIN orders AS o ON (c.CustomerID = o.CustomerID)<br/>  LEFT OUTER JOIN order_details AS od ON (o.OrderID = od.OrderID)<br/>  LEFT OUTER JOIN products AS p ON (od.ProductID = p.ProductID)<br/> WHERE c.CompanyName = 'Drachenblut Delikatessen'<br/> GROUP BY p.ProductName<br/> ORDER BY Volume DESC;</span></pre><p id="5144" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">下面是它在Cypher中的样子:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="3d47" class="qe ny jk mr b be qf qg l qh qi">MATCH (c:Customer {companyName:"Drachenblut Delikatessen"})<br/>OPTIONAL MATCH (p:Product)&lt;-[pu:PRODUCT]-(:Order)&lt;-[:PURCHASED]-(c)<br/>RETURN p.productName, toInt(sum(pu.unitPrice * pu.quantity)) AS volume<br/>ORDER BY volume DESC;</span></pre><p id="1a08" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">您可以使用包含简单到复杂转换示例的指南来学习如何将常规SQL转换为Cypher。</p><div class="it iu gq gs iv nh"><a href="https://neo4j.com/developer/guide-sql-to-cypher/" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">关系数据库开发人员:SQL到Cypher指南</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">本指南教任何熟悉SQL的人如何编写等价的、有效的Cypher语句。我们将使用…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">neo4j.com</p></div></div><div class="nq l"><div class="qn l ns nt nu nq nv jb nh"/></div></div></a></div><p id="a835" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">图形数据库在过去几年中有所发展，其中一个主要的广泛应用是推荐系统。随着越来越多的基于社交媒体的互动，图形数据库预计会增加。</p><h2 id="d903" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak"> DynamoDB </strong></h2><p id="7785" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">亚马逊的键值和文档数据库产品目前主要与MongoDB竞争。虽然DynamoDB没有原生SQL支持，但一个开源项目提供了一个类似SQL的外部DSL，用于在Amazon DynamoDB中查询和扫描数据。你可以在这里查看项目<a class="ae jh" href="https://github.com/fsprojects/DynamoDb.SQL" rel="noopener ugc nofollow" target="_blank">。根据我的经验，我在DynamoDB上做了一些笔记，你可以在这里查看</a></p><div class="it iu gq gs iv nh"><a href="https://medium.com/@KovidRathee/notes-on-dynamodb-cd1eed0cc19a" rel="noopener follow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">关于DynamoDB的注释</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">亚马逊NoSQL数据库简介</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">medium.com</p></div></div><div class="nq l"><div class="qo l ns nt nu nq nv jb nh"/></div></div></a></div><p id="f2f0" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">StackOverflow最近发布了其2020年开发者调查。了解世界各地的人们在研究什么技术总是很有趣。因为DynamoDB是闭源和专有的，所以没有得到那么多关注。开源数据库占据了数据库世界中最大的空间。</p><figure class="pu pv pw px gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj qp"><img src="../Images/8e6012ea6eac0c4c3c55c1fc668307ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHMoh_B4JkiF8TeCX_Va9g.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">最流行的数据库。StackOverflow开发者调查2020。</p></figure><div class="it iu gq gs iv nh"><a href="https://insights.stackoverflow.com/survey/2020#technology-most-loved-dreaded-and-wanted-databases-wanted4" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">堆栈溢出开发者调查2020</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">每个月大约有5000万人访问Stack Overflow来学习、分享和建立他们的职业生涯。行业估计…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">insights.stackoverflow.com</p></div></div><div class="nq l"><div class="qq l ns nt nu nq nv jb nh"/></div></div></a></div><h2 id="a695" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak">钻</strong></h2><p id="c55c" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">这是一个开源的分布式查询引擎，就像脸书的Presto(T2)一样，用来分析大规模数据(结构化和半结构化)。Drill支持大量存储文件格式和外部系统。Drill的灵感来自于<a class="ae jh" href="https://research.google/pubs/pub36632/" rel="noopener ugc nofollow" target="_blank">Dremel——谷歌的闭源大规模分布式查询引擎</a>。</p><p id="f130" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在支持常规SQL之上，Drill还支持类似PostgreSQL 的<a class="ae jh" href="https://www.postgresql.org/docs/9.0/extend-how.html" rel="noopener ugc nofollow" target="_blank">语言扩展性。您可以使用jar文件创建用户定义的函数:</a></p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="0466" class="qe ny jk mr b be qf qg l qh qi">CREATE FUNCTION USING JAR ‘&lt;jar_name&gt;.jar’;<br/>DROP FUNCTION USING JAR ‘&lt;jar_name&gt;.jar’;</span></pre><p id="97c7" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">在官方文档中可以找到更多关于SQL支持的内容</p><div class="it iu gq gs iv nh"><a href="https://drill.apache.org" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">阿帕奇演习</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">在没有开销(数据加载、模式创建、维护、转换等)的情况下获得更快的洞察力。)分析一下…</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">drill.apache.org</p></div></div><div class="nq l"><div class="qr l ns nt nu nq nv jb nh"/></div></div></a></div><h2 id="8070" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak"> SAP HANA </strong></h2><p id="e547" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">它是第一个专有的内存列数据库之一，另外还支持基于文档和基于图形的数据模型。HANA是一个符合ACID的数据库。它也是为数不多的对空间、层次和全文搜索查询提供广泛本机支持的数据库之一。下面是一个带有分层函数的查询示例:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="f7ef" class="qe ny jk mr b be qf qg l qh qi">SELECT<br/>    hierarchy_rank AS rank,<br/>    hierarchy_level AS level,<br/>    node_id,<br/>    amount AS amount_int,<br/>    avg_amount_int,<br/>    sum_amount_dec,<br/>    num_nodes,<br/>    num_facts<br/>FROM<br/>    HIERARCHY_DESCENDANTS_AGGREGATE(<br/>        SOURCE h_demo<br/>        JOIN h_demo_facts ON node_id = node<br/>        MEASURES (<br/>            AVG(h_demo.amount) AS avg_amount_int,<br/>            SUM(h_demo_facts.amount_dec_fact) AS sum_amount_dec,<br/>            COUNT(DISTINCT h_demo.hierarchy_rank) AS num_nodes,<br/>            COUNT(h_demo_facts.amount_dec_fact) AS num_facts<br/>        ) WHERE hierarchy_level &lt;= 2<br/>        WITH SUBTOTAL '(subtotal)'<br/>        WITH BALANCE '(remainder)'<br/>        WITH NOT MATCHED '(unassigned)'<br/>        WITH TOTAL '(total)'<br/>    )<br/>ORDER BY<br/>    rank NULLS LAST;</span></pre><p id="1bed" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">该查询将层次结构连接到事实表，并从层次结构本身和事实表中计算各种聚合度量。结果集包含级别小于或等于2的所有节点，以及附加的小计、余额和总计结果行。</p><h2 id="7fba" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak"> Teradata </strong></h2><p id="e0d3" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">它是数据仓库业务的首批参与者之一，Teradata已经活跃了40多年。Teradata的运行方式很大程度上类似于传统的关系数据库，但它是用于数据仓库的。和Redshift一样，Teradata也是一个MPP系统，号称可以线性扩展。下面是他们的文档中一个典型的Teradata查询:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="fbce" class="qe ny jk mr b be qf qg l qh qi">CREATE SET TABLE employeePhoneInfo(<br/>       emp_id INTEGER,<br/>       emp_name VARCHAR(30),<br/>       emp_phone emp_phone_array);<br/>INSERT INTO employeePhoneInfo<br/>SELECT emp_id, emp_name, <br/>       ARRAY_AGG(emp_phone, NEW emp_phone_array())<br/>  FROM employee <br/> GROUP BY emp_id,emp_name           <br/> WHERE emp_id &lt; 100;<br/>   <br/>SELECT * FROM employeePhoneInfo;</span></pre><h2 id="06cb" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated"><strong class="ak">雪花</strong></h2><p id="eb26" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">雪花是最值得信赖的云数据仓库平台之一。主要与Amazon Redshift和Azure SQL DW竞争，雪花设法将存储和计算分开，这是它的优势所在。由于数据分析负载千差万别，分离存储和计算似乎是正确的选择。</p><p id="3cb2" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">这里有一个雪花中的SQL查询的例子。请注意，除了关键字<code class="fe mo mp mq mr b">QUALIFY</code>之外的所有内容都与您在任何其他完全支持SQL的关系数据库中找到的内容完全相同:</p><pre class="pu pv pw px gu qa mr qb bn qc qd bi"><span id="953a" class="qe ny jk mr b be qf qg l qh qi">SELECT c2, <br/>       SUM(c3) OVER (PARTITION BY c2) as r<br/>  FROM t1<br/> WHERE c3 &lt; 4<br/> GROUP BY c2, c3<br/>HAVING SUM(c1) &gt; 3<br/>QUALIFY r IN (SELECT MIN(c1)<br/>                FROM test<br/>               GROUP BY c2<br/>              HAVING MIN(c1) &gt; 3<br/>             );</span></pre><p id="0087" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><a class="ae jh" href="https://docs.snowflake.com/en/sql-reference/constructs/qualify.html" rel="noopener ugc nofollow" target="_blank">文档</a>说:</p><blockquote class="qs qt qu"><p id="3daa" class="li lj me lk b ll lm ku ln lo lp kx lq qv ls lt lu qw lw lx ly qx ma mb mc md in bi translated"><em class="jk">在</em> <code class="fe mo mp mq mr b"><em class="jk">SELECT</em></code> <em class="jk">语句中，</em> <code class="fe mo mp mq mr b"><em class="jk">QUALIFY</em></code> <em class="jk">子句过滤窗口函数的结果。</em> <code class="fe mo mp mq mr b"><em class="jk">QUALIFY</em></code> <em class="jk">对窗口函数的作用与</em> <code class="fe mo mp mq mr b"><em class="jk">HAVING</em></code> <em class="jk">对集合函数和</em> <code class="fe mo mp mq mr b"><em class="jk">GROUP BY</em></code> <em class="jk">子句的作用相同。</em></p></blockquote><figure class="pu pv pw px gu iw"><div class="bz fq l di"><div class="ql pz l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">当前主要数据仓库参与者之间的一个很好的比较。</p></figure><h2 id="b73e" class="ou ny jk bd nz ov ow dn od ox oy dp oh lr oz pa oj lv pb pc ol lz pd pe on jq bi translated">结论</h2><p id="fd09" class="pw-post-body-paragraph li lj jk lk b ll op ku ln lo oq kx lq lr or lt lu lv os lx ly lz ot mb mc md in bi translated">衡量你的SQL风格有多强大的一个方法是浏览数据库提供的全部特性集——并找出你的SQL风格是否已经完全成熟。但是即使一个图灵完整的SQL也不能保证处理特定的用例，这些用例是查询DSL允许的，但是架构不允许。由于这个原因，存在如此多的数据库/SQL。大多数公司在给定时间使用不止一个这样的系统来存储数据并与之交互。</p><p id="19ed" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">应用程序混合使用关系数据库和文档存储，但是数据分析师和数据科学家不能像现在这样使用这些系统。数据工程师将数据从源系统传输到数据湖和数据仓库之类的系统，以便数据可以用于报告和分析。我试图涵盖最受欢迎和喜爱的SQL风格，因为它们因其独特的特性而创造了自己的市场。</p><p id="373c" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">最近，我写了一些数据工程师需要了解的不同技术和概念。讨论的一些技术不属于这一部分。我试着把缺失的整合到这里。你可以在这里找到这篇文章</p><div class="it iu gq gs iv nh"><a rel="noopener follow" target="_blank" href="/complete-data-engineers-vocabulary-87967e374fad"><div class="ni ab fp"><div class="nj ab nk cl cj nl"><h2 class="bd ju gz z fq nm fs ft nn fv fx jt bi translated">完整的数据工程师词汇</h2><div class="no l"><h3 class="bd b gz z fq nm fs ft nn fv fx dk translated">数据工程师必须知道的10个单词以内的概念</h3></div><div class="np l"><p class="bd b dl z fq nm fs ft nn fv fx dk translated">towardsdatascience.com</p></div></div><div class="nq l"><div class="qy l ns nt nu nq nv jb nh"/></div></div></a></div><p id="f395" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们从保罗·格拉厄姆关于一百年后语言会是什么样子的观点开始。很难说100年后会发生什么，但可以肯定地说，在5-10年的时间框架内，SQL可能会存在，更高效，更先进，更广泛。没有理由不这么认为。因此，虽然这看起来是次要的事情，但它不是。SQL是软件工程和开发过程的核心，因为，正如我一直说的，SQL是数据说话的语言。学会说SQL！</p></div></div>    
</body>
</html>