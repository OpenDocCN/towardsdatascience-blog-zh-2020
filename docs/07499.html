<html>
<head>
<title>Code and Techniques for Exploratory Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索性数据分析的代码和技术</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/code-and-techniques-for-exploratory-data-analysis-a44c50953502?source=collection_archive---------25-----------------------#2020-06-06">https://towardsdatascience.com/code-and-techniques-for-exploratory-data-analysis-a44c50953502?source=collection_archive---------25-----------------------#2020-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="66ea" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">探索性数据分析框架</h2><div class=""/><div class=""><h2 id="f1d1" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">如何分析数据，测试假设，并为您的客户创造洞察力</h2></div><p id="a67e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln">免责声明:您正在阅读第 1 部分“探索性数据分析框架”。</em> <a class="ae lo" href="https://medium.com/@tatianasennikova/how-to-build-a-baseline-model-be6ce42389fc" rel="noopener"> <em class="ln">第 2 部分</em> </a> <em class="ln">展示了如何基于下面的分析见解构建基线模型。</em></p><h1 id="5143" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">介绍</h1><p id="b6d3" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">当您需要通过生成见解和构建第一个基线模型来向客户展示数据的价值时，这是一种非常常见的情况。作为一名数据科学顾问，您可能每周都会收到这样的请求。因此，建立一个探索性数据分析的基本框架是有意义的，它可以帮助您评估数据质量，并向客户展示第一手见解。在本文中，我描述了我在分析新数据集时使用的探索性数据分析框架。该框架包括:</p><p id="be39" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">数据质量评估</p><p id="3bef" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">数据分布概述</p><p id="6018" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">分析不同类型的数据(地理位置、时间序列、名义数据等)。)</p><p id="8deb" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">关联(或相关)分析</p><p id="6eaa" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">构建基线模型(在分析的<a class="ae lo" href="https://medium.com/@tatianasennikova/how-to-build-a-baseline-model-be6ce42389fc" rel="noopener">第 2 部分</a>中描述)</p><p id="2a1b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">拟议的框架并非详尽无遗，但涵盖了广泛的案例，可作为制定更详尽框架的起点。在我们着手任何复杂的建模之前，它作为第一个健全检查。完整的笔记本可以在<a class="ae lo" href="https://github.com/tsennikova/road-accidents-analysis/blob/master/road_accidents_analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><p id="fd16" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在这个例子中，我使用了在<a class="ae lo" href="https://data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data" rel="noopener ugc nofollow" target="_blank">data.gov.uk</a>发现的道路事故安全数据。该数据集包含不同类型的数据:地理、时间序列、分类和连续变量，这些变量非常接近真实世界的情况，其中数据来自多个来源，并且可能属于不同的类型。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mm"><img src="../Images/87ec9c5f7641c9b29795ef139f9c675d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ArFFdGL2tOV8dZs-m9Digg.jpeg"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">图片由 Icons8 团队/unsplash.com 提供</p></figure><h1 id="c7eb" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">问题陈述</h1><p id="4d23" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">最终目标是开发一个模型来预测警察参与事故的概率。我们还应该评估我们所掌握的数据的质量，并展示哪些因素对模型的决策有最大的影响。</p><h1 id="fe25" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">数据质量评估</h1><p id="746c" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">首先，我导入了探索性数据分析所需的包。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">将数据读入熊猫数据框</p></figure><p id="90b0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">除了像 pandas、numpy 和 matplotlib 这样的标准包，我还导入了<a class="ae lo" href="https://pypi.org/project/missingno/" rel="noopener ugc nofollow" target="_blank"> missingno </a>，这是一个 pandas 兼容的库，用于可视化缺失值。</p><p id="faab" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">由于我不希望事故数据帧在数据探索阶段被改变，数据被复制到一个单独的变量中。数据分析的所有后续步骤都将在副本上执行，一旦进入建模阶段，我将返回原始数据集(在<a class="ae lo" href="https://medium.com/@tatianasennikova/how-to-build-a-baseline-model-be6ce42389fc" rel="noopener">第二部分</a>)。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">将数据集复制到单独的变量中</p></figure><p id="c636" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">数据集包含 32 个变量，其中大部分是分类变量。我们可以在<a class="ae lo" href="http://data.dft.gov.uk/road-accidents-safety-data/variable%20lookup.xls" rel="noopener ugc nofollow" target="_blank">变量查找</a>中检查每个变量的含义及其值。首先，我们需要评估变量数据类型，因为其中一些可能需要类型转换。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">事故数据框架中的变量类型</p></figure><p id="3fa4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">事故数据集中的大多数变量都是数字。还有一个变量是我在读取时显式设置为 datetime 对象的，我们还有四个对象变量:</p><ul class=""><li id="a88c" class="ne nf it kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated"><em class="ln">事故指数</em> —事故指数</li><li id="d5fd" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated"><em class="ln">时间</em> —格式为 HH:mm 的时间</li><li id="ce11" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated"><em class="ln">Local _ Authority _(Highway)</em>，<em class="ln">LSOA _ 事故 _ 地点</em> —包含事故地点信息的分类变量。</li></ul><p id="9ddc" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在我们对数据集中的变量进行更深入的分析之前，让我们先了解一下缺失值的概况。</p><h2 id="1449" class="ns lq it bd lr nt nu dn lv nv nw dp lz la nx ny mb le nz oa md li ob oc mf iz bi translated">缺失值分析</h2><p id="56a0" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">如前所述，为了快速了解缺失值的模式，我使用了 missingno 包，因为它提供了数据集的图形化表示。它允许我们快速检测缺失数据的模式，然后判断数据是否是随机缺失的。基于此，我们需要制定一个策略来处理缺失的值。</p><p id="9c8a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在事故数据集中，缺失值用值“-1”表示。首先，我们需要用一个 NaN 值来替换它，这样我们就可以得到一个缺失观测值模式的概述。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制缺失值图表</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi od"><img src="../Images/b8906c37475f86c0b24ade09c8a216eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdoT4zLvTc7TdDxSWhZilg.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">缺失值评估</p></figure><p id="789c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">因为我只对包含缺失值的变量感兴趣，所以我只可视化包含 NaN 值的列。该图显示了每一列中缺失的观察值，右边的栏显示了每一行的数据完整性。</p><p id="8c0d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">正如我们所看到的，有几列似乎与缺失值相关联:</p><ul class=""><li id="c6b1" class="ne nf it kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated"><em class="ln">路口 _ 控制</em>与<em class="ln">第二 _ 道路 _ 等级</em></li><li id="05e4" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated"><em class="ln">人行横道</em> - <em class="ln">人控</em>与<em class="ln">人行横道</em> - <em class="ln">物理设施</em></li><li id="7f6b" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated"><em class="ln">道路 _ 路面 _ 状况</em>与<em class="ln">特殊 _ 状况 _ 现场</em>和<em class="ln">行车道 _ 危险</em></li></ul><p id="755a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">这意味着值不是随机丢失的，我们在处理丢失值的策略时需要记住这一点。</p><p id="0200" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">此外，一些变量如<em class="ln"> Junction_Control </em>也会对响应变量产生重大影响。因此，在将来，缺失的值应该是完整的，例如通过车辆传感器数据。</p><p id="ac1c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了更好地理解我们正在处理的数据，我将绘制每个数值的直方图。</p><h1 id="c69d" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">数据分布概述</h1><p id="bdde" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">正如我们已经看到的，数据集包含不同类型的数据:地理的、分类的、时间序列的。所有类型的数据都应单独处理和分析。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制事故数据的直方图</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oe"><img src="../Images/38dea636ebb41ba92580520e80b24949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjIl6k96exgIOywR5XfRXw.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">事故数据集中每个变量的直方图</p></figure><p id="24a1" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">大多数变量是基数较低的分类变量。我们还看到一些成对的特征，比如</p><ul class=""><li id="add4" class="ne nf it kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated"><em class="ln">经度</em>和<em class="ln">位置 _ 东行 _OSGR </em></li><li id="8abb" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated"><em class="ln">纬度</em>和<em class="ln">位置 _ 北向 _OSGR </em></li></ul><p id="7719" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">有非常相似的分布。他们很可能复制了信息。因此我们现在可以只集中分析<em class="ln">纬度</em>和<em class="ln">经度</em>，而忽略<em class="ln">位置 _ 东行 _OSGR </em>和<em class="ln">位置 _ 北行 _OSGR </em>。</p><p id="696d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们简单地看一下我们想要预测的变量，因为进一步的分析将在其上下文中执行。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">响应变量概述</p></figure><p id="eaf5" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">响应变量包含三个类。我将把第 2 类和第 3 类合并成一个负类，因为我只对预测警察参与事故的概率感兴趣。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">响应变量类别份额</p></figure><p id="a5ee" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">正如我们可以看到的，响应变量中的类是不平衡的，这是在训练模型时要记住的事情。</p><h1 id="ee12" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">不同类型数据的分析</h1><h2 id="9a66" class="ns lq it bd lr nt nu dn lv nv nw dp lz la nx ny mb le nz oa md li ob oc mf iz bi translated">地理数据</h2><p id="e331" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">由于描述事故地点的变量相当多，我将检查地点是否是预测警察是否会参与事故的重要因素。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制地理数据</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/36398b21e31e6403c610af0f16bc9164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*pBR1Ej4QjwtTmZUIMVoPbg.png"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">道路事故英国 2017。红色—未出席；灰色—有人值守</p></figure><p id="2090" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">红色—未出席</p><p id="6a19" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">灰色—有人值守</p><p id="e6e0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该图显示，在一些区域，警察不太可能参与事故。当我们训练一个模型时，<em class="ln">经度</em>和<em class="ln">纬度</em>可能是具有高分辨能力的变量。</p><h2 id="944d" class="ns lq it bd lr nt nu dn lv nv nw dp lz la nx ny mb le nz oa md li ob oc mf iz bi translated">数据集中变量之间的关联</h2><p id="c462" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated"><strong class="kt jd">假设检验</strong></p><p id="405e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在这一节中，我将测试一些关于数据集中变量之间关系的假设。检查变量之间关系的常用方法是计算相关性(如皮尔逊相关系数)。然而，事故数据集中的绝大多数变量都是分类变量。我们不能在数据集上使用相关性，因为相关性衡量两个定量变量之间的线性关系。因此，我使用<a class="ae lo" href="https://en.wikipedia.org/wiki/Chi-squared_test" rel="noopener ugc nofollow" target="_blank">卡方检验</a>来确定两个分类变量之间的显著关联。</p><p id="e15a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在盯着这些数据看了一会儿后，我提出了一个假设，即对于一名警察来说，决定是否参与一起事故的最重要因素之一是事故的严重程度。那么我们要测试的第一个假设如下:</p><p id="cf39" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> H0: </strong>事故的严重程度对警察参与事故的概率没有影响。</p><p id="0b58" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><em class="ln">记住，零假设总是一个没有变化的假设，我们现在的工作是检查我们是否有足够的证据来拒绝它。</em></p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制事故严重性和事故出勤率</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi og"><img src="../Images/850e0f13334576f9e1bf64704032917f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lRK65qkaxjKy2A2ngsIP_A.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">事故严重程度和警察出勤率</p></figure><p id="06e2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们可以观察到两组之间的差异，但我们需要量化这些关系。为此，我将在 5%的显著性水平上进行卡方检验。</p><p id="a47e" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">为了进行卡方检验，我使用了<a class="ae lo" href="https://pypi.org/project/researchpy/" rel="noopener ugc nofollow" target="_blank"> researchpy </a>包。Researchpy 生成熊猫数据框架，其中包含学术研究通常需要的相关统计测试信息。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">假设检验。一名警官是否参加事故的概率取决于事故的严重程度</p></figure><p id="dad4" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">researchpy 运行的卡方检验为我们提供了三个值:</p><p id="728c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">皮尔逊卡方</strong>——通过计算观察频率和预期频率之间的平方差总和(由预期频率归一化)来计算。它用于计算 p 值，这是卡方检验的另一个输出</p><p id="f0de" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> p 值</strong>——假设 H0 正确的观测结果的概率</p><p id="36b2" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><a class="ae lo" href="https://en.wikipedia.org/wiki/Cram%C3%A9r%27s_V" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jd">克莱姆的 V</strong></a><strong class="kt jd"/>——是一个量化两个分类变量之间关联的效应大小。我们可以使用 Pearson 卡方统计来量化这些关系，但是与协方差一样，它不是有界的，并且倾向于随着维度和样本的数量而增长。因此，要对不同大小的数据集的影响大小进行可比测量，我们需要通过将 Pearson 卡方统计除以样本大小和最小维度减 1 来对其进行归一化。它会给我们一个 0 到+1 之间的值，叫做克莱姆 v。</p><p id="92bc" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">卡方检验的结果表明，有统计学意义的证据表明 H0 是错误的。鉴于证据和数据，我们拒绝 H0 的说法，即变量<em class="ln">事故严重性</em>和<em class="ln">Did _ 警察 _ 官员 _ 出席 _ 事故现场</em>之间没有关联，p 值&lt;为 0.005，效应大小为 0.1。</p><p id="4e8f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">既然我们知道这种联系是显著的，我们想测试变量水平之间的关系。为此，我们需要进行多次 2×2 卡方检验。然而，对同一个因变量进行多次测试会增加假阳性的机会，从而增加了偶然获得重要结果的可能性。为了考虑假阳性，我们需要通过校正其级别来调整正在执行的比较数量的重要性。该校正称为<a class="ae lo" href="https://en.wikipedia.org/wiki/Bonferroni_correction" rel="noopener ugc nofollow" target="_blank"> Bonferroni 校正</a>。为此，我将使用 scipy 的统计包，作为 researchpy 的替代方法。需要记住的是，scipy 不提供熊猫数据帧中的结果。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">测试事故严重程度与警察参与事故的概率</p></figure><p id="43ec" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">使用 Bonferroni 调整的显著性水平=0.017 的卡方检验表明所有比较都是显著的。然而，对数据集中的每一对变量进行卡方检验是非常耗时的。因此，我将建立一个关联矩阵作为数据探索的最后一步。</p><h2 id="d49f" class="ns lq it bd lr nt nu dn lv nv nw dp lz la nx ny mb le nz oa md li ob oc mf iz bi translated">日期和时间</h2><p id="e6dd" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">数据集中有<em class="ln">日期</em>和<em class="ln">时间</em>变量，检查时间相关模式并添加一些新变量来帮助我们的模型做出决策总是一个好主意。首先，我们来看一下<em class="ln">时间</em>变量。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制每小时事故数</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oh"><img src="../Images/31fdcc6e03f9586d0a02cc2bc3a18eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUIqQfnnWUD7-WoiYxBqlw.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">每小时事故数及其出勤率</p></figure><p id="e271" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们可以观察到两个最容易发生事故的高峰时段:上午 7-9 点和下午 15-18 点。我知道警察的数量在一段时间内是不变的，我会假设在高峰时间出勤率会更低，因为可能没有足够的警察来处理所有的事故。因此，我将创建一个表示高峰时间的变量，并测试它与警察发生事故的概率之间的关联。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制每个高峰时间的事故数量及其出勤率</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi og"><img src="../Images/7a10b3b88c2892427f58add39f5055b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJB_jqjxvk5i85pnWhDW-A.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">每个高峰时间的事故数量及其出勤率</p></figure><p id="81a0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">各组之间略有不同。为了量化这些关系，我将运行另一个卡方检验。</p><p id="5d84" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd"> H0: </strong>高峰时间对一名警察参与事故的概率没有影响</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">卡方检验:高峰时间是否影响警察参与事故的概率</p></figure><p id="6424" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">卡方检验的结果表明，有统计学意义的证据表明 H0 是错误的。鉴于证据和数据，我们拒绝 H0 的说法，即变量<em class="ln">高峰时间</em>和<em class="ln">Did _ 警察 _ 官员 _ 出席 _ 事故现场</em>之间没有关联，p 值&lt;为 0.005，效应大小为 0.04。</p><p id="0c89" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">事故数据集中的另一个时间相关变量是<em class="ln">日期</em>。我将绘制每天的事故总数，以分析随时间变化的趋势。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制每天的事故数量</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oi"><img src="../Images/6cadc3c4a0bb9812def48bf5ed70e576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4UAQ6BIfNzRfxc00Weu3A.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">每天的事故数量</p></figure><p id="2768" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该图显示了一种循环模式，这可能表明存在某种季节性。我将绘制 ACF 图和 PACF 图，以检查时间序列中是否有显著的季节性成分。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制每天事故数量的 ACF 和 PACF</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oj"><img src="../Images/a00ac20015cc8b499fc47726e1c88588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YaFnhyPpKFVTO0nAp7UzZQ.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">ACF 和 PACF 每天事故数量图</p></figure><p id="a8f7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">ACF 图在滞后 1 处显示了显著的趋势分量，在滞后 6 和滞后 7 处显示了显著的季节分量，这可能指示周末。我将绘制出每个工作日的事故数量，以检查周末的行为是否有所不同。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">绘制一周中每天的事故数量</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi og"><img src="../Images/8d8f207df8baece5e44da47dcc6c2a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvDyot6VWlDshMc6GXipAg.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">每周事故数和警察出勤率</p></figure><p id="8830" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我们可以观察到整体事故和周末参与的事故略有下降。我将明确地对周末进行建模，然后检查一个新创建的变量是否与警察参与事故的概率有显著关联。</p><p id="361a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">H0:周末对警察处理事故的概率没有影响。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">卡方检验:周末是否影响警察参与事故的概率</p></figure><p id="ee3d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">卡方检验的结果表明，有统计学意义的证据表明 H0 是错误的。鉴于证据和数据，我们拒绝 H0 的说法，即变量<em class="ln">周末</em>和<em class="ln">Did _ Police _ Officer _ Attend _ Scene _ of _ Accident</em>之间没有关联，p 值&lt;为 0.005，效应大小为 0.04。</p><h2 id="9504" class="ns lq it bd lr nt nu dn lv nv nw dp lz la nx ny mb le nz oa md li ob oc mf iz bi translated">连接附加数据</h2><p id="4055" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">我们已经测试了一些假设，并设计了两个新功能，高峰时间和周末。现在让我们加入在 data.gov.uk 得到的其他数据。首先，我将连接伤亡数据集中的数据。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">加载伤亡数据集</p></figure><p id="042a" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">伤亡数据集主要包含分类变量。从前三行我们可以看出，<em class="ln">事故指数</em>对于每一行都不是唯一的，因为一次事故可能导致多人伤亡。对我们来说，这意味着我们不能直接连接事故和伤亡数据表，而是需要做一些特征工程。对于第一次评估，让我们只加入伤亡数据集中的几个变量。</p><p id="7261" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我将形成几个假设，并假设如果下列情况之一为真，警察更有可能参与事故:</p><ul class=""><li id="f26e" class="ne nf it kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated">伤亡者是行人</li><li id="dfc2" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">18 岁以下或 65 岁以上的人</li><li id="8fb6" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">司机年龄在 18 岁以下，或 65 岁以上</li></ul><p id="6818" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">因此，我将创建新的二元变量，将它们加入事故数据集，并测试是否与响应变量有显著关联。</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">连接伤亡数据集中的新变量，并测试它们与响应变量的显著关联</p></figure><p id="f22f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">卡方检验显示，在 0.05 的显著性水平上，新创建的变量与警察参与事故的概率之间存在显著关联，而 p 值【data.gov.uk】是涉及事故的车辆数据集。</p><p id="5cce" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">加载车辆数据集</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">从前面几行中，我们可以看到<em class="ln">事故指数</em>对于每一行都不是唯一的，因为一次事故可能涉及几辆车。同样，我们需要进行特征工程来连接数据。</p></figure><p id="b8ec" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">我将形成几个假设，并假设如果下列情况之一为真，警察更有可能参与事故:</p><p id="dc86" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">自行车卷入了事故</p><ul class=""><li id="be89" class="ne nf it kt b ku kv kx ky la ng le nh li ni lm nj nk nl nm bi translated">出租车、货车或公共交通工具卷入事故</li><li id="652e" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">司机年龄在 18 岁以下，或 65 岁以上</li><li id="5b5c" class="ne nf it kt b ku nn kx no la np le nq li nr lm nj nk nl nm bi translated">与伤亡数据集中的情况一样，我将创建相关的二进制变量，将它们连接到事故数据集中，并测试是否与响应变量有显著关联。</li></ul><p id="7651" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">连接车辆数据集中的新变量，并测试它们与响应变量的显著关联</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">卡方检验显示，在 0.05 的显著性水平上，新创建的变量与警察参与事故的概率之间存在显著关联。</p></figure><p id="baca" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">毫无疑问，可以对这三个数据集执行更复杂的特征工程，包括构建分类嵌入。然而，我们的目标是建立第一个原型模型，并通过快速洞察和发现变量之间的有趣关系(例如，带有事故出席率、事故季节性等的地理数据)向客户展示数据的价值。).为了保持务实，我将暂时结束特性工程。在进入建模阶段之前，我想做的最后一件事是为分类变量建立一个关联矩阵，以总结已经完成的分析。我将通过计算跨类别关联的 Cramer V 统计量来构建关联矩阵，这是 researchpy 包提供的效果大小。如前所述，需要记住的一个重要细节是，Cramer 的 V 倾向于高估大样本和高维样本的关联强度。因此，我们需要实现一个偏差校正，这在维基百科的<a class="ae lo" href="https://en.wikipedia.org/wiki/Cram%C3%A9r%27s_V#Bias_correction" rel="noopener ugc nofollow" target="_blank">中有描述。我使用了来自</a><a class="ae lo" href="https://stackoverflow.com/a/39266194" rel="noopener ugc nofollow" target="_blank"> Ziggy Eunicien </a>的一个非常好的偏差校正实现。</p><p id="cbae" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">绘制关联矩阵</p><figure class="mn mo mp mq gt mr"><div class="bz fp l di"><div class="nc nd l"/></div><p class="my mz gj gh gi na nb bd b be z dk translated">数据集中分类变量之间的关联</p></figure><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ok"><img src="../Images/ff8e1feb16b37ea78613615f2f48b8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZ2VYH03gC0Mo8KrIGuhEQ.png"/></div></div><p class="my mz gj gh gi na nb bd b be z dk translated">我们感兴趣预测的变量“<em class="ln">Did _ 警察 _ 官员 _ 出席 _ 事故现场</em>”位于矩阵的第一列(和第一行)。</p></figure><p id="5f45" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">不出所料，与时间相关的变量彼此紧密相关:<em class="ln">日期</em>、<em class="ln">星期几</em>和<em class="ln">周末</em>。</p><p id="830c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">数据集中的位置相关变量，<em class="ln">警察部队</em>，<em class="ln">地方当局(地区)</em>，<em class="ln">地方当局(高速公路)</em>和<em class="ln"> LSOA(事故地点)</em>与警察参与事故的概率有很高的关联。这与根据地理数据分析得出的结论是一致的。</p><p id="8a2d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">结论</p><h1 id="8f93" class="lp lq it bd lr ls lt lu lv lw lx ly lz ki ma kj mb kl mc km md ko me kp mf mg bi translated">在探索性数据分析的第一部分，我分析了英国的道路交通事故安全数据。进行了数据质量保证，其结果是缺失数据中存在一种模式。应该使用传感器数据来提高预测的准确性。</h1><p id="b1ba" class="pw-post-body-paragraph kr ks it kt b ku mh kd kw kx mi kg kz la mj lc ld le mk lg lh li ml lk ll lm im bi translated">对地理数据的分析表明，事故发生的地点与警察到场的可能性之间存在联系。这意味着有些地区(例如东伦敦)和地区需要更多的警察。这一点在高峰时间尤为重要，因为此时无人参与的事故比例会增加。</p><p id="b24d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">对伤亡人数和车辆数据的变量分析表明，如果行人和 18 岁以下或 65 岁以上的人是伤亡人员，警察更有可能参与事故。此外，特定类型的交通工具(自行车和公共交通工具)导致警察参与事故的可能性更高。对于预测分析来说，这是一个很有价值的见解。</p><p id="6310" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在<a class="ae lo" href="https://medium.com/@tatianasennikova/how-to-build-a-baseline-model-be6ce42389fc" rel="noopener">第 2 部分</a>中，我将展示如何基于我们在探索阶段学到的见解构建基线模型。</p><p id="484d" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">编写面试问题</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><div class="mn mo mp mq gt os"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd jd gy z fp ox fr fs oy fu fw jc bi translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">技术开发</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk">skilled.dev</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg mw os"/></div></div></a></div></div></div>    
</body>
</html>