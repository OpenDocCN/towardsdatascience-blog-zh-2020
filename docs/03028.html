<html>
<head>
<title>Web Applications in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-applications-in-python-a1a7edcb5b9e?source=collection_archive---------8-----------------------#2020-03-23">https://towardsdatascience.com/web-applications-in-python-a1a7edcb5b9e?source=collection_archive---------8-----------------------#2020-03-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8fa4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Django 入门</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2204a3c82abbe3b810b16f4c621cc6ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcVSpd4HwRv5ee3z_wkeGQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/five-bulb-lights-1036936/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="9f85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Django 是一个基于 python 的开源 web 框架，可以轻松创建数据库驱动的网站。使用 Django 的网站包括 Instagram、Mozilla 和 Bitbucket。</p><p id="39f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将介绍用 Django 构建一个简单的 web 应用程序的步骤。Django 的文档可以在<a class="ae ky" href="https://docs.djangoproject.com/en/3.0/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="8b3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="1b16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要做的第一件事是确保我们已经安装了 Django。要安装 Django，打开终端并执行以下 pip 命令:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6a44" class="ma mb it lw b gy mc md l me mf">pip install django</span></pre><p id="b5ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以显示 Django 的版本:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7a6e" class="ma mb it lw b gy mc md l me mf">python -m django --version</span></pre><p id="ecaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我写这篇文章的时候，我使用的版本是 2.2.6。现在，让我们在桌面上创建一个名为“first_site”的新目录:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="00a0" class="ma mb it lw b gy mc md l me mf">mkdir first_site<br/>cd first_site</span></pre><p id="5f94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在“first_site”文件夹中创建 Django 项目:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="54a9" class="ma mb it lw b gy mc md l me mf">django-admin startproject first_site</span></pre><p id="97b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看看创建的文件的结构，我们看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/e46e50cd0bfce1eb6786c47c4d4589bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*-YLmm7Z9VPs8iTXb4k-8WQ.png"/></div></figure><p id="e97d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们有一个“manage.py”文件和一个 Django 项目目录“first_site”。“manage.py”文件是命令行实用程序，它允许我们执行管理任务。</p><p id="32fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">' __init__ '“py”文件是一个空文件，它告诉 python 我们的应用程序是一个 python 包。“setting.py”文件允许我们更改设置和配置。“url.py”允许我们指定从 url 到我们将用户发送到的位置的映射。“wsgi.py”用于允许我们的服务器和 web 应用程序之间的通信。</p><p id="b0fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们打开每个新项目的默认网站。在我们的终端中，我们运行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="cdaf" class="ma mb it lw b gy mc md l me mf">python manage.py runserver</span></pre><p id="a482" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/8ef156b8fc27785ba5126cfb8da73426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2-srCoGMI6EmCPQ1gK-Ziw.png"/></div></div></figure><p id="b46f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到我们的网站正在运行。我们可以通过“http://127.0.0.1:8000/”访问我们的网站，这对应于我们的本地计算机。我们应该看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/104a110affa1769e900a3ce6e5bf7e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2hhzyN3kSDrvyIqIKWei7w.png"/></div></div></figure><p id="f36a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是 Django 为我们创建的默认网站。Django 框架背后的思想是，在创建一个网站项目时，它本身就是一个应用程序，我们可以在我们的 web 应用程序中创建额外的应用程序。你可以把每个应用程序想象成我们网站上它自己的部分，比如博客部分、商店部分等等。这个框架的好处在于，在创建应用程序时，您可以在后续的 web 应用程序中重用代码。</p><p id="13b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将继续为我们的网站创建一个博客应用程序。首先，按“control”+“C”来关闭运行我们的 web 应用程序的服务器:</p><p id="cafa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，为了创建我们的博客应用程序，我们要做以下事情:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1ead" class="ma mb it lw b gy mc md l me mf">python manage.py startapp blog</span></pre><p id="4abc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在创建新应用程序时查看我们的项目结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/afcaac2808f3132e60e64b8e5c28556f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZg9MdHKdAQXQtVzVs_Juw.png"/></div></div></figure><p id="05fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们进入博客目录，打开“views.py”文件。我们应该看到以下内容:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8f97" class="ma mb it lw b gy mc md l me mf">from django.shortcuts import render</span><span id="4e03" class="ma mb it lw b gy mk md l me mf"># Create your views here.</span></pre><p id="50f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也导入 HttpResponse。让我们也创建一个名为“home”的新功能，它将允许我们处理来自我们博客主页的流量:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="869a" class="ma mb it lw b gy mc md l me mf">from django.shortcuts import render<br/>from django.http import HttpResponse</span><span id="eabb" class="ma mb it lw b gy mk md l me mf">def home(request):<br/>    return HttpResponse('&lt;h1&gt;Blog Home&lt;/h1&gt;')</span><span id="d32d" class="ma mb it lw b gy mk md l me mf"># Create your views here.</span></pre><p id="0ddb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要将我们的 url 模式映射到这个‘view’函数。我们转到我们的博客应用程序目录，创建一个名为“urls.py”的新文件。在该文件中，我们复制并粘贴以下内容:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="63af" class="ma mb it lw b gy mc md l me mf">from django.urls import path<br/>from . import views</span><span id="73bf" class="ma mb it lw b gy mk md l me mf">urlpatterns = [<br/>path('', views.home, name='blog-home'),<br/>]</span></pre><p id="f966" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了一个映射到视图文件中 home 函数的博客主页的 url 路径。</p><p id="d0ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了充分发挥作用，我们需要修改主项目目录“first_site”中的“urls.py”模块。这个模块告诉我们的网站哪些网址会把我们发送到我们的博客应用程序。</p><p id="6a0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打开“first_site”目录中的“urls.py”文件:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="26a3" class="ma mb it lw b gy mc md l me mf">from django.contrib import admin<br/>from django.urls import path</span><span id="1175" class="ma mb it lw b gy mk md l me mf">urlpatterns = [<br/>path('admin/', admin.site.urls),<br/>]</span></pre><p id="1570" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到有一条路由映射到我们的管理站点 URL。我们现在需要指定映射到我们博客 URL 的路由。我们需要从 django.urls 导入 include 函数，并为我们的博客 url 添加一个额外的路径:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="84aa" class="ma mb it lw b gy mc md l me mf">from django.contrib import admin<br/>from django.urls import path, include</span><span id="199c" class="ma mb it lw b gy mk md l me mf">urlpatterns = [<br/>path('admin/', admin.site.urls),<br/>path('blog/', include('blog.urls'))<br/>]<br/></span></pre><p id="77eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们试着运行服务器。在尝试运行服务器时，我经常遇到以下错误:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/56dbac875e99aa778e64fbbb3005f44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MM9uwpxVCpTNj221v1GCGw.png"/></div></div></figure><p id="c734" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要解决此问题，请执行:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4b28" class="ma mb it lw b gy mc md l me mf">ps -ef | grep python</span></pre><p id="fb91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并使用以下命令终止适当的进程:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6798" class="ma mb it lw b gy mc md l me mf">kill -9 procees_id</span></pre><p id="6e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在尝试运行服务器:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="995d" class="ma mb it lw b gy mc md l me mf">python manage.py runserver</span></pre><p id="6410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们键入 http://127.0.0.1:8000/blog/我们应该会看到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/ec41466b66496026c32abcf56f7c2b5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdhqDEafboUmcV5Zgtgvbg.png"/></div></div></figure><p id="8b3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以进一步编辑博客主页的内容。让我们引用我最喜欢的小说之一，戴维·福斯特·华莱士的《无限玩笑》:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8863" class="ma mb it lw b gy mc md l me mf">from django.shortcuts import render<br/>from django.http import HttpResponse</span><span id="ec07" class="ma mb it lw b gy mk md l me mf">def home(request):<br/>    return HttpResponse('&lt;h1&gt;Blog Home&lt;/h1&gt;&lt;p1&gt;Everybody is identical in their secret unspoken belief that way deep down they are different from everyone else.&lt;/p1&gt;')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/834d397f3012ec2ed3f012eb1f32fef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8g745smvKuVQi55WJfYdxg.png"/></div></div></figure><p id="1393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还将为我们的博客添加一个关于页面。在“views.py”模块中，让我们定义一个名为“about”的函数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c53c" class="ma mb it lw b gy mc md l me mf">from django.shortcuts import render<br/>from django.http import HttpResponse</span><span id="74d5" class="ma mb it lw b gy mk md l me mf">def home(request):<br/>    return HttpResponse('&lt;h1&gt;Blog Home&lt;/h1&gt;&lt;p1&gt;Everybody is identical in their secret unspoken belief that way deep down they are different from everyone else.&lt;/p1&gt;')</span><span id="1f95" class="ma mb it lw b gy mk md l me mf">def about(request):<br/>    return HttpResponse('&lt;h1&gt;About Home&lt;/h1&gt;')</span></pre><p id="10b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们在博客应用程序的“urls.py”模块中为“关于”部分添加一个新路径:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="205e" class="ma mb it lw b gy mc md l me mf">from django.urls import path<br/>from . import views</span><span id="dad8" class="ma mb it lw b gy mk md l me mf">urlpatterns = [<br/>path('', views.home, name='blog-home'),<br/>path('about/', views.about, name='blog-about')<br/>]</span></pre><p id="7a4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在如果我们去<a class="ae ky" href="http://127.0.0.1:8000/blog/about" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/blog/about</a>我们应该会看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/a2ed9b0bfb1f7ae18b0e06ec9fe20f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGqYm-nebh884BMIjEkqSw.png"/></div></div></figure><p id="5cb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将在这里停下来，但是您可以随意摆弄博客主页的内容以及我们的 web 应用程序的各个部分。此外，了解 Django 的一个很好的资源是科里·斯查费的 YouTube 教程，你可以在这里找到<a class="ae ky" href="https://www.youtube.com/channel/UCCezIgC97PvUuR4_gbFUs5g" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="332e" class="mq mb it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">结论</h1><p id="6282" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">总之，在这篇文章中，我们讨论了如何使用 Django 构建 web 应用程序和定义 url 路由。首先，我们讨论了用 Django 创建新的 web 应用程序时生成的特定文件。然后，我们在项目中创建了一个博客应用程序，并定义了视图函数，这允许我们指定用户看到的内容。我们还展示了如何在我们的博客应用程序中添加额外的 url 路由和视图。我希望你觉得这篇文章有用/有趣。感谢您的阅读！</p></div></div>    
</body>
</html>