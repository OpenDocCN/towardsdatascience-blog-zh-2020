<html>
<head>
<title>Searching the Clouds for Serverless GPU</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在云中搜索无服务器 GPU</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/searching-the-clouds-for-serverless-gpu-597b34c59d55?source=collection_archive---------31-----------------------#2020-06-11">https://towardsdatascience.com/searching-the-clouds-for-serverless-gpu-597b34c59d55?source=collection_archive---------31-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="58ed" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个未完成的任务？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d19a46870eb90e163bffb8f983dc665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W_8WkBPd1cU1kCoo"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">泰勒·范·里佩尔在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="1da9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">无服务器</em>是云计算的一大趋势。关注代码，而不是基础设施，对于许多开发人员(或者像我这样的数据科学家)来说是一件非常简单的好事。此外，如果您不喜欢为闲置的服务器付费，那么现收现付的定价模式是非常好的。同时，人工智能(主要是深度学习)的快速发展极大地增加了对 GPU 作为计算密集型任务加速器的需求。鉴于 GPU 价格昂贵，将其放在无服务器架构中不是很好吗？是的，那太好了！</p><h1 id="f8f5" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">我的使用案例</h1><p id="74ab" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">对于一个爱好项目，我一直在开发一个简单的应用程序，它提供了一个<em class="ls">神经类型转移</em>的用户界面。不熟悉这种技术？简而言之，神经风格转移(NST)是一种深度学习技术，可用于风格化图像。该算法将<em class="ls">内容图像</em>和<em class="ls">样式图像</em>作为输入，并使用它们来生成显示内容图像的内容和样式图像的样式的新图像。明白了吗？如果你想更深入地了解 NST，请查看这篇文章，这篇文章很好地解释了它！</p><p id="a79f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在回到我的爱好项目。我开发的应用程序允许用户在一个简单的图形用户界面中选择内容图像和样式图像，并通过单击按钮生成风格化的图像——简单明了。</p><p id="4260" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该应用程序在我的本地环境中运行良好。现在，我很想在网上发布这个应用程序，这样每个人都可以访问并使用它来创建自己的人工艺术。由于它仍然是一个爱好项目，我想以一种经济高效的方式来做这件事。为了实现这一点，我想在一个无服务器平台上运行 NST 算法；这样，我只会在用户积极使用应用程序时付费。哦，是的，我想在 GPU 上运行该算法，这样一幅图像就可以在一瞬间生成，用户不必像 CPU 支持的计算那样等待几秒钟。</p><p id="85a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于我的用例，我想我们已经明白了为什么无服务器 GPU 有时会派上用场。现在让我们看看市场上有什么！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/36e0a76ed1c6fe38c2faee664c329465.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V3MgxvmHjxhZrsRe"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">GPU 显卡——Rafael Pol 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="dc62" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">云提供了什么</h1><p id="0102" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在我寻找无服务器 GPU 的过程中，我了解了很多目前可用的不同无服务器选项。让我与你分享这些发现。</p><h2 id="e132" class="mr lu iq bd lv ms mt dn lz mu mv dp md lf mw mx mf lj my mz mh ln na nb mj nc bi translated">功能即服务</h2><p id="3266" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">无服务器框架已经存在了很长一段时间，所有主要的云提供商都提供了一个成熟的功能即服务(FaaS)平台:AWS 有<em class="ls"> Lambda </em>，Azure 有<em class="ls">功能应用</em>，Google 有<em class="ls">云功能</em> ( <a class="ae kv" href="https://logz.io/blog/serverless-guide/" rel="noopener ugc nofollow" target="_blank">这里有一篇比较三者的文章</a>！).到目前为止一切顺利。但是，如果我们想在 GPU 上运行我们的无服务器计算，而不是在传统的 CPU 上呢？太糟糕了！不可能。这里提到的三个 FaaS 平台都不支持 GPU 支持的服务器。在撰写本文时，我们只能依靠 CPU 来利用 Lambda、函数应用程序或云函数。</p><h2 id="53c2" class="mr lu iq bd lv ms mt dn lz mu mv dp md lf mw mx mf lj my mz mh ln na nb mj nc bi translated">人工智能平台</h2><p id="34ac" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">谷歌云将他们的人工智能平台描述为一种轻松“将你的机器学习项目投入生产”的方式。它目前提供三种补充服务:</p><ul class=""><li id="ead1" class="nd ne iq ky b kz la lc ld lf nf lj ng ln nh lr ni nj nk nl bi translated"><em class="ls"> AI 平台笔记本</em></li><li id="5769" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><em class="ls"> AI 平台培训</em></li><li id="e0e5" class="nd ne iq ky b kz nm lc nn lf no lj np ln nq lr ni nj nk nl bi translated"><em class="ls"> AI 平台预测</em></li></ul><p id="63bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为在我的例子中，我已经有了一个经过训练的 AI 模型(具体来说是 TensorFlow SavedModel)，所以我在这里的重点将是预测服务。我的目标是为我的人工智能模型服务，根据用户输入推断新的值。人工智能平台预测在这方面应该是完美的，因为它的建立正是为了做到这一点:为现有模型获得新的预测。这是一个无服务器的平台，所以我们不必担心基础设施或为闲置的服务器付费。好消息是，它在一些可用的机器类型上支持 GPU(甚至 TPU )!</p><p id="7136" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嗯，任务完成了，你可以这么想！我唯一要做的事情就是将我的模型部署到平台上，然后继续我的在线预测。然而，因为我们生活在现实世界中，当然有一些如果和但是。在这种情况下，一些技术细节被证明是不可逾越的。不涉及太多细节，它与输入大小的限制和对库的有限版本支持有关。我现在的结论是，由于这些问题，目前不可能在我的场景中使用人工智能平台预测。</p><h2 id="9f75" class="mr lu iq bd lv ms mt dn lz mu mv dp md lf mw mx mf lj my mz mh ln na nb mj nc bi translated">无服务器容器</h2><p id="544a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我探索的第三种选择是无服务器容器服务。我研究得相当透彻的一个是<em class="ls">谷歌云运行</em>。云运行“抽象出所有基础设施管理”，因此您可以轻松地将您的容器部署到生产中。因为它是按使用付费的，你只在你的代码运行时付费。太棒了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/0e7d6fb46614c6e06df35ef809bb9229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LKUJidIkQJTu2wXx"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">许多集装箱——由<a class="ae kv" href="https://unsplash.com/@guibolduc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Guillaume Bolduc </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3eba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你意识到云运行也只有对 CPU 的支持时，失望来了。如果您选择<em class="ls">完全管理</em>选项，至少情况是这样。还可以选择在 Kubernetes 集群上运行容器，这为您的基础设施提供了充分的灵活性，并支持使用 GPU。这种方法的缺点是您需要维护(并支付)您的集群，从而消除了无服务器的两个主要好处！因此，Kubernetes 上的云运行对我来说不是一个有吸引力的选择。</p><p id="b40d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了 Google Cloud Run，还有用于在无服务器框架上运行容器的<em class="ls"> AWS Fargate </em>和<em class="ls"> Azure 容器实例</em>。我还没有仔细研究这些替代方案，尽管从表面上看，它们本质上与 Google Cloud Run 非常相似，因此对我的用例同样不满意。</p><h2 id="195f" class="mr lu iq bd lv ms mt dn lz mu mv dp md lf mw mx mf lj my mz mh ln na nb mj nc bi translated">超越三巨头</h2><p id="1dfb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">你有时会忘记，除了云计算的“三巨头”:AWS、Azure 和 Google Cloud，还有更多值得探索的东西。在谷歌上简单搜索“无服务器 gpu”，你会很快找到像<a class="ae kv" href="https://nuclio.io/" rel="noopener ugc nofollow" target="_blank"> nuclio </a>这样的公司。他们自称是“第一个支持 GPU 优化利用和共享的无服务器平台”。我不知道你怎么想，但我觉得这听起来不错！然而，nuclio 似乎不像三大巨头那样提供自助服务环境。他们的目标似乎是更大的企业，而不是像我这样的私人客户。所以有一个障碍使得他们的服务不适合我。</p><h1 id="6ebf" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">包装它</h1><p id="c1bc" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">所以我在这里，暂时结束了我对无服务器 GPU 的搜寻。我的结论是，目前，在撰写本文时，没有简单的方法在 GPU 加速的无服务器平台上部署 AI 模型。由于云计算的发展速度非常快，我毫不怀疑这一市场空白将在短时间内被填补。我决定耐心等待，同时让自己忙于其他项目和冒险！</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="ba44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我错误地提出了错误的主张，或者遗漏了重要的东西，请告诉我。当然，我也很高兴听到你是否知道在哪里可以找到无服务器的 GPU！</p></div></div>    
</body>
</html>