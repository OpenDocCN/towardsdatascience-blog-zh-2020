<html>
<head>
<title>Algorithmic Trading with RSI using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 的 RSI 算法交易</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/algorithmic-trading-with-rsi-using-python-f9823e550fe0?source=collection_archive---------4-----------------------#2020-09-17">https://towardsdatascience.com/algorithmic-trading-with-rsi-using-python-f9823e550fe0?source=collection_archive---------4-----------------------#2020-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1af8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 talib 和 yfinance</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c538ca884b36ec331635da35db600b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmuWoj-SksuGcOePzE8SZQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">美国宇航局在<a class="ae ky" href="https://unsplash.com/s/photos/cosmic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="33e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习是计算密集型的，因为算法是不确定的，因此必须随着时间的推移不断调整。然而，技术指标要快得多，因为等式不会改变。因此，这提高了它们用于实时交易的能力。</p><p id="d25c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里是<a class="ae ky" href="http://motriael.com/6QX2" rel="noopener ugc nofollow" target="_blank"> github 回购</a>(广告)。</p><h1 id="6dd3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是 RSI？</h1><p id="ae6e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">要创建一个使用 RSI 的程序，首先要了解 RSI 指标。RSI 是相对强度指数的缩写。它是一个动量指标，使用价格变化的幅度来评估证券是超买还是超卖。</p><p id="3759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果 RSI 值超过 70，则认为该证券超买，如果低于 30，则认为超卖。超买是指由购买产生的泡沫可能很快破裂，因此价格会下跌。这创造了一个强有力的切入点。</p><p id="5f7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，好的做法是，只有当 RSI 值与超买线相交时，才卖出订单，因为这是一种更保守的方法。至少可以猜测 RSI 何时会达到最高点。</p><h1 id="ffc0" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">概念:</h1><p id="9415" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个程序试图使用 talib(技术分析)库来实现 RSI 线和超卖超买线的交叉。该程序的大部分不是来自于对指标的编程(因为它已经在库中创建了)，而是如何使用超卖和超买区域进行交易的实现。</p><h1 id="4005" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">代码:</h1><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="002f" class="mx lw it mt b gy my mz l na nb">import yfinance<br/>import talib<br/>from matplotlib import pyplot as plt</span></pre><p id="f3ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是该计划的先决条件。Yfinance 用于下载股票数据，talib 用于计算指标值。Matplotlib 当然是将数据绘制成图形。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9a69" class="mx lw it mt b gy my mz l na nb">data = yfinance.download('NFLX','2016-1-1','2020-1-1')<br/>rsi = talib.RSI(data["Close"])</span></pre><p id="a7c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该脚本访问数据，并根据以下两个等式计算 rsi 值:</p><p id="3121" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nc">RSI step 1</em>= 100[100/(1+平均损耗/平均增益)]</p><p id="03dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nc">RSI step 2</em>= 100[100/(1+平均平均损耗÷13+当前损耗/先前平均增益÷13+当前增益)]</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="b8e3" class="mx lw it mt b gy my mz l na nb">fig = plt.figure()<br/>fig.set_size_inches((25, 18))<br/>ax_rsi = fig.add_axes((0, 0.24, 1, 0.2))<br/>ax_rsi.plot(data.index, [70] * len(data.index), label="overbought")<br/>ax_rsi.plot(data.index, [30] * len(data.index), label="oversold")<br/>ax_rsi.plot(data.index, rsi, label="rsi")<br/>ax_rsi.plot(data["Close"])<br/>ax_rsi.legend()</span></pre><p id="4849" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该图显示了所有的超买和超卖区域，以及为股票收盘价计算的 RSI 值。这给了股票数据一个很好的可视化</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/61fd0a683b8600bc31782ba35ea2b317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4iyJ-owB7msg0PD5I8P0A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</p></figure><p id="02b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是合成图。随着时间的推移，我们可以看到 RSI 值在不同部分之间波动。RSI 的好处在于它是相对的。这意味着信号的强度与实际值无关，而是与过去值的关系有关。</p><h1 id="42ab" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">缺少的步骤:</h1><p id="9ba1" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">通常，文章到此为止。他们在给出股票交易程序的初步代码后结束。有必要更进一步，真正评估股票交易程序，基于程序的盈利能力。这就是为什么我要交程序。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="3a86" class="mx lw it mt b gy my mz l na nb">section = None<br/>sections = []<br/>for i in range(len(rsi)): <br/>    if rsi[i] &lt; 30:<br/>        section = 'oversold'<br/>    elif rsi[i] &gt; 70:<br/>        section = 'overbought'<br/>    else:<br/>        section = None<br/>    sections.append(section)</span></pre><p id="5ff0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个脚本记录了每个点所在的部分。它要么在超买，超卖或无区域，这是指在两条线之间。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="33c6" class="mx lw it mt b gy my mz l na nb">trades = []<br/>for i in range(1,len(sections)):<br/>    trade = None<br/>    if sections[i-1] == 'oversold' and sections[i] == None:<br/>        trade = True<br/>    if sections[i-1] == 'overbought' and sections[i] == None:<br/>        trade = False<br/>    trades.append(trade)</span></pre><p id="60a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个脚本整合了 RSI 交易的基本策略。交易策略是当价值离开超买和超卖部分时，进行适当的交易。例如，如果它离开超卖区，就进行买入交易。如果它离开了超买区，就进行卖出交易。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1e75" class="mx lw it mt b gy my mz l na nb">acp = data['Close'][len(data['Close'])-len(trades):].values<br/>profit = 0<br/>qty = 10<br/>for i in range(len(acp)-1):<br/>    true_trade = None<br/>    if acp[i] &lt; acp[i+1]:<br/>        true_trade = True<br/>    elif acp[i] &gt; acp[i+1]:<br/>        true_trade = False<br/>    if trades[i] == true_trade:<br/>        profit += abs(acp[i+1] - acp[i]) * qty<br/>    elif trades[i] != true_trade:<br/>        profit += -abs(acp[i+1] - acp[i]) * qty</span></pre><p id="bebf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个脚本使用程序进行的交易来计算每笔交易的利润或损失。这给出了程序的最佳评价，因为它准确地锁定了要寻找的变量。qty 变量计算购买了多少股票。</p><p id="a8ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行程序后，计算的利润为:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2af9" class="mx lw it mt b gy my mz l na nb">Profit : $58.3</span></pre><h1 id="9be4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论:</h1><p id="d36b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">事实上，当考虑到风险回报比时，58.3 美元的利润实际上不是一个很好的投资。有很多方法可以改进我的程序:</p><ol class=""><li id="3b43" class="ne nf it lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">调整耐心变量</li></ol><p id="02b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个变量是在 RSI 值之后多久，将进行交易。用这个值做玩具，找到一个模式，并优化它以获得更好的结果。</p><p id="fb14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.找到最好的公司</p><p id="5c7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个算法对哪只股票最有效？在不同的公司上测试这个程序以进行评估。</p><h1 id="f213" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">我的链接:</h1><p id="a665" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你想看更多我的内容，点击这个<a class="ae ky" href="https://linktr.ee/victorsi" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">链接</strong> </a>。</p></div></div>    
</body>
</html>