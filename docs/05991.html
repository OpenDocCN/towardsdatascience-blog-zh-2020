<html>
<head>
<title>Time Series Analysis: Creating Synthetic Datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列分析:创建合成数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-analysis-creating-synthetic-datasets-cf008208e014?source=collection_archive---------13-----------------------#2020-05-16">https://towardsdatascience.com/time-series-analysis-creating-synthetic-datasets-cf008208e014?source=collection_archive---------13-----------------------#2020-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="23a9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何创建具有不同模式的时间序列数据集</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2078a88aaff8b33e1cb56f42cb45f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I3xud_6kKDWQSs9F.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@neonbrand?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>拍摄的照片</p></figure><p id="8f29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列是按时间顺序排列的一系列值。我们可能会在几乎任何领域遇到时间序列数据。天气预报、汇率、销售数据、声波只是几个例子。时间序列可以是表示为有序序列的任何类型的数据。</p><p id="aaa8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/time-series-analysis-basic-concepts-1d9a090d7d8c">在之前的一篇文章</a>中，我介绍了时间序列分析的基本概念。在本帖中，我们将创建不同模式的时间序列数据。合成数据集的一个优势是，我们可以测量模型的性能，并了解它在真实生活数据中的表现。</p><p id="6bde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在时间序列中观察到的常见模式有:</p><ul class=""><li id="33ae" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">趋势:</strong>整体上升或下降的方向。</li><li id="204d" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">季节性:</strong>重复观察到的或可预测的间隔的模式。</li><li id="9395" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">白噪声:</strong>时间序列并不总是遵循某种模式或包含季节性。有些过程只产生随机数据。这种时间序列称为白噪声。</li></ul><p id="77b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意</strong>:图案并不总是平滑的，通常包含某种<strong class="lb iu">噪声</strong>。此外，时间序列可以包括不同模式的组合。</p><p id="d672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用numpy生成值数组，使用matplotlib绘制系列。让我们从导入所需的库开始:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="3baf" class="mo mp it mk b gy mq mr l ms mt">import numpy as np<br/>import matplotlib.pyplot as plt</span><span id="3088" class="mo mp it mk b gy mu mr l ms mt">%matplotlib inline</span></pre><p id="26f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以定义一个函数，将数组作为输入并创建绘图:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="1d55" class="mo mp it mk b gy mq mr l ms mt">def plot_time_series(time, values, label):<br/>    plt.figure(figsize=(10,6))<br/>    plt.plot(time, values)<br/>    plt.xlabel("Time", fontsize=20)<br/>    plt.ylabel("Value", fontsize=20)<br/>    plt.title(label, fontsize=20)<br/>    plt.grid(True)</span></pre><h1 id="9c36" class="mv mp it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated"><strong class="ak">时间序列趋势</strong></h1><p id="2e5b" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">第一个图是最简单的一个，是一个有上升趋势的时间序列。我们用一个斜率为时间和值创建数组。然后将这些数组作为参数传递给我们的函数:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="2079" class="mo mp it mk b gy mq mr l ms mt">time = np.arange(100)<br/>values = time*0.4</span><span id="6d10" class="mo mp it mk b gy mu mr l ms mt">plot_time_series(time, values, "Upward Trend")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/cfa8a72e39aaed1cb643bfa16b4b5b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*oIES3H6OPOXfsRjfYNlrAg.png"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="d0b8" class="mv mp it bd mw mx nz mz na nb oa nd ne jz ob ka ng kc oc kd ni kf od kg nk nl bi translated"><strong class="ak">时间序列中的季节性</strong></h1><p id="e2d3" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我们现在可以绘制一个带有季节性的时间序列。我们需要一个重复相同模式的系列。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="93c2" class="mo mp it mk b gy mq mr l ms mt"># Just a random pattern<br/>time = np.arange(50)<br/>values = np.where(time &lt; 10, time**3, (time-9)**2)</span><span id="eca0" class="mo mp it mk b gy mu mr l ms mt"># Repeat the pattern 5 times<br/>seasonal = []<br/>for i in range(5):<br/>    for j in range(50):<br/>        seasonal.append(values[j])</span><span id="09ed" class="mo mp it mk b gy mu mr l ms mt"># Plot<br/>time_seasonal = np.arange(250)<br/>plot_time_series(time_seasonal, seasonal, label="Seasonality")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/025c4c8b6d4fed81d9fe5871f3c2705a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*UdFnF-OsAc87C_2wel_QiQ.png"/></div></figure><p id="2890" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这只是一个随机的模式。请随意使用numpy尝试不同的模式。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="0e67" class="mv mp it bd mw mx nz mz na nb oa nd ne jz ob ka ng kc oc kd ni kf od kg nk nl bi translated"><strong class="ak">噪音</strong></h1><p id="b443" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">让我们给这些值添加一些噪声，因为在现实生活中，我们更可能处理有噪声的数据，而不是平滑的曲线。</p><p id="d1d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<strong class="lb iu"> np.random.randn </strong>函数创建随机噪声。然后将该噪声添加到原始的季节性序列中:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="96a3" class="mo mp it mk b gy mq mr l ms mt">noise = np.random.randn(250)*100<br/>seasonal += noise</span><span id="37b1" class="mo mp it mk b gy mu mr l ms mt">time_seasonal = np.arange(250)</span><span id="f8ec" class="mo mp it mk b gy mu mr l ms mt">plot_time_series(time_seasonal, seasonal, label="Seasonality with Noise")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/4372314f4342e1ab8818fde72e07268f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*Qyabw-EsOi11NB_Omjsedw.png"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="e2d2" class="mv mp it bd mw mx nz mz na nb oa nd ne jz ob ka ng kc oc kd ni kf od kg nk nl bi translated"><strong class="ak">多种模式</strong></h1><p id="fbba" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">我们可能会在时间序列中看到不同模式的组合。例如，以下时间序列包含上升趋势和季节性。当然，也有一些噪音。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="d620" class="mo mp it mk b gy mq mr l ms mt">seasonal_upward = seasonal + np.arange(250)*10</span><span id="90de" class="mo mp it mk b gy mu mr l ms mt">time_seasonal = np.arange(250)<br/>plot_time_series(time_seasonal, seasonal_upward, label="Seasonality + Upward Trend + Noise")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/ea579d54f99eaae5399e34b6b22f5f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*YeaeRxEWKg0hPbiTz6SgfA.png"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="a7f4" class="mv mp it bd mw mx nz mz na nb oa nd ne jz ob ka ng kc oc kd ni kf od kg nk nl bi translated"><strong class="ak">白噪声</strong></h1><p id="8da2" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">有些过程只是产生不遵循任何模式的随机数据。这种时间序列被称为<strong class="lb iu">白噪声</strong>，很难分析和预测。让我们创建一个白噪声的例子:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="5671" class="mo mp it mk b gy mq mr l ms mt">time = np.arange(200)<br/>values = np.random.randn(200)*100</span><span id="843b" class="mo mp it mk b gy mu mr l ms mt">plot_time_series(time, values, label="White Noise")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl oh"><img src="../Images/3fd6e3e8cc7719f672be6c100e50739d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qcWln3GNWFi6F5nD9TFIjg.png"/></div></figure></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="9c48" class="mv mp it bd mw mx nz mz na nb oa nd ne jz ob ka ng kc oc kd ni kf od kg nk nl bi translated"><strong class="ak">非平稳时间序列</strong></h1><p id="99e9" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">到目前为止，我们已经看到了连续遵循某种模式的时间序列。这种时间序列称为<strong class="lb iu">平稳</strong>。然而，生活充满了惊喜，所以我们可能会遇到一些打破模式的事件，并创建<strong class="lb iu">非平稳</strong>时间序列。例如，冠状病毒是一个非常大的事件，它打乱了许多模式，企业需要更新他们的时间序列分析。让我们创建一个示例:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="ec2a" class="mo mp it mk b gy mq mr l ms mt">big_event = np.zeros(250)<br/>big_event[-50:] = np.arange(50)*-50</span><span id="18f6" class="mo mp it mk b gy mu mr l ms mt">non_stationary = seasonal_upward + big_event</span><span id="9c01" class="mo mp it mk b gy mu mr l ms mt">time_seasonal = np.arange(250)<br/>plot_time_series(time_seasonal, non_stationary, label="Non-stationary Time Series")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/4c125119addaadc9f4d0cdb1e2921f2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*Ax6r1clRAA0F2Qv2ZVWhmQ.png"/></div></figure><p id="957d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在时间点210之后引入了一个大事件，效果可以在之后看到。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="7c12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">时间序列分析是数据科学领域的一个广阔领域。对时间序列分析的全面理解需要机器学习、统计学方面的知识，当然还有领域专业知识。在这篇文章中，我们介绍了如何创建合成数据集。我们可以使用这些数据集来检查我们建立的模型的性能。在早先的一篇文章中，我解释了时间序列分析中的基本概念，以理解时间序列的特征及其应用。我计划继续撰写关于时间序列分析的文章，从简单的概念到高级的分析技术。敬请关注以下帖子。</p><p id="763d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>