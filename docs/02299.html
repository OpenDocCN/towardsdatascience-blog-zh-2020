<html>
<head>
<title>Amazon SageMaker Operators for Kubernetes—examples for distributed training, hyperparameter tuning and model hosting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于Kubernetes的Amazon SageMaker操作员—分布式培训、超参数调整和模型托管的示例</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kubernetes-and-amazon-sagemaker-for-machine-learning-distributed-training-hyperparameter-tuning-187c821e25b4?source=collection_archive---------37-----------------------#2020-03-04">https://towardsdatascience.com/kubernetes-and-amazon-sagemaker-for-machine-learning-distributed-training-hyperparameter-tuning-187c821e25b4?source=collection_archive---------37-----------------------#2020-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="24cb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何编写自己的YAML配置文件来使用Amazon SageMaker操作符</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/debc8ad5c1ce85db541848642c5ac310.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cDSZaHaQ9T0V_pgkp0eirw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">使用Amazon SageMaker Operators for Kubernetes来运行培训作业、模型调优作业、批量转换作业，并使用Kubernetes配置文件和kubectl在Amazon sage maker上设置推理端点</p></figure><p id="08be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在re:invent 2019上，AWS宣布了用于Kubernetes   <strong class="la iu">、</strong>的<a class="ae lu" href="https://github.com/aws/amazon-sagemaker-operator-for-k8s" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">亚马逊SageMaker操作符，使Kubernetes用户能够训练机器学习模型，优化超参数，运行批量转换作业，并使用亚马逊SageMaker设置推理端点——而无需离开您的Kubernetes集群。您可以通过在YAML编写熟悉的Kubernetes配置文件并使用<code class="fe lv lw lx ly b">kubectl</code> CLI工具将它们应用到您的Kubernetes集群来调用Amazon SageMaker功能。</strong></a></p><p id="a406" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这使您可以通过将训练和推理工作负载卸载到Amazon SageMaker来扩展Kubernetes集群的容量和机器学习能力。关于亚马逊sage maker Operators for Kubernetes的更多介绍，请阅读以下博客文章:</p><blockquote class="lz ma mb"><p id="f9f7" class="ky kz mc la b lb lc ju ld le lf jx lg md li lj lk me lm ln lo mf lq lr ls lt im bi translated"><a class="ae lu" href="https://medium.com/p/kubernetes-and-amazon-sagemaker-for-machine-learning-best-of-both-worlds-part-1-37580689a92f?source=email-e0c596ca35b5--writer.postDistributed&amp;sk=d00ea50a38338520fa8c1eee7ee3f732" rel="noopener"> Kubernetes和亚马逊SageMaker的机器学习——两全其美</a></p></blockquote><p id="7de7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇博文中，我将一步一步地介绍如何创建Kubernetes配置文件来运行分布式训练作业、超参数调优作业以及使用Amazon SageMaker托管可伸缩模型推理端点。</p><p id="64eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本指南的目标读者是对Kubernetes有基本了解的开发人员、研究人员或DevOps专业人员。即使您不熟悉Kubernetes和Amazon SageMaker，我也会介绍提交培训作业和托管推理端点所需的所有必要步骤。</p><blockquote class="lz ma mb"><p id="0abb" class="ky kz mc la b lb lc ju ld le lf jx lg md li lj lk me lm ln lo mf lq lr ls lt im bi translated">所有代码、配置文件和演示Jupyter笔记本都可以在GitHub上获得:<a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos.git" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/shashankprasanna/kubernetes-sage maker-demos . git</a></p></blockquote><h1 id="c349" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用于Kubernetes的Amazon SageMaker操作符及其使用方法</h1><p id="9852" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">Amazon SageMaker Operators for Kubernetes是作为Kubernetes中的一个<a class="ae lu" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" rel="noopener ugc nofollow" target="_blank">定制资源</a>实现的，它使Kubernetes能够调用Amazon sage maker功能。下面，我将提供实现每个用例的逐步说明:</p><ul class=""><li id="8520" class="nd ne it la b lb lc le lf lh nf ll ng lp nh lt ni nj nk nl bi translated"><strong class="la iu">用例1: </strong>利用TensorFlow、PyTorch、MXNet等框架进行分布式训练</li><li id="1314" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><strong class="la iu">用例2: </strong>使用定制容器的分布式培训</li><li id="d0ac" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><strong class="la iu">用例3: </strong>使用TensorFlow进行大规模超参数优化</li><li id="4496" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><strong class="la iu">用例4: </strong>用BYO模型托管一个推理端点</li></ul><p id="9e50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我假设您有一个<a class="ae lu" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank"> AWS帐户</a>，并且在您的主机上安装了<a class="ae lu" href="https://aws.amazon.com/cli/" rel="noopener ugc nofollow" target="_blank"> AWS CLI工具</a>。</p><p id="2760" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所有代码、配置文件和演示Jupyter笔记本都可以在GitHub上获得:<a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos.git" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/shashankprasanna/kubernetes-sage maker-demos . git</a></p><h1 id="81c8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">设置</h1><p id="cc3e" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">让我们从构建一个Kubernetes集群开始。使用<a class="ae lu" href="https://github.com/weaveworks/eksctl" rel="noopener ugc nofollow" target="_blank"> eksctl </a> CLI工具，只需一个简单的命令和15分钟的时间，就可以构建一个包含几个节点的非常简单的集群。</p><p id="29b7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">按照<a class="ae lu" href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html" rel="noopener ugc nofollow" target="_blank"> AWS文档中的说明安装eksctl CLI工具</a>。然后运行下面的命令，去喝杯咖啡。这个命令启动一个单节点Amazon Elastic Kubernetes服务(EKS)集群，这对于本文中的例子来说已经足够了。请注意，您仍然可以使用Amazon SageMaker Operators for Kubernetes在Amazon sage maker上的数百个节点上运行大规模分布式培训和超参数调优作业。</p><h2 id="77a5" class="nr mh it bd mi ns nt dn mm nu nv dp mq lh nw nx ms ll ny nz mu lp oa ob mw oc bi translated">创建一个Kubernetes集群</h2><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="635b" class="nr mh it ly b gy oh oi l oj ok">eksctl create cluster \<br/>    --name sm-operator-demo \<br/>    --version 1.14 \<br/>    --region us-west-2 \<br/>    --nodegroup-name test-nodes \<br/>    --node-type c5.xlarge \<br/>    --nodes 1 \<br/>    --node-volume-size 50 \<br/>    --node-zones us-west-2a \<br/>    --timeout=40m \<br/>    --auto-kubeconfig</span></pre><h2 id="318f" class="nr mh it bd mi ns nt dn mm nu nv dp mq lh nw nx ms ll ny nz mu lp oa ob mw oc bi translated">为Kubernetes安装Amazon SageMaker操作员</h2><p id="fa73" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">一旦集群启动并运行，按照用户指南中的<a class="ae lu" href="https://sagemaker.readthedocs.io/en/stable/amazon_sagemaker_operators_for_kubernetes.html" rel="noopener ugc nofollow" target="_blank">说明为Kubernetes安装Amazon SageMaker操作器。你也可以参考这篇有帮助的博客文章来指导你的安装过程:</a><a class="ae lu" href="https://aws.amazon.com/blogs/machine-learning/introducing-amazon-sagemaker-operators-for-kubernetes/" rel="noopener ugc nofollow" target="_blank">为Kubernetes </a>介绍Amazon SageMaker操作员</p><p id="14b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">验证安装运行</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="61fe" class="nr mh it ly b gy oh oi l oj ok">kubectl get crd | grep sagemaker</span></pre><p id="36b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该得到如下所示的输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="1d03" class="nr mh it ly b gy oh oi l oj ok">batchtransformjobs.sagemaker.aws.amazon.com                 2020-02-29T21:21:24Z<br/>endpointconfigs.sagemaker.aws.amazon.com                    2020-02-29T21:21:24Z<br/>hostingdeployments.sagemaker.aws.amazon.com                 2020-02-29T21:21:24Z<br/>hyperparametertuningjobs.sagemaker.aws.amazon.com         2020-02-29T21:21:24Z<br/>models.sagemaker.aws.amazon.com                                2020-02-29T21:21:24Z<br/>trainingjobs.sagemaker.aws.amazon.com                           2020-02-29T21:21:24Z</span></pre><p id="b7c4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些都是您可以使用Amazon SageMaker Operators for Kubernetes在Amazon SageMaker上执行的任务，我们将进一步了解(1)培训作业(2)超参数调优作业(3)托管部署。</p><h2 id="237d" class="nr mh it bd mi ns nt dn mm nu nv dp mq lh nw nx ms ll ny nz mu lp oa ob mw oc bi translated">从GitHub下载示例</h2><p id="ad1e" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">将培训脚本、配置文件和Jupyter笔记本下载到您的主机上。</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="5326" class="nr mh it ly b gy oh oi l oj ok">git clone <a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos.git" rel="noopener ugc nofollow" target="_blank">https://github.com/shashankprasanna/kubernetes-sagemaker-demos.git</a></span></pre><h2 id="293a" class="nr mh it bd mi ns nt dn mm nu nv dp mq lh nw nx ms ll ny nz mu lp oa ob mw oc bi translated">下载训练数据集并上传至亚马逊S3</h2><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="0ad4" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/0-upload-dataset-s3</span></pre><p id="417e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">注意:</strong> TensorFlow必须安装在主机上才能下载数据集并转换为TFRecord格式</p><p id="d5da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">浏览<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/0-upload-dataset-s3/upload_dataset_s3.ipynb" rel="noopener ugc nofollow" target="_blank">upload_dataset_s3.ipynb</a></code>将你的训练数据集上传到亚马逊</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/b8732ecfe9937cc653907dd000bd1af5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uj93nEw1iIvv1rTA"/></div></div></figure><h1 id="d502" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用例1:使用TensorFlow、PyTorch、MXNet等框架的分布式培训</h1><p id="f276" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">如果您是Amazon SageMaker的新手，那么在使用TensorFlow、PyTorch、MXNet、XGBoost等流行框架时，它的一个很好的特性是，您不必担心构建包含代码的自定义容器并将其推送到容器注册中心。Amazon SageMaker可以自动将任何培训脚本和依赖项下载到一个框架容器中，并为您大规模运行它。所以你只需要版本化和管理你的训练脚本，根本不用处理容器。有了Amazon sage maker Operators for Kubernetes，你仍然可以获得同样的体验。</p><p id="06ac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到包含第一个示例的目录:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="3cb2" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/1-tf-dist-training-training-script/<br/>ls -1</span></pre><p id="4a07" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="9238" class="nr mh it ly b gy oh oi l oj ok">cifar10-multi-gpu-horovod-sagemaker.py<br/>k8s-sm-dist-training-script.yaml<br/>model_def.py<br/>upload_source_to_s3.ipynb</span></pre><p id="2f59" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个目录下的两个python文件<code class="fe lv lw lx ly b">cifar10-multi-gpu-horovod-sagemaker.py</code>和<code class="fe lv lw lx ly b">model_def.py</code>是TensorFlow训练脚本，实现了分布式训练的Horovod API。</p><p id="863d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/1-tf-dist-training-training-script/upload_source_to_s3.ipynb" rel="noopener ugc nofollow" target="_blank">upload_source_to_s3.ipynb</a></code>,用训练脚本创建一个tar文件，并上传到指定的亚马逊S3桶。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/6f267ae5fcdfe6631b8e0692fa7a3bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H2PoxzxnCIUfOfnG"/></div></div></figure><p id="7953" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/1-tf-dist-training-training-script/k8s-sm-dist-training-script.yaml" rel="noopener ugc nofollow" target="_blank">k8s-sm-dist-training-script.yaml</a></code>一个配置文件，当使用分布式培训任务的<code class="fe lv lw lx ly b">kubectl</code> kicks应用时。在您最喜欢的文本编辑器中打开它，仔细查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/3023aad1a70c8a9cb22c1dc8eb402dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/0*wgAQ-gYU6wQW6ztg"/></div></figure><p id="186d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先你会注意到<code class="fe lv lw lx ly b">kind: TrainingJob</code>。这表明你将提交一份亚马逊SageMaker培训工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/e247153e7ece3bd548ed7e24f84a87d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*On1Ed-BPb8L8i4Fa"/></div></div></figure><p id="fd0b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在超参数下，指定<code class="fe lv lw lx ly b">cifar10-multi-gpu-horovod-sagemaker.py</code>可以接受作为输入的超参数。</p><p id="9c60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为分布式培训指定附加参数:</p><ul class=""><li id="177e" class="nd ne it la b lb lc le lf lh nf ll ng lp nh lt ni nj nk nl bi translated"><code class="fe lv lw lx ly b">sagemaker_program</code>—cifar 10-multi-GPU-horo VOD-sage maker . py tensor flow培训脚本，实现用于分布式培训的Horovod API</li><li id="6602" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><code class="fe lv lw lx ly b">sagemaker_submit_directory</code> —亚马逊S3上培训脚本所在的位置</li><li id="6248" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><code class="fe lv lw lx ly b">sagemaker_mpi_enabled</code>和<code class="fe lv lw lx ly b">sagemaker_mpi_custom_mpi_options </code> —为分布式培训启用MPI通信</li><li id="f16e" class="nd ne it la b lb nm le nn lh no ll np lp nq lt ni nj nk nl bi translated"><code class="fe lv lw lx ly b">sagemaker_mpi_num_of_processes_per_host</code> —设置为请求实例上的GPU数量。对于有8个GPU的<code class="fe lv lw lx ly b">p3dn.24xlarge</code>实例，将该值设置为8。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/a05b2227b569e1669fd1e732d2e41edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Sl0fyi_wBJTqNGqX"/></div></div></figure><p id="7326" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过从这里选择适当的容器来指定深度学习框架容器:</p><p id="4ef1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://docs.aws.amazon.com/dlami/latest/devguide/deep-learning-containers-images.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/dlami/latest/dev guide/deep-learning-containers-images . html</a></p><p id="82f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Amazon SageMaker会自动将<code class="fe lv lw lx ly b">sagemaker_submit_directory</code>下指定的训练脚本下载到从trainingImage实例化的容器中。</p><p id="4b38" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要跟踪性能，您还可以指定一个指标定义。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/7f82bf0739087631c82496c993dda1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/0*R52P5_kP16Ugoj3j"/></div></figure><p id="8682" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在“资源配置”下，指定要在多少个实例或节点上运行此多节点培训。上面的配置文件指定它将在32个GPU上运行分布式训练。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/e79fc9565db0d2cde7481a085f39fc04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JreGqPx4asSFJ1fe"/></div></div></figure><p id="e879" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，指定亚马逊S3上的数据集位置。这应该与您在运行<a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/1-tf-dist-training-training-script/upload_source_to_s3.ipynb" rel="noopener ugc nofollow" target="_blank">upload _ source _ to _ S3 . ipynb</a>Jupyter notebook以上传训练数据集时选择的存储桶名称相同。</p><p id="6790" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要开始分布式培训，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="e268" class="nr mh it ly b gy oh oi l oj ok">kubectl apply -f k8s-sm-dist-training-script.yaml</span></pre><p id="cab1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="a3ba" class="nr mh it ly b gy oh oi l oj ok">trainingjob.sagemaker.aws.amazon.com/k8s-sm-dist-training-script created</span></pre><p id="f44d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要运行培训职务信息，请执行以下操作:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="eebf" class="nr mh it ly b gy oh oi l oj ok">kubectl get trainingjob</span></pre><p id="7e51" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="ca3f" class="nr mh it ly b gy oh oi l oj ok">NAME                          STATUS       SECONDARY-STATUS   CREATION-TIME          SAGEMAKER-JOB-NAME<br/>k8s-sm-dist-training-script   InProgress   Starting           2020-03-03T08:25:40Z   k8s-sm-dist-training-script-91027b685d2811ea97a20e30c8d9dadc</span></pre><p id="356a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在导航到<code class="fe lv lw lx ly b">AWS Console &gt; Amazon SageMaker &gt; Training jobs</code></p><p id="3812" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您将看到一个与<code class="fe lv lw lx ly b">kubectl get trainingjob</code>的输出同名的新培训作业</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/8b1a8ee42e22c82104a2506491391f2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zYXNsFnEyaRa6ijI"/></div></div></figure><p id="fb6b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要查看培训日志，请单击控制台中的培训作业，然后单击监视器部分下的“查看日志”。这将带您到CloudWatch，您可以在那里查看培训日志。</p><p id="337e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者，如果您<a class="ae lu" href="https://sagemaker.readthedocs.io/en/stable/amazon_sagemaker_operators_for_kubernetes.html#install-the-amazon-sagemaker-logs-kubectl-plugin" rel="noopener ugc nofollow" target="_blank">安装了smlogs </a>插件，那么您可以使用<code class="fe lv lw lx ly b">kubectl</code>运行以下命令来查看日志:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="fc39" class="nr mh it ly b gy oh oi l oj ok">kubectl smlogs trainingjob k8s-sm-dist-training-script</span></pre><h1 id="27f4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用例2:使用定制容器的分布式培训</h1><p id="6d16" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">如果你正在使用定制的专有算法，那么你必须构建自己的Docker容器。要提交一个带有自定义容器的训练作业，首先要在本地构建容器映像，并将其推送到Amazon Elastic Container Registry(ECR)。将映像推送到ECR后，您将使用ECR路径更新Kubernetes作业配置文件，而不是我们在前面的示例中提供的TensorFlow容器路径。</p><p id="5a22" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到第二个示例的目录:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="7ca1" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/2-tf-dist-training-custom-container/docker<br/>ls -1</span></pre><p id="868b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="148f" class="nr mh it ly b gy oh oi l oj ok">build_docker_push_to_ecr.ipynb<br/>cifar10-multi-gpu-horovod-sagemaker.py<br/>Dockerfile<br/>model_def.py</span></pre><p id="2edd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/2-tf-dist-training-custom-container/docker/build_docker_push_to_ecr.ipynb" rel="noopener ugc nofollow" target="_blank">build_docker_push_to_ecr.ipynb</a></code>来构建docker文件，并将其推送到ECR注册表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/190054cb4ae8c2af4b3db86b9c220ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_hP6TObzyzThloSn"/></div></div></figure><p id="30dd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航至<code class="fe lv lw lx ly b">AWS Console &gt; Amazon ECR</code>。您应该会在这里看到新推出的Docker容器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/3e1699e76d87de84d82170e74299c328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oNzpgk77PmwsA05Y"/></div></div></figure><p id="2458" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="31e2" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/2-tf-dist-training-custom-container/</span></pre><p id="8dd6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在你最喜欢的文本编辑器中打开<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/2-tf-dist-training-custom-container/k8s-sm-dist-custom-container.yaml" rel="noopener ugc nofollow" target="_blank">k8s-sm-dist-custom-container.yaml</a></code>配置文件仔细看看。</p><p id="69ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您需要做的惟一更改是trainingImage部分，在这里您需要提供ECR注册中心中您将自定义容器推送到的位置。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/099bde9768e271efd2d78edfab650aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PpHga3piQjsYMOKW"/></div></div></figure><p id="c2bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要使用自定义容器启动分布式培训，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="d45b" class="nr mh it ly b gy oh oi l oj ok">kubectl apply -f k8s-sm-dist-custom-container.yaml</span></pre><p id="3d1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="e139" class="nr mh it ly b gy oh oi l oj ok">trainingjob.sagemaker.aws.amazon.com/k8s-sm-dist-custom-container created</span></pre><h1 id="d121" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用例3:利用TensorFlow进行大规模超参数优化</h1><p id="d682" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">机器学习模型的超参数是在训练阶段没有优化或学习的选项，但是影响模型的性能。要提交Amazon SageMaker超参数调优作业，您需要创建一个Kubernetes配置文件<code class="fe lv lw lx ly b">kind: hyperparameterTuningJob</code>，而不是前面两个例子中的<code class="fe lv lw lx ly b">trainingJob</code>。</p><p id="aa64" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另一个区别是，这里您将指定超参数的范围，而不是固定的超参数，这样Amazon SageMaker可以尝试不同的选项来获得最佳模型。</p><p id="9111" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到第三个示例的目录:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="b71a" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/3-tf-hyperopt-training-script<br/>ls -1</span></pre><p id="6b17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="5656" class="nr mh it ly b gy oh oi l oj ok">cifar10-training-script-sagemaker.py<br/>inference.py<br/>k8s-sm-hyperopt-training-script.yaml<br/>requirements.txt<br/>upload_source_to_s3.ipynb</span></pre><p id="74f1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/3-tf-hyperopt-training-script/upload_source_to_s3.ipynb" rel="noopener ugc nofollow" target="_blank">upload_source_to_s3.ipynb</a></code>将培训脚本上传至亚马逊S3。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/87403d79602992622a5645a577d05cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gzt2UOYFOMmAizGY"/></div></div></figure><p id="4f4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您最喜欢的文本编辑器中打开<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/3-tf-hyperopt-training-script/k8s-sm-hyperopt-training-script.yaml" rel="noopener ugc nofollow" target="_blank">k8s-sm-hyperopt-training-script.yaml</a></code>配置文件仔细查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/5c4bd1d90aedca317578f66d6aba310b.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/0*pEjMIWWgUoESjEgq"/></div></figure><p id="e669" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe lv lw lx ly b">kind: HyperParameterTuningJob</code>表明这是一项Amazon SageMaker模型调优工作。</p><p id="78a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在resourceLimits下，指定希望hyperparameter tuner运行多少训练作业，以便探索和找到最佳的hyperparameter集。maxNumberOfTrainingJobs指定您希望使用不同超参数组合运行的作业总数，maxParallelTrainingJobs指定您希望在任何给定时间对多少个实例运行此操作。策略可以是贝叶斯或随机的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/5da10098bf49dadb56675fa9d7373129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BRP-HL-GCU9XBGHS"/></div></div></figure><p id="c3a4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">超参数可以是integerParameterRanges、continuousParameterRanges或categoricalParameterRanges。在上面的例子中，优化器和批量大小是分类的，这意味着Amazon SageMaker将随机选择一个指定的值。对于学习速率和动量，Amazon SageMaker会在指定范围内随机选取一个连续值。</p><p id="26fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要启动超参数优化作业，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="aa1b" class="nr mh it ly b gy oh oi l oj ok">kubectl apply -f k8s-sm-hyperopt-training-script.yaml</span></pre><p id="43d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="d027" class="nr mh it ly b gy oh oi l oj ok">hyperparametertuningjob.sagemaker.aws.amazon.com/k8s-sm-hyperopt-training-script created</span></pre><p id="8165" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要获得有关超参数优化作业的更多详细信息，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="7e07" class="nr mh it ly b gy oh oi l oj ok">kubectl get hyperparametertuningjob</span></pre><p id="1b2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="9e26" class="nr mh it ly b gy oh oi l oj ok">NAME                              STATUS       CREATION-TIME          COMPLETED   INPROGRESS   ERRORS   STOPPED   BEST-TRAINING-JOB   SAGEMAKER-JOB-NAME<br/>k8s-sm-hyperopt-training-script   InProgress   2020-03-03T09:13:58Z   0           2            0        0                             50d11d175d2f11ea89ac02f05b3bb36a</span></pre><p id="bb5d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">超参数调优作业产生了多个训练作业，您可以通过请求kubectl获得训练作业的列表来查看这些作业</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="86bc" class="nr mh it ly b gy oh oi l oj ok">kubectl get trainingjob</span></pre><p id="de58" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="487c" class="nr mh it ly b gy oh oi l oj ok">NAME                                            STATUS       SECONDARY-STATUS   CREATION-TIME          SAGEMAKER-JOB-NAME<br/>50d11d175d2f11ea89ac02f05b3bb36a-001-673da61b   InProgress   Starting           2020-03-03T09:14:11Z   50d11d175d2f11ea89ac02f05b3bb36a-001-673da61b<br/>50d11d175d2f11ea89ac02f05b3bb36a-002-7952d388   InProgress   Downloading        2020-03-03T09:14:11Z   50d11d175d2f11ea89ac02f05b3bb36a-002-7952d388</span></pre><p id="43c8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航至<code class="fe lv lw lx ly b">AWS Console &gt; Amazon SageMaker &gt; Hyperparameter tuning jobs</code></p><p id="837e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该看到超参数调优工作正在进行中</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/354dadea51e108e93a03330bffd55810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qfZjotLrcxy5jOcs"/></div></div></figure><h1 id="cd52" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">用例4:用BYO模型托管一个推理端点</h1><p id="e685" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">要在Amazon SageMaker托管服务中部署模型，您只需将自己的模型放在压缩的tar文件中。如果您想要托管在Amazon SageMaker上训练的模型，那么输出将已经是所需的格式。</p><p id="ad13" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您运行上面的例子，只需导航到保存培训工作结果的亚马逊S3存储区<code class="fe lv lw lx ly b">AmazonS3 &gt; YOUR_BUCKET &gt; JOB_NAME &gt; output</code>。在这里，您应该可以找到一个名为<code class="fe lv lw lx ly b">model.tar.gz</code>的文件，其中包含了培训模型。</p><p id="2730" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到第四个示例的目录:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="3451" class="nr mh it ly b gy oh oi l oj ok">cd kubernetes-sagemaker-demos/3-tf-hyperopt-training-script<br/>ls -1</span></pre><p id="70e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="34b0" class="nr mh it ly b gy oh oi l oj ok">k8s-sm-inference-host-endpoint.yaml</span></pre><p id="3aa4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您喜欢的文本编辑器中打开<code class="fe lv lw lx ly b"><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos/blob/master/4-tf-inference-host-endpoint/k8s-sm-inference-host-endpoint.yaml" rel="noopener ugc nofollow" target="_blank">k8s-sm-inference-host-endpoint.yaml</a></code>配置文件，仔细查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/71ea08494e9e35ac7a11bc1e17c9e564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5QYiA1regK2BIGnm"/></div></div></figure><p id="6027" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<code class="fe lv lw lx ly b">instanceType</code>下指定托管的实例类型，如果您托管多个模型，请提供A/B测试的权重。在<code class="fe lv lw lx ly b">modelDataUrl</code>下，指定受训模特在亚马逊S3上的位置。</p><p id="d69b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要部署模型，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="5ee5" class="nr mh it ly b gy oh oi l oj ok">kubectl apply -f k8s-sm-inference-host-endpoint.yaml</span></pre><p id="c2e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="8071" class="nr mh it ly b gy oh oi l oj ok">hostingdeployment.sagemaker.aws.amazon.com/k8s-sm-inference-host-endpoint created</span></pre><p id="a86d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要查看有关托管部署的详细信息，请运行:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="9972" class="nr mh it ly b gy oh oi l oj ok">kubectl get hostingdeployments</span></pre><p id="7568" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><pre class="kj kk kl km gt od ly oe of aw og bi"><span id="7684" class="nr mh it ly b gy oh oi l oj ok">NAME STATUS SAGEMAKER-ENDPOINT-NAME<br/>k8s-sm-inference-host-endpoint Creating k8s-sm-inference-host-endpoint-cdbb6db95d3111ea97a20e30c8d9dadc</span></pre><p id="06df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航至<code class="fe lv lw lx ly b">AWS Console &gt; Amazon SageMaker &gt; Endpoints</code></p><p id="7709" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该能够看到服务中的Amazon SageMaker端点，并准备好接受请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pb"><img src="../Images/0709e4cbc51a18312331b480355d5807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ewbKktZtenSolwYl"/></div></div></figure><h1 id="9f89" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><p id="d4e0" class="pw-post-body-paragraph ky kz it la b lb my ju ld le mz jx lg lh na lj lk ll nb ln lo lp nc lr ls lt im bi translated">在这篇博文中，我介绍了如何将Kubernetes和Amazon SageMaker结合起来，在运行机器学习工作负载时发挥两者的优势。</p><p id="5d35" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我简要介绍了用于Kubernetes的Amazon SageMaker操作符，以及如何使用它来利用Amazon SageMaker的功能，如分布式培训、超参数优化和托管可弹性伸缩的推理端点。之后，我向您展示了使用Kubernetes CLI <code class="fe lv lw lx ly b">kubect</code>提交培训和部署请求的一步一步的过程。</p><p id="221d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在GitHub上提供了所有的配置文件，所以你可以随意使用它，修改它，让它成为你自己的。感谢阅读，所有代码和示例在GitHub上都有:<br/><a class="ae lu" href="https://github.com/shashankprasanna/kubernetes-sagemaker-demos.git" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/shashankprasanna/kubernetes-sage maker-demos . git</a></p><p id="2bcd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有问题，请在推特(<a class="ae lu" href="https://twitter.com/shshnkp" rel="noopener ugc nofollow" target="_blank"> @shshnkp </a>)，<a class="ae lu" href="https://www.linkedin.com/in/shashankprasanna/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我或者在下面留言。尽情享受吧！</p></div></div>    
</body>
</html>