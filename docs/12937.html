<html>
<head>
<title>Fixing a Broken Ubuntu GUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复损坏的 Ubuntu GUI</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/fixing-a-broken-ubuntu-gui-5ce3656922f5?source=collection_archive---------3-----------------------#2020-09-06">https://towardsdatascience.com/fixing-a-broken-ubuntu-gui-5ce3656922f5?source=collection_archive---------3-----------------------#2020-09-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4bfe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从不良驱动程序安装中吸取的教训</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5b656d05a7a62057a77f9d9693b83cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V677MDuguu5jitNN"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">亚历克斯·库利科夫在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="67b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我经常在 Windows 和 Ubuntu 之间切换。我最近注意到，我有一段时间没有使用我的 Kubuntu PC 了，在这段时间里它积满了灰尘。我决定加快速度。受够了 Kubuntu，我换到了<strong class="lb iu"> Ubuntu 20.04 </strong>，安装起来并不那么痛苦，你知道 GUI 支持，等等。</p><p id="4e56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">后来，当安装速度太慢时，麻烦就来了。在修复这些错误的过程中，我经历了太熟悉的 NVIDIA，light-dm 问题，这是我作为 Ubuntu 新手必须经历的几次。</p><p id="41e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我决定把它一劳永逸地记录下来，给每个像我一样饱受 Ubuntu 新安装之苦的人。</p><h1 id="1a4e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">SLOO…ooo www Ubuntu？</h1><p id="0dbb" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这可能是因为 Ubuntu 在新安装时默认使用 XOrg 驱动程序。您可以在“附加驱动程序”下的软件更新应用程序中看到这一点。如果选择 Xorg(截图第三个选项)，很可能不是最好的。(在我的例子中，使用了大部分 CPU)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/9af465005601c3be5aa08b26c4a21c23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ByP7l7FkDdJCv8pJSJjZ3A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图:请原谅我的德语，但你仍然可以从他们的地理位置中识别选项</p></figure><p id="a084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，您现在必须:</p><ol class=""><li id="f7a8" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">安装显卡的专有驱动程序(我的是 NVIDIA GeForce GT)</li><li id="e5fe" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">为您的显卡找到最新稳定版本的驱动程序并安装它们</li></ol><p id="3d28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(你一试 1 就知道要做 2 了，失败了(！)</p><p id="2eaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我为你工作——太棒了，做一个</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="0633" class="nm lw it ni b gy nn no l np nq">sudo reboot</span></pre><p id="58d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以走了！</p><h1 id="4534" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">如果您的驱动程序安装失败并且 GUI 崩溃</h1><p id="db69" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您的 GUI 由于某种原因挂起，或者进程没有成功完成，切换回 Xorg 并重新安装稳定的驱动程序。如果你不这样做，你的 GUI 在重启时会变得一团糟。</p><p id="c81f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的例子中，重启失败了。它把我带到一个空白屏幕上闪烁的光标，就像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/041d7128f21e8190116bb2e925620bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLPrTPSGHahdsx7pXhoGFw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">:(图片作者</p></figure><p id="4504" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了走出这个深渊，按 ctrl + F1(或者 F2，3，4，5，6，7)直到其中一个起作用。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="5fc0" class="nm lw it ni b gy nn no l np nq">ctrl + F1</span></pre><p id="8bac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将从那里进入一个常规的命令行界面。使用您的用户名和密码登录。然后，执行以下命令:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="5cf2" class="nm lw it ni b gy nn no l np nq">sudo apt-get purge lightdm<br/>sudo apt-get update<br/>sudo apt-get install lightdm<br/>dpkg-reconfigure lightdm<br/>sudo reboot</span></pre><p id="9def" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是因为 Ubuntu 的显示是由 lightdm 包管理的，失败了。您正在清除并重新安装它以修复这些问题。</p><p id="0185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您重新配置 lightdm 时，系统会询问您是想继续使用 lightdm 还是换成 GDM3。我留在了 lightdm，因为我更熟悉(网上很多人抱怨 gdm 是一个管理 NVIDIA 驱动程序的经理)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/64f62ef7dff4298d9464a810fbfb6ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*Ol2nwCBKiS4-CjUVzE6FAg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图:lightdm 重新配置</p></figure><p id="e0da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此时，我欣喜若狂，因为一切似乎都正常，我来到了我的登录屏幕。</p><p id="035b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是当我输入我的证书时，我的电脑决定一次又一次地询问我的证书。我陷入了一个登录循环！！</p><p id="aa3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nt">注意:如果您的 dpkg 重新配置在这一行失败，</em></p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="1cdd" class="nm lw it ni b gy nn no l np nq">dpkg-reconfigure lightdm</span></pre><p id="9138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行这个，你应该没问题:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="3280" class="nm lw it ni b gy nn no l np nq">sudo dpkg --configure -a</span></pre><h1 id="98fa" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">登录循环和出路</h1><p id="ed87" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你不能登录到你的帐户，但图形用户界面是回来了，你必须修复你的驱动程序从命令行(你打破了他们在第 1 步！！！)</p><p id="3f89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以现在，按 Ctrl+F3 重新控制你的命令行。(使用 Alt+箭头键，可以在屏幕之间切换:登录、命令行等。).使用您的凭据登录。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="e9b9" class="nm lw it ni b gy nn no l np nq">Ctrl+F3</span></pre><p id="5316" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里有两个可能的故障源:</p><ol class=""><li id="6e01" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">。x 权限混乱</li><li id="e38c" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">NVIDIA 驱动程序被搞乱了</li></ol><p id="7a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的案例中，我们知道是司机。如果您想检查您的权限，请执行以下操作:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="9312" class="nm lw it ni b gy nn no l np nq">ls -lA</span></pre><p id="effb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在寻找这条线:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="1c6f" class="nm lw it ni b gy nn no l np nq">-rw — — — — 1 user user 79 Sep 3 19:56 .Xauthority</span></pre><p id="384d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果不是您的用户名必须在哪里，您会看到:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="47d2" class="nm lw it ni b gy nn no l np nq">-rw — — — — 1 root root 79 Sep 3 19:56 .Xauthority</span></pre><p id="5bcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你必须:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="ccfb" class="nm lw it ni b gy nn no l np nq">chown username:username .Xauthority</span></pre><p id="a148" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有你的权限，你可以登录！</p><p id="3ecd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果这不是问题所在，请重新安装驱动程序:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="e9a4" class="nm lw it ni b gy nn no l np nq">sudo add-apt-repository ppa:graphics-drivers/ppa<br/>sudo apt update</span></pre><p id="82e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在寻找可用的驱动程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/7a951464ad18f3986c8712bfb1c13545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4h7tsZIXozUKHMPIJiXRQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者截图</p></figure><p id="6980" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用的是第三方免费推荐的驱动。安装它(替换最后的<em class="nt">你的-Nvidia-driver-这里的</em>与它的实际名称从上面的结果):</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="7eca" class="nm lw it ni b gy nn no l np nq">sudo apt install your-nvidia-driver-here</span></pre><p id="ded7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果这成功了，不仅你的 GUI 回来了，而且你的显卡硬件也有了更好的驱动程序！</p><p id="d6f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">做一个:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="c21a" class="nm lw it ni b gy nn no l np nq">sudo reboot</span></pre><p id="ef67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个应该行！</p><p id="8e84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的电脑现在工作起来就像一台普通的电脑，并且不需要太长时间就能启动。如果你有类似的问题，希望这有所帮助！</p></div></div>    
</body>
</html>