<html>
<head>
<title>How to download the public companies’ earnings calendar in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python下载上市公司的收益日历</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-download-the-public-companies-earnings-calendar-with-python-9241dd3d15d?source=collection_archive---------23-----------------------#2020-05-17">https://towardsdatascience.com/how-to-download-the-public-companies-earnings-calendar-with-python-9241dd3d15d?source=collection_archive---------23-----------------------#2020-05-17</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><figure class="iu iv gp gr iw ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi it"><img src="../Images/489d7a8ddff7b078ec8a185f001d4289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MrrGDRZONALmqhr49vHvIA.jpeg"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated">威廉·艾文在<a class="ae ji" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><div class=""/><div class=""><h2 id="13e1" class="pw-subtitle-paragraph ki jk jl bd b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dk translated">用几行代码了解公司的最新收益</h2></div><p id="c99c" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在撰写本文时，我们目前正接近Q1 2020财报季的尾声。对于许多投资者和量化金融爱好者来说，这是一个特别有趣的时期，有许多短期投资机会。这就是为什么在本文中，我想简要介绍收益季节的概念，并展示如何使用Python轻松提取所有重要信息。</p><h1 id="5ada" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">什么是收益季节？</h1><p id="c72d" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">术语<strong class="lc jm">财报季</strong>指的是一年中大多数上市公司向公众发布季度公司财报的时间段。收益季节发生在每个财政季度结束后的几个月，因此这将对应于1月、4月、7月和10月。通常，收益季节持续约6周，之后报告的收益补贴数量为淡季频率(仍有一些公司报告淡季，因为它们的财务日历可能与大多数略有不同)。</p><p id="ffd7" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">为什么财报季对潜在投资者来说是一个重要时刻？仅仅是因为在给定公司发布收益的日期前后(主要是在当天)，人们可以预期股票会有一些重大的价格变动。这是因为上市公司报告其财务和一般情况:上一季度的利润/亏损、组织的任何重大变化等。金融分析师利用这些信息评估股票的<strong class="lc jm">内在价值——以确定其当前市场价格是高估还是低估。这反过来又是投资者买入/卖出/持有股票的潜在信号。</strong></p><p id="b305" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">大多数公司都在网站上为潜在/当前投资者开辟了一个专用部分，让他们可以访问收益报告以及即将发布的收益报告的日期。自然，从单个网站获取信息是不可行的(或者至少这不是一次愉快的经历)。这就是为什么我们将参考流行的金融数据来源——雅虎！金融。下面你可以看到一张来自当前收益日历的图片。</p><figure class="mu mv mw mx gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi mt"><img src="../Images/8fd96939fe9ae2b783740e9dd9bd34ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O6vP9FtaG8NNSa09VLDZkg.png"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated"><a class="ae ji" href="https://finance.yahoo.com/calendar/earnings/" rel="noopener ugc nofollow" target="_blank">雅虎截图！财务收益日历</a></p></figure><p id="224e" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">在我之前的一篇文章中，我展示了如何利用一些流行的Python库来轻松下载与股票价格相关的信息(以及一些关于公司本身的附加信息)。在本文中，我用一个名为<code class="fe my mz na nb b">yahoo-earnings-calendar</code>的新库来扩展这个工具包(是的，这个名字是不言自明的)。与前面描述的解决方案相比，它确实有一些优势，您将在下面看到。</p><h1 id="4d65" class="lw lx jl bd ly lz ma mb mc md me mf mg kr mh ks mi ku mj kv mk kx ml ky mm mn bi translated">使用Python下载收入日历</h1><p id="1718" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">除了标准库，我们需要通过在终端中运行下面一行代码来安装<code class="fe my mz na nb b">yahoo_earnings_calendar</code>:</p><pre class="mu mv mw mx gt nc nb nd ne aw nf bi"><span id="f891" class="ng lx jl nb b gy nh ni l nj nk">pip install yahoo_earnings_calendar</span></pre><p id="b39d" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">完成后，我们导入本文中使用的所有库:</p><figure class="mu mv mw mx gt ix"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="bfdc" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">下面，我们将介绍下载收入日历的三种可用方法。</p><h2 id="4ca6" class="ng lx jl bd ly nn no dn mc np nq dp mg lj nr ns mi ln nt nu mk lr nv nw mm nx bi translated">下载特定日期的收入</h2><p id="2504" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">我们探索的第一种方法用于下载特定日期的收入。为了下载数据，我们首先使用<code class="fe my mz na nb b">datetime</code>库定义日期。在本例中，我们使用当天(2020年5月15日)。然后，我们实例化一个<code class="fe my mz na nb b">YahooEarningsCalendar</code>类的对象。使用<code class="fe my mz na nb b">earnings_on</code>方法，我们以字典列表的形式下载数据。最后，我们将下载的数据存储在一个<code class="fe my mz na nb b">pandas.DataFrame</code>中。</p><figure class="mu mv mw mx gt ix"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="57b3" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">运行代码会生成<code class="fe my mz na nb b">DataFrame</code>的预览。</p><figure class="mu mv mw mx gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi ny"><img src="../Images/7403c24e10addc555715e66785f067b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQ4_hcPB9gj_QXEHKgtS-g.png"/></div></div></figure><p id="fb1f" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><code class="fe my mz na nb b">startdatetimetype</code>列包含有关收益电话会议时间的信息。传统上，收益(以及关于公司状况的任何其他重要信息)是在与感兴趣的投资者召开的收益电话会议上宣布的。综上所述，这是向公众公布收益的时候。</p><p id="dcf5" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated"><code class="fe my mz na nb b">startdatetimetype</code>栏的图例:</p><ul class=""><li id="bd1a" class="nz oa jl lc b ld le lg lh lj ob ln oc lr od lv oe of og oh bi translated">蒙特利尔银行——开市前</li><li id="46e1" class="nz oa jl lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">AMC——收市后</li><li id="92ba" class="nz oa jl lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">TAS/TNS —时间未指定</li></ul><p id="a3e8" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">通过运行<code class="fe my mz na nb b">df_earnings.shape</code>，我们看到<code class="fe my mz na nb b">DataFrame</code>有119行，这与上面的截图一致。以这种方式下载日历的一个潜在缺点是，我们只能获得美国公司的收益数据。</p><figure class="mu mv mw mx gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi on"><img src="../Images/068ffb4d5c803d93672497de4dbe58aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuQQv97UGNDZ9LKgnQCYKQ.png"/></div></div><p class="je jf gj gh gi jg jh bd b be z dk translated"><a class="ae ji" href="https://finance.yahoo.com/calendar/earnings/" rel="noopener ugc nofollow" target="_blank"> Yahoo！财务收益日历</a></p></figure><p id="8008" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这是雅虎上使用的过滤器的默认设置。财经网站。下载非美国公司信息最简单、最可靠的方法是使用股票代码。我们将在下面讨论这种方法。</p><h2 id="a266" class="ng lx jl bd ly nn no dn mc np nq dp mg lj nr ns mi ln nt nu mk lr nv nw mm nx bi translated">下载一系列日期的收入</h2><p id="9ea7" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">下载一系列日期的日历与我们已经描述过的非常相似。这一次，我们使用<code class="fe my mz na nb b">earnings_between</code>方法并提供感兴趣的时间段的开始和结束日期。对于下面的例子，我们下载未来7天的收益日期。</p><figure class="mu mv mw mx gt ix"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="cbcd" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">这次<code class="fe my mz na nb b">earnings_df</code>包含312个位置。</p><p id="3577" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">处理收入数据时要考虑的一个重要因素是日历会随着时间的推移而变化。因此，在提前几周/几个月下载收益的情况下，您可能希望不时刷新下载，以确保数据仍然有效。</p><h2 id="5f1f" class="ng lx jl bd ly nn no dn mc np nq dp mg lj nr ns mi ln nt nu mk lr nv nw mm nx bi translated">下载特定产品的收益</h2><p id="b37f" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">最后，我们下载特定产品的收益日期，在本例中是Twitter。我们通过使用<code class="fe my mz na nb b">get_earnings_of</code>方法并提供股票代码来做到这一点。这次不同的是，请求将返回过去和未来收入的列表。这就是为什么我们从时间戳字符串中提取日期(它以<a class="ae ji" href="http://en.wikipedia.org/wiki/ISO_8601" rel="noopener ugc nofollow" target="_blank"> ISO-8601 </a>格式存储)并使用<code class="fe my mz na nb b">between</code>方法只过滤掉未来180天的收益。</p><figure class="mu mv mw mx gt ix"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="27ac" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">代码返回下表，其中包含Twitter在未来180天内的两个收益发布日期。</p><figure class="mu mv mw mx gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi oo"><img src="../Images/284eb66b64536b12ebe4d928ca0995a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDbHTwivQF-dDCjRTJpluA.png"/></div></div></figure><h2 id="6892" class="ng lx jl bd ly nn no dn mc np nq dp mg lj nr ns mi ln nt nu mk lr nv nw mm nx bi translated">结论</h2><p id="620c" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">在这篇文章中，我解释了什么是收益季节，以及如何从Yahoo！金融。</p><p id="1339" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">有了可以在Python中使用的数据，我可以想到一些潜在的用例:</p><ul class=""><li id="7a9e" class="nz oa jl lc b ld le lg lh lj ob ln oc lr od lv oe of og oh bi translated">建立一个自动的电子邮件/Slack机器人通知你相关的收益发布。</li><li id="3504" class="nz oa jl lc b ld oi lg oj lj ok ln ol lr om lv oe of og oh bi translated">在用于预测股票价格的ML模型中包含收益发布日期。例如，你可以在<a class="ae ji" href="https://facebook.github.io/prophet/" rel="noopener ugc nofollow" target="_blank">脸书的预言</a>中指出收益日期作为转折点。</li></ul><p id="ca2a" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">就代码行而言,<code class="fe my mz na nb b">yahoo-earnings-calendar</code>库相当紧凑，所以我强烈建议检查代码，以了解数据实际上是如何从Yahoo！金融。这可能是特别重要的，因为雅虎！倾向于频繁更改网站，这可能导致库变得不可用，至少在修复之前是如此。这就是为什么在将基于它的任何代码投入生产时都应该小心谨慎。此外，熟悉用于抓取数据的方法无疑是有意义的，因此您可以在作者修复任何问题之前修复它们。并且您可以随时使用该更新进行拉取请求:)</p><p id="1f7b" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">你可以在我的<a class="ae ji" href="https://github.com/erykml/medium_articles/blob/master/Quantitative%20Finance/earnings_calendar.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到本文使用的代码。一如既往，我们欢迎任何建设性的反馈。你可以在推特或评论中联系我。</p></div><div class="ab cl op oq hz or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="io ip iq ir is"><p id="6e62" class="pw-post-body-paragraph la lb jl lc b ld le km lf lg lh kp li lj lk ll lm ln lo lp lq lr ls lt lu lv io bi translated">不久前，我出版了一本关于使用Python解决金融领域实际任务的书。如果你感兴趣，我在<a class="ae ji" rel="noopener" target="_blank" href="/introducing-my-book-python-for-finance-cookbook-de219ca0d612">贴了一篇文章</a>介绍这本书的内容。你可以在亚马逊或者Packt的网站上买到这本书。</p></div><div class="ab cl op oq hz or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="io ip iq ir is"><h1 id="6a80" class="lw lx jl bd ly lz ow mb mc md ox mf mg kr oy ks mi ku oz kv mk kx pa ky mm mn bi translated">参考</h1><p id="e34a" class="pw-post-body-paragraph la lb jl lc b ld mo km lf lg mp kp li lj mq ll lm ln mr lp lq lr ms lt lu lv io bi translated">[1]雅虎！收益日历刮刀— <a class="ae ji" href="https://github.com/wenboyu2/yahoo-earnings-calendar" rel="noopener ugc nofollow" target="_blank"> GitHub </a></p></div></div>    
</body>
</html>