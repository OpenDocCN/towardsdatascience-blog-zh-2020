<html>
<head>
<title>How to Resize Images Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Python 调整图像大小</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-resize-images-using-python-8aaba74602ed?source=collection_archive---------13-----------------------#2020-08-17">https://towardsdatascience.com/how-to-resize-images-using-python-8aaba74602ed?source=collection_archive---------13-----------------------#2020-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="72ac" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">“可扩展”的技术</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ebef15e74720f7ce3010ffb9c716e578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EflcM8O7rl8GS1Kw"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@amir_v_ali?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿米拉里·米尔哈西米安</a>拍摄的照片</p></figure><p id="62d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以肯定地说，每个“电脑人”都曾经需要调整图像的大小。MacOS 的预览版可以做到；<a class="ae kv" href="https://github.com/microsoft/PowerToys" rel="noopener ugc nofollow" target="_blank"> Windows PowerToys </a>也可以。</p><p id="14ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你懂 Photoshop 或者 Gimp，那么你和我……我们不一样。命令行实用程序？好吧，现在我可以理解了。</p><p id="d3a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">幸运的是，图像处理和命令行工具是 Python 的两个专长。</p><p id="5025" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文旨在向您展示三件事:</p><ol class=""><li id="7b76" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">什么是图像的基础知识。</li><li id="9e23" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">用于处理图像的 Python 库。</li><li id="1af7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">您可以在自己的项目中使用的代码。</li></ol><p id="99e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将要构建的命令行程序可以一次调整一个或多个图像文件的大小。</p><p id="0c3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们跳进来吧！</p><h1 id="4140" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">创建图像</h1><p id="94af" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于这个例子，我们将创建我们自己的图像，而不是找到一个真实的图像来操纵。</p><p id="1d47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么？因为我不得不把事情复杂化，这就是原因！</p><p id="2982" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，创造我们自己的图像是一个很好的方式来说明图像到底是什么。这个调整大小的程序可以在 Instagram 上运行。</p><p id="36aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么，什么是图像呢？在 Python 数据术语中，图像是整数元组列表的列表。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="cf93" class="ni mh iq ne b gy nj nk l nl nm">image = list[list[tuple[*int, float]]]</span></pre><p id="c12a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">NumPy <em class="nn"> esque </em>定义将是一个 shape (h，w，4)的二维数组，其中<code class="fe no np nq ne b">h</code>是高(上下)的像素数，<code class="fe no np nq ne b">w</code>是横(从左到右)的像素数。</p><p id="ef75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，图像是像素(单元)的列表(行)的列表(整个图像)。每个像素是一个由 3 个整数和 1 个可选浮点数组成的序列:红色通道、绿色通道、蓝色通道、alpha(可选的浮点数)。红色、绿色、蓝色通道(RGB)的值从 0 到 255。</p><p id="c49d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从现在开始，为了简单起见，我们将讨论没有 alpha 通道的彩色图像。Alpha 是像素的透明度。图像也可以只有一个通道，其值从 0 到 255。这就是灰度图像，也就是黑白图像。但这是真实的世界…我们用彩色图像工作！</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="cf0e" class="ni mh iq ne b gy nj nk l nl nm">import matplotlib as plt<br/>​<br/>pixel: tuple = (200, 100, 150)<br/>plt.imshow([[list(pixel)]])</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/de718246349dbfcb9b9772e79e7e0776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-bTT1Wx9e6bY-pZFknEKKQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从 Python 代码渲染的单个像素。</p></figure><p id="02ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很性感。</p><h1 id="b695" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">用纯 Python 制作图像</h1><p id="893e" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Vanilla Python 完全能够创建图像。为了显示它，我将使用<code class="fe no np nq ne b">matplotlib</code>库，您可以使用:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="4e75" class="ni mh iq ne b gy nj nk l nl nm">pip install matplotlib</span></pre><p id="6abe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建像素:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="5afa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建图像:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/1b02e12e8015572aabaa20c9cacf135e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rG8gu1SSUcU_zQgEU78C4g.png"/></div></div></figure><p id="561e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是渲染的图像。在幕后，数据看起来是这样的(对于 90x90):</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="439f" class="ni mh iq ne b gy nj nk l nl nm">[[[234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [234, 162, 33],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [255, 0, 0],<br/>  [234, 162, 33],<br/>  ...</span></pre><p id="7bbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了一个图像，让我们开始调整它的大小！</p><h1 id="84c5" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">在普通 Python 中调整大小</h1><p id="9e77" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">心理！我们将<em class="nn">而不是</em>用 Python 写一个调整图像大小的算法。</p><p id="3706" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么？</p><p id="4345" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TLDR:工作量太大了。</p><p id="2430" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">图像处理算法中有太多的东西。有些人把他们的生命奉献给了它。重采样——用缩小图像中的一个像素代替高分辨率图像中的许多像素——本身就是一个巨大的话题。如果你想自己看看，在<code class="fe no np nq ne b">path/to/site-packages/PIL</code>安装 Pillow 的时候可以查看一下 Pillow 的源代码中的<code class="fe no np nq ne b">Image.py</code>。</p><p id="ac2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有像抗锯齿和缩小差距这样的优化…这是无止境的。我们将站在巨人的肩膀上，这意味着相信计算机视觉领域的杰出工作，并无耻地调用一行程序来解决我们的问题。</p><blockquote class="nv nw nx"><p id="a76b" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">如果您有兴趣了解更多关于处理图像时幕后发生的事情，我鼓励您更多地查看“机器视觉”主题！这绝对是一个蓬勃发展的领域，有比一个人有更多的时间去探索。</p><p id="8fc9" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">变得足够好，有一大群公司愿意为你的计算机视觉专业知识支付高价。自动驾驶、物联网、监控，应有尽有；都是从根本上依赖于处理图片(通常用 Python 或者 C++)。</p><p id="c6f9" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">一个很好的起点是查看<a class="ae kv" href="https://scikit-image.org/" rel="noopener ugc nofollow" target="_blank"> scikit-image </a>。</p></blockquote><h1 id="738e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">OpenCV</h1><p id="7981" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><a class="ae kv" href="https://opencv.org/opencv-3-3/" rel="noopener ugc nofollow" target="_blank"> OpenCV </a>是图像处理的终极目标。OpenCV 是用 C++编写并移植到 Python 的，它运行在你自制的自动驾驶汽车的后备箱中，用于车道检测。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="e2c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用于<code class="fe no np nq ne b">interpolation</code>参数的选项是<code class="fe no np nq ne b">cv2</code>包中提供的标志之一:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="29fa" class="ni mh iq ne b gy nj nk l nl nm">INTER_NEAREST – a nearest-neighbor interpolation <br/>INTER_LINEAR – a bilinear interpolation (used by default) <br/>INTER_AREA – resampling using pixel area relation. It may be a preferred method for image decimation, as it gives moire’-free results. But when the image is zoomed, it is similar to the INTER_NEAREST method. <br/>INTER_CUBIC – a bicubic interpolation over 4×4 pixel neighborhood INTER_LANCZOS4 – a Lanczos interpolation over 8×8 pixel neighborhood</span></pre><p id="8fbb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将返回:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/67822cd3737165d84b60d7bcb2755d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiNJE48OQksDbm0KHp-xaw.png"/></div></div></figure><p id="e73b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它达到了我们的预期。图像从 900 像素高、900 像素宽变成了 450 X 450(仍然是三个颜色通道)。上面的截图看起来不太好，因为朱庇特实验室的<code class="fe no np nq ne b">matplotlib</code>着色。</p><h1 id="33e9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">枕头</h1><p id="7466" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><code class="fe no np nq ne b">pillow</code>库在<code class="fe no np nq ne b">Image</code>类上有一个调整大小的方法。它的论据是:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="5c35" class="ni mh iq ne b gy nj nk l nl nm">size: (width, height)<br/>resample: Defaults to BICUBIC. A flag for the resampling algorithm.<br/>box: Defaults to None. A 4-tuple defining a rectangle of the image to work on within parameters (0, 0, width, height).<br/>reducing_gap: Defaults to None. A resampling optimization algorithm to make the output look better.</span></pre><p id="1dd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里它是为我们的目的而设的一个函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="1131" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用 Pillow 的功能<em class="nn">与 OpenCV 非常</em>相同。唯一的区别是<code class="fe no np nq ne b">PIL.Image.Image</code>类有一个属性<code class="fe no np nq ne b">size</code>来访问图像的<code class="fe no np nq ne b">(width, height)</code>。</p><p id="ff4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果是:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/f68967bd6bdd055fc763f654710261ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfIf7sI8PbtJPCyHoBQdOw.png"/></div></div></figure><p id="5c8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意<code class="fe no np nq ne b">show</code>方法如何打开操作系统的默认程序来查看图像的文件类型。</p><h1 id="6b9c" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">创建命令行程序</h1><p id="7a67" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在我们有了一个调整图像大小的函数，是时候用一个运行 resize 的界面来完善它了。</p><p id="b391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调整一个图像的大小是好的。但是，如果我们要经历所有这些麻烦，我们也需要批量处理图像的能力。</p><p id="565d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将要构建的界面将是最简单的:一个命令行工具。</p><p id="bd66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://palletsprojects.com/" rel="noopener ugc nofollow" target="_blank">托盘项目</a>是 Flask(Jinja 模板引擎)背后的天才社区，与我们现在相关:<a class="ae kv" href="https://click.palletsprojects.com/en/7.x/" rel="noopener ugc nofollow" target="_blank">点击</a>。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="13c1" class="ni mh iq ne b gy nj nk l nl nm">pip install click</span></pre><p id="f133" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Click 是一个制作命令行程序的库。这比使用简单的<code class="fe no np nq ne b">argparse</code>或者在<code class="fe no np nq ne b">if __name__ == '__main__':</code>语句中加入一些 if-then 逻辑要好得多。因此，我们将使用点击来装饰我们的图像大小。</p><p id="e3fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是从命令行调整图像大小的完整脚本！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="5846" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">命令行程序从入口点函数<code class="fe no np nq ne b">main</code>运行。参数由<code class="fe no np nq ne b">click.option</code>装饰者传递给<code class="fe no np nq ne b">main</code>:</p><ul class=""><li id="e061" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr od ly lz ma bi translated"><code class="fe no np nq ne b">pattern</code>使用一个 Python / <a class="ae kv" href="https://github.com/google/re2" rel="noopener ugc nofollow" target="_blank"> RE2 </a>样式的字符串来定位相对于脚本运行目录的一个或多个图像。<code class="fe no np nq ne b">--pattern="../catpics/*.png"</code>将向上一级并找到<code class="fe no np nq ne b">catpics</code>文件夹，并返回该文件夹中带有<code class="fe no np nq ne b">.png</code>图像扩展名的任何文件。</li><li id="055e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><code class="fe no np nq ne b">scale</code>接受一个浮点数或整数，并将其传递给<code class="fe no np nq ne b">resize</code>函数。这个脚本很简单，这意味着没有数据验证。如果你添加代码，检查<code class="fe no np nq ne b">scale</code>是一个介于 5 和 99 之间的数字(合理的缩小参数)。现在，你可以通过<code class="fe no np nq ne b">-s "chicken nuggets"</code>，直到 Pillow 停止程序才会抛出异常。</li><li id="c3ad" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><code class="fe no np nq ne b">quiet</code>是一个选项参数，用于在程序运行时不希望文本打印为标准输出。</li></ul><p id="ca2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从命令行运行程序:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="7f09" class="ni mh iq ne b gy nj nk l nl nm">python resize.py -s 35 -p "./*jpg"</span></pre><p id="bada" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="7980" class="ni mh iq ne b gy nj nk l nl nm">$ py resize.py -p "checkers.jpg" -s 90<br/>resized image saved to checkers_90_810x810.jpg.</span></pre><p id="56de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正在检查文件夹:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="04ea" class="ni mh iq ne b gy nj nk l nl nm">$ ls -lh checkers*<br/>-rw-r--r-- 1 nicho 197609 362K Aug 15 13:13 checkers.jpg<br/>-rw-r--r-- 1 nicho 197609 231K Aug 15 23:56 checkers_90_810x810.jpg</span></pre><p id="d4ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不错！所以程序缩小了图像，给了它一个描述性的标签，我们可以看到文件大小从大约 362KB 变成了大约 231KB！</p><p id="64c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了看到程序一次处理多个文件，我们将再次运行它:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="adf9" class="ni mh iq ne b gy nj nk l nl nm">$ py resize.py --pattern="checkers*" --scale=20<br/>resized image saved to checkers_20_180x180.jpg.<br/>resized image saved to checkers_90_810x810_20_162x162.jpg.</span></pre><p id="5e86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">和文件系统:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="c5b2" class="ni mh iq ne b gy nj nk l nl nm">$ ll -h checkers*<br/>-rw-r--r-- 1 nicho 197609 362K Aug 15 13:13 checkers.jpg<br/>-rw-r--r-- 1 nicho 197609 1.8K Aug 16 00:23 checkers_20_180x180.jpg<br/>-rw-r--r-- 1 nicho 197609 231K Aug 15 23:56 checkers_90_810x810.jpg<br/>-rw-r--r-- 1 nicho 197609 1.8K Aug 16 00:23 checkers_90_810x810_20_162x162.jpg</span></pre><p id="4b6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，递归运行这个程序只适用于疯狂的人，但是它表明你可以同时运行任意数量的匹配模式的图像。去吧，自动化！</p><blockquote class="nv nw nx"><p id="d5d1" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated"><strong class="ky ir">奖金</strong></p><p id="b52a" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">点击是一个神奇的工具。它可以包装一个函数，并从一个<code class="fe no np nq ne b">if __name__ == '__main__':</code>语句“以正常方式”在一个模块中运行。(而实际上，它甚至不需要那个；你可以定义和修饰你想要运行的函数。)但是它真正的亮点是将脚本作为一个包安装。</p><p id="1f60" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">这是通过 Python 自带的<code class="fe no np nq ne b">setuptools</code>库完成的。</p><p id="f714" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">这是我的<code class="fe no np nq ne b">setup.py</code>。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><blockquote class="nv nw nx"><p id="e3f5" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">使用以下命令构建可执行文件/包装包:</p><p id="ed6e" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated"><code class="fe no np nq ne b"><em class="iq">pip install -e .</em></code></p><p id="dde0" class="kw kx nn ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">现在你可以不使用<code class="fe no np nq ne b">python</code>命令来调用这个脚本了。另外——作为一个额外的奖励——如果你将新的可执行文件添加到路径中的一个文件夹中，你可以从你计算机上的任何地方调用这个程序，就像<code class="fe no np nq ne b">resize -p *jpg -s 75</code>！</p></blockquote><h1 id="471a" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="f756" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">本教程变化很大:首先浏览一些第三方 Python 库进行图像处理。然后使用 Python 从头构建一个图像，以更好地理解图像实际上是什么。然后，选择其中一个选项并构建一个脚本来缩小图像，同时保持它们的比例。最后—<em class="nn">吸入</em>——将所有这些都放在一个命令行实用程序中，使用<code class="fe no np nq ne b">click</code>接受可配置的选项。</p><p id="9564" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再多说几句我就完事了，我保证。</p><p id="19d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我只想说:我和你一起一口气谈完所有这些话题是有原因的。这个原因不是因为我有多动症。</p><p id="4e12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是因为编程思路需要从想法到执行的闭环。关于如何用 Python 做一些事情的一次性概念是好的…但是归根结底，编程语言是一种工具。它需要帮助我们完成有价值的事情。</p><p id="9456" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你开始觉得教程“又一件你必须学的东西”压得你喘不过气来时，这意味着是时候放下阅读，开始为一些小项目编码了。一次就能完成的事情，感觉自己有进步。</p><p id="1c9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">记住，编写代码可能需要几个小时或几天的时间。然而运行只需要几毫秒。你做的程序不一定要大。你做的任何一件事，只要能节省你的时间或让你产出更多，都有可能让你受益终生！</p><h1 id="59bb" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">资源</h1><ul class=""><li id="3a4e" class="ls lt iq ky b kz my lc mz lf oe lj of ln og lr od ly lz ma bi translated"><a class="ae kv" href="https://click.palletsprojects.com/en/7.x/" rel="noopener ugc nofollow" target="_blank">点击</a></li><li id="4347" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><a class="ae kv" href="https://matplotlib.org/3.2.0/tutorials/introductory/images.html" rel="noopener ugc nofollow" target="_blank"> matplotlib </a></li><li id="3df7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><a class="ae kv" href="https://docs.opencv.org/4.4.0/" rel="noopener ugc nofollow" target="_blank"> opencv </a></li><li id="4ca6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><a class="ae kv" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">枕头</a></li><li id="a557" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr od ly lz ma bi translated"><a class="ae kv" href="https://scikit-image.org/" rel="noopener ugc nofollow" target="_blank"> scikit-image </a></li></ul></div></div>    
</body>
</html>