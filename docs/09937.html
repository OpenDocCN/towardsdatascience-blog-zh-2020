<html>
<head>
<title>Learning Python 10 minutes a day #11</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每天 10 分钟学习 Python 10</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/learning-python-10-minutes-a-day-11-d44d7df65dac?source=collection_archive---------72-----------------------#2020-07-13">https://towardsdatascience.com/learning-python-10-minutes-a-day-11-d44d7df65dac?source=collection_archive---------72-----------------------#2020-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/861a215f083567059b0616591c415d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kjLLayjOlfsSupnd.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@jeremy_justin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杰瑞米·拉帕克</a>在<a class="ae jg" href="/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的原始照片。</p></figure><h2 id="83a4" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/10minutespython" rel="noopener" target="_blank">每天 10 分钟 Python 速成班</a></h2><div class=""/><div class=""><h2 id="b1be" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">用 Python 读写文件</h2></div><p id="8b06" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是一个<a class="ae jg" href="https://python-10-minutes-a-day.rocks" rel="noopener ugc nofollow" target="_blank">系列</a>10 分钟的简短 Python 文章，帮助您提高 Python 知识。我试着每天发一篇文章(没有承诺)，从最基础的开始，到更复杂的习惯用法。如果您对 Python 的特定主题有任何问题或要求，请随时通过 LinkedIn 联系我。</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/22089a5486e87db00ca6c2c236e94c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgJGVwtMiq2j_AJsOiRrdg.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">imgflp.com 的热图生成器</p></figure><p id="42b4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">Python 可以被看作是一把瑞士军刀，附带了许多方便的工具来快速完成工作。一个经常出现的任务是与文件交互。从文本文件加载数据以用于分析，或将计算结果写入日志文件等任务。文件可以被看作是一大串数字，它们被保存在磁盘上的 0 和 1(二进制)中。当人与文件交互时，格式被翻译回我们理解的东西，例如 ASCII 字符(对于一个简单的文本文件)。所有这些实际的存储和翻译都是由我们的操作系统完成的。</p><p id="5b99" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">有不同类型的文件，例如文本文件、二进制文件、图像等。每种类型都有自己的格式，可能需要特定的处理方法。例如，图像文件可以分成不同的部分:存储一般元数据的头部和存储图像实际数据的数据部分(很可能使用某种压缩)。在一个简单的文本文件中，字节代表字符。这些字符如何被编码取决于所使用的编码。早期使用的是 ASCII，能够表示 128 个字符。如今，UTF-8 是事实上的标准人物代表。这种编码与 ASCII 兼容，但将字符数扩展到超过一百万。UTF-8 使用 8 位进行编码，但可以组合多达 4 个字节来表示一个字符。您可能会想到为文件设置错误的编码会导致错误。尽管如此，从 UTF-8 开始是一个不错的猜测，因为 95%的网络使用这种编码。</p><p id="887e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">处理文本文件时需要注意的另一件事是行尾。虽然这看起来微不足道，但由于历史原因，在如何编码新行方面存在差异。Windows 使用 ASA(美国标准协会)标准，并要求文本文件中的每一行都使用<em class="mi">回车符</em>(表示为<em class="mi"> \r </em>)和<em class="mi">换行符</em>(表示为<em class="mi"> \n </em>)结束。基于 Unix 的系统(包括 Linux 和 Mac)只需要<em class="mi">换行符</em> (ISO 标准)。将文本文件从 Linux 发送到 Windows 可能会有些复杂，反之亦然，所以如果您从另一个系统获得文本文件，请注意。</p><p id="bbf7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于其他文件格式，即非文本文件，您很可能会使用软件包。虽然您可以在<em class="mi">二进制</em>模式下打开文件，但您必须手动处理文件格式。社区已经提供了处理许多文件的包，很可能也是你想要打开的文件格式。例如 hdf5、jpg、json 或 csv，但是还有很多其他的包来帮助处理文件。在本教程中，我们将只关注文本文件。</p><p id="3ae0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要打开文本文件(实际上任何文件都可以打开)，我们使用内置的<em class="mi"> open() </em>函数。该函数至少需要一个文件名作为参数，并返回一个文件对象。它有<em class="mi">模式</em>作为可选的第二个参数，我们可以设置读取、写入和其他一些特殊模式。我们可以使用 file 对象提供的方法与文件进行交互。让我们从几个例子开始:</p><figure class="me mf mg mh gt iv"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="0456" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个例子中，我们以三种不同的模式打开了一个文件。默认情况下，当不提供模式字符串时，文件以读取模式打开(<em class="mi"> r </em>)。这意味着该文件需要存在，否则 Python 将出现错误:“FileNotFoundError”。要写入一个文件，我们必须使用字符串'<em class="mi"> w </em>'显式声明写入模式。现在，如果文件存在，它将被打开写入，如果它不存在，一个新的文件将被创建。小心，因为写模式会覆盖现有文件。要追加现有文件，open 函数具有追加模式(a)。</p><p id="cc42" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">使用<em class="mi">可以将字符串写入文件。写()</em>的方法。<em class="mi"> print() </em>函数自动给字符串添加一个<em class="mi">换行符</em> (\n)。向文件中写入行时，情况并非如此。如果你想有一个新的行，你必须显式地添加特殊字符到字符串中。我们称之为单个字符，因为它将被编码为单个字符。反斜杠是表示特殊字符的特殊字符，像<em class="mi">换行符</em> (\n)或者<em class="mi">制表符</em> (\t)。它也可以用来“转义”字符，意思是将字符用作文本而不是语法。例如，在引号前使用反斜杠，不会将其标识为字符串的开头，而只是作为引号字符(“转义”语法定义)。</p><p id="8f13" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">文件的读取可以使用。read()方法。Python 将文本文件视为可迭代的，并通过换行符(\n)分隔每个项目。因此，我们可以使用 for 循环来遍历整个文件。file 对象还提供了同时处理所有行的方法:<em class="mi"> readlines </em>()和<em class="mi"> writelines </em>()。<em class="mi"> readlines() </em>方法读取由换行符分隔的所有行，并将这些行作为列表返回(包括每个字符串中的\n 指示符)。类似地，<em class="mi"> writelines() </em>方法将字符串列表写入文件。后者不在列表中的每个字符串之间添加<em class="mi">换行符</em>。这可以使用 join 方法来修复:<em class="mi"> '\n '。加入</em>(我的 _ 列表)。</p><p id="cf0d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">处理完一个文件后，您必须关闭 file 对象。如果您不这样做，根据您的操作系统，您可能会丢失数据。一些操作系统缓存必须写入磁盘的数据。当文件关闭时，操作系统会将其作为一个大块写入磁盘，以最大限度地减少磁盘访问。这有助于最大限度地减少 IO 操作，在某些情况下还可以更快。这也意味着您必须确保正确关闭文件。每个 file 对象都有一个. close()方法。通过简单地调用该函数，文件被关闭，所有文件被保存。</p><h1 id="4b5e" class="ml mm jj bd mn mo mp mq mr ms mt mu mv ky mw kz mx lb my lc mz le na lf nb nc bi translated">今天的练习:</h1><p id="cbbe" class="pw-post-body-paragraph lh li jj lj b lk nd kt lm ln ne kw lp lq nf ls lt lu ng lw lx ly nh ma mb mc im bi translated">我从维基百科<a class="ae jg" href="https://en.wikipedia.org/wiki/List_of_wine-producing_regions#Countries" rel="noopener ugc nofollow" target="_blank">复制/粘贴了葡萄酒生产国的数据，并把它们放在一个文本文件中。你可以在这里</a>下载文件<a class="ae jg" href="https://www.dropbox.com/s/dmtqu5dtuom9k74/wine_countries.txt?dl=1" rel="noopener ugc nofollow" target="_blank">，或者自己复制/粘贴表格到一个文件中。这张桌子上有行号、国名和以吨为单位的葡萄酒产量。</a></p><p id="d6dc" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">作业:</strong> <br/>阅读文件，汇总世界上生产的葡萄酒总量。</p><p id="fc6b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">提示</strong>:<br/>——列由一个特殊字符分隔(记住。split()方法？)<br/> -你要把字符串转换成数字。你也注意到令人讨厌的小数点分隔符了吗？(.有一个内置的 sum()可以对你新创建的数字列表求和。</p><p id="d269" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如有任何问题，欢迎通过<a class="ae jg" href="https://www.linkedin.com/in/dennisbakhuis/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p></div></div>    
</body>
</html>