<html>
<head>
<title>Twitter Sentiment Analysis with Tensorflow.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Tensorflow.js进行Twitter情感分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/twitter-sentiment-analysis-with-node-js-ae1ed8dd8fa7?source=collection_archive---------23-----------------------#2020-04-17">https://towardsdatascience.com/twitter-sentiment-analysis-with-node-js-ae1ed8dd8fa7?source=collection_archive---------23-----------------------#2020-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9750" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用NLP技术来了解人们是如何谈论你的品牌的</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2e672d829736f84e1ad119351c153666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vp1M37AGMOFwCvLxVm62IA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:bensonruan.com</p></figure><p id="f21d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">情感分析是分析一篇在线文章(社交媒体帖子、评论)是正面、负面还是中性的过程。在过去的几年中，情感分析领域取得了重大进展，这种技术已经广泛应用于商业和政治领域。</p><p id="c8ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将连接到Twitter API，通过hashtag收集推文，计算每条推文的情感，并构建一个实时仪表板来显示结果。下面是这个应用程序的最终结果，你可以键入你的品牌名称或你感兴趣的东西，看看人们在Twitter上是如何谈论它的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/c4166a17e217ca5c4db906fbc7d5f95d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DkjyDgsE9CSW64alZR8NNg.gif"/></div></div></figure><p id="1a26" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击下面的链接亲自尝试一下:</p><div class="lw lx gp gr ly lz"><a href="https://bensonruan.com/twitter-sentiment-analysis-with-tensorflowjs" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">使用Tensorflow.js - Benson技术进行Twitter情感分析</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">情感分析是分析一篇在线文章(社交媒体帖子、评论)是否积极的过程…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">bensonruan.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="5ffa" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">履行</h1><p id="4864" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">这个工具对于企业监控和理解他们的品牌、产品或服务的社会情绪非常有用。我用<a class="ae ky" href="https://github.com/tensorflow/tfjs-examples/tree/master/sentiment" rel="noopener ugc nofollow" target="_blank"> Tensorflow.js情感模型</a>制作了这个演示。如果你对它是如何建造的感到好奇，请跟随我，我会一步一步地告诉你。</p><h2 id="93cf" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">#第一步:创建一个Twitter应用</h2><p id="484a" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">由于我们希望从Twitter中提取推文来分析情绪，因此，我们需要在Twitter的开发者平台中创建一个应用程序。</p><ul class=""><li id="ac44" class="oe of it lb b lc ld lf lg li og lm oh lq oi lu oj ok ol om bi translated">登录/注册一个Twitter账户</li><li id="c7ba" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">去https://developer.twitter.com/en/apps<a class="ae ky" href="https://developer.twitter.com/en/apps" rel="noopener ugc nofollow" target="_blank"/></li><li id="52fd" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">单击创建应用程序</li><li id="c706" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">填写应用信息表单并创建</li><li id="1149" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">创建应用程序后，导航到<strong class="lb iu">密钥和令牌</strong>选项卡</li><li id="ec0c" class="oe of it lb b lc on lf oo li op lm oq lq or lu oj ok ol om bi translated">生成<strong class="lb iu">消费者API密钥</strong>和<strong class="lb iu">访问令牌&amp;访问令牌秘密</strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/c90dad98e83a27d8f5443cd5e2a9f8e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4WyGB5j8sDvdeZ0eY4JrQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Twitter API密钥和令牌</p></figure><h2 id="f834" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">#第二步:从Twitter上获取推文</h2><p id="a013" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">一旦您创建了Twitter应用程序并生成了API密钥和令牌，就该利用<a class="ae ky" href="https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets" rel="noopener ugc nofollow" target="_blank"> Twitter的搜索API </a>来下拉一些与您正在搜索的标签相匹配的推文了。</p><p id="41be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> PHP </strong></p><p id="8e3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使事情更简单，这里我引用了Twitter API v1.1调用的PHP包装器<a class="ae ky" href="https://github.com/J7mbo/twitter-api-php" rel="noopener ugc nofollow" target="_blank"> twitter-api-php </a>。从上面的库下载TwitterAPIExchange.php，用下面的代码创建一个queryTwitter.php，确保用步骤1中生成的代码替换Twitter API键和令牌。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="26e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Javascript </strong></p><p id="6c2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们编写一个javascript函数向上面的php页面传递一个请求，并检索tweets。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="c53a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每条tweet都是一个对象，具有id、created_at、user…等属性，我们感兴趣的是<code class="fe ov ow ox oy b">"full_text"</code>属性</p><h2 id="6b9b" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">#第三步:加载情感模型</h2><p id="f461" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">只需在html文件的&lt;头&gt;部分包含<code class="fe ov ow ox oy b">tfjs</code>和&lt;的脚本。</p><pre class="kj kk kl km gt oz oy pa pb aw pc bi"><span id="3fdd" class="ns mw it oy b gy pd pe l pf pg">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="<a class="ae ky" href="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/@tensorflow/tfjs</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;</span></pre><p id="401e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者您可以通过npm安装它，以便在TypeScript / ES6项目中使用</p><pre class="kj kk kl km gt oz oy pa pb aw pc bi"><span id="f0e7" class="ns mw it oy b gy pd pe l pf pg">npm install @tensorflow/tfjs</span></pre><p id="f849" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进行情感分析，我们首先需要通过调用<code class="fe ov ow ox oy b">tf.loadLayersModel(url)</code>的API来加载预先训练好的情感模型和元数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="4ac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该模型在IMDB的25000条电影评论上进行训练，这些评论被标记为积极或消极情绪。这个数据集是由Python Keras 提供的<a class="ae ky" href="https://keras.io/datasets/#imdb-movie-reviews-sentiment-classification" rel="noopener ugc nofollow" target="_blank">，模型也是基于</a><a class="ae ky" href="https://github.com/keras-team/keras/blob/master/examples/imdb_cnn.py" rel="noopener ugc nofollow" target="_blank"> imdb_cnn </a>示例在Keras中训练的。</p><h2 id="927a" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">#第四步:情绪分析推文</h2><p id="0331" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">对于每条推文，我们调用Tensorflow.js中的<code class="fe ov ow ox oy b">model.predict(input)</code> API。这将对每条推文文本执行情感分析，返回0到1之间的存储，这表明它是中性的、积极的还是消极的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="21c9" class="ns mw it bd mx nt nu dn nb nv nw dp nf li nx ny nh lm nz oa nj lq ob oc nl od bi translated">#步骤5:在表格和图表中显示结果</h2><p id="6c55" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">现在我们有了推文的情感结果，为了让它看起来更好，更容易捕捉信息，我们把它放在一个表格和一个饼状图中。</p><p id="db30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了推文的情感结果，为了让它看起来更好，更容易捕捉信息，我们把它放在一个表格和一个饼状图中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="becc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于饼图，我使用的是jquery图表库<a class="ae ky" href="https://canvasjs.com/jquery-charts/" rel="noopener ugc nofollow" target="_blank"> canvasjs </a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="b4de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当按下回车键或点击搜索按钮时，上述函数被调用</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="a51e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是代码，恭喜你，你已经建立了你的Twitter情绪分析应用。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4c59" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">GitHub知识库</h1><p id="b65f" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">您可以通过下面的链接下载上述演示的完整代码:</p><div class="lw lx gp gr ly lz"><a href="https://github.com/bensonruan/Sentiment-Analysis" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">本森阮/情感分析</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">使用npm情绪模块的Twitter情绪分析连接到Twitter API，通过标签收集推文，计算…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">github.com</p></div></div><div class="mi l"><div class="ph l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/55285a665254e86889181a15378cfb0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWhQ80v5bBLNnozE"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>拍摄的照片</p></figure><h1 id="7ed7" class="mv mw it bd mx my pj na nb nc pk ne nf jz pl ka nh kc pm kd nj kf pn kg nl nm bi translated">结论</h1><p id="5e91" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">仅使用Tensorflow.js情感CNN模型，这是一种简单的情感分析方法，但无法达到高准确率，约70%。为了提高准确性，您可以研究更复杂的模型，如LSTM。但是，我仍然认为这是一个很好的和方便的模型，并且在某种程度上表明了情绪是积极的还是消极的。</p><p id="c49c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果你喜欢这篇文章，请在脸书或推特上分享。如果你有任何问题，请在评论中告诉我。在<a class="ae ky" href="https://github.com/bensonruan/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae ky" href="https://www.linkedin.com/in/benson-ruan/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上关注我。</p></div></div>    
</body>
</html>