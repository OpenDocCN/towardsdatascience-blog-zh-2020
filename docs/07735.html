<html>
<head>
<title>Direct to Pandas DataFrame</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直接到熊猫数据框</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/direct-to-pandas-dataframe-ab2e97ae7574?source=collection_archive---------43-----------------------#2020-06-09">https://towardsdatascience.com/direct-to-pandas-dataframe-ab2e97ae7574?source=collection_archive---------43-----------------------#2020-06-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="44bd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Chrome DevTools 和 Python 直接从远程 URL 下载和读取数据到熊猫数据框架的 3 分钟指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/18d93915a555e67627489e12bff752c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JaDquAoKZbCb6Xck"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@patrickian4?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">帕特里克·福尔</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="ab5d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">挑战</h1><p id="7cae" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">对于新的数据科学家和软件开发人员来说，从远程 URL 下载数据通常是自动化的首要任务之一。例如，在下图中，我想下载并解析来自 Data.gov<a class="ae kv" href="https://catalog.data.gov/dataset/u-s-hourly-precipitation-data" rel="noopener ugc nofollow" target="_blank">的<em class="mk">每小时降水量 CSV 样本</em>数据，并将其直接解析到熊猫数据帧中。</a></p><p id="5b67" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated"><strong class="lq ir">问题是不清楚如何找到下载按钮重定向到的 URL 路径。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/0d52b0a718a6978933ec7665e93c87fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*duSAEEeZZKwFNW93YvDYcA.png"/></div></div></figure><h1 id="6eaa" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">查找远程 URL 路径</h1><p id="9ed7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">使用 Chrome DevTools(或类似工具)并遵循以下步骤，很容易找到远程 URL 路径。</p><ol class=""><li id="7056" class="mr ms iq lq b lr ml lu mm lx mt mb mu mf mv mj mw mx my mz bi translated">导航到要下载数据的页面。</li><li id="2722" class="mr ms iq lq b lr na lu nb lx nc mb nd mf ne mj mw mx my mz bi translated">用<em class="mk">右键打开 Chrome DevTools 检查</em>或导航到<em class="mk"> Chrome 菜单→更多工具→开发者工具</em>。</li><li id="37cd" class="mr ms iq lq b lr na lu nb lx nc mb nd mf ne mj mw mx my mz bi translated">在 Chrome 开发工具中导航到控制台。您可能会在控制台中看到文本，可以使用<em class="mk">右键→清除控制台来清除。</em></li><li id="668a" class="mr ms iq lq b lr na lu nb lx nc mb nd mf ne mj mw mx my mz bi translated">打开控制台，点击下载按钮或类似按钮。</li><li id="7e20" class="mr ms iq lq b lr na lu nb lx nc mb nd mf ne mj mw mx my mz bi translated">下载按钮重定向到的 URL 路径现在显示在控制台中。</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/ed89166d83143760f12ccf25f7793dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IMwj2mxrVu7j1biaNuozjw.gif"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">使用 Chrome DevTools 控制台查找 URL 路径</p></figure><h1 id="a42d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">直接下载数据到熊猫数据框</strong></h1><p id="775a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">一旦找到远程 URL 路径，就很容易将数据读入 Pandas 数据帧。下面的代码演示了如何解析 CSV 文件，但是对于 JSON、Excel 和其他文件类型来说，这样做也很容易。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从远程 URL 直接读取数据到熊猫数据框</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/cf85828f47aff31750941b2c5bef280a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hTS2IlSYOnjcIrURSg5KyA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">上述代码的输出</p></figure><h1 id="bd55" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">直接批量下载到熊猫数据框</h1><p id="3b9c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">通常你不会自动下载单个文件，而是从一个远程 URL 下载一批文件。例如，下图显示了温哥华国际机场每小时天气数据的<a class="ae kv" href="https://climate.weather.gc.ca/climate_data/hourly_data_e.html?hlyRange=2013-06-11%7C2020-06-07&amp;dlyRange=2013-06-13%7C2020-06-07&amp;mlyRange=%7C&amp;StationID=51442&amp;Prov=BC&amp;urlExtension=_e.html&amp;searchType=stnName&amp;optLimit=yearRange&amp;StartYear=1840&amp;EndYear=2020&amp;selRowPerPage=25&amp;Line=39&amp;searchMethod=contains&amp;Month=6&amp;Day=7&amp;txtStationName=vancouver&amp;timeframe=1&amp;Year=2020" rel="noopener ugc nofollow" target="_blank">下载门户</a>。问题是下载时间为 1 个月，所以如果我想下载 1 年的数据，我需要下载 12 次。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/4e0f35aacf6b55e1b3114063197b88ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RWHjWmCHJwhjX9JsQWvugQ.png"/></div></div></figure><p id="e5b5" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">让我们检查一下<em class="mk">下载数据</em>按钮使用 Chrome DevTools 控制台重定向的远程 URL。</p><blockquote class="nk nl nm"><p id="7450" class="lo lp mk lq b lr ml jr lt lu mm ju lw nn mn lz ma no mo md me np mp mh mi mj ij bi translated"><a class="ae kv" href="https://climate.weather.gc.ca/climate_data/bulk_data_e.html?format=csv&amp;stationID=51442&amp;Year=2020&amp;Month=6&amp;Day=7&amp;timeframe=1&amp;submit=Download+Data" rel="noopener ugc nofollow" target="_blank">" https://climate . weather . GC . ca/climate _ data/bulk _ data _ e . html？format = CSV&amp;station id = 51442&amp;Year = 2020&amp;Month = 6&amp;Day = 7&amp;time frame = 1&amp;submit =下载+数据</a></p></blockquote><p id="840e" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">注意，除了其他唯一标识符之外，还有下载年、月和日。因此，让我们编写一个简短的脚本来下载 1 年的数据，并将其合并到一个单一的熊猫数据帧中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">从远程 URL 读取多个文件的数据并合并</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/93bae092223b7d0ba0a9e3783d0e90a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Yu9sO7R3CsS-8lq7-2iKw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">上述代码的输出</p></figure><h1 id="8794" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="9f43" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">Pandas 是任何数据科学家的必备工具，Chrome DevTools 是工具箱中的绝佳补充。按照上面的步骤，很容易将数据直接下载到 Pandas 数据框架中，并且很容易将其扩展到其他文件类型。</p><p id="8224" class="pw-post-body-paragraph lo lp iq lq b lr ml jr lt lu mm ju lw lx mn lz ma mb mo md me mf mp mh mi mj ij bi translated">编码快乐！</p></div></div>    
</body>
</html>