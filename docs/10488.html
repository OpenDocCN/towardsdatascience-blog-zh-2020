<html>
<head>
<title>Bubble Plots in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib 中的气泡图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bubble-plots-in-matplotlib-3f0b3927d8f9?source=collection_archive---------8-----------------------#2020-07-23">https://towardsdatascience.com/bubble-plots-in-matplotlib-3f0b3927d8f9?source=collection_archive---------8-----------------------#2020-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="197d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过使用 Python 的 Matplotlib 库的例子学习绘制气泡图</h2></div><p id="4065" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">气泡图是散点图的改进版本。在散点图中，有两个维度 x 和 y。在气泡图中，有三个维度 x、y 和 z。其中第三个维度 z 表示权重。这样，气泡图比二维散点图在视觉上提供了更多的信息。</p><h2 id="ad3c" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">数据准备</h2><p id="4d6d" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">对于本教程，我将使用包含加拿大移民信息的数据集。它有 1980 年至 2013 年的数据，包括来自 195 个国家的移民人数。导入必要的包和数据集:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="c3f4" class="le lf it mh b gy ml mm l mn mo">import numpy as np  <br/>import pandas as pd <br/>df = pd.read_excel('<a class="ae mp" href="https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/Canada.xlsx'" rel="noopener ugc nofollow" target="_blank">https://s3-api.us-geo.objectstorage.softlayer.net/cf-courses-data/CognitiveClass/DV0101EN/labs/Data_Files/Canada.xlsx'</a>,<br/>                       sheet_name='Canada by Citizenship',<br/>                       skiprows=range(20),<br/>                       skipfooter=2)</span></pre><p id="55e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据集太大。所以，我不能在这里显示截图。让我们看看列的名称。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="fd9f" class="le lf it mh b gy ml mm l mn mo">df.columns</span><span id="5bbf" class="le lf it mh b gy mq mm l mn mo">#Output:<br/>Index([    'Type', 'Coverage',   'OdName',     'AREA', 'AreaName',      'REG',<br/>        'RegName',      'DEV',  'DevName',       1980,       1981,       1982,<br/>             1983,       1984,       1985,       1986,       1987,       1988,<br/>             1989,       1990,       1991,       1992,       1993,       1994,<br/>             1995,       1996,       1997,       1998,       1999,       2000,<br/>             2001,       2002,       2003,       2004,       2005,       2006,<br/>             2007,       2008,       2009,       2010,       2011,       2012,<br/>             2013],<br/>      dtype='object')</span></pre><p id="33a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们不会用到很多列。我只是删除了这些列，并将国家的名称(' OdName ')设置为索引。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="9386" class="le lf it mh b gy ml mm l mn mo">df = df.drop(columns = ['Type', 'Coverage', 'AREA', 'AreaName',      'REG', 'RegName', 'DEV', 'DevName',]).set_index('OdName')<br/>df.head()</span></pre><figure class="mc md me mf gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mr"><img src="../Images/3ae7e5f209fa9b5b15dcea5b9c18787f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jHMPB_LAUOdU44j1Imgwww.png"/></div></div></figure><p id="66a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个练习我选择了爱尔兰和巴西的数据。没有什么特别的原因。我随机选择了他们。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="cca4" class="le lf it mh b gy ml mm l mn mo">Ireland = df.loc['Ireland']<br/>Brazil = df.loc['Brazil']</span></pre><h2 id="77f9" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">标准化数据</h2><p id="fa60" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">有几种不同的方法来标准化数据。我们将数据标准化，使数据处于相似的范围内。爱尔兰和巴西移民数据的范围不同。我需要把它们带到从 0 到 1 的范围。我只是用爱尔兰数据除以爱尔兰数据系列的最大值。我对巴西的数据序列做了同样的处理。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="5c7a" class="le lf it mh b gy ml mm l mn mo">i_normal = Ireland / Ireland.max()<br/>b_normal = Brazil / Brazil.max()</span></pre><p id="27f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将绘制爱尔兰和巴西的数据。把这些年列在清单上会很有用。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6ae7" class="le lf it mh b gy ml mm l mn mo">years = list(range(1980, 2014))</span></pre><h2 id="75bb" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">制作气泡图</h2><p id="a4d3" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">为了看出区别，我们先画散点图。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="1d08" class="le lf it mh b gy ml mm l mn mo">import matplotlib.pyplot as plt<br/>plt.figure(figsize=(14, 8))<br/>plt.scatter(years, Ireland, color='blue')<br/>plt.scatter(years, Brazil, color='orange')<br/>plt.xlabel("Years", size=14)<br/>plt.ylabel("Number of immigrants", size=14)<br/>plt.show()</span></pre><figure class="mc md me mf gt ms gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/cbc2fd40b9511eb769bf499ae95a024b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*5HQjCu9s7orioM8MzvOJ-Q.png"/></div></figure><p id="dfbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，画出气泡图。我们必须输入我们之前定义的大小。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="bf94" class="le lf it mh b gy ml mm l mn mo">plt.figure(figsize=(12, 8))<br/>plt.scatter(years, Brazil, <br/>                  color='darkblue', <br/>                 alpha=0.5,<br/>                 s = b_normal * 2000)</span><span id="7a21" class="le lf it mh b gy mq mm l mn mo">plt.scatter(years, Ireland, <br/>                  color='purple', <br/>                 alpha=0.5,<br/>                 s = i_normal * 2000,<br/>                 )<br/>plt.xlabel("Years", size=14)<br/>plt.ylabel("Number of immigrants", size=14)</span></pre><figure class="mc md me mf gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi na"><img src="../Images/ed00e1dfb47515a39ae4bc2e1096e1ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yu-W2MyMKRXSuKnuMWSnLg.png"/></div></div></figure><p id="e5b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过气泡的大小来了解移民的数量。泡沫越小，移民人数越少。</p><p id="aaa4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以把这块地做成彩色的。为了使它更有意义，我们需要对数据序列进行排序。你很快就会明白原因。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="bcb4" class="le lf it mh b gy ml mm l mn mo">c_br = sorted(Brazil)<br/>c_fr = sorted(France)</span></pre><p id="5c2d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们将传递这些值来改变颜色。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="eda9" class="le lf it mh b gy ml mm l mn mo">plt.figure(figsize=(12, 8))<br/>plt.scatter(years, Brazil, <br/>                  c=c_br,<br/>                 alpha=0.5,<br/>                 s = b_normal * 2000)</span><span id="7c90" class="le lf it mh b gy mq mm l mn mo">plt.scatter(years, Ireland, <br/>                  c=c_fr,<br/>                 alpha=0.5,<br/>                 s = i_normal * 2000,<br/>                 )<br/>plt.xlabel("Years", size=14)<br/>plt.ylabel("Number of immigrants", size=14)</span></pre><figure class="mc md me mf gt ms gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/f7aec02b6a40d12e8a7c27514850046a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*M1SkLsDq0rHI52i_IRMiuw.png"/></div></figure><p id="f466" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们增加了另一个维度，颜色。颜色随着移民的数量而变化。但是当我们画两个变量的时候，就没那么好了。因为在这个过程中，我们没有明确地定义单个变量的颜色。但是当我们在 y 轴上画一个变量时，它做得很好。让我们画出每年来自巴西的移民人数，看看这些年的趋势。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="a5a7" class="le lf it mh b gy ml mm l mn mo">plt.figure(figsize=(12, 8))<br/>plt.scatter(years, Brazil, <br/>                  c=c_br,<br/>                 alpha=0.5,<br/>                 s = b_normal * 2000)<br/>plt.xlabel("Years", size=14)<br/>plt.ylabel("Number of immigrants of Brazil", size=14)</span></pre><figure class="mc md me mf gt ms gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/1062c767794a4c6a1d11f597e316ba76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*rkiw9UfdC8qs7Focd0aQNg.png"/></div></figure><p id="9c88" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我敢肯定，你可以在这里非常清楚地看到颜色随着移民数量的变化。</p><p id="b18b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是 Matplotlib 中的气泡图。我希望它有帮助。</p><p id="020e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是另一个很酷的可视化教程:</p><div class="nc nd gp gr ne nf"><a rel="noopener follow" target="_blank" href="/waffle-charts-using-pythons-matplotlib-94252689a701"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">使用 Python 的 Matplotlib 的华夫饼图表</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">如何使用 Matplotlib 库在 Python 中绘制华夫饼图表</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">towardsdatascience.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt mx nf"/></div></div></a></div><p id="7ac7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">推荐阅读:</p><p id="5e7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" rel="noopener" target="_blank" href="/basic-plots-in-matplotlib-visualization-in-python-13013c9e4ee4">Matplotlib 中的基本绘图:Python 中的可视化</a></p><p id="b056" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" rel="noopener" target="_blank" href="/understand-the-data-with-univariate-and-multivariate-charts-and-plots-in-python-3b9fcd68cd8">用 Python 中的单变量和多变量图表和绘图理解数据</a></p><p id="1777" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" rel="noopener" target="_blank" href="/how-to-present-the-relationships-amongst-multiple-variables-in-python-fa1bdd4f368c">如何在 Python 中呈现多个变量之间的关系</a></p><p id="f3dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" rel="noopener" target="_blank" href="/indexing-and-slicing-of-1d-2d-and-3d-arrays-in-numpy-e731afff0bbe">Numpy 中 1D、2D 和 3D 数组的索引和切片</a></p><p id="8d79" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" href="https://medium.com/swlh/data-analysis-with-pivot-table-in-pandas-ac0b944cd7bc" rel="noopener">熊猫数据透视表数据分析</a></p><p id="80da" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mp" rel="noopener" target="_blank" href="/exploratory-data-analysis-intro-for-data-modeling-8ff019362371">用于数据建模的探索性数据分析</a></p></div></div>    
</body>
</html>