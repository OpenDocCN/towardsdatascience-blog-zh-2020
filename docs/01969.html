<html>
<head>
<title>Top Spotify Song Data Exploration with Plotly Express in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 中的 Plotly Express 进行顶级 Spotify 歌曲数据探索</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/top-spotify-song-express-exploration-with-plotly-express-in-python-3f3b6afdb2b7?source=collection_archive---------25-----------------------#2020-02-24">https://towardsdatascience.com/top-spotify-song-express-exploration-with-plotly-express-in-python-3f3b6afdb2b7?source=collection_archive---------25-----------------------#2020-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b2bd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以 Spotify 歌曲数据为例，与 plotly express 取得联系，进行数据探索和可视化。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bca1dd7b96f4a37a3174a9c560d025df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rTURqjRxpxnyp80U"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">艾萨克·史密斯在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a957" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据可视化是数据科学的重要方面之一。它既可用于数据探索，也可用于交流分析结果。在数据浏览过程中，可视化可以揭示数据中隐藏的信息。用图表展示你的项目成果是交流你的发现的一个很好的方式。</p><p id="3c4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 中有许多数据可视化库可供选择。一个这样的库被 plotly 表示。</p><blockquote class="lv lw lx"><p id="fb5d" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Plotly Express 是 Plotly 的一个易于使用的高级界面，它处理“整齐”的数据并生成易于样式化的图形— Plotly</p></blockquote><p id="e453" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将使用 plotly express 库探索和可视化来自 Kaggle 的 Spotify 热门歌曲数据集。</p><h2 id="5214" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">导入库</h2><p id="51fa" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">首先，我们需要使用 pip 或 conda 将 plotly 安装到我们的环境中。您可以在 plotly 网站上查看安装该库的完整文档。<em class="ly"> Plotly Express </em>库与 Plotly 库合二为一。</p><div class="na nb gp gr nc nd"><a href="https://plot.ly/python/getting-started/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">Plotly 入门</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">有关静态图像导出的详细信息，请参阅 Python 中的静态图像导出。扩展地理支持有些 plotly.py…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">plot.ly</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ks nd"/></div></div></a></div><p id="262f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦安装了库，我们可以将库导入到我们的笔记本中。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="8f0f" class="mc md it nt b gy nx ny l nz oa">import pandas as pd<br/>import numpy as np<br/>import plotly.express as px</span></pre><h2 id="0608" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">数据准备</h2><p id="0e66" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本文中，我们使用了 Kaggle 的顶级 Spotify 音乐数据集。为了得到这个数据集，我们可以在这里下载数据集<a class="ae ky" href="https://www.kaggle.com/leonardopena/top-spotify-songs-from-20102019-by-year" rel="noopener ugc nofollow" target="_blank">。这个数据集由世界上最受欢迎的 Spotify 歌曲和 2010 年至 2019 年的另外 13 个变量组成。但是，我们将只使用 2015 年开始的数据子集。</a></p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="73b2" class="mc md it nt b gy nx ny l nz oa"># Import Dataset<br/>rawfile = './top10s.csv'</span><span id="4199" class="mc md it nt b gy ob ny l nz oa">#use encoder to avoid utf-8 error<br/>df = pd.read_csv(rawfile,encoding = "ISO-8859-1")</span><span id="971a" class="mc md it nt b gy ob ny l nz oa">#remove id column<br/>df = df.iloc[:,1:15]  <br/>df = df.loc[df['year']&gt;=2015]</span><span id="9b57" class="mc md it nt b gy ob ny l nz oa"># get 5 year data only<br/>display(df.head())<br/>print('Data frame shape: {}'.format(df.shape))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/73d4f0b1c14070adeca4970f52529df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wXXNExRrx3Eu4KCc28JdIw.png"/></div></div></figure><h2 id="ec42" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">视觉探索</h2><p id="b2b1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">让我们用 plotly express 创建一个基本的可视化。首先，我们将使用一个<strong class="lb iu">条形图来查看在公告牌中出现频率最高的 5 个流派。</strong></p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="6a0d" class="mc md it nt b gy nx ny l nz oa">famous_genres = df['top genre'].value_counts().head(5).to_frame().reset_index()<br/>famous_genres.columns = ['genre','Count']<br/>famous_genres_list = list(famous_genres['genre'])</span><span id="1eea" class="mc md it nt b gy ob ny l nz oa"># Visualize<br/>px.bar(famous_genres, <br/>       x = 'genre', <br/>       y = 'Count', <br/>       title = 'Top 5 Genres',<br/>       template = 'plotly_white')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/12f894f521e880c5637ce12058a978e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQK3Of22JJDrxrUcIIYspg.png"/></div></div></figure><p id="80f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从 2015 年到 2019 年，舞蹈流行音乐是 Spotify billboard 中出现频率更高的流派。</p><p id="bc1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其次，假设我们想知道这些流派每年的平均受欢迎程度。我们可以创建一个<strong class="lb iu">折线图</strong>来观察这个趋势。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="f964" class="mc md it nt b gy nx ny l nz oa">top_5_genre = famous_genres_list<br/>df_top = df.loc[df['top genre'].isin(top_5_genre)]</span><span id="b810" class="mc md it nt b gy ob ny l nz oa">group_by_genre = df_top.groupby(["year","top genre"]).mean().sort_values('year').reset_index()</span><span id="ac7f" class="mc md it nt b gy ob ny l nz oa">px.line(group_by_genre,<br/>        x = 'year',<br/>        y ='pop',<br/>        line_group = 'top genre',<br/>        title = 'Top Genres Average Popularity',<br/>        template = 'plotly_white',<br/>        color = 'top genre')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/2d4e10c3a20cbab59cd5de29df32baf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SSVinnagZoEogZIVwkw20w.gif"/></div></div></figure><p id="a5e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过查看图表，即使流行舞曲风格的歌曲在公告牌上出现的频率最高，它的平均受欢迎程度仍然低于其他五大风格。但是，它总是逐年持续增长。</p><p id="0393" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们来看看这一时期最著名的艺术家是谁。我们将用<strong class="lb iu">柱形图</strong>来回答这个问题。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="483a" class="mc md it nt b gy nx ny l nz oa"># Prepare data<br/>famous_artist = df['artist'].value_counts().head(5).to_frame().reset_index()<br/>famous_artist.columns = ['artist','Count']</span><span id="1753" class="mc md it nt b gy ob ny l nz oa"># Visualize<br/>px.bar(famous_artist.sort_values('Count'), <br/>       x = 'Count', <br/>       y = 'artist', <br/>       title = 'Top 5 Artist',<br/>       template = 'plotly_white',<br/>       orientation = 'h')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/b19f5b99d133eb81bcaf869fb5cb1dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rce2qibThuOf15YrCUR-Nw.png"/></div></div></figure><p id="96d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与其他人相比，这五位艺术家贡献了 Spotify 中最热门的歌曲。</p><p id="1560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要看他们唱的每首歌的人气分布，可以用<strong class="lb iu">框图。</strong></p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="e525" class="mc md it nt b gy nx ny l nz oa"># Average Popularity of a particular genre over the years</span><span id="1863" class="mc md it nt b gy ob ny l nz oa">top_5_artist = famous_artist_list<br/>df_top_artist = df.loc[df['artist'].isin(top_5_artist)]</span><span id="4903" class="mc md it nt b gy ob ny l nz oa">px.box(df_top_artist,<br/>       x = 'artist',<br/>       y = 'pop',<br/>       hover_name = 'title',<br/>       title = 'Artist Songs Popularity Distribution',<br/>       template = 'plotly_white',<br/>       points = 'all')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/fff3e553c6deef044ec0bb6e1ce841ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvPNFRcI3Se0VYO1pWt_nA.png"/></div></div></figure><p id="2ddb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在其他歌曲中，《魔力红的回忆》最受欢迎。然而，这五位歌手的歌曲受欢迎程度的平均中位数在 70 到 80 之间。</p><p id="909e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些歌曲中的每一首都有一个参数，如每分钟节拍数、能量、可跳舞性、响度、可爱度、长度等。我们可以通过制作<strong class="lb iu">流行度与每分钟节拍的散点图</strong>来检查一个变量与另一个变量之间的相关性。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="85f9" class="mc md it nt b gy nx ny l nz oa">px.scatter(df_top,<br/>           x = 'pop',<br/>           y = 'bpm',<br/>           color = 'top genre')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/7bb071f617b6952caf3875408818dd36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dmz5A7d_LEfxUh5WZ8kaBg.png"/></div></div></figure><p id="b511" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以制作一个散点图，以散点图的形式查看所有变量的相关性。</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="13a3" class="mc md it nt b gy nx ny l nz oa">cols = df_top_artist.select_dtypes(include=['float', 'int']).columns.tolist()[1:]</span><span id="c59a" class="mc md it nt b gy ob ny l nz oa">px.scatter_matrix(df_top_artist, <br/>dimensions = cols,width=1400 ,height=1200, color = df_top_artist['top genre'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/675814706fc500579a80b99a20a450df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TSCdiXMFcZh-L1MwO69ZQg.png"/></div></div></figure><h2 id="a675" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">最后的想法</h2><p id="7ee5" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">通过数据探索，我们知道流行舞蹈是在 billboard 中出现最多的类型。即使这种类型没有显示出最高的人气得分，但从 2015 年到 2019 年，这种类型的人气不断增加。另一方面，最著名的艺术家是贾斯汀比伯。他在广告牌上出现了 12 次。然后最受欢迎的歌曲是《魔力红的回忆》。</p><p id="6777" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 plotly express 进行可视化非常简单，尤其是当我们使用 panda 数据框时。我们只需要调用我们想要的图表，选择数据框，选择列，然后配置可定制的项目或让它使用默认值。通过这样做，我们将在一次函数调用中得到我们需要的图表。</p><h2 id="0041" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">参考</h2><div class="na nb gp gr nc nd"><a href="https://medium.com/plotly/introducing-plotly-express-808df010143d" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">✨推出 Plotly 快递✨</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">Plotly Express 是一个新的高级 Python 可视化库:它是 Plotly.py 的包装器，公开了一个简单的…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="oj l no np nq nm nr ks nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a href="https://plot.ly/python/plotly-express/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">Plotly Express</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">每行代表一朵花。https://en.wikipedia.org/wiki/Iris_flower_data_set 用 150 英镑返回一个“熊猫. DataFrame”</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">plot.ly</p></div></div><div class="nm l"><div class="ok l no np nq nm nr ks nd"/></div></div></a></div></div></div>    
</body>
</html>