<html>
<head>
<title>Working with data: New York Times ‘new words’ dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理数据:纽约时报“新词”数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-data-new-york-times-new-words-dataset-524d7a550beb?source=collection_archive---------34-----------------------#2020-03-25">https://towardsdatascience.com/working-with-data-new-york-times-new-words-dataset-524d7a550beb?source=collection_archive---------34-----------------------#2020-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5be6317f81de302eb4de2217f56eba53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BRRT-zJcXBhRshPe"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">由<a class="ae jd" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·切瑟</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><div class=""/><blockquote class="kd ke kf"><p id="5c33" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">在本文中，我将介绍和分析我用来清理、构建和可视化这个数据集的几个步骤。</p></blockquote></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="9fc7" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">几周前，我在推特上看到一个数据集。这个数据集是由两个NLP的博士生放在一起的，目的是激励NLP和语言学研究。在最初检查了数据集并与创建者交谈后，我从GitHub中分出了存储库，并开始探索数据(<a class="ae jd" href="https://github.com/yuvalpinter/nytwit" rel="noopener ugc nofollow" target="_blank">https://github.com/yuvalpinter/nytwit</a>)。</p><figure class="lp lq lr ls gt is"><div class="bz fp l di"><div class="lt lu l"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">我碰到的原推文(谢谢，推特！)</p></figure><p id="4e9d" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">在处理这个数据集时，我首先采取了一些初步的EDA措施:</p><ol class=""><li id="8902" class="lv lw jg kj b kk kl ko kp lm lx ln ly lo lz le ma mb mc md bi translated">查看我们正在使用的数据集的类型</li><li id="7b1f" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">检查形状(行、列)</li><li id="93d2" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">查看头部和尾部(第一行和最后5行)</li><li id="8b54" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">检查所有行和列(。信息())</li><li id="eed5" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">获取一些介绍性的统计数据(。describe())</li><li id="a88b" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">用获取值计数。值计数()</li></ol></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="8dd6" class="mj mk jg bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">1.查看数据集的类型</h1><p id="3cd0" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">这将使我们更好地理解我们正在处理的数据，以及可用于转换数据和检索见解的方法。为此，我们只需运行以下代码:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/2a60c3feb1ab2445b2a92bf97138483c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nlQ9yQZQGjGQl9224XR9Og.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">类型(数据)告诉我们，我们正在处理一个熊猫数据帧</p></figure><p id="e11b" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">告诉我们，我们正在处理一个“二维的、大小可变的、潜在异构的表格数据集”虽然这个语句中有很多内容需要解开，但这意味着我们的数据具有可以转换和过滤(大小可变)的行和列(二维)，并且这些可转换的行和列包含潜在的异构数据类型(int64、float64、object、bool、datetime64的混合)。</p><h1 id="1d0d" class="mj mk jg bd ml mm nr mo mp mq ns ms mt mu nt mw mx my nu na nb nc nv ne nf ng bi translated">2.检查形状(行、列)</h1><p id="346c" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">接下来，为了检查数据集中有多少行和列，我们编写以下代码行:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nw"><img src="../Images/4f72dc1186ef95886da9f58728ff4fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzgKfs87P0aB3uijiaZkIg.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">data.shape将返回数据集的行数和列数</p></figure><p id="200c" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">如上所述，<code class="fe nn no np nq b">(2587, 4)</code>告诉我们有2587行和4列。</p><h1 id="5279" class="mj mk jg bd ml mm nr mo mp mq ns ms mt mu nt mw mx my nu na nb nc nv ne nf ng bi translated">3.查看头部和尾部(第一行和最后5行)</h1><p id="6eeb" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">现在我们对数据的大小和类型有了更好的了解，我们想检查一下我们正在处理哪种单元格值和列。这将让我们更好地了解我们可以用数据集合理地计算/测量什么。以下代码行将完成这一任务:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/aeccbe463b7d6aac68717804047d8e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVD-VCZRWQPNTpJdFP_Tiw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">data.head()将返回数据集的前五行</p></figure><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ny"><img src="../Images/6ee29753b5ad10de6395b6b0f03ace3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSUicI_qACG-BrkB3EC-8w.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">data.tail()将返回数据集的最后5行</p></figure><h1 id="e8b6" class="mj mk jg bd ml mm nr mo mp mq ns ms mt mu nt mw mx my nu na nb nc nv ne nf ng bi translated">4.检查所有行和列</h1><p id="62d9" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">在我们知道数据的类型、大小和条目之后，分析每一列的数据类型是很重要的。这是通过使用。info()，如下面的操作所示:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/03bc3b00553cc857be84451c7d627890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*ZmhaIY4YQKkaGs6q4pnz9g.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">。info()正在运行！</p></figure><p id="4334" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">因此，到目前为止，我们的一些主要收获是:</p><ol class=""><li id="dee5" class="lv lw jg kj b kk kl ko kp lm lx ln ly lo lz le ma mb mc md bi translated">我们正在处理一个熊猫数据框架</li><li id="15d5" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">我们有2587行和4列</li><li id="0726" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">这4列是时间、单词、类别和URL。时间列统一表示为<code class="fe nn no np nq b">{Day of Week} {Month} {Day of Month} {Minutes}:{Hours}:{Seconds} {Year}</code>。这将很容易将时间和日期分成单独的列，并通过索引访问特定的值。最后，类别和时间列包含重复的条目(我们可以从。头()和。tail())。</li><li id="0c3c" class="lv lw jg kj b kk me ko mf lm mg ln mh lo mi le ma mb mc md bi translated">我们的列中没有空值，所有的数据类型(Dtype)都是<code class="fe nn no np nq b">Object</code>(我们正在处理<em class="ki">干净的</em>数据)。</li></ol><p id="d8e0" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">这些都是我们可以用<strong class="kj jh">来构建的好点子。形容()</strong>和<strong class="kj jh">。value_counts() </strong>！</p><h1 id="b43e" class="mj mk jg bd ml mm nr mo mp mq ns ms mt mu nt mw mx my nu na nb nc nv ne nf ng bi translated">5.获取一些介绍性的统计数据(。describe())</h1><p id="4bc6" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">现在，关键是我们要对数据集进行一些基本的统计测量。即使我们所有的数据类型都是对象(而不是int64)，我们仍然可以通过使用。describe(include = NP . object)(<strong class="kj jh">注意:</strong> <code class="fe nn no np nq b"><strong class="kj jh">include = np.object</strong></code> <strong class="kj jh">当你有<em class="ki">对象</em>和<em class="ki">非对象</em> Dtypes时很有帮助，但也可以只包含对象Dtypes </strong>)。代码如下所示:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/19d17ecc39025fad83f75277746b3b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCJTjW-rCEKowOhkQ4dTbw.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">。描述(include=np.object)</p></figure><p id="2b25" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">在这里，我们找到了数据集中最频繁出现的时间、单词、类别和URL值。这让我们深入了解我们可以可视化的内容(使用直方图、散点图等)。)以及我们可能需要在数据集中清理的东西(冗余行、不正确或意外的值等)。).接下来，我们需要更好地了解数据集列中的唯一值。这将有助于我们发现创建有效子数据集和将重要值分组在一起的方法。</p><h1 id="288b" class="mj mk jg bd ml mm nr mo mp mq ns ms mt mu nt mw mx my nu na nb nc nv ne nf ng bi translated">6.用获取值计数。值计数()</h1><p id="e2c3" class="pw-post-body-paragraph kg kh jg kj b kk nh km kn ko ni kq kr lm nj ku kv ln nk ky kz lo nl lc ld le ij bi translated">我们可以利用。value_counts()在我们所有的列上，但是为了这个例子，我将把重点放在“Category”列上。代码如下:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/da11b5b364fbabf35a1c8cd09a99ae8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWnio9GPfL3fW2EKwjpr3A.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">类别列中的所有唯一值及其频率。</p></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="ba07" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">现在，我们对数据集有了很好的感觉，并准备构建一些可视化工具来传达我们发现的信息。首先，让我们使用Plotly和我们的“T3”数据框架构建一个直方图。</p><p id="e216" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">我喜欢Plotly的一点是它的简单性和交互性，这是我构建的每个情节的标准。虽然下面的截图不会包括交互式触摸，但我鼓励你去看看他们的图形库(<a class="ae jd" href="https://plotly.com/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/</a>)。代码如下:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/66aae2fe6e6f355ce1b56bd7457db552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3utRy9Qgmr6siZHVfDzEQ.png"/></div></div></figure><p id="44c7" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">这是输出结果:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/eaf73fd9379856c0e047de7f9d9e9788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IG6_-LDnymj8AwqXoSB-g.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">简单易用的直方图</p></figure><p id="db4c" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">最后，让我们用Seaborn构建一个distplot。在这里，我们将可视化每个月的每个日期有多少单词被添加到数据集(跨所有月份)。下面是我们将编写的代码，用于设置适当的panda系列和distplot:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/6c19702d360da7dcfe3216c520a5ccb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhoUrK0XF2Ts1nPOAccJbA.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">我们输入sns.distplot()的熊猫系列代码</p></figure><p id="7f42" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">这里，我们创建一个空列表(<code class="fe nn no np nq b">date_df</code>)，我们可以用来自<code class="fe nn no np nq b">df['Time']</code>的值填充它。每次我们遍历<code class="fe nn no np nq b">df['Time']</code>时，我们都会将<code class="fe nn no np nq b">val[8:10]</code>(一个月中的几天)添加到<code class="fe nn no np nq b">date_df</code>列表中。我们用<code class="fe nn no np nq b">[8:10]</code>索引<code class="fe nn no np nq b">val</code>,因为这是<code class="fe nn no np nq b">{Day of Week} {Month} {<strong class="kj jh">Day of Month</strong>} … {Year} </code>中日期索引出现的地方。在这之后，我们将<code class="fe nn no np nq b">date_df</code>转换成熊猫系列(因为我们想要一个<strong class="kj jh">一维数组</strong>，而不是一个列表)。最后，我们用<code class="fe nn no np nq b">kde = False</code>(删除内核密度估计值)、<code class="fe nn no np nq b">fit = norm</code>(用正态分布拟合我们的图)和<code class="fe nn no np nq b">color='g'</code>(将我们的频率条格式化为绿色)来配置distplot。总的来说，这产生了以下视觉效果:</p><figure class="lp lq lr ls gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/cac2a8d9c9839379ca22e2311d641fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xsI0uQnDa8e-hM0f_0EQCQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">使用Seaborn快速简单地构建distplot()。</p></figure><p id="49da" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">这是一个非常基本的视觉需要一些工作，但它是一个良好的开端，为我们提供了宝贵的信息！</p><p id="2b69" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">在本文中，我们讨论了ed a的许多重要部分。在接下来的几周里，我希望通过使用其他数据集和讨论我在处理数据时采取的其他重要步骤来继续建立这一基础。一些策略可能广泛适用于不同的数据集，而另一些策略可能专门针对我在文章中讨论的那个数据集。无论如何，我相信它会帮助你继续像数据科学家一样思考！直到下次，</p><p id="d746" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">丹·m。</p><p id="7270" class="pw-post-body-paragraph kg kh jg kj b kk kl km kn ko kp kq kr lm kt ku kv ln kx ky kz lo lb lc ld le ij bi translated">附注:和往常一样，请随时向danielmurph8@gmail.com提出问题、意见和担忧。谢谢！</p></div></div>    
</body>
</html>