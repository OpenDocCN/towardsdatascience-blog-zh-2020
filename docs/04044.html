<html>
<head>
<title>Deploy RShiny on Kubernetes with a Helm Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用舵图在Kubernetes上部署RShiny</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-rshiny-on-kubernetes-with-a-helm-chart-fa07e4572942?source=collection_archive---------62-----------------------#2020-04-13">https://towardsdatascience.com/deploy-rshiny-on-kubernetes-with-a-helm-chart-fa07e4572942?source=collection_archive---------62-----------------------#2020-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1f09a23949f68d5e3a2e6aa1b138656a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Msoxxgk-lDPtsUcD.jpg"/></div></div></figure><p id="c715" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想要一个非常健壮的解决方案来部署您的RShiny应用程序，AWS或EKS上的托管Kubernetes服务是一个很好的选择！就部署容器化服务而言，Kubernetes目前已经完全控制了DevOps和部署领域。</p><h1 id="8b18" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我应该使用Kubernetes部署我的RShiny应用程序吗？</h1><p id="70bc" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">和所有的事情一样，使用Kubernetes有优点也有缺点。</p><h1 id="c3ee" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">骗局</h1><ul class=""><li id="52d7" class="lz ma iq ka b kb lu kf lv kj mb kn mc kr md kv me mf mg mh bi translated">Kubernetes是一个野兽开始。</li><li id="dc83" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">你需要把你的RShiny应用和docker打包在一起。</li></ul><h1 id="2cf8" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">赞成的意见</h1><ul class=""><li id="7c24" class="lz ma iq ka b kb lu kf lv kj mb kn mc kr md kv me mf mg mh bi translated">Kubernetes得到了一系列提供商的支持，包括AWS、GCP、Azure、Digital Ocean等。</li><li id="5988" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">Kubernetes很复杂，但是伴随着复杂而来的是大批工程师，他们想把复杂的东西抽象成配置文件。因此，如果你坚持“成长的烦恼”,很可能你会得到很多好处，随着时间的推移，事情会变得不那么痛苦。</li><li id="50f9" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">Kubernetes已经被“部署东西的人”社区所接受，这意味着有很多资源可以利用。</li><li id="f3a6" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">如果你需要扩展，Kubernetes是一个很好的方法。</li><li id="d87f" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">Kubernetes有很多优秀的特性，包括一个JobsApi和一个CronJobsApi。这意味着您可以每天下载数据集，这对使用数据集的RShiny应用程序来说非常方便。</li></ul><h1 id="8530" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">AWS特定优势</h1><p id="b47e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">其中很多可能适用于其他平台，但我在AWS上工作，所以我们在这里。</p><p id="4db4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS拥有托管解决方案</p><ul class=""><li id="0e35" class="lz ma iq ka b kb kc kf kg kj mn kn mo kr mp kv me mf mg mh bi translated">对于代码(想想GitHub) — CodeCommit</li><li id="a979" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">对于私人码头集装箱(想想dockerhub) — ECR</li><li id="0d55" class="lz ma iq ka b kb mi kf mj kj mk kn ml kr mm kv me mf mg mh bi translated">对于CI/CD (CircleCi、Travis等)—代码部署</li></ul><p id="c68b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也可以随意混搭。例如，您可以在DockerHub上托管您的私有映像，并且仍然部署到AWS Kubernetes (EKS ),或者您可以使用Circle设置您的CI/CD管道，并且仍然使用AWS。</p><p id="6e81" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来是这样一个事实，AWS基础设施可以完全脱离人工干预并实现自动化。您不需要，也不应该通过控制台来创建像集群这样复杂的基础设施。相反，你可以使用类似于<a class="ae mq" href="https://www.terraform.io/docs/providers/aws/index.html" rel="noopener ugc nofollow" target="_blank">地形</a>或<a class="ae mq" href="https://aws.amazon.com/cloudformation/" rel="noopener ugc nofollow" target="_blank">云形成</a>的工具。这些工具可以自动完成从创建Kubernetes集群到部署应用程序的所有工作。</p><h1 id="3aff" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我被卖了！现在怎么办？</h1><p id="178d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">首先，你需要一个RShiny图片来测试。我真的建议挑选一些非常简单的东西来测试，这样你就可以知道问题是出在你的图像上还是你的设置上。在本教程中，我们将使用<a class="ae mq" href="https://hub.docker.com/r/rocker/shiny" rel="noopener ugc nofollow" target="_blank">摇杆闪亮图像</a>。</p><p id="e060" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还需要有一个可用的Kubernetes集群。</p><h1 id="d336" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">创建您的舵图</h1><p id="9bbb" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我将一步一步地介绍你需要做哪些修改。如果你想跳过这一部分，你可以点击查看舵轮图<a class="ae mq" href="https://dabble-of-devops-helm-charts.s3.amazonaws.com/rshiny-eks-0.1.0.tgz" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="3cb0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">(在<a class="ae mq" href="https://helm.sh/docs/intro/install/" rel="noopener ugc nofollow" target="_blank">安装舵v3 </a>之后)你要做的第一件事是创建一个<a class="ae mq" href="https://helm.sh/docs/topics/charts/" rel="noopener ugc nofollow" target="_blank">舵图表</a>。一点关于舵图！</p><blockquote class="mr ms mt"><p id="2cba" class="jy jz mu ka b kb kc kd ke kf kg kh ki mv kk kl km mw ko kp kq mx ks kt ku kv ij bi translated"><em class="iq"> Helm使用一种叫做图表的打包格式。图表是描述一组相关Kubernetes资源的文件集合。一个图表可以用来部署简单的东西，比如memcached pod，或者复杂的东西，比如带有HTTP服务器、数据库、缓存等的完整web应用程序堆栈。图表被创建为布局在特定目录树中的文件，然后它们可以被打包到要部署的版本化档案中。</em></p></blockquote><p id="eb90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">来自<a class="ae mq" href="https://helm.sh/docs/topics/charts/" rel="noopener ugc nofollow" target="_blank"> helm.sh </a></p><p id="1b06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从这里开始，我们将边做边学，因此打开您的终端并运行:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="bf71" class="nh kx iq nd b gy ni nj l nk nl">helm create rshiny-eks</span></pre><p id="a2e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您将看到一个名为rshiny-eks的目录。顺便提一下，如果你安装了插件，许多编辑器和ide可以识别舵图。我发现它有一定的帮助。</p><p id="8da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们打开<code class="fe nm nn no nd b">rshiny-eks/values.yaml</code>看看吧！</p><h2 id="cc81" class="nh kx iq bd ky np nq dn lc nr ns dp lg kj nt nu lk kn nv nw lo kr nx ny ls nz bi translated">指定图像</h2><p id="4892" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">您可以通过更改<code class="fe nm nn no nd b">image.repository</code>键来指定图像。默认情况下，图表是用nginx创建的。如果您在一个全新的集群上，我强烈建议您按原样部署图表。我总是喜欢在任何新平台上部署NGINX，因为如果我不能部署NGINX，我会有更大更可怕的问题。；-)</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8c6d" class="nh kx iq nd b gy ni nj l nk nl"># rshiny/values.yaml<br/>image:<br/>  repository: nginx<br/>  pullPolicy: IfNotPresent</span></pre><p id="1bfe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们改变这个摇杆/闪亮。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="6c2d" class="nh kx iq nd b gy ni nj l nk nl"># rshiny/values.yaml<br/>image:<br/>  repository: rocker/shiny <br/>  pullPolicy: IfNotPresent</span></pre><h1 id="34d5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">注意—使用标签</h1><p id="fb1e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">该标签将默认为Chart.yaml中的appVersion。实际上似乎没有人遵循这一点并在<code class="fe nm nn no nd b">values.yaml</code>中添加一个标签。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="843d" class="nh kx iq nd b gy ni nj l nk nl"># rshiny/values.yaml<br/>image:<br/>  repository: rocker/shiny <br/>  # add in a TAG key<br/>  # don't use latest!<br/>  tag: 3.6.1<br/>  pullPolicy: IfNotPresent</span></pre><p id="2443" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后打开<code class="fe nm nn no nd b">templates/deployment.yaml</code>，对图像键进行更新。</p><p id="8637" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">改变这个-</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="dc24" class="nh kx iq nd b gy ni nj l nk nl"># templates/deployment.yaml<br/>image: "{{ .Values.image.repository }}:{{ .Chart.AppVersion }}"</span></pre><p id="9fba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">收件人:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="9bab" class="nh kx iq nd b gy ni nj l nk nl"># templates/deployment.yaml<br/>image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"</span></pre><p id="2d78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">旁注</strong></p><p id="f653" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常，helm所做的是查看appVersion的【the appVersion对应于标签。这对于自动部署来说是有问题的，因为无法从命令行对此进行更改。我发现修改舵图更容易。</p><h1 id="aab9" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">加入会话属性</h1><p id="0759" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">RShiny喜欢无所事事。这只会让你的会话变得粘粘的，这意味着用户不会在体验中被拖来拖去。</p><p id="de51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开您的<code class="fe nm nn no nd b">rshiny-eks/templates/deployment.yaml</code>，在spec下添加一个sessionAffinity键。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="2e45" class="nh kx iq nd b gy ni nj l nk nl"># rshiny-eks/templates/deployment.yaml<br/>apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: {{ include "rshiny-eks.fullname" . }}<br/>  labels:<br/>    {{- include "rshiny-eks.labels" . | nindent 4 }}<br/>spec:<br/>  replicas: {{ .Values.replicaCount }}<br/>  # ADD sessionAffinity HERE <br/>  sessionAffinity: ClientIP</span></pre><p id="8bf1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更改文件中更靠下的端口:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="99cf" class="nh kx iq nd b gy ni nj l nk nl"># rshiny-eks/templates/deployment<br/># Change containerPort: 80 to containerPort 3838</span><span id="57a0" class="nh kx iq nd b gy oa nj l nk nl">ports:<br/>  - name: http<br/>    containerPort: 3838<br/>    protocol: TCP</span></pre><h1 id="bc4d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">关于端口的一个注记</h1><p id="4c81" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">这个设置假设您的RShiny应用程序运行在容器的端口80上。如果不是，您需要更改<code class="fe nm nn no nd b">rshiny-eks/templates/deployment.yaml</code>中的containerPort值。</p><h1 id="9ee1" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">可选——很好地公开URL的依赖项</h1><p id="edbd" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你只是作为测试部署，你不需要这些，因为AWS会给你一个公共的IP地址，但是如果你需要把你的Kubernetes实例映射到一个实际的URL，你需要修改一些东西。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="1dd0" class="nh kx iq nd b gy ni nj l nk nl"># Chart.yaml<br/>dependencies:<br/>  - name: nginx-ingress<br/>    version: 1.27.0<br/>    repository: https://kubernetes-charts.storage.googleapis.com<br/>  - name: cert-manager<br/>    version: v0.12.0<br/>    repository: https://charts.jetstack.io</span></pre><p id="d61c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe nm nn no nd b">values.yaml</code>中，删除入口块并用此块代替。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="5949" class="nh kx iq nd b gy ni nj l nk nl"># values.yaml<br/>ingress:<br/>  enabled: true<br/>  annotations:<br/>    kubernetes.io/ingress.class: nginx<br/>#     if you need to have https uncomment<br/>#    cert-manager.io/cluster-issuer: letsencrypt-production<br/>  hosts:<br/># your real domain<br/># You will need to get the service url and add it to your DNS panel as an A name record.<br/># this may take some time to propogate the first time around due to DNS settings.<br/># Don't freak out!<br/>    - host: www.mydomain.com<br/>      paths:<br/>        - "/"<br/># Get the service url<br/># with kubectl get svc -o wide | grep MY_RELEASE_NAME<br/># Add this to your DNS panel as an A name to get the above to work<br/>    - host: lots-o-numbas.aws-region.elb.amazonaws.com<br/>      paths:<br/>        - "/"<br/>  tls: []<br/>  # If you're using https you'll need to update this<br/>  #  - secretName: chart-example-tls<br/>  #    hosts:<br/>  #      - chart-example.local</span></pre><h1 id="f0ba" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">展开你的舵图</h1><p id="e102" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">开始部署吧！</p><h1 id="a430" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">将所有依赖项安装到helmchart</h1><p id="281f" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">您需要在rshiny-eks的父目录中运行这个命令。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="eb44" class="nh kx iq nd b gy ni nj l nk nl">helm dep up rshiny-eks</span></pre><p id="d34c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将安装所有依赖项。如果你没有做可选的步骤，你就不会有任何选择，但是下次要记住这一点！</p><h1 id="6352" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">展开舵图</h1><p id="7b6c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在，helm的一个非常方便的特性是你可以通过使用<code class="fe nm nn no nd b">--set</code>标志在命令行上修改<code class="fe nm nn no nd b">values.yaml</code>。我们在这里要做的是用我们的实际标签来设置图像标签。(我就继续保持破纪录吧。使用标签！不这样你会后悔的。)</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="9259" class="nh kx iq nd b gy ni nj l nk nl"># helm upgrade --install RELEASE_NAME ./path-on-filesystem<br/># If you didn't install the optional dependencies use the<br/># --set service.type=LoadBalancer<br/>helm upgrade --install rshiny-eks ./rshiny-eks  \<br/>    --set image.tag=$SOME_REAL_TAG_HERE  \<br/>    --set service.type=LoadBalancer<br/><br/># If you installed the optional dependencies you don't need to specify the service.type <br/>helm upgrade --install rshiny-eks ./rshiny-eks  \<br/>    --set image.tag=$SOME_REAL_TAG_HERE</span></pre><h1 id="72f7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">获取服务地址</h1><p id="ce8e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">一旦你做到了这一点，你就可以获得该服务的IP地址，并把它放入你的浏览器中。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="91d5" class="nh kx iq nd b gy ni nj l nk nl">kubectl get svc -o wide | grep rshiny-eks | grep LoadBalancer</span></pre><p id="bf60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这会让你看到这样的东西-</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="d4f1" class="nh kx iq nd b gy ni nj l nk nl">rshiny-eks-nginx-ingress-controller        LoadBalancer   172.20.108.106   lots-o-string.aws-region.elb.amazonaws.com   80:32168/TCP   1d   app=nginx-ingress,component=controller,release=rshiny-eks</span></pre><p id="3c43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开你的浏览器，输入<code class="fe nm nn no nd b">lots-o-string.aws-region.elb.amazonaws.com</code>！启动服务可能需要几分钟时间。</p><h1 id="3910" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">解决纷争</h1><h1 id="8a07" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">得到一个壳</h1><p id="3abe" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我最喜欢DevOps的一点是，我们有所有这些超级奇妙的方式来部署几乎所有的东西。然后我们有后门，本质上是“好了闭嘴，给我一个壳”。Kubernetes在这里也不例外。我们可以得到一个外壳，复制文件，转发端口。哈！</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="0b94" class="nh kx iq nd b gy ni nj l nk nl">#If you used a different release name grep for that<br/>kubectl get pods |grep rshiny</span></pre><p id="fc08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">获取pod的名称，一旦有了这个名称，就可以直接在容器上获取外壳。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="df01" class="nh kx iq nd b gy ni nj l nk nl">kubectl exec -it name-of-pod bash</span></pre><h1 id="e3b3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">查看日志</h1><p id="6554" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">您还可以查看日志，这是抛出到stdout/stderr的所有内容。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8818" class="nh kx iq nd b gy ni nj l nk nl">kubectl logs name-of-pod</span></pre><h1 id="a883" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">描述吊舱</h1><p id="f38d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你的容器失败了，你想知道为什么要描述这个容器。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="69c7" class="nh kx iq nd b gy ni nj l nk nl">kubectl describe pod name-of-pod</span></pre><h1 id="9c9d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">总结性的新闻报导</h1><p id="f4f4" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">原来如此！一旦您的Kubernetes集群启动并运行，您就可以使用helm部署您的RShiny应用程序并发布这些精彩内容！</p><h1 id="6335" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">取得联系</h1><p id="ed3f" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你有任何问题，意见，或想要求一个教程，请与我联系在jillian@dabbleofdevops.com。</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="32a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mu">原载于</em><a class="ae mq" href="https://www.dabbleofdevops.com/blog/deploy-rshiny-on-kubernetes-with-a-helm-chart" rel="noopener ugc nofollow" target="_blank"><em class="mu"/></a><em class="mu">。</em></p></div></div>    
</body>
</html>