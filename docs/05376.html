<html>
<head>
<title>Predicting Apartment Rental Prices in Germany</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测德国的公寓租金价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predicting-apartment-rental-prices-in-germany-d5635197ab00?source=collection_archive---------31-----------------------#2020-05-06">https://towardsdatascience.com/predicting-apartment-rental-prices-in-germany-d5635197ab00?source=collection_archive---------31-----------------------#2020-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d50e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用随机森林预测租赁价格</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/119c2c39cba212aaaa6852aebd53f33c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TB-u6k--Q30lpSwl"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae lc" href="https://unsplash.com/@rotkif?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Wiktor Karkocha </a>拍摄的照片</p></figure><p id="9a25" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi lz translated"><span class="l ma mb mc bm md me mf mg mh di"> T </span>通过这篇文章，我试图使用包含德国租金价格的公寓租金数据集来预测租金价格。该数据集由从德国最大的房地产平台之一收集的数据组成。这里的主要目的是研究和理解数据，并利用这些知识构建一个基本预测模型来预测基础租赁价格(在德国通常称为“Kaltmiete”)。</p><p id="dff1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">原始数据集由 268850 个公寓(行)* 49 个要素(列)组成，但是缺失值和不平衡值的组合意味着在当前上下文中只有 14 个要素对我有用。这些列包含以下信息:</p><ol class=""><li id="52ba" class="mi mj iq lf b lg lh lj lk lm mk lq ml lu mm ly mn mo mp mq bi translated">公寓所在的联邦州。</li><li id="f309" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">供暖类型:</em>公寓使用的供暖系统类型。</li><li id="5df0" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">阳台:</em>列表示公寓是否有阳台。</li><li id="24f2" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">建造年份:</em> <strong class="lf ir"> </strong>公寓建造的年份。</li><li id="49c8" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr"> hasKitchen: </em>列表示公寓是否有厨房。</li><li id="03c5" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">地窖:</em>表示公寓是否有地窖的栏。</li><li id="b5af" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">基本租金:不包括电费和取暖费的租金。</li><li id="6023" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">居住空间:</em>以平方米为单位的居住空间。</li><li id="114a" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">状况:</em>持平的状况。</li><li id="c880" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">电梯:表示公寓是否有电梯的栏目。</li><li id="af67" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr"> typeOfFlat: </em>户型。</li><li id="0be1" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr"> noRooms: </em> <strong class="lf ir"> </strong>公寓房间总数。</li><li id="ff8f" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr">花园:</em>一栏表示公寓是否有花园。</li><li id="8aee" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated"><em class="mr"> regio2: </em> <strong class="lf ir"> </strong>公寓所在城市。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mx"><img src="../Images/544f41b1d330f8422240a910448891c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X1DTrciJtB1U9ZeTWTthow.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">数据框架一览(1/2)</p></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi my"><img src="../Images/7dfa0687aafb08317566ede280f10411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PAIlzHCA7hJ5DXQ4oXd0nA.png"/></div></div><p class="ky kz gj gh gi la lb bd b be z dk translated">数据框架一览(2/2)</p></figure><h2 id="9346" class="mz na iq bd nb nc nd dn ne nf ng dp nh lm ni nj nk lq nl nm nn lu no np nq nr bi translated"><strong class="ak">探索性数据分析:</strong></h2><p id="e331" class="pw-post-body-paragraph ld le iq lf b lg ns jr li lj nt ju ll lm nu lo lp lq nv ls lt lu nw lw lx ly ij bi translated">由于该数据集是通过网络抓取创建的，因此它远非干净。因此，挑战之一是摆脱极端和空值。例如，有几排居住空间超过 60 平方米。在€10-€30 的范围内，这是明显的异常值。还有几个房间总数超过 100 间的公寓。清理后研究得出以下结论:</p><p id="2670" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">1.德国平均房租最高的城市是慕尼黑，这并不奇怪，因为这座城市以生活成本高而闻名。慕尼黑市内及周边地区(用 München_Kreis 表示)也位列前十。有趣的事实是，紧随法兰克福排名第三的施塔恩堡是德国最富有的城镇。我很惊讶没有在名单上找到杜塞尔多夫和波恩。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/67d1488078e746feaf0735f46b03219a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*tGUduuOVzpeALBgqL781vw.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">各城市的平均租金</p></figure><p id="5b0d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">2.)汉堡是平均租金最高的联邦州，其次是柏林和拜仁(巴伐利亚)。东北部的萨克森-安哈尔特州和图林根州的价格最低。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/716db499e7c0274b34b53496d2424602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*4_aMjR4L_Zq7zi4Qbx9jIA.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">各州平均租金</p></figure><p id="a51e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">3.)应该是，居住空间的大小和基础租金价格似乎或多或少是正相关的。看起来像离群值的价格高的小(尺寸)公寓是位于市中心(柏林市中心，法兰克福)的公寓，这解释了成本。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0c404994d7bb85958078f98a220e83f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*qtkem7J2-8-mKfQBb_KhLQ.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">总租金与居住空间</p></figure><p id="f3cf" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">4.)德国最常见的基本租金价格在€300-€400 之间。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/e3fd9936bdb2f614297f0b6b6f471c50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*vUEFbosoGMeiuIQODCakoQ.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">德国的租金分配</p></figure><p id="4312" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">5.中央供暖系统似乎是德国家庭中最常见的供暖系统，远远超过其他任何一种。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/2987c57397aec71ee476eedbf94e0587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*t6QP0FqLBuQSEe6wPPEpCQ.png"/></div></figure><p id="18b1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">6.)大多数出售的公寓都有 3 个房间，属于“公寓”类型。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/a933bf362c10a647b1a4c263c57c71e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*04cK1zm1MXvvbZcWqiERbg.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">每套公寓的房间数</p></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/5c8af73b005345397ee71721ed530a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*b13dqJZdCS0zoTps4pv7sw.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">租赁类型</p></figure><h2 id="74fd" class="mz na iq bd nb nc nd dn ne nf ng dp nh lm ni nj nk lq nl nm nn lu no np nq nr bi translated"><strong class="ak">模型开发:</strong></h2><p id="a5b6" class="pw-post-body-paragraph ld le iq lf b lg ns jr li lj nt ju ll lm nu lo lp lq nv ls lt lu nw lw lx ly ij bi translated">在创建原型模型之前，转换数据集是很重要的。在将数据集输入模型之前，对数据集执行了以下预处理步骤。</p><ol class=""><li id="05b5" class="mi mj iq lf b lg lh lj lk lm mk lq ml lu mm ly mn mo mp mq bi translated">在<em class="mr">‘条件’</em>栏中的七个独特值(‘保持良好’，‘翻新’，‘第一次使用’，‘完全翻新’，‘全新状态’，<br/>，‘第一次使用’，‘翻新后’，‘现代化’，‘可协商’，【T5’，‘需要翻新’，‘适合拆除’)，被分成三个等级‘新’，‘旧’和‘中’公寓。这样做是为了获得更清晰的界限。</li><li id="c5e9" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">根据列值是真还是假，列【T6’‘阳台’，‘厨房’，‘地窖’，‘电梯’和【T8’‘花园’中的数据被编码为 1 或 0。</li><li id="4e4a" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">使用 sklearn 的 MinMaxScaler()对连续值变量<em class="mr"> 'baseRent '，' livingSpace' </em>和'<em class="mr"> noRooms </em>'进行标准化。虽然在处理基于树的算法时，这不是一个必要的步骤，但是它简化了可解释性，并且使得与其他模型的性能比较更加容易。</li><li id="7acc" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">分类变量使用一个热编码进行编码，通过熊猫的 get_dummies 变得容易。</li><li id="a1e7" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">列<em class="mr">‘base rent’</em>被<em class="mr"> </em>选为目标变量，其余为预测变量。</li><li id="0392" class="mi mj iq lf b lg ms lj mt lm mu lq mv lu mw ly mn mo mp mq bi translated">在应用上述步骤后，使用 sklearn 的 train_test_split 将数据集分成训练集(70%的数据)和测试集(30%的数据)。</li></ol><p id="bdbf" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我选择随机森林来开发原型，因为它是一个强大的模型，可以很好地处理连续变量和分类变量。</p><p id="4bf4" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">使用 RandomForestRegressor()对训练集拟合模型。使用测试集来检查模型的性能，获得了以下结果。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/75ef752e9d7288ed3d2d2c47bea8b125.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*bBDTMXx9vzI6f0wFp6pjpA.png"/></div><p class="ky kz gj gh gi la lb bd b be z dk translated">模型结果</p></figure><p id="3f18" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">该模型约占模型中数据的 83.4%，或者说该模型的预测能力为 0.83(最好为 1.0)，考虑到该模型是使用默认参数运行的且未进行调整，这已经相当不错了。MSE 和 MAE 也较低。</p><h2 id="d45b" class="mz na iq bd nb nc nd dn ne nf ng dp nh lm ni nj nk lq nl nm nn lu no np nq nr bi translated"><strong class="ak">结论:</strong></h2><p id="5701" class="pw-post-body-paragraph ld le iq lf b lg ns jr li lj nt ju ll lm nu lo lp lq nv ls lt lu nw lw lx ly ij bi translated">这种模式还能改进吗？是的，当然！。这个模型远远不是最好的模型。我的第一种方法是使用网格搜索技术进行超参数调整和交叉验证，以找到理想的参数。第二，原始数据集包含许多缺少数据的列，我选择从模型中排除这些数据，这意味着丢失了相当多的信息。使用领域知识的智能插补技术可以帮助解决这个问题。原始数据集还包含描述公寓设施和描述的列。通过使用 NLP 技术，可以从这些列中获得更多的信息。较重的特征工程也会有所帮助。不用说，我将使用这些步骤作为线索来提高模型的性能。</p><p id="15ff" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我很想听到你对此的反馈。如果您有任何问题或建议，可以联系<a class="ae lc" href="http://www.linkedin.com/in/vineeth-antony" rel="noopener ugc nofollow" target="_blank"> me </a>。感谢您的阅读。</p></div></div>    
</body>
</html>