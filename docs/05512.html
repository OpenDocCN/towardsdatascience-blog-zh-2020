<html>
<head>
<title>Building &amp; Deploying an Image Classification Web App with GCP AutoML Vision Edge, Tensorflow.js &amp; GCP App Engine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 GCP AutoML Vision Edge、Tensorflow.js 和 GCP 应用程序引擎构建和部署图像分类 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-deploying-an-image-classification-web-app-with-automl-vision-tensorflow-js-app-engine-08-3157958a3289?source=collection_archive---------22-----------------------#2020-05-09">https://towardsdatascience.com/building-deploying-an-image-classification-web-app-with-automl-vision-tensorflow-js-app-engine-08-3157958a3289?source=collection_archive---------22-----------------------#2020-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e870" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在本文中，我们将学习如何使用 AutoML 用最少的代码创建一个定制的图像分类 web 应用程序，并将其部署在 Google Cloud App Engine 上。</h2></div><p id="57d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将是一个很长的阅读。</p><p id="307c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这篇文章，我将建立一个模型，该模型将对一个人是否戴口罩进行分类。</p><blockquote class="lb"><p id="0a60" class="lc ld iq bd le lf lg lh li lj lk la dk translated"><strong class="ak"> <em class="ll">你可以通过访问这个</em> </strong> <a class="ae lm" href="https://mask-detection-pbl.el.r.appspot.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> <em class="ll">链接</em> </strong> </a> <strong class="ak"> <em class="ll">在有摄像头的笔记本电脑/PC 上检查我的项目，确保你的脸被很好地照亮，以便更好地预测。</em>T13】</strong></p></blockquote><p id="50e1" class="pw-post-body-paragraph kf kg iq kh b ki ln jr kk kl lo ju kn ko lp kq kr ks lq ku kv kw lr ky kz la ij bi translated">到本文结束时，你将能够仅仅通过改变数据集来建立你的图像分类模型。 </p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/95e4a74d7c3a8466ffbe05c3d396ea8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eqQet5K45m-lCMc7"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">照片由<a class="ae lm" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米切尔罗</a>在<a class="ae lm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><h1 id="9909" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">什么是 AutoML 视觉？</h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/e55ed80132bf03e4ea632ffc504c6b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*BQvqMo5noC-eksV4HyWuLg.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk translated"><a class="ae lm" href="https://commons.wikimedia.org/wiki/File:Cloud-AutoML-Logo.svg" rel="noopener ugc nofollow" target="_blank"> <strong class="bd nc">谷歌云汽车视觉</strong> </a></p></figure><blockquote class="lb"><p id="50f3" class="lc ld iq bd le lf nd ne nf ng nh la dk translated">AutoML 允许我们用我们的数据来训练我们的定制模型。它使用 NAS(神经架构搜索)来找到训练我们模型的最佳方法。我们唯一需要做的就是收集数据，提高模型的准确性。它极大地减少了从头开始编写代码来训练模型的工作量。</p></blockquote><h1 id="5d34" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw ni jx mv jz nj ka mx kc nk kd mz na bi translated">涉及的步骤</h1><blockquote class="nl nm nn"><p id="3596" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">设置&amp;配置一个谷歌云项目</strong></p><p id="49b7" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">设置自动视觉</strong></p><p id="3d6f" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">创建数据集</strong></p><p id="dc34" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">训练模型</strong></p><p id="448d" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">评估模型</strong></p><p id="b360" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">测试模型</strong></p><p id="e590" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">将模型导出为 TensorFlow.js 模型</strong></p><p id="333f" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">构建网络应用</strong></p><p id="76c7" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><strong class="kh ir">在应用引擎上托管应用</strong></p></blockquote><blockquote class="lb"><p id="95f5" class="lc ld iq bd le lf nd ne nf ng nh la dk translated">想跳过这些步骤，直接跳到代码吗？这些都可以在我的 GitHub 存储库中找到，网址是:</p></blockquote><div class="nr ns nt nu nv nw"><a href="https://github.com/singh08prashant/MaskDetection" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">信号 h 08 pra shant/屏蔽检测</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">更新:部署在 GCP 应用引擎。请登录查看🔗面具检测项目🚨仅适用于笔记本电脑/ PC It…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div></div></a></div></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="5794" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">1.设置和配置谷歌云项目</h1><p id="6aa0" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">前往<a class="ae lm" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云控制台</a>，使用你的谷歌账户登录，点击<a class="ae lm" href="https://console.cloud.google.com/projectselector2/home/dashboard?_ga=2.133780807.835643.1588838152-754110532.1565768056&amp;_gac=1.53697242.1587747564.CjwKCAjwnIr1BRAWEiwA6GpwNX8BFeLjryfMq9C2hfoL-9pCS1Wq6Z1a0K3bHFBZeQNceqTmBQCoTBoChQsQAvD_BwE" rel="noopener ugc nofollow" target="_blank">链接</a>创建一个新项目/选择一个现有项目。接下来，你需要为这个项目设置一个帐户。<a class="ae lm" href="https://cloud.google.com/billing/docs/how-to/modify-project" rel="noopener ugc nofollow" target="_blank">了解如何确认您的项目已启用计费</a>。</p><blockquote class="nl nm nn"><p id="b434" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated">如果你是学生，你可以在<a class="ae lm" href="https://edu.google.com/programs/students/benefits/?modal_active=none" rel="noopener ugc nofollow" target="_blank">edu.google.com</a>申请价值 50 美元/年的免费学分，获得免费实践培训等，而无需提交任何信用卡信息。</p></blockquote></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="35d2" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">2.设置自动视觉</h1><p id="f7fb" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">现在，让我们通过以下步骤来启用云 AutoML API。</p><p id="f8d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以通过点击左上角的<strong class="kh ir">导航菜单</strong>来查看包含谷歌云产品和服务列表的菜单。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ow"><img src="../Images/9c6adb56a85ee6386d5a55e79a04d5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*Q8lwSlAxkvwSXGJ4p9fNxw.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">导航菜单</p></figure><p id="acc9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<strong class="kh ir">导航菜单</strong>中选择<strong class="kh ir">API&amp;服务</strong> &gt; <strong class="kh ir">库</strong>。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/8969306854b4ced0ead35b52a4d42696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*lreyCaVDjLwgSjhc0kZQEw.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">导航菜单&gt; API 和服务&gt;库</p></figure><p id="1206" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在搜索栏中输入“Cloud AutoML”。点击<strong class="kh ir"> Cloud AutoML API </strong>结果。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi oy"><img src="../Images/2c5824c51476ba8c733c6361329de192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqmL6a5wIQ6B2DfDzk5PBA.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">在库中搜索云 AutoML API</p></figure><p id="3c16" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击<strong class="kh ir">启用</strong>启用云 AutoML API。这可能需要几分钟时间。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi oz"><img src="../Images/aab9a944777a3064a382aee243137314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpwgjabdCuIugy6jykuvDg.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">云 AutoML API 已启用</p></figure><p id="0e1a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从工具栏的右上角激活 Google Cloud Shell。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi pa"><img src="../Images/1d6001c7652934dde2dc89f239474704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iKOhRkopI1M5ydUY_3UxSQ.jpeg"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">激活云壳</p></figure><p id="31d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果出现提示，请单击<strong class="kh ir">继续</strong>等待外壳被提供和连接被建立。连接后，云壳应该是这样的:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi pb"><img src="../Images/fa0029ab25d206792a0318b7c30652ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r4uGWJ0cXZJTnHaZk6hFSw.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">云壳</p></figure><p id="6e69" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 Cloud Shell 中，使用以下命令为您创建环境变量<em class="ls">项目 ID </em>和<em class="ls">用户名</em>，将<code class="fe pc pd pe pf b">&lt;USERNAME&gt;</code>替换为您登录控制台时使用的 Google 帐户用户名:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="148e" class="pk mk iq pf b gy pl pm l pn po"><strong class="pf ir">export PROJECT_ID=$DEVSHELL_PROJECT_ID</strong></span><span id="d11b" class="pk mk iq pf b gy pp pm l pn po"><strong class="pf ir">export USERNAME=&lt;USERNAME&gt;</strong></span></pre><p id="e69c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在运行以下命令，为您的帐户授予 AutoML 管理权限:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="29a3" class="pk mk iq pf b gy pl pm l pn po"><strong class="pf ir">gcloud projects add-iam-policy-binding $PROJECT_ID \ <br/>    --member="user:$USERNAME" \<br/>    --role="roles/automl.admin"</strong></span></pre><p id="51d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将在区域<code class="fe pc pd pe pf b">us-central1</code>中创建一个云存储桶，使用以下命令(<strong class="kh ir"> <em class="ls">或者</em> </strong>来存储我们的图像，您可以使用 UI 通过转到<strong class="kh ir">导航菜单</strong> &gt; <strong class="kh ir">存储</strong> &gt; <strong class="kh ir">浏览器</strong> &gt; <strong class="kh ir">创建</strong> <strong class="kh ir">桶</strong>来执行相同的操作:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="c87e" class="pk mk iq pf b gy pl pm l pn po"><strong class="pf ir">gsutil mb -p $PROJECT_ID \ <br/>   -c standard    \<br/>   -l us-central1 \<br/>   gs://$PROJECT_ID-vcm/</strong></span></pre></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="bd6b" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">3.创建数据集</h1><p id="6533" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">下载图片并根据它们的标签存储在单独的文件夹中，例如，我将戴面具的人的图片存储在名为“面具”的目录中，将不带面具的人的图片存储在名为“无面具”的目录中，并压缩这些文件夹以便上传。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi pq"><img src="../Images/9cc03de294dec57aebbd1ed8169a1bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbnuvFOWqLycEEH-cTCj1g.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">我本地硬盘上的数据集</p></figure><p id="6f0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以使用此工具从互联网上批量下载图像。</p><div class="pr ps gp gr pt nw"><a href="https://github.com/singh08prashant/Image-Scrapping-with-python-and-selenium" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">Singh 08 prashant/Image-screwing-with python-and-selenium</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">一个 python 代码库，用提到的搜索词从 Google 浏览器下载图像。…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz md nw"/></div></div></a></div><p id="93f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们前往新浏览器窗口&amp;中的<a class="ae lm" href="https://console.cloud.google.com/vision/datasets" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> AutoML UI </strong> </a>点击<strong class="kh ir">新建</strong> <strong class="kh ir">数据集。</strong></p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qa"><img src="../Images/5979386b5f986bd29cc30fa14e666512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vQfuvfdOrah3wQwlJhQ_AA.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">创建新数据集</p></figure><p id="2685" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入一个<strong class="kh ir">数据集 nam </strong> e 并选择您的<strong class="kh ir">模型的目标</strong>。<strong class="kh ir"> </strong>如您所见，我选择了<strong class="kh ir">多标签分类</strong>来查看标签“屏蔽”&amp;“无屏蔽”的预测百分比。如果您希望您的图像一次属于一个类别，您可以选择<strong class="kh ir">单标签分类</strong>。点击<strong class="kh ir">创建数据集</strong>创建数据集。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qb"><img src="../Images/5b8a85304eb98bbdf786cbe7aa8c6816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewZ8Yb-yzJAbM98bI3RxsQ.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">将图像导入数据集</p></figure><p id="8dfd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在选择从您的计算机上传图像&gt;点击选择文件&gt;选择我们之前在本地磁盘上创建的 zip 文件。</p><p id="eb15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，您需要指定上传文件在云存储中的存储位置。点击<strong class="kh ir">浏览</strong> &amp;选择我们之前创建的名为<strong class="kh ir"><em class="ls">&lt;PROJECT-ID&gt;-VCM</em></strong>的 bucket。</p><p id="3c71" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击<strong class="kh ir">继续</strong>，等待文件导入到你的数据集中。</p><p id="50ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">图像导入完成后，您将能够在数据集中的图像选项卡下看到它们各自的标签。如果您对图像或标签不满意，您可以使用 UI 工具编辑/删除它们。</p><p id="159e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">理想情况下，我们应该为每个标签提供至少 100 张图片&amp;为了更好地表现模型，我们应该为每个标签提供相同数量的图片。但是，如果每个标签至少有 10 张图片，您可以继续训练。数据集以 8:1:1 的比例自动分为训练集、验证集和测试集。</p><p id="28df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在以下网址了解有关准备培训数据的更多信息:</p><div class="pr ps gp gr pt nw"><a href="https://cloud.google.com/vision/automl/object-detection/docs/prepare?_ga=2.20768254.-754110532.1565768056&amp;_gac=1.125051384.1587747564.CjwKCAjwnIr1BRAWEiwA6GpwNX8BFeLjryfMq9C2hfoL-9pCS1Wq6Z1a0K3bHFBZeQNceqTmBQCoTBoChQsQAvD_BwE" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">准备您的训练数据|云自动视觉对象检测</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">发送反馈一般图像要求支持的文件类型图像类型自动视觉对象检测模型有…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">cloud.google.com</p></div></div><div class="pu l"><div class="qc l pw px py pu pz md nw"/></div></div></a></div><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qa"><img src="../Images/b22bd594ca68f322f39e190a5851458a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZ9H5ElPV-z8kdOAOVZeEA.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">数据集中导入的图像</p></figure></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="6d16" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">4.训练模型</h1><p id="1d22" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">一旦您对数据集的导入和标记感到满意，进入<strong class="kh ir">训练</strong>选项卡并点击<strong class="kh ir">开始训练。</strong></p><p id="3e7a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在将要求您定义您的模型。为您的模型命名，并选择 Edge 以创建可下载的模型。点击<strong class="kh ir">继续。</strong></p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/3b6cdbe5d8149b684fcd5d0c0231b9d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*0FuILGN1wuJe8jARHFRzcA.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">定义您的模型</p></figure><p id="5437" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您需要指定您希望模型是快速的还是准确的。要在这两者之间找到平衡，请选择最佳权衡选项并单击继续。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qe"><img src="../Images/1cf629a511ad4cabb1d91f1c47598696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXmuU7uqdE-Cof23OGJWNQ.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">优化您的模型</p></figure><p id="b839" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，您将被要求为训练您的模型设置节点时间预算。你给的训练时间越多，准确率就越高。但是文档也告诉我们，如果模型停止改进，训练就会停止。选择推荐的节点小时预算是一个好的做法。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/9666ca73bb736b851c535f19ba03b2df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*gbVoCvNWf5ptbvYu3hcDzQ.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">设定节点时间预算</p></figure><p id="36f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击<strong class="kh ir">开始训练，你就可以开始训练你的模型了。</strong></p><p id="6828" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当你的模特在训练的时候，你可以关闭标签，也许可以喝杯咖啡放松一下。培训完成后，您将收到一封电子邮件通知。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="7e1f" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">5.评估您的模型</h1><p id="e954" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">一旦您收到电子邮件通知，您就可以开始评估您的模型，但在我们评估模型之前，我们应该了解<strong class="kh ir"> precision </strong>和<strong class="kh ir"> recall </strong>的含义。精确度指的是相关结果的百分比。另一方面，召回指的是被你的算法正确分类的总相关结果的百分比。你可以在这里了解更多关于 precision 和 recall <a class="ae lm" rel="noopener" target="_blank" href="/beyond-accuracy-precision-and-recall-3da06bea9f6c">。</a></p><div class="lu lv lw lx gt ab cb"><figure class="qg ly qh qi qj qk ql paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><img src="../Images/a92401df770fe0b23b2b5e744179a069.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*BPg0KxWZx7epCxrYKTW83Q.png"/></div></figure><figure class="qg ly qm qi qj qk ql paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><img src="../Images/884141b7d6c09e1e920a6ad34b56a918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*yB72A-OP_alDlEIRjRXNqA.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk qn di qo qp translated">混淆矩阵和其他模型指标</p></figure></div><p id="f9e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以看到许多新的术语，你可以在这里了解更多。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="bd7b" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">6.测试模型</h1><p id="b0c8" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">在<strong class="kh ir">测试下&amp;使用</strong>选项卡，点击<strong class="kh ir">上传图像</strong>按钮上传图像并生成预测。您一次可以上传 10 张图片。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi pb"><img src="../Images/a59f9bfd9668a972797fc100744b2df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FBhlfaGt7nCoSfVKjpUhzQ.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">在线预测</p></figure><p id="83fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能希望<code class="fe pc pd pe pf b">Remove Deployment</code>避免任何不必要的账单费用。</p><p id="2f40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">祝贺您，您已经成功创建了一个图像分类模型。但是等等，其他用户无法与之互动。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="680e" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">7.将模型导出为 TensorFlow.js 模型</h1><blockquote class="lb"><p id="1857" class="lc ld iq bd le lf lg lh li lj lk la dk translated">在我们继续之前，我们需要<code class="fe pc pd pe pf b">gsutil</code>:一个 Python 应用程序，它允许我们从命令行访问云存储。</p></blockquote><p id="6d61" class="pw-post-body-paragraph kf kg iq kh b ki ln jr kk kl lo ju kn ko lp kq kr ks lq ku kv kw lr ky kz la ij bi translated">如果你已经安装了<strong class="kh ir"> PyPI (Python 包索引)</strong>，你可以运行<code class="fe pc pd pe pf b"><a class="ae lm" href="https://cloud.google.com/storage/docs/gsutil_install#expandable-2-label" rel="noopener ugc nofollow" target="_blank">pip install gsutil</a></code>或者你可以<a class="ae lm" href="https://cloud.google.com/storage/docs/gsutil_install#sdk-install" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir">安装 gsutil 作为 Google Cloud SDK </strong> </a> <strong class="kh ir">的一部分。</strong></p><p id="3ab5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<strong class="kh ir">测试&amp;使用</strong>选项卡下，您可以看到导出和使用您的模型的许多不同选项，我们将使用 TensorFlow.js 模型。</p><blockquote class="lb"><p id="f048" class="lc ld iq bd le lf lg lh li lj lk la dk translated"><a class="ae lm" href="https://www.tensorflow.org/js" rel="noopener ugc nofollow" target="_blank"> TensorFlow.js </a>是一个帮助在浏览器中直接使用 ML 的库。AutoML 创建模型只需很少的时间，TensorFlow.js 是直接在浏览器中运行模型的最简单、最有效的方法。</p></blockquote><figure class="nr ns nt nu nv ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qq"><img src="../Images/0053b8e82905e0cf95819da9df124b56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fklk1E-RitYnbvGMwvRkTQ.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">使用你的模型</p></figure><p id="441f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择 TensorFlow.js &gt;在<strong class="kh ir">相同区域</strong> <code class="fe pc pd pe pf b">us-central1</code>指定或创建一个桶，将模型导出为 TensorFlow.js 包，点击<strong class="kh ir">导出。</strong>导出完成后，在命令提示符或终端中运行以下命令，通过将<code class="fe pc pd pe pf b">&lt;bucket-name&gt;</code>替换为将模型导出到&amp; <code class="fe pc pd pe pf b">&lt;local-folder&gt;</code>的存储桶的名称，将文件从云存储存储桶复制到本地目录，替换为您希望保存模型的本地目录的路径。</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="ad92" class="pk mk iq pf b gy pl pm l pn po"><strong class="pf ir">gsutil cp gs://&lt;cloud-storage-bucket&gt;/model-export/icn/* &lt;local-folder&gt;</strong></span><span id="81eb" class="pk mk iq pf b gy pp pm l pn po">for example<br/>gsutil cp gs://mask-detection-pbl-vcm/model-export/icn/* Downloads</span></pre><p id="f9fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦模型被下载，你会看到一个<code class="fe pc pd pe pf b">model.json</code>文件，它包含张量信息以及权重文件名，<code class="fe pc pd pe pf b">.bin</code>文件包含模型权重&amp;一个<code class="fe pc pd pe pf b">dict.txt</code>文件，包含标签，在我的例子中是<code class="fe pc pd pe pf b">Mask</code> &amp; <code class="fe pc pd pe pf b">No Mask</code>。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qr"><img src="../Images/d23424edbbbf49842d9b2587cdb09d11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mQIqL96qeI4vqo5r94pg4Q.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">下载的模型</p></figure></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="4a5c" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">8.编写 Web 应用程序</h1><p id="125d" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated"><strong class="kh ir"> <em class="ls"> 8.1 创建 index.html 文件</em> </strong></p><p id="f6e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在同一个文件夹中，创建一个<code class="fe pc pd pe pf b">index.html</code>文件并复制以下代码:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="93c4" class="pk mk iq pf b gy pl pm l pn po">&lt;html&gt;<br/>&lt;head&gt;<br/>&lt;script src="<a class="ae lm" href="https://unpkg.com/@tensorflow/tfjs" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@tensorflow/tfjs</a>"&gt;&lt;/script&gt;<br/>&lt;script src="<a class="ae lm" href="https://unpkg.com/@tensorflow/tfjs-automl" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@tensorflow/tfjs-automl</a>"&gt;&lt;/script&gt;<br/>&lt;/head&gt;</span><span id="2670" class="pk mk iq pf b gy pp pm l pn po">&lt;body &gt;<br/> <br/>&lt;video autoplay playsinline muted id="webcam" width="224" height="224"&gt; <br/>&lt;/video&gt;<br/> <br/>&lt;div id="predictions-mask"&gt;&lt;/div&gt;<br/>&lt;div id="predictions-no-mask"&gt;&lt;/div&gt;<br/> <br/>&lt;button type="button" id="startPredicting" onclick="startPredicting()"&gt; Start Predicting &lt;/button&gt;<br/>&lt;button type="button" id="stopPredicting" onclick="stopPredicting()" &gt;Stop Predicting&lt;/button&gt;<br/>&lt;script src= "index.js"&gt;&lt;/script&gt;<br/>&lt;/center&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3db7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe pc pd pe pf b">tfjs-automl</code>和<code class="fe pc pd pe pf b">tfjs</code>脚本包含运行模型所需的函数。如果您想要离线使用模型，您可以下载这些脚本的副本，并将其包含在您的<code class="fe pc pd pe pf b">html</code>文件中。</p><p id="febe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标签在网页上创建一个视频元素。2 个<code class="fe pc pd pe pf b">&lt;div&gt;</code>将用于写入模型的预测。这些按钮将分别用于启动&amp;停止预测。脚本<code class="fe pc pd pe pf b">&lt;index.js&gt;</code>是我们实现模型的地方。</p><p id="0eed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="ls"> 8.2 创建 index.js 文件</em> </strong></p><p id="7909" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将在同一个文件夹中创建一个<code class="fe pc pd pe pf b">&lt;index.js&gt;</code>文件，并复制以下代码:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="96d8" class="pk mk iq pf b gy pl pm l pn po">const webcamElement= document.getElementById('webcam');</span><span id="9bc6" class="pk mk iq pf b gy pp pm l pn po">let net;</span><span id="78b5" class="pk mk iq pf b gy pp pm l pn po">let isPredicting = false;</span><span id="ab99" class="pk mk iq pf b gy pp pm l pn po">function startPredicting(){<br/> isPredicting=true;<br/> app();<br/>}</span><span id="b6f3" class="pk mk iq pf b gy pp pm l pn po">function stopPredicting(){<br/> isPredicting=false;<br/> app();<br/>}</span><span id="cdac" class="pk mk iq pf b gy pp pm l pn po">async function app(){<br/> console.log('Loading model..');<br/> net= await tf.automl.loadImageClassification('model.json');<br/> console.log('Successfully loaded model');<br/> <br/> const webcam = await tf.data.webcam(webcamElement);<br/> while(isPredicting){<br/> const img = await webcam.capture();<br/> const result = await net.classify(img);<br/> <br/> console.log(result);<br/> <br/> document.getElementById("predictions-mask").innerText=result['0']['label']+": "+Math.round(result['0']['prob']*100)+"%";<br/> document.getElementById("predictions-no-mask").innerText=result['1']['label']+": "+Math.round(result['1']['prob']*100)+"%";</span><span id="ad3b" class="pk mk iq pf b gy pp pm l pn po">img.dispose();<br/> <br/>await tf.nextFrame();<br/> <br/> }<br/> <br/>}</span></pre><p id="099a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能会被这段代码弄得不知所措，所以让我来为您解释一下。这里，在异步函数<code class="fe pc pd pe pf b">app()</code>中，<code class="fe pc pd pe pf b">tf.automl.loadImageClassification()</code>为我们加载模型<code class="fe pc pd pe pf b">model.json</code>，并将其存储为<code class="fe pc pd pe pf b">net</code>。</p><p id="2eb1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe pc pd pe pf b">tf.data.webcam()</code>将设置网络摄像头。<code class="fe pc pd pe pf b">webcam.capture()</code>将通过网络摄像头从实时输入中捕捉图像，并将其存储为<code class="fe pc pd pe pf b">img</code>。</p><p id="c279" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们使用<code class="fe pc pd pe pf b">net.classify(img)</code>将该图像传递给模型，预测结果存储在变量<code class="fe pc pd pe pf b">result</code>中。</p><p id="3c3b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数<code class="fe pc pd pe pf b">startPredicting()</code> &amp; <code class="fe pc pd pe pf b">stopPredicting()</code>作为开关触发图像分类的无限循环。</p><p id="e415" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你可能想知道这些行是做什么的:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="f788" class="pk mk iq pf b gy pl pm l pn po">document.getElementById("predictions-mask").innerText=result['0']['label']+": "+Math.round(result['0']['prob']*100)+"%";<br/> document.getElementById("predictions-no-mask").innerText=result['1']['label']+": "+Math.round(result['1']['prob']*100)+"%";</span></pre><p id="a5a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到的输出以这种形式存储在<code class="fe pc pd pe pf b">result</code>中</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="a4d8" class="pk mk iq pf b gy pl pm l pn po">[0: {label: “Mask”, prob: 0.048721060156822205}, 1: {label: “No Mask”, prob: 0.9479466080665588}]</span></pre><p id="507f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码用来在 HTML 页面上把这个结果写成<code class="fe pc pd pe pf b">Mask: 5%</code> &amp; <code class="fe pc pd pe pf b">No Mask: 95%</code>。</p><p id="ddbe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，<code class="fe pc pd pe pf b">img.dispose()</code>释放张量来释放内存&amp; <code class="fe pc pd pe pf b">tf.nextFrame()</code>通过等待下一个动画帧触发来提供一些喘息空间。</p><blockquote class="lb"><p id="4a9f" class="lc ld iq bd le lf lg lh li lj lk la dk translated">要运行 Chrome  &amp;网络应用下载和启动<a class="ae lm" href="https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb/related?hl=en" rel="noopener ugc nofollow" target="_blank">网络服务器，请选择代码所在的目录。</a></p></blockquote><p id="81e3" class="pw-post-body-paragraph kf kg iq kh b ki ln jr kk kl lo ju kn ko lp kq kr ks lq ku kv kw lr ky kz la ij bi translated">该应用程序应该如下所示:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi qs"><img src="../Images/c38dd8c787fece3e2ed5243181cd6b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*C-DnuN_k1kasuzKoXNlHSA.png"/></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">Web 应用程序</p></figure><p id="32f2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随意添加一些 CSS 到网页上，让它看起来更漂亮。</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="73db" class="mj mk iq bd ml mm om mo mp mq on ms mt jw oo jx mv jz op ka mx kc oq kd mz na bi translated">9.在应用引擎上托管<strong class="ak">应用</strong></h1><p id="6aab" class="pw-post-body-paragraph kf kg iq kh b ki or jr kk kl os ju kn ko ot kq kr ks ou ku kv kw ov ky kz la ij bi translated">登录到您的 Google 云控制台，启动云外壳并打开编辑器。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi pb"><img src="../Images/739d4175ccf9f2879888e758a5a2c456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVKjW7eKiSC9tPU-GSa-8g.jpeg"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">打开编辑器</p></figure><p id="dc4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在编辑器里面创建一个目录，姑且称之为<code class="fe pc pd pe pf b">www</code> &amp;在这个目录里面上传你所有与模型和网页相关的文件。</p><p id="30ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在根目录下(在<code class="fe pc pd pe pf b">www</code>之外)创建一个文件<code class="fe pc pd pe pf b">app.yaml</code> &amp;将下面的代码粘贴在里面:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="40e6" class="pk mk iq pf b gy pl pm l pn po">runtime: python27<br/>api_version: 1<br/>threadsafe: true<br/><br/>handlers:<br/>- url: /<br/>  static_files: www/index.html<br/>  upload: www/index.html<br/><br/>- url: /(.*)<br/>  static_files: www/\1<br/>  upload: www/(.*)</span></pre><blockquote class="nl nm nn"><p id="7ec1" class="kf kg ls kh b ki kj jr kk kl km ju kn no kp kq kr np kt ku kv nq kx ky kz la ij bi translated"><code class="fe pc pd pe pf b">app.yaml</code>文件是一个配置文件，它告诉 App Engine 如何将 URL 映射到静态文件。在接下来的步骤中，您将添加处理程序，当有人访问您的网站时，这些处理程序将加载<code class="fe pc pd pe pf b">www/index.html</code>，所有静态文件将存储在<code class="fe pc pd pe pf b">www</code>目录中，并从该目录中调用。</p></blockquote><p id="ea2c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保存文件。您的编辑器应该是这样的:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi qt"><img src="../Images/363ae6ed6b167b10eca44f57901648f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRRHunLw_0fZA1YwTfK_yQ.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">编辑器的目录结构</p></figure><p id="45d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在切换到云 shell 并运行以下命令来部署 web 应用程序:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="20f2" class="pk mk iq pf b gy pl pm l pn po">gcloud app deploy</span></pre><p id="b5ef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在<code class="fe pc pd pe pf b">https://PROJECT_ID.REGION_ID.r.appspot.com</code>启动浏览器并查看应用程序，请运行以下命令:</p><pre class="lu lv lw lx gt pg pf ph pi aw pj bi"><span id="e2b3" class="pk mk iq pf b gy pl pm l pn po">gcloud app browse</span></pre><h1 id="47a3" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">结论</h1><blockquote class="lb"><p id="a8b1" class="lc ld iq bd le lf lg lh li lj lk la dk translated">这样，我们已经成功地在 Google Cloud 上构建和部署了一个图像分类 web 应用程序。<strong class="ak">非常感谢</strong>耐心阅读。</p><p id="09a2" class="lc ld iq bd le lf lg lh li lj lk la dk translated">你可以在<a class="ae lm" href="https://www.linkedin.com/in/prashant-singh-08/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>&amp;<a class="ae lm" href="https://twitter.com/s08prashant" rel="noopener ugc nofollow" target="_blank">Twitter</a>上和我联系。</p></blockquote><h1 id="7e8f" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw ni jx mv jz nj ka mx kc nk kd mz na bi translated">参考</h1><div class="pr ps gp gr pt nw"><a href="https://cloud.google.com/docs" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">谷歌云平台|文档</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Google 云平台产品和服务的全面文档、指南和资源。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">cloud.google.com</p></div></div><div class="pu l"><div class="qu l pw px py pu pz md nw"/></div></div></a></div></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><div class="lu lv lw lx gt nw"><a href="https://heartbeat.fritz.ai/automl-vision-edge-loading-and-running-a-tensorflow-js-model-part-2-9b4d62a7d5cc" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">AutoML Vision Edge:加载和运行 TensorFlow.js 模型(第 2 部分)</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">在 Node.js 服务器上运行 TensorFlow.js 模型</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">heartbeat.fritz.ai</p></div></div><div class="pu l"><div class="qv l pw px py pu pz md nw"/></div></div></a></div></div></div>    
</body>
</html>