<html>
<head>
<title>10 Things You Didn’t Know About Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于熊猫你不知道的 10 件事</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/10-things-you-didnt-know-about-pandas-d20f06d1bf6b?source=collection_archive---------15-----------------------#2020-09-06">https://towardsdatascience.com/10-things-you-didnt-know-about-pandas-d20f06d1bf6b?source=collection_archive---------15-----------------------#2020-09-06</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="e487" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">直到现在…</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/85428d34249a670df534a01e158aa6aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BSzyChQlmQtB4tF2i2WGQ.jpeg"/></div></div><p class="kv kw gk gi gj kx ky bd b be z dk translated">乔恩·泰森在<a class="ae kz" href="https://unsplash.com/s/photos/question?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8670" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Pandas 是使用 Python 执行数据分析的权威库。它最初是由一家名为 AQR Capital Management 的公司开发的，但在 2009 年被开源用于一般用途。</p><p id="34f3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">它迅速成为 Python 用户数据分析的首选工具，现在拥有大量用于数据提取、操作、可视化和分析的功能。</p><p id="200c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">熊猫有许多有用的方法和功能，这里是关于这个库你可能不知道的十件事。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="d451" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">熊猫可以 pip 安装，如果你还没有它。完整的文档，以及一些优秀的通用数据分析教程，可以在<a class="ae kz" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="029c" class="mi mj iu me b gz mk ml l mm mn">pip install pandas</span></pre><p id="ee2c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在整篇文章中，我将使用“汽车”数据集提供代码示例，该数据集包含汽车的各种特征及其相应的保险风险评级。该数据集通常用作机器学习分类任务，目标是预测汽车的风险评级。</p><p id="cbae" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在建立机器学习模型之前，数据分析是一个重要的初步步骤。</p><p id="ca2c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果您有 Scikit-learn，可以使用下面的代码导入数据集。或者，也可以在这里下载<a class="ae kz" href="https://www.openml.org/d/9" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="66b6" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">1.您可以创建类似 Excel 的数据透视表</h1><p id="022a" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">数据透视表通常被认为是 Excel 最强大的功能之一。它们通过对变量进行分组、过滤和计算，使用户能够快速理解包含在非常大的数据集中的模式和特征。</p><p id="ac24" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Pandas 库包含允许你创建<a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.pivot_table.html" rel="noopener ugc nofollow" target="_blank">数据透视表</a>的方法，这些数据透视表与 Excel 和其他电子表格工具中的数据透视表非常相似。</p><p id="4345" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码使用 Pandas 数据透视表根据汽车拥有的气缸数量来比较汽车的保险风险评级。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nm"><img src="../Images/23a0f79dedcec2bb730988149408b659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MOs3yZjnPGZFe-q1NZG1eA.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="9d7f" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">2.describe()函数也可用于分析非数字特征</h1><p id="fcb8" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">pandas <code class="fe nn no np me b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.describe.html" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">describe()</strong></a></code>函数可以快速生成描述性统计数据的摘要，默认情况下，只针对数据集中的数值。然而，这个非常有用的 Pandas 工具也能够通过简单地添加<code class="fe nn no np me b">include=’all’</code>参数来提供非数字列的摘要。</p><p id="54ce" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这对于包含分类变量的维度等信息非常有帮助，这些信息有助于为机器学习的转换策略提供信息。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="65b7" class="mi mj iu me b gz mk ml l mm mn">data.describe(include='all')</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nq"><img src="../Images/33ab17887eec7066c38b17c5b5c5cd14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsurRH7X4L_5NB4pGMkDbg.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="a31c" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">3.内置统计函数</h1><p id="ef61" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">就像 Excel Pandas 一样，它包含了大量的<a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/computation.html" rel="noopener ugc nofollow" target="_blank">计算工具</a>，可以将常用的统计方法应用到数据中。例如，使用<code class="fe nn no np me b">corr() </code>方法可以快速计算出数据集中变量之间的相关性。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="d1f6" class="mi mj iu me b gz mk ml l mm mn">round(data.corr(),2)</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nr"><img src="../Images/1f0513f810ac582230298cc63768d03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eFX3d84vuYYUfEw8aHk58w.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="c701" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">4.绘图功能</h1><p id="d891" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">Pandas 具有内置绘图功能，允许您从数据框、分组或数据透视表中快速创建最常见类型的绘图。</p><p id="3ff9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下代码创建了一个散点图，在我们的数据框架中比较发动机大小和马力。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="9e00" class="mi mj iu me b gz mk ml l mm mn">data.plot.scatter(x='engine-size', y='horsepower')</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ns"><img src="../Images/f614e1b60f7b904a583f7b6434b8a1dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4u4aDtIzIYaKDhiorIhbw.png"/></div></div></figure><p id="ae42" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">只需将<code class="fe nn no np me b">.plot()</code>添加到我之前创建的数据透视表中，就可以生成汇总数据的图表。</p><pre class="kk kl km kn gu md me mf mg aw mh bi"><span id="2c05" class="mi mj iu me b gz mk ml l mm mn">pivot_table.plot()</span></pre><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nt"><img src="../Images/66f43f0f15e5e97f25a775ebb6e7dee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EXud7EP-Nx7JC6HbIvcb6A.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="2b64" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">5.更漂亮的情节</h1><p id="fcda" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">默认情况下，Pandas 绘图方法使用 Matplotlib 作为可视化的后端。然而，Pandas 也支持许多其他的 Python 绘图库。</p><p id="06f9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，要更改后端并使用散景进行可视化，只需使用以下代码。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><p id="c0e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这提供了一个更丰富的，交互式的可视化。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj nu"><img src="../Images/451c5a84ad94e833a8dafacf359b1df9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GtXL3_ILA1816AIhB-tQUg.png"/></div></div></figure><p id="f5b8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">关于熊猫可视化使用不同后端的更详细的教程，见下面我以前的文章。</p><div class="nv nw gq gs nx ny"><a rel="noopener follow" target="_blank" href="/plotting-in-pandas-just-got-prettier-289d0e0fe5c0"><div class="nz ab fp"><div class="oa ab ob cl cj oc"><h2 class="bd iv gz z fq od fs ft oe fv fx it bi translated">熊猫里的情节越来越漂亮了</h2><div class="of l"><h3 class="bd b gz z fq od fs ft oe fv fx dk translated">创建丰富的可视化和仪表板与熊猫绘图后端为 Plotly 和 Bokeh</h3></div><div class="og l"><p class="bd b dl z fq od fs ft oe fv fx dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kt ny"/></div></div></a></div></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ed60" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">6.分割-应用-组合策略的工具</h1><p id="38b4" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">Hadley Wickham 在 2011 年发表的一篇论文<a class="ae kz" href="https://www.jstatsoft.org/article/view/v040i01" rel="noopener ugc nofollow" target="_blank">中首次概述了拆分-应用-合并这一有用的数据分析策略</a>。本文详细介绍了一种常见的数据分析模式，通过这种模式，数据首先被分解为合理的、可管理的块或段，对每个单独的段执行操作，然后再次拼凑在一起以形成比较。</p><p id="9e2e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这种数据分析模式可以在数据透视表中看到，正如我们在上面描述的那样，也可以在 SQL group by 语句中看到。除了数据透视表，Pandas 还提供了另一种利用这种策略的方法，称为<code class="fe nn no np me b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html" rel="noopener ugc nofollow" target="_blank"><strong class="lc iv">groupby()</strong></a></code>。</p><p id="36b2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这种方法，在一行代码中，允许您将数据集分解成片段，执行一些统计计算，然后将这些片段重新组合在一起进行比较。</p><p id="0b0d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">以下代码按目标变量中的唯一值对数据进行分段，计算每列的平均值，然后显示结果。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj on"><img src="../Images/db1445e2ab0c4dda51c25d54105470fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dHxmCG1bv6pqPWlm-0W3XQ.png"/></div></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="36d7" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">7.美观时尚的桌子</h1><p id="593c" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">如果你想用熊猫分享你的数据分析结果，那么你可能会想让你的数据表看起来更好，更容易被人类消化。Pandas 有一系列的样式选项<a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html" rel="noopener ugc nofollow" target="_blank"/>来控制结果在数据框中的显示方式。</p><p id="130e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">样式选项可以更改数字的显示方式，例如，在百分点上添加%符号、控制小数位数、在结果中添加条件格式或突出显示特定值。</p><p id="ea0b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码将适当的样式应用于我们的数据集中选择的列。输出现在更容易阅读了。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/92f5e84d23b45f980255159564ee9996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*hUrkN8T_ieEa077zNWVkpg.png"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="bf5c" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">8.使用内置样式轻松创建热图</h1><p id="9235" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">熊猫内置了一些常见的风格模式。您可以使用其中之一轻松创建热图。</p><p id="254f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的代码将热图格式应用于我们之前创建的 data_summary。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj op"><img src="../Images/8560782c040f2f507935ab57cb0e2b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*0OQ9x04d4yEJVvklXsAUUA.png"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ad3b" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">9.使用熊猫选项来控制显示</h1><p id="33fa" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">熊猫有一系列选项，你可以设置它们来控制数据帧的输出。这些可以用来控制要显示的最大行数或列数、显示浮点数时使用的小数位数以及日期显示的格式。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="af4c" class="mq mj iu bd mr ms mt mu mv mw mx my mz ka na kb nb kd nc ke nd kg ne kh nf ng bi translated">10.给表格添加标题</h1><p id="8fd4" class="pw-post-body-paragraph la lb iu lc b ld nh jv lf lg ni jy li lj nj ll lm ln nk lp lq lr nl lt lu lv in bi translated">还有一系列样式可以添加到表格中，以增强数据之外的显示。</p><p id="efa9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">例如，您可以像这样给表格添加标题。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mo mp l"/></div></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oq"><img src="../Images/1790bea3c9e33fd689dbf632f252b979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*I9RBXB91lizaLnxeN1Xeyg.png"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><p id="5f97" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢阅读！</p><p id="53fe" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我每月都会发一份简讯，如果你想加入，请点击此链接注册。期待成为您学习旅程的一部分！ </p></div></div>    
</body>
</html>