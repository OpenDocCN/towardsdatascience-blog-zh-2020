<html>
<head>
<title>Python Interface to COVID-19 Data Hub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎数据中心的 Python 接口</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-interface-to-covid-19-data-hub-c2b3f69497af?source=collection_archive---------38-----------------------#2020-08-27">https://towardsdatascience.com/python-interface-to-covid-19-data-hub-c2b3f69497af?source=collection_archive---------38-----------------------#2020-08-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1fc8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">统一数据集有助于更好地了解新冠肺炎。</h2></div><p id="8685" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lb">编者注:</em> </strong> <em class="lb"> </em> <a class="ae lc" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="lb">走向数据科学</em> </a> <em class="lb">是一份以研究数据科学和机器学习为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae lc" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="lb">这里</em> </a> <em class="lb">。</em></p><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/1697514e35e864a32ae75287ac752066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lb-zVU7cFk4_cwd6pHUXng.jpeg"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">图片来自<a class="ae lc" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4948866" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lc" href="https://pixabay.com/users/MiroslavaChrienova-6238194/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=4948866" rel="noopener ugc nofollow" target="_blank">米洛丝拉娃·克里斯诺娃</a></p></figure><p id="ce2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">新冠肺炎数据中心的目标是通过收集世界范围内的精细案例数据，结合有助于更好地了解新冠肺炎的外部变量，为研究社区提供一个统一的数据集。请同意<a class="ae lc" href="https://covid19datahub.io/LICENSE.html" rel="noopener ugc nofollow" target="_blank">使用条款</a>，并在使用时引用以下参考:</p><p id="7e7f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">参考</strong></p><p id="35a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Guidotti，e . Ardia，d .(2020 年)。<br/>https://doi.org/10.21105/joss.02376 数据中心<br/> <em class="lb">开源软件杂志</em>，<strong class="kh ir">5</strong>(51):2376<br/>T37</p><h2 id="e00e" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">设置和使用</h2><p id="300f" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">从<a class="ae lc" href="https://pypi.org/project/covid19dh/" rel="noopener ugc nofollow" target="_blank">管道</a>安装</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="6aca" class="lt lu iq ms b gy mw mx l my mz">pip install covid19dh</span></pre><p id="de74" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导入主功能<code class="fe na nb nc ms b">covid19()</code></p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="03fb" class="lt lu iq ms b gy mw mx l my mz">from covid19dh import covid19<br/>x, src = covid19()</span></pre><h2 id="98d9" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">返回值</h2><p id="4254" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">函数<code class="fe na nb nc ms b">covid19()</code>返回 2 个熊猫数据帧:</p><ul class=""><li id="f115" class="nd ne iq kh b ki kj kl km ko nf ks ng kw nh la ni nj nk nl bi translated">数据和</li><li id="b2af" class="nd ne iq kh b ki nm kl nn ko no ks np kw nq la ni nj nk nl bi translated">对数据源的引用。</li></ul><h2 id="1af8" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">参数化</h2><h2 id="67d3" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">国家</h2><p id="1b4e" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">国家名称(不区分大小写)或 ISO 代码(字母 2、字母 3 或数字)的列表。ISO 代码列表可在的<a class="ae lc" href="https://github.com/covid19datahub/COVID19/blob/master/inst/extdata/db/ISO.csv" rel="noopener ugc nofollow" target="_blank">处找到。</a></p><p id="ff84" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从特定国家获取数据:</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="94b2" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19("USA") # Unites States</span></pre><p id="62c9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同时指定多个国家:</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="abef" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19(["ESP","PT","andorra",250])</span></pre><p id="f87f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果省略<code class="fe na nb nc ms b">country</code>，则返回整个数据集:</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="c81d" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19()</span></pre><h2 id="12bf" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">原始数据</h2><p id="e1a5" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">合乎逻辑。跳过数据清理？默认<code class="fe na nb nc ms b">True</code>。如果是<code class="fe na nb nc ms b">raw=False</code>，则通过用<code class="fe na nb nc ms b">NaN</code>值填充缺失的日期来清除原始数据。这确保了所有地点共享相同的日期网格，并且没有一天被跳过。然后，<code class="fe na nb nc ms b">NaN</code>值被替换为之前的非<code class="fe na nb nc ms b">NaN</code>值或<code class="fe na nb nc ms b">0</code>。</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="0636" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19(raw = False)</span></pre><h2 id="cdaf" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">日期过滤器</h2><p id="0ad4" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">日期可以用<code class="fe na nb nc ms b">datetime.datetime</code>、<code class="fe na nb nc ms b">datetime.date</code>或格式<code class="fe na nb nc ms b">YYYY-mm-dd</code>中的<code class="fe na nb nc ms b">str</code>指定。</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="bbbe" class="lt lu iq ms b gy mw mx l my mz">from datetime import datetime<br/>x, src = covid19("SWE", start = datetime(2020,4,1), end = "2020-05-01")</span></pre><h2 id="b6b6" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">水平</h2><p id="6266" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">整数。数据的粒度级别:</p><ol class=""><li id="e423" class="nd ne iq kh b ki kj kl km ko nf ks ng kw nh la nr nj nk nl bi translated">国家一级</li><li id="2efa" class="nd ne iq kh b ki nm kl nn ko no ks np kw nq la nr nj nk nl bi translated">州、地区或县一级</li><li id="aa27" class="nd ne iq kh b ki nm kl nn ko no ks np kw nq la nr nj nk nl bi translated">城市或自治市一级</li></ol><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="3958" class="lt lu iq ms b gy mw mx l my mz">from datetime import date<br/>x, src = covid19("USA", level = 2, start = date(2020,5,1))</span></pre><h2 id="f9e0" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">隐藏物</h2><p id="b0a3" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">合乎逻辑。内存缓存？显著提高连续呼叫的性能。默认情况下，启用使用缓存数据。</p><p id="9838" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以通过以下方式禁用缓存(例如，对于长时间运行的程序):</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="b6d3" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19("FRA", cache = False)</span></pre><h2 id="df8a" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">过时的</h2><p id="ac15" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">合乎逻辑。检索在<code class="fe na nb nc ms b">end</code>日期生成的数据集快照，而不是使用最新版本。默认<code class="fe na nb nc ms b">False</code>。</p><p id="201e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，获取 2020 年 4 月 22 日<em class="lb">可访问的美国数据</em>类型</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="1321" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19("USA", end = "2020-04-22", vintage = True)</span></pre><p id="e332" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">葡萄酒数据在一天结束时收集，但在所有时区的一天结束后，会延迟大约 48 小时发布。</p><p id="0bd7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果<code class="fe na nb nc ms b">vintage = True</code>未置位，但<code class="fe na nb nc ms b">end</code>未置位，则发出警告并返回<code class="fe na nb nc ms b">None</code>。</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="7102" class="lt lu iq ms b gy mw mx l my mz">x, src = covid19("USA", vintage = True) # too early to get today's vintage</span><span id="bb9d" class="lt lu iq ms b gy ns mx l my mz">UserWarning: vintage data not available yet</span></pre><h2 id="dde0" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">数据源</h2><p id="1dd2" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">数据源作为第二个值返回。</p><pre class="le lf lg lh gt mr ms mt mu aw mv bi"><span id="5192" class="lt lu iq ms b gy mw mx l my mz">from covid19dh import covid19<br/>x, src = covid19("USA")<br/>print(src)</span></pre><h2 id="bfee" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">结论</h2><p id="e059" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">新冠肺炎数据中心协调了疫情各地的大量异构数据。它代表了新冠肺炎在开放公共数据标准和共享方面的首次努力。使用新冠肺炎数据中心的出版物可在<a class="ae lc" href="https://scholar.google.com/scholar?oi=bibs&amp;hl=en&amp;cites=1585537563493742217" rel="noopener ugc nofollow" target="_blank">此处</a>获得。</p><h2 id="fa25" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">感谢</h2><p id="bf05" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">新冠肺炎数据中心得到了加拿大数据评估研究所的支持。<a class="ae lc" href="https://pypi.org/project/covid19dh/" rel="noopener ugc nofollow" target="_blank"> covid19dh </a>包是由<a class="ae lc" href="https://pypi.org/user/martinbenes1996/" rel="noopener ugc nofollow" target="_blank">马丁·贝内什</a>开发的。</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="4f4b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[1]吉多蒂，即阿尔迪亚，d .(2020)。<a class="ae lc" href="https://doi.org/10.21105/joss.02376" rel="noopener ugc nofollow" target="_blank">新冠肺炎数据中心</a>，《开源软件杂志》，5(51):2376</p></div></div>    
</body>
</html>