<html>
<head>
<title>Batch-Resizing Images in Python with Pillow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Pillow 在 Python 中批量调整图像大小</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/batch-resizing-images-in-python-with-pillow-94f558b1759b?source=collection_archive---------21-----------------------#2020-05-05">https://towardsdatascience.com/batch-resizing-images-in-python-with-pillow-94f558b1759b?source=collection_archive---------21-----------------------#2020-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3827" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">一个重要的 PYTHON 技巧</h2><div class=""/><div class=""><h2 id="183d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一步一步的使用 Python 调整图片大小的指南</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/8ac86592577a924d06c9f5b03ac4620b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TwLsel69qIWbQn7hu6KUbA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带枕头的蟒蛇插图作者<a class="ae lh" href="https://medium.com/@chaeyunkim" rel="noopener">金彩云</a></p></figure><p id="02bc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">有时你需要为你的项目编辑大量的图片。例如，在 web 开发中，大容量调整图像大小是为了使所有图像变得更小、更亮，以优化通过 web 的传输速度。在数据科学中，您可能需要提高所有图像的 DPI，以便在科学文章中发布。在图像处理软件中自己管理它们可能会很无聊。所以，你可以试着用枕头自动为你做这项工作！</p><p id="0d76" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这篇短文将通过一个示例脚本，一步步向您展示如何使用 Python <strong class="lk jd"> </strong>中的<strong class="lk jd"> Pillow </strong>，重点关注批量调整图像大小。即使这个<strong class="lk jd"> Pillow </strong>库已经推出很久了，它仍然像在 2020 年一样强大和非常有用。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/05fde1732498a3d30834530e9ad9cd01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sr1Ad0RmXY_FmQg-UPCNNw.gif"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用 Python 和 Pillow 调整文件夹中所有图像大小的示例。(作者 gif)</p></figure><p id="31a6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，上面的 gif 图像显示，Python with Pillow 只需大约 8-10 行代码就可以调整/重缩放一个文件夹中的所有图像文件。Pillow 可以完成多种操作，如调整大小、重新缩放、旋转、变换、在文件格式之间转换、增强对比度等等。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="9ba3" class="mv mw it bd mx my mz na nb nc nd ne nf ki ng kj nh kl ni km nj ko nk kp nl nm bi translated"><strong class="ak">我们开始吧！</strong></h1><h2 id="3367" class="nn mw it bd mx no np dn nb nq nr dp nf lr ns nt nh lv nu nv nj lz nw nx nl iz bi translated">装置</h2><p id="ff85" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">您可以简单地使用<code class="fe od oe of og b"><strong class="lk jd">pip</strong></code> <strong class="lk jd"> </strong>安装<strong class="lk jd">枕</strong>库，如下所示:</p><pre class="ks kt ku kv gt oh og oi oj aw ok bi"><span id="0a52" class="nn mw it og b gy ol om l on oo"><strong class="og jd">$ pip install pillow</strong></span></pre><p id="3f57" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Python 2.x 不再支持最新的 Pillow。您可以在下面检查 Pillow 版本以匹配您的 Python 版本。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi op"><img src="../Images/7e5f8fc940383e3c21282830a3e9e5ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YFiwWecFZa_E0hQSZPlFRA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">枕头版支持(来源:<a class="ae lh" href="https://pillow.readthedocs.io/en/stable/installation.html" rel="noopener ugc nofollow" target="_blank">https://pillow.readthedocs.io/en/stable/installation.html</a>)</p></figure><h2 id="c89d" class="nn mw it bd mx no np dn nb nq nr dp nf lr ns nt nh lv nu nv nj lz nw nx nl iz bi translated">基本用法</h2><p id="8a26" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">枕头的概念很简单，有三个步骤</p><ol class=""><li id="803a" class="oq or it lk b ll lm lo lp lr os lv ot lz ou md ov ow ox oy bi translated">加载一幅图像(或大量图像)</li><li id="c182" class="oq or it lk b ll oz lo pa lr pb lv pc lz pd md ov ow ox oy bi translated">进行一些图像编辑/处理操作</li><li id="6779" class="oq or it lk b ll oz lo pa lr pb lv pc lz pd md ov ow ox oy bi translated">以您喜欢的格式保存编辑过的图像。</li></ol><pre class="ks kt ku kv gt oh og oi oj aw ok bi"><span id="1c4f" class="nn mw it og b gy ol om l on oo"><strong class="og jd">from PIL import Image<br/></strong># ---- 1 ----<strong class="og jd"><br/>im = Image.open("<em class="pe">input_path"</em>)<br/></strong># ---- 2 ----<strong class="og jd"><br/># ... Do some operation<br/></strong># ---- 3 ----<strong class="og jd"><br/>im = Image.save("<em class="pe">output_path"</em>)</strong></span></pre><h2 id="9b07" class="nn mw it bd mx no np dn nb nq nr dp nf lr ns nt nh lv nu nv nj lz nw nx nl iz bi translated">支持格式</h2><blockquote class="pf pg ph"><p id="a26a" class="li lj pe lk b ll lm kd ln lo lp kg lq pi ls lt lu pj lw lx ly pk ma mb mc md im bi translated"><strong class="lk jd">枕头</strong>支持多种光栅文件格式。图书馆可以识别和阅读 30 多种不同的文件格式。书写支持不太广泛，但支持大多数常见的交换和表示格式。[1]</p></blockquote><p id="6a86" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，让我们来看一些真实的例子:</p><h1 id="e637" class="mv mw it bd mx my pl na nb nc pm ne nf ki pn kj nh kl po km nj ko pp kp nl nm bi translated">真实实践</h1><p id="3d62" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">您可以使用<code class="fe od oe of og b">pathlib</code>或<code class="fe od oe of og b">os</code>遍历文件夹中的每个图像文件，然后使用 Pillow 加载图像。之后，您可以使用<code class="fe od oe of og b">thumbnail</code>命令将图像尺寸缩小到指定的最大宽度或最大高度值，并保留图像的外观。</p><pre class="ks kt ku kv gt oh og oi oj aw ok bi"><span id="5033" class="nn mw it og b gy ol om l on oo"># Load image <br/><strong class="og jd">im = Image.open(input_img_path)</strong></span><span id="e6cf" class="nn mw it og b gy pq om l on oo">#<strong class="og jd"> </strong>Smaller image/ <!-- -->preserve the aspect of the image<strong class="og jd"><br/>resized_im = im.thumbnail(&lt;maxwidth&gt;, &lt;maxheight&gt;)</strong></span><span id="0c61" class="nn mw it og b gy pq om l on oo"># Or Resize image to exact specified size<strong class="og jd"><br/>resized_im = im</strong>.<strong class="og jd">resize(&lt;width&gt;, &lt;height&gt;) </strong></span><span id="c317" class="nn mw it og b gy pq om l on oo"># Then, save the resized image<br/><strong class="og jd">resized_im</strong>.<strong class="og jd">save(&lt;output_img_path&gt;, &lt;file type&gt;, dpi, ...)</strong></span></pre><p id="8414" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，下面的脚本显示了如何调整名为“input”的文件夹中的所有图像的大小，使其最大宽度和高度为 512 像素，并保留图像的外观，并将它们以 300 dpi 的 JPEG 格式保存在“output”文件夹中。这个例子使用<code class="fe od oe of og b">pathlib</code>遍历一个文件夹中的所有文件。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pr ps l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://gist.github.com/JoeThunyathep/e8f843e26ec822ec9cec58c9ba3e9431" rel="noopener ugc nofollow" target="_blank"> resizeImages.py </a></p></figure><p id="c7e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用这个脚本，您可以在第 7 行和第 8 行之间添加任何图像操作。如旋转，变换，文件格式之间的转换，增强对比度。您可以从 Pillow <a class="ae lh" href="https://pillow.readthedocs.io/en/stable/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>中看到可用操作的列表。</p><p id="81ba" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">此外，还有几个 Python 图像处理工具可以使用，比如 OpenCV 和 scikit Image。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="ae36" class="nn mw it bd mx no np dn nb nq nr dp nf lr ns nt nh lv nu nv nj lz nw nx nl iz bi translated">临终遗言</h2><p id="070a" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">所以，大概就是这样。我希望你喜欢这篇文章，并发现它对你的日常工作或项目有用。如果您有任何问题或意见，请随时给我留言。</p><p id="fe8a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae lh" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">安全<strong class="lk jd">健康</strong>和<strong class="lk jd">健康</strong>！💪</p><p id="2645" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">感谢您的阅读。📚</strong></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="53e1" class="nn mw it bd mx no np dn nb nq nr dp nf lr ns nt nh lv nu nv nj lz nw nx nl iz bi translated">参考</h2><p id="49c0" class="pw-post-body-paragraph li lj it lk b ll ny kd ln lo nz kg lq lr oa lt lu lv ob lx ly lz oc mb mc md im bi translated">[1]Alex Clark<a class="ae lh" href="https://pillow.readthedocs.io/en/stable/handbook/image-file-formats.html" rel="noopener ugc nofollow" target="_blank">https://Pillow . readthe docs . io/en/stable/handbook/image-file-formats . html</a>(2020)，Pillow (PIL 福克)</p></div></div>    
</body>
</html>