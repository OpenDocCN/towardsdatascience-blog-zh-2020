<html>
<head>
<title>Processing Text with Unicode in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python中用Unicode处理文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/processing-text-with-unicode-in-python-eacc226886cb?source=collection_archive---------22-----------------------#2020-05-10">https://towardsdatascience.com/processing-text-with-unicode-in-python-eacc226886cb?source=collection_archive---------22-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f18e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据科学家的最佳实践</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d7788bc32b2ccce80cfa63afcf1d98d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AKZaLjs7iyZZfB3i"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@kaylamkozlowski?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kayla Kozlowski </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="4ca0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们能够阅读这些文本行，因为我们熟悉英语中使用的26个字符的拉丁字母。其他语言有他们自己的字符，他们都需要被编码，这样他们就可以被我们的计算机所代表。几十年来，计算机能够根据ASCII码表来表示字符。</p><h2 id="266a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">ASCII表</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/90df66a5b1917da1cde217f9e9c48f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXHtCGl2RPr0lplXVwTA7g.png"/></div></div></figure><p id="5d63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ASCII是一种在8位代码的256个可用位中分配字母、数字和其他字符的标准。对于不使用拉丁字母的语言，如汉语、希腊语、日语，ASCII无法表示这些文本，我们需要一个新的字符集。它们是Unicode。</p><h2 id="9ae0" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">Unicode表</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/74cd9ce502f1c4fa29f511893bc42942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJCAgDV4-tuUp0QYb8GV6Q.png"/></div></div></figure><p id="8add" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python中的文本可以用unicode字符串或字节表示。</p><h2 id="dbdc" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">编码unicode字符串</h2><p id="8407" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">让我们在Python中定义一个<code class="fe mv mw mx my b">string</code>，看看它的类型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/bb7b75074d07e6d8276e6f4ca7f0fe35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMXeEYeJUiFaHD4GsfGEUg.png"/></div></div></figure><p id="e404" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它确实是一个<code class="fe mv mw mx my b">str</code>类型的对象或者一个字符串。如果我们定义一个字节。<em class="na">(我们可以用</em> <code class="fe mv mw mx my b"><em class="na">bytes</em></code> <em class="na">函数将字符串转换成字节对象)</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/ae55f991ff21f71e18a80059abda2d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I5hOuIJIO0vLcq99AQkaPQ.png"/></div></div></figure><p id="a1af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们尝试定义一个包含非ASCII字符的byte对象(中文<em class="na">“Hello，World】</em>)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/9f0b6d70d255338a0570d78ea4262920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjDLf3wriWgqZYpkzbdPYg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们可以用前缀b定义一个字节</p></figure><p id="da87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它显示了一个错误，告诉我们需要先将包含非ASCII字符的字符串转换成bytes对象。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/9c6776cea9d2f52817a38aa43608b3ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWO7wqqf93v4Sl0nWF8Tkg.png"/></div></div></figure><p id="4b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将需要提供和编码来做到这一点如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/c2ba40e7fe8e345fd72f05087e7a3306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sgvcVoUtqWs1VWxxcFmVWw.png"/></div></div></figure><p id="af8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这部分代码的结果如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/4a060d0f82154691c4ff196f78ef9a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OztFZaccF4ZAT42PKiT8Q.png"/></div></div></figure><p id="d6f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">处理编码的一个更好的方法是使用<code class="fe mv mw mx my b">encode()</code>函数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/7a35df053493a0c1217ab67683555706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4PHegCL7ggbfobCnoPV9A.png"/></div></div></figure><p id="5bd2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你所看到的，我们得到了和以前一样的结果。</p><blockquote class="nf"><p id="d6b4" class="ng nh it bd ni nj nk nl nm nn no lu dk translated">请记住，默认情况下，Python 3使用utf-8编码。</p></blockquote><p id="858a" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">因为Python 3默认使用<code class="fe mv mw mx my b">utf-8</code>，所以我们应该如何使用不同的编码，我们简单地把它传递给函数。例如，我们可以如下编码<code class="fe mv mw mx my b">utf-16</code>中的<code class="fe mv mw mx my b">‘hello world’</code>字符串。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/92214911aeadc7dfe745388bb676b009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BgtxZtkHZSb5ifWjkd9nVA.png"/></div></div></figure><h2 id="e995" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">解码字节</h2><p id="27e7" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">Unicode字符串可以用一些预定义的编码方式编码成字节，比如<code class="fe mv mw mx my b">utf-8</code>、<code class="fe mv mw mx my b">utf-16</code>等。字节可以解码为unicode字符串，但这可能会失败，因为在特定的编码中，并非所有的字节序列都是有效的字符串。</p><blockquote class="nf"><p id="e8af" class="ng nh it bd ni nj nk nl nm nn no lu dk translated">没有简单的方法来确定在字节串中使用什么类型的编码。</p></blockquote><p id="0351" class="pw-post-body-paragraph kz la it lb b lc np ju le lf nq jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">unicode和字节之间的转换通过<code class="fe mv mw mx my b">encode()</code>和<code class="fe mv mw mx my b">decode()</code>函数完成。我们尝试做相反的操作，解码字节对象，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/b0f96fb505370df64f49d6959e74da1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J85WTqhN9zC3bHCFZZaxxw.png"/></div></div></figure><p id="1b3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有简单的方法来确定在字节串中使用什么类型的编码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/7490c4edb4b6f1d66a06862d729f4b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwiH5ustaE5PYL4yGD3F_Q.png"/></div></div></figure><p id="82c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们需要提供正确的编码(utf-8、utf-16等。)到解码方法</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/844d15bdfa20b29a39335c8511847f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uY_BfH91SoyopBPgQ0Yuew.png"/></div></div></figure><h2 id="e36c" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">正则表达式模式</h2><p id="0cd5" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">请记住，正则表达式模式也适用于非拉丁字符。在这里，我们如何删除US-ASCII字符范围之外的字符？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/02615205fbdde631c103dc3e6f03ed07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upZjuSvHVS6D8Luzi43z2g.png"/></div></div></figure><p id="5095" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这部分代码的结果如下图所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/f4ad80dd2efab95f0c999db7ff290f4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2NZZxSX9ZoBBTTv1xfW4w.png"/></div></div></figure><h2 id="7a2a" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">从csv文件中读取UTF 8编码的数据</h2><p id="65ef" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">下面的例子演示了如何用Python从csv文件中读取<code class="fe mv mw mx my b">“utf-8”</code>编码的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/f00fb1ada760f0419551bd9a6f1ac645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JAvjRxJXxfiIHOWWTkudKA.png"/></div></div></figure><p id="3c38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单，对吧？这完全是关于用Python中Unicode处理文本。</p><h2 id="64ad" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">参考</h2><p id="d4e1" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ms lk ll lm mt lo lp lq mu ls lt lu im bi translated">[1]<a class="ae ky" href="https://www.ascii-code.com" rel="noopener ugc nofollow" target="_blank">https://www.ascii-code.com</a></p><p id="6ea2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]<a class="ae ky" href="https://home.unicode.org" rel="noopener ugc nofollow" target="_blank">https://home.unicode.org</a></p></div></div>    
</body>
</html>