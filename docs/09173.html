<html>
<head>
<title>Constraints in Oracle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle 中的约束</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/constraints-in-oracle-640fed815432?source=collection_archive---------17-----------------------#2020-07-01">https://towardsdatascience.com/constraints-in-oracle-640fed815432?source=collection_archive---------17-----------------------#2020-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1bb9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak"> <em class="ki">保证数据完整性的方法</em> </strong></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/36923cf24310bde1486c5e895a346558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fck2gUQcXffX4O4T"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@martinsanchez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马丁·桑切斯</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><p id="71fe" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi lw translated">任何数据库管理系统的核心功能之一是确保数据在其生命周期中的完整性。数据完整性，简单来说，就是随着时间的推移，数据应该保持<strong class="lc iu"><em class="mf"/></strong><strong class="lc iu"><em class="mf">【准确】</em> </strong>。不一致或损坏的数据对企业来说用处有限或毫无用处，在某些情况下甚至会造成威胁。损害数据完整性的方式有多种，例如在复制或传输过程中、来自多个来源的集成、人为数据输入错误等</p><p id="0b0f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在 Oracle 中，<strong class="lc iu">“约束条件”</strong>是一种实施规则的工具，以确保只有允许的数据值存储在数据库中。顾名思义，约束对可以存储在数据库表中的数据的类型或值进行限制/检查。Oracle 提供了以下约束来加强数据完整性:</p><ol class=""><li id="eeb9" class="mg mh it lc b ld le lg lh lj mi ln mj lr mk lv ml mm mn mo bi translated"><strong class="lc iu"> NOT NULL: </strong>如果根据业务逻辑，表中的一列或一组列不允许空值，那么可以使用 NOT NULL 约束来防止这种情况。</li></ol><pre class="kk kl km kn gt mp mq mr ms aw mt bi"><span id="2cac" class="mu mv it mq b gy mw mx l my mz"><strong class="mq iu">alter table SALES modify (cust_id NOT NULL);</strong></span></pre><p id="c6bd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果在销售表的 cust_id 列中输入空值，数据库将抛出错误</p><p id="5451" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> 2。UNIQUE: </strong>如果根据业务逻辑，一个表中的一列或一组列需要存储唯一的值，那么可以使用 UNIQUE 约束来实施这个规则。</p><pre class="kk kl km kn gt mp mq mr ms aw mt bi"><span id="633a" class="mu mv it mq b gy mw mx l my mz"><strong class="mq iu">create table test (col1 number UNIQUE);</strong></span></pre><blockquote class="na nb nc"><p id="a081" class="la lb mf lc b ld le ju lf lg lh jx li nd lk ll lm ne lo lp lq nf ls lt lu lv im bi translated"><strong class="lc iu">唯一约束允许存储空值。</strong></p></blockquote><p id="1d5a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> 3。主键:</strong>主键约束是非空约束和唯一约束的组合。定义主键的一列或一组列只允许唯一值，不能为空值。</p><pre class="kk kl km kn gt mp mq mr ms aw mt bi"><span id="32c7" class="mu mv it mq b gy mw mx l my mz"><strong class="mq iu">create table test (col1 number PRIMARY KEY);</strong></span></pre><blockquote class="na nb nc"><p id="e916" class="la lb mf lc b ld le ju lf lg lh jx li nd lk ll lm ne lo lp lq nf ls lt lu lv im bi translated"><strong class="lc iu"> <em class="it">一个 Oracle 表中只能有一个(且只能有一个)主键。</em> </strong></p></blockquote><p id="1330" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> 4。外键:</strong>经常需要将一个表中的数据与另一个表中的数据进行比较来验证。(例如，如果您在订单表中添加一个新订单，您必须交叉检查对应于该订单的有效产品是否出现在您的产品表中)。为了实现这种数据完整性，使用了外键约束。这种类型的验证也被称为<strong class="lc iu"><em class="mf"/></strong>。外键约束总是引用其他表的主键或唯一约束。定义了外键的表称为引用表的<strong class="lc iu">。定义了主键或唯一约束的表称为<strong class="lc iu">引用表</strong>。</strong></p><pre class="kk kl km kn gt mp mq mr ms aw mt bi"><span id="06d4" class="mu mv it mq b gy mw mx l my mz"><strong class="mq iu">create table orders<br/>(<br/> order_no number primary key,<br/> customer_name varchar2(10),<br/> constraint cons_prod_fk foreign key(prod_no) references product(prod_no)<br/>);</strong></span></pre><p id="6688" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果使用' ON DELETE CASCADE '选项定义外键约束，则当从被引用表中删除任何行时，相应的行也将从引用表中删除。</p><blockquote class="na nb nc"><p id="1998" class="la lb mf lc b ld le ju lf lg lh jx li nd lk ll lm ne lo lp lq nf ls lt lu lv im bi translated"><strong class="lc iu">外键列中允许空值。</strong></p></blockquote><p id="3eb9" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><strong class="lc iu"> 5。CHECK: </strong> Check 约束用于强制数据行的一个或多个检查条件。</p><pre class="kk kl km kn gt mp mq mr ms aw mt bi"><span id="db7c" class="mu mv it mq b gy mw mx l my mz"><strong class="mq iu">alter table customers add constraint customer_credit_limit CHECK (credit_limit &lt;= 1000)</strong></span></pre><p id="8305" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这将确保 credit_limit 始终小于或等于 1000。否则，系统将引发错误</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nn"><img src="../Images/17d93ba1c1eec04630e2f886841c7e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9wyjllN2_omfvG6Z"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@pisitheng?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">皮斯特亨</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="67a1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在 Oracle 中使用约束时，以下信息会非常有用:</p><ul class=""><li id="a3fb" class="mg mh it lc b ld le lg lh lj mi ln mj lr mk lv no mm mn mo bi translated">约束名称存储在 ALL_CONSTRAINTS 表中。定义约束的列名可以在 ALL _ CONS _ 列中找到。</li><li id="70fd" class="mg mh it lc b ld np lg nq lj nr ln ns lr nt lv no mm mn mo bi translated">可以随时启用或禁用约束。创建、禁用或启用约束时，可以指定一些有关约束行为的其他信息。启用的约束可以有两个选项 VALIDATE 和 NOVALIDATE。VALIDATE 将验证表中的现有数据，而 NOVALIDATE 在启用约束后不会验证现有数据。</li><li id="b898" class="mg mh it lc b ld np lg nq lj nr ln ns lr nt lv no mm mn mo bi translated">当您创建或启用主键或唯一约束时，Oracle 将在该约束的列上创建唯一索引。外键约束不强制自动创建索引。但是，在每个外键约束的列上建立索引是值得的。如果子表中的相应列没有索引，Oracle 在对父表执行删除操作时，将被迫对子表解除表锁。如果存在索引，Oracle 使用它来标识和锁定子代中的必要行，同时删除父代行。</li></ul><h2 id="945b" class="mu mv it bd nu nv nw dn nx ny nz dp oa lj ob oc od ln oe of og lr oh oi oj ok bi translated">数据完整性不应与数据安全性混淆。数据安全性涉及保护数据免受未经授权的访问，而数据完整性指的是存储数据的准确性和一致性。</h2></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="454e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">数据完整性是衡量数字信息健康程度的标准。在数据管道中尽可能早地实施这些规则或检查，将导致最少的损坏，并提高业务流程的效率。</p><p id="b04d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">下面这段话通常适用于数据库设计和生活。</p><blockquote class="ol"><p id="8eab" class="om on it bd oo op oq or os ot ou lv dk translated">"诚信，在方便和正确之间的选择！"</p></blockquote></div></div>    
</body>
</html>