<html>
<head>
<title>DIY dashboard for Coronavirus Infections globally using Dash, Plotly and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Dash、Plotly 和 Heroku 的全球冠状病毒感染 DIY 仪表板</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/diy-dashboard-for-coronavirus-infections-globally-dash-plotly-1ea1f732eb0a?source=collection_archive---------26-----------------------#2020-02-29">https://towardsdatascience.com/diy-dashboard-for-coronavirus-infections-globally-dash-plotly-1ea1f732eb0a?source=collection_archive---------26-----------------------#2020-02-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6ac9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当前全球冠状病毒感染状况的实时可视化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d38bef4b98d6ee72102c8e189181c11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mln5serN147PRF57kAGQCw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://www.flickr.com/photos/129635229@N02/49472185781/in/photolist-2inFTfn-gua9vB-gucRox-2ijCPya-gucsHo-gudoXC-gtT23b-gtVKCB-guaE8y-guaGeY-gtVYMT-gub2kv-gucAmi-gucK5a-gubHFy-gtWAjN-gtVeYD-gtVYzb-gtUTUQ-gtTAFU-gudaxP-gtVHtC-gtVXks-guctxm-gtUR9E-gtWkRu-guafvT-gubWPK-gucamF-gtW4W2-gtWva6-gtVhge-gtWV9i-gtWdPH-gtWYno-gtWxoz-gtVJLM-gtWBtS-gtVZQg-gub2mf-gtUxSY-gtTLzS-gubAbw-gtU5Ab-gtTfyF-gtXf4z-gtWoPk-gtVk4B-gtWHHq-gub4EH" rel="noopener ugc nofollow" target="_blank"> Flickr </a></p></figure><p id="8d7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论你是一个企业还是一个小企业，努力对市场产生影响，你需要了解销售，市场趋势，你的收入驱动因素等等。在 excel 电子表格上绘制图表是老一套。一个组织良好的仪表板是当今企业所需要的。唯一的缺点是，市场上所有可以快速实现这一目标的工具都是有成本的。当然，我们中的许多人希望有一种免费的方式来实现这一点，至少在探索性数据分析阶段是这样。我在这里解决了同样的需求，并提供了一种使用 plotly、dash 和 heroku 开发仪表板的免费而快速的方法。这个演示仪表板将反映当前全世界受冠状病毒影响的病例。我在这里使用的数据取自这个<a class="ae ky" href="https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases" rel="noopener ugc nofollow" target="_blank">链接</a>，并且每天更新，从而为我们提供了关于这种感染传播的最新信息。您可以在<a class="ae ky" href="https://coronavirus-infections.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://coronavirus-infections.herokuapp.com/</a>访问这个最新的交互式仪表盘。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/b79f36383701756093da03fe67a6bd53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQ_RoqcAeNVvjdcrbFTpmA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/9eb4d0ed312da33692036fd348abef98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4gy4RQKxMkYH5KG-o3PtA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/4b434ab2811cf2692419abc970843e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eTjM5S7D2_Z0Te5PtwRP_Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/00a23891b536f7723af2ca07ceb778ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LT6rIpKnQm5tVPB9RV886Q.png"/></div></div></figure><p id="0493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是创建该仪表板所需的步骤/编码。您可以修改此代码，用您自己的数据集创建任何自定义仪表板，以发现相关的见解。</p><p id="90c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第一步。为您的项目创建一个新文件夹:</strong></p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="5449" class="me mf it ma b gy mg mh l mi mj">$ mkdir dash_app_example<br/>$ cd dash_app_example</span></pre><p id="6e32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第二步。用</strong> <code class="fe mk ml mm ma b"><strong class="lb iu">git</strong></code> <strong class="lb iu">和一个</strong> <code class="fe mk ml mm ma b"><strong class="lb iu">virtualenv</strong></code>初始化文件夹</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="aa6d" class="me mf it ma b gy mg mh l mi mj">$ git init        # initializes an empty git repo<br/>$ virtualenv venv # creates a virtualenv called "venv"<br/>$ source venv/bin/activate # uses the virtualenv</span></pre><p id="a1a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b">virtualenv</code>创建一个新的 Python 实例。你将需要使用此虚拟重新安装你的应用的依赖项新:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="7453" class="me mf it ma b gy mg mh l mi mj">$ pip install dash<br/>$ pip install plotly</span></pre><p id="ad1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还需要一个新的依赖项<code class="fe mk ml mm ma b">gunicorn</code>，用于部署应用程序:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="6a1e" class="me mf it ma b gy mg mh l mi mj">$ pip install gunicorn</span></pre><p id="87ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第三步。用一个样例 app ( </strong> <code class="fe mk ml mm ma b"><strong class="lb iu">app.py</strong></code> <strong class="lb iu">)、一个</strong> <code class="fe mk ml mm ma b"><strong class="lb iu">.gitignore</strong></code> <strong class="lb iu">文件、</strong> <code class="fe mk ml mm ma b"><strong class="lb iu">requirements.txt</strong></code> <strong class="lb iu">和一个</strong> <code class="fe mk ml mm ma b"><strong class="lb iu">Procfile</strong></code> <strong class="lb iu">初始化文件夹，进行部署</strong></p><p id="ce01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在项目文件夹中创建以下文件:</p><p id="e364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b"><strong class="lb iu">app.py</strong></code></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="a856" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b"><strong class="lb iu">.gitignore</strong></code></p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="c2b1" class="me mf it ma b gy mg mh l mi mj">venv<br/>*.pyc<br/>.DS_Store<br/>.env</span></pre><p id="8ac7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b"><strong class="lb iu">Procfile</strong></code></p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="985c" class="me mf it ma b gy mg mh l mi mj">web: gunicorn app:server</span></pre><p id="bff0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">(注意<code class="fe mk ml mm ma b">app</code>指的是文件名<code class="fe mk ml mm ma b">app.py</code>。<code class="fe mk ml mm ma b">server</code>是指那个文件里面的变量<code class="fe mk ml mm ma b">server</code>。</p><p id="107b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b"><strong class="lb iu">requirements.txt</strong></code></p><p id="1b3d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mk ml mm ma b">requirements.txt</code>描述你的 Python 依赖关系。您可以用以下内容自动填充该文件:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="9710" class="me mf it ma b gy mg mh l mi mj">$ pip freeze &gt; requirements.txt</span></pre></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="26e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第四步。初始化 Heroku，添加文件到 Git，部署</strong></p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="3008" class="me mf it ma b gy mg mh l mi mj">$ heroku create my-dash-app # change my-dash-app to a unique name<br/>$ git add . # add all files to git<br/>$ git commit -m 'Initial app boilerplate'<br/>$ git push heroku master # deploy code to heroku<br/>$ heroku ps:scale web=1  # run the app with a 1 heroku "dyno" ##not required</span></pre><p id="7645" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该可以在<code class="fe mk ml mm ma b">https://my-dash-app.herokuapp.com</code>查看您的应用程序(将<code class="fe mk ml mm ma b">my-dash-app</code>更改为您的应用程序的名称)。</p><p id="0bc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第五步。更新代码并重新部署</strong></p><p id="29f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您用自己的代码修改<code class="fe mk ml mm ma b">app.py</code>时，您需要将更改添加到 git，并将这些更改推送到 heroku。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="6a45" class="me mf it ma b gy mg mh l mi mj">$ git status # view the changes<br/>$ git add .  # add all the changes<br/>$ git commit -m 'a description of the changes'<br/>$ git push heroku master<br/></span></pre><h1 id="d69d" class="mw mf it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结论</h1><p id="04fe" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">在等待仪表板软件许可获得批准的时候，我开始使用 dash/heroku。Dashboard 是在团队内部以及与其他利益相关方交流数据科学成果的一个非常巧妙的技巧。dash/heroku 的缺点是，你必须像编写传统的 web 应用程序一样编写每一个程序，很明显，这需要后台设计框架的灵活性。但是，这也增加了对定制要交付的内容的控制。我喜欢它…我还想在未来的时间里在这个网站上添加一些过滤功能，使网站的视图更有组织性和可读性。</p><p id="8974" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冠状病毒在湖北的爆发令人震惊，并从那时起以不可阻挡的方式在全球蔓延。通过这篇文章，我想让大家了解世界上以及你所在地区的感染密度。小心——避开人群，保持双手清洁，不要时不时地摸脸。如果您发现了症状，请确保立即与正确的来源沟通。越早发现，存活的机会就越大。</p><h1 id="ac96" class="mw mf it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">奖金</h1><p id="545b" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">以下是开发 dash/heroku 应用程序时您可能会发现有用的一些额外技巧。</p><ol class=""><li id="65d3" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated">列出与您的 heroku 应用程序关联的 url 的名称</li></ol><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="4eec" class="me mf it ma b gy mg mh l mi mj">heroku info -s | grep web_url | cut -d= -f2</span></pre><p id="d230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.列出您环境中安装的所有应用程序。用免费版 heroku 最多可以创建 5 个。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="6297" class="me mf it ma b gy mg mh l mi mj">heroku apps</span></pre><p id="6d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.删除/销毁 Heroku 上的应用程序</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="9b14" class="me mf it ma b gy mg mh l mi mj">heroku destroy appname</span></pre><p id="98b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.如果堆积/分组条形图中有超过 10 条迹线，如何给出颜色，例如:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="e50a" class="me mf it ma b gy mg mh l mi mj">colorway = ['#f3cec9', '#D2691E', '#FF6347', '#BC8F8F', '#9ACD32', '#006400','#182844','#8B0000','#FFD700','#00FF00','#808000','#4169E1','#BA55D3','#708090','#D2B48C','#4682B4','#F5DEB3','#FFE4E1','#DB7093','#DA70D6','#B0E0E6','#00FA9A','#FF7F50','#F08080','#BDB76B']</span><span id="98c0" class="me mf it ma b gy ob mh l mi mj">layout = go.Layout(colorway=colorway)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/8e12203b72eb01499b0cf2b741bc2904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyG3XoES9QYFjzWNZ9kScg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">包含 10 个以上类别的堆积条形图</p></figure></div></div>    
</body>
</html>