<html>
<head>
<title>Simple OCR with Tesseract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带宇宙魔方的简单 OCR</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simple-ocr-with-tesseract-a4341e4564b6?source=collection_archive---------0-----------------------#2020-07-12">https://towardsdatascience.com/simple-ocr-with-tesseract-a4341e4564b6?source=collection_archive---------0-----------------------#2020-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2bb1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何训练宇宙魔方阅读你独特的字体</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c757f7e8998021542fd672be45c64b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kkawyNNBIUWpP9Gf.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://pixabay.com/users/angel-kun-50012/" rel="noopener ugc nofollow" target="_blank">天使昆</a>在<a class="ae ky" href="https://pixabay.com/photos/future-eye-robot-eye-machine-175620/" rel="noopener ugc nofollow" target="_blank">的照片</a></p></figure><p id="8b7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想与您分享如何使用 Tesseract 构建一个简单的 OCR，“<em class="lv">一个用于各种操作系统的光学字符识别引擎</em>”。宇宙魔方本身是自由软件，最初由惠普开发，直到 2006 年谷歌接手开发。它可以说是迄今为止最好的开箱即用的 OCR 引擎，支持 100 多种语言。这是最受欢迎的 OCR 引擎之一，因为它易于安装和使用。</p><p id="717f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，假设你的老板给了你一个任务，让你能够将下面的图片转换成机器语言，或者用更简单的话来说，“建立一个 OCR 模型，以便能够阅读一些图片中的这些字体！”。“好的，没问题，”你说，但突然你的主管对你说“我要你今天完成，在接下来的 3-5 个小时内。”</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/526c550aa03fd7992e612c2ae1628491.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*n00OEJ4ekhWlr9ApxEuymQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">例如，我们将这张图片命名为 file_0.png</p></figure><p id="0a74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">" Welp，我怎么能这么快地建立一个 OCR 模型？"你对自己说。但是别担心，这就是宇宙魔方的作用！首先，你必须把它安装在你的电脑上。</p><ul class=""><li id="24d3" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">如果你用的是 Windows 操作系统，去<a class="ae ky" href="https://github.com/UB-Mannheim/tesseract/wiki" rel="noopener ugc nofollow" target="_blank">https://github.com/UB-Mannheim/tesseract/wiki</a>用安装程序安装宇宙魔方(你可以选择最新的稳定版本，或者我用的是宇宙魔方 4.0.0)。按照说明操作。然后，进入<em class="lv">编辑环境变量</em>，添加一个新路径到你的宇宙魔方安装文件夹，如下图所示</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/6d4290428747c7704b036201e1c27e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iElEj_PkOZ3yPbK9V-1gSA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/29d4701f513851207165285f487a33d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*SajaPMEN3WMt44iJCgxWNg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/ec168fd927b7af8eadc0979588f24bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*FJELQr2334-cRvyR6k7Ulg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/7cc7cba94738ba17e7e99493d5098166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*wJaffz4rsDt7XY1JXSTwnQ.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/421236fe567f3df2b4215791b6b72a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*gXki4AP1LETijHV9d8i1AA.png"/></div></figure><p id="b26d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击“确定”</p><ul class=""><li id="aea5" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu mc md me mf bi translated">如果使用 Ubuntu OS，那么打开终端，运行<br/><strong class="lb iu"><em class="lv">sudo apt-get install tesserac t-ocr</em></strong></li></ul><p id="3864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你的电脑上成功安装了宇宙魔方之后，打开<em class="lv">命令提示符</em>对于 windows 或者<em class="lv">终端</em>如果你使用的是 Ubuntu，然后运行:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="d788" class="mq mr it mm b gy ms mt l mu mv">tesseract file_0.png stdout</span></pre><p id="2e14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<strong class="lb iu">f<em class="lv">ile _ 0 . png</em>T28】是上图的文件名。我们希望宇宙魔方读取它在上面的图像中找到的任何单词。您应该在终端中看到这些输出:</strong></p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="8345" class="mq mr it mm b gy ms mt l mu mv">Warning. Invalid resolution 0 dpi. Using 70 instead.<br/>Estimating resolution as 147<br/>40293847 S565647386e2e91L0</span></pre><p id="97fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哦不！看起来宇宙魔方不能完美地阅读上图中的文字。似乎它误读了一些字符，可能是因为图像中的字体独特而奇怪。幸运的是，你可以训练你的宇宙魔方，让它可以很容易地阅读你的字体。跟着我的脚步走！</p><blockquote class="mw mx my"><p id="2634" class="kz la lv lb b lc ld ju le lf lg jx lh mz lj lk ll na ln lo lp nb lr ls lt lu im bi translated">免责声明，正如 Tesseract 的 wiki 中所述，建议使用默认的“语言”，这种语言已经在 tesseract 的许多数据上进行了训练，并在最后关头训练您自己的<em class="it">语言</em>(这意味着，您应该在跳转到训练之前尝试预处理图像、阈值处理和其他图像预处理方法)。这是因为宇宙魔方本身在一般干净的图像上相当准确，并且很难使宇宙魔方的训练预测更准确，除非你的字体非常不同和独特(就像在我们的例子中)，或者如果你试图阅读一些恶魔的语言。</p></blockquote><h1 id="281b" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">安装和数据准备</h1><p id="f12f" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">要训练您的字体，首先，您需要:</p><ol class=""><li id="7268" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu ny md me mf bi translated">安装宇宙魔方<em class="lv">(你不说)</em></li><li id="d07d" class="lx ly it lb b lc nz lf oa li ob lm oc lq od lu ny md me mf bi translated">安装<strong class="lb iu"> jTessBoxEditor <br/> </strong>这个工具用于创建和编辑地面真相来训练宇宙魔方。请注意，您需要 Java 运行时才能打开它，您可以下载<a class="ae ky" href="https://www.java.com/en/download/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="lv">https://www.java.com/en/download/</em></strong></a>。安装 Java 之后再在<a class="ae ky" href="https://sourceforge.net/projects/vietocr/files/jTessBoxEditor/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="lv">上安装<strong class="lb iu"> jTessBoxEditor </strong>(不是 FX 的)https://SourceForge . net/projects/vietocr/files/jTessBoxEditor</em></strong></a><strong class="lb iu"><em class="lv">/<br/></em></strong>解压 zip 文件就可以打开 jTessBoxEditor，运行<strong class="lb iu"> <em class="lv"> train.bat </em> </strong>如果你用的是 Windows，或者<br/> <strong class="lb iu"/></li><li id="ae98" class="lx ly it lb b lc nz lf oa li ob lm oc lq od lu ny md me mf bi translated">[ <strong class="lb iu">可选的</strong> ]一个工作 Word Office (Windows)或 LibreOffice (Ubuntu)和。您的字体的 tiff 文件。例如在上面的例子中，我使用的是<em class="lv">OCR——一种扩展的</em>字体。你可以很容易地从谷歌上下载你的字体(只需搜索 font_name。tiff 下载)。安装您的字体(只需双击。tiff 文件)或者，您最好有一个图像集合，以便以后作为训练数据进行预测。</li></ol><p id="f065" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你准备好上面所有的安装步骤后，你就可以训练你的魔方了。Tesseract 使用“<em class="lv">语言</em>作为其 OCR 模型。有很多默认语言，像<em class="lv"> eng </em>(英语)、<em class="lv"> ind </em>(印尼语)等等。我们试图创造一种新的语言，让宇宙魔方能够预测我们的字体，通过使用我们的字体创建一些由随机数组成的训练数据。有两种方法可以做到这一点。首先，如果你有一个仅由你的字体组成的图像集合，那么你可以使用这种方法，或者第二种方法，即使用你的字体在 word 上键入任何你想要的数字(或字符)，并使用剪切工具(windows)或<em class="lv"> shift 键+ PrintScreen </em> (Ubuntu)来捕获并将其保存在一个文件夹中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/0121fde713c467692fd62cae663749da.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*lq5NJvTilXjrNJUdNK4jJA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">训练数据示例</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/c94a9b42fd482d2dfebf036a0b81b0d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*kVrFsAfLrrrY44Qm_MaCog.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">训练数据示例</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/eef5a381d4258440c4afbdbf0c2cc5f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*cTpusMY6phjgx5X_5BTh4A.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">训练数据示例</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/ececaa850f6806f69fc03cf033093111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*jaysU3zfbcinMheP6HybgQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">多行的训练数据示例</p></figure><p id="0514" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我的经验，10–15 个数据足以产生一个准确的(<em class="lv">主观)</em>模型，对于干净和一些有噪声的图像都足够准确。请注意，您应该尝试创建尽可能平衡的数据，并尽可能接近真实案例。如果您想要预测一些蓝色背景、红色字体的图像，那么您应该创建蓝色背景、红色字体的训练数据。</p><h1 id="4c28" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">训练宇宙魔方</h1><p id="fbd3" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">一般来说，宇宙魔方的训练步骤是:</p><ol class=""><li id="2820" class="lx ly it lb b lc ld lf lg li lz lm ma lq mb lu ny md me mf bi translated">将培训数据合并到。使用 jTessBoxEditor 的 tiff 文件</li><li id="9720" class="lx ly it lb b lc nz lf oa li ob lm oc lq od lu ny md me mf bi translated">通过创建一个. box 文件来创建一个训练标签，该文件包含来自。tiff 文件并修正每个不准确的预测</li><li id="2739" class="lx ly it lb b lc nz lf oa li ob lm oc lq od lu ny md me mf bi translated">训练宇宙魔方</li></ol><h1 id="d552" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">第一步。合并培训数据</h1><p id="b8c1" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">创建完一些数据后，打开<strong class="lb iu"> <em class="lv"> jTessBoxEditor。</em> </strong>在顶栏，进入“工具”→“合并 Tiff”(或者你也可以只使用快捷键 Ctrl <em class="lv"> + M </em>)。转到保存训练图像的文件夹。将过滤器更改为 PNG(或您的图像的任何扩展名)，选择所有图像，然后单击“确定”。然后在选择面板中，键入<em class="lv"> font_name.font.exp0 </em>，其中 font_name 是您想要的任何名称(这将是您自己的新<em class="lv">宇宙魔方语言的名称)。</em></p><h1 id="2ab7" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">第二步。创建培训标签</h1><p id="8386" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">打开“终端”,导航到存储训练图像的文件夹，然后。tiff 文件。既然我们现在有了训练数据，我们如何得到训练标签呢？恐怕不行，您不应该手动标记每个图像，因为我们可以使用 Tesseract 和 jTessBoxEditor 来帮助我们。在终端中，运行以下命令:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="a702" class="mq mr it mm b gy ms mt l mu mv">tesseract --psm 6 --oem 3 <em class="lv">font_name.font.exp0.tif font_name.font.exp0 makebox</em></span></pre><p id="21dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">等等，为什么突然有了 psm 和 oem？当我键入上面的命令时会发生什么？如果你跑步:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="01ed" class="mq mr it mm b gy ms mt l mu mv">tesseract --help-psm<br/>#or<br/>tesseract --help-oem</span></pre><p id="25ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将会看到 psm 表示页面分段模式，即宇宙魔方如何处理图像。如果你想让宇宙魔方把它看到的每张图片都当作一个单词，你可以选择 psm 8。在我们的例子中。tiff 文件是单行文本的集合，我们选择 psm 6。至于 OEM，这意味着 Ocr 引擎模式，至于 tesseract，有通过识别字符模式工作的传统引擎，或者使用神经网络和 LTSM 引擎(如果您想使用 LTSM，请安装 tesseract 版本&gt; 4.0.0)。</p><p id="2fb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用上面的命令，我们希望 tesseract 生成边界框和。tiff 文件，并将其保存到 font_name.font.exp0.box 文本文件中。如果您不知道，我们之前制作的. tiff 文件包含您的按“页面”划分的训练图像。通过使用上面的命令，它将生成一个包含预测的. box 文件，以及。tiff 文件。名为 font_name.font.exp0.box</p><p id="471c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在打开 jTessBoxEditor，导航到“框编辑器”选项卡，单击“打开”并选择。tiff 文件。您应该看到每个页面上的每个图像都有其边界框和预测。您现在的工作是修复每个边界框及其在。盒子文件。(<em class="lv">没错，这是最无聊的部分</em>)</p><h1 id="61af" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">第三步。训练宇宙魔方</h1><p id="6244" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">创建了已经修复的。箱文件和。tiff 文件。创建包含以下内容的新文本文档</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="52b9" class="mq mr it mm b gy ms mt l mu mv">font 0 0 0 0 0</span></pre><p id="4d37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将其作为<em class="lv"> font_properties </em>保存到与。tiff 文件和。盒子文件。现在你已经准备好开始训练了！(<em class="lv">终于</em>)。在该文件夹中，您应该有所有这些文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c747972ed44be3ecefae66c538857ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*VXYMNKo3oLUcu_ndWBzFew.png"/></div></figure><p id="adcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在在终端上运行以下命令:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="b887" class="mq mr it mm b gy ms mt l mu mv"># Create a .tr file (training file)<br/>tesseract num.font.exp0.tif font_name.font.exp0 nobatch box.train</span><span id="c549" class="mq mr it mm b gy oi mt l mu mv"># Create a unicharset file<br/>unicharset_extractor font_name.font.exp0.box</span><span id="5975" class="mq mr it mm b gy oi mt l mu mv"># Create a shapetable file<br/>shapeclustering -F font_properties -U unicharset -O font_name.unicharset font_name.font.exp0.tr</span><span id="a15b" class="mq mr it mm b gy oi mt l mu mv"># Create a pffmtable, intemp file<br/>mftraining -F font_properties -U unicharset -O font_name.unicharset font_name.font.exp0.trecho Clustering..</span><span id="13a7" class="mq mr it mm b gy oi mt l mu mv"># Create a normproto file<br/>cntraining font_name.font.exp0.tr</span></pre><p id="5cd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果遇到错误，您可能需要使用 extractor.exe、unicharset_extractor.exe 和 cntraining.exe(对于 windows 用户)。您将在终端中看到一些输出，最重要的是在 shapeclustering 部分。如果您的训练图像包含所有必要的字符，您将看到形状的数量= {您想要的类的数量}。例如，如果我想训练宇宙魔方能够正确读取数字，那么形状的数量等于 10(即 0，1，2，3，…，9)。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="b871" class="mq mr it mm b gy ms mt l mu mv">Master shape_table:Number of shapes = 10 max unichars = 1 number with multiple unichars = 0</span></pre><p id="d025" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的形状数不等于您想要的类数，您应该返回创建训练数据，并尝试创建更清晰的数据</p><p id="9e35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你做的一切都是正确的，你会在你的文件夹中看到 4 个主要文件。shapetable、normproto、intemp 和 pffmtable。将这些文件重命名为<em class="lv"> font_name.shapetable，font_name.normproto，font_name.intemp，font_name.pffmtable. </em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/7fe4d50460380132f70072d96a87a18c.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*i65dFFB7cF8VNo8-Mv_aMQ.png"/></div></figure><p id="d5ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后运行:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4fa6" class="mq mr it mm b gy ms mt l mu mv">combine_tessdata font_name.</span></pre><p id="9722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行完上面的所有命令后，您会在文件夹中看到这些文件</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/546db4df4be3304615ccb9156a7c20c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*_h56nxQo0w8HlVv72kFK-g.png"/></div></figure><p id="ecbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在将<strong class="lb iu"><em class="lv">font _ name . trained data</em></strong>复制到:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="2057" class="mq mr it mm b gy ms mt l mu mv">C:/Program Files x86/tesseract/4.0/tessdata  # Windows</span><span id="efd4" class="mq mr it mm b gy oi mt l mu mv">sudo cp /usr/shared/tesseract/4.0/tessdata # ubuntu</span></pre><p id="497d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你完了！是的，因为我们使用少量的数据，训练本身不需要几个小时，只需要几秒钟或者几分钟。与如果你必须从头开始训练一个深度学习模型(可能使用对象检测模型)相比，这要快得多。现在，下次运行 Tesseract 时，可以使用</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="b634" class="mq mr it mm b gy ms mt l mu mv">tesseract -l font_name file0.png</span></pre><p id="46c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记得之前用默认语言，上图用默认 Tesseract 引擎的结果是 40293847 S565647386e2e91L0。使用我们新训练的语言，结果是</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4cf0" class="mq mr it mm b gy ms mt l mu mv">Warning. Invalid resolution 0 dpi. Using 70 instead.<br/>Estimating resolution as 147<br/>10293847 565647382910</span></pre><p id="5641" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，结果更加准确。耶！仅用少量训练数据和相对较短的时间，您就创建了一个能够读取独特和奇怪字体的 OCR 模型！</p><p id="638d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了进一步检查模型的结果，您可以创建另一个。通过使用另一个图像或使用以前的。tiff 文件。打开终端，再次运行:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4e5d" class="mq mr it mm b gy ms mt l mu mv">tesseract -l font_name --psm 6 --oem 3 <em class="lv">font_name.font.exp0.tif font_name.font.exp0 makebox</em></span></pre><p id="04d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在打开<strong class="lb iu"> jTessBoxEditor → </strong>框编辑器→打开并选择你的。tiff 文件。检查一下你的模型是否比前一个模型给出了更准确的预测。你应该看到预测提高了很多。</p><h1 id="0675" class="nc mr it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">最后的想法</h1><p id="0f75" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">"但是如果你想要一个现成的快速 OCR 引擎，宇宙魔方是唯一的选择吗？"你可能会问。当然不是，如果你愿意拿出一些钱，有很多 OCR API 提供者。在我看来，如果您的图像非常干净(例如，一个 word 文档、一张收银单等等), Tesseract 是很好的。如果您的图像数据包含许多噪声，您可以使用阈值来区分背景和噪声与字体本身。根据我的经验，使用少至 10-20 个数据，Tesseract 甚至能够与最先进的对象检测模型竞争，如使用更多数据训练的更快的 R-CNN(也有很多增强)。但是，如果你的图像数据有一些噪声(随机点，脏标记)与你的字体颜色相同，宇宙魔方将无法正确预测你的图像。我说<strong class="lb iu">如果你想尽快建立 OCR 模型，或者你的训练数据有限，你应该使用宇宙魔方</strong>。</p><p id="104c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">宇宙魔方的一个主要弱点(我认为)是它很不稳定。我可以通过使用相同图像的更大裁剪来得到不同的结果。同样出于某种原因，如果我使用超过 50 个数据，那么宇宙魔方的性能会更差。嗯，我自己也还在学习。如果你在这篇文章中发现一些错误或误解，请随时联系我。感谢阅读，快乐学习！</p><p id="3135" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">参考文献:</strong></p><div class="ol om gp gr on oo"><a href="https://github.com/tesseract-ocr/tesseract" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">宇宙魔方-ocr/宇宙魔方</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">这个包包含一个 OCR 引擎——libtesserac t 和一个命令行程序——tesserac t。宇宙魔方 4 增加了一个新的…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://github.com/nguyenq/jTessBoxEditor" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">nguyenq/jTessBoxEditor</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">Tesseract OCR 的框编辑器和训练器，提供 Tesseract 2.0x 和 3.0x 格式的框数据编辑和…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="pd l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://medium.com/@gaopengbai0121/training-your-tesseract-on-windows-10-df6756946d4f" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">在 windows 10 上训练您的宇宙魔方</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">Tesseract 是由谷歌实验室开发并由谷歌维护的开源 OCR(光学字符识别)引擎…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pe l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://github.com/tesseract-ocr/tessdoc" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">tesserac-ocr/Tess doc</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">宇宙魔方文档。在 GitHub 上创建一个帐户，为 tesseract-ocr/tessdoc 开发做出贡献。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="pf l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://medium.com/@latifvardar/how-does-tesseract-ocr-work-with-python-a6bccf85a002" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">Tesseract-OCR 如何与 Python 协同工作？</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">这篇文章指导你使用 Tesseract OCR、OpenCV 和 Python 从图像中识别字符。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="pg l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://medium.com/better-programming/beginners-guide-to-tesseract-ocr-using-python-10ecbb426c3d" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">宇宙魔方 OCR 初学者指南</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">基于 Tesseract 和 Python 的光学字符识别</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="ph l oz pa pb ox pc ks oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://nanonets.com/blog/ocr-with-tesseract/#installingtesseract?&amp;utm_source=nanonets.com/blog/&amp;utm_medium=blog&amp;utm_content=%5BTutorial%5D%20OCR%20in%20Python%20with%20Tesseract,%20OpenCV%20and%20Pytesseract" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">[教程 Python 中的 OCR 与 Tesseract、OpenCV 和 Pytesseract</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">光学字符识别。换句话说，OCR 系统转换文本的二维图像，可以…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">nanonets.com</p></div></div><div class="ox l"><div class="pi l oz pa pb ox pc ks oo"/></div></div></a></div></div></div>    
</body>
</html>