<html>
<head>
<title>Managing Instance Attributes in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中管理实例属性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/managing-instance-attributes-in-python-b272fe23fd50?source=collection_archive---------42-----------------------#2020-05-10">https://towardsdatascience.com/managing-instance-attributes-in-python-b272fe23fd50?source=collection_archive---------42-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0bdc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在 Python 中创建托管属性</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f4cab329ba3fabfad2da74ed37031f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KB1MPkKfuOAKUnhlywhmBg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/black-board-board-game-checkerboard-459275/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="155e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，在 python 类的实现中，如果我们能够轻松地添加额外的处理来获取和/或设置实例属性，将会非常有用。例如，在获取/设置实例属性的过程中，能够执行类型检查或其他形式的验证会很有用。在本帖中，我们将讨论如何在 python 中管理实例属性。</p><p id="e9b5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="ff9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个名为“Cars”的类，其属性为“car_brand”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ddd6" class="ma mb it lw b gy mc md l me mf">class Car:<br/>    def __init__(self, car_brand):<br/>       self.car_brand = car_brand</span></pre><p id="293d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们将汽车类实例初始化为“Tesla”:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ad97" class="ma mb it lw b gy mc md l me mf">car1 = Car('Tesla')<br/>print("Car brand:", car1.car_brand)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/cc16fb3da1e895665b4e1ed7c8e1eb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*eHjcX6v-krJ46F0rh99vPw.png"/></div></figure><p id="e4c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这样做很好，但是如果我们用一个错误的‘car _ brand’输入值初始化一个实例，就没有数据验证或类型检查。例如，如果我们用数字 500 的汽车品牌值初始化一个汽车实例:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f54c" class="ma mb it lw b gy mc md l me mf">car2 = Car(500)<br/>print("Car brand:", car2.car_brand)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/2163f18752778d71c18a9e02a939e38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*bBWCdyQDTmd1Ll-5Qfyr8g.png"/></div></figure><p id="0f57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们应该有一种方法来验证这个实例属性的类型。我们可以通过将“car_brand”属性定义为“property”来自定义对属性的访问:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8b58" class="ma mb it lw b gy mc md l me mf">class Car:<br/>    ...<br/>    @property<br/>    def car_brand(self):<br/>        return self._car_brand</span></pre><p id="6343" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将' car_brand '定义为' property '允许我们将 setter 和 deleter 函数附加到' car_brand '属性。让我们向‘car _ brand’属性添加一个 setter 方法，如果用非字符串值初始化实例，该方法将引发一个错误:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2e11" class="ma mb it lw b gy mc md l me mf">class Car:<br/>    ...<br/>    #setter function<br/>    <a class="ae ky" href="http://twitter.com/car_brand" rel="noopener ugc nofollow" target="_blank">@car_brand</a>.setter<br/>    def car_brand(self, value):<br/>        if not isinstance(value, str):<br/>            raise TypeError('Expected a string')<br/>        self._car_brand = value</span></pre><p id="efa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再次定义我们的实例，用我们的整数输入 500:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="551a" class="ma mb it lw b gy mc md l me mf">car2 = Car(500)<br/>print("Car brand:", car2.car_brand)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/40919b80e44c09813e49647749ad11ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*mVLUlYa9ImQbW90EH5yvjA.png"/></div></figure><p id="60ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个要考虑的实例管理操作是删除实例属性。如果我们看看我们的初始实例:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6e20" class="ma mb it lw b gy mc md l me mf">car1 = Car('Tesla')<br/>print("Car brand:", car1.car_brand)</span></pre><p id="4e87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以很容易地删除属性值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="467e" class="ma mb it lw b gy mc md l me mf">car1 = Car('Tesla')<br/>print("Car brand:", car1.car_brand)<br/>del car1.car_brand<br/>print("Car brand:", car1.car_brand)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/f6b789e2152c7daed9e53ab1695ffd03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9F-I2krA1bTKORJ8iMBUnw.png"/></div></div></figure><p id="0029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以添加一个 deleter 函数，在尝试删除时引发错误:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8bdc" class="ma mb it lw b gy mc md l me mf">class Car:<br/>    ...<br/>    #deleter function<br/>    <a class="ae ky" href="http://twitter.com/car_brand" rel="noopener ugc nofollow" target="_blank">@car_brand</a>.deleter<br/>    def car_brand(self):<br/>        raise AttributeError("Can't delete attribute")</span></pre><p id="8d20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们再次尝试设置和删除属性值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="148c" class="ma mb it lw b gy mc md l me mf">car1 = Car('Tesla')<br/>print("Car brand:", car1.car_brand)<br/>del car1.car_brand</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/547f64838a0f838b22cd6be35460056a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhIvqJ1AHkHdCjhUN8QFJA.png"/></div></div></figure><p id="0f9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是您可以自己随意摆弄代码。</p><h1 id="1434" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">结论</h1><p id="422f" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">总之，在这篇文章中，我们讨论了如何在 python 类中管理实例属性。我们展示了通过将类属性定义为“属性”,我们可以附加 setter 和 deleter 函数来帮助我们管理属性的访问。我希望你觉得这篇文章有用/有趣。这篇文章的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/classes_in_python/manage_instance_attributes.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>