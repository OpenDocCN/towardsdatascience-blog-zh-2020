<html>
<head>
<title>An Introduction to Optical Character Recognition for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者光学字符识别入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-introduction-to-optical-character-recognition-for-beginners-14268c99d60?source=collection_archive---------18-----------------------#2020-05-23">https://towardsdatascience.com/an-introduction-to-optical-character-recognition-for-beginners-14268c99d60?source=collection_archive---------18-----------------------#2020-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a0b8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从非结构化数据中读取文本的第一步</h2></div><p id="aa2e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="le">在这篇文章中，你将学习</em> </strong></p><ul class=""><li id="1d92" class="lf lg it kk b kl km ko kp kr lh kv li kz lj ld lk ll lm ln bi translated"><strong class="kk iu"> <em class="le">什么是光学字符识别(OCR)？</em> </strong></li><li id="a87e" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated"><strong class="kk iu"><em class="le">OCR的用法</em> </strong></li><li id="63eb" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated"><strong class="kk iu"> <em class="le">从PDF文件中读取文本和图像的简单代码</em> </strong></li></ul><p id="f6fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你已经扫描了几份文件，比如候选人所学课程的证书。课程证书可以是PDF或JPEG或PNG文件。如何提取重要信息，如考生姓名、完成的课程名称以及课程开始的日期？</p><h2 id="bd69" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">光学字符识别(OCR)</h2><p id="b12a" class="pw-post-body-paragraph ki kj it kk b kl mm ju kn ko mn jx kq kr mo kt ku kv mp kx ky kz mq lb lc ld im bi translated"><strong class="kk iu"> OCR是一种将手写、打字、扫描文本或图像中的文本转换为机器可读文本的技术。</strong></p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/d9f3fb673f28f2d6b2deb550b671190d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*-JvkJ2KeG61PTrAqjpsFLw.png"/></div></figure><p id="1912" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以对任何包含文本的图像文件、PDF文档或任何可清晰提取文本的扫描文档、打印文档或手写文档使用OCR。</p><h2 id="a5d7" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">OCR的使用</h2><p id="ae7c" class="pw-post-body-paragraph ki kj it kk b kl mm ju kn ko mn jx kq kr mo kt ku kv mp kx ky kz mq lb lc ld im bi translated">OCR的一些常见用法有</p><ul class=""><li id="01ac" class="lf lg it kk b kl km ko kp kr lh kv li kz lj ld lk ll lm ln bi translated">通过跨不同业务部门数字化PDF文档来创建自动化工作流程</li><li id="adf1" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">通过数字化打印文档，如阅读护照、发票、银行对账单等，消除手动数据输入。</li><li id="b738" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">通过数字化身份证、信用卡等创建对敏感信息的安全访问。</li><li id="d166" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">数字化印刷书籍，如古腾堡项目</li></ul><h2 id="fbd1" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">阅读PDF文件</h2><p id="283f" class="pw-post-body-paragraph ki kj it kk b kl mm ju kn ko mn jx kq kr mo kt ku kv mp kx ky kz mq lb lc ld im bi translated">在这里，您将阅读PDF文件的内容。您需要安装pypdf2库，它是基于python构建的，用于处理不同的pdf功能，如</p><ul class=""><li id="b75a" class="lf lg it kk b kl km ko kp kr lh kv li kz lj ld lk ll lm ln bi translated">提取文档信息，如标题、作者等</li><li id="4340" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">逐页拆分文档</li><li id="2cde" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">加密和解密PDF文件</li></ul><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="ec73" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">!pip install pypdf2</strong></span></pre><p id="742f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以下载一份PDF格式的<a class="ae mz" href="https://www.irs.gov/pub/irs-pdf/fw4.pdf" rel="noopener ugc nofollow" target="_blank">W4表格样本</a></p><p id="4b91" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">导入库</strong></p><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="02a3" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">import PyPDF2</strong></span></pre><p id="ce3c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">提取页数和PDF文件信息</strong></p><p id="3215" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用模式'<strong class="kk iu"> rb' </strong>'以二进制模式打开要读取的PDF文件。将pdfFileObj传递给<strong class="kk iu"><em class="le">PdfFileReader()</em></strong>来读取文件流。<strong class="kk iu"> <em class="le"> numPages </em> </strong>将获得PDF文件的总页数。使用<strong class="kk iu"><em class="le">getDocumentInfo()</em></strong>在字典中提取PDF文件的作者、创建者、制作者、主题、标题等信息</p><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="4965" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">filename=r'\PDFfiles\W4.pdf'<br/>pdfFileObj = open(filename,'rb')<br/>pdfReader = PyPDF2.PdfFileReader(pdfFileObj)<br/>num_pages = pdfReader.numPages<br/>info=pdfReader.getDocumentInfo()</strong></span><span id="a1cf" class="lt lu it nb b gy nj ng l nh ni"><strong class="nb iu">print("No. of Pages: ", num_pages)<br/>print("Titel: ", info.title)<br/>print("Author: ",info.author)<br/>print("Subject: ",info.subject)<br/>print("Creator: ",info.creator)<br/>print("Producer: ",info.producer)</strong></span></pre><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d255c5932e017d159b3f5e593e2ca0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*oEgE9OF9HvJdpUQ1WGMcaQ.png"/></div></figure><p id="4150" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">从PDF文件的所有页面中检索文本</strong></p><p id="1339" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">遍历PDF文件中的所有页面，然后使用<strong class="kk iu"><em class="le">【get page()，</em> </strong>从PDF文件中按编号检索页面。您现在可以使用<strong class="kk iu"> <em class="le"> extractText()从PDF文件中提取文本。</em> </strong>最后，使用<strong class="kk iu"><em class="le">【close()】</em></strong>关闭文件</p><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="3f83" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">count = 0<br/>text = “”<br/>#The while loop will read each page.<br/>while count &lt; num_pages:<br/> pageObj = pdfReader.getPage(count)<br/> count +=1<br/> text += pageObj.extractText()<br/> print(“Page Number”,count)<br/> print(“Content”,text)<br/>pdfFileObj.close()</strong></span></pre><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nl"><img src="../Images/4513da48681f8aca18004525075c89d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7a2H4A9QlP8TTQcJpOGeaA.png"/></div></div></figure><p id="7c36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">提醒一句:</strong>使用<strong class="kk iu"> <em class="le"> extractText </em> </strong>()提取的文本并不总是按正确的顺序排列，间距也可能略有不同。</p><h2 id="310d" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">从图像中读取文本</h2><p id="4cd7" class="pw-post-body-paragraph ki kj it kk b kl mm ju kn ko mn jx kq kr mo kt ku kv mp kx ky kz mq lb lc ld im bi translated">您将使用<strong class="kk iu"> pytesseract </strong>，它是用于光学字符识别(OCR)的Google tesseract的python包装器，用来读取图像中嵌入的文本。</p><p id="fb69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您需要了解一些可以使用pytesseract应用的配置选项</p><ul class=""><li id="977f" class="lf lg it kk b kl km ko kp kr lh kv li kz lj ld lk ll lm ln bi translated">页面分段模式(psm)</li><li id="7a31" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">OCR引擎模式(oem)</li><li id="ef6f" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">语言(左)</li></ul><p id="6073" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">页面分割方法</strong></p><p id="21b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">psm定义了tesseract如何将图像分割或分段为文本行或单词行</p><p id="2a63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">页面分割模式(psm)选项:</strong></p><p id="11ce" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">0:仅方向和脚本检测(OSD)。<br/> 1:带OSD的自动页面分割。<br/> 2:自动页面分割，但是没有OSD，或者OCR。<br/> 3:全自动页面分割，但没有OSD。<strong class="kk iu"> <em class="le">(默认)</em> </strong> <br/> 4:假设一列可变大小的文本。<br/> 5:假设一个垂直对齐的文本的单一统一块。假设一个单一的统一文本块。7:将图像视为一个单独的文本行。<br/> 8:把图像当成一个单词。<br/> 9:把图像当成一个圆圈里的一个单词。<br/> 10:将图像视为单个字符。<br/> 11:稀疏文字。不按特定顺序查找尽可能多的文本。<br/> 12:带有OSD的稀疏文本。<br/> 13:生线。将图像视为单个文本行，绕过特定于Tesseract的hacks。</p><p id="3dcc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> OCR引擎模式(oem) </strong></p><p id="74fc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">宇宙魔方有不同的引擎模式来提高速度和性能</p><p id="64c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">0:仅传统引擎。<br/> 1:神经网络仅适用于LSTM发动机。2:莱格赛+ LSTM发动机。<br/> 3: <strong class="kk iu"> <em class="le">默认</em> </strong>，根据什么可用。</p><p id="b7fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">语言(l) </strong></p><p id="0d2f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Pytessercat支持多种语言，您可以在安装pytesseract时指定想要使用的语言，它将下载语言包。默认情况下，英语是默认语言</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/bf9265d7a9c3e9fecca0d45b80b456b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*I4msoUGmTrVNGIfyWhoDlw.png"/></div><p class="nr ns gj gh gi nt nu bd b be z dk translated">用于阅读文本的图像</p></figure><p id="3756" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">导入所需的库</strong></p><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="cfdb" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">import pytesseract<br/>import cv2</strong></span></pre><p id="a971" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用openCV读取图像文件。为pytesseract应用配置选项以从图像中读取文本。您可以尝试psm和oem的不同选项，并检查输出中的差异</p><pre class="ms mt mu mv gt na nb nc nd aw ne bi"><span id="1935" class="lt lu it nb b gy nf ng l nh ni"><strong class="nb iu">image_Filename=r'\Apparel_tag.jpg'</strong></span><span id="1c6b" class="lt lu it nb b gy nj ng l nh ni"><em class="le"># Read the file  using opencv and show the image</em><br/><strong class="nb iu">img=cv2.imread(image_Filename)<br/>cv2.imshow("Apparel Tag", img)<br/>cv2.waitKey(0)</strong></span><span id="432e" class="lt lu it nb b gy nj ng l nh ni">#set the configuration for redaing text from image using pytesseract<br/><strong class="nb iu">custom_config = r'--oem 1 --psm 8 -l eng'</strong><br/><strong class="nb iu">text=pytesseract.image_to_string(img, config=custom_config)<br/>print(text)</strong></span></pre><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/f58b4e24d370dc59dd52249134960004.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*4uJPe8OvQ1xGFFWJwUysVg.png"/></div><p class="nr ns gj gh gi nt nu bd b be z dk translated">从图像中提取文本</p></figure><h2 id="0f35" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">使用pytesseract进行OCR的最佳实践</h2><ul class=""><li id="e249" class="lf lg it kk b kl mm ko mn kr nw kv nx kz ny ld lk ll lm ln bi translated">尝试pytesseract的不同配置组合，以获得适合您的用例的最佳结果</li><li id="f747" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">文本不应倾斜，在文本周围留一些空白以获得更好的效果，并确保图像有更好的照明以消除深色边框</li><li id="3c53" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">最低300- 600 DPI效果很好</li><li id="aa9a" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">字体大小为12磅。或更多给出更好的结果</li><li id="c144" class="lf lg it kk b kl lo ko lp kr lq kv lr kz ls ld lk ll lm ln bi translated">应用不同的预处理技术，如二值化、图像去噪、旋转图像以消除扭曲、增加图像的锐度等。</li></ul><h2 id="a5ea" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">结论:</h2><p id="8769" class="pw-post-body-paragraph ki kj it kk b kl mm ju kn ko mn jx kq kr mo kt ku kv mp kx ky kz mq lb lc ld im bi translated">OCR结果取决于输入数据的质量。文本的清晰分割和背景中的无噪声给出了更好的结果。在现实世界中，这并不总是可能的，因此我们需要为OCR应用多种预处理技术以给出更好的结果。</p><h2 id="8165" class="lt lu it bd lv lw lx dn ly lz ma dp mb kr mc md me kv mf mg mh kz mi mj mk ml bi translated">参考资料:</h2><div class="nz oa gp gr ob oc"><a href="https://pypi.org/project/pytesseract/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">宇宙魔方</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">Python-tesseract是Python的光学字符识别(OCR)工具。也就是说，它会识别并“读取”…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">pypi.org</p></div></div><div class="ol l"><div class="om l on oo op ol oq mx oc"/></div></div></a></div><p id="1629" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mz" href="https://pypi.org/project/PyPDF2/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/PyPDF2/</a></p><p id="08d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mz" href="https://stackoverflow.com/questions/9480013/image-processing-to-improve-tesseract-ocr-accuracy" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/9480013/image-processing-to-improve-tessera CT-ocr-accuracy</a></p></div></div>    
</body>
</html>