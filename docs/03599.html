<html>
<head>
<title>JSON Objects in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的JSON对象</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/json-objects-in-python-f45e04281c30?source=collection_archive---------16-----------------------#2020-04-05">https://towardsdatascience.com/json-objects-in-python-f45e04281c30?source=collection_archive---------16-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9183" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python中JSON对象的介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4849f3a56bbeae958195df59009c47d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4eCn1lq593PyMCd5HFQtRg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/macbook-pro-iphone-cup-desk-7974/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="a77e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java Script Object Notation (JSON)是一种轻量级数据格式，与python字典有许多相似之处。JSON对象非常有用，因为浏览器可以快速解析它们，这对于在客户机和服务器之间传输数据非常理想。在本帖中，我们将讨论如何使用python的JSON库来发送和接收JSON数据。</p><p id="5cde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="c30a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们来看看下面这个JSON包，里面有关于甲壳虫乐队的专辑<em class="lv">黄色潜水艇</em>的信息:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="faad" class="mb mc it lx b gy md me l mf mg">{<br/>     "album_title" : "Yellow Submarine",     <br/>     "release_year" : 1966,   <br/>     "won_grammy" : false,<br/>     "band" : "The Beatles",<br/>     "album_sale": null<br/>     "musicians" : ["John Lennon", "Paul McCartney", "George   Harrison", "Ringo Starr"],<br/>     "studio" : {"studio_name": "Abbey Road Studios", "location": "London, England"}<br/>     }</span></pre><p id="86a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在JSON对象中，键是字符串，值可以是字符串、数字(浮点数或整数)、布尔值、列表、null或其他JSON对象。从这个例子中可以看出python字典和JSON对象之间有一些差异。例如，布尔值为小写，而“无”值为“空”。python字典的等价形式是:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="d06c" class="mb mc it lx b gy md me l mf mg">{<br/>     "album_title" : "Yellow Submarine",     <br/>     "release_year" : 1966,   <br/>     "won_grammy" : False,<br/>     "band" : "The Beatles",<br/>     "album_sale": None<br/>     "musicians" : ["John Lennon", "Paul McCartney", "George   Harrison", "Ringo Starr"],<br/>     "studio" : {"studio_name": "Abbey Road Studios", "location": "London, England"}<br/>     }</span></pre><p id="226f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们将示例JSON数据保存到一个名为“album.txt”的文本文件中。我是使用终端命令行和“vim”文本编辑器来完成的，但是您也可以使用任何您喜欢的工具。接下来，在python脚本中，让我们导入JSON模块:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="ec3f" class="mb mc it lx b gy md me l mf mg">import json</span></pre><p id="8b68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们使用“dir()”方法来看看本模块中可用的方法:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="0118" class="mb mc it lx b gy md me l mf mg">print(dir(json))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/8f9d1e0b61b5229d2c669863c1317932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNfa_3Ge5WmVEfK8kwx84g.png"/></div></div></figure><p id="64ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将重点关注加载和转储方法。要继续，让我们使用open方法打开文件。在open方法中，让我们指定文件名“album.txt”和模式(读或写)。我们将读取文件，因此模式为“r”:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="b05f" class="mb mc it lx b gy md me l mf mg">album_json_file = open("album.txt", "r")</span></pre><p id="bb7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们可以使用load方法从我们的文件中加载JSON数据:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="db74" class="mb mc it lx b gy md me l mf mg">album = json.load(album_json_file)</span></pre><p id="356f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加载JSON数据后，我们关闭文件:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="51e7" class="mb mc it lx b gy md me l mf mg">album_json_file.close()</span></pre><p id="d9f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以打印加载的JSON数据了:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="42c6" class="mb mc it lx b gy md me l mf mg">print(album)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/b24931a12c8b54aa15d47a32a6227acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6R1CsVpd6SfVChS36peWQ.png"/></div></div></figure><p id="55f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们打印这个对象的类型，我们会看到它是一个python字典:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="a949" class="mb mc it lx b gy md me l mf mg">print(type(album))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/cc75e4fe16b3f55886b2f32f35cd6003.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*LGRapHi1i-rtmfhN2dQAqQ.png"/></div></div></figure><p id="979a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看JSON对象和python字典之间的区别。JSON对象中的' won_grammy '值是' false '，而在字典中是大写的' False '。此外,“album_sale”值Null在python字典中被解析为“None”。</p><p id="0446" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然我们已经将数据加载为一个字典，我们可以通过键访问解析后的字典中的值。例如，如果我们想要访问“相册标题”,我们执行以下操作:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="3ad4" class="mb mc it lx b gy md me l mf mg">print("Album Title: ", album['album_title'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/2232f4499768d2d5a5169349c46c1025.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*aBan9nzp_0J2Oe2r6drr6g.png"/></div></figure><p id="380f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者如果我们想查看专辑发行的年份:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="36b4" class="mb mc it lx b gy md me l mf mg">print("Release Year: ", album['release_year'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/fd91fd97f8d47232fc195408ff348016.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*tcMNu4wdpMqFrpMAWbJLhw.png"/></div></figure><p id="0bad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在客户机/服务器应用程序中，JSON对象通常以字符串的形式出现。例如，我们用于相册信息的JSON对象可以是这样的:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="ec93" class="mb mc it lx b gy md me l mf mg">album_string = """{"album_title" : "Yellow Submarine",<br/>     "release_year" : 1966,<br/>     "won_grammy" : false,<br/>     "band" : "The Beatles",<br/>     "album_sale": null,<br/>     "musicians" : ["John Lennon", "Paul McCartney", "George   Harrison", "Ringo Starr"],<br/>     "studio" : {"studio_name": "Abbey Road Studios", "location": "London, England"}<br/>     }"""</span></pre><p id="599f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使用JSON模块加载这些数据，我们使用' loads()'方法:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="6bdf" class="mb mc it lx b gy md me l mf mg">album_s = json.loads(album_string)<br/>album_string.close()<br/>print(album_s)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/fca06e492693b31bfc756282aef7d9bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAbR-jS2fPGBL41qq1g43w.png"/></div></div></figure><p id="c7cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，假设我们从字典格式的数据开始，并希望将这些数据以JSON格式发送到数据库。我们可以使用dumps方法将字典转换成字符串JSON对象。让我们定义我们的原始字典:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="a547" class="mb mc it lx b gy md me l mf mg">album2 = {'album_title': 'Yellow Submarine', 'release_year': 1966, 'won_grammy': False, <br/> 'band': 'The Beatles', 'album_sale': None, 'musicians': ['John Lennon', 'Paul McCartney', 'George   Harrison', 'Ringo Starr'], <br/> 'studio': {'studio_name': 'Abbey Road Studios', 'location': 'London, England'}}</span></pre><p id="1fe7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，让我们使用dumps方法打印字符串JSON对象:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="bb6c" class="mb mc it lx b gy md me l mf mg">print(json.dumps(album2))<br/>print(type(json.dumps(album2)))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/c6266ec46596ae9d020243b708ac0c5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIH71RgWk5rX_ozVBpX_oA.png"/></div></div></figure><p id="04c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的字典被正确解析为一个字符串JSON对象。我们看到“album_sale”值“None”现在为“null”，而“won_grammy”值“false”现在为“False”。</p><p id="eec5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以把这个JSON对象写到一个。txt '文件使用转储方法:</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="c4a5" class="mb mc it lx b gy md me l mf mg">file2 = open("album2.txt", "w")<br/>json.dump(album2, file2)</span></pre><p id="5669" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是您可以自己随意摆弄代码。</p><h2 id="de09" class="mb mc it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">结论</h2><p id="f74f" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">总之，在这篇文章中，我们讨论了如何使用python JSON库发送和接收JSON数据。我们讨论了帮助我们接收数据的加载方法和帮助我们发送数据的转储方法。如果你有兴趣学习更多关于在python中使用JSON对象的知识，我推荐<a class="ae ky" href="https://www.youtube.com/watch?v=pTT7HMqDnJw" rel="noopener ugc nofollow" target="_blank">苏格拉底的YouTube教程</a>。我希望你觉得这篇文章有用/有趣。这篇文章的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/basic_python/json_tutorial.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>