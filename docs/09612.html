<html>
<head>
<title>Debunking Python For Loops: Behind the Scenes of a For Loop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭穿 Python For 循环:For 循环的幕后</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/debunking-python-for-loops-is-it-really-a-for-loop-b33687b79070?source=collection_archive---------36-----------------------#2020-07-08">https://towardsdatascience.com/debunking-python-for-loops-is-it-really-a-for-loop-b33687b79070?source=collection_archive---------36-----------------------#2020-07-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5c10" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解 Python 中 for 循环的实际工作方式，以及对 Python 中迭代器的理解。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/af9842d9e9ac025b28420efb0947670a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_AirTK4NJsNZHSaSHOBAA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">蒂内·伊万尼奇在 Unsplash.com 的照片</p></figure><p id="1709" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">循环。任何编程语言中最基本的构造之一。一般来说，循环帮助遍历一系列对象，一次访问一个元素。与其他流行的编程语言一样，Python 也有自己的循环实现，并附带了 While 和 For 循环，所做的事情或多或少与循环相同。</p><p id="9312" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我在探索 python 的时候，我发现 For 循环中发生了一些非常惊人的事情，我认为这是值得一写的。乍一看，在一个 for 循环中会发生如此惊人的事情，这似乎很平常，但实际上非常有趣。本文将涵盖以下内容:</p><ul class=""><li id="eb2c" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">迭代器，它们是什么，如何工作。</li><li id="988c" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">Python 中 for 循环的实际实现。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="9bff" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">Python 中的迭代器</h1><p id="9376" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在我们开始揭穿“For 循环”之前，我们需要首先建立对迭代器的理解，因为迭代器在它的工作中起着重要的作用。</p><h2 id="46c6" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">什么是迭代器？</h2><blockquote class="nz oa ob"><p id="21e3" class="kz la oc lb b lc ld ju le lf lg jx lh od lj lk ll oe ln lo lp of lr ls lt lu im bi translated">在 python 中，一切都是一个对象，就像 python 中的任何其他对象一样，<strong class="lb iu">迭代器</strong>也是一个对象，但这个对象可以被<strong class="lb iu">迭代到</strong>上，并且在调用时一次返回一个元素。</p></blockquote><p id="836c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">迭代器在 python 中随处可见。我们将在列表理解、生成器中找到迭代器，正如你可能已经猜到的，它们也在“For 循环”中实现。</p><h2 id="0444" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">迭代器是如何工作的？</h2><p id="2a4c" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">如前所述，迭代器是一个可以被迭代的对象。创建迭代器对象的必要条件是它必须实现两个特殊的方法</p><ul class=""><li id="e270" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">__iter__()方法。当调用 iterable 时，这个方法返回一个 iterator 对象。</li></ul><blockquote class="nz oa ob"><p id="19aa" class="kz la oc lb b lc ld ju le lf lg jx lh od lj lk ll oe ln lo lp of lr ls lt lu im bi translated">一个<strong class="lb iu"> iterable </strong>是一个对象，我们可以从中获得一个迭代器。例如列表、元组、字符串。</p></blockquote><ul class=""><li id="0dc5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">__next__()方法。这个方法一次从一个 iterable 中返回一个元素。它用于迭代一个迭代器对象。</li></ul><p id="e2fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看下面一个简单的代码示例，以便更好地理解迭代器。</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="23a5" class="nn mr it oh b gy ol om l on oo"># a list which is an iterable<br/>numbers = [1,2,3,4,5]</span><span id="8b6f" class="nn mr it oh b gy op om l on oo"># creating an iterator object from the iterable (numbers)<br/>num_iterator = iter(numbers) # returns an iterator</span><span id="ac3c" class="nn mr it oh b gy op om l on oo">#Iterating through num_iterator using next() method<br/>print(next(num_iterator)) # output: 1<br/>print(next(num_iterator)) # output: 2<br/>print(next(num_iterator)) # output: 3<br/>print(next(num_iterator)) # output: 4<br/>print(next(num_iterator)) # output: 5</span><span id="8db3" class="nn mr it oh b gy op om l on oo"># when no more elements left, exception is raised<br/>print(next(num_iterator)) # StopIteration Exception Raised</span></pre><p id="b1a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 iter()方法，我们从数字列表中创建了一个迭代器对象。然后，我们使用 next()方法手动遍历迭代器的所有元素。一旦我们到达数字的末尾，如果我们继续调用迭代器上的 next()方法，就会引发 StopIteration 异常。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="503f" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">Python 中 For 循环的实际实现</h1><p id="5383" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">既然我们对 python 中迭代器的工作原理有了很好的理解，现在我们可以看看 Python 中的<strong class="lb iu"> For 循环</strong>的幕后发生了什么。</p><h2 id="6b58" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">需要 for 循环吗？</h2><p id="4561" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">从前面的代码片段中我们可以看到，我们手动遍历列表，这对于一个包含大量数字或元素的列表来说是非常繁忙的。一定有更好更优雅的方法来做同样的事情，那就是 via For 循环。因此，我们之前的代码可以转换为以下代码:</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="2564" class="nn mr it oh b gy ol om l on oo">for number in numbers:<br/>    print(number) # output: 1,2,3,4,5</span></pre><p id="3f2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需两行代码和相同的功能。太好了。</p><h2 id="96b5" class="nn mr it bd ms no np dn mw nq nr dp na li ns nt nc lm nu nv ne lq nw nx ng ny bi translated">For 幕后循环</h2><p id="fddf" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">现在看一下下面的代码片段</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="89a6" class="nn mr it oh b gy ol om l on oo">num_iterator = iter(numbers)</span><span id="9b44" class="nn mr it oh b gy op om l on oo">while True:<br/>    try:<br/>        # get the next item<br/>        number = next(num_iterator)<br/>    except StopIteration:<br/>        break</span></pre><p id="d9c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看着上面的代码，你可能想知道为什么这里有 while 循环，而我们一直在谈论 for 循环？你现在看到的实际上是一个<strong class="lb iu"> for 循环背后发生的事情。</strong>上面的代码是 python 中一个<strong class="lb iu"> for 循环的实际实现。</strong></p><p id="1dbb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当对 iterable 调用 for 循环时，在内部使用 iter()方法从 iterable 创建迭代器对象，并使用无限 while 循环在 try/catch 块中使用 next()方法迭代迭代器对象的值。一旦我们到达迭代器中的元素末尾，就会引发<strong class="lb iu"> StopIteration </strong>异常，我们就跳出了无限循环。</p><h1 id="f96e" class="mq mr it bd ms mt oq mv mw mx or mz na jz os ka nc kc ot kd ne kf ou kg ng nh bi translated">所以“for 循环”只是一个无限的“while 循环”,带有迭代器的实现。讽刺。</h1></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="fc4a" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">摘要</h1><p id="42a4" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">在本文中，我们学习了什么是迭代器，它们是如何工作的，以及一个 for 循环是如何在 python 内部实现的，它只是一个无限的 while 循环。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="b65e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，请看看我的其他文章。帮我达到 500 个追随者，跟随我在媒体上获得更多这样惊人的内容。谢了。</p><div class="ov ow gp gr ox oy"><a href="https://medium.com/@furqan.butt" rel="noopener follow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">Furqan 黄油培养基</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">在介质上阅读 Furqan Butt 的文字。大数据工程师，Python 开发者。让我们连接…</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">medium.com</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ks oy"/></div></div></a></div></div></div>    
</body>
</html>