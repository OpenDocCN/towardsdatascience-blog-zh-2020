<html>
<head>
<title>Set up a standalone HBase local instance and connect to it with Python Happybase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置一个独立的 HBase 本地实例，并使用 Python Happybase 连接到它</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setting-up-a-standalone-hbase-local-instance-and-connect-to-it-with-python-happybase-9751c9fe6941?source=collection_archive---------24-----------------------#2020-02-09">https://towardsdatascience.com/setting-up-a-standalone-hbase-local-instance-and-connect-to-it-with-python-happybase-9751c9fe6941?source=collection_archive---------24-----------------------#2020-02-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="c51e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最近，在我作为数据科学顾问开始的冒险中，我参与了一个项目，我们从中获取数据的数据库是著名的 Apache HBase。</p><p id="df9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">HBase 是一个分布式的 Hadoop 非关系数据库，在处理海量数据方面非常强大。</p><p id="12c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在 HBase 数据模型中，行由行键标识，行键或多或少相当于关系主键，它们按行键排序。</p><p id="2f0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">列被分组到所谓的列族中，列族是列的物理和逻辑分组，一个族中的列与另一个族中的列分开存储，以便只能对您需要的数据执行查询。</p><p id="3516" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以在这里阅读更多关于 HBase <a class="ae ko" href="https://hbase.apache.org/book.html#faq" rel="noopener ugc nofollow" target="_blank">的内容。</a></p></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><p id="44a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我决定安装 HBase 本地实例的原因是，我必须带着无尽的好奇心生活，我喜欢尝试。</p><h1 id="456d" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 1:设置 Linux 虚拟机</h1><p id="2c56" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">我做的第一件事是用<a class="ae ko" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/releases/x86_64/alpine-standard-3.11.3-x86_64.iso" rel="noopener ugc nofollow" target="_blank"> Alpine Linux </a>创建一个 Linux 虚拟机，挂载在 VMWare 上。虚拟机运行后，我通过键入以下命令登录安装程序:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="05c2" class="mi kx it me b gy mj mk l ml mm">localhost login: root<br/>setup-alpine</span></pre><p id="66ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我按照 shell 指令操作，最后，我重启了系统。我需要 Java 支持才能让 HBase 工作，所以我安装了 openjdk8:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="6818" class="mi kx it me b gy mj mk l ml mm">apk add openjdk8-jre</span></pre><p id="98fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，为了方便起见，我在<em class="mn"> /home </em>中创建了几个文件夹:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f2c1" class="mi kx it me b gy mj mk l ml mm">cd home<br/>mkdir downloads<br/>mkdir andrea<br/>cd downloads</span></pre><p id="a8f6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我在<em class="mn"> /home/downloads </em>中，我可以下载 HBase 压缩文件夹，解压缩并更改目录:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="8823" class="mi kx it me b gy mj mk l ml mm">wget <a class="ae ko" href="https://www.apache.org/dyn/closer.lua/hbase/2.2.3/hbase-2.2.3-bin.tar.gz" rel="noopener ugc nofollow" target="_blank">https://www.apache.org/dyn/closer.lua/hbase/2.2.3/hbase-2.2.3-bin.tar.gz</a></span><span id="4cfb" class="mi kx it me b gy mo mk l ml mm">tar xzvf hbase-2.2.3-bin.tar.gz</span><span id="157e" class="mi kx it me b gy mo mk l ml mm">cd hbase-2.2.3</span></pre><p id="16ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个文件夹里面有两个重要的文件夹:<em class="mn"> bin </em>和<em class="mn"> conf </em>。</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/de58428d53e02b6ba19a3370b3cd6ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*9nzFTJGSSdn9J0j7zgNsUQ.png"/></div></figure><p id="33b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我走进了<em class="mn"> conf </em>:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/60ab7abeeaf41451da19a442b7215304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*pBSPyz5RbCUcGsjXnNHCJg.png"/></div></figure><p id="8d8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后将<strong class="js iu">h base _ env . sh</strong>内的<strong class="js iu"> JAVA_HOME </strong>环境变量修改为<em class="mn">/usr/lib/JVM/open JDK 8-JRE</em>(文件夹可能不同):</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="e3be" class="mi kx it me b gy mj mk l ml mm">export JAVA_HOME=/usr/lib/jvm/openjdk8-jre</span></pre><p id="d617" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，对于独立的 hbase，我用示例 1 中的<a class="ae ko" href="https://hbase.apache.org/book.html#quickstart" rel="noopener ugc nofollow" target="_blank">这里的</a>报告了文件<em class="mn"> hbase-site.xml </em>的内容。</p><p id="5745" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我向上导航一个文件夹，回到 Hbase 主文件夹，转到<em class="mn"> bin </em>目录:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/cdfdefd8008d56af6dfda787f67cdcf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*iiwSnvrujMlEuPihhhQ75Q.png"/></div></figure><p id="dac0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要检查 HBase 是否正常工作:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="66ad" class="mi kx it me b gy mj mk l ml mm">./start-hbase.sh</span><span id="f1d5" class="mi kx it me b gy mo mk l ml mm">./hbase shell</span></pre><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mv"><img src="../Images/9f92655ee80885864a34eff88b0fd351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S74iS17La1-nG29mk49K0w.png"/></div></div></figure><p id="535e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">瞧啊！</p><p id="4c10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要查看表格，请键入<em class="mn"> list: </em></p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/916d56a8d8c63d2c2d4faf5c7525f1b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*q85d1i1AtwECtdr2HWQLEA.png"/></div></figure><p id="a86c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然，这里没有表，但是我们可以按照以下约定创建一个表:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="27e5" class="mi kx it me b gy mj mk l ml mm">create 'table_name','columnFamily1',...,'columnFamilyN'</span></pre><p id="7c0c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在外壳中:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/2ff11a46ab6536b2b5faf3451ba94081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*ujiVPcLOTgKf0iBPgmao7Q.png"/></div></figure><p id="376c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们添加两行:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nc"><img src="../Images/1917f896a18b542cfab2e4442e474747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EYA3sUqWvVJmS3x5xn1iDw.png"/></div></div></figure><p id="1d4c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要检索该表，让我们运行一次扫描:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nd"><img src="../Images/37e69dd11c02e9bc35c7fa112fcc7d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXsLoPSjmPgttN_DZo9eeQ.png"/></div></div></figure><p id="4fd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，表就在那里，我们可以使用 Python 包<strong class="js iu"> Happybase </strong>连接到它，这个包是使用 Python Thrift 构建的。</p></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><p id="3e6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，停止 HBase 实例，安装<strong class="js iu"> Python 3 </strong>和<strong class="js iu"> Happybase </strong>包:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3b74" class="mi kx it me b gy mj mk l ml mm">apk add python3</span><span id="6da7" class="mi kx it me b gy mo mk l ml mm">pip install happybase</span></pre><p id="a629" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，启动节俭服务器:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ne"><img src="../Images/978d3638aba44c213774fa836eec2d02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UR8XJtpsXqNgW5R7KR-Ozg.png"/></div></div></figure><p id="c3b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">和 HBase:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nf"><img src="../Images/e69ce6cc391212f330c386e15998642a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v28T8O0s8d0xDUVz--NTMw.png"/></div></div></figure><p id="5c57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们打开一个交互式 Python 会话，并连接到 HBase，以查看使用 Happybase APIs 时一切正常:</p><figure class="lz ma mb mc gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi ng"><img src="../Images/3f1bce7536a174a2cfb9998b7ed8145c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvIDuHzHgWkuuBUGxnlUBw.png"/></div></div></figure><p id="5909" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，有任何问题请联系我！</p></div></div>    
</body>
</html>