<html>
<head>
<title>Using String Methods in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Pandas 中使用字符串方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-string-methods-in-pandas-5e4509ff1f5f?source=collection_archive---------20-----------------------#2020-07-21">https://towardsdatascience.com/using-string-methods-in-pandas-5e4509ff1f5f?source=collection_archive---------20-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6782" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在 Python 中对 pandas 数据帧中的列应用字符串方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/12faa3fd981bbbe26f9d67ced48c4622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OeGvNSGhCDfYwkHn"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@fabioha?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法比奥</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="3df9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常在熊猫数据帧中，我们有包含字符串值的列。幸运的是，pandas 提供了一种将字符串方法应用于整个列的简单方法，这些列只是 pandas 系列对象。我们可以将这些 series 对象(或列)的值作为字符串访问，并通过使用 series 的 str 属性对它们应用字符串方法。让我们在这里看一些例子。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="565a" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">创建数据帧</h2><p id="0f35" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们将使用在这里<a class="ae ky" href="http://bit.ly/uforeports" rel="noopener ugc nofollow" target="_blank">发现的不明飞行物报告</a>来创建我们的数据框架。然后，我们将使用 dataframe head 方法查看 dataframe 的前 5 行，并使用 dataframe info 方法检查我们的列值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/06bcdd23add750739a3961d72f279c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*C51ocZZ77MR3iT3qGYZPpA.png"/></div></figure><p id="3860" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">info 方法的输出告诉我们，列中的所有非空值很可能是字符串对象。在本教程中，我们将主要关注城市列。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="708c" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">将字符串方法应用于列</h2><p id="1c71" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">记住熊猫数据帧是由列组成的。这些列中的每一列都是熊猫系列对象。在 pandas 中，我们可以访问这些数据帧和系列对象的方法和属性。Pandas 为我们提供了一系列用于处理字符串的方法。这些字符串方法将应用于列中的每个条目。</p><p id="4864" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了将字符串方法应用于列，我们将使用 Series 对象的 str 属性。因此，一般来说，我们将使用以下格式:</p><blockquote class="nb"><p id="2d5d" class="nc nd it bd ne nf ng nh ni nj nk lu dk translated">Series.str. <function/></p></blockquote><p id="ffad" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">假设我们想将 ufo 数据帧中的所有城市名称转换成大写。首先，我们需要访问该系列(或列)，然后添加。str，最后加上我们要用的具体方法。要找到我们可用的所有字符串方法，请转到<a class="ae ky" href="https://pandas.pydata.org/pandas-docs/stable/reference/series.html" rel="noopener ugc nofollow" target="_blank">这里</a>并找到字符串处理部分。</p><p id="60b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用括号或点符号来访问系列或列，如下所示:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="d5b8" class="mc md it nr b gy nv nw l nx ny"># bracket notation<br/>ufo[‘City’] </span><span id="7b5d" class="mc md it nr b gy nz nw l nx ny"># dot notation<br/>ufo.City</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/e69e5f6273e75fa72442a54bd0c2430f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*qm7sMYhtHgKEPdqSUZkuTw.png"/></div></figure><p id="7515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ob">注意城市列的类型是一个序列对象。因此，我们可以对该对象应用任何级数方法。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="aa6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，要将我们列中的所有城市名称转换为大写，我们可以添加。str 后跟 upper 方法，如下所示:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="56ed" class="mc md it nr b gy nv nw l nx ny">ufo.City.str.upper()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/f8e1cd20f80aedf6aa7d0ad021bb273d.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*MAPJK_R0L6-EUuhb24Jjhg.png"/></div></figure><p id="80a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:这实际上并没有改变我们的原始数据帧。如果我们想改变我们的原始数据帧，我们可以用下面的代码将这个输出值赋给我们的原始城市列:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="cbdf" class="mc md it nr b gy nv nw l nx ny">ufo.City = ufo.City.str.upper()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/48cb71247891e62cb995d0daed854f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTqgciCgfVvwtLJDa35sTQ.png"/></div></div></figure><p id="1d22" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ob">现在，我们原始 ufo 数据帧的城市列包含大写的城市名称。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><div class="kj kk kl km gt oe"><a rel="noopener follow" target="_blank" href="/how-to-index-data-in-pandas-with-python-4437c24ff332"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">如何用 Python 索引 Pandas 中的数据</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">如何在 Python 中使用 loc 和 iloc 方法</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">towardsdatascience.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="4c31" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">替换列中的字符</h2><p id="9c51" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">如果我们想用下划线替换 City 列中的所有空格，该怎么办？我们可以通过使用 replace 方法来实现这一点。我们只需指定要替换的内容，然后用什么来替换它。</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="5800" class="mc md it nr b gy nv nw l nx ny">ufo.City.str.replace(‘ ’, '_')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/440b0ab20a878a4f4873739c81cc2f0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*kshunqAdDG8LzDAozN0wxA.png"/></div></figure><p id="08f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意所有的空格都被替换成了下划线。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="f993" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">链接方法</h2><p id="2cde" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">我们也可以将字符串方法链接在一起。记住，这些系列方法返回一个熊猫系列对象。所以我们可以给它们添加另一个字符串方法。例如，假设我们想用下划线替换所有空格，并将所有城市名改为小写。我们可以通过下面的代码来实现这一点:</p><pre class="kj kk kl km gt nq nr ns nt aw nu bi"><span id="1c0f" class="mc md it nr b gy nv nw l nx ny">ufo.City.str.replace(‘ ‘, ‘_’).str.lower()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/fda5ee00dbd8b1f5fe62102ce8bd9fe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*h1aFYHMBIttd-LEcPRkwWw.png"/></div></figure><p id="73da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ob">自从不明飞行物。City.str.replace('，' _ ')返回一个 Series 对象，我们可以只使用或链接另一个 Series 方法到它。</em></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="87c6" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated"><strong class="ak">本教程使用的所有代码:</strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ov ow l"/></div></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="e05d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢阅读这样的故事，并想支持我成为一名作家，考虑注册成为一名媒体成员。每月 5 美元，你可以无限制地阅读媒体上的故事。如果你用我的 <a class="ae ky" href="https://lmatalka90.medium.com/membership" rel="noopener"> <em class="ob">链接</em> </a> <em class="ob">注册，我会赚一小笔佣金。</em></p><div class="ox oy gp gr oz oe"><a href="https://lmatalka90.medium.com/membership" rel="noopener follow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">通过我的推荐链接加入媒体——卢艾·马塔尔卡</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">阅读卢艾·马塔尔卡的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">lmatalka90.medium.com</p></div></div><div class="on l"><div class="pa l op oq or on os ks oe"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="cdc0" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">结论</h2><p id="fa71" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">在本教程中，我们学习了如何访问 pandas 数据帧中的列并对其应用字符串方法。</p></div></div>    
</body>
</html>