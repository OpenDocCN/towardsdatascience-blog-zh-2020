<html>
<head>
<title>Object Detection Metrics With Worked Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有工作示例的对象检测度量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/on-object-detection-metrics-with-worked-example-216f173ed31e?source=collection_archive---------2-----------------------#2020-08-26">https://towardsdatascience.com/on-object-detection-metrics-with-worked-example-216f173ed31e?source=collection_archive---------2-----------------------#2020-08-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="956f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">AP、mAP 和 AP50 以及其他度量都通过一个示例进行了说明。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/73bb85523dbb9882453cf44014d190fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZRUGnoXqKyQpFR-wzIlGw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@xps?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> XPS </a>在<a class="ae ky" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="b5ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">平均精度(AP)和平均平均精度(mAP)是用于评估对象检测模型的最流行的度量，例如更快的 R_CNN、掩模 R-CNN 和 YOLO 等等。相同的指标也用于评估 COCO 和 PASCAL VOC 挑战赛等比赛中的提交材料。</p><p id="0b98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以从 AP 中导出其他度量。例如，mAP、AP50、AP75 和 AP[.5:.5:.</p><p id="5b2e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将仔细阅读这些概念，以便在一天结束时，您能够清楚地理解它们。下图(图 1 和图 2)显示了这些指标在一些最新(SOTA)模型中的使用情况。</p><div class="kj kk kl km gt ab cb"><figure class="lv kn lw lx ly lz ma paragraph-image"><img src="../Images/a54d60b6f17a45b6a084a1c0baae0530.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*0y261fEQs0iAgADOW4Sw1Q.png"/></figure><figure class="lv kn mb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/8fff0f7f81c3e4618daaad9181916dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*OyDTMBek5ighamvwKxG9hg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk mc di md me translated">图 1:分别在掩码 RCNN ( <a class="ae ky" href="https://arxiv.org/pdf/1703.06870.pdf" rel="noopener ugc nofollow" target="_blank">源</a>)和 YOLOv3 ( <a class="ae ky" href="https://pjreddie.com/media/files/papers/YOLOv3.pdf" rel="noopener ugc nofollow" target="_blank">源</a>)中使用的度量。</p></figure></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/46047f71d5853541fce7c8a0b110a0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bh1MlvkSkkmCCk_mujcCrQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 COCO 挑战赛中使用的一些指标(<a class="ae ky" href="https://cocodataset.org/#detection-eval" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="414e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在低层次上，评估对象检测器的性能归结为确定检测是否正确。</p><p id="6bea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mn">术语定义:</em></p><ul class=""><li id="4dea" class="mo mp it lb b lc ld lf lg li mq lm mr lq ms lu mt mu mv mw bi translated"><strong class="lb iu">真阳性(TP) </strong> —模型做出的正确检测。</li><li id="45f0" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu mt mu mv mw bi translated"><strong class="lb iu">假阳性(FP) </strong> —检测器的错误检测。</li><li id="a890" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu mt mu mv mw bi translated"><strong class="lb iu">假阴性(FN) </strong> —物体检测器遗漏(未检测到)的基本事实。</li><li id="97b6" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu mt mu mv mw bi translated"><strong class="lb iu">真阴性(TN)</strong>—这是模型正确检测不到的背景区域。在对象检测中不使用该度量，因为在准备注释时没有明确地注释这些区域。</li></ul><p id="1c76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要另一个名为 T22 交集/并集(IoU)的辅助指标来以更可量化的方式定义这些术语。</p><h1 id="0470" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">并集上的交集</h1><p id="8720" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">对象检测中的 IoU 度量评估地面<em class="mn"> ( </em> <code class="fe nz oa ob oc b"><em class="mn">gt</em></code> <em class="mn"> ) </em>真实与预测<em class="mn"> ( </em> <code class="fe nz oa ob oc b"><em class="mn">pd</em></code> <em class="mn"> ) </em>之间的重叠程度。基本事实和预测可以是任何形状-矩形盒、圆形或不规则形状)。其计算方法如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/8d9ba3f18c007eb7a1010724bb4f40a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*V5EoeoLerTcZ2Hj4LkwOGA.png"/></div></figure><p id="8fb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用图解法，IoU 定义如下(相交面积除以地面实况和预测框之间的联合面积。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/2e005502175d3ef5d0e0afba5bb534cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*fYdiMfuzhqJ5OtSKmo_xtQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 3:欠条(来源:作者)</p></figure><p id="7c5e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">IoU 的范围在 0 和 1 之间，其中 0 表示没有重叠，1 表示<code class="fe nz oa ob oc b"><em class="mn">gt</em></code>和<code class="fe nz oa ob oc b"><em class="mn">pd</em></code>之间完全重叠。IoU 度量通过阈值处理是有用的；也就是说，我们需要一个阈值(比如说α)来确定检测是否正确。</p><p id="4008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于α处的 IoU 阈值，真阳性(TP)是对<code class="fe nz oa ob oc b">IoU(<em class="mn">gt,pd)</em>≥ α</code>的检测，假阳性是对<code class="fe nz oa ob oc b">IoU(<em class="mn">gt,pd)</em>&lt; α</code>的检测。假阴性是与<code class="fe nz oa ob oc b">IoU(<em class="mn">gt,pd)</em>&lt; α.</code>一起错过的<code class="fe nz oa ob oc b"><em class="mn">gt </em></code>地面真相</p><p id="b548" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">清楚了吗？如果不是，下图应该会使定义更清楚。</p><p id="e6ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑 IoU 阈值，α = 0.5，则 TP、FP 和 FNs 可以如下图 4 所示确定。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/a3bd8d0a5fd08f7c4d7f67f6d3f73fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*JEKvHp7jxRlub0wrhge40g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 4:通过 IoU 阈值识别 TP、FP 和 FN。</p></figure><p id="c1af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>如果我们把 IoU 阈值提高到 0.86 以上，第一个实例就是 FP；如果我们将 IoU 阈值降低到 0.24 以下，第二个实例就变成了 TP。</p><p id="0e5a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">备注:</strong>将检测标记为 TP 或 FP 以及将地面实况标记为 FN 的决定完全取决于 IoU 阈值α的选择。例如，在上图中，如果我们将阈值降低到 0.24 以下，那么第二个图像中的检测将变为 TP，如果 IoU 阈值升高到 0.86 以上，则第一个图像上的检测将为 FP。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="9834" class="nc nd it bd ne nf og nh ni nj oh nl nm jz oi ka no kc oj kd nq kf ok kg ns nt bi translated">精确度和召回率</h1><p id="1345" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated"><strong class="lb iu">精度</strong>是模型仅识别相关对象的精确程度。它是 TPs 与模型进行的所有检测的比率。</p><p id="061e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">回忆</strong>测量模型检测所有基本事实的能力——所有基本事实中的 TPs 命题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/4ae66e6d7cc0035b97fc514f3857cd49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*vr6rCP2p4i4KdKprBkigWw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式 1:精确度和召回率</p></figure><p id="a6ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个模型如果精度高，召回率高，就说是好的。一个完美的模型有零 FNs 和零 FPs(精度=1，召回=1)。通常，获得一个完美的模型是不可行的。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="e704" class="nc nd it bd ne nf og nh ni nj oh nl nm jz oi ka no kc oj kd nq kf ok kg ns nt bi translated"><strong class="ak">精确 x 召回曲线(PR 曲线)</strong></h1><p id="d6fb" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">注意:在继续之前，请看这个图并阅读它的标题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/7ade38a36ec80a2fc8913417b6ef0414.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*WL8PnVSPE_0Pem9bnSeseQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">这是使用<a class="ae ky" href="https://arxiv.org/pdf/1703.06870.pdf" rel="noopener ugc nofollow" target="_blank">屏蔽 R-CNN </a>进行的检测。它显示了一个边界框(虚线)、分割遮罩、类(水果)和置信度得分(0.999)。对象检测模型通常输出边界框、置信度得分和类别。置信度值是模型在检测中的置信度，其范围在 0 和 1 之间。</p></figure><p id="6394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像前面 IoU 描述的一样，置信度评分也依赖于阈值。提高置信度得分阈值意味着模型将错过更多的对象(更多的 fn，因此低召回和高精度)，而低置信度得分将意味着模型获得更多的 FPs(因此低精度和高召回)。这意味着我们需要在精确度和召回率之间进行权衡。</p><p id="c6c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">精确度-召回率(PR)曲线是不同置信度下精确度和召回率的曲线图。对于一个好的模型来说，即使置信度变化，精确度和召回率仍然很高。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="f468" class="nc nd it bd ne nf og nh ni nj oh nl nm jz oi ka no kc oj kd nq kf ok kg ns nt bi translated">平均精度</h1><p id="c977" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">AP@α是在α IoU 阈值下评估的精确召回曲线(AUC-PR)下的面积。形式上定义如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/e9272a1894326df31ba760da5b15987d.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*bs56Iu0mzjAP-QAM4XAAhw.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式 2:平均精度的定义</p></figure><p id="182a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">符号:</strong> AP@α或 APα表示 AP 精度在α IoU 阈值处评估。如果您看到 AP50 和 A75 这样的指标，它们分别表示在 IoU=0.5 和 IoU=0.75 时计算的 AP。</p><p id="cb4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PR 曲线下的高面积意味着高召回率和高精度。自然，PR 曲线是一个锯齿形的曲线。这意味着它不是单调递减的。我们可以使用插值方法消除这一特性。我们将在下面讨论其中的两种插值方法:</p><ol class=""><li id="b6e3" class="mo mp it lb b lc ld lf lg li mq lm mr lq ms lu oo mu mv mw bi translated"><em class="mn"> 11 点插值法</em></li><li id="4cff" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu oo mu mv mw bi translated"><em class="mn">全点插补方法</em></li></ol><p id="5030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> 11 点插值法</strong></p><p id="eee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">11 点 AP 是在 11 个等间隔的标准回忆水平，即 0.0，0.1，0.2，.。。1.0.它被定义为</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/a1f77c08ab301deea82ec854ea10fc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*4lx2r2HUx0wRbQOjWMcAZA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式 3: 11 点插值公式</p></figure><p id="1502" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中，R = {0.0，0.1，0.2，.。。1.0}和</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/f62258dd61d7a0e27c50652f63f1f57b.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*ZlDxknMkEC4ZRid0lV_Fpg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式 4:支持等式 3</p></figure><p id="75c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即<strong class="lb iu">召回值处的插值精度，r — </strong>它是任何召回值 r'≥ r 的最高精度，如果这个没有意义，我向你保证，一旦我们通过一个例子，它就完全有意义了。</p><p id="e9c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">所有点插值法</strong> <br/>在这种情况下，对所有位置(回忆值)进行插值，即，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/b7b3eee22143844d94f83dc69e49c634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xH9UzeO4CV7EzVNrD0GQJA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">等式 5:所有点插值方法</p></figure><h1 id="710f" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">平均精度</h1><p id="9141" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated"><strong class="lb iu">备注(AP 和班级数):</strong> AP 是针对每个班级单独计算的。这意味着 AP 值和类的数量一样多(不严格)。这些 AP 值被平均以获得<strong class="lb iu">平均精度(mAP) </strong>度量。</p><p id="7d13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">定义:</strong>平均精度(mAP)是所有类的 AP 值的平均值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/dcec07872b62085541bf1c761bda8786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*wwGdfVPP4uvrJcCb0A_xog.png"/></div></figure><p id="e061" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">备注(AP 和 IoU) </strong>:如前所述，AP 是在给定的 IoU 阈值α下计算的。通过这种推理，可以在一个阈值范围内计算 AP。<a class="ae ky" href="https://arxiv.org/pdf/1405.0312.pdf" rel="noopener ugc nofollow" target="_blank">微软 COCO </a>计算了给定类别/类在 10 个不同 IoU 下的 AP，范围从 50%到 95%，步长为 5%，通常表示为 AP@[.50:.5:.95]。<a class="ae ky" href="https://arxiv.org/pdf/1703.06870.pdf" rel="noopener ugc nofollow" target="_blank"> Mask R-CNN </a>报道 AP@[.50:.5:.上面写着</p><blockquote class="os ot ou"><p id="6359" class="kz la mn lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated">“我们报告了标准 COCO 指标，包括 AP(IoU 阈值的平均值)、AP50、AP75 以及 APS、APM、APL(不同规模的 AP)”—摘自<a class="ae ky" href="https://arxiv.org/pdf/1703.06870.pdf" rel="noopener ugc nofollow" target="_blank"> Mask R-CNN 论文</a></p></blockquote><p id="4e45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使所有这些事情更清楚，让我们来看一个例子。</p><h1 id="6b12" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">例子</h1><p id="d19b" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">考虑下面图 5 中显示的 3 个图像。它们包含 12 个检测(红色方框)和 9 个基本事实(绿色)。每个检测都有一个由字母和模型置信度标记的类别。在本例中，假设所有检测都属于同一对象类别，IoU 阈值设置为α= 50%。IoU 值如下表 1 所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/2891e4ccf0a0010ac7c57a3616c3b978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DyFf00k-mSyEJWAM3V_q-A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 5:检测同类对象的模型。有 12 个检测和 9 个地面真相。</p></figure><p id="3804" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">备注(多次检测)</strong>:例如图像 1 中的<strong class="lb iu"> c，d，图像 2 </strong>中的<strong class="lb iu"> g，f，图像 3 </strong>中的<strong class="lb iu"> i，k。对于类似的多个检测，置信度最高的检测标记为 TP，所有其他检测标记为 FPs，前提是该检测具有 IoU≥阈值的真值框。这意味着:</strong></p><ul class=""><li id="2270" class="mo mp it lb b lc ld lf lg li mq lm mr lq ms lu mt mu mv mw bi translated"><strong class="lb iu"> c 和 d 成为 FPs </strong>是因为它们都不满足阈值要求。<em class="mn"> c </em>和<em class="mn"> d </em>分别有 47%和 42%的欠条，而要求的是 50%。</li><li id="1abb" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu mt mu mv mw bi translated"><strong class="lb iu"> g 是 TP，f 是 FP </strong>。两者的 iou 都大于 50%，但<em class="mn"> g </em>的信心为 97%，而<em class="mn"> f </em>的信心为 96%。</li><li id="ed33" class="mo mp it lb b lc mx lf my li mz lm na lq nb lu mt mu mv mw bi translated">那<strong class="lb iu"> i </strong>和<strong class="lb iu"> k </strong>呢？</li></ul><blockquote class="os ot ou"><p id="6320" class="kz la mn lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated">图像中同一物体的多次检测被视为错误检测，例如，单个物体的 5 次检测被视为 1 次正确检测和 4 次错误检测— <strong class="lb iu">来源:PASCAL VOC 2012 论文</strong>。</p><p id="af8e" class="kz la mn lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated">一些检测器可以输出与单个地面实况重叠的多个检测。对于这些情况，具有最高置信度的检测被认为是 TP，而其他的被认为是 FP，如 PASCAL VOC 2012 挑战所应用的。-来源:<strong class="lb iu">对象检测算法性能指标调查论文。</strong></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/2be13ac641bb81823af3f91a98a8efe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cu6mYF893EJG9zscR4iIVA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">表 1: IoU 阈值，α = 50%。cumTP 和 cumFP 分别是 TP 和 FP 列的累积值。all _ detections = cumTP+cumFP。</p></figure><p id="3214" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要提示:</strong>在填写<em class="mn"> cumTP、cumFP、all_detection、precision 和 recall 之前，</em>您需要按照置信度降序对表格值进行排序。精度是累计/所有检测，召回是累计/实际数量。我们有九个基本事实。</p><h1 id="c054" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated"><strong class="ak"> 11 点插补</strong></h1><p id="3651" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">为了使用 11 点插值计算 AP@0.5 的近似值，我们需要对 R 中召回值的精度值求平均值(见等式 3)，即召回值 0.0、0.1、0.2、.。。1.0.如下图 6 所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pa"><img src="../Images/01668731c7f5cd1d8a79d1b021167137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWjixRNvF5Eyx_3ShqaWDQ.png"/></div></div></figure><div class="kj kk kl km gt ab cb"><figure class="lv kn pb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/09fdfc42576303ee3b3fc9fbffa3d320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*sqgtgo5Mup83IW4UvYD-yw.png"/></div></figure><figure class="lv kn pb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/a3a2831c2cb9cb58e376a6512ba227bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*APQlht3WdyFAhc1nLJGn1g.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pc di pd me translated">图 6:左:所有精确召回值的图表。右图:匹配以下召回值的 11 个精度值:0.0，0.1，…，1.0。</p></figure></div><h1 id="cf3d" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">所有点插值</h1><p id="652d" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">根据等式 5 中的定义，我们可以使用以下所有点插值法计算 AP@50。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/96074f28db2364cba759a363ac46f72d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_eky2iuKUd0XyjFHQvq1sQ.png"/></div></div></figure><div class="kj kk kl km gt ab cb"><figure class="lv kn pb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7709e82372b7ded735b441d63cc23b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1lvztWpg_qaAS2-0cMQW2g.png"/></div></figure><figure class="lv kn pb lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/df658b794fc78b624480e880c4c8bc54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*AhmpDqBWcx_ml-i5_8MeGg.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk pc di pd me translated">图 7:左:覆盖原始 PR 曲线的所有点插值曲线(红色)。右图:所有点插值的区域</p></figure></div><p id="17f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，所有点插值包括计算和求和图 1.3b 中四个区域(R1、R2、R3 和 R4)的面积值，也就是说，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/cc96735170a817cc5c1a43789a22d328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DmUeihXUcV7Nrmq0pwkhgA.png"/></div></div></figure><p id="e51f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！</p><p id="3bc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">备注:</strong>回想一下，我们说过 AP 是为每个类计算的。我们的计算是针对一门课的。对于几个类别，我们可以通过简单地取不同类别的结果 AP 值的平均值来计算 mAP。</p><p id="ea52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是另一篇关于对象检测指标的文章</p><div class="pg ph gp gr pi pj"><a rel="noopener follow" target="_blank" href="/confusion-matrix-and-object-detection-f0cbcb634157"><div class="pk ab fo"><div class="pl ab pm cl cj pn"><h2 class="bd iu gy z fp po fr fs pp fu fw is bi translated">混淆矩阵和目标检测</h2><div class="pq l"><h3 class="bd b gy z fp po fr fs pp fu fw dk translated">一种评估实例分割模型性能的度量</h3></div><div class="pr l"><p class="bd b dl z fp po fr fs pp fu fw dk translated">towardsdatascience.com</p></div></div><div class="ps l"><div class="pt l pu pv pw ps px ks pj"/></div></div></a></div><h1 id="3731" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">结论</h1><p id="f840" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">看完这篇文章，希望你很好的理解 AP，mAP，PR 曲线。您还注意到 IoU 是一个重要的概念，因为如果不基于 IoU 定义阈值，我们就无法定义这些指标。我们还了解到，AP 是按类计算的，得到的 AP 值的平均值就是地图。对于不同的 IoU 阈值，也可以计算 AP。</p><p id="4e33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样重要的是要注意，预测掩码不一定是矩形框。它可以是任何形状，特别是被检测物体的形状。下图显示了形状不规则的检测示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi py"><img src="../Images/0836757f4bae4546ec7afaf7c05e6e12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g78cBuIQXkMpaDj9UKfPEA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图 8:基本事实(蓝色圆圈)和检测(红色遮罩)。预测不是规则形状的面具。</p></figure><p id="1dc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你觉得这篇文章很有帮助，并且想了解 Python 的实现，请给我写信。我个人资料上的电子邮件。</p><h1 id="9d62" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">更多文章</h1><div class="pg ph gp gr pi pj"><a rel="noopener follow" target="_blank" href="/7-months-of-a-relationship-whatsapp-messages-analyzed-e5c34b8aaa63"><div class="pk ab fo"><div class="pl ab pm cl cj pn"><h2 class="bd iu gy z fp po fr fs pp fu fw is bi translated">7 个月的关系，WhatsApp 消息分析</h2><div class="pq l"><h3 class="bd b gy z fp po fr fs pp fu fw dk translated">使用 Python 分析 WhatsApp 数据。如此简单。任何人都可以跟随。</h3></div><div class="pr l"><p class="bd b dl z fp po fr fs pp fu fw dk translated">towardsdatascience.com</p></div></div><div class="ps l"><div class="pz l pu pv pw ps px ks pj"/></div></div></a></div><div class="pg ph gp gr pi pj"><a rel="noopener follow" target="_blank" href="/web-scraping-e-commerce-website-using-selenium-1088131c8541"><div class="pk ab fo"><div class="pl ab pm cl cj pn"><h2 class="bd iu gy z fp po fr fs pp fu fw is bi translated">使用 Selenium 的 Web 抓取电子商务网站</h2><div class="pq l"><h3 class="bd b gy z fp po fr fs pp fu fw dk translated">抓取网上书店的一个简单例子。</h3></div><div class="pr l"><p class="bd b dl z fp po fr fs pp fu fw dk translated">towardsdatascience.com</p></div></div><div class="ps l"><div class="qa l pu pv pw ps px ks pj"/></div></div></a></div><h1 id="96e3" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">参考</h1><ul class=""><li id="5d66" class="mo mp it lb b lc nu lf nv li qb lm qc lq qd lu mt mu mv mw bi translated"><a class="ae ky" href="https://github.com/rafaelpadilla/Object-Detection-Metrics" rel="noopener ugc nofollow" target="_blank">https://github.com/rafaelpadilla/Object-Detection-Metrics</a></li></ul><p id="721d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 https://medium.com/@kiprono_65591/membership<a class="ae ky" href="https://medium.com/@kiprono_65591/membership" rel="noopener">加入 medium</a>可以全面了解 Medium 上的每个故事。</p><p id="49c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以在我发文章的时候通过这个链接把文章发到你的邮箱里:【https://medium.com/subscribe/@kiprono_65591 T4】</p><p id="c593" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一如既往地感谢您的阅读:-)</p></div></div>    
</body>
</html>