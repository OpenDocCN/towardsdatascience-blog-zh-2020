<html>
<head>
<title>Power Analysis Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">功耗分析变得简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/power-analysis-made-easy-dfee1eb813a?source=collection_archive---------20-----------------------#2020-04-20">https://towardsdatascience.com/power-analysis-made-easy-dfee1eb813a?source=collection_archive---------20-----------------------#2020-04-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6dc0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如此简单，你可以用手来做。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a77ed2d45f525a38af1c30df74ea5db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xaKNKSXGlflpJ1FDmvXqlw.jpeg"/></div></div></figure><p id="29ac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">你已经重新设计了你网站的登陆页面，现在你需要对它进行A/B测试。您应该运行测试多长时间？本文将演示如何使用样本大小计算(“功效分析”)来回答这个问题。</p><p id="33b8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">统计学可能是一门令人望而生畏的学科，但也不尽然。这些指南的目的是让人们更容易使用统计工具。确保您熟悉抽样分布的概念(如果您需要复习，请参见此处的<a class="ae lz" rel="noopener" target="_blank" href="/a-b-test-statistics-made-easy-4e94098758d9"/>)和比例度量标准误差的计算(请参见此处的<a class="ae lz" rel="noopener" target="_blank" href="/a-b-test-statistics-made-easy-8805ac2533d6"/>)。尽情享受吧！</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="10cd" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">1.计划A/B测试</h1><p id="332c" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">您想要A/B测试您的登录页面的重新设计。目前的登录页面平均每天有200名访客，点击率为5%。您认为重新设计将带来至少7%的点击率。一旦我们平均分配流量，当前的登录页面(控制)每天应该看到100个访问者，重新设计(测试)每天也应该看到100个访问者:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">测试和控制的预计流量和性能</p></figure><p id="1aa2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了验证测试确实优于控制，您应该运行测试多少天？</p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="d393" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">2.如果我们运行测试，比如说，7天呢？</h1><p id="d626" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">假设我们计划只运行我们的A/B测试7天，此时我们每组将收集700个访问者。让我们计算零假设(总体CTR无差异)和替代假设(总体CTR有真实差异)的抽样分布。</p><p id="1b70" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第一步:计算汇集样本比例(p)。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/c191967ddb74ac65a8759d3a98b70abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Bw2RBiZwFyK1nAjwrg9Hg.png"/></div></div></figure><p id="01ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第二步:用<em class="nl"> p </em>计算标准误差(<em class="nl"> se </em>)。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/4b1933c271c314acc2827ab120e7d416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*isAIt-rB8hZbXZDNnrRwJw.png"/></div></div></figure><p id="6e25" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">第三步:计算抽样分布。</strong></p><ul class=""><li id="35b2" class="nn no it kw b kx ky la lb ld np lh nq ll nr lp ns nt nu nv bi translated"><strong class="kw iu"> <em class="nl"> H0(零假设)</em> </strong> : <strong class="kw iu"> </strong>均值= 0，标准差= 0.013的正态分布。</li><li id="22ce" class="nn no it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated"><strong class="kw iu"> <em class="nl"> HA(替代假设)</em> </strong> : <strong class="kw iu"> </strong>一个均值= 0.02，标准差= 0.013的正态分布。</li></ul><p id="4d33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们绘制这些分布图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b612ffac9bb3662122aed0e1c0de77a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J3hZ8WdIG5EvLEvVvIzDBg.png"/></div></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">H0和HA在7天数据收集后的抽样分布</p></figure><p id="7a58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在显著性水平(𝛂)为0.05时，临界值为0.0249。这意味着:</p><h2 id="d40e" class="ob mi it bd mj oc od dn mn oe of dp mr ld og oh mt lh oi oj mv ll ok ol mx om bi translated">1.如果样本CTRs的绝对差值&gt;为0.0249，我们将总是<strong class="ak">拒绝<em class="on"> </em> </strong>零假设(H0)。</h2><ul class=""><li id="5def" class="nn no it kw b kx mz la na ld oo lh op ll oq lp ns nt nu nv bi translated">如果H0是真的，那么拒绝它的决定将是不正确的(类型1错误)。这种情况的发生率为100次实验中有5次(𝛂).</li><li id="28f8" class="nn no it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">如果哈确实是真的，那么拒绝H0的决定将是正确的。这将发生在35/100的实验中(1-𝛃).这种速率也被称为<strong class="kw iu"> <em class="nl">功率</em> </strong>的一种测试。</li></ul><h2 id="72bd" class="ob mi it bd mj oc od dn mn oe of dp mr ld og oh mt lh oi oj mv ll ok ol mx om bi translated">2.如果样本CTRs的绝对差≤ 0.0249，我们总是<strong class="ak"> <em class="on">无法拒绝</em> </strong>零假设(H0)。</h2><ul class=""><li id="cbb1" class="nn no it kw b kx mz la na ld oo lh op ll oq lp ns nt nu nv bi translated">如果H0确实是真的，那么不拒绝它的决定将是正确的。这种情况的发生率为95/100(1-𝛂).</li><li id="f232" class="nn no it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">如果HA为真，那么不拒绝H0的决定将是不正确的(类型2错误)。这种情况的发生率为100次实验中有65次(𝛃).</li></ul><p id="abde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">总结一下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div><p class="ng nh gj gh gi ni nj bd b be z dk translated">A/B测试所有潜在结果的描述</p></figure><p id="e192" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们决定仅运行7天的A/B测试，这将导致我们在100个实验中的65个实验中无法检测到测试组的升高。这个错误率太高了！通常，我们希望将该值降至20%，相当于80%的幂。我们可以通过增加样本量来实现这一点。</p><p id="7bf8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">重述:通过运行7天的A/B测试，因此，每组收集700个访问者的样本量，我们实验的功效只有35%。为了达到80%的功效，我们需要增加样本量，这意味着让A/B测试运行更长时间。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="1dba" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">3.手动计算80%功率所需的样本大小</h1><p id="6290" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">要获得80%功率的测试，我们需要多大的样本量？</p><p id="cd77" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们将零假设下的采样分布转换为一个<strong class="kw iu"> <em class="nl">标准正态分布</em> </strong>以使计算更简单:</p><ul class=""><li id="b731" class="nn no it kw b kx ky la lb ld np lh nq ll nr lp ns nt nu nv bi translated">显著性为0.05的临界值约为1.96，可从<a class="ae lz" href="https://en.wikipedia.org/wiki/Standard_normal_table#Table_examples" rel="noopener ugc nofollow" target="_blank">查找表</a>中获得。</li><li id="3ab3" class="nn no it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">如果我们现在考虑给定替代假设的采样分布，那么我们希望-1.96和1.96之间的曲线下面积等于20%(对于80%的功率)。因此，临界值必须距离平均值约0.84(也可从查找表中获得)。</li><li id="9938" class="nn no it kw b kx nw la nx ld ny lh nz ll oa lp ns nt nu nv bi translated">所以总的<em class="nl">标准化的</em>均值之间的差值一定是1.96 + 0.84 = 2.8。</li></ul><p id="7509" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这可能更容易用图形来理解:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8a4e7d887b46c41f97339e8025ac2e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kaftD02lPLW5auDc60Gq-Q.jpeg"/></div></div></figure><p id="c7a1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还知道，<em class="nl">真实的</em>均值之间的差值为0.02，因此，<em class="nl">标准化的</em>差值等于0.02 / se。所以我们可以构造一个等式并求解n:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/78c9282d9757f6000963551c95b03619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDtNqyygNgY_ssV5bEpYpA.png"/></div></div></figure><p id="8bd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以我们需要收集每组2211个观察值。按照每组每天100名访问者的速度，我们需要运行测试至少23天，以获得80%功率的实验。在这种样本规模下，如果重新设计的页面确实提供了至少7%的点击率，那么我们在100次实验中有80次可以检测到这种提升。</p><p id="b959" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">概述:参考标准正态分布，我们能够确定平均值之间的标准化差值在80%功率下应为2.8左右。然后，我们可以用标准误差来表示，然后求出n。我们计算出n = 2，211次观察。</strong></p></div><div class="ab cl ma mb hx mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="im in io ip iq"><h1 id="ddd3" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">4.R中的统计分析</h1><p id="18cf" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">至此，您应该对样本大小计算(功效分析)的总体框架感到相当满意了。现在，让我们看看如何将上述所有步骤简化为几行代码。在<em class="nl"> R </em>我们会写:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="e2c4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它产生:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="a54e" class="ob mi it ot b gy ox oy l oz pa">[1] "absolute difference (Test — Control)"<br/>0.02</span><span id="d471" class="ob mi it ot b gy pb oy l oz pa">[1] "pooled sample proportion"<br/>0.06</span><span id="5192" class="ob mi it ot b gy pb oy l oz pa">[1] "standardized distance for requested power"<br/>2.80158521811297</span><span id="f11d" class="ob mi it ot b gy pb oy l oz pa">[1] "solve for n"<br/>2213.38408508644</span></pre></div></div>    
</body>
</html>