<html>
<head>
<title>Build a YouTube Downloader with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 构建一个 YouTube 下载器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-youtube-downloader-with-python-8ef2e6915d97?source=collection_archive---------1-----------------------#2020-05-25">https://towardsdatascience.com/build-a-youtube-downloader-with-python-8ef2e6915d97?source=collection_archive---------1-----------------------#2020-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="444d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在 PyTube3 的帮助下，学习使用 Python 构建一个简单的 YouTube 下载器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/114f0e4a65419670b1ba34a03202b55e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7vtuIbHazK6IFIRl"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Kon Karampelas 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ca8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">读者你好！今天，我们将使用 PyTube3 库在 Python3 中构建一个 YouTube 下载器。原来的 pytube 库不再工作，所以我们需要使用 pytube3 库，它只适用于 Python3，不适用于 Python2。</p><p id="f1bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将看到我们可以用 Youtube 下载器做的各种事情，以及它为我们提供的各种功能。所以，我们一步一步来。</p><h2 id="bfd3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">下载和导入库</h2><p id="55b6" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">首先，在做任何事情之前，您需要在您的系统中下载 pytube3 库。为此，我们将使用 python3。</p><p id="d5e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 CLI 中键入以下命令，在您的系统中下载并安装 pytube3。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="16c2" class="my lw it mu b be mz na l nb nc">pip install pytube3</span></pre><p id="74f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该命令将在您的系统中下载并安装 pytube3。</p><p id="823c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以开始构建我们的 YouTube 下载器了。我们需要将这个库导入到我们的程序中来使用它的功能。</p><p id="4fdd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们用下面的命令开始我们的程序:</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="ec87" class="my lw it mu b be mz na l nb nc">from pytube import YouTube</span></pre><p id="766f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会注意到，虽然我们在系统中下载并安装了 pytube3，但是我们在代码中导入了 pytube。</p><p id="ab70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了消除混淆，pytube3 也是通过只编写 pytube 来导入的。我们不会通过将它写成 pytube3 来导入它。</p><h2 id="9300" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">接受用户的输入</h2><p id="013f" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们的下一步是要求用户提供我们需要下载的 youtube 视频的链接。然后，用户将向我们提供他想要下载的视频的链接。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="99ef" class="my lw it mu b be mz na l nb nc">link = input("Enter the link: ")<br/>yt = YouTube(link)</span></pre><p id="8c2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们接受了用户的输入，并将链接传递给我们的 YouTube 类。它将帮助我们揭示视频的所有信息，并让我们下载它。</p><h2 id="e8b4" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">揭示关于视频的各种信息</h2><p id="cc20" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在我们有了链接，并且我们已经将它传递给了 YouTube 类。现在，我们可以玩链接，并显示视频的各种信息，如标题，观看次数，收视率，描述，视频长度和其他各种事情。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="3878" class="my lw it mu b be mz na l nb nc">#Title of video<br/>print("Title: ",yt.title)<br/>#Number of views of video<br/>print("Number of views: ",yt.views)<br/>#Length of the video<br/>print("Length of video: ",yt.length,"seconds")<br/>#Description of video<br/>print("Description: ",yt.description)<br/>#Rating<br/>print("Ratings: ",yt.rating)</span></pre><p id="f826" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们运行这段代码时，我们将看到关于视频的各种细节，我们已经将视频的链接输入到程序中。此外，还有更多这样的操作可以执行，您可以在 pytube3 的官方文档中找到。</p><p id="cad2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，出于输出的目的，我们不打印描述(它很大)，所以我们打印其余的四样东西。</p><p id="42f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在这里使用了《黑暗》第三季官方预告片的链接。您可以使用自己选择的任何链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">显示视频各种细节的输出</p></figure><p id="67c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，正如你在上面看到的，我们已经打印了关于这个节目的各种细节。</p><h2 id="7731" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">查看可用的流</h2><p id="1673" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">你一定已经看到 youtube 上有各种各样的质量可供观看。因此，在使用 pytube 下载的同时，我们还可以获得所有可用流的选项。</p><p id="c019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">pytube 提供了一种非常简单的方法来查看用户提供的链接的所有可用流。因此，让我们运行代码来查看该特定视频的所有可用流。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="0c47" class="my lw it mu b be mz na l nb nc">#printing all the available streams<br/>print(yt.streams)</span></pre><p id="c3b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在运行上面的代码时，我们获得了该视频的所有可用流。下面是生成的输出:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视频的可用流</p></figure><p id="162d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，你可以看到视频和音频流。所以，你也可以只过滤掉音频或视频流。您还可以根据文件格式过滤掉流。我们还可以过滤出渐进流和破折号流(稍后会谈到它们)。</p><p id="c1aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，让我们过滤掉只有音频的流。为此，我们需要编写如下代码:</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="c850" class="my lw it mu b be mz na l nb nc">print(yt.streams.filter(only_audio=True))</span></pre><p id="15f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将得到的输出如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">纯音频流</p></figure><p id="7379" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们过滤掉只有视频的流。它将只显示包含视频但没有音频的流。所以，它也会过滤掉所有的渐进流。为此，我们将这样写:</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="649b" class="my lw it mu b be mz na l nb nc">print(yt.streams.filter(only_video=True))</span></pre><p id="f6d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将得到的输出如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">仅视频流</p></figure><p id="956a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们来谈谈渐进的 v/s 破折号流。YouTube 使用 Dash 流进行更高质量的渲染。</p><p id="9e9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">渐进流被限制为 720p，并包含音频和视频编解码器文件，而 Dash 流具有更高的质量，但只有视频编解码器。</p><p id="3c8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果我们想下载一个渐进流，我们将得到一个内置音频的现成视频。</p><p id="3590" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，为了更高的质量，我们应该为视频使用 Dash 流，还应该下载一个音频流，然后使用任何混合工具合并它们。</p><p id="1acc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，对于本文，我们将使用渐进式流下载来准备播放视频。你可以自由选择你的下载质量和选择流。</p><p id="1184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我们先过滤掉渐进流。下面的代码将为我们做这件事:</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="345d" class="my lw it mu b be mz na l nb nc">print(yt.streams.filter(progressive=True))</span></pre><p id="b1c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将列出可供我们下载的渐进流。它将有有限的选择，但它为我们做了工作。输出将如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">可用的累进流</p></figure><p id="359c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得最高分辨率的渐进流，我们可以编写下面的代码:</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="932f" class="my lw it mu b be mz na l nb nc">ys = yt.streams.get_highest_resolution()</span></pre><p id="2769" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在 ys 变量中创建并存储最高分辨率的流。</p><p id="de24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以在 itag 的帮助下选择任何流。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="ea17" class="my lw it mu b be mz na l nb nc">ys = yt.streams.get_by_itag('22')</span></pre><p id="32eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，现在我们已经将首选流存储在一个变量中。现在，让我们把它下载到我们的系统。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="610b" class="my lw it mu b be mz na l nb nc">ys.download()</span></pre><p id="44e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码将下载我们的首选流，并将其保存在当前的工作目录中。</p><p id="4185" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以在系统中指定下载 youtube 视频的位置。我们可以通过在下载的大括号之间指定绝对路径来做到这一点。</p><p id="f529" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的代码帮助您将它下载到您喜欢的位置。</p><pre class="kj kk kl km gt mt mu mv bn mw mx bi"><span id="9999" class="my lw it mu b be mz na l nb nc">ys.download('location')</span></pre><p id="4ac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！恭喜你，你已经使用 Python 构建了你的第一个简单的 YouTube 下载器。仅用于测试和教育目的。不要滥用这些知识。</p><p id="f2dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是使用最高质量的渐进流下载 youtube 视频的完整代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nd ne l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">YouTube 下载器的完整代码</p></figure><p id="6534" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请访问我的<a class="ae ky" href="https://github.com/shubham1710/Youtube-downloader" rel="noopener ugc nofollow" target="_blank"> GitHub 库</a>了解更多细节和更新。我鼓励你们尝试一些新的东西，然后请在评论中分享你们的想法和经验。我很想听听你学到了什么，还做了些什么。祝大家一切顺利！</p><p id="e695" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看，我们在这里建立的是一个非常简单的版本。我们还可以尝试将相同的概念转换成一个应用程序或网站，以用户友好的方式执行相同的功能。您还可以通过使用不同网站各自的 API 来添加对不同网站的支持。有许多这样的功能丰富的视频下载软件，它们使用类似的概念，并给用户一个轻松下载视频的选项。</p><p id="baa0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最喜欢的一个是<a class="ae ky" href="https://ytsaver.net/?affid=898166e1-0ae0-45ca-bbe8-6cf9b436673d" rel="noopener ugc nofollow" target="_blank"> YTSaver </a>，这是一个功能丰富的应用程序，可以一键从大量网站下载不同分辨率和格式的视频或播放列表。它还允许你将视频从一种格式转换成另一种格式，并且比其他下载者快得多。</p><blockquote class="nf ng nh"><p id="cc3e" class="kz la ni lb b lc ld ju le lf lg jx lh nj lj lk ll nk ln lo lp nl lr ls lt lu im bi translated">注意:以上段落包含一个附属链接。</p></blockquote><p id="16f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际上，你也可以使用 Python 库<a class="ae ky" href="https://github.com/senko/python-video-converter" rel="noopener ugc nofollow" target="_blank">，比如这个</a>，将视频从一种格式转换成另一种格式。如果你有兴趣，也可以尝试这样做。非常感谢您的阅读！</p><p id="5e1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">读完这篇文章后，还有更多的故事值得一读</p><div class="nm nn gp gr no np"><a rel="noopener follow" target="_blank" href="/build-a-blog-website-using-django-rest-framework-overview-part-1-1f847d53753f"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">使用 Django Rest 框架构建博客网站——概述(第 1 部分)</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">让我们使用 Django Rest 框架构建一个简单的博客网站，以了解 DRF 和 REST APIs 是如何工作的，以及我们如何添加…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">towardsdatascience.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ks np"/></div></div></a></div><div class="nm nn gp gr no np"><a href="https://shubhamstudent5.medium.com/build-an-e-commerce-website-with-mern-stack-part-1-setting-up-the-project-eecd710e2696" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">用 MERN 堆栈构建一个电子商务网站——第 1 部分(设置项目)</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">让我们使用 MERN 堆栈(MongoDB，Express，React 和 Node)建立一个简单的电子商务网站，用户可以在其中添加项目…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">shubhamstudent5.medium.com</p></div></div><div class="ny l"><div class="oe l oa ob oc ny od ks np"/></div></div></a></div><div class="nm nn gp gr no np"><a href="https://shubhamstudent5.medium.com/build-a-job-search-portal-with-django-overview-part-1-bec74d3b6f4e" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">用 Django 构建求职门户——概述(第 1 部分)</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">让我们使用 Django 建立一个工作搜索门户，它允许招聘人员发布工作并接受候选人，同时…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">shubhamstudent5.medium.com</p></div></div><div class="ny l"><div class="of l oa ob oc ny od ks np"/></div></div></a></div><div class="nm nn gp gr no np"><a rel="noopener follow" target="_blank" href="/build-a-social-media-website-using-django-setup-the-project-part-1-6e1932c9f221"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd iu gy z fp nu fr fs nv fu fw is bi translated">使用 Django 构建一个社交媒体网站——设置项目(第 1 部分)</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">在第一部分中，我们通过设置密码来集中设置我们的项目和安装所需的组件…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">towardsdatascience.com</p></div></div><div class="ny l"><div class="og l oa ob oc ny od ks np"/></div></div></a></div></div></div>    
</body>
</html>