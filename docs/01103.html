<html>
<head>
<title>A Quick Introduction to CMIP6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CMIP6快速介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-quick-introduction-to-cmip6-e017127a49d3?source=collection_archive---------21-----------------------#2020-01-31">https://towardsdatascience.com/a-quick-introduction-to-cmip6-e017127a49d3?source=collection_archive---------21-----------------------#2020-01-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1da0" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">气候数据科学</h2><div class=""/><div class=""><h2 id="7e41" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">如何用Python轻松访问下一代气候模型？</h2></div><p id="bd47" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae lk" href="https://www.wcrp-climate.org/wgcm-cmip" rel="noopener ugc nofollow" target="_blank">耦合模型相互比较项目</a> <em class="ll"> </em> (CMIP)是一项巨大的国际合作努力，旨在提高关于气候变化及其对地球系统和我们社会的影响的知识。它从90年代就开始了，今天我们正走向第六阶段(CMIP6)，这将为政府间气候变化专门委员会(IPCC)的下一份评估报告(AR6)提供大量信息。</p><p id="71e3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">CMIP6正在赞助几个不同的团体研究几个不同的科学问题，从遥远过去的气候到森林砍伐和土地使用变化的影响。完成后，整个项目预计将从20多个气候模型中释放大约20到40pb的数据。这就是你所谓的<strong class="kq ja">大数据</strong>，但是你怎么能尝试所有这些信息呢？</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/66be9bd781393887931a25823b7e97eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R-fJtN6QgvmLVFmCGL7mKw.jpeg"/></div></div><p class="ly lz gj gh gi ma mb bd b be z dk translated">CMIP6中的MIPs。图片来源:<a class="ae lk" href="https://www.nature.com/articles/nclimate3398" rel="noopener ugc nofollow" target="_blank">辛普金斯(2017) </a>。</p></figure><h1 id="668d" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated"><strong class="ak">设置您的工具箱</strong></h1><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="95bc" class="mz md iq mv b gy na nb l nc nd">import intake<br/>import xarray as xr <br/>import proplot as plot <br/>import matplotlib.pyplot as plt</span></pre><p id="a56c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">除了<code class="fe ne nf ng mv b">Matplotlib</code>，这些包不是你通常在数据科学教程中看到的。另一方面，如果您想处理气象数据集，这些包是绝对重要的。</p><ul class=""><li id="65f9" class="nh ni iq kq b kr ks ku kv kx nj lb nk lf nl lj nm nn no np bi translated"><a class="ae lk" href="https://intake.readthedocs.io/en/latest/quickstart.html" rel="noopener ugc nofollow" target="_blank">入口</a>:共享和加载数据集的包。这将是您通过<code class="fe ne nf ng mv b"><a class="ae lk" href="https://intake-esm.readthedocs.io/en/latest/installation.html" rel="noopener ugc nofollow" target="_blank">intake-e</a><a class="ae lk" href="https://intake-esm.readthedocs.io/en/latest/installation.html" rel="noopener ugc nofollow" target="_blank">sm</a></code>目录与云的连接。</li><li id="a78f" class="nh ni iq kq b kr nq ku nr kx ns lb nt lf nu lj nm nn no np bi translated"><a class="ae lk" href="http://xarray.pydata.org/en/stable/installing.html" rel="noopener ugc nofollow" target="_blank"> Xarray </a>:这是针对n维数据集的<code class="fe ne nf ng mv b">Pandas</code>，比如气候模型的输出。</li><li id="76cd" class="nh ni iq kq b kr nq ku nr kx ns lb nt lf nu lj nm nn no np bi translated">Proplot:Python中数据可视化的下一件大事。说真的。</li><li id="874b" class="nh ni iq kq b kr nq ku nr kx ns lb nt lf nu lj nm nn no np bi translated">Matplotlib:在任何Python生态系统中用于数据可视化的旧的好的标准包。</li></ul><h1 id="0b0d" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">读取数据目录</h1><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="d092" class="mz md iq mv b gy na nb l nc nd"># necessary url<br/>url = "<a class="ae lk" href="https://raw.githubusercontent.com/NCAR/intake-esm-datastore/master/catalogs/pangeo-cmip6.json" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/NCAR/intake-esm-datastore/master/catalogs/pangeo-cmip6.json</a>"</span><span id="7e65" class="mz md iq mv b gy nv nb l nc nd"># open the catalog<br/>&gt;&gt;&gt; dataframe = intake.open_esm_datastore(url)</span></pre><p id="d918" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">由于<a class="ae lk" href="https://pangeo.io/" rel="noopener ugc nofollow" target="_blank"> Pangeo </a>的努力，现在您可以通过利用<code class="fe ne nf ng mv b">intake-esm</code>包访问所有可用的CMIP6数据集。上面的<code class="fe ne nf ng mv b">df</code>变量本质上是一个常见的<code class="fe ne nf ng mv b">DataFrame</code>，您可能对<code class="fe ne nf ng mv b">Pandas</code>很熟悉，因此您可以很容易地检查像列名这样的重要信息。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="1831" class="mz md iq mv b gy na nb l nc nd">&gt;&gt;&gt; dataframe.df.columns<br/>    Index(['activity_id', 'institution_id', 'source_id', 'experiment_id', 'member_id', 'table_id', 'variable_id', 'grid_label', 'zstore', 'dcpp_init_year'],dtype='object')</span></pre><p id="7045" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些列中的每一列都是以CMIP项目的受控词汇表命名的，这种组织方式确保了数百万个数据集被整齐地保存，就像在一个巨大的图书馆中一样。你可以在这里读到更多关于这个<a class="ae lk" href="https://docs.google.com/document/d/1yUx6jr9EdedCOLd--CPdTfGDwEwzPpCF6p1jRmqx-0Q/edit" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><h1 id="7287" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">搜索数据集</h1><p id="9a5a" class="pw-post-body-paragraph ko kp iq kq b kr nw ka kt ku nx kd kw kx ny kz la lb nz ld le lf oa lh li lj ij bi translated">弄乱了词汇表之后，获得想要的数据集就非常简单了。在这里，你将直接看到历史<em class="ll">实验的NCAR模型每月近地面气温输出。对此的查询如下所示:</em></p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="84c8" class="mz md iq mv b gy na nb l nc nd">&gt;&gt;&gt; models = dataframe.search(experiment_id='historical',<br/>                              table_id='Amon',<br/>                              variable_id='tas',<br/>                              institution_id='NCAR',<br/>                              member_id='r11i1p1f1')</span></pre><p id="621c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这个搜索产生了一个<code class="fe ne nf ng mv b">intake_esm.core.esm_datastore</code>数据类型，您可以使用它来最终获得您搜索的数据集。变量<code class="fe ne nf ng mv b">models</code>给你更多关于它的信息，它基本上是一个类似字典的结构。</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="860b" class="mz md iq mv b gy na nb l nc nd">&gt;&gt;&gt; models <br/>pangeo-cmip6-ESM Collection with 1 entries:<br/>	&gt; 1 activity_id(s)<br/><br/>	&gt; 1 institution_id(s)<br/><br/>	&gt; 1 source_id(s)<br/><br/>	&gt; 1 experiment_id(s)<br/><br/>	&gt; 1 member_id(s)<br/><br/>	&gt; 1 table_id(s)<br/><br/>	&gt; 1 variable_id(s)<br/><br/>	&gt; 1 grid_label(s)<br/><br/>	&gt; 1 zstore(s)<br/><br/>	&gt; 0 dcpp_init_year(s)</span></pre><h1 id="934c" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">终于拿到数据了</h1><p id="b2a7" class="pw-post-body-paragraph ko kp iq kq b kr nw ka kt ku nx kd kw kx ny kz la lb nz ld le lf oa lh li lj ij bi translated">为此，您首先需要从字典中获取数据集:</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="2232" class="mz md iq mv b gy na nb l nc nd">&gt;&gt;&gt; datasets = models.to_dataset_dict()<br/>Progress: |███████████████████████████████████████████████████████████████████████████████| 100.0% <br/><br/>--&gt; The keys in the returned dictionary of datasets are constructed as follows:<br/>	'activity_id.institution_id.source_id.experiment_id.table_id.grid_label'<br/>             <br/>--&gt; There are 1 group(s)</span></pre><p id="6145" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这产生了另一个<code class="fe ne nf ng mv b">dict</code>，但是不同的是，现在您可以用<code class="fe ne nf ng mv b">datasets.keys()</code>获得数据集的键:</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="951f" class="mz md iq mv b gy na nb l nc nd">&gt;&gt;&gt; datasets.keys()<br/>dict_keys(['CMIP.NCAR.CESM2.historical.Amon.gn'])</span><span id="b13e" class="mz md iq mv b gy nv nb l nc nd">&gt;&gt;&gt; dset = datasets['CMIP.NCAR.CESM2.historical.Amon.gn']</span></pre><p id="d563" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">好消息是<code class="fe ne nf ng mv b">dset</code>是一个直接的<code class="fe ne nf ng mv b">xarray.core.dataset.Dataset</code>，所以你可以通过强大的<code class="fe ne nf ng mv b">Xarray</code>包很容易地使用它做任何你想做的事情，它特别适合处理网格气象数据。</p><p id="7008" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">绘图永远是有趣的部分，你可能熟悉地理空间投影的<a class="ae lk" href="https://scitools.org.uk/cartopy/docs/latest/" rel="noopener ugc nofollow" target="_blank">卡通</a>包和其他几个应用程序。然而，这里您将使用新的<code class="fe ne nf ng mv b">Proplot</code>包，因为它简单易用。一个简洁明了的情节如下:</p><pre class="ln lo lp lq gt mu mv mw mx aw my bi"><span id="dfb4" class="mz md iq mv b gy na nb l nc nd">fig, ax = plot.subplots(axwidth=4.5, tight=True,<br/>                        proj='robin', proj_kw={'lon_0': 180},)<br/># format options<br/>ax.format(land=False, coast=True, innerborders=True, borders=True,<br/>          labels=True, geogridlinewidth=0,)</span><span id="05b6" class="mz md iq mv b gy nv nb l nc nd">map1 = ax.contourf(dset['lon'], dset['lat'], dset['tas'][0,0,:,:],<br/>                   cmap='IceFire', extend='both')</span><span id="4132" class="mz md iq mv b gy nv nb l nc nd">ax.colorbar(map1, loc='b', shrink=0.5, extendrect=True)</span><span id="ab60" class="mz md iq mv b gy nv nb l nc nd">plt.show()</span></pre><p id="9c5e" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">然后<em class="ll">瞧！</em>好看的罗宾逊投影中的近地面气温图。</p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ob"><img src="../Images/86101f9b3a698581929a20b576725aff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eCwbV_SJGamYQbg4BBR4aA.jpeg"/></div></div></figure><h1 id="808e" class="mc md iq bd me mf mg mh mi mj mk ml mm kf mn kg mo ki mp kj mq kl mr km ms mt bi translated">最后的话</h1><p id="a149" class="pw-post-body-paragraph ko kp iq kq b kr nw ka kt ku nx kd kw kx ny kz la lb nz ld le lf oa lh li lj ij bi translated">由于Pangeo社区的努力，CMIP6比以往任何时候都更容易为任何想要尝试的人所用。复杂的气候模型现在对任何学生、公民科学家或全职科学家来说，只要有一个相对像样的互联网连接就可以使用。</p><p id="2c40" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这有着巨大的潜力，可以开启新的贡献，增进知识，并有助于实现气候抗御力和缓解战略。</p><p id="1e04" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">PS:上面代码的Jupyter笔记本在这个<a class="ae lk" href="https://github.com/willyhagi/climate-data-science" rel="noopener ugc nofollow" target="_blank">资源库</a>中可用。</p></div></div>    
</body>
</html>