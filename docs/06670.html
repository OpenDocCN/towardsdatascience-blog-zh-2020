<html>
<head>
<title>How Wizzair tweeted their customers during Covid-19 — text analysis in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Wizzair 在新冠肺炎期间是如何给他们的客户发推特的——R 语言的文本分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-wizzair-tweeted-their-customers-during-covid-19-text-analysis-in-r-8ed79dbd3b34?source=collection_archive---------69-----------------------#2020-05-25">https://towardsdatascience.com/how-wizzair-tweeted-their-customers-during-covid-19-text-analysis-in-r-8ed79dbd3b34?source=collection_archive---------69-----------------------#2020-05-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ded1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">新冠肺炎时代 Wizzair 及其用户微博的词汇分布和情感变化的定量文本分析</h2></div><p id="2e2a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="lb">编者按:</em> </strong> <em class="lb"> </em> <a class="ae lc" href="http://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="lb">走向数据科学</em> </a> <em class="lb">是一份以数据科学和机器学习研究为主的中型刊物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。想了解更多关于疫情冠状病毒的信息，可以点击</em> <a class="ae lc" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank"> <em class="lb">这里</em> </a> <em class="lb">。</em></p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="3005" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在新型冠状病毒期间，几乎每架飞机都停飞，取消的航班数量空前。这是一篇关于 Wizzair 的分析，wizza IR 是欧洲最大的廉价航空公司之一，它在新冠肺炎时代是如何给乘客发推特的。他们的主要沟通来源之一是 Twitter，所以这是一个非常相关的信息来源。因此，我搜集了一堆包含所有必要信息的数据来进行定量文本分析。</p><p id="3695" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我首先想到了两个假设:</p><ul class=""><li id="00a8" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">H1: Wizzair 一遍又一遍地重复同样的句子/表达，并没有独特地解决客户问题。</li><li id="a5cd" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">H2:与 Wizzair 员工的友善相比，顾客推特的总体情绪更加负面。</li></ul><h1 id="d92c" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">时间分布</h1><p id="da88" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">首先，让我们看看一段时间内每天的推文数量。这让你了解什么时候问题被提出或者(希望)被回答。黑色竖线表示匈牙利边境关闭。由于该公司最大的基地位于布达佩斯，这对他们来说至关重要。欧洲各地几乎同时出台了防止病毒传播的严格措施。因此，它是疫情在欧洲“起步”的一个很好的基准。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/c42c271cdfb538f737145d3ae0ca7284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*smBjHFMb1DV7Rn4BlD21OA.png"/></div></div></figure><p id="3059" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就在边境关闭和航班突然取消之后，双方的每日推文数量大幅增加。这是我期望看到的，因为人们要么被困，要么在寻找他们的钱回来。他们提出更多的问题是很自然的。</p><p id="1f31" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我认为观察顾客是否更罗嗦地详细解释他们所有的问题会很有趣。为了满足我的好奇心，我计算了每天发推的平均长度。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/75a0a1fa0c46ac0a1bf959a2b495cf4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f6tXKhj9EFgkLoj_Kg1LHw.png"/></div></div></figure><p id="a8e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两者之间没有太大的差异，但是，我可以在左侧检测到更大的条形。这显然不是我想法的有力证据。这可能是推特性质的结果。没有人想写很长的帖子，因为他们不会被阅读。</p><h1 id="78c3" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">单词分布和常见 n 元语法</h1><p id="9b5e" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">该是我分解到文字层次的时候了。我从我的语料库中排除了<a class="ae lc" href="https://en.wikipedia.org/wiki/Stop_words" rel="noopener ugc nofollow" target="_blank">停用词</a>。让我们来看看出现 600 次的最频繁的单词。很明显，讨论是关于退款的，不是吗？</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/ba35ebec1669ab598a7623aa9957beea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nClqjeBx-MuvHYhBcjJQg.png"/></div></div></figure><p id="c7a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，了解什么样的词汇会在两个群体之间产生差异是很有用的。有哪些词是顾客会用的，但 Wizz 和 vica 会用？在这一点上，不可避免地要强调，即使不同的人以 Wizz 的名义发推特，他们仍然是一个比所有客户更同质的群体。</p><p id="c2e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了识别有区别的单词，我使用单词出现次数作为输入变量，运行了一个简单的惩罚回归来对两组进行分类。在图中，显示了具有非零系数的每个单词。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/bfcccd6dfecc7593dcc614f6aa5d6e61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZnfohUjdRmq4lvDwXy4uQ.png"/></div></div></figure><p id="ac31" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在更有意义了，不是吗？很可能被发在推特上的句子可以从单词中推断出来。如来自客户方的以下内容:</p><ul class=""><li id="082b" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">顾客的<em class="lb">航班被取消了。</em></li><li id="d5d6" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">他们要求拿回他们的 T4 钱。</li></ul><p id="fbf2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从 Wizzair 的角度来看:</p><ul class=""><li id="ce85" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">Wizzair 要求每个人都有耐心，并要求乘客检查他们的预订。</li><li id="e420" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">如果有任何变化，他们的<em class="lb">系统</em>将<em class="lb">发送通知</em>。</li></ul><p id="6a44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种为了区分各方推文重要词的方法是使用<a class="ae lc" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" rel="noopener ugc nofollow" target="_blank">词频——逆文档频率</a>(简称 tf-idf)。</p><blockquote class="nh ni nj"><p id="85fc" class="kf kg lb kh b ki kj jr kk kl km ju kn nk kp kq kr nl kt ku kv nm kx ky kz la ij bi translated">tf-idf 是一个数字统计量，旨在反映一个词对集合或语料库中的文档有多重要。TF–IDF 值与单词在文档中出现的次数成比例增加，并由语料库中包含该单词的文档数抵消，这有助于调整某些单词通常更频繁出现的事实。</p></blockquote><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/657f9a08562cec24651e62a91c241d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2ySh0_flE0VyVqbbsLKYw.png"/></div></div></figure><p id="7dce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在词汇方面，与回归相比，似乎有很大的不同。然而，叙述和主题并没有发生巨大的变化。</p><p id="d79d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Wizzair 强调他们:</p><ul class=""><li id="88da" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">经努尔苏丹飞往上海，向匈牙利运送医疗设备</li><li id="cf61" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">英国的呼叫中心</li><li id="7b0b" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">对造成的任何不便表示歉意</li></ul><p id="6f7e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，客户在谈论:</p><ul class=""><li id="f750" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">特内里费岛(他们一定是被困在那里了)</li><li id="d5b9" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">想要一些东西(可能是他们的钱)</li><li id="0228" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">wizz 信用(我想他们不希望这样)</li></ul><p id="d134" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基于这些结果，客户群体更加多样化的想法得到了证实，因此，关于更广泛主题的推文得到了证实。为了理解他们的主题，我需要更多的假设。</p><p id="64cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了获得单词旁边的一些上下文，我们将介绍<a class="ae lc" href="https://en.wikipedia.org/wiki/N-gram" rel="noopener ugc nofollow" target="_blank"> n 元语法</a>的用法。二元模型意义不大，因为它们提供的上下文太少，无法扩大范围，因此，使用三元模型代替。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/afc95d8b584b0c40807b20290e841161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_c-kNwX9dlvHfgm7WfHyQ.png"/></div></div></figure><p id="bc05" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">话题真的没有改变，顾客的航班被取消了，想要退款。另一方面，Wizz 正在通知他们可以给谁打电话，并要求耐心等待，因为给乘客退款需要比平时更多的时间。</p><p id="2daf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从 Wizz 的角度来看，可以挑选几个部分，然后连接起来，最终形成一个句子。它暗示了这样一种现象，即确实可能有预先写好的句子要使用。这些例子是:</p><ul class=""><li id="b77a" class="lk ll iq kh b ki kj kl km ko lm ks ln kw lo la lp lq lr ls bi translated">我们可以检查您的预订</li><li id="1f71" class="lk ll iq kh b ki lt kl lu ko lv ks lw kw lx la lp lq lr ls bi translated">us a call +我们的本地费率+本地费率线路</li></ul><p id="f72a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了进一步研究复现句的概念，我将评估<a class="ae lc" href="https://en.wikipedia.org/wiki/Zipf%27s_law" rel="noopener ugc nofollow" target="_blank"> Zip 定律</a>是否适用于这种情况。该方法通常用于识别非人类生成的文本数据。</p><blockquote class="nh ni nj"><p id="3be8" class="kf kg lb kh b ki kj jr kk kl km ju kn nk kp kq kr nl kt ku kv nm kx ky kz la ij bi translated">Zipf 定律最初是根据定量语言学制定的，指出给定一些自然语言话语的语料库，任何词的频率都与其在频率表中的排名成反比。因此，最频繁出现的单词的出现频率大约是第二频繁出现的单词的两倍，第三频繁出现的单词的三倍，等等。:等级-频率分布是一种反比关系。</p></blockquote><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/13355a53e6dd8651fd0c6ac753c0c0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBCN9hdtplilF_JAYMIYAA.png"/></div></div></figure><p id="cf42" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行由<em class="lb"> log10(术语频率)~ log10(等级)</em>表示的回归后，系数估计值为-1，70(标准误差:0.005)。它明显不同于-1，意味着 Zip 定律不适用于此文本。虚线表示-1 的陡度。从图中推断，曲线似乎在等级#100 附近有一个 hars 突变，并且变得比以前更陡。</p><p id="c063" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果或多或少与 H1 一致。Wizz 有他们喜欢向乘客强调的表达和表达链甚至句子。这引发了一个问题，机器人是否会比人类劳动力更具成本效益，因为它们似乎没有给推文带来多少附加值。</p><h1 id="8773" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">情感分析</h1><p id="8e52" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">我将使用两个情感词汇，即<a class="ae lc" href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html" rel="noopener ugc nofollow" target="_blank"> bing </a>和<a class="ae lc" href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm" rel="noopener ugc nofollow" target="_blank"> nrc </a>。后者将每个词分为以下类别之一:信任、恐惧、消极、悲伤、安歌、惊讶、积极、厌恶、喜悦、期待，而前者只考虑两个类别:积极和消极。</p><h2 id="7ca7" class="nn lz iq bd ma no np dn me nq nr dp mi ko ns nt mk ks nu nv mm kw nw nx mo ny bi translated">必应词典</h2><p id="d1dd" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">让我们首先考虑 bing 词典。我的第一个想法是比较每组中负面词汇的比例。至于客户端，比率约为 26%,这意味着根据 bind 字典，这个比例的单词是负面的，而不是正面的。Wizz 方面的相同指标是大约 17%,这要低得多。总体而言，客户的推文传达了一种更负面的含义，即支持 H2。</p><p id="834c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想知道感情方面是否有任何趋势。具体来说，我的想法是，在取消之后，人们更加愤怒，因此更加消极。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/d8ebea3b0dd13833fbb287fe56840ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIRkiG2RTpi1kTZW8lhptQ.png"/></div></div></figure><p id="c9aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据上面的 100%堆叠条形图，取消的浪潮似乎没有什么影响。无论是对顾客还是对 Wizz 来说，负面词汇与正面词汇的比例都没有显著变化。不过日常有滴，不过很可能是随机噪音。</p><h2 id="3c6c" class="nn lz iq bd ma no np dn me nq nr dp mi ko ns nt mk ks nu nv mm kw nw nx mo ny bi translated">NRC 词典</h2><p id="fc63" class="pw-post-body-paragraph kf kg iq kh b ki mq jr kk kl mr ju kn ko ms kq kr ks mt ku kv kw mu ky kz la ij bi translated">对情绪的分解肯定有更详细的层次。下图表明，顾客表达了更多的愤怒、厌恶、惊讶和消极情绪。另一方面，威兹更积极，令人惊讶地表现出恐惧和悲伤的迹象(我的假设是他们试图表示同情)。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/45a62cffe2ad8a1a18a2a6d64f214be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqPu80iYSMnQhibIGk7EYg.png"/></div></div></figure><p id="c433" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看了一下 NRC 的情绪是如何随着时间的推移而分布的，H2 就更加支持了。图表显示，愤怒、厌恶和惊讶(可能不是积极的情绪)等情绪主要是由客户发布的。</p><figure class="mw mx my mz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mv"><img src="../Images/ea6876809fa2b992cd2847e93c1ecd31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PHPLpMZ_YWMAgzhOLuVaCA.png"/></div></div></figure><p id="3e6b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总的来说，我关于情绪的结果表明，客户表达了更多的负面情绪。另一方面，Wizz 打算用更积极的方式来安抚他们的乘客(嗯..就像它们在飞行中那样)。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="7cb0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，边境关闭和大量航班取消似乎对推文的情绪没有影响。客户倾向于在 Wizzair 上发推特，抱怨他们遇到的不愉快的问题。该病毒很可能增加了这些投诉的数量，但是，它没有增加他们的负面影响，因为它已经相当悲观和愤怒。</p><p id="307a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用于抓取和分析的代码可在此处找到<a class="ae lc" href="https://github.com/kovacskokokornel/wizzR_tweets" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>