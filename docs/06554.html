<html>
<head>
<title>Build a Machine Learning simulation tool with Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Dash 构建机器学习模拟工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-machine-learning-simulation-tool-with-dash-b3f6fd512ad6?source=collection_archive---------26-----------------------#2020-05-24">https://towardsdatascience.com/build-a-machine-learning-simulation-tool-with-dash-b3f6fd512ad6?source=collection_archive---------26-----------------------#2020-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="45dc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用 Plotly/Dash 库构建交互式仿真工具，并动态探索您的机器学习模型行为以提高其可解释性。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fd91b6525abd5c7b55f01c0f8980ce15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m2mY4E08O5wQ9uTz0jumpA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">丹·洛马尔在<a class="ae ky" href="https://unsplash.com/s/photos/cockpit?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="d738" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你做到了！这一切都始于您的同事提出的一个业务问题，您经历了数据整合、清理、特性工程和建模的黑暗山谷。您的模型的稳健性已经过检查，您希望分享您的发现。</p><blockquote class="lv"><p id="1130" class="lw lx it bd ly lz ma mb mc md me lu dk translated">然而，并不是每个人都熟悉 RMSE、混淆矩阵或 Shapey 值…</p></blockquote><p id="4f40" class="pw-post-body-paragraph kz la it lb b lc mf ju le lf mg jx lh li mh lk ll lm mi lo lp lq mj ls lt lu im bi translated">例如，行业中的运营团队每天都面临着优化生产或供应链的挑战，机器学习提供了一种新的方式来理解复杂的流程行为……只要它可以转化为可理解的分析。当分享人工智能带来的一些见解时，Python 笔记本可能不是最佳选择！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/f41b369266ae7e6bfbe1e4151aad5be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*3gqFFJ-mFISclnIJcDCznw.gif"/></div></figure><blockquote class="lv"><p id="043a" class="lw lx it bd ly lz ml mm mn mo mp lu dk translated">除了模型预测能力本身，团队总是热衷于了解在众多相关生产参数中最重要的因素是什么，以及每个因素如何影响模型的行为。</p></blockquote></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="087c" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated"><strong class="ak"> Dash libraries 为您提供了一种创建动态仪表板的方法，可通过具有交互功能的 Web 浏览器访问。</strong></h2><p id="42f3" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">这个概念非常简单:</p><ul class=""><li id="5c66" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">您创建一个. py 脚本，其中您的“经典”机器学习任务与编码的网页布局设计结合在一起，从 HTML 代码中关闭。</li><li id="cb7a" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">当执行时，python 脚本在本地地址(<a class="ae ky" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8050/ </a>)上生成一个动态 web 页面，组件在此进行交互。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/65fe939f96f791414a97ab6513d8b125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*5c8CI0_kVqfb3qEGZLkn0Q.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><em class="ok">图标由</em> <strong class="bd ol"> <em class="ok">像素佛</em> </strong> <em class="ok">和</em><strong class="bd ol"><em class="ok">Pixelmeetup</em></strong><em class="ok">(来源:flaticon.com)</em></p></figure></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="a3ba" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated">你想得到一个快速演示吗？开始了。</h2><p id="c8c6" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">首先，我们需要设计一个“看起来像”的工业用例！Scikit-learn 的“make_regression”将生成我们的数据源。我们将微调一些功能，以获得示例中的真实人物:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">数据生成和建模阶段</p></figure><p id="99cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦“机器学习”任务完成，我们仍然需要准备要在我们的网络浏览器上显示的动态信息。对于此示例，我们将创建:</p><ul class=""><li id="9880" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated"><strong class="lb iu">显示模型特征重要性的条形图</strong></li><li id="a27c" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated"><strong class="lb iu">三个滑块</strong>允许用户更改三个最重要特征的值，并了解它们对模型预测的影响</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="6fdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oo">您可能已经注意到条形图的创建与 Plotly 中使用的相似，除了。未调用 show()函数。原因是图表将在“布局”部分呈现。</em></p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><p id="35b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“布局”一节(下面)要求不熟悉 Python 和 HTML 的用户进行一些练习。</p><p id="d126" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的理念是将 HTML 元素(由 htm.xxx 调用)与动态破折号组件(dcc.xxx)结合起来。</p><p id="67f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将保持这个例子非常简单:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="cafb" class="mx my it oq b gy ou ov l ow ox"><strong class="oq iu">&lt;H1&gt;  Title<br/>&lt;DCC&gt; Features Importance Chart<br/>&lt;H4&gt;  #1 Importance Feature Name<br/>&lt;DCC&gt; #1 Feature slider<br/>&lt;H4&gt;  #2 Importance Feature Name<br/>&lt;DCC&gt; #2 Feature slider<br/>&lt;H4&gt;  #2 Importance Feature Name<br/>&lt;DCC&gt; #2 Feature slider<br/>&lt;H2&gt;  Updated predictions</strong></span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="ac71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来是脚本中“最棘手”的部分:<strong class="lb iu"> app.callback 函数</strong>允许您封装一个标准的 python 函数，这样它就可以与上面设计的 web 页面组件进行交互。其机理可以简化如下:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="2b69" class="mx my it oq b gy ou ov l ow ox"><a class="ae ky" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank"><strong class="oq iu">@app</strong></a><strong class="oq iu">.callback</strong>(Output_on_webpage,<br/>              Input_1_from_webpage,<br/>              Input_2_from_webpage,<br/>              Input_3_from_webpage)</span><span id="2639" class="mx my it oq b gy oy ov l ow ox"><strong class="oq iu">python_function</strong>(Input_1, Input_2, Input_3):</span><span id="f497" class="mx my it oq b gy oy ov l ow ox">       Output = model_evaluation([Input_1, Input_2, Input_3])</span><span id="2c40" class="mx my it oq b gy oy ov l ow ox">       return Output</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="a5cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能已经注意到，我们在这里认为只有三个最重要的特性值得更新。因此，当模型评估阵列时，我们考虑了所有其他特征的平均值。这显然是出于简化目的的设计选择。</p><h2 id="bd37" class="mx my it bd mz na nb dn nc nd ne dp nf li ng nh ni lm nj nk nl lq nm nn no np bi translated">然后“瞧”！</h2><p id="be71" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">我们打开命令提示符并键入"<strong class="lb iu"> python dashboard.py </strong>"</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="4752" class="mx my it oq b gy ou ov l ow ox">(base) PS C:\Users\...\&gt; <strong class="oq iu">jupyter dashboard.py</strong><br/> * Serving Flask app "__main__" (lazy loading)<br/> * Environment: production<br/> * Debug mode: off<br/> * Running on <a class="ae ky" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"><strong class="oq iu">http://127.0.0.1:8050/</strong></a> (Press CTRL+C to quit)</span></pre><p id="e4b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们只需在<a class="ae ky" href="http://127.0.0.1:8050/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">打开我们最喜欢的网络浏览器 http://127 . 0 . 0 . 1:8050/</strong></a><strong class="lb iu"/>并检查结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/5c6d662668ef0ab62d862c3746c7f23b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TV8BQNMPCTLtnbnPxLpIig.gif"/></div></div></figure><p id="3926" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每次滑块移动，app.callback 函数都会运行 python 脚本来重新评估预测！</p><p id="e516" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的脚本存储在 GitHub 上的<a class="ae ky" href="https://gist.github.com/pierrelouisbescond/6609149bab1cb36f2f33552dd33954ab" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="59d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所想象的，让非数据科学家团队与模型进行交互并理解其行为成为了一个非常强大的工具。这也是测试模型准确性的一个非常好的平台:运营团队将能够检查并确认模型的行为确实符合他们的现场经验。</p><p id="1895" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们结束这篇文章之前，有几个建议:</p><ul class=""><li id="5e0c" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">如果您不熟悉 Plotly 和 Dash，您应该从标准 Plotly 图表开始训练自己(步骤解释得非常清楚):</li></ul><div class="pa pb gp gr pc pd"><a href="https://plotly.com/python/" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">Plotly Python 图形库</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">Plotly 的 Python 图形库制作出交互式的、出版物质量的图形。如何制作线图的示例…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">plotly.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr ks pd"/></div></div></a></div><ul class=""><li id="c467" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">下面的在线课程设计得非常好，它将指导你学习 Python 基础知识(Pandas / NumPy)、Plotly 图表语法以及 Dash 设计。我不推荐它:</li></ul><div class="pa pb gp gr pc pd"><a href="https://www.udemy.com/course/interactive-python-dashboards-with-plotly-and-dash/" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">互动课程:使用 Python 仪表盘和 Plotly &amp; Dash</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">本课程将教授您使用 Python 创建交互式仪表盘所需的一切知识</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">www.udemy.com</p></div></div><div class="pm l"><div class="ps l po pp pq pm pr ks pd"/></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://pl-bescond.medium.com/pierre-louis-besconds-articles-on-medium-f6632a6895ad" rel="noopener follow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">皮埃尔-路易·贝斯康德关于媒介的文章</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">数据科学、机器学习和创新</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">pl-bescond.medium.com</p></div></div><div class="pm l"><div class="pt l po pp pq pm pr ks pd"/></div></div></a></div></div></div>    
</body>
</html>