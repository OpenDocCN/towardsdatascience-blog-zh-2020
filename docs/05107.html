<html>
<head>
<title>Voice to Text with Chrome Web Speech API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Chrome 网络语音 API 将语音转换为文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/voice-to-text-with-chrome-web-speech-api-d98462cb0849?source=collection_archive---------31-----------------------#2020-05-02">https://towardsdatascience.com/voice-to-text-with-chrome-web-speech-api-d98462cb0849?source=collection_archive---------31-----------------------#2020-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="49e7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用谷歌 Chrome 网络语音 API，写邮件的速度比其他人快 10 倍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c0556861b2c9361cef7c557edc94665.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mmnad774iAjP9oAKjU6WUg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://bensonruan.com/voice-to-text-with-chrome-web-speech-api/" rel="noopener ugc nofollow" target="_blank">bensonruan.com</a></p></figure><p id="3d14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自 2013 年谷歌 Chrome 发布第 25 版以来，对网络语音 API 的支持为网络应用程序将语音转换为文本开辟了一个全新的机会世界。</p><p id="c5d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过下面的演示，你可以将谷歌 Chrome 用作语音识别应用程序，在不触摸键盘的情况下输入长文档、电子邮件和学校论文。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/8cd4d4dc576821945f943f79a8629ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QAv1bepP9cWrJ3JoWa9Jbg.gif"/></div></div></figure><p id="e409" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击下面的链接亲自尝试一下:</p><div class="lw lx gp gr ly lz"><a href="https://bensonruan.com/voice-to-text-with-chrome-web-speech-api/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">使用 Chrome Web Speech API 的语音转文本- Benson 技术</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">您可以在下面的链接中下载上面演示的完整代码:您可能会想“功能就像…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">bensonruan.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ks lz"/></div></div></a></div><p id="56b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会想“像语音转文本这样的功能实现起来相当复杂。”嗯，如果你从头开始训练语音识别模型，你就对了。但感谢谷歌，他们已经为你做了艰苦的工作，通过利用 Chrome 内置的网络语音 API，你可以将你的 Chrome 浏览器变成语音到文本的应用程序。让我们在下面探索更多的细节。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="bccb" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">履行</h1><h2 id="25ca" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤 1:检查浏览器支持</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/63bf2387b3c49e74e2180fd86e0c1717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4epnyUuzoIGov3D-VSNJBQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://caniuse.com/#search=Speech" rel="noopener ugc nofollow" target="_blank">caniuse.com</a></p></figure><p id="380b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你在上面看到的，Chrome 是支持语音到文本 API 的主要浏览器，使用谷歌的语音识别引擎。</p><p id="e07f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过检查<code class="fe oa ob oc od b">webkitSpeechRecognition</code>对象是否存在来判断浏览器是否支持 Web Speech API。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="b4ad" class="nn mw it od b gy oi oj l ok ol">if (<strong class="od iu">'webkitSpeechRecognition'</strong> in window) {<br/>  // speech recognition API supported<br/>} else {<br/>  // speech recognition API not supported<br/>}</span></pre><h2 id="18bb" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤 2:创建语音识别对象</h2><p id="9af0" class="pw-post-body-paragraph kz la it lb b lc om ju le lf on jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">下一步是创建一个新的语音识别对象。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="6635" class="nn mw it od b gy oi oj l ok ol">recognition = new<!-- --> <strong class="od iu">webkitSpeechRecognition</strong>();</span></pre><h2 id="1228" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#步骤 3:注册事件处理程序</h2><p id="e887" class="pw-post-body-paragraph kz la it lb b lc om ju le lf on jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">语音识别对象有许多属性、方法和事件处理程序。完整名单请参考<a class="ae ky" href="https://w3c.github.io/speech-api/#speechreco-section" rel="noopener ugc nofollow" target="_blank">https://w3c.github.io/speech-api/#speechreco-section</a></p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="2c71" class="nn mw it od b gy oi oj l ok ol">interface SpeechRecognition : EventTarget {<br/>    // recognition parameters<br/>    attribute SpeechGrammarList grammars;<br/>    attribute DOMString lang;<br/>    attribute boolean continuous;<br/>    attribute boolean interimResults;<br/>    attribute unsigned long maxAlternatives;<br/> <br/>    // methods to drive the speech interaction<br/>    void start();<br/>    void stop();<br/>    void abort();<br/> <br/>    // event methods<br/>    <strong class="od iu">attribute EventHandler onresult;</strong><br/>    attribute EventHandler onerror;<br/>    attribute EventHandler onstart;<br/>    attribute EventHandler onend;<br/>};</span></pre><p id="6292" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面我将强调这个应用程序的重要部分。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="360c" class="nn mw it od b gy oi oj l ok ol">recognition.continuous = true;</span><span id="0914" class="nn mw it od b gy or oj l ok ol">recognition.interimResults = true;</span></pre><p id="962f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe oa ob oc od b">recognition.continuous</code>设置为真时，识别引擎将把你讲话的每一部分都视为一个中间结果。当<code class="fe oa ob oc od b">recognition.interimResults</code>设置为真时，应该返回中间结果。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="8a1c" class="nn mw it od b gy oi oj l ok ol"><strong class="od iu">recognition.onresult</strong> = function(event) {<br/>  var interim_transcript = '';<br/>  for (var i = event.resultIndex; i &lt; event.results.length; ++i) {<br/>    <strong class="od iu">if (event.results[i].isFinal) {<br/>      final_transcript += event.results[i][0].transcript;</strong><br/>    } else {<br/>      <strong class="od iu">interim_transcript += event.results[i][0].transcript;</strong><br/>    }<br/>  }<br/>  final_transcript = capitalize(final_transcript);<br/>  final_span.innerHTML = linebreak(final_transcript);<br/>  interim_span.innerHTML = linebreak(interim_transcript);<br/>};</span></pre><p id="f4fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在下面探索一下这个<code class="fe oa ob oc od b">recognition.onresult</code>事件，以便更好地理解会返回什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/d1840afd41b1f404bc7f1db8b7a65010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*_KWZXyGMALog5mgK5G4SaQ.jpeg"/></div></figure><p id="6d8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe oa ob oc od b">recognition.onresult</code>事件处理程序返回一个包含以下字段的<code class="fe oa ob oc od b">SpeechRecognitionEvent</code>:</p><ul class=""><li id="b2c5" class="ot ou it lb b lc ld lf lg li ov lm ow lq ox lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.results[i]</code>–包含识别结果对象的数组。每个数组元素对应于<strong class="lb iu"> i </strong>识别台上的一个已识别单词。</li><li id="2851" class="ot ou it lb b lc pc lf pd li pe lm pf lq pg lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.resultIndex</code>–当前识别结果指数。</li><li id="b847" class="ot ou it lb b lc pc lf pd li pe lm pf lq pg lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.results[i][j]</code>–已识别单词的第<strong class="lb iu"> j </strong>个备选项。第一个元素是最有可能识别的单词。</li><li id="85c6" class="ot ou it lb b lc pc lf pd li pe lm pf lq pg lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.results[i].isFinal</code>–显示该结果是最终结果还是临时结果的布尔值。</li><li id="c189" class="ot ou it lb b lc pc lf pd li pe lm pf lq pg lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.results[i][ j].transcript</code>–单词的文本表示。</li><li id="760f" class="ot ou it lb b lc pc lf pd li pe lm pf lq pg lu oy oz pa pb bi translated"><code class="fe oa ob oc od b">event.results[i][j].confidence</code>–给定单词正确解码的概率(值从 0 到 1)。</li></ul><h2 id="435e" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#第四步:语言选择</h2><p id="38d0" class="pw-post-body-paragraph kz la it lb b lc om ju le lf on jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">Chrome 语音识别支持多种语言，如果您的用户说的不是英语，您可以通过指定语言参数<code class="fe oa ob oc od b">recognition.lang</code>来改善他们的结果</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="ca3a" class="nn mw it od b gy oi oj l ok ol">recognition.lang = select_dialect.value;</span></pre><h2 id="c134" class="nn mw it bd mx no np dn nb nq nr dp nf li ns nt nh lm nu nv nj lq nw nx nl ny bi translated">#第五步:开始识别</h2><p id="6633" class="pw-post-body-paragraph kz la it lb b lc om ju le lf on jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">通过调用<code class="fe oa ob oc od b">recognition.start()</code>，它激活语音识别器。一旦它开始捕获音频，它就调用<code class="fe oa ob oc od b">onstart</code>事件处理程序，然后对于每一组新的结果，它调用<code class="fe oa ob oc od b">onresult</code>事件处理程序。</p><pre class="kj kk kl km gt oe od of og aw oh bi"><span id="ae43" class="nn mw it od b gy oi oj l ok ol">$("#start_button").click(function () {<br/>  recognition.lang = select_dialect.value;<br/>  <strong class="od iu">recognition.start();</strong><br/>});</span></pre><p id="bae7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！剩下的代码只是为了增强用户体验。它向用户显示一些信息，并交换麦克风按钮上的 GIF 图像。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="2a64" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">GitHub 知识库</h1><p id="65d5" class="pw-post-body-paragraph kz la it lb b lc om ju le lf on jx lh li oo lk ll lm op lo lp lq oq ls lt lu im bi translated">您可以通过下面的链接下载上述演示的完整代码:</p><div class="lw lx gp gr ly lz"><a href="https://github.com/bensonruan/Chrome-Web-Speech-API" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd iu gy z fp me fr fs mf fu fw is bi translated">Benson Ruan/Chrome-Web-Speech-API</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">使用 Google Chrome Web Speech API 的语音转文本 https://Benson Ruan . com/voice-to-Text-with-Chrome-Web-Speech-API/Clone…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">github.com</p></div></div><div class="mi l"><div class="ph l mk ml mm mi mn ks lz"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="74d8" class="mv mw it bd mx my mz na nb nc nd ne nf jz ng ka nh kc ni kd nj kf nk kg nl nm bi translated">结论</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/715613277fc3f27b97838d05dc9e620f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Pz7QScu-qv_3hq2_"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Sebastian Scholz (Nuki) 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b30f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web 语音 API 对于语音控制、对话脚本、数据输入非常有用。但目前在各大浏览器中，只有 Chrome 在桌面和安卓手机上支持。很高兴看到将来其他现代浏览器也能支持这个伟大的特性。</p><p id="a8bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果你喜欢这篇文章，请在脸书或推特上分享。如果你有任何问题，请在评论中告诉我。在<a class="ae ky" href="https://github.com/bensonruan/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae ky" href="https://www.linkedin.com/in/benson-ruan/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上关注我。</p></div></div>    
</body>
</html>