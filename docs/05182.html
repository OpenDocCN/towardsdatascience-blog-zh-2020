<html>
<head>
<title>Achieve Reproducibility in your Machine Learning Project with these Two Tools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这两个工具在您的机器学习项目中实现可重复性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/achieve-reproducibility-in-machine-learning-with-these-two-tools-7bb20609cbb8?source=collection_archive---------39-----------------------#2020-05-03">https://towardsdatascience.com/achieve-reproducibility-in-machine-learning-with-these-two-tools-7bb20609cbb8?source=collection_archive---------39-----------------------#2020-05-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c1f4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你能打包你的机器学习模型，并根据你的需要挑选一个最好的吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/33b34df71b073d5ccdfecd9d30fb8061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UqVhOTEhcuOrlZ4m"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae ky" href="https://unsplash.com/@curology?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Curology </a>拍摄的照片</p></figure><h1 id="c41a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="84b0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在机器学习中，由于没有所谓的最佳模型，所以您可能需要训练不同的模型，并尝试不同的参数，直到找到精度最高的模型。实验次数越多，你就越有可能找到高性能的模型。</p><p id="7504" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是你可能会对创建许多实验感到气馁，因为:</p><ul class=""><li id="fcee" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">参数和结果的变化太多，您无法跟踪</li><li id="3646" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">即使您可以通过仔细记录输入和输出来跟踪更改，您如何确保对未来的数据使用相同的模型呢？</li></ul><p id="1aa1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">以上问题是可复制性的动机。在机器学习中，<strong class="lt iu">再现性</strong>是能够重新创建一个机器学习工作流程，以达到与原始工作相同的<strong class="lt iu">输出。这时候我们需要一些工具来有效地记录输入和输出以及保存我们的模型。</strong></p><p id="13e4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你能把你所有的实验，日期，关于数据，参数，结果和模型的信息记录在一个像这样的地方，是不是很好？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/5f1f9e5dfd21bc76fc0463356fa4263d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*taMRH1fuD47AwQcIi8TvTA.png"/></div></figure><p id="7da8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我最喜欢的实现这个目标的工具是Hydra和MLflow。让我们了解如何:</p><ul class=""><li id="6c97" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">创建强大的配置文件来跟踪Hydra的输入。</li><li id="a1f3" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">使用MLflow轻松记录输出和服务模型。</li></ul><h1 id="a447" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">九头蛇的强大配置</h1><p id="86ac" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，什么是配置文件，我们为什么需要它？配置文件包含定义构建或运行程序的设置或首选项的纯文本参数。在数据科学中，配置文件可以用来定义数据和数据的参数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/c53879c8479f8d4b1374700cb36432f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwNM_2_tWXgGvK4zW5zMhg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">超参数的config.yaml文件示例</p></figure><p id="403c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，我们可以使用配置文件来记录实验的数据、超参数、模型和度量。</p><p id="83db" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了读取配置文件，我们将使用<a class="ae ky" href="https://hydra.cc/" rel="noopener ugc nofollow" target="_blank"> Hydra </a>。为什么是九头蛇？有了Hydra，我们可以动态地构建您的配置，使我们能够轻松地获得每次运行的完美配置。要安装Hydra，只需运行</p><pre class="kj kk kl km gt ni nj nk nl aw nm bi"><span id="9580" class="nn la it nj b gy no np l nq nr">pip install hydra-core --upgrade</span></pre><p id="c520" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在带有参数的主函数之前添加Hydra作为装饰器，该参数是指向配置文件的路径。只需将<code class="fe ns nt nu nj b">config</code>或任何其他名称作为主函数的参数。假设我们想要读取我们的训练数据，我们可以使用<code class="fe ns nt nu nj b">config.processed_data.text.train</code></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="7cde" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">想要重用代码但改变数据？我们只需要改变配置文件中的数据路径！</p><h1 id="30e6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">日志记录和服务模型的MLflow</h1><p id="e8a2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://mlflow.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> MLflow </strong> </a>是一个管理ML生命周期的开源平台，包括实验、再现和部署。我在这里介绍了如何使用MLFlow作为优化超参数的工具之一:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-fine-tune-your-machine-learning-models-with-ease-8ca62d1217b1"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何有效地微调你的机器学习模型</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">发现为您的ML模型寻找最佳参数非常耗时？用这三招</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ks oa"/></div></div></a></div><p id="5786" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">MLflow还可以轻松高效地为我们的模型提供服务。安装MLflow与</p><pre class="kj kk kl km gt ni nj nk nl aw nm bi"><span id="872b" class="nn la it nj b gy no np l nq nr">pip install mlflow</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="3884" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，我们的参数、指标和模型被保存了。要访问它们，只需运行</p><pre class="kj kk kl km gt ni nj nk nl aw nm bi"><span id="274d" class="nn la it nj b gy no np l nq nr">mlflow ui</span></pre><p id="4e7a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您将看到一个跑步列表。单击跑步，查看每次跑步的相关信息</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/5f1f9e5dfd21bc76fc0463356fa4263d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*taMRH1fuD47AwQcIi8TvTA.png"/></div></figure><p id="92bd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在页面末尾的工件部分，我们可以看到保存关于我们的输入和我们训练的模型的信息的配置文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/a8a00a051b7ea8944133fdb493302d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*g97CJf8_A6CEK_3Zax-d8w.png"/></div></figure><p id="b506" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要使用模型，当单击工件中列出的模型名称时，找到模型的完整路径。然后用该路径加载模型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><h1 id="cb72" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">组合九头蛇和MLflow</h1><p id="030d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，我们可以像这样把这两个强大的工具结合在一起</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="c674" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了将所有内容放在一起，我们使用一个配置文件来保存输入，并使用Hydra来调用这些输入。我们使用MLflow来记录输出和模型。现在，我们可以自由地创建许多实验，同时仍然能够跟踪、比较和再现结果！</p><p id="4f97" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您仍然不了解如何将MLflow和Hydra整合到您的数据科学项目中，您可以在<a class="ae ky" href="https://github.com/khuyentran1401/Machine-learning-pipeline" rel="noopener ugc nofollow" target="_blank">我的NLP项目</a>中找到本文提到的工作流示例。</p><h1 id="9db3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="4e2c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">恭喜你！您已经学习了如何使用Hydra和MLflow为您的机器学习模型提供再现性。我鼓励您进一步探索这两个工具，以创建符合您目的的高效管道。纪念</p><blockquote class="oq"><p id="67e3" class="or os it bd ot ou ov ow ox oy oz mm dk translated">花在组织上的每一分钟，都是一小时的收获</p></blockquote><p id="5269" class="pw-post-body-paragraph lr ls it lt b lu pa ju lw lx pb jx lz ma pc mc md me pd mg mh mi pe mk ml mm im bi translated">通过组织代码的结构，您将节省机器学习工作流程中的调试时间。有了这两个工具，我发现我的工作流程变得不那么混乱了，我希望你也一样。</p><p id="0271" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在LinkedIn和Twitter上与我联系。</p><p id="f35f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-create-a-drop-down-menu-and-a-slide-bar-for-your-favorite-visualization-tool-3a50b7c9ea01"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何为你最喜欢的可视化工具创建下拉菜单和滑动条</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">使用Python Widget，您可以用3行代码升级可视化</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="pf l ol om on oj oo ks oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-share-your-jupyter-notebook-in-3-lines-of-code-with-ngrok-bfe1495a9c0c"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何用Ngrok用3行代码分享你的Jupyter笔记本</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">想象一下，让你的朋友在远程机器上使用你的本地Jupyter笔记本</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="pg l ol om on oj oo ks oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-monitor-and-log-your-machine-learning-experiment-remotely-with-hyperdash-aa7106b15509"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何使用HyperDash远程监控和记录您的机器学习实验</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">培训需要很长时间才能完成，但你需要去洗手间休息一下…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ph l ol om on oj oo ks oa"/></div></div></a></div></div></div>    
</body>
</html>