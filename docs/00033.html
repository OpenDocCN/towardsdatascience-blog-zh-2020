<html>
<head>
<title>Conditional Probability with a Python Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python示例中的条件概率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/conditional-probability-with-a-python-example-fd6f5937cd2?source=collection_archive---------4-----------------------#2020-01-02">https://towardsdatascience.com/conditional-probability-with-a-python-example-fd6f5937cd2?source=collection_archive---------4-----------------------#2020-01-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ba0e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">假设一个学生错过了10节或更多的课，使用python计算该学生数学得A的条件概率。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/405d1b78c93dd0c6ee1711303a8757b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zy02qnuq0H3Bq5MRCIBHVw.png"/></div></div></figure><p id="e0dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">本文有2个部分:</strong> <br/> 1。条件概率背后的理论<br/> 2。python的例子</p><h1 id="bc4b" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">第一部分:条件概率背后的理论和公式</h1><p id="71f6" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">这一次，<a class="ae mn" href="https://en.wikipedia.org/wiki/Conditional_probability" rel="noopener ugc nofollow" target="_blank">维基百科</a>有了一个平易近人的定义，</p><blockquote class="mo mp mq"><p id="c554" class="ku kv mr kw b kx ky ju kz la lb jx lc ms le lf lg mt li lj lk mu lm ln lo lp im bi translated">在<a class="ae mn" href="https://en.wikipedia.org/wiki/Probability_theory" rel="noopener ugc nofollow" target="_blank">概率论</a>中，<strong class="kw iu">条件概率</strong>是一个<a class="ae mn" href="https://en.wikipedia.org/wiki/Event_(probability_theory)" rel="noopener ugc nofollow" target="_blank">事件</a>发生的<a class="ae mn" href="https://en.wikipedia.org/wiki/Probability" rel="noopener ugc nofollow" target="_blank">概率</a>的度量，假设另一个事件已经发生(通过假设、推测、断言或证据)。</p></blockquote><p id="4185" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">翻译:</strong>给定B为真，A也为真的概率是多少。</p><p id="f960" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有具体例子的东西更容易理解。下面是一些我们可以计算的条件概率的随机例子。</p><h2 id="c46a" class="mv lr it bd ls mw mx dn lw my mz dp ma ld na nb mc lh nc nd me ll ne nf mg ng bi translated"><strong class="ak">例子:</strong></h2><ol class=""><li id="6865" class="nh ni it kw b kx mi la mj ld nj lh nk ll nl lp nm nn no np bi translated">如果一个人是大学生，睡眠少于8小时的概率是多少？</li><li id="1f58" class="nh ni it kw b kx nq la nr ld ns lh nt ll nu lp nm nn no np bi translated">如果一只狗是边境牧羊犬，它活超过15年的概率有多大？</li><li id="9ee4" class="nh ni it kw b kx nq la nr ld ns lh nt ll nu lp nm nn no np bi translated">如果你为政府工作，用掉所有假期的概率是多少？</li></ol><h2 id="d407" class="mv lr it bd ls mw mx dn lw my mz dp ma ld na nb mc lh nc nd me ll ne nf mg ng bi translated">公式:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/1b1e8018b568387c84ec9ac34eb46f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LtZSN0giQCVzYHDe1fh25w.png"/></div></div></figure><p id="9c9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">条件概率的公式是<code class="fe nw nx ny nz b">P(A|B) = P(A ∩ B) / P(B)</code>。</p><p id="d279" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">零件:</strong><br/>P(A | B)= A发生的概率，给定B发生<br/>P(A∩B)= A和B都发生的概率<br/>P(B)= B发生的概率</p><p id="b698" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nw nx ny nz b">|</code>意为“给定”。意思是“在其他事情发生的情况下”。</p><p id="452b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe nw nx ny nz b">∩</code>的意思是相交，你可以把它想象成<code class="fe nw nx ny nz b">and</code>，或者是维恩图中的重叠。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/405d1b78c93dd0c6ee1711303a8757b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zy02qnuq0H3Bq5MRCIBHVw.png"/></div></div></figure><p id="c210" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是为什么我们在公式中用<code class="fe nw nx ny nz b">P(B)</code>除<code class="fe nw nx ny nz b">P(A ∩ B)</code>？</p><p id="0001" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为我们要排除非B情况的概率。我们正在确定落入<code class="fe nw nx ny nz b">B</code>的概率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/ecef198958e900950015d37f0bd24d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8GB3SuoGNOaFW5rk8zZp3w.png"/></div></div></figure><p id="e3dd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">除以<code class="fe nw nx ny nz b">P(B)</code>去除了非<code class="fe nw nx ny nz b">B</code>的概率。<code class="fe nw nx ny nz b">C — B</code>以上。</p><h1 id="7645" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">第2部分:python示例</h1><p id="587a" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">我们将计算一个学生数学得A (80%+)的概率，假设他们错过了10节或更多的课。</p><p id="acd7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从<a class="ae mn" href="https://www.kaggle.com/uciml/student-alcohol-consumption#student-mat.csv" rel="noopener ugc nofollow" target="_blank"> kaggle </a>下载数据集并检查数据。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="276d" class="mv lr it nz b gy of og l oh oi">import pandas as pd<br/>df = pd.read_csv('student-alcohol-consumption/student-mat.csv')<br/>df.head(3)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/c40aa6ea7153ebbc29a1ff8812550501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voFDfnh0VU2esr7YkWQ2wg.png"/></div></div></figure><p id="aa74" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并检查记录的数量。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="8529" class="mv lr it nz b gy of og l oh oi">len(df)<br/>#=&gt; 395</span></pre><p id="9c41" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们只关心列，<code class="fe nw nx ny nz b">absences</code>(缺席次数)，和<code class="fe nw nx ny nz b">G3</code>(从0到20的最终分数)。</p><p id="dbb3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们基于这些列创建几个新的布尔列，使我们的生活更容易。</p><p id="8958" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加一个名为<code class="fe nw nx ny nz b">grade_A</code>的布尔列，记录学生最终分数是否达到80%或更高。原始值在0-20范围内，所以我们乘以5。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="2a23" class="mv lr it nz b gy of og l oh oi">df['grade_A'] = np.where(df['G3']*5 &gt;= 80, 1, 0)</span></pre><p id="f0a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果学生缺了10节或更多的课，创建另一个名为<code class="fe nw nx ny nz b">high_absenses</code>的布尔列，值为1。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="f10e" class="mv lr it nz b gy of og l oh oi">df['high_absenses'] = np.where(df['absences'] &gt;= 10, 1, 0)</span></pre><p id="d4a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">再添加一列，使构建数据透视表更容易。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="64ec" class="mv lr it nz b gy of og l oh oi">df['count'] = 1</span></pre><p id="9c8c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">删除所有我们不关心的栏目。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="3bf3" class="mv lr it nz b gy of og l oh oi">df = df[['grade_A','high_absenses','count']]<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/6d53970fdc8c7e0218b1c84ecb8e89cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*FBTGUJxyS_Yn14vAqbj7fA.png"/></div></figure><p id="7ec4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">很好。现在我们将由此创建一个数据透视表。</p><pre class="kj kk kl km gt ob nz oc od aw oe bi"><span id="8664" class="mv lr it nz b gy of og l oh oi">pd.pivot_table(<br/>    df, <br/>    values='count', <br/>    index=['grade_A'], <br/>    columns=['high_absenses'], <br/>    aggfunc=np.size, <br/>    fill_value=0<br/>)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/4cb2781f18cb54f8998f331620f0b6be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*g_cB4H9d_5BGJ9ETRsSsMw.png"/></div></figure><p id="f3c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在有了进行计算所需的所有数据。让我们从计算公式中的各个部分开始。</p><p id="45bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">在我们的例子中:</strong> <br/> <code class="fe nw nx ny nz b">P(A)</code>是一个等级80%或更大的概率。<br/> <code class="fe nw nx ny nz b">P(B)</code>是缺课10节及以上的概率。<br/> <code class="fe nw nx ny nz b">P(A|B)</code>是80%+成绩的概率，给定缺课10节或以上。</p><p id="2f01" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">零件的计算:</strong><br/>P(A)=(35+5)/(35+5+277+78)= 0.10126582278481013<br/>P(B)=(78+5)/(35+5+277+78)= 0.21012658227848102<br/>P(A∩B)= 5/(35+1</p><p id="24a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并且按照公式，<code class="fe nw nx ny nz b">P(A|B) = P(A ∩ B) / P(B)</code>，把它拼在一起。</p><p id="6c72" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">p(A | B)= 0.012658227848101266/0.21012658227848102 = 0.06</p><p id="f9ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们找到了。如果缺课10节或更多，得到至少80%最终成绩的概率是6%。</p><h1 id="0585" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">结论</h1><p id="a651" class="pw-post-body-paragraph ku kv it kw b kx mi ju kz la mj jx lc ld mk lf lg lh ml lj lk ll mm ln lo lp im bi translated">虽然从我们的具体例子中学到的很清楚——如果你想要好成绩就去上课，条件概率可以应用于更严重的情况。</p><p id="1d0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，在给定测试结果的情况下，一个人患有特定疾病的概率。</p><p id="f518" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在使用贝叶斯定理进行更复杂的概率估计之前，理解也是必不可少的。</p></div></div>    
</body>
</html>