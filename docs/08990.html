<html>
<head>
<title>Build The World’s Simplest ETL (Extract, Transform, Load) Pipeline in Ruby With Kiba</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Kiba 在 Ruby 中构建世界上最简单的 ETL(提取、转换、加载)管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35?source=collection_archive---------34-----------------------#2020-06-28">https://towardsdatascience.com/build-the-worlds-simplest-etl-extract-transform-load-pipeline-in-ruby-with-kiba-e7093a29d35?source=collection_archive---------34-----------------------#2020-06-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3cd1" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据预处理</h2><div class=""/><div class=""><h2 id="61af" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">通过构建管道修改 CSV 中的文本来学习 ETL</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/1761859ec61b3f194456b7d3d400682e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zattx3HIV5B7Y3smeqqOEQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://www.pexels.com/@skitterphoto?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">摄影记者</a>从<a class="ae lh" href="https://www.pexels.com/photo/gray-gold-and-red-industrial-machine-675987/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">像素</a>拍摄</p></figure><p id="8901" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您多久遍历一次数据库表中的所有记录，修改每条记录，然后重新保存一次？</p><p id="bba3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对我来说，很多。</p><p id="3fa5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这种模式被称为<a class="ae lh" href="https://en.wikipedia.org/wiki/Extract,_transform,_load" rel="noopener ugc nofollow" target="_blank"> ETL </a>(提取、转换、加载)。</p><p id="6931" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我在网络应用、分析平台和机器学习管道中看到了这一点。</p><p id="43b8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以自己开发，但是有很多包可以让 ETL 的编写变得干净、模块化和可测试。</p><p id="2e76" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将使用<a class="ae lh" href="https://www.kiba-etl.org/" rel="noopener ugc nofollow" target="_blank"> Kiba </a>在 Ruby 中浏览一个例子。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="9184" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">什么是 ETL？</h1><p id="459a" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">ETL 代表“提取、转换、加载”，但除非你来自数据挖掘背景，否则这个名字会误导人。</p><p id="e310" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">更好的名称可能是“加载、修改、保存”。</p><p id="6992" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">提取</strong> =从一个源加载数据(例如:数据库、CSV、XML、JSON、…)</p><p id="26d5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">转换</strong> =修改/增加每个数据点(例如:添加地理位置数据、修改标点符号、计算一些东西等等)</p><p id="243f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">加载</strong> =存储更新(即:数据库、CSV、数据仓库……)</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="35cb" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">我们的目标</h1><p id="e1cc" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们将:</p><ol class=""><li id="9d32" class="ni nj it lk b ll lm lo lp lr nk lv nl lz nm md nn no np nq bi translated">将电话号码的 CSV 作为输入</li><li id="5aaf" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">删除非数字字符和不是 10 位数的电话号码</li><li id="bdce" class="ni nj it lk b ll nr lo ns lr nt lv nu lz nv md nn no np nq bi translated">保存到另一个 CSV</li></ol></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="c48b" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">代码</h1><p id="fa90" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们将把它打包到一个小型的 ruby 项目中。</p><h2 id="44c9" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">创建我们的目录</h2><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="d782" class="nw mm it oi b gy om on l oo op">$ mkdir kiba-etl &amp;&amp; cd kiba-etl/</span></pre><h2 id="96f6" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">添加源 CSV</h2><p id="c5a7" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">用<code class="fe oq or os oi b">touch phone.csv</code>创建一个 CSV 文件并粘贴到下面。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="ae15" class="nw mm it oi b gy om on l oo op">id,number<br/>1,123.456.7891<br/>2,222<br/>3,303-030-3030<br/>4,444-444-4444<br/>5,900-000-00001<br/>6,#1000000000<br/>7,#9898989898<br/>8,800-000-00000<br/>9,999.999.9999<br/>10,1.1.1.1.1.1.1.1.1.1<br/>11,(112)233-4455<br/>12,(121)212-0000</span></pre><p id="113c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="ot">在真实情况下，你可以使用 Twilio 这样的服务来检测它们是否是真实的电话号码。</em></p><h2 id="ae88" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">创建 Gemfile</h2><p id="8417" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">运行<code class="fe oq or os oi b">touch Gemfile</code>并将以下内容添加到文件中。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="cc7f" class="nw mm it oi b gy om on l oo op">source '<a class="ae lh" href="https://rubygems.org'" rel="noopener ugc nofollow" target="_blank">https://rubygems.org'</a></span><span id="1191" class="nw mm it oi b gy ou on l oo op">gem 'kiba'<br/>gem 'rake', '~&gt; 11.2', '&gt;= 11.2.2'</span></pre><p id="d071" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">用<code class="fe oq or os oi b">bundle install</code>安装这些包。</p><h2 id="da65" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">创建用于提取的类</h2><p id="d6cc" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">创建一个文件来存储我们的 ETL 类。我们称之为<code class="fe oq or os oi b">common.rb</code>。</p><p id="302c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">写我们在<code class="fe oq or os oi b">common.rb</code>的第一堂课。我们可以给这个类取任何名字，但是我选择了<code class="fe oq or os oi b">SourceCSV</code>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="c75d" class="nw mm it oi b gy om on l oo op">require 'csv'</span><span id="b009" class="nw mm it oi b gy ou on l oo op">class SourceCSV <br/>  def initialize(filename:)<br/>    <a class="ae lh" href="http://twitter.com/filename" rel="noopener ugc nofollow" target="_blank">@filename</a> = filename<br/>  end</span><span id="5fee" class="nw mm it oi b gy ou on l oo op">  # Iterates over each line in the CSV so we can pass them one at a<br/>  # time to transform in the next step<br/>  def each<br/>    csv = CSV.open(<a class="ae lh" href="http://twitter.com/filename" rel="noopener ugc nofollow" target="_blank">@filename</a>, headers:true)</span><span id="e956" class="nw mm it oi b gy ou on l oo op">    csv.each do |row|<br/>      yield(row.to_hash)<br/>    end</span><span id="2ee4" class="nw mm it oi b gy ou on l oo op">    csv.close<br/>  end<br/>end</span></pre><h2 id="544a" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">创建一个耙式文件</h2><p id="c23f" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">我们将使用耙子任务来启动 Kiba 作业。</p><p id="493f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">创建一个名为<code class="fe oq or os oi b">Rakefile</code>(没有扩展名)的文件，并添加以下内容。我们稍后会添加更多的逻辑。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="2573" class="nw mm it oi b gy om on l oo op">require 'kiba'<br/>require_relative 'common'</span><span id="95af" class="nw mm it oi b gy ou on l oo op">task :kiba_run do<br/>  puts "The job is running..."<br/>  <br/>  Kiba.run(<br/>    Kiba.parse do<br/>      ##############################################################<br/>      source SourceCSV, filename: 'numbers.csv'<br/>      ##############################################################<br/>    end<br/>  )<br/>  puts "...The job is finished"<br/>end</span></pre><p id="264b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">注意，我们的 rake 任务被命名为<code class="fe oq or os oi b">kiba_run</code>。让我们从控制台运行我们的任务。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="0d44" class="nw mm it oi b gy om on l oo op">$ rake kiba_run</span></pre><p id="b546" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">输出应该是:</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="7539" class="nw mm it oi b gy om on l oo op">The job is running...<br/>...The job is finished</span></pre><p id="1e65" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们看到这一点，到目前为止一切正常。</p><h2 id="8057" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated">为加载创建一个类</h2><p id="535c" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">现在我们将创建一个在数据被修改后保存数据的类。显然我们还没有添加任何修改逻辑。</p><p id="863b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<code class="fe oq or os oi b">common.rb</code>中，添加。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="e65c" class="nw mm it oi b gy om on l oo op">class DestinationCSV<br/>  def initialize(filename:)<br/>    <a class="ae lh" href="http://twitter.com/csv" rel="noopener ugc nofollow" target="_blank">@csv</a> = CSV.open(filename, 'w')<br/>    <a class="ae lh" href="http://twitter.com/headers_written" rel="noopener ugc nofollow" target="_blank">@headers_written</a> = false<br/>  end</span><span id="b90c" class="nw mm it oi b gy ou on l oo op">  def write(row)<br/>    if !@headers_written<br/>      # Add headers on the first row <br/>      # after which, don't add headers<br/>      <a class="ae lh" href="http://twitter.com/headers_written" rel="noopener ugc nofollow" target="_blank">@headers_written</a> = true<br/>      <a class="ae lh" href="http://twitter.com/csv" rel="noopener ugc nofollow" target="_blank">@csv</a> &lt;&lt; row.keys<br/>    end<br/>    <a class="ae lh" href="http://twitter.com/csv" rel="noopener ugc nofollow" target="_blank">@csv</a> &lt;&lt; row.values<br/>  end</span><span id="c211" class="nw mm it oi b gy ou on l oo op">  def close<br/>    <a class="ae lh" href="http://twitter.com/csv" rel="noopener ugc nofollow" target="_blank">@csv</a>.close<br/>  end<br/>end</span></pre><p id="f65c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将我们加载的数据存储到一个新的 CSV 中。或者，您可以将这些数据转储到像 postgres 这样的数据库中。</p><p id="8c80" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">将加载步骤添加到 rake 文件。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="cbcf" class="nw mm it oi b gy om on l oo op">...<br/>  ##############################################################<br/>  source SourceCSV, filename: 'numbers.csv'</span><span id="7ebb" class="nw mm it oi b gy ou on l oo op">  destination DestinationCSV, filename: 'numbers-cleaned.csv'<br/>  ##############################################################<br/>...</span></pre><p id="47db" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">用<code class="fe oq or os oi b">rake kiba_run</code>再试一次。</p><p id="e4ac" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在应该有一个名为<code class="fe oq or os oi b">numbers-cleaned.csv</code>的新文件，看起来和<code class="fe oq or os oi b">numbers.csv</code>一模一样。</p><p id="5828" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">恭喜你！您已经完成了 ETL 中的“E”和“L”步骤。</p><h2 id="4243" class="nw mm it bd mn nx ny dn mr nz oa dp mv lr ob oc mx lv od oe mz lz of og nb iz bi translated"><strong class="ak">为转换创建类</strong></h2><p id="ed21" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated">现在是有趣的部分。我们将创建两个与 transform 相关的类，每个类做不同的事情。</p><p id="ef82" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">第一个从我们的数字中删除标点符号，并计算字符数。将此类添加到<code class="fe oq or os oi b">common.rb</code>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="1f71" class="nw mm it oi b gy om on l oo op">class TransformClean<br/>  def initialize(field:)<br/>    <a class="ae lh" href="http://twitter.com/field" rel="noopener ugc nofollow" target="_blank">@field</a> = field<br/>  end</span><span id="9839" class="nw mm it oi b gy ou on l oo op">  def process(row)<br/>    number = row[<a class="ae lh" href="http://twitter.com/field" rel="noopener ugc nofollow" target="_blank">@field</a>]</span><span id="b899" class="nw mm it oi b gy ou on l oo op">    # remove non-numeric characters<br/>    row[:number_cleaned] = number.tr('^0-9', '')</span><span id="086f" class="nw mm it oi b gy ou on l oo op">    # count number of characters<br/>    row[:digit_count] = row[:number_cleaned].length</span><span id="cd5e" class="nw mm it oi b gy ou on l oo op">    row<br/>  end<br/>end</span></pre><p id="8111" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">并更新<code class="fe oq or os oi b">Rakefile</code>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="6c17" class="nw mm it oi b gy om on l oo op">...<br/>  #################################################################<br/>  source SourceCSV, filename: 'numbers.csv'</span><span id="f5b2" class="nw mm it oi b gy ou on l oo op">  transform TransformClean, field: 'number'</span><span id="9629" class="nw mm it oi b gy ou on l oo op">  destination DestinationCSV, filename: 'numbers-cleaned.csv'<br/>  #################################################################</span></pre><p id="89cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">第二个删除所有不是 10 位数的数字。将第二个转换类添加到<code class="fe oq or os oi b">common.rb</code>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="10a6" class="nw mm it oi b gy om on l oo op">class TransformDropFake<br/>  def initialize(field:)<br/>    <a class="ae lh" href="http://twitter.com/field" rel="noopener ugc nofollow" target="_blank">@field</a> = field<br/>  end</span><span id="d50c" class="nw mm it oi b gy ou on l oo op">def process(row)<br/>    number = row[<a class="ae lh" href="http://twitter.com/field" rel="noopener ugc nofollow" target="_blank">@field</a>]<br/>    row[:digit_count] == 10 ? row :nil<br/>  end<br/>end</span></pre><p id="5abe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">更新我们的耙子任务。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="7ccf" class="nw mm it oi b gy om on l oo op">...<br/>  ##################################################################<br/>  source SourceCSV, filename: 'numbers.csv'</span><span id="9c42" class="nw mm it oi b gy ou on l oo op">  transform TransformClean, field: 'number'<br/>  transform TransformDropFake, field: 'number'</span><span id="799b" class="nw mm it oi b gy ou on l oo op">  destination DestinationCSV, filename: 'numbers-cleaned.csv'<br/>  ##################################################################<br/>...</span></pre><p id="ad73" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在再次运行我们的 rake 任务，看看输出的文件。应该是这样的。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="80c1" class="nw mm it oi b gy om on l oo op">id,number,number_cleaned,digit_count<br/>1,123.456.7891,1234567891,10<br/>3,303-030-3030,3030303030,10<br/>4,444-444-4444,4444444444,10<br/>6,#1000000000,1000000000,10<br/>7,#9898989898,9898989898,10<br/>9,999.999.9999,9999999999,10<br/>10,1.1.1.1.1.1.1.1.1.1,1111111111,10<br/>11,(112)233-4455,1122334455,10<br/>12,(121)212-0000,1212120000,10</span></pre><p id="d6eb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">厉害！</p><p id="abcc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们把输出的 CSV 打印出来，看起来会像这样。试试:<code class="fe oq or os oi b">cat numbers-cleaned.csv | column -t -s, | less -S</code>。</p><pre class="ks kt ku kv gt oh oi oj ok aw ol bi"><span id="f4e2" class="nw mm it oi b gy om on l oo op">id  number               number_cleaned  digit_count<br/>1   123.456.7891         1234567891      10<br/>3   303-030-3030         3030303030      10<br/>4   444-444-4444         4444444444      10<br/>6   #1000000000          1000000000      10<br/>7   #9898989898          9898989898      10<br/>9   999.999.9999         9999999999      10<br/>10  1.1.1.1.1.1.1.1.1.1  1111111111      10<br/>11  (112)233-4455        1122334455      10<br/>12  (121)212-0000        1212120000      10</span></pre><p id="d0f8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们已经在 CSV 上实现了 ETL！</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="8835" class="ml mm it bd mn mo mp mq mr ms mt mu mv ki mw kj mx kl my km mz ko na kp nb nc bi translated">结论</h1><p id="9a86" class="pw-post-body-paragraph li lj it lk b ll nd kd ln lo ne kg lq lr nf lt lu lv ng lx ly lz nh mb mc md im bi translated"><em class="ot">这个</em> <a class="ae lh" href="https://www.youtube.com/watch?v=6hmNuXXIKf4" rel="noopener ugc nofollow" target="_blank"> <em class="ot"> youtube 视频</em> </a> <em class="ot">和这个</em> <a class="ae lh" href="https://www.timtilberg.com/ruby/etl/2019/09/26/kiba-tips.html" rel="noopener ugc nofollow" target="_blank"> <em class="ot">博文</em> </a> <em class="ot">都有助于搞清楚这一点。</em></p><p id="5894" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你把 ETL 模式放在心里，你会惊讶于使用它的频率。</p><p id="bde5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是 Python 里那么多 ETL 包(即:Airflow，Luigi，Bonobo，…)，为什么会在 Ruby 里用 Kiba 呢？</p><p id="3c19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">您的 web 应用程序是 Ruby on Rails，您的团队中没有 Python 专家，或者您只是想要一个简单的 ETL 解决方案。</p><p id="821f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我说，在生产环境中，只要有可能，就使用你所知道的，并最小化复杂性。</p></div></div>    
</body>
</html>