<html>
<head>
<title>How to visualize high frequency financial data using Plotly and R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Plotly 和 R 可视化高频金融数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-visualize-high-frequency-financial-data-using-plotly-and-r-97171ae84be1?source=collection_archive---------36-----------------------#2020-06-14">https://towardsdatascience.com/how-to-visualize-high-frequency-financial-data-using-plotly-and-r-97171ae84be1?source=collection_archive---------36-----------------------#2020-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4b4e445dd7430293a69cd4e6ca36fc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9CfKJLfn2wDZVHJH"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@nick604?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尼克·钟</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><div class=""/><div class=""><h2 id="edfb" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">关于如何使用 Plotly 软件包从真实资产数据创建烛台图表的分步指南。</h2></div><p id="cd9f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我将展示如何使用 Plotly 软件包，通过 r 可视化高频率的金融数据。为了执行分析和开发交易算法，有必要以非常高的频率获取数据，以便能够采取快速而准确的行动，最大限度地提高交易中获得的利润。</p><p id="d843" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天，在美国证券交易所进行的超过 40%的操作是由机器人进行的，这些机器人被编程来分析市场，并根据市场指标进行买卖。今天我们将学习如何从被日内交易者广泛使用的名为“迷你指数”的巴西资产数据中创建蜡烛图。</p><h1 id="1ede" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">收集数据</h1><p id="5ba7" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">有几种方法可以从交易所收集高频数据。但是今天，由于我们不会实时分析数据，我们将使用 Metatrader 收集数据，这是一个用于进行自由交易的工具，可以进行资产的购买和出售。</p><p id="c97c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">第一步是打开工具并选择我们想要从中收集数据的资产。在我们的例子中，现在是 6 月，该月的迷你指数资产是 WINM20。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/f85e046a5af962f45cbef6f387950409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5wFpY_cTl2gkT4FW.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Metatrader 快照—按作者分类的图片</p></figure><p id="5f39" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">选择资产后，我们选择图表的时间框架。请选择一分钟的时间，以便我们可以在几秒钟内收集数据。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/37287288e61a9e51430d21a722753ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/0*Oot0OKyosj_uGjFb.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">Metatrader 快照上的时间范围—按作者分类的图像</p></figure><p id="5873" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">之后，点击文件并保存。资产数据将保存在中。csv 格式。<br/>准备就绪，数据采集完成！我们去数据处理吧！</p><h1 id="aefd" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">导入和分析数据</h1><p id="434a" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我使用 R，一种强大的免费统计编程语言，以及一些图形库来执行我的分析。打开 RStudio 后，我创建了一个. RScript 文件。</p><p id="9786" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们从导入必要的库开始</p><pre class="ms mt mu mv gt mx my mz na aw nb bi"><span id="03f7" class="nc lv jj my b gy nd ne l nf ng">library(plotly) #para plotar os gráficos<br/>library(xts) #para trabalhar com dados de séries temporais<br/>library(tidyverse) #jeito magnífico de trabalhar com dados</span></pre><p id="e5ef" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们导入名为“WINM20M1.csv”的资产数据</p><pre class="ms mt mu mv gt mx my mz na aw nb bi"><span id="ab34" class="nc lv jj my b gy nd ne l nf ng">data &lt;- read.csv("WINM20M1.csv", header = FALSE, sep = ",", fileEncoding = "UTF-16LE", dec = ".")</span><span id="cad5" class="nc lv jj my b gy nh ne l nf ng">head(data)</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c1f7bb83d688b22d3c9f853f7fdb6c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/0*f6AP2KbNk4kOQum6.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">快照—数据。框架—作者提供的图像</p></figure><p id="daa4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们看到七个还没有名字的变量。因此，我们使用 OHLC 标准(开盘、盘高、盘低、收盘)创建一个带有变量名称的向量，并将该向量赋给 data.frame 列的名称。</p><p id="f2f5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nj nk nl my b">colnames_ &lt;- c("Date", "Open", "High", "Low", "Close", "Tick", "Volume")</code></p><pre class="ms mt mu mv gt mx my mz na aw nb bi"><span id="8598" class="nc lv jj my b gy nd ne l nf ng">colnames(data) &lt;- colnames_</span><span id="2406" class="nc lv jj my b gy nh ne l nf ng">head(data)</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/2a774ba4dfa2d043ca06fac209779fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/0*ch3MdT16vQcMbGiq.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">快照-数据帧-作者提供的图像</p></figure><p id="a834" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">既然我们已经对数据进行了适当的重命名，我们需要将变量 Date 的类型改为 Date。但是在改变它之前，我们必须改变字符串来替换“.”按照“-”号。</p><pre class="ms mt mu mv gt mx my mz na aw nb bi"><span id="80bb" class="nc lv jj my b gy nd ne l nf ng">data$Date &lt;- gsub("\\.", "-", data$Date)</span><span id="5638" class="nc lv jj my b gy nh ne l nf ng">data$Date &lt;- as.POSIXct(data$Date)</span><span id="d14a" class="nc lv jj my b gy nh ne l nf ng">head(data)</span></pre><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi gj"><img src="../Images/397a867423f7491b20cf6f1a9a0e0ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u5OdvXEUEhDp5uPE.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">快照-数据帧-作者提供的图像</p></figure><p id="d0f1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好了，现在是数据可视化。</p><h1 id="a9cc" class="lu lv jj bd lw lx ly lz ma mb mc md me kp mf kq mg ks mh kt mi kv mj kw mk ml bi translated">可视化数据</h1><p id="5284" class="pw-post-body-paragraph ky kz jj la b lb mm kk ld le mn kn lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">最后，为了可视化数据，我们使用了 Plotly 库，它非常适合这种类型的任务。首先，我们创建一个 fig 变量来存储我们的图表。我将只用最后 20 分钟，这样视觉效果不会太密集</p><pre class="ms mt mu mv gt mx my mz na aw nb bi"><span id="a0c6" class="nc lv jj my b gy nd ne l nf ng">fig &lt;- tail(data, 20) %&gt;%<br/>  plot_ly(x = ~Date, type = "candlestick",<br/>          open = ~Open, close = ~Close,<br/>          high = ~High, low = ~Low)<br/>fig &lt;- fig %&gt;% layout(title = "Candles de Mini Ídice")</span><span id="b4a9" class="nc lv jj my b gy nh ne l nf ng">fig</span></pre><p id="1cc4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">瞧啊。</p><figure class="ms mt mu mv gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/20ed980d1f95c7ae6aaf36faec87fbff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZDdQArgoogn35qrt.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">plotly-R-股票市场-快照-作者图片</p></figure><p id="8566" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题或意见，请联系！抱抱！不要忘记订阅我们的时事通讯，接收有关数据科学、数学和金融的每周内容。</p></div></div>    
</body>
</html>