<html>
<head>
<title>Significance testing survey data with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 测试测量数据的重要性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/significance-testing-survey-data-with-python-1e83149257d6?source=collection_archive---------46-----------------------#2020-03-16">https://towardsdatascience.com/significance-testing-survey-data-with-python-1e83149257d6?source=collection_archive---------46-----------------------#2020-03-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="df5b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果驾驶员是盲目的，数据驱动的结果是无用的，但是显著性测试可以为您指明方向</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/da14cfc4be540c4f1c992158ee7e3dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/1*TzflLXsOxv9dsjLYQNB-oQ.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">对婚姻状况是否会影响人们投票方式的视觉探索。投票率明显高于平均投票率的群体(最左边一列)显示为绿色，较低的群体显示为红色，不显著的结果显示为白色。</p></figure><blockquote class="ku kv kw"><p id="f111" class="kx ky kz la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">世界上大多数人会通过猜测或凭直觉来做决定。他们要么是幸运的，要么是错误的。— <em class="it">混合面板</em></p></blockquote><p id="0d47" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">Mixpanel 的<a class="ae lx" href="https://mixpanel.com/blog/2014/12/18/open-sourcing-our-pitch-deck-that-helped-us-get-our-865m-valuation/" rel="noopener ugc nofollow" target="_blank">6500 万美元投资者推介</a>的开场白引人注目。要么你在用数据，要么你就是个傻子。我想补充一句口头禅。</p><blockquote class="ku kv kw"><p id="1a66" class="kx ky kz la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">世界上大多数人不去想<strong class="la iu"> <em class="it">统计意义</em> </strong>。它们将是数据驱动的，但方向是错误的。— <em class="it">盖尔</em></p></blockquote><p id="65d8" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">好吧，Mixpanel 的更好，但你明白了。</p><h2 id="61dd" class="ly lz it bd ma mb mc dn md me mf dp mg lu mh mi mj lv mk ml mm lw mn mo mp mq bi translated">投票意向和婚姻状况</h2><p id="3b9a" class="pw-post-body-paragraph kx ky it la b lb mr ju ld le ms jx lg lu mt lj lk lv mu ln lo lw mv lr ls lt im bi translated">比方说，我们在政治民意调查中发现了一个趋势，可以帮助我们决定谁是我们竞选活动的目标。比如已婚人士。他们投票的方式与单身人士不同吗？我们应该在单身酒吧竞选吗？</p><p id="f189" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">开源库<a class="ae lx" href="http://www.github.com/quantipy/quantipy3" rel="noopener ugc nofollow" target="_blank"> Quantipy </a>可以读取所有主要的调查平台数据类型，包括 SPSS 的<code class="fe mw mx my mz b">.sav</code>文件。这张来自英国 2019 年大选。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="6831" class="ly lz it mz b gy ne nf l ng nh">import quantipy as qp<br/>dataset = qp.DataSet('Elections 2019')<br/>dataset.read_spss('election survey.sav')</span></pre><p id="e860" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">让我们看看从原始数据中选择的几个列是什么样子的:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="e5d5" class="ly lz it mz b gy ne nf l ng nh">dataset[['Gender', <br/>         'VoteIntention', <br/>         'MaritalStatus', <br/>         'weight']].head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/5d442951fcc72026248aaf56f357a1d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*_v-bDikwdzqNHqd20fTnXw.png"/></div></figure><p id="3eff" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">为了加快计算速度，SPSS 将不同的答案存储为数字，然后使用元数据将这些数字映射到答案。(稍后，我们将讨论如何计算一个<code class="fe mw mx my mz b">weight</code>列来改进我们的结果)。现在让我们坚持投票意向:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="1d7b" class="ly lz it mz b gy ne nf l ng nh">dataset.meta('VoteIntention')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/28433d36b9fb34bf0b371adb409087aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*v6JnR8CeOTUSRDgVLVeWew.png"/></div></figure><p id="efe4" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">比较对元数据的回应，我们看到第一个回应都来自保守派选民，而这些相同回应的婚姻状况各不相同。它会影响人们投票的方式吗？让我们来计算一下:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="17f3" class="ly lz it mz b gy ne nf l ng nh">dataset.crosstab('VoteIntention', <br/>                 'MaritalStatus', <br/>                 pct=True,        #percentages, not frequencies<br/>                 w='weight')      #weigh the results</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nl nm di nn bf no"><div class="gh gi nk"><img src="../Images/4dbc9d717a04be01215c94fc278f86e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_wFhhQkDfbvPwsg1dGEgw.png"/></div></div></figure><p id="adbb" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">啊哈！所以，已婚人士投 CON，单身人士投 LAB。也许这是年龄的问题。但是民事伴侣关系中的人是怎么回事呢？他们更有可能投票给保守党而不是工党，在整个人口中，保守党的比例为 54%，工党为 16%，而保守党为 40%，工党为 33%。</p><p id="2105" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在我们开始写新闻稿之前，我们必须问自己:这是真的吗，还是只是数据中的噪音？</p><h2 id="66c4" class="ly lz it bd ma mb mc dn md me mf dp mg lu mh mi mj lv mk ml mm lw mn mo mp mq bi translated">使用 Python 测试测量数据的重要性</h2><p id="4785" class="pw-post-body-paragraph kx ky it la b lb mr ju ld le ms jx lg lu mt lj lk lv mu ln lo lw mv lr ls lt im bi translated">测试调查结果的重要性(sig 测试)可能是一项艰巨的任务。数据本身可能是复杂的，当它被加权以更好地代表被调查的人口时，它变得更加棘手。有时所谓的<a class="ae lx" href="https://sr.ipsosinteractive.com/SPSSMR/Reporter/doc/en/help/effective_base.htm" rel="noopener ugc nofollow" target="_blank">有效基数</a>应该用于测试，有时不用于测试。市场研究行业还依赖于使用专有程序，如 UNICOM Intelligence(又名 Dimensions)和 Askia，能够复制这些应用程序的结果非常重要。</p><p id="df13" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">Quantipy 有助于应对所有这些挑战。让我们运行一个复制维度设置的基本 sig-test，它使用一个汇集的方差并控制由加权和重叠样本引入的偏差。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="f4d3" class="ly lz it mz b gy ne nf l ng nh">batch = dataset.add_batch(name='vote_intention')<br/>batch.add_downbreak('VoteIntention')<br/>batch.add_crossbreak('MaritalStatus')<br/>batch.weights.append('weight')<br/>batch.set_sigtests([0.05])<br/>stack = dataset.populate(['vote_intention'])<br/>stack.aggregate(['counts', 'cbase'], <br/>                batches=['vote_intention'], verbose=False)<br/>stack.add_tests(['vote_intention'])</span></pre><p id="e8ee" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">在上面的代码中，我们使用 Quantipy 的<code class="fe mw mx my mz b">batch</code>机制，以防我们想要计算大量变量来填充我们的表格或 PowerPoint 图表。当我们运行代码时，我们得到一个所谓的<code class="fe mw mx my mz b">stack</code>来存储我们所有的结果；计算出的百分比、基数和显著性矩阵。矩阵看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/0ec639a76780aadb781db75a6fc017c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*82pChf_L8s2PtILqaKyhHg.png"/></div></figure><p id="52d9" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated"><em class="kz"> NaN </em>表示无显著差异，星号标记的结果有效基数太低(答卷人太少，不显著)，一组数字表示显著差异。在上面的例子中，已婚的反对者拥有数组[1，4]，因此明显高于单身投票者和同居伴侣。单身选民在工党一栏中有结果[2，4]，因此比已婚选民和同居选民更有可能投票给工党，但重要的是，民事伴侣一栏没有足够多的回应，因此不重要。</p><p id="5023" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">我们现在可以利用任何 python 网络应用环境(Django、Flask 等)。)来显示一个交互式的显著性表。下面是一个 Django 应用程序，它使用下拉菜单进行过滤，并将相关的响应子集发送到 sig-test 中。当重要的测试被应用和可视化时，探索数据子组的不同投票意图呈现出一个全新的维度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/2fd032a510fc82ffb834a48442e5edaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/1*qaukcohcxLXTc9QixFj5BQ.gif"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">民意测验结果意义的交互探索。绿色表示 a 结果明显高于“整体”组，红色表示较低，白色表示没有显著差异(通常是因为回答的数量太低)。</p></figure><p id="58c4" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">所以，不要发出关于民事伴侣关系中的人们将如何投票的新闻稿，因为需要更多的数据来获得有意义的见解，以了解结果是否重要，或者它是否只是数据中试图将我们引入歧途的噪音。</p></div><div class="ab cl nq nr hx ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="im in io ip iq"><p id="7f9f" class="pw-post-body-paragraph kx ky it la b lb lc ju ld le lf jx lg lu li lj lk lv lm ln lo lw lq lr ls lt im bi translated">盖尔·弗雷松是<a class="ae lx" href="https://www.datasmoothie.com/" rel="noopener ugc nofollow" target="_blank"> Datasmoothie </a>的联合创始人，这是一个专门从事调查数据分析和可视化自动化的平台。如果你对使用开源软件进行调查数据分析感兴趣，注册我们的时事通讯，名为<a class="ae lx" href="https://confirmsubscription.com/h/r/123C34C5066BF0AD2540EF23F30FEDED" rel="noopener ugc nofollow" target="_blank">自发认知</a>。</p></div></div>    
</body>
</html>