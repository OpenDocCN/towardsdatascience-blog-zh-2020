<html>
<head>
<title>Web scraping 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网页抓取 101</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-101-d9170e880117?source=collection_archive---------11-----------------------#2020-07-13">https://towardsdatascience.com/web-scraping-101-d9170e880117?source=collection_archive---------11-----------------------#2020-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="457c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何制作一个简单的机器人在任何投票或竞争中获胜</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2454019e90a8fcc7c0b167110fc9139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ztm00WDhrytJt9bv"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="0917" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">网络抓取</strong>是一个在网上检索数据和执行特定操作的过程。它通常由机器人来完成，以便自动化某些重复的任务。这是一个相当大的研究领域，你可以用它做很多有趣的事情。开始并不一定是缓慢和困难的。在本文中，我将向您介绍一个创建机器人的简单过程，以及将来如何对其进行扩展。不需要以前的经验，只需要 Python 和互联网连接。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7723" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">入门指南</h1><p id="0cbb" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">本教程适用于任何编程水平的初学者，所有内容都将尽可能清晰明了地解释。我将使用一个随机的民俗比赛来演示投票。你可以使用任何你喜欢的网站，并在此基础上进行调整。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/b6a3f34b3abf6617a7df106068aef5a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7TL2ogrM0DzOVtLywgdYpw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者截图)</p></figure><p id="7867" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在直接进入编码之前，我们必须设置两件事情。</p><h2 id="07d1" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">第一步。安装 IDE</h2><p id="eeac" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，我们需要一个地方来写代码，如果你还没有的话。我更喜欢使用<strong class="lb iu"> Visual Studio 代码</strong>,因为它简单并且提供你需要的任何东西。只需搜索“Visual Studio 代码”并下载最新版本。</p><p id="2fcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装完成后，单击扩展按钮并安装 Python。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/2f0b6c0d7a12e1e47016ef894e7b5796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LwPwlmBJyVGWIjnM9qzFTg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者截图)</p></figure><h2 id="4ce9" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">第二步。下载 ChromeDriver</h2><p id="a4df" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们需要一个模块，能够与谷歌浏览器。这一步相当短。搜索“ChromeDriver Chromium”并下载最新版本。下载完成后，解压文件。</p><p id="9f59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nn">对于 Windows，</em>复制文件，创建一个文件夹，如“C:\webdrivers”并放在那里。现在，转到路径设置，并在那里添加文件夹路径(如果你不知道这是在哪里，在谷歌有大量的解释)。</p><p id="c75a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nn">对于 Mac 和 Linux，</em>打开终端并键入</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="6e16" class="na md it np b gy nt nu l nv nw">mv ~/Downloads/chromedriver /usr/local/bin</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="c65d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">制作机器人</h1><h2 id="2393" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">第一步。准备文件和包</h2><p id="cdff" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">太好了，现在我们已经设置好了，可以开始了！让我们创建一个新文件夹，命名为“网络抓取”。现在，打开 Visual Studio 代码，创建一个名为“vote_bot.py”的新文件。</p><p id="1ca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在终端窗口中键入:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="1144" class="na md it np b gy nt nu l nv nw">python -m venv venv</span></pre><p id="7560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将创建一个虚拟环境，它基本上允许我们在不修改您的系统软件包的情况下安装软件包。要激活它:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f477" class="na md it np b gy nt nu l nv nw">source venv/Scripts/activate</span></pre><p id="c700" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要一个软件包，它将帮助我们使用 web 浏览器。类型:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f63f" class="na md it np b gy nt nu l nv nw">pip install selenium</span></pre><h2 id="1405" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">第二步。开始编码</h2><p id="e27e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">用 VS 代码打开我们的 vote_bot 文件。我们要使用的第一行是:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="9297" class="na md it np b gy nt nu l nv nw">from selenium import webdriver<br/>import time</span></pre><p id="05c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将为我们的项目添加 web 驱动程序支持，并在后面的步骤中帮助我们。此外，我们导入时间只是为了能够让页面打开更长时间。</p><p id="f131" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将定义一个机器人。这个机器人将为我们工作。类定义基本上是描述一个我们想要的对象。例如，狗具有某些特征，例如腿、高度、速度和年龄。和机器人一样，我们需要输入它的特征。在本教程中，我试图使它尽可能简单，所以我们需要的唯一定义是我们将用于浏览器的驱动程序。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="fc58" class="na md it np b gy nt nu l nv nw">class VoteBot():<br/>  def __init__(self):<br/>      self.driver = webdriver.Chrome("C:\webdrivers\chromedriver.exe")</span></pre><p id="1999" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当我们创建一个机器人时，首先要做的是定义驱动程序。我们可以实际尝试一下，看看效果如何。通过键入 python vote_bot.py，我们可以运行该程序。如果加上“-i”，就可以直接和代码交互了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/08bcbde4dfdea185a2568d9c34e43df3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l6-eara9nWIHMuY4kUhqJA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者截图)</p></figure><p id="b1c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">重复上述步骤后，应该会打开一个新的浏览器窗口。如果你没有看到一个新的 Chrome 窗口，请确保你已经正确安装了 ChromeDriver 和 selenium，这在前面的步骤中有解释。</p><p id="c097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要一个函数来完成投票。这里的投票过程只是打开一个链接，所以说我们选择第二个参赛者，我们只是复制投票的链接。下面的代码将打开投票页面，保持打开 1 秒钟，然后关闭。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="a967" class="na md it np b gy nt nu l nv nw">class VoteBot():<br/>  def __init__(self):<br/>      self.driver = webdriver.Chrome("C:\webdrivers\chromedriver.exe")</span><span id="821b" class="na md it np b gy ny nu l nv nw">def vote(self):<br/>    self.driver.get('<a class="ae ky" href="https://eaff.eu/bg/online-festival-vote-choice/15" rel="noopener ugc nofollow" target="_blank">https://eaff.eu/bg/online-festival-vote-choice/30</a>')<br/>    time.sleep(1)<br/>    self.driver.close()</span></pre><p id="7873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们已经完成了我们的机器人。我们只需要添加一个循环，这样我们就可以生成无限量的投票并测试它。完整代码附后。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="92e7" class="na md it np b gy nt nu l nv nw">class VoteBot():<br/>  def __init__(self):<br/>      self.driver = webdriver.Chrome("C:\webdrivers\chromedriver.exe")</span><span id="cd42" class="na md it np b gy ny nu l nv nw">def vote(self):<br/>    self.driver.get('<a class="ae ky" href="https://eaff.eu/bg/online-festival-vote-choice/15" rel="noopener ugc nofollow" target="_blank">https://eaff.eu/bg/online-festival-vote-choice/30</a>')<br/>    time.sleep(1)<br/>    self.driver.close()</span><span id="b316" class="na md it np b gy ny nu l nv nw">while True:<br/>  bot = VoteBot()<br/>  bot.vote()</span></pre><h2 id="0459" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">第三步。坐下来享受吧</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/929cb48562eb1ff6df32cd0f87fd6ce5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9wMI3qmhaODA4bO2S9biQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">(作者截图)</p></figure><p id="ae95" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需在您的终端中键入“python vote_bot.py ”,然后观察机器人多次重复该任务。正如你所看到的，机器人将投票，关闭窗口，并再次投票。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="35e4" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最后的话</h1><p id="8dfe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">本教程是为刚刚开始编程和网络抓取的人编写的。对于任何问题，请随时在这个帖子中留下你的问题，我会尽我所能帮助你。为了进一步实验，尝试使用不同类型的按钮和登录序列，更多的我将很快摆姿势。保持冷静，继续编码！</p></div></div>    
</body>
</html>