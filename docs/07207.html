<html>
<head>
<title>How to Build a Machine Learning Web App Without REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何不用REST API搭建机器学习Web App</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/things-i-wish-i-had-known-how-to-build-a-machine-learning-web-app-without-rest-api-f6ead0d058a6?source=collection_archive---------70-----------------------#2020-06-01">https://towardsdatascience.com/things-i-wish-i-had-known-how-to-build-a-machine-learning-web-app-without-rest-api-f6ead0d058a6?source=collection_archive---------70-----------------------#2020-06-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1968d60794870518f5d4d354956d8d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7tPMPwnbc0_maVIAQ1ZqQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">(<em class="jg">图片作者</em>)</p></figure><h2 id="7a23" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">我希望我已经知道的事情:</h2><div class=""/><div class=""><h2 id="832b" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用Streamlit</h2></div><p id="7319" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi md translated"><span class="l me mf mg bm mh mi mj mk ml di">所以</span>几周前，我的一个朋友正在做这个项目，使用OpenCV进行物体检测，她应该给它一个客户端。她在GET/POST请求之间挣扎了很久，最终放弃了这个项目。</p><p id="48c4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们都在某个时候遇到过这种情况，我们努力将我们的ML模型集成到我们的应用程序中。那一刻，我意识到许多数据科学/机器学习爱好者可能不知道这个行业的福利，称为Streamlit！</p><h1 id="0b8f" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">那么…是什么？</h1><blockquote class="ne nf ng"><p id="ac4f" class="lh li nh lj b lk ll kt lm ln lo kw lp ni lr ls lt nj lv lw lx nk lz ma mb mc im bi translated">Streamlit是一个开源应用框架<strong class="lj jt"> </strong>，它可以帮助数据科学家和机器学习工程师在几个小时内创建漂亮、高性能的应用！全是纯Python。全部免费。</p></blockquote><h1 id="5470" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">我应该用它是因为？</h1><p id="b571" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">这是一个<strong class="lj jt">最小</strong>框架，也是目前构建强大的数据/机器学习应用的最快<strong class="lj jt">方式！</strong></p><p id="8a6a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">支持机器学习爱好者使用Flask、Django或其他工具部署<strong class="lj jt">而无需</strong>。</p><p id="57aa" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我再也不用担心那些<strong class="lj jt">回调</strong>了！</p><p id="b0a2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我再也不用担心那些<strong class="lj jt"> HTML标签</strong>了！</p><p id="d0c2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">经过简化的<strong class="lj jt">数据缓存</strong>加速了计算流水线！</p><h1 id="ffa7" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">让我们立即开始吧！</h1><p id="2356" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">Streamlit <strong class="lj jt">搜索</strong>每次保存的更改，并在您编码时即时更新应用程序。代码从上到下运行，总是从一个新的状态开始，绝对不需要回调。这是一个轻松而健壮的应用程序模型，让你以令人难以置信的速度构建丰富的ui。</p><p id="4bcb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你只需要做以下事情:</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nq"><img src="../Images/c879cb2d9500ce0177be2eddcae77e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMBnGy_SoBs-9hlchSeq_A.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">该设置</p></figure><p id="a405" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">还有<strong class="lj jt">万岁！</strong>几秒钟后，示例应用程序将在默认浏览器的新标签中打开。</p><p id="0999" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">另外，<strong class="lj jt">确保</strong>你已经安装了<a class="ae nv" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python 3.6 </a>或更高版本。你可以在这里找到文档<a class="ae nv" href="https://docs.streamlit.io/en/latest/getting_started.html" rel="noopener ugc nofollow" target="_blank"/>。</p><blockquote class="ne nf ng"><p id="9bbc" class="lh li nh lj b lk ll kt lm ln lo kw lp ni lr ls lt nj lv lw lx nk lz ma mb mc im bi translated">因此，事不宜迟，让我们开始制作一个功能齐全的多分类器机器学习Web应用程序。</p></blockquote><h1 id="2f97" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">进口货</h1><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/d3216fb7529503697d1557e22273da71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xwZiRzOhqB7u09jh8QUaFw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">进口货</p></figure><h1 id="80e4" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">加载和分割我们的数据集</h1><p id="9a98" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">在这个工作站中，我们从<code class="fe nx ny nz oa b">mushrooms.csv</code>文件中加载我们的蘑菇数据集，并将数据集分成通常的7:3 (70%用于训练，30%用于测试)。这是一个关于蘑菇是否可食用或有毒的二元分类数据集。你可以在这里找到数据集<a class="ae nv" href="https://github.com/Digaari/Streamlit-ML-WebAPP" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a1e1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这里，<code class="fe nx ny nz oa b">@st.cache()</code>是一种缓存机制，它允许我们的web应用程序即使在从web加载数据、操作大型数据集或执行昂贵的计算时也能保持响应。</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/bf3068fd464b4625832cdeab7a66a1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNyoeKngCdgtoKtkI_kSNA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">装载弹药</p></figure><p id="2f72" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所以每次你用<code class="fe nx ny nz oa b">@st.cache</code>装饰器标记一个函数，它告诉Streamlit，“嘿，你需要检查一些东西！”比如:</p><ol class=""><li id="5931" class="ob oc jj lj b lk ll ln lo lq od lu oe ly of mc og oh oi oj bi translated">函数的输入参数</li><li id="ae7e" class="ob oc jj lj b lk ok ln ol lq om lu on ly oo mc og oh oi oj bi translated">函数中使用的任何外部变量的值</li><li id="6af6" class="ob oc jj lj b lk ok ln ol lq om lu on ly oo mc og oh oi oj bi translated">函数的主体和</li><li id="b75f" class="ob oc jj lj b lk ok ln ol lq om lu on ly oo mc og oh oi oj bi translated">缓存函数中使用的任何函数的主体。</li></ol><blockquote class="ne nf ng"><p id="d470" class="lh li nh lj b lk ll kt lm ln lo kw lp ni lr ls lt nj lv lw lx nk lz ma mb mc im bi translated">Streamlit通过<strong class="lj jt">哈希</strong>来记录这些组件的变化。可以把缓存想象成一个简单的内存中的键值存储，其中键是上述所有内容的散列，值是通过引用传递的实际输出对象。</p></blockquote><h1 id="6d6d" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">情节</h1><p id="4235" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">所以我们从sklearn库导入了两条简单的曲线和一个混淆矩阵。我们通过<code class="fe nx ny nz oa b">metrics_list</code>到<code class="fe nx ny nz oa b">plot_metrics</code>，这将是客户选择的一个或多个选项。每个评估指标各自的功能如下:</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/c1c0dbd4e99e7efcf39cee00507f2dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNM1hrzkkIZSz5vjkjFFzg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">评估指标</p></figure><h1 id="0060" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">多重分类器</h1><p id="32e3" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">很高兴你能坚持到这里！现在我们到了最激动人心的部分。我们会给我们的客户，选择多个分类器！</p><p id="50c9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">对于这个应用，我们将使用<strong class="lj jt">支持向量机(SVM) </strong>、<strong class="lj jt">逻辑回归</strong>和<strong class="lj jt">随机森林分类器。</strong></p><h2 id="2b2e" class="oq mn jj bd mo or os dn ms ot ou dp mw lq ov ow my lu ox oy na ly oz pa nc jp bi translated">支持向量机(SVM)</h2><p id="0386" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">在<strong class="lj jt">支持向量机</strong>中，我们总是旨在增加<em class="nh">的余量。</em>永远记住，<strong class="lj jt">正则化参数(</strong> C)的值越大，<em class="nh">余量越小。</em></p><p id="e3b6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果客户选择SVM，他们将可以通过<strong class="lj jt">内置小部件</strong>如<em class="nh">单选按钮、多选</em>和<em class="nh">数字输入来定制超参数，如<strong class="lj jt">正则化参数</strong>(C)<strong class="lj jt">内核</strong>和<strong class="lj jt">内核系数</strong>。</em></p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/dec1ba945f233f27214ff6535f7acb43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dis1SO1UvgQ8J1QOjW62Gw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">超参数</p></figure><p id="e27b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">定制好超参数后，我们准备好通过点击侧边栏上的<strong class="lj jt">分类</strong>按钮来训练我们的SVM。</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/20faa14a8f32d22d7c78127a9159b5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VncFZYc-q8kaS0TJt69ahQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">训练和绘制结果</p></figure><h2 id="e629" class="oq mn jj bd mo or os dn ms ot ou dp mw lq ov ow my lu ox oy na ly oz pa nc jp bi translated">逻辑回归</h2><p id="3c8a" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated"><strong class="lj jt">逻辑回归</strong>是一种机器学习分类算法，用于预测分类因变量的概率。</p><p id="5d25" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果客户选择逻辑回归，他们可以选择定制超参数，如<strong class="lj jt">正则化参数</strong>(C)<strong class="lj jt">迭代次数</strong>，通过<strong class="lj jt">内置部件</strong>，如<em class="nh">滑块</em>和<em class="nh">数字输入</em></p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/cb704b573b2ce4b8cfab7f64a1e0ff2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XH2XwS3b_Zyq42zIFGUFvA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">逻辑回归</p></figure><h2 id="8a27" class="oq mn jj bd mo or os dn ms ot ou dp mw lq ov ow my lu ox oy na ly oz pa nc jp bi translated">随机森林分类器</h2><p id="62a5" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated"><strong class="lj jt">随机森林分类器</strong>被认为是一种高度准确和稳健的方法，因为有大量决策树参与该过程。它在随机选择的数据样本上创建决策树，从每棵树上获得一个预测，并通过投票选择最佳解决方案。</p><p id="7e04" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果客户端选择随机森林分类器，他们可以选择定制超参数，如森林中的<strong class="lj jt">棵数</strong>、<strong class="lj jt">最大值。树的深度</strong>和<strong class="lj jt">通过<strong class="lj jt">内置小部件</strong>如<em class="nh">单选按钮</em>和<em class="nh">数字输入</em>构建树时的自举样本</strong></p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/3d3ce0c573ac972c70067ff1926dd9d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35xtDQdkXgopTjdx2I37mw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">随机森林分类器</p></figure><h1 id="c3ef" class="mm mn jj bd mo mp mq mr ms mt mu mv mw ky mx kz my lb mz lc na le nb lf nc nd bi translated">浏览器</h1><p id="04bd" class="pw-post-body-paragraph lh li jj lj b lk nl kt lm ln nm kw lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">您的浏览器上会有这样的内容:</p><figure class="nr ns nt nu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/58fffc8ceb34c50fc6ca909bc778ee68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pp8TGHhFL5e0uoI3WvZ-Ag.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">浏览器</p></figure><p id="d741" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在你可以看到Streamlit的真正力量了。因此，没有正式的机器学习或编码背景的人可以使用你的web应用程序，只需通过触摸和点击控件来训练模型，并观察不同分类器的表现。</p><blockquote class="ne nf ng"><p id="1b2a" class="lh li nh lj b lk ll kt lm ln lo kw lp ni lr ls lt nj lv lw lx nk lz ma mb mc im bi translated">在这个基础项目中，只有少数内置函数投入使用。您可以随时<a class="ae nv" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank">探索更多</a>并扩展您的机器学习Web应用程序的功能。</p></blockquote><p id="6664" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">关于这个项目的完整代码，可以参考我的<a class="ae nv" href="https://github.com/Digaari/Streamlit-ML-WebAPP" rel="noopener ugc nofollow" target="_blank"> GitHub。</a></p><p id="26bf" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">保持安全直到下一次:3</p></div></div>    
</body>
</html>