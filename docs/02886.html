<html>
<head>
<title>Net Current Asset Value per Share with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 的每股流动资产净值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/net-current-asset-value-per-share-with-python-e6a31a8b6491?source=collection_archive---------38-----------------------#2020-03-19">https://towardsdatascience.com/net-current-asset-value-per-share-with-python-e6a31a8b6491?source=collection_archive---------38-----------------------#2020-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="64c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">筛选纳斯达克找出廉价公司</h2></div><p id="e4ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">每股净资产值(NCAVPS) </strong>是<a class="ae lb" href="https://en.wikipedia.org/wiki/Benjamin_Graham" rel="noopener ugc nofollow" target="_blank">本杰明·格拉哈姆</a>用来识别有吸引力股票的指标之一。他积极寻找低于每股流动资产净值的股票。</p><p id="dada" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将使用 Python 构建一个脚本来计算<strong class="kh ir">的每股净流动资产价值，并自动识别低于其 NCAVPS 的股票交易。</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/90272ffe1cbe650b917274d1b7c6f4c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*NeO_aNqnccUyOcQW"/></div><p class="lk ll gj gh gi lm ln bd b be z dk translated">照片由<a class="ae lb" href="https://www.pexels.com/@jiawei-cui-1213899?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lo">佳伟崔</strong> </a>发自<a class="ae lb" href="https://www.pexels.com/photo/aerial-photography-of-city-buildings-under-cloudy-sky-2310885/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lo"> Pexels </strong> </a></p></figure><h1 id="d39d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">什么是每股净资产值(NCAVPS)？</h1><p id="d5f9" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">NCAVPS 是一种衡量公司价值的方法，不同于其他传统的估值方法，后者更多地关注不同的指标，如收益。<a class="ae lb" href="https://investinganswers.com/dictionary/n/net-current-asset-value-share-ncavps" rel="noopener ugc nofollow" target="_blank"> NACVPS 取流动资产减去总负债，所得结果除以发行在外的股票总数。</a></p><p id="244d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">NCAVPS =(流动资产-总负债)/已发行股票</p><p id="345c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当股票交易低于 NCAVPS 价值时，这意味着公司交易低于其清算价值，因此这可能被视为一个良好的买入机会。格雷厄姆感兴趣的是交易价值低于其 NCA VPS 66%的公司。让我们建立一个算法，让 Python 为我们找到这样的公司。</p><h1 id="4b7d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">Python 的每股流动资产净值</h1><p id="0c34" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">现在让我们构建一个脚本，它将为我们自动执行以下财务分析:</p><ol class=""><li id="a17e" class="mm mn iq kh b ki kj kl km ko mo ks mp kw mq la mr ms mt mu bi translated">在纳斯达克综合指数中搜索 100 只股票，并将每只股票添加到 Python 列表中。</li><li id="faff" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">使用自动收报机从免费 API 中提取第一点中找到的每只股票的<strong class="kh ir"> <em class="na">流动资产、总负债和已发行股票</em> </strong></li><li id="9bec" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">计算<strong class="kh ir"> <em class="na">每股流动资产净值【NCAVPS】</em></strong></li><li id="246d" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">检查公司交易的 NCAVPS 是否少于 67%</li><li id="333f" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la mr ms mt mu bi translated">如果交易量低于 NCAVPS 的 67%,将股票添加到 Python 字典中</li></ol><p id="ca83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了搜索在纳斯达克交易的公司并获得财务报表信息，我们将使用一个包含大量免费财务数据的 API。</p><p id="fcac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导入所有包后，我们要做的第一件事是发出一个 http 请求，获取纳斯达克综合指数中的 100 只股票。您可以在下面的<a class="ae lb" href="https://financialmodelingprep.com/api/v3/search?query=&amp;limit=100&amp;exchange=NASDAQ" rel="noopener ugc nofollow" target="_blank">链接</a>中看到示例响应。</p><p id="e535" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">响应是一个字典列表。每本词典都包含一种股票的信息。为了提取每家公司的股票代码，我们只需要提取关键的<em class="na">符号</em>的值。</p><p id="b1d5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们将每个符号附加到一个 Python 列表中。这正是我们用下面的代码实现的。</p><pre class="ld le lf lg gt nb nc nd ne aw nf bi"><span id="82f0" class="ng lq iq nc b gy nh ni l nj nk">import requests<br/>import pandas as pd<br/><br/>NetCurrentAssetValueperShare = {}<br/><br/>querytickers = requests.get(f'https://financialmodelingprep.com/api/v3/search?query=&amp;limit=100&amp;exchange=NASDAQ')<br/>querytickers = querytickers.json()<br/><br/>list_500 = querytickers<br/>stocks = []<br/>count = 0<br/>for item in list_500:<br/>    count = count +1<br/>    #Stop after storing 100 stocks<br/>    if count &lt; 100:<br/>        stocks.append(item['symbol'])<br/>print(stocks)<br/>['HRTX', 'GRIF', 'WAFU', 'VOD', 'TRMD', 'KTOV', 'HYXE', 'CLXT', 'TRMB', 'NBL', 'IGIB', 'CDMOP', 'VALX', 'IBTA', 'IBTE', 'FHK', 'IDXG', 'PIE', 'EMMA', 'IBTH', 'SGBX', 'SIFY', 'SUMR', 'TRVI', 'RNSC', 'PLUG', 'AGNC', 'BLUE', 'CENTA', 'BL', 'BSMO', 'ARCE', 'ARCB', 'ARCC', 'AEIS', 'AMTBB', 'CDLX', 'PFIE', 'BYND', 'RFEU', 'DFBH', 'TTD', 'TURN', 'CECE', 'COWN', 'PRPO', 'AXNX', 'BJRI', 'PLC']</span></pre><h1 id="f8d3" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">用 Python 提取财务报表数据</h1><p id="30a2" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">现在我们有了多家公司的报价器，我们可以使用它们来提取每家公司的<strong class="kh ir"> <em class="na">资产负债表</em> </strong>数据。我们将遍历每个公司，并发出一个 http 请求来获得:</p><ul class=""><li id="d17f" class="mm mn iq kh b ki kj kl km ko mo ks mp kw mq la nl ms mt mu bi translated">流动资产</li><li id="2cc2" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la nl ms mt mu bi translated">负债总额</li><li id="fb86" class="mm mn iq kh b ki mv kl mw ko mx ks my kw mz la nl ms mt mu bi translated">已发行股票</li></ul><p id="aec8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">API 端点将公司的股票代码作为参数。我们将把它作为<em class="na"> {company} </em>传递给每个循环迭代中的 url。检查在<a class="ae lb" href="https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/AAPL?period=quarter" rel="noopener ugc nofollow" target="_blank">以下链接</a>中获得的响应。</p><p id="80fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">在<em class="na">键</em> <em class="na">金融</em> </strong>中，我们有一个字典列表，我们只想保留列表[0]中的第一个元素，因为它代表最近的季度。我们可以通过使用如下代码所示的相应键来提取流动资产和总负债:</p><pre class="ld le lf lg gt nb nc nd ne aw nf bi"><span id="967f" class="ng lq iq nc b gy nh ni l nj nk">for company in stocks:<br/>    Balance_Sheet = requests.get(f'https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/{company}?period=quarter')<br/><br/>    Balance_Sheet = Balance_Sheet.json()<br/>    try:<br/>        total_current_assets = float(Balance_Sheet['financials'][0]['Total current assets'])<br/>        total_liabilities = float(Balance_Sheet['financials'][0]['Total liabilities'])<br/>        sharesnumber = requests.get(f'https://financialmodelingprep.com/api/v3/enterprise-value/{company}')<br/>        sharesnumber = sharesnumber.json()<br/>        sharesnumber = float(sharesnumber['enterpriseValues'][0]['Number of Shares'])<br/>       <br/>        NCAVPS = (total_current_assets-total_liabilities)/sharesnumber<br/>        NetCurrentAssetValueperShare[company] = NCAVPS<br/>    except:<br/>        pass</span></pre><p id="57fa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以从不同的 API 端点提取已发行股票的数量，从而为我们提供关于公司的<a class="ae lb" href="https://financialmodelingprep.com/api/v3/enterprise-value/AAPL?period=quarter" rel="noopener ugc nofollow" target="_blank">企业价值的信息。</a></p><p id="c81f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了所有需要的信息，我们可以很容易地计算每只股票的 NCAVPS，并将其添加到字典中。</p><p id="6305" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，除了之外，我还使用了<em class="na"> try </em>和<em class="na">，以便在 API 请求过程中遇到错误时，脚本不会被中断。</em></p><h1 id="c3f4" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">解释每股净资产值(NCAVPS)</h1><p id="773c" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">根据本杰明·格拉哈姆的说法，投资者应该寻找股价不超过其每股 NCAV 67%的公司。67%代表一个安全边际，因为一些流动资产(即存货)可能不那么容易转换成现金。</p><p id="3f11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以在脚本中通过获取股票价格并将其与 NCAVPS 进行比较来实现这一点。我们只会将 NCAVPS 比股价低 67%或更低的股票添加到我们的字典中。</p><pre class="ld le lf lg gt nb nc nd ne aw nf bi"><span id="b4f1" class="ng lq iq nc b gy nh ni l nj nk">price = float(sharesnumber['enterpriseValues'][0]['Stock Price']) <br/>    <br/>if NCAVPS &lt; 0.67 * price:<br/>     NetCurrentAssetValueperShare[company] = NCAVPS</span></pre><h1 id="96fc" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">包扎</h1><p id="e6f3" class="pw-post-body-paragraph kf kg iq kh b ki mh jr kk kl mi ju kn ko mj kq kr ks mk ku kv kw ml ky kz la ij bi translated">现在，如果我们打印我们的 NetCurrentAssetValueperShare 字典，我们会得到下面的结果:</p><pre class="ld le lf lg gt nb nc nd ne aw nf bi"><span id="246b" class="ng lq iq nc b gy nh ni l nj nk">print(NetCurrentAssetValueperShare) </span><span id="b9ab" class="ng lq iq nc b gy nm ni l nj nk">{}</span></pre><p id="a213" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不幸的是，我们的脚本返回了一个空字典，这意味着目前在纳斯达克没有股票符合我们的标准。这是有道理的，因为发现公司交易低于其清算价值实际上并不常见。</p><p id="4757" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请随意搜索其他交易所的股票。你可能比我幸运，拿回一些公司。</p><p id="bcac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">参见下面用 Python 计算<strong class="kh ir">每股净资产值的脚本。很高兴在<a class="ae lb" href="https://twitter.com/CodingandF" rel="noopener ugc nofollow" target="_blank">我的推特账户</a>继续讨论。</strong></p><pre class="ld le lf lg gt nb nc nd ne aw nf bi"><span id="2e55" class="ng lq iq nc b gy nh ni l nj nk">import requests<br/>import pandas as pd<br/><br/>NetCurrentAssetValueperShare = {}<br/><br/>querytickers = requests.get(f'https://financialmodelingprep.com/api/v3/search?query=&amp;limit=1000&amp;exchange=NASDAQ')<br/>querytickers = querytickers.json()<br/><br/>list_500 = querytickers<br/>stocks = []<br/>count = 0<br/>for item in list_500:<br/>    count = count +1<br/>    #Stop after storing 50 stocks<br/>    if count &lt; 500:<br/>        stocks.append(item['symbol'])<br/><br/><br/><br/>for company in stocks:<br/>    Balance_Sheet = requests.get(f'https://financialmodelingprep.com/api/v3/financials/balance-sheet-statement/{company}?period=quarter')<br/><br/>    Balance_Sheet = Balance_Sheet.json()<br/>    try:<br/>        total_current_assets = float(Balance_Sheet['financials'][0]['Total current assets'])<br/>        total_liabilities = float(Balance_Sheet['financials'][0]['Total liabilities'])<br/>        sharesnumber = requests.get(f'https://financialmodelingprep.com/api/v3/enterprise-value/{company}')<br/>        sharesnumber = sharesnumber.json()<br/>        sharesnumber = float(sharesnumber['enterpriseValues'][0]['Number of Shares'])<br/>       <br/>        NCAVPS = (total_current_assets-total_liabilities)/sharesnumber<br/>        <br/>        price = float(sharesnumber['enterpriseValues'][0]['Stock Price']) <br/>        #only companies where NCAVPS is below the stock price<br/>        if NCAVPS &lt; 0.67 * price:<br/>            NetCurrentAssetValueperShare[company] = NCAVPS<br/>    except:<br/>        pass<br/>    <br/>    <br/>NetCurrentAssetValueperShare</span></pre></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="9159" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="na">原载于 2020 年 3 月 19 日 https://codingandfun.com</em><em class="na"/><a class="ae lb" href="https://codingandfun.com/net-current-asset-value-per-share-with-python/" rel="noopener ugc nofollow" target="_blank"><em class="na">。</em></a></p></div></div>    
</body>
</html>