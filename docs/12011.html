<html>
<head>
<title>7 Pandas Functions That I Use the Most</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我最常用的 7 个熊猫功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/7-pandas-functions-that-i-use-the-most-b83ddbaf53bf?source=collection_archive---------18-----------------------#2020-08-19">https://towardsdatascience.com/7-pandas-functions-that-i-use-the-most-b83ddbaf53bf?source=collection_archive---------18-----------------------#2020-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="547a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">数据分析过程中最常用的函数。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8e933ec624609b933617a3b338138423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dQWYfinE8FzLp0glHZb7hw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@icons8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Icons8 团队</a>在<a class="ae ky" href="https://unsplash.com/s/photos/seven?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="4ac4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas 是一个著名的数据分析和操作库。它提供了许多加快数据分析和探索过程的功能和方法。</p><p id="b077" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在丰富的函数和方法选择中，有些是更常用的。它们提供了一种快速获得手头数据的基本理解的方法。</p><p id="a11e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将介绍我在数据分析项目中最常用的 7 个 pandas 函数。</p><p id="9d25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将使用 Kaggle 上的<a class="ae ky" href="https://www.kaggle.com/uciml/pima-indians-diabetes-database" rel="noopener ugc nofollow" target="_blank">糖尿病数据集</a>。让我们首先将数据集读入熊猫数据帧。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3460" class="ma mb it lw b gy mc md l me mf">import pandas as pd<br/>import numpy as np</span><span id="6d2d" class="ma mb it lw b gy mg md l me mf">diabetes = pd.read_csv("/content/diabetes.csv")</span></pre><h1 id="cc39" class="mh mb it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated"><strong class="ak"> 1。头尾</strong></h1><p id="c4d6" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">一旦我们将一个数据集读入 pandas 数据帧，我们就想看一看它以获得一个概览。最简单的方法是显示一些行。Head 和 tail 允许我们分别从数据帧的顶部和底部显示行。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="94fe" class="ma mb it lw b gy mc md l me mf">diabetes.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl nd"><img src="../Images/0177aac3e2bc256d77ddc77360113313.png" data-original-src="https://miro.medium.com/v2/format:webp/1*AM-JaO4W-utH0WDHhRBtlg.png"/></div></figure><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2608" class="ma mb it lw b gy mc md l me mf">diabetes.tail()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/d34c273114920444231fdf46f1edf4ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iejzppbC3vaeaLX4H1PCGw.png"/></div></div></figure><p id="ee6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认显示 5 行，但是我们可以通过传递我们想要显示的行数来调整它。例如，diabetes.head(10)将显示前 10 行。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="8e48" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated"><strong class="ak"> 2。努尼克</strong></h1><p id="2d3c" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">处理具有离散值的分类数据或要素时，了解唯一值的数量非常重要。这是数据探索的重要一步。</p><p id="01b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一种方法是使用<strong class="lb iu"> value_counts </strong>函数，该函数返回一个 pandas 系列，其中包含一列中的唯一值以及每个值出现的次数。这个序列的长度是唯一值的个数。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="958e" class="ma mb it lw b gy mc md l me mf">len(diabetes.Pregnancies.value_counts())<br/>17</span></pre><p id="f5c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现 nunique 更容易使用:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="81b3" class="ma mb it lw b gy mc md l me mf">diabetes.Pregnancies.nunique()<br/>17</span></pre><p id="9371" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还可以将其应用于整个数据帧，并查看每列中唯一值的数量，我认为这使 nunique 更具功能性:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="81d0" class="ma mb it lw b gy mc md l me mf">diabetes.nunique()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ef3b1a5c06fca3d0d5f9a36dc3a5e098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*zTMcWECe_Q2TFXLvfbjtMA.png"/></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="b3c0" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated"><strong class="ak"> 3。描述</strong></h1><p id="b031" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">Describe 函数通过提供基本统计数据(如平均值、中值和标准偏差)来快速概述数字列。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="51ee" class="ma mb it lw b gy mc md l me mf">diabetes.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/641493500bc9d4504a5035d539e2973d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INdymKrGvuTlfWaULSCRXQ.png"/></div></div></figure><p id="af8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">25%、50%和 75%是百分位数。50%也称为<strong class="lb iu">中值</strong>，是所有值排序时位于中间的值。25%是第一个四分位数<strong class="lb iu">因此 25%的值低于该点。你可以把它想象成一个列的下半部分的中值。同样，75%是第三个四分位数</strong>。</p><p id="dfe6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基本的统计数据给了我们宝贵的见解。例如，通过比较平均值和中间值(50%)，我们可以了解异常值。如果平均值远高于中值，则在上端有异常值。基本统计数据也给我们提供了数据分布的概况。</p><p id="fc8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以使用<strong class="lb iu">百分点</strong>参数选择不同的百分点进行显示。默认值为[.25、. 50、. 75]。例如，除默认值外，百分点=[.1，. 25，. 5，. 75，.. 9]将显示 10%和 90%的百分点。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="9761" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated"><strong class="ak"> 4。Isna </strong></h1><p id="e3c2" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/handling-missing-values-with-pandas-b876bf6f008f">处理缺失值</a>是构建稳健数据分析流程的关键步骤。缺少的值应该是最优先考虑的，因为它们对任何分析的准确性都有重大影响。</p><p id="d3f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Isna </strong>函数返回用布尔值填充的数据帧，true 表示缺少值。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f33e" class="ma mb it lw b gy mc md l me mf">diabetes.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/f74d07e13ed37b19edaa6d913bf6e565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AkYK4W48Om2k3f895Rs0lg.png"/></div></div></figure><p id="f88c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除非您想要逐个单元地分析数据帧，否则 isna 应该与聚合结合使用。isna()。any()指示列中是否有任何缺少的值，而 isna()。sum()返回列中缺失值的数量。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0f5b" class="ma mb it lw b gy mc md l me mf">diabetes.isna().any()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/d869b605ede1d47ffde6f8ee79cca8d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*OohfRGammgJprLxFflILdw.png"/></div></figure><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="32e8" class="ma mb it lw b gy mc md l me mf">diabetes.isna().sum()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/189824ab09bd550eedca0ca1cbe7cf02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*z6lSEPcPGgrmQ_o6QFa_Xw.png"/></div></figure><p id="c79d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们拥有的数据集没有任何缺失值，但这种情况在现实生活中不太可能发生。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="300a" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated"><strong class="ak"> 5。分组依据</strong></h1><p id="3c59" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/pandas-groupby-explained-453692519d0"> Pandas groupby </a>函数是探索数据的绝佳工具。它更容易揭示变量之间的潜在关系。下图概述了<strong class="lb iu"> groupby </strong>函数的功能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/a4bfa776a0b6e64d0d8ea8f09975ad62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XVlrOuSBNKwIZpPj.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">熊猫分组(图片由作者提供)</p></figure><p id="94fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有两个特征。一个是颜色，它是分类特征，另一个是数值特征，即值。我们希望<strong class="lb iu">按照</strong>颜色对值<strong class="lb iu">进行分组，并计算不同颜色值的<strong class="lb iu">平均值</strong>(或任何其他集合)。然后最后<strong class="lb iu">根据平均值对颜色进行排序</strong>。</strong></p><p id="341c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，您可以创建更复杂的分组操作，但概念是相同的。</p><p id="b65b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们用数据集创建一个简单的分组操作。下面的代码将向我们展示糖尿病阳性和阴性人群的平均葡萄糖值。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="d654" class="ma mb it lw b gy mc md l me mf">diabetes[['Outcome','Glucose']].groupby('Outcome').mean()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/de665c8d1ce74737ea65891d22b91464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*M8uV3zW4sUkKttA4vQQYlA.png"/></div></figure><p id="8562" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如所料，糖尿病阳性患者的血糖值较高(1)。</p><p id="0dda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在数据集中没有很多分类变量，所以我们可以在这个数据集上用 groupby 函数做的事情是有限的。然而，如果你想阅读更多关于 groupby 函数的内容，并看到更复杂的例子，我有一个帖子专门讨论熊猫 groupby 函数。</p><div class="ny nz gp gr oa ob"><a rel="noopener follow" target="_blank" href="/pandas-groupby-explained-453692519d0"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">熊猫分组——解释</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">如何高效利用熊猫的分组功能</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">towardsdatascience.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ks ob"/></div></div></a></div></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="9add" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated">6。数据类型和数据类型</h1><p id="4b58" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated">我们需要将值存储在适当的数据类型中。否则，我们可能会遇到错误。对于大型数据集，正确的数据类型选择会极大地影响内存使用。例如，对于分类数据来说，“分类”数据类型比“对象”数据类型更合适，尤其是当类别的数量远小于行数时。</p><p id="ee28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Dtypes </strong>显示每一列的数据类型。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="15d7" class="ma mb it lw b gy mc md l me mf">diabetes.dtypes</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/39f3ed457817564b5cbf345af12eeb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*uqsZZk4_UzRQh1W7oQOjXA.png"/></div></div></figure><p id="3c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“血压”列的数据类型不合适。应该是 int 或者 float。对象数据类型可以是存储字符串或分类数据。</p><p id="42a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以很容易地用<strong class="lb iu"> astype </strong>函数改变数据类型。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a3c5" class="ma mb it lw b gy mc md l me mf">diabetes.BloodPressure = diabetes.BloodPressure.astype('int64')</span><span id="747b" class="ma mb it lw b gy mg md l me mf">diabetes.dtypes</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/af1fabdfd499a414feb10caf1d84c963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*rLdPYsTW1epnHUVT74beuA.png"/></div></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="9646" class="mh mb it bd mi mj nm ml mm mn nn mp mq jz no ka ms kc np kd mu kf nq kg mw mx bi translated"><strong class="ak"> 7。形状和尺寸</strong></h1><p id="3c5b" class="pw-post-body-paragraph kz la it lb b lc my ju le lf mz jx lh li na lk ll lm nb lo lp lq nc ls lt lu im bi translated"><strong class="lb iu"> Shape </strong>可以用在 numpy 数组、pandas 系列和 dataframes 上。它显示维度的数量以及每个维度的大小。</p><p id="1024" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为数据帧是二维的，所以 shape 返回的是行数和列数。它衡量我们拥有多少数据，是数据分析过程的关键输入。</p><p id="4e45" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，在设计和实现机器学习模型时，行和列的比率非常重要。如果我们没有足够的关于特征(列)的观察值(行),我们可能需要应用一些预处理技术，如降维或特征提取。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4e0d" class="ma mb it lw b gy mc md l me mf">diabetes.shape<br/>(768, 9)</span></pre><p id="1830" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们把它用在一个实际上是熊猫系列的专栏上。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4d43" class="ma mb it lw b gy mc md l me mf">diabetes.Glucose.shape<br/>(768,)</span></pre><p id="fe3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">顾名思义，Size 返回数据帧的大小，即行数乘以列数。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="740c" class="ma mb it lw b gy mc md l me mf">diabetes.size<br/>6912</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="1698" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>