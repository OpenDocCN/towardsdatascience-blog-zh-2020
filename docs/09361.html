<html>
<head>
<title>Matching: Koalas On Fire — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">配对:着火的考拉——第一部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/matching-koalas-on-fire-part-1-17691bb85c23?source=collection_archive---------37-----------------------#2020-07-04">https://towardsdatascience.com/matching-koalas-on-fire-part-1-17691bb85c23?source=collection_archive---------37-----------------------#2020-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d145" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">什么是(多重)匹配？为什么它在观察研究和影响评估中很重要？</strong></h2></div><h2 id="316b" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">合著</strong><a class="lb lc ep" href="https://medium.com/u/cbf0012f471c?source=post_page-----17691bb85c23--------------------------------" rel="noopener" target="_blank">T5】马加利德布鲁因</a></h2><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/1b22b30742931933f10d57d46048b32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8isR1rMA34zgGOLx5m7-MQ.jpeg"/></div></div><p class="lp lq gj gh gi lr ls bd b be z dk translated">图片由<a class="ae lt" href="https://unsplash.com/@jwwhitt" rel="noopener ugc nofollow" target="_blank"> Jordan Whitt </a>在<a class="ae lt" href="https://unsplash.com/photos/EerxztHCjM8" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><blockquote class="lu lv lw"><p id="fb83" class="lx ly lz ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms mt ij bi translated"><strong class="ma ir"><em class="iq">TL；DR: </em> </strong> <em class="iq">匹配是一种计算工具，用于提高因果推理的健壮性或可信度。为此，它将来自治疗组的数据点与来自对照组的数据点配对——基于它们在所选特征上的相似性。</em>那又怎样？<em class="iq">匹配使得观察性研究中揭示的因果关系更有可能反映现实，从而可能导致更好的知情决策和政策。</em></p></blockquote><p id="3269" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">由于最近的森林火灾，树袋熊可能很快就会灭绝。但是这些自然灾害对这个可爱物种的生活有多大影响呢？</p><p id="3539" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">嗯，我们可以用<em class="lz">数据</em>来量化生活在有火的地区对考拉寿命的<em class="lz">影响</em>。把它作为一个因果推理的问题，我们感兴趣的是推断一种干预——火灾——对我们关心的结果——考拉的生计的治疗效果。</p><p id="c90a" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">当然，随机对照试验(RCT)和附带的实验数据将是理解这种因果关系的理想方法。然而，我们不想仅仅为了实验的目的而引发更多的森林大火。</p><p id="7ca0" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">所以，我们只剩下(假设的)<em class="lz">观测数据</em>了。</p><p id="7bac" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">不幸的是，观察数据有许多局限性，会影响测量的治疗效果。比如少吃桉树(<a class="ae lt" href="https://www.answers.com/Q/Do_koalas_and_pandas_eat_the_same_food" rel="noopener ugc nofollow" target="_blank">不是竹子——那是熊猫的考拉！)可能更容易早死，也更可能生活在“火热”的森林中。这是一个选择偏差的例子:我们的<em class="lz">单位</em>(考拉)具有某些特征(<em class="lz">协变量</em>)更有可能被“分配”<em class="lz">治疗</em>:生活在森林大火中。</a></p><p id="41b6" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">幸运的是，我们有一些工具来纠正这一点。介绍(*drumroll，please*):匹配！</p><h2 id="a33e" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">什么是匹配，我们为什么需要匹配？</strong></h2><p id="9b79" class="pw-post-body-paragraph lx ly iq ma b mb mu jr md me mv ju mg ko mw mj mk ks mx mn mo kw my mr ms mt ij bi translated">匹配就是它听起来的样子。我们将处理过的单元与具有相同背景特征的控制单元“匹配”。这种对数据的“处理”使我们能够得出更可靠的因果推断。</p><p id="b456" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">当我们想了解一个原因对一个结果的影响时，我们通常有一个控制组和一个处理组——在我们的例子中:来自安全和火热森林的考拉。我们假设除了治疗方法不同，各组是相同的。因此，从治疗组的相同平均值中减去对照组的结果变量的平均值将暗示潜在的治疗效果。当我们比较“暴躁的”考拉和“安全的”考拉的寿命(结果)时，假设除此之外它们是完全相同的样本种群(或者(1)它们在背景特征上完全相同，或者(2)它们从相同的种群中取样)，我们可以假设寿命的差异是由于生活在受火灾影响的森林中(治疗)造成的。但是这种协变量的完美平衡在大多数观察研究中太好而不真实。通常，治疗组和对照组没有完全相同的特征。例如，我们可能从两个不同的地区选择树袋熊，因此它们有不同的饮食。这种混杂变量影响了我们测量的治疗效果，限制了我们结论的稳健性。</p><p id="a534" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">因此，匹配试图创建一个在所选特征上与治疗组非常相似的对照组。在我们的例子中，我们试图有一个“安全的”树袋熊样本种群，它每年吃的桉树与“火热的”树袋熊样本种群一样多。</p><p id="3bc2" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">我们如何知道这些组在所选特征上是相似的？现在，最被接受的实践是基于距离度量来测量平衡。这是通过比较对照组和治疗组的背景特征的平均值的统计显著性检验来完成的:“安全的”树袋熊吃掉的平均食物量与“暴躁的”树袋熊吃掉的平均食物量。输出是 p 值:p 值越高，两组平均值的相似性越大。匹配正是为此而优化的！它选择“暴躁”和“安全”的树袋熊对，产生最高的可能 p 值。</p><p id="5a1a" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">通过匹配方法进行数据预处理越来越受欢迎和有用，特别是在衡量社会政策的影响时。以下是一些最近的例子:</p><ol class=""><li id="590f" class="mz na iq ma b mb mc me mf ko nb ks nc kw nd mt ne nf ng nh bi translated"><a class="ae lt" href="https://www.cambridge.org/core/journals/american-political-science-review/article/international-peacebuilding-a-theoretical-and-quantitative-analysis/2E28FC5F7DD0F30B097D83553312C023" rel="noopener ugc nofollow" target="_blank">联合国建设和平行动对维和成功的影响；</a></li><li id="be85" class="mz na iq ma b mb ni me nj ko nk ks nl kw nm mt ne nf ng nh bi translated"><a class="ae lt" href="https://siteresources.worldbank.org/EXTHDOFFICE/Resources/5485726-1295455628620/Impact_Evaluation_in_Practice.pdf" rel="noopener ugc nofollow" target="_blank">阿根廷工作福利计划“A Trabajar”对收入的影响；</a></li><li id="824d" class="mz na iq ma b mb ni me nj ko nk ks nl kw nm mt ne nf ng nh bi translated"><a class="ae lt" href="https://siteresources.worldbank.org/EXTHDOFFICE/Resources/5485726-1295455628620/Impact_Evaluation_in_Practice.pdf" rel="noopener ugc nofollow" target="_blank">荜茇水对印度儿童健康的影响。</a></li></ol><p id="94df" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">酷，所以我们想匹配。但是…</p><h2 id="ca61" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">我们如何着手匹配呢？</strong></h2><p id="c663" class="pw-post-body-paragraph lx ly iq ma b mb mu jr md me mv ju mg ko mw mj mk ks mx mn mo kw my mr ms mt ij bi translated">我们用哪些「安全」的考拉做被处理考拉的火柴？通常，我们选择在所选的重要特征上与处理单元最相似的控制单元。对于我们的考拉案例(为了简单起见)，我们只考虑一个匹配的协变量:每年食用的桉树数量。我们要确保在火灾之前(例如 2018 年),处理组和对照组的食物消耗量<em class="lz">相匹配。否则，它们各自的协变量值可能会受到治疗(2019 年的火灾)的影响，并引入偏差。</em></p><p id="edbc" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">我们如何决定哪个控制单元最像被治疗的单元？我们简单地把吃同样数量(以公斤计)食物的“安全的”考拉和“暴躁的”考拉配对。</p><p id="3b4d" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">如果我们有两只对照考拉，它们的食物消耗量与我们要匹配的“暴躁的”考拉相同或等距，参数“用领带匹配”允许我们使用两者并获得两者的平均值(同样适用于三只、四只等)。).</p><p id="37eb" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">但是如果我们没有任何控制单位(“安全的”树袋熊)和治疗单位(“暴躁的”树袋熊)吃得差不多，那会怎么样呢？我们必须使用这种糟糕的匹配，或者我们可以从我们的最终数据集中完全排除处理过的单元(“火热的”无尾熊，没有“安全的”有相同食欲的无尾熊)。</p><p id="0604" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">或者——我们可以用<strong class="ma ir"> <em class="lz">多个</em>匹配</strong>。多重匹配包括将处理过的单元与多个控制单元配对。在实践中，我们决定了一些(<em class="lz"> M </em>)的“安全”考拉，作为我们“暴躁”考拉的复合搭配。如果我们为每只“暴躁”的考拉决定两次比赛(<em class="lz"> M </em> = 2)，那么两只与“暴躁”考拉最相似的“安全”考拉的食物消耗量被平均(被赋予 0.5 的权重)。</p><p id="6ef1" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">这有什么了不起的？</p><p id="6c50" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">我们可以达到更好的平衡。<br/> 如何？好吧，如果我们在对照组中没有处理过的单元的精确匹配，那么我们的来自多重匹配的复合匹配实际上可以比最接近的匹配更好地接近处理过的值。假设我们想要匹配一只每年吃 200 公斤的考拉，并且正在考虑两只潜在的分别吃 179 和 220 公斤的考拉。一对一的匹配(<em class="lz"> M </em> =1)会将“安全的”树袋熊与“暴躁的”树袋熊配对，后者吃 220 公斤(因为这是最接近 200 公斤的)。现在让我们考虑多对一匹配，特别是二对一(<em class="lz"> M </em> =2):复合匹配将平均“吃掉”179 和 220 公斤——返回 199.5 公斤的<em class="lz">更接近的</em>匹配(基于食物消耗协变量)。我们可以得到像这样更好的匹配，不仅仅是这只食量一般的考拉，还有许多其他“安全”的考拉，极大地改善了治疗组和匹配后对照组之间的平衡。</p><p id="5aaf" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">很酷，对吧？！我们将在第二部分中探索更多的例子。</p><p id="ecd1" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">但是它变得更好；由于多对一匹配，我们不仅可以获得更好的平衡，而且…</p><p id="0ace" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated"><strong class="ma ir"> (2)我们使用更多的数据。<br/> </strong>在我们的数据集中，控制单元通常比处理单元多。事实上，到目前为止，尽管火灾数量不断增加，谢天谢地，仍然有更多的树袋熊的家没有着火。因此，在我们的数据集中,“安全的”树袋熊比“暴躁的”树袋熊多得多。这太棒了！(不仅仅是为了考拉和物种保护。)</p><p id="8ad3" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">通常，我们使用的数据越多越好。大数定律确保了我们纳入的单位越多——样本量越大，我们的结果就越有可能不是由数据的随机性或特质造成的(<em class="lz">方差</em>)。多重匹配，通过使用来自对照组的多个(两个，三个，四个，…，也取决于您设置的<em class="lz"> M </em>单位)用于每个处理单位，最大化样本数据集的使用，并且可以<a class="ae lt" href="https://stats.stackexchange.com/questions/129885/why-does-increasing-the-sample-size-lower-the-sampling-variance" rel="noopener ugc nofollow" target="_blank">减少可变性</a>。</p><blockquote class="lu lv lw"><p id="b175" class="lx ly lz ma b mb mc jr md me mf ju mg mh mi mj mk ml mm mn mo mp mq mr ms mt ij bi translated"><strong class="ma ir">准备看如何？在下一部分中，我们将进一步探讨多重匹配。退房部分 2 </strong> <a class="ae lt" href="https://medium.com/@debruynmagali/matching-koalas-on-fire-part-2-71083b81b50b" rel="noopener"> <strong class="ma ir">这里</strong> </a> <strong class="ma ir">！我们试图理解多重匹配何时以及如何可能更好。我们将寻求发现一个最佳的匹配比例。</strong></p></blockquote></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><p id="644b" class="pw-post-body-paragraph lx ly iq ma b mb mc jr md me mf ju mg ko mi mj mk ks mm mn mo kw mq mr ms mt ij bi translated">然而，当我们的数据集变得非常大时(即我们正在处理“大数据”)，这种概括就不太适用了。例如，更多信息见<a class="ae lt" href="https://ascpt.onlinelibrary.wiley.com/doi/pdf/10.1111/cts.12178" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h2 id="4276" class="kf kg iq bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">T3】鸣谢 T5】</strong></h2><p id="9eef" class="pw-post-body-paragraph lx ly iq ma b mb mu jr md me mv ju mg ko mw mj mk ks mx mn mo kw my mr ms mt ij bi translated"><em class="lz">感谢</em><a class="ae lt" href="https://medium.com/@viniciusmss" rel="noopener"><em class="lz">vini cius Miranda</em></a><em class="lz">与我们一起研究我们的想法，并分享他关于因果推理和匹配的细致入微的知识，特别是关于共同支持的主题。我们还要感谢 Alexis Diamond，他鼓励并指导我们分析多对一匹配和一对一匹配的结构。</em></p></div></div>    
</body>
</html>