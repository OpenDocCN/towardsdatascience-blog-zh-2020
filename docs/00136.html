<html>
<head>
<title>GPU Geospatial with OmniSci (Open Source) — Experimental Failures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OmniSci(开源)的GPU地理空间—实验失败</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/gpu-geospatial-with-omnisci-open-source-experimental-failures-c559cc9d7bc3?source=collection_archive---------28-----------------------#2020-01-04">https://towardsdatascience.com/gpu-geospatial-with-omnisci-open-source-experimental-failures-c559cc9d7bc3?source=collection_archive---------28-----------------------#2020-01-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7b62" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">GPU数据库使地理空间工作流更快吗？是的(但也不总是像本文讨论的那样)…</h2></div><p id="c1af" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我最近一直在尝试不同的方法，看看是否有一些方法不需要向大型云提供商支付数百或数千美元来进行数据科学研究。有了我可信赖的QNAP NAS和一个基本的消费级GPU，我已经在各种工具上尝试了多个用例。</p><blockquote class="le lf lg"><p id="e5e2" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">参见上一篇文章:<a class="ae ll" rel="noopener" target="_blank" href="/gpu-datascience-converting-csv-to-parquet-orc-faster-cheaper-than-using-a-cluster-c4b20d969009">使用比集群更快的GPU将CSV转换为ORC/Parquet</a></p></blockquote><p id="749f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">今天我正在试用OmniSci(【https://www.omnisci.com/】T2)，这是一个支持地理空间功能的GPU支持的数据库，我的计划是创建一个简单的实验来测试它——不幸的是，事情并没有那么顺利！</p><h1 id="b839" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">设置/安装</h1><p id="01ea" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">QNAP的容器站基本上是docker的UI。首先，我只需在docker注册表中搜索OmniSci，然后单击“创建”。我将GPU附加到docker容器上，这就是大部分内容。</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mj"><img src="../Images/97da79d8a2dd976e573dbcb46379b1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66rlWje-wcb5bsDKsnjqTQ.png"/></div></div></figure><p id="ed25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于我使用的是开源版本，所以没有太多的UI，所以我SSH到我的QNAP，并使用<em class="lh"> docker exec -ti </em>连接到docker容器，开始加载一些数据</p><h1 id="533d" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">正在加载数据…</h1><p id="a566" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">你说加载数据？多么古老的学校。</p><p id="9a2c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">到了这个时候，我已经感到相当厌烦了。与Redshift非常相似，如果您希望看到这个数据库引擎的好处，您必须将数据加载到其中。</p><p id="a2bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我使用了其他测试中使用的相同数据集，我创建了一个DDL语句来创建一个表，然后使用COPY命令来获取我的拉斯维加斯数据集</p><figure class="mk ml mm mn gt mo"><div class="bz fp l di"><div class="mv mw l"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">将数据加载到OmniSci</p></figure><p id="7f17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我第一次失望，我已经有一段时间没有真正地将数据加载到“数据库”中了(BigQuery除外)——更喜欢直接在ORC或Parquet之类的列文件上工作。</p><p id="a6fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该过程在<strong class="kk iu"> 53分钟后结束(从SATA驱动器加载)</strong></p><h1 id="bd69" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">第一个基本查询</h1><p id="f9b8" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">OmniSci首先要求我通过发出<strong class="kk iu"> <em class="lh"> \gpu </em> </strong>将会话切换到GPU模式</p><p id="af2c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好的，首先让我们检查一下数据是否都已正确加载，让我们运行一些计数查询，然后让我们尝试一些真正的地理空间内容。</p><p id="2c44" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像往常一样，任何新的数据库引擎都有相当多的尝试和错误，有些事情不能像预期的那样工作，而其他字段需要我不知道的特定数据类型。此外，至少可以说，有许多武断的限制虽然不是交易破坏者，但却是一种烦恼:</p><figure class="mk ml mm mn gt mo"><div class="bz fp l di"><div class="mv mw l"/></div><p class="mx my gj gh gi mz na bd b be z dk translated">用SQL表达的Braindump</p></figure><p id="7990" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="lh">所用时间:未知——我无法完成(我给了3个小时)</em> </strong></p><h2 id="81a4" class="nb ln it bd lo nc nd dn ls ne nf dp lw kr ng nh ly kv ni nj ma kz nk nl mc nm bi translated">值得注意的一点是:我看不到任何GPU活动</h2><p id="d211" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">容器将最大限度地利用其CPU，但GPU将坐在那里什么也不做——我假设这是因为它试图在GPU和CPU之间来回传递信息，或者只是试图在CPU上计划一切。</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nn"><img src="../Images/92e712811d996432b2cb3a655cdc8dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5oxon9gwlWcqvd6HFHD51w.png"/></div></div></figure><p id="5dbd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我通过“解释选择”验证了查询规划器正在使用GPU，但不幸的是，要么这个数据库平台需要比我目前拥有的更好的硬件，要么还有其他事情正在发生。<br/>不管怎样，看起来不像是<em class="lh">实际上是</em>在处理任何事情。我将联系OmniSci团队，看看是否有什么我能做的。</p><h1 id="f2e8" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">结论</h1><p id="4c56" class="pw-post-body-paragraph ki kj it kk b kl me ju kn ko mf jx kq kr mg kt ku kv mh kx ky kz mi lb lc ld im bi translated">我不确定这里的问题是什么——也许我的查询对于这个平台来说效率不高，也许对表进行连接比我目前使用的方法更好。如果我尝试一下，可以让它工作，我会更新文章。</p><p id="c1d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我有时间的时候，我也可能会通过他们在云服务上的免费试用重新审视这一点，但坦率地说，如果它甚至不能在我公认的疲惫的GPU上处理多边形地理空间计数中的一些基本点，那么我认为它真的无法与其他已经在传统上管理它的解决方案竞争。</p><blockquote class="no"><p id="d740" class="np nq it bd nr ns nt nu nv nw nx ld dk translated">寻找GPU地理空间解决方案的努力仍在继续…</p></blockquote><figure class="nz oa ob oc od mo gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ny"><img src="../Images/509d9efcaa8e117cc034b37e04a04e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_d2_ZnD0sKcHeNR3lDMkLw.png"/></div></div></figure></div></div>    
</body>
</html>