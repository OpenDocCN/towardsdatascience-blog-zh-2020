<html>
<head>
<title>Using Reduce in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中使用 Reduce</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-reduce-in-python-a9c2f0dede54?source=collection_archive---------8-----------------------#2020-08-14">https://towardsdatascience.com/using-reduce-in-python-a9c2f0dede54?source=collection_archive---------8-----------------------#2020-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7662" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 Python 中的 reduce 函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6d58782058c6c038fef94761322c29b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YpIpxMFZkP6cf1uV"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">凯文·Ku 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><h2 id="0d4f" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">介绍</h2><p id="688c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">Python 是一种面向对象的编程(OOP)语言。然而，它提供了一些提供函数式编程风格的工具。其中一些工具包括 map()、filter()和 reduce()函数。在本教程中，我们将探索 reduce()函数，并揭示它提供的多功能性和实用性。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="d5a2" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> <em class="na">贴图()和滤镜()函数在这里详细介绍:</em> </strong></p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/using-map-and-filter-in-python-ffdfa8b97520"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">在 Python 中使用地图和过滤器</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">如何使用 python 中内置的地图和过滤功能</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="0ae2" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用 For 循环</h2><p id="4a62" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">引入 reduce()函数的最佳方式是从一个问题开始，尝试用传统的方法解决它，使用 for 循环。然后，我们可以使用 reduce 函数尝试相同的任务。</p><p id="35b7" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">假设我们有一个数字列表，我们想返回他们的产品。换句话说，我们希望将列表中的所有数字相乘并返回一个值。我们可以使用 for 循环来实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><blockquote class="nv nw nx"><p id="8080" class="lv lw na lx b ly mv ju ma mb mw jx md ny mx mf mg nz my mi mj oa mz ml mm mn im bi translated">我们有我们的数字列表。我们想把这个列表中的数字相乘，得到它们的乘积。我们创建变量<strong class="lx iu"> product </strong>并将其设置为 1。然后，我们使用 for 循环遍历<strong class="lx iu"> num_list </strong>，并将每个数字乘以前一次迭代的结果。在循环通过<strong class="lx iu"> num_list </strong>之后，<strong class="lx iu">乘积</strong>或累加器将等于 120，这是列表中所有数字的乘积。</p></blockquote></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="fcef" class="ob la it bd lb oc od oe le of og oh lh jz oi ka ll kc oj kd lp kf ok kg lt ol bi translated">减少功能</h1><p id="280c" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">事实证明，我们可以使用 reduce 函数代替 for 循环来完成上述任务。reduce 函数可以接受三个参数，其中两个是必需的。两个必需的参数是:一个函数(它本身接受两个参数)和一个 iterable(比如一个列表)。第三个参数是初始化式，是可选的，因此我们将在后面讨论它。</p><blockquote class="om"><p id="e3d8" class="on oo it bd op oq or os ot ou ov mn dk translated">reduce(函数，可迭代[，初始值设定项])</p></blockquote><h2 id="d8e3" class="kz la it bd lb lc ow dn le lf ox dp lh li oy lk ll lm oz lo lp lq pa ls lt lu bi translated">导入减少</h2><p id="a286" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">reduce 函数在模块<a class="ae ky" href="https://docs.python.org/3/library/functools.html" rel="noopener ugc nofollow" target="_blank"> functools </a>中，该模块包含高阶函数。高阶函数是作用于或返回其他函数的函数。因此，为了使用 reduce 函数，我们要么需要导入整个 functools 模块，要么可以只从 functools 导入 reduce 函数:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="f4f4" class="kz la it pc b gy pg ph l pi pj">import functools</span><span id="aef5" class="kz la it pc b gy pk ph l pi pj">from functools import reduce</span></pre><p id="d90d" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu"> <em class="na">注意:</em> </strong> <em class="na">如果我们导入 functools，我们需要访问 reduce 函数，如下所示:functools.reduce(arguments)。如果我们只从 functools 模块导入 reduce 函数，我们只需输入 reduce(arguments)就可以访问 reduce 函数。</em></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="4696" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">探索归约函数</h2><p id="e286" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">如前所述，reduce 函数接受两个必需的参数:一个函数和一个 iterable。为了避免 reduce 函数和它作为参数的函数之间的混淆，我将 reduce 函数称为 reduce 。</p><p id="4720" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">reduce 接受的第一个参数，函数本身必须接受两个参数。Reduce 然后将这个函数累积地应用到 iterable 的元素上(从左到右)，并将其减少到一个值。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="e80f" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><strong class="lx iu">我们来看一个例子:</strong></p><p id="55f2" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">假设我们使用的 iterable 是一个列表，比如上面例子中的<strong class="lx iu"> num_list </strong>:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="a456" class="kz la it pc b gy pg ph l pi pj">num_list = [1,2,3,4,5]</span></pre><p id="b55b" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">我们用作 reduce 的第一个参数的函数如下:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="2da8" class="kz la it pc b gy pg ph l pi pj">def prod(x, y):<br/>    return x * y</span></pre><p id="e094" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><em class="na">这个 prod 函数接受两个参数:x 和 y。然后返回它们的乘积，即 x * y。</em></p><p id="5840" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">让我们分别传入<strong class="lx iu"> prod </strong>函数和<strong class="lx iu"> num_list </strong>作为我们的函数和 iterable，以减少:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="0edb" class="kz la it pc b gy pg ph l pi pj">from functools import reduce</span><span id="3fa5" class="kz la it pc b gy pk ph l pi pj">product = reduce(prod, num_list)</span></pre><blockquote class="nv nw nx"><p id="72f4" class="lv lw na lx b ly mv ju ma mb mw jx md ny mx mf mg nz my mi mj oa mz ml mm mn im bi translated">我们的 iterable 对象是<strong class="lx iu"> num_list </strong>，也就是 list: [1，2，3，4，5]。我们的函数<strong class="lx iu"> prod </strong>接受两个参数 x 和 y。Reduce 将从接受<strong class="lx iu"> num_list </strong>的前两个元素 1 和 2 开始，并将它们作为 x 和 y 参数传递给我们的<strong class="lx iu"> prod </strong>函数。<strong class="lx iu"> prod </strong>函数返回他们的乘积，即 1 * 2，等于 2。Reduce 随后将使用这个累加值 2 作为新的或更新的 x 值，并使用<strong class="lx iu"> num_list </strong>中的下一个元素 3 作为新的或更新的 y 值。然后，它将这两个值(2 和 3)作为 x 和 y 发送给我们的<strong class="lx iu"> prod </strong>函数，然后该函数返回它们的乘积 2 * 3 或 6。然后，这个 6 将被用作我们新的或更新的 x 值，并且<strong class="lx iu"> num_list </strong>中的下一个元素将被用作我们新的或更新的 y 值，即 4。然后，它将 6 和 4 作为我们的 x 和 y 值发送给<strong class="lx iu"> prod </strong>函数，后者返回 24。因此，我们的新 x 值是 24，我们的新 y 值是来自<strong class="lx iu"> num_list </strong>的下一个元素，即 5。这两个值作为我们的 x 和 y 值传递给<strong class="lx iu"> prod </strong>函数，然后<strong class="lx iu"> prod </strong>返回它们的乘积，24 * 5，等于 120。因此，reduce 接受一个可迭代对象，在本例中是<strong class="lx iu"> num_list </strong>，并将其缩减为一个值，120。然后将该值分配给变量 product。<strong class="lx iu">换句话说，x 参数用累积值更新，y 参数从 iterable 更新。</strong></p></blockquote></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ne"><a rel="noopener follow" target="_blank" href="/iterables-and-iterators-in-python-849b1556ce27"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">Python 中的迭代器和迭代器</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">Python 中的可迭代对象、迭代器和迭代</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="pl l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="14ce" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">第三个参数:初始化器</h2><p id="2cd5" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">还记得我们说过 reduce 可以接受可选的第三个参数，初始化器吗？它的默认值是无。如果我们传入一个初始化器，它将被 reduce 用作第一个 x 值(而不是 x 是 iterable 的第一个元素)。所以如果我们把上面例子中的数字 2 作为初始化式传入:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="8ead" class="kz la it pc b gy pg ph l pi pj">product = reduce(prod, num_list, 2)</span><span id="63c0" class="kz la it pc b gy pk ph l pi pj">print(product) #240</span></pre><p id="87ee" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">那么 x 和 y 的前两个值或自变量将分别是 2 和 1。所有后续步骤都是一样的。换句话说，在计算中，初始化器放在 iterable 的元素之前。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="16b9" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用 Lambda 表达式</h2><p id="34ae" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在上面的示例中，我们可以使用 lambda 表达式(或匿名函数)来显著缩短代码，而不是将 prod 作为函数传入:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="2429" class="kz la it pc b gy pg ph l pi pj">product = reduce(lambda x,y: x*y, num_list)</span></pre><p id="5436" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><em class="na">注意 lambda 表达式如何接受两个参数:x 和 y，然后返回它们的乘积 x * y。</em></p><p id="1d71" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">以下是关于如何使用 lambda 表达式的完整教程:</p><div class="nb nc gp gr nd ne"><a rel="noopener follow" target="_blank" href="/lambda-expressions-in-python-9ad476c75438"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">Python 中的 Lambda 表达式</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">如何用 python 写匿名函数</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">towardsdatascience.com</p></div></div><div class="nn l"><div class="pm l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="1034" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用 Reduce 的其他示例</h2><p id="bbe3" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">我们可以使用 reduce 的场景还有很多。</p><p id="fd50" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">例如，我们可以找到列表中数字的总和:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="b7e0" class="kz la it pc b gy pg ph l pi pj">num_list = [1,2,3,4,5]</span><span id="11d9" class="kz la it pc b gy pk ph l pi pj">sum = reduce(lambda x,y: x + y, num_list)</span><span id="f7fc" class="kz la it pc b gy pk ph l pi pj">print(sum) #15</span></pre><p id="ebf6" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">或者我们可以在列表中找到最大数量:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="7181" class="kz la it pc b gy pg ph l pi pj">num_list = [1,2,3,4,5]</span><span id="ff48" class="kz la it pc b gy pk ph l pi pj">max_num = reduce(lambda x,y: x if x &gt; y else y, num_list)</span><span id="131b" class="kz la it pc b gy pk ph l pi pj">print(max_num) #5</span></pre><p id="250c" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">或列表中的最小数量:</p><pre class="kj kk kl km gt pb pc pd pe aw pf bi"><span id="0b30" class="kz la it pc b gy pg ph l pi pj">num_list = [1,2,3,4,5]</span><span id="8d77" class="kz la it pc b gy pk ph l pi pj">min_num = reduce(lambda x,y: x if x &lt; y else y, num_list)</span><span id="4471" class="kz la it pc b gy pk ph l pi pj">print(min_num) #1</span></pre><p id="0d06" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated">还有很多其他的应用！</p><p id="cb57" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><em class="na">注意:Python 确实有内置函数，比如 max()、min()和 sum()，这些函数对于这三个例子来说更容易使用。然而，目标是展示如何使用 reduce()来完成许多不同的任务。</em></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="e05d" class="pw-post-body-paragraph lv lw it lx b ly mv ju ma mb mw jx md li mx mf mg lm my mi mj lq mz ml mm mn im bi translated"><em class="na">如果你喜欢阅读这样的故事，并想支持我成为一名作家，可以考虑注册成为一名灵媒会员。每月 5 美元，你可以无限制地阅读媒体上的故事。如果你用我的</em> <a class="ae ky" href="https://lmatalka90.medium.com/membership" rel="noopener"> <em class="na">链接</em> </a> <em class="na">注册，我会赚一小笔佣金。</em></p><div class="nb nc gp gr nd ne"><a href="https://lmatalka90.medium.com/membership" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">通过我的推荐链接加入媒体——卢艾·马塔尔卡</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">阅读卢艾·马塔尔卡的每一个故事(以及媒体上成千上万的其他作家)。您的会员费直接支持…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">lmatalka90.medium.com</p></div></div><div class="nn l"><div class="pn l np nq nr nn ns ks ne"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="bb0e" class="kz la it bd lb lc ld dn le lf lg dp lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h2><p id="aa34" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md li me mf mg lm mh mi mj lq mk ml mm mn im bi translated">在本教程中，我们学习了如何在 python 中导入和使用 reduce 函数。然后我们看到 lambda 表达式如何作为一个参数传入 reduce。最后，我们看到了一些如何使用 reduce 的例子。</p></div></div>    
</body>
</html>