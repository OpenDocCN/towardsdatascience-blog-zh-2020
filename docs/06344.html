<html>
<head>
<title>My top 4 functions to style the Pandas Dataframe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我设计熊猫数据框架的4大功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-top-4-functions-to-style-the-pandas-dataframe-932cdc79be39?source=collection_archive---------19-----------------------#2020-05-21">https://towardsdatascience.com/my-top-4-functions-to-style-the-pandas-dataframe-932cdc79be39?source=collection_archive---------19-----------------------#2020-05-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4152" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么你需要设计你的熊猫数据框架，以及如何去做</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0c0e77109c4be27b1a224019f2d7a221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S6U6XeszWcAa2vM7"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">paweczerwi ski在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="5c61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">熊猫数据框架是数据科学家分析数据时最常用的对象。虽然主要功能只是放置数据并进行分析，但我们仍然可以为多种目的设计数据框的样式；即对于<strong class="lb iu">呈现数据</strong>或<strong class="lb iu">更好的美观</strong>。</p><p id="58d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们以一个数据集为例。我会使用seaborn提供的“行星”数据进行学习。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="72d2" class="ma mb it lw b gy mc md l me mf">#Importing the modules<br/>import pandas as pd<br/>import seaborn as sns</span><span id="f6bd" class="ma mb it lw b gy mg md l me mf">#Loading the dataset<br/>planets = sns.load_dataset('planets')</span><span id="2920" class="ma mb it lw b gy mg md l me mf">#Showing 10 first row in the planets data<br/>planets.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/fd6619b13cc7e933994eb892931c944a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*CuM2hzd6meI_v67jZRZYOQ.png"/></div></figure><p id="5bce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以像下面这样设计我们以前的熊猫数据框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/1faa5d801f6f7e750aed89fc99c1c7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6dNHDCqbpuLo8UlsneGnA.png"/></div></div></figure><p id="25cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它现在看起来很丰富多彩，因为我把所有的东西都放在里面，但我会把我最喜欢的一些东西分解开来。这里有4个函数来设计我在日常工作中经常使用的熊猫数据框对象。</p><blockquote class="mj"><p id="06fc" class="mk ml it bd mm mn mo mp mq mr ms lu dk translated">“虽然主要功能只是放置数据并进行分析，但我们仍然可以为多种目的设计数据框的样式；即为了呈现数据<strong class="ak"> </strong>或<strong class="ak">更好的美感</strong></p></blockquote></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="5c1a" class="ma mb it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated"><strong class="ak"> 1。隐藏功能</strong></h2><p id="213f" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">有时当你做分析并向他人展示结果时，你只想展示最重要的方面。我知道当我向非技术人员展示我的数据框时，问题通常是关于他们默认数字中的索引，例如“这是什么数字？”。出于这个原因，我们可以尝试用下面的代码隐藏索引。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2e70" class="ma mb it lw b gy mc md l me mf">#Using hide_index() from the style function<br/> <br/>planets.head(10).style.hide_index()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/afff75592d9420c969f1215896d7382e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*ayJ9LSPehTn2E_bqex0gCQ.png"/></div></figure><p id="38c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，我们隐藏了我们的索引。这是一件简单的事情，但在工作环境中，我知道有时会成为一个问题。只是多了一个成为问题的栏目。</p><p id="0b00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以尝试用链接方法<strong class="lb iu">隐藏不必要的列</strong>。假设我不想显示“方法”和“年份”列，那么我们可以用下面的代码编写它。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5630" class="ma mb it lw b gy mc md l me mf">#Using hide_columns to hide the unnecesary columns</span><span id="3322" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.hide_index().hide_columns(['method','year'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0f0e5b87637914325c7758e54b6f8523.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*Sy20--kcAOKlJVoGOGFHDw.png"/></div></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="efeb" class="ma mb it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated"><strong class="ak"> 2。高亮功能</strong></h2><p id="9ec5" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">有时，我们希望展示我们的数据框架，只突出显示重要的数字，例如最高数字<strong class="lb iu"/>。在这种情况下，我们可以使用内置方法，用下面的代码突出显示它。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b98d" class="ma mb it lw b gy mc md l me mf">#Highlight the maximum number for each column</span><span id="c314" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.highlight_max(color = 'yellow')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/3c26e794d5bef7898819dee508bbf6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*bkKGYkJe501VQ36SMeOQZg.png"/></div></figure><p id="0763" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的数据框中，我们用黄色突出显示了每列中的最大数量。如果您想突出显示最小数字<strong class="lb iu">而不是</strong>，我们可以使用下面的代码。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8983" class="ma mb it lw b gy mc md l me mf">planets.head(10).style.highlight_min(color = 'lightblue')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/daf46778a3406edb6fd07417ee6fc779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*8qQfd3CJCQQj2rQ0H0SLBw.png"/></div></figure><p id="f161" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想连锁，我们也可以这样做。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4404" class="ma mb it lw b gy mc md l me mf">#Highlight the minimum number with lightblue color and the maximum number with yellow color</span><span id="00aa" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.highlight_max(color='yellow').highlight_min(color = 'lightblue')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/5f167fc9c921d930f5c9f4754378d51d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*UqVKwUxDrcaL5n62PtDwSA.png"/></div></figure><p id="917f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">实际上，您可以突出显示每一行中<strong class="lb iu">的最小或最大数量，而不是每一列。我在下面的代码中展示了它。</strong></p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="88dd" class="ma mb it lw b gy mc md l me mf">#Adding Axis = 1 to change the direction from column to row</span><span id="4a25" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.highlight_max(color = 'yellow', axis =1)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/bba8d1d98245b04fac82946217f1e52e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*s7bypJ-GW2JBHrTcK-PeIg.png"/></div></figure><p id="dfcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，现在改变轴是没有用的，因为它没有突出任何重要的信息。在每一列彼此差别不大的情况下，它会更有用。</p><p id="be46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，我们可以用下面的代码突出显示空值<strong class="lb iu"/>。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="504d" class="ma mb it lw b gy mc md l me mf">#Higlight the null value</span><span id="bde8" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.highlight_null(null_color = 'red')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/0fa353abbe34dd8129bfb96d1fb5ad2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*Im4aw8L3kfTVeIRbneJFpQ.png"/></div></div></figure><h2 id="7384" class="ma mb it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated"><strong class="ak"> 3。渐变功能</strong></h2><p id="c442" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">在展示您的数据时，我们也可以使用所有信息作为展示数据的主要方式。我经常用一种背景颜色来显示数据，以突出哪个数字在较低的区域，哪个数字在较高的区域。让我们通过下面的代码来使用这个例子。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="9539" class="ma mb it lw b gy mc md l me mf">#Gradient background color for the numerical columns</span><span id="0131" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.background_gradient(cmap = 'Blues')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi od"><img src="../Images/257a3b27a8d7578517b47e5b6c2f8b33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*qQMTmSm-uGiolZNNw5ruRw.png"/></div></figure><p id="53b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用background_gradient函数，我们可以将数据框着色为渐变。颜色取决于cmap参数，该参数从<a class="ae ky" href="https://matplotlib.org/3.1.0/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank"> matplotlib </a>库中接受颜色图。</p><p id="272a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用<strong class="lb iu">条形图</strong>作为我们的渐变背景色。让我在下面的例子中展示一下。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="23ed" class="ma mb it lw b gy mc md l me mf">#Sort the values by the year column then creating a bar chart as the background</span><span id="d685" class="ma mb it lw b gy mg md l me mf">planets.head(10).sort_values(by = 'year').style.bar(color= 'lightblue')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/17d11974c17085d782ea3ec88143f3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WfA94II-ncw_t3iqgOHLVw.png"/></div></div></figure><p id="ad30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们在上面看到的，我们现在用一种不同于background_gradient函数的方式从最低到最高高亮显示数字。我们还可以看到，由于排序函数的原因，索引是无序的；正如我在上面的文章中告诉你的那样，最好隐藏索引。</p><h2 id="162d" class="ma mb it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated"><strong class="ak"> 4。自定义功能</strong></h2><p id="946f" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">如果您希望对数据框的样式有更具体的要求，您实际上可以这样做。我们可以将样式函数传递给以下方法之一:</p><ul class=""><li id="9bb2" class="of og it lb b lc ld lf lg li oh lm oi lq oj lu ok ol om on bi translated"><code class="fe oo op oq lw b">Styler.applymap</code>:元素方面</li><li id="0ea3" class="of og it lb b lc or lf os li ot lm ou lq ov lu ok ol om on bi translated"><code class="fe oo op oq lw b">Styler.apply</code>:列/行/表格方式</li></ul><p id="a54a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这两种方法都采用一个函数(和一些其他的关键字参数),并以某种方式将我们的函数应用于数据帧。假设我有一个阈值，任何低于20的数字都应该被涂成红色。我们可以通过使用下面的代码来实现。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="87d3" class="ma mb it lw b gy mc md l me mf">#Create the function to color the numerical value into red color</span><span id="ba4f" class="ma mb it lw b gy mg md l me mf">def color_below_20_red(value):<br/>    if type(value) == type(''):<br/>        return 'color:black'<br/>    else:<br/>        color = 'red' if value &lt;= 20 else 'black'<br/>        return 'color: {}'.format(color)</span><span id="9219" class="ma mb it lw b gy mg md l me mf">#We apply the function to all the element in the data frame by using the applymap function</span><span id="4219" class="ma mb it lw b gy mg md l me mf">planets.head(10).style.applymap(color_below_20_red)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/05b4dee6c6ba88a6aed884a96ad47ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*J0nrVPQBP99N7vwjyxEl6A.png"/></div></figure><p id="180b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就像这样，每一个小于或等于20的数字都会被涂成红色，其余的都是黑色。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="50b7" class="ox mb it bd na oy oz pa nd pb pc pd ng jz pe ka nj kc pf kd nm kf pg kg np ph bi translated"><strong class="ak">结论</strong></h1><p id="6bc5" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我已经展示了在设计我们的数据框时要使用的前4个函数；隐藏功能。我们可以设计数据框的样式来展示我们的数据，或者只是为了更好的美观。如果您想了解更多关于我们如何设计数据框样式的信息，您可以在此处阅读<a class="ae ky" href="https://pandas.pydata.org/docs/user_guide/style.html#Builtin-styles" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="2334" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">访问我的<a class="ae ky" href="https://www.linkedin.com/in/cornellius-yudha-wijaya/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">LinkedIn</strong></a><strong class="lb iu"/>或<a class="ae ky" href="https://twitter.com/CornelliusYW" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Twitter </strong> </a> <strong class="lb iu">。</strong></p><h1 id="c8ec" class="ox mb it bd na oy pi pa nd pb pj pd ng jz pk ka nj kc pl kd nm kf pm kg np ph bi translated">如果您喜欢我的内容，并希望获得更多关于数据或数据科学家日常生活的深入知识，请考虑在此订阅我的<a class="ae ky" href="https://cornellius.substack.com/welcome" rel="noopener ugc nofollow" target="_blank">简讯。</a></h1><blockquote class="mj"><p id="cd6f" class="mk ml it bd mm mn mo mp mq mr ms lu dk translated">如果<!-- -->您没有订阅为中型会员，请考虑通过<a class="ae ky" href="https://cornelliusyudhawijaya.medium.com/membership" rel="noopener">我的介绍</a>订阅。</p></blockquote></div></div>    
</body>
</html>