<html>
<head>
<title>Image Manipulation in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的图像处理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/image-manipulation-in-python-cbb86a61cf0?source=collection_archive---------22-----------------------#2020-07-02">https://towardsdatascience.com/image-manipulation-in-python-cbb86a61cf0?source=collection_archive---------22-----------------------#2020-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ecc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">常用图像处理技术逐步指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fc8fb9743ad62add7cfa723c4451a431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jKGvag1MRoP478Jh7mVVnQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来自<a class="ae ky" href="https://www.pexels.com/photo/frames-on-white-background-310435/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">的照片</a></p></figure><p id="a2f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将向你展示如何使用 Python 编辑图像。编辑图像的过程称为图像处理。您可能想知道为什么在项目中使用图像之前需要对它们进行一些润色。这有许多原因，但几个主要原因可以列为节省存储空间、提高培训质量和更快的运行时间。这篇文章中涉及的操作技术包括图像大小调整、图像亮度，以及最后将图像颜色转换成灰度。我们将通过测试每一张图片来进行一些实际操作。</p><h2 id="0d61" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">图像大小调整</h2><p id="2553" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">对于一个图像来说，这没有太大的区别，但是当你考虑在你的程序中处理成千上万的图像时，很小的尺寸变化将会节省你大量的时间和存储空间。</p><h2 id="2136" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">图像亮度</h2><p id="e1c9" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当我们看一幅图像时，很容易理解我们看到的东西，但对于机器来说，这可能有点挑战性。因此，为了帮助机器更好地处理图像，一点亮度可以帮助提高精确度。</p><h2 id="2cb0" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">图像灰度</h2><p id="8a87" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">当训练机器时，灰度图像做得更好。原因是因为机器将图像视为阵列的矩阵，所以存储黑白图像比存储多幅彩色图像更容易。</p><p id="ce6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些只是我们将在本帖中介绍的一些图像处理技术。还有很多，但如前所述，这些是最常用的技术，可以应用于任何格式的图像。如果你准备好了，我们开始吧！</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="020c" class="na lw it bd lx nb nc nd ma ne nf ng md jz nh ka mg kc ni kd mj kf nj kg mm nk bi translated">图像</h1><p id="4981" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在我们开始编码之前，让我们选择一个图像来测试我们的代码。这张图片可以是任何格式，但我建议使用“png”或“jpg”。这是我选择玩的图像。这张图片的好处是没有使用滤镜和特效。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/b11b383bf49faba03a823c653262461d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*asrxqO_OSlrU5qrC"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@behic-guven-701967?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">贝希克·居文</a>从<a class="ae ky" href="https://www.pexels.com/photo/4765748/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄</p></figure><h2 id="e0da" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">包装</h2><p id="2f84" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们总共只用一个包。我们将用于图像操作的主要库称为 PIL，它是图像处理库。PIL 将被安装为“枕头”，不要混淆，他们是一回事。</p><p id="fe5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从安装包开始吧。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="de17" class="lv lw it nn b gy nr ns l nt nu">pip install pillow</span></pre><p id="9a6f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候将包作为库导入了，这样我们就可以使用它们了。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="9dd6" class="lv lw it nn b gy nr ns l nt nu">from PIL import Image, ImageEnhance</span></pre><h2 id="e93f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">导入图像</h2><p id="78f3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我已经将我的图像重命名为“testme.jpg”，在这一步中，我通过将它分配给一个名为“img”的变量名来导入图像。我们将做最常用的三种手法。为了使事情变得简单明了，我将为每种技术使用相同的图像，但是可以随意为每种操作技术定义不同的图像。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="b868" class="lv lw it nn b gy nr ns l nt nu">img = Image.open("testme.jpg")</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="4771" class="na lw it bd lx nb nc nd ma ne nf ng md jz nh ka mg kc ni kd mj kf nj kg mm nk bi translated">技巧 1 —调整大小</h1><p id="95e7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我们将对这张图片做的第一件事是调整它的大小。使用 PIL 库调整大小是非常容易的，这是一个图像处理库，如前所述。调整图像大小后，我想保存它，以便我们运行程序后可以看到图像。而最后要把图像保存为图像文件，我们就要用'保存'的方法。</p><p id="574f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们调整大小之前，您可以通过下面的代码打印图像的当前大小。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="71a7" class="lv lw it nn b gy nr ns l nt nu">print(img.size)</span></pre><p id="d3f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">调整图像大小:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="5052" class="lv lw it nn b gy nr ns l nt nu">newsize = (300, 300) <br/>img_resized = img.resize(newsize) </span><span id="09fe" class="lv lw it nn b gy nv ns l nt nu">print(img_resized.size)</span></pre><p id="7dad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以将图像文件保存在我们的文件夹中。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="be3b" class="lv lw it nn b gy nr ns l nt nu">img_resized.save("resized.jpg")</span></pre><h2 id="fb39" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结果</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/888ebf5ab7de16c86a53871d95a62522.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*F_Kj5G3fsp_GD8xS"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">resized.jpg</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="d2d3" class="na lw it bd lx nb nc nd ma ne nf ng md jz nh ka mg kc ni kd mj kf nj kg mm nk bi translated">技术 2 —亮度</h1><p id="c837" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">其次，让我们给我们的形象增加一些光亮。尤其是有阴影的图像，增加亮度有助于机器更好地看到图像中的线条。这在训练机器时非常重要，因为机器接受事物的本来面目，很少的错误信息都会导致错误的训练。不管怎样，下面是增加一些亮度的代码:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="e61b" class="lv lw it nn b gy nr ns l nt nu"># Define enhancer<br/>enhancer = ImageEnhance.Brightness(img) </span><span id="c8a2" class="lv lw it nn b gy nv ns l nt nu">img_light = enhancer.enhance(1.8) </span><span id="e2b4" class="lv lw it nn b gy nv ns l nt nu">img_light.save("brightened.jpg")</span></pre><h2 id="82bb" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结果</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/0cbe1828f36bf47827452134dc3364bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*scISBwbGC5ZK6Cp1"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Brightened.jpg</p></figure><p id="4002" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于光线太强的图像，我们能做些什么吗？当然，和加光一样，也有一种方法可以让一些光出来。这将有助于在晴天拍摄的图像。要做到这一点非常容易，我们只需改变括号之间的值。如果数量大于 1，增强器将增加光线。如果该值介于 0 和 1 之间，增强器会发出一些光，这将使图像变得更暗。</p><p id="9fc0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值越小，颜色越深。你可以玩这个值，并观察它的行为。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="9d9b" class="lv lw it nn b gy nr ns l nt nu">enhancer = ImageEnhance.Brightness(img) <br/>img_light = enhancer.enhance(0.8) </span><span id="367d" class="lv lw it nn b gy nv ns l nt nu">img_light.save("darkened.jpg")</span></pre><h2 id="b6bb" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结果</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/e924596240d96298149929f358441338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oXrfU7yOeHztMg8E"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">darkened.jpg</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="dae6" class="na lw it bd lx nb nc nd ma ne nf ng md jz nh ka mg kc ni kd mj kf nj kg mm nk bi translated">技术 3 —灰度</h1><p id="8dc7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">作为我们的第三种图像处理技术，我们将看到如何将图像转换成灰度。换句话说，我们可以说非黑即白。存储灰度图像比存储多种颜色的图像更有效，机器也更容易理解。特别是，当训练机器学习图像中的特定对象时，灰度是最常用的技术之一。</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="778d" class="lv lw it nn b gy nr ns l nt nu">img = Image.open('testme.jpg') <br/>img = img.convert('L') </span><span id="246f" class="lv lw it nn b gy nv ns l nt nu">img.save('grayscaled.jpg')</span></pre><h2 id="1dd5" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结果</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/4c5343793dde5ccabd9a74c73590a139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k4R8fRsBbR7ka7OX"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">grayscaled.jpg</p></figure><p id="c91f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些是一些最常用的图像处理技术。这些技巧将帮助你更快更容易地编辑图像。在这个练习中，我们只编辑了一个图像，但是也可以在一个循环中运行相同的代码，这样你就可以用几行代码编辑成千上万的图像。</p><p id="1820" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我是贝希克·居文，我喜欢分享关于创造力、编程、动力和生活的故事。</p><p id="a95c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nx">跟随我的</em> <a class="ae ky" href="https://medium.com/@lifexplorer" rel="noopener"> <em class="nx">博客</em> </a> <em class="nx">和</em> <a class="ae ky" href="https://towardsdatascience.com/" rel="noopener" target="_blank"> <em class="nx">走向数据科学</em> </a> <em class="nx">留下灵感。</em></p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h2 id="e466" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">你可能喜欢的计算机视觉项目</h2><div class="ny nz gp gr oa ob"><a rel="noopener follow" target="_blank" href="/simple-face-detection-in-python-1fcda0ea648e"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">Python 中的简单人脸检测</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">如何使用 OpenCV 库检测图像中的人脸</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">towardsdatascience.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ks ob"/></div></div></a></div></div></div>    
</body>
</html>