<html>
<head>
<title>Use R to Calculate Boilerplate for Accounting Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用R计算用于会计分析的样板文件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/use-r-to-calculate-boilerplate-for-accounting-analysis-f4a5b64e9b0d?source=collection_archive---------54-----------------------#2020-05-19">https://towardsdatascience.com/use-r-to-calculate-boilerplate-for-accounting-analysis-f4a5b64e9b0d?source=collection_archive---------54-----------------------#2020-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="bbf1" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">研究</h2><div class=""/><div class=""><h2 id="76fd" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">用30家电信公司CSR计算样本的实证。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0eefde44191b3ea92fc4ca3c8680ba68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhyXGV-gFppGtlq2w2yHRw.jpeg"/></div></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图片来自<a class="ae le" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1052010" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的Dariusz Sankowski </p></figure><h1 id="6fc0" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">什么是样板文件，为什么要去除它？</h1><p id="744a" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在文本分析中，<em class="mt">样板词</em>是可以从句子中删除而不会显著改变其原始含义的词的组合，例如“超过百万In”或“在…的末尾”根据Mark Lang和Lorien Stice-Lawrence的说法，<em class="mt">样板文件</em>已经成为监管机构和标准制定者发现的年度报告中一个特别有问题的属性，他们的分析表明，随着<em class="mt">样板文件</em>的减少，年度报告披露(来自15，000多家公司)得到了改善。研究的详细内容可在<a class="ae le" href="https://www.sciencedirect.com/science/article/abs/pii/S0165410115000658" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="9b30" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja">样板文件<em class="mt">影响年度披露质量的原因之一是<em class="mt">样板文件</em>可能为隐藏信息提供机会，降低整体信息含量(</em></strong> <a class="ae le" href="https://www.ifrs.org/news-and-events/2013/06/iasb-chairs-speech-breaking-the-boilerplate/" rel="noopener ugc nofollow" target="_blank"> <strong class="lz ja"> Hoogervorst，2013 </strong> </a> <strong class="lz ja">)。</strong></p><h1 id="5d5d" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">数据</h1><p id="13c1" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">我用30份企业社会责任报告作为数据来演示如何计算<em class="mt">样板</em>。都是来自通信行业的公司，比如AT &amp; T，Sprint Corporation之类的。都是用英文和pdf格式写的。</p><h1 id="f0a8" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">展示区(代码)</h1><p id="a2d2" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在我的计算演示中，我将遵循Mark Lang对样板的定义:报告中包含至少一个“样板”短语(4个单词的短语，或四边形)的句子的单词百分比。</p><h2 id="2117" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">第一步——标记每个文档的所有句子</h2><p id="827e" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在这一步中，我们使用了“tm”包和“tokenizers”包。为了生成正确的四边形并减少计算量，我们在这一步中删除了数字。由于所有的原始文档都是pdf，“tokenize_sentences”功能可以充分识别不规则的段落换行符，并将文本拆分成句子。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><h2 id="1908" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">第二步——将四边形放入一个列表中</h2><p id="5d75" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在这一步中，我生成了四边形，并将所有的四边形放在一个列表中以供进一步分析，因为Mark Lang的方法要求在所有文档级别中查找常见的4个单词的短语。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><h2 id="78e5" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">第三步—获得频率在30%和75%之间的四边形</h2><p id="bf75" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在此步骤中，我手动设置阈值，只有出现在整个文档语料库的30%和75%  之间的<strong class="lz ja"> <em class="mt">中的四边形将用于计算。我之所以要设上限，在马克·朗的论文里有解释。但一般来说，四联图有时包含无害的短语或监管披露，这将传达信息内容。样板文件的目的是发现文档是多么没有信息，所以我必须从计算中排除最流行的四边形。</em></strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><p id="1b1e" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">部分输出如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/49bee904dac4370aaf90d6f24882f74b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*JBUlGY1MLTS9XXrw9j39TQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图1–四边形</p></figure><h2 id="e5bd" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">第四步——计算每个句子的字数和四角形</h2><p id="e6d6" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">当我最初开始这项任务时，我在这一步遇到了很多麻烦，因为如果我把这一部分搞砸了，最终的输出将会很糟糕。一个句子可能根本没有四边形，也可能同时有多个四边形。一句话的字数很容易翻倍或翻倍。为了解决这个问题，我设置了一个临时变量来标记句子，以避免多次计数。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><h2 id="c814" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">最后一步——计算样板文件</h2><p id="4143" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">让我们回顾一下样板文件的定义:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/b33fdb3042919bb647cce8e144755392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*6uYURvhCelQMUtgbY3GpbA.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图2 —样板方程</p></figure><p id="e81d" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">在我标记了所有的样板句子之后，我生成了每个文档的长度:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><p id="4f4f" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">最终计算的代码:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nk nl l"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">作者代码</p></figure><p id="77cc" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">最终输出如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi no"><img src="../Images/01f475c428d0fb73f710928522a3f29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*cxuQ_un4BFGzcPeqpxT8hQ.png"/></div><p class="la lb gj gh gi lc ld bd b be z dk translated">图3 —最终输出</p></figure><h1 id="9996" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">最后</h1><p id="d81b" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">计算样本有助于更好地理解会计文本分析中一组报表的信息含量。做计算时，你必须小心重复计算样板句。</p><p id="efe3" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">我有意避免使用“lapply ”,并在代码中使用了许多“for循环”。它可以有效地帮助构建和组织用于调试目的的代码。此外，多个任务需要多次将输出分配给环境变量。由于R一直在提升“for loops”的性能，“for loops”的速度也没有以前那么差了。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="52b3" class="mz lg iq bd lh na nb dn ll nc nd dp lp mg ne nf lr mk ng nh lt mo ni nj lv iw bi translated">这项工作可以列举如下:</h2><p id="d927" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">《情感:一个文本分析包》。软件影响，100456 (2022)。【https://doi.org/10.1016/J.SIMPA.2022.100456 T4】</p><p id="7330" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">供大家参考，在这里可以找到所有的R代码<a class="ae le" href="https://github.com/jinhangjiang/Boilerplate" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="d533" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated">python版本可在此处找到:</p><div class="nw nx gp gr ny nz"><a rel="noopener follow" target="_blank" href="/morethansentiments-a-python-library-for-text-quantification-e57ff9d51cd5"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ja gy z fp oe fr fs of fu fw iz bi translated">更多情感:文本分析包</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">帮助研究人员计算样本、冗余、特异性、相对流行率的函数集合…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ky nz"/></div></div></a></div><p id="b822" class="pw-post-body-paragraph lx ly iq lz b ma mu ka mc md mv kd mf mg mw mi mj mk mx mm mn mo my mq mr ms ij bi translated"><strong class="lz ja"> <em class="mt">请随时与我联系</em></strong><a class="ae le" href="https://www.linkedin.com/in/jinhangjiang/" rel="noopener ugc nofollow" target="_blank"><strong class="lz ja"><em class="mt">LinkedIn</em></strong></a><strong class="lz ja"><em class="mt">。</em>T13】</strong></p></div></div>    
</body>
</html>