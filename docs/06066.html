<html>
<head>
<title>Step by Step approach of deploying ML model on Cloud with Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Azure 在云上部署 ML 模型的分步方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/step-by-step-approach-of-deploying-ml-model-on-cloud-with-azure-b7139cde7683?source=collection_archive---------36-----------------------#2020-05-17">https://towardsdatascience.com/step-by-step-approach-of-deploying-ml-model-on-cloud-with-azure-b7139cde7683?source=collection_archive---------36-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="05a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">详细解释了如何使用 Flask app 将 GitHub repo 链接到 Azure 来部署 ML 模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4947f21ed397bfd9682e458b1c3adad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kjNSc7DN3q8DiCtFwz9cGw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由 Waldemar Brandt 在 Unsplash 上拍摄</p></figure><p id="faec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">耶！！我建立了我的第一个 ML 模型，接下来我要做什么？？我如何以及在哪里部署它？🙄</p><p id="8306" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">任何绝对的初学者在构建他们的第一个机器学习模型后都可能会遇到上述问题，本文将揭开如何在云上部署模型并实时检查结果的神秘面纱。</p><p id="4d63" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这里，我将向您介绍一种在 Azure 上部署模型的可行方法，一旦您获得了 web 应用程序的 URL，您就可以与任何人共享它，它将全天候运行在服务器上😎</p><p id="eafe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如今有了各种各样的工具，有许多不同的方法来部署一个模型。下面是我们将在本文中使用的工具。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/a13bd798344660b1626ba0184e5a050e.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*1vbwmdhYF9iqDsiK1AkFPg.png"/></div></figure><p id="15cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是我们将要执行的步骤。</p><p id="9994" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">第一步:创建一个 ML 模型</strong></p><p id="d7e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我们关注的是部署的步骤，而不是训练模型的步骤。因此，我采用了一个样本数据，并在 Jupyter Notebook 中建立了一个线性回归模型。目的是当收入和家庭规模为独立变量时，预测每月的食品杂货支出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/2e554df8bcf0c1560c2bca22c4bc4b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*q8mzj0uoGBZ37fjhAs9_bg.png"/></div></figure><p id="05b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完成线性回归模型后，将其另存为。pkl 文件以如下二进制模式写入。对于完整的数据集(Expenses_Prediction.csv)和代码(LR_Model.py)，点击<a class="ae lx" href="https://github.com/SushmithaPulagam/Deploying-ML-on-Cloud" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><pre class="kj kk kl km gt ly lz ma mb aw mc bi"><span id="040c" class="md me it lz b gy mf mg l mh mi">pickle.dump(lr_model, open(‘E:\\lr_model.pkl’,’wb’))</span></pre></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="1cde" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">第二步:创建 HTML 表单</strong></p><p id="2093" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了预测费用，我们需要从表单中提供的新输入值中收集数据，然后使用我们的线性回归模型来预测输出，并在表单中显示结果。因此，我们正在创建一个简单的 HTML 表单，它将在浏览器中显示如下。</p><p id="fb29" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在这里找到代号为 index.html 的代号</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/96a32d6ddde876ba002d41a66200e7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*WkpOiXzzTTOSEqTKTKsQSw.png"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="4e8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">第三步:创建烧瓶应用</strong></p><p id="2449" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Flask 是一个用于在 Python 中构建 web 应用的框架。为了托管 HTML 表单，我们需要创建 Flask web 应用程序。要安装 Flask，请使用命令！<em class="lu"> pip 安装烧瓶</em></p><p id="39ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是理解 flask app 代码的快照，该代码名为 app.py。你可以在这里<a class="ae lx" href="https://github.com/SushmithaPulagam/Deploying-ML-on-Cloud" rel="noopener ugc nofollow" target="_blank">获得代码</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/80c108ee248812a657cc64a56a2444ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UMuc7bjeRo7pj761CP0w3A.png"/></div></div></figure><p id="fd87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将所有文件放在同一个文件夹中，您就可以在本地系统中测试这个 web 应用程序了。打开 Anaconda 提示符，进入 files 文件夹，输入<strong class="la iu"> <em class="lu"> python app.py </em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/dcfa5d15403de478642d16fda1a59af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*MOiUrAOkGfOVqKWB-QgT-Q.png"/></div></figure><p id="416b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">复制网址(<em class="lu"> http://127.0.0.1:5000/ </em>)并粘贴到你的网络浏览器中，点击回车。一旦提供了输入值，就可以预测费用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/9f16a3cfcdf758b11e5eee7e669162bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*iRDY8rAkH0iZf5vGCPZqSQ.png"/></div></figure><p id="3f3b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您能够做到这一点，现在是时候在云上部署 web 应用程序了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="85d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">步骤 4:创建配置文件。</strong></p><p id="2639" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要创建以下两个配置文件来继续部署。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/0e6cf5776ae6e63e57f48d00405c6a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:320/format:webp/1*onmF7mxinecklJVtj8GBBg.png"/></div></figure><p id="d53f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"><em class="lu">Procfile</em></strong><em class="lu">:</em>在 Procfile 中提到下面单行代码，这个文件不应该有任何扩展名。这是将要首先执行的文件。它使用 Gunicorn，这是一个用于 WSGI 应用程序的纯 Python HTTP 服务器，它充当 web 应用程序和 web 服务器之间的纽带。确保保存的文件没有扩展名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/4e0ab6615b5acad14995fc4d2a9aabb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*7AejSFcNDd4j9vUKQlpwvA.png"/></div></figure><p id="9300" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"><em class="lu">requirements . txt:</em></strong>在此提及你所有的库及其依赖关系。txt 文件及其版本如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/1b07601b1ab942d7c3825f8b40b91976.png" data-original-src="https://miro.medium.com/v2/resize:fit:314/format:webp/1*4WqCszCIPER5hUhpukiH_w.png"/></div></figure><p id="b0fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">第五步:在 GitHub Repo 中提交文件。</strong></p><p id="f10b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<a class="ae lx" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中创建一个帐户，并将所有文件上传到一个存储库中。如果您以前没有创建过存储库，请查看这里的内容</p><p id="5859" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请确保将您的 index.html 放在模板文件夹中。你可以从我的 GitHub [ <a class="ae lx" href="https://github.com/SushmithaPulagam/Deploying-ML-on-Cloud" rel="noopener ugc nofollow" target="_blank">这里</a> ]查看文件</p><p id="1e4c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">👉<strong class="la iu">第六步:将 GitHub Repo 链接到 Azure 并部署。</strong></p><p id="fa0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用链接[ <a class="ae lx" href="https://azure.microsoft.com/en-in/free/" rel="noopener ugc nofollow" target="_blank">此处</a> ]在 Azure 中创建您的免费帐户。</p><p id="013c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">按照以下步骤将 GitHub repo 链接到 Azure</p><p id="b389" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">登录后，点击“<em class="lu">应用服务</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/73084c2ab5e00eff09431edf39e8bf3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hzs3SYscoZcf5a3oFcTdGA.png"/></div></div></figure><p id="8391" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击<em class="lu">添加</em>。如下填写 Web 应用程序中的详细信息。创建一个新的“<em class="lu">资源组</em>”。在实例详细信息中输入“<em class="lu">名称</em>”。点击<em class="lu">审核+创建</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/b2e6cb5d8f736064d1bb0ae0762ea2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*LTObTF4qvqttHVNolCN4wg.png"/></div></figure><p id="571e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击<em class="lu">创建</em>后，你会看到下面的消息。点击“<em class="lu">转到资源</em>”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/f4f05b9f10844a97397a861a3fd82c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqgzFmhrRt8JkE2ZlxedLg.png"/></div></div></figure><p id="db2c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击左侧窗格中的<em class="lu">部署中心</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/89ce2a2d7dc45bf02bc37da3f6de6fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRHT3J8rsbp4_JqWMv99Qg.png"/></div></div></figure><p id="65a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击<em class="lu"> GitHub </em>。第一次连接 GitHub，Azure 会要求授权。连接后，点击继续。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/693d5184ab0d745e74e6763168ba2bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pp7sx1lDUVI6yWu5k-ijeA.png"/></div></div></figure><p id="ce15" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击“<em class="lu">应用服务构建服务</em>”并继续。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/899d239ef4607b0b90162f522331a07b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*eYofXJIGRnYzVnD4n0ixcQ.png"/></div></figure><p id="0fcf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在代码部分，“<em class="lu">组织</em>”会在连接 GitHub 后自动更新。选择所需的<em class="lu">储存库</em>并继续。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/5c8347e1c6fc71add3707eb916ae34ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0bY3eljUYQESg7UzyZ27Q.png"/></div></div></figure><p id="e7a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单击完成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/0ff4052fb95c8528a394bee338ea953c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*BAs3vgwgmAceGgIhjlQBag.png"/></div></figure><p id="8729" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将需要几分钟的时间来完成，同时您会看到状态为正在运行</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/9d33fa27ac81e3fabb55068b530a838b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WeWwAfhunIaidmLYgSpIjg.png"/></div></div></figure><p id="b5d0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完成后，您将看到状态为“成功”。点击左侧窗格中的<em class="lu">概述</em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/7719184b0d28d75a0d87498bdc553765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g7ZEs-i3uOkYRZTqWIi9kQ.png"/></div></div></figure><p id="da95" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从右上角复制“<em class="lu"> URL </em>”并粘贴到您的网络浏览器中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/7129c621966c629a71efba57a502444a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AzBdRMHqD8UxHDpA-EFcGw.png"/></div></div></figure><p id="d2f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以看到这个网址是用 Azure 域创建的。提供输入值并单击预测按钮。你可以看到预计的费用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/2484acdf67adb8c45b4399d6b8275570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*65N8OMY1WZ54ch70LONE7w.png"/></div></div></figure><p id="121d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu">又来了，耶！！你的机器学习模型现在运行在云上。</em>👍</p><p id="6a3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">总结</strong></p><p id="693c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文的目的是让您轻松理解部署，谁正试图迈出在云中部署模型的第一步。稍后，您可以探索各种方法，比如为自动部署创建管道，以及在云上训练模型，等等。作为数据科学专业人员，应该了解运行模型的端到端方法。</p><p id="3d37" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以从我的 GitHub <a class="ae lx" href="https://github.com/SushmithaPulagam/Deploying-ML-on-Cloud" rel="noopener ugc nofollow" target="_blank">档案</a>中获得完整的代码和文件</p><p id="94ff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢阅读，快乐学习！🙂</p></div></div>    
</body>
</html>