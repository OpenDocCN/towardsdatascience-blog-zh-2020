<html>
<head>
<title>8 Tips for Better Data Visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更好的数据可视化的 8 个技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/8-tips-for-better-data-visualization-2f7118e8a9f4?source=collection_archive---------10-----------------------#2020-08-12">https://towardsdatascience.com/8-tips-for-better-data-visualization-2f7118e8a9f4?source=collection_archive---------10-----------------------#2020-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1d28236fa717c81369911ab70ce3def3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*77A1zmBchEaMvnuJ"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">照片由<a class="ae jg" href="https://unsplash.com/@edwardhowellphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">爱德华·豪威尔</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p></figure><div class=""/><div class=""><h2 id="db17" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">改善你的地图的实用建议</h2></div><p id="dfe9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated">G gplot 是 R 的首要数据可视化包。它的流行可能归因于它的易用性——只需几行代码，您就能制作出非常棒的可视化效果。这对于刚刚开始 R 之旅的初学者来说尤其重要，因为只用两行代码就可以创建可视化的东西，这非常令人鼓舞:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="bd5c" class="mm mn jj mi b gy mo mp l mq mr">ggplot(data = iris, aes(x = Sepal.Length, y = Sepal.Width)) +<br/>  geom_point()</span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ms"><img src="../Images/7da1c7287680e83af7e877f64b56081c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_6RveSWBQ9p5-9Y7j_UPiw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">上述代码的输出</p></figure><p id="e657" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我想强调 ggplot 的灵活性和可定制性。Matplotlib 和 Seaborn(都是 Python)和 Excel 等替代品也很好用，但是可定制性较差。在这篇文章中，我将通过 8 个具体步骤来改善你的 ggplot。</p><p id="ae33" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了确保本文中的建议切实可行，我将遵循两个主题:</p><ol class=""><li id="d72d" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated"><strong class="la jk">假设读者对 ggplot 有所了解:</strong>如果你理解了上面的代码，你应该会很好。如果您不熟悉 ggplot，我将尽量使这些提示与语言无关，因此如果您使用 base R、Python 或其他可视化工具，这些提示可能仍然有用。</li><li id="31c1" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated"><strong class="la jk">易于理解:</strong>如果您想自己运行示例代码，您所需要的只是 R 和 tidyverse。不需要外部数据集，因为我们将使用 ggplot 中包含的<code class="fe nh ni nj mi b">diamonds</code>数据集。</li></ol><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/553fc0fea9c7be19271afa60a89f9b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocwxNlkecB3pqeGuavqI6A.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来源:https://ggplot2.tidyverse.org/reference/diamonds.html<a class="ae jg" href="https://ggplot2.tidyverse.org/reference/diamonds.html" rel="noopener ugc nofollow" target="_blank"/></p></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="6502" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">1.主题是你最好的朋友</h1><p id="c654" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">主题控制所有非数据显示，是改变图形外观的一种简单方法。为了做到这一点，只需要一行额外的代码，ggplot 已经有了 8 个独立的主题。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="d40b" class="mm mn jj mi b gy mo mp l mq mr">ggplot(data = diamonds, aes(x = Sepal.Width, y = Sepal.Length)) + <br/>  geom_point() + <br/><strong class="mi jk">  theme_bw()</strong></span></pre><p id="774a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ggplot 主题很简单。它们不会真的突出，但是它们看起来很棒，容易阅读，并且能表达重点。同样，如果你想反复使用同一个主题，你可以<strong class="la jk">用一行代码设置一个全局主题，它将适用于所有的 ggplots。</strong></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="26ab" class="mm mn jj mi b gy mo mp l mq mr"># Set global theme</span><span id="b176" class="mm mn jj mi b gy oo mp l mq mr">theme_set(theme_bw())</span></pre><p id="0d8d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="op">关于 8 个主题的全部细节，你可以访问</em> <a class="ae jg" href="https://ggplot2.tidyverse.org/reference/ggtheme.html" rel="noopener ugc nofollow" target="_blank"> <em class="op">这个链接</em> </a> <em class="op">。</em></p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/475de1dbee1a7c36c375cf7a6db77962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QF8oVR85iKU7bdY66EVPBg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">ggplot 主题，比较</p></figure><p id="ea2d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">主题也是超级可定制的。</strong>除了 ggplot 自带的 8 个主题，你还可以制作自己的主题，但更重要的是使用其他人已经创建的主题。在我工作过的几个公司里，我们都有内部的 ggplot 主题。例如，我在脸书公司帮助设计了<code class="fe nh ni nj mi b">theme_fb()</code>，公司的设计师为它提供了意见。</p><p id="497b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想在 ggplot 之外使用一些其他的主题，最流行的包是 ggthemes，它有一些有趣的选项，比如<code class="fe nh ni nj mi b">theme_fivethirtyeight(), theme_wsj(), and theme_economist()</code>。下面是这些主题的一个例子，但是我绝对推荐查看<a class="ae jg" href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" rel="noopener ugc nofollow" target="_blank"> <strong class="la jk">这个链接</strong> </a> <strong class="la jk"> </strong>来了解更多。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/2428770a4e1d87a9ce7911aacf99a801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PiKGlMVNPFk7HQBO7SU6qg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">ggthemes，比较</p></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="c9b8" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">2.刻面是一种超能力</h1><p id="ed59" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">在可视化数据时，您总是要考虑的一件事是您想要显示多少维度的数据。大多数图表通常只需要 1-2 维的数据就可以得到一个点，例如:</p><ul class=""><li id="9f52" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated">散点图上篮球运动员的身高 x 体重</li><li id="39ee" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated">柱状图上洛杉矶湖人队球员的身高</li></ul><p id="5e06" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">随着维度数量的增加，一张图会变得更加混乱，这使得一个点更难被理解。例如:</p><ul class=""><li id="db0e" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated">散点图上篮球运动员的身高 x 体重，<em class="op">但是 30 支球队中的每支球队都有不同的颜色点</em>。这将很难阅读，因为您需要 30 种不同的颜色来代表不同的团队，以及一个列出所有团队名称的图例。</li></ul><p id="42d2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是刻面的魅力所在。<strong class="la jk">如果我们不必局限于一个图会怎么样？</strong>我的假设是，为什么我们中的许多人会有这种想法，是因为我们习惯于在 Excel 中可视化数据，我们被限制在一个单一的图表中。在 ggplot 中，我们可以打破这种思维模式，只需要一行代码就可以做到。<strong class="la jk">刻面使我们能够轻松地在可视化中添加两个额外的维度。</strong></p><p id="828a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们探索如何使用刻面来可视化钻石数据。</p><p id="9c4d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">基本上，我们可以查看钻石的克拉数与其价格之间的关系，这是本数据集的主要目的:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="00ab" class="mm mn jj mi b gy mo mp l mq mr">ex2 &lt;- <br/>  diamonds %&gt;%<br/>  sample_n(5000) %&gt;%<br/>  ggplot(aes(x = carat, y = price)) +<br/>  geom_point()</span><span id="1460" class="mm mn jj mi b gy oo mp l mq mr">ex2</span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/627b97fecd97b898e5a90caf7bf40c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*URvWqJciteAWR8WFafB5YQ.png"/></div></div></figure><p id="833e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这张图只显示了两个维度的数据，但还有一些其他的数据也很重要。钻石的切割、颜色和净度——所有这些都可能与钻石的价格有关。引入这些维度的一个方法是让点有不同的颜色或者使用不同的点形状，但是让我们试试刻面。</p><p id="d42f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您只想通过<strong class="la jk">单一尺寸分解图形，请使用<strong class="la jk">facet _ wrap()</strong>:</strong></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="b895" class="mm mn jj mi b gy mo mp l mq mr">ex2 +<br/>  <strong class="mi jk">facet_wrap(~cut)</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/a7e97ec486e51043e211e072b578e8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWv9C3ELCyi9-HIuqhDcYg.png"/></div></div></figure><p id="02d4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想通过<strong class="la jk">二维分解图形，请使用<strong class="la jk">facet _ grid()</strong>:</strong></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="1bb1" class="mm mn jj mi b gy mo mp l mq mr">ex2 +<br/>  <strong class="mi jk">facet_grid(color~cut)</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ov"><img src="../Images/cdd59ec8adfec3733ddee7a0c5ad01b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDK3j2wb4-8leJy2XLLwUg.png"/></div></div></figure><p id="a98c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这只是如何使用<code class="fe nh ni nj mi b">facet_wrap()</code>和<code class="fe nh ni nj mi b">facet_grid()</code>的两个例子，但是从这一节中得到的关键是，使用 ggplot，<strong class="la jk">您不会局限于在单个图形中考虑可视化。</strong></p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="4b88" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">3.颜色！</h1><p id="ffd8" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">颜色在数据可视化中有两个主要用途:</p><ol class=""><li id="ba3e" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated">使可视化更有吸引力</li><li id="269d" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">表示数据的另一个维度</li></ol><p id="dbe8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有很多方法可以给你的 gg 图上色，但是为了简单起见，这一节主要介绍<a class="ae jg" href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" rel="noopener ugc nofollow" target="_blank">绿色调色板</a>，这是我个人最喜欢的颜色，因为它们是:</p><ul class=""><li id="d6f3" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated"><strong class="la jk">丰富多彩:</strong>跨越尽可能宽的调色板，使差异显而易见</li><li id="41d8" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated"><strong class="la jk">感知一致:</strong>表示彼此接近的值具有相似的外观颜色，而彼此远离的值具有更多不同的外观颜色，在整个值范围内保持一致</li><li id="cb71" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated"><strong class="la jk">对色盲具有鲁棒性:</strong>因此上述特性适用于患有常见色盲的人，也适用于灰度打印</li></ul><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ow"><img src="../Images/6343681ccd0a0ab830596829ff0f30c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FfLMJc1bdFSqN07yKbbplA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">来源:<a class="ae jg" href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" rel="noopener ugc nofollow" target="_blank">https://cran . r-project . org/web/packages/viridis/vignettes/intro-to-viridis . html</a></p></figure><p id="9e09" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在这里  <strong class="la jk">，</strong>阅读更多关于上面<a class="ae jg" href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" rel="noopener ugc nofollow" target="_blank"> <strong class="la jk">颜色背后的理论，但是这一节主要讲的是允许你使用这些颜色的 4 个关键功能:</strong></a></p><ul class=""><li id="846f" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated"><code class="fe nh ni nj mi b">scale_color_viridis_d()</code> &amp; <code class="fe nh ni nj mi b">scale_fill_viridis_d()</code>:将此语句添加到您的 ggplot，以便在<strong class="la jk">离散/分类</strong>变量上着色/填充您的图形。<em class="op">(注意功能末尾的“d”)</em></li><li id="4e29" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated"><code class="fe nh ni nj mi b">scale_color_viridis_c()</code> &amp; <code class="fe nh ni nj mi b">scale_fill_viridis_c()</code>:将此语句添加到您的 ggplot 中，以便在<strong class="la jk">连续</strong>变量上着色/填充您的图形。<em class="op">(注意功能末尾的“c”)</em></li></ul><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="9534" class="mm mn jj mi b gy mo mp l mq mr"># Discrete<br/>ggplot(data = diamonds %&gt;% sample_n(1e3), <br/>         aes(x = carat, y = price,<br/>             color = cut)) + <br/>  geom_point() +<br/><strong class="mi jk">  scale_color_viridis_d()</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/db4b8e5123a9bdcd41827916e17aca3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9q24BTZHG0w8v6e_gdBpA.png"/></div></div></figure><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="f5ab" class="mm mn jj mi b gy mo mp l mq mr"># Continuous<br/>ggplot(data = diamonds %&gt;% sample_n(1e3), <br/>       aes(x = carat, y = price,<br/>           color = depth)) + <br/>  geom_point() +<br/><strong class="mi jk">  scale_color_viridis_c(option = 'A')</strong></span></pre><p id="1e52" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="op"> Protip: </em> </strong>这里，我使用<code class="fe nh ni nj mi b">option</code>参数来改变 viridis 中的调色板。您可以在选项 A-E 之间切换，这些选项反映了上面的不同配色方案。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/682498edafded3f52f0eb253a0aae4ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blsq0FxYHEyinwilaXLBHA.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="5a5b" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">4.颜色与填充:了解区别</h1><p id="3732" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">我在上一节中介绍了这一点，但我想更明确地解决它，因为当您第一次使用 ggplot 时，它可能会令人困惑。要给 ggplot 着色，您可以使用<code class="fe nh ni nj mi b">color</code>或<code class="fe nh ni nj mi b">fill</code>，这取决于图形类型。</p><p id="1c2f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="op">那么有什么区别呢？</em> </strong>一般来说，<code class="fe nh ni nj mi b">fill</code>定义了一个几何体填充<em class="op"/>(即<code class="fe nh ni nj mi b">geom_bar()</code>)的颜色，而<em class="op">颜色</em>定义了一个几何体勾勒<em class="op"/>(即<code class="fe nh ni nj mi b">geom_point()</code>)的颜色。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="ab01" class="mm mn jj mi b gy mo mp l mq mr">ggplot(data = diamonds, aes(x = price)) +<br/>  geom_histogram(color = 'blue',<br/>                 fill = 'red')</span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oz"><img src="../Images/275f769b78308a68b3afaf230e5dcfbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OyFm9QwSBi_oNEOgifDsg.png"/></div></div></figure><p id="7f69" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，这里的要点是，如果你试图给一个图形着色，但看起来没有任何变化，只需将<code class="fe nh ni nj mi b">color</code>切换到<code class="fe nh ni nj mi b">fill</code>，反之亦然。</p><p id="236e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae jg" href="https://stackoverflow.com/questions/50557718/what-is-the-difference-between-the-color-and-fill-argument-in-ggplot2#:~:text=Generally%2C%20fill%20defines%20the%20colour,%2C%20to%20use%20Photoshop%20language)." rel="noopener ugc nofollow" target="_blank"> <em class="op">阅读更多关于 StackOverflow </em> </a></p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="9dbf" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">5.给它贴上标签</h1><p id="d859" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">好的可视化有简洁和描述性的标签。它们帮助读者理解他们所看到的，如果你希望你的视觉化图像被分享，这尤其重要。幸运的是，它在 ggplot 中非常容易标记。</p><p id="8303" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">以下是 ggplot 最有用的标签功能，按使用频率列出。</strong>您可以挑选想要使用的标签，例如，如果您只想添加标题，您只需在<code class="fe nh ni nj mi b">labs()</code>中输入标题参数。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="f684" class="mm mn jj mi b gy mo mp l mq mr">ggplot(data = diamonds %&gt;% sample_n(1e3), <br/>       aes(x = carat, y = price, color = cut)) + <br/>  geom_point() +<br/><strong class="mi jk">  labs(title = 'title example',<br/>       x = 'x-axis example',<br/>       y = 'y-axis example',<br/>       color = 'color example',<br/>       subtitle = 'subtitle example',<br/>       caption = 'caption example',<br/>       tag = 'tag example')</strong></span></pre><p id="00c5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="op">注:</em> </strong> <em class="op">只有当您的 ggplot 中有一种颜色作为美感时，才可以访问色域。无论你使用填充、颜色、大小、alpha 等等，这种标记方法都是有效的。</em></p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pa"><img src="../Images/fe1097bac5e1bf9ffc09d66ad5e6ff77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9lA2m-KQmAbcYB3KenDrg.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="a762" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">6.线条注释</h1><p id="ca7f" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">在用你的视觉化来讲述一个故事的主题上，线条注释是一个非常有用的工具。我个人用过的一些例子包括:</p><ul class=""><li id="ed08" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated">在线图中标记前/后时段</li><li id="8c09" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated">在散点图上绘制 x 或 y 值的平均值</li><li id="5d20" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated">注释我们想要达到的目标度量</li></ul><p id="2995" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无论什么用例，拥有一个线注释都有助于向那些将查看您的可视化的人传达一个重要的观点。要在 ggplot 中添加一条线，您可以使用:</p><ul class=""><li id="70a6" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt os mz na nb bi translated"><strong class="la jk"> geom_hline(): </strong>添加一条水平线(有 y 截距)</li><li id="a9fd" class="mt mu jj la b lb nc le nd lh ne ll nf lp ng lt os mz na nb bi translated"><strong class="la jk"> geom_vline(): </strong>添加一条垂直线(有一个 x 截距)</li></ul><p id="39eb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面的例子将展示这两者的作用:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="5cfc" class="mm mn jj mi b gy mo mp l mq mr">ggplot(data = diamonds %&gt;% sample_n(1e3), <br/>       aes(x = carat, y = price, color = cut)) + <br/>  geom_point() +<br/><strong class="mi jk">  geom_hline(data = . %&gt;% summarise(y = mean(price)),<br/>             aes(yintercept = y)) +<br/>  geom_vline(data = . %&gt;% summarise(x = mean(carat)),<br/>             aes(xintercept = x))</strong></span></pre><p id="264f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，上面的代码看起来可能比本文中的其他一些 ggplot 代码要复杂一些。我会试着解释那里发生了什么。为了得到平均克拉数和价格，一个更直接的方法是在你的 ggplot 代码之前计算它们。然而，因为我很懒，喜欢减少变量的数量，所以我将数据(<code class="fe nh ni nj mi b">diamonds %&gt;% sample_n(1e3)</code>)直接传输到<code class="fe nh ni nj mi b">geom_line()</code>语句中，这样也能很好地工作。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/0700e0c86547cfae86f941b7c03616e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MyfofQV95D5gITaO9rsdCw.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="b117" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">7.文本注释</h1><p id="efe4" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">除了线条之外，在图表中添加一些数据标签也是很有用的。然而，只有当你的数据标签易于阅读时，它才有用。例如，如果您盲目地应用文本 geom，您最终会得到一个非常难看的图形:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="8d02" class="mm mn jj mi b gy mo mp l mq mr">p &lt;- <br/>  ggplot(data = diamonds %&gt;% sample_n(1e3), <br/>       aes(x = carat, y = price, color = cut)) + <br/>  geom_point()</span><span id="d290" class="mm mn jj mi b gy oo mp l mq mr">p + <br/><strong class="mi jk">  geom_text(aes(label = price))</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/c94547da47c911cc41df21ac71b40ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8zYIL8H2_lNZSbLXi8dubg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">这很糟糕</p></figure><p id="8cb9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这一部分，我将谈谈有效使用<code class="fe nh ni nj mi b">geom_text()</code>的三个关键技巧。</p><ol class=""><li id="664c" class="mt mu jj la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated"><strong class="la jk">过滤显示哪些标签:</strong>你可以发挥创意，但这样做的目的是只显示相关的数据标签。在下面的例子中，我只想显示高克拉钻石的价格:</li></ol><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="d84a" class="mm mn jj mi b gy mo mp l mq mr">p + <br/><strong class="mi jk">  geom_text(data = . %&gt;% filter(carat &gt;= 2.25),<br/>            aes(label = price))</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/0b0148001370839a651b58070c3fb3ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzyTTG4R_kytjYfkXSKEqQ.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">请注意，现在更容易阅读了，只显示了几个价格</p></figure><p id="586f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> 2。hjust + vjust </strong></p><p id="6e47" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在上面的图中，你会看到文本完全覆盖了点，看起来很丑。您可以通过在 geom_text()内对齐文本来轻松解决此问题。我认为这类似于微软 Word 中的左右对齐。</p><p id="995c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常，vjust 和 hjust 的范围是从[0，1]开始，但它也接受负值和大于 1 的值(它只会在指定的方向上进一步移动标签)。下图显示了如何根据 hjust 和 vjust 值对齐文本:</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/81af8c3cf20e2e0d936ce098cf6e070c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/0*8r9GM0HGIbd1faiY.png"/></div></figure><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="d543" class="mm mn jj mi b gy mo mp l mq mr">p + <br/>  geom_text(data = . %&gt;% filter(carat &gt;= 2.25),<br/>            aes(label = price),<br/>           <strong class="mi jk"> hjust = 0,<br/>            vjust = 0)</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pf"><img src="../Images/d63f5c9ff785b91d8d7963c6f871f514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vh7KYx2-cx5J6l9l-xbVcg.png"/></div></div></figure><p id="3c9c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> 3。颜色</strong></p><p id="7909" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这更多的是一种偏好，但是要知道你可以改变文本的颜色。你通常希望你的<strong class="la jk">文本尽可能与背景</strong>形成对比，因为这样最容易辨认。如果您有一些较浅的颜色(如黄色)可能难以阅读，这一点很重要:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="1b33" class="mm mn jj mi b gy mo mp l mq mr">p + <br/>  geom_text(data = . %&gt;% filter(carat &gt;= 2.25),<br/>            aes(label = price),<br/>            hjust = 0,<br/>            vjust = 0,<br/>          <strong class="mi jk">  color = 'black')</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pc"><img src="../Images/744d37266f46f8629cb20a1cdf22c918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BGlhqr8PzxWm1MFOJZtNfA.png"/></div></div></figure><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="bfec" class="mm mn jj mi b gy mo mp l mq mr"># Another example where we add contrast</span><span id="5688" class="mm mn jj mi b gy oo mp l mq mr">diamonds %&gt;%<br/>  group_by(clarity) %&gt;%<br/>  summarise(price = mean(price)) %&gt;%<br/>  ggplot(aes(x = clarity, y = price)) +<br/>  geom_bar(stat = 'identity') +<br/>  geom_text(aes(label = round(price, 2)),<br/>            vjust = 1.25,<br/>           <strong class="mi jk"> color = 'white')</strong></span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pg"><img src="../Images/f65c394afeb21b8148378d3c2769a904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXqxOT8wfroNjTrMX31g6Q.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="679c" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">8.秩序，秩序，秩序！</h1><p id="765e" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">最后，对图表进行排序可以使其更容易阅读，这对于条形图尤其有用。你所要做的就是在 x 值上使用<code class="fe nh ni nj mi b">fct_reorder()</code>,这样它就按照 y 值排序了:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="3473" class="mm mn jj mi b gy mo mp l mq mr"># By default, ggplot will order by the x value</span><span id="504f" class="mm mn jj mi b gy oo mp l mq mr">diamonds %&gt;%<br/>  group_by(clarity) %&gt;%<br/>  summarise(price = mean(price)) %&gt;%<br/>  ggplot(aes(x = clarity, y = price)) +<br/>  geom_bar(stat = 'identity')</span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ph"><img src="../Images/77550baa006a9d1ece963f118be32e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QDskgfwHp4bO7Pr3oLmWCw.png"/></div></div></figure><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="72f2" class="mm mn jj mi b gy mo mp l mq mr"># Reordered:</span><span id="6bf3" class="mm mn jj mi b gy oo mp l mq mr">diamonds %&gt;%<br/>  group_by(clarity) %&gt;%<br/>  summarise(price = mean(price)) %&gt;%<br/>  ggplot(aes(x = <strong class="mi jk">fct_reorder(clarity, price)</strong>, y = price)) +<br/>  geom_bar(stat = 'identity')</span></pre><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pi"><img src="../Images/b2714513dbb45528f2c9a1d90c5c8e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9HockV8X9MuKhds1brIBZQ.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="801e" class="ns mn jj bd nt nu nv nw nx ny nz oa ob kp oc kq od ks oe kt of kv og kw oh oi bi translated">总结想法</h1><p id="241b" class="pw-post-body-paragraph ky kz jj la b lb oj kk ld le ok kn lg lh ol lj lk ll om ln lo lp on lr ls lt im bi translated">我很难决定我想在这篇文章中涵盖哪些不同的主题。我最终专注于最初令我困惑的主题，我希望我在刚开始学习 ggplot 时能理解更多。希望这篇文章能给你一些关于如何改进可视化的具体想法，或者揭开 ggplot 一些更令人困惑/隐藏的方面。</p></div></div>    
</body>
</html>