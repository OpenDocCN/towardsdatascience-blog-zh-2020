<html>
<head>
<title>Can a Data Scientist Replace a DJ? Spotify Manipulation with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家能代替DJ吗？使用Python操作Spotify</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/can-a-data-scientist-replace-a-dj-spotify-manipulation-with-python-fbbd4a45ffd5?source=collection_archive---------16-----------------------#2020-03-12">https://towardsdatascience.com/can-a-data-scientist-replace-a-dj-spotify-manipulation-with-python-fbbd4a45ffd5?source=collection_archive---------16-----------------------#2020-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="66b6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Spotify的API创建和调整您自己的播放列表</h2></div><p id="e21c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">“…一个美丽的旅程，开始是为了调查音乐背后潜在的统计“证据”，最终发现(对于一个数据科学家来说)在方程式背后也有“音乐……”</em></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/13bdb362f104bad330e6647cd65262c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iTJQDd1HzeTRUK7wL-JKow.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><a class="ae lv" href="https://unsplash.com/@buduczki?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">诺贝特·布杜茨基</a>在<a class="ae lv" href="https://unsplash.com/photos/BZO2k7sCsWk" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="fa1a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数据科学非常庞大，并不断扩展到新的行业，提供了大量有价值的(主要是企业)应用。音乐行业就是其中之一。如果我们像对待一个“黑盒”一样对待这些应用程序，我们会观察到一个输入(<strong class="kk iu"> <em class="le">数据</em> </strong>)和一个输出(<strong class="kk iu"> <em class="le">产品</em> </strong>)。这个项目旨在用Python操作Spotify音乐数据，有两个范围:</p><p id="1ad3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">✔️证明了API(应用编程接口)的存在是非常重要的，在馈送算法方面具有额外的精细<strong class="kk iu"> <em class="le">数据</em> </strong>。</p><p id="0a62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">✔️展示了简单的统计数据(当正确应用时)如何编码日常行为，将它们分解成基本元素，并在此基础上构建有价值的<strong class="kk iu"> <em class="le">产品</em> </strong>。</p><h2 id="3836" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">概念</h2><p id="a155" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">我们将建立一个假设的场景。最近，我作为一名数据科学家工作的数据公司记录了他们的青年营销部门的显著利润，正因为如此，它决定用一个聚会来奖励其年轻客户。在没有DJ的情况下，我的主管让我负责音乐，让派对持续到早上！她给了我一些公共关系部门已经创建好的Spotify播放列表，以便检查它们并创建最终的播放列表。一般来说，对现代音乐趋势的漠视让我想到了一个微妙的选择:</p><p id="5f1c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用Python访问所有播放列表，提取每首歌曲的每一个音频特征，对它们进行统计推理，并将最适合(我们聚会)的歌曲打包成最终播放列表，如何？当然，有一个技术性的问题:我不会听到他们中任何一个人的任何声音！</p><p id="b59f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了更好地交流结果，提出了一些假设:</p><p id="d728" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#1:我的个人Spotify播放列表代表公司给我的播放列表。</p><p id="2f61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#2:该党的目标群体是18至30岁的年轻人，这意味着…跳舞！然而，他们中的许多人可能会有家人陪同，也就是说，一小部分客人会更好地欣赏欢快的音乐。</p><p id="cbd2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#3:在Spotify为其开发者提供的音频功能中，仅考虑了<code class="fe mu mv mw mx b">danceability</code>、<code class="fe mu mv mw mx b">energy</code>、<code class="fe mu mv mw mx b">tempo</code>、<code class="fe mu mv mw mx b">loudness</code>、&amp;、<code class="fe mu mv mw mx b">valence</code>(见第2节)。这是因为，在我看来，它们能更好地表达一首曲目是否适合一场舞会。</p><p id="6d45" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">#4:有两种方法可以改善选择的播放列表；分别移除或添加被视为“坏”或“好”的轨道(涉及一个或多个音频特征)。为了扩大最终的播放列表，我只采用了后者。</p><h2 id="71ec" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">作案手法</h2><p id="219f" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">为了完成我们的使命，必须遵循以下路线图:</p><ol class=""><li id="0164" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nd ne nf ng bi translated">设置<strong class="kk iu">环境</strong>来运行代码。</li><li id="4cc6" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">向Spotify <strong class="kk iu"> API </strong>发出请求，获取所有相关的音乐数据并提供简要说明。</li><li id="4eff" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">使用Numpy、Pandas &amp;多个额外的Python库执行<strong class="kk iu"> EDA </strong>(探索性数据分析)，以数字和视觉方式探索候选播放列表。</li><li id="2a60" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nd ne nf ng bi translated">选择—使用几个<strong class="kk iu">统计</strong>技术优化最合适的播放列表。</li></ol></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="be51" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">1.建立</h2><p id="b20f" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">在这一节中，我们将设置所需的环境，以便应用分析技术。如果您已经准备了下面列出的任何部分，您可以分别跳过它们。</p><ul class=""><li id="c4ab" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated"><a class="ae lv" href="https://developer.spotify.com/dashboard/" rel="noopener ugc nofollow" target="_blank">申请</a>一个Spotify开发者账号，创建一个app。[ <em class="le">在这个过程中，您将创建一个客户端ID，并为您的应用程序提供一个客户端密码</em>。</li><li id="ff5d" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">安装<a class="ae lv" href="https://jupyter.org/index.html" rel="noopener ugc nofollow" target="_blank">Jupyter</a>Notebook——一个开源网络应用程序，用于创建/共享包含实时代码、公式、可视化和叙述性文本的文档。你可以在这里按照步骤<a class="ae lv" href="https://jupyter.org/install.html" rel="noopener ugc nofollow" target="_blank">进行</a>。</li><li id="c1a6" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">安装<a class="ae lv" href="https://spotipy.readthedocs.io/en/2.9.0/" rel="noopener ugc nofollow" target="_blank">spot ipy</a>——一个用于访问Spotify Web API &amp; <a class="ae lv" href="https://2.python-requests.org/en/master/" rel="noopener ugc nofollow" target="_blank">请求的轻量级Python库</a>——一个用于处理API的Python模块。您可以使用CLI(命令行界面)或Jupyter笔记本来运行以下命令:</li></ul><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">install.py</p></figure><ul class=""><li id="f750" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated">导入必要的库:</li></ul><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">import.py</p></figure><ul class=""><li id="dbb1" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated">执行授权代码流。【<em class="le">我写的一个分步指南在</em><a class="ae lv" href="https://github.com/makispl/Spotify-Data-Analysis" rel="noopener ugc nofollow" target="_blank"><em class="le">GitHub</em></a><em class="le">上有；照着做，你就会没事的。</em></li></ul><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">授权. py</p></figure><p id="5ee1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">⚠️请注意，您可以选择通过相应地设置环境变量来临时提供凭据，而不是直接通过笔记本来声明凭据:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">set_env_var.py</p></figure><h2 id="a2dd" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">2.数据解释和获取</h2><p id="c1a9" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">Spotify为其开发者提供了许多描述音轨特征的音频功能(参见<a class="ae lv" href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-several-audio-features/" rel="noopener ugc nofollow" target="_blank">此处</a>了解音频功能对象的更全面的解释)。下面我列出了我们将要使用的特性，以及一个简短的解释:</p><ul class=""><li id="f6fe" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">Valence</code> : [0.0 -1.0]描述轨道听起来有多“积极”。高价意味着更积极的声音(如愉快、欣快等)。</li><li id="791e" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">Loudness</code> : [-60.0 - 0db]描述音轨的整体响度，或者说是声音的质量，它是与体力(振幅)相关的主要心理因素。</li><li id="abdd" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">Tempo</code>:以BPM(每分钟节拍数)描述轨道的整体估计速度，直接从平均节拍时间长度得出。</li><li id="49de" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">Energy</code>:【0.0-1.0】描述活动和强度的感知度量。高能量的轨道感觉很快，很响，很吵。</li><li id="0988" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">Danceability</code>:【0.0-1.0】根据音乐元素(速度、稳定性、节拍强度等)的组合，描述轨道是否适合跳舞。较低的值意味着适合跳舞的轨道较少。</li></ul><p id="72cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">数据获取</strong>部分分3步完成:(<strong class="kk iu"> a </strong>)访问用户播放列表，(<strong class="kk iu"> b </strong>)获取每个播放列表的曲目，以及(c)获取每个曲目的音频特征。对于每一步，我都创建了一个函数，它实现了相应的Spotipy方法。</p><p id="abbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> (a)访问用户的播放列表</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">fetch_plst.py</p></figure><p id="4be4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该函数返回一个数据帧，包含用户的播放列表'<code class="fe mu mv mw mx b">id</code>、<code class="fe mu mv mw mx b">name</code>和曲目数量<code class="fe mu mv mw mx b">#tracks</code>。显然，有4个候选播放列表:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/e94ff317b9897c2f65e11aa6910c5408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*Iu-GanjUw5zvb22-auiDjQ@2x.jpeg"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe mu mv mw mx b">playlists</code>数据帧</p></figure><p id="8388" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> (b)获取播放列表的曲目</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">fetch_trcs.py</p></figure><p id="2121" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个函数将<code class="fe mu mv mw mx b">playlist_id</code>作为一个参数，并返回一个数据帧，包括每个音轨的<code class="fe mu mv mw mx b">track_id</code>和<code class="fe mu mv mw mx b">track_name</code>。我们不直接调用它，而是在下面的函数中使用它。</p><p id="51ed" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> (c)提取音轨的音频特征</strong></p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">fetch_aud_ftrs.py</p></figure><p id="ba84" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">给定<code class="fe mu mv mw mx b">playlist_id</code>作为参数，该函数返回每个音轨的<code class="fe mu mv mw mx b">track_id</code>、<code class="fe mu mv mw mx b">name</code>和音频特征(<code class="fe mu mv mw mx b">danceability</code>、<code class="fe mu mv mw mx b">energy</code>、<code class="fe mu mv mw mx b">tempo</code>、<code class="fe mu mv mw mx b">loudness</code>、<code class="fe mu mv mw mx b">valence</code>)。因此，对于4个播放列表中的每一个，我们都创建了相应音频特征的数据帧:</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">aud_ftrs.py</p></figure><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nx"><img src="../Images/77091120945c5c7fa6c679236121003e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YfCuAnea-ya_E_041S67Yg@2x.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe mu mv mw mx b">df_dinner</code>数据帧样本</p></figure><p id="4d08" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是通过纯粹的编码获得了所有必要的数据，仅仅依靠API的力量！让我们看一下分析的主要部分。</p><h2 id="e24b" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">3.电子设计自动化(Electronic Design Automation)</h2><p id="7e3f" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated"><em class="le">在减少杂乱的脉络中，我这里不包括数据可视化代码，但是在GitHub</em><a class="ae lv" href="https://github.com/makispl/Spotify-Data-Analysis/blob/master/Spotify_Data_Manipulation_Python.ipynb" rel="noopener ugc nofollow" target="_blank"><em class="le">repo</em></a><em class="le">上有。</em></p><p id="6310" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们在一个单独的情节中描绘了所有播放列表的音频特征，以便容易地察觉哪个(些)最适合聚会。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ny"><img src="../Images/9b49ea356983b073de360e5fbf4b2ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-juC1fCfauV2ySEnwq8OxA.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">音频功能水平条形图</p></figure><p id="54a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显然，<em class="le"> Party </em>和<em class="le"> Pop </em>播放列表取代了其他两个，从整体上考虑了这些特性。仔细观察这两者，我们可以更好地了解哪一个占优势…</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nz"><img src="../Images/a68bc40edd3d72de642c347bc43b632b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0lUMhXhZJHalJa9xNaA_Q.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated"><code class="fe mu mv mw mx b">df_party</code> &amp; <code class="fe mu mv mw mx b">df_pop</code>横条图</p></figure><p id="eb1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了<code class="fe mu mv mw mx b">danceability</code>特性，其余都是针对<em class="le">党</em>播放列表的较高。这意味着这是我们必须选择和构建的一个，以便完善最终的播放列表。</p><h2 id="459d" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">4.播放列表优化</h2><p id="f9c0" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">主要范围是尽可能增加<em class="le">方</em>播放列表的音频功能。但是，增加一个功能可能会减少另一个功能，因此我们必须优先考虑它们。个人感觉按照假设#2，<code class="fe mu mv mw mx b">danceability</code> ( <em class="le">少年</em>)应该是首要特征，其次才是<code class="fe mu mv mw mx b">valence</code> ( <em class="le">家庭成员</em>)。</p><p id="b3c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">变量是定量的，同时也属于测量的比例尺度。因此，盒须图可以有效地描述每个特征的个体分布。这样的图和描述性统计表(通过<code class="fe mu mv mw mx b">pandas.DataFrame.describe</code>方法)一起，可能会给我们提供一个很好的视觉直觉，告诉我们属于每个特定四分位数的值的比例。</p><p id="f722" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面详细介绍了原始的<code class="fe mu mv mw mx b">df_party</code>数据框架，突出显示了<code class="fe mu mv mw mx b">danceability</code>和<code class="fe mu mv mw mx b">valence</code>平均值、第二(中间)和第三四分位数:</p><div class="lg lh li lj gt ab cb"><figure class="oa lk ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/3e7250dab2a880677cf3660721beec48.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*W4GWAVoDl4axfypGmQfPEg.jpeg"/></div></figure><figure class="oa lk og oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/56a021cff71d9a450f4f88cb6bb7e677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*-Ov-AsbHWmX7GNYtMfT-2g.jpeg"/></div><p class="lr ls gj gh gi lt lu bd b be z dk oh di oi oj translated">df _交易方描述性统计&amp;箱线图</p></figure></div><p id="5b07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">垂直的黄线是中间值，而▴符号象征着中间值。我们通常的目标是将每个特性的分布尽可能向右“推”，也就是说，沿着玩家的轨迹增加它们，以获得更好的“聚会”体验！假设#4，我们添加来自<code class="fe mu mv mw mx b">df_pop</code>(第二个入围播放列表)的曲目，每次寻找机会:</p><ul class=""><li id="889a" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated">要么向右移动平均值(增加平均音频特征)</li><li id="2626" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">或者将中间值移到平均值的右边(确保至少50%的歌曲高于平均值)</li><li id="e78d" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">或者两者都有</li></ul><p id="d948" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">方法一</strong></p><p id="c764" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个好的起点是从<code class="fe mu mv mw mx b">df_pop</code>中抽取一个样本，并将其添加到主样本(<code class="fe mu mv mw mx b">df_party</code>)中，除了它不会是随机的。通过利用<code class="fe mu mv mw mx b">pandas.DataFrame.sample()</code>函数和<code class="fe mu mv mw mx b">weights</code>参数，我们可以预先配置<code class="fe mu mv mw mx b">danceability</code>值越大，越有可能对相应的行进行采样。这种方法产生的数据帧是<code class="fe mu mv mw mx b">df_party_exp_I</code> ( <em class="le"> exp </em>代表<em class="le"> expanded </em>)。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">样本_I.py</p></figure><div class="lg lh li lj gt ab cb"><figure class="oa lk ok oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/bcd466be4017e7a1e286693187be9883.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*Oiz2vNCJihTaXog3iNTJJA.png"/></div></figure><figure class="oa lk ol oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/c31904f495efb980238cefcaf259973d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*e8rEmtpBHXYRd19NeNyLWQ.jpeg"/></div><p class="lr ls gj gh gi lt lu bd b be z dk om di on oj translated">df_party_exp_I描述性统计&amp;箱线图</p></figure></div><ul class=""><li id="1833" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated">主音频特性<code class="fe mu mv mw mx b">danceability</code>增加；平均值上升了近0.5，分布也略有优化。中位数和第三(上)四分位数已经向右移动，分别从68.20移动到69.30，从77.20移动到78.90。</li><li id="046e" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">然而，<code class="fe mu mv mw mx b">valence</code>特征减少了0.61，并且没有一个四分位数向右移动。考虑到这一点，我们应该寻找进一步优化的机会。</li></ul><p id="792b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">方法二</strong></p><p id="ada5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一次，我们将实现NumPy布尔索引，并过滤<em class="le"> Pop </em>播放列表，只返回符合我们指定标准的行。特别是我们将<code class="fe mu mv mw mx b">danceability</code>和<code class="fe mu mv mw mx b">valence</code>的特性分别设置在<em class="le">党</em>播放列表的各自均值之上，分别为69.55和51.89(参考笔记本)。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">样本_II.py</p></figure><div class="lg lh li lj gt ab cb"><figure class="oa lk ok oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/1083528800fd91c304143ca18490613c.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*4oS1LIfL19uJo0nIHghMvQ.jpeg"/></div></figure><figure class="oa lk ol oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/191b773cc335e9890cc63d6b6bcd52c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*jP9hkqIuPO6Qt9YanRQcEQ.jpeg"/></div><p class="lr ls gj gh gi lt lu bd b be z dk om di on oj translated">df_party_exp_II描述性统计和箱线图</p></figure></div><ul class=""><li id="9066" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">danceability</code>增加了更多。这次均值涨了差不多2.17！随着中值和上四分位数向右移动，沿该特征的音轨分布也被优化，这实质上意味着至少50%的播放列表高于主要声学特征的“新的”较高平均值(71.71)。</li><li id="3c49" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">然而，<code class="fe mu mv mw mx b">valence</code>特性下降了4.21，第二和第三四分位数仍然高于平均值。</li></ul><p id="a7cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">方法三</strong></p><p id="8115" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个特性的优化并不一定意味着其他特性都是一样的。为了改善这个缺点，我们将引入一个方程，其变量是声学特征，参数是我们分配给它们的权重。由于我们非常重视<code class="fe mu mv mw mx b">danceability</code>的特性，因此相应的权重应该更高。我的拆分如下:</p><p id="1686" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得分=(可跳舞性* 30) +(能量* 20) +(速度* 20) +(响度* 10) +(价数* 20)</p><p id="fe9d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们为播放列表的每一首曲目计算这个分数(创建一个新列<code class="fe mu mv mw mx b">score</code>)，然后计算各自的描述性统计数据。这样，我们可以更好地评估丰富<code class="fe mu mv mw mx b">df_party</code>的每个动作，同时在每个特性上实现更均匀的(根据权重)优化。</p><p id="10e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简而言之，<code class="fe mu mv mw mx b">df_party</code>、<code class="fe mu mv mw mx b">df_party_exp_I</code>、&amp;、<code class="fe mu mv mw mx b">df_party_exp_II</code>分别表示<code class="fe mu mv mw mx b">score</code>为7355、7215、7416。显然，尽管<strong class="kk iu">方法I </strong>带给我们比原始播放列表更好的<code class="fe mu mv mw mx b">danceability</code>，但它恶化了派对的整体体验(平均值<code class="fe mu mv mw mx b">score</code>从7355下降到7215)。就第二种方法而言，平均值<code class="fe mu mv mw mx b">score</code>上升了将近62分。然而，我们可以永远超越这些方法…</p><p id="8e60" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一次，通过使用新引入的<code class="fe mu mv mw mx b">score</code>列，我们将过滤<code class="fe mu mv mw mx b">df_pop</code>数据帧，并获取注意到比<code class="fe mu mv mw mx b">df_party</code>平均值更高的<code class="fe mu mv mw mx b">score</code>的行。从而，增加后者！</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">sample_III.py</p></figure><div class="lg lh li lj gt ab cb"><figure class="oa lk oo oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/24c2b2c71f6f255c0f69c5cdc0aaaeb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*lnFQFBNsYSA_QJcEHrTFJA.jpeg"/></div></figure><figure class="oa lk op oc od oe of paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/e282594f865258dfbf3482aff90587a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*xMtAMqe_PGRgiErRQIc5Rg.jpeg"/></div><p class="lr ls gj gh gi lt lu bd b be z dk oq di or oj translated">df_party_exp_III描述性统计&amp;箱线图</p></figure></div><p id="9538" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事实上，这一次:</p><ul class=""><li id="0185" class="my mz it kk b kl km ko kp kr na kv nb kz nc ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">danceability</code>特征上升了近1.17，<code class="fe mu mv mw mx b">valence</code>上升了4.06 ( <em class="le">均值右移</em>)</li><li id="19de" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated">两种分布都得到了改善(<em class="le">中值移至平均值</em>的右侧)</li><li id="eacc" class="my mz it kk b kl nh ko ni kr nj kv nk kz nl ld nt ne nf ng bi translated"><code class="fe mu mv mw mx b">score</code>注意到了122.3的数值，这是目前为止最好的！(<em class="le">在上下文中意味着更高的潜力，播放列表在加权音频特征中更加一致</em>)</li></ul><p id="b566" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为健全性检查，我们应该一次描绘和比较所有的盒状图——这可能看起来有点拥挤。幸运的是，变量的性质(见上文)允许使用KDE(内核密度图)。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi os"><img src="../Images/4f6f29331bed23f9c5c8a01e391b1ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ycQe5YcH2cuS49J5VHCng.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">KDE地块</p></figure><p id="f046" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，越来越清楚的是，<strong class="kk iu">方法III </strong>(绿色分配)是最好的，因为它实现了更高的右移。</p><p id="0845" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们最终得到的数据帧(<code class="fe mu mv mw mx b">df_party_exp_III</code>)包含了最终的音轨。唯一悬而未决的行动是将其转换成一个真正的播放列表。下面，第一个函数创建最终的播放列表，参数是它的名字(熊猫…还有什么？)和一段描述。另一个是从数据帧迁移磁道。请注意，授权流将再次运行，这一次使用不同的范围(<code class="fe mu mv mw mx b">playlist-modify-public</code>)。你只需再次跟随<a class="ae lv" href="https://github.com/makispl/Spotify-Data-Analysis/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">向导</a>即可。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">create_plst.py</p></figure><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">enrich_plst.py</p></figure><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="nu nv l"/></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">create_plst.py</p></figure><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ot"><img src="../Images/d30004de57cb65d33ba168dbfa41c627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ht3oavacWR73_XlSsuqD0w@2x.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">播放列表数据帧</p></figure><p id="cd30" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">瞧啊！</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/134d4c87cf30e8732ae20ed5bd513e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i68E6XLev0JHeABKIk2XtQ.png"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">作者照片</p></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><h2 id="d87c" class="lw lx it bd ly lz ma dn mb mc md dp me kr mf mg mh kv mi mj mk kz ml mm mn mo bi translated">结论</h2><p id="8e80" class="pw-post-body-paragraph ki kj it kk b kl mp ju kn ko mq jx kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">迄今为止，我们已经走了很长的路；我们处理了数百首曲目，检查了它们的音频特征，最终选择了最适合派对的曲目，只使用了Python和。这样，我们设法完成了最初提出的任务:</p><p id="730e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">✔️:我们展示了简单的(描述性的)统计和编码——当适当结合时——是如何计算出像这样耗时的活动的。</p><p id="9aaf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">✔️:我们“尝到了”请求一个可用API的重要性，以便提取有意义的数据。</p><p id="87d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">回到题目的问题，几乎不可能(至少目前)很自信地回答这个问题。无论我们是否从DJ或数据科学家的角度“深入”音乐现实，(本质上的意思是)无论工作是在甲板上还是在桌子上完成，无论是关于调音乐器还是只是…解方程，当然没有人会反对前者。更别说去打扰这样一个时刻的壮丽…</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi ou"><img src="../Images/47670e82982b6e64826ad1e5ee99db57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLlfdE7CnEli6zqKr90rJw.jpeg"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">由<a class="ae lv" href="https://unsplash.com/@jamakassi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jamakassi </a>在<a class="ae lv" href="https://unsplash.com/photos/wejxKZ-9IZg" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</p></figure><p id="174e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，就精确度、灵活性和对大量音乐数据集的彻底处理而言，后者可以通过几行代码指导计算机体面地执行任务。也就是说，有一件事是理所当然的:</p><blockquote class="ov"><p id="52c2" class="ow ox it bd oy oz pa pb pc pd pe ld dk translated">数据科学已经找到了另一个扩展和繁荣的“利基”，这意味着统计数据背后确实有“音乐”，就像节拍背后有数学一样…</p></blockquote><p id="52e0" class="pw-post-body-paragraph ki kj it kk b kl pf ju kn ko pg jx kq kr ph kt ku kv pi kx ky kz pj lb lc ld im bi translated">感谢您的阅读&amp;祝您度过愉快的一周！Jupyter <a class="ae lv" href="https://github.com/makispl/Spotify-Data-Analysis/blob/master/Spotify_Data_Manipulation_Python.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>准备立即运行。如果有任何问题，请在下面留言。无论如何…</p><p id="704d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">克隆<a class="ae lv" href="https://github.com/makispl/Spotify-Data-Analysis" rel="noopener ugc nofollow" target="_blank"> repo </a>，运行代码……让<code class="fe mu mv mw mx b">Pandas</code>摇滚起来！</p></div></div>    
</body>
</html>