<html>
<head>
<title>Git-Flow is the Source of Productivity, Not Confusion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git-Flow 是生产力的源泉，而不是混乱</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/git-flow-is-the-source-of-productivity-not-confusion-8abda7c5fb30?source=collection_archive---------37-----------------------#2020-06-01">https://towardsdatascience.com/git-flow-is-the-source-of-productivity-not-confusion-8abda7c5fb30?source=collection_archive---------37-----------------------#2020-06-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c4aa" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">行业笔记</h2><div class=""/><div class=""><h2 id="02dc" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">初创公司两个最基本的 git 流程的具体细节</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/fe59ae104d0ae5ddfb6672544729f5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uYgS7p_vXoXNTG3w"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">Denys Nevozhai 在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1459" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">开发工作流的架构是基于发布的质量和数量来设计的。这里的质量<strong class="lk jd">T5 指的是每个版本中无 bug 或特性集的状态。数量是指开发过程中发布的次数。这种架构通常没有那么复杂；然而，这可能会引起混乱。</strong></p><p id="fe2d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">基于 git 的开发工作流，也称为 git 流，是构建和发布软件的一系列开发步骤。Git 是一种流行且强大的版本控制技术，被许多公司使用，同时还有其他技术，如 Perforce 或 Mercurial。在本文中，我使用 git-flow 而不是基于 git 的开发工作流，不失一般性。这与这篇<a class="ae lh" href="https://nvie.com/posts/a-successful-git-branching-model/" rel="noopener ugc nofollow" target="_blank">帖子</a>中介绍的 GitFlow 不同。</p><p id="3a0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，我解释了两个对创业公司至关重要的 git-flow 架构。了解这些架构的细节可能会解决开发、产品和管理团队之间不必要的冲突。最后，我解释了 git 流的具体细节，这有助于更好地理解它。</p><p id="a934" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，与本文中的内容相比，git-flow 架构可能会变得更加复杂。然而，如果你学习了两个最基本的 git 流的细节，你将很容易理解任何复杂的 git 流。</p><h1 id="4953" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">最常见的两种 git 流是什么？</h1><p id="d288" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">软件行业中使用了各种各样的 git 流。不过有两个是创业公司常用的。下面，我首先描述两个场景，然后解释适用于这些场景的两个 git 流。</p><ul class=""><li id="852f" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated"><strong class="lk jd">场景 1。</strong>你需要一个频繁发布的快速开发过程。您不希望让把关者签署发布。您接受意外引入主分支的小错误，而不会导致主要功能停止。另外，您不需要控制每个版本中的特性列表。在这种情况下，你必须使用高频率和低质量的架构。</li><li id="a0dc" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><strong class="lk jd">场景二。</strong>你的用户数量相对较多。您必须在每次发布之前广泛验证产品的质量。您希望有一个不断审查产品的团队，以及一个签署发布的把关人。在这种情况下，你必须使用低频和高质量的架构。</li></ul><blockquote class="np nq nr"><p id="d835" class="li lj ns lk b ll lm kd ln lo lp kg lq nt ls lt lu nu lw lx ly nv ma mb mc md im bi translated">把关者是一个定期检查产品质量并决定产品何时发布的人。在大多数创业公司，产品经理都是把关人。</p></blockquote><h2 id="3f01" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—高频率和低质量</h2><p id="0b7c" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在这个 git-flow 中，只有一个主要的源分支，在那里开发被合并，发布被提取。</p><p id="8a57" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在创业的早期阶段，开发工作流程不能因为任何原因而延迟。没有付费客户，主要精力放在开发上。因此，开发团队的目标是只通过自动化测试来检测 bug，并接受在新版本中有一些 bug。由于这个 git-flow 没有签署发布的看门人，bug 只是通过自动化测试溜到发布中。一旦发现这些错误，必须立即修复。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/2c50eb508fae823c7647308f2de40b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ObXQQSeyDExy_ryivfLUxw.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">没有看门人的 git 流</p></figure><h2 id="68f6" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—低频和高质量</h2><p id="7ed1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">在这个 git 流中，有两个主要的源分支:主和发布。开发团队在主分支上工作以构建产品，在发布分支上工作以准备发布产品。</p><p id="5f6a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">发布分支为产品经理创建了一个独立的环境，以便对特性开发和发布质量有更多的控制。在产品团队中，QA 工程师在发布分支上运行手动测试，以发现并报告必须修复并合并到发布分支中的 bug。最后，产品经理作为把关人负责签署发布。</p><blockquote class="oi"><p id="1d94" class="oj ok it bd ol om on oo op oq or md dk translated">高质量的软件伴随着低频发布的成本。</p></blockquote><p id="bf76" class="pw-post-body-paragraph li lj it lk b ll os kd ln lo ot kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">无论如何，100%的测试覆盖率是不可能的。因此，bug 也可能在这个 git 流的测试过程中溜走。然而，这种架构中的发布质量比我们从前一种架构中得到的更可靠。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ox"><img src="../Images/e2d4d2a139e8aa46512ffe8bda733c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wO8n__oa75qazRWvgAkHBg.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">具有看门人的 git 流</p></figure><h1 id="ae98" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">二。git 流的主要步骤是什么？</h1><h2 id="d1ae" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—开发</h2><p id="4afd" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">git 流程的第一步是代码变更，即功能开发或缺陷修复。当您想要在代码库中进行更改时，您必须始终创建一个隔离分支，以防止在源分支中进行不必要的更改。</p><p id="6cef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在您完成开发之后，您必须通过一个标准的过程将最近的变更合并到源分支中。<a class="ae lh" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>称这个流程为 pull-request，<a class="ae lh" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> GitLab </a>称之为 merge-request，两者指的是同一个流程。</p><p id="6536" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这个过程中，代码更改等待开发人员级别的测试(例如单元、集成和回归测试)和代码审查。有一些应用程序如<a class="ae lh" href="https://houndci.com/" rel="noopener ugc nofollow" target="_blank"> Hound </a>也使代码审查过程部分自动化。如果代码更改可以通过测试并获得所需的批准，它们将被合并到源分支中。而且，发展还在继续！</p><h2 id="1bff" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—测试</h2><p id="bf0a" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">质量软件是关于<strong class="lk jd"> </strong>测试和开发之间的平衡。在运行测试的 git 流中有两个关键点。首先，在将代码变更合并到源分支(例如，主版本或发布版本)之前，其次，在将产品交付给客户之前。</p><p id="4e31" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">知道了软件测试的重要性，问题是我们有多少类型的测试。测试可以是自动的，也可以是手动的。<strong class="lk jd">自动化测试</strong>由 DevOps 解决方案如<a class="ae lh" href="https://circleci.com/" rel="noopener ugc nofollow" target="_blank"> CircleCI </a>和测试框架如<a class="ae lh" href="https://docs.pytest.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> PyTest </a>以完全自动化的方式执行。<strong class="lk jd">手动测试</strong>由产品团队执行，旨在覆盖自动化测试未测试的零件。</p><p id="d17e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，我根据软件测试为开发工作流提供的高层次价值对软件测试进行分类。有两种不同类型的测试:开发者级和用户级。</p><ul class=""><li id="6f5d" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated"><strong class="lk jd">开发人员级别的测试</strong>比如单元、集成和回归测试评估代码的健全性。它们在 git 流的每次提交之后、构建过程之前执行。这些测试是完全自动化的。其目标是确保<strong class="lk jd">代码的健全性</strong>并<strong class="lk jd">加快开发的步伐</strong>。开发人员是工作流中这些测试的所有者。</li><li id="77aa" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><strong class="lk jd">用户级测试</strong>如验收和性能测试评估整体解决方案。它们在部署后执行。这些测试是手动和自动的。它的目标是<strong class="lk jd">模拟用户体验</strong>和<strong class="lk jd">从整体上衡量服务质量</strong>。在大多数创业公司中，产品经理是工作流中这些测试的所有者，因为这些测试大多是面向用户的。</li></ul><blockquote class="np nq nr"><p id="f85e" class="li lj ns lk b ll lm kd ln lo lp kg lq nt ls lt lu nu lw lx ly nv ma mb mc md im bi translated">在大多数情况下，您必须非常依赖自动化测试来检查健全性和质量。然而，这并不意味着在这个过程中不能使用手工测试。</p></blockquote><p id="db10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过运行自动化过程在每次提交时集成和验证代码库的实践被称为<strong class="lk jd">持续集成</strong>。</p><h2 id="d2ef" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—构建</h2><p id="0c95" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">构建指的是编译和打包源代码及其工件的过程。构建步骤的输出是一个二进制文件，可以部署到云上。</p><p id="daa0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">举例。</strong>当您使用 Docker 构建二进制文件时，构建过程的输出被称为 Docker 映像，它是构建它的虚拟机环境的快照。</p><p id="6cd1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些二进制文件必须存储在二进制库管理器上，例如<a class="ae lh" href="https://jfrog.com/artifactory/" rel="noopener ugc nofollow" target="_blank"> JFrog </a>或<a class="ae lh" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> DockerHub </a>。当您将它们存储在存储库管理器中时，您必须对它们进行标记，以便可以轻松地搜索和检索它们，尤其是当您想要自动部署它们时。例如，您可以使用 git 创建的 commit ID 来标记二进制文件，因为它确切地显示了解决方案是在哪里构建的，并且它作为惟一的标识符工作。</p><p id="0701" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从每次提交构建和存储二进制解决方案的实践被称为<strong class="lk jd">连续交付</strong>。</p><h2 id="0308" class="nw mf it bd mg nx ny dn mk nz oa dp mo lr ob oc mq lv od oe ms lz of og mu iz bi translated">—部署</h2><p id="29a1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">部署是指所有构建工件在云或服务器上收集、执行和编排的过程，使用的编排器有<a class="ae lh" href="http://mesos.apache.org/" rel="noopener ugc nofollow" target="_blank"> Mesos </a>、<a class="ae lh" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>或<a class="ae lh" href="https://docs.docker.com/get-started/swarm-deploy/" rel="noopener ugc nofollow" target="_blank"> Docker Swarm </a>。</p><p id="8b58" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">举例。</strong>当您使用 Docker 部署解决方案时，会创建一个 Docker 容器，它可以在您的本地机器上运行，也可以在云基础架构(如 Amazon EC2)的计算节点上运行。</p><p id="403b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">最佳实践</strong>是为每个主和发布分支指定一个云环境。主分支和发布分支的云环境分别被称为开发(dev)和生产(prod)。在更复杂的工作流中，有一个登台环境超出了本文的范围。</p><p id="2514" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果使用<strong class="lk jd">微服务架构</strong>，可以独立部署前端、后端、数据库等每个微服务。微服务的集合被编排来构建主服务。微服务架构允许您独立、高效地测试、维护和部署松散耦合的服务。没有必要说您需要正确地配置这个编排，这也超出了本文的范围。</p><p id="3c54" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在没有任何干预的情况下持续部署解决方案的实践被称为<strong class="lk jd">持续部署</strong>。</p><h1 id="ea54" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">临终遗言</h1><p id="2a7a" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">您可以基于行业需求、公司阶段或客户期望使用不同的 git-flow 架构。在这篇文章中，我描述了每个人都必须知道的拥有一个高效团队和减少不必要冲突的要点。因此，您应该基于您的需求采用 git-flow，并使用它，直到它在您的团队中变得自然。</p><h1 id="b471" class="me mf it bd mg mh mi mj mk ml mm mn mo ki mp kj mq kl mr km ms ko mt kp mu mv bi translated">感谢阅读！</h1><p id="5340" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">如果你喜欢这个帖子，想支持我…</p><ul class=""><li id="72b2" class="nb nc it lk b ll lm lo lp lr nd lv ne lz nf md ng nh ni nj bi translated"><em class="ns">跟我上</em> <a class="ae lh" href="https://medium.com/@pedram-ataee" rel="noopener"> <em class="ns">中</em> </a> <em class="ns">！</em></li><li id="2ca5" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><em class="ns">在</em> <a class="ae lh" href="https://www.amazon.com/Pedram-Ataee/e/B08D6J3WNW" rel="noopener ugc nofollow" target="_blank"> <em class="ns">亚马逊</em> </a> <em class="ns">上查看我的书！</em></li><li id="6029" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><em class="ns">成为</em> <a class="ae lh" href="https://pedram-ataee.medium.com/membership" rel="noopener"> <em class="ns">中的一员</em> </a> <em class="ns">！</em></li><li id="9a4e" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><em class="ns">连接上</em><a class="ae lh" href="https://www.linkedin.com/in/pedrama/" rel="noopener ugc nofollow" target="_blank"><em class="ns">Linkedin</em></a><em class="ns">！</em></li><li id="6b66" class="nb nc it lk b ll nk lo nl lr nm lv nn lz no md ng nh ni nj bi translated"><em class="ns">关注我</em> <a class="ae lh" href="https://twitter.com/pedram_ataee" rel="noopener ugc nofollow" target="_blank"> <em class="ns">推特</em> </a> <em class="ns">！</em></li></ul><div class="oy oz gp gr pa pb"><a href="https://pedram-ataee.medium.com/membership" rel="noopener follow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd jd gy z fp pg fr fs ph fu fw jc bi translated">通过我的推荐链接加入 Medium—Pedram Ataee 博士</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">pedram-ataee.medium.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp lb pb"/></div></div></a></div></div></div>    
</body>
</html>