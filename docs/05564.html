<html>
<head>
<title>How To Deploy A Postgres Database For Free</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何免费部署Postgres数据库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-deploy-a-postgres-database-for-free-95cf1d8387bf?source=collection_archive---------6-----------------------#2020-05-10">https://towardsdatascience.com/how-to-deploy-a-postgres-database-for-free-95cf1d8387bf?source=collection_archive---------6-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4c97b395dae4d3b034edd37c7830cb31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HnIroc9VOY6T94utDLStoA.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">凯文·Ku在<a class="ae jg" href="https://unsplash.com/photos/w7ZyuGYNpRQ" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的图片</p></figure><h2 id="df54" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">数据存储</h2><div class=""/><div class=""><h2 id="e658" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">使用流行的数据库管理系统获得实际经验</h2></div><p id="8a96" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">PostgreSQL是世界上最流行的关系数据库管理系统之一，为一些最大的企业提供支持。如果你下载Postgres，你可能会很恼火地发现你只能把它托管在你机器的localhost服务器上，除非你支付一笔经常性的费用把它托管在AWS或Azure这样的平台上。在本指南中，我将向您展示如何使用Heroku免费部署您的数据库，并使用Python向其写入数据。</p><h1 id="2661" class="md me jj bd mf mg mh mi mj mk ml mm mn ky mo kz mp lb mq lc mr le ms lf mt mu bi translated">先决条件:</h1><p id="e304" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated"><a class="ae jg" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" rel="noopener ugc nofollow" target="_blank">安装最新版本的Postgres </a>，<a class="ae jg" href="https://www.pgadmin.org/download/" rel="noopener ugc nofollow" target="_blank">安装pgadmin4 </a>，<a class="ae jg" href="https://www.python.org/downloads/release/python-377/" rel="noopener ugc nofollow" target="_blank">安装python3 </a>，pip3安装<a class="ae jg" href="https://pypi.org/project/SQLAlchemy/" rel="noopener ugc nofollow" target="_blank"> sqlalchemy </a>和<a class="ae jg" href="https://pypi.org/project/psycopg2/" rel="noopener ugc nofollow" target="_blank"> psycopg2 </a></p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="2559" class="md me jj bd mf mg nh mi mj mk ni mm mn ky nj kz mp lb nk lc mr le nl lf mt mu bi translated">1:创建你的Heroku账户&amp;创建你的第一个应用程序</h1><p id="7a67" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">部署我们免费Postgres数据库的第一步是<a class="ae jg" href="https://signup.heroku.com/login" rel="noopener ugc nofollow" target="_blank">在Heroku </a>上创建一个免费账户。Heroku是一个云平台，你可以在上面部署你的应用和数据库。创建您的帐户并登录后，您应该会看到类似以下内容的控制面板屏幕:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/7d8fed5bf8cf04bfa3371400b00725bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulOZYEacODhGl9JrC8uLnA.png"/></div></div></figure><p id="3b81" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你的新帐户不会有我上面列出的任何应用程序。找到并点击“创建新应用”按钮，进入以下页面:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nr"><img src="../Images/a6e20de5b5c080031ab4919e13f3b1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PgAqfv_62e5IvqUohtuZwA.png"/></div></div></figure><p id="73e6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为尚未使用的应用程序选择一个名称并创建它。点击“创建应用程序”按钮后，您应该会看到以下页面:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/95fa3a31d99a916c7cd1ef1e3359fa4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b64Aok2xOe9hIph51qqn-Q.png"/></div></div></figure><p id="03c7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你现在有了你的第一个Heroku应用程序，让我们添加一个数据库！</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="3ca7" class="md me jj bd mf mg nh mi mj mk ni mm mn ky nj kz mp lb nk lc mr le nl lf mt mu bi translated">2:将Postgres数据库添加到您的应用程序中</h1><p id="7200" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">从你的应用程序的Heroku页面点击“资源”标签，查看你的项目拥有的Dynos和附加组件的空列表。我们希望将Heroku Postgres附加组件附加到您的项目中，因此请单击下图右侧的紫色“查找更多附加组件”按钮:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/b3fbf0dede02bf2af7e8ee51cb17b94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwFv_z_vpGEX9E73JtS6Yw.png"/></div></div></figure><p id="d5cc" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">进入Heroku附件页面后，在页面右上角的“搜索元素”栏中输入“Heroku Postgres ”:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/27475fb32fecd6421e054b547c8e3b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FDyo248i7Kg8YPwYDt4EEw.png"/></div></div></figure><p id="5f2c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你现在应该已经找到了Heroku Postgres的附件，如下图所示。从这里，点击右上角的紫色“安装Heroku Postgres”按钮，这样我们就可以将其添加到您新创建的应用程序中。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/2aa394a4ee2b528c171c7e534ed7b9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8I8fl-tg_VfKy-d4Rqij8g.png"/></div></div></figure><p id="71b7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在将Heroku Postgres附加组件附加到您的项目的最后一页，您可以选择要附加该附加组件的计划和项目。确保你选择了“业余爱好自由发展”计划，这样你就不用为任何事情付费了！之后，搜索您的项目名称，选择它，然后单击紫色的“Provision add-on”按钮。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/16e01d1771f070007408d3220fda8b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jq6NXWhjXPVkFZ6w9BEbHQ.png"/></div></div></figure><p id="6466" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">让我们学习如何连接到您的新Postgres数据库！</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="70aa" class="md me jj bd mf mg nh mi mj mk ni mm mn ky nj kz mp lb nk lc mr le nl lf mt mu bi translated">3:在pgadmin4中连接到数据库</h1><p id="4bfc" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">要连接到您的新数据库，请返回Heroku应用程序的“资源”页面。你应该看到附件“Heroku Postgres”。点击下图右下方的“Heroku Postgres”链接，进入数据库管理页面。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nv"><img src="../Images/bb6d2bd1ca81fbf855369f290493bf79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrS1PiY0qLwvcA6dY-I0bQ.png"/></div></div></figure><p id="9434" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">“数据库概览”页显示了有关数据库的高级信息。最初，您应该没有连接、行或表。数据大小从7.9兆字节开始，这说明了与您的数据库相关的程序文件，您永远不需要看到或担心。一旦您添加更多数据，该大小将会增加。在免费计划中，您的数据库中只允许有20个连接和10，000行数据——这对于个人项目和实验来说非常实用。</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/db3939a6a387712cbdd3a10dbb31dae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V2ATRCyOLENVe2t6UuBtJQ.png"/></div></div></figure><p id="132d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果您转到“设置”选项卡，然后单击“查看凭据”按钮，您将能够看到用于连接到数据库的数据库凭据。不要分享这些信息！</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nw"><img src="../Images/6a7f1374cde9edfeccf5ad3a3dfb8b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8uJ9THaeRd5H5OGlrZJaMg.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><strong class="bd nx">注意</strong>:以上凭证均未激活</p></figure><p id="93d4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在我们有了数据库凭证，可以连接到pgadmin。打开您应该已经安装在计算机上的pgadmin应用程序，它应该在您的默认浏览器中打开一个窗口，如下所示:</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/50726b5c5046261af945fab8c6f19363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjOmuB5sCfFRDIaXUhR4Dg.png"/></div></div></figure><p id="62db" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这里，您可以单击pgadmin仪表板上的“Add New Server”按钮，并在提示符下输入您的数据库凭据。您不需要角色或服务:</p><div class="nn no np nq gt ab cb"><figure class="nz iv oa ob oc od oe paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/6e9c745e51f3d80102cf7cc8d6ff788f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*n3MLnwkEZbDCnU-6XZEISw.png"/></div></figure><figure class="nz iv of ob oc od oe paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/73584e2fe881021dcd1420edc8c504f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*UIrfKqEcnI4uZacrtAhyig.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk og di oh oi translated"><strong class="bd nx">注意</strong>:以上凭证均不有效</p></figure></div><p id="d17a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">一旦你正确地输入了所有的字段，你可以点击“保存”,应该会看到你的Postgres服务器如下所示。这是一个有许多数据库的共享服务器，您只能通过在列表中找到它来访问您的数据库:</p><div class="nn no np nq gt ab cb"><figure class="nz iv oj ob oc od oe paragraph-image"><img src="../Images/7906d26331bf3b02bfe6d4c98a51eac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*XK8jjP_c12L3aXWkvgzlew.png"/></figure><figure class="nz iv ok ob oc od oe paragraph-image"><img src="../Images/f7bd185c6d0a944d2dc2377c2f85c86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*8Om8qWlDbsGcXxi8j5q4-g.png"/></figure></div><p id="200c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您现在已经连接到pgadmin中的免费Postgres数据库了！</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="2426" class="md me jj bd mf mg nh mi mj mk ni mm mn ky nj kz mp lb nk lc mr le nl lf mt mu bi translated">4:从数据库中写入和读取数据</h1><p id="cca7" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">在最后一步中，我们将编写python代码来创建一个表，并将数据添加到数据库中。我们将首先创建一个<strong class="lj jt"> config.py </strong>文件来存储我们的数据库凭证。我们的数据库凭据应该存储在一个单独的文件中，这样我们就可以将该文件添加到我们的。gitignore在GitHub上分享我们的代码，不用担心有人访问我们的数据库。</p><h2 id="884b" class="ol me jj bd mf om on dn mj oo op dp mn lq oq or mp lu os ot mr ly ou ov mt jp bi translated">配置. py</h2><pre class="nn no np nq gt ow ox oy oz aw pa bi"><span id="9137" class="ol me jj ox b gy pb pc l pd pe"><strong class="ox jt">host</strong> = ec2-34-200-42-57.compute-1.amazonaws.com<br/><strong class="ox jt">port</strong> = 5432<br/><strong class="ox jt">database</strong> = dfg5a7fake6perlms<br/><strong class="ox jt">user</strong> = fdpbgfakeggheshfbv<br/><strong class="ox jt">password</strong> = a7cb88511fakea656dd5bb175220caa9646defd4f79e62085486b</span></pre><p id="2b34" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面的脚本<strong class="lj jt"> create_table.py </strong>与<strong class="lj jt"> config.py </strong>位于同一个文件夹中。首先，我们导入所有的配置变量和sqlalchemy。然后，我们创建一个引擎，它接受所有的配置变量，并使用“<strong class="lj jt"> engine.connect() </strong>”将它们连接到数据库。一旦我们连接到数据库，我们就获取数据库的元数据，这样我们就可以在"<strong class="lj jt"> metadata = MetaData() </strong>"行上修改模式。我们已经准备好创建我们的第一个表了！</p><h2 id="acf3" class="ol me jj bd mf om on dn mj oo op dp mn lq oq or mp lu os ot mr ly ou ov mt jp bi translated">创建第一个表格</h2><pre class="nn no np nq gt ow ox oy oz aw pa bi"><span id="84f6" class="ol me jj ox b gy pb pc l pd pe">from <strong class="ox jt">sqlalchemy </strong>import *<br/>from <strong class="ox jt">config </strong>import <strong class="ox jt">host</strong>, <strong class="ox jt">port</strong>, <strong class="ox jt">database</strong>, <strong class="ox jt">user</strong>, <strong class="ox jt">password</strong></span><span id="04dc" class="ol me jj ox b gy pf pc l pd pe"><strong class="ox jt">conn_str </strong>= f"postgresql://{<strong class="ox jt">user</strong>}:{<strong class="ox jt">password</strong>}@{<strong class="ox jt">host</strong>}/{<strong class="ox jt">database</strong>}"<br/><strong class="ox jt">engine </strong>= create_engine(<strong class="ox jt">conn_str</strong>)<br/><strong class="ox jt">connection </strong>= <strong class="ox jt">engine</strong>.connect()<br/><strong class="ox jt">metadata </strong>= MetaData()</span><span id="bdf6" class="ol me jj ox b gy pf pc l pd pe"><strong class="ox jt">first_tb </strong>= Table('first_table', metadata,<br/>   Column('id', Integer, primary_key=True),<br/>   Column('name', String(255), nullable=False),<br/>   Column('isHappy', Boolean, nullable=False)<br/>)</span><span id="51c8" class="ol me jj ox b gy pf pc l pd pe"><strong class="ox jt">metadata</strong>.create_all(<strong class="ox jt">engine</strong>)<br/><strong class="ox jt">query </strong>= insert(<strong class="ox jt">first_tb</strong>).values(id=1, name="Student", isHappy=True)<br/><strong class="ox jt">ResultProxy </strong>= connection.execute(<strong class="ox jt">query</strong>)</span></pre><p id="b7a3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在以“<strong class="lj jt"> first_table </strong>”开始的行上，我们通过传递表名、元数据和所有列来创建我们的表。对于每一列，我们可以设置名称、类型以及我们希望每一列具有的约束。最后，在“<strong class="lj jt">metadata . create _ all(engine)</strong>”行上，我们在数据库中创建新表。现在我们的表已经创建好了，我们可以使用<strong class="lj jt"> insert() </strong> sqlAlchemy方法创建一个查询，并向它提供表和我们想要添加到该表中的值。最后，我们可以在最后一行执行查询。</p><p id="f38b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">回到pgadmin，我们可以转到:" database _ name "-&gt; " Schemas "-&gt; " public "-&gt; " Tables "。如果你右击“first_table”，你可以选择:“查看/编辑数据”-&gt;“所有行”。这将运行一个选择查询，并将我们添加的行返回给您——如下所示！</p><figure class="nn no np nq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pg"><img src="../Images/7a9b9458f55a0e649b2f54bae124a9ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_lKv_TmB8TkyQDhwIyAjQ.png"/></div></div></figure></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h1 id="399c" class="md me jj bd mf mg nh mi mj mk ni mm mn ky nj kz mp lb nk lc mr le nl lf mt mu bi translated">结论</h1><p id="81a2" class="pw-post-body-paragraph lh li jj lj b lk mv kt lm ln mw kw lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">感谢阅读！我很乐意听到你的反馈或回答你的任何问题，所以请在下面评论。如果任何图片或信息不再是最新的，请让我知道！</p></div></div>    
</body>
</html>