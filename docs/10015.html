<html>
<head>
<title>Working with Amazon SNS with Boto3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过 Boto3 使用 Amazon SNS</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/working-with-amazon-sns-with-boto3-7acb1347622d?source=collection_archive---------7-----------------------#2020-07-15">https://towardsdatascience.com/working-with-amazon-sns-with-boto3-7acb1347622d?source=collection_archive---------7-----------------------#2020-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5b5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">完整的备忘单。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/578d168031578fc5c731f4351d83297f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcDgNHyaRvkPq3MyocAFWg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jamie452?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">杰米街</a>上的<a class="ae ky" href="https://unsplash.com/s/photos/notification?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></p></figure><p id="0720" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">亚马逊简单通知服务，或 SNS，允许我们自动发送消息，如电子邮件或短信。我们还可以通过 HTTP Post 向指定的 URL 发送消息，这是一种分离微服务的便捷方式。当使用 Python 时，人们可以通过 Boto3 包轻松地与 SNS 进行交互。在这篇文章中，我将把我在使用 SNS 时经常用到的 Python 命令汇总在一起。希望你会觉得有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/4fa79d8e1efffb34c1c49ca6a5ee5eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Hnd_TV9wu8KY5sWnN_sTw.png"/></div></div></figure><p id="02e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从一些基本的社交网络概念开始。你可以把 SNS 系统想象成一个群聊。一旦您在聊天中发布消息，所有参与者都会收到一个弹出消息。在 SNS 设置中，群聊将被称为<strong class="lb iu">话题</strong>。您可以<strong class="lb iu">向主题发布</strong>消息，一旦发布，所有主题<strong class="lb iu">订阅者</strong>都会收到通知。</p><p id="b706" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AWS 资源可以通过<strong class="lb iu">亚马逊资源名称</strong> <strong class="lb iu"> (ARNs) </strong>唯一标识。每个主题都有其独特的主题卡，每个主题的订阅都有其独特的订阅号。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/4fa79d8e1efffb34c1c49ca6a5ee5eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Hnd_TV9wu8KY5sWnN_sTw.png"/></div></div></figure><h2 id="9f03" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">设置客户端</h2><p id="62cf" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">要用 Boto3 访问任何 AWS 服务，我们必须用一个客户机连接到它。在这里，我们创建一个 SNS 客户端。我们指定保存消息的区域。我们还必须传递访问密钥和密码，这可以在 AWS 控制台中生成，如这里的<a class="ae ky" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey" rel="noopener ugc nofollow" target="_blank">所述</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h2 id="b0e2" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">主题:列出、创建和删除</h2><p id="947b" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">为了创建一个新的主题，我们使用了<code class="fe mw mx my mz b">create_topic()</code>函数，传递所需的名称。一旦主题被创建，我们可以通过从由<code class="fe mw mx my mz b">craete_topic()</code>返回的对象中提取<code class="fe mw mx my mz b">TopicArn</code>键来获得它的 ARN。<br/>要列出 AWS 上已经存在的主题，我们可以使用<code class="fe mw mx my mz b">list_topics()</code>函数并从其输出中提取<code class="fe mw mx my mz b">Topics</code>键。要删除一个主题，我们只需将它的 ARN 传递给<code class="fe mw mx my mz b">delete_topic()</code>函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h2 id="4203" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">订阅:列出、创建和删除</h2><p id="6431" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">为了创建主题的新订阅，我们调用<code class="fe mw mx my mz b">subscribe()</code>函数，传递要订阅的主题的 ARN、协议(例如 SMS 或电子邮件)和端点(例如 SMS 协议的电话号码或电子邮件协议的电子邮件地址)。一旦订阅被创建，我们可以通过从由<code class="fe mw mx my mz b">subscribe()</code>返回的对象中提取<code class="fe mw mx my mz b">SubscriptionArn</code>键来获得它的 ARN。<br/>要列出 AWS 上现有的所有订阅，我们可以使用<code class="fe mw mx my mz b">list_subscriptions()</code>函数并从其输出中提取<code class="fe mw mx my mz b">Subscriptions</code>键。类似地，为了列出特定主题的订阅，我们调用了<code class="fe mw mx my mz b">list_subscriptions_by_topic()</code>函数。<br/>要删除一个订阅，我们将它的 ARN 传递给<code class="fe mw mx my mz b">unsubscribe()</code>函数。为了删除多个订阅，例如具有相同协议的所有订阅，我们可以使用下面代码块底部的 for-loop 对它们进行循环。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h2 id="123e" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">发布到主题</h2><p id="4d38" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">要向主题发布消息，我们只需调用<code class="fe mw mx my mz b">publish()</code>函数，传递主题的 ARN、想要的消息和可选的主题(它将只用于电子邮件消息)。<br/>或者，我们可以发布没有任何主题或订阅的 SMS 消息。为此，我们调用<code class="fe mw mx my mz b">publish()</code>函数，将电话号码和消息文本作为参数传递。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/4fa79d8e1efffb34c1c49ca6a5ee5eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Hnd_TV9wu8KY5sWnN_sTw.png"/></div></div></figure><p id="0f04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p><p id="851b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，为什么不订阅电子邮件更新我的新文章呢？并且通过<a class="ae ky" href="https://michaloleszak.medium.com/membership" rel="noopener"> <strong class="lb iu">成为媒介会员</strong> </a>，可以支持我的写作，获得其他作者和我自己的所有故事的无限访问权限。</p><p id="361b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要咨询？你可以问我任何事情，也可以在这里为我预约 1:1<a class="ae ky" href="http://hiretheauthor.com/michal" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a>。</p><p id="9d93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以试试<a class="ae ky" href="https://michaloleszak.github.io/blog/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">我的其他文章</strong> </a>中的一篇。不能选择？从这些中选择一个:</p><div class="na nb gp gr nc nd"><a rel="noopener follow" target="_blank" href="/working-with-amazon-s3-buckets-with-boto3-785252ea22e0"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">使用 Boto3 处理亚马逊 S3 桶。</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">完整的备忘单。</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ks nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a rel="noopener follow" target="_blank" href="/non-linear-regression-basis-expansion-polynomials-splines-2d7adb2cc226"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">非线性回归:基础扩展、多项式和样条</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">如何用多项式和样条捕捉非线性关系？</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="ns l no np nq nm nr ks nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a rel="noopener follow" target="_blank" href="/model-selection-assessment-bb2d74229172"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">模型选择和评估</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">超越火车价值测试分裂</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">towardsdatascience.com</p></div></div><div class="nm l"><div class="nt l no np nq nm nr ks nd"/></div></div></a></div></div></div>    
</body>
</html>