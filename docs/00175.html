<html>
<head>
<title>Make your own Python package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作自己的Python包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/make-your-own-python-package-6d08a400fc2d?source=collection_archive---------16-----------------------#2020-01-06">https://towardsdatascience.com/make-your-own-python-package-6d08a400fc2d?source=collection_archive---------16-----------------------#2020-01-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div class="gh gi ir"><img src="../Images/a3d026e9dc1fe46a7c5289cf3d68a019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*DkpdC3lSQ6P4sXLVWPcpyA.png"/></div></figure><div class=""/><p id="51e0" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">无论您是开发人员还是偶尔的Python用户，很难想象一个Python脚本在代码的最开始没有一堆<em class="kv"> import语句(或包)</em>。</p><p id="1b1f" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">但是你有没有想过这些神奇的进口包是从哪里来的？</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi kw"><img src="../Images/97b82853b8b9bf716bf68c2add862a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oWn41D3ePX8m0DF-qD9P6Q.png"/></div></div><p class="lf lg gj gh gi lh li bd b be z dk translated">Import语句使Python模块化且易于使用</p></figure><p id="dfaa" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在本文中，我将指导您如何制作一个Python包，带有您自己的自定义函数，您可以用任何代码导入它。这是在团队内部共享现成代码的最快方式，也是对Python社区做出贡献的最佳方式，因为任何用户都可以简单地<em class="kv"> pip安装</em>您的包并导入它。</p><p id="62f6" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">所以我们开始吧！</p><p id="8346" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">第一步。制作包装元素</strong></p><p id="7677" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我假设你已经熟悉Python，但是制作一个包需要知道一些细节。我为您提供了一个预先发布的包(名为<strong class="jz jb"> dist_alx </strong>)，它基本上是一个文件/文件夹<strong class="jz jb"> </strong>，其中<strong class="jz jb"> </strong>包含了一个包在发布之前必须拥有的所有必要元素。我们将使用这个文件夹作为指南，因为所有Python包都必须具有相同的结构。<em class="kv"> dist_alx </em>包具体做什么，这里<a class="ae lj" href="https://github.com/maleckicoa/dist_alx/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">解释</a>。</p><p id="1fc9" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">要获取该文件夹，请转到我的<a class="ae lj" href="https://github.com/maleckicoa/dist_alx" rel="noopener ugc nofollow" target="_blank"> Github库</a>，在您的机器上下载<em class="kv"> dist_alx.zip </em>并将其解压缩。该父文件夹<em class="kv"> dist_alx </em>包含以下文件:</p><ul class=""><li id="36ea" class="lk ll ja jz b ka kb ke kf ki lm km ln kq lo ku lp lq lr ls bi translated">setup.py文件-包含包元数据</li><li id="1a76" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">setup.cfg文件-用于存储设置的配置文件格式</li><li id="3f27" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">与父文件夹同名的子文件夹(在本例中为<em class="kv"> dist_alx </em>)，其中存储了您的包的实际Python代码</li></ul><p id="9ab2" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">每个包装都必须具备以上三个要素。除此之外，包还应该包含以下内容:</p><ul class=""><li id="e7d4" class="lk ll ja jz b ka kb ke kf ki lm km ln kq lo ku lp lq lr ls bi translated">您的Python包必须有一个唯一的名称。没有两个现有的Python包可以共享同一个名称。</li><li id="52f8" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">父文件夹和子文件夹必须具有相同的名称，即您的包的名称。</li><li id="7955" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">setup.py文件中有参数<strong class="jz jb"> <em class="kv">名称</em> </strong>和<strong class="jz jb">包</strong>。它们还应该与您的包同名。</li><li id="3717" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">注意<strong class="jz jb">版本</strong>参数，如果你修改了你的包并重新发布它，你也应该修改版本</li><li id="eb5b" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">在setup.py文件中有<strong class="jz jb"> author_email </strong>参数。在此键入您自己的电子邮件地址</li></ul><p id="5dd8" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">第二步。编写代码</strong></p><p id="4225" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在这个子文件夹中有这个包的实际Python代码。如果你打开<em class="kv"> dist_alx </em>子文件夹<em class="kv"> </em>，你会注意到它包含了一个<em class="kv"> _init_。py </em>文件。默认情况下，Python内核会寻找<em class="kv"> _init_。py </em>文件作为读取代码时的起点。<em class="kv"> _init_。py </em>文件链接到子文件夹中的所有其他Python脚本(例如，在我们的<em class="kv"> _init_中)。py </em>文件，这个链接是通过<em class="kv">从。Gaussiandistribution导入高斯</em>线)，这样所有。py文件连接在一起。在尝试编写包代码之前，最好先复习一下关于<a class="ae lj" href="https://www.geeksforgeeks.org/python-classes-and-objects/" rel="noopener ugc nofollow" target="_blank"> Python类</a>的知识。</p><p id="acae" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">第三步。</strong> <strong class="jz jb">开立PyPI账户</strong></p><p id="835e" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">大多数公开可用的Python包都存储在<a class="ae lj" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI库</a>中。当您在您的机器上安装一个包时(通常通过一个<em class="kv"> pip install </em>语句),您实际上是从PyPI存储库中下载这个包并将其安装在您的机器上。当发布一个新的包时，你把它上传到PyPI服务器，这样社区就可以使用它了。为了能够在PyPI上发布，你需要在PyPI上开一个(免费)账户。确保使用与用于<strong class="jz jb"> author_email </strong>参数相同的电子邮件地址。</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/126d5613bbaa7a96da7956c7a691ea06.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*1xRHa8Fukq8HxROKITAgHQ.png"/></div></figure><p id="7db3" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">第四步。</strong> <strong class="jz jb">发布你的包</strong></p><p id="e80c" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">发布是从命令提示符/终端完成的，在Windows和Linux中命令是相同的。</p><p id="e110" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb"> a. </strong>导航到父文件夹的位置</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/7dfac1d26de49318e5e359cb719bf9c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*7J_qD3lMTsg9e5LVfkPL9Q.png"/></div></figure><p id="1a0b" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb"> b. </strong> pip安装<em class="kv">设置工具</em>和<em class="kv">绳线</em></p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi ma"><img src="../Images/bd89f83879b280b601b4b8bc8d025b2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e58CyVSbl2yp2LU3FTcjnA.png"/></div></div></figure><p id="d8f1" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb"> c. </strong>类型:python setup.py sdist</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mb"><img src="../Images/6d9348dbc170c397d1a170f27c34f099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*eo1k4cDBA7zWE4XuNk4isQ.png"/></div></div></figure><p id="ed8f" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">注意，现在在父文件夹中创建了两个新文件夹(<em class="kv"> egg-info </em>文件和<em class="kv"> dist </em>文件夹)。</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/c970683da24b12d909b10acd7b179016.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*yeQlzL9guale3EXZqUywPg.png"/></div></figure><p id="2571" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb"> d. </strong>类型:捆绳上传距离/*</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi md"><img src="../Images/cc6625e59ed282c13815a98c5ca0240f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*sNMXX4eFyBgKdrudRXMnnw.png"/></div></figure><p id="4787" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您需要提供您的PyPI用户名(不是电子邮件)和密码。</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi me"><img src="../Images/1f44a2d31c440e25bfad3dca8c807bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*blrQGWabXul0U8aXnyEg5g.png"/></div></figure><p id="84d2" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">瞧啊。您的包现在托管在PyPI服务器上，可以使用了！</p><p id="6089" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb"> e. </strong>进入<a class="ae lj" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>，点击你的账户，进入你的项目。如果一切正常，你应该在那里看到你的包裹。</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/23000ace30bacce45ae13bb0848f8776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*0LFZB1-zUlR1DLwGo9zexA.png"/></div></figure><p id="5e13" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">注意PyPI在文件命名中只支持破折号(-)而不支持下划线(_)。因此<em class="kv"> dist_alx </em>变成了<em class="kv"> dist-alx。</em>然而，当稍后导入包时，我们将正常键入<em class="kv"> dist_alx。</em></p><p id="112e" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">第五步。</strong> <strong class="jz jb">用你的包</strong></p><p id="633c" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">去你最喜欢的Python客户端(Terminal，Ipython，Jupyter)然后<em class="kv"> pip安装</em>你的包。然后导入您的包并从中获得乐趣！</p><figure class="kx ky kz la gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mg"><img src="../Images/d8d960e8a2122065c1561d0aa1d10be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b-mf-G01ubhGtq5kFvHa_A.png"/></div></div></figure><p id="0900" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">重述</strong></p><p id="1ef2" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在本文中，我们经历了创建Python包的以下步骤:</p><ul class=""><li id="5724" class="lk ll ja jz b ka kb ke kf ki lm km ln kq lo ku lp lq lr ls bi translated">制作必要的包装元素并注意命名</li><li id="d94c" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">编写包代码</li><li id="87e8" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">创建PyPI帐户</li><li id="3261" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">在PyPI上发布包</li><li id="c421" class="lk ll ja jz b ka lt ke lu ki lv km lw kq lx ku lp lq lr ls bi translated">Pip安装、导入和运行软件包</li></ul><p id="e9a5" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz jb">最后一个音符</strong></p><p id="3efa" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">#在<em class="kv"> dist_alx </em>包中的代码是由Udacity编写的，因此所有与它相关的致谢和评论都可以发给他们。</p><p id="febc" class="pw-post-body-paragraph jx jy ja jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">#在将您的包放在主PyPI服务器上之前，首先在<a class="ae lj" href="https://test.pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI测试服务器</a>上发布它通常是一个好主意。</p></div></div>    
</body>
</html>