<html>
<head>
<title>Anonymous Functions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的匿名函数</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/anonymous-functions-in-python-914a0a4b86ea?source=collection_archive---------34-----------------------#2020-04-15">https://towardsdatascience.com/anonymous-functions-in-python-914a0a4b86ea?source=collection_archive---------34-----------------------#2020-04-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6636" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Lambda表达式简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f141b2895565fb4d59f0d6288b501824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ok8OCs5zPDMb3tyHnyj3TA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.pexels.com/photo/photo-of-guy-fawkes-mask-with-red-flower-on-top-on-hand-38275/" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="328d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">定义函数是软件编程的一个重要部分。定义简单函数的一种方法是匿名使用lambda表达式。例如，计算单个表达式的函数，如加法，可以用lambda表达式替换。在这篇文章中，我们将讨论如何使用lambda表达式定义匿名/内联函数。</p><p id="d6d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="9866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们有一个单行函数，它返回两个输入整数值之间的差:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="c6c2" class="ma mb it lw b gy mc md l me mf">def subtract(x, y):<br/>    return x - y</span></pre><p id="2039" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们用x= 10和y =7调用这个函数，并打印我们得到的返回值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4f44" class="ma mb it lw b gy mc md l me mf">print("Difference:",subtract(10, 7))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/fc5578a3975d86b5bab0589ca8133768.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*45sIVkn1-QqcPTg0EmpxQQ.png"/></div></figure><p id="4d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这是一个简单的函数，它只对单个表达式“x-y”求值，因此可以用lambda表达式替换它:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4234" class="ma mb it lw b gy mc md l me mf">subtract_value = lambda x, y: x - y<br/></span></pre><p id="4647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">lambda表达式包含关键字“lambda”、输入x和y、一个冒号以及我们想要计算的表达式。如果我们回头看看我们最初的函数定义:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b357" class="ma mb it lw b gy mc md l me mf">def subtract(x, y):<br/>    return x - y</span></pre><p id="a210" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到这些表达看起来非常相似。最大的区别是在我们的lambda表达式中没有“def”关键字、“return”关键字和函数名。</p><p id="2255" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打印x = 10和y = 7作为输入的函数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="abab" class="ma mb it lw b gy mc md l me mf">print("Difference:",subtract_value(10,7))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/fc5578a3975d86b5bab0589ca8133768.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*45sIVkn1-QqcPTg0EmpxQQ.png"/></div></figure><p id="689d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以将lambda表达式应用于更有趣的操作，如排序和数据简化。让我们考虑下面的编程语言创造者列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0066" class="ma mb it lw b gy mc md l me mf">names = [<strong class="lw iu">'</strong>Guido van Rossum<strong class="lw iu">', </strong>'Bjarne Stroustrup', 'James Gosling', 'Rasmus Lerdorf']</span></pre><p id="7765" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用' sorted()'方法和lambda表达式，按照姓氏的字母顺序返回列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0267" class="ma mb it lw b gy mc md l me mf">print(sorted(names, key = lambda name : name.split()[-1].lower()))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/6dee63bcf69bb0070364fcc5813822fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WNEwBmv42pk3a6Ovg5LvQ.png"/></div></div></figure><p id="a8c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">值得注意的是lambda表达式的局限性。因为我们只能计算单个表达式，所以像迭代、异常处理和条件这样的特性是无法指定的。尽管如此，lambda表达式在代替评估单个表达式的单行函数时非常有用。</p><p id="ef37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以考虑的另一件事是如何在匿名函数中捕获变量。让我们定义一个整数x = 5，并定义一个匿名函数，将x和另一个输入整数y相加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ff96" class="ma mb it lw b gy mc md l me mf">x = 5<br/>add = lambda y: x + y</span></pre><p id="c835" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们调用y = 24的函数:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="e600" class="ma mb it lw b gy mc md l me mf">print("Addition:", add(24))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/5c8542c54c42e7364ba8341519774553.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*d7Frt7P-XvBwY05yYi6TuA.png"/></div></figure><p id="9ffd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们改变下一行中x的值并调用我们的函数，我们得到:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="a81f" class="ma mb it lw b gy mc md l me mf">x = 5<br/>add = lambda y: x + y<br/>print("Addition:", add(24))<br/>x= 10<br/>print("Addition:", add(24))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/bb05e050fef596d4f9d2f953e34bb079.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*UyIqpKjPKKWB0M7B8hcOlg.png"/></div></figure><p id="ca53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为lambda表达式中使用的x是运行时绑定的自由变量，所以x的值是运行时的值。要让匿名函数在定义时捕获一个值，在本例中捕获x = 5，我们必须包含x作为默认值:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="58f6" class="ma mb it lw b gy mc md l me mf">x = 5<br/>add = lambda y,x=x: x + y<br/>print("Addition:", add(24))<br/>x= 10<br/>print("Addition:", add(24))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/22e7ade83e548ed2cd2ea2b71281cf9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:372/format:webp/1*tI-MElKZN3d3SDinpBLfwA.png"/></div></figure><p id="cf98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到了我们想要的行为。我就讲到这里，但是我鼓励你自己去研究代码。</p><h1 id="f76c" class="mk mb it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="6645" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">总之，在这篇文章中，我们讨论了如何使用lambda表达式在python中定义匿名函数。如果您有一个包含许多计算单行表达式的函数的python脚本，那么用lambda表达式替换这些函数通常会更容易。此外，我们讨论了如何在lambda表达式中设置默认值，这允许我们在定义时捕获变量的值。如果你希望学习更多关于匿名函数的知识，我推荐你阅读Python食谱<a class="ae ky" href="https://d.cxcore.net/Python/Python_Cookbook_3rd_Edition.pdf" rel="noopener ugc nofollow" target="_blank"><em class="ng">。我希望你觉得这篇文章有趣/有用。这篇文章中的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/basic_python/lambda_expressions.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</em></a></p></div></div>    
</body>
</html>