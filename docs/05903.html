<html>
<head>
<title>Web Scraping — Korea Baseball Organization (KBO)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网页抓取—朝鲜棒球组织(KBO)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-korea-baseball-organization-kbo-40bf6210a267?source=collection_archive---------65-----------------------#2020-05-14">https://towardsdatascience.com/web-scraping-korea-baseball-organization-kbo-40bf6210a267?source=collection_archive---------65-----------------------#2020-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0b2a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">抓取网页，创建一个体育场的地图，球队发挥和可视化击球统计</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8b6daf0cc3784a7dad8ed568688895a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oa5V8cBxAq2Nnl05bccjYQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/s/photos/jamsil-baseball-stadium%2C-south-korea" rel="noopener ugc nofollow" target="_blank">南韩蚕室棒球场</a>(照片由<a class="ae kv" href="https://unsplash.com/@hyoshining" rel="noopener ugc nofollow" target="_blank">晓星崔</a>在<a class="ae kv" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</p></figure><p id="e5b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大约一周前，ESPN开始转播朝鲜棒球组织(KBO)的比赛，自3月以来首次提供现场体育比赛。渴望现场表演的粉丝们，它提供了一些东西。除非你是丹(<a class="ae kv" href="https://www.espn.com/mlb/story/_/id/29154712/meet-stay-home-dad-turned-international-expert-korean-baseball" rel="noopener ugc nofollow" target="_blank">文</a>)那样的铁杆球迷，否则你不会对KBO队或球员很熟悉。因此，我尝试用数据科学和Python编程来介绍KBO。</p><h1 id="f8fd" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">KBO队在哪里比赛？</h1><p id="810a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">KBO是南韩最高的职业棒球联盟。它从1982年开始有六个队参加比赛，后来扩大到10个队。这是十支KBO球队和他们主场比赛的城市。</p><ul class=""><li id="5fee" class="mp mq iq ky b kz la lc ld lf mr lj ms ln mt lr mu mv mw mx bi translated">斗山熊队(首尔)</li><li id="b084" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">韩华鹰队(大田)</li><li id="2041" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">起亚老虎队(光州)</li><li id="5a92" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">基武姆英雄(首尔)</li><li id="ea9b" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">KT Wiz(水原)</li><li id="7034" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">LG双胞胎(首尔)</li><li id="06a4" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">乐天巨人(釜山)</li><li id="53f5" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">数控恐龙(昌原)</li><li id="a56a" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">三星雄狮(大邱)</li><li id="09e0" class="mp mq iq ky b kz my lc mz lf na lj nb ln nc lr mu mv mw mx bi translated">SK双足飞龙(仁川)</li></ul><p id="a028" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">废弃Wiki页面以检索体育场名称</strong></p><p id="6b07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">KBO维基页面提供了几个表格，其中一个包含球队名称和他们比赛的体育场。我们可以使用Pandas的read_html废弃这些表。Pandas的read_html提供了一种将表读入DataFrame对象列表的简洁方法。</p><div class="nd ne gp gr nf ng"><a href="https://en.wikipedia.org/wiki/KBO_League" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">KBO联赛</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">KBO联赛(韩语:KBO 리그)，原名韩国棒球锦标赛(韩语:한국야구선수권대회；罗马化…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">en.wikipedia.org</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kp ng"/></div></div></a></div><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="6618" class="oa lt iq nw b gy ob oc l od oe">wikipage = "<a class="ae kv" href="https://en.wikipedia.org/wiki/KBO_League" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/KBO_League</a>"<br/>result = pd.read_html(wikipage)<br/>result</span></pre><p id="032f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">检查结果后，我们可以看到第三个表包含球队、城市、体育场、容量和加入。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/72ff9d9fd981ae37e065adfc25dfe38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*ubhNiKxCvuKh_hZYxHcBgA.png"/></div></figure><p id="3da1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在选择了第三个表并用第一行替换了标题之后，我们有了一个显示体育场信息的熊猫数据帧。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="dedd" class="oa lt iq nw b gy ob oc l od oe">#df = third table<br/>df = result[2]</span><span id="4822" class="oa lt iq nw b gy og oc l od oe">#change top row to header<br/>df.columns = df.iloc[0]<br/>df = df[1:]<br/>df</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/7c6c5b97ce9c9e27a975a78f0240b74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*k8r-pmVDjNSBioHzfbTdJg.png"/></div></figure><p id="e87a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">从体育场名称获取地理编码</strong></p><p id="c974" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用geopy的地理编码器，我们可以只传递体育场的名称来检索纬度和经度。我不得不把“大田汉巴特棒球场”替换为“韩华生命鹰公园”，因为地理定位器无法识别前者。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="0a09" class="oa lt iq nw b gy ob oc l od oe">def geolocate(loc):<br/>    try:<br/>        loc = geolocator.geocode(loc)<br/>        # Return latitude and longitude<br/>        return (loc.latitude, loc.longitude)<br/>    except:<br/>        # Return missing value<br/>        return np.nan</span><span id="5a64" class="oa lt iq nw b gy og oc l od oe">df['Geolocate'] = df['Stadium'].apply(geolocate)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/ae4d47ddb2896076beffc3bc54019c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GyUpABkKusW_f8VvGHxlgg.png"/></div></div></figure><p id="438a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">创建地图</strong></p><p id="9f9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们检索了每个体育场的纬度和经度之后，我们可以使用yellow来创建球队比赛的地图。</p><pre class="kg kh ki kj gt nv nw nx ny aw nz bi"><span id="ad66" class="oa lt iq nw b gy ob oc l od oe">import folium<br/>from folium.plugins import MarkerCluster<br/><br/>#empty map<br/>m= folium.Map(tiles="cartodbpositron")</span><span id="c412" class="oa lt iq nw b gy og oc l od oe">marker_cluster = MarkerCluster().add_to(m)</span><span id="5660" class="oa lt iq nw b gy og oc l od oe">for i in range(len(df)):<br/>        lat = df.iloc[i]['Latitude']<br/>        long = df.iloc[i]['Longitude']<br/>        radius=10<br/>        popup_text = """Team : {}&lt;br&gt;<br/>                     City : {}&lt;br&gt;"""<br/>        popup_text = popup_text.format(df.iloc[i]['Team'],<br/>                                   df.iloc[i]['City']<br/>                                   )<br/>        folium.CircleMarker(location = [lat, long], radius=radius, popup= popup_text, fill =True).add_to(marker_cluster)</span><span id="08a7" class="oa lt iq nw b gy og oc l od oe">#show the map<br/>m</span></pre><p id="308f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">五个队在汉城或附近比赛，另外五个队在韩国南部比赛。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/31e2794cb3d71d50e8adeaa165b221bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G05-mRLlejSgfSrF7GX3tA.png"/></div></div></figure><p id="f801" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">周围的首尔区域被缩放，并且显示了带有球队名称和城市的folium标记。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/88347c296053d87a0a8ee4178ad98d0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rPABg0s0g76vpmpqDB86FA.png"/></div></div></figure><h1 id="2f5c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">刮KBO统计</h1><p id="5ad1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这篇文章(<a class="ae kv" rel="noopener" target="_blank" href="/web-scraping-nba-stats-4b4f8c525994">网络搜集NBA数据</a>)提供了一个从篮球参考网站搜集NBA数据的极好的教程。类似地，我们可以删除Baseball-Reference.com的棒球统计数据，因为该网站提供了包括KBO在内的全面的球队和球员统计数据。</p><p id="df0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的代码块将2020年KBO的击球统计数据抓取到一个熊猫数据帧中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="13d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，抓取的熊猫数据帧的数据类型是对象。我们可以将非对象类型转换成数字，以便以后可视化。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/bae81aa631ca471bee40abde6f8754bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R06dVxkd63zMNbygE4zyuQ.png"/></div></div></figure><p id="ba66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以可视化团队本垒打或任何其他你想要的统计数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/046e2ef2cb81317e8c0196385b86dbe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdjVA1UWigRRxxtmH768yA.png"/></div></div></figure><h1 id="b0b4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">摘要</h1><p id="68bb" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">总而言之，从维基百科中抓取一个表格，然后用于创建一个地图，从棒球参考中抓取当前击球数据。希望这能提供一些有价值的信息。下面你可以找到更多的资源，如如何观看。希望你也喜欢这些现场棒球比赛！</p><div class="nd ne gp gr nf ng"><a href="https://www.espn.com/mlb/story/_/id/29136672/kbo-espn-schedule-how-watch-teams-korea-baseball-league-more" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">ESPN时间表上的KBO，如何观看，朝鲜棒球联盟的球队等等</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">韩国棒球组织的常规赛季正在进行中，这意味着是时候进行一些现场棒球比赛了——</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.espn.com</p></div></div><div class="np l"><div class="op l nr ns nt np nu kp ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="http://www.mykbo.net/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">MyKBO.net</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">致力于韩国棒球组织(KBO)和韩国棒球的一个地点。韩国棒球时间表，统计数据…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.mykbo.net</p></div></div><div class="np l"><div class="oq l nr ns nt np nu kp ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://www.nytimes.com/2020/05/05/sports/baseball/coronavirus-baseball-korea-opening.html" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">在电视上看韩国棒球？让我们来帮忙</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">有很多蝙蝠翻转，但吐痰是不允许的。这里有一批球员要留意谁可能会登陆…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.nytimes.com</p></div></div><div class="np l"><div class="or l nr ns nt np nu kp ng"/></div></div></a></div></div></div>    
</body>
</html>