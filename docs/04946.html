<html>
<head>
<title>Using RStudio Project Templates to help the project standardization in data science teams</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 RStudio 项目模板帮助数据科学团队实现项目标准化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-rstudio-project-templates-to-help-the-project-standardization-in-data-science-teams-a963db12abac?source=collection_archive---------45-----------------------#2020-04-29">https://towardsdatascience.com/using-rstudio-project-templates-to-help-the-project-standardization-in-data-science-teams-a963db12abac?source=collection_archive---------45-----------------------#2020-04-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b3be" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">改善数据科学中的团队协作和项目标准化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c0b09166d291a362f485321a1158abc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zjLyjWo9zFouwZEs"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</p></figure><p id="0946" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据科学领域的许多工作仅仅依靠数据科学家/分析师来保证项目的标准化和代码的可复制性；不幸的是，这变成了混乱/混乱的来源，因为每个人(即使在同一个团队)都有不同的工作策略。为了帮助确保团队共享相同的项目标准，RStudio 提供了一种 cookiecutter，您可以在其中开发(以包的形式)许多模板，供同一团队的用户共享。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/8b343f3769c7bf8dee9a90146dca7b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wAm7yqbGy_JzWP3gOu-pgA.png"/></div></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="7f46" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">项目模板背后的故事</h1><p id="0698" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">最近的研究旨在为社会提供方法，帮助用户更好地理解和组织他们的项目、数据和从这些数据中产生的见解。从<a class="ae ky" href="https://en.wikipedia.org/wiki/Cross-industry_standard_process_for_data_mining" rel="noopener ugc nofollow" target="_blank"> CRISP-DM </a>一直到<a class="ae ky" href="https://docs.microsoft.com/en-us/azure/machine-learning/team-data-science-process/overview" rel="noopener ugc nofollow" target="_blank">团队数据科学流程</a>，经过<a class="ae ky" href="https://en.wikipedia.org/wiki/Data_mining#Process" rel="noopener ugc nofollow" target="_blank"> KDD </a>，我们经历了许多方式来增强我们在团队中的工作能力，共同努力以更快的速度和更高的可重复性获得所需的洞察力。</p><p id="1184" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，这个过程会重复无数次，并且回过头来重新开发一个洞察力，或者重新训练一个模型的过程会变得很有挑战性，因为很久以前编写的代码不容易获得，并且可能很难理解几周/几个月/几年前开发这个项目的整个过程。</p><p id="9aae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一些项目可能看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/8ec6fb910305c9d8f8afa2cbabdeda16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*KM6mmGQ34CseXTQYfUmzUQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">代表无组织方式存储数据和代码的图像</p></figure><p id="1125" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使只是打开一个存储库，把脚本、文件、函数。gitignores 和任何类型的文件需要交付一个<a class="ae ky" href="https://shiny.rstudio.com/" rel="noopener ugc nofollow" target="_blank">闪亮的</a>网页或机器学习模型，或某种分析，这个过程缺乏创建代码和过程的能力，这些代码和过程可以被将来可能被分配到这个项目的任何其他人理解。</p><p id="0b6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，这个 RStudio 项目模板旨在帮助用户在开始项目时创建某种模式，帮助团队标准化项目组织，以便每个人都可以轻松地被分配到一个项目，并了解那里发生了什么。</p><p id="20c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许，把项目变成这样:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="cb83" class="ng me it nc b gy nh ni l nj nk">-- project_directory/<br/> | -- data/<br/>    | -- raw/<br/>    | -- reference/<br/>    | -- processed/<br/> | -- scripts/<br/>    | -- modelling/<br/>    | -- analysis/<br/>    | -- production/<br/> | -- markdown/<br/> -- .gitignore<br/> -- project_directory.Rproj</span></pre></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="4573" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">创建新的 R 包</h1><p id="0318" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">项目模板可用于创建具有预先指定结构的新项目，创建这些项目模板的一种方法是创建 R 包，这将允许用户与任意多的用户共享其模板。</p><p id="4b11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">R 包的创建过程(相当简单)非常简单。<a class="ae ky" href="http://r-pkgs.had.co.nz/" rel="noopener ugc nofollow" target="_blank"> Hadley 的 R 包指南</a>涵盖了创建包过程中的许多注意事项。但是由于我们的包将只包含一个函数，它不应该需要开发一个更健壮的包所涉及的复杂性。</p><p id="7956" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从项目的菜单中创建一个 R 包很容易，应该让用户看到一个样例包，它包含 R 包结构、<code class="fe nl nm nn nc b">hello.R</code>函数和一些其他文件。第一步是删除位于<code class="fe nl nm nn nc b">R/</code>的<code class="fe nl nm nn nc b">hello.R</code>文件和位于<code class="fe nl nm nn nc b">man/</code>的<code class="fe nl nm nn nc b">hello.Rd</code>文件。之后，我们从一个干净的包开始，第一步是创建我们的函数。</p><h1 id="273d" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">创建将创建模板的函数</h1><p id="9954" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">为了“创建模板”,我们必须指示 R 将如何处理它，以及当我们在新的项目菜单中提供这个函数时，它将如何表现。因此，这个函数采用一个强制参数，另一个是附加参数，可以帮助您的项目创建工具的逻辑。第一个参数将始终是这个新项目的路径，因为它也将创建一个. RProj 文件，它将驻留在一个新文件夹中。该函数的其他参数作为<code class="fe nl nm nn nc b">...</code>传递，可以在代码中用它们的名字调用它们，或者将它们分配给<code class="fe nl nm nn nc b">dots &lt;- list(...)</code>。</p><p id="a3e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的函数将执行一些任务，显示一些可以嵌入到项目创建模板中的特性。它将:</p><ul class=""><li id="ef00" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated">用<code class="fe nl nm nn nc b">writeLines()</code>创建一个 README.md 文件；</li><li id="f00e" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">如果一个复选框被选中，它将创建一个<code class="fe nl nm nn nc b">.gitignore</code>文件；</li><li id="6c9d" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">给定来自用户的选定输入，创建具有特定名称的文件夹；</li></ul><p id="83ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了创建一个函数，并确保<code class="fe nl nm nn nc b">roxygen2</code>可以解释它，并导出应该由最终包导出的函数，我们将根据下面的语法编写函数。</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="d5c8" class="ng me it nc b gy nh ni l nj nk">#' This package will create a function called create_project()<br/>#'<br/>#' It's callback is at: inst/rstudio/templates/project/create_project.dcf<br/>#'<br/>#' @export</span><span id="c5c7" class="ng me it nc b gy oh ni l nj nk">create_project &lt;-<br/>function(path, ...) {</span><span id="a2b9" class="ng me it nc b gy oh ni l nj nk"># Create the project path given the name chosen by the user:<br/>dir.create(path, recursive = TRUE, showWarnings = FALSE)</span><span id="9ffb" class="ng me it nc b gy oh ni l nj nk"># Change the working directory to the recently created folder:<br/>setwd(file.path(getwd(), path))</span><span id="99d9" class="ng me it nc b gy oh ni l nj nk"># Collect the list of inputs in a list to be called later:<br/>dots &lt;- list(...)</span><span id="c518" class="ng me it nc b gy oh ni l nj nk"># In the project template we've added 2 choices for the user:<br/># * One allows them to select if the project will have a .gitignore file<br/># * The other will create a folder, given a select input from the user</span><span id="8fa8" class="ng me it nc b gy oh ni l nj nk"># Check .gitignore argument<br/>if(dots[["createGitignore"]]) {<br/>git_ignores &lt;-<br/>c(<br/>'.Rhistory',<br/>'.Rapp.history',<br/>'.RData',<br/>'.Ruserdata',<br/>'.Rproj.user/',<br/>'.Renviron'<br/>)</span><span id="45a1" class="ng me it nc b gy oh ni l nj nk">writeLines(paste(git_ignores, sep = '\n'), '.gitignore')<br/>}</span><span id="dd53" class="ng me it nc b gy oh ni l nj nk"># Check selected folder<br/>if(dots[["folder"]] == "Production"){<br/>dir.create("production", recursive = TRUE, showWarnings = FALSE)<br/>} else {<br/>dir.create("development", recursive = TRUE, showWarnings = FALSE)<br/>}</span><span id="7639" class="ng me it nc b gy oh ni l nj nk">}</span></pre><h1 id="2887" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated">创建<code class="fe nl nm nn nc b">.dcf </code>文件</h1><p id="2fa4" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">创建了函数文件后，下一步是创建<code class="fe nl nm nn nc b">.dcf</code>文件。这个文件负责创建用户将与之交互的框。除了用户将要输入的路径，您还可以创建任意数量的复选框/文本输入/选择输入，以便向最终用户授予定制权限。对于我们的项目，我们将创建一个复选框，以便用户可以决定是否创建<code class="fe nl nm nn nc b">.gitignore</code>文件和一个选择输入，以便用户可以定义项目的范围(开发或生产)；</p><blockquote class="oi oj ok"><p id="1353" class="kz la ol lb b lc ld ju le lf lg jx lh om lj lk ll on ln lo lp oo lr ls lt lu im bi translated"><em class="it">本解决方案(开发或生产)仅用于说明目的，并不反映项目的任何实际状态。</em></p></blockquote><p id="ef84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">必须在文件夹<code class="fe nl nm nn nc b">inst/rstudio/templates/project</code>中的包内用您选择的名称创建<code class="fe nl nm nn nc b">.dcf</code>文件，它应该遵循下面的语法:</p><pre class="kj kk kl km gt nb nc nd ne aw nf bi"><span id="9551" class="ng me it nc b gy nh ni l nj nk">Binding: create_project<br/>Title: My First Project Template<br/>OpenFiles: README.md<br/># In the project you can also add icons (the icon should be a PNG, smaller than 64kb<br/># and in the inst/rstudio/templates folder<br/># Icon: name_of_pic.png</span><span id="2247" class="ng me it nc b gy oh ni l nj nk">Parameter: folder<br/>Widget: SelectInput<br/>Label: Choose the scope of the project<br/>Fields: Production, Development<br/>Default: Production<br/>Position: left</span><span id="9acf" class="ng me it nc b gy oh ni l nj nk">Parameter: createGitignore<br/>Widget: CheckboxInput<br/>Label: Create .gitignore<br/>Default: On<br/>Position: right</span></pre><h1 id="f9bd" class="md me it bd mf mg no mi mj mk np mm mn jz nq ka mp kc nr kd mr kf ns kg mt mu bi translated"><code class="fe nl nm nn nc b">devtools::document() + devtools::install()</code></h1><p id="b6d1" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">现在我们的包结构已经创建好了，我们可以使用<code class="fe nl nm nn nc b">devtools::document()</code>函数来创建它的文档页面。尽管这个包主要是作为 RStudio 的一个插件开发的，但是在将它安装到 R 中之前，最好对它进行文档化，因为它会搜索项目运行所需的任何依赖项和包。</p><p id="7d1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过运行<code class="fe nl nm nn nc b">devtools::install()</code>函数，在我们的包中，我们将安装它，并从现在开始使它在任何其他 R 会话中可用。这应该足以使 RStudio 可以将外接程序作为新的项目模板进行访问。</p><p id="2e03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，您的项目模板应该可以在 RStudio 的项目列表中找到。如果您想了解更多关于调整您的项目模板并增加更多可定制性的不同功能，请查看<a class="ae ky" href="https://rstudio.github.io/rstudio-extensions/rstudio_project_templates.html" rel="noopener ugc nofollow" target="_blank"> RStudio 项目模板</a>页面。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="96f6" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">结论</h1><p id="b2fc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">鉴于数据科学的最新发展及其与软件工程技术的集成，团队内标准化项目的需求变得很方便，以确保每个人都能理解，并被他们的搭档理解。这允许更快地调试项目，并减少了遗留代码的缺点，这些代码是同一个团队中的人无法理解的。当然，这个特性本身不会帮助记录代码，或者标准化编写 R 脚本的方式(请参考<a class="ae ky" href="https://style.tidyverse.org/" rel="noopener ugc nofollow" target="_blank">tidy verse 风格指南</a>)，但是它是一个工具，可以帮助用户创建关于项目管理的模式。</p><p id="67d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看托管本文中使用的代码的<a class="ae ky" href="https://github.com/paeselhz/rstudioProjectTemplate" rel="noopener ugc nofollow" target="_blank"> GitHub 页面</a>，如果您想尝试这个例子，可以克隆这个库，或者通过运行:<code class="fe nl nm nn nc b">devtools::install_github('paeselhz/rstudioProjectTemplate')</code>将其安装在 R 中。</p></div></div>    
</body>
</html>