<html>
<head>
<title>Redditing From Home — Exploring the Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在家重新编辑—探索数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/redditing-from-home-exploring-the-data-2303bcf5c58c?source=collection_archive---------64-----------------------#2020-05-31">https://towardsdatascience.com/redditing-from-home-exploring-the-data-2303bcf5c58c?source=collection_archive---------64-----------------------#2020-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/3e708bea7c97ad4f47d7e24b3d7fdf2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1JkBqeplX8sFaSai"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">由<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jg" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>拍摄</p></figure><div class=""/><div class=""><h2 id="c8f5" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">【Redditors熬夜的时间越来越晚了吗？用Python来了解一下吧。</h2></div><p id="bc39" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">毫无疑问，这个疫情打乱了我们的计划。我现在正在12点写这篇介绍，时不时地，我必须提醒自己今天是日历上的哪一天。</p><p id="4a29" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个问题激起了我的好奇心——还有多少人经历过这个问题？作为一个长期的Redditor，我想知道在这个非常时期，像Reddit这样的网站的使用模式是否会有所不同。毫无疑问，人们醒得更晚，睡得更晚——他们白天的作息略有改变，甚至被打乱。WFH，即学生在家学习，消除了通勤时间，这是社交媒体消费的重要黄金时间。</p><p id="c280" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">发现我的祖国subreddit <a class="ae jg" href="https://www.reddit.com/r/singapore/" rel="noopener ugc nofollow" target="_blank"> r/singapore </a>上的用户将如何改变他们的习惯肯定会很有趣。人们将如何着手分析这一点？</p><h1 id="1494" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">1.我们从一个假设开始</h1><p id="bfe2" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">可以提出一个简单的假设:新加坡Redditors会熬夜到更晚，在晚上参与更多，而工作日早上的活动会减少。</p><p id="3271" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk">我们还可以提出第二个假设:</strong>在新冠肺炎疫情期间，工作日和周末之间的使用模式差异将会缩小。本质上，工作日和周末将开始看起来一样。</p><h2 id="5a8a" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">假设</h2><p id="ae15" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">考虑到起作用的各种因素，我们可以做一些假设:</p><ol class=""><li id="6530" class="ne nf jj lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">在此期间，大部分Redditors将呆在家里。</li><li id="6c28" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">在选定的时间段内，由于新冠肺炎病毒引起的习惯变化将保持不变，<strong class="lb jk"> </strong>假设封锁措施没有发生剧烈变化。</li></ol><h2 id="d063" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">选择我们的数据集</h2><p id="a4be" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Reddit是巨大的。考虑到r/Singapore subredit上的大量每日提交内容，以及数据收集的限制，我们需要一个良好的数据分析范围。一个理想的选择:每日线程钉在子编辑的顶部。</p><p id="79ad" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk">你看，每天早上6点，会自动创建一个每日主题供用户发表评论。用户被允许分享他们生活中的任何事情:从他们的通勤，到他们的人际关系，甚至他们工作中的老板。</strong></p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nt"><img src="../Images/36167345f67c2b87849e2e2b3d9c43c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYbPLN9Y3iIuNvP0_M3Dlw.png"/></div></div></figure><p id="1e78" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，这些对话的性质是无忧无虑的，如果在网上看到一条<em class="ns">【早上好】</em>的信息，也不会令人惊讶。这些对话在一天内轻松积累了1000多条评论。</p><p id="3fec" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们收集新冠肺炎时期的所有这些帖子，并与之前的时期进行比较，看看评论的分布有什么不同，也许会出现一些有趣的模式。</p><h1 id="acd1" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">2.数据收集</h1><p id="deaf" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让我们首先决定调查的时间段。鉴于锁定措施在2020年4月初开始实施，如果我们认为用户习惯的改变需要一些时间才能生效，我们可以提前一周到4月中旬。我们比较了以下时间段:</p><ol class=""><li id="7e1a" class="ne nf jj lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><strong class="lb jk">2020年4月13日至2020年5月24日</strong><em class="ns">【6周】</em></li><li id="5d6e" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><strong class="lb jk">2019年4月15日至2019年5月26日</strong> <em class="ns"> (6周)</em></li></ol><p id="236d" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6周的时间应该是一个足够大的数据集。我们将其与一年前的同一时间段进行比较，节省了几天的差异，因为我们希望该数据集也从周一开始。选择使用2019年的数据而不是2020年的开始月份是因为评论模式中可能存在<strong class="lb jk">季节性</strong>。这种季节性的一个例子是:学生由于年中考试而熬夜。</p><p id="5653" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了收集数据，我们需要某种API来提取数据。为此，我们可以使用Reddit API或Pushshift API。</p><h2 id="fdb0" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">用PRAW刮螺纹</h2><p id="e8cd" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">就个人而言，我更喜欢Reddit API提取线索的搜索功能。Python Reddit API包装器(PRAW)易于使用，同时允许每分钟多达30个请求。</p><p id="8875" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<strong class="lb jk">导入PRAW </strong>之后，我们在使用每个月各自的线程标题进行搜索之前，定义了r/singapore子编辑。下面是我们第一次搜索的例子:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="c8b3" class="ms lw jj nz b gy od oe l of og">import praw</span><span id="9eb7" class="ms lw jj nz b gy oh oe l of og"><strong class="nz jk">#define subreddit</strong><br/>subreddit = reddit.subreddit('singapore')</span><span id="eea0" class="ms lw jj nz b gy oh oe l of og"><strong class="nz jk">#make a search</strong><br/>apr2019 = subreddit.search('random discussion and small questions April 2019')</span></pre><p id="3cd3" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在进行了所有相关的搜索之后，我们创建了一个<strong class="lb jk">字典</strong>来存储每个线程的细节。然后，我们开始添加到这本字典。</p><p id="958a" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk"> <em class="ns">注</em> </strong> <em class="ns">:我在代码中把每个</em> <strong class="lb jk"> <em class="ns">线程</em> </strong> <em class="ns">称为一个</em> <code class="fe oi oj ok nz b">submission</code> <em class="ns">。它们的意思是一样的。</em></p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="194d" class="ms lw jj nz b gy od oe l of og">submissions_dict = { 'title':[], 'created_utc': [], 'comms_num': [], 'id':[]}</span><span id="1cb6" class="ms lw jj nz b gy oh oe l of og">for submission in generator:<br/>      submissions_dict['title'].append(submission.title)<br/>      submissions_dict['created_utc'].append(submission.created_utc)<br/>      submissions_dict['comms_num'].append(submission.num_comments)<br/>      submissions_dict['id'].append(submission.id)</span></pre><p id="2d58" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将这个字典存储在一个<strong class="lb jk">熊猫</strong>T39】数据帧中:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="e81c" class="ms lw jj nz b gy od oe l of og">import pandas as pd<br/>submissionsRaw = pd.DataFrame(submissions_dict)</span></pre><p id="2a42" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候使用我们的数据框架了！以下是对新增栏目的简要总结:</p><ol class=""><li id="0434" class="ne nf jj lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated"><code class="fe oi oj ok nz b"><strong class="lb jk">timestamp</strong></code> <strong class="lb jk"> : </strong>我们使用<code class="fe oi oj ok nz b">fromtimestamp</code>方法来获得实际的日期时间</li><li id="1378" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe oi oj ok nz b"><strong class="lb jk">year</strong></code> <strong class="lb jk"> : </strong>来源于我们新的<code class="fe oi oj ok nz b">timestamp</code>栏目</li><li id="d92c" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe oi oj ok nz b"><strong class="lb jk">dayOfWeek</strong></code> <strong class="lb jk"> : </strong>使用<code class="fe oi oj ok nz b">weekday</code>方法导出</li><li id="2087" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated"><code class="fe oi oj ok nz b"><strong class="lb jk">typeOfDay</strong></code> <strong class="lb jk"> : </strong>使用<code class="fe oi oj ok nz b">dayOfWeek</code>，我们将日子分为工作日/周末。我们也可以通过假设工作日的公共假日本质上和周末一样来做一些调整。耶稣受难日就是一个例子。</li></ol><p id="f00e" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将看到一个大致的数据框架，如下所示:</p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ol"><img src="../Images/9611cb93b84ac65ebeadbbd43cebacdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6xhnTu-wVF9pKmGBSorLrg.png"/></div></div></figure><h2 id="fcf2" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">第一眼:周末的评论比工作日少</h2><p id="1f65" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在排除了不在我们分析时间范围内的帖子后，我们最终会有一个名为<code class="fe oi oj ok nz b">submissions.</code>的数据框架。让我们快速浏览一下<strong class="lb jk">数据透视表，按照<code class="fe oi oj ok nz b">year</code>和<code class="fe oi oj ok nz b">dayOfWeek</code>列对</strong>进行分组，并找出一周中每天的平均评论数:</p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/5129c8f961f7c87c97f25dd119e6cfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VqrZX7eCl5XYevIk3PLXPQ.png"/></div></div></figure><p id="44dd" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">似乎平均来看，2020年的评论数有所增加。从我们制作的突出显示中，我们可以看出<strong class="lb jk">评论在一周的开始</strong>、<strong class="lb jk">是最高的，而周末的评论数量最低。</strong></p><p id="8196" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有意思！你可能会认为情况正好相反…..</p><h2 id="1065" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">使用Pushshift API抓取注释</h2><p id="52c6" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你认为我们结束了…不，还没有。我们仍然需要每个评论被写的确切时间！</p><p id="134a" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用Pushshift API来收集评论。现在，Reddit API可以做同样的事情，但是每个线程提取接近1000条评论(我们有大约80条)会相当慢。使用Pushshift，您需要的只是惟一的线程ID，它会在一个JSON文件中返回所有的注释:</p><figure class="nu nv nw nx gt iv"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/dc9c4bf8b1a49c0798303d32e443823c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AARlW2a0Ax9BtyU4HZO5tA.png"/></div></div></figure><p id="2a87" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在检查是否有空值之后，我们总结并在数据集中找到了超过83，000条评论。</p><h1 id="47cc" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">3.让我们开始吧！</h1><p id="3378" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><em class="ns">恭喜你坚持住了！最艰难的部分已经过去了。收集数据总是花费最长的时间，但这确实是最重要的部分。现在更有趣的部分来了:<strong class="lb jk">让我们观察一下我们的数据的分布。</strong></em></p><p id="b194" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将实验三种不同类型的图表，探索它们的优缺点。</p><h2 id="2218" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">小提琴情节</h2><p id="71bc" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Violin图是查看数据集中多个分布的好方法。我们将通过按照一天的类型来分离我们的数据，并查看一天中几个小时的数据分布来了解如何做到这一点。我们将使用Seaborn绘图:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="8c1a" class="ms lw jj nz b gy od oe l of og">sns.violinplot(x='subm_typeOfDay', y='comment_hour', hue='subm_year', data=commentsDf, split=True)</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/d295360c62544e4a21dc531e1e5b6714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QktvnMQkmTn329r2mjfCWg.png"/></div></div></figure><p id="895d" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">似乎我们的小提琴看起来更像鱼，而不是！但这并不奇怪。很自然，在凌晨3点到6点之间几乎没有人会醒着发表评论(也许除了我)。</p><p id="6fb8" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上信息并不像我们希望的那样丰富。这是因为violin图是平滑的，只是为了给出数据的整体形状，并给我们一个粗略的想法。然而，我们可以比较这些峰值，以查看哪些时间具有更高的概率密度，我们可以看到<strong class="lb jk"> 2020工作日似乎在午夜</strong>具有更高的峰值。</p><p id="0e3e" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但即使知道了这一点，还是很难给出一个数字。精确的点被添加，并使用一个你可以轻松操作的带宽进行平滑。通过添加一个参数<code class="fe oi oj ok nz b">bw</code>，您可以看到如果将带宽降低到默认值以下会发生什么:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="276d" class="ms lw jj nz b gy od oe l of og">sns.violinplot(x='subm_typeOfDay', y='comment_hour', hue='subm_year', data=commentsDf, split=True, <strong class="nz jk">bw =0.05</strong>)</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/d7454263aff2bdc347e45f72925dc0a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JM7x323s-SrJ8yG6LvBs7A.png"/></div></div></figure><p id="419d" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这几乎没有任何帮助。</p><p id="1db1" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，我还是有点喜欢下面的情节:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="11e1" class="ms lw jj nz b gy od oe l of og">sns.violinplot(x='subm_year', y='comment_hour', hue='subm_typeOfDay', palette='Set2', data=commentsDf, split=True)</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi os"><img src="../Images/183ccbc64073e58b83557e7546c632c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*958tiUTcjsywp2QkdqvDBw.png"/></div></div></figure><p id="92af" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以看到2019年的数据在工作日和周末之间有相对不同的形状。工作日午夜的活动比周末少。</p><p id="b48a" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk">而2020年的数据看起来更加对称。</strong>我们鱼的尾巴看起来<em class="ns">几乎</em> <em class="ns">完美。我们的第二个假设是Redditors几乎分辨不出工作日和周末的区别，这个假设可能是正确的。</em></p><p id="3f1f" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但形状只是形状。让我们潜得更深！</p><h2 id="a421" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">直方图</h2><p id="7aca" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">直方图在查看单个条柱时更好，在本例中，条柱是一天中的小时。如果你没有注意到，我们之前的图中的小提琴实际上超过了0-24小时，这发生在我们使用概率密度的时候。所以这并不是最理想的表现，但也够烦人的了。</p><p id="2ac9" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在将使用Matplotlib的直方图，同时使用“seaborn”样式使其不那么难看:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="8ef3" class="ms lw jj nz b gy od oe l of og"><strong class="nz jk">plt.hist</strong>(comments19['comment_hour'], bins = bins, alpha = 1, edgecolor = 'white', label = '2019')<br/><strong class="nz jk">plt.hist</strong>(comments20['comment_hour'], bins = bins, alpha = 0.66, edgecolor = 'white', label = '2020')</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ot"><img src="../Images/bf9dbf8687704ca39cb08ec681a840f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G3olm6U_CSQORvk4HgriMA.png"/></div></div></figure><p id="d9d1" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让眼睛更容易看到，我们可以将2020年的数据叠加在2019年的数据上，降低其不透明度以进行比较。<strong class="lb jk">我们注意到，2019年只有早上6点到9点有更多的评论。</strong>一天其他区间，2020评论较多。然而，有些事情不太对劲。如果评论的增长是由用户的增长推动的会怎样？</p><p id="c606" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们通过比较每个区间的<strong class="lb jk">相对频率</strong>来使其更加公平:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="939b" class="ms lw jj nz b gy od oe l of og">plt.hist(comments19['comment_hour']/3, bins = bins, alpha = 1, edgecolor = 'white', label = '2019', <strong class="nz jk">density = True</strong>)<br/>plt.hist(comments20['comment_hour']/3, bins = bins, alpha = 0.66, edgecolor = 'white', label = '2020', <strong class="nz jk">density = True</strong>)</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/e96623d2e585ef0384cd9946ffac5292.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*353jwy9LchqKDMkC1RRC4w.png"/></div></div></figure><p id="1115" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ns">现在</em>，我们可以更有信心地说:<strong class="lb jk">2020年，Redditors在早上6点到下午3点之间的评论会更少。</strong></p><p id="c4a0" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk">他们也在晚上发表更多评论！</strong>让我们一小时一小时地深入研究这个问题:</p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/bb526e58675fe938fc99d4948a37fd62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D2E5Srqh7J1cBIyP_MkOHA.png"/></div></div></figure><p id="1f24" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">趋势随之而来。<strong class="lb jk">2020年夜间评论增多，早起鸟评论减少。同样令人着迷的是，从上午11点到下午12点仍然存在一个间隙！2020年的人是不是醒的越来越晚，甚至过了晚上12点？或者午餐时间重新编辑不再是一件事，因为我们可以在家里任何时候休息？</strong></p><p id="9eb1" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过有一点是不变的，那就是从下午3点到12点的评论频率。我想那里的习惯并没有真正改变，因为那时几乎每个人都已经醒了。</p><p id="6e0a" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可能忽略的一件事是，我们用一周中的所有日子来比较2019年和2020年。这不太公平。人们应该被允许在周末睡懒觉<em class="ns">(不做判断)</em>。</p><p id="50bf" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb jk">让我们只比较工作日:</strong></p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ov"><img src="../Images/d7bd53a9265dd1255bd576e4426b499f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XKuB4TcoRt4vrEqVwIKt7g.png"/></div></div></figure><p id="f572" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">差异仍然存在！</p><p id="7eef" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，那么我们的第二个假设呢？通过我们的小提琴图，我们注意到2020年的数据在工作日和周末的分布更加对称。让我们试着用直方图来证明这一点，把2019年和2020年放在一起:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="1c8d" class="ms lw jj nz b gy od oe l of og">fig,ax = plt.subplots(1,2, figsize = (18,8), sharey= True)</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ow"><img src="../Images/a6304a01332060fb00d4f80a3d233875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SoENejEWvoZxTCnIDdZsnw.png"/></div></div></figure><p id="2bc5" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经讲了一天的后半部分，重点是从午夜到12点。让我们仔细看看每年的工作日和周末有什么不同。当我们将周末叠加在工作日之上时，我们会注意到:</p><ol class=""><li id="6298" class="ne nf jj lb b lc ld lf lg li ng lm nh lq ni lu nj nk nl nm bi translated">在2020年的凌晨，工作日和周末模式之间的差距更短。注意2019年午夜的评论几乎是两倍。现在的情况并非如此。</li><li id="fbaa" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">在2020年的早晨，差距也在缩小。</li><li id="c894" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">2019年的峰值频率大约在中午11点至12点之间，2020年的工作日没有明显的峰值。</li></ol><p id="22c3" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，工作日和周末的差别已经缩小了。</p><h2 id="fc13" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">内核密度图</h2><p id="e9d1" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">作为一个额外的视角，让我们以曲线的形式探索直方图的变化。我们将使用Seaborn来绘制内核密度图:</p><pre class="nu nv nw nx gt ny nz oa ob aw oc bi"><span id="9325" class="ms lw jj nz b gy od oe l of og"><strong class="nz jk">sns.distplot</strong>(comments19[comments19['subm_typeOfDay'] == 'weekday']['comment_hour'], hist = False, kde = True, kde_kws = {'linewidth': 3}, label = '2019')<br/><strong class="nz jk">sns.distplot</strong>(comments20[comments20['subm_typeOfDay'] == 'weekday']['comment_hour'], hist = False, kde = True, kde_kws = {'linewidth': 3}, label = '2020')</span></pre><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ox"><img src="../Images/aa1e417b7ca94fdd39f59cb8c0beceb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6R-JXn84tpZFJSQNUSv3GA.png"/></div></div></figure><p id="5770" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的观察仍然有效，现在我们有了数据的鸟瞰图。请注意午夜的差距，以及随后2020年曲线如何在凌晨5点后稍微向右移动，因为它在中午慢慢攀升到一个平台。</p><p id="45c3" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们只看2020年:</p><figure class="nu nv nw nx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oy"><img src="../Images/f9fb5dd94983e3ce007547a8feb4ce87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjO4mR3B7VVVZsEWM4Gf_Q.png"/></div></div></figure><p id="b713" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">工作日和周末之间的差距也变小了，尤其是在午夜。</p><h1 id="b250" class="lv lw jj bd lx ly lz ma mb mc md me mf kp mg kq mh ks mi kt mj kv mk kw ml mm bi translated">4.结束的</h1><p id="fffa" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们用Python抓取了数据，并使用了3种不同类型的图表来查看Reddit评论的分布。</p><h2 id="7864" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">结论</h2><ol class=""><li id="d046" class="ne nf jj lb b lc mn lf mo li oz lm pa lq pb lu nj nk nl nm bi translated">假设1:确实现在新加坡Redditors晚上评论多，早上评论少。</li><li id="40c4" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu nj nk nl nm bi translated">假设2:工作日和周末的差别在午夜后最小！</li></ol><h2 id="30a0" class="ms lw jj bd lx mt mu dn mb mv mw dp mf li mx my mh lm mz na mj lq nb nc ml nd bi translated">走向</h2><p id="9348" class="pw-post-body-paragraph kz la jj lb b lc mn kk le lf mo kn lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们如何改进这一分析？以下是我们未来可以做的事情:</p><ul class=""><li id="94da" class="ne nf jj lb b lc ld lf lg li ng lm nh lq ni lu pc nk nl nm bi translated">分析<strong class="lb jk">变化率</strong>。随着时间的推移，周末和工作日之间的差距是否在慢慢缩小？</li><li id="b889" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu pc nk nl nm bi translated">有多少<strong class="lb jk">独立用户</strong>熬夜越来越晚？每晚的附加评论都来自同样的几个人吗？</li><li id="9a9f" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu pc nk nl nm bi translated">刮掉子编辑上除每日线程之外的<strong class="lb jk">其他来源</strong>。</li><li id="83da" class="ne nf jj lb b lc nn lf no li np lm nq lq nr lu pc nk nl nm bi translated"><strong class="lb jk">文本挖掘</strong>评论，生成最频繁的词和二元模型，比较2019年和2020年。</li></ul><p id="ce3b" class="pw-post-body-paragraph kz la jj lb b lc ld kk le lf lg kn lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>