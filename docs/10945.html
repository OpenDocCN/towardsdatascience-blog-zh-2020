<html>
<head>
<title>Drowsiness Detection System in Real-Time using OpenCV and Flask in Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 OpenCV 和 Flask 的实时睡意检测系统。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/drowsiness-detection-system-in-real-time-using-opencv-and-flask-in-python-b57f4f1fcb9e?source=collection_archive---------10-----------------------#2020-07-30">https://towardsdatascience.com/drowsiness-detection-system-in-real-time-using-opencv-and-flask-in-python-b57f4f1fcb9e?source=collection_archive---------10-----------------------#2020-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b59" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><em class="ki">本文概述了一种系统，该系统可检测一个人在驾驶时是否困倦，如果是，则通过使用语音信息实时提醒他。该系统使用网络摄像头和手机摄像头进行实时传输。</em></h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/fbfd68fcff3da47f585c5796a10d277b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LZzsNN9J9eZzUxT7"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@gaberce?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Gabe Pierce </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="dc2b" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated"><strong class="ak">动机</strong></h1><p id="0e52" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">根据美国国家公路交通安全管理局的数据，每年大约有 100，000 起警方报告的交通事故与疲劳驾驶有关。这些事故导致超过 1550 人死亡，71000 人受伤。然而，实际数字可能要高得多，因为很难确定司机在撞车时是否困倦[1]。所以，为了让司机在任何此类事故发生前有所察觉，我们制定了这个系统。它预测眼睛和嘴巴的标志，以便通过检查一个人是闭着眼睛还是在打哈欠来识别他是否睡着了。</p><h1 id="ff10" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated"><strong class="ak">工作</strong></h1><p id="b54d" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">该系统的工作可分为两部分:</p><ol class=""><li id="2d80" class="mo mp it lu b lv mq ly mr mb ms mf mt mj mu mn mv mw mx my bi translated">检测或定位面部。</li><li id="535c" class="mo mp it lu b lv mz ly na mb nb mf nc mj nd mn mv mw mx my bi translated">预测检测到的人脸中重要区域的标志。</li></ol><p id="c851" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">一旦预测了界标，我们仅使用眼睛界标和嘴巴界标来确定眼睛纵横比(耳朵)和嘴巴纵横比(MAR ),以检查人是否困倦。</p><p id="f360" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">EAR 和 MAR 的计算如下所示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nh ni l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">耳朵和标记计算。</p></figure><p id="6dc7" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">现在，既然我们有了代码，让我们来理解这个代码是如何工作的:</p><p id="7a89" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">dlib 库中预先训练的面部标志检测器用于估计映射到面部的面部结构的 68-(x，y)坐标的位置[2]。这些 68-(x，y)坐标代表面部的重要区域，如嘴、左眉、右眉、左眼、右眼、鼻子和下巴。其中，我们只需要左眼、右眼和嘴的(x，y)坐标。这是通过以下方式完成的:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nh ni l"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">提取左眼、右眼和嘴的索引。</p></figure><p id="f4f2" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">现在，每只眼睛由一组 6-(x，y)坐标表示，从眼睛的左角开始(就好像你正在看着这个人)，然后围绕该区域的其余部分顺时针工作[3]:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/c62cbf6d4e3c712fb7fa4320d4cf00d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*0Q_eF-6JckF21svrloMfJg.jpeg"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated"><em class="ki">左上:</em>眼睛睁开时眼睛标志的可视化。<em class="ki">右上:</em>眼睛闭合时的眼睛标志。<em class="ki">底部:</em>绘制眼睛纵横比随时间的变化。眼睛纵横比的下降表示眨眼[3](soukupová和 ech 的图 1)。[4]</p></figure><p id="1dc2" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">基于该论文，<a class="ae kz" href="http://vision.fe.uni-lj.si/cvww2016/proceedings/papers/05.pdf" rel="noopener ugc nofollow" target="_blank"> <strong class="lu iu"> <em class="nk">使用面部标志点的实时眨眼检测</em> </strong> </a>，【5】然后我们可以导出反映这种关系的等式，称为<em class="nk">眼睛纵横比</em>(耳朵):</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f0da22cbcca8f90540fdf9cdf64a3899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*S4_3ba7ySnM_g3OCStrCDQ.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">眼睛纵横比(EAR)方程。</p></figure><p id="39c8" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">利用这个概念，我们计算了嘴的长宽比:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nm"><img src="../Images/3a777e4ec6a331fb7c65af41fc5d46a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ir4vFwjiVAbQEvT19dvA0A.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">用 68-(x，y)坐标表示面部。</p></figure><p id="826e" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">正如我们看到的，嘴由一组 20-(x，y)坐标表示。因此，我们使用坐标 62、64、66 和 68，以与 EAR 计算相同的方式来计算它们之间的距离。</p><h1 id="916d" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">结果</h1><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nn"><img src="../Images/2997692a50be0ba56c9d5e7ad2dfd3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9G6RJ3UDmP7gaZBX8Vl11A.jpeg"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">当人困倦或打哈欠时发出警报。</p></figure><p id="909e" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">此外，为了保留证据，我们保存了人感到昏昏欲睡的帧。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi no"><img src="../Images/828c329dad60da9f1858081b7574ecd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKfhJ_COEU8wo6BF7YzfHA.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">相框存放在单独的文件夹中作为凭证。</p></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi np"><img src="../Images/2cfb008e897ec42796287b1341425c57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*Tn9Y0cGu5zDW_zl9nS_5sQ.png"/></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">显示 EAR 和 MAR 随时间变化的图表。</p></figure><p id="08d3" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">使用网络摄像头通过流媒体进行系统演示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nq ni l"/></div></figure><p id="a5b3" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">使用手机摄像头通过流媒体进行系统演示:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nq ni l"/></div></figure><p id="0f2a" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">GitHub 链接的源代码可从这里获得:</p><div class="nr ns gp gr nt nu"><a href="https://github.com/fear-the-lord/Drowsiness-Detection" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">恐惧上帝/睡意探测</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">点击这里看演示根据美国国家公路交通安全管理局，每年约 10 万…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">github.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kt nu"/></div></div></a></div><h1 id="7b7f" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated"><strong class="ak">参考文献</strong></h1><p id="31d8" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated">[1]司机们在方向盘后面睡着了。疲劳驾驶事故的发生率:<a class="ae kz" href="https://www.nsc.org/road-safety/safety-topics/fatigued-driving" rel="noopener ugc nofollow" target="_blank">https://www . NSC . org/road-safety/safety-topics/疲劳驾驶</a></p><p id="57f4" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">【2】用 dlib、OpenCV 和 Python 实现的面部地标:<a class="ae kz" href="https://www.pyimagesearch.com/2017/04/03/facial-landmarks-dlib-opencv-python/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2017/04/03/face-landmarks-DLI b-OpenCV-Python/</a></p><p id="f994" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">[3]利用 OpenCV、Python 和 dlib 进行眨眼检测:<a class="ae kz" href="https://www.pyimagesearch.com/2017/04/24/eye-blink-detection-opencv-python-dlib/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2017/04/24/Eye-blink-detection-OpenCV-Python-dlib/</a></p><p id="437e" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">[4]使用 OpenCV 的睡意检测:<a class="ae kz" href="https://www.pyimagesearch.com/2017/05/08/drowsiness-detection-opencv/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2017/05/08/瞌睡检测-opencv/ </a></p><p id="dd4b" class="pw-post-body-paragraph ls lt it lu b lv mq ju lx ly mr jx ma mb ne md me mf nf mh mi mj ng ml mm mn im bi translated">[5]使用面部标志的实时眨眼检测:<a class="ae kz" href="http://vision.fe.uni-lj.si/cvww2016/proceedings/papers/05.pdf" rel="noopener ugc nofollow" target="_blank">http://vision . Fe . uni-LJ . si/cvww 2016/proceedings/papers/05 . pdf</a></p><h1 id="793d" class="la lb it bd lc ld le lf lg lh li lj lk jz ll ka lm kc ln kd lo kf lp kg lq lr bi translated">访问我的作品集:</h1><p id="511a" class="pw-post-body-paragraph ls lt it lu b lv lw ju lx ly lz jx ma mb mc md me mf mg mh mi mj mk ml mm mn im bi translated"><a class="ae kz" href="https://souvik-portfolio-website.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://souvik-portfolio-website.herokuapp.com/</a></p></div></div>    
</body>
</html>