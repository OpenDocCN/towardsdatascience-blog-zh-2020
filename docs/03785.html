<html>
<head>
<title>Nine simple steps for better-looking python code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让python代码看起来更好的九个简单步骤</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/nine-simple-steps-for-better-looking-python-code-87e5d9d3b1cf?source=collection_archive---------6-----------------------#2020-04-09">https://towardsdatascience.com/nine-simple-steps-for-better-looking-python-code-87e5d9d3b1cf?source=collection_archive---------6-----------------------#2020-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/659a66ad11f38b7e770eb7908409fe22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pVTPFHcasXqnlKlH0--YJg.jpeg"/></div></div><p class="jy jz gj gh gi ka kb bd b be z dk translated">来源<a class="ae kc" href="https://pixabay.com/photos/work-workaholic-writer-programmer-1627703/" rel="noopener ugc nofollow" target="_blank">com break</a>，经由<a class="ae kc" href="https://pixabay.com/photos/work-workaholic-writer-programmer-1627703/" rel="noopener ugc nofollow" target="_blank"> pixabay </a>。(Pixabay许可证)</p></figure><p id="a15d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我会定期查看补充学术论文、发布数据集的代码，或者分析<a class="ae kc" href="https://www.kaggle.com/" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>竞赛的解决方案。</p><p id="5c7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我非常尊重分享代码以复制他们的结果的研究人员，以及参与机器学习(ML)竞赛并分享他们的解决方案的人。</p><p id="5643" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有代码总比没有好，但我相信它的可读性还可以提高。</p><p id="44c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我看到的代码让我想起了我在学术界写的代码。我不喜欢它。这是我进入工业界的原因之一。在现代社会，能够编写代码变得和懂英语一样重要。</p><p id="daa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">成为一个更好的程序员的最好方法是加入一个高编码标准的公司。尽管如此，在这篇博文中，我将谈论当你独自在代码库工作时的情况。</p><p id="68d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文的目标读者是研究人员、数据科学家和初级软件开发人员。</p><p id="3aff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">成为一个更好的程序员是一个持续的过程。你写的代码越多，你就变得越好。</p><p id="15ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我不会告诉你如何变得更好，我会告诉你如何通过对你的开发过程做一些简单的调整来让你的代码看起来更好。</p><p id="5daf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单，我的意思是容易实现，每一步少于5分钟，并且改变应该迫使你做得更好。</p><p id="9653" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们很懒。如果某件事属于“很好做”的范畴，我们会找到很多正当的理由来避免去做。你被迫做的事情会更好。首先，你会去做，因为你没有选择，后来这就变得很自然了。</p><p id="1769" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一个原因是决策吸意志力。你在一个小决定上花了一点意志力，结果，增加了第二天早上在健身房睡过头的机会。当我们强迫行为时，我们节省了宝贵的能量。对那些感兴趣的人来说，《意志力:重新发现人类最大的力量》一书广泛地讨论了这个话题。</p><h1 id="5a2a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> I:使用版本控制来跟踪代码中的变更</strong></h1><p id="986d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对代码进行版本控制看起来似乎是一个显而易见的必备条件，但事实并非如此。在研究生院，我的导师是一个非常聪明的人，他开发了一种算法来执行哈伯德模型的量子蒙特卡罗。世界各地的许多研究人员使用该代码来推进理论凝聚态物理。当我开始使用它时，我很惊讶竟然没有一个集中的存储库。交换密码是通过电子邮件进行的。一位科学家开发的错误修复和新功能没有传播给其他用户。此外，我还见过我的同事如何使用不同的文件夹进行代码版本控制。</p><p id="bf24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码版本控制和在GitHub或其他服务上使用集中的存储库是必须的。许多研究人员正在这样做，但如果你离开计算机科学，大多数教授和研究生都处于用文件夹版本化和在电子邮件中发送代码的阶段。</p><p id="54ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">问:</strong>你什么时候需要开始在你的项目中使用git？<br/>T5 A:从代码的第一行开始。</p><p id="82bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">问</strong>:什么时候需要在GitHub上创建一个资源库，并将代码推送到那里？<br/> <strong class="kf ir">答:</strong>从第一行代码开始。如果您认为由于法律或其他原因，您的代码不能公开共享，请创建一个私有存储库。在所有其他情况下，选择公开回购。</p><p id="9754" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当人们等到代码看起来不错的时候才公开它，这是一个错误。我的许多同事感到非常不安全，因为他们的GitHub库中会有不完美的代码。他们担心人们会认为他们是糟糕的程序员。现实一点，没人会评判你。此外，你现在写的每一个代码在六个月后看起来都会很糟糕。</p><p id="be1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">私有存储库比没有存储库要好。公共存储库比私有存储库更好。</p><p id="4dc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我也喜欢Kaggle比赛的参与者在比赛结束后释放管道的方式。这是一个好习惯，对他们和社区都有帮助。</p><p id="6a8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，有一个叫做<a class="ae kc" href="https://sourcegraph.com/" rel="noopener ugc nofollow" target="_blank"> Sourcegraph </a>的工具，它允许你在所有公共Github库的代码中执行搜索。极其方便。这会让你更有效率。</p><p id="a22f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="2cb9" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://www.youtube.com/watch?time_continue=3540&amp;v=2sjqTHE0zok&amp;feature=emb_logo" rel="noopener ugc nofollow" target="_blank">讲座:版本控制和git </a></li><li id="f2f9" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://git-scm.com/book/en/v2" rel="noopener ugc nofollow" target="_blank"> Pro-git book </a></li><li id="b028" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">从里到外的饭桶</li><li id="3e7a" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://nvie.com/posts/a-successful-git-branching-model/" rel="noopener ugc nofollow" target="_blank">一个成功的Git分支模型</a></li></ul><h1 id="a675" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">第二:不要推到总分行</h1><p id="f9f4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当你在一个团队中工作时，你不要直接推进到主分支。您创建一个单独的分支，在其中工作，创建一个拉请求(PR)，将拉请求合并到主服务器。这比直接推动掌握更复杂。原因是为了合并拉请求，您的更改应该通过各种检查。手动检查是由您的合作者进行的代码审查。自动检查包括语法、风格、测试等。</p><p id="5609" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您独自工作时，您没有机会审查代码，但是自动检查的力量仍然存在。</p><blockquote class="mt mu mv"><p id="370b" class="kd ke me kf b kg kh ki kj kk kl km kn mw kp kq kr mx kt ku kv my kx ky kz la ij bi translated"><em class="iq">重要的是调整GitHub上的设置，这样即使你想推送也无法到达master。正如我们上面讨论的，这可以防止滑倒，节省意志力。</em></p></blockquote><h1 id="fc63" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> III:使用持续集成/持续交付(CI/CD)系统</strong></h1><p id="876a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">经历创建分支和合并的过程是一种开销。主要原因是它允许对代码变更进行检查。设置持续集成系统后，将检查您创建的每个拉式请求，只有在通过所有检查后，才会合并拉式请求。</p><p id="8147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有许多服务提供CI/CD功能。GitHub Actions、CircleCi、Travis、Buildkite等</p><p id="c0fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我会推荐GitHub Actions。它是免费的，在私有和公共库上都可以工作，易于设置。</p><p id="613c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些听起来可能非常复杂，但是实际上，您只需要向存储库添加一个配置文件。</p><ul class=""><li id="f073" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">一个简单的例子:我的带有帮助函数的库。我检查代码样式、格式，并运行测试。</li><li id="684d" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://github.com/albumentations-team/albumentations/blob/master/.github/workflows/ci.yml" rel="noopener ugc nofollow" target="_blank">复杂</a>示例:在<a class="ae kc" href="https://albumentations.ai/" rel="noopener ugc nofollow" target="_blank">albuminations</a>库中，我们检查语法、代码风格、运行测试、检查自动文档构建，并且我们为不同的python版本和操作系统Linux、Windows、Mac OS执行这些操作</li></ul><p id="311b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">重要！您需要更改GitHub repo中的设置，以便在所有检查都处于绿色区域的情况下，您将无法合并请求。</em></p><p id="cd23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="a2ed" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">博文:<a class="ae kc" href="https://martinfowler.com/articles/continuousIntegration.html" rel="noopener ugc nofollow" target="_blank">马丁·福勒谈持续集成</a></li><li id="e235" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">教程:<a class="ae kc" href="https://help.github.com/en/actions/building-and-testing-code-with-continuous-integration/setting-up-continuous-integration-using-github-actions" rel="noopener ugc nofollow" target="_blank">使用GitHub动作设置持续集成</a></li><li id="b171" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">书:<a class="ae kc" href="https://amzn.to/2Y28zzk" rel="noopener ugc nofollow" target="_blank">凤凰计划</a>。写得很好的书，描述了在CI/CD和其他现代实践引入之前公司中的混乱。</li></ul><h1 id="2ffe" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">四:代码格式器</strong></h1><p id="cb17" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有许多方法可以格式化同一段代码。</p><ul class=""><li id="7a6b" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">函数之间有多少空格？</li><li id="1055" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">代码中的行有多长？</li><li id="6716" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">进口的排序是怎样的？</li><li id="057f" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">应该用什么样的引号来定义字符串？</li><li id="5e78" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">等等</li></ul><p id="4a8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有一些工具叫做<a class="ae kc" href="https://github.com/rishirdua/awesome-code-formatters" rel="noopener ugc nofollow" target="_blank">代码格式化器。如果你在你的代码上运行它们，它们会修改代码以符合格式化程序的要求。</a></p><p id="c3ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通用类型格式化程序:</p><ul class=""><li id="0b01" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">YAPF:非常灵活，你可以配置它来适应你想要的风格。</li><li id="b0f3" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://black.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">黑色:</a>无弹性。只能配置线路的长度。</li></ul><p id="7439" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择一个并将其添加到您的CI/CD配置中。我喜欢黑色的。它让我所有的项目和使用黑色的项目看起来都一样。</p><p id="1ee3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码格式化程序减少了上下文切换，这使得代码的阅读更加容易。</p><p id="56aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有更具体的格式化程序。例如<strong class="kf ir"> </strong> <a class="ae kc" href="https://github.com/timothycrosley/isort" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">或</strong> </a>。Isort只是对导入进行排序。</p><p id="ae49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您需要在两个地方运行格式化程序:</p><ol class=""><li id="cad4" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mz ml mm mn bi translated">在CI/CD中。在这里，您以检查模式运行它:格式化程序会告诉您有他们想要格式化的文件，但是代码将保持不变。</li><li id="5858" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mz ml mm mn bi translated">在提交更改之前。它会重新格式化你的代码。</li></ol><p id="961f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="b1e7" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">Yapf </li><li id="445c" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">黑色</a></li><li id="b3f8" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://github.com/timothycrosley/isort" rel="noopener ugc nofollow" target="_blank">或</a></li><li id="dfcf" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">博文:<a class="ae kc" href="https://www.mattlayman.com/blog/2018/python-code-black/" rel="noopener ugc nofollow" target="_blank">与黑色一致的python代码</a></li><li id="a52b" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">博客文章:<a class="ae kc" href="https://medium.com/3yourmind/auto-formatters-for-python-8925065f9505" rel="noopener">python的自动格式化程序</a></li></ul><h1 id="f417" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> V:预提交挂钩</strong></h1><p id="9661" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在上一步中，我们讨论了在提交之前在本地运行格式化程序的重要性。</p><p id="0ee4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比如说，我们用<strong class="kf ir">黑</strong>和<strong class="kf ir">异色</strong>。</p><p id="c3e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要运行:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="81f7" class="nj lc iq nf b gy nk nl l nm nn">black .</span><span id="5f52" class="nj lc iq nf b gy no nl l nm nn">isort</span></pre><p id="ae6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很烦人。更好的解决方案是用这些命令创建一个bash脚本，比如“code_formatter.sh”并运行它。</p><p id="f8da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建这样的脚本是一种流行的方法，但是问题是，除非你强迫他们，否则人们不会这样做。</p><p id="1b7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有一个更好的解决方案叫做<a class="ae kc" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank">预提交挂钩</a>。这个想法类似于bash脚本，但是您希望在每次提交之前运行的东西将会在您提交时准确地运行</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="6320" class="nj lc iq nf b gy nk nl l nm nn">git commit -m “&lt;commit message&gt;”</span></pre><p id="c1b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这看起来是一个很小的区别，其实不是。使用预提交，您的行为是强制的，并且，正如我们上面讨论的，它工作得更好。</p><p id="6604" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Q  : PyCharm执行良好的格式化。为什么我需要一个预提交钩子？<br/> <strong class="kf ir"> A </strong>:你可能忘了用PyCharm格式化你的代码。此外，当你有两个或更多的人，你要确保他们的格式是相同的。对于预提交挂钩，所有人都将拥有相同的配置，这是您的存储库的一部分。我建议两者都做，使用预提交钩子并用PyCharm格式化代码。</p><p id="d7f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">问:如果我不从控制台执行提交，而是直接从PyCharm执行，会怎么样？<br/>答:您可以配置PyCharm在每次提交时运行预提交钩子。</p><p id="2522" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="f3e8" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank">预提交挂钩</a></li></ul><h1 id="060c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">六:棉绒</strong></h1><p id="a64f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">不改变你的代码，但是检查它并且寻找可能的问题的工具，叫做linters。最常见的是<a class="ae kc" href="https://flake8.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> flake8 </strong> </a> <strong class="kf ir">。</strong></p><p id="b4e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以寻找:</p><ul class=""><li id="0893" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="http://pep8.readthedocs.org/en/latest/intro.html#error-codes" rel="noopener ugc nofollow" target="_blank"> PEP8错误和警告。</a></li><li id="cee2" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://github.com/PyCQA/pep8-naming" rel="noopener ugc nofollow" target="_blank">一致的命名约定。</a></li><li id="6cb4" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">你的函数的圈复杂度。</li><li id="ced3" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">还有其他带一套<a class="ae kc" href="https://github.com/DmytroLitvinov/awesome-flake8-extensions" rel="noopener ugc nofollow" target="_blank">插件</a>的东西。</li></ul><p id="db90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它是一个强大的工具，我建议将它添加到您的CI/CD配置以及预提交钩子中。</p><p id="e2e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="b57c" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://flake8.pycqa.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> Flake8:您实施风格指南的工具</a></li><li id="c7cf" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://github.com/DmytroLitvinov/awesome-flake8-extensions" rel="noopener ugc nofollow" target="_blank"> Flake8扩展</a></li></ul><h1 id="d03f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> VII: Mypy:静态类型检查器</strong></h1><p id="f413" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从Python 3开始，您可以向代码中的函数添加类型注释。这是可选的，但强烈推荐。</p><p id="056e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个原因是有类型注释的代码更容易阅读。</p><p id="3670" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您在代码中看到:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="d3fc" class="nj lc iq nf b gy nk nl l nm nn">x: pd.DataFrame</span></pre><p id="ce02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它的信息量远远超过</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="88c2" class="nj lc iq nf b gy nk nl l nm nn">x</span></pre><p id="cc0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当然，你首先不应该把你的变量命名为“x”。尽管如此，在这篇博文中，我谈论的是改进代码的简单、自动的方法，好的命名比简单要难一些。</p><p id="d972" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类型注释是可选的。没有它们，代码也能很好地工作。有一个叫做<a class="ae kc" href="https://mypy.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Mypy </a>的工具可以检查:</p><ul class=""><li id="71c0" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">函数和输入参数的类型注释</li><li id="426f" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">变量类型及其操作之间的一致性</li></ul><p id="2d33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个非常有用的工具。所有大的科技公司都会检查他们python代码的每一个pull请求。</p><p id="3c36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它迫使你编写更容易阅读的代码，重写过于复杂、写得不好的函数，并帮助你识别错误。</p><p id="8c07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应将Mypy检查添加到CI/CD和预提交挂钩中。</p><p id="7f79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="5574" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://mypy.readthedocs.io/en/stable" rel="noopener ugc nofollow" target="_blank"> Mypy文档</a></li><li id="2903" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">博客文章:<a class="ae kc" href="https://medium.com/@thabraze/mypy-optional-static-typing-for-python-dbc53b82f1ef" rel="noopener">Mypy python可选静态类型</a></li><li id="0510" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">博文:<a class="ae kc" href="https://medium.com/@quinn.dougherty92/mypy-and-continuous-integration-sequence-part-1-mypy-and-type-hints-ae69f66b6d9e" rel="noopener"> Mypy和持续集成序列</a></li></ul><h1 id="cf3e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> VIII:对预提交挂钩进行更多检查</strong></h1><p id="324e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你可以用许多不同的东西来扩展你的预提交钩子。</p><ul class=""><li id="1caa" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">删除尾随空白。</li><li id="3efe" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">文件的结尾在新的一行。</li><li id="0ecf" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">排序要求txt。</li><li id="b453" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">检查yaml文件的正确格式。</li><li id="3e5a" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">等等</li></ul><p id="4e01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以为应该自动发生的代码格式化和检查创建自己的挂钩。</p><p id="26a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="c21f" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://pre-commit.com/#plugins" rel="noopener ugc nofollow" target="_blank">预提交挂钩:插件</a></li></ul><h1 id="b6b3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">九:外部工具</strong></h1><p id="053f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用ML来分析每个拉请求的代码的工具有一个活跃的开发领域。</p><p id="e286" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些对公共存储库都是免费的，其中一些对私人存储库也是免费的。我看不出有什么理由不为您的公共代码启用它们。</p><p id="a4e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">链接:</em></p><ul class=""><li id="6deb" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://deepsource.io/" rel="noopener ugc nofollow" target="_blank">深源</a></li><li id="17e2" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://www.deepcode.ai/" rel="noopener ugc nofollow" target="_blank">深度代码</a></li><li id="9c96" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://www.codacy.com/" rel="noopener ugc nofollow" target="_blank"> Codacy </a></li><li id="9423" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://www.codefactor.io/" rel="noopener ugc nofollow" target="_blank">编码因子</a></li></ul><h1 id="ae33" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">结论</strong></h1><p id="df78" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果一个人至少实现了这些技术中的一些，他/她的代码将变得更容易阅读。</p><p id="7bb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但这只是第一步。</p><p id="5e30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有其他标准技术，如:</p><ul class=""><li id="2746" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" rel="noopener" target="_blank" href="/writing-test-for-the-image-augmentation-albumentation-library-a73d7bc1caa7">单元测试</a></li><li id="c95b" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">使用<a class="ae kc" href="https://hypothesis.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">假设</a>的单元测试</li><li id="24a4" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">Python环境</li><li id="19a5" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">建筑包装</li><li id="c182" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">码头化</li><li id="84c0" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">自动文档</li><li id="64ea" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">等等</li></ul><p id="24d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是它们不能像我上面描述的步骤那样简单地实施。因此，我们将把它们留给另一个时间。:)</p><p id="09f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于那些在实现我所描述的技术时有问题的读者，请随时联系我，我会扩展相应的要点。</p></div></div>    
</body>
</html>