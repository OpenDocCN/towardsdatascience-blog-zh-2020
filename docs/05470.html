<html>
<head>
<title>Easiest Guide to Getting Stock Data With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python获取股票数据的最简单指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easiest-guide-to-getting-stock-data-with-python-f74b5f75d179?source=collection_archive---------19-----------------------#2020-05-08">https://towardsdatascience.com/easiest-guide-to-getting-stock-data-with-python-f74b5f75d179?source=collection_archive---------19-----------------------#2020-05-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/77e2540e6febb062f2c4baf6f98409c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9dpqj2HWtWlVB8yqouUXdQ.jpeg"/></div></div></figure><p id="5e16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我最近在大学里完成了一门数据科学的入门课程，对于我的期末项目，我决定我要研究股票市场数据。我想把我的重点放在算法交易上，需要一种快速简单的方法来收集股票数据，这种方法很容易使用。</p><p id="1d25" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我偶然发现了一个名为<a class="ae kz" href="https://pypi.org/project/yfinance/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> yfinance </strong> </a>的库，它让我的项目变得简单多了！</p><p id="e7d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我强烈建议通读文档。这是一个快速阅读，将有助于你任何涉及股票数据的项目。</p><p id="1ecd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们开始之前，我们需要安装<strong class="kd iu"> yfinance </strong>库。为此，只需将以下内容复制到您的命令提示符中:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="c6d2" class="lj lk it lf b gy ll lm l ln lo">$ pip install yfinance</span></pre><p id="b560" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们准备开始分析我们的股票市场数据。对于我的项目，我选择了SPDR的P 500 ETF信托基金，其股票代码为间谍。您可以使用任何您想要的股票代码，但是在本文中我将使用SPY。</p><h2 id="8541" class="lj lk it bd lp lq lr dn ls lt lu dp lv km lw lx ly kq lz ma mb ku mc md me mf bi translated">入门指南</h2><p id="ed3f" class="pw-post-body-paragraph kb kc it kd b ke mg kg kh ki mh kk kl km mi ko kp kq mj ks kt ku mk kw kx ky im bi translated">幸运的是，yfinance使得提取我们的数据并快速开始分析它变得极其容易。我们可以从导入yfinance开始，使用<code class="fe ml mm mn lf b">.download()</code>函数下载我们选择的任何股票代码的历史数据。然后，我们可以通过调用<code class="fe ml mm mn lf b">.head()</code>函数返回前5行数据来快速查看我们的数据。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="cd76" class="lj lk it lf b gy ll lm l ln lo">import yfinance as yf</span><span id="2df1" class="lj lk it lf b gy mo lm l ln lo">SPY = yf.download('SPY')<br/>SPY.head()</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/e68e0b5b0648ed0d0684c8419e8b5500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OctL8T4Yy9cSNmE3R7tCXg.png"/></div></div></figure><p id="0e54" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的股票数据在Pandas数据框架中得到了很好的格式化。例如，如果您只想查看数据集中的收盘价，这就很容易了。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="c3c6" class="lj lk it lf b gy ll lm l ln lo">SPY['Close']</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mq"><img src="../Images/ccefe25d489039cfcef3a2197134cfb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LHKVSSvTfBNjai9oT7HuPg.png"/></div></div></figure><p id="5c7c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">也可以只下载特定日期范围内的数据。这将需要我们使用yfinance的Ticker模块，它允许我们使用yfinance做更多的事情。一旦这样做了，我们就可以使用<code class="fe ml mm mn lf b">.history()</code>功能来处理所有的股票数据，或者某个时间段内的数据。假设我们想要2020年1月初至2020年2月初的数据。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="778f" class="lj lk it lf b gy ll lm l ln lo">SPY = yf.Ticker('SPY')</span><span id="3d46" class="lj lk it lf b gy mo lm l ln lo">SPY_History = SPY.history(start="2020-01-01", end="2020-02-01")<br/>SPY_History.head()</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/16fe8c21d2c2ea641322ae102992f6dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p34sia2YZxF2DFqWeB8_Tg.png"/></div></div></figure><p id="d43e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经使用了Ticker模块，我们可以调用<code class="fe ml mm mn lf b">.info</code>来查看我们的数据的更详细的摘要。这将返回一个包含100个键的字典。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="12d1" class="lj lk it lf b gy ll lm l ln lo">SPY.info</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/a0120925f32fa6d0c5d0b6e2df6fe011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XgxZK8VPLqdvaiaF2qtbng.png"/></div></div></figure><p id="c345" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">数据真多啊！我们也可以在字典中查看单个键。例如，如果我们想要查看当前50天的平均值，我们可以写:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="e3cb" class="lj lk it lf b gy ll lm l ln lo">SPY.info['fiftyDayAverage']</span></pre><p id="89a2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">查看多个股票代码也同样简单。我们可以再次使用<code class="fe ml mm mn lf b">.download()</code>函数，并用空格分隔每个股票代码。然后，我们可以查看数据中的最后5行，以检查它是如何格式化的。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="3917" class="lj lk it lf b gy ll lm l ln lo">data = yf.download('SPY AAPL')<br/>data.tail()</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/1e7705c7d2aba22241bc2f330ae7b56b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7ZsSsDqcny1tPp5iNFJ6Q.png"/></div></div></figure><p id="0f5f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了快速可视化我们的数据，我们可以使用matplotlib编写一行程序来比较SPY和AAPL。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="804d" class="lj lk it lf b gy ll lm l ln lo">import matplotlib.pyplot as plt</span><span id="8dad" class="lj lk it lf b gy mo lm l ln lo">data['Close'].plot(figsize=(10, 5))</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/07405257b50da9c095e3b4eaf434efed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1DlHMbeJItwxnRtqbeAgxA.png"/></div></div></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="f1a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于任何需要快速、轻松地收集股票数据的人来说，<a class="ae kz" href="https://pypi.org/project/yfinance/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="nc">【yfinance】</em></strong></a>是一个很好的选择，也是迄今为止使用Python获取股票市场数据最简单的方法之一！</p></div></div>    
</body>
</html>