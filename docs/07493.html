<html>
<head>
<title>How to Build a Web App in 50 lines of code using Plotly and Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Plotly 和 Dash 用 50 行代码构建 Web 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-web-based-app-in-50-lines-of-code-using-plotly-and-dash-3953f039b217?source=collection_archive---------19-----------------------#2020-06-06">https://towardsdatascience.com/how-to-build-a-web-based-app-in-50-lines-of-code-using-plotly-and-dash-3953f039b217?source=collection_archive---------19-----------------------#2020-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="09e0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建企业级应用从未如此简单</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8058ff61d4522304ba2b6bd26db77f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9UeqYWpQu_8epYic"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:https://unsplash.com/photos/mcSDtbWXUZU</p></figure><p id="e611" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有很多工具可以实现数据可视化。然而，很少有工具能够让您轻松构建基于 web 的交互式高质量绘图应用程序，从而将您的数据可视化游戏提升到一个新的水平。</p><p id="9c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是 Plotly 和 Dash 所提供的，全部用 Python 编写。这就是为什么你要 100%了解它！</p><p id="4a7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将展示如何使用 Plotly 创建基本的交互式绘图，以及如何使用 Dash 将它们集成到基于 web 的应用程序中。</p><p id="90db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用的数据将是商店的每日销售额，以及 7 天的预测。每日销售数据如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/0d845a07f19df29b91c03cfc9449df24.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*MxDWDucD35cW2cxM0v9hpA.png"/></div></figure></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="e178" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">1.PLOTLY</h1><p id="1a26" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Plotly 是一个图形库，可以制作高质量的交互式图形。关键词是<strong class="lb iu">互动</strong>。下面是绘制两行的代码，一行用于每日销售额，另一行用于预测。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c8b2" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">#Import plotly<br/></strong>import plotly.graph_objects as go</span><span id="b6cc" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">#Initialize the plot<br/></strong>fig_totalsales=go.Figure()</span><span id="7b92" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">#Add the lines<br/></strong>fig_totalsales.add_trace(go.Scatter(x=sales[sales.columns[0]], y=sales[sales.columns[1]], visible=True, name='Sales'))</span><span id="d769" class="nf me it nb b gy nk nh l ni nj">fig_totalsales.add_trace(go.Scatter(x=fore['Date'],y=fore[fore.columns[0]],visible=True, name='Forecast'))</span><span id="431d" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">#Add title/set graph size<br/></strong>fig_totalsales.update_layout(title = 'Daily Sales', width=850, height=400)</span><span id="c082" class="nf me it nb b gy nk nh l ni nj">fig_totalsales.show()</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="de4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很漂亮吧？<strong class="lb iu"> <em class="nn"> append.traces </em> </strong>函数允许我们轻松地向图形中添加其他线条。</p><p id="f6e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Plotly 提供了更多。在本文中，我将把它留在这里，因为我想更多地关注 Dash。尽管如此，我还是强烈推荐你查看 Plotly 文档:<a class="ae ky" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">https://plotly.com/python/</a>。</p></div><div class="ab cl lw lx hx ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="im in io ip iq"><h1 id="61d9" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">2.破折号</h1><p id="bf07" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">Dash 平台允许我们这些新手开发高质量的企业级分析应用程序，而不需要开发人员、JavaScript 或任何超出基本 Python 技能的东西。</p><p id="0098" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了 Dash 开源(免费版)，Dash 应用可以在本地工作站上运行。你不能分享应用程序本身，但你可以分享代码。</p><p id="168a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个完整的 Dash 应用程序都有三个部分:</p><ol class=""><li id="3294" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu nt nu nv nw bi translated"><strong class="lb iu">布局</strong>，它描述了应用程序的外观。</li><li id="d467" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated"><strong class="lb iu">Dash 核心组件</strong>(称为 dcc)，基本就是应用的内容(图形、下拉菜单、复选框等)。).</li><li id="0070" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu nt nu nv nw bi translated"><strong class="lb iu">回调</strong>，通过组件之间的交互，使应用程序具有交互性。</li></ol><p id="0711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是创建包含我们之前创建的表的 Dash 应用程序所需的所有代码:</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="c9dd" class="nf me it nb b gy ng nh l ni nj"><strong class="nb iu">#Import libraries<br/></strong>import dash<br/>import dash_core_components as dcc<br/>import dash_html_components as html</span><span id="daea" class="nf me it nb b gy nk nh l ni nj"><strong class="nb iu">#Create the app<br/></strong>app = dash.Dash()<br/>app.layout = html.Div([<br/>    dcc.Graph(figure=fig_totalsales)<br/>])<br/><br/>app.run_server(debug=True, use_reloader=False)</span></pre><p id="50c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅此而已！越简单越好。我们看到这个应用程序包含一个布局和一个核心组件，即图。</p><p id="7b08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> html.div </strong>标签定义了应用程序中的一个新部分，我们可以在其中添加任何我们想要的 Dash 核心组件(dcc。图在这里)。下面是这个“应用程序”现在的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/d2cd73e98b0492c2a69cf7f82ba45f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzc8Xq4Nuawc-MTAhB3Q0Q.png"/></div></div></figure><p id="dcd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，如果有人想创建一个应用程序，这并不是展示一个单独的情节。任何 python 库都可以做到这一点。Dash 的伟大之处在于，你可以让不同的组件相互交互。这就是 Dash 的第三部分，回调，发挥作用的地方。</p><p id="7fa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回调请求一个输入，让它通过一个函数并给出一个输出。让我们看看如何改进我们当前的应用程序(我们可以做一百万件事情，这里有一些)。</p><h2 id="9952" class="nf me it bd mf od oe dn mj of og dp mn li oh oi mp lm oj ok mr lq ol om mt on bi translated">最终应用创意</h2><blockquote class="oo op oq"><p id="a2ef" class="kz la nn lb b lc ld ju le lf lg jx lh or lj lk ll os ln lo lp ot lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it"> 1。添加标题。</em>T3】</strong></p><p id="8c32" class="kz la nn lb b lc ld ju le lf lg jx lh or lj lk ll os ln lo lp ot lr ls lt lu im bi translated"><strong class="lb iu">2<em class="it">。添加过滤我们的数字的功能，以便只显示特定日期范围的数据点。</em> </strong></p><p id="6b47" class="kz la nn lb b lc ld ju le lf lg jx lh or lj lk ll os ln lo lp ot lr ls lt lu im bi translated"><strong class="lb iu"> <em class="it"> 3。添加一个交互式文本框，显示所选期间的销售总额。</em>T11】</strong></p></blockquote><p id="63b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Dash 有一个核心组件叫做<strong class="lb iu"> DatePickerRange </strong>。我们所需要的只是一个回调，将图形和文本与这个新的核心组件链接起来。</p><p id="ef42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是实现这一点的完整代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou nm l"/></div></figure><p id="5c2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是对代码的逐块描述:</p><ul class=""><li id="aa2a" class="no np it lb b lc ld lf lg li nq lm nr lq ns lu ov nu nv nw bi translated">第一个 html.div 用于创建标题为应用程序的部分。</li><li id="3cd8" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ov nu nv nw bi translated">第二个 html.div 添加了 DateRangePicker 组件以及将通过回调链接到它的两个输出(一个文本元素和一个图形)。</li><li id="29cd" class="no np it lb b lc nx lf ny li nz lm oa lq ob lu ov nu nv nw bi translated">最后一部分是回调。它要求两个输入，即两个日期，并给出两个输出，即图形和文本。在 update_output 函数中，根据提供的日期选择数据。然后，计算销售总额并创建数字。</li></ul><p id="18e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个简短的视频，展示了这个应用程序现在的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="e30f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你有了它，一个不到 50 行代码的体面的基于 web 的应用程序！查看更多关于 Dash 的信息:<a class="ae ky" href="https://dash.plotly.com/" rel="noopener ugc nofollow" target="_blank">https://dash.plotly.com/</a>。</p><p id="b130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你的阅读！</p></div></div>    
</body>
</html>