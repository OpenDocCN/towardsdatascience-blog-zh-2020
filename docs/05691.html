<html>
<head>
<title>Python &amp; Pandas in Node.js Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js应用程序中的Python和Pandas</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-pandas-in-node-js-application-47a76ae42a2a?source=collection_archive---------9-----------------------#2020-05-12">https://towardsdatascience.com/python-pandas-in-node-js-application-47a76ae42a2a?source=collection_archive---------9-----------------------#2020-05-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="26a5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Python-Pandas和node . js-Express的新冠肺炎时间序列聚合器API示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d3e7435e31d1e414c5c6645e3eaca735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSU1_e1Od7WSp7f-zZmIGA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">NodeJS和Python插图作者<a class="ae ky" href="https://medium.com/@chaeyunkim" rel="noopener"> Chaeyun Kim </a></p></figure><p id="cab1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di">在</span>数据科学领域，我们都知道<strong class="lb iu"> Python </strong>是处理数据管理、分析、可视化、ML等等的最佳工具之一。同样，<strong class="lb iu"> Node.js </strong>是用于服务器端的<strong class="lb iu"> JavaScript </strong>运行时环境，根据其经济效益、快速响应时间等，它是最流行的web架构工具之一。从编程语言流行指数看(PYPL): <strong class="lb iu"> Python </strong>和<strong class="lb iu"> JavaScript </strong>是前1 &amp; 3大流行语言。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/4c9f14dd7ff0fd9d53176f01dfcdd333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2wONuwBenYoZukdclrPuw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd mf">编程语言流行2020年5月</strong>(截图来自<a class="ae ky" href="http://pypl.github.io/PYPL.html" rel="noopener ugc nofollow" target="_blank">http://pypl.github.io/PYPL.html</a>作者)</p></figure><p id="9656" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从我的经验来看，我看到大多数Python爱好者都试图用Python写所有东西。大多数Node.js Volk试图用JavaScript进行数据清理和操作…(对于所有的回调有点痛苦…)互联网上的一些博客试图比较Node.js和Python，发现Node.js在Web开发方面很棒，Python在数据科学方面很棒。实际上，我们不需要总是坚持使用同一种编程语言，因为有很多方法可以一起使用它们。在本文中，我将向您展示一个如何从Node.js web应用程序中使用Python脚本的示例。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="0b7d" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">示例:</h1><h2 id="272c" class="nf mo it bd mp ng nh dn mt ni nj dp mx li nk nl mz lm nm nn nb lq no np nd nq bi translated">让我们用Node.js &amp; Pandas构建新冠肺炎时间序列聚合器API</h2><p id="3fe2" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">在本文中，我将展示一个如何创建一个简单的API web应用程序的示例，在该应用程序中，用户可以使用Node.js和Express框架请求新冠肺炎数据集和时间序列聚合间隔。有趣的是，我们将把Python和Pandas完成的时间序列聚合也集成到应用程序中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/4a20d2a4c06a9d8cfb6a9b5efaf507c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0P_mZC17LcxqPEVUDesb_g.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd mf">支持时序聚合的新冠肺炎快速API的简单节点(启用</strong>)</p></figure><p id="eb54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随后，开发人员可以使用这样的API应用程序，通过任何JavaScript库在web应用程序中轻松呈现图表/地图/仪表板；如<em class="nx"> Apexchart.js </em>、<em class="nx"> Highchart.js </em>或<em class="nx"> Chart.js </em>。下图显示了对每日新冠肺炎数据集使用简单Apexchart的示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/a4ccff2c6d38b19ffe267fd57287f708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IIqN0fdezniaoMJov4XbJA.gif"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd mf">用Apexchart.js展示新冠肺炎确诊病例演示</strong>(作者)</p></figure><p id="f8fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了该应用程序的整体结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/b2403e4973e53bac704572d502d08caf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEIr5RBuo0f4kuB2BVBcNg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd mf">本例的系统架构</strong>(作者)</p></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="05e5" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">A部分:Python和Pandas用于时间序列分析</h1><p id="738c" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">首先，让我们从Python应用程序开始，我将从我的关于用Python 对<a class="ae ky" href="https://medium.com/swlh/intro-to-time-series-analysis-with-pandas-in-python-d795da784501" rel="noopener">新冠肺炎时间序列进行分析的文章中选取一个例子。简而言之，我们将使用一个简单的Python脚本来读取和分析从JHU CSSE到熊猫数据帧的新冠肺炎数据集。然后，按“国家/地区”级别对数据集进行分组，转置数据帧，将日期/时间列设置为索引列，对确诊新冠肺炎病例最多的国家进行排序，并根据输入的国家编号选择排名靠前的国家。之后，用输入的时间间隔对数据集进行重采样，并返回<em class="nx">。json </em>输出给用户。以下脚本显示了整个脚本:</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://gist.github.com/JoeThunyathep/28d9d404aa80d59ada69278e9c8de6b9" rel="noopener ugc nofollow" target="_blank"><strong class="ak">covid 19 aggregator . py</strong></a>(作者示例脚本)</p></figure><p id="0aa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个脚本有两个参数；第一个参数(arg1)是确诊新冠肺炎病例最多的国家数量，第二个参数(arg2)是累计时间间隔。例如，如果我们想要获得来自前三个国家的已确认的新冠肺炎病例和每月的汇总数据，那么我们可以使用以下命令运行Python脚本:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="6f88" class="nf mo it oe b gy oj ok l ol om"><strong class="oe iu">$ python covid19aggregator.py 3 'M'</strong></span></pre><p id="7a89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您将获得以下结果(截至2020年5月10日):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="ak">执行带有3/‘M’个参数</strong>的<a class="ae ky" href="https://gist.github.com/JoeThunyathep/28d9d404aa80d59ada69278e9c8de6b9" rel="noopener ugc nofollow" target="_blank"><strong class="ak">covid 19 aggregator . py</strong></a><strong class="ak">的示例结果(作者的示例结果)</strong></p></figure><p id="6459" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到时间索引被写成了时间戳，我们将这样保存它，因为它便于以后在基于web的可视化工具中使用。</p><h1 id="f9fd" class="mn mo it bd mp mq on ms mt mu oo mw mx jz op ka mz kc oq kd nb kf or kg nd ne bi translated">B部分:带有Express应用程序的Node.js</h1><p id="6938" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">在这一部分中，我们将从创建一个简单的Node.js &amp; Express应用程序开始。您可以使用以下命令启动项目并安装express:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="6bd8" class="nf mo it oe b gy oj ok l ol om"><strong class="oe iu">$ npm init<br/>$ npm install express --save</strong></span></pre><p id="8620" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，使用下面的示例脚本为Node.js web服务器创建一个<code class="fe ob oc od oe b">server.js</code>文件。如果你是新来的快递，请看这里的文档<a class="ae ky" href="https://expressjs.com/en/guide/routing.html" rel="noopener ugc nofollow" target="_blank"/>。在第1部分中，我们在端口3000上创建了一个简单的express应用程序。你可以换到任何你喜欢的港口。在第2部分中，我们定义了一个GET请求路由到“<em class="nx">http://localhost:3000/covid _ 19 _ time series</em>”，并使用<code class="fe ob oc od oe b">child_process</code>生成Python子进程，还将URL查询参数<code class="fe ob oc od oe b">‘numberOfCountries’</code>和<code class="fe ob oc od oe b">‘aggregationInterval’</code>传递给Python进程。您可以在这里看到完整的Node.js服务器脚本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://gist.github.com/JoeThunyathep/ea0713caa129208d7e1a029a35dd44ae" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> NodeJS服务器</strong> </a> <strong class="ak">。js与衍生</strong><a class="ae ky" href="https://gist.github.com/JoeThunyathep/28d9d404aa80d59ada69278e9c8de6b9" rel="noopener ugc nofollow" target="_blank"><strong class="ak">covid 19 aggregator . py</strong></a><strong class="ak">Python进程</strong>(作者示例脚本)</p></figure><p id="7f2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成了！现在，这个Node.js服务器已经完成，当用户调用以获取COVID 19数据时，它会生成Python子流程。让我们通过运行一个服务器来测试它:</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="193e" class="nf mo it oe b gy oj ok l ol om"><strong class="oe iu">$ node server.js<br/></strong>server running on http://localhost:3000</span></pre><p id="812b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在web浏览器上查看结果:<br/>(在这里，您可以传递任意数量的国家/聚合间隔)</p><pre class="kj kk kl km gt of oe og oh aw oi bi"><span id="4bf3" class="nf mo it oe b gy oj ok l ol om"><a class="ae ky" href="http://localhost:3000/covid_19_timeseries?numberOfCountries=5&amp;aggregationInterval=M" rel="noopener ugc nofollow" target="_blank"><strong class="oe iu">http://localhost:3000/covid_19_timeseries?numberOfCountries=5&amp;aggregationInterval=M</strong></a></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/d70e8b5cdf65aab72678491377df519b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UvZ7UtJBOFompgZjGyMo2w.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">网络浏览器上的示例结果。(作者截图)</p></figure><p id="b8fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，大概就是这样。现在，您已经有了一个用Node.js和Python构建的简单API应用程序。请注意，这个示例是为了展示将它们集成在一起的概念，可以在Node.js中改进这些脚本以获得更好的API路由结构，在Python中改进这些脚本以获得更复杂的数据操作工作流。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h2 id="fa9d" class="nf mo it bd mp ng nh dn mt ni nj dp mx li nk nl mz lm nm nn nb lq no np nd nq bi translated">结论</h2><p id="6fe8" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">本文展示了一个示例，说明如何使用NodeJS通过Pandas生成一个Python进程，并将结果直接返回给API调用。通过这种方式，我们可以灵活地将所有很酷的数据Python脚本与流行的JavaScript web框架集成在一起。我希望你喜欢这篇文章，并发现它对你的日常工作或项目有用。如果您有任何问题或意见，请随时给我留言。</p><p id="fe8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于我&amp;查看我所有的博客内容:<a class="ae ky" href="https://joets.medium.com/about-me-table-of-content-bc775e4f9dde" rel="noopener">链接</a></p><p id="ebe3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安全<strong class="lb iu">健康</strong>健康<strong class="lb iu">！💪</strong></p><p id="2645" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">感谢您的阅读。📚</strong></p></div></div>    
</body>
</html>