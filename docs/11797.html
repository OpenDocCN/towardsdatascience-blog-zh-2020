<html>
<head>
<title>How to do load testing of a real-time pipeline?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对实时管道进行负载测试？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/load-testing-of-a-real-time-pipeline-d32475163285?source=collection_archive---------30-----------------------#2020-08-15">https://towardsdatascience.com/load-testing-of-a-real-time-pipeline-d32475163285?source=collection_archive---------30-----------------------#2020-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9d83" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">借助 JMeter 对基于流水线的实时 AWS kine sis API 进行负载测试</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8e933ec624609b933617a3b338138423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dQWYfinE8FzLp0glHZb7hw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@icons8?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Icons8 团队</a>在<a class="ae ky" href="https://unsplash.com/s/photos/real-time-data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</p></figure><p id="8233" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，我在做一个实时管道，在设置好之后，我的下一步是它的负载测试，因为我还没有危险到可以马上生产它！</p><p id="8999" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为我们在生产中遇到的问题默哀一分钟。</p><p id="780e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好了，一分钟结束了。回到用例，我期望我的管道平均每秒 100 条记录。此外，我想找到我的管道的阈值:在断裂之前它可以承受多少负载。</p><p id="ad7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我用于负载测试的工具是，JMeter。我在作为测试人员的实习期间学会了如何使用 JMeter，作为一名大数据工程师，我能够再次应用所学的技能，这真是太神奇了。的确，知识从来不会浪费。</p><p id="b3e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在更高的层次上，我的管道通过 API 接受输入，因此我的负载测试减少到 API 的负载，下面是我在简单步骤中所做的:</p><h2 id="76a1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 1:下载并安装 JMeter</h2><p id="f416" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">目前我用的是 Windows 机(不要评判好吗？这都是因为这种 COVID 的情况，我无法访问我的笔记本电脑)。那么，下面是如何在我的 Windows 上进行设置的:<br/> -安装&amp; setup Java(如果还没有安装的话)<br/> -从<a class="ae ky" href="http://jmeter.apache.org/download_jmeter.cgi" rel="noopener ugc nofollow" target="_blank">下载 JMeter 到这里</a> <br/> -解压<br/> -运行解压后的文件夹&gt; bin &gt; jmeter.bat <br/> -瞧，GUI 将被启动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/1c4ea4a8722a8d3bcf5d782c05cb7107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1sHXfSiDQ1lPjAeCAzjaQ.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">启动后的 JMeter GUI</p></figure><h2 id="9aca" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 2:创建一个测试计划</h2><ul class=""><li id="031b" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">通过点击 File &gt; New 创建一个新的测试计划</li><li id="0636" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">右键单击测试计划&gt;添加&gt;线程(用户) &gt;线程组</li></ul><h2 id="29b1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 3:添加应用程序接口详细信息</h2><ul class=""><li id="0ff2" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">右键单击线程组&gt;添加&gt;采样器&gt; HTTP 请求</li><li id="b760" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">在“HTTP 请求”选项卡中，指定协议、服务器名称、HTTP 请求、端点和请求正文。如果需要，添加任何其他详细信息。它应该看起来像这样:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/abc36bad028dc918b83ceaa3afe7f021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Kb71LLDsZgJfdSPRwDbWA.png"/></div></div></figure><ul class=""><li id="fbb0" class="mu mv it lb b lc ld lf lg li nj lm nk lq nl lu mz na nb nc bi translated">您还可以探索像 HTTP header manager、HTTP Request Defaults 这样的采样器，如果它适合您的用例的话。它们非常简单明了。</li></ul><h2 id="bedf" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 4:添加监听器</h2><ul class=""><li id="a3ca" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">为了查看和记录负载测试的结果，我们需要添加一个侦听器。</li><li id="92d3" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">右键单击线程组&gt;添加&gt;监听器&gt;查看表中的结果</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/0a852fc2d53896e58a592a9e8a51e920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xc0zGgTwR8bpJt_EaNCYMQ.png"/></div></div></figure><ul class=""><li id="8a6f" class="mu mv it lb b lc ld lf lg li nj lm nk lq nl lu mz na nb nc bi translated">如果需要更多详细信息以及进行详细调试，可以类似地添加查看结果树侦听器。与 API 失败的情况一样，详细的响应对于调试非常有用。</li></ul><h2 id="f8b1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 5:设置负载测试指标</h2><ul class=""><li id="01c0" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">只需点击即可进入线程组选项卡。</li><li id="4712" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">添加线程属性，因为我希望在无限长的持续时间内(直到我停止测试)有 100/s 的负载，所以我做了这样的事情:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/bb7fc5bd620b3ab7d4af9b6f4f3d59d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qafzmHWcZuMYO3ysVdrv5Q.png"/></div></div></figure><h2 id="875b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">步骤 5:运行测试</h2><ul class=""><li id="f0f9" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">按顶部的播放按钮运行测试。</li><li id="048c" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">如果设置成功，您将开始在 listeners:View Results Table/View Results Tree 中看到 API 响应。</li><li id="a934" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">如果没有，您可以通过工具栏中的选项&gt;日志查看器来启用 JMeter 日志。日志显示在右下角。</li><li id="a742" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">这样，您就可以在系统上生成所需的测试负载。</li></ul><h2 id="3e70" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">需要注意的事项:</h2><ul class=""><li id="554c" class="mu mv it lb b lc mo lf mp li mw lm mx lq my lu mz na nb nc bi translated">在从您的机器开始负载测试之前，请确保您可以访问 API。</li><li id="b73d" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">大多数参数都是不言自明的，请参考文档以了解更多信息或各种用例。</li><li id="2ee5" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">尽管它对我的用例来说工作得很好，但是通常不推荐通过 GUI 进行负载测试。因此，如果您正在处理更高的负载，请参考非 GUI 模式下 JMeter 使用的文档。</li></ul><p id="26b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">测试愉快！！<br/> <em class="nn"> Ciao。</em></p></div></div>    
</body>
</html>