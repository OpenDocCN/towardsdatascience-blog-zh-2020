<html>
<head>
<title>Why You Need to Manage Your ML Models After Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么您需要在部署后管理ML模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-beginners-guide-to-machine-learning-model-monitoring-36bf7faf3616?source=collection_archive---------15-----------------------#2020-04-28">https://towardsdatascience.com/a-beginners-guide-to-machine-learning-model-monitoring-36bf7faf3616?source=collection_archive---------15-----------------------#2020-04-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7734" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">机器学习模型监控初学者指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ab6f332a23d78ce7bcdf33b123fb0635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ju-XIygYHY88wn-tf_1r5A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/mohamed_hassan-5229782/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4263129" rel="noopener ugc nofollow" target="_blank">穆罕默德·哈桑</a>拍摄，来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4263129" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a></p></figure><h1 id="6b4a" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">目录</h1><ol class=""><li id="b9dc" class="lr ls it lt b lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><a class="ae ky" href="#08f9" rel="noopener ugc nofollow">简介</a></li><li id="7dd2" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated"><a class="ae ky" href="#29ca" rel="noopener ugc nofollow">什么是模型监控</a></li><li id="8639" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated"><a class="ae ky" href="#ef70" rel="noopener ugc nofollow">为什么模型监控很重要</a></li><li id="d388" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated"><a class="ae ky" href="#eeb6" rel="noopener ugc nofollow">模型监控中的指标</a></li></ol></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="08f9" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">介绍</h1><p id="72fe" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">机器学习(ML)模型的生命周期非常长，而且它肯定不会在你建立模型后结束——事实上，这只是开始。一旦你创建了你的模型，下一步就是生产你的模型，这包括<a class="ae ky" href="https://www.datatron.com/resources/deployment" rel="noopener ugc nofollow" target="_blank">部署你的模型</a>并监控它。虽然这听起来成本很高，但为了从ML模型中获得最大价值，在使用模型的过程中监控模型是非常必要的。</p><p id="2f8a" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">想象一下监控一个ML模型，就像你想做年度体检或定期给你的车换油一样。模型建模是一项操作任务，它允许您检查您的模型是否发挥了最佳性能。</p><p id="14cd" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">在本文中，您将了解什么是模型监控，以及为什么它对于生产化模型如此重要。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="29ca" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">什么是模型监控</h1><p id="d29a" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">模型监控是机器学习生命周期中的一个操作阶段，在模型部署之后，它需要“监控”您的ML模型，例如错误、崩溃和延迟，但最重要的是，确保您的模型保持预定的预期性能水平。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="ef70" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">为什么模型监控很重要</h1><p id="3184" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">为什么模型监控很重要的简单答案是，随着使用时间的推移，您的模型会退化，这被称为<strong class="lt iu">模型漂移</strong>。模型漂移，也称为模型衰减，指的是由于各种原因(我将在下面解释)导致的模型预测能力的退化。</p><h2 id="36b6" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated">看不见的数据</h2><p id="ec5f" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">一般来说，机器学习模型仅在域内数据总人口的大约百分之十的样本大小上进行训练[1]，并且通常是由于标记数据的稀缺或训练大量数据的计算限制。虽然构建机器学习模型是为了减少偏差并能够归纳数据，但总会有模型输出不正确、不准确或低于标准的数据样本。</p><h2 id="2317" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated">环境的变化和变量之间的关系</h2><p id="4726" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">人们经常忘记的是，模型是基于其创建时的变量和参数进行优化的，ML模型也不例外。想象一下20年前创建的垃圾邮件检测模型现在会如何运行。二十年前，互联网还不算什么！垃圾邮件变得越来越复杂，变化也越来越大，因此人们可能会怀疑垃圾邮件检测模型是否能够发挥作用。这是环境变化的一个例子。</p><p id="de90" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">影响模型环境及其变量之间关系的另一个因素是我们对数据的解释。例如，十年前创建的情感模型可能会错误地对各种单词和短语的情感进行分类，因为我们说话的方式、我们使用的单词和我们开发的俚语会随着时间不断变化。你再也听不到有人用古英语说话了，是吗？</p><h2 id="cb91" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated">上游数据变更</h2><p id="74b8" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">这指的是数据管道中的操作数据变化。实际上，这很常见，因为数据科学团队或部门通常无法控制输入数据来自的每个系统。例如，一个完全孤立的软件工程团队可能会将一个变量的度量单位从摄氏温度改为华氏温度，尽管其余的数据是以摄氏温度存储的。例如，如果一个人试图找到平均温度，这可能会导致严重的后果。上游数据更改的一个更简单的例子是不再生成要素，从而导致丢失值。</p><h2 id="6718" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated">总体而言…</h2><p id="637f" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">机器学习模型的阶段环境永远不会无限期地等同于生产环境，因为我们生活的世界总是在变化。基于上述原因，对你投入生产的任何ML进行监控是非常必要的。在下一章中，我们将讨论您可以监控的各种指标，以及在决定要监控什么指标时应该考虑的因素。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="eeb6" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">模型监控中的度量</h1><p id="018d" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">有几个指标可以用来监控ML模型。您选择的指标取决于多种因素:</p><ul class=""><li id="e549" class="lr ls it lt b lu nn lw no ly oe ma of mc og me oh mg mh mi bi translated">是回归还是分类任务？</li><li id="c817" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">商业目标是什么？精确度与召回率</li><li id="5777" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me oh mg mh mi bi translated">目标变量的分布是什么？</li></ul><p id="8302" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">以下是模型监控中常用的各种指标:</p><h2 id="e423" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">类型1错误</strong></h2><p id="e8e9" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">也被称为<strong class="lt iu">假阳性</strong>，这是模型错误预测阳性类别的结果。例如，当你没有怀孕时，一个结果为阳性的妊娠测试就是一个1型错误的例子。</p><h2 id="ef95" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">第二类错误</strong></h2><p id="9273" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">也被称为<strong class="lt iu">假阴性</strong>，这是模型错误预测阴性类别的结果。这方面的一个例子是，当一个结果说你没有患癌症，而你实际上患了癌症。</p><h2 id="0769" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">精度</strong></h2><p id="c704" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">模型的准确性简单地等于模型正确预测的分数，由以下等式表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/fd26135af6d19a3f8f0bab9ceae5e412.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/0*GtZ3JLv4xK6peF6H"/></div></figure><h2 id="5cc0" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">精度</strong></h2><p id="b92a" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">Precision试图回答“多大比例的肯定识别实际上是正确的？”并且可以由下面的等式表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/81615cfd0ce9d4468e44b7d9a1db748e.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/0*kgdHYK626NkNhJpG"/></div></figure><h2 id="f491" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">回忆</strong></h2><p id="edc7" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">回忆试图回答“多大比例的实际阳性被正确识别？”并且可以由下面的等式表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/9c535da567dd01279db8603dd67916e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/0*6wLj17JSRY_IYU2b"/></div></figure><h2 id="8b7f" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak"> F1得分</strong></h2><p id="89aa" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">F1分数是对测试准确性的一种衡量——它是精确度和召回率的调和平均值。它的最高分是1(完美的精确度和召回率)，最低分是0。总的来说，它是对模型的精确性和稳健性的一种度量，可以用以下等式表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/aa4db58e8fd951bb8775949a8a75cb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/0*DnYAiYvBHvV6pzPa"/></div></figure><h2 id="e628" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak"> R平方</strong></h2><p id="d692" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">r平方是一种度量，它告诉你因变量的方差在多大程度上是由自变量的方差来解释的。更简单地说，当系数估计趋势时，R平方表示最佳拟合线周围的散布。</p><p id="81b2" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">例如，如果R是0.80，那么80%的变化可以用模型的输入来解释。</p><p id="e10f" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">如果R为1.0或100%，这意味着因变量的所有变动都可以完全由自变量的变动来解释。</p><h2 id="9f92" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">调整后的R平方</strong></h2><p id="0d3e" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">添加到模型中的每个额外的独立变量总是增加R值，因此，具有几个独立变量的模型可能看起来更适合，即使它不是。这就是调整后的R的用武之地。调整后的R补偿每个额外的独立变量，并且仅在每个给定变量将模型改进到超出概率可能的程度时才增加。</p><h2 id="7884" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">平均绝对误差</strong></h2><p id="c427" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">绝对误差是预测值和实际值之间的差值。因此，平均绝对误差是绝对误差的平均值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c17af6b1a70b9c4b728d9505c9d1cf07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2Yq3Pf_vBi_Pt6rz"/></div></div></figure><h2 id="36b9" class="ns la it bd lb nt nu dn lf nv nw dp lj ly nx ny ll ma nz oa ln mc ob oc lp od bi translated"><strong class="ak">均方误差</strong></h2><p id="5147" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">均方误差或MSE与MAE类似，只是取预测值和实际值之间的平方差的平均值。</p><p id="f225" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">因为差值是平方的，所以较大的误差被赋予更高的权重，所以当您想要最小化较大的误差时，这应该在MAE上使用。下面是MSE的等式和代码。</p><p id="b7fd" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi on translated"><span class="l oo op oq bm or os ot ou ov di"> O </span>总之，您选择监控的指标最终取决于手头的任务和您工作的业务环境。</p><p id="5e2e" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">例如，在数据科学领域，众所周知，准确性指标与欺诈检测模型无关，因为欺诈交易的百分比通常不到1%。因此，即使欺诈检测模型有99%的准确率，因为它将<strong class="lt iu">所有</strong>交易归类为非欺诈交易，这也不能帮助我们确定该模型是否有效。</p><p id="47d1" class="pw-post-body-paragraph na nb it lt b lu nn ju nc lw no jx nd ly np nf ng ma nq ni nj mc nr nl nm me im bi translated">另一个例子是，当涉及到癌症筛查测试时，假阴性分类的严重性比假阳性分类严重得多。说一个癌症患者没有癌症最终会导致他或她的死亡。这比说一个病人得了癌症，进行进一步的检查，却发现病人没有癌症要糟糕得多。(安全总比后悔好！)</p><blockquote class="ow ox oy"><p id="d9e9" class="na nb oz lt b lu nn ju nc lw no jx nd pa np nf ng pb nq ni nj pc nr nl nm me im bi translated">更多类似的文章，请查看https://blog.datatron.com/<a class="ae ky" href="https://medium.com/getdatatron" rel="noopener">Datatron的媒体页面</a>或他们的博客<a class="ae ky" href="https://blog.datatron.com/" rel="noopener ugc nofollow" target="_blank"/></p></blockquote></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="81cd" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">感谢阅读！</h1><p id="2129" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">如果你喜欢我的工作并想支持我，我会非常感谢你在我的社交媒体频道上关注我:</p><ol class=""><li id="5696" class="lr ls it lt b lu nn lw no ly oe ma of mc og me mf mg mh mi bi translated">支持我的最好方式是在<strong class="lt iu">媒体</strong>T10【这里上关注我。</li><li id="77a2" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">在<strong class="lt iu">推特</strong>关注我<a class="ae ky" href="https://twitter.com/terence_shin" rel="noopener ugc nofollow" target="_blank">这里</a>。</li><li id="8578" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">点击这里订阅我的新<strong class="lt iu"> YouTube频道</strong> <a class="ae ky" href="https://www.youtube.com/channel/UCmy1ox7bo7zsLlDo8pOEEhA?view_as=subscriber" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="378d" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">在<strong class="lt iu"> LinkedIn </strong>上关注我<a class="ae ky" href="https://www.linkedin.com/in/terenceshin/" rel="noopener ugc nofollow" target="_blank">这里</a>。</li><li id="a657" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">在我的<strong class="lt iu">邮箱列表</strong> <a class="ae ky" href="https://forms.gle/UGdTom9G6aFGHzPD9" rel="noopener ugc nofollow" target="_blank">这里</a>报名。</li><li id="25ce" class="lr ls it lt b lu mj lw mk ly ml ma mm mc mn me mf mg mh mi bi translated">查看我的网站<a class="ae ky" href="https://terenceshin.com/" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">terenceshin.com</strong></a>。</li></ol></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="3fe8" class="kz la it bd lb lc mv le lf lg mw li lj jz mx ka ll kc my kd ln kf mz kg lp lq bi translated">资源</h1><p id="b527" class="pw-post-body-paragraph na nb it lt b lu lv ju nc lw lx jx nd ly ne nf ng ma nh ni nj mc nk nl nm me im bi translated">[1]德什穆克，奥姆(2019)。部署了你的机器学习模型？以下是你需要了解的后期制作监控。<em class="oz">分析维迪亚。</em><br/><a class="ae ky" href="https://www.analyticsvidhya.com/blog/2019/10/deployed-machine-learning-model-post-production-monitoring/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2019/10/deployed-machine-learning-model-post-production-monitoring/</a></p></div></div>    
</body>
</html>