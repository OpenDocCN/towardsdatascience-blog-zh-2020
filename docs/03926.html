<html>
<head>
<title>Collect and Visualize COVID-19 Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">收集和可视化新冠肺炎数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/collect-and-visualize-covid-19-data-336e4dc9ead?source=collection_archive---------39-----------------------#2020-04-11">https://towardsdatascience.com/collect-and-visualize-covid-19-data-336e4dc9ead?source=collection_archive---------39-----------------------#2020-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1cbc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">网络抓取和探索性数据分析初学者指南</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/f34e930ff00930b2cf061834ec332ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HCq-jpiNcFV-2KkEoAw1mA.png"/></div></div></figure><p id="75c0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">不用说，每个人都很清楚新冠肺炎对整个世界的毁灭性影响。有数不清的数据集可用于捕捉这种病毒在全球传播的趋势。</p><p id="b464" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">就我个人而言，我更感兴趣的是分析我的家乡宾夕法尼亚州(美国)的新冠肺炎案例。我偶然发现了<a class="ae lo" href="https://www.health.pa.gov/topics/disease/coronavirus/Pages/Cases.aspx" rel="noopener ugc nofollow" target="_blank">宾夕法尼亚州卫生部网站</a>，该网站公布了宾夕法尼亚州按县分列的每日新冠肺炎病例。不幸的是，每天的更新都以 HTML 表格的形式呈现在单独的部分中。当我们浏览这个网页时，很难在脑海中形成每日趋势的图像。因此，我决定接受挑战来解决这个问题。我开始了一个周末迷你项目来实施解决以下问题的方法:</p><ul class=""><li id="8e58" class="lp lq iq ku b kv kw ky kz lb lr lf ls lj lt ln lu lv lw lx bi translated">从网页中提取数据</li><li id="e917" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">执行数据分析</li><li id="6d4f" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">创建数据可视化</li></ul><p id="4e92" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">结果显示在我的<a class="ae lo" href="https://github.com/bchan01/covid-19-data-analysis" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>中的<a class="ae lo" href="https://github.com/bchan01/covid-19-data-analysis/blob/master/data-analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>中。不幸的是，GitHub 无法渲染交互式数据图，如果您希望查看，请访问<a class="ae lo" href="https://nbviewer.jupyter.org/github/bchan01/covid-19-data-analysis/blob/master/data-analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter NBViewer </a>。</p><blockquote class="md me mf"><p id="98d1" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">事不宜迟，我们开始吧！我将向你详细介绍我的学习历程。</p></blockquote><p id="d11b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们将从如何将 html 表格转换成数据集开始，然后是数据操作、绘图和图表。最后，我们将创建一个交互式地图，按县显示确诊病例。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="31ce" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">通过网络抓取提取数据</strong></h1><p id="f08e" class="pw-post-body-paragraph ks kt iq ku b kv nj jr kx ky nk ju la lb nl ld le lf nm lh li lj nn ll lm ln ij bi translated">我想简单介绍一下我是如何从每天更新的<a class="ae lo" href="https://www.health.pa.gov/topics/disease/coronavirus/Pages/Archives.aspx" rel="noopener ugc nofollow" target="_blank"> PA 卫生部</a>网页中提取数据集的。当您滚动页面时，您会注意到每个每日部分都以日期标题开始(例如:2020 年 4 月 8 日)。我对汇总以下两个表中的数据感兴趣，即<em class="mg">总计数表</em>和<em class="mg">按县的总计数表</em>。</p><p id="6a77" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">总计数表:</strong>显示迄今为止的阴性、阳性病例和死亡总数。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi no"><img src="../Images/8fb75650814cecfa91eed0046f3e8999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jat-KO94c8WOuytw_UFthQ.png"/></div></div></figure><p id="a9c6" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">County Total Counts by County 表:</strong>显示宾夕法尼亚州各县迄今为止的阳性病例和死亡总数。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d7eb88db68b0abb876ab41ccfc7af933.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*TjQfrxf9qq1vU55mw59Xug.png"/></div></figure><p id="d0a8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">下面是网络抓取策略的概要，完整的源代码可以在我的 GitHub 库中找到。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nq"><img src="../Images/d6e4348e4e53f69e55e707a21b197a09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OitjgeRH7TU27xV--V0aCw.png"/></div></div></figure><p id="18a0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">您需要安装这些依赖项:</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="5458" class="nw ms iq ns b gy nx ny l nz oa">pip install beautifulsoup4<br/>pip install lxml</span></pre><p id="1015" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第一步。</strong>提取&lt; h4 &gt;标题之间的日期并存储一个列表。</p><p id="8d43" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第二步。</strong>提取每个<em class="mg">总计数表</em>中的数据，并将其与步骤 1 中的日期匹配。输出文件的示例如下所示。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="4023" class="nw ms iq ns b gy nx ny l nz oa"><strong class="ns ir">pa_summary.csv:<br/></strong>Date,Negative,Positive,Deaths<br/>2020–04–08,82299,16239,309<br/>2020–04–07,76719,14559,240</span></pre><p id="8cf3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第三步。</strong> <em class="mg"> </em>提取各县总计数表中的数据，并将其与步骤 1 中的日期进行匹配。输出文件的示例如下所示。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="8149" class="nw ms iq ns b gy nx ny l nz oa"><strong class="ns ir">pa_county.csv:<br/></strong>Date,County,Cases,Deaths<br/>2020–04–08,Adams,33,0<br/>2020–04–08,Allegheny,720,1</span></pre><p id="a401" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第四步。</strong>调用<a class="ae lo" href="https://developer.mapquest.com/documentation/geocoding-api/" rel="noopener ugc nofollow" target="_blank"> MapQuest 地理编码 API </a>获取各县的纬度和经度。你可以建立一个每月 15K 交易的免费账户。从 MapQuest 获取 API 密钥，并更新<a class="ae lo" href="https://github.com/bchan01/covid-19-data-analysis/blob/master/data_extractor_pa.py" rel="noopener ugc nofollow" target="_blank"> data_extractor_pa.py </a>中的 API_KEY 值。输出文件的示例如下所示:</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="7035" class="nw ms iq ns b gy nx ny l nz oa"><strong class="ns ir">pa_county_geolocation.csv</strong><br/>County,Latitude,Longitude<br/>Bradford,41.774669,-76.526461<br/>Butler,40.861021,-79.895225</span></pre><p id="97ad" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第五步(可选)。</strong>如果您希望获得最新数据，请运行提取程序重新生成 CSV 文件。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="dc2b" class="nw ms iq ns b gy nx ny l nz oa">python data_extractor_pa.py</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="8c37" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">进行探索性数据分析</strong></h1><p id="4963" class="pw-post-body-paragraph ks kt iq ku b kv nj jr kx ky nk ju la lb nl ld le lf nm lh li lj nn ll lm ln ij bi translated">有了这三个数据集，让我们启动<a class="ae lo" href="https://github.com/bchan01/covid-19-data-analysis/blob/master/data-analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>。</p><p id="fc8c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">首先，导入这些依赖项:</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="41bd" class="nw ms iq ns b gy nx ny l nz oa">import datetime as dt<br/>import matplotlib.pyplot as plt<br/>from matplotlib import style<br/>import pandas as pd</span></pre><p id="bdce" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">将汇总数据集加载到 Panda 数据框架中:</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="294b" class="nw ms iq ns b gy nx ny l nz oa">df = pd.read_csv("pa_summary.csv")<br/>df.head(5)</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ob"><img src="../Images/a509433dd8143b7933aaae9f63662f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CL5eIerlpWLuvFmu2Mqc1g.png"/></div></div></figure><p id="1443" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">计算测试总数和阴性/阳性/死亡百分比:</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="ebb1" class="nw ms iq ns b gy nx ny l nz oa">df['Tested'] = df['Positive'] + df['Negative']<br/># Percentages<br/>df['Positive_Percent'] = round(100*df['Positive']/df['Tested'], 1)<br/>df['Negative_Percent'] = round(100*df['Negative']/ df['Tested'], 1)<br/>df['Death_Percent'] = round(100*df['Deaths']/ df['Tested'], 3)<br/># sort by date<br/>df = df.sort_values('Date', ascending = True)<br/>df.head(5)</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oc"><img src="../Images/c6d02a6243c9c8747fdb5a0ac094fcb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ZnHC48LNC1BQhaQnOo0gQ.png"/></div></div></figure><p id="877f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">绘制迄今为止的总测试数、阳性数、阴性数和死亡数:</p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="od oe l"/></div><p class="of og gj gh gi oh oi bd b be z dk translated"><a class="ae lo" href="https://gist.github.com/bchan01/b58461940fd24ed85ed4dac6f0082ed7" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">源代码</strong> </a></p></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oj"><img src="../Images/07405c669cc64f50fb27610e88361936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lepiyfl1cRYL8CepLJ917Q.png"/></div></div></figure><blockquote class="md me mf"><p id="2a65" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">测试人群中阳性与阴性的百分比是多少？</p></blockquote><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="od oe l"/></div><p class="of og gj gh gi oh oi bd b be z dk translated"><a class="ae lo" href="https://gist.github.com/bchan01/c089d1b573d7face1540ae1256272be7" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">源代码</strong> </a></p></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ok"><img src="../Images/215278f5595a1fbccc305066170fa0d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NFWI96ZjA5CwHkgWYal1rA.png"/></div></div></figure><blockquote class="md me mf"><p id="aba4" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">也许观察每天的变化更有意义。</p></blockquote><p id="d302" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">以下代码片段显示了如何利用 panda 中可用的<em class="mg"> diff 函数</em>来计算案例的每日变化。注意，我们需要在第一行填入<em class="mg"> 0 </em>以避免得到<em class="mg"> NaN。</em></p><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="od oe l"/></div><p class="of og gj gh gi oh oi bd b be z dk translated"><a class="ae lo" href="https://gist.github.com/bchan01/5f703befa735130272391191fcd0f033" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">源代码</strong> </a></p></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ol"><img src="../Images/84ca2130673a2a65c505a96b7bc2d564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOItbQ0pheP9n2bJCGMuBw.png"/></div></div></figure><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="od oe l"/></div></figure><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi om"><img src="../Images/e7755ce3c7a959e66a10971a6657f925.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3iy0VPjg25HgiSd-mhewg.png"/></div></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="3dbb" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">看着县细目</strong></h1><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="4cad" class="nw ms iq ns b gy nx ny l nz oa">df_counties = pd.read_csv("pa_county.csv")<br/>df_counties.head()</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi on"><img src="../Images/60d143417bcdd8dc61e2b2ec33a675cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4A_XiX70rbIGt7gQcJd0Qw.png"/></div></div></figure><blockquote class="md me mf"><p id="c1a2" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">费城的确诊病例趋势如何？</p></blockquote><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="de83" class="nw ms iq ns b gy nx ny l nz oa"># Filter Data for a County<br/>county_name = 'Philadelphia'<br/>df_county = df_counties[df_counties['County']== county_name]<br/>df_county = df_county.sort_values('Date', ascending = True)</span><span id="3667" class="nw ms iq ns b gy oo ny l nz oa"># Line Plot<br/>style.use('ggplot')<br/>ax = plt.gca()<br/>df_county.plot(kind='line',x='Date',y='Cases', color='green', ax=ax, figsize=(20,10))<br/>plt.title('Number of Cases In ' + county_name +' County')<br/>plt.xlabel('Date')<br/>plt.ylabel('Cases')<br/>plt.show()</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi op"><img src="../Images/3d5649f50a2e19af00e638a4380ff41b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8NBGshXSDlbQtDnvaY30g.png"/></div></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="0947" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">创建交互式数据地图</h1><p id="db6f" class="pw-post-body-paragraph ks kt iq ku b kv nj jr kx ky nk ju la lb nl ld le lf nm lh li lj nn ll lm ln ij bi translated">让我们开始准备一个数据框架，以便在交互式地图中按县显示确诊病例。</p><blockquote class="md me mf"><p id="71f4" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">我们如何在地图上指出每个县？</p></blockquote><p id="7834" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">首先，加载包含每个县的纬度/经度对的县地理定位数据集</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="88bb" class="nw ms iq ns b gy nx ny l nz oa">df_geo = pd.read_csv("pa_county_geolocation.csv")<br/>df_geo.head()</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oq"><img src="../Images/bcf99b0cf0a8cb7c715e4fa94763fb33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0QAg0loEtRYFyuUhBJdUQ.png"/></div></div></figure><p id="acd8" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">执行左外连接，将 lat/long 列添加到 county 数据框架中。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="44f8" class="nw ms iq ns b gy nx ny l nz oa">df_county_with_geo = df_counties.merge(df_geo, how='left', on=['County'])<br/>df_county_with_geo.head()</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi or"><img src="../Images/f7bc19e292b1821f63cc978d81d17102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyJ4TNoLGaAhwmvpppwTrg.png"/></div></div></figure><p id="c526" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">最后，我们只想保留最新日期的记录。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="2354" class="nw ms iq ns b gy nx ny l nz oa">df_latest_county = df_county_with_geo[df_county_with_geo['Date'] == df_county_with_geo['Date'].max()]</span><span id="ffae" class="nw ms iq ns b gy oo ny l nz oa"># drop unnecessary columns<br/>del df_latest_county['Date']<br/>del df_latest_county['Deaths']</span><span id="240c" class="nw ms iq ns b gy oo ny l nz oa">df_latest_county.head()</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi os"><img src="../Images/16200640a1d26e0452acfe20ee925eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2PNjUgWYOrojg1eK5z44XQ.png"/></div></div></figure><blockquote class="md me mf"><p id="3100" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">我们已经准备好创建一个交互式地图</p></blockquote><p id="b3ba" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我选的是 Folium，它有丰富的渲染交互式地图的功能。这不是一个关于叶子的教程。请访问<a class="ae lo" href="https://python-visualization.github.io/folium/index.html" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多信息。</p><p id="bbd9" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在继续之前，您需要安装 need。</p><pre class="kh ki kj kk gt nr ns nt nu aw nv bi"><span id="cba9" class="nw ms iq ns b gy nx ny l nz oa">pip install folium</span></pre><blockquote class="md me mf"><p id="0908" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated">只需几行代码，我们就可以构建一个非常棒的交互式数据地图，显示宾夕法尼亚州各县的新冠肺炎确诊病例。</p></blockquote><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="od oe l"/></div><p class="of og gj gh gi oh oi bd b be z dk translated"><a class="ae lo" href="https://gist.github.com/bchan01/525bab3e5dec3b3a0968457069b53ec7" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">源代码</strong> </a></p></figure><p id="76df" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">让我们走一遍我们正在做的事情</p><ul class=""><li id="acc5" class="lp lq iq ku b kv kw ky kz lb lr lf ls lj lt ln lu lv lw lx bi translated">将地图置于某个位置的中心，以便在查看区域内可以看到大多数数据点。</li><li id="94ca" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">函数 get_icon_color()根据正例的值确定在地图上显示的图标的颜色。</li><li id="8d92" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">创建一个具有中心点和适当缩放级别的地图。</li><li id="b5a3" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">将每个县的数据点装饰成彩色编码的图标和弹出文本，以显示计数和县的名称。</li><li id="0e82" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated">创建图例部分以显示颜色的含义。这篇关于如何给叶子地图添加图例的博客文章值得称赞。</li></ul><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ok"><img src="../Images/4d9175ae202a976229549fbd3df4fa9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*88jTcOHnfdGHOConsXQZPA.png"/></div></div></figure><blockquote class="md me mf"><p id="ea7c" class="ks kt mg ku b kv kw jr kx ky kz ju la mh lc ld le mi lg lh li mj lk ll lm ln ij bi translated"><strong class="ku ir">那都是乡亲们！！</strong></p></blockquote><p id="43f1" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这篇文章的代码可以在<a class="ae lo" href="https://github.com/bchan01/covid-19-data-analysis" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。我希望这能激励你走出你的舒适区去学习新的东西。直到下一次，继续学习，每天都变得更好。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="63ca" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">资源:</h1><ul class=""><li id="f634" class="lp lq iq ku b kv nj ky nk lb ot lf ou lj ov ln lu lv lw lx bi translated"><a class="ae lo" href="https://pandas.pydata.org/docs/reference/frame.html" rel="noopener ugc nofollow" target="_blank">熊猫数据框架 API 参考</a></li><li id="2391" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated"><a class="ae lo" href="https://matplotlib.org/3.2.1/contents.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib 文档</a></li><li id="b253" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated"><a class="ae lo" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#" rel="noopener ugc nofollow" target="_blank"> Beautifulsoup 文档</a></li><li id="7be7" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated"><a class="ae lo" href="https://python-visualization.github.io/folium/" rel="noopener ugc nofollow" target="_blank">树叶文档</a></li><li id="c9d7" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated"><a class="ae lo" href="https://medium.com/@bobhaffner/creating-a-legend-for-a-folium-map-c1e0ffc34373" rel="noopener">为树叶地图创建一个图例</a></li><li id="66ad" class="lp lq iq ku b kv ly ky lz lb ma lf mb lj mc ln lu lv lw lx bi translated"><a class="ae lo" href="https://developer.mapquest.com/documentation/geocoding-api/" rel="noopener ugc nofollow" target="_blank"> Map Quest 地理编码 API </a></li></ul></div></div>    
</body>
</html>