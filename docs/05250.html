<html>
<head>
<title>Classification Metrics Data People Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人们应该知道的分类度量数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/classification-metrics-everyone-should-know-b67fd0044c0c?source=collection_archive---------46-----------------------#2020-05-04">https://towardsdatascience.com/classification-metrics-everyone-should-know-b67fd0044c0c?source=collection_archive---------46-----------------------#2020-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ea91" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解数据科学成功的基础！</h2></div><p id="ccea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">学习分类标准可能是一个模糊的混乱。☁️:有很多衡量标准。很多听起来很像。有时同一个东西有两个名字。有时有五个。🤦‍♀️🤦‍♂️</p><p id="2750" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一系列文章旨在拨开迷雾。🌤这是一个帮助您理解、使用和记住七个最常见的分类标准的指南。</p><p id="8df3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">今天我们将探索每个人都需要的基础。数据科学家和统计学家必须先打好基础，然后才能进入更高级的指标。😀</p><p id="6262" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们开始吧！🚀</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/2b0e49b56105d63cb80cf1442040c30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2U7eHxVF7LH0iDb8ZE7zA.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">雾蒙蒙的。资料来源:pixabay.com</p></figure><p id="8b23" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在二元分类问题中有两种可能的结果:真或假，1或0，买或不买，感染或不感染，等等。在本文中，我们将重点关注二进制分类，因为它很常见，而且这种东西与两个结果类就足够混淆了。😉</p><p id="ddbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们要查看的指标在scikit-learn Python包中。每个函数都是从<a class="ae lu" href="https://scikit-learn.org/stable/modules/classes.html" rel="noopener ugc nofollow" target="_blank"> <em class="lv"> sklearn </em>中导入的。<em class="lv">指标</em>模块</a>模块。</p><p id="c095" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用一些假设的分类任务来说明这些指标是如何工作的。让我们从预测网站访问者是否会在Jeff的牛逼夏威夷衬衫店购买衬衫开始吧！🏝+🌺+👕+💵</p><h1 id="f6b4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">混淆矩阵</h1><p id="2365" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">混淆矩阵是构建指标的基础。它显示了你的模型的预测有多少是正确的，有多少是不正确的，由实际的积极和消极的结果组织。</p><p id="e475" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">矩阵的一个轴是现实生活中的结果——正面和负面的情况。在我们的例子中，如果访问者购买了一件衬衫，这是一个实际的积极因素。😀如果游客不买衬衫，这是一个实际的负面影响。☹️</p><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="61f9" class="my lx it mu b gy mz na l nb nc"><strong class="mu iu">                            Predicted Label  </strong>        <br/> <strong class="mu iu"> </strong>               Predicted Positive    Predicted Negative<br/>  <strong class="mu iu">True Label       </strong> <strong class="mu iu"><br/></strong>Actual Positive     <br/>Actual Negative     </span></pre><p id="0da9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个轴是你的模型的预测。如果你的模型预测到访问者会买一件衬衫，那就是一个积极的预测。如果你的模型预测访客不会买衬衫，那就是负面预测。</p><p id="280a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结合预测和实际结果，你会得到四个象限:</p><p id="c1e1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">真阳性<br/>真阴性<br/>假阳性<br/>假阴性</p><p id="9ab8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或简称<em class="lv"> TP、TN、FP、</em>和<em class="lv"> FN </em>。😁</p><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="c0f3" class="my lx it mu b gy mz na l nb nc">                 Predicted Positive    Predicted Negative<br/>Actual Positive            <strong class="mu iu">TP</strong>               <strong class="mu iu">FN</strong><br/>Actual Negative            <strong class="mu iu">FP</strong>               <strong class="mu iu">TN</strong></span></pre><p id="06ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们将这四组分解开来:</p><p id="e97b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lv">真</em>指模型预测正确的情况。<em class="lv">假</em>指模型预测错误的情况。你希望你的模型预测准确，所以你希望更多的<em class="lv">真</em>和更少的<em class="lv">假</em>。👍</p><p id="7241" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这个群体在名字<em class="lv">、</em>中有<em class="lv">阳性</em>，那么这些人就是模型预测会购买的人。如果该组的名称中有<em class="lv">负数</em>，则这些<em class="lv"> </em>是模型预测不会购买的人。</p><p id="3a33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">理解这四个群体是关键。在继续之前，确保你能用自己的话解释这四个象限。☝️</p><p id="108b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，其他混淆矩阵图可能会以不同的顺序显示行和列。可惜没有标准顺序。☹️</p><p id="22dc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是从混淆矩阵创建四个结果变量的Python代码(导入了<em class="lv"> numpy </em>库，从<em class="lv"> sklearn.metrics导入了<em class="lv">混淆矩阵</em>):</em></p><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="fef4" class="my lx it mu b gy mz na l nb nc">tn, fp, fn, tp = confusion_matrix(y_test, predictions).ravel()</span></pre><p id="b09d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码将基础事实(<em class="lv"> y_test </em>)和预测传递给<em class="lv">混淆_矩阵</em>函数，用<em class="lv">拉平结果。ravel() </em>，<em class="lv">，</em>然后把结果解包成四个变量。</p><p id="1a28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用scikit-learn的新<a class="ae lu" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.plot_confusion_matrix.html" rel="noopener ugc nofollow" target="_blank"><em class="lv">plot _ confusion _ matrix</em></a>函数绘制更漂亮的混淆矩阵图。向凯文·马卡姆致敬。🧢</p><p id="e305" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有一个混淆矩阵的例子:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bf1926e7f65a69a8ec31579e5d481f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*A4uHN3reWcSZdna8CT4jvQ.png"/></div></figure><p id="44c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我用来制作这个混淆矩阵的代码(带有作为<em class="lv"> plt </em>导入的<em class="lv"> matplotlib.pyplot </em>和从<em class="lv"> sklearn.metrics </em>导入的<em class="lv"> plot_confusion_matrix </em>):</p><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="077b" class="my lx it mu b gy mz na l nb nc">plot_confusion_matrix(<br/>    clf, <br/>    X_test, <br/>    y_test, <br/>    values_format=’d’, <br/>    display_labels=[‘Bought’,’Didn\’t buy’], <br/>    cmap=plt.cm.coolwarm<br/>);</span></pre><p id="6450" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，您必须首先通过评估程序。我添加了一些额外的参数来显示标签，使情节更漂亮。如果您想更改输出值，使它们不是科学记数法格式，那么<code class="fe ng nh ni mu b">values_format</code>参数可以解决您的问题。🎉</p><p id="9dda" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看如何使用混淆矩阵中的这四个数字来制作我们最常用的分类度量。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/3afd18768bf8c4b51d20a1a12988187e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGg16KcHz2wMRye9aG7qsw.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">少雾。资料来源:pixabay.com</p></figure><h1 id="4fa9" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">准确(性)</h1><p id="f2f0" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">术语<em class="lv">准确性</em>在一般对话中通常用来表示“良好的性能”，但是在分类度量领域中它有一个特定的定义。准确度分数回答了以下问题:</p><p id="fa3f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你猜对了几次？</p><p id="2e6a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">精确度的公式为:</p><p id="e997" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lv">准确度= </em>(真阳性+真阴性)/所有观测值</p><p id="e011" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，简称:</p><p id="a012" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lv">精度</em> = (TP + TN) /全部</p><p id="7624" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我们的模型预测游客是否会在杰夫的夏威夷衬衫店购物的假设结果。🌺👕</p><h2 id="4cb1" class="my lx it bd ly nj nk dn mc nl nm dp mg kr nn no mi kv np nq mk kz nr ns mm nt bi translated">困惑矩阵#1:</h2><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="19d2" class="my lx it mu b gy mz na l nb nc">                 Predicted Positive    Predicted Negative<br/>Actual Positive          80  (TP)            20 (FN)<br/>Actual Negative          50  (FP)            50 (TN)</span></pre><p id="cbdc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该模型预测了130次购买和70次不购买。实际上有100次购买和100次不购买。</p><p id="eca5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们来计算一下准确率得分。将<em class="lv">真阳性</em>和<em class="lv">真阴性</em>相加，并除以观察总数。</p><p id="64cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">(80 + 50 ) / 200</p><p id="ef34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来模型正确预测了200个案例中的130个，准确率为65%。听起来不可怕。😀</p><p id="3302" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我们并不真正知道我们的模型做得有多好，直到我们把它与另一个模型的预测进行比较。最基本的替代模型是一个简单的决策规则，它预测购买的概率为50%。我们的模型比50%的基线做得更好，这很了不起。😉</p><p id="7078" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，当模型正确预测所有事情时，可能的最佳准确度分数是1 (100%)。当模型没有正确预测时，最差的分数可能是0。</p><p id="4ce0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看当结果类不平衡时会发生什么。</p><h2 id="adb2" class="my lx it bd ly nj nk dn mc nl nm dp mg kr nn no mi kv np nq mk kz nr ns mm nt bi translated">不平衡数据</h2><p id="7759" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">假设你在一家银行工作🏦并且想要检测信用卡交易中的欺诈。你要预测1000笔交易。你建立了一个机器学习模型来预测哪些是欺诈性的，这是产生的混淆矩阵:</p><h2 id="c893" class="my lx it bd ly nj nk dn mc nl nm dp mg kr nn no mi kv np nq mk kz nr ns mm nt bi translated">困惑矩阵#2:</h2><pre class="lf lg lh li gt mt mu mv mw aw mx bi"><span id="2209" class="my lx it mu b gy mz na l nb nc">                   Predicted Fraud   Predicted Not-fraud<br/>Actual Fraud               1                      8<br/>Actual Not-fraud           2                    989</span></pre><p id="ccb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的四个混淆矩阵值如下所示:</p><p id="5c36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">TP=1 <br/> TN=989 <br/> FP=2 <br/> FN=8</p><p id="e4e7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该模型预测有3个案例是欺诈性的，而实际上有9个案例是欺诈性的。</p><p id="ac19" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">准确率为(1+989)/1000 = 99%。听起来很神奇，对吧？🏆</p><p id="4133" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是等等。沉住气。少了什么？🤔</p><p id="d555" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该模型将9个实际欺诈案例中的8个分类错误！我们想找的9样东西，我们漏掉了8样！那可不行。☹️</p><p id="647e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">99%的准确率分数并没有反映出模型在工作中做得有多好。事实上，如果很多人只看到正确的分数，就会误导他们。许多人不知道去问这些课程是否平衡。这是人们有意或无意误导统计数据的方式之一。☝️</p><p id="ecec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一些好消息是，在scikit-learn中不需要手工计算精度。准确性是默认的分类评分标准。此外，您可以使用函数<a class="ae lu" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.recall_score.html" rel="noopener ugc nofollow" target="_blank"><em class="lv">accuracy _ score</em></a><em class="lv"/>来查找任何一组预测值和实际值的精确度。🎉</p><h2 id="9241" class="my lx it bd ly nj nk dn mc nl nm dp mg kr nn no mi kv np nq mk kz nr ns mm nt bi translated">结果</h2><p id="9c80" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">准确度同等地加权混淆矩阵的所有象限。当两种结果类别的数量相对相等时，这是一个很好的汇总统计。当您更关心避免误报或漏报时，您会希望使用我们将在下一篇文章中探讨的其他度量之一。</p><p id="cf66" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你肯定想知道术语<em class="lv">的准确性</em>及其被不平衡数据误导的风险。😀</p><h1 id="423b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">概述</h1><p id="e8e7" class="pw-post-body-paragraph ki kj it kk b kl mo ju kn ko mp jx kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">您已经了解了混淆矩阵和准确性，这是数据科学家需要了解的最基本的分类术语。在下一篇文章<a class="ae lu" rel="noopener" target="_blank" href="/the-3-most-important-basic-classification-metrics-3368dd425f74">中，我们将探索你肯定想知道的三个基本指标，但这可能很难保持直线。</a></p><p id="d63c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇关于分类标准基础部分的介绍对您有所帮助！如果你有，请在你最喜欢的社交媒体上分享，这样其他人也可以找到它。😀</p><p id="bb33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我写了关于Python、T2、SQL、T4、Docker和其他技术主题的文章。如果你对此感兴趣，请关注我，在这里阅读更多<a class="ae lu" href="https://medium.com/@jeffhale" rel="noopener"/>。👍</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><a href="https://dataawesome.com"><div class="ab gu cl nu"><img src="../Images/ba32af1aa267917812a85c401d1f7d29.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oPkqiu1rrt-hC_lDMK-jQg.png"/></div></a></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/b71558730fa1f33bdd9883e1d8226e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2YnJYfBPTW9C_4gii2PPaQ.jpeg"/></div></div><p class="lq lr gj gh gi ls lt bd b be z dk translated">不再有雾。资料来源:pixabay.com</p></figure><p id="92c2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">分类快乐！📊</p></div></div>    
</body>
</html>