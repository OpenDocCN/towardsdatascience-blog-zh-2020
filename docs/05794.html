<html>
<head>
<title>How to write a profitable strategy for algotrading Bitcoin with Jesse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何和杰西一起写algotrading比特币的盈利策略</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-write-a-profitable-strategy-for-algotrading-bitcoin-with-jesse-6c7064b22f1f?source=collection_archive---------41-----------------------#2020-05-13">https://towardsdatascience.com/how-to-write-a-profitable-strategy-for-algotrading-bitcoin-with-jesse-6c7064b22f1f?source=collection_archive---------41-----------------------#2020-05-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="56f8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">开始使用算法交易并不难</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ed829e04a8c7e13b9e1bef386ddee2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YCpMeeIAjZG6_xxJ.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://undraw.co" rel="noopener ugc nofollow" target="_blank"> Katerina Limpitsouni </a>拍摄</p></figure><p id="bf01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个教程里，我要写一个和杰西交易比特币的策略。本教程的重点是让你开始使用Jesse，这样你就可以编写自己的策略。我还会教你几个技巧，这些技巧是我多年来学到的，可以帮助我写出有利可图的策略。这大概会是一系列的文章。</p><p id="e0f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本教程的重点不是给你一个牛逼的策略；这是让你开始写一个。在第一部分中，我将涵盖从:</p><ul class=""><li id="af5d" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">如何使用技术分析</li><li id="7386" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何进入交易</li><li id="8024" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何退出交易</li><li id="7d67" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">如何管理风险</li></ul><p id="5b16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，确保您已经安装了Jesse。如果没有，<a class="ae ky" href="https://docs.jesse-ai.com/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">那就去做吧</a>。接下来，确定你进口了蜡烛。我们现在就开始吧，因为这需要几分钟才能完成，这很好，因为我们将编写策略:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="9bd9" class="mo mp it mk b gy mq mr l ms mt">jesse import-candles Bitfinex BTCUSD 2016-01-01</span></pre><h1 id="8d95" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">创建策略</h1><p id="be30" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">我们把这个策略命名为<code class="fe nq nr ns mk b">SampleTrendFollowing</code>。<code class="fe nq nr ns mk b">cd</code>进入您的Jesse项目并运行:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="989b" class="mo mp it mk b gy mq mr l ms mt">jesse make-strategy SampleTrendFollowing</span></pre><p id="260e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在打开位于<code class="fe nq nr ns mk b">strategies/SampleTrendFollowing/__init__.py</code>的<code class="fe nq nr ns mk b">SampleTrendFollowing</code>。这是Jesse生成的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="e5d3" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">使用技术分析</h1><p id="6284" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">我们将使用均线指标来检测市场趋势的方向。让我们用两条周期为50的均线代表慢速均线，周期为21的均线代表快速均线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="4a1d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我用<code class="fe nq nr ns mk b">@property</code>关键字将它们定义为类属性。这允许我将它们用作<code class="fe nq nr ns mk b">self.long</code>而不是<code class="fe nq nr ns mk b">self.long()</code>，在我看来这更容易一些。</p><p id="7373" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们也定义一下ATR指标，这是我最喜欢的设定止损价格的工具:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="663c" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">进入规则</h1><p id="44ce" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">我们的进场规则很简单:当快速均线突破慢速均线时做多，反之亦然。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="3a12" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">管理风险</h1><p id="ff09" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">每个策略的一个关键部分是头寸规模。一个简单的组合头寸规模将使你受益匪浅。例如，让我们每次交易都拿总资本的3%来冒险。</p><p id="2427" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还需要指定我们的入门价格。简单来说，让我们用市价单建仓。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="9573" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，我在止损和止盈目标中都使用了<code class="fe nq nr ns mk b">ATR</code>指标。</p><p id="93f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然动态退出趋势跟踪策略是一个很好的实践，但是我在开仓的时候设置了退出点。我这样做是为了保持本教程简单。</p><h1 id="d613" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">路线</h1><p id="6f73" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">现在我们需要告诉Jesse在执行回溯测试命令时交易<code class="fe nq nr ns mk b">SampleTrendFollowing</code>策略。我们还需要选择一个时间框架，和一个交易的符号。我选择了<code class="fe nq nr ns mk b">6h</code>时间框架和<code class="fe nq nr ns mk b">BTCUSD</code>作为我的标志。您的<code class="fe nq nr ns mk b">routes.py</code>文件应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="b006" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">运行回溯测试</h1><p id="f34e" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">让我们看看它的表现如何:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="58a0" class="mo mp it mk b gy mq mr l ms mt">jesse backtest 2019-01-01 2020-01-01</span></pre><p id="0a9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/58fe048ccf565f80eced2ba7093f1d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NIikKU06Ezbz2DvntOt0rg.png"/></div></div></figure><p id="25f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你看那个，居然有利可图！嗯，至少在2019年是这样。对于在<code class="fe nq nr ns mk b">6h</code>时间框架内的趋势跟踪策略交易来说，这样的回溯测试足够了吗？你说了算，但如果我有数据，我会更进一步。在这种情况下，我回到2017年，直到今年的5月3日:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2ae23fb1ed7567e0d69f5a899baff305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z6X7JGNzTN8PCcUtn_xzdw.png"/></div></div></figure><h1 id="228c" class="mu mp it bd mv mw mx my mz na nb nc nd jz ne ka nf kc ng kd nh kf ni kg nj nk bi translated">结论</h1><p id="dbdc" class="pw-post-body-paragraph kz la it lb b lc nl ju le lf nm jx lh li nn lk ll lm no lo lp lq np ls lt lu im bi translated">本教程的目的是让你开始和Jesse一起编写策略。我将写更多这样的文章，探索Jesse的更多特性，比如使用多个时间框架、过滤器、事件等等。</p><p id="9be0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了获得我未来的作品和产品，请务必订阅杰西的<a class="ae ky" href="https://jesse-ai.com/" rel="noopener ugc nofollow" target="_blank">时事通讯</a>，并查看<a class="ae ky" href="https://forum.jesse-ai.com/" rel="noopener ugc nofollow" target="_blank">论坛</a>，与你我这样的量化者讨论算法交易。</p><p id="48c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">更新【5月26日】:</strong>下一篇文章继续这篇文章的结尾:<br/> <a class="ae ky" href="https://medium.com/@salehmir/how-to-use-multiple-timeframes-in-your-algotrading-strategy-8be026a890e2?source=friends_link&amp;sk=a35c562268ca6c7c6c3d1df1cec1d7d1" rel="noopener">如何在你的算法交易策略中使用多个时间框架</a></p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><p id="4616" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="oe">原载于</em><a class="ae ky" href="https://jesse-ai.com/blog/tutorials/how-to-write-a-profitable-strategy-for-algotrading-bitcoin" rel="noopener ugc nofollow" target="_blank"><em class="oe">https://jesse-ai.com</em></a><em class="oe">。</em></p><p id="8bfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="oe">来自《走向数据科学》编辑的注释:</em> </strong> <em class="oe">虽然我们允许独立作者根据我们的</em> <a class="ae ky" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="oe">规则和指导方针</em> </a> <em class="oe">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae ky" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="oe">读者术语</em> </a> <em class="oe">。</em></p></div></div>    
</body>
</html>