<html>
<head>
<title>I Thought I Was Mastering Python Until I Discovered These Tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在发现这些技巧之前，我一直以为自己在掌握 Python</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/i-thought-i-was-mastering-python-until-i-discovered-these-tricks-e40d9c71f4e2?source=collection_archive---------0-----------------------#2020-03-06">https://towardsdatascience.com/i-thought-i-was-mastering-python-until-i-discovered-these-tricks-e40d9c71f4e2?source=collection_archive---------0-----------------------#2020-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a75c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Python 最佳实践和技巧将使您快速高效地编码</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dcf31496924cc134b98b8617703966ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0zc5FpwQKOm5d7bIbozXCA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">阿尔瓦罗·雷耶斯在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="63bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 是最受初学者欢迎的编程语言之一，这使它成为世界各地学校中教授最广泛的语言。</p><p id="7dfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，学习 Python 并不是一件容易的事情。要开始，你首先需要找到到达那里的最佳在线方式，这本身就很难。有成千上万不同的 Python 课程和教程，都声称是最好的。</p><p id="5647" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">诚然，光是练习是不完美的，但完美的练习才是。这意味着你需要确保你总是遵循最佳的编码实践(评论你的代码，使用正确的语法，等等)。)，否则你很可能会养成坏习惯，这会损害你未来的代码行。</p><blockquote class="lv"><p id="345c" class="lw lx it bd ly lz ma mb mc md me lu dk translated"><em class="mf">“一个通用的约定提供了所有的可维护性、清晰性、一致性，以及良好编程习惯的基础。它没有做的是坚持让你违背自己的意愿去跟随它。那是 Python！”</em></p><p id="6e7c" class="lw lx it bd ly lz ma mb mc md me lu dk translated"><em class="mf">——Tim Peters 关于 comp.lang.python，2001 年 6 月 16 日</em></p></blockquote><p id="38e3" class="pw-post-body-paragraph kz la it lb b lc mg ju le lf mh jx lh li mi lk ll lm mj lo lp lq mk ls lt lu im bi translated">在本文中，我将给出我的 10 大技巧来帮助你快速有效地用 Python 编码。</p><h1 id="a050" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">1.可读性很重要</h1><blockquote class="lv"><p id="4ba5" class="lw lx it bd ly lz ma mb mc md me lu dk translated">程序必须写给人们阅读，并且只是附带地给机器执行。</p><p id="e619" class="lw lx it bd ly lz ma mb mc md me lu dk translated"><a class="ae ky" href="https://www.azquotes.com/author/38260-Hal_Abelson" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">哈尔·阿伯尔森</strong> </a></p></blockquote><p id="f1a4" class="pw-post-body-paragraph kz la it lb b lc mg ju le lf mh jx lh li mi lk ll lm mj lo lp lq mk ls lt lu im bi translated">首先，遵循一些编程惯例，尽量让你的程序易读。编程惯例是经验丰富的程序员在编写代码时遵循的惯例。没有比无视习俗更快的方式来表明你是一个<strong class="lb iu"><em class="nd"/></strong>新手了。其中一些约定是特定于<strong class="lb iu"> Python </strong>的；其他的被所有语言的计算机程序员使用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/35ae13fc25e647b5e484e1ee7b740bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kjVAg20iyGR70YDZ3pd6qg.jpeg"/></div></div></figure><p id="ebc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从本质上来说，可读性是一种特性，它规定了另一个人理解你的代码的某些部分有多容易(而不是你！).</p><p id="e5ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">举个例子，我不习惯用垂直对齐来写，也不习惯用开始定界符来对齐函数的参数。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2994" class="nk mm it ng b gy nl nm l nn no"># No, to avoid: <br/>func = long_function_name(var_one, var_two,<br/>       var_three, var_four)</span><span id="10d2" class="nk mm it ng b gy np nm l nn no">#Yes, <br/>func = long_function_name(var_one, var_two,<br/>                          var_three, var_four)</span></pre><p id="9b01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看 Python 代码的<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank">风格指南中的其他例子，决定什么看起来最好。</a></p><p id="6ad2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们经常做的另一件重要的事情是模仿我们以前看过或写过的程序，这就是为什么我们接触可读程序在学习编程中很重要。</p><h1 id="a460" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">2.避免无用的条件</h1><p id="3c08" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">通常，一个长的<strong class="lb iu"> <em class="nd"> if &amp; elif &amp; …else </em> </strong>条件是代码需要重构的标志，这些条件会让你的代码变得冗长且难以解读。有时它们可以很容易地被取代，例如，我曾经这样做过:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="cdcf" class="nk mm it ng b gy nl nm l nn no">def f():<br/>    if condition:<br/>    	return True<br/>    else:<br/>    	return False</span></pre><p id="e06b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这太蠢了。该函数返回一个布尔值，那么为什么要首先使用 if 块呢？正确的做法应该是:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="6d9d" class="nk mm it ng b gy nl nm l nn no">def f():<br/>	return condition</span></pre><p id="a87a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在一个<a class="ae ky" href="https://www.hackerrank.com/dashboard" rel="noopener ugc nofollow" target="_blank">黑客排名</a>的挑战中，给你一年，你必须写一个函数来检查这一年是否是闰年。在公历中，识别闰年必须考虑三个标准:</p><ul class=""><li id="c5ef" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">一年可以被 4 整除，是闰年，除非:</li><li id="ff50" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">一年可以被 100 整除，它不是闰年，除非:</li><li id="bdf6" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">年份也能被 400 整除。然后就是闰年了。</li></ul><p id="18e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以在这个挑战中，忘记<strong class="lb iu"><em class="nd">if</em></strong>和<strong class="lb iu"> <em class="nd"> elses </em> </strong>只做以下事情:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2a6c" class="nk mm it ng b gy nl nm l nn no">def is_leap(year):<br/>    return year % 4 == 0 and (year % 400 == 0 or year % 100 != 0)</span></pre><h1 id="4d81" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">3.充分使用空白</h1><ul class=""><li id="dfb4" class="nv nw it lb b lc nq lf nr li oj lm ok lq ol lu oa ob oc od bi translated">不要混用制表符和空格</li><li id="df4a" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">函数之间的换行</li><li id="45a4" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">两个类之间的换行符</li><li id="93fc" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">在字典中的<strong class="lb iu">"、"</strong>、列表、元组、参数列表中的参数后和字典中的<strong class="lb iu"> ":" </strong>后添加一个空格，但不在前面。</li><li id="3ebc" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">在赋值和比较周围加空格(列表中的参数除外)</li><li id="0b03" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">左/右括号或参数列表前没有空格。</li></ul><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="cd20" class="nk mm it ng b gy nl nm l nn no">def function(key, value=0):<br/>    """Return a dictionary and a list..."""<br/>    d = {key: value}<br/>    l = [key, value]<br/>    return d, l</span></pre><h1 id="d350" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">4.文档字符串和注释</h1><ul class=""><li id="c903" class="nv nw it lb b lc nq lf nr li oj lm ok lq ol lu oa ob oc od bi translated">Docstrings =如何使用代码</li><li id="8791" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">注释=为什么(rational)和代码如何工作</li></ul><p id="5a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文档字符串解释了如何使用代码:</p><ul class=""><li id="a34b" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">解释一个功能的目的，即使它对你来说是显而易见的，因为它对其他人来说不一定是显而易见的。</li><li id="477d" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">描述预期的参数、返回值和引发的异常。</li><li id="eb34" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">如果该方法与单个调用者强耦合，则提及调用函数。</li></ul><p id="e6ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释解释了代码维护者的需求。例子包括给自己的注释，例如:</p><blockquote class="om on oo"><p id="df50" class="kz la nd lb b lc ld ju le lf lg jx lh op lj lk ll oq ln lo lp or lr ls lt lu im bi translated"># !！！BUG: …</p><p id="b8ff" class="kz la nd lb b lc ld ju le lf lg jx lh op lj lk ll oq ln lo lp or lr ls lt lu im bi translated"># !！！修复:这是一个黑客</p><p id="35f9" class="kz la nd lb b lc ld ju le lf lg jx lh op lj lk ll oq ln lo lp or lr ls lt lu im bi translated"># ?？？为什么会在这里？</p></blockquote><p id="c7fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">写好的文档串和好的注释是你的责任，所以要经常更新它们！进行更改时，确保注释和文档字符串与代码一致。</p><p id="5378" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会发现一个详细的<strong class="lb iu"> PEP </strong>专用于 Docstring:<a class="ae ky" href="https://www.python.org/dev/peps/pep-0257/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">【Docstring Conventions】</strong></a></p><h1 id="eb4b" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">5.变量和赋值</h1><p id="8898" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在其他编程语言中:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2783" class="nk mm it ng b gy nl nm l nn no">c = a<br/>a = b<br/>b = c</span></pre><p id="3046" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 Python 中，最好在一行代码中使用赋值:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2bdd" class="nk mm it ng b gy nl nm l nn no">b, a = a, b</span></pre><p id="84e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能已经看过了，但你知道它是如何工作的吗？</p><ul class=""><li id="6309" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">逗号是构建元组的语法。</li><li id="9f7c" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">右边创建一个元组(元组打包)。</li><li id="936f" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">元组是左边的目标(元组解包)。</li></ul><p id="4e44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其他示例:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2ca4" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; user =['Jan', 'Gomez', '+1-888-222-1546']<br/>&gt;&gt;&gt; name, title, phone = user<br/>&gt;&gt;&gt; name<br/>'Jan'<br/>&gt;&gt;&gt; title<br/>'Gomez'<br/>&gt;&gt;&gt; phone<br/>'+1-888-222-1546'</span></pre><p id="e12e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在结构化数据的循环中有用(上面的变量<strong class="lb iu">用户</strong>已被保留):</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="24e4" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; people = [user, ['German', 'GBT', 'unlisted']]<br/>&gt;&gt;&gt; for (name, title, phone) in people:<br/>...      print (name, phone)<br/>...<br/>Jan +1-888-222-1546<br/>German unlisted</span></pre><p id="e61d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也可以反过来做，只要确保左右两边的结构相同即可:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="d812" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; jan, (gname, gtitle, gphone) = people<br/>&gt;&gt;&gt; gname<br/>'German'<br/>&gt;&gt;&gt; gtitle<br/>'GBT'<br/>&gt;&gt;&gt; gphone<br/>'unlisted'<br/>&gt;&gt;&gt; jan<br/>['Jan', 'Gomez', '+1-888-222-1546']</span></pre><h1 id="ee69" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">6.列表连接和联接</h1><p id="2159" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">让我们从字符串列表开始:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="1ea1" class="nk mm it ng b gy nl nm l nn no">colors = ['red', 'blue', 'green', 'yellow']</span></pre><p id="7f20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们想把这些链连接在一起，形成一条长链。特别是当子字符串的数量很大时，请避免这样做:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="b395" class="nk mm it ng b gy nl nm l nn no">result = ''<br/>for s in colors:<br/>    result += s</span></pre><p id="945f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它非常慢。它使用大量的内存和性能。总和将被累加、存储，然后移动到每个中间步骤。</p><p id="75c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相反，请这样做:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7c93" class="nk mm it ng b gy nl nm l nn no">result = ''.join(colors)</span></pre><p id="c8e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> join () </strong>方法一次性完成整个拷贝。当你只处理几个字符串的时候，没什么区别。但是要养成以最佳方式构建链的习惯，因为有了成百上千条链，它将真正发挥作用。</p><p id="ef8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一些使用<strong class="lb iu"> join () </strong>方法的技巧。如果您想要一个空格作为分隔符:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="d923" class="nk mm it ng b gy nl nm l nn no">result = ' '.join(colors)</span></pre><p id="5076" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者逗号和空格:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="9459" class="nk mm it ng b gy nl nm l nn no">result = ', '.join(colors)</span></pre><p id="ff68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了造一个语法正确的句子，我们希望每个值之间都有逗号，除了最后一个值，我们更喜欢用“或”。拆分列表的语法完成了剩下的工作。<strong class="lb iu"> [: -1] </strong>返回除最后一个值之外的所有内容，我们可以用逗号将最后一个值连接起来。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="8c9d" class="nk mm it ng b gy nl nm l nn no">colors = ['red', 'blue', 'green', 'yellow']<br/>print ('Choose', ', '.join(colors[:-1]), \<br/>      'or', colors[-1])</span><span id="0512" class="nk mm it ng b gy np nm l nn no">&gt;&gt; <!-- -->Choose red, blue, green or yellow</span></pre><h1 id="5377" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">7.测试真实条件</h1><p id="c1c2" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">对于布尔值，利用 Python 既优雅又快捷:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7d06" class="nk mm it ng b gy nl nm l nn no"># Do this :     # And not this :<br/>if x:             if x == True:<br/>   pass                  pass</span><span id="955c" class="nk mm it ng b gy np nm l nn no"># Do this :     # And not this :<br/>if items:         if len(items) != 0:<br/>    pass                pass</span><span id="7461" class="nk mm it ng b gy np nm l nn no"># <!-- -->and especially not that <!-- -->:<br/>        if items != []:<br/>               pass</span></pre><h1 id="0883" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">8.尽可能使用枚举</h1><p id="dc00" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><strong class="lb iu"> <em class="nd">枚举</em> </strong>函数获取一个列表并返回对(index，item):</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="aad5" class="nk mm it ng b gy nl nm l nn no">items = ['zero', 'one', 'two', 'three']<br/>&gt;&gt;&gt; print list(enumerate(items))<br/>[(0, 'zero'), (1, 'one'), (2, 'two'), (3, 'three')]</span></pre><p id="c6e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要使用列表来显示结果，因为<strong class="lb iu"> <em class="nd"> enumerate </em> </strong>是一个惰性函数，仅在被请求时才一次生成一个项目(一对)。for 循环需要这样的机制。<strong class="lb iu"> <em class="nd">打印</em> </strong>不一次取一个结果，但必须拥有要显示的全部信息。因此，在使用 print 之前，我们自动将生成器转换为列表。</p><p id="00fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，使用下面的循环要好得多:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="d80d" class="nk mm it ng b gy nl nm l nn no">for (index, item) in enumerate(items):<br/>    print (index, item)</span><span id="1a64" class="nk mm it ng b gy np nm l nn no"># compared to :              # And :<br/>index = 0                     for i in range(len(items)):<br/>for item in items:                    print (i, items[i])<br/>    print (index, item)<br/>    index += 1</span></pre><p id="9b6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">带<strong class="lb iu">枚举</strong>的版本比另外两个版本更短更简单。一个展示枚举函数返回迭代器的例子(生成器是迭代器的一种)</p><h1 id="105c" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">9.列表理解</h1><p id="dd7d" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">传统方式用<strong class="lb iu">表示</strong>和<strong class="lb iu">表示</strong>:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="5199" class="nk mm it ng b gy nl nm l nn no">new_list = []<br/>for item in a_list:<br/>    if condition(item):<br/>        new_list.append(fn(item))</span></pre><p id="c624" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用列表理解:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="02e7" class="nk mm it ng b gy nl nm l nn no">new_list = [fn(item) for item in a_list if condition(item)]</span></pre><p id="f7b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">列表内容清晰而直接。如果条件 在同一个 listcomp 内，但超出两个或三个，或者条件比较复杂，那么循环 和<strong class="lb iu"> <em class="nd">可以有几个<strong class="lb iu"> <em class="nd">，建议您使用通常的<strong class="lb iu"> <em class="nd">循环</em> </strong>。</em></strong></em></strong></p><p id="fab5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，从 0 到 9 的方块列表:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="95ae" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; [n ** 2 for n in range(10)]<br/>[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span></pre><p id="1809" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前一个列表中的奇数列表:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="1d6b" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; [n ** 2 for n in range(10) if n % 2]<br/>[1, 9, 25, 49, 81]</span></pre><p id="27a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一个例子:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="0a0c" class="nk mm it ng b gy nl nm l nn no">&gt;&gt;&gt; <!-- -->  [(x, y) for x in (1, 2, 3, 4) if x % 2 == 0 <br/>       for y in ['a', 'b'] if y == 'b']<br/>[(2, 'b'), (4, 'b')]</span></pre><h1 id="2f15" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">10.生成器表达式</h1><p id="f0dd" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">让我们对小于 100 的数字的平方求和:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="1bed" class="nk mm it ng b gy nl nm l nn no"># With a loop :<br/>total = 0<br/>for num in range(1, 101):<br/>    total += num * num</span></pre><p id="f15b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用<strong class="lb iu"> <em class="nd"> sum </em> </strong>函数，它通过构建正确的序列来更快地完成这项工作。</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="450c" class="nk mm it ng b gy nl nm l nn no"># With a <!-- -->list comprehension :<br/>total = sum([num * num for num in range(1, 101)])</span><span id="c39c" class="nk mm it ng b gy np nm l nn no"># With a generator expression :<br/>total = sum(num * num for num in xrange(1, 101))</span></pre><p id="30e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">生成器表达式类似于列表理解，除了在它们的计算中，它们是懒惰的。Listcomps 在一次传递中计算整个结果，并将其存储在一个列表中。必要时，生成器表达式一次计算一个值。当序列非常长，并且生成的列表只是一个中间步骤而不是最终结果时，这特别有用。</p><p id="3909" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，如果我们必须对几十亿个整数的平方求和，我们将达到一个列表理解的内存饱和，但是生成器表达式不会有任何问题。不过，这需要一段时间！</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="90cc" class="nk mm it ng b gy nl nm l nn no">total = sum(num * num for num in range(1, 1000000000))</span></pre><p id="41ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">语法上的区别是 listcomps 有方括号，而生成器表达式没有。生成器表达式有时需要括号，所以您应该总是使用它们。</p><p id="7db6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之:</p><ul class=""><li id="4f9b" class="nv nw it lb b lc ld lf lg li nx lm ny lq nz lu oa ob oc od bi translated">当预期结果是列表时，使用<strong class="lb iu">列表理解</strong>。</li><li id="cadc" class="nv nw it lb b lc oe lf of li og lm oh lq oi lu oa ob oc od bi translated">当列表只是一个中间结果时，使用<strong class="lb iu">生成器表达式</strong>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/f0d6a96f744c8ec82b4fb29fa51a7044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1uaf8qjQBqR_hXPt.jpg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:<a class="ae ky" href="https://www.azquotes.com/quote/669106" rel="noopener ugc nofollow" target="_blank">https://www.azquotes.com/quote/669106</a></p></figure><h1 id="0f46" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">结论</h1><p id="09f2" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在本文中，我介绍了一些学习 Python 编程的最佳技巧。如果你真的想成为一名程序员或者在你的技能中增加一项编码技能，学习 Python 是一个很好的起点。在网上寻找高质量的 Python 培训，并开始了解如何用 Python 编程。我建议您在学习更难的概念之前，先通过互动课程学习基础知识。</p><p id="cf89" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不应该把学习过程加快太多，否则你可能会错过重要的信息。记笔记，确保定期复习，并尽可能多地练习编写代码。</p><p id="1761" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与像你一样学习的同事联系，当你有问题时不要害怕提问。当别人有问题时帮助他们可以是一个很好的回顾，使用别人的代码是学习新事物的好方法。</p><p id="4226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你做到了这一切，没有什么可以阻止你！你还在等什么？现在就开始用 Python 编程！</p></div></div>    
</body>
</html>