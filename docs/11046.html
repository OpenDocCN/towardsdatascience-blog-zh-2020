<html>
<head>
<title>Create and customize boxplots with Python’s Matplotlib to get lots of insights from your data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 的 Matplotlib 创建和定制箱线图，以从数据中获得大量见解</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-and-customize-boxplots-with-pythons-matplotlib-to-get-lots-of-insights-from-your-data-d561c9883643?source=collection_archive---------0-----------------------#2020-08-01">https://towardsdatascience.com/create-and-customize-boxplots-with-pythons-matplotlib-to-get-lots-of-insights-from-your-data-d561c9883643?source=collection_archive---------0-----------------------#2020-08-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/731624e3ebeef32979d07e7dd333bfa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1F4t8nKXO_qN82R3hG3tw.png"/></div></div></figure><p id="e58c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">箱线图被低估了。它们塞满了关于底层分布的见解，因为它们将大量关于数据的信息浓缩到一个小的可视化中。</p><p id="c08a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，您将看到箱线图如何成为实现以下目标的强大工具:</p><ul class=""><li id="74d8" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">了解数据的分布。</li><li id="cda4" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">发现异常值。</li><li id="86fb" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">比较分布，以及箱线图可视化中的小调整如何更容易发现分布之间的差异。</li></ul><h1 id="bdb1" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">了解数据的分布</h1><p id="2200" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">在探索性数据分析过程中，箱线图是直方图的一个很好的补充。</p><p id="eff6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用直方图，很容易看到分布的形状和趋势。因为直方图突出了每个数据点在分布中出现的频率。</p><blockquote class="mn"><p id="af95" class="mo mp iq bd mq mr ms mt mu mv mw kv dk translated">箱线图不直接关注频率，而是关注分布中的值的范围。</p></blockquote><figure class="my mz na nb nc jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/b0c47227bcd8a42140be6b1ce9228bb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Htf4vAdJWw-lou_gIPrwg.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">直方图突出显示频率，而箱线图突出显示数据的范围。</em></p></figure><p id="ae74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们习惯用频率和比较比例来思考。这就是为什么我们如此轻松地解释直方图的洞察力，在直方图中，我们可以发现大多数数据集中的值，我们可以看到分布的形状。</p><p id="b0c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用箱线图，我们可以获得与直方图相同的洞察力。虽然我们可以用直方图来显示分布的形状，但箱线图突出显示了给出分布形状的汇总指标。我们可以从箱线图中提取的汇总指标有:</p><ul class=""><li id="e99f" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><em class="ni">分位数</em>，特别是第一和第三分位数，对应于第 25 和第 75 个百分点。</li><li id="81c8" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni">中位数</em>，分布的中间点，也对应于第 50 个百分位数。</li><li id="b274" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni">四分位数范围(IQR) </em>，第三个和第一个分位数之间的宽度。用数学表达，我们有 IQR = Q3 — Q1。</li><li id="6e88" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni">最小值，</em>数据集中排除异常值的最小值，对应于 Q1-1.5 倍质量分数</li><li id="4efa" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni"> Max </em>，数据集中的最大值，不包括异常值，对应 Q3+ 1.5xIQR。</li></ul><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/813aac6660641dbd9a696a38d4617bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2J2Fwvzot7xBHChvvpIYQ.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">您可以从直方图和箱线图中提取的汇总指标。</em></p></figure><h1 id="7423" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">斑点异常值</h1><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/d1e854740bfaa4c03417d03aa961c6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zRLAcNPQKj4o7jdDsyI1Ow.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">突出异常值的箱线图。</em></p></figure><p id="e5b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在方框图中显示异常值通常显示为圆圈。但是正如您将在下一节看到的，您可以定制离群值的表示方式😀</p><p id="fc95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的数据集有异常值，用箱线图很容易发现它们。有不同的方法来确定数据点是异常值。最广为人知的是<em class="ni"> 1.5xIQR 规则。</em></p><h1 id="8bf4" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">1.5xIQR 规则</h1><p id="7f51" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">异常值是数据集中的极端观察值。因此，判断一个数据点是否极端的经验法则是将其与四分位间距进行比较。</p><p id="1f08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用四分位距(IQR)来发现异常值是有意义的。IQR 是第一个和第三个四分位数之间的值范围，即第 25 个和第 75 个百分位数，因此它将包括数据集中的大多数数据点。</p><p id="04fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是为什么是 1.5 倍的四分位间距呢？这与被称为<a class="ae np" href="https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule" rel="noopener ugc nofollow" target="_blank">68–95–99 规则</a>的<a class="ae np" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank">正态分布</a>的一个重要特征有关。</p><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nq"><img src="../Images/f2d04268eb35890dc2ad591cd26ce74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sdj-K1VLwL_8c07t10h_Bw.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">68–95–99 法则，来源:【https://commons.wikimedia.org/wiki/File:Empirical_Rule.PNG T4】</p></figure><p id="397c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据 68–95–99 规则，我们知道:</p><ul class=""><li id="deb5" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">68%的数据在平均值之上或之下的一个标准偏差内，</li><li id="767a" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">95%的数据在平均值的两个标准偏差内，</li><li id="a264" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">99.7%的数据在平均值的三个标准偏差之内。</li></ul><p id="90ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只有很少的数据点会超过平均值的三个标准偏差，更准确地说，只有 0.3%的数据点。所以任何超过三个标准差的数据点都被认为是极端的。</p><p id="1f3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了检查一个数据点是否是异常值，并检查它是否超出三个标准差，我们计算:</p><ul class=""><li id="7898" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Q1-1.5 倍</li><li id="d1ac" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Q3 + 1.5xIQR。</li></ul><p id="149a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些代表分布中不被认为是极端的区域的下限和上限。其最终大约是平均值的 3 个标准偏差。</p><p id="0959" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">乘数是 1.5，因为任何大于 1.5 的数字都会导致大于 3 倍标准差的范围。因此，数学家们选定了一个中间数。</p><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/9a6ea5929d37a13a921b8e9b49ea862d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RkaxqWyt6FuG2nBI71iGkg.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">箱线图和概率密度函数，来源:<a class="ae np" href="https://commons.wikimedia.org/wiki/File:Boxplot_vs_PDF.svg" rel="noopener ugc nofollow" target="_blank">https://commons.wikimedia.org/wiki/File:Boxplot_vs_PDF.svg</a></p></figure><p id="44da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">任何低于下限或高于上限的数据点<em class="ni">都是异常值；</em></p><ul class=""><li id="98f1" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">(数据点值)&lt; Q1–1.5xIQR, then it’s an outlier.</li><li id="b40e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">(data point value) &gt; Q3 + 1.5xIQR，那么就是离群值。</li></ul><h1 id="d0d8" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">自定义箱线图以比较分布</h1><p id="08a5" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">箱线图也是比较不同分布的好工具。</p><p id="82ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们比较一下<a class="ae np" href="https://scikit-learn.org/stable/auto_examples/datasets/plot_iris_dataset.html" rel="noopener ugc nofollow" target="_blank">虹膜数据集</a>中花朵花瓣长度的分布。</p><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/c3d7e9b0162f85bcb13daf6f6bcaf63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ir0s6JniXGmsCMAzZaoBvA.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">比较虹膜数据集的花瓣长度。</em></p></figure><p id="7012" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是你如何创建这个情节。</p><pre class="nk nl nm nn gt nt nu nv nw aw nx bi"><span id="414a" class="ny ll iq nu b gy nz oa l ob oc">import numpy as np<br/>import pandas as pd<br/>from sklearn import datasets<br/>import matplotlib.pyplot as plt</span><span id="56db" class="ny ll iq nu b gy od oa l ob oc"># Load Iris dataset<br/>iris = datasets.load_iris()</span><span id="3335" class="ny ll iq nu b gy od oa l ob oc"># Preparing Iris dataset<br/>iris_data = pd.DataFrame(data=iris.data, columns=['sepal_length', 'sepal_width', 'petal_length', 'petal_width'])</span><span id="c9bf" class="ny ll iq nu b gy od oa l ob oc">iris_target = pd.DataFrame(data=iris.target, columns=['species'])<br/>iris_df = pd.concat([iris_data, iris_target], axis=1)</span><span id="5682" class="ny ll iq nu b gy od oa l ob oc"># Add species name<br/>iris_df['species_name'] = np.where(iris_df['species'] == 0, 'Setosa', None)</span><span id="9607" class="ny ll iq nu b gy od oa l ob oc">iris_df['species_name'] = np.where(iris_df['species'] == 1, 'Versicolor', iris_df['species_name'])</span><span id="af70" class="ny ll iq nu b gy od oa l ob oc">iris_df['species_name'] = np.where(iris_df['species'] == 2, 'Virginica', iris_df['species_name'])</span><span id="76bb" class="ny ll iq nu b gy od oa l ob oc"><br/># Prepare petal length by species datasets<br/>setosa_petal_length = iris_df[iris_df['species_name'] == 'Setosa']['petal_length']</span><span id="9667" class="ny ll iq nu b gy od oa l ob oc">versicolor_petal_length = iris_df[iris_df['species_name'] == 'Versicolor']['petal_length']</span><span id="0f61" class="ny ll iq nu b gy od oa l ob oc">virginica_petal_length = iris_df[iris_df['species_name'] == 'Virginica']['petal_length']</span><span id="4f73" class="ny ll iq nu b gy od oa l ob oc"><br/># Visualize petal length distribution for all species</span><span id="ea98" class="ny ll iq nu b gy od oa l ob oc">fig, ax = plt.subplots(figsize=(12, 7))</span><span id="82de" class="ny ll iq nu b gy od oa l ob oc"># Remove top and right border<br/>ax.spines['top'].set_visible(False)<br/>ax.spines['right'].set_visible(False)<br/>ax.spines['left'].set_visible(False)</span><span id="1a51" class="ny ll iq nu b gy od oa l ob oc"># Remove y-axis tick marks<br/>ax.yaxis.set_ticks_position('none')</span><span id="ac7d" class="ny ll iq nu b gy od oa l ob oc"># Add major gridlines in the y-axis<br/>ax.grid(color='grey', axis='y', linestyle='-', linewidth=0.25, alpha=0.5)</span><span id="baf6" class="ny ll iq nu b gy od oa l ob oc"># Set plot title<br/>ax.set_title('Distribution of petal length by species')</span><span id="3964" class="ny ll iq nu b gy od oa l ob oc"># Set species names as labels for the boxplot<br/>dataset = [setosa_petal_length, versicolor_petal_length, virginica_petal_length]</span><span id="d8cb" class="ny ll iq nu b gy od oa l ob oc">labels = iris_df['species_name'].unique()<br/>ax.boxplot(dataset, labels=labels)</span><span id="5293" class="ny ll iq nu b gy od oa l ob oc">plt.show()</span></pre><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/c3d7e9b0162f85bcb13daf6f6bcaf63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ir0s6JniXGmsCMAzZaoBvA.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">(再次)比较虹膜数据集的花瓣长度。</em></p></figure><p id="25cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以从这个情节中获得一些启示:</p><ul class=""><li id="2b5b" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">刚毛鸢尾的花瓣长度远小于杂色鸢尾和海滨鸢尾。它的范围从大约 1 到 2 厘米。</li><li id="34bc" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">海滨鸢尾的花瓣长度范围大于刚毛鸢尾和杂色鸢尾的花瓣长度范围。我们可以从<em class="ni"/><em class="ni">的高度看出，与其他两个相比，海滨鸢尾的盒子是</em>的。</li><li id="1f41" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">鸢尾和 Veriscolor 都有异常值。</li></ul><p id="1be8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以通过查看每个分布的汇总指标来确认这些见解。</p><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/23e1173b47681ca2c19695e67ea02482.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m0fznQm76lbgn8VFazSeQg.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">鸢尾属植物花瓣长度的综合度量。</em></p></figure><p id="602c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是计算这些指标的方法。</p><pre class="nk nl nm nn gt nt nu nv nw aw nx bi"><span id="47a0" class="ny ll iq nu b gy nz oa l ob oc">def get_summary_statistics(dataset):<br/>    <br/>    mean = np.round(np.mean(dataset), 2)<br/>    median = np.round(np.median(dataset), 2)<br/>    min_value = np.round(dataset.min(), 2)<br/>    max_value = np.round(dataset.max(), 2)</span><span id="4c5d" class="ny ll iq nu b gy od oa l ob oc">    quartile_1 = np.round(dataset.quantile(0.25), 2)<br/>    quartile_3 = np.round(dataset.quantile(0.75), 2)</span><span id="f540" class="ny ll iq nu b gy od oa l ob oc">    # Interquartile range<br/>    iqr = np.round(quartile_3 - quartile_1, 2)</span><span id="6cbc" class="ny ll iq nu b gy od oa l ob oc">    print('Min: %s' % min_value)<br/>    print('Mean: %s' % mean)<br/>    print('Max: %s' % max_value)<br/>    print('25th percentile: %s' % quartile_1)<br/>    print('Median: %s' % median)<br/>    print('75th percentile: %s' % quartile_3)<br/>    print('Interquartile range (IQR): %s' % iqr)<br/>    print('Setosa summary statistics')</span><span id="e355" class="ny ll iq nu b gy od oa l ob oc">print('\n\nSetosa summary statistics')<br/>get_summary_statistics(setosa_petal_length)</span><span id="0b94" class="ny ll iq nu b gy od oa l ob oc">print('\n\nVersicolor summary statistics')<br/>get_summary_statistics(versicolor_petal_length)</span><span id="3714" class="ny ll iq nu b gy od oa l ob oc">print('\n\nVirginica summary statistics')<br/>get_summary_statistics(virginica_petal_length)</span></pre><h2 id="2215" class="ny ll iq bd lm of og dn lq oh oi dp lu kj oj ok ly kn ol om mc kr on oo mg op bi translated">定制您的箱线图</h2><p id="2844" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv ij bi translated">乍一看，很难区分不同物种的箱线图。底部的标签是我们比较分布的唯一视觉线索。</p><p id="ed1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以使用 boxplot 的属性来定制每个<em class="ni">框</em>。由于属性应用于所有数据，这些数据是给定 boxplot 方法的<em class="ni">,我们不能采用最后一个绘图的方法，并使用每个物种花瓣长度的数组作为输入。</em></p><p id="815e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们必须绘制每个物种的花瓣长度，并对每个物种应用属性。</p><p id="f8ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用以下参数:</p><ul class=""><li id="c565" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><em class="ni">位置</em>:箱线图在绘图区的位置。我们不想将每个物种的箱线图绘制在彼此之上，所以我们用它来设置每个箱线图在 x 轴上的位置。</li><li id="4b69" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni"> medianprops </em>:应用于箱线图内中线的属性字典。</li><li id="415b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni"> whiskerprops </em>:应用于胡须的属性字典。</li><li id="95d5" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni"> capprops </em>:应用于胡须上帽子的属性字典。</li><li id="0182" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><em class="ni"> flierprops </em>:应用于离群值的属性字典。</li></ul><p id="cb24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以自定义其他几个属性。在本例中，我将为每个箱线图添加不同的颜色，这样更容易看到我们在可视化不同的分布。</p><figure class="nk nl nm nn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/6b2a77b6e6b3429ef7085b9be3359587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FaKLdVbcmv4OJveugGkotQ.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated"><em class="nh">比较虹膜数据集的花瓣长度，为每个物种定制颜色。</em></p></figure><pre class="nk nl nm nn gt nt nu nv nw aw nx bi"><span id="7f3e" class="ny ll iq nu b gy nz oa l ob oc">fig, ax = plt.subplots(figsize=(12, 7))</span><span id="f249" class="ny ll iq nu b gy od oa l ob oc"># Remove top and right border<br/>ax.spines['top'].set_visible(False)<br/>ax.spines['right'].set_visible(False)<br/>ax.spines['left'].set_visible(False)</span><span id="0357" class="ny ll iq nu b gy od oa l ob oc"># Remove y-axis tick marks<br/>ax.yaxis.set_ticks_position('none')</span><span id="4e1f" class="ny ll iq nu b gy od oa l ob oc"><br/># Set plot title<br/>ax.set_title('Distribution of petal length by species')</span><span id="822c" class="ny ll iq nu b gy od oa l ob oc"># Add major gridlines in the y-axis<br/>ax.grid(color='grey', axis='y', linestyle='-', linewidth=0.25, alpha=0.5)</span><span id="cbd9" class="ny ll iq nu b gy od oa l ob oc"># Set species names as labels for the boxplot<br/>dataset = [setosa_petal_length, versicolor_petal_length, virginica_petal_length]<br/>labels = iris_df['species_name'].unique()</span><span id="7168" class="ny ll iq nu b gy od oa l ob oc"><br/># Set the colors for each distribution<br/>colors = ['#73020C', '#426A8C', '#D94D1A']<br/>colors_setosa = dict(color=colors[0])<br/>colors_versicolor = dict(color=colors[1])<br/>colors_virginica = dict(color=colors[2])</span><span id="f32b" class="ny ll iq nu b gy od oa l ob oc"># We want to apply different properties to each species, so we're going to plot one boxplot<br/># for each species and set their properties individually<br/># positions: position of the boxplot in the plot area<br/># medianprops: dictionary of properties applied to median line<br/># whiskerprops: dictionary of properties applied to the whiskers<br/># capprops: dictionary of properties applied to the caps on the whiskers<br/># flierprops: dictionary of properties applied to outliers</span><span id="fc29" class="ny ll iq nu b gy od oa l ob oc">ax.boxplot(dataset[0], positions=[1], labels=[labels[0]], boxprops=colors_setosa, medianprops=colors_setosa, whiskerprops=colors_setosa, capprops=colors_setosa, flierprops=dict(markeredgecolor=colors[0]))</span><span id="85e5" class="ny ll iq nu b gy od oa l ob oc">ax.boxplot(dataset[1], positions=[2], labels=[labels[1]], boxprops=colors_versicolor, medianprops=colors_versicolor, whiskerprops=colors_versicolor, capprops=colors_versicolor, flierprops=dict(markeredgecolor=colors[1]))</span><span id="96fe" class="ny ll iq nu b gy od oa l ob oc">ax.boxplot(dataset[2], positions=[3], labels=[labels[2]], boxprops=colors_virginica, medianprops=colors_virginica, whiskerprops=colors_virginica, capprops=colors_virginica, flierprops=dict(markeredgecolor=colors[2]))</span><span id="17eb" class="ny ll iq nu b gy od oa l ob oc">plt.show()</span></pre><p id="102b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样！您可以使用箱线图来探索您的数据和自定义您的可视化，以便更容易提取见解。</p><p id="afc5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ni">感谢阅读！</em></p></div></div>    
</body>
</html>