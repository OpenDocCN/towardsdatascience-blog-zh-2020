<html>
<head>
<title>How to Extract Text from PDF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从PDF中提取文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-extract-text-from-pdf-245482a96de7?source=collection_archive---------1-----------------------#2020-04-12">https://towardsdatascience.com/how-to-extract-text-from-pdf-245482a96de7?source=collection_archive---------1-----------------------#2020-04-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc07" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习使用Python从pdf中提取文本</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/016131125741b7ac474dad6761adcbd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BqBNjGojS5NSMk65"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">卡尔·海尔达尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="b6a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇博客中，我们将研究用Python处理pdf的最流行的库。很多信息都是以PDF的形式分享的，往往我们需要提取一些细节做进一步的处理。</p><p id="6191" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了帮助我识别最流行的python库，我查看了<a class="ae ky" href="https://stackoverflow.com/questions/34837707/how-to-extract-text-from-a-pdf-file" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>、<a class="ae ky" href="https://www.reddit.com/r/learnpython/comments/ffbedf/what_do_we_use_for_pdf_parsing_these_days/" rel="noopener ugc nofollow" target="_blank"> Reddit </a>以及大量的谷歌搜索。我识别了许多包，每个包都有自己的优点和缺点。具体来说，整个互联网的用户似乎都在使用:PyPDF2，Textract，tika，pdfPlumber，pdfMiner。</p><p id="b215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，在我的研究中，由于这样或那样的原因，我只能让其中的3个库正常工作。对于其中一些库来说，设置太复杂了(缺少依赖项，奇怪的错误信息，等等。)</p><p id="e4d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们快速回顾一下所有这些库。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3439" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">PyPDF2</h1><h2 id="c715" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">评分:3/5</h2><p id="c574" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">PyPDF2的好消息是安装起来很容易。文档有些缺乏容易理解的例子，但是如果你足够注意，你最终会明白的。</p><p id="a97f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，坏消息是结果并不好。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/b329bbb26a29e97c2e3c60fa00828c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/1*E6HxqH-TPVg_Ors5gbJQSA.gif"/></div></figure><p id="e275" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，它识别了正确的文本，但出于某种原因，它将文本分成了多行。</p><p id="d902" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="2580" class="mu md it nn b gy nr ns l nt nu">import PyPDF2</span><span id="77c1" class="mu md it nn b gy nv ns l nt nu">fhandle = open(r'D:\examplepdf.pdf', 'rb')</span><span id="e5cb" class="mu md it nn b gy nv ns l nt nu">pdfReader = PyPDF2.PdfFileReader(fhandle)</span><span id="2d6f" class="mu md it nn b gy nv ns l nt nu">pagehandle = pdfReader.getPage(0)</span><span id="359e" class="mu md it nn b gy nv ns l nt nu">print(pagehandle.extractText())</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1dd1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Textract</h1><h2 id="9307" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">评分:0/5</h2><p id="da9b" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">许多人对这个图书馆赞不绝口，这是一个有希望的开始。<a class="ae ky" href="https://textract.readthedocs.io/en/latest/python_package.html" rel="noopener ugc nofollow" target="_blank">文档</a>也不错。</p><p id="3c50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，最新版本有一个bug，每次你试图从PDF中提取文本时<a class="ae ky" href="https://github.com/deanmalmgren/textract/issues/256" rel="noopener ugc nofollow" target="_blank">都会抛出一个错误。通过图书馆的开发论坛跟踪这个bug，可能会有一个修复。手指交叉。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="6f20" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">阿帕奇蒂卡</h1><h2 id="2581" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">评分:2/5</h2><p id="b7a8" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">Apache Tika有一个python库，显然可以让你从pdf中提取文本。安装Python库非常简单，但是除非安装了JAVA，否则它无法工作。</p><p id="801c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至少理论上是这样。我不想安装JAVA因此我停留在:<em class="nw">“runtime error:无法启动Tika服务器。”</em>错误。</p><p id="3998" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据<a class="ae ky" href="https://medium.com/@justinboylantoomey/fast-text-extraction-with-python-and-tika-41ac34b0fe61" rel="noopener">这个媒体博客</a>(无关联)，然而，一旦你让它工作，它是了不起的。所以，我们用2/5评级吧。</p><p id="cbc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该代码看起来像这样:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="ffdd" class="mu md it nn b gy nr ns l nt nu">from tika import parser</span><span id="d92d" class="mu md it nn b gy nv ns l nt nu">file = r'D:\examplepdf.pdf'</span><span id="8341" class="mu md it nn b gy nv ns l nt nu">file_data = parser.from_file(file)</span><span id="ff13" class="mu md it nn b gy nv ns l nt nu">text = file_data['content']</span><span id="ff6b" class="mu md it nn b gy nv ns l nt nu">print(text)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="42f1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">pdf木材</h1><h2 id="a6b6" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">评分:5/5</h2><p id="812a" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">正当我开始对从pdf中挖掘文本的简单易用的python库的存在失去信心时，出现了pdfPlumber。</p><p id="fb2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://github.com/jsvine/pdfplumber" rel="noopener ugc nofollow" target="_blank">文档</a>不算太差；几分钟之内，整个事情就开始了。结果好得不能再好了。</p><p id="d0c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，值得注意的是，该库确实明确表示，它在机器生成的pdf上工作得最好，而不是扫描文档；我用的就是这个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/5215d7317b3f0cd68362d41984acdfa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/1*92e6xEmsKRAhAndgqs1QLA.gif"/></div></figure><p id="7607" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="a08f" class="mu md it nn b gy nr ns l nt nu">import pdfplumber</span><span id="f943" class="mu md it nn b gy nv ns l nt nu">with pdfplumber.open(r'D:\examplepdf.pdf') as pdf:<br/>    first_page = pdf.pages[0]<br/>    print(first_page.extract_text())</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="79ae" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">pdfMiner3</h1><h2 id="6bb3" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">评分:4/5</h2><p id="657b" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我会诚实；以典型的pythonic方式，我扫了一眼<a class="ae ky" href="https://github.com/gwk/pdfminer3/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">文档</a>(两次！)并且不明白我应该如何运行这个包；这包括pdfMiner(也不是我在这里讨论的版本3)。我甚至安装了它，并尝试了一些没有成功的事情。</p><p id="6caa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">唉，来救我的是一个善良的陌生人。一旦你看完了提供的例子，实际上就很容易理解了。哦，结果和你预期的一样好:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/adae1f083853749f6ab1c719013f146b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/1*UY7uiCOM8BblKkx8GZCZ5Q.gif"/></div></figure><p id="7951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代码可以在<a class="ae ky" href="https://stackoverflow.com/questions/56494070/how-to-use-pdfminer-six-with-python-3" rel="noopener ugc nofollow" target="_blank">链接的堆栈溢出帖子</a>中找到。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="772c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">PDF -&gt; JPEG -&gt;文本</h1><p id="6363" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">解决这个问题的另一种方法是将PDF文件转换成图像。这可以通过编程或截取每个页面的屏幕截图来完成。</p><p id="34a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦有了图像文件，就可以使用tesseract库从其中提取文本:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/how-to-extract-text-from-images-with-python-db9b87fe432b"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">如何用Python从图像中提取文本</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">学习用3行代码从图像中提取文本</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ks oa"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="ea15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你离开之前，如果你喜欢这篇文章，你可能也会喜欢:</p><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/learning-to-use-progress-bars-in-python-2dc436de81e5"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">学习使用Python中的进度条</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">4个不同库的介绍(命令行和用户界面)</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo ks oa"/></div></div></a></div><div class="nx ny gp gr nz oa"><a rel="noopener follow" target="_blank" href="/building-a-python-ui-for-comparing-data-13c10693d9e4"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">构建用于比较数据的Python UI</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">如何快速让您的非技术团队能够比较数据</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">towardsdatascience.com</p></div></div><div class="oj l"><div class="oq l ol om on oj oo ks oa"/></div></div></a></div></div></div>    
</body>
</html>