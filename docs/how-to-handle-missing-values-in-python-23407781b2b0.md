# å¦‚ä½•åœ¨ Python ä¸­å¤„ç†ç¼ºå¤±å€¼

> åŸæ–‡ï¼š<https://towardsdatascience.com/how-to-handle-missing-values-in-python-23407781b2b0?source=collection_archive---------34----------------------->

## å…¥é—¨æŒ‡å—

## ç¼ºå¤±å€¼æ’è¡¥çš„ç®€æ˜ä»‹ç»

![](img/bb7ddf4095ba8bdb9b2a0834fad7a075.png)

é©¬åº“æ–¯Â·æ¸©å…‹å‹’åœ¨ [Unsplash](https://unsplash.com/s/photos/delete?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ç…§ç‰‡

æ•°æ®ç§‘å­¦å®¶é¢ä¸´çš„æœ€å¤§æŒ‘æˆ˜å¯èƒ½æ˜¯ä¸€äº›å¬èµ·æ¥å¾ˆå¹³å¸¸ï¼Œä½†å¯¹ä»»ä½•åˆ†æéƒ½éå¸¸é‡è¦çš„äº‹æƒ…â€”â€”æ¸…ç†è„æ•°æ®ã€‚å½“æ‚¨æƒ³åˆ°è„æ•°æ®æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæƒ³åˆ°ä¸å‡†ç¡®æˆ–æ ¼å¼é”™è¯¯çš„æ•°æ®ã€‚ä½†äº‹å®æ˜¯ï¼Œç¼ºå¤±æ•°æ®å®é™…ä¸Šæ˜¯è„æ•°æ®æœ€å¸¸è§çš„æƒ…å†µã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œè¯•å›¾åšä¸€ä¸ªå®¢æˆ·ç»†åˆ†åˆ†æï¼Œä½† 50%çš„æ•°æ®æ²¡æœ‰åœ°å€è®°å½•ã€‚è¿™å°†å¾ˆéš¾æˆ–ä¸å¯èƒ½åšä½ çš„åˆ†æï¼Œå› ä¸ºåˆ†æä¼šæ˜¾ç¤ºåœ¨æŸäº›åœ°åŒºæ²¡æœ‰å®¢æˆ·çš„åè§ã€‚

# æ¢ç´¢ç¼ºå¤±çš„æ•°æ®

*   **æœ‰å¤šå°‘æ•°æ®ä¸¢å¤±äº†ï¼Ÿ**æ‚¨å¯ä»¥è¿è¡Œä¸€ä¸ªç®€å•çš„æ¢ç´¢æ€§åˆ†æï¼Œçœ‹çœ‹æ‚¨ä¸¢å¤±æ•°æ®çš„é¢‘ç‡ã€‚å¦‚æœç™¾åˆ†æ¯”å¾ˆå°ï¼Œæ¯”å¦‚è¯´ 5%æˆ–æ›´å°‘ï¼Œå¹¶ä¸”æ•°æ®å®Œå…¨éšæœºä¸¢å¤±ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è€ƒè™‘å¿½ç•¥å¹¶åˆ é™¤è¿™äº›æƒ…å†µã€‚ä½†æ˜¯è¯·è®°ä½ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œåˆ†ææ‰€æœ‰æ•°æ®æ€»æ˜¯æ›´å¥½ï¼Œä¸¢å¼ƒæ•°æ®ä¼šå¼•å…¥åå·®ã€‚å› æ­¤ï¼Œæœ€å¥½æ£€æŸ¥ä¸€ä¸‹åˆ†å¸ƒæƒ…å†µï¼Œçœ‹çœ‹ä¸¢å¤±çš„æ•°æ®æ¥è‡ªå“ªé‡Œã€‚
*   **åˆ†ææ•°æ®æ˜¯å¦‚ä½•ä¸¢å¤±çš„** (MCARï¼Œä¸‰æœˆï¼Œå››æœˆ)ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­å‘ç°ä¸åŒç±»å‹çš„ç¼ºå¤±æ•°æ®ã€‚

# ç¼ºå¤±æ•°æ®çš„ç±»å‹

æœ‰ä¸‰ç§ç¼ºå¤±æ•°æ®:

*   æ•°æ®å®Œå…¨éšæœºä¸¢å¤±(MCAR)
*   æ•°æ®éšæœºä¸¢å¤±(MAR)
*   ééšæœºæ•°æ®ä¸¢å¤±(MNAR)

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†é€šè¿‡ä¾‹å­å›é¡¾ç¼ºå¤±æ•°æ®çš„ç±»å‹ï¼Œå¹¶åˆ†äº«å¦‚ä½•ç”¨æ’è¡¥æ¥å¤„ç†ç¼ºå¤±æ•°æ®ã€‚

## æ•°æ®å®Œå…¨éšæœºä¸¢å¤±(MCAR)

å½“æˆ‘ä»¬è¯´æ•°æ®æ˜¯éšæœºç¼ºå¤±çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ„æ€æ˜¯ç¼ºå¤±ä¸è¢«ç ”ç©¶çš„äººæ— å…³ã€‚ä¾‹å¦‚ï¼Œä¸€ä»½é—®å·å¯èƒ½åœ¨é‚®å¯„è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œæˆ–è€…ä¸€ä»½è¡€æ ·å¯èƒ½åœ¨å®éªŒå®¤ä¸­è¢«æŸåã€‚

æ•°æ®å®Œå…¨éšæœºç¼ºå¤±çš„ç»Ÿè®¡ä¼˜åŠ¿æ˜¯åˆ†æä¿æŒæ— åï¼Œå› ä¸ºæ•°æ®ç¼ºå¤±ä¸ä¼šä½¿ä¼°è®¡å‚æ•°äº§ç”Ÿåå·®ã€‚ç„¶è€Œï¼Œå¾ˆéš¾è¯æ˜è¿™äº›æ•°æ®æ˜¯å¦ç¡®å®æ˜¯ MCAR çš„ã€‚

## æ•°æ®éšæœºä¸¢å¤±(MAR)

å½“æˆ‘ä»¬è¯´æ•°æ®éšæœºç¼ºå¤±æ—¶ï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ•°æ®ç‚¹ç¼ºå¤±çš„å€¾å‘ä¸ç¼ºå¤±æ•°æ®æœ¬èº«æ— å…³ï¼Œä½†ä¸ä¸€äº›è§‚å¯Ÿåˆ°çš„æ•°æ®æœ‰å…³ã€‚æ¢å¥è¯è¯´ï¼Œç¼ºå¤±å€¼çš„æ¦‚ç‡å–å†³äºå¯è§‚æµ‹æ•°æ®çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æš—æ‹å¯¹è±¡æ‹’ç»äº†ä½ ï¼Œä½ å¯ä»¥é€šè¿‡è§‚å¯Ÿå…¶ä»–å˜é‡ï¼Œæ¯”å¦‚â€œå¥¹å·²ç»åšå‡ºæ‰¿è¯ºäº†â€ï¼Œæˆ–è€…â€œå¥¹çš„ç”Ÿæ´»ç›®æ ‡ä¸ä½ ä¸åŒâ€ç­‰ï¼Œæ¥çŸ¥é“åŸå› ã€‚

éšæœºç¼ºå¤±ç›¸å¯¹å®¹æ˜“å¤„ç†â€”â€”åªéœ€å°†æ‰€æœ‰å½±å“ç¼ºå¤±æ¦‚ç‡çš„å˜é‡ä½œä¸ºå›å½’è¾“å…¥ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬é€šå¸¸ä¸èƒ½ç¡®å®šæ•°æ®æ˜¯å¦çœŸçš„æ˜¯éšæœºç¼ºå¤±çš„ï¼Œæˆ–è€…ç¼ºå¤±æ˜¯å¦å–å†³äºæœªè§‚å¯Ÿåˆ°çš„é¢„æµ‹å€¼æˆ–ç¼ºå¤±çš„æ•°æ®æœ¬èº«ã€‚

## **æ•°æ®ä¸æ˜¯éšæœºä¸¢å¤±** (MNAR)

å½“æˆ‘ä»¬è¯´æ•°æ®ä¸æ˜¯éšæœºä¸¢å¤±æ—¶ï¼Œæˆ‘ä»¬å‡è®¾ä¸¢å¤±çš„æ•°æ®ä¸­æœ‰ä¸€ç§æ¨¡å¼ä¼šå½±å“æ‚¨çš„ä¸»è¦å› å˜é‡ã€‚ä¾‹å¦‚ï¼Œå—æ•™è‚²ç¨‹åº¦æœ€ä½çš„äººé”™è¿‡äº†æ•™è‚²ï¼Œç—…æƒ…æœ€ä¸¥é‡çš„äººæœ€æœ‰å¯èƒ½é€€å‡ºç ”ç©¶ï¼Œæˆ–è€…å¸æ¯’è€…åœ¨è°ƒæŸ¥ä¸­å°†è¯ç‰©ä½¿ç”¨å­—æ®µç•™ç©ºã€‚è¿™ä¹Ÿæ„å‘³ç€è¿™äº›ä¸¢å¤±çš„å€¼ä¸æ˜¯éšæœºçš„ï¼Œè€Œæ˜¯æ•…æ„ä¸ºç©ºçš„ã€‚

å¦‚æœæ•°æ®ä¸æ˜¯éšæœºä¸¢å¤±çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼°ç®—ä¸¢å¤±çš„æ•°æ®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå®ƒä¼šä½¿ä½ çš„åˆ†ææˆ–æ¨¡å‹çš„é¢„æµ‹äº§ç”Ÿåå·®ã€‚

# è¯Šæ–­æœºåˆ¶

1.  **MAR vs. MNAR** :åŒºåˆ† MNAR å’Œ MAR çš„å”¯ä¸€çœŸå®æ–¹æ³•æ˜¯æµ‹é‡ä¸€äº›ç¼ºå¤±çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå—è®¿è€…çš„ç­”æ¡ˆå’Œéå—è®¿è€…çš„ç­”æ¡ˆã€‚å¦‚æœæœ‰å¾ˆå¤§çš„å·®å¼‚ï¼Œè¿™æ˜¯æ•°æ®æ˜¯ MNAR çš„å¥½è¯æ®ã€‚å¦å¤–ï¼Œè°ƒæŸ¥é—®é¢˜è¶Šæ•æ„Ÿï¼Œäººä»¬å›ç­”çš„å¯èƒ½æ€§è¶Šå°ã€‚
2.  **MCAR vs .é©¬å°”**:ä¸€ç§æŠ€æœ¯æ˜¯åˆ›å»ºè™šæ‹Ÿå˜é‡ï¼Œåˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦ç¼ºå¤±ã€‚ç„¶åï¼Œåœ¨è¯¥å˜é‡å’Œæ•°æ®é›†ä¸­çš„å…¶ä»–å˜é‡ä¹‹é—´è¿è¡Œ t æ£€éªŒå’Œå¡æ–¹æ£€éªŒï¼Œä»¥æŸ¥çœ‹è¯¥å˜é‡çš„ç¼ºå¤±æ˜¯å¦ä¸å…¶ä»–å˜é‡çš„å€¼ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¥³æ€§çœŸçš„æ¯”ç”·æ€§æ›´ä¸æ„¿æ„å‘Šè¯‰ä½ å¥¹ä»¬çš„ä½“é‡ï¼Œå¡æ–¹æ£€éªŒä¼šå‘Šè¯‰ä½ å¥³æ€§çš„ä½“é‡å˜é‡ç¼ºå¤±æ•°æ®çš„ç™¾åˆ†æ¯”é«˜äºç”·æ€§ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ–­å®šé‡é‡æ˜¯æœ‰æ ‡è®°

# æ•°æ®æ’è¡¥æ–¹æ³•

## ç®€å•æ’è¡¥

ç”¨åˆ—ä¸­çš„å¹³å‡å€¼ã€ä¸­å€¼æˆ–ä¼—æ•°æ›¿æ¢ç¼ºå¤±å€¼æ˜¯ä¸€ç§éå¸¸åŸºæœ¬çš„æ’è¡¥æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•é€Ÿåº¦æœ€å¿«ï¼Œä½†å¯¹ç¼–ç çš„åˆ†ç±»è¦ç´ æ•ˆæœä¸ä½³ã€‚æ­¤å¤–ï¼Œå®ƒæ²¡æœ‰è€ƒè™‘ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å¦‚æœæˆ‘ä»¬å¿…é¡»ä½¿ç”¨è¿™ç§ç®€å•çš„æ’è¡¥æ–¹æ³•ï¼Œè€ƒè™‘ä½¿ç”¨ä¸­é—´å€¼è€Œä¸æ˜¯å¹³å‡å€¼ï¼Œå› ä¸ºå¹³å‡å€¼ä¼šç»™åˆ†æå¸¦æ¥å¼‚å¸¸å€¼æˆ–å™ªå£°ã€‚

```
from sklearn.preprocessing import Imputerimputer = Imputer(missing_values='NaN', strategy='median')
transformed_values = imputer.fit_transform(data.values)# notice that imputation strategy can be changed to "mean", â€œmost_frequentâ€, 'constant'
# read the documentation here: [https://scikit-learn.org/stable/modules/generated/sklearn.impute.SimpleImputer.html](https://scikit-learn.org/stable/modules/generated/sklearn.impute.SimpleImputer.html)
```

## KNN æ’è¡¥

KNNImputer é€šè¿‡ä½¿ç”¨æ¬§å‡ é‡Œå¾·è·ç¦»çŸ©é˜µæŸ¥æ‰¾ k ä¸ªæœ€è¿‘é‚»æ¥å¸®åŠ©ä¼°ç®—è§‚æµ‹å€¼ä¸­å­˜åœ¨çš„ç¼ºå¤±å€¼ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ KNNImputer æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™ç§æ–¹æ³•æ¯”ç®€å•çš„æ’è¡¥æ›´å‡†ç¡®ï¼›ç„¶è€Œï¼Œå®ƒå¯èƒ½è®¡ç®—é‡å¾ˆå¤§ï¼Œå¹¶ä¸”å¯¹å¼‚å¸¸å€¼å¾ˆæ•æ„Ÿã€‚

```
import numpy as np
from sklearn.impute import KNNImputer

imputer = KNNImputer(n_neighbors=2) #define the k nearest neighbors   
imputer.fit_transform(data)# read the documentation here: [https://scikit-learn.org/stable/modules/generated/sklearn.impute.KNNImputer.html](https://scikit-learn.org/stable/modules/generated/sklearn.impute.KNNImputer.html)
```

## å¤šå…ƒæ’è¡¥

å¤šå…ƒæ’è¡¥é€šè¿‡è€ƒè™‘æ•°æ®ä¸­çš„å…¶ä»–å˜é‡æ¥è§£å†³å™ªéŸ³å¢åŠ çš„é—®é¢˜ã€‚é“¾å¼æ–¹ç¨‹çš„åŸºæœ¬å¤šé‡æ’è¡¥(MICE)å‡è®¾æ•°æ®éšæœºç¼ºå¤±ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹å…¶ä»–æ•°æ®æ ·æœ¬ï¼Œå¯¹å…¶çœŸå®ä»·å€¼åšå‡ºæœ‰æ ¹æ®çš„çŒœæµ‹ã€‚

ä»¥ä¸‹æ˜¯ä¸‰ä¸ªä¸»è¦æ­¥éª¤:

1.  ä½¿ç”¨å¸¦æœ‰éšæœºæˆåˆ†çš„æ’è¡¥æµç¨‹ä¸ºç¼ºå¤±å€¼åˆ›å»º *m* ç»„æ’è¡¥ã€‚
2.  åˆ†ææ¯ä¸ªå®Œæ•´çš„æ•°æ®é›†ã€‚æ¯ç»„å‚æ•°ä¼°è®¡å€¼éƒ½ä¼šç•¥æœ‰ä¸åŒï¼Œå› ä¸ºæ•°æ®ç•¥æœ‰ä¸åŒã€‚
3.  å°† *m* ä¸ªåˆ†æç»“æœæ•´åˆæˆæœ€ç»ˆç»“æœã€‚

å¦‚æœä½ æœ‰å…´è¶£äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·çœ‹è¿™ä¸ªè§†é¢‘[è¿™é‡Œ](https://www.youtube.com/watch?v=WPiYOS3qK70)ã€‚è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬å¯¹æµ‹é‡å› ç¼ºå¤±å€¼å¯¼è‡´çš„ä¸ç¡®å®šæ€§ä¸æ„Ÿå…´è¶£æ—¶ï¼Œå•å˜é‡ä¸å¤šå˜é‡æ’è¡¥åœ¨é¢„æµ‹å’Œåˆ†ç±»ä¸­çš„æœ‰ç”¨æ€§ä»æ˜¯ä¸€ä¸ªæœªè§£å†³çš„é—®é¢˜ã€‚

![](img/3ab482703c8138f67f7901e697c17b90.png)

å›¾ç‰‡ä½œè€… [stefvanbuuren](https://stefvanbuuren.name/publication/2011-01-01_vanbuuren2011a/)

```
import numpy as np
from sklearn.experimental import enable_iterative_imputer
from sklearn.impute import IterativeImputer
imp = IterativeImputer(max_iter=10, random_state=0)
imp.fit(X_train)
imp.transform(X_test)# read the documentation here: [https://scikit-learn.org/stable/modules/impute.html](https://scikit-learn.org/stable/modules/impute.html)
```

# **ç»“è®º**

ä»»ä½•åˆ†æéƒ½ä¸èƒ½å¿½ç•¥ç¼ºå¤±æ•°æ®ã€‚ä½œä¸ºæ•°æ®ç§‘å­¦å®¶æˆ–æ•°æ®åˆ†æå¸ˆï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°ä¸¢å¼ƒç¼ºå¤±çš„å€¼ã€‚æˆ‘ä»¬éœ€è¦äº†è§£æ•°æ®æ˜¯å¦‚ä½•ä¸¢å¤±çš„ï¼Œå¹¶ç›¸åº”åœ°å¤„ç† NaN å€¼ã€‚

# å‚è€ƒ

1.  [https://www.statisticssolutions.com/missing-values-in-data/](https://www.statisticssolutions.com/missing-values-in-data/)
2.  [https://measuringu.com/handle-missing-data/](https://measuringu.com/handle-missing-data/)
3.  [https://www.theanalysisfactor.com/missing-data-mechanism/](https://www.theanalysisfactor.com/missing-data-mechanism/)
4.  [https://www . analyticsvidhya . com/blog/2020/07/knnimputer-a-robust-way-to-imput-missing-values-using-scikit-learn/](https://www.analyticsvidhya.com/blog/2020/07/knnimputer-a-robust-way-to-impute-missing-values-using-scikit-learn/)
5.  [https://scikit-learn.org/stable/modules/impute.html](https://scikit-learn.org/stable/modules/impute.html)
6.  [https://www4 . stat . ncsu . edu/~ post/suchit/Bayesian-methods-completed . pdf](https://www4.stat.ncsu.edu/~post/suchit/bayesian-methods-incomplete.pdf)

å¦‚æœä½ è§‰å¾—è¿™å¾ˆæœ‰å¸®åŠ©ï¼Œè¯·å…³æ³¨æˆ‘ï¼Œçœ‹çœ‹æˆ‘åœ¨â¤ï¸çš„å…¶ä»–åšå®¢

ä¸‹æ¬¡è§ï¼Œå¿«ä¹å­¦ä¹ ï¼[ğŸ‘©ğŸ»â€ğŸ’»](https://emojipedia.org/woman-technologist-light-skin-tone/)

[](/understanding-and-choosing-the-right-probability-distributions-with-examples-5051b59b5211) [## ç”¨ä¾‹å­ç†è§£å’Œé€‰æ‹©æ­£ç¡®çš„æ¦‚ç‡åˆ†å¸ƒ

### ä¸¾ä¾‹è¯´æ˜æœ€å¸¸è§çš„ç¦»æ•£æ¦‚ç‡åˆ†å¸ƒ

towardsdatascience.com](/understanding-and-choosing-the-right-probability-distributions-with-examples-5051b59b5211) [](/how-to-prepare-for-business-case-interview-as-an-analyst-6e9d68ce2fd8) [## ä½œä¸ºåˆ†æå¸ˆå¦‚ä½•å‡†å¤‡å•†ä¸šæ¡ˆä¾‹é¢è¯•ï¼Ÿ

### ä½œä¸ºæ•°æ®åˆ†æå¸ˆæˆ–æ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦çŸ¥é“æ¦‚ç‡å’Œç»Ÿè®¡ï¼Œæœºå™¨å­¦ä¹ ç®—æ³•â€¦

towardsdatascience.com](/how-to-prepare-for-business-case-interview-as-an-analyst-6e9d68ce2fd8) [](https://medium.com/@kessiezhang/building-a-product-recommendation-system-for-e-commerce-part-i-web-scraping-798b6251ab51) [## ä¸ºç”µå­å•†åŠ¡å»ºç«‹ä¸€ä¸ªäº§å“æ¨èç³»ç»Ÿ:ç¬¬ä¸€éƒ¨åˆ†â€”â€”ç½‘ç»œæœé›†

### ä»Šå¤©ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ°æœºå™¨å­¦ä¹ åœ¨å•†ä¸šä¸­æœ€æˆåŠŸå’Œæœ€å¹¿æ³›çš„åº”ç”¨ï¼Œæ¨èè€…â€¦

medium.com](https://medium.com/@kessiezhang/building-a-product-recommendation-system-for-e-commerce-part-i-web-scraping-798b6251ab51) [](/how-to-convert-jupyter-notebooks-into-pdf-5accaef3758) [## å¦‚ä½•å°† Jupyter ç¬”è®°æœ¬è½¬æ¢æˆ PDF

### ç”¨å‡ è¡Œä»£ç å°† Jupyter ç¬”è®°æœ¬è½¬æ¢ä¸º pdf(è°ƒè¯•â€œ500:å†…éƒ¨æœåŠ¡å™¨é”™è¯¯â€)

towardsdatascience.com](/how-to-convert-jupyter-notebooks-into-pdf-5accaef3758)