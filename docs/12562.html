<html>
<head>
<title>Global, Local and Nonlocal variables in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的全局、局部和非局部变量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/global-local-and-nonlocal-variables-in-python-6b11c20d73b0?source=collection_archive---------2-----------------------#2020-08-30">https://towardsdatascience.com/global-local-and-nonlocal-variables-in-python-6b11c20d73b0?source=collection_archive---------2-----------------------#2020-08-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9966" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本教程中，让我们学习 Python 中全局、局部和非局部变量的用法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/445328e1d3d41356e1a382199e958fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1AktzTtx2ZOH1kb8yv7Piw.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@max_duz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>在<a class="ae ky" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="a8e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">首先，我不是上图中的那个人。我只是一个仁厚的作家，在这里讲一个 Python 编程中最容易混淆的概念“<strong class="lb iu"> <em class="me">全局、局部和非局部变量</em> </strong>”。我知道看完标题你会想“<strong class="lb iu"> <em class="me">我为什么还要担心这个</em> </strong>”。嗯，答案是有时候不知道这些微小的事情会让你付出很大的代价。所以事不宜迟，我们开始吧。</p><p id="b3f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在像 C/C++这样的编程语言中，每次同时声明一个变量时，都会分配一个内存，这种分配完全取决于变量的类型。因此，程序员在创建变量时必须指定变量类型。但幸运的是，在 Python 中，您不必这样做。Python 没有变量类型声明。像 C 中的指针一样，Python 中的变量不合法地存储值；它们使用引用来突出显示内存中的对象。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="7813" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">主题</h1><p id="2415" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">本文将涉及的主题列表如下:</p><ul class=""><li id="8167" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated"><strong class="lb iu">变量</strong> —快速介绍</li><li id="8c61" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu">全局变量</strong> —如何摆脱<code class="fe nx ny nz oa b"><strong class="lb iu">UnboundLocalError</strong></code></li><li id="aba9" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu">局部变量</strong> —如何摆脱<code class="fe nx ny nz oa b"><strong class="lb iu">NameError</strong></code></li><li id="f183" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated"><strong class="lb iu">非局部变量</strong> —何时以及如何使用它们</li></ul><p id="19ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另外，在开始之前，我必须告诉你一件事。这篇文章的全部代码可以在我的<a class="ae ky" href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Global%2C_Local_and_Nonlocal_variables_in_Python.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> <em class="me"> GitHub 资源库</em> </strong> </a>下面给出:</p><div class="ob oc gp gr od oe"><a href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Global%2C_Local_and_Nonlocal_variables_in_Python.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">塔努-北帕布/Python</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">permalink dissolve GitHub 是超过 5000 万开发人员的家园，他们一起工作来托管和审查代码，管理…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">github.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="5ad9" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">变量</h1><p id="4a6f" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">一个变量更可能是一个<strong class="lb iu"> <em class="me">容器</em> </strong>来存储值。现在要存储的值取决于程序员是使用整数、浮点、字符串还是<a class="ae ky" href="https://www.w3schools.com/python/python_datatypes.asp" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">等</strong> </a>。</p><blockquote class="ot"><p id="9887" class="ou ov it bd ow ox oy oz pa pb pc lu dk translated">变量就像计算机内存中的一个盒子，你可以在里面存储一个值。—阿尔·斯威加特</p></blockquote><blockquote class="pd pe pf"><p id="1c61" class="kz la me lb b lc pg ju le lf ph jx lh pi pj lk ll pk pl lo lp pm pn ls lt lu im bi translated">与其他编程语言不同，在 Python 中，你不需要声明或初始化任何变量。 <em class="it">请阅读</em> <a class="ae ky" href="https://stackoverflow.com/a/11008311/11646278" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">本</strong> </a> <strong class="lb iu">。</strong></p></blockquote><h2 id="dd08" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated"><strong class="ak">语法</strong></h2><p id="8c02" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在 Python 中创建变量的一般语法如下所示:</p><p id="43a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nx ny nz oa b"><strong class="lb iu">variable_name</strong></code> <strong class="lb iu"> </strong> = <code class="fe nx ny nz oa b"><strong class="lb iu">value</strong></code></p><p id="1d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 中的<code class="fe nx ny nz oa b"><strong class="lb iu">variable_name</strong></code> <strong class="lb iu"> </strong>可以简短如<code class="fe nx ny nz oa b"><strong class="lb iu">a, b, x, y, ...</strong></code>也可以信息量很大如<code class="fe nx ny nz oa b"><strong class="lb iu">age, height, name, student_name, covid, ...</strong></code></p><blockquote class="pd pe pf"><p id="ba2b" class="kz la me lb b lc ld ju le lf lg jx lh pi lj lk ll pk ln lo lp pm lr ls lt lu im bi translated"><strong class="lb iu">虽然建议保留一个描述性很强的变量名以提高可读性。</strong></p></blockquote><h2 id="5233" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">规则</h2><p id="d2ea" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated"><strong class="lb iu">一切都设置好了，命名变量时需要遵循一些规则:</strong></p><ul class=""><li id="1bf6" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">变量名必须以字母<strong class="lb iu"><em class="me"/></strong>或下划线字符<strong class="lb iu"><em class="me"/></strong>开头</li><li id="f936" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">变量名不能以<strong class="lb iu"> <em class="me">号</em> </strong>开头</li><li id="01c1" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">变量名只能包含<strong class="lb iu"> <em class="me">字母数字字符</em> </strong>和<strong class="lb iu"> <em class="me">下划线。</em> </strong>例如，任何类似这样的都是有效的:<strong class="lb iu"> <em class="me"> A-z，0–9，以及 _ </em> </strong></li><li id="337d" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">变量名<strong class="lb iu"> <em class="me">区分大小写</em> </strong> ( <strong class="lb iu"> <em class="me">高度</em> </strong>、<strong class="lb iu"> <em class="me">高度</em> </strong>、<strong class="lb iu"> <em class="me">高度</em> </strong>是三个不同的变量名)</li></ul><h2 id="57d9" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">例子</h2><p id="0a40" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">下面给出了一个将值正确初始化为变量的示例:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="7ae3" class="po mn it oa b gy qe qf l qg qh"><strong class="oa iu"># This is a valid and good way to assign a value to a variable<br/># Let's assign values to variables to calculate the area of a circle</strong></span><span id="4f94" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu">pi </strong>= 3.142            <strong class="oa iu"># I could have also used "math" library</strong> <br/><strong class="oa iu">radius </strong>= 5            <strong class="oa iu"># Interger value for radius<br/>area_of_circle </strong>= 0    <strong class="oa iu"># Used to store the value of area of circle</strong></span><span id="6bd2" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu">area_of_circle</strong> = pi * (radius) ** 2        <strong class="oa iu"># Area = (PI * R^2)</strong></span><span id="c3fd" class="po mn it oa b gy qi qf l qg qh">print("The area of the circle is: ", <strong class="oa iu">area_of_circle</strong>)</span></pre><p id="6d1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面代码的输出如下所示:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="a0d1" class="po mn it oa b gy qe qf l qg qh">The area of the circle is:  78.55</span></pre><h2 id="c524" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">图片示例(<em class="qj">快速浏览</em>)</h2><p id="d3c6" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">我相信只要看到一幅图片或一幅图像，就能更快地理解这些概念。下面是存储在内存中的变量的图示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qk"><img src="../Images/428a56842d71432dab06b3e0eb52c715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvv6ffYSxqTtd9wTB3TeKw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd ql">作者 Tanu Nanda Prabhu 的照片</strong></p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qm"><img src="../Images/fea5a58f416c06def398d2337b2a2f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQPtYle_1fHLVXvbpJICBA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">作者 Tanu Nanda Prabhu 的照片</p></figure></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="c280" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">全局变量</h1><h2 id="64ad" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">相同的旧定义</h2><p id="02c2" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在 Python 或者其他任何编程语言中，全局变量的定义保持不变，就是“<strong class="lb iu"> <em class="me">一个在函数外声明的变量叫做全局函数</em> </strong>”。我们可以在函数内部或外部访问一个全局变量。</p><h2 id="ed7b" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">创建一个全局变量并访问它</h2><p id="617e" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">让我们用上面的例子来理解在函数内部和外部访问变量的概念。</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="cb41" class="po mn it oa b gy qe qf l qg qh">pi = 3.142       <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>radius = 5       <strong class="oa iu"># Interger value for radius</strong></span><span id="8f4d" class="po mn it oa b gy qi qf l qg qh">def <strong class="oa iu">circle</strong>():<br/>    area_of_circle = pi * (radius) ** 2<br/>    print("The area of the circle is: ",   area_of_circle)<br/>    circumference_of_circle = 2 * pi * radius</span><span id="9670" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu"># Accessing the global variables outside the function<br/></strong>print("The circumference of the circle: ", circumference_of_circle)<br/><strong class="oa iu"># Accessing the global variables inside the function<br/>circle</strong>()     </span></pre><p id="0130" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述代码的输出如下所示:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="e767" class="po mn it oa b gy qe qf l qg qh">The circumference of the circle:  <strong class="oa iu">31.419999999999998 </strong><br/>The area of the circle is: <strong class="oa iu"> 78.55</strong></span></pre><p id="9ca6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是全局变量的特点。如上例所示，我使用了两个常用变量<code class="fe nx ny nz oa b"><strong class="lb iu">pi</strong></code>和<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>来计算在函数内部声明的圆的面积和在函数外部计算的圆周的面积。对于这两种计算，我们使用相同的公共变量。</p><h2 id="817d" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">详细理解“UnboundLocalError”</h2><p id="ee31" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">现在让我们以同样的老例子为例，尝试将<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>更新 2(乘以 2)</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="72a5" class="po mn it oa b gy qe qf l qg qh">pi = 3.142       <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>radius = 5       <strong class="oa iu"># Interger value for radius</strong></span><span id="024c" class="po mn it oa b gy qi qf l qg qh">def <strong class="oa iu">circle()</strong>:<br/>    radius = radius * 2         <strong class="oa iu"># Update the radius by (x 2)</strong><br/>    area_of_circle = pi * (radius) ** 2<br/>    print("The area of the circle is: ", area_of_circle)</span><span id="c4f5" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu">circle()</strong>     <strong class="oa iu"># Accessing the global variables inside the function</strong></span></pre><p id="65d4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我知道你可能会喜欢“<strong class="lb iu"> <em class="me">没有必要</em> </strong>”这个额外的步骤<code class="fe nx ny nz oa b"><strong class="lb iu">radius = radius * 2</strong></code>我们可以在初始步骤中直接这样做，将半径值指定为 10，即<code class="fe nx ny nz oa b"><strong class="lb iu">radius = 10</strong></code>。我知道，但我正在尝试引入一个概念。请原谅我。</p><p id="a81c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的代码中可以看出，如果您尝试更新半径，然后执行这段代码，您会感到惊讶。不要激动的说“<strong class="lb iu"> <em class="me">我做了</em> </strong>”因为你没有，反而会被一个叫做<code class="fe nx ny nz oa b"><strong class="lb iu">UnboundLocalError</strong></code> <strong class="lb iu">的错误提示。更有可能的错误是这样的。</strong></p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="7dc0" class="po mn it oa b gy qe qf l qg qh"><strong class="oa iu">UnboundLocalError</strong>: local variable '<strong class="oa iu">radius</strong>' referenced before assignment</span></pre><p id="cf56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个错误的原因是变量<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>是局部的，不能像上面那样更新。在这里，你可以把它变成一个全局变量。现在怎么做。请看下面的代码片段。</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="58ef" class="po mn it oa b gy qe qf l qg qh">pi = 3.142       <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>radius = 5       <strong class="oa iu"># Interger value for radius</strong></span><span id="cb9a" class="po mn it oa b gy qi qf l qg qh">def <strong class="oa iu">circle()</strong>:<br/>    <strong class="oa iu">global </strong>radius               <strong class="oa iu"># Making raduis a global variable</strong><br/>    radius = radius * 2         <strong class="oa iu"># Update the radius by (x 2)</strong><br/>    area_of_circle = pi * (radius) ** 2<br/>    print("The area of the circle is: ", area_of_circle)</span><span id="5d9c" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu">circle()</strong>     </span></pre><p id="528a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当您执行代码时，它会顺利执行。因为现在它被明确声明为全局变量。上面代码的输出如下所示:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="424c" class="po mn it oa b gy qe qf l qg qh">The area of the circle is:  <strong class="oa iu">314.2</strong></span></pre><p id="f451" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考验你长远知识的时候到了。两年前在<a class="ae ky" href="https://stackoverflow.com/q/10851906/11646278" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">栈溢出</strong> </a>中有一个关于<code class="fe nx ny nz oa b"><strong class="lb iu">UnboundLocalError</strong></code>的问题。<a class="ae ky" href="https://stackoverflow.com/q/10851906/11646278" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">表单</strong> </a> <strong class="lb iu"> </strong>现已停止接受答案，因为已经有大量答案。你可以跳进去，试着回答它，更清楚地理解它。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="9075" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">局部变量</h1><h2 id="3a48" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">相同的旧定义</h2><p id="33c4" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在 Python 或者其他任何编程语言中，局部变量的定义保持不变，就是“<strong class="lb iu"> <em class="me">在函数内部声明的一个变量称为局部函数</em> </strong>”。我们可以在函数内部访问一个局部变量，但不能在函数外部访问<strong class="lb iu"><em class="me"/></strong>。</p><h2 id="3924" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">创建一个局部变量并访问它</h2><p id="a709" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">我们在函数内部使用局部变量，并不试图在函数外部访问它们。因此得名本地。但好的一面是，我们可以在函数本身中访问这些变量。</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="866b" class="po mn it oa b gy qe qf l qg qh">def <strong class="oa iu">circle</strong>():</span><span id="c5fe" class="po mn it oa b gy qi qf l qg qh">    pi = 3.142    <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>    radius = 5    <strong class="oa iu"># Interger value for radius</strong><br/>    area_of_circle = pi * (radius) ** 2<br/>    print("The area of the circle is: ",   area_of_circle)<br/>    circumference_of_circle = 2 * pi * radius</span><span id="db86" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu"># Accessing the global variables inside the function<br/>circle</strong>()</span></pre><p id="8de6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述代码的输出是:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="f00d" class="po mn it oa b gy qe qf l qg qh">The area of the circle is: <strong class="oa iu"> 78.55</strong></span></pre><p id="9698" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是局部变量的特点。如上例所示，我使用了两个普通变量<code class="fe nx ny nz oa b"><strong class="lb iu">pi</strong></code>和<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>来计算一个函数中声明的圆的面积。所以访问这些变量不会产生任何问题。但是如果我们试图在函数之外访问它们，会发生什么呢？请参见下面的下一节。</p><h2 id="eb0e" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">详细了解“名称错误”</h2><p id="aac1" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">让我们使用上面的同一个例子，并访问函数中声明的变量:</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="d23a" class="po mn it oa b gy qe qf l qg qh">def <strong class="oa iu">circle</strong>():</span><span id="c576" class="po mn it oa b gy qi qf l qg qh">    pi = 3.142    <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>    radius = 5    <strong class="oa iu"># Interger value for radius</strong>    <br/>    area_of_circle = pi * (radius) ** 2<br/>    print("The area of the circle is: ",   area_of_circle)<br/>    circumference_of_circle = 2 * pi * radius</span><span id="4444" class="po mn it oa b gy qi qf l qg qh"><strong class="oa iu"># Accessing the global variables outside the function<br/></strong>print("The circumference of the circle: ", circumference_of_circle)<br/><strong class="oa iu"># Accessing the global variables inside the function<br/>circle</strong>()</span></pre><p id="f4fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你执行上面的代码时，会出现一个<code class="fe nx ny nz oa b"><strong class="lb iu">NameError</strong></code> <strong class="lb iu">的提示。</strong>更有可能的错误是这样的</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="a291" class="po mn it oa b gy qe qf l qg qh"><strong class="oa iu">NameError</strong>: name 'pi' is not defined</span></pre><p id="5759" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个错误的原因是因为我们试图在全局范围内访问局部变量<code class="fe nx ny nz oa b"><strong class="lb iu">pi</strong></code> <strong class="lb iu"> </strong>和<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>，而局部变量只在<code class="fe nx ny nz oa b"><strong class="lb iu">circle</strong>()</code>或局部范围内起作用。有一个办法可以解决，把<code class="fe nx ny nz oa b"><strong class="lb iu">pi</strong></code> <strong class="lb iu"> </strong>和<code class="fe nx ny nz oa b"><strong class="lb iu">radius</strong></code> <strong class="lb iu"> </strong>声明为全局或者在函数外声明。任何函数都可以访问它们。</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="3859" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">非局部变量</h1><h2 id="ecca" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">相同的旧定义</h2><p id="2c1a" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">在 Python 或任何其他编程语言中，我们经常在嵌套函数中使用非局部变量。现在，我所说的嵌套函数是什么意思？</p><h2 id="5edc" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">嵌套函数</h2><p id="2f92" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">通常，嵌套函数是在另一个函数内部声明的一组函数。下面是一个嵌套函数的例子。</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="60db" class="po mn it oa b gy qe qf l qg qh">def <strong class="oa iu">circle</strong>():<br/>    pi = 3.142   <strong class="oa iu"># I could have also used "math" library (math.pi)</strong><br/>    radius = 5   <strong class="oa iu"># Interger value for radius</strong><br/>    area_of_circle = pi * (radius) ** 2</span><span id="6fa0" class="po mn it oa b gy qi qf l qg qh">    def <strong class="oa iu">circumference</strong>():<br/><strong class="oa iu">        # Formula for circumference<br/></strong>        circumference_of_circle = 2 * pi * radius    <br/>        return circumference_of_circle</span><span id="4dc8" class="po mn it oa b gy qi qf l qg qh">    print(<strong class="oa iu">circumference</strong>())    <strong class="oa iu"># Calling the circumference function<br/>    </strong>return area_of_circle</span><span id="8fb2" class="po mn it oa b gy qi qf l qg qh">print(<strong class="oa iu">circle</strong>())     <strong class="oa iu"># Calling the circle function</strong></span></pre><p id="83ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在执行这段代码时，您将得到以下输出</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="83ad" class="po mn it oa b gy qe qf l qg qh"><strong class="oa iu">31.419999999999998 <br/>78.55 </strong></span></pre><h2 id="01ba" class="po mn it bd mo pp pq dn ms pr ps dp mw li pt pu my lm pv pw na lq px py nc pz bi translated">创建一个非局部变量并访问它</h2><p id="16d2" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">现在让我们尝试在<code class="fe nx ny nz oa b"><strong class="lb iu">circumference</strong>()</code>中更新半径 2(乘以 2)。我之所以特别坚持这么做，是因为一旦你写了<code class="fe nx ny nz oa b"><strong class="lb iu">radius = radius * 2</strong></code>并运行代码，你就会得到<code class="fe nx ny nz oa b"><strong class="lb iu">UnboundLocalError</strong></code> <strong class="lb iu"> </strong>的提示。看到这里，你会说<code class="fe nx ny nz oa b"><strong class="lb iu">global radius</strong></code>把它变成一个全局变量，但这次你会得到一个新的错误<code class="fe nx ny nz oa b"><strong class="lb iu">NameError</strong></code>。而现在你会莫名其妙，不知道该怎么办。有一个简单的方法可以解决这个“<strong class="lb iu"> <em class="me">去读一个非局部变量的定义</em> </strong>”。每当有嵌套函数时，你需要使用一个<code class="fe nx ny nz oa b"><strong class="lb iu">nonlocal</strong></code> <strong class="lb iu"> </strong>变量。就这样，问题解决了。下面是创建一个非局部变量并访问它的方法。</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="823b" class="po mn it oa b gy qe qf l qg qh">def <strong class="oa iu">circle</strong>():</span><span id="00ab" class="po mn it oa b gy qi qf l qg qh">    pi = 3.142  <strong class="oa iu"> # I could have also used "math" library (math.pi)</strong><br/>    radius = 5   <strong class="oa iu"># Interger value for radius</strong><br/>    area_of_circle = pi * (radius) ** 2</span><span id="1c44" class="po mn it oa b gy qi qf l qg qh">    def <strong class="oa iu">circumference</strong>():</span><span id="ff3d" class="po mn it oa b gy qi qf l qg qh">        <strong class="oa iu">nonlocal </strong>radius         <strong class="oa iu"># Nonlocal variable</strong><br/>        radius = radius * 2<strong class="oa iu"><br/>        # Formula for circumference<br/></strong>        circumference_of_circle = 2 * pi * radius    <br/>        return circumference_of_circle</span><span id="02ee" class="po mn it oa b gy qi qf l qg qh">    print(<strong class="oa iu">circumference</strong>())    <strong class="oa iu"># Calling the circumference function<br/>    </strong>return area_of_circle</span><span id="b676" class="po mn it oa b gy qi qf l qg qh">print(<strong class="oa iu">circle</strong>())     <strong class="oa iu"># Calling the circle function</strong></span></pre><p id="f561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行这段代码时，您将得到如下输出</p><pre class="kj kk kl km gt qa oa qb qc aw qd bi"><span id="0cda" class="po mn it oa b gy qe qf l qg qh"><strong class="oa iu">62.839999999999996 <br/>78.55 </strong></span></pre></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="684e" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">结论</h1><p id="1e70" class="pw-post-body-paragraph kz la it lb b lc ne ju le lf nf jx lh li ng lk ll lm nh lo lp lq ni ls lt lu im bi translated">这是文章的结尾，标题为“<strong class="lb iu"><em class="me">Python 中的全局、局部和非局部变量</em> </strong>”。我希望你们通过阅读这篇文章学到了一些东西。通过这篇文章，您学习了如何消除两个重要的 Python 错误，如<code class="fe nx ny nz oa b"><strong class="lb iu">NameError</strong></code> <strong class="lb iu"> </strong>和<code class="fe nx ny nz oa b"><strong class="lb iu">UnboundLocalError</strong></code> <strong class="lb iu"> </strong>，这两个错误困扰了您很多年。现在，您可以面带微笑地轻松调试这两个错误，而不会流汗。如果您对本文有任何意见或建议，那么评论区就是您的了。敬请关注更多更新，直到那时再见。保持安全和快乐的编码，下次再见。</p></div></div>    
</body>
</html>