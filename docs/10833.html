<html>
<head>
<title>Stylized Facts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç¨‹å¼åŒ–çš„äº‹å®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/data-whispering-eebb77a422da?source=collection_archive---------38-----------------------#2020-07-28">https://towardsdatascience.com/data-whispering-eebb77a422da?source=collection_archive---------38-----------------------#2020-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6f14" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">ğŸ“ˆPython for finance ç³»åˆ—</h2><div class=""/><div class=""><h2 id="f72e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">ç»Ÿè®¡é¢„æµ‹æœªæ¥éœ€è¦ä»€ä¹ˆï¼Ÿ</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/b2dd296bcfa84f1141f88cac9df06d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UE0HGU_pM2yNIwAcwX2mtw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">åœ¨<a class="ae lh" href="https://creativecommons.org/licenses/publicdomain/" rel="noopener ugc nofollow" target="_blank">å…¬å…±é¢†åŸŸä¸“ç”¨è®¸å¯</a>ä¸‹<a class="ae lh" href="http://skuawk.com/" rel="noopener ugc nofollow" target="_blank">æˆ´å¤«Â·ç”˜è¿ª</a>çš„ç…§ç‰‡</p></figure><p id="f83a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">è­¦å‘Š</strong> : <em class="me">è¿™é‡Œæ²¡æœ‰ç¥å¥‡çš„å…¬å¼æˆ–åœ£æ¯ï¼Œå°½ç®¡ä¸€ä¸ªæ–°çš„ä¸–ç•Œå¯èƒ½ä¼šä¸ºä½ æ‰“å¼€å¤§é—¨ã€‚</em></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="2dee" class="mm mn it bd mo mp mq dn mr ms mt dp mu lr mv mw mx lv my mz na lz nb nc nd iz bi translated">ğŸ“ˆPython For Finance ç³»åˆ—</h2><ol class=""><li id="b687" class="ne nf it lk b ll ng lo nh lr ni lv nj lz nk md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼</a></li><li id="9376" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/better-programming/identifying-outliers-part-two-4c00b2523362" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼â€”ç¬¬äºŒéƒ¨åˆ†</a></li><li id="62cb" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">è¯†åˆ«å¼‚å¸¸å€¼â€”ç¬¬ä¸‰éƒ¨åˆ†</a></li><li id="58d2" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-whispering-eebb77a422da">ç¨‹å¼åŒ–çš„äº‹å®</a></li><li id="53ed" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/@kegui/feature-engineering-feature-selection-8c1d57af18d2" rel="noopener">ç‰¹å¾å·¥ç¨‹&amp;ç‰¹å¾é€‰æ‹©</a></li><li id="eae1" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/data-transformation-e7b3b4268151">æ•°æ®è½¬æ¢</a></li><li id="2d00" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" href="https://medium.com/swlh/fractionally-differentiated-features-9c1947ed2b55" rel="noopener">ç»†å¾®å·®åˆ«ç‰¹å¾</a></li><li id="6243" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/the-triple-barrier-method-251268419dcd">æ•°æ®æ ‡ç­¾</a></li><li id="2bea" class="ne nf it lk b ll np lo nq lr nr lv ns lz nt md nl nm nn no bi translated"><a class="ae lh" rel="noopener" target="_blank" href="/meta-labeling-and-stacking-f17a7f9804ec">å…ƒæ ‡ç­¾å’Œå †å </a></li></ol></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><p id="f65c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬æ€»è¯´â€œè®©æ•°æ®è‡ªå·±è¯´è¯â€ã€‚ä½†æ˜¯æ•°æ®è¦ä¹ˆå¤§å£°å‘¼å–Šï¼Œè¦ä¹ˆä½å£°è€³è¯­ã€‚ä¸€äº›æ•°æ®å±æ€§å¾ˆå®¹æ˜“å‘ç°ï¼Œè€Œå¦ä¸€äº›åˆ™ä¸é‚£ä¹ˆæ˜æ˜¾ï¼Œè¢«æ·¹æ²¡åœ¨å™ªå£°ä¸­ã€‚å°±åƒè€³è¾¹çš„ä½è¯­ï¼Œä½ å¿…é¡»åŠªåŠ›å»ç†è§£ä»–ä»¬åœ¨è¯´ä»€ä¹ˆã€‚ä¸€æ—¦ä½ ä»æ•°æ®ä¸­æ­ç¤ºäº†éšè—çš„ä¿¡æ¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æœ‰æœºä¼šé€šè¿‡åœ¨å½“å‰å¯ç”¨çš„æ•°æ®ä¸­å¯»æ‰¾ä½ è®¤ä¸ºå°†æŒç»­åˆ°æœªæ¥çš„ç»Ÿè®¡æ¨¡å¼æ¥é¢„æµ‹æœªæ¥ã€‚æ¢å¥è¯è¯´ï¼Œæ‰¾å‡ºä¸€ç§æ–¹æ³•ï¼Œè®©æœªæ¥çœ‹èµ·æ¥æ›´åƒç°åœ¨ï¼Œåªæ˜¯æ—¶é—´æ›´é•¿ã€‚æœ¬æ–‡çš„ç›®çš„æ˜¯å‘æ‚¨å±•ç¤ºå¦‚ä½•ä»é€šå¸¸ä¸è¢«æ³¨æ„ä½†å¾ˆæœ‰ç”¨çš„æ•°æ®ä¸­è·å–è¿™äº›å±æ€§ã€‚</p><p id="8d71" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬èŠ±ä¸€åˆ†é’Ÿæ€è€ƒä¸€ä¸ªç®€å•çš„é—®é¢˜:æˆ‘ä»¬å¯ä»¥ä»ä¸€ç»„éšæœºç”Ÿæˆçš„æ•°æ®ä¸­è·å–å¤šå°‘ä¿¡æ¯ã€‚å¤§å¤šæ•°äººå¯èƒ½ä¼šç»™å‡ºä¸€ä¸ªå¾ˆé•¿çš„åˆ—è¡¨ï¼Œæ¯”å¦‚æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼ã€ä¼—æ•°ã€ä¸­ä½æ•°ã€æ–¹å·®ã€æ ‡å‡†å·®ã€èŒƒå›´ã€<em class="me">ç­‰ç­‰ã€‚</em>ã€‚äººè„‘èƒ½è¿›è¡ŒæŠ½è±¡æ€ç»´ï¼Œå…¶ä»–åŠ¨ç‰©åšä¸åˆ°ã€‚è¿™äº›å°±æ˜¯ç»Ÿè®¡æœ‰ç”¨çš„åŸå› ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†æ•°æ®è½¬æ¢æˆå¯¹äººä»¬æœ‰æ„ä¹‰çš„ä¿¡æ¯ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæ¨æ–­å‡ºçš„ä¿¡æ¯å¯ä»¥ç”¨æ¥æ¨æ–­ä¸€äº›ç»éªŒå‘ç°ï¼Œå³é‡‘èä¸­æ‰€è°“çš„<strong class="lk jd">ç¨‹å¼åŒ–çš„ç»éªŒäº‹å®</strong>ã€‚</p><p id="4270" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ¬æ–‡æœ«å°¾å¼•ç”¨çš„ç¨‹å¼åŒ–äº‹å®çš„å®šä¹‰æ˜¯:</p><blockquote class="nu"><p id="6448" class="nv nw it bd nx ny nz oa ob oc od md dk translated">â€œèµ„äº§ä»·æ ¼çœ‹ä¼¼éšæœºçš„å˜åŒ–ç¡®å®æœ‰ä¸€äº›éå¸¸é‡è¦çš„ç»Ÿè®¡ç‰¹æ€§ã€‚è¿™ç§åœ¨å„ç§å·¥å…·ã€å¸‚åœºå’Œæ—¶é—´æ®µä¸­æ™®éå­˜åœ¨çš„ç‰¹æ€§è¢«ç§°ä¸º<strong class="ak">ç¨‹å¼åŒ–çš„ç»éªŒäº‹å®</strong></p></blockquote><p id="d7ca" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´ï¼Œå°±æ˜¯è¯´å¦‚æœä½ æƒ³ç”¨è¿‡å»çš„æ•°æ®æ¥é¢„æµ‹æœªæ¥ï¼Œæœªæ¥çš„æ•°æ®å¿…é¡»å’Œè¿‡å»çš„æ•°æ®æœ‰å…±åŒç‚¹ã€‚å¦åˆ™ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥ï¼Œè¿™äº›æ•°æ®ä¸­è¿‡å»å’Œæœªæ¥çš„å¸¸è§æ¨¡å¼è¢«ç§°ä¸º<strong class="lk jd">ç¨‹å¼åŒ–äº‹å®</strong>ã€‚é‡‘èèµ„äº§ä¸­æœ‰ä¸€ç³»åˆ—å¹¿æ³›çš„<strong class="lk jd">ç¨‹å¼åŒ–äº‹å®</strong>ï¼Œåœ¨å‚è€ƒèµ„æ–™ä¸­ä¹Ÿæœ‰è§£é‡Šã€‚</p><p id="8a57" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">éšç€<strong class="lk jd">ç¨‹å¼åŒ–äº‹å®</strong>çš„å‡ºç°ï¼Œå¦ä¸€ä¸ªæ¦‚å¿µå‡ºç°äº†ï¼Œé™æ­¢ã€‚å¯¹äºæ—¶é—´åºåˆ—æ•°æ®ï¼Œå¹³ç¨³æ—¶é—´åºåˆ—çš„ç»Ÿè®¡ç‰¹æ€§å¦‚å‡å€¼ã€æ–¹å·®ã€è‡ªç›¸å…³ç­‰ã€‚éƒ½æ˜¯ä¸å˜çš„ã€‚å¤§å¤šæ•°ç»Ÿè®¡é¢„æµ‹æ–¹æ³•éƒ½æ˜¯åŸºäºè¿™æ ·çš„å‡è®¾ï¼Œå³é€šè¿‡ä½¿ç”¨æ•°å­¦å˜æ¢å¯ä»¥ä½¿æ—¶é—´åºåˆ—è¿‘ä¼¼å¹³ç¨³ã€‚ç„¶åï¼Œé€šè¿‡åè½¬å…ˆå‰ä½¿ç”¨çš„ä»»ä½•æ•°å­¦å˜æ¢ï¼Œå¯ä»¥â€œä¸å˜æ¢â€å¹³ç¨³åŒ–åºåˆ—çš„é¢„æµ‹ï¼Œä»¥è·å¾—åŸå§‹åºåˆ—çš„é¢„æµ‹ã€‚</p><p id="824f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¥½äº†ï¼Œå…³äºâ€œ<strong class="lk jd">ç¨‹å¼åŒ–çš„äº‹å®â€</strong>å’Œ<strong class="lk jd">â€œå›ºå®šçš„</strong>â€å·²ç»è¯´å¾—å¤Ÿå¤šäº†ï¼Œè®©æˆ‘ä»¬åšä¸€äº›ç¼–ç æ¥è¯´æ˜è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚</p><h1 id="0e17" class="oj mn it bd mo ok ol om mr on oo op mu ki oq kj mx kl or km na ko os kp nd ot bi translated">1.æ•°æ®å‡†å¤‡</h1><p id="9b72" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">ä¸ºäº†ä¿æŒä¸€è‡´ï¼Œåœ¨æ‰€æœ‰çš„<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">ğŸ“ˆPython for finance ç³»åˆ—</a>ï¼Œæˆ‘ä¼šå°½é‡é‡ç”¨ç›¸åŒçš„æ•°æ®ã€‚å…³äºæ•°æ®å‡†å¤‡çš„æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨<a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">è¿™é‡Œ</a>ï¼Œåœ¨<a class="ae lh" href="https://medium.com/@kegui/identifying-outliers-part-two-4c00b2523362" rel="noopener">è¿™é‡Œ</a>ï¼Œåœ¨<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="01d6" class="mm mn it oy b gy pc pd l pe pf"><em class="me">#import all the libraries</em><br/>import pandas as pd<br/>import numpy as np<br/>import seaborn as sns <br/>import scipy.stats as scs</span><span id="3458" class="mm mn it oy b gy pg pd l pe pf">import yfinance as yf  <em class="me">#the stock data from Yahoo Finance</em></span><span id="936e" class="mm mn it oy b gy pg pd l pe pf">import matplotlib.pyplot as plt #set the parameters for plotting<br/>plt.style.use('seaborn')<br/>plt.rcParams['figure.dpi'] = 300</span><span id="0fa0" class="mm mn it oy b gy pg pd l pe pf">df = yf.download('AAPL',<br/>                 start = '2000-01-01',<br/>                 end= '2010-12-31') #download Apple stock price</span><span id="0170" class="mm mn it oy b gy pg pd l pe pf">d1 = pd.DataFrame(df['Adj Close'])#create a df with only stock price<br/>d1.rename(columns={'Adj Close':'adj_close'}, inplace=True)<br/>d1['simple_rtn']=d1.adj_close.pct_change()#percentage return<br/>d1['log_rtn'] = np.log(d1.adj_close/d1.adj_close.shift(1))<br/>#log return with 1 day lag</span><span id="65c6" class="mm mn it oy b gy pg pd l pe pf">d1.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/d2d43801cfe7dd3907a7b85e04d28774.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/format:webp/1*Db39tgmXnea__YO9Ogcftg.png"/></div></figure><p id="ea79" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘æƒ³äº‰è®ºçš„å¦ä¸€ä»¶äº‹æ˜¯å»é™¤å¼‚å¸¸å€¼ï¼Œæˆ‘ä½¿ç”¨ç®€å•çš„å¹³å‡å€¼å’Œ 2 å€çš„æ ‡å‡†å·®æ¥è®¾å®šè¾¹ç•Œã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="b613" class="mm mn it oy b gy pc pd l pe pf"><em class="me">#get mean and std</em><br/>mu = d1.describe().loc['mean', 'log_rtn']<br/>sigma = d1.describe().loc['std', 'log_rtn']</span><span id="479f" class="mm mn it oy b gy pg pd l pe pf">condition = (d1['log_rtn'] &gt; mu + sigma * 2) | (d1['log_rtn'] &lt; mu - sigma * 2) #set the condition to be 2 times of std around mean<br/>d1['outliers'] = np.where(condition, 1, 0)#like an if, else <br/>d1.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/3f4a2bbc3a78ae8a379122f10096a3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*y9WYDOAwjUnQZE_U5q8KQg.png"/></div></figure><p id="f84d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç„¶åï¼Œæˆ‘å»é™¤æ‰€æœ‰çš„å¼‚å¸¸å€¼ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="2cc2" class="mm mn it oy b gy pc pd l pe pf"><em class="me">#using pd's bool selection to remove outliers</em><br/>d1_removed_outliers = d1.loc[d1['outliers'] == 0].iloc[:, :-1]<br/>d1_removed_outliers.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/9c36168b5fa2cf497dda2f38a9b4df73.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*nhBlgoQoZ9oHaYev_F64DA.png"/></div></figure><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="bc2f" class="mm mn it oy b gy pc pd l pe pf">d1_removed_outliers.info()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/4c807ca0430ce20c5c1c84d32eabdb44.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*21hvrPoSwDs7pbLusMECxg.png"/></div></figure><p id="e181" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚ä½ æ‰€è§ï¼Œ2765 ä¸ªæ•°æ®ç‚¹ä¸­è¿˜å‰© 2667 ä¸ªæ•°æ®ç‚¹ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œè®©æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ d1 ä½œä¸ºæ•°æ®å¸§åç§°ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="9d42" class="mm mn it oy b gy pc pd l pe pf">d1 = d1_removed_outliers</span></pre><p id="b13b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åŒæ ·ï¼Œå¦‚ä½•å»é™¤å¼‚å¸¸å€¼çš„æ‰€æœ‰ç»†èŠ‚éƒ½å¯ä»¥åœ¨<a class="ae lh" href="https://medium.com/python-in-plain-english/identifying-outliers-part-one-c0a31d9faefa" rel="noopener">è¿™é‡Œ</a>ã€<a class="ae lh" href="https://medium.com/@kegui/identifying-outliers-part-two-4c00b2523362" rel="noopener">è¿™é‡Œ</a>å’Œ<a class="ae lh" href="https://medium.com/swlh/identifying-outliers-part-three-257b09f5940b" rel="noopener">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p><p id="932d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¯¹æ•°å›æŠ¥å’Œç®€å•ç™¾åˆ†æ¯”å›æŠ¥ä¹‹é—´çš„å·®å¼‚å¯ä»¥åœ¨<a class="ae lh" href="https://people.duke.edu/~rnau/411log.htm" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå˜é‡è‡ªç„¶å¯¹æ•°çš„å¾®å°å˜åŒ–å¯ä»¥ç›´æ¥è§£é‡Šä¸ºç™¾åˆ†æ¯”å˜åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦å˜åŒ–è¶³å¤Ÿå°(åœ¨+/- 5%çš„èŒƒå›´å†…)ï¼Œç™¾åˆ†æ¯”å˜åŒ–å’Œè‡ªç„¶å¯¹æ•°å˜åŒ–å‡ ä¹å®Œå…¨ç›¸åŒã€‚äº‹å®ä¸Šï¼Œå¦‚ä¸Šè¡¨æ‰€ç¤ºï¼Œ<code class="fe pl pm pn oy b">simple_rtn</code>å’Œ<code class="fe pl pm pn oy b">log_rtn</code>ä¸­çš„æ•°å­—éå¸¸æ¥è¿‘ã€‚</p><p id="cdcd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬å¯ä»¥æ£€æŸ¥ simple_rtn å’Œ log_rtn çš„ç›¸å…³æ€§ï¼Œ</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="bfaf" class="mm mn it oy b gy pc pd l pe pf">#calculate the pearson correlation<br/>d1[['simple_rtn', 'log_rtn']].corr()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi po"><img src="../Images/5a095e3aefbf0c251a8a1e227dafb773.png" data-original-src="https://miro.medium.com/v2/resize:fit:412/format:webp/1*iOOU81ldDLwhodxFJ_oRPw.png"/></div></figure><p id="da2d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™ä¸¤ç§å›æŠ¥é«˜åº¦ç›¸å…³ã€‚ä»çƒ­å›¾ä¸­ç”šè‡³å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡º:</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="4045" class="mm mn it oy b gy pc pd l pe pf">#draw heatmap with seaborne<br/>cmap = sns.diverging_palette(220, 20, as_cmap=True)<br/>ax = sns.heatmap(corr, annot=True, cmap=cmap,<br/>                 square=True, linewidths=3,<br/>                 linecolor='w')<br/>ax.set_title('Autocorrelation Plots', fontsize=26)<br/>sns.set(font_scale=2);</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/61e3ea64315739268870b7a88b2a21a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*T8HqFtjNGjYW3vuy8yF4ug.png"/></div></figure><p id="cc35" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å…³äºç†ŠçŒ«çš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¾ˆå®¹æ˜“ç›´æ¥å¾—åˆ°é‚£äº›æè¿°æ€§çš„ç»Ÿè®¡æ•°æ®ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="7fcc" class="mm mn it oy b gy pc pd l pe pf">d1.describe().round(4)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/051d2e33a8646b07c8aedfc390555ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*tfEP2w_pyeOrHuKvPT1OVw.png"/></div></figure><h1 id="7312" class="oj mn it bd mo ok ol om mr on oo op mu ki oq kj mx kl or km na ko os kp nd ot bi translated">2.æ”¶ç›Šçš„æ­£æ€(é«˜æ–¯)åˆ†å¸ƒ</h1><p id="eb97" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">è®¨è®ºæœ€å¤šçš„<strong class="lk jd">ç¨‹å¼åŒ–äº‹å®ä¹‹ä¸€</strong>æ˜¯æ”¶ç›Šçš„æ­£æ€(é«˜æ–¯)åˆ†å¸ƒã€‚å¤§é‡é‡è¦çš„é‡‘èæ¨¡å‹éƒ½æ˜¯å»ºç«‹åœ¨è‚¡ç¥¨æ”¶ç›Šæ˜¯æ­£æ€åˆ†å¸ƒçš„å‡è®¾ä¸Šï¼Œè€Œä½ åœ¨æœ¬æ–‡ç»“å°¾ä¼šçœ‹åˆ°ï¼Œå¯èƒ½å¹¶ä¸æ˜¯è¿™æ ·ã€‚å› æ­¤ï¼Œæ­£æ€åˆ†å¸ƒå¯ä»¥è¢«è®¤ä¸ºæ˜¯é‡‘èä¸­æœ€é‡è¦çš„åˆ†å¸ƒä¹‹ä¸€ï¼Œä¹Ÿæ˜¯è®¸å¤šé‡‘èç†è®ºçš„ä¸»è¦ç»Ÿè®¡æ„ä»¶ä¹‹ä¸€ã€‚</p><p id="7868" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬æ¥çœ‹çœ‹è°ƒæ•´åä»·æ ¼ã€ç™¾åˆ†æ¯”å›æŠ¥ã€è‡ªç„¶å¯¹æ•°å›æŠ¥çš„æ­£æ€æ€§ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥ä»<code class="fe pl pm pn oy b">d1.describe()</code>ä¸­æå–æè¿°æ€§ç»Ÿè®¡æ•°æ®</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="5049" class="mm mn it oy b gy pc pd l pe pf"><em class="me">#extract all the stats from describe() function</em><br/>def extract_data_stats(col):<br/>    d_stat = col.describe()<br/>    mu = d_stat['mean']<br/>    sigma = d_stat['std']<br/>    rtn_range = np.linspace(d_stat['min'], d_stat['max'], num=1000)<br/>    norm_pdf = scs.norm.pdf(rtn_range, loc=mu, scale=sigma)<br/>    <br/>    return mu, sigma, rtn_range, norm_pdf</span></pre><p id="3dcc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å‡†å¤‡å¥½å¹³å‡å€¼ã€æ ‡å‡†å·®å’Œæ­£æ€æ¦‚ç‡å¯†åº¦å‡½æ•°(PDF)åï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶ç›´æ–¹å›¾å’Œ PDFã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="0596" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">draw the histogram with Probability Density Function</em><br/>def draw_hist(col, xlim=(-0.2, 0.2)):<br/>    mu, sigma, rtn_range, norm_pdf = extract_data_stats(col)</span><span id="3e2f" class="mm mn it oy b gy pg pd l pe pf">    sns.distplot(col, kde=True, norm_hist=True, label='Hist')   <br/>    plt.plot(rtn_range, norm_pdf, 'r', lw=3, <br/>             label=f'N({mu:.3f}, {sigma**2:.4f})')<br/>    plt.axvline(x=0, c='c',linestyle='--', lw=3)<br/>    plt.title(f'Distribution of {col.name}', fontsize=24)<br/>    plt.xlim(xlim)<br/>    plt.legend(loc='upper right', fontsize=20, <br/>               frameon=True,fancybox=True, <br/>               framealpha=1, shadow=True, borderpad=1);</span></pre><p id="aa41" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç™¾åˆ†æ¯”å›æŠ¥çš„ç›´æ–¹å›¾å’Œ PDFã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="b229" class="mm mn it oy b gy pc pd l pe pf">draw_hist(d1.simple_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pr"><img src="../Images/0e8282517e8ae0afe5436841a6a9fa35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfjsJttOL3u2jxbPH9yHtA.png"/></div></div></figure><p id="873f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è‡ªç„¶å¯¹æ•°æ”¶ç›Šç‡çš„ç›´æ–¹å›¾å’Œ PDFã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="44bd" class="mm mn it oy b gy pc pd l pe pf">draw_hist(d1.log_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ps"><img src="../Images/65f466e649962c1a0a4b4465e6371398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69s0tv4OoUyEeUCIaH5UeQ.png"/></div></div></figure><p id="266b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è°ƒæ•´åä»·æ ¼çš„ç›´æ–¹å›¾å’Œ PDFã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="ef7a" class="mm mn it oy b gy pc pd l pe pf">draw_hist(d1.adj_close,xlim=(-10,50))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ps"><img src="../Images/052a4a6611707d428db727806e656776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1kKezkwSzTSaM5dDiKouQ.png"/></div></div></figure><p id="56b8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ˜¾ç„¶ï¼Œè‚¡ç¥¨ä»·æ ¼æœ‰è¶‹åŠ¿æˆ–å‘¨æœŸï¼Œè¿™ä½¿å…¶è¿œç¦»æ­£æ€åˆ†å¸ƒã€‚ç„¶è€Œï¼Œå¯¹æ•°å›æŠ¥ç‡å’Œç™¾åˆ†æ¯”å›æŠ¥ç‡éå¸¸ç›¸ä¼¼ï¼Œæ¥è¿‘æ­£å¸¸æ°´å¹³ã€‚ä½†æ˜¯å¸¸æ€èƒ½è¢«æ£€éªŒå—ï¼Ÿ</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="512b" class="mm mn it bd mo mp mq dn mr ms mt dp mu lr mv mw mx lv my mz na lz nb nc nd iz bi translated">âœTipï¼</h2><p id="b07b" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated"><em class="me">ä»¥é˜²ä½ çš„å›¾çœ‹èµ·æ¥ä¸ä¸€æ ·ï¼Œè¿™é‡Œæ˜¯æˆ‘ä½¿ç”¨çš„</em> <code class="fe pl pm pn oy b"><em class="me">matplotlib</em></code> <em class="me">å‚æ•°:</em></p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="297b" class="mm mn it oy b gy pc pd l pe pf">plt.rcParams['figure.figsize'] = [16, 9]<br/>plt.rcParams['figure.dpi'] = 300<br/>plt.rcParams['font.size'] = 20<br/>plt.rcParams['axes.labelsize'] = 20<br/>plt.rcParams['axes.titlesize'] = 24<br/>plt.rcParams['xtick.labelsize'] = 16<br/>plt.rcParams['ytick.labelsize'] = 16<br/>plt.rcParams['font.family'] = 'serif'</span></pre><p id="3535" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å…³äº<code class="fe pl pm pn oy b">matplotlib</code>çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®<a class="ae lh" href="https://medium.com/python-in-plain-english/everything-about-plotting-in-python-c12ccdc359bc" rel="noopener">ğŸ‘‰Python ä¸­å…³äºç»˜å›¾çš„ä¸€åˆ‡</a>ã€‚</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="84b7" class="oj mn it bd mo ok pt om mr on pu op mu ki pv kj mx kl pw km na ko px kp nd ot bi translated">3.ç»¼åˆé«˜æ–¯æ€§</h1><p id="49b8" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">æœ‰ä¸€ä¸ª<strong class="lk jd">ç¨‹å¼åŒ–çš„äº‹å®</strong>æ¥è‡ªä¸å¸¸æ€ç›¸å…³çš„æ–‡ç« æœ«å°¾çš„å¼•ç”¨ï¼Œå®ƒè¯´:</p><blockquote class="nu"><p id="95da" class="nv nw it bd nx ny nz oa ob oc od md dk translated">"4.éšç€è®¡ç®—æ”¶ç›Šçš„æ—¶é—´å°ºåº¦çš„å¢åŠ ï¼Œå®ƒä»¬çš„åˆ†å¸ƒçœ‹èµ·æ¥è¶Šæ¥è¶Šåƒæ­£æ€åˆ†å¸ƒã€‚ç‰¹åˆ«æ˜¯ï¼Œåœ¨ä¸åŒçš„æ—¶é—´å°ºåº¦ä¸Šï¼Œåˆ†å¸ƒçš„å½¢çŠ¶å¹¶ä¸ç›¸åŒã€‚â€</p></blockquote><p id="4f35" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦ç«™å¾—ä½è„šã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ•°æ®æ¡†æ¶æ¥ä¿å­˜æ‰€æœ‰æ»åçš„è‚¡ç¥¨ä»·æ ¼å›æŠ¥ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="c976" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">get 5 days lagged return by a for loop</em><br/>df_simple_rtn = pd.DataFrame(d1['adj_close'])<br/>lags = 5</span><span id="2aa8" class="mm mn it oy b gy pg pd l pe pf">for lag in range(1, lags+1):<br/>    col = f'lag_{lag}_simple_rtn'<br/>    df_simple_rtn[col] = df_simple_rtn['adj_close']. \<br/>                         pct_change(periods=lag)<br/>    <br/>df_simple_rtn.dropna(inplace=True)<br/>df_simple_rtn.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi py"><img src="../Images/60243832bd573a1ccaaf774aa04bb703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*KPBBjkq4SsdR4zeUkUhrHA.png"/></div></figure><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="2eae" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">get 5 days lagged return by a for loop</em><br/>df_log_rtn = pd.DataFrame(d1['adj_close'])<br/>lags = 5</span><span id="c82c" class="mm mn it oy b gy pg pd l pe pf">for lag in range(1, lags+1):<br/>    col = f'lag_{lag}_log_rtn'<br/>    df_log_rtn[col] = np.log(df_log_rtn['adj_close']/\<br/>    df_log_rtn['adj_close'].shift(lag))<br/>    <br/>                <br/>df_log_rtn.dropna(inplace=True)<br/>df_log_rtn.head()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/6266e493e9a5e39b2f8b9a0df836c3cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*WtRmAaT3M3D_ZrpLDtiG2Q.png"/></div></figure><p id="e333" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹å‰é¢çš„å‡½æ•°<code class="fe pl pm pn oy b">draw_hist()</code>æ¥ç»˜åˆ¶ç›´æ–¹å›¾å’Œ PDFï¼Œèµ‹äºˆå®ƒä¸€æ¬¡ç»˜åˆ¶å¤šä¸ªå›¾çš„é¢å¤–èƒ½åŠ›ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="0705" class="mm mn it oy b gy pc pd l pe pf">#using ax to draw multi-grahps<br/>def draw_hist_multi(col, xlim=(-0.2, 0.2), ax=None):<br/>    mu, sigma, rtn_range, norm_pdf = extract_data_stats(col)</span><span id="1f19" class="mm mn it oy b gy pg pd l pe pf">    sns.distplot(col, kde=True, norm_hist=True, \<br/>                 label='Hist', ax=ax)   <br/>    ax.plot(rtn_range, norm_pdf, 'r', lw=3, \<br/>            label=f'N({mu:.3f}, {sigma**2:.4f})')<br/>    ax.axvline(x=0, c='c',linestyle='--', lw=3)<br/>  #<em class="me">adj_close x axis range is wider </em><br/>    if ( col.name == 'adj_close'):<br/>        ax.set_xlim(-10,50)<br/>    else:<br/>        ax.set_xlim(xlim)<br/>    ax.legend(loc='upper right', fontsize=8, <br/>              frameon=True,fancybox=True);</span></pre><p id="943d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œæˆ‘ç”¨<code class="fe pl pm pn oy b">ax</code>è€Œä¸æ˜¯<code class="fe pl pm pn oy b">plt</code>æ¥ç”»è¿™äº›å›¾ï¼ŒåŸå› åœ¨<a class="ae lh" href="https://medium.com/python-in-plain-english/everything-about-plotting-in-python-c12ccdc359bc" rel="noopener">ä¸­æœ‰å¾ˆå¥½çš„è§£é‡ŠğŸ‘‰<strong class="lk jd"> <em class="me">ç”¨ Python </em> </strong> </a>è°‹åˆ’ä¸€åˆ‡ã€‚</p><p id="1730" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„æƒ…èŠ‚æ”¾åœ¨ä¸€ä¸ªæœ‰ 2Ã—3 ä¸ªæ”¯çº¿æƒ…èŠ‚çš„å•ä¸€å›¾å½¢ä¸­ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="f54f" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">create subplots figure with each plot drawed by draw_hist_multi()</em> <br/>def draw_hist_subplots(df):<br/>    fig, axs = plt.subplots(nrows=2, ncols=3, figsize=(16,9))<br/>    fig.subplots_adjust(hspace = .5) #wspace=.001<br/>    fig.suptitle('Distribution of returns with increased \<br/>                 time scale', fontsize=24)<br/>                <br/>    axs = axs.ravel()<br/>    for i, col in enumerate(df.columns):<br/>        draw_hist_multi(df[col], ax=axs[i])</span></pre><p id="47c6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ç»˜åˆ¶å¤šä¸ªæ”¯çº¿å‰§æƒ…çš„å…³é”®æ˜¯ä½¿ç”¨<code class="fe pl pm pn oy b">axs = axs.ravel()</code>ï¼Œé€šè¿‡å±•å¹³æ”¯çº¿å‰§æƒ…çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥é€ä¸ªéå†æ‰€æœ‰æ”¯çº¿å‰§æƒ…ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="ede5" class="mm mn it oy b gy pc pd l pe pf">draw_hist_subplots(df_simple_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pr"><img src="../Images/55252464b4c914b637e72da7bbb0ef09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GEwMyyCmMP7_sYQbSQXeZg.png"/></div></div></figure><p id="90bc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨è‡ªç„¶å¯¹æ•°å›æŠ¥æ–¹é¢ï¼Œå’Œé¢„æœŸçš„ä¸€æ ·ï¼Œæ²¡æœ‰æ˜æ˜¾çš„åŒºåˆ«ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="7548" class="mm mn it oy b gy pc pd l pe pf">draw_hist_subplots(df_log_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qa"><img src="../Images/5fe664ed47d0e9fe89e549007f5aec07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9h27rqU368hyhV43wMwIjg.png"/></div></div></figure><p id="13b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä»æ»åå¯¹æ•°å’Œç™¾åˆ†æ¯”å›æŠ¥æ¥çœ‹ï¼Œçš„ç¡®ï¼Œéšç€è®¡ç®—å›æŠ¥çš„æ—¶é—´å°ºåº¦çš„å¢åŠ ï¼Œå®ƒä»¬çš„åˆ†å¸ƒçœ‹èµ·æ¥è¶Šæ¥è¶Šåƒæ­£æ€åˆ†å¸ƒã€‚ç‰¹åˆ«æ˜¯ï¼Œåœ¨ä¸åŒçš„æ—¶é—´å°ºåº¦ä¸Šï¼Œåˆ†å¸ƒçš„å½¢çŠ¶å¹¶ä¸ç›¸åŒã€‚</p><h1 id="effa" class="oj mn it bd mo ok ol om mr on oo op mu ki oq kj mx kl or km na ko os kp nd ot bi translated">4.æ­£è§„æ€§æ£€éªŒ</h1><p id="b6c8" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">ä»ä¸Šé¢çš„å›¾è¡¨æ¥çœ‹ï¼Œå°½ç®¡è¶‹åŠ¿å¾ˆæ˜æ˜¾ï¼Œä½†å®é™…ä¸Šå¾ˆéš¾åˆ¤æ–­å¸¸æ€ã€‚é€šè¿‡åˆ©ç”¨<code class="fe pl pm pn oy b">scipy.stats</code>åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æè¿°æ€§ç»Ÿè®¡è¿›è¡Œæ›´ä¸¥æ ¼çš„æ­£æ€æ€§æ£€éªŒã€‚</p><p id="5cc9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨æˆ‘ä»¬å¼€å§‹åšæ­£æ€æ€§æ£€éªŒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸¤ä¸ªæ¦‚å¿µã€‚åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œåæ–œåº¦æ˜¯æ¦‚ç‡åˆ†å¸ƒä¸­å¯¹ç§°é’Ÿå½¢æ›²çº¿çš„æ‰­æ›²ç¨‹åº¦ã€‚è€Œå³°åº¦æ˜¯æµ‹é‡åˆ†å¸ƒçš„å³°å€¼å’Œå¹³å¦åº¦ã€‚å›æŠ¥åˆ†å¸ƒçš„é«˜å³°å€¼å’Œåæ–œåº¦æ„å‘³ç€æŠ•èµ„è€…å°†å¶å°”ç»å†æç«¯å›æŠ¥(æ­£æˆ–è´Ÿ)ã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qb"><img src="../Images/f415f59340ff822bf529bdb5c61d0717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*KU--fOzWiOzyeVovI4_rsQ.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd qc">æ­£è´Ÿå³°åº¦</strong></p></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qd"><img src="../Images/185ec50531686b88de99bda3fe45c69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4l8_v9zCznbIId_U3HLbw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd qc">æ­£è´Ÿåæ–œåº¦</strong></p></figure><p id="b732" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¯¹äºæ­£æ€åˆ†å¸ƒçš„æ•°æ®ï¼Œåæ–œåº¦åº”è¯¥å¤§çº¦ä¸ºé›¶ã€‚<br/>å¤§äºé›¶çš„ååº¦å€¼æ„å‘³ç€åˆ†å¸ƒçš„å³å°¾æœ‰æ›´å¤šçš„æƒé‡ï¼Œ<em class="me">åä¹‹äº¦ç„¶</em>ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="a176" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">using DataFrame to contain all the stats</em><br/>def build_stats(df):<br/>    stats = pd.DataFrame({'skew':scs.skew(df),<br/>                 'skew_test':scs.skewtest(df)[1],<br/>                 'kurtosis': scs.kurtosis(df),<br/>                 'kurtosis_test' : scs.kurtosistest(df)[1],<br/>                 'normal_test' : scs.normaltest(df)[1]},<br/>                  index = df.columns)<br/>    return stats</span></pre><p id="2ff0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¯¹äºç™¾åˆ†æ¯”å›æŠ¥</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="fc41" class="mm mn it oy b gy pc pd l pe pf">build_stats(df_simple_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/fb7cc576a03fc617d2f4b1198cd992d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*QW5YCXp30IDcGTntUnom2g.png"/></div></figure><p id="cf01" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¯¹äºæ—¥å¿—è¿”å›</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="0ac6" class="mm mn it oy b gy pc pd l pe pf">build_stats(df_log_rtn)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qf"><img src="../Images/0e94d8648321fdb23aaffcc90c93240a.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*gqxkj1CNoxx8iALHqYpU0g.png"/></div></figure><p id="d739" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ‰€æœ‰çš„<em class="me">p</em>-å€¼éƒ½è¿œä½äº 0.05ï¼Œæ¥è¿‘äºé›¶ã€‚å…·æœ‰ç»Ÿè®¡æ˜¾è‘—æ€§çš„æµ‹è¯•ç»“æœ(<em class="me">p</em>-å€¼â‰¤ 0.05)æ„å‘³ç€æµ‹è¯•å‡è®¾æ˜¯é”™è¯¯çš„æˆ–è€…åº”è¯¥è¢«æ‹’ç»ã€‚ä¸€ä¸ª<em class="me">p</em>-å€¼å¤§äº 0.05 æ„å‘³ç€æ²¡æœ‰è§‚å¯Ÿåˆ°å½±å“ã€‚å½“<em class="me">p</em>-å€¼ä¸ºé›¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ‹’ç»é›¶å‡è®¾ï¼Œå³æ ·æœ¬æ•°æ®çš„è¿”å›å…·æœ‰ä¸é«˜æ–¯åˆ†å¸ƒç›¸åŒ¹é…çš„åæ–œåº¦å’Œå³°åº¦ã€‚</p><p id="4e8e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘æ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå¯¹æ•°æ”¶ç›Šçš„åæ–œåº¦å’Œå³°åº¦çš„ç»å¯¹å€¼å®é™…ä¸Šæ¯”ç™¾åˆ†æ¯”æ”¶ç›Šçš„è¦å¤§ã€‚å‰”é™¤å¼‚å¸¸å€¼åï¼Œå‡å€¼å˜å¤§ï¼Œæ ‡å‡†å·®å˜å°ï¼Œååº¦å’Œå³°åº¦æ²¡æœ‰å˜åŒ–ã€‚</p><h1 id="e235" class="oj mn it bd mo ok ol om mr on oo op mu ki oq kj mx kl or km na ko os kp nd ot bi translated">5.äº’ç›¸å…³å’Œè‡ªç›¸å…³</h1><p id="2dc0" class="pw-post-body-paragraph li lj it lk b ll ng kd ln lo nh kg lq lr ou lt lu lv ov lx ly lz ow mb mc md im bi translated">åœ¨è¿™ç¯‡æ–‡ç« ç»“æŸä¹‹å‰ï¼Œæˆ‘æƒ³å¿«é€Ÿæµè§ˆä¸€ä¸‹æ»åå›æŠ¥çš„ç›¸å…³æ€§ï¼Œå¦‚ä¸‹é¢çš„å‚è€ƒæ–‡çŒ®ä¸­æ‰€è¿°ã€‚</p><blockquote class="nu"><p id="6587" class="nv nw it bd nx ny nz oa ob oc od md dk translated">"1.ç¼ºä¹è‡ªç›¸å…³æ€§:(çº¿æ€§)èµ„äº§å›æŠ¥çš„è‡ªç›¸å…³æ€§é€šå¸¸æ˜¯ä¸æ˜æ˜¾çš„ï¼Œé™¤äº†éå¸¸å°çš„æ—¥å†…æ—¶é—´èŒƒå›´(20 åˆ†é’Ÿ)ä¹‹å¤–ï¼Œå¾®è§‚ç»“æ„æ•ˆåº”åœ¨è¿™ç§æ—¶é—´èŒƒå›´å†…å‘æŒ¥ä½œç”¨ã€‚â€</p></blockquote><p id="79ec" class="pw-post-body-paragraph li lj it lk b ll oe kd ln lo of kg lq lr og lt lu lv oh lx ly lz oi mb mc md im bi translated">å°±ç›¸å…³æ€§è€Œè¨€ï¼Œæœ‰ 3 ç§ä¸åŒçš„ç±»å‹ï¼Œäº’ç›¸å…³ã€è‡ªç›¸å…³å’Œå¾ªç¯ç›¸å…³ã€‚</p><p id="b041" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç™¾åˆ†æ¯”å›æŠ¥çš„äº¤å‰ç›¸å…³æ€§ä¸º</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="6931" class="mm mn it oy b gy pc pd l pe pf">corr_s = df_simple_rtn.corr()<br/>corr_s</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qg"><img src="../Images/556d36fc9f400f3616310a1178dfd99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0j3_nTEUEy0fvC-0eMEhwg.png"/></div></div></figure><p id="4e10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å’Œæ—¥å¿—è¿”å›çš„ç›¸å…³æ€§</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="9c38" class="mm mn it oy b gy pc pd l pe pf">corr_l = df_log_rtn.corr()<br/>corr_l</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qh"><img src="../Images/c4c9a7b0bb46a23fcb7213bc1fa13a5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/format:webp/1*iji1r3OikppADd3gsS2nMQ.png"/></div></div></figure><p id="5c92" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç™¾åˆ†æ¯”å›æŠ¥å’Œå¯¹æ•°å›æŠ¥çš„äº’ç›¸å…³æ€§éƒ½éšæ—¶é—´è€Œä¸‹é™ã€‚å¦‚çƒ­å›¾æ‰€ç¤ºã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="7fa0" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">using seaborne to draw heatmap</em><br/>sns.set(style="white")<br/>cmap = sns.diverging_palette(220, 20, as_cmap=True)<br/>ax = sns.heatmap(corr_s, annot=True, cmap=cmap,<br/>                 square=True, linewidths=3,<br/>                 linecolor='w')<br/>ax.set_title('Correlation Plots', fontsize=32)<br/>ax.set_xticklabels(<br/>    ax.get_xticklabels(),<br/>    rotation=45,<br/>    horizontalalignment='right');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qi"><img src="../Images/b3d63b29eea3f6cb51f1f6ba351cfd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*v18ky-zLOUF_ZwUfhGyWrQ.png"/></div></figure><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="7c2c" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">using seaborne to draw heatmap</em><br/>sns.set(style="white")<br/>cmap = sns.diverging_palette(220, 20, as_cmap=True)<br/>ax = sns.heatmap(corr_l, annot=True, cmap=cmap,<br/>                 square=True, linewidths=3,<br/>                 linecolor='w')<br/>ax.set_title('Correlation Plots', fontsize=32)<br/>ax.set_xticklabels(<br/>    ax.get_xticklabels(),<br/>    rotation=45,<br/>    horizontalalignment='right');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qj"><img src="../Images/2d8edfc764c4c3dbca7c5422402ee1be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*guHPCdRYrYNmA1iVTYDSFA.png"/></div></figure><p id="7dd2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸€å¤©æ»å(ä¹‹å‰æˆ–ä¹‹å)çš„å›æŠ¥çš„å¤§å¤šæ•°ç›¸å…³æ€§æ˜¯ç›¸å…³çš„ï¼Œå› ä¸ºå®ƒä»¬çš„ç³»æ•°è¶…è¿‡ 0.8ã€‚ä½†æ˜¯è¿™ç§ç›¸å…³æ€§å¾ˆå¿«å°±æ¶ˆå¤±äº†ã€‚</p><p id="c77c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»ç„¶å¾ˆéš¾å®Œå…¨ç†è§£è‡ªç›¸å…³æ€§ï¼Œå°½ç®¡ç»˜åˆ¶è‡ªç›¸å…³æ€§å¾ˆå®¹æ˜“ã€‚</p><pre class="ks kt ku kv gt ox oy oz pa aw pb bi"><span id="c2a5" class="mm mn it oy b gy pc pd l pe pf">#<em class="me">draw autocorrelation for log return with 50 days time lag</em><br/>from statsmodels.graphics.tsaplots import plot_acf<br/>fig, ax = plt.subplots()<br/>acf = plot_acf(d1.log_rtn, lags=50, ax=ax) <br/>ax.set_xlabel('lags')                          <br/>ax.set_ylabel('auto-correlation');</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi qk"><img src="../Images/90dec09d35ba04d1fd32078507cd2f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*gFZ_mhifOZ2bP1QFlkVbUQ.png"/></div></figure><p id="fab4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚æœä½ èƒ½è§£é‡Šä¸€ä¸‹è‡ªç›¸å…³ã€äº’ç›¸å…³å’Œéƒ¨åˆ†è‡ªç›¸å…³ï¼Œå¹¶åœ¨ä¸‹é¢ç•™ä¸‹ä½ çš„è¯„è®ºï¼Œæˆ‘å°†ä¸èƒœæ„Ÿæ¿€ï¼Œè°¢è°¢ã€‚ </p><p id="0d19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå¦‚ä½•æŠŠä½ çš„å›æŠ¥è½¬ç§»åˆ°ä¸€ä¸ªæ­£æ€åˆ†å¸ƒï¼Ÿæ•¬è¯·å…³æ³¨æ›´å¤šï¼Œå³å°†æ¨å‡ºï¼</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="dd37" class="oj mn it bd mo ok pt om mr on pu op mu ki pv kj mx kl pw km na ko px kp nd ot bi translated">å‚è€ƒ</h1><ol class=""><li id="e5a9" class="ne nf it lk b ll ng lo nh lr ni lv nj lz nk md nl nm nn no bi translated">èµ„äº§å›æŠ¥çš„ç»éªŒå±æ€§:ç¨‹å¼åŒ–çš„äº‹å®å’Œç»Ÿè®¡é—®é¢˜ã€‚é‡åŒ–é‡‘è 2001ï¼Œ1 (2)ï¼Œ223â€“236ã€‚</li></ol></div></div>    
</body>
</html>