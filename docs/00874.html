<html>
<head>
<title>How to Build a Matrix Module from Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从头开始构建矩阵模块</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-matrix-module-from-scratch-a4f35ec28b56?source=collection_archive---------6-----------------------#2020-01-25">https://towardsdatascience.com/how-to-build-a-matrix-module-from-scratch-a4f35ec28b56?source=collection_archive---------6-----------------------#2020-01-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="df8e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如果您一直在为矩阵运算导入 Numpy，但不知道该模块是如何构建的，本文将向您展示如何构建您自己的矩阵模块</h2></div><h1 id="8793" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">动机</h1><p id="964d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Numpy 是一个有用的库，它使您能够轻松地创建矩阵和执行矩阵操作。如果你想知道用 Numpy 创建矩阵的技巧，请查看我的博客<a class="ae lw" href="https://medium.com/@khuyentran1476/comprehensive-numpy-tutorials-for-beginners-8b88696bd3a2" rel="noopener">这里</a>。但是如果您想创建一个具有 Numpy 库中没有的特性的 matrix 类呢？为了能够做到这一点，我们首先应该了解如何构建一个矩阵类，使我们能够创建一个矩阵，该矩阵具有矩阵的基本功能，如打印、矩阵加法、标量、元素或矩阵乘法，具有访问和设置条目。</p><p id="45d8" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">本教程结束时，您应该已经具备创建自己的矩阵模块的基础。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/1f0959dee9be95dacb13e469e46a4b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r9UN3f7oMZYuR72N"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">Joshua Sortino 在<a class="ae lw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="7568" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">为什么上课？</h1><p id="e864" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">创建一个类允许创建一类对象的新实例。每个类实例可以有不同的属性和方法。因此，使用一个类将使我们能够创建一个具有矩阵属性和多种功能的实例。比如 A = [[2，1]，[2，3]]，B = [[0，1]，[2，1]]，A + B 应该给我们一个矩阵[[2，3]，[4，4]]。</p><p id="2748" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated"><code class="fe ms mt mu mv b">__method__</code>是私有方法。即使您不能直接调用私有方法，Python 中的类中的这些内置方法将让编译器知道当您执行特定的函数或操作时要访问哪个方法。你只需要为你的目标使用正确的方法。</p><h1 id="0ffd" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">构建一个矩阵类</h1><p id="8bd6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我将从我们想要创建的开始，然后根据我们的目标找到创建类的方法。我建议您在添加更多方法时测试您的类，看看该类的行为是否如您所愿。</p><h2 id="0b4b" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">创建并打印矩阵对象</h2><p id="3af1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们希望我们的班级达到的目标如下</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="4474" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; print( A )<br/>	------------- output -------------<br/>	|   1.000,    1.000,    1.000| <br/>	|   1.000,    1.000,    1.000| <br/>	|   1.000,    1.000,    1.000| <br/>	----------------------------------</span></pre><p id="541b" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">因此，我们想要创建一个带有参数<code class="fe ms mt mu mv b">dims</code>和<code class="fe ms mt mu mv b">fill</code>的<code class="fe ms mt mu mv b">Matrix</code>对象。</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="2efa" class="mw kj it mv b gy nm nn l no np">class Matrix: <br/> <br/>  def __init__(self, dims, fill):    <br/>     self.rows = dims[0]  <br/>     self.cols = dims[1]   <br/>     self.A = [[fill] * self.cols for i in range(self.rows)]</span></pre><p id="fdbe" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我们使用<code class="fe ms mt mu mv b">__init__</code>作为构造函数来初始化我们类的属性(行、列和矩阵 A)。行和列由矩阵的第一和第二维指定。用<code class="fe ms mt mu mv b">fill</code>作为值，用<code class="fe ms mt mu mv b">self.cols</code>和<code class="fe ms mt mu mv b">self.rows</code>作为矩阵的形状来创建矩阵 A。</p><p id="4c50" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我们还应该创建一个<code class="fe ms mt mu mv b">__str__</code>方法，使我们能够打印如上所示的可读格式。</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="3e3e" class="mw kj it mv b gy nm nn l no np">def __str__(self): <br/>    <br/>  m = len(self.A) # Get the first dimension <br/>    <br/>  mtxStr = ''</span><span id="07fa" class="mw kj it mv b gy nq nn l no np">  mtxStr += '------------- output -------------\n'     <br/>     <br/>  for i in range(m):<br/>         <br/>     mtxStr += ('|' + ', '.join( map(lambda x:'{0:8.3f}'.format(x), self.A[i])) + '| \n')</span><span id="0e4d" class="mw kj it mv b gy nq nn l no np">  mtxStr += '----------------------------------'</span><span id="78d8" class="mw kj it mv b gy nq nn l no np">  return mtxStr</span></pre><h2 id="b44d" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">缩放器和矩阵加法</h2><p id="9e46" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">目标:</p><p id="4c16" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">标准矩阵-矩阵加法</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="8b23" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; B = Matrix(dims=(3,3), fill=2.0)<br/>	&gt;&gt;&gt; C = A + B<br/>	&gt;&gt;&gt; print( C )<br/>	------------- output -------------<br/>	|   3.000,    3.000,    3.000| <br/>	|   3.000,    3.000,    3.000| <br/>	|   3.000,    3.000,    3.000| <br/>	----------------------------------</span></pre><p id="207f" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">标量矩阵加法(逐点)</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="9ecb" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt;A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; C = A + 2.0<br/>	&gt;&gt;&gt; print( C )<br/>	------------- output -------------<br/>	|   3.000,    3.000,    3.000| <br/>	|   3.000,    3.000,    3.000| <br/>	|   3.000,    3.000,    3.000| <br/>	---------------------------------- </span></pre><p id="e5f5" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我们使用<code class="fe ms mt mu mv b">__add__</code>方法来执行正确的加法。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="bb55" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">由于加法是可交换的，我们也希望能够在矩阵的右边进行加法。这可以通过调用左边的加法很容易地完成。</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="af25" class="mw kj it mv b gy nm nn l no np">def __radd__(self, other):  <br/>  return self.__add__(other)</span></pre><h2 id="d66d" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">逐点乘法</h2><p id="5428" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">目标:</p><p id="5b5e" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">矩阵-矩阵逐点乘法</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="9f1e" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; B = Matrix(dims=(3,3), fill=2.0)<br/>	&gt;&gt;&gt; C = A * B<br/>	&gt;&gt;&gt; print( C )<br/>	------------- output -------------<br/>	|   2.000,    2.000,    2.000| <br/>	|   2.000,    2.000,    2.000| <br/>	|   2.000,    2.000,    2.000| <br/>	----------------------------------</span></pre><p id="61f2" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">标量矩阵逐点乘法</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="fcbb" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; C = 2.0 * A<br/>	&gt;&gt;&gt; C = A * 2.0<br/>	&gt;&gt;&gt; print( C )<br/>	------------- output -------------<br/>	|   2.000,    2.000,    2.000| <br/>	|   2.000,    2.000,    2.000| <br/>	|   2.000,    2.000,    2.000| <br/>	----------------------------------</span></pre><p id="e2a2" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">使用<code class="fe ms mt mu mv b">__mul__</code>方法和<code class="fe ms mt mu mv b">__rmul__</code>方法进行左右点动</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="5c2e" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">标准矩阵-矩阵乘法</h2><p id="0eb3" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">目标:</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="8e92" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; B = Matrix(dims=(3,3), fill=2.0)<br/>	&gt;&gt;&gt; C = A @ B<br/>	&gt;&gt;&gt; print( C )<br/>	------------- output -------------<br/>	|   6.000,    6.000,    6.000| <br/>	|   6.000,    6.000,    6.000| <br/>	|   6.000,    6.000,    6.000| <br/>	----------------------------------</span></pre><p id="18ae" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">矩阵乘法可以通过矩阵乘法专用的<code class="fe ms mt mu mv b">__matmul__ </code>方法实现。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="1fd6" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">具有访问和设置条目的权限</h2><p id="4aee" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">目标:</p><pre class="md me mf mg gt ni mv nj nk aw nl bi"><span id="ade0" class="mw kj it mv b gy nm nn l no np">        &gt;&gt;&gt; A = Matrix(dims=(3,3), fill=1.0)<br/>	&gt;&gt;&gt; A[i,j]<br/>	&gt;&gt;&gt; A[i,j] = 1.0</span></pre><p id="8798" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">使用<code class="fe ms mt mu mv b">__setitem__</code>方法设置矩阵索引值，使用<code class="fe ms mt mu mv b">__getitem__</code>方法获取矩阵索引值。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h2 id="e5f9" class="mw kj it bd kk mx my dn ko mz na dp ks lj nb nc ku ln nd ne kw lr nf ng ky nh bi translated">把所有东西放在一起</h2><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h1 id="6f4c" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">创建和使用模块</h1><p id="525c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">创建完类矩阵，就该把它变成一个模块了。将包含该类的文本重命名为<code class="fe ms mt mu mv b">__init__.py</code>。创建一个名为<code class="fe ms mt mu mv b">Matrix</code>的文件夹。将<code class="fe ms mt mu mv b">main.py</code>和另一个名为<code class="fe ms mt mu mv b">linearAlgebra</code>的文件放在这个文件夹中。将<code class="fe ms mt mu mv b">__init__.py</code>文件放入<code class="fe ms mt mu mv b">linearAlgebra</code>文件中。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nt"><img src="../Images/4a948b802c0de8f72f105ed61ce6dff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0gTeCt7JIVPp5zrzKX8tg.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">文件夹矩阵包含 main.py 和 linear 代数</p></figure><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nu"><img src="../Images/2e590c7478ff8baf49e42e543a3adb90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DmEKtzltX5PT0qNip2ILg.png"/></div></div><p class="mo mp gj gh gi mq mr bd b be z dk translated">文件夹 linearAlgebra 包含 __init__。巴拉圭</p></figure><p id="c231" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">使用<code class="fe ms mt mu mv b">main.py</code>导入并使用我们的矩阵类。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="nr ns l"/></div></figure><h1 id="5676" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">结论</h1><p id="9e60" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">厉害！你已经学会了如何从头开始创建一个矩阵类。Python 类中还有其他方法可以让您为矩阵添加更多要素。因为你有创建一个类的基本知识，你可以创建你自己的符合你兴趣的 Matrix 版本。在<a class="ae lw" href="https://github.com/khuyentran1401/Numerical-Optimization-Machine-learning/tree/master/matrix" rel="noopener ugc nofollow" target="_blank">这个 Github repo </a>中，您可以随意派生和使用本文的代码。</p><p id="08bf" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在 LinkedIn 和 Twitter 上与我联系。</p><p id="be83" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在 Medium 上关注我，了解我的最新数据科学文章，例如:</p><div class="nv nw gp gr nx ny"><a href="https://medium.com/@khuyentran1476/how-to-produce-creative-product-without-hitting-your-head-to-the-wall-86eb93207058" rel="noopener follow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">如何生产创意产品(不碰壁)</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">创意是创造伟大产品的关键，但并不总是容易的。这个博客会给你策略去克服…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">medium.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om mm ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a rel="noopener follow" target="_blank" href="/step-by-step-tutorial-web-scraping-wikipedia-with-beautifulsoup-48d7f2dfa52d"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">用美丽的声音抓取维基百科</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">关于如何使用 Beautiful Soup 的分步教程，这是一个用于 web 抓取的简单易用的 Python 库</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="on l oj ok ol oh om mm ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a rel="noopener follow" target="_blank" href="/find-common-words-in-article-with-python-module-newspaper-and-nltk-8c7d6c75733"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">用 Python 模块 Newspaper 和 NLTK 查找文章中的常用词</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">使用 newspaper3k 和 NLTK 从报纸中提取信息和发现见解的分步指南</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="oo l oj ok ol oh om mm ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a rel="noopener follow" target="_blank" href="/choose-stocks-to-invest-with-python-584892e3ad22"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">用 Python 选择要投资的股票</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">您计划在未来 3 年投资几只股票，每只股票的每一美元都有不同的预期回报…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">towardsdatascience.com</p></div></div><div class="oh l"><div class="op l oj ok ol oh om mm ny"/></div></div></a></div><div class="nv nw gp gr nx ny"><a href="https://medium.com/@khuyentran1476/comprehensive-numpy-tutorials-for-beginners-8b88696bd3a2" rel="noopener follow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">为您的数据科学项目提供 Numpy 技巧</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">创建数组、矩阵、执行矩阵运算、解决线性代数问题和常见数据科学的技巧…</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">medium.com</p></div></div><div class="oh l"><div class="oq l oj ok ol oh om mm ny"/></div></div></a></div></div></div>    
</body>
</html>