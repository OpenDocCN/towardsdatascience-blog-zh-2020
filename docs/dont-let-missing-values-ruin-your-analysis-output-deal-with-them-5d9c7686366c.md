# 不要让丢失的值破坏您的分析输出，处理它们！

> 原文：<https://towardsdatascience.com/dont-let-missing-values-ruin-your-analysis-output-deal-with-them-5d9c7686366c?source=collection_archive---------41----------------------->

## 处理空值的方法概述

![](img/ac16d86ddb1d3c0f0c74a2b07ee5b79a.png)

[Ehimetalor Akhere Unuabona](https://unsplash.com/@theeastlondonphotographer?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄的照片

无论是机器学习模型、KPI 还是报告，缺失值或其替换值都可能导致您的分析输出出现巨大错误。

通常，分析师处理缺失值就像它们只有一种类型一样。事实并非如此，有三种类型的缺失值，每一种都有不同的处理方法。

# 空值的类型

**随机缺失(MAR)** :变量中出现空值不是随机的，而是依赖于记录的已知或未知特征。你可能会问自己，为什么它被称为随机失踪？因为空值与实际值无关。根据您的数据集，它可以或不可以测试。要找出答案，您应该比较具有缺失值和非缺失值的记录的其他变量分布。

***例如:*** 一个关于教育的数据集，其中包含许多幼儿智商得分的缺失值，只是因为与 12 岁的孩子相比，4 岁的孩子通过测试的情况较少。空值与智商实际值无关，但与年龄有关。

**完全随机缺失(MCAR)** :空值的存在与记录的任何已知或未知特征无关。同样，这取决于您的数据集，可以测试也可以不测试。与 MAR 一样，测试包括比较有缺失值的记录和没有空值的记录的其他变量的分布。

***例如:*** 问卷结果在邮件中丢失的调查受访者的缺失数据。完全独立于相关变量和回答者的特征(即记录)。

**非随机缺失(MNAR)** :空值的存在取决于其实际值。这个无法测试，除非你知道实际值，这有点矛盾。

***例如:*** 智商变量的缺失值仅适用于得分较低的个人。

您可能已经猜到了，只有在第二种情况下，删除空值才是安全的。

对于另外两种情况，降低值会导致忽略总体中的一组。

在最后一种情况下，记录具有空值的事实携带了一些关于实际值的信息。

# 处理缺失值

## 滴

**删除行:**(仅适用于 MCAR)如果相对于数据集大小，您只有一小部分缺失值，这可能是最佳解决方案。然而，随着比例的增长，它很快变得不可行。

**丢弃 col :** 这种方法通常不被考虑，因为它会导致重要信息的丢失。根据经验，当空值的比例高于 60%时，您可以开始考虑它。

## 归罪

**上一个或下一个值:**(仅适用于 MCAR 的时间序列)只要您正在处理时间序列问题，就可以使用上一个或下一个值来填充缺失值。

**平均值:**(仅适用于 MCAR)使用平均值通常不是一个好的解决方案，因为它对异常值很敏感。

**中值:**(仅适用于 MCAR)类似于平均值，但对异常值更稳健。

**模式值:**(仅适用于 MCAR)通过选择最常见的值，您可以确保在大多数情况下正确填充空值。当心多模式分销，因为它不再是一个可行的解决方案。

**替换为常量:**(仅适用于 MNAR)正如我们之前看到的，MNAR 情况下的 missing value 实际上保存了一些关于实际值的信息。因此，使用一个常数(不同于其他值)填充它们是有意义的。

**线性插值:**(仅适用于具有 MCAR 的时间序列)在具有趋势和很少或没有季节性的时间序列问题中，缺失值可以通过使用其之前的值和之后的值进行线性插值来近似。公式如下:

![](img/569d4b86863e7ee14e3ae4810c1a7707.png)

线性插值(一阶)

**样条插值:**(仅适用于具有 MCAR 的时间序列)这类似于线性插值，但它使用了高阶多项式特征来实现更平滑的插值。还是那句话，不适合季节性数据。

**带季节性调整的线性/样条插值:**(仅适用于 MCAR 时间序列)它遵循与线性和样条插值相同的原理，但对季节性进行了调整。它包括对数据进行非季节性处理，应用线性/样条插值，并对时间序列应用季节性。[这里](/stl-decomposition-how-to-do-it-from-scratch-b686711986ec)是对 STL 一种数据去季节化方法的详细解释。

**线性回归、KNN、MCMC、多变量高斯或任何 ML 算法:**(仅用于 MAR)使用它可能需要一些额外的工作，但它是处理 MAR 的唯一可行的解决方案。为什么？因为它考虑了其他变量的记录值，所以它可以使用关于变量的信息来预测缺失值，这些变量在缺失和非缺失时的值是不同的。

**多重插补:**(仅适用于马尔和 MCAR)多重插补是处理缺失值的最佳方式。它包括使用一个模型多次输入缺失值，该模型允许对同一观测值的预测之间的差异。增加相同观测预测之间变化的解决方案可以是使用类似线性回归的模型。假设模型参数来自一个分布，你可以让它们在每个插补步骤中有一点点变化，要阅读更多关于这种技术的内容，请查看[这个](https://rmisstastic.netlify.app/tutorials/Erler_course_MultipleImputation_2018/Erler_slides_MICourse_2018.pdf)。每次插补都会创建一个新的数据集。然后，应该对每个数据集进行分析。完成后，计算不同数据集上结果的平均值和标准偏差，以给出具有“置信区间”的输出值的近似值。

如果你想讨论如何处理项目中缺失的价值，请通过 [LinkedIn](https://www.linkedin.com/in/leopolddavezac/) 联系我。