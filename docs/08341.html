<html>
<head>
<title>How to Scrape Youtube Comments with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python抓取Youtube评论</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-scrape-youtube-comments-with-python-61ff197115d4?source=collection_archive---------8-----------------------#2020-06-18">https://towardsdatascience.com/how-to-scrape-youtube-comments-with-python-61ff197115d4?source=collection_archive---------8-----------------------#2020-06-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9216" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从头开始构建NLP数据库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4eb94595686d837e656218d87bfbead1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zHJvaUDodYQeVcjw"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">来源:https://unsplash.com/photos/UfseYCHvIH0</p></figure><p id="afba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何自然语言处理项目的第一部分都是获取数据库。事实上，清洗和标记整个数据集只适用于Kaggle，而不是在现实生活中。</p><p id="e8db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当谈到情感分析项目时，我觉得Youtube评论代表了一个巨大的、未被充分利用的数据来源。您可以轻松获得所有观众对某个特定主题(如视频)的看法。</p><p id="da97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">了解了所有这些，下面是如何一步一步地从Youtube视频中抓取评论。</p><p id="7f94" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是我将收集评论的视频:【https://www.youtube.com/watch?v=kuhhT_cBtFU】T2&amp;t = 2s</p><p id="2893" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是CNN发布的一段视频，显示了6月12日发生在亚特兰大的逮捕和枪杀Rayshard Brooks的事件。</p><p id="6e92" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以首先，别忘了从右边<a class="ae ky" href="https://chromedriver.chromium.org/" rel="noopener ugc nofollow" target="_blank">这里</a>安装一个from驱动。你还应该安装谷歌浏览器。现在已经完成了，让我们导入我们需要的库:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="373d" class="ma mb it lw b gy mc md l me mf">import time<br/>from selenium.webdriver import Chrome<br/>from selenium.webdriver.common.by import By<br/>from selenium.webdriver.common.keys import Keys<br/>from selenium.webdriver.support.ui import WebDriverWait<br/>from selenium.webdriver.support import expected_conditions as EC</span></pre><p id="3607" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里需要Selenium，因为Youtube是JavaScript渲染的，这是BeautifulSoup无法处理的。</p><p id="45cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有其他模块都是必需的，因为Youtube评论是动态加载的，这意味着它们只有在你向下滚动页面时才可见。因此，我们需要一个能够:</p><ul class=""><li id="9921" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu ml mm mn mo bi translated">向下滚动</li><li id="b522" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">等待评论出现</li><li id="f5f1" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">删除评论</li><li id="a04f" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu ml mm mn mo bi translated">重复我们想要的任何范围。</li></ul><p id="f430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是实现这一点的循环。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="0d60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是它的工作原理:</p><ol class=""><li id="4262" class="mg mh it lb b lc ld lf lg li mi lm mj lq mk lu mw mm mn mo bi translated">用<strong class="lb iu"> driver.get </strong>函数访问你想要的URL。</li><li id="5d36" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu mw mm mn mo bi translated">使用<strong class="lb iu"> wait.until </strong>和<strong class="lb iu">EC . visibility _ of _ element _ located</strong>向下滚动并等待，直到所有内容都可见。</li><li id="8f6a" class="mg mh it lb b lc mp lf mq li mr lm ms lq mt lu mw mm mn mo bi translated">通过在当前查看的页面中找到所有的<strong class="lb iu"> #content-text </strong>元素(这就是我们想要的，正如你在下面看到的)来收集评论。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/92232860724bcae186276563e3a47c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKmnsSOiwNTIaUeU49p-9g.png"/></div></div></figure><p id="faf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.将注释添加到数据列表中。</p><p id="9388" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要从另一个视频中收集评论，你只需更改网址即可！就这么简单。</p><p id="7324" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我重复循环200次，收集了大约1400条评论。数据如下所示:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="729d" class="ma mb it lw b gy mc md l me mf">import pandas as pd   <br/>df = pd.DataFrame(data, columns=['comment'])<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/1c1e9b7ce339652ba0d8888505c3b779.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*vbJJ9gdBilpSn2HHfVPCmg.png"/></div></figure><p id="7360" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是了。现在，您将能够使用这些数据来启动您的NLP项目。</p><p id="faa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读，我希望这有所帮助！</p><p id="db76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">成为会员:<a class="ae ky" href="https://francoisstamant.medium.com/membership" rel="noopener">https://francoisstamant.medium.com/membership</a></p></div></div>    
</body>
</html>