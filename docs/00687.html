<html>
<head>
<title>Predicting the impact of social media advertising on sales with linear regression</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用线性回归预测社交媒体广告对销售的影响</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predicting-the-impact-of-social-media-advertising-on-sales-with-linear-regression-b31e04f15982?source=collection_archive---------7-----------------------#2020-01-20">https://towardsdatascience.com/predicting-the-impact-of-social-media-advertising-on-sales-with-linear-regression-b31e04f15982?source=collection_archive---------7-----------------------#2020-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e0d3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">本文将详细介绍使用r软件包进行简单线性回归的步骤，还将涵盖相关的基本介绍性统计数据。</em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/7f19313ade9e3a5fc8e290f817dea3d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q7xDH_5cAw2idF9v"/></div></div><p class="lb lc gj gh gi ld le bd b be z dk translated">由<a class="ae lf" href="https://unsplash.com/@campaign_creators?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">活动创作者</a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><h1 id="3571" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">什么是简单线性回归？</h1><p id="486b" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">线性回归测量响应变量<strong class="js iu"> Y </strong>和预测变量<strong class="js iu"> X </strong>之间的关系。X增加一个单位，Y增加吗？还是随着X增加一个单位而减少？我们想用线性关系从X预测Y变量。我们可以理解两个变量是如何相互联系或相互影响的。</p><p id="a356" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，假设Y是伦敦不同街区每1000人被刺伤的次数——刺伤次数越多，犯罪率越高。如果X是不同社区的中值房价，我们可以使用线性回归来测试中值房价较低的社区是否有较高的犯罪率，反之亦然。</p><h1 id="8c2d" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">回归方程:</h1><p id="5106" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">数学上，线性回归可以表示如下:</p><p id="29c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Y=β1+β2X+ϵ</p><ul class=""><li id="169e" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">响应(相关)变量<strong class="js iu"> Y </strong>是我们试图预测的。</li><li id="17bb" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">预测(独立)变量<strong class="js iu"> X </strong>用于预测响应。</li><li id="f95c" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">β1是<em class="ko">截距</em>，是一个常量值<em class="ko">。</em>如果X = 0，那么Y将完全依赖于β1。</li><li id="fb13" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">β2是回归线的<em class="ko">斜率</em>。我们将这些术语称为系数。</li><li id="2519" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">ϵ是残差项。这将显示x可以解释多少Y，误差项的平均值为0。</li></ul><p id="fb36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们用一个例子来形象化这一点。</p><h1 id="40b0" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">带R的示例</h1><p id="b237" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">我们将使用<code class="fe mx my mz na b">datarium</code>包中包含的<code class="fe mx my mz na b">marketing</code> <em class="ko"> </em>数据集，其中包含一家虚构公司的三种媒体(脸书、YouTube和报纸)的广告预算(以千美元计)以及该公司的销售数据。</p><h1 id="2aab" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">1.提出我们的问题:</h1><p id="8ea7" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">制定一个研究问题是指导探索性数据分析过程的有用方法。它可以帮助清理数据集，并通过消除不需要的变量、处理缺失值等为严格的分析做准备。我们的一般问题是:</p><p id="124b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">考虑到YouTube和报纸广告的效果，脸书广告对公司的销售有什么影响？</p><p id="0a54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们希望开发一个线性模型来解释预测变量<code class="fe mx my mz na b">facebook</code> <strong class="js iu"> </strong>和数值响应变量<code class="fe mx my mz na b">sales</code>之间的关系。在本文中，我们将使用R包来执行简单的线性回归。这里有一个简单的线性回归方程:</p><p id="f1ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Sales=β0+β1*Facebook+ϵ</p><p id="d60c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">涉及多个预测变量的多元回归将在另一篇文章中进行解释(<em class="ko">即将发布！</em>)。例如，如果我们想测试脸书广告对公司销售的影响<em class="ko">给定</em>YouTube和报纸广告的广告预算，我们的多元回归方程将如下所示:</p><p id="a3b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">销售额=β0+β1 * Facebook+β2 * YouTube+β3*newspaper+ϵ</p><p id="3926" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将首先从一个简单的线性回归开始，找到预测响应<code class="fe mx my mz na b">sales</code>的最佳直线，作为预测值<code class="fe mx my mz na b">facebook</code>的函数。</p><h1 id="2898" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">2.安装</h1><p id="fe48" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">首先在R Studio中安装<code class="fe mx my mz na b">tidyverse</code>、<code class="fe mx my mz na b">ggpubr</code>和<code class="fe mx my mz na b">datarium</code>包。从<code class="fe mx my mz na b">datarium</code>包中导入<code class="fe mx my mz na b">marketing</code>数据集。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="dfc8" class="nf lh it na b gy ng nh l ni nj">library(tidyverse)<br/>library(ggpubr)<br/>data(“marketing”, package = “datarium”)</span></pre><h1 id="b9b5" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">3.探索性数据分析</h1><p id="a440" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">首先，我们将使用<code class="fe mx my mz na b">str()</code>函数来获得数据结构的快照视图。我们可以看到有200行数据和4个变量——<strong class="js iu">YouTube</strong>、<strong class="js iu"> facebook </strong>、<strong class="js iu">报纸</strong>和<strong class="js iu">销售额</strong>。我们还可以看到每个变量的前几个单独的值。此外，我们可以看到每一列变量的类别——我们的每个变量都被归类为“数值型”。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="d771" class="nf lh it na b gy ng nh l ni nj">&gt; str(marketing)<br/>'data.frame':	200 obs. of  4 variables:<br/> $ youtube  : num  276.1 53.4 20.6 181.8 217 ...<br/> $ facebook : num  45.4 47.2 55.1 49.6 13 ...<br/> $ newspaper: num  83 54.1 83.2 70.2 70.1 ...<br/> $ sales    : num  26.5 12.5 11.2 22.2 15.5 ...</span></pre><p id="7cad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们也可以使用<code class="fe mx my mz na b">dim()</code> <strong class="js iu"> </strong>来了解数据帧的尺寸，即行数和列数。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="7495" class="nf lh it na b gy ng nh l ni nj">&gt; dim(marketing)<br/>[1] 200 4</span></pre><p id="86ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将使用<code class="fe mx my mz na b">head()</code>函数来浏览一下我们的原始数据。默认情况下，该函数将返回前六行，但是我们可以根据自己的喜好查看任意数量的行。我们希望看到前10行:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="186b" class="nf lh it na b gy ng nh l ni nj">&gt; head(marketing, 10)<br/>   youtube facebook newspaper sales<br/>1   276.12    45.36     83.04 26.52<br/>2    53.40    47.16     54.12 12.48<br/>3    20.64    55.08     83.16 11.16<br/>4   181.80    49.56     70.20 22.20<br/>5   216.96    12.96     70.08 15.48<br/>6    10.44    58.68     90.00  8.64<br/>7    69.00    39.36     28.20 14.16<br/>8   144.24    23.52     13.92 15.84<br/>9    10.32     2.52      1.20  5.76<br/>10  239.76     3.12     25.44 12.72</span></pre><p id="d25c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们也用<code class="fe mx my mz na b">tail</code>看看数据集的结尾。这非常有用，因为在一些数据集中，最后几列可能包含数据的总计或汇总，这可能是不相关的。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="bb36" class="nf lh it na b gy ng nh l ni nj">&gt; tail(marketing)<br/>    youtube facebook newspaper sales<br/>195  179.64    42.72      7.20 20.76<br/>196   45.84     4.44     16.56  9.12<br/>197  113.04     5.88      9.72 11.64<br/>198  212.40    11.16      7.68 15.36<br/>199  340.32    50.40     79.44 30.60<br/>200  278.52    10.32     10.44 16.08</span></pre><p id="bf53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我想使用<code class="fe mx my mz na b">summary</code>调出一些汇总统计数据。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="bb7e" class="nf lh it na b gy ng nh l ni nj">&gt; summary(marketing)<br/>youtube          facebook       newspaper     <br/> Min.   :  0.84   Min.   : 0.00   Min.   :  0.36  <br/> 1st Qu.: 89.25   1st Qu.:11.97   1st Qu.: 15.30  <br/> Median :179.70   Median :27.48   Median : 30.90  <br/> Mean   :176.45   Mean   :27.92   Mean   : 36.66  <br/> 3rd Qu.:262.59   3rd Qu.:43.83   3rd Qu.: 54.12  <br/> Max.   :355.68   Max.   :59.52   Max.   :136.80  <br/>     sales      <br/> Min.   : 1.92  <br/> 1st Qu.:12.45  <br/> Median :15.48  <br/> Mean   :16.83  <br/> 3rd Qu.:20.88  <br/> Max.   :32.40</span></pre><p id="3872" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们必须理解这些重要的术语和数字代表什么。</p><ul class=""><li id="8bfa" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated"><strong class="js iu">均值:</strong>所有数值之和除以数值总数。在我们的示例数据集中，YouTube广告的平均预算是176.45美元或176，450美元。另一方面，脸书的平均广告预算要低得多，为27.92英镑或27，920美元。</li><li id="42b4" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><strong class="js iu">中位数:</strong>奇数排序列表中的中间数。在偶数列表中，中位数是将排序数据分为上下两半的两个数字的平均值。</li><li id="434d" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><strong class="js iu">最小值:</strong>这是每个变量的最小数值。</li><li id="2253" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><strong class="js iu">最大值:</strong>这是每个变量的最大数值。</li></ul><p id="eaee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以我们已经收集了一些关于数据集的有趣信息。我们知道，该公司在YouTube上的平均广告支出高于脸书或报纸广告。</p><p id="6c17" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过<code class="fe mx my mz na b">quantile</code>更深入地了解数据的分布。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="7a72" class="nf lh it na b gy ng nh l ni nj">&gt; quantile(marketing$facebook)<br/>   0%   25%   50%   75%  100% <br/> 0.00 11.97 27.48 43.83 59.52</span></pre><h1 id="92cc" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">4.让我们开始策划吧！</h1><p id="24b7" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">太好了！我们有了一些关于数据集的初步信息，现在我们可以绘制一些图表。我们将使用<code class="fe mx my mz na b">ggpubr()</code> <strong class="js iu"> </strong>包中的<code class="fe mx my mz na b">ggplot()</code>函数。首先，为了演示为什么我们使用<code class="fe mx my mz na b">ggpubr </code>包来绘制我们的图形，我们将使用<code class="fe mx my mz na b">plot()</code> <strong class="js iu">，</strong> R的内置绘图函数来绘制基本图形。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="55e3" class="nf lh it na b gy ng nh l ni nj">&gt; plot(marketing$sales, marketing$facebook)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d231b7785373c3224402e2f38cacd8be.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*g_gm-ffWa4IQCyRU"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nl"><img src="../Images/a570324aa666ba7fa0eb620b64944051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CHGcj1xAhvcKYKOr.png"/></div></div></figure><p id="ce90" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们将使用<strong class="js iu"> </strong> <code class="fe mx my mz na b">ggplot()</code>。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="ceb9" class="nf lh it na b gy ng nh l ni nj">&gt; ggplot(marketing, aes(x = facebook, y=sales)) + geom_point() + stat_smooth()</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/e2f1a74f3499a99af4cc59a971912e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*aqVL2SUxg_j6ru6M"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nm"><img src="../Images/542eeb000c09e15f71d74e87e66dbddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Cw53A7znLdxaGgVw.png"/></div></div></figure><p id="3506" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">脸书vs销售</p><p id="5bfa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">允许以更美观的方式绘制图表。这里，情节是带有“aes”或“美学映射”的<em class="ko">营销数据集</em>、<em class="ko">、从<strong class="js iu"> facebook </strong>和<strong class="js iu">销售</strong>变量导出的</em>、一组<em class="ko">点</em>和一个<em class="ko">平滑器</em>。</p><p id="95e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上图(准备出版)显示了<strong class="js iu">销售额</strong>和<strong class="js iu"> facebook </strong>变量之间的正线性关系。这表明广告预算的增加会导致公司销售额的增加。出于好奇，我们也可以想象一下销售和YouTube广告以及销售和报纸广告之间的关系。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/da7b0ff707a136d5feb9e3774a15dfb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*oKsrcp3QVvx2-DqB"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nn"><img src="../Images/70897687a36aa1f549c2e36c305dfa58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z_ZNHpDudGM6vspK.png"/></div></div></figure><p id="539f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">YouTube vs销售</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/f08dd8a52f39687afebd11a4bded6dcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*zvJwqqniIv4HmGU7"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nn"><img src="../Images/c76ea3ba1a9a3dde5a29f1191af4197d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fSaZyIVCHxZF1cnJ.png"/></div></div></figure><p id="53e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">报纸vs销售</p><p id="b231" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有趣的是，虽然<code class="fe mx my mz na b">sales</code>和<code class="fe mx my mz na b">youtube</code> <strong class="js iu"> </strong>广告之间的关系也是线性的和正的，但是<code class="fe mx my mz na b">sales</code>和<code class="fe mx my mz na b">newspaper</code> <strong class="js iu"> </strong>广告之间的关系却不是——它是一条曲线，实际上在报纸广告的非常低和非常高的水平上开始负斜率。</p><p id="b768" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">自变量和因变量之间的<em class="ko">相关性</em>如何？</strong>相关性分析将确定两个连续变量之间的关系强度。我们必须计算<em class="ko">相关系数</em>来执行该分析。相关性取+1和-1之间的值。接近0的值表示两个变量之间的相关性较弱。</p><p id="1d25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的示例数据集中，如果高销售额伴随着高脸书广告价值，变量将是正相关的，反之亦然。正如我们在图表中已经看到的，销售额和脸书广告之间存在正相关关系。然而，销售和YouTube广告之间有更强的正相关性。</p><p id="0ef2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">销售和报纸广告之间的相关性最弱。这表明销售(Y)的大部分变化是报纸广告(X)无法解释的。为了衡量销售额的显著变化，我们需要一个具有强相关性的解释变量，即YouTube或脸书。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="a4e0" class="nf lh it na b gy ng nh l ni nj">&gt; cor(marketing$sales, marketing$facebook)<br/>[1] 0.5762226&gt; cor(marketing$sales, marketing$youtube)<br/>[1] 0.7822244&gt; cor(marketing$sales, marketing$youtube)<br/>[1] 0.7822244</span></pre><h1 id="0ad1" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">5.简单线性回归</h1><p id="d378" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">为了在R中执行简单的线性回归，我们将使用<code class="fe mx my mz na b">lm()</code>。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="851f" class="nf lh it na b gy ng nh l ni nj">&gt; model1 = lm(sales ~ facebook, data = marketing)<br/>&gt; model1</span><span id="446c" class="nf lh it na b gy no nh l ni nj">Call:<br/>lm(formula = sales ~ facebook, data = marketing)</span><span id="7ade" class="nf lh it na b gy no nh l ni nj">Coefficients:<br/>(Intercept)     facebook  <br/>    11.1740       0.2025</span></pre><h1 id="0cde" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">5.回归线</h1><p id="3ac5" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">现在，让我们为我们的回归生成一个图表。回归线将尝试最小化残差平方和(RSS或残差平方和)。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="5768" class="nf lh it na b gy ng nh l ni nj">&gt; ggplot(marketing, aes(facebook, sales)) +<br/> geom_point() +<br/> stat_smooth(method = lm)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/84e7b477a17afb15b1105e4cc20e9856.png" data-original-src="https://miro.medium.com/v2/resize:fit:72/0*hpmpATeY_JgykF-R"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi np"><img src="../Images/e58d43b8e9ef88b36dbc4a0cda91b4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*44geXs2O3Nwg9Lou.png"/></div></div></figure><p id="9f4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">回归概念:</strong></p><ul class=""><li id="42e7" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated"><em class="ko">拟合值和残差:</em>通常，真实世界的数据不会正好落在回归线上，这就是为什么回归方程包含误差项ϵ.的原因拟合/预测值用^.表示如果β用^表示，则系数为<em class="ko">估计值</em>。统计学区分估计值和已知值，因为估计值是不确定的，而已知值是固定的。误差项ϵ将包含估计值和已知值之间的差异。</li><li id="1499" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><em class="ko">最小二乘法:</em>在简单回归中，我们会使用OLS或普通最小二乘法来估计我们的回归模型与数据的拟合程度。用^表示的系数是使RSS最小的值。然而，在多元回归中，我们将使用<strong class="js iu">最大似然</strong>来估计模型拟合度。</li></ul><h1 id="2f2b" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">6.解读我们的回归</h1><p id="a4a6" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">估计回归线为:</p><p id="b2fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Sales=11.174+0.2025*Facebook+ϵ</p><ul class=""><li id="b94b" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">截距(β0)为11.174，可以解释为脸书广告预算值为零时的预测美元销售额。因此，对于等于零的脸书广告预算，我们可以预计销售额为11.174 * 1000 = 11，174美元。</li><li id="6098" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">回归系数(β1)表明，对于等于1000美元的脸书广告预算，我们可以预期销售额增加202.5单位(0.2025*1000)，即<code class="fe mx my mz na b">sales = 11.174 + 0.2025*1000 = 56.44 units</code>。这相当于213，670美元的销售额。</li></ul><h1 id="25db" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">7.评估我们的模型</h1><p id="2250" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">现在我们有了回归模型，我们需要理解如何解释它。仅仅创建一个回归模型是不够的。我们必须检查(a)我们的回归是否有统计学上的显著关系，以及(b)我们的模型是否与数据吻合。很好地拟合数据的回归模型是这样的，X的变化导致y的变化。</p><p id="d03a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在继续之前，我们必须了解标准误差和假设检验。</p><p id="33db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">标准误差:</strong></p><p id="e3c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">标准误差衡量我们的系数估计值与我们的响应变量的实际平均值相差多少。标准误差可用于计算<strong class="js iu">置信区间</strong>。置信区间量化回归系数的不确定性。通过使用<code class="fe mx my mz na b">confint()</code>函数，我们了解到区间[0.12，0.24]有95%的机会包含β1的真值。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="81e1" class="nf lh it na b gy ng nh l ni nj">&gt; confint(model1)<br/>                2.5 %     97.5 %<br/>(Intercept) 9.8419062 12.5060253<br/>facebook    0.1622443  0.2427472</span></pre><p id="7729" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">假设检验:</strong></p><p id="79ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">标准误差可用于对回归系数进行假设检验。最常见的假设检验是检验零假设和替代假设。</p><ul class=""><li id="636c" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">零假设(H0):系数等于零，即预测变量和响应变量之间没有关系。</li><li id="1bd0" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">替代假设(H1):系数不等于零，即预测变量和响应变量之间存在关系。</li></ul><p id="9e5d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了检验零假设，我们必须确定β1的估计值是否离零足够远，使得β1不为零。如果β1估计值的标准误差足够小，那么即使β1估计值很小，也会提供反对零假设的证据。</p><p id="a835" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们如何衡量β1的估计值离零有多远？t统计量将测量我们对β1的估计值偏离0的标准偏差的数量。我们需要使用回归模型来拒绝零假设，并证明<strong class="js iu">销售</strong>和<strong class="js iu"> facebook </strong>变量之间存在关系。</p><p id="3fa2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了解释我们的线性回归，我们将展示我们模型的统计摘要。为此，我们使用<code class="fe mx my mz na b">summary()</code>。</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="c018" class="nf lh it na b gy ng nh l ni nj">&gt; summary(model1)</span><span id="4a92" class="nf lh it na b gy no nh l ni nj">Call:<br/>lm(formula = sales ~ facebook, data = marketing)</span><span id="aa63" class="nf lh it na b gy no nh l ni nj">Residuals:<br/>     Min       1Q   Median       3Q      Max <br/>-18.8766  -2.5589   0.9248   3.3330   9.8173 </span><span id="4357" class="nf lh it na b gy no nh l ni nj">Coefficients:<br/>            Estimate Std. Error t value Pr(&gt;|t|)    <br/>(Intercept) 11.17397    0.67548  16.542   &lt;2e-16 ***<br/>facebook     0.20250    0.02041   9.921   &lt;2e-16 ***<br/>---<br/>Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span><span id="c0cb" class="nf lh it na b gy no nh l ni nj">Residual standard error: 5.13 on 198 degrees of freedom<br/>Multiple R-squared:  0.332,	Adjusted R-squared:  0.3287 <br/>F-statistic: 98.42 on 1 and 198 DF,  p-value: &lt; 2.2e-16</span></pre><h1 id="e11e" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">8.测试我们模型的准确性</h1><p id="bf26" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">让我们来分解这个摘要输出:</p><ul class=""><li id="2606" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">残差:如前所述，残差是由^.表示的估计系数残差是实际值和估计值之间的差值。理想情况下，残差的分布应该是对称的。</li><li id="b7ba" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">系数:我们的系数β0和β1分别代表截距和斜率。我们已经在上一节解释了这些系数。</li><li id="a084" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><em class="ko">系数标准误差</em>，如上所述，<em class="ko"> </em>衡量我们的系数估计值与我们的响应变量的实际平均值相差多少。换句话说，它衡量系数估计的准确性。我们的标准误差越接近零越好。</li><li id="2159" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><em class="ko">系数t值</em>测量我们的系数估计值离0有多远(以标准偏差表示)。相对于标准误差，较大的t值将提供反对零假设的证据，并表明预测变量和响应变量之间存在关系。具有低t统计量的预测器可以被丢弃。理想情况下，t值应大于1.96，p值应小于0.05。</li><li id="4120" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">c <em class="ko">系数— Pr( &gt; t) </em>代表p值或观察到大于t的值的概率。p值越小，我们越有可能拒绝零假设。通常，5%或更低的p值是一个很好的分界点。注意<em class="ko">符号。在我们的例子中，代码' T9 '与每个评估相关联。三个星号代表高度显著的p值。由于销售和脸书广告之间的关系非常重要，我们可以拒绝我们的零假设。</em></li><li id="92af" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">剩余标准误差:这衡量我们回归拟合的质量。这是<strong class="js iu">销售</strong>变量将<em class="ko">偏离真实回归线</em>的平均金额。</li><li id="3bb6" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">多重R平方:除了t统计量和p值，这是我们测量回归模型拟合度最重要的指标。r衡量我们的预测变量(销售额)和我们的回应/目标变量(脸书广告)之间的线性关系。它总是介于0和1之间。接近0的数字表示回归，不能很好地解释响应变量的方差，接近1的数字可以解释响应变量中观察到的方差。在我们的例子中，调整后的R(根据自由度进行调整)是0.3287——只有32.87%的销售增长可以用脸书广告来解释。如果我们进行多元回归，我们会发现R会随着响应变量数量的增加而增加。(注:YouTube广告预算与公司销售额的关系更强，R为0.612。因此，与脸书广告相比，YouTube广告可以更好地预测公司销售数据)</li><li id="7d62" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">F统计量:这是一个很好的指标，表明Y和x之间是否存在关系，我们的F统计量离1越远，我们的回归模型就越好。在我们的例子中，F统计量是98.42，在给定数据集大小(200个观察值)的情况下，它相对大于1。在多元回归模型中，F统计量更相关。</li></ul><p id="2662" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，我们需要重点关注的模型拟合的四个关键指标是t统计量、p值、R和F统计量。t统计量越大，p值越小。p值越小，X和Y之间关系的几率越大。R衡量模型与数据的拟合程度-如果R接近1，则表明Y中的大部分变化可以用X来解释。F统计显示了模型的总体显著性。较大的F统计量将对应于具有统计显著性的p值(p &lt; 0.05)。</p><h1 id="67b8" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">8.总结我们的结果</h1><p id="5fa3" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">总的来说，我们已经进行了简单的线性回归，也涵盖了一些基本的介绍性统计。这绝不是对营销数据集的全面分析，而只是一个如何执行和解释简单的r线性回归的示例。这是一个很好的起点，尤其是在试图理解t统计量、p值和标准误差等重要统计概念的相关性时。在下一篇文章中，我们将继续讨论这个数据集的多元回归。多元回归练习将是迈向全面数据分析项目的一步。</p></div></div>    
</body>
</html>