<html>
<head>
<title>A Guide to Creating and Using Your Own Matplotlib Style</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建和使用自己的 Matplotlib 样式的指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-guide-to-creating-and-using-your-own-matplotlib-style-30de6c60bac0?source=collection_archive---------32-----------------------#2020-05-26">https://towardsdatascience.com/a-guide-to-creating-and-using-your-own-matplotlib-style-30de6c60bac0?source=collection_archive---------32-----------------------#2020-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="862b" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python 科学绘图</h2><div class=""/><div class=""><h2 id="82b3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">创建样式模板以方便重复使用 matplotlib 设置</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/1947d10031a9f0d9df9bdfa51d359192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RD5Bh8t_hVwqbNeqiXcyBw.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">杰斯·贝利在<a class="ae lh" href="https://unsplash.com/s/photos/colors?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="ffff" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然使用<code class="fe me mf mg mh b">matplotlib</code>制作的默认图形看起来有些单调，但我真的很喜欢它的可定制性，它允许你调整图形中的每一个微小元素。</p><p id="247e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您发现自己每次创建一个新图形时都不断地更改<code class="fe me mf mg mh b">matplotlib</code>中的一些基本设置，那么生成一个样式文件可能会很有成效。通过导入这种样式，您可以确保一致性，同时仍然能够在单个脚本中根据需要覆盖设置。例如，如果您正在为出版物生成图形，并且希望它们看起来都一样，而不必每次都复制/粘贴设置，那么这将非常有用。</p><p id="930d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以在<code class="fe me mf mg mh b">matplotlib</code> <a class="ae lh" href="https://github.com/matplotlib/matplotlib/blob/master/matplotlibrc.template" rel="noopener ugc nofollow" target="_blank"> Github 库</a>找到一个样式文件的模板。正如你所看到的，有几乎无穷无尽的设置，你可以自定义你的愿望！我们将以此为指导创建我们自己的样式文件。</p><p id="fb7b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们开始之前，我们应该使用默认的<code class="fe me mf mg mh b">matplotlib</code>参数创建一个空图作为比较的基础:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="b1c4" class="mm mn it mh b gy mo mp l mq mr"># Import packages<br/>import matplotlib.pyplot as plt</span><span id="ee5a" class="mm mn it mh b gy ms mp l mq mr"># Create figure<br/>fig = plt.figure()</span><span id="70ea" class="mm mn it mh b gy ms mp l mq mr"># Add subplot to figure<br/>ax = fig.add_subplot(111)</span><span id="3e75" class="mm mn it mh b gy ms mp l mq mr"># Show empty plot<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/56fcb714e9f9a6ab79b7917194acd133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*y6ZxMqrC8mq__CYCMziuHg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">使用默认参数的空 matplotlib 图</p></figure><h1 id="dca3" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">创建和使用一个</strong> <code class="fe me mf mg mh b"><strong class="ak">.mplstyle</strong></code> <strong class="ak">文件</strong></h1><p id="5495" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">首先，我们必须创建一个名为<code class="fe me mf mg mh b">your_style.mplstyle</code>的文件，然后我们可以用您选择的文本编辑器编辑它。我将基于我的第一篇文章的科学主题，所以我们将创建一个名为<code class="fe me mf mg mh b">scientific.mplstyle</code>的风格。要运行这种风格，我们必须将它放在我们的<code class="fe me mf mg mh b">matplotlib</code>配置目录中。一种简单的检查方法是运行下面的代码:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="81d1" class="mm mn it mh b gy mo mp l mq mr">import matplotlib as mpl<br/>mpl.get_configdir()</span></pre><p id="d4af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我的配置目录，可能与大多数目录相似，位于我的主目录的一个子文件夹中:<code class="fe me mf mg mh b">~/.matplotlib/</code></p><p id="34a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将<code class="fe me mf mg mh b">.mplstyle</code>文件放在一个名为<code class="fe me mf mg mh b">stylelib</code>的子目录中。如果这个文件夹对你来说还不存在，可以创建它并把你的<code class="fe me mf mg mh b">scientific.mplstyle</code>文件放到这个文件夹里。现在，当您想要使用您的样式时，在您的 Python 脚本中使用以下行:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="8b74" class="mm mn it mh b gy mo mp l mq mr">plt.style.use('scientific')</span></pre><h1 id="0227" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">图属性</strong></h1><p id="12be" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">首先，我们可以设置图形大小，通常为 6.4 x 4.8 英寸。我们将使用 4 x 4 英寸的图形作为默认图形。现在，每次我们调用<code class="fe me mf mg mh b">plt.figure()</code>，我们的图形将具有 4 x 4 的尺寸:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="9c8c" class="mm mn it mh b gy mo mp l mq mr"># Figure Properties<br/>figure.figsize: 4, 4</span></pre><p id="4125" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们可以设置我们的字体和默认字体大小。我将使用字体“Avenir”和 16 号字体。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="b6fa" class="mm mn it mh b gy mo mp l mq mr"># Font Properties<br/>font.family: Avenir<br/>font.size: 16</span></pre><h1 id="0ecc" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">轴属性</strong></h1><p id="ce61" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">现在我们已经更改了全局图形属性，让我们编辑轴/子图形对象的属性。首先，我们想改变轴的粗细，我们使用<code class="fe me mf mg mh b">axes.linewidth</code>来实现:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="df2c" class="mm mn it mh b gy mo mp l mq mr"># Axes properties<br/>axes.linewidth: 2</span></pre><p id="dba8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">接下来，我经常发现刻度标签和轴标签之间的默认填充(空白)太小。我们可以插入自己的自定义填充值，如下所示:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="9151" class="mm mn it mh b gy mo mp l mq mr">axes.labelpad: 10</span></pre><p id="b98d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们将更改绘图时使用的默认颜色，这可以通过编辑颜色循环程序来完成。我们通过创建一个<code class="fe me mf mg mh b">cycler()</code>对象并将其传递给属性<code class="fe me mf mg mh b">axes.prop_cycle</code>来实现这一点。我很喜欢<a class="ae lh" href="https://fivethirtyeight.com/" rel="noopener ugc nofollow" target="_blank">五点三十八</a>的剧情中使用的颜色，所以会用这个作为我们的色环。我将使用十六进制代码插入颜色:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="2c23" class="mm mn it mh b gy mo mp l mq mr">axes.prop_cycle: cycler(color=['008fd5', <br/>                               'fc4f30', <br/>                               'e5ae38',<br/>                               '6d904f',<br/>                               '8b8b8b',<br/>                               '810f7c'])</span></pre><p id="8e66" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们检查一下到目前为止的进展吧！我们使用以下代码:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="e6d4" class="mm mn it mh b gy mo mp l mq mr"># Import packages<br/>import matplotlib.pyplot as plt</span><span id="469b" class="mm mn it mh b gy ms mp l mq mr"># Use our custom style<br/>plt.style.use('scientific')</span><span id="486c" class="mm mn it mh b gy ms mp l mq mr"># Create figure<br/>fig = plt.figure()</span><span id="4575" class="mm mn it mh b gy ms mp l mq mr"># Add subplot to figure<br/>ax = fig.add_subplot(111)</span><span id="fe77" class="mm mn it mh b gy ms mp l mq mr"># Show empty plot<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/90947afc179cba829a64a55083404120.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*HxrD7AZ5Y11Qj7f8IatrFA.png"/></div></figure><p id="f1fd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">已经好看多了！我们注意到刻度线与我们所做的一些轴更改不匹配，因此这将是我们的下一步。</p><h1 id="1369" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak"> Tick 属性</strong></h1><p id="24c6" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">我们从默认图中注意到，刻度线指向外面，在顶部或右侧轴上没有刻度。对于我们的科学主题，我们希望刻度都指向内部，并且我们希望刻度位于所有轴上，这可以通过以下方式实现:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="967b" class="mm mn it mh b gy mo mp l mq mr"># Tick properties<br/># x-axis<br/>xtick.top: True<br/>xtick.direction: in</span><span id="d7a9" class="mm mn it mh b gy ms mp l mq mr"># y-axis<br/>ytick.right: True<br/>ytick.direction: in</span></pre><p id="c17b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们想改变两个属性<code class="fe me mf mg mh b">size</code>和<code class="fe me mf mg mh b">width</code>。<code class="fe me mf mg mh b">width</code>的值对应于线宽，所以我们将它设置为等于我们给<code class="fe me mf mg mh b">axes.linewidth</code> (2)的值。<code class="fe me mf mg mh b">size</code>的值是分笔成交点的长度——我们将主要分笔成交点的大小设置为 7，次要分笔成交点的大小设置为 5:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="c05f" class="mm mn it mh b gy mo mp l mq mr"># x-axis<br/>xtick.major.size: 7<br/>xtick.major.width: 2</span><span id="02cb" class="mm mn it mh b gy ms mp l mq mr">xtick.minor.size: 5<br/>xtick.minor.width: 2</span><span id="9130" class="mm mn it mh b gy ms mp l mq mr"># y-axis<br/>ytick.major.size: 7<br/>ytick.major.width: 2</span><span id="a88c" class="mm mn it mh b gy ms mp l mq mr">ytick.minor.size: 5<br/>ytick.minor.width: 2</span></pre><p id="ac87" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在有了下图——记号现在已经被修复了！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/396a79e0fc904627cb32f71629f699a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*pQkeImUCO3odQkpHC55CWw.png"/></div></figure><h1 id="7db2" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">线条属性</strong></h1><p id="5c74" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">如果我们想编辑调用<code class="fe me mf mg mh b">plt.plot()</code>时使用的任何默认参数，我们可以通过编辑<code class="fe me mf mg mh b">lines</code>的属性来实现。这可以扩展到其他绘图功能——例如，您可以编辑<code class="fe me mf mg mh b">scatter</code>的属性，以影响创建散点图时的默认参数。在我们的例子中，我只打算将线条的默认宽度从默认值 1.5 更改为 2:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="177d" class="mm mn it mh b gy mo mp l mq mr"># Lines properties<br/>lines.linewidth: 2</span></pre><h1 id="387c" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">图例属性</strong></h1><p id="2af0" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated"><code class="fe me mf mg mh b">matplotlib</code>中的默认图例是半透明的，并且有一个称为<code class="fe me mf mg mh b">FancyBox</code>的带弯曲角的框架。要了解这一点，我们可以使用所有默认参数运行以下代码:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="0fbe" class="mm mn it mh b gy mo mp l mq mr"># Import packages<br/>import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="4657" class="mm mn it mh b gy ms mp l mq mr"># Create figure<br/>fig = plt.figure()</span><span id="cb7d" class="mm mn it mh b gy ms mp l mq mr"># Add subplot to figure<br/>ax = fig.add_subplot(111)</span><span id="76f4" class="mm mn it mh b gy ms mp l mq mr"># Create some data<br/>x = np.linspace(0, 4*np.pi, 200)<br/>y1 = np.sin(x)<br/>y2 = 1.5*np.sin(x)<br/>y3 = 2*np.sin(x)</span><span id="6c7a" class="mm mn it mh b gy ms mp l mq mr"># Plot data<br/>ax.plot(x, y1, label='A = 1')<br/>ax.plot(x, y2, label='A = 1.5')<br/>ax.plot(x, y3, label='A = 2')</span><span id="ca9b" class="mm mn it mh b gy ms mp l mq mr"># Add legend<br/>ax.legend()</span><span id="4c96" class="mm mn it mh b gy ms mp l mq mr"># Show plot<br/>plt.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/8818d1316ffd413ae9d41cbc82108def.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*O-qz8HN5VbgjJpFc6FygxA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">默认 matplotlib 图例-半透明赋予边框灰色</p></figure><p id="28af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们使图例完全不透明，并完全移除框架:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="671c" class="mm mn it mh b gy mo mp l mq mr"># Legend properties<br/>legend.framealpha: 1<br/>legend.frameon: False</span></pre><h1 id="baea" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">最终结果</strong></h1><p id="1c42" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">现在，让我们看看以前的情节如何与我们的新<code class="fe me mf mg mh b">matplotlib</code>风格！我们使用以下代码:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="5118" class="mm mn it mh b gy mo mp l mq mr"># Import packages<br/>import matplotlib.pyplot as plt<br/>import numpy as np</span><span id="168d" class="mm mn it mh b gy ms mp l mq mr"># Use our custom style<br/>plt.style.use('scientific')</span><span id="ae40" class="mm mn it mh b gy ms mp l mq mr"># Create figure<br/>fig = plt.figure()</span><span id="3b78" class="mm mn it mh b gy ms mp l mq mr"># Add subplot to figure<br/>ax = fig.add_subplot(111)</span><span id="5144" class="mm mn it mh b gy ms mp l mq mr"># Create some data<br/>x = np.linspace(0, 4*np.pi, 200)<br/>y1 = np.sin(x)<br/>y2 = 1.5*np.sin(x)<br/>y3 = 2*np.sin(x)</span><span id="4230" class="mm mn it mh b gy ms mp l mq mr"># Plot data<br/>ax.plot(x, y1, label='A = 1')<br/>ax.plot(x, y2, label='A = 1.5')<br/>ax.plot(x, y3, label='A = 2')</span><span id="34ae" class="mm mn it mh b gy ms mp l mq mr"># Set axis labels<br/>ax.set_xlabel('x')<br/>ax.set_ylabel('y')</span><span id="3804" class="mm mn it mh b gy ms mp l mq mr"># Add legend - loc is a tuple specifying the bottom left corner<br/>ax.legend(loc=(1.02, 0.65))</span><span id="b29c" class="mm mn it mh b gy ms mp l mq mr"># Save plot<br/>plt.show()</span></pre><p id="6553" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">三…二…一…</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b11063be2db894f59ad6e2a5be0f4612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*eTIbkSjuW5KNqPgEJsFaYA.png"/></div></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="6992" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还可以做一些小的调整，比如调整 x 和 y 刻度的比例，但是通过让我们的样式设置为我们做大部分工作，我们的生活变得简单多了！</p><h1 id="ce91" class="mu mn it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated"><strong class="ak">结束语</strong></h1><p id="fe78" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于如何调整属性来定义<code class="fe me mf mg mh b">matplotlib</code>图的样式，有无限的可能性。本文的<code class="fe me mf mg mh b">scientific.mplstyle</code>文件将在这个<a class="ae lh" href="https://github.com/venkatesannaveen/python-science-tutorial" rel="noopener ugc nofollow" target="_blank"> Github 资源库</a>中提供。</p><p id="d8cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢您的阅读！我感谢任何反馈，你可以在<a class="ae lh" href="https://twitter.com/naveenv_92" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上找到我，并在<a class="ae lh" href="https://www.linkedin.com/in/naveenvenkatesan/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，以获得更多更新和文章。</p></div></div>    
</body>
</html>