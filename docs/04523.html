<html>
<head>
<title>Build a Classification Model in BigQuery — Machine learning for E-commerce</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在BigQuery中建立分类模型——面向电子商务的机器学习</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-a-classification-model-in-bigquery-machine-learning-for-ecommerce-761f1df895b4?source=collection_archive---------28-----------------------#2020-04-22">https://towardsdatascience.com/build-a-classification-model-in-bigquery-machine-learning-for-ecommerce-761f1df895b4?source=collection_archive---------28-----------------------#2020-04-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="888e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用BigQuery ML在Google云平台上部署机器学习模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/558c1bfc0046e01ef56181175077146b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eTZTL0UMjpUp0LXsCMPYsQ.png"/></div></div></figure><h1 id="e5c8" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">1-描述<strong class="ak"> : </strong></h1><p id="33e9" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">贵公司的数据分析师团队将一个电子商务网站的Google Analytics日志导出到BigQuery中，并创建了一个包含所有原始电子商务访问者会话数据的新表，供我研究。利用这些数据，我将尝试回答几个问题。</p><p id="f595" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题1: </strong>在访问我们网站的所有访问者中，有百分之多少的人进行了购买？</p><p id="8ede" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题2: </strong>有多少访问者在随后的访问中购买了该网站？</p><p id="6f8f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题3: </strong>典型的电子商务客户会浏览但不会购买直到下次访问的一些原因是什么？</p><p id="8036" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题4: </strong>在BigQuery中创建一个机器学习模型，预测新用户未来是否有可能购买。识别这些高价值用户可以帮助营销团队针对他们开展特别促销和广告活动，以确保他们在访问您的电子商务网站时进行比较。</p><h1 id="d93d" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">2-构建机器学习模型的说明:</h1><p id="3e0c" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">1-选择要素并创建您的训练数据集。</p><p id="0bac" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">2-创建一个BigQuery数据集来存储模型。</p><p id="480c" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">3-选择BQML模型类型并指定选项。</p><p id="68cc" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">4-评估模型性能。</p><p id="a703" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">5-通过特征工程提高模型性能。</p><p id="3f7b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">预测哪些新访客会回来购买。</p><h1 id="60ee" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated"><strong class="ak"> 3-定义</strong>:</h1><ul class=""><li id="958d" class="mn mo it lo b lp lq ls lt lv mp lz mq md mr mh ms mt mu mv bi translated">Google BigQuery是一个可扩展的、全面管理的、经济高效的交互式专用查询系统，用于分析结构化和半结构化嵌套数据。</li><li id="1a04" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">BigQuery ML使用户能够使用标准的SQL查询在BigQuery中创建和执行机器学习模型。BigQuery ML通过让SQL从业者使用现有的SQL工具和技能来构建模型，使机器学习民主化。BigQuery ML通过消除移动数据的需要提高了开发速度。</li><li id="87b8" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">Google Analytics是Google提供的网络分析服务，用于跟踪和报告网站流量，也用于跟踪网站活动，如会话持续时间、每次会话的页面数、跳出率等。使用该网站的个人信息，以及流量来源的信息。</li><li id="177a" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">有一个新的可用的<a class="ae nb" href="https://www.en.advertisercommunity.com/t5/Articles/Introducing-the-Google-Analytics-Sample-Dataset-for-BigQuery/ba-p/1676331#" rel="noopener ugc nofollow" target="_blank">电子商务数据集</a>，其中有数百万条关于<a class="ae nb" href="https://shop.googlemerchandisestore.com/" rel="noopener ugc nofollow" target="_blank">谷歌商品商店</a>的谷歌分析记录加载到BigQuery中。在本实验中，您将使用这些数据运行一些典型的查询，企业希望了解他们客户的购买习惯。</li></ul><p id="abae" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi">— — — — — — — — — — — — — — — — — — — — — — — — — —</p><blockquote class="nc nd ne"><p id="d463" class="lm ln nf lo b lp mi ju lr ls mj jx lu ng mk lx ly nh ml mb mc ni mm mf mg mh im bi translated"><strong class="lo iu">注:此处</strong>  <strong class="lo iu">所有代码均可用</strong> <a class="ae nb" href="https://github.com/Ahmed0028/Google-Cloud-Platform-BigQuerML-/blob/master/code.txt" rel="noopener ugc nofollow" target="_blank"> <strong class="lo iu">。</strong></a></p></blockquote><p id="70e3" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">设置您的环境</strong></p><ul class=""><li id="e493" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">登录谷歌云平台</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/7d31ba15c27bdafc43d130051192a126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTQHzLRHKlRY-1paS1V5pA.jpeg"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">谷歌云控制台</p></figure><ul class=""><li id="c333" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">从导航菜单打开BigQuery控制台</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/0822f54df1308ab88aa927b86659baf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*Fg2iRLH-lukBaTzHyz5Skw.jpeg"/></div></figure><ul class=""><li id="ce74" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">通过此<a class="ae nb" href="https://console.cloud.google.com/bigquery?p=data-to-insights&amp;d=ecommerce&amp;t=web_analytics&amp;page=table&amp;pli=1" rel="noopener ugc nofollow" target="_blank">链接</a>访问谷歌分析数据集</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/8d5dfc26b1496bf0fb10d2c29d54912c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lgzvD_-avx_rlVRbPMSWtA.jpeg"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated"><a class="ae nb" href="https://shop.googlemerchandisestore.com/" rel="noopener ugc nofollow" target="_blank">谷歌商品商店</a>的谷歌分析数据集样本</p></figure><p id="badc" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">有关数据集的更多信息:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/73526ef3dcc249eed853fb5f6f5a0f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*v0ktHum3HcS9LPhlr-XMlw.jpeg"/></div></figure><h1 id="458c" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">BigQuery ML中的机器学习模型</h1><p id="42e2" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated"><strong class="lo iu">问题1: </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/639a34756319e9058001cd66c47b919f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1uKs8m6PSAV4P2GGwWe2fw.jpeg"/></div></div></figure><p id="36af" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">结果:2.69% </strong></p><p id="dec5" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题2: </strong></p><p id="e385" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">以下是前5名产品的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/2839b1f465bfc07b78a7f7a9d334664f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KsPh267PH487BUmby-zkrg.jpeg"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/0b5db818758fd508c8ec7a17262102ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*78zkgZtrm8oJMaX5aAr2aQ.jpeg"/></div></figure><p id="2329" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">问题3: </p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/1200550000160efb662c3f0ea0ceed2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F9Qu6IdTPwG-LTOutCs0OQ.jpeg"/></div></div></figure><p id="bc9f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">分析结果，我们可以看到(11873 / 741721) = 1.6%的总访问者会从网站返回并购买。<em class="nf">这包括在第一次会议上购买，然后回来再次购买的访问者子集</em>。</p><p id="c116" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">典型的电子商务客户会浏览但不会购买，直到后来访问的一些原因是什么？</p><p id="b207" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">虽然没有一个正确的答案，但一个普遍的原因是在最终做出购买决定之前，在不同的电子商务网站之间进行比较。对于奢侈品来说，这是很常见的，顾客在做出决定之前需要进行大量的前期研究和比较(比如购买汽车)，但对于该网站上的商品(t恤、配饰等)来说，这种情况在较小程度上也是如此。</p><p id="424b" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">在网络营销的世界里，根据这些未来客户的首次访问特征来识别和营销他们，将会提高转换率，减少向竞争对手网站的流失。</p><p id="91ef" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">确定一个目标</strong></p><p id="2c8d" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">现在，您将在BigQuery中创建一个机器学习模型，以预测新用户将来是否有可能购买。识别这些高价值用户可以帮助您的营销团队针对他们开展特别促销和广告活动，以确保他们在访问您的电子商务网站时进行比较。</p><p id="1218" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 1-选择特征并创建您的训练数据集。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/63b0053349494c34637e37f6a353d666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGppuxC16SUcRHrdOuRWVQ.jpeg"/></div></div></figure><p id="333e" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">Google Analytics捕捉了关于用户访问该电子商务网站的各种维度和衡量标准。在这里浏览字段的完整列表<a class="ae nb" href="https://support.google.com/analytics/answer/3437719?hl=en" rel="noopener ugc nofollow" target="_blank"/>，然后<a class="ae nb" href="https://bigquery.cloud.google.com/table/data-to-insights:ecommerce.web_analytics?tab=preview" rel="noopener ugc nofollow" target="_blank">预览演示数据集</a>以找到有用的功能，帮助机器学习模型理解访问者第一次访问你的网站的数据与他们是否会回来购买之间的关系。</p><p id="7b93" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我决定测试这两个字段是否是我的分类模型的良好输入:</p><ul class=""><li id="f02d" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">totals.bounces <em class="nf">(访问者是否立即离开网站)</em></li><li id="80bd" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">totals.timeOnSite <em class="nf">(访问者在我们网站停留的时间)</em></li></ul><p id="4113" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题:</strong>只使用以上两个字段有什么风险？</p><p id="0189" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">回答:</strong>机器学习的好坏只取决于输入其中的训练数据。如果模型没有足够的信息来确定和学习输入特征和标签之间的关系(在这种情况下，访问者是否在未来购买)，那么我们将不会有一个准确的模型。虽然只在这两个领域训练模型是一个开始，但我们将看看它们是否足以产生一个准确的模型。</p><p id="23aa" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题:</strong>哪些字段是输入要素和标注？</p><p id="4837" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">答:</strong>输入为<strong class="lo iu">弹跳</strong>和<strong class="lo iu">现场时间</strong>。标签是<strong class="lo iu">将_购买_返回_访问</strong>。</p><p id="9368" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题:</strong>访客第一次会话后知道哪两个字段？</p><p id="7657" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">回答:</strong> <strong class="lo iu">弹回</strong>和<strong class="lo iu"> time_on_site </strong>在一个访客的第一次会话后就知道了。</p><p id="bcd2" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">问题:</strong>哪个领域是以后才知道的？</p><p id="d717" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">回答:</strong><strong class="lo iu">will _ buy _ on _ return _ visit</strong>第一次访问之后就不知道了。同样，你预测的是返回你的网站并购买的用户子集。因为你不知道未来的预测时间，你不能肯定地说，是否会有新的游客回来购买。建立一个ML模型的价值是基于他们第一次会议收集的数据得到未来购买的可能性。</p><p id="f398" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 2-创建一个大查询数据集来存储模型。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c7c0cf11845d702f2de44f9c0a81e3a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivDtlkOkPYSXJhy1tQymYQ.jpeg"/></div></div></figure><p id="e067" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 3-选择一个BQML模型类型并指定选项。</strong></p><p id="1f3a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">既然我们已经选择了初始特性，我们现在准备在BigQuery中创建您的第一个ML模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/08866e625c20a05c8a9fb6ffb3f435f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZXcdrev7vQjFqldcnm-0Q.jpeg"/></div></div></figure><p id="5122" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">注意:</strong>在机器学习中有许多额外的模型类型(如神经网络和决策树)，可以使用像<a class="ae nb" href="https://www.tensorflow.org/tutorials/" rel="noopener ugc nofollow" target="_blank"> TensorFlow </a>这样的库来获得。在撰写本文时，BQML支持上面列出的三种。</p><p id="fe10" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">你应该选择哪种型号？</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/5122aa40ec00111ec813c130f49ad0d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwzd_cFGu77RJV0pWWt6hA.jpeg"/></div></div></figure><p id="ba84" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">由于我们将访问者分为“将来会购买”或“将来不会购买”，我们将在分类模型中使用logistic_reg。</p><p id="d1f7" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">以下查询创建一个模型并指定模型选项。运行此查询来训练模型:</p><p id="41b0" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">注意:</strong>我们无法在训练期间将所有可用数据输入模型，因为我们需要保存一些看不见的数据点用于模型评估和测试。为了实现这一点，添加一个WHERE子句条件，用于在12个月的数据集中仅对前9个月的会话数据进行筛选和训练。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/e4f11e3920cfa8c565707eb3a6e7eb48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yx_dHIGXJKtxldlXql1gSA.jpeg"/></div></div></figure><p id="dd9f" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们可以看到上面强调的任何机器学习模型的四个主要参数:</p><p id="3e03" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">模型类型、损失函数类型、训练数据和评估数据集。</p><p id="9e4c" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 4-评估模型性能。</strong></p><p id="a859" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">对于ML中的分类问题，我们希望最小化误报率(预测用户会退货并购买而他们没有)和最大化真报率(预测用户会退货并购买而他们确实有)。</p><p id="a292" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">这种关系可以用ROC(受试者操作特征)曲线来表示，如下图所示，我们试图最大化曲线下面积或AUC:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/1aae12db309ea6409b98bdecfc008a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FyCeIUWVhQsPf4d75auEWQ.jpeg"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/2f12188867517d63be1db0d75fe3dd32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eC4nGiyK4BI4OQR0Wo9mgg.jpeg"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">分类模型的ROC曲线</p></figure><p id="6886" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 5-利用特征工程提高模型性能。</strong></p><p id="2fb6" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">正如前面所暗示的，数据集中有更多的要素可以帮助模型更好地理解访问者的第一次访问与他们在后续访问中购买的可能性之间的关系。</p><p id="dc67" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们将添加一些新功能，并创建第二个机器学习模型，名为<strong class="lo iu"><em class="nf">classification _ model _ 2</em></strong>:</p><ul class=""><li id="5b5d" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">访问者在第一次访问时在结账过程中走了多远。</li><li id="2f77" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">访问者来自哪里(流量来源:有机搜索，参考网站等..).</li><li id="72bb" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">设备类别(手机、平板电脑、台式机)。</li><li id="fbb1" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">地理信息(国家)。</li></ul><p id="e9ea" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">通过运行以下查询创建第二个模型:</p><p id="85f8" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu"> 6-预测哪些新访客会回来购买。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/a31bb703becf3b42d056944e3d0d7f05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4YabpezMQIdW9brB9jwrqA.jpeg"/></div></div><p class="nn no gj gh gi np nq bd b be z dk translated">分类模型2的RUC曲线</p></figure><p id="a615" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">接下来，您将编写一个查询来预测哪些新访问者会回来购物。</p><p id="9e7a" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">下面的预测查询使用改进的分类模型来预测首次访问Google商品商店的用户在以后的访问中购买商品的概率:</p><p id="5c12" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">我们的模型现在输出对2017年7月电子商务会议的预测。我们可以看到三个新添加的字段:</p><ul class=""><li id="c229" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated"><em class="nf">predicted _ will _ buy _ on _ return _ visit:模型是否认为访问者以后会购买(1 =是)</em></li><li id="1fab" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated"><em class="nf">predicted _ will _ buy _ on _ return _ visit _ probs . label:表示是/否的二元分类器</em></li><li id="ec3d" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated"><em class="nf">predicted _ will _ buy _ on _ return _ visit . prob:模型对其预测的置信度(1 = 100%) </em></li></ul><p id="3ee9" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated"><strong class="lo iu">结论:</strong></p><ul class=""><li id="89f0" class="mn mo it lo b lp mi ls mj lv nj lz nk md nl mh ms mt mu mv bi translated">在前6%的首次到访者中(按预测概率降序排列)，超过6%的人会在以后的访问中进行购买。</li><li id="b5ef" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">这些用户代表了在以后的访问中进行购买的所有首次访问者的近50%。</li><li id="34c9" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">总体而言，只有0.7%的首次访客会在以后的访问中进行购买。</li><li id="6641" class="mn mo it lo b lp mw ls mx lv my lz mz md na mh ms mt mu mv bi translated">与瞄准所有人相比，瞄准前6%的首次营销投资回报率提高了9倍！</li></ul><p id="cec8" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi">— — —— — — — — — — — — — — — — — — — — — — — — — —</p><p id="f2a5" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">参考资料:</p><p id="f2ac" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">1-<a class="ae nb" href="https://cloud.google.com/bigquery-ml/docs/bigqueryml-intro" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/bigquery-ml/docs/bigqueryml-intro</a></p><p id="24f4" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">2-Qwiklabs.com</p><p id="3713" class="pw-post-body-paragraph lm ln it lo b lp mi ju lr ls mj jx lu lv mk lx ly lz ml mb mc md mm mf mg mh im bi translated">模式识别和机器学习。</p></div></div>    
</body>
</html>