<html>
<head>
<title>Visualizing Three-Dimensional Data with Python — Heatmaps, Contours, and 3D Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 可视化三维数据-热点图、等值线和 3D 绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-three-dimensional-data-heatmaps-contours-and-3d-plots-with-python-bd718d1b42b4?source=collection_archive---------3-----------------------#2020-04-16">https://towardsdatascience.com/visualizing-three-dimensional-data-heatmaps-contours-and-3d-plots-with-python-bd718d1b42b4?source=collection_archive---------3-----------------------#2020-04-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="98a0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/python-science-plotting" rel="noopener" target="_blank"> Python 科学绘图</a></h2><div class=""/><div class=""><h2 id="de1f" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用 Python 绘制热点图、等值线图和 3D 图</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/3edc3a486271ccb63917d2f700086a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EXNnh_OwmWsO4tgldFaEXA.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@usgs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> USGS </a>在<a class="ae lh" href="https://unsplash.com/s/photos/microsope-image?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="246e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当您测量属性对多个独立变量的依赖性时，您现在需要绘制三维数据。这种例子通常发生在空间测量中，其中存在与每个(x，y)点相关联的强度，类似于光栅显微镜测量或空间衍射图案。为了可视化这些数据，我们有几个选项可供选择——我们将探索创建热图、等高线图(未填充和填充)和 3D 图。</p><p id="fa30" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我将在这个例子中使用的数据集是来自原子力显微镜(AFM)的一张 2 m x 2 m 的显微照片。首先，我们导入包——我们这次添加的两个新包是<code class="fe me mf mg mh b">make_axes_locatable</code>,它将帮助我们管理我们的绘图的色条，以及我们的 3D 绘图所需的<code class="fe me mf mg mh b">Axes3D</code>:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="92fc" class="mm mn it mh b gy mo mp l mq mr"># Import packages<br/>%matplotlib inline<br/>import matplotlib as mpl<br/>import matplotlib.pyplot as plt<br/>from mpl_toolkits.axes_grid1.axes_divider import make_axes_locatable<br/>from mpl_toolkits.mplot3d import Axes3D<br/>import numpy as np</span></pre><p id="f52f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们现在将加载我们的 AFM 数据，再次使用<code class="fe me mf mg mh b">numpy.loadtxt</code>将我们的数据直接加载到 2D <code class="fe me mf mg mh b">numpy</code>数组中。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="9ad8" class="mm mn it mh b gy mo mp l mq mr"># Import AFM data<br/>afm_data = np.loadtxt('./afm.txt')</span></pre><p id="17e0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后，我们可以检查我们加载的数据中的几行:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="9054" class="mm mn it mh b gy mo mp l mq mr"># Print some of the AFM data<br/>print(afm_data[0:5])</span><span id="660c" class="mm mn it mh b gy ms mp l mq mr">&gt;&gt;&gt; [[4.8379e-08 4.7485e-08 4.6752e-08 ... 6.0293e-08 5.7804e-08 5.4779e-08]<br/> [5.0034e-08 4.9139e-08 4.7975e-08 ... 5.7221e-08 5.4744e-08 5.1316e-08]<br/> [5.2966e-08 5.2099e-08 5.1076e-08 ... 5.4061e-08 5.0873e-08 4.7128e-08]<br/> [5.7146e-08 5.6070e-08 5.4871e-08 ... 5.1104e-08 4.6898e-08 4.1961e-08]<br/> [6.2167e-08 6.0804e-08 5.9588e-08 ... 4.7038e-08 4.2115e-08 3.7258e-08]]</span></pre><p id="c453" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们有一个 256 x 256 的点数组，每个值对应于该位置的测量高度(以米为单位)。因为我们知道如果用纳米表示，我们的数据会更有意义，所以我们可以用这个常数来衡量我们所有的值:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="1056" class="mm mn it mh b gy mo mp l mq mr"># Convert data to nanometers (nm)<br/>afm_data *= (10**9)</span></pre><p id="dc68" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们可以开始可视化我们的数据了。我们从设置一些全局参数开始(随意编辑这些参数，但这些是我使用的设置):</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="abf8" class="mm mn it mh b gy mo mp l mq mr"># Edit overall plot parameters</span><span id="67f9" class="mm mn it mh b gy ms mp l mq mr"># Font parameters<br/>mpl.rcParams['font.family'] = 'Avenir'<br/>mpl.rcParams['font.size'] = 18</span><span id="bdb0" class="mm mn it mh b gy ms mp l mq mr"># Edit axes parameters<br/>mpl.rcParams['axes.linewidth'] = 2</span><span id="70ba" class="mm mn it mh b gy ms mp l mq mr"># Tick properties<br/>mpl.rcParams['xtick.major.size'] = 10<br/>mpl.rcParams['xtick.major.width'] = 2<br/>mpl.rcParams['xtick.direction'] = 'out'<br/>mpl.rcParams['ytick.major.size'] = 10<br/>mpl.rcParams['ytick.major.width'] = 2<br/>mpl.rcParams['ytick.direction'] = 'out'</span></pre><h1 id="630a" class="mt mn it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated"><strong class="ak">热图</strong></h1><p id="90ba" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">对于热图可视化，我们将使用<code class="fe me mf mg mh b">imshow</code>函数将我们的数据显示为图像。首先，我们创建一个图形并添加一个主轴来显示我们的图像。此外，我们将删除刻度线，因为我们将添加一个比例尺。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="dd3b" class="mm mn it mh b gy mo mp l mq mr"># Create figure and add axis<br/>fig = plt.figure(figsize=(4,4))<br/>ax = fig.add_subplot(111)</span><span id="d296" class="mm mn it mh b gy ms mp l mq mr"># Remove x and y ticks<br/>ax.xaxis.set_tick_params(size=0)<br/>ax.yaxis.set_tick_params(size=0)<br/>ax.set_xticks([])<br/>ax.set_yticks([])</span></pre><p id="cbe6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们用下面的命令显示我们的图像:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="507d" class="mm mn it mh b gy mo mp l mq mr"># Show AFM image<br/>img = ax.imshow(afm_data, origin='lower', cmap='YlGnBu_r', extent=(0, 2, 0, 2), vmin=0, vmax=200)</span></pre><p id="16ab" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">origin</code> —图像通常显示为其原点在左上角，因此通过使用<code class="fe me mf mg mh b">origin='lower'</code>我们强制原点在左下角</p><p id="8bfb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们图像的色彩映射表。所有可用的<code class="fe me mf mg mh b">matplotlib</code>色彩映射表都可以在中找到<a class="ae lh" href="https://matplotlib.org/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">，在任何色彩映射表名称中添加<code class="fe me mf mg mh b">_r</code>都会将其反转。</a></p><p id="ea52" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">extent</code>——<code class="fe me mf mg mh b">imshow</code>将使用像素绘制我们的图像，除非我们告诉它这些像素对应的范围。在这种情况下，我们知道我们的图像是 2 m x 2 m，所以我们让我们的<code class="fe me mf mg mh b">extent=(x_min, x_max, y_min, y_max)</code>等于<code class="fe me mf mg mh b">(0, 2, 0, 2)</code></p><p id="e488" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">vmin</code> —设置为颜色图最小值的值</p><p id="35cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">vmax</code> —设置为色彩映射表最大值的值</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/86808e51fb4fcb393064ab9188042de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*4_UXGcs5qBVjXs-aBAg7Bg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">我们的 AFM 显微照片的图像绘图</p></figure><p id="62bf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们应该添加我们的比例尺，这样任何查看该图的人都会对大小比例有一个概念。我们将使用<code class="fe me mf mg mh b">plt.fill_between</code>创建一个填充的矩形，然后在顶部添加一个文本标签。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="58a7" class="mm mn it mh b gy mo mp l mq mr"># Create scale bar<br/>ax.fill_between(x=[1.4, 1.9], y1=[0.1, 0.1], y2=[0.2, 0.2], color='white')</span></pre><p id="c9fc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">x</code> —我们的填充形状的 x 范围(因为我们的图像从[0，2]到指定的范围[1.4，1.9]是 0.5 米或 500 纳米)</p><p id="c1c3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">y1</code> —我们填充形状的底部 y 值(对应于<code class="fe me mf mg mh b">x</code>的值)</p><p id="9f03" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">y2</code> —我们填充形状的顶部 y 值(对应于<code class="fe me mf mg mh b">x</code>的值)</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="87f4" class="mm mn it mh b gy mo mp l mq mr">ax.text(x=1.65, y=0.25, s='500 nm', va='bottom', ha='center', color='white', size=20)</span></pre><p id="57f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">x</code> —文本的 x 轴位置</p><p id="b438" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">y</code> —文本的 y 轴位置</p><p id="a632" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">s</code> —文本字符串</p><p id="25f2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">va</code> —垂直对齐(<code class="fe me mf mg mh b">bottom</code>表示<code class="fe me mf mg mh b">y</code>对应文本底部)</p><p id="5ddc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">ha</code> —水平对齐(<code class="fe me mf mg mh b">center</code>表示<code class="fe me mf mg mh b">x</code>对应文本中心)</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8f2c1e65322bb87167fbff5ae36e47a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*RK7x1drjI4sXsA1gxePB9Q.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">添加比例尺的 AFM 显微照片</p></figure><p id="8ba8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们可以添加一个颜色条来显示图像中的颜色与高度值的对应关系。首先，我们为 colorbar 创建一个新的 axis 对象，这是通过使用<code class="fe me mf mg mh b">make_axes_locatable().append_axes</code>函数在原始轴的右侧追加一个新轴来实现的。我们将原始轴对象<code class="fe me mf mg mh b">ax</code>传递给函数:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="21ba" class="mm mn it mh b gy mo mp l mq mr"># Create axis for colorbar<br/>cbar_ax = make_axes_locatable(ax).append_axes(position='right', size='5%', pad=0.1)</span></pre><p id="bdaa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">position</code> —添加下一个轴的位置，在本例中为原始图像的右侧</p><p id="996a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">size</code> —新轴沿<code class="fe me mf mg mh b">position</code>方向的尺寸，相对于原始轴(图像宽度的 5%)</p><p id="5dfe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">pad</code> —两轴之间的填充(在绝对坐标中)</p><p id="c350" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们把这个新的轴对象变成一个颜色条:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="222c" class="mm mn it mh b gy mo mp l mq mr"># Create colorbar<br/>cbar = fig.colorbar(mappable=img, cax=cbar_ax)</span></pre><p id="63c0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">mappable</code> —映射到颜色条的图像/绘图(我们在前面使用<code class="fe me mf mg mh b">imshow</code>时创建了<code class="fe me mf mg mh b">img</code></p><p id="22c4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">cax</code> —用于颜色条的轴</p><p id="6add" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们调整色条的刻度线和标签:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="d35e" class="mm mn it mh b gy mo mp l mq mr"># Edit colorbar ticks and labels<br/>cbar.set_ticks([0, 50, 100, 150, 200])<br/>cbar.set_ticklabels(['0', '50', '100', '150', '200 nm'])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/2f55a4782f2cc27675e2dd811173bce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*rNm_yCzDuulw5S_UIB3o_w.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带有比例尺和颜色条的 AFM 显微照片</p></figure><h1 id="9882" class="mt mn it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated"><strong class="ak">等高线图</strong></h1><p id="e5ee" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">就像在大多数徒步旅行路线中发现的地形图一样，我们也可以用恒定强度的等高线来呈现三维数据。我们现在将使用等高线图绘制相同的 AFM 数据。</p><p id="9ce6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们使用与之前相同的代码，更改了以下代码行(我添加了<code class="fe me mf mg mh b">zorder=1</code>以确保等值线图位于比例尺下方，因为首先绘制的是较低的 z 顺序数字):</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="77b6" class="mm mn it mh b gy mo mp l mq mr"># Show AFM contour plot<br/>ax.contour(afm_data, extent=(0, 2, 0, 2), cmap='YlGnBu_r', vmin=0, vmax=200, zorder=1)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/484e71188c54ee24f6078089f0226f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*DD7ltxJAQL2qx_08OCEMSw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">AFM 显微图像轮廓图，带比例尺和颜色条</p></figure><p id="ba2f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们使用<code class="fe me mf mg mh b">contourf</code>而不是<code class="fe me mf mg mh b">contour</code>，我们可以创建填充轮廓，而不仅仅是轮廓线:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="91df" class="mm mn it mh b gy mo mp l mq mr"># Show AFM filled contour plot<br/>ax.contourf(afm_data, extent=(0, 2, 0, 2), cmap='YlGnBu_r', vmin=0, vmax=200)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/8db1f04a77d8ef3efdbce8193609acbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*CWmrRqBA28RIJOR1LUagQg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">AFM 显微照片填充的轮廓图，带有比例尺和颜色条</p></figure><p id="af2e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这种情况下，来自<code class="fe me mf mg mh b">imshow</code>的许多更精细的细节在<code class="fe me mf mg mh b">contour</code>或<code class="fe me mf mg mh b">contourf</code>中没有被很好地捕捉到。如果您的数据相当平滑，没有很多较小的细节，等值线图像可能比热图更好看。最终，您希望以尽可能透明和直观的方式呈现数据，因此在这种情况下，带有颜色条的热图可能是最好的。</p><h1 id="036b" class="mt mn it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated"><strong class="ak"> 3D 绘图</strong></h1><p id="37c8" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">到目前为止，我们已经将我们的图限制为二维，并使用色标让读者推断强度。如果我们想更好地理解这些强度值，我们实际上可以用 3D 来绘制数据。</p><p id="a96f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们首先用下面的代码创建一个 3D 轴，这里的关键是我们在生成轴对象时使用了<code class="fe me mf mg mh b">projection=’3d'</code>:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="cace" class="mm mn it mh b gy mo mp l mq mr"># Create figure and add axis<br/>fig = plt.figure(figsize=(8,6))<br/>ax = plt.subplot(111, projection='3d')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/10569f78fc9c717a5db7b463f151dc71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*D2q1RFVsulUJro8gKYGWPg.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">空 3D 轴对象</p></figure><p id="c70c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">灰色窗格和轴网格给我们的绘图增加了混乱，所以让我们删除它们。此外，我将再次为高度添加颜色条，因为透视视图的原因，z 轴将被压缩，所以我将删除它。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="13c9" class="mm mn it mh b gy mo mp l mq mr"># Remove gray panes and axis grid<br/>ax.xaxis.pane.fill = False<br/>ax.xaxis.pane.set_edgecolor('white')<br/>ax.yaxis.pane.fill = False<br/>ax.yaxis.pane.set_edgecolor('white')<br/>ax.zaxis.pane.fill = False<br/>ax.zaxis.pane.set_edgecolor('white')<br/>ax.grid(False)</span><span id="2c61" class="mm mn it mh b gy ms mp l mq mr"># Remove z-axis<br/>ax.w_zaxis.line.set_lw(0.)<br/>ax.set_zticks([])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/10898c32818b68d285e00b6964a2e72a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*yAlKslAkfnNF7YZQmqiTaw.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">没有背景窗格和 z 轴的空三维轴</p></figure><p id="3c62" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对于表面图，我们需要 x 和 y 值的 2D 数组来对应强度值。我们通过用<code class="fe me mf mg mh b">np.meshgrid</code>创建一个 mesh-grid 来做到这一点——我们对这个函数的输入是一个要在网格中重复的 x 值和 y 值的数组，我们将使用<code class="fe me mf mg mh b">np.linspace</code>来生成这个数组。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="79cb" class="mm mn it mh b gy mo mp l mq mr"># Create meshgrid<br/>X, Y = np.meshgrid(np.linspace(0, 2, len(afm_data)), np.linspace(0, 2, len(afm_data)))</span></pre><p id="c41a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在我们有了网格，我们可以绘制三维数据:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="c03c" class="mm mn it mh b gy mo mp l mq mr"># Plot surface<br/>plot = ax.plot_surface(X=X, Y=Y, Z=afm_data, cmap='YlGnBu_r', vmin=0, vmax=200)</span></pre><p id="af76" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">X</code>—x 值网格</p><p id="3f96" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">Y</code>—y 值的网格</p><p id="b7c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">Z</code>-z 值的网格</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/2674b799e9b95e9b7a33945501ae0639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*hqyBqmAzTgvJJlPQP27uvA.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">AFM 显微照片的 3D 绘图</p></figure><p id="3985" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">现在，我们可以调整绘图视图——我们为此控制三个参数:仰角、方位角(在 x-y 平面中)和离轴的距离，它们分别大致对应于球坐标系值<em class="ns"> φ </em>、<em class="ns"> θ、</em>和<em class="ns"> r </em>。我将方位角设置为 225，因为我们希望 x 轴和 y 轴在(0，0)处相交。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="ea59" class="mm mn it mh b gy mo mp l mq mr"># Adjust plot view<br/>ax.view_init(elev=50, azim=225)<br/>ax.dist=11</span></pre><p id="49e4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">添加颜色栏:</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="ea2b" class="mm mn it mh b gy mo mp l mq mr"># Add colorbar<br/>cbar = fig.colorbar(plot, ax=ax, shrink=0.6)<br/>cbar.set_ticks([0, 50, 100, 150, 200])<br/>cbar.set_ticklabels(['0', '50', '100', '150', '200 nm'])</span></pre><p id="5896" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe me mf mg mh b">shrink</code> —相对于其默认大小将颜色条缩小多少</p><p id="e142" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们编辑一些美感——x 和 y 轴上的刻度线、轴限制和轴标签。</p><pre class="ks kt ku kv gt mi mh mj mk aw ml bi"><span id="011f" class="mm mn it mh b gy mo mp l mq mr"># Set tick marks<br/>ax.xaxis.set_major_locator(mpl.ticker.MultipleLocator(0.5))<br/>ax.yaxis.set_major_locator(mpl.ticker.MultipleLocator(0.5))</span><span id="d8a4" class="mm mn it mh b gy ms mp l mq mr"># Set axis labels<br/>ax.set_xlabel(r'$\mathregular{\mu}$m', labelpad=20)<br/>ax.set_ylabel(r'$\mathregular{\mu}$m', labelpad=20)</span><span id="29c4" class="mm mn it mh b gy ms mp l mq mr"># Set z-limit<br/>ax.set_zlim(50, 200)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3b6f08a7ec26de0938db60a0e68ff0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*GVYJCJ3DyVO9TbnpUhSM5Q.png"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">带彩条的 AFM 显微图的 3D 绘图</p></figure><p id="211a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这个图让读者除了用颜色表示强度值之外，还能看到高度的波动。然而，噪声更大的数据集可能会导致非常混乱的 3D 绘图。</p><h1 id="6893" class="mt mn it bd mu mv mw mx my mz na nb nc ki nd kj ne kl nf km ng ko nh kp ni nj bi translated"><strong class="ak">结论</strong></h1><p id="307e" class="pw-post-body-paragraph li lj it lk b ll nk kd ln lo nl kg lq lr nm lt lu lv nn lx ly lz no mb mc md im bi translated">我希望本教程有助于解决绘制三维数据集的不同方法。在这个<a class="ae lh" href="https://github.com/venkatesannaveen/python-science-tutorial" rel="noopener ugc nofollow" target="_blank"> Github 资源库</a>中可以找到例子。感谢阅读！</p></div></div>    
</body>
</html>