# 匿名数据集

> 原文：<https://towardsdatascience.com/anonymizing-data-sets-c4602e581a35?source=collection_archive---------14----------------------->

## 获取匿名数据集的快速方法

## 什么是匿名化？

我们今天收集的许多数据可以很容易地与个人、家庭或实体联系起来。然而，使用数据而不注意保护数据所有者的身份会导致许多问题和潜在的诉讼。数据匿名化简单地说，就是确保我们不能通过查看数据来判断实际的数据所有者。

![](img/f4940828471e2de1e47b2829a53e3164.png)

作者照片

在开始任何命名练习之前，理解数据集的最终目标是很重要的。数据集的目标告诉我们如何使用它。例如，为分析项目准备数据集不同于为应用程序开发准备数据。为了简单起见，我们将关注分析性和非分析性目标。

本文将带我们了解不同类型的数据集和几种匿名化它们的方法。它还讨论了如何在分析环境中应用匿名化方法，并以一些我们可能需要匿名化的数据集的实际例子结束。

## 数据集的类型

常用的数据集有三种类型。具有组合键的数据集、具有非组合键的数据集和具有可重复 id 的数据集。包含从数据集组件创建的键的数据集(组合键)应该与键与任何列都没有关系的数据集(非组合键)区别对待。同样，具有重复键的数据集应该与具有唯一 id 的数据集区别对待。

示例 1:

![](img/761ed5e32ccc23ab15505aa7bf17fbfb.png)

两种表格

示例 1 中的表 A 有一个由表中的一些列组成的键，而表 B 是一个键与其余数据无关的示例。匿名表 A 应该不同于 b。

可能使用复合 id 的真实情况包括但不限于

一些医院系统使用客户年龄和姓名的组合来创建标识符。

公司电子邮件通常是员工姓名的某种组合

车辆或贷款编号通常基于一些车辆或贷款信息等

重复的 id 通常出现在收集和存储使用或访问数据的系统中。也就是说，有几种方法可以匿名化这些数据集。

## 匿名化数据集的主要方法

## **1。更换钥匙**

在某些情况下，移除密钥并用随机数替换它就足够了。但是，必须注意适应数据的组成。

*简单情况:非复合唯一键*

![](img/718a3d003575f601fce38d6f5941d8db.png)

在上面给出的简单例子中，请注意该表与示例 1 中的表 B 相同。在这里，密钥可以很容易地用随机数或身份生成器来替换。

C oding 提示:您可以使用 spark 中的‘单调递增 id’函数或 python 中的‘uuid’包或 R 中的‘ids’包或 SQL 中的‘NewId’函数来创建一个随机 id。

*数据完整性案例:重复键*

考虑到表的组成，我们可能会发现 id 是重复的，但重复的是我们想要保留的有效数据点。在这种情况下，我们希望每次都用相同的随机数替换相同的密钥。

![](img/0d635912614ff83693106b6f34bf31fd.png)

C oding 提示:为此，I)创建一个具有唯一 id 的子集 ii)添加一个具有随机数的新列，然后 iii)将其加入到初始数据集中，iv)删除旧的键列。这里可以使用“删除”、“连接”和“选择”或“子集”功能。

![](img/62164f57f4bbdc5242dd2940cb47a1b5.png)

**表 E 和表 D**

![](img/6afac0c265150dc69618b835325ff90f.png)

## 2.当移除识别键还不够时

如果用随机密钥替换密钥还不够，我们可以采取其他方法，例如:

## 2A。哈希:

*一、散列一些列:*

散列是使用固定长度代码来表示数据列的最广为人知的方法之一。哈希将数据转换为固定大小的字母数字或数字代码，这种代码不容易被逆转(如果有逆转的话)。请注意，这不同于加密。

哈希的两个关键特性:

这在技术上是可行的，但实际上是不可能逆转的，即使是最简单的散列，即你可以从 A 到散列(A ),但不能从散列(A)到 A。

散列相同的值每次应该提供相同的输出，并且没有两个输入应该得到相同的散列输出(冲突)。

Coding 提示:在大多数语言中,‘sha’或‘hash’函数可以实现这个功能，例如:spark、hive 中的‘sha()’或 python 中的 hash 或 R(需要 hash 包)或 SQL 中的‘hash bytes’。还记得数据完整性案例吗？是的，我们可以用这种方法来代替 ids！😄

*二。创建基于密钥的代码:*

这是一个类似于哈希的概念。假设您有一个数据集，其中的键是一些列的组合。出于某种原因，您决定不使用哈希函数，而是希望对数据进行系统化和可重复的处理，并允许您使用相同的键连接到其他数据集。常见的方法是从键列(和/或复合列)中删除或替换特定位置的字符。

使用实施例 1 中的表 A:

![](img/12938e61f5d4919024b14aa181839cbd.png)

**表 A**

删除密钥的第三个字符:

![](img/ca76ac1c1760596e1377a60a1344cd7c.png)

或者替换密钥的第三个字符:

![](img/73b1137a0cb550eaf914c6234fe3838c.png)

在表 H 中，所有第三个字符都被替换为“m”。你可以变得更复杂，做一个映射，第一行得到一个 m，然后下一行得到一个 n …等等。

当处理这样的数据集时，我建议也进行部分编码、散列或删除其中一个组合列。

C oding 提示:这里可以使用 python 中的切片或者 spark、hive、R 或者 SQL 中的' substring '(或者' substr ')函数。

## 2B。随机混合:

在某些情况下，我们可能需要与实际数据集具有相同结构和特征的数据。假设我们需要开发一个应用程序，但是团队还没有开发出一种安全的数据传输方式。一个快速的解决方案是使用现有数据创建假数据，而不是暂停开发直到解决这个问题。

一种方法是随机混合每一列中的数据。

Ex —回想一下示例 1 中的复合表？

![](img/c2482c9da453b99a0d139ce51978a32f.png)

我们可以这样混合它:

![](img/88e68edf9031cbabedf9a41177067fa8.png)

简单混合

*二世。现在你可能会说，如果有人知道键是一些列的组合，他仍然可以从这些信息中猜出正确的数据所有者。有两件事你可以快速完成*:

a)创建完全伪造的数据行并添加到数据集，在混合之前删除一些实际的数据行。

![](img/318948360e874fbc96d0331088095808.png)

现在我们混合:

![](img/82dabe609d407516c256c43702bd2196.png)

丢弃的数据混合

b)替换某些列中的某些字符。

你想对有意义的列这样做。替换城市或语言列中的字符(如果有)实际上不起作用，因为这可能被视为输入错误，很容易纠正。此外，在数字列中用字符串替换数字可能会导致错误，因为这会改变列的数据类型或被视为坏数据。这可能会误导应用程序开发或分析产品开发。

我们可以这样修改上面的表 I:

![](img/1c6ef8ddd8febfd1e70179431930c5d7.png)

在上表中，请注意在某些情况下会添加一个字符或完全替换一个名称。表 J 是 II a)和 II b)的组合

# 3.为分析或类似工作准备数据:

有很多时候，我们需要数据进行分析或一些类似的目的，但不能分享敏感信息。

I .与上述情况类似，我们可以混合数据，并在混合前替换或添加行。然而，随机混合或改变数据可能会导致趋势丢失，而这在数据分析中是很重要的。如果您决定混合或添加数据，必须注意保持相同的模式、频率、范围、数据结构等，以免扭曲数据模式或引入异常值。在这种情况下，组内混合可以工作，尽管这稍微复杂一些。

二。散列和混合也是可行的，但是如上所述，如果组被认为对分析项目很重要，则必须注意在组内混合。

三。聚合数据—对于某些数据，我们可以创建聚合，这些聚合可以提供分析用途的信息，但不够精细，无法追溯到数据所有者。例如，代替电话号码，我们可以使用区号或创建区域标志。

四。一种首选的方法是对数据集中的敏感信息进行哈希运算，并根据其意义进行分组。通过对列进行分组和散列，可以在隐藏实际数据的同时维护模式。

对于所有必须匿名的数据集，重要的是删除数据中任何唯一的和/或个人可识别的信息，如电话号码、社会安全号码、银行号码等。唯一数据的一个例子是，关于汽车的数据集中有一辆粉红色的野马，关于房屋的数据集中有一座紫色的大厦，关于畸形的数据集中有一个象人，等等。

## 现实生活中的例子

一些需要匿名化数据的情况包括但不限于-

1.使用数据创建数据产品。构建机器学习模型、开发应用程序、呈现汇总统计数据等

2.同一公司但不同项目组的人员，其中一个组不允许查看数据

3.创建公共数据集

4.需要数据，但由于数据传输安全或隐私原因而无法共享实际数据的任何情况。

5.GDPR 或隐私法适用的任何情况

感谢您的阅读！😃