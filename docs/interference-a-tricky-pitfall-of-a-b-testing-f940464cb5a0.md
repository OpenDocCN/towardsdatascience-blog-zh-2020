# 干扰:A/B 测试的棘手陷阱

> 原文：<https://towardsdatascience.com/interference-a-tricky-pitfall-of-a-b-testing-f940464cb5a0?source=collection_archive---------34----------------------->

![](img/1549ca7c2705a1dc0318d5018f833279.png)

来源:pixabay

虽然进行 A/B 测试来测试产品功能或营销活动的变化令人兴奋，但数据科学家应该知道 A/B 测试的常见陷阱，如干扰、内生性问题和对统计结果的误解。我对干扰特别感兴趣，因为它总是以一种非常微妙的方式出现，即使是一个有经验的数据科学家也可能无法识别这个陷阱。在这篇文章中，我想简单地谈谈这个问题，包括一个具体的干涉例子。我还将讨论在设计实验时如何识别这个问题，以及一些常见的干扰解决方案。

# 共享资源引起的干扰:拼车市场实例

![](img/7eb431d94045bbe1eaa1f934455cad57.png)

徐战旗的功劳

假设一家虚构的拼车公司 Lyber 希望通过改变移动应用程序的用户界面来简化搭载乘客的步骤。衡量这一改变成功与否的标准是司机在一段时间内的乘车次数。数据科学团队将纽约的司机随机分配到治疗组(新 UI)和对照组(原始 UI)，并运行为期 2 周的 A/B 测试。团队记录关键指标，并对其执行双样本 t 测试。在检查了统计结果后，该团队得出结论，p 值非常重要，声称新的用户界面有助于司机搭载更多的乘客，赚更多的钱。作为一名经理，你刚刚结束了与 DS 团队的会议，你必须决定产品团队是否应该根据这个实验的结果来实现新的 UI。

事实上，这个例子只不过是一个常见的 A/B 测试面试问题:我们无法从这个实验中得出任何结论，因为由于两组司机都在同一个地方(纽约)，他们共同构成了市场的供应方，共同分享需求。如果接受治疗的司机利用新的用户界面，他们将影响市场的共享需求。结果，控制组的司机会比平时少坐几个人，坐几趟车。简而言之，观察到的治疗效果是对真实治疗效果的夸大。我们不知道真正的治疗效果是否有统计学意义。

# 干涉的想法

希望上面的例子能给你一个干扰的基本概念。背后的想法非常简单:给定多个治疗组，一个组的行为会影响其他组的行为。这正是上面案例中发生的情况:一组中去找司机的乘客越多，另一组中可供司机使用的乘客就越少。

# 干扰类型

一般来说，干扰可能以两种方式发生:间接连接和直接连接。

**间接连接**当两个单元因为潜在变量或共享资源而连接时发生。上面的 Lyber 案例是一个间接联系的完美例子，从这个意义上说，治疗组和对照组共享客户池。子用户实验单元的设计也可能导致间接连接(Kohavi et al .，2020):假设对 web UI 的新想法进行实验，并且实验单元在页面视图级别而不是在用户级别。在这种情况下，“用户”是连接治疗组和对照组的潜在变量。结果，两个版本的 web UI 都可能暴露给同一个用户，使得实验结果不可靠。

**另一方面，直接连接**发生在两个单元或者在同一个社交网络中或者有物理接触的时候。这可能是 LinkedIn 的工程团队将干扰视为‘网络效应’的原因。这里我想引用圣雅克(2019)提供的一个直接连接的例子:

“想象一下:我的朋友是一项实验的目标，该实验为她提供了更好的消息传递体验。我不是目标，我的消息传递体验没有改变。然而，她更好的信息体验使她花更多的时间在网站上，发送更多的信息，包括一些给我的信息。然后我回复她，并在网站上花更多的时间。这里发生了什么？我的朋友收到了一个新功能，这个事实对我产生了影响，尽管我没有参与实验。有干扰。”

在这个虚构的实验中，尽管作者没有接受治疗，但他与消息应用的互动受到了治疗组中一位朋友的影响。

# 设计实验时识别干扰

干扰给假设检验带来了偏倚误差，使得整个实验不可靠。为了避免干扰问题，考虑一个极端的情况:如果改变真的有效，并使治疗组的关键指标增加了 10 倍，这会影响对照组的关键指标吗？如果答案是肯定的。然后，您可能想要浏览我在下面讨论的一些解决方案:)

# 干扰的可能解决方案(在你意识到它之后！)

一个可能的解决方案是改变随机化单元。

如果干扰归因于单元的**地理接近度**，我们可以在区域级别随机化单元。Vaver 和 Koehler (2011)设计了一个实验，将感兴趣的地理区域(如国家)划分为一组区域。然后将每个区域随机分配给治疗组或对照组。作者还建议平衡其他混杂变量的治疗和对照区域(即分组随机化)以减少方差。

类似地，在**社交网络**的背景下，我们可以基于“它们干扰的可能性”构建网络节点的集群(Kohavi 等人，2020)。集群可以作为实验单元。

或者，我们也可以使用**时间间隔**作为随机化水平。别忘了考虑时间因素(工作日/周末；一天中的小时)。配对 t 检验是减少方差的好方法。(科哈维等人，2020 年)

请记住，当改变实验单位时，偏差-方差权衡仍然存在:由于干扰效应，更具体的级别(如用户)会导致较小的方差和较大的偏差。另一方面，更一般的水平，如时间间隔或区域，由于组内方差，导致更小的偏差但更大的方差。Chamandy 的文章(2016)对这种权衡给出了明确的解释。

# 最后但并不是最不重要的

这篇文章背后的动机是帮助人们获得干扰的基本概念。我还鼓励您阅读下面的参考列表，因为它们提供了技术行业最聪明的数据科学家如何解决干扰问题的大致情况。我也要感谢徐占奇根据和 Lyft 的标志为本文中虚构的公司 Lyber 设计了一个非常时尚的标志。我希望这不会是你对这篇文章的唯一记忆:)

# 参考

n . chamandy(2016 年 9 月 2 日)。拼车市场的实验。检索自[https://eng . lyft . com/experimentation-in-a-ride sharing-market place-b 39 db 027 a 66 e](https://eng.lyft.com/experimentation-in-a-ridesharing-marketplace-b39db027a66e)

柯哈维，r .，唐，d .，，徐，Y. (2020)。可信的在线控制实验:A/B 测试实用指南。剑桥大学出版社。

圣雅克，G. (2019，6 月 5 日)。检测干扰:A/B 测试的 A/B 测试。2020 年 5 月 22 日检索，来自[https://engineering . LinkedIn . com/blog/2019/06/detecting-interference-an-a-b-test-of-a-b-tests](https://engineering.linkedin.com/blog/2019/06/detecting-interference--an-a-b-test-of-a-b-tests)

Vaver，j .，& Koehler，J. (2011 年)。使用地理实验测量广告效果。