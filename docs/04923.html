<html>
<head>
<title>Spread of COVID-19 with Interactive Data Visualization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过交互式数据可视化传播新冠肺炎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/spread-of-covid-19-with-interactive-data-visualization-521ac471226e?source=collection_archive---------22-----------------------#2020-04-29">https://towardsdatascience.com/spread-of-covid-19-with-interactive-data-visualization-521ac471226e?source=collection_archive---------22-----------------------#2020-04-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class="is it gq gs iu ab cb"><figure class="iv iw ix iy iz ja jb paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/a3c7ed842cc35493d5f56c647effebec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/1*QLgT5N2uv3WmzmQN2AmZ3A.gif"/></div></figure><figure class="iv iw ji iy iz ja jb paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><img src="../Images/c2beeaa99f883b33165ccc5dabd3ff0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/1*ro7nTGn0NScYE1tu372cIg.gif"/></div><p class="jj jk gk gi gj jl jm bd b be z dk jn di jo jp translated">新冠肺炎传播的条形图比赛和交互式Choropleth地图</p></figure></div><div class=""/><div class=""><h2 id="e7bb" class="pw-subtitle-paragraph kp jr js bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">一个完整的指南条形图比赛和互动Choropleth地图新冠肺炎疫情与Python。</h2></div><blockquote class="lh"><p id="62ad" class="li lj js bd lk ll lm ln lo lp lq lr dk translated"><em class="ls">“视觉化给你你不知道的问题的答案”——</em><a class="ae lt" href="https://www.cs.umd.edu/users/ben/" rel="noopener ugc nofollow" target="_blank">本·施耐德曼</a></p></blockquote><p id="2b3f" class="pw-post-body-paragraph lu lv js lw b lx ly kt lz ma mb kw mc md me mf mg mh mi mj mk ml mm mn mo lr in bi mp translated"><span class="l mq mr ms bm mt mu mv mw mx di">在</span>数据科学时代，我们必须说数据就是美。我们甚至无法想象没有数据的日子。现代技术或多或少都依赖于数据驱动的流程。但是只有原始数据在经过处理之前对我们没有任何吸引力。当数据被处理时，我们从中获得信息。信息可以是视觉的、统计的、预测的等等。如果我们能从美学角度将数据可视化，我们就能轻松洞察数据。它提供了数据的概述。适当的视觉化使人对人脑中的整个场景有一个清晰的直觉。</p><blockquote class="my mz na"><p id="8d0d" class="lu lv nb lw b lx nc kt lz ma nd kw mc ne nf mf mg ng nh mj mk ni nj mn mo lr in bi translated">“我们大多数人需要听音乐才能理解它有多美。但这通常是我们展示统计数据的方式:我们只展示音符，不演奏音乐”——汉斯·罗斯林 </p></blockquote><p id="78bb" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">汉斯·罗斯林指出了数据可视化的实际思想。数据可视化对于每一个职业都是必不可少的。在这篇文章中，我们将尽最大努力代表新冠肺炎的情况，在世界各地。同时，我们将学习一些使用python的交互式绘图技术。</p><p id="bb97" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">Python提供了如此多的库，让我们的生活变得简单而美好。我们将通过新冠肺炎数据集学习一些有趣的绘图技术。</p><p id="5610" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">当你看完整篇文章时，你将能够创建动画，如文章中较难的部分所示。阅读文章不需要背景知识。它只不过是几行python代码。让我来引导。</p></div><div class="ab cl nk nl hy nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="in io ip iq ir"><h2 id="f1dc" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated">路标</h2><p id="18df" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated">Python为我们提供了使用不同库完成不同任务的灵活性。这里，我们将使用<code class="fe op oq or os b">matplotlib </code>和<code class="fe op oq or os b">plotly </code>库，通过<a class="ae lt" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset#time_series_covid_19_deaths.csv" rel="noopener ugc nofollow" target="_blank">新冠肺炎</a>数据集获得带有条形图race和choropleth map的可视化输出。</p><ul class=""><li id="bcaf" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated">为我们想要的图进行少量的数据预处理。</li><li id="1fa8" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated">使用<a class="ae lt" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset#time_series_covid_19_deaths.csv" rel="noopener ugc nofollow" target="_blank">新冠肺炎</a>数据集对确诊、恢复和死亡病例进行时尚的条形图竞赛。</li><li id="1d66" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated">具有新冠肺炎数据集的交互式choropleth地图</li></ul><p id="0dba" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">让我们进入下一步…</p></div><div class="ab cl nk nl hy nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="in io ip iq ir"><h2 id="71f2" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated">我们期望的数据可视化的✴Data预处理</h2><p id="75ae" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated">从kaggle 下载<a class="ae lt" href="https://www.kaggle.com/sudalairajkumar/novel-corona-virus-2019-dataset#time_series_covid_19_deaths.csv" rel="noopener ugc nofollow" target="_blank">新冠肺炎数据集。数据组织得很好，每天都在更新。我使用的数据集最后更新于2020年4月25日。</a></p><ul class=""><li id="7909" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated">进口熊猫与<code class="fe op oq or os b">dataframe</code>、<code class="fe op oq or os b">numpy </code>一起进行不同的数学运算，与<code class="fe op oq or os b">matplotlib </code>一起进行条形图比赛。</li></ul><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="a65f" class="nr ns js os b gz pp pq l pr ps">import pandas as pd<br/>import numpy as np<br/>import matplotlib.ticker as ticker<br/>import matplotlib.pyplot as plt</span></pre><p id="e35a" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">该数据集包含所有受影响国家的冠状病毒确诊阳性病例、死亡病例和康复病例。如果我们想看到数据，它会是这样的。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="ca34" class="nr ns js os b gz pp pq l pr ps">covid = pd.read_csv('covid_19_data.csv')<br/>covid.head(5)</span></pre><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj pt"><img src="../Images/242c07f3210e704c44f79b2c82e43767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJqY4gyyGUAlOF6NCRUmbg.png"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">新冠肺炎数据集的前5行</p></figure><p id="ffa3" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">现在，我们想要重命名这些列，因为这将有助于我们更容易地操作数据。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="4d4b" class="nr ns js os b gz pp pq l pr ps">covid.rename(columns={'ObservationDate':'Date','Province/State':'State','Country/Region':'Country'},inplace=True)</span></pre><p id="b13d" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">从数据集的前5行，我们知道有一些冗余和不必要的列，我们将离开这些列，只保留必要的列。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="2124" class="nr ns js os b gz pp pq l pr ps">covid=covid[["Date","State","Country","Confirmed","Deaths","Recovered"]]</span></pre><p id="480d" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我们的主要目标是制作一个基于国家的条形图比赛，这样我们可以按日期对国家进行分组，以找出一个国家的病例总数。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="9dc4" class="nr ns js os b gz pp pq l pr ps">grouped = covid.groupby(['Country','Date'])<br/>covid_confirmed = grouped.sum().reset_index().sort_values(['Date'],ascending=False)</span></pre><p id="1fb6" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我们将输出数据帧保存到<code class="fe op oq or os b">covid_confirmed </code>，如下所示。</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div class="gi gj pu"><img src="../Images/21e3616f762013cd0dc73c350ba092b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*RsrkH_bfuNNBtLajb16EqQ.png"/></div></figure><p id="140b" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">找出冠状病毒确诊病例最多的十个国家，绘制初步柱状图。我们正在步入条形图竞赛的台阶。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="5540" class="nr ns js os b gz pp pq l pr ps">df = (covid_confirmed[covid_confirmed['Date'].eq("04/25/2020")].sort_values(by="Confirmed",ascending=False).head(10))</span></pre><p id="cadf" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">输出</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div class="gi gj pv"><img src="../Images/c1bf8c6bd38f1811f2d9bb782d531efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*yMKIwawN-veS2mvQvhbKKQ.png"/></div></figure><h1 id="2178" class="pw ns js bd nt px py pz nw qa qb qc nz ky qd kz oc lb qe lc of le qf lf oi qg bi translated">第一部分</h1><p id="5333" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated"><strong class="lw jt">与冠状病毒传播的matplotlib进行条形图竞赛</strong></p><h2 id="8565" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated">用matplotlib制作的✴Step逐级竞速条形图</h2><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="cd6c" class="nr ns js os b gz pp pq l pr ps">#plotting the initial horaizontal barchart <br/>fig, ax = plt.subplots(figsize=(15, 8))<br/>ax.barh(df['Country'], df['Confirmed'])<br/>plt.xlabel('Number of Confirmend Cases')<br/>plt.ylabel('Country')</span></pre><p id="7a42" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">这几行代码将使用<code class="fe op oq or os b">matplotlib.</code>生成以下输出</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qh"><img src="../Images/83afe1216338f754351671e4ac89d2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7r2G1pQSBZmFZWID4y6wg.png"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">前10个受影响国家的条形图(从下到上)</p></figure><p id="5db0" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">但是我们想把最高确诊病例放在最上面。为此，我们需要翻转数据框。<code class="fe op oq or os b">df[::-1] ,</code>这段代码将翻转数据帧<code class="fe op oq or os b">df</code></p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="e4c5" class="nr ns js os b gz pp pq l pr ps">dff=df[::-1]<br/>fig, ax = plt.subplots(figsize=(15, 8))<br/>ax.barh(dff['Country'], dff['Confirmed'])<br/>plt.xlabel('Number of Confirmed Cases')<br/>plt.ylabel('Country')</span></pre><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qi"><img src="../Images/43484e277b8380c01379ae3c430326bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fGvaqzG2UQdNxCDE6MKqg.png"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">前10个受影响国家的条形图(从上到下)</p></figure><p id="a815" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">哇！我们比预期的产量领先了几步。上面的条形图似乎不太好。我们需要图表中更多的信息和视觉色彩。为此，我们可以遵循以下技巧</p><blockquote class="my mz na"><p id="cb93" class="lu lv nb lw b lx nc kt lz ma nd kw mc ne nf mf mg ng nh mj mk ni nj mn mo lr in bi translated">I .用<em class="js">不同颜色</em>对每个国家进行颜色编码</p><p id="f122" class="lu lv nb lw b lx nc kt lz ma nd kw mc ne nf mf mg ng nh mj mk ni nj mn mo lr in bi translated">二。具有固定数量颜色的颜色代码</p><p id="e45d" class="lu lv nb lw b lx nc kt lz ma nd kw mc ne nf mf mg ng nh mj mk ni nj mn mo lr in bi translated">三。十大受影响国家的10种不同颜色。</p></blockquote><p id="28fa" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我会向你展示每一步。</p><ul class=""><li id="3acc" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated">用字典用不同的颜色给每个国家编码。</li></ul><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">国家随机颜色编码代码</p></figure><p id="79c7" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><code class="fe op oq or os b">colors</code>保存国家名称的字典作为关键字，颜色代码是每个国家的值。</p><ul class=""><li id="d38e" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated">您也可以使用以下方法。</li></ul><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="f2c6" class="nr ns js os b gz pp pq l pr ps">colors = dict(zip(df_date_series.Country.unique(),['#adb0ff', '#ffb3ff', '#90d595', '#e48381', '#f7bb5f','#fb6b19','#1fb1fb'] * 31<br/>))</span></pre><ul class=""><li id="5ff6" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated">只需为10个受影响的国家设置10种颜色代码</li></ul><p id="8acd" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">该方法用于功能部分显示的<code class="fe op oq or os b">draw_barchart</code>功能。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="b9f2" class="nr ns js os b gz pp pq l pr ps">color=["#980505","#CD1212","#D84E4E","#CB6262","#D39B5F","#F7EC10","#D0F710","#9CF710","#B4D67F","#969C8E"]</span></pre><p id="e3bd" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">但是，我对下面的条形图使用第一种方法。</p><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">彩色条形图代码</p></figure><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj ql"><img src="../Images/ffc4c24563370211315134758d06ab97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5seXBTdach6kuJEv1LgjrA.png"/></div></div></figure><p id="f84e" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt">恭喜</strong>！我们正处于新冠肺炎数据集条形图竞赛的最后一步。我们将创建一个功能与上述所有代码和一些时尚的集成。</p><p id="3d02" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><a class="ae lt" rel="noopener" target="_blank" href="/bar-chart-race-in-python-with-matplotlib-8e687a5c8a41">“用Matplotlib进行Python中的条形图竞赛</a>”这篇文章对我帮助很大。获得更好的条形图样式。我从文章中引用了一些波兰风格的功能，</p><ul class=""><li id="fbe1" class="ot ou js lw b lx nc ma nd md ov mh ow ml ox lr oy oz pa pb bi translated"><strong class="lw jt">文本:</strong>更新字体大小、颜色、方向</li><li id="75bf" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated"><strong class="lw jt">轴</strong>:移动X轴到顶部，添加颜色&amp;字幕</li><li id="140f" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated"><strong class="lw jt">网格</strong>:在横条后添加线条</li><li id="d9ea" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated"><strong class="lw jt">格式</strong>:逗号分隔值和轴标记</li><li id="fcd7" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated">添加标题、致谢名单、装订线空间</li><li id="e8ae" class="ot ou js lw b lx pc ma pd md pe mh pf ml pg lr oy oz pa pb bi translated"><strong class="lw jt">移除</strong>:盒框、y轴标签</li></ul><p id="9af0" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我们将使用这些东西为我们的条形图比赛进行美学设计。</p><p id="01a8" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt"> <em class="nb">功能</em> </strong></p><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div></figure><p id="512c" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">在<code class="fe op oq or os b">draw_barchart</code>函数中，我实现了第三个颜色代码选项。我用10种颜色代码列表为前10个受影响的国家设置了固定颜色。</p><p id="48f2" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">对于单个函数调用，对于<code class="fe op oq or os b">draw_barchart(“04/25/2020”).</code>，函数将输出如下</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qm"><img src="../Images/88bca8fbed5de6231977a8727b2feca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9W_adeEU7mCSnN7H1on3ww.png"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">确诊病例的时尚条形图</p></figure><p id="5f3f" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">制作一部动画是我们的最终目标，我们打算这么做。你准备好了吗？这是你的动画代码。</p><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">用draw_barchart函数制作动画的代码</p></figure><p id="d4f7" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">现在我们有了下面的动画。</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qn"><img src="../Images/03bccece817f03fa9fb9cf28258c65c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CvK9gqCWsiq6-rFeYKPL7Q.gif"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">条形图竞赛动画</p></figure><p id="1554" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">除了使用HTML，还可以使用<code class="fe op oq or os b">animator.save() </code>方法保存动画。如果将参数<code class="fe op oq or os b">case </code>改为<code class="fe op oq or os b">Deaths </code>或<code class="fe op oq or os b">Recovered </code>，动画将显示<code class="fe op oq or os b">Deaths </code>和<code class="fe op oq or os b">Recovered</code>的条形图比赛。</p><h1 id="9d95" class="pw ns js bd nt px py pz nw qa qb qc nz ky qd kz oc lb qe lc of le qf lf oi qg bi translated">第二部分</h1><p id="b433" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated"><strong class="lw jt">互动动画冠状病毒分布图</strong></p><p id="9475" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">在本文的最后，我们将创建一个交互式choropleth地图，如下图所示。</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qo"><img src="../Images/c72dc62b512c354e277a018ced8f6ff5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QLgT5N2uv3WmzmQN2AmZ3A.gif"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">使用新冠肺炎数据集的交互式动画</p></figure><h2 id="c1a7" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated">数据分析和预处理的✴Little位</h2><p id="3d67" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated">我们不需要与任何没有确诊电晕病例的国家打交道。因此，我们将删除没有冠状病毒确诊病例的行。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="9259" class="nr ns js os b gz pp pq l pr ps">modified_confirmed = covid_confirmed[covid_confirmed.Confirmed &gt; 0]</span></pre><p id="26fd" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">为了制作有效的冠状动脉分布图，我们必须有可区分数量的冠状病毒感染病例。让我们对带有核密度图的新冠肺炎数据集有一些直觉。</p><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">kde绘图的代码</p></figure><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qp"><img src="../Images/a7dfb587551a27567522d4e65a1ef6d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAiqIhk8XTZCi3BBHBuj5Q.png"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">包含原始确诊病例和log10确诊病例的kde图</p></figure><p id="b4df" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">第一幅图显示了大多数国家的价值观被浓缩到一个点上。但是当我们用log10值来绘制这些值时，它显示了更多的自然分布。这表明，如果我们使用原始的确诊病例数，我们无法区分地图的颜色。因为大多数国家都会用相似类型的颜色来绘制。为了获得更好的结果，我们必须包含数据集的<code class="fe op oq or os b">log10 </code>值。让我们开始吧。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="c34f" class="nr ns js os b gz pp pq l pr ps">modified_confirmed['Affected_Factor'] = np.log10(modified_confirmed.Confirmed)</span></pre><p id="4901" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">现在，我们的modified_confirmed数据集如下所示。</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div class="gi gj qq"><img src="../Images/e0239a733437f4d7a4f348dc09241c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*VSAd2NODhwYpMkjZ5jh6Ag.png"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">修改确认数据帧的前5行</p></figure><p id="815b" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">是啊！我们根据确诊病例的<code class="fe op oq or os b">log10 </code>值在数据框中添加了一个名为<code class="fe op oq or os b">Affected_Factor </code>的列。我们离最终的交互式choropleth地图仅一步之遥。</p><h2 id="543d" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated">✴Creating Choropleth地图使用Plotly</h2><p id="86c0" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated"><strong class="lw jt">关于Plotly库</strong></p><p id="a629" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><code class="fe op oq or os b">plotly </code> Python库(<code class="fe op oq or os b"><a class="ae lt" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank">plotly.py</a></code>)是一个交互式的<a class="ae lt" href="https://github.com/plotly/plotly.py" rel="noopener ugc nofollow" target="_blank">开源</a>绘图库，支持40多种独特的图表类型，涵盖了广泛的统计、金融、地理、科学和三维用例。</p><p id="1a73" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt">安装</strong></p><p id="ee25" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">如果您使用anaconda环境，您可以在<code class="fe op oq or os b">conda </code>注释提示符下使用下面的<code class="fe op oq or os b">conda </code>命令安装这个库。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="1b73" class="nr ns js os b gz pp pq l pr ps">conda install -c plotly plotly</span></pre><p id="9dd0" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><a class="ae lt" href="https://anaconda.org/plotly/plotly" rel="noopener ugc nofollow" target="_blank">你也可以查看anaconda的官网了解安装过程。</a>对于其他环境，可以使用<code class="fe op oq or os b">pip install</code>。</p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="b59e" class="nr ns js os b gz pp pq l pr ps">$ pip install plotly</span></pre><p id="396d" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt">导入必要的模块</strong></p><pre class="ph pi pj pk gu pl os pm pn aw po bi"><span id="402a" class="nr ns js os b gz pp pq l pr ps">import plotly as py<br/>import plotly.express as px</span></pre><p id="f8b4" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我们将使用带有<code class="fe op oq or os b"><strong class="lw jt">plotly.express</strong> </code>模块的新冠肺炎数据集绘制交互式等值线图。现在我们将为交互式地图编写最终代码。</p><figure class="ph pi pj pk gu iw"><div class="bz fq l di"><div class="qj qk l"/></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">交互式choropleth的代码</p></figure><p id="7719" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">我们已经向<code class="fe op oq or os b">plotly.express </code>对象<code class="fe op oq or os b">px.</code>传递了一些参数</p><p id="b227" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">下面是参数的简短描述。</p><p id="d50e" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><code class="fe op oq or os b">Dataframe: </code>我已经用<code class="fe op oq or os b">[::-1]</code>反转了数据帧<code class="fe op oq or os b">modified_confirmed</code>。因为数据帧是根据最近到过去的日期排序的，但我们需要显示冠状病毒开始影响人类的日期的动画。</p><p id="fe7c" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><code class="fe op oq or os b">location </code>根据国家栏设置参数。</p><p id="7939" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">所有其他参数定义都作为注释嵌入到代码中。</p><figure class="ph pi pj pk gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="gi gj qr"><img src="../Images/fd149bd0c1c9bd99e0d25506a0362a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gHb6oUnXfj_i_asIj4jCzA.gif"/></div></div><p class="jj jk gk gi gj jl jm bd b be z dk translated">新冠肺炎传播的交互式choropleth地图</p></figure><p id="53c4" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt">剧情中的</strong> <code class="fe op oq or os b"><strong class="lw jt">Affected_Factor </strong></code> <strong class="lw jt">传说预示着什么？</strong></p><p id="df10" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">虽然我在预处理部分提到过，但图例<code class="fe op oq or os b">Affected_Factor </code>可能会令人困惑。这是确诊病例的<code class="fe op oq or os b">log10 </code>值。从核密度图中，我们得到了对确诊病例值的直觉。不同国家的确诊病例数非常接近。如果用确诊病例的数量来区分不同国家的颜色，我们可能无法区分颜色的变化。大多数国家将被标上相似的颜色。为了减少问题，我们计算了确诊病例的<code class="fe op oq or os b">log10 </code>值。更容易辨别。第二个内核密度图也表明了这一事实。也可以自己去查一下。</p><p id="d827" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">现在，我们的交互式choropleth地图已经准备好了。这张地图提供了新冠肺炎教在全世界传播的信息。随着时间的推移，随着确诊冠状病毒病例的增加，地图的颜色也在发生变化。我们也可以通过鼠标指针找到所有的信息。地图还支持放大和缩小。</p><h2 id="3612" class="nr ns js bd nt nu nv dn nw nx ny dp nz md oa ob oc mh od oe of ml og oh oi oj bi translated"><strong class="ak">结论</strong></h2><p id="97ab" class="pw-post-body-paragraph lu lv js lw b lx ok kt lz ma ol kw mc md om mf mg mh on mj mk ml oo mn mo lr in bi translated">数据可视化是一目了然地呈现任何事物总体状况的最佳方式。丰富python库使我们变得更容易。我们只需要知道如何使用它，功能如何工作。官方文档在这方面可以帮到你很多。</p><p id="eb41" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">如果您想获得完整的项目，只需访问<a class="ae lt" href="https://github.com/Zubair063/Data-Visualization/blob/master/Covid%20visualization/Covid19_viz.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub库。</a>你也可以从<a class="ae lt" href="https://nbviewer.jupyter.org/github/Zubair063/Data-Visualization/blob/master/Covid%20visualization/Covid19_viz.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>查看整个jupyter笔记本。</p><p id="d5dc" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">Python支持这么多可视化库。其中最流行的是matplotlib，它是一个巨大的库。您还可以找到其他可视化库的文档，如<a class="ae lt" href="http://seaborn" rel="noopener ugc nofollow" target="_blank"> seaborn </a>、<a class="ae lt" href="https://geopandas.org/" rel="noopener ugc nofollow" target="_blank"> geopandas </a>、<a class="ae lt" href="https://geopy.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> geopy </a>、<a class="ae lt" href="https://plotly.com/" rel="noopener ugc nofollow" target="_blank"> plotly </a>等。更美观的数据绘图。</p><p id="9062" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated">如有任何疑问，请在评论区告诉我。</p><p id="1852" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><em class="nb">感谢您花时间阅读本文。</em></p><p id="ac2d" class="pw-post-body-paragraph lu lv js lw b lx nc kt lz ma nd kw mc md nf mf mg mh nh mj mk ml nj mn mo lr in bi translated"><strong class="lw jt">【注</strong> : <a class="ae lt" href="http://towardsdatascience.com/" rel="noopener" target="_blank">走向数据科学</a>是一份主要基于数据科学和机器学习研究的媒体出版物。我们不是健康专家或流行病学家，本文的观点不应被解释为专业建议。要了解更多关于疫情冠状病毒的信息，你可以点击<a class="ae lt" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports" rel="noopener ugc nofollow" target="_blank">这里</a>。<strong class="lw jt">】</strong></p></div></div>    
</body>
</html>