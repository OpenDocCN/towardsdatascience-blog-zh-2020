<html>
<head>
<title>How to Identify Potential Customers Among the Crowd?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在人群中识别潜在客户？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-identify-potential-customers-among-the-crowd-abd95b8d0f79?source=collection_archive---------40-----------------------#2020-04-29">https://towardsdatascience.com/how-to-identify-potential-customers-among-the-crowd-abd95b8d0f79?source=collection_archive---------40-----------------------#2020-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="f561" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">数据科学</h2><div class=""/><div class=""><h2 id="cfe3" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">邮购销售公司的真实数据科学任务</h2></div><h1 id="f8a8" class="ko kp iq bd kq kr ks kt ku kv kw kx ky kf kz kg la ki lb kj lc kl ld km le lf bi translated">介绍</h1><p id="8aaa" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">在这个项目中，德国的一家<a class="ae mc" href="https://en.wikipedia.org/wiki/Mail_order" rel="noopener ugc nofollow" target="_blank">邮购</a>销售公司对确定普通人群的细分市场感兴趣，并以此作为其营销增长的目标。<strong class="li ja">人口统计信息</strong>(由Arvato Finacial Solutions通过<a class="ae mc" href="https://classroom.udacity.com/nanodegrees/nd025/dashboard/overview" rel="noopener ugc nofollow" target="_blank"> Udacity </a>)已提供给<strong class="li ja">普通大众</strong>以及邮购公司的<strong class="li ja">老客户</strong>以建立公司客户群模型。目标数据集包含邮寄营销活动目标的人口统计信息。</p><p id="4b93" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated"><strong class="li ja">目标是确定哪些人最有可能响应营销活动，成为邮购公司的客户</strong>。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mi"><img src="../Images/e84f41bdb2e9fe402c5babda438d3815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ZEe2u3ldlfq-pOz"/></div></div></figure><h1 id="4f24" class="ko kp iq bd kq kr ks kt ku kv kw kx ky kf kz kg la ki lb kj lc kl ld km le lf bi translated">数据描述</h1><p id="b9fa" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">的。由于与Arvato签订了保密协议，因此没有提供该项目的csv文件。以下是所使用的文件:</p><ol class=""><li id="8c9e" class="mu mv iq li b lj md lm me lp mw lt mx lx my mb mz na nb nc bi translated"><strong class="li ja">uda city _ AZDIAS _ 052018 . CSV</strong>:德国一般人口的人口统计数据；891 211人(行)x 366个特征(列)</li><li id="7193" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">uda city _ CUSTOMERS _ 052018 . CSV</strong>:邮购公司客户的人口统计数据；191 652人(行)x 369个特征(列)。</li><li id="0719" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">uda city _ MAILOUT _ 052018 _ train . CSV</strong>:作为营销活动目标的个人的人口统计数据；42 982人(行)x 367人(列)。</li><li id="52d6" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">uda city _ MAILOUT _ 052018 _ test . CSV</strong>:作为营销活动目标的个人的人口统计数据；42 833人(行)x 366人(列)。</li><li id="d988" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">DIAS Attributes—Values 2017 . xlsx</strong>:文件中按字母顺序描述的列的详细信息。要了解更多功能，请点击<a class="ae mc" href="https://github.com/harshdarji23/Arvato-Identifying-the-potential-customers/tree/master/Data" rel="noopener ugc nofollow" target="_blank">此处</a>。</li></ol><h1 id="5ba3" class="ko kp iq bd kq kr ks kt ku kv kw kx ky kf kz kg la ki lb kj lc kl ld km le lf bi translated">数据预处理</h1><ol class=""><li id="e07e" class="mu mv iq li b lj lk lm ln lp ni lt nj lx nk mb mz na nb nc bi translated"><strong class="li ja">记忆力减退。CSV(<strong class="li ja">uda city _ AZDIAS _ 052018)</strong>保存普通人群人口统计数据的文件大小为2.5 GB，因此我编写了一个简单的函数来更改数据类型(int64到int16)，并减少了78%的内存使用。要了解更多关于功能和内存缩减的信息，请点击<a class="ae mc" href="https://www.kaggle.com/gemartin/load-data-reduce-memory-usage" rel="noopener ugc nofollow" target="_blank">此处</a>。</strong></li><li id="da09" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">数据理解</strong>:所有的数据文件都有相同的特征，所以我决定用<strong class="li ja">uda city _ AZDIAS _ 052018 . CSV</strong>文件去理解人口统计数据。我使用了<strong class="li ja">DIAS Attributes—Values 2017 . xlsx</strong>文件来理解每个值对列的意义。请参见下图中的示例:</li></ol><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/6e2c8cb56037af0f440af43d450c706e.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*Vq7VcNwB9YbCaseTeFCbnA.png"/></div></figure><p id="e483" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">这里，属性<strong class="li ja"> AGER_TYP </strong>描述了最佳AGER类型。如果您看到上面的值列，它的值为<strong class="li ja"> -1，0，</strong>，这意味着含义未知，无法进行分类。<strong class="li ja"> </strong>进一步检查发现有意义的属性<strong class="li ja">‘未知’/‘无分类’</strong>为缺失值。所以，我决定用<strong class="li ja"> nan来填充这样的值。</strong>当然，有许多属性的值是未知的。欲知详细分析，请点击<a class="ae mc" href="https://github.com/harshdarji23/Arvato-Identifying-the-potential-customers/tree/master/Jupyter%20Notebook" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="314b" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated"><strong class="li ja"> 3。处理缺失值</strong>:有<strong class="li ja"> 366个特性</strong>，所以我决定在理解数据(来自第2部分)之后首先检查列，因此，我计算了每列中缺失值的百分比，并决定阈值为30%，也就是说，如果列包含的缺失值超过<strong class="li ja"> 70% </strong>，我将简单地删除这些列。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8f39edfb7c54153e1247104b14440a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*kVIszoN8VE3Cydg99SegOg.png"/></div></figure><p id="bcd6" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">通过进一步检查，我发现以<strong class="li ja"> D19 </strong>开头的属性被删除了。D19当我们在<strong class="li ja">DIAS Attributes-Values 2017 . xlsx</strong>文件中查找时，显示它包含交易数据(例如，基于产品组指南的交易活动)</p><p id="ab4c" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">我做的下一件事是按行查找缺失值，我决定删除包含超过15个缺失值的行。我在这里使用Q3–1.5 iqr来决定阈值15。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/2743bc69b68cdbfed8139e9dc88aa99c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*Zp7RjHa-CNhSJzTEXmu-Gw.png"/></div></figure><p id="e0f6" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">为简单起见，其余的缺失值用平均值估算。</p><p id="e8d3" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">4.<strong class="li ja">特征工程</strong>:有很多分类变量，所以如果它们少于<strong class="li ja"> 10级</strong>，我就用它们创建<strong class="li ja">虚拟</strong>变量。既然所有的特征都是数字，我们可以应用任何机器学习算法。但在此之前，我应用了<strong class="li ja"> StandardScaler() </strong>对所有列进行了变换。</p><h1 id="383d" class="ko kp iq bd kq kr ks kt ku kv kw kx ky kf kz kg la ki lb kj lc kl ld km le lf bi translated">客户细分</h1><p id="d35e" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">这里，主要目标是使用无监督学习方法来分析现有客户和一般人群的属性，以创建客户细分。该分析描述了普通人群中更有可能成为邮购公司主要客户群的部分，以及普通人群中不太可能成为主要客户群的部分。</p><p id="7213" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">因此，我使用了<strong class="li ja"> PCA </strong>技术来捕捉数据中的最大<strong class="li ja">方差</strong>并降低数据的维度。我决定了一个阈值<strong class="li ja"> 50% </strong>。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi no"><img src="../Images/bac4910fd0feb6bb4509dbca192711f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3xMwaoNaisvv1VkhJr6Fhg.png"/></div></div></figure><p id="a854" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">366个特征中的36个能够捕捉50%的变化。遵循主成分分析维度0:</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8329ae3faeff66acb116c9ef0582c308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*LHmTDdr514mWOHCH5hzQKQ.png"/></div></figure><p id="fb37" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">解读第一个PCA组件(10大特性):</p><ol class=""><li id="222f" class="mu mv iq li b lj md lm me lp mw lt mx lx my mb mz na nb nc bi translated"><strong class="li ja">plz 8 _ BAUMAX</strong>:plz 8(pos)内最常见的建筑类型——主要是&gt; 10户家庭住宅</li><li id="682a" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">plz 8 _ ant G4</strong>:plz 8(pos)高份额&gt; 10户住宅数量</li><li id="1b0f" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">plz 8 _ ant G3</strong>:plz 8(pos)中6-10户住宅的数量-高份额</li><li id="6112" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">plz 8 _ ant G1</strong>:plz 8(负)低份额1-2户住宅数量</li><li id="c37e" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja"> MOBI_REGIO </strong>:移动模式(负)——高机动性</li></ol><p id="9d67" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">所以这个群体是<strong class="li ja">高流动性，大家庭区域，拥挤区域，低收入</strong>。</p><p id="9c36" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">接下来，我使用经过主成分分析的数据来应用k-means聚类，并确定客户细分群体。我用肘法来决定集群的数量，我决定用<strong class="li ja"> 10。</strong></p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi nq"><img src="../Images/c4fc573b3898833e7f1c00aade6f3a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaZwb_EsUecWFqAXVriNnA.png"/></div></div></figure><p id="ef3a" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">我对邮购公司客户的人口统计数据做了同样的转换<strong class="li ja">uda city _ CUSTOMERS _ 052018 . CSV .</strong></p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/92d5f38c8c74f3012a3ce126de18748c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*ag5wCyguHlgEb5kM5CtECw.png"/></div></figure><p id="c920" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">在这里，我们可以看到属于<strong class="li ja">集群1和集群8 </strong>的人是响应邮购公司的营销活动并成为客户的人。所以，营销团队应该关注这样的群体。好消息是德国有很多人(1和8的蓝条)属于这些群体。</p><h1 id="0d74" class="ko kp iq bd kq kr ks kt ku kv kw kx ky kf kz kg la ki lb kj lc kl ld km le lf bi translated">营销预测-监督学习模型</h1><p id="3ec5" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">这里，我们将使用包含作为营销活动目标的个人的人口统计数据的数据集。训练数据集具有客户的响应，我们将使用ML模型来学习参数并预测测试数据中客户的响应。</p><ol class=""><li id="3408" class="mu mv iq li b lj md lm me lp mw lt mx lx my mb mz na nb nc bi translated"><strong class="li ja">uda city _ MAILOUT _ 052018 _ train . CSV</strong>:作为营销活动目标的个人的人口统计数据；42 982人(行)x 367人(列)。</li><li id="66e8" class="mu mv iq li b lj nd lm ne lp nf lt ng lx nh mb mz na nb nc bi translated"><strong class="li ja">uda city _ MAILOUT _ 052018 _ test . CSV</strong>:作为营销活动目标的个人的人口统计数据；42 833人(行)x 366人(列)。</li></ol><h2 id="3e05" class="ns kp iq bd kq nt nu dn ku nv nw dp ky lp nx ny la lt nz oa lc lx ob oc le iw bi translated">数据准备</h2><p id="f83b" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我已经使用了相同的清理功能，它是我在分段报告中使用的。我用平均值填充了数字列中缺少的值，并为分类列创建了虚拟变量。我还执行了一个scaler转换，因为我想检查不同ML算法的性能。但是，数据集中的类是一个<strong class="li ja">不平衡</strong>，训练数据中<strong class="li ja"> 98% </strong>的响应是负的，<strong class="li ja"> 2% </strong>是正的，所以用召回(识别潜在客户)作为衡量标准是不正确的。因此，我使用<strong class="li ja"> ROC AUC </strong>作为评估性能的指标。我还从客户数据集中添加了额外的功能。</p><pre class="mj mk ml mm gt od oe of og aw oh bi"><span id="872b" class="ns kp iq oe b gy oi oj l ok ol">test['CUSTOMER_GROUP'] = test['CUSTOMER_GROUP'].apply(lambda x:1 if x=='SINGLE_BUYER' else 0)<br/>test['PRODUCT_GROUP1'] = test['PRODUCT_GROUP'].apply(lambda x:1 if 'FOOD' in x else 0)<br/>test['PRODUCT_GROUP2'] = test['PRODUCT_GROUP'].apply(lambda x:1 if 'COSMETIC' in x else 0)</span></pre><p id="47d4" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">表现最好的模型是:</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi om"><img src="../Images/80934f542d714e3fefcd1088b0c2b28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kP43Ne2Xai-9BT56AkG-6Q.png"/></div></div></figure><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/57dd46cd2326f373cb93e6c96b710ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*LbnVUi--Mno4KqCp8Nz4hg.png"/></div></figure><p id="2341" class="pw-post-body-paragraph lg lh iq li b lj md ka ll lm me kd lo lp mf lr ls lt mg lv lw lx mh lz ma mb ij bi translated">我尝试优化两个模型的超参数，Adaboostclasifer排在最前面。以下是我使用的参数:</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi on"><img src="../Images/b113bcfddc131a92e9bcbe051d2f1796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aRejUTn9LRC85DYXFXPvg.png"/></div></div></figure><h2 id="2565" class="ns kp iq bd kq nt nu dn ku nv nw dp ky lp nx ny la lt nz oa lc lx ob oc le iw bi translated">预测竞赛</h2><p id="2996" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我向Kaggle上举办的比赛提交了我对测试数据的预测，我得到了<strong class="li ja"> 0.79459，</strong>的分数，仅比排行榜第一名落后0.016。</p><h2 id="67ae" class="ns kp iq bd kq nt nu dn ku nv nw dp ky lp nx ny la lt nz oa lc lx ob oc le iw bi translated">特征重要性</h2><p id="04fb" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated"><strong class="li ja"> D19_SOZIALES </strong>:这是与数据字典中没有给出的交易相关的特征，是潜在客户响应营销活动的最重要特征。</p><figure class="mj mk ml mm gt mn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/022fcc77c164bd9f8a5fa7bd65734a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*OCyrtUHSkXkfbpiLQ--9dQ.png"/></div></figure><h2 id="d746" class="ns kp iq bd kq nt nu dn ku nv nw dp ky lp nx ny la lt nz oa lc lx ob oc le iw bi translated">结论</h2><p id="b324" class="pw-post-body-paragraph lg lh iq li b lj lk ka ll lm ln kd lo lp lq lr ls lt lu lv lw lx ly lz ma mb ij bi translated">我们使用德国的人口统计数据和营销活动的历史客户数据来确定最佳目标人口统计群体，从而减少营销支出。我们成功地应用主成分分析和K-均值聚类来识别客户群。我们使用带有超参数调整的Adaboost分类器来预测和分类客户是否会对营销活动做出反应。详细分析可以在<a class="ae mc" href="https://github.com/harshdarji23/Arvato-Identifying-the-potential-customers" rel="noopener ugc nofollow" target="_blank"> <strong class="li ja">这里找到</strong> </a> <strong class="li ja">。</strong></p></div></div>    
</body>
</html>