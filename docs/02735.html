<html>
<head>
<title>Doing Giveaways on Twitter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Twitter 上做赠品</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/doing-giveaways-on-twitter-a5adc02d1ac0?source=collection_archive---------35-----------------------#2020-03-16">https://towardsdatascience.com/doing-giveaways-on-twitter-a5adc02d1ac0?source=collection_archive---------35-----------------------#2020-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a204" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Twitter API 和 Python 随机绘制转发者</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/767ce5f8969856cc81ddc175d63f90cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xnbTb3GBEYWBo7lFzQqc6A.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@macauphotoagency?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">澳门图片社</a>在<a class="ae kv" href="https://unsplash.com/s/photos/gambling?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="1abd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Twitter 是一个分享内容和进行推广的绝佳平台。我已经用它发了几次我的书——《T4——机器学习图书营》。在这篇文章中，我将告诉你我是如何做到的，以及如何使用 Python 和 Twitter API 来简化这个过程。</p><p id="b458" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">特别是，这个职位包括:</p><ul class=""><li id="ad73" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">在 Twitter 上做赠品</li><li id="a49a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">使用 Twitter API 获取转发推文的人的列表</li><li id="bf65" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">计划作业</li><li id="a7fd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">随机抽取获奖者</li></ul><p id="545b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开始吧。</p><h1 id="3e7a" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">赠品活动</h1><p id="c134" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">这个想法很简单:你免费赠送一些东西。这是你的追随者可能会喜欢的东西。例如，它可以是一本书或一门课程。</p><p id="8fc2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了得到它，参与者需要转发它——有时，还需要关注你。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">一个免费推文的例子</p></figure><p id="0c73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是吸引新粉丝和传播你的作品的好方法。就我而言，我想让更多的人知道机器学习图书营——我目前正在写的这本书。</p><p id="e655" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">管理此类赠品活动的最简单方法是使用 Twitter API，并以编程方式处理所有事情。</p><h1 id="1576" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">Twitter 开发者 API</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bbdd205f44d476531df8af9e3633cefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*xOVO6PwZ7J8T-x7_2FOA1A.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Twitter 开发者 API——运行赠品的最简单方式</p></figure><p id="2374" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用 Twitter API，您需要注册一个应用程序。打开<a class="ae kv" href="https://developer.twitter.com/" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com</a>，登录进入<a class="ae kv" href="https://developer.twitter.com/en/apps" rel="noopener ugc nofollow" target="_blank">应用页面</a>。到达后，点击“创建应用程序”按钮。</p><p id="506b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后按照说明去做，这很简单。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/f8505f5f01b233ed929126d1ebf088c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7UzxkPlM-KrRqluAC4N1w.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">要创建应用程序，只需按照说明进行操作</p></figure><p id="f91d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“创建”按钮后，就可以开始了。</p><p id="46f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要获得转发者列表，我们只需对<a class="ae kv" href="https://developer.twitter.com/en/docs/tweets/post-and-engage/api-reference/get-statuses-retweeters-ids" rel="noopener ugc nofollow" target="_blank">status/retweeters/ids</a>进行 API 调用。</p><p id="cb43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些，接下来的步骤似乎就简单了:</p><ul class=""><li id="d4d7" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">创建推文</li><li id="1327" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">让比赛持续几天</li><li id="6c44" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">使用 API 获取转发者列表</li><li id="1e07" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">随机抽取获胜者</li><li id="1a95" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">通过 DM 向获奖者表示祝贺</li></ul><p id="c3aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，获得转发者名单并不像看起来那么容易。让我们来看看为什么和如何真正做到这一点。</p><h1 id="2ddb" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">获得转发</h1><p id="dc1e" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">上面的算法有一个问题:使用 API 只能得到最后 100 个转发者。<a class="ae kv" href="https://twittercommunity.com/t/paging-is-not-possible-with-statuses-retweeters-ids-json/71298/10" rel="noopener ugc nofollow" target="_blank">不更</a>。没有办法在一个请求中获得超过 100 个，也没有办法对结果进行分页以获得另外的 100 个。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/ff4835e1feef51a3e1a673b7fe9db152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWRzO6CeEm5pvFvE3jhsHg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">不幸的是，API 只返回最后 100 个转发者</p></figure><p id="b362" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是有一个方法可以解决它:定期点击 API 并保存结果！</p><p id="7289" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们的方法如下:</p><ul class=""><li id="1c14" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">创建推文</li><li id="f285" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">设置一个定期作业，将最后 100 个转发者保存到一个文件中</li><li id="35cc" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">让比赛持续几天</li><li id="34b3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">将所有保存的结果汇总到一个列表中</li><li id="3812" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">从名单中随机抽取获胜者</li><li id="7f02" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">通过 DM 向获奖者表示祝贺</li></ul><p id="62a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将看到如何使用 API 来获取转发者列表。</p><h1 id="40c9" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用 Python 获取转发者</h1><p id="be5d" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在让我们使用 Twitter API 来获取最后的转发者。我们将使用 Python 和<a class="ae kv" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank">请求</a>库。</p><p id="78a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您没有请求，您可以通过运行</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="1316" class="nn mh iq nj b gy no np l nq nr">pip install requests</span></pre><p id="1b43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了能够使用 API，我们首先需要进行身份验证。为此，我们需要 API 密钥和 API 秘密密钥。你可以通过应用程序的设置来获取它们。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/20397114c6be2613f44f9d0423bf3655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOrmaVMc-48QaMtAnxi7hQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">要获取 API 密钥，请进入“应用详情”→“密钥和令牌”</p></figure><p id="486d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦我们有了密钥，我们就可以使用它们进行身份验证:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="169c" class="nn mh iq nj b gy no np l nq nr">import requests</span><span id="ae67" class="nn mh iq nj b gy nt np l nq nr">key = '&lt;KEY&gt;'<br/>secret = '&lt;SECRET&gt;'</span><span id="2c1d" class="nn mh iq nj b gy nt np l nq nr">auth_url = '<a class="ae kv" href="https://api.twitter.com/oauth2/token" rel="noopener ugc nofollow" target="_blank">https://api.twitter.com/oauth2/token</a>'<br/>data = {'grant_type': 'client_credentials'}<br/>auth_resp = requests.post(auth_url, auth=(key, secret), data=data)<br/>token = auth_resp.json()['access_token']</span></pre><p id="6764" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果，我们得到一个令牌——一个我们需要包含在每个请求中的字符串。</p><p id="c9a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用它来获得转发者:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="236d" class="nn mh iq nj b gy no np l nq nr">tweet_id = '1235296848627273735'</span><span id="2702" class="nn mh iq nj b gy nt np l nq nr">url = 'https://api.twitter.com/1.1/statuses/retweets/%s.json?count=100' % tweet_id</span><span id="c628" class="nn mh iq nj b gy nt np l nq nr">headers = {'Authorization': 'Bearer %s' % token}<br/>retweets_resp = requests.get(url, headers=headers)<br/>retweets = retweets_resp.json()</span></pre><p id="2069" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">retweets 变量包含最近 100 个 retweets 的详细信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/8cc009636aade3c5415dc329dd614d35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rf38fx2CZ_EM82JULxQKAw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">结果是最后 100 个转发者的列表</p></figure><p id="60b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回复中有很多信息，比我们需要的多得多。我们只需要每个转发者的昵称，也就是他们的 Twitter 账号。我们来摘录一下:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="1594" class="nn mh iq nj b gy no np l nq nr">retweeters = [r['user']['screen_name'] for r in retweets]</span></pre><p id="3efc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在唯一要做的就是将结果保存到一个文件中。</p><p id="362a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了避免意外覆盖旧文件，我们需要确保我们的输出文件有一个唯一的名称。实现这一点最简单的方法是在文件名中添加当前时间戳。</p><p id="feb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们开始吧:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="7c89" class="nn mh iq nj b gy no np l nq nr">from time import time</span><span id="e25d" class="nn mh iq nj b gy nt np l nq nr">t = int(time())</span><span id="0c11" class="nn mh iq nj b gy nt np l nq nr">with open('results/retweeters-ids-%s-%s.txt' % (tweet_id, ts), 'w') as f_out:<br/>    for r in retweeters:<br/>        f_out.write(r)<br/>        f_out.write('\n')</span><span id="bf28" class="nn mh iq nj b gy nt np l nq nr">print('done')</span></pre><p id="38f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就这样——现在我们可以获得最后 100 条转发，并将结果保存到一个文件中。你可以在这里看到完整的代码<a class="ae kv" href="https://gist.github.com/alexeygrigorev/dfd535aea26709582f8ac3ead3766adb" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="c1b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将代码保存到一个文件中，并安排它定期运行。</p><h1 id="3516" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">安排它</h1><p id="94e7" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">因为我们只能获得一条推文的最后 100 次转发，所以我们需要定期运行这个脚本，每次都将结果保存到一个文件中。</p><p id="0a52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最简单的方法是使用<a class="ae kv" href="https://en.wikipedia.org/wiki/Cron" rel="noopener ugc nofollow" target="_blank">Cron</a>——Linux 和 macOS 上可用的基于时间的任务调度程序。如果你使用 Windows，有一个类似的工具叫做“任务调度器”，你可以用它来运行周期性的任务。</p><p id="1e1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们配置 Cron 每小时运行一次我们的作业。为此，我们将使用以下 Cron 表达式:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="8bc2" class="nn mh iq nj b gy no np l nq nr">30 * * * *</span></pre><p id="8c54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">表示<a class="ae kv" href="https://crontab.guru/#30_*_*_*_*" rel="noopener ugc nofollow" target="_blank">“每小时 30 分钟执行一次该命令”</a>。</p><p id="c436" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了调度它，我们需要向 crontab——Cron 的设置文件——添加一行。我们可以通过在终端中键入以下命令来实现:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="6abf" class="nn mh iq nj b gy no np l nq nr">crontab -e</span></pre><p id="7093" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们添加下面一行:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="57d8" class="nn mh iq nj b gy no np l nq nr">30 * * * * python /home/ubuntu/retweeters-script.py</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/9ec24a18d24ac88d90a3c43fbbaa18ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhmr3DKIjk6Mf7saOfJHQA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">用 nano 编辑 crontab</p></figure><p id="c3f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，保存它并退出编辑器。如果你使用 nano 进行编辑(像我一样)，你可以按 Ctrl+X 退出。<a class="ae kv" href="https://stackoverflow.com/questions/11828270/how-do-i-exit-the-vim-editor" rel="noopener ugc nofollow" target="_blank"> Vim 有点棘手。</a></p><p id="b1a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要验证 crontab 是否已更新，请运行</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="d958" class="nn mh iq nj b gy no np l nq nr">crontab -l</span></pre><p id="a426" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这项工作已经安排好了，所以我们可以让竞赛进行几天。</p><h1 id="c380" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">随机抽取</h1><p id="0c4d" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">几天过去了，比赛结束了，我们想选出获胜者。</p><p id="120a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这段时间里，我们收集了许多带有转发者的文件，现在我们需要把它们放在一起。这很容易做到:我们只需一个接一个地加载文件，并将内容放入一个集合中:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="e283" class="nn mh iq nj b gy no np l nq nr">from glob import glob</span><span id="645f" class="nn mh iq nj b gy nt np l nq nr">retweeter_files = sorted(glob('results/retweeters-ids-*.txt'))</span><span id="490b" class="nn mh iq nj b gy nt np l nq nr">all_retweeters = set()</span><span id="360e" class="nn mh iq nj b gy nt np l nq nr">for f in retweeter_files:<br/>    with open(f, 'r') as f_in:<br/>        retweeters = [line.strip() for line in f_in]<br/>        all_retweeters.update(retweeters)</span></pre><p id="d121" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">运行后，all_retweeters 包含转发您的推文的用户列表。</p><p id="0aae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抽取获胜者很容易:</p><ul class=""><li id="9ed4" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">将转发者放入列表中</li><li id="a869" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">洗牌吧</li><li id="b00a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">选择顶部</li></ul><p id="f794" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来实现它:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="c549" class="nn mh iq nj b gy no np l nq nr">from random import shuffle</span><span id="a3fe" class="nn mh iq nj b gy nt np l nq nr">all_retweeters = list(all_retweeters)<br/>shuffle(all_retweeters)<br/>winners = all_retweeters[:12]</span><span id="b520" class="nn mh iq nj b gy nt np l nq nr">for i in winners:<br/>    print('@%s' % i)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/d05633dd1111ce7366e3eb1c83d330ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/0*b-ZHe09a9nPYeKKg"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">抽奖的幸运赢家</p></figure><p id="a9a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是宣布获胜者的时候了！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">祝贺获胜者！</p></figure><p id="7a19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并开始通过直接消息发送后续步骤的信息。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><p id="e3e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有用。别忘了在 Twitter 上关注我的最新动态！</p><div class="oe of gp gr og oh"><a href="https://twitter.com/Al_Grigor" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">阿列克谢·格里戈里耶夫</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">阿列克谢·格里戈里耶夫(@Al_Grigor)的最新推文。OLX 集团首席数据科学家。对#机器学习感兴趣…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">twitter.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kp oh"/></div></div></a></div></div></div>    
</body>
</html>