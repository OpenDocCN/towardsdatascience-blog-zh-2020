<html>
<head>
<title>Data Analysis and Visualization with Jupyter Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Jupyter 笔记本进行数据分析和可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-analysis-and-visualization-with-jupyter-notebook-22f6dcd25cc5?source=collection_archive---------7-----------------------#2020-07-20">https://towardsdatascience.com/data-analysis-and-visualization-with-jupyter-notebook-22f6dcd25cc5?source=collection_archive---------7-----------------------#2020-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7dc3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用 JS 库可视化 Jupyter 笔记本中的数据</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/db16d3c90cd962c64729aa320503232e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Je4rBX05BAnsIQqPMfv1zQ.png"/></div></div></figure><p id="40f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">丰富的交互计算体验是我最喜欢<strong class="kt ir"> Jupyter 笔记本</strong>的地方。此外，这是一个完美的基于网络的环境，用于执行探索性分析。</p><p id="0e4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我将展示如何使用两个作为 JavaScript 库提供的<strong class="kt ir">交互式数据可视化工具</strong>来支持项目的探索阶段。本指南将花费最少的时间和步骤来完成。</p><p id="d52e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我认为数据报告应该易于理解，比分析本身花费的时间更少。这就是为什么，在没有添加任何扩展的情况下，我们将在最短的时间内为 <strong class="kt ir"> Jupyter 笔记本</strong>内的<strong class="kt ir">报道建立一个工作环境。</strong></p><p id="3ffd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望由此产生的笔记本模板将帮助每个处理数据的人回答重要的特定领域的问题，并以可理解的形式呈现数据分析见解。</p><p id="547a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">开始吧！</p><h1 id="de4c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">数据</h1><p id="1e63" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">作为一个数据样本，我们将使用 Kaggle 的<a class="ae mk" href="https://www.kaggle.com/unsdsn/world-happiness" rel="noopener ugc nofollow" target="_blank">世界幸福报告来探索数据的空间和时间趋势。</a></p><h1 id="0479" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">工具</h1><ul class=""><li id="b717" class="ml mm iq kt b ku mf kx mg la mn le mo li mp lm mq mr ms mt bi translated">JupyterLab  —我们的环境。你也可以使用 Jupyter 笔记本</li><li id="27fc" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir"> WebDataRocks 数据透视表</strong></li></ul><p id="5dbb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个数据透视表将处理所有与数据相关的计算:聚合、过滤和排序数据。它的主要特点是交互性和易用性。此外，它将作为我们的仪表板的引擎，处理数据并以汇总的形式将其传递给图表。</p><ul class=""><li id="36db" class="ml mm iq kt b ku kv kx ky la mz le na li nb lm mq mr ms mt bi translated"><strong class="kt ir">谷歌图表</strong></li></ul><p id="96e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于我们的大脑对图表的反应更快，我们可以将表格数据表示与交互式图表结合起来。为此，Google Charts 是一个不错的选择。这个 web 服务提供了所有的基本图表，这些图表可以根据我们的需要进行定制。</p><h1 id="3291" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">关键想法</h1><p id="c205" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">让我们将本教程分解为构建数据报告解决方案的几个关键步骤:</p><ul class=""><li id="053b" class="ml mm iq kt b ku kv kx ky la mz le na li nb lm mq mr ms mt bi translated">导入所需的库</li><li id="f77f" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">数据准备</li><li id="98da" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">在笔记本中嵌入数据透视表和图表</li><li id="7cd6" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">将数据发送到表</li><li id="ebe7" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">配置报告</li><li id="2254" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">将数据从表格发送到图表</li><li id="faa8" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">保存报告</li><li id="71ea" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">保存并共享笔记本</li></ul><h1 id="72bd" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">步骤 1:导入 Python 库</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b2e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们弄清楚每个库代表什么功能:</p><p id="f1ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">1.<strong class="kt ir">IPython . display</strong>—IPython 中显示工具的 API</p><p id="cc24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.<strong class="kt ir"> json </strong> —用于序列化和反序列化 Python 对象的模块。</p><p id="f2e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.熊猫——数据处理和分析的主要图书馆</p><h1 id="c53e" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">第二步:获取数据</h1><p id="b1dc" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">首先，这一步取决于您如何存储和访问您的数据。</p><p id="78f0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我使用 Google Sheets 将几个 CSV 文件中对应于各个年份的数据记录合并在一起。使用本教程中描述的<a class="ae mk" rel="noopener" target="_blank" href="/how-to-import-google-sheets-data-into-a-pandas-dataframe-using-googles-api-v4-2020-f50e84ea4530">方法，我将数据从 Google Sheets 导入到 pandas dataframe。</a></p><p id="64c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者，您可以简单地使用<a class="ae mk" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html" rel="noopener ugc nofollow" target="_blank"> read_csv() </a>方法从文件系统导入数据。要合并几年的信息，可以使用“<a class="ae mk" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html" rel="noopener ugc nofollow" target="_blank"> concat </a>操作。</p><p id="9889" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看我们的数据是什么样子的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="ba68" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在已经使用最适合您的方法将数据加载到 dataframe 中，使用指定的“records”方向将其转换为 JSON。生成的类似列表的结构是数据透视表理解的数据格式:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="8d88" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">步骤 3:创建一个数据透视表，并向其输入数据</h1><p id="2ea0" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">接下来，使用指定的报表配置定义数据透视表对象:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="fa01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是我们到目前为止的配置:</p><ul class=""><li id="50e3" class="ml mm iq kt b ku kv kx ky la mz le na li nb lm mq mr ms mt bi translated">一个<strong class="kt ir">数据片</strong>——我们希望在网格上呈现的字段的子集。</li><li id="727c" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">一个<strong class="kt ir">数据源</strong>及其类型。使用 json.loads()方法，我们将包含 json 文档的字符串反序列化为 Python 对象。</li><li id="f349" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">可选视图相关设置:<strong class="kt ir">条件格式</strong>，<strong class="kt ir">数字格式</strong>。</li></ul><p id="8b7b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，让我们将 Python 字典表示的数据透视表转换为 JSON 格式的字符串:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="0de4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">步骤 4:以 HTML 呈现数据透视表和图表</h1><p id="73f2" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最重要的一步来了。</p><p id="89a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们定义一个函数，它将在笔记本单元格中呈现数据透视表和图表。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="6e0a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，我们已经指定了 HTML 布局，它包含 Google Charts 和 WebDataRocks 的脚本、CSS 样式以及将呈现数据透视表和图表实例的容器。整个布局用三重引号括起来。</p><p id="eff0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们传递一个参数，它代表执行定制的 JavaScript 代码。在这段代码中，我们实现了应该如何以及何时绘制图表的逻辑。只有当数据透视表完全呈现、加载了数据和本地化文件时，才会出现这种情况。我们可以通过“<a class="ae mk" href="https://www.webdatarocks.com/doc/reportcomplete/?r=td3" rel="noopener ugc nofollow" target="_blank"> reportcomplete </a>”事件来跟踪这一时刻。</p><p id="8f6e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的代码完成了从表中获取数据、创建图表以及将汇总数据传递给图表的所有繁重工作:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="824c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，让我们调用渲染函数并查看生成的仪表板:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h1 id="32d5" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结果</h1><p id="beeb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如您所见，数据透视表填充了数据，字段根据我们设置的报表规则显示和格式化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/b04918521a97474c7ae4de39f04e509e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uWx-ulAc9S367vrLhv3GUA.gif"/></div></div></figure><p id="30ec" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，仪表板本身是交互式的:您可以使用报告工具的不同元素，在网格上分割数据记录，对它们进行过滤和排序。此外，图表会对报告中的每个变化做出反应。</p><h1 id="f078" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">下一步是什么？</h1><p id="27bb" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">现在，您有了一个报告工具，可以从多个角度查看数据。花些时间探索数据:更改跟踪的指标，过滤数据。尝试添加其他可视化图表。</p><p id="e761" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以尝试其他数据集，寻求真知灼见。我希望您会喜欢这个过程和结果，并通过这种方法提高您的笔记本电脑工作效率。完成数据分析后，保存笔记本并与朋友或同事分享。讲述你的数据故事。他们会喜欢的！</p><h1 id="3637" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">参考</h1><ul class=""><li id="c63e" class="ml mm iq kt b ku mf kx mg la mn le mo li mp lm mq mr ms mt bi translated"><a class="ae mk" href="https://github.com/veronikaro/pivoting-jupyter-notebook" rel="noopener ugc nofollow" target="_blank">可随时使用的笔记本</a></li><li id="b6ee" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae mk" href="https://developers.google.com/chart" rel="noopener ugc nofollow" target="_blank">谷歌图表文档</a></li><li id="fb6c" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><a class="ae mk" href="https://www.webdatarocks.com/?r=td3" rel="noopener ugc nofollow" target="_blank"> WebDataRocks 文档</a></li></ul></div></div>    
</body>
</html>