<html>
<head>
<title>A Python AzureML SDK workflow with VSCode devcontainers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有 VSCode devcontainers 的 Python AzureML SDK 工作流</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/vscode-devcontainers-and-the-python-azureml-sdk-323dec18a675?source=collection_archive---------43-----------------------#2020-06-06">https://towardsdatascience.com/vscode-devcontainers-and-the-python-azureml-sdk-323dec18a675?source=collection_archive---------43-----------------------#2020-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="78e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">微软和 Python 机器学习:现代爱情故事，第 1 部分，共 2 部分</h2></div><p id="c1e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">微软在征服我们的心和融入开源生态系统方面正在大步前进。他们在 2000 年公开反对的生态系统。我承认我正在融入微软的世界，并且感觉很好。在这篇博客中，我描述了在云中启动 ML 模型(AzureML)和在 VSCode 中远程开发代码的开发工作流。</p><p id="1fe8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">参见:<a class="ae le" rel="noopener" target="_blank" href="/unifying-remote-and-local-azureml-environments-bcea1292e37f">第 2 部分</a>:统一远程和本地 AzureML 环境</p><h1 id="1e48" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">1 VSCode ML 开发容器</h1><p id="b259" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">由于对 VSCode 的认识相当晚，在我通常的否认期之后，它让我大吃一惊。在 Q2 2019 上引入的远程开发功能(<a class="ae le" href="https://code.visualstudio.com/blogs/2019/05/02/remote-development" rel="noopener ugc nofollow" target="_blank"> vscode-dev-blog </a>)真的为我敲定了这笔交易。这有三种味道:</p><ol class=""><li id="3289" class="mc md it kk b kl km ko kp kr me kv mf kz mg ld mh mi mj mk bi translated">在 Linux 的 Windows 子系统(WSL)中部署 VSCode 服务器，并在 Windows 桌面上运行客户端</li><li id="9039" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">在 Docker 容器中部署 VSCode 服务器，并在 Windows 桌面上运行客户端</li><li id="06f3" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">将 VSCode 服务器部署到 SSH 目标，并在本地运行客户机</li></ol><p id="803d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个非常丰富的功能，不会令人失望的可靠性。让我们仔细看看。</p><h2 id="a20e" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">1.1 VSCode 和 WSL2</h2><p id="7cb4" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">Linux 的 Windows 子系统(WSL)已经存在了很多年。WSL2 在同一架构上统一了运行基于 Linux 的 docker 容器和 WSL Linux(<a class="ae le" href="https://www.docker.com/blog/new-docker-desktop-wsl2-backend/" rel="noopener ugc nofollow" target="_blank">docker-WSL 2-back end</a>)。重要的是，它从架构中移除了复杂的虚拟化，WSL Linux 几乎可以本地运行。VSCode 可以处理 windows 文件系统上的代码，并在 WSL 上运行其服务器；与 Python 解释器和 shells 无缝集成。</p><p id="6546" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇博客中，我们建议在 WSL2 后端的 docker 容器中运行 VSCode 服务器，GUI 在 Windows 桌面上运行。WSL2 是未来的发展方向，它有很多好处，比如 Windows Home 支持(<a class="ae le" href="https://www.docker.com/blog/docker-desktop-for-windows-home-is-here/" rel="noopener ugc nofollow" target="_blank"> docker-windows-home </a>)、资源管理和 GPU 支持的潜力(<a class="ae le" href="https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/" rel="noopener ugc nofollow" target="_blank"> WSL2-dev-blog </a>)。我们讨论的内容也适用于历史悠久的 Docker 后端。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nc"><img src="../Images/550ea4dc8bfb933fc143e98d15ac922c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-T3am7jsRIc9p_tuPCJ9Yw.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">在 devcontainer 中运行的 VSCode 和 Python(图片由作者提供)</p></figure><h2 id="c11f" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">AzureML devcontainer 中的 1.2 VSCode</h2><p id="292b" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">微软提供了维护良好的 Dockerfiles，其中包含用于语言和语言不可知场景的通用开发工具(<a class="ae le" href="https://github.com/Microsoft/vscode-dev-containers" rel="noopener ugc nofollow" target="_blank"> vscode-dev-containers </a>)。我们选择了 azure-machine-learning-Python-3 容器(<a class="ae le" href="https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3" rel="noopener ugc nofollow" target="_blank"> azureml-dev-container </a>，因为它的 Conda Python 解释器安装了 azureml-sdk 包。图片来源于 Ubuntu。如果我们包括了”。/.devcontainer”文件夹，VSCode 将:</p><ol class=""><li id="7787" class="mc md it kk b kl km ko kp kr me kv mf kz mg ld mh mi mj mk bi translated">检测”的存在。/.devcontainer”及其内容</li><li id="4bef" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">从“构建一个容器。/.devcontainer/Dockerfile `文件</li><li id="f365" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">安装“decontainer.json”中定义的 VSCode 服务器和可选扩展</li><li id="5f31" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">按照“devcontainer.json”中的配置运行容器；定义 a.o .绑定装载和启动脚本</li></ol><p id="608c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">VSCode 容器集成的设置存储在。/.devcontainer/devcontainer.json ”,并允许集成任何 docker 文件而无需修改。</p><h2 id="2e98" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">可定制</h2><p id="ffe4" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们可以将我们喜欢的开发工具添加到这些 devcontainers 中，作为 Dockerfile 中的附加层。或者，我们可以通过调用自定义“Dockerfile”中的“FROM ”,在基本图像的基础上进行构建。例如，添加带有扩展的 Azure CLI 和带有“运行”命令的 terra form(<a class="ae le" href="https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog" rel="noopener ugc nofollow" target="_blank">my-branch</a>)。带有您最喜欢的开发环境的映像可能是一个很好的伙伴。我们可以在一个地方管理我们的自定义图像，并从我们的每个项目中提供到它的符号链接。</p><h2 id="c0ce" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">1.2.2 设置 VSCode Python AzureML 项目</h2><ol class=""><li id="dbfe" class="mc md it kk b kl lx ko ly kr ns kv nt kz nu ld mh mi mj mk bi translated">在 windows 上安装 docker 桌面</li><li id="f704" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">安装 git for windows(我建议在安装过程中将其添加到 powershell 中)</li><li id="19c0" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">安装 VSCode 及其“远程容器”扩展</li><li id="e5ba" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">将目录更改为 windows 文件系统上合适的 dev 目录(这里是“dev”)</li><li id="78bc" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">git clone<a class="ae le" href="https://github.com/microsoft/vscode-dev-containers/tree/master/containers/azure-machine-learning-python-3" rel="noopener ugc nofollow" target="_blank">https://github . com/Microsoft/vs code-dev-containers/tree/master/containers/azure-machine-learning-python-3</a></li><li id="3da5" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">在现有的 Python 项目中，符号链接。使用 New-Item-Item type Junction-Path " c:\ dev \ Path \ to \ your \ project \的 Powershell 中的 devcontainer。dev container \ "-Target " c:\ dev \ vs code-dev-containers \ containers \ azure-machine-learning-python-3 \。devcontainer "</li><li id="3fe7" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">在项目基本文件夹中，使用“code”启动 vscode。</li><li id="a003" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">VSCode 检测到“.”。并要求在容器中重新打开-&gt;是</li><li id="c8e6" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">VSCode 构建容器并安装其服务器，然后重新打开</li><li id="8e90" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">确认你的环境在左下角，一个绿色方块写着“Dev Container:Azure Machine Learning”</li></ol><h2 id="3aa5" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">1.3 VSCode devcontainer 摘要</h2><p id="7dd4" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们可以使用完全可复制的 Linux 工具链进行开发，并且仍然可以在 windows 笔记本电脑上工作。对于 Linux 或 MacOS 用户来说，这可能没有说服力，但是如果您对这些工具感到舒适，您几乎可以在任何地方使用它们。如果你在为你提供基础设施和笔记本电脑的公司工作，这是很有价值的。另一个场景是在你的游戏桌面 windows 电脑上用 GPU 训练深度学习模型，因为已经宣布了对 WSL2 的 GPU 支持(<a class="ae le" href="https://devblogs.microsoft.com/commandline/the-windows-subsystem-for-linux-build-2020-summary/" rel="noopener ugc nofollow" target="_blank"> WSL2-dev-blog </a>)。</p><h1 id="9638" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">Azureml Python SDK 很棒</h1><p id="2f44" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">此部分的先决条件是有效的 Azure 订阅。如果你有信用卡，你可以很容易地获得一个免费的 azure 账户。</p><p id="b621" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的 VSCode 运行在一个包含 Python 和 AzureML Python SDK 的 devcontainer 中。SDK 包含一个复杂的 API，跨越了 ML 模型的整个生命周期。从笔记本中的探索、培训和跟踪模型到工件管理和部署。这包括用于模型培训的计算资源调配和配置，以及用于模型评分的部署目标。我将引用的一些工具(Azure CLI)被添加到我自己的 fork 中(<a class="ae le" href="https://github.com/luuk-codebeez/vscode-dev-containers/tree/for-blog" rel="noopener ugc nofollow" target="_blank"> my-branch </a>)。</p><p id="2435" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下图显示了我们的目标工作流程。我们使用 devcontainer 中的 AzureML SDK 从 VSCode 启动了一个实验，SDK 在计算目标上执行我们的代码。计算目标也在 docker 容器中运行我们的代码。运行时环境的细节将在本博客的第 2/2 部分讨论。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gh gi nv"><img src="../Images/b9182eebf24bcbf18477e3cb37f2caf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6NpN1BbDawI3vpfjiO52WQ.png"/></div></div><p class="no np gj gh gi nq nr bd b be z dk translated">带有 VSCode devcontainer 的 AzureML 工作流(图片由作者提供)</p></figure><h2 id="0d33" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">2.1 向 Azure 注册您的容器</h2><ol class=""><li id="d0b4" class="mc md it kk b kl lx ko ly kr ns kv nt kz nu ld mh mi mj mk bi translated">在 VSCode 中打开一个终端:菜单终端-&gt;新终端</li><li id="bb26" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">在 shell 上执行“az 登录”。前往 www.microsoft.com/devicelogin<a class="ae le" href="http://www.microsoft.com/devicelogin" rel="noopener ugc nofollow" target="_blank">填写控制台输出中提供的密码</a></li><li id="e90c" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">我们现在已经将我们的环境与 Azure 订阅链接起来</li><li id="5bc2" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">帐户信息存储在“~/”中。azure/azureProfile.json”。</li></ol><h2 id="f8e0" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">2.2 给我们看看代码！</h2><p id="7e54" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">让我们看看 Python AzureML SDK 代码:</p><ol class=""><li id="7abd" class="mc md it kk b kl km ko kp kr me kv mf kz mg ld mh mi mj mk bi translated">创建 AzureML 工作区</li><li id="5fe7" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">创建一个计算集群作为培训目标</li><li id="c11a" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld mh mi mj mk bi translated">在计算目标上运行 Python 脚本</li></ol><h2 id="34bd" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">2.2.1 创建 AzureML 工作空间</h2><p id="e2d5" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">AzureML 工作区由一个存储帐户、一个 docker 图像注册表和一个在 portal.azure.com 上具有丰富 UI 的实际工作区组成。一个新的相关机器学习工作室正在公开测试中，看起来真的很好(<a class="ae le" href="https://ml.azure.com/" rel="noopener ugc nofollow" target="_blank">https://ml.azure.com</a>)。下面的代码创建工作区及其所需的服务，并将它们附加到一个新的资源组。</p><pre class="nd ne nf ng gt nw nx ny nz aw oa bi"><span id="bd23" class="mq lg it nx b gy ob oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">azureml.core</strong> <strong class="nx iu">import</strong> Workspace</span><span id="fab1" class="mq lg it nx b gy of oc l od oe">workspace = Workspace.create(<br/>    name="learnml",</span><span id="d23a" class="mq lg it nx b gy of oc l od oe">    subscription_id="&lt;UUID&gt;",</span><span id="210c" class="mq lg it nx b gy of oc l od oe">    resource_group="ml",</span><span id="2a29" class="mq lg it nx b gy of oc l od oe">    create_resource_group=<strong class="nx iu">True</strong>,</span><span id="296a" class="mq lg it nx b gy of oc l od oe">    location="&lt;location&gt;",</span><span id="7ea3" class="mq lg it nx b gy of oc l od oe">    sku="basic",</span><span id="96af" class="mq lg it nx b gy of oc l od oe">)</span></pre><h2 id="1dfe" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">创建计算集群</h2><p id="cee1" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们需要计算资源来训练我们的 ML 模型。我们可以使用 AzureML Python SDK 创建、编排计算集群。创建资源的工作空间由工作目录中的 config.json 文件定义(<a class="ae le" href="https://docs.microsoft.com/en-us/azure/machine-learning/how-to-configure-environment#workspace" rel="noopener ugc nofollow" target="_blank"> configure-workspace </a>)。<strong class="kk iu"> AmlCompute </strong>代表 Azure 机器学习计算，是集群的配置类。如果群集不存在，我们将创建一个从 0 到定义的最大虚拟机数量的扩展。这些虚拟机正在运行 docker。我们将供应配置传递给<strong class="kk iu"> ComputeTarget </strong>类的 create 方法，该方法返回一个 ComputeTarget 对象。每当我们要进行计算时，就会用到这个对象。下面的代码可以包装成一个函数来获取 compute_target。</p><pre class="nd ne nf ng gt nw nx ny nz aw oa bi"><span id="3a58" class="mq lg it nx b gy ob oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">azureml.core</strong> <strong class="nx iu">import</strong> Workspace</span><span id="79de" class="mq lg it nx b gy of oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">azureml.core.compute</strong> <strong class="nx iu">import</strong> AmlCompute, ComputeTarget</span><span id="7868" class="mq lg it nx b gy of oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">azureml.core.compute_target</strong> <strong class="nx iu">import</strong> ComputeTargetException</span><span id="cf56" class="mq lg it nx b gy of oc l od oe">CLUSTER_NAME = "cpucluster"</span><span id="4fad" class="mq lg it nx b gy of oc l od oe">VM_SIZE = "Standard_D2_V2"</span><span id="1e4e" class="mq lg it nx b gy of oc l od oe">MAX_NODES = 1</span><span id="3f8b" class="mq lg it nx b gy of oc l od oe">workspace = Workspace.from_config()  <em class="og"># local config.json with subscription info</em></span><span id="877a" class="mq lg it nx b gy of oc l od oe"><em class="og"># retrieve existing cluster or create a new one</em></span><span id="135a" class="mq lg it nx b gy of oc l od oe"><strong class="nx iu">try</strong>:</span><span id="4312" class="mq lg it nx b gy of oc l od oe">    cpu_cluster = ComputeTarget(workspace=workspace, name=CLUSTER_NAME)</span><span id="c15e" class="mq lg it nx b gy of oc l od oe">    print("Found existing cluster, use it.")</span><span id="4d1f" class="mq lg it nx b gy of oc l od oe"><strong class="nx iu">except</strong> ComputeTargetException:</span><span id="a58f" class="mq lg it nx b gy of oc l od oe">    compute_config = AmlCompute.provisioning_configuration(</span><span id="3aea" class="mq lg it nx b gy of oc l od oe">        vm_size=VM_SIZE, max_nodes=MAX_NODES</span><span id="0ac4" class="mq lg it nx b gy of oc l od oe">    )</span><span id="1c5e" class="mq lg it nx b gy of oc l od oe">cpu_cluster = ComputeTarget.create(workspace, CLUSTER_NAME, compute_config)</span></pre><h2 id="31da" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">2.2.3 在计算目标上运行 Python 脚本</h2><p id="58dd" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们希望在我们的计算集群上运行一个 Python 脚本。在本系列的第 2/2 部分中，我们将详细讨论运行时环境的配置。这里我们展示了在 compute _ target(<a class="ae le" href="https://docs.microsoft.com/en-us/azure/machine-learning/how-to-set-up-training-targets#amlcompute" rel="noopener ugc nofollow" target="_blank">AML compute-docs</a>)上运行 Pyton 脚本所需的最少代码。</p><pre class="nd ne nf ng gt nw nx ny nz aw oa bi"><span id="ef55" class="mq lg it nx b gy ob oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">azureml.core</strong> <strong class="nx iu">import</strong> Experiment, RunConfiguration, ScriptRunConfig, Workspace</span><span id="e9b3" class="mq lg it nx b gy of oc l od oe"><strong class="nx iu">from</strong> <strong class="nx iu">tools</strong> <strong class="nx iu">import</strong> get_compute_target</span><span id="e800" class="mq lg it nx b gy of oc l od oe">CLUSTER_NAME = "cpucluster"</span><span id="a253" class="mq lg it nx b gy of oc l od oe">EXPERIMENT_FOLDER = "/workspaces/azureml/code"</span><span id="c399" class="mq lg it nx b gy of oc l od oe">workspace = Workspace.from_config()</span><span id="90f3" class="mq lg it nx b gy of oc l od oe"><em class="og"># get_compute_cluster wraps the code under section 2.2.2</em></span><span id="49ec" class="mq lg it nx b gy of oc l od oe">cpu_cluster = get_compute_target(workspace, CLUSTER_NAME)</span><span id="a203" class="mq lg it nx b gy of oc l od oe"><em class="og"># Create a new runconfig object</em></span><span id="1e18" class="mq lg it nx b gy of oc l od oe">run_amlcompute = RunConfiguration()</span><span id="5594" class="mq lg it nx b gy of oc l od oe"><em class="og">"""</em></span><span id="8fa4" class="mq lg it nx b gy of oc l od oe"><em class="og">Skipping Environment details, treated in Blog Part 2/2, code is still valid</em></span><span id="ab7d" class="mq lg it nx b gy of oc l od oe"><em class="og">"""</em></span><span id="ea9c" class="mq lg it nx b gy of oc l od oe"><em class="og"># Set the compute target for the run</em></span><span id="132c" class="mq lg it nx b gy of oc l od oe">run_amlcompute.target = cpu_cluster</span><span id="7c15" class="mq lg it nx b gy of oc l od oe"><em class="og"># Create a script config</em></span><span id="7a35" class="mq lg it nx b gy of oc l od oe">script_config = ScriptRunConfig(</span><span id="7909" class="mq lg it nx b gy of oc l od oe">    source_directory=EXPERIMENT_FOLDER,</span><span id="a10c" class="mq lg it nx b gy of oc l od oe">    script="run_experiment.py",</span><span id="5cf0" class="mq lg it nx b gy of oc l od oe">    run_config=run_amlcompute,</span><span id="7906" class="mq lg it nx b gy of oc l od oe">)</span><span id="0554" class="mq lg it nx b gy of oc l od oe"><em class="og"># Submit the experiment</em></span><span id="9001" class="mq lg it nx b gy of oc l od oe">experiment = Experiment(workspace=workspace, name="my-experiment")</span><span id="22a0" class="mq lg it nx b gy of oc l od oe">run = experiment.submit(config=script_config)</span></pre><h2 id="e870" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">2.3 AzureML SDK 摘要</h2><p id="0241" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们已经看到创建 Azure ML 工作空间是多么容易，旋转计算集群并在其上运行 Python 脚本。所有这些都作为 ML 工作室内的一个实验被跟踪。</p><h1 id="a108" class="lf lg it bd lh li lj lk ll lm ln lo lp jz lq ka lr kc ls kd lt kf lu kg lv lw bi translated">3 四舍五入</h1><p id="6aed" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">微软全力投入机器学习和 Python，这一点显而易见。对于我们的工作流，我们已经添加了 Docker/WSL2。从开发人员的角度来看，所有部分可靠地协同工作以完成实际工作是很重要的。我对生态系统各个部分的质量印象深刻:Docker/WSL2、VSCode 和 AzureML 以及它们对工作流的集成。当然，这一过程中也有一些陷阱，总结如下。</p><h2 id="6711" class="mq lg it bd lh mr ms dn ll mt mu dp lp kr mv mw lr kv mx my lt kz mz na lv nb bi translated">3.1 Windows 10 上 Docker 和 WSL2 的陷阱:</h2><ul class=""><li id="6c11" class="mc md it kk b kl lx ko ly kr ns kv nt kz nu ld oh mi mj mk bi translated">Linux 和 Windows 文件系统之间的文件权限映射是奇数(<a class="ae le" href="https://devblogs.microsoft.com/commandline/chmod-chown-wsl-improvements/" rel="noopener ugc nofollow" target="_blank">wsl-chmod-dev-blog</a>)；绑定挂载在 root:root 下</li><li id="d407" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld oh mi mj mk bi translated">Crontab 用户可能不得不接触 windows 任务调度程序(<a class="ae le" href="https://stephenreescarter.net/automatic-backups-for-wsl2/" rel="noopener ugc nofollow" target="_blank"> wsl-scheduling </a>)</li><li id="3c55" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld oh mi mj mk bi translated">GPU 支持正在进行中，但尚未实现(2020 年)</li><li id="4aba" class="mc md it kk b kl ml ko mm kr mn kv mo kz mp ld oh mi mj mk bi translated">Linux 图形用户界面应用在路线图上，但还没有实现(2021 年)</li></ul></div><div class="ab cl oi oj hx ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="im in io ip iq"><p id="565e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="og">原载于</em><a class="ae le" href="https://codebeez.nl/blogs/microsoft-and-python-machine-learning-modern-love-story-part-1/" rel="noopener ugc nofollow" target="_blank"><em class="og">https://codebeez . nl</em></a><em class="og">。</em></p></div></div>    
</body>
</html>