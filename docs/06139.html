<html>
<head>
<title>Why turn into a Pickle?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么会变成咸菜？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-turn-into-a-pickle-b45163007dac?source=collection_archive---------43-----------------------#2020-05-18">https://towardsdatascience.com/why-turn-into-a-pickle-b45163007dac?source=collection_archive---------43-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/925097f696df30a6a91631f0ca3f5964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0YM3ADGfo0yo8FlZ9xT-0g.jpeg"/></div></div><p class="kb kc gj gh gi kd ke bd b be z dk translated">图片来自<a class="ae kf" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kf" href="https://pixabay.com/users/photomix-company-1546875/" rel="noopener ugc nofollow" target="_blank">照片组合</a>【我没有得到免费使用的泡菜里克图片:(】</p></figure><h2 id="c41e" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">泡菜是什么</h2><p id="31e6" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">Pickle 是一个 python 模块，用于将 python 对象序列化为二进制格式，并将其反序列化回 python 对象。</p><h2 id="adf0" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">使用 pickle 的两个重要用例</h2><blockquote class="lx ly lz"><p id="0f81" class="lc ld ma le b lf mb lh li lj mc ll lm md me lo lp mf mg lr ls mh mi lu lv lw im bi translated"><strong class="le iu"> <em class="it">第一种情况:</em> </strong></p></blockquote><p id="6a94" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">你在做一个机器学习问题，用的是最爱:<em class="ma"> jupyter 笔记本</em>。您分析了数据并确定了将有助于您的模型的主要特征。您执行特征工程，并且您知道这将是您将传递给机器学习模型的最终数据。但是特征工程需要大量时间，并且您不希望在关闭笔记本电脑后丢失特征工程数据。</p><blockquote class="mj"><p id="cb18" class="mk ml it bd mm mn mo mp mq mr ms lw dk translated">这就是泡菜的用武之地。</p></blockquote><p id="7bb7" class="pw-post-body-paragraph lc ld it le b lf mt lh li lj mu ll lm kp mv lo lp kt mw lr ls kx mx lu lv lw im bi translated">您只需将特征工程数据传递到 Pickle 并以二进制格式保存它。然后，当您准备好执行建模时，就可以加载这些数据了。</p><p id="c3b4" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated"><strong class="le iu">转储数据(保存)</strong></p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="f058" class="kg kh it nd b gy nh ni l nj nk">#Code Example<br/>#Import the module<br/>import pickle</span><span id="e11b" class="kg kh it nd b gy nl ni l nj nk">#Do Some Feature Engineering<br/>feature_engineered_data = do_feature_engineering(data)</span><span id="2eee" class="kg kh it nd b gy nl ni l nj nk">#Dump it(save it in binary format)<br/>with open('fe_data.pickle','wb') as fe_data_file:<br/>     pickle.dump(feature_engineered_data, fe_data_file)</span></pre><p id="147e" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated"><strong class="le iu">加载回数据</strong></p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="ac1a" class="kg kh it nd b gy nh ni l nj nk">#Code Example<br/>#Import the module<br/>import pickle</span><span id="c96b" class="kg kh it nd b gy nl ni l nj nk">#Load the data - No need to do Feature Engineering again<br/>with open('fe_data.pickle','rb') as fe_data_file:<br/>     feature_engineered_data = pickle.load(fe_data_file)</span><span id="1866" class="kg kh it nd b gy nl ni l nj nk">#Continue with your modeling</span></pre><p id="62b5" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">那么到底有什么优势呢？</p><p id="2e65" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">功能工程可能是一个繁重的过程，您不希望在笔记本电脑关机的情况下重做它。因此，以可重用的格式存储它是有益的。</p><p id="8900" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">假设您为 EDA、功能工程和建模管理不同的笔记本。使用 Pickle，您可以将数据从一个笔记本转储到另一个笔记本。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><blockquote class="lx ly lz"><p id="be5a" class="lc ld ma le b lf mb lh li lj mc ll lm md me lo lp mf mg lr ls mh mi lu lv lw im bi translated"><strong class="le iu"> <em class="it">第二种情况:</em> </strong></p></blockquote><p id="e08d" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">一个更流行的案例是 pickle<em class="ma">机器学习模型</em>对象。</p><p id="b0fb" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">您已经完成了特征工程、建模，并获得了相当好的精确度，万岁！你在这里的工作已经完成，所以你关掉笔记本电脑，好好睡一觉。</p><p id="afcb" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">第二天早上，您得到另一个测试集来测试模型，但是因为您关闭了笔记本电脑，所以您必须再次训练模型，这需要 6 个小时！</p><blockquote class="mj"><p id="625b" class="mk ml it bd mm mn mo mp mq mr ms lw dk translated">这就是泡菜再次出现的地方</p></blockquote><p id="9c6b" class="pw-post-body-paragraph lc ld it le b lf mt lh li lj mu ll lm kp mv lo lp kt mw lr ls kx mx lu lv lw im bi translated">保存训练好的模型，并在有新数据进行测试时加载该模型。</p><p id="758c" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated"><strong class="le iu">甩掉模特</strong></p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="95ad" class="kg kh it nd b gy nh ni l nj nk">#import module<br/>import pickle</span><span id="c48e" class="kg kh it nd b gy nl ni l nj nk">#Train the data<br/>model.fit(X_train, X_test)</span><span id="a8bc" class="kg kh it nd b gy nl ni l nj nk">#Dump the model<br/>with open('fitted_model.pickle','wb') as modelFile:<br/>     pickle.dump(model,modelFile)</span></pre><p id="86bb" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated"><strong class="le iu">加载模型</strong></p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="ed83" class="kg kh it nd b gy nh ni l nj nk">#import module<br/>import pickle</span><span id="5c0d" class="kg kh it nd b gy nl ni l nj nk">#Load the model - No need to TRAIN it again(6 hours saved)<br/>with open('fitted_model.pickle','rb') as modelFile:<br/>     model = pickle.load(modelFile)</span><span id="80f1" class="kg kh it nd b gy nl ni l nj nk">#Predict with the test set<br/>prediction = model.predict(X_test)</span></pre></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><blockquote class="lx ly lz"><p id="ce8c" class="lc ld ma le b lf mb lh li lj mc ll lm md me lo lp mf mg lr ls mh mi lu lv lw im bi translated"><strong class="le iu">可以使用 Pickle 保存最终数据，用多个模型进行训练，也可以保存模型，用多个数据进行测试，不需要再次训练模型。多棒啊。</strong></p></blockquote></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="a56e" class="pw-post-body-paragraph lc ld it le b lf mb lh li lj mc ll lm kp me lo lp kt mg lr ls kx mi lu lv lw im bi translated">你对这些用例有什么看法，你还能想到哪些其他用例？请在评论中告诉我！</p></div></div>    
</body>
</html>