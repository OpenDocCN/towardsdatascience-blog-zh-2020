<html>
<head>
<title>Finding Expected Values using Monte Carlo Simulation: An Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用蒙特卡罗模拟寻找期望值:简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/finding-expected-values-using-monte-carlo-simulation-an-introduction-c083a5b99942?source=collection_archive---------26-----------------------#2020-07-12">https://towardsdatascience.com/finding-expected-values-using-monte-carlo-simulation-an-introduction-c083a5b99942?source=collection_archive---------26-----------------------#2020-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c243" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python 中的蒙特卡罗模拟解决常见概率难题教程</h2></div><p id="aea6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对解决概率难题感兴趣，很有可能你会遇到一些难题，这些难题要求你在观察到所需的结果之前找到预期的试验次数。</p><p id="c7d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你已经解决了足够多的问题，你就有可能知道如何通过分析来解决它们。我希望这篇文章能让你用不同的方法解决同样的问题，如果你想用分析的方法解决问题，给你锦囊妙计。</p><p id="c701" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是首先，蒙特卡罗(MC)方法是什么？根据<a class="ae le" href="https://en.wikipedia.org/wiki/Monte_Carlo_method" rel="noopener ugc nofollow" target="_blank">维基百科</a>，</p><blockquote class="lf lg lh"><p id="a237" class="ki kj li kk b kl km ju kn ko kp jx kq lj ks kt ku lk kw kx ky ll la lb lc ld im bi translated">蒙特卡罗方法是一种广泛的计算算法，它依靠重复的随机抽样来获得数值结果。基本概念是用随机性来解决原则上可能是确定性的问题。”</p></blockquote><p id="c195" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们用一个简单而实际的问题来进一步理解 MC。如何使用 MC 来估计π的值？</p><ol class=""><li id="1f4e" class="lm ln it kk b kl km ko kp kr lo kv lp kz lq ld lr ls lt lu bi translated">画一个正方形，画一个半径等于正方形边长的圆的四分之一圆</li><li id="a5f2" class="lm ln it kk b kl lv ko lw kr lx kv ly kz lz ld lr ls lt lu bi translated">在正方形表面上均匀分布给定数量的点</li><li id="18b3" class="lm ln it kk b kl lv ko lw kr lx kv ly kz lz ld lr ls lt lu bi translated">计算圆内的点数</li><li id="faed" class="lm ln it kk b kl lv ko lw kr lx kv ly kz lz ld lr ls lt lu bi translated">找出落在这个圆内的点与总点数的比率。理论上，这个比例是<em class="li"> π </em> /4。将所述比率乘以 4 以得到<em class="li"> π </em>的值。</li></ol><p id="1c1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">直观上，我们可以看到，随着我们在正方形表面上散布的点数的增加，精确度也在增加。对于无限多的点，该比率接近<em class="li"> π </em> /4。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/719e999ef391988055e33061b0647f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*6wlFqiGF35WPRWjlgwDneg.gif"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">维基百科上用户 nicoguaro 的 GIF</p></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h2 id="6556" class="mt mu it bd mv mw mx dn my mz na dp nb kr nc nd ne kv nf ng nh kz ni nj nk nl bi translated"><strong class="ak">压断骆驼背的稻草</strong></h2><p id="42a5" class="pw-post-body-paragraph ki kj it kk b kl nm ju kn ko nn jx kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">这个谜题源自著名的习语，讲的是骆驼如何在最后一根稻草看似微小的附加重量下屈服。</p><p id="e72f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数学上，假设稻草被一根一根地放在骆驼背上。吸管的重量同样可能是 0 到 1 之间的任何真实值。当稻草的重量超过 1 磅时，骆驼的背就会折断。求最后一根稻草重量的期望值。</p><p id="adbf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能会想，最后一根稻草的预期重量会和 0.5 有什么不同吗，0.5 是单根稻草重量的预期值。答案是肯定的，因为较重的稻草比较轻的稻草更容易压断骆驼的背。因此，直觉上，最后一根稻草的预期重量大于 0.5。</p><p id="ed2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在继续下一步之前，试着分析性地解决这个问题，看看你是否能找到正确的答案。</p><p id="842d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">蒙特卡洛方法</strong></p><p id="b0e9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用 Python，让我们通过在骆驼背上添加吸管来模拟折断骆驼的背。</p><p id="45e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="li">免责声明:在模拟这个谜题时，没有骆驼受到伤害。</em></p><p id="6c93" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">定义函数 break_camel_back()返回压断骆驼背的稻草的重量和模拟压断骆驼背 n 次的 expected _ weight _ of _ last _ straw(n)并返回每次压断骆驼背的稻草的平均重量。对于 n 的大值，这个函数的输出就是我们问题的答案。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="nr ns l"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated"><a class="ae le" href="https://gist.github.com/aditator/62ddda3369acf8d66331c854f5a8b963" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/aditator/62 ddda 3369 acf8d 66331 c 854 F5 A8 b 963</a></p></figure><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/4eca0a737a339051f248f1d7663add97.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*2v6BSg56TyQyxKCG-YQ3_A.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">Camel.py 的输出</p></figure><p id="5061" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以看出，对于大的值(在这种情况下为 2 ⁹)，期望值接近 0.64 左右的值，符合我们的直觉。</p><p id="24e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确切的期望值是 2-e/2，大约是 0.640859(感谢那些通过分析成功解决这个问题的人)。如果你不能解析地解决它，不要担心，你可以在这里找到解决方案<a class="ae le" href="https://mindyourdecisions.com/blog/2014/04/07/monday-puzzle-the-straw-that-broke-the-camels-back/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="2b0d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">附加练习:调整代码以找到相同重量分布下折断骆驼背的预期<strong class="kk iu"> <em class="li">根</em> </strong>。(答案是 e)</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h2 id="fcf2" class="mt mu it bd mv mw mx dn my mz na dp nb kr nc nd ne kv nf ng nh kz ni nj nk nl bi translated"><strong class="ak">获得“TXT”图案所需的投掷硬币次数</strong></h2><p id="b4d0" class="pw-post-body-paragraph ki kj it kk b kl nm ju kn ko nn jx kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">找出你需要翻转的次数的期望值，以便看到图案“TXT”，其中 T 是反面，X 是正面或反面。</p><p id="65ea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">(你将继续投掷硬币，直到你观察到 TTT 或 THT，并数出你投掷硬币的次数)</p><p id="b2f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">蒙特卡洛方法</strong></p><p id="6eaa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">定义 coin_toss()函数，该函数模拟在随机库中选择的帮助下投掷硬币。将 res 初始化为 3(获得 TXT 模式的最小投掷次数),并返回发生这种情况时的投掷次数。</p><p id="e76b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像前面一样，定义 expected_tosses()来返回生成“TXT”模式所需的平均投掷次数。</p><figure class="mb mc md me gt mf"><div class="bz fp l di"><div class="nr ns l"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated"><a class="ae le" href="https://gist.github.com/aditator/c5ec83dbbbac77ab6897eaa86b7b50e3" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/aditator/C5 EC 83 dbb BAC 77 ab 6897 EAA 86 b 7 b 50 e 3</a></p></figure><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/00af3c041e810a23aaee1269e3a560bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/1*sFojG-_jf3NikgKtP5PPkw.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">TXT.py 的输出</p></figure><p id="d5d3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以看出，对于大值(在这种情况下为 2 ⁹)，预期值趋向于 6.8 左右的值。</p><p id="02fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在分析上，这可以很容易地用一组线性方程来解决。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/37288727262eff56e303d0a672d25ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*zbaeKRSI5MUXjLFrRnVX6g.png"/></div><p class="mi mj gj gh gi mk ml bd b be z dk translated">由 brilliant.org 的用户<a class="ae le" href="https://brilliant.org/profile/geoff-xxs185/" rel="noopener ugc nofollow" target="_blank"> Geoff Piling </a>发布</p></figure><p id="fae7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在求解 E 的方程之后，我们发现答案是 34/5 (6.8)，并且 MC 模拟与结果一致。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="a517" class="nw mu it bd mv nx ny nz my oa ob oc nb jz od ka ne kc oe kd nh kf of kg nk og bi translated">就是这样！</h1><p id="a710" class="pw-post-body-paragraph ki kj it kk b kl nm ju kn ko nn jx kq kr no kt ku kv np kx ky kz nq lb lc ld im bi translated">我们已经证实蒙特卡罗方法是模拟简单随机事件的有力工具。这些方法的应用不仅仅局限于概率谜题，而是跨越了金融、计算生物学、数据科学、工程学，甚至<a class="ae le" href="https://web.archive.org/web/20181106220526/https://legalaidresearch.org/wp-content/uploads/Research-Increasing-Access-to-REstraining-Order-for-Low-Income-Victims-of-DV-A-Cost-Benefit-Analysis-of-the-Proposed-Domestic-Abuse-Grant-Program.pdf" rel="noopener ugc nofollow" target="_blank">定律</a>！</p><p id="6f51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请在评论中告诉我你的想法，或者你希望我详细阐述什么。</p><p id="e333" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我会推荐初学者从这里开始<a class="ae le" href="https://www.youtube.com/watch?v=OgO1gpXSUzU&amp;feature=emb_logo" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>