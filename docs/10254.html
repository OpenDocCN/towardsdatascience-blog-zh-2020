<html>
<head>
<title>SAP Data Analytics in the Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云中的 SAP 数据分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sap-data-analytics-in-the-google-cloud-8f1a8a662355?source=collection_archive---------41-----------------------#2020-07-19">https://towardsdatascience.com/sap-data-analytics-in-the-google-cloud-8f1a8a662355?source=collection_archive---------41-----------------------#2020-07-19</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="97e5" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何将 SAP 与谷歌云平台(BigQuery、Data Studio 或 recently looker 等强大数据分析工具的提供商)相结合，以获得强大的数据分析平台和宝贵的见解。如果您对 SAP 数据的实用数据分析方法感兴趣，<a class="ae kj" href="https://medium.com/@christianlauer90/sap-data-analytics-examples-for-internal-audit-financial-tax-accounting-and-controlling-analysis-1fbc81d01eac" rel="noopener">这篇文章</a>可能也会让您感兴趣。</h2></div><figure class="kl km kn ko gu kp gi gj paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gi gj kk"><img src="../Images/92ffc9b4c1e7ac945a560ffb375e00df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2xtqGYW0cyeSAzhBnQFDsA.jpeg"/></div></div><p class="kw kx gk gi gj ky kz bd b be z dk translated">云是数据分析的推动者——图片由<a class="ae kj" href="https://unsplash.com/@alexmachado" rel="noopener ugc nofollow" target="_blank"> Alex Machado </a>在<a class="ae kj" href="https://unsplash.com/photos/80sv993lUKI" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上提供</p></figure><h2 id="51f9" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">体系结构</h2><p id="3880" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">SAP HANA 已经内置了 SAP 数据服务，因此您可以轻松地将数据从 SAP 应用程序或其底层数据库导出到 BigQuery。然而，GCP 和思爱普的结合对于那些仍然生活在 ERP 世界中的公司来说也是可能的。</p><p id="6d62" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">以下几点显示了将数据从 SAP 加载到 Google Services 的可能性:</p><ul class=""><li id="9346" class="mu mv iu ly b lz mp mc mq lj mw ln mx lr my mo mz na nb nc bi translated">使用 talend/Google data flow/等数据集成工具，通过 RFC(远程函数调用)接口提取数据。</li><li id="ae59" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated">编写 ABAP 程序</li><li id="d6b6" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated">fivetran 等第三方连接器</li><li id="e3fe" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated">使用 SAP 复制服务器</li></ul><p id="0cb4" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">因此，可能的解决方案如下所示:</p><figure class="kl km kn ko gu kp gi gj paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gi gj ni"><img src="../Images/2ba1d849ca8c2b298fe7a4b979aab41b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QgseQgmFL46T926LSOoeTA.png"/></div></div><p class="kw kx gk gi gj ky kz bd b be z dk translated">SAP 到大型查询—图片来自 Google [1]</p></figure><h2 id="98b3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">实现增量负载</h2><p id="4bf6" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">获取数据是第一步。之后，您将处理如何实现一个 delta 逻辑的问题，因为您可能不想通过满载定期加载所有数据。这只会带来加载时间长、没有历史数据等缺点。尤其是控制、内部审计等部门。通常基于历史数据视图构建他们的数据分析。</p><p id="5a0e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">虽然 SAP 数据服务已经内置在 CDC 向导中，但其他数据集成方法可能需要一些额外的工作。要实现这一步，非常了解 SAP 表和表结构是很重要的。在自己的逻辑上实现增量加载尤其可以借助两个表来实现:<strong class="ly iv"> CDHDR </strong>(改变标题)和<strong class="ly iv"> CDPOS </strong>(改变位置)。这些表跟踪主数据或事务数据的变化。</p><h2 id="3dd0" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">数据转换</h2><p id="5aca" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">随着基于列的数据仓库工具(如 BigQuery)的出现，由于性能以及源系统和目标系统之间不同的表结构或数据类型，数据转换通常是必要的。</p><p id="7312" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">一个例子是，在 SAP 中，你有 BKPF(会计凭证标题)和 BSEG(会计凭证段)表。由于其基于列的结构，对 BigQuery 中的数据进行<strong class="ly iv">反规范化</strong>是有意义的。解决方案可以是连接 BKPF 和 BSEG，如果需要，还可以连接其他主数据和参考表——例如借助 BigQuery DTS(数据传输服务)中的内置功能。因此，您可以得到一个非规范化的数据对象体系结构，如下图所示:</p><figure class="kl km kn ko gu kp gi gj paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gi gj nj"><img src="../Images/d132d2e004ccae4078a6503445f567f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bQez_NeJ1DAkGV48Qse8CQ.png"/></div></div><p class="kw kx gk gi gj ky kz bd b be z dk translated">插图:从原始表格到非规范化数据对象-作者图片</p></figure><p id="5ecf" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">另一个获得性能和成本效率的转换是使用嵌套数据结构。BigQuery 或 Amazon 的 Redshift 等较新的数据仓库技术确实能更好地处理这种数据结构。使用嵌套数据的用例有，例如标题/段表，如 BKPF 和 BSEG，或者如果一个表包含的列变化不大，如:</p><ul class=""><li id="dbaa" class="mu mv iu ly b lz mp mc mq lj mw ln mx lr my mo mz na nb nc bi translated"><code class="fe nk nl nm nn b">name</code></li><li id="201d" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated"><code class="fe nk nl nm nn b">lastname</code></li></ul><p id="d8ea" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">结合历史上经常变化的列，如[2]:</p><ul class=""><li id="3c27" class="mu mv iu ly b lz mp mc mq lj mw ln mx lr my mo mz na nb nc bi translated"><code class="fe nk nl nm nn b">address</code>(一个嵌套重复的字段及其后续嵌套字段):</li><li id="e869" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated"><code class="fe nk nl nm nn b">address.address</code></li><li id="309b" class="mu mv iu ly b lz nd mc ne lj nf ln ng lr nh mo mz na nb nc bi translated"><code class="fe nk nl nm nn b">address.city</code></li></ul><h2 id="94c1" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">实施(自助)申报</strong></h2><p id="aa01" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">最后一部分将实现报告和数据分析的可能性。有了 BigQuery，数据分析师已经有了一个很好的分析工具。数据科学家可以使用数据实验室或 GCP 内众多 ML 服务之一。Data Studio 可能是业务用户共享 KPI、仪表板等的合适解决方案。为了在 BigQuery 中实现角色/用户访问模型，通常使用 BUKRS 属性(公司代码)，这样用户就只能看到分配给他的公司代码的数据，这也是 SAP 处理用户权限的方式。</p><p id="b60b" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><strong class="ly iv">结论 SAP 和 GCP 的结合将为贵公司带来巨大的数据分析能力和可能性。SAP 系统托管了大量想要分析的有趣数据，而 GCP 提供了许多数据分析/科学家工具和服务，可以实现这一点。</strong></p><h2 id="3707" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">资料来源和进一步阅读:</h2><p id="348c" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">[1] Google，<a class="ae kj" href="https://cloud.google.com/solutions/sap/docs/bigquery-replication-from-sap-apps?hl=de" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/solutions/sap/docs/big query-replication-from-sap-apps？hl=de </a></p><p id="920e" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated">[2]谷歌，<a class="ae kj" href="https://cloud.google.com/bigquery/docs/nested-repeated" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/bigquery/docs/nested-repeated</a></p><p id="8785" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kj" href="https://blogs.sap.com/2018/04/08/hana-sda-google-bigquery/" rel="noopener ugc nofollow" target="_blank">https://blogs.sap.com/2018/04/08/hana-sda-google-bigquery/</a></p><p id="1b33" class="pw-post-body-paragraph lw lx iu ly b lz mp jv mb mc mq jy me lj mr mg mh ln ms mj mk lr mt mm mn mo in bi translated"><a class="ae kj" href="https://cloud.google.com/solutions/sap/docs/bigquery-sap-export-using-sds" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/solutions/sap/docs/big query-sap-export-using-SDS</a></p></div></div>    
</body>
</html>