<html>
<head>
<title>Introduction to Decorators in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中装饰器的介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/decorators-in-python-9cf8ba95e8e7?source=collection_archive---------17-----------------------#2020-03-11">https://towardsdatascience.com/decorators-in-python-9cf8ba95e8e7?source=collection_archive---------17-----------------------#2020-03-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="93cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">了解如何改变对象的行为</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/34b374b5cfa5f7576dff357cb603e0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlZKWb8AYpG8b3F1_KUtxQ.jpeg"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">来源:<a class="ae lb" href="https://www.dreamstime.com/photos-images/autumn-scenery.html" rel="noopener ugc nofollow" target="_blank">https://www . dreams time . com/photos-images/autumn-scene . html</a></p></figure><h2 id="eae3" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">介绍</h2><p id="219c" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我们习惯于在函数中传递和返回各种数据类型。是时候开始从函数传递和返回函数了。我们举个例子。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ma"><img src="../Images/874d3b85a7477a4816b0373b7a4dad37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NqE-0dZTz3XxVsy9w14Mw.png"/></div></div></figure><p id="04dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我们有一个名为<code class="fe mb mc md me b">test</code>的函数，它根据一个条件调用两个内部函数中的一个。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/3cbc77f6603d2cf7d1681ca08cad4dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WufVGrvQ8gP5clQZ30rHow.png"/></div></div></figure><p id="fb69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，我们也可以返回对函数的引用，而不是调用函数。然后可以使用该引用来调用该函数。我们再举一个例子。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/8d318f2d372fa7862e1e87f8127c134b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLLBwyufBtEs60Z9Q4CjOw.png"/></div></div></figure><p id="e55d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我们返回的是<code class="fe mb mc md me b">_inner</code>而不是<code class="fe mb mc md me b">_inner().</code>，这种引用的返回和以后的使用是Python中装饰器的基本思想。</p><h2 id="24c4" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">装修工</h2><p id="78d7" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">装饰器只不过是Python中函数的包装器。它将感兴趣的函数作为参数，在调用它之前和之后执行某些任务并返回结果。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mh"><img src="../Images/e36d884d91e7d24c75d6517a77014043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WD_wYDwVkg-XQEyMBqFzGQ.png"/></div></div></figure><p id="cb0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们传递一个引用<code class="fe mb mc md me b">say_hello</code>给我们的装饰器，然后它返回一个<code class="fe mb mc md me b">wrapper.</code>,我们用这个包装器调用我们的函数。</p><p id="b34e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们不希望每次使用decorators时都键入所有这些内容。我们不需要。由于Python的语法糖，我们可以做同样的事情，如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mi"><img src="../Images/857a8ce6f7d2071345b45642543708b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GdVDqz-GGRTt5R03KiBPUA.png"/></div></div></figure><p id="b7c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们稍微修改一下装饰函数。现在，它非常有限。它不接受任何参数，也不返回函数返回的值。我们来补充一下。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mj"><img src="../Images/089e9806134a782a7afc84190d74f404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTHnNXQPlEmsaDdO8ISi2w.png"/></div></div></figure><p id="2368" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是编写装饰函数的一个很好的模板。让我们尝试一些简单的例子。这些不是最好的例子，但是，我希望它们可以作为一个好的起点和尝试新奇事物的动力。</p><h2 id="db10" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">1.检查统计数据</h2><p id="8a16" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我们已经看到<a class="ae lb" rel="noopener" target="_blank" href="/initializing-neural-networks-3a774eb63745">标准化在任何数据科学应用中都是重要的一步</a>。因此，每当我们归一化某个东西时，我们可能想要检查归一化前后的平均值和标准偏差。为此，我们可以这样做</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/b115701ed2a49b5a72e07cd3c07c8538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2lMDz1Dhs_yzjv8_wOYPig.png"/></div></div></figure><p id="794f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们在卷积后归一化图像以确保所有值都在0到255之间时，也可以使用这种方法。</p><h2 id="6fdf" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">2.强制性文件</h2><p id="fd38" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">您可以使用<code class="fe mb mc md me b">__doc__</code>属性访问功能文档。如果您正在开发一个能够自动生成文档的高级应用程序，您会希望确保您的所有代码都有文档记录。让我们试试:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/2d19cef6cb5e4994ac350638e38d32d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jH3ITnu1F-AeHRXoAwdelw.png"/></div></div></figure><p id="7492" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查看Python中的inspect库，了解更多关于如何在Python中检查和使用活动对象的信息<a class="ae lb" href="https://docs.python.org/3/library/inspect.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="a715" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">3.注释</h2><p id="6a6b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">类似于文档，我们可以改变注释在Python中的行为。当我们在Python中使用注释时，通常是为了确保输入和输出是某种类型。</p><p id="af83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，我们可以将注释用于其他用途。也许我们可以使用output注释将输出强制转换为预期的数据类型，如果它还不是该类型的话。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/c08085481187a73790a75b0cc604f1ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ssusIVyuEOWrIaW3hsNDw.png"/></div></div></figure><h2 id="15f5" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">结论:</h2><p id="b2ac" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这就是本文的全部内容。我希望它能很好地介绍Python中的装饰者。从这里开始。了解装饰者更高级的用例。学习如何将它们应用到课堂上。学习其他库，把它们和decorators结合起来，构建一些有用的东西。</p><p id="ccea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Decorators和元类(下一篇文章)可以作为强大的工具，按照您想要的方式定制Python。</p><p id="0e41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">~快乐学习</p></div></div>    
</body>
</html>