<html>
<head>
<title>Machine Learning and Supply Chain Management: Hand-on Series #1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习和供应链管理:动手系列#1</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-and-supply-chain-management-1a1d9462eb35?source=collection_archive---------16-----------------------#2020-07-31">https://towardsdatascience.com/machine-learning-and-supply-chain-management-1a1d9462eb35?source=collection_archive---------16-----------------------#2020-07-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="16a0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" rel="noopener" target="_blank" href="https://towardsdatascience.com/machine-learning/home">内部 AI </a></h2><div class=""/><div class=""><h2 id="4d34" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">拥抱未来</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/5fb59f65260cb3d4a2159179194b84c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WzL75RColmRUermV"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@shaahshahidh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Shaah Shahidh </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="e853" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">机器学习、深度学习和人工智能正在从医学到音乐的所有领域实现转型变革。它正在帮助企业从采购到支付、计划生产、订购到兑现和记录到报告，发现优化机会并支持决策制定，这在以前使用传统商业分析和信息技术是不可能的。</p><p id="b3b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">机器学习和人工智能是一个复杂的领域，对我们这一代人来说有点令人畏惧，他们可能在本科教育之前没有接触过计算机。在这篇介绍性文章中，我将举例说明机器学习在采购和质量管理业务流程优化中的简化实现。在本文中，我将避免复杂和微妙的细节，在这一点上保持示例的简单性。我们将在本文的下一个系列中讨论复杂的场景。在本系列中，我将使用编程语言 Python 来实现机器学习算法，以解决供应链业务挑战，并且我假设您对 Python 语言有一些基本的了解。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="2d3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="mu">商业案例</em> </strong></p><p id="b2c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一个供应商供应不同的材料，其单价和采购订单总值相差很大。有时供应商的一些零件未能通过质量检查，但缺陷百分比似乎没有遵循一种趋势。在本系列的第一篇博客中，为了简单起见，我假设了独立特性和从属特性之间的线性关系。</p><p id="045b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="mu">目标</em> </strong></p><p id="58af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">企业希望预测供应商交付的次品百分比。如果预测的次品百分比低于阈值水平，则不会执行质量检查。让我们考虑一下，如果交货中的次品率超过 0.4%，那么就需要明确的进货检验，以确保最终产品的质量。</p><p id="b6a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这将有助于专注于特定采购订单交付的质量检查，以控制最终产品质量，并优化检验成本。它还能够发现有时影响少量材料有缺陷交付的变量/参数，并与供应商合作解决这个问题。</p><p id="89f7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="mu">数据点和信息</em> </strong></p><p id="cac8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ERP 中的采购订单信息和相应的进货检验结果为三年期间的所有订单提供了数据点。</p><p id="232b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="mu">对从 ERP 导出的历史数据进行采样，以训练机器学习算法</em></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mv"><img src="../Images/d0bbb019bbf60fc1d64da6a8d06bfb5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYkTCbgRdZf9joPYs_EPaA.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于训练算法的样本数据</p></figure><p id="04f9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">预计质量缺陷百分比的采购订单(PO)数据</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mw"><img src="../Images/efcd75766f15d80bbebac1f07571c70a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-G4804iJw7tROt0WLKZUYQ.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">用于预测值的测试数据</p></figure><p id="6883" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="mu">整装待发</em> </strong></p><p id="70f9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了简单起见，我假设过去的数据点是从 ERP 中导出的，并以 excel 格式保存在本地机器中。</p><p id="7925" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我将解释每一行代码，然后将完整的代码放在文章的末尾以供参考。如前所述，为了让我们理解核心概念，我在这里简化了一些东西，在以后的系列文章中，我将在其上构建更真实的复杂示例。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="355c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="mu">第一步</em></strong><em class="mu"/>——首先，我们将导入我们将在机器学习程序中使用的所有 python 模块。我不会在本文中详细介绍这些库和模块，您可以在网上找到关于这些模块的更多细节。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="7a99" class="nc nd it my b gy ne nf l ng nh">import pandas as pd<br/>from sklearn.tree import DecisionTreeRegressor # Import Decision Tree Algorithm<br/>from sklearn.preprocessing import StandardScaler<br/>from sklearn.svm import SVR #import for support vector regressor</span></pre><p id="8c7c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> Pandas </strong>是一个用 Python 编写的软件库，用于数据操作和分析。使用 Pandas 可以非常轻松地读写 excel、CSV 和其他文件格式的数据，并处理时间序列数据。<strong class="lk jd"> Scikit-learn </strong>是一个免费的 python 机器学习库。我们将使用决策树学习和支持向量机来预测未来供应商交付中的缺陷百分比。为此，我们将专门从 Scikit Learn 中导入这两个模块。</p><p id="a1cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">步骤 2 </strong> -我们将读取 excel 文件中过去的数据点，并将其保存到 pandas dataframe SourceData。类似地，我们将读取我们希望算法预测交付缺陷百分比的交付数据点。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="e0e0" class="nc nd it my b gy ne nf l ng nh">SourceData=pd.read_excel("Supplier Past Performance.xlsx") # Load the training data into Pandas DataFrame</span><span id="142d" class="nc nd it my b gy ni nf l ng nh">Testdata=pd.read_excel("Defect Predict.xlsx") # Load the test data</span></pre><p id="ef0e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="mu">注意</em> —我已经将 python 程序、过去数据点 excel 表、未来数据集保存在同一个文件夹中。因此，在代码中，只指定了文件名。如果文件位于不同的文件夹位置，则需要提供完整路径。</p><p id="b649" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">第三步</strong> -现在过去的所有四个数据点，即采购订单金额、采购订单数量、交货前发送的采购订单和缺陷百分比将从 excel 读入 Pandas 数据框架。</p><p id="d9d6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们将使用采购订单金额、采购订单数量、交货前发送的 PO(天数)来预测未来交货中的缺陷百分比。自变量是用于进行预测的参数，因变量是被预测的变量。由于我们将使用从 ERP 收集的过去的数据点来训练机器学习算法，因此我们将把它称为 SourceData_train_independent 和 SourceData_train_dependent 变量。</p><p id="28d9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下面的代码中，我们声明了除“缺陷百分比”之外的所有列数据为自变量，只有“缺陷百分比”为因变量。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="b6a7" class="nc nd it my b gy ne nf l ng nh">SourceData_train_independent= SourceData.drop(["Defect Percent"], axis=1) # Drop depedent variable from training dataset</span><span id="941a" class="nc nd it my b gy ni nf l ng nh">SourceData_train_dependent=SourceData["Defect Percent"].copy() <br/># New dataframe with only independent variable value for training dataset</span></pre><p id="34d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">步骤 4 </strong> -采购订单价值从一千到一百万英镑不等，而订单数量从一百到一千个托盘不等。采购订单在交货日期前 15 到 45 天发出。由于独立变量的范围非常不同，因此我们需要对其进行调整，以避免一个变量(在本例中为采购订单价值)对其他因素的意外影响。</p><p id="b3af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们只需要缩放独立变量。</p><p id="9043" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下面的代码中，独立的训练和测试变量被缩放，并分别保存到 X-train 和 X_test。在 y_train 中，保存的从属训练变量不进行缩放。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="ba65" class="nc nd it my b gy ne nf l ng nh">sc_X = StandardScaler()<br/><br/>X_train=sc_X.fit_transform(SourceData_train_independent.values) <br/># scale the independent training dataset variables</span><span id="efe3" class="nc nd it my b gy ni nf l ng nh">X_test=sc_X.transform(Testdata.values) # scale the independent test dataset</span><span id="fea5" class="nc nd it my b gy ni nf l ng nh">y_train=SourceData_train_dependent # scaling is not required for dependent variable</span></pre><p id="ae84" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">步骤 5 </strong> -现在我们将分别输入独立和非独立的训练数据，即 X_train 和 y_train，来训练支持向量机模型。为了避免混淆，我不会在第一个系列中讨论复杂的细节，比如算法(超参数)的设置。</p><p id="00aa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在下面的代码中，我们首先用一个拟合方法来拟合 X_train 和 y_train。在模型被训练后，我们通过测试独立变量值，即新订单的“PO 数量”、“PO 数量”和“交货前发送的 PO”以及 X_test 变量，并将预测的缺陷百分比存储在变量“预测”中。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="51c4" class="nc nd it my b gy ne nf l ng nh">svm_reg = SVR(kernel="linear", C=1)<br/>svm_reg.fit(X_train, y_train) # fit and train the model</span><span id="fbcb" class="nc nd it my b gy ni nf l ng nh">predictions = svm_reg.predict(X_test)<br/><br/>print("Defect percent prediction by Support Vector model for the order value of 95827 GBP with 851 pallets sent 55 days before delivery data is " ,round(predictions[0],2) , "%")</span></pre><p id="a82d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，使用 print 语句打印预测的缺陷百分比。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nj"><img src="../Images/81574b6111742af73045ca263c2e94fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAiN7gcxw0iBlYCtD_iioA.png"/></div></div></figure><p id="f9ee" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">步骤 6 </strong> —同样，我们将把训练数据集(自变量和因变量的值)送入决策树模型。</p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="a968" class="nc nd it my b gy ne nf l ng nh">tree_reg = DecisionTreeRegressor()<br/>tree_reg.fit(X_train, y_train) # fit and train the model</span><span id="5bf7" class="nc nd it my b gy ni nf l ng nh">decision_predictions = tree_reg.predict(X_test) # Predict the value of dependent variable</span><span id="0a86" class="nc nd it my b gy ni nf l ng nh">print("Defect percent prediction by Decision Tree model for the order value of 95827 GBP with 851 pallets sent 55 days before delivery data is " ,round(decision_predictions[0],2) , "%")</span></pre><p id="9f25" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用 print 语句打印预测的缺陷百分比。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nk"><img src="../Images/f5ed04b91857b4012e36221d20a9b690.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yFyFschmKL7mYUWqgXuGfg.png"/></div></div></figure><p id="5759" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们已经了解了如何使用决策树学习和支持向量模型算法来预测未来交付中的缺陷百分比数量，并基于此为特定供应商的交付计划质量检查。请注意，为了建立最初的理解，我已经简化了一些实际用例之外的元素。</p><p id="d75c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在此示例中，每次运行代码来预测新订单的结果时，我们都会对模型进行定型。对于大型数据集和复杂的示例，这可能不可行。在本文的<a class="ae lh" href="https://medium.com/@kaushikthoughts/machine-learning-and-supply-chain-management-hands-on-series-2-d723125f749e" rel="noopener">下一个系列</a>中，我将讨论保存训练好的模型，然后直接加载它来预测测试数据的结果。</p><p id="ca40" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://medium.com/@kaushikthoughts/machine-learning-and-supply-chain-management-hands-on-series-2-d723125f749e" rel="noopener"> <em class="mu">机器学习与供应链管理:动手系列#2 </em> </a></p><p id="a4fe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">完整代码</strong></p><pre class="ks kt ku kv gt mx my mz na aw nb bi"><span id="f1e5" class="nc nd it my b gy ne nf l ng nh">""" Step 1 - Import the required modules"""<br/><br/>import pandas as pd<br/>from sklearn.tree import DecisionTreeRegressor <br/>from sklearn.preprocessing import StandardScaler <br/>from sklearn.svm import SVR<br/><br/>""" Step 2 - Read the data source"""<br/>SourceData=pd.read_excel("Supplier Past Performance.xlsx") # Load the training data into Pandas DataFrame<br/>Testdata=pd.read_excel("Defect Predict.xlsx") # Load the test data <br/><br/>""" Step 3  - Declare the independent and dependent train data from the sample"""<br/>SourceData_train_independent= SourceData.drop(["Defect Percent"], axis=1) # Drop depedent variable from training dataset<br/>SourceData_train_dependent=SourceData["Defect Percent"].copy() #  New dataframe with only independent variable value for training dataset<br/><br/>""" Step 4  - Scale the independent test and train data"""<br/>sc_X = StandardScaler()<br/>X_train=sc_X.fit_transform(SourceData_train_independent.values) # scale the independent variables<br/>y_train=SourceData_train_dependent # scaling is not required for dependent variable<br/>X_test=sc_X.transform(Testdata.values)<br/><br/>""" Step 5  - Fit the test data in maching learning model - Support Vector Regressor"""<br/>svm_reg = SVR(kernel="linear", C=1)<br/>svm_reg.fit(X_train, y_train) # fit and train the model</span><span id="3a1b" class="nc nd it my b gy ni nf l ng nh">predictions = svm_reg.predict(X_test)<br/><br/>print("Defect percent prediction by Support Vector model for the order value of 95827 GBP with 851 pallets sent 55 days before delivery data is " ,round(predictions[0],2) , "%")<br/><br/>""" Step 6 - Fit the test data in maching learning model - Decision Tree Model"""<br/>tree_reg = DecisionTreeRegressor()<br/>tree_reg.fit(X_train, y_train) # fit and train the model</span><span id="ea9c" class="nc nd it my b gy ni nf l ng nh">decision_predictions = tree_reg.predict(X_test) # Predict the value of dependent variable</span><span id="d68b" class="nc nd it my b gy ni nf l ng nh">print("Defect percent prediction by Decision Tree model for the order value of 95827 GBP with 851 pallets sent 55 days before delivery data is " ,round(decision_predictions[0],2) , "%")</span></pre></div></div>    
</body>
</html>