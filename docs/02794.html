<html>
<head>
<title>Amazing cost savings with AWS Lambda for Data Integration — (2022)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助AWS Lambda实现惊人的数据集成成本节约— (2022年)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/amazing-cost-savings-with-aws-lambda-for-data-integration-2020-b048021175e3?source=collection_archive---------38-----------------------#2020-03-17">https://towardsdatascience.com/amazing-cost-savings-with-aws-lambda-for-data-integration-2020-b048021175e3?source=collection_archive---------38-----------------------#2020-03-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0b64f3b96669cfc2a9e49ff0b4e62e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UbCrgxCF2BCzTg3cQblihg.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="cc4c" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">AWS上基于服务器和无服务器数据集成中心的成本比较</h2></div><h1 id="8f05" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">介绍</h1><p id="069e" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">数据集成是一项关键的IT功能，专注于向企业提供高质量的标准化数据，从而使分析、机器学习和人工智能计划能够增加商业价值。以下是一些推荐的读物(以防你需要):</p><p id="7ce6" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">1) <a class="ae mm" href="https://medium.com/@gvaidyanatha/serverless-data-integration-part-i-2019-b3b3b3bc332a" rel="noopener">无服务器数据集成—第一部分(2019) </a></p><p id="ce05" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">2) <a class="ae mm" href="https://medium.com/@gvaidyanatha/serverless-data-integration-part-ii-2019-fb55d180feb" rel="noopener">无服务器数据集成—第二部分(2019) </a></p><p id="cf14" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">3) <a class="ae mm" href="https://medium.com/@gvaidyanatha/architecting-serverless-data-integration-hubs-on-aws-for-enterprise-data-delivery-2022-6eba5edf93a0" rel="noopener">在AWS上为企业数据交付构建无服务器数据集成中心(2022) </a></p><p id="313e" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">云计算的主要价值主张之一是最大限度地降低资本成本，并代之以运营成本。虽然对于处于云之旅早期的组织来说，这是一个很好的起点，但从长远来看，控制运营成本的需求非常重要。这就是无服务器计算在适当的工作负载中发挥巨大作用的地方，尤其是在运行数据集成中心时。</p><p id="9170" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">影响云中计算系统成本的因素有多个方面。最突出的是CPU、内存、存储、网络、数据传输(入口和出口)和API调用。在本文中，我将重点关注<strong class="ln jf">计算</strong>方面(CPU &amp;内存)。对于给定的工作负载，这使得AWS <em class="mn"> EC2 </em>(基于服务器)和AWS <em class="mn"> Lambda </em>(无服务器)之间能够进行良好的比较。在两种模型中，其他成本成分被假定为相等。一个例外是<em class="mn"> EC2管理成本</em>(运营成本)。这与<em class="mn"> Lambda </em>无关，并为可以在无服务器模式上运行的工作负载创造了巨大的成本优化机会。</p><h1 id="3791" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">等效日成本(EDC)</h1><p id="9c8b" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">在金融界，术语<em class="mn">等价年成本(EAC) </em>用于确定在资产生命周期内拥有、运营和维护资产的年成本，同时比较具有不同成本特征的资产。我简化了这个概念，引入了术语<strong class="ln jf"> <em class="mn">等价日成本</em></strong><em class="mn">(</em><strong class="ln jf"><em class="mn"/></strong><em class="mn">)</em>，来比较<em class="mn"> EC2 </em>和<em class="mn"> Lambda </em>的日成本。这是我的定义</p><p id="1d2e" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><em class="mn">等效每日成本(EDC) </em> <em class="mn">是给定EC2实例的派生每日成本，相当于24小时时间间隔内“n”次Lambda调用的成本。</em></p><h1 id="d67a" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">作案手法</h1><h2 id="fd25" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">选择EC2实例族</h2><p id="9bad" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">AWS <em class="mn"> EC2 </em>实例有多种形状和大小。对于我们的成本计算工作，我选择了'<em class="mn">通用M5级</em>'实例系列，并挑选了4个配置作为运行中心的潜在候选配置(图1):</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/479c9ceac9d85bf42e4ae261f14a65d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9X_r8JrezeugN7ZXlRdUg.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图1: m-class实例系列配置详细信息</p></figure><h2 id="ca52" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">选择AWS定价模式</h2><p id="8374" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">为了确保<em class="mn"> EC2 </em>价格点的公平和多样化，选择了3种不同的定价模式。分别是— 3年期全提前预留(<strong class="ln jf"> 3YAUR </strong>)、1年期全提前可转换(<strong class="ln jf"> 1YAUC </strong>)和按需(<strong class="ln jf">按需</strong>)。每种定价模式的简介:</p><p id="76d5" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><strong class="ln jf"> 3YAUR </strong>是最便宜的定价模式，但需要预付3年的费用。人们必须预订这些实例，并为服务“预先支付”，以换取最高的折扣。这种定价模式没有灵活性。</p><p id="d0bd" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><strong class="ln jf"> 1YAUC </strong>的折扣百分比比3YAUR小，但提供了更大的运营灵活性。它允许在一年的时间内改变机器的配置。预付一年的服务费用。修改配置时，会进行所需的价格调整。</p><p id="1f8d" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><strong class="ln jf">按需</strong>是最昂贵也是最灵活的定价模式。它真正允许人们随意供应和取消供应EC2实例。尽管没有预先确定的时间段或前期成本，但与3YAUR &amp; 1YAUC相比，此定价模式的总成本(在规定的时间段内)是最高的。这种定价模式的成本和灵活性选项与<em class="mn"> Lambda </em>不相上下。</p><h1 id="c96b" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">定义工作负载和Lambda概要文件</h1><p id="742b" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">正在讨论的工作负载是一个双线程CPU密集型Python程序，它为中心处理入站数据。它的运行时间是5分钟(300秒)。在无服务器模型部署中，<em class="mn">λ</em>配置有<strong class="ln jf"> <em class="mn"> 3 GB内存</em> </strong>，因此导致为调用期间提供的微容器分配了<strong class="ln jf"> <em class="mn"> 2个vcpu</em></strong>。</p><h2 id="a285" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">计算EC2的每日计算最大值</h2><p id="64be" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">在我们计算EC2实例的EDC并将其与<em class="mn">λ</em>进行比较之前，我们首先需要计算<em class="mn"> EC2的</em>最大每日计算能力。例如，一个<strong class="ln jf"><em class="mn">m 5.4x large</em></strong>Linux<em class="mn">EC2</em>实例，配置有<strong class="ln jf"> <em class="mn"> 16个vcpu</em></strong>和<strong class="ln jf"> <em class="mn"> 64个GiB </em> </strong>内存，运行我们之前定义的工作负载，具有以下计算<strong class="ln jf">最大值</strong>:</p><ol class=""><li id="77ad" class="nj nk je ln b lo mh lr mi lu nl ly nm mc nn mg no np nq nr bi translated">并发执行=<strong class="ln jf">8(16<em class="mn">vcpu</em>/2)</strong></li><li id="2142" class="nj nk je ln b lo ns lr nt lu nu ly nv mc nw mg no np nq nr bi translated">执行数/小时= <strong class="ln jf"> 96 </strong> (( <strong class="ln jf"> 60分钟/5分钟</strong> ) <strong class="ln jf"> x 8 </strong>)</li><li id="1a2a" class="nj nk je ln b lo ns lr nt lu nu ly nv mc nw mg no np nq nr bi translated">执行数/天=<strong class="ln jf">2304</strong>(<strong class="ln jf">96 x 24</strong>)</li></ol><p id="6572" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">表1计算并列出了所有4个实例的每日计算最大值(使用图1中的# vCPUs列):</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/0df540321e6602652eab33b5e2b97ebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWQN_wyCHeGO2NDsVeSNGw.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表1:按m系列配置计算的每日计算最大值</p></figure><p id="4b7d" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">表1中的每个计算的<em class="mn">计算最大值</em>，允许我们比较4个不同定价模型(包括<em class="mn"> Lambda的</em>)的日常成本，针对每个<em class="mn"> EC2 </em>配置。</p><p id="d5ab" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">在接下来的章节中，我们将使用<strong class="ln jf"> <em class="mn"> m5.4xlarge </em> </strong>作为等价成本计算的示例。有了<strong class="ln jf">2304</strong>可能在<strong class="ln jf"> <em class="mn"> m5.4xlarge </em> </strong>上的每日计算最大值，我们现在计算<em class="mn">对<em class="mn">λ</em>的计算等效性</em>。</p><h2 id="c4b9" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">计算Lambda的成本(调用成本)</h2><p id="4ebf" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated"><a class="ae mm" href="https://calculator.aws/#/" rel="noopener ugc nofollow" target="_blank"> AWS定价计算器</a>，显示<strong class="ln jf"> $34.56 </strong>，针对<strong class="ln jf">m 5.4x large配置的</strong>2304<em class="mn">Lambda</em>调用。因此，每次调用的成本是<strong class="ln jf"> $0.015 </strong>。供您参考，我们工作负载的“空闲层”计算为每月<strong class="ln jf"> 444 </strong>次调用，价值为<strong class="ln jf"> $6.66 </strong>。</p><p id="8291" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">在此成本计算练习中执行的所有计算都是“无自由层”。这是为了保持准确(精确)的等值计算。图2详细说明了我们如何得出<strong class="ln jf"> $34.56 </strong>:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ny"><img src="../Images/8eeb3c10be772c26ed7574a7c8657e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*38avuM6omclzWt8GDJ8KcA.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图2: AWS价格计算器— Lambda调用成本</p></figure><p id="0489" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">使用<a class="ae mm" href="https://calculator.s3.amazonaws.com/index.html" rel="noopener ugc nofollow" target="_blank"> AWS简单月度计算器</a>完成<em class="mn"> EC2 </em>年度成本计算。<em class="mn"> EC2日成本</em> = <em class="mn"> EC年成本/365 </em>。对于一个<em class="mn"> m5.4xlarge </em>实例，表2列出了所有3个<em class="mn"> EC2 </em>定价模型的每日成本及其在<strong class="ln jf"> 2，304次</strong>调用时的<em class="mn"> Lambda </em>成本当量(LAMBDA-E )(来自图2)。</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/5df61a9eb1bb6d8df51290b3cd79d9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfyYqLcLopIZoe1r_JtHZQ.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表2:定价模型的Lambda等效性—m5.4x大型</p></figure><h1 id="f52f" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">EC2与Lambda的比较——成本和调用(一)</h1><h2 id="415d" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">等效日成本— EC2与Lambda (I)</h2><p id="6b7c" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">通过计算出的<em class="mn"> EDC </em>，我们可视化了所有4个选择的实例和4个不同定价模型的数据，在图3中等同于它们各自的每日最大值。<em class="mn"> Lambda </em>在所有选择的配置和定价模式中是最贵的。坚持住，这个故事还有更多内容:)</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/fa363ac3c2de07427d9279f626663123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdkSbJgJwTaXoIqTDVCx5w.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图3:按定价模型划分的等效每日成本— EC2与Lambda — m5级实例系列(I)</p></figure><h2 id="1d6b" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">LAMBDA调用可能(LIP)</h2><p id="afbc" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">有了所有3种EC2定价模式的每日成本，我们使用所有3种价格来计算一辆<em class="mn"> m5.4xlarge </em>的<em class="mn"> Lambda </em>调用的可能性(<strong class="ln jf"> LIP </strong>)。LIP是一个重要的指标，因为它提供了在给定成本基础上可以进行多少计算的精确数字。这在表3中列出:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ob"><img src="../Images/25372120f6d8c1eac7fc8e5e377f60cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOxGBko5jz7ZWlF4n2JGZg.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表3:定价模型可能的Lambda调用— m5.4xlarge</p></figure><p id="127b" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">表3显示了相应的LIP编号及其各自的成本。我们的Python工作负载和<em class="mn"> Lambda </em>配置文件允许我们在<strong class="ln jf"> $7.07 </strong>调用<strong class="ln jf"> 471 </strong> <em class="mn"> Lambda </em>。这是我们在计算成本时需要重点关注的一个重要概念。</p><h2 id="6bf7" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">等效的每日调用— EC2与Lambda (I)</h2><p id="a341" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">表3中导出的LIP数允许我们开始使用调用来比较成本。图4显示了所有4个选择的<em class="mn"> EC2 </em>实例和4个不同的定价模型。图4中出现了一个有趣的现象。</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/794c09f1f5c8eb6f58c4b74e6d30be7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcfB0pNvSLO1oNYtXlIEgw.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图4:定价模型可能的日常调用— m5级实例系列(I)</p></figure><p id="4b13" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">考虑一下按需定价的m5.4xlarge的情况Python工作负载需要在一天内至少被调用<em class="mn">1232</em>次(成本—<em class="mn">$ 18.48/天</em>)才具有成本效益。</p><p id="a8d9" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">如果<em class="mn">1232</em>个程序没有在24小时内执行，我们可以有把握地得出结论——<em class="mn">系统空闲时间</em>。回想一下，数据集成中心的本质是处理活动的爆发，然后是“空闲/安静时间”。支付<em class="mn"> 1，232 </em>个可能的调用而不利用所有的计算能力，会导致浪费开支。这为运营成本优化创造了机会。</p><p id="6070" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">有了<em class="mn"> Lambda </em>，人们只需为准确的调用次数付费。空闲时间是没有成本的。这是<em class="mn"> Lambda的</em>固有特性，并为我们下一个讨论主题<em class="mn">运营成本</em>提供了一个很好的切入点。</p><p id="8f73" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><em class="mn">注意:示例LIP值2，304是m5.4xlarge计算能力的每日最大Lambda调用量(LIP)。这不是Lambda上的实际调用次数，而是用来衡量成本的标准。</em></p><h2 id="fa8e" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">EC2的温柔呵护(TLC)</h2><p id="9b2e" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">EC2 实例需要定期管理以进行护理和维护。这需要作为这些基于服务器的系统的运营成本考虑在内。这些成本与无服务器领域无关(纯粹从计算角度来看)。以下是数据集成中心环境下<em class="mn"> EC2 </em>的常规运营成本列表:</p><p id="c5d4" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">1)高可用性和灾难恢复配置所需的额外<em class="mn"> EC2 </em>实例(每个高可用性(HA) &amp;灾难恢复(DR)配置至少需要<em class="mn"> 3个EC2 </em>实例)</p><p id="bf23" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">2) <em class="mn">弹性负载平衡器(ELB) </em>满足自动扩展和故障转移的需求</p><p id="20e5" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">3)管理任务—安装、修补和升级操作系统、Route53、SSL/TLS证书管理器、CloudWatch、备份、资源标签等</p><p id="7f1b" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">4)与<em class="mn"> EC2 </em>管理相关的人员成本(工资、税收、福利)</p><p id="8ce5" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">使用<em class="mn">λ</em>，1–4不会产生‘额外成本’。1–4 it中的一些甚至与<em class="mn"> Lambda </em>无关，因为其成本纯粹与计算相关。它本身支持HA &amp; DR，不需要自动扩展，也不需要任何操作系统安装/修补/升级。表4是三种定价模式下<em class="mn"> m5.4xlarge </em>的日常<em class="mn"> EC2 </em>运营成本的示例汇总，其中人员成本为<strong class="ln jf"><em class="mn">【90.42美元/小时</em> </strong>。</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oc"><img src="../Images/d47e0e07d1b74f2fddd56948a25e5fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gL0uPN0JUs4FmSJWYuGxGg.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表4:定价模型的日常运营成本</p></figure><p id="f711" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated"><em class="mn">注意:AWS简单计算器用于EC2 &amp; ELB定价。每小时90.42美元的人员成本是从AWS解决方案架构师的平均市场工资(140，000美元)开始计算的，其中还添加了工资税(TX)和福利成本。工资税计算在</em><strong class="ln jf"><em class="mn">【tsheets.com】</em></strong><em class="mn">进行，福利费用从</em> <strong class="ln jf"> <em class="mn"> 2018劳动统计局</em> </strong> <em class="mn">取得。</em></p><h1 id="f523" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">EC2与Lambda的比较——成本和调用(二)</h1><h2 id="458e" class="mo ku je bd kv mp mq dn kz mr ms dp ld lu mt mu lf ly mv mw lh mc mx my lj mz bi translated">等效每日成本/每日调用— EC2与Lambda (II)</h2><p id="473b" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">考虑到<strong class="ln jf">$ 77.69/天</strong>的额外运营成本，每日成本和每日调用图表讲述了一个不同的故事。使用<em class="mn"> Lambda </em>成本计算工具，我们得到了<strong class="ln jf"> $77.69 </strong>的<strong class="ln jf">5179</strong>调用的额外LIP。修改后的图表如下图5和图6所示:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oa"><img src="../Images/53d317d7c22fedbafbd715ea04383bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCXORjH2ClwmwIUbN44QsQ.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图5:定价模型的等效日常成本— EC2与Lambda — m5级实例系列(II)</p></figure><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/5bffd8f86288d7f3b81a4be753d576b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vLciMpdKn0wfmSpiJAdJiw.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">图6:定价模型可能的日常调用——m-class实例系列(II)</p></figure><h1 id="12c9" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">通过AWS Lambda(无服务器计算)节省成本</h1><p id="5730" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">在增加运营成本后，关于<em class="mn"> Lambda的</em>成本效益出现了以下见解:</p><ol class=""><li id="5f01" class="nj nk je ln b lo mh lr mi lu nl ly nm mc nn mg no np nq nr bi translated"><em class="mn"> Lambda </em>与<em class="mn"> m5.4xlarge </em>和<em class="mn"> m5.8xlarge </em>配置相比，在所有选择的定价模式中均以显著优势胜出。表5列出了Lambda相对于<em class="mn"> m5.4xlarge </em>的胜出幅度(便宜%):</li></ol><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/e836a2bb7c7660af07fe93d9fc3475a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qX1xmUa1z5o-2LPmVmupLw.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表m5.4xlarge的每日成本利润</p></figure><p id="8d6a" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">2.在图6中，<em class="mn"> m5.4xlarge </em>的计算当量(2，304，虚线)和实际值之间的唇差被标记为“成本优化机会”。这是不会改变计算能力的额外运营成本。其他配置也存在类似的差异。</p><p id="b8fe" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">3.<em class="mn"> Lambda </em>在所有4种EC2配置中胜出。从成本和灵活性的角度来看，<em class="mn"> EC2的</em>按需定价是与<em class="mn"> Lambda </em>最接近的可比较选项。</p><p id="6134" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">4.<em class="mn">与按需配置相比，Lambda的</em>在较小配置下赢得的利润要大得多。表6提供了中奖号码:</p><figure class="nb nc nd ne gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oe"><img src="../Images/623d69b621d89f9498fd4634cbac7df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqIIGF4GmDM-WIRLv4_CeA.jpeg"/></div></div><p class="nf ng gj gh gi nh ni bd b be z dk translated">表6:按需的每日成本胜利利润— m5级实例系列</p></figure><p id="dea7" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">5.对于<em class="mn"> m5.12xlarge </em>配置，<em class="mn"> Lambda </em>仅以<strong class="ln jf">5.77美元/天</strong>的差距输给了3YAUR。</p><p id="24ed" class="pw-post-body-paragraph ll lm je ln b lo mh kf lq lr mi ki lt lu mj lw lx ly mk ma mb mc ml me mf mg im bi translated">6.对于<em class="mn"> m5.16xlarge ( </em>我们最大的<em class="mn"> </em>配置)<em class="mn"> Lambda </em>分别以<strong class="ln jf">32.25美元</strong>和<strong class="ln jf">9.99美元</strong>的差距输给了3YAUR &amp; 1YAUC。换句话说，<em class="mn"> EC2 </em>只在最大配置上以<strong class="ln jf"> 130% </strong>的优势和以<strong class="ln jf"> 108% </strong>的优势稳操胜券。</p><h1 id="3b84" class="kt ku je bd kv kw kx ky kz la lb lc ld kk le kl lf kn lg ko lh kq li kr lj lk bi translated">结论</h1><p id="f450" class="pw-post-body-paragraph ll lm je ln b lo lp kf lq lr ls ki lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">在我们的成本核算练习中，采用了一种<em class="mn"> 64-vCPU </em>机器配置，一种<strong class="ln jf"> <em class="mn"> 3年期全部预付保留(3YAUR) </em> </strong>或<strong class="ln jf"> <em class="mn"> 1年期全部预付可兑换(1YAUC) </em> </strong>定价选项，以令人信服地击败<em class="mn"> Lambda </em>。鉴于<em class="mn"> Lambda的</em>与<em class="mn"> EC2的</em>最接近的对等物是<strong class="ln jf">按需</strong>定价模型，这确实令人惊讶。<em class="mn"> Lambda </em>在所有采用<strong class="ln jf">按需定价</strong>的配置中明显胜出。因此，这种等效的日常成本计算练习提供了必要的上下文和数字细节，说明<em class="mn"> AWS Lambda </em>如何使数据集成的运营成本最小化。<em class="mn"> Go无服务器宝贝</em>！</p></div></div>    
</body>
</html>