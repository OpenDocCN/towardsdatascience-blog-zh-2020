<html>
<head>
<title>Animate Data Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 制作数据动画</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/animate-data-using-python-dd558e9103d?source=collection_archive---------23-----------------------#2020-08-18">https://towardsdatascience.com/animate-data-using-python-dd558e9103d?source=collection_archive---------23-----------------------#2020-08-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a1dd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">仅使用 MatPlotLib 查看实时数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/38434e10bd6e6ad146fbdbf6111d68bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bD4kXBrdkRFs-1_09qRTsg.png"/></div></div></figure><p id="c481" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本指南的目标是向您展示如何实时更新图表。这可以用于各种应用，如可视化来自传感器的实时数据或跟踪股票价格。</p><p id="7c33" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本教程中，数据将是静态的，但可以很容易地用于动态数据。当然，您需要在本地机器或虚拟环境中安装<strong class="kw iu"> MatPlotlib </strong>和<strong class="kw iu"> Pandas </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/5bc32fe3a35e7a328df5fb4baa264c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hje0co_4WZ-VzsIe"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">照片由<a class="ae lv" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·切瑟</a>在<a class="ae lv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/509bd10336763915c8a5342a42635027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w5Jux5l0MGBlCVhxzc4Czw.png"/></div></div></figure><h2 id="3c23" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">进口</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="466b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> FuncAnimation </strong>是我们将用来持续更新图形的方法，为其提供实时效果。</p><p id="2447" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将在本教程中使用<strong class="kw iu"> MatPlotLib </strong>来生成我们的图形，并使用<strong class="kw iu"> panda 的</strong>库来读取 CSV 文件。</p><h2 id="530e" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">初始化子情节</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="0f84" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将创建一个支线剧情，使我们更容易一遍又一遍地利用同一个情节。</p><h2 id="582a" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">创建动画方法</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="1e16" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe ms mt mu mv b">animation(i)</code>方法是我们将用来一遍又一遍地画线的方法。这个方法会被 MatPlotLib 库中的<code class="fe ms mt mu mv b">FuncAnimation</code>方法反复调用，直到你决定终止程序。</p><p id="42eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个例子中，我将使用一个从互联网上下载的静态文件。该文件为我们提供了苹果公司 2014 年的股价。</p><p id="756d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是我们的虚拟数据的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/2f3c78257fb599c7902648b1d2cbb43c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X35lwINrD89I24-5su5MKg.png"/></div></div></figure><p id="acdf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，为了模拟实时数据，而不是一次性绘制整个图表，我将绘制每一行。这给了我们虚幻的真实数据。</p><p id="165d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">记住<code class="fe ms mt mu mv b">animation(i)</code>函数将在每次迭代 时被<strong class="kw iu"> <em class="mx">调用。每调用一次<code class="fe ms mt mu mv b">i</code>就加一。这一行，<code class="fe ms mt mu mv b">AAPL_STOCK[0:i]['AAPL_x']</code>，将返回对应于我们正在进行的迭代的行。</em></strong></p><p id="a552" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，在迭代 1 中，我们将返回数据集中的第一行。在第 n 次迭代中，我们将返回数据集中的第 n 行(及其之前的所有行)。</p><p id="81b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要绘制到图形的线，我们只需要调用<code class="fe ms mt mu mv b">ax.plot(x,y)</code>。我们也调用<code class="fe ms mt mu mv b">ax.clear()</code>来清除之前生成的行。我们这样做是为了在每次迭代后不要在彼此上面画线。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/ab56523af50e56923cbd954005beb644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BJXV2o4g8hLi16vbBIv88g.png"/></div></div></figure><h2 id="ed24" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">为什么在循环中导入数据集？</h2><p id="c258" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">您可能已经注意到，我们在循环中读取 CSV。我们需要这样做的原因是，如果新数据被添加到 CSV 中，我们可以读取它并将其绘制到我们的图表中。</p><h2 id="2821" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">如果我想使用文本文件呢？</h2><p id="aa0e" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">如果你使用一个文本文件，你可以在每次迭代中给 x 和 y 追加值。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="5cb3" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">运行动画</h2><p id="af19" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">要运行动画，我们只需要使用下面的。</p><pre class="kj kk kl km gt ne mv nf ng aw nh bi"><span id="7291" class="lx ly it mv b gy ni nj l nk nl">animation = FuncAnimation(fig, func=animation, interval=1000)</span><span id="28ae" class="lx ly it mv b gy nm nj l nk nl">plt.show()</span></pre><p id="b34f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里,`<strong class="kw iu"> FuncAnimation </strong>`将连续运行我们的动画程序。<code class="fe ms mt mu mv b"><strong class="kw iu">interval</strong></code>用于确定更新之间的延迟。目前，它被设置为<strong class="kw iu"> 1000 毫秒</strong>，但它可以根据你的需要或快或慢。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/b55cb26c54480b261ecddeddec598c70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ixvSR3anJdMdziGm4oeC2g.png"/></div></div></figure><p id="e9e1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">这里是所有的代码:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/7527d8db0b1eabe5bc6e290e999100de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pwPEXwnuXMq8kSGoTBhoMA.gif"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">截屏由作者拍摄</p></figure><h2 id="415b" class="lx ly it bd lz ma mb dn mc md me dp mf ld mg mh mi lh mj mk ml ll mm mn mo mp bi translated">当新的价值加入其中时，它真的能工作吗？</h2><p id="43c2" class="pw-post-body-paragraph ku kv it kw b kx mz ju kz la na jx lc ld nb lf lg lh nc lj lk ll nd ln lo lp im bi translated">因此，在这里，我只是从我们上面使用的 CSV 中删除了一些数据。</p><p id="979a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，一旦图形更新到数据集的末尾，我就复制一些新数据并保存文件。然后，该图表用我刚刚添加的所有新数据进行了更新。在这种情况下，它更新得相当快，但只是因为间隔时间被设置为<strong class="kw iu">100 毫秒</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/bdc6e6a6b1ef8741078e3c08e0b9d986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C6J3rr_XIqetv43PMtVlpg.gif"/></div></div><p class="lr ls gj gh gi lt lu bd b be z dk translated">截屏由作者拍摄</p></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/7cc0bdd9f1f128ec1d45ad29ebd8558f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Tkhb32WDQazeQtcq2ZLYQ.png"/></div></div></figure><p id="b92f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你喜欢这个指南，你可以<strong class="kw iu">看看下面写的其他一些很酷的文章</strong>！如果你有任何问题，请留下你的评论，我会尽力帮助你。</p><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/this-story-was-completely-written-by-an-ai-cb31ee22feae"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">这个故事完全是由一个人工智能写的</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">Grover 可以产生假新闻的人工智能模型</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oe l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a rel="noopener follow" target="_blank" href="/data-visualization-animate-bar-graphs-df9ca03a09f2"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">数据可视化:动画条形图！</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">Excel 和 After Effects 中的数据可视化和动画</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">towardsdatascience.com</p></div></div><div class="od l"><div class="oj l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://medium.com/in-fitness-and-in-health/this-advice-could-save-millions-of-people-6e318db330ad" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">这个建议可以拯救数百万人</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">降低你的胆固醇，这简直是要了你的命</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="ok l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://medium.com/2-minute-madness/scientific-evidence-what-writers-ought-to-know-724eb7145e09" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">科学证据:作者应该知道什么</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">并非所有的证据都是平等的。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="ol l of og oh od oi ks nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://medium.com/workhouse/innovation-is-thriving-during-the-pandemic-531fe6975a61" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd iu gy z fp nz fr fs oa fu fw is bi translated">疫情期间，创新蓬勃发展</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">科技如何帮助人类对付致命的疫情病毒。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="om l of og oh od oi ks nu"/></div></div></a></div></div></div>    
</body>
</html>