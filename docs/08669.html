<html>
<head>
<title>Maximizing Profit Using Linear Programming in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python中的线性规划实现利润最大化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/maximizing-profit-using-linear-programming-in-python-642520c43f6?source=collection_archive---------8-----------------------#2020-06-23">https://towardsdatascience.com/maximizing-profit-using-linear-programming-in-python-642520c43f6?source=collection_archive---------8-----------------------#2020-06-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a476f4072220ca7713c1b6eb04395a1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zVN5tTMwxipbwaOejIpv8w.jpeg"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://www.freepik.com/mindandi" rel="noopener ugc nofollow" target="_blank">明丹迪</a>在<a class="ae jg" href="https://www.freepik.com/premium-photo/carpenter-working-with-equipment-wooden-table-carpentry-shop_5143131.htm" rel="noopener ugc nofollow" target="_blank"> FreePik </a>上的照片</p></figure><h2 id="ceb4" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">学习如何解决最大化线性规划问题</h2><div class=""/><div class=""><h2 id="764a" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">线性规划(LP)和单纯形算法已经存在了几十年。早在40年代，它就被美国空军首次引入，用于帮助制定战略计划。从那时起，许多行业都在利用它来最大化利润和最小化成本，等等。</h2></div><p id="446c" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="md">单纯形法</em>是为了帮助解决lp问题而设计的，它基本上就是我们将在这里看到的。随着技术领域的进步，这种方法开始被使用，不仅在军事上，而且在无数的行业。今天，我将向大家展示一个我们如何利用这种算法的例子。我将介绍以下内容:</p><p id="5d0b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">1-线性规划的基本概念</p><p id="57f6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">2-如何制定一个线性规划问题</p><p id="a742" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">3-如何使用Python求解线性规划</p><p id="c895" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">4-用图解的方式看LP问题</p><h1 id="a582" class="me mf jj bd mg mh mi mj mk ml mm mn mo ky mp kz mq lb mr lc ms le mt lf mu mv bi translated">基本概念</h1><p id="de0c" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">线性规划和<em class="md">线性不等式</em>齐头并进。也就是说，许多现实生活中的问题都受到一些限制，例如生产一把椅子的原材料数量。换句话说，有些限制阻止我们在不影响其他产品生产的情况下生产一种产品。</p><p id="68af" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">例如，假设你需要木材来制作椅子和桌子，那么你可用的木材数量就限制了你能生产的椅子和桌子的数量。</p><p id="5b6b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本质上，这正是LP试图解决的问题:如何系统地分配资源，以便从我们所拥有的限制(<em class="md">约束</em>)中获得最大收益，同时考虑，例如，你从他们的销售中获得的利润的潜在<em class="md">最大化</em>。关于这一点，我们可以使用LP来最大化利润，或者最小化成本。有趣的是，我们可以将最大化问题转化为最小化问题，反之亦然。但这不会是这里的重点。</p><p id="3b62" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在LP中，当我说“解决”时，并不意味着我们会一直找到解决方案(比如2 + 2 = 4)。我们可以公式化一个LP问题，做一些数学计算，并得出结论，特定的LP问题没有最优解，这是解决LP的主要目标:试图获得唯一的最优解。这可能是因为一些问题可能有太多不同的<em class="md">最优解</em>或者甚至根本没有<em class="md">最优解</em>。</p><p id="67f5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可能遇到没有<em class="md">最优解</em>的LP的一些原因可能超出了我们的控制。在许多情况下，问题太复杂而无法解决(找到唯一的<em class="md">最优解</em>)。在解决LP问题时，我们可能想问自己一个问题:问题<em class="md">可行</em>还是<em class="md">不可行</em>？有些问题甚至可以有很多<em class="md">可行</em>解，最后被<em class="md">无界</em>。总结一下，我们可以把一个LP问题分为三类:<em class="md">最优解</em>、<em class="md">不可行</em>、<em class="md">无界</em>。</p><p id="b6fa" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这里，你将看到一个LP问题的例子，它给了我们一个<em class="md">最优解</em>。但是在我们开始解决问题之前，我想给你看一个传统LP问题的例子:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nb"><img src="../Images/bb48e63acbe73f2d31bc5d8544e2453a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGsnxlK9dZRMQ9tfBgV06Q.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">摘自《线性规划》一书(Chvatal 1983)</p></figure><p id="e002" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第一行写着“<em class="md">最大化</em>，这就是我们的<strong class="lj jt"> <em class="md">目标函数</em> </strong>所在的位置。这也可以说“<em class="md">最小化</em>”，这将表明我们的问题是一个<em class="md">最小化</em>问题。</p><p id="96d5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">第二行和第三行是我们的<strong class="lj jt"> <em class="md">约束。</em> </strong> <em class="md">这是</em>基本上是什么阻止我们，让我们说，最大化我们的利润到无限。就像我已经提到的，这是我们可以发现<em class="md">线性不等式</em> (≤、=、≥)的部分。我还必须透露，有不同的方法来解决一个线性规划问题，例如，BigM，对偶，两阶段的方法等。</p><p id="4b65" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">不幸的是，试图在这里涵盖LP的所有细节是适得其反的，我希望您已经掌握了一些基础知识，可以继续学习我们的示例。如果没有，我会在这篇文章的末尾删除一些参考资料，这样你就可以参考了。</p><blockquote class="ng nh ni"><p id="4e6c" class="lh li md lj b lk ll kt lm ln lo kw lp nj lr ls lt nk lv lw lx nl lz ma mb mc im bi translated">false优化是现代研究对决策过程的革命性贡献——乔治·丹齐格</p></blockquote><h1 id="52a8" class="me mf jj bd mg mh mi mj mk ml mm mn mo ky mp kz mq lb mr lc ms le mt lf mu mv bi translated"><strong class="ak">问题</strong></h1><p id="a900" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">假设我们在一家制造公司的数据科学团队工作。我们在这里要解决的问题被命名为“活动分析问题”(Gass 1970)。数据科学团队的目标是<em class="md">通过定义生产多少种不同的产品，并考虑到可用资源的有限性，来最大化</em>制造公司的利润。通过改善公司的运营和资源配置，我们有可能最大化利润，这是我们这里讨论的焦点。</p><p id="9cdd" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">公司生产四种家具:<strong class="lj jt">椅子</strong>、<strong class="lj jt">桌子</strong>、<strong class="lj jt">书桌</strong>和<strong class="lj jt">书柜</strong>。主要成分是红木，但他们也使用胶水，皮革，玻璃和工时。例如，当我们看到一把椅子时，制作一把椅子真正需要的是5板英尺的红木，10个工时的劳动，3盎司的胶水和4平方英尺的皮革。生产一张桌子，我们需要20英尺木板，15个工时，8盎司胶水。一张桌子由15板英尺、25工时、15盎司胶水和20平方英尺皮革制成。最后，书柜是用22英尺木板、20个工时、10盎司胶水和20平方英尺玻璃制成的。</p><p id="5eeb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">以下是制作一把单人椅子所需材料的示例:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nm"><img src="../Images/11368adcff7ad7a433eb1d31be637d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pf4w0gdueMfHuKUqNc_azA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="0780" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">瓶颈是所有这些材料每周的可用总量如下:</p><p id="5cc0" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt"> - </strong>两万板英尺的红木</p><p id="140b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">-</strong>4000工时</p><p id="c707" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">-</strong>2000盎司胶水</p><p id="2c7b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt">-</strong>3000平方英尺的皮革</p><p id="440e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt"> - </strong> 500平方英尺的玻璃</p><p id="3d19" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">正如你所看到的，有限数量的材料使我们无法同时生产无限数量的产品。也就是说，我们的工作是决定如何更好地分配这些资源，以获得最大利润。这是一个如何开发数据驱动的决策流程的练习。</p><p id="05fa" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是为了建立这个问题，我们需要知道每个产品给公司带来的利润。提示:这就是我们想要的<em class="md">最大化</em>。</p><p id="b6bb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">他们在这里:</p><p id="e26a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt"> - </strong>:每把椅子45美元</p><p id="0bee" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt"> - </strong>:每桌80美元</p><p id="6259" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jt"> - </strong>:每张桌子110美元</p><p id="ef63" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">每个书架55美元</p><p id="4551" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">等等！人们可能决定只生产桌子，因为仅这一项就有最高的利润(110美元)。但是，为什么我们不应该接受这种方法呢？我会留给你答案。</p><p id="cf72" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">由于我们想生产所有这四种产品，并向我们的客户提供良好的产品组合，同时分担风险，我们真正想知道的是，为了获得最大利润，每种产品我们必须生产多少单位。这就是LP建模可以帮助我们解决这个问题的地方。</p><h1 id="ac9a" class="me mf jj bd mg mh mi mj mk ml mm mn mo ky mp kz mq lb mr lc ms le mt lf mu mv bi translated">公式化线性规划问题</h1><p id="6256" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">对于这个M <em class="md">最大化</em> LP问题，我们将用项目名称的第一个字母来表示项目。同样，<strong class="lj jt"> <em class="md"> c </em> </strong>为椅子，<strong class="lj jt"> <em class="md"> t </em> </strong> <em class="md"> </em>为桌子，<strong class="lj jt"> <em class="md"> d </em> </strong>为书桌，<strong class="lj jt"> <em class="md"> b </em> </strong>为书柜。</p><p id="9467" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">就像我们在前面的例子中生产一把椅子需要什么一样，我们将对所有其他项目遵循类似的模式。下面我们可以看到制作每一个产品所需的资源量。请注意，制造这些产品的总量必须是可用资源总量的<em class="md">减</em>或<em class="md">等于</em>。</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/b20bec82a09b0aff300b8f1cc92768c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99uaZJRlPqInoFHKkckl3g.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="620e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请慢慢阅读这个模式。我只是把制造我们四种产品中每一种产品的数据放在一起，加上<em class="md">约束</em>，这是可用的资源(最后一栏)。</p><p id="7915" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，为了以一种更传统的方式来制定我们的LP，我们所要做的就是带来项目的利润(目标函数<em class="md"/>)。下面是这个LP问题的最终表述:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi no"><img src="../Images/6dbc9b23e6a2414c4bc23ff997d567d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5v_ROV1DPL3hKPkvYqz-9A.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="7720" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们做到了。恭喜你！拍拍你自己的背，因为通常，公式化一个LP问题是这个过程中最难的部分。记住“垃圾进，垃圾出”，所以一个LP如果制定不当，是不会带来多大价值的。</p><p id="72cc" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">既然我们已经将问题公式化了，我们将使用Python，更具体地说，使用名为PuLP的库来解决这个LP。没有进一步的原因，让我们做那件事。</p><blockquote class="ng nh ni"><p id="877b" class="lh li md lj b lk ll kt lm ln lo kw lp nj lr ls lt nk lv lw lx nl lz ma mb mc im bi translated">线性规划是线性代数的推广。它能够处理<strong class="lj jt">各种问题</strong>，从为航空公司或影院中的电影寻找时间表到从加油站向市场配送石油。如此多才多艺的原因是约束可以很容易地被结合到模型中——史蒂文·j·米勒</p></blockquote><h1 id="b9c8" class="me mf jj bd mg mh mi mj mk ml mm mn mo ky mp kz mq lb mr lc ms le mt lf mu mv bi translated">使用Python(纸浆库)求解线性规划</h1><p id="254a" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">关于如何在Anaconda上安装纸浆的说明可以在<a class="ae jg" href="https://anaconda.org/conda-forge/pulp" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="284d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因为这是一个简单的例子，而且我们没有处理很多变量、约束等，我们不会使用任何文件(比如<em class="md"> csv </em>文件)并将其导入Python，我们只是输入这几个变量。我们也可以创建一个Python程序来请求用户以一种更高层次和更有组织的方式来做这件事，但是我会把这留给你。</p><p id="8c8a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我将把这个部分分成两部分:第一部分我们将使用PuLP在Python中解决这个问题，第二部分我们将解决它。</p><h2 id="8980" class="np mf jj bd mg nq nr dn mk ns nt dp mo lq nu nv mq lu nw nx ms ly ny nz mu jp bi translated">第一部分:</h2><p id="fad5" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">安装完纸浆后，我们需要导入纸浆库，如下所示:</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="a01c" class="np mf jj ob b gy of og l oh oi"># import the library PuLP as p <br/>import pulp as p</span></pre><p id="8176" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">接下来，我们将设置最大化问题并初始化变量:</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="760a" class="np mf jj ob b gy of og l oh oi"># Set Up a LP Maximization Problem:<br/>Lp_prob = p.LpProblem('Activity-Analysis_1', p.LpMaximize) # Here we named the Problem "Acitity-Analysis_1".<br/>  <br/># Set Up Problem Variables: <br/>c = p.LpVariable("c", lowBound = 0) # "c" for chair<br/>t = p.LpVariable("t", lowBound = 0) # "t" for table<br/>d = p.LpVariable("d", lowBound = 0) # "d" for desk<br/>b = p.LpVariable("b", lowBound = 0) # "b" for bookcase</span></pre><p id="63ca" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在，这就是我们将创建<em class="md">目标函数</em>(我们试图<em class="md">最大化</em>)和<em class="md">约束</em>的部分。</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="8750" class="np mf jj ob b gy of og l oh oi"># Create Objective Function:<br/>Lp_prob += 45 * c + 80 * t + 110 * d + 55 * b    <br/>  <br/># Create Constraints: <br/>Lp_prob += 5 * c + 20 * t + 15 * d + 22 * b &lt;= 20000<br/>Lp_prob += 10 * c + 15 * t + 25 * d + 20 * b &lt;= 4000<br/>Lp_prob += 3 * c + 8 * t + 15 * d + 10 * b &lt;= 2000<br/>Lp_prob += 4 * c + 20 * d &lt;= 3000<br/>Lp_prob += 20 * b &lt;= 500</span></pre><p id="79e1" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，我们将显示这个问题，以确保事情看起来不错。</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="e099" class="np mf jj ob b gy of og l oh oi"># Show the problem:<br/>print(Lp_prob) # note that it's shown in alphabetical order</span></pre><p id="7da9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">运行上述代码后，您的LP问题应该是这样的:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/c658c65cb00d26ee7f4a50c0504ef04a.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*eRm_2Iz7v2c2xjNnyteHeA.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="7b1d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">正如你所看到的，显示的问题看起来像我以前写的那个，除了纸浆按字母顺序组织变量，这对解决方案没有任何影响。到目前为止，我们所做的只是输入我们之前讨论过的变量，并用Python对LP问题建模。为了简单和更容易理解，我们现在不解决它，而是在第二阶段。</p><h2 id="c45b" class="np mf jj bd mg nq nr dn mk ns nt dp mo lq nu nv mq lu nw nx ms ly ny nz mu jp bi translated">第二阶段:</h2><p id="5166" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">在这里，我们将创建一个新的简化问题，该问题源自我们刚刚看到的问题。这样做的原因只是为了更容易传达解决方案，这也有助于获得解决这类问题的额外直觉。</p><p id="8e86" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">好的，在这个新问题中，我们仍然使用相同的变量，但是现在我们把它减少到只有两个变量(椅子和桌子)，并且我们改变了一些数字。这是我们新的<em class="md">最大化</em>问题的样子:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/aadcaf0ab4ba4c36df95c7f5f2551140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f74B0f5nT6HoVO0pokHsJA.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="35c2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">事实上，我们保留了大部分的数字不变，但是现在，红木的总数是400，工时总数是450。第二个约束条件也由“15t”改为“20t”。现在我们将用Python解决这个问题，如下所示:</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="d500" class="np mf jj ob b gy of og l oh oi">### Simplifying the Problem and Solving it ###</span><span id="7045" class="np mf jj ob b gy ol og l oh oi"># Generate a New LP Maximization Problem:<br/>Lp_prob2 = p.LpProblem('Activity-Analysis_2', p.LpMaximize)<br/>  <br/># Generate Problem Variables (&gt;= 0): <br/>c = p.LpVariable("c", lowBound = 0)<br/>t = p.LpVariable("t", lowBound = 0)</span><span id="50cb" class="np mf jj ob b gy ol og l oh oi"># Create Objective Function:<br/>Lp_prob2 += 45 * c + 80 * t #+ 110 * d + 55 * b    <br/>  <br/># Set Up the Constraints: <br/>Lp_prob2 += 5 * c + 20 * t &lt;= 400<br/>Lp_prob2 += 10 * c + 15 * t &lt;= 450</span><span id="f5e5" class="np mf jj ob b gy ol og l oh oi"># Show the problem:<br/>print(Lp_prob2) # note that it's shown in alphabetical order</span></pre><p id="f307" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">同样，让我们看看这个新问题是如何在Python中显示的:</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div class="gh gi om"><img src="../Images/6be6ae55e46081bb74d0a5a71879ab31.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*iul1yS22nAglsrxYWthWFQ.png"/></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="4438" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它看起来很好，所以现在我们可以着手解决它。下面是这样做所需的代码。请注意，我们将打印解决方案的“状态”，它只是告诉我们解决方案是否是<em class="md">最优</em>(或者不是)。在这个例子中，我们得到了一个<em class="md">最优</em> <em class="md">解</em>。</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="f9e7" class="np mf jj ob b gy of og l oh oi"># Solve the Problem:<br/>status = Lp_prob2.solve()<br/>print(p.LpStatus[status])   # Display Solution Status</span></pre><p id="4d7b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">请记住，并非所有LP问题都有一个<em class="md">最优</em>解决方案。现在，为了真正看到实际的数字，我们需要如下所示的<em class="md">打印</em>结果。</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="ecd9" class="np mf jj ob b gy of og l oh oi"># Printing the final solution <br/>print(p.value(c), p.value(t), p.value(Lp_prob2.objective))</span><span id="0998" class="np mf jj ob b gy ol og l oh oi"># Result: 24.0 14.0 2200.0</span></pre><p id="83ec" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">于是我们得到了“24”、“14”、“2200”。有人可能想知道这些数字是什么，对吗？结果是，24和14分别是我们需要生产的椅子和桌子的最佳数量，以便获得2200美元的<em class="md">最佳</em>利润。提示:线性编程完全是关于<em class="md">优化</em>。</p><p id="74f4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果您愿意，可以创建一个循环来显示这个结果。这里有一个例子:</p><pre class="nc nd ne nf gt oa ob oc od aw oe bi"><span id="385c" class="np mf jj ob b gy of og l oh oi"># Printing Number of Chairs and Tables:<br/>for var in (c,t):<br/>    print('Optimal number of {} to produce is: {:1.0f}'<br/>          .format(var.name, var.value()))</span><span id="5657" class="np mf jj ob b gy ol og l oh oi"># Output:<br/># Optimal number of c to produce is: 24<br/># Optimal number of t to produce is: 14</span></pre><p id="a431" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">换句话说，考虑到我们对可用的红木数量和工时的限制，生产这两种物品并获得最大利润的最佳组合是:<em class="md"> c </em> =24把椅子，<em class="md"> t </em> =14张桌子，为了找到最佳利润，我们必须将目标函数带入该方程。这将看起来像:<strong class="lj jt"> $45 x 24 + $80 x 14 = $2，200 </strong>。</p><p id="4179" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们刚刚用单纯形算法解决了这个问题。现在，我们可以根据数据做出决定，并得到结果的支持。不是基于直觉，对吗？！</p><p id="6153" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">还有一件事我需要指出的是，单纯形可能是相当具有挑战性和棘手的解决方案。虽然在这里看起来像是小菜一碟，但是如果你试图用手来解决它，如果你不知道实际上是什么和如何做，你会有一段艰难的时间。感谢上帝，现在我们有能力使用像Python/PuLP这样的解决方案来做到这一点。</p><p id="24c4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在结束我的案例之前，我想向你展示如何将这个问题绘制成图表。解决线性规划问题有许多方法，图解法是其中之一。</p><h2 id="2cd1" class="np mf jj bd mg nq nr dn mk ns nt dp mo lq nu nv mq lu nw nx ms ly ny nz mu jp bi translated">使用单纯形图</h2><p id="54cd" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">所以，我走到白板前，画出了单纯形图，让我们的讨论更进一步。下面是绘图(可以在Python上使用Matplotlib完成):</p><figure class="nc nd ne nf gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi on"><img src="../Images/ad4d2e20eb7456c43851919a89aca061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6o5mncI2AOxLj_k4CKauhw.png"/></div></div><p class="jc jd gj gh gi je jf bd b be z dk translated">作者图片</p></figure><p id="9b57" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">看起来不错吧？！让我向你解释我们是如何到达那里的。</p><p id="66f6" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我们开始查看LP问题的第一个不等式(5c + 20t ≤ 400)，在这种情况下，用橙色表示。我们需要的是找到两个点，一个为<em class="md"> c </em>轴，另一个在<em class="md"> t </em>轴(记住<em class="md"> c </em>为椅子，<em class="md"> t </em>为桌子)。想出那个最简单的方法是假设如果<em class="md"> c </em> = 0，我们必须得到<em class="md"> t </em> = 20，并在<em class="md"> t </em>轴上标记那个“点”；如果<em class="md"> t </em> = 0，那么我们得到<em class="md"> c </em> = 80，我们把它画在<em class="md"> c </em>轴上。</p><p id="3af5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">其次，我们绘制最后一个约束(10c + 15t ≤ 450)，用绿线表示。按照与前面相同的方法，我们得到轴上的点如下:45，0和0，30。</p><p id="906a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这个图中，我们看到的是这两个不等式的叠加。通过重叠它们，我们可以计算出所需的解空间，也就是黄色突出显示的区域。这个区域中的任何点都将满足这个问题的约束，这个组合代表了考虑到我们可用的资源(桃花心木和工时)，我们可以生产的不同的桌椅组合。当两条线相交时，我们得到的<em class="md">最优</em>值为24，14(红色)。这意味着<em class="md"> c </em> =24，而<em class="md"> t </em> =14正好满足这两个约束。我们在使用纸浆时也发现了同样的结果，但是如果你想证实这一点，你可以使用一些代数方法。</p><p id="836a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后我们看<em class="md">目标函数</em> (45c + 80t = 0)。这由灰色线表示。现在，让我们想一想。如果公司不生产任何桌椅，它的利润会是多少？零，对吗？！这将意味着<em class="md"> c </em> =0，而<em class="md"> t </em> =0。这是我们使用单纯形法的起点，我们可以将那条灰线从零向上移动到与<em class="md"> c </em>和<em class="md"> t </em> (24，14)相交的点，但不能移出黄色区域的边界。通过这样做，我们最终得到了最优的公式，我们以前见过这个公式:<strong class="lj jt"> $45 x 24 + $80 x 14 = $2，200。</strong></p><p id="67fd" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">到现在为止，你可能已经有了可以用不同的值进行实验的直觉，并且最终基于<em class="md">目标函数</em>的变化测试了多个最佳解决方案。我希望这对你有用。</p><p id="826e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这个例子摘自Saul I. Gass的《线性编程图解指南》一书。你可以在我的GitHub <a class="ae jg" href="https://github.com/Lucianoboas/LP-Problem/blob/master/LP%20Modeling_Activity-Analysis%20Problem.py" rel="noopener ugc nofollow" target="_blank">这里</a>找到代码。</p><blockquote class="ng nh ni"><p id="ebfd" class="lh li md lj b lk ll kt lm ln lo kw lp nj lr ls lt nk lv lw lx nl lz ma mb mc im bi translated">开始吧，但不要试图一餐吃掉大象。从试点项目开始，构建您的第一个仪表板。从那里你可以学习、提高并扩展到其他领域——鲁珀特·邦汉姆·卡特</p></blockquote><h2 id="1b73" class="np mf jj bd mg nq nr dn mk ns nt dp mo lq nu nv mq lu nw nx ms ly ny nz mu jp bi translated">结论</h2><p id="e8c1" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">在本文中，您了解了LP的一些基本概念，您了解了如何制定LP问题，以及如何解决它。资源的优化将永远是世界上许多公司议事日程的一部分。根据项目的范围，<em class="md">最大化</em>和/或<em class="md">最小化</em>总是有问题。</p><p id="8c01" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">数据科学家至少需要有一个关于LP如何有用的非常基本的概念，以及我们今天可以用来帮助我们的资源。我希望这篇文章能激励你去做自己的实验。祝你好运。</p><p id="78a3" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">谢谢大家！</p></div><div class="ab cl oo op hx oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="im in io ip iq"><h2 id="26d0" class="np mf jj bd mg nq nr dn mk ns nt dp mo lq nu nv mq lu nw nx ms ly ny nz mu jp bi translated">参考资料:</h2><p id="5e57" class="pw-post-body-paragraph lh li jj lj b lk mw kt lm ln mx kw lp lq my ls lt lu mz lw lx ly na ma mb mc im bi translated">[1] Lial，格伦威尔和Ritchey，2012:有限数学。马萨诸塞州波士顿:皮尔逊。</p><p id="76f7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">[2] Chvatal，Vasek，1983:线性规划。美国:弗里曼。</p><p id="fc03" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">[3] Gass，Saul I .，1970:线性规划图解指南。加拿大:多佛。</p></div></div>    
</body>
</html>