<html>
<head>
<title>Our Q&amp;A Bot &amp; WordCloud in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们的问答机器人&amp; Python 语言的 WordCloud</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/our-q-a-bot-wordcloud-in-python-c8e7593a3256?source=collection_archive---------66-----------------------#2020-05-14">https://towardsdatascience.com/our-q-a-bot-wordcloud-in-python-c8e7593a3256?source=collection_archive---------66-----------------------#2020-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a72b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">创建首个个性化单词云的 whistlestop 指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/85019a7a4bbcc88ab66bc51cd6c603e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IykkXsgyuN_MdjyrBhnW9g.png"/></div></div></figure><p id="b414" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Candide 是一个植物爱好者社区。我们的用户经常会来到我们的 feed，询问关于他们的植物的问题。</p><p id="dbc3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上个月，我们推出了问答机器人(Q&amp;A Bot ):这是一个试图回答用户提出的任何问题的系统，利用我们文章中的智慧和应用程序中更广泛的内容。</p><p id="f6f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我对我们收到的问题的内容进行了分析，并使用 Python 的 WordCloud 包创建了一个可视化的单词云。我不会详细说明代码是如何工作的，但是如果你想看这个，请在下面评论，我很乐意写一个关于这个主题的教程。</p><p id="81f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，准备好大约 2500 个问题，由 1000 多名 Candide 用户通过问答机器人提交给我们，让我们开始吧！</p><p id="c6b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们导入将要使用的库:<code class="fe lq lr ls lt b">numpy</code>、<code class="fe lq lr ls lt b">pandas</code>、<code class="fe lq lr ls lt b">wordcloud</code>和<code class="fe lq lr ls lt b">matplotlib.pyplot</code>。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="ffcf" class="ly lz it lt b gy ma mb l mc md">import numpy as np<br/>import pandas as pd<br/>from wordcloud import WordCloud, STOPWORDS<br/><br/>import matplotlib.pyplot as plt</span></pre><p id="7f72" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们将数据加载到熊猫数据框架中。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="706a" class="ly lz it lt b gy ma mb l mc md"># Dataframe<br/>df = pd.read_csv("questions.csv", index_col=0)</span></pre><p id="87c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们将所有提交的问题合并到一个文本中，并确保全部是小写字母，如下所示:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="9673" class="ly lz it lt b gy ma mb l mc md"># Combine all questions into one text<br/>text = " ".join(question for question in df.text)<br/># Make sure all words are lower case<br/>text = text.lower()</span></pre><p id="64b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在准备使用<code class="fe lq lr ls lt b">cloudword</code>和<code class="fe lq lr ls lt b">matplotlib</code>来生成和绘制我们的单词云，如下所示:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="1aa5" class="ly lz it lt b gy ma mb l mc md"># Generate a wordcloud<br/>stopwords = STOPWORDS<br/>wordcloud = WordCloud(background_color="white", max_words=1000, stopwords=stopwords)<br/>wordcloud.generate(text)<br/><br/># Plot<br/>plt.figure(figsize=[20, 10])<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="a73a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">瞧啊！结果看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/874b5ef1626707fc1d824a18530c4f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WdeR2pqrHqN80-PwVUjRow.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">Word Cloud，使用提交给我们问答机器人的问题</p></figure><p id="0265" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">热门词汇是:植物、花和叶子🌱。没什么好惊讶的🙂！</p><p id="a19a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，如果我们想要个性化输出，我们可能想要让这个单词云有一个特定的形状。为此，我们将使用以下机器人植物的剪影，由我的设计师同事好心提供，<a class="ae mj" href="https://medium.com/@kat.jones_38546" rel="noopener"> Kat </a>(这毕竟是一个关于植物问题的 Q &amp; A Bot！)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4ad7f6265269283e59e8bd0879df7c2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jdzsZ8UUVZlybOr9zxgIYw.png"/></div></div></figure><p id="62fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用上面的图像和下面的代码:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="413c" class="ly lz it lt b gy ma mb l mc md"># Personalised cloud of words<br/>path = "/Users/amine/code/HackDayMay2020/robot-plant.png"<br/>mask = np.array(Image.open(path))<br/>wordcloud = WordCloud(background_color="white", max_words=1000, mask=mask, stopwords=stopwords)<br/>wordcloud.generate(text)<br/><br/># Plot<br/>plt.figure(figsize=[20, 10])<br/>plt.imshow(wordcloud, interpolation='bilinear')<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="5c14" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们得到了一个最终的结果，一堆单词组成了我们的机器人工厂的形状！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/927f5a5cd1637945f308811d84adedc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0hoz_Z1z8-VSKd8KAmyowA.png"/></div></div><p class="mf mg gj gh gi mh mi bd b be z dk translated">机器人工厂！</p></figure><p id="27d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们不应该忘记将我们的图像保存到文件中，代码如下:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="0045" class="ly lz it lt b gy ma mb l mc md"># Save to file<br/>wordcloud.to_file("robot-plant-word-cloud.png")</span></pre><p id="97cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在下一篇教程中，我将分析用户的问题是如何随着时间和季节变化的。如果你想让我制作一个更深入的教程来解释 wordcloud 是如何工作的，请在评论中告诉我！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h2 id="0b95" class="ly lz it bd mr ms mt dn mu mv mw dp mx ld my mz na lh nb nc nd ll ne nf ng nh bi translated">参考资料和资源</h2><ol class=""><li id="6ad3" class="ni nj it kw b kx nk la nl ld nm lh nn ll no lp np nq nr ns bi translated"><em class="nt"> WordCloud for Python 文档</em><a class="ae mj" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank">https://github.com/amueller/word_cloud</a></li><li id="c639" class="ni nj it kw b kx nu la nv ld nw lh nx ll ny lp np nq nr ns bi translated"><em class="nt">word cloud 项目的 Github 代码</em><a class="ae mj" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank">https://github.com/amueller/word_cloud</a></li><li id="82ca" class="ni nj it kw b kx nu la nv ld nw lh nx ll ny lp np nq nr ns bi translated"><em class="nt">用 Python 生成 word cloud</em>作者 Duong Vu<a class="ae mj" href="https://www.datacamp.com/community/tutorials/wordcloud-python" rel="noopener ugc nofollow" target="_blank">https://www . data camp . com/community/tutorials/word cloud-Python</a></li><li id="1325" class="ni nj it kw b kx nu la nv ld nw lh nx ll ny lp np nq nr ns bi translated"><em class="nt">用 Python 生成单词云</em>由 SumedhKadam<a class="ae mj" href="https://www.geeksforgeeks.org/generating-word-cloud-python/" rel="noopener ugc nofollow" target="_blank">https://www.geeksforgeeks.org/generating-word-cloud-python/</a></li></ol></div></div>    
</body>
</html>