<html>
<head>
<title>Performance Metrics for Classification Machine Learning Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类机器学习问题的性能度量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/performance-metrics-for-classification-machine-learning-problems-97e7e774a007?source=collection_archive---------7-----------------------#2020-07-26">https://towardsdatascience.com/performance-metrics-for-classification-machine-learning-problems-97e7e774a007?source=collection_archive---------7-----------------------#2020-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9ac5af5aa7512ec097b3f091647ed4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*soyy6XBvSGngkX_I"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">有大量的性能指标，并且每一个指标都有变化(图片由<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jd" href="https://unsplash.com/@carlevarino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Cesar Carlevarino Aragon </a>拍摄)</p></figure><div class=""/><div class=""><h2 id="727e" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">准确度、精确度、召回率、F1 分数、ROC AUC、对数损失</h2></div><p id="f4be" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">已经提出了许多学习算法。评估算法的有效性通常是有价值的。在许多情况下，这种评估是相对的，即评估几个备选算法中的哪一个最适合特定的应用。</p><p id="4dc1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">人们甚至最终会创建适合应用程序的指标。在本文中，我们将看到问题分类设置中一些最常见的指标。</p><p id="6d9d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">分类问题最常用的性能度量如下:</p><ul class=""><li id="d1eb" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">准确(性)</li><li id="215c" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">混淆矩阵</li><li id="d8e8" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">精确度、召回率和 F1 分数</li><li id="3338" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">ROC AUC</li><li id="ca8a" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">原木损失</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="291e" class="mm mn jg bd mo mp mq mr ms mt mu mv mw km mx kn my kp mz kq na ks nb kt nc nd bi translated">准确(性)</h1><p id="96af" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">准确度是正确分类的点数与总点数之间的简单比率。</p><p id="27e7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了计算精度，scikit-learn 提供了一个实用函数。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="b926" class="ns mn jg no b gy nt nu l nv nw"><strong class="no jh">from</strong> <strong class="no jh">sklearn.metrics</strong> <strong class="no jh">import</strong> accuracy_score</span><span id="77af" class="ns mn jg no b gy nx nu l nv nw">#predicted y values<br/>y_pred = [0, 2, 1, 3]</span><span id="670f" class="ns mn jg no b gy nx nu l nv nw">#actual y values<br/>y_true = [0, 1, 2, 3]</span><span id="9175" class="ns mn jg no b gy nx nu l nv nw">accuracy_score(y_true, y_pred)<br/>0.5</span></pre><p id="a9d0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">精确度计算起来很简单，但有其自身的缺点。</p><h2 id="41e4" class="ns mn jg bd mo ny nz dn ms oa ob dp mw le oc od my li oe of na lm og oh nc oi bi translated">准确性的限制</h2><ul class=""><li id="dc36" class="lr ls jg kx b ky ne lb nf le oj li ok lm ol lq lw lx ly lz bi translated">如果数据集是高度不平衡的，并且模型将所有的数据点分类为多数类数据点，则准确率会很高。这使得准确性对于不平衡数据来说不是一个可靠的性能指标。</li><li id="2586" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">根据精确度，可以推导出模型预测的概率。所以从精度上，我们无法衡量模型的预测有多好。</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="aab5" class="mm mn jg bd mo mp mq mr ms mt mu mv mw km mx kn my kp mz kq na ks nb kt nc nd bi translated">混淆矩阵</h1><p id="2e47" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">混淆矩阵是特定表格布局中预测结果的总结，其允许对二分类问题(2 类)或多分类问题(多于 2 类)的机器学习模型的性能测量进行可视化</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/96594a21fdfef2d5067bfd3f70c31ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbFaAWGBfFzlPys1TeSJuQ.png"/></div></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">二元分类的混淆矩阵</p></figure><ul class=""><li id="c47a" class="lr ls jg kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">TP 表示<strong class="kx jh">真正</strong>。它可以被解释为模型预测的正类并且是真实的。</li><li id="afb3" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">FP 表示<strong class="kx jh">假阳性</strong>。它可以被解释为模型预测的正类，但它是假的。</li><li id="78c7" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">FN 表示<strong class="kx jh">假阴性</strong>。它可以被解释为模型预测的负类，但它是假的。</li><li id="63ba" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">TN 表示<strong class="kx jh">真负</strong>。它可以被解释为模型预测的负类并且它是真实的。</li></ul><blockquote class="on oo op"><p id="e330" class="kv kw oq kx b ky kz kh la lb lc kk ld or lf lg lh os lj lk ll ot ln lo lp lq ij bi translated">对于一个合理的模型，主对角线元素值将是高的，而非对角线元素值将是低的，即 TP，TN 将是高的。</p></blockquote><p id="7622" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了在现实世界的问题中找到一个合适的例子，考虑一个诊断测试，它试图确定一个人是否患有某种疾病。在这种情况下，当这个人测试呈阳性，但实际上并没有患病时，就会出现假阳性。另一方面，当一个人测试结果为阴性时，就会出现假阴性，表明当他们实际上患有疾病时，他们是健康的。</p><p id="d186" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于具有“c”类标签的多类分类问题，混淆矩阵将是(c*c)矩阵。</p><p id="f892" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了计算混淆矩阵，sklearn 提供了一个效用函数</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="9723" class="ns mn jg no b gy nt nu l nv nw"><strong class="no jh">from</strong> <strong class="no jh">sklearn.metrics</strong> <strong class="no jh">import</strong> confusion_matrix<br/>y_true = [2, 0, 2, 2, 0, 1]<br/>y_pred = [0, 0, 2, 2, 0, 2]<br/>confusion_matrix(y_true, y_pred)<br/>array([[2, 0, 0],<br/>       [0, 0, 1],<br/>       [1, 0, 2]])</span></pre><h2 id="c83e" class="ns mn jg bd mo ny nz dn ms oa ob dp mw le oc od my li oe of na lm og oh nc oi bi translated">混淆矩阵的优点:</h2><ul class=""><li id="096d" class="lr ls jg kx b ky ne lb nf le oj li ok lm ol lq lw lx ly lz bi translated">混淆矩阵提供了分类的详细结果。</li><li id="fc31" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">混淆矩阵的导数被广泛使用。</li><li id="028b" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">使用热图可以增强对结果的直观检查。</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="0bcc" class="mm mn jg bd mo mp mq mr ms mt mu mv mw km mx kn my kp mz kq na ks nb kt nc nd bi translated">精确度、召回率和 F-1 分数</h1><p id="f31b" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated"><strong class="kx jh">精度</strong>是正确分类的实例占总分类实例的比例。<strong class="kx jh">召回</strong>是正确分类的实例占总分类实例的比例。精度和召回率给出如下:</p><div class="nj nk nl nm gt ab cb"><figure class="ou is ov ow ox oy oz paragraph-image"><img src="../Images/e900606d70c00c7f22923c1ce19576ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:844/format:webp/1*QgpsBe5F3oxTqRrdpAEqCA.png"/></figure><figure class="ou is pa ow ox oy oz paragraph-image"><img src="../Images/10d51a86ac2c2bf17d4ae5a085bf4581.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*0u2TPwlxNX3WGX9GIv9LWA.png"/><p class="iz ja gj gh gi jb jc bd b be z dk pb di pc pd translated">利用混淆矩阵计算查准率和查全率的数学公式</p></figure></div><p id="49fe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，考虑一个搜索查询产生 30 个页面，其中 20 个是相关的。并且结果未能显示 40 个其他相关结果。所以精度是 20/30，召回率是 20/60。</p><blockquote class="pe"><p id="7e24" class="pf pg jg bd ph pi pj pk pl pm pn lq dk translated">精确度有助于我们理解结果有多有用。回忆帮助我们理解结果有多完整。</p></blockquote><p id="16c9" class="pw-post-body-paragraph kv kw jg kx b ky po kh la lb pp kk ld le pq lg lh li pr lk ll lm ps lo lp lq ij bi translated">但是为了减少两次口袋检查，使用 F1 分数。F1 分数是精确度和召回率的调和平均值。它被给定为，</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/3ffc216c3b9eb779c709b4e68861026d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*PM5OdN3pZbSN1jQbnwMBBw.png"/></div></figure><h2 id="d308" class="ns mn jg bd mo ny nz dn ms oa ob dp mw le oc od my li oe of na lm og oh nc oi bi translated">何时使用 F1 分数？</h2><ul class=""><li id="30ce" class="lr ls jg kx b ky ne lb nf le oj li ok lm ol lq lw lx ly lz bi translated">F-score 通常用于信息检索领域，用于测量搜索、文档分类和查询分类性能。</li><li id="39a4" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">F-score 在自然语言处理文献中得到了广泛的应用，如命名实体识别和分词的评价。</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="7b58" class="mm mn jg bd mo mp mq mr ms mt mu mv mw km mx kn my kp mz kq na ks nb kt nc nd bi translated">原木损失</h1><p id="6932" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">对数损失(或对数损失)衡量分类模型的性能，其中预测是介于 0 和 1 之间的概率值。随着预测概率偏离实际标签，测井曲线损失增加。日志损失是一个广泛用于 Kaggle 比赛的指标。</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pu"><img src="../Images/ecb1b7e8950f1c2c46be478a54c15f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWS2pNHzjBYeuK3K8Jkf0w.png"/></div></div></figure><p id="ee0f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里‘N’是数据集中数据点的总数，yi 是 y 的实际值，pi 是 y 属于正类的概率。</p><blockquote class="pe"><p id="ec9d" class="pf pg jg bd ph pi pj pk pl pm pn lq dk translated">对数损失值越低，模型的预测就越好。</p></blockquote><p id="0b28" class="pw-post-body-paragraph kv kw jg kx b ky po kh la lb pp kk ld le pq lg lh li pr lk ll lm ps lo lp lq ij bi translated">为了计算日志损失，scikit-learn 提供了一个实用函数。</p><pre class="nj nk nl nm gt nn no np nq aw nr bi"><span id="d37f" class="ns mn jg no b gy nt nu l nv nw"><strong class="no jh">from</strong> <strong class="no jh">sklearn.metrics</strong> <strong class="no jh">import</strong> log_loss</span><span id="7195" class="ns mn jg no b gy nx nu l nv nw">log_loss(y_true, y_pred)</span></pre></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="5f0b" class="mm mn jg bd mo mp mq mr ms mt mu mv mw km mx kn my kp mz kq na ks nb kt nc nd bi translated">ROC AUC</h1><p id="c067" class="pw-post-body-paragraph kv kw jg kx b ky ne kh la lb nf kk ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated"><strong class="kx jh">通过在各种阈值设置下绘制真阳性(TP)对假阳性(FP)来创建接收器工作特性曲线</strong>或<strong class="kx jh"> ROC 曲线</strong>。ROC 曲线通过绘制 y 轴上真阳性的<a class="ae jd" href="https://medium.com/towards-artificial-intelligence/pdf-cdf-in-machine-learning-5a10f7abeef6" rel="noopener">累积分布函数</a>与 x 轴上假阳性的累积分布函数来生成。</p><figure class="nj nk nl nm gt is gh gi paragraph-image"><div class="gh gi pv"><img src="../Images/cbc624d6dd73bd07d3d00ee8bc6a053b.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*1nNqWduBNEHDc0r54k427Q.png"/></div><p class="iz ja gj gh gi jb jc bd b be z dk translated">虚曲线是 ROC 曲线</p></figure><p id="6218" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ROC 曲线下的面积(ROC AUC)是用于评估性能的单值度量。</p><blockquote class="pe"><p id="12c1" class="pf pg jg bd ph pi pj pk pl pm pn lq dk translated">AUC 越高，模型区分类别的性能越好。</p></blockquote><p id="d8d4" class="pw-post-body-paragraph kv kw jg kx b ky po kh la lb pp kk ld le pq lg lh li pr lk ll lm ps lo lp lq ij bi translated">一般来说，0.5 的 AUC 表明没有歧视，0.5-0.7 之间的值是可以接受的，任何高于 0.7 的值都是可以使用的模型。然而，医学诊断模型，通常 AUC 为 0.95 或更高被认为是良好的模型。</p><h2 id="173c" class="ns mn jg bd mo ny nz dn ms oa ob dp mw le oc od my li oe of na lm og oh nc oi bi translated">什么时候用 ROC？</h2><ul class=""><li id="bee5" class="lr ls jg kx b ky ne lb nf le oj li ok lm ol lq lw lx ly lz bi translated">ROC 曲线被广泛用于比较和评估不同的分类算法。</li><li id="6112" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">当数据集不平衡时，ROC 曲线被广泛使用。</li><li id="9045" class="lr ls jg kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">ROC 曲线也用于验证气象学中的预测</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="9d5b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">谢谢你的阅读。以后我会写更多初学者友好的帖子。请在<a class="ae jd" href="https://medium.com/@ramyavidiyala" rel="noopener">媒体</a>上关注我，以便了解他们。我欢迎反馈，可以通过 Twitter <a class="ae jd" href="https://twitter.com/ramya_vidiyala" rel="noopener ugc nofollow" target="_blank"> ramya_vidiyala </a>和 LinkedIn <a class="ae jd" href="https://www.linkedin.com/in/ramya-vidiyala-308ba6139/" rel="noopener ugc nofollow" target="_blank"> RamyaVidiyala </a>联系我。快乐学习！</p></div></div>    
</body>
</html>