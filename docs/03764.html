<html>
<head>
<title>Small motivation and easy start to learn SQL using Pandas and pandasql</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Pandas 和 pandasql 学习 SQL 的小动机和简单入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/small-motivation-and-easy-start-to-learn-sql-using-pandas-and-pandasql-c0a67166749b?source=collection_archive---------23-----------------------#2020-04-08">https://towardsdatascience.com/small-motivation-and-easy-start-to-learn-sql-using-pandas-and-pandasql-c0a67166749b?source=collection_archive---------23-----------------------#2020-04-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="ir is gp gr it iu"><div class="bz fp l di"><div class="iv iw l"/></div><p class="ix iy gj gh gi iz ja bd b be z dk translated"><a class="ae jb" href="https://giphy.com/gifs/easy-jcqqXMvmbTzHi" rel="noopener ugc nofollow" target="_blank">来自 giphy.com</a>(上图)我脑中的数据科学家形象(下图)我努力成为一名数据科学家</p></figure><div class=""/><div class=""><h2 id="f0d4" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">不是因为你必须这么做，而是因为这让你的生活更轻松</h2></div><p id="40b1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi lp translated">当我开始独自学习数据科学时，有太多的东西需要我去学习。我从 Python 编码开始，我相信这是大多数人的起点，除非你已经知道如何使用 R 或 Python 编程。然后我们听到机器学习算法和大数据等等。在我加入数据科学沉浸式项目(也称为数据科学训练营)之前，我没有考虑过数据库管理系统(DBMS ),因为我只考虑过如何处理数据，而没有考虑过如何访问数据。<strong class="kv jf">数据库</strong>是组织存储不同类型数据的地方，根据数据的种类(关系或非关系)决定数据库的类型。关系数据库通过包含特定信息的行和列的表格来存储数据。例如，在企业中，数据库可能存储一个包含客户 ID、姓名、地址、电话号码的客户信息表，以及一个包含订单号、日期、产品名称、金额、客户 ID 的订单表。</p><p id="6c7a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然后这两个表通过客户 ID 连接起来。数据库中的每个表可能都有主键，例如客户 ID 和订单号，在本例中，这是表的唯一标识符。</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/da9bef6a9cd898aa7357c3e82ac73885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*6nY_DMFzazb207_zu71dsQ.png"/></div></figure><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mf"><img src="../Images/d954976a3a9a1a2c7c5692027ff5cb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5zudtkZUYUpTVvFZhNb4A.png"/></div></div></figure><p id="0374" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">SQL 代表结构化查询语言，是一种与关系数据库管理系统(RDBMS)一起工作的语言。尽管有不同的 RDBMSs，如 PostgreSQL、MySQL 和 SQLite，但 SQL 是所有人的通用语言。</p><p id="e19d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">当我学习任何一门新的编程语言时，我都试图找到最简单的方法来接触这门语言，并将其与我已经知道的语言进行比较。所以今天我想分享我是如何用熊猫数据框架来练习 SQL 的。这种方式降低了学习的障碍，让你的心从恐惧中平静下来。此外，您可以更经常地练习，因为您不需要寻找 SQL 示例数据库来练习。最后，编写查询通常更容易操作表。(相信我)</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="1b03" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">第一种方法是使用<code class="fe mr ms mt mu b">pandasql</code>。您可能需要首先使用 bash 命令<code class="fe mr ms mt mu b">pip install pandasql</code>安装它。</p><pre class="lz ma mb mc gt mv mu mw mx aw my bi"><span id="a2ed" class="mz na je mu b gy nb nc l nd ne">from pandasql import sqldf</span></pre><p id="b6d8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然后我们编写一个 lambda 函数，它将使编写查询变得更快。</p><pre class="lz ma mb mc gt mv mu mw mx aw my bi"><span id="ae65" class="mz na je mu b gy nb nc l nd ne">pysqldf = lambda q: sqldf(q, globals())</span></pre><p id="0cd1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们以泰坦尼克号数据集为例。我使用了链接中的火车设置，并保存为<code class="fe mr ms mt mu b">titanic.csv</code>。</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nf"><img src="../Images/5016978ad35c3f34f0caabc4f66e96d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UhkKlLrh8_AtVCZZuQQPw.png"/></div></div></figure><p id="32c2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在让我们尝试一些简单的东西。</p><p id="b3d5" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们通过 50 到 100 之间的<code class="fe mr ms mt mu b">Fare</code>范围来分割数据帧。</p><p id="f85c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于用我们通常的方式使用熊猫:</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ng"><img src="../Images/0cd222af18067ea84bd698166ee8de30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0C-jay49-gjcE30CdrtZw.png"/></div></div></figure><p id="b7af" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于使用 SQL 查询:</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nh"><img src="../Images/40c9d8ee7bc9248cfad54f76115cc8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MPAlJuyhkotNXJuju-z7_g.png"/></div></div></figure><p id="24c4" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们可以通过使用<code class="fe mr ms mt mu b">.equals()</code>来检查这两个结果是否相同。但是请注意，当我们使用 SQL 查询时，索引被重置。所以我们用<code class="fe mr ms mt mu b">PassengerId</code>设置索引，然后使用<code class="fe mr ms mt mu b">.equal()</code>。</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ni"><img src="../Images/6133b63fe355aa5fcc6169df65995a36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocdGuf0meYWEMeWYPcjOog.png"/></div></div></figure><p id="b86b" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">第二个例子是获取幸存男性乘客的前 30 个名字。</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nj"><img src="../Images/5d938c9bcb89175539cafd54c4a6c460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FZUsYhB0f_ec8u_I7ISMEA.png"/></div></div></figure><p id="0454" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">它表明，当应用的条件越多，SQL 查询就越容易使用！因此，不仅为了实践，也为了方便，我喜欢使用 SQL 查询来一次应用多个条件。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="e17e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">第二种方法是使用<code class="fe mr ms mt mu b">.query()</code></p><p id="9bc1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">真的很简单！让我们直接看一个例子。</p><p id="0956" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们想要 15 岁以下的女性乘客。</p><p id="eb47" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用熊猫:</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nh"><img src="../Images/bb8cf7004e9b5fabc13f1e4a6eca5708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNi4UcY70lPUpaGhIFkLaA.png"/></div></div></figure><p id="6513" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用查询:</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nk"><img src="../Images/869a34a125e99dfbed22cde6ed63ab19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6Ubs3Z3vCU3DmkkYPV2vQ.png"/></div></div></figure><p id="9e6c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">请注意，没有使用<code class="fe mr ms mt mu b">.query()</code>重置索引。</p><p id="b739" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所以我们可以直接对比这两个。</p><figure class="lz ma mb mc gt iu gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi nl"><img src="../Images/a5ae272c70501b99c27406d42d14bfba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3cY0AnS44mRp3HWJx834w.png"/></div></div></figure></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="547d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我希望这些简单的例子能激发您查找更多的 SQL 推荐，并尝试自己使用它们。如果您有任何问题或意见，请告诉我！我会把 Jupyter 笔记本和我在这里使用的例子放在我的 GitHub 库中，我会用更多的例子更新它！</p></div></div>    
</body>
</html>