# 知道何时停止

> 原文：<https://towardsdatascience.com/knowing-when-to-stop-b73ceeec7d9f?source=collection_archive---------63----------------------->

## 你应该在什么时候停止追逐百分点，给你的模型贴上“完成”的标签？

![](img/bf8e18b897390ed5054a17f71b53bdfd.png)

约翰·马特丘克在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

在预测分析中，知道何时停止可能是一件棘手的事情。

不像生活中的许多活动，没有明确的终点线，之后你可以说“滴答，我完成了”。多做一点工作就能改进你的模型的可能性总是存在的。有如此多的变量需要调整，很容易最终沉迷于 0.1 个百分点，在抬起头来想“时间都去哪里了”之前，在细节上倾注了巨大的努力。

通过特征工程、模型选择和超参数调整迭代您的模型是任何数据科学家的关键技能。但是知道何时停止是很少解决的事情，并且可以极大地改变模型开发的成本和数据科学项目的 ROI。

我不是在这里谈论过度与欠适应。过度拟合是指模型与训练数据过于接近，可以通过将训练集错误与验证集错误进行比较来检测。在 Medium 和其他地方有[许多](/understanding-the-bias-variance-tradeoff-165e6942b229) [伟大的](/overfitting-vs-underfitting-a-conceptual-explanation-d94ee20ca7f9) [教程](/overfitting-vs-underfitting-a-complete-example-d05dd7e19765)更详细地解释了这一切。

我指的是你在整个建模过程中花费的时间，以及你如何量化回报和证明成本的合理性。

## 战略

一些可以帮助你决定何时结束的策略可能是:

*   **设定最后期限—** 帕金森定律指出“工作扩大是为了填满完成它的时间”。拥有一个开放式的时间框架会让你拖延时间，把时间花在那些最终不会给最终结果带来多少价值的事情上。给自己设定一个截止日期是一个保持低成本和可预测的好方法，它迫使你有效地进行优先排序。当然，不利的一面是，如果您过于激进地设定截止日期，您可能会交付一个质量很差的模型。
*   **可接受的错误率—** 你可以事先决定一个可接受的错误率，一旦达到就停止。例如，自动驾驶汽车可能会以 99.99%的准确率识别骑自行车的人。这种方法的困难在于，在你开始实验之前，很难设定你的模型有多精确的期望值。鉴于不可减少的误差水平，你想要的准确率可能是不可能的。另一方面，您可能会过早地停止，而仍然有空间来轻松地改进您的模型。
*   **价值梯度法—** 通过在您的模型中绘制真实世界的错误成本与增强模型所需的努力，您可以了解每次增量改进的投资回报。这允许您继续开发您的模型，只有当额外调整的预测值低于您的时间值时才停止。

![](img/18ca88bcca9961277228642a5c6f3cbd.png)

照片由[尼古拉斯·霍伊泽](https://unsplash.com/@nhoizey?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

## 收益递减法则

当你投入时间调整你的模型时，你可能会发现你的进展在开始时很快，但很快就停滞了。你可能会先取得最明显的进步，但随着时间的推移，你会越来越努力地工作以获得更小的收益。在数据本身中，可减少误差和不可减少误差之间的平衡为模型所能达到的精确度设置了上限。

在学习练习或纸牌游戏比赛中，你可以随心所欲地重复，追求那些越来越小的进步。

然而，对于一个商业项目来说，调整这个模型的成本随着您投入的时间的增加而线性攀升。这意味着，到了某个时候，再多掏 0.1%就不值得投资了。

这因项目而异。如果您正在处理超市数据，考虑到每天的大量购买，额外的百分之一个百分点的准确性可能值很多钱。这为继续努力改进您的模型带来了丰厚的投资回报。但是对于规模更小的项目，你可能需要更早地划清界限。

![](img/859c0e2323f1f3594309ec5e7580512e.png)

照片由 [Jp Valery](https://unsplash.com/@jpvalery?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

## 模型误差的真实成本

在调优模型时，您可能要关注的值本质上是统计的。MSE、%精度、R 和 AIC 是由它们的数学公式定义的，与你试图解决的现实世界的问题无关。

不要只考虑准确性和误差的统计测量，这些应该被转换成可以与你正在进行的时间投资相权衡的东西，即金钱。

假设我们经营一个冰淇淋亭，我们试图使用天气、星期几、一年中的时间等变量来预测我们每天会卖出多少冰淇淋。

我们创建的模型没有一个是完美的，在任何一天，它通常都不是完美的；

*   高估——意思是我们买的配料比卖出的冰淇淋数量需要的多。
*   低估——意味着我们缺货，失去了潜在的业务。

这两种类型的错误都会给企业带来货币成本。如果我们中午就缺货，我们就失去了半天销售的利润。如果我们估计过高，我们可能会把钱花在最终被扔掉的原料上。

我们可以在我们的模型之上引入业务规则来帮助减少一些损失。损失 1 个冰淇淋销售额的成本可能高于扔掉 1 个冰淇淋过期牛奶的成本(假设我们有希望获利)。因此，我们会倾向于过量储存，例如，比模型预测的多储存 20%的原料。这将大大降低库存中断的频率和成本，代价是不得不扔掉几瓶过期的牛奶。

优化这 20%的规则，属于[规定性分析](https://en.wikipedia.org/wiki/Prescriptive_analytics)的范畴。使用训练集，我们可以调整这一规则，直到模型中误差的平均估计真实成本达到最低。

![](img/21fe7c4e1f84e572fc94447d2bfd6258.png)

由[安东尼·达·克鲁斯](https://unsplash.com/@akhu?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

## 价值梯度法

既然我们已经估算了模型准确性的真实成本，我们就知道我们在模型上投资的时间值多少了。随着每一次迭代，我们从先前版本的成本中减去真实世界的成本，以计算出我们额外努力所增加的价值。从那里，我们可以推断出一个投资回报窗口。

例如，您的验证集可能包含 1，000 行，并且您的最新模型比前一次迭代节省了 40 美元。如果您预计每年收集 100，000 个数据点，那么您可以将附加值乘以 100 来获得年增长率。因此，你为生产该模型的最新版本而投入的工作每年可获得 4000 美元的回报。

将此与我们的时间成本相比较，我们可以获得预期的投资回报。例如，如果上述改进需要一个每天收入 400 美元的人工作一天，那么它很快就收回了成本。

然而，随着收益递减规律侵蚀我们的改进速度，我们的利润将开始下降。当它接近零时，是时候接受我们所拥有的，并进入我们项目的下一个阶段。

当然，这是一门不精确的科学。它假设对我们模型的改进将以平稳和可预测的方式发生，并且未来的收益将小于以前的改进。无论何时你收工，都有可能会有重大突破。

但是，从商业角度关注你在一个模型上投资的时间总是一个好主意，通过降低成本和腾出时间花在最重要的事情上，你可以做更有价值的工作。

*即将推出:一个 Python 模块，它获取预测、实际值和成本函数，并输出任何模型的预期 ROI 允许您将上述决策集成到您的模型调整过程中。*