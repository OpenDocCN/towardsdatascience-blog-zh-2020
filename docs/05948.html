<html>
<head>
<title>How to Create Reusable Command-Line</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建可重用的命令行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-reusable-command-line-f9a2bb356bc9?source=collection_archive---------41-----------------------#2020-05-15">https://towardsdatascience.com/how-to-create-reusable-command-line-f9a2bb356bc9?source=collection_archive---------41-----------------------#2020-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d9e1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你能把你的多个有用的命令行打包成一个文件以便快速执行吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b10b8244efe9e71b30ecfbbd1c675a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fRqfc2K-c5NkLbDd"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jl1232006?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Joshua Lam </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><h1 id="53b5" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="d2bb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">作为一个数据科学家，知道一些基本的有用的命令行是很方便的。您可能有一些喜欢的命令行命令，您会一遍又一遍地使用它们。</p><p id="5635" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">例如，您想要创建一个<a class="ae ky" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank"> Django </a>应用程序，这个库使得用Python创建web应用程序变得容易。要为Django应用程序设置文件夹和环境，您需要执行以下操作:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a52a" class="mx la it mt b gy my mz l na nb"># Create the folder for the app<br/>mkdir newapp</span><span id="011b" class="mx la it mt b gy nc mz l na nb"># Go to the directory<br/>cd newapp</span><span id="d164" class="mx la it mt b gy nc mz l na nb"># Create the virtual environment<br/>python -m venv venv</span><span id="6b7f" class="mx la it mt b gy nc mz l na nb"># Activate the environment<br/>source venv/bin/activate</span><span id="ed30" class="mx la it mt b gy nc mz l na nb"># Upgrade pip and install Django<br/>pip install --upgrade pip<br/>pip install Django</span><span id="fb79" class="mx la it mt b gy nc mz l na nb"># Create Django project<br/>django-admin startproject myapp</span><span id="0f53" class="mx la it mt b gy nc mz l na nb"># Make the structure cleaner<br/>mv myapp/manage.py ./<br/>mv myapp/myapp/* myapp<br/>rm -r myapp/myapp/</span></pre><p id="30f4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">既然我们想在将来使用相同的命令行命令来创建一个新的应用程序，如果我们能够<strong class="lt iu">将这些命令保存在某个地方，然后在我们想创建一个新的应用程序</strong>时使用它，是不是很好？</p><p id="2ddc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">像这样简单的事情</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2563" class="mx la it mt b gy my mz l na nb">./createapp.sh</span></pre><p id="cba0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">而设置一个app的每一个基本步骤都要照顾到？本文将向您展示如何使您的命令更加可重用和更快地执行。</p><h1 id="5621" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">可重用的命令行</h1><p id="2951" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，我们用<code class="fe nd ne nf mt b">touch</code>创建一个文件，并使用。sh表示shell脚本。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a050" class="mx la it mt b gy my mz l na nb">touch createapp.sh</span></pre><p id="b98c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<code class="fe nd ne nf mt b">nano</code>编辑文件</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="76cb" class="mx la it mt b gy my mz l na nb">nano createapp.sh</span></pre><p id="cf6f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们应该能够在这里插入所有的命令</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8908d1aad8c9b976fe291790b67f59dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*qEIRvlni6UKPg8CO2qQiLQ.png"/></div></figure><p id="2489" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">用Control + X关闭文件(或用Mac用Command + X)。键入y保存更改。使用回车键退出文件。</p><p id="c638" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在用Bash运行这个文件</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8263" class="mx la it mt b gy my mz l na nb">bash createapp.sh</span></pre><p id="0126" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">app应该设置好了，随时可以使用！但是为什么要bash呢？Bash是shell，即命令语言解释器。有没有办法不用bash直接运行文件？试着跑</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="b035" class="mx la it mt b gy my mz l na nb">./createapp.sh</span></pre><p id="4579" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们会得到这个错误:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="94ac" class="mx la it mt b gy my mz l na nb">bash: ./createapp.sh: Permission denied</span></pre><p id="cf86" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里发生了什么事？使用以下命令查看该文件的权限</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1812" class="mx la it mt b gy my mz l na nb">ls -l createapp.sh</span></pre><p id="e20e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们会看到类似这样的东西</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2554" class="mx la it mt b gy my mz l na nb">-rw-r--r-- 1 khuyentran khuyentran 229 May 14 22:58 createapp.sh</span></pre><p id="f806" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果我们看一下第一个<code class="fe nd ne nf mt b">— ,</code>后面的字符<code class="fe nd ne nf mt b">rw</code>，我们可以看到拥有该文件的用户可以读<code class="fe nd ne nf mt b">r</code>和写<code class="fe nd ne nf mt b">w</code>，但是不能执行<code class="fe nd ne nf mt b">x.</code>，所以我们只需要使用</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9990" class="mx la it mt b gy my mz l na nb">chmod u+x createapp.sh</span></pre><p id="5b77" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe nd ne nf mt b">u</code>代表用户，<code class="fe nd ne nf mt b">+</code>代表添加权限，<code class="fe nd ne nf mt b">x</code>代表执行。现在我们应该可以不用bash来运行我们的文件了！</p><h1 id="6f20" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">轻轻一点，让你的命令变得可携带</h1><p id="6d0f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们发现这个文件非常方便，所以我们决定与我们的朋友分享或在另一台计算机上运行它。我们可能需要意识到环境中可能发生的变化。</p><p id="19f7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">默认情况下，我们使用的Bash shell在这个目录<em class="nh"> /bin/sh </em>中执行。其他shells可能有不同的缺省值。所以为了确保这个文件总是正常工作(当在另一台计算机上使用时)，我们应该添加这个添加到我们的<code class="fe nd ne nf mt b">createapp.sh</code>文件的开头</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="219c" class="mx la it mt b gy my mz l na nb">#!/usr/bin/env bash</span></pre><h1 id="98bd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">但是如果我们想要另一个变量呢？</h1><p id="e1e2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经成功地用bash文件创建了一个应用程序。但是如果我们想为我们的下一个应用程序取另一个名字呢？我们可以编辑文件或者使用更快的方法，在我们的脚本中将<strong class="lt iu">名称作为变量</strong>！</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9c55" class="mx la it mt b gy my mz l na nb">#!/usr/bin/env bash<br/>APPNAME="$1"<br/>mkdir $APPNAME<br/>cd $APPNAME<br/>python -m venv venv<br/>source venv/bin/activate<br/>pip install --upgrade pip<br/>pip install Django<br/>django-admin startproject $APPNAME<br/>mv $APPNAME/manage.py ./<br/>mv $APPNAME/$APPNAME/* $APPNAME<br/>rm -r $APPNAME/$APPNAME/</span></pre><p id="53bb" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">用一个变量替换<code class="fe nd ne nf mt b">newapp</code>，在本例中是APPNAME。使用<code class="fe nd ne nf mt b">$1</code>指示在运行脚本时获取第一个参数。将每个<code class="fe nd ne nf mt b">appname</code>替换为<code class="fe nd ne nf mt b">$APPNAME.</code></p><p id="9d82" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在快跑</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="c2e9" class="mx la it mt b gy my mz l na nb">./createapp.sh someapp</span></pre><p id="7cb3" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">另一个新名字的应用程序被创建了！</p><h1 id="cacd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">最后一步:从任何地方运行你的脚本</h1><p id="7e6d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们已经成功地从当前目录执行了我们的应用程序。如果我们可以从计算机上的任何目录执行这个脚本，不是更方便吗？</p><p id="d6b9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">为了使我们的文件能够从任何地方运行，我们将把这个文件添加到PATH中，PATH是一个环境变量，它告诉shell在哪个目录中搜索可执行文件。</p><p id="0440" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在PATH下找到一个目录列表。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9d9d" class="mx la it mt b gy my mz l na nb">echo $PATH | tr ":" "\n"</span></pre><p id="6a09" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">选择一个目录，并将文件移动到该目录中。假设我选择/usr/local/bin作为保存所有工具的目录</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9501" class="mx la it mt b gy my mz l na nb">sudo mv createapp.sh /usr/local/bin/</span></pre><p id="0411" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">就是这样！将来，您可以在计算机的任何目录中使用</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="55f1" class="mx la it mt b gy my mz l na nb">createapp.sh someapp</span></pre><p id="2567" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">而不需要记住每一步。</p><h1 id="eb5e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="e692" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">恭喜你！您已经学习了如何使您的命令行可重用。如果您尚未使用此工具，您应该考虑将此工具添加到您的工作流程中。你工作流程中的一个小小的改变可能会在未来增加大量的时间。</p><p id="b18f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我喜欢写一些基本的数据科学概念，并尝试不同的算法和数据科学工具。你可以在<a class="ae ky" href="https://www.linkedin.com/in/khuyen-tran-1401/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>和<a class="ae ky" href="https://twitter.com/KhuyenTran16" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我。</p><p id="9e11" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你想查看我写的所有文章的代码，请点击这里。在Medium上关注我，了解我的最新数据科学文章，例如:</p><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/achieve-reproducibility-in-machine-learning-with-these-two-tools-7bb20609cbb8"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">使用这两个工具在您的机器学习项目中实现可重复性</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">你能打包你的机器学习模型，并根据你的需要挑选一个最好的吗？</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ks nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/how-to-fine-tune-your-machine-learning-models-with-ease-8ca62d1217b1"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何有效地微调你的机器学习模型</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">发现为您的ML模型寻找最佳参数非常耗时？用这三招</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz ks nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/how-to-organize-your-data-science-articles-with-github-b5b9427dad37"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何用Github组织你的数据科学文章</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">被新信息淹没？现在，您可以轻松地跟踪文章并为其创建自定义注释</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="ob l nw nx ny nu nz ks nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/how-to-share-your-jupyter-notebook-in-3-lines-of-code-with-ngrok-bfe1495a9c0c"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何用Ngrok用3行代码分享你的Jupyter笔记本</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">想象一下，让你的朋友在远程机器上使用你的本地Jupyter笔记本</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="oc l nw nx ny nu nz ks nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener follow" target="_blank" href="/how-to-monitor-and-log-your-machine-learning-experiment-remotely-with-hyperdash-aa7106b15509"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何使用HyperDash远程监控和记录您的机器学习实验</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">培训需要很长时间才能完成，但你需要去洗手间休息一下…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.com</p></div></div><div class="nu l"><div class="od l nw nx ny nu nz ks nl"/></div></div></a></div></div></div>    
</body>
</html>