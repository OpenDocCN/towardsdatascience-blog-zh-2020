<html>
<head>
<title>Everything You Need to Know About “loc” and “iloc” of Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于熊猫的“loc”和“iloc”你需要知道的一切</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/everything-you-need-to-know-about-loc-and-iloc-of-pandas-79b386cac776?source=collection_archive---------25-----------------------#2020-05-18">https://towardsdatascience.com/everything-you-need-to-know-about-loc-and-iloc-of-pandas-79b386cac776?source=collection_archive---------25-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9baa" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">明确区分 loc 和 iloc</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/415c658cbb53a4e3a6d3d3d86ad2ff50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_Kzu6Abafh3_z478VtuOQ.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">Javier Allegue Barros 在<a class="ae ky" href="https://unsplash.com/s/photos/choice?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3a3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas 是使用最广泛的数据分析和操作库，它提供了许多灵活方便的功能，可以简化和加快数据分析过程。在这篇文章中，我将介绍两个重要的工具，它们用于根据指定的行和列从数据帧中选择数据。让我们先介绍它们，并通过不同种类的例子来建立一个全面的理解。</p><ul class=""><li id="a055" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">位置:按行和列的标签选择</li><li id="93ba" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">iloc:按行和列的位置选择</li></ul><p id="2a39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着我们对例子的研究，这种区别变得很明显。一如既往，我们从进口熊猫开始。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="3d55" class="mo mp it mk b gy mq mr l ms mt">import pandas as pd<br/>import numpy as np</span></pre><p id="5200" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将在 kaggle 上的电信客户流失数据集上做例子。让我们将数据集读入熊猫数据帧。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="d870" class="mo mp it mk b gy mq mr l ms mt">df = pd.read_csv("Projects/churn_prediction/Telco-Customer-Churn.csv")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/3d639aa0308732f58d049c16bb90e3ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5EbA2h4MI49gy532bbmZlQ.png"/></div></div></figure><p id="b56a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集包括 21 列，但我们只能看到适合屏幕的列。</p><p id="443c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> loc </strong>用于通过标签选择数据。列的标签是列名。例如，customerID、gender、SeniorCitizen 是前三个列名(即标签)。我们需要小心行标签。由于我们没有分配任何特定的索引，pandas 默认创建整数索引。因此，行标签是从 0 开始向上的整数。与<strong class="lb iu"> iloc </strong>一起使用的行位置也是从 0 开始的整数。我们将通过例子来看熊猫如何用 loc 和 iloc 不同地处理行。</p><ul class=""><li id="dea4" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择行“2”和列“性别”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/7655371c04876fb047071744513ec52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*t3wMnRjMrMAkj8qgxO0YlQ.png"/></div></figure><p id="3424" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它返回行“2”的“性别”列中的值</p><ul class=""><li id="501f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择最多“5”的行标签以及“性别”和“伴侣”列</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/3c1dcfae6d933a3ef74505f2f091df4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*fkkNatchLyzlNiNFist_sg.png"/></div></figure><ul class=""><li id="a7cc" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择行标签“2”、“4”、“5”和“InternetService”列</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/049822da1b73a161d71141428d795ab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*n1qbUqxpUeRCossOL8Ua6w.png"/></div></figure><blockquote class="my mz na"><p id="a601" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">我们还可以过滤数据帧，然后应用 loc 或 iloc</p></blockquote><ul class=""><li id="7490" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择带有合作伙伴的客户的行标签“10”、“InternetService”和“PhoneService”列(Partner == 'Yes ')</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/2fb0954823b005c5b2e16bbacde109d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*H2Vj7lcvLzCg-MLE8iVxqQ.png"/></div></figure><p id="22d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们过滤数据帧，但不改变索引。因此，所得数据帧的索引仅包含未被省略的行的标签。因此，当使用 loc[:10]时，我们可以选择标签达到“10”的行。o 另一方面，如果我们在应用过滤器后使用 iloc[:10]，我们会得到 10 行，因为<strong class="lb iu"> iloc 按位置</strong>选择，而不考虑标签。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8be029e684caef8b7eeffccc94425593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*sQ0Uog1REEEhw1ZHQRpGbw.png"/></div></figure><p id="321d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所注意到的，我们还需要改变选择列的方式。我们还需要将列的位置传递给 iloc。</p><ul class=""><li id="51b7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择前 5 行和前 5 列</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/8d0b3c94871d782c579513610a01f386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*rVRft9Y1_21LQbhXsmA-vA.png"/></div></figure><ul class=""><li id="d4a2" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择最后 5 行和最后 5 列。</li></ul><blockquote class="my mz na"><p id="5353" class="kz la nb lb b lc ld ju le lf lg jx lh nc lj lk ll nd ln lo lp ne lr ls lt lu im bi translated">这些位置从 0 开始。如果我们从末尾开始定位，我们从-1 开始，所以我们使用“-5:”来选择最后五个。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/6ff4b486bd1ec16d39e9ae7bc98d3647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBnOUO7Iq7fY5JmUMxZ7nQ.png"/></div></div></figure><p id="cb7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以应用 lambda 函数。</p><ul class=""><li id="d415" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择第三行到第 15 行，仅显示“合作伙伴”和“互联网服务”列。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/7c931f7478f4ac62981fb2f6c9388b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N1nfYHCWDl_-DvySm3t23Q.png"/></div></div></figure><p id="d9c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以在两者之间选择位置或标签。</p><ul class=""><li id="a05b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">选择 20 到 25 之间的行位置，4 到 6 之间的列位置。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/a485bf63c6d55be1c4c421067b65cd92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*COu9mY1Uh8UXCIZUp8b3kg.png"/></div></figure><p id="9fdc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您试图将标签传递给 iloc，Pandas 会友好地返回如下信息反馈:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="da2a" class="mo mp it mk b gy mq mr l ms mt"><strong class="mk iu">ValueError</strong>: Location based indexing can only have [integer, integer slice (START point is INCLUDED, END point is EXCLUDED), listlike of integers, boolean array] types</span></pre><p id="9df4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们将位置传递给 loc 时，会返回类似的错误。</p></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="4a5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望 loc 和 iloc 之间的区别现在已经非常清楚了。要掌握知识，真正“学”，我建议大量练习。只是尝试不同的例子，你会在很短的时间内习惯它们。</p><p id="8f93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读。如果您有任何反馈，请告诉我。</p></div></div>    
</body>
</html>