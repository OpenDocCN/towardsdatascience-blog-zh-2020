<html>
<head>
<title>Convert Your Speech to Text using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python将您的语音转换为文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/convert-your-speech-to-text-using-python-1cf3eccfa922?source=collection_archive---------24-----------------------#2020-05-22">https://towardsdatascience.com/convert-your-speech-to-text-using-python-1cf3eccfa922?source=collection_archive---------24-----------------------#2020-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="473c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用麦克风将您的语音实时转换为文本</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7d5d5b5e39a275658cfaa5cdc1e9f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PAp9ypBRoeJRi71lzuOT1g.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">汤米·洛佩兹从<a class="ae ky" href="https://www.pexels.com/photo/greyscale-photography-of-condenser-microphone-765139/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄的照片</p></figure><p id="ec83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将向您展示如何使用Python将您的演讲转换成文本文档。在编程的话，这个过程基本上叫做语音识别。这是我们日常生活中常用的东西。例如，当你用声音给朋友发信息时。语音到文本的另一个很好的例子是添加一个正在说话的人的字幕。你在网飞节目或YouTube视频上看到的大多数字幕都是由使用人工智能的机器制作的。你能想象一群人整天工作只是为了给你最喜欢的节目添加字幕吗？我知道这很难想象。电脑编程的力量来了。我仍然记得我学习for loops的那一天，感觉我找到了一种在现实世界中达到无穷大的方法。不管怎样，介绍够了，让我们开始工作吧。</p><p id="aa2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如你从标题中可以理解的，在这篇文章中，我们将创建一个python程序，将我们的演讲转换成文本，并导出为文本文档。如果你是一个喜欢记笔记的人，这个程序将帮助你通过记录你自己来节省时间，并且也有你记录的打印版本。这就像在一场比赛中赢得两个奖杯🙂</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="5a6a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">让我们开始编码吧！</h1><h2 id="08a7" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">导入库</h2><p id="5b1d" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">我们将使用SpeechRecognition模块，如果您还没有，让我们快速安装它。不用担心，在Python中安装一个模块是超级容易的。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="6c94" class="mu md it nm b gy nq nr l ns nt">pip install SpeechRecognition</span></pre><p id="463d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，就是它。SpeechRecognition模块支持多种识别API，Google Speech API就是其中之一。你可以从<a class="ae ky" href="https://pypi.org/project/SpeechRecognition/" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于这个模块的信息。我们将在代码中使用Google的识别器。现在，在安装模块完成后，我们可以将它导入到我们的程序中。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="c906" class="mu md it nm b gy nq nr l ns nt">import speech_recognition as sr</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="7308" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">创建识别器</h2><p id="cc4a" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">在这一步中，我们将创建一个识别器实例。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="ea9d" class="mu md it nm b gy nq nr l ns nt">r = sr.Recognizer()</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="e99c" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">定义您的麦克风</h2><p id="45da" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">在定义麦克风实例之前，我们将选择输入设备。可能有多个输入设备插入您的计算机，我们需要选择我们打算使用哪一个。你知道机器是假人，你必须准确地告诉他们该做什么！使用下面的代码，你将能够看到你的输入设备。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7520" class="mu md it nm b gy nq nr l ns nt">print(sr.Microphone.list_microphone_names())</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/45dc5dcdce4a323d2013dd25fd94fbff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BJ74HALPIRcWxh-2"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">麦克风名称列表</p></figure><p id="1da4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里你可以看到我检查输入设备的结果。我建议您在定义麦克风之前运行这个脚本，因为您可能会得到不同的结果。该脚本返回一个带有输入名称的数组列表，对我来说我想使用“内置麦克风”，所以数组列表的第一个元素。定义麦克风代码将如下所示:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="085b" class="mu md it nm b gy nq nr l ns nt">mic = sr.Microphone(device_index=0)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="25c7" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">识别语音</h2><p id="2bfa" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">如前所述，我们将使用<em class="nv"> recognize_google </em>方法，这是我们在google的朋友创建的语音识别模型。多亏了他们！</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="4c36" class="mu md it nm b gy nq nr l ns nt">with mic as source: <br/>  audio = r.listen(source) </span><span id="3cc4" class="mu md it nm b gy nw nr l ns nt">result = r.recognize_google(audio)</span></pre><p id="2d97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想在将结果导出到文本文档之前检查结果，可以在代码中添加下面一行。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="cbdb" class="mu md it nm b gy nq nr l ns nt">print(result)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="11e4" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">最后一步:导出结果</h2><p id="fc04" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">在这一步中，我们将创建一个文本文档并导出我们在上一步中得到的结果。您将看到“导出过程完成！”这个过程完成后，在终端窗口中添加一行。</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="7e78" class="mu md it nm b gy nq nr l ns nt">with open('my_result.txt',mode ='w') as file: <br/>   file.write("Recognized text:") <br/>   file.write("\n") <br/>   file.write(result) </span><span id="538b" class="mu md it nm b gy nw nr l ns nt">print("Exporting process completed!")</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="32fa" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">最终代码</h1><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="dd9b" class="mu md it nm b gy nq nr l ns nt"># import the module <br/>import speech_recognition as sr </span><span id="2fd7" class="mu md it nm b gy nw nr l ns nt"># create the recognizer <br/>r = sr.Recognizer() </span><span id="9226" class="mu md it nm b gy nw nr l ns nt"># define the microphone <br/>mic = sr.Microphone(device_index=0) </span><span id="0ca2" class="mu md it nm b gy nw nr l ns nt"># record your speech <br/>with mic as source: <br/>   audio = r.listen(source) </span><span id="2e68" class="mu md it nm b gy nw nr l ns nt"># speech recognition <br/>result = r.recognize_google(audio)</span><span id="011a" class="mu md it nm b gy nw nr l ns nt"># export the result <br/>with open('my_result.txt',mode ='w') as file: <br/>   file.write("Recognized text:") <br/>   file.write("\n") <br/>   file.write(result) </span><span id="5795" class="mu md it nm b gy nw nr l ns nt">print("Exporting process completed!")</span></pre><p id="39b7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">恭喜我的朋友！您已经创建了一个将您的演讲转换为文本并将其导出为文本文档的程序。希望你喜欢读这篇文章，并且今天学到了一些新的东西。从事像这样有趣的编程项目会帮助你提高编码技能。</p><blockquote class="nx ny nz"><p id="ac86" class="kz la nv lb b lc ld ju le lf lg jx lh oa lj lk ll ob ln lo lp oc lr ls lt lu im bi translated">关注我的<a class="ae ky" href="https://medium.com/@lifexplorer" rel="noopener">博客</a>和<a class="ae ky" href="https://towardsdatascience.com/" rel="noopener" target="_blank">走向数据科学</a>以获得灵感。</p></blockquote></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="fbdf" class="mu md it bd me mv mw dn mi mx my dp mm li mz na mo lm nb nc mq lq nd ne ms nf bi translated">您可能会感兴趣的另一个语音识别项目</h2><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/building-a-speech-recognizer-in-python-2dad733949b4"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">用Python构建语音识别器</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">使用谷歌云语音API将您的音频文件转换为文本</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div></div></div>    
</body>
</html>