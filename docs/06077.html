<html>
<head>
<title>Serverless machine learning architecture on leading cloud platforms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">领先云平台上的无服务器机器学习架构</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/serverless-machine-learning-architecture-on-leading-cloud-platforms-c630dee8df15?source=collection_archive---------47-----------------------#2020-05-17">https://towardsdatascience.com/serverless-machine-learning-architecture-on-leading-cloud-platforms-c630dee8df15?source=collection_archive---------47-----------------------#2020-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="222d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">亚马逊网络服务(AWS)、谷歌云平台(GCP)和微软Azure上的机器学习架构</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b365eaa50cc1f15c40e47370b0b6fdc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXXg8kcCujk7FMuIhwYdbw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">云平台GCP、AWS、Azure</p></figure><p id="93af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">云平台本身有各种各样的服务，这些服务可以混合和匹配，以满足任何具有分配预算的业务案例的需求。在这里，我将挑选一个<a class="ae lr" href="https://cloud.google.com/solutions/architecture-of-a-serverless-ml-model" rel="noopener ugc nofollow" target="_blank">这里提到的通用示例</a>，并讨论上述云平台上的架构。</p><p id="84f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为架构是无服务器的，所以有一堆功能可以确保事物在服务之间向前移动。</p><h1 id="c2dc" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated"><strong class="ak">要求:</strong></h1><p id="c901" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">这项业务有源源不断的支持票。支持代理从客户那里获得的信息很少，因此他们会花更多的时间来了解客户的需求。</p><p id="43f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在代理开始处理问题之前，他们需要完成以下工作:</p><ul class=""><li id="d0dc" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">理解支持票的上下文。</li><li id="a186" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">确定问题对客户的严重程度。</li><li id="839a" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">决定使用多少资源来解决问题。</li></ul><p id="3c2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通常，与客户的几次来回交流会获得更多的细节。如果您添加基于票证数据的自动化智能，您可以帮助代理在处理支持请求时做出战略性决策。</p><p id="9769" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通常，用户在填写包含几个字段的表单后，会记录一个票据。对于这个用例，假设没有一个支持票已经被机器学习丰富。另外，假设当前的支持系统已经处理票据几个月了。</p><p id="f078" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要开始丰富支持票证，您必须训练一个使用预先存在的标签数据的ML模型。在这种情况下，训练数据集包含在已关闭的支持票证中找到的历史数据。</p><h1 id="4a21" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">谷歌云架构</h1><ol class=""><li id="1b8c" class="mp mq iq kx b ky mk lb ml le nd li ne lm nf lq ng mv mw mx bi translated">基于Firebase的数据库更新创建一个云函数事件。</li><li id="3edc" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq ng mv mw mx bi translated">客户端向Firebase数据库写一张票。</li><li id="e4f6" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq ng mv mw mx bi translated">云函数触发器执行一些主要任务:</li></ol><ul class=""><li id="b38a" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">使用部署的机器学习算法运行预测。</li><li id="24b3" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">用丰富的数据更新Firebase实时数据库。</li><li id="b56b" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">使用整合的数据在您的帮助台系统中创建票证。</li></ul><p id="60c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">无服务器技术和基于事件的触发</strong></p><ul class=""><li id="8c83" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">“无服务器技术”可以有多种定义方式，但大多数描述都包含以下假设:</li><li id="2381" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">服务器应该是一个遥远的概念，对客户来说是看不见的。</li><li id="10e9" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">动作通常由事件触发的功能来执行。</li><li id="798e" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">函数运行的任务通常是短暂的(持续几秒或几分钟)。</li><li id="fef3" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">大多数时候，函数只有一个目的。</li></ul><p id="12a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Firebase和云功能相结合，通过最大限度地减少基础架构管理来简化开发运维。操作流程如下:</p><ul class=""><li id="f91d" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">基于Firebase的数据库更新创建一个云函数事件。</li><li id="a65b" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">客户端向Firebase数据库写一张票。</li><li id="5dab" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">云函数触发器执行一些主要任务:</li><li id="26bf" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">使用部署的机器学习算法运行预测。</li><li id="c8db" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">用丰富的数据更新Firebase实时数据库。</li><li id="004c" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">使用整合的数据在您的帮助台系统中创建票证。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/3f123826a36c1df7e2950895d70b0cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*Rhj90l0UpuTjyCr61M8IQw.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae lr" href="https://cloud.google.com/solutions/architecture-of-a-serverless-ml-model" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/solutions/architecture-of-a-a-server less-ml-model</a></p></figure><p id="6a13" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Firebase本身是一个大规模的服务，并且该架构使用了给定的上下文:</p><ul class=""><li id="aaf5" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">Firebase是一个客户端可以更新的实时数据库，它向其他订阅的客户端显示实时更新。</li><li id="5236" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">Firebase可以使用<a class="ae lr" href="https://cloud.google.com/functions" rel="noopener ugc nofollow" target="_blank">云功能</a>来调用外部API，比如您的帮助台平台提供的API。</li><li id="97c5" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">Firebase可以在桌面和移动平台上工作，可以用各种语言开发。当Firebase遇到不可靠的互联网连接时，它可以在本地缓存数据。</li></ul><h1 id="3d19" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">AWS云架构</h1><ul class=""><li id="70e0" class="mp mq iq kx b ky mk lb ml le nd li ne lm nf lq mu mv mw mx bi translated">亚马逊S3的结构化数据湖，用于保存原始数据、建模数据、增强数据和转换数据。</li><li id="6e46" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">该功能的暂存桶设计和转换的数据将被纳入Amazon SageMaker。</li><li id="0444" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">AWS Lambda上托管的数据转换代码，用于为消费和ML模型培训准备原始数据，并转换数据输入和输出。</li><li id="4817" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">Amazon SageMaker automation通过Lambda函数为新模型构建、管理和创建REST端点，基于一个时间表或由数据湖中的数据变化触发。</li><li id="924b" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">API网关端点托管公共API，使开发人员能够获得其应用程序的历史数据或预测。</li><li id="1542" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">Amazon Kinesis数据流，支持在接收、建模、增强和转换阶段实时处理新数据。</li><li id="c6c4" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">亚马逊Kinesis Data Firehose将模型和增强阶段的结果传送到亚马逊S3进行持久存储。</li><li id="cfed" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">AWS IAM在每个处理组件上执行最小特权原则。IAM角色和策略只限制对必要资源的访问。</li><li id="6fcd" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">一个为每日亚马逊弹性计算云(Amazon EC2)现货定价构建和更新预测模型的演示场景。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b762fafd2137fae784d268d3a1073a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*YeKuQN6O36yKrcRhoOYrMg.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae lr" href="https://d1.awsstatic.com/partner-network/QuickStart/datasheets/pariveda-data-lake-sagemaker-on-aws-architecture.50175e74b2b654a12ab2cbe933f47a3a018f0d12.png" rel="noopener ugc nofollow" target="_blank">https://D1 . AWS static . com/partner-network/quick start/datasheets/pari veda-data-lake-sage maker-on-AWS-architecture . 50175 e 74 B2 b 654 a 12 a B2 CBE 933 f 47 a3 a 018 f0d 12 . png</a></p></figure><h1 id="b81c" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">蔚蓝建筑</h1><p id="0fba" class="pw-post-body-paragraph kv kw iq kx b ky mk jr la lb ml ju ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">该架构由以下组件组成:</p><ul class=""><li id="e1a3" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/devops/pipelines/get-started/index?view=azure-devops" rel="noopener ugc nofollow" target="_blank">天蓝色管道</a>。这个构建和测试系统基于<a class="ae lr" href="https://azure.microsoft.com/services/devops/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps </a>，用于构建和发布管道。Azure Pipelines将这些管道分成称为任务的逻辑步骤。例如，<a class="ae lr" href="https://docs.microsoft.com/azure/devops/pipelines/tasks/deploy/azure-cli?view=azure-devops" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a>任务使得使用Azure资源变得更加容易。</li><li id="10a1" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/machine-learning/service/overview-what-is-azure-ml" rel="noopener ugc nofollow" target="_blank"> Azure机器学习</a>。Azure Machine Learning是一个云服务，用于大规模培训、评分、部署和管理机器学习模型。这个架构使用用于Python 3 的Azure机器学习<a class="ae lr" href="https://docs.microsoft.com/azure/machine-learning/service/quickstart-create-workspace-with-python" rel="noopener ugc nofollow" target="_blank"> SDK来创建工作空间、计算资源、机器学习管道和评分图像。Azure机器学习</a><a class="ae lr" href="https://docs.microsoft.com/azure/machine-learning/service/concept-workspace" rel="noopener ugc nofollow" target="_blank">工作区</a>提供了实验、训练和部署机器学习模型的空间。</li><li id="2068" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/machine-learning/service/how-to-set-up-training-targets" rel="noopener ugc nofollow" target="_blank">Azure Machine Learning Compute</a>是一个按需虚拟机集群，具有自动扩展和GPU及CPU节点选项。训练作业在该集群上执行。</li><li id="8f72" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/machine-learning/service/concept-ml-pipelines" rel="noopener ugc nofollow" target="_blank"> Azure机器学习管道</a>提供可重用的机器学习工作流，可以跨场景重用。对于这个用例，训练、模型评估、模型注册和图像创建发生在这些管道中的不同步骤中。管道在构建阶段结束时发布或更新，并在新数据到达时触发。</li><li id="108a" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/storage/blobs/storage-blobs-overview" rel="noopener ugc nofollow" target="_blank"> Azure Blob存储</a>。Blob容器用于存储来自评分服务的日志。在这种情况下，将收集输入数据和模型预测。经过一些转换后，这些日志可以用于模型再训练。</li><li id="7e03" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/container-registry/container-registry-intro" rel="noopener ugc nofollow" target="_blank"> Azure容器注册表</a>。计分Python脚本打包为Docker映像，并在注册表中进行版本控制。</li><li id="5c56" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/container-instances/container-instances-overview" rel="noopener ugc nofollow" target="_blank"> Azure容器实例</a>。作为发布管道的一部分，通过将评分web服务映像部署到容器实例来模拟QA和暂存环境，这提供了一种简单、无服务器的方式来运行容器。</li><li id="5d46" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/aks/intro-kubernetes" rel="noopener ugc nofollow" target="_blank">蔚蓝库伯内特服务</a>。一旦评分web服务映像在QA环境中经过全面测试，它就会被部署到受管Kubernetes集群上的生产环境中。</li><li id="2858" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated"><a class="ae lr" href="https://docs.microsoft.com/azure/azure-monitor/app/app-insights-overview" rel="noopener ugc nofollow" target="_blank"> Azure应用洞察</a>。该监控服务用于检测性能异常。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/b0c942086561a848c2115a84e30fba9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*eWl3W2_24a18lRzYXFq7-g.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae lr" href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/ai/mlops-python" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/architecture/reference-architectures/ai/m lops-python</a></p></figure><p id="327a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">希望这篇文章能帮助我们从高层次上了解在给定的业务案例中哪些服务在起作用。必须记住，这还不是一成不变的，因为有几个假设，最重要的是没有考虑预算限制。</p><h1 id="a6af" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">参考资料和来源:</h1><div class="nj nk gp gr nl nm"><a href="https://cloud.google.com/solutions/architecture-of-a-serverless-ml-model" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">无服务器机器学习模型的架构|解决方案</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">这一系列文章探索了无服务器机器学习(ML)模型的架构，以丰富支持票…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">cloud.google.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/ai/mlops-python" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">使用Azure机器学习的Python模型的mlop-Azure参考架构</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">该参考体系结构展示了如何实施持续集成(CI)、持续交付(CD)和…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">docs.microsoft.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa kp nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://aws.amazon.com/quickstart/architecture/predictive-data-science-sagemaker-and-data-lake/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">亚马逊SageMaker的预测数据科学和AWS上的数据湖-快速入门</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">存储和转换数据以构建预测性和规范性应用程序这一快速入门构建了一个数据湖…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">aws.amazon.com</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa kp nm"/></div></div></a></div></div></div>    
</body>
</html>