<html>
<head>
<title>List Comprehension in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的列表理解</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-list-comprehension-938ac36ad528?source=collection_archive---------56-----------------------#2020-05-10">https://towardsdatascience.com/python-list-comprehension-938ac36ad528?source=collection_archive---------56-----------------------#2020-05-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f24f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">列表理解简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/54ae288ea54bfbd0eca69142c34080c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sfil2w4pn9kdkbi4jYQe6Q.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/photos/UgA3Xvi3SkA" rel="noopener ugc nofollow" target="_blank">来源</a></p></figure><p id="73d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python提供了列表理解结构，使得定义列表、过滤列表、基于现有列表创建新列表等等变得容易。与传统的“for-loops”相比，list comprehension是用python创建列表的一种更简洁、可读性更强的替代方法。在这篇文章中，我们将讨论如何使用列表理解在python中创建列表。我们也将在每个例子中比较列表理解方法和使用传统的“for-loops”。</p><p id="b94a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们开始吧！</p><p id="6627" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，让我们考虑在“for-loop”中生成1-10的正整数列表的任务。让我们初始化一个名为“pos_list”的列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="361d" class="ma mb it lw b gy mc md l me mf">pos_list = []</span></pre><p id="b577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过在“for-loop”中迭代“range()”方法返回的生成器，我们可以将值追加到该列表中:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="58cd" class="ma mb it lw b gy mc md l me mf">for i in range(1, 11):<br/>    pos_list.append(i)</span></pre><p id="f5c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打印结果列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="61a7" class="ma mb it lw b gy mc md l me mf">print(pos_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/0451ef4d240a186766ad934436ef6161.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*SE5FDptgRhHtBUpL3Acvhg.png"/></div></figure><p id="e1e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很简单。现在假设我们想生成一个偶数整数的列表。我们可以添加一个条件来检查元素是否能被2整除，并仅在条件为真时追加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f89c" class="ma mb it lw b gy mc md l me mf">even_list = []<br/>for i in range(1, 11):<br/>    if i%2 == 0:<br/>        even_list.append(i)</span></pre><p id="e49b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打印结果:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="162e" class="ma mb it lw b gy mc md l me mf">print(even_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/2f52a3163f85d488cddeb7e77fd8a07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*70agIcjVUUHltZCo7Jy9sQ.png"/></div></figure><p id="2120" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然使用“for-loop”可以完成工作，但列表理解提供了一种更简单的方法，可以用更少的代码获得相同的结果。首先，让我们看看如何使用列表理解来生成正整数的原始列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8918" class="ma mb it lw b gy mc md l me mf">lc_pos_list = [i for i in range(1,11)]<br/>print(lc_pos_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/0451ef4d240a186766ad934436ef6161.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*SE5FDptgRhHtBUpL3Acvhg.png"/></div></figure><p id="7283" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将这与我们不得不使用“for-loop”的最初三行代码进行比较:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f101" class="ma mb it lw b gy mc md l me mf">for i in range(1, 11):<br/>    pos_list.append(i)<br/>print(pos_list)</span></pre><p id="f4a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们使用列表理解来生成偶数列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="2d0d" class="ma mb it lw b gy mc md l me mf">lc_even_list = [i for i in range(1,11) if i%2]<br/>print(lc_even_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/2f52a3163f85d488cddeb7e77fd8a07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/format:webp/1*70agIcjVUUHltZCo7Jy9sQ.png"/></div></figure><p id="a8ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，与使用“for-loops”的五行代码相比，这只使用了两行代码:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="de0c" class="ma mb it lw b gy mc md l me mf">even_list = []<br/>for i in range(1, 11):<br/>    if i%2 == 0:<br/>        even_list.append(i)<br/>print(even_list)</span></pre><p id="8f7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们也可以使用列表理解很容易地过滤列表。让我们考虑使用“for-loop”从正整数列表中过滤小于5的值的任务:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6c6b" class="ma mb it lw b gy mc md l me mf">pos_list_gt_5 = []<br/>for i in pos_list:<br/>    if i &gt;= 5:<br/>      pos_list_gt_5.append(i)<br/>print(pos_list_gt_5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/abc18f2a8c430697570a50df5e120b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*CZHSr_vaegGGDLQ31-L1Pw.png"/></div></figure><p id="d5c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用列表理解:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="b8c2" class="ma mb it lw b gy mc md l me mf">lc_pos_list_gt_5 = [i for i in pos_list if i &gt;= 5]<br/>print(lc_pos_list_gt_5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/abc18f2a8c430697570a50df5e120b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*CZHSr_vaegGGDLQ31-L1Pw.png"/></div></figure><p id="740f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，我们使用了更少的代码。接下来，让我们考虑使用列表理解来迭代多个列表的任务。假设我们有一个从1到10的整数列表，和另一个从20到30的整数列表:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3fdc" class="ma mb it lw b gy mc md l me mf">pos_list2 = []<br/>for i in range(20, 30):<br/>    pos_list2.append(i)<br/>print(pos_list)    <br/>print(pos_list2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/8acb2a24d952ad4e01131c7cfb57dded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*GQf_W-TbGLQRNzZjpMbUtg.png"/></div></figure><p id="5a28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们编写一个“for-loop ”,对两个列表和进行迭代，并将它们的元素的乘积追加到一个新列表中:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="fa06" class="ma mb it lw b gy mc md l me mf">multiply_list = []<br/>for i, j in zip(pos_list, pos_list2):<br/>        multiply_list.append(i*j)<br/>        <br/>print(multiply_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/45dde8aaef3755595269e407dc437e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*LtcqSWA9F56_04ZoB5lqEg.png"/></div></figure><p id="1535" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用列表理解来执行相同的操作:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="81cc" class="ma mb it lw b gy mc md l me mf">lc_multiply_list = [i*j for i,j in zip(pos_list, pos_list2)]<br/>print(lc_multiply_list)</span></pre><p id="ce21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们甚至可以应用条件。让我们将乘积小于200的元素的乘积相加:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="8638" class="ma mb it lw b gy mc md l me mf">lc_multiply_list_filter = [i*j for i,j in zip(pos_list, pos_list2) if i*j &lt; 200]<br/>print(lc_multiply_list_filter)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/351aeeb874c21578ec720ddcf5acfcb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*BW5-5qWZtKT4Z7XhN3hOsw.png"/></div></figure><p id="7985" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就讲到这里，但是我鼓励你自己去研究代码。</p><h1 id="d53e" class="mm mb it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">结论</h1><p id="bf07" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">总之，在这篇文章中，我们将讨论如何使用python中的列表理解来构造列表。我们表明，虽然我们可以使用“for-loops”完成相同的任务，但列表理解提供了一种更容易和更易读的方法来构建列表。我希望你觉得这篇文章有用/有趣。这篇文章中的代码可以在<a class="ae ky" href="https://github.com/spierre91/medium_code/blob/master/basic_python/list_comprehension.py" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。感谢您的阅读！</p></div></div>    
</body>
</html>