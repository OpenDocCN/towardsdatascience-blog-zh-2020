<html>
<head>
<title>Building and Deploying a Login System backend using Flask, SQLAlchemy and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Flask、SQLAlchemy和Heroku构建和部署登录系统后端</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-and-deploying-a-login-system-backend-using-flask-sqlalchemy-and-heroku-8b2aa6cc9ec3?source=collection_archive---------16-----------------------#2020-05-17">https://towardsdatascience.com/building-and-deploying-a-login-system-backend-using-flask-sqlalchemy-and-heroku-8b2aa6cc9ec3?source=collection_archive---------16-----------------------#2020-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="54d2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有了Heroku Postgres数据库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39228a19b27e34dee0f6979911f941f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ss1gUeTh6WowFARIM0esLg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</p></figure><p id="6317" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在几乎所有的网站都有登录系统，如果你是新用户，你可以注册，如果你是现有用户，你可以登录。如果您试图为您的应用程序从头开始构建这个系统，可能会有许多移动的部分。本文给出了为登录系统创建和部署REST API的逐步概述，但一般来说，它可以扩展到任何REST API。</p><p id="6a4e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">与本文相关的所有代码都可以在下面的repo中找到:</p><div class="lr ls gp gr lt lu"><a href="https://github.com/aakanksha-ns/flask-heroku-login" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">aakanksha-ns/flask-heroku-log in</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">用Flask编写的API使用Heroku Postgres数据库注册用户并登录帐户。部署在Heroku …</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi kp lu"/></div></div></a></div><h1 id="dc75" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated"><strong class="ak"> 1)创建一个Heroku账户并创建一个新的应用程序</strong></h1><p id="b299" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">你需要做的第一件事是<a class="ae ng" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank">在Heroku </a>上创建一个账户，如果你还没有的话。</p><p id="1a49" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">登录您的帐户，选择<code class="fe nh ni nj nk b">Create new app</code>选项创建一个新的Heroku应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/3112f9fe5798ccfab6454b3984dd39ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cmNm0jK3ySP06ahtLtEEew.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板-&gt;新建-&gt;创建新应用程序(按作者分类的图片)</p></figure><h1 id="4f62" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">2)将Heroku Postgres添加到应用程序</h1><p id="c5ff" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">现在您需要将Postgres添加到应用程序中。导航到您刚刚创建的应用程序页面，选择<code class="fe nh ni nj nk b">Configure Add-ons</code>选项，搜索<code class="fe nh ni nj nk b">Postgres</code>并提供它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/315532d8b8961d9cee4ae44fcb9612d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GIzoH8_rOVAgVJbR6bcTJw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">仪表板-&gt;“您的应用程序”-&gt;配置附加组件(图片由作者提供)</p></figure><h1 id="4db6" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">3)安装Heroku CLI、PostgreSQL和PopSQL</h1><h2 id="7364" class="nn mk iq bd ml no np dn mp nq nr dp mt le ns nt mv li nu nv mx lm nw nx mz ny bi translated">Heroku CLI</h2><p id="7419" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">为了能够从命令行与Heroku交互，您必须使用以下命令安装Heroku CLI(假设您已经安装了<a class="ae ng" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank"> Homebrew </a>):</p><p id="609d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nh ni nj nk b">$ brew tap heroku/brew &amp;&amp; brew install heroku</code></p><h2 id="af1a" class="nn mk iq bd ml no np dn mp nq nr dp mt le ns nt mv li nu nv mx lm nw nx mz ny bi translated">PostgreSQL和PopSQL</h2><p id="d368" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated"><strong class="kx ir">为什么我们需要它们:</strong>你可以从你的Flask应用程序中创建你的数据库表。然而，在我的实现中，我使用PostgreSQL在本地创建了数据库和表，并将其推送到Heroku，因为我发现与SQLAlachemy相比，使用普通的SQL编辑器(我使用了PopSQL)创建表更简单。我只使用Flask和SQLAlchemy向数据库添加元素或从中检索元素。</p><p id="274c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">安装Postgres </strong> : <code class="fe nh ni nj nk b">brew install postgres</code></p><p id="e8dc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">启动PostgreSQL服务器:</strong>T5】</p><p id="919c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">创建数据库和用户:</strong> Postgres设置了一组默认用户，但他们是超级用户帐户——他们可以做任何事情，包括删除数据库。最好创建只能访问特定数据库的新用户:</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="8977" class="nn mk iq nk b gy od oe l of og">$ psql postgres</span><span id="c4ff" class="nn mk iq nk b gy oh oe l of og">CREATE ROLE aakanksha WITH LOGIN PASSWORD ‘blah’;<br/>CREATE DATABASE bookstore;<br/>GRANT ALL PRIVILEGES ON DATABASE bookstore TO aakanksha;</span></pre><p id="c708" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">安装PopSQL: </strong> PopSQL是一款非常流行且易于使用的SQL编辑器。从<a class="ae ng" href="https://popsql.com/" rel="noopener ugc nofollow" target="_blank">https://popsql.com/</a>下载应用程序并安装。</p><p id="0049" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">将PopSQL连接到数据库:</strong>您必须提供类似<code class="fe nh ni nj nk b">port number</code> (postgres默认使用5432)、<code class="fe nh ni nj nk b">database name</code>等细节。为了让PopSQL能够访问您的PostgreSQL数据库。您只需输入以下详细信息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/644def643a5a67baf2fbaf87b41819c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrVaFbxC0L9t0AyZQNldJQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><h1 id="faea" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">4)创建表并将数据库推送到Heroku</h1><p id="b5c7" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">在PopSQL草稿栏上创建表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/8ca47028ce99d30826ef3d6c50c2981a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hPR5j2J5D8ZKaBi3GAidFw.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">只有在创建时出现错误时，才执行“删除表格”命令</p></figure><p id="08e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">推到Heroku:</p><p id="6288" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nh ni nj nk b">$ heroku pg:push bookstore DATABASE --app example-app-medium</code></p><h1 id="2316" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">5)安装所需的库</h1><p id="c6d6" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">既然数据库已经设置好了，我们可以继续API部分了。确保安装了所有必需的库。您可以将我使用过的以下库列表存储到一个文本文件(<code class="fe nh ni nj nk b">requirements.txt</code>)中，并执行它后面的命令:</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="4cae" class="nn mk iq nk b gy od oe l of og">certifi==2020.4.5.1<br/>click==7.1.1<br/>Flask==1.1.2<br/>flask-heroku==0.1.9<br/>Flask-SQLAlchemy==2.4.1<br/>itsdangerous==1.1.0<br/>Jinja2==2.11.1<br/>MarkupSafe==1.1.1<br/>psycopg2==2.8.5<br/>SQLAlchemy==1.3.16<br/>Werkzeug==1.0.1<br/>gunicorn==19.5.0<br/>flask_cors</span></pre><p id="a583" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nh ni nj nk b">pip install -r requirements.txt</code></p><h1 id="ac21" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">6)设置环境变量以访问Heroku数据库</h1><p id="a4e8" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">因为您必须通过flask应用程序访问Heroku上的远程数据库，所以要建立到它的连接，您需要数据库URL。因为远程数据库的URL可能由于许多原因而改变，所以最好的做法是在应用程序启动时总是从相应的Heroku应用程序获取数据库URL配置变量。您可以通过设置环境变量来实现这一点。</p><p id="e5ce" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为这个URL是特定于一个特定项目的，而这个项目被限制在一个特定的目录中，所以把它添加到全局环境变量中是没有意义的。这就是direnv的用武之地。这是一个环境切换器，允许根据当前工作目录加载/卸载环境变量。</p><p id="7063" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要为Flask应用程序设置变量，您必须将以下命令添加到名为<code class="fe nh ni nj nk b">.envrc</code>的新文件中，并将其放在项目的根目录下:</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="1ef8" class="nn mk iq nk b gy od oe l of og">export DATABASE_URL=$(heroku config:get DATABASE_URL -a example-app-medium)</span></pre><p id="7c59" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建<code class="fe nh ni nj nk b">.envrc</code>文件后，运行<code class="fe nh ni nj nk b">$ direnv allow</code>激活变量。</p><h1 id="01ef" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">5)设置烧瓶应用程序配置</h1><p id="7159" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">下面是您在根目录下的<code class="fe nh ni nj nk b">config.py</code>文件中需要的一些基本配置:</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="f0b0" class="nn mk iq nk b gy od oe l of og">import os</span><span id="3ab1" class="nn mk iq nk b gy oh oe l of og">class Config(object):</span><span id="8ec5" class="nn mk iq nk b gy oh oe l of og">SQLALCHEMY_TRACK_MODIFICATIONS = True<br/>SECRET_KEY = os.urandom(24)<br/>SQLALCHEMY_DATABASE_URI = os.environ['DATABASE_URL']</span></pre><h1 id="48df" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">6)设置application.py和app目录</h1><p id="0450" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">以下是我的文件夹结构:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/2216e387bc932ad6396672e79a66e57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*TW8BUEBwPSoQJmv4NV4c-w.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><p id="ab24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">默认情况下，Flask将一个应用命名为“应用”,所以你需要一个<code class="fe nh ni nj nk b">application.py</code>文件来运行这个应用。如果您愿意，您可以更改应用程序的名称(使用<code class="fe nh ni nj nk b">$ export FLASK_APP = ‘your file name'.py</code>)</p><p id="3926" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我喜欢把所有与Flask相关的代码放在一个叫做<code class="fe nh ni nj nk b">app</code>的子目录中，而不是放在根目录下。</p><p id="90bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我的<code class="fe nh ni nj nk b"><a class="ae ng" href="https://github.com/aakanksha-ns/flask-heroku-login/blob/master/application.py" rel="noopener ugc nofollow" target="_blank">application.py</a></code>长得像:</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="9468" class="nn mk iq nk b gy od oe l of og">from app import application</span></pre><p id="5a51" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在app子目录中，有我的<code class="fe nh ni nj nk b"><a class="ae ng" href="https://github.com/aakanksha-ns/flask-heroku-login/blob/master/app/__init__.py" rel="noopener ugc nofollow" target="_blank">__init__.py</a></code>(将磁盘上的目录标记为Python包目录的初始化脚本):</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="bc10" class="nn mk iq nk b gy od oe l of og">from flask import Flask<br/>from config import Config<br/>from flask_sqlalchemy import SQLAlchemy<br/>from sqlalchemy import create_engine</span><span id="6fa3" class="nn mk iq nk b gy oh oe l of og"># Initialization<br/>application = Flask(__name__)<br/>application.config.from_object(Config)</span><span id="fcd8" class="nn mk iq nk b gy oh oe l of og">DB_URI = application.config['SQLALCHEMY_DATABASE_URI']<br/>engine = create_engine(DB_URI)</span><span id="2017" class="nn mk iq nk b gy oh oe l of og">from app import routes</span></pre><p id="9577" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">API代码位于<code class="fe nh ni nj nk b">routes.py</code>文件中。</p><h1 id="cc97" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">7)创建API并在本地测试</h1><p id="910a" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">要查看完整的<code class="fe nh ni nj nk b">routes.py</code>代码，请点击以下链接:</p><p id="a018" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ng" href="https://github.com/aakanksha-ns/flask-heroku-login/blob/master/app/routes.py" rel="noopener ugc nofollow" target="_blank">https://github . com/aakanksha-ns/flask-heroku-log in/blob/master/app/routes . py</a></p><p id="9583" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于登录系统，您需要两种方法:</p><h2 id="abd7" class="nn mk iq bd ml no np dn mp nq nr dp mt le ns nt mv li nu nv mx lm nw nx mz ny bi translated">注册</h2><p id="105a" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">该方法在<code class="fe nh ni nj nk b">account</code>表中为新用户创建一个条目。您可以进行额外的检查，以确保<code class="fe nh ni nj nk b">username</code>或<code class="fe nh ni nj nk b">email</code>不在表格中。</p><p id="d118" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为出于安全考虑，将原始密码存储在数据库中是不安全的，所以您可以使用<code class="fe nh ni nj nk b"><a class="ae ng" href="https://techmonger.github.io/4/secure-passwords-werkzeug/" rel="noopener ugc nofollow" target="_blank">werkzeug</a></code>库生成一个密码散列，并存储该散列而不是真正的密码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><h2 id="9d4d" class="nn mk iq bd ml no np dn mp nq nr dp mt le ns nt mv li nu nv mx lm nw nx mz ny bi translated">签到</h2><p id="7cec" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">这个方法只是检查输入的密码是否与给定用户名的原始密码匹配</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="bc91" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完成后，您可以使用<code class="fe nh ni nj nk b">$ flask run</code>启动flask服务器，并使用Postman测试您的API:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/19b6c2ede977e614541f58f11149acc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OOgxe71jXmU-htT6OZrPLA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><h1 id="5e4d" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">8)创建过程文件</h1><p id="3b22" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">Procfile是一种机制，用于声明Heroku平台上应用程序的dynos运行哪些命令。</p><p id="a48e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您可以使用<code class="fe nh ni nj nk b"><a class="ae ng" href="https://vsupalov.com/what-is-gunicorn/" rel="noopener ugc nofollow" target="_blank">gunicorn</a></code>来运行您的web应用程序的多个实例，确保它们是健康的，并根据需要重新启动它们，在这些实例之间分配传入的请求，并与web服务器通信。</p><pre class="kg kh ki kj gt nz nk oa ob aw oc bi"><span id="8f77" class="nn mk iq nk b gy od oe l of og">web: gunicorn application:application</span></pre><h1 id="7386" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">9)将代码推送到Github Repo，将Repo连接到Heroku app</h1><p id="6fc2" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">要部署您刚刚创建的API，最简单的方法是将您的代码推送到Github repository，并将这个repo连接到您的Heroku应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/c6a616fef05e11a4ccd6952a482f139d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pP5tVCwD6sp9x5vzE9HYqQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><h1 id="02ed" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">9)部署Flask应用</h1><p id="8d08" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">您可以设置自动部署或从Heroku仪表板手动部署Flask应用程序。如果在部署过程中有任何错误，它们将显示在构建日志中。部署完成后，您可以使用Postman点击API，并看到它按预期工作。如果部署后出现错误，您可以这样查看日志:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/a250af449ec352e1e5ec0107029877a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AH9kAPg7g7_CaxRvWLIu3g.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><h1 id="f1d8" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">10)创建用户界面</h1><p id="4202" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">如果您有兴趣为您的登录系统创建一个前端，您可以查看我的基于React和Redux的UI:</p><div class="lr ls gp gr lt lu"><a href="https://github.com/aakanksha-ns/book-store" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">aakanksha-ns/书店</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="oq l mf mg mh md mi kp lu"/></div></div></a></div><p id="06b1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是我已经构建的应用程序的一些截图:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/6537bc3ca5008309fe3986b33e830fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3oyejtUg7PFh2V_U5c-iQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39228a19b27e34dee0f6979911f941f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ss1gUeTh6WowFARIM0esLg.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/0b6c86f57857fb8b2de649eee6e24467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ipk5leEmMeqH4dmJ-Lz1mQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">(图片由作者提供)</p></figure><h1 id="1129" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">参考资料:</h1><ul class=""><li id="99bf" class="ot ou iq kx b ky nb lb nc le ov li ow lm ox lq oy oz pa pb bi translated">https://thecodersblog.com/PostgreSQL-PostGIS-installation/<a class="ae ng" href="https://thecodersblog.com/PostgreSQL-PostGIS-installation/" rel="noopener ugc nofollow" target="_blank"/></li><li id="8505" class="ot ou iq kx b ky pc lb pd le pe li pf lm pg lq oy oz pa pb bi translated"><a class="ae ng" href="https://www.codementor.io/@engineerapart/getting-started-with-postgresql-on-mac-osx-are8jcopb" rel="noopener ugc nofollow" target="_blank">https://www . code mentor . io/@ engineer apart/getting-started-with-PostgreSQL-on-MAC-OS x-are 8 jcopb</a></li></ul></div></div>    
</body>
</html>