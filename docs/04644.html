<html>
<head>
<title>How Airbnb can predict the price of your accommodation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Airbnb 如何预测你的住宿价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-airbnb-can-predict-the-price-of-your-accommodation-62de288dbf86?source=collection_archive---------52-----------------------#2020-04-24">https://towardsdatascience.com/how-airbnb-can-predict-the-price-of-your-accommodation-62de288dbf86?source=collection_archive---------52-----------------------#2020-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2d0e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">训练回归模型以预测住宿价格</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/87632459360bf4e8de6a6b389f192115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*6MxlVjGBuDqKUMH5.jpg"/></div></figure><p id="1918" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi lm translated">irbnb 是一个平台，它将租房的人和其他想租房的人联系起来。根据大量的广告，可以根据要出租的房产的特点假定一个典型的价格。</p><p id="d8fa" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这一标准价格首先引起了房东的兴趣，他们将能够设定理想的租金价格，以最大限度地提高对其房产的需求，但也引起了那些将要出租公寓的人的兴趣，他们将了解他们希望出租的公寓相对于市场的位置。</p><p id="7b2f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在本文中，我们将一起了解如何创建一个模型，通过查看其特征来预测房地产的价格。为了做到这一点，我们将首先呈现我们拥有的数据，我们将清理它，然后我们将训练一个回归模型，我们将评估它。</p><h1 id="9e5d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据集</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8977bc5c4d83f5851097247ab97a46fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*lMvgmAGmJG-BGT0o.jpg"/></div></figure><p id="3415" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">数据集来自非常著名的数据集书店 Kaggle。它在柏林市收集了几年的广告。</p><p id="f8bb" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们将用于此分析的信息将与价格相关(价格、清洁费、额外人员费、保证金)、便利设施(是否有 wifi、洗衣机……)以及位置(经度、纬度)。</p><h1 id="b552" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据清理</h1><p id="37d5" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">数据清理是数据科学中最重要的事情之一。我们将在这里看到一些基本的例子。</p><h2 id="7c64" class="ms lw it bd lx mt mu dn mb mv mw dp mf kz mx my mh ld mz na mj lh nb nc ml nd bi translated">价格</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/9491a7e2ef3a205e01c9db5c2b280aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJTJWD9-e12gFbRPxxcSiQ.png"/></div></div></figure><p id="4449" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">首先，对于价格，我们的训练算法需要格式为“51”而不是“51，00 $”的价格，因此我们将所有价格转换为所请求的格式。</p><blockquote class="nj nk nl"><p id="2b0d" class="kq kr nm ks b kt ku ju kv kw kx jx ky nn la lb lc no le lf lg np li lj lk ll im bi translated">函数<strong class="ks iu"> replace </strong>只是将第一个参数替换为第二个参数。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/3469a5c26be63e5fc807d92e6e555657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_1bkSILBY56KtzjPOSw45A.png"/></div></div></figure><p id="ce96" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">数据集中没有一些价格。如果我们没有价格值，就会导致错误。因此，我们认为，如果没有输入价格，则表明所有者希望从这项服务中免费获益。</p><blockquote class="nj nk nl"><p id="4607" class="kq kr nm ks b kt ku ju kv kw kx jx ky nn la lb lc no le lf lg np li lj lk ll im bi translated">函数<strong class="ks iu"> fillna </strong>通过参数替换空值</p></blockquote><h2 id="9795" class="ms lw it bd lx mt mu dn mb mv mw dp mf kz mx my mh ld mz na mj lh nb nc ml nd bi translated">舒适</h2><p id="7202" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">便利设施功能是一个长长的列表，列出了公寓中所有可用的便利设施。所以我们要做些安排。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/f005420cb26bb677a0ff065994e50171.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LQAwNSxTgkWgTBwnkADT7g.png"/></div></div></figure><p id="05f2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">所以我们得到了一个有序的数组，我们可以很容易地把它可视化。</p><blockquote class="nj nk nl"><p id="90a4" class="kq kr nm ks b kt ku ju kv kw kx jx ky nn la lb lc no le lf lg np li lj lk ll im bi translated">功能<strong class="ks iu"> strip </strong>删除前导和尾随字符。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nr"><img src="../Images/5cd826fab078b1b7b394ac427490ccd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UbjNIADgovNQcdFNHmGIQ.png"/></div></div><p class="ns nt gj gh gi nu nv bd b be z dk translated">便利设施的分配。</p></figure><p id="30ee" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们可以在这里看到，Wifi、厨房、暖气和必需品都存在于大多数航空公司，比如超过 20，000 家航空公司拥有这些设施。所以似乎很明显，如果你的 airbnb 没有这些便利设施，价格会更低。</p><h1 id="9de6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">特征工程</h1><p id="dbe0" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">从现有数据中创建新数据可以显著提高模型的性能。</p><p id="f1e9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">当我们将 Airbnb 的价格与其位置进行比较时，我们可以很容易地看到，市中心的价格更贵。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nw"><img src="../Images/bb4a0d4319100f98725a4560e8d19dbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1eAtgda075pqSJViMLCq4Q.png"/></div></div></figure><p id="abcd" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">显然，离柏林市中心的距离对房产价格有直接影响。事实上，正如世界上所有的大城市一样，人们寻求靠近市中心，因此这些房产更受欢迎。</p><p id="7c34" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因此，我们将创建一个要素来计算公寓到柏林市中心的距离。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nx"><img src="../Images/954ab521ed81d69b367b5e27ed1ab04f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l1bDN1Ux8oAjUz6ae-7nzg.png"/></div></div></figure><blockquote class="nj nk nl"><p id="cfae" class="kq kr nm ks b kt ku ju kv kw kx jx ky nn la lb lc no le lf lg np li lj lk ll im bi translated"><strong class="ks iu">大圆</strong>函数给出两点之间的直线距离。</p></blockquote><h1 id="bdf9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">建立模型</h1><h2 id="285e" class="ms lw it bd lx mt mu dn mb mv mw dp mf kz mx my mh ld mz na mj lh nb nc ml nd bi translated">训练/测试分割</h2><p id="c081" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">为了建立一个合适的模型，我们需要两组数据。一个用于训练我们的模型，另一个用于评分。<br/>我们需要做的第一件事是分离特征和标签。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ny"><img src="../Images/7caa55f1c71a9068e46dbad5c76f34f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D6vpf-2y1PCmudmT480ssw.png"/></div></div></figure><p id="3016" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">然后我们可以使用 scikit 学习库中的<strong class="ks iu"> train_test_split </strong>函数来拆分我们的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/b4e011370bbd11e634476a43dbf27246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4PRPeN_TCPeBZySsnIHv6Q.png"/></div></div></figure><p id="c0c7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们现在将尝试训练两个不同的模型来比较它们的性能。</p><h2 id="f218" class="ms lw it bd lx mt mu dn mb mv mw dp mf kz mx my mh ld mz na mj lh nb nc ml nd bi translated">随机森林回归量(RFR)</h2><p id="9152" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">我们首先通过使用 scikit learn 实现非常简单地训练我们的模型。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/03d0952dc8dd429f4318d07ecd189e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2pHced1VOGe2X9HMkSB0ig.png"/></div></div></figure><p id="8a97" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">然后，我们用不同的指标对模型进行评分，这些指标将告诉我们模型的平均误差。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/7e634fa41a3592fb588c48080d2162a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K5Lpj6YsB7pNurpMv3SRig.png"/></div></div></figure><p id="e7b8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我们得到的平均房价为 22.72 美元，这意味着，平均而言，当我们试图猜测一套公寓的价格时，我们的模型错了 22.72 美元，这是值得尊敬的。</p><p id="a7db" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">现在让我们尝试另一个模型，看看我们是否可以提高这个分数。</p><h2 id="c3f2" class="ms lw it bd lx mt mu dn mb mv mw dp mf kz mx my mh ld mz na mj lh nb nc ml nd bi translated">XGBOOST</h2><p id="af34" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">同样，我们将使用 scikit learn 的实现</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nz"><img src="../Images/9ea7e2f3d9981a30eb3d22cc300f9d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dLeW5RPu20KkTNC5LvN8LA.png"/></div></div></figure><p id="b566" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在训练完我们的模型之后，我们也可以尝试给我们的模型打分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nq"><img src="../Images/4847d8cf7685ddf13708ea760185028e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ie5oY_eyBeEWOEbmV_vPPQ.png"/></div></div></figure><p id="4412" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这里，我们有一个超过 1 美元的 MAE 下降，这是非常令人鼓舞的。</p><h1 id="335b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="6aa2" class="pw-post-body-paragraph kq kr it ks b kt mn ju kv kw mo jx ky kz mp lb lc ld mq lf lg lh mr lj lk ll im bi translated">因此，我们在这里看到，在大约 15 分钟的时间里，通过一些想法，我们可以构建一个模型，该模型仅使用五个功能。</p><p id="910f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因此，很容易想象 Airbnb，像大多数在过去十年中创建的公司一样，在机器学习上投资很多。因此，该公司用更多的方法建立模型，这些方法不是试图将误差减少几美元，而是几美分。</p><p id="9c06" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">因此，重要的是要认识到，甚至在你在平台上发布广告之前，它就知道将以什么价格出租。</p></div></div>    
</body>
</html>