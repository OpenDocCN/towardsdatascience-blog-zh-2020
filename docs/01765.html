<html>
<head>
<title>Visualizing Crime against women in India on a Map using Geopandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Geopandas 在地图上可视化印度针对女性的犯罪</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-map-of-crime-against-women-in-india-using-geopandas-2d31af1a369b?source=collection_archive---------11-----------------------#2020-02-18">https://towardsdatascience.com/visualizing-map-of-crime-against-women-in-india-using-geopandas-2d31af1a369b?source=collection_archive---------11-----------------------#2020-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a3e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">本文向我们展示了一种使用 GeoPandas:一个 Python 库在印度地图(或者您可以选择任何国家)上绘制邦或地区统计数据(就像这里使用的一样，即印度针对女性的犯罪)的简单方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/8c8a22d46c4f23a9a5595aa56e10e930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*yGWD_cIdXJAXovPyokSE8w.jpeg"/></div><p class="kq kr gj gh gi ks kt bd b be z dk translated">图片提供:雷纳萨莫拉，[Pinterest 邮报]。于 2020 年 2 月 18 日从<a class="ae ku" href="https://in.pinterest.com/pin/626563366894685267/" rel="noopener ugc nofollow" target="_blank">https://in.pinterest.com/pin/626563366894685267/</a>检索</p></figure><h2 id="37d6" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">简介:</h2><p id="8815" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">大家好，这篇文章演示了如何在印度各邦的 choropleth 地图上绘制针对女性的<em class="mk">犯罪数据。</em></p><blockquote class="ml"><p id="9d14" class="mm mn it bd mo mp mq mr ms mt mu mj dk translated">根据谷歌字典的解释:“choropleth 地图是一种利用预先定义的区域内的阴影、颜色或符号放置的差异来表示这些区域内特定数量的平均值的地图。”</p></blockquote><h2 id="9654" class="kv kw it bd kx ky mv dn la lb mw dp ld le mx lg lh li my lk ll lm mz lo lp lq bi translated">地质公园:</h2><p id="8b81" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">Geopandas 是一个不需要太多代码就可以创建 choropleth 地图的库！它可以将文件作为数据帧读取，这通常称为地理数据帧。地理数据框架很像熊猫数据框架，因此两者通常配合得很好。更多关于 https://geopandas.org/的地质公园<a class="ae ku" href="https://geopandas.org/" rel="noopener ugc nofollow" target="_blank"/></p><h2 id="f7de" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">形状文件:</h2><p id="5501" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">shapefile 是一种简单的非拓扑格式，用于存储地理要素的几何位置和属性信息。shapefile 中的地理要素可由点、线或面(区域)表示。</p><blockquote class="na nb nc"><p id="d0d5" class="lr ls mk lt b lu nd ju lw lx ne jx lz nf ng mb mc nh ni me mf nj nk mh mi mj im bi translated">本文中用于绘制印度地图的带有邦边界的形状文件可以从<a class="ae ku" href="https://map.igismap.com/share-map/export-layer/Indian_States/06409663226af2f3114485aa4e0a23b4" rel="noopener ugc nofollow" target="_blank">链接</a>下载，而带有地区边界的形状文件可以从<a class="ae ku" href="https://www.arcgis.com/home/item.html?id=cba8bddfa0ab43ddb35a7313376f9438" rel="noopener ugc nofollow" target="_blank">链接</a>下载。</p></blockquote><h2 id="40f0" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">使用 Pip 安装:</h2><p id="5ccf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">您可以使用 pip 安装 Geopandas 库，如下所示:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="0a49" class="kv kw it nm b gy nq nr l ns nt">pip install geopandas<br/>pip install descartes</span></pre><p id="710d" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">库<strong class="lt iu"> descartes </strong>是 geopandas 的依赖项，必须显式安装，所以别忘了也安装它。</p><h2 id="16ca" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">实施:</h2><p id="406a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">我们在<strong class="lt iu"> 5 个简单步骤</strong>中解释了 Python 的整个实现</p><p id="5b0c" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">假设我们有一个名为 state_wise_crimes.xlsx 的 excel 文件，其中包含印度所有的州名以及针对女性的犯罪总数，如下所示:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="dde3" class="kv kw it nm b gy nq nr l ns nt">+-------------------+----------------------------+<br/>|    state_name     | Total Crimes against Women |<br/>+-------------------+----------------------------+<br/>| Andhra Pradesh    |                    15931.0 |<br/>| Arunachal Pradesh |                      384.0 |<br/>| Assam             |                    23258.0 |<br/>| Bihar             |                    13891.0 |<br/>| Chhattisgarh      |                     5720.0 |<br/>| .....             |                      ..... |<br/>+-------------------+----------------------------+</span></pre><p id="8cc0" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">我们按照以下步骤创建 chloropeth 图</p><p id="9594" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">第一步:将 excel 文件读入熊猫数据帧:</strong></p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="04f0" class="kv kw it nm b gy nq nr l ns nt">df = pd.read_excel('state_wise_crimes.xlsx')</span></pre><p id="6e46" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">步骤 2:读取地理数据框架中带有地区边界的印度地图 shape file:</strong></p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="a60e" class="kv kw it nm b gy nq nr l ns nt">fp = "Igismap/Indian_States.shp"<br/>map_df = gpd.read_file(fp)</span></pre><p id="16a7" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">第三步:通过州名连接两个数据帧:</strong></p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="4324" class="kv kw it nm b gy nq nr l ns nt">merged = map_df.set_index('st_nm').join(data_for_map.set_index('state_name'))<br/>merged.head()</span></pre><p id="480b" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">第四步:为 Matplotlib 创建图形和轴，并设置标题</strong></p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="3b78" class="kv kw it nm b gy nq nr l ns nt">fig, ax = plt.subplots(1, figsize=(10, 6))<br/>ax.axis('off')<br/>ax.set_title('State Wise Crime against women in India in 2015', fontdict={'fontsize': '25', 'fontweight' : '3'})</span></pre><p id="aceb" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">第六步:最后，绘制绿色地图</strong></p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="5bcf" class="kv kw it nm b gy nq nr l ns nt">merged.plot(column='Total Crimes against Women', cmap='YlOrRd', linewidth=0.8, ax=ax, edgecolor='0.8', legend=True)</span></pre><p id="dcbc" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">输出:<br/> </strong>输出应该是这样的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/e4081435f198229c6f124502d6783311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PlIGVl-6357v4TG-1kY3Xg.png"/></div></div></figure><p id="8f68" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">您还可以使用下面的代码片段将输出保存为图像:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="fda8" class="kv kw it nm b gy nq nr l ns nt">fig.savefig("State_wise.png", dpi=100)</span></pre><p id="c28c" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">类似地，我们可以使用<strong class="lt iu">形状文件</strong>一节中提到的形状文件来绘制地区的 chloropeth 地图。您可以从<a class="ae ku" href="https://data.gov.in/catalog/district-wise-crimes-committed-against-women?filters%5Bfield_catalog_reference%5D=87613&amp;format=json&amp;offset=0&amp;limit=6&amp;sort%5Bcreated%5D=desc" rel="noopener ugc nofollow" target="_blank">此链接</a>下载包含针对女性的地区性犯罪的 excel 文件。</p><p id="ea67" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">的输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/a053d1e3f600395192f38d0b336eef16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ofmQoo_PKs4naq9ByojPA.png"/></div></div></figure><p id="6df1" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">我们也可以对任何一个邦做同样的事情，就像我对马哈拉施特拉邦所做的那样。<br/>为此，我们可以通过添加一行来使用用于分区可视化的相同形状文件:</p><pre class="kj kk kl km gt nl nm nn no aw np bi"><span id="32a4" class="kv kw it nm b gy nq nr l ns nt">map_df = map_df[map_df['NAME_1']=='Maharashtra']</span></pre><p id="47b4" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nv nw di nx bf ny"><div class="gh gi nu"><img src="../Images/1b73b8d6fc4e349d31ce611d1d61bc92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqd1OHGcTYPPvXwUDpwrLQ.png"/></div></div></figure><h2 id="6669" class="kv kw it bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Github 链接:</h2><p id="5b89" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz le ma mb mc li md me mf lm mg mh mi mj im bi translated">你可以在这里得到完整的代码<a class="ae ku" href="https://github.com/yasersakkaf/Visualize-Women-Harrasment-in-India-using-GeoPandas" rel="noopener ugc nofollow" target="_blank"/>:</p><div class="nz oa gp gr ob oc"><a href="https://github.com/yasersakkaf/Visualize-Women-Harrasment-in-India-using-GeoPandas" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">yasersakkaf/Visualize-Women-Harrasment-in-India-using-geo pandas</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">GeoPandas 图书馆的实现，用于可视化印度各邦和各地区的妇女遭遇。…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ko oc"/></div></div></a></div><p id="e78a" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">总结:</strong></p><p id="ea80" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">在本文中，我们看到了如何使用 GeoPandas 库来绘制印度的 chloropeth 地图，以描述 2015 年各邦和各地区针对女性的犯罪。</p><p id="7cbc" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated">有了合适的数据集和形状文件，我们可以对其中的任何国家或州做同样的事情。</p><p id="34e1" class="pw-post-body-paragraph lr ls it lt b lu nd ju lw lx ne jx lz le ng mb mc li ni me mf lm nk mh mi mj im bi translated"><strong class="lt iu">参考文献:</strong></p><div class="nz oa gp gr ob oc"><a rel="noopener follow" target="_blank" href="/lets-make-a-map-using-geopandas-pandas-and-matplotlib-to-make-a-chloropleth-map-dddc31c1983d"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">让我们做一张地图吧！利用 Geopandas、pandas 和 Matplotlib 制作 Choropleth 地图</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">所以你想用 Python 做地图。我们开始吧！</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">towardsdatascience.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq ko oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://desktop.arcgis.com/en/arcmap/10.3/manage-data/shapefiles/what-is-a-shapefile.htm" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">什么是 shapefile？</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">shapefile 是一种简单的非拓扑格式，用于存储的几何位置和属性信息…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">desktop.arcgis.com</p></div></div></div></a></div></div></div>    
</body>
</html>