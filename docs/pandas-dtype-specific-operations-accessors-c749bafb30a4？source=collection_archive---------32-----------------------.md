# 特定于熊猫数据类型的操作:访问器

> 原文：<https://towardsdatascience.com/pandas-dtype-specific-operations-accessors-c749bafb30a4?source=collection_archive---------32----------------------->

## 举例说明。

![](img/dd08d71bda39556f4afca54814573584.png)

蒂埃拉·马洛卡在 [Unsplash](https://unsplash.com/s/photos/key?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

> 注:除非另有说明，所有图片均由作者创作。

Pandas 是 Python 中一个广泛使用的数据分析和操作库。它提供了许多函数和方法来处理任何类型的数据。还有一些方法只适用于特定的数据类型。这些方法通过 4 个访问器来访问。

访问器扩展了 Pandas 的功能，并提供了特定的操作。例如，可以使用 dt 访问器从日期中提取月份。

在本帖中，我们将看到熊猫的 4 个访问器的各种操作，它们是:

*   Str:字符串数据类型
*   分类数据类型
*   Dt:日期时间、时间增量、周期数据类型
*   稀疏:稀疏数据类型

> 注意:我们将使用 Pandas 系列的示例，该系列也可以视为 DataFrame 列。

# **Str**

Str 访问器提供了处理文本数据的方法。让我们首先创建一个包含文本单词的系列。

![](img/3c22554c8724323055ae35972ae9b689.png)

顾名思义，Split 根据指定的字符(默认为空格)拆分数据。然后，我们使用 explode 函数将每个分离的单词作为系列中的一个新项目。

猫是分裂的反义词。它将字符串串联成一系列。

![](img/88d264459dc5856acff461613a686e9b.png)

upper 和 lower 方法分别将所有字符转换为大写和小写。

![](img/a907508593e8e299e3fa2443775bd0fe.png)

大写方法只将第一个字母转换成大写。

![](img/8c24fb64100dbe502c505e19f825909e.png)

replace 方法可用于用另一个字符串替换整个或部分字符串。

![](img/60df389487c246bfe167652398e6e81b.png)

len 方法返回一系列字符串的长度。

![](img/3f76b823694f6ae6c37c78158af0a377.png)

字符串访问器允许对字符串使用索引。例如，我们可以只选择前两个字符，如下所示:

![](img/c09f7bcd91d459e839496d64faa454e3.png)

我们也可以用 isalpha 方法检查是否所有字符都是字母顺序的。

![](img/847724e3c7336a9024f6b1b247c7e8a0.png)

如果至少有一个非字母字符，则返回 false。

Startswith 和 endswith 方法允许检查字符串是以特定字符开始还是结束。

![](img/61f971120a306c01810865d2a9704a5e.png)

我们还可以计算一个字符或一组字符在一个字符串中出现的次数。

![](img/53f1995c377c133918f58f60e63cface.png)

lstrip 和 rstrip 方法可用于修剪字符串。例如，我们可以去掉 c 系列末尾的数字、空格和逗号。

![](img/e3466a07dc1687c49d85f2ed3691800a.png)

# **Dt**

Dt 访问器允许从日期时间数据中提取许多有用的属性。它还提供了操作方法。让我们首先创建一个简单的日期序列。

![](img/c0d20093ee70ac0752cc84d66e008a1e.png)

date_range 函数返回 datetimeindex。为了使用 dt 访问器，我们需要将其转换为一个序列。

我们可以通过简单地使用年、月和日属性从日期中提取年、月或日。

![](img/ec9f9cbd771f6b97bfb51839ee08e60a.png)

在某些情况下，我们可能需要日期的日历周。可以按如下方式完成:

![](img/0f27ee4d9935b079a7087477d09d764d.png)

还可以提取日期的星期几。从 0(周一)开始，一直到 6(周日)。

![](img/dc7b42d405aabf47834ad98ee3abb037.png)

我们能够检查一个日期是一个月、一个季度还是一年的开始还是结束。让我们做一个例子来检查一个月的开始。季度和年度的语法类似。

![](img/eb6d72ac1e3d265299567f633d18b154.png)

# **猫**

Cat 是分类数据类型的访问器。对于分类数据，使用分类数据类型比使用对象数据类型更有效。这在内存和速度方面有很大的不同，尤其是当数据基数较低时(即，与观察值相比，类别数较低)。

让我们首先创建一个具有分类数据类型的序列。

![](img/a8726a63613558379d3d53528be9e5b7.png)

我们可以检查类别。

![](img/98cbb2756dbb0b39206c166a8fac5923.png)

也可以重命名类别。

![](img/c25f1c7fc50ab3cd2c37a205c1230692.png)

使用类别数据类型时要记住的一件重要事情是，新值必须在现有类别中。

例如，ser 中的类别是 A、B 和 c。我们不能将一个项目更新到除这三个类别之外的类别。如果我们试图这样做，就会得到一个值错误。

![](img/4bded608fc3d06f08ca545cc3c47aa23.png)![](img/8d57463db04274fd41e0a5f8ad85d986.png)

为了解决这个问题，我们可以添加新的类别，即使还没有数据点属于该类别。

![](img/e92dda5cb40460a04554d6302f60b77c.png)

我们现在可以将一个数据点更新为 d 类。

![](img/ae0ed152585fc16dcf9c0b204994d9de.png)

# **稀疏**

Pandas 的稀疏数据结构允许高效地存储稀疏数据。谈到稀疏性，我们倾向于认为数组主要由零组成。然而，稀疏也可能是由于其他值(例如 NaN)。稀疏数据结构意味着通过省略匹配特定值(例如 0，1，NaN)的数据点来压缩对象。

让我们坚持传统的大部分是零的情况。下面的 numpy 数组包含 20 个 1 和 9980 个 0。

![](img/fff33f6f25bc3998fbff07a9412db943.png)

让我们创建两个系列。一个具有稀疏数据类型，一个具有浮点数据类型。

![](img/6bdaca45bbb3ad4fbfe45a06992bb54e.png)

在内存使用方面会有巨大的差异。

![](img/2a621b26ecf2d97c573f258ab961a788.png)

内存使用量减少了 200 多倍。

稀疏数据结构的数据类型有两个元素。第一个是实际存储的元素的数据类型。第二个显示了未存储的稀疏元素。

![](img/c8966b3092ade0a7fce9f856e66c34e2.png)

在有序的情况下，稀疏性是由于零，所以零实际上没有被存储。

稀疏存取器提供了检查稀疏数据结构属性的方法。npoints 方法返回非 fill_value 点(实际存储的点)的数量。fill_value 点是稀疏度的值。

![](img/705c028d4b417034e360b98bfdfb5672.png)

稀疏数组包含 20 个 1，其余值为零。

fill_value 方法显示稀疏元素，density 返回非 fill_value 点与整个数组的比率。

![](img/469708ce6fc4598ba44d1159727c65be.png)

最后，sp_values 方法返回一个只包含非 fill_value 点的数组。

![](img/80912fcb64296dccc845d54b8fd2e2ba.png)

我们已经讨论了与访问器相关的方法的重要部分。当然，还有更多的方法，但我认为这些是你在数据分析过程中会经常用到的方法。他们肯定会让你的事情变得更容易。

您可以随时访问访问器官方文档的 API 来查看方法的完整列表。

感谢您的阅读。如果您有任何反馈，请告诉我。