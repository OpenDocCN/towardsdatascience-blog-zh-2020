<html>
<head>
<title>Create An Infographic Using Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Matplotlib 创建信息图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-an-infographic-using-matplotlib-3fbb546c1628?source=collection_archive---------9-----------------------#2020-01-26">https://towardsdatascience.com/create-an-infographic-using-matplotlib-3fbb546c1628?source=collection_archive---------9-----------------------#2020-01-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/d041e5fd4f7597cbd7ced6a59598454a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilOtdffF1tmfroO3buXvvA.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">君提供的信息图</p></figure><div class=""/><div class=""><h2 id="5df3" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">2019 年澳大利亚城市的温度模式</h2></div><p id="f490" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">从我之前关于 <code class="fe lv lw lx ly b"><a class="ae lu" rel="noopener" target="_blank" href="/plt-xxx-or-ax-xxx-that-is-the-question-in-matplotlib-8580acf42f44">matplotlib</a></code> <a class="ae lu" rel="noopener" target="_blank" href="/plt-xxx-or-ax-xxx-that-is-the-question-in-matplotlib-8580acf42f44">绘制</a>的<a class="ae lu" rel="noopener" target="_blank" href="/plt-xxx-or-ax-xxx-that-is-the-question-in-matplotlib-8580acf42f44">层次结构和</a><a class="ae lu" rel="noopener" target="_blank" href="/the-many-ways-to-call-axes-in-matplotlib-2667a7b06e06">实例化</a> <code class="fe lv lw lx ly b"><a class="ae lu" rel="noopener" target="_blank" href="/the-many-ways-to-call-axes-in-matplotlib-2667a7b06e06">axes</a></code>的多种方式的帖子中，我们可以看到这些特性赋予了<code class="fe lv lw lx ly b">matplotlib</code>创造高度复杂和可定制可视化的巨大潜力。为了证明这一点，也为了提高我自己对<code class="fe lv lw lx ly b">matplotlib</code>的理解，本周我开始用<code class="fe lv lw lx ly b">matplotlib</code>制作一个<strong class="la jk">信息图</strong>。</p><p id="4244" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">一个<a class="ae lu" href="https://venngage.com/blog/what-is-an-infographic/" rel="noopener ugc nofollow" target="_blank">信息图</a>通常将视觉图像、数据图表和最少的文本结合在一起。它旨在说明一个主题的易于理解的概述。由于这种性质，与常规静态数据图相比，其布局和内容更加复杂多样，常规静态数据图通常在一种类型的图中显示一种类型的数据(<em class="lz">如条形图、散点图、折线图和盒图或</em> <a class="ae lu" href="https://datavizproject.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lz">及其变体</em> </a>)。此外，信息图可以是一个独立的图，而常规的静态数据图主要作为补充材料，应该在一定的背景下阅读。</p><p id="f392" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">你可能已经从标题图中看到了完整的信息图，它显示了 2019 年澳大利亚八个主要城市的每日最高温度和降水量的年度模式(<em class="lz">)，我真的希望你在阅读这一段之前能了解它的主题。这让我对继续前进充满信心。我的信息图的灵感来自《南华早报》的这张信息图。</em></p><p id="88af" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">我个人非常喜欢将大量数据可视化为网格状结构。当颜色和形状设置得当时(<em class="lz">高温时为砖红色，低温时为北极冰蓝色，我的例子是</em>)，它开始传达错综复杂背后的图案(<em class="lz">如纬度降低时北极冰蓝色减少</em>)，同时也传递了一种艺术感(<em class="lz">如一串红色条的外观看起来像燃烧的木头</em>)。</p><p id="fe24" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">好了，事不宜迟，现在让我们深入代码，向您展示我是如何使用<code class="fe lv lw lx ly b">matplotlib</code>创建这个信息图的。像往常一样，你可以从<a class="ae lu" href="https://github.com/Perishleaf/data-visualisation-scripts/tree/master/matplotlib_2019_temp" rel="noopener ugc nofollow" target="_blank"> my Github </a>访问所有需要的数据和 jupyter 笔记本。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><h2 id="1d24" class="mh mi jj bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">定义目标并收集数据</h2><p id="3f7c" class="pw-post-body-paragraph ky kz jj la b lb na kk ld le nb kn lg lh nc lj lk ll nd ln lo lp ne lr ls lt in bi translated">尽管这不在本文的讨论范围之内，我还是列出了这一部分来强调这是制作有效信息图的基础部分。只有你知道要讲什么故事，你才有收集数据和思考设计、布局、图表和美学的方向。至于我们的例子，天气数据是从澳大利亚气象局网站下载的。我们只需要日最高气温、城市名称和日期值(<em class="lz">即</em><strong class="la jk"><em class="lz">max _ tmp _ day</em></strong><em class="lz">、</em> <strong class="la jk"> <em class="lz">城市</em> </strong> <em class="lz">、</em> <strong class="la jk"> <em class="lz">日期</em> </strong> <em class="lz">如图 1 </em>)。</p><figure class="ng nh ni nj gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nf"><img src="../Images/0891be0ca622262d685b780cfb2b77e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYuoRbC2Nn0ez6DsITYLlA.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">图 1 |数据处理</p></figure><h2 id="36e9" class="mh mi jj bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">布局</h2><p id="48e9" class="pw-post-body-paragraph ky kz jj la b lb na kk ld le nb kn lg lh nc lj lk ll nd ln lo lp ne lr ls lt in bi translated">正如我在之前的<a class="ae lu" rel="noopener" target="_blank" href="/the-many-ways-to-call-axes-in-matplotlib-2667a7b06e06">帖子</a>中所说，<code class="fe lv lw lx ly b">fig.add_axes([left, bottom, width, height])</code>是手动将<code class="fe lv lw lx ly b">axes</code>放置在<code class="fe lv lw lx ly b">fig</code>上的好方法。然而，当我们有许多<code class="fe lv lw lx ly b">axes</code> ( <em class="lz">我们总共有 18 个</em> <code class="fe lv lw lx ly b"><em class="lz">axes</em></code> <em class="lz">)并且需要对齐(<em class="lz">我们的眼睛非常挑剔，即使轻微的错位也会使事情失去平衡</em>)时，精确计算<code class="fe lv lw lx ly b">fig</code>上每个<code class="fe lv lw lx ly b">axes</code>的坐标是繁琐的。我于是采用了<strong class="la jk">普通布局</strong>和<strong class="la jk">任意布局<code class="fe lv lw lx ly b">axes</code>的<code class="fe lv lw lx ly b">fig</code>的混合。使用<code class="fe lv lw lx ly b">fig.add_gridspec()</code>和<code class="fe lv lw lx ly b">fig.add_axes()</code>。这里，<code class="fe lv lw lx ly b">fig.add_gridspec()</code>是一个函数，它使我们能够指定将放置<code class="fe lv lw lx ly b">axes</code>的网格的几何形状。例如，想象一个 2 行 2 列的网格在一个<code class="fe lv lw lx ly b">fig</code>上，通常如果我们使用<code class="fe lv lw lx ly b">fig.subplots(nrows=2, ncols=2)</code>，这将产生 4 个<code class="fe lv lw lx ly b">axes</code>均匀分布在 2×2 的网格上。如果在 2 乘 2 的网格上，我们只需要 3 个<code class="fe lv lw lx ly b">axes</code>，第一个<code class="fe lv lw lx ly b">axes</code>占据整个第一行，而剩余的 2 个<code class="fe lv lw lx ly b">axes</code>平均占据第二行，会怎么样？这里有了<code class="fe lv lw lx ly b">fig.add_gridspec()</code>的力量，它使我们能够根据需要创建<code class="fe lv lw lx ly b">axes</code>跨越的行和列。我们可以实现上述布局如下:</strong></em></p><pre class="ng nh ni nj gu nk ly nl nm aw nn bi"><span id="b6ed" class="mh mi jj ly b gz no np l nq nr">fig = plt.figure()</span><span id="83ba" class="mh mi jj ly b gz ns np l nq nr"># Use GridSpec for customising layout<br/>gs = fig.add_gridspec(nrows=2, ncols=2)</span><span id="6f8b" class="mh mi jj ly b gz ns np l nq nr"># Add an empty axes that occupied the whole first row<br/>ax1 = fig.add_subplot(gs[0, 0:2])</span><span id="0ea1" class="mh mi jj ly b gz ns np l nq nr"># Add two empty axes that occupied the remaining grid<br/>ax2 = fig.add_subplot(gs[1, 0])<br/>ax3 = fig.add_subplot(gs[1, 1])</span></pre><p id="58f9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">正如你所看到的，一旦一个网格空间对象(<em class="lz">即</em> <code class="fe lv lw lx ly b"><em class="lz">gs</em></code>)被创建，我们可以利用它的网格几何，就像从一个 2D <code class="fe lv lw lx ly b">numpy.ndarray</code>中访问值一样，来相应地放置<code class="fe lv lw lx ly b">axes</code>。例如，<code class="fe lv lw lx ly b">fig.add_subplot(gs[0, 0:2])</code>表示添加一个<code class="fe lv lw lx ly b">axes</code>占据 2×2 网格中的整个第一行。</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nt nu l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">信息图表布局的代码</p></figure><p id="80c3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">回到信息图，如上面的代码所示，除了<code class="fe lv lw lx ly b">ax2</code> ( <em class="lz">色条的轴</em>)外，其他的<code class="fe lv lw lx ly b">axes</code>都是由<code class="fe lv lw lx ly b">fig.add_gridspec(nrows=10, ncols=10)</code>添加的。具体来说，在一个 10 行 10 列的网格上(图 2)，<code class="fe lv lw lx ly b">ax1</code>，也就是标题、文本和注释的<code class="fe lv lw lx ly b">axes</code>，占据了前 2 行 8 列。从<code class="fe lv lw lx ly b">ax3</code>到<code class="fe lv lw lx ly b">ax10</code>的每一个<code class="fe lv lw lx ly b">axes</code>都是绘制温度条的<code class="fe lv lw lx ly b">axes</code>，占据 1 行 8 列。最后，从<code class="fe lv lw lx ly b">ax11</code>到<code class="fe lv lw lx ly b">ax18</code>的每一个<code class="fe lv lw lx ly b">axes</code>，也就是雨量数据的<code class="fe lv lw lx ly b">axes</code>，只占 1 行 2 列。</p><figure class="ng nh ni nj gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nv"><img src="../Images/02462632624ed4792fe200fad5ddde7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ok_OkIIgkMPk9RMdazxQA.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">图 2 |信息图布局</p></figure><p id="6418" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">如你所见，当同时需要多个<code class="fe lv lw lx ly b">axes</code>的灵活性和一致性时，<code class="fe lv lw lx ly b">fig.add_gridspec()</code>是一个强大的功能。</p><h2 id="8c2a" class="mh mi jj bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">内容和配色方案</h2><p id="1ed7" class="pw-post-body-paragraph ky kz jj la b lb na kk ld le nb kn lg lh nc lj lk ll nd ln lo lp ne lr ls lt in bi translated">布局确认后，我们可以添加数据图。这里以温度条为例(图 3)。</p><figure class="ng nh ni nj gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj nw"><img src="../Images/5d7f8e6a1731ffd8dc83108f3dfcce8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKoS9GMCPZzyR-S7VCozWw.png"/></div></div><p class="jd je gk gi gj jf jg bd b be z dk translated">图 3 |条形图示例</p></figure><p id="3f3c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">考虑到信息和美观，每个条形代表这八个主要城市的日最高温度和年平均温度(24.43 摄氏度)之间的差值。这样，观众可以清楚地识别出高于平均气温的日子(<em class="lz">条向上</em>)和低于平均气温的日子(<em class="lz">条向下</em>)。否则，由于温度值是正的，所有的条形图将在零度以上朝向相同的方向，这使得条形图很无聊。此外，与常规的条形图不同，我删除了所有的网格、x 轴和 y 轴，只留下了必要的部分。</p><p id="342a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">另一个附加功能是带有弯曲箭头的文本注释，分别指出最高和最低温度的日期。从美学的角度来看，这给整个信息图增加了灵活性。这是由<code class="fe lv lw lx ly b">ax.annotate()</code>交付的。关于<code class="fe lv lw lx ly b">ax.annotate()</code>的<a class="ae lu" href="https://matplotlib.org/tutorials/text/annotations.html" rel="noopener ugc nofollow" target="_blank">官方文档</a>已经给出了非常详细的例子，所以本帖不再重复该功能的介绍。</p><p id="cdd8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">由于这八个城市的温度柱状图的样式需要保持一致，我们只需要为一个柱状图生成代码，并通过<code class="fe lv lw lx ly b">for loop</code>添加其他柱状图(<em class="lz">见</em>下面的代码)。</p><figure class="ng nh ni nj gu iw"><div class="bz fq l di"><div class="nt nu l"/></div><p class="jd je gk gi gj jf jg bd b be z dk translated">条形图的代码</p></figure><p id="f38e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">虽然配色方案是一个非常主观的决定，但我可以在这里分享我遵循的原则:<strong class="la jk">创造对比</strong>、<strong class="la jk">分组元素</strong>、<strong class="la jk">编码数量</strong>。在这张信息图中，我使用了深色背景来突出温度柱状图和降雨圈。黑色的背景也表达了一种阴郁的气氛，以反映极端天气的紧急情况。此外，条形图和雨量圈分别使用一致的颜色，有助于将信息组织在一起。最后，不同温度值的色谱应用(<em class="lz">从北极冰蓝色到砖红色</em>)突出了图案。</p><h2 id="da08" class="mh mi jj bd mj mk ml dn mm mn mo dp mp lh mq mr ms ll mt mu mv lp mw mx my mz bi translated">标题、文本和注释</h2><p id="b5be" class="pw-post-body-paragraph ky kz jj la b lb na kk ld le nb kn lg lh nc lj lk ll nd ln lo lp ne lr ls lt in bi translated">信息图可以是一个独立的图的原因是必要的文字有助于加强其主题。这里我们可以使用<code class="fe lv lw lx ly b">ax.text()</code>将任何文本放在<code class="fe lv lw lx ly b">fig</code>上我们想要的任何地方。我发现的唯一缺陷是给<code class="fe lv lw lx ly b">matplotlib</code>添加一个自定义字体家族有点麻烦(<a class="ae lu" href="https://scentellegher.github.io/visualization/2018/05/02/custom-fonts-matplotlib.html" rel="noopener ugc nofollow" target="_blank">一解此处</a>)。另一种方法是在信息图主体完成后通过 Illustrator 添加文本，并导出为<code class="fe lv lw lx ly b">svg</code>文件。</p></div><div class="ab cl ma mb hy mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="in io ip iq ir"><p id="1a9c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt in bi translated">和往常一样，我欢迎反馈、建设性的批评以及听到关于您的数据科学项目的信息。可以通过<a class="ae lu" href="https://www.linkedin.com/in/jun-ye-29aaa769/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和<a class="ae lu" href="https://junye0798.com/" rel="noopener ugc nofollow" target="_blank">我的网站</a>找到我。</p></div></div>    
</body>
</html>