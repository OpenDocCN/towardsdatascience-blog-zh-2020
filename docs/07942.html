<html>
<head>
<title>The Two Variations of Confusion Matrix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">混淆矩阵的两种变体</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-two-variations-of-confusion-matrix-get-confused-never-again-8d4fb00df308?source=collection_archive---------36-----------------------#2020-06-12">https://towardsdatascience.com/the-two-variations-of-confusion-matrix-get-confused-never-again-8d4fb00df308?source=collection_archive---------36-----------------------#2020-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b54d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">记忆黑客记住它的两个变化和相关的公式</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2b819020de7ec6d7b29a43ae1c0d9f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ev5EKJ4HftM9v7caJEet5w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/HOerwin56-2108907/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2667890" rel="noopener ugc nofollow" target="_blank"> HOerwin56 </a>来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2667890" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></p></figure><p id="a78f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能已经知道，关于如何显示混淆矩阵，有两种观点(<a class="ae ky" href="https://en.wikipedia.org/wiki/Confusion_matrix" rel="noopener ugc nofollow" target="_blank"> wiki </a> vs <a class="ae ky" href="https://scikit-learn.org/stable/auto_examples/model_selection/plot_confusion_matrix.html?highlight=confusion" rel="noopener ugc nofollow" target="_blank"> python </a>)。</p><p id="e0cc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于每一个初学者来说，总有一个时候会看到“另一个”的变化，并歪着头去理解它。文献支持一种布局，而代码似乎支持另一种布局。</p><blockquote class="lv lw lx"><p id="3741" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">要了解混淆矩阵的基础知识，可以在这里看一下<a class="ae ky" href="https://en.wikipedia.org/wiki/Confusion_matrix" rel="noopener ugc nofollow" target="_blank"/>。</p></blockquote><p id="cba6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是各种变化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/499a70ab1c47a81f538e8d95aca7dc07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*r4Sj_rRPPvtfJdA-iOkQpA.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd md">透视图1 </strong> : <a class="ae ky" href="https://en.wikipedia.org/wiki/Confusion_matrix" rel="noopener ugc nofollow" target="_blank">实际(真)类为列</a></p></figure><p id="f061" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">相比于:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi me"><img src="../Images/0bfb0f9b7348cb867d9e48d23d0977d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*ZNUeqoHg9S-2m3-oGYdpCQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated"><strong class="bd md">视角2 </strong> : <a class="ae ky" href="https://scikit-learn.org/stable/auto_examples/model_selection/plot_confusion_matrix.html?highlight=confusion" rel="noopener ugc nofollow" target="_blank">预测类为列</a></p></figure><p id="9f2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不是简单地交换行和列的情况，而是左上角的<strong class="lb iu">真阳性</strong>现在被<strong class="lb iu">真阴性</strong>取代的事实。</p><blockquote class="mf"><p id="17a2" class="mg mh it bd mi mj mk ml mm mn mo lu dk translated">如果您使用内置的scikit-learn函数，如<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.confusion_matrix.html" rel="noopener ugc nofollow" target="_blank"> confusion_matrix </a>，您需要了解输入和输出布局，否则您对灵敏度(回忆)、特异性、精确度和F1分数的所有计算都将是错误的。</p></blockquote><h1 id="b112" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">给我看看证据！</h1><p id="a07e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">好的，让我们用一个实际的例子来说明这个问题，通过代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/45ef88ffae32e58421a92cccc9f59c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*1afjQ4jtrn3N17P58RO3dw.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">我们的数据集</p></figure><p id="fe27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我们17个人的医疗结果数据集。他们要么身体不适(测试结果为阳性)，要么身体健康(测试结果为阴性)。第一列显示它们的实际状态，而第二列是我们的算法预测的状态。用于生成以下内容的代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="6537" class="mp mq it bd mr ms mt mu mv mw mx my mz jz np ka nb kc nq kd nd kf nr kg nf ng bi translated">视角1:</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/feb7440671519fc9dd986ffe80d310da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bic68Z2ZyXolnsVByW4CuA.png"/></div></div></figure><p id="3d36" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你像我一样，通过书籍和出版物学习了大部分统计数据，这些书籍和出版物中有大量医学领域的例子，那么实际值(或<a class="ae ky" href="https://commons.wikimedia.org/wiki/File:Preventive_Medicine_Statistics_Sensitivity_TPR,_Specificity_TNR,_PPV,_NPV,_FDR,_FOR,_ACCuracy,_Likelihood_Ratio,_Diagnostic_Odds_Ratio_2_Final.png" rel="noopener ugc nofollow" target="_blank"> <em class="ly">黄金标准</em> </a>)将作为列显示在顶部，而<strong class="lb iu">真阳性</strong>显示在左上角的单元格中。我们的数据集将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/15dfce9293c74780ce8e2a46246bd294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*hJ5TVvE1TwrRA1v7qoAvcQ.png"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">视角1:实际值在顶部</p></figure><p id="1edf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是生成该代码的python代码:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="ac42" class="nz mq it nv b gy oa ob l oc od">cm = confusion_matrix(data.Predicted, data.Actual, labels=[‘<strong class="nv iu">Positive</strong>’, ‘Negative’])</span><span id="8107" class="nz mq it nv b gy oe ob l oc od">print(cm)</span></pre><p id="7ec7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意我们是如何先通过<code class="fe of og oh nv b">data.Predicted</code>再通过<code class="fe of og oh nv b">data.Actual</code>的。另外<code class="fe of og oh nv b">labels</code>的顺序是先<code class="fe of og oh nv b">Positive</code>。</p><p id="1f21" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/6c1d08081992c49eb90b08ce8ac41618.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/1*wwk3wZPfRSKF_r66CDhgRg.png"/></div></figure><p id="82f9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的记忆黑客记住论点的顺序:</p><blockquote class="lv lw lx"><p id="55b1" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">我只是按照一个人读英语的方式来读——从左到右<strong class="lb iu"><em class="it"/></strong>。而且我<strong class="lb iu"> <em class="it">肯定</em> </strong>这是一个人应该使用的布局。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/7f675a18176b34f50edb52725c7962b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/1*0kwAB1uk5YuZiUo23daaMg.gif"/></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">从左到右</p></figure><p id="f884" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要计算所有指标，可以使用sklearn的<a class="ae ky" href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.classification_report.html" rel="noopener ugc nofollow" target="_blank"> <em class="ly">分类_报告</em> </a>函数。</p><blockquote class="mf"><p id="f77a" class="mg mh it bd mi mj mk ml mm mn mo lu dk translated">我喜欢这个函数，因为不管你的观点是什么，实际的和预测的论点的顺序保持不变。您只需要指定不同的标签顺序。</p></blockquote><pre class="ok ol om on oo nu nv nw nx aw ny bi"><span id="34f4" class="nz mq it nv b gy oa ob l oc od">report = classification_report(data.Actual, data.Predicted, labels=[‘<strong class="nv iu">Positive</strong>’, ‘Negative’])</span><span id="04dc" class="nz mq it nv b gy oe ob l oc od">print(report)</span></pre><p id="a794" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总是先有<em class="ly">实际</em>，后有<em class="ly">预测</em>——按字母顺序排列，很优雅。它生成的输出是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/aff2049982e9d1467fb8132100e68c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Av7-fLDqHpcvYlCXFKaZ7A.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分类报告</p></figure><h1 id="ed94" class="mp mq it bd mr ms mt mu mv mw mx my mz jz np ka nb kc nq kd nd kf nr kg nf ng bi translated">视角二:</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/ce2052fc8b88c55957f15b734193a2d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dxK0RIzWB-yJkvgXmsErPw.png"/></div></div></figure><p id="bad8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那些通过编程文档和教程学习过的人讨厌上面的表示。总是反过来！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/bb75d39d9475391f329b5657077ed30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JOsI64k-sCtjWy9DN1reg.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">预测在最上面</p></figure><blockquote class="lv lw lx"><p id="572b" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">在2x2混淆矩阵中，无论您选择哪个视角，误报<strong class="lb iu">和误报</strong>和误报<strong class="lb iu">的位置都保持不变。</strong></p></blockquote><p id="6103" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">记忆技巧保持不变，从左到右阅读，但这一次通过在<code class="fe of og oh nv b">labels</code>论证中首先提到否定<em class="ly">和</em>来给予它们更多的重视。</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="24f6" class="nz mq it nv b gy oa ob l oc od">cm2 = confusion_matrix(data.Actual, data.Predicted, labels=[‘<strong class="nv iu">Negative</strong>’, ‘Positive’])</span><span id="6b0e" class="nz mq it nv b gy oe ob l oc od">print(cm2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/dfefe2bf4d0bf7b8e71a546b74df9d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:232/format:webp/1*9jFmkWwbqjtraSZKsGE3pg.png"/></div></figure><p id="6cd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">传统的<em class="ly">分类_报告</em>保持不变，唯一的变化是标签的顺序:</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="4d56" class="nz mq it nv b gy oa ob l oc od">report2 = classification_report(data.Actual, data.Predicted, labels=[‘<strong class="nv iu">Negative</strong>’, ‘Positive’])</span><span id="54c9" class="nz mq it nv b gy oe ob l oc od">print(report2)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/849f6ee550041020d8d1993216e845b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_A0K26HhxHklltYRMrXdpA.png"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">分类报告— 2</p></figure><p id="a9a5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，两个结果完全同步了！</p><h1 id="9363" class="mp mq it bd mr ms mt mu mv mw mx my mz jz np ka nb kc nq kd nd kf nr kg nf ng bi translated">附加提示—永远不要忘记公式:</h1><p id="516b" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我经常不得不查阅笔记来记住<em class="ly">精度</em>是什么意思，或者<em class="ly">灵敏度</em>(也称为<em class="ly">回忆</em>)的公式是什么。所以，这是我用来记住它们的记忆技巧。</p><p id="5cee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，他们的实际公式，这样你可以很容易地联系起来。我在这里基于<strong class="lb iu">视角1 </strong>来解释，但是如果你愿意，你可以很容易地为视角2改变它。</p><p id="79d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢先把它们按字母顺序排列，这样就不会把它们搞混了——1。<strong class="lb iu"> P </strong>精度2。<strong class="lb iu"> R </strong> ecall 3。特定性</p><p id="4478" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">精度= TP/(TP+FP)</p><p id="17f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">召回= TP/(TP+FN)</p><p id="d58b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特异性= TN/(TN+FP)</p><p id="6a76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的记忆黑客记住他们:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/1f20f3a22902ba0af24a3fea85fa6251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/1*1PGx39qCZ2pN2KRftuEYzQ.gif"/></div></figure><p id="9f0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Precision是第一个单元格除以行和:2/6 = 0.33</p><p id="2560" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Recall是第一个单元格除以列sum: 2/7 = 0.29</p><p id="00ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特异性是最后一个单元格除以列和:6/10 = 0.60</p><p id="d44f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！让我的生活变得简单了一点，希望对你也有帮助。你有什么对你有用的技巧和诀窍吗？请在评论区告诉我，或者单独给我留言。</p></div><div class="ab cl ov ow hx ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="im in io ip iq"><p id="fc78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对分享想法、提问或简单讨论想法感兴趣？在<a class="ae ky" href="https://www.linkedin.com/in/himanshu-chandra-33512811/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae ky" href="https://www.youtube.com/channel/UChNybQwpqrX9SOc1D4K_x5Q" rel="noopener ugc nofollow" target="_blank"> YouTube </a>、<a class="ae ky" href="https://github.com/HCGrit/MachineLearning-iamJustAStudent" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上或通过我的网站与我联系:<a class="ae ky" href="http://iamjustastudent.com/about" rel="noopener ugc nofollow" target="_blank">我只是一个学生</a>。</p><p id="99aa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">回头见&amp;学习愉快！</p><div class="pc pd gp gr pe pf"><a href="https://www.linkedin.com/in/himanshu-chandra-33512811/" rel="noopener  ugc nofollow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd iu gy z fp pk fr fs pl fu fw is bi translated">Himanshu Chandra —业务主管—ML AI</h2><div class="pm l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">www.linkedin.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps ks pf"/></div></div></a></div></div></div>    
</body>
</html>