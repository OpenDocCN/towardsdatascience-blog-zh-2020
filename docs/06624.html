<html>
<head>
<title>Why Good Codes Don’t Need Comments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么好的代码不需要注释</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-good-codes-dont-need-comments-92f58de19ad2?source=collection_archive---------23-----------------------#2020-05-25">https://towardsdatascience.com/why-good-codes-dont-need-comments-92f58de19ad2?source=collection_archive---------23-----------------------#2020-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="876f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">糟糕的代码到处都是</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3d35373becd62a6bc383dc966bab255e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JYVHG41DJQubpJYLIxzf9w.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@max_duz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>拍照</p></figure><p id="88fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我强烈建议您仔细看看下面两段代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="84c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢哪一个？乍看之下，前者似乎做了很好的工作，清楚地描述了它的每一个操作。然而，这些指令是完全多余和过时的。它们只会给读者增加另一层困惑。<em class="lx">糟糕的评论是命名不当的变量和编程技巧不足的借口。</em></p><p id="a088" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是你写的，下面是你的同事在评估上面的代码时会想到的</p><ul class=""><li id="16b9" class="ly lz it lb b lc ld lf lg li ma lm mb lq mc lu md me mf mg bi translated">他为什么要大声说出来？他认为他的代码阅读器是弱智吗？</li><li id="d471" class="ly lz it lb b lc mh lf mi li mj lm mk lq ml lu md me mf mg bi translated"><em class="lx">这行评论有什么意义？有什么隐藏的意思吗？</em></li><li id="eeb7" class="ly lz it lb b lc mh lf mi li mj lm mk lq ml lu md me mf mg bi translated">为什么他仍然用单个字符作为变量的名字？人们在哪一年练习这个？</li></ul><p id="deaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不希望你的同事不知所措，试图通过你的评论来解释你的意图。通过解释程序中的所有小细节，你认为你是在帮他们的忙，但他们所理解的恰恰相反。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/2e9259da3585cd6ced36aac505ea4059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJCWcZujdi4wpdrzcTWvPA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">布鲁斯·马尔斯在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</p></figure><p id="3d78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，再仔细看看第二段代码。你觉得代码本身就能说明问题吗？不需要解释。</p><p id="7dc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个程序员都能写出机器能理解的代码，一个好的程序员写出人类能理解的代码。好的代码不需要注释，这里有五个原因。</p><h1 id="d8c8" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">不必要的评论会让人分心</strong></h1><p id="dab4" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">写程序的时候，你应该专注于算法、数据结构、性能，不要写那些没有必要的完美注释。</p><p id="ee69" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的代码片段是一个流程。它从变量声明到函数定义，最后是核心执行。不要用除了代码本身没有任何其他解释的注释来打断这个流程。</p><blockquote class="nk"><p id="3c55" class="nl nm it bd nn no np nq nr ns nt lu dk translated">好的代码有节奏，而平庸的代码有很多停顿</p></blockquote><p id="4591" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">当其他程序员阅读你的作品时，他们倾向于将他们的思想插入到你的流程中。持续被多余的评论打断会让人分心。</p><p id="7eeb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释应该在两个代码流之间建立联系，而不是将单个代码流分割成碎片。好的评论称赞你的代码，而不好的评论会让读者偏离主题。</p><p id="979e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在发表任何评论之前，问问你自己它是否有任何作用，而不是分散人们对你的程序的理解。好的代码有节奏，而平庸的代码有很多停顿。</p><h1 id="2cad" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">冲动的评论根源于源代码</strong></h1><p id="1ccd" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">代码库是人们合作的地方。它有许多版本，每个程序员都有平等的机会贡献他们的工作。你不想在公开的源代码中留下一个冲动的评论。它可能会被遗忘，被深埋在主要组件中。</p><p id="03a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一条不好的评论会让你的同事甚至未来的你变得难以理解和困惑。</p><p id="2272" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下三年前有人留下了这样的评论</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="4fbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你有足够的信心删除那个评论吗？已经生产三年了。你的作品已经一团糟了，这个评论会一直在那里。它是永久的，永恒的，永恒的。</p><p id="ec55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释将植根于您的源代码。把它放在那里的程序员可能没有恶意，他只是忘记了以后需要做什么。三年后，由于他已经离开了公司，没有人会知道最初的动机是什么。</p><p id="98b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">帮自己和他人一个忙，不要在代码中留下那样的注释。它笨拙、草率，而且不切实际。万一你还不确定该怎么做，不要着急。</p><p id="ef7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从短期来看，补丁可以及时投入生产，但从长远来看，<em class="lx">它把代码库变成了私人笔记。</em></p><h1 id="c323" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">通过你的代码交流，而不是你的评论</strong></h1><p id="cf93" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">听起来很令人惊讶，你的程序有两个不同的通信目的:一个是与机器通信，另一个是与人类通信。机器完全理解你的指令，但对人类来说并非如此。没有面对面或直接的交谈，误解随时都可能发生。</p><p id="a008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你必须了解你的代码的受众。他们不是五年级学生。他们是你的同龄人，你的同事，或者是工作时坐在你旁边的人。他们不需要知道你为什么选择这样命名你的变量的每一个微小的原因，或者你如何创建这个程序的两页的故事。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/43716c2b7de43e74c48a9aed4c0630cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqGOucUDrtrJBuY5xlvcxA.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mimithian?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">米米·蒂安</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="0bfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你应该开门见山。他们只想知道你的程序是如何工作的，如何使用它。直接、清晰、简洁。良好的沟通是不需要沟通的。</p><h1 id="c674" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">写评论是拖延的一种形式</strong></h1><p id="a8f2" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">这就是我，经过一个小时的编码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="025c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我，在摆脱写不好的评论之后</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="e654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人类的大脑天生懒惰。它倾向于用最不吓人的方式来完成任务。</p><p id="f3c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始编写程序最令人畏惧的事情是设置最初的几行。写一个长而详细的注释来解释算法是如何工作的，可能会给你的大脑一个信号，表明你正在实现某个目标。在你的评论中形成和选择正确的词语是浪费时间。</p><p id="eab2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">完美主义扼杀生产力。你的第一个程序可能会出现混乱，但这完全没关系。没有人会阅读你的代码初稿。</strong></p><p id="96c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能想要多次迭代以产生最终版本。你花时间写世界上最好的评论是在欺骗自己。你以为你在工作，但事实上，你在拖延。</p><p id="e297" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释是开始编程的一种反生产力的方式。 <br/>先打草稿，后编辑。</p><h1 id="c564" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated"><strong class="ak">差评误导读者</strong></h1><p id="5a38" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我们谈到了分心，有时甚至更糟。有些评论比其他评论更有害。</p><p id="0cd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的代码审查员不知道如何读心。他们可以自由理解代码，这可能与你的不同。</p><p id="8c41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你和你的合作者不在同一个页面上时，程序会有一个大的转折。它可能被用来做一些最初没有被设计的事情。</p><p id="5ee8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当交流有问题时，一个不好的评论就会导致误解。结果可能会破坏当前版本，要求临时修复，或者重写整个逻辑。</p><p id="9e43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lx">没有人理解没有人有不好的评论。</em>只有代码才会发光，这才是你应该专注的事情。</p><h1 id="39a3" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">额外收获:真实存在的有趣评论</h1><p id="c83c" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">我个人认为源代码中最有趣的注释</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="714d" class="of mo it ob b gy og oh l oi oj">/*<br/> * Dear Maintainer<br/> *<br/> * Once you are done trying to ‘optimize’ this routine,<br/> * and you have realized what a terrible mistake that was,<br/> * please increment the following counter as a warning<br/> * to the next guy.<br/> *<br/> * total_hours_wasted_here = 73<br/> *<br/> * undeclared variable, error on line 0<br/> *<br/> */</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="9033" class="of mo it ob b gy or os ot ou ov oh l oi oj">Exception up = new Exception("Something is really wrong.");<br/>throw up;  //ha ha</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="5ae5" class="of mo it ob b gy or os ot ou ov oh l oi oj">// I dedicate all this code, all my work, to my wife, Darlene, who will <br/>// have to support me and our three children and the dog once it gets <br/>// released into the public.</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="e437" class="of mo it ob b gy or os ot ou ov oh l oi oj">// drunk, fix later</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="940c" class="of mo it ob b gy or os ot ou ov oh l oi oj">// Magic. Do not touch.</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="ec7f" class="of mo it ob b gy or os ot ou ov oh l oi oj">// They made me write it, against my will.</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><pre class="oa ob oc od aw oe bi"><span id="7230" class="of mo it ob b gy or os ot ou ov oh l oi oj">public boolean isDirty() {<br/>    //Why do you always go out and<br/>    return dirty;<br/>}</span></pre><p id="f806" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以点击查看完整列表<a class="ae ky" href="https://loudprogrammer.net/best-comments-in-source-code-i-ever-encountered/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="ce92" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="98c8" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">不用说，我已经表明了避免多余评论的观点。争取简洁、紧凑和直截了当的编程。编码快乐！</p></div></div>    
</body>
</html>