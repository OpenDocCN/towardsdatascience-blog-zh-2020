<html>
<head>
<title>How To Use Riot API With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中使用Riot API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-use-riot-api-with-python-b93be82dbbd6?source=collection_archive---------0-----------------------#2020-03-20">https://towardsdatascience.com/how-to-use-riot-api-with-python-b93be82dbbd6?source=collection_archive---------0-----------------------#2020-03-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3c72" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本教程中，我将使用Riot API来展示如何构建一个像<a class="ae ki" href="http://op.gg/" rel="noopener ugc nofollow" target="_blank"> op.gg </a>这样的应用程序。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/da45226861c120be019a17615c23ab4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*slcutOi2fzp6lzT0"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae ki" href="https://unsplash.com/@rxspawn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">弗洛里安·奥利佛</a>在<a class="ae ki" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</p></figure><p id="9c03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我建议在你开始做任何事情之前，阅读他们的<a class="ae ki" href="https://developer.riotgames.com/docs/portal" rel="noopener ugc nofollow" target="_blank">文档</a>以了解他们API的最新变化。</p><h1 id="054b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">什么是Riot Games API？</h1><p id="1d8b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Riot Games API是一个REST API，它向开发者提供数据，用于构建我们自己的应用程序或网站。目前，所有英雄联盟API都是版本4(2020年3月19日更新)。从这个版本开始，他们不再在API路径中包含次要版本。</p><p id="161b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是您可以从Riot Games API获得的一些数据:</p><ul class=""><li id="c0eb" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">服务状态。</li><li id="9a38" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">召唤师详细信息:姓名，级别，个人资料图标，帐户id。</li><li id="6bc3" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">通过召唤师名字匹配历史和匹配细节和时间线。</li><li id="7f11" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">某人当前的游戏信息，如果有人在游戏中。</li><li id="55ec" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">其他信息，查看<a class="ae ki" href="https://developer.riotgames.com/api-methods/" rel="noopener ugc nofollow" target="_blank"> API文档</a></li></ul><h1 id="7bcf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Riot API密钥入门</h1><p id="be2b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你总是需要一把钥匙来访问Riot Games API。我们将讨论如何获得API密钥。</p><p id="74b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，使用您的Riot帐户登录<a class="ae ki" href="https://developer.riotgames.com/" rel="noopener ugc nofollow" target="_blank"> Riot开发者门户</a>。就是你每次玩英雄联盟用的账号。</p><p id="3768" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在你的<code class="fe ng nh ni nj b">Dashboard</code>里，有一个<code class="fe ng nh ni nj b">DEVELOPMENT API KEY</code>。请记住，密钥将在24小时后过期。<strong class="lb iu">不要与任何人共享您的API密钥。如果你从Riot API得到一个“403”响应，你可能只需要刷新你的密钥。</strong></p><p id="b12e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您可以注册一个个人防暴产品，那么你就不需要每24小时刷新您的密钥。通常情况下，个人申请需要两周时间审核。</p><p id="360c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住您提出的请求数量，因为开发API密钥和个人产品密钥有上限:</p><ul class=""><li id="cabd" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">每秒20个请求</li><li id="776d" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">每两分钟100个请求</li></ul><p id="8268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你注册了一个生产API密匙，那就更难注册了。上限是:</p><ul class=""><li id="99d3" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">每10秒钟有3000个请求</li><li id="26c5" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">每10分钟18万次请求</li></ul><p id="a9d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完成上述所有要求后，现在您应该获得一个开发API密钥。让我们试着看看<a class="ae ki" href="https://lol.gamepedia.com/Doublelift" rel="noopener ugc nofollow" target="_blank"> Doublelift </a> Riot账户。使用您的API密钥通过access在Riot API上进行测试:</p><pre class="kk kl km kn gt nk nj nl nm aw nn bi"><span id="9e64" class="no lw it nj b gy np nq l nr ns"><a class="ae ki" href="https://na1.api.riotgames.com/lol/summoner/v4/summoners/by-name/Doublelift?api_key=RGAPI-YOUR-API-KEY" rel="noopener ugc nofollow" target="_blank">https://na1.api.riotgames.com/lol/summoner/v4/summoners/by-name/Doublelift?api_key=RGAPI-YOUR-API-KEY</a></span></pre><p id="81bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果应该是这样的:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="1dc2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，Riot API是区域化的，您需要选择您的区域。还有，账号详情，只有召唤师的名字容易获取，不加密。其他账户id信息是加密的。</p><p id="369b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有，召唤师和账号id只在每个地区是唯一的，PUUIDs是全球唯一的。</p><h1 id="a768" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装暴动监视器</h1><p id="8a3a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你在谷歌上搜索<code class="fe ng nh ni nj b">riot api </code>或者<code class="fe ng nh ni nj b">league of legends api</code>，有很多库可以使用。这里有一个<a class="ae ki" href="https://riot-api-libraries.readthedocs.io/en/latest/libraries.html" rel="noopener ugc nofollow" target="_blank"> Riot API库</a>的列表。他们中的许多人都没有得到很好的维护，正如你所知，Riot已经将他们的API版本升级到V4，并取消了所有旧版本。</p><p id="2a30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我使用了一个名为<a class="ae ki" href="https://github.com/pseudonym117/Riot-Watcher" rel="noopener ugc nofollow" target="_blank">的Python库。首先，你可以轻松地运行</a></p><pre class="kk kl km kn gt nk nj nl nm aw nn bi"><span id="15e2" class="no lw it nj b gy np nq l nr ns">pip3 install riotwatcher</span></pre><p id="9019" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看这样的帐户信息，我们只需尝试从URL:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="a1a7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">访问等级信息</h1><p id="d683" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">我们还可以使用一行代码获得排名信息:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="e8ac" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">访问匹配数据</h1><p id="fe80" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">例如，我们想获取最后的游戏信息。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nv"><img src="../Images/4f09fe4e5264105b894fba2de57921b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gqUKJuMT9uliB2-6xWjPQ.png"/></div></div></figure><p id="e9d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后对比op.gg数据。我们得到了一些准确的数据，但很难读懂。我们需要访问Champion和其他静态数据。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nw"><img src="../Images/5a4495c0e8200a91d1557981a5aaff6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i8nt1eS-F24uZDnU8P_yow.png"/></div></div><p class="kv kw gj gh gi kx ky bd b be z dk translated">截图自<a class="ae ki" href="http://op.gg" rel="noopener ugc nofollow" target="_blank"> op.gg </a></p></figure><h1 id="81d5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">存取数据龙</h1><p id="a00f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们只得到每个冠军的id。为了更好的理解，我们需要知道每一个的名字。</p><p id="24b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从Data Dragon可以获得《英雄联盟》的所有静态信息数据。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="fe75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行代码后，我们得到了类似这样的结果。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nx"><img src="../Images/0690ba95efdab89aa41f96d101e15a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zj9NNcXnE0CO6aildnxLDg.png"/></div></div></figure><p id="93b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，法术，符文和物品信息将从数据龙获得。现在，您几乎已经获得了构建op.gg这样的应用程序所需的所有数据。</p><h1 id="bed7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">确定冠军位置</h1><p id="ea4b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你刊登最新的比赛细节。你可能会注意到位置信息和我们从op.gg得到的有点不同。</p><pre class="kk kl km kn gt nk nj nl nm aw nn bi"><span id="63fd" class="no lw it nj b gy np nq l nr ns">‘role’: ‘DUO_CARRY’,</span><span id="2ff6" class="no lw it nj b gy ny nq l nr ns">‘lane’: ‘BOTTOM’</span></pre><p id="152b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以建立一个地图来确定每个冠军的位置。</p><ul class=""><li id="df7a" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">(中路，独奏):中路</li><li id="22ba" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">(TOP_LANE，SOLO): TOP</li><li id="d08f" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">(丛林，无):丛林</li><li id="0a2a" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">(BOT_LANE，DUO_CARRY):底部</li><li id="ea88" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">(BOT_LANE，DUO_SUPPORT):实用程序</li></ul><h1 id="fd1d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">下一步是什么</h1><p id="bc2e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在，您已经了解了什么是Riot Games API，并且已经成功地使用python从API中检索了第一批数据。而这些几乎都是构建op.gg的数据。</p><p id="4c51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Riot API还提供对实时客户端数据和重放数据的访问。我打算谈谈如何构建一个基本的实时客户端脚本，为您提供有关您当前游戏的信息。如果你有任何问题，请在下面提问。</p><h1 id="12d8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">了解更多信息</h1><ul class=""><li id="617b" class="ms mt it lb b lc mn lf mo li nz lm oa lq ob lu mx my mz na bi translated">你可以从<a class="ae ki" href="https://developer.riotgames.com/ddragon.html" rel="noopener ugc nofollow" target="_blank"> DataDragon </a>获得所有关于冠军、物品等的信息。</li><li id="bd12" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">暴乱开发者<a class="ae ki" href="https://discordapp.com/invite/riotgamesdevrel" rel="noopener ugc nofollow" target="_blank">不和频道</a>。</li></ul></div></div>    
</body>
</html>